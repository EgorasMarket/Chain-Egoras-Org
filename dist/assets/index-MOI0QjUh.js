var A$=(e,i)=>()=>(i||e((i={exports:{}}).exports,i),i.exports);var C$=A$((exports,module)=>{function _mergeNamespaces(e,i){for(var s=0;s<i.length;s++){const a=i[s];if(typeof a!="string"&&!Array.isArray(a)){for(const o in a)if(o!=="default"&&!(o in e)){const c=Object.getOwnPropertyDescriptor(a,o);c&&Object.defineProperty(e,o,c.get?c:{enumerable:!0,get:()=>a[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function s(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(o){if(o.ep)return;o.ep=!0;const c=s(o);fetch(o.href,c)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(e.__esModule)return e;var i=e.default;if(typeof i=="function"){var s=function a(){return this instanceof a?Reflect.construct(i,arguments,this.constructor):i.apply(this,arguments)};s.prototype=i.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var o=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(s,a,o.get?o:{enumerable:!0,get:function(){return e[a]}})}),s}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$1=Symbol.for("react.element"),n$1=Symbol.for("react.portal"),p$2=Symbol.for("react.fragment"),q$1=Symbol.for("react.strict_mode"),r$1=Symbol.for("react.profiler"),t=Symbol.for("react.provider"),u=Symbol.for("react.context"),v$3=Symbol.for("react.forward_ref"),w$2=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),z$3=Symbol.iterator;function A$1(e){return e===null||typeof e!="object"?null:(e=z$3&&e[z$3]||e["@@iterator"],typeof e=="function"?e:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$1=Object.assign,D$1={};function E$1(e,i,s){this.props=e,this.context=i,this.refs=D$1,this.updater=s||B$1}E$1.prototype.isReactComponent={};E$1.prototype.setState=function(e,i){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,i,"setState")};E$1.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function F(){}F.prototype=E$1.prototype;function G$1(e,i,s){this.props=e,this.context=i,this.refs=D$1,this.updater=s||B$1}var H$1=G$1.prototype=new F;H$1.constructor=G$1;C$1(H$1,E$1.prototype);H$1.isPureReactComponent=!0;var I$1=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$1(e,i,s){var a,o={},c=null,d=null;if(i!=null)for(a in i.ref!==void 0&&(d=i.ref),i.key!==void 0&&(c=""+i.key),i)J.call(i,a)&&!L$1.hasOwnProperty(a)&&(o[a]=i[a]);var g=arguments.length-2;if(g===1)o.children=s;else if(1<g){for(var b=Array(g),j=0;j<g;j++)b[j]=arguments[j+2];o.children=b}if(e&&e.defaultProps)for(a in g=e.defaultProps,g)o[a]===void 0&&(o[a]=g[a]);return{$$typeof:l$1,type:e,key:c,ref:d,props:o,_owner:K$1.current}}function N$1(e,i){return{$$typeof:l$1,type:e.type,key:i,ref:e.ref,props:e.props,_owner:e._owner}}function O$1(e){return typeof e=="object"&&e!==null&&e.$$typeof===l$1}function escape(e){var i={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return i[s]})}var P$1=/\/+/g;function Q$1(e,i){return typeof e=="object"&&e!==null&&e.key!=null?escape(""+e.key):i.toString(36)}function R$1(e,i,s,a,o){var c=typeof e;(c==="undefined"||c==="boolean")&&(e=null);var d=!1;if(e===null)d=!0;else switch(c){case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case l$1:case n$1:d=!0}}if(d)return d=e,o=o(d),e=a===""?"."+Q$1(d,0):a,I$1(o)?(s="",e!=null&&(s=e.replace(P$1,"$&/")+"/"),R$1(o,i,s,"",function(j){return j})):o!=null&&(O$1(o)&&(o=N$1(o,s+(!o.key||d&&d.key===o.key?"":(""+o.key).replace(P$1,"$&/")+"/")+e)),i.push(o)),1;if(d=0,a=a===""?".":a+":",I$1(e))for(var g=0;g<e.length;g++){c=e[g];var b=a+Q$1(c,g);d+=R$1(c,i,s,b,o)}else if(b=A$1(e),typeof b=="function")for(e=b.call(e),g=0;!(c=e.next()).done;)c=c.value,b=a+Q$1(c,g++),d+=R$1(c,i,s,b,o);else if(c==="object")throw i=String(e),Error("Objects are not valid as a React child (found: "+(i==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":i)+"). If you meant to render a collection of children, use an array instead.");return d}function S$1(e,i,s){if(e==null)return e;var a=[],o=0;return R$1(e,a,"","",function(c){return i.call(s,c,o++)}),a}function T$1(e){if(e._status===-1){var i=e._result;i=i(),i.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=i)}if(e._status===1)return e._result.default;throw e._result}var U$1={current:null},V$1={transition:null},W$1={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$1};react_production_min.Children={map:S$1,forEach:function(e,i,s){S$1(e,function(){i.apply(this,arguments)},s)},count:function(e){var i=0;return S$1(e,function(){i++}),i},toArray:function(e){return S$1(e,function(i){return i})||[]},only:function(e){if(!O$1(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};react_production_min.Component=E$1;react_production_min.Fragment=p$2;react_production_min.Profiler=r$1;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$1;react_production_min.Suspense=w$2;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.cloneElement=function(e,i,s){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=C$1({},e.props),o=e.key,c=e.ref,d=e._owner;if(i!=null){if(i.ref!==void 0&&(c=i.ref,d=K$1.current),i.key!==void 0&&(o=""+i.key),e.type&&e.type.defaultProps)var g=e.type.defaultProps;for(b in i)J.call(i,b)&&!L$1.hasOwnProperty(b)&&(a[b]=i[b]===void 0&&g!==void 0?g[b]:i[b])}var b=arguments.length-2;if(b===1)a.children=s;else if(1<b){g=Array(b);for(var j=0;j<b;j++)g[j]=arguments[j+2];a.children=g}return{$$typeof:l$1,type:e.type,key:o,ref:c,props:a,_owner:d}};react_production_min.createContext=function(e){return e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:t,_context:e},e.Consumer=e};react_production_min.createElement=M$1;react_production_min.createFactory=function(e){var i=M$1.bind(null,e);return i.type=e,i};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(e){return{$$typeof:v$3,render:e}};react_production_min.isValidElement=O$1;react_production_min.lazy=function(e){return{$$typeof:y,_payload:{_status:-1,_result:e},_init:T$1}};react_production_min.memo=function(e,i){return{$$typeof:x,type:e,compare:i===void 0?null:i}};react_production_min.startTransition=function(e){var i=V$1.transition;V$1.transition={};try{e()}finally{V$1.transition=i}};react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min.useCallback=function(e,i){return U$1.current.useCallback(e,i)};react_production_min.useContext=function(e){return U$1.current.useContext(e)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(e){return U$1.current.useDeferredValue(e)};react_production_min.useEffect=function(e,i){return U$1.current.useEffect(e,i)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function(e,i,s){return U$1.current.useImperativeHandle(e,i,s)};react_production_min.useInsertionEffect=function(e,i){return U$1.current.useInsertionEffect(e,i)};react_production_min.useLayoutEffect=function(e,i){return U$1.current.useLayoutEffect(e,i)};react_production_min.useMemo=function(e,i){return U$1.current.useMemo(e,i)};react_production_min.useReducer=function(e,i,s){return U$1.current.useReducer(e,i,s)};react_production_min.useRef=function(e){return U$1.current.useRef(e)};react_production_min.useState=function(e){return U$1.current.useState(e)};react_production_min.useSyncExternalStore=function(e,i,s){return U$1.current.useSyncExternalStore(e,i,s)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.2.0";react.exports=react_production_min;var reactExports=react.exports;const React$1=getDefaultExportFromCjs(reactExports),React$2=_mergeNamespaces({__proto__:null,default:React$1},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=reactExports,k=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m$1=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$1={key:!0,ref:!0,__self:!0,__source:!0};function q(e,i,s){var a,o={},c=null,d=null;s!==void 0&&(c=""+s),i.key!==void 0&&(c=""+i.key),i.ref!==void 0&&(d=i.ref);for(a in i)m$1.call(i,a)&&!p$1.hasOwnProperty(a)&&(o[a]=i[a]);if(e&&e.defaultProps)for(a in i=e.defaultProps,i)o[a]===void 0&&(o[a]=i[a]);return{$$typeof:k,type:e,key:c,ref:d,props:o,_owner:n.current}}reactJsxRuntime_production_min.Fragment=l;reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function i(Ft,Gr){var gn=Ft.length;Ft.push(Gr);e:for(;0<gn;){var un=gn-1>>>1,Zn=Ft[un];if(0<o(Zn,Gr))Ft[un]=Gr,Ft[gn]=Zn,gn=un;else break e}}function s(Ft){return Ft.length===0?null:Ft[0]}function a(Ft){if(Ft.length===0)return null;var Gr=Ft[0],gn=Ft.pop();if(gn!==Gr){Ft[0]=gn;e:for(var un=0,Zn=Ft.length,xu=Zn>>>1;un<xu;){var ou=2*(un+1)-1,sp=Ft[ou],wu=ou+1,l1=Ft[wu];if(0>o(sp,gn))wu<Zn&&0>o(l1,sp)?(Ft[un]=l1,Ft[wu]=gn,un=wu):(Ft[un]=sp,Ft[ou]=gn,un=ou);else if(wu<Zn&&0>o(l1,gn))Ft[un]=l1,Ft[wu]=gn,un=wu;else break e}}return Gr}function o(Ft,Gr){var gn=Ft.sortIndex-Gr.sortIndex;return gn!==0?gn:Ft.id-Gr.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var d=Date,g=d.now();e.unstable_now=function(){return d.now()-g}}var b=[],j=[],_e=1,$=null,rt=3,st=!1,ut=!1,gt=!1,wt=typeof setTimeout=="function"?setTimeout:null,yt=typeof clearTimeout=="function"?clearTimeout:null,At=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Ct(Ft){for(var Gr=s(j);Gr!==null;){if(Gr.callback===null)a(j);else if(Gr.startTime<=Ft)a(j),Gr.sortIndex=Gr.expirationTime,i(b,Gr);else break;Gr=s(j)}}function Tt(Ft){if(gt=!1,Ct(Ft),!ut)if(s(b)!==null)ut=!0,us(kt);else{var Gr=s(j);Gr!==null&&hn(Tt,Gr.startTime-Ft)}}function kt(Ft,Gr){ut=!1,gt&&(gt=!1,yt(Lt),Lt=-1),st=!0;var gn=rt;try{for(Ct(Gr),$=s(b);$!==null&&(!($.expirationTime>Gr)||Ft&&!dr());){var un=$.callback;if(typeof un=="function"){$.callback=null,rt=$.priorityLevel;var Zn=un($.expirationTime<=Gr);Gr=e.unstable_now(),typeof Zn=="function"?$.callback=Zn:$===s(b)&&a(b),Ct(Gr)}else a(b);$=s(b)}if($!==null)var xu=!0;else{var ou=s(j);ou!==null&&hn(Tt,ou.startTime-Gr),xu=!1}return xu}finally{$=null,rt=gn,st=!1}}var Pt=!1,It=null,Lt=-1,Nt=5,Ht=-1;function dr(){return!(e.unstable_now()-Ht<Nt)}function hs(){if(It!==null){var Ft=e.unstable_now();Ht=Ft;var Gr=!0;try{Gr=It(!0,Ft)}finally{Gr?_s():(Pt=!1,It=null)}}else Pt=!1}var _s;if(typeof At=="function")_s=function(){At(hs)};else if(typeof MessageChannel<"u"){var ds=new MessageChannel,Nn=ds.port2;ds.port1.onmessage=hs,_s=function(){Nn.postMessage(null)}}else _s=function(){wt(hs,0)};function us(Ft){It=Ft,Pt||(Pt=!0,_s())}function hn(Ft,Gr){Lt=wt(function(){Ft(e.unstable_now())},Gr)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Ft){Ft.callback=null},e.unstable_continueExecution=function(){ut||st||(ut=!0,us(kt))},e.unstable_forceFrameRate=function(Ft){0>Ft||125<Ft?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Nt=0<Ft?Math.floor(1e3/Ft):5},e.unstable_getCurrentPriorityLevel=function(){return rt},e.unstable_getFirstCallbackNode=function(){return s(b)},e.unstable_next=function(Ft){switch(rt){case 1:case 2:case 3:var Gr=3;break;default:Gr=rt}var gn=rt;rt=Gr;try{return Ft()}finally{rt=gn}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Ft,Gr){switch(Ft){case 1:case 2:case 3:case 4:case 5:break;default:Ft=3}var gn=rt;rt=Ft;try{return Gr()}finally{rt=gn}},e.unstable_scheduleCallback=function(Ft,Gr,gn){var un=e.unstable_now();switch(typeof gn=="object"&&gn!==null?(gn=gn.delay,gn=typeof gn=="number"&&0<gn?un+gn:un):gn=un,Ft){case 1:var Zn=-1;break;case 2:Zn=250;break;case 5:Zn=1073741823;break;case 4:Zn=1e4;break;default:Zn=5e3}return Zn=gn+Zn,Ft={id:_e++,callback:Gr,priorityLevel:Ft,startTime:gn,expirationTime:Zn,sortIndex:-1},gn>un?(Ft.sortIndex=gn,i(j,Ft),s(b)===null&&Ft===s(j)&&(gt?(yt(Lt),Lt=-1):gt=!0,hn(Tt,gn-un))):(Ft.sortIndex=Zn,i(b,Ft),ut||st||(ut=!0,us(kt))),Ft},e.unstable_shouldYield=dr,e.unstable_wrapCallback=function(Ft){var Gr=rt;return function(){var gn=rt;rt=Gr;try{return Ft.apply(this,arguments)}finally{rt=gn}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa$1=reactExports,ca=schedulerExports;function p(e){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)i+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da$1=new Set,ea$1={};function fa$1(e,i){ha$1(e,i),ha$1(e+"Capture",i)}function ha$1(e,i){for(ea$1[e]=i,e=0;e<i.length;e++)da$1.add(i[e])}var ia$1=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja$1=Object.prototype.hasOwnProperty,ka$1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la$1={},ma$1={};function oa$1(e){return ja$1.call(ma$1,e)?!0:ja$1.call(la$1,e)?!1:ka$1.test(e)?ma$1[e]=!0:(la$1[e]=!0,!1)}function pa$1(e,i,s,a){if(s!==null&&s.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return a?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function qa$1(e,i,s,a){if(i===null||typeof i>"u"||pa$1(e,i,s,a))return!0;if(a)return!1;if(s!==null)switch(s.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function v$2(e,i,s,a,o,c,d){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=a,this.attributeNamespace=o,this.mustUseProperty=s,this.propertyName=e,this.type=i,this.sanitizeURL=c,this.removeEmptyString=d}var z$2={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){z$2[e]=new v$2(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var i=e[0];z$2[i]=new v$2(i,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){z$2[e]=new v$2(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){z$2[e]=new v$2(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){z$2[e]=new v$2(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){z$2[e]=new v$2(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){z$2[e]=new v$2(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){z$2[e]=new v$2(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){z$2[e]=new v$2(e,5,!1,e.toLowerCase(),null,!1,!1)});var ra$1=/[\-:]([a-z])/g;function sa$1(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var i=e.replace(ra$1,sa$1);z$2[i]=new v$2(i,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var i=e.replace(ra$1,sa$1);z$2[i]=new v$2(i,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var i=e.replace(ra$1,sa$1);z$2[i]=new v$2(i,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){z$2[e]=new v$2(e,1,!1,e.toLowerCase(),null,!1,!1)});z$2.xlinkHref=new v$2("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){z$2[e]=new v$2(e,1,!1,e.toLowerCase(),null,!0,!0)});function ta$1(e,i,s,a){var o=z$2.hasOwnProperty(i)?z$2[i]:null;(o!==null?o.type!==0:a||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(qa$1(i,s,o,a)&&(s=null),a||o===null?oa$1(i)&&(s===null?e.removeAttribute(i):e.setAttribute(i,""+s)):o.mustUseProperty?e[o.propertyName]=s===null?o.type===3?!1:"":s:(i=o.attributeName,a=o.attributeNamespace,s===null?e.removeAttribute(i):(o=o.type,s=o===3||o===4&&s===!0?"":""+s,a?e.setAttributeNS(a,i,s):e.setAttribute(i,s))))}var ua$1=aa$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va$1=Symbol.for("react.element"),wa$1=Symbol.for("react.portal"),ya$1=Symbol.for("react.fragment"),za$1=Symbol.for("react.strict_mode"),Aa$1=Symbol.for("react.profiler"),Ba$1=Symbol.for("react.provider"),Ca$1=Symbol.for("react.context"),Da$1=Symbol.for("react.forward_ref"),Ea$1=Symbol.for("react.suspense"),Fa$1=Symbol.for("react.suspense_list"),Ga$1=Symbol.for("react.memo"),Ha$1=Symbol.for("react.lazy"),Ia$1=Symbol.for("react.offscreen"),Ja$1=Symbol.iterator;function Ka$1(e){return e===null||typeof e!="object"?null:(e=Ja$1&&e[Ja$1]||e["@@iterator"],typeof e=="function"?e:null)}var A=Object.assign,La$1;function Ma$1(e){if(La$1===void 0)try{throw Error()}catch(s){var i=s.stack.trim().match(/\n( *(at )?)/);La$1=i&&i[1]||""}return`
`+La$1+e}var Na$1=!1;function Oa$1(e,i){if(!e||Na$1)return"";Na$1=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(j){var a=j}Reflect.construct(e,[],i)}else{try{i.call()}catch(j){a=j}e.call(i.prototype)}else{try{throw Error()}catch(j){a=j}e()}}catch(j){if(j&&a&&typeof j.stack=="string"){for(var o=j.stack.split(`
`),c=a.stack.split(`
`),d=o.length-1,g=c.length-1;1<=d&&0<=g&&o[d]!==c[g];)g--;for(;1<=d&&0<=g;d--,g--)if(o[d]!==c[g]){if(d!==1||g!==1)do if(d--,g--,0>g||o[d]!==c[g]){var b=`
`+o[d].replace(" at new "," at ");return e.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",e.displayName)),b}while(1<=d&&0<=g);break}}}finally{Na$1=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?Ma$1(e):""}function Pa$1(e){switch(e.tag){case 5:return Ma$1(e.type);case 16:return Ma$1("Lazy");case 13:return Ma$1("Suspense");case 19:return Ma$1("SuspenseList");case 0:case 2:case 15:return e=Oa$1(e.type,!1),e;case 11:return e=Oa$1(e.type.render,!1),e;case 1:return e=Oa$1(e.type,!0),e;default:return""}}function Qa$1(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ya$1:return"Fragment";case wa$1:return"Portal";case Aa$1:return"Profiler";case za$1:return"StrictMode";case Ea$1:return"Suspense";case Fa$1:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ca$1:return(e.displayName||"Context")+".Consumer";case Ba$1:return(e._context.displayName||"Context")+".Provider";case Da$1:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ga$1:return i=e.displayName||null,i!==null?i:Qa$1(e.type)||"Memo";case Ha$1:i=e._payload,e=e._init;try{return Qa$1(e(i))}catch{}}return null}function Ra$1(e){var i=e.type;switch(e.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=i.render,e=e.displayName||e.name||"",i.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa$1(i);case 8:return i===za$1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Sa$1(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ta$1(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ua$1(e){var i=Ta$1(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,i),a=""+e[i];if(!e.hasOwnProperty(i)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var o=s.get,c=s.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return o.call(this)},set:function(d){a=""+d,c.call(this,d)}}),Object.defineProperty(e,i,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(d){a=""+d},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function Va$1(e){e._valueTracker||(e._valueTracker=Ua$1(e))}function Wa$1(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var s=i.getValue(),a="";return e&&(a=Ta$1(e)?e.checked?"true":"false":e.value),e=a,e!==s?(i.setValue(e),!0):!1}function Xa$1(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ya$1(e,i){var s=i.checked;return A({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function Za$1(e,i){var s=i.defaultValue==null?"":i.defaultValue,a=i.checked!=null?i.checked:i.defaultChecked;s=Sa$1(i.value!=null?i.value:s),e._wrapperState={initialChecked:a,initialValue:s,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function ab$1(e,i){i=i.checked,i!=null&&ta$1(e,"checked",i,!1)}function bb$1(e,i){ab$1(e,i);var s=Sa$1(i.value),a=i.type;if(s!=null)a==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}i.hasOwnProperty("value")?cb$1(e,i.type,s):i.hasOwnProperty("defaultValue")&&cb$1(e,i.type,Sa$1(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(e.defaultChecked=!!i.defaultChecked)}function db$1(e,i,s){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var a=i.type;if(!(a!=="submit"&&a!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+e._wrapperState.initialValue,s||i===e.value||(e.value=i),e.defaultValue=i}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function cb$1(e,i,s){(i!=="number"||Xa$1(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var eb$1=Array.isArray;function fb(e,i,s,a){if(e=e.options,i){i={};for(var o=0;o<s.length;o++)i["$"+s[o]]=!0;for(s=0;s<e.length;s++)o=i.hasOwnProperty("$"+e[s].value),e[s].selected!==o&&(e[s].selected=o),o&&a&&(e[s].defaultSelected=!0)}else{for(s=""+Sa$1(s),i=null,o=0;o<e.length;o++){if(e[o].value===s){e[o].selected=!0,a&&(e[o].defaultSelected=!0);return}i!==null||e[o].disabled||(i=e[o])}i!==null&&(i.selected=!0)}}function gb$1(e,i){if(i.dangerouslySetInnerHTML!=null)throw Error(p(91));return A({},i,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function hb$1(e,i){var s=i.value;if(s==null){if(s=i.children,i=i.defaultValue,s!=null){if(i!=null)throw Error(p(92));if(eb$1(s)){if(1<s.length)throw Error(p(93));s=s[0]}i=s}i==null&&(i=""),s=i}e._wrapperState={initialValue:Sa$1(s)}}function ib$1(e,i){var s=Sa$1(i.value),a=Sa$1(i.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),i.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),a!=null&&(e.defaultValue=""+a)}function jb$1(e){var i=e.textContent;i===e._wrapperState.initialValue&&i!==""&&i!==null&&(e.value=i)}function kb$1(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb$1(e,i){return e==null||e==="http://www.w3.org/1999/xhtml"?kb$1(i):e==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var mb$1,nb=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,s,a,o){MSApp.execUnsafeLocalFunction(function(){return e(i,s,a,o)})}:e}(function(e,i){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=i;else{for(mb$1=mb$1||document.createElement("div"),mb$1.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=mb$1.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;i.firstChild;)e.appendChild(i.firstChild)}});function ob$1(e,i){if(i){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=i;return}}e.textContent=i}var pb$1={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb$1=["Webkit","ms","Moz","O"];Object.keys(pb$1).forEach(function(e){qb$1.forEach(function(i){i=i+e.charAt(0).toUpperCase()+e.substring(1),pb$1[i]=pb$1[e]})});function rb$1(e,i,s){return i==null||typeof i=="boolean"||i===""?"":s||typeof i!="number"||i===0||pb$1.hasOwnProperty(e)&&pb$1[e]?(""+i).trim():i+"px"}function sb(e,i){e=e.style;for(var s in i)if(i.hasOwnProperty(s)){var a=s.indexOf("--")===0,o=rb$1(s,i[s],a);s==="float"&&(s="cssFloat"),a?e.setProperty(s,o):e[s]=o}}var tb$1=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub$1(e,i){if(i){if(tb$1[e]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(p(137,e));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(p(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(p(61))}if(i.style!=null&&typeof i.style!="object")throw Error(p(62))}}function vb$1(e,i){if(e.indexOf("-")===-1)return typeof i.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb$1=null;function xb$1(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var yb$1=null,zb$1=null,Ab$1=null;function Bb$1(e){if(e=Cb$1(e)){if(typeof yb$1!="function")throw Error(p(280));var i=e.stateNode;i&&(i=Db$1(i),yb$1(e.stateNode,e.type,i))}}function Eb$1(e){zb$1?Ab$1?Ab$1.push(e):Ab$1=[e]:zb$1=e}function Fb$1(){if(zb$1){var e=zb$1,i=Ab$1;if(Ab$1=zb$1=null,Bb$1(e),i)for(e=0;e<i.length;e++)Bb$1(i[e])}}function Gb$1(e,i){return e(i)}function Hb$1(){}var Ib$1=!1;function Jb(e,i,s){if(Ib$1)return e(i,s);Ib$1=!0;try{return Gb$1(e,i,s)}finally{Ib$1=!1,(zb$1!==null||Ab$1!==null)&&(Hb$1(),Fb$1())}}function Kb$1(e,i){var s=e.stateNode;if(s===null)return null;var a=Db$1(s);if(a===null)return null;s=a[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(p(231,i,typeof s));return s}var Lb$1=!1;if(ia$1)try{var Mb$1={};Object.defineProperty(Mb$1,"passive",{get:function(){Lb$1=!0}}),window.addEventListener("test",Mb$1,Mb$1),window.removeEventListener("test",Mb$1,Mb$1)}catch{Lb$1=!1}function Nb$1(e,i,s,a,o,c,d,g,b){var j=Array.prototype.slice.call(arguments,3);try{i.apply(s,j)}catch(_e){this.onError(_e)}}var Ob$1=!1,Pb$1=null,Qb$1=!1,Rb$1=null,Sb$1={onError:function(e){Ob$1=!0,Pb$1=e}};function Tb$1(e,i,s,a,o,c,d,g,b){Ob$1=!1,Pb$1=null,Nb$1.apply(Sb$1,arguments)}function Ub$1(e,i,s,a,o,c,d,g,b){if(Tb$1.apply(this,arguments),Ob$1){if(Ob$1){var j=Pb$1;Ob$1=!1,Pb$1=null}else throw Error(p(198));Qb$1||(Qb$1=!0,Rb$1=j)}}function Vb$1(e){var i=e,s=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,i.flags&4098&&(s=i.return),e=i.return;while(e)}return i.tag===3?s:null}function Wb$1(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function Xb$1(e){if(Vb$1(e)!==e)throw Error(p(188))}function Yb$1(e){var i=e.alternate;if(!i){if(i=Vb$1(e),i===null)throw Error(p(188));return i!==e?null:e}for(var s=e,a=i;;){var o=s.return;if(o===null)break;var c=o.alternate;if(c===null){if(a=o.return,a!==null){s=a;continue}break}if(o.child===c.child){for(c=o.child;c;){if(c===s)return Xb$1(o),e;if(c===a)return Xb$1(o),i;c=c.sibling}throw Error(p(188))}if(s.return!==a.return)s=o,a=c;else{for(var d=!1,g=o.child;g;){if(g===s){d=!0,s=o,a=c;break}if(g===a){d=!0,a=o,s=c;break}g=g.sibling}if(!d){for(g=c.child;g;){if(g===s){d=!0,s=c,a=o;break}if(g===a){d=!0,a=c,s=o;break}g=g.sibling}if(!d)throw Error(p(189))}}if(s.alternate!==a)throw Error(p(190))}if(s.tag!==3)throw Error(p(188));return s.stateNode.current===s?e:i}function Zb$1(e){return e=Yb$1(e),e!==null?$b(e):null}function $b(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var i=$b(e);if(i!==null)return i;e=e.sibling}return null}var ac$1=ca.unstable_scheduleCallback,bc$1=ca.unstable_cancelCallback,cc$1=ca.unstable_shouldYield,dc$1=ca.unstable_requestPaint,B=ca.unstable_now,ec$1=ca.unstable_getCurrentPriorityLevel,fc$1=ca.unstable_ImmediatePriority,gc$1=ca.unstable_UserBlockingPriority,hc$1=ca.unstable_NormalPriority,ic$1=ca.unstable_LowPriority,jc$1=ca.unstable_IdlePriority,kc$1=null,lc$1=null;function mc$1(e){if(lc$1&&typeof lc$1.onCommitFiberRoot=="function")try{lc$1.onCommitFiberRoot(kc$1,e,void 0,(e.current.flags&128)===128)}catch{}}var oc$1=Math.clz32?Math.clz32:nc$1,pc$1=Math.log,qc$1=Math.LN2;function nc$1(e){return e>>>=0,e===0?32:31-(pc$1(e)/qc$1|0)|0}var rc$1=64,sc$1=4194304;function tc$1(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function uc$1(e,i){var s=e.pendingLanes;if(s===0)return 0;var a=0,o=e.suspendedLanes,c=e.pingedLanes,d=s&268435455;if(d!==0){var g=d&~o;g!==0?a=tc$1(g):(c&=d,c!==0&&(a=tc$1(c)))}else d=s&~o,d!==0?a=tc$1(d):c!==0&&(a=tc$1(c));if(a===0)return 0;if(i!==0&&i!==a&&!(i&o)&&(o=a&-a,c=i&-i,o>=c||o===16&&(c&4194240)!==0))return i;if(a&4&&(a|=s&16),i=e.entangledLanes,i!==0)for(e=e.entanglements,i&=a;0<i;)s=31-oc$1(i),o=1<<s,a|=e[s],i&=~o;return a}function vc$1(e,i){switch(e){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc$1(e,i){for(var s=e.suspendedLanes,a=e.pingedLanes,o=e.expirationTimes,c=e.pendingLanes;0<c;){var d=31-oc$1(c),g=1<<d,b=o[d];b===-1?(!(g&s)||g&a)&&(o[d]=vc$1(g,i)):b<=i&&(e.expiredLanes|=g),c&=~g}}function xc$1(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function yc$1(){var e=rc$1;return rc$1<<=1,!(rc$1&4194240)&&(rc$1=64),e}function zc$1(e){for(var i=[],s=0;31>s;s++)i.push(e);return i}function Ac$1(e,i,s){e.pendingLanes|=i,i!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,i=31-oc$1(i),e[i]=s}function Bc$1(e,i){var s=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<s;){var o=31-oc$1(s),c=1<<o;i[o]=0,a[o]=-1,e[o]=-1,s&=~c}}function Cc$1(e,i){var s=e.entangledLanes|=i;for(e=e.entanglements;s;){var a=31-oc$1(s),o=1<<a;o&i|e[a]&i&&(e[a]|=i),s&=~o}}var C=0;function Dc$1(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Ec$1,Fc$1,Gc$1,Hc$1,Ic$1,Jc$1=!1,Kc$1=[],Lc$1=null,Mc$1=null,Nc$1=null,Oc$1=new Map,Pc$1=new Map,Qc$1=[],Rc$1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc$1(e,i){switch(e){case"focusin":case"focusout":Lc$1=null;break;case"dragenter":case"dragleave":Mc$1=null;break;case"mouseover":case"mouseout":Nc$1=null;break;case"pointerover":case"pointerout":Oc$1.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc$1.delete(i.pointerId)}}function Tc$1(e,i,s,a,o,c){return e===null||e.nativeEvent!==c?(e={blockedOn:i,domEventName:s,eventSystemFlags:a,nativeEvent:c,targetContainers:[o]},i!==null&&(i=Cb$1(i),i!==null&&Fc$1(i)),e):(e.eventSystemFlags|=a,i=e.targetContainers,o!==null&&i.indexOf(o)===-1&&i.push(o),e)}function Uc$1(e,i,s,a,o){switch(i){case"focusin":return Lc$1=Tc$1(Lc$1,e,i,s,a,o),!0;case"dragenter":return Mc$1=Tc$1(Mc$1,e,i,s,a,o),!0;case"mouseover":return Nc$1=Tc$1(Nc$1,e,i,s,a,o),!0;case"pointerover":var c=o.pointerId;return Oc$1.set(c,Tc$1(Oc$1.get(c)||null,e,i,s,a,o)),!0;case"gotpointercapture":return c=o.pointerId,Pc$1.set(c,Tc$1(Pc$1.get(c)||null,e,i,s,a,o)),!0}return!1}function Vc$1(e){var i=Wc$1(e.target);if(i!==null){var s=Vb$1(i);if(s!==null){if(i=s.tag,i===13){if(i=Wb$1(s),i!==null){e.blockedOn=i,Ic$1(e.priority,function(){Gc$1(s)});return}}else if(i===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Xc$1(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var s=Yc$1(e.domEventName,e.eventSystemFlags,i[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var a=new s.constructor(s.type,s);wb$1=a,s.target.dispatchEvent(a),wb$1=null}else return i=Cb$1(s),i!==null&&Fc$1(i),e.blockedOn=s,!1;i.shift()}return!0}function Zc(e,i,s){Xc$1(e)&&s.delete(i)}function $c$1(){Jc$1=!1,Lc$1!==null&&Xc$1(Lc$1)&&(Lc$1=null),Mc$1!==null&&Xc$1(Mc$1)&&(Mc$1=null),Nc$1!==null&&Xc$1(Nc$1)&&(Nc$1=null),Oc$1.forEach(Zc),Pc$1.forEach(Zc)}function ad$1(e,i){e.blockedOn===i&&(e.blockedOn=null,Jc$1||(Jc$1=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c$1)))}function bd$1(e){function i(o){return ad$1(o,e)}if(0<Kc$1.length){ad$1(Kc$1[0],e);for(var s=1;s<Kc$1.length;s++){var a=Kc$1[s];a.blockedOn===e&&(a.blockedOn=null)}}for(Lc$1!==null&&ad$1(Lc$1,e),Mc$1!==null&&ad$1(Mc$1,e),Nc$1!==null&&ad$1(Nc$1,e),Oc$1.forEach(i),Pc$1.forEach(i),s=0;s<Qc$1.length;s++)a=Qc$1[s],a.blockedOn===e&&(a.blockedOn=null);for(;0<Qc$1.length&&(s=Qc$1[0],s.blockedOn===null);)Vc$1(s),s.blockedOn===null&&Qc$1.shift()}var cd$1=ua$1.ReactCurrentBatchConfig,dd$1=!0;function ed$1(e,i,s,a){var o=C,c=cd$1.transition;cd$1.transition=null;try{C=1,fd$1(e,i,s,a)}finally{C=o,cd$1.transition=c}}function gd$1(e,i,s,a){var o=C,c=cd$1.transition;cd$1.transition=null;try{C=4,fd$1(e,i,s,a)}finally{C=o,cd$1.transition=c}}function fd$1(e,i,s,a){if(dd$1){var o=Yc$1(e,i,s,a);if(o===null)hd$1(e,i,a,id$1,s),Sc$1(e,a);else if(Uc$1(o,e,i,s,a))a.stopPropagation();else if(Sc$1(e,a),i&4&&-1<Rc$1.indexOf(e)){for(;o!==null;){var c=Cb$1(o);if(c!==null&&Ec$1(c),c=Yc$1(e,i,s,a),c===null&&hd$1(e,i,a,id$1,s),c===o)break;o=c}o!==null&&a.stopPropagation()}else hd$1(e,i,a,null,s)}}var id$1=null;function Yc$1(e,i,s,a){if(id$1=null,e=xb$1(a),e=Wc$1(e),e!==null)if(i=Vb$1(e),i===null)e=null;else if(s=i.tag,s===13){if(e=Wb$1(i),e!==null)return e;e=null}else if(s===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null);return id$1=e,null}function jd$1(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec$1()){case fc$1:return 1;case gc$1:return 4;case hc$1:case ic$1:return 16;case jc$1:return 536870912;default:return 16}default:return 16}}var kd$1=null,ld$1=null,md$1=null;function nd$1(){if(md$1)return md$1;var e,i=ld$1,s=i.length,a,o="value"in kd$1?kd$1.value:kd$1.textContent,c=o.length;for(e=0;e<s&&i[e]===o[e];e++);var d=s-e;for(a=1;a<=d&&i[s-a]===o[c-a];a++);return md$1=o.slice(e,1<a?1-a:void 0)}function od$1(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function pd$1(){return!0}function qd$1(){return!1}function rd$1(e){function i(s,a,o,c,d){this._reactName=s,this._targetInst=o,this.type=a,this.nativeEvent=c,this.target=d,this.currentTarget=null;for(var g in e)e.hasOwnProperty(g)&&(s=e[g],this[g]=s?s(c):c[g]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?pd$1:qd$1,this.isPropagationStopped=qd$1,this}return A(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=pd$1)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=pd$1)},persist:function(){},isPersistent:pd$1}),i}var sd$1={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td$1=rd$1(sd$1),ud$1=A({},sd$1,{view:0,detail:0}),vd$1=rd$1(ud$1),wd$1,xd$1,yd$1,Ad$1=A({},ud$1,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd$1,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==yd$1&&(yd$1&&e.type==="mousemove"?(wd$1=e.screenX-yd$1.screenX,xd$1=e.screenY-yd$1.screenY):xd$1=wd$1=0,yd$1=e),wd$1)},movementY:function(e){return"movementY"in e?e.movementY:xd$1}}),Bd$1=rd$1(Ad$1),Cd$1=A({},Ad$1,{dataTransfer:0}),Dd$1=rd$1(Cd$1),Ed$1=A({},ud$1,{relatedTarget:0}),Fd$1=rd$1(Ed$1),Gd$1=A({},sd$1,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd$1=rd$1(Gd$1),Id$1=A({},sd$1,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Jd$1=rd$1(Id$1),Kd$1=A({},sd$1,{data:0}),Ld$1=rd$1(Kd$1),Md$1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd$1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od$1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd$1(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=Od$1[e])?!!i[e]:!1}function zd$1(){return Pd$1}var Qd$1=A({},ud$1,{key:function(e){if(e.key){var i=Md$1[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=od$1(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Nd$1[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd$1,charCode:function(e){return e.type==="keypress"?od$1(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?od$1(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Rd$1=rd$1(Qd$1),Sd$1=A({},Ad$1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td$1=rd$1(Sd$1),Ud$1=A({},ud$1,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd$1}),Vd$1=rd$1(Ud$1),Wd$1=A({},sd$1,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd$1=rd$1(Wd$1),Yd$1=A({},Ad$1,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd$1=rd$1(Yd$1),$d$1=[9,13,27,32],ae=ia$1&&"CompositionEvent"in window,be=null;ia$1&&"documentMode"in document&&(be=document.documentMode);var ce$2=ia$1&&"TextEvent"in window&&!be,de=ia$1&&(!ae||be&&8<be&&11>=be),ee=" ",fe$2=!1;function ge(e,i){switch(e){case"keyup":return $d$1.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$1(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ie=!1;function je(e,i){switch(e){case"compositionend":return he$1(i);case"keypress":return i.which!==32?null:(fe$2=!0,ee);case"textInput":return e=i.data,e===ee&&fe$2?null:e;default:return null}}function ke$1(e,i){if(ie)return e==="compositionend"||!ae&&ge(e,i)?(e=nd$1(),md$1=ld$1=kd$1=null,ie=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return de&&i.locale!=="ko"?null:i.data;default:return null}}var le$1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!le$1[e.type]:i==="textarea"}function ne(e,i,s,a){Eb$1(a),i=oe(i,"onChange"),0<i.length&&(s=new td$1("onChange","change",null,s,a),e.push({event:s,listeners:i}))}var pe=null,qe$1=null;function re(e){se$1(e,0)}function te(e){var i=ue$2(e);if(Wa$1(i))return e}function ve(e,i){if(e==="change")return i}var we=!1;if(ia$1){var xe;if(ia$1){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae$1(){pe&&(pe.detachEvent("onpropertychange",Be),qe$1=pe=null)}function Be(e){if(e.propertyName==="value"&&te(qe$1)){var i=[];ne(i,qe$1,e,xb$1(e)),Jb(re,i)}}function Ce(e,i,s){e==="focusin"?(Ae$1(),pe=i,qe$1=s,pe.attachEvent("onpropertychange",Be)):e==="focusout"&&Ae$1()}function De$2(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return te(qe$1)}function Ee(e,i){if(e==="click")return te(i)}function Fe(e,i){if(e==="input"||e==="change")return te(i)}function Ge(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(e,i){if(He(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var s=Object.keys(e),a=Object.keys(i);if(s.length!==a.length)return!1;for(a=0;a<s.length;a++){var o=s[a];if(!ja$1.call(i,o)||!He(e[o],i[o]))return!1}return!0}function Je(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ke$1(e,i){var s=Je(e);e=0;for(var a;s;){if(s.nodeType===3){if(a=e+s.textContent.length,e<=i&&a>=i)return{node:s,offset:i-e};e=a}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Je(s)}}function Le$1(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?Le$1(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function Me$1(){for(var e=window,i=Xa$1();i instanceof e.HTMLIFrameElement;){try{var s=typeof i.contentWindow.location.href=="string"}catch{s=!1}if(s)e=i.contentWindow;else break;i=Xa$1(e.document)}return i}function Ne(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}function Oe(e){var i=Me$1(),s=e.focusedElem,a=e.selectionRange;if(i!==s&&s&&s.ownerDocument&&Le$1(s.ownerDocument.documentElement,s)){if(a!==null&&Ne(s)){if(i=a.start,e=a.end,e===void 0&&(e=i),"selectionStart"in s)s.selectionStart=i,s.selectionEnd=Math.min(e,s.value.length);else if(e=(i=s.ownerDocument||document)&&i.defaultView||window,e.getSelection){e=e.getSelection();var o=s.textContent.length,c=Math.min(a.start,o);a=a.end===void 0?c:Math.min(a.end,o),!e.extend&&c>a&&(o=a,a=c,c=o),o=Ke$1(s,c);var d=Ke$1(s,a);o&&d&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==d.node||e.focusOffset!==d.offset)&&(i=i.createRange(),i.setStart(o.node,o.offset),e.removeAllRanges(),c>a?(e.addRange(i),e.extend(d.node,d.offset)):(i.setEnd(d.node,d.offset),e.addRange(i)))}}for(i=[],e=s;e=e.parentNode;)e.nodeType===1&&i.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<i.length;s++)e=i[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Pe$1=ia$1&&"documentMode"in document&&11>=document.documentMode,Qe$1=null,Re=null,Se$1=null,Te$1=!1;function Ue$1(e,i,s){var a=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Te$1||Qe$1==null||Qe$1!==Xa$1(a)||(a=Qe$1,"selectionStart"in a&&Ne(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Se$1&&Ie(Se$1,a)||(Se$1=a,a=oe(Re,"onSelect"),0<a.length&&(i=new td$1("onSelect","select",null,i,s),e.push({event:i,listeners:a}),i.target=Qe$1)))}function Ve(e,i){var s={};return s[e.toLowerCase()]=i.toLowerCase(),s["Webkit"+e]="webkit"+i,s["Moz"+e]="moz"+i,s}var We$1={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe$1={},Ye={};ia$1&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We$1.animationend.animation,delete We$1.animationiteration.animation,delete We$1.animationstart.animation),"TransitionEvent"in window||delete We$1.transitionend.transition);function Ze$1(e){if(Xe$1[e])return Xe$1[e];if(!We$1[e])return e;var i=We$1[e],s;for(s in i)if(i.hasOwnProperty(s)&&s in Ye)return Xe$1[e]=i[s];return e}var $e$2=Ze$1("animationend"),af$1=Ze$1("animationiteration"),bf$1=Ze$1("animationstart"),cf$1=Ze$1("transitionend"),df$1=new Map,ef$1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff$1(e,i){df$1.set(e,i),fa$1(i,[e])}for(var gf$1=0;gf$1<ef$1.length;gf$1++){var hf$1=ef$1[gf$1],jf$1=hf$1.toLowerCase(),kf$1=hf$1[0].toUpperCase()+hf$1.slice(1);ff$1(jf$1,"on"+kf$1)}ff$1($e$2,"onAnimationEnd");ff$1(af$1,"onAnimationIteration");ff$1(bf$1,"onAnimationStart");ff$1("dblclick","onDoubleClick");ff$1("focusin","onFocus");ff$1("focusout","onBlur");ff$1(cf$1,"onTransitionEnd");ha$1("onMouseEnter",["mouseout","mouseover"]);ha$1("onMouseLeave",["mouseout","mouseover"]);ha$1("onPointerEnter",["pointerout","pointerover"]);ha$1("onPointerLeave",["pointerout","pointerover"]);fa$1("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa$1("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa$1("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa$1("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa$1("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa$1("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf$1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf$1=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf$1));function nf$1(e,i,s){var a=e.type||"unknown-event";e.currentTarget=s,Ub$1(a,i,void 0,e),e.currentTarget=null}function se$1(e,i){i=(i&4)!==0;for(var s=0;s<e.length;s++){var a=e[s],o=a.event;a=a.listeners;e:{var c=void 0;if(i)for(var d=a.length-1;0<=d;d--){var g=a[d],b=g.instance,j=g.currentTarget;if(g=g.listener,b!==c&&o.isPropagationStopped())break e;nf$1(o,g,j),c=b}else for(d=0;d<a.length;d++){if(g=a[d],b=g.instance,j=g.currentTarget,g=g.listener,b!==c&&o.isPropagationStopped())break e;nf$1(o,g,j),c=b}}}if(Qb$1)throw e=Rb$1,Qb$1=!1,Rb$1=null,e}function D(e,i){var s=i[of$1];s===void 0&&(s=i[of$1]=new Set);var a=e+"__bubble";s.has(a)||(pf$1(i,e,2,!1),s.add(a))}function qf$1(e,i,s){var a=0;i&&(a|=4),pf$1(s,e,a,i)}var rf$1="_reactListening"+Math.random().toString(36).slice(2);function sf$1(e){if(!e[rf$1]){e[rf$1]=!0,da$1.forEach(function(s){s!=="selectionchange"&&(mf$1.has(s)||qf$1(s,!1,e),qf$1(s,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[rf$1]||(i[rf$1]=!0,qf$1("selectionchange",!1,i))}}function pf$1(e,i,s,a){switch(jd$1(i)){case 1:var o=ed$1;break;case 4:o=gd$1;break;default:o=fd$1}s=o.bind(null,i,s,e),o=void 0,!Lb$1||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(o=!0),a?o!==void 0?e.addEventListener(i,s,{capture:!0,passive:o}):e.addEventListener(i,s,!0):o!==void 0?e.addEventListener(i,s,{passive:o}):e.addEventListener(i,s,!1)}function hd$1(e,i,s,a,o){var c=a;if(!(i&1)&&!(i&2)&&a!==null)e:for(;;){if(a===null)return;var d=a.tag;if(d===3||d===4){var g=a.stateNode.containerInfo;if(g===o||g.nodeType===8&&g.parentNode===o)break;if(d===4)for(d=a.return;d!==null;){var b=d.tag;if((b===3||b===4)&&(b=d.stateNode.containerInfo,b===o||b.nodeType===8&&b.parentNode===o))return;d=d.return}for(;g!==null;){if(d=Wc$1(g),d===null)return;if(b=d.tag,b===5||b===6){a=c=d;continue e}g=g.parentNode}}a=a.return}Jb(function(){var j=c,_e=xb$1(s),$=[];e:{var rt=df$1.get(e);if(rt!==void 0){var st=td$1,ut=e;switch(e){case"keypress":if(od$1(s)===0)break e;case"keydown":case"keyup":st=Rd$1;break;case"focusin":ut="focus",st=Fd$1;break;case"focusout":ut="blur",st=Fd$1;break;case"beforeblur":case"afterblur":st=Fd$1;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":st=Bd$1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":st=Dd$1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":st=Vd$1;break;case $e$2:case af$1:case bf$1:st=Hd$1;break;case cf$1:st=Xd$1;break;case"scroll":st=vd$1;break;case"wheel":st=Zd$1;break;case"copy":case"cut":case"paste":st=Jd$1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":st=Td$1}var gt=(i&4)!==0,wt=!gt&&e==="scroll",yt=gt?rt!==null?rt+"Capture":null:rt;gt=[];for(var At=j,Ct;At!==null;){Ct=At;var Tt=Ct.stateNode;if(Ct.tag===5&&Tt!==null&&(Ct=Tt,yt!==null&&(Tt=Kb$1(At,yt),Tt!=null&&gt.push(tf$1(At,Tt,Ct)))),wt)break;At=At.return}0<gt.length&&(rt=new st(rt,ut,null,s,_e),$.push({event:rt,listeners:gt}))}}if(!(i&7)){e:{if(rt=e==="mouseover"||e==="pointerover",st=e==="mouseout"||e==="pointerout",rt&&s!==wb$1&&(ut=s.relatedTarget||s.fromElement)&&(Wc$1(ut)||ut[uf$1]))break e;if((st||rt)&&(rt=_e.window===_e?_e:(rt=_e.ownerDocument)?rt.defaultView||rt.parentWindow:window,st?(ut=s.relatedTarget||s.toElement,st=j,ut=ut?Wc$1(ut):null,ut!==null&&(wt=Vb$1(ut),ut!==wt||ut.tag!==5&&ut.tag!==6)&&(ut=null)):(st=null,ut=j),st!==ut)){if(gt=Bd$1,Tt="onMouseLeave",yt="onMouseEnter",At="mouse",(e==="pointerout"||e==="pointerover")&&(gt=Td$1,Tt="onPointerLeave",yt="onPointerEnter",At="pointer"),wt=st==null?rt:ue$2(st),Ct=ut==null?rt:ue$2(ut),rt=new gt(Tt,At+"leave",st,s,_e),rt.target=wt,rt.relatedTarget=Ct,Tt=null,Wc$1(_e)===j&&(gt=new gt(yt,At+"enter",ut,s,_e),gt.target=Ct,gt.relatedTarget=wt,Tt=gt),wt=Tt,st&&ut)t:{for(gt=st,yt=ut,At=0,Ct=gt;Ct;Ct=vf$1(Ct))At++;for(Ct=0,Tt=yt;Tt;Tt=vf$1(Tt))Ct++;for(;0<At-Ct;)gt=vf$1(gt),At--;for(;0<Ct-At;)yt=vf$1(yt),Ct--;for(;At--;){if(gt===yt||yt!==null&&gt===yt.alternate)break t;gt=vf$1(gt),yt=vf$1(yt)}gt=null}else gt=null;st!==null&&wf$1($,rt,st,gt,!1),ut!==null&&wt!==null&&wf$1($,wt,ut,gt,!0)}}e:{if(rt=j?ue$2(j):window,st=rt.nodeName&&rt.nodeName.toLowerCase(),st==="select"||st==="input"&&rt.type==="file")var kt=ve;else if(me(rt))if(we)kt=Fe;else{kt=De$2;var Pt=Ce}else(st=rt.nodeName)&&st.toLowerCase()==="input"&&(rt.type==="checkbox"||rt.type==="radio")&&(kt=Ee);if(kt&&(kt=kt(e,j))){ne($,kt,s,_e);break e}Pt&&Pt(e,rt,j),e==="focusout"&&(Pt=rt._wrapperState)&&Pt.controlled&&rt.type==="number"&&cb$1(rt,"number",rt.value)}switch(Pt=j?ue$2(j):window,e){case"focusin":(me(Pt)||Pt.contentEditable==="true")&&(Qe$1=Pt,Re=j,Se$1=null);break;case"focusout":Se$1=Re=Qe$1=null;break;case"mousedown":Te$1=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$1=!1,Ue$1($,s,_e);break;case"selectionchange":if(Pe$1)break;case"keydown":case"keyup":Ue$1($,s,_e)}var It;if(ae)e:{switch(e){case"compositionstart":var Lt="onCompositionStart";break e;case"compositionend":Lt="onCompositionEnd";break e;case"compositionupdate":Lt="onCompositionUpdate";break e}Lt=void 0}else ie?ge(e,s)&&(Lt="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(Lt="onCompositionStart");Lt&&(de&&s.locale!=="ko"&&(ie||Lt!=="onCompositionStart"?Lt==="onCompositionEnd"&&ie&&(It=nd$1()):(kd$1=_e,ld$1="value"in kd$1?kd$1.value:kd$1.textContent,ie=!0)),Pt=oe(j,Lt),0<Pt.length&&(Lt=new Ld$1(Lt,e,null,s,_e),$.push({event:Lt,listeners:Pt}),It?Lt.data=It:(It=he$1(s),It!==null&&(Lt.data=It)))),(It=ce$2?je(e,s):ke$1(e,s))&&(j=oe(j,"onBeforeInput"),0<j.length&&(_e=new Ld$1("onBeforeInput","beforeinput",null,s,_e),$.push({event:_e,listeners:j}),_e.data=It))}se$1($,i)})}function tf$1(e,i,s){return{instance:e,listener:i,currentTarget:s}}function oe(e,i){for(var s=i+"Capture",a=[];e!==null;){var o=e,c=o.stateNode;o.tag===5&&c!==null&&(o=c,c=Kb$1(e,s),c!=null&&a.unshift(tf$1(e,c,o)),c=Kb$1(e,i),c!=null&&a.push(tf$1(e,c,o))),e=e.return}return a}function vf$1(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function wf$1(e,i,s,a,o){for(var c=i._reactName,d=[];s!==null&&s!==a;){var g=s,b=g.alternate,j=g.stateNode;if(b!==null&&b===a)break;g.tag===5&&j!==null&&(g=j,o?(b=Kb$1(s,c),b!=null&&d.unshift(tf$1(s,b,g))):o||(b=Kb$1(s,c),b!=null&&d.push(tf$1(s,b,g)))),s=s.return}d.length!==0&&e.push({event:i,listeners:d})}var xf$1=/\r\n?/g,yf$1=/\u0000|\uFFFD/g;function zf$1(e){return(typeof e=="string"?e:""+e).replace(xf$1,`
`).replace(yf$1,"")}function Af$1(e,i,s){if(i=zf$1(i),zf$1(e)!==i&&s)throw Error(p(425))}function Bf$1(){}var Cf$1=null,Df$1=null;function Ef$1(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Ff$1=typeof setTimeout=="function"?setTimeout:void 0,Gf$1=typeof clearTimeout=="function"?clearTimeout:void 0,Hf$1=typeof Promise=="function"?Promise:void 0,Jf$1=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf$1<"u"?function(e){return Hf$1.resolve(null).then(e).catch(If$1)}:Ff$1;function If$1(e){setTimeout(function(){throw e})}function Kf$1(e,i){var s=i,a=0;do{var o=s.nextSibling;if(e.removeChild(s),o&&o.nodeType===8)if(s=o.data,s==="/$"){if(a===0){e.removeChild(o),bd$1(i);return}a--}else s!=="$"&&s!=="$?"&&s!=="$!"||a++;s=o}while(s);bd$1(i)}function Lf$1(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return e}function Mf$1(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(i===0)return e;i--}else s==="/$"&&i++}e=e.previousSibling}return null}var Nf$1=Math.random().toString(36).slice(2),Of$1="__reactFiber$"+Nf$1,Pf$1="__reactProps$"+Nf$1,uf$1="__reactContainer$"+Nf$1,of$1="__reactEvents$"+Nf$1,Qf$1="__reactListeners$"+Nf$1,Rf$1="__reactHandles$"+Nf$1;function Wc$1(e){var i=e[Of$1];if(i)return i;for(var s=e.parentNode;s;){if(i=s[uf$1]||s[Of$1]){if(s=i.alternate,i.child!==null||s!==null&&s.child!==null)for(e=Mf$1(e);e!==null;){if(s=e[Of$1])return s;e=Mf$1(e)}return i}e=s,s=e.parentNode}return null}function Cb$1(e){return e=e[Of$1]||e[uf$1],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ue$2(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(p(33))}function Db$1(e){return e[Pf$1]||null}var Sf$1=[],Tf$1=-1;function Uf$1(e){return{current:e}}function E(e){0>Tf$1||(e.current=Sf$1[Tf$1],Sf$1[Tf$1]=null,Tf$1--)}function G(e,i){Tf$1++,Sf$1[Tf$1]=e.current,e.current=i}var Vf$1={},H=Uf$1(Vf$1),Wf$1=Uf$1(!1),Xf$1=Vf$1;function Yf$1(e,i){var s=e.type.contextTypes;if(!s)return Vf$1;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===i)return a.__reactInternalMemoizedMaskedChildContext;var o={},c;for(c in s)o[c]=i[c];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),o}function Zf$1(e){return e=e.childContextTypes,e!=null}function $f$1(){E(Wf$1),E(H)}function ag$1(e,i,s){if(H.current!==Vf$1)throw Error(p(168));G(H,i),G(Wf$1,s)}function bg$1(e,i,s){var a=e.stateNode;if(i=i.childContextTypes,typeof a.getChildContext!="function")return s;a=a.getChildContext();for(var o in a)if(!(o in i))throw Error(p(108,Ra$1(e)||"Unknown",o));return A({},s,a)}function cg$1(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Vf$1,Xf$1=H.current,G(H,e),G(Wf$1,Wf$1.current),!0}function dg$1(e,i,s){var a=e.stateNode;if(!a)throw Error(p(169));s?(e=bg$1(e,i,Xf$1),a.__reactInternalMemoizedMergedChildContext=e,E(Wf$1),E(H),G(H,e)):E(Wf$1),G(Wf$1,s)}var eg$1=null,fg$1=!1,gg$1=!1;function hg$1(e){eg$1===null?eg$1=[e]:eg$1.push(e)}function ig$1(e){fg$1=!0,hg$1(e)}function jg$1(){if(!gg$1&&eg$1!==null){gg$1=!0;var e=0,i=C;try{var s=eg$1;for(C=1;e<s.length;e++){var a=s[e];do a=a(!0);while(a!==null)}eg$1=null,fg$1=!1}catch(o){throw eg$1!==null&&(eg$1=eg$1.slice(e+1)),ac$1(fc$1,jg$1),o}finally{C=i,gg$1=!1}}return null}var kg$1=[],lg$1=0,mg$1=null,ng$1=0,og$1=[],pg$1=0,qg$1=null,rg$1=1,sg$1="";function tg$1(e,i){kg$1[lg$1++]=ng$1,kg$1[lg$1++]=mg$1,mg$1=e,ng$1=i}function ug$1(e,i,s){og$1[pg$1++]=rg$1,og$1[pg$1++]=sg$1,og$1[pg$1++]=qg$1,qg$1=e;var a=rg$1;e=sg$1;var o=32-oc$1(a)-1;a&=~(1<<o),s+=1;var c=32-oc$1(i)+o;if(30<c){var d=o-o%5;c=(a&(1<<d)-1).toString(32),a>>=d,o-=d,rg$1=1<<32-oc$1(i)+o|s<<o|a,sg$1=c+e}else rg$1=1<<c|s<<o|a,sg$1=e}function vg$1(e){e.return!==null&&(tg$1(e,1),ug$1(e,1,0))}function wg$1(e){for(;e===mg$1;)mg$1=kg$1[--lg$1],kg$1[lg$1]=null,ng$1=kg$1[--lg$1],kg$1[lg$1]=null;for(;e===qg$1;)qg$1=og$1[--pg$1],og$1[pg$1]=null,sg$1=og$1[--pg$1],og$1[pg$1]=null,rg$1=og$1[--pg$1],og$1[pg$1]=null}var xg$1=null,yg$1=null,I=!1,zg$1=null;function Ag$1(e,i){var s=Bg(5,null,null,0);s.elementType="DELETED",s.stateNode=i,s.return=e,i=e.deletions,i===null?(e.deletions=[s],e.flags|=16):i.push(s)}function Cg$1(e,i){switch(e.tag){case 5:var s=e.type;return i=i.nodeType!==1||s.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(e.stateNode=i,xg$1=e,yg$1=Lf$1(i.firstChild),!0):!1;case 6:return i=e.pendingProps===""||i.nodeType!==3?null:i,i!==null?(e.stateNode=i,xg$1=e,yg$1=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(s=qg$1!==null?{id:rg$1,overflow:sg$1}:null,e.memoizedState={dehydrated:i,treeContext:s,retryLane:1073741824},s=Bg(18,null,null,0),s.stateNode=i,s.return=e,e.child=s,xg$1=e,yg$1=null,!0):!1;default:return!1}}function Dg$1(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Eg$1(e){if(I){var i=yg$1;if(i){var s=i;if(!Cg$1(e,i)){if(Dg$1(e))throw Error(p(418));i=Lf$1(s.nextSibling);var a=xg$1;i&&Cg$1(e,i)?Ag$1(a,s):(e.flags=e.flags&-4097|2,I=!1,xg$1=e)}}else{if(Dg$1(e))throw Error(p(418));e.flags=e.flags&-4097|2,I=!1,xg$1=e}}}function Fg$1(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;xg$1=e}function Gg$1(e){if(e!==xg$1)return!1;if(!I)return Fg$1(e),I=!0,!1;var i;if((i=e.tag!==3)&&!(i=e.tag!==5)&&(i=e.type,i=i!=="head"&&i!=="body"&&!Ef$1(e.type,e.memoizedProps)),i&&(i=yg$1)){if(Dg$1(e))throw Hg$1(),Error(p(418));for(;i;)Ag$1(e,i),i=Lf$1(i.nextSibling)}if(Fg$1(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(p(317));e:{for(e=e.nextSibling,i=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(i===0){yg$1=Lf$1(e.nextSibling);break e}i--}else s!=="$"&&s!=="$!"&&s!=="$?"||i++}e=e.nextSibling}yg$1=null}}else yg$1=xg$1?Lf$1(e.stateNode.nextSibling):null;return!0}function Hg$1(){for(var e=yg$1;e;)e=Lf$1(e.nextSibling)}function Ig$1(){yg$1=xg$1=null,I=!1}function Jg$1(e){zg$1===null?zg$1=[e]:zg$1.push(e)}var Kg$1=ua$1.ReactCurrentBatchConfig;function Lg$1(e,i){if(e&&e.defaultProps){i=A({},i),e=e.defaultProps;for(var s in e)i[s]===void 0&&(i[s]=e[s]);return i}return i}var Mg$1=Uf$1(null),Ng=null,Og$1=null,Pg$1=null;function Qg$1(){Pg$1=Og$1=Ng=null}function Rg$1(e){var i=Mg$1.current;E(Mg$1),e._currentValue=i}function Sg$1(e,i,s){for(;e!==null;){var a=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,a!==null&&(a.childLanes|=i)):a!==null&&(a.childLanes&i)!==i&&(a.childLanes|=i),e===s)break;e=e.return}}function Tg$1(e,i){Ng=e,Pg$1=Og$1=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&i&&(Ug$1=!0),e.firstContext=null)}function Vg$1(e){var i=e._currentValue;if(Pg$1!==e)if(e={context:e,memoizedValue:i,next:null},Og$1===null){if(Ng===null)throw Error(p(308));Og$1=e,Ng.dependencies={lanes:0,firstContext:e}}else Og$1=Og$1.next=e;return i}var Wg$1=null;function Xg$1(e){Wg$1===null?Wg$1=[e]:Wg$1.push(e)}function Yg$1(e,i,s,a){var o=i.interleaved;return o===null?(s.next=s,Xg$1(i)):(s.next=o.next,o.next=s),i.interleaved=s,Zg$1(e,a)}function Zg$1(e,i){e.lanes|=i;var s=e.alternate;for(s!==null&&(s.lanes|=i),s=e,e=e.return;e!==null;)e.childLanes|=i,s=e.alternate,s!==null&&(s.childLanes|=i),s=e,e=e.return;return s.tag===3?s.stateNode:null}var $g$1=!1;function ah$1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh$1(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ch$1(e,i){return{eventTime:e,lane:i,tag:0,payload:null,callback:null,next:null}}function dh$1(e,i,s){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,K&2){var o=a.pending;return o===null?i.next=i:(i.next=o.next,o.next=i),a.pending=i,Zg$1(e,s)}return o=a.interleaved,o===null?(i.next=i,Xg$1(a)):(i.next=o.next,o.next=i),a.interleaved=i,Zg$1(e,s)}function eh$1(e,i,s){if(i=i.updateQueue,i!==null&&(i=i.shared,(s&4194240)!==0)){var a=i.lanes;a&=e.pendingLanes,s|=a,i.lanes=s,Cc$1(e,s)}}function fh$1(e,i){var s=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,s===a)){var o=null,c=null;if(s=s.firstBaseUpdate,s!==null){do{var d={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};c===null?o=c=d:c=c.next=d,s=s.next}while(s!==null);c===null?o=c=i:c=c.next=i}else o=c=i;s={baseState:a.baseState,firstBaseUpdate:o,lastBaseUpdate:c,shared:a.shared,effects:a.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=i:e.next=i,s.lastBaseUpdate=i}function gh$1(e,i,s,a){var o=e.updateQueue;$g$1=!1;var c=o.firstBaseUpdate,d=o.lastBaseUpdate,g=o.shared.pending;if(g!==null){o.shared.pending=null;var b=g,j=b.next;b.next=null,d===null?c=j:d.next=j,d=b;var _e=e.alternate;_e!==null&&(_e=_e.updateQueue,g=_e.lastBaseUpdate,g!==d&&(g===null?_e.firstBaseUpdate=j:g.next=j,_e.lastBaseUpdate=b))}if(c!==null){var $=o.baseState;d=0,_e=j=b=null,g=c;do{var rt=g.lane,st=g.eventTime;if((a&rt)===rt){_e!==null&&(_e=_e.next={eventTime:st,lane:0,tag:g.tag,payload:g.payload,callback:g.callback,next:null});e:{var ut=e,gt=g;switch(rt=i,st=s,gt.tag){case 1:if(ut=gt.payload,typeof ut=="function"){$=ut.call(st,$,rt);break e}$=ut;break e;case 3:ut.flags=ut.flags&-65537|128;case 0:if(ut=gt.payload,rt=typeof ut=="function"?ut.call(st,$,rt):ut,rt==null)break e;$=A({},$,rt);break e;case 2:$g$1=!0}}g.callback!==null&&g.lane!==0&&(e.flags|=64,rt=o.effects,rt===null?o.effects=[g]:rt.push(g))}else st={eventTime:st,lane:rt,tag:g.tag,payload:g.payload,callback:g.callback,next:null},_e===null?(j=_e=st,b=$):_e=_e.next=st,d|=rt;if(g=g.next,g===null){if(g=o.shared.pending,g===null)break;rt=g,g=rt.next,rt.next=null,o.lastBaseUpdate=rt,o.shared.pending=null}}while(!0);if(_e===null&&(b=$),o.baseState=b,o.firstBaseUpdate=j,o.lastBaseUpdate=_e,i=o.shared.interleaved,i!==null){o=i;do d|=o.lane,o=o.next;while(o!==i)}else c===null&&(o.shared.lanes=0);hh$1|=d,e.lanes=d,e.memoizedState=$}}function ih$1(e,i,s){if(e=i.effects,i.effects=null,e!==null)for(i=0;i<e.length;i++){var a=e[i],o=a.callback;if(o!==null){if(a.callback=null,a=s,typeof o!="function")throw Error(p(191,o));o.call(a)}}}var jh$1=new aa$1.Component().refs;function kh$1(e,i,s,a){i=e.memoizedState,s=s(a,i),s=s==null?i:A({},i,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var nh$1={isMounted:function(e){return(e=e._reactInternals)?Vb$1(e)===e:!1},enqueueSetState:function(e,i,s){e=e._reactInternals;var a=L(),o=lh$1(e),c=ch$1(a,o);c.payload=i,s!=null&&(c.callback=s),i=dh$1(e,c,o),i!==null&&(mh$1(i,e,o,a),eh$1(i,e,o))},enqueueReplaceState:function(e,i,s){e=e._reactInternals;var a=L(),o=lh$1(e),c=ch$1(a,o);c.tag=1,c.payload=i,s!=null&&(c.callback=s),i=dh$1(e,c,o),i!==null&&(mh$1(i,e,o,a),eh$1(i,e,o))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var s=L(),a=lh$1(e),o=ch$1(s,a);o.tag=2,i!=null&&(o.callback=i),i=dh$1(e,o,a),i!==null&&(mh$1(i,e,a,s),eh$1(i,e,a))}};function oh$1(e,i,s,a,o,c,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,c,d):i.prototype&&i.prototype.isPureReactComponent?!Ie(s,a)||!Ie(o,c):!0}function ph$1(e,i,s){var a=!1,o=Vf$1,c=i.contextType;return typeof c=="object"&&c!==null?c=Vg$1(c):(o=Zf$1(i)?Xf$1:H.current,a=i.contextTypes,c=(a=a!=null)?Yf$1(e,o):Vf$1),i=new i(s,c),e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=nh$1,e.stateNode=i,i._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=c),i}function qh$1(e,i,s,a){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(s,a),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(s,a),i.state!==e&&nh$1.enqueueReplaceState(i,i.state,null)}function rh$1(e,i,s,a){var o=e.stateNode;o.props=s,o.state=e.memoizedState,o.refs=jh$1,ah$1(e);var c=i.contextType;typeof c=="object"&&c!==null?o.context=Vg$1(c):(c=Zf$1(i)?Xf$1:H.current,o.context=Yf$1(e,c)),o.state=e.memoizedState,c=i.getDerivedStateFromProps,typeof c=="function"&&(kh$1(e,i,c,s),o.state=e.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(i=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),i!==o.state&&nh$1.enqueueReplaceState(o,o.state,null),gh$1(e,s,o,a),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function sh$1(e,i,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(p(309));var a=s.stateNode}if(!a)throw Error(p(147,e));var o=a,c=""+e;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===c?i.ref:(i=function(d){var g=o.refs;g===jh$1&&(g=o.refs={}),d===null?delete g[c]:g[c]=d},i._stringRef=c,i)}if(typeof e!="string")throw Error(p(284));if(!s._owner)throw Error(p(290,e))}return e}function th$1(e,i){throw e=Object.prototype.toString.call(i),Error(p(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e))}function uh$1(e){var i=e._init;return i(e._payload)}function vh$1(e){function i(yt,At){if(e){var Ct=yt.deletions;Ct===null?(yt.deletions=[At],yt.flags|=16):Ct.push(At)}}function s(yt,At){if(!e)return null;for(;At!==null;)i(yt,At),At=At.sibling;return null}function a(yt,At){for(yt=new Map;At!==null;)At.key!==null?yt.set(At.key,At):yt.set(At.index,At),At=At.sibling;return yt}function o(yt,At){return yt=wh$1(yt,At),yt.index=0,yt.sibling=null,yt}function c(yt,At,Ct){return yt.index=Ct,e?(Ct=yt.alternate,Ct!==null?(Ct=Ct.index,Ct<At?(yt.flags|=2,At):Ct):(yt.flags|=2,At)):(yt.flags|=1048576,At)}function d(yt){return e&&yt.alternate===null&&(yt.flags|=2),yt}function g(yt,At,Ct,Tt){return At===null||At.tag!==6?(At=xh$1(Ct,yt.mode,Tt),At.return=yt,At):(At=o(At,Ct),At.return=yt,At)}function b(yt,At,Ct,Tt){var kt=Ct.type;return kt===ya$1?_e(yt,At,Ct.props.children,Tt,Ct.key):At!==null&&(At.elementType===kt||typeof kt=="object"&&kt!==null&&kt.$$typeof===Ha$1&&uh$1(kt)===At.type)?(Tt=o(At,Ct.props),Tt.ref=sh$1(yt,At,Ct),Tt.return=yt,Tt):(Tt=yh$1(Ct.type,Ct.key,Ct.props,null,yt.mode,Tt),Tt.ref=sh$1(yt,At,Ct),Tt.return=yt,Tt)}function j(yt,At,Ct,Tt){return At===null||At.tag!==4||At.stateNode.containerInfo!==Ct.containerInfo||At.stateNode.implementation!==Ct.implementation?(At=zh$1(Ct,yt.mode,Tt),At.return=yt,At):(At=o(At,Ct.children||[]),At.return=yt,At)}function _e(yt,At,Ct,Tt,kt){return At===null||At.tag!==7?(At=Ah$1(Ct,yt.mode,Tt,kt),At.return=yt,At):(At=o(At,Ct),At.return=yt,At)}function $(yt,At,Ct){if(typeof At=="string"&&At!==""||typeof At=="number")return At=xh$1(""+At,yt.mode,Ct),At.return=yt,At;if(typeof At=="object"&&At!==null){switch(At.$$typeof){case va$1:return Ct=yh$1(At.type,At.key,At.props,null,yt.mode,Ct),Ct.ref=sh$1(yt,null,At),Ct.return=yt,Ct;case wa$1:return At=zh$1(At,yt.mode,Ct),At.return=yt,At;case Ha$1:var Tt=At._init;return $(yt,Tt(At._payload),Ct)}if(eb$1(At)||Ka$1(At))return At=Ah$1(At,yt.mode,Ct,null),At.return=yt,At;th$1(yt,At)}return null}function rt(yt,At,Ct,Tt){var kt=At!==null?At.key:null;if(typeof Ct=="string"&&Ct!==""||typeof Ct=="number")return kt!==null?null:g(yt,At,""+Ct,Tt);if(typeof Ct=="object"&&Ct!==null){switch(Ct.$$typeof){case va$1:return Ct.key===kt?b(yt,At,Ct,Tt):null;case wa$1:return Ct.key===kt?j(yt,At,Ct,Tt):null;case Ha$1:return kt=Ct._init,rt(yt,At,kt(Ct._payload),Tt)}if(eb$1(Ct)||Ka$1(Ct))return kt!==null?null:_e(yt,At,Ct,Tt,null);th$1(yt,Ct)}return null}function st(yt,At,Ct,Tt,kt){if(typeof Tt=="string"&&Tt!==""||typeof Tt=="number")return yt=yt.get(Ct)||null,g(At,yt,""+Tt,kt);if(typeof Tt=="object"&&Tt!==null){switch(Tt.$$typeof){case va$1:return yt=yt.get(Tt.key===null?Ct:Tt.key)||null,b(At,yt,Tt,kt);case wa$1:return yt=yt.get(Tt.key===null?Ct:Tt.key)||null,j(At,yt,Tt,kt);case Ha$1:var Pt=Tt._init;return st(yt,At,Ct,Pt(Tt._payload),kt)}if(eb$1(Tt)||Ka$1(Tt))return yt=yt.get(Ct)||null,_e(At,yt,Tt,kt,null);th$1(At,Tt)}return null}function ut(yt,At,Ct,Tt){for(var kt=null,Pt=null,It=At,Lt=At=0,Nt=null;It!==null&&Lt<Ct.length;Lt++){It.index>Lt?(Nt=It,It=null):Nt=It.sibling;var Ht=rt(yt,It,Ct[Lt],Tt);if(Ht===null){It===null&&(It=Nt);break}e&&It&&Ht.alternate===null&&i(yt,It),At=c(Ht,At,Lt),Pt===null?kt=Ht:Pt.sibling=Ht,Pt=Ht,It=Nt}if(Lt===Ct.length)return s(yt,It),I&&tg$1(yt,Lt),kt;if(It===null){for(;Lt<Ct.length;Lt++)It=$(yt,Ct[Lt],Tt),It!==null&&(At=c(It,At,Lt),Pt===null?kt=It:Pt.sibling=It,Pt=It);return I&&tg$1(yt,Lt),kt}for(It=a(yt,It);Lt<Ct.length;Lt++)Nt=st(It,yt,Lt,Ct[Lt],Tt),Nt!==null&&(e&&Nt.alternate!==null&&It.delete(Nt.key===null?Lt:Nt.key),At=c(Nt,At,Lt),Pt===null?kt=Nt:Pt.sibling=Nt,Pt=Nt);return e&&It.forEach(function(dr){return i(yt,dr)}),I&&tg$1(yt,Lt),kt}function gt(yt,At,Ct,Tt){var kt=Ka$1(Ct);if(typeof kt!="function")throw Error(p(150));if(Ct=kt.call(Ct),Ct==null)throw Error(p(151));for(var Pt=kt=null,It=At,Lt=At=0,Nt=null,Ht=Ct.next();It!==null&&!Ht.done;Lt++,Ht=Ct.next()){It.index>Lt?(Nt=It,It=null):Nt=It.sibling;var dr=rt(yt,It,Ht.value,Tt);if(dr===null){It===null&&(It=Nt);break}e&&It&&dr.alternate===null&&i(yt,It),At=c(dr,At,Lt),Pt===null?kt=dr:Pt.sibling=dr,Pt=dr,It=Nt}if(Ht.done)return s(yt,It),I&&tg$1(yt,Lt),kt;if(It===null){for(;!Ht.done;Lt++,Ht=Ct.next())Ht=$(yt,Ht.value,Tt),Ht!==null&&(At=c(Ht,At,Lt),Pt===null?kt=Ht:Pt.sibling=Ht,Pt=Ht);return I&&tg$1(yt,Lt),kt}for(It=a(yt,It);!Ht.done;Lt++,Ht=Ct.next())Ht=st(It,yt,Lt,Ht.value,Tt),Ht!==null&&(e&&Ht.alternate!==null&&It.delete(Ht.key===null?Lt:Ht.key),At=c(Ht,At,Lt),Pt===null?kt=Ht:Pt.sibling=Ht,Pt=Ht);return e&&It.forEach(function(hs){return i(yt,hs)}),I&&tg$1(yt,Lt),kt}function wt(yt,At,Ct,Tt){if(typeof Ct=="object"&&Ct!==null&&Ct.type===ya$1&&Ct.key===null&&(Ct=Ct.props.children),typeof Ct=="object"&&Ct!==null){switch(Ct.$$typeof){case va$1:e:{for(var kt=Ct.key,Pt=At;Pt!==null;){if(Pt.key===kt){if(kt=Ct.type,kt===ya$1){if(Pt.tag===7){s(yt,Pt.sibling),At=o(Pt,Ct.props.children),At.return=yt,yt=At;break e}}else if(Pt.elementType===kt||typeof kt=="object"&&kt!==null&&kt.$$typeof===Ha$1&&uh$1(kt)===Pt.type){s(yt,Pt.sibling),At=o(Pt,Ct.props),At.ref=sh$1(yt,Pt,Ct),At.return=yt,yt=At;break e}s(yt,Pt);break}else i(yt,Pt);Pt=Pt.sibling}Ct.type===ya$1?(At=Ah$1(Ct.props.children,yt.mode,Tt,Ct.key),At.return=yt,yt=At):(Tt=yh$1(Ct.type,Ct.key,Ct.props,null,yt.mode,Tt),Tt.ref=sh$1(yt,At,Ct),Tt.return=yt,yt=Tt)}return d(yt);case wa$1:e:{for(Pt=Ct.key;At!==null;){if(At.key===Pt)if(At.tag===4&&At.stateNode.containerInfo===Ct.containerInfo&&At.stateNode.implementation===Ct.implementation){s(yt,At.sibling),At=o(At,Ct.children||[]),At.return=yt,yt=At;break e}else{s(yt,At);break}else i(yt,At);At=At.sibling}At=zh$1(Ct,yt.mode,Tt),At.return=yt,yt=At}return d(yt);case Ha$1:return Pt=Ct._init,wt(yt,At,Pt(Ct._payload),Tt)}if(eb$1(Ct))return ut(yt,At,Ct,Tt);if(Ka$1(Ct))return gt(yt,At,Ct,Tt);th$1(yt,Ct)}return typeof Ct=="string"&&Ct!==""||typeof Ct=="number"?(Ct=""+Ct,At!==null&&At.tag===6?(s(yt,At.sibling),At=o(At,Ct),At.return=yt,yt=At):(s(yt,At),At=xh$1(Ct,yt.mode,Tt),At.return=yt,yt=At),d(yt)):s(yt,At)}return wt}var Bh$1=vh$1(!0),Ch$1=vh$1(!1),Dh$1={},Eh$1=Uf$1(Dh$1),Fh$1=Uf$1(Dh$1),Gh$1=Uf$1(Dh$1);function Hh$1(e){if(e===Dh$1)throw Error(p(174));return e}function Ih$1(e,i){switch(G(Gh$1,i),G(Fh$1,e),G(Eh$1,Dh$1),e=i.nodeType,e){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:lb$1(null,"");break;default:e=e===8?i.parentNode:i,i=e.namespaceURI||null,e=e.tagName,i=lb$1(i,e)}E(Eh$1),G(Eh$1,i)}function Jh$1(){E(Eh$1),E(Fh$1),E(Gh$1)}function Kh$1(e){Hh$1(Gh$1.current);var i=Hh$1(Eh$1.current),s=lb$1(i,e.type);i!==s&&(G(Fh$1,e),G(Eh$1,s))}function Lh$1(e){Fh$1.current===e&&(E(Eh$1),E(Fh$1))}var M=Uf$1(0);function Mh$1(e){for(var i=e;i!==null;){if(i.tag===13){var s=i.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if(i.flags&128)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Nh$1=[];function Oh$1(){for(var e=0;e<Nh$1.length;e++)Nh$1[e]._workInProgressVersionPrimary=null;Nh$1.length=0}var Ph$1=ua$1.ReactCurrentDispatcher,Qh$1=ua$1.ReactCurrentBatchConfig,Rh$1=0,N=null,O=null,P=null,Sh$1=!1,Th$1=!1,Uh$1=0,Vh$1=0;function Q(){throw Error(p(321))}function Wh$1(e,i){if(i===null)return!1;for(var s=0;s<i.length&&s<e.length;s++)if(!He(e[s],i[s]))return!1;return!0}function Xh$1(e,i,s,a,o,c){if(Rh$1=c,N=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Ph$1.current=e===null||e.memoizedState===null?Yh$1:Zh$1,e=s(a,o),Th$1){c=0;do{if(Th$1=!1,Uh$1=0,25<=c)throw Error(p(301));c+=1,P=O=null,i.updateQueue=null,Ph$1.current=$h$1,e=s(a,o)}while(Th$1)}if(Ph$1.current=ai$1,i=O!==null&&O.next!==null,Rh$1=0,P=O=N=null,Sh$1=!1,i)throw Error(p(300));return e}function bi$1(){var e=Uh$1!==0;return Uh$1=0,e}function ci$1(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P===null?N.memoizedState=P=e:P=P.next=e,P}function di(){if(O===null){var e=N.alternate;e=e!==null?e.memoizedState:null}else e=O.next;var i=P===null?N.memoizedState:P.next;if(i!==null)P=i,O=e;else{if(e===null)throw Error(p(310));O=e,e={memoizedState:O.memoizedState,baseState:O.baseState,baseQueue:O.baseQueue,queue:O.queue,next:null},P===null?N.memoizedState=P=e:P=P.next=e}return P}function ei$1(e,i){return typeof i=="function"?i(e):i}function fi(e){var i=di(),s=i.queue;if(s===null)throw Error(p(311));s.lastRenderedReducer=e;var a=O,o=a.baseQueue,c=s.pending;if(c!==null){if(o!==null){var d=o.next;o.next=c.next,c.next=d}a.baseQueue=o=c,s.pending=null}if(o!==null){c=o.next,a=a.baseState;var g=d=null,b=null,j=c;do{var _e=j.lane;if((Rh$1&_e)===_e)b!==null&&(b=b.next={lane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),a=j.hasEagerState?j.eagerState:e(a,j.action);else{var $={lane:_e,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null};b===null?(g=b=$,d=a):b=b.next=$,N.lanes|=_e,hh$1|=_e}j=j.next}while(j!==null&&j!==c);b===null?d=a:b.next=g,He(a,i.memoizedState)||(Ug$1=!0),i.memoizedState=a,i.baseState=d,i.baseQueue=b,s.lastRenderedState=a}if(e=s.interleaved,e!==null){o=e;do c=o.lane,N.lanes|=c,hh$1|=c,o=o.next;while(o!==e)}else o===null&&(s.lanes=0);return[i.memoizedState,s.dispatch]}function gi$1(e){var i=di(),s=i.queue;if(s===null)throw Error(p(311));s.lastRenderedReducer=e;var a=s.dispatch,o=s.pending,c=i.memoizedState;if(o!==null){s.pending=null;var d=o=o.next;do c=e(c,d.action),d=d.next;while(d!==o);He(c,i.memoizedState)||(Ug$1=!0),i.memoizedState=c,i.baseQueue===null&&(i.baseState=c),s.lastRenderedState=c}return[c,a]}function hi$1(){}function ii$1(e,i){var s=N,a=di(),o=i(),c=!He(a.memoizedState,o);if(c&&(a.memoizedState=o,Ug$1=!0),a=a.queue,ji$1(ki$1.bind(null,s,a,e),[e]),a.getSnapshot!==i||c||P!==null&&P.memoizedState.tag&1){if(s.flags|=2048,li$1(9,mi$1.bind(null,s,a,o,i),void 0,null),R===null)throw Error(p(349));Rh$1&30||ni$1(s,i,o)}return o}function ni$1(e,i,s){e.flags|=16384,e={getSnapshot:i,value:s},i=N.updateQueue,i===null?(i={lastEffect:null,stores:null},N.updateQueue=i,i.stores=[e]):(s=i.stores,s===null?i.stores=[e]:s.push(e))}function mi$1(e,i,s,a){i.value=s,i.getSnapshot=a,oi$1(i)&&pi$1(e)}function ki$1(e,i,s){return s(function(){oi$1(i)&&pi$1(e)})}function oi$1(e){var i=e.getSnapshot;e=e.value;try{var s=i();return!He(e,s)}catch{return!0}}function pi$1(e){var i=Zg$1(e,1);i!==null&&mh$1(i,e,1,-1)}function qi$1(e){var i=ci$1();return typeof e=="function"&&(e=e()),i.memoizedState=i.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei$1,lastRenderedState:e},i.queue=e,e=e.dispatch=ri$1.bind(null,N,e),[i.memoizedState,e]}function li$1(e,i,s,a){return e={tag:e,create:i,destroy:s,deps:a,next:null},i=N.updateQueue,i===null?(i={lastEffect:null,stores:null},N.updateQueue=i,i.lastEffect=e.next=e):(s=i.lastEffect,s===null?i.lastEffect=e.next=e:(a=s.next,s.next=e,e.next=a,i.lastEffect=e)),e}function si$1(){return di().memoizedState}function ti$1(e,i,s,a){var o=ci$1();N.flags|=e,o.memoizedState=li$1(1|i,s,void 0,a===void 0?null:a)}function ui$1(e,i,s,a){var o=di();a=a===void 0?null:a;var c=void 0;if(O!==null){var d=O.memoizedState;if(c=d.destroy,a!==null&&Wh$1(a,d.deps)){o.memoizedState=li$1(i,s,c,a);return}}N.flags|=e,o.memoizedState=li$1(1|i,s,c,a)}function vi$1(e,i){return ti$1(8390656,8,e,i)}function ji$1(e,i){return ui$1(2048,8,e,i)}function wi$1(e,i){return ui$1(4,2,e,i)}function xi$1(e,i){return ui$1(4,4,e,i)}function yi$1(e,i){if(typeof i=="function")return e=e(),i(e),function(){i(null)};if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function zi$1(e,i,s){return s=s!=null?s.concat([e]):null,ui$1(4,4,yi$1.bind(null,i,e),s)}function Ai$1(){}function Bi$1(e,i){var s=di();i=i===void 0?null:i;var a=s.memoizedState;return a!==null&&i!==null&&Wh$1(i,a[1])?a[0]:(s.memoizedState=[e,i],e)}function Ci$1(e,i){var s=di();i=i===void 0?null:i;var a=s.memoizedState;return a!==null&&i!==null&&Wh$1(i,a[1])?a[0]:(e=e(),s.memoizedState=[e,i],e)}function Di$1(e,i,s){return Rh$1&21?(He(s,i)||(s=yc$1(),N.lanes|=s,hh$1|=s,e.baseState=!0),i):(e.baseState&&(e.baseState=!1,Ug$1=!0),e.memoizedState=s)}function Ei(e,i){var s=C;C=s!==0&&4>s?s:4,e(!0);var a=Qh$1.transition;Qh$1.transition={};try{e(!1),i()}finally{C=s,Qh$1.transition=a}}function Fi$1(){return di().memoizedState}function Gi$1(e,i,s){var a=lh$1(e);if(s={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null},Hi$1(e))Ii$1(i,s);else if(s=Yg$1(e,i,s,a),s!==null){var o=L();mh$1(s,e,a,o),Ji$1(s,i,a)}}function ri$1(e,i,s){var a=lh$1(e),o={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null};if(Hi$1(e))Ii$1(i,o);else{var c=e.alternate;if(e.lanes===0&&(c===null||c.lanes===0)&&(c=i.lastRenderedReducer,c!==null))try{var d=i.lastRenderedState,g=c(d,s);if(o.hasEagerState=!0,o.eagerState=g,He(g,d)){var b=i.interleaved;b===null?(o.next=o,Xg$1(i)):(o.next=b.next,b.next=o),i.interleaved=o;return}}catch{}finally{}s=Yg$1(e,i,o,a),s!==null&&(o=L(),mh$1(s,e,a,o),Ji$1(s,i,a))}}function Hi$1(e){var i=e.alternate;return e===N||i!==null&&i===N}function Ii$1(e,i){Th$1=Sh$1=!0;var s=e.pending;s===null?i.next=i:(i.next=s.next,s.next=i),e.pending=i}function Ji$1(e,i,s){if(s&4194240){var a=i.lanes;a&=e.pendingLanes,s|=a,i.lanes=s,Cc$1(e,s)}}var ai$1={readContext:Vg$1,useCallback:Q,useContext:Q,useEffect:Q,useImperativeHandle:Q,useInsertionEffect:Q,useLayoutEffect:Q,useMemo:Q,useReducer:Q,useRef:Q,useState:Q,useDebugValue:Q,useDeferredValue:Q,useTransition:Q,useMutableSource:Q,useSyncExternalStore:Q,useId:Q,unstable_isNewReconciler:!1},Yh$1={readContext:Vg$1,useCallback:function(e,i){return ci$1().memoizedState=[e,i===void 0?null:i],e},useContext:Vg$1,useEffect:vi$1,useImperativeHandle:function(e,i,s){return s=s!=null?s.concat([e]):null,ti$1(4194308,4,yi$1.bind(null,i,e),s)},useLayoutEffect:function(e,i){return ti$1(4194308,4,e,i)},useInsertionEffect:function(e,i){return ti$1(4,2,e,i)},useMemo:function(e,i){var s=ci$1();return i=i===void 0?null:i,e=e(),s.memoizedState=[e,i],e},useReducer:function(e,i,s){var a=ci$1();return i=s!==void 0?s(i):i,a.memoizedState=a.baseState=i,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},a.queue=e,e=e.dispatch=Gi$1.bind(null,N,e),[a.memoizedState,e]},useRef:function(e){var i=ci$1();return e={current:e},i.memoizedState=e},useState:qi$1,useDebugValue:Ai$1,useDeferredValue:function(e){return ci$1().memoizedState=e},useTransition:function(){var e=qi$1(!1),i=e[0];return e=Ei.bind(null,e[1]),ci$1().memoizedState=e,[i,e]},useMutableSource:function(){},useSyncExternalStore:function(e,i,s){var a=N,o=ci$1();if(I){if(s===void 0)throw Error(p(407));s=s()}else{if(s=i(),R===null)throw Error(p(349));Rh$1&30||ni$1(a,i,s)}o.memoizedState=s;var c={value:s,getSnapshot:i};return o.queue=c,vi$1(ki$1.bind(null,a,c,e),[e]),a.flags|=2048,li$1(9,mi$1.bind(null,a,c,s,i),void 0,null),s},useId:function(){var e=ci$1(),i=R.identifierPrefix;if(I){var s=sg$1,a=rg$1;s=(a&~(1<<32-oc$1(a)-1)).toString(32)+s,i=":"+i+"R"+s,s=Uh$1++,0<s&&(i+="H"+s.toString(32)),i+=":"}else s=Vh$1++,i=":"+i+"r"+s.toString(32)+":";return e.memoizedState=i},unstable_isNewReconciler:!1},Zh$1={readContext:Vg$1,useCallback:Bi$1,useContext:Vg$1,useEffect:ji$1,useImperativeHandle:zi$1,useInsertionEffect:wi$1,useLayoutEffect:xi$1,useMemo:Ci$1,useReducer:fi,useRef:si$1,useState:function(){return fi(ei$1)},useDebugValue:Ai$1,useDeferredValue:function(e){var i=di();return Di$1(i,O.memoizedState,e)},useTransition:function(){var e=fi(ei$1)[0],i=di().memoizedState;return[e,i]},useMutableSource:hi$1,useSyncExternalStore:ii$1,useId:Fi$1,unstable_isNewReconciler:!1},$h$1={readContext:Vg$1,useCallback:Bi$1,useContext:Vg$1,useEffect:ji$1,useImperativeHandle:zi$1,useInsertionEffect:wi$1,useLayoutEffect:xi$1,useMemo:Ci$1,useReducer:gi$1,useRef:si$1,useState:function(){return gi$1(ei$1)},useDebugValue:Ai$1,useDeferredValue:function(e){var i=di();return O===null?i.memoizedState=e:Di$1(i,O.memoizedState,e)},useTransition:function(){var e=gi$1(ei$1)[0],i=di().memoizedState;return[e,i]},useMutableSource:hi$1,useSyncExternalStore:ii$1,useId:Fi$1,unstable_isNewReconciler:!1};function Ki$1(e,i){try{var s="",a=i;do s+=Pa$1(a),a=a.return;while(a);var o=s}catch(c){o=`
Error generating stack: `+c.message+`
`+c.stack}return{value:e,source:i,stack:o,digest:null}}function Li$1(e,i,s){return{value:e,source:null,stack:s??null,digest:i??null}}function Mi$1(e,i){try{console.error(i.value)}catch(s){setTimeout(function(){throw s})}}var Ni$1=typeof WeakMap=="function"?WeakMap:Map;function Oi$1(e,i,s){s=ch$1(-1,s),s.tag=3,s.payload={element:null};var a=i.value;return s.callback=function(){Pi$1||(Pi$1=!0,Qi$1=a),Mi$1(e,i)},s}function Ri$1(e,i,s){s=ch$1(-1,s),s.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var o=i.value;s.payload=function(){return a(o)},s.callback=function(){Mi$1(e,i)}}var c=e.stateNode;return c!==null&&typeof c.componentDidCatch=="function"&&(s.callback=function(){Mi$1(e,i),typeof a!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var d=i.stack;this.componentDidCatch(i.value,{componentStack:d!==null?d:""})}),s}function Ti$1(e,i,s){var a=e.pingCache;if(a===null){a=e.pingCache=new Ni$1;var o=new Set;a.set(i,o)}else o=a.get(i),o===void 0&&(o=new Set,a.set(i,o));o.has(s)||(o.add(s),e=Ui$1.bind(null,e,i,s),i.then(e,e))}function Vi$1(e){do{var i;if((i=e.tag===13)&&(i=e.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return e;e=e.return}while(e!==null);return null}function Wi$1(e,i,s,a,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===i?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(i=ch$1(-1,1),i.tag=2,dh$1(s,i,1))),s.lanes|=1),e)}var Xi$1=ua$1.ReactCurrentOwner,Ug$1=!1;function Yi$1(e,i,s,a){i.child=e===null?Ch$1(i,null,s,a):Bh$1(i,e.child,s,a)}function Zi$1(e,i,s,a,o){s=s.render;var c=i.ref;return Tg$1(i,o),a=Xh$1(e,i,s,a,c,o),s=bi$1(),e!==null&&!Ug$1?(i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~o,$i$1(e,i,o)):(I&&s&&vg$1(i),i.flags|=1,Yi$1(e,i,a,o),i.child)}function aj$1(e,i,s,a,o){if(e===null){var c=s.type;return typeof c=="function"&&!bj$1(c)&&c.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(i.tag=15,i.type=c,cj$1(e,i,c,a,o)):(e=yh$1(s.type,null,a,i,i.mode,o),e.ref=i.ref,e.return=i,i.child=e)}if(c=e.child,!(e.lanes&o)){var d=c.memoizedProps;if(s=s.compare,s=s!==null?s:Ie,s(d,a)&&e.ref===i.ref)return $i$1(e,i,o)}return i.flags|=1,e=wh$1(c,a),e.ref=i.ref,e.return=i,i.child=e}function cj$1(e,i,s,a,o){if(e!==null){var c=e.memoizedProps;if(Ie(c,a)&&e.ref===i.ref)if(Ug$1=!1,i.pendingProps=a=c,(e.lanes&o)!==0)e.flags&131072&&(Ug$1=!0);else return i.lanes=e.lanes,$i$1(e,i,o)}return dj$1(e,i,s,a,o)}function ej$1(e,i,s){var a=i.pendingProps,o=a.children,c=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(i.mode&1))i.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(fj$1,gj$1),gj$1|=s;else{if(!(s&1073741824))return e=c!==null?c.baseLanes|s:s,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:e,cachePool:null,transitions:null},i.updateQueue=null,G(fj$1,gj$1),gj$1|=e,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=c!==null?c.baseLanes:s,G(fj$1,gj$1),gj$1|=a}else c!==null?(a=c.baseLanes|s,i.memoizedState=null):a=s,G(fj$1,gj$1),gj$1|=a;return Yi$1(e,i,o,s),i.child}function hj$1(e,i){var s=i.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(i.flags|=512,i.flags|=2097152)}function dj$1(e,i,s,a,o){var c=Zf$1(s)?Xf$1:H.current;return c=Yf$1(i,c),Tg$1(i,o),s=Xh$1(e,i,s,a,c,o),a=bi$1(),e!==null&&!Ug$1?(i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~o,$i$1(e,i,o)):(I&&a&&vg$1(i),i.flags|=1,Yi$1(e,i,s,o),i.child)}function ij$1(e,i,s,a,o){if(Zf$1(s)){var c=!0;cg$1(i)}else c=!1;if(Tg$1(i,o),i.stateNode===null)jj$1(e,i),ph$1(i,s,a),rh$1(i,s,a,o),a=!0;else if(e===null){var d=i.stateNode,g=i.memoizedProps;d.props=g;var b=d.context,j=s.contextType;typeof j=="object"&&j!==null?j=Vg$1(j):(j=Zf$1(s)?Xf$1:H.current,j=Yf$1(i,j));var _e=s.getDerivedStateFromProps,$=typeof _e=="function"||typeof d.getSnapshotBeforeUpdate=="function";$||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(g!==a||b!==j)&&qh$1(i,d,a,j),$g$1=!1;var rt=i.memoizedState;d.state=rt,gh$1(i,a,d,o),b=i.memoizedState,g!==a||rt!==b||Wf$1.current||$g$1?(typeof _e=="function"&&(kh$1(i,s,_e,a),b=i.memoizedState),(g=$g$1||oh$1(i,s,g,a,rt,b,j))?($||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=a,i.memoizedState=b),d.props=a,d.state=b,d.context=j,a=g):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),a=!1)}else{d=i.stateNode,bh$1(e,i),g=i.memoizedProps,j=i.type===i.elementType?g:Lg$1(i.type,g),d.props=j,$=i.pendingProps,rt=d.context,b=s.contextType,typeof b=="object"&&b!==null?b=Vg$1(b):(b=Zf$1(s)?Xf$1:H.current,b=Yf$1(i,b));var st=s.getDerivedStateFromProps;(_e=typeof st=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(g!==$||rt!==b)&&qh$1(i,d,a,b),$g$1=!1,rt=i.memoizedState,d.state=rt,gh$1(i,a,d,o);var ut=i.memoizedState;g!==$||rt!==ut||Wf$1.current||$g$1?(typeof st=="function"&&(kh$1(i,s,st,a),ut=i.memoizedState),(j=$g$1||oh$1(i,s,j,a,rt,ut,b)||!1)?(_e||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(a,ut,b),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(a,ut,b)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||g===e.memoizedProps&&rt===e.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&rt===e.memoizedState||(i.flags|=1024),i.memoizedProps=a,i.memoizedState=ut),d.props=a,d.state=ut,d.context=b,a=j):(typeof d.componentDidUpdate!="function"||g===e.memoizedProps&&rt===e.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&rt===e.memoizedState||(i.flags|=1024),a=!1)}return kj$1(e,i,s,a,c,o)}function kj$1(e,i,s,a,o,c){hj$1(e,i);var d=(i.flags&128)!==0;if(!a&&!d)return o&&dg$1(i,s,!1),$i$1(e,i,c);a=i.stateNode,Xi$1.current=i;var g=d&&typeof s.getDerivedStateFromError!="function"?null:a.render();return i.flags|=1,e!==null&&d?(i.child=Bh$1(i,e.child,null,c),i.child=Bh$1(i,null,g,c)):Yi$1(e,i,g,c),i.memoizedState=a.state,o&&dg$1(i,s,!0),i.child}function lj$1(e){var i=e.stateNode;i.pendingContext?ag$1(e,i.pendingContext,i.pendingContext!==i.context):i.context&&ag$1(e,i.context,!1),Ih$1(e,i.containerInfo)}function mj$1(e,i,s,a,o){return Ig$1(),Jg$1(o),i.flags|=256,Yi$1(e,i,s,a),i.child}var nj$1={dehydrated:null,treeContext:null,retryLane:0};function oj$1(e){return{baseLanes:e,cachePool:null,transitions:null}}function pj$1(e,i,s){var a=i.pendingProps,o=M.current,c=!1,d=(i.flags&128)!==0,g;if((g=d)||(g=e!==null&&e.memoizedState===null?!1:(o&2)!==0),g?(c=!0,i.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),G(M,o&1),e===null)return Eg$1(i),e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(i.mode&1?e.data==="$!"?i.lanes=8:i.lanes=1073741824:i.lanes=1,null):(d=a.children,e=a.fallback,c?(a=i.mode,c=i.child,d={mode:"hidden",children:d},!(a&1)&&c!==null?(c.childLanes=0,c.pendingProps=d):c=qj$1(d,a,0,null),e=Ah$1(e,a,s,null),c.return=i,e.return=i,c.sibling=e,i.child=c,i.child.memoizedState=oj$1(s),i.memoizedState=nj$1,e):rj$1(i,d));if(o=e.memoizedState,o!==null&&(g=o.dehydrated,g!==null))return sj$1(e,i,d,a,g,o,s);if(c){c=a.fallback,d=i.mode,o=e.child,g=o.sibling;var b={mode:"hidden",children:a.children};return!(d&1)&&i.child!==o?(a=i.child,a.childLanes=0,a.pendingProps=b,i.deletions=null):(a=wh$1(o,b),a.subtreeFlags=o.subtreeFlags&14680064),g!==null?c=wh$1(g,c):(c=Ah$1(c,d,s,null),c.flags|=2),c.return=i,a.return=i,a.sibling=c,i.child=a,a=c,c=i.child,d=e.child.memoizedState,d=d===null?oj$1(s):{baseLanes:d.baseLanes|s,cachePool:null,transitions:d.transitions},c.memoizedState=d,c.childLanes=e.childLanes&~s,i.memoizedState=nj$1,a}return c=e.child,e=c.sibling,a=wh$1(c,{mode:"visible",children:a.children}),!(i.mode&1)&&(a.lanes=s),a.return=i,a.sibling=null,e!==null&&(s=i.deletions,s===null?(i.deletions=[e],i.flags|=16):s.push(e)),i.child=a,i.memoizedState=null,a}function rj$1(e,i){return i=qj$1({mode:"visible",children:i},e.mode,0,null),i.return=e,e.child=i}function tj$1(e,i,s,a){return a!==null&&Jg$1(a),Bh$1(i,e.child,null,s),e=rj$1(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function sj$1(e,i,s,a,o,c,d){if(s)return i.flags&256?(i.flags&=-257,a=Li$1(Error(p(422))),tj$1(e,i,d,a)):i.memoizedState!==null?(i.child=e.child,i.flags|=128,null):(c=a.fallback,o=i.mode,a=qj$1({mode:"visible",children:a.children},o,0,null),c=Ah$1(c,o,d,null),c.flags|=2,a.return=i,c.return=i,a.sibling=c,i.child=a,i.mode&1&&Bh$1(i,e.child,null,d),i.child.memoizedState=oj$1(d),i.memoizedState=nj$1,c);if(!(i.mode&1))return tj$1(e,i,d,null);if(o.data==="$!"){if(a=o.nextSibling&&o.nextSibling.dataset,a)var g=a.dgst;return a=g,c=Error(p(419)),a=Li$1(c,a,void 0),tj$1(e,i,d,a)}if(g=(d&e.childLanes)!==0,Ug$1||g){if(a=R,a!==null){switch(d&-d){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(a.suspendedLanes|d)?0:o,o!==0&&o!==c.retryLane&&(c.retryLane=o,Zg$1(e,o),mh$1(a,e,o,-1))}return uj$1(),a=Li$1(Error(p(421))),tj$1(e,i,d,a)}return o.data==="$?"?(i.flags|=128,i.child=e.child,i=vj$1.bind(null,e),o._reactRetry=i,null):(e=c.treeContext,yg$1=Lf$1(o.nextSibling),xg$1=i,I=!0,zg$1=null,e!==null&&(og$1[pg$1++]=rg$1,og$1[pg$1++]=sg$1,og$1[pg$1++]=qg$1,rg$1=e.id,sg$1=e.overflow,qg$1=i),i=rj$1(i,a.children),i.flags|=4096,i)}function wj$1(e,i,s){e.lanes|=i;var a=e.alternate;a!==null&&(a.lanes|=i),Sg$1(e.return,i,s)}function xj$1(e,i,s,a,o){var c=e.memoizedState;c===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:a,tail:s,tailMode:o}:(c.isBackwards=i,c.rendering=null,c.renderingStartTime=0,c.last=a,c.tail=s,c.tailMode=o)}function yj$1(e,i,s){var a=i.pendingProps,o=a.revealOrder,c=a.tail;if(Yi$1(e,i,a.children,s),a=M.current,a&2)a=a&1|2,i.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&wj$1(e,s,i);else if(e.tag===19)wj$1(e,s,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break e;for(;e.sibling===null;){if(e.return===null||e.return===i)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(G(M,a),!(i.mode&1))i.memoizedState=null;else switch(o){case"forwards":for(s=i.child,o=null;s!==null;)e=s.alternate,e!==null&&Mh$1(e)===null&&(o=s),s=s.sibling;s=o,s===null?(o=i.child,i.child=null):(o=s.sibling,s.sibling=null),xj$1(i,!1,o,s,c);break;case"backwards":for(s=null,o=i.child,i.child=null;o!==null;){if(e=o.alternate,e!==null&&Mh$1(e)===null){i.child=o;break}e=o.sibling,o.sibling=s,s=o,o=e}xj$1(i,!0,s,null,c);break;case"together":xj$1(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function jj$1(e,i){!(i.mode&1)&&e!==null&&(e.alternate=null,i.alternate=null,i.flags|=2)}function $i$1(e,i,s){if(e!==null&&(i.dependencies=e.dependencies),hh$1|=i.lanes,!(s&i.childLanes))return null;if(e!==null&&i.child!==e.child)throw Error(p(153));if(i.child!==null){for(e=i.child,s=wh$1(e,e.pendingProps),i.child=s,s.return=i;e.sibling!==null;)e=e.sibling,s=s.sibling=wh$1(e,e.pendingProps),s.return=i;s.sibling=null}return i.child}function zj$1(e,i,s){switch(i.tag){case 3:lj$1(i),Ig$1();break;case 5:Kh$1(i);break;case 1:Zf$1(i.type)&&cg$1(i);break;case 4:Ih$1(i,i.stateNode.containerInfo);break;case 10:var a=i.type._context,o=i.memoizedProps.value;G(Mg$1,a._currentValue),a._currentValue=o;break;case 13:if(a=i.memoizedState,a!==null)return a.dehydrated!==null?(G(M,M.current&1),i.flags|=128,null):s&i.child.childLanes?pj$1(e,i,s):(G(M,M.current&1),e=$i$1(e,i,s),e!==null?e.sibling:null);G(M,M.current&1);break;case 19:if(a=(s&i.childLanes)!==0,e.flags&128){if(a)return yj$1(e,i,s);i.flags|=128}if(o=i.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),G(M,M.current),a)break;return null;case 22:case 23:return i.lanes=0,ej$1(e,i,s)}return $i$1(e,i,s)}var Aj$1,Bj$1,Cj$1,Dj$1;Aj$1=function(e,i){for(var s=i.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Bj$1=function(){};Cj$1=function(e,i,s,a){var o=e.memoizedProps;if(o!==a){e=i.stateNode,Hh$1(Eh$1.current);var c=null;switch(s){case"input":o=Ya$1(e,o),a=Ya$1(e,a),c=[];break;case"select":o=A({},o,{value:void 0}),a=A({},a,{value:void 0}),c=[];break;case"textarea":o=gb$1(e,o),a=gb$1(e,a),c=[];break;default:typeof o.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=Bf$1)}ub$1(s,a);var d;s=null;for(j in o)if(!a.hasOwnProperty(j)&&o.hasOwnProperty(j)&&o[j]!=null)if(j==="style"){var g=o[j];for(d in g)g.hasOwnProperty(d)&&(s||(s={}),s[d]="")}else j!=="dangerouslySetInnerHTML"&&j!=="children"&&j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(ea$1.hasOwnProperty(j)?c||(c=[]):(c=c||[]).push(j,null));for(j in a){var b=a[j];if(g=o!=null?o[j]:void 0,a.hasOwnProperty(j)&&b!==g&&(b!=null||g!=null))if(j==="style")if(g){for(d in g)!g.hasOwnProperty(d)||b&&b.hasOwnProperty(d)||(s||(s={}),s[d]="");for(d in b)b.hasOwnProperty(d)&&g[d]!==b[d]&&(s||(s={}),s[d]=b[d])}else s||(c||(c=[]),c.push(j,s)),s=b;else j==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,g=g?g.__html:void 0,b!=null&&g!==b&&(c=c||[]).push(j,b)):j==="children"?typeof b!="string"&&typeof b!="number"||(c=c||[]).push(j,""+b):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&(ea$1.hasOwnProperty(j)?(b!=null&&j==="onScroll"&&D("scroll",e),c||g===b||(c=[])):(c=c||[]).push(j,b))}s&&(c=c||[]).push("style",s);var j=c;(i.updateQueue=j)&&(i.flags|=4)}};Dj$1=function(e,i,s,a){s!==a&&(i.flags|=4)};function Ej$1(e,i){if(!I)switch(e.tailMode){case"hidden":i=e.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function S(e){var i=e.alternate!==null&&e.alternate.child===e.child,s=0,a=0;if(i)for(var o=e.child;o!==null;)s|=o.lanes|o.childLanes,a|=o.subtreeFlags&14680064,a|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)s|=o.lanes|o.childLanes,a|=o.subtreeFlags,a|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=a,e.childLanes=s,i}function Fj$1(e,i,s){var a=i.pendingProps;switch(wg$1(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(i),null;case 1:return Zf$1(i.type)&&$f$1(),S(i),null;case 3:return a=i.stateNode,Jh$1(),E(Wf$1),E(H),Oh$1(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Gg$1(i)?i.flags|=4:e===null||e.memoizedState.isDehydrated&&!(i.flags&256)||(i.flags|=1024,zg$1!==null&&(Gj$1(zg$1),zg$1=null))),Bj$1(e,i),S(i),null;case 5:Lh$1(i);var o=Hh$1(Gh$1.current);if(s=i.type,e!==null&&i.stateNode!=null)Cj$1(e,i,s,a,o),e.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!a){if(i.stateNode===null)throw Error(p(166));return S(i),null}if(e=Hh$1(Eh$1.current),Gg$1(i)){a=i.stateNode,s=i.type;var c=i.memoizedProps;switch(a[Of$1]=i,a[Pf$1]=c,e=(i.mode&1)!==0,s){case"dialog":D("cancel",a),D("close",a);break;case"iframe":case"object":case"embed":D("load",a);break;case"video":case"audio":for(o=0;o<lf$1.length;o++)D(lf$1[o],a);break;case"source":D("error",a);break;case"img":case"image":case"link":D("error",a),D("load",a);break;case"details":D("toggle",a);break;case"input":Za$1(a,c),D("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!c.multiple},D("invalid",a);break;case"textarea":hb$1(a,c),D("invalid",a)}ub$1(s,c),o=null;for(var d in c)if(c.hasOwnProperty(d)){var g=c[d];d==="children"?typeof g=="string"?a.textContent!==g&&(c.suppressHydrationWarning!==!0&&Af$1(a.textContent,g,e),o=["children",g]):typeof g=="number"&&a.textContent!==""+g&&(c.suppressHydrationWarning!==!0&&Af$1(a.textContent,g,e),o=["children",""+g]):ea$1.hasOwnProperty(d)&&g!=null&&d==="onScroll"&&D("scroll",a)}switch(s){case"input":Va$1(a),db$1(a,c,!0);break;case"textarea":Va$1(a),jb$1(a);break;case"select":case"option":break;default:typeof c.onClick=="function"&&(a.onclick=Bf$1)}a=o,i.updateQueue=a,a!==null&&(i.flags|=4)}else{d=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=kb$1(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=d.createElement(s,{is:a.is}):(e=d.createElement(s),s==="select"&&(d=e,a.multiple?d.multiple=!0:a.size&&(d.size=a.size))):e=d.createElementNS(e,s),e[Of$1]=i,e[Pf$1]=a,Aj$1(e,i,!1,!1),i.stateNode=e;e:{switch(d=vb$1(s,a),s){case"dialog":D("cancel",e),D("close",e),o=a;break;case"iframe":case"object":case"embed":D("load",e),o=a;break;case"video":case"audio":for(o=0;o<lf$1.length;o++)D(lf$1[o],e);o=a;break;case"source":D("error",e),o=a;break;case"img":case"image":case"link":D("error",e),D("load",e),o=a;break;case"details":D("toggle",e),o=a;break;case"input":Za$1(e,a),o=Ya$1(e,a),D("invalid",e);break;case"option":o=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},o=A({},a,{value:void 0}),D("invalid",e);break;case"textarea":hb$1(e,a),o=gb$1(e,a),D("invalid",e);break;default:o=a}ub$1(s,o),g=o;for(c in g)if(g.hasOwnProperty(c)){var b=g[c];c==="style"?sb(e,b):c==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&nb(e,b)):c==="children"?typeof b=="string"?(s!=="textarea"||b!=="")&&ob$1(e,b):typeof b=="number"&&ob$1(e,""+b):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ea$1.hasOwnProperty(c)?b!=null&&c==="onScroll"&&D("scroll",e):b!=null&&ta$1(e,c,b,d))}switch(s){case"input":Va$1(e),db$1(e,a,!1);break;case"textarea":Va$1(e),jb$1(e);break;case"option":a.value!=null&&e.setAttribute("value",""+Sa$1(a.value));break;case"select":e.multiple=!!a.multiple,c=a.value,c!=null?fb(e,!!a.multiple,c,!1):a.defaultValue!=null&&fb(e,!!a.multiple,a.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Bf$1)}switch(s){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return S(i),null;case 6:if(e&&i.stateNode!=null)Dj$1(e,i,e.memoizedProps,a);else{if(typeof a!="string"&&i.stateNode===null)throw Error(p(166));if(s=Hh$1(Gh$1.current),Hh$1(Eh$1.current),Gg$1(i)){if(a=i.stateNode,s=i.memoizedProps,a[Of$1]=i,(c=a.nodeValue!==s)&&(e=xg$1,e!==null))switch(e.tag){case 3:Af$1(a.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Af$1(a.nodeValue,s,(e.mode&1)!==0)}c&&(i.flags|=4)}else a=(s.nodeType===9?s:s.ownerDocument).createTextNode(a),a[Of$1]=i,i.stateNode=a}return S(i),null;case 13:if(E(M),a=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(I&&yg$1!==null&&i.mode&1&&!(i.flags&128))Hg$1(),Ig$1(),i.flags|=98560,c=!1;else if(c=Gg$1(i),a!==null&&a.dehydrated!==null){if(e===null){if(!c)throw Error(p(318));if(c=i.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(p(317));c[Of$1]=i}else Ig$1(),!(i.flags&128)&&(i.memoizedState=null),i.flags|=4;S(i),c=!1}else zg$1!==null&&(Gj$1(zg$1),zg$1=null),c=!0;if(!c)return i.flags&65536?i:null}return i.flags&128?(i.lanes=s,i):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(i.child.flags|=8192,i.mode&1&&(e===null||M.current&1?T===0&&(T=3):uj$1())),i.updateQueue!==null&&(i.flags|=4),S(i),null);case 4:return Jh$1(),Bj$1(e,i),e===null&&sf$1(i.stateNode.containerInfo),S(i),null;case 10:return Rg$1(i.type._context),S(i),null;case 17:return Zf$1(i.type)&&$f$1(),S(i),null;case 19:if(E(M),c=i.memoizedState,c===null)return S(i),null;if(a=(i.flags&128)!==0,d=c.rendering,d===null)if(a)Ej$1(c,!1);else{if(T!==0||e!==null&&e.flags&128)for(e=i.child;e!==null;){if(d=Mh$1(e),d!==null){for(i.flags|=128,Ej$1(c,!1),a=d.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),i.subtreeFlags=0,a=s,s=i.child;s!==null;)c=s,e=a,c.flags&=14680066,d=c.alternate,d===null?(c.childLanes=0,c.lanes=e,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=d.childLanes,c.lanes=d.lanes,c.child=d.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=d.memoizedProps,c.memoizedState=d.memoizedState,c.updateQueue=d.updateQueue,c.type=d.type,e=d.dependencies,c.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return G(M,M.current&1|2),i.child}e=e.sibling}c.tail!==null&&B()>Hj$1&&(i.flags|=128,a=!0,Ej$1(c,!1),i.lanes=4194304)}else{if(!a)if(e=Mh$1(d),e!==null){if(i.flags|=128,a=!0,s=e.updateQueue,s!==null&&(i.updateQueue=s,i.flags|=4),Ej$1(c,!0),c.tail===null&&c.tailMode==="hidden"&&!d.alternate&&!I)return S(i),null}else 2*B()-c.renderingStartTime>Hj$1&&s!==1073741824&&(i.flags|=128,a=!0,Ej$1(c,!1),i.lanes=4194304);c.isBackwards?(d.sibling=i.child,i.child=d):(s=c.last,s!==null?s.sibling=d:i.child=d,c.last=d)}return c.tail!==null?(i=c.tail,c.rendering=i,c.tail=i.sibling,c.renderingStartTime=B(),i.sibling=null,s=M.current,G(M,a?s&1|2:s&1),i):(S(i),null);case 22:case 23:return Ij$1(),a=i.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(i.flags|=8192),a&&i.mode&1?gj$1&1073741824&&(S(i),i.subtreeFlags&6&&(i.flags|=8192)):S(i),null;case 24:return null;case 25:return null}throw Error(p(156,i.tag))}function Jj$1(e,i){switch(wg$1(i),i.tag){case 1:return Zf$1(i.type)&&$f$1(),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return Jh$1(),E(Wf$1),E(H),Oh$1(),e=i.flags,e&65536&&!(e&128)?(i.flags=e&-65537|128,i):null;case 5:return Lh$1(i),null;case 13:if(E(M),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(p(340));Ig$1()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return E(M),null;case 4:return Jh$1(),null;case 10:return Rg$1(i.type._context),null;case 22:case 23:return Ij$1(),null;case 24:return null;default:return null}}var Kj$1=!1,U=!1,Lj$1=typeof WeakSet=="function"?WeakSet:Set,V=null;function Mj$1(e,i){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(a){W(e,i,a)}else s.current=null}function Nj$1(e,i,s){try{s()}catch(a){W(e,i,a)}}var Oj$1=!1;function Pj$1(e,i){if(Cf$1=dd$1,e=Me$1(),Ne(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var a=s.getSelection&&s.getSelection();if(a&&a.rangeCount!==0){s=a.anchorNode;var o=a.anchorOffset,c=a.focusNode;a=a.focusOffset;try{s.nodeType,c.nodeType}catch{s=null;break e}var d=0,g=-1,b=-1,j=0,_e=0,$=e,rt=null;t:for(;;){for(var st;$!==s||o!==0&&$.nodeType!==3||(g=d+o),$!==c||a!==0&&$.nodeType!==3||(b=d+a),$.nodeType===3&&(d+=$.nodeValue.length),(st=$.firstChild)!==null;)rt=$,$=st;for(;;){if($===e)break t;if(rt===s&&++j===o&&(g=d),rt===c&&++_e===a&&(b=d),(st=$.nextSibling)!==null)break;$=rt,rt=$.parentNode}$=st}s=g===-1||b===-1?null:{start:g,end:b}}else s=null}s=s||{start:0,end:0}}else s=null;for(Df$1={focusedElem:e,selectionRange:s},dd$1=!1,V=i;V!==null;)if(i=V,e=i.child,(i.subtreeFlags&1028)!==0&&e!==null)e.return=i,V=e;else for(;V!==null;){i=V;try{var ut=i.alternate;if(i.flags&1024)switch(i.tag){case 0:case 11:case 15:break;case 1:if(ut!==null){var gt=ut.memoizedProps,wt=ut.memoizedState,yt=i.stateNode,At=yt.getSnapshotBeforeUpdate(i.elementType===i.type?gt:Lg$1(i.type,gt),wt);yt.__reactInternalSnapshotBeforeUpdate=At}break;case 3:var Ct=i.stateNode.containerInfo;Ct.nodeType===1?Ct.textContent="":Ct.nodeType===9&&Ct.documentElement&&Ct.removeChild(Ct.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p(163))}}catch(Tt){W(i,i.return,Tt)}if(e=i.sibling,e!==null){e.return=i.return,V=e;break}V=i.return}return ut=Oj$1,Oj$1=!1,ut}function Qj$1(e,i,s){var a=i.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var o=a=a.next;do{if((o.tag&e)===e){var c=o.destroy;o.destroy=void 0,c!==void 0&&Nj$1(i,s,c)}o=o.next}while(o!==a)}}function Rj$1(e,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&e)===e){var a=s.create;s.destroy=a()}s=s.next}while(s!==i)}}function Sj$1(e){var i=e.ref;if(i!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof i=="function"?i(e):i.current=e}}function Tj$1(e){var i=e.alternate;i!==null&&(e.alternate=null,Tj$1(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&(delete i[Of$1],delete i[Pf$1],delete i[of$1],delete i[Qf$1],delete i[Rf$1])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Uj$1(e){return e.tag===5||e.tag===3||e.tag===4}function Vj$1(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Uj$1(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Wj$1(e,i,s){var a=e.tag;if(a===5||a===6)e=e.stateNode,i?s.nodeType===8?s.parentNode.insertBefore(e,i):s.insertBefore(e,i):(s.nodeType===8?(i=s.parentNode,i.insertBefore(e,s)):(i=s,i.appendChild(e)),s=s._reactRootContainer,s!=null||i.onclick!==null||(i.onclick=Bf$1));else if(a!==4&&(e=e.child,e!==null))for(Wj$1(e,i,s),e=e.sibling;e!==null;)Wj$1(e,i,s),e=e.sibling}function Xj$1(e,i,s){var a=e.tag;if(a===5||a===6)e=e.stateNode,i?s.insertBefore(e,i):s.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(Xj$1(e,i,s),e=e.sibling;e!==null;)Xj$1(e,i,s),e=e.sibling}var X$1=null,Yj$1=!1;function Zj$1(e,i,s){for(s=s.child;s!==null;)ak$1(e,i,s),s=s.sibling}function ak$1(e,i,s){if(lc$1&&typeof lc$1.onCommitFiberUnmount=="function")try{lc$1.onCommitFiberUnmount(kc$1,s)}catch{}switch(s.tag){case 5:U||Mj$1(s,i);case 6:var a=X$1,o=Yj$1;X$1=null,Zj$1(e,i,s),X$1=a,Yj$1=o,X$1!==null&&(Yj$1?(e=X$1,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):X$1.removeChild(s.stateNode));break;case 18:X$1!==null&&(Yj$1?(e=X$1,s=s.stateNode,e.nodeType===8?Kf$1(e.parentNode,s):e.nodeType===1&&Kf$1(e,s),bd$1(e)):Kf$1(X$1,s.stateNode));break;case 4:a=X$1,o=Yj$1,X$1=s.stateNode.containerInfo,Yj$1=!0,Zj$1(e,i,s),X$1=a,Yj$1=o;break;case 0:case 11:case 14:case 15:if(!U&&(a=s.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){o=a=a.next;do{var c=o,d=c.destroy;c=c.tag,d!==void 0&&(c&2||c&4)&&Nj$1(s,i,d),o=o.next}while(o!==a)}Zj$1(e,i,s);break;case 1:if(!U&&(Mj$1(s,i),a=s.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=s.memoizedProps,a.state=s.memoizedState,a.componentWillUnmount()}catch(g){W(s,i,g)}Zj$1(e,i,s);break;case 21:Zj$1(e,i,s);break;case 22:s.mode&1?(U=(a=U)||s.memoizedState!==null,Zj$1(e,i,s),U=a):Zj$1(e,i,s);break;default:Zj$1(e,i,s)}}function bk$1(e){var i=e.updateQueue;if(i!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new Lj$1),i.forEach(function(a){var o=ck$1.bind(null,e,a);s.has(a)||(s.add(a),a.then(o,o))})}}function dk$1(e,i){var s=i.deletions;if(s!==null)for(var a=0;a<s.length;a++){var o=s[a];try{var c=e,d=i,g=d;e:for(;g!==null;){switch(g.tag){case 5:X$1=g.stateNode,Yj$1=!1;break e;case 3:X$1=g.stateNode.containerInfo,Yj$1=!0;break e;case 4:X$1=g.stateNode.containerInfo,Yj$1=!0;break e}g=g.return}if(X$1===null)throw Error(p(160));ak$1(c,d,o),X$1=null,Yj$1=!1;var b=o.alternate;b!==null&&(b.return=null),o.return=null}catch(j){W(o,i,j)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)ek$1(i,e),i=i.sibling}function ek$1(e,i){var s=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(dk$1(i,e),fk$1(e),a&4){try{Qj$1(3,e,e.return),Rj$1(3,e)}catch(gt){W(e,e.return,gt)}try{Qj$1(5,e,e.return)}catch(gt){W(e,e.return,gt)}}break;case 1:dk$1(i,e),fk$1(e),a&512&&s!==null&&Mj$1(s,s.return);break;case 5:if(dk$1(i,e),fk$1(e),a&512&&s!==null&&Mj$1(s,s.return),e.flags&32){var o=e.stateNode;try{ob$1(o,"")}catch(gt){W(e,e.return,gt)}}if(a&4&&(o=e.stateNode,o!=null)){var c=e.memoizedProps,d=s!==null?s.memoizedProps:c,g=e.type,b=e.updateQueue;if(e.updateQueue=null,b!==null)try{g==="input"&&c.type==="radio"&&c.name!=null&&ab$1(o,c),vb$1(g,d);var j=vb$1(g,c);for(d=0;d<b.length;d+=2){var _e=b[d],$=b[d+1];_e==="style"?sb(o,$):_e==="dangerouslySetInnerHTML"?nb(o,$):_e==="children"?ob$1(o,$):ta$1(o,_e,$,j)}switch(g){case"input":bb$1(o,c);break;case"textarea":ib$1(o,c);break;case"select":var rt=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!c.multiple;var st=c.value;st!=null?fb(o,!!c.multiple,st,!1):rt!==!!c.multiple&&(c.defaultValue!=null?fb(o,!!c.multiple,c.defaultValue,!0):fb(o,!!c.multiple,c.multiple?[]:"",!1))}o[Pf$1]=c}catch(gt){W(e,e.return,gt)}}break;case 6:if(dk$1(i,e),fk$1(e),a&4){if(e.stateNode===null)throw Error(p(162));o=e.stateNode,c=e.memoizedProps;try{o.nodeValue=c}catch(gt){W(e,e.return,gt)}}break;case 3:if(dk$1(i,e),fk$1(e),a&4&&s!==null&&s.memoizedState.isDehydrated)try{bd$1(i.containerInfo)}catch(gt){W(e,e.return,gt)}break;case 4:dk$1(i,e),fk$1(e);break;case 13:dk$1(i,e),fk$1(e),o=e.child,o.flags&8192&&(c=o.memoizedState!==null,o.stateNode.isHidden=c,!c||o.alternate!==null&&o.alternate.memoizedState!==null||(gk$1=B())),a&4&&bk$1(e);break;case 22:if(_e=s!==null&&s.memoizedState!==null,e.mode&1?(U=(j=U)||_e,dk$1(i,e),U=j):dk$1(i,e),fk$1(e),a&8192){if(j=e.memoizedState!==null,(e.stateNode.isHidden=j)&&!_e&&e.mode&1)for(V=e,_e=e.child;_e!==null;){for($=V=_e;V!==null;){switch(rt=V,st=rt.child,rt.tag){case 0:case 11:case 14:case 15:Qj$1(4,rt,rt.return);break;case 1:Mj$1(rt,rt.return);var ut=rt.stateNode;if(typeof ut.componentWillUnmount=="function"){a=rt,s=rt.return;try{i=a,ut.props=i.memoizedProps,ut.state=i.memoizedState,ut.componentWillUnmount()}catch(gt){W(a,s,gt)}}break;case 5:Mj$1(rt,rt.return);break;case 22:if(rt.memoizedState!==null){hk$1($);continue}}st!==null?(st.return=rt,V=st):hk$1($)}_e=_e.sibling}e:for(_e=null,$=e;;){if($.tag===5){if(_e===null){_e=$;try{o=$.stateNode,j?(c=o.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none"):(g=$.stateNode,b=$.memoizedProps.style,d=b!=null&&b.hasOwnProperty("display")?b.display:null,g.style.display=rb$1("display",d))}catch(gt){W(e,e.return,gt)}}}else if($.tag===6){if(_e===null)try{$.stateNode.nodeValue=j?"":$.memoizedProps}catch(gt){W(e,e.return,gt)}}else if(($.tag!==22&&$.tag!==23||$.memoizedState===null||$===e)&&$.child!==null){$.child.return=$,$=$.child;continue}if($===e)break e;for(;$.sibling===null;){if($.return===null||$.return===e)break e;_e===$&&(_e=null),$=$.return}_e===$&&(_e=null),$.sibling.return=$.return,$=$.sibling}}break;case 19:dk$1(i,e),fk$1(e),a&4&&bk$1(e);break;case 21:break;default:dk$1(i,e),fk$1(e)}}function fk$1(e){var i=e.flags;if(i&2){try{e:{for(var s=e.return;s!==null;){if(Uj$1(s)){var a=s;break e}s=s.return}throw Error(p(160))}switch(a.tag){case 5:var o=a.stateNode;a.flags&32&&(ob$1(o,""),a.flags&=-33);var c=Vj$1(e);Xj$1(e,c,o);break;case 3:case 4:var d=a.stateNode.containerInfo,g=Vj$1(e);Wj$1(e,g,d);break;default:throw Error(p(161))}}catch(b){W(e,e.return,b)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function ik$1(e,i,s){V=e,jk$1(e)}function jk$1(e,i,s){for(var a=(e.mode&1)!==0;V!==null;){var o=V,c=o.child;if(o.tag===22&&a){var d=o.memoizedState!==null||Kj$1;if(!d){var g=o.alternate,b=g!==null&&g.memoizedState!==null||U;g=Kj$1;var j=U;if(Kj$1=d,(U=b)&&!j)for(V=o;V!==null;)d=V,b=d.child,d.tag===22&&d.memoizedState!==null?kk$1(o):b!==null?(b.return=d,V=b):kk$1(o);for(;c!==null;)V=c,jk$1(c),c=c.sibling;V=o,Kj$1=g,U=j}lk$1(e)}else o.subtreeFlags&8772&&c!==null?(c.return=o,V=c):lk$1(e)}}function lk$1(e){for(;V!==null;){var i=V;if(i.flags&8772){var s=i.alternate;try{if(i.flags&8772)switch(i.tag){case 0:case 11:case 15:U||Rj$1(5,i);break;case 1:var a=i.stateNode;if(i.flags&4&&!U)if(s===null)a.componentDidMount();else{var o=i.elementType===i.type?s.memoizedProps:Lg$1(i.type,s.memoizedProps);a.componentDidUpdate(o,s.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var c=i.updateQueue;c!==null&&ih$1(i,c,a);break;case 3:var d=i.updateQueue;if(d!==null){if(s=null,i.child!==null)switch(i.child.tag){case 5:s=i.child.stateNode;break;case 1:s=i.child.stateNode}ih$1(i,d,s)}break;case 5:var g=i.stateNode;if(s===null&&i.flags&4){s=g;var b=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&s.focus();break;case"img":b.src&&(s.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var j=i.alternate;if(j!==null){var _e=j.memoizedState;if(_e!==null){var $=_e.dehydrated;$!==null&&bd$1($)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p(163))}U||i.flags&512&&Sj$1(i)}catch(rt){W(i,i.return,rt)}}if(i===e){V=null;break}if(s=i.sibling,s!==null){s.return=i.return,V=s;break}V=i.return}}function hk$1(e){for(;V!==null;){var i=V;if(i===e){V=null;break}var s=i.sibling;if(s!==null){s.return=i.return,V=s;break}V=i.return}}function kk$1(e){for(;V!==null;){var i=V;try{switch(i.tag){case 0:case 11:case 15:var s=i.return;try{Rj$1(4,i)}catch(b){W(i,s,b)}break;case 1:var a=i.stateNode;if(typeof a.componentDidMount=="function"){var o=i.return;try{a.componentDidMount()}catch(b){W(i,o,b)}}var c=i.return;try{Sj$1(i)}catch(b){W(i,c,b)}break;case 5:var d=i.return;try{Sj$1(i)}catch(b){W(i,d,b)}}}catch(b){W(i,i.return,b)}if(i===e){V=null;break}var g=i.sibling;if(g!==null){g.return=i.return,V=g;break}V=i.return}}var mk$1=Math.ceil,nk$1=ua$1.ReactCurrentDispatcher,ok$1=ua$1.ReactCurrentOwner,pk$1=ua$1.ReactCurrentBatchConfig,K=0,R=null,Y=null,Z$1=0,gj$1=0,fj$1=Uf$1(0),T=0,qk$1=null,hh$1=0,rk$1=0,sk$1=0,tk$1=null,uk$1=null,gk$1=0,Hj$1=1/0,vk$1=null,Pi$1=!1,Qi$1=null,Si=null,wk$1=!1,xk$1=null,yk$1=0,zk$1=0,Ak$1=null,Bk$1=-1,Ck$1=0;function L(){return K&6?B():Bk$1!==-1?Bk$1:Bk$1=B()}function lh$1(e){return e.mode&1?K&2&&Z$1!==0?Z$1&-Z$1:Kg$1.transition!==null?(Ck$1===0&&(Ck$1=yc$1()),Ck$1):(e=C,e!==0||(e=window.event,e=e===void 0?16:jd$1(e.type)),e):1}function mh$1(e,i,s,a){if(50<zk$1)throw zk$1=0,Ak$1=null,Error(p(185));Ac$1(e,s,a),(!(K&2)||e!==R)&&(e===R&&(!(K&2)&&(rk$1|=s),T===4&&Dk$1(e,Z$1)),Ek$1(e,a),s===1&&K===0&&!(i.mode&1)&&(Hj$1=B()+500,fg$1&&jg$1()))}function Ek$1(e,i){var s=e.callbackNode;wc$1(e,i);var a=uc$1(e,e===R?Z$1:0);if(a===0)s!==null&&bc$1(s),e.callbackNode=null,e.callbackPriority=0;else if(i=a&-a,e.callbackPriority!==i){if(s!=null&&bc$1(s),i===1)e.tag===0?ig$1(Fk$1.bind(null,e)):hg$1(Fk$1.bind(null,e)),Jf$1(function(){!(K&6)&&jg$1()}),s=null;else{switch(Dc$1(a)){case 1:s=fc$1;break;case 4:s=gc$1;break;case 16:s=hc$1;break;case 536870912:s=jc$1;break;default:s=hc$1}s=Gk$1(s,Hk$1.bind(null,e))}e.callbackPriority=i,e.callbackNode=s}}function Hk$1(e,i){if(Bk$1=-1,Ck$1=0,K&6)throw Error(p(327));var s=e.callbackNode;if(Ik$1()&&e.callbackNode!==s)return null;var a=uc$1(e,e===R?Z$1:0);if(a===0)return null;if(a&30||a&e.expiredLanes||i)i=Jk$1(e,a);else{i=a;var o=K;K|=2;var c=Kk$1();(R!==e||Z$1!==i)&&(vk$1=null,Hj$1=B()+500,Lk$1(e,i));do try{Mk$1();break}catch(g){Nk$1(e,g)}while(!0);Qg$1(),nk$1.current=c,K=o,Y!==null?i=0:(R=null,Z$1=0,i=T)}if(i!==0){if(i===2&&(o=xc$1(e),o!==0&&(a=o,i=Ok$1(e,o))),i===1)throw s=qk$1,Lk$1(e,0),Dk$1(e,a),Ek$1(e,B()),s;if(i===6)Dk$1(e,a);else{if(o=e.current.alternate,!(a&30)&&!Pk$1(o)&&(i=Jk$1(e,a),i===2&&(c=xc$1(e),c!==0&&(a=c,i=Ok$1(e,c))),i===1))throw s=qk$1,Lk$1(e,0),Dk$1(e,a),Ek$1(e,B()),s;switch(e.finishedWork=o,e.finishedLanes=a,i){case 0:case 1:throw Error(p(345));case 2:Qk$1(e,uk$1,vk$1);break;case 3:if(Dk$1(e,a),(a&130023424)===a&&(i=gk$1+500-B(),10<i)){if(uc$1(e,0)!==0)break;if(o=e.suspendedLanes,(o&a)!==a){L(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Ff$1(Qk$1.bind(null,e,uk$1,vk$1),i);break}Qk$1(e,uk$1,vk$1);break;case 4:if(Dk$1(e,a),(a&4194240)===a)break;for(i=e.eventTimes,o=-1;0<a;){var d=31-oc$1(a);c=1<<d,d=i[d],d>o&&(o=d),a&=~c}if(a=o,a=B()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*mk$1(a/1960))-a,10<a){e.timeoutHandle=Ff$1(Qk$1.bind(null,e,uk$1,vk$1),a);break}Qk$1(e,uk$1,vk$1);break;case 5:Qk$1(e,uk$1,vk$1);break;default:throw Error(p(329))}}}return Ek$1(e,B()),e.callbackNode===s?Hk$1.bind(null,e):null}function Ok$1(e,i){var s=tk$1;return e.current.memoizedState.isDehydrated&&(Lk$1(e,i).flags|=256),e=Jk$1(e,i),e!==2&&(i=uk$1,uk$1=s,i!==null&&Gj$1(i)),e}function Gj$1(e){uk$1===null?uk$1=e:uk$1.push.apply(uk$1,e)}function Pk$1(e){for(var i=e;;){if(i.flags&16384){var s=i.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var a=0;a<s.length;a++){var o=s[a],c=o.getSnapshot;o=o.value;try{if(!He(c(),o))return!1}catch{return!1}}}if(s=i.child,i.subtreeFlags&16384&&s!==null)s.return=i,i=s;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Dk$1(e,i){for(i&=~sk$1,i&=~rk$1,e.suspendedLanes|=i,e.pingedLanes&=~i,e=e.expirationTimes;0<i;){var s=31-oc$1(i),a=1<<s;e[s]=-1,i&=~a}}function Fk$1(e){if(K&6)throw Error(p(327));Ik$1();var i=uc$1(e,0);if(!(i&1))return Ek$1(e,B()),null;var s=Jk$1(e,i);if(e.tag!==0&&s===2){var a=xc$1(e);a!==0&&(i=a,s=Ok$1(e,a))}if(s===1)throw s=qk$1,Lk$1(e,0),Dk$1(e,i),Ek$1(e,B()),s;if(s===6)throw Error(p(345));return e.finishedWork=e.current.alternate,e.finishedLanes=i,Qk$1(e,uk$1,vk$1),Ek$1(e,B()),null}function Rk$1(e,i){var s=K;K|=1;try{return e(i)}finally{K=s,K===0&&(Hj$1=B()+500,fg$1&&jg$1())}}function Sk$1(e){xk$1!==null&&xk$1.tag===0&&!(K&6)&&Ik$1();var i=K;K|=1;var s=pk$1.transition,a=C;try{if(pk$1.transition=null,C=1,e)return e()}finally{C=a,pk$1.transition=s,K=i,!(K&6)&&jg$1()}}function Ij$1(){gj$1=fj$1.current,E(fj$1)}function Lk$1(e,i){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,Gf$1(s)),Y!==null)for(s=Y.return;s!==null;){var a=s;switch(wg$1(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&$f$1();break;case 3:Jh$1(),E(Wf$1),E(H),Oh$1();break;case 5:Lh$1(a);break;case 4:Jh$1();break;case 13:E(M);break;case 19:E(M);break;case 10:Rg$1(a.type._context);break;case 22:case 23:Ij$1()}s=s.return}if(R=e,Y=e=wh$1(e.current,null),Z$1=gj$1=i,T=0,qk$1=null,sk$1=rk$1=hh$1=0,uk$1=tk$1=null,Wg$1!==null){for(i=0;i<Wg$1.length;i++)if(s=Wg$1[i],a=s.interleaved,a!==null){s.interleaved=null;var o=a.next,c=s.pending;if(c!==null){var d=c.next;c.next=o,a.next=d}s.pending=a}Wg$1=null}return e}function Nk$1(e,i){do{var s=Y;try{if(Qg$1(),Ph$1.current=ai$1,Sh$1){for(var a=N.memoizedState;a!==null;){var o=a.queue;o!==null&&(o.pending=null),a=a.next}Sh$1=!1}if(Rh$1=0,P=O=N=null,Th$1=!1,Uh$1=0,ok$1.current=null,s===null||s.return===null){T=1,qk$1=i,Y=null;break}e:{var c=e,d=s.return,g=s,b=i;if(i=Z$1,g.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var j=b,_e=g,$=_e.tag;if(!(_e.mode&1)&&($===0||$===11||$===15)){var rt=_e.alternate;rt?(_e.updateQueue=rt.updateQueue,_e.memoizedState=rt.memoizedState,_e.lanes=rt.lanes):(_e.updateQueue=null,_e.memoizedState=null)}var st=Vi$1(d);if(st!==null){st.flags&=-257,Wi$1(st,d,g,c,i),st.mode&1&&Ti$1(c,j,i),i=st,b=j;var ut=i.updateQueue;if(ut===null){var gt=new Set;gt.add(b),i.updateQueue=gt}else ut.add(b);break e}else{if(!(i&1)){Ti$1(c,j,i),uj$1();break e}b=Error(p(426))}}else if(I&&g.mode&1){var wt=Vi$1(d);if(wt!==null){!(wt.flags&65536)&&(wt.flags|=256),Wi$1(wt,d,g,c,i),Jg$1(Ki$1(b,g));break e}}c=b=Ki$1(b,g),T!==4&&(T=2),tk$1===null?tk$1=[c]:tk$1.push(c),c=d;do{switch(c.tag){case 3:c.flags|=65536,i&=-i,c.lanes|=i;var yt=Oi$1(c,b,i);fh$1(c,yt);break e;case 1:g=b;var At=c.type,Ct=c.stateNode;if(!(c.flags&128)&&(typeof At.getDerivedStateFromError=="function"||Ct!==null&&typeof Ct.componentDidCatch=="function"&&(Si===null||!Si.has(Ct)))){c.flags|=65536,i&=-i,c.lanes|=i;var Tt=Ri$1(c,g,i);fh$1(c,Tt);break e}}c=c.return}while(c!==null)}Tk$1(s)}catch(kt){i=kt,Y===s&&s!==null&&(Y=s=s.return);continue}break}while(!0)}function Kk$1(){var e=nk$1.current;return nk$1.current=ai$1,e===null?ai$1:e}function uj$1(){(T===0||T===3||T===2)&&(T=4),R===null||!(hh$1&268435455)&&!(rk$1&268435455)||Dk$1(R,Z$1)}function Jk$1(e,i){var s=K;K|=2;var a=Kk$1();(R!==e||Z$1!==i)&&(vk$1=null,Lk$1(e,i));do try{Uk$1();break}catch(o){Nk$1(e,o)}while(!0);if(Qg$1(),K=s,nk$1.current=a,Y!==null)throw Error(p(261));return R=null,Z$1=0,T}function Uk$1(){for(;Y!==null;)Vk$1(Y)}function Mk$1(){for(;Y!==null&&!cc$1();)Vk$1(Y)}function Vk$1(e){var i=Wk$1(e.alternate,e,gj$1);e.memoizedProps=e.pendingProps,i===null?Tk$1(e):Y=i,ok$1.current=null}function Tk$1(e){var i=e;do{var s=i.alternate;if(e=i.return,i.flags&32768){if(s=Jj$1(s,i),s!==null){s.flags&=32767,Y=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{T=6,Y=null;return}}else if(s=Fj$1(s,i,gj$1),s!==null){Y=s;return}if(i=i.sibling,i!==null){Y=i;return}Y=i=e}while(i!==null);T===0&&(T=5)}function Qk$1(e,i,s){var a=C,o=pk$1.transition;try{pk$1.transition=null,C=1,Xk$1(e,i,s,a)}finally{pk$1.transition=o,C=a}return null}function Xk$1(e,i,s,a){do Ik$1();while(xk$1!==null);if(K&6)throw Error(p(327));s=e.finishedWork;var o=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(p(177));e.callbackNode=null,e.callbackPriority=0;var c=s.lanes|s.childLanes;if(Bc$1(e,c),e===R&&(Y=R=null,Z$1=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||wk$1||(wk$1=!0,Gk$1(hc$1,function(){return Ik$1(),null})),c=(s.flags&15990)!==0,s.subtreeFlags&15990||c){c=pk$1.transition,pk$1.transition=null;var d=C;C=1;var g=K;K|=4,ok$1.current=null,Pj$1(e,s),ek$1(s,e),Oe(Df$1),dd$1=!!Cf$1,Df$1=Cf$1=null,e.current=s,ik$1(s),dc$1(),K=g,C=d,pk$1.transition=c}else e.current=s;if(wk$1&&(wk$1=!1,xk$1=e,yk$1=o),c=e.pendingLanes,c===0&&(Si=null),mc$1(s.stateNode),Ek$1(e,B()),i!==null)for(a=e.onRecoverableError,s=0;s<i.length;s++)o=i[s],a(o.value,{componentStack:o.stack,digest:o.digest});if(Pi$1)throw Pi$1=!1,e=Qi$1,Qi$1=null,e;return yk$1&1&&e.tag!==0&&Ik$1(),c=e.pendingLanes,c&1?e===Ak$1?zk$1++:(zk$1=0,Ak$1=e):zk$1=0,jg$1(),null}function Ik$1(){if(xk$1!==null){var e=Dc$1(yk$1),i=pk$1.transition,s=C;try{if(pk$1.transition=null,C=16>e?16:e,xk$1===null)var a=!1;else{if(e=xk$1,xk$1=null,yk$1=0,K&6)throw Error(p(331));var o=K;for(K|=4,V=e.current;V!==null;){var c=V,d=c.child;if(V.flags&16){var g=c.deletions;if(g!==null){for(var b=0;b<g.length;b++){var j=g[b];for(V=j;V!==null;){var _e=V;switch(_e.tag){case 0:case 11:case 15:Qj$1(8,_e,c)}var $=_e.child;if($!==null)$.return=_e,V=$;else for(;V!==null;){_e=V;var rt=_e.sibling,st=_e.return;if(Tj$1(_e),_e===j){V=null;break}if(rt!==null){rt.return=st,V=rt;break}V=st}}}var ut=c.alternate;if(ut!==null){var gt=ut.child;if(gt!==null){ut.child=null;do{var wt=gt.sibling;gt.sibling=null,gt=wt}while(gt!==null)}}V=c}}if(c.subtreeFlags&2064&&d!==null)d.return=c,V=d;else e:for(;V!==null;){if(c=V,c.flags&2048)switch(c.tag){case 0:case 11:case 15:Qj$1(9,c,c.return)}var yt=c.sibling;if(yt!==null){yt.return=c.return,V=yt;break e}V=c.return}}var At=e.current;for(V=At;V!==null;){d=V;var Ct=d.child;if(d.subtreeFlags&2064&&Ct!==null)Ct.return=d,V=Ct;else e:for(d=At;V!==null;){if(g=V,g.flags&2048)try{switch(g.tag){case 0:case 11:case 15:Rj$1(9,g)}}catch(kt){W(g,g.return,kt)}if(g===d){V=null;break e}var Tt=g.sibling;if(Tt!==null){Tt.return=g.return,V=Tt;break e}V=g.return}}if(K=o,jg$1(),lc$1&&typeof lc$1.onPostCommitFiberRoot=="function")try{lc$1.onPostCommitFiberRoot(kc$1,e)}catch{}a=!0}return a}finally{C=s,pk$1.transition=i}}return!1}function Yk$1(e,i,s){i=Ki$1(s,i),i=Oi$1(e,i,1),e=dh$1(e,i,1),i=L(),e!==null&&(Ac$1(e,1,i),Ek$1(e,i))}function W(e,i,s){if(e.tag===3)Yk$1(e,e,s);else for(;i!==null;){if(i.tag===3){Yk$1(i,e,s);break}else if(i.tag===1){var a=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Si===null||!Si.has(a))){e=Ki$1(s,e),e=Ri$1(i,e,1),i=dh$1(i,e,1),e=L(),i!==null&&(Ac$1(i,1,e),Ek$1(i,e));break}}i=i.return}}function Ui$1(e,i,s){var a=e.pingCache;a!==null&&a.delete(i),i=L(),e.pingedLanes|=e.suspendedLanes&s,R===e&&(Z$1&s)===s&&(T===4||T===3&&(Z$1&130023424)===Z$1&&500>B()-gk$1?Lk$1(e,0):sk$1|=s),Ek$1(e,i)}function Zk$1(e,i){i===0&&(e.mode&1?(i=sc$1,sc$1<<=1,!(sc$1&130023424)&&(sc$1=4194304)):i=1);var s=L();e=Zg$1(e,i),e!==null&&(Ac$1(e,i,s),Ek$1(e,s))}function vj$1(e){var i=e.memoizedState,s=0;i!==null&&(s=i.retryLane),Zk$1(e,s)}function ck$1(e,i){var s=0;switch(e.tag){case 13:var a=e.stateNode,o=e.memoizedState;o!==null&&(s=o.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(p(314))}a!==null&&a.delete(i),Zk$1(e,s)}var Wk$1;Wk$1=function(e,i,s){if(e!==null)if(e.memoizedProps!==i.pendingProps||Wf$1.current)Ug$1=!0;else{if(!(e.lanes&s)&&!(i.flags&128))return Ug$1=!1,zj$1(e,i,s);Ug$1=!!(e.flags&131072)}else Ug$1=!1,I&&i.flags&1048576&&ug$1(i,ng$1,i.index);switch(i.lanes=0,i.tag){case 2:var a=i.type;jj$1(e,i),e=i.pendingProps;var o=Yf$1(i,H.current);Tg$1(i,s),o=Xh$1(null,i,a,e,o,s);var c=bi$1();return i.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Zf$1(a)?(c=!0,cg$1(i)):c=!1,i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,ah$1(i),o.updater=nh$1,i.stateNode=o,o._reactInternals=i,rh$1(i,a,e,s),i=kj$1(null,i,a,!0,c,s)):(i.tag=0,I&&c&&vg$1(i),Yi$1(null,i,o,s),i=i.child),i;case 16:a=i.elementType;e:{switch(jj$1(e,i),e=i.pendingProps,o=a._init,a=o(a._payload),i.type=a,o=i.tag=$k$1(a),e=Lg$1(a,e),o){case 0:i=dj$1(null,i,a,e,s);break e;case 1:i=ij$1(null,i,a,e,s);break e;case 11:i=Zi$1(null,i,a,e,s);break e;case 14:i=aj$1(null,i,a,Lg$1(a.type,e),s);break e}throw Error(p(306,a,""))}return i;case 0:return a=i.type,o=i.pendingProps,o=i.elementType===a?o:Lg$1(a,o),dj$1(e,i,a,o,s);case 1:return a=i.type,o=i.pendingProps,o=i.elementType===a?o:Lg$1(a,o),ij$1(e,i,a,o,s);case 3:e:{if(lj$1(i),e===null)throw Error(p(387));a=i.pendingProps,c=i.memoizedState,o=c.element,bh$1(e,i),gh$1(i,a,null,s);var d=i.memoizedState;if(a=d.element,c.isDehydrated)if(c={element:a,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},i.updateQueue.baseState=c,i.memoizedState=c,i.flags&256){o=Ki$1(Error(p(423)),i),i=mj$1(e,i,a,s,o);break e}else if(a!==o){o=Ki$1(Error(p(424)),i),i=mj$1(e,i,a,s,o);break e}else for(yg$1=Lf$1(i.stateNode.containerInfo.firstChild),xg$1=i,I=!0,zg$1=null,s=Ch$1(i,null,a,s),i.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Ig$1(),a===o){i=$i$1(e,i,s);break e}Yi$1(e,i,a,s)}i=i.child}return i;case 5:return Kh$1(i),e===null&&Eg$1(i),a=i.type,o=i.pendingProps,c=e!==null?e.memoizedProps:null,d=o.children,Ef$1(a,o)?d=null:c!==null&&Ef$1(a,c)&&(i.flags|=32),hj$1(e,i),Yi$1(e,i,d,s),i.child;case 6:return e===null&&Eg$1(i),null;case 13:return pj$1(e,i,s);case 4:return Ih$1(i,i.stateNode.containerInfo),a=i.pendingProps,e===null?i.child=Bh$1(i,null,a,s):Yi$1(e,i,a,s),i.child;case 11:return a=i.type,o=i.pendingProps,o=i.elementType===a?o:Lg$1(a,o),Zi$1(e,i,a,o,s);case 7:return Yi$1(e,i,i.pendingProps,s),i.child;case 8:return Yi$1(e,i,i.pendingProps.children,s),i.child;case 12:return Yi$1(e,i,i.pendingProps.children,s),i.child;case 10:e:{if(a=i.type._context,o=i.pendingProps,c=i.memoizedProps,d=o.value,G(Mg$1,a._currentValue),a._currentValue=d,c!==null)if(He(c.value,d)){if(c.children===o.children&&!Wf$1.current){i=$i$1(e,i,s);break e}}else for(c=i.child,c!==null&&(c.return=i);c!==null;){var g=c.dependencies;if(g!==null){d=c.child;for(var b=g.firstContext;b!==null;){if(b.context===a){if(c.tag===1){b=ch$1(-1,s&-s),b.tag=2;var j=c.updateQueue;if(j!==null){j=j.shared;var _e=j.pending;_e===null?b.next=b:(b.next=_e.next,_e.next=b),j.pending=b}}c.lanes|=s,b=c.alternate,b!==null&&(b.lanes|=s),Sg$1(c.return,s,i),g.lanes|=s;break}b=b.next}}else if(c.tag===10)d=c.type===i.type?null:c.child;else if(c.tag===18){if(d=c.return,d===null)throw Error(p(341));d.lanes|=s,g=d.alternate,g!==null&&(g.lanes|=s),Sg$1(d,s,i),d=c.sibling}else d=c.child;if(d!==null)d.return=c;else for(d=c;d!==null;){if(d===i){d=null;break}if(c=d.sibling,c!==null){c.return=d.return,d=c;break}d=d.return}c=d}Yi$1(e,i,o.children,s),i=i.child}return i;case 9:return o=i.type,a=i.pendingProps.children,Tg$1(i,s),o=Vg$1(o),a=a(o),i.flags|=1,Yi$1(e,i,a,s),i.child;case 14:return a=i.type,o=Lg$1(a,i.pendingProps),o=Lg$1(a.type,o),aj$1(e,i,a,o,s);case 15:return cj$1(e,i,i.type,i.pendingProps,s);case 17:return a=i.type,o=i.pendingProps,o=i.elementType===a?o:Lg$1(a,o),jj$1(e,i),i.tag=1,Zf$1(a)?(e=!0,cg$1(i)):e=!1,Tg$1(i,s),ph$1(i,a,o),rh$1(i,a,o,s),kj$1(null,i,a,!0,e,s);case 19:return yj$1(e,i,s);case 22:return ej$1(e,i,s)}throw Error(p(156,i.tag))};function Gk$1(e,i){return ac$1(e,i)}function al$1(e,i,s,a){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(e,i,s,a){return new al$1(e,i,s,a)}function bj$1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function $k$1(e){if(typeof e=="function")return bj$1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Da$1)return 11;if(e===Ga$1)return 14}return 2}function wh$1(e,i){var s=e.alternate;return s===null?(s=Bg(e.tag,i,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=i,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,i=e.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function yh$1(e,i,s,a,o,c){var d=2;if(a=e,typeof e=="function")bj$1(e)&&(d=1);else if(typeof e=="string")d=5;else e:switch(e){case ya$1:return Ah$1(s.children,o,c,i);case za$1:d=8,o|=8;break;case Aa$1:return e=Bg(12,s,i,o|2),e.elementType=Aa$1,e.lanes=c,e;case Ea$1:return e=Bg(13,s,i,o),e.elementType=Ea$1,e.lanes=c,e;case Fa$1:return e=Bg(19,s,i,o),e.elementType=Fa$1,e.lanes=c,e;case Ia$1:return qj$1(s,o,c,i);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ba$1:d=10;break e;case Ca$1:d=9;break e;case Da$1:d=11;break e;case Ga$1:d=14;break e;case Ha$1:d=16,a=null;break e}throw Error(p(130,e==null?e:typeof e,""))}return i=Bg(d,s,i,o),i.elementType=e,i.type=a,i.lanes=c,i}function Ah$1(e,i,s,a){return e=Bg(7,e,a,i),e.lanes=s,e}function qj$1(e,i,s,a){return e=Bg(22,e,a,i),e.elementType=Ia$1,e.lanes=s,e.stateNode={isHidden:!1},e}function xh$1(e,i,s){return e=Bg(6,e,null,i),e.lanes=s,e}function zh$1(e,i,s){return i=Bg(4,e.children!==null?e.children:[],e.key,i),i.lanes=s,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}function bl$1(e,i,s,a,o){this.tag=i,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc$1(0),this.expirationTimes=zc$1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc$1(0),this.identifierPrefix=a,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function cl$1(e,i,s,a,o,c,d,g,b){return e=new bl$1(e,i,s,g,b),i===1?(i=1,c===!0&&(i|=8)):i=0,c=Bg(3,null,null,i),e.current=c,c.stateNode=e,c.memoizedState={element:a,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah$1(c),e}function dl$1(e,i,s){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa$1,key:a==null?null:""+a,children:e,containerInfo:i,implementation:s}}function el$1(e){if(!e)return Vf$1;e=e._reactInternals;e:{if(Vb$1(e)!==e||e.tag!==1)throw Error(p(170));var i=e;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Zf$1(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(p(171))}if(e.tag===1){var s=e.type;if(Zf$1(s))return bg$1(e,s,i)}return i}function fl$1(e,i,s,a,o,c,d,g,b){return e=cl$1(s,a,!0,e,o,c,d,g,b),e.context=el$1(null),s=e.current,a=L(),o=lh$1(s),c=ch$1(a,o),c.callback=i??null,dh$1(s,c,o),e.current.lanes=o,Ac$1(e,o,a),Ek$1(e,a),e}function gl$1(e,i,s,a){var o=i.current,c=L(),d=lh$1(o);return s=el$1(s),i.context===null?i.context=s:i.pendingContext=s,i=ch$1(c,d),i.payload={element:e},a=a===void 0?null:a,a!==null&&(i.callback=a),e=dh$1(o,i,d),e!==null&&(mh$1(e,o,d,c),eh$1(e,o,d)),d}function hl$1(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function il$1(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<i?s:i}}function jl(e,i){il$1(e,i),(e=e.alternate)&&il$1(e,i)}function kl$1(){return null}var ll$1=typeof reportError=="function"?reportError:function(e){console.error(e)};function ml$1(e){this._internalRoot=e}nl$1.prototype.render=ml$1.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(p(409));gl$1(e,i,null,null)};nl$1.prototype.unmount=ml$1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;Sk$1(function(){gl$1(null,e,null,null)}),i[uf$1]=null}};function nl$1(e){this._internalRoot=e}nl$1.prototype.unstable_scheduleHydration=function(e){if(e){var i=Hc$1();e={blockedOn:null,target:e,priority:i};for(var s=0;s<Qc$1.length&&i!==0&&i<Qc$1[s].priority;s++);Qc$1.splice(s,0,e),s===0&&Vc$1(e)}};function ol$1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function pl$1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ql$1(){}function rl$1(e,i,s,a,o){if(o){if(typeof a=="function"){var c=a;a=function(){var j=hl$1(d);c.call(j)}}var d=fl$1(i,a,e,0,null,!1,!1,"",ql$1);return e._reactRootContainer=d,e[uf$1]=d.current,sf$1(e.nodeType===8?e.parentNode:e),Sk$1(),d}for(;o=e.lastChild;)e.removeChild(o);if(typeof a=="function"){var g=a;a=function(){var j=hl$1(b);g.call(j)}}var b=cl$1(e,0,!1,null,null,!1,!1,"",ql$1);return e._reactRootContainer=b,e[uf$1]=b.current,sf$1(e.nodeType===8?e.parentNode:e),Sk$1(function(){gl$1(i,b,s,a)}),b}function sl$1(e,i,s,a,o){var c=s._reactRootContainer;if(c){var d=c;if(typeof o=="function"){var g=o;o=function(){var b=hl$1(d);g.call(b)}}gl$1(i,d,e,o)}else d=rl$1(s,i,e,o,a);return hl$1(d)}Ec$1=function(e){switch(e.tag){case 3:var i=e.stateNode;if(i.current.memoizedState.isDehydrated){var s=tc$1(i.pendingLanes);s!==0&&(Cc$1(i,s|1),Ek$1(i,B()),!(K&6)&&(Hj$1=B()+500,jg$1()))}break;case 13:Sk$1(function(){var a=Zg$1(e,1);if(a!==null){var o=L();mh$1(a,e,1,o)}}),jl(e,1)}};Fc$1=function(e){if(e.tag===13){var i=Zg$1(e,134217728);if(i!==null){var s=L();mh$1(i,e,134217728,s)}jl(e,134217728)}};Gc$1=function(e){if(e.tag===13){var i=lh$1(e),s=Zg$1(e,i);if(s!==null){var a=L();mh$1(s,e,i,a)}jl(e,i)}};Hc$1=function(){return C};Ic$1=function(e,i){var s=C;try{return C=e,i()}finally{C=s}};yb$1=function(e,i,s){switch(i){case"input":if(bb$1(e,s),i=s.name,s.type==="radio"&&i!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<s.length;i++){var a=s[i];if(a!==e&&a.form===e.form){var o=Db$1(a);if(!o)throw Error(p(90));Wa$1(a),bb$1(a,o)}}}break;case"textarea":ib$1(e,s);break;case"select":i=s.value,i!=null&&fb(e,!!s.multiple,i,!1)}};Gb$1=Rk$1;Hb$1=Sk$1;var tl$1={usingClientEntryPoint:!1,Events:[Cb$1,ue$2,Db$1,Eb$1,Fb$1,Rk$1]},ul$1={findFiberByHostInstance:Wc$1,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl$1={bundleType:ul$1.bundleType,version:ul$1.version,rendererPackageName:ul$1.rendererPackageName,rendererConfig:ul$1.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua$1.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Zb$1(e),e===null?null:e.stateNode},findFiberByHostInstance:ul$1.findFiberByHostInstance||kl$1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl$1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl$1.isDisabled&&wl$1.supportsFiber)try{kc$1=wl$1.inject(vl$1),lc$1=wl$1}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl$1;reactDom_production_min.createPortal=function(e,i){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol$1(i))throw Error(p(200));return dl$1(e,i,null,s)};reactDom_production_min.createRoot=function(e,i){if(!ol$1(e))throw Error(p(299));var s=!1,a="",o=ll$1;return i!=null&&(i.unstable_strictMode===!0&&(s=!0),i.identifierPrefix!==void 0&&(a=i.identifierPrefix),i.onRecoverableError!==void 0&&(o=i.onRecoverableError)),i=cl$1(e,1,!1,null,null,s,!1,a,o),e[uf$1]=i.current,sf$1(e.nodeType===8?e.parentNode:e),new ml$1(i)};reactDom_production_min.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(p(188)):(e=Object.keys(e).join(","),Error(p(268,e)));return e=Zb$1(i),e=e===null?null:e.stateNode,e};reactDom_production_min.flushSync=function(e){return Sk$1(e)};reactDom_production_min.hydrate=function(e,i,s){if(!pl$1(i))throw Error(p(200));return sl$1(null,e,i,!0,s)};reactDom_production_min.hydrateRoot=function(e,i,s){if(!ol$1(e))throw Error(p(405));var a=s!=null&&s.hydratedSources||null,o=!1,c="",d=ll$1;if(s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(d=s.onRecoverableError)),i=fl$1(i,null,e,1,s??null,o,!1,c,d),e[uf$1]=i.current,sf$1(e),a)for(e=0;e<a.length;e++)s=a[e],o=s._getVersion,o=o(s._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[s,o]:i.mutableSourceEagerHydrationData.push(s,o);return new nl$1(i)};reactDom_production_min.render=function(e,i,s){if(!pl$1(i))throw Error(p(200));return sl$1(null,e,i,!1,s)};reactDom_production_min.unmountComponentAtNode=function(e){if(!pl$1(e))throw Error(p(40));return e._reactRootContainer?(Sk$1(function(){sl$1(null,null,e,!1,function(){e._reactRootContainer=null,e[uf$1]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Rk$1;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(e,i,s,a){if(!pl$1(s))throw Error(p(200));if(e==null||e._reactInternals===void 0)throw Error(p(38));return sl$1(e,i,s,!1,a)};reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(e){console.error(e)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,m=reactDomExports;client.createRoot=m.createRoot,client.hydrateRoot=m.hydrateRoot;const scriptRel="modulepreload",assetsURL=function(e){return"/"+e},seen={},__vitePreload=function(i,s,a){let o=Promise.resolve();if(s&&s.length>0){const c=document.getElementsByTagName("link");o=Promise.all(s.map(d=>{if(d=assetsURL(d),d in seen)return;seen[d]=!0;const g=d.endsWith(".css"),b=g?'[rel="stylesheet"]':"";if(!!a)for(let $=c.length-1;$>=0;$--){const rt=c[$];if(rt.href===d&&(!g||rt.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${b}`))return;const _e=document.createElement("link");if(_e.rel=g?"stylesheet":scriptRel,g||(_e.as="script",_e.crossOrigin=""),_e.href=d,document.head.appendChild(_e),g)return new Promise(($,rt)=>{_e.addEventListener("load",$),_e.addEventListener("error",()=>rt(new Error(`Unable to preload CSS for ${d}`)))})}))}return o.then(()=>i()).catch(c=>{const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c})};var ZN=Object.create,Fg=Object.defineProperty,JN=Object.getOwnPropertyDescriptor,$N=Object.getOwnPropertyNames,eF=Object.getPrototypeOf,tF=Object.prototype.hasOwnProperty,rF=(e,i,s)=>i in e?Fg(e,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[i]=s,zi=(e,i)=>()=>(i||e((i={exports:{}}).exports,i),i.exports),iF=(e,i)=>{for(var s in i)Fg(e,s,{get:i[s],enumerable:!0})},nF=(e,i,s,a)=>{if(i&&typeof i=="object"||typeof i=="function")for(let o of $N(i))!tF.call(e,o)&&o!==s&&Fg(e,o,{get:()=>i[o],enumerable:!(a=JN(i,o))||a.enumerable});return e},pi=(e,i,s)=>(s=e!=null?ZN(eF(e)):{},nF(i||!e||!e.__esModule?Fg(s,"default",{value:e,enumerable:!0}):s,e)),Ui=(e,i,s)=>(rF(e,typeof i!="symbol"?i+"":i,s),s),CO=zi((e,i)=>{(function(s,a){typeof e=="object"?i.exports=a():typeof define=="function"&&define.amd?define(a):s.Alea=a()})(e,function(){return s.importState=function(o){var c=new s;return c.importState(o),c},s;function s(){return function(o){var c=0,d=0,g=0,b=1;o.length==0&&(o=[+new Date]);var j=a();c=j(" "),d=j(" "),g=j(" ");for(var _e=0;_e<o.length;_e++)c-=j(o[_e]),c<0&&(c+=1),d-=j(o[_e]),d<0&&(d+=1),g-=j(o[_e]),g<0&&(g+=1);j=null;var $=function(){var rt=2091639*c+b*23283064365386963e-26;return c=d,d=g,g=rt-(b=rt|0)};return $.next=$,$.uint32=function(){return $()*4294967296},$.fract53=function(){return $()+($()*2097152|0)*11102230246251565e-32},$.version="Alea 0.9",$.args=o,$.exportState=function(){return[c,d,g,b]},$.importState=function(rt){c=+rt[0]||0,d=+rt[1]||0,g=+rt[2]||0,b=+rt[3]||0},$}(Array.prototype.slice.call(arguments))}function a(){var o=4022871197,c=function(d){d=d.toString();for(var g=0;g<d.length;g++){o+=d.charCodeAt(g);var b=.02519603282416938*o;o=b>>>0,b-=o,b*=o,o=b>>>0,b-=o,o+=b*4294967296}return(o>>>0)*23283064365386963e-26};return c.version="Mash 0.9",c}})}),iA=zi((e,i)=>{(function(s,a){typeof e=="object"&&typeof i<"u"?a(e):typeof define=="function"&&define.amd?define(["exports"],a):a((s=typeof globalThis<"u"?globalThis:s||self).SVDJS={})})(e,function(s){s.SVD=function(a,o,c,d,g){if(o=o===void 0||o,c=c===void 0||c,g=1e-64/(d=d||Math.pow(2,-52)),!a)throw new TypeError("Matrix a is not defined");var b,j,_e,$,rt,st,ut,gt,wt,yt,At,Ct,Tt=a[0].length,kt=a.length;if(kt<Tt)throw new TypeError("Invalid matrix: m < n");for(var Pt=[],It=[],Lt=[],Nt=o==="f"?kt:Tt,Ht=yt=ut=0;Ht<kt;Ht++)It[Ht]=new Array(Nt).fill(0);for(Ht=0;Ht<Tt;Ht++)Lt[Ht]=new Array(Tt).fill(0);var dr,hs=new Array(Tt).fill(0);for(Ht=0;Ht<kt;Ht++)for(b=0;b<Tt;b++)It[Ht][b]=a[Ht][b];for(Ht=0;Ht<Tt;Ht++){for(Pt[Ht]=ut,wt=0,_e=Ht+1,b=Ht;b<kt;b++)wt+=Math.pow(It[b][Ht],2);if(wt<g)ut=0;else for(gt=(st=It[Ht][Ht])*(ut=st<0?Math.sqrt(wt):-Math.sqrt(wt))-wt,It[Ht][Ht]=st-ut,b=_e;b<Tt;b++){for(wt=0,j=Ht;j<kt;j++)wt+=It[j][Ht]*It[j][b];for(st=wt/gt,j=Ht;j<kt;j++)It[j][b]=It[j][b]+st*It[j][Ht]}for(hs[Ht]=ut,wt=0,b=_e;b<Tt;b++)wt+=Math.pow(It[Ht][b],2);if(wt<g)ut=0;else{for(gt=(st=It[Ht][Ht+1])*(ut=st<0?Math.sqrt(wt):-Math.sqrt(wt))-wt,It[Ht][Ht+1]=st-ut,b=_e;b<Tt;b++)Pt[b]=It[Ht][b]/gt;for(b=_e;b<kt;b++){for(wt=0,j=_e;j<Tt;j++)wt+=It[b][j]*It[Ht][j];for(j=_e;j<Tt;j++)It[b][j]=It[b][j]+wt*Pt[j]}}yt<(At=Math.abs(hs[Ht])+Math.abs(Pt[Ht]))&&(yt=At)}if(c)for(Ht=Tt-1;0<=Ht;Ht--){if(ut!==0){for(gt=It[Ht][Ht+1]*ut,b=_e;b<Tt;b++)Lt[b][Ht]=It[Ht][b]/gt;for(b=_e;b<Tt;b++){for(wt=0,j=_e;j<Tt;j++)wt+=It[Ht][j]*Lt[j][b];for(j=_e;j<Tt;j++)Lt[j][b]=Lt[j][b]+wt*Lt[j][Ht]}}for(b=_e;b<Tt;b++)Lt[Ht][b]=0,Lt[b][Ht]=0;Lt[Ht][Ht]=1,ut=Pt[Ht],_e=Ht}if(o){if(o==="f")for(Ht=Tt;Ht<kt;Ht++){for(b=Tt;b<kt;b++)It[Ht][b]=0;It[Ht][Ht]=1}for(Ht=Tt-1;0<=Ht;Ht--){for(_e=Ht+1,ut=hs[Ht],b=_e;b<Nt;b++)It[Ht][b]=0;if(ut!==0){for(gt=It[Ht][Ht]*ut,b=_e;b<Nt;b++){for(wt=0,j=_e;j<kt;j++)wt+=It[j][Ht]*It[j][b];for(st=wt/gt,j=Ht;j<kt;j++)It[j][b]=It[j][b]+st*It[j][Ht]}for(b=Ht;b<kt;b++)It[b][Ht]=It[b][Ht]/ut}else for(b=Ht;b<kt;b++)It[b][Ht]=0;It[Ht][Ht]=It[Ht][Ht]+1}}for(d*=yt,j=Tt-1;0<=j;j--)for(var _s=0;_s<50;_s++){for(dr=!1,_e=j;0<=_e;_e--){if(Math.abs(Pt[_e])<=d){dr=!0;break}if(Math.abs(hs[_e-1])<=d)break}if(!dr){for(rt=0,$=_e-(wt=1),Ht=_e;Ht<j+1&&(st=wt*Pt[Ht],Pt[Ht]=rt*Pt[Ht],!(Math.abs(st)<=d));Ht++)if(ut=hs[Ht],hs[Ht]=Math.sqrt(st*st+ut*ut),rt=ut/(gt=hs[Ht]),wt=-st/gt,o)for(b=0;b<kt;b++)At=It[b][$],Ct=It[b][Ht],It[b][$]=At*rt+Ct*wt,It[b][Ht]=-At*wt+Ct*rt}if(Ct=hs[j],_e===j){if(Ct<0&&(hs[j]=-Ct,c))for(b=0;b<Tt;b++)Lt[b][j]=-Lt[b][j];break}for(yt=hs[_e],st=(((At=hs[j-1])-Ct)*(At+Ct)+((ut=Pt[j-1])-(gt=Pt[j]))*(ut+gt))/(2*gt*At),ut=Math.sqrt(st*st+1),st=((yt-Ct)*(yt+Ct)+gt*(At/(st<0?st-ut:st+ut)-gt))/yt,Ht=_e+(wt=rt=1);Ht<j+1;Ht++){if(ut=Pt[Ht],At=hs[Ht],gt=wt*ut,ut*=rt,Ct=Math.sqrt(st*st+gt*gt),st=yt*(rt=st/(Pt[Ht-1]=Ct))+ut*(wt=gt/Ct),ut=-yt*wt+ut*rt,gt=At*wt,At*=rt,c)for(b=0;b<Tt;b++)yt=Lt[b][Ht-1],Ct=Lt[b][Ht],Lt[b][Ht-1]=yt*rt+Ct*wt,Lt[b][Ht]=-yt*wt+Ct*rt;if(Ct=Math.sqrt(st*st+gt*gt),st=(rt=st/(hs[Ht-1]=Ct))*ut+(wt=gt/Ct)*At,yt=-wt*ut+rt*At,o)for(b=0;b<kt;b++)At=It[b][Ht-1],Ct=It[b][Ht],It[b][Ht-1]=At*rt+Ct*wt,It[b][Ht]=-At*wt+Ct*rt}Pt[_e]=0,Pt[j]=st,hs[j]=yt}for(Ht=0;Ht<Tt;Ht++)hs[Ht]<d&&(hs[Ht]=0);return{u:It,q:hs,v:Lt}},s.VERSION="1.1.1",Object.defineProperty(s,"__esModule",{value:!0})})}),sI=zi((e,i)=>{(function(s,a){typeof e=="object"&&typeof i<"u"?i.exports=a():typeof define=="function"&&define.amd?define(a):(s=s||self,s.TinyQueue=a())})(e,function(){var s=function(o,c){if(o===void 0&&(o=[]),c===void 0&&(c=a),this.data=o,this.length=this.data.length,this.compare=c,this.length>0)for(var d=(this.length>>1)-1;d>=0;d--)this._down(d)};s.prototype.push=function(o){this.data.push(o),this.length++,this._up(this.length-1)},s.prototype.pop=function(){if(this.length!==0){var o=this.data[0],c=this.data.pop();return this.length--,this.length>0&&(this.data[0]=c,this._down(0)),o}},s.prototype.peek=function(){return this.data[0]},s.prototype._up=function(o){for(var c=this,d=c.data,g=c.compare,b=d[o];o>0;){var j=o-1>>1,_e=d[j];if(g(b,_e)>=0)break;d[o]=_e,o=j}d[o]=b},s.prototype._down=function(o){for(var c=this,d=c.data,g=c.compare,b=this.length>>1,j=d[o];o<b;){var _e=(o<<1)+1,$=d[_e],rt=_e+1;if(rt<this.length&&g(d[rt],$)<0&&(_e=rt,$=d[rt]),g($,j)>=0)break;d[o]=$,o=_e}d[o]=j};function a(o,c){return o<c?-1:o>c?1:0}return s})}),aI=zi((e,i)=>{var s=sI();s.default&&(s=s.default),i.exports=a,i.exports.default=a;function a(j,_e,$){_e=_e||1;for(var rt,st,ut,gt,wt=0;wt<j[0].length;wt++){var yt=j[0][wt];(!wt||yt[0]<rt)&&(rt=yt[0]),(!wt||yt[1]<st)&&(st=yt[1]),(!wt||yt[0]>ut)&&(ut=yt[0]),(!wt||yt[1]>gt)&&(gt=yt[1])}var At=ut-rt,Ct=gt-st,Tt=Math.min(At,Ct),kt=Tt/2;if(Tt===0){var Pt=[rt,st];return Pt.distance=0,Pt}for(var It=new s(void 0,o),Lt=rt;Lt<ut;Lt+=Tt)for(var Nt=st;Nt<gt;Nt+=Tt)It.push(new c(Lt+kt,Nt+kt,kt,j));var Ht=g(j),dr=new c(rt+At/2,st+Ct/2,0,j);dr.d>Ht.d&&(Ht=dr);for(var hs=It.length;It.length;){var _s=It.pop();_s.d>Ht.d&&(Ht=_s,$&&console.log("found best %d after %d probes",Math.round(1e4*_s.d)/1e4,hs)),!(_s.max-Ht.d<=_e)&&(kt=_s.h/2,It.push(new c(_s.x-kt,_s.y-kt,kt,j)),It.push(new c(_s.x+kt,_s.y-kt,kt,j)),It.push(new c(_s.x-kt,_s.y+kt,kt,j)),It.push(new c(_s.x+kt,_s.y+kt,kt,j)),hs+=4)}$&&(console.log("num probes: "+hs),console.log("best distance: "+Ht.d));var ds=[Ht.x,Ht.y];return ds.distance=Ht.d,ds}function o(j,_e){return _e.max-j.max}function c(j,_e,$,rt){this.x=j,this.y=_e,this.h=$,this.d=d(j,_e,rt),this.max=this.d+this.h*Math.SQRT2}function d(j,_e,$){for(var rt=!1,st=1/0,ut=0;ut<$.length;ut++)for(var gt=$[ut],wt=0,yt=gt.length,At=yt-1;wt<yt;At=wt++){var Ct=gt[wt],Tt=gt[At];Ct[1]>_e!=Tt[1]>_e&&j<(Tt[0]-Ct[0])*(_e-Ct[1])/(Tt[1]-Ct[1])+Ct[0]&&(rt=!rt),st=Math.min(st,b(j,_e,Ct,Tt))}return st===0?0:(rt?1:-1)*Math.sqrt(st)}function g(j){for(var _e=0,$=0,rt=0,st=j[0],ut=0,gt=st.length,wt=gt-1;ut<gt;wt=ut++){var yt=st[ut],At=st[wt],Ct=yt[0]*At[1]-At[0]*yt[1];$+=(yt[0]+At[0])*Ct,rt+=(yt[1]+At[1])*Ct,_e+=Ct*3}return _e===0?new c(st[0][0],st[0][1],0,j):new c($/_e,rt/_e,0,j)}function b(j,_e,$,rt){var st=$[0],ut=$[1],gt=rt[0]-st,wt=rt[1]-ut;if(gt!==0||wt!==0){var yt=((j-st)*gt+(_e-ut)*wt)/(gt*gt+wt*wt);yt>1?(st=rt[0],ut=rt[1]):yt>0&&(st+=gt*yt,ut+=wt*yt)}return gt=j-st,wt=_e-ut,gt*gt+wt*wt}}),oR=zi((e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;function s(a){if(a===null||a===!0||a===!1)return NaN;var o=Number(a);return isNaN(o)?o:o<0?Math.ceil(o):Math.floor(o)}i.exports=e.default}),lR=zi((e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;function s(a){var o=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()));return o.setUTCFullYear(a.getFullYear()),a.getTime()-o.getTime()}i.exports=e.default}),vR=zi(e=>{(function(){var i=function(){this.init()};i.prototype={init:function(){var $=this||s;return $._counter=1e3,$._html5AudioPool=[],$.html5PoolSize=10,$._codecs={},$._howls=[],$._muted=!1,$._volume=1,$._canPlayEvent="canplaythrough",$._navigator=typeof window<"u"&&window.navigator?window.navigator:null,$.masterGain=null,$.noAudio=!1,$.usingWebAudio=!0,$.autoSuspend=!0,$.ctx=null,$.autoUnlock=!0,$._setup(),$},volume:function($){var rt=this||s;if($=parseFloat($),rt.ctx||_e(),typeof $<"u"&&$>=0&&$<=1){if(rt._volume=$,rt._muted)return rt;rt.usingWebAudio&&rt.masterGain.gain.setValueAtTime($,s.ctx.currentTime);for(var st=0;st<rt._howls.length;st++)if(!rt._howls[st]._webAudio)for(var ut=rt._howls[st]._getSoundIds(),gt=0;gt<ut.length;gt++){var wt=rt._howls[st]._soundById(ut[gt]);wt&&wt._node&&(wt._node.volume=wt._volume*$)}return rt}return rt._volume},mute:function($){var rt=this||s;rt.ctx||_e(),rt._muted=$,rt.usingWebAudio&&rt.masterGain.gain.setValueAtTime($?0:rt._volume,s.ctx.currentTime);for(var st=0;st<rt._howls.length;st++)if(!rt._howls[st]._webAudio)for(var ut=rt._howls[st]._getSoundIds(),gt=0;gt<ut.length;gt++){var wt=rt._howls[st]._soundById(ut[gt]);wt&&wt._node&&(wt._node.muted=$?!0:wt._muted)}return rt},stop:function(){for(var $=this||s,rt=0;rt<$._howls.length;rt++)$._howls[rt].stop();return $},unload:function(){for(var $=this||s,rt=$._howls.length-1;rt>=0;rt--)$._howls[rt].unload();return $.usingWebAudio&&$.ctx&&typeof $.ctx.close<"u"&&($.ctx.close(),$.ctx=null,_e()),$},codecs:function($){return(this||s)._codecs[$.replace(/^x-/,"")]},_setup:function(){var $=this||s;if($.state=$.ctx&&$.ctx.state||"suspended",$._autoSuspend(),!$.usingWebAudio)if(typeof Audio<"u")try{var rt=new Audio;typeof rt.oncanplaythrough>"u"&&($._canPlayEvent="canplay")}catch{$.noAudio=!0}else $.noAudio=!0;try{var rt=new Audio;rt.muted&&($.noAudio=!0)}catch{}return $.noAudio||$._setupCodecs(),$},_setupCodecs:function(){var $=this||s,rt=null;try{rt=typeof Audio<"u"?new Audio:null}catch{return $}if(!rt||typeof rt.canPlayType!="function")return $;var st=rt.canPlayType("audio/mpeg;").replace(/^no$/,""),ut=$._navigator?$._navigator.userAgent:"",gt=ut.match(/OPR\/([0-6].)/g),wt=gt&&parseInt(gt[0].split("/")[1],10)<33,yt=ut.indexOf("Safari")!==-1&&ut.indexOf("Chrome")===-1,At=ut.match(/Version\/(.*?) /),Ct=yt&&At&&parseInt(At[1],10)<15;return $._codecs={mp3:!!(!wt&&(st||rt.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!st,opus:!!rt.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!rt.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!rt.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(rt.canPlayType('audio/wav; codecs="1"')||rt.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!rt.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!rt.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(rt.canPlayType("audio/x-m4a;")||rt.canPlayType("audio/m4a;")||rt.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(rt.canPlayType("audio/x-m4b;")||rt.canPlayType("audio/m4b;")||rt.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(rt.canPlayType("audio/x-mp4;")||rt.canPlayType("audio/mp4;")||rt.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!Ct&&rt.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!Ct&&rt.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!rt.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(rt.canPlayType("audio/x-flac;")||rt.canPlayType("audio/flac;")).replace(/^no$/,"")},$},_unlockAudio:function(){var $=this||s;if(!($._audioUnlocked||!$.ctx)){$._audioUnlocked=!1,$.autoUnlock=!1,!$._mobileUnloaded&&$.ctx.sampleRate!==44100&&($._mobileUnloaded=!0,$.unload()),$._scratchBuffer=$.ctx.createBuffer(1,1,22050);var rt=function(st){for(;$._html5AudioPool.length<$.html5PoolSize;)try{var ut=new Audio;ut._unlocked=!0,$._releaseHtml5Audio(ut)}catch{$.noAudio=!0;break}for(var gt=0;gt<$._howls.length;gt++)if(!$._howls[gt]._webAudio)for(var wt=$._howls[gt]._getSoundIds(),yt=0;yt<wt.length;yt++){var At=$._howls[gt]._soundById(wt[yt]);At&&At._node&&!At._node._unlocked&&(At._node._unlocked=!0,At._node.load())}$._autoResume();var Ct=$.ctx.createBufferSource();Ct.buffer=$._scratchBuffer,Ct.connect($.ctx.destination),typeof Ct.start>"u"?Ct.noteOn(0):Ct.start(0),typeof $.ctx.resume=="function"&&$.ctx.resume(),Ct.onended=function(){Ct.disconnect(0),$._audioUnlocked=!0,document.removeEventListener("touchstart",rt,!0),document.removeEventListener("touchend",rt,!0),document.removeEventListener("click",rt,!0),document.removeEventListener("keydown",rt,!0);for(var Tt=0;Tt<$._howls.length;Tt++)$._howls[Tt]._emit("unlock")}};return document.addEventListener("touchstart",rt,!0),document.addEventListener("touchend",rt,!0),document.addEventListener("click",rt,!0),document.addEventListener("keydown",rt,!0),$}},_obtainHtml5Audio:function(){var $=this||s;if($._html5AudioPool.length)return $._html5AudioPool.pop();var rt=new Audio().play();return rt&&typeof Promise<"u"&&(rt instanceof Promise||typeof rt.then=="function")&&rt.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function($){var rt=this||s;return $._unlocked&&rt._html5AudioPool.push($),rt},_autoSuspend:function(){var $=this;if(!(!$.autoSuspend||!$.ctx||typeof $.ctx.suspend>"u"||!s.usingWebAudio)){for(var rt=0;rt<$._howls.length;rt++)if($._howls[rt]._webAudio){for(var st=0;st<$._howls[rt]._sounds.length;st++)if(!$._howls[rt]._sounds[st]._paused)return $}return $._suspendTimer&&clearTimeout($._suspendTimer),$._suspendTimer=setTimeout(function(){if($.autoSuspend){$._suspendTimer=null,$.state="suspending";var ut=function(){$.state="suspended",$._resumeAfterSuspend&&(delete $._resumeAfterSuspend,$._autoResume())};$.ctx.suspend().then(ut,ut)}},3e4),$}},_autoResume:function(){var $=this;if(!(!$.ctx||typeof $.ctx.resume>"u"||!s.usingWebAudio))return $.state==="running"&&$.ctx.state!=="interrupted"&&$._suspendTimer?(clearTimeout($._suspendTimer),$._suspendTimer=null):$.state==="suspended"||$.state==="running"&&$.ctx.state==="interrupted"?($.ctx.resume().then(function(){$.state="running";for(var rt=0;rt<$._howls.length;rt++)$._howls[rt]._emit("resume")}),$._suspendTimer&&(clearTimeout($._suspendTimer),$._suspendTimer=null)):$.state==="suspending"&&($._resumeAfterSuspend=!0),$}};var s=new i,a=function($){var rt=this;if(!$.src||$.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}rt.init($)};a.prototype={init:function($){var rt=this;return s.ctx||_e(),rt._autoplay=$.autoplay||!1,rt._format=typeof $.format!="string"?$.format:[$.format],rt._html5=$.html5||!1,rt._muted=$.mute||!1,rt._loop=$.loop||!1,rt._pool=$.pool||5,rt._preload=typeof $.preload=="boolean"||$.preload==="metadata"?$.preload:!0,rt._rate=$.rate||1,rt._sprite=$.sprite||{},rt._src=typeof $.src!="string"?$.src:[$.src],rt._volume=$.volume!==void 0?$.volume:1,rt._xhr={method:$.xhr&&$.xhr.method?$.xhr.method:"GET",headers:$.xhr&&$.xhr.headers?$.xhr.headers:null,withCredentials:$.xhr&&$.xhr.withCredentials?$.xhr.withCredentials:!1},rt._duration=0,rt._state="unloaded",rt._sounds=[],rt._endTimers={},rt._queue=[],rt._playLock=!1,rt._onend=$.onend?[{fn:$.onend}]:[],rt._onfade=$.onfade?[{fn:$.onfade}]:[],rt._onload=$.onload?[{fn:$.onload}]:[],rt._onloaderror=$.onloaderror?[{fn:$.onloaderror}]:[],rt._onplayerror=$.onplayerror?[{fn:$.onplayerror}]:[],rt._onpause=$.onpause?[{fn:$.onpause}]:[],rt._onplay=$.onplay?[{fn:$.onplay}]:[],rt._onstop=$.onstop?[{fn:$.onstop}]:[],rt._onmute=$.onmute?[{fn:$.onmute}]:[],rt._onvolume=$.onvolume?[{fn:$.onvolume}]:[],rt._onrate=$.onrate?[{fn:$.onrate}]:[],rt._onseek=$.onseek?[{fn:$.onseek}]:[],rt._onunlock=$.onunlock?[{fn:$.onunlock}]:[],rt._onresume=[],rt._webAudio=s.usingWebAudio&&!rt._html5,typeof s.ctx<"u"&&s.ctx&&s.autoUnlock&&s._unlockAudio(),s._howls.push(rt),rt._autoplay&&rt._queue.push({event:"play",action:function(){rt.play()}}),rt._preload&&rt._preload!=="none"&&rt.load(),rt},load:function(){var $=this,rt=null;if(s.noAudio){$._emit("loaderror",null,"No audio support.");return}typeof $._src=="string"&&($._src=[$._src]);for(var st=0;st<$._src.length;st++){var ut,gt;if($._format&&$._format[st])ut=$._format[st];else{if(gt=$._src[st],typeof gt!="string"){$._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}ut=/^data:audio\/([^;,]+);/i.exec(gt),ut||(ut=/\.([^.]+)$/.exec(gt.split("?",1)[0])),ut&&(ut=ut[1].toLowerCase())}if(ut||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),ut&&s.codecs(ut)){rt=$._src[st];break}}if(!rt){$._emit("loaderror",null,"No codec support for selected audio sources.");return}return $._src=rt,$._state="loading",window.location.protocol==="https:"&&rt.slice(0,5)==="http:"&&($._html5=!0,$._webAudio=!1),new o($),$._webAudio&&d($),$},play:function($,rt){var st=this,ut=null;if(typeof $=="number")ut=$,$=null;else{if(typeof $=="string"&&st._state==="loaded"&&!st._sprite[$])return null;if(typeof $>"u"&&($="__default",!st._playLock)){for(var gt=0,wt=0;wt<st._sounds.length;wt++)st._sounds[wt]._paused&&!st._sounds[wt]._ended&&(gt++,ut=st._sounds[wt]._id);gt===1?$=null:ut=null}}var yt=ut?st._soundById(ut):st._inactiveSound();if(!yt)return null;if(ut&&!$&&($=yt._sprite||"__default"),st._state!=="loaded"){yt._sprite=$,yt._ended=!1;var At=yt._id;return st._queue.push({event:"play",action:function(){st.play(At)}}),At}if(ut&&!yt._paused)return rt||st._loadQueue("play"),yt._id;st._webAudio&&s._autoResume();var Ct=Math.max(0,yt._seek>0?yt._seek:st._sprite[$][0]/1e3),Tt=Math.max(0,(st._sprite[$][0]+st._sprite[$][1])/1e3-Ct),kt=Tt*1e3/Math.abs(yt._rate),Pt=st._sprite[$][0]/1e3,It=(st._sprite[$][0]+st._sprite[$][1])/1e3;yt._sprite=$,yt._ended=!1;var Lt=function(){yt._paused=!1,yt._seek=Ct,yt._start=Pt,yt._stop=It,yt._loop=!!(yt._loop||st._sprite[$][2])};if(Ct>=It){st._ended(yt);return}var Nt=yt._node;if(st._webAudio){var Ht=function(){st._playLock=!1,Lt(),st._refreshBuffer(yt);var ds=yt._muted||st._muted?0:yt._volume;Nt.gain.setValueAtTime(ds,s.ctx.currentTime),yt._playStart=s.ctx.currentTime,typeof Nt.bufferSource.start>"u"?yt._loop?Nt.bufferSource.noteGrainOn(0,Ct,86400):Nt.bufferSource.noteGrainOn(0,Ct,Tt):yt._loop?Nt.bufferSource.start(0,Ct,86400):Nt.bufferSource.start(0,Ct,Tt),kt!==1/0&&(st._endTimers[yt._id]=setTimeout(st._ended.bind(st,yt),kt)),rt||setTimeout(function(){st._emit("play",yt._id),st._loadQueue()},0)};s.state==="running"&&s.ctx.state!=="interrupted"?Ht():(st._playLock=!0,st.once("resume",Ht),st._clearTimer(yt._id))}else{var dr=function(){Nt.currentTime=Ct,Nt.muted=yt._muted||st._muted||s._muted||Nt.muted,Nt.volume=yt._volume*s.volume(),Nt.playbackRate=yt._rate;try{var ds=Nt.play();if(ds&&typeof Promise<"u"&&(ds instanceof Promise||typeof ds.then=="function")?(st._playLock=!0,Lt(),ds.then(function(){st._playLock=!1,Nt._unlocked=!0,rt?st._loadQueue():st._emit("play",yt._id)}).catch(function(){st._playLock=!1,st._emit("playerror",yt._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),yt._ended=!0,yt._paused=!0})):rt||(st._playLock=!1,Lt(),st._emit("play",yt._id)),Nt.playbackRate=yt._rate,Nt.paused){st._emit("playerror",yt._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}$!=="__default"||yt._loop?st._endTimers[yt._id]=setTimeout(st._ended.bind(st,yt),kt):(st._endTimers[yt._id]=function(){st._ended(yt),Nt.removeEventListener("ended",st._endTimers[yt._id],!1)},Nt.addEventListener("ended",st._endTimers[yt._id],!1))}catch(Nn){st._emit("playerror",yt._id,Nn)}};Nt.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(Nt.src=st._src,Nt.load());var hs=window&&window.ejecta||!Nt.readyState&&s._navigator.isCocoonJS;if(Nt.readyState>=3||hs)dr();else{st._playLock=!0,st._state="loading";var _s=function(){st._state="loaded",dr(),Nt.removeEventListener(s._canPlayEvent,_s,!1)};Nt.addEventListener(s._canPlayEvent,_s,!1),st._clearTimer(yt._id)}}return yt._id},pause:function($){var rt=this;if(rt._state!=="loaded"||rt._playLock)return rt._queue.push({event:"pause",action:function(){rt.pause($)}}),rt;for(var st=rt._getSoundIds($),ut=0;ut<st.length;ut++){rt._clearTimer(st[ut]);var gt=rt._soundById(st[ut]);if(gt&&!gt._paused&&(gt._seek=rt.seek(st[ut]),gt._rateSeek=0,gt._paused=!0,rt._stopFade(st[ut]),gt._node))if(rt._webAudio){if(!gt._node.bufferSource)continue;typeof gt._node.bufferSource.stop>"u"?gt._node.bufferSource.noteOff(0):gt._node.bufferSource.stop(0),rt._cleanBuffer(gt._node)}else(!isNaN(gt._node.duration)||gt._node.duration===1/0)&&gt._node.pause();arguments[1]||rt._emit("pause",gt?gt._id:null)}return rt},stop:function($,rt){var st=this;if(st._state!=="loaded"||st._playLock)return st._queue.push({event:"stop",action:function(){st.stop($)}}),st;for(var ut=st._getSoundIds($),gt=0;gt<ut.length;gt++){st._clearTimer(ut[gt]);var wt=st._soundById(ut[gt]);wt&&(wt._seek=wt._start||0,wt._rateSeek=0,wt._paused=!0,wt._ended=!0,st._stopFade(ut[gt]),wt._node&&(st._webAudio?wt._node.bufferSource&&(typeof wt._node.bufferSource.stop>"u"?wt._node.bufferSource.noteOff(0):wt._node.bufferSource.stop(0),st._cleanBuffer(wt._node)):(!isNaN(wt._node.duration)||wt._node.duration===1/0)&&(wt._node.currentTime=wt._start||0,wt._node.pause(),wt._node.duration===1/0&&st._clearSound(wt._node))),rt||st._emit("stop",wt._id))}return st},mute:function($,rt){var st=this;if(st._state!=="loaded"||st._playLock)return st._queue.push({event:"mute",action:function(){st.mute($,rt)}}),st;if(typeof rt>"u")if(typeof $=="boolean")st._muted=$;else return st._muted;for(var ut=st._getSoundIds(rt),gt=0;gt<ut.length;gt++){var wt=st._soundById(ut[gt]);wt&&(wt._muted=$,wt._interval&&st._stopFade(wt._id),st._webAudio&&wt._node?wt._node.gain.setValueAtTime($?0:wt._volume,s.ctx.currentTime):wt._node&&(wt._node.muted=s._muted?!0:$),st._emit("mute",wt._id))}return st},volume:function(){var $=this,rt=arguments,st,ut;if(rt.length===0)return $._volume;if(rt.length===1||rt.length===2&&typeof rt[1]>"u"){var gt=$._getSoundIds(),wt=gt.indexOf(rt[0]);wt>=0?ut=parseInt(rt[0],10):st=parseFloat(rt[0])}else rt.length>=2&&(st=parseFloat(rt[0]),ut=parseInt(rt[1],10));var yt;if(typeof st<"u"&&st>=0&&st<=1){if($._state!=="loaded"||$._playLock)return $._queue.push({event:"volume",action:function(){$.volume.apply($,rt)}}),$;typeof ut>"u"&&($._volume=st),ut=$._getSoundIds(ut);for(var At=0;At<ut.length;At++)yt=$._soundById(ut[At]),yt&&(yt._volume=st,rt[2]||$._stopFade(ut[At]),$._webAudio&&yt._node&&!yt._muted?yt._node.gain.setValueAtTime(st,s.ctx.currentTime):yt._node&&!yt._muted&&(yt._node.volume=st*s.volume()),$._emit("volume",yt._id))}else return yt=ut?$._soundById(ut):$._sounds[0],yt?yt._volume:0;return $},fade:function($,rt,st,ut){var gt=this;if(gt._state!=="loaded"||gt._playLock)return gt._queue.push({event:"fade",action:function(){gt.fade($,rt,st,ut)}}),gt;$=Math.min(Math.max(0,parseFloat($)),1),rt=Math.min(Math.max(0,parseFloat(rt)),1),st=parseFloat(st),gt.volume($,ut);for(var wt=gt._getSoundIds(ut),yt=0;yt<wt.length;yt++){var At=gt._soundById(wt[yt]);if(At){if(ut||gt._stopFade(wt[yt]),gt._webAudio&&!At._muted){var Ct=s.ctx.currentTime,Tt=Ct+st/1e3;At._volume=$,At._node.gain.setValueAtTime($,Ct),At._node.gain.linearRampToValueAtTime(rt,Tt)}gt._startFadeInterval(At,$,rt,st,wt[yt],typeof ut>"u")}}return gt},_startFadeInterval:function($,rt,st,ut,gt,wt){var yt=this,At=rt,Ct=st-rt,Tt=Math.abs(Ct/.01),kt=Math.max(4,Tt>0?ut/Tt:ut),Pt=Date.now();$._fadeTo=st,$._interval=setInterval(function(){var It=(Date.now()-Pt)/ut;Pt=Date.now(),At+=Ct*It,At=Math.round(At*100)/100,Ct<0?At=Math.max(st,At):At=Math.min(st,At),yt._webAudio?$._volume=At:yt.volume(At,$._id,!0),wt&&(yt._volume=At),(st<rt&&At<=st||st>rt&&At>=st)&&(clearInterval($._interval),$._interval=null,$._fadeTo=null,yt.volume(st,$._id),yt._emit("fade",$._id))},kt)},_stopFade:function($){var rt=this,st=rt._soundById($);return st&&st._interval&&(rt._webAudio&&st._node.gain.cancelScheduledValues(s.ctx.currentTime),clearInterval(st._interval),st._interval=null,rt.volume(st._fadeTo,$),st._fadeTo=null,rt._emit("fade",$)),rt},loop:function(){var $=this,rt=arguments,st,ut,gt;if(rt.length===0)return $._loop;if(rt.length===1)if(typeof rt[0]=="boolean")st=rt[0],$._loop=st;else return gt=$._soundById(parseInt(rt[0],10)),gt?gt._loop:!1;else rt.length===2&&(st=rt[0],ut=parseInt(rt[1],10));for(var wt=$._getSoundIds(ut),yt=0;yt<wt.length;yt++)gt=$._soundById(wt[yt]),gt&&(gt._loop=st,$._webAudio&&gt._node&&gt._node.bufferSource&&(gt._node.bufferSource.loop=st,st&&(gt._node.bufferSource.loopStart=gt._start||0,gt._node.bufferSource.loopEnd=gt._stop,$.playing(wt[yt])&&($.pause(wt[yt],!0),$.play(wt[yt],!0)))));return $},rate:function(){var $=this,rt=arguments,st,ut;if(rt.length===0)ut=$._sounds[0]._id;else if(rt.length===1){var gt=$._getSoundIds(),wt=gt.indexOf(rt[0]);wt>=0?ut=parseInt(rt[0],10):st=parseFloat(rt[0])}else rt.length===2&&(st=parseFloat(rt[0]),ut=parseInt(rt[1],10));var yt;if(typeof st=="number"){if($._state!=="loaded"||$._playLock)return $._queue.push({event:"rate",action:function(){$.rate.apply($,rt)}}),$;typeof ut>"u"&&($._rate=st),ut=$._getSoundIds(ut);for(var At=0;At<ut.length;At++)if(yt=$._soundById(ut[At]),yt){$.playing(ut[At])&&(yt._rateSeek=$.seek(ut[At]),yt._playStart=$._webAudio?s.ctx.currentTime:yt._playStart),yt._rate=st,$._webAudio&&yt._node&&yt._node.bufferSource?yt._node.bufferSource.playbackRate.setValueAtTime(st,s.ctx.currentTime):yt._node&&(yt._node.playbackRate=st);var Ct=$.seek(ut[At]),Tt=($._sprite[yt._sprite][0]+$._sprite[yt._sprite][1])/1e3-Ct,kt=Tt*1e3/Math.abs(yt._rate);($._endTimers[ut[At]]||!yt._paused)&&($._clearTimer(ut[At]),$._endTimers[ut[At]]=setTimeout($._ended.bind($,yt),kt)),$._emit("rate",yt._id)}}else return yt=$._soundById(ut),yt?yt._rate:$._rate;return $},seek:function(){var $=this,rt=arguments,st,ut;if(rt.length===0)$._sounds.length&&(ut=$._sounds[0]._id);else if(rt.length===1){var gt=$._getSoundIds(),wt=gt.indexOf(rt[0]);wt>=0?ut=parseInt(rt[0],10):$._sounds.length&&(ut=$._sounds[0]._id,st=parseFloat(rt[0]))}else rt.length===2&&(st=parseFloat(rt[0]),ut=parseInt(rt[1],10));if(typeof ut>"u")return 0;if(typeof st=="number"&&($._state!=="loaded"||$._playLock))return $._queue.push({event:"seek",action:function(){$.seek.apply($,rt)}}),$;var yt=$._soundById(ut);if(yt)if(typeof st=="number"&&st>=0){var At=$.playing(ut);At&&$.pause(ut,!0),yt._seek=st,yt._ended=!1,$._clearTimer(ut),!$._webAudio&&yt._node&&!isNaN(yt._node.duration)&&(yt._node.currentTime=st);var Ct=function(){At&&$.play(ut,!0),$._emit("seek",ut)};if(At&&!$._webAudio){var Tt=function(){$._playLock?setTimeout(Tt,0):Ct()};setTimeout(Tt,0)}else Ct()}else if($._webAudio){var kt=$.playing(ut)?s.ctx.currentTime-yt._playStart:0,Pt=yt._rateSeek?yt._rateSeek-yt._seek:0;return yt._seek+(Pt+kt*Math.abs(yt._rate))}else return yt._node.currentTime;return $},playing:function($){var rt=this;if(typeof $=="number"){var st=rt._soundById($);return st?!st._paused:!1}for(var ut=0;ut<rt._sounds.length;ut++)if(!rt._sounds[ut]._paused)return!0;return!1},duration:function($){var rt=this,st=rt._duration,ut=rt._soundById($);return ut&&(st=rt._sprite[ut._sprite][1]/1e3),st},state:function(){return this._state},unload:function(){for(var $=this,rt=$._sounds,st=0;st<rt.length;st++)rt[st]._paused||$.stop(rt[st]._id),$._webAudio||($._clearSound(rt[st]._node),rt[st]._node.removeEventListener("error",rt[st]._errorFn,!1),rt[st]._node.removeEventListener(s._canPlayEvent,rt[st]._loadFn,!1),rt[st]._node.removeEventListener("ended",rt[st]._endFn,!1),s._releaseHtml5Audio(rt[st]._node)),delete rt[st]._node,$._clearTimer(rt[st]._id);var ut=s._howls.indexOf($);ut>=0&&s._howls.splice(ut,1);var gt=!0;for(st=0;st<s._howls.length;st++)if(s._howls[st]._src===$._src||$._src.indexOf(s._howls[st]._src)>=0){gt=!1;break}return c&&gt&&delete c[$._src],s.noAudio=!1,$._state="unloaded",$._sounds=[],$=null,null},on:function($,rt,st,ut){var gt=this,wt=gt["_on"+$];return typeof rt=="function"&&wt.push(ut?{id:st,fn:rt,once:ut}:{id:st,fn:rt}),gt},off:function($,rt,st){var ut=this,gt=ut["_on"+$],wt=0;if(typeof rt=="number"&&(st=rt,rt=null),rt||st)for(wt=0;wt<gt.length;wt++){var yt=st===gt[wt].id;if(rt===gt[wt].fn&&yt||!rt&&yt){gt.splice(wt,1);break}}else if($)ut["_on"+$]=[];else{var At=Object.keys(ut);for(wt=0;wt<At.length;wt++)At[wt].indexOf("_on")===0&&Array.isArray(ut[At[wt]])&&(ut[At[wt]]=[])}return ut},once:function($,rt,st){var ut=this;return ut.on($,rt,st,1),ut},_emit:function($,rt,st){for(var ut=this,gt=ut["_on"+$],wt=gt.length-1;wt>=0;wt--)(!gt[wt].id||gt[wt].id===rt||$==="load")&&(setTimeout((function(yt){yt.call(this,rt,st)}).bind(ut,gt[wt].fn),0),gt[wt].once&&ut.off($,gt[wt].fn,gt[wt].id));return ut._loadQueue($),ut},_loadQueue:function($){var rt=this;if(rt._queue.length>0){var st=rt._queue[0];st.event===$&&(rt._queue.shift(),rt._loadQueue()),$||st.action()}return rt},_ended:function($){var rt=this,st=$._sprite;if(!rt._webAudio&&$._node&&!$._node.paused&&!$._node.ended&&$._node.currentTime<$._stop)return setTimeout(rt._ended.bind(rt,$),100),rt;var ut=!!($._loop||rt._sprite[st][2]);if(rt._emit("end",$._id),!rt._webAudio&&ut&&rt.stop($._id,!0).play($._id),rt._webAudio&&ut){rt._emit("play",$._id),$._seek=$._start||0,$._rateSeek=0,$._playStart=s.ctx.currentTime;var gt=($._stop-$._start)*1e3/Math.abs($._rate);rt._endTimers[$._id]=setTimeout(rt._ended.bind(rt,$),gt)}return rt._webAudio&&!ut&&($._paused=!0,$._ended=!0,$._seek=$._start||0,$._rateSeek=0,rt._clearTimer($._id),rt._cleanBuffer($._node),s._autoSuspend()),!rt._webAudio&&!ut&&rt.stop($._id,!0),rt},_clearTimer:function($){var rt=this;if(rt._endTimers[$]){if(typeof rt._endTimers[$]!="function")clearTimeout(rt._endTimers[$]);else{var st=rt._soundById($);st&&st._node&&st._node.removeEventListener("ended",rt._endTimers[$],!1)}delete rt._endTimers[$]}return rt},_soundById:function($){for(var rt=this,st=0;st<rt._sounds.length;st++)if($===rt._sounds[st]._id)return rt._sounds[st];return null},_inactiveSound:function(){var $=this;$._drain();for(var rt=0;rt<$._sounds.length;rt++)if($._sounds[rt]._ended)return $._sounds[rt].reset();return new o($)},_drain:function(){var $=this,rt=$._pool,st=0,ut=0;if(!($._sounds.length<rt)){for(ut=0;ut<$._sounds.length;ut++)$._sounds[ut]._ended&&st++;for(ut=$._sounds.length-1;ut>=0;ut--){if(st<=rt)return;$._sounds[ut]._ended&&($._webAudio&&$._sounds[ut]._node&&$._sounds[ut]._node.disconnect(0),$._sounds.splice(ut,1),st--)}}},_getSoundIds:function($){var rt=this;if(typeof $>"u"){for(var st=[],ut=0;ut<rt._sounds.length;ut++)st.push(rt._sounds[ut]._id);return st}else return[$]},_refreshBuffer:function($){var rt=this;return $._node.bufferSource=s.ctx.createBufferSource(),$._node.bufferSource.buffer=c[rt._src],$._panner?$._node.bufferSource.connect($._panner):$._node.bufferSource.connect($._node),$._node.bufferSource.loop=$._loop,$._loop&&($._node.bufferSource.loopStart=$._start||0,$._node.bufferSource.loopEnd=$._stop||0),$._node.bufferSource.playbackRate.setValueAtTime($._rate,s.ctx.currentTime),rt},_cleanBuffer:function($){var rt=this,st=s._navigator&&s._navigator.vendor.indexOf("Apple")>=0;if(s._scratchBuffer&&$.bufferSource&&($.bufferSource.onended=null,$.bufferSource.disconnect(0),st))try{$.bufferSource.buffer=s._scratchBuffer}catch{}return $.bufferSource=null,rt},_clearSound:function($){var rt=/MSIE |Trident\//.test(s._navigator&&s._navigator.userAgent);rt||($.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var o=function($){this._parent=$,this.init()};o.prototype={init:function(){var $=this,rt=$._parent;return $._muted=rt._muted,$._loop=rt._loop,$._volume=rt._volume,$._rate=rt._rate,$._seek=0,$._paused=!0,$._ended=!0,$._sprite="__default",$._id=++s._counter,rt._sounds.push($),$.create(),$},create:function(){var $=this,rt=$._parent,st=s._muted||$._muted||$._parent._muted?0:$._volume;return rt._webAudio?($._node=typeof s.ctx.createGain>"u"?s.ctx.createGainNode():s.ctx.createGain(),$._node.gain.setValueAtTime(st,s.ctx.currentTime),$._node.paused=!0,$._node.connect(s.masterGain)):s.noAudio||($._node=s._obtainHtml5Audio(),$._errorFn=$._errorListener.bind($),$._node.addEventListener("error",$._errorFn,!1),$._loadFn=$._loadListener.bind($),$._node.addEventListener(s._canPlayEvent,$._loadFn,!1),$._endFn=$._endListener.bind($),$._node.addEventListener("ended",$._endFn,!1),$._node.src=rt._src,$._node.preload=rt._preload===!0?"auto":rt._preload,$._node.volume=st*s.volume(),$._node.load()),$},reset:function(){var $=this,rt=$._parent;return $._muted=rt._muted,$._loop=rt._loop,$._volume=rt._volume,$._rate=rt._rate,$._seek=0,$._rateSeek=0,$._paused=!0,$._ended=!0,$._sprite="__default",$._id=++s._counter,$},_errorListener:function(){var $=this;$._parent._emit("loaderror",$._id,$._node.error?$._node.error.code:0),$._node.removeEventListener("error",$._errorFn,!1)},_loadListener:function(){var $=this,rt=$._parent;rt._duration=Math.ceil($._node.duration*10)/10,Object.keys(rt._sprite).length===0&&(rt._sprite={__default:[0,rt._duration*1e3]}),rt._state!=="loaded"&&(rt._state="loaded",rt._emit("load"),rt._loadQueue()),$._node.removeEventListener(s._canPlayEvent,$._loadFn,!1)},_endListener:function(){var $=this,rt=$._parent;rt._duration===1/0&&(rt._duration=Math.ceil($._node.duration*10)/10,rt._sprite.__default[1]===1/0&&(rt._sprite.__default[1]=rt._duration*1e3),rt._ended($)),$._node.removeEventListener("ended",$._endFn,!1)}};var c={},d=function($){var rt=$._src;if(c[rt]){$._duration=c[rt].duration,j($);return}if(/^data:[^;]+;base64,/.test(rt)){for(var st=atob(rt.split(",")[1]),ut=new Uint8Array(st.length),gt=0;gt<st.length;++gt)ut[gt]=st.charCodeAt(gt);b(ut.buffer,$)}else{var wt=new XMLHttpRequest;wt.open($._xhr.method,rt,!0),wt.withCredentials=$._xhr.withCredentials,wt.responseType="arraybuffer",$._xhr.headers&&Object.keys($._xhr.headers).forEach(function(yt){wt.setRequestHeader(yt,$._xhr.headers[yt])}),wt.onload=function(){var yt=(wt.status+"")[0];if(yt!=="0"&&yt!=="2"&&yt!=="3"){$._emit("loaderror",null,"Failed loading audio file with status: "+wt.status+".");return}b(wt.response,$)},wt.onerror=function(){$._webAudio&&($._html5=!0,$._webAudio=!1,$._sounds=[],delete c[rt],$.load())},g(wt)}},g=function($){try{$.send()}catch{$.onerror()}},b=function($,rt){var st=function(){rt._emit("loaderror",null,"Decoding audio data failed.")},ut=function(gt){gt&&rt._sounds.length>0?(c[rt._src]=gt,j(rt,gt)):st()};typeof Promise<"u"&&s.ctx.decodeAudioData.length===1?s.ctx.decodeAudioData($).then(ut).catch(st):s.ctx.decodeAudioData($,ut,st)},j=function($,rt){rt&&!$._duration&&($._duration=rt.duration),Object.keys($._sprite).length===0&&($._sprite={__default:[0,$._duration*1e3]}),$._state!=="loaded"&&($._state="loaded",$._emit("load"),$._loadQueue())},_e=function(){if(s.usingWebAudio){try{typeof AudioContext<"u"?s.ctx=new AudioContext:typeof webkitAudioContext<"u"?s.ctx=new webkitAudioContext:s.usingWebAudio=!1}catch{s.usingWebAudio=!1}s.ctx||(s.usingWebAudio=!1);var $=/iP(hone|od|ad)/.test(s._navigator&&s._navigator.platform),rt=s._navigator&&s._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),st=rt?parseInt(rt[1],10):null;if($&&st&&st<9){var ut=/safari/.test(s._navigator&&s._navigator.userAgent.toLowerCase());s._navigator&&!ut&&(s.usingWebAudio=!1)}s.usingWebAudio&&(s.masterGain=typeof s.ctx.createGain>"u"?s.ctx.createGainNode():s.ctx.createGain(),s.masterGain.gain.setValueAtTime(s._muted?0:s._volume,s.ctx.currentTime),s.masterGain.connect(s.ctx.destination)),s._setup()}};typeof define=="function"&&define.amd&&define([],function(){return{Howler:s,Howl:a}}),typeof e<"u"&&(e.Howler=s,e.Howl=a),typeof global<"u"?(global.HowlerGlobal=i,global.Howler=s,global.Howl=a,global.Sound=o):typeof window<"u"&&(window.HowlerGlobal=i,window.Howler=s,window.Howl=a,window.Sound=o)})(),function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(s){var a=this;if(!a.ctx||!a.ctx.listener)return a;for(var o=a._howls.length-1;o>=0;o--)a._howls[o].stereo(s);return a},HowlerGlobal.prototype.pos=function(s,a,o){var c=this;if(!c.ctx||!c.ctx.listener)return c;if(a=typeof a!="number"?c._pos[1]:a,o=typeof o!="number"?c._pos[2]:o,typeof s=="number")c._pos=[s,a,o],typeof c.ctx.listener.positionX<"u"?(c.ctx.listener.positionX.setTargetAtTime(c._pos[0],Howler.ctx.currentTime,.1),c.ctx.listener.positionY.setTargetAtTime(c._pos[1],Howler.ctx.currentTime,.1),c.ctx.listener.positionZ.setTargetAtTime(c._pos[2],Howler.ctx.currentTime,.1)):c.ctx.listener.setPosition(c._pos[0],c._pos[1],c._pos[2]);else return c._pos;return c},HowlerGlobal.prototype.orientation=function(s,a,o,c,d,g){var b=this;if(!b.ctx||!b.ctx.listener)return b;var j=b._orientation;if(a=typeof a!="number"?j[1]:a,o=typeof o!="number"?j[2]:o,c=typeof c!="number"?j[3]:c,d=typeof d!="number"?j[4]:d,g=typeof g!="number"?j[5]:g,typeof s=="number")b._orientation=[s,a,o,c,d,g],typeof b.ctx.listener.forwardX<"u"?(b.ctx.listener.forwardX.setTargetAtTime(s,Howler.ctx.currentTime,.1),b.ctx.listener.forwardY.setTargetAtTime(a,Howler.ctx.currentTime,.1),b.ctx.listener.forwardZ.setTargetAtTime(o,Howler.ctx.currentTime,.1),b.ctx.listener.upX.setTargetAtTime(c,Howler.ctx.currentTime,.1),b.ctx.listener.upY.setTargetAtTime(d,Howler.ctx.currentTime,.1),b.ctx.listener.upZ.setTargetAtTime(g,Howler.ctx.currentTime,.1)):b.ctx.listener.setOrientation(s,a,o,c,d,g);else return j;return b},Howl.prototype.init=function(s){return function(a){var o=this;return o._orientation=a.orientation||[1,0,0],o._stereo=a.stereo||null,o._pos=a.pos||null,o._pannerAttr={coneInnerAngle:typeof a.coneInnerAngle<"u"?a.coneInnerAngle:360,coneOuterAngle:typeof a.coneOuterAngle<"u"?a.coneOuterAngle:360,coneOuterGain:typeof a.coneOuterGain<"u"?a.coneOuterGain:0,distanceModel:typeof a.distanceModel<"u"?a.distanceModel:"inverse",maxDistance:typeof a.maxDistance<"u"?a.maxDistance:1e4,panningModel:typeof a.panningModel<"u"?a.panningModel:"HRTF",refDistance:typeof a.refDistance<"u"?a.refDistance:1,rolloffFactor:typeof a.rolloffFactor<"u"?a.rolloffFactor:1},o._onstereo=a.onstereo?[{fn:a.onstereo}]:[],o._onpos=a.onpos?[{fn:a.onpos}]:[],o._onorientation=a.onorientation?[{fn:a.onorientation}]:[],s.call(this,a)}}(Howl.prototype.init),Howl.prototype.stereo=function(s,a){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"stereo",action:function(){o.stereo(s,a)}}),o;var c=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof a>"u")if(typeof s=="number")o._stereo=s,o._pos=[s,0,0];else return o._stereo;for(var d=o._getSoundIds(a),g=0;g<d.length;g++){var b=o._soundById(d[g]);if(b)if(typeof s=="number")b._stereo=s,b._pos=[s,0,0],b._node&&(b._pannerAttr.panningModel="equalpower",(!b._panner||!b._panner.pan)&&i(b,c),c==="spatial"?typeof b._panner.positionX<"u"?(b._panner.positionX.setValueAtTime(s,Howler.ctx.currentTime),b._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),b._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):b._panner.setPosition(s,0,0):b._panner.pan.setValueAtTime(s,Howler.ctx.currentTime)),o._emit("stereo",b._id);else return b._stereo}return o},Howl.prototype.pos=function(s,a,o,c){var d=this;if(!d._webAudio)return d;if(d._state!=="loaded")return d._queue.push({event:"pos",action:function(){d.pos(s,a,o,c)}}),d;if(a=typeof a!="number"?0:a,o=typeof o!="number"?-.5:o,typeof c>"u")if(typeof s=="number")d._pos=[s,a,o];else return d._pos;for(var g=d._getSoundIds(c),b=0;b<g.length;b++){var j=d._soundById(g[b]);if(j)if(typeof s=="number")j._pos=[s,a,o],j._node&&((!j._panner||j._panner.pan)&&i(j,"spatial"),typeof j._panner.positionX<"u"?(j._panner.positionX.setValueAtTime(s,Howler.ctx.currentTime),j._panner.positionY.setValueAtTime(a,Howler.ctx.currentTime),j._panner.positionZ.setValueAtTime(o,Howler.ctx.currentTime)):j._panner.setPosition(s,a,o)),d._emit("pos",j._id);else return j._pos}return d},Howl.prototype.orientation=function(s,a,o,c){var d=this;if(!d._webAudio)return d;if(d._state!=="loaded")return d._queue.push({event:"orientation",action:function(){d.orientation(s,a,o,c)}}),d;if(a=typeof a!="number"?d._orientation[1]:a,o=typeof o!="number"?d._orientation[2]:o,typeof c>"u")if(typeof s=="number")d._orientation=[s,a,o];else return d._orientation;for(var g=d._getSoundIds(c),b=0;b<g.length;b++){var j=d._soundById(g[b]);if(j)if(typeof s=="number")j._orientation=[s,a,o],j._node&&(j._panner||(j._pos||(j._pos=d._pos||[0,0,-.5]),i(j,"spatial")),typeof j._panner.orientationX<"u"?(j._panner.orientationX.setValueAtTime(s,Howler.ctx.currentTime),j._panner.orientationY.setValueAtTime(a,Howler.ctx.currentTime),j._panner.orientationZ.setValueAtTime(o,Howler.ctx.currentTime)):j._panner.setOrientation(s,a,o)),d._emit("orientation",j._id);else return j._orientation}return d},Howl.prototype.pannerAttr=function(){var s=this,a=arguments,o,c,d;if(!s._webAudio)return s;if(a.length===0)return s._pannerAttr;if(a.length===1)if(typeof a[0]=="object")o=a[0],typeof c>"u"&&(o.pannerAttr||(o.pannerAttr={coneInnerAngle:o.coneInnerAngle,coneOuterAngle:o.coneOuterAngle,coneOuterGain:o.coneOuterGain,distanceModel:o.distanceModel,maxDistance:o.maxDistance,refDistance:o.refDistance,rolloffFactor:o.rolloffFactor,panningModel:o.panningModel}),s._pannerAttr={coneInnerAngle:typeof o.pannerAttr.coneInnerAngle<"u"?o.pannerAttr.coneInnerAngle:s._coneInnerAngle,coneOuterAngle:typeof o.pannerAttr.coneOuterAngle<"u"?o.pannerAttr.coneOuterAngle:s._coneOuterAngle,coneOuterGain:typeof o.pannerAttr.coneOuterGain<"u"?o.pannerAttr.coneOuterGain:s._coneOuterGain,distanceModel:typeof o.pannerAttr.distanceModel<"u"?o.pannerAttr.distanceModel:s._distanceModel,maxDistance:typeof o.pannerAttr.maxDistance<"u"?o.pannerAttr.maxDistance:s._maxDistance,refDistance:typeof o.pannerAttr.refDistance<"u"?o.pannerAttr.refDistance:s._refDistance,rolloffFactor:typeof o.pannerAttr.rolloffFactor<"u"?o.pannerAttr.rolloffFactor:s._rolloffFactor,panningModel:typeof o.pannerAttr.panningModel<"u"?o.pannerAttr.panningModel:s._panningModel});else return d=s._soundById(parseInt(a[0],10)),d?d._pannerAttr:s._pannerAttr;else a.length===2&&(o=a[0],c=parseInt(a[1],10));for(var g=s._getSoundIds(c),b=0;b<g.length;b++)if(d=s._soundById(g[b]),d){var j=d._pannerAttr;j={coneInnerAngle:typeof o.coneInnerAngle<"u"?o.coneInnerAngle:j.coneInnerAngle,coneOuterAngle:typeof o.coneOuterAngle<"u"?o.coneOuterAngle:j.coneOuterAngle,coneOuterGain:typeof o.coneOuterGain<"u"?o.coneOuterGain:j.coneOuterGain,distanceModel:typeof o.distanceModel<"u"?o.distanceModel:j.distanceModel,maxDistance:typeof o.maxDistance<"u"?o.maxDistance:j.maxDistance,refDistance:typeof o.refDistance<"u"?o.refDistance:j.refDistance,rolloffFactor:typeof o.rolloffFactor<"u"?o.rolloffFactor:j.rolloffFactor,panningModel:typeof o.panningModel<"u"?o.panningModel:j.panningModel};var _e=d._panner;_e?(_e.coneInnerAngle=j.coneInnerAngle,_e.coneOuterAngle=j.coneOuterAngle,_e.coneOuterGain=j.coneOuterGain,_e.distanceModel=j.distanceModel,_e.maxDistance=j.maxDistance,_e.refDistance=j.refDistance,_e.rolloffFactor=j.rolloffFactor,_e.panningModel=j.panningModel):(d._pos||(d._pos=s._pos||[0,0,-.5]),i(d,"spatial"))}return s},Sound.prototype.init=function(s){return function(){var a=this,o=a._parent;a._orientation=o._orientation,a._stereo=o._stereo,a._pos=o._pos,a._pannerAttr=o._pannerAttr,s.call(this),a._stereo?o.stereo(a._stereo):a._pos&&o.pos(a._pos[0],a._pos[1],a._pos[2],a._id)}}(Sound.prototype.init),Sound.prototype.reset=function(s){return function(){var a=this,o=a._parent;return a._orientation=o._orientation,a._stereo=o._stereo,a._pos=o._pos,a._pannerAttr=o._pannerAttr,a._stereo?o.stereo(a._stereo):a._pos?o.pos(a._pos[0],a._pos[1],a._pos[2],a._id):a._panner&&(a._panner.disconnect(0),a._panner=void 0,o._refreshBuffer(a)),s.call(this)}}(Sound.prototype.reset);var i=function(s,a){a=a||"spatial",a==="spatial"?(s._panner=Howler.ctx.createPanner(),s._panner.coneInnerAngle=s._pannerAttr.coneInnerAngle,s._panner.coneOuterAngle=s._pannerAttr.coneOuterAngle,s._panner.coneOuterGain=s._pannerAttr.coneOuterGain,s._panner.distanceModel=s._pannerAttr.distanceModel,s._panner.maxDistance=s._pannerAttr.maxDistance,s._panner.refDistance=s._pannerAttr.refDistance,s._panner.rolloffFactor=s._pannerAttr.rolloffFactor,s._panner.panningModel=s._pannerAttr.panningModel,typeof s._panner.positionX<"u"?(s._panner.positionX.setValueAtTime(s._pos[0],Howler.ctx.currentTime),s._panner.positionY.setValueAtTime(s._pos[1],Howler.ctx.currentTime),s._panner.positionZ.setValueAtTime(s._pos[2],Howler.ctx.currentTime)):s._panner.setPosition(s._pos[0],s._pos[1],s._pos[2]),typeof s._panner.orientationX<"u"?(s._panner.orientationX.setValueAtTime(s._orientation[0],Howler.ctx.currentTime),s._panner.orientationY.setValueAtTime(s._orientation[1],Howler.ctx.currentTime),s._panner.orientationZ.setValueAtTime(s._orientation[2],Howler.ctx.currentTime)):s._panner.setOrientation(s._orientation[0],s._orientation[1],s._orientation[2])):(s._panner=Howler.ctx.createStereoPanner(),s._panner.pan.setValueAtTime(s._stereo,Howler.ctx.currentTime)),s._panner.connect(s._node),s._paused||s._parent.pause(s._id,!0).play(s._id,!0)}}()}),Y3=zi((e,i)=>{function s(c,d){function g(){this.constructor=c}g.prototype=d.prototype,c.prototype=new g}function a(c,d,g,b){this.message=c,this.expected=d,this.found=g,this.location=b,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,a)}s(a,Error),a.buildMessage=function(c,d){var g={literal:function(ut){return'"'+j(ut.text)+'"'},class:function(ut){var gt="",wt;for(wt=0;wt<ut.parts.length;wt++)gt+=ut.parts[wt]instanceof Array?_e(ut.parts[wt][0])+"-"+_e(ut.parts[wt][1]):_e(ut.parts[wt]);return"["+(ut.inverted?"^":"")+gt+"]"},any:function(ut){return"any character"},end:function(ut){return"end of input"},other:function(ut){return ut.description}};function b(ut){return ut.charCodeAt(0).toString(16).toUpperCase()}function j(ut){return ut.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(gt){return"\\x0"+b(gt)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(gt){return"\\x"+b(gt)})}function _e(ut){return ut.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(gt){return"\\x0"+b(gt)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(gt){return"\\x"+b(gt)})}function $(ut){return g[ut.type](ut)}function rt(ut){var gt=new Array(ut.length),wt,yt;for(wt=0;wt<ut.length;wt++)gt[wt]=$(ut[wt]);if(gt.sort(),gt.length>0){for(wt=1,yt=1;wt<gt.length;wt++)gt[wt-1]!==gt[wt]&&(gt[yt]=gt[wt],yt++);gt.length=yt}switch(gt.length){case 1:return gt[0];case 2:return gt[0]+" or "+gt[1];default:return gt.slice(0,-1).join(", ")+", or "+gt[gt.length-1]}}function st(ut){return ut?'"'+j(ut)+'"':"end of input"}return"Expected "+rt(c)+" but "+st(d)+" found."};function o(c,d){d=d!==void 0?d:{};var g={},b={svg_path:e$},j=e$,_e=function(Qn){if(!Qn)return[];for(var So=[],Vv=0;Vv<Qn.length;Vv++)So=So.concat.apply(So,Qn[Vv]);var mu=So[0];return mu&&mu.code=="m"&&(delete mu.relative,mu.code="M"),So},$=function(Qn,So){return d$(Qn,So)},rt=/^[Mm]/,st=oI(["M","m"],!1,!1),ut=function(Qn,So,Vv){var mu=c$(Qn,[So]);return Vv&&(mu=mu.concat(c$(Qn=="M"?"L":"l",Vv[1]))),mu},gt=/^[Zz]/,wt=oI(["Z","z"],!1,!1),yt=function(){return c$("Z")},At=/^[Ll]/,Ct=oI(["L","l"],!1,!1),Tt=function(Qn,So){return c$(Qn,So)},kt=/^[Hh]/,Pt=oI(["H","h"],!1,!1),It=function(Qn,So){return c$(Qn,So.map(function(Vv){return{x:Vv}}))},Lt=/^[Vv]/,Nt=oI(["V","v"],!1,!1),Ht=function(Qn,So){return c$(Qn,So.map(function(Vv){return{y:Vv}}))},dr=/^[Cc]/,hs=oI(["C","c"],!1,!1),_s=function(Qn,So,Vv){return{x1:Qn.x,y1:Qn.y,x2:So.x,y2:So.y,x:Vv.x,y:Vv.y}},ds=/^[Ss]/,Nn=oI(["S","s"],!1,!1),us=function(Qn,So){return{x2:Qn.x,y2:Qn.y,x:So.x,y:So.y}},hn=/^[Qq]/,Ft=oI(["Q","q"],!1,!1),Gr=function(Qn,So){return{x1:Qn.x,y1:Qn.y,x:So.x,y:So.y}},gn=/^[Tt]/,un=oI(["T","t"],!1,!1),Zn=/^[Aa]/,xu=oI(["A","a"],!1,!1),ou=function(Qn,So,Vv,mu,a1,AA){return{rx:Qn,ry:So,xAxisRotation:Vv,largeArc:mu,sweep:a1,x:AA.x,y:AA.y}},sp=function(Qn,So){return{x:Qn,y:So}},wu=function(Qn){return Qn*1},l1=function(Qn){return Qn.join("")*1},P0=/^[01]/,B0=oI(["0","1"],!1,!1),q1=function(Qn){return Qn=="1"},ox=function(){return""},qx=",",N_=MO(",",!1),eS=function(Qn){return Qn.join("")},tA=".",fD=MO(".",!1),q3=/^[eE]/,SA=oI(["e","E"],!1,!1),wA=/^[+\-]/,mO=oI(["+","-"],!1,!1),sR=/^[0-9]/,bu=oI([["0","9"]],!1,!1),au=function(Qn){return Qn.join("")},X1=/^[ \t\n\r]/,eE=oI([" ","	",`
`,"\r"],!1,!1),bo=0,C3=[{line:1,column:1}],aR=0,X3=[],U_;if("startRule"in d){if(!(d.startRule in b))throw new Error(`Can't start parsing from rule "`+d.startRule+'".');j=b[d.startRule]}function MO(Qn,So){return{type:"literal",text:Qn,ignoreCase:So}}function oI(Qn,So,Vv){return{type:"class",parts:Qn,inverted:So,ignoreCase:Vv}}function IO(){return{type:"end"}}function PL(Qn){var So=C3[Qn],Vv;if(So)return So;for(Vv=Qn-1;!C3[Vv];)Vv--;for(So=C3[Vv],So={line:So.line,column:So.column};Vv<Qn;)c.charCodeAt(Vv)===10?(So.line++,So.column=1):So.column++,Vv++;return C3[Qn]=So,So}function CL(Qn,So){var Vv=PL(Qn),mu=PL(So);return{start:{offset:Qn,line:Vv.line,column:Vv.column},end:{offset:So,line:mu.line,column:mu.column}}}function TL(Qn){bo<aR||(bo>aR&&(aR=bo,X3=[]),X3.push(Qn))}function qL(Qn,So,Vv){return new a(a.buildMessage(Qn,So),Qn,So,Vv)}function e$(){var Qn,So,Vv,mu,a1;for(Qn=bo,So=[],Vv=FL();Vv!==g;)So.push(Vv),Vv=FL();if(So!==g)if(Vv=g0(),Vv===g&&(Vv=null),Vv!==g){for(mu=[],a1=FL();a1!==g;)mu.push(a1),a1=FL();mu!==g?(So=_e(Vv),Qn=So):(bo=Qn,Qn=g)}else bo=Qn,Qn=g;else bo=Qn,Qn=g;return Qn}function g0(){var Qn,So,Vv,mu,a1,AA;if(Qn=bo,So=tS(),So!==g){for(Vv=[],mu=bo,a1=[],AA=FL();AA!==g;)a1.push(AA),AA=FL();for(a1!==g?(AA=tS(),AA!==g?(a1=[a1,AA],mu=a1):(bo=mu,mu=g)):(bo=mu,mu=g);mu!==g;){for(Vv.push(mu),mu=bo,a1=[],AA=FL();AA!==g;)a1.push(AA),AA=FL();a1!==g?(AA=tS(),AA!==g?(a1=[a1,AA],mu=a1):(bo=mu,mu=g)):(bo=mu,mu=g)}Vv!==g?(So=$(So,Vv),Qn=So):(bo=Qn,Qn=g)}else bo=Qn,Qn=g;return Qn}function tS(){var Qn,So,Vv,mu,a1,AA;if(Qn=bo,So=pO(),So!==g){for(Vv=[],mu=bo,a1=[],AA=FL();AA!==g;)a1.push(AA),AA=FL();for(a1!==g?(AA=tE(),AA!==g?(a1=[a1,AA],mu=a1):(bo=mu,mu=g)):(bo=mu,mu=g);mu!==g;){for(Vv.push(mu),mu=bo,a1=[],AA=FL();AA!==g;)a1.push(AA),AA=FL();a1!==g?(AA=tE(),AA!==g?(a1=[a1,AA],mu=a1):(bo=mu,mu=g)):(bo=mu,mu=g)}Vv!==g?(So=$(So,Vv),Qn=So):(bo=Qn,Qn=g)}else bo=Qn,Qn=g;return Qn}function tE(){var Qn;return Qn=jL(),Qn===g&&(Qn=GL(),Qn===g&&(Qn=r$(),Qn===g&&(Qn=YN(),Qn===g&&(Qn=o$(),Qn===g&&(Qn=b$(),Qn===g&&(Qn=Su(),Qn===g&&(Qn=ax(),Qn===g&&(Qn=bL())))))))),Qn}function pO(){var Qn,So,Vv,mu,a1,AA,p$;if(Qn=bo,rt.test(c.charAt(bo))?(So=c.charAt(bo),bo++):(So=g,TL(st)),So!==g){for(Vv=[],mu=FL();mu!==g;)Vv.push(mu),mu=FL();Vv!==g?(mu=IL(),mu!==g?(a1=bo,AA=BL(),AA===g&&(AA=null),AA!==g?(p$=i$(),p$!==g?(AA=[AA,p$],a1=AA):(bo=a1,a1=g)):(bo=a1,a1=g),a1===g&&(a1=null),a1!==g?(So=ut(So,mu,a1),Qn=So):(bo=Qn,Qn=g)):(bo=Qn,Qn=g)):(bo=Qn,Qn=g)}else bo=Qn,Qn=g;return Qn}function jL(){var Qn,So;return Qn=bo,gt.test(c.charAt(bo))?(So=c.charAt(bo),bo++):(So=g,TL(wt)),So!==g&&(So=yt()),Qn=So,Qn}function GL(){var Qn,So,Vv,mu;if(Qn=bo,At.test(c.charAt(bo))?(So=c.charAt(bo),bo++):(So=g,TL(Ct)),So!==g){for(Vv=[],mu=FL();mu!==g;)Vv.push(mu),mu=FL();Vv!==g?(mu=i$(),mu!==g?(So=Tt(So,mu),Qn=So):(bo=Qn,Qn=g)):(bo=Qn,Qn=g)}else bo=Qn,Qn=g;return Qn}function i$(){var Qn,So,Vv,mu,a1,AA;if(Qn=bo,So=IL(),So!==g){for(Vv=[],mu=bo,a1=BL(),a1===g&&(a1=null),a1!==g?(AA=IL(),AA!==g?(a1=[a1,AA],mu=a1):(bo=mu,mu=g)):(bo=mu,mu=g);mu!==g;)Vv.push(mu),mu=bo,a1=BL(),a1===g&&(a1=null),a1!==g?(AA=IL(),AA!==g?(a1=[a1,AA],mu=a1):(bo=mu,mu=g)):(bo=mu,mu=g);Vv!==g?(So=$(So,Vv),Qn=So):(bo=Qn,Qn=g)}else bo=Qn,Qn=g;return Qn}function r$(){var Qn,So,Vv,mu;if(Qn=bo,kt.test(c.charAt(bo))?(So=c.charAt(bo),bo++):(So=g,TL(Pt)),So!==g){for(Vv=[],mu=FL();mu!==g;)Vv.push(mu),mu=FL();Vv!==g?(mu=h$(),mu!==g?(So=It(So,mu),Qn=So):(bo=Qn,Qn=g)):(bo=Qn,Qn=g)}else bo=Qn,Qn=g;return Qn}function h$(){var Qn,So,Vv,mu,a1,AA;if(Qn=bo,So=VL(),So!==g){for(Vv=[],mu=bo,a1=BL(),a1===g&&(a1=null),a1!==g?(AA=VL(),AA!==g?(a1=[a1,AA],mu=a1):(bo=mu,mu=g)):(bo=mu,mu=g);mu!==g;)Vv.push(mu),mu=bo,a1=BL(),a1===g&&(a1=null),a1!==g?(AA=VL(),AA!==g?(a1=[a1,AA],mu=a1):(bo=mu,mu=g)):(bo=mu,mu=g);Vv!==g?(So=$(So,Vv),Qn=So):(bo=Qn,Qn=g)}else bo=Qn,Qn=g;return Qn}function YN(){var Qn,So,Vv,mu;if(Qn=bo,Lt.test(c.charAt(bo))?(So=c.charAt(bo),bo++):(So=g,TL(Nt)),So!==g){for(Vv=[],mu=FL();mu!==g;)Vv.push(mu),mu=FL();Vv!==g?(mu=h$(),mu!==g?(So=Ht(So,mu),Qn=So):(bo=Qn,Qn=g)):(bo=Qn,Qn=g)}else bo=Qn,Qn=g;return Qn}function o$(){var Qn,So,Vv,mu;if(Qn=bo,dr.test(c.charAt(bo))?(So=c.charAt(bo),bo++):(So=g,TL(hs)),So!==g){for(Vv=[],mu=FL();mu!==g;)Vv.push(mu),mu=FL();Vv!==g?(mu=a$(),mu!==g?(So=Tt(So,mu),Qn=So):(bo=Qn,Qn=g)):(bo=Qn,Qn=g)}else bo=Qn,Qn=g;return Qn}function a$(){var Qn,So,Vv,mu,a1,AA;if(Qn=bo,So=g$(),So!==g){for(Vv=[],mu=bo,a1=BL(),a1===g&&(a1=null),a1!==g?(AA=g$(),AA!==g?(a1=[a1,AA],mu=a1):(bo=mu,mu=g)):(bo=mu,mu=g);mu!==g;)Vv.push(mu),mu=bo,a1=BL(),a1===g&&(a1=null),a1!==g?(AA=g$(),AA!==g?(a1=[a1,AA],mu=a1):(bo=mu,mu=g)):(bo=mu,mu=g);Vv!==g?(So=$(So,Vv),Qn=So):(bo=Qn,Qn=g)}else bo=Qn,Qn=g;return Qn}function g$(){var Qn,So,Vv,mu,a1,AA;return Qn=bo,So=IL(),So!==g?(Vv=BL(),Vv===g&&(Vv=null),Vv!==g?(mu=IL(),mu!==g?(a1=BL(),a1===g&&(a1=null),a1!==g?(AA=IL(),AA!==g?(So=_s(So,mu,AA),Qn=So):(bo=Qn,Qn=g)):(bo=Qn,Qn=g)):(bo=Qn,Qn=g)):(bo=Qn,Qn=g)):(bo=Qn,Qn=g),Qn}function b$(){var Qn,So,Vv,mu;if(Qn=bo,ds.test(c.charAt(bo))?(So=c.charAt(bo),bo++):(So=g,TL(Nn)),So!==g){for(Vv=[],mu=FL();mu!==g;)Vv.push(mu),mu=FL();Vv!==g?(mu=_$(),mu!==g?(So=Tt(So,mu),Qn=So):(bo=Qn,Qn=g)):(bo=Qn,Qn=g)}else bo=Qn,Qn=g;return Qn}function _$(){var Qn,So,Vv,mu,a1,AA;if(Qn=bo,So=v$(),So!==g){for(Vv=[],mu=bo,a1=BL(),a1===g&&(a1=null),a1!==g?(AA=v$(),AA!==g?(a1=[a1,AA],mu=a1):(bo=mu,mu=g)):(bo=mu,mu=g);mu!==g;)Vv.push(mu),mu=bo,a1=BL(),a1===g&&(a1=null),a1!==g?(AA=v$(),AA!==g?(a1=[a1,AA],mu=a1):(bo=mu,mu=g)):(bo=mu,mu=g);Vv!==g?(So=$(So,Vv),Qn=So):(bo=Qn,Qn=g)}else bo=Qn,Qn=g;return Qn}function v$(){var Qn,So,Vv,mu;return Qn=bo,So=IL(),So!==g?(Vv=BL(),Vv===g&&(Vv=null),Vv!==g?(mu=IL(),mu!==g?(So=us(So,mu),Qn=So):(bo=Qn,Qn=g)):(bo=Qn,Qn=g)):(bo=Qn,Qn=g),Qn}function Su(){var Qn,So,Vv,mu;if(Qn=bo,hn.test(c.charAt(bo))?(So=c.charAt(bo),bo++):(So=g,TL(Ft)),So!==g){for(Vv=[],mu=FL();mu!==g;)Vv.push(mu),mu=FL();Vv!==g?(mu=ux(),mu!==g?(So=Tt(So,mu),Qn=So):(bo=Qn,Qn=g)):(bo=Qn,Qn=g)}else bo=Qn,Qn=g;return Qn}function ux(){var Qn,So,Vv,mu,a1,AA;if(Qn=bo,So=iS(),So!==g){for(Vv=[],mu=bo,a1=BL(),a1===g&&(a1=null),a1!==g?(AA=iS(),AA!==g?(a1=[a1,AA],mu=a1):(bo=mu,mu=g)):(bo=mu,mu=g);mu!==g;)Vv.push(mu),mu=bo,a1=BL(),a1===g&&(a1=null),a1!==g?(AA=iS(),AA!==g?(a1=[a1,AA],mu=a1):(bo=mu,mu=g)):(bo=mu,mu=g);Vv!==g?(So=$(So,Vv),Qn=So):(bo=Qn,Qn=g)}else bo=Qn,Qn=g;return Qn}function iS(){var Qn,So,Vv,mu;return Qn=bo,So=IL(),So!==g?(Vv=BL(),Vv===g&&(Vv=null),Vv!==g?(mu=IL(),mu!==g?(So=Gr(So,mu),Qn=So):(bo=Qn,Qn=g)):(bo=Qn,Qn=g)):(bo=Qn,Qn=g),Qn}function ax(){var Qn,So,Vv,mu;if(Qn=bo,gn.test(c.charAt(bo))?(So=c.charAt(bo),bo++):(So=g,TL(un)),So!==g){for(Vv=[],mu=FL();mu!==g;)Vv.push(mu),mu=FL();Vv!==g?(mu=rS(),mu!==g?(So=Tt(So,mu),Qn=So):(bo=Qn,Qn=g)):(bo=Qn,Qn=g)}else bo=Qn,Qn=g;return Qn}function rS(){var Qn,So,Vv,mu,a1,AA;if(Qn=bo,So=IL(),So!==g){for(Vv=[],mu=bo,a1=BL(),a1===g&&(a1=null),a1!==g?(AA=IL(),AA!==g?(a1=[a1,AA],mu=a1):(bo=mu,mu=g)):(bo=mu,mu=g);mu!==g;)Vv.push(mu),mu=bo,a1=BL(),a1===g&&(a1=null),a1!==g?(AA=IL(),AA!==g?(a1=[a1,AA],mu=a1):(bo=mu,mu=g)):(bo=mu,mu=g);Vv!==g?(So=$(So,Vv),Qn=So):(bo=Qn,Qn=g)}else bo=Qn,Qn=g;return Qn}function bL(){var Qn,So,Vv,mu;if(Qn=bo,Zn.test(c.charAt(bo))?(So=c.charAt(bo),bo++):(So=g,TL(xu)),So!==g){for(Vv=[],mu=FL();mu!==g;)Vv.push(mu),mu=FL();Vv!==g?(mu=OL(),mu!==g?(So=Tt(So,mu),Qn=So):(bo=Qn,Qn=g)):(bo=Qn,Qn=g)}else bo=Qn,Qn=g;return Qn}function OL(){var Qn,So,Vv,mu,a1,AA;if(Qn=bo,So=LL(),So!==g){for(Vv=[],mu=bo,a1=BL(),a1===g&&(a1=null),a1!==g?(AA=LL(),AA!==g?(a1=[a1,AA],mu=a1):(bo=mu,mu=g)):(bo=mu,mu=g);mu!==g;)Vv.push(mu),mu=bo,a1=BL(),a1===g&&(a1=null),a1!==g?(AA=LL(),AA!==g?(a1=[a1,AA],mu=a1):(bo=mu,mu=g)):(bo=mu,mu=g);Vv!==g?(So=$(So,Vv),Qn=So):(bo=Qn,Qn=g)}else bo=Qn,Qn=g;return Qn}function LL(){var Qn,So,Vv,mu,a1,AA,p$,w$,y$,S$,x$,E$;return Qn=bo,So=WL(),So!==g?(Vv=BL(),Vv===g&&(Vv=null),Vv!==g?(mu=WL(),mu!==g?(a1=BL(),a1===g&&(a1=null),a1!==g?(AA=VL(),AA!==g?(p$=BL(),p$!==g?(w$=HL(),w$!==g?(y$=BL(),y$===g&&(y$=null),y$!==g?(S$=HL(),S$!==g?(x$=BL(),x$===g&&(x$=null),x$!==g?(E$=IL(),E$!==g?(So=ou(So,mu,AA,w$,S$,E$),Qn=So):(bo=Qn,Qn=g)):(bo=Qn,Qn=g)):(bo=Qn,Qn=g)):(bo=Qn,Qn=g)):(bo=Qn,Qn=g)):(bo=Qn,Qn=g)):(bo=Qn,Qn=g)):(bo=Qn,Qn=g)):(bo=Qn,Qn=g)):(bo=Qn,Qn=g)):(bo=Qn,Qn=g),Qn}function IL(){var Qn,So,Vv,mu;return Qn=bo,So=VL(),So!==g?(Vv=BL(),Vv===g&&(Vv=null),Vv!==g?(mu=VL(),mu!==g?(So=sp(So,mu),Qn=So):(bo=Qn,Qn=g)):(bo=Qn,Qn=g)):(bo=Qn,Qn=g),Qn}function WL(){var Qn,So;return Qn=bo,So=n$(),So===g&&(So=l$()),So!==g&&(So=wu(So)),Qn=So,Qn}function VL(){var Qn,So,Vv,mu;return Qn=bo,So=bo,Vv=UL(),Vv===g&&(Vv=null),Vv!==g?(mu=n$(),mu!==g?(Vv=[Vv,mu],So=Vv):(bo=So,So=g)):(bo=So,So=g),So===g&&(So=bo,Vv=UL(),Vv===g&&(Vv=null),Vv!==g?(mu=l$(),mu!==g?(Vv=[Vv,mu],So=Vv):(bo=So,So=g)):(bo=So,So=g)),So!==g&&(So=l1(So)),Qn=So,Qn}function HL(){var Qn,So;return Qn=bo,P0.test(c.charAt(bo))?(So=c.charAt(bo),bo++):(So=g,TL(B0)),So!==g&&(So=q1(So)),Qn=So,Qn}function BL(){var Qn,So,Vv,mu,a1;if(Qn=bo,So=[],Vv=FL(),Vv!==g)for(;Vv!==g;)So.push(Vv),Vv=FL();else So=g;if(So!==g)if(Vv=s$(),Vv===g&&(Vv=null),Vv!==g){for(mu=[],a1=FL();a1!==g;)mu.push(a1),a1=FL();mu!==g?(So=[So,Vv,mu],Qn=So):(bo=Qn,Qn=g)}else bo=Qn,Qn=g;else bo=Qn,Qn=g;if(Qn===g){if(Qn=bo,So=bo,Vv=s$(),Vv!==g){for(mu=[],a1=FL();a1!==g;)mu.push(a1),a1=FL();mu!==g?(Vv=[Vv,mu],So=Vv):(bo=So,So=g)}else bo=So,So=g;So!==g&&(So=ox()),Qn=So}return Qn}function s$(){var Qn;return c.charCodeAt(bo)===44?(Qn=qx,bo++):(Qn=g,TL(N_)),Qn}function n$(){var Qn,So,Vv,mu;return Qn=bo,So=bo,Vv=u$(),Vv!==g?(mu=t$(),mu===g&&(mu=null),mu!==g?(Vv=[Vv,mu],So=Vv):(bo=So,So=g)):(bo=So,So=g),So===g&&(So=bo,Vv=l$(),Vv!==g?(mu=t$(),mu!==g?(Vv=[Vv,mu],So=Vv):(bo=So,So=g)):(bo=So,So=g)),So!==g&&(So=eS(So)),Qn=So,Qn}function u$(){var Qn,So,Vv,mu,a1;return Qn=bo,So=bo,Vv=l$(),Vv===g&&(Vv=null),Vv!==g?(c.charCodeAt(bo)===46?(mu=tA,bo++):(mu=g,TL(fD)),mu!==g?(a1=l$(),a1!==g?(Vv=[Vv,mu,a1],So=Vv):(bo=So,So=g)):(bo=So,So=g)):(bo=So,So=g),So===g&&(So=bo,Vv=l$(),Vv!==g?(c.charCodeAt(bo)===46?(mu=tA,bo++):(mu=g,TL(fD)),mu!==g?(Vv=[Vv,mu],So=Vv):(bo=So,So=g)):(bo=So,So=g)),So!==g&&(So=eS(So)),Qn=So,Qn}function t$(){var Qn,So,Vv,mu,a1;return Qn=bo,So=bo,q3.test(c.charAt(bo))?(Vv=c.charAt(bo),bo++):(Vv=g,TL(SA)),Vv!==g?(mu=UL(),mu===g&&(mu=null),mu!==g?(a1=l$(),a1!==g?(Vv=[Vv,mu,a1],So=Vv):(bo=So,So=g)):(bo=So,So=g)):(bo=So,So=g),So!==g&&(So=eS(So)),Qn=So,Qn}function UL(){var Qn;return wA.test(c.charAt(bo))?(Qn=c.charAt(bo),bo++):(Qn=g,TL(mO)),Qn}function l$(){var Qn,So,Vv;if(Qn=bo,So=[],sR.test(c.charAt(bo))?(Vv=c.charAt(bo),bo++):(Vv=g,TL(bu)),Vv!==g)for(;Vv!==g;)So.push(Vv),sR.test(c.charAt(bo))?(Vv=c.charAt(bo),bo++):(Vv=g,TL(bu));else So=g;return So!==g&&(So=au(So)),Qn=So,Qn}function FL(){var Qn,So;return Qn=bo,X1.test(c.charAt(bo))?(So=c.charAt(bo),bo++):(So=g,TL(eE)),So!==g&&(So=ox()),Qn=So,Qn}function d$(Qn,So){if(!So)return[Qn];for(var Vv=[Qn],mu=0,a1=So.length;mu<a1;mu++)Vv[mu+1]=So[mu][1];return Vv}var m$={m:"moveto",l:"lineto",h:"horizontal lineto",v:"vertical lineto",c:"curveto",s:"smooth curveto",q:"quadratic curveto",t:"smooth quadratic curveto",a:"elliptical arc",z:"closepath"};for(var f$ in m$)m$[f$.toUpperCase()]=m$[f$];function c$(Qn,So){So||(So=[{}]);for(var Vv=So.length;Vv--;){var mu={code:Qn,command:m$[Qn]};Qn==Qn.toLowerCase()&&(mu.relative=!0);for(var a1 in So[Vv])mu[a1]=So[Vv][a1];So[Vv]=mu}return So}if(U_=j(),U_!==g&&bo===c.length)return U_;throw U_!==g&&bo<c.length&&TL(IO()),qL(X3,aR<c.length?c.charAt(aR):null,aR<c.length?CL(aR,aR+1):CL(aR,aR))}i.exports={SyntaxError:a,parse:o}}),Y_=zi((e,i)=>{var s=Y3().parse;s.parseSVG=s,s.makeAbsolute=a,i.exports=s;function a(o){var c,d={x:0,y:0},g={x:"x0",y:"y0",x1:"x0",y1:"y0",x2:"x0",y2:"y0"};return o.forEach(function(b){b.command==="moveto"&&(c=b),b.x0=d.x,b.y0=d.y;for(var j in g)j in b&&(b[j]+=b.relative?b[g[j]]:0);"x"in b||(b.x=d.x),"y"in b||(b.y=d.y),b.relative=!1,b.code=b.code.toUpperCase(),b.command=="closepath"&&(b.x=c.x,b.y=c.y),d=b}),o}}),ML=zi((e,i)=>{function s(a){for(var o=new Array(a),c=0;c<a;++c)o[c]=c;return o}i.exports=s}),DL=zi((e,i)=>{i.exports=function(o){return o!=null&&(s(o)||a(o)||!!o._isBuffer)};function s(o){return!!o.constructor&&typeof o.constructor.isBuffer=="function"&&o.constructor.isBuffer(o)}function a(o){return typeof o.readFloatLE=="function"&&typeof o.slice=="function"&&s(o.slice(0,0))}}),Uf=zi((e,i)=>{var s=ML(),a=DL(),o=typeof Float64Array<"u";function c($,rt){return $[0]-rt[0]}function d(){var $=this.stride,rt=new Array($.length),st;for(st=0;st<rt.length;++st)rt[st]=[Math.abs($[st]),st];rt.sort(c);var ut=new Array(rt.length);for(st=0;st<ut.length;++st)ut[st]=rt[st][1];return ut}function g($,rt){var st=["View",rt,"d",$].join("");rt<0&&(st="View_Nil"+$);var ut=$==="generic";if(rt===-1){var gt="function "+st+"(a){this.data=a;};var proto="+st+".prototype;proto.dtype='"+$+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+st+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+st+"(a){return new "+st+"(a);}",Ht=new Function(gt);return Ht()}else if(rt===0){var gt="function "+st+"(a,d) {this.data = a;this.offset = d};var proto="+st+".prototype;proto.dtype='"+$+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+st+"_copy() {return new "+st+"(this.data,this.offset)};proto.pick=function "+st+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+st+"_get(){return "+(ut?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+st+"_set(v){return "+(ut?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+st+"(a,b,c,d){return new "+st+"(a,d)}",Ht=new Function("TrivialArray",gt);return Ht(j[$][0])}var gt=["'use strict'"],wt=s(rt),yt=wt.map(function(dr){return"i"+dr}),At="this.offset+"+wt.map(function(dr){return"this.stride["+dr+"]*i"+dr}).join("+"),Ct=wt.map(function(dr){return"b"+dr}).join(","),Tt=wt.map(function(dr){return"c"+dr}).join(",");gt.push("function "+st+"(a,"+Ct+","+Tt+",d){this.data=a","this.shape=["+Ct+"]","this.stride=["+Tt+"]","this.offset=d|0}","var proto="+st+".prototype","proto.dtype='"+$+"'","proto.dimension="+rt),gt.push("Object.defineProperty(proto,'size',{get:function "+st+"_size(){return "+wt.map(function(dr){return"this.shape["+dr+"]"}).join("*"),"}})"),rt===1?gt.push("proto.order=[0]"):(gt.push("Object.defineProperty(proto,'order',{get:"),rt<4?(gt.push("function "+st+"_order(){"),rt===2?gt.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):rt===3&&gt.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):gt.push("ORDER})")),gt.push("proto.set=function "+st+"_set("+yt.join(",")+",v){"),ut?gt.push("return this.data.set("+At+",v)}"):gt.push("return this.data["+At+"]=v}"),gt.push("proto.get=function "+st+"_get("+yt.join(",")+"){"),ut?gt.push("return this.data.get("+At+")}"):gt.push("return this.data["+At+"]}"),gt.push("proto.index=function "+st+"_index(",yt.join(),"){return "+At+"}"),gt.push("proto.hi=function "+st+"_hi("+yt.join(",")+"){return new "+st+"(this.data,"+wt.map(function(dr){return["(typeof i",dr,"!=='number'||i",dr,"<0)?this.shape[",dr,"]:i",dr,"|0"].join("")}).join(",")+","+wt.map(function(dr){return"this.stride["+dr+"]"}).join(",")+",this.offset)}");var kt=wt.map(function(dr){return"a"+dr+"=this.shape["+dr+"]"}),Pt=wt.map(function(dr){return"c"+dr+"=this.stride["+dr+"]"});gt.push("proto.lo=function "+st+"_lo("+yt.join(",")+"){var b=this.offset,d=0,"+kt.join(",")+","+Pt.join(","));for(var It=0;It<rt;++It)gt.push("if(typeof i"+It+"==='number'&&i"+It+">=0){d=i"+It+"|0;b+=c"+It+"*d;a"+It+"-=d}");gt.push("return new "+st+"(this.data,"+wt.map(function(dr){return"a"+dr}).join(",")+","+wt.map(function(dr){return"c"+dr}).join(",")+",b)}"),gt.push("proto.step=function "+st+"_step("+yt.join(",")+"){var "+wt.map(function(dr){return"a"+dr+"=this.shape["+dr+"]"}).join(",")+","+wt.map(function(dr){return"b"+dr+"=this.stride["+dr+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var It=0;It<rt;++It)gt.push("if(typeof i"+It+"==='number'){d=i"+It+"|0;if(d<0){c+=b"+It+"*(a"+It+"-1);a"+It+"=ceil(-a"+It+"/d)}else{a"+It+"=ceil(a"+It+"/d)}b"+It+"*=d}");gt.push("return new "+st+"(this.data,"+wt.map(function(dr){return"a"+dr}).join(",")+","+wt.map(function(dr){return"b"+dr}).join(",")+",c)}");for(var Lt=new Array(rt),Nt=new Array(rt),It=0;It<rt;++It)Lt[It]="a[i"+It+"]",Nt[It]="b[i"+It+"]";gt.push("proto.transpose=function "+st+"_transpose("+yt+"){"+yt.map(function(dr,hs){return dr+"=("+dr+"===undefined?"+hs+":"+dr+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+st+"(this.data,"+Lt.join(",")+","+Nt.join(",")+",this.offset)}"),gt.push("proto.pick=function "+st+"_pick("+yt+"){var a=[],b=[],c=this.offset");for(var It=0;It<rt;++It)gt.push("if(typeof i"+It+"==='number'&&i"+It+">=0){c=(c+this.stride["+It+"]*i"+It+")|0}else{a.push(this.shape["+It+"]);b.push(this.stride["+It+"])}");gt.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),gt.push("return function construct_"+st+"(data,shape,stride,offset){return new "+st+"(data,"+wt.map(function(dr){return"shape["+dr+"]"}).join(",")+","+wt.map(function(dr){return"stride["+dr+"]"}).join(",")+",offset)}");var Ht=new Function("CTOR_LIST","ORDER",gt.join(`
`));return Ht(j[$],d)}function b($){if(a($))return"buffer";if(o)switch(Object.prototype.toString.call($)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray($)?"array":"generic"}var j={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};function _e($,rt,st,ut){if($===void 0){var Tt=j.array[0];return Tt([])}else typeof $=="number"&&($=[$]);rt===void 0&&(rt=[$.length]);var gt=rt.length;if(st===void 0){st=new Array(gt);for(var wt=gt-1,yt=1;wt>=0;--wt)st[wt]=yt,yt*=rt[wt]}if(ut===void 0){ut=0;for(var wt=0;wt<gt;++wt)st[wt]<0&&(ut-=(rt[wt]-1)*st[wt])}for(var At=b($),Ct=j[At];Ct.length<=gt+1;)Ct.push(g(At,Ct.length-1));var Tt=Ct[gt+1];return Tt($,rt,st,ut)}i.exports=_e}),RL=zi((e,i)=>{function s(c,d){for(var g=1,b=c.length,j=c[0],_e=c[0],$=1;$<b;++$)if(_e=j,j=c[$],d(j,_e)){if($===g){g++;continue}c[g++]=j}return c.length=g,c}function a(c){for(var d=1,g=c.length,b=c[0],j=c[0],_e=1;_e<g;++_e,j=b)if(j=b,b=c[_e],b!==j){if(_e===d){d++;continue}c[d++]=b}return c.length=d,c}function o(c,d,g){return c.length===0?c:d?(g||c.sort(d),s(c,d)):(g||c.sort(),a(c))}i.exports=o}),NL=zi((e,i)=>{var s=RL();function a(j,_e,$){var rt=j.length,st=_e.arrayArgs.length,ut=_e.indexArgs.length>0,gt=[],wt=[],yt=0,At=0,Ct,Tt;for(Ct=0;Ct<rt;++Ct)wt.push(["i",Ct,"=0"].join(""));for(Tt=0;Tt<st;++Tt)for(Ct=0;Ct<rt;++Ct)At=yt,yt=j[Ct],Ct===0?wt.push(["d",Tt,"s",Ct,"=t",Tt,"p",yt].join("")):wt.push(["d",Tt,"s",Ct,"=(t",Tt,"p",yt,"-s",At,"*t",Tt,"p",At,")"].join(""));for(wt.length>0&&gt.push("var "+wt.join(",")),Ct=rt-1;Ct>=0;--Ct)yt=j[Ct],gt.push(["for(i",Ct,"=0;i",Ct,"<s",yt,";++i",Ct,"){"].join(""));for(gt.push($),Ct=0;Ct<rt;++Ct){for(At=yt,yt=j[Ct],Tt=0;Tt<st;++Tt)gt.push(["p",Tt,"+=d",Tt,"s",Ct].join(""));ut&&(Ct>0&&gt.push(["index[",At,"]-=s",At].join("")),gt.push(["++index[",yt,"]"].join(""))),gt.push("}")}return gt.join(`
`)}function o(j,_e,$,rt){for(var st=_e.length,ut=$.arrayArgs.length,gt=$.blockSize,wt=$.indexArgs.length>0,yt=[],At=0;At<ut;++At)yt.push(["var offset",At,"=p",At].join(""));for(var At=j;At<st;++At)yt.push(["for(var j"+At+"=SS[",_e[At],"]|0;j",At,">0;){"].join("")),yt.push(["if(j",At,"<",gt,"){"].join("")),yt.push(["s",_e[At],"=j",At].join("")),yt.push(["j",At,"=0"].join("")),yt.push(["}else{s",_e[At],"=",gt].join("")),yt.push(["j",At,"-=",gt,"}"].join("")),wt&&yt.push(["index[",_e[At],"]=j",At].join(""));for(var At=0;At<ut;++At){for(var Ct=["offset"+At],Tt=j;Tt<st;++Tt)Ct.push(["j",Tt,"*t",At,"p",_e[Tt]].join(""));yt.push(["p",At,"=(",Ct.join("+"),")"].join(""))}yt.push(a(_e,$,rt));for(var At=j;At<st;++At)yt.push("}");return yt.join(`
`)}function c(j){for(var _e=0,$=j[0].length;_e<$;){for(var rt=1;rt<j.length;++rt)if(j[rt][_e]!==j[0][_e])return _e;++_e}return _e}function d(j,_e,$){for(var rt=j.body,st=[],ut=[],gt=0;gt<j.args.length;++gt){var wt=j.args[gt];if(!(wt.count<=0)){var yt=new RegExp(wt.name,"g"),At="",Ct=_e.arrayArgs.indexOf(gt);switch(_e.argTypes[gt]){case"offset":var Tt=_e.offsetArgIndex.indexOf(gt),kt=_e.offsetArgs[Tt];Ct=kt.array,At="+q"+Tt;case"array":At="p"+Ct+At;var Pt="l"+gt,It="a"+Ct;if(_e.arrayBlockIndices[Ct]===0)wt.count===1?$[Ct]==="generic"?wt.lvalue?(st.push(["var ",Pt,"=",It,".get(",At,")"].join("")),rt=rt.replace(yt,Pt),ut.push([It,".set(",At,",",Pt,")"].join(""))):rt=rt.replace(yt,[It,".get(",At,")"].join("")):rt=rt.replace(yt,[It,"[",At,"]"].join("")):$[Ct]==="generic"?(st.push(["var ",Pt,"=",It,".get(",At,")"].join("")),rt=rt.replace(yt,Pt),wt.lvalue&&ut.push([It,".set(",At,",",Pt,")"].join(""))):(st.push(["var ",Pt,"=",It,"[",At,"]"].join("")),rt=rt.replace(yt,Pt),wt.lvalue&&ut.push([It,"[",At,"]=",Pt].join("")));else{for(var Lt=[wt.name],Nt=[At],Ht=0;Ht<Math.abs(_e.arrayBlockIndices[Ct]);Ht++)Lt.push("\\s*\\[([^\\]]+)\\]"),Nt.push("$"+(Ht+1)+"*t"+Ct+"b"+Ht);if(yt=new RegExp(Lt.join(""),"g"),At=Nt.join("+"),$[Ct]==="generic")throw new Error("cwise: Generic arrays not supported in combination with blocks!");rt=rt.replace(yt,[It,"[",At,"]"].join(""))}break;case"scalar":rt=rt.replace(yt,"Y"+_e.scalarArgs.indexOf(gt));break;case"index":rt=rt.replace(yt,"index");break;case"shape":rt=rt.replace(yt,"shape");break}}}return[st.join(`
`),rt,ut.join(`
`)].join(`
`).trim()}function g(j){for(var _e=new Array(j.length),$=!0,rt=0;rt<j.length;++rt){var st=j[rt],ut=st.match(/\d+/);ut?ut=ut[0]:ut="",st.charAt(0)===0?_e[rt]="u"+st.charAt(1)+ut:_e[rt]=st.charAt(0)+ut,rt>0&&($=$&&_e[rt]===_e[rt-1])}return $?_e[0]:_e.join("")}function b(j,_e){for(var $=_e[1].length-Math.abs(j.arrayBlockIndices[0])|0,rt=new Array(j.arrayArgs.length),st=new Array(j.arrayArgs.length),ut=0;ut<j.arrayArgs.length;++ut)st[ut]=_e[2*ut],rt[ut]=_e[2*ut+1];for(var gt=[],wt=[],yt=[],At=[],Ct=[],ut=0;ut<j.arrayArgs.length;++ut){j.arrayBlockIndices[ut]<0?(yt.push(0),At.push($),gt.push($),wt.push($+j.arrayBlockIndices[ut])):(yt.push(j.arrayBlockIndices[ut]),At.push(j.arrayBlockIndices[ut]+$),gt.push(0),wt.push(j.arrayBlockIndices[ut]));for(var Tt=[],kt=0;kt<rt[ut].length;kt++)yt[ut]<=rt[ut][kt]&&rt[ut][kt]<At[ut]&&Tt.push(rt[ut][kt]-yt[ut]);Ct.push(Tt)}for(var Pt=["SS"],It=["'use strict'"],Lt=[],kt=0;kt<$;++kt)Lt.push(["s",kt,"=SS[",kt,"]"].join(""));for(var ut=0;ut<j.arrayArgs.length;++ut){Pt.push("a"+ut),Pt.push("t"+ut),Pt.push("p"+ut);for(var kt=0;kt<$;++kt)Lt.push(["t",ut,"p",kt,"=t",ut,"[",yt[ut]+kt,"]"].join(""));for(var kt=0;kt<Math.abs(j.arrayBlockIndices[ut]);++kt)Lt.push(["t",ut,"b",kt,"=t",ut,"[",gt[ut]+kt,"]"].join(""))}for(var ut=0;ut<j.scalarArgs.length;++ut)Pt.push("Y"+ut);if(j.shapeArgs.length>0&&Lt.push("shape=SS.slice(0)"),j.indexArgs.length>0){for(var Nt=new Array($),ut=0;ut<$;++ut)Nt[ut]="0";Lt.push(["index=[",Nt.join(","),"]"].join(""))}for(var ut=0;ut<j.offsetArgs.length;++ut){for(var Ht=j.offsetArgs[ut],dr=[],kt=0;kt<Ht.offset.length;++kt)Ht.offset[kt]!==0&&(Ht.offset[kt]===1?dr.push(["t",Ht.array,"p",kt].join("")):dr.push([Ht.offset[kt],"*t",Ht.array,"p",kt].join("")));dr.length===0?Lt.push("q"+ut+"=0"):Lt.push(["q",ut,"=",dr.join("+")].join(""))}var hs=s([].concat(j.pre.thisVars).concat(j.body.thisVars).concat(j.post.thisVars));Lt=Lt.concat(hs),Lt.length>0&&It.push("var "+Lt.join(","));for(var ut=0;ut<j.arrayArgs.length;++ut)It.push("p"+ut+"|=0");j.pre.body.length>3&&It.push(d(j.pre,j,st));var _s=d(j.body,j,st),ds=c(Ct);ds<$?It.push(o(ds,Ct[0],j,_s)):It.push(a(Ct[0],j,_s)),j.post.body.length>3&&It.push(d(j.post,j,st)),j.debug&&console.log("-----Generated cwise routine for ",_e,`:
`+It.join(`
`)+`
----------`);var Nn=[j.funcName||"unnamed","_cwise_loop_",rt[0].join("s"),"m",ds,g(st)].join(""),us=new Function(["function ",Nn,"(",Pt.join(","),"){",It.join(`
`),"} return ",Nn].join(""));return us()}i.exports=b}),kL=zi((e,i)=>{var s=NL();function a(o){var c=["'use strict'","var CACHED={}"],d=[],g=o.funcName+"_cwise_thunk";c.push(["return function ",g,"(",o.shimArgs.join(","),"){"].join(""));for(var b=[],j=[],_e=[["array",o.arrayArgs[0],".shape.slice(",Math.max(0,o.arrayBlockIndices[0]),o.arrayBlockIndices[0]<0?","+o.arrayBlockIndices[0]+")":")"].join("")],$=[],rt=[],st=0;st<o.arrayArgs.length;++st){var ut=o.arrayArgs[st];d.push(["t",ut,"=array",ut,".dtype,","r",ut,"=array",ut,".order"].join("")),b.push("t"+ut),b.push("r"+ut),j.push("t"+ut),j.push("r"+ut+".join()"),_e.push("array"+ut+".data"),_e.push("array"+ut+".stride"),_e.push("array"+ut+".offset|0"),st>0&&($.push("array"+o.arrayArgs[0]+".shape.length===array"+ut+".shape.length+"+(Math.abs(o.arrayBlockIndices[0])-Math.abs(o.arrayBlockIndices[st]))),rt.push("array"+o.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,o.arrayBlockIndices[0])+"]===array"+ut+".shape[shapeIndex+"+Math.max(0,o.arrayBlockIndices[st])+"]"))}o.arrayArgs.length>1&&(c.push("if (!("+$.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),c.push("for(var shapeIndex=array"+o.arrayArgs[0]+".shape.length-"+Math.abs(o.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),c.push("if (!("+rt.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),c.push("}"));for(var st=0;st<o.scalarArgs.length;++st)_e.push("scalar"+o.scalarArgs[st]);d.push(["type=[",j.join(","),"].join()"].join("")),d.push("proc=CACHED[type]"),c.push("var "+d.join(",")),c.push(["if(!proc){","CACHED[type]=proc=compile([",b.join(","),"])}","return proc(",_e.join(","),")}"].join("")),o.debug&&console.log(`-----Generated thunk:
`+c.join(`
`)+`
----------`);var gt=new Function("compile",c.join(`
`));return gt(s.bind(void 0,o))}i.exports=a}),zL=zi((e,i)=>{var s=kL();function a(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function o(c){var d=new a;d.pre=c.pre,d.body=c.body,d.post=c.post;var g=c.args.slice(0);d.argTypes=g;for(var b=0;b<g.length;++b){var j=g[b];if(j==="array"||typeof j=="object"&&j.blockIndices){if(d.argTypes[b]="array",d.arrayArgs.push(b),d.arrayBlockIndices.push(j.blockIndices?j.blockIndices:0),d.shimArgs.push("array"+b),b<d.pre.args.length&&d.pre.args[b].count>0)throw new Error("cwise: pre() block may not reference array args");if(b<d.post.args.length&&d.post.args[b].count>0)throw new Error("cwise: post() block may not reference array args")}else if(j==="scalar")d.scalarArgs.push(b),d.shimArgs.push("scalar"+b);else if(j==="index"){if(d.indexArgs.push(b),b<d.pre.args.length&&d.pre.args[b].count>0)throw new Error("cwise: pre() block may not reference array index");if(b<d.body.args.length&&d.body.args[b].lvalue)throw new Error("cwise: body() block may not write to array index");if(b<d.post.args.length&&d.post.args[b].count>0)throw new Error("cwise: post() block may not reference array index")}else if(j==="shape"){if(d.shapeArgs.push(b),b<d.pre.args.length&&d.pre.args[b].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(b<d.body.args.length&&d.body.args[b].lvalue)throw new Error("cwise: body() block may not write to array shape");if(b<d.post.args.length&&d.post.args[b].lvalue)throw new Error("cwise: post() block may not write to array shape")}else if(typeof j=="object"&&j.offset)d.argTypes[b]="offset",d.offsetArgs.push({array:j.array,offset:j.offset}),d.offsetArgIndex.push(b);else throw new Error("cwise: Unknown argument type "+g[b])}if(d.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(d.pre.args.length>g.length)throw new Error("cwise: Too many arguments in pre() block");if(d.body.args.length>g.length)throw new Error("cwise: Too many arguments in body() block");if(d.post.args.length>g.length)throw new Error("cwise: Too many arguments in post() block");return d.debug=!!c.printCode||!!c.debug,d.funcName=c.funcName||"cwise",d.blockSize=c.blockSize||64,s(d)}i.exports=o}),Gf=zi(e=>{var i=zL(),s={body:"",args:[],thisVars:[],localVars:[]};function a(rt){if(!rt)return s;for(var st=0;st<rt.args.length;++st){var ut=rt.args[st];st===0?rt.args[st]={name:ut,lvalue:!0,rvalue:!!rt.rvalue,count:rt.count||1}:rt.args[st]={name:ut,lvalue:!1,rvalue:!0,count:1}}return rt.thisVars||(rt.thisVars=[]),rt.localVars||(rt.localVars=[]),rt}function o(rt){return i({args:rt.args,pre:a(rt.pre),body:a(rt.body),post:a(rt.proc),funcName:rt.funcName})}function c(rt){for(var st=[],ut=0;ut<rt.args.length;++ut)st.push("a"+ut);var gt=new Function("P",["return function ",rt.funcName,"_ndarrayops(",st.join(","),") {P(",st.join(","),");return a0}"].join(""));return gt(o(rt))}var d={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};(function(){for(var rt in d){var st=d[rt];e[rt]=c({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+st+"c"},funcName:rt}),e[rt+"eq"]=c({args:["array","array"],body:{args:["a","b"],body:"a"+st+"=b"},rvalue:!0,funcName:rt+"eq"}),e[rt+"s"]=c({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+st+"s"},funcName:rt+"s"}),e[rt+"seq"]=c({args:["array","scalar"],body:{args:["a","s"],body:"a"+st+"=s"},rvalue:!0,funcName:rt+"seq"})}})();var g={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var rt in g){var st=g[rt];e[rt]=c({args:["array","array"],body:{args:["a","b"],body:"a="+st+"b"},funcName:rt}),e[rt+"eq"]=c({args:["array"],body:{args:["a"],body:"a="+st+"a"},rvalue:!0,count:2,funcName:rt+"eq"})}})();var b={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};(function(){for(var rt in b){var st=b[rt];e[rt]=c({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+st+"c"},funcName:rt}),e[rt+"s"]=c({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+st+"s"},funcName:rt+"s"}),e[rt+"eq"]=c({args:["array","array"],body:{args:["a","b"],body:"a=a"+st+"b"},rvalue:!0,count:2,funcName:rt+"eq"}),e[rt+"seq"]=c({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+st+"s"},rvalue:!0,count:2,funcName:rt+"seq"})}})();var j=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];(function(){for(var rt=0;rt<j.length;++rt){var st=j[rt];e[st]=c({args:["array","array"],pre:{args:[],body:"this_f=Math."+st,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:st}),e[st+"eq"]=c({args:["array"],pre:{args:[],body:"this_f=Math."+st,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:st+"eq"})}})();var _e=["max","min","atan2","pow"];(function(){for(var rt=0;rt<_e.length;++rt){var st=_e[rt];e[st]=c({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+st,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:st}),e[st+"s"]=c({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+st,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:st+"s"}),e[st+"eq"]=c({args:["array","array"],pre:{args:[],body:"this_f=Math."+st,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:st+"eq"}),e[st+"seq"]=c({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+st,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:st+"seq"})}})();var $=["atan2","pow"];(function(){for(var rt=0;rt<$.length;++rt){var st=$[rt];e[st+"op"]=c({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+st,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:st+"op"}),e[st+"ops"]=c({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+st,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:st+"ops"}),e[st+"opeq"]=c({args:["array","array"],pre:{args:[],body:"this_f=Math."+st,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:st+"opeq"}),e[st+"opseq"]=c({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+st,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:st+"opseq"})}})(),e.any=i({args:["array"],pre:s,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),e.all=i({args:["array"],pre:s,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),e.sum=i({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),e.prod=i({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),e.norm2squared=i({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),e.norm2=i({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),e.norminf=i({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),e.norm1=i({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),e.sup=i({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),e.inf=i({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),e.argmin=i({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),e.argmax=i({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),e.random=c({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),e.assign=c({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),e.assigns=c({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),e.equals=i({args:["array","array"],pre:s,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})}),XN=zi((e,i)=>{i.exports=function(s,a){for(var o=s.split("."),c=a.split("."),d=0;d<3;d++){var g=Number(o[d]),b=Number(c[d]);if(g>b)return 1;if(b>g)return-1;if(!isNaN(g)&&isNaN(b))return 1;if(isNaN(g)&&!isNaN(b))return-1}return 0}}),ba="149",ns={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},sF=0,lT=1,oF=2,Gy=1,aF=2,mp=3,es=0,yi=1,tn=2,er=0,sl=1,cT=2,uT=3,hT=4,lF=5,Fu=100,cF=101,uF=102,dT=103,fT=104,hF=200,dF=201,fF=202,pF=203,zM=204,UM=205,mF=206,gF=207,yF=208,vF=209,xF=210,bF=0,SF=1,wF=2,US=3,AF=4,_F=5,EF=6,TF=7,GM=0,MF=1,CF=2,Hs=0,PF=1,DF=2,OF=3,IF=4,RF=5,jM=300,al=301,ll=302,GS=303,jS=304,ch=306,Ws=1e3,Kt=1001,HS=1002,Vt=1003,pT=1004,nS=1005,tt=1006,LF=1007,bc=1008,Ir$1=1009,BF=1010,NF=1011,HM=1012,FF=1013,js=1014,Sr$1=1015,va=1016,kF=1017,VF=1018,ol=1020,zF=1021,Qr=1023,UF=1024,GF=1025,vc=1026,cl=1027,jF=1028,HF=1029,uh=1030,WF=1031,Aw=1033,sS=33776,oS=33777,aS=33778,lS=33779,mT=35840,gT=35841,yT=35842,vT=35843,qF=36196,xT=37492,bT=37496,ST=37808,wT=37809,AT=37810,_T=37811,ET=37812,TT=37813,MT=37814,CT=37815,PT=37816,DT=37817,OT=37818,IT=37819,RT=37820,LT=37821,cS=36492,YF=36283,BT=36284,NT=36285,FT=36286,_w=2200,Ew=2201,kp=2202,fy=2300,py=2301,uS=2302,ku=2400,Vu=2401,my=2402,Tw=2500,XF=2501,Sn=3e3,at=3001,ji=3200,Mw=3201,QF=0,KF=1,wo="srgb",wp="srgb-linear",hS=7680,ZF=519,WS=35044,WM=35048,kT="300 es",qS=1035,fr$2=class{addEventListener(i,s){this._listeners===void 0&&(this._listeners={});let a=this._listeners;a[i]===void 0&&(a[i]=[]),a[i].indexOf(s)===-1&&a[i].push(s)}hasEventListener(i,s){if(this._listeners===void 0)return!1;let a=this._listeners;return a[i]!==void 0&&a[i].indexOf(s)!==-1}removeEventListener(i,s){if(this._listeners===void 0)return;let a=this._listeners[i];if(a!==void 0){let o=a.indexOf(s);o!==-1&&a.splice(o,1)}}dispatchEvent(i){if(this._listeners===void 0)return;let s=this._listeners[i.type];if(s!==void 0){i.target=this;let a=s.slice(0);for(let o=0,c=a.length;o<c;o++)a[o].call(this,i);i.target=null}}},dn=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],VT=1234567,yp=Math.PI/180,Ap=180/Math.PI;function ms(){let e=Math.random()*4294967295|0,i=Math.random()*4294967295|0,s=Math.random()*4294967295|0,a=Math.random()*4294967295|0;return(dn[e&255]+dn[e>>8&255]+dn[e>>16&255]+dn[e>>24&255]+"-"+dn[i&255]+dn[i>>8&255]+"-"+dn[i>>16&15|64]+dn[i>>24&255]+"-"+dn[s&63|128]+dn[s>>8&255]+"-"+dn[s>>16&255]+dn[s>>24&255]+dn[a&255]+dn[a>>8&255]+dn[a>>16&255]+dn[a>>24&255]).toLowerCase()}function gi(e,i,s){return Math.max(i,Math.min(s,e))}function Cw(e,i){return(e%i+i)%i}function JF(e,i,s,a,o){return a+(e-i)*(o-a)/(s-i)}function $F(e,i,s){return e!==i?(s-e)/(i-e):0}function vp(e,i,s){return(1-s)*e+s*i}function ek(e,i,s,a){return vp(e,i,1-Math.exp(-s*a))}function tk(e,i=1){return i-Math.abs(Cw(e,i*2)-i)}function rk(e,i,s){return e<=i?0:e>=s?1:(e=(e-i)/(s-i),e*e*(3-2*e))}function ik(e,i,s){return e<=i?0:e>=s?1:(e=(e-i)/(s-i),e*e*e*(e*(e*6-15)+10))}function nk(e,i){return e+Math.floor(Math.random()*(i-e+1))}function sk(e,i){return e+Math.random()*(i-e)}function ok(e){return e*(.5-Math.random())}function ak(e){e!==void 0&&(VT=e);let i=VT+=1831565813;return i=Math.imul(i^i>>>15,i|1),i^=i+Math.imul(i^i>>>7,i|61),((i^i>>>14)>>>0)/4294967296}function lk(e){return e*yp}function ck(e){return e*Ap}function YS(e){return(e&e-1)===0&&e!==0}function qM(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function gy(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function uk(e,i,s,a,o){let c=Math.cos,d=Math.sin,g=c(s/2),b=d(s/2),j=c((i+a)/2),_e=d((i+a)/2),$=c((i-a)/2),rt=d((i-a)/2),st=c((a-i)/2),ut=d((a-i)/2);switch(o){case"XYX":e.set(g*_e,b*$,b*rt,g*j);break;case"YZY":e.set(b*rt,g*_e,b*$,g*j);break;case"ZXZ":e.set(b*$,b*rt,g*_e,g*j);break;case"XZX":e.set(g*_e,b*ut,b*st,g*j);break;case"YXY":e.set(b*st,g*_e,b*ut,g*j);break;case"ZYZ":e.set(b*ut,b*st,g*_e,g*j);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+o)}}function ya(e,i){switch(i.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function br(e,i){switch(i.constructor){case Float32Array:return e;case Uint16Array:return Math.round(e*65535);case Uint8Array:return Math.round(e*255);case Int16Array:return Math.round(e*32767);case Int8Array:return Math.round(e*127);default:throw new Error("Invalid component type.")}}var Me=Object.freeze({__proto__:null,DEG2RAD:yp,RAD2DEG:Ap,ceilPowerOfTwo:qM,clamp:gi,damp:ek,degToRad:lk,denormalize:ya,euclideanModulo:Cw,floorPowerOfTwo:gy,generateUUID:ms,inverseLerp:$F,isPowerOfTwo:YS,lerp:vp,mapLinear:JF,normalize:br,pingpong:tk,radToDeg:ck,randFloat:sk,randFloatSpread:ok,randInt:nk,seededRandom:ak,setQuaternionFromProperEuler:uk,smootherstep:ik,smoothstep:rk}),z$1=class{constructor(i=0,s=0){z$1.prototype.isVector2=!0,this.x=i,this.y=s}get width(){return this.x}set width(i){this.x=i}get height(){return this.y}set height(i){this.y=i}set(i,s){return this.x=i,this.y=s,this}setScalar(i){return this.x=i,this.y=i,this}setX(i){return this.x=i,this}setY(i){return this.y=i,this}setComponent(i,s){switch(i){case 0:this.x=s;break;case 1:this.y=s;break;default:throw new Error("index is out of range: "+i)}return this}getComponent(i){switch(i){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+i)}}clone(){return new this.constructor(this.x,this.y)}copy(i){return this.x=i.x,this.y=i.y,this}add(i){return this.x+=i.x,this.y+=i.y,this}addScalar(i){return this.x+=i,this.y+=i,this}addVectors(i,s){return this.x=i.x+s.x,this.y=i.y+s.y,this}addScaledVector(i,s){return this.x+=i.x*s,this.y+=i.y*s,this}sub(i){return this.x-=i.x,this.y-=i.y,this}subScalar(i){return this.x-=i,this.y-=i,this}subVectors(i,s){return this.x=i.x-s.x,this.y=i.y-s.y,this}multiply(i){return this.x*=i.x,this.y*=i.y,this}multiplyScalar(i){return this.x*=i,this.y*=i,this}divide(i){return this.x/=i.x,this.y/=i.y,this}divideScalar(i){return this.multiplyScalar(1/i)}applyMatrix3(i){let s=this.x,a=this.y,o=i.elements;return this.x=o[0]*s+o[3]*a+o[6],this.y=o[1]*s+o[4]*a+o[7],this}min(i){return this.x=Math.min(this.x,i.x),this.y=Math.min(this.y,i.y),this}max(i){return this.x=Math.max(this.x,i.x),this.y=Math.max(this.y,i.y),this}clamp(i,s){return this.x=Math.max(i.x,Math.min(s.x,this.x)),this.y=Math.max(i.y,Math.min(s.y,this.y)),this}clampScalar(i,s){return this.x=Math.max(i,Math.min(s,this.x)),this.y=Math.max(i,Math.min(s,this.y)),this}clampLength(i,s){let a=this.length();return this.divideScalar(a||1).multiplyScalar(Math.max(i,Math.min(s,a)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(i){return this.x*i.x+this.y*i.y}cross(i){return this.x*i.y-this.y*i.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(i){return Math.sqrt(this.distanceToSquared(i))}distanceToSquared(i){let s=this.x-i.x,a=this.y-i.y;return s*s+a*a}manhattanDistanceTo(i){return Math.abs(this.x-i.x)+Math.abs(this.y-i.y)}setLength(i){return this.normalize().multiplyScalar(i)}lerp(i,s){return this.x+=(i.x-this.x)*s,this.y+=(i.y-this.y)*s,this}lerpVectors(i,s,a){return this.x=i.x+(s.x-i.x)*a,this.y=i.y+(s.y-i.y)*a,this}equals(i){return i.x===this.x&&i.y===this.y}fromArray(i,s=0){return this.x=i[s],this.y=i[s+1],this}toArray(i=[],s=0){return i[s]=this.x,i[s+1]=this.y,i}fromBufferAttribute(i,s){return this.x=i.getX(s),this.y=i.getY(s),this}rotateAround(i,s){let a=Math.cos(s),o=Math.sin(s),c=this.x-i.x,d=this.y-i.y;return this.x=c*a-d*o+i.x,this.y=c*o+d*a+i.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},nr=class{constructor(){nr.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,i,s,a,o,c,d,g,b){let j=this.elements;return j[0]=e,j[1]=a,j[2]=d,j[3]=i,j[4]=o,j[5]=g,j[6]=s,j[7]=c,j[8]=b,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let i=this.elements,s=e.elements;return i[0]=s[0],i[1]=s[1],i[2]=s[2],i[3]=s[3],i[4]=s[4],i[5]=s[5],i[6]=s[6],i[7]=s[7],i[8]=s[8],this}extractBasis(e,i,s){return e.setFromMatrix3Column(this,0),i.setFromMatrix3Column(this,1),s.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let i=e.elements;return this.set(i[0],i[4],i[8],i[1],i[5],i[9],i[2],i[6],i[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,i){let s=e.elements,a=i.elements,o=this.elements,c=s[0],d=s[3],g=s[6],b=s[1],j=s[4],_e=s[7],$=s[2],rt=s[5],st=s[8],ut=a[0],gt=a[3],wt=a[6],yt=a[1],At=a[4],Ct=a[7],Tt=a[2],kt=a[5],Pt=a[8];return o[0]=c*ut+d*yt+g*Tt,o[3]=c*gt+d*At+g*kt,o[6]=c*wt+d*Ct+g*Pt,o[1]=b*ut+j*yt+_e*Tt,o[4]=b*gt+j*At+_e*kt,o[7]=b*wt+j*Ct+_e*Pt,o[2]=$*ut+rt*yt+st*Tt,o[5]=$*gt+rt*At+st*kt,o[8]=$*wt+rt*Ct+st*Pt,this}multiplyScalar(e){let i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=e,i[4]*=e,i[7]*=e,i[2]*=e,i[5]*=e,i[8]*=e,this}determinant(){let e=this.elements,i=e[0],s=e[1],a=e[2],o=e[3],c=e[4],d=e[5],g=e[6],b=e[7],j=e[8];return i*c*j-i*d*b-s*o*j+s*d*g+a*o*b-a*c*g}invert(){let e=this.elements,i=e[0],s=e[1],a=e[2],o=e[3],c=e[4],d=e[5],g=e[6],b=e[7],j=e[8],_e=j*c-d*b,$=d*g-j*o,rt=b*o-c*g,st=i*_e+s*$+a*rt;if(st===0)return this.set(0,0,0,0,0,0,0,0,0);let ut=1/st;return e[0]=_e*ut,e[1]=(a*b-j*s)*ut,e[2]=(d*s-a*c)*ut,e[3]=$*ut,e[4]=(j*i-a*g)*ut,e[5]=(a*o-d*i)*ut,e[6]=rt*ut,e[7]=(s*g-b*i)*ut,e[8]=(c*i-s*o)*ut,this}transpose(){let e,i=this.elements;return e=i[1],i[1]=i[3],i[3]=e,e=i[2],i[2]=i[6],i[6]=e,e=i[5],i[5]=i[7],i[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let i=this.elements;return e[0]=i[0],e[1]=i[3],e[2]=i[6],e[3]=i[1],e[4]=i[4],e[5]=i[7],e[6]=i[2],e[7]=i[5],e[8]=i[8],this}setUvTransform(e,i,s,a,o,c,d){let g=Math.cos(o),b=Math.sin(o);return this.set(s*g,s*b,-s*(g*c+b*d)+c+e,-a*b,a*g,-a*(-b*c+g*d)+d+i,0,0,1),this}scale(e,i){return this.premultiply(dS.makeScale(e,i)),this}rotate(e){return this.premultiply(dS.makeRotation(-e)),this}translate(e,i){return this.premultiply(dS.makeTranslation(e,i)),this}makeTranslation(e,i){return this.set(1,0,e,0,1,i,0,0,1),this}makeRotation(e){let i=Math.cos(e),s=Math.sin(e);return this.set(i,-s,0,s,i,0,0,0,1),this}makeScale(e,i){return this.set(e,0,0,0,i,0,0,0,1),this}equals(e){let i=this.elements,s=e.elements;for(let a=0;a<9;a++)if(i[a]!==s[a])return!1;return!0}fromArray(e,i=0){for(let s=0;s<9;s++)this.elements[s]=e[s+i];return this}toArray(e=[],i=0){let s=this.elements;return e[i]=s[0],e[i+1]=s[1],e[i+2]=s[2],e[i+3]=s[3],e[i+4]=s[4],e[i+5]=s[5],e[i+6]=s[6],e[i+7]=s[7],e[i+8]=s[8],e}clone(){return new this.constructor().fromArray(this.elements)}},dS=new nr;function YM(e){for(let i=e.length-1;i>=0;--i)if(e[i]>=65535)return!0;return!1}var hk={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function kg(e,i){return new hk[e](i)}function _p(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function xc(e){return e<.04045?e*.0773993808:Math.pow(e*.9478672986+.0521327014,2.4)}function dy(e){return e<.0031308?e*12.92:1.055*Math.pow(e,.41666)-.055}var fS={[wo]:{[wp]:xc},[wp]:{[wo]:dy}},vn={legacyMode:!0,get workingColorSpace(){return wp},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,i,s){if(this.legacyMode||i===s||!i||!s)return e;if(fS[i]&&fS[i][s]!==void 0){let a=fS[i][s];return e.r=a(e.r),e.g=a(e.g),e.b=a(e.b),e}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(e,i){return this.convert(e,this.workingColorSpace,i)},toWorkingColorSpace:function(e,i){return this.convert(e,i,this.workingColorSpace)}},XM={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ti={r:0,g:0,b:0},zs={h:0,s:0,l:0},Vg={h:0,s:0,l:0};function pS(e,i,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?e+(i-e)*6*s:s<1/2?i:s<2/3?e+(i-e)*6*(2/3-s):e}function zg(e,i){return i.r=e.r,i.g=e.g,i.b=e.b,i}var We=class{constructor(e,i,s){return this.isColor=!0,this.r=1,this.g=1,this.b=1,i===void 0&&s===void 0?this.set(e):this.setRGB(e,i,s)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,i=wo){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,vn.toWorkingColorSpace(this,i),this}setRGB(e,i,s,a=vn.workingColorSpace){return this.r=e,this.g=i,this.b=s,vn.toWorkingColorSpace(this,a),this}setHSL(e,i,s,a=vn.workingColorSpace){if(e=Cw(e,1),i=gi(i,0,1),s=gi(s,0,1),i===0)this.r=this.g=this.b=s;else{let o=s<=.5?s*(1+i):s+i-s*i,c=2*s-o;this.r=pS(c,o,e+1/3),this.g=pS(c,o,e),this.b=pS(c,o,e-1/3)}return vn.toWorkingColorSpace(this,a),this}setStyle(e,i=wo){function s(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let a;if(a=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let o,c=a[1],d=a[2];switch(c){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(d))return this.r=Math.min(255,parseInt(o[1],10))/255,this.g=Math.min(255,parseInt(o[2],10))/255,this.b=Math.min(255,parseInt(o[3],10))/255,vn.toWorkingColorSpace(this,i),s(o[4]),this;if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(d))return this.r=Math.min(100,parseInt(o[1],10))/100,this.g=Math.min(100,parseInt(o[2],10))/100,this.b=Math.min(100,parseInt(o[3],10))/100,vn.toWorkingColorSpace(this,i),s(o[4]),this;break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(d)){let g=parseFloat(o[1])/360,b=parseFloat(o[2])/100,j=parseFloat(o[3])/100;return s(o[4]),this.setHSL(g,b,j,i)}break}}else if(a=/^\#([A-Fa-f\d]+)$/.exec(e)){let o=a[1],c=o.length;if(c===3)return this.r=parseInt(o.charAt(0)+o.charAt(0),16)/255,this.g=parseInt(o.charAt(1)+o.charAt(1),16)/255,this.b=parseInt(o.charAt(2)+o.charAt(2),16)/255,vn.toWorkingColorSpace(this,i),this;if(c===6)return this.r=parseInt(o.charAt(0)+o.charAt(1),16)/255,this.g=parseInt(o.charAt(2)+o.charAt(3),16)/255,this.b=parseInt(o.charAt(4)+o.charAt(5),16)/255,vn.toWorkingColorSpace(this,i),this}return e&&e.length>0?this.setColorName(e,i):this}setColorName(e,i=wo){let s=XM[e.toLowerCase()];return s!==void 0?this.setHex(s,i):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=xc(e.r),this.g=xc(e.g),this.b=xc(e.b),this}copyLinearToSRGB(e){return this.r=dy(e.r),this.g=dy(e.g),this.b=dy(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=wo){return vn.fromWorkingColorSpace(zg(this,Ti),e),gi(Ti.r*255,0,255)<<16^gi(Ti.g*255,0,255)<<8^gi(Ti.b*255,0,255)<<0}getHexString(e=wo){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,i=vn.workingColorSpace){vn.fromWorkingColorSpace(zg(this,Ti),i);let s=Ti.r,a=Ti.g,o=Ti.b,c=Math.max(s,a,o),d=Math.min(s,a,o),g,b,j=(d+c)/2;if(d===c)g=0,b=0;else{let _e=c-d;switch(b=j<=.5?_e/(c+d):_e/(2-c-d),c){case s:g=(a-o)/_e+(a<o?6:0);break;case a:g=(o-s)/_e+2;break;case o:g=(s-a)/_e+4;break}g/=6}return e.h=g,e.s=b,e.l=j,e}getRGB(e,i=vn.workingColorSpace){return vn.fromWorkingColorSpace(zg(this,Ti),i),e.r=Ti.r,e.g=Ti.g,e.b=Ti.b,e}getStyle(e=wo){return vn.fromWorkingColorSpace(zg(this,Ti),e),e!==wo?`color(${e} ${Ti.r} ${Ti.g} ${Ti.b})`:`rgb(${Ti.r*255|0},${Ti.g*255|0},${Ti.b*255|0})`}offsetHSL(e,i,s){return this.getHSL(zs),zs.h+=e,zs.s+=i,zs.l+=s,this.setHSL(zs.h,zs.s,zs.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,i){return this.r=e.r+i.r,this.g=e.g+i.g,this.b=e.b+i.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,i){return this.r+=(e.r-this.r)*i,this.g+=(e.g-this.g)*i,this.b+=(e.b-this.b)*i,this}lerpColors(e,i,s){return this.r=e.r+(i.r-e.r)*s,this.g=e.g+(i.g-e.g)*s,this.b=e.b+(i.b-e.b)*s,this}lerpHSL(e,i){this.getHSL(zs),e.getHSL(Vg);let s=vp(zs.h,Vg.h,i),a=vp(zs.s,Vg.s,i),o=vp(zs.l,Vg.l,i);return this.setHSL(s,a,o),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,i=0){return this.r=e[i],this.g=e[i+1],this.b=e[i+2],this}toArray(e=[],i=0){return e[i]=this.r,e[i+1]=this.g,e[i+2]=this.b,e}fromBufferAttribute(e,i){return this.r=e.getX(i),this.g=e.getY(i),this.b=e.getZ(i),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};We.NAMES=XM;var Au,yy=class{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{Au===void 0&&(Au=_p("canvas")),Au.width=e.width,Au.height=e.height;let s=Au.getContext("2d");e instanceof ImageData?s.putImageData(e,0,0):s.drawImage(e,0,0,e.width,e.height),i=Au}return i.width>2048||i.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),i.toDataURL("image/jpeg",.6)):i.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){let i=_p("canvas");i.width=e.width,i.height=e.height;let s=i.getContext("2d");s.drawImage(e,0,0,e.width,e.height);let a=s.getImageData(0,0,e.width,e.height),o=a.data;for(let c=0;c<o.length;c++)o[c]=xc(o[c]/255)*255;return s.putImageData(a,0,0),i}else if(e.data){let i=e.data.slice(0);for(let s=0;s<i.length;s++)i instanceof Uint8Array||i instanceof Uint8ClampedArray?i[s]=Math.floor(xc(i[s]/255)*255):i[s]=xc(i[s]);return{data:i,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},vy=class{constructor(e=null){this.isSource=!0,this.uuid=ms(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){let i=e===void 0||typeof e=="string";if(!i&&e.images[this.uuid]!==void 0)return e.images[this.uuid];let s={uuid:this.uuid,url:""},a=this.data;if(a!==null){let o;if(Array.isArray(a)){o=[];for(let c=0,d=a.length;c<d;c++)a[c].isDataTexture?o.push(mS(a[c].image)):o.push(mS(a[c]))}else o=mS(a);s.url=o}return i||(e.images[this.uuid]=s),s}};function mS(e){return typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap?yy.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var dk=0,tr=class extends fr$2{constructor(e=tr.DEFAULT_IMAGE,i=tr.DEFAULT_MAPPING,s=Kt,a=Kt,o=tt,c=bc,d=Qr,g=Ir$1,b=tr.DEFAULT_ANISOTROPY,j=Sn){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:dk++}),this.uuid=ms(),this.name="",this.source=new vy(e),this.mipmaps=[],this.mapping=i,this.wrapS=s,this.wrapT=a,this.magFilter=o,this.minFilter=c,this.anisotropy=b,this.format=d,this.internalFormat=null,this.type=g,this.offset=new z$1(0,0),this.repeat=new z$1(1,1),this.center=new z$1(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new nr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=j,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){let i=e===void 0||typeof e=="string";if(!i&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];let s={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(s.userData=this.userData),i||(e.textures[this.uuid]=s),s}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==jM)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ws:e.x=e.x-Math.floor(e.x);break;case Kt:e.x=e.x<0?0:1;break;case HS:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Ws:e.y=e.y-Math.floor(e.y);break;case Kt:e.y=e.y<0?0:1;break;case HS:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}};tr.DEFAULT_IMAGE=null;tr.DEFAULT_MAPPING=jM;tr.DEFAULT_ANISOTROPY=1;var Ke=class{constructor(e=0,i=0,s=0,a=1){Ke.prototype.isVector4=!0,this.x=e,this.y=i,this.z=s,this.w=a}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,i,s,a){return this.x=e,this.y=i,this.z=s,this.w=a,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,i){switch(e){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;case 3:this.w=i;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,i){return this.x=e.x+i.x,this.y=e.y+i.y,this.z=e.z+i.z,this.w=e.w+i.w,this}addScaledVector(e,i){return this.x+=e.x*i,this.y+=e.y*i,this.z+=e.z*i,this.w+=e.w*i,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,i){return this.x=e.x-i.x,this.y=e.y-i.y,this.z=e.z-i.z,this.w=e.w-i.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let i=this.x,s=this.y,a=this.z,o=this.w,c=e.elements;return this.x=c[0]*i+c[4]*s+c[8]*a+c[12]*o,this.y=c[1]*i+c[5]*s+c[9]*a+c[13]*o,this.z=c[2]*i+c[6]*s+c[10]*a+c[14]*o,this.w=c[3]*i+c[7]*s+c[11]*a+c[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let i=Math.sqrt(1-e.w*e.w);return i<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/i,this.y=e.y/i,this.z=e.z/i),this}setAxisAngleFromRotationMatrix(e){let i,s,a,o,c=e.elements,d=c[0],g=c[4],b=c[8],j=c[1],_e=c[5],$=c[9],rt=c[2],st=c[6],ut=c[10];if(Math.abs(g-j)<.01&&Math.abs(b-rt)<.01&&Math.abs($-st)<.01){if(Math.abs(g+j)<.1&&Math.abs(b+rt)<.1&&Math.abs($+st)<.1&&Math.abs(d+_e+ut-3)<.1)return this.set(1,0,0,0),this;i=Math.PI;let wt=(d+1)/2,yt=(_e+1)/2,At=(ut+1)/2,Ct=(g+j)/4,Tt=(b+rt)/4,kt=($+st)/4;return wt>yt&&wt>At?wt<.01?(s=0,a=.707106781,o=.707106781):(s=Math.sqrt(wt),a=Ct/s,o=Tt/s):yt>At?yt<.01?(s=.707106781,a=0,o=.707106781):(a=Math.sqrt(yt),s=Ct/a,o=kt/a):At<.01?(s=.707106781,a=.707106781,o=0):(o=Math.sqrt(At),s=Tt/o,a=kt/o),this.set(s,a,o,i),this}let gt=Math.sqrt((st-$)*(st-$)+(b-rt)*(b-rt)+(j-g)*(j-g));return Math.abs(gt)<.001&&(gt=1),this.x=(st-$)/gt,this.y=(b-rt)/gt,this.z=(j-g)/gt,this.w=Math.acos((d+_e+ut-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,i){return this.x=Math.max(e.x,Math.min(i.x,this.x)),this.y=Math.max(e.y,Math.min(i.y,this.y)),this.z=Math.max(e.z,Math.min(i.z,this.z)),this.w=Math.max(e.w,Math.min(i.w,this.w)),this}clampScalar(e,i){return this.x=Math.max(e,Math.min(i,this.x)),this.y=Math.max(e,Math.min(i,this.y)),this.z=Math.max(e,Math.min(i,this.z)),this.w=Math.max(e,Math.min(i,this.w)),this}clampLength(e,i){let s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(e,Math.min(i,s)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,i){return this.x+=(e.x-this.x)*i,this.y+=(e.y-this.y)*i,this.z+=(e.z-this.z)*i,this.w+=(e.w-this.w)*i,this}lerpVectors(e,i,s){return this.x=e.x+(i.x-e.x)*s,this.y=e.y+(i.y-e.y)*s,this.z=e.z+(i.z-e.z)*s,this.w=e.w+(i.w-e.w)*s,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,i=0){return this.x=e[i],this.y=e[i+1],this.z=e[i+2],this.w=e[i+3],this}toArray(e=[],i=0){return e[i]=this.x,e[i+1]=this.y,e[i+2]=this.z,e[i+3]=this.w,e}fromBufferAttribute(e,i){return this.x=e.getX(i),this.y=e.getY(i),this.z=e.getZ(i),this.w=e.getW(i),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},ft=class extends fr$2{constructor(e=1,i=1,s={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=i,this.depth=1,this.scissor=new Ke(0,0,e,i),this.scissorTest=!1,this.viewport=new Ke(0,0,e,i);let a={width:e,height:i,depth:1};this.texture=new tr(a,s.mapping,s.wrapS,s.wrapT,s.magFilter,s.minFilter,s.format,s.type,s.anisotropy,s.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=s.generateMipmaps!==void 0?s.generateMipmaps:!1,this.texture.internalFormat=s.internalFormat!==void 0?s.internalFormat:null,this.texture.minFilter=s.minFilter!==void 0?s.minFilter:tt,this.depthBuffer=s.depthBuffer!==void 0?s.depthBuffer:!0,this.stencilBuffer=s.stencilBuffer!==void 0?s.stencilBuffer:!1,this.depthTexture=s.depthTexture!==void 0?s.depthTexture:null,this.samples=s.samples!==void 0?s.samples:0}setSize(e,i,s=1){(this.width!==e||this.height!==i||this.depth!==s)&&(this.width=e,this.height=i,this.depth=s,this.texture.image.width=e,this.texture.image.height=i,this.texture.image.depth=s,this.dispose()),this.viewport.set(0,0,e,i),this.scissor.set(0,0,e,i)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;let i=Object.assign({},e.texture.image);return this.texture.source=new vy(i),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},xy=class extends tr{constructor(e=null,i=1,s=1,a=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:i,height:s,depth:a},this.magFilter=Vt,this.minFilter=Vt,this.wrapR=Kt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},by=class extends tr{constructor(e=null,i=1,s=1,a=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:i,height:s,depth:a},this.magFilter=Vt,this.minFilter=Vt,this.wrapR=Kt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},Sy=class extends ft{constructor(e=1,i=1,s=1,a={}){super(e,i,a),this.isWebGLMultipleRenderTargets=!0;let o=this.texture;this.texture=[];for(let c=0;c<s;c++)this.texture[c]=o.clone(),this.texture[c].isRenderTargetTexture=!0}setSize(e,i,s=1){if(this.width!==e||this.height!==i||this.depth!==s){this.width=e,this.height=i,this.depth=s;for(let a=0,o=this.texture.length;a<o;a++)this.texture[a].image.width=e,this.texture[a].image.height=i,this.texture[a].image.depth=s;this.dispose()}return this.viewport.set(0,0,e,i),this.scissor.set(0,0,e,i),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let i=0,s=e.texture.length;i<s;i++)this.texture[i]=e.texture[i].clone(),this.texture[i].isRenderTargetTexture=!0;return this}},Qe=class{constructor(e=0,i=0,s=0,a=1){this.isQuaternion=!0,this._x=e,this._y=i,this._z=s,this._w=a}static slerpFlat(e,i,s,a,o,c,d){let g=s[a+0],b=s[a+1],j=s[a+2],_e=s[a+3],$=o[c+0],rt=o[c+1],st=o[c+2],ut=o[c+3];if(d===0){e[i+0]=g,e[i+1]=b,e[i+2]=j,e[i+3]=_e;return}if(d===1){e[i+0]=$,e[i+1]=rt,e[i+2]=st,e[i+3]=ut;return}if(_e!==ut||g!==$||b!==rt||j!==st){let gt=1-d,wt=g*$+b*rt+j*st+_e*ut,yt=wt>=0?1:-1,At=1-wt*wt;if(At>Number.EPSILON){let Tt=Math.sqrt(At),kt=Math.atan2(Tt,wt*yt);gt=Math.sin(gt*kt)/Tt,d=Math.sin(d*kt)/Tt}let Ct=d*yt;if(g=g*gt+$*Ct,b=b*gt+rt*Ct,j=j*gt+st*Ct,_e=_e*gt+ut*Ct,gt===1-d){let Tt=1/Math.sqrt(g*g+b*b+j*j+_e*_e);g*=Tt,b*=Tt,j*=Tt,_e*=Tt}}e[i]=g,e[i+1]=b,e[i+2]=j,e[i+3]=_e}static multiplyQuaternionsFlat(e,i,s,a,o,c){let d=s[a],g=s[a+1],b=s[a+2],j=s[a+3],_e=o[c],$=o[c+1],rt=o[c+2],st=o[c+3];return e[i]=d*st+j*_e+g*rt-b*$,e[i+1]=g*st+j*$+b*_e-d*rt,e[i+2]=b*st+j*rt+d*$-g*_e,e[i+3]=j*st-d*_e-g*$-b*rt,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,i,s,a){return this._x=e,this._y=i,this._z=s,this._w=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,i){let s=e._x,a=e._y,o=e._z,c=e._order,d=Math.cos,g=Math.sin,b=d(s/2),j=d(a/2),_e=d(o/2),$=g(s/2),rt=g(a/2),st=g(o/2);switch(c){case"XYZ":this._x=$*j*_e+b*rt*st,this._y=b*rt*_e-$*j*st,this._z=b*j*st+$*rt*_e,this._w=b*j*_e-$*rt*st;break;case"YXZ":this._x=$*j*_e+b*rt*st,this._y=b*rt*_e-$*j*st,this._z=b*j*st-$*rt*_e,this._w=b*j*_e+$*rt*st;break;case"ZXY":this._x=$*j*_e-b*rt*st,this._y=b*rt*_e+$*j*st,this._z=b*j*st+$*rt*_e,this._w=b*j*_e-$*rt*st;break;case"ZYX":this._x=$*j*_e-b*rt*st,this._y=b*rt*_e+$*j*st,this._z=b*j*st-$*rt*_e,this._w=b*j*_e+$*rt*st;break;case"YZX":this._x=$*j*_e+b*rt*st,this._y=b*rt*_e+$*j*st,this._z=b*j*st-$*rt*_e,this._w=b*j*_e-$*rt*st;break;case"XZY":this._x=$*j*_e-b*rt*st,this._y=b*rt*_e-$*j*st,this._z=b*j*st+$*rt*_e,this._w=b*j*_e+$*rt*st;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+c)}return i!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,i){let s=i/2,a=Math.sin(s);return this._x=e.x*a,this._y=e.y*a,this._z=e.z*a,this._w=Math.cos(s),this._onChangeCallback(),this}setFromRotationMatrix(e){let i=e.elements,s=i[0],a=i[4],o=i[8],c=i[1],d=i[5],g=i[9],b=i[2],j=i[6],_e=i[10],$=s+d+_e;if($>0){let rt=.5/Math.sqrt($+1);this._w=.25/rt,this._x=(j-g)*rt,this._y=(o-b)*rt,this._z=(c-a)*rt}else if(s>d&&s>_e){let rt=2*Math.sqrt(1+s-d-_e);this._w=(j-g)/rt,this._x=.25*rt,this._y=(a+c)/rt,this._z=(o+b)/rt}else if(d>_e){let rt=2*Math.sqrt(1+d-s-_e);this._w=(o-b)/rt,this._x=(a+c)/rt,this._y=.25*rt,this._z=(g+j)/rt}else{let rt=2*Math.sqrt(1+_e-s-d);this._w=(c-a)/rt,this._x=(o+b)/rt,this._y=(g+j)/rt,this._z=.25*rt}return this._onChangeCallback(),this}setFromUnitVectors(e,i){let s=e.dot(i)+1;return s<Number.EPSILON?(s=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=s):(this._x=0,this._y=-e.z,this._z=e.y,this._w=s)):(this._x=e.y*i.z-e.z*i.y,this._y=e.z*i.x-e.x*i.z,this._z=e.x*i.y-e.y*i.x,this._w=s),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(gi(this.dot(e),-1,1)))}rotateTowards(e,i){let s=this.angleTo(e);if(s===0)return this;let a=Math.min(1,i/s);return this.slerp(e,a),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,i){let s=e._x,a=e._y,o=e._z,c=e._w,d=i._x,g=i._y,b=i._z,j=i._w;return this._x=s*j+c*d+a*b-o*g,this._y=a*j+c*g+o*d-s*b,this._z=o*j+c*b+s*g-a*d,this._w=c*j-s*d-a*g-o*b,this._onChangeCallback(),this}slerp(e,i){if(i===0)return this;if(i===1)return this.copy(e);let s=this._x,a=this._y,o=this._z,c=this._w,d=c*e._w+s*e._x+a*e._y+o*e._z;if(d<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,d=-d):this.copy(e),d>=1)return this._w=c,this._x=s,this._y=a,this._z=o,this;let g=1-d*d;if(g<=Number.EPSILON){let rt=1-i;return this._w=rt*c+i*this._w,this._x=rt*s+i*this._x,this._y=rt*a+i*this._y,this._z=rt*o+i*this._z,this.normalize(),this._onChangeCallback(),this}let b=Math.sqrt(g),j=Math.atan2(b,d),_e=Math.sin((1-i)*j)/b,$=Math.sin(i*j)/b;return this._w=c*_e+this._w*$,this._x=s*_e+this._x*$,this._y=a*_e+this._y*$,this._z=o*_e+this._z*$,this._onChangeCallback(),this}slerpQuaternions(e,i,s){return this.copy(e).slerp(i,s)}random(){let e=Math.random(),i=Math.sqrt(1-e),s=Math.sqrt(e),a=2*Math.PI*Math.random(),o=2*Math.PI*Math.random();return this.set(i*Math.cos(a),s*Math.sin(o),s*Math.cos(o),i*Math.sin(a))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,i=0){return this._x=e[i],this._y=e[i+1],this._z=e[i+2],this._w=e[i+3],this._onChangeCallback(),this}toArray(e=[],i=0){return e[i]=this._x,e[i+1]=this._y,e[i+2]=this._z,e[i+3]=this._w,e}fromBufferAttribute(e,i){return this._x=e.getX(i),this._y=e.getY(i),this._z=e.getZ(i),this._w=e.getW(i),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},_=class{constructor(e=0,i=0,s=0){_.prototype.isVector3=!0,this.x=e,this.y=i,this.z=s}set(e,i,s){return s===void 0&&(s=this.z),this.x=e,this.y=i,this.z=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,i){switch(e){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,i){return this.x=e.x+i.x,this.y=e.y+i.y,this.z=e.z+i.z,this}addScaledVector(e,i){return this.x+=e.x*i,this.y+=e.y*i,this.z+=e.z*i,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,i){return this.x=e.x-i.x,this.y=e.y-i.y,this.z=e.z-i.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,i){return this.x=e.x*i.x,this.y=e.y*i.y,this.z=e.z*i.z,this}applyEuler(e){return this.applyQuaternion(zT.setFromEuler(e))}applyAxisAngle(e,i){return this.applyQuaternion(zT.setFromAxisAngle(e,i))}applyMatrix3(e){let i=this.x,s=this.y,a=this.z,o=e.elements;return this.x=o[0]*i+o[3]*s+o[6]*a,this.y=o[1]*i+o[4]*s+o[7]*a,this.z=o[2]*i+o[5]*s+o[8]*a,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let i=this.x,s=this.y,a=this.z,o=e.elements,c=1/(o[3]*i+o[7]*s+o[11]*a+o[15]);return this.x=(o[0]*i+o[4]*s+o[8]*a+o[12])*c,this.y=(o[1]*i+o[5]*s+o[9]*a+o[13])*c,this.z=(o[2]*i+o[6]*s+o[10]*a+o[14])*c,this}applyQuaternion(e){let i=this.x,s=this.y,a=this.z,o=e.x,c=e.y,d=e.z,g=e.w,b=g*i+c*a-d*s,j=g*s+d*i-o*a,_e=g*a+o*s-c*i,$=-o*i-c*s-d*a;return this.x=b*g+$*-o+j*-d-_e*-c,this.y=j*g+$*-c+_e*-o-b*-d,this.z=_e*g+$*-d+b*-c-j*-o,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let i=this.x,s=this.y,a=this.z,o=e.elements;return this.x=o[0]*i+o[4]*s+o[8]*a,this.y=o[1]*i+o[5]*s+o[9]*a,this.z=o[2]*i+o[6]*s+o[10]*a,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,i){return this.x=Math.max(e.x,Math.min(i.x,this.x)),this.y=Math.max(e.y,Math.min(i.y,this.y)),this.z=Math.max(e.z,Math.min(i.z,this.z)),this}clampScalar(e,i){return this.x=Math.max(e,Math.min(i,this.x)),this.y=Math.max(e,Math.min(i,this.y)),this.z=Math.max(e,Math.min(i,this.z)),this}clampLength(e,i){let s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(e,Math.min(i,s)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,i){return this.x+=(e.x-this.x)*i,this.y+=(e.y-this.y)*i,this.z+=(e.z-this.z)*i,this}lerpVectors(e,i,s){return this.x=e.x+(i.x-e.x)*s,this.y=e.y+(i.y-e.y)*s,this.z=e.z+(i.z-e.z)*s,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,i){let s=e.x,a=e.y,o=e.z,c=i.x,d=i.y,g=i.z;return this.x=a*g-o*d,this.y=o*c-s*g,this.z=s*d-a*c,this}projectOnVector(e){let i=e.lengthSq();if(i===0)return this.set(0,0,0);let s=e.dot(this)/i;return this.copy(e).multiplyScalar(s)}projectOnPlane(e){return gS.copy(this).projectOnVector(e),this.sub(gS)}reflect(e){return this.sub(gS.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let i=Math.sqrt(this.lengthSq()*e.lengthSq());if(i===0)return Math.PI/2;let s=this.dot(e)/i;return Math.acos(gi(s,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let i=this.x-e.x,s=this.y-e.y,a=this.z-e.z;return i*i+s*s+a*a}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,i,s){let a=Math.sin(i)*e;return this.x=a*Math.sin(s),this.y=Math.cos(i)*e,this.z=a*Math.cos(s),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,i,s){return this.x=e*Math.sin(i),this.y=s,this.z=e*Math.cos(i),this}setFromMatrixPosition(e){let i=e.elements;return this.x=i[12],this.y=i[13],this.z=i[14],this}setFromMatrixScale(e){let i=this.setFromMatrixColumn(e,0).length(),s=this.setFromMatrixColumn(e,1).length(),a=this.setFromMatrixColumn(e,2).length();return this.x=i,this.y=s,this.z=a,this}setFromMatrixColumn(e,i){return this.fromArray(e.elements,i*4)}setFromMatrix3Column(e,i){return this.fromArray(e.elements,i*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,i=0){return this.x=e[i],this.y=e[i+1],this.z=e[i+2],this}toArray(e=[],i=0){return e[i]=this.x,e[i+1]=this.y,e[i+2]=this.z,e}fromBufferAttribute(e,i){return this.x=e.getX(i),this.y=e.getY(i),this.z=e.getZ(i),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=(Math.random()-.5)*2,i=Math.random()*Math.PI*2,s=Math.sqrt(1-e**2);return this.x=s*Math.cos(i),this.y=s*Math.sin(i),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},gS=new _,zT=new Qe,Wt=class{constructor(e=new _(1/0,1/0,1/0),i=new _(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=i}set(e,i){return this.min.copy(e),this.max.copy(i),this}setFromArray(e){let i=1/0,s=1/0,a=1/0,o=-1/0,c=-1/0,d=-1/0;for(let g=0,b=e.length;g<b;g+=3){let j=e[g],_e=e[g+1],$=e[g+2];j<i&&(i=j),_e<s&&(s=_e),$<a&&(a=$),j>o&&(o=j),_e>c&&(c=_e),$>d&&(d=$)}return this.min.set(i,s,a),this.max.set(o,c,d),this}setFromBufferAttribute(e){let i=1/0,s=1/0,a=1/0,o=-1/0,c=-1/0,d=-1/0;for(let g=0,b=e.count;g<b;g++){let j=e.getX(g),_e=e.getY(g),$=e.getZ(g);j<i&&(i=j),_e<s&&(s=_e),$<a&&(a=$),j>o&&(o=j),_e>c&&(c=_e),$>d&&(d=$)}return this.min.set(i,s,a),this.max.set(o,c,d),this}setFromPoints(e){this.makeEmpty();for(let i=0,s=e.length;i<s;i++)this.expandByPoint(e[i]);return this}setFromCenterAndSize(e,i){let s=fc.copy(i).multiplyScalar(.5);return this.min.copy(e).sub(s),this.max.copy(e).add(s),this}setFromObject(e,i=!1){return this.makeEmpty(),this.expandByObject(e,i)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,i=!1){e.updateWorldMatrix(!1,!1);let s=e.geometry;if(s!==void 0)if(i&&s.attributes!=null&&s.attributes.position!==void 0){let o=s.attributes.position;for(let c=0,d=o.count;c<d;c++)fc.fromBufferAttribute(o,c).applyMatrix4(e.matrixWorld),this.expandByPoint(fc)}else s.boundingBox===null&&s.computeBoundingBox(),yS.copy(s.boundingBox),yS.applyMatrix4(e.matrixWorld),this.union(yS);let a=e.children;for(let o=0,c=a.length;o<c;o++)this.expandByObject(a[o],i);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,i){return i.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,fc),fc.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let i,s;return e.normal.x>0?(i=e.normal.x*this.min.x,s=e.normal.x*this.max.x):(i=e.normal.x*this.max.x,s=e.normal.x*this.min.x),e.normal.y>0?(i+=e.normal.y*this.min.y,s+=e.normal.y*this.max.y):(i+=e.normal.y*this.max.y,s+=e.normal.y*this.min.y),e.normal.z>0?(i+=e.normal.z*this.min.z,s+=e.normal.z*this.max.z):(i+=e.normal.z*this.max.z,s+=e.normal.z*this.min.z),i<=-e.constant&&s>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(op$2),Ug.subVectors(this.max,op$2),_u.subVectors(e.a,op$2),Eu.subVectors(e.b,op$2),Tu.subVectors(e.c,op$2),el.subVectors(Eu,_u),tl.subVectors(Tu,Eu),pc.subVectors(_u,Tu);let i=[0,-el.z,el.y,0,-tl.z,tl.y,0,-pc.z,pc.y,el.z,0,-el.x,tl.z,0,-tl.x,pc.z,0,-pc.x,-el.y,el.x,0,-tl.y,tl.x,0,-pc.y,pc.x,0];return!vS(i,_u,Eu,Tu,Ug)||(i=[1,0,0,0,1,0,0,0,1],!vS(i,_u,Eu,Tu,Ug))?!1:(Gg.crossVectors(el,tl),i=[Gg.x,Gg.y,Gg.z],vS(i,_u,Eu,Tu,Ug))}clampPoint(e,i){return i.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return fc.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(fc).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(ua[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ua[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ua[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ua[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ua[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ua[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ua[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ua[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ua),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},ua=[new _,new _,new _,new _,new _,new _,new _,new _],fc=new _,yS=new Wt,_u=new _,Eu=new _,Tu=new _,el=new _,tl=new _,pc=new _,op$2=new _,Ug=new _,Gg=new _,mc=new _;function vS(e,i,s,a,o){for(let c=0,d=e.length-3;c<=d;c+=3){mc.fromArray(e,c);let g=o.x*Math.abs(mc.x)+o.y*Math.abs(mc.y)+o.z*Math.abs(mc.z),b=i.dot(mc),j=s.dot(mc),_e=a.dot(mc);if(Math.max(-Math.max(b,j,_e),Math.min(b,j,_e))>g)return!1}return!0}var fk=new Wt,ap=new _,xS=new _,Br=class{constructor(e=new _,i=-1){this.center=e,this.radius=i}set(e,i){return this.center.copy(e),this.radius=i,this}setFromPoints(e,i){let s=this.center;i!==void 0?s.copy(i):fk.setFromPoints(e).getCenter(s);let a=0;for(let o=0,c=e.length;o<c;o++)a=Math.max(a,s.distanceToSquared(e[o]));return this.radius=Math.sqrt(a),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let i=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=i*i}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,i){let s=this.center.distanceToSquared(e);return i.copy(e),s>this.radius*this.radius&&(i.sub(this.center).normalize(),i.multiplyScalar(this.radius).add(this.center)),i}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;ap.subVectors(e,this.center);let i=ap.lengthSq();if(i>this.radius*this.radius){let s=Math.sqrt(i),a=(s-this.radius)*.5;this.center.addScaledVector(ap,a/s),this.radius+=a}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(xS.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(ap.copy(e.center).add(xS)),this.expandByPoint(ap.copy(e.center).sub(xS))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}},ha=new _,bS=new _,jg=new _,rl=new _,SS=new _,Hg=new _,wS=new _,qs=class{constructor(e=new _,i=new _(0,0,-1)){this.origin=e,this.direction=i}set(e,i){return this.origin.copy(e),this.direction.copy(i),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,i){return i.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ha)),this}closestPointToPoint(e,i){i.subVectors(e,this.origin);let s=i.dot(this.direction);return s<0?i.copy(this.origin):i.copy(this.direction).multiplyScalar(s).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let i=ha.subVectors(e,this.origin).dot(this.direction);return i<0?this.origin.distanceToSquared(e):(ha.copy(this.direction).multiplyScalar(i).add(this.origin),ha.distanceToSquared(e))}distanceSqToSegment(e,i,s,a){bS.copy(e).add(i).multiplyScalar(.5),jg.copy(i).sub(e).normalize(),rl.copy(this.origin).sub(bS);let o=e.distanceTo(i)*.5,c=-this.direction.dot(jg),d=rl.dot(this.direction),g=-rl.dot(jg),b=rl.lengthSq(),j=Math.abs(1-c*c),_e,$,rt,st;if(j>0)if(_e=c*g-d,$=c*d-g,st=o*j,_e>=0)if($>=-st)if($<=st){let ut=1/j;_e*=ut,$*=ut,rt=_e*(_e+c*$+2*d)+$*(c*_e+$+2*g)+b}else $=o,_e=Math.max(0,-(c*$+d)),rt=-_e*_e+$*($+2*g)+b;else $=-o,_e=Math.max(0,-(c*$+d)),rt=-_e*_e+$*($+2*g)+b;else $<=-st?(_e=Math.max(0,-(-c*o+d)),$=_e>0?-o:Math.min(Math.max(-o,-g),o),rt=-_e*_e+$*($+2*g)+b):$<=st?(_e=0,$=Math.min(Math.max(-o,-g),o),rt=$*($+2*g)+b):(_e=Math.max(0,-(c*o+d)),$=_e>0?o:Math.min(Math.max(-o,-g),o),rt=-_e*_e+$*($+2*g)+b);else $=c>0?-o:o,_e=Math.max(0,-(c*$+d)),rt=-_e*_e+$*($+2*g)+b;return s&&s.copy(this.direction).multiplyScalar(_e).add(this.origin),a&&a.copy(jg).multiplyScalar($).add(bS),rt}intersectSphere(e,i){ha.subVectors(e.center,this.origin);let s=ha.dot(this.direction),a=ha.dot(ha)-s*s,o=e.radius*e.radius;if(a>o)return null;let c=Math.sqrt(o-a),d=s-c,g=s+c;return d<0&&g<0?null:d<0?this.at(g,i):this.at(d,i)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let i=e.normal.dot(this.direction);if(i===0)return e.distanceToPoint(this.origin)===0?0:null;let s=-(this.origin.dot(e.normal)+e.constant)/i;return s>=0?s:null}intersectPlane(e,i){let s=this.distanceToPlane(e);return s===null?null:this.at(s,i)}intersectsPlane(e){let i=e.distanceToPoint(this.origin);return i===0||e.normal.dot(this.direction)*i<0}intersectBox(e,i){let s,a,o,c,d,g,b=1/this.direction.x,j=1/this.direction.y,_e=1/this.direction.z,$=this.origin;return b>=0?(s=(e.min.x-$.x)*b,a=(e.max.x-$.x)*b):(s=(e.max.x-$.x)*b,a=(e.min.x-$.x)*b),j>=0?(o=(e.min.y-$.y)*j,c=(e.max.y-$.y)*j):(o=(e.max.y-$.y)*j,c=(e.min.y-$.y)*j),s>c||o>a||((o>s||isNaN(s))&&(s=o),(c<a||isNaN(a))&&(a=c),_e>=0?(d=(e.min.z-$.z)*_e,g=(e.max.z-$.z)*_e):(d=(e.max.z-$.z)*_e,g=(e.min.z-$.z)*_e),s>g||d>a)||((d>s||s!==s)&&(s=d),(g<a||a!==a)&&(a=g),a<0)?null:this.at(s>=0?s:a,i)}intersectsBox(e){return this.intersectBox(e,ha)!==null}intersectTriangle(e,i,s,a,o){SS.subVectors(i,e),Hg.subVectors(s,e),wS.crossVectors(SS,Hg);let c=this.direction.dot(wS),d;if(c>0){if(a)return null;d=1}else if(c<0)d=-1,c=-c;else return null;rl.subVectors(this.origin,e);let g=d*this.direction.dot(Hg.crossVectors(rl,Hg));if(g<0)return null;let b=d*this.direction.dot(SS.cross(rl));if(b<0||g+b>c)return null;let j=-d*rl.dot(wS);return j<0?null:this.at(j/c,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},ce$1=class{constructor(){ce$1.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(i,s,a,o,c,d,g,b,j,_e,$,rt,st,ut,gt,wt){let yt=this.elements;return yt[0]=i,yt[4]=s,yt[8]=a,yt[12]=o,yt[1]=c,yt[5]=d,yt[9]=g,yt[13]=b,yt[2]=j,yt[6]=_e,yt[10]=$,yt[14]=rt,yt[3]=st,yt[7]=ut,yt[11]=gt,yt[15]=wt,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new ce$1().fromArray(this.elements)}copy(i){let s=this.elements,a=i.elements;return s[0]=a[0],s[1]=a[1],s[2]=a[2],s[3]=a[3],s[4]=a[4],s[5]=a[5],s[6]=a[6],s[7]=a[7],s[8]=a[8],s[9]=a[9],s[10]=a[10],s[11]=a[11],s[12]=a[12],s[13]=a[13],s[14]=a[14],s[15]=a[15],this}copyPosition(i){let s=this.elements,a=i.elements;return s[12]=a[12],s[13]=a[13],s[14]=a[14],this}setFromMatrix3(i){let s=i.elements;return this.set(s[0],s[3],s[6],0,s[1],s[4],s[7],0,s[2],s[5],s[8],0,0,0,0,1),this}extractBasis(i,s,a){return i.setFromMatrixColumn(this,0),s.setFromMatrixColumn(this,1),a.setFromMatrixColumn(this,2),this}makeBasis(i,s,a){return this.set(i.x,s.x,a.x,0,i.y,s.y,a.y,0,i.z,s.z,a.z,0,0,0,0,1),this}extractRotation(i){let s=this.elements,a=i.elements,o=1/Mu.setFromMatrixColumn(i,0).length(),c=1/Mu.setFromMatrixColumn(i,1).length(),d=1/Mu.setFromMatrixColumn(i,2).length();return s[0]=a[0]*o,s[1]=a[1]*o,s[2]=a[2]*o,s[3]=0,s[4]=a[4]*c,s[5]=a[5]*c,s[6]=a[6]*c,s[7]=0,s[8]=a[8]*d,s[9]=a[9]*d,s[10]=a[10]*d,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,this}makeRotationFromEuler(i){let s=this.elements,a=i.x,o=i.y,c=i.z,d=Math.cos(a),g=Math.sin(a),b=Math.cos(o),j=Math.sin(o),_e=Math.cos(c),$=Math.sin(c);if(i.order==="XYZ"){let rt=d*_e,st=d*$,ut=g*_e,gt=g*$;s[0]=b*_e,s[4]=-b*$,s[8]=j,s[1]=st+ut*j,s[5]=rt-gt*j,s[9]=-g*b,s[2]=gt-rt*j,s[6]=ut+st*j,s[10]=d*b}else if(i.order==="YXZ"){let rt=b*_e,st=b*$,ut=j*_e,gt=j*$;s[0]=rt+gt*g,s[4]=ut*g-st,s[8]=d*j,s[1]=d*$,s[5]=d*_e,s[9]=-g,s[2]=st*g-ut,s[6]=gt+rt*g,s[10]=d*b}else if(i.order==="ZXY"){let rt=b*_e,st=b*$,ut=j*_e,gt=j*$;s[0]=rt-gt*g,s[4]=-d*$,s[8]=ut+st*g,s[1]=st+ut*g,s[5]=d*_e,s[9]=gt-rt*g,s[2]=-d*j,s[6]=g,s[10]=d*b}else if(i.order==="ZYX"){let rt=d*_e,st=d*$,ut=g*_e,gt=g*$;s[0]=b*_e,s[4]=ut*j-st,s[8]=rt*j+gt,s[1]=b*$,s[5]=gt*j+rt,s[9]=st*j-ut,s[2]=-j,s[6]=g*b,s[10]=d*b}else if(i.order==="YZX"){let rt=d*b,st=d*j,ut=g*b,gt=g*j;s[0]=b*_e,s[4]=gt-rt*$,s[8]=ut*$+st,s[1]=$,s[5]=d*_e,s[9]=-g*_e,s[2]=-j*_e,s[6]=st*$+ut,s[10]=rt-gt*$}else if(i.order==="XZY"){let rt=d*b,st=d*j,ut=g*b,gt=g*j;s[0]=b*_e,s[4]=-$,s[8]=j*_e,s[1]=rt*$+gt,s[5]=d*_e,s[9]=st*$-ut,s[2]=ut*$-st,s[6]=g*_e,s[10]=gt*$+rt}return s[3]=0,s[7]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,this}makeRotationFromQuaternion(i){return this.compose(pk,i,mk)}lookAt(i,s,a){let o=this.elements;return Jn.subVectors(i,s),Jn.lengthSq()===0&&(Jn.z=1),Jn.normalize(),il.crossVectors(a,Jn),il.lengthSq()===0&&(Math.abs(a.z)===1?Jn.x+=1e-4:Jn.z+=1e-4,Jn.normalize(),il.crossVectors(a,Jn)),il.normalize(),Wg.crossVectors(Jn,il),o[0]=il.x,o[4]=Wg.x,o[8]=Jn.x,o[1]=il.y,o[5]=Wg.y,o[9]=Jn.y,o[2]=il.z,o[6]=Wg.z,o[10]=Jn.z,this}multiply(i){return this.multiplyMatrices(this,i)}premultiply(i){return this.multiplyMatrices(i,this)}multiplyMatrices(i,s){let a=i.elements,o=s.elements,c=this.elements,d=a[0],g=a[4],b=a[8],j=a[12],_e=a[1],$=a[5],rt=a[9],st=a[13],ut=a[2],gt=a[6],wt=a[10],yt=a[14],At=a[3],Ct=a[7],Tt=a[11],kt=a[15],Pt=o[0],It=o[4],Lt=o[8],Nt=o[12],Ht=o[1],dr=o[5],hs=o[9],_s=o[13],ds=o[2],Nn=o[6],us=o[10],hn=o[14],Ft=o[3],Gr=o[7],gn=o[11],un=o[15];return c[0]=d*Pt+g*Ht+b*ds+j*Ft,c[4]=d*It+g*dr+b*Nn+j*Gr,c[8]=d*Lt+g*hs+b*us+j*gn,c[12]=d*Nt+g*_s+b*hn+j*un,c[1]=_e*Pt+$*Ht+rt*ds+st*Ft,c[5]=_e*It+$*dr+rt*Nn+st*Gr,c[9]=_e*Lt+$*hs+rt*us+st*gn,c[13]=_e*Nt+$*_s+rt*hn+st*un,c[2]=ut*Pt+gt*Ht+wt*ds+yt*Ft,c[6]=ut*It+gt*dr+wt*Nn+yt*Gr,c[10]=ut*Lt+gt*hs+wt*us+yt*gn,c[14]=ut*Nt+gt*_s+wt*hn+yt*un,c[3]=At*Pt+Ct*Ht+Tt*ds+kt*Ft,c[7]=At*It+Ct*dr+Tt*Nn+kt*Gr,c[11]=At*Lt+Ct*hs+Tt*us+kt*gn,c[15]=At*Nt+Ct*_s+Tt*hn+kt*un,this}multiplyScalar(i){let s=this.elements;return s[0]*=i,s[4]*=i,s[8]*=i,s[12]*=i,s[1]*=i,s[5]*=i,s[9]*=i,s[13]*=i,s[2]*=i,s[6]*=i,s[10]*=i,s[14]*=i,s[3]*=i,s[7]*=i,s[11]*=i,s[15]*=i,this}determinant(){let i=this.elements,s=i[0],a=i[4],o=i[8],c=i[12],d=i[1],g=i[5],b=i[9],j=i[13],_e=i[2],$=i[6],rt=i[10],st=i[14],ut=i[3],gt=i[7],wt=i[11],yt=i[15];return ut*(+c*b*$-o*j*$-c*g*rt+a*j*rt+o*g*st-a*b*st)+gt*(+s*b*st-s*j*rt+c*d*rt-o*d*st+o*j*_e-c*b*_e)+wt*(+s*j*$-s*g*st-c*d*$+a*d*st+c*g*_e-a*j*_e)+yt*(-o*g*_e-s*b*$+s*g*rt+o*d*$-a*d*rt+a*b*_e)}transpose(){let i=this.elements,s;return s=i[1],i[1]=i[4],i[4]=s,s=i[2],i[2]=i[8],i[8]=s,s=i[6],i[6]=i[9],i[9]=s,s=i[3],i[3]=i[12],i[12]=s,s=i[7],i[7]=i[13],i[13]=s,s=i[11],i[11]=i[14],i[14]=s,this}setPosition(i,s,a){let o=this.elements;return i.isVector3?(o[12]=i.x,o[13]=i.y,o[14]=i.z):(o[12]=i,o[13]=s,o[14]=a),this}invert(){let i=this.elements,s=i[0],a=i[1],o=i[2],c=i[3],d=i[4],g=i[5],b=i[6],j=i[7],_e=i[8],$=i[9],rt=i[10],st=i[11],ut=i[12],gt=i[13],wt=i[14],yt=i[15],At=$*wt*j-gt*rt*j+gt*b*st-g*wt*st-$*b*yt+g*rt*yt,Ct=ut*rt*j-_e*wt*j-ut*b*st+d*wt*st+_e*b*yt-d*rt*yt,Tt=_e*gt*j-ut*$*j+ut*g*st-d*gt*st-_e*g*yt+d*$*yt,kt=ut*$*b-_e*gt*b-ut*g*rt+d*gt*rt+_e*g*wt-d*$*wt,Pt=s*At+a*Ct+o*Tt+c*kt;if(Pt===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let It=1/Pt;return i[0]=At*It,i[1]=(gt*rt*c-$*wt*c-gt*o*st+a*wt*st+$*o*yt-a*rt*yt)*It,i[2]=(g*wt*c-gt*b*c+gt*o*j-a*wt*j-g*o*yt+a*b*yt)*It,i[3]=($*b*c-g*rt*c-$*o*j+a*rt*j+g*o*st-a*b*st)*It,i[4]=Ct*It,i[5]=(_e*wt*c-ut*rt*c+ut*o*st-s*wt*st-_e*o*yt+s*rt*yt)*It,i[6]=(ut*b*c-d*wt*c-ut*o*j+s*wt*j+d*o*yt-s*b*yt)*It,i[7]=(d*rt*c-_e*b*c+_e*o*j-s*rt*j-d*o*st+s*b*st)*It,i[8]=Tt*It,i[9]=(ut*$*c-_e*gt*c-ut*a*st+s*gt*st+_e*a*yt-s*$*yt)*It,i[10]=(d*gt*c-ut*g*c+ut*a*j-s*gt*j-d*a*yt+s*g*yt)*It,i[11]=(_e*g*c-d*$*c-_e*a*j+s*$*j+d*a*st-s*g*st)*It,i[12]=kt*It,i[13]=(_e*gt*o-ut*$*o+ut*a*rt-s*gt*rt-_e*a*wt+s*$*wt)*It,i[14]=(ut*g*o-d*gt*o-ut*a*b+s*gt*b+d*a*wt-s*g*wt)*It,i[15]=(d*$*o-_e*g*o+_e*a*b-s*$*b-d*a*rt+s*g*rt)*It,this}scale(i){let s=this.elements,a=i.x,o=i.y,c=i.z;return s[0]*=a,s[4]*=o,s[8]*=c,s[1]*=a,s[5]*=o,s[9]*=c,s[2]*=a,s[6]*=o,s[10]*=c,s[3]*=a,s[7]*=o,s[11]*=c,this}getMaxScaleOnAxis(){let i=this.elements,s=i[0]*i[0]+i[1]*i[1]+i[2]*i[2],a=i[4]*i[4]+i[5]*i[5]+i[6]*i[6],o=i[8]*i[8]+i[9]*i[9]+i[10]*i[10];return Math.sqrt(Math.max(s,a,o))}makeTranslation(i,s,a){return this.set(1,0,0,i,0,1,0,s,0,0,1,a,0,0,0,1),this}makeRotationX(i){let s=Math.cos(i),a=Math.sin(i);return this.set(1,0,0,0,0,s,-a,0,0,a,s,0,0,0,0,1),this}makeRotationY(i){let s=Math.cos(i),a=Math.sin(i);return this.set(s,0,a,0,0,1,0,0,-a,0,s,0,0,0,0,1),this}makeRotationZ(i){let s=Math.cos(i),a=Math.sin(i);return this.set(s,-a,0,0,a,s,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(i,s){let a=Math.cos(s),o=Math.sin(s),c=1-a,d=i.x,g=i.y,b=i.z,j=c*d,_e=c*g;return this.set(j*d+a,j*g-o*b,j*b+o*g,0,j*g+o*b,_e*g+a,_e*b-o*d,0,j*b-o*g,_e*b+o*d,c*b*b+a,0,0,0,0,1),this}makeScale(i,s,a){return this.set(i,0,0,0,0,s,0,0,0,0,a,0,0,0,0,1),this}makeShear(i,s,a,o,c,d){return this.set(1,a,c,0,i,1,d,0,s,o,1,0,0,0,0,1),this}compose(i,s,a){let o=this.elements,c=s._x,d=s._y,g=s._z,b=s._w,j=c+c,_e=d+d,$=g+g,rt=c*j,st=c*_e,ut=c*$,gt=d*_e,wt=d*$,yt=g*$,At=b*j,Ct=b*_e,Tt=b*$,kt=a.x,Pt=a.y,It=a.z;return o[0]=(1-(gt+yt))*kt,o[1]=(st+Tt)*kt,o[2]=(ut-Ct)*kt,o[3]=0,o[4]=(st-Tt)*Pt,o[5]=(1-(rt+yt))*Pt,o[6]=(wt+At)*Pt,o[7]=0,o[8]=(ut+Ct)*It,o[9]=(wt-At)*It,o[10]=(1-(rt+gt))*It,o[11]=0,o[12]=i.x,o[13]=i.y,o[14]=i.z,o[15]=1,this}decompose(i,s,a){let o=this.elements,c=Mu.set(o[0],o[1],o[2]).length(),d=Mu.set(o[4],o[5],o[6]).length(),g=Mu.set(o[8],o[9],o[10]).length();this.determinant()<0&&(c=-c),i.x=o[12],i.y=o[13],i.z=o[14],Us.copy(this);let b=1/c,j=1/d,_e=1/g;return Us.elements[0]*=b,Us.elements[1]*=b,Us.elements[2]*=b,Us.elements[4]*=j,Us.elements[5]*=j,Us.elements[6]*=j,Us.elements[8]*=_e,Us.elements[9]*=_e,Us.elements[10]*=_e,s.setFromRotationMatrix(Us),a.x=c,a.y=d,a.z=g,this}makePerspective(i,s,a,o,c,d){let g=this.elements,b=2*c/(s-i),j=2*c/(a-o),_e=(s+i)/(s-i),$=(a+o)/(a-o),rt=-(d+c)/(d-c),st=-2*d*c/(d-c);return g[0]=b,g[4]=0,g[8]=_e,g[12]=0,g[1]=0,g[5]=j,g[9]=$,g[13]=0,g[2]=0,g[6]=0,g[10]=rt,g[14]=st,g[3]=0,g[7]=0,g[11]=-1,g[15]=0,this}makeOrthographic(i,s,a,o,c,d){let g=this.elements,b=1/(s-i),j=1/(a-o),_e=1/(d-c),$=(s+i)*b,rt=(a+o)*j,st=(d+c)*_e;return g[0]=2*b,g[4]=0,g[8]=0,g[12]=-$,g[1]=0,g[5]=2*j,g[9]=0,g[13]=-rt,g[2]=0,g[6]=0,g[10]=-2*_e,g[14]=-st,g[3]=0,g[7]=0,g[11]=0,g[15]=1,this}equals(i){let s=this.elements,a=i.elements;for(let o=0;o<16;o++)if(s[o]!==a[o])return!1;return!0}fromArray(i,s=0){for(let a=0;a<16;a++)this.elements[a]=i[a+s];return this}toArray(i=[],s=0){let a=this.elements;return i[s]=a[0],i[s+1]=a[1],i[s+2]=a[2],i[s+3]=a[3],i[s+4]=a[4],i[s+5]=a[5],i[s+6]=a[6],i[s+7]=a[7],i[s+8]=a[8],i[s+9]=a[9],i[s+10]=a[10],i[s+11]=a[11],i[s+12]=a[12],i[s+13]=a[13],i[s+14]=a[14],i[s+15]=a[15],i}},Mu=new _,Us=new ce$1,pk=new _(0,0,0),mk=new _(1,1,1),il=new _,Wg=new _,Jn=new _,UT=new ce$1,GT=new Qe,or=class{constructor(e=0,i=0,s=0,a=or.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=i,this._z=s,this._order=a}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,i,s,a=this._order){return this._x=e,this._y=i,this._z=s,this._order=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,i=this._order,s=!0){let a=e.elements,o=a[0],c=a[4],d=a[8],g=a[1],b=a[5],j=a[9],_e=a[2],$=a[6],rt=a[10];switch(i){case"XYZ":this._y=Math.asin(gi(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(-j,rt),this._z=Math.atan2(-c,o)):(this._x=Math.atan2($,b),this._z=0);break;case"YXZ":this._x=Math.asin(-gi(j,-1,1)),Math.abs(j)<.9999999?(this._y=Math.atan2(d,rt),this._z=Math.atan2(g,b)):(this._y=Math.atan2(-_e,o),this._z=0);break;case"ZXY":this._x=Math.asin(gi($,-1,1)),Math.abs($)<.9999999?(this._y=Math.atan2(-_e,rt),this._z=Math.atan2(-c,b)):(this._y=0,this._z=Math.atan2(g,o));break;case"ZYX":this._y=Math.asin(-gi(_e,-1,1)),Math.abs(_e)<.9999999?(this._x=Math.atan2($,rt),this._z=Math.atan2(g,o)):(this._x=0,this._z=Math.atan2(-c,b));break;case"YZX":this._z=Math.asin(gi(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(-j,b),this._y=Math.atan2(-_e,o)):(this._x=0,this._y=Math.atan2(d,rt));break;case"XZY":this._z=Math.asin(-gi(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2($,b),this._y=Math.atan2(d,o)):(this._x=Math.atan2(-j,rt),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,s===!0&&this._onChangeCallback(),this}setFromQuaternion(e,i,s){return UT.makeRotationFromQuaternion(e),this.setFromRotationMatrix(UT,i,s)}setFromVector3(e,i=this._order){return this.set(e.x,e.y,e.z,i)}reorder(e){return GT.setFromEuler(this),this.setFromQuaternion(GT,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],i=0){return e[i]=this._x,e[i+1]=this._y,e[i+2]=this._z,e[i+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}};or.DEFAULT_ORDER="XYZ";var Ep=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},gk=0,jT=new _,Cu=new Qe,da=new ce$1,qg=new _,lp=new _,yk=new _,vk=new Qe,HT=new _(1,0,0),WT=new _(0,1,0),qT=new _(0,0,1),xk={type:"added"},YT={type:"removed"},_t=class extends fr$2{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:gk++}),this.uuid=ms(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=_t.DEFAULT_UP.clone();let e=new _,i=new or,s=new Qe,a=new _(1,1,1);function o(){s.setFromEuler(i,!1)}function c(){i.setFromQuaternion(s,void 0,!1)}i._onChange(o),s._onChange(c),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:s},scale:{configurable:!0,enumerable:!0,value:a},modelViewMatrix:{value:new ce$1},normalMatrix:{value:new nr}}),this.matrix=new ce$1,this.matrixWorld=new ce$1,this.matrixAutoUpdate=_t.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=_t.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Ep,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,i){this.quaternion.setFromAxisAngle(e,i)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,i){return Cu.setFromAxisAngle(e,i),this.quaternion.multiply(Cu),this}rotateOnWorldAxis(e,i){return Cu.setFromAxisAngle(e,i),this.quaternion.premultiply(Cu),this}rotateX(e){return this.rotateOnAxis(HT,e)}rotateY(e){return this.rotateOnAxis(WT,e)}rotateZ(e){return this.rotateOnAxis(qT,e)}translateOnAxis(e,i){return jT.copy(e).applyQuaternion(this.quaternion),this.position.add(jT.multiplyScalar(i)),this}translateX(e){return this.translateOnAxis(HT,e)}translateY(e){return this.translateOnAxis(WT,e)}translateZ(e){return this.translateOnAxis(qT,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(da.copy(this.matrixWorld).invert())}lookAt(e,i,s){e.isVector3?qg.copy(e):qg.set(e,i,s);let a=this.parent;this.updateWorldMatrix(!0,!1),lp.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?da.lookAt(lp,qg,this.up):da.lookAt(qg,lp,this.up),this.quaternion.setFromRotationMatrix(da),a&&(da.extractRotation(a.matrixWorld),Cu.setFromRotationMatrix(da),this.quaternion.premultiply(Cu.invert()))}add(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(xk)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let s=0;s<arguments.length;s++)this.remove(arguments[s]);return this}let i=this.children.indexOf(e);return i!==-1&&(e.parent=null,this.children.splice(i,1),e.dispatchEvent(YT)),this}removeFromParent(){let e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){let i=this.children[e];i.parent=null,i.dispatchEvent(YT)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),da.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),da.multiply(e.parent.matrixWorld)),e.applyMatrix4(da),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,i){if(this[e]===i)return this;for(let s=0,a=this.children.length;s<a;s++){let o=this.children[s].getObjectByProperty(e,i);if(o!==void 0)return o}}getObjectsByProperty(e,i){let s=[];this[e]===i&&s.push(this);for(let a=0,o=this.children.length;a<o;a++){let c=this.children[a].getObjectsByProperty(e,i);c.length>0&&(s=s.concat(c))}return s}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(lp,e,yk),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(lp,vk,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let i=this.matrixWorld.elements;return e.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(e){e(this);let i=this.children;for(let s=0,a=i.length;s<a;s++)i[s].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);let i=this.children;for(let s=0,a=i.length;s<a;s++)i[s].traverseVisible(e)}traverseAncestors(e){let i=this.parent;i!==null&&(e(i),i.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);let i=this.children;for(let s=0,a=i.length;s<a;s++){let o=i[s];(o.matrixWorldAutoUpdate===!0||e===!0)&&o.updateMatrixWorld(e)}}updateWorldMatrix(e,i){let s=this.parent;if(e===!0&&s!==null&&s.matrixWorldAutoUpdate===!0&&s.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),i===!0){let a=this.children;for(let o=0,c=a.length;o<c;o++){let d=a[o];d.matrixWorldAutoUpdate===!0&&d.updateWorldMatrix(!1,!0)}}}toJSON(e){let i=e===void 0||typeof e=="string",s={};i&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},s.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});let a={};a.uuid=this.uuid,a.type=this.type,this.name!==""&&(a.name=this.name),this.castShadow===!0&&(a.castShadow=!0),this.receiveShadow===!0&&(a.receiveShadow=!0),this.visible===!1&&(a.visible=!1),this.frustumCulled===!1&&(a.frustumCulled=!1),this.renderOrder!==0&&(a.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(a.userData=this.userData),a.layers=this.layers.mask,a.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(a.matrixAutoUpdate=!1),this.isInstancedMesh&&(a.type="InstancedMesh",a.count=this.count,a.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(a.instanceColor=this.instanceColor.toJSON()));function o(d,g){return d[g.uuid]===void 0&&(d[g.uuid]=g.toJSON(e)),g.uuid}if(this.isScene)this.background&&(this.background.isColor?a.background=this.background.toJSON():this.background.isTexture&&(a.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(a.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){a.geometry=o(e.geometries,this.geometry);let d=this.geometry.parameters;if(d!==void 0&&d.shapes!==void 0){let g=d.shapes;if(Array.isArray(g))for(let b=0,j=g.length;b<j;b++){let _e=g[b];o(e.shapes,_e)}else o(e.shapes,g)}}if(this.isSkinnedMesh&&(a.bindMode=this.bindMode,a.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),a.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let d=[];for(let g=0,b=this.material.length;g<b;g++)d.push(o(e.materials,this.material[g]));a.material=d}else a.material=o(e.materials,this.material);if(this.children.length>0){a.children=[];for(let d=0;d<this.children.length;d++)a.children.push(this.children[d].toJSON(e).object)}if(this.animations.length>0){a.animations=[];for(let d=0;d<this.animations.length;d++){let g=this.animations[d];a.animations.push(o(e.animations,g))}}if(i){let d=c(e.geometries),g=c(e.materials),b=c(e.textures),j=c(e.images),_e=c(e.shapes),$=c(e.skeletons),rt=c(e.animations),st=c(e.nodes);d.length>0&&(s.geometries=d),g.length>0&&(s.materials=g),b.length>0&&(s.textures=b),j.length>0&&(s.images=j),_e.length>0&&(s.shapes=_e),$.length>0&&(s.skeletons=$),rt.length>0&&(s.animations=rt),st.length>0&&(s.nodes=st)}return s.object=a,s;function c(d){let g=[];for(let b in d){let j=d[b];delete j.metadata,g.push(j)}return g}}clone(e){return new this.constructor().copy(this,e)}copy(e,i=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),i===!0)for(let s=0;s<e.children.length;s++){let a=e.children[s];this.add(a.clone())}return this}};_t.DEFAULT_UP=new _(0,1,0);_t.DEFAULT_MATRIX_AUTO_UPDATE=!0;_t.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;var Gs=new _,fa=new _,AS=new _,pa=new _,Pu=new _,Du=new _,XT=new _,_S=new _,ES=new _,TS=new _,Dr$1=class{constructor(i=new _,s=new _,a=new _){this.a=i,this.b=s,this.c=a}static getNormal(i,s,a,o){o.subVectors(a,s),Gs.subVectors(i,s),o.cross(Gs);let c=o.lengthSq();return c>0?o.multiplyScalar(1/Math.sqrt(c)):o.set(0,0,0)}static getBarycoord(i,s,a,o,c){Gs.subVectors(o,s),fa.subVectors(a,s),AS.subVectors(i,s);let d=Gs.dot(Gs),g=Gs.dot(fa),b=Gs.dot(AS),j=fa.dot(fa),_e=fa.dot(AS),$=d*j-g*g;if($===0)return c.set(-2,-1,-1);let rt=1/$,st=(j*b-g*_e)*rt,ut=(d*_e-g*b)*rt;return c.set(1-st-ut,ut,st)}static containsPoint(i,s,a,o){return this.getBarycoord(i,s,a,o,pa),pa.x>=0&&pa.y>=0&&pa.x+pa.y<=1}static getUV(i,s,a,o,c,d,g,b){return this.getBarycoord(i,s,a,o,pa),b.set(0,0),b.addScaledVector(c,pa.x),b.addScaledVector(d,pa.y),b.addScaledVector(g,pa.z),b}static isFrontFacing(i,s,a,o){return Gs.subVectors(a,s),fa.subVectors(i,s),Gs.cross(fa).dot(o)<0}set(i,s,a){return this.a.copy(i),this.b.copy(s),this.c.copy(a),this}setFromPointsAndIndices(i,s,a,o){return this.a.copy(i[s]),this.b.copy(i[a]),this.c.copy(i[o]),this}setFromAttributeAndIndices(i,s,a,o){return this.a.fromBufferAttribute(i,s),this.b.fromBufferAttribute(i,a),this.c.fromBufferAttribute(i,o),this}clone(){return new this.constructor().copy(this)}copy(i){return this.a.copy(i.a),this.b.copy(i.b),this.c.copy(i.c),this}getArea(){return Gs.subVectors(this.c,this.b),fa.subVectors(this.a,this.b),Gs.cross(fa).length()*.5}getMidpoint(i){return i.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(i){return Dr$1.getNormal(this.a,this.b,this.c,i)}getPlane(i){return i.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(i,s){return Dr$1.getBarycoord(i,this.a,this.b,this.c,s)}getUV(i,s,a,o,c){return Dr$1.getUV(i,this.a,this.b,this.c,s,a,o,c)}containsPoint(i){return Dr$1.containsPoint(i,this.a,this.b,this.c)}isFrontFacing(i){return Dr$1.isFrontFacing(this.a,this.b,this.c,i)}intersectsBox(i){return i.intersectsTriangle(this)}closestPointToPoint(i,s){let a=this.a,o=this.b,c=this.c,d,g;Pu.subVectors(o,a),Du.subVectors(c,a),_S.subVectors(i,a);let b=Pu.dot(_S),j=Du.dot(_S);if(b<=0&&j<=0)return s.copy(a);ES.subVectors(i,o);let _e=Pu.dot(ES),$=Du.dot(ES);if(_e>=0&&$<=_e)return s.copy(o);let rt=b*$-_e*j;if(rt<=0&&b>=0&&_e<=0)return d=b/(b-_e),s.copy(a).addScaledVector(Pu,d);TS.subVectors(i,c);let st=Pu.dot(TS),ut=Du.dot(TS);if(ut>=0&&st<=ut)return s.copy(c);let gt=st*j-b*ut;if(gt<=0&&j>=0&&ut<=0)return g=j/(j-ut),s.copy(a).addScaledVector(Du,g);let wt=_e*ut-st*$;if(wt<=0&&$-_e>=0&&st-ut>=0)return XT.subVectors(c,o),g=($-_e)/($-_e+(st-ut)),s.copy(o).addScaledVector(XT,g);let yt=1/(wt+gt+rt);return d=gt*yt,g=rt*yt,s.copy(a).addScaledVector(Pu,d).addScaledVector(Du,g)}equals(i){return i.a.equals(this.a)&&i.b.equals(this.b)&&i.c.equals(this.c)}},bk=0,Sc=class extends fr$2{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:bk++}),this.uuid=ms(),this.name="",this.type="Material",this.blending=sl,this.side=es,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=zM,this.blendDst=UM,this.blendEquation=Fu,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=US,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=ZF,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=hS,this.stencilZFail=hS,this.stencilZPass=hS,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(let i in e){let s=e[i];if(s===void 0){console.warn("THREE.Material: '"+i+"' parameter is undefined.");continue}let a=this[i];if(a===void 0){console.warn("THREE."+this.type+": '"+i+"' is not a property of this material.");continue}a&&a.isColor?a.set(s):a&&a.isVector3&&s&&s.isVector3?a.copy(s):this[i]=s}}toJSON(e){let i=e===void 0||typeof e=="string";i&&(e={textures:{},images:{}});let s={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.color&&this.color.isColor&&(s.color=this.color.getHex()),this.roughness!==void 0&&(s.roughness=this.roughness),this.metalness!==void 0&&(s.metalness=this.metalness),this.sheen!==void 0&&(s.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(s.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(s.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(s.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(s.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(s.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(s.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(s.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(s.shininess=this.shininess),this.clearcoat!==void 0&&(s.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(s.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(s.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(s.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(s.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,s.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(s.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(s.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(s.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(s.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(s.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(s.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(s.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(s.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(s.lightMap=this.lightMap.toJSON(e).uuid,s.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(s.aoMap=this.aoMap.toJSON(e).uuid,s.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(s.bumpMap=this.bumpMap.toJSON(e).uuid,s.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(s.normalMap=this.normalMap.toJSON(e).uuid,s.normalMapType=this.normalMapType,s.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(s.displacementMap=this.displacementMap.toJSON(e).uuid,s.displacementScale=this.displacementScale,s.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(s.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(s.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(s.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(s.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(s.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(s.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(s.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(s.combine=this.combine)),this.envMapIntensity!==void 0&&(s.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(s.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(s.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(s.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(s.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(s.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(s.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(s.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(s.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(s.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(s.size=this.size),this.shadowSide!==null&&(s.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(s.sizeAttenuation=this.sizeAttenuation),this.blending!==sl&&(s.blending=this.blending),this.side!==es&&(s.side=this.side),this.vertexColors&&(s.vertexColors=!0),this.opacity<1&&(s.opacity=this.opacity),this.transparent===!0&&(s.transparent=this.transparent),s.depthFunc=this.depthFunc,s.depthTest=this.depthTest,s.depthWrite=this.depthWrite,s.colorWrite=this.colorWrite,s.stencilWrite=this.stencilWrite,s.stencilWriteMask=this.stencilWriteMask,s.stencilFunc=this.stencilFunc,s.stencilRef=this.stencilRef,s.stencilFuncMask=this.stencilFuncMask,s.stencilFail=this.stencilFail,s.stencilZFail=this.stencilZFail,s.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(s.rotation=this.rotation),this.polygonOffset===!0&&(s.polygonOffset=!0),this.polygonOffsetFactor!==0&&(s.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(s.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(s.linewidth=this.linewidth),this.dashSize!==void 0&&(s.dashSize=this.dashSize),this.gapSize!==void 0&&(s.gapSize=this.gapSize),this.scale!==void 0&&(s.scale=this.scale),this.dithering===!0&&(s.dithering=!0),this.alphaTest>0&&(s.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(s.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(s.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(s.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(s.wireframe=this.wireframe),this.wireframeLinewidth>1&&(s.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(s.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(s.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(s.flatShading=this.flatShading),this.visible===!1&&(s.visible=!1),this.toneMapped===!1&&(s.toneMapped=!1),this.fog===!1&&(s.fog=!1),Object.keys(this.userData).length>0&&(s.userData=this.userData);function a(o){let c=[];for(let d in o){let g=o[d];delete g.metadata,c.push(g)}return c}if(i){let o=a(e.textures),c=a(e.images);o.length>0&&(s.textures=o),c.length>0&&(s.images=c)}return s}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let i=e.clippingPlanes,s=null;if(i!==null){let a=i.length;s=new Array(a);for(let o=0;o!==a;++o)s[o]=i[o].clone()}return this.clippingPlanes=s,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}},ts=class extends Sc{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new We(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=GM,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}},mi=new _,Yg=new z$1,Xe=class{constructor(e,i,s=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=i,this.count=e!==void 0?e.length/i:0,this.normalized=s,this.usage=WS,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,i,s){e*=this.itemSize,s*=i.itemSize;for(let a=0,o=this.itemSize;a<o;a++)this.array[e+a]=i.array[s+a];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let i=0,s=this.count;i<s;i++)Yg.fromBufferAttribute(this,i),Yg.applyMatrix3(e),this.setXY(i,Yg.x,Yg.y);else if(this.itemSize===3)for(let i=0,s=this.count;i<s;i++)mi.fromBufferAttribute(this,i),mi.applyMatrix3(e),this.setXYZ(i,mi.x,mi.y,mi.z);return this}applyMatrix4(e){for(let i=0,s=this.count;i<s;i++)mi.fromBufferAttribute(this,i),mi.applyMatrix4(e),this.setXYZ(i,mi.x,mi.y,mi.z);return this}applyNormalMatrix(e){for(let i=0,s=this.count;i<s;i++)mi.fromBufferAttribute(this,i),mi.applyNormalMatrix(e),this.setXYZ(i,mi.x,mi.y,mi.z);return this}transformDirection(e){for(let i=0,s=this.count;i<s;i++)mi.fromBufferAttribute(this,i),mi.transformDirection(e),this.setXYZ(i,mi.x,mi.y,mi.z);return this}set(e,i=0){return this.array.set(e,i),this}getX(e){let i=this.array[e*this.itemSize];return this.normalized&&(i=ya(i,this.array)),i}setX(e,i){return this.normalized&&(i=br(i,this.array)),this.array[e*this.itemSize]=i,this}getY(e){let i=this.array[e*this.itemSize+1];return this.normalized&&(i=ya(i,this.array)),i}setY(e,i){return this.normalized&&(i=br(i,this.array)),this.array[e*this.itemSize+1]=i,this}getZ(e){let i=this.array[e*this.itemSize+2];return this.normalized&&(i=ya(i,this.array)),i}setZ(e,i){return this.normalized&&(i=br(i,this.array)),this.array[e*this.itemSize+2]=i,this}getW(e){let i=this.array[e*this.itemSize+3];return this.normalized&&(i=ya(i,this.array)),i}setW(e,i){return this.normalized&&(i=br(i,this.array)),this.array[e*this.itemSize+3]=i,this}setXY(e,i,s){return e*=this.itemSize,this.normalized&&(i=br(i,this.array),s=br(s,this.array)),this.array[e+0]=i,this.array[e+1]=s,this}setXYZ(e,i,s,a){return e*=this.itemSize,this.normalized&&(i=br(i,this.array),s=br(s,this.array),a=br(a,this.array)),this.array[e+0]=i,this.array[e+1]=s,this.array[e+2]=a,this}setXYZW(e,i,s,a,o){return e*=this.itemSize,this.normalized&&(i=br(i,this.array),s=br(s,this.array),a=br(a,this.array),o=br(o,this.array)),this.array[e+0]=i,this.array[e+1]=s,this.array[e+2]=a,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==WS&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}},wy=class extends Xe{constructor(e,i,s){super(new Uint16Array(e),i,s)}},_o=class extends Xe{constructor(e,i,s){super(new Uint32Array(e),i,s)}},Te=class extends Xe{constructor(e,i,s){super(new Float32Array(e),i,s)}},Sk=0,fs=new ce$1,MS$1=new _t,Ou=new _,$n=new Wt,cp=new Wt,Gi=new _,Pe=class extends fr$2{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Sk++}),this.uuid=ms(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(YM(e)?_o:wy)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,i){return this.attributes[e]=i,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,i,s=0){this.groups.push({start:e,count:i,materialIndex:s})}clearGroups(){this.groups=[]}setDrawRange(e,i){this.drawRange.start=e,this.drawRange.count=i}applyMatrix4(e){let i=this.attributes.position;i!==void 0&&(i.applyMatrix4(e),i.needsUpdate=!0);let s=this.attributes.normal;if(s!==void 0){let o=new nr().getNormalMatrix(e);s.applyNormalMatrix(o),s.needsUpdate=!0}let a=this.attributes.tangent;return a!==void 0&&(a.transformDirection(e),a.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return fs.makeRotationFromQuaternion(e),this.applyMatrix4(fs),this}rotateX(e){return fs.makeRotationX(e),this.applyMatrix4(fs),this}rotateY(e){return fs.makeRotationY(e),this.applyMatrix4(fs),this}rotateZ(e){return fs.makeRotationZ(e),this.applyMatrix4(fs),this}translate(e,i,s){return fs.makeTranslation(e,i,s),this.applyMatrix4(fs),this}scale(e,i,s){return fs.makeScale(e,i,s),this.applyMatrix4(fs),this}lookAt(e){return MS$1.lookAt(e),MS$1.updateMatrix(),this.applyMatrix4(MS$1.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ou).negate(),this.translate(Ou.x,Ou.y,Ou.z),this}setFromPoints(e){let i=[];for(let s=0,a=e.length;s<a;s++){let o=e[s];i.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new Te(i,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Wt);let e=this.attributes.position,i=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new _(-1/0,-1/0,-1/0),new _(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),i)for(let s=0,a=i.length;s<a;s++){let o=i[s];$n.setFromBufferAttribute(o),this.morphTargetsRelative?(Gi.addVectors(this.boundingBox.min,$n.min),this.boundingBox.expandByPoint(Gi),Gi.addVectors(this.boundingBox.max,$n.max),this.boundingBox.expandByPoint(Gi)):(this.boundingBox.expandByPoint($n.min),this.boundingBox.expandByPoint($n.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Br);let e=this.attributes.position,i=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new _,1/0);return}if(e){let s=this.boundingSphere.center;if($n.setFromBufferAttribute(e),i)for(let o=0,c=i.length;o<c;o++){let d=i[o];cp.setFromBufferAttribute(d),this.morphTargetsRelative?(Gi.addVectors($n.min,cp.min),$n.expandByPoint(Gi),Gi.addVectors($n.max,cp.max),$n.expandByPoint(Gi)):($n.expandByPoint(cp.min),$n.expandByPoint(cp.max))}$n.getCenter(s);let a=0;for(let o=0,c=e.count;o<c;o++)Gi.fromBufferAttribute(e,o),a=Math.max(a,s.distanceToSquared(Gi));if(i)for(let o=0,c=i.length;o<c;o++){let d=i[o],g=this.morphTargetsRelative;for(let b=0,j=d.count;b<j;b++)Gi.fromBufferAttribute(d,b),g&&(Ou.fromBufferAttribute(e,b),Gi.add(Ou)),a=Math.max(a,s.distanceToSquared(Gi))}this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,i=this.attributes;if(e===null||i.position===void 0||i.normal===void 0||i.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let s=e.array,a=i.position.array,o=i.normal.array,c=i.uv.array,d=a.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Xe(new Float32Array(4*d),4));let g=this.getAttribute("tangent").array,b=[],j=[];for(let Nt=0;Nt<d;Nt++)b[Nt]=new _,j[Nt]=new _;let _e=new _,$=new _,rt=new _,st=new z$1,ut=new z$1,gt=new z$1,wt=new _,yt=new _;function At(Nt,Ht,dr){_e.fromArray(a,Nt*3),$.fromArray(a,Ht*3),rt.fromArray(a,dr*3),st.fromArray(c,Nt*2),ut.fromArray(c,Ht*2),gt.fromArray(c,dr*2),$.sub(_e),rt.sub(_e),ut.sub(st),gt.sub(st);let hs=1/(ut.x*gt.y-gt.x*ut.y);!isFinite(hs)||(wt.copy($).multiplyScalar(gt.y).addScaledVector(rt,-ut.y).multiplyScalar(hs),yt.copy(rt).multiplyScalar(ut.x).addScaledVector($,-gt.x).multiplyScalar(hs),b[Nt].add(wt),b[Ht].add(wt),b[dr].add(wt),j[Nt].add(yt),j[Ht].add(yt),j[dr].add(yt))}let Ct=this.groups;Ct.length===0&&(Ct=[{start:0,count:s.length}]);for(let Nt=0,Ht=Ct.length;Nt<Ht;++Nt){let dr=Ct[Nt],hs=dr.start,_s=dr.count;for(let ds=hs,Nn=hs+_s;ds<Nn;ds+=3)At(s[ds+0],s[ds+1],s[ds+2])}let Tt=new _,kt=new _,Pt=new _,It=new _;function Lt(Nt){Pt.fromArray(o,Nt*3),It.copy(Pt);let Ht=b[Nt];Tt.copy(Ht),Tt.sub(Pt.multiplyScalar(Pt.dot(Ht))).normalize(),kt.crossVectors(It,Ht);let dr=kt.dot(j[Nt])<0?-1:1;g[Nt*4]=Tt.x,g[Nt*4+1]=Tt.y,g[Nt*4+2]=Tt.z,g[Nt*4+3]=dr}for(let Nt=0,Ht=Ct.length;Nt<Ht;++Nt){let dr=Ct[Nt],hs=dr.start,_s=dr.count;for(let ds=hs,Nn=hs+_s;ds<Nn;ds+=3)Lt(s[ds+0]),Lt(s[ds+1]),Lt(s[ds+2])}}computeVertexNormals(){let e=this.index,i=this.getAttribute("position");if(i!==void 0){let s=this.getAttribute("normal");if(s===void 0)s=new Xe(new Float32Array(i.count*3),3),this.setAttribute("normal",s);else for(let $=0,rt=s.count;$<rt;$++)s.setXYZ($,0,0,0);let a=new _,o=new _,c=new _,d=new _,g=new _,b=new _,j=new _,_e=new _;if(e)for(let $=0,rt=e.count;$<rt;$+=3){let st=e.getX($+0),ut=e.getX($+1),gt=e.getX($+2);a.fromBufferAttribute(i,st),o.fromBufferAttribute(i,ut),c.fromBufferAttribute(i,gt),j.subVectors(c,o),_e.subVectors(a,o),j.cross(_e),d.fromBufferAttribute(s,st),g.fromBufferAttribute(s,ut),b.fromBufferAttribute(s,gt),d.add(j),g.add(j),b.add(j),s.setXYZ(st,d.x,d.y,d.z),s.setXYZ(ut,g.x,g.y,g.z),s.setXYZ(gt,b.x,b.y,b.z)}else for(let $=0,rt=i.count;$<rt;$+=3)a.fromBufferAttribute(i,$+0),o.fromBufferAttribute(i,$+1),c.fromBufferAttribute(i,$+2),j.subVectors(c,o),_e.subVectors(a,o),j.cross(_e),s.setXYZ($+0,j.x,j.y,j.z),s.setXYZ($+1,j.x,j.y,j.z),s.setXYZ($+2,j.x,j.y,j.z);this.normalizeNormals(),s.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){let e=this.attributes.normal;for(let i=0,s=e.count;i<s;i++)Gi.fromBufferAttribute(e,i),Gi.normalize(),e.setXYZ(i,Gi.x,Gi.y,Gi.z)}toNonIndexed(){function e(d,g){let b=d.array,j=d.itemSize,_e=d.normalized,$=new b.constructor(g.length*j),rt=0,st=0;for(let ut=0,gt=g.length;ut<gt;ut++){d.isInterleavedBufferAttribute?rt=g[ut]*d.data.stride+d.offset:rt=g[ut]*j;for(let wt=0;wt<j;wt++)$[st++]=b[rt++]}return new Xe($,j,_e)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let i=new Pe,s=this.index.array,a=this.attributes;for(let d in a){let g=a[d],b=e(g,s);i.setAttribute(d,b)}let o=this.morphAttributes;for(let d in o){let g=[],b=o[d];for(let j=0,_e=b.length;j<_e;j++){let $=b[j],rt=e($,s);g.push(rt)}i.morphAttributes[d]=g}i.morphTargetsRelative=this.morphTargetsRelative;let c=this.groups;for(let d=0,g=c.length;d<g;d++){let b=c[d];i.addGroup(b.start,b.count,b.materialIndex)}return i}toJSON(){let e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){let g=this.parameters;for(let b in g)g[b]!==void 0&&(e[b]=g[b]);return e}e.data={attributes:{}};let i=this.index;i!==null&&(e.data.index={type:i.array.constructor.name,array:Array.prototype.slice.call(i.array)});let s=this.attributes;for(let g in s){let b=s[g];e.data.attributes[g]=b.toJSON(e.data)}let a={},o=!1;for(let g in this.morphAttributes){let b=this.morphAttributes[g],j=[];for(let _e=0,$=b.length;_e<$;_e++){let rt=b[_e];j.push(rt.toJSON(e.data))}j.length>0&&(a[g]=j,o=!0)}o&&(e.data.morphAttributes=a,e.data.morphTargetsRelative=this.morphTargetsRelative);let c=this.groups;c.length>0&&(e.data.groups=JSON.parse(JSON.stringify(c)));let d=this.boundingSphere;return d!==null&&(e.data.boundingSphere={center:d.center.toArray(),radius:d.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let i={};this.name=e.name;let s=e.index;s!==null&&this.setIndex(s.clone(i));let a=e.attributes;for(let b in a){let j=a[b];this.setAttribute(b,j.clone(i))}let o=e.morphAttributes;for(let b in o){let j=[],_e=o[b];for(let $=0,rt=_e.length;$<rt;$++)j.push(_e[$].clone(i));this.morphAttributes[b]=j}this.morphTargetsRelative=e.morphTargetsRelative;let c=e.groups;for(let b=0,j=c.length;b<j;b++){let _e=c[b];this.addGroup(_e.start,_e.count,_e.materialIndex)}let d=e.boundingBox;d!==null&&(this.boundingBox=d.clone());let g=e.boundingSphere;return g!==null&&(this.boundingSphere=g.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}},QT=new ce$1,Iu=new qs,CS=new Br,up=new _,hp=new _,dp=new _,PS=new _,Xg=new _,Qg=new z$1,Kg=new z$1,Zg=new z$1,DS=new _,Jg=new _,sr=class extends _t{constructor(e=new Pe,i=new ts){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=i,this.updateMorphTargets()}copy(e,i){return super.copy(e,i),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){let e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){let s=e[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,o=s.length;a<o;a++){let c=s[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=a}}}}getVertexPosition(e,i){let s=this.geometry,a=s.attributes.position,o=s.morphAttributes.position,c=s.morphTargetsRelative;i.fromBufferAttribute(a,e);let d=this.morphTargetInfluences;if(o&&d){Xg.set(0,0,0);for(let g=0,b=o.length;g<b;g++){let j=d[g],_e=o[g];j!==0&&(PS.fromBufferAttribute(_e,e),c?Xg.addScaledVector(PS,j):Xg.addScaledVector(PS.sub(i),j))}i.add(Xg)}return this.isSkinnedMesh&&this.boneTransform(e,i),i}raycast(e,i){let s=this.geometry,a=this.material,o=this.matrixWorld;if(a===void 0||(s.boundingSphere===null&&s.computeBoundingSphere(),CS.copy(s.boundingSphere),CS.applyMatrix4(o),e.ray.intersectsSphere(CS)===!1)||(QT.copy(o).invert(),Iu.copy(e.ray).applyMatrix4(QT),s.boundingBox!==null&&Iu.intersectsBox(s.boundingBox)===!1))return;let c,d=s.index,g=s.attributes.position,b=s.attributes.uv,j=s.attributes.uv2,_e=s.groups,$=s.drawRange;if(d!==null)if(Array.isArray(a))for(let rt=0,st=_e.length;rt<st;rt++){let ut=_e[rt],gt=a[ut.materialIndex],wt=Math.max(ut.start,$.start),yt=Math.min(d.count,Math.min(ut.start+ut.count,$.start+$.count));for(let At=wt,Ct=yt;At<Ct;At+=3){let Tt=d.getX(At),kt=d.getX(At+1),Pt=d.getX(At+2);c=$g(this,gt,e,Iu,b,j,Tt,kt,Pt),c&&(c.faceIndex=Math.floor(At/3),c.face.materialIndex=ut.materialIndex,i.push(c))}}else{let rt=Math.max(0,$.start),st=Math.min(d.count,$.start+$.count);for(let ut=rt,gt=st;ut<gt;ut+=3){let wt=d.getX(ut),yt=d.getX(ut+1),At=d.getX(ut+2);c=$g(this,a,e,Iu,b,j,wt,yt,At),c&&(c.faceIndex=Math.floor(ut/3),i.push(c))}}else if(g!==void 0)if(Array.isArray(a))for(let rt=0,st=_e.length;rt<st;rt++){let ut=_e[rt],gt=a[ut.materialIndex],wt=Math.max(ut.start,$.start),yt=Math.min(g.count,Math.min(ut.start+ut.count,$.start+$.count));for(let At=wt,Ct=yt;At<Ct;At+=3){let Tt=At,kt=At+1,Pt=At+2;c=$g(this,gt,e,Iu,b,j,Tt,kt,Pt),c&&(c.faceIndex=Math.floor(At/3),c.face.materialIndex=ut.materialIndex,i.push(c))}}else{let rt=Math.max(0,$.start),st=Math.min(g.count,$.start+$.count);for(let ut=rt,gt=st;ut<gt;ut+=3){let wt=ut,yt=ut+1,At=ut+2;c=$g(this,a,e,Iu,b,j,wt,yt,At),c&&(c.faceIndex=Math.floor(ut/3),i.push(c))}}}};function wk(e,i,s,a,o,c,d,g){let b;if(i.side===yi?b=a.intersectTriangle(d,c,o,!0,g):b=a.intersectTriangle(o,c,d,i.side===es,g),b===null)return null;Jg.copy(g),Jg.applyMatrix4(e.matrixWorld);let j=s.ray.origin.distanceTo(Jg);return j<s.near||j>s.far?null:{distance:j,point:Jg.clone(),object:e}}function $g(e,i,s,a,o,c,d,g,b){e.getVertexPosition(d,up),e.getVertexPosition(g,hp),e.getVertexPosition(b,dp);let j=wk(e,i,s,a,up,hp,dp,DS);if(j){o&&(Qg.fromBufferAttribute(o,d),Kg.fromBufferAttribute(o,g),Zg.fromBufferAttribute(o,b),j.uv=Dr$1.getUV(DS,up,hp,dp,Qg,Kg,Zg,new z$1)),c&&(Qg.fromBufferAttribute(c,d),Kg.fromBufferAttribute(c,g),Zg.fromBufferAttribute(c,b),j.uv2=Dr$1.getUV(DS,up,hp,dp,Qg,Kg,Zg,new z$1));let _e={a:d,b:g,c:b,normal:new _,materialIndex:0};Dr$1.getNormal(up,hp,dp,_e.normal),j.face=_e}return j}var vi=class extends Pe{constructor(e=1,i=1,s=1,a=1,o=1,c=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:i,depth:s,widthSegments:a,heightSegments:o,depthSegments:c};let d=this;a=Math.floor(a),o=Math.floor(o),c=Math.floor(c);let g=[],b=[],j=[],_e=[],$=0,rt=0;st("z","y","x",-1,-1,s,i,e,c,o,0),st("z","y","x",1,-1,s,i,-e,c,o,1),st("x","z","y",1,1,e,s,i,a,c,2),st("x","z","y",1,-1,e,s,-i,a,c,3),st("x","y","z",1,-1,e,i,s,a,o,4),st("x","y","z",-1,-1,e,i,-s,a,o,5),this.setIndex(g),this.setAttribute("position",new Te(b,3)),this.setAttribute("normal",new Te(j,3)),this.setAttribute("uv",new Te(_e,2));function st(ut,gt,wt,yt,At,Ct,Tt,kt,Pt,It,Lt){let Nt=Ct/Pt,Ht=Tt/It,dr=Ct/2,hs=Tt/2,_s=kt/2,ds=Pt+1,Nn=It+1,us=0,hn=0,Ft=new _;for(let Gr=0;Gr<Nn;Gr++){let gn=Gr*Ht-hs;for(let un=0;un<ds;un++){let Zn=un*Nt-dr;Ft[ut]=Zn*yt,Ft[gt]=gn*At,Ft[wt]=_s,b.push(Ft.x,Ft.y,Ft.z),Ft[ut]=0,Ft[gt]=0,Ft[wt]=kt>0?1:-1,j.push(Ft.x,Ft.y,Ft.z),_e.push(un/Pt),_e.push(1-Gr/It),us+=1}}for(let Gr=0;Gr<It;Gr++)for(let gn=0;gn<Pt;gn++){let un=$+gn+ds*Gr,Zn=$+gn+ds*(Gr+1),xu=$+(gn+1)+ds*(Gr+1),ou=$+(gn+1)+ds*Gr;g.push(un,Zn,ou),g.push(Zn,xu,ou),hn+=6}d.addGroup(rt,hn,Lt),rt+=hn,$+=us}}static fromJSON(e){return new vi(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function ju(e){let i={};for(let s in e){i[s]={};for(let a in e[s]){let o=e[s][a];o&&(o.isColor||o.isMatrix3||o.isMatrix4||o.isVector2||o.isVector3||o.isVector4||o.isTexture||o.isQuaternion)?i[s][a]=o.clone():Array.isArray(o)?i[s][a]=o.slice():i[s][a]=o}}return i}function bn(e){let i={};for(let s=0;s<e.length;s++){let a=ju(e[s]);for(let o in a)i[o]=a[o]}return i}function Ak(e){let i=[];for(let s=0;s<e.length;s++)i.push(e[s].clone());return i}function QM(e){return e.getRenderTarget()===null&&e.outputEncoding===at?wo:wp}var Xs={clone:ju,merge:bn},_k=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Ek=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,lt=class extends Sc{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=_k,this.fragmentShader=Ek,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=ju(e.uniforms),this.uniformsGroups=Ak(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let i=super.toJSON(e);i.glslVersion=this.glslVersion,i.uniforms={};for(let a in this.uniforms){let o=this.uniforms[a].value;o&&o.isTexture?i.uniforms[a]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?i.uniforms[a]={type:"c",value:o.getHex()}:o&&o.isVector2?i.uniforms[a]={type:"v2",value:o.toArray()}:o&&o.isVector3?i.uniforms[a]={type:"v3",value:o.toArray()}:o&&o.isVector4?i.uniforms[a]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?i.uniforms[a]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?i.uniforms[a]={type:"m4",value:o.toArray()}:i.uniforms[a]={value:o}}Object.keys(this.defines).length>0&&(i.defines=this.defines),i.vertexShader=this.vertexShader,i.fragmentShader=this.fragmentShader;let s={};for(let a in this.extensions)this.extensions[a]===!0&&(s[a]=!0);return Object.keys(s).length>0&&(i.extensions=s),i}},rs=class extends _t{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ce$1,this.projectionMatrix=new ce$1,this.projectionMatrixInverse=new ce$1}copy(e,i){return super.copy(e,i),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let i=this.matrixWorld.elements;return e.set(-i[8],-i[9],-i[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,i){super.updateWorldMatrix(e,i),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},ri=class extends rs{constructor(e=50,i=1,s=.1,a=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=s,this.far=a,this.focus=10,this.aspect=i,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,i){return super.copy(e,i),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let i=.5*this.getFilmHeight()/e;this.fov=Ap*2*Math.atan(i),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(yp*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Ap*2*Math.atan(Math.tan(yp*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,i,s,a,o,c){this.aspect=e/i,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=i,this.view.offsetX=s,this.view.offsetY=a,this.view.width=o,this.view.height=c,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,i=e*Math.tan(yp*.5*this.fov)/this.zoom,s=2*i,a=this.aspect*s,o=-.5*a,c=this.view;if(this.view!==null&&this.view.enabled){let g=c.fullWidth,b=c.fullHeight;o+=c.offsetX*a/g,i-=c.offsetY*s/b,a*=c.width/g,s*=c.height/b}let d=this.filmOffset;d!==0&&(o+=e*d/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+a,i,i-s,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let i=super.toJSON(e);return i.object.fov=this.fov,i.object.zoom=this.zoom,i.object.near=this.near,i.object.far=this.far,i.object.focus=this.focus,i.object.aspect=this.aspect,this.view!==null&&(i.object.view=Object.assign({},this.view)),i.object.filmGauge=this.filmGauge,i.object.filmOffset=this.filmOffset,i}},Ru=-90,Lu=1,XS=class extends _t{constructor(e,i,s){super(),this.type="CubeCamera",this.renderTarget=s;let a=new ri(Ru,Lu,e,i);a.layers=this.layers,a.up.set(0,1,0),a.lookAt(1,0,0),this.add(a);let o=new ri(Ru,Lu,e,i);o.layers=this.layers,o.up.set(0,1,0),o.lookAt(-1,0,0),this.add(o);let c=new ri(Ru,Lu,e,i);c.layers=this.layers,c.up.set(0,0,-1),c.lookAt(0,1,0),this.add(c);let d=new ri(Ru,Lu,e,i);d.layers=this.layers,d.up.set(0,0,1),d.lookAt(0,-1,0),this.add(d);let g=new ri(Ru,Lu,e,i);g.layers=this.layers,g.up.set(0,1,0),g.lookAt(0,0,1),this.add(g);let b=new ri(Ru,Lu,e,i);b.layers=this.layers,b.up.set(0,1,0),b.lookAt(0,0,-1),this.add(b)}update(e,i){this.parent===null&&this.updateMatrixWorld();let s=this.renderTarget,[a,o,c,d,g,b]=this.children,j=e.getRenderTarget(),_e=e.toneMapping,$=e.xr.enabled;e.toneMapping=Hs,e.xr.enabled=!1;let rt=s.texture.generateMipmaps;s.texture.generateMipmaps=!1,e.setRenderTarget(s,0),e.render(i,a),e.setRenderTarget(s,1),e.render(i,o),e.setRenderTarget(s,2),e.render(i,c),e.setRenderTarget(s,3),e.render(i,d),e.setRenderTarget(s,4),e.render(i,g),s.texture.generateMipmaps=rt,e.setRenderTarget(s,5),e.render(i,b),e.setRenderTarget(j),e.toneMapping=_e,e.xr.enabled=$,s.texture.needsPMREMUpdate=!0}},Hu=class extends tr{constructor(e,i,s,a,o,c,d,g,b,j){e=e!==void 0?e:[],i=i!==void 0?i:al,super(e,i,s,a,o,c,d,g,b,j),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},QS=class extends ft{constructor(e=1,i={}){super(e,e,i),this.isWebGLCubeRenderTarget=!0;let s={width:e,height:e,depth:1},a=[s,s,s,s,s,s];this.texture=new Hu(a,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:tt}fromEquirectangularTexture(e,i){this.texture.type=i.type,this.texture.encoding=i.encoding,this.texture.generateMipmaps=i.generateMipmaps,this.texture.minFilter=i.minFilter,this.texture.magFilter=i.magFilter;let s={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},a=new vi(5,5,5),o=new lt({name:"CubemapFromEquirect",uniforms:ju(s.uniforms),vertexShader:s.vertexShader,fragmentShader:s.fragmentShader,side:yi,blending:er});o.uniforms.tEquirect.value=i;let c=new sr(a,o),d=i.minFilter;return i.minFilter===bc&&(i.minFilter=tt),new XS(1,10,this).update(e,c),i.minFilter=d,c.geometry.dispose(),c.material.dispose(),this}clear(e,i,s,a){let o=e.getRenderTarget();for(let c=0;c<6;c++)e.setRenderTarget(this,c),e.clear(i,s,a);e.setRenderTarget(o)}},OS=new _,Tk=new _,Mk=new nr,ii=class{constructor(e=new _(1,0,0),i=0){this.isPlane=!0,this.normal=e,this.constant=i}set(e,i){return this.normal.copy(e),this.constant=i,this}setComponents(e,i,s,a){return this.normal.set(e,i,s),this.constant=a,this}setFromNormalAndCoplanarPoint(e,i){return this.normal.copy(e),this.constant=-i.dot(this.normal),this}setFromCoplanarPoints(e,i,s){let a=OS.subVectors(s,i).cross(Tk.subVectors(e,i)).normalize();return this.setFromNormalAndCoplanarPoint(a,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,i){return i.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,i){let s=e.delta(OS),a=this.normal.dot(s);if(a===0)return this.distanceToPoint(e.start)===0?i.copy(e.start):null;let o=-(e.start.dot(this.normal)+this.constant)/a;return o<0||o>1?null:i.copy(s).multiplyScalar(o).add(e.start)}intersectsLine(e){let i=this.distanceToPoint(e.start),s=this.distanceToPoint(e.end);return i<0&&s>0||s<0&&i>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,i){let s=i||Mk.getNormalMatrix(e),a=this.coplanarPoint(OS).applyMatrix4(e),o=this.normal.applyMatrix3(s).normalize();return this.constant=-a.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}},Bu=new Br,ey=new _,Tp=class{constructor(e=new ii,i=new ii,s=new ii,a=new ii,o=new ii,c=new ii){this.planes=[e,i,s,a,o,c]}set(e,i,s,a,o,c){let d=this.planes;return d[0].copy(e),d[1].copy(i),d[2].copy(s),d[3].copy(a),d[4].copy(o),d[5].copy(c),this}copy(e){let i=this.planes;for(let s=0;s<6;s++)i[s].copy(e.planes[s]);return this}setFromProjectionMatrix(e){let i=this.planes,s=e.elements,a=s[0],o=s[1],c=s[2],d=s[3],g=s[4],b=s[5],j=s[6],_e=s[7],$=s[8],rt=s[9],st=s[10],ut=s[11],gt=s[12],wt=s[13],yt=s[14],At=s[15];return i[0].setComponents(d-a,_e-g,ut-$,At-gt).normalize(),i[1].setComponents(d+a,_e+g,ut+$,At+gt).normalize(),i[2].setComponents(d+o,_e+b,ut+rt,At+wt).normalize(),i[3].setComponents(d-o,_e-b,ut-rt,At-wt).normalize(),i[4].setComponents(d-c,_e-j,ut-st,At-yt).normalize(),i[5].setComponents(d+c,_e+j,ut+st,At+yt).normalize(),this}intersectsObject(e){let i=e.geometry;return i.boundingSphere===null&&i.computeBoundingSphere(),Bu.copy(i.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Bu)}intersectsSprite(e){return Bu.center.set(0,0,0),Bu.radius=.7071067811865476,Bu.applyMatrix4(e.matrixWorld),this.intersectsSphere(Bu)}intersectsSphere(e){let i=this.planes,s=e.center,a=-e.radius;for(let o=0;o<6;o++)if(i[o].distanceToPoint(s)<a)return!1;return!0}intersectsBox(e){let i=this.planes;for(let s=0;s<6;s++){let a=i[s];if(ey.x=a.normal.x>0?e.max.x:e.min.x,ey.y=a.normal.y>0?e.max.y:e.min.y,ey.z=a.normal.z>0?e.max.z:e.min.z,a.distanceToPoint(ey)<0)return!1}return!0}containsPoint(e){let i=this.planes;for(let s=0;s<6;s++)if(i[s].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};function KM(){let e=null,i=!1,s=null,a=null;function o(c,d){s(c,d),a=e.requestAnimationFrame(o)}return{start:function(){i!==!0&&s!==null&&(a=e.requestAnimationFrame(o),i=!0)},stop:function(){e.cancelAnimationFrame(a),i=!1},setAnimationLoop:function(c){s=c},setContext:function(c){e=c}}}function Ck(e,i){let s=i.isWebGL2,a=new WeakMap;function o(j,_e){let $=j.array,rt=j.usage,st=e.createBuffer();e.bindBuffer(_e,st),e.bufferData(_e,$,rt),j.onUploadCallback();let ut;if($ instanceof Float32Array)ut=5126;else if($ instanceof Uint16Array)if(j.isFloat16BufferAttribute)if(s)ut=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else ut=5123;else if($ instanceof Int16Array)ut=5122;else if($ instanceof Uint32Array)ut=5125;else if($ instanceof Int32Array)ut=5124;else if($ instanceof Int8Array)ut=5120;else if($ instanceof Uint8Array)ut=5121;else if($ instanceof Uint8ClampedArray)ut=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+$);return{buffer:st,type:ut,bytesPerElement:$.BYTES_PER_ELEMENT,version:j.version}}function c(j,_e,$){let rt=_e.array,st=_e.updateRange;e.bindBuffer($,j),st.count===-1?e.bufferSubData($,0,rt):(s?e.bufferSubData($,st.offset*rt.BYTES_PER_ELEMENT,rt,st.offset,st.count):e.bufferSubData($,st.offset*rt.BYTES_PER_ELEMENT,rt.subarray(st.offset,st.offset+st.count)),st.count=-1),_e.onUploadCallback()}function d(j){return j.isInterleavedBufferAttribute&&(j=j.data),a.get(j)}function g(j){j.isInterleavedBufferAttribute&&(j=j.data);let _e=a.get(j);_e&&(e.deleteBuffer(_e.buffer),a.delete(j))}function b(j,_e){if(j.isGLBufferAttribute){let rt=a.get(j);(!rt||rt.version<j.version)&&a.set(j,{buffer:j.buffer,type:j.type,bytesPerElement:j.elementSize,version:j.version});return}j.isInterleavedBufferAttribute&&(j=j.data);let $=a.get(j);$===void 0?a.set(j,o(j,_e)):$.version<j.version&&(c($.buffer,j,_e),$.version=j.version)}return{get:d,remove:g,update:b}}var wn=class extends Pe{constructor(e=1,i=1,s=1,a=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:i,widthSegments:s,heightSegments:a};let o=e/2,c=i/2,d=Math.floor(s),g=Math.floor(a),b=d+1,j=g+1,_e=e/d,$=i/g,rt=[],st=[],ut=[],gt=[];for(let wt=0;wt<j;wt++){let yt=wt*$-c;for(let At=0;At<b;At++){let Ct=At*_e-o;st.push(Ct,-yt,0),ut.push(0,0,1),gt.push(At/d),gt.push(1-wt/g)}}for(let wt=0;wt<g;wt++)for(let yt=0;yt<d;yt++){let At=yt+b*wt,Ct=yt+b*(wt+1),Tt=yt+1+b*(wt+1),kt=yt+1+b*wt;rt.push(At,Ct,kt),rt.push(Ct,Tt,kt)}this.setIndex(rt),this.setAttribute("position",new Te(st,3)),this.setAttribute("normal",new Te(ut,3)),this.setAttribute("uv",new Te(gt,2))}static fromJSON(e){return new wn(e.width,e.height,e.widthSegments,e.heightSegments)}},Pk=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,Dk=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Ok=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,Ik=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Rk=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Lk=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Bk="vec3 transformed = vec3( position );",Nk=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Fk=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,kk=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Vk=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,zk=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,Uk=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Gk=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,jk=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Hk=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Wk=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,qk=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,Yk=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,Xk=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,Qk=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Kk=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Zk=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Jk=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,$k=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,eV=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,tV="gl_FragColor = linearToOutputTexel( gl_FragColor );",rV=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,iV=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,nV=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,sV=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,oV=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,aV=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,lV=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,cV=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,uV=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,hV=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,dV=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,fV=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,pV=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,mV=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,gV=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,yV=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,vV=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,xV=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,bV=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,SV=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,wV=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,AV=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,_V=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,EV=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,TV=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,MV=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,CV=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,PV=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,DV=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,OV=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,IV=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,RV=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,LV=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,BV=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,NV=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,FV=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,kV=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,VV=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,zV=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,UV=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,GV=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,jV=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,HV=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,WV=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,qV=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,YV=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,XV=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,QV=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,KV=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,ZV=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,JV=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,$V=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,ez=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,tz=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,rz=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,iz=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,nz=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,sz=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,oz=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,az=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,lz=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,cz=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,uz=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,hz=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,dz=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,fz=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,pz=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,mz=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,gz=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,yz=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,vz=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,xz=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,bz=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,Sz=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,wz=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,Az=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,_z=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,Ez=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,Tz=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,Mz=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Cz=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Pz=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Dz=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Oz=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Iz=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Rz=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Lz=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,Bz=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Nz=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Fz=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,kz=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Vz=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,zz=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Uz=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Gz=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,jz=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Hz=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Wz=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,qz=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Yz=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Xz=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Qz=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Kz=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Zz=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Jz=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$z=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,eU=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,tU=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,rU=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,iU=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,nU=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,sU=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,oU=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,bt={alphamap_fragment:Pk,alphamap_pars_fragment:Dk,alphatest_fragment:Ok,alphatest_pars_fragment:Ik,aomap_fragment:Rk,aomap_pars_fragment:Lk,begin_vertex:Bk,beginnormal_vertex:Nk,bsdfs:Fk,iridescence_fragment:kk,bumpmap_pars_fragment:Vk,clipping_planes_fragment:zk,clipping_planes_pars_fragment:Uk,clipping_planes_pars_vertex:Gk,clipping_planes_vertex:jk,color_fragment:Hk,color_pars_fragment:Wk,color_pars_vertex:qk,color_vertex:Yk,common:Xk,cube_uv_reflection_fragment:Qk,defaultnormal_vertex:Kk,displacementmap_pars_vertex:Zk,displacementmap_vertex:Jk,emissivemap_fragment:$k,emissivemap_pars_fragment:eV,encodings_fragment:tV,encodings_pars_fragment:rV,envmap_fragment:iV,envmap_common_pars_fragment:nV,envmap_pars_fragment:sV,envmap_pars_vertex:oV,envmap_physical_pars_fragment:vV,envmap_vertex:aV,fog_vertex:lV,fog_pars_vertex:cV,fog_fragment:uV,fog_pars_fragment:hV,gradientmap_pars_fragment:dV,lightmap_fragment:fV,lightmap_pars_fragment:pV,lights_lambert_fragment:mV,lights_lambert_pars_fragment:gV,lights_pars_begin:yV,lights_toon_fragment:xV,lights_toon_pars_fragment:bV,lights_phong_fragment:SV,lights_phong_pars_fragment:wV,lights_physical_fragment:AV,lights_physical_pars_fragment:_V,lights_fragment_begin:EV,lights_fragment_maps:TV,lights_fragment_end:MV,logdepthbuf_fragment:CV,logdepthbuf_pars_fragment:PV,logdepthbuf_pars_vertex:DV,logdepthbuf_vertex:OV,map_fragment:IV,map_pars_fragment:RV,map_particle_fragment:LV,map_particle_pars_fragment:BV,metalnessmap_fragment:NV,metalnessmap_pars_fragment:FV,morphcolor_vertex:kV,morphnormal_vertex:VV,morphtarget_pars_vertex:zV,morphtarget_vertex:UV,normal_fragment_begin:GV,normal_fragment_maps:jV,normal_pars_fragment:HV,normal_pars_vertex:WV,normal_vertex:qV,normalmap_pars_fragment:YV,clearcoat_normal_fragment_begin:XV,clearcoat_normal_fragment_maps:QV,clearcoat_pars_fragment:KV,iridescence_pars_fragment:ZV,output_fragment:JV,packing:$V,premultiplied_alpha_fragment:ez,project_vertex:tz,dithering_fragment:rz,dithering_pars_fragment:iz,roughnessmap_fragment:nz,roughnessmap_pars_fragment:sz,shadowmap_pars_fragment:oz,shadowmap_pars_vertex:az,shadowmap_vertex:lz,shadowmask_pars_fragment:cz,skinbase_vertex:uz,skinning_pars_vertex:hz,skinning_vertex:dz,skinnormal_vertex:fz,specularmap_fragment:pz,specularmap_pars_fragment:mz,tonemapping_fragment:gz,tonemapping_pars_fragment:yz,transmission_fragment:vz,transmission_pars_fragment:xz,uv_pars_fragment:bz,uv_pars_vertex:Sz,uv_vertex:wz,uv2_pars_fragment:Az,uv2_pars_vertex:_z,uv2_vertex:Ez,worldpos_vertex:Tz,background_vert:Mz,background_frag:Cz,backgroundCube_vert:Pz,backgroundCube_frag:Dz,cube_vert:Oz,cube_frag:Iz,depth_vert:Rz,depth_frag:Lz,distanceRGBA_vert:Bz,distanceRGBA_frag:Nz,equirect_vert:Fz,equirect_frag:kz,linedashed_vert:Vz,linedashed_frag:zz,meshbasic_vert:Uz,meshbasic_frag:Gz,meshlambert_vert:jz,meshlambert_frag:Hz,meshmatcap_vert:Wz,meshmatcap_frag:qz,meshnormal_vert:Yz,meshnormal_frag:Xz,meshphong_vert:Qz,meshphong_frag:Kz,meshphysical_vert:Zz,meshphysical_frag:Jz,meshtoon_vert:$z,meshtoon_frag:eU,points_vert:tU,points_frag:rU,shadow_vert:iU,shadow_frag:nU,sprite_vert:sU,sprite_frag:oU},De$1={common:{diffuse:{value:new We(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new nr},uv2Transform:{value:new nr},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new z$1(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new We(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new We(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new nr}},sprite:{diffuse:{value:new We(16777215)},opacity:{value:1},center:{value:new z$1(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new nr}}},Ao={basic:{uniforms:bn([De$1.common,De$1.specularmap,De$1.envmap,De$1.aomap,De$1.lightmap,De$1.fog]),vertexShader:bt.meshbasic_vert,fragmentShader:bt.meshbasic_frag},lambert:{uniforms:bn([De$1.common,De$1.specularmap,De$1.envmap,De$1.aomap,De$1.lightmap,De$1.emissivemap,De$1.bumpmap,De$1.normalmap,De$1.displacementmap,De$1.fog,De$1.lights,{emissive:{value:new We(0)}}]),vertexShader:bt.meshlambert_vert,fragmentShader:bt.meshlambert_frag},phong:{uniforms:bn([De$1.common,De$1.specularmap,De$1.envmap,De$1.aomap,De$1.lightmap,De$1.emissivemap,De$1.bumpmap,De$1.normalmap,De$1.displacementmap,De$1.fog,De$1.lights,{emissive:{value:new We(0)},specular:{value:new We(1118481)},shininess:{value:30}}]),vertexShader:bt.meshphong_vert,fragmentShader:bt.meshphong_frag},standard:{uniforms:bn([De$1.common,De$1.envmap,De$1.aomap,De$1.lightmap,De$1.emissivemap,De$1.bumpmap,De$1.normalmap,De$1.displacementmap,De$1.roughnessmap,De$1.metalnessmap,De$1.fog,De$1.lights,{emissive:{value:new We(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:bt.meshphysical_vert,fragmentShader:bt.meshphysical_frag},toon:{uniforms:bn([De$1.common,De$1.aomap,De$1.lightmap,De$1.emissivemap,De$1.bumpmap,De$1.normalmap,De$1.displacementmap,De$1.gradientmap,De$1.fog,De$1.lights,{emissive:{value:new We(0)}}]),vertexShader:bt.meshtoon_vert,fragmentShader:bt.meshtoon_frag},matcap:{uniforms:bn([De$1.common,De$1.bumpmap,De$1.normalmap,De$1.displacementmap,De$1.fog,{matcap:{value:null}}]),vertexShader:bt.meshmatcap_vert,fragmentShader:bt.meshmatcap_frag},points:{uniforms:bn([De$1.points,De$1.fog]),vertexShader:bt.points_vert,fragmentShader:bt.points_frag},dashed:{uniforms:bn([De$1.common,De$1.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:bt.linedashed_vert,fragmentShader:bt.linedashed_frag},depth:{uniforms:bn([De$1.common,De$1.displacementmap]),vertexShader:bt.depth_vert,fragmentShader:bt.depth_frag},normal:{uniforms:bn([De$1.common,De$1.bumpmap,De$1.normalmap,De$1.displacementmap,{opacity:{value:1}}]),vertexShader:bt.meshnormal_vert,fragmentShader:bt.meshnormal_frag},sprite:{uniforms:bn([De$1.sprite,De$1.fog]),vertexShader:bt.sprite_vert,fragmentShader:bt.sprite_frag},background:{uniforms:{uvTransform:{value:new nr},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:bt.background_vert,fragmentShader:bt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:bt.backgroundCube_vert,fragmentShader:bt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:bt.cube_vert,fragmentShader:bt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:bt.equirect_vert,fragmentShader:bt.equirect_frag},distanceRGBA:{uniforms:bn([De$1.common,De$1.displacementmap,{referencePosition:{value:new _},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:bt.distanceRGBA_vert,fragmentShader:bt.distanceRGBA_frag},shadow:{uniforms:bn([De$1.lights,De$1.fog,{color:{value:new We(0)},opacity:{value:1}}]),vertexShader:bt.shadow_vert,fragmentShader:bt.shadow_frag}};Ao.physical={uniforms:bn([Ao.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new z$1(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new We(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new z$1},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new We(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new We(1,1,1)},specularColorMap:{value:null}}]),vertexShader:bt.meshphysical_vert,fragmentShader:bt.meshphysical_frag};var ty={r:0,b:0,g:0};function aU(e,i,s,a,o,c,d){let g=new We(0),b=c===!0?0:1,j,_e,$=null,rt=0,st=null;function ut(wt,yt){let At=!1,Ct=yt.isScene===!0?yt.background:null;Ct&&Ct.isTexture&&(Ct=(yt.backgroundBlurriness>0?s:i).get(Ct));let Tt=e.xr,kt=Tt.getSession&&Tt.getSession();kt&&kt.environmentBlendMode==="additive"&&(Ct=null),Ct===null?gt(g,b):Ct&&Ct.isColor&&(gt(Ct,1),At=!0),(e.autoClear||At)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),Ct&&(Ct.isCubeTexture||Ct.mapping===ch)?(_e===void 0&&(_e=new sr(new vi(1,1,1),new lt({name:"BackgroundCubeMaterial",uniforms:ju(Ao.backgroundCube.uniforms),vertexShader:Ao.backgroundCube.vertexShader,fragmentShader:Ao.backgroundCube.fragmentShader,side:yi,depthTest:!1,depthWrite:!1,fog:!1})),_e.geometry.deleteAttribute("normal"),_e.geometry.deleteAttribute("uv"),_e.onBeforeRender=function(Pt,It,Lt){this.matrixWorld.copyPosition(Lt.matrixWorld)},Object.defineProperty(_e.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),o.update(_e)),_e.material.uniforms.envMap.value=Ct,_e.material.uniforms.flipEnvMap.value=Ct.isCubeTexture&&Ct.isRenderTargetTexture===!1?-1:1,_e.material.uniforms.backgroundBlurriness.value=yt.backgroundBlurriness,_e.material.uniforms.backgroundIntensity.value=yt.backgroundIntensity,_e.material.toneMapped=Ct.encoding!==at,($!==Ct||rt!==Ct.version||st!==e.toneMapping)&&(_e.material.needsUpdate=!0,$=Ct,rt=Ct.version,st=e.toneMapping),_e.layers.enableAll(),wt.unshift(_e,_e.geometry,_e.material,0,0,null)):Ct&&Ct.isTexture&&(j===void 0&&(j=new sr(new wn(2,2),new lt({name:"BackgroundMaterial",uniforms:ju(Ao.background.uniforms),vertexShader:Ao.background.vertexShader,fragmentShader:Ao.background.fragmentShader,side:es,depthTest:!1,depthWrite:!1,fog:!1})),j.geometry.deleteAttribute("normal"),Object.defineProperty(j.material,"map",{get:function(){return this.uniforms.t2D.value}}),o.update(j)),j.material.uniforms.t2D.value=Ct,j.material.uniforms.backgroundIntensity.value=yt.backgroundIntensity,j.material.toneMapped=Ct.encoding!==at,Ct.matrixAutoUpdate===!0&&Ct.updateMatrix(),j.material.uniforms.uvTransform.value.copy(Ct.matrix),($!==Ct||rt!==Ct.version||st!==e.toneMapping)&&(j.material.needsUpdate=!0,$=Ct,rt=Ct.version,st=e.toneMapping),j.layers.enableAll(),wt.unshift(j,j.geometry,j.material,0,0,null))}function gt(wt,yt){wt.getRGB(ty,QM(e)),a.buffers.color.setClear(ty.r,ty.g,ty.b,yt,d)}return{getClearColor:function(){return g},setClearColor:function(wt,yt=1){g.set(wt),b=yt,gt(g,b)},getClearAlpha:function(){return b},setClearAlpha:function(wt){b=wt,gt(g,b)},render:ut}}function lU(e,i,s,a){let o=e.getParameter(34921),c=a.isWebGL2?null:i.get("OES_vertex_array_object"),d=a.isWebGL2||c!==null,g={},b=wt(null),j=b,_e=!1;function $(ds,Nn,us,hn,Ft){let Gr=!1;if(d){let gn=gt(hn,us,Nn);j!==gn&&(j=gn,st(j.object)),Gr=yt(ds,hn,us,Ft),Gr&&At(ds,hn,us,Ft)}else{let gn=Nn.wireframe===!0;(j.geometry!==hn.id||j.program!==us.id||j.wireframe!==gn)&&(j.geometry=hn.id,j.program=us.id,j.wireframe=gn,Gr=!0)}Ft!==null&&s.update(Ft,34963),(Gr||_e)&&(_e=!1,Lt(ds,Nn,us,hn),Ft!==null&&e.bindBuffer(34963,s.get(Ft).buffer))}function rt(){return a.isWebGL2?e.createVertexArray():c.createVertexArrayOES()}function st(ds){return a.isWebGL2?e.bindVertexArray(ds):c.bindVertexArrayOES(ds)}function ut(ds){return a.isWebGL2?e.deleteVertexArray(ds):c.deleteVertexArrayOES(ds)}function gt(ds,Nn,us){let hn=us.wireframe===!0,Ft=g[ds.id];Ft===void 0&&(Ft={},g[ds.id]=Ft);let Gr=Ft[Nn.id];Gr===void 0&&(Gr={},Ft[Nn.id]=Gr);let gn=Gr[hn];return gn===void 0&&(gn=wt(rt()),Gr[hn]=gn),gn}function wt(ds){let Nn=[],us=[],hn=[];for(let Ft=0;Ft<o;Ft++)Nn[Ft]=0,us[Ft]=0,hn[Ft]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Nn,enabledAttributes:us,attributeDivisors:hn,object:ds,attributes:{},index:null}}function yt(ds,Nn,us,hn){let Ft=j.attributes,Gr=Nn.attributes,gn=0,un=us.getAttributes();for(let Zn in un)if(un[Zn].location>=0){let xu=Ft[Zn],ou=Gr[Zn];if(ou===void 0&&(Zn==="instanceMatrix"&&ds.instanceMatrix&&(ou=ds.instanceMatrix),Zn==="instanceColor"&&ds.instanceColor&&(ou=ds.instanceColor)),xu===void 0||xu.attribute!==ou||ou&&xu.data!==ou.data)return!0;gn++}return j.attributesNum!==gn||j.index!==hn}function At(ds,Nn,us,hn){let Ft={},Gr=Nn.attributes,gn=0,un=us.getAttributes();for(let Zn in un)if(un[Zn].location>=0){let xu=Gr[Zn];xu===void 0&&(Zn==="instanceMatrix"&&ds.instanceMatrix&&(xu=ds.instanceMatrix),Zn==="instanceColor"&&ds.instanceColor&&(xu=ds.instanceColor));let ou={};ou.attribute=xu,xu&&xu.data&&(ou.data=xu.data),Ft[Zn]=ou,gn++}j.attributes=Ft,j.attributesNum=gn,j.index=hn}function Ct(){let ds=j.newAttributes;for(let Nn=0,us=ds.length;Nn<us;Nn++)ds[Nn]=0}function Tt(ds){kt(ds,0)}function kt(ds,Nn){let us=j.newAttributes,hn=j.enabledAttributes,Ft=j.attributeDivisors;us[ds]=1,hn[ds]===0&&(e.enableVertexAttribArray(ds),hn[ds]=1),Ft[ds]!==Nn&&((a.isWebGL2?e:i.get("ANGLE_instanced_arrays"))[a.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](ds,Nn),Ft[ds]=Nn)}function Pt(){let ds=j.newAttributes,Nn=j.enabledAttributes;for(let us=0,hn=Nn.length;us<hn;us++)Nn[us]!==ds[us]&&(e.disableVertexAttribArray(us),Nn[us]=0)}function It(ds,Nn,us,hn,Ft,Gr){a.isWebGL2===!0&&(us===5124||us===5125)?e.vertexAttribIPointer(ds,Nn,us,Ft,Gr):e.vertexAttribPointer(ds,Nn,us,hn,Ft,Gr)}function Lt(ds,Nn,us,hn){if(a.isWebGL2===!1&&(ds.isInstancedMesh||hn.isInstancedBufferGeometry)&&i.get("ANGLE_instanced_arrays")===null)return;Ct();let Ft=hn.attributes,Gr=us.getAttributes(),gn=Nn.defaultAttributeValues;for(let un in Gr){let Zn=Gr[un];if(Zn.location>=0){let xu=Ft[un];if(xu===void 0&&(un==="instanceMatrix"&&ds.instanceMatrix&&(xu=ds.instanceMatrix),un==="instanceColor"&&ds.instanceColor&&(xu=ds.instanceColor)),xu!==void 0){let ou=xu.normalized,sp=xu.itemSize,wu=s.get(xu);if(wu===void 0)continue;let l1=wu.buffer,P0=wu.type,B0=wu.bytesPerElement;if(xu.isInterleavedBufferAttribute){let q1=xu.data,ox=q1.stride,qx=xu.offset;if(q1.isInstancedInterleavedBuffer){for(let N_=0;N_<Zn.locationSize;N_++)kt(Zn.location+N_,q1.meshPerAttribute);ds.isInstancedMesh!==!0&&hn._maxInstanceCount===void 0&&(hn._maxInstanceCount=q1.meshPerAttribute*q1.count)}else for(let N_=0;N_<Zn.locationSize;N_++)Tt(Zn.location+N_);e.bindBuffer(34962,l1);for(let N_=0;N_<Zn.locationSize;N_++)It(Zn.location+N_,sp/Zn.locationSize,P0,ou,ox*B0,(qx+sp/Zn.locationSize*N_)*B0)}else{if(xu.isInstancedBufferAttribute){for(let q1=0;q1<Zn.locationSize;q1++)kt(Zn.location+q1,xu.meshPerAttribute);ds.isInstancedMesh!==!0&&hn._maxInstanceCount===void 0&&(hn._maxInstanceCount=xu.meshPerAttribute*xu.count)}else for(let q1=0;q1<Zn.locationSize;q1++)Tt(Zn.location+q1);e.bindBuffer(34962,l1);for(let q1=0;q1<Zn.locationSize;q1++)It(Zn.location+q1,sp/Zn.locationSize,P0,ou,sp*B0,sp/Zn.locationSize*q1*B0)}}else if(gn!==void 0){let ou=gn[un];if(ou!==void 0)switch(ou.length){case 2:e.vertexAttrib2fv(Zn.location,ou);break;case 3:e.vertexAttrib3fv(Zn.location,ou);break;case 4:e.vertexAttrib4fv(Zn.location,ou);break;default:e.vertexAttrib1fv(Zn.location,ou)}}}}Pt()}function Nt(){hs();for(let ds in g){let Nn=g[ds];for(let us in Nn){let hn=Nn[us];for(let Ft in hn)ut(hn[Ft].object),delete hn[Ft];delete Nn[us]}delete g[ds]}}function Ht(ds){if(g[ds.id]===void 0)return;let Nn=g[ds.id];for(let us in Nn){let hn=Nn[us];for(let Ft in hn)ut(hn[Ft].object),delete hn[Ft];delete Nn[us]}delete g[ds.id]}function dr(ds){for(let Nn in g){let us=g[Nn];if(us[ds.id]===void 0)continue;let hn=us[ds.id];for(let Ft in hn)ut(hn[Ft].object),delete hn[Ft];delete us[ds.id]}}function hs(){_s(),_e=!0,j!==b&&(j=b,st(j.object))}function _s(){b.geometry=null,b.program=null,b.wireframe=!1}return{setup:$,reset:hs,resetDefaultState:_s,dispose:Nt,releaseStatesOfGeometry:Ht,releaseStatesOfProgram:dr,initAttributes:Ct,enableAttribute:Tt,disableUnusedAttributes:Pt}}function cU(e,i,s,a){let o=a.isWebGL2,c;function d(j){c=j}function g(j,_e){e.drawArrays(c,j,_e),s.update(_e,c,1)}function b(j,_e,$){if($===0)return;let rt,st;if(o)rt=e,st="drawArraysInstanced";else if(rt=i.get("ANGLE_instanced_arrays"),st="drawArraysInstancedANGLE",rt===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}rt[st](c,j,_e,$),s.update(_e,c,$)}this.setMode=d,this.render=g,this.renderInstances=b}function uU(e,i,s){let a;function o(){if(a!==void 0)return a;if(i.has("EXT_texture_filter_anisotropic")===!0){let It=i.get("EXT_texture_filter_anisotropic");a=e.getParameter(It.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else a=0;return a}function c(It){if(It==="highp"){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";It="mediump"}return It==="mediump"&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}let d=typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext,g=s.precision!==void 0?s.precision:"highp",b=c(g);b!==g&&(console.warn("THREE.WebGLRenderer:",g,"not supported, using",b,"instead."),g=b);let j=d||i.has("WEBGL_draw_buffers"),_e=s.logarithmicDepthBuffer===!0,$=e.getParameter(34930),rt=e.getParameter(35660),st=e.getParameter(3379),ut=e.getParameter(34076),gt=e.getParameter(34921),wt=e.getParameter(36347),yt=e.getParameter(36348),At=e.getParameter(36349),Ct=rt>0,Tt=d||i.has("OES_texture_float"),kt=Ct&&Tt,Pt=d?e.getParameter(36183):0;return{isWebGL2:d,drawBuffers:j,getMaxAnisotropy:o,getMaxPrecision:c,precision:g,logarithmicDepthBuffer:_e,maxTextures:$,maxVertexTextures:rt,maxTextureSize:st,maxCubemapSize:ut,maxAttributes:gt,maxVertexUniforms:wt,maxVaryings:yt,maxFragmentUniforms:At,vertexTextures:Ct,floatFragmentTextures:Tt,floatVertexTextures:kt,maxSamples:Pt}}function hU(e){let i=this,s=null,a=0,o=!1,c=!1,d=new ii,g=new nr,b={value:null,needsUpdate:!1};this.uniform=b,this.numPlanes=0,this.numIntersection=0,this.init=function($,rt){let st=$.length!==0||rt||a!==0||o;return o=rt,a=$.length,st},this.beginShadows=function(){c=!0,_e(null)},this.endShadows=function(){c=!1},this.setGlobalState=function($,rt){s=_e($,rt,0)},this.setState=function($,rt,st){let ut=$.clippingPlanes,gt=$.clipIntersection,wt=$.clipShadows,yt=e.get($);if(!o||ut===null||ut.length===0||c&&!wt)c?_e(null):j();else{let At=c?0:a,Ct=At*4,Tt=yt.clippingState||null;b.value=Tt,Tt=_e(ut,rt,Ct,st);for(let kt=0;kt!==Ct;++kt)Tt[kt]=s[kt];yt.clippingState=Tt,this.numIntersection=gt?this.numPlanes:0,this.numPlanes+=At}};function j(){b.value!==s&&(b.value=s,b.needsUpdate=a>0),i.numPlanes=a,i.numIntersection=0}function _e($,rt,st,ut){let gt=$!==null?$.length:0,wt=null;if(gt!==0){if(wt=b.value,ut!==!0||wt===null){let yt=st+gt*4,At=rt.matrixWorldInverse;g.getNormalMatrix(At),(wt===null||wt.length<yt)&&(wt=new Float32Array(yt));for(let Ct=0,Tt=st;Ct!==gt;++Ct,Tt+=4)d.copy($[Ct]).applyMatrix4(At,g),d.normal.toArray(wt,Tt),wt[Tt+3]=d.constant}b.value=wt,b.needsUpdate=!0}return i.numPlanes=gt,i.numIntersection=0,wt}}function dU(e){let i=new WeakMap;function s(d,g){return g===GS?d.mapping=al:g===jS&&(d.mapping=ll),d}function a(d){if(d&&d.isTexture&&d.isRenderTargetTexture===!1){let g=d.mapping;if(g===GS||g===jS)if(i.has(d)){let b=i.get(d).texture;return s(b,d.mapping)}else{let b=d.image;if(b&&b.height>0){let j=new QS(b.height/2);return j.fromEquirectangularTexture(e,d),i.set(d,j),d.addEventListener("dispose",o),s(j.texture,d.mapping)}else return null}}return d}function o(d){let g=d.target;g.removeEventListener("dispose",o);let b=i.get(g);b!==void 0&&(i.delete(g),b.dispose())}function c(){i=new WeakMap}return{get:a,dispose:c}}var Wu=class extends rs{constructor(e=-1,i=1,s=1,a=-1,o=.1,c=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=i,this.top=s,this.bottom=a,this.near=o,this.far=c,this.updateProjectionMatrix()}copy(e,i){return super.copy(e,i),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,i,s,a,o,c){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=i,this.view.offsetX=s,this.view.offsetY=a,this.view.width=o,this.view.height=c,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),i=(this.top-this.bottom)/(2*this.zoom),s=(this.right+this.left)/2,a=(this.top+this.bottom)/2,o=s-e,c=s+e,d=a+i,g=a-i;if(this.view!==null&&this.view.enabled){let b=(this.right-this.left)/this.view.fullWidth/this.zoom,j=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=b*this.view.offsetX,c=o+b*this.view.width,d-=j*this.view.offsetY,g=d-j*this.view.height}this.projectionMatrix.makeOrthographic(o,c,d,g,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let i=super.toJSON(e);return i.object.zoom=this.zoom,i.object.left=this.left,i.object.right=this.right,i.object.top=this.top,i.object.bottom=this.bottom,i.object.near=this.near,i.object.far=this.far,this.view!==null&&(i.object.view=Object.assign({},this.view)),i}},zu=4,KT=[.125,.215,.35,.446,.526,.582],yc=20,IS=new Wu,ZT=new We,RS=null,gc=(1+Math.sqrt(5))/2,Nu=1/gc,JT=[new _(1,1,1),new _(-1,1,1),new _(1,1,-1),new _(-1,1,-1),new _(0,gc,Nu),new _(0,gc,-Nu),new _(Nu,0,gc),new _(-Nu,0,gc),new _(gc,Nu,0),new _(-gc,Nu,0)],Ay=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,i=0,s=.1,a=100){RS=this._renderer.getRenderTarget(),this._setSize(256);let o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(e,s,a,o),i>0&&this._blur(o,0,0,i),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e,i=null){return this._fromTexture(e,i)}fromCubemap(e,i=null){return this._fromTexture(e,i)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=tM(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=eM(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(RS),e.scissorTest=!1,ry(e,0,0,e.width,e.height)}_fromTexture(e,i){e.mapping===al||e.mapping===ll?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),RS=this._renderer.getRenderTarget();let s=i||this._allocateTargets();return this._textureToCubeUV(e,s),this._applyPMREM(s),this._cleanup(s),s}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),i=4*this._cubeSize,s={magFilter:tt,minFilter:tt,generateMipmaps:!1,type:va,format:Qr,encoding:Sn,depthBuffer:!1},a=$T(e,i,s);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==i){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=$T(e,i,s);let{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=fU(o)),this._blurMaterial=pU(o,e,i)}return a}_compileMaterial(e){let i=new sr(this._lodPlanes[0],e);this._renderer.compile(i,IS)}_sceneToCubeUV(e,i,s,a){let o=new ri(90,1,i,s),c=[1,-1,1,1,1,1],d=[1,1,1,-1,-1,-1],g=this._renderer,b=g.autoClear,j=g.toneMapping;g.getClearColor(ZT),g.toneMapping=Hs,g.autoClear=!1;let _e=new ts({name:"PMREM.Background",side:yi,depthWrite:!1,depthTest:!1}),$=new sr(new vi,_e),rt=!1,st=e.background;st?st.isColor&&(_e.color.copy(st),e.background=null,rt=!0):(_e.color.copy(ZT),rt=!0);for(let ut=0;ut<6;ut++){let gt=ut%3;gt===0?(o.up.set(0,c[ut],0),o.lookAt(d[ut],0,0)):gt===1?(o.up.set(0,0,c[ut]),o.lookAt(0,d[ut],0)):(o.up.set(0,c[ut],0),o.lookAt(0,0,d[ut]));let wt=this._cubeSize;ry(a,gt*wt,ut>2?wt:0,wt,wt),g.setRenderTarget(a),rt&&g.render($,o),g.render(e,o)}$.geometry.dispose(),$.material.dispose(),g.toneMapping=j,g.autoClear=b,e.background=st}_textureToCubeUV(e,i){let s=this._renderer,a=e.mapping===al||e.mapping===ll;a?(this._cubemapMaterial===null&&(this._cubemapMaterial=tM()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=eM());let o=a?this._cubemapMaterial:this._equirectMaterial,c=new sr(this._lodPlanes[0],o),d=o.uniforms;d.envMap.value=e;let g=this._cubeSize;ry(i,0,0,3*g,2*g),s.setRenderTarget(i),s.render(c,IS)}_applyPMREM(e){let i=this._renderer,s=i.autoClear;i.autoClear=!1;for(let a=1;a<this._lodPlanes.length;a++){let o=Math.sqrt(this._sigmas[a]*this._sigmas[a]-this._sigmas[a-1]*this._sigmas[a-1]),c=JT[(a-1)%JT.length];this._blur(e,a-1,a,o,c)}i.autoClear=s}_blur(e,i,s,a,o){let c=this._pingPongRenderTarget;this._halfBlur(e,c,i,s,a,"latitudinal",o),this._halfBlur(c,e,s,s,a,"longitudinal",o)}_halfBlur(e,i,s,a,o,c,d){let g=this._renderer,b=this._blurMaterial;c!=="latitudinal"&&c!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let j=3,_e=new sr(this._lodPlanes[a],b),$=b.uniforms,rt=this._sizeLods[s]-1,st=isFinite(o)?Math.PI/(2*rt):2*Math.PI/(2*yc-1),ut=o/st,gt=isFinite(o)?1+Math.floor(j*ut):yc;gt>yc&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${gt} samples when the maximum is set to ${yc}`);let wt=[],yt=0;for(let Pt=0;Pt<yc;++Pt){let It=Pt/ut,Lt=Math.exp(-It*It/2);wt.push(Lt),Pt===0?yt+=Lt:Pt<gt&&(yt+=2*Lt)}for(let Pt=0;Pt<wt.length;Pt++)wt[Pt]=wt[Pt]/yt;$.envMap.value=e.texture,$.samples.value=gt,$.weights.value=wt,$.latitudinal.value=c==="latitudinal",d&&($.poleAxis.value=d);let{_lodMax:At}=this;$.dTheta.value=st,$.mipInt.value=At-s;let Ct=this._sizeLods[a],Tt=3*Ct*(a>At-zu?a-At+zu:0),kt=4*(this._cubeSize-Ct);ry(i,Tt,kt,3*Ct,2*Ct),g.setRenderTarget(i),g.render(_e,IS)}};function fU(e){let i=[],s=[],a=[],o=e,c=e-zu+1+KT.length;for(let d=0;d<c;d++){let g=Math.pow(2,o);s.push(g);let b=1/g;d>e-zu?b=KT[d-e+zu-1]:d===0&&(b=0),a.push(b);let j=1/(g-2),_e=-j,$=1+j,rt=[_e,_e,$,_e,$,$,_e,_e,$,$,_e,$],st=6,ut=6,gt=3,wt=2,yt=1,At=new Float32Array(gt*ut*st),Ct=new Float32Array(wt*ut*st),Tt=new Float32Array(yt*ut*st);for(let Pt=0;Pt<st;Pt++){let It=Pt%3*2/3-1,Lt=Pt>2?0:-1,Nt=[It,Lt,0,It+2/3,Lt,0,It+2/3,Lt+1,0,It,Lt,0,It+2/3,Lt+1,0,It,Lt+1,0];At.set(Nt,gt*ut*Pt),Ct.set(rt,wt*ut*Pt);let Ht=[Pt,Pt,Pt,Pt,Pt,Pt];Tt.set(Ht,yt*ut*Pt)}let kt=new Pe;kt.setAttribute("position",new Xe(At,gt)),kt.setAttribute("uv",new Xe(Ct,wt)),kt.setAttribute("faceIndex",new Xe(Tt,yt)),i.push(kt),o>zu&&o--}return{lodPlanes:i,sizeLods:s,sigmas:a}}function $T(e,i,s){let a=new ft(e,i,s);return a.texture.mapping=ch,a.texture.name="PMREM.cubeUv",a.scissorTest=!0,a}function ry(e,i,s,a,o){e.viewport.set(i,s,a,o),e.scissor.set(i,s,a,o)}function pU(e,i,s){let a=new Float32Array(yc),o=new _(0,1,0);return new lt({name:"SphericalGaussianBlur",defines:{n:yc,CUBEUV_TEXEL_WIDTH:1/i,CUBEUV_TEXEL_HEIGHT:1/s,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:a},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:o}},vertexShader:Pw(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:er,depthTest:!1,depthWrite:!1})}function eM(){return new lt({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Pw(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:er,depthTest:!1,depthWrite:!1})}function tM(){return new lt({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Pw(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:er,depthTest:!1,depthWrite:!1})}function Pw(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function mU(e){let i=new WeakMap,s=null;function a(g){if(g&&g.isTexture){let b=g.mapping,j=b===GS||b===jS,_e=b===al||b===ll;if(j||_e)if(g.isRenderTargetTexture&&g.needsPMREMUpdate===!0){g.needsPMREMUpdate=!1;let $=i.get(g);return s===null&&(s=new Ay(e)),$=j?s.fromEquirectangular(g,$):s.fromCubemap(g,$),i.set(g,$),$.texture}else{if(i.has(g))return i.get(g).texture;{let $=g.image;if(j&&$&&$.height>0||_e&&$&&o($)){s===null&&(s=new Ay(e));let rt=j?s.fromEquirectangular(g):s.fromCubemap(g);return i.set(g,rt),g.addEventListener("dispose",c),rt.texture}else return null}}}return g}function o(g){let b=0,j=6;for(let _e=0;_e<j;_e++)g[_e]!==void 0&&b++;return b===j}function c(g){let b=g.target;b.removeEventListener("dispose",c);let j=i.get(b);j!==void 0&&(i.delete(b),j.dispose())}function d(){i=new WeakMap,s!==null&&(s.dispose(),s=null)}return{get:a,dispose:d}}function gU(e){let i={};function s(a){if(i[a]!==void 0)return i[a];let o;switch(a){case"WEBGL_depth_texture":o=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":o=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":o=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":o=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:o=e.getExtension(a)}return i[a]=o,o}return{has:function(a){return s(a)!==null},init:function(a){a.isWebGL2?s("EXT_color_buffer_float"):(s("WEBGL_depth_texture"),s("OES_texture_float"),s("OES_texture_half_float"),s("OES_texture_half_float_linear"),s("OES_standard_derivatives"),s("OES_element_index_uint"),s("OES_vertex_array_object"),s("ANGLE_instanced_arrays")),s("OES_texture_float_linear"),s("EXT_color_buffer_half_float"),s("WEBGL_multisampled_render_to_texture")},get:function(a){let o=s(a);return o===null&&console.warn("THREE.WebGLRenderer: "+a+" extension not supported."),o}}}function yU(e,i,s,a){let o={},c=new WeakMap;function d($){let rt=$.target;rt.index!==null&&i.remove(rt.index);for(let ut in rt.attributes)i.remove(rt.attributes[ut]);rt.removeEventListener("dispose",d),delete o[rt.id];let st=c.get(rt);st&&(i.remove(st),c.delete(rt)),a.releaseStatesOfGeometry(rt),rt.isInstancedBufferGeometry===!0&&delete rt._maxInstanceCount,s.memory.geometries--}function g($,rt){return o[rt.id]===!0||(rt.addEventListener("dispose",d),o[rt.id]=!0,s.memory.geometries++),rt}function b($){let rt=$.attributes;for(let ut in rt)i.update(rt[ut],34962);let st=$.morphAttributes;for(let ut in st){let gt=st[ut];for(let wt=0,yt=gt.length;wt<yt;wt++)i.update(gt[wt],34962)}}function j($){let rt=[],st=$.index,ut=$.attributes.position,gt=0;if(st!==null){let At=st.array;gt=st.version;for(let Ct=0,Tt=At.length;Ct<Tt;Ct+=3){let kt=At[Ct+0],Pt=At[Ct+1],It=At[Ct+2];rt.push(kt,Pt,Pt,It,It,kt)}}else{let At=ut.array;gt=ut.version;for(let Ct=0,Tt=At.length/3-1;Ct<Tt;Ct+=3){let kt=Ct+0,Pt=Ct+1,It=Ct+2;rt.push(kt,Pt,Pt,It,It,kt)}}let wt=new(YM(rt)?_o:wy)(rt,1);wt.version=gt;let yt=c.get($);yt&&i.remove(yt),c.set($,wt)}function _e($){let rt=c.get($);if(rt){let st=$.index;st!==null&&rt.version<st.version&&j($)}else j($);return c.get($)}return{get:g,update:b,getWireframeAttribute:_e}}function vU(e,i,s,a){let o=a.isWebGL2,c;function d(rt){c=rt}let g,b;function j(rt){g=rt.type,b=rt.bytesPerElement}function _e(rt,st){e.drawElements(c,st,g,rt*b),s.update(st,c,1)}function $(rt,st,ut){if(ut===0)return;let gt,wt;if(o)gt=e,wt="drawElementsInstanced";else if(gt=i.get("ANGLE_instanced_arrays"),wt="drawElementsInstancedANGLE",gt===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}gt[wt](c,st,g,rt*b,ut),s.update(st,c,ut)}this.setMode=d,this.setIndex=j,this.render=_e,this.renderInstances=$}function xU(e){let i={geometries:0,textures:0},s={frame:0,calls:0,triangles:0,points:0,lines:0};function a(c,d,g){switch(s.calls++,d){case 4:s.triangles+=g*(c/3);break;case 1:s.lines+=g*(c/2);break;case 3:s.lines+=g*(c-1);break;case 2:s.lines+=g*c;break;case 0:s.points+=g*c;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",d);break}}function o(){s.frame++,s.calls=0,s.triangles=0,s.points=0,s.lines=0}return{memory:i,render:s,programs:null,autoReset:!0,reset:o,update:a}}function bU(e,i){return e[0]-i[0]}function SU(e,i){return Math.abs(i[1])-Math.abs(e[1])}function wU(e,i,s){let a={},o=new Float32Array(8),c=new WeakMap,d=new Ke,g=[];for(let j=0;j<8;j++)g[j]=[j,0];function b(j,_e,$,rt){let st=j.morphTargetInfluences;if(i.isWebGL2===!0){let ut=_e.morphAttributes.position||_e.morphAttributes.normal||_e.morphAttributes.color,gt=ut!==void 0?ut.length:0,wt=c.get(_e);if(wt===void 0||wt.count!==gt){let Ct=function(){ds.dispose(),c.delete(_e),_e.removeEventListener("dispose",Ct)};wt!==void 0&&wt.texture.dispose();let Tt=_e.morphAttributes.position!==void 0,kt=_e.morphAttributes.normal!==void 0,Pt=_e.morphAttributes.color!==void 0,It=_e.morphAttributes.position||[],Lt=_e.morphAttributes.normal||[],Nt=_e.morphAttributes.color||[],Ht=0;Tt===!0&&(Ht=1),kt===!0&&(Ht=2),Pt===!0&&(Ht=3);let dr=_e.attributes.position.count*Ht,hs=1;dr>i.maxTextureSize&&(hs=Math.ceil(dr/i.maxTextureSize),dr=i.maxTextureSize);let _s=new Float32Array(dr*hs*4*gt),ds=new xy(_s,dr,hs,gt);ds.type=Sr$1,ds.needsUpdate=!0;let Nn=Ht*4;for(let us=0;us<gt;us++){let hn=It[us],Ft=Lt[us],Gr=Nt[us],gn=dr*hs*4*us;for(let un=0;un<hn.count;un++){let Zn=un*Nn;Tt===!0&&(d.fromBufferAttribute(hn,un),_s[gn+Zn+0]=d.x,_s[gn+Zn+1]=d.y,_s[gn+Zn+2]=d.z,_s[gn+Zn+3]=0),kt===!0&&(d.fromBufferAttribute(Ft,un),_s[gn+Zn+4]=d.x,_s[gn+Zn+5]=d.y,_s[gn+Zn+6]=d.z,_s[gn+Zn+7]=0),Pt===!0&&(d.fromBufferAttribute(Gr,un),_s[gn+Zn+8]=d.x,_s[gn+Zn+9]=d.y,_s[gn+Zn+10]=d.z,_s[gn+Zn+11]=Gr.itemSize===4?d.w:1)}}wt={count:gt,texture:ds,size:new z$1(dr,hs)},c.set(_e,wt),_e.addEventListener("dispose",Ct)}let yt=0;for(let Ct=0;Ct<st.length;Ct++)yt+=st[Ct];let At=_e.morphTargetsRelative?1:1-yt;rt.getUniforms().setValue(e,"morphTargetBaseInfluence",At),rt.getUniforms().setValue(e,"morphTargetInfluences",st),rt.getUniforms().setValue(e,"morphTargetsTexture",wt.texture,s),rt.getUniforms().setValue(e,"morphTargetsTextureSize",wt.size)}else{let ut=st===void 0?0:st.length,gt=a[_e.id];if(gt===void 0||gt.length!==ut){gt=[];for(let Tt=0;Tt<ut;Tt++)gt[Tt]=[Tt,0];a[_e.id]=gt}for(let Tt=0;Tt<ut;Tt++){let kt=gt[Tt];kt[0]=Tt,kt[1]=st[Tt]}gt.sort(SU);for(let Tt=0;Tt<8;Tt++)Tt<ut&&gt[Tt][1]?(g[Tt][0]=gt[Tt][0],g[Tt][1]=gt[Tt][1]):(g[Tt][0]=Number.MAX_SAFE_INTEGER,g[Tt][1]=0);g.sort(bU);let wt=_e.morphAttributes.position,yt=_e.morphAttributes.normal,At=0;for(let Tt=0;Tt<8;Tt++){let kt=g[Tt],Pt=kt[0],It=kt[1];Pt!==Number.MAX_SAFE_INTEGER&&It?(wt&&_e.getAttribute("morphTarget"+Tt)!==wt[Pt]&&_e.setAttribute("morphTarget"+Tt,wt[Pt]),yt&&_e.getAttribute("morphNormal"+Tt)!==yt[Pt]&&_e.setAttribute("morphNormal"+Tt,yt[Pt]),o[Tt]=It,At+=It):(wt&&_e.hasAttribute("morphTarget"+Tt)===!0&&_e.deleteAttribute("morphTarget"+Tt),yt&&_e.hasAttribute("morphNormal"+Tt)===!0&&_e.deleteAttribute("morphNormal"+Tt),o[Tt]=0)}let Ct=_e.morphTargetsRelative?1:1-At;rt.getUniforms().setValue(e,"morphTargetBaseInfluence",Ct),rt.getUniforms().setValue(e,"morphTargetInfluences",o)}}return{update:b}}function AU(e,i,s,a){let o=new WeakMap;function c(b){let j=a.render.frame,_e=b.geometry,$=i.get(b,_e);return o.get($)!==j&&(i.update($),o.set($,j)),b.isInstancedMesh&&(b.hasEventListener("dispose",g)===!1&&b.addEventListener("dispose",g),s.update(b.instanceMatrix,34962),b.instanceColor!==null&&s.update(b.instanceColor,34962)),$}function d(){o=new WeakMap}function g(b){let j=b.target;j.removeEventListener("dispose",g),s.remove(j.instanceMatrix),j.instanceColor!==null&&s.remove(j.instanceColor)}return{update:c,dispose:d}}var ZM=new tr,JM=new xy,$M=new by,eC=new Hu,rM=[],iM=[],nM=new Float32Array(16),sM=new Float32Array(9),oM=new Float32Array(4);function hh(e,i,s){let a=e[0];if(a<=0||a>0)return e;let o=i*s,c=rM[o];if(c===void 0&&(c=new Float32Array(o),rM[o]=c),i!==0){a.toArray(c,0);for(let d=1,g=0;d!==i;++d)g+=s,e[d].toArray(c,g)}return c}function Mi(e,i){if(e.length!==i.length)return!1;for(let s=0,a=e.length;s<a;s++)if(e[s]!==i[s])return!1;return!0}function Ci(e,i){for(let s=0,a=i.length;s<a;s++)e[s]=i[s]}function jy(e,i){let s=iM[i];s===void 0&&(s=new Int32Array(i),iM[i]=s);for(let a=0;a!==i;++a)s[a]=e.allocateTextureUnit();return s}function _U(e,i){let s=this.cache;s[0]!==i&&(e.uniform1f(this.addr,i),s[0]=i)}function EU(e,i){let s=this.cache;if(i.x!==void 0)(s[0]!==i.x||s[1]!==i.y)&&(e.uniform2f(this.addr,i.x,i.y),s[0]=i.x,s[1]=i.y);else{if(Mi(s,i))return;e.uniform2fv(this.addr,i),Ci(s,i)}}function TU(e,i){let s=this.cache;if(i.x!==void 0)(s[0]!==i.x||s[1]!==i.y||s[2]!==i.z)&&(e.uniform3f(this.addr,i.x,i.y,i.z),s[0]=i.x,s[1]=i.y,s[2]=i.z);else if(i.r!==void 0)(s[0]!==i.r||s[1]!==i.g||s[2]!==i.b)&&(e.uniform3f(this.addr,i.r,i.g,i.b),s[0]=i.r,s[1]=i.g,s[2]=i.b);else{if(Mi(s,i))return;e.uniform3fv(this.addr,i),Ci(s,i)}}function MU(e,i){let s=this.cache;if(i.x!==void 0)(s[0]!==i.x||s[1]!==i.y||s[2]!==i.z||s[3]!==i.w)&&(e.uniform4f(this.addr,i.x,i.y,i.z,i.w),s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=i.w);else{if(Mi(s,i))return;e.uniform4fv(this.addr,i),Ci(s,i)}}function CU(e,i){let s=this.cache,a=i.elements;if(a===void 0){if(Mi(s,i))return;e.uniformMatrix2fv(this.addr,!1,i),Ci(s,i)}else{if(Mi(s,a))return;oM.set(a),e.uniformMatrix2fv(this.addr,!1,oM),Ci(s,a)}}function PU(e,i){let s=this.cache,a=i.elements;if(a===void 0){if(Mi(s,i))return;e.uniformMatrix3fv(this.addr,!1,i),Ci(s,i)}else{if(Mi(s,a))return;sM.set(a),e.uniformMatrix3fv(this.addr,!1,sM),Ci(s,a)}}function DU(e,i){let s=this.cache,a=i.elements;if(a===void 0){if(Mi(s,i))return;e.uniformMatrix4fv(this.addr,!1,i),Ci(s,i)}else{if(Mi(s,a))return;nM.set(a),e.uniformMatrix4fv(this.addr,!1,nM),Ci(s,a)}}function OU(e,i){let s=this.cache;s[0]!==i&&(e.uniform1i(this.addr,i),s[0]=i)}function IU(e,i){let s=this.cache;if(i.x!==void 0)(s[0]!==i.x||s[1]!==i.y)&&(e.uniform2i(this.addr,i.x,i.y),s[0]=i.x,s[1]=i.y);else{if(Mi(s,i))return;e.uniform2iv(this.addr,i),Ci(s,i)}}function RU(e,i){let s=this.cache;if(i.x!==void 0)(s[0]!==i.x||s[1]!==i.y||s[2]!==i.z)&&(e.uniform3i(this.addr,i.x,i.y,i.z),s[0]=i.x,s[1]=i.y,s[2]=i.z);else{if(Mi(s,i))return;e.uniform3iv(this.addr,i),Ci(s,i)}}function LU(e,i){let s=this.cache;if(i.x!==void 0)(s[0]!==i.x||s[1]!==i.y||s[2]!==i.z||s[3]!==i.w)&&(e.uniform4i(this.addr,i.x,i.y,i.z,i.w),s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=i.w);else{if(Mi(s,i))return;e.uniform4iv(this.addr,i),Ci(s,i)}}function BU(e,i){let s=this.cache;s[0]!==i&&(e.uniform1ui(this.addr,i),s[0]=i)}function NU(e,i){let s=this.cache;if(i.x!==void 0)(s[0]!==i.x||s[1]!==i.y)&&(e.uniform2ui(this.addr,i.x,i.y),s[0]=i.x,s[1]=i.y);else{if(Mi(s,i))return;e.uniform2uiv(this.addr,i),Ci(s,i)}}function FU(e,i){let s=this.cache;if(i.x!==void 0)(s[0]!==i.x||s[1]!==i.y||s[2]!==i.z)&&(e.uniform3ui(this.addr,i.x,i.y,i.z),s[0]=i.x,s[1]=i.y,s[2]=i.z);else{if(Mi(s,i))return;e.uniform3uiv(this.addr,i),Ci(s,i)}}function kU(e,i){let s=this.cache;if(i.x!==void 0)(s[0]!==i.x||s[1]!==i.y||s[2]!==i.z||s[3]!==i.w)&&(e.uniform4ui(this.addr,i.x,i.y,i.z,i.w),s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=i.w);else{if(Mi(s,i))return;e.uniform4uiv(this.addr,i),Ci(s,i)}}function VU(e,i,s){let a=this.cache,o=s.allocateTextureUnit();a[0]!==o&&(e.uniform1i(this.addr,o),a[0]=o),s.setTexture2D(i||ZM,o)}function zU(e,i,s){let a=this.cache,o=s.allocateTextureUnit();a[0]!==o&&(e.uniform1i(this.addr,o),a[0]=o),s.setTexture3D(i||$M,o)}function UU(e,i,s){let a=this.cache,o=s.allocateTextureUnit();a[0]!==o&&(e.uniform1i(this.addr,o),a[0]=o),s.setTextureCube(i||eC,o)}function GU(e,i,s){let a=this.cache,o=s.allocateTextureUnit();a[0]!==o&&(e.uniform1i(this.addr,o),a[0]=o),s.setTexture2DArray(i||JM,o)}function jU(e){switch(e){case 5126:return _U;case 35664:return EU;case 35665:return TU;case 35666:return MU;case 35674:return CU;case 35675:return PU;case 35676:return DU;case 5124:case 35670:return OU;case 35667:case 35671:return IU;case 35668:case 35672:return RU;case 35669:case 35673:return LU;case 5125:return BU;case 36294:return NU;case 36295:return FU;case 36296:return kU;case 35678:case 36198:case 36298:case 36306:case 35682:return VU;case 35679:case 36299:case 36307:return zU;case 35680:case 36300:case 36308:case 36293:return UU;case 36289:case 36303:case 36311:case 36292:return GU}}function HU(e,i){e.uniform1fv(this.addr,i)}function WU(e,i){let s=hh(i,this.size,2);e.uniform2fv(this.addr,s)}function qU(e,i){let s=hh(i,this.size,3);e.uniform3fv(this.addr,s)}function YU(e,i){let s=hh(i,this.size,4);e.uniform4fv(this.addr,s)}function XU(e,i){let s=hh(i,this.size,4);e.uniformMatrix2fv(this.addr,!1,s)}function QU(e,i){let s=hh(i,this.size,9);e.uniformMatrix3fv(this.addr,!1,s)}function KU(e,i){let s=hh(i,this.size,16);e.uniformMatrix4fv(this.addr,!1,s)}function ZU(e,i){e.uniform1iv(this.addr,i)}function JU(e,i){e.uniform2iv(this.addr,i)}function $U(e,i){e.uniform3iv(this.addr,i)}function eG(e,i){e.uniform4iv(this.addr,i)}function tG(e,i){e.uniform1uiv(this.addr,i)}function rG(e,i){e.uniform2uiv(this.addr,i)}function iG(e,i){e.uniform3uiv(this.addr,i)}function nG(e,i){e.uniform4uiv(this.addr,i)}function sG(e,i,s){let a=this.cache,o=i.length,c=jy(s,o);Mi(a,c)||(e.uniform1iv(this.addr,c),Ci(a,c));for(let d=0;d!==o;++d)s.setTexture2D(i[d]||ZM,c[d])}function oG(e,i,s){let a=this.cache,o=i.length,c=jy(s,o);Mi(a,c)||(e.uniform1iv(this.addr,c),Ci(a,c));for(let d=0;d!==o;++d)s.setTexture3D(i[d]||$M,c[d])}function aG(e,i,s){let a=this.cache,o=i.length,c=jy(s,o);Mi(a,c)||(e.uniform1iv(this.addr,c),Ci(a,c));for(let d=0;d!==o;++d)s.setTextureCube(i[d]||eC,c[d])}function lG(e,i,s){let a=this.cache,o=i.length,c=jy(s,o);Mi(a,c)||(e.uniform1iv(this.addr,c),Ci(a,c));for(let d=0;d!==o;++d)s.setTexture2DArray(i[d]||JM,c[d])}function cG(e){switch(e){case 5126:return HU;case 35664:return WU;case 35665:return qU;case 35666:return YU;case 35674:return XU;case 35675:return QU;case 35676:return KU;case 5124:case 35670:return ZU;case 35667:case 35671:return JU;case 35668:case 35672:return $U;case 35669:case 35673:return eG;case 5125:return tG;case 36294:return rG;case 36295:return iG;case 36296:return nG;case 35678:case 36198:case 36298:case 36306:case 35682:return sG;case 35679:case 36299:case 36307:return oG;case 35680:case 36300:case 36308:case 36293:return aG;case 36289:case 36303:case 36311:case 36292:return lG}}var KS=class{constructor(e,i,s){this.id=e,this.addr=s,this.cache=[],this.setValue=jU(i.type)}},ZS=class{constructor(e,i,s){this.id=e,this.addr=s,this.cache=[],this.size=i.size,this.setValue=cG(i.type)}},JS=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,i,s){let a=this.seq;for(let o=0,c=a.length;o!==c;++o){let d=a[o];d.setValue(e,i[d.id],s)}}},LS=/(\w+)(\])?(\[|\.)?/g;function aM(e,i){e.seq.push(i),e.map[i.id]=i}function uG(e,i,s){let a=e.name,o=a.length;for(LS.lastIndex=0;;){let c=LS.exec(a),d=LS.lastIndex,g=c[1],b=c[2]==="]",j=c[3];if(b&&(g=g|0),j===void 0||j==="["&&d+2===o){aM(s,j===void 0?new KS(g,e,i):new ZS(g,e,i));break}else{let _e=s.map[g];_e===void 0&&(_e=new JS(g),aM(s,_e)),s=_e}}}var Gu=class{constructor(e,i){this.seq=[],this.map={};let s=e.getProgramParameter(i,35718);for(let a=0;a<s;++a){let o=e.getActiveUniform(i,a),c=e.getUniformLocation(i,o.name);uG(o,c,this)}}setValue(e,i,s,a){let o=this.map[i];o!==void 0&&o.setValue(e,s,a)}setOptional(e,i,s){let a=i[s];a!==void 0&&this.setValue(e,s,a)}static upload(e,i,s,a){for(let o=0,c=i.length;o!==c;++o){let d=i[o],g=s[d.id];g.needsUpdate!==!1&&d.setValue(e,g.value,a)}}static seqWithValue(e,i){let s=[];for(let a=0,o=e.length;a!==o;++a){let c=e[a];c.id in i&&s.push(c)}return s}};function lM(e,i,s){let a=e.createShader(i);return e.shaderSource(a,s),e.compileShader(a),a}var hG=0;function dG(e,i){let s=e.split(`
`),a=[],o=Math.max(i-6,0),c=Math.min(i+6,s.length);for(let d=o;d<c;d++){let g=d+1;a.push(`${g===i?">":" "} ${g}: ${s[d]}`)}return a.join(`
`)}function fG(e){switch(e){case Sn:return["Linear","( value )"];case at:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function cM(e,i,s){let a=e.getShaderParameter(i,35713),o=e.getShaderInfoLog(i).trim();if(a&&o==="")return"";let c=/ERROR: 0:(\d+)/.exec(o);if(c){let d=parseInt(c[1]);return s.toUpperCase()+`

`+o+`

`+dG(e.getShaderSource(i),d)}else return o}function pG(e,i){let s=fG(i);return"vec4 "+e+"( vec4 value ) { return LinearTo"+s[0]+s[1]+"; }"}function mG(e,i){let s;switch(i){case PF:s="Linear";break;case DF:s="Reinhard";break;case OF:s="OptimizedCineon";break;case IF:s="ACESFilmic";break;case RF:s="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",i),s="Linear"}return"vec3 "+e+"( vec3 color ) { return "+s+"ToneMapping( color ); }"}function gG(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||e.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(gp).join(`
`)}function yG(e){let i=[];for(let s in e){let a=e[s];a!==!1&&i.push("#define "+s+" "+a)}return i.join(`
`)}function vG(e,i){let s={},a=e.getProgramParameter(i,35721);for(let o=0;o<a;o++){let c=e.getActiveAttrib(i,o),d=c.name,g=1;c.type===35674&&(g=2),c.type===35675&&(g=3),c.type===35676&&(g=4),s[d]={type:c.type,location:e.getAttribLocation(i,d),locationSize:g}}return s}function gp(e){return e!==""}function uM(e,i){let s=i.numSpotLightShadows+i.numSpotLightMaps-i.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,i.numDirLights).replace(/NUM_SPOT_LIGHTS/g,i.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,i.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,s).replace(/NUM_RECT_AREA_LIGHTS/g,i.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,i.numPointLights).replace(/NUM_HEMI_LIGHTS/g,i.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,i.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,i.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,i.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,i.numPointLightShadows)}function hM(e,i){return e.replace(/NUM_CLIPPING_PLANES/g,i.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,i.numClippingPlanes-i.numClipIntersection)}var xG=/^[ \t]*#include +<([\w\d./]+)>/gm;function $S(e){return e.replace(xG,bG)}function bG(e,i){let s=bt[i];if(s===void 0)throw new Error("Can not resolve #include <"+i+">");return $S(s)}var SG=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function dM(e){return e.replace(SG,wG)}function wG(e,i,s,a){let o="";for(let c=parseInt(i);c<parseInt(s);c++)o+=a.replace(/\[\s*i\s*\]/g,"[ "+c+" ]").replace(/UNROLLED_LOOP_INDEX/g,c);return o}function fM(e){let i="precision "+e.precision+` float;
precision `+e.precision+" int;";return e.precision==="highp"?i+=`
#define HIGH_PRECISION`:e.precision==="mediump"?i+=`
#define MEDIUM_PRECISION`:e.precision==="lowp"&&(i+=`
#define LOW_PRECISION`),i}function AG(e){let i="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===Gy?i="SHADOWMAP_TYPE_PCF":e.shadowMapType===aF?i="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===mp&&(i="SHADOWMAP_TYPE_VSM"),i}function _G(e){let i="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case al:case ll:i="ENVMAP_TYPE_CUBE";break;case ch:i="ENVMAP_TYPE_CUBE_UV";break}return i}function EG(e){let i="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case ll:i="ENVMAP_MODE_REFRACTION";break}return i}function TG(e){let i="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case GM:i="ENVMAP_BLENDING_MULTIPLY";break;case MF:i="ENVMAP_BLENDING_MIX";break;case CF:i="ENVMAP_BLENDING_ADD";break}return i}function MG(e){let i=e.envMapCubeUVHeight;if(i===null)return null;let s=Math.log2(i)-2,a=1/i;return{texelWidth:1/(3*Math.max(Math.pow(2,s),7*16)),texelHeight:a,maxMip:s}}function CG(e,i,s,a){let o=e.getContext(),c=s.defines,d=s.vertexShader,g=s.fragmentShader,b=AG(s),j=_G(s),_e=EG(s),$=TG(s),rt=MG(s),st=s.isWebGL2?"":gG(s),ut=yG(c),gt=o.createProgram(),wt,yt,At=s.glslVersion?"#version "+s.glslVersion+`
`:"";s.isRawShaderMaterial?(wt=[ut].filter(gp).join(`
`),wt.length>0&&(wt+=`
`),yt=[st,ut].filter(gp).join(`
`),yt.length>0&&(yt+=`
`)):(wt=[fM(s),"#define SHADER_NAME "+s.shaderName,ut,s.instancing?"#define USE_INSTANCING":"",s.instancingColor?"#define USE_INSTANCING_COLOR":"",s.supportsVertexTextures?"#define VERTEX_TEXTURES":"",s.useFog&&s.fog?"#define USE_FOG":"",s.useFog&&s.fogExp2?"#define FOG_EXP2":"",s.map?"#define USE_MAP":"",s.envMap?"#define USE_ENVMAP":"",s.envMap?"#define "+_e:"",s.lightMap?"#define USE_LIGHTMAP":"",s.aoMap?"#define USE_AOMAP":"",s.emissiveMap?"#define USE_EMISSIVEMAP":"",s.bumpMap?"#define USE_BUMPMAP":"",s.normalMap?"#define USE_NORMALMAP":"",s.normalMap&&s.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",s.normalMap&&s.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",s.clearcoatMap?"#define USE_CLEARCOATMAP":"",s.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",s.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",s.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",s.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",s.displacementMap&&s.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",s.specularMap?"#define USE_SPECULARMAP":"",s.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",s.specularColorMap?"#define USE_SPECULARCOLORMAP":"",s.roughnessMap?"#define USE_ROUGHNESSMAP":"",s.metalnessMap?"#define USE_METALNESSMAP":"",s.alphaMap?"#define USE_ALPHAMAP":"",s.transmission?"#define USE_TRANSMISSION":"",s.transmissionMap?"#define USE_TRANSMISSIONMAP":"",s.thicknessMap?"#define USE_THICKNESSMAP":"",s.sheenColorMap?"#define USE_SHEENCOLORMAP":"",s.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",s.vertexTangents?"#define USE_TANGENT":"",s.vertexColors?"#define USE_COLOR":"",s.vertexAlphas?"#define USE_COLOR_ALPHA":"",s.vertexUvs?"#define USE_UV":"",s.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",s.flatShading?"#define FLAT_SHADED":"",s.skinning?"#define USE_SKINNING":"",s.morphTargets?"#define USE_MORPHTARGETS":"",s.morphNormals&&s.flatShading===!1?"#define USE_MORPHNORMALS":"",s.morphColors&&s.isWebGL2?"#define USE_MORPHCOLORS":"",s.morphTargetsCount>0&&s.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",s.morphTargetsCount>0&&s.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+s.morphTextureStride:"",s.morphTargetsCount>0&&s.isWebGL2?"#define MORPHTARGETS_COUNT "+s.morphTargetsCount:"",s.doubleSided?"#define DOUBLE_SIDED":"",s.flipSided?"#define FLIP_SIDED":"",s.shadowMapEnabled?"#define USE_SHADOWMAP":"",s.shadowMapEnabled?"#define "+b:"",s.sizeAttenuation?"#define USE_SIZEATTENUATION":"",s.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",s.logarithmicDepthBuffer&&s.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(gp).join(`
`),yt=[st,fM(s),"#define SHADER_NAME "+s.shaderName,ut,s.useFog&&s.fog?"#define USE_FOG":"",s.useFog&&s.fogExp2?"#define FOG_EXP2":"",s.map?"#define USE_MAP":"",s.matcap?"#define USE_MATCAP":"",s.envMap?"#define USE_ENVMAP":"",s.envMap?"#define "+j:"",s.envMap?"#define "+_e:"",s.envMap?"#define "+$:"",rt?"#define CUBEUV_TEXEL_WIDTH "+rt.texelWidth:"",rt?"#define CUBEUV_TEXEL_HEIGHT "+rt.texelHeight:"",rt?"#define CUBEUV_MAX_MIP "+rt.maxMip+".0":"",s.lightMap?"#define USE_LIGHTMAP":"",s.aoMap?"#define USE_AOMAP":"",s.emissiveMap?"#define USE_EMISSIVEMAP":"",s.bumpMap?"#define USE_BUMPMAP":"",s.normalMap?"#define USE_NORMALMAP":"",s.normalMap&&s.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",s.normalMap&&s.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",s.clearcoat?"#define USE_CLEARCOAT":"",s.clearcoatMap?"#define USE_CLEARCOATMAP":"",s.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",s.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",s.iridescence?"#define USE_IRIDESCENCE":"",s.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",s.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",s.specularMap?"#define USE_SPECULARMAP":"",s.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",s.specularColorMap?"#define USE_SPECULARCOLORMAP":"",s.roughnessMap?"#define USE_ROUGHNESSMAP":"",s.metalnessMap?"#define USE_METALNESSMAP":"",s.alphaMap?"#define USE_ALPHAMAP":"",s.alphaTest?"#define USE_ALPHATEST":"",s.sheen?"#define USE_SHEEN":"",s.sheenColorMap?"#define USE_SHEENCOLORMAP":"",s.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",s.transmission?"#define USE_TRANSMISSION":"",s.transmissionMap?"#define USE_TRANSMISSIONMAP":"",s.thicknessMap?"#define USE_THICKNESSMAP":"",s.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",s.vertexTangents?"#define USE_TANGENT":"",s.vertexColors||s.instancingColor?"#define USE_COLOR":"",s.vertexAlphas?"#define USE_COLOR_ALPHA":"",s.vertexUvs?"#define USE_UV":"",s.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",s.gradientMap?"#define USE_GRADIENTMAP":"",s.flatShading?"#define FLAT_SHADED":"",s.doubleSided?"#define DOUBLE_SIDED":"",s.flipSided?"#define FLIP_SIDED":"",s.shadowMapEnabled?"#define USE_SHADOWMAP":"",s.shadowMapEnabled?"#define "+b:"",s.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",s.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",s.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",s.logarithmicDepthBuffer&&s.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",s.toneMapping!==Hs?"#define TONE_MAPPING":"",s.toneMapping!==Hs?bt.tonemapping_pars_fragment:"",s.toneMapping!==Hs?mG("toneMapping",s.toneMapping):"",s.dithering?"#define DITHERING":"",s.opaque?"#define OPAQUE":"",bt.encodings_pars_fragment,pG("linearToOutputTexel",s.outputEncoding),s.useDepthPacking?"#define DEPTH_PACKING "+s.depthPacking:"",`
`].filter(gp).join(`
`)),d=$S(d),d=uM(d,s),d=hM(d,s),g=$S(g),g=uM(g,s),g=hM(g,s),d=dM(d),g=dM(g),s.isWebGL2&&s.isRawShaderMaterial!==!0&&(At=`#version 300 es
`,wt=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+wt,yt=["#define varying in",s.glslVersion===kT?"":"layout(location = 0) out highp vec4 pc_fragColor;",s.glslVersion===kT?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+yt);let Ct=At+wt+d,Tt=At+yt+g,kt=lM(o,35633,Ct),Pt=lM(o,35632,Tt);if(o.attachShader(gt,kt),o.attachShader(gt,Pt),s.index0AttributeName!==void 0?o.bindAttribLocation(gt,0,s.index0AttributeName):s.morphTargets===!0&&o.bindAttribLocation(gt,0,"position"),o.linkProgram(gt),e.debug.checkShaderErrors){let Nt=o.getProgramInfoLog(gt).trim(),Ht=o.getShaderInfoLog(kt).trim(),dr=o.getShaderInfoLog(Pt).trim(),hs=!0,_s=!0;if(o.getProgramParameter(gt,35714)===!1){hs=!1;let ds=cM(o,kt,"vertex"),Nn=cM(o,Pt,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(gt,35715)+`

Program Info Log: `+Nt+`
`+ds+`
`+Nn)}else Nt!==""?console.warn("THREE.WebGLProgram: Program Info Log:",Nt):(Ht===""||dr==="")&&(_s=!1);_s&&(this.diagnostics={runnable:hs,programLog:Nt,vertexShader:{log:Ht,prefix:wt},fragmentShader:{log:dr,prefix:yt}})}o.deleteShader(kt),o.deleteShader(Pt);let It;this.getUniforms=function(){return It===void 0&&(It=new Gu(o,gt)),It};let Lt;return this.getAttributes=function(){return Lt===void 0&&(Lt=vG(o,gt)),Lt},this.destroy=function(){a.releaseStatesOfProgram(this),o.deleteProgram(gt),this.program=void 0},this.name=s.shaderName,this.id=hG++,this.cacheKey=i,this.usedTimes=1,this.program=gt,this.vertexShader=kt,this.fragmentShader=Pt,this}var PG=0,ew=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let i=e.vertexShader,s=e.fragmentShader,a=this._getShaderStage(i),o=this._getShaderStage(s),c=this._getShaderCacheForMaterial(e);return c.has(a)===!1&&(c.add(a),a.usedTimes++),c.has(o)===!1&&(c.add(o),o.usedTimes++),this}remove(e){let i=this.materialCache.get(e);for(let s of i)s.usedTimes--,s.usedTimes===0&&this.shaderCache.delete(s.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let i=this.materialCache,s=i.get(e);return s===void 0&&(s=new Set,i.set(e,s)),s}_getShaderStage(e){let i=this.shaderCache,s=i.get(e);return s===void 0&&(s=new tw(e),i.set(e,s)),s}},tw=class{constructor(e){this.id=PG++,this.code=e,this.usedTimes=0}};function DG(e,i,s,a,o,c,d){let g=new Ep,b=new ew,j=[],_e=o.isWebGL2,$=o.logarithmicDepthBuffer,rt=o.vertexTextures,st=o.precision,ut={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function gt(Lt,Nt,Ht,dr,hs){let _s=dr.fog,ds=hs.geometry,Nn=Lt.isMeshStandardMaterial?dr.environment:null,us=(Lt.isMeshStandardMaterial?s:i).get(Lt.envMap||Nn),hn=us&&us.mapping===ch?us.image.height:null,Ft=ut[Lt.type];Lt.precision!==null&&(st=o.getMaxPrecision(Lt.precision),st!==Lt.precision&&console.warn("THREE.WebGLProgram.getParameters:",Lt.precision,"not supported, using",st,"instead."));let Gr=ds.morphAttributes.position||ds.morphAttributes.normal||ds.morphAttributes.color,gn=Gr!==void 0?Gr.length:0,un=0;ds.morphAttributes.position!==void 0&&(un=1),ds.morphAttributes.normal!==void 0&&(un=2),ds.morphAttributes.color!==void 0&&(un=3);let Zn,xu,ou,sp;if(Ft){let q1=Ao[Ft];Zn=q1.vertexShader,xu=q1.fragmentShader}else Zn=Lt.vertexShader,xu=Lt.fragmentShader,b.update(Lt),ou=b.getVertexShaderID(Lt),sp=b.getFragmentShaderID(Lt);let wu=e.getRenderTarget(),l1=Lt.alphaTest>0,P0=Lt.clearcoat>0,B0=Lt.iridescence>0;return{isWebGL2:_e,shaderID:Ft,shaderName:Lt.type,vertexShader:Zn,fragmentShader:xu,defines:Lt.defines,customVertexShaderID:ou,customFragmentShaderID:sp,isRawShaderMaterial:Lt.isRawShaderMaterial===!0,glslVersion:Lt.glslVersion,precision:st,instancing:hs.isInstancedMesh===!0,instancingColor:hs.isInstancedMesh===!0&&hs.instanceColor!==null,supportsVertexTextures:rt,outputEncoding:wu===null?e.outputEncoding:wu.isXRRenderTarget===!0?wu.texture.encoding:Sn,map:!!Lt.map,matcap:!!Lt.matcap,envMap:!!us,envMapMode:us&&us.mapping,envMapCubeUVHeight:hn,lightMap:!!Lt.lightMap,aoMap:!!Lt.aoMap,emissiveMap:!!Lt.emissiveMap,bumpMap:!!Lt.bumpMap,normalMap:!!Lt.normalMap,objectSpaceNormalMap:Lt.normalMapType===KF,tangentSpaceNormalMap:Lt.normalMapType===QF,decodeVideoTexture:!!Lt.map&&Lt.map.isVideoTexture===!0&&Lt.map.encoding===at,clearcoat:P0,clearcoatMap:P0&&!!Lt.clearcoatMap,clearcoatRoughnessMap:P0&&!!Lt.clearcoatRoughnessMap,clearcoatNormalMap:P0&&!!Lt.clearcoatNormalMap,iridescence:B0,iridescenceMap:B0&&!!Lt.iridescenceMap,iridescenceThicknessMap:B0&&!!Lt.iridescenceThicknessMap,displacementMap:!!Lt.displacementMap,roughnessMap:!!Lt.roughnessMap,metalnessMap:!!Lt.metalnessMap,specularMap:!!Lt.specularMap,specularIntensityMap:!!Lt.specularIntensityMap,specularColorMap:!!Lt.specularColorMap,opaque:Lt.transparent===!1&&Lt.blending===sl,alphaMap:!!Lt.alphaMap,alphaTest:l1,gradientMap:!!Lt.gradientMap,sheen:Lt.sheen>0,sheenColorMap:!!Lt.sheenColorMap,sheenRoughnessMap:!!Lt.sheenRoughnessMap,transmission:Lt.transmission>0,transmissionMap:!!Lt.transmissionMap,thicknessMap:!!Lt.thicknessMap,combine:Lt.combine,vertexTangents:!!Lt.normalMap&&!!ds.attributes.tangent,vertexColors:Lt.vertexColors,vertexAlphas:Lt.vertexColors===!0&&!!ds.attributes.color&&ds.attributes.color.itemSize===4,vertexUvs:!!Lt.map||!!Lt.bumpMap||!!Lt.normalMap||!!Lt.specularMap||!!Lt.alphaMap||!!Lt.emissiveMap||!!Lt.roughnessMap||!!Lt.metalnessMap||!!Lt.clearcoatMap||!!Lt.clearcoatRoughnessMap||!!Lt.clearcoatNormalMap||!!Lt.iridescenceMap||!!Lt.iridescenceThicknessMap||!!Lt.displacementMap||!!Lt.transmissionMap||!!Lt.thicknessMap||!!Lt.specularIntensityMap||!!Lt.specularColorMap||!!Lt.sheenColorMap||!!Lt.sheenRoughnessMap,uvsVertexOnly:!(Lt.map||Lt.bumpMap||Lt.normalMap||Lt.specularMap||Lt.alphaMap||Lt.emissiveMap||Lt.roughnessMap||Lt.metalnessMap||Lt.clearcoatNormalMap||Lt.iridescenceMap||Lt.iridescenceThicknessMap||Lt.transmission>0||Lt.transmissionMap||Lt.thicknessMap||Lt.specularIntensityMap||Lt.specularColorMap||Lt.sheen>0||Lt.sheenColorMap||Lt.sheenRoughnessMap)&&!!Lt.displacementMap,fog:!!_s,useFog:Lt.fog===!0,fogExp2:_s&&_s.isFogExp2,flatShading:!!Lt.flatShading,sizeAttenuation:Lt.sizeAttenuation,logarithmicDepthBuffer:$,skinning:hs.isSkinnedMesh===!0,morphTargets:ds.morphAttributes.position!==void 0,morphNormals:ds.morphAttributes.normal!==void 0,morphColors:ds.morphAttributes.color!==void 0,morphTargetsCount:gn,morphTextureStride:un,numDirLights:Nt.directional.length,numPointLights:Nt.point.length,numSpotLights:Nt.spot.length,numSpotLightMaps:Nt.spotLightMap.length,numRectAreaLights:Nt.rectArea.length,numHemiLights:Nt.hemi.length,numDirLightShadows:Nt.directionalShadowMap.length,numPointLightShadows:Nt.pointShadowMap.length,numSpotLightShadows:Nt.spotShadowMap.length,numSpotLightShadowsWithMaps:Nt.numSpotLightShadowsWithMaps,numClippingPlanes:d.numPlanes,numClipIntersection:d.numIntersection,dithering:Lt.dithering,shadowMapEnabled:e.shadowMap.enabled&&Ht.length>0,shadowMapType:e.shadowMap.type,toneMapping:Lt.toneMapped?e.toneMapping:Hs,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:Lt.premultipliedAlpha,doubleSided:Lt.side===tn,flipSided:Lt.side===yi,useDepthPacking:!!Lt.depthPacking,depthPacking:Lt.depthPacking||0,index0AttributeName:Lt.index0AttributeName,extensionDerivatives:Lt.extensions&&Lt.extensions.derivatives,extensionFragDepth:Lt.extensions&&Lt.extensions.fragDepth,extensionDrawBuffers:Lt.extensions&&Lt.extensions.drawBuffers,extensionShaderTextureLOD:Lt.extensions&&Lt.extensions.shaderTextureLOD,rendererExtensionFragDepth:_e||a.has("EXT_frag_depth"),rendererExtensionDrawBuffers:_e||a.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:_e||a.has("EXT_shader_texture_lod"),customProgramCacheKey:Lt.customProgramCacheKey()}}function wt(Lt){let Nt=[];if(Lt.shaderID?Nt.push(Lt.shaderID):(Nt.push(Lt.customVertexShaderID),Nt.push(Lt.customFragmentShaderID)),Lt.defines!==void 0)for(let Ht in Lt.defines)Nt.push(Ht),Nt.push(Lt.defines[Ht]);return Lt.isRawShaderMaterial===!1&&(yt(Nt,Lt),At(Nt,Lt),Nt.push(e.outputEncoding)),Nt.push(Lt.customProgramCacheKey),Nt.join()}function yt(Lt,Nt){Lt.push(Nt.precision),Lt.push(Nt.outputEncoding),Lt.push(Nt.envMapMode),Lt.push(Nt.envMapCubeUVHeight),Lt.push(Nt.combine),Lt.push(Nt.vertexUvs),Lt.push(Nt.fogExp2),Lt.push(Nt.sizeAttenuation),Lt.push(Nt.morphTargetsCount),Lt.push(Nt.morphAttributeCount),Lt.push(Nt.numDirLights),Lt.push(Nt.numPointLights),Lt.push(Nt.numSpotLights),Lt.push(Nt.numSpotLightMaps),Lt.push(Nt.numHemiLights),Lt.push(Nt.numRectAreaLights),Lt.push(Nt.numDirLightShadows),Lt.push(Nt.numPointLightShadows),Lt.push(Nt.numSpotLightShadows),Lt.push(Nt.numSpotLightShadowsWithMaps),Lt.push(Nt.shadowMapType),Lt.push(Nt.toneMapping),Lt.push(Nt.numClippingPlanes),Lt.push(Nt.numClipIntersection),Lt.push(Nt.depthPacking)}function At(Lt,Nt){g.disableAll(),Nt.isWebGL2&&g.enable(0),Nt.supportsVertexTextures&&g.enable(1),Nt.instancing&&g.enable(2),Nt.instancingColor&&g.enable(3),Nt.map&&g.enable(4),Nt.matcap&&g.enable(5),Nt.envMap&&g.enable(6),Nt.lightMap&&g.enable(7),Nt.aoMap&&g.enable(8),Nt.emissiveMap&&g.enable(9),Nt.bumpMap&&g.enable(10),Nt.normalMap&&g.enable(11),Nt.objectSpaceNormalMap&&g.enable(12),Nt.tangentSpaceNormalMap&&g.enable(13),Nt.clearcoat&&g.enable(14),Nt.clearcoatMap&&g.enable(15),Nt.clearcoatRoughnessMap&&g.enable(16),Nt.clearcoatNormalMap&&g.enable(17),Nt.iridescence&&g.enable(18),Nt.iridescenceMap&&g.enable(19),Nt.iridescenceThicknessMap&&g.enable(20),Nt.displacementMap&&g.enable(21),Nt.specularMap&&g.enable(22),Nt.roughnessMap&&g.enable(23),Nt.metalnessMap&&g.enable(24),Nt.gradientMap&&g.enable(25),Nt.alphaMap&&g.enable(26),Nt.alphaTest&&g.enable(27),Nt.vertexColors&&g.enable(28),Nt.vertexAlphas&&g.enable(29),Nt.vertexUvs&&g.enable(30),Nt.vertexTangents&&g.enable(31),Nt.uvsVertexOnly&&g.enable(32),Lt.push(g.mask),g.disableAll(),Nt.fog&&g.enable(0),Nt.useFog&&g.enable(1),Nt.flatShading&&g.enable(2),Nt.logarithmicDepthBuffer&&g.enable(3),Nt.skinning&&g.enable(4),Nt.morphTargets&&g.enable(5),Nt.morphNormals&&g.enable(6),Nt.morphColors&&g.enable(7),Nt.premultipliedAlpha&&g.enable(8),Nt.shadowMapEnabled&&g.enable(9),Nt.physicallyCorrectLights&&g.enable(10),Nt.doubleSided&&g.enable(11),Nt.flipSided&&g.enable(12),Nt.useDepthPacking&&g.enable(13),Nt.dithering&&g.enable(14),Nt.specularIntensityMap&&g.enable(15),Nt.specularColorMap&&g.enable(16),Nt.transmission&&g.enable(17),Nt.transmissionMap&&g.enable(18),Nt.thicknessMap&&g.enable(19),Nt.sheen&&g.enable(20),Nt.sheenColorMap&&g.enable(21),Nt.sheenRoughnessMap&&g.enable(22),Nt.decodeVideoTexture&&g.enable(23),Nt.opaque&&g.enable(24),Lt.push(g.mask)}function Ct(Lt){let Nt=ut[Lt.type],Ht;if(Nt){let dr=Ao[Nt];Ht=Xs.clone(dr.uniforms)}else Ht=Lt.uniforms;return Ht}function Tt(Lt,Nt){let Ht;for(let dr=0,hs=j.length;dr<hs;dr++){let _s=j[dr];if(_s.cacheKey===Nt){Ht=_s,++Ht.usedTimes;break}}return Ht===void 0&&(Ht=new CG(e,Nt,Lt,c),j.push(Ht)),Ht}function kt(Lt){if(--Lt.usedTimes===0){let Nt=j.indexOf(Lt);j[Nt]=j[j.length-1],j.pop(),Lt.destroy()}}function Pt(Lt){b.remove(Lt)}function It(){b.dispose()}return{getParameters:gt,getProgramCacheKey:wt,getUniforms:Ct,acquireProgram:Tt,releaseProgram:kt,releaseShaderCache:Pt,programs:j,dispose:It}}function OG(){let e=new WeakMap;function i(c){let d=e.get(c);return d===void 0&&(d={},e.set(c,d)),d}function s(c){e.delete(c)}function a(c,d,g){e.get(c)[d]=g}function o(){e=new WeakMap}return{get:i,remove:s,update:a,dispose:o}}function IG(e,i){return e.groupOrder!==i.groupOrder?e.groupOrder-i.groupOrder:e.renderOrder!==i.renderOrder?e.renderOrder-i.renderOrder:e.material.id!==i.material.id?e.material.id-i.material.id:e.z!==i.z?e.z-i.z:e.id-i.id}function pM(e,i){return e.groupOrder!==i.groupOrder?e.groupOrder-i.groupOrder:e.renderOrder!==i.renderOrder?e.renderOrder-i.renderOrder:e.z!==i.z?i.z-e.z:e.id-i.id}function mM(){let e=[],i=0,s=[],a=[],o=[];function c(){i=0,s.length=0,a.length=0,o.length=0}function d($,rt,st,ut,gt,wt){let yt=e[i];return yt===void 0?(yt={id:$.id,object:$,geometry:rt,material:st,groupOrder:ut,renderOrder:$.renderOrder,z:gt,group:wt},e[i]=yt):(yt.id=$.id,yt.object=$,yt.geometry=rt,yt.material=st,yt.groupOrder=ut,yt.renderOrder=$.renderOrder,yt.z=gt,yt.group=wt),i++,yt}function g($,rt,st,ut,gt,wt){let yt=d($,rt,st,ut,gt,wt);st.transmission>0?a.push(yt):st.transparent===!0?o.push(yt):s.push(yt)}function b($,rt,st,ut,gt,wt){let yt=d($,rt,st,ut,gt,wt);st.transmission>0?a.unshift(yt):st.transparent===!0?o.unshift(yt):s.unshift(yt)}function j($,rt){s.length>1&&s.sort($||IG),a.length>1&&a.sort(rt||pM),o.length>1&&o.sort(rt||pM)}function _e(){for(let $=i,rt=e.length;$<rt;$++){let st=e[$];if(st.id===null)break;st.id=null,st.object=null,st.geometry=null,st.material=null,st.group=null}}return{opaque:s,transmissive:a,transparent:o,init:c,push:g,unshift:b,finish:_e,sort:j}}function RG(){let e=new WeakMap;function i(a,o){let c=e.get(a),d;return c===void 0?(d=new mM,e.set(a,[d])):o>=c.length?(d=new mM,c.push(d)):d=c[o],d}function s(){e=new WeakMap}return{get:i,dispose:s}}function LG(){let e={};return{get:function(i){if(e[i.id]!==void 0)return e[i.id];let s;switch(i.type){case"DirectionalLight":s={direction:new _,color:new We};break;case"SpotLight":s={position:new _,direction:new _,color:new We,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":s={position:new _,color:new We,distance:0,decay:0};break;case"HemisphereLight":s={direction:new _,skyColor:new We,groundColor:new We};break;case"RectAreaLight":s={color:new We,position:new _,halfWidth:new _,halfHeight:new _};break}return e[i.id]=s,s}}}function BG(){let e={};return{get:function(i){if(e[i.id]!==void 0)return e[i.id];let s;switch(i.type){case"DirectionalLight":s={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new z$1};break;case"SpotLight":s={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new z$1};break;case"PointLight":s={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new z$1,shadowCameraNear:1,shadowCameraFar:1e3};break}return e[i.id]=s,s}}}var NG=0;function FG(e,i){return(i.castShadow?2:0)-(e.castShadow?2:0)+(i.map?1:0)-(e.map?1:0)}function kG(e,i){let s=new LG,a=BG(),o={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let _e=0;_e<9;_e++)o.probe.push(new _);let c=new _,d=new ce$1,g=new ce$1;function b(_e,$){let rt=0,st=0,ut=0;for(let dr=0;dr<9;dr++)o.probe[dr].set(0,0,0);let gt=0,wt=0,yt=0,At=0,Ct=0,Tt=0,kt=0,Pt=0,It=0,Lt=0;_e.sort(FG);let Nt=$!==!0?Math.PI:1;for(let dr=0,hs=_e.length;dr<hs;dr++){let _s=_e[dr],ds=_s.color,Nn=_s.intensity,us=_s.distance,hn=_s.shadow&&_s.shadow.map?_s.shadow.map.texture:null;if(_s.isAmbientLight)rt+=ds.r*Nn*Nt,st+=ds.g*Nn*Nt,ut+=ds.b*Nn*Nt;else if(_s.isLightProbe)for(let Ft=0;Ft<9;Ft++)o.probe[Ft].addScaledVector(_s.sh.coefficients[Ft],Nn);else if(_s.isDirectionalLight){let Ft=s.get(_s);if(Ft.color.copy(_s.color).multiplyScalar(_s.intensity*Nt),_s.castShadow){let Gr=_s.shadow,gn=a.get(_s);gn.shadowBias=Gr.bias,gn.shadowNormalBias=Gr.normalBias,gn.shadowRadius=Gr.radius,gn.shadowMapSize=Gr.mapSize,o.directionalShadow[gt]=gn,o.directionalShadowMap[gt]=hn,o.directionalShadowMatrix[gt]=_s.shadow.matrix,Tt++}o.directional[gt]=Ft,gt++}else if(_s.isSpotLight){let Ft=s.get(_s);Ft.position.setFromMatrixPosition(_s.matrixWorld),Ft.color.copy(ds).multiplyScalar(Nn*Nt),Ft.distance=us,Ft.coneCos=Math.cos(_s.angle),Ft.penumbraCos=Math.cos(_s.angle*(1-_s.penumbra)),Ft.decay=_s.decay,o.spot[yt]=Ft;let Gr=_s.shadow;if(_s.map&&(o.spotLightMap[It]=_s.map,It++,Gr.updateMatrices(_s),_s.castShadow&&Lt++),o.spotLightMatrix[yt]=Gr.matrix,_s.castShadow){let gn=a.get(_s);gn.shadowBias=Gr.bias,gn.shadowNormalBias=Gr.normalBias,gn.shadowRadius=Gr.radius,gn.shadowMapSize=Gr.mapSize,o.spotShadow[yt]=gn,o.spotShadowMap[yt]=hn,Pt++}yt++}else if(_s.isRectAreaLight){let Ft=s.get(_s);Ft.color.copy(ds).multiplyScalar(Nn),Ft.halfWidth.set(_s.width*.5,0,0),Ft.halfHeight.set(0,_s.height*.5,0),o.rectArea[At]=Ft,At++}else if(_s.isPointLight){let Ft=s.get(_s);if(Ft.color.copy(_s.color).multiplyScalar(_s.intensity*Nt),Ft.distance=_s.distance,Ft.decay=_s.decay,_s.castShadow){let Gr=_s.shadow,gn=a.get(_s);gn.shadowBias=Gr.bias,gn.shadowNormalBias=Gr.normalBias,gn.shadowRadius=Gr.radius,gn.shadowMapSize=Gr.mapSize,gn.shadowCameraNear=Gr.camera.near,gn.shadowCameraFar=Gr.camera.far,o.pointShadow[wt]=gn,o.pointShadowMap[wt]=hn,o.pointShadowMatrix[wt]=_s.shadow.matrix,kt++}o.point[wt]=Ft,wt++}else if(_s.isHemisphereLight){let Ft=s.get(_s);Ft.skyColor.copy(_s.color).multiplyScalar(Nn*Nt),Ft.groundColor.copy(_s.groundColor).multiplyScalar(Nn*Nt),o.hemi[Ct]=Ft,Ct++}}At>0&&(i.isWebGL2||e.has("OES_texture_float_linear")===!0?(o.rectAreaLTC1=De$1.LTC_FLOAT_1,o.rectAreaLTC2=De$1.LTC_FLOAT_2):e.has("OES_texture_half_float_linear")===!0?(o.rectAreaLTC1=De$1.LTC_HALF_1,o.rectAreaLTC2=De$1.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),o.ambient[0]=rt,o.ambient[1]=st,o.ambient[2]=ut;let Ht=o.hash;(Ht.directionalLength!==gt||Ht.pointLength!==wt||Ht.spotLength!==yt||Ht.rectAreaLength!==At||Ht.hemiLength!==Ct||Ht.numDirectionalShadows!==Tt||Ht.numPointShadows!==kt||Ht.numSpotShadows!==Pt||Ht.numSpotMaps!==It)&&(o.directional.length=gt,o.spot.length=yt,o.rectArea.length=At,o.point.length=wt,o.hemi.length=Ct,o.directionalShadow.length=Tt,o.directionalShadowMap.length=Tt,o.pointShadow.length=kt,o.pointShadowMap.length=kt,o.spotShadow.length=Pt,o.spotShadowMap.length=Pt,o.directionalShadowMatrix.length=Tt,o.pointShadowMatrix.length=kt,o.spotLightMatrix.length=Pt+It-Lt,o.spotLightMap.length=It,o.numSpotLightShadowsWithMaps=Lt,Ht.directionalLength=gt,Ht.pointLength=wt,Ht.spotLength=yt,Ht.rectAreaLength=At,Ht.hemiLength=Ct,Ht.numDirectionalShadows=Tt,Ht.numPointShadows=kt,Ht.numSpotShadows=Pt,Ht.numSpotMaps=It,o.version=NG++)}function j(_e,$){let rt=0,st=0,ut=0,gt=0,wt=0,yt=$.matrixWorldInverse;for(let At=0,Ct=_e.length;At<Ct;At++){let Tt=_e[At];if(Tt.isDirectionalLight){let kt=o.directional[rt];kt.direction.setFromMatrixPosition(Tt.matrixWorld),c.setFromMatrixPosition(Tt.target.matrixWorld),kt.direction.sub(c),kt.direction.transformDirection(yt),rt++}else if(Tt.isSpotLight){let kt=o.spot[ut];kt.position.setFromMatrixPosition(Tt.matrixWorld),kt.position.applyMatrix4(yt),kt.direction.setFromMatrixPosition(Tt.matrixWorld),c.setFromMatrixPosition(Tt.target.matrixWorld),kt.direction.sub(c),kt.direction.transformDirection(yt),ut++}else if(Tt.isRectAreaLight){let kt=o.rectArea[gt];kt.position.setFromMatrixPosition(Tt.matrixWorld),kt.position.applyMatrix4(yt),g.identity(),d.copy(Tt.matrixWorld),d.premultiply(yt),g.extractRotation(d),kt.halfWidth.set(Tt.width*.5,0,0),kt.halfHeight.set(0,Tt.height*.5,0),kt.halfWidth.applyMatrix4(g),kt.halfHeight.applyMatrix4(g),gt++}else if(Tt.isPointLight){let kt=o.point[st];kt.position.setFromMatrixPosition(Tt.matrixWorld),kt.position.applyMatrix4(yt),st++}else if(Tt.isHemisphereLight){let kt=o.hemi[wt];kt.direction.setFromMatrixPosition(Tt.matrixWorld),kt.direction.transformDirection(yt),wt++}}}return{setup:b,setupView:j,state:o}}function gM(e,i){let s=new kG(e,i),a=[],o=[];function c(){a.length=0,o.length=0}function d(_e){a.push(_e)}function g(_e){o.push(_e)}function b(_e){s.setup(a,_e)}function j(_e){s.setupView(a,_e)}return{init:c,state:{lightsArray:a,shadowsArray:o,lights:s},setupLights:b,setupLightsView:j,pushLight:d,pushShadow:g}}function VG(e,i){let s=new WeakMap;function a(c,d=0){let g=s.get(c),b;return g===void 0?(b=new gM(e,i),s.set(c,[b])):d>=g.length?(b=new gM(e,i),g.push(b)):b=g[d],b}function o(){s=new WeakMap}return{get:a,dispose:o}}var Mp=class extends Sc{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=ji,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},rw=class extends Sc{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new _,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}},zG=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,UG=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function GG(e,i,s){let a=new Tp,o=new z$1,c=new z$1,d=new Ke,g=new Mp({depthPacking:Mw}),b=new rw,j={},_e=s.maxTextureSize,$={[es]:yi,[yi]:es,[tn]:tn},rt=new lt({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new z$1},radius:{value:4}},vertexShader:zG,fragmentShader:UG}),st=rt.clone();st.defines.HORIZONTAL_PASS=1;let ut=new Pe;ut.setAttribute("position",new Xe(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let gt=new sr(ut,rt),wt=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Gy,this.render=function(Tt,kt,Pt){if(wt.enabled===!1||wt.autoUpdate===!1&&wt.needsUpdate===!1||Tt.length===0)return;let It=e.getRenderTarget(),Lt=e.getActiveCubeFace(),Nt=e.getActiveMipmapLevel(),Ht=e.state;Ht.setBlending(er),Ht.buffers.color.setClear(1,1,1,1),Ht.buffers.depth.setTest(!0),Ht.setScissorTest(!1);for(let dr=0,hs=Tt.length;dr<hs;dr++){let _s=Tt[dr],ds=_s.shadow;if(ds===void 0){console.warn("THREE.WebGLShadowMap:",_s,"has no shadow.");continue}if(ds.autoUpdate===!1&&ds.needsUpdate===!1)continue;o.copy(ds.mapSize);let Nn=ds.getFrameExtents();if(o.multiply(Nn),c.copy(ds.mapSize),(o.x>_e||o.y>_e)&&(o.x>_e&&(c.x=Math.floor(_e/Nn.x),o.x=c.x*Nn.x,ds.mapSize.x=c.x),o.y>_e&&(c.y=Math.floor(_e/Nn.y),o.y=c.y*Nn.y,ds.mapSize.y=c.y)),ds.map===null){let hn=this.type!==mp?{minFilter:Vt,magFilter:Vt}:{};ds.map=new ft(o.x,o.y,hn),ds.map.texture.name=_s.name+".shadowMap",ds.camera.updateProjectionMatrix()}e.setRenderTarget(ds.map),e.clear();let us=ds.getViewportCount();for(let hn=0;hn<us;hn++){let Ft=ds.getViewport(hn);d.set(c.x*Ft.x,c.y*Ft.y,c.x*Ft.z,c.y*Ft.w),Ht.viewport(d),ds.updateMatrices(_s,hn),a=ds.getFrustum(),Ct(kt,Pt,ds.camera,_s,this.type)}ds.isPointLightShadow!==!0&&this.type===mp&&yt(ds,Pt),ds.needsUpdate=!1}wt.needsUpdate=!1,e.setRenderTarget(It,Lt,Nt)};function yt(Tt,kt){let Pt=i.update(gt);rt.defines.VSM_SAMPLES!==Tt.blurSamples&&(rt.defines.VSM_SAMPLES=Tt.blurSamples,st.defines.VSM_SAMPLES=Tt.blurSamples,rt.needsUpdate=!0,st.needsUpdate=!0),Tt.mapPass===null&&(Tt.mapPass=new ft(o.x,o.y)),rt.uniforms.shadow_pass.value=Tt.map.texture,rt.uniforms.resolution.value=Tt.mapSize,rt.uniforms.radius.value=Tt.radius,e.setRenderTarget(Tt.mapPass),e.clear(),e.renderBufferDirect(kt,null,Pt,rt,gt,null),st.uniforms.shadow_pass.value=Tt.mapPass.texture,st.uniforms.resolution.value=Tt.mapSize,st.uniforms.radius.value=Tt.radius,e.setRenderTarget(Tt.map),e.clear(),e.renderBufferDirect(kt,null,Pt,st,gt,null)}function At(Tt,kt,Pt,It,Lt,Nt){let Ht=null,dr=Pt.isPointLight===!0?Tt.customDistanceMaterial:Tt.customDepthMaterial;if(dr!==void 0)Ht=dr;else if(Ht=Pt.isPointLight===!0?b:g,e.localClippingEnabled&&kt.clipShadows===!0&&Array.isArray(kt.clippingPlanes)&&kt.clippingPlanes.length!==0||kt.displacementMap&&kt.displacementScale!==0||kt.alphaMap&&kt.alphaTest>0||kt.map&&kt.alphaTest>0){let hs=Ht.uuid,_s=kt.uuid,ds=j[hs];ds===void 0&&(ds={},j[hs]=ds);let Nn=ds[_s];Nn===void 0&&(Nn=Ht.clone(),ds[_s]=Nn),Ht=Nn}return Ht.visible=kt.visible,Ht.wireframe=kt.wireframe,Nt===mp?Ht.side=kt.shadowSide!==null?kt.shadowSide:kt.side:Ht.side=kt.shadowSide!==null?kt.shadowSide:$[kt.side],Ht.alphaMap=kt.alphaMap,Ht.alphaTest=kt.alphaTest,Ht.map=kt.map,Ht.clipShadows=kt.clipShadows,Ht.clippingPlanes=kt.clippingPlanes,Ht.clipIntersection=kt.clipIntersection,Ht.displacementMap=kt.displacementMap,Ht.displacementScale=kt.displacementScale,Ht.displacementBias=kt.displacementBias,Ht.wireframeLinewidth=kt.wireframeLinewidth,Ht.linewidth=kt.linewidth,Pt.isPointLight===!0&&Ht.isMeshDistanceMaterial===!0&&(Ht.referencePosition.setFromMatrixPosition(Pt.matrixWorld),Ht.nearDistance=It,Ht.farDistance=Lt),Ht}function Ct(Tt,kt,Pt,It,Lt){if(Tt.visible===!1)return;if(Tt.layers.test(kt.layers)&&(Tt.isMesh||Tt.isLine||Tt.isPoints)&&(Tt.castShadow||Tt.receiveShadow&&Lt===mp)&&(!Tt.frustumCulled||a.intersectsObject(Tt))){Tt.modelViewMatrix.multiplyMatrices(Pt.matrixWorldInverse,Tt.matrixWorld);let Ht=i.update(Tt),dr=Tt.material;if(Array.isArray(dr)){let hs=Ht.groups;for(let _s=0,ds=hs.length;_s<ds;_s++){let Nn=hs[_s],us=dr[Nn.materialIndex];if(us&&us.visible){let hn=At(Tt,us,It,Pt.near,Pt.far,Lt);e.renderBufferDirect(Pt,null,Ht,hn,Tt,Nn)}}}else if(dr.visible){let hs=At(Tt,dr,It,Pt.near,Pt.far,Lt);e.renderBufferDirect(Pt,null,Ht,hs,Tt,null)}}let Nt=Tt.children;for(let Ht=0,dr=Nt.length;Ht<dr;Ht++)Ct(Nt[Ht],kt,Pt,It,Lt)}}function jG(e,i,s){let a=s.isWebGL2;function o(){let g0=!1,tS=new Ke,tE=null,pO=new Ke(0,0,0,0);return{setMask:function(jL){tE!==jL&&!g0&&(e.colorMask(jL,jL,jL,jL),tE=jL)},setLocked:function(jL){g0=jL},setClear:function(jL,GL,i$,r$,h$){h$===!0&&(jL*=r$,GL*=r$,i$*=r$),tS.set(jL,GL,i$,r$),pO.equals(tS)===!1&&(e.clearColor(jL,GL,i$,r$),pO.copy(tS))},reset:function(){g0=!1,tE=null,pO.set(-1,0,0,0)}}}function c(){let g0=!1,tS=null,tE=null,pO=null;return{setTest:function(jL){jL?l1(2929):P0(2929)},setMask:function(jL){tS!==jL&&!g0&&(e.depthMask(jL),tS=jL)},setFunc:function(jL){if(tE!==jL){switch(jL){case bF:e.depthFunc(512);break;case SF:e.depthFunc(519);break;case wF:e.depthFunc(513);break;case US:e.depthFunc(515);break;case AF:e.depthFunc(514);break;case _F:e.depthFunc(518);break;case EF:e.depthFunc(516);break;case TF:e.depthFunc(517);break;default:e.depthFunc(515)}tE=jL}},setLocked:function(jL){g0=jL},setClear:function(jL){pO!==jL&&(e.clearDepth(jL),pO=jL)},reset:function(){g0=!1,tS=null,tE=null,pO=null}}}function d(){let g0=!1,tS=null,tE=null,pO=null,jL=null,GL=null,i$=null,r$=null,h$=null;return{setTest:function(YN){g0||(YN?l1(2960):P0(2960))},setMask:function(YN){tS!==YN&&!g0&&(e.stencilMask(YN),tS=YN)},setFunc:function(YN,o$,a$){(tE!==YN||pO!==o$||jL!==a$)&&(e.stencilFunc(YN,o$,a$),tE=YN,pO=o$,jL=a$)},setOp:function(YN,o$,a$){(GL!==YN||i$!==o$||r$!==a$)&&(e.stencilOp(YN,o$,a$),GL=YN,i$=o$,r$=a$)},setLocked:function(YN){g0=YN},setClear:function(YN){h$!==YN&&(e.clearStencil(YN),h$=YN)},reset:function(){g0=!1,tS=null,tE=null,pO=null,jL=null,GL=null,i$=null,r$=null,h$=null}}}let g=new o,b=new c,j=new d,_e=new WeakMap,$=new WeakMap,rt={},st={},ut=new WeakMap,gt=[],wt=null,yt=!1,At=null,Ct=null,Tt=null,kt=null,Pt=null,It=null,Lt=null,Nt=!1,Ht=null,dr=null,hs=null,_s=null,ds=null,Nn=e.getParameter(35661),us=!1,hn=0,Ft=e.getParameter(7938);Ft.indexOf("WebGL")!==-1?(hn=parseFloat(/^WebGL (\d)/.exec(Ft)[1]),us=hn>=1):Ft.indexOf("OpenGL ES")!==-1&&(hn=parseFloat(/^OpenGL ES (\d)/.exec(Ft)[1]),us=hn>=2);let Gr=null,gn={},un=e.getParameter(3088),Zn=e.getParameter(2978),xu=new Ke().fromArray(un),ou=new Ke().fromArray(Zn);function sp(g0,tS,tE){let pO=new Uint8Array(4),jL=e.createTexture();e.bindTexture(g0,jL),e.texParameteri(g0,10241,9728),e.texParameteri(g0,10240,9728);for(let GL=0;GL<tE;GL++)e.texImage2D(tS+GL,0,6408,1,1,0,6408,5121,pO);return jL}let wu={};wu[3553]=sp(3553,3553,1),wu[34067]=sp(34067,34069,6),g.setClear(0,0,0,1),b.setClear(1),j.setClear(0),l1(2929),b.setFunc(US),fD(!1),q3(lT),l1(2884),eS(er);function l1(g0){rt[g0]!==!0&&(e.enable(g0),rt[g0]=!0)}function P0(g0){rt[g0]!==!1&&(e.disable(g0),rt[g0]=!1)}function B0(g0,tS){return st[g0]!==tS?(e.bindFramebuffer(g0,tS),st[g0]=tS,a&&(g0===36009&&(st[36160]=tS),g0===36160&&(st[36009]=tS)),!0):!1}function q1(g0,tS){let tE=gt,pO=!1;if(g0)if(tE=ut.get(tS),tE===void 0&&(tE=[],ut.set(tS,tE)),g0.isWebGLMultipleRenderTargets){let jL=g0.texture;if(tE.length!==jL.length||tE[0]!==36064){for(let GL=0,i$=jL.length;GL<i$;GL++)tE[GL]=36064+GL;tE.length=jL.length,pO=!0}}else tE[0]!==36064&&(tE[0]=36064,pO=!0);else tE[0]!==1029&&(tE[0]=1029,pO=!0);pO&&(s.isWebGL2?e.drawBuffers(tE):i.get("WEBGL_draw_buffers").drawBuffersWEBGL(tE))}function ox(g0){return wt!==g0?(e.useProgram(g0),wt=g0,!0):!1}let qx={[Fu]:32774,[cF]:32778,[uF]:32779};if(a)qx[dT]=32775,qx[fT]=32776;else{let g0=i.get("EXT_blend_minmax");g0!==null&&(qx[dT]=g0.MIN_EXT,qx[fT]=g0.MAX_EXT)}let N_={[hF]:0,[dF]:1,[fF]:768,[zM]:770,[xF]:776,[yF]:774,[mF]:772,[pF]:769,[UM]:771,[vF]:775,[gF]:773};function eS(g0,tS,tE,pO,jL,GL,i$,r$){if(g0===er){yt===!0&&(P0(3042),yt=!1);return}if(yt===!1&&(l1(3042),yt=!0),g0!==lF){if(g0!==At||r$!==Nt){if((Ct!==Fu||Pt!==Fu)&&(e.blendEquation(32774),Ct=Fu,Pt=Fu),r$)switch(g0){case sl:e.blendFuncSeparate(1,771,1,771);break;case cT:e.blendFunc(1,1);break;case uT:e.blendFuncSeparate(0,769,0,1);break;case hT:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",g0);break}else switch(g0){case sl:e.blendFuncSeparate(770,771,1,771);break;case cT:e.blendFunc(770,1);break;case uT:e.blendFuncSeparate(0,769,0,1);break;case hT:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",g0);break}Tt=null,kt=null,It=null,Lt=null,At=g0,Nt=r$}return}jL=jL||tS,GL=GL||tE,i$=i$||pO,(tS!==Ct||jL!==Pt)&&(e.blendEquationSeparate(qx[tS],qx[jL]),Ct=tS,Pt=jL),(tE!==Tt||pO!==kt||GL!==It||i$!==Lt)&&(e.blendFuncSeparate(N_[tE],N_[pO],N_[GL],N_[i$]),Tt=tE,kt=pO,It=GL,Lt=i$),At=g0,Nt=!1}function tA(g0,tS){g0.side===tn?P0(2884):l1(2884);let tE=g0.side===yi;tS&&(tE=!tE),fD(tE),g0.blending===sl&&g0.transparent===!1?eS(er):eS(g0.blending,g0.blendEquation,g0.blendSrc,g0.blendDst,g0.blendEquationAlpha,g0.blendSrcAlpha,g0.blendDstAlpha,g0.premultipliedAlpha),b.setFunc(g0.depthFunc),b.setTest(g0.depthTest),b.setMask(g0.depthWrite),g.setMask(g0.colorWrite);let pO=g0.stencilWrite;j.setTest(pO),pO&&(j.setMask(g0.stencilWriteMask),j.setFunc(g0.stencilFunc,g0.stencilRef,g0.stencilFuncMask),j.setOp(g0.stencilFail,g0.stencilZFail,g0.stencilZPass)),wA(g0.polygonOffset,g0.polygonOffsetFactor,g0.polygonOffsetUnits),g0.alphaToCoverage===!0?l1(32926):P0(32926)}function fD(g0){Ht!==g0&&(g0?e.frontFace(2304):e.frontFace(2305),Ht=g0)}function q3(g0){g0!==sF?(l1(2884),g0!==dr&&(g0===lT?e.cullFace(1029):g0===oF?e.cullFace(1028):e.cullFace(1032))):P0(2884),dr=g0}function SA(g0){g0!==hs&&(us&&e.lineWidth(g0),hs=g0)}function wA(g0,tS,tE){g0?(l1(32823),(_s!==tS||ds!==tE)&&(e.polygonOffset(tS,tE),_s=tS,ds=tE)):P0(32823)}function mO(g0){g0?l1(3089):P0(3089)}function sR(g0){g0===void 0&&(g0=33984+Nn-1),Gr!==g0&&(e.activeTexture(g0),Gr=g0)}function bu(g0,tS,tE){tE===void 0&&(Gr===null?tE=33984+Nn-1:tE=Gr);let pO=gn[tE];pO===void 0&&(pO={type:void 0,texture:void 0},gn[tE]=pO),(pO.type!==g0||pO.texture!==tS)&&(Gr!==tE&&(e.activeTexture(tE),Gr=tE),e.bindTexture(g0,tS||wu[g0]),pO.type=g0,pO.texture=tS)}function au(){let g0=gn[Gr];g0!==void 0&&g0.type!==void 0&&(e.bindTexture(g0.type,null),g0.type=void 0,g0.texture=void 0)}function X1(){try{e.compressedTexImage2D.apply(e,arguments)}catch(g0){console.error("THREE.WebGLState:",g0)}}function eE(){try{e.compressedTexImage3D.apply(e,arguments)}catch(g0){console.error("THREE.WebGLState:",g0)}}function bo(){try{e.texSubImage2D.apply(e,arguments)}catch(g0){console.error("THREE.WebGLState:",g0)}}function C3(){try{e.texSubImage3D.apply(e,arguments)}catch(g0){console.error("THREE.WebGLState:",g0)}}function aR(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(g0){console.error("THREE.WebGLState:",g0)}}function X3(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(g0){console.error("THREE.WebGLState:",g0)}}function U_(){try{e.texStorage2D.apply(e,arguments)}catch(g0){console.error("THREE.WebGLState:",g0)}}function MO(){try{e.texStorage3D.apply(e,arguments)}catch(g0){console.error("THREE.WebGLState:",g0)}}function oI(){try{e.texImage2D.apply(e,arguments)}catch(g0){console.error("THREE.WebGLState:",g0)}}function IO(){try{e.texImage3D.apply(e,arguments)}catch(g0){console.error("THREE.WebGLState:",g0)}}function PL(g0){xu.equals(g0)===!1&&(e.scissor(g0.x,g0.y,g0.z,g0.w),xu.copy(g0))}function CL(g0){ou.equals(g0)===!1&&(e.viewport(g0.x,g0.y,g0.z,g0.w),ou.copy(g0))}function TL(g0,tS){let tE=$.get(tS);tE===void 0&&(tE=new WeakMap,$.set(tS,tE));let pO=tE.get(g0);pO===void 0&&(pO=e.getUniformBlockIndex(tS,g0.name),tE.set(g0,pO))}function qL(g0,tS){let tE=$.get(tS).get(g0);_e.get(tS)!==tE&&(e.uniformBlockBinding(tS,tE,g0.__bindingPointIndex),_e.set(tS,tE))}function e$(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),a===!0&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),rt={},Gr=null,gn={},st={},ut=new WeakMap,gt=[],wt=null,yt=!1,At=null,Ct=null,Tt=null,kt=null,Pt=null,It=null,Lt=null,Nt=!1,Ht=null,dr=null,hs=null,_s=null,ds=null,xu.set(0,0,e.canvas.width,e.canvas.height),ou.set(0,0,e.canvas.width,e.canvas.height),g.reset(),b.reset(),j.reset()}return{buffers:{color:g,depth:b,stencil:j},enable:l1,disable:P0,bindFramebuffer:B0,drawBuffers:q1,useProgram:ox,setBlending:eS,setMaterial:tA,setFlipSided:fD,setCullFace:q3,setLineWidth:SA,setPolygonOffset:wA,setScissorTest:mO,activeTexture:sR,bindTexture:bu,unbindTexture:au,compressedTexImage2D:X1,compressedTexImage3D:eE,texImage2D:oI,texImage3D:IO,updateUBOMapping:TL,uniformBlockBinding:qL,texStorage2D:U_,texStorage3D:MO,texSubImage2D:bo,texSubImage3D:C3,compressedTexSubImage2D:aR,compressedTexSubImage3D:X3,scissor:PL,viewport:CL,reset:e$}}function HG(e,i,s,a,o,c,d){let g=o.isWebGL2,b=o.maxTextures,j=o.maxCubemapSize,_e=o.maxTextureSize,$=o.maxSamples,rt=i.has("WEBGL_multisampled_render_to_texture")?i.get("WEBGL_multisampled_render_to_texture"):null,st=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),ut=new WeakMap,gt,wt=new WeakMap,yt=!1;try{yt=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function At(bu,au){return yt?new OffscreenCanvas(bu,au):_p("canvas")}function Ct(bu,au,X1,eE){let bo=1;if((bu.width>eE||bu.height>eE)&&(bo=eE/Math.max(bu.width,bu.height)),bo<1||au===!0)if(typeof HTMLImageElement<"u"&&bu instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&bu instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&bu instanceof ImageBitmap){let C3=au?gy:Math.floor,aR=C3(bo*bu.width),X3=C3(bo*bu.height);gt===void 0&&(gt=At(aR,X3));let U_=X1?At(aR,X3):gt;return U_.width=aR,U_.height=X3,U_.getContext("2d").drawImage(bu,0,0,aR,X3),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+bu.width+"x"+bu.height+") to ("+aR+"x"+X3+")."),U_}else return"data"in bu&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+bu.width+"x"+bu.height+")."),bu;return bu}function Tt(bu){return YS(bu.width)&&YS(bu.height)}function kt(bu){return g?!1:bu.wrapS!==Kt||bu.wrapT!==Kt||bu.minFilter!==Vt&&bu.minFilter!==tt}function Pt(bu,au){return bu.generateMipmaps&&au&&bu.minFilter!==Vt&&bu.minFilter!==tt}function It(bu){e.generateMipmap(bu)}function Lt(bu,au,X1,eE,bo=!1){if(g===!1)return au;if(bu!==null){if(e[bu]!==void 0)return e[bu];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+bu+"'")}let C3=au;return au===6403&&(X1===5126&&(C3=33326),X1===5131&&(C3=33325),X1===5121&&(C3=33321)),au===33319&&(X1===5126&&(C3=33328),X1===5131&&(C3=33327),X1===5121&&(C3=33323)),au===6408&&(X1===5126&&(C3=34836),X1===5131&&(C3=34842),X1===5121&&(C3=eE===at&&bo===!1?35907:32856),X1===32819&&(C3=32854),X1===32820&&(C3=32855)),(C3===33325||C3===33326||C3===33327||C3===33328||C3===34842||C3===34836)&&i.get("EXT_color_buffer_float"),C3}function Nt(bu,au,X1){return Pt(bu,X1)===!0||bu.isFramebufferTexture&&bu.minFilter!==Vt&&bu.minFilter!==tt?Math.log2(Math.max(au.width,au.height))+1:bu.mipmaps!==void 0&&bu.mipmaps.length>0?bu.mipmaps.length:bu.isCompressedTexture&&Array.isArray(bu.image)?au.mipmaps.length:1}function Ht(bu){return bu===Vt||bu===pT||bu===nS?9728:9729}function dr(bu){let au=bu.target;au.removeEventListener("dispose",dr),_s(au),au.isVideoTexture&&ut.delete(au)}function hs(bu){let au=bu.target;au.removeEventListener("dispose",hs),Nn(au)}function _s(bu){let au=a.get(bu);if(au.__webglInit===void 0)return;let X1=bu.source,eE=wt.get(X1);if(eE){let bo=eE[au.__cacheKey];bo.usedTimes--,bo.usedTimes===0&&ds(bu),Object.keys(eE).length===0&&wt.delete(X1)}a.remove(bu)}function ds(bu){let au=a.get(bu);e.deleteTexture(au.__webglTexture);let X1=bu.source,eE=wt.get(X1);delete eE[au.__cacheKey],d.memory.textures--}function Nn(bu){let au=bu.texture,X1=a.get(bu),eE=a.get(au);if(eE.__webglTexture!==void 0&&(e.deleteTexture(eE.__webglTexture),d.memory.textures--),bu.depthTexture&&bu.depthTexture.dispose(),bu.isWebGLCubeRenderTarget)for(let bo=0;bo<6;bo++)e.deleteFramebuffer(X1.__webglFramebuffer[bo]),X1.__webglDepthbuffer&&e.deleteRenderbuffer(X1.__webglDepthbuffer[bo]);else{if(e.deleteFramebuffer(X1.__webglFramebuffer),X1.__webglDepthbuffer&&e.deleteRenderbuffer(X1.__webglDepthbuffer),X1.__webglMultisampledFramebuffer&&e.deleteFramebuffer(X1.__webglMultisampledFramebuffer),X1.__webglColorRenderbuffer)for(let bo=0;bo<X1.__webglColorRenderbuffer.length;bo++)X1.__webglColorRenderbuffer[bo]&&e.deleteRenderbuffer(X1.__webglColorRenderbuffer[bo]);X1.__webglDepthRenderbuffer&&e.deleteRenderbuffer(X1.__webglDepthRenderbuffer)}if(bu.isWebGLMultipleRenderTargets)for(let bo=0,C3=au.length;bo<C3;bo++){let aR=a.get(au[bo]);aR.__webglTexture&&(e.deleteTexture(aR.__webglTexture),d.memory.textures--),a.remove(au[bo])}a.remove(au),a.remove(bu)}let us=0;function hn(){us=0}function Ft(){let bu=us;return bu>=b&&console.warn("THREE.WebGLTextures: Trying to use "+bu+" texture units while this GPU supports only "+b),us+=1,bu}function Gr(bu){let au=[];return au.push(bu.wrapS),au.push(bu.wrapT),au.push(bu.wrapR||0),au.push(bu.magFilter),au.push(bu.minFilter),au.push(bu.anisotropy),au.push(bu.internalFormat),au.push(bu.format),au.push(bu.type),au.push(bu.generateMipmaps),au.push(bu.premultiplyAlpha),au.push(bu.flipY),au.push(bu.unpackAlignment),au.push(bu.encoding),au.join()}function gn(bu,au){let X1=a.get(bu);if(bu.isVideoTexture&&mO(bu),bu.isRenderTargetTexture===!1&&bu.version>0&&X1.__version!==bu.version){let eE=bu.image;if(eE===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(eE.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{P0(X1,bu,au);return}}s.bindTexture(3553,X1.__webglTexture,33984+au)}function un(bu,au){let X1=a.get(bu);if(bu.version>0&&X1.__version!==bu.version){P0(X1,bu,au);return}s.bindTexture(35866,X1.__webglTexture,33984+au)}function Zn(bu,au){let X1=a.get(bu);if(bu.version>0&&X1.__version!==bu.version){P0(X1,bu,au);return}s.bindTexture(32879,X1.__webglTexture,33984+au)}function xu(bu,au){let X1=a.get(bu);if(bu.version>0&&X1.__version!==bu.version){B0(X1,bu,au);return}s.bindTexture(34067,X1.__webglTexture,33984+au)}let ou={[Ws]:10497,[Kt]:33071,[HS]:33648},sp={[Vt]:9728,[pT]:9984,[nS]:9986,[tt]:9729,[LF]:9985,[bc]:9987};function wu(bu,au,X1){if(X1?(e.texParameteri(bu,10242,ou[au.wrapS]),e.texParameteri(bu,10243,ou[au.wrapT]),(bu===32879||bu===35866)&&e.texParameteri(bu,32882,ou[au.wrapR]),e.texParameteri(bu,10240,sp[au.magFilter]),e.texParameteri(bu,10241,sp[au.minFilter])):(e.texParameteri(bu,10242,33071),e.texParameteri(bu,10243,33071),(bu===32879||bu===35866)&&e.texParameteri(bu,32882,33071),(au.wrapS!==Kt||au.wrapT!==Kt)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(bu,10240,Ht(au.magFilter)),e.texParameteri(bu,10241,Ht(au.minFilter)),au.minFilter!==Vt&&au.minFilter!==tt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),i.has("EXT_texture_filter_anisotropic")===!0){let eE=i.get("EXT_texture_filter_anisotropic");if(au.magFilter===Vt||au.minFilter!==nS&&au.minFilter!==bc||au.type===Sr$1&&i.has("OES_texture_float_linear")===!1||g===!1&&au.type===va&&i.has("OES_texture_half_float_linear")===!1)return;(au.anisotropy>1||a.get(au).__currentAnisotropy)&&(e.texParameterf(bu,eE.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(au.anisotropy,o.getMaxAnisotropy())),a.get(au).__currentAnisotropy=au.anisotropy)}}function l1(bu,au){let X1=!1;bu.__webglInit===void 0&&(bu.__webglInit=!0,au.addEventListener("dispose",dr));let eE=au.source,bo=wt.get(eE);bo===void 0&&(bo={},wt.set(eE,bo));let C3=Gr(au);if(C3!==bu.__cacheKey){bo[C3]===void 0&&(bo[C3]={texture:e.createTexture(),usedTimes:0},d.memory.textures++,X1=!0),bo[C3].usedTimes++;let aR=bo[bu.__cacheKey];aR!==void 0&&(bo[bu.__cacheKey].usedTimes--,aR.usedTimes===0&&ds(au)),bu.__cacheKey=C3,bu.__webglTexture=bo[C3].texture}return X1}function P0(bu,au,X1){let eE=3553;(au.isDataArrayTexture||au.isCompressedArrayTexture)&&(eE=35866),au.isData3DTexture&&(eE=32879);let bo=l1(bu,au),C3=au.source;s.bindTexture(eE,bu.__webglTexture,33984+X1);let aR=a.get(C3);if(C3.version!==aR.__version||bo===!0){s.activeTexture(33984+X1),e.pixelStorei(37440,au.flipY),e.pixelStorei(37441,au.premultiplyAlpha),e.pixelStorei(3317,au.unpackAlignment),e.pixelStorei(37443,0);let X3=kt(au)&&Tt(au.image)===!1,U_=Ct(au.image,X3,!1,_e);U_=sR(au,U_);let MO=Tt(U_)||g,oI=c.convert(au.format,au.encoding),IO=c.convert(au.type),PL=Lt(au.internalFormat,oI,IO,au.encoding,au.isVideoTexture);wu(eE,au,MO);let CL,TL=au.mipmaps,qL=g&&au.isVideoTexture!==!0,e$=aR.__version===void 0||bo===!0,g0=Nt(au,U_,MO);if(au.isDepthTexture)PL=6402,g?au.type===Sr$1?PL=36012:au.type===js?PL=33190:au.type===ol?PL=35056:PL=33189:au.type===Sr$1&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),au.format===vc&&PL===6402&&au.type!==HM&&au.type!==js&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),au.type=js,IO=c.convert(au.type)),au.format===cl&&PL===6402&&(PL=34041,au.type!==ol&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),au.type=ol,IO=c.convert(au.type))),e$&&(qL?s.texStorage2D(3553,1,PL,U_.width,U_.height):s.texImage2D(3553,0,PL,U_.width,U_.height,0,oI,IO,null));else if(au.isDataTexture)if(TL.length>0&&MO){qL&&e$&&s.texStorage2D(3553,g0,PL,TL[0].width,TL[0].height);for(let tS=0,tE=TL.length;tS<tE;tS++)CL=TL[tS],qL?s.texSubImage2D(3553,tS,0,0,CL.width,CL.height,oI,IO,CL.data):s.texImage2D(3553,tS,PL,CL.width,CL.height,0,oI,IO,CL.data);au.generateMipmaps=!1}else qL?(e$&&s.texStorage2D(3553,g0,PL,U_.width,U_.height),s.texSubImage2D(3553,0,0,0,U_.width,U_.height,oI,IO,U_.data)):s.texImage2D(3553,0,PL,U_.width,U_.height,0,oI,IO,U_.data);else if(au.isCompressedTexture)if(au.isCompressedArrayTexture){qL&&e$&&s.texStorage3D(35866,g0,PL,TL[0].width,TL[0].height,U_.depth);for(let tS=0,tE=TL.length;tS<tE;tS++)CL=TL[tS],au.format!==Qr?oI!==null?qL?s.compressedTexSubImage3D(35866,tS,0,0,0,CL.width,CL.height,U_.depth,oI,CL.data,0,0):s.compressedTexImage3D(35866,tS,PL,CL.width,CL.height,U_.depth,0,CL.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):qL?s.texSubImage3D(35866,tS,0,0,0,CL.width,CL.height,U_.depth,oI,IO,CL.data):s.texImage3D(35866,tS,PL,CL.width,CL.height,U_.depth,0,oI,IO,CL.data)}else{qL&&e$&&s.texStorage2D(3553,g0,PL,TL[0].width,TL[0].height);for(let tS=0,tE=TL.length;tS<tE;tS++)CL=TL[tS],au.format!==Qr?oI!==null?qL?s.compressedTexSubImage2D(3553,tS,0,0,CL.width,CL.height,oI,CL.data):s.compressedTexImage2D(3553,tS,PL,CL.width,CL.height,0,CL.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):qL?s.texSubImage2D(3553,tS,0,0,CL.width,CL.height,oI,IO,CL.data):s.texImage2D(3553,tS,PL,CL.width,CL.height,0,oI,IO,CL.data)}else if(au.isDataArrayTexture)qL?(e$&&s.texStorage3D(35866,g0,PL,U_.width,U_.height,U_.depth),s.texSubImage3D(35866,0,0,0,0,U_.width,U_.height,U_.depth,oI,IO,U_.data)):s.texImage3D(35866,0,PL,U_.width,U_.height,U_.depth,0,oI,IO,U_.data);else if(au.isData3DTexture)qL?(e$&&s.texStorage3D(32879,g0,PL,U_.width,U_.height,U_.depth),s.texSubImage3D(32879,0,0,0,0,U_.width,U_.height,U_.depth,oI,IO,U_.data)):s.texImage3D(32879,0,PL,U_.width,U_.height,U_.depth,0,oI,IO,U_.data);else if(au.isFramebufferTexture){if(e$)if(qL)s.texStorage2D(3553,g0,PL,U_.width,U_.height);else{let tS=U_.width,tE=U_.height;for(let pO=0;pO<g0;pO++)s.texImage2D(3553,pO,PL,tS,tE,0,oI,IO,null),tS>>=1,tE>>=1}}else if(TL.length>0&&MO){qL&&e$&&s.texStorage2D(3553,g0,PL,TL[0].width,TL[0].height);for(let tS=0,tE=TL.length;tS<tE;tS++)CL=TL[tS],qL?s.texSubImage2D(3553,tS,0,0,oI,IO,CL):s.texImage2D(3553,tS,PL,oI,IO,CL);au.generateMipmaps=!1}else qL?(e$&&s.texStorage2D(3553,g0,PL,U_.width,U_.height),s.texSubImage2D(3553,0,0,0,oI,IO,U_)):s.texImage2D(3553,0,PL,oI,IO,U_);Pt(au,MO)&&It(eE),aR.__version=C3.version,au.onUpdate&&au.onUpdate(au)}bu.__version=au.version}function B0(bu,au,X1){if(au.image.length!==6)return;let eE=l1(bu,au),bo=au.source;s.bindTexture(34067,bu.__webglTexture,33984+X1);let C3=a.get(bo);if(bo.version!==C3.__version||eE===!0){s.activeTexture(33984+X1),e.pixelStorei(37440,au.flipY),e.pixelStorei(37441,au.premultiplyAlpha),e.pixelStorei(3317,au.unpackAlignment),e.pixelStorei(37443,0);let aR=au.isCompressedTexture||au.image[0].isCompressedTexture,X3=au.image[0]&&au.image[0].isDataTexture,U_=[];for(let tS=0;tS<6;tS++)!aR&&!X3?U_[tS]=Ct(au.image[tS],!1,!0,j):U_[tS]=X3?au.image[tS].image:au.image[tS],U_[tS]=sR(au,U_[tS]);let MO=U_[0],oI=Tt(MO)||g,IO=c.convert(au.format,au.encoding),PL=c.convert(au.type),CL=Lt(au.internalFormat,IO,PL,au.encoding),TL=g&&au.isVideoTexture!==!0,qL=C3.__version===void 0||eE===!0,e$=Nt(au,MO,oI);wu(34067,au,oI);let g0;if(aR){TL&&qL&&s.texStorage2D(34067,e$,CL,MO.width,MO.height);for(let tS=0;tS<6;tS++){g0=U_[tS].mipmaps;for(let tE=0;tE<g0.length;tE++){let pO=g0[tE];au.format!==Qr?IO!==null?TL?s.compressedTexSubImage2D(34069+tS,tE,0,0,pO.width,pO.height,IO,pO.data):s.compressedTexImage2D(34069+tS,tE,CL,pO.width,pO.height,0,pO.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):TL?s.texSubImage2D(34069+tS,tE,0,0,pO.width,pO.height,IO,PL,pO.data):s.texImage2D(34069+tS,tE,CL,pO.width,pO.height,0,IO,PL,pO.data)}}}else{g0=au.mipmaps,TL&&qL&&(g0.length>0&&e$++,s.texStorage2D(34067,e$,CL,U_[0].width,U_[0].height));for(let tS=0;tS<6;tS++)if(X3){TL?s.texSubImage2D(34069+tS,0,0,0,U_[tS].width,U_[tS].height,IO,PL,U_[tS].data):s.texImage2D(34069+tS,0,CL,U_[tS].width,U_[tS].height,0,IO,PL,U_[tS].data);for(let tE=0;tE<g0.length;tE++){let pO=g0[tE].image[tS].image;TL?s.texSubImage2D(34069+tS,tE+1,0,0,pO.width,pO.height,IO,PL,pO.data):s.texImage2D(34069+tS,tE+1,CL,pO.width,pO.height,0,IO,PL,pO.data)}}else{TL?s.texSubImage2D(34069+tS,0,0,0,IO,PL,U_[tS]):s.texImage2D(34069+tS,0,CL,IO,PL,U_[tS]);for(let tE=0;tE<g0.length;tE++){let pO=g0[tE];TL?s.texSubImage2D(34069+tS,tE+1,0,0,IO,PL,pO.image[tS]):s.texImage2D(34069+tS,tE+1,CL,IO,PL,pO.image[tS])}}}Pt(au,oI)&&It(34067),C3.__version=bo.version,au.onUpdate&&au.onUpdate(au)}bu.__version=au.version}function q1(bu,au,X1,eE,bo){let C3=c.convert(X1.format,X1.encoding),aR=c.convert(X1.type),X3=Lt(X1.internalFormat,C3,aR,X1.encoding);a.get(au).__hasExternalTextures||(bo===32879||bo===35866?s.texImage3D(bo,0,X3,au.width,au.height,au.depth,0,C3,aR,null):s.texImage2D(bo,0,X3,au.width,au.height,0,C3,aR,null)),s.bindFramebuffer(36160,bu),wA(au)?rt.framebufferTexture2DMultisampleEXT(36160,eE,bo,a.get(X1).__webglTexture,0,SA(au)):(bo===3553||bo>=34069&&bo<=34074)&&e.framebufferTexture2D(36160,eE,bo,a.get(X1).__webglTexture,0),s.bindFramebuffer(36160,null)}function ox(bu,au,X1){if(e.bindRenderbuffer(36161,bu),au.depthBuffer&&!au.stencilBuffer){let eE=33189;if(X1||wA(au)){let bo=au.depthTexture;bo&&bo.isDepthTexture&&(bo.type===Sr$1?eE=36012:bo.type===js&&(eE=33190));let C3=SA(au);wA(au)?rt.renderbufferStorageMultisampleEXT(36161,C3,eE,au.width,au.height):e.renderbufferStorageMultisample(36161,C3,eE,au.width,au.height)}else e.renderbufferStorage(36161,eE,au.width,au.height);e.framebufferRenderbuffer(36160,36096,36161,bu)}else if(au.depthBuffer&&au.stencilBuffer){let eE=SA(au);X1&&wA(au)===!1?e.renderbufferStorageMultisample(36161,eE,35056,au.width,au.height):wA(au)?rt.renderbufferStorageMultisampleEXT(36161,eE,35056,au.width,au.height):e.renderbufferStorage(36161,34041,au.width,au.height),e.framebufferRenderbuffer(36160,33306,36161,bu)}else{let eE=au.isWebGLMultipleRenderTargets===!0?au.texture:[au.texture];for(let bo=0;bo<eE.length;bo++){let C3=eE[bo],aR=c.convert(C3.format,C3.encoding),X3=c.convert(C3.type),U_=Lt(C3.internalFormat,aR,X3,C3.encoding),MO=SA(au);X1&&wA(au)===!1?e.renderbufferStorageMultisample(36161,MO,U_,au.width,au.height):wA(au)?rt.renderbufferStorageMultisampleEXT(36161,MO,U_,au.width,au.height):e.renderbufferStorage(36161,U_,au.width,au.height)}}e.bindRenderbuffer(36161,null)}function qx(bu,au){if(au&&au.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(s.bindFramebuffer(36160,bu),!(au.depthTexture&&au.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!a.get(au.depthTexture).__webglTexture||au.depthTexture.image.width!==au.width||au.depthTexture.image.height!==au.height)&&(au.depthTexture.image.width=au.width,au.depthTexture.image.height=au.height,au.depthTexture.needsUpdate=!0),gn(au.depthTexture,0);let X1=a.get(au.depthTexture).__webglTexture,eE=SA(au);if(au.depthTexture.format===vc)wA(au)?rt.framebufferTexture2DMultisampleEXT(36160,36096,3553,X1,0,eE):e.framebufferTexture2D(36160,36096,3553,X1,0);else if(au.depthTexture.format===cl)wA(au)?rt.framebufferTexture2DMultisampleEXT(36160,33306,3553,X1,0,eE):e.framebufferTexture2D(36160,33306,3553,X1,0);else throw new Error("Unknown depthTexture format")}function N_(bu){let au=a.get(bu),X1=bu.isWebGLCubeRenderTarget===!0;if(bu.depthTexture&&!au.__autoAllocateDepthBuffer){if(X1)throw new Error("target.depthTexture not supported in Cube render targets");qx(au.__webglFramebuffer,bu)}else if(X1){au.__webglDepthbuffer=[];for(let eE=0;eE<6;eE++)s.bindFramebuffer(36160,au.__webglFramebuffer[eE]),au.__webglDepthbuffer[eE]=e.createRenderbuffer(),ox(au.__webglDepthbuffer[eE],bu,!1)}else s.bindFramebuffer(36160,au.__webglFramebuffer),au.__webglDepthbuffer=e.createRenderbuffer(),ox(au.__webglDepthbuffer,bu,!1);s.bindFramebuffer(36160,null)}function eS(bu,au,X1){let eE=a.get(bu);au!==void 0&&q1(eE.__webglFramebuffer,bu,bu.texture,36064,3553),X1!==void 0&&N_(bu)}function tA(bu){let au=bu.texture,X1=a.get(bu),eE=a.get(au);bu.addEventListener("dispose",hs),bu.isWebGLMultipleRenderTargets!==!0&&(eE.__webglTexture===void 0&&(eE.__webglTexture=e.createTexture()),eE.__version=au.version,d.memory.textures++);let bo=bu.isWebGLCubeRenderTarget===!0,C3=bu.isWebGLMultipleRenderTargets===!0,aR=Tt(bu)||g;if(bo){X1.__webglFramebuffer=[];for(let X3=0;X3<6;X3++)X1.__webglFramebuffer[X3]=e.createFramebuffer()}else{if(X1.__webglFramebuffer=e.createFramebuffer(),C3)if(o.drawBuffers){let X3=bu.texture;for(let U_=0,MO=X3.length;U_<MO;U_++){let oI=a.get(X3[U_]);oI.__webglTexture===void 0&&(oI.__webglTexture=e.createTexture(),d.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(g&&bu.samples>0&&wA(bu)===!1){let X3=C3?au:[au];X1.__webglMultisampledFramebuffer=e.createFramebuffer(),X1.__webglColorRenderbuffer=[],s.bindFramebuffer(36160,X1.__webglMultisampledFramebuffer);for(let U_=0;U_<X3.length;U_++){let MO=X3[U_];X1.__webglColorRenderbuffer[U_]=e.createRenderbuffer(),e.bindRenderbuffer(36161,X1.__webglColorRenderbuffer[U_]);let oI=c.convert(MO.format,MO.encoding),IO=c.convert(MO.type),PL=Lt(MO.internalFormat,oI,IO,MO.encoding,bu.isXRRenderTarget===!0),CL=SA(bu);e.renderbufferStorageMultisample(36161,CL,PL,bu.width,bu.height),e.framebufferRenderbuffer(36160,36064+U_,36161,X1.__webglColorRenderbuffer[U_])}e.bindRenderbuffer(36161,null),bu.depthBuffer&&(X1.__webglDepthRenderbuffer=e.createRenderbuffer(),ox(X1.__webglDepthRenderbuffer,bu,!0)),s.bindFramebuffer(36160,null)}}if(bo){s.bindTexture(34067,eE.__webglTexture),wu(34067,au,aR);for(let X3=0;X3<6;X3++)q1(X1.__webglFramebuffer[X3],bu,au,36064,34069+X3);Pt(au,aR)&&It(34067),s.unbindTexture()}else if(C3){let X3=bu.texture;for(let U_=0,MO=X3.length;U_<MO;U_++){let oI=X3[U_],IO=a.get(oI);s.bindTexture(3553,IO.__webglTexture),wu(3553,oI,aR),q1(X1.__webglFramebuffer,bu,oI,36064+U_,3553),Pt(oI,aR)&&It(3553)}s.unbindTexture()}else{let X3=3553;(bu.isWebGL3DRenderTarget||bu.isWebGLArrayRenderTarget)&&(g?X3=bu.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),s.bindTexture(X3,eE.__webglTexture),wu(X3,au,aR),q1(X1.__webglFramebuffer,bu,au,36064,X3),Pt(au,aR)&&It(X3),s.unbindTexture()}bu.depthBuffer&&N_(bu)}function fD(bu){let au=Tt(bu)||g,X1=bu.isWebGLMultipleRenderTargets===!0?bu.texture:[bu.texture];for(let eE=0,bo=X1.length;eE<bo;eE++){let C3=X1[eE];if(Pt(C3,au)){let aR=bu.isWebGLCubeRenderTarget?34067:3553,X3=a.get(C3).__webglTexture;s.bindTexture(aR,X3),It(aR),s.unbindTexture()}}}function q3(bu){if(g&&bu.samples>0&&wA(bu)===!1){let au=bu.isWebGLMultipleRenderTargets?bu.texture:[bu.texture],X1=bu.width,eE=bu.height,bo=16384,C3=[],aR=bu.stencilBuffer?33306:36096,X3=a.get(bu),U_=bu.isWebGLMultipleRenderTargets===!0;if(U_)for(let MO=0;MO<au.length;MO++)s.bindFramebuffer(36160,X3.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+MO,36161,null),s.bindFramebuffer(36160,X3.__webglFramebuffer),e.framebufferTexture2D(36009,36064+MO,3553,null,0);s.bindFramebuffer(36008,X3.__webglMultisampledFramebuffer),s.bindFramebuffer(36009,X3.__webglFramebuffer);for(let MO=0;MO<au.length;MO++){C3.push(36064+MO),bu.depthBuffer&&C3.push(aR);let oI=X3.__ignoreDepthValues!==void 0?X3.__ignoreDepthValues:!1;if(oI===!1&&(bu.depthBuffer&&(bo|=256),bu.stencilBuffer&&(bo|=1024)),U_&&e.framebufferRenderbuffer(36008,36064,36161,X3.__webglColorRenderbuffer[MO]),oI===!0&&(e.invalidateFramebuffer(36008,[aR]),e.invalidateFramebuffer(36009,[aR])),U_){let IO=a.get(au[MO]).__webglTexture;e.framebufferTexture2D(36009,36064,3553,IO,0)}e.blitFramebuffer(0,0,X1,eE,0,0,X1,eE,bo,9728),st&&e.invalidateFramebuffer(36008,C3)}if(s.bindFramebuffer(36008,null),s.bindFramebuffer(36009,null),U_)for(let MO=0;MO<au.length;MO++){s.bindFramebuffer(36160,X3.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+MO,36161,X3.__webglColorRenderbuffer[MO]);let oI=a.get(au[MO]).__webglTexture;s.bindFramebuffer(36160,X3.__webglFramebuffer),e.framebufferTexture2D(36009,36064+MO,3553,oI,0)}s.bindFramebuffer(36009,X3.__webglMultisampledFramebuffer)}}function SA(bu){return Math.min($,bu.samples)}function wA(bu){let au=a.get(bu);return g&&bu.samples>0&&i.has("WEBGL_multisampled_render_to_texture")===!0&&au.__useRenderToTexture!==!1}function mO(bu){let au=d.render.frame;ut.get(bu)!==au&&(ut.set(bu,au),bu.update())}function sR(bu,au){let X1=bu.encoding,eE=bu.format,bo=bu.type;return bu.isCompressedTexture===!0||bu.isVideoTexture===!0||bu.format===qS||X1!==Sn&&(X1===at?g===!1?i.has("EXT_sRGB")===!0&&eE===Qr?(bu.format=qS,bu.minFilter=tt,bu.generateMipmaps=!1):au=yy.sRGBToLinear(au):(eE!==Qr||bo!==Ir$1)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",X1)),au}this.allocateTextureUnit=Ft,this.resetTextureUnits=hn,this.setTexture2D=gn,this.setTexture2DArray=un,this.setTexture3D=Zn,this.setTextureCube=xu,this.rebindTextures=eS,this.setupRenderTarget=tA,this.updateRenderTargetMipmap=fD,this.updateMultisampleRenderTarget=q3,this.setupDepthRenderbuffer=N_,this.setupFrameBufferTexture=q1,this.useMultisampledRTT=wA}function WG(e,i,s){let a=s.isWebGL2;function o(c,d=null){let g;if(c===Ir$1)return 5121;if(c===kF)return 32819;if(c===VF)return 32820;if(c===BF)return 5120;if(c===NF)return 5122;if(c===HM)return 5123;if(c===FF)return 5124;if(c===js)return 5125;if(c===Sr$1)return 5126;if(c===va)return a?5131:(g=i.get("OES_texture_half_float"),g!==null?g.HALF_FLOAT_OES:null);if(c===zF)return 6406;if(c===Qr)return 6408;if(c===UF)return 6409;if(c===GF)return 6410;if(c===vc)return 6402;if(c===cl)return 34041;if(c===qS)return g=i.get("EXT_sRGB"),g!==null?g.SRGB_ALPHA_EXT:null;if(c===jF)return 6403;if(c===HF)return 36244;if(c===uh)return 33319;if(c===WF)return 33320;if(c===Aw)return 36249;if(c===sS||c===oS||c===aS||c===lS)if(d===at)if(g=i.get("WEBGL_compressed_texture_s3tc_srgb"),g!==null){if(c===sS)return g.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(c===oS)return g.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(c===aS)return g.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(c===lS)return g.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(g=i.get("WEBGL_compressed_texture_s3tc"),g!==null){if(c===sS)return g.COMPRESSED_RGB_S3TC_DXT1_EXT;if(c===oS)return g.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(c===aS)return g.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(c===lS)return g.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(c===mT||c===gT||c===yT||c===vT)if(g=i.get("WEBGL_compressed_texture_pvrtc"),g!==null){if(c===mT)return g.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(c===gT)return g.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(c===yT)return g.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(c===vT)return g.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(c===qF)return g=i.get("WEBGL_compressed_texture_etc1"),g!==null?g.COMPRESSED_RGB_ETC1_WEBGL:null;if(c===xT||c===bT)if(g=i.get("WEBGL_compressed_texture_etc"),g!==null){if(c===xT)return d===at?g.COMPRESSED_SRGB8_ETC2:g.COMPRESSED_RGB8_ETC2;if(c===bT)return d===at?g.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:g.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(c===ST||c===wT||c===AT||c===_T||c===ET||c===TT||c===MT||c===CT||c===PT||c===DT||c===OT||c===IT||c===RT||c===LT)if(g=i.get("WEBGL_compressed_texture_astc"),g!==null){if(c===ST)return d===at?g.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:g.COMPRESSED_RGBA_ASTC_4x4_KHR;if(c===wT)return d===at?g.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:g.COMPRESSED_RGBA_ASTC_5x4_KHR;if(c===AT)return d===at?g.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:g.COMPRESSED_RGBA_ASTC_5x5_KHR;if(c===_T)return d===at?g.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:g.COMPRESSED_RGBA_ASTC_6x5_KHR;if(c===ET)return d===at?g.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:g.COMPRESSED_RGBA_ASTC_6x6_KHR;if(c===TT)return d===at?g.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:g.COMPRESSED_RGBA_ASTC_8x5_KHR;if(c===MT)return d===at?g.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:g.COMPRESSED_RGBA_ASTC_8x6_KHR;if(c===CT)return d===at?g.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:g.COMPRESSED_RGBA_ASTC_8x8_KHR;if(c===PT)return d===at?g.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:g.COMPRESSED_RGBA_ASTC_10x5_KHR;if(c===DT)return d===at?g.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:g.COMPRESSED_RGBA_ASTC_10x6_KHR;if(c===OT)return d===at?g.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:g.COMPRESSED_RGBA_ASTC_10x8_KHR;if(c===IT)return d===at?g.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:g.COMPRESSED_RGBA_ASTC_10x10_KHR;if(c===RT)return d===at?g.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:g.COMPRESSED_RGBA_ASTC_12x10_KHR;if(c===LT)return d===at?g.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:g.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(c===cS)if(g=i.get("EXT_texture_compression_bptc"),g!==null){if(c===cS)return d===at?g.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:g.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(c===YF||c===BT||c===NT||c===FT)if(g=i.get("EXT_texture_compression_rgtc"),g!==null){if(c===cS)return g.COMPRESSED_RED_RGTC1_EXT;if(c===BT)return g.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(c===NT)return g.COMPRESSED_RED_GREEN_RGTC2_EXT;if(c===FT)return g.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return c===ol?a?34042:(g=i.get("WEBGL_depth_texture"),g!==null?g.UNSIGNED_INT_24_8_WEBGL:null):e[c]!==void 0?e[c]:null}return{convert:o}}var iw=class extends ri{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}},ps=class extends _t{constructor(){super(),this.isGroup=!0,this.type="Group"}},qG={type:"move"},xp=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new ps,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new ps,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new _,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new _),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new ps,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new _,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new _),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){let i=this._hand;if(i)for(let s of e.hand.values())this._getHandJoint(i,s)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,i,s){let a=null,o=null,c=null,d=this._targetRay,g=this._grip,b=this._hand;if(e&&i.session.visibilityState!=="visible-blurred"){if(b&&e.hand){c=!0;for(let ut of e.hand.values()){let gt=i.getJointPose(ut,s),wt=this._getHandJoint(b,ut);gt!==null&&(wt.matrix.fromArray(gt.transform.matrix),wt.matrix.decompose(wt.position,wt.rotation,wt.scale),wt.jointRadius=gt.radius),wt.visible=gt!==null}let j=b.joints["index-finger-tip"],_e=b.joints["thumb-tip"],$=j.position.distanceTo(_e.position),rt=.02,st=.005;b.inputState.pinching&&$>rt+st?(b.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!b.inputState.pinching&&$<=rt-st&&(b.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else g!==null&&e.gripSpace&&(o=i.getPose(e.gripSpace,s),o!==null&&(g.matrix.fromArray(o.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),o.linearVelocity?(g.hasLinearVelocity=!0,g.linearVelocity.copy(o.linearVelocity)):g.hasLinearVelocity=!1,o.angularVelocity?(g.hasAngularVelocity=!0,g.angularVelocity.copy(o.angularVelocity)):g.hasAngularVelocity=!1));d!==null&&(a=i.getPose(e.targetRaySpace,s),a===null&&o!==null&&(a=o),a!==null&&(d.matrix.fromArray(a.transform.matrix),d.matrix.decompose(d.position,d.rotation,d.scale),a.linearVelocity?(d.hasLinearVelocity=!0,d.linearVelocity.copy(a.linearVelocity)):d.hasLinearVelocity=!1,a.angularVelocity?(d.hasAngularVelocity=!0,d.angularVelocity.copy(a.angularVelocity)):d.hasAngularVelocity=!1,this.dispatchEvent(qG)))}return d!==null&&(d.visible=a!==null),g!==null&&(g.visible=o!==null),b!==null&&(b.visible=c!==null),this}_getHandJoint(e,i){if(e.joints[i.jointName]===void 0){let s=new ps;s.matrixAutoUpdate=!1,s.visible=!1,e.joints[i.jointName]=s,e.add(s)}return e.joints[i.jointName]}},gs=class extends tr{constructor(e,i,s,a,o,c,d,g,b,j){if(j=j!==void 0?j:vc,j!==vc&&j!==cl)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");s===void 0&&j===vc&&(s=js),s===void 0&&j===cl&&(s=ol),super(null,a,o,c,d,g,j,s,b),this.isDepthTexture=!0,this.image={width:e,height:i},this.magFilter=d!==void 0?d:Vt,this.minFilter=g!==void 0?g:Vt,this.flipY=!1,this.generateMipmaps=!1}},nw=class extends fr$2{constructor(e,i){super();let s=this,a=null,o=1,c=null,d="local-floor",g=1,b=null,j=null,_e=null,$=null,rt=null,st=null,ut=i.getContextAttributes(),gt=null,wt=null,yt=[],At=[],Ct=new Set,Tt=new Map,kt=new ri;kt.layers.enable(1),kt.viewport=new Ke;let Pt=new ri;Pt.layers.enable(2),Pt.viewport=new Ke;let It=[kt,Pt],Lt=new iw;Lt.layers.enable(1),Lt.layers.enable(2);let Nt=null,Ht=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(un){let Zn=yt[un];return Zn===void 0&&(Zn=new xp,yt[un]=Zn),Zn.getTargetRaySpace()},this.getControllerGrip=function(un){let Zn=yt[un];return Zn===void 0&&(Zn=new xp,yt[un]=Zn),Zn.getGripSpace()},this.getHand=function(un){let Zn=yt[un];return Zn===void 0&&(Zn=new xp,yt[un]=Zn),Zn.getHandSpace()};function dr(un){let Zn=At.indexOf(un.inputSource);if(Zn===-1)return;let xu=yt[Zn];xu!==void 0&&xu.dispatchEvent({type:un.type,data:un.inputSource})}function hs(){a.removeEventListener("select",dr),a.removeEventListener("selectstart",dr),a.removeEventListener("selectend",dr),a.removeEventListener("squeeze",dr),a.removeEventListener("squeezestart",dr),a.removeEventListener("squeezeend",dr),a.removeEventListener("end",hs),a.removeEventListener("inputsourceschange",_s);for(let un=0;un<yt.length;un++){let Zn=At[un];Zn!==null&&(At[un]=null,yt[un].disconnect(Zn))}Nt=null,Ht=null,e.setRenderTarget(gt),rt=null,$=null,_e=null,a=null,wt=null,gn.stop(),s.isPresenting=!1,s.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(un){o=un,s.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(un){d=un,s.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return b||c},this.setReferenceSpace=function(un){b=un},this.getBaseLayer=function(){return $!==null?$:rt},this.getBinding=function(){return _e},this.getFrame=function(){return st},this.getSession=function(){return a},this.setSession=async function(un){if(a=un,a!==null){if(gt=e.getRenderTarget(),a.addEventListener("select",dr),a.addEventListener("selectstart",dr),a.addEventListener("selectend",dr),a.addEventListener("squeeze",dr),a.addEventListener("squeezestart",dr),a.addEventListener("squeezeend",dr),a.addEventListener("end",hs),a.addEventListener("inputsourceschange",_s),ut.xrCompatible!==!0&&await i.makeXRCompatible(),a.renderState.layers===void 0||e.capabilities.isWebGL2===!1){let Zn={antialias:a.renderState.layers===void 0?ut.antialias:!0,alpha:ut.alpha,depth:ut.depth,stencil:ut.stencil,framebufferScaleFactor:o};rt=new XRWebGLLayer(a,i,Zn),a.updateRenderState({baseLayer:rt}),wt=new ft(rt.framebufferWidth,rt.framebufferHeight,{format:Qr,type:Ir$1,encoding:e.outputEncoding,stencilBuffer:ut.stencil})}else{let Zn=null,xu=null,ou=null;ut.depth&&(ou=ut.stencil?35056:33190,Zn=ut.stencil?cl:vc,xu=ut.stencil?ol:js);let sp={colorFormat:32856,depthFormat:ou,scaleFactor:o};_e=new XRWebGLBinding(a,i),$=_e.createProjectionLayer(sp),a.updateRenderState({layers:[$]}),wt=new ft($.textureWidth,$.textureHeight,{format:Qr,type:Ir$1,depthTexture:new gs($.textureWidth,$.textureHeight,xu,void 0,void 0,void 0,void 0,void 0,void 0,Zn),stencilBuffer:ut.stencil,encoding:e.outputEncoding,samples:ut.antialias?4:0});let wu=e.properties.get(wt);wu.__ignoreDepthValues=$.ignoreDepthValues}wt.isXRRenderTarget=!0,this.setFoveation(g),b=null,c=await a.requestReferenceSpace(d),gn.setContext(a),gn.start(),s.isPresenting=!0,s.dispatchEvent({type:"sessionstart"})}};function _s(un){for(let Zn=0;Zn<un.removed.length;Zn++){let xu=un.removed[Zn],ou=At.indexOf(xu);ou>=0&&(At[ou]=null,yt[ou].disconnect(xu))}for(let Zn=0;Zn<un.added.length;Zn++){let xu=un.added[Zn],ou=At.indexOf(xu);if(ou===-1){for(let wu=0;wu<yt.length;wu++)if(wu>=At.length){At.push(xu),ou=wu;break}else if(At[wu]===null){At[wu]=xu,ou=wu;break}if(ou===-1)break}let sp=yt[ou];sp&&sp.connect(xu)}}let ds=new _,Nn=new _;function us(un,Zn,xu){ds.setFromMatrixPosition(Zn.matrixWorld),Nn.setFromMatrixPosition(xu.matrixWorld);let ou=ds.distanceTo(Nn),sp=Zn.projectionMatrix.elements,wu=xu.projectionMatrix.elements,l1=sp[14]/(sp[10]-1),P0=sp[14]/(sp[10]+1),B0=(sp[9]+1)/sp[5],q1=(sp[9]-1)/sp[5],ox=(sp[8]-1)/sp[0],qx=(wu[8]+1)/wu[0],N_=l1*ox,eS=l1*qx,tA=ou/(-ox+qx),fD=tA*-ox;Zn.matrixWorld.decompose(un.position,un.quaternion,un.scale),un.translateX(fD),un.translateZ(tA),un.matrixWorld.compose(un.position,un.quaternion,un.scale),un.matrixWorldInverse.copy(un.matrixWorld).invert();let q3=l1+tA,SA=P0+tA,wA=N_-fD,mO=eS+(ou-fD),sR=B0*P0/SA*q3,bu=q1*P0/SA*q3;un.projectionMatrix.makePerspective(wA,mO,sR,bu,q3,SA)}function hn(un,Zn){Zn===null?un.matrixWorld.copy(un.matrix):un.matrixWorld.multiplyMatrices(Zn.matrixWorld,un.matrix),un.matrixWorldInverse.copy(un.matrixWorld).invert()}this.updateCamera=function(un){if(a===null)return;Lt.near=Pt.near=kt.near=un.near,Lt.far=Pt.far=kt.far=un.far,(Nt!==Lt.near||Ht!==Lt.far)&&(a.updateRenderState({depthNear:Lt.near,depthFar:Lt.far}),Nt=Lt.near,Ht=Lt.far);let Zn=un.parent,xu=Lt.cameras;hn(Lt,Zn);for(let sp=0;sp<xu.length;sp++)hn(xu[sp],Zn);Lt.matrixWorld.decompose(Lt.position,Lt.quaternion,Lt.scale),un.matrix.copy(Lt.matrix),un.matrix.decompose(un.position,un.quaternion,un.scale);let ou=un.children;for(let sp=0,wu=ou.length;sp<wu;sp++)ou[sp].updateMatrixWorld(!0);xu.length===2?us(Lt,kt,Pt):Lt.projectionMatrix.copy(kt.projectionMatrix)},this.getCamera=function(){return Lt},this.getFoveation=function(){if(!($===null&&rt===null))return g},this.setFoveation=function(un){g=un,$!==null&&($.fixedFoveation=un),rt!==null&&rt.fixedFoveation!==void 0&&(rt.fixedFoveation=un)},this.getPlanes=function(){return Ct};let Ft=null;function Gr(un,Zn){if(j=Zn.getViewerPose(b||c),st=Zn,j!==null){let xu=j.views;rt!==null&&(e.setRenderTargetFramebuffer(wt,rt.framebuffer),e.setRenderTarget(wt));let ou=!1;xu.length!==Lt.cameras.length&&(Lt.cameras.length=0,ou=!0);for(let sp=0;sp<xu.length;sp++){let wu=xu[sp],l1=null;if(rt!==null)l1=rt.getViewport(wu);else{let B0=_e.getViewSubImage($,wu);l1=B0.viewport,sp===0&&(e.setRenderTargetTextures(wt,B0.colorTexture,$.ignoreDepthValues?void 0:B0.depthStencilTexture),e.setRenderTarget(wt))}let P0=It[sp];P0===void 0&&(P0=new ri,P0.layers.enable(sp),P0.viewport=new Ke,It[sp]=P0),P0.matrix.fromArray(wu.transform.matrix),P0.projectionMatrix.fromArray(wu.projectionMatrix),P0.viewport.set(l1.x,l1.y,l1.width,l1.height),sp===0&&Lt.matrix.copy(P0.matrix),ou===!0&&Lt.cameras.push(P0)}}for(let xu=0;xu<yt.length;xu++){let ou=At[xu],sp=yt[xu];ou!==null&&sp!==void 0&&sp.update(ou,Zn,b||c)}if(Ft&&Ft(un,Zn),Zn.detectedPlanes){s.dispatchEvent({type:"planesdetected",data:Zn.detectedPlanes});let xu=null;for(let ou of Ct)Zn.detectedPlanes.has(ou)||(xu===null&&(xu=[]),xu.push(ou));if(xu!==null)for(let ou of xu)Ct.delete(ou),Tt.delete(ou),s.dispatchEvent({type:"planeremoved",data:ou});for(let ou of Zn.detectedPlanes)if(!Ct.has(ou))Ct.add(ou),Tt.set(ou,Zn.lastChangedTime),s.dispatchEvent({type:"planeadded",data:ou});else{let sp=Tt.get(ou);ou.lastChangedTime>sp&&(Tt.set(ou,ou.lastChangedTime),s.dispatchEvent({type:"planechanged",data:ou}))}}st=null}let gn=new KM;gn.setAnimationLoop(Gr),this.setAnimationLoop=function(un){Ft=un},this.dispose=function(){}}};function YG(e,i){function s(gt,wt){wt.color.getRGB(gt.fogColor.value,QM(e)),wt.isFog?(gt.fogNear.value=wt.near,gt.fogFar.value=wt.far):wt.isFogExp2&&(gt.fogDensity.value=wt.density)}function a(gt,wt,yt,At,Ct){wt.isMeshBasicMaterial||wt.isMeshLambertMaterial?o(gt,wt):wt.isMeshToonMaterial?(o(gt,wt),_e(gt,wt)):wt.isMeshPhongMaterial?(o(gt,wt),j(gt,wt)):wt.isMeshStandardMaterial?(o(gt,wt),$(gt,wt),wt.isMeshPhysicalMaterial&&rt(gt,wt,Ct)):wt.isMeshMatcapMaterial?(o(gt,wt),st(gt,wt)):wt.isMeshDepthMaterial?o(gt,wt):wt.isMeshDistanceMaterial?(o(gt,wt),ut(gt,wt)):wt.isMeshNormalMaterial?o(gt,wt):wt.isLineBasicMaterial?(c(gt,wt),wt.isLineDashedMaterial&&d(gt,wt)):wt.isPointsMaterial?g(gt,wt,yt,At):wt.isSpriteMaterial?b(gt,wt):wt.isShadowMaterial?(gt.color.value.copy(wt.color),gt.opacity.value=wt.opacity):wt.isShaderMaterial&&(wt.uniformsNeedUpdate=!1)}function o(gt,wt){gt.opacity.value=wt.opacity,wt.color&&gt.diffuse.value.copy(wt.color),wt.emissive&&gt.emissive.value.copy(wt.emissive).multiplyScalar(wt.emissiveIntensity),wt.map&&(gt.map.value=wt.map),wt.alphaMap&&(gt.alphaMap.value=wt.alphaMap),wt.bumpMap&&(gt.bumpMap.value=wt.bumpMap,gt.bumpScale.value=wt.bumpScale,wt.side===yi&&(gt.bumpScale.value*=-1)),wt.displacementMap&&(gt.displacementMap.value=wt.displacementMap,gt.displacementScale.value=wt.displacementScale,gt.displacementBias.value=wt.displacementBias),wt.emissiveMap&&(gt.emissiveMap.value=wt.emissiveMap),wt.normalMap&&(gt.normalMap.value=wt.normalMap,gt.normalScale.value.copy(wt.normalScale),wt.side===yi&&gt.normalScale.value.negate()),wt.specularMap&&(gt.specularMap.value=wt.specularMap),wt.alphaTest>0&&(gt.alphaTest.value=wt.alphaTest);let yt=i.get(wt).envMap;if(yt&&(gt.envMap.value=yt,gt.flipEnvMap.value=yt.isCubeTexture&&yt.isRenderTargetTexture===!1?-1:1,gt.reflectivity.value=wt.reflectivity,gt.ior.value=wt.ior,gt.refractionRatio.value=wt.refractionRatio),wt.lightMap){gt.lightMap.value=wt.lightMap;let Tt=e.physicallyCorrectLights!==!0?Math.PI:1;gt.lightMapIntensity.value=wt.lightMapIntensity*Tt}wt.aoMap&&(gt.aoMap.value=wt.aoMap,gt.aoMapIntensity.value=wt.aoMapIntensity);let At;wt.map?At=wt.map:wt.specularMap?At=wt.specularMap:wt.displacementMap?At=wt.displacementMap:wt.normalMap?At=wt.normalMap:wt.bumpMap?At=wt.bumpMap:wt.roughnessMap?At=wt.roughnessMap:wt.metalnessMap?At=wt.metalnessMap:wt.alphaMap?At=wt.alphaMap:wt.emissiveMap?At=wt.emissiveMap:wt.clearcoatMap?At=wt.clearcoatMap:wt.clearcoatNormalMap?At=wt.clearcoatNormalMap:wt.clearcoatRoughnessMap?At=wt.clearcoatRoughnessMap:wt.iridescenceMap?At=wt.iridescenceMap:wt.iridescenceThicknessMap?At=wt.iridescenceThicknessMap:wt.specularIntensityMap?At=wt.specularIntensityMap:wt.specularColorMap?At=wt.specularColorMap:wt.transmissionMap?At=wt.transmissionMap:wt.thicknessMap?At=wt.thicknessMap:wt.sheenColorMap?At=wt.sheenColorMap:wt.sheenRoughnessMap&&(At=wt.sheenRoughnessMap),At!==void 0&&(At.isWebGLRenderTarget&&(At=At.texture),At.matrixAutoUpdate===!0&&At.updateMatrix(),gt.uvTransform.value.copy(At.matrix));let Ct;wt.aoMap?Ct=wt.aoMap:wt.lightMap&&(Ct=wt.lightMap),Ct!==void 0&&(Ct.isWebGLRenderTarget&&(Ct=Ct.texture),Ct.matrixAutoUpdate===!0&&Ct.updateMatrix(),gt.uv2Transform.value.copy(Ct.matrix))}function c(gt,wt){gt.diffuse.value.copy(wt.color),gt.opacity.value=wt.opacity}function d(gt,wt){gt.dashSize.value=wt.dashSize,gt.totalSize.value=wt.dashSize+wt.gapSize,gt.scale.value=wt.scale}function g(gt,wt,yt,At){gt.diffuse.value.copy(wt.color),gt.opacity.value=wt.opacity,gt.size.value=wt.size*yt,gt.scale.value=At*.5,wt.map&&(gt.map.value=wt.map),wt.alphaMap&&(gt.alphaMap.value=wt.alphaMap),wt.alphaTest>0&&(gt.alphaTest.value=wt.alphaTest);let Ct;wt.map?Ct=wt.map:wt.alphaMap&&(Ct=wt.alphaMap),Ct!==void 0&&(Ct.matrixAutoUpdate===!0&&Ct.updateMatrix(),gt.uvTransform.value.copy(Ct.matrix))}function b(gt,wt){gt.diffuse.value.copy(wt.color),gt.opacity.value=wt.opacity,gt.rotation.value=wt.rotation,wt.map&&(gt.map.value=wt.map),wt.alphaMap&&(gt.alphaMap.value=wt.alphaMap),wt.alphaTest>0&&(gt.alphaTest.value=wt.alphaTest);let yt;wt.map?yt=wt.map:wt.alphaMap&&(yt=wt.alphaMap),yt!==void 0&&(yt.matrixAutoUpdate===!0&&yt.updateMatrix(),gt.uvTransform.value.copy(yt.matrix))}function j(gt,wt){gt.specular.value.copy(wt.specular),gt.shininess.value=Math.max(wt.shininess,1e-4)}function _e(gt,wt){wt.gradientMap&&(gt.gradientMap.value=wt.gradientMap)}function $(gt,wt){gt.roughness.value=wt.roughness,gt.metalness.value=wt.metalness,wt.roughnessMap&&(gt.roughnessMap.value=wt.roughnessMap),wt.metalnessMap&&(gt.metalnessMap.value=wt.metalnessMap),i.get(wt).envMap&&(gt.envMapIntensity.value=wt.envMapIntensity)}function rt(gt,wt,yt){gt.ior.value=wt.ior,wt.sheen>0&&(gt.sheenColor.value.copy(wt.sheenColor).multiplyScalar(wt.sheen),gt.sheenRoughness.value=wt.sheenRoughness,wt.sheenColorMap&&(gt.sheenColorMap.value=wt.sheenColorMap),wt.sheenRoughnessMap&&(gt.sheenRoughnessMap.value=wt.sheenRoughnessMap)),wt.clearcoat>0&&(gt.clearcoat.value=wt.clearcoat,gt.clearcoatRoughness.value=wt.clearcoatRoughness,wt.clearcoatMap&&(gt.clearcoatMap.value=wt.clearcoatMap),wt.clearcoatRoughnessMap&&(gt.clearcoatRoughnessMap.value=wt.clearcoatRoughnessMap),wt.clearcoatNormalMap&&(gt.clearcoatNormalScale.value.copy(wt.clearcoatNormalScale),gt.clearcoatNormalMap.value=wt.clearcoatNormalMap,wt.side===yi&&gt.clearcoatNormalScale.value.negate())),wt.iridescence>0&&(gt.iridescence.value=wt.iridescence,gt.iridescenceIOR.value=wt.iridescenceIOR,gt.iridescenceThicknessMinimum.value=wt.iridescenceThicknessRange[0],gt.iridescenceThicknessMaximum.value=wt.iridescenceThicknessRange[1],wt.iridescenceMap&&(gt.iridescenceMap.value=wt.iridescenceMap),wt.iridescenceThicknessMap&&(gt.iridescenceThicknessMap.value=wt.iridescenceThicknessMap)),wt.transmission>0&&(gt.transmission.value=wt.transmission,gt.transmissionSamplerMap.value=yt.texture,gt.transmissionSamplerSize.value.set(yt.width,yt.height),wt.transmissionMap&&(gt.transmissionMap.value=wt.transmissionMap),gt.thickness.value=wt.thickness,wt.thicknessMap&&(gt.thicknessMap.value=wt.thicknessMap),gt.attenuationDistance.value=wt.attenuationDistance,gt.attenuationColor.value.copy(wt.attenuationColor)),gt.specularIntensity.value=wt.specularIntensity,gt.specularColor.value.copy(wt.specularColor),wt.specularIntensityMap&&(gt.specularIntensityMap.value=wt.specularIntensityMap),wt.specularColorMap&&(gt.specularColorMap.value=wt.specularColorMap)}function st(gt,wt){wt.matcap&&(gt.matcap.value=wt.matcap)}function ut(gt,wt){gt.referencePosition.value.copy(wt.referencePosition),gt.nearDistance.value=wt.nearDistance,gt.farDistance.value=wt.farDistance}return{refreshFogUniforms:s,refreshMaterialUniforms:a}}function XG(e,i,s,a){let o={},c={},d=[],g=s.isWebGL2?e.getParameter(35375):0;function b(At,Ct){let Tt=Ct.program;a.uniformBlockBinding(At,Tt)}function j(At,Ct){let Tt=o[At.id];Tt===void 0&&(ut(At),Tt=_e(At),o[At.id]=Tt,At.addEventListener("dispose",wt));let kt=Ct.program;a.updateUBOMapping(At,kt);let Pt=i.render.frame;c[At.id]!==Pt&&(rt(At),c[At.id]=Pt)}function _e(At){let Ct=$();At.__bindingPointIndex=Ct;let Tt=e.createBuffer(),kt=At.__size,Pt=At.usage;return e.bindBuffer(35345,Tt),e.bufferData(35345,kt,Pt),e.bindBuffer(35345,null),e.bindBufferBase(35345,Ct,Tt),Tt}function $(){for(let At=0;At<g;At++)if(d.indexOf(At)===-1)return d.push(At),At;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function rt(At){let Ct=o[At.id],Tt=At.uniforms,kt=At.__cache;e.bindBuffer(35345,Ct);for(let Pt=0,It=Tt.length;Pt<It;Pt++){let Lt=Tt[Pt];if(st(Lt,Pt,kt)===!0){let Nt=Lt.__offset,Ht=Array.isArray(Lt.value)?Lt.value:[Lt.value],dr=0;for(let hs=0;hs<Ht.length;hs++){let _s=Ht[hs],ds=gt(_s);typeof _s=="number"?(Lt.__data[0]=_s,e.bufferSubData(35345,Nt+dr,Lt.__data)):_s.isMatrix3?(Lt.__data[0]=_s.elements[0],Lt.__data[1]=_s.elements[1],Lt.__data[2]=_s.elements[2],Lt.__data[3]=_s.elements[0],Lt.__data[4]=_s.elements[3],Lt.__data[5]=_s.elements[4],Lt.__data[6]=_s.elements[5],Lt.__data[7]=_s.elements[0],Lt.__data[8]=_s.elements[6],Lt.__data[9]=_s.elements[7],Lt.__data[10]=_s.elements[8],Lt.__data[11]=_s.elements[0]):(_s.toArray(Lt.__data,dr),dr+=ds.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(35345,Nt,Lt.__data)}}e.bindBuffer(35345,null)}function st(At,Ct,Tt){let kt=At.value;if(Tt[Ct]===void 0){if(typeof kt=="number")Tt[Ct]=kt;else{let Pt=Array.isArray(kt)?kt:[kt],It=[];for(let Lt=0;Lt<Pt.length;Lt++)It.push(Pt[Lt].clone());Tt[Ct]=It}return!0}else if(typeof kt=="number"){if(Tt[Ct]!==kt)return Tt[Ct]=kt,!0}else{let Pt=Array.isArray(Tt[Ct])?Tt[Ct]:[Tt[Ct]],It=Array.isArray(kt)?kt:[kt];for(let Lt=0;Lt<Pt.length;Lt++){let Nt=Pt[Lt];if(Nt.equals(It[Lt])===!1)return Nt.copy(It[Lt]),!0}}return!1}function ut(At){let Ct=At.uniforms,Tt=0,kt=16,Pt=0;for(let It=0,Lt=Ct.length;It<Lt;It++){let Nt=Ct[It],Ht={boundary:0,storage:0},dr=Array.isArray(Nt.value)?Nt.value:[Nt.value];for(let hs=0,_s=dr.length;hs<_s;hs++){let ds=dr[hs],Nn=gt(ds);Ht.boundary+=Nn.boundary,Ht.storage+=Nn.storage}if(Nt.__data=new Float32Array(Ht.storage/Float32Array.BYTES_PER_ELEMENT),Nt.__offset=Tt,It>0){Pt=Tt%kt;let hs=kt-Pt;Pt!==0&&hs-Ht.boundary<0&&(Tt+=kt-Pt,Nt.__offset=Tt)}Tt+=Ht.storage}return Pt=Tt%kt,Pt>0&&(Tt+=kt-Pt),At.__size=Tt,At.__cache={},this}function gt(At){let Ct={boundary:0,storage:0};return typeof At=="number"?(Ct.boundary=4,Ct.storage=4):At.isVector2?(Ct.boundary=8,Ct.storage=8):At.isVector3||At.isColor?(Ct.boundary=16,Ct.storage=12):At.isVector4?(Ct.boundary=16,Ct.storage=16):At.isMatrix3?(Ct.boundary=48,Ct.storage=48):At.isMatrix4?(Ct.boundary=64,Ct.storage=64):At.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",At),Ct}function wt(At){let Ct=At.target;Ct.removeEventListener("dispose",wt);let Tt=d.indexOf(Ct.__bindingPointIndex);d.splice(Tt,1),e.deleteBuffer(o[Ct.id]),delete o[Ct.id],delete c[Ct.id]}function yt(){for(let At in o)e.deleteBuffer(o[At]);d=[],o={},c={}}return{bind:b,update:j,dispose:yt}}function QG(){let e=_p("canvas");return e.style.display="block",e}function Dw(e={}){this.isWebGLRenderer=!0;let i=e.canvas!==void 0?e.canvas:QG(),s=e.context!==void 0?e.context:null,a=e.depth!==void 0?e.depth:!0,o=e.stencil!==void 0?e.stencil:!0,c=e.antialias!==void 0?e.antialias:!1,d=e.premultipliedAlpha!==void 0?e.premultipliedAlpha:!0,g=e.preserveDrawingBuffer!==void 0?e.preserveDrawingBuffer:!1,b=e.powerPreference!==void 0?e.powerPreference:"default",j=e.failIfMajorPerformanceCaveat!==void 0?e.failIfMajorPerformanceCaveat:!1,_e;s!==null?_e=s.getContextAttributes().alpha:_e=e.alpha!==void 0?e.alpha:!1;let $=null,rt=null,st=[],ut=[];this.domElement=i,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Sn,this.physicallyCorrectLights=!1,this.toneMapping=Hs,this.toneMappingExposure=1;let gt=this,wt=!1,yt=0,At=0,Ct=null,Tt=-1,kt=null,Pt=new Ke,It=new Ke,Lt=null,Nt=i.width,Ht=i.height,dr=1,hs=null,_s=null,ds=new Ke(0,0,Nt,Ht),Nn=new Ke(0,0,Nt,Ht),us=!1,hn=new Tp,Ft=!1,Gr=!1,gn=null,un=new ce$1,Zn=new z$1,xu=new _,ou={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function sp(){return Ct===null?dr:1}let wu=s;function l1(Su,ux){for(let iS=0;iS<Su.length;iS++){let ax=Su[iS],rS=i.getContext(ax,ux);if(rS!==null)return rS}return null}try{let Su={alpha:!0,depth:a,stencil:o,antialias:c,premultipliedAlpha:d,preserveDrawingBuffer:g,powerPreference:b,failIfMajorPerformanceCaveat:j};if("setAttribute"in i&&i.setAttribute("data-engine",`three.js r${ba}`),i.addEventListener("webglcontextlost",PL,!1),i.addEventListener("webglcontextrestored",CL,!1),i.addEventListener("webglcontextcreationerror",TL,!1),wu===null){let ux=["webgl2","webgl","experimental-webgl"];if(gt.isWebGL1Renderer===!0&&ux.shift(),wu=l1(ux,Su),wu===null)throw l1(ux)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}wu.getShaderPrecisionFormat===void 0&&(wu.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Su){throw console.error("THREE.WebGLRenderer: "+Su.message),Su}let P0,B0,q1,ox,qx,N_,eS,tA,fD,q3,SA,wA,mO,sR,bu,au,X1,eE,bo,C3,aR,X3,U_,MO;function oI(){P0=new gU(wu),B0=new uU(wu,P0,e),P0.init(B0),X3=new WG(wu,P0,B0),q1=new jG(wu,P0,B0),ox=new xU,qx=new OG,N_=new HG(wu,P0,q1,qx,B0,X3,ox),eS=new dU(gt),tA=new mU(gt),fD=new Ck(wu,B0),U_=new lU(wu,P0,fD,B0),q3=new yU(wu,fD,ox,U_),SA=new AU(wu,q3,fD,ox),bo=new wU(wu,B0,N_),au=new hU(qx),wA=new DG(gt,eS,tA,P0,B0,U_,au),mO=new YG(gt,qx),sR=new RG,bu=new VG(P0,B0),eE=new aU(gt,eS,tA,q1,SA,_e,d),X1=new GG(gt,SA,B0),MO=new XG(wu,ox,B0,q1),C3=new cU(wu,P0,ox,B0),aR=new vU(wu,P0,ox,B0),ox.programs=wA.programs,gt.capabilities=B0,gt.extensions=P0,gt.properties=qx,gt.renderLists=sR,gt.shadowMap=X1,gt.state=q1,gt.info=ox}oI();let IO=new nw(gt,wu);this.xr=IO,this.getContext=function(){return wu},this.getContextAttributes=function(){return wu.getContextAttributes()},this.forceContextLoss=function(){let Su=P0.get("WEBGL_lose_context");Su&&Su.loseContext()},this.forceContextRestore=function(){let Su=P0.get("WEBGL_lose_context");Su&&Su.restoreContext()},this.getPixelRatio=function(){return dr},this.setPixelRatio=function(Su){Su!==void 0&&(dr=Su,this.setSize(Nt,Ht,!1))},this.getSize=function(Su){return Su.set(Nt,Ht)},this.setSize=function(Su,ux,iS){if(IO.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Nt=Su,Ht=ux,i.width=Math.floor(Su*dr),i.height=Math.floor(ux*dr),iS!==!1&&(i.style.width=Su+"px",i.style.height=ux+"px"),this.setViewport(0,0,Su,ux)},this.getDrawingBufferSize=function(Su){return Su.set(Nt*dr,Ht*dr).floor()},this.setDrawingBufferSize=function(Su,ux,iS){Nt=Su,Ht=ux,dr=iS,i.width=Math.floor(Su*iS),i.height=Math.floor(ux*iS),this.setViewport(0,0,Su,ux)},this.getCurrentViewport=function(Su){return Su.copy(Pt)},this.getViewport=function(Su){return Su.copy(ds)},this.setViewport=function(Su,ux,iS,ax){Su.isVector4?ds.set(Su.x,Su.y,Su.z,Su.w):ds.set(Su,ux,iS,ax),q1.viewport(Pt.copy(ds).multiplyScalar(dr).floor())},this.getScissor=function(Su){return Su.copy(Nn)},this.setScissor=function(Su,ux,iS,ax){Su.isVector4?Nn.set(Su.x,Su.y,Su.z,Su.w):Nn.set(Su,ux,iS,ax),q1.scissor(It.copy(Nn).multiplyScalar(dr).floor())},this.getScissorTest=function(){return us},this.setScissorTest=function(Su){q1.setScissorTest(us=Su)},this.setOpaqueSort=function(Su){hs=Su},this.setTransparentSort=function(Su){_s=Su},this.getClearColor=function(Su){return Su.copy(eE.getClearColor())},this.setClearColor=function(){eE.setClearColor.apply(eE,arguments)},this.getClearAlpha=function(){return eE.getClearAlpha()},this.setClearAlpha=function(){eE.setClearAlpha.apply(eE,arguments)},this.clear=function(Su=!0,ux=!0,iS=!0){let ax=0;Su&&(ax|=16384),ux&&(ax|=256),iS&&(ax|=1024),wu.clear(ax)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){i.removeEventListener("webglcontextlost",PL,!1),i.removeEventListener("webglcontextrestored",CL,!1),i.removeEventListener("webglcontextcreationerror",TL,!1),sR.dispose(),bu.dispose(),qx.dispose(),eS.dispose(),tA.dispose(),SA.dispose(),U_.dispose(),MO.dispose(),wA.dispose(),IO.dispose(),IO.removeEventListener("sessionstart",pO),IO.removeEventListener("sessionend",jL),gn&&(gn.dispose(),gn=null),GL.stop()};function PL(Su){Su.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),wt=!0}function CL(){console.log("THREE.WebGLRenderer: Context Restored."),wt=!1;let Su=ox.autoReset,ux=X1.enabled,iS=X1.autoUpdate,ax=X1.needsUpdate,rS=X1.type;oI(),ox.autoReset=Su,X1.enabled=ux,X1.autoUpdate=iS,X1.needsUpdate=ax,X1.type=rS}function TL(Su){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Su.statusMessage)}function qL(Su){let ux=Su.target;ux.removeEventListener("dispose",qL),e$(ux)}function e$(Su){g0(Su),qx.remove(Su)}function g0(Su){let ux=qx.get(Su).programs;ux!==void 0&&(ux.forEach(function(iS){wA.releaseProgram(iS)}),Su.isShaderMaterial&&wA.releaseShaderCache(Su))}this.renderBufferDirect=function(Su,ux,iS,ax,rS,bL){ux===null&&(ux=ou);let OL=rS.isMesh&&rS.matrixWorld.determinant()<0,LL=b$(Su,ux,iS,ax,rS);q1.setMaterial(ax,OL);let IL=iS.index,WL=1;ax.wireframe===!0&&(IL=q3.getWireframeAttribute(iS),WL=2);let VL=iS.drawRange,HL=iS.attributes.position,BL=VL.start*WL,s$=(VL.start+VL.count)*WL;bL!==null&&(BL=Math.max(BL,bL.start*WL),s$=Math.min(s$,(bL.start+bL.count)*WL)),IL!==null?(BL=Math.max(BL,0),s$=Math.min(s$,IL.count)):HL!=null&&(BL=Math.max(BL,0),s$=Math.min(s$,HL.count));let n$=s$-BL;if(n$<0||n$===1/0)return;U_.setup(rS,ax,LL,iS,IL);let u$,t$=C3;if(IL!==null&&(u$=fD.get(IL),t$=aR,t$.setIndex(u$)),rS.isMesh)ax.wireframe===!0?(q1.setLineWidth(ax.wireframeLinewidth*sp()),t$.setMode(1)):t$.setMode(4);else if(rS.isLine){let UL=ax.linewidth;UL===void 0&&(UL=1),q1.setLineWidth(UL*sp()),rS.isLineSegments?t$.setMode(1):rS.isLineLoop?t$.setMode(2):t$.setMode(3)}else rS.isPoints?t$.setMode(0):rS.isSprite&&t$.setMode(4);if(rS.isInstancedMesh)t$.renderInstances(BL,n$,rS.count);else if(iS.isInstancedBufferGeometry){let UL=iS._maxInstanceCount!==void 0?iS._maxInstanceCount:1/0,l$=Math.min(iS.instanceCount,UL);t$.renderInstances(BL,n$,l$)}else t$.render(BL,n$)},this.compile=function(Su,ux){function iS(ax,rS,bL){ax.transparent===!0&&ax.side===tn&&ax.forceSinglePass===!1?(ax.side=yi,ax.needsUpdate=!0,a$(ax,rS,bL),ax.side=es,ax.needsUpdate=!0,a$(ax,rS,bL),ax.side=tn):a$(ax,rS,bL)}rt=bu.get(Su),rt.init(),ut.push(rt),Su.traverseVisible(function(ax){ax.isLight&&ax.layers.test(ux.layers)&&(rt.pushLight(ax),ax.castShadow&&rt.pushShadow(ax))}),rt.setupLights(gt.physicallyCorrectLights),Su.traverse(function(ax){let rS=ax.material;if(rS)if(Array.isArray(rS))for(let bL=0;bL<rS.length;bL++){let OL=rS[bL];iS(OL,Su,ax)}else iS(rS,Su,ax)}),ut.pop(),rt=null};let tS=null;function tE(Su){tS&&tS(Su)}function pO(){GL.stop()}function jL(){GL.start()}let GL=new KM;GL.setAnimationLoop(tE),typeof self<"u"&&GL.setContext(self),this.setAnimationLoop=function(Su){tS=Su,IO.setAnimationLoop(Su),Su===null?GL.stop():GL.start()},IO.addEventListener("sessionstart",pO),IO.addEventListener("sessionend",jL),this.render=function(Su,ux){if(ux!==void 0&&ux.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(wt===!0)return;Su.matrixWorldAutoUpdate===!0&&Su.updateMatrixWorld(),ux.parent===null&&ux.matrixWorldAutoUpdate===!0&&ux.updateMatrixWorld(),IO.enabled===!0&&IO.isPresenting===!0&&(IO.cameraAutoUpdate===!0&&IO.updateCamera(ux),ux=IO.getCamera()),Su.isScene===!0&&Su.onBeforeRender(gt,Su,ux,Ct),rt=bu.get(Su,ut.length),rt.init(),ut.push(rt),un.multiplyMatrices(ux.projectionMatrix,ux.matrixWorldInverse),hn.setFromProjectionMatrix(un),Gr=this.localClippingEnabled,Ft=au.init(this.clippingPlanes,Gr),$=sR.get(Su,st.length),$.init(),st.push($),i$(Su,ux,0,gt.sortObjects),$.finish(),gt.sortObjects===!0&&$.sort(hs,_s),Ft===!0&&au.beginShadows();let iS=rt.state.shadowsArray;if(X1.render(iS,Su,ux),Ft===!0&&au.endShadows(),this.info.autoReset===!0&&this.info.reset(),eE.render($,Su),rt.setupLights(gt.physicallyCorrectLights),ux.isArrayCamera){let ax=ux.cameras;for(let rS=0,bL=ax.length;rS<bL;rS++){let OL=ax[rS];r$($,Su,OL,OL.viewport)}}else r$($,Su,ux);Ct!==null&&(N_.updateMultisampleRenderTarget(Ct),N_.updateRenderTargetMipmap(Ct)),Su.isScene===!0&&Su.onAfterRender(gt,Su,ux),U_.resetDefaultState(),Tt=-1,kt=null,ut.pop(),ut.length>0?rt=ut[ut.length-1]:rt=null,st.pop(),st.length>0?$=st[st.length-1]:$=null};function i$(Su,ux,iS,ax){if(Su.visible===!1)return;if(Su.layers.test(ux.layers)){if(Su.isGroup)iS=Su.renderOrder;else if(Su.isLOD)Su.autoUpdate===!0&&Su.update(ux);else if(Su.isLight)rt.pushLight(Su),Su.castShadow&&rt.pushShadow(Su);else if(Su.isSprite){if(!Su.frustumCulled||hn.intersectsSprite(Su)){ax&&xu.setFromMatrixPosition(Su.matrixWorld).applyMatrix4(un);let bL=SA.update(Su),OL=Su.material;OL.visible&&$.push(Su,bL,OL,iS,xu.z,null)}}else if((Su.isMesh||Su.isLine||Su.isPoints)&&(Su.isSkinnedMesh&&Su.skeleton.frame!==ox.render.frame&&(Su.skeleton.update(),Su.skeleton.frame=ox.render.frame),!Su.frustumCulled||hn.intersectsObject(Su))){ax&&xu.setFromMatrixPosition(Su.matrixWorld).applyMatrix4(un);let bL=SA.update(Su),OL=Su.material;if(Array.isArray(OL)){let LL=bL.groups;for(let IL=0,WL=LL.length;IL<WL;IL++){let VL=LL[IL],HL=OL[VL.materialIndex];HL&&HL.visible&&$.push(Su,bL,HL,iS,xu.z,VL)}}else OL.visible&&$.push(Su,bL,OL,iS,xu.z,null)}}let rS=Su.children;for(let bL=0,OL=rS.length;bL<OL;bL++)i$(rS[bL],ux,iS,ax)}function r$(Su,ux,iS,ax){let rS=Su.opaque,bL=Su.transmissive,OL=Su.transparent;rt.setupLightsView(iS),Ft===!0&&au.setGlobalState(gt.clippingPlanes,iS),bL.length>0&&h$(rS,ux,iS),ax&&q1.viewport(Pt.copy(ax)),rS.length>0&&YN(rS,ux,iS),bL.length>0&&YN(bL,ux,iS),OL.length>0&&YN(OL,ux,iS),q1.buffers.depth.setTest(!0),q1.buffers.depth.setMask(!0),q1.buffers.color.setMask(!0),q1.setPolygonOffset(!1)}function h$(Su,ux,iS){let ax=B0.isWebGL2;gn===null&&(gn=new ft(1,1,{generateMipmaps:!0,type:P0.has("EXT_color_buffer_half_float")?va:Ir$1,minFilter:bc,samples:ax&&c===!0?4:0})),gt.getDrawingBufferSize(Zn),ax?gn.setSize(Zn.x,Zn.y):gn.setSize(gy(Zn.x),gy(Zn.y));let rS=gt.getRenderTarget();gt.setRenderTarget(gn),gt.clear();let bL=gt.toneMapping;gt.toneMapping=Hs,YN(Su,ux,iS),gt.toneMapping=bL,N_.updateMultisampleRenderTarget(gn),N_.updateRenderTargetMipmap(gn),gt.setRenderTarget(rS)}function YN(Su,ux,iS){let ax=ux.isScene===!0?ux.overrideMaterial:null;for(let rS=0,bL=Su.length;rS<bL;rS++){let OL=Su[rS],LL=OL.object,IL=OL.geometry,WL=ax===null?OL.material:ax,VL=OL.group;LL.layers.test(iS.layers)&&o$(LL,ux,iS,IL,WL,VL)}}function o$(Su,ux,iS,ax,rS,bL){Su.onBeforeRender(gt,ux,iS,ax,rS,bL),Su.modelViewMatrix.multiplyMatrices(iS.matrixWorldInverse,Su.matrixWorld),Su.normalMatrix.getNormalMatrix(Su.modelViewMatrix),rS.onBeforeRender(gt,ux,iS,ax,Su,bL),rS.transparent===!0&&rS.side===tn&&rS.forceSinglePass===!1?(rS.side=yi,rS.needsUpdate=!0,gt.renderBufferDirect(iS,ux,ax,rS,Su,bL),rS.side=es,rS.needsUpdate=!0,gt.renderBufferDirect(iS,ux,ax,rS,Su,bL),rS.side=tn):gt.renderBufferDirect(iS,ux,ax,rS,Su,bL),Su.onAfterRender(gt,ux,iS,ax,rS,bL)}function a$(Su,ux,iS){ux.isScene!==!0&&(ux=ou);let ax=qx.get(Su),rS=rt.state.lights,bL=rt.state.shadowsArray,OL=rS.state.version,LL=wA.getParameters(Su,rS.state,bL,ux,iS),IL=wA.getProgramCacheKey(LL),WL=ax.programs;ax.environment=Su.isMeshStandardMaterial?ux.environment:null,ax.fog=ux.fog,ax.envMap=(Su.isMeshStandardMaterial?tA:eS).get(Su.envMap||ax.environment),WL===void 0&&(Su.addEventListener("dispose",qL),WL=new Map,ax.programs=WL);let VL=WL.get(IL);if(VL!==void 0){if(ax.currentProgram===VL&&ax.lightsStateVersion===OL)return g$(Su,LL),VL}else LL.uniforms=wA.getUniforms(Su),Su.onBuild(iS,LL,gt),Su.onBeforeCompile(LL,gt),VL=wA.acquireProgram(LL,IL),WL.set(IL,VL),ax.uniforms=LL.uniforms;let HL=ax.uniforms;(!Su.isShaderMaterial&&!Su.isRawShaderMaterial||Su.clipping===!0)&&(HL.clippingPlanes=au.uniform),g$(Su,LL),ax.needsLights=v$(Su),ax.lightsStateVersion=OL,ax.needsLights&&(HL.ambientLightColor.value=rS.state.ambient,HL.lightProbe.value=rS.state.probe,HL.directionalLights.value=rS.state.directional,HL.directionalLightShadows.value=rS.state.directionalShadow,HL.spotLights.value=rS.state.spot,HL.spotLightShadows.value=rS.state.spotShadow,HL.rectAreaLights.value=rS.state.rectArea,HL.ltc_1.value=rS.state.rectAreaLTC1,HL.ltc_2.value=rS.state.rectAreaLTC2,HL.pointLights.value=rS.state.point,HL.pointLightShadows.value=rS.state.pointShadow,HL.hemisphereLights.value=rS.state.hemi,HL.directionalShadowMap.value=rS.state.directionalShadowMap,HL.directionalShadowMatrix.value=rS.state.directionalShadowMatrix,HL.spotShadowMap.value=rS.state.spotShadowMap,HL.spotLightMatrix.value=rS.state.spotLightMatrix,HL.spotLightMap.value=rS.state.spotLightMap,HL.pointShadowMap.value=rS.state.pointShadowMap,HL.pointShadowMatrix.value=rS.state.pointShadowMatrix);let BL=VL.getUniforms(),s$=Gu.seqWithValue(BL.seq,HL);return ax.currentProgram=VL,ax.uniformsList=s$,VL}function g$(Su,ux){let iS=qx.get(Su);iS.outputEncoding=ux.outputEncoding,iS.instancing=ux.instancing,iS.skinning=ux.skinning,iS.morphTargets=ux.morphTargets,iS.morphNormals=ux.morphNormals,iS.morphColors=ux.morphColors,iS.morphTargetsCount=ux.morphTargetsCount,iS.numClippingPlanes=ux.numClippingPlanes,iS.numIntersection=ux.numClipIntersection,iS.vertexAlphas=ux.vertexAlphas,iS.vertexTangents=ux.vertexTangents,iS.toneMapping=ux.toneMapping}function b$(Su,ux,iS,ax,rS){ux.isScene!==!0&&(ux=ou),N_.resetTextureUnits();let bL=ux.fog,OL=ax.isMeshStandardMaterial?ux.environment:null,LL=Ct===null?gt.outputEncoding:Ct.isXRRenderTarget===!0?Ct.texture.encoding:Sn,IL=(ax.isMeshStandardMaterial?tA:eS).get(ax.envMap||OL),WL=ax.vertexColors===!0&&!!iS.attributes.color&&iS.attributes.color.itemSize===4,VL=!!ax.normalMap&&!!iS.attributes.tangent,HL=!!iS.morphAttributes.position,BL=!!iS.morphAttributes.normal,s$=!!iS.morphAttributes.color,n$=ax.toneMapped?gt.toneMapping:Hs,u$=iS.morphAttributes.position||iS.morphAttributes.normal||iS.morphAttributes.color,t$=u$!==void 0?u$.length:0,UL=qx.get(ax),l$=rt.state.lights;if(Ft===!0&&(Gr===!0||Su!==kt)){let mu=Su===kt&&ax.id===Tt;au.setState(ax,Su,mu)}let FL=!1;ax.version===UL.__version?(UL.needsLights&&UL.lightsStateVersion!==l$.state.version||UL.outputEncoding!==LL||rS.isInstancedMesh&&UL.instancing===!1||!rS.isInstancedMesh&&UL.instancing===!0||rS.isSkinnedMesh&&UL.skinning===!1||!rS.isSkinnedMesh&&UL.skinning===!0||UL.envMap!==IL||ax.fog===!0&&UL.fog!==bL||UL.numClippingPlanes!==void 0&&(UL.numClippingPlanes!==au.numPlanes||UL.numIntersection!==au.numIntersection)||UL.vertexAlphas!==WL||UL.vertexTangents!==VL||UL.morphTargets!==HL||UL.morphNormals!==BL||UL.morphColors!==s$||UL.toneMapping!==n$||B0.isWebGL2===!0&&UL.morphTargetsCount!==t$)&&(FL=!0):(FL=!0,UL.__version=ax.version);let d$=UL.currentProgram;FL===!0&&(d$=a$(ax,ux,rS));let m$=!1,f$=!1,c$=!1,Qn=d$.getUniforms(),So=UL.uniforms;if(q1.useProgram(d$.program)&&(m$=!0,f$=!0,c$=!0),ax.id!==Tt&&(Tt=ax.id,f$=!0),m$||kt!==Su){if(Qn.setValue(wu,"projectionMatrix",Su.projectionMatrix),B0.logarithmicDepthBuffer&&Qn.setValue(wu,"logDepthBufFC",2/(Math.log(Su.far+1)/Math.LN2)),kt!==Su&&(kt=Su,f$=!0,c$=!0),ax.isShaderMaterial||ax.isMeshPhongMaterial||ax.isMeshToonMaterial||ax.isMeshStandardMaterial||ax.envMap){let mu=Qn.map.cameraPosition;mu!==void 0&&mu.setValue(wu,xu.setFromMatrixPosition(Su.matrixWorld))}(ax.isMeshPhongMaterial||ax.isMeshToonMaterial||ax.isMeshLambertMaterial||ax.isMeshBasicMaterial||ax.isMeshStandardMaterial||ax.isShaderMaterial)&&Qn.setValue(wu,"isOrthographic",Su.isOrthographicCamera===!0),(ax.isMeshPhongMaterial||ax.isMeshToonMaterial||ax.isMeshLambertMaterial||ax.isMeshBasicMaterial||ax.isMeshStandardMaterial||ax.isShaderMaterial||ax.isShadowMaterial||rS.isSkinnedMesh)&&Qn.setValue(wu,"viewMatrix",Su.matrixWorldInverse)}if(rS.isSkinnedMesh){Qn.setOptional(wu,rS,"bindMatrix"),Qn.setOptional(wu,rS,"bindMatrixInverse");let mu=rS.skeleton;mu&&(B0.floatVertexTextures?(mu.boneTexture===null&&mu.computeBoneTexture(),Qn.setValue(wu,"boneTexture",mu.boneTexture,N_),Qn.setValue(wu,"boneTextureSize",mu.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}let Vv=iS.morphAttributes;if((Vv.position!==void 0||Vv.normal!==void 0||Vv.color!==void 0&&B0.isWebGL2===!0)&&bo.update(rS,iS,ax,d$),(f$||UL.receiveShadow!==rS.receiveShadow)&&(UL.receiveShadow=rS.receiveShadow,Qn.setValue(wu,"receiveShadow",rS.receiveShadow)),ax.isMeshGouraudMaterial&&ax.envMap!==null&&(So.envMap.value=IL,So.flipEnvMap.value=IL.isCubeTexture&&IL.isRenderTargetTexture===!1?-1:1),f$&&(Qn.setValue(wu,"toneMappingExposure",gt.toneMappingExposure),UL.needsLights&&_$(So,c$),bL&&ax.fog===!0&&mO.refreshFogUniforms(So,bL),mO.refreshMaterialUniforms(So,ax,dr,Ht,gn),Gu.upload(wu,UL.uniformsList,So,N_)),ax.isShaderMaterial&&ax.uniformsNeedUpdate===!0&&(Gu.upload(wu,UL.uniformsList,So,N_),ax.uniformsNeedUpdate=!1),ax.isSpriteMaterial&&Qn.setValue(wu,"center",rS.center),Qn.setValue(wu,"modelViewMatrix",rS.modelViewMatrix),Qn.setValue(wu,"normalMatrix",rS.normalMatrix),Qn.setValue(wu,"modelMatrix",rS.matrixWorld),rS.previousModelViewMatrix&&Qn.setValue(wu,"previousModelViewMatrix",rS.previousModelViewMatrix),Su.previousProjectionMatrix&&Qn.setValue(wu,"previousProjectionMatrix",Su.previousProjectionMatrix),ax.isShaderMaterial||ax.isRawShaderMaterial){let mu=ax.uniformsGroups;for(let a1=0,AA=mu.length;a1<AA;a1++)if(B0.isWebGL2){let p$=mu[a1];MO.update(p$,d$),MO.bind(p$,d$)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return d$}function _$(Su,ux){Su.ambientLightColor.needsUpdate=ux,Su.lightProbe.needsUpdate=ux,Su.directionalLights.needsUpdate=ux,Su.directionalLightShadows.needsUpdate=ux,Su.pointLights.needsUpdate=ux,Su.pointLightShadows.needsUpdate=ux,Su.spotLights.needsUpdate=ux,Su.spotLightShadows.needsUpdate=ux,Su.rectAreaLights.needsUpdate=ux,Su.hemisphereLights.needsUpdate=ux}function v$(Su){return Su.isMeshLambertMaterial||Su.isMeshToonMaterial||Su.isMeshPhongMaterial||Su.isMeshStandardMaterial||Su.isShadowMaterial||Su.isShaderMaterial&&Su.lights===!0}this.getActiveCubeFace=function(){return yt},this.getActiveMipmapLevel=function(){return At},this.getRenderTarget=function(){return Ct},this.setRenderTargetTextures=function(Su,ux,iS){qx.get(Su.texture).__webglTexture=ux,qx.get(Su.depthTexture).__webglTexture=iS;let ax=qx.get(Su);ax.__hasExternalTextures=!0,ax.__hasExternalTextures&&(ax.__autoAllocateDepthBuffer=iS===void 0,ax.__autoAllocateDepthBuffer||P0.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ax.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Su,ux){let iS=qx.get(Su);iS.__webglFramebuffer=ux,iS.__useDefaultFramebuffer=ux===void 0},this.setRenderTarget=function(Su,ux=0,iS=0){Ct=Su,yt=ux,At=iS;let ax=!0,rS=null,bL=!1,OL=!1;if(Su){let LL=qx.get(Su);LL.__useDefaultFramebuffer!==void 0?(q1.bindFramebuffer(36160,null),ax=!1):LL.__webglFramebuffer===void 0?N_.setupRenderTarget(Su):LL.__hasExternalTextures&&N_.rebindTextures(Su,qx.get(Su.texture).__webglTexture,qx.get(Su.depthTexture).__webglTexture);let IL=Su.texture;(IL.isData3DTexture||IL.isDataArrayTexture||IL.isCompressedArrayTexture)&&(OL=!0);let WL=qx.get(Su).__webglFramebuffer;Su.isWebGLCubeRenderTarget?(rS=WL[ux],bL=!0):B0.isWebGL2&&Su.samples>0&&N_.useMultisampledRTT(Su)===!1?rS=qx.get(Su).__webglMultisampledFramebuffer:rS=WL,Pt.copy(Su.viewport),It.copy(Su.scissor),Lt=Su.scissorTest}else Pt.copy(ds).multiplyScalar(dr).floor(),It.copy(Nn).multiplyScalar(dr).floor(),Lt=us;if(q1.bindFramebuffer(36160,rS)&&B0.drawBuffers&&ax&&q1.drawBuffers(Su,rS),q1.viewport(Pt),q1.scissor(It),q1.setScissorTest(Lt),bL){let LL=qx.get(Su.texture);wu.framebufferTexture2D(36160,36064,34069+ux,LL.__webglTexture,iS)}else if(OL){let LL=qx.get(Su.texture),IL=ux||0;wu.framebufferTextureLayer(36160,36064,LL.__webglTexture,iS||0,IL)}Tt=-1},this.readRenderTargetPixels=function(Su,ux,iS,ax,rS,bL,OL){if(!(Su&&Su.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let LL=qx.get(Su).__webglFramebuffer;if(Su.isWebGLCubeRenderTarget&&OL!==void 0&&(LL=LL[OL]),LL){q1.bindFramebuffer(36160,LL);try{let IL=Su.texture,WL=IL.format,VL=IL.type;if(WL!==Qr&&X3.convert(WL)!==wu.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}let HL=VL===va&&(P0.has("EXT_color_buffer_half_float")||B0.isWebGL2&&P0.has("EXT_color_buffer_float"));if(VL!==Ir$1&&X3.convert(VL)!==wu.getParameter(35738)&&!(VL===Sr$1&&(B0.isWebGL2||P0.has("OES_texture_float")||P0.has("WEBGL_color_buffer_float")))&&!HL){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ux>=0&&ux<=Su.width-ax&&iS>=0&&iS<=Su.height-rS&&wu.readPixels(ux,iS,ax,rS,X3.convert(WL),X3.convert(VL),bL)}finally{let IL=Ct!==null?qx.get(Ct).__webglFramebuffer:null;q1.bindFramebuffer(36160,IL)}}},this.copyFramebufferToTexture=function(Su,ux,iS=0){let ax=Math.pow(2,-iS),rS=Math.floor(ux.image.width*ax),bL=Math.floor(ux.image.height*ax);N_.setTexture2D(ux,0),wu.copyTexSubImage2D(3553,iS,0,0,Su.x,Su.y,rS,bL),q1.unbindTexture()},this.copyTextureToTexture=function(Su,ux,iS,ax=0){let rS=ux.image.width,bL=ux.image.height,OL=X3.convert(iS.format),LL=X3.convert(iS.type);N_.setTexture2D(iS,0),wu.pixelStorei(37440,iS.flipY),wu.pixelStorei(37441,iS.premultiplyAlpha),wu.pixelStorei(3317,iS.unpackAlignment),ux.isDataTexture?wu.texSubImage2D(3553,ax,Su.x,Su.y,rS,bL,OL,LL,ux.image.data):ux.isCompressedTexture?wu.compressedTexSubImage2D(3553,ax,Su.x,Su.y,ux.mipmaps[0].width,ux.mipmaps[0].height,OL,ux.mipmaps[0].data):wu.texSubImage2D(3553,ax,Su.x,Su.y,OL,LL,ux.image),ax===0&&iS.generateMipmaps&&wu.generateMipmap(3553),q1.unbindTexture()},this.copyTextureToTexture3D=function(Su,ux,iS,ax,rS=0){if(gt.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}let bL=Su.max.x-Su.min.x+1,OL=Su.max.y-Su.min.y+1,LL=Su.max.z-Su.min.z+1,IL=X3.convert(ax.format),WL=X3.convert(ax.type),VL;if(ax.isData3DTexture)N_.setTexture3D(ax,0),VL=32879;else if(ax.isDataArrayTexture)N_.setTexture2DArray(ax,0),VL=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}wu.pixelStorei(37440,ax.flipY),wu.pixelStorei(37441,ax.premultiplyAlpha),wu.pixelStorei(3317,ax.unpackAlignment);let HL=wu.getParameter(3314),BL=wu.getParameter(32878),s$=wu.getParameter(3316),n$=wu.getParameter(3315),u$=wu.getParameter(32877),t$=iS.isCompressedTexture?iS.mipmaps[0]:iS.image;wu.pixelStorei(3314,t$.width),wu.pixelStorei(32878,t$.height),wu.pixelStorei(3316,Su.min.x),wu.pixelStorei(3315,Su.min.y),wu.pixelStorei(32877,Su.min.z),iS.isDataTexture||iS.isData3DTexture?wu.texSubImage3D(VL,rS,ux.x,ux.y,ux.z,bL,OL,LL,IL,WL,t$.data):iS.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),wu.compressedTexSubImage3D(VL,rS,ux.x,ux.y,ux.z,bL,OL,LL,IL,t$.data)):wu.texSubImage3D(VL,rS,ux.x,ux.y,ux.z,bL,OL,LL,IL,WL,t$),wu.pixelStorei(3314,HL),wu.pixelStorei(32878,BL),wu.pixelStorei(3316,s$),wu.pixelStorei(3315,n$),wu.pixelStorei(32877,u$),rS===0&&ax.generateMipmaps&&wu.generateMipmap(VL),q1.unbindTexture()},this.initTexture=function(Su){Su.isCubeTexture?N_.setTextureCube(Su,0):Su.isData3DTexture?N_.setTexture3D(Su,0):Su.isDataArrayTexture||Su.isCompressedArrayTexture?N_.setTexture2DArray(Su,0):N_.setTexture2D(Su,0),q1.unbindTexture()},this.resetState=function(){yt=0,At=0,Ct=null,q1.reset(),U_.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}var sw=class extends Dw{};sw.prototype.isWebGL1Renderer=!0;var qu=class{constructor(e,i=1,s=1e3){this.isFog=!0,this.name="",this.color=new We(e),this.near=i,this.far=s}clone(){return new qu(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}},Pi=class extends _t{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,i){return super.copy(e,i),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let i=super.toJSON(e);return this.fog!==null&&(i.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(i.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(i.object.backgroundIntensity=this.backgroundIntensity),i}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}},_y=class{constructor(e,i){this.isInterleavedBuffer=!0,this.array=e,this.stride=i,this.count=e!==void 0?e.length/i:0,this.usage=WS,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=ms()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,i,s){e*=this.stride,s*=i.stride;for(let a=0,o=this.stride;a<o;a++)this.array[e+a]=i.array[s+a];return this}set(e,i=0){return this.array.set(e,i),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ms()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let i=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),s=new this.constructor(i,this.stride);return s.setUsage(this.usage),s}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ms()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},xn=new _,wc=class{constructor(e,i,s,a=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=i,this.offset=s,this.normalized=a}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let i=0,s=this.data.count;i<s;i++)xn.fromBufferAttribute(this,i),xn.applyMatrix4(e),this.setXYZ(i,xn.x,xn.y,xn.z);return this}applyNormalMatrix(e){for(let i=0,s=this.count;i<s;i++)xn.fromBufferAttribute(this,i),xn.applyNormalMatrix(e),this.setXYZ(i,xn.x,xn.y,xn.z);return this}transformDirection(e){for(let i=0,s=this.count;i<s;i++)xn.fromBufferAttribute(this,i),xn.transformDirection(e),this.setXYZ(i,xn.x,xn.y,xn.z);return this}setX(e,i){return this.normalized&&(i=br(i,this.array)),this.data.array[e*this.data.stride+this.offset]=i,this}setY(e,i){return this.normalized&&(i=br(i,this.array)),this.data.array[e*this.data.stride+this.offset+1]=i,this}setZ(e,i){return this.normalized&&(i=br(i,this.array)),this.data.array[e*this.data.stride+this.offset+2]=i,this}setW(e,i){return this.normalized&&(i=br(i,this.array)),this.data.array[e*this.data.stride+this.offset+3]=i,this}getX(e){let i=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(i=ya(i,this.array)),i}getY(e){let i=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(i=ya(i,this.array)),i}getZ(e){let i=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(i=ya(i,this.array)),i}getW(e){let i=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(i=ya(i,this.array)),i}setXY(e,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(i=br(i,this.array),s=br(s,this.array)),this.data.array[e+0]=i,this.data.array[e+1]=s,this}setXYZ(e,i,s,a){return e=e*this.data.stride+this.offset,this.normalized&&(i=br(i,this.array),s=br(s,this.array),a=br(a,this.array)),this.data.array[e+0]=i,this.data.array[e+1]=s,this.data.array[e+2]=a,this}setXYZW(e,i,s,a,o){return e=e*this.data.stride+this.offset,this.normalized&&(i=br(i,this.array),s=br(s,this.array),a=br(a,this.array),o=br(o,this.array)),this.data.array[e+0]=i,this.data.array[e+1]=s,this.data.array[e+2]=a,this.data.array[e+3]=o,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let i=[];for(let s=0;s<this.count;s++){let a=s*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)i.push(this.data.array[a+o])}return new Xe(new this.array.constructor(i),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new wc(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let i=[];for(let s=0;s<this.count;s++){let a=s*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)i.push(this.data.array[a+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:i,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}},Cp=class extends _t{constructor(){super(),this.isBone=!0,this.type="Bone"}},xi=class extends tr{constructor(e=null,i=1,s=1,a,o,c,d,g,b=Vt,j=Vt,_e,$){super(null,c,d,g,b,j,a,o,_e,$),this.isDataTexture=!0,this.image={data:e,width:i,height:s},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},yM=new ce$1,KG=new ce$1,ul=class{constructor(e=[],i=[]){this.uuid=ms(),this.bones=e.slice(0),this.boneInverses=i,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){let e=this.bones,i=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),i.length===0)this.calculateInverses();else if(e.length!==i.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let s=0,a=this.bones.length;s<a;s++)this.boneInverses.push(new ce$1)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,i=this.bones.length;e<i;e++){let s=new ce$1;this.bones[e]&&s.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(s)}}pose(){for(let e=0,i=this.bones.length;e<i;e++){let s=this.bones[e];s&&s.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,i=this.bones.length;e<i;e++){let s=this.bones[e];s&&(s.parent&&s.parent.isBone?(s.matrix.copy(s.parent.matrixWorld).invert(),s.matrix.multiply(s.matrixWorld)):s.matrix.copy(s.matrixWorld),s.matrix.decompose(s.position,s.quaternion,s.scale))}}update(){let e=this.bones,i=this.boneInverses,s=this.boneMatrices,a=this.boneTexture;for(let o=0,c=e.length;o<c;o++){let d=e[o]?e[o].matrixWorld:KG;yM.multiplyMatrices(d,i[o]),yM.toArray(s,o*16)}a!==null&&(a.needsUpdate=!0)}clone(){return new ul(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=qM(e),e=Math.max(e,4);let i=new Float32Array(e*e*4);i.set(this.boneMatrices);let s=new xi(i,e,e,Qr,Sr$1);return s.needsUpdate=!0,this.boneMatrices=i,this.boneTexture=s,this.boneTextureSize=e,this}getBoneByName(e){for(let i=0,s=this.bones.length;i<s;i++){let a=this.bones[i];if(a.name===e)return a}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,i){this.uuid=e.uuid;for(let s=0,a=e.bones.length;s<a;s++){let o=e.bones[s],c=i[o];c===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),c=new Cp),this.bones.push(c),this.boneInverses.push(new ce$1().fromArray(e.boneInverses[s]))}return this.init(),this}toJSON(){let e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;let i=this.bones,s=this.boneInverses;for(let a=0,o=i.length;a<o;a++){let c=i[a];e.bones.push(c.uuid);let d=s[a];e.boneInverses.push(d.toArray())}return e}},Eo=class extends Xe{constructor(e,i,s,a=1){super(e,i,s),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=a}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){let e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}},vM=new ce$1,xM=new ce$1,iy=[],ZG=new ce$1,fp=new sr,Ey=class extends sr{constructor(e,i,s){super(e,i),this.isInstancedMesh=!0,this.instanceMatrix=new Eo(new Float32Array(s*16),16),this.instanceColor=null,this.count=s,this.frustumCulled=!1;for(let a=0;a<s;a++)this.setMatrixAt(a,ZG)}copy(e,i){return super.copy(e,i),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,i){i.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,i){i.fromArray(this.instanceMatrix.array,e*16)}raycast(e,i){let s=this.matrixWorld,a=this.count;if(fp.geometry=this.geometry,fp.material=this.material,fp.material!==void 0)for(let o=0;o<a;o++){this.getMatrixAt(o,vM),xM.multiplyMatrices(s,vM),fp.matrixWorld=xM,fp.raycast(e,iy);for(let c=0,d=iy.length;c<d;c++){let g=iy[c];g.instanceId=o,g.object=this,i.push(g)}iy.length=0}}setColorAt(e,i){this.instanceColor===null&&(this.instanceColor=new Eo(new Float32Array(this.instanceMatrix.count*3),3)),i.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,i){i.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}},ys=class extends Sc{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new We(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}},bM=new _,SM=new _,wM=new ce$1,BS=new qs,ny=new Br,Ac=class extends _t{constructor(e=new Pe,i=new ys){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=i,this.updateMorphTargets()}copy(e,i){return super.copy(e,i),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(e.index===null){let i=e.attributes.position,s=[0];for(let a=1,o=i.count;a<o;a++)bM.fromBufferAttribute(i,a-1),SM.fromBufferAttribute(i,a),s[a]=s[a-1],s[a]+=bM.distanceTo(SM);e.setAttribute("lineDistance",new Te(s,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,i){let s=this.geometry,a=this.matrixWorld,o=e.params.Line.threshold,c=s.drawRange;if(s.boundingSphere===null&&s.computeBoundingSphere(),ny.copy(s.boundingSphere),ny.applyMatrix4(a),ny.radius+=o,e.ray.intersectsSphere(ny)===!1)return;wM.copy(a).invert(),BS.copy(e.ray).applyMatrix4(wM);let d=o/((this.scale.x+this.scale.y+this.scale.z)/3),g=d*d,b=new _,j=new _,_e=new _,$=new _,rt=this.isLineSegments?2:1,st=s.index,ut=s.attributes.position;if(st!==null){let gt=Math.max(0,c.start),wt=Math.min(st.count,c.start+c.count);for(let yt=gt,At=wt-1;yt<At;yt+=rt){let Ct=st.getX(yt),Tt=st.getX(yt+1);if(b.fromBufferAttribute(ut,Ct),j.fromBufferAttribute(ut,Tt),BS.distanceSqToSegment(b,j,$,_e)>g)continue;$.applyMatrix4(this.matrixWorld);let kt=e.ray.origin.distanceTo($);kt<e.near||kt>e.far||i.push({distance:kt,point:_e.clone().applyMatrix4(this.matrixWorld),index:yt,face:null,faceIndex:null,object:this})}}else{let gt=Math.max(0,c.start),wt=Math.min(ut.count,c.start+c.count);for(let yt=gt,At=wt-1;yt<At;yt+=rt){if(b.fromBufferAttribute(ut,yt),j.fromBufferAttribute(ut,yt+1),BS.distanceSqToSegment(b,j,$,_e)>g)continue;$.applyMatrix4(this.matrixWorld);let Ct=e.ray.origin.distanceTo($);Ct<e.near||Ct>e.far||i.push({distance:Ct,point:_e.clone().applyMatrix4(this.matrixWorld),index:yt,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){let e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){let s=e[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,o=s.length;a<o;a++){let c=s[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=a}}}}},AM=new _,_M=new _,hl=class extends Ac{constructor(e,i){super(e,i),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(e.index===null){let i=e.attributes.position,s=[];for(let a=0,o=i.count;a<o;a+=2)AM.fromBufferAttribute(i,a),_M.fromBufferAttribute(i,a+1),s[a]=a===0?0:s[a-1],s[a+1]=s[a]+AM.distanceTo(_M);e.setAttribute("lineDistance",new Te(s,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},Ty=class extends tr{constructor(e,i,s,a,o,c,d,g,b){super(e,i,s,a,o,c,d,g,b),this.isVideoTexture=!0,this.minFilter=c!==void 0?c:tt,this.magFilter=o!==void 0?o:tt,this.generateMipmaps=!1;let j=this;function _e(){j.needsUpdate=!0,e.requestVideoFrameCallback(_e)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(_e)}clone(){return new this.constructor(this.image).copy(this)}update(){let e=this.image;!("requestVideoFrameCallback"in e)&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}},My=class extends tr{constructor(e,i,s,a,o,c,d,g,b){super(e,i,s,a,o,c,d,g,b),this.isCanvasTexture=!0,this.needsUpdate=!0}},vs=class{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,i){let s=this.getUtoTmapping(e);return this.getPoint(s,i)}getPoints(e=5){let i=[];for(let s=0;s<=e;s++)i.push(this.getPoint(s/e));return i}getSpacedPoints(e=5){let i=[];for(let s=0;s<=e;s++)i.push(this.getPointAt(s/e));return i}getLength(){let e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let i=[],s,a=this.getPoint(0),o=0;i.push(0);for(let c=1;c<=e;c++)s=this.getPoint(c/e),o+=s.distanceTo(a),i.push(o),a=s;return this.cacheArcLengths=i,i}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,i){let s=this.getLengths(),a=0,o=s.length,c;i?c=i:c=e*s[o-1];let d=0,g=o-1,b;for(;d<=g;)if(a=Math.floor(d+(g-d)/2),b=s[a]-c,b<0)d=a+1;else if(b>0)g=a-1;else{g=a;break}if(a=g,s[a]===c)return a/(o-1);let j=s[a],_e=s[a+1]-j,$=(c-j)/_e;return(a+$)/(o-1)}getTangent(e,i){let s=e-1e-4,a=e+1e-4;s<0&&(s=0),a>1&&(a=1);let o=this.getPoint(s),c=this.getPoint(a),d=i||(o.isVector2?new z$1:new _);return d.copy(c).sub(o).normalize(),d}getTangentAt(e,i){let s=this.getUtoTmapping(e);return this.getTangent(s,i)}computeFrenetFrames(e,i){let s=new _,a=[],o=[],c=[],d=new _,g=new ce$1;for(let rt=0;rt<=e;rt++){let st=rt/e;a[rt]=this.getTangentAt(st,new _)}o[0]=new _,c[0]=new _;let b=Number.MAX_VALUE,j=Math.abs(a[0].x),_e=Math.abs(a[0].y),$=Math.abs(a[0].z);j<=b&&(b=j,s.set(1,0,0)),_e<=b&&(b=_e,s.set(0,1,0)),$<=b&&s.set(0,0,1),d.crossVectors(a[0],s).normalize(),o[0].crossVectors(a[0],d),c[0].crossVectors(a[0],o[0]);for(let rt=1;rt<=e;rt++){if(o[rt]=o[rt-1].clone(),c[rt]=c[rt-1].clone(),d.crossVectors(a[rt-1],a[rt]),d.length()>Number.EPSILON){d.normalize();let st=Math.acos(gi(a[rt-1].dot(a[rt]),-1,1));o[rt].applyMatrix4(g.makeRotationAxis(d,st))}c[rt].crossVectors(a[rt],o[rt])}if(i===!0){let rt=Math.acos(gi(o[0].dot(o[e]),-1,1));rt/=e,a[0].dot(d.crossVectors(o[0],o[e]))>0&&(rt=-rt);for(let st=1;st<=e;st++)o[st].applyMatrix4(g.makeRotationAxis(a[st],rt*st)),c[st].crossVectors(a[st],o[st])}return{tangents:a,normals:o,binormals:c}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){let e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},_c=class extends vs{constructor(e=0,i=0,s=1,a=1,o=0,c=Math.PI*2,d=!1,g=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=i,this.xRadius=s,this.yRadius=a,this.aStartAngle=o,this.aEndAngle=c,this.aClockwise=d,this.aRotation=g}getPoint(e,i){let s=i||new z$1,a=Math.PI*2,o=this.aEndAngle-this.aStartAngle,c=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=a;for(;o>a;)o-=a;o<Number.EPSILON&&(c?o=0:o=a),this.aClockwise===!0&&!c&&(o===a?o=-a:o=o-a);let d=this.aStartAngle+e*o,g=this.aX+this.xRadius*Math.cos(d),b=this.aY+this.yRadius*Math.sin(d);if(this.aRotation!==0){let j=Math.cos(this.aRotation),_e=Math.sin(this.aRotation),$=g-this.aX,rt=b-this.aY;g=$*j-rt*_e+this.aX,b=$*_e+rt*j+this.aY}return s.set(g,b)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){let e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},ow=class extends _c{constructor(e,i,s,a,o,c){super(e,i,s,s,a,o,c),this.isArcCurve=!0,this.type="ArcCurve"}};function Ow(){let e=0,i=0,s=0,a=0;function o(c,d,g,b){e=c,i=g,s=-3*c+3*d-2*g-b,a=2*c-2*d+g+b}return{initCatmullRom:function(c,d,g,b,j){o(d,g,j*(g-c),j*(b-d))},initNonuniformCatmullRom:function(c,d,g,b,j,_e,$){let rt=(d-c)/j-(g-c)/(j+_e)+(g-d)/_e,st=(g-d)/_e-(b-d)/(_e+$)+(b-g)/$;rt*=_e,st*=_e,o(d,g,rt,st)},calc:function(c){let d=c*c,g=d*c;return e+i*c+s*d+a*g}}}var sy=new _,NS=new Ow,FS=new Ow,kS=new Ow,aw=class extends vs{constructor(e=[],i=!1,s="centripetal",a=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=i,this.curveType=s,this.tension=a}getPoint(e,i=new _){let s=i,a=this.points,o=a.length,c=(o-(this.closed?0:1))*e,d=Math.floor(c),g=c-d;this.closed?d+=d>0?0:(Math.floor(Math.abs(d)/o)+1)*o:g===0&&d===o-1&&(d=o-2,g=1);let b,j;this.closed||d>0?b=a[(d-1)%o]:(sy.subVectors(a[0],a[1]).add(a[0]),b=sy);let _e=a[d%o],$=a[(d+1)%o];if(this.closed||d+2<o?j=a[(d+2)%o]:(sy.subVectors(a[o-1],a[o-2]).add(a[o-1]),j=sy),this.curveType==="centripetal"||this.curveType==="chordal"){let rt=this.curveType==="chordal"?.5:.25,st=Math.pow(b.distanceToSquared(_e),rt),ut=Math.pow(_e.distanceToSquared($),rt),gt=Math.pow($.distanceToSquared(j),rt);ut<1e-4&&(ut=1),st<1e-4&&(st=ut),gt<1e-4&&(gt=ut),NS.initNonuniformCatmullRom(b.x,_e.x,$.x,j.x,st,ut,gt),FS.initNonuniformCatmullRom(b.y,_e.y,$.y,j.y,st,ut,gt),kS.initNonuniformCatmullRom(b.z,_e.z,$.z,j.z,st,ut,gt)}else this.curveType==="catmullrom"&&(NS.initCatmullRom(b.x,_e.x,$.x,j.x,this.tension),FS.initCatmullRom(b.y,_e.y,$.y,j.y,this.tension),kS.initCatmullRom(b.z,_e.z,$.z,j.z,this.tension));return s.set(NS.calc(g),FS.calc(g),kS.calc(g)),s}copy(e){super.copy(e),this.points=[];for(let i=0,s=e.points.length;i<s;i++){let a=e.points[i];this.points.push(a.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){let e=super.toJSON();e.points=[];for(let i=0,s=this.points.length;i<s;i++){let a=this.points[i];e.points.push(a.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let i=0,s=e.points.length;i<s;i++){let a=e.points[i];this.points.push(new _().fromArray(a))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}};function EM(e,i,s,a,o){let c=(a-i)*.5,d=(o-s)*.5,g=e*e,b=e*g;return(2*s-2*a+c+d)*b+(-3*s+3*a-2*c-d)*g+c*e+s}function JG(e,i){let s=1-e;return s*s*i}function $G(e,i){return 2*(1-e)*e*i}function e4(e,i){return e*e*i}function bp(e,i,s,a){return JG(e,i)+$G(e,s)+e4(e,a)}function t4(e,i){let s=1-e;return s*s*s*i}function r4(e,i){let s=1-e;return 3*s*s*e*i}function i4(e,i){return 3*(1-e)*e*e*i}function n4(e,i){return e*e*e*i}function Sp(e,i,s,a,o){return t4(e,i)+r4(e,s)+i4(e,a)+n4(e,o)}var fn=class extends vs{constructor(e=new z$1,i=new z$1,s=new z$1,a=new z$1){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=i,this.v2=s,this.v3=a}getPoint(e,i=new z$1){let s=i,a=this.v0,o=this.v1,c=this.v2,d=this.v3;return s.set(Sp(e,a.x,o.x,c.x,d.x),Sp(e,a.y,o.y,c.y,d.y)),s}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},Ec=class extends vs{constructor(e=new _,i=new _,s=new _,a=new _){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=i,this.v2=s,this.v3=a}getPoint(e,i=new _){let s=i,a=this.v0,o=this.v1,c=this.v2,d=this.v3;return s.set(Sp(e,a.x,o.x,c.x,d.x),Sp(e,a.y,o.y,c.y,d.y),Sp(e,a.z,o.z,c.z,d.z)),s}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},pn=class extends vs{constructor(e=new z$1,i=new z$1){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=i}getPoint(e,i=new z$1){let s=i;return e===1?s.copy(this.v2):(s.copy(this.v2).sub(this.v1),s.multiplyScalar(e).add(this.v1)),s}getPointAt(e,i){return this.getPoint(e,i)}getTangent(e,i){let s=i||new z$1;return s.copy(this.v2).sub(this.v1).normalize(),s}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Pp=class extends vs{constructor(e=new _,i=new _){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=i}getPoint(e,i=new _){let s=i;return e===1?s.copy(this.v2):(s.copy(this.v2).sub(this.v1),s.multiplyScalar(e).add(this.v1)),s}getPointAt(e,i){return this.getPoint(e,i)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},is=class extends vs{constructor(e=new z$1,i=new z$1,s=new z$1){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=i,this.v2=s}getPoint(e,i=new z$1){let s=i,a=this.v0,o=this.v1,c=this.v2;return s.set(bp(e,a.x,o.x,c.x),bp(e,a.y,o.y,c.y)),s}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},lw=class extends vs{constructor(e=new _,i=new _,s=new _){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=i,this.v2=s}getPoint(e,i=new _){let s=i,a=this.v0,o=this.v1,c=this.v2;return s.set(bp(e,a.x,o.x,c.x),bp(e,a.y,o.y,c.y),bp(e,a.z,o.z,c.z)),s}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Yu=class extends vs{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,i=new z$1){let s=i,a=this.points,o=(a.length-1)*e,c=Math.floor(o),d=o-c,g=a[c===0?c:c-1],b=a[c],j=a[c>a.length-2?a.length-1:c+1],_e=a[c>a.length-3?a.length-1:c+2];return s.set(EM(d,g.x,b.x,j.x,_e.x),EM(d,g.y,b.y,j.y,_e.y)),s}copy(e){super.copy(e),this.points=[];for(let i=0,s=e.points.length;i<s;i++){let a=e.points[i];this.points.push(a.clone())}return this}toJSON(){let e=super.toJSON();e.points=[];for(let i=0,s=this.points.length;i<s;i++){let a=this.points[i];e.points.push(a.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let i=0,s=e.points.length;i<s;i++){let a=e.points[i];this.points.push(new z$1().fromArray(a))}return this}},s4=Object.freeze({__proto__:null,ArcCurve:ow,CatmullRomCurve3:aw,CubicBezierCurve:fn,CubicBezierCurve3:Ec,EllipseCurve:_c,LineCurve:pn,LineCurve3:Pp,QuadraticBezierCurve:is,QuadraticBezierCurve3:lw,SplineCurve:Yu}),Dp=class extends vs{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){let e=this.curves[0].getPoint(0),i=this.curves[this.curves.length-1].getPoint(1);e.equals(i)||this.curves.push(new pn(i,e))}getPoint(e,i){let s=e*this.getLength(),a=this.getCurveLengths(),o=0;for(;o<a.length;){if(a[o]>=s){let c=a[o]-s,d=this.curves[o],g=d.getLength(),b=g===0?0:1-c/g;return d.getPointAt(b,i)}o++}return null}getLength(){let e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let e=[],i=0;for(let s=0,a=this.curves.length;s<a;s++)i+=this.curves[s].getLength(),e.push(i);return this.cacheLengths=e,e}getSpacedPoints(e=40){let i=[];for(let s=0;s<=e;s++)i.push(this.getPoint(s/e));return this.autoClose&&i.push(i[0]),i}getPoints(e=12){let i=[],s;for(let a=0,o=this.curves;a<o.length;a++){let c=o[a],d=c.isEllipseCurve?e*2:c.isLineCurve||c.isLineCurve3?1:c.isSplineCurve?e*c.points.length:e,g=c.getPoints(d);for(let b=0;b<g.length;b++){let j=g[b];s&&s.equals(j)||(i.push(j),s=j)}}return this.autoClose&&i.length>1&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i}copy(e){super.copy(e),this.curves=[];for(let i=0,s=e.curves.length;i<s;i++){let a=e.curves[i];this.curves.push(a.clone())}return this.autoClose=e.autoClose,this}toJSON(){let e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let i=0,s=this.curves.length;i<s;i++){let a=this.curves[i];e.curves.push(a.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let i=0,s=e.curves.length;i<s;i++){let a=e.curves[i];this.curves.push(new s4[a.type]().fromJSON(a))}return this}},Tc=class extends Dp{constructor(e){super(),this.type="Path",this.currentPoint=new z$1,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let i=1,s=e.length;i<s;i++)this.lineTo(e[i].x,e[i].y);return this}moveTo(e,i){return this.currentPoint.set(e,i),this}lineTo(e,i){let s=new pn(this.currentPoint.clone(),new z$1(e,i));return this.curves.push(s),this.currentPoint.set(e,i),this}quadraticCurveTo(e,i,s,a){let o=new is(this.currentPoint.clone(),new z$1(e,i),new z$1(s,a));return this.curves.push(o),this.currentPoint.set(s,a),this}bezierCurveTo(e,i,s,a,o,c){let d=new fn(this.currentPoint.clone(),new z$1(e,i),new z$1(s,a),new z$1(o,c));return this.curves.push(d),this.currentPoint.set(o,c),this}splineThru(e){let i=[this.currentPoint.clone()].concat(e),s=new Yu(i);return this.curves.push(s),this.currentPoint.copy(e[e.length-1]),this}arc(e,i,s,a,o,c){let d=this.currentPoint.x,g=this.currentPoint.y;return this.absarc(e+d,i+g,s,a,o,c),this}absarc(e,i,s,a,o,c){return this.absellipse(e,i,s,s,a,o,c),this}ellipse(e,i,s,a,o,c,d,g){let b=this.currentPoint.x,j=this.currentPoint.y;return this.absellipse(e+b,i+j,s,a,o,c,d,g),this}absellipse(e,i,s,a,o,c,d,g){let b=new _c(e,i,s,a,o,c,d,g);if(this.curves.length>0){let _e=b.getPoint(0);_e.equals(this.currentPoint)||this.lineTo(_e.x,_e.y)}this.curves.push(b);let j=b.getPoint(1);return this.currentPoint.copy(j),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){let e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}},Xu=class extends Pe{constructor(e=[new z$1(0,-.5),new z$1(.5,0),new z$1(0,.5)],i=12,s=0,a=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:i,phiStart:s,phiLength:a},i=Math.floor(i),a=gi(a,0,Math.PI*2);let o=[],c=[],d=[],g=[],b=[],j=1/i,_e=new _,$=new z$1,rt=new _,st=new _,ut=new _,gt=0,wt=0;for(let yt=0;yt<=e.length-1;yt++)switch(yt){case 0:gt=e[yt+1].x-e[yt].x,wt=e[yt+1].y-e[yt].y,rt.x=wt*1,rt.y=-gt,rt.z=wt*0,ut.copy(rt),rt.normalize(),g.push(rt.x,rt.y,rt.z);break;case e.length-1:g.push(ut.x,ut.y,ut.z);break;default:gt=e[yt+1].x-e[yt].x,wt=e[yt+1].y-e[yt].y,rt.x=wt*1,rt.y=-gt,rt.z=wt*0,st.copy(rt),rt.x+=ut.x,rt.y+=ut.y,rt.z+=ut.z,rt.normalize(),g.push(rt.x,rt.y,rt.z),ut.copy(st)}for(let yt=0;yt<=i;yt++){let At=s+yt*j*a,Ct=Math.sin(At),Tt=Math.cos(At);for(let kt=0;kt<=e.length-1;kt++){_e.x=e[kt].x*Ct,_e.y=e[kt].y,_e.z=e[kt].x*Tt,c.push(_e.x,_e.y,_e.z),$.x=yt/i,$.y=kt/(e.length-1),d.push($.x,$.y);let Pt=g[3*kt+0]*Ct,It=g[3*kt+1],Lt=g[3*kt+0]*Tt;b.push(Pt,It,Lt)}}for(let yt=0;yt<i;yt++)for(let At=0;At<e.length-1;At++){let Ct=At+yt*e.length,Tt=Ct,kt=Ct+e.length,Pt=Ct+e.length+1,It=Ct+1;o.push(Tt,kt,It),o.push(Pt,It,kt)}this.setIndex(o),this.setAttribute("position",new Te(c,3)),this.setAttribute("uv",new Te(d,2)),this.setAttribute("normal",new Te(b,3))}static fromJSON(e){return new Xu(e.points,e.segments,e.phiStart,e.phiLength)}},Mc=class extends Pe{constructor(e=1,i=1,s=1,a=32,o=1,c=!1,d=0,g=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:i,height:s,radialSegments:a,heightSegments:o,openEnded:c,thetaStart:d,thetaLength:g};let b=this;a=Math.floor(a),o=Math.floor(o);let j=[],_e=[],$=[],rt=[],st=0,ut=[],gt=s/2,wt=0;yt(),c===!1&&(e>0&&At(!0),i>0&&At(!1)),this.setIndex(j),this.setAttribute("position",new Te(_e,3)),this.setAttribute("normal",new Te($,3)),this.setAttribute("uv",new Te(rt,2));function yt(){let Ct=new _,Tt=new _,kt=0,Pt=(i-e)/s;for(let It=0;It<=o;It++){let Lt=[],Nt=It/o,Ht=Nt*(i-e)+e;for(let dr=0;dr<=a;dr++){let hs=dr/a,_s=hs*g+d,ds=Math.sin(_s),Nn=Math.cos(_s);Tt.x=Ht*ds,Tt.y=-Nt*s+gt,Tt.z=Ht*Nn,_e.push(Tt.x,Tt.y,Tt.z),Ct.set(ds,Pt,Nn).normalize(),$.push(Ct.x,Ct.y,Ct.z),rt.push(hs,1-Nt),Lt.push(st++)}ut.push(Lt)}for(let It=0;It<a;It++)for(let Lt=0;Lt<o;Lt++){let Nt=ut[Lt][It],Ht=ut[Lt+1][It],dr=ut[Lt+1][It+1],hs=ut[Lt][It+1];j.push(Nt,Ht,hs),j.push(Ht,dr,hs),kt+=6}b.addGroup(wt,kt,0),wt+=kt}function At(Ct){let Tt=st,kt=new z$1,Pt=new _,It=0,Lt=Ct===!0?e:i,Nt=Ct===!0?1:-1;for(let dr=1;dr<=a;dr++)_e.push(0,gt*Nt,0),$.push(0,Nt,0),rt.push(.5,.5),st++;let Ht=st;for(let dr=0;dr<=a;dr++){let hs=dr/a*g+d,_s=Math.cos(hs),ds=Math.sin(hs);Pt.x=Lt*ds,Pt.y=gt*Nt,Pt.z=Lt*_s,_e.push(Pt.x,Pt.y,Pt.z),$.push(0,Nt,0),kt.x=_s*.5+.5,kt.y=ds*.5*Nt+.5,rt.push(kt.x,kt.y),st++}for(let dr=0;dr<a;dr++){let hs=Tt+dr,_s=Ht+dr;Ct===!0?j.push(_s,_s+1,hs):j.push(_s+1,_s,hs),It+=3}b.addGroup(wt,It,Ct===!0?1:2),wt+=It}}static fromJSON(e){return new Mc(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},dl=class extends Mc{constructor(e=1,i=1,s=32,a=1,o=!1,c=0,d=Math.PI*2){super(0,e,i,s,a,o,c,d),this.type="ConeGeometry",this.parameters={radius:e,height:i,radialSegments:s,heightSegments:a,openEnded:o,thetaStart:c,thetaLength:d}}static fromJSON(e){return new dl(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},Qu=class extends Pe{constructor(e=[],i=[],s=1,a=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:i,radius:s,detail:a};let o=[],c=[];d(a),b(s),j(),this.setAttribute("position",new Te(o,3)),this.setAttribute("normal",new Te(o.slice(),3)),this.setAttribute("uv",new Te(c,2)),a===0?this.computeVertexNormals():this.normalizeNormals();function d(yt){let At=new _,Ct=new _,Tt=new _;for(let kt=0;kt<i.length;kt+=3)rt(i[kt+0],At),rt(i[kt+1],Ct),rt(i[kt+2],Tt),g(At,Ct,Tt,yt)}function g(yt,At,Ct,Tt){let kt=Tt+1,Pt=[];for(let It=0;It<=kt;It++){Pt[It]=[];let Lt=yt.clone().lerp(Ct,It/kt),Nt=At.clone().lerp(Ct,It/kt),Ht=kt-It;for(let dr=0;dr<=Ht;dr++)dr===0&&It===kt?Pt[It][dr]=Lt:Pt[It][dr]=Lt.clone().lerp(Nt,dr/Ht)}for(let It=0;It<kt;It++)for(let Lt=0;Lt<2*(kt-It)-1;Lt++){let Nt=Math.floor(Lt/2);Lt%2===0?($(Pt[It][Nt+1]),$(Pt[It+1][Nt]),$(Pt[It][Nt])):($(Pt[It][Nt+1]),$(Pt[It+1][Nt+1]),$(Pt[It+1][Nt]))}}function b(yt){let At=new _;for(let Ct=0;Ct<o.length;Ct+=3)At.x=o[Ct+0],At.y=o[Ct+1],At.z=o[Ct+2],At.normalize().multiplyScalar(yt),o[Ct+0]=At.x,o[Ct+1]=At.y,o[Ct+2]=At.z}function j(){let yt=new _;for(let At=0;At<o.length;At+=3){yt.x=o[At+0],yt.y=o[At+1],yt.z=o[At+2];let Ct=gt(yt)/2/Math.PI+.5,Tt=wt(yt)/Math.PI+.5;c.push(Ct,1-Tt)}st(),_e()}function _e(){for(let yt=0;yt<c.length;yt+=6){let At=c[yt+0],Ct=c[yt+2],Tt=c[yt+4],kt=Math.max(At,Ct,Tt),Pt=Math.min(At,Ct,Tt);kt>.9&&Pt<.1&&(At<.2&&(c[yt+0]+=1),Ct<.2&&(c[yt+2]+=1),Tt<.2&&(c[yt+4]+=1))}}function $(yt){o.push(yt.x,yt.y,yt.z)}function rt(yt,At){let Ct=yt*3;At.x=e[Ct+0],At.y=e[Ct+1],At.z=e[Ct+2]}function st(){let yt=new _,At=new _,Ct=new _,Tt=new _,kt=new z$1,Pt=new z$1,It=new z$1;for(let Lt=0,Nt=0;Lt<o.length;Lt+=9,Nt+=6){yt.set(o[Lt+0],o[Lt+1],o[Lt+2]),At.set(o[Lt+3],o[Lt+4],o[Lt+5]),Ct.set(o[Lt+6],o[Lt+7],o[Lt+8]),kt.set(c[Nt+0],c[Nt+1]),Pt.set(c[Nt+2],c[Nt+3]),It.set(c[Nt+4],c[Nt+5]),Tt.copy(yt).add(At).add(Ct).divideScalar(3);let Ht=gt(Tt);ut(kt,Nt+0,yt,Ht),ut(Pt,Nt+2,At,Ht),ut(It,Nt+4,Ct,Ht)}}function ut(yt,At,Ct,Tt){Tt<0&&yt.x===1&&(c[At]=yt.x-1),Ct.x===0&&Ct.z===0&&(c[At]=Tt/2/Math.PI+.5)}function gt(yt){return Math.atan2(yt.z,-yt.x)}function wt(yt){return Math.atan2(-yt.y,Math.sqrt(yt.x*yt.x+yt.z*yt.z))}}static fromJSON(e){return new Qu(e.vertices,e.indices,e.radius,e.details)}},Ku=class extends Qu{constructor(e=1,i=0){let s=(1+Math.sqrt(5))/2,a=1/s,o=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-a,-s,0,-a,s,0,a,-s,0,a,s,-a,-s,0,-a,s,0,a,-s,0,a,s,0,-s,0,-a,s,0,-a,-s,0,a,s,0,a],c=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(o,c,e,i),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:i}}static fromJSON(e){return new Ku(e.radius,e.detail)}},xa=class extends Tc{constructor(e){super(e),this.uuid=ms(),this.type="Shape",this.holes=[]}getPointsHoles(e){let i=[];for(let s=0,a=this.holes.length;s<a;s++)i[s]=this.holes[s].getPoints(e);return i}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let i=0,s=e.holes.length;i<s;i++){let a=e.holes[i];this.holes.push(a.clone())}return this}toJSON(){let e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let i=0,s=this.holes.length;i<s;i++){let a=this.holes[i];e.holes.push(a.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let i=0,s=e.holes.length;i<s;i++){let a=e.holes[i];this.holes.push(new Tc().fromJSON(a))}return this}},o4={triangulate:function(e,i,s=2){let a=i&&i.length,o=a?i[0]*s:e.length,c=tC(e,0,o,s,!0),d=[];if(!c||c.next===c.prev)return d;let g,b,j,_e,$,rt,st;if(a&&(c=h4(e,i,c,s)),e.length>80*s){g=j=e[0],b=_e=e[1];for(let ut=s;ut<o;ut+=s)$=e[ut],rt=e[ut+1],$<g&&(g=$),rt<b&&(b=rt),$>j&&(j=$),rt>_e&&(_e=rt);st=Math.max(j-g,_e-b),st=st!==0?32767/st:0}return Op(c,d,s,g,b,st,0),d}};function tC(e,i,s,a,o){let c,d;if(o===w4(e,i,s,a)>0)for(c=i;c<s;c+=a)d=TM(c,e[c],e[c+1],d);else for(c=s-a;c>=i;c-=a)d=TM(c,e[c],e[c+1],d);return d&&Hy(d,d.next)&&(Rp(d),d=d.next),d}function Cc(e,i){if(!e)return e;i||(i=e);let s=e,a;do if(a=!1,!s.steiner&&(Hy(s,s.next)||jr$1(s.prev,s,s.next)===0)){if(Rp(s),s=i=s.prev,s===s.next)break;a=!0}else s=s.next;while(a||s!==i);return i}function Op(e,i,s,a,o,c,d){if(!e)return;!d&&c&&g4(e,a,o,c);let g=e,b,j;for(;e.prev!==e.next;){if(b=e.prev,j=e.next,c?l4(e,a,o,c):a4(e)){i.push(b.i/s|0),i.push(e.i/s|0),i.push(j.i/s|0),Rp(e),e=j.next,g=j.next;continue}if(e=j,e===g){d?d===1?(e=c4(Cc(e),i,s),Op(e,i,s,a,o,c,2)):d===2&&u4(e,i,s,a,o,c):Op(Cc(e),i,s,a,o,c,1);break}}}function a4(e){let i=e.prev,s=e,a=e.next;if(jr$1(i,s,a)>=0)return!1;let o=i.x,c=s.x,d=a.x,g=i.y,b=s.y,j=a.y,_e=o<c?o<d?o:d:c<d?c:d,$=g<b?g<j?g:j:b<j?b:j,rt=o>c?o>d?o:d:c>d?c:d,st=g>b?g>j?g:j:b>j?b:j,ut=a.next;for(;ut!==i;){if(ut.x>=_e&&ut.x<=rt&&ut.y>=$&&ut.y<=st&&Uu(o,g,c,b,d,j,ut.x,ut.y)&&jr$1(ut.prev,ut,ut.next)>=0)return!1;ut=ut.next}return!0}function l4(e,i,s,a){let o=e.prev,c=e,d=e.next;if(jr$1(o,c,d)>=0)return!1;let g=o.x,b=c.x,j=d.x,_e=o.y,$=c.y,rt=d.y,st=g<b?g<j?g:j:b<j?b:j,ut=_e<$?_e<rt?_e:rt:$<rt?$:rt,gt=g>b?g>j?g:j:b>j?b:j,wt=_e>$?_e>rt?_e:rt:$>rt?$:rt,yt=cw(st,ut,i,s,a),At=cw(gt,wt,i,s,a),Ct=e.prevZ,Tt=e.nextZ;for(;Ct&&Ct.z>=yt&&Tt&&Tt.z<=At;){if(Ct.x>=st&&Ct.x<=gt&&Ct.y>=ut&&Ct.y<=wt&&Ct!==o&&Ct!==d&&Uu(g,_e,b,$,j,rt,Ct.x,Ct.y)&&jr$1(Ct.prev,Ct,Ct.next)>=0||(Ct=Ct.prevZ,Tt.x>=st&&Tt.x<=gt&&Tt.y>=ut&&Tt.y<=wt&&Tt!==o&&Tt!==d&&Uu(g,_e,b,$,j,rt,Tt.x,Tt.y)&&jr$1(Tt.prev,Tt,Tt.next)>=0))return!1;Tt=Tt.nextZ}for(;Ct&&Ct.z>=yt;){if(Ct.x>=st&&Ct.x<=gt&&Ct.y>=ut&&Ct.y<=wt&&Ct!==o&&Ct!==d&&Uu(g,_e,b,$,j,rt,Ct.x,Ct.y)&&jr$1(Ct.prev,Ct,Ct.next)>=0)return!1;Ct=Ct.prevZ}for(;Tt&&Tt.z<=At;){if(Tt.x>=st&&Tt.x<=gt&&Tt.y>=ut&&Tt.y<=wt&&Tt!==o&&Tt!==d&&Uu(g,_e,b,$,j,rt,Tt.x,Tt.y)&&jr$1(Tt.prev,Tt,Tt.next)>=0)return!1;Tt=Tt.nextZ}return!0}function c4(e,i,s){let a=e;do{let o=a.prev,c=a.next.next;!Hy(o,c)&&rC(o,a,a.next,c)&&Ip(o,c)&&Ip(c,o)&&(i.push(o.i/s|0),i.push(a.i/s|0),i.push(c.i/s|0),Rp(a),Rp(a.next),a=e=c),a=a.next}while(a!==e);return Cc(a)}function u4(e,i,s,a,o,c){let d=e;do{let g=d.next.next;for(;g!==d.prev;){if(d.i!==g.i&&x4(d,g)){let b=iC(d,g);d=Cc(d,d.next),b=Cc(b,b.next),Op(d,i,s,a,o,c,0),Op(b,i,s,a,o,c,0);return}g=g.next}d=d.next}while(d!==e)}function h4(e,i,s,a){let o=[],c,d,g,b,j;for(c=0,d=i.length;c<d;c++)g=i[c]*a,b=c<d-1?i[c+1]*a:e.length,j=tC(e,g,b,a,!1),j===j.next&&(j.steiner=!0),o.push(v4(j));for(o.sort(d4),c=0;c<o.length;c++)s=f4(o[c],s);return s}function d4(e,i){return e.x-i.x}function f4(e,i){let s=p4(e,i);if(!s)return i;let a=iC(s,e);return Cc(a,a.next),Cc(s,s.next)}function p4(e,i){let s=i,a=-1/0,o,c=e.x,d=e.y;do{if(d<=s.y&&d>=s.next.y&&s.next.y!==s.y){let rt=s.x+(d-s.y)*(s.next.x-s.x)/(s.next.y-s.y);if(rt<=c&&rt>a&&(a=rt,o=s.x<s.next.x?s:s.next,rt===c))return o}s=s.next}while(s!==i);if(!o)return null;let g=o,b=o.x,j=o.y,_e=1/0,$;s=o;do c>=s.x&&s.x>=b&&c!==s.x&&Uu(d<j?c:a,d,b,j,d<j?a:c,d,s.x,s.y)&&($=Math.abs(d-s.y)/(c-s.x),Ip(s,e)&&($<_e||$===_e&&(s.x>o.x||s.x===o.x&&m4(o,s)))&&(o=s,_e=$)),s=s.next;while(s!==g);return o}function m4(e,i){return jr$1(e.prev,e,i.prev)<0&&jr$1(i.next,e,e.next)<0}function g4(e,i,s,a){let o=e;do o.z===0&&(o.z=cw(o.x,o.y,i,s,a)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next;while(o!==e);o.prevZ.nextZ=null,o.prevZ=null,y4(o)}function y4(e){let i,s,a,o,c,d,g,b,j=1;do{for(s=e,e=null,c=null,d=0;s;){for(d++,a=s,g=0,i=0;i<j&&(g++,a=a.nextZ,!!a);i++);for(b=j;g>0||b>0&&a;)g!==0&&(b===0||!a||s.z<=a.z)?(o=s,s=s.nextZ,g--):(o=a,a=a.nextZ,b--),c?c.nextZ=o:e=o,o.prevZ=c,c=o;s=a}c.nextZ=null,j*=2}while(d>1);return e}function cw(e,i,s,a,o){return e=(e-s)*o|0,i=(i-a)*o|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e|i<<1}function v4(e){let i=e,s=e;do(i.x<s.x||i.x===s.x&&i.y<s.y)&&(s=i),i=i.next;while(i!==e);return s}function Uu(e,i,s,a,o,c,d,g){return(o-d)*(i-g)>=(e-d)*(c-g)&&(e-d)*(a-g)>=(s-d)*(i-g)&&(s-d)*(c-g)>=(o-d)*(a-g)}function x4(e,i){return e.next.i!==i.i&&e.prev.i!==i.i&&!b4(e,i)&&(Ip(e,i)&&Ip(i,e)&&S4(e,i)&&(jr$1(e.prev,e,i.prev)||jr$1(e,i.prev,i))||Hy(e,i)&&jr$1(e.prev,e,e.next)>0&&jr$1(i.prev,i,i.next)>0)}function jr$1(e,i,s){return(i.y-e.y)*(s.x-i.x)-(i.x-e.x)*(s.y-i.y)}function Hy(e,i){return e.x===i.x&&e.y===i.y}function rC(e,i,s,a){let o=ay(jr$1(e,i,s)),c=ay(jr$1(e,i,a)),d=ay(jr$1(s,a,e)),g=ay(jr$1(s,a,i));return!!(o!==c&&d!==g||o===0&&oy(e,s,i)||c===0&&oy(e,a,i)||d===0&&oy(s,e,a)||g===0&&oy(s,i,a))}function oy(e,i,s){return i.x<=Math.max(e.x,s.x)&&i.x>=Math.min(e.x,s.x)&&i.y<=Math.max(e.y,s.y)&&i.y>=Math.min(e.y,s.y)}function ay(e){return e>0?1:e<0?-1:0}function b4(e,i){let s=e;do{if(s.i!==e.i&&s.next.i!==e.i&&s.i!==i.i&&s.next.i!==i.i&&rC(s,s.next,e,i))return!0;s=s.next}while(s!==e);return!1}function Ip(e,i){return jr$1(e.prev,e,e.next)<0?jr$1(e,i,e.next)>=0&&jr$1(e,e.prev,i)>=0:jr$1(e,i,e.prev)<0||jr$1(e,e.next,i)<0}function S4(e,i){let s=e,a=!1,o=(e.x+i.x)/2,c=(e.y+i.y)/2;do s.y>c!=s.next.y>c&&s.next.y!==s.y&&o<(s.next.x-s.x)*(c-s.y)/(s.next.y-s.y)+s.x&&(a=!a),s=s.next;while(s!==e);return a}function iC(e,i){let s=new uw(e.i,e.x,e.y),a=new uw(i.i,i.x,i.y),o=e.next,c=i.prev;return e.next=i,i.prev=e,s.next=o,o.prev=s,a.next=s,s.prev=a,c.next=a,a.prev=c,a}function TM(e,i,s,a){let o=new uw(e,i,s);return a?(o.next=a.next,o.prev=a,a.next.prev=o,a.next=o):(o.prev=o,o.next=o),o}function Rp(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function uw(e,i,s){this.i=e,this.x=i,this.y=s,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function w4(e,i,s,a){let o=0;for(let c=i,d=s-a;c<s;c+=a)o+=(e[d]-e[c])*(e[c+1]+e[d+1]),d=c;return o}var Zu=class{static area(e){let i=e.length,s=0;for(let a=i-1,o=0;o<i;a=o++)s+=e[a].x*e[o].y-e[o].x*e[a].y;return s*.5}static isClockWise(e){return Zu.area(e)<0}static triangulateShape(e,i){let s=[],a=[],o=[];MM(e),CM(s,e);let c=e.length;i.forEach(MM);for(let g=0;g<i.length;g++)a.push(c),c+=i[g].length,CM(s,i[g]);let d=o4.triangulate(s,a);for(let g=0;g<d.length;g+=3)o.push(d.slice(g,g+3));return o}};function MM(e){let i=e.length;i>2&&e[i-1].equals(e[0])&&e.pop()}function CM(e,i){for(let s=0;s<i.length;s++)e.push(i[s].x),e.push(i[s].y)}var Ju=class extends Qu{constructor(e=1,i=0){let s=(1+Math.sqrt(5))/2,a=[-1,s,0,1,s,0,-1,-s,0,1,-s,0,0,-1,s,0,1,s,0,-1,-s,0,1,-s,s,0,-1,s,0,1,-s,0,-1,-s,0,1],o=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(a,o,e,i),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:i}}static fromJSON(e){return new Ju(e.radius,e.detail)}},Ys=class extends Pe{constructor(e=1,i=32,s=16,a=0,o=Math.PI*2,c=0,d=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:i,heightSegments:s,phiStart:a,phiLength:o,thetaStart:c,thetaLength:d},i=Math.max(3,Math.floor(i)),s=Math.max(2,Math.floor(s));let g=Math.min(c+d,Math.PI),b=0,j=[],_e=new _,$=new _,rt=[],st=[],ut=[],gt=[];for(let wt=0;wt<=s;wt++){let yt=[],At=wt/s,Ct=0;wt==0&&c==0?Ct=.5/i:wt==s&&g==Math.PI&&(Ct=-.5/i);for(let Tt=0;Tt<=i;Tt++){let kt=Tt/i;_e.x=-e*Math.cos(a+kt*o)*Math.sin(c+At*d),_e.y=e*Math.cos(c+At*d),_e.z=e*Math.sin(a+kt*o)*Math.sin(c+At*d),st.push(_e.x,_e.y,_e.z),$.copy(_e).normalize(),ut.push($.x,$.y,$.z),gt.push(kt+Ct,1-At),yt.push(b++)}j.push(yt)}for(let wt=0;wt<s;wt++)for(let yt=0;yt<i;yt++){let At=j[wt][yt+1],Ct=j[wt][yt],Tt=j[wt+1][yt],kt=j[wt+1][yt+1];(wt!==0||c>0)&&rt.push(At,Ct,kt),(wt!==s-1||g<Math.PI)&&rt.push(Ct,Tt,kt)}this.setIndex(rt),this.setAttribute("position",new Te(st,3)),this.setAttribute("normal",new Te(ut,3)),this.setAttribute("uv",new Te(gt,2))}static fromJSON(e){return new Ys(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}},$u=class extends Pe{constructor(e=1,i=.4,s=12,a=48,o=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:i,radialSegments:s,tubularSegments:a,arc:o},s=Math.floor(s),a=Math.floor(a);let c=[],d=[],g=[],b=[],j=new _,_e=new _,$=new _;for(let rt=0;rt<=s;rt++)for(let st=0;st<=a;st++){let ut=st/a*o,gt=rt/s*Math.PI*2;_e.x=(e+i*Math.cos(gt))*Math.cos(ut),_e.y=(e+i*Math.cos(gt))*Math.sin(ut),_e.z=i*Math.sin(gt),d.push(_e.x,_e.y,_e.z),j.x=e*Math.cos(ut),j.y=e*Math.sin(ut),$.subVectors(_e,j).normalize(),g.push($.x,$.y,$.z),b.push(st/a),b.push(rt/s)}for(let rt=1;rt<=s;rt++)for(let st=1;st<=a;st++){let ut=(a+1)*rt+st-1,gt=(a+1)*(rt-1)+st-1,wt=(a+1)*(rt-1)+st,yt=(a+1)*rt+st;c.push(ut,gt,yt),c.push(gt,wt,yt)}this.setIndex(c),this.setAttribute("position",new Te(d,3)),this.setAttribute("normal",new Te(g,3)),this.setAttribute("uv",new Te(b,2))}static fromJSON(e){return new $u(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}},eh=class extends Pe{constructor(e=1,i=.4,s=64,a=8,o=2,c=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:i,tubularSegments:s,radialSegments:a,p:o,q:c},s=Math.floor(s),a=Math.floor(a);let d=[],g=[],b=[],j=[],_e=new _,$=new _,rt=new _,st=new _,ut=new _,gt=new _,wt=new _;for(let At=0;At<=s;++At){let Ct=At/s*o*Math.PI*2;yt(Ct,o,c,e,rt),yt(Ct+.01,o,c,e,st),gt.subVectors(st,rt),wt.addVectors(st,rt),ut.crossVectors(gt,wt),wt.crossVectors(ut,gt),ut.normalize(),wt.normalize();for(let Tt=0;Tt<=a;++Tt){let kt=Tt/a*Math.PI*2,Pt=-i*Math.cos(kt),It=i*Math.sin(kt);_e.x=rt.x+(Pt*wt.x+It*ut.x),_e.y=rt.y+(Pt*wt.y+It*ut.y),_e.z=rt.z+(Pt*wt.z+It*ut.z),g.push(_e.x,_e.y,_e.z),$.subVectors(_e,rt).normalize(),b.push($.x,$.y,$.z),j.push(At/s),j.push(Tt/a)}}for(let At=1;At<=s;At++)for(let Ct=1;Ct<=a;Ct++){let Tt=(a+1)*(At-1)+(Ct-1),kt=(a+1)*At+(Ct-1),Pt=(a+1)*At+Ct,It=(a+1)*(At-1)+Ct;d.push(Tt,kt,It),d.push(kt,Pt,It)}this.setIndex(d),this.setAttribute("position",new Te(g,3)),this.setAttribute("normal",new Te(b,3)),this.setAttribute("uv",new Te(j,2));function yt(At,Ct,Tt,kt,Pt){let It=Math.cos(At),Lt=Math.sin(At),Nt=Tt/Ct*At,Ht=Math.cos(Nt);Pt.x=kt*(2+Ht)*.5*It,Pt.y=kt*(2+Ht)*Lt*.5,Pt.z=kt*Math.sin(Nt)*.5}}static fromJSON(e){return new eh(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}};function nl(e,i,s){return nC(e)?new e.constructor(e.subarray(i,s!==void 0?s:e.length)):e.slice(i,s)}function ly(e,i,s){return!e||!s&&e.constructor===i?e:typeof i.BYTES_PER_ELEMENT=="number"?new i(e):Array.prototype.slice.call(e)}function nC(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function A4(e){function i(o,c){return e[o]-e[c]}let s=e.length,a=new Array(s);for(let o=0;o!==s;++o)a[o]=o;return a.sort(i),a}function PM(e,i,s){let a=e.length,o=new e.constructor(a);for(let c=0,d=0;d!==a;++c){let g=s[c]*i;for(let b=0;b!==i;++b)o[d++]=e[g+b]}return o}function sC(e,i,s,a){let o=1,c=e[0];for(;c!==void 0&&c[a]===void 0;)c=e[o++];if(c===void 0)return;let d=c[a];if(d!==void 0)if(Array.isArray(d))do d=c[a],d!==void 0&&(i.push(c.time),s.push.apply(s,d)),c=e[o++];while(c!==void 0);else if(d.toArray!==void 0)do d=c[a],d!==void 0&&(i.push(c.time),d.toArray(s,s.length)),c=e[o++];while(c!==void 0);else do d=c[a],d!==void 0&&(i.push(c.time),s.push(d)),c=e[o++];while(c!==void 0)}var th=class{constructor(e,i,s,a){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=a!==void 0?a:new i.constructor(s),this.sampleValues=i,this.valueSize=s,this.settings=null,this.DefaultSettings_={}}evaluate(e){let i=this.parameterPositions,s=this._cachedIndex,a=i[s],o=i[s-1];e:{t:{let c;i:{r:if(!(e<a)){for(let d=s+2;;){if(a===void 0){if(e<o)break r;return s=i.length,this._cachedIndex=s,this.copySampleValue_(s-1)}if(s===d)break;if(o=a,a=i[++s],e<a)break t}c=i.length;break i}if(!(e>=o)){let d=i[1];e<d&&(s=2,o=d);for(let g=s-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===g)break;if(a=o,o=i[--s-1],e>=o)break t}c=s,s=0;break i}break e}for(;s<c;){let d=s+c>>>1;e<i[d]?c=d:s=d+1}if(a=i[s],o=i[s-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(a===void 0)return s=i.length,this._cachedIndex=s,this.copySampleValue_(s-1)}this._cachedIndex=s,this.intervalChanged_(s,o,a)}return this.interpolate_(s,o,e,a)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let i=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=e*a;for(let c=0;c!==a;++c)i[c]=s[o+c];return i}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},hw=class extends th{constructor(e,i,s,a){super(e,i,s,a),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ku,endingEnd:ku}}intervalChanged_(e,i,s){let a=this.parameterPositions,o=e-2,c=e+1,d=a[o],g=a[c];if(d===void 0)switch(this.getSettings_().endingStart){case Vu:o=e,d=2*i-s;break;case my:o=a.length-2,d=i+a[o]-a[o+1];break;default:o=e,d=s}if(g===void 0)switch(this.getSettings_().endingEnd){case Vu:c=e,g=2*s-i;break;case my:c=1,g=s+a[1]-a[0];break;default:c=e-1,g=i}let b=(s-i)*.5,j=this.valueSize;this._weightPrev=b/(i-d),this._weightNext=b/(g-s),this._offsetPrev=o*j,this._offsetNext=c*j}interpolate_(e,i,s,a){let o=this.resultBuffer,c=this.sampleValues,d=this.valueSize,g=e*d,b=g-d,j=this._offsetPrev,_e=this._offsetNext,$=this._weightPrev,rt=this._weightNext,st=(s-i)/(a-i),ut=st*st,gt=ut*st,wt=-$*gt+2*$*ut-$*st,yt=(1+$)*gt+(-1.5-2*$)*ut+(-.5+$)*st+1,At=(-1-rt)*gt+(1.5+rt)*ut+.5*st,Ct=rt*gt-rt*ut;for(let Tt=0;Tt!==d;++Tt)o[Tt]=wt*c[j+Tt]+yt*c[b+Tt]+At*c[g+Tt]+Ct*c[_e+Tt];return o}},Cy=class extends th{constructor(e,i,s,a){super(e,i,s,a)}interpolate_(e,i,s,a){let o=this.resultBuffer,c=this.sampleValues,d=this.valueSize,g=e*d,b=g-d,j=(s-i)/(a-i),_e=1-j;for(let $=0;$!==d;++$)o[$]=c[b+$]*_e+c[g+$]*j;return o}},dw=class extends th{constructor(e,i,s,a){super(e,i,s,a)}interpolate_(e){return this.copySampleValue_(e-1)}},xs=class{constructor(e,i,s,a){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(i===void 0||i.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=ly(i,this.TimeBufferType),this.values=ly(s,this.ValueBufferType),this.setInterpolation(a||this.DefaultInterpolation)}static toJSON(e){let i=e.constructor,s;if(i.toJSON!==this.toJSON)s=i.toJSON(e);else{s={name:e.name,times:ly(e.times,Array),values:ly(e.values,Array)};let a=e.getInterpolation();a!==e.DefaultInterpolation&&(s.interpolation=a)}return s.type=e.ValueTypeName,s}InterpolantFactoryMethodDiscrete(e){return new dw(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Cy(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new hw(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let i;switch(e){case fy:i=this.InterpolantFactoryMethodDiscrete;break;case py:i=this.InterpolantFactoryMethodLinear;break;case uS:i=this.InterpolantFactoryMethodSmooth;break}if(i===void 0){let s="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(s);return console.warn("THREE.KeyframeTrack:",s),this}return this.createInterpolant=i,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return fy;case this.InterpolantFactoryMethodLinear:return py;case this.InterpolantFactoryMethodSmooth:return uS}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){let i=this.times;for(let s=0,a=i.length;s!==a;++s)i[s]+=e}return this}scale(e){if(e!==1){let i=this.times;for(let s=0,a=i.length;s!==a;++s)i[s]*=e}return this}trim(e,i){let s=this.times,a=s.length,o=0,c=a-1;for(;o!==a&&s[o]<e;)++o;for(;c!==-1&&s[c]>i;)--c;if(++c,o!==0||c!==a){o>=c&&(c=Math.max(c,1),o=c-1);let d=this.getValueSize();this.times=nl(s,o,c),this.values=nl(this.values,o*d,c*d)}return this}validate(){let e=!0,i=this.getValueSize();i-Math.floor(i)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);let s=this.times,a=this.values,o=s.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let c=null;for(let d=0;d!==o;d++){let g=s[d];if(typeof g=="number"&&isNaN(g)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,d,g),e=!1;break}if(c!==null&&c>g){console.error("THREE.KeyframeTrack: Out of order keys.",this,d,g,c),e=!1;break}c=g}if(a!==void 0&&nC(a))for(let d=0,g=a.length;d!==g;++d){let b=a[d];if(isNaN(b)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,d,b),e=!1;break}}return e}optimize(){let e=nl(this.times),i=nl(this.values),s=this.getValueSize(),a=this.getInterpolation()===uS,o=e.length-1,c=1;for(let d=1;d<o;++d){let g=!1,b=e[d],j=e[d+1];if(b!==j&&(d!==1||b!==e[0]))if(a)g=!0;else{let _e=d*s,$=_e-s,rt=_e+s;for(let st=0;st!==s;++st){let ut=i[_e+st];if(ut!==i[$+st]||ut!==i[rt+st]){g=!0;break}}}if(g){if(d!==c){e[c]=e[d];let _e=d*s,$=c*s;for(let rt=0;rt!==s;++rt)i[$+rt]=i[_e+rt]}++c}}if(o>0){e[c]=e[o];for(let d=o*s,g=c*s,b=0;b!==s;++b)i[g+b]=i[d+b];++c}return c!==e.length?(this.times=nl(e,0,c),this.values=nl(i,0,c*s)):(this.times=e,this.values=i),this}clone(){let e=nl(this.times,0),i=nl(this.values,0),s=this.constructor,a=new s(this.name,e,i);return a.createInterpolant=this.createInterpolant,a}};xs.prototype.TimeBufferType=Float32Array;xs.prototype.ValueBufferType=Float32Array;xs.prototype.DefaultInterpolation=py;var fl=class extends xs{};fl.prototype.ValueTypeName="bool";fl.prototype.ValueBufferType=Array;fl.prototype.DefaultInterpolation=fy;fl.prototype.InterpolantFactoryMethodLinear=void 0;fl.prototype.InterpolantFactoryMethodSmooth=void 0;var Py=class extends xs{};Py.prototype.ValueTypeName="color";var rh=class extends xs{};rh.prototype.ValueTypeName="number";var fw=class extends th{constructor(e,i,s,a){super(e,i,s,a)}interpolate_(e,i,s,a){let o=this.resultBuffer,c=this.sampleValues,d=this.valueSize,g=(s-i)/(a-i),b=e*d;for(let j=b+d;b!==j;b+=4)Qe.slerpFlat(o,0,c,b-d,c,b,g);return o}},Pc=class extends xs{InterpolantFactoryMethodLinear(e){return new fw(this.times,this.values,this.getValueSize(),e)}};Pc.prototype.ValueTypeName="quaternion";Pc.prototype.DefaultInterpolation=py;Pc.prototype.InterpolantFactoryMethodSmooth=void 0;var pl=class extends xs{};pl.prototype.ValueTypeName="string";pl.prototype.ValueBufferType=Array;pl.prototype.DefaultInterpolation=fy;pl.prototype.InterpolantFactoryMethodLinear=void 0;pl.prototype.InterpolantFactoryMethodSmooth=void 0;var ih=class extends xs{};ih.prototype.ValueTypeName="vector";var nh=class{constructor(e,i=-1,s,a=Tw){this.name=e,this.tracks=s,this.duration=i,this.blendMode=a,this.uuid=ms(),this.duration<0&&this.resetDuration()}static parse(e){let i=[],s=e.tracks,a=1/(e.fps||1);for(let c=0,d=s.length;c!==d;++c)i.push(E4(s[c]).scale(a));let o=new this(e.name,e.duration,i,e.blendMode);return o.uuid=e.uuid,o}static toJSON(e){let i=[],s=e.tracks,a={name:e.name,duration:e.duration,tracks:i,uuid:e.uuid,blendMode:e.blendMode};for(let o=0,c=s.length;o!==c;++o)i.push(xs.toJSON(s[o]));return a}static CreateFromMorphTargetSequence(e,i,s,a){let o=i.length,c=[];for(let d=0;d<o;d++){let g=[],b=[];g.push((d+o-1)%o,d,(d+1)%o),b.push(0,1,0);let j=A4(g);g=PM(g,1,j),b=PM(b,1,j),!a&&g[0]===0&&(g.push(o),b.push(b[0])),c.push(new rh(".morphTargetInfluences["+i[d].name+"]",g,b).scale(1/s))}return new this(e,-1,c)}static findByName(e,i){let s=e;if(!Array.isArray(e)){let a=e;s=a.geometry&&a.geometry.animations||a.animations}for(let a=0;a<s.length;a++)if(s[a].name===i)return s[a];return null}static CreateClipsFromMorphTargetSequences(e,i,s){let a={},o=/^([\w-]*?)([\d]+)$/;for(let d=0,g=e.length;d<g;d++){let b=e[d],j=b.name.match(o);if(j&&j.length>1){let _e=j[1],$=a[_e];$||(a[_e]=$=[]),$.push(b)}}let c=[];for(let d in a)c.push(this.CreateFromMorphTargetSequence(d,a[d],i,s));return c}static parseAnimation(e,i){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;let s=function(j,_e,$,rt,st){if($.length!==0){let ut=[],gt=[];sC($,ut,gt,rt),ut.length!==0&&st.push(new j(_e,ut,gt))}},a=[],o=e.name||"default",c=e.fps||30,d=e.blendMode,g=e.length||-1,b=e.hierarchy||[];for(let j=0;j<b.length;j++){let _e=b[j].keys;if(!(!_e||_e.length===0))if(_e[0].morphTargets){let $={},rt;for(rt=0;rt<_e.length;rt++)if(_e[rt].morphTargets)for(let st=0;st<_e[rt].morphTargets.length;st++)$[_e[rt].morphTargets[st]]=-1;for(let st in $){let ut=[],gt=[];for(let wt=0;wt!==_e[rt].morphTargets.length;++wt){let yt=_e[rt];ut.push(yt.time),gt.push(yt.morphTarget===st?1:0)}a.push(new rh(".morphTargetInfluence["+st+"]",ut,gt))}g=$.length*c}else{let $=".bones["+i[j].name+"]";s(ih,$+".position",_e,"pos",a),s(Pc,$+".quaternion",_e,"rot",a),s(ih,$+".scale",_e,"scl",a)}}return a.length===0?null:new this(o,g,a,d)}resetDuration(){let e=this.tracks,i=0;for(let s=0,a=e.length;s!==a;++s){let o=this.tracks[s];i=Math.max(i,o.times[o.times.length-1])}return this.duration=i,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let i=0;i<this.tracks.length;i++)e=e&&this.tracks[i].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){let e=[];for(let i=0;i<this.tracks.length;i++)e.push(this.tracks[i].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}};function _4(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return rh;case"vector":case"vector2":case"vector3":case"vector4":return ih;case"color":return Py;case"quaternion":return Pc;case"bool":case"boolean":return fl;case"string":return pl}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}function E4(e){if(e.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");let i=_4(e.type);if(e.times===void 0){let s=[],a=[];sC(e.keys,s,a,"value"),e.times=s,e.values=a}return i.parse!==void 0?i.parse(e):new i(e.name,e.times,e.values,e.interpolation)}var Dy={enabled:!1,files:{},add:function(e,i){this.enabled!==!1&&(this.files[e]=i)},get:function(e){if(this.enabled!==!1)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},Lp=class{constructor(e,i,s){let a=this,o=!1,c=0,d=0,g,b=[];this.onStart=void 0,this.onLoad=e,this.onProgress=i,this.onError=s,this.itemStart=function(j){d++,o===!1&&a.onStart!==void 0&&a.onStart(j,c,d),o=!0},this.itemEnd=function(j){c++,a.onProgress!==void 0&&a.onProgress(j,c,d),c===d&&(o=!1,a.onLoad!==void 0&&a.onLoad())},this.itemError=function(j){a.onError!==void 0&&a.onError(j)},this.resolveURL=function(j){return g?g(j):j},this.setURLModifier=function(j){return g=j,this},this.addHandler=function(j,_e){return b.push(j,_e),this},this.removeHandler=function(j){let _e=b.indexOf(j);return _e!==-1&&b.splice(_e,2),this},this.getHandler=function(j){for(let _e=0,$=b.length;_e<$;_e+=2){let rt=b[_e],st=b[_e+1];if(rt.global&&(rt.lastIndex=0),rt.test(j))return st}return null}}},T4=new Lp,ml=class{constructor(e){this.manager=e!==void 0?e:T4,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,i){let s=this;return new Promise(function(a,o){s.load(e,a,i,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}},ma={},pw=class extends Error{constructor(e,i){super(e),this.response=i}},sh=class extends ml{constructor(e){super(e)}load(e,i,s,a){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let o=Dy.get(e);if(o!==void 0)return this.manager.itemStart(e),setTimeout(()=>{i&&i(o),this.manager.itemEnd(e)},0),o;if(ma[e]!==void 0){ma[e].push({onLoad:i,onProgress:s,onError:a});return}ma[e]=[],ma[e].push({onLoad:i,onProgress:s,onError:a});let c=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),d=this.mimeType,g=this.responseType;fetch(c).then(b=>{if(b.status===200||b.status===0){if(b.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||b.body===void 0||b.body.getReader===void 0)return b;let j=ma[e],_e=b.body.getReader(),$=b.headers.get("Content-Length")||b.headers.get("X-File-Size"),rt=$?parseInt($):0,st=rt!==0,ut=0,gt=new ReadableStream({start(wt){yt();function yt(){_e.read().then(({done:At,value:Ct})=>{if(At)wt.close();else{ut+=Ct.byteLength;let Tt=new ProgressEvent("progress",{lengthComputable:st,loaded:ut,total:rt});for(let kt=0,Pt=j.length;kt<Pt;kt++){let It=j[kt];It.onProgress&&It.onProgress(Tt)}wt.enqueue(Ct),yt()}})}}});return new Response(gt)}else throw new pw(`fetch for "${b.url}" responded with ${b.status}: ${b.statusText}`,b)}).then(b=>{switch(g){case"arraybuffer":return b.arrayBuffer();case"blob":return b.blob();case"document":return b.text().then(j=>new DOMParser().parseFromString(j,d));case"json":return b.json();default:if(d===void 0)return b.text();{let j=/charset="?([^;"\s]*)"?/i.exec(d),_e=j&&j[1]?j[1].toLowerCase():void 0,$=new TextDecoder(_e);return b.arrayBuffer().then(rt=>$.decode(rt))}}}).then(b=>{Dy.add(e,b);let j=ma[e];delete ma[e];for(let _e=0,$=j.length;_e<$;_e++){let rt=j[_e];rt.onLoad&&rt.onLoad(b)}}).catch(b=>{let j=ma[e];if(j===void 0)throw this.manager.itemError(e),b;delete ma[e];for(let _e=0,$=j.length;_e<$;_e++){let rt=j[_e];rt.onError&&rt.onError(b)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}},mw=class extends ml{constructor(e){super(e)}load(e,i,s,a){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let o=this,c=Dy.get(e);if(c!==void 0)return o.manager.itemStart(e),setTimeout(function(){i&&i(c),o.manager.itemEnd(e)},0),c;let d=_p("img");function g(){j(),Dy.add(e,this),i&&i(this),o.manager.itemEnd(e)}function b(_e){j(),a&&a(_e),o.manager.itemError(e),o.manager.itemEnd(e)}function j(){d.removeEventListener("load",g,!1),d.removeEventListener("error",b,!1)}return d.addEventListener("load",g,!1),d.addEventListener("error",b,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(d.crossOrigin=this.crossOrigin),o.manager.itemStart(e),d.src=e,d}},Oy=class extends ml{constructor(e){super(e)}load(e,i,s,a){let o=new tr,c=new mw(this.manager);return c.setCrossOrigin(this.crossOrigin),c.setPath(this.path),c.load(e,function(d){o.image=d,o.needsUpdate=!0,i!==void 0&&i(o)},s,a),o}},gl=class extends _t{constructor(e,i=1){super(),this.isLight=!0,this.type="Light",this.color=new We(e),this.intensity=i}dispose(){}copy(e,i){return super.copy(e,i),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let i=super.toJSON(e);return i.object.color=this.color.getHex(),i.object.intensity=this.intensity,this.groundColor!==void 0&&(i.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(i.object.distance=this.distance),this.angle!==void 0&&(i.object.angle=this.angle),this.decay!==void 0&&(i.object.decay=this.decay),this.penumbra!==void 0&&(i.object.penumbra=this.penumbra),this.shadow!==void 0&&(i.object.shadow=this.shadow.toJSON()),i}},Iy=class extends gl{constructor(e,i,s){super(e,s),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(_t.DEFAULT_UP),this.updateMatrix(),this.groundColor=new We(i)}copy(e,i){return super.copy(e,i),this.groundColor.copy(e.groundColor),this}},VS=new ce$1,DM=new _,OM=new _,Bp=class{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new z$1(512,512),this.map=null,this.mapPass=null,this.matrix=new ce$1,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Tp,this._frameExtents=new z$1(1,1),this._viewportCount=1,this._viewports=[new Ke(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let i=this.camera,s=this.matrix;DM.setFromMatrixPosition(e.matrixWorld),i.position.copy(DM),OM.setFromMatrixPosition(e.target.matrixWorld),i.lookAt(OM),i.updateMatrixWorld(),VS.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(VS),s.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),s.multiply(VS)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}},gw=class extends Bp{constructor(){super(new ri(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){let i=this.camera,s=Ap*2*e.angle*this.focus,a=this.mapSize.width/this.mapSize.height,o=e.distance||i.far;(s!==i.fov||a!==i.aspect||o!==i.far)&&(i.fov=s,i.aspect=a,i.far=o,i.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}},Ry=class extends gl{constructor(e,i,s=0,a=Math.PI/3,o=0,c=2){super(e,i),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(_t.DEFAULT_UP),this.updateMatrix(),this.target=new _t,this.distance=s,this.angle=a,this.penumbra=o,this.decay=c,this.map=null,this.shadow=new gw}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,i){return super.copy(e,i),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},IM=new ce$1,pp=new _,zS=new _,yw=class extends Bp{constructor(){super(new ri(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new z$1(4,2),this._viewportCount=6,this._viewports=[new Ke(2,1,1,1),new Ke(0,1,1,1),new Ke(3,1,1,1),new Ke(1,1,1,1),new Ke(3,0,1,1),new Ke(1,0,1,1)],this._cubeDirections=[new _(1,0,0),new _(-1,0,0),new _(0,0,1),new _(0,0,-1),new _(0,1,0),new _(0,-1,0)],this._cubeUps=[new _(0,1,0),new _(0,1,0),new _(0,1,0),new _(0,1,0),new _(0,0,1),new _(0,0,-1)]}updateMatrices(e,i=0){let s=this.camera,a=this.matrix,o=e.distance||s.far;o!==s.far&&(s.far=o,s.updateProjectionMatrix()),pp.setFromMatrixPosition(e.matrixWorld),s.position.copy(pp),zS.copy(s.position),zS.add(this._cubeDirections[i]),s.up.copy(this._cubeUps[i]),s.lookAt(zS),s.updateMatrixWorld(),a.makeTranslation(-pp.x,-pp.y,-pp.z),IM.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),this._frustum.setFromProjectionMatrix(IM)}},Ly=class extends gl{constructor(e,i,s=0,a=2){super(e,i),this.isPointLight=!0,this.type="PointLight",this.distance=s,this.decay=a,this.shadow=new yw}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,i){return super.copy(e,i),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}},vw=class extends Bp{constructor(){super(new Wu(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},By=class extends gl{constructor(e,i){super(e,i),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(_t.DEFAULT_UP),this.updateMatrix(),this.target=new _t,this.shadow=new vw}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},Np=class extends Pe{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){let e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}},oh=class extends ml{constructor(e){super(e)}load(e,i,s,a){let o=this,c=new sh(o.manager);c.setPath(o.path),c.setRequestHeader(o.requestHeader),c.setWithCredentials(o.withCredentials),c.load(e,function(d){try{i(o.parse(JSON.parse(d)))}catch(g){a?a(g):console.error(g),o.manager.itemError(e)}},s,a)}parse(e){let i={},s={};function a($,rt){if(i[rt]!==void 0)return i[rt];let st=$.interleavedBuffers[rt],ut=o($,st.buffer),gt=kg(st.type,ut),wt=new _y(gt,st.stride);return wt.uuid=st.uuid,i[rt]=wt,wt}function o($,rt){if(s[rt]!==void 0)return s[rt];let st=$.arrayBuffers[rt],ut=new Uint32Array(st).buffer;return s[rt]=ut,ut}let c=e.isInstancedBufferGeometry?new Np:new Pe,d=e.data.index;if(d!==void 0){let $=kg(d.type,d.array);c.setIndex(new Xe($,1))}let g=e.data.attributes;for(let $ in g){let rt=g[$],st;if(rt.isInterleavedBufferAttribute){let ut=a(e.data,rt.data);st=new wc(ut,rt.itemSize,rt.offset,rt.normalized)}else{let ut=kg(rt.type,rt.array),gt=rt.isInstancedBufferAttribute?Eo:Xe;st=new gt(ut,rt.itemSize,rt.normalized)}rt.name!==void 0&&(st.name=rt.name),rt.usage!==void 0&&st.setUsage(rt.usage),rt.updateRange!==void 0&&(st.updateRange.offset=rt.updateRange.offset,st.updateRange.count=rt.updateRange.count),c.setAttribute($,st)}let b=e.data.morphAttributes;if(b)for(let $ in b){let rt=b[$],st=[];for(let ut=0,gt=rt.length;ut<gt;ut++){let wt=rt[ut],yt;if(wt.isInterleavedBufferAttribute){let At=a(e.data,wt.data);yt=new wc(At,wt.itemSize,wt.offset,wt.normalized)}else{let At=kg(wt.type,wt.array);yt=new Xe(At,wt.itemSize,wt.normalized)}wt.name!==void 0&&(yt.name=wt.name),st.push(yt)}c.morphAttributes[$]=st}e.data.morphTargetsRelative&&(c.morphTargetsRelative=!0);let j=e.data.groups||e.data.drawcalls||e.data.offsets;if(j!==void 0)for(let $=0,rt=j.length;$!==rt;++$){let st=j[$];c.addGroup(st.start,st.count,st.materialIndex)}let _e=e.data.boundingSphere;if(_e!==void 0){let $=new _;_e.center!==void 0&&$.fromArray(_e.center),c.boundingSphere=new Br($,_e.radius)}return e.name&&(c.name=e.name),e.userData&&(c.userData=e.userData),c}},Ny=class{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=RM(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let i=RM();e=(i-this.oldTime)/1e3,this.oldTime=i,this.elapsedTime+=e}return e}};function RM(){return(typeof performance>"u"?Date:performance).now()}var xw=class{constructor(e,i,s){this.binding=e,this.valueSize=s;let a,o,c;switch(i){case"quaternion":a=this._slerp,o=this._slerpAdditive,c=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(s*6),this._workIndex=5;break;case"string":case"bool":a=this._select,o=this._select,c=this._setAdditiveIdentityOther,this.buffer=new Array(s*5);break;default:a=this._lerp,o=this._lerpAdditive,c=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(s*5)}this._mixBufferRegion=a,this._mixBufferRegionAdditive=o,this._setIdentity=c,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,i){let s=this.buffer,a=this.valueSize,o=e*a+a,c=this.cumulativeWeight;if(c===0){for(let d=0;d!==a;++d)s[o+d]=s[d];c=i}else{c+=i;let d=i/c;this._mixBufferRegion(s,o,0,d,a)}this.cumulativeWeight=c}accumulateAdditive(e){let i=this.buffer,s=this.valueSize,a=s*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(i,a,0,e,s),this.cumulativeWeightAdditive+=e}apply(e){let i=this.valueSize,s=this.buffer,a=e*i+i,o=this.cumulativeWeight,c=this.cumulativeWeightAdditive,d=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1){let g=i*this._origIndex;this._mixBufferRegion(s,a,g,1-o,i)}c>0&&this._mixBufferRegionAdditive(s,a,this._addIndex*i,1,i);for(let g=i,b=i+i;g!==b;++g)if(s[g]!==s[g+i]){d.setValue(s,a);break}}saveOriginalState(){let e=this.binding,i=this.buffer,s=this.valueSize,a=s*this._origIndex;e.getValue(i,a);for(let o=s,c=a;o!==c;++o)i[o]=i[a+o%s];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){let e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){let e=this._addIndex*this.valueSize,i=e+this.valueSize;for(let s=e;s<i;s++)this.buffer[s]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){let e=this._origIndex*this.valueSize,i=this._addIndex*this.valueSize;for(let s=0;s<this.valueSize;s++)this.buffer[i+s]=this.buffer[e+s]}_select(e,i,s,a,o){if(a>=.5)for(let c=0;c!==o;++c)e[i+c]=e[s+c]}_slerp(e,i,s,a){Qe.slerpFlat(e,i,e,i,e,s,a)}_slerpAdditive(e,i,s,a,o){let c=this._workIndex*o;Qe.multiplyQuaternionsFlat(e,c,e,i,e,s),Qe.slerpFlat(e,i,e,i,e,c,a)}_lerp(e,i,s,a,o){let c=1-a;for(let d=0;d!==o;++d){let g=i+d;e[g]=e[g]*c+e[s+d]*a}}_lerpAdditive(e,i,s,a,o){for(let c=0;c!==o;++c){let d=i+c;e[d]=e[d]+e[s+c]*a}}},Iw="\\[\\]\\.:\\/",M4=new RegExp("["+Iw+"]","g"),Rw="[^"+Iw+"]",C4="[^"+Iw.replace("\\.","")+"]",P4=/((?:WC+[\/:])*)/.source.replace("WC",Rw),D4=/(WCOD+)?/.source.replace("WCOD",C4),O4=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Rw),I4=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Rw),R4=new RegExp("^"+P4+D4+O4+I4+"$"),L4=["material","materials","bones","map"],bw=class{constructor(e,i,s){let a=s||$t.parseTrackName(i);this._targetGroup=e,this._bindings=e.subscribe_(i,a)}getValue(e,i){this.bind();let s=this._targetGroup.nCachedObjects_,a=this._bindings[s];a!==void 0&&a.getValue(e,i)}setValue(e,i){let s=this._bindings;for(let a=this._targetGroup.nCachedObjects_,o=s.length;a!==o;++a)s[a].setValue(e,i)}bind(){let e=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=e.length;i!==s;++i)e[i].bind()}unbind(){let e=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=e.length;i!==s;++i)e[i].unbind()}},$t=class{constructor(e,i,s){this.path=i,this.parsedPath=s||$t.parseTrackName(i),this.node=$t.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,i,s){return e&&e.isAnimationObjectGroup?new $t.Composite(e,i,s):new $t(e,i,s)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(M4,"")}static parseTrackName(e){let i=R4.exec(e);if(i===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);let s={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},a=s.nodeName&&s.nodeName.lastIndexOf(".");if(a!==void 0&&a!==-1){let o=s.nodeName.substring(a+1);L4.indexOf(o)!==-1&&(s.nodeName=s.nodeName.substring(0,a),s.objectName=o)}if(s.propertyName===null||s.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return s}static findNode(e,i){if(i===void 0||i===""||i==="."||i===-1||i===e.name||i===e.uuid)return e;if(e.skeleton){let s=e.skeleton.getBoneByName(i);if(s!==void 0)return s}if(e.children){let s=function(o){for(let c=0;c<o.length;c++){let d=o[c];if(d.name===i||d.uuid===i)return d;let g=s(d.children);if(g)return g}return null},a=s(e.children);if(a)return a}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,i){e[i]=this.targetObject[this.propertyName]}_getValue_array(e,i){let s=this.resolvedProperty;for(let a=0,o=s.length;a!==o;++a)e[i++]=s[a]}_getValue_arrayElement(e,i){e[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,i){this.resolvedProperty.toArray(e,i)}_setValue_direct(e,i){this.targetObject[this.propertyName]=e[i]}_setValue_direct_setNeedsUpdate(e,i){this.targetObject[this.propertyName]=e[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,i){this.targetObject[this.propertyName]=e[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,i){let s=this.resolvedProperty;for(let a=0,o=s.length;a!==o;++a)s[a]=e[i++]}_setValue_array_setNeedsUpdate(e,i){let s=this.resolvedProperty;for(let a=0,o=s.length;a!==o;++a)s[a]=e[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,i){let s=this.resolvedProperty;for(let a=0,o=s.length;a!==o;++a)s[a]=e[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,i){this.resolvedProperty[this.propertyIndex]=e[i]}_setValue_arrayElement_setNeedsUpdate(e,i){this.resolvedProperty[this.propertyIndex]=e[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,i){this.resolvedProperty[this.propertyIndex]=e[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,i){this.resolvedProperty.fromArray(e,i)}_setValue_fromArray_setNeedsUpdate(e,i){this.resolvedProperty.fromArray(e,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,i){this.resolvedProperty.fromArray(e,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,i){this.bind(),this.getValue(e,i)}_setValue_unbound(e,i){this.bind(),this.setValue(e,i)}bind(){let e=this.node,i=this.parsedPath,s=i.objectName,a=i.propertyName,o=i.propertyIndex;if(e||(e=$t.findNode(this.rootNode,i.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(s){let b=i.objectIndex;switch(s){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let j=0;j<e.length;j++)if(e[j].name===b){b=j;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[s]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[s]}if(b!==void 0){if(e[b]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[b]}}let c=e[a];if(c===void 0){let b=i.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+b+"."+a+" but it wasn't found.",e);return}let d=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?d=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(d=this.Versioning.MatrixWorldNeedsUpdate);let g=this.BindingType.Direct;if(o!==void 0){if(a==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[o]!==void 0&&(o=e.morphTargetDictionary[o])}g=this.BindingType.ArrayElement,this.resolvedProperty=c,this.propertyIndex=o}else c.fromArray!==void 0&&c.toArray!==void 0?(g=this.BindingType.HasFromToArray,this.resolvedProperty=c):Array.isArray(c)?(g=this.BindingType.EntireArray,this.resolvedProperty=c):this.propertyName=a;this.getValue=this.GetterByBindingType[g],this.setValue=this.SetterByBindingTypeAndVersioning[g][d]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}};$t.Composite=bw;$t.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};$t.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};$t.prototype.GetterByBindingType=[$t.prototype._getValue_direct,$t.prototype._getValue_array,$t.prototype._getValue_arrayElement,$t.prototype._getValue_toArray];$t.prototype.SetterByBindingTypeAndVersioning=[[$t.prototype._setValue_direct,$t.prototype._setValue_direct_setNeedsUpdate,$t.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[$t.prototype._setValue_array,$t.prototype._setValue_array_setNeedsUpdate,$t.prototype._setValue_array_setMatrixWorldNeedsUpdate],[$t.prototype._setValue_arrayElement,$t.prototype._setValue_arrayElement_setNeedsUpdate,$t.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[$t.prototype._setValue_fromArray,$t.prototype._setValue_fromArray_setNeedsUpdate,$t.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var Sw=class{constructor(e,i,s=null,a=i.blendMode){this._mixer=e,this._clip=i,this._localRoot=s,this.blendMode=a;let o=i.tracks,c=o.length,d=new Array(c),g={endingStart:ku,endingEnd:ku};for(let b=0;b!==c;++b){let j=o[b].createInterpolant(null);d[b]=j,j.settings=g}this._interpolantSettings=g,this._interpolants=d,this._propertyBindings=new Array(c),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Ew,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,i){return this.loop=e,this.repetitions=i,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,i,s){if(e.fadeOut(i),this.fadeIn(i),s){let a=this._clip.duration,o=e._clip.duration,c=o/a,d=a/o;e.warp(1,c,i),this.warp(d,1,i)}return this}crossFadeTo(e,i,s){return e.crossFadeFrom(this,i,s)}stopFading(){let e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,i,s){let a=this._mixer,o=a.time,c=this.timeScale,d=this._timeScaleInterpolant;d===null&&(d=a._lendControlInterpolant(),this._timeScaleInterpolant=d);let g=d.parameterPositions,b=d.sampleValues;return g[0]=o,g[1]=o+s,b[0]=e/c,b[1]=i/c,this}stopWarping(){let e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,i,s,a){if(!this.enabled){this._updateWeight(e);return}let o=this._startTime;if(o!==null){let g=(e-o)*s;g<0||s===0?i=0:(this._startTime=null,i=s*g)}i*=this._updateTimeScale(e);let c=this._updateTime(i),d=this._updateWeight(e);if(d>0){let g=this._interpolants,b=this._propertyBindings;switch(this.blendMode){case XF:for(let j=0,_e=g.length;j!==_e;++j)g[j].evaluate(c),b[j].accumulateAdditive(d);break;case Tw:default:for(let j=0,_e=g.length;j!==_e;++j)g[j].evaluate(c),b[j].accumulate(a,d)}}}_updateWeight(e){let i=0;if(this.enabled){i=this.weight;let s=this._weightInterpolant;if(s!==null){let a=s.evaluate(e)[0];i*=a,e>s.parameterPositions[1]&&(this.stopFading(),a===0&&(this.enabled=!1))}}return this._effectiveWeight=i,i}_updateTimeScale(e){let i=0;if(!this.paused){i=this.timeScale;let s=this._timeScaleInterpolant;if(s!==null){let a=s.evaluate(e)[0];i*=a,e>s.parameterPositions[1]&&(this.stopWarping(),i===0?this.paused=!0:this.timeScale=i)}}return this._effectiveTimeScale=i,i}_updateTime(e){let i=this._clip.duration,s=this.loop,a=this.time+e,o=this._loopCount,c=s===kp;if(e===0)return o===-1?a:c&&(o&1)===1?i-a:a;if(s===_w){o===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(a>=i)a=i;else if(a<0)a=0;else{this.time=a;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(o===-1&&(e>=0?(o=0,this._setEndings(!0,this.repetitions===0,c)):this._setEndings(this.repetitions===0,!0,c)),a>=i||a<0){let d=Math.floor(a/i);a-=i*d,o+=Math.abs(d);let g=this.repetitions-o;if(g<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,a=e>0?i:0,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(g===1){let b=e<0;this._setEndings(b,!b,c)}else this._setEndings(!1,!1,c);this._loopCount=o,this.time=a,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:d})}}else this.time=a;if(c&&(o&1)===1)return i-a}return a}_setEndings(e,i,s){let a=this._interpolantSettings;s?(a.endingStart=Vu,a.endingEnd=Vu):(e?a.endingStart=this.zeroSlopeAtStart?Vu:ku:a.endingStart=my,i?a.endingEnd=this.zeroSlopeAtEnd?Vu:ku:a.endingEnd=my)}_scheduleFading(e,i,s){let a=this._mixer,o=a.time,c=this._weightInterpolant;c===null&&(c=a._lendControlInterpolant(),this._weightInterpolant=c);let d=c.parameterPositions,g=c.sampleValues;return d[0]=o,g[0]=i,d[1]=o+e,g[1]=s,this}},B4=new Float32Array(1),Fy=class extends fr$2{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,i){let s=e._localRoot||this._root,a=e._clip.tracks,o=a.length,c=e._propertyBindings,d=e._interpolants,g=s.uuid,b=this._bindingsByRootAndName,j=b[g];j===void 0&&(j={},b[g]=j);for(let _e=0;_e!==o;++_e){let $=a[_e],rt=$.name,st=j[rt];if(st!==void 0)++st.referenceCount,c[_e]=st;else{if(st=c[_e],st!==void 0){st._cacheIndex===null&&(++st.referenceCount,this._addInactiveBinding(st,g,rt));continue}let ut=i&&i._propertyBindings[_e].binding.parsedPath;st=new xw($t.create(s,rt,ut),$.ValueTypeName,$.getValueSize()),++st.referenceCount,this._addInactiveBinding(st,g,rt),c[_e]=st}d[_e].resultBuffer=st.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){let s=(e._localRoot||this._root).uuid,a=e._clip.uuid,o=this._actionsByClip[a];this._bindAction(e,o&&o.knownActions[0]),this._addInactiveAction(e,a,s)}let i=e._propertyBindings;for(let s=0,a=i.length;s!==a;++s){let o=i[s];o.useCount++===0&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){let i=e._propertyBindings;for(let s=0,a=i.length;s!==a;++s){let o=i[s];--o.useCount===0&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;let e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){let i=e._cacheIndex;return i!==null&&i<this._nActiveActions}_addInactiveAction(e,i,s){let a=this._actions,o=this._actionsByClip,c=o[i];if(c===void 0)c={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,o[i]=c;else{let d=c.knownActions;e._byClipCacheIndex=d.length,d.push(e)}e._cacheIndex=a.length,a.push(e),c.actionByRoot[s]=e}_removeInactiveAction(e){let i=this._actions,s=i[i.length-1],a=e._cacheIndex;s._cacheIndex=a,i[a]=s,i.pop(),e._cacheIndex=null;let o=e._clip.uuid,c=this._actionsByClip,d=c[o],g=d.knownActions,b=g[g.length-1],j=e._byClipCacheIndex;b._byClipCacheIndex=j,g[j]=b,g.pop(),e._byClipCacheIndex=null;let _e=d.actionByRoot,$=(e._localRoot||this._root).uuid;delete _e[$],g.length===0&&delete c[o],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){let i=e._propertyBindings;for(let s=0,a=i.length;s!==a;++s){let o=i[s];--o.referenceCount===0&&this._removeInactiveBinding(o)}}_lendAction(e){let i=this._actions,s=e._cacheIndex,a=this._nActiveActions++,o=i[a];e._cacheIndex=a,i[a]=e,o._cacheIndex=s,i[s]=o}_takeBackAction(e){let i=this._actions,s=e._cacheIndex,a=--this._nActiveActions,o=i[a];e._cacheIndex=a,i[a]=e,o._cacheIndex=s,i[s]=o}_addInactiveBinding(e,i,s){let a=this._bindingsByRootAndName,o=this._bindings,c=a[i];c===void 0&&(c={},a[i]=c),c[s]=e,e._cacheIndex=o.length,o.push(e)}_removeInactiveBinding(e){let i=this._bindings,s=e.binding,a=s.rootNode.uuid,o=s.path,c=this._bindingsByRootAndName,d=c[a],g=i[i.length-1],b=e._cacheIndex;g._cacheIndex=b,i[b]=g,i.pop(),delete d[o],Object.keys(d).length===0&&delete c[a]}_lendBinding(e){let i=this._bindings,s=e._cacheIndex,a=this._nActiveBindings++,o=i[a];e._cacheIndex=a,i[a]=e,o._cacheIndex=s,i[s]=o}_takeBackBinding(e){let i=this._bindings,s=e._cacheIndex,a=--this._nActiveBindings,o=i[a];e._cacheIndex=a,i[a]=e,o._cacheIndex=s,i[s]=o}_lendControlInterpolant(){let e=this._controlInterpolants,i=this._nActiveControlInterpolants++,s=e[i];return s===void 0&&(s=new Cy(new Float32Array(2),new Float32Array(2),1,B4),s.__cacheIndex=i,e[i]=s),s}_takeBackControlInterpolant(e){let i=this._controlInterpolants,s=e.__cacheIndex,a=--this._nActiveControlInterpolants,o=i[a];e.__cacheIndex=a,i[a]=e,o.__cacheIndex=s,i[s]=o}clipAction(e,i,s){let a=i||this._root,o=a.uuid,c=typeof e=="string"?nh.findByName(a,e):e,d=c!==null?c.uuid:e,g=this._actionsByClip[d],b=null;if(s===void 0&&(c!==null?s=c.blendMode:s=Tw),g!==void 0){let _e=g.actionByRoot[o];if(_e!==void 0&&_e.blendMode===s)return _e;b=g.knownActions[0],c===null&&(c=b._clip)}if(c===null)return null;let j=new Sw(this,c,i,s);return this._bindAction(j,b),this._addInactiveAction(j,d,o),j}existingAction(e,i){let s=i||this._root,a=s.uuid,o=typeof e=="string"?nh.findByName(s,e):e,c=o?o.uuid:e,d=this._actionsByClip[c];return d!==void 0&&d.actionByRoot[a]||null}stopAllAction(){let e=this._actions,i=this._nActiveActions;for(let s=i-1;s>=0;--s)e[s].stop();return this}update(e){e*=this.timeScale;let i=this._actions,s=this._nActiveActions,a=this.time+=e,o=Math.sign(e),c=this._accuIndex^=1;for(let b=0;b!==s;++b)i[b]._update(a,e,o,c);let d=this._bindings,g=this._nActiveBindings;for(let b=0;b!==g;++b)d[b].apply(c);return this}setTime(e){this.time=0;for(let i=0;i<this._actions.length;i++)this._actions[i].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){let i=this._actions,s=e.uuid,a=this._actionsByClip,o=a[s];if(o!==void 0){let c=o.knownActions;for(let d=0,g=c.length;d!==g;++d){let b=c[d];this._deactivateAction(b);let j=b._cacheIndex,_e=i[i.length-1];b._cacheIndex=null,b._byClipCacheIndex=null,_e._cacheIndex=j,i[j]=_e,i.pop(),this._removeInactiveBindingsForAction(b)}delete a[s]}}uncacheRoot(e){let i=e.uuid,s=this._actionsByClip;for(let c in s){let d=s[c].actionByRoot,g=d[i];g!==void 0&&(this._deactivateAction(g),this._removeInactiveAction(g))}let a=this._bindingsByRootAndName,o=a[i];if(o!==void 0)for(let c in o){let d=o[c];d.restoreOriginalState(),this._removeInactiveBinding(d)}}uncacheAction(e,i){let s=this.existingAction(e,i);s!==null&&(this._deactivateAction(s),this._removeInactiveAction(s))}},he=class{constructor(e){this.value=e}clone(){return new he(this.value.clone===void 0?this.value:this.value.clone())}},ah=class{constructor(e,i,s=0,a=1/0){this.ray=new qs(e,i),this.near=s,this.far=a,this.camera=null,this.layers=new Ep,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,i){this.ray.set(e,i)}setFromCamera(e,i){i.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(i.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(i).sub(this.ray.origin).normalize(),this.camera=i):i.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(i.near+i.far)/(i.near-i.far)).unproject(i),this.ray.direction.set(0,0,-1).transformDirection(i.matrixWorld),this.camera=i):console.error("THREE.Raycaster: Unsupported camera type: "+i.type)}intersectObject(e,i=!0,s=[]){return ww(e,this,s,i),s.sort(LM),s}intersectObjects(e,i=!0,s=[]){for(let a=0,o=e.length;a<o;a++)ww(e[a],this,s,i);return s.sort(LM),s}};function LM(e,i){return e.distance-i.distance}function ww(e,i,s,a){if(e.layers.test(i.layers)&&e.raycast(i,s),a===!0){let o=e.children;for(let c=0,d=o.length;c<d;c++)ww(o[c],i,s,!0)}}var Fp=class{constructor(e=1,i=0,s=0){return this.radius=e,this.phi=i,this.theta=s,this}set(e,i,s){return this.radius=e,this.phi=i,this.theta=s,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,i,s){return this.radius=Math.sqrt(e*e+i*i+s*s),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,s),this.phi=Math.acos(gi(i/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}},BM=new z$1,lh=class{constructor(e=new z$1(1/0,1/0),i=new z$1(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=i}set(e,i){return this.min.copy(e),this.max.copy(i),this}setFromPoints(e){this.makeEmpty();for(let i=0,s=e.length;i<s;i++)this.expandByPoint(e[i]);return this}setFromCenterAndSize(e,i){let s=BM.copy(i).multiplyScalar(.5);return this.min.copy(e).sub(s),this.max.copy(e).add(s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,i){return i.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,i){return i.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return BM.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},NM=new _,cy=new _,Di=class{constructor(e=new _,i=new _){this.start=e,this.end=i}set(e,i){return this.start.copy(e),this.end.copy(i),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,i){return this.delta(i).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,i){NM.subVectors(e,this.start),cy.subVectors(this.end,this.start);let s=cy.dot(cy),a=cy.dot(NM)/s;return i&&(a=gi(a,0,1)),a}closestPointToPoint(e,i,s){let a=this.closestPointToPointParameter(e,i);return this.delta(s).multiplyScalar(a).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}},FM=new _,ky=class extends _t{constructor(e,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="SpotLightHelper";let s=new Pe,a=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let c=0,d=1,g=32;c<g;c++,d++){let b=c/g*Math.PI*2,j=d/g*Math.PI*2;a.push(Math.cos(b),Math.sin(b),1,Math.cos(j),Math.sin(j),1)}s.setAttribute("position",new Te(a,3));let o=new ys({fog:!1,toneMapped:!1});this.cone=new hl(s,o),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);let e=this.light.distance?this.light.distance:1e3,i=e*Math.tan(this.light.angle);this.cone.scale.set(i,i,e),FM.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(FM),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},Vy=class extends sr{constructor(e,i,s){let a=new Ys(i,4,2),o=new ts({wireframe:!0,fog:!1,toneMapped:!1});super(a,o),this.light=e,this.color=s,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},kM=new _,uy=new _,VM=new _,zy=class extends _t{constructor(e,i,s){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=s,this.type="DirectionalLightHelper",i===void 0&&(i=1);let a=new Pe;a.setAttribute("position",new Te([-i,i,0,i,i,0,i,-i,0,-i,-i,0,-i,i,0],3));let o=new ys({fog:!1,toneMapped:!1});this.lightPlane=new Ac(a,o),this.add(this.lightPlane),a=new Pe,a.setAttribute("position",new Te([0,0,0,0,0,1],3)),this.targetLine=new Ac(a,o),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),kM.setFromMatrixPosition(this.light.matrixWorld),uy.setFromMatrixPosition(this.light.target.matrixWorld),VM.subVectors(uy,kM),this.lightPlane.lookAt(uy),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(uy),this.targetLine.scale.z=VM.length()}},hy=new _,Xr=new rs,yl=class extends hl{constructor(e){let i=new Pe,s=new ys({color:16777215,vertexColors:!0,toneMapped:!1}),a=[],o=[],c={};d("n1","n2"),d("n2","n4"),d("n4","n3"),d("n3","n1"),d("f1","f2"),d("f2","f4"),d("f4","f3"),d("f3","f1"),d("n1","f1"),d("n2","f2"),d("n3","f3"),d("n4","f4"),d("p","n1"),d("p","n2"),d("p","n3"),d("p","n4"),d("u1","u2"),d("u2","u3"),d("u3","u1"),d("c","t"),d("p","c"),d("cn1","cn2"),d("cn3","cn4"),d("cf1","cf2"),d("cf3","cf4");function d(st,ut){g(st),g(ut)}function g(st){a.push(0,0,0),o.push(0,0,0),c[st]===void 0&&(c[st]=[]),c[st].push(a.length/3-1)}i.setAttribute("position",new Te(a,3)),i.setAttribute("color",new Te(o,3)),super(i,s),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=c,this.update();let b=new We(16755200),j=new We(16711680),_e=new We(43775),$=new We(16777215),rt=new We(3355443);this.setColors(b,j,_e,$,rt)}setColors(e,i,s,a,o){let c=this.geometry.getAttribute("color");c.setXYZ(0,e.r,e.g,e.b),c.setXYZ(1,e.r,e.g,e.b),c.setXYZ(2,e.r,e.g,e.b),c.setXYZ(3,e.r,e.g,e.b),c.setXYZ(4,e.r,e.g,e.b),c.setXYZ(5,e.r,e.g,e.b),c.setXYZ(6,e.r,e.g,e.b),c.setXYZ(7,e.r,e.g,e.b),c.setXYZ(8,e.r,e.g,e.b),c.setXYZ(9,e.r,e.g,e.b),c.setXYZ(10,e.r,e.g,e.b),c.setXYZ(11,e.r,e.g,e.b),c.setXYZ(12,e.r,e.g,e.b),c.setXYZ(13,e.r,e.g,e.b),c.setXYZ(14,e.r,e.g,e.b),c.setXYZ(15,e.r,e.g,e.b),c.setXYZ(16,e.r,e.g,e.b),c.setXYZ(17,e.r,e.g,e.b),c.setXYZ(18,e.r,e.g,e.b),c.setXYZ(19,e.r,e.g,e.b),c.setXYZ(20,e.r,e.g,e.b),c.setXYZ(21,e.r,e.g,e.b),c.setXYZ(22,e.r,e.g,e.b),c.setXYZ(23,e.r,e.g,e.b),c.setXYZ(24,i.r,i.g,i.b),c.setXYZ(25,i.r,i.g,i.b),c.setXYZ(26,i.r,i.g,i.b),c.setXYZ(27,i.r,i.g,i.b),c.setXYZ(28,i.r,i.g,i.b),c.setXYZ(29,i.r,i.g,i.b),c.setXYZ(30,i.r,i.g,i.b),c.setXYZ(31,i.r,i.g,i.b),c.setXYZ(32,s.r,s.g,s.b),c.setXYZ(33,s.r,s.g,s.b),c.setXYZ(34,s.r,s.g,s.b),c.setXYZ(35,s.r,s.g,s.b),c.setXYZ(36,s.r,s.g,s.b),c.setXYZ(37,s.r,s.g,s.b),c.setXYZ(38,a.r,a.g,a.b),c.setXYZ(39,a.r,a.g,a.b),c.setXYZ(40,o.r,o.g,o.b),c.setXYZ(41,o.r,o.g,o.b),c.setXYZ(42,o.r,o.g,o.b),c.setXYZ(43,o.r,o.g,o.b),c.setXYZ(44,o.r,o.g,o.b),c.setXYZ(45,o.r,o.g,o.b),c.setXYZ(46,o.r,o.g,o.b),c.setXYZ(47,o.r,o.g,o.b),c.setXYZ(48,o.r,o.g,o.b),c.setXYZ(49,o.r,o.g,o.b),c.needsUpdate=!0}update(){let e=this.geometry,i=this.pointMap,s=1,a=1;Xr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),ti("c",i,e,Xr,0,0,-1),ti("t",i,e,Xr,0,0,1),ti("n1",i,e,Xr,-s,-a,-1),ti("n2",i,e,Xr,s,-a,-1),ti("n3",i,e,Xr,-s,a,-1),ti("n4",i,e,Xr,s,a,-1),ti("f1",i,e,Xr,-s,-a,1),ti("f2",i,e,Xr,s,-a,1),ti("f3",i,e,Xr,-s,a,1),ti("f4",i,e,Xr,s,a,1),ti("u1",i,e,Xr,s*.7,a*1.1,-1),ti("u2",i,e,Xr,-s*.7,a*1.1,-1),ti("u3",i,e,Xr,0,a*2,-1),ti("cf1",i,e,Xr,-s,0,1),ti("cf2",i,e,Xr,s,0,1),ti("cf3",i,e,Xr,0,-a,1),ti("cf4",i,e,Xr,0,a,1),ti("cn1",i,e,Xr,-s,0,-1),ti("cn2",i,e,Xr,s,0,-1),ti("cn3",i,e,Xr,0,-a,-1),ti("cn4",i,e,Xr,0,a,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function ti(e,i,s,a,o,c,d){hy.set(o,c,d).unproject(a);let g=i[e];if(g!==void 0){let b=s.getAttribute("position");for(let j=0,_e=g.length;j<_e;j++)b.setXYZ(g[j],hy.x,hy.y,hy.z)}}var vl=class extends hl{constructor(e,i=16776960){let s=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],o=new Pe;o.setIndex(new Xe(s,1)),o.setAttribute("position",new Te(a,3)),super(o,new ys({color:i,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){let i=this.box;i.isEmpty()||(i.getCenter(this.position),i.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}},Uy=class extends hl{constructor(e=1){let i=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],s=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],a=new Pe;a.setAttribute("position",new Te(i,3)),a.setAttribute("color",new Te(s,3));let o=new ys({vertexColors:!0,toneMapped:!1});super(a,o),this.type="AxesHelper"}setColors(e,i,s){let a=new We,o=this.geometry.attributes.color.array;return a.set(e),a.toArray(o,0),a.toArray(o,3),a.set(i),a.toArray(o,6),a.toArray(o,9),a.set(s),a.toArray(o,12),a.toArray(o,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}},ga=N4();function N4(){let e=new ArrayBuffer(4),i=new Float32Array(e),s=new Uint32Array(e),a=new Uint32Array(512),o=new Uint32Array(512);for(let b=0;b<256;++b){let j=b-127;j<-27?(a[b]=0,a[b|256]=32768,o[b]=24,o[b|256]=24):j<-14?(a[b]=1024>>-j-14,a[b|256]=1024>>-j-14|32768,o[b]=-j-1,o[b|256]=-j-1):j<=15?(a[b]=j+15<<10,a[b|256]=j+15<<10|32768,o[b]=13,o[b|256]=13):j<128?(a[b]=31744,a[b|256]=64512,o[b]=24,o[b|256]=24):(a[b]=31744,a[b|256]=64512,o[b]=13,o[b|256]=13)}let c=new Uint32Array(2048),d=new Uint32Array(64),g=new Uint32Array(64);for(let b=1;b<1024;++b){let j=b<<13,_e=0;for(;!(j&8388608);)j<<=1,_e-=8388608;j&=-8388609,_e+=947912704,c[b]=j|_e}for(let b=1024;b<2048;++b)c[b]=939524096+(b-1024<<13);for(let b=1;b<31;++b)d[b]=b<<23;d[31]=1199570944,d[32]=2147483648;for(let b=33;b<63;++b)d[b]=2147483648+(b-32<<23);d[63]=3347054592;for(let b=1;b<64;++b)b!==32&&(g[b]=1024);return{floatView:i,uint32View:s,baseTable:a,shiftTable:o,mantissaTable:c,exponentTable:d,offsetTable:g}}function F4(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=gi(e,-65504,65504),ga.floatView[0]=e;let i=ga.uint32View[0],s=i>>23&511;return ga.baseTable[s]+((i&8388607)>>ga.shiftTable[s])}function k4(e){let i=e>>10;return ga.uint32View[0]=ga.mantissaTable[ga.offsetTable[i]+(e&1023)]+ga.exponentTable[i],ga.floatView[0]}var oC=Object.freeze({__proto__:null,fromHalfFloat:k4,toHalfFloat:F4});typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:ba}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=ba);var dh=".",Vp=Symbol("target"),Lw=Symbol("unsubscribe");function zp(e){return e instanceof Date||e instanceof Set||e instanceof Map||e instanceof WeakSet||e instanceof WeakMap||ArrayBuffer.isView(e)}function aC(e){return(typeof e=="object"?e===null:typeof e!="function")||e instanceof RegExp}var ss=Array.isArray;function Dc(e){return typeof e=="symbol"}var V4={after:(e,i)=>ss(e)?e.slice(i.length):i===""?e:e.slice(i.length+1),concat:(e,i)=>ss(e)?(e=[...e],i&&e.push(i),e):i&&i.toString!==void 0?(e!==""&&(e+=dh),Dc(i)?e+i.toString():e+i):e,initial:e=>{if(ss(e))return e.slice(0,-1);if(e==="")return e;let i=e.lastIndexOf(dh);return i===-1?"":e.slice(0,i)},last:e=>{if(ss(e))return e[e.length-1]||"";if(e==="")return e;let i=e.lastIndexOf(dh);return i===-1?e:e.slice(i+1)},walk:(e,i)=>{if(ss(e))for(let s of e)i(s);else if(e!==""){let s=0,a=e.indexOf(dh);if(a===-1)i(e);else for(;s<e.length;)a===-1&&(a=e.length),i(e.slice(s,a)),s=a+1,a=e.indexOf(dh,s)}},get(e,i){return this.walk(i,s=>{e&&(e=e[s])}),e}},An=V4;function Bw(e){return typeof e=="object"&&typeof e.next=="function"}function Nw(e,i,s,a,o){let c=e.next;if(i.name==="entries")e.next=function(){let d=c.call(this);return d.done===!1&&(d.value[0]=o(d.value[0],i,d.value[0],a),d.value[1]=o(d.value[1],i,d.value[0],a)),d};else if(i.name==="values"){let d=s[Vp].keys();e.next=function(){let g=c.call(this);return g.done===!1&&(g.value=o(g.value,i,d.next().value,a)),g}}else e.next=function(){let d=c.call(this);return d.done===!1&&(d.value=o(d.value,i,d.value,a)),d};return e}function Wy(e,i,s){return e.isUnsubscribed||i.ignoreSymbols&&Dc(s)||i.ignoreUnderscores&&s.charAt(0)==="_"||"ignoreKeys"in i&&i.ignoreKeys.includes(s)}var Up=class{constructor(e){this._equals=e,this._proxyCache=new WeakMap,this._pathCache=new WeakMap,this.isUnsubscribed=!1}_getDescriptorCache(){return this._descriptorCache===void 0&&(this._descriptorCache=new WeakMap),this._descriptorCache}_getProperties(e){let i=this._getDescriptorCache(),s=i.get(e);return s===void 0&&(s={},i.set(e,s)),s}_getOwnPropertyDescriptor(e,i){if(this.isUnsubscribed)return Reflect.getOwnPropertyDescriptor(e,i);let s=this._getProperties(e),a=s[i];return a===void 0&&(a=Reflect.getOwnPropertyDescriptor(e,i),s[i]=a),a}getProxy(e,i,s,a){if(this.isUnsubscribed)return e;let o=e[a],c=o||e;this._pathCache.set(c,i);let d=this._proxyCache.get(c);return d===void 0&&(d=o===void 0?new Proxy(e,s):e,this._proxyCache.set(c,d)),d}getPath(e){return this.isUnsubscribed?void 0:this._pathCache.get(e)}isDetached(e,i){return!Object.is(e,An.get(i,this.getPath(e)))}defineProperty(e,i,s){return Reflect.defineProperty(e,i,s)?(this.isUnsubscribed||(this._getProperties(e)[i]=s),!0):!1}setProperty(e,i,s,a,o){if(!this._equals(o,s)||!(i in e)){let c=this._getOwnPropertyDescriptor(e,i);return c!==void 0&&"set"in c?Reflect.set(e,i,s,a):Reflect.set(e,i,s)}return!0}deleteProperty(e,i,s){if(Reflect.deleteProperty(e,i)){if(!this.isUnsubscribed){let a=this._getDescriptorCache().get(e);a&&(delete a[i],this._pathCache.delete(s))}return!0}return!1}isSameDescriptor(e,i,s){let a=this._getOwnPropertyDescriptor(i,s);return e!==void 0&&a!==void 0&&Object.is(e.value,a.value)&&(e.writable||!1)===(a.writable||!1)&&(e.enumerable||!1)===(a.enumerable||!1)&&(e.configurable||!1)===(a.configurable||!1)&&e.get===a.get&&e.set===a.set}isGetInvariant(e,i){let s=this._getOwnPropertyDescriptor(e,i);return s!==void 0&&s.configurable!==!0&&s.writable!==!0}unsubscribe(){this._descriptorCache=null,this._pathCache=null,this._proxyCache=null,this.isUnsubscribed=!0}};function fh(e){return toString.call(e)==="[object Object]"}function ph(){return!0}function xl(e,i){return e.length!==i.length||e.some((s,a)=>i[a]!==s)}var qy=new Set(["hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),z4=new Set(["concat","includes","indexOf","join","keys","lastIndexOf"]),Fw={push:ph,pop:ph,shift:ph,unshift:ph,copyWithin:xl,reverse:xl,sort:xl,splice:xl,flat:xl,fill:xl},lC=new Set([...qy,...z4,...Object.keys(Fw)]);function mh(e,i){if(e.size!==i.size)return!0;for(let s of e)if(!i.has(s))return!0;return!1}var kw=["keys","values","entries"],Vw=new Set(["has","toString"]),zw={add:mh,clear:mh,delete:mh,forEach:mh},cC=new Set([...Vw,...Object.keys(zw),...kw]);function gh(e,i){if(e.size!==i.size)return!0;let s;for(let[a,o]of e)if(s=i.get(a),s!==o||s===void 0&&!i.has(a))return!0;return!1}var U4=new Set([...Vw,"get"]),Uw={set:gh,clear:gh,delete:gh,forEach:gh},uC=new Set([...U4,...Object.keys(Uw),...kw]),Hi=class{constructor(e,i,s,a){this._path=i,this._isChanged=!1,this._clonedCache=new Set,this._hasOnValidate=a,this._changes=a?[]:null,this.clone=i===void 0?e:this._shallowClone(e)}static isHandledMethod(e){return qy.has(e)}_shallowClone(e){let i=e;if(fh(e))i={...e};else if(ss(e))i=[...e];else if(e instanceof Date)i=new Date(e);else if(e instanceof Set)i=new Set([...e].map(s=>this._shallowClone(s)));else if(e instanceof Map){i=new Map;for(let[s,a]of e.entries())i.set(s,this._shallowClone(a))}return this._clonedCache.add(i),i}preferredThisArg(e,i,s,a){return e?(ss(a)?this._onIsChanged=Fw[i]:a instanceof Set?this._onIsChanged=zw[i]:a instanceof Map&&(this._onIsChanged=Uw[i]),a):s}update(e,i,s){let a=An.after(e,this._path);if(i!=="length"){let o=this.clone;An.walk(a,c=>{o&&o[c]&&(this._clonedCache.has(o[c])||(o[c]=this._shallowClone(o[c])),o=o[c])}),this._hasOnValidate&&this._changes.push({path:a,property:i,previous:s}),o&&o[i]&&(o[i]=s)}this._isChanged=!0}undo(e){let i;for(let s=this._changes.length-1;s!==-1;s--)i=this._changes[s],An.get(e,i.path)[i.property]=i.previous}isChanged(e){return this._onIsChanged===void 0?this._isChanged:this._onIsChanged(this.clone,e)}},yh=class extends Hi{static isHandledMethod(e){return lC.has(e)}},Gp=class extends Hi{undo(e){e.setTime(this.clone.getTime())}isChanged(e,i){return!i(this.clone.valueOf(),e.valueOf())}},vh=class extends Hi{static isHandledMethod(e){return cC.has(e)}undo(e){for(let i of this.clone)e.add(i);for(let i of e)this.clone.has(i)||e.delete(i)}},xh=class extends Hi{static isHandledMethod(e){return uC.has(e)}undo(e){for(let[i,s]of this.clone.entries())e.set(i,s);for(let i of e.keys())this.clone.has(i)||e.delete(i)}},jp=class extends Hi{constructor(e,i,s,a){super(void 0,i,s,a),this._arg1=s[0],this._weakValue=e.has(this._arg1)}isChanged(e){return this._weakValue!==e.has(this._arg1)}undo(e){this._weakValue&&!e.has(this._arg1)?e.add(this._arg1):e.delete(this._arg1)}},Hp=class extends Hi{constructor(e,i,s,a){super(void 0,i,s,a),this._weakKey=s[0],this._weakHas=e.has(this._weakKey),this._weakValue=e.get(this._weakKey)}isChanged(e){return this._weakValue!==e.get(this._weakKey)}undo(e){let i=e.has(this._weakKey);this._weakHas&&!i?e.set(this._weakKey,this._weakValue):!this._weakHas&&i?e.delete(this._weakKey):this._weakValue!==e.get(this._weakKey)&&e.set(this._weakKey,this._weakValue)}},Qs=class{constructor(e){this._stack=[],this._hasOnValidate=e}static isHandledType(e){return fh(e)||ss(e)||zp(e)}static isHandledMethod(e,i){return fh(e)?Hi.isHandledMethod(i):ss(e)?yh.isHandledMethod(i):e instanceof Set?vh.isHandledMethod(i):e instanceof Map?xh.isHandledMethod(i):zp(e)}get isCloning(){return this._stack.length>0}start(e,i,s){let a=Hi;ss(e)?a=yh:e instanceof Date?a=Gp:e instanceof Set?a=vh:e instanceof Map?a=xh:e instanceof WeakSet?a=jp:e instanceof WeakMap&&(a=Hp),this._stack.push(new a(e,i,s,this._hasOnValidate))}update(e,i,s){this._stack[this._stack.length-1].update(e,i,s)}preferredThisArg(e,i,s){let{name:a}=e,o=Qs.isHandledMethod(s,a);return this._stack[this._stack.length-1].preferredThisArg(o,a,i,s)}isChanged(e,i,s){return this._stack[this._stack.length-1].isChanged(e,i,s)}undo(e){this._previousClone!==void 0&&this._previousClone.undo(e)}stop(){return this._previousClone=this._stack.pop(),this._previousClone.clone}},G4={equals:Object.is,isShallow:!1,pathAsArray:!1,ignoreSymbols:!1,ignoreUnderscores:!1,ignoreDetached:!1,details:!1},Gw=(e,i,s={})=>{s={...G4,...s};let a=Symbol("ProxyTarget"),{equals:o,isShallow:c,ignoreDetached:d,details:g}=s,b=new Up(o),j=typeof s.onValidate=="function",_e=new Qs(j),$=(At,Ct,Tt,kt,Pt)=>!j||_e.isCloning||s.onValidate(An.concat(b.getPath(At),Ct),Tt,kt,Pt)===!0,rt=(At,Ct,Tt,kt)=>{!Wy(b,s,Ct)&&!(d&&b.isDetached(At,e))&&st(b.getPath(At),Ct,Tt,kt)},st=(At,Ct,Tt,kt,Pt)=>{_e.isCloning?_e.update(At,Ct,kt):i(An.concat(At,Ct),Tt,kt,Pt)},ut=At=>At&&(At[a]||At),gt=(At,Ct,Tt,kt)=>aC(At)||Tt==="constructor"||c&&!Qs.isHandledMethod(Ct,Tt)||Wy(b,s,Tt)||b.isGetInvariant(Ct,Tt)||d&&b.isDetached(Ct,e)?At:(kt===void 0&&(kt=b.getPath(Ct)),b.getProxy(At,An.concat(kt,Tt),wt,a)),wt={get(At,Ct,Tt){if(Dc(Ct)){if(Ct===a||Ct===Vp)return At;if(Ct===Lw&&!b.isUnsubscribed&&b.getPath(At).length===0)return b.unsubscribe(),At}let kt=zp(At)?Reflect.get(At,Ct):Reflect.get(At,Ct,Tt);return gt(kt,At,Ct)},set(At,Ct,Tt,kt){Tt=ut(Tt);let Pt=At[a]||At,It=Pt[Ct];if(o(It,Tt)&&Ct in At)return!0;let Lt=$(At,Ct,Tt,It);return Lt&&b.setProperty(Pt,Ct,Tt,kt,It)?(rt(At,Ct,At[Ct],It),!0):!Lt},defineProperty(At,Ct,Tt){if(!b.isSameDescriptor(Tt,At,Ct)){let kt=At[Ct];$(At,Ct,Tt.value,kt)&&b.defineProperty(At,Ct,Tt,kt)&&rt(At,Ct,Tt.value,kt)}return!0},deleteProperty(At,Ct){if(!Reflect.has(At,Ct))return!0;let Tt=Reflect.get(At,Ct),kt=$(At,Ct,void 0,Tt);return kt&&b.deleteProperty(At,Ct,Tt)?(rt(At,Ct,void 0,Tt),!0):!kt},apply(At,Ct,Tt){let kt=Ct[a]||Ct;if(b.isUnsubscribed)return Reflect.apply(At,kt,Tt);if((g===!1||g!==!0&&!g.includes(At.name))&&Qs.isHandledType(kt)){let Pt=An.initial(b.getPath(At)),It=Qs.isHandledMethod(kt,At.name);_e.start(kt,Pt,Tt);let Lt=Reflect.apply(At,_e.preferredThisArg(At,Ct,kt),It?Tt.map(dr=>ut(dr)):Tt),Nt=_e.isChanged(kt,o),Ht=_e.stop();if(Qs.isHandledType(Lt)&&It&&(Ct instanceof Map&&At.name==="get"&&(Pt=An.concat(Pt,Tt[0])),Lt=b.getProxy(Lt,Pt,wt)),Nt){let dr={name:At.name,args:Tt,result:Lt},hs=_e.isCloning?An.initial(Pt):Pt,_s=_e.isCloning?An.last(Pt):"";$(An.get(e,hs),_s,kt,Ht,dr)?st(hs,_s,kt,Ht,dr):_e.undo(kt)}return(Ct instanceof Map||Ct instanceof Set)&&Bw(Lt)?Nw(Lt,At,Ct,Pt,gt):Lt}return Reflect.apply(At,Ct,Tt)}},yt=b.getProxy(e,s.pathAsArray?[]:"",wt);return i=i.bind(yt),j&&(s.onValidate=s.onValidate.bind(yt)),yt};Gw.target=e=>e&&e[Vp]||e;Gw.unsubscribe=e=>e[Lw]||e;var jw=Gw,j4=typeof global=="object"&&global&&global.Object===Object&&global,Yy=j4,H4=typeof self=="object"&&self&&self.Object===Object&&self,W4=Yy||H4||Function("return this")(),Kr=W4,q4=Kr.Symbol,Wi=q4,hC=Object.prototype,Y4=hC.hasOwnProperty,X4=hC.toString,Wp=Wi?Wi.toStringTag:void 0;function Q4(e){var i=Y4.call(e,Wp),s=e[Wp];try{e[Wp]=void 0;var a=!0}catch{}var o=X4.call(e);return a&&(i?e[Wp]=s:delete e[Wp]),o}var dC=Q4,K4=Object.prototype,Z4=K4.toString;function J4(e){return Z4.call(e)}var fC=J4,$4="[object Null]",ej="[object Undefined]",pC=Wi?Wi.toStringTag:void 0;function tj(e){return e==null?e===void 0?ej:$4:pC&&pC in Object(e)?dC(e):fC(e)}var os=tj;function rj(e){return e!=null&&typeof e=="object"}var rn=rj,ij="[object Symbol]";function nj(e){return typeof e=="symbol"||rn(e)&&os(e)==ij}var bl=nj;function sj(e,i){for(var s=-1,a=e==null?0:e.length,o=Array(a);++s<a;)o[s]=i(e[s],s,e);return o}var Xy=sj,oj=Array.isArray,Oi=oj,aj=1/0,mC=Wi?Wi.prototype:void 0,gC=mC?mC.toString:void 0;function yC(e){if(typeof e=="string")return e;if(Oi(e))return Xy(e,yC)+"";if(bl(e))return gC?gC.call(e):"";var i=e+"";return i=="0"&&1/e==-aj?"-0":i}var vC=yC,lj=/\s/;function cj(e){for(var i=e.length;i--&&lj.test(e.charAt(i)););return i}var xC=cj,uj=/^\s+/;function hj(e){return e&&e.slice(0,xC(e)+1).replace(uj,"")}var bC=hj;function dj(e){var i=typeof e;return e!=null&&(i=="object"||i=="function")}var bi=dj,SC=NaN,fj=/^[-+]0x[0-9a-f]+$/i,pj=/^0b[01]+$/i,mj=/^0o[0-7]+$/i,gj=parseInt;function yj(e){if(typeof e=="number")return e;if(bl(e))return SC;if(bi(e)){var i=typeof e.valueOf=="function"?e.valueOf():e;e=bi(i)?i+"":i}if(typeof e!="string")return e===0?e:+e;e=bC(e);var s=pj.test(e);return s||mj.test(e)?gj(e.slice(2),s?2:8):fj.test(e)?SC:+e}var Hw=yj;function vj(e){return e}var wC=vj,xj="[object AsyncFunction]",bj="[object Function]",Sj="[object GeneratorFunction]",wj="[object Proxy]";function Aj(e){if(!bi(e))return!1;var i=os(e);return i==bj||i==Sj||i==xj||i==wj}var Qy=Aj,_j=Kr["__core-js_shared__"],Ky=_j,AC=function(){var e=/[^.]+$/.exec(Ky&&Ky.keys&&Ky.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Ej(e){return!!AC&&AC in e}var _C=Ej,Tj=Function.prototype,Mj=Tj.toString;function Cj(e){if(e!=null){try{return Mj.call(e)}catch{}try{return e+""}catch{}}return""}var Sa=Cj,Pj=/[\\^$.*+?()[\]{}|]/g,Dj=/^\[object .+?Constructor\]$/,Oj=Function.prototype,Ij=Object.prototype,Rj=Oj.toString,Lj=Ij.hasOwnProperty,Bj=RegExp("^"+Rj.call(Lj).replace(Pj,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Nj(e){if(!bi(e)||_C(e))return!1;var i=Qy(e)?Bj:Dj;return i.test(Sa(e))}var EC=Nj;function Fj(e,i){return e==null?void 0:e[i]}var TC=Fj;function kj(e,i){var s=TC(e,i);return EC(s)?s:void 0}var Fn=kj,Vj=Fn(Kr,"WeakMap"),Zy=Vj,MC=Object.create,zj=function(){function e(){}return function(i){if(!bi(i))return{};if(MC)return MC(i);e.prototype=i;var s=new e;return e.prototype=void 0,s}}(),CC=zj;function Uj(e,i,s){switch(s.length){case 0:return e.call(i);case 1:return e.call(i,s[0]);case 2:return e.call(i,s[0],s[1]);case 3:return e.call(i,s[0],s[1],s[2])}return e.apply(i,s)}var PC=Uj;function Gj(e,i){var s=-1,a=e.length;for(i||(i=Array(a));++s<a;)i[s]=e[s];return i}var DC=Gj,jj=800,Hj=16,Wj=Date.now;function qj(e){var i=0,s=0;return function(){var a=Wj(),o=Hj-(a-s);if(s=a,o>0){if(++i>=jj)return arguments[0]}else i=0;return e.apply(void 0,arguments)}}var OC=qj;function Yj(e){return function(){return e}}var IC=Yj,Xj=function(){try{var e=Fn(Object,"defineProperty");return e({},"",{}),e}catch{}}(),bh=Xj,Qj=bh?function(e,i){return bh(e,"toString",{configurable:!0,enumerable:!1,value:IC(i),writable:!0})}:wC,RC=Qj,Kj=OC(RC),LC=Kj;function Zj(e,i){for(var s=-1,a=e==null?0:e.length;++s<a&&i(e[s],s,e)!==!1;);return e}var BC=Zj,Jj=9007199254740991,$j=/^(?:0|[1-9]\d*)$/;function eH(e,i){var s=typeof e;return i=i??Jj,!!i&&(s=="number"||s!="symbol"&&$j.test(e))&&e>-1&&e%1==0&&e<i}var Sh=eH;function tH(e,i,s){i=="__proto__"&&bh?bh(e,i,{configurable:!0,enumerable:!0,value:s,writable:!0}):e[i]=s}var Jy=tH;function rH(e,i){return e===i||e!==e&&i!==i}var wh=rH,iH=Object.prototype,nH=iH.hasOwnProperty;function sH(e,i,s){var a=e[i];(!(nH.call(e,i)&&wh(a,s))||s===void 0&&!(i in e))&&Jy(e,i,s)}var Ah=sH;function oH(e,i,s,a){var o=!s;s||(s={});for(var c=-1,d=i.length;++c<d;){var g=i[c],b=a?a(s[g],e[g],g,s,e):void 0;b===void 0&&(b=e[g]),o?Jy(s,g,b):Ah(s,g,b)}return s}var To=oH,NC=Math.max;function aH(e,i,s){return i=NC(i===void 0?e.length-1:i,0),function(){for(var a=arguments,o=-1,c=NC(a.length-i,0),d=Array(c);++o<c;)d[o]=a[i+o];o=-1;for(var g=Array(i+1);++o<i;)g[o]=a[o];return g[i]=s(d),PC(e,this,g)}}var FC=aH,lH=9007199254740991;function cH(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=lH}var _h=cH;function uH(e){return e!=null&&_h(e.length)&&!Qy(e)}var $y=uH,hH=Object.prototype;function dH(e){var i=e&&e.constructor,s=typeof i=="function"&&i.prototype||hH;return e===s}var Eh=dH;function fH(e,i){for(var s=-1,a=Array(e);++s<e;)a[s]=i(s);return a}var kC=fH,pH="[object Arguments]";function mH(e){return rn(e)&&os(e)==pH}var Ww=mH,VC=Object.prototype,gH=VC.hasOwnProperty,yH=VC.propertyIsEnumerable,vH=Ww(function(){return arguments}())?Ww:function(e){return rn(e)&&gH.call(e,"callee")&&!yH.call(e,"callee")},Th=vH;function xH(){return!1}var zC=xH,jC=typeof exports=="object"&&exports&&!exports.nodeType&&exports,UC=jC&&typeof module=="object"&&module&&!module.nodeType&&module,bH=UC&&UC.exports===jC,GC=bH?Kr.Buffer:void 0,SH=GC?GC.isBuffer:void 0,wH=SH||zC,Oc=wH,AH="[object Arguments]",_H="[object Array]",EH="[object Boolean]",TH="[object Date]",MH="[object Error]",CH="[object Function]",PH="[object Map]",DH="[object Number]",OH="[object Object]",IH="[object RegExp]",RH="[object Set]",LH="[object String]",BH="[object WeakMap]",NH="[object ArrayBuffer]",FH="[object DataView]",kH="[object Float32Array]",VH="[object Float64Array]",zH="[object Int8Array]",UH="[object Int16Array]",GH="[object Int32Array]",jH="[object Uint8Array]",HH="[object Uint8ClampedArray]",WH="[object Uint16Array]",qH="[object Uint32Array]",Rr$1={};Rr$1[kH]=Rr$1[VH]=Rr$1[zH]=Rr$1[UH]=Rr$1[GH]=Rr$1[jH]=Rr$1[HH]=Rr$1[WH]=Rr$1[qH]=!0;Rr$1[AH]=Rr$1[_H]=Rr$1[NH]=Rr$1[EH]=Rr$1[FH]=Rr$1[TH]=Rr$1[MH]=Rr$1[CH]=Rr$1[PH]=Rr$1[DH]=Rr$1[OH]=Rr$1[IH]=Rr$1[RH]=Rr$1[LH]=Rr$1[BH]=!1;function YH(e){return rn(e)&&_h(e.length)&&!!Rr$1[os(e)]}var HC=YH;function XH(e){return function(i){return e(i)}}var Mh=XH,WC=typeof exports=="object"&&exports&&!exports.nodeType&&exports,qp=WC&&typeof module=="object"&&module&&!module.nodeType&&module,QH=qp&&qp.exports===WC,qw=QH&&Yy.process,KH=function(){try{var e=qp&&qp.require&&qp.require("util").types;return e||qw&&qw.binding&&qw.binding("util")}catch{}}(),wa=KH,qC=wa&&wa.isTypedArray,ZH=qC?Mh(qC):HC,ev=ZH,JH=Object.prototype,$H=JH.hasOwnProperty;function e5(e,i){var s=Oi(e),a=!s&&Th(e),o=!s&&!a&&Oc(e),c=!s&&!a&&!o&&ev(e),d=s||a||o||c,g=d?kC(e.length,String):[],b=g.length;for(var j in e)(i||$H.call(e,j))&&!(d&&(j=="length"||o&&(j=="offset"||j=="parent")||c&&(j=="buffer"||j=="byteLength"||j=="byteOffset")||Sh(j,b)))&&g.push(j);return g}var tv=e5;function t5(e,i){return function(s){return e(i(s))}}var rv=t5,r5=rv(Object.keys,Object),YC=r5,i5=Object.prototype,n5=i5.hasOwnProperty;function s5(e){if(!Eh(e))return YC(e);var i=[];for(var s in Object(e))n5.call(e,s)&&s!="constructor"&&i.push(s);return i}var XC=s5;function o5(e){return $y(e)?tv(e):XC(e)}var Ch=o5;function a5(e){var i=[];if(e!=null)for(var s in Object(e))i.push(s);return i}var QC=a5,l5=Object.prototype,c5=l5.hasOwnProperty;function u5(e){if(!bi(e))return QC(e);var i=Eh(e),s=[];for(var a in e)a=="constructor"&&(i||!c5.call(e,a))||s.push(a);return s}var KC=u5;function h5(e){return $y(e)?tv(e,!0):KC(e)}var bs=h5,d5=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,f5=/^\w*$/;function p5(e,i){if(Oi(e))return!1;var s=typeof e;return s=="number"||s=="symbol"||s=="boolean"||e==null||bl(e)?!0:f5.test(e)||!d5.test(e)||i!=null&&e in Object(i)}var ZC=p5,m5=Fn(Object,"create"),Aa=m5;function g5(){this.__data__=Aa?Aa(null):{},this.size=0}var JC=g5;function y5(e){var i=this.has(e)&&delete this.__data__[e];return this.size-=i?1:0,i}var $C=y5,v5="__lodash_hash_undefined__",x5=Object.prototype,b5=x5.hasOwnProperty;function S5(e){var i=this.__data__;if(Aa){var s=i[e];return s===v5?void 0:s}return b5.call(i,e)?i[e]:void 0}var eP=S5,w5=Object.prototype,A5=w5.hasOwnProperty;function _5(e){var i=this.__data__;return Aa?i[e]!==void 0:A5.call(i,e)}var tP=_5,E5="__lodash_hash_undefined__";function T5(e,i){var s=this.__data__;return this.size+=this.has(e)?0:1,s[e]=Aa&&i===void 0?E5:i,this}var rP=T5;function Ph(e){var i=-1,s=e==null?0:e.length;for(this.clear();++i<s;){var a=e[i];this.set(a[0],a[1])}}Ph.prototype.clear=JC;Ph.prototype.delete=$C;Ph.prototype.get=eP;Ph.prototype.has=tP;Ph.prototype.set=rP;var Yw=Ph;function M5(){this.__data__=[],this.size=0}var iP=M5;function C5(e,i){for(var s=e.length;s--;)if(wh(e[s][0],i))return s;return-1}var Sl=C5,P5=Array.prototype,D5=P5.splice;function O5(e){var i=this.__data__,s=Sl(i,e);if(s<0)return!1;var a=i.length-1;return s==a?i.pop():D5.call(i,s,1),--this.size,!0}var nP=O5;function I5(e){var i=this.__data__,s=Sl(i,e);return s<0?void 0:i[s][1]}var sP=I5;function R5(e){return Sl(this.__data__,e)>-1}var oP=R5;function L5(e,i){var s=this.__data__,a=Sl(s,e);return a<0?(++this.size,s.push([e,i])):s[a][1]=i,this}var aP=L5;function Dh(e){var i=-1,s=e==null?0:e.length;for(this.clear();++i<s;){var a=e[i];this.set(a[0],a[1])}}Dh.prototype.clear=iP;Dh.prototype.delete=nP;Dh.prototype.get=sP;Dh.prototype.has=oP;Dh.prototype.set=aP;var wl=Dh,B5=Fn(Kr,"Map"),Al=B5;function N5(){this.size=0,this.__data__={hash:new Yw,map:new(Al||wl),string:new Yw}}var lP=N5;function F5(e){var i=typeof e;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?e!=="__proto__":e===null}var cP=F5;function k5(e,i){var s=e.__data__;return cP(i)?s[typeof i=="string"?"string":"hash"]:s.map}var _l=k5;function V5(e){var i=_l(this,e).delete(e);return this.size-=i?1:0,i}var uP=V5;function z5(e){return _l(this,e).get(e)}var hP=z5;function U5(e){return _l(this,e).has(e)}var dP=U5;function G5(e,i){var s=_l(this,e),a=s.size;return s.set(e,i),this.size+=s.size==a?0:1,this}var fP=G5;function Oh(e){var i=-1,s=e==null?0:e.length;for(this.clear();++i<s;){var a=e[i];this.set(a[0],a[1])}}Oh.prototype.clear=lP;Oh.prototype.delete=uP;Oh.prototype.get=hP;Oh.prototype.has=dP;Oh.prototype.set=fP;var Ic=Oh,j5="Expected a function";function Xw(e,i){if(typeof e!="function"||i!=null&&typeof i!="function")throw new TypeError(j5);var s=function(){var a=arguments,o=i?i.apply(this,a):a[0],c=s.cache;if(c.has(o))return c.get(o);var d=e.apply(this,a);return s.cache=c.set(o,d)||c,d};return s.cache=new(Xw.Cache||Ic),s}Xw.Cache=Ic;var pP=Xw,H5=500;function W5(e){var i=pP(e,function(a){return s.size===H5&&s.clear(),a}),s=i.cache;return i}var mP=W5,q5=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Y5=/\\(\\)?/g,X5=mP(function(e){var i=[];return e.charCodeAt(0)===46&&i.push(""),e.replace(q5,function(s,a,o,c){i.push(o?c.replace(Y5,"$1"):a||s)}),i}),gP=X5;function Q5(e){return e==null?"":vC(e)}var yP=Q5;function K5(e,i){return Oi(e)?e:ZC(e,i)?[e]:gP(yP(e))}var Ss=K5,Z5=1/0;function J5(e){if(typeof e=="string"||bl(e))return e;var i=e+"";return i=="0"&&1/e==-Z5?"-0":i}var El=J5;function $5(e,i){i=Ss(i,e);for(var s=0,a=i.length;e!=null&&s<a;)e=e[El(i[s++])];return s&&s==a?e:void 0}var iv=$5;function eW(e,i){for(var s=-1,a=i.length,o=e.length;++s<a;)e[o+s]=i[s];return e}var Ih=eW,vP=Wi?Wi.isConcatSpreadable:void 0;function tW(e){return Oi(e)||Th(e)||!!(vP&&e&&e[vP])}var xP=tW;function bP(e,i,s,a,o){var c=-1,d=e.length;for(s||(s=xP),o||(o=[]);++c<d;){var g=e[c];i>0&&s(g)?i>1?bP(g,i-1,s,a,o):Ih(o,g):a||(o[o.length]=g)}return o}var SP=bP;function rW(e){var i=e==null?0:e.length;return i?SP(e,1):[]}var wP=rW;function iW(e){return LC(FC(e,void 0,wP),e+"")}var nv=iW,nW=rv(Object.getPrototypeOf,Object),Rh=nW,sW="[object Object]",oW=Function.prototype,aW=Object.prototype,AP=oW.toString,lW=aW.hasOwnProperty,cW=AP.call(Object);function uW(e){if(!rn(e)||os(e)!=sW)return!1;var i=Rh(e);if(i===null)return!0;var s=lW.call(i,"constructor")&&i.constructor;return typeof s=="function"&&s instanceof s&&AP.call(s)==cW}var _P=uW;function hW(e,i,s){var a=-1,o=e.length;i<0&&(i=-i>o?0:o+i),s=s>o?o:s,s<0&&(s+=o),o=i>s?0:s-i>>>0,i>>>=0;for(var c=Array(o);++a<o;)c[a]=e[a+i];return c}var EP=hW;function dW(){this.__data__=new wl,this.size=0}var TP=dW;function fW(e){var i=this.__data__,s=i.delete(e);return this.size=i.size,s}var MP=fW;function pW(e){return this.__data__.get(e)}var CP=pW;function mW(e){return this.__data__.has(e)}var PP=mW,gW=200;function yW(e,i){var s=this.__data__;if(s instanceof wl){var a=s.__data__;if(!Al||a.length<gW-1)return a.push([e,i]),this.size=++s.size,this;s=this.__data__=new Ic(a)}return s.set(e,i),this.size=s.size,this}var DP=yW;function Lh(e){var i=this.__data__=new wl(e);this.size=i.size}Lh.prototype.clear=TP;Lh.prototype.delete=MP;Lh.prototype.get=CP;Lh.prototype.has=PP;Lh.prototype.set=DP;var Bh=Lh;function vW(e,i){return e&&To(i,Ch(i),e)}var OP=vW;function xW(e,i){return e&&To(i,bs(i),e)}var IP=xW,NP=typeof exports=="object"&&exports&&!exports.nodeType&&exports,RP=NP&&typeof module=="object"&&module&&!module.nodeType&&module,bW=RP&&RP.exports===NP,LP=bW?Kr.Buffer:void 0,BP=LP?LP.allocUnsafe:void 0;function SW(e,i){if(i)return e.slice();var s=e.length,a=BP?BP(s):new e.constructor(s);return e.copy(a),a}var FP=SW;function wW(e,i){for(var s=-1,a=e==null?0:e.length,o=0,c=[];++s<a;){var d=e[s];i(d,s,e)&&(c[o++]=d)}return c}var kP=wW;function AW(){return[]}var sv=AW,_W=Object.prototype,EW=_W.propertyIsEnumerable,VP=Object.getOwnPropertySymbols,TW=VP?function(e){return e==null?[]:(e=Object(e),kP(VP(e),function(i){return EW.call(e,i)}))}:sv,Nh=TW;function MW(e,i){return To(e,Nh(e),i)}var zP=MW,CW=Object.getOwnPropertySymbols,PW=CW?function(e){for(var i=[];e;)Ih(i,Nh(e)),e=Rh(e);return i}:sv,ov=PW;function DW(e,i){return To(e,ov(e),i)}var UP=DW;function OW(e,i,s){var a=i(e);return Oi(e)?a:Ih(a,s(e))}var av=OW;function IW(e){return av(e,Ch,Nh)}var Yp=IW;function RW(e){return av(e,bs,ov)}var lv=RW,LW=Fn(Kr,"DataView"),cv=LW,BW=Fn(Kr,"Promise"),uv=BW,NW=Fn(Kr,"Set"),hv=NW,GP="[object Map]",FW="[object Object]",jP="[object Promise]",HP="[object Set]",WP="[object WeakMap]",qP="[object DataView]",kW=Sa(cv),VW=Sa(Al),zW=Sa(uv),UW=Sa(hv),GW=Sa(Zy),Rc=os;(cv&&Rc(new cv(new ArrayBuffer(1)))!=qP||Al&&Rc(new Al)!=GP||uv&&Rc(uv.resolve())!=jP||hv&&Rc(new hv)!=HP||Zy&&Rc(new Zy)!=WP)&&(Rc=function(e){var i=os(e),s=i==FW?e.constructor:void 0,a=s?Sa(s):"";if(a)switch(a){case kW:return qP;case VW:return GP;case zW:return jP;case UW:return HP;case GW:return WP}return i});var _a=Rc,jW=Object.prototype,HW=jW.hasOwnProperty;function WW(e){var i=e.length,s=new e.constructor(i);return i&&typeof e[0]=="string"&&HW.call(e,"index")&&(s.index=e.index,s.input=e.input),s}var YP=WW,qW=Kr.Uint8Array,Fh=qW;function YW(e){var i=new e.constructor(e.byteLength);return new Fh(i).set(new Fh(e)),i}var kh=YW;function XW(e,i){var s=i?kh(e.buffer):e.buffer;return new e.constructor(s,e.byteOffset,e.byteLength)}var XP=XW,QW=/\w*$/;function KW(e){var i=new e.constructor(e.source,QW.exec(e));return i.lastIndex=e.lastIndex,i}var QP=KW,KP=Wi?Wi.prototype:void 0,ZP=KP?KP.valueOf:void 0;function ZW(e){return ZP?Object(ZP.call(e)):{}}var JP=ZW;function JW(e,i){var s=i?kh(e.buffer):e.buffer;return new e.constructor(s,e.byteOffset,e.length)}var $P=JW,$W="[object Boolean]",e6="[object Date]",t6="[object Map]",r6="[object Number]",i6="[object RegExp]",n6="[object Set]",s6="[object String]",o6="[object Symbol]",a6="[object ArrayBuffer]",l6="[object DataView]",c6="[object Float32Array]",u6="[object Float64Array]",h6="[object Int8Array]",d6="[object Int16Array]",f6="[object Int32Array]",p6="[object Uint8Array]",m6="[object Uint8ClampedArray]",g6="[object Uint16Array]",y6="[object Uint32Array]";function v6(e,i,s){var a=e.constructor;switch(i){case a6:return kh(e);case $W:case e6:return new a(+e);case l6:return XP(e,s);case c6:case u6:case h6:case d6:case f6:case p6:case m6:case g6:case y6:return $P(e,s);case t6:return new a;case r6:case s6:return new a(e);case i6:return QP(e);case n6:return new a;case o6:return JP(e)}}var e2=v6;function x6(e){return typeof e.constructor=="function"&&!Eh(e)?CC(Rh(e)):{}}var t2=x6,b6="[object Map]";function S6(e){return rn(e)&&_a(e)==b6}var r2=S6,i2=wa&&wa.isMap,w6=i2?Mh(i2):r2,n2=w6,A6="[object Set]";function _6(e){return rn(e)&&_a(e)==A6}var s2=_6,o2=wa&&wa.isSet,E6=o2?Mh(o2):s2,a2=E6,T6=1,M6=2,C6=4,l2="[object Arguments]",P6="[object Array]",D6="[object Boolean]",O6="[object Date]",I6="[object Error]",c2="[object Function]",R6="[object GeneratorFunction]",L6="[object Map]",B6="[object Number]",u2="[object Object]",N6="[object RegExp]",F6="[object Set]",k6="[object String]",V6="[object Symbol]",z6="[object WeakMap]",U6="[object ArrayBuffer]",G6="[object DataView]",j6="[object Float32Array]",H6="[object Float64Array]",W6="[object Int8Array]",q6="[object Int16Array]",Y6="[object Int32Array]",X6="[object Uint8Array]",Q6="[object Uint8ClampedArray]",K6="[object Uint16Array]",Z6="[object Uint32Array]",Or$1={};Or$1[l2]=Or$1[P6]=Or$1[U6]=Or$1[G6]=Or$1[D6]=Or$1[O6]=Or$1[j6]=Or$1[H6]=Or$1[W6]=Or$1[q6]=Or$1[Y6]=Or$1[L6]=Or$1[B6]=Or$1[u2]=Or$1[N6]=Or$1[F6]=Or$1[k6]=Or$1[V6]=Or$1[X6]=Or$1[Q6]=Or$1[K6]=Or$1[Z6]=!0;Or$1[I6]=Or$1[c2]=Or$1[z6]=!1;function dv(e,i,s,a,o,c){var d,g=i&T6,b=i&M6,j=i&C6;if(s&&(d=o?s(e,a,o,c):s(e)),d!==void 0)return d;if(!bi(e))return e;var _e=Oi(e);if(_e){if(d=YP(e),!g)return DC(e,d)}else{var $=_a(e),rt=$==c2||$==R6;if(Oc(e))return FP(e,g);if($==u2||$==l2||rt&&!o){if(d=b||rt?{}:t2(e),!g)return b?UP(e,IP(d,e)):zP(e,OP(d,e))}else{if(!Or$1[$])return o?e:{};d=e2(e,$,g)}}c||(c=new Bh);var st=c.get(e);if(st)return st;c.set(e,d),a2(e)?e.forEach(function(wt){d.add(dv(wt,i,s,wt,e,c))}):n2(e)&&e.forEach(function(wt,yt){d.set(yt,dv(wt,i,s,yt,e,c))});var ut=j?b?lv:Yp:b?bs:Ch,gt=_e?void 0:ut(e);return BC(gt||e,function(wt,yt){gt&&(yt=wt,wt=e[yt]),Ah(d,yt,dv(wt,i,s,yt,e,c))}),d}var fv=dv,J6=1,$6=4;function e8(e){return fv(e,J6|$6)}var Ea=e8,t8="__lodash_hash_undefined__";function r8(e){return this.__data__.set(e,t8),this}var h2=r8;function i8(e){return this.__data__.has(e)}var d2=i8;function pv(e){var i=-1,s=e==null?0:e.length;for(this.__data__=new Ic;++i<s;)this.add(e[i])}pv.prototype.add=pv.prototype.push=h2;pv.prototype.has=d2;var f2=pv;function n8(e,i){for(var s=-1,a=e==null?0:e.length;++s<a;)if(i(e[s],s,e))return!0;return!1}var p2=n8;function s8(e,i){return e.has(i)}var m2=s8,o8=1,a8=2;function l8(e,i,s,a,o,c){var d=s&o8,g=e.length,b=i.length;if(g!=b&&!(d&&b>g))return!1;var j=c.get(e),_e=c.get(i);if(j&&_e)return j==i&&_e==e;var $=-1,rt=!0,st=s&a8?new f2:void 0;for(c.set(e,i),c.set(i,e);++$<g;){var ut=e[$],gt=i[$];if(a)var wt=d?a(gt,ut,$,i,e,c):a(ut,gt,$,e,i,c);if(wt!==void 0){if(wt)continue;rt=!1;break}if(st){if(!p2(i,function(yt,At){if(!m2(st,At)&&(ut===yt||o(ut,yt,s,a,c)))return st.push(At)})){rt=!1;break}}else if(!(ut===gt||o(ut,gt,s,a,c))){rt=!1;break}}return c.delete(e),c.delete(i),rt}var mv=l8;function c8(e){var i=-1,s=Array(e.size);return e.forEach(function(a,o){s[++i]=[o,a]}),s}var g2=c8;function u8(e){var i=-1,s=Array(e.size);return e.forEach(function(a){s[++i]=a}),s}var y2=u8,h8=1,d8=2,f8="[object Boolean]",p8="[object Date]",m8="[object Error]",g8="[object Map]",y8="[object Number]",v8="[object RegExp]",x8="[object Set]",b8="[object String]",S8="[object Symbol]",w8="[object ArrayBuffer]",A8="[object DataView]",v2=Wi?Wi.prototype:void 0,Qw=v2?v2.valueOf:void 0;function _8(e,i,s,a,o,c,d){switch(s){case A8:if(e.byteLength!=i.byteLength||e.byteOffset!=i.byteOffset)return!1;e=e.buffer,i=i.buffer;case w8:return!(e.byteLength!=i.byteLength||!c(new Fh(e),new Fh(i)));case f8:case p8:case y8:return wh(+e,+i);case m8:return e.name==i.name&&e.message==i.message;case v8:case b8:return e==i+"";case g8:var g=g2;case x8:var b=a&h8;if(g||(g=y2),e.size!=i.size&&!b)return!1;var j=d.get(e);if(j)return j==i;a|=d8,d.set(e,i);var _e=mv(g(e),g(i),a,o,c,d);return d.delete(e),_e;case S8:if(Qw)return Qw.call(e)==Qw.call(i)}return!1}var x2=_8,E8=1,T8=Object.prototype,M8=T8.hasOwnProperty;function C8(e,i,s,a,o,c){var d=s&E8,g=Yp(e),b=g.length,j=Yp(i),_e=j.length;if(b!=_e&&!d)return!1;for(var $=b;$--;){var rt=g[$];if(!(d?rt in i:M8.call(i,rt)))return!1}var st=c.get(e),ut=c.get(i);if(st&&ut)return st==i&&ut==e;var gt=!0;c.set(e,i),c.set(i,e);for(var wt=d;++$<b;){rt=g[$];var yt=e[rt],At=i[rt];if(a)var Ct=d?a(At,yt,rt,i,e,c):a(yt,At,rt,e,i,c);if(!(Ct===void 0?yt===At||o(yt,At,s,a,c):Ct)){gt=!1;break}wt||(wt=rt=="constructor")}if(gt&&!wt){var Tt=e.constructor,kt=i.constructor;Tt!=kt&&"constructor"in e&&"constructor"in i&&!(typeof Tt=="function"&&Tt instanceof Tt&&typeof kt=="function"&&kt instanceof kt)&&(gt=!1)}return c.delete(e),c.delete(i),gt}var b2=C8,P8=1,S2="[object Arguments]",w2="[object Array]",gv="[object Object]",D8=Object.prototype,A2=D8.hasOwnProperty;function O8(e,i,s,a,o,c){var d=Oi(e),g=Oi(i),b=d?w2:_a(e),j=g?w2:_a(i);b=b==S2?gv:b,j=j==S2?gv:j;var _e=b==gv,$=j==gv,rt=b==j;if(rt&&Oc(e)){if(!Oc(i))return!1;d=!0,_e=!1}if(rt&&!_e)return c||(c=new Bh),d||ev(e)?mv(e,i,s,a,o,c):x2(e,i,b,s,a,o,c);if(!(s&P8)){var st=_e&&A2.call(e,"__wrapped__"),ut=$&&A2.call(i,"__wrapped__");if(st||ut){var gt=st?e.value():e,wt=ut?i.value():i;return c||(c=new Bh),o(gt,wt,s,a,c)}}return rt?(c||(c=new Bh),b2(e,i,s,a,o,c)):!1}var _2=O8;function E2(e,i,s,a,o){return e===i?!0:e==null||i==null||!rn(e)&&!rn(i)?e!==e&&i!==i:_2(e,i,s,a,E2,o)}var T2=E2;function I8(e,i){return e!=null&&i in Object(e)}var M2=I8;function R8(e,i,s){i=Ss(i,e);for(var a=-1,o=i.length,c=!1;++a<o;){var d=El(i[a]);if(!(c=e!=null&&s(e,d)))break;e=e[d]}return c||++a!=o?c:(o=e==null?0:e.length,!!o&&_h(o)&&Sh(d,o)&&(Oi(e)||Th(e)))}var C2=R8;function L8(e,i){return e!=null&&C2(e,i,M2)}var P2=L8,B8=function(){return Kr.Date.now()},yv=B8,N8="Expected a function",F8=Math.max,k8=Math.min;function V8(e,i,s){var a,o,c,d,g,b,j=0,_e=!1,$=!1,rt=!0;if(typeof e!="function")throw new TypeError(N8);i=Hw(i)||0,bi(s)&&(_e=!!s.leading,$="maxWait"in s,c=$?F8(Hw(s.maxWait)||0,i):c,rt="trailing"in s?!!s.trailing:rt);function st(Pt){var It=a,Lt=o;return a=o=void 0,j=Pt,d=e.apply(Lt,It),d}function ut(Pt){return j=Pt,g=setTimeout(yt,i),_e?st(Pt):d}function gt(Pt){var It=Pt-b,Lt=Pt-j,Nt=i-It;return $?k8(Nt,c-Lt):Nt}function wt(Pt){var It=Pt-b,Lt=Pt-j;return b===void 0||It>=i||It<0||$&&Lt>=c}function yt(){var Pt=yv();if(wt(Pt))return At(Pt);g=setTimeout(yt,gt(Pt))}function At(Pt){return g=void 0,rt&&a?st(Pt):(a=o=void 0,d)}function Ct(){g!==void 0&&clearTimeout(g),j=0,a=b=o=g=void 0}function Tt(){return g===void 0?d:At(yv())}function kt(){var Pt=yv(),It=wt(Pt);if(a=arguments,o=this,b=Pt,It){if(g===void 0)return ut(b);if($)return clearTimeout(g),g=setTimeout(yt,i),st(b)}return g===void 0&&(g=setTimeout(yt,i)),d}return kt.cancel=Ct,kt.flush=Tt,kt}var Lc=V8;function z8(e){var i=e==null?0:e.length;return i?e[i-1]:void 0}var D2=z8;function U8(e,i){return i.length<2?e:iv(e,EP(i,0,-1))}var O2=U8;function G8(e,i){return T2(e,i)}var Xp=G8;function j8(e,i){return i=Ss(i,e),e=O2(e,i),e==null||delete e[El(D2(i))]}var I2=j8;function H8(e){return _P(e)?void 0:e}var R2=H8,W8=1,q8=2,Y8=4,X8=nv(function(e,i){var s={};if(e==null)return s;var a=!1;i=Xy(i,function(c){return c=Ss(c,e),a||(a=c.length>1),c}),To(e,lv(e),s),a&&(s=fv(s,W8|q8|Y8,R2));for(var o=i.length;o--;)I2(s,i[o]);return s}),Vh=X8;function Q8(e,i,s,a){if(!bi(e))return e;i=Ss(i,e);for(var o=-1,c=i.length,d=c-1,g=e;g!=null&&++o<c;){var b=El(i[o]),j=s;if(b==="__proto__"||b==="constructor"||b==="prototype")return e;if(o!=d){var _e=g[b];j=a?a(_e,b,g):void 0,j===void 0&&(j=bi(_e)?_e:Sh(i[o+1])?[]:{})}Ah(g,b,j),g=g[b]}return e}var L2=Q8;function K8(e,i,s){for(var a=-1,o=i.length,c={};++a<o;){var d=i[a],g=iv(e,d);s(g,d)&&L2(c,Ss(d,e),g)}return c}var B2=K8;function Z8(e,i){return B2(e,i,function(s,a){return P2(e,a)})}var N2=Z8,J8=nv(function(e,i){return e==null?{}:N2(e,i)}),as=J8,$8="Expected a function";function eq(e,i,s){var a=!0,o=!0;if(typeof e!="function")throw new TypeError($8);return bi(s)&&(a="leading"in s?!!s.leading:a,o="trailing"in s?!!s.trailing:o),Lc(e,i,{leading:a,maxWait:i,trailing:o})}var Kw=eq;function vv(e){for(let i of Object.keys(e))e[i]===void 0&&delete e[i];return e}function _n(e,i){return Object.setPrototypeOf(e,i),e}var tq=()=>typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().includes(" electron/"),rq=()=>typeof window>"u"?!1:window.navigator.platform.toUpperCase().includes("MAC"),iq=()=>typeof window>"u"?!1:/iPad|iPhone|iPod/.test(window.navigator.userAgent)||zh&&"ontouchend"in document,nq=()=>typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1,sq=()=>typeof window>"u"?!1:"ontouchstart"in window||navigator.maxTouchPoints>0,oq=()=>{if(typeof window>"u")return!1;let e=navigator.userAgent,i=navigator.vendor;return/Safari/i.test(e)&&/Apple Computer/.test(i)},aq=()=>{if(typeof window>"u")return null;let e=navigator.userAgent.match(/Version\/(\d+\.\d)/);return e&&e[1]},lq=()=>{if(typeof window>"u")return;let e=new URLSearchParams(window.location.search).get("desktop-app-version");return e?(window.localStorage.setItem("desktop-app-version",e),e):window.localStorage.getItem("desktop-app-version")??"0.0.6"},cq=tq();cq&&lq();var zh=rq(),Uh=iq(),F2=nq(),Ii=sq(),Zw=oq(),Jw=Number(aq());function xv(e){return Array.isArray(e)?e:[e]}function bv(e,i){let s=0;for(;s<e.length&&s<i.length;){if(e[s]<i[s])return-1;if(e[s]>i[s])return 1;s+=1}return s!==i.length?-1:s!==e.length?1:0}function Qp(e){return zh?e.metaKey:e.ctrlKey}function k2(e){return e.wheelDeltaY===0||e.deltaY===0?zh&&e.shiftKey&&Math.abs(e.wheelDeltaX)>=120?!1:e.wheelDeltaX?e.wheelDeltaX===-3*e.deltaX||e.wheelDeltaX===-3*window.devicePixelRatio*e.deltaX:e.deltaMode===0:e.wheelDeltaY?e.wheelDeltaY===-3*e.deltaY||e.wheelDeltaY===-3*window.devicePixelRatio*e.deltaY:e.deltaMode===0}var $e$1=[],wv={},Kp={},Sv={};function V2(e){$e$1.includes(e)||$e$1.push(e)}function Gh(e){delete wv[e.pointerId];for(let i=0;i<$e$1.length;i++)if($e$1[i].pointerId===e.pointerId){$e$1.splice(i,1);break}}function z2(){$e$1.splice(0,$e$1.length)}function Av(e){if(e.pointerType!=="touch")return;let i=wv[e.pointerId];i===void 0&&(i={x:0,y:0},wv[e.pointerId]=i),i.x=e.pageX,i.y=e.pageY}function _v(e){let i=e.pointerId===$e$1[0].pointerId?$e$1[1]:$e$1[0];return wv[i.pointerId]}function U2(e){Kp[e.key]=!0,Sv[e.key]=Sv[e.key]===void 0?1:Sv[e.key]+1}function G2(e){if(zh&&Kp.Meta)for(let i in Kp)Kp[i]=!1;else Kp[e.key]=!1;Sv={}}function j2(e){e.addEventListener("pointerdown",V2,!0),e.addEventListener("pointerdown",Av,!0),e.addEventListener("pointermove",Av,!0),e.addEventListener("pointerup",Gh,!0),e.addEventListener("pointercancel",Gh,!0),e.addEventListener("pointerleave",Gh,!0),window.addEventListener("keydown",U2,!0),window.addEventListener("keyup",G2,!0)}function H2(e){e.removeEventListener("pointerdown",V2,!0),e.removeEventListener("pointerdown",Av,!0),e.removeEventListener("pointermove",Av,!0),e.removeEventListener("pointerup",Gh,!0),e.removeEventListener("pointercancel",Gh,!0),e.removeEventListener("pointerleave",Gh,!0),window.removeEventListener("keydown",U2,!0),window.removeEventListener("keyup",G2,!0)}var W2,q2=new Promise(e=>{W2=e}),Ev;function Y2(){if(Ev)return Ev;async function e(){let i="https://unpkg.com/@splinetool/navmesh-wasm@1.0.26/build",s=__vitePreload(()=>import("./navmesh-QdgGSsus.js"),__vite__mapDeps([])),[a,o]=await Promise.all([s,fetch(`${i}/navmesh.wasm`).then(g=>g.arrayBuffer())]),c=a.default,d=await c({wasmBinary:o});W2(d)}return Ev=e(),Ev}var X2,Q2=new Promise(e=>{X2=e}),Tv;function K2(){if(Tv)return Tv;async function e(){let i=await __vitePreload(()=>import("./physics-XY0FX9ij.js"),__vite__mapDeps([]));await i.init(),X2(i)}return Tv=e(),Tv}var it=class{modifyById(e,i){let s=this;if(s[e]===void 0)throw new Error("not expected");{let a={...s,[e]:i};return Object.setPrototypeOf(a,it.prototype),a}}add(e,i){var s;return((s=this.runOp({type:1,id:e,data:i}))==null?void 0:s.data)??this}runOp(e){let i=this;if(e.type===1){let s=i[e.id],a;s===void 0?a={type:2,id:e.id}:a={type:1,id:e.id,data:s};let{id:o,data:c}=e,d={...i,[o]:c};return Object.setPrototypeOf(d,it.prototype),{data:d,actual:e,reverse:a}}else if(e.type===2){let{id:s}=e,a=i[s];if(a===void 0)return null;{let o={...i};return Object.setPrototypeOf(o,it.prototype),delete o[s],{data:o,actual:e,reverse:{type:1,id:s,data:a}}}}return null}};function Zp(e){if(e.deepFreeze!==void 0){e.deepFreeze(e);return}let i=Object.getOwnPropertyNames(e);for(let s of i){let a=e[s];a&&typeof a=="object"&&Zp(a)}return Object.freeze(e)}function Z2(e,i){let s=0;for(;s<e.length&&s<i.length;){if(e[s]<i[s])return-1;if(e[s]>i[s])return 1;s+=1}return s!==i.length?-1:s!==e.length?1:0}var jh=class extends Error{};function Mv(e){let i={...e};return Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i}function Mo(e,i,s){if(e===void 0?i===void 0?(e=0,i=10):e=i-10:i===void 0&&(i=e+10),e>i){let c=e;e=i,i=c}let a=[],o=1/(s+1);for(let c=0;c<s;c++){let d=e+(i-e)*(c+.75+Math.random()*.5)*o;a.push(d)}return a}function Hh(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array}function J2(){return typeof process<"u"}function $2(e,i){for(let s of e)i(s.id,s.data)!==!0&&$2(s.children,i)}function eD(e,i){if(i(e.id,e.data)!==!0)for(let s of e.children)eD(s,i)}var yr$1=class extends Array{constructor(...i){super(...i),Object.setPrototypeOf(this,yr$1.prototype)}deepFreeze(){let i=0;for(;i<this.length;)Zp(this[i]),i++}fillCaches0(i,s){this.objCaches.set(i.id,i),this.parentCaches.set(i.id,s);for(let a of i.children)this.fillCaches0(a,i.id)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,this.parentCaches=new Map;for(let i of this)this.fillCaches0(i,null)}}randomId(){this.fillCaches();let i=Array.from(this.objCaches.keys());if(i.length!==0)return i[Math.max(0,Math.floor(Math.random()*i.length)-1)]}nonExistOrDescendantOf(i,s){if(!this.has(i))return!0;for(;i;){let a=this.parent(i);if(a===s)return!0;i=a}return!1}rootAcestor(i){for(;i;){let s=this.parent(i);if(s)i=s;else return i}return i}isDescendantOf(i,s){for(;i;){let a=this.parent(i);if(a===s)return!0;i=a}return!1}data(i){var s;return(s=this.get(i))==null?void 0:s.data}has(i){return this.childrenOf(i)!==void 0}get(i){return this.fillCaches(),this.objCaches.get(i)}childrenOf(i){var s;return i===null?this:(s=this.get(i))==null?void 0:s.children}traverseFrom(i,s){if(i===null)this.traverse(s);else{let a=this.get(i);a&&eD(a,s)}}traverse(i){$2(this,i)}totalSize(){return this.fillCaches(),this.objCaches.size}parent(i){return this.fillCaches(),this.parentCaches.get(i)}childrenArray(i){return i===null?this:this.get(i).children}modifyById(i,s){if(this.get(i)===void 0)throw new Error("not expected");{let a=this.parent(i),o=this.childrenArray(a),c=o.findIndex(g=>g.id===i);if(c<0)throw new Error("not expected");let d=o[c];return o=[...o],o[c]={...d,data:s},this.modifyArrayBy(a,o)}}modifyArrayBy(i,s){let a=i,o=s;for(;a!==null;){let d=o,g=a;if(a=this.parent(a),a===void 0)throw new Error;o=this.childrenArray(a);let b=o.findIndex(j=>j.id===g);if(b<0)throw new Error;o=[...o],o[b]={...o[b],children:d}}Object.setPrototypeOf(o,yr$1.prototype);let c=o;return c.fillCaches(),c}runOp(i){switch(i.type){case 7:return this.addOp(i);case 8:return this.deleteOp(i);case 9:return this.moveOp(i)}return null}checkDuplicatedIdRec({id:i,children:s}){if(this.get(i)!==void 0)return!0;for(let a of s)if(this.checkDuplicatedIdRec(a))return!0;return!1}addOp(i){let{parent:s,fi:a,id:o,data:c,children:d}=i;if(s!==null&&this.get(s)===void 0||this.checkDuplicatedIdRec(i))return null;{let g=s,b=this.childrenArray(g),j={fi:a,id:o,data:c,children:d};return b=[...b,j],b.sort((_e,$)=>_e.fi-$.fi),i.localIndex=b.indexOf(j),{data:this.modifyArrayBy(g,b),actual:i,reverse:{type:8,id:o}}}}deleteOp(i){let{id:s}=i;if(this.get(s)===null)return null;{let a=this.parent(s);if(a===void 0)return null;let o=this.childrenArray(a),c=o.findIndex(g=>g.id===s);i.localIndex=c,o=[...o];let d=o.splice(c,1)[0];return{data:this.modifyArrayBy(a,o),actual:i,reverse:{type:7,...d,parent:a}}}}moveOp(i){let{parent:s,fi:a,id:o}=i;if(s!==null&&this.get(s)===void 0)return this.deleteOp({type:8,id:o});if(s!==null){let rt=s;for(;rt!==null;){if(rt===void 0)throw new Error;if(rt===o)throw new jh("cyclic tree");rt=this.parent(rt)}}let c=this.parent(o);if(c===void 0)return null;let d=c,g=this.childrenArray(c),b=g.findIndex(rt=>rt.id===o);g=[...g];let j=g.splice(b,1)[0],_e=this.modifyArrayBy(c,g);c=s,g=_e.childrenArray(c);let $=j.fi;return j={...j,fi:a},g=[...g,j],g.sort((rt,st)=>rt.fi-st.fi),i.localIndex=g.indexOf(j),_e=_e.modifyArrayBy(c,g),{data:_e,actual:i,reverse:{type:9,parent:d,fi:$,id:o}}}previous(i,s){if(s===null){let o=this.childrenArray(i);return o.length===0?null:o[o.length-1].id}let a=null;for(let o of this.childrenArray(i)){if(o.id===s)return a;a=o.id}return null}traverseSortNext(i){let s=this.parent(i);if(s!==void 0){let a=this.childrenArray(s),o=a.findIndex(c=>c.id===i)+1;if(o<a.length)return a[o].id;if(s)return this.traverseSortNext(s)}}sortNext(i){let s=this.childrenArray(i);return s.length>0?s[0].id:this.traverseSortNext(i)}traverseSortPrevious(i){let s=this.childrenArray(i);return s.length>0?this.traverseSortPrevious(s[s.length-1].id):i}sortPrevious(i){let s=this.parent(i);if(s!==void 0){let a=this.childrenArray(s),o=a.findIndex(c=>c.id===i)-1;return o>=0?this.traverseSortPrevious(a[o].id):s}}getAllSorted(i){let s=[];for(let a of i){let o=this.getWithSortKey(a.id);o!==void 0&&s.push({...a,...o})}s.sort((a,o)=>Z2(a.sortKey,o.sortKey));for(let a of s)delete a.sortKey;return s}getWithSortKey(i){var s=i;let a=[],o=this.get(s),c=o;if(o!==void 0){for(;s;)a.splice(0,0,o.fi),s=this.parent(s),s!==null&&(o=this.get(s));return{...c,sortKey:a}}}insertBeforeHelper(i,s,a){return this.insertAfterHelper(i,this.previous(i,s),a)}insertAfterHelper(i,s,a){let o=this.childrenArray(i);if(s===null){if(o.length===0)return Mo(0,a,a);{let c=o[0].fi;return Mo(c-a,c,a)}}else{let c=this.get(s);if(c===void 0||this.parent(s)!==i)throw new Error("illegal args");let d=o.find(g=>g.fi>c.fi);if(d===void 0){let g=o[o.length-1].fi;return Mo(g,g+a,a)}else return Mo(c.fi,d.fi,a)}}},Wh;(e=>{function i(s,a){if(a.type!==0)return null;if(Array.isArray(s)){let o=a.props,c={},d=[...s],g=!1;if(o)for(let b of Object.keys(o)){let j=parseInt(b);if(isNaN(j))throw new Error("wrong index");c[b]=d[j],d[j]=o[b],g=!0}return g?{data:d,actual:a,reverse:{type:0,props:c}}:null}else{let o=a.props,c={},d={...s},g=!1;if(o)for(let b of Object.keys(o)){c[b]=d[b];let j=o[b];j===void 0?delete d[b]:d[b]=j,g=!0}return g?{data:d,actual:a,reverse:{type:0,props:c}}:null}}e.runOp=i})(Wh||(Wh={}));var Ue=class extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Ue.prototype)}deepFreeze(){let e=0;for(;e<this.length;)Zp(this[e]),e++}fillCaches0(e){this.objCaches.set(e.id,e)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,Object.getOwnPropertyDescriptor(this,"objCaches").enumerable=!1;for(let e of this)this.fillCaches0(e)}}randomId(){this.fillCaches();let e=Array.from(this.objCaches.keys());if(e.length!==0)return e[Math.max(0,Math.floor(Math.random()*e.length)-1)]}data(e){var i;return(i=this.get(e))==null?void 0:i.data}get(e){return this.fillCaches(),this.objCaches.get(e)}modifyById(e,i){if(this.get(e)===void 0)throw new Error("not expected");{let s=this,a=s.findIndex(c=>c.id===e);if(a<0)throw new Error("not expected");let o=s[a];return s=[...s],s[a]={...o,data:i},this.modifyArrayBy(s)}}modifyArrayBy(e){Object.setPrototypeOf(e,Ue.prototype);let i=e;return J2()||i.fillCaches(),i}runOp(e){switch(e.type){case 4:return this.addOp(e);case 5:return this.deleteOp(e);case 6:return this.moveOp(e)}return null}addOp(e){let{fi:i,id:s,data:a}=e,o=this,c={fi:i,id:s,data:a};return o=[...o,c],o.sort((d,g)=>d.fi-g.fi),e.localIndex=o.indexOf(c),{data:this.modifyArrayBy(o),actual:e,reverse:{type:5,id:s}}}deleteOp(e){let{id:i}=e,s=this,a=s.findIndex(c=>c.id===i);if(a===-1)return null;e.localIndex=a,s=[...s];let o=s.splice(a,1)[0];return{data:this.modifyArrayBy(s),actual:e,reverse:{type:4,...o}}}moveOp(e){let{fi:i,id:s}=e,a=this;a=[...a];let o=a.findIndex(g=>g.id===s);if(o===-1)return null;let c=a[o].fi,d={...a[o],fi:i};return a[o]=d,a.sort((g,b)=>g.fi-b.fi),e.localIndex=a.indexOf(d),{data:this.modifyArrayBy(a),actual:e,reverse:{type:6,fi:c,id:s}}}previous(e){if(e===null)return this.length===0?null:this[this.length-1].id;let i=null;for(let s of this){if(s.id===e)return i;i=s.id}return null}insertBeforeHelper(e,i){return this.insertAfterHelper(this.previous(e),i)}insertAfterHelper(e,i){let s=this;if(e===null){if(s.length===0)return Mo(0,i,i);{let a=s[0].fi;return Mo(a-i,a,i)}}else{let a=this.get(e);if(a===void 0)throw new Error("illegal args");let o=s.find(c=>c.fi>a.fi);if(o===void 0){let c=s[s.length-1].fi;return Mo(c,c+i,i)}else return Mo(a.fi,o.fi,i)}}};function qh(e){return e&&typeof e=="object"&&e instanceof vr}var vr=class{unusedFunOverridesTable(e){}runOp(e){let i=[],s=this,a=0,o={};for(;a<e.path.length;){if(i.push(s),s=s===void 0?void 0:s[e.path[a]],s!==void 0&&!qh(s))return null;a+=1}s=s?Mv(s):new vr;for(let[g,b]of Object.entries(e.props)){let j=s[g];o[g]=j,b===void 0?delete s[g]:s[g]=b}for(;a>0;){if(Object.keys(s).length===0){let g=i[a-1];g&&(s=Mv(g),delete s[e.path[a-1]])}else{let g=i[a-1];if(g){let b=Mv(g);b[e.path[a-1]]=s,s=b}else{let b=new vr;b[e.path[a-1]]=s,s=b}}a-=1}let c=Object.setPrototypeOf(s,vr.prototype),d={...e,props:o};return{data:c,actual:e,reverse:d}}},Co;(e=>{function i(o,c){return Jp(o,c)??o}e.apply=i;function s(o,c){return e1(o,c)}e.merge=s;function a(o,c){let d=0,g=c.path,b=o;for(;d<g.length&&b!==void 0;){if(b=Nr$1.zoomOnce(b,g[d]),b===void 0)return c;if(!qh(b))return;d+=1}if(b===void 0)return c;if(qh(b))if(c.type===0){let j={...c.props};for(let _e of Object.keys(b))delete j[_e];return{...c,props:j}}else if(c.type===1||c.type===4||c.type===7){let j=$w([c],b);return j?(console.log(j),j):c}else return c}e.filterOp=a})(Co||(Co={}));function $w(e,i){if(i===void 0)return;let s=!1,a=e.map(o=>{let c=o.id,d=Jp(o.data,i[c]);if(s=s||d!==void 0,d===void 0&&(d=o.data),o.children){let g=$w(o.children,i);return g!==void 0?s=!0:g=o.children,{...o,id:c,data:d,children:g}}else return{...o,id:c,data:d}});if(s)return a}function uq(e,i){if(i===void 0)return;let s=!1,a=e.map(o=>{let c=o.id,d=Jp(o.data,i[c]);return s=s||d!==void 0,d===void 0&&(d=o.data),{...o,id:c,data:d}});if(s)return Object.setPrototypeOf(a,Object.getPrototypeOf(e)),a}function Jp(e,i){if(!qh(i))return i;if(e instanceof yr$1){let s=$w(e,i);return s!==void 0&&Object.setPrototypeOf(s,Object.getPrototypeOf(e)),s}else{if(e instanceof Ue)return uq(e,i);if(Array.isArray(e)){let s=!1,a=e.map((o,c)=>{let d=Jp(o,i[c]);return s=s||d!==void 0,d===void 0&&(d=o),d});return s?(Object.setPrototypeOf(a,Object.getPrototypeOf(e)),a):void 0}else{if(e instanceof vr)return e1(e,i);if(e&&typeof e=="object"){let s={},a=!1;for(let[o,c]of Object.entries(e)){let d=Jp(c,i[o]);a=a||d!==void 0,d===void 0&&(d=c),s[o]=d}return a?(Object.setPrototypeOf(s,Object.getPrototypeOf(e)),s):void 0}}}}function e1(e,i){if(e===void 0)return i;if(i===void 0)return e;if(!qh(i))return i;if(!qh(e))return Co.apply(e,i);let s=new Set;for(let o of Object.keys(e))s.add(o);for(let o of Object.keys(i))s.add(o);let a=new vr;for(let o of s){let c=e1(e===void 0?void 0:e[o],i===void 0?void 0:i[o]);a[o]=c}return a}function tD(e,i){let s={cur:[],result:[],len:0};return e=$p(e,i,s)??e,[e,s.result]}function Cv(e,i){return e===null?null:(e.cur[e.len]=i,e.len+=1,e)}function Pv(e){e&&(e.len-=1)}function hq(e){if(e===null)return null;e.result.push(e.cur.slice(0,e.len))}function rD(e,i,s){let a=!1,o=e.map(c=>{let d=c.id,g=i[d];if(g!==void 0&&typeof g=="string"&&(a=!0,d=g,s!==null))throw new Error("not supported");let b=$p(c.data,i,Cv(s,d));Pv(s),a=a||b!==void 0,b===void 0&&(b=c.data);let j=rD(c.children,i,s);return j!==void 0?a=!0:j=c.children,{...c,id:d,data:b,children:j}});if(a)return o}function dq(e,i,s){let a=!1,o=e.map(c=>{let d=c.id,g=i[d];if(g!==void 0&&typeof g=="string"&&(a=!0,d=g,s!==null))throw new Error("not supported");let b=$p(c.data,i,Cv(s,d));return Pv(s),a=a||b!==void 0,b===void 0&&(b=c.data),{...c,id:d,data:b}});if(a)return Object.setPrototypeOf(o,Object.getPrototypeOf(e)),o}function $p(e,i,s){if(e instanceof yr$1){let a=rD(e,i,s);return a!==void 0&&Object.setPrototypeOf(a,Object.getPrototypeOf(e)),a}else{if(e instanceof Ue)return dq(e,i,s);if(Array.isArray(e)){let a=!1,o=e.map((c,d)=>{let g=$p(c,i,Cv(s,d));return Pv(s),a=a||g!==void 0,g===void 0&&(g=c),g});return a?(Object.setPrototypeOf(o,Object.getPrototypeOf(e)),o):void 0}else if(e&&typeof e=="object"&&!Hh(e)){let a={},o=!1;for(let[c,d]of Object.entries(e))if(c!=="name"){let g=i[c];if(typeof g=="string"){if(s!==null)throw new Error("not supported");o=!0,c=g}let b=$p(d,i,Cv(s,c));Pv(s),o=o||b!==void 0,b===void 0&&(b=d),a[c]=b}else a[c]=d;return o?(Object.setPrototypeOf(a,Object.getPrototypeOf(e)),a):void 0}else if(typeof e=="string"){let a=i[e];return a!==void 0&&hq(s),a}else return}}var Yh;(e=>{function i(s,a){let o=Nr$1.zoom(a,s.path);if(typeof o=="object"){let c={};for(let d of Object.keys(s.props))c[d]=o[d];return{...s,props:c}}else return{...s,props:{}}}e.replaceProps=i})(Yh||(Yh={}));var Fr$1;(e=>{function i(b,j){return{...b,path:b.path.slice(j)}}e.drop=i;function s(b,j){var _e;return((_e=a(b,j))==null?void 0:_e.data)??b}e.applySimple=s;function a(b,j){var rt,st;let _e=j.path;for(var $=[];;){let ut;if(b instanceof vr&&j.type===0&&(ut=b.runOp({...j,path:_e.slice($.length)}),ut===null&&(ut=void 0)),ut===void 0&&$.length===_e.length&&(b instanceof yr$1||b instanceof Ue||b instanceof it?ut=b.runOp(j):ut=Wh.runOp(b,j)),ut!==void 0)if(ut!==null){let yt=ut.data;for(let At=$.length-1;At>=0;At--){let Ct=_e[At],Tt=$[At];if(Tt instanceof yr$1){if(typeof Ct=="number")throw new Error("illegal arg");yt=Tt.modifyById(Ct,yt)}else if(Tt instanceof Ue){if(typeof Ct=="number")throw new Error("illegal arg");yt=Tt.modifyById(Ct,yt)}else if(Tt instanceof it){if(typeof Ct=="number")throw new Error("illegal arg");yt=Tt.modifyById(Ct,yt)}else if(Tt instanceof vr){let kt={...Tt,[Ct]:yt};yt=Object.setPrototypeOf(kt,vr.prototype)}else if(typeof Tt=="object")if(Array.isArray(Tt)){if(typeof Ct=="string"&&(Ct=parseInt(Ct),isNaN(Ct)))throw new Error("Invalid path");let kt=yt;yt=[...Tt],yt[Ct]=kt}else yt={...Tt,[Ct]:yt};else return null}return{data:yt,actual:{...ut.actual,path:_e},reverse:{...ut.reverse,path:_e}}}else return null;let gt=_e[$.length],wt;if(b instanceof yr$1){if(typeof gt=="number")throw new Error("");wt=(rt=b.get(gt))==null?void 0:rt.data}else if(b instanceof Ue){if(typeof gt=="number")throw new Error("");wt=(st=b.get(gt))==null?void 0:st.data}else b!==null&&(wt=b[gt]);if(wt!==void 0)$.push(b),b=wt;else return null}}e.apply=a;function o(b,j){for(let _e=0;_e<b.length&&_e<j.length;_e++)if(b[_e]!==j[_e])return!0;return!1}e.pathDisjoint=o;function c(b,j){if(b.length!==j.length)return!1;for(let _e=0;_e<b.length;_e++)if(b[_e]!==j[_e])return!1;return!0}e.pathEq=c;function d(b,j){return o(b.path,j.path)}e.commutative=d;function g(b,j){return b.type===0&&j.type===0&&c(b.path,j.path)?Object.keys(b.props).every(_e=>j.props[_e]!==void 0):!1}e.subsumed=g})(Fr$1||(Fr$1={}));var em;(e=>{function i(){return[]}e.empty=i;function s(j,_e){let $=[];for(let rt of j){let[st,...ut]=rt.path;st===_e&&$.push({...rt,path:ut})}return $}e.removePrefix=s;function a(j,_e){return j.map($=>({...$,path:[_e,...$.path]}))}e.addPrefix=a;function o(j,_e){return[...j,..._e]}e.concat=o;function c(j,_e){return[...j.filter($=>!_e.some(rt=>Fr$1.subsumed($,rt))),..._e]}e.compress=c;function d(j,_e){return j.every($=>_e.every(rt=>Fr$1.commutative($,rt)))}e.commutative=d;function g(j,_e){for(let $ of _e){let rt=b(j,$);rt!==null&&(j=rt.data)}return j}e.applyAll=g;function b(j,_e){var $=j;let rt=[],st=[];for(let ut of _e)try{if(ut.type===3||ut.type===5&&ut.path[ut.path.length-1]==="variables"){let gt,wt,yt;if(ut.type===3?(gt=Nr$1.zoom($,[...ut.path,ut.id]),yt=Fr$1.apply($,{...ut,type:2})):(gt=Nr$1.zoom($,[...ut.path,ut.id,"value"]),yt=Fr$1.apply($,ut)),yt!==null){$=yt.data;let[At,Ct]=tD($,{[ut.id]:gt});$=At;for(let Tt=0;Tt<Ct.length;Tt++){let kt=Ct[Tt],Pt=kt.pop();if(typeof Pt=="number"){let It=[Pt];for(let Nt=Tt+1;Nt<Ct.length;Nt++){let Ht=Ct[Nt],dr=Ht[Ht.length-1];if(typeof dr=="number"&&Nr$1.equal(kt,Ht.slice(0,Ht.length-1)))It.push(dr),Ct.splice(Nt,1);else break}let Lt=Nr$1.zoom($,kt);wt=Lt.map((Nt,Ht)=>It.includes(Ht)?ut.id:Nt),gt=Lt,Pt=kt.pop()}else{if(Pt==="alphaOverride"||Pt==="alpha"){gt/=100;let It=gt,Lt=Nr$1.zoom($,kt.slice(0,kt.length-2)),Nt=Lt.layers.map(Ht=>Ht.id===kt[kt.length-1]?{...Ht,data:{...Ht.data,[Pt]:It}}:Ht);Object.setPrototypeOf(Nt,Object.getPrototypeOf(Lt.layers)),Lt.layers=Nt}wt=ut.id}rt.push({type:0,path:kt,props:{[Pt]:gt}}),st.push({type:0,path:kt,props:{[Pt]:wt}})}st.push(yt.reverse),rt.push(yt.actual)}}else{let gt=Fr$1.apply($,ut);gt!==null&&(rt.push(gt.actual),$=gt.data,st.push(gt.reverse))}}catch(gt){if(gt instanceof jh)return null;throw gt}return{data:$,actual:rt,reverse:st.reverse()}}e.apply=b})(em||(em={}));var iD=Symbol(),fq=Symbol(),Ov=Symbol(),Bc=class{reportOp(e,i,s=[]){let a=this;if(i===null)return;a._current=i.data;let o=s;for(;!(a instanceof Dv);){let c=a._path,d=a._current;if(c!==""&&o.splice(0,0,c),a=a._parent,a===null)return;a.update(c,d)}a.push(o,e,i.actual,i.reverse)}deleteChildren(e){if(this._children){let i=this._children[e];if(i){let s=i[Ov];s&&s(),delete this._children[e]}}}},r1=class extends Bc{constructor(e,i,s){super(),this._parent=e,this._path=i,this._current=s}update(e,i){if(Array.isArray(this._current)){if(typeof e=="string"&&(e=parseInt(e),isNaN(e)))throw new Error("Invalid path");this._current=[...this._current],this._current[e]=i}else this._current={...this._current,[e]:i}}runOp(e){this.reportOp(e,Wh.runOp(this._current,e),e.path)}},i1=class extends Bc{constructor(e,i,s){super(),this._parent=e,this._path=i,this._current=s}update(e,i){this._current={...this._current,[e]:i},Object.setPrototypeOf(this._current,it.prototype)}runOp(e){this.reportOp(e,this._current.runOp(e))}},nD={get(e,i){if(i===Ov)return()=>{e._parent=null};if(i===iD)return e._current;if(i===fq)return e;let{_current:s,_children:a}=e;if(i==="push"&&Array.isArray(s))throw new Error("not supported to expand array");let o=a===void 0?void 0:a[i];if(o!==void 0)return o;let c=s[i],d=Iv(e,i,c);return d!==c?(a===void 0&&(a={},e._children=a),a[i]=d,d):c},has(e,i){return i in e._current},ownKeys(e){return Reflect.ownKeys(e._current)},defineProperty(){throw Error("not supported")},getPrototypeOf(e){return Object.getPrototypeOf(e._current)},setPrototypeOf(){throw Error("not supported")},getOwnPropertyDescriptor(e,i){let s=e._current,a=Reflect.getOwnPropertyDescriptor(s,i);return a&&{writable:!0,configurable:!0,enumerable:a.enumerable,value:s[i]}}},pq={...nD,set(e,i,s){let a={type:0,props:{[i]:kr$1(s)??s}};return e.deleteChildren(i),e.runOp(a),!0},deleteProperty(e,i){let s={type:0,props:{[i]:void 0}};return e.deleteChildren(i),e.runOp(s),!0}},mq={...nD,set(e,i,s){return s===void 0?this.deleteProperty(e,i):(e.deleteChildren(i),e.runOp({type:1,id:i,data:s})),!0},deleteProperty(e,i){return e.runOp({type:2,id:i}),!0}},Xh=class extends Bc{constructor(e,i,s){super(),this._children={},this._parent=e,this._path=i,this._current=s,this[Ov]=()=>{this._parent=null}}unproxy(){return this._current}update(e,i){this._current=this._current.modifyById(e,i)}runOp(e){this.reportOp(e,this._current.runOp(e))}randomId(){return this._current.randomId()}isDescendantOf(e,i){return this._current.isDescendantOf(e,i)}childrenOf(e){return this._current.childrenOf(e)}traverse(e){return this._current.traverse(e)}get(e){return this._current.get(e)}parent(e){return this._current.parent(e)}traverse(e){this._current.traverse((i,s)=>{e(i,this.data(i))})}data(e){var d;let{_current:i,_children:s}=this,a=s===void 0?void 0:s[e];if(a!==void 0)return a;let o=(d=i.get(e))==null?void 0:d.data,c=Iv(this,e,o);return c!==o?(s===void 0&&(s={},this._children=s),s[e]=c,c):o}add(e,i,s,a,o){this.runOp({type:7,parent:e,fi:i,id:s,data:a,children:o})}move(e,i,s){this.runOp({type:9,parent:e,fi:i,id:s})}insertAfter(e,i,s){let a=this._current.insertAfterHelper(e,i,s.length);for(let o=0;o<s.length;o++){let c=s[o];this.add(e,a[o],c.id,c.data,c.children)}}insertBefore(e,i,s){let a=this._current.insertBeforeHelper(e,i,s.length);for(let o=0;o<s.length;o++){let c=s[o];this.add(e,a[o],c.id,c.data,c.children)}}moveAfter(e,i,s){let a=this._current.insertAfterHelper(e,i,s.length);for(let o=0;o<s.length;o++){let c=s[o];this.move(e,a[o],c)}}moveBefore(e,i,s){let a=this._current.insertBeforeHelper(e,i,s.length);for(let o=0;o<s.length;o++){let c=s[o];this.move(e,a[o],c)}}delete(e){this.deleteChildren(e),this.runOp({type:8,id:e})}sortNext(e){return this._current.sortNext(e)}sortPrevious(e){return this._current.sortPrevious(e)}getAllSorted(e){return this._current.getAllSorted(e)}},Qh=class extends Bc{constructor(e,i,s){super(),this._children={},this._parent=e,this._path=i,this._current=s,this[Ov]=()=>{this._parent=null}}unproxy(){return this._current}get length(){return this._current.length}forEach(e){let i=this.length;for(let s=0;s<i;s++){let a=this._current[s].id,o=this._current[s].fi;e(this.data(this._current[s].id),a,o)}}find(e){let i=this.length;for(let s=0;s<i;s++){let a=this._current[s].id;if(e(this.data(a),a))return this.get(a)}}update(e,i){this._current=this._current.modifyById(e,i)}randomId(){return this._current.randomId()}get(e){return{...this._current.get(e),data:this.data(e)}}data(e){var d;let{_current:i,_children:s}=this,a=s===void 0?void 0:s[e];if(a!==void 0)return a;let o=(d=i.get(e))==null?void 0:d.data,c=Iv(this,e,o);return c!==o?(s===void 0&&(s={},this._children=s),s[e]=c,c):o}runOp(e){this.reportOp(e,this._current.runOp(e))}add(e,i,s){this.runOp({type:4,fi:e,id:i,data:s})}move(e,i){this.runOp({type:6,fi:e,id:i})}insertAfter(e,i){let s=this._current.insertAfterHelper(e,i.length);for(let a=0;a<i.length;a++){let o=i[a];this.add(s[a],o.id,o.data)}}insertBefore(e,i){let s=this._current.insertBeforeHelper(e,i.length);for(let a=0;a<i.length;a++){let o=i[a];this.add(s[a],o.id,o.data)}}moveAfter(e,i){let s=this._current.insertAfterHelper(e,i.length);for(let a=0;a<i.length;a++){let o=i[a];this.move(s[a],o)}}moveBefore(e,i){let s=this._current.insertBeforeHelper(e,i.length);for(let a=0;a<i.length;a++){let o=i[a];this.move(s[a],o)}}delete(e){this.deleteChildren(e),this.runOp({type:5,id:e})}};function t1(e,i,s){if(e.length>0){let a=e[e.length-1];if(a.type===0&&i.type===0&&Nr$1.equal(a.path,s)){Object.assign(a.props,i.props);return}}e.push({...i,path:s})}var Dv=class extends Bc{constructor(e){super(),this.ts=[],this.actual=[],this.reverse=[],this._current=e}update(e,i){if(e!=="")throw new Error("");this._current=i}push(e,i,s,a){t1(this.ts,i,e),t1(this.actual,s,e),t1(this.reverse,a,e)}result(){return{data:this._current,ts:this.ts,actual:this.actual,reverse:this.reverse.reverse()}}};function Iv(e,i,s){return s instanceof yr$1?new Xh(e,i,s):s instanceof Ue?new Qh(e,i,s):s instanceof it?new Proxy(new i1(e,i,s),mq):s!==null&&typeof s=="object"?Hh(s)?s:new Proxy(new r1(e,i,s),pq):s}function n1(e){let i=new Dv(e);return[Iv(i,"",e),i]}function Tl(e,i){let[s,a]=n1(e);return i(s),a.result()}function kr$1(e){return e instanceof Xh||e instanceof Qh?e._current:e!==null&&typeof e=="object"?e[iD]:e}var Nr$1;(e=>{function i(c,d){if(d.length===c.length)for(var g=0;g<c.length;){if(c[g]!==d[g])return!1;g+=1}else return!1;return!0}e.equal=i;function s(c,d,g){let b=o(g,c);if(b!==void 0&&typeof b=="object"&&b!==null){let j={...d};return Object.keys(b).forEach(_e=>{delete j[_e]}),j}else return d}e.removeOverridden=s;function a(c,d){if((c instanceof yr$1||c instanceof Xh)&&typeof d=="string"||(c instanceof Ue||c instanceof Qh)&&typeof d=="string")return c.data(d);if(typeof d=="number"&&Array.isArray(c)||typeof d=="string"&&typeof c=="object"&&c!==null)return c[d]}e.zoomOnce=a;function o(c,d,g=0){for(;g<d.length&&c!==void 0;)c=a(c,d[g]),g+=1;return c}e.zoom=o})(Nr$1||(Nr$1={}));function sD(e,i){let s=[];if(i.length===e.length)for(var a=0;a<e.length;){if(i[a]==="*")s.push(e[a]);else if(e[a]!==i[a])return null;a+=1}else return null;return s}function Rt(e,i){let s=[];if(i.length<=e.length)for(var a=0;a<i.length;){if(i[a]==="*")s.push(e[a]);else if(e[a]!==i[a])return null;a+=1}else return null;return s}var Rv=class{},tm=class extends Rv{constructor(e){super(),this.id=e}},rm=class extends Rv{constructor(e){super(),this.data=e}},o1;try{o1=new TextDecoder}catch{}var qe,Cl,se=0,kn={},Zt,Ml,ws=0,Po=0,ls,Ta,En=[],ar,oD={useRecords:!1,mapsAsObjects:!0},im=class{},u1=new im;u1.name="MessagePack 0xC1";var Kh=!1,Do=class{constructor(e){e&&(e.useRecords===!1&&e.mapsAsObjects===void 0&&(e.mapsAsObjects=!0),e.structures?e.structures.sharedLength=e.structures.length:e.getStructures&&((e.structures=[]).uninitialized=!0,e.structures.sharedLength=0)),Object.assign(this,e)}unpack(e,i){if(qe)return vD(()=>(Bv(),this?this.unpack(e,i):Do.prototype.unpack.call(oD,e,i)));Cl=i>-1?i:e.length,se=0,Po=0,Ml=null,ls=null,qe=e;try{ar=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(s){throw qe=null,e instanceof Uint8Array?s:new Error("Source must be a Uint8Array or Buffer but was a "+(e&&typeof e=="object"?e.constructor.name:typeof e))}if(this instanceof Do){if(kn=this,this.structures)return Zt=this.structures,Lv();(!Zt||Zt.length>0)&&(Zt=[])}else kn=oD,(!Zt||Zt.length>0)&&(Zt=[]);return Lv()}unpackMultiple(e,i){let s,a=0;try{Kh=!0;let o=e.length,c=this?this.unpack(e,o):kv.unpack(e,o);if(i){for(i(c);se<o;)if(a=se,i(Lv())===!1)return}else{for(s=[c];se<o;)a=se,s.push(Lv());return s}}catch(o){throw o.lastPosition=a,o.values=s,o}finally{Kh=!1,Bv()}}_mergeStructures(e,i){e=e||[];for(let s=0,a=e.length;s<a;s++){let o=e[s];o&&(o.isShared=!0,s>=32&&(o.highByte=s-32>>5))}e.sharedLength=e.length;for(let s in i||[])if(s>=0){let a=e[s],o=i[s];o&&(a&&((e.restoreStructures||(e.restoreStructures=[]))[s]=a),e[s]=o)}return this.structures=e}decode(e,i){return this.unpack(e,i)}};function Lv(){try{if(!kn.trusted&&!Kh){let i=Zt.sharedLength||0;i<Zt.length&&(Zt.length=i)}let e=Zr();if(se==Cl)Zt.restoreStructures&&aD(),Zt=null,qe=null,Ta&&(Ta=null);else if(se>Cl){let i=new Error("Unexpected end of MessagePack data");throw i.incomplete=!0,i}else if(!Kh)throw new Error("Data read, but end of buffer not reached");return e}catch(e){throw Zt.restoreStructures&&aD(),Bv(),(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer"))&&(e.incomplete=!0),e}}function aD(){for(let e in Zt.restoreStructures)Zt[e]=Zt.restoreStructures[e];Zt.restoreStructures=null}function Zr(){let e=qe[se++];if(e<160)if(e<128){if(e<64)return e;{let i=Zt[e&63]||kn.getStructures&&pD()[e&63];return i?(i.read||(i.read=h1(i,e&63)),i.read()):e}}else if(e<144)if(e-=128,kn.mapsAsObjects){let i={};for(let s=0;s<e;s++)i[gD()]=Zr();return i}else{let i=new Map;for(let s=0;s<e;s++)i.set(Zr(),Zr());return i}else{e-=144;let i=new Array(e);for(let s=0;s<e;s++)i[s]=Zr();return i}else if(e<192){let i=e-160;if(Po>=se)return Ml.slice(se-ws,(se+=i)-ws);if(Po==0&&Cl<140){let s=i<16?d1(i):mD(i);if(s!=null)return s}return c1(i)}else{let i;switch(e){case 192:return null;case 193:return ls?(i=Zr(),i>0?ls[1].slice(ls.position1,ls.position1+=i):ls[0].slice(ls.position0,ls.position0-=i)):u1;case 194:return!1;case 195:return!0;case 196:return s1(qe[se++]);case 197:return i=ar.getUint16(se),se+=2,s1(i);case 198:return i=ar.getUint32(se),se+=4,s1(i);case 199:return Nc(qe[se++]);case 200:return i=ar.getUint16(se),se+=2,Nc(i);case 201:return i=ar.getUint32(se),se+=4,Nc(i);case 202:if(i=ar.getFloat32(se),kn.useFloat32>2){let s=Fv[(qe[se]&127)<<1|qe[se+1]>>7];return se+=4,(s*i+(i>0?.5:-.5)>>0)/s}return se+=4,i;case 203:return i=ar.getFloat64(se),se+=8,i;case 204:return qe[se++];case 205:return i=ar.getUint16(se),se+=2,i;case 206:return i=ar.getUint32(se),se+=4,i;case 207:return kn.int64AsNumber?(i=ar.getUint32(se)*4294967296,i+=ar.getUint32(se+4)):i=ar.getBigUint64(se),se+=8,i;case 208:return ar.getInt8(se++);case 209:return i=ar.getInt16(se),se+=2,i;case 210:return i=ar.getInt32(se),se+=4,i;case 211:return kn.int64AsNumber?(i=ar.getInt32(se)*4294967296,i+=ar.getUint32(se+4)):i=ar.getBigInt64(se),se+=8,i;case 212:if(i=qe[se++],i==114)return dD(qe[se++]&63);{let s=En[i];if(s)return s.read?(se++,s.read(Zr())):s.noBuffer?(se++,s()):s(qe.subarray(se,++se));throw new Error("Unknown extension "+i)}case 213:return i=qe[se],i==114?(se++,dD(qe[se++]&63,qe[se++])):Nc(2);case 214:return Nc(4);case 215:return Nc(8);case 216:return Nc(16);case 217:return i=qe[se++],Po>=se?Ml.slice(se-ws,(se+=i)-ws):yq(i);case 218:return i=ar.getUint16(se),se+=2,Po>=se?Ml.slice(se-ws,(se+=i)-ws):vq(i);case 219:return i=ar.getUint32(se),se+=4,Po>=se?Ml.slice(se-ws,(se+=i)-ws):xq(i);case 220:return i=ar.getUint16(se),se+=2,cD(i);case 221:return i=ar.getUint32(se),se+=4,cD(i);case 222:return i=ar.getUint16(se),se+=2,uD(i);case 223:return i=ar.getUint32(se),se+=4,uD(i);default:if(e>=224)return e-256;if(e===void 0){let s=new Error("Unexpected end of MessagePack data");throw s.incomplete=!0,s}throw new Error("Unknown MessagePack token "+e)}}}var gq=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function h1(e,i){function s(){if(s.count++>2){let o=e.read=new Function("r","return function(){return {"+e.map(c=>gq.test(c)?c+":r()":"["+JSON.stringify(c)+"]:r()").join(",")+"}}")(Zr);return e.highByte===0&&(e.read=lD(i,e.read)),o()}let a={};for(let o=0,c=e.length;o<c;o++){let d=e[o];a[d]=Zr()}return a}return s.count=0,e.highByte===0?lD(i,s):s}var lD=(e,i)=>function(){let s=qe[se++];if(s===0)return i();let a=e<32?-(e+(s<<5)):e+(s<<5),o=Zt[a]||pD()[a];if(!o)throw new Error("Record id is not defined for "+a);return o.read||(o.read=h1(o,e)),o.read()};function pD(){let e=vD(()=>(qe=null,kn.getStructures()));return Zt=kn._mergeStructures(e,Zt)}var c1=Nv,yq=Nv,vq=Nv,xq=Nv;function Nv(e){let i;if(e<16&&(i=d1(e)))return i;if(e>64&&o1)return o1.decode(qe.subarray(se,se+=e));let s=se+e,a=[];for(i="";se<s;){let o=qe[se++];if(!(o&128))a.push(o);else if((o&224)===192){let c=qe[se++]&63;a.push((o&31)<<6|c)}else if((o&240)===224){let c=qe[se++]&63,d=qe[se++]&63;a.push((o&31)<<12|c<<6|d)}else if((o&248)===240){let c=qe[se++]&63,d=qe[se++]&63,g=qe[se++]&63,b=(o&7)<<18|c<<12|d<<6|g;b>65535&&(b-=65536,a.push(b>>>10&1023|55296),b=56320|b&1023),a.push(b)}else a.push(o);a.length>=4096&&(i+=qi.apply(String,a),a.length=0)}return a.length>0&&(i+=qi.apply(String,a)),i}function cD(e){let i=new Array(e);for(let s=0;s<e;s++)i[s]=Zr();return i}function uD(e){if(kn.mapsAsObjects){let i={};for(let s=0;s<e;s++)i[gD()]=Zr();return i}else{let i=new Map;for(let s=0;s<e;s++)i.set(Zr(),Zr());return i}}var qi=String.fromCharCode;function mD(e){let i=se,s=new Array(e);for(let a=0;a<e;a++){let o=qe[se++];if((o&128)>0){se=i;return}s[a]=o}return qi.apply(String,s)}function d1(e){if(e<4)if(e<2){if(e===0)return"";{let i=qe[se++];if((i&128)>1){se-=1;return}return qi(i)}}else{let i=qe[se++],s=qe[se++];if((i&128)>0||(s&128)>0){se-=2;return}if(e<3)return qi(i,s);let a=qe[se++];if((a&128)>0){se-=3;return}return qi(i,s,a)}else{let i=qe[se++],s=qe[se++],a=qe[se++],o=qe[se++];if((i&128)>0||(s&128)>0||(a&128)>0||(o&128)>0){se-=4;return}if(e<6){if(e===4)return qi(i,s,a,o);{let c=qe[se++];if((c&128)>0){se-=5;return}return qi(i,s,a,o,c)}}else if(e<8){let c=qe[se++],d=qe[se++];if((c&128)>0||(d&128)>0){se-=6;return}if(e<7)return qi(i,s,a,o,c,d);let g=qe[se++];if((g&128)>0){se-=7;return}return qi(i,s,a,o,c,d,g)}else{let c=qe[se++],d=qe[se++],g=qe[se++],b=qe[se++];if((c&128)>0||(d&128)>0||(g&128)>0||(b&128)>0){se-=8;return}if(e<10){if(e===8)return qi(i,s,a,o,c,d,g,b);{let j=qe[se++];if((j&128)>0){se-=9;return}return qi(i,s,a,o,c,d,g,b,j)}}else if(e<12){let j=qe[se++],_e=qe[se++];if((j&128)>0||(_e&128)>0){se-=10;return}if(e<11)return qi(i,s,a,o,c,d,g,b,j,_e);let $=qe[se++];if(($&128)>0){se-=11;return}return qi(i,s,a,o,c,d,g,b,j,_e,$)}else{let j=qe[se++],_e=qe[se++],$=qe[se++],rt=qe[se++];if((j&128)>0||(_e&128)>0||($&128)>0||(rt&128)>0){se-=12;return}if(e<14){if(e===12)return qi(i,s,a,o,c,d,g,b,j,_e,$,rt);{let st=qe[se++];if((st&128)>0){se-=13;return}return qi(i,s,a,o,c,d,g,b,j,_e,$,rt,st)}}else{let st=qe[se++],ut=qe[se++];if((st&128)>0||(ut&128)>0){se-=14;return}if(e<15)return qi(i,s,a,o,c,d,g,b,j,_e,$,rt,st,ut);let gt=qe[se++];if((gt&128)>0){se-=15;return}return qi(i,s,a,o,c,d,g,b,j,_e,$,rt,st,ut,gt)}}}}}function s1(e){return kn.copyBuffers?Uint8Array.prototype.slice.call(qe,se,se+=e):qe.subarray(se,se+=e)}function Nc(e){let i=qe[se++];if(En[i])return En[i](qe.subarray(se,se+=e));throw new Error("Unknown extension type "+i)}var hD=new Array(4096);function gD(){let e=qe[se++];if(e>=160&&e<192){if(e=e-160,Po>=se)return Ml.slice(se-ws,(se+=e)-ws);if(!(Po==0&&Cl<180))return c1(e)}else return se--,Zr();let i=(e<<5^(e>1?ar.getUint16(se):e>0?qe[se]:0))&4095,s=hD[i],a=se,o=se+e-3,c,d=0;if(s&&s.bytes==e){for(;a<o;){if(c=ar.getUint32(a),c!=s[d++]){a=1879048192;break}a+=4}for(o+=3;a<o;)if(c=qe[a++],c!=s[d++]){a=1879048192;break}if(a===o)return se=a,s.string;o-=3,a=se}for(s=[],hD[i]=s,s.bytes=e;a<o;)c=ar.getUint32(a),s.push(c),a+=4;for(o+=3;a<o;)c=qe[a++],s.push(c);let g=e<16?d1(e):mD(e);return g!=null?s.string=g:s.string=c1(e)}var dD=(e,i)=>{var s=Zr();let a=e;i!==void 0&&(e=e<32?-((i<<5)+e):(i<<5)+e,s.highByte=i);let o=Zt[e];return o&&o.isShared&&((Zt.restoreStructures||(Zt.restoreStructures=[]))[e]=o),Zt[e]=s,s.read=h1(s,a),s.read()},yD=typeof self=="object"?self:global;En[0]=()=>{};En[0].noBuffer=!0;En[101]=()=>{let e=Zr();return(yD[e[0]]||Error)(e[1])};En[105]=e=>{let i=ar.getUint32(se-4);Ta||(Ta=new Map);let s=qe[se],a;s>=144&&s<160||s==220||s==221?a=[]:a={};let o={target:a};Ta.set(i,o);let c=Zr();return o.used?Object.assign(a,c):(o.target=c,c)};En[112]=e=>{let i=ar.getUint32(se-4),s=Ta.get(i);return s.used=!0,s.target};En[115]=()=>new Set(Zr());var f1=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map(e=>e+"Array");En[116]=e=>{let i=e[0],s=f1[i];if(!s)throw new Error("Could not find typed array for code "+i);return new yD[s](Uint8Array.prototype.slice.call(e,1).buffer)};En[120]=()=>{let e=Zr();return new RegExp(e[0],e[1])};En[98]=e=>{let i=(e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3],s=se;se+=i-4,ls=[Zr(),Zr()],ls.position0=0,ls.position1=0;let a=se;se=s;try{return Zr()}finally{se=a}};En[255]=e=>e.length==4?new Date((e[0]*16777216+(e[1]<<16)+(e[2]<<8)+e[3])*1e3):e.length==8?new Date(((e[0]<<22)+(e[1]<<14)+(e[2]<<6)+(e[3]>>2))/1e6+((e[3]&3)*4294967296+e[4]*16777216+(e[5]<<16)+(e[6]<<8)+e[7])*1e3):e.length==12?new Date(((e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3])/1e6+((e[4]&128?-281474976710656:0)+e[6]*1099511627776+e[7]*4294967296+e[8]*16777216+(e[9]<<16)+(e[10]<<8)+e[11])*1e3):new Date("invalid");function vD(e){let i=Cl,s=se,a=ws,o=Po,c=Ml,d=Ta,g=ls,b=new Uint8Array(qe.slice(0,Cl)),j=Zt,_e=Zt.slice(0,Zt.length),$=kn,rt=Kh,st=e();return Cl=i,se=s,ws=a,Po=o,Ml=c,Ta=d,ls=g,qe=b,Kh=rt,Zt=j,Zt.splice(0,Zt.length,..._e),kn=$,ar=new DataView(qe.buffer,qe.byteOffset,qe.byteLength),st}function Bv(){qe=null,Ta=null,Zt=null}function xD(e){e.unpack?En[e.type]=e.unpack:En[e.type]=e}var Fv=new Array(147);for(let e=0;e<256;e++)Fv[e]=+("1e"+Math.floor(45.15-e*.30103));var kv=new Do({useRecords:!1});kv.unpack;kv.unpackMultiple;kv.unpack;var Aq=new Float32Array(1);new Uint8Array(Aq.buffer,0,4);var zv;try{zv=new TextEncoder}catch{}var Uv,m1,Gv=typeof Buffer<"u",p1=Gv?Buffer.allocUnsafeSlow:Uint8Array,AD=Gv?Buffer:Uint8Array,bD=Gv?4294967296:2144337920,Se,ni,ue$1=0,Oo,Io=null,_q=/[\u0080-\uFFFF]/,nm$2=Symbol("record-id"),Fc=class extends Do{constructor(e){super(e),this.offset=0;let i,s,a,o,c,d=0,g=AD.prototype.utf8Write?function(Pt,It,Lt){return Se.utf8Write(Pt,It,Lt)}:zv&&zv.encodeInto?function(Pt,It){return zv.encodeInto(Pt,Se.subarray(It)).written}:!1,b=this;e||(e={});let j=e&&e.sequential,_e=e.structures||e.saveStructures,$=e.maxSharedStructures;if($==null&&($=_e?32:0),$>8160)throw new Error("Maximum maxSharedStructure is 8160");let rt=e.maxOwnStructures;rt==null&&(rt=_e?32:64),j&&!e.saveStructures&&(this.structures=[]);let st=$>32||rt+$>64,ut=$+64,gt=$+rt+64;if(gt>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let wt=[],yt=0,At=0;this.pack=this.encode=function(Pt,It){if(Se||(Se=new p1(8192),ni=new DataView(Se.buffer,0,8192),ue$1=0),Oo=Se.length-10,Oo-ue$1<2048?(Se=new p1(Se.length),ni=new DataView(Se.buffer,0,Se.length),Oo=Se.length-10,ue$1=0):ue$1=ue$1+7&2147483640,i=ue$1,c=b.structuredClone?new Map:null,b.bundleStrings?(Io=["",""],Se[ue$1++]=214,Se[ue$1++]=98,Io.position=ue$1-i,ue$1+=4):Io=null,s=b.structures,s){s.uninitialized&&(s=b._mergeStructures(b.getStructures()));let Lt=s.sharedLength||0;if(Lt>$)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+s.sharedLength);if(!s.transitions){s.transitions=Object.create(null);for(let Nt=0;Nt<Lt;Nt++){let Ht=s[Nt];if(!Ht)continue;let dr,hs=s.transitions;for(let _s=0,ds=Ht.length;_s<ds;_s++){let Nn=Ht[_s];dr=hs[Nn],dr||(dr=hs[Nn]=Object.create(null)),hs=dr}hs[nm$2]=Nt+64}d=Lt}j||(s.nextId=Lt+64)}a&&(a=!1),o=s||[];try{if(Ct(Pt),Io){ni.setUint32(Io.position+i,ue$1-Io.position-i);let Lt=Io;Io=null,Ct(Lt[0]),Ct(Lt[1])}if(b.offset=ue$1,c&&c.idsToInsert){ue$1+=c.idsToInsert.length*6,ue$1>Oo&&kt(ue$1),b.offset=ue$1;let Lt=Tq(Se.subarray(i,ue$1),c.idsToInsert);return c=null,Lt}return It&ED?(Se.start=i,Se.end=ue$1,Se):Se.subarray(i,ue$1)}finally{if(s){if(At<10&&At++,yt>1e4)s.transitions=null,At=0,yt=0,wt.length>0&&(wt=[]);else if(wt.length>0&&!j){for(let Lt=0,Nt=wt.length;Lt<Nt;Lt++)wt[Lt][nm$2]=0;wt=[]}if(a&&b.saveStructures){let Lt=s.sharedLength||$;s.length>Lt&&(s=s.slice(0,Lt));let Nt=Se.subarray(i,ue$1);return b.saveStructures(s,d)===!1?(b._mergeStructures(b.getStructures()),b.pack(Pt)):(d=Lt,Nt)}}It&Rq&&(ue$1=i)}};let Ct=Pt=>{ue$1>Oo&&(Se=kt(ue$1));var It=typeof Pt,Lt;if(It==="string"){let Nt=Pt.length;if(Io&&Nt>=8&&Nt<4096){let hs=_q.test(Pt);Io[hs?0:1]+=Pt,Se[ue$1++]=193,Ct(hs?-Nt:Nt);return}let Ht;Nt<32?Ht=1:Nt<256?Ht=2:Nt<65536?Ht=3:Ht=5;let dr=Nt*3;if(ue$1+dr>Oo&&(Se=kt(ue$1+dr)),Nt<64||!g){let hs,_s,ds,Nn=ue$1+Ht;for(hs=0;hs<Nt;hs++)_s=Pt.charCodeAt(hs),_s<128?Se[Nn++]=_s:_s<2048?(Se[Nn++]=_s>>6|192,Se[Nn++]=_s&63|128):(_s&64512)===55296&&((ds=Pt.charCodeAt(hs+1))&64512)===56320?(_s=65536+((_s&1023)<<10)+(ds&1023),hs++,Se[Nn++]=_s>>18|240,Se[Nn++]=_s>>12&63|128,Se[Nn++]=_s>>6&63|128,Se[Nn++]=_s&63|128):(Se[Nn++]=_s>>12|224,Se[Nn++]=_s>>6&63|128,Se[Nn++]=_s&63|128);Lt=Nn-ue$1-Ht}else Lt=g(Pt,ue$1+Ht,dr);Lt<32?Se[ue$1++]=160|Lt:Lt<256?(Ht<2&&Se.copyWithin(ue$1+2,ue$1+1,ue$1+1+Lt),Se[ue$1++]=217,Se[ue$1++]=Lt):Lt<65536?(Ht<3&&Se.copyWithin(ue$1+3,ue$1+2,ue$1+2+Lt),Se[ue$1++]=218,Se[ue$1++]=Lt>>8,Se[ue$1++]=Lt&255):(Ht<5&&Se.copyWithin(ue$1+5,ue$1+3,ue$1+3+Lt),Se[ue$1++]=219,ni.setUint32(ue$1,Lt),ue$1+=4),ue$1+=Lt}else if(It==="number")if(Pt>>>0===Pt)Pt<64?Se[ue$1++]=Pt:Pt<256?(Se[ue$1++]=204,Se[ue$1++]=Pt):Pt<65536?(Se[ue$1++]=205,Se[ue$1++]=Pt>>8,Se[ue$1++]=Pt&255):(Se[ue$1++]=206,ni.setUint32(ue$1,Pt),ue$1+=4);else if(Pt>>0===Pt)Pt>=-32?Se[ue$1++]=256+Pt:Pt>=-128?(Se[ue$1++]=208,Se[ue$1++]=Pt+256):Pt>=-32768?(Se[ue$1++]=209,ni.setInt16(ue$1,Pt),ue$1+=2):(Se[ue$1++]=210,ni.setInt32(ue$1,Pt),ue$1+=4);else{let Nt;if((Nt=this.useFloat32)>0&&Pt<4294967296&&Pt>=-2147483648){Se[ue$1++]=202,ni.setFloat32(ue$1,Pt);let Ht;if(Nt<4||(Ht=Pt*Fv[(Se[ue$1]&127)<<1|Se[ue$1+1]>>7])>>0===Ht){ue$1+=4;return}else ue$1--}Se[ue$1++]=203,ni.setFloat64(ue$1,Pt),ue$1+=8}else if(It==="object")if(!Pt)Se[ue$1++]=192;else{if(c){let Ht=c.get(Pt);if(Ht){if(!Ht.id){let dr=c.idsToInsert||(c.idsToInsert=[]);Ht.id=dr.push(Ht)}Se[ue$1++]=214,Se[ue$1++]=112,ni.setUint32(ue$1,Ht.id),ue$1+=4;return}else c.set(Pt,{offset:ue$1-i})}let Nt=Pt.constructor;if(Nt===Object)Tt(Pt,!0);else if(Nt===Array){Lt=Pt.length,Lt<16?Se[ue$1++]=144|Lt:Lt<65536?(Se[ue$1++]=220,Se[ue$1++]=Lt>>8,Se[ue$1++]=Lt&255):(Se[ue$1++]=221,ni.setUint32(ue$1,Lt),ue$1+=4);for(let Ht=0;Ht<Lt;Ht++)Ct(Pt[Ht])}else if(Nt===Map){Lt=Pt.size,Lt<16?Se[ue$1++]=128|Lt:Lt<65536?(Se[ue$1++]=222,Se[ue$1++]=Lt>>8,Se[ue$1++]=Lt&255):(Se[ue$1++]=223,ni.setUint32(ue$1,Lt),ue$1+=4);for(let[Ht,dr]of Pt)Ct(Ht),Ct(dr)}else{for(let Ht=0,dr=Uv.length;Ht<dr;Ht++){let hs=m1[Ht];if(Pt instanceof hs){let _s=Uv[Ht];if(_s.write){_s.type&&(Se[ue$1++]=212,Se[ue$1++]=_s.type,Se[ue$1++]=0),Ct(_s.write.call(this,Pt));return}let ds=Se,Nn=ni,us=ue$1;Se=null;let hn;try{hn=_s.pack.call(this,Pt,Ft=>(Se=ds,ds=null,ue$1+=Ft,ue$1>Oo&&kt(ue$1),{target:Se,targetView:ni,position:ue$1-Ft}),Ct)}finally{ds&&(Se=ds,ni=Nn,ue$1=us,Oo=Se.length-10)}hn&&(hn.length+ue$1>Oo&&kt(hn.length+ue$1),ue$1=Eq(hn,Se,ue$1,_s.type));return}}Tt(Pt,!Pt.hasOwnProperty)}}else if(It==="boolean")Se[ue$1++]=Pt?195:194;else if(It==="bigint"){if(Pt<BigInt(1)<<BigInt(63)&&Pt>=-(BigInt(1)<<BigInt(63)))Se[ue$1++]=211,ni.setBigInt64(ue$1,Pt);else if(Pt<BigInt(1)<<BigInt(64)&&Pt>0)Se[ue$1++]=207,ni.setBigUint64(ue$1,Pt);else if(this.largeBigIntToFloat)Se[ue$1++]=203,ni.setFloat64(ue$1,Number(Pt));else throw new RangeError(Pt+" was too large to fit in MessagePack 64-bit integer format, set largeBigIntToFloat to convert to float-64");ue$1+=8}else if(It==="undefined")this.encodeUndefinedAsNil?Se[ue$1++]=192:(Se[ue$1++]=212,Se[ue$1++]=0,Se[ue$1++]=0);else if(It==="function")Ct(this.writeFunction&&this.writeFunction());else throw new Error("Unknown type: "+It)},Tt=this.useRecords===!1?this.variableMapSize?Pt=>{let It=Object.keys(Pt),Lt=It.length;Lt<16?Se[ue$1++]=128|Lt:Lt<65536?(Se[ue$1++]=222,Se[ue$1++]=Lt>>8,Se[ue$1++]=Lt&255):(Se[ue$1++]=223,ni.setUint32(ue$1,Lt),ue$1+=4);let Nt;for(let Ht=0;Ht<Lt;Ht++)Ct(Nt=It[Ht]),Ct(Pt[Nt])}:(Pt,It)=>{Se[ue$1++]=222;let Lt=ue$1-i;ue$1+=2;let Nt=0;for(let Ht in Pt)(It||Pt.hasOwnProperty(Ht))&&(Ct(Ht),Ct(Pt[Ht]),Nt++);Se[Lt+++i]=Nt>>8,Se[Lt+i]=Nt&255}:Pt=>{let It=Object.keys(Pt),Lt,Nt=o.transitions||(o.transitions=Object.create(null)),Ht=0;for(let hs=0,_s=It.length;hs<_s;hs++){let ds=It[hs];Lt=Nt[ds],Lt||(Lt=Nt[ds]=Object.create(null),Ht++),Nt=Lt}let dr=Nt[nm$2];if(dr)dr>=96&&st?(Se[ue$1++]=((dr-=96)&31)+96,Se[ue$1++]=dr>>5):Se[ue$1++]=dr;else{dr=o.nextId,dr||(dr=64),dr<ut&&this.shouldShareStructure&&!this.shouldShareStructure(It)?(dr=o.nextOwnId,dr<gt||(dr=ut),o.nextOwnId=dr+1):(dr>=gt&&(dr=ut),o.nextId=dr+1);let hs=It.highByte=dr>=96&&st?dr-96>>5:-1;Nt[nm$2]=dr,o[dr-64]=It,dr<ut?(It.isShared=!0,o.sharedLength=dr-63,a=!0,hs>=0?(Se[ue$1++]=(dr&31)+96,Se[ue$1++]=hs):Se[ue$1++]=dr):(hs>=0?(Se[ue$1++]=213,Se[ue$1++]=114,Se[ue$1++]=(dr&31)+96,Se[ue$1++]=hs):(Se[ue$1++]=212,Se[ue$1++]=114,Se[ue$1++]=dr),Ht&&(yt+=At*Ht),wt.length>=rt&&(wt.shift()[nm$2]=0),wt.push(Nt),Ct(It))}for(let hs=0,_s=It.length;hs<_s;hs++)Ct(Pt[It[hs]])},kt=Pt=>{let It;if(Pt>16777216){if(Pt-i>bD)throw new Error("Packed buffer would be larger than maximum buffer size");It=Math.min(bD,Math.round(Math.max((Pt-i)*(Pt>67108864?1.25:2),4194304)/4096)*4096)}else It=(Math.max(Pt-i<<2,Se.length-1)>>12)+1<<12;let Lt=new p1(It);return ni=new DataView(Lt.buffer,0,It),Se.copy?Se.copy(Lt,0,i,Pt):Lt.set(Se.slice(i,Pt)),ue$1-=i,i=0,Oo=Lt.length-10,Se=Lt}}useBuffer(e){Se=e,ni=new DataView(Se.buffer,Se.byteOffset,Se.byteLength),ue$1=0}};m1=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,im];Uv=[{pack(e,i,s){let a=e.getTime()/1e3;if((this.useTimestamp32||e.getMilliseconds()===0)&&a>=0&&a<4294967296){let{target:o,targetView:c,position:d}=i(6);o[d++]=214,o[d++]=255,c.setUint32(d,a)}else if(a>0&&a<17179869184){let{target:o,targetView:c,position:d}=i(10);o[d++]=215,o[d++]=255,c.setUint32(d,e.getMilliseconds()*4e6+(a/1e3/4294967296>>0)),c.setUint32(d+4,a)}else if(isNaN(a)){if(this.onInvalidDate)return i(0),s(this.onInvalidDate());let{target:o,targetView:c,position:d}=i(3);o[d++]=212,o[d++]=255,o[d++]=255}else{let{target:o,targetView:c,position:d}=i(15);o[d++]=199,o[d++]=12,o[d++]=255,c.setUint32(d,e.getMilliseconds()*1e6),c.setBigInt64(d+4,BigInt(Math.floor(a)))}}},{pack(e,i,s){let a=Array.from(e),{target:o,position:c}=i(this.structuredClone?3:0);this.structuredClone&&(o[c++]=212,o[c++]=115,o[c++]=0),s(a)}},{pack(e,i,s){let{target:a,position:o}=i(this.structuredClone?3:0);this.structuredClone&&(a[o++]=212,a[o++]=101,a[o++]=0),s([e.name,e.message])}},{pack(e,i,s){let{target:a,position:o}=i(this.structuredClone?3:0);this.structuredClone&&(a[o++]=212,a[o++]=120,a[o++]=0),s([e.source,e.flags])}},{pack(e,i){this.structuredClone?SD(e,16,i):wD(Gv?Buffer.from(e):new Uint8Array(e),i)}},{pack(e,i){let s=e.constructor;s!==AD&&this.structuredClone?SD(e,f1.indexOf(s.name),i):wD(e,i)}},{pack(e,i){let{target:s,position:a}=i(1);s[a]=193}}];function SD(e,i,s,a){let o=e.byteLength;if(o+1<256){var{target:c,position:d}=s(4+o);c[d++]=199,c[d++]=o+1}else if(o+1<65536){var{target:c,position:d}=s(5+o);c[d++]=200,c[d++]=o+1>>8,c[d++]=o+1&255}else{var{target:c,position:d,targetView:g}=s(7+o);c[d++]=201,g.setUint32(d,o+1),d+=4}c[d++]=116,c[d++]=i,c.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),d)}function wD(e,i){let s=e.byteLength;var a,o;if(s<256){var{target:a,position:o}=i(s+2);a[o++]=196,a[o++]=s}else if(s<65536){var{target:a,position:o}=i(s+3);a[o++]=197,a[o++]=s>>8,a[o++]=s&255}else{var{target:a,position:o,targetView:c}=i(s+5);a[o++]=198,c.setUint32(o,s),o+=4}a.set(e,o)}function Eq(e,i,s,a){let o=e.length;switch(o){case 1:i[s++]=212;break;case 2:i[s++]=213;break;case 4:i[s++]=214;break;case 8:i[s++]=215;break;case 16:i[s++]=216;break;default:o<256?(i[s++]=199,i[s++]=o):o<65536?(i[s++]=200,i[s++]=o>>8,i[s++]=o&255):(i[s++]=201,i[s++]=o>>24,i[s++]=o>>16&255,i[s++]=o>>8&255,i[s++]=o&255)}return i[s++]=a,i.set(e,s),s+=o,s}function Tq(e,i){let s,a=i.length*6,o=e.length-a;for(i.sort((c,d)=>c.offset>d.offset?1:-1);s=i.pop();){let c=s.offset,d=s.id;e.copyWithin(c+a,c,o),a-=6;let g=c+a;e[g++]=214,e[g++]=105,e[g++]=d>>24,e[g++]=d>>16&255,e[g++]=d>>8&255,e[g++]=d&255,o=c}return e}function Pl(e){if(e.Class){if(!e.pack&&!e.write)throw new Error("Extension has no pack or write function");if(e.pack&&!e.type)throw new Error("Extension has no type (numeric code to identify the extension)");m1.unshift(e.Class),Uv.unshift(e)}xD(e)}var _D=new Fc({useRecords:!1});_D.pack;_D.pack;var ED=512,Rq=1024,TD=new Fc({structuredClone:!0});Pl({Class:it.prototype.constructor,type:1,write(e){return{...e}},read(e){return Object.setPrototypeOf(e,it.prototype),e}});Pl({Class:Ue.prototype.constructor,type:2,write(e){return[...e]},read(e){return Object.setPrototypeOf(e,Ue.prototype),e}});Pl({Class:yr$1.prototype.constructor,type:3,write(e){return[...e]},read(e){return Object.setPrototypeOf(e,yr$1.prototype),e}});Pl({Class:tm.prototype.constructor,type:4,write(e){return e.id},read(e){return new tm(e)}});Pl({Class:rm.prototype.constructor,type:5,write(e){return e.data},read(e){return new rm(e)}});Pl({Class:vr.prototype.constructor,type:6,write(e){return{...e}},read(e){return Object.setPrototypeOf(e,vr.prototype),e}});function Lq(e){var i=0;if(e.length===0)return i;for(let s=0;s<e.length;s++){let a=e[s];i=(i<<5)-i+a,i=i&i}return i}function g1(e){if(Hh(e))return e;if(Array.isArray(e))return e.map(g1);if(typeof e=="object"&&e!==null){let i={};for(let s of Object.keys(e).sort())i[s]=g1(e[s]);return Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i}else return e}var jv;(e=>{function i(o){return TD.pack(o)}e.serialize=i;function s(o){return TD.unpack(o)}e.deserialize=s;function a(o){return Lq(i(g1(o))).toString()}e.checksum=a})(jv||(jv={}));var MD;(e=>{function i(a){return a.type==="Conditional"?a.condition.type==="Distance"?"Distance":"StateChange":a.type}e.toEventUIType=i;function s(a){return a==="Distance"||a==="StateChange"?"Conditional":a}e.fromEventUIType=s})(MD||(MD={}));var Tn={LookAt:[],Follow:["Create"],DragDrop:["Transition","Animation","Audio","Particles","Create","SetVariable","DynamicVariablePlay","Conditional"],MouseHover:["Transition","Animation","Particles","Create","Destroy","SwitchCamera","SceneTransition","SetVariable","DynamicVariablePlay","Conditional"],Scroll:["Transition","Animation","Create","SetVariable","DynamicVariablePlay","Conditional"],Start:["Transition","Animation","Audio","Particles","Video","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],Conditional:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],MouseDown:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],MouseUp:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],MousePress:["Transition","Animation","Audio","Particles","Video","Link","Create","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],KeyDown:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],KeyUp:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],KeyPress:["Transition","Animation","Audio","Particles","Video","Link","Create","SwitchCamera","Reset","SetVariable","DynamicVariablePlay","Conditional"],GameControl:["Transition","Animation","Audio","Particles","Create","Conditional"],Collision:["Transition","Animation","Audio","Particles","Video","Create","Destroy","Reset","SetVariable","DynamicVariablePlay","Conditional"],Trigger:["Transition","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],Resize:["Transition","Animation","Audio","Particles","Video","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],VariableChange:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"]},CD;(e=>{function i(a){return a.type==="MouseDown"||a.type==="MouseUp"||a.type==="MousePress"||a.type==="KeyDown"||a.type==="KeyUp"||a.type==="KeyPress"}e.is=i;function s(a){return a==="MouseDown"||a==="MouseUp"||a==="MousePress"?{type:a,mode:"Object",disabled:!1,runMode:"Once",actions:new Ue}:{type:a,disabled:!1,key:void 0,runMode:"Once",actions:new Ue}}e.defaultData=s})(CD||(CD={}));var Hv;(e=>{function i(s){return{type:"Property",value:[s??null,"position","x"]}}e.propertyDefaultData=i,e.valueDefaultData={type:"Literal",value:0}})(Hv||(Hv={}));var y1;(e=>{function i(o){return{type:"Comparison",operator:"==",lOperand:Hv.propertyDefaultData(o),rOperand:{...Hv.valueDefaultData}}}e.comparisonDefaultData=i;function s(o){return{type:"Distance",toObject:o??null,fromObject:o??null,distance:200}}e.distanceDefaultData=s;function a(o,c){return{type:"State",object:o??null,state:c??null}}e.stateDefaultData=a})(y1||(y1={}));var PD;(e=>{function i(a){return a.type==="Conditional"}e.is=i;function s(a){return{type:"Conditional",disabled:!1,inActions:new Ue,outActions:new Ue,condition:y1.distanceDefaultData(a)}}e.defaultData=s})(PD||(PD={}));var DD;(e=>e.defaultData={type:"DragDrop",cursor:"hand",disabled:!1,dampingFactor:1,objects:[],snapTo:"center",snapSurfaceMode:"bbox",snapSurfaceOffset:0,dropOn:"all",autoOrient:!0,dropDestinations:[],plane:"adaptive",planeMode:"locked",referenceFrame:"global",limits:[-1/0,1/0,-1/0,1/0,-1/0,1/0],drop:!1,resetOnSnapFail:!1,snapSpeed:20,resetSpeed:20,dragDropActions:{drag:new Ue,drop:new Ue}})(DD||(DD={}));var Wv;(e=>e.defaultData={type:"Follow",disabled:!1,maxDelta:0,dampingFactor:1,target:"cursor",plane:"custom",resetOnPointerLeave:!0,resetAfterDistanceLimit:!0,enabledTranslation:[!0,!0,!0],limitDistanceEnabled:!1,limitDistance:1e3,snapDelay:0,resetSpeed:5,actions:new Ue})(Wv||(Wv={}));var qv;(e=>e.defaultData={type:"LookAt",disabled:!1,distance:1e3,dampingFactor:1,target:"cursor",tilt:"up",axis:"z",plane:"custom",resetOnPointerLeave:!0,resetAfterDistanceLimit:!0,enabledRotation:[!0,!0,!0],limitDistanceEnabled:!1,limitDistance:1e3,snapDelay:0,resetSpeed:5})(qv||(qv={}));var OD;(e=>{function i(a){return a.type==="MouseHover"}e.is=i;function s(){return{type:"MouseHover",disabled:!1,actions:new Ue}}e.defaultData=s})(OD||(OD={}));var ID;(e=>{function i(a){return a.type==="Scroll"}e.is=i;function s(){return{type:"Scroll",disabled:!1,steps:100,trigger:"load",startFrom:"enter",enterAnchor:"top",startOffset:0,endAfter:400,actions:new Ue}}e.defaultData=s})(ID||(ID={}));var RD;(e=>{function i(a){return a.type==="Start"}e.is=i;function s(){return{type:"Start",disabled:!1,actions:new Ue}}e.defaultData=s})(RD||(RD={}));var LD;(e=>{function i(a){return a.type==="Collision"}e.is=i;function s(){return{type:"Collision",disabled:!1,runMode:"Once",target:"character",actions:new Ue}}e.defaultData=s})(LD||(LD={}));var BD;(e=>{function i(a){return a.type==="Trigger"}e.is=i;function s(a,o){return{type:"Trigger",disabled:!1,runMode:"Once",target:"all",triggeringObjects:[],actions:new Ue,triggerZone:"box",position:o.toArray(),rotation:[0,0,0],size:a.toArray(),radius:a.length()/2,helperVisible:!0}}e.defaultData=s})(BD||(BD={}));var Yv;(e=>{e.defaultSizes={mobile:[480,480],tablet:[768,768],desktop:[1200,1200],custom:[769,1200]};function i(d){return d.type==="Resize"}e.is=i;function s(d){return typeof d=="string"?d:"custom"}e.sizeToDevice=s;function a(d){return typeof d=="string"?[...e.defaultSizes[d]]:[...d]}e.deviceToSize=a;function o(){let d={size:"mobile",operator:"<",actions:new Ue},g={size:"tablet",operator:"<",actions:new Ue},b={size:[...e.defaultSizes.custom],operator:"<>",actions:new Ue},j=new Ue;return j.push({id:Me.generateUUID(),fi:0,data:d},{id:Me.generateUUID(),fi:1,data:g},{id:Me.generateUUID(),fi:2,data:b}),{type:"Resize",disabled:!1,orientation:"horizontal",breakpoints:j}}e.defaultData=o;function c(){return{size:[...e.defaultSizes.custom],operator:"<>",actions:new Ue}}e.defaultBreakpointData=c})(Yv||(Yv={}));var Xv;(e=>{e.propertyPaths={Position:["position"],"Position X":["position","x"],"Position Y":["position","y"],"Position Z":["position","z"],Rotation:["rotation"],"Rotation X":["rotation","x"],"Rotation Y":["rotation","y"],"Rotation Z":["rotation","z"],Scale:["scale"],"Scale X":["scale","x"],"Scale Y":["scale","y"],"Scale Z":["scale","z"],Width:["width"],Height:["height"],Depth:["depth"],"Mouse Position X":["mouse","x"],"Mouse Position Y":["mouse","y"],"Mouse Pressed":["mouse","pressed"],"Screen Width":["mouse","width"],"Screen Height":["mouse","height"],"Hit Position X":["raycast","x"],"Hit Position Y":["raycast","y"],"Hit Position Z":["raycast","z"],"Hit Object Position X":["raycast","objX"],"Hit Object Position Y":["raycast","objY"],"Hit Object Position Z":["raycast","objZ"]};function i(a){return a.type==="VariableChange"}e.is=i;function s(){return{disabled:!1,type:"VariableChange",actions:new Ue,variableId:"",objectId:null,property:"Position X"}}e.defaultData=s})(Xv||(Xv={}));var As="personal camera",Ol="a218fcc3-276b-49b9-b485-49037fd14f5f",kD=2960946,si=5526619,Ro;(e=>{function i(rt,st){return rt[0]===st[0]&&rt[1]===st[1]}e.isEqual=i;function s(rt,st,ut){return[rt[0]+(st[0]-rt[0])*ut,rt[1]+(st[1]-rt[1])*ut]}e.lerp=s;function a(rt,st){return[rt[0]+st[0],rt[1]+st[1]]}e.add=a;function o(rt,st){return[rt[0]-st[0],rt[1]-st[1]]}e.sub=o;function c(rt,st){return Math.pow(st[0]-rt[0],2)+Math.pow(st[1]-rt[1],2)}e.distanceSquared=c;function d(rt,st){return Math.sqrt(c(rt,st))}e.distance=d;function g(rt,st){return rt[0]*st[0]+rt[1]*st[1]}e.dot=g;function b(rt,st){return[rt[0]*st,rt[1]*st]}e.scalarMultiply=b;function j(rt,st,ut){let gt=e.sub(st,rt),wt=e.sub(ut,rt),yt=e.dot(gt,wt)/e.dot(gt,gt),At=e.scalarMultiply(gt,yt);return e.add(rt,At)}e.projectionOnto=j;function _e(rt,st,ut){return d(rt,j(rt,st,ut))}e.projectionOntoDistance=_e;function $(rt,st){return[(rt[0]+st[0])*.5,(rt[1]+st[1])*.5]}e.center=$})(Ro||(Ro={}));var Lo;(e=>{function i(b,j){return b[0]===j[0]&&b[1]===j[1]&&b[2]===j[2]}e.isEqual=i;function s(b,j){return[b[0]+j[0],b[1]+j[1],b[2]+j[2]]}e.add=s;function a(b,j){return[b[0]-j[0],b[1]-j[1],b[2]-j[2]]}e.sub=a;function o(b,j){return[b[0]/j[0],b[1]/j[1],b[2]/j[2]]}e.div=o;function c(b,j){return[b[0]*j[0],b[1]*j[1],b[2]*j[2]]}e.mul=c;function d(b,j){return Math.hypot(b[0]-j[0],b[1]-j[1],b[2]-j[2])}e.dist=d;function g(b,j,_e){return[b[0]+(j[0]-b[0])*_e,b[1]+(j[1]-b[1])*_e,b[2]+(j[2]-b[2])*_e]}e.lerp=g})(Lo||(Lo={}));var sm;(e=>{function i(a,o){return a[0]===o[0]&&a[1]===o[1]&&a[2]===o[2]&&a[3]===o[3]}e.isEqual=i;function s(a,o,c){return[a[0]+(o[0]-a[0])*c,a[1]+(o[1]-a[1])*c,a[2]+(o[2]-a[2])*c,a[3]+(o[3]-a[3])*c]}e.lerp=s})(sm||(sm={}));var Dl;(e=>{e.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function i(o,c){for(let d=0;d<16;d++)if(o[d]!==c[d])return!1;return!0}e.isEqual=i;function s(o){return o??e.identity}e.simplify=s;function a(o,c){let d=c.slice(0);for(var g=0,b=c.length;g<b;g+=3){let j=o[3]*c[g]+o[7]*c[g+1]+o[11]*c[g+2]+o[15];d[g]=(o[0]*c[g]+o[4]*c[g+1]+o[8]*c[g+2]+o[12])/j,d[g+1]=(o[1]*c[g]+o[5]*c[g+1]+o[9]*c[g+2]+o[13])/j,d[g+2]=(o[2]*c[g]+o[6]*c[g+1]+o[10]*c[g+2]+o[14])/j}return d}e.applyMatrix4=a})(Dl||(Dl={}));var Ri;(e=>{function i(j){return typeof j=="object"&&typeof j.r=="number"&&typeof j.g=="number"&&typeof j.b=="number"}e.isRGB=i,e.white={r:1,g:1,b:1},e.red={r:1,g:0,b:0},e.black={r:0,g:0,b:0};function s(j){return{r:Math.round(j.r*255),g:Math.round(j.g*255),b:Math.round(j.b*255),a:1}}e.toRgb255a1=s;function a(j){return{r:j.r,g:j.g,b:j.b}}e.clone=a;function o(j){return j=Math.floor(j),{r:(j>>16&255)/255,g:(j>>8&255)/255,b:(j&255)/255}}e.fromHex=o;function c(j){return Math.round(j.r*255)*65536+Math.round(j.g*255)*256+Math.round(j.b*255)}e.toHex=c;function d(j,_e){return j.r===_e.r&&j.g===_e.g&&j.b===_e.b}e.equals=d;function g(j,_e){return j.r.toFixed(2)===_e.r.toFixed(2)&&j.g.toFixed(2)===_e.g.toFixed(2)&&j.b.toFixed(2)===_e.b.toFixed(2)}e.equalsFixed=g;function b(j,_e,$){return{r:j.r+(_e.r-j.r)*$,g:j.g+(_e.g-j.g)*$,b:j.b+(_e.b-j.b)*$}}e.lerp=b})(Ri||(Ri={}));var St;(e=>{e.white={...Ri.white,a:1},e.transparent={...Ri.white,a:0};function i(b){return{r:b[0],g:b[1],b:b[2],a:b[3]}}e.from0to1=i;function s(b,j){return{...Ri.fromHex(b),a:j}}e.fromHexAndA=s;function a(b){return{r:Math.round(b.r*255),g:Math.round(b.g*255),b:Math.round(b.b*255),a:b.a}}e.toRgb255a1=a;function o(b,j){return Ri.equals(b,j)&&b.a===j.a}e.equals=o;function c(b,j){return Ri.equalsFixed(b,j)&&b.a.toFixed(2)===j.a.toFixed(2)}e.equalsFixed=c;function d(b,j,_e){return{r:b.r+(j.r-b.r)*_e,g:b.g+(j.g-b.g)*_e,b:b.b+(j.b-b.b)*_e,a:b.a+(j.a-b.a)*_e}}e.lerp=d;function g({r:b,g:j,b:_e,a:$}=e.white){return`rgba(${b*255}, ${j*255}, ${_e*255}, ${$})`}e.toStyle=g})(St||(St={}));var Qv;(e=>e.identity={position:[0,0,0],rotation:[0,0,0],scale:[1,1,1]})(Qv||(Qv={}));var ND;(e=>e.defaultData={mass:1,stiffness:80,damping:10,velocity:0})(ND||(ND={}));var FD;(e=>e.defaultData={control1:[.5,0],control2:[.5,1]})(FD||(FD={}));var Ma;(e=>(e.linear=[0,0,1,1],e.ease=[.25,.1,.25,1],e.easeIn=[.42,0,1,1],e.easeOut=[0,0,.58,1],e.easeInOut=[.42,0,.58,1]))(Ma||(Ma={}));function v1(e){return typeof e=="string"&&e.length===36?/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e):!1}var Ks;(e=>{e.all=["PerspectiveCamera","OrthographicCamera"];function i(s){return e.all.includes(s)}e.is=i})(Ks||(Ks={}));var Il;(e=>{e.DefaultUp=[0,1,0],e.DefaultTargetOffset=1e3,e.defaultData={far:1e5,type:"OrthographicCamera",perspective:{near:70,fov:45,zoom:1},orthographic:{near:-1e5,zoom:1},up:e.DefaultUp,isUpVectorFlipped:!1,targetOffset:e.DefaultTargetOffset};function i(s){return s.type==="PerspectiveCamera"?s.perspective.zoom:s.orthographic.zoom}e.getZoom=i})(Il||(Il={}));var Bo;(e=>{function i(a,o=.1){return{disabled:!1,type:"linear",hideBase:!1,count:3,radial:{radius:Math.max(a[0],a[1])*2,start:0,end:360,alignment:!1,axis:"y",scale:[1,1,1],rotation:[0,0,0],position:[0,0,0]},toObject:{object:"",spreadType:"random",scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],axis:"x",seed:0,count:99,align:"normal"},linear:{scale:[1,1,1],rotation:[0,0,0],position:[a[0]+a[0]*o,0,0]},grid:{count:[2,2,2],size:a.map(c=>c*(1+o)),useCenter:!0},randomness:!1,randomnessObject:{strength:100,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],movement:1,seed:0,freqScale:10,noiseType:"perlin"}}}e.defaultData=i;function s(a,o){let c={...a};if(x1.forEach(d=>{Object.assign(c,{[d]:o[d]??a[d]})}),c.radial={...a.radial},o.radial){let d=a.radial,g=o.radial;b1.forEach(b=>{Object.assign(c.radial,{[b]:g[b]??d[b]})})}if(c.linear={...a.linear},o.linear){let d=a.linear,g=o.linear;S1.forEach(b=>{Object.assign(c.linear,{[b]:g[b]??d[b]})})}if(c.grid={...a.grid},o.grid){let d=a.grid,g=o.grid;w1.forEach(b=>{Object.assign(c.grid,{[b]:g[b]??d[b]})})}if(c.toObject={...a.toObject},o.toObject){let d=a.toObject,g=o.toObject;A1.forEach(b=>{Object.assign(c.toObject,{[b]:g[b]??d[b]})})}if(c.randomnessObject={...a.randomnessObject},o.randomnessObject){let d=a.randomnessObject,g=o.randomnessObject;_1.forEach(b=>{Object.assign(c.randomnessObject,{[b]:g[b]??d[b]})})}return c}e.merge=s})(Bo||(Bo={}));var Kv;(e=>{e.defaultData={radial:{},linear:{},grid:{},toObject:{},randomnessObject:{}};let i=["radial","linear","grid","toObject","randomnessObject"];function s(a,o){let c=[];a.count!==void 0&&c.push({type:0,path:o,props:{count:a.count}});for(let d of i){let g=a[d];g&&Object.keys(g).length>0&&c.push({type:0,path:[...o,d],props:g})}return c}e.toOps=s})(Kv||(Kv={}));var x1=["count"],b1=["radius","start","end","position","scale","rotation"],S1=["position","scale","rotation"],w1=["count","size"],A1=["count","position","scale","rotation"],_1=["strength","scale","rotation","position","movement","seed","freqScale"],Zv;(e=>{e.all=["PointLight","SpotLight","DirectionalLight","HemisphereLight"];function i(s){return e.all.includes(s)}e.is=i})(Zv||(Zv={}));var Jv;(e=>{function i(a){return s(a)}e.defaultData=i;function s(a){if(a==="PointLight")return{type:a,color:St.white,intensity:1,distance:2e3,decay:1,shadows:!0,shadowResolution:1024,shadowRadius:1,penumbraSize:.5,depth:1e5};if(a==="SpotLight")return{type:a,color:St.white,intensity:1,distance:2e3,decay:1,shadows:!0,penumbra:0,angle:30/180*Math.PI,depth:1e5,penumbraSize:.5,shadowResolution:1024,shadowRadius:1};if(a==="DirectionalLight")return{type:a,color:St.white,intensity:1,shadows:!0,size:2e3,depth:1e5,penumbraSize:.5,shadowResolution:1024,shadowRadius:1};throw new Error("not implemented")}})(Jv||(Jv={}));var Zh;(e=>(e.defaultShapeData={type:"PlaneEmitterShape",size:[100,100,100]},e.defaultCollisionData={colliderEntityId:null,collisionBounce:.75},e.defaultData={renderMaterial:{type:"particleMaterial",color:{r:1,g:.2,b:.545,a:1},color2:{r:.945,g:.714,b:.184,a:1},coloring:"gradient",ease:"linearFadeOut",easeSize:"linearFadeOut",transparent:!0,size:[40,40],texture:"pt_default_particle",spriteRotation:[0,0]},birthRatePerSec:50,gravity:1,noiseStrength:0,noiseScale:0,noiseSeed:1,noiseType:"curl",randomRotation:0,randomScale:.2,randomMass:.5,rootObjectType:"instancedMesh",life:1,direction:[0,0,0],directionMode:"axis",speed:10,shape:e.defaultShapeData,autoPlay:!0,emitTimeDelay:0,emitTimeCycle:"infinity",emitTimeLoopDelayStart:"end",emitTimeDuration:1,...e.defaultCollisionData}))(Zh||(Zh={}));var Rl;(e=>e.defaultData={enabled:"visibility",fusedBody:!0,rigidBody:"positioned",density:1,pointMass:0,gravityScale:1,friction:.5,damping:0,restitution:.2,colliderType:"convex",enabledRotation:[!0,!0,!0],enabledTranslation:[!0,!0,!0]})(Rl||(Rl={}));var E1;(e=>{e.defaultData={castShadow:!0,receiveShadow:!0};function i(s,a){return s.castShadow===a.castShadow&&s.receiveShadow===a.receiveShadow}e.equals=i})(E1||(E1={}));var T1;(e=>{e.defaultData={flatShading:!1,wireframe:!1,side:0};function i(s,a){return s.flatShading===a.flatShading&&s.side===a.side&&s.wireframe===a.wireframe}e.equals=i})(T1||(T1={}));var $v;(e=>e.defaultData={...T1.defaultData,...E1.defaultData})($v||($v={}));var VD;(e=>{function i(s,a){var c,d;let o=[];if("material"in s){let g=typeof s.material=="string"?a.materials[s.material]??((c=a.lib.materials[s.material])==null?void 0:c.asset):s.material;g&&o.push(g)}else if("materials"in s)for(let g of s.materials){let b=typeof g=="string"?a.materials[g]??((d=a.lib.materials[g])==null?void 0:d.asset):g;b&&o.push(b)}return o}e.getMaterialData=i})(VD||(VD={}));var Jh;(e=>(e.defaultVideo={data:"",thumb:"/_assets/_videos/catThumb.png",type:"video",name:"Cat video"},e.maxSize=3e7))(Jh||(Jh={}));var zD;(e=>{function i(s){return s==="texture"||s==="video"||s==="color"||s==="depth"||s==="normal"||s==="gradient"||s==="noise"||s==="fresnel"||s==="rainbow"||s==="toon"||s==="outline"||s==="particle"||s==="transmission"||s==="matcap"||s==="displace"||s==="pattern"||s==="light"}e.is=i})(zD||(zD={}));function GD(e){return e.type!=="displace"}var UD;(e=>{function i(s){return s==="phong"||s==="toon"||s==="lambert"||s==="physical"}e.is=i})(UD||(UD={}));var e0=["mode","gradientType","noiseType","displacementType","projection","cnormal","crop","axis","side"],jD=["wrapping","image","video","name","minFilter"],Hr;(e=>{function i(c,d){let{texture:g,...b}=d;if(Object.assign(c,b),g){let j=c.texture;j&&Object.assign(j,g)}}e.patch=i;function s(c,d){return c==="light"&&d?a(d):o(c)}e.defaultData=s;function a(c){let d={mode:0,isMask:!1,visible:!0,bumpMap:void 0,bumpMapIntensity:5,roughnessMap:void 0,alphaOverride:1};switch(c){case"phong":return{...d,category:"phong",specular:{r:.2,g:.2,b:.2},shininess:5,type:"light",visible:!0,mode:0,occlusion:!0,alpha:.6};case"toon":return{...d,category:"toon",specular:{r:.2,g:.2,b:.2},shininess:10,type:"light",alpha:1};case"lambert":return{...d,category:"lambert",emissive:{r:0,g:0,b:0},type:"light",alpha:1,visible:!0,mode:0,occlusion:!0};case"physical":return{...d,category:"physical",roughness:.2,metalness:.2,reflectivity:.2,type:"light",alpha:1,visible:!0,mode:0,occlusion:!0}}}function o(c){let d={alpha:1,mode:0,isMask:!1,visible:!0};switch(c){case"texture":return{...d,type:"texture",size:[128,128],blending:0,axis:"x",side:2,projection:0,texture:{image:"image_0",wrapping:1e3,repeat:[1,1],offset:[0,0],minFilter:1008},crop:!1};case"video":return{...d,type:"video",size:[128,128],blending:0,axis:"x",side:2,projection:0,texture:{video:Jh.defaultVideo,wrapping:1001,repeat:[1,1],offset:[0,0],minFilter:1008},crop:!1};case"color":return{...d,type:"color",color:Ri.fromHex(si)};case"depth":return{...d,type:"depth",gradientType:1,smooth:!1,isVector:!0,isWorldSpace:!1,origin:[0,0,0],direction:[1,0,0],colors:[[1,1,1,1],[0,0,0,1]],steps:[0,1],near:50,far:200};case"normal":return{...d,type:"normal",cnormal:[1,1,1]};case"gradient":return{...d,type:"gradient",gradientType:0,smooth:!1,colors:[[0,0,0,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,1,1,1,1,1,1,1,1,1],num:2,angle:0,offset:[0,0],morph:[0,0]};case"noise":return{...d,type:"noise",size:[100,100,100],noiseType:0,scale:1,move:1,colorA:{...Ri.fromHex(6710886),a:1},colorB:{...Ri.fromHex(6710886),a:1},colorC:{...Ri.fromHex(16777215),a:1},colorD:{...Ri.fromHex(16777215),a:1},distortion:[1,1],fA:[1.7,9.2],fB:[8.3,2.8],voronoiStyle:0,highCut:1,lowCut:0,smoothness:.3,seed:0,quality:1};case"fresnel":return{...d,type:"fresnel",color:St.fromHexAndA(16777215,1),bias:.1,scale:1,intensity:2,factor:1};case"rainbow":return{...d,type:"rainbow",filmThickness:30,movement:0,wavelengths:[0,0,0],noiseStrength:0,noiseScale:1,offset:[0,0,0]};case"toon":return{...d,type:"toon",positioning:2,colors:[[0,0,0,1],[.5,.5,.5,1],[.5,.5,.5,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,.475,.525,1,1,1,1,1,1,1],num:4,source:[0,1e3,0],isWorldSpace:!0,noiseStrength:0,noiseScale:1,shadowColor:St.fromHexAndA(0,0),offset:[0,0,0]};case"outline":return{...d,type:"outline",outlineColor:St.fromHexAndA(0,1),contourColor:St.fromHexAndA(0,1),outlineWidth:2,contourWidth:5,outlineThreshold:.4,contourThreshold:0,outlineSmoothing:0,contourFrequency:10,contourDirection:[0,1,0],positionalLines:!1,compensation:!0};case"matcap":return{...d,type:"matcap",texture:{image:"matcap_0",wrapping:1001,repeat:[1,1],offset:[0,0],minFilter:1008}};case"transmission":return{...d,type:"transmission",thickness:10,ior:1.5,roughness:1};case"displace":return{visible:!0,type:"displace",displacementType:"noise",noiseType:0,scale:10,movement:1,offset:[0,0,0],intensity:8,voronoiStyle:0,smoothness:.3,seed:0,highCut:1,lowCut:0,quality:1};case"pattern":return{...d,type:"pattern",style:0,projection:0,axis:"y",blending:0,offset:[0,0],colorA:{...Ri.fromHex(0),a:1},colorB:{...Ri.fromHex(16777215),a:1},frequency:[10,10],size:.5,variation:0,smoothness:.5,zigzag:0,rotation:0,vertical:[0,1],horizontal:[0,1],sides:6}}}})(Hr||(Hr={}));var oi;(e=>{function i(_e){return!_e.layers.some($=>$.data.type==="texture"&&$.data.projection!==0||$.data.type==="depth"&&!$.data.isWorldSpace||$.data.type==="noise"||$.data.type==="displace")}e.isMergable=i;function s(_e){let $="";return _e.layers.forEach(rt=>{Object.entries(rt.data).forEach(([st,ut])=>{$+=`${st}${ut}`,Array.isArray(ut)?ut.forEach(gt=>$+=`${gt}`):typeof ut=="object"?Object.values(ut).forEach(gt=>{typeof gt=="number"?$+=`${gt.toFixed(4)}`:$+=`${gt}`}):$+=`${ut}`})}),$}e.getHash=s;function a(){return{layers:new Ue}}e.defaultEmptyData=a;function o(_e="layer1",$="layer2"){return d("phong",_e,$)}e.defaultData=o;function c(_e,$){return{..._e,name:$}}e.withName=c;function d(_e,$="layer1",rt="layer2"){let st=new Ue;return st.push({fi:0,data:Hr.defaultData("light",_e),id:$}),st.push({fi:1,data:Hr.defaultData("color"),id:rt}),{layers:st}}e.defaultTwoLayerData=d;function g(_e){let $=Hr.defaultData("texture");_e&&Object.assign($.texture,{image:_e});let rt=new Ue;return rt.push({fi:0,data:$,id:"layer1"}),rt.push({fi:1,data:{...Hr.defaultData("transmission"),alpha:1},id:"layer2"}),rt.push({fi:2,data:{...Hr.defaultData("light","lambert"),alpha:0},id:"layer3"}),{layers:rt}}e.defaultUIObjectMaterial=g;function b(_e,$="phong",rt="layer1",st="layer2"){let ut=Hr.defaultData("texture");Object.assign(ut.texture,{image:_e});let gt=new Ue;return gt.push({fi:0,data:ut,id:rt}),gt.push({fi:1,data:Hr.defaultData("light",$),id:st}),{layers:gt}}e.defaultTwoLayerTextureData=b;function j(_e,$="phong",rt="layer1",st="layer2"){let ut=Hr.defaultData("video");Object.assign(ut.texture,{video:_e});let gt=new Ue;return gt.push({fi:0,data:ut,id:rt}),gt.push({fi:1,data:Hr.defaultData("light",$),id:st}),{layers:gt}}e.defaultTwoLayerVideoTextureData=j})(oi||(oi={}));var $h;(e=>{function i(){return{points:new Ue,roundness:0,shapeHoles:[],isClosed:!1}}e.defaultData=i})($h||($h={}));var ed;(e=>{function i(){return{points:new Ue,lastInsertionPlane:null,subdivisions:12,isClosed:!1}}e.defaultData=i})(ed||(ed={}));var M1={type:"Ellipse",width:50,height:50,spikes:16,angle:360,innerRadius:0},t0;(e=>{function i(s,a){let o={...s};return C1.forEach(c=>{Object.assign(o,{[c]:a[c]??s[c]})}),o}e.merge=i})(t0||(t0={}));var r0={shape:M1,depth:1,offset:0,bevel:50,bevelSides:6,angle:0,twist:0,startScale:1,endScale:1,capType:"flat"},C1=["depth","offset","angle","twist","startScale","endScale"],om;(e=>{function i(a){return a==="PolygonGeometry"||a==="RectangleGeometry"||a==="StarGeometry"||a==="TriangleGeometry"||a==="EllipseGeometry"||a==="UIGeometry"}e.is2DParametricMesh=i;function s(a){return a==="PolygonGeometry"||a==="PolygonGeometry"||a==="RectangleGeometry"||a==="StarGeometry"||a==="TriangleGeometry"||a==="EllipseGeometry"||a==="PathGeometry"||a==="VectorGeometry"||a==="ConeGeometry"||a==="CubeGeometry"||a==="CylinderGeometry"||a==="DodecahedronGeometry"||a==="HelixGeometry"||a==="IcosahedronGeometry"||a==="LatheGeometry"||a==="PyramidGeometry"||a==="SphereGeometry"||a==="PlaneGeometry"||a==="BackdropGeometry"||a==="TorusGeometry"||a==="TorusKnotGeometry"||a==="BooleanGeometry"||a==="TextGeometry"}e.isParametricMesh=s})(om||(om={}));var i0;(e=>{function i(s,a){let o={...s};return Object.assign(o,a),o.type==="PathGeometry"&&"extrusion"in a&&a.extrusion&&(o.extrusion={...s.extrusion},Object.assign(o.extrusion,t0.merge(o.extrusion,a.extrusion))),o}e.merge=i})(i0||(i0={}));var Ll;(e=>{function i(s){if(s==="RectangleGeometry")return{width:320,height:320,type:s,cornerRadius:[0,0,0,0],cornerType:0,depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if(s==="UIGeometry")return{type:s,frame:"",cornerRadius:[0,0,0,0],cornerType:0,width:1,height:1};if(s==="PathGeometry")return{type:s,width:1,height:1,depth:1,path:ed.defaultData(),extrusion:r0};if(s==="VectorGeometry")return{width:1,height:1,type:s,subdivisions:12,shape:$h.defaultData(),depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if(s==="BooleanGeometry")return{type:s,operation:2,width:0,height:0,depth:0,phongAngle:35};if(s==="TextGeometry")return{type:s,width:100,height:100,depth:0,horizontalAlign:1,verticalAlign:1,fontSize:16,lineHeight:1.2,letterSpacing:0,text:{textValue:""},textTransform:1,font:"Roboto_regular",extrudeBevelSize:0,extrudeBevelSegments:1};if(s==="SphereGeometry")return{type:"SphereGeometry",width:100,height:100,depth:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:180};throw new Error("not implemented")}e.defaultData=i})(Ll||(Ll={}));var P1=["width","height","depth"],n0;(e=>e.defaultData={enabled:!1,useBackgroundColor:!1,color:Ri.white,near:.1,far:2e3})(n0||(n0={}));var td;(e=>{let i={opacity:1,blendFunction:13,enabled:!1};e.defaultData={enabled:!1,pixelation:{...i,blendFunction:16,granularity:15},bloom:{...i,blendFunction:16,intensity:1,blurScale:1,luminanceThreshold:.25,luminanceSmoothing:.025,kernelSize:3},chromaticAberration:{...i,offset:[2,2]},vignette:{...i,darkness:1,offset:0},hueSaturation:{...i,hue:3,saturation:0},brightnessContrast:{...i,brightness:.25,contrast:0},depthOfField:{...i,focalLength:2,focusDistance:2,bokehScale:2},noise:{...i,blendFunction:16}}})(td||(td={}));var D1;(e=>e.defaultData={softShadowQuality:"low"})(D1||(D1={}));var O1;(e=>e.defaultData={enabled:!0,color:{r:.8274509803921568,g:.8274509803921568,b:.8274509803921568},intensity:.75})(O1||(O1={}));var I1;(e=>e.defaultData={occlusion:!1,aoFullRes:!1,radius:256,bias:.5,aoColor:{r:.19607843137254902,g:.19607843137254902,b:.19607843137254902}})(I1||(I1={}));var Bl;(e=>e.defaultData={usePhysics:!1,gravity:-10})(Bl||(Bl={}));var R1;(e=>e.defaultData={playCamera:As,gameControlObject:null})(R1||(R1={}));var s0;(e=>e.defaultData={backgroundColor:St.fromHexAndA(kD,1),postprocessing:td.defaultData,fog:n0.defaultData,globalPhysics:Bl.defaultData,ambient:O1.defaultData,ao:I1.defaultData,shadow:D1.defaultData,publish:R1.defaultData})(s0||(s0={}));var o0;(e=>e.defaultData={colliderType:"box",size:[100,100,100],colliderHelperVisible:!0,forceType:"collider",forceRange:"global",forceIntensity:.5,forceDambing:.95})(o0||(o0={}));var HD;(e=>{function i(a){return a==="Component"||a==="Instance"}e.isComponentRelated=i;function s(a){return a==="Empty"||a==="Instance"}e.isEmptyOrComponent=s})(HD||(HD={}));var rd;(e=>{e.identity={...Qv.identity,hiddenMatrix:Dl.identity};function i(o){return{position:o.position,rotation:o.rotation,scale:o.scale,hiddenMatrix:o.hiddenMatrix}}e.fromObject=i;function s(o,c){return{position:(c==null?void 0:c.position)||o.position,rotation:(c==null?void 0:c.rotation)||o.rotation,scale:(c==null?void 0:c.scale)||o.scale,hiddenMatrix:(c==null?void 0:c.hiddenMatrix)||o.hiddenMatrix}}e.merge=s;function a(o,c){return vv({position:Lo.isEqual(o.position,c.position)?void 0:c.position,rotation:Lo.isEqual(o.rotation,c.rotation)?void 0:c.rotation,scale:Lo.isEqual(o.scale,c.scale)?null:c.scale,hiddenMatrix:Dl.isEqual(o.hiddenMatrix,c.hiddenMatrix)?void 0:c.hiddenMatrix})}e.diff=a})(rd||(rd={}));var Li;(e=>e.defaultData={states:new Ue,events:new Ue,visible:!0,raycastLock:!1,physics:Rl.defaultData,pathSnapping:{pathId:null,slide:0,offset:0,orientation:"tangential"},...rd.identity,cloner:null})(Li||(Li={}));var a0;(e=>e.defaultData={type:"Empty",...Li.defaultData})(a0||(a0={}));var WD;(e=>e.defaultData={type:"ParticleCollider",...o0.defaultData,...Li.defaultData})(WD||(WD={}));var qD;(e=>e.defaultData={type:"Component",...Li.defaultData})(qD||(qD={}));var YD;(e=>e.defaultData={type:"Particle",...Li.defaultData,...Zh.defaultData})(YD||(YD={}));var kc;(e=>e.defaultData={type:"Mesh",...Li.defaultData,...$v.defaultData})(kc||(kc={}));var Vc;(e=>e.defaultData={...Li.defaultData,...rd.identity,position:[0,0,Il.DefaultTargetOffset],...Il.defaultData})(Vc||(Vc={}));var l0;(e=>{function i(s){return{...Li.defaultData,...Jv.defaultData(s)}}e.defaultData=i,e.defaultDirectionalLightData={...e.defaultData("DirectionalLight"),position:[200,300,300],name:"Directional Light",intensity:.7}})(l0||(l0={}));var id;(e=>{function i(a,o,c=0){for(;c<o.length;){let d=a?a[o[c]]:void 0;if(o.length===c+1)return d;if(d)a=d.descendants,c+=1;else return}}e.resolveWithDes=i;function s(a,o,c=0){let d=i(a,o,c);if(d){let g=Object.keys(d);if(g.length===1&&g[0]==="descendants")return}return d}e.resolve=s})(id||(id={}));var No;(e=>{e.rootOverrideProps=["physics","events"],e.compositeNonOptionalOverrideProps=["geometry"],e.compositeEntireOverrideOverrideProps=["material"];function i(a,o){return{...Li.defaultData,...o,component:a,overrides:new vr,physics:void 0,events:void 0,type:"Instance"}}e.ofComponent=i;function s(a){let o=rd.fromObject(a.data);return i(a.id,o)}e.fromComponentData=s})(No||(No={}));var Ca;(e=>{e.defaultData={type:"Page",...Li.defaultData,physics:{...Rl.defaultData,fusedBody:!1},...s0.defaultData,camera:Vc.defaultData};function i(s){return s.uiScene!==void 0}e.isUIPage=i})(Ca||(Ca={}));var c0;(e=>(e.defaultCamera={position:[0,0,1e3],scale:[1,1,1],rotation:[0,0,0],hiddenMatrix:Dl.identity,name:"Play Camera",visible:!0,raycastLock:!1,physics:Rl.defaultData,states:new Ue,events:new Ue,cloner:null,pathSnapping:{pathId:null,orientation:"tangential",slide:0,offset:0},...Il.defaultData},e.KeysByResetCategory={States:["states"],Events:["events"],Material:["material","materials"],Geometry:["geometry"],Position:["position"],Rotation:["rotation"],Scale:["scale"],Transform:["position","scale","rotation","hiddenMatrix"],Name:["name"],Visibility:["visible","raycastLock","flatShading","wireframe","side"],Shadows:["castShadow","receiveShadow"],Cloner:["cloner"],Physics:["physics"]},e.defaultMeshObject={name:"Rectangle",...Li.defaultData,...kc.defaultData,geometry:Ll.defaultData("RectangleGeometry"),material:oi.defaultTwoLayerData("phong","layer1","layer2")},e.defaultBooleanObject={name:"Boolean",...Li.defaultData,...kc.defaultData,geometry:Ll.defaultData("BooleanGeometry"),material:oi.defaultTwoLayerData("phong","layer1","layer2")},e.defaultTextObject={name:"Text",...Li.defaultData,...kc.defaultData,geometry:Ll.defaultData("TextGeometry"),material:oi.defaultTwoLayerData("phong","layer1","layer2")}))(c0||(c0={}));var Pa;(e=>{function i(c,d){let g={name:d};return c.type==="Mesh"?(g.geometry={},"material"in c&&(g.material={layers:new vr}),"materials"in c&&(g.materials=c.materials.map(b=>({layers:new vr})))):Ks.is(c.type)&&(g.perspective={},g.orthographic={}),g}e.newEmpty=i;function s(c,d){if(d===void 0)return c;let g={...c};return"material"in g&&"material"in d&&d.material&&(g.material=Tl(g.material,b=>{if(typeof b!="string")for(let[j,_e]of Object.entries(d.material.layers)){let $=b.layers.data(j);$&&Hr.patch($,_e)}}).data),g.materials&&d.materials&&(g.materials=Tl(g.materials,b=>{var j,_e;for(let $=0;$<g.materials.length;$++){let rt=d.materials[$];if(typeof rt!="string")for(let[st,ut]of Object.entries(rt.layers)){let gt=(_e=(j=b[$])==null?void 0:j.layers)==null?void 0:_e.data(st);gt&&Hr.patch(gt,ut)}}}).data),g}function a(c,d){let g,b=[],j={orthographic:0,perspective:0,geometry:0};function _e($,rt){for(let[st,ut]of Object.entries(rt.layers)){let{texture:gt,...wt}=ut;if(gt!==void 0&&Object.keys(gt).length>0){let yt={path:[...$,"layers",st,"texture"],props:gt,type:0};b.push(yt)}if(Object.keys(wt).length>0){let yt={path:[...$,"layers",st],props:wt,type:0};b.push(yt)}}}for(let[$,rt]of Object.entries(d))if($!=="name")if($==="cloner")b.push(...Kv.toOps(rt,["cloner"]));else if($==="pathSnapping")b.push({path:[$],props:{slide:rt.slide,offset:rt.offset},type:0});else if($==="material")_e(["material"],rt);else if($==="materials")for(let[st,ut]of Object.entries(rt))_e(["materials",st],ut);else if(j[$]===0){if($==="geometry"&&rt.extrusion!==void 0){let st={path:[$,"extrusion"],props:rt.extrusion,type:0};b.push(st),rt={...rt},delete rt.extrusion}if(Object.keys(rt).length>0){let st={path:[$],props:rt,type:0};b.push(st)}}else g===void 0&&(g={path:[],props:{},type:0},b.push(g)),g.props[$]=rt;return b}e.toOps=a;function o(c,d){var b,j,_e,$,rt,st;if(d===void 0)return c;let g={...c};if(Object.assign(g,rd.merge(g,d)),Object.assign(g,{pathSnapping:Object.assign({},g.pathSnapping,{slide:((b=d.pathSnapping)==null?void 0:b.slide)??((j=g.pathSnapping)==null?void 0:j.slide)??0,offset:((_e=d.pathSnapping)==null?void 0:_e.offset)??(($=g.pathSnapping)==null?void 0:$.offset)??0})}),Ks.is(c.type)){g.orthographic={...g.orthographic},g.perspective={...g.perspective};let ut=d;((rt=ut.orthographic)==null?void 0:rt.zoom)!==void 0&&(g.orthographic.zoom=ut.orthographic.zoom),((st=ut.perspective)==null?void 0:st.zoom)!==void 0&&(g.perspective.zoom=ut.perspective.zoom),ut.isUpVectorFlipped!==void 0&&(g.isUpVectorFlipped=ut.isUpVectorFlipped),ut.targetOffset!==void 0&&(g.targetOffset=ut.targetOffset)}else if(c.type==="Mesh")"geometry"in d&&Object.assign(g,{geometry:i0.merge(g.geometry,d.geometry)}),(d.material||d.materials)&&(g=s(g,d)),g.cloner&&"cloner"in d&&Object.assign(g,{cloner:Bo.merge(g.cloner,d.cloner)});else if(c.type==="Empty")g.cloner&&"cloner"in d&&Object.assign(g,{cloner:Bo.merge(g.cloner,d.cloner)});else if(Zv.is(c.type)){let ut=d;ut.intensity!==void 0&&(g.intensity=ut.intensity),ut.color!==void 0&&(typeof ut.color=="string"?g.color=ut.color:g.color=Ri.clone(ut.color))}return g}e.patch=o})(Pa||(Pa={}));var nd;(e=>e.defaultData={enablePan:!0,enableZoom:!0,enableRotate:!0,enableDamping:!0,rotationLimitsMode:0,rotationVerticalOffset:{min:Math.PI/4,max:Math.PI/4},rotationHorizontalOffset:{min:Math.PI/4,max:Math.PI/4},rotationSoftLimit:2,panLimitsMode:0,panVerticalOffset:{min:250,max:250},panHorizontalOffset:{min:250,max:250},panSoftLimit:2,zoomLimitsEnabled:!1,zoomLimits:{min:.1,max:2},autoRotate:!1,autoRotateSpeed:2,autoRotateClockwise:!0,hoverRotatePanMode:0,hoverRotatePanStrength:20,hoverRotateDamping:.125,isTouchZoom:!0,orbitTouches:2,panTouches:3,resetHoverEffectOnPointerLeave:!0})(nd||(nd={}));var Zs;(e=>e.defaultData={orbitControls:nd.defaultData,playPage:Ol,withBackground:!0,preventScroll:!1,preventTouchScroll:!1,hideCursor:!1,mouseEventTarget:"canvas",joystickSizeAndXYOffset:Array(12).fill(0).map((i,s)=>{let a=0,o=0;return s<5?o=-30:s<10&&(o=30),s===0||s===10||s===5?a=30:(s===4||s===11||s===9)&&(a=-30),[120,[a,o],"show"]}),settings:{image:{format:"jpg",ratio:1},video:{format:"mp4",imageFormat:"jpg",fps:30,mbps:80,ratio:Math.max(1,typeof window<"u"?Math.floor(window.devicePixelRatio):1),stopMode:"manual",duration:5e3},web:{logo:!0,compress:!0,preset:1,preload:!0,hint:!1}},stopRaycast:!0,hdTransmission:!1})(Zs||(Zs={}));var L1;(e=>e.defaultData={id:"basic",label:"Basic",style:"None",prompt:""})(L1||(L1={}));var B1;(e=>e.defaultData={weather:0,shadows:0,lightOrigin:0,temperature:0,sun:0,camera:0,environment:0,particles:0,nature:0,floor:0})(B1||(B1={}));var Da;(e=>(e.defaultData=()=>({mode:"line-art-both",prompt:"",negativePrompt:"",style:{...L1.defaultData},isRandomSeed:!0,seed:e.generateSeed(),guessMode:!1,advanced:!1,steps:20,guidanceScale:7.5,controlNetScale:1,modifiers:B1.defaultData}),e.generateSeed=()=>Math.round(Math.random()*1e5)))(Da||(Da={}));var Nl;(e=>{function i(a){return a.find(o=>o.data.type==="Page"&&o.data.globalPhysics.usePhysics)!==void 0}e.physicsEnabled=i;function s(a,o,c){a.scene.objects.traverseFrom(o,(d,g)=>{var b;if(g.type==="Instance"){let j=(b=sd.getComponentData(a,g.component))==null?void 0:b.data;j&&c(d,g,j.events)}else c(d,g,g.events)})}e.traverseModuleInstances=s})(Nl||(Nl={}));var Oa;(e=>{e.TRASH_CAN_ID="830a2708-8ed9-49cf-a68e-085299892222";function i(o={withLight:!0,withSquare:!0}){let c=[],d=c0.defaultMeshObject;o.withLight===!0&&c.push({fi:-1,data:l0.defaultDirectionalLightData,id:"830a2708-8ed9-49cf-a68e-085299899103",children:[]}),o.withSquare===!0&&c.push({fi:1,id:"7ba78968-2a55-48f2-b14c-5191da3e075e",data:d,children:[]});let g=new yr$1;return g.push({fi:1,id:Ol,data:{...Ca.defaultData,name:"Scene 1"},children:c}),g}e.defaultData={objects:i(),publish:Zs.defaultData,styles:Da.defaultData()},e.emptyDataWithoutPage=function(){return{objects:new yr$1,publish:Zs.defaultData,styles:Da.defaultData()}},e.emptyDataWithPage=function(o){return{objects:i(o),publish:Zs.defaultData,styles:Da.defaultData()}},e.emptyData=function(){return{objects:new yr$1,publish:{...Zs.defaultData},styles:Da.defaultData()}};function s(o){return{...e.defaultData,objects:_n(o,yr$1.prototype)}}e.withObjs=s;function a(o,c){return s([{id:o,data:c,children:[],fi:0}])}e.withObj=a})(Oa||(Oa={}));var od;(e=>e.defaultData={preset:"fullscreen",allowResponsive:!1,size:[512,512],coords:[0,0],sceneScale:1,color:{r:0,g:0,b:0,a:.5}})(od||(od={}));var ad;(e=>e.emptyImage={data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVQYV2NgYAAAAAMAAWgmWQ0AAAAASUVORK5CYII=",name:"empty"})(ad||(ad={}));var Yi;(e=>{function i(d){return d.textValue!==void 0}e.isTextValue=i;function s(d){return typeof d=="number"}e.isNumber=s;function a(d){return typeof d=="boolean"}e.isBoolean=a;function o(d){return i(d)?"string":a(d)?"boolean":"number"}e.typeOfVariable=o;function c(d){return e.isTextValue(d)?Array.isArray(d.textValue)?d.textValue.map(g=>g.toString().padStart(d.padding??2,"0")).join(d.deliminator??":")+(d.suffix!==void 0?" "+d.suffix:""):d.textValue.toString():e.isBoolean(d)?d?"True":"False":e.isNumber(d)?parseFloat(d.toFixed(3)).toString():d.toString()}e.getDisplayedValue=c})(Yi||(Yi={}));var N1;(e=>e.all=["images","videos","colors","audios","particles","fonts","materials","variables"])(N1||(N1={}));var XD;(e=>e.all=[...N1.all,"components"])(XD||(XD={}));var QD;(e=>{function i(){return{images:new it,videos:new it,colors:new it,audios:new it,particles:new it,fonts:new it,materials:new it,components:new it,variables:new it}}e.defaultData=i})(QD||(QD={}));var Ia;(e=>{function i(){return{images:new it,videos:new it,colors:new it,audios:new it,particles:new it,fonts:new it,materials:new it,components:new it,variables:new it}}e.defaultData=i})(Ia||(Ia={}));var Mn;(e=>{function i(){let d={};return d["89b10010-844c-11ec-a8a3-0242ac120002"]={r:.5,g:.5,b:.5,a:1,name:"Default Color"},_n(d,it.prototype)}e.defaultColors=i;function s(d){let g={};return d!=null&&d.withAITexture&&(g["a1b10010-844c-a8a3-11ec-0242ac2011ec"]={...ad.emptyImage,name:"AI generated image"}),_n(g,it.prototype)}e.defaultImages=s;function a(){return{catelogs:new it,materials:new it,images:new it,videos:new it,colors:new it,audios:new it,particles:new it,fonts:new it,variables:new Ue,lib:Ia.defaultData()}}e.emptyData=a;function o(d){switch(d){case"number":return{value:0,name:"Number"};case"boolean":return{value:!1,name:"Boolean"};case"string":return{value:{textValue:"String value"},name:"String"};case"time":let g=[0,0,0];return{name:"Time",value:{textValue:g,deliminator:":",padding:2,suffix:"AM"},dynamicVariableType:"time",format:"HH:mm:ss",format12h24h:"12ampm",timeZone:null,hasEnd:!1,endValue:{textValue:g,deliminator:":",padding:2,suffix:"AM"},autoStart:!0,repeat:!1};case"counter":return{name:"Counter",value:0,dynamicVariableType:"counter",updateInterval:1e3,increment:1,autoStart:!0,hasEnd:!0,endValue:60,repeat:!0,randomStart:!1,range:[0,100],decimals:0};case"random":return{name:"Random",value:0,dynamicVariableType:"random",updateInterval:1e3,increment:1,autoStart:!0,isStatic:!1,hasEnd:!0,endValue:60,repeat:!0,min:0,max:100,decimals:0};default:console.error("Unknown variable type",d)}}e.defaultVariables=o;function c(d,g){if(g.format==="HH:mm:ss"){let b=Math.floor(d/3600),j=Math.floor((d-b*3600)/60),_e=Math.round(d-b*3600-j*60);return{textValue:[b,j,_e]}}else if(g.format==="mm:ss"){let b=Math.floor(d/60),j=Math.round(d-b*60);return{textValue:[b,j]}}else return g.format==="number"?d=Math.round(d):d=Math.round(d*1e3)/1e3,d}e.getFormattedTimerTime=c})(Mn||(Mn={}));var ld;(e=>e.list=["idle","move","jump","run"])(ld||(ld={}));var cd;(e=>(e.defaultColliderData={type:"capsule",height:200,radius:50,position:[0,0,0],rotation:[0,0,0]},e.defaultDataThirdPerson={moveMode:"walk",forwardDirection:"+z",speedTranslate:1e3,speedRotate:100,runMultiplier:2,rotationMode:"normal",rotBy:"keys",rotByTouch:"drag",delayPos:[.3,.3],delayRot:[.3,.3],keyAssignments:[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX","▲"],["rotPosY","◀"],["rotNegX","▼"],["rotNegY","▶"],["jump","Space"],["run","⇧"],["none","Ctrl"]],touchControl:!0,joystickPosLoc:5,joystickRotLoc:11,jumpTouchButtonLoc:9,collider:e.defaultColliderData,colliderHelperVisible:!0,collisionEnabled:!0,jumpPower:100,resetYPosition:3e3,alignToGround:!1,autoOrientMove:!0,orientWith:"camera",orientMode:"radial",delayPosCamera:.3,delayRotCamera:.3,camera:"",cameraXAxis:"Limit",cameraYAxis:"Free",cameraRotXLimits:[0,Math.PI/2],cameraRotYLimits:[-Math.PI/2,Math.PI/2],gameActions:{idle:new Ue,move:new Ue,jump:new Ue,run:new Ue},navmesh:{enabled:!1,ch:6,cs:6,walkableClimb:5,walkableHeight:1,walkableRadius:0,zones:"all",objects:[],helperVisible:!0,destinationHelperRadius:0,destinationHelperColor:St.fromHexAndA(3728051,1)}}))(cd||(cd={}));function KD(e){e.layers.forEach(i=>{if(i.type==="depth"&&i.colorA!==void 0){let s=i.colorA,a=i.colorB,o=[[s.r,s.g,s.b,s.a],[a.r,a.g,a.b,a.a]],c=[0,1];for(let g=2;g<10;g++)o.push(o[1]),c.push(1);let d={...as(kr$1(i),"type","visible","isVector","isWorldSpace","origin","alpha","mode"),near:Math.max(0,i.near),far:Math.max(0,i.far),colors:o,steps:c,num:2,direction:[1,0,0],smooth:!1,gradientType:1};Object.assign(i,d)}else if(i.type==="depth"&&i.gradientType===1&&(i.near<0||i.far<0)){let s={...kr$1(i),near:Math.max(i.near,0),far:Math.max(i.far,0)};Object.assign(i,s)}})}function Ra(e,i){Object.values(e.shared.materials).forEach(s=>i(s))}function La(e,i){e.scene.objects.traverse((s,a)=>{"materials"in a?a.materials.forEach((o,c)=>{o===void 0&&(a.materials[c]=oi.defaultData(),o=a.materials[c]),typeof o!="string"&&i(o)}):"material"in a?typeof a.material!="string"&&(a.material===void 0&&(a.material=oi.defaultData()),i(a.material)):a.type==="Mesh"&&(a.material===void 0&&(a.material=oi.defaultData()),i(a.material)),"overrides"in a&&Object.values(a.overrides).forEach(o=>{o.material&&typeof o.material!="string"&&Object.getPrototypeOf(o.material)!==vr.prototype&&i(o.material)})})}function Nq(e){Object.assign(e.scene.publish,{orbitControls:{...nd.defaultData,...kr$1(e.scene.publish.orbitControls)}})}function Fq(e){Object.assign(e.scene.publish.settings,{video:{...Zs.defaultData.settings.video,...kr$1(e.scene.publish.settings.video)}})}function kq(e){function i(s){if(s.layers){for(let a of Object.values(s.layers))if(a){for(let[o,c]of Object.entries(a))if((e0.includes(o)||typeof c=="boolean")&&delete a[o],o==="texture")for(let[d,g]of Object.entries(c))(jD.includes(d)||typeof g=="boolean")&&delete c[d]}}}e.scene.objects.traverse((s,a)=>{a.states.forEach(o=>{let c=o;c.material?i(c.material):c.materials&&c.materials.forEach(d=>{i(d)})})})}function Vq(e){e.scene.publish.withBackground=!0}function zq(e){e.scene.publish.settings.web={compress:!0,preload:!0,preset:1,logo:!0,hint:!1}}function Uq(e){e.scene.objects.traverse((i,s)=>{let a=s.cloner;a&&(a.radial.scale=a.radial.scale.map(o=>o+1),a.linear.scale=a.linear.scale.map(o=>o+1))})}function Gq(e){e.scene.objects.traverse((i,s)=>{let a=s.geometry;a&&(a.type==="DodecahedronGeometry"||a.type==="IcosahedronGeometry")&&(a.detail=Math.round(a.detail))})}function jq(e){e.scene.objects.traverse((i,s)=>{let a=e.scene.objects.unproxy().parent(i);if(a){let o=kr$1(e.scene.objects.data(a));o&&o.type==="Mesh"&&o.geometry.type==="BooleanGeometry"&&s.type==="Mesh"&&(s.visible=kr$1(s).booleanExclude!==!0)}})}function Hq(e){e.scene.objects.traverse((i,s)=>{if(s.type==="Mesh"){let a=s;s.geometry.type==="NonParametricGeometry"?a.material!==void 0&&delete a.material:a.materials!==void 0&&delete a.materials}})}function Wq(e){function i(a){Object.setPrototypeOf(a,vr.prototype),a.texture&&Object.setPrototypeOf(a.texture,vr.prototype)}function s(a){Object.setPrototypeOf(a,vr.prototype);for(let o in a)i(a[o])}e.scene.objects.traverse((a,o)=>{o.states.forEach(c=>{let d=c;if(d.material){let g=kr$1(d.material).layers;s(g),d.material.layers=g}if(d.materials)for(let g=0;g<d.materials.length;g++){let b=d.materials[g],j=kr$1(b).layers;s(j),b.layers=j}})})}function ZD(e){e.layers===void 0&&Object.assign(e,oi.defaultTwoLayerData("lambert"))}function F1(e){!e.layers||e.layers.forEach(i=>{if(i.type==="depth"&&i.colors.length===10){let s=[...i.colors];s.push(i.colors[9]);let a=[...i.steps];a.push(i.steps[9]);let o={...kr$1(i),colors:s,steps:a};Object.assign(i,o)}})}function qq(e){e.scene.objects.traverse((i,s)=>{s.type==="Mesh"&&(s.geometry.type==="BooleanGeometry"||s.geometry.type==="SubdivGeometry")&&(s.geometry.phongAngle=35)})}function JD(e){e.scene.objects.traverse((i,s)=>{"materials"in s?s.materials.forEach(a=>{typeof a!="string"&&F1(a)}):"material"in s&&typeof s.material!="string"&&F1(s.material)}),Object.values(e.shared.materials).forEach(i=>F1(i))}function Yq(e){e.scene.environment.ambientLight.softShadows=!1,e.scene.environment.ambientLight.softShadowQuality="low",e.scene.objects.traverse((i,s)=>{(s.type==="DirectionalLight"||s.type==="SpotLight")&&(s.shadowResolution=1024,s.shadowRadius=1,s.depth=1e5)}),e.shared.penumbraSize=new Array(5).fill(.5)}function Xq(e){e.shared.audios=_n({},it.prototype)}function Qq(e){e.shared.videos=_n({},it.prototype)}function Kq(e){let i=e.shared.materials;Object.entries(i).forEach(([s,a])=>{if(!a.layers){let o={name:"Untitled Material",layers:[{fi:0,data:{type:"light",category:"phong",alpha:.6,visible:!0,mode:0,specular:{r:.2,g:.2,b:.2},shininess:5},id:"layer1"},{fi:1,data:{type:"color",alpha:1,visible:!0,mode:0,color:{r:.2823529411764706,g:.2823529411764706,b:.30196078431372547}},id:"layer2"}]};Object.assign(i,{[s]:o})}})}function Zq(e){Object.entries(kr$1(e.shared.images)).filter(i=>i[1].asset===!1).map(i=>i[0]).forEach(i=>{delete e.shared.images[i]}),Object.entries(kr$1(e.shared.audios)).filter(i=>i[1].asset===!1).map(i=>i[0]).forEach(i=>{delete e.shared.audios[i]})}function Jq(e){e.scene.publish.settings.web.preload=!1}function $D(e){e.layers&&e.layers.forEach(i=>{i.type==="depth"&&i.num!==void 0&&(i.colors=i.colors.slice(0,i.num),i.steps=i.steps.slice(0,i.num),delete i.num)})}function eO(e){e.layers&&e.layers.forEach(i=>{GD(i)&&i.isMask===void 0&&(i.isMask=!1),(i.type==="texture"||i.type==="video")&&i.blending===void 0&&(i.blending=0),(i.type==="noise"||i.type==="displace"&&i.displacementType==="noise")&&(i.voronoiStyle===void 0&&(i.voronoiStyle=0),i.highCut===void 0&&(i.highCut=1),i.lowCut===void 0&&(i.lowCut=0),i.smoothness===void 0&&(i.smoothness=.3),i.seed===void 0&&(i.seed=0),i.quality===void 0&&(i.quality=1))})}function $q(e){e.shared.fonts=_n({},it.prototype)}function e9(e){return e.replace(".typeface","").replace(/optimer/gi,"open sans").replace("space_mono","space mono").replace(/alma_mono/gi,"varela round").replace(/droid_sans_mono/gi,"noto sans mono").replace(/droid_sans|gentilis|gnomon_(simple|foreground)|helvetiker/gi,"roboto").replace(/droid_serif/gi,"roboto slab").replace("_sans"," sans").replace("crimson_text","crimson text").replace("medium_medium","medium").replace("fatface_fatface","fatface").replace("100hairline","thin").replace("200thin","extralight").replace("300light","light").replace("500medium","medium").replace("600semi","semibold").replace("800heavy","extrabold").replace("900black","black").replace(/bodoni_(11|16|24|36|48|72|96)([^_])/gi,"bodoni_$1_$2").replace(/bodoni_(11|16|24|36|48|72|96)/gi,"bodoni moda").replace(/(thin|hairline)(_regular)?/gi,"100").replace(/(extra|ultra)light(_regular)?/gi,"200").replace(/light(_regular)?/gi,"300").replace(/_book|_normal|_roman/gi,"_regular").replace(/medium(_regular)?/gi,"500").replace(/(semi|demi)bold(_regular)?/gi,"600").replace(/(extra|ultra)bold(_regular)?/gi,"800").replace(/bold(_regular)?/gi,"700").replace(/(black|heavy|fatface)(_regular)?/gi,"900").replace(/([1-9]00)_italic/gi,"$1italic").replace(/regularitalic/gi,"italic").replace(/regularitalic/gi,"italic").split(" ").map(i=>i.charAt(0).toUpperCase()+i.slice(1)).join(" ")}function t9(e){let i=[];e.scene.objects.traverse((s,a)=>{let o=a;if(o.type==="TextFrame"){let c=oi.defaultTwoLayerData("phong"),d=typeof o.color=="string"?e.shared.colors[o.color]:o.color;c.layers[1].data.color={r:d.r,g:d.g,b:d.b},c.layers[1].data.alpha=o.alpha;let g=e9(o.font);e.shared.fonts[g]===void 0&&(e.shared.fonts[g]={name:g});let b={name:o.name,...Li.defaultData,...kc.defaultData,flatShading:!1,wireframe:!1,geometry:{...Ll.defaultData("TextGeometry"),width:o.width,height:o.height,font:g,depth:0,horizontalAlign:o.horizontalAlign,verticalAlign:o.verticalAlign,fontSize:o.fontSize*1.40625,lineHeight:o.lineHeight/1.40625,letterSpacing:o.letterSpacing-1,text:o.text,textTransform:o.textTransform,extrudeBevelSize:0,extrudeBevelSegments:1},material:c,states:kr$1(o.states),events:kr$1(o.events),visible:o.visible,raycastLock:o.raycastLock,position:o.position,rotation:o.rotation,scale:o.scale,hiddenMatrix:o.hiddenMatrix},j=kr$1(e.scene.objects).parent(s);e.scene.objects.insertAfter(j??null,s,[{id:s+"new",data:b,children:[]}]),i.push(s)}}),i.forEach(s=>{e.scene.objects.delete(s)})}function r9(e){let i={0:"MouseDown",1:"MouseUp",2:"MouseHover",5:"KeyDown",6:"KeyUp",7:"Start",9:"LookAt",10:"Follow",11:"Scroll",12:"Audio",13:"GameControl"};e.scene.objects.traverse((s,a)=>{a.events.forEach(o=>{if(i[Number(o.type)])if(Object.assign(o,{type:i[Number(o.type)]}),o.type==="Audio"&&"audioEvent"in o&&(Object.assign(o,{playAudio:o.audioEvent}),delete o.audioEvent),o.type==="GameControl")Object.assign(o,{gameActions:{idle:new Ue,move:new Ue,jump:new Ue}});else{let c=new Ue;Object.assign(o,{actions:c}),(o.type==="MouseDown"||o.type==="MouseUp"||o.type==="KeyDown"||o.type==="KeyUp")&&"url"in o&&c.push({fi:0,id:Me.generateUUID(),data:{type:"Link",url:o.url,delay:0}}),"targets"in o&&(o.targets.forEach((d,g,b)=>{let j={state:void 0,repeat:0,delay:0,delayDirection:void 0,direction:"normal",duration:0,easing:4},_e={easing:d.easing,duration:d.duration};d.easing===6?Object.assign(_e,as(d,"mass","stiffness","damping","velocity")):d.easing===5&&Object.assign(_e,{control1:{...d.control1},control2:{...d.control2}});let $={repeat:d.repeat?-1:0,delay:d.delay,delayDirection:d.delayDirection,direction:d.cycle&&d.rewind?"pingpong-rewind":d.cycle?"pingpong":"normal"},rt={state:d.state,...$,..._e},st={allowSlerp:!0,type:"Transition",object:d.object,repeat:0,delay:0,delayDirection:void 0,direction:"normal",tweens:new Ue({fi:0,id:Me.generateUUID(),data:j},{fi:1,id:Me.generateUUID(),data:rt})};c.push({fi:b,id:g,data:st})}),delete o.targets)}})})}function i9(e){e.scene.objects.traverse((i,s)=>{function a(o,c){var b;let d=new Ue,g=[];if(s.events.forEach((j,_e,$)=>{if(j.type==="Audio"&&j.trigger===c){let rt;g.push(_e),j.interaction==="play"?rt={...as(j,"interaction","audio","delay","volume","loop"),triggerAfter:"after"in j?j.after:void 0,toggle:"after"in j?j.toggle:void 0,type:"Audio"}:(j.interaction==="pause"||j.interaction==="stop")&&(rt={...as(j,"interaction","delay","object","playAudio"),type:"Audio"}),rt&&d.push({fi:$,id:_e,data:rt})}}),g.forEach(j=>s.events.delete(j)),d.length){let j=(b=s.events.find(_e=>_e.type===o))==null?void 0:b.data;j?"actions"in j&&j.actions.insertBefore(null,d):s.events.insertBefore(null,[{id:Me.generateUUID(),data:{type:o,actions:d}}])}}a("Start","start"),a("MouseDown","mouseDown"),a("MouseUp","mouseUp"),a("KeyDown","keyDown"),a("KeyUp","keyUp")})}function tO(e){var s;let i=(s=e.layers.find(a=>a.type==="light"))==null?void 0:s.data;if((i==null?void 0:i.category)==="basic"){let a=Hr.defaultData("light","phong"),o=i;Object.assign(o,a),o.visible=!1}}function rO(e){Ra(e,tO),La(e,tO)}function n9(e){e.scene.objects.traverse((i,s)=>{s.type==="Mesh"&&s.geometry.type==="SubdivGeometry"&&(s.geometry.scaleBaked||(s.geometry.scaleBaked=[1,1,1]))})}function s9(e){e.scene.objects.traverse((i,s)=>{(s.type==="Empty"||s.type==="Mesh")&&s.cloner&&!s.cloner.randomnessObject&&!s.cloner.toObject&&!s.cloner.randomness&&(s.cloner={...s.cloner,toObject:{object:"",spreadType:"random",scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],axis:"x",seed:0,count:99,align:"normal"},randomness:!1,randomnessObject:{strength:100,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],movement:1,seed:0,freqScale:10,noiseType:"perlin"}})})}function o9(e){e.scene.objects.traverse((i,s)=>{s.type==="Mesh"&&s.geometry.type==="NonParametricGeometry"&&!("material"in s)&&!("materials"in s)&&(s.material=oi.defaultTwoLayerData("phong"))})}function a9(e){e.scene.publish.orbitControls.autoZoom===void 0&&(e.scene.publish.orbitControls.autoZoom=!1),e.scene.objects.traverse((i,s)=>{(s.type==="OrthographicCamera"||s.type==="PerspectiveCamera")&&(s.orthographic.autoZoom===void 0&&(s.orthographic.autoZoom=!1),s.orthographic.autoZoomFrustumSize===void 0&&(s.orthographic.autoZoomFrustumSize=790))})}function l9(e){e.scene.objects.traverse((i,s)=>{s.pathSnapping===void 0&&(s.pathSnapping={pathId:null,slide:0,offset:0,orientation:"tangential"}),s.pathSnapping.offset===void 0&&(s.pathSnapping.offset=0)})}function c9(e){e.scene.publish.mouseEventTarget===void 0&&(e.scene.publish.mouseEventTarget="canvas"),e.scene.publish.settings.web.hint===void 0&&(e.scene.publish.settings.web.hint=!1)}function u9(e){let{video:i}=e.scene.publish.settings;i.format==="gif"&&i.fps>48&&(i.fps=15)}function h9(e){e.scene.objects.traverse((i,s)=>{s.events.forEach(a=>{a.type==="GameControl"&&(a.resetYPosition=Math.abs(a.resetYPosition-s.position[1]))})})}function d9(e){let i=e.scene.environment.usePhysics;e.scene.objects.traverse((s,a)=>{i&&a.physics===null?a.collision=!1:a.collision="visibility"})}function f9(e){e.scene.objects.traverse((i,s)=>{s.events.forEach(a=>{a.type==="GameControl"&&(a.navmesh=cd.defaultDataThirdPerson.navmesh)})})}function p9(e){e.scene.styles||(e.scene.styles=Da.defaultData())}function iO(e){e.layers.forEach(i=>{i.type==="light"&&i.category!=="toon"&&i.occlusion===void 0&&(i.occlusion=!0)})}function m9(e){e.scene.environment.ambientLight.occlusion===void 0&&(e.scene.environment.ambientLight.occlusion=!1),e.scene.environment.ambientLight.aoFullRes===void 0&&(e.scene.environment.ambientLight.aoFullRes=!1),e.scene.environment.ambientLight.radius===void 0&&(e.scene.environment.ambientLight.radius=256),e.scene.environment.ambientLight.bias===void 0&&(e.scene.environment.ambientLight.bias=.5),e.scene.environment.ambientLight.aoColor===void 0&&(e.scene.environment.ambientLight.aoColor={r:.19607843137254902,g:.19607843137254902,b:.19607843137254902}),La(e,iO),Ra(e,iO)}function g9(e){e.scene.objects.traverse((i,s)=>{s.events.forEach(a=>{a.type==="GameControl"&&Object.assign(a.gameActions,{run:new Ue})})})}function y9(e){e.scene.objects.traverse((i,s)=>{s.events.forEach(a=>{a.type==="GameControl"&&(a.keyAssignments=[...a.keyAssignments,["run","⇧"],["none","Ctrl"]])})})}function nO(e){e.layers&&e.layers.forEach(i=>{i.type==="light"&&i.bumpMapIntensity===void 0&&(i.bumpMapIntensity=5)})}function sO(e,i){if(i<1&&(La(e,KD),Ra(e,KD),e.schema=1),i<2&&(Nq(e),e.schema=2),i<3&&(kq(e),e.schema=3),i<4&&(Vq(e),e.schema=4),i<5&&(zq(e),e.schema=5),i<6&&(Uq(e),e.schema=6),i<7&&(Gq(e),e.schema=7),i<8&&(e.schema=8),i<9&&(JD(e),e.schema=9),i<10&&(qq(e),e.schema=10),i<11&&(Yq(e),e.schema=11),i<12&&(JD(e),e.schema=12),i<13&&(Xq(e),e.schema=13),i<14&&(Kq(e),e.schema=14),i<15&&(Zq(e),e.schema=15),i<16&&(Jq(e),e.schema=16),i<17&&(La(e,$D),Ra(e,$D),e.schema=17),i<18&&(La(e,ZD),Ra(e,ZD),e.schema=18),i<19&&(Fq(e),e.schema=19),i<20&&($q(e),t9(e),e.schema=20),i<21&&(r9(e),i9(e),e.schema=21),i<22&&(rO(e),e.schema=22),i<23&&(n9(e),e.schema=23),i<24&&(s9(e),e.schema=24),(i<25||e.shared.videos===void 0)&&(Qq(e),i<25&&(e.schema=25)),i<26&&(jq(e),e.schema=26),i<27&&(Hq(e),e.schema=27),i<28&&(rO(e),e.schema=28),i<29&&(Wq(e),e.schema=29),i<30&&(o9(e),e.schema=30),i<31&&(a9(e),e.schema=31),i<33&&(l9(e),e.schema=33),i<34&&(c9(e),e.schema=34),i<35&&(u9(e),e.schema=35),i<36&&(h9(e),e.schema=36),i<37&&(d9(e),e.schema=37),i<38&&(La(e,eO),Ra(e,eO),e.schema=38),i<39&&(f9(e),e.schema=39),i<40&&(p9(e),e.schema=40),i<41&&(m9(e),e.schema=41),i<42&&(g9(e),e.schema=42),i<43&&(y9(e),e.schema=43),i<99){La(e,nO),Ra(e,nO),e.scene.publish.playCamera===null&&(e.scene.publish.playCamera=As);let s=kr$1(e.scene.objects),a=e.scene.objects;e.scene.publish.playPage=Ol,a.insertBefore(null,null,[{id:Ol,data:{...Ca.defaultData,backgroundColor:e.scene.backgroundColor,fog:e.scene.fog,postprocessing:e.scene.postprocessing,ao:as(e.scene.environment.ambientLight,"occlusion","aoFullRes","radius","bias","aoColor"),publish:{playCamera:e.scene.publish.playCamera,gameControlObject:e.scene.publish.gameControlObject},shadow:as(e.scene.environment.ambientLight,"softShadowQuality"),globalPhysics:{...Bl.defaultData,...as(e.scene.environment,"usePhysics","gravity")},camera:kr$1(e.scene.ownerCamera)??Ca.defaultData.camera,name:"Scene"},children:[]}]);for(let d of s)d.id!==Oa.TRASH_CAN_ID&&a.move(Ol,d.fi,d.id);let o=0,c=0;e.shared.penumbraSize&&e.scene.objects.traverse((d,g)=>{g.type==="DirectionalLight"?(g.penumbraSize=e.shared.penumbraSize[Math.min(o,2)],o+=1):g.type==="SpotLight"&&(g.penumbraSize=e.shared.penumbraSize[3+Math.min(c,1)],c+=1),(g.physics===void 0||g.physics===null)&&g.type!=="Instance"&&(g.physics={},Object.assign(g.physics,Rl.defaultData)),g.physics!==void 0&&g.physics!==null&&(g.physics.enabled=g.collision??"visibility",delete g.collision)}),e.schema=99}}function oO(e){e.layers&&e.layers.forEach(i=>{i.type==="light"&&i.alphaOverride===void 0&&(i.alphaOverride=1)})}function v9(e){e.scene.objects.traverse((i,s)=>{let a=s.geometry;a&&a.type==="PathGeometry"&&(a.extrusion.capType="flat",a.extrusion.bevel=50,a.extrusion.bevelSides=6,a.extrusion.shape.type==="Custom"&&(a.extrusion.shape.shapeQuality="low"))})}function x9(e){var i;Array.isArray(kr$1(e.events))&&((i=e.events)==null||i.forEach(s=>{"disabled"in s||(s.disabled=!1),(s.type==="MouseDown"||s.type==="MouseUp"||s.type==="MousePress")&&(s.mode=s.mode||"Object")}))}var ud=180/Math.PI;function aO(e){e.rotation=e.rotation.slice(0,3).map(i=>i*ud)}function lO(e){var s,a;aO(e),e.type==="Page"&&aO(e.camera),(s=e.states)==null||s.forEach(o=>{o.rotation===void 0||o.rotation===null||(o.rotation=o.rotation.slice(0,3).map(c=>c*ud))});let i=e.geometry;i&&i.type==="SphereGeometry"&&(i.thetaLength=(i.thetaLength??180)*ud),i&&i.type==="TorusGeometry"&&(i.arc=i.arc*ud),i&&i.type==="PathGeometry"&&(i.extrusion.angle*=ud,i.extrusion.twist*=ud),e.type==="Mesh"&&e.geometry.type==="TextGeometry"&&(e.geometry.text={textValue:e.geometry.text}),Array.isArray(kr$1(e.events))&&((a=e.events)==null||a.forEach(o=>{(o.type==="MouseDown"||o.type==="MouseUp"||o.type==="MousePress"||o.type==="KeyDown"||o.type==="KeyUp"||o.type==="KeyPress"||o.type==="Collision"||o.type==="Trigger")&&(o.runMode=o.toggle?"Toggle":"Repeat")}))}function b9(e){e.shared.variables=_n({},it.prototype)}function S9(e){let i=kr$1(e.shared.variables);e.shared.variables=_n(Object.entries(i??{}).map(([s,a],o)=>({fi:o,id:s,data:a})),Ue.prototype)}var Fo=111;function cO(e,i){i(e.data);for(let s of e.children)cO(s,i)}function w9(e){let i=e.schema??104;i!==Fo&&i<105&&(cO(e.asset,lO),e.schema=105)}function A9(e){e.shared.particles=_n({},it.prototype),e.shared.lib&&(e.shared.lib.particles=Ia.defaultData().particles)}function _9(e){e.scene.objects.traverse((i,s)=>{s.type==="Particle"&&typeof s.renderMaterial.size=="number"&&Object.assign(s.renderMaterial,{size:[s.renderMaterial.size,s.renderMaterial.size]})})}function u0(e){let i=e.schema??0;if(i!==Fo){console.warn("updating from ",i,"to ",Fo),sO(e,i),i<100&&(e.scene.publish.joystickSizeAndXYOffset===void 0&&(e.scene.publish.joystickSizeAndXYOffset=Zs.defaultData.joystickSizeAndXYOffset),e.schema=100),i<101&&(La(e,oO),Ra(e,oO),e.schema=101),i<102&&(v9(e),e.schema=102),i<104&&(e.shared.catelogs=new it,e.shared.lib=Ia.defaultData(),e.schema=104),i<105&&(b9(e),e.scene.objects.traverse((s,a)=>{lO(a)}),e.schema=105);for(let s of Object.values(e.shared.lib.components))w9(s);i<106&&(S9(e),e.schema=106),i<107&&(e.shared.lib.variables=Ia.defaultData().variables,e.schema=107),i<109&&(A9(e),e.schema=109),i<110&&(_9(e),e.schema=110),i<111&&(e.scene.objects.traverse((s,a)=>{x9(a)}),e.schema=111)}}var sd;(e=>{e.defaultData={schema:Fo,scene:Oa.defaultData,frames:new it().add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",od.defaultData),shared:{...Mn.emptyData(),colors:Mn.defaultColors()}},e.emptyDataForImports=function(o){let c=Oa.emptyDataWithPage(o);return{schema:Fo,scene:c,frames:new it().add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",od.defaultData),shared:{...Mn.emptyData(),colors:Mn.defaultColors(),images:Mn.defaultImages(o)}}},e.emptyData=function(){return{schema:Fo,scene:Oa.emptyDataWithPage(),frames:new it().add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",od.defaultData),shared:Mn.emptyData()}},e.clipboard2dData=function(){return{schema:Fo,scene:Oa.emptyData(),frames:new it,shared:Mn.emptyData()}},e.collabHelper={...em,updateSchema(o){return(o.schema??0)<Fo?Tl(o,u0):(o.schema??0)-Fo}};function i(o){let c=e.collabHelper.updateSchema(o);return typeof c=="number"?c===0?o:null:c.data}e.updateSchemaDirectly=i;function s(o){return{...o,shared:{...o.shared,lib:Ia.defaultData()}}}e.withoutLib=s;function a(o,c){let d=o.scene.objects.get(c);if(d&&d.data.type==="Component")return d;{let g=o.shared.lib.components[c];if(g)return g.asset}}e.getComponentData=a})(sd||(sd={}));var uO;(e=>{function i(s){return!0}e.is=i})(uO||(uO={}));var h0;(e=>{e.defaultData={position:[0,0],scale:[1,1],rotation:0};function i(a,o){return{position:(o==null?void 0:o.position)??a.position,rotation:(o==null?void 0:o.rotation)??a.rotation,scale:(o==null?void 0:o.scale)??a.scale}}e.merge=i;function s(a,o){return vv({position:Ro.isEqual(a.position,o.position)?void 0:o.position,rotation:a.rotation===o.rotation?void 0:o.rotation,scale:Ro.isEqual(a.scale,o.scale)?void 0:o.scale})}e.diff=s})(h0||(h0={}));var k1;(e=>e.defaultData={horizontalConstraint:0,verticalConstraint:0})(k1||(k1={}));var d0;(e=>e.defaultData={opacity:1,fill:{color:St.white,enabled:!0},stroke:{color:St.from0to1([0,0,0,1]),thickness:1,enabled:!1,mode:"inside"},layerBlur:{radius:2,enabled:!1},backgroundBlur:{radius:2,enabled:!1},dropShadow:{offset:[10,10],blurRadius:10,color:St.from0to1([0,0,0,1]),enabled:!1,spread:0},innerShadow:{offset:[10,10],blurRadius:10,color:St.from0to1([0,0,0,1]),enabled:!1,spread:0}})(d0||(d0={}));var Ba;(e=>{function i(d,g){return{name:g}}e.newEmpty=i;function s(d,g){if(g===void 0)return d;let b={...d},j=["width","height","cornerRadius"];for(let _e of j)_e in b&&_e in g&&g[_e]!==void 0&&Object.assign(b,{[_e]:g[_e]});return b}function a(d,g){if(g===void 0)return d;let b={...d};return"fill"in b&&"fill"in g&&g.fill!==void 0&&Object.assign(b,{fill:{...b.fill,...g.fill}}),"stroke"in b&&"stroke"in g&&g.stroke!==void 0&&Object.assign(b,{stroke:{...b.stroke,...g.stroke}}),"layerBlur"in b&&"layerBlur"in g&&g.layerBlur!==void 0&&Object.assign(b,{layerBlur:{...b.layerBlur,...g.layerBlur}}),"backgroundBlur"in b&&"backgroundBlur"in g&&g.backgroundBlur!==void 0&&Object.assign(b,{backgroundBlur:{...b.backgroundBlur,...g.backgroundBlur}}),"dropShadow"in b&&"dropShadow"in g&&g.dropShadow!==void 0&&Object.assign(b,{dropShadow:{...b.dropShadow,...g.dropShadow}}),"innerShadow"in b&&"innerShadow"in g&&g.innerShadow!==void 0&&Object.assign(b,{innerShadow:{...b.innerShadow,...g.innerShadow}}),b}function o(d,g){if(g===void 0)return d;let b={...d};return Object.assign(b,h0.merge(b,g)),b=s(b,g),b=a(b,g),b}e.patch=o;function c(d,g){let b,j=[];for(let[_e,$]of Object.entries(g))_e!=="name"&&(b===void 0&&(b={path:[],props:{},type:0},j.push(b)),b.props[_e]=$);return j}e.toOps=c})(Ba||(Ba={}));var am;(e=>e.defaultData={...h0.defaultData,...k1.defaultData,states:new Ue,events:new Ue,visible:!0,raycastLock:!1})(am||(am={}));var hd;(e=>e.defaultData={...am.defaultData,...d0.defaultData})(hd||(hd={}));var f0;(e=>e.defaultData={cornerRadius:[0,0,0,0]})(f0||(f0={}));var V1;(e=>e.defaultData={...hd.defaultData,type:"ellipse2d",width:100,height:100,name:"Ellipse"})(V1||(V1={}));var dd;(e=>e.defaultData={...hd.defaultData,...f0.defaultData,type:"rectangle2d",width:100,height:100,name:"Rectangle"})(dd||(dd={}));var z1;(e=>e.defaultData={...hd.defaultData,type:"text2d",width:100,height:100,fontSize:12,lineHeight:1.2,letterSpacing:0,text:{textValue:"Hello world"},horizontalAlign:1,verticalAlign:1,textTransform:1,font:"Roboto_regular",name:"Text"})(z1||(z1={}));var U1;(e=>e.defaultData={...hd.defaultData,type:"path2d",path:"",name:"Path"})(U1||(U1={}));var hO;(e=>{function i(s){return s.type==="ellipse2d"||s.type==="rectangle2d"||s.type==="text2d"||s.type==="vector2d"||s.type==="path2d"}e.is=i})(hO||(hO={}));var lm;(e=>e.defaultData={...am.defaultData,name:"Group",type:"group2d"})(lm||(lm={}));var G1;(e=>e.defaultData={...am.defaultData,...f0.defaultData,...d0.defaultData,name:"Frame",type:"frame2d",clipped:!0,width:200,height:200,fill:{color:St.fromHexAndA(si,1),enabled:!0},stroke:{color:St.fromHexAndA(0,1),thickness:1,enabled:!1,mode:"inside"},backgroundBlur:{radius:2,enabled:!1},layerBlur:{radius:2,enabled:!1}})(G1||(G1={}));var Na;(e=>{function i(c){switch(c){case"rectangle2d":return{...dd.defaultData};case"ellipse2d":return{...V1.defaultData};case"text2d":return{...z1.defaultData};case"vector2d":return{...dd.defaultData};case"path2d":return{...U1.defaultData};case"frame2d":return{...G1.defaultData};case"group2d":return{...lm.defaultData}}}e.defaultData=i;function s(c){return"width"in c&&"height"in c?[typeof c.width=="number"?c.width*.5:0,typeof c.height=="number"?c.height*.5:0]:[0,0]}e.getPivot=s;function a(c){return c.type==="rectangle2d"||c.type==="ellipse2d"||c.type==="text2d"||c.type==="frame2d"}e.isResizeable=a;function o(c){return c.type==="rectangle2d"||c.type==="frame2d"}e.hasCorners=o})(Na||(Na={}));var p0;(e=>(e.defaultData={name:"UI",type:"scene2d",objects:new yr$1},e.emptyData=function(){return{type:"scene2d",objects:new yr$1}}))(p0||(p0={}));function Js(e,i=!1){let s=e[0].index!==null,a=new Set(Object.keys(e[0].attributes)),o=new Set(Object.keys(e[0].morphAttributes)),c={},d={},g=e[0].morphTargetsRelative,b=new Pe,j=0;for(let _e=0;_e<e.length;++_e){let $=e[_e],rt=0;if(s!==($.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+_e+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let st in $.attributes){if(!a.has(st))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+_e+'. All geometries must have compatible attributes; make sure "'+st+'" attribute exists among all geometries, or in none of them.'),null;c[st]===void 0&&(c[st]=[]),c[st].push($.attributes[st]),rt++}if(rt!==a.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+_e+". Make sure all geometries have the same number of attributes."),null;if(g!==$.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+_e+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let st in $.morphAttributes){if(!o.has(st))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+_e+".  .morphAttributes must be consistent throughout all geometries."),null;d[st]===void 0&&(d[st]=[]),d[st].push($.morphAttributes[st])}if(i){let st;if(s)st=$.index.count;else if($.attributes.position!==void 0)st=$.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+_e+". The geometry must have either an index or a position attribute"),null;b.addGroup(j,st,_e),j+=st}}if(s){let _e=0,$=[];for(let rt=0;rt<e.length;++rt){let st=e[rt].index;for(let ut=0;ut<st.count;++ut)$.push(st.getX(ut)+_e);_e+=e[rt].attributes.position.count}b.setIndex($)}for(let _e in c){let $=dO(c[_e]);if(!$)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+_e+" attribute."),null;b.setAttribute(_e,$)}for(let _e in d){let $=d[_e][0].length;if($===0)break;b.morphAttributes=b.morphAttributes||{},b.morphAttributes[_e]=[];for(let rt=0;rt<$;++rt){let st=[];for(let gt=0;gt<d[_e].length;++gt)st.push(d[_e][gt][rt]);let ut=dO(st);if(!ut)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+_e+" morphAttribute."),null;b.morphAttributes[_e].push(ut)}}return b}function dO(e){let i,s,a,o=0;for(let g=0;g<e.length;++g){let b=e[g];if(b.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(i===void 0&&(i=b.array.constructor),i!==b.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(s===void 0&&(s=b.itemSize),s!==b.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(a===void 0&&(a=b.normalized),a!==b.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;o+=b.array.length}let c=new i(o),d=0;for(let g=0;g<e.length;++g)c.set(e[g].array,d),d+=e[g].array.length;return new Xe(c,s,a)}var fO=Math.pow(2,-24),zc=class{constructor(){}};function Es(e,i,s){return s.min.x=i[e],s.min.y=i[e+1],s.min.z=i[e+2],s.max.x=i[e+3],s.max.y=i[e+4],s.max.z=i[e+5],s}function j1(e){let i=-1,s=-1/0;for(let a=0;a<3;a++){let o=e[a+3]-e[a];o>s&&(s=o,i=a)}return i}function H1(e,i){i.set(e)}function W1(e,i,s){let a,o;for(let c=0;c<3;c++){let d=c+3;a=e[c],o=i[c],s[c]=a<o?a:o,a=e[d],o=i[d],s[d]=a>o?a:o}}function cm(e,i,s){for(let a=0;a<3;a++){let o=i[e+2*a],c=i[e+2*a+1],d=o-c,g=o+c;d<s[a]&&(s[a]=d),g>s[a+3]&&(s[a+3]=g)}}function fd(e){let i=e[3]-e[0],s=e[4]-e[1],a=e[5]-e[2];return 2*(i*s+s*a+a*i)}function M9(e,i){if(!e.index){let s=e.attributes.position.count,a=i.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,o;s>65535?o=new Uint32Array(new a(4*s)):o=new Uint16Array(new a(2*s)),e.setIndex(new Xe(o,1));for(let c=0;c<s;c++)o[c]=c}}function C9(e){if(!e.groups||!e.groups.length)return[{offset:0,count:e.index.count/3}];let i=[],s=new Set;for(let o of e.groups)s.add(o.start),s.add(o.start+o.count);let a=Array.from(s.values()).sort((o,c)=>o-c);for(let o=0;o<a.length-1;o++){let c=a[o],d=a[o+1];i.push({offset:c/3,count:(d-c)/3})}return i}function Y1(e,i,s,a,o=null){let c=1/0,d=1/0,g=1/0,b=-1/0,j=-1/0,_e=-1/0,$=1/0,rt=1/0,st=1/0,ut=-1/0,gt=-1/0,wt=-1/0,yt=o!==null;for(let At=i*6,Ct=(i+s)*6;At<Ct;At+=6){let Tt=e[At+0],kt=e[At+1],Pt=Tt-kt,It=Tt+kt;Pt<c&&(c=Pt),It>b&&(b=It),yt&&Tt<$&&($=Tt),yt&&Tt>ut&&(ut=Tt);let Lt=e[At+2],Nt=e[At+3],Ht=Lt-Nt,dr=Lt+Nt;Ht<d&&(d=Ht),dr>j&&(j=dr),yt&&Lt<rt&&(rt=Lt),yt&&Lt>gt&&(gt=Lt);let hs=e[At+4],_s=e[At+5],ds=hs-_s,Nn=hs+_s;ds<g&&(g=ds),Nn>_e&&(_e=Nn),yt&&hs<st&&(st=hs),yt&&hs>wt&&(wt=hs)}a[0]=c,a[1]=d,a[2]=g,a[3]=b,a[4]=j,a[5]=_e,yt&&(o[0]=$,o[1]=rt,o[2]=st,o[3]=ut,o[4]=gt,o[5]=wt)}function P9(e,i,s,a){let o=1/0,c=1/0,d=1/0,g=-1/0,b=-1/0,j=-1/0;for(let _e=i*6,$=(i+s)*6;_e<$;_e+=6){let rt=e[_e+0];rt<o&&(o=rt),rt>g&&(g=rt);let st=e[_e+2];st<c&&(c=st),st>b&&(b=st);let ut=e[_e+4];ut<d&&(d=ut),ut>j&&(j=ut)}a[0]=o,a[1]=c,a[2]=d,a[3]=g,a[4]=b,a[5]=j}function D9(e,i,s,a,o){let c=s,d=s+a-1,g=o.pos,b=o.axis*2;for(;;){for(;c<=d&&i[c*6+b]<g;)c++;for(;c<=d&&i[d*6+b]>=g;)d--;if(c<d){for(let j=0;j<3;j++){let _e=e[c*3+j];e[c*3+j]=e[d*3+j],e[d*3+j]=_e;let $=i[c*6+j*2+0];i[c*6+j*2+0]=i[d*6+j*2+0],i[d*6+j*2+0]=$;let rt=i[c*6+j*2+1];i[c*6+j*2+1]=i[d*6+j*2+1],i[d*6+j*2+1]=rt}c++,d--}else return c}}var Fa=32,O9=(e,i)=>e.candidate-i.candidate,Fl=new Array(Fa).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),m0=new Float32Array(6);function I9(e,i,s,a,o,c){let d=-1,g=0;if(c===0)d=j1(i),d!==-1&&(g=(i[d]+i[d+3])/2);else if(c===1)d=j1(e),d!==-1&&(g=R9(s,a,o,d));else if(c===2){let b=fd(e),j=1.25*o,_e=a*6,$=(a+o)*6;for(let rt=0;rt<3;rt++){let st=i[rt],ut=(i[rt+3]-st)/Fa;if(o<Fa/4){let gt=[...Fl];gt.length=o;let wt=0;for(let At=_e;At<$;At+=6,wt++){let Ct=gt[wt];Ct.candidate=s[At+2*rt],Ct.count=0;let{bounds:Tt,leftCacheBounds:kt,rightCacheBounds:Pt}=Ct;for(let It=0;It<3;It++)Pt[It]=1/0,Pt[It+3]=-1/0,kt[It]=1/0,kt[It+3]=-1/0,Tt[It]=1/0,Tt[It+3]=-1/0;cm(At,s,Tt)}gt.sort(O9);let yt=o;for(let At=0;At<yt;At++){let Ct=gt[At];for(;At+1<yt&&gt[At+1].candidate===Ct.candidate;)gt.splice(At+1,1),yt--}for(let At=_e;At<$;At+=6){let Ct=s[At+2*rt];for(let Tt=0;Tt<yt;Tt++){let kt=gt[Tt];Ct>=kt.candidate?cm(At,s,kt.rightCacheBounds):(cm(At,s,kt.leftCacheBounds),kt.count++)}}for(let At=0;At<yt;At++){let Ct=gt[At],Tt=Ct.count,kt=o-Ct.count,Pt=Ct.leftCacheBounds,It=Ct.rightCacheBounds,Lt=0;Tt!==0&&(Lt=fd(Pt)/b);let Nt=0;kt!==0&&(Nt=fd(It)/b);let Ht=1+1.25*(Lt*Tt+Nt*kt);Ht<j&&(d=rt,j=Ht,g=Ct.candidate)}}else{for(let yt=0;yt<Fa;yt++){let At=Fl[yt];At.count=0,At.candidate=st+ut+yt*ut;let Ct=At.bounds;for(let Tt=0;Tt<3;Tt++)Ct[Tt]=1/0,Ct[Tt+3]=-1/0}for(let yt=_e;yt<$;yt+=6){let At=~~((s[yt+2*rt]-st)/ut);At>=Fa&&(At=Fa-1);let Ct=Fl[At];Ct.count++,cm(yt,s,Ct.bounds)}let gt=Fl[Fa-1];H1(gt.bounds,gt.rightCacheBounds);for(let yt=Fa-2;yt>=0;yt--){let At=Fl[yt],Ct=Fl[yt+1];W1(At.bounds,Ct.rightCacheBounds,At.rightCacheBounds)}let wt=0;for(let yt=0;yt<Fa-1;yt++){let At=Fl[yt],Ct=At.count,Tt=At.bounds,kt=Fl[yt+1].rightCacheBounds;Ct!==0&&(wt===0?H1(Tt,m0):W1(Tt,m0,m0)),wt+=Ct;let Pt=0,It=0;wt!==0&&(Pt=fd(m0)/b);let Lt=o-wt;Lt!==0&&(It=fd(kt)/b);let Nt=1+1.25*(Pt*wt+It*Lt);Nt<j&&(d=rt,j=Nt,g=At.candidate)}}}}else console.warn(`MeshBVH: Invalid build strategy value ${c} used.`);return{axis:d,pos:g}}function R9(e,i,s,a){let o=0;for(let c=i,d=i+s;c<d;c++)o+=e[c*6+a*2];return o/s}function L9(e,i){let s=e.attributes.position,a=e.index.array,o=a.length/3,c=new Float32Array(o*6),d=s.normalized,g=s.array,b=s.offset||0,j=3;s.isInterleavedBufferAttribute&&(j=s.data.stride);let _e=["getX","getY","getZ"];for(let $=0;$<o;$++){let rt=$*3,st=$*6,ut,gt,wt;d?(ut=a[rt+0],gt=a[rt+1],wt=a[rt+2]):(ut=a[rt+0]*j+b,gt=a[rt+1]*j+b,wt=a[rt+2]*j+b);for(let yt=0;yt<3;yt++){let At,Ct,Tt;d?(At=s[_e[yt]](ut),Ct=s[_e[yt]](gt),Tt=s[_e[yt]](wt)):(At=g[ut+yt],Ct=g[gt+yt],Tt=g[wt+yt]);let kt=At;Ct<kt&&(kt=Ct),Tt<kt&&(kt=Tt);let Pt=At;Ct>Pt&&(Pt=Ct),Tt>Pt&&(Pt=Tt);let It=(Pt-kt)/2,Lt=yt*2;c[st+Lt+0]=kt+It,c[st+Lt+1]=It+(Math.abs(kt)+It)*fO,kt<i[yt]&&(i[yt]=kt),Pt>i[yt+3]&&(i[yt+3]=Pt)}}return c}function B9(e,i){function s(yt){rt&&rt(yt/st)}function a(yt,At,Ct,Tt=null,kt=0){if(!ut&&kt>=b&&(ut=!0,j&&(console.warn(`MeshBVH: Max depth of ${b} reached when generating BVH. Consider increasing maxDepth.`),console.warn(e))),Ct<=_e||kt>=b)return s(At+Ct),yt.offset=At,yt.count=Ct,yt;let Pt=I9(yt.boundingData,Tt,d,At,Ct,$);if(Pt.axis===-1)return s(At+Ct),yt.offset=At,yt.count=Ct,yt;let It=D9(g,d,At,Ct,Pt);if(It===At||It===At+Ct)s(At+Ct),yt.offset=At,yt.count=Ct;else{yt.splitAxis=Pt.axis;let Lt=new zc,Nt=At,Ht=It-At;yt.left=Lt,Lt.boundingData=new Float32Array(6),Y1(d,Nt,Ht,Lt.boundingData,c),a(Lt,Nt,Ht,c,kt+1);let dr=new zc,hs=It,_s=Ct-Ht;yt.right=dr,dr.boundingData=new Float32Array(6),Y1(d,hs,_s,dr.boundingData,c),a(dr,hs,_s,c,kt+1)}return yt}M9(e,i);let o=new Float32Array(6),c=new Float32Array(6),d=L9(e,o),g=e.index.array,b=i.maxDepth,j=i.verbose,_e=i.maxLeafTris,$=i.strategy,rt=i.onProgress,st=e.index.count/3,ut=!1,gt=[],wt=C9(e);if(wt.length===1){let yt=wt[0],At=new zc;At.boundingData=o,P9(d,yt.offset,yt.count,c),a(At,yt.offset,yt.count,c),gt.push(At)}else for(let yt of wt){let At=new zc;At.boundingData=new Float32Array(6),Y1(d,yt.offset,yt.count,At.boundingData,c),a(At,yt.offset,yt.count,c),gt.push(At)}return gt}function gO(e,i){let s=B9(e,i),a,o,c,d=[],g=i.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;for(let _e=0;_e<s.length;_e++){let $=s[_e],rt=b($),st=new g(32*rt);a=new Float32Array(st),o=new Uint32Array(st),c=new Uint16Array(st),j(0,$),d.push(st)}return d;function b(_e){return _e.count?1:1+b(_e.left)+b(_e.right)}function j(_e,$){let rt=_e/4,st=_e/2,ut=!!$.count,gt=$.boundingData;for(let wt=0;wt<6;wt++)a[rt+wt]=gt[wt];if(ut){let wt=$.offset,yt=$.count;return o[rt+6]=wt,c[st+14]=yt,c[st+15]=65535,_e+32}else{let wt=$.left,yt=$.right,At=$.splitAxis,Ct;if(Ct=j(_e+32,wt),Ct/4>Math.pow(2,32))throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return o[rt+6]=Ct/4,Ct=j(Ct,yt),o[rt+7]=At,Ct}}}var Vn=class{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(e,i){let s=1/0,a=-1/0;for(let o=0,c=e.length;o<c;o++){let d=e[o][i];s=d<s?d:s,a=d>a?d:a}this.min=s,this.max=a}setFromPoints(e,i){let s=1/0,a=-1/0;for(let o=0,c=i.length;o<c;o++){let d=i[o],g=e.dot(d);s=g<s?g:s,a=g>a?g:a}this.min=s,this.max=a}isSeparated(e){return this.min>e.max||e.min>this.max}};Vn.prototype.setFromBox=function(){let e=new _;return function(i,s){let a=s.min,o=s.max,c=1/0,d=-1/0;for(let g=0;g<=1;g++)for(let b=0;b<=1;b++)for(let j=0;j<=1;j++){e.x=a.x*g+o.x*(1-g),e.y=a.y*b+o.y*(1-b),e.z=a.z*j+o.z*(1-j);let _e=i.dot(e);c=Math.min(_e,c),d=Math.max(_e,d)}this.min=c,this.max=d}}();var N9=function(){let e=new _,i=new _,s=new _;return function(a,o,c){let d=a.start,g=e,b=o.start,j=i;s.subVectors(d,b),e.subVectors(a.end,a.start),i.subVectors(o.end,o.start);let _e=s.dot(j),$=j.dot(g),rt=j.dot(j),st=s.dot(g),ut=g.dot(g)*rt-$*$,gt,wt;ut!==0?gt=(_e*$-st*rt)/ut:gt=0,wt=(_e+gt*$)/rt,c.x=gt,c.y=wt}}(),um=function(){let e=new z$1,i=new _,s=new _;return function(a,o,c,d){N9(a,o,e);let g=e.x,b=e.y;if(g>=0&&g<=1&&b>=0&&b<=1){a.at(g,c),o.at(b,d);return}else if(g>=0&&g<=1){b<0?o.at(0,d):o.at(1,d),a.closestPointToPoint(d,!0,c);return}else if(b>=0&&b<=1){g<0?a.at(0,c):a.at(1,c),o.closestPointToPoint(c,!0,d);return}else{let j;g<0?j=a.start:j=a.end;let _e;b<0?_e=o.start:_e=o.end;let $=i,rt=s;if(a.closestPointToPoint(_e,!0,i),o.closestPointToPoint(j,!0,s),$.distanceToSquared(_e)<=rt.distanceToSquared(j)){c.copy($),d.copy(_e);return}else{c.copy(j),d.copy(rt);return}}}}(),yO=function(){let e=new _,i=new _,s=new ii,a=new Di;return function(o,c){let{radius:d,center:g}=o,{a:b,b:j,c:_e}=c;if(a.start=b,a.end=j,a.closestPointToPoint(g,!0,e).distanceTo(g)<=d||(a.start=b,a.end=_e,a.closestPointToPoint(g,!0,e).distanceTo(g)<=d)||(a.start=j,a.end=_e,a.closestPointToPoint(g,!0,e).distanceTo(g)<=d))return!0;let $=c.getPlane(s);if(Math.abs($.distanceToPoint(g))<=d){let rt=$.projectPoint(g,i);if(c.containsPoint(rt))return!0}return!1}}(),F9=1e-15;function pd(e){return Math.abs(e)<F9}var zn=class extends Dr$1{constructor(...e){super(...e),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new _),this.satBounds=new Array(4).fill().map(()=>new Vn),this.points=[this.a,this.b,this.c],this.sphere=new Br,this.plane=new ii,this.needsUpdate=!0}intersectsSphere(e){return yO(e,this)}update(){let e=this.a,i=this.b,s=this.c,a=this.points,o=this.satAxes,c=this.satBounds,d=o[0],g=c[0];this.getNormal(d),g.setFromPoints(d,a);let b=o[1],j=c[1];b.subVectors(e,i),j.setFromPoints(b,a);let _e=o[2],$=c[2];_e.subVectors(i,s),$.setFromPoints(_e,a);let rt=o[3],st=c[3];rt.subVectors(s,e),st.setFromPoints(rt,a),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(d,e),this.needsUpdate=!1}};zn.prototype.closestPointToSegment=function(){let e=new _,i=new _,s=new Di;return function(a,o=null,c=null){let{start:d,end:g}=a,b=this.points,j,_e=1/0;for(let $=0;$<3;$++){let rt=($+1)%3;s.start.copy(b[$]),s.end.copy(b[rt]),um(s,a,e,i),j=e.distanceToSquared(i),j<_e&&(_e=j,o&&o.copy(e),c&&c.copy(i))}return this.closestPointToPoint(d,e),j=d.distanceToSquared(e),j<_e&&(_e=j,o&&o.copy(e),c&&c.copy(d)),this.closestPointToPoint(g,e),j=g.distanceToSquared(e),j<_e&&(_e=j,o&&o.copy(e),c&&c.copy(g)),Math.sqrt(_e)}}();zn.prototype.intersectsTriangle=function(){let e=new zn,i=new Array(3),s=new Array(3),a=new Vn,o=new Vn,c=new _,d=new _,g=new _,b=new _,j=new Di,_e=new Di,$=new Di;return function(rt,st=null,ut=!1){this.needsUpdate&&this.update(),rt.isExtendedTriangle?rt.needsUpdate&&rt.update():(e.copy(rt),e.update(),rt=e);let gt=this.plane,wt=rt.plane;if(Math.abs(gt.normal.dot(wt.normal))>1-1e-10){let yt=this.satBounds,At=this.satAxes;s[0]=rt.a,s[1]=rt.b,s[2]=rt.c;for(let kt=0;kt<4;kt++){let Pt=yt[kt],It=At[kt];if(a.setFromPoints(It,s),Pt.isSeparated(a))return!1}let Ct=rt.satBounds,Tt=rt.satAxes;i[0]=this.a,i[1]=this.b,i[2]=this.c;for(let kt=0;kt<4;kt++){let Pt=Ct[kt],It=Tt[kt];if(a.setFromPoints(It,i),Pt.isSeparated(a))return!1}for(let kt=0;kt<4;kt++){let Pt=At[kt];for(let It=0;It<4;It++){let Lt=Tt[It];if(c.crossVectors(Pt,Lt),a.setFromPoints(c,i),o.setFromPoints(c,s),a.isSeparated(o))return!1}}return st&&(ut||console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),st.start.set(0,0,0),st.end.set(0,0,0)),!0}else{let yt=this.points,At=!1,Ct=0;for(let _s=0;_s<3;_s++){let ds=yt[_s],Nn=yt[(_s+1)%3];j.start.copy(ds),j.end.copy(Nn),j.delta(d);let us=At?_e.start:_e.end,hn=pd(wt.distanceToPoint(ds));if(pd(wt.normal.dot(d))&&hn){_e.copy(j),Ct=2;break}if((wt.intersectLine(j,us)||hn)&&!pd(us.distanceTo(Nn))){if(Ct++,At)break;At=!0}}if(Ct===1&&rt.containsPoint(_e.end))return st&&(st.start.copy(_e.end),st.end.copy(_e.end)),!0;if(Ct!==2)return!1;let Tt=rt.points,kt=!1,Pt=0;for(let _s=0;_s<3;_s++){let ds=Tt[_s],Nn=Tt[(_s+1)%3];j.start.copy(ds),j.end.copy(Nn),j.delta(g);let us=kt?$.start:$.end,hn=pd(gt.distanceToPoint(ds));if(pd(gt.normal.dot(g))&&hn){$.copy(j),Pt=2;break}if((gt.intersectLine(j,us)||hn)&&!pd(us.distanceTo(Nn))){if(Pt++,kt)break;kt=!0}}if(Pt===1&&this.containsPoint($.end))return st&&(st.start.copy($.end),st.end.copy($.end)),!0;if(Pt!==2)return!1;if(_e.delta(d),$.delta(g),d.dot(g)<0){let _s=$.start;$.start=$.end,$.end=_s}let It=_e.start.dot(d),Lt=_e.end.dot(d),Nt=$.start.dot(d),Ht=$.end.dot(d),dr=Lt<Nt,hs=It<Ht;return It!==Ht&&Nt!==Lt&&dr===hs?!1:(st&&(b.subVectors(_e.start,$.start),b.dot(d)>0?st.start.copy(_e.start):st.start.copy($.start),b.subVectors(_e.end,$.end),b.dot(d)<0?st.end.copy(_e.end):st.end.copy($.end)),!0)}}}();zn.prototype.distanceToPoint=function(){let e=new _;return function(i){return this.closestPointToPoint(i,e),i.distanceTo(e)}}();zn.prototype.distanceToTriangle=function(){let e=new _,i=new _,s=["a","b","c"],a=new Di,o=new Di;return function(c,d=null,g=null){let b=d||g?a:null;if(this.intersectsTriangle(c,b))return(d||g)&&(d&&b.getCenter(d),g&&b.getCenter(g)),0;let j=1/0;for(let _e=0;_e<3;_e++){let $,rt=s[_e],st=c[rt];this.closestPointToPoint(st,e),$=st.distanceToSquared(e),$<j&&(j=$,d&&d.copy(e),g&&g.copy(st));let ut=this[rt];c.closestPointToPoint(ut,e),$=ut.distanceToSquared(e),$<j&&(j=$,d&&d.copy(ut),g&&g.copy(e))}for(let _e=0;_e<3;_e++){let $=s[_e],rt=s[(_e+1)%3];a.set(this[$],this[rt]);for(let st=0;st<3;st++){let ut=s[st],gt=s[(st+1)%3];o.set(c[ut],c[gt]),um(a,o,e,i);let wt=e.distanceToSquared(i);wt<j&&(j=wt,d&&d.copy(e),g&&g.copy(i))}}return Math.sqrt(j)}}();var Un=class{constructor(e,i,s){this.isOrientedBox=!0,this.min=new _,this.max=new _,this.matrix=new ce$1,this.invMatrix=new ce$1,this.points=new Array(8).fill().map(()=>new _),this.satAxes=new Array(3).fill().map(()=>new _),this.satBounds=new Array(3).fill().map(()=>new Vn),this.alignedSatBounds=new Array(3).fill().map(()=>new Vn),this.needsUpdate=!1,e&&this.min.copy(e),i&&this.max.copy(i),s&&this.matrix.copy(s)}set(e,i,s){this.min.copy(e),this.max.copy(i),this.matrix.copy(s),this.needsUpdate=!0}copy(e){this.min.copy(e.min),this.max.copy(e.max),this.matrix.copy(e.matrix),this.needsUpdate=!0}};Un.prototype.update=function(){return function(){let e=this.matrix,i=this.min,s=this.max,a=this.points;for(let b=0;b<=1;b++)for(let j=0;j<=1;j++)for(let _e=0;_e<=1;_e++){let $=1*b|2*j|4*_e,rt=a[$];rt.x=b?s.x:i.x,rt.y=j?s.y:i.y,rt.z=_e?s.z:i.z,rt.applyMatrix4(e)}let o=this.satBounds,c=this.satAxes,d=a[0];for(let b=0;b<3;b++){let j=c[b],_e=o[b],$=1<<b,rt=a[$];j.subVectors(d,rt),_e.setFromPoints(j,a)}let g=this.alignedSatBounds;g[0].setFromPointsField(a,"x"),g[1].setFromPointsField(a,"y"),g[2].setFromPointsField(a,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1}}();Un.prototype.intersectsBox=function(){let e=new Vn;return function(i){this.needsUpdate&&this.update();let s=i.min,a=i.max,o=this.satBounds,c=this.satAxes,d=this.alignedSatBounds;if(e.min=s.x,e.max=a.x,d[0].isSeparated(e)||(e.min=s.y,e.max=a.y,d[1].isSeparated(e))||(e.min=s.z,e.max=a.z,d[2].isSeparated(e)))return!1;for(let g=0;g<3;g++){let b=c[g],j=o[g];if(e.setFromBox(b,i),j.isSeparated(e))return!1}return!0}}();Un.prototype.intersectsTriangle=function(){let e=new zn,i=new Array(3),s=new Vn,a=new Vn,o=new _;return function(c){this.needsUpdate&&this.update(),c.isExtendedTriangle?c.needsUpdate&&c.update():(e.copy(c),e.update(),c=e);let d=this.satBounds,g=this.satAxes;i[0]=c.a,i[1]=c.b,i[2]=c.c;for(let $=0;$<3;$++){let rt=d[$],st=g[$];if(s.setFromPoints(st,i),rt.isSeparated(s))return!1}let b=c.satBounds,j=c.satAxes,_e=this.points;for(let $=0;$<3;$++){let rt=b[$],st=j[$];if(s.setFromPoints(st,_e),rt.isSeparated(s))return!1}for(let $=0;$<3;$++){let rt=g[$];for(let st=0;st<4;st++){let ut=j[st];if(o.crossVectors(rt,ut),s.setFromPoints(o,i),a.setFromPoints(o,_e),s.isSeparated(a))return!1}}return!0}}();Un.prototype.closestPointToPoint=function(){return function(e,i){return this.needsUpdate&&this.update(),i.copy(e).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),i}}();Un.prototype.distanceToPoint=function(){let e=new _;return function(i){return this.closestPointToPoint(i,e),i.distanceTo(e)}}();Un.prototype.distanceToBox=function(){let e=["x","y","z"],i=new Array(12).fill().map(()=>new Di),s=new Array(12).fill().map(()=>new Di),a=new _,o=new _;return function(c,d=0,g=null,b=null){if(this.needsUpdate&&this.update(),this.intersectsBox(c))return(g||b)&&(c.getCenter(o),this.closestPointToPoint(o,a),c.closestPointToPoint(a,o),g&&g.copy(a),b&&b.copy(o)),0;let j=d*d,_e=c.min,$=c.max,rt=this.points,st=1/0;for(let gt=0;gt<8;gt++){let wt=rt[gt];o.copy(wt).clamp(_e,$);let yt=wt.distanceToSquared(o);if(yt<st&&(st=yt,g&&g.copy(wt),b&&b.copy(o),yt<j))return Math.sqrt(yt)}let ut=0;for(let gt=0;gt<3;gt++)for(let wt=0;wt<=1;wt++)for(let yt=0;yt<=1;yt++){let At=(gt+1)%3,Ct=(gt+2)%3,Tt=wt<<At|yt<<Ct,kt=1<<gt|wt<<At|yt<<Ct,Pt=rt[Tt],It=rt[kt];i[ut].set(Pt,It);let Lt=e[gt],Nt=e[At],Ht=e[Ct],dr=s[ut],hs=dr.start,_s=dr.end;hs[Lt]=_e[Lt],hs[Nt]=wt?_e[Nt]:$[Nt],hs[Ht]=yt?_e[Ht]:$[Nt],_s[Lt]=$[Lt],_s[Nt]=wt?_e[Nt]:$[Nt],_s[Ht]=yt?_e[Ht]:$[Nt],ut++}for(let gt=0;gt<=1;gt++)for(let wt=0;wt<=1;wt++)for(let yt=0;yt<=1;yt++){o.x=gt?$.x:_e.x,o.y=wt?$.y:_e.y,o.z=yt?$.z:_e.z,this.closestPointToPoint(o,a);let At=o.distanceToSquared(a);if(At<st&&(st=At,g&&g.copy(a),b&&b.copy(o),At<j))return Math.sqrt(At)}for(let gt=0;gt<12;gt++){let wt=i[gt];for(let yt=0;yt<12;yt++){let At=s[yt];um(wt,At,a,o);let Ct=a.distanceToSquared(o);if(Ct<st&&(st=Ct,g&&g.copy(a),b&&b.copy(o),Ct<j))return Math.sqrt(Ct)}}return Math.sqrt(st)}}();var md=new _,gd=new _,yd=new _,y0=new z$1,v0=new z$1,x0=new z$1,vO=new _,xO=new _,bO=new _,b0=new _;function k9(e,i,s,a,o,c){let d;return c===yi?d=e.intersectTriangle(a,s,i,!0,o):d=e.intersectTriangle(i,s,a,c!==tn,o),d===null?null:{distance:e.origin.distanceTo(o),point:o.clone()}}function V9(e,i,s,a,o,c,d,g,b){md.fromBufferAttribute(i,c),gd.fromBufferAttribute(i,d),yd.fromBufferAttribute(i,g);let j=k9(e,md,gd,yd,b0,b);if(j){a&&(y0.fromBufferAttribute(a,c),v0.fromBufferAttribute(a,d),x0.fromBufferAttribute(a,g),j.uv=Dr$1.getInterpolation(b0,md,gd,yd,y0,v0,x0,new z$1)),o&&(y0.fromBufferAttribute(o,c),v0.fromBufferAttribute(o,d),x0.fromBufferAttribute(o,g),j.uv1=Dr$1.getInterpolation(b0,md,gd,yd,y0,v0,x0,new z$1)),s&&(vO.fromBufferAttribute(s,c),xO.fromBufferAttribute(s,d),bO.fromBufferAttribute(s,g),j.normal=Dr$1.getInterpolation(b0,md,gd,yd,vO,xO,bO,new _),j.normal.dot(e.direction)>0&&j.normal.multiplyScalar(-1));let _e={a:c,b:d,c:g,normal:new _,materialIndex:0};Dr$1.getNormal(md,gd,yd,_e.normal),j.face=_e,j.faceIndex=c}return j}function Q1(e,i,s,a,o){let c=a*3,d=e.index.getX(c),g=e.index.getX(c+1),b=e.index.getX(c+2),{position:j,normal:_e,uv:$,uv1:rt}=e.attributes,st=V9(s,j,_e,$,rt,d,g,b,i);return st?(st.faceIndex=a,o&&o.push(st),st):null}function SO(e,i,s,a,o,c){for(let d=a,g=a+o;d<g;d++)Q1(e,i,s,d,c)}function wO(e,i,s,a,o){let c=1/0,d=null;for(let g=a,b=a+o;g<b;g++){let j=Q1(e,i,s,g);j&&j.distance<c&&(d=j,c=j.distance)}return d}function Ts(e,i,s,a){let o=e.a,c=e.b,d=e.c,g=i,b=i+1,j=i+2;s&&(g=s.getX(i),b=s.getX(i+1),j=s.getX(i+2)),o.x=a.getX(g),o.y=a.getY(g),o.z=a.getZ(g),c.x=a.getX(b),c.y=a.getY(b),c.z=a.getZ(b),d.x=a.getX(j),d.y=a.getY(j),d.z=a.getZ(j)}function K1(e,i,s,a,o,c,d){let g=s.index,b=s.attributes.position;for(let j=e,_e=i+e;j<_e;j++)if(Ts(d,j*3,g,b),d.needsUpdate=!0,a(d,j,o,c))return!0;return!1}var vd=class{constructor(e){this._getNewPrimitive=e,this._primitives=[]}getPrimitive(){let e=this._primitives;return e.length===0?this._getNewPrimitive():e.pop()}releasePrimitive(e){this._primitives.push(e)}};function ka(e,i){return i[e+15]===65535}function Uc(e,i){return i[e+6]}function xd(e,i){return i[e+14]}function bd(e){return e+8}function Sd(e,i){return i[e+6]}function AO(e,i){return i[e+7]}var wd=new Wt,w0=new _,U9=["x","y","z"];function A0(e,i,s,a,o){let c=e*2,d=Ad,g=kl,b=Vl;if(ka(c,g)){let j=Uc(e,b),_e=xd(c,g);SO(i,s,a,j,_e,o)}else{let j=bd(e);E0(j,d,a,w0)&&A0(j,i,s,a,o);let _e=Sd(e,b);E0(_e,d,a,w0)&&A0(_e,i,s,a,o)}}function _0(e,i,s,a){let o=e*2,c=Ad,d=kl,g=Vl;if(ka(o,d)){let b=Uc(e,g),j=xd(o,d);return wO(i,s,a,b,j)}else{let b=AO(e,g),j=U9[b],_e=a.direction[j]>=0,$,rt;_e?($=bd(e),rt=Sd(e,g)):($=Sd(e,g),rt=bd(e));let st=E0($,c,a,w0)?_0($,i,s,a):null;if(st){let gt=st.point[j];if(_e?gt<=c[rt+b]:gt>=c[rt+b+3])return st}let ut=E0(rt,c,a,w0)?_0(rt,i,s,a):null;return st&&ut?st.distance<=ut.distance?st:ut:st||ut||null}}var _O=function(){let e,i,s=[],a=new vd(()=>new Wt);return function(...c){e=a.getPrimitive(),i=a.getPrimitive(),s.push(e,i);let d=o(...c);a.releasePrimitive(e),a.releasePrimitive(i),s.pop(),s.pop();let g=s.length;return g>0&&(i=s[g-1],e=s[g-2]),d};function o(c,d,g,b,j=null,_e=0,$=0){function rt(At){let Ct=At*2,Tt=kl,kt=Vl;for(;!ka(Ct,Tt);)At=bd(At),Ct=At*2;return Uc(At,kt)}function st(At){let Ct=At*2,Tt=kl,kt=Vl;for(;!ka(Ct,Tt);)At=Sd(At,kt),Ct=At*2;return Uc(At,kt)+xd(Ct,Tt)}let ut=c*2,gt=Ad,wt=kl,yt=Vl;if(ka(ut,wt)){let At=Uc(c,yt),Ct=xd(ut,wt);return Es(c,gt,e),b(At,Ct,!1,$,_e+c,e)}else{let At=bd(c),Ct=Sd(c,yt),Tt=At,kt=Ct,Pt,It,Lt,Nt;if(j&&(Lt=e,Nt=i,Es(Tt,gt,Lt),Es(kt,gt,Nt),Pt=j(Lt),It=j(Nt),It<Pt)){Tt=Ct,kt=At;let us=Pt;Pt=It,It=us,Lt=Nt}Lt||(Lt=e,Es(Tt,gt,Lt));let Ht=ka(Tt*2,wt),dr=g(Lt,Ht,Pt,$+1,_e+Tt),hs;if(dr===2){let us=rt(Tt),hn=st(Tt)-us;hs=b(us,hn,!0,$+1,_e+Tt,Lt)}else hs=dr&&o(Tt,d,g,b,j,_e,$+1);if(hs)return!0;Nt=i,Es(kt,gt,Nt);let _s=ka(kt*2,wt),ds=g(Nt,_s,It,$+1,_e+kt),Nn;if(ds===2){let us=rt(kt),hn=st(kt)-us;Nn=b(us,hn,!0,$+1,_e+kt,Nt)}else Nn=ds&&o(kt,d,g,b,j,_e,$+1);return!!Nn}}}(),EO=function(){let e=new zn,i=new zn,s=new ce$1,a=new Un,o=new Un;return function c(d,g,b,j,_e=null){let $=d*2,rt=Ad,st=kl,ut=Vl;if(_e===null&&(b.boundingBox||b.computeBoundingBox(),a.set(b.boundingBox.min,b.boundingBox.max,j),_e=a),ka($,st)){let gt=g,wt=gt.index,yt=gt.attributes.position,At=b.index,Ct=b.attributes.position,Tt=Uc(d,ut),kt=xd($,st);if(s.copy(j).invert(),b.boundsTree)return Es(d,rt,o),o.matrix.copy(s),o.needsUpdate=!0,b.boundsTree.shapecast({intersectsBounds:Pt=>o.intersectsBox(Pt),intersectsTriangle:Pt=>{Pt.a.applyMatrix4(j),Pt.b.applyMatrix4(j),Pt.c.applyMatrix4(j),Pt.needsUpdate=!0;for(let It=Tt*3,Lt=(kt+Tt)*3;It<Lt;It+=3)if(Ts(i,It,wt,yt),i.needsUpdate=!0,Pt.intersectsTriangle(i))return!0;return!1}});for(let Pt=Tt*3,It=kt+Tt*3;Pt<It;Pt+=3){Ts(e,Pt,wt,yt),e.a.applyMatrix4(s),e.b.applyMatrix4(s),e.c.applyMatrix4(s),e.needsUpdate=!0;for(let Lt=0,Nt=At.count;Lt<Nt;Lt+=3)if(Ts(i,Lt,At,Ct),i.needsUpdate=!0,e.intersectsTriangle(i))return!0}}else{let gt=d+8,wt=ut[d+6];return Es(gt,rt,wd),!!(_e.intersectsBox(wd)&&c(gt,g,b,j,_e)||(Es(wt,rt,wd),_e.intersectsBox(wd)&&c(wt,g,b,j,_e)))}}}();function E0(e,i,s,a){return Es(e,i,wd),s.intersectBox(wd,a)}var Z1=[],S0,Ad,kl,Vl;function _d(e){S0&&Z1.push(S0),S0=e,Ad=new Float32Array(e),kl=new Uint16Array(e),Vl=new Uint32Array(e)}function hm(){S0=null,Ad=null,kl=null,Vl=null,Z1.length&&_d(Z1.pop())}var J1=Symbol("skip tree generation"),$1=new Wt,eA=new Wt,Ed=new ce$1,Gc=new Un,dm=new Un,fm=new _,T0=new _,G9=new _,j9=new _,H9=new _,TO=new Wt,ko=new vd(()=>new zn),Vo=class{static serialize(e,i={}){if(i.isBufferGeometry)return console.warn("MeshBVH.serialize: The arguments for the function have changed. See documentation for new signature."),Vo.serialize(arguments[0],{cloneBuffers:arguments[2]===void 0?!0:arguments[2]});i={cloneBuffers:!0,...i};let s=e.geometry,a=e._roots,o=s.getIndex(),c;return i.cloneBuffers?c={roots:a.map(d=>d.slice()),index:o.array.slice()}:c={roots:a,index:o.array},c}static deserialize(e,i,s={}){if(typeof s=="boolean")return console.warn("MeshBVH.deserialize: The arguments for the function have changed. See documentation for new signature."),Vo.deserialize(arguments[0],arguments[1],{setIndex:arguments[2]===void 0?!0:arguments[2]});s={setIndex:!0,...s};let{index:a,roots:o}=e,c=new Vo(i,{...s,[J1]:!0});if(c._roots=o,s.setIndex){let d=i.getIndex();if(d===null){let g=new Xe(e.index,1,!1);i.setIndex(g)}else d.array!==a&&(d.array.set(a),d.needsUpdate=!0)}return c}constructor(e,i={}){if(e.isBufferGeometry){if(e.index&&e.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw new Error("MeshBVH: Only BufferGeometries are supported.");if(i=Object.assign({strategy:0,maxDepth:40,maxLeafTris:10,verbose:!0,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,[J1]:!1},i),i.useSharedArrayBuffer&&typeof SharedArrayBuffer>"u")throw new Error("MeshBVH: SharedArrayBuffer is not available.");this._roots=null,i[J1]||(this._roots=gO(e,i),!e.boundingBox&&i.setBoundingBox&&(e.boundingBox=this.getBoundingBox(new Wt))),this.geometry=e}refit(e=null){e&&Array.isArray(e)&&(e=new Set(e));let i=this.geometry,s=i.index.array,a=i.attributes.position,o,c,d,g,b=0,j=this._roots;for(let $=0,rt=j.length;$<rt;$++)o=j[$],c=new Uint32Array(o),d=new Uint16Array(o),g=new Float32Array(o),_e(0,b),b+=o.byteLength;function _e($,rt,st=!1){let ut=$*2;if(d[ut+15]===65535){let gt=c[$+6],wt=d[ut+14],yt=1/0,At=1/0,Ct=1/0,Tt=-1/0,kt=-1/0,Pt=-1/0;for(let It=3*gt,Lt=3*(gt+wt);It<Lt;It++){let Nt=s[It],Ht=a.getX(Nt),dr=a.getY(Nt),hs=a.getZ(Nt);Ht<yt&&(yt=Ht),Ht>Tt&&(Tt=Ht),dr<At&&(At=dr),dr>kt&&(kt=dr),hs<Ct&&(Ct=hs),hs>Pt&&(Pt=hs)}return g[$+0]!==yt||g[$+1]!==At||g[$+2]!==Ct||g[$+3]!==Tt||g[$+4]!==kt||g[$+5]!==Pt?(g[$+0]=yt,g[$+1]=At,g[$+2]=Ct,g[$+3]=Tt,g[$+4]=kt,g[$+5]=Pt,!0):!1}else{let gt=$+8,wt=c[$+6],yt=gt+rt,At=wt+rt,Ct=st,Tt=!1,kt=!1;e?Ct||(Tt=e.has(yt),kt=e.has(At),Ct=!Tt&&!kt):(Tt=!0,kt=!0);let Pt=Ct||Tt,It=Ct||kt,Lt=!1;Pt&&(Lt=_e(gt,rt,Ct));let Nt=!1;It&&(Nt=_e(wt,rt,Ct));let Ht=Lt||Nt;if(Ht)for(let dr=0;dr<3;dr++){let hs=gt+dr,_s=wt+dr,ds=g[hs],Nn=g[hs+3],us=g[_s],hn=g[_s+3];g[$+dr]=ds<us?ds:us,g[$+dr+3]=Nn>hn?Nn:hn}return Ht}}}traverse(e,i=0){let s=this._roots[i],a=new Uint32Array(s),o=new Uint16Array(s);c(0);function c(d,g=0){let b=d*2,j=o[b+15]===65535;if(j){let _e=a[d+6],$=o[b+14];e(g,j,new Float32Array(s,d*4,6),_e,$)}else{let _e=d+8,$=a[d+6],rt=a[d+7];e(g,j,new Float32Array(s,d*4,6),rt)||(c(_e,g+1),c($,g+1))}}}raycast(e,i=es){let s=this._roots,a=this.geometry,o=[],c=i.isMaterial,d=Array.isArray(i),g=a.groups,b=c?i.side:i;for(let j=0,_e=s.length;j<_e;j++){let $=d?i[g[j].materialIndex].side:b,rt=o.length;if(_d(s[j]),A0(0,a,$,e,o),hm(),d){let st=g[j].materialIndex;for(let ut=rt,gt=o.length;ut<gt;ut++)o[ut].face.materialIndex=st}}return o}raycastFirst(e,i=es){let s=this._roots,a=this.geometry,o=i.isMaterial,c=Array.isArray(i),d=null,g=a.groups,b=o?i.side:i;for(let j=0,_e=s.length;j<_e;j++){let $=c?i[g[j].materialIndex].side:b;_d(s[j]);let rt=_0(0,a,$,e);hm(),rt!=null&&(d==null||rt.distance<d.distance)&&(d=rt,c&&(rt.face.materialIndex=g[j].materialIndex))}return d}intersectsGeometry(e,i){let s=this.geometry,a=!1;for(let o of this._roots)if(_d(o),a=EO(0,s,e,i),hm(),a)break;return a}shapecast(e,i,s){let a=this.geometry;if(e instanceof Function){if(i){let $=i;i=(rt,st,ut,gt)=>{let wt=st*3;return $(rt,wt,wt+1,wt+2,ut,gt)}}e={boundsTraverseOrder:s,intersectsBounds:e,intersectsTriangle:i,intersectsRange:null},console.warn("MeshBVH: Shapecast function signature has changed and now takes an object of callbacks as a second argument. See docs for new signature.")}let o=ko.getPrimitive(),{boundsTraverseOrder:c,intersectsBounds:d,intersectsRange:g,intersectsTriangle:b}=e;if(g&&b){let $=g;g=(rt,st,ut,gt,wt)=>$(rt,st,ut,gt,wt)?!0:K1(rt,st,a,b,ut,gt,o)}else g||(b?g=($,rt,st,ut)=>K1($,rt,a,b,st,ut,o):g=($,rt,st)=>st);let j=!1,_e=0;for(let $ of this._roots){if(_d($),j=_O(0,a,d,g,c,_e),hm(),j)break;_e+=$.byteLength}return ko.releasePrimitive(o),j}bvhcast(e,i,s){let{intersectsRanges:a,intersectsTriangles:o}=s,c=this.geometry.index,d=this.geometry.attributes.position,g=e.geometry.index,b=e.geometry.attributes.position;Ed.copy(i).invert();let j=ko.getPrimitive(),_e=ko.getPrimitive();if(o){let rt=function(st,ut,gt,wt,yt,At,Ct,Tt){for(let kt=gt,Pt=gt+wt;kt<Pt;kt++){Ts(_e,kt*3,g,b),_e.a.applyMatrix4(i),_e.b.applyMatrix4(i),_e.c.applyMatrix4(i),_e.needsUpdate=!0;for(let It=st,Lt=st+ut;It<Lt;It++)if(Ts(j,It*3,c,d),j.needsUpdate=!0,o(j,_e,It,kt,yt,At,Ct,Tt))return!0}return!1};if(a){let st=a;a=function(ut,gt,wt,yt,At,Ct,Tt,kt){return st(ut,gt,wt,yt,At,Ct,Tt,kt)?!0:rt(ut,gt,wt,yt,At,Ct,Tt,kt)}}else a=rt}e.getBoundingBox(eA),eA.applyMatrix4(i);let $=this.shapecast({intersectsBounds:rt=>eA.intersectsBox(rt),intersectsRange:(rt,st,ut,gt,wt,yt)=>($1.copy(yt),$1.applyMatrix4(Ed),e.shapecast({intersectsBounds:At=>$1.intersectsBox(At),intersectsRange:(At,Ct,Tt,kt,Pt)=>a(rt,st,At,Ct,gt,wt,kt,Pt)}))});return ko.releasePrimitive(j),ko.releasePrimitive(_e),$}intersectsBox(e,i){return Gc.set(e.min,e.max,i),Gc.needsUpdate=!0,this.shapecast({intersectsBounds:s=>Gc.intersectsBox(s),intersectsTriangle:s=>Gc.intersectsTriangle(s)})}intersectsSphere(e){return this.shapecast({intersectsBounds:i=>e.intersectsBox(i),intersectsTriangle:i=>i.intersectsSphere(e)})}closestPointToGeometry(e,i,s={},a={},o=0,c=1/0){e.boundingBox||e.computeBoundingBox(),Gc.set(e.boundingBox.min,e.boundingBox.max,i),Gc.needsUpdate=!0;let d=this.geometry,g=d.attributes.position,b=d.index,j=e.attributes.position,_e=e.index,$=ko.getPrimitive(),rt=ko.getPrimitive(),st=T0,ut=G9,gt=null,wt=null;a&&(gt=j9,wt=H9);let yt=1/0,At=null,Ct=null;return Ed.copy(i).invert(),dm.matrix.copy(Ed),this.shapecast({boundsTraverseOrder:Tt=>Gc.distanceToBox(Tt),intersectsBounds:(Tt,kt,Pt)=>Pt<yt&&Pt<c?(kt&&(dm.min.copy(Tt.min),dm.max.copy(Tt.max),dm.needsUpdate=!0),!0):!1,intersectsRange:(Tt,kt)=>{if(e.boundsTree)return e.boundsTree.shapecast({boundsTraverseOrder:Pt=>dm.distanceToBox(Pt),intersectsBounds:(Pt,It,Lt)=>Lt<yt&&Lt<c,intersectsRange:(Pt,It)=>{for(let Lt=Pt*3,Nt=(Pt+It)*3;Lt<Nt;Lt+=3){Ts(rt,Lt,_e,j),rt.a.applyMatrix4(i),rt.b.applyMatrix4(i),rt.c.applyMatrix4(i),rt.needsUpdate=!0;for(let Ht=Tt*3,dr=(Tt+kt)*3;Ht<dr;Ht+=3){Ts($,Ht,b,g),$.needsUpdate=!0;let hs=$.distanceToTriangle(rt,st,gt);if(hs<yt&&(ut.copy(st),wt&&wt.copy(gt),yt=hs,At=Ht/3,Ct=Lt/3),hs<o)return!0}}}});{let Pt=_e?_e.count:j.count;for(let It=0,Lt=Pt;It<Lt;It+=3){Ts(rt,It,_e,j),rt.a.applyMatrix4(i),rt.b.applyMatrix4(i),rt.c.applyMatrix4(i),rt.needsUpdate=!0;for(let Nt=Tt*3,Ht=(Tt+kt)*3;Nt<Ht;Nt+=3){Ts($,Nt,b,g),$.needsUpdate=!0;let dr=$.distanceToTriangle(rt,st,gt);if(dr<yt&&(ut.copy(st),wt&&wt.copy(gt),yt=dr,At=Nt/3,Ct=It/3),dr<o)return!0}}}}}),ko.releasePrimitive($),ko.releasePrimitive(rt),yt===1/0?null:(s.point?s.point.copy(ut):s.point=ut.clone(),s.distance=yt,s.faceIndex=At,a&&(a.point?a.point.copy(wt):a.point=wt.clone(),a.point.applyMatrix4(Ed),ut.applyMatrix4(Ed),a.distance=ut.sub(a.point).length(),a.faceIndex=Ct),s)}closestPointToPoint(e,i={},s=0,a=1/0){let o=s*s,c=a*a,d=1/0,g=null;if(this.shapecast({boundsTraverseOrder:j=>(fm.copy(e).clamp(j.min,j.max),fm.distanceToSquared(e)),intersectsBounds:(j,_e,$)=>$<d&&$<c,intersectsTriangle:(j,_e)=>{j.closestPointToPoint(e,fm);let $=e.distanceToSquared(fm);return $<d&&(T0.copy(fm),d=$,g=_e),$<o}}),d===1/0)return null;let b=Math.sqrt(d);return i.point?i.point.copy(T0):i.point=T0.clone(),i.distance=b,i.faceIndex=g,i}getBoundingBox(e){return e.makeEmpty(),this._roots.forEach(i=>{Es(0,new Float32Array(i),TO),e.union(TO)}),e}},vf=pi(CO()),W9=.5*(Math.sqrt(3)-1),pm=(3-Math.sqrt(3))/6,q9=1/3,zo=1/6,mm=e=>Math.floor(e)|0,PO=new Float64Array([1,1,-1,1,1,-1,-1,-1,1,0,-1,0,1,0,-1,0,0,1,0,-1,0,1,0,-1]),rA=new Float64Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]);function M0(e=Math.random){let i=OO(e),s=new Float64Array(i).map(o=>PO[o%12*2]),a=new Float64Array(i).map(o=>PO[o%12*2+1]);return function(o,c){let d=0,g=0,b=0,j=(o+c)*W9,_e=mm(o+j),$=mm(c+j),rt=(_e+$)*pm,st=_e-rt,ut=$-rt,gt=o-st,wt=c-ut,yt,At;gt>wt?(yt=1,At=0):(yt=0,At=1);let Ct=gt-yt+pm,Tt=wt-At+pm,kt=gt-1+2*pm,Pt=wt-1+2*pm,It=_e&255,Lt=$&255,Nt=.5-gt*gt-wt*wt;if(Nt>=0){let hs=It+i[Lt],_s=s[hs],ds=a[hs];Nt*=Nt,d=Nt*Nt*(_s*gt+ds*wt)}let Ht=.5-Ct*Ct-Tt*Tt;if(Ht>=0){let hs=It+yt+i[Lt+At],_s=s[hs],ds=a[hs];Ht*=Ht,g=Ht*Ht*(_s*Ct+ds*Tt)}let dr=.5-kt*kt-Pt*Pt;if(dr>=0){let hs=It+1+i[Lt+1],_s=s[hs],ds=a[hs];dr*=dr,b=dr*dr*(_s*kt+ds*Pt)}return 70*(d+g+b)}}function DO(e=Math.random){let i=OO(e),s=new Float64Array(i).map(c=>rA[c%12*3]),a=new Float64Array(i).map(c=>rA[c%12*3+1]),o=new Float64Array(i).map(c=>rA[c%12*3+2]);return function(c,d,g){let b,j,_e,$,rt=(c+d+g)*q9,st=mm(c+rt),ut=mm(d+rt),gt=mm(g+rt),wt=(st+ut+gt)*zo,yt=st-wt,At=ut-wt,Ct=gt-wt,Tt=c-yt,kt=d-At,Pt=g-Ct,It,Lt,Nt,Ht,dr,hs;Tt>=kt?kt>=Pt?(It=1,Lt=0,Nt=0,Ht=1,dr=1,hs=0):Tt>=Pt?(It=1,Lt=0,Nt=0,Ht=1,dr=0,hs=1):(It=0,Lt=0,Nt=1,Ht=1,dr=0,hs=1):kt<Pt?(It=0,Lt=0,Nt=1,Ht=0,dr=1,hs=1):Tt<Pt?(It=0,Lt=1,Nt=0,Ht=0,dr=1,hs=1):(It=0,Lt=1,Nt=0,Ht=1,dr=1,hs=0);let _s=Tt-It+zo,ds=kt-Lt+zo,Nn=Pt-Nt+zo,us=Tt-Ht+2*zo,hn=kt-dr+2*zo,Ft=Pt-hs+2*zo,Gr=Tt-1+3*zo,gn=kt-1+3*zo,un=Pt-1+3*zo,Zn=st&255,xu=ut&255,ou=gt&255,sp=.6-Tt*Tt-kt*kt-Pt*Pt;if(sp<0)b=0;else{let B0=Zn+i[xu+i[ou]];sp*=sp,b=sp*sp*(s[B0]*Tt+a[B0]*kt+o[B0]*Pt)}let wu=.6-_s*_s-ds*ds-Nn*Nn;if(wu<0)j=0;else{let B0=Zn+It+i[xu+Lt+i[ou+Nt]];wu*=wu,j=wu*wu*(s[B0]*_s+a[B0]*ds+o[B0]*Nn)}let l1=.6-us*us-hn*hn-Ft*Ft;if(l1<0)_e=0;else{let B0=Zn+Ht+i[xu+dr+i[ou+hs]];l1*=l1,_e=l1*l1*(s[B0]*us+a[B0]*hn+o[B0]*Ft)}let P0=.6-Gr*Gr-gn*gn-un*un;if(P0<0)$=0;else{let B0=Zn+1+i[xu+1+i[ou+1]];P0*=P0,$=P0*P0*(s[B0]*Gr+a[B0]*gn+o[B0]*un)}return 32*(b+j+_e+$)}}function OO(e){let i=new Uint8Array(512);for(let s=0;s<512/2;s++)i[s]=s;for(let s=0;s<512/2-1;s++){let a=s+~~(e()*(256-s)),o=i[s];i[s]=i[a],i[a]=o}for(let s=256;s<512;s++)i[s]=i[s-256];return i}var $s=new Dr$1,C0=class{constructor(e){this.weightAttribute=null;let i=e.geometry;if(!i.isBufferGeometry||i.attributes.position.itemSize!==3)throw new Error("THREE.MeshSurfaceSampler: Requires BufferGeometry triangle mesh.");i.index&&(i=i.toNonIndexed()),this.geometry=i,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.distribution=null}build(){let e=this.positionAttribute,i=new Float32Array(e.count/3);for(let a=0;a<e.count;a+=3){let o=1;$s.a.fromBufferAttribute(e,a),$s.b.fromBufferAttribute(e,a+1),$s.c.fromBufferAttribute(e,a+2),o*=$s.getArea(),i[a/3]=o}this.distribution=new Float32Array(e.count/3);let s=0;for(let a=0;a<i.length;a++)s+=i[a],this.distribution[a]=s;return this}setRandomGenerator(e){return this.randomFunction=e,this}sample(e,i){if(this.distribution){let s=this.distribution[this.distribution.length-1],a=this.binarySearch(this.randomFunction()*s);return this.sampleFace(a,e,i)}}binarySearch(e){if(!this.distribution)return 0;let i=this.distribution,s=0,a=i.length-1,o=-1;for(;s<=a;){let c=Math.ceil((s+a)/2);if(c===0||i[c-1]<=e&&i[c]>e){o=c;break}else e<i[c]?a=c-1:s=c+1}return o}sampleFace(e,i,s){let a=this.randomFunction(),o=this.randomFunction();return a+o>1&&(a=1-a,o=1-o),$s.a.fromBufferAttribute(this.positionAttribute,e*3),$s.b.fromBufferAttribute(this.positionAttribute,e*3+1),$s.c.fromBufferAttribute(this.positionAttribute,e*3+2),i.set(0,0,0).addScaledVector($s.a,a).addScaledVector($s.b,o).addScaledVector($s.c,1-(a+o)),$s.getNormal(s),this}},RO=pi(iA()),Y9=new ce$1,X9=new ce$1,Q9=new ce$1,Td;(e=>{function i(s){return s&&s.__isSPEObject}e.is=i})(Td||(Td={}));var Md=e=>class extends e{constructor(){super(...arguments),this.previousModelViewMatrix=new ce$1,this.copyPreviousMatrix=!0,this.hiddenMatrix=new ce$1,this.matrixWorldRigid=new ce$1,this.shearScale=new ce$1,this.shearScaleInv=new ce$1}get __isSPEObject(){return!0}isDescendantOf(i){i instanceof _t&&(i=i.uuid);let s=this;for(;s.parent;){if(s.parent.uuid===i)return!0;s=s.parent}return!1}updateMatrixWorld(i){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||i)&&(this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,i=!0);for(let s of this.children)s.updateMatrixWorld(i)}updateWorldMatrix(i,s){let a=this.parent;if(i&&a!==null&&a.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),s)for(let o of this.children)o.updateWorldMatrix(!1,!0)}traverseChildren(i,s=0){for(let a of this.children)Td.is(a)&&a.traverseObject(i,s+1)}traverseObject(i,s=0){if(i(this,s)!==!0)for(let a of this.children)Td.is(a)&&a.traverseObject(i,s+1)}updateMatrixWorldSVD(){let i=this.matrixWorld.elements,s=[[i[0],i[4],i[8]],[i[1],i[5],i[9]],[i[2],i[6],i[10]]],{u:a,v:o,q:c}=(0,RO.SVD)(s),d=Y9.set(a[0][0],a[0][1],a[0][2],0,a[1][0],a[1][1],a[1][2],0,a[2][0],a[2][1],a[2][2],0,0,0,0,1),g=X9.set(o[0][0],o[0][1],o[0][2],0,o[1][0],o[1][1],o[1][2],0,o[2][0],o[2][1],o[2][2],0,0,0,0,1),b=Q9.copy(g).transpose();this.shearScale.makeScale(c[0],c[1],c[2]).multiply(b).premultiply(g),this.shearScaleInv.copy(this.shearScale).invert(),this.matrixWorldRigid.multiplyMatrices(d,b).copyPosition(this.matrixWorld),c.every(j=>Math.abs(c[0]-j)<.01)?this.hasNonUniformScale=!1:this.hasNonUniformScale=!0}attach(i,s){this.updateWorldMatrix(!0,!1);let a=new ce$1().copy(this.matrixWorld).invert();return i.parent!==null&&(i.parent.updateWorldMatrix(!0,!1),a.multiply(i.parent.matrixWorld)),"hiddenMatrix"in i&&i.hiddenMatrix instanceof ce$1?i.hiddenMatrix.premultiply(a):i.applyMatrix4(a),i.updateWorldMatrix(!1,!1),this.add(i),s!==void 0&&(this.children.pop(),this.children.splice(s,0,i)),this}copy(i,s=!1){return super.copy(i,s),this.hasNonUniformScale=i.hasNonUniformScale,this}onAfterRender(i,s,a,o,c,d){this.copyPreviousMatrix&&this.previousModelViewMatrix.copy(this.modelViewMatrix)}},nA=class extends Md(_t){},K9=e=>e.type==="Mesh",Vr=class extends nA{constructor(e){super(),this.object=e,this.matrixAutoUpdate=!1,this.hasNonUniformScale=e.hasNonUniformScale}raycast(e,i){}expand(){let e=0,i=this.object.entityChildren(e);for(;i;){let s=this.children[e];(s==null?void 0:s.object)!==i&&(s&&this.remove(s),s=new Vr(i),this.add(s),this.children.splice(e,0,this.children.pop()),s.matrixWorldNeedsUpdate=!0,s.matrixAutoUpdate=!1,s.matrix=i.matrix,s.hiddenMatrix=i.hiddenMatrix),s.expand(),e+=1,i=this.object.entityChildren(e)}for(;this.children.length>e;)this.remove(this.children[e])}get visible(){var e;return this.playModeVisible!==void 0?this.playModeVisible:this.object.visible||this.object.dataPatched.visible&&((e=this.object.dataPatched.cloner)==null?void 0:e.hideBase)===!0}set visible(e){}get castShadow(){return this.object.castShadow}set castShadow(e){}get receiveShadow(){return this.object.receiveShadow}set receiveShadow(e){}get isMesh(){return K9(this.object)}get isLight(){return this.object.isLight}get layers(){return this.object.layers}set layers(e){}get isCamera(){return!1}get geometry(){if(this.object.geometry)return this.object.geometry}get material(){if(this.object.material)return this.object.material}},jc=new _,Hc=new _,Cd=new ce$1,BO=[new _(-1,1,1),new _(-1,-1,1),new _(1,-1,1),new _(1,1,1),new _(-1,1,-1),new _(-1,-1,-1),new _(1,-1,-1),new _(1,1,-1)],Z9=[[0,3],[1,2],[5,6],[4,7],[0,1],[3,2],[7,6],[4,5],[0,4],[1,5],[2,6],[3,7]],J9=[[0,2],[7,5],[4,1],[3,6],[4,3],[1,6]],LO=(e,i,s)=>{e.updateEntityBoxSize(jc,Hc),Cd.copy(i).multiply(e.matrixWorld),Hc.x===0&&Hc.y===0&&Hc.z===0?s.push(new _(jc.x,jc.y,jc.z).applyMatrix4(Cd)):BO.forEach(a=>{s.push(a.clone().multiply(Hc).add(jc).applyMatrix4(Cd))})},gm=class extends Wt{constructor(){super(...arguments),this.matrix=new ce$1,this.vertices=[],this.faces=[],this.edges=[],this.centerEdges=[]}copy(e){return super.copy(e),this.matrix.copy(e.matrix),this.vertices=e.vertices.map(i=>i.clone()),this.faces=e.faces.map(i=>i.clone()),this.edges=e.edges.map(i=>i.clone()),this.centerEdges=e.centerEdges.map(i=>i.clone()),this}setFromObjectSize(e,i=!1){e.updateWorldMatrix(!1,i),this.makeEmpty(),this.matrix.copy(e.matrixWorld);let s=new ce$1().copy(e.matrixWorld).invert();return this.expandByObjectSize(e,s,i)}expandByObjectSize(e,i,s=!1){let a=[];return s===!0?e.traverseEntity(o=>{if(o.visible||o.cloner&&o.data.visible){if(!("geometry"in o)){a.push(new _);return}LO(o,i,a)}}):LO(e,i,a),this.setFromPoints(a)}getCenter(e){return e=super.getCenter(e),e.applyMatrix4(this.matrix),e}getPositionToCenter(e){return e=super.getCenter(e),e.applyMatrix4(Cd.copy(this.matrix).setPosition(0,0,0)),e}computeVertices(){this.getSize(Hc).multiplyScalar(.5),this.getCenter(jc),Cd.copy(this.matrix).setPosition(jc),this.vertices=BO.map(e=>e.clone().multiply(Hc).applyMatrix4(Cd))}computeEdges(){this.vertices.length>0&&this.computeVertices(),this.edges=Z9.map(([e,i])=>new Di(this.vertices[e],this.vertices[i])),this.centerEdges=this.edges.map(e=>e.getCenter(new _))}computeFaces(){this.vertices.length>0&&this.computeVertices(),this.faces=J9.map(([e,i])=>this.vertices[e].clone().add(this.vertices[i]).multiplyScalar(.5))}},eo={Cloner:()=>{},changeEntityProptotype:()=>{},createEntity:()=>{}},oA=class extends Dp{constructor(){super()}getPoints(e=12){let i=[],s,a=this.getCurveLengths(),o=a[a.length-1]/a.length;for(let c=0,d=this.curves;c<d.length;c++){let g=d[c],b=c===0?a[c]:a[c]-a[c-1],j=Math.ceil(e*b/o),_e=g.getPoints(j);for(let $=0;$<_e.length;$++){let rt=_e[$];s&&s.equals(rt)||(i.push(rt),s=rt)}}return this.autoClose&&i.length>1&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i}},aA=.001;function lA(e,i,s){return i.clone().sub(e).cross(i.clone().sub(s)).length()<=aA}function sA(e,i){let s=new _(...e.position),a=new _(...e.controlNext.position),o=new _(...i.controlPrevious.position),c=new _(...i.position);return lA(s,a,c)&&lA(s,o,c)}function D0(e){let i=e.points.map(_e=>new _(..._e.data.position)),s=[e.points[0]],a=new _(...s[0].data.position);for(let _e=0;_e<e.points.length-1;_e++)lA(a,i[_e],i[_e+1])||(s.push(e.points[_e]),a=i[_e]);s.push(e.points[e.points.length-1]);let o=e.isClosed,c=s.length-(o?0:1),d=s.length,g=[];for(let _e=0;_e<d;_e++){let $=s[_e].data,rt=new _(...$.position),st=new _(...$.controlPrevious.position),ut=new _(...$.controlNext.position),gt={position:rt,baseRoundness:$.roundness,controlPrevious:st,controlNext:ut};if($.roundness===0||!e.isClosed&&(_e===0||_e===d-1)){g[_e]={...gt,removedLength:0};continue}let wt=o&&_e==0?d-1:_e-1,yt=o&&_e==d-1?0:_e+1,At=s[wt].data,Ct=s[yt].data,Tt=new _(...At.position),kt=new _(...Ct.position),Pt=Tt.clone().sub(rt).normalize(),It=kt.clone().sub(rt).normalize();Object.assign(gt,{prevDir:Pt,nextDir:It});let Lt=sA(At,$),Nt=sA($,Ct);if(!Lt||!Nt)g[_e]={...gt,removedLength:0};else{let Ht=Pt.clone().add(It).normalize(),dr=Ht.clone().cross(Pt).length()/Pt.dot(Ht);g[_e]={...gt,tan:dr,removedLength:$.roundness/dr}}}for(let _e=0;_e<c;_e++){let $=_e,rt=o&&_e===d-1?0:_e+1,st=g[$],ut=g[rt];if(st.removedLength!==0||ut.removedLength!==0){let gt=st.position.distanceTo(ut.position);st.removedLength=Math.min(st.removedLength,gt/2),ut.removedLength=Math.min(ut.removedLength,gt/2)}}let b=[];for(let _e=0;_e<c;_e++){let $=_e,rt=o&&_e===d-1?0:_e+1,st=g[$],ut=g[rt],gt=null;if(!sA(s[$].data,s[rt].data))st.position.distanceTo(ut.position)>aA&&(gt=new Ec(st.position,st.controlNext,ut.controlPrevious,ut.position));else{let wt=st.position.clone(),yt=ut.position.clone();(st.removedLength!==0||ut.removedLength!==0)&&(st.nextDir&&wt.add(st.nextDir.clone().setLength(st.removedLength)),ut.prevDir&&yt.add(ut.prevDir.clone().setLength(ut.removedLength))),wt.distanceTo(yt)>aA&&(gt=new Ec(wt,wt.clone().lerp(yt,.3),yt.clone().lerp(wt,.3),yt))}b[2*_e+1]=gt}for(let _e=0;_e<d;_e++){let $=g[_e];if($.removedLength===0){b[2*_e]=null;continue}let rt=$.position,st=$.prevDir.clone().multiplyScalar($.removedLength).add(rt),ut=$.nextDir.clone().multiplyScalar($.removedLength).add(rt),gt=$.tan*$.removedLength,wt=$.prevDir.clone().add($.nextDir).normalize(),yt=st.clone().lerp(ut,.5),At=st.distanceTo(ut)/2,Ct=wt.clone().multiplyScalar(Math.sqrt(Math.pow(gt,2)-Math.pow(At,2))).add(yt),Tt=wt.clone().multiplyScalar(-gt).add(Ct),kt=rt.distanceTo(Tt)/rt.distanceTo(yt),Pt=$.prevDir.clone().multiplyScalar(kt*rt.distanceTo(st)).add(rt),It=Pt.clone().lerp(Tt,2),Lt=st.clone().lerp(Pt,4/3),Nt=ut.clone().lerp(It,4/3);b[2*_e]=new Ec(st,Lt,Nt,ut)}let j=new oA;return b.forEach(_e=>{_e&&j.add(_e)}),j}var vt;(e=>{function i(s){return s&&s.__isEntity}e.is=i})(vt||(vt={}));var Uo=e=>vt.is(e),$9={type:"completeState",isfromEntity:!0},e7=["x","y","z"],cA=new _,t7=new _().set(0,1,0),Pd=e=>class extends Md(e){constructor(){super(...arguments),this.raycastLock=!1,this.scaleLock=!1,this.disposed=!1,this.stateSelection=null,this.destroyedInAction=!1,this.instances=[],this.prevState=null,this.currentState=null,this.reversibleToState=null,this.currentTransitionEvent=null,this.previousAction=null,this._singleBBox=new gm,this._recursiveBBox=new gm,this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0,this._needApplyPathSnapping=!0,this.attachedPaths=new Set}get __isEntity(){return!0}entityChildren(i){let s=this.children[i];if(vt.is(s))return s}entityChildrenCount(){let i=this.children.length;for(;i--;)if(vt.is(this.children[i]))return i+1;return 0}get isConcreteEntity(){return typeof this.identity=="string"}get isVirtualEntity(){return typeof this.identity!="string"}get isInstanceRoot(){return this.isConcreteEntity&&this.data.type==="Instance"}nearestInstanceSelfOrParent(){let i=this;for(;i.data.type!=="Instance";){let s=i.parent;if(vt.is(s))i=s;else return}return i}forInstancesRec(i){this.instances.forEach(s=>{s.disposed||i(s),s.forInstancesRec(i)})}super_Entity(i,s){typeof i=="string"&&(this.uuid=i),this.identity=i,this.data=s,this.matrixAutoUpdate=!1,this.dataPatched=this.data}changeSelectedState(i,s,a=!1){if(!(this.data.states.length===0&&!a)){for(let o of this.data.states)Pa.toOps(this.data,o.data).forEach(c=>{let d=Yh.replaceProps(c,this.data);this.dataPatched=this.data,this.updateByPatchedOp(d,this.data,s)});if(i!==null){let o=this.data.states.data(i);o&&(this.dataPatched=Pa.patch(this.data,o),Pa.toOps(this.data,o).forEach(c=>{this.updateByPatchedOp(c,this.dataPatched,s)}))}a&&this.updateTransformState(this.dataPatched,s),this.stateSelection=i,this.updatePathSnapping(this.dataPatched.pathSnapping)}}get singleBBox(){return this.singleBBoxNeedsUpdate&&(this.singleBBoxNeedsUpdate=!1,this._singleBBox.setFromObjectSize(this,!1),this._singleBBox.computeVertices(),this._singleBBox.computeEdges(),this._singleBBox.computeFaces()),this._singleBBox}get recursiveBBox(){return this.recursiveBBoxNeedsUpdate&&(this.recursiveBBoxNeedsUpdate=!1,this._recursiveBBox.setFromObjectSize(this,!0),this._recursiveBBox.computeVertices(),this._recursiveBBox.computeEdges(),this._recursiveBBox.computeFaces()),this._recursiveBBox}updateEntityBoxSize(i,s){i.setScalar(0),s.setScalar(0)}resetBBoxNeedsUpdateSelf(){this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0}resetBBoxNeedsUpdate(){this.resetBBoxNeedsUpdateSelf(),this.traverseAncestors(i=>{Uo(i)&&i.resetBBoxNeedsUpdateSelf()}),this.traverseEntity(i=>{i.resetBBoxNeedsUpdateSelf()})}find(i){let s;return this.traverseEntity(a=>{a.uuid===i&&(s=a)}),s}traverseSortNextHelper(){let i=this.parent;if(i){let s=i.children,a=s.indexOf(this)+1;if(vt.is(s[a]))return s[a];if(vt.is(i))return i.traverseSortNextHelper()}}sortNext(){let i=this.children;return this.children.length>0&&vt.is(this.children[0])?i[0]:this.traverseSortNextHelper()}goUp(i){let s=this;for(;i>0&&s!==null;)s=s.parent,i-=1;return s}hasAnccestorOrSelf(i){return this===i||this.hasAnccestor(i)}hasAnccestor(i){let s=this.parent;for(;s;){if(i===s)return!0;s=s.parent}return!1}countToAccestor(i){let s=0,a=this;for(;a!==i;){if(a===null)return-1;a=a.parent,s+=1}return s}forEachEntity(i){for(let s of this.children)Uo(s)&&i(s)}traverseEntityAncestors(i){this.traverseAncestors(s=>{vt.is(s)&&i(s)})}traverseConcreteEntity(i,s=0){if(i(this,s)!==!0)for(let a of this.children)Uo(a)&&a.isConcreteEntity&&a.traverseEntity(i,s+1)}traverseEntity(i,s=0){if(i(this,s)!==!0)for(let a of this.children)Uo(a)&&a.traverseEntity(i,s+1)}traverseVisibleEntity(i){i(this);for(let s of this.children)Uo(s)&&s.visible&&s.traverseVisibleEntity(i)}updateMatrix(){super.updateMatrix(),this.cloner&&this.cloner.onObjUpdateMatrix(),this.dispatchEvent({type:"updateMatrix"})}updateMatrixWorld(i){super.updateMatrixWorld(i),this.dispatchEvent({type:"updateMatrixWorld"})}copy(i,s=!1){return super.copy(i,s),this.dataPatched=i.dataPatched,this.raycastLock=i.raycastLock,this.scaleLock=i.scaleLock,this.hiddenMatrix.copy(i.hiddenMatrix),this}hasEntityChild(){return this.children.some(i=>Uo(i))}isAncestorOf(i){if(this.uuid===i)return!1;let s=!1;return this.traverseEntity(a=>{a.uuid===i&&(s=!0)}),s}toObjectTransformState(i=[]){this.updateWorldMatrix(!0,!1);let s={position:this.position.toArray(),rotation:[this.rotation.x*Me.RAD2DEG,this.rotation.y*Me.RAD2DEG,this.rotation.z*Me.RAD2DEG],scale:this.scale.toArray(),hiddenMatrix:this.hiddenMatrix.toArray()};return Vh(s,i)}getTransformValues(i,s,a){return s[i].map((o,c)=>(a==null?void 0:a.shared.getVariable(o,[this.uuid,i,e7[c]]))??o)}updateTransformState(i,s){let a=!1;return i.position&&(this.position.fromArray(this.getTransformValues("position",i,s)),a=!0),i.rotation&&(cA.fromArray(this.getTransformValues("rotation",i,s)).multiplyScalar(Me.DEG2RAD),this.rotation.setFromVector3(cA),a=!0),i.scale&&(this.scale.fromArray(this.getTransformValues("scale",i,s)),a=!0),i.hiddenMatrix!==void 0&&(a=!0,this.hiddenMatrix.fromArray(i.hiddenMatrix??Dl.identity)),a&&(this.updateMatrix(),this.resetBBoxNeedsUpdate(),this.invalidateClonerTransform(this),this.traverseEntityAncestors(o=>{o.invalidateClonerTransform(this)})),i.position&&i.rotation&&i.scale&&i.hiddenMatrix!==void 0&&this.updateWorldMatrix(!1,!0),a}onVariableUpdate(i=!1){if(i){this.resetBBoxNeedsUpdate();return}this.updateMatrix(),this.resetBBoxNeedsUpdate(),this.invalidateClonerTransform(this),this.traverseEntityAncestors(s=>{s.invalidateClonerTransform(this)})}dispose(){this.disposed=!0,this.cloner&&(this.cloner.removeFromParent(),this.cloner=void 0)}disposeChildrenRecursively(){for(let i of this.children)vt.is(i)&&i.disposeRecursively()}disposeRecursively(){this.dispose(),this.children.forEach(i=>{vt.is(i)&&i.disposeRecursively()})}toState(i=[]){let s={name:this.name,visible:this.visible,raycastLock:this.raycastLock,...this.toObjectTransformState(i)};return Vh(s,i)}updateByObjUpdateOp(i,s){i!==void 0&&this.updateByOp({type:0,props:i,path:[]},{...this.data,...i},s,!1)}updateByOp(i,s,a,o){let c=this.data;this.data=s;let d=i,g=Rt(i.path,["states","*"]);if(g!==null){if(i.type===0){let[b]=g;if((this==null?void 0:this.stateSelection)===b){let j={...i.props};if(delete j.name,Object.values(i.props).some(_e=>_e===void 0)){let _e=this.data;if(_e!==void 0){let $=Nr$1.zoom(_e,i.path.slice(2));if($)for(let rt in i.props)i.props[rt]===void 0&&rt in $&&(j[rt]=$[rt])}}d={...i,props:j,path:i.path.slice(2)}}}}else if(i.type===0){let b=this.stateSelection?this.data.states.data(this.stateSelection):void 0;if(b!==void 0){if(i.props.name!==void 0&&b.name){let{name:_e,...$}=b;b=$}if(i.props.material!==void 0&&"material"in b){let{material:_e,...$}=b;b=$}let j=Nr$1.removeOverridden(i.path,i.props,b);d={...i,props:j}}}if(this.updateByPatchedOpBase(d,Pa.patch(this.data,this.stateSelection?this.data.states.data(this.stateSelection):void 0),a),Rt(i.path,["overrides"])){let b=[],j=[...i.path];for(b.push(j[1]),j.splice(0,2);j.length>0&&j[0]==="descendants";)b.push(j[1]),j.splice(0,2);if(b[b.length-1]===void 0){if(i.type===0)for(let _e of Object.keys(i.props)){b[b.length-1]=_e;let $=a.scene.findInstance([this.uuid,...b]);$&&($.overrideData=i.props[_e],$.updateState(Co.apply($.component.data,$.overrideData),a))}}else{let _e=a.scene.findInstance([this.uuid,...b]);if(_e){let $=Nr$1.zoom(_e.component.data,j);if(i={...i,path:j},i.type===0){let rt=i.props;if($)for(let[st,ut]of Object.entries(i.props))ut===void 0&&(rt===i.props&&(rt={...i.props}),rt[st]=$[st]);i={...i,props:rt}}_e.overrideData=id.resolve(s.overrides,b),_e.updateByOp(i,Fr$1.applySimple(_e.data,i),a,!1)}}}else if(this.instances.length>0){let b;if(i.path.length===0&&i.type===0){let j;for(let _e of No.rootOverrideProps)_e in i.props&&(j===void 0&&(j={}),j[_e]=i.props[_e]);j&&(b={...i,props:j})}else for(let j of No.rootOverrideProps)if(Rt(i.path,[j])){b=i;break}b!==void 0&&this.instances.forEach(j=>{if(j.isInstanceRoot){let _e=Co.filterOp(j.overrideData,b);_e&&j.updateByOp(_e,Fr$1.applySimple(j.data,_e),a,!0)}}),this.instances.forEach(j=>{if(!j.isInstanceRoot){let _e=Co.filterOp(j.overrideData,i);if(_e){let $;c===j.data&&i===_e?$=s:$=Fr$1.applySimple(j.data,_e),j.updateByOp(_e,$,a,!0)}}})}}updateByPatchedOpBase(i,s,a){if(this.dataPatched=s,i.path.length===0&&i.type===0)i.props.type!==void 0&&!Ks.is(i.props.type)&&eo.changeEntityProptotype(this,s,a);else if(i.path.length===1&&i.path[0]==="geometry"&&i.type===0&&"type"in i.props){eo.changeEntityProptotype(this,s,a);for(let o of this.children)vt.is(o)&&o.updateVisible(a.scene)}this.updateByPatchedOp(i,s,a)}updateByPatchedOp(i,s,a){if(i.path.length===0&&i.type===0&&this.updateState(i.props,a),Rt(i.path,["pathSnapping"])!==null&&this.updatePathSnapping(s.pathSnapping),Rt(i.path,["cloner"])!==null){let o=Fr$1.drop(i,1);o.path.length===0&&o.type===0&&o.props.disabled===!0?this.setFromClonerState(null,a):this.cloner?this.cloner.updateState(s.cloner,a.scene):(this.setFromClonerState(s.cloner,a),this.expandCloner(a.scene)),this.updateVisible(a.scene)}}updatePathSnapping(i=this.dataPatched.pathSnapping){this._updatedPathSnapping=i,this._needApplyPathSnapping=!0}get updatedPathSnapping(){return this._updatedPathSnapping}applyPathSnapping(i){var ut,gt,wt,yt,At;let s=((ut=this._updatedPathSnapping)==null?void 0:ut.pathId)??this.dataPatched.pathSnapping.pathId,a=((gt=this._updatedPathSnapping)==null?void 0:gt.slide)??this.dataPatched.pathSnapping.slide??0,o=((wt=this._updatedPathSnapping)==null?void 0:wt.offset)??this.dataPatched.pathSnapping.offset??0,c=((yt=this._updatedPathSnapping)==null?void 0:yt.orientation)??this.dataPatched.pathSnapping.orientation;if(s===null)return;let d=i.find(s);if(!d||this._needApplyPathSnapping===!1)return;this._needApplyPathSnapping=!1;let g=d.data;if(g.geometry.path.points.length<=1)return;let b=D0(g.geometry.path),j=(a+o)%1;a+o===1&&j===0&&(j=1);let _e=b.getPointAt(j);if(_e===null)return;let $=this.parent?(At=this.parent)==null?void 0:At.matrixWorld:new ce$1;d.updateMatrixWorld();let rt=new ce$1().multiplyMatrices($.clone().invert(),d.matrixWorld);_e.applyMatrix4(rt);let st={position:_e.toArray(),rotation:g.rotation};if(c==="tangential"){let Ct=new ce$1().extractRotation(d.matrixWorld),Tt=b.getTangentAt(j).applyMatrix4(Ct).add(_e),kt=new ce$1().lookAt(_e,Tt,t7),Pt=cA.setFromEuler(new or().setFromRotationMatrix(kt)).multiplyScalar(Me.RAD2DEG);st={...st,rotation:Pt.toArray()}}this.updateTransformState(st),this.traverseEntity(Ct=>{Ct._cameraType&&Ct.dispatchEvent($9)})}updateVisible(i){var a;if(this.visible=this.dataPatched.visible&&(!this.dataPatched.cloner||(this.dataPatched.cloner.disabled??!1)||((a=this.dataPatched.cloner)==null?void 0:a.hideBase)!==!0),!i)return;let s=!1;this.traverseEntity(o=>{if(o.data.type==="Splat")return s=!0,!0}),s&&i.reloadSplats()}updateState_Entity(i,s){i.name!==void 0&&(this.name=i.name),i.raycastLock!==void 0&&(this.raycastLock=i.raycastLock),i.visible!==void 0&&(this.updateVisible(s==null?void 0:s.scene),this.resetBBoxNeedsUpdate()),s&&"cloner"in i&&i.cloner!==void 0&&(this.setFromClonerState(i.cloner,s),this.updateVisible(s.scene)),this.updateTransformState(i,s)}get attachedSurfaceCloners(){return this.children.filter(i=>i instanceof eo.Cloner&&i.parameters.type==="toObject")}setFromClonerState(i,s){this.disposed||(i===null||i.disabled?(this.cloner&&this.cloner.removeFromParent(),this.cloner=void 0):this.cloner===void 0?(this.cloner=new eo.Cloner(this,i),s.scene.addPendingExpandCloner(this)):this.cloner.updateState(i,s.scene))}expandCloner(i){!this.disposed&&this.cloner&&this.cloner.expandClones(i)}invalidateClonerTransform(i){this.cloner&&this.cloner.invalidateTransform(i)}requestRender(){this.dispatchEvent({type:"requestRender"})}},O0=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,i){let s=Object.assign({},(i==null?void 0:i.parameters)??{width:100,radialSegments:64,heightSegments:1,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadius:8,cornerSegments:8,hollow:0},e.parameters);s.thetaLength=Me.clamp(s.thetaLength,0,360);let a=s.width/2,o=s.radiusTop??a,c=s.radiusBottom??a;return o===c?(o=a,c=a):o>c?(o=a,c=c*a/o):(o=o*a/c,c=a),{parameters:Object.assign(s,{width:Math.abs(s.width),height:Math.abs(s.height??s.width),depth:Math.abs(s.depth??s.width),radiusTop:o,radiusBottom:c})}}static build(e){let{width:i,depth:s,height:a,radialSegments:o,heightSegments:c,openEnded:d,thetaStart:g,thetaLength:b,radiusTop:j,radiusBottom:_e,cornerRadius:$,cornerSegments:rt,hollow:st}=e.parameters,ut;return b===0?(ut=new Pe,ut.setAttribute("position",new Te([],3))):$||st?ut=new ym(j,_e,a,o,c,d,g,b*Math.PI/180,$,$,rt,st):ut=new Mc(j,_e,a,o,c,d,g,b*Math.PI/180),ut.scale(1,1,s/i),Object.assign(ut,{userData:{...e,type:"CylinderGeometry"}})}};function zl(e,i,s){s.x=e.x*i.x,s.y=e.y,s.z=e.x*i.y}function NO(e){return new z$1(e.y,-e.x)}var ym=class extends Pe{constructor(e,i,s,a,o,c,d,g,b,j,_e,$,rt=!1){super(),this.type="RoundedCylinderBufferGeometry",e=e!==void 0?e:1,i=i!==void 0?i:1,s=s||1,a=Math.floor(a)||8,o=Math.floor(o)||1,c=c!==void 0?c:!1,d=d!==void 0?d:0,g=g!==void 0?g:Math.PI*2,c&&(b=0,j=0);let st=[],ut=[],gt=[],wt=[],yt=0,At=s/2,Ct=new _,Tt=new _;rt&&e==0&&(e=b),rt&&i==0&&(i=j);let kt=new z$1(e,At),Pt=new z$1(i,-At),It=null,Lt=null,Nt=null,Ht=null,dr=kt.clone().sub(Pt),hs=0,_s=0,ds=0;$>0&&(hs=Math.min(e,i)*(1-$),_s=e-hs,ds=i-hs);let Nn=kt.clone();Nn.x-=hs;let us=Math.PI-dr.angle(),hn=dr.angle(),Ft=Math.tan(hn/2),Gr=Math.tan(us/2),gn=Ft+Gr,un=$?gn:Gr,Zn=$?gn:Ft;if(b=Math.min(b,(e-_s)/un,dr.length()/gn),j=Math.min(j,(i-ds)/Zn,dr.length()/gn),b>0){let P0=b/Ft;It=kt.clone().sub(new z$1(P0,b)),$&&(Nt=It.clone(),Nt.x-=hs-gn*b),kt.sub(dr.clone().setLength(P0))}if(j>0){let P0=j/Gr;Lt=Pt.clone().sub(new z$1(P0,-j)),Pt.add(dr.clone().setLength(P0)),$&&(Ht=Lt.clone(),Ht.x-=hs-gn*j,Nn.sub(dr.clone().setLength(P0)))}dr=kt.clone().sub(Pt);let xu=dr.length()<.5,ou=[];for(let P0=0;P0<=a;P0++){let B0=[],q1=P0/a,ox=q1*g+d,qx=new z$1(Math.sin(ox),Math.cos(ox));Ht&&Lt?(sp(B0,q1,qx,us,j,Ht,-1,!0),sp(B0,q1,qx,hn,j,Lt,-1,!1)):Lt?(wu(B0,qx,Lt.x,0,-1),sp(B0,q1,qx,hn,j,Lt,-1,!1)):c||wu(B0,qx,i,ds,-1);let N_=NO(dr).normalize();if(zl(N_,qx,Ct),!xu)for(let eS=0;eS<=o;eS++){let tA=eS/o,fD=dr.clone().multiplyScalar(tA).add(Pt);zl(fD,qx,Tt),ut.push(Tt.x,Tt.y,Tt.z),gt.push(Ct.x,Ct.y,Ct.z),wt.push(q1,.5+Tt.y/s),B0.push(yt++)}if(Nt&&It?(sp(B0,q1,qx,us,b,It,1,!1),sp(B0,q1,qx,hn,b,Nt,1,!0)):It?(sp(B0,q1,qx,us,b,It,1,!1),wu(B0,qx,It.x,0,1)):c||wu(B0,qx,e,_s,1),$&&!xu){let eS=NO(dr).multiplyScalar(-1).normalize();zl(eS,qx,Ct);for(let tA=0;tA<=o;tA++){let fD=tA/o,q3=dr.clone().multiplyScalar(-fD).add(Nn);zl(q3,qx,Tt),ut.push(Tt.x,Tt.y,Tt.z),gt.push(Ct.x,Ct.y,Ct.z),wt.push(q1,.5+Tt.y/s),B0.push(yt++)}}$&&!c&&B0.push(B0[0]),ou.push(B0)}for(let P0=0;P0<ou.length-1;P0++)for(let B0=0;B0<ou[0].length-1;B0++){if(c&&$&&B0==o)continue;let q1=ou[P0][B0],ox=ou[P0+1][B0],qx=ou[P0+1][B0+1],N_=ou[P0][B0+1],eS=ut[qx*3+0],tA=ut[qx*3+2];st.push(q1,ox,N_),(eS!=0||tA!=0)&&st.push(ox,qx,N_)}g<Math.PI*2&&(l1(-1,ou[0],d),l1(1,ou[ou.length-1],d+g)),this.setIndex(st),this.setAttribute("position",new Te(ut,3)),this.setAttribute("normal",new Te(gt,3)),this.setAttribute("uv",new Te(wt,2));function sp(P0,B0,q1,ox,qx,N_,eS,tA){for(let fD=0;fD<_e+1;fD++){let q3=fD/_e,SA=eS<0?q3:1-q3;tA&&(SA-=1),SA*=ox;let wA=new z$1(Math.sin(SA),Math.cos(SA)*eS),mO=wA.clone().multiplyScalar(qx).add(N_);zl(mO,q1,Tt),ut.push(Tt.x,Tt.y,Tt.z),zl(wA,q1,Ct),gt.push(Ct.x,Ct.y,Ct.z),wt.push(B0,.5+Tt.y/s),P0.push(yt++)}}function wu(P0,B0,q1,ox,qx){let N_=new _,eS=new z$1,tA=[q1,ox];qx<0&&tA.reverse();for(let fD of tA)eS.set(fD,At*qx),zl(eS,B0,N_),ut.push(N_.x,N_.y,N_.z),gt.push(0,qx,0),wt.push(.5,.5),P0.push(yt++)}function l1(P0,B0,q1){let ox=new z$1(Math.sin(q1),Math.cos(q1)),qx=new z$1(-Math.cos(q1),Math.sin(q1)),N_=new _,eS=P0<0?(q3,SA,wA)=>st.push(q3,SA,wA):(q3,SA,wA)=>st.push(q3,wA,SA),tA=new z$1((e+i+_s+ds)/4,0);zl(tA,ox,N_),ut.push(N_.x,N_.y,N_.z),gt.push(qx.x,0,qx.y),wt.push(.5,.5);let fD=yt++;for(let q3 of B0){let SA=ut.slice(q3*3,q3*3+3);ut.push(...SA),gt.push(qx.x,0,qx.y);let wA=wt.slice(q3*2,q3*2+2);wt.push(...wA),yt++}for(let q3=fD+1;q3<yt-1;q3++)eS(fD,q3,q3+1);eS(fD,yt-1,fD+1)}}},FO=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,i){let s=Object.assign({},(i==null?void 0:i.parameters)??{width:100,radialSegments:32,heightSegments:8,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadiusTop:8,cornerRadiusBottom:8,cornerSegments:8},e.parameters);return s.thetaLength=Me.clamp(s.thetaLength,0,360),{parameters:Object.assign(s,{width:Math.abs(s.width),height:Math.abs(s.height??s.width),depth:Math.abs(s.depth??s.width)})}}static build(e){let{width:i,depth:s,height:a,radialSegments:o,heightSegments:c,openEnded:d,thetaStart:g,thetaLength:b,cornerRadiusTop:j,cornerRadiusBottom:_e,cornerSegments:$}=e.parameters,rt;return b===0?(rt=new Pe,rt.setAttribute("position",new Te([],3))):j>0||_e>0||b<360?rt=new ym(0,i/2,a,o,c,d,g,b*Math.PI/180,j,_e,$,0,!0):rt=new dl(i/2,a,o,c,d),rt.scale(1,1,s/i),Object.assign(rt,{userData:{...e,type:"ConeGeometry"}})}},kO=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,i){let s=Object.assign({},(i==null?void 0:i.parameters)??{width:100,widthSegments:1,heightSegments:1,depthSegments:1,cornerRadius:8,cornerSegments:8},e.parameters);return{parameters:Object.assign(s,{width:Math.abs(s.width),height:Math.abs(s.height??s.width),depth:Math.abs(s.depth??s.width)})}}static build(e){let{width:i,height:s,depth:a,widthSegments:o,heightSegments:c,depthSegments:d,cornerRadius:g,cornerSegments:b}=e.parameters,j;return g==0?j=new vi(i,s,a,o,c,d):j=new hA(i,s,a,o,c,d,g,b),Object.assign(j,{userData:{...e,type:"CubeGeometry"}})}},uA=Math.PI/2,hA=class extends Pe{constructor(e=1,i=1,s=1,a=1,o=1,c=1,d=0,g=4){super(),this.type="BoxGeometry";let b=this;a=Math.floor(a),o=Math.floor(o),c=Math.floor(c),g=Math.floor(g),d=Math.min(d,e/2,i/2,s/2);let j=[],_e=[],$=[],rt=[],st=0,ut=0;gt("z","y","x",-1,-1,s,i,e,c,o,0),gt("z","y","x",1,-1,s,i,-e,c,o,1),gt("x","z","y",1,1,e,s,i,a,c,2),gt("x","z","y",1,-1,e,s,-i,a,c,3),gt("x","y","z",1,-1,e,i,s,a,o,4),gt("x","y","z",-1,-1,e,i,-s,a,o,5),d>0&&(wt("z","y","x",-1,-1,1,s,i,e,c,0),wt("z","y","x",1,-1,-1,s,i,e,c,1),wt("z","y","x",-1,1,-1,s,i,e,c,1),wt("z","y","x",1,1,1,s,i,e,c,0),wt("x","y","z",-1,-1,-1,e,i,s,a,0),wt("x","y","z",1,-1,1,e,i,s,a,1),wt("x","y","z",-1,1,1,e,i,s,a,0),wt("x","y","z",1,1,-1,e,i,s,a,1),wt("y","x","z",-1,-1,1,i,e,s,o,0),wt("y","x","z",1,-1,-1,i,e,s,o,1),wt("y","x","z",1,1,1,i,e,s,o,1),wt("y","x","z",-1,1,-1,i,e,s,o,0),yt(1,1,1),yt(-1,1,1),yt(1,-1,1),yt(-1,-1,1),yt(1,1,-1),yt(-1,1,-1),yt(1,-1,-1),yt(-1,-1,-1)),this.setIndex(j),this.setAttribute("position",new Te(_e,3)),this.setAttribute("normal",new Te($,3)),this.setAttribute("uv",new Te(rt,2));function gt(At,Ct,Tt,kt,Pt,It,Lt,Nt,Ht,dr,hs){let _s=(It-2*d)/Ht,ds=(Lt-2*d)/dr,Nn=It/2-d,us=Lt/2-d,hn=Nt/2,Ft=Ht+1,Gr=dr+1,gn=0,un=0,Zn=new _;for(let xu=0;xu<Gr;xu++){let ou=xu*ds-us;for(let sp=0;sp<Ft;sp++){let wu=sp*_s-Nn;Zn[At]=wu*kt,Zn[Ct]=ou*Pt,Zn[Tt]=hn,_e.push(Zn.x,Zn.y,Zn.z),Zn[At]=0,Zn[Ct]=0,Zn[Tt]=Nt>0?1:-1,$.push(Zn.x,Zn.y,Zn.z),rt.push(sp/Ht),rt.push(1-xu/dr),gn+=1}}for(let xu=0;xu<dr;xu++)for(let ou=0;ou<Ht;ou++){let sp=st+ou+Ft*xu,wu=st+ou+Ft*(xu+1),l1=st+(ou+1)+Ft*(xu+1),P0=st+(ou+1)+Ft*xu;j.push(sp,wu,P0),j.push(wu,l1,P0),un+=6}b.addGroup(ut,un,hs),ut+=un,st+=gn}function wt(At,Ct,Tt,kt,Pt,It,Lt,Nt,Ht,dr,hs){let _s=(Lt-2*d)/dr,ds=Lt/2-d,Nn=Nt/2-d,us=Ht/2,hn=dr+1,Ft=0,Gr=0,gn=new _,un=new _;for(let Zn=0;Zn<g+1;Zn++){let xu=Zn/g*uA,ou=Math.sin(xu)*d,sp=(1-Math.cos(xu))*d,wu=Math.sin(xu),l1=Math.cos(xu);gn[Ct]=(Nn+ou)*Pt,gn[Tt]=(us-sp)*It,un[At]=0,un[Ct]=wu*Math.sign(gn[Ct]),un[Tt]=l1*Math.sign(gn[Tt]);for(let P0=0;P0<hn;P0++){let B0=P0*_s-ds;gn[At]=B0*kt,_e.push(gn.x,gn.y,gn.z),$.push(un.x,un.y,un.z),rt.push(P0/dr),rt.push(0),Ft+=1}}for(let Zn=0;Zn<g;Zn++)for(let xu=0;xu<dr;xu++){let ou=st+xu+hn*Zn,sp=st+xu+hn*(Zn+1),wu=st+(xu+1)+hn*(Zn+1),l1=st+(xu+1)+hn*Zn;j.push(ou,sp,l1),j.push(sp,wu,l1),Gr+=6}b.addGroup(ut,Gr,hs),ut+=Gr,st+=Ft}function yt(At,Ct,Tt){let kt=new _,Pt=new _(e/2,i/2,s/2);Pt.subScalar(d);let It=[],Lt=At*Ct*Tt>0?(Ht,dr,hs)=>j.push(Ht,dr,hs):(Ht,dr,hs)=>j.push(Ht,hs,dr);for(let Ht=0;Ht<=g;Ht++){let dr=[],hs=uA*(1-Ht/g),_s=Math.cos(hs),ds=Math.sin(hs),Nn=0;for(let us=0;us<=Ht;us++){let hn=Math.cos(Nn),Ft=Math.sin(Nn);kt.x=_s*hn,kt.y=ds,kt.z=_s*Ft;let Gr=Pt.clone().addScaledVector(kt,d);_e.push(At*Gr.x,Ct*Gr.y,Tt*Gr.z),$.push(At*kt.x,Ct*kt.y,Tt*kt.z),rt.push(0,0),dr.push(st++),Nn+=uA/Ht}It.push(dr)}let Nt=It.length-1;for(let Ht=0;Ht<Nt;Ht++){let dr=It[Ht],hs=It[Ht+1],_s=dr.length-1;Lt(dr[0],hs[1],hs[0]);for(let ds=1;ds<=_s;ds++)Lt(dr[ds-1],dr[ds],hs[ds]),Lt(dr[ds],hs[ds+1],hs[ds])}}}},Ul=class extends Pe{constructor(e=[],i=[],s="",a=1,o=.2,c=4){super(),this.type="PolyhedronGeometryRound";let d=[],g=[],b=[];j(),_e(),this.setAttribute("position",new Te(d,3)),this.setAttribute("normal",new Te(b,3)),this.setAttribute("uv",new Te(g,2));return;function j(){var hn;o=Math.min(1-1e-5,o),o==0&&(c=0);let $={IcosahedronGeometry:5,DodecahedronGeometry:3,HexahedronGeometry:3,OctahedronGeometry:4,TetrahedronGeometry:3}[s],rt=new _,st=rt.clone(),ut=new Dr$1,gt=o*a,wt=a-gt,yt=c+1,At=new _,Ct=(Ft,Gr)=>At.subVectors(Ft,Gr).normalize(),Tt=(Ft,Gr)=>Array(Ft).fill(void 0).map(Gr),kt=Tt(e.length/3,(Ft,Gr)=>new _().fromArray(e,Gr*3).setLength(a)),Pt=[],It=1e6;for(let Ft=0;Ft<kt.length;Ft++){let Gr=kt[Ft],gn=[],un,Zn,xu,ou=1e10,sp=-1;for(;(sp=i.indexOf(Ft,sp+1))!=-1;){let B0=sp-sp%3;un=i[B0+(sp+1)%3],Zn=i[B0+(sp+2)%3],xu=Gr.distanceToSquared(kt[un]),ou=Math.min(ou,xu),gn.push([un,Zn,xu])}ou+=1e-6;let wu=[],l1=0,P0=gn.length;for(let B0=0;B0<P0;B0++){[un,Zn,xu]=gn[l1];let q1=((hn=Pt[un])==null?void 0:hn.includes(Ft))==!0;xu<=ou&&wu.push(un+ +q1*It),l1=gn.findIndex(ox=>ox[0]==Zn)}Pt.push(wu)}let Lt=[];{let Ft=0,Gr=0,gn,un,Zn=$==3;for(let xu=0;xu<=c;xu++){gn=xu*(xu+1)/2,un=(xu+1)*(xu+2)/2;for(let ou=0;ou<c-xu;ou++)[Ft,Gr]=[gn+ou+xu+2,un+ou+xu+3],Lt.push(gn,un,...Zn?[Gr,gn]:[Ft,un],Gr,Ft),[gn,un]=[Ft,Gr];Lt.push(gn,un,gn+c+2)}}let Nt=rt.clone(),Ht=rt.clone(),dr=rt.clone(),hs=rt.clone(),_s=rt.clone(),ds=[],Nn=Tt(kt.length,()=>Tt($,()=>rt.clone()));for(let Ft=0;Ft<kt.length;Ft++){rt.copy(kt[Ft]).normalize(),Nt.copy(rt).multiplyScalar(wt);let Gr=Pt[Ft];for(let wu=0;wu<Gr.length;wu++){let l1=Gr[wu],P0=Gr[(wu+1)%$];ut.setFromPointsAndIndices(kt,Ft,l1%It,P0%It),ut.b.sub(ut.a).setLength(1e10).add(ut.a),ut.c.sub(ut.a).setLength(1e10).add(ut.a),ut.closestPointToPoint(Nt,Nn[Ft][wu])}let gn=[],un=[],Zn=[],xu=new _;c==0&&[...Nn[Ft]].reduce((wu,l1)=>wu.add(l1),xu).multiplyScalar(1/$);for(let wu=0;wu<$;wu++){let l1=[],P0=(wu-1+$)%$,B0=Nn[Ft][P0],q1=Nn[Ft][wu];rt.copy(B0).sub(Nt),st.copy(q1).sub(Nt);let ox=Nt.angleTo(rt),qx=rt.angleTo(st),N_=Math.cos(ox)*gt;c==0?Ht.copy(xu):Ht.copy(Nt).setLength(wt+N_),un.push(N_);let eS=[Ht,B0,q1];for(let tA=0;tA<2;tA++){let fD=eS[tA],q3=eS[tA+1];hs.subVectors(fD,Nt),_s.subVectors(q3,Nt),dr.crossVectors(hs,_s).normalize();for(let SA=0;SA<yt;SA++){let wA=[ox,qx][tA]*SA/yt;rt.copy(hs).applyAxisAngle(dr,wA).add(Nt),gn.push(rt.clone()),tA&&(Ct(rt,Nt),l1.push([SA==0?fD:rt.clone(),At.clone()]))}tA&&(Ct(q3,Nt),l1.push([q3,At.clone()]))}Zn.push(l1)}ds.push(Zn);let ou=2*yt,sp=2;for(let wu=0;wu<$;wu++){let l1=ou*wu,P0=ou*((wu+1)%$),B0=[gn[l1]];for(let ox=1;ox<yt;ox++){hs=gn[l1+ox],_s=gn[P0+ox],B0.push(hs);for(let qx=1,N_=ox-sp+1;qx<=N_;qx++)rt.lerpVectors(hs,_s,qx/(N_+1)),rt.sub(Nt).setLength(un[wu]).add(Nt),B0.push(rt.clone());B0.push(_s)}for(let ox=0;ox<yt;ox++)B0.push(gn[ox+yt+l1]);B0.push(gn[P0+yt]);let q1=Lt.map(ox=>B0[ox]);d.push(...q1.map(ox=>[ox.x,ox.y,ox.z]).flat()),b.push(...q1.map(ox=>(Ct(ox,Nt),[At.x,At.y,At.z])).flat())}}let us=[];for(let Ft=0;Ft<Pt.length;Ft++)for(let Gr=0;Gr<$;Gr++){let gn=Pt[Ft][Gr];if(gn<It){let un=Pt[gn].findIndex(ou=>ou%It==Ft),Zn=ds[Ft][Gr],xu=ds[gn][un];for(let ou=0;ou<yt;ou++){let sp=Zn[ou],wu=xu[yt-ou],l1=Zn[ou+1],P0=xu[yt-(ou+1)];[sp,wu,l1,l1,wu,P0].forEach(B0=>{d.push(B0[0].x,B0[0].y,B0[0].z),b.push(B0[1].x,B0[1].y,B0[1].z)})}us.push(Zn[0][0],xu[yt][0],Zn[yt][0],xu[0][0])}}for(;us.length;){let Ft,Gr,gn,un;[Ft,Gr]=us.splice(0,2);let Zn=[Ft];for(;Ft!=Gr;)Zn.push(Gr),gn=us.indexOf(Gr),un=gn%2,Gr=us.splice(gn-un,2)[1-un];At.subVectors(Zn[0],Zn[1]).cross(rt.subVectors(Zn[0],Zn[2])).normalize();let xu=At.dot(Zn[0])<0;xu&&At.negate();for(let ou=1;ou<=Zn.length-2;ou++)[Zn[ou+ +xu],Zn[ou+1-+xu],Zn[0]].forEach(sp=>{d.push(sp.x,sp.y,sp.z),b.push(At.x,At.y,At.z)})}}function _e(){let $=new _;for(let Pt=0;Pt<d.length;Pt+=3){$.x=d[Pt+0],$.y=d[Pt+1],$.z=d[Pt+2];let It=Tt($)/2/Math.PI+.5,Lt=kt($)/Math.PI+.5;g.push(It,1-Lt)}let rt=new _,st=new _,ut=new _,gt=new _,wt=new z$1,yt=new z$1,At=new z$1,Ct=(Pt,It,Lt,Nt)=>{Nt<0&&Pt.x===1&&(g[It]=Pt.x-1),Lt.x===0&&Lt.z===0&&(g[It]=Nt/2/Math.PI+.5)};for(let Pt=0,It=0;Pt<d.length;Pt+=9,It+=6){rt.set(d[Pt+0],d[Pt+1],d[Pt+2]),st.set(d[Pt+3],d[Pt+4],d[Pt+5]),ut.set(d[Pt+6],d[Pt+7],d[Pt+8]),wt.set(g[It+0],g[It+1]),yt.set(g[It+2],g[It+3]),At.set(g[It+4],g[It+5]),gt.copy(rt).add(st).add(ut).divideScalar(3);let Lt=Tt(gt);Ct(wt,It+0,rt,Lt),Ct(yt,It+2,st,Lt),Ct(At,It+4,ut,Lt)}for(let Pt=0;Pt<g.length;Pt+=6){let It=g[Pt+0],Lt=g[Pt+2],Nt=g[Pt+4],Ht=Math.max(It,Lt,Nt),dr=Math.min(It,Lt,Nt);Ht>.9&&dr<.1&&(It<.2&&(g[Pt+0]+=1),Lt<.2&&(g[Pt+2]+=1),Nt<.2&&(g[Pt+4]+=1))}function Tt(Pt){return Math.atan2(Pt.z,-Pt.x)}function kt(Pt){return Math.atan2(-Pt.y,Math.sqrt(Pt.x*Pt.x+Pt.z*Pt.z))}}}static fromJSON(e){return new Ul(e.vertices,e.indices,e.radius,e.corner,e.cornerSides)}},VO=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,i){let s=Object.assign({},(i==null?void 0:i.parameters)??{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(s,{width:Math.abs(s.width),height:Math.abs(s.height??s.width),depth:Math.abs(s.depth??s.width)})}}static build(e){let{width:i,height:s,depth:a,detail:o,corner:c,cornerSides:d}=e.parameters,g=o===0&&c!==0?new vm(i*.5,c,d):new Ku(i*.5,o);return g.scale(1,s/i,a/i),Object.assign(g,{userData:{...e,type:"DodecahedronGeometry"}})}},vm=class extends Ul{constructor(e=1,i=.2,s=4){let a=(1+Math.sqrt(5))/2,o=1/a,c=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-o,-a,0,-o,a,0,o,-a,0,o,a,-o,-a,0,-o,a,0,o,-a,0,o,a,0,-a,0,-o,a,0,-o,-a,0,o,a,0,o],d=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],g="DodecahedronGeometry";super(c,d,g,e,i,s),this.type=g}static fromJSON(e){return new vm(e.radius,e.corner,e.cornerSides)}},xm=1e-12,Dd=class{constructor(e){this.position=new z$1,this.startPosition=new z$1,this.uuid=Me.generateUUID(),this.position=e.clone()}start(){this.reset()}reset(){this.startPosition.copy(this.position)}applyOffset(e){this.position.copy(this.startPosition).add(e)}copy(e){return this.position.copy(e.position),this.startPosition.copy(e.startPosition),this}clone(){return new Dd(this.position).copy(this)}toJSON(){return[this.position.x,this.position.y]}},Od=class extends Dd{constructor(e){super(e.position),this.parent=e}copy(e){return super.copy(e),this}clone(){return new Od(this.parent).copy(this)}},to=class extends Dd{constructor(e,i){super(i),this.controls=[],this.roundness=0,this.areControlsDirectionsMirrored=!0,this.uuid=e,this.controls.push(new Od(this),new Od(this))}static create(e,i){let s=new to(e,new z$1(...i.position));return s.controls[0].position.set(...i.controlPrevious.position),s.controls[1].position.set(...i.controlNext.position),s.roundness=i.roundness,s.areControlsDirectionsMirrored=i.areControlsDirectionsMirrored,s}getOppositeControl(e){let i=this.controls.indexOf(e);return i===0?this.controls[1]:i===1?this.controls[0]:null}applyOffsetToControls(e,i=1){for(let s=0,a=this.controls.length;s<a;s++){let o=this.controls[s];this.position.distanceTo(o.position)<=i?o.position.copy(this.position):o.applyOffset(e)}}controlsMoved(){return!(this.position.equals(this.controls[0].position)&&this.position.equals(this.controls[1].position))}copy(e){return super.copy(e),this.controls[0].copy(e.controls[0]),this.controls[1].copy(e.controls[1]),this.roundness=e.roundness,this.uuid=e.uuid,this}clone(){return new to(this.uuid,this.position).copy(this)}toJSON(){return super.toJSON().concat(this.controls[0].toJSON(),this.controls[1].toJSON(),[this.roundness])}computeTangents(){var s,a;let e=(s=this.curveBefore)==null?void 0:s.getTangentAt(1),i=(a=this.curveAfter)==null?void 0:a.getTangentAt(0);return[e,i]}computeNormals(e=new z$1,i=new z$1){let[s,a]=this.computeTangents();return s&&a&&(zO(s,e),zO(a,i)),[e,i]}computeTangent(e=new z$1){let[i,s]=this.computeTangents();return i&&s&&e.copy(i).add(s).normalize(),e}computeNormal(e=new z$1){let[i,s]=this.computeNormals();return e.copy(i).add(s).normalize(),e}};function zO(e,i=new z$1){let s=e.length();return i.set(-e.y/s,e.x/s)}var fA=e=>e,Id=new z$1,I0=new z$1,r7=new z$1,i7=new z$1,n7=new z$1,s7=new z$1,GO=new _,jO=new _;function HO(e){let i=new z$1;i.addVectors(e.v0,Id.subVectors(e.v1,e.v0).multiplyScalar(2/3));let s=new z$1;return s.addVectors(e.v2,I0.subVectors(e.v1,e.v2).multiplyScalar(2/3)),new fn(e.v0,i,s,e.v2)}function bm(e,i,s=Number.EPSILON){return Math.abs(e-i)<s}function o7(e,i,s=Number.EPSILON){return e.distanceTo(i)<s}function a7(e,i,s=Number.EPSILON){return e.distanceTo(i)<s}function pA(e,i,s){let a=Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2)),o=Math.sqrt(Math.pow(i.x-s.x,2)+Math.pow(i.y-s.y,2)),c=Math.sqrt(Math.pow(s.x-e.x,2)+Math.pow(s.y-e.y,2));return Math.acos((o*o+a*a-c*c)/(2*o*a))}function WO(e,i,s){return UO(e,i)&&UO(i,s)&&dA(e.position,i.position,s.position)}function dA(e,i,s){return Id.copy(i).sub(e).cross(I0.copy(s).sub(e))===0}function qO(e,i,s,a,o){let c=Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2)),d=(e.y+i.y)/2,g=(e.x+i.x)/2,b=Math.sqrt(Math.pow(s,2)-Math.pow(c/2,2))*(e.y-i.y)/c,j=Math.sqrt(Math.pow(s,2)-Math.pow(c/2,2))*(i.x-e.x)/c;return a.set(g+b,d+j),o.set(g-b,d-j),[a,o]}function YO(e,i,s){let a=e.distanceTo(s),o=i.distanceTo(s);return a<o?i:e}function XO(e,i,s,a,o,c){let d=i.x-e.x,g=i.y-e.y,b=s.x-e.x,j=s.y-e.y,_e=Math.sqrt((d+b)*(d+b)+(g+j)*(g+j)),$;return pA(i,e,s)>Math.PI&&(_e*=-1),bm(j,g)?$=(g+j)*(a/_e-.5)*8/3/(d-b):$=(d+b)*(a/_e-.5)*8/3/(j-g),o.set(i.x-$*g,i.y+$*d),c.set(s.x+$*j,s.y-$*b),[o,c]}function mA(e,i){return e.position.equals(e.controls[1].position)&&i.position.equals(i.controls[0].position)}function UO(e,i){return dA(e.position,e.controls[1].position,i.position)&&dA(e.position,i.controls[0].position,i.position)}function QO(e,i,s,a,o=.5){let c=Id.subVectors(i,e).multiplyScalar(o).add(e),d=I0.subVectors(s,i).multiplyScalar(o).add(i),g=r7.subVectors(a,s).multiplyScalar(o).add(s),b=c,j=i7.subVectors(d,c).multiplyScalar(o).add(c),_e=n7.subVectors(g,d).multiplyScalar(o).add(d),$=g,rt=s7.subVectors(_e,j).multiplyScalar(o).add(j);return[e.x,e.y,b.x,b.y,j.x,j.y,rt.x,rt.y,_e.x,_e.y,$.x,$.y,a.x,a.y]}function KO(e,i,s=12,a=!0){let o=jO.set(0,0,0),c,d=0;for(let g=0;g<i.length;g++){let b=fA(i[g]),j=Id,_e=Gl(b,s);for(let $=0;$<=_e;$++)if(b instanceof fn||b instanceof is||b instanceof pn){if(b.getPoint($/_e,j),o.set(j.x,j.y,0),c!==void 0&&a7(c,o))continue;c===void 0&&(c=GO),c.copy(o),e.setXYZ(d,o.x,o.y,o.z),d++}}return a&&d>1&&!(e.getX(d-1)===e.getX(0)&&e.getY(d-1)===e.getY(0)&&e.getZ(d-1)===e.getZ(0))&&(e.setXYZ(d,e.getX(0),e.getY(0),e.getZ(0)),d++),e}function ZO(e,i,s,a=12,o=!0){let c=jO.set(0,0,0),d=0,g=[];for(let b=0;b<i.length;b++){if(s[b]===!1)continue;let j,_e=fA(i[b]),$=Id,rt=Gl(_e,a);g.push(rt);for(let st=0;st<=rt;st++)if(_e instanceof fn||_e instanceof is||_e instanceof pn){if(_e.getPoint(st/rt,$),c.set($.x,$.y,0),j==null?void 0:j.equals(c))continue;j===void 0?j=GO:(e.setXYZ(d,j.x,j.y,j.z),d++,e.setXYZ(d,c.x,c.y,c.z),d++),j.copy(c)}}return o&&d>1&&!(e.getX(d-1)===e.getX(0)&&e.getY(d-1)===e.getY(0)&&e.getZ(d-1)===e.getZ(0))&&(e.setXYZ(d,e.getX(0),e.getY(0),e.getZ(0)),d++),g}function gA(e,i=12,s=!1){let a=[];for(let o=0,c=e.length;o<c;o++){let d=e[o],g=0;if(s&&d.roundedCurveCorner!==void 0){let b=Gl(d.roundedCurveCorner,i)*.5;o>0&&(a[o-1]+=b),g+=b}d.curveAfter!==void 0&&(g+=Gl(d.curveAfter,i)),a.push(g)}return e.length>0&&s&&e[0].roundedCurveCorner!==void 0&&(a[e.length-1]+=Gl(e[0].roundedCurveCorner,i)*.5),a}function Gl(e,i=12){return e&&e instanceof _c?i*2:e&&(e instanceof pn||e instanceof Pp)?1:e&&e instanceof Yu?i*e.points.length:i}function JO(e,i,s=12,a=!0){let o,c=0;for(let d=0;d<i.length;d++){let g=fA(i[d]),b=Gl(g,s),j=Id;for(let _e=0;_e<=b;_e++)if(g instanceof fn||g instanceof is||g instanceof pn){if(g.getPoint(_e/b,j),o!==void 0&&o7(o,j,xm))continue;o===void 0&&(o=I0),o.copy(j),e.push(j.x,j.y),c++}}return bm(e[0],e[e.length-2],xm)&&bm(e[1],e[e.length-1],xm)&&(e.pop(),e.pop()),a&&c>1&&!(bm(e[c-1],e[1],xm)&&bm(e[c-2],e[0],xm))&&(e.push(e[0],e[1]),c++),e}var yA=new z$1,l7=new z$1,c7=new z$1,u7=new z$1,h7=new z$1,d7=new z$1,Xt=class extends xa{constructor(e=100,i=100){super(),this.points=[],this.shapeHoles=[],this.plane=new ii(new _(0,0,-1)),this.subdivision=0,this.controlSnapDistance=4,this.pointIDs=0,this.isMesh2D=!1,this.isText=!1,this._roundness=0,this.isClosed=!1,this.useCubicForRoundedCorners=!0,this.uuid=Me.generateUUID(),this.needsUpdate=!1,this.roundedCurves=[],this._width=e,this._height=i}static createFromState(e,i,s){let a=new Xt;return a.isClosed=e.isClosed,a.points=e.points.map(o=>to.create(o.id,o.data)),typeof e.roundness=="number"&&(a.roundness=e.roundness),a.shapeHoles=e.shapeHoles.map(o=>Xt.createFromState(o)),i!==void 0&&s!==void 0&&a.applySize(i,s),a.update(),a}get width(){return this._width}get height(){return this._height}get roundness(){return this._roundness}set roundness(e){if(this._roundness!==e){this._roundness=e;for(let i=0,s=this.points.length;i<s;i++)this.points[i].roundness=e;this.needsUpdate=!0}}getPointsIndexesByIds(e){return e.map(i=>this.getPointIndexById(i)).filter(i=>i>=0)}getPointIndexById(e){let i=this.points.length,s=this.points.findIndex(a=>a.uuid===e);if(s<0){let a=i;for(let o=0,c=this.shapeHoles.length;o<c;o++){let d=this.shapeHoles[o],g=d.points.length,b=d.getPointIndexById(e);if(b<0)a+=g;else return b+a}}return s}getLineIndexById(e){return this.getPointIndexById(e)}getBezierPoint(e){if(e<=this.points.length-1)return this.points[e];if(this.shapeHoles.length>0){let i=this.points.length;for(let s=0,a=this.shapeHoles.length;s<a;s++){let o=this.shapeHoles[s],c=e-i;if(c<=o.points.length-1)return o.points[c];i+=o.points.length}}throw new Error("This shape does not have a point for this index: "+e)}getBezierPointIndex(e){let i=this.points.indexOf(e);if(i>=0)return i;if(i=this.points.length,this.shapeHoles.length>0)for(let s=0,a=this.shapeHoles.length;s<a;s++){let o=this.shapeHoles[s],c=o.points.indexOf(e);if(c>=0)return i+c;i+=o.points.length}return-1}getAllPoints(){let e=[].concat(...this.shapeHoles.map(i=>i.points));return[...this.points,...e]}applySize(e,i){e===0&&(e=.001),i===0&&(i=.001),this._width=e,this._height=i}applyScale(e,i){let s=yA.set(e,i);for(let a=0,o=this.points.length;a<o;a++){let c=this.points[a];c.position.multiply(s),c.controls[0].position.multiply(s),c.controls[1].position.multiply(s)}for(let a=0,o=this.shapeHoles.length;a<o;a++)this.shapeHoles[a].applyScale(e,i);this._update()}createPoint(e,i=0,s=Me.generateUUID()){let a;e instanceof z$1?a=e:a=new z$1(e,i);let o=new to(s,a);return o.roundness=this.roundness,o}addPoint(e){this.points.push(e),this.needsUpdate=!0}addPointAt(e,i){this.points.splice(i,0,e),this.needsUpdate=!0}getPointByUuid(e){for(let i=0,s=this.points.length;i<s;i++){let a=this.points[i];if(a.uuid===e)return a}for(let i=0,s=this.shapeHoles.length;i<s;i++){let a=this.shapeHoles[i].getPointByUuid(e);if(a)return a}}getFirstPoint(){return this.points[0]}getLastPoint(){return this.points[this.points.length-1]}removePoint(e){let i=this.points.indexOf(e);i>=0&&this.points.splice(i,1),this.needsUpdate=!0}removePointById(e){let i=this.points.find(s=>s.uuid===e);i&&this.removePoint(i)}update(){for(let e=0,i=this.shapeHoles.length;e<i;e++)this.shapeHoles[e].update();this._update()}extractShapePointsToBuffer(e,i=12,s=!1){this.subdivision=i,this.curveDivisions===void 0&&this.computeCurveDivisions(i);let a=s?this.roundedCurveDivisions:this.curveDivisions;return KO(e,s?this.roundedCurves:this.curves,i,this.autoClose),a.reduce((o,c)=>o+c,0)+1}computeCurveDivisions(e=12){return this.curveDivisions=gA(this.points,e,!1),this.roundedCurveDivisions=gA(this.points,e,!0),this.curveDivisions}extractFilteredShapePointsToBuffer(e,i,s=12){return ZO(e,this.curves,i,s,this.autoClose).reduce((a,o)=>a+o,0)*2}extractShapePointsToFlatArray(e,i=12){return this.subdivision=i,this.curveDivisions===void 0&&this.computeCurveDivisions(i),JO(e,this.roundedCurves,i,this.autoClose)}getCurveIndexFromVertexId(e,i=!1){let s=0;this.curveDivisions===void 0&&this.computeCurveDivisions(this.subdivision);let a=i?this.roundedCurveDivisions:this.curveDivisions,o=0;i&&this.points[0].roundedCurveCorner!==void 0&&(o=Gl(this.points[0].roundedCurveCorner,this.subdivision)*.5);let c=e-o;c<0&&(c+=a.reduce((d,g)=>d+g,0));for(let d=0,g=a.length;d<g;d++){let b=a[d];if(c<s+b)return[d,(c-s+1)/b];s+=b}return[0,1]}getCurveT(e,i,s){let a=this.points[e],o=this.points[e>=this.points.length-1?0:e+1],c=this.curveDivisions,d=c[e];if(mA(a,o)){let b=a.position.distanceTo(o.position);return a.position.distanceTo(yA.set(s.x,s.y))/b}let g=0;for(let b=0;b<e;b++)g+=c[b];return(i-g)/d}dispose(){}_applyCurveForPoint(e,i){mA(i,e)?this.lineTo(e.position.x,e.position.y):this.bezierCurveTo(i.controls[1].position.x,i.controls[1].position.y,e.controls[0].position.x,e.controls[0].position.y,e.position.x,e.position.y);let s=this.curves[this.curves.length-1];e.curveBefore=s,i.curveAfter=s;let a=s.clone();e.roundedCurveBefore=a,i.roundedCurveAfter=a,e.roundedCurveCorner=void 0,this.roundedCurves.push(a)}_update(){if(this.curves=[],this.roundedCurves=[],!this.points.length)return;for(let i=0,s=this.points.length;i<s;i++){let a=this.points[i];if(i===0)this.moveTo(a.position.x,a.position.y);else{let o=this.points[i-1];this._applyCurveForPoint(a,o)}}let e=this.getLastPoint();if(e!=null&&e.curveAfter&&(e.curveAfter=void 0),this.isClosed){let i=this.points[0],s=this.points[this.points.length-1];this._applyCurveForPoint(i,s)}if(this.points.length>2){let i=0;for(let s=0,a=this.points.length;s<a;s++){let o=this.points[s],c=this.points[s-1]??this.points[this.points.length-1],d=this.points[s+1]??this.points[0],g=o.roundness,b=c&&d&&WO(c,o,d);if(!o.controlsMoved()&&g>0&&!b){let j=o.curveBefore,_e=o.curveAfter;if(j===void 0||_e===void 0)continue;let $=o.roundedCurveBefore,rt=o.roundedCurveAfter,st=j.getLength(),ut=_e.getLength(),gt=Math.min(g,st*.499),wt=Math.min(g,ut*.499),yt=Math.min(gt,wt),At=1-yt/st,Ct=yt/ut,Tt=j.getPointAt(At,yA),kt=_e.getPointAt(Ct,l7);this._subSplitCurve(j,$,At,Tt,void 0),this._subSplitCurve(_e,rt,Ct,void 0,kt);let Pt;if(this.useCubicForRoundedCorners){let It=pA(Tt,o.position,kt)/2,Lt=Math.tan(It)*Tt.distanceTo(o.position),[Nt,Ht]=qO(Tt,kt,Lt,c7,u7),dr=YO(Nt,Ht,o.position),[hs,_s]=XO(dr,Tt,kt,Lt,h7,d7);Pt=new fn(Tt.clone(),hs.clone(),_s.clone(),kt.clone())}else Pt=new is(Tt.clone(),o.position.clone(),kt.clone());o.roundedCurveCorner=Pt,this.roundedCurves.splice(s+i,0,Pt),i++}}}}_subSplitCurve(e,i,s,a,o){if(e instanceof pn)a!==void 0&&i.v2.copy(a),o!==void 0&&i.v1.copy(o);else{let c=e,d=i,g=c.getUtoTmapping(s,0),b=QO(c.v0,c.v1,c.v2,c.v3,g);return a!==void 0&&(d.v0.set(b[0],b[1]),d.v1.set(b[2],b[3]),d.v2.set(b[4],b[5]),d.v3.set(b[6],b[7])),o!==void 0&&(d.v0.set(b[6],b[7]),d.v1.set(b[8],b[9]),d.v2.set(b[10],b[11]),d.v3.set(b[12],b[13])),d}return i}clone(){let e=new Xt(this._width,this._height);return e.points=this.points.map(i=>i.clone()),e.isClosed=this.isClosed,e.roundness=this.roundness,e.isMesh2D=this.isMesh2D,e.shapeHoles=this.shapeHoles.map(i=>i.clone()),e}toJSON(){return{points:this.points.reduce((e,i)=>e.concat(i.toJSON()),[]),shapeHoles:this.shapeHoles.map(e=>e.toJSON()),isClosed:this.isClosed,roundness:this.roundness}}fromJSON(e){var s;this.points=[],this.pointIDs=0;let i=e.points.length/7;for(let a=0;a<i;a++){let o=a*7,c=e.points[o+0],d=e.points[o+1],g=e.points[o+2],b=e.points[o+3],j=e.points[o+4],_e=e.points[o+5],$=e.points[o+6],rt=new to(Me.generateUUID(),new z$1(c,d));rt.controls[0].position.set(g,b),rt.controls[1].position.set(j,_e),rt.roundness=$,this.points.push(rt)}return this.shapeHoles=(s=e.shapeHoles)!=null&&s.length?e.shapeHoles.map(a=>{let o=new Xt;return o.fromJSON(a),o}):[],this.isClosed=e.isClosed,this._roundness=e.roundness,this._update(),this}fromShape(e,i=!1){this.isText=i;let s=(o,c)=>{c instanceof fn&&c.v3.equals(o.position)&&o.controls[0].position.copy(c.v2)},a=o=>{let c=[],d,g;for(d=0,g=o.length;d<g;d++)o[d]instanceof is&&(o[d]=HO(o[d]));for(d=0,g=o.length;d<g;d++){let _e=o[d],$=d>0?o[d-1]:null,rt;_e instanceof fn?(rt=this.createPoint(_e.v0),rt.controls[1].position.copy(_e.v1)):_e instanceof pn&&(rt=this.createPoint(_e.v1)),rt!==void 0&&($!==null&&s(rt,$),c.push(rt))}let b=o[o.length-1],j=!1;return b instanceof fn?b.v3.equals(c[0].position)&&(c[0].controls[0].position.copy(b.v2),j=!0):b instanceof pn&&b.v2.equals(c[0].position)&&(j=!0),this.isClosed=j,c};return this.points=a(e.curves),e instanceof xa&&(this.shapeHoles=e.holes.map(o=>{let c=new Xt;return c.fromShape(o),c})),this.update(),this}updatePoint(e,i){let s=this.getPointByUuid(e);s&&(i.position!==void 0&&s.position.fromArray(i.position),i.roundness!==void 0&&(s.roundness=i.roundness),i.areControlsDirectionsMirrored!==void 0&&(s.areControlsDirectionsMirrored=i.areControlsDirectionsMirrored),this.needsUpdate=!0)}updatePreviousControl(e,i){var a;let s=(a=this.getPointByUuid(e))==null?void 0:a.controls[0];s&&(i.position&&s.position.fromArray(i.position),this.needsUpdate=!0)}updateNextControl(e,i){var a;let s=(a=this.getPointByUuid(e))==null?void 0:a.controls[1];s&&(i.position&&s.position.fromArray(i.position),this.needsUpdate=!0)}},xA=Math.PI*2;function vA({x:e,y:i},s,a,o,c){return{x:e*s+o,y:i*a+c}}function f7(e,i){let s=i===1.5707963267948966?.551915024494:i===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(i/4),a=Math.cos(e),o=Math.sin(e),c=Math.cos(e+i),d=Math.sin(e+i);return[{x:a-o*s,y:o+a*s},{x:c+d*s,y:d-c*s},{x:c,y:d}]}function $O(e,i,s,a){let o=e*a-i*s<0?-1:1,c=Math.min(1,Math.max(-1,e*s+i*a));return o*Math.acos(c)}function p7(e,i,s,a,o,c,d,g,b,j){let _e=Math.pow(o,2),$=Math.pow(c,2),rt=Math.pow(d,2),st=Math.pow(g,2),ut=_e*$-_e*st-$*rt;ut<0&&(ut=0),ut/=_e*st+$*rt,ut=Math.sqrt(ut)*(b===j?-1:1);let gt=ut*o/c*g,wt=ut*-c/o*d,yt=gt+(e+s)/2,At=wt+(i+a)/2,Ct=(d-gt)/o,Tt=(g-wt)/c,kt=(-d-gt)/o,Pt=(-g-wt)/c,It=$O(1,0,Ct,Tt),Lt=$O(Ct,Tt,kt,Pt);return!j&&Lt>0&&(Lt-=xA),j&&Lt<0&&(Lt+=xA),{centerx:yt,centery:At,ang1:It,ang2:Lt}}function eI({px:e,py:i,cx:s,cy:a,rx:o,ry:c,largeArcFlag:d,sweepFlag:g}){let b=[];if(o===0||c===0)return[];let j=(e-s)/2,_e=(i-a)/2;if(j===0&&_e===0)return[];o=Math.abs(o),c=Math.abs(c);let $=Math.pow(j,2)/Math.pow(o,2)+Math.pow(_e,2)/Math.pow(c,2);$>1&&(o*=Math.sqrt($),c*=Math.sqrt($));let rt=p7(e,i,s,a,o,c,j,_e,d,g),{ang1:st,ang2:ut}=rt,{centerx:gt,centery:wt}=rt,yt=Math.abs(ut)/(xA/4);Math.abs(1-yt)<1e-7&&(yt=1);let At=Math.max(Math.ceil(yt),1);ut/=At;for(let Ct=0;Ct<At;Ct++)b.push(f7(st,ut)),st+=ut;return b.map(Ct=>{let{x:Tt,y:kt}=vA(Ct[0],o,c,gt,wt),{x:Pt,y:It}=vA(Ct[1],o,c,gt,wt),{x:Lt,y:Nt}=vA(Ct[2],o,c,gt,wt);return{x1:Tt,y1:kt,x2:Pt,y2:It,x:Lt,y:Nt}})}var Gt;(function(e){e[e.ODD=0]="ODD",e[e.NONZERO=1]="NONZERO",e[e.POSITIVE=2]="POSITIVE",e[e.NEGATIVE=3]="NEGATIVE",e[e.ABS_GEQ_TWO=4]="ABS_GEQ_TWO"})(Gt||(Gt={}));var Wr$1;(function(e){e[e.POLYGONS=0]="POLYGONS",e[e.CONNECTED_POLYGONS=1]="CONNECTED_POLYGONS",e[e.BOUNDARY_CONTOURS=2]="BOUNDARY_CONTOURS"})(Wr$1||(Wr$1={}));function ht(e,i){if(!e)throw i||"Assertion Failed!"}var ot=function(){function e(){}return e.vertEq=function(i,s){return i.s===s.s&&i.t===s.t},e.vertLeq=function(i,s){return i.s<s.s||i.s===s.s&&i.t<=s.t},e.transLeq=function(i,s){return i.t<s.t||i.t===s.t&&i.s<=s.s},e.edgeGoesLeft=function(i){return e.vertLeq(i.Dst,i.Org)},e.edgeGoesRight=function(i){return e.vertLeq(i.Org,i.Dst)},e.vertL1dist=function(i,s){return Math.abs(i.s-s.s)+Math.abs(i.t-s.t)},e.edgeEval=function(i,s,a){ht(e.vertLeq(i,s)&&e.vertLeq(s,a));var o=s.s-i.s,c=a.s-s.s;return o+c>0?o<c?s.t-i.t+(i.t-a.t)*(o/(o+c)):s.t-a.t+(a.t-i.t)*(c/(o+c)):0},e.edgeSign=function(i,s,a){ht(e.vertLeq(i,s)&&e.vertLeq(s,a));var o=s.s-i.s,c=a.s-s.s;return o+c>0?(s.t-a.t)*o+(s.t-i.t)*c:0},e.transEval=function(i,s,a){ht(e.transLeq(i,s)&&e.transLeq(s,a));var o=s.t-i.t,c=a.t-s.t;return o+c>0?o<c?s.s-i.s+(i.s-a.s)*(o/(o+c)):s.s-a.s+(a.s-i.s)*(c/(o+c)):0},e.transSign=function(i,s,a){ht(e.transLeq(i,s)&&e.transLeq(s,a));var o=s.t-i.t,c=a.t-s.t;return o+c>0?(s.s-a.s)*o+(s.s-i.s)*c:0},e.vertCCW=function(i,s,a){return i.s*(s.t-a.t)+s.s*(a.t-i.t)+a.s*(i.t-s.t)>=0},e.interpolate=function(i,s,a,o){return i=i<0?0:i,a=a<0?0:a,i<=a?a===0?(s+o)/2:s+(o-s)*(i/(i+a)):o+(s-o)*(a/(i+a))},e.intersect=function(i,s,a,o,c){var d,g,b;e.vertLeq(i,s)||(b=i,i=s,s=b),e.vertLeq(a,o)||(b=a,a=o,o=b),e.vertLeq(i,a)||(b=i,i=a,a=b,b=s,s=o,o=b),e.vertLeq(a,s)?e.vertLeq(s,o)?(d=e.edgeEval(i,a,s),g=e.edgeEval(a,s,o),d+g<0&&(d=-d,g=-g),c.s=e.interpolate(d,a.s,g,s.s)):(d=e.edgeSign(i,a,s),g=-e.edgeSign(i,o,s),d+g<0&&(d=-d,g=-g),c.s=e.interpolate(d,a.s,g,o.s)):c.s=(a.s+s.s)/2,e.transLeq(i,s)||(b=i,i=s,s=b),e.transLeq(a,o)||(b=a,a=o,o=b),e.transLeq(i,a)||(b=i,i=a,a=b,b=s,s=o,o=b),e.transLeq(a,s)?e.transLeq(s,o)?(d=e.transEval(i,a,s),g=e.transEval(a,s,o),d+g<0&&(d=-d,g=-g),c.t=e.interpolate(d,a.t,g,s.t)):(d=e.transSign(i,a,s),g=-e.transSign(i,o,s),d+g<0&&(d=-d,g=-g),c.t=e.interpolate(d,a.t,g,o.t)):c.t=(a.t+s.t)/2},e}(),Sm=function(){function e(){this.next=null,this.prev=null,this.anEdge=null,this.trail=null,this.n=0,this.marked=!1,this.inside=!1}return e}(),R0=function(){function e(i){this.side=i,this.next=null,this.Org=null,this.Sym=null,this.Onext=null,this.Lnext=null,this.Lface=null,this.activeRegion=null,this.winding=0}return Object.defineProperty(e.prototype,"Rface",{get:function(){return this.Sym.Lface},set:function(i){this.Sym.Lface=i},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dst",{get:function(){return this.Sym.Org},set:function(i){this.Sym.Org=i},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Oprev",{get:function(){return this.Sym.Lnext},set:function(i){this.Sym.Lnext=i},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Lprev",{get:function(){return this.Onext.Sym},set:function(i){this.Onext.Sym=i},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dprev",{get:function(){return this.Lnext.Sym},set:function(i){this.Lnext.Sym=i},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rprev",{get:function(){return this.Sym.Onext},set:function(i){this.Sym.Onext=i},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dnext",{get:function(){return this.Sym.Onext.Sym},set:function(i){this.Sym.Onext.Sym=i},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rnext",{get:function(){return this.Sym.Lnext.Sym},set:function(i){this.Sym.Lnext.Sym=i},enumerable:!0,configurable:!0}),e}(),Rd=function(){function e(){this.next=null,this.prev=null,this.anEdge=null,this.coords=[0,0,0],this.s=0,this.t=0,this.pqHandle=0,this.n=0,this.idx=0}return e}(),tI=function(){function e(){var i=new Rd,s=new Sm,a=new R0(0),o=new R0(1);i.next=i.prev=i,i.anEdge=null,s.next=s.prev=s,a.next=a,a.Sym=o,o.next=o,o.Sym=a,this.vHead=i,this.fHead=s,this.eHead=a,this.eHeadSym=o}return e.prototype.makeEdge_=function(i){var s=new R0(0),a=new R0(1);i.Sym.side<i.side&&(i=i.Sym);var o=i.Sym.next;return a.next=o,o.Sym.next=s,s.next=i,i.Sym.next=a,s.Sym=a,s.Onext=s,s.Lnext=a,s.Org=null,s.Lface=null,s.winding=0,s.activeRegion=null,a.Sym=s,a.Onext=a,a.Lnext=s,a.Org=null,a.Lface=null,a.winding=0,a.activeRegion=null,s},e.prototype.splice_=function(i,s){var a=i.Onext,o=s.Onext;a.Sym.Lnext=s,o.Sym.Lnext=i,i.Onext=o,s.Onext=a},e.prototype.makeVertex_=function(i,s,a){var o=i;ht(o,"Vertex can't be null!");var c=a.prev;o.prev=c,c.next=o,o.next=a,a.prev=o,o.anEdge=s;var d=s;do d.Org=o,d=d.Onext;while(d!==s)},e.prototype.makeFace_=function(i,s,a){var o=i;ht(o,"Face can't be null");var c=a.prev;o.prev=c,c.next=o,o.next=a,a.prev=o,o.anEdge=s,o.trail=null,o.marked=!1,o.inside=a.inside;var d=s;do d.Lface=o,d=d.Lnext;while(d!==s)},e.prototype.killEdge_=function(i){i.Sym.side<i.side&&(i=i.Sym);var s=i.next,a=i.Sym.next;s.Sym.next=a,a.Sym.next=s},e.prototype.killVertex_=function(i,s){var a=i.anEdge,o=a;do o.Org=s,o=o.Onext;while(o!==a);var c=i.prev,d=i.next;d.prev=c,c.next=d},e.prototype.killFace_=function(i,s){var a=i.anEdge,o=a;do o.Lface=s,o=o.Lnext;while(o!==a);var c=i.prev,d=i.next;d.prev=c,c.next=d},e.prototype.makeEdge=function(){var i=new Rd,s=new Rd,a=new Sm,o=this.makeEdge_(this.eHead);return this.makeVertex_(i,o,this.vHead),this.makeVertex_(s,o.Sym,this.vHead),this.makeFace_(a,o,this.fHead),o},e.prototype.splice=function(i,s){var a=!1,o=!1;if(i!==s){if(s.Org!==i.Org&&(o=!0,this.killVertex_(s.Org,i.Org)),s.Lface!==i.Lface&&(a=!0,this.killFace_(s.Lface,i.Lface)),this.splice_(s,i),!o){var c=new Rd;this.makeVertex_(c,s,i.Org),i.Org.anEdge=i}if(!a){var d=new Sm;this.makeFace_(d,s,i.Lface),i.Lface.anEdge=i}}},e.prototype.delete=function(i){var s=i.Sym,a=!1;if(i.Lface!==i.Rface&&(a=!0,this.killFace_(i.Lface,i.Rface)),i.Onext===i)this.killVertex_(i.Org,null);else if(i.Rface.anEdge=i.Oprev,i.Org.anEdge=i.Onext,this.splice_(i,i.Oprev),!a){var o=new Sm;this.makeFace_(o,i,i.Lface)}s.Onext===s?(this.killVertex_(s.Org,null),this.killFace_(s.Lface,null)):(i.Lface.anEdge=s.Oprev,s.Org.anEdge=s.Onext,this.splice_(s,s.Oprev)),this.killEdge_(i)},e.prototype.addEdgeVertex=function(i){var s=this.makeEdge_(i),a=s.Sym;this.splice_(s,i.Lnext),s.Org=i.Dst;var o=new Rd;return this.makeVertex_(o,a,s.Org),s.Lface=a.Lface=i.Lface,s},e.prototype.splitEdge=function(i){var s=this.addEdgeVertex(i),a=s.Sym;return this.splice_(i.Sym,i.Sym.Oprev),this.splice_(i.Sym,a),i.Dst=a.Org,a.Dst.anEdge=a.Sym,a.Rface=i.Rface,a.winding=i.winding,a.Sym.winding=i.Sym.winding,a.idx=i.idx,a.Sym.idx=i.Sym.idx,a},e.prototype.connect=function(i,s){var a=!1,o=this.makeEdge_(i),c=o.Sym;if(s.Lface!==i.Lface&&(a=!0,this.killFace_(s.Lface,i.Lface)),this.splice_(o,i.Lnext),this.splice_(c,s),o.Org=i.Dst,c.Org=s.Org,o.Lface=c.Lface=i.Lface,i.Lface.anEdge=c,!a){var d=new Sm;this.makeFace_(d,o,i.Lface)}return o},e.prototype.zapFace=function(i){var s=i.anEdge,a,o,c,d,g;o=s.Lnext;do a=o,o=a.Lnext,a.Lface=null,a.Rface===null&&(a.Onext===a?this.killVertex_(a.Org,null):(a.Org.anEdge=a.Onext,this.splice_(a,a.Oprev)),c=a.Sym,c.Onext===c?this.killVertex_(c.Org,null):(c.Org.anEdge=c.Onext,this.splice_(c,c.Oprev)),this.killEdge_(a));while(a!=s);d=i.prev,g=i.next,g.prev=d,d.next=g},e.prototype.countFaceVerts_=function(i){var s=i.anEdge,a=0;do a++,s=s.Lnext;while(s!==i.anEdge);return a},e.prototype.mergeConvexFaces=function(i){var s,a,o,c,d,g,b;for(s=this.fHead.next;s!==this.fHead;s=s.next)if(s.inside)for(a=s.anEdge,d=a.Org;o=a.Lnext,c=a.Sym,c&&c.Lface&&c.Lface.inside&&(g=this.countFaceVerts_(s),b=this.countFaceVerts_(c.Lface),g+b-2<=i&&ot.vertCCW(a.Lprev.Org,a.Org,c.Lnext.Lnext.Org)&&ot.vertCCW(c.Lprev.Org,c.Org,a.Lnext.Lnext.Org)&&(o=c.Lnext,this.delete(c),a=null,c=null)),!(a&&a.Lnext.Org===d);)a=o;return!0},e.prototype.check=function(){var i=this.fHead,s=this.vHead,a=this.eHead,o,c,d,g,b,j;for(c=i,c=i;(o=c.next)!==i;c=o){ht(o.prev===c),b=o.anEdge;do ht(b.Sym!==b),ht(b.Sym.Sym===b),ht(b.Lnext.Onext.Sym===b),ht(b.Onext.Sym.Lnext===b),ht(b.Lface===o),b=b.Lnext;while(b!==o.anEdge)}for(ht(o.prev===c&&o.anEdge===null),g=s,g=s;(d=g.next)!==s;g=d){ht(d.prev===g),b=d.anEdge;do ht(b.Sym!==b),ht(b.Sym.Sym===b),ht(b.Lnext.Onext.Sym===b),ht(b.Onext.Sym.Lnext===b),ht(b.Org===d),b=b.Onext;while(b!==d.anEdge)}for(ht(d.prev===g&&d.anEdge===null),j=a,j=a;(b=j.next)!==a;j=b)ht(b.Sym.next===j.Sym),ht(b.Sym!==b),ht(b.Sym.Sym===b),ht(b.Org!==null),ht(b.Dst!==null),ht(b.Lnext.Onext.Sym===b),ht(b.Onext.Sym.Lnext===b);ht(b.Sym.next===j.Sym&&b.Sym===this.eHeadSym&&b.Sym.Sym===b&&b.Org===null&&b.Dst===null&&b.Lface===null&&b.Rface===null)},e}(),rI=function(){function e(){this.handle=null}return e}(),iI=function(){function e(){this.key=null,this.node=0}return e}(),m7=function(){function e(i,s){this.leq=s,this.max=0,this.nodes=[],this.handles=[],this.initialized=!1,this.freeList=0,this.size=0,this.max=i,this.nodes=[],this.handles=[];for(var a=0;a<i+1;a++)this.nodes[a]=new rI,this.handles[a]=new iI;this.initialized=!1,this.nodes[1].handle=1,this.handles[1].key=null}return e.prototype.floatDown_=function(i){var s=this.nodes,a=this.handles,o,c,d;for(o=s[i].handle;;){if(d=i<<1,d<this.size&&this.leq(a[s[d+1].handle].key,a[s[d].handle].key)&&++d,ht(d<=this.max),c=s[d].handle,d>this.size||this.leq(a[o].key,a[c].key)){s[i].handle=o,a[o].node=i;break}s[i].handle=c,a[c].node=i,i=d}},e.prototype.floatUp_=function(i){var s=this.nodes,a=this.handles,o,c,d;for(o=s[i].handle;;){if(d=i>>1,c=s[d].handle,d===0||this.leq(a[c].key,a[o].key)){s[i].handle=o,a[o].node=i;break}s[i].handle=c,a[c].node=i,i=d}},e.prototype.init=function(){for(var i=this.size;i>=1;--i)this.floatDown_(i);this.initialized=!0},e.prototype.min=function(){return this.handles[this.nodes[1].handle].key},e.prototype.insert=function(i){var s,a;if(s=++this.size,s*2>this.max){this.max*=2;var o,c;for(c=this.nodes.length,this.nodes.length=this.max+1,o=c;o<this.nodes.length;o++)this.nodes[o]=new rI;for(c=this.handles.length,this.handles.length=this.max+1,o=c;o<this.handles.length;o++)this.handles[o]=new iI}return this.freeList===0?a=s:(a=this.freeList,this.freeList=this.handles[a].node),this.nodes[s].handle=a,this.handles[a].node=s,this.handles[a].key=i,this.initialized&&this.floatUp_(s),a},e.prototype.extractMin=function(){var i=this.nodes,s=this.handles,a=i[1].handle,o=s[a].key;return this.size>0&&(i[1].handle=i[this.size].handle,s[i[1].handle].node=1,s[a].key=null,s[a].node=this.freeList,this.freeList=a,--this.size,this.size>0&&this.floatDown_(1)),o},e.prototype.delete=function(i){var s=this.nodes,a=this.handles,o;ht(i>=1&&i<=this.max&&a[i].key!==null),o=a[i].node,s[o].handle=s[this.size].handle,a[s[o].handle].node=o,--this.size,o<=this.size&&(o<=1||this.leq(a[s[o>>1].handle].key,a[s[o].handle].key)?this.floatDown_(o):this.floatUp_(o)),a[i].key=null,a[i].node=this.freeList,this.freeList=i},e}(),bA=function(){function e(){this.eUp=null,this.nodeUp=null,this.windingNumber=0,this.inside=!1,this.sentinel=!1,this.dirty=!1,this.fixUpperEdge=!1}return e}(),nI=function(){function e(){this.key=null,this.next=null,this.prev=null}return e}(),g7=function(){function e(i,s){this.frame=i,this.leq=s,this.head=new nI,this.head.next=this.head,this.head.prev=this.head}return e.prototype.min=function(){return this.head.next},e.prototype.max=function(){return this.head.prev},e.prototype.insert=function(i){return this.insertBefore(this.head,i)},e.prototype.search=function(i){var s=this.head;do s=s.next;while(s.key!==null&&!this.leq(this.frame,i,s.key));return s},e.prototype.insertBefore=function(i,s){do i=i.prev;while(i.key!==null&&!this.leq(this.frame,i.key,s));var a=new nI;return a.key=s,a.next=i.next,i.next.prev=a,a.prev=i,i.next=a,a},e.prototype.delete=function(i){i.next.prev=i.prev,i.prev.next=i.next},e}(),y7=function(){function e(){}return e.regionBelow=function(i){return i.nodeUp.prev.key},e.regionAbove=function(i){return i.nodeUp.next.key},e.debugEvent=function(i){},e.addWinding=function(i,s){i.winding+=s.winding,i.Sym.winding+=s.Sym.winding},e.edgeLeq=function(i,s,a){var o=i.event,c=s.eUp,d=a.eUp;if(c.Dst===o)return d.Dst===o?ot.vertLeq(c.Org,d.Org)?ot.edgeSign(d.Dst,c.Org,d.Org)<=0:ot.edgeSign(c.Dst,d.Org,c.Org)>=0:ot.edgeSign(d.Dst,o,d.Org)<=0;if(d.Dst===o)return ot.edgeSign(c.Dst,o,c.Org)>=0;var g=ot.edgeEval(c.Dst,o,c.Org),b=ot.edgeEval(d.Dst,o,d.Org);return g>=b},e.deleteRegion=function(i,s){s.fixUpperEdge&&ht(s.eUp.winding===0),s.eUp.activeRegion=null,i.dict.delete(s.nodeUp)},e.fixUpperEdge=function(i,s,a){ht(s.fixUpperEdge),i.mesh.delete(s.eUp),s.fixUpperEdge=!1,s.eUp=a,a.activeRegion=s},e.topLeftRegion=function(i,s){var a=s.eUp.Org,o;do s=e.regionAbove(s);while(s.eUp.Org===a);if(s.fixUpperEdge){if(o=i.mesh.connect(e.regionBelow(s).eUp.Sym,s.eUp.Lnext),o===null)return null;e.fixUpperEdge(i,s,o),s=e.regionAbove(s)}return s},e.topRightRegion=function(i){var s=i.eUp.Dst;do i=e.regionAbove(i);while(i.eUp.Dst===s);return i},e.addRegionBelow=function(i,s,a){var o=new bA;return o.eUp=a,o.nodeUp=i.dict.insertBefore(s.nodeUp,o),o.fixUpperEdge=!1,o.sentinel=!1,o.dirty=!1,a.activeRegion=o,o},e.isWindingInside=function(i,s){switch(i.windingRule){case Gt.ODD:return(s&1)!==0;case Gt.NONZERO:return s!==0;case Gt.POSITIVE:return s>0;case Gt.NEGATIVE:return s<0;case Gt.ABS_GEQ_TWO:return s>=2||s<=-2}throw new Error("Invalid winding rulle")},e.computeWinding=function(i,s){s.windingNumber=e.regionAbove(s).windingNumber+s.eUp.winding,s.inside=e.isWindingInside(i,s.windingNumber)},e.finishRegion=function(i,s){var a=s.eUp,o=a.Lface;o.inside=s.inside,o.anEdge=a,e.deleteRegion(i,s)},e.finishLeftRegions=function(i,s,a){for(var o,c=null,d=s,g=s.eUp;d!==a;){if(d.fixUpperEdge=!1,c=e.regionBelow(d),o=c.eUp,o.Org!=g.Org){if(!c.fixUpperEdge){e.finishRegion(i,d);break}o=i.mesh.connect(g.Lprev,o.Sym),e.fixUpperEdge(i,c,o)}g.Onext!==o&&(i.mesh.splice(o.Oprev,o),i.mesh.splice(g,o)),e.finishRegion(i,d),g=c.eUp,d=c}return g},e.addRightEdges=function(i,s,a,o,c,d){var g,b,j,_e,$=!0;j=a;do ht(ot.vertLeq(j.Org,j.Dst)),e.addRegionBelow(i,s,j.Sym),j=j.Onext;while(j!==o);for(c===null&&(c=e.regionBelow(s).eUp.Rprev),b=s,_e=c;g=e.regionBelow(b),j=g.eUp.Sym,j.Org===_e.Org;)j.Onext!==_e&&(i.mesh.splice(j.Oprev,j),i.mesh.splice(_e.Oprev,j)),g.windingNumber=b.windingNumber-j.winding,g.inside=e.isWindingInside(i,g.windingNumber),b.dirty=!0,!$&&e.checkForRightSplice(i,b)&&(e.addWinding(j,_e),e.deleteRegion(i,b),i.mesh.delete(_e)),$=!1,b=g,_e=j;b.dirty=!0,ht(b.windingNumber-j.winding===g.windingNumber),d&&e.walkDirtyRegions(i,b)},e.spliceMergeVertices=function(i,s,a){i.mesh.splice(s,a)},e.vertexWeights=function(i,s,a){var o=ot.vertL1dist(s,i),c=ot.vertL1dist(a,i),d=.5*c/(o+c),g=.5*o/(o+c);i.coords[0]+=d*s.coords[0]+g*a.coords[0],i.coords[1]+=d*s.coords[1]+g*a.coords[1],i.coords[2]+=d*s.coords[2]+g*a.coords[2]},e.getIntersectData=function(i,s,a,o,c,d){s.coords[0]=s.coords[1]=s.coords[2]=0,s.idx=-1,e.vertexWeights(s,a,o),e.vertexWeights(s,c,d)},e.checkForRightSplice=function(i,s){var a=e.regionBelow(s),o=s.eUp,c=a.eUp;if(ot.vertLeq(o.Org,c.Org)){if(ot.edgeSign(c.Dst,o.Org,c.Org)>0)return!1;ot.vertEq(o.Org,c.Org)?o.Org!==c.Org&&(i.pq.delete(o.Org.pqHandle),e.spliceMergeVertices(i,c.Oprev,o)):(i.mesh.splitEdge(c.Sym),i.mesh.splice(o,c.Oprev),s.dirty=a.dirty=!0)}else{if(ot.edgeSign(o.Dst,c.Org,o.Org)<0)return!1;e.regionAbove(s).dirty=s.dirty=!0,i.mesh.splitEdge(o.Sym),i.mesh.splice(c.Oprev,o)}return!0},e.checkForLeftSplice=function(i,s){var a=e.regionBelow(s),o=s.eUp,c=a.eUp,d;if(ht(!ot.vertEq(o.Dst,c.Dst)),ot.vertLeq(o.Dst,c.Dst)){if(ot.edgeSign(o.Dst,c.Dst,o.Org)<0)return!1;e.regionAbove(s).dirty=s.dirty=!0,d=i.mesh.splitEdge(o),i.mesh.splice(c.Sym,d),d.Lface.inside=s.inside}else{if(ot.edgeSign(c.Dst,o.Dst,c.Org)>0)return!1;s.dirty=a.dirty=!0,d=i.mesh.splitEdge(c),i.mesh.splice(o.Lnext,c.Sym),d.Rface.inside=s.inside}return!0},e.checkForIntersect=function(i,s){var a=e.regionBelow(s),o=s.eUp,c=a.eUp,d=o.Org,g=c.Org,b=o.Dst,j=c.Dst,_e,$,rt=new Rd,st,ut;if(ht(!ot.vertEq(j,b)),ht(ot.edgeSign(b,i.event,d)<=0),ht(ot.edgeSign(j,i.event,g)>=0),ht(d!==i.event&&g!==i.event),ht(!s.fixUpperEdge&&!a.fixUpperEdge),d===g||(_e=Math.min(d.t,b.t),$=Math.max(g.t,j.t),_e>$))return!1;if(ot.vertLeq(d,g)){if(ot.edgeSign(j,d,g)>0)return!1}else if(ot.edgeSign(b,g,d)<0)return!1;return e.debugEvent(i),ot.intersect(b,d,j,g,rt),ht(Math.min(d.t,b.t)<=rt.t),ht(rt.t<=Math.max(g.t,j.t)),ht(Math.min(j.s,b.s)<=rt.s),ht(rt.s<=Math.max(g.s,d.s)),ot.vertLeq(rt,i.event)&&(rt.s=i.event.s,rt.t=i.event.t),st=ot.vertLeq(d,g)?d:g,ot.vertLeq(st,rt)&&(rt.s=st.s,rt.t=st.t),ot.vertEq(rt,d)||ot.vertEq(rt,g)?(e.checkForRightSplice(i,s),!1):!ot.vertEq(b,i.event)&&ot.edgeSign(b,i.event,rt)>=0||!ot.vertEq(j,i.event)&&ot.edgeSign(j,i.event,rt)<=0?j===i.event?(i.mesh.splitEdge(o.Sym),i.mesh.splice(c.Sym,o),s=e.topLeftRegion(i,s),o=e.regionBelow(s).eUp,e.finishLeftRegions(i,e.regionBelow(s),a),e.addRightEdges(i,s,o.Oprev,o,o,!0),!0):b===i.event?(i.mesh.splitEdge(c.Sym),i.mesh.splice(o.Lnext,c.Oprev),a=s,s=e.topRightRegion(s),ut=e.regionBelow(s).eUp.Rprev,a.eUp=c.Oprev,c=e.finishLeftRegions(i,a,null),e.addRightEdges(i,s,c.Onext,o.Rprev,ut,!0),!0):(ot.edgeSign(b,i.event,rt)>=0&&(e.regionAbove(s).dirty=s.dirty=!0,i.mesh.splitEdge(o.Sym),o.Org.s=i.event.s,o.Org.t=i.event.t),ot.edgeSign(j,i.event,rt)<=0&&(s.dirty=a.dirty=!0,i.mesh.splitEdge(c.Sym),c.Org.s=i.event.s,c.Org.t=i.event.t),!1):(i.mesh.splitEdge(o.Sym),i.mesh.splitEdge(c.Sym),i.mesh.splice(c.Oprev,o),o.Org.s=rt.s,o.Org.t=rt.t,o.Org.pqHandle=i.pq.insert(o.Org),e.getIntersectData(i,o.Org,d,b,g,j),e.regionAbove(s).dirty=s.dirty=a.dirty=!0,!1)},e.walkDirtyRegions=function(i,s){for(var a=e.regionBelow(s),o,c;;){for(;a.dirty;)s=a,a=e.regionBelow(a);if(!s.dirty&&(a=s,s=e.regionAbove(s),s===null||!s.dirty))return;if(s.dirty=!1,o=s.eUp,c=a.eUp,o.Dst!==c.Dst&&e.checkForLeftSplice(i,s)&&(a.fixUpperEdge?(e.deleteRegion(i,a),i.mesh.delete(c),a=e.regionBelow(s),c=a.eUp):s.fixUpperEdge&&(e.deleteRegion(i,s),i.mesh.delete(o),s=e.regionAbove(a),o=s.eUp)),o.Org!==c.Org)if(o.Dst!==c.Dst&&!s.fixUpperEdge&&!a.fixUpperEdge&&(o.Dst===i.event||c.Dst===i.event)){if(e.checkForIntersect(i,s))return}else e.checkForRightSplice(i,s);o.Org===c.Org&&o.Dst===c.Dst&&(e.addWinding(c,o),e.deleteRegion(i,s),i.mesh.delete(o),s=e.regionAbove(a))}},e.connectRightVertex=function(i,s,a){var o,c=a.Onext,d=e.regionBelow(s),g=s.eUp,b=d.eUp,j=!1;if(g.Dst!==b.Dst&&e.checkForIntersect(i,s),ot.vertEq(g.Org,i.event)&&(i.mesh.splice(c.Oprev,g),s=e.topLeftRegion(i,s),c=e.regionBelow(s).eUp,e.finishLeftRegions(i,e.regionBelow(s),d),j=!0),ot.vertEq(b.Org,i.event)&&(i.mesh.splice(a,b.Oprev),a=e.finishLeftRegions(i,d,null),j=!0),j){e.addRightEdges(i,s,a.Onext,c,c,!0);return}ot.vertLeq(b.Org,g.Org)?o=b.Oprev:o=g,o=i.mesh.connect(a.Lprev,o),e.addRightEdges(i,s,o,o.Onext,o.Onext,!1),o.Sym.activeRegion.fixUpperEdge=!0,e.walkDirtyRegions(i,s)},e.connectLeftDegenerate=function(i,s,a){var o,c,d,g,b;if(o=s.eUp,ot.vertEq(o.Org,a)){ht(!1),e.spliceMergeVertices(i,o,a.anEdge);return}if(!ot.vertEq(o.Dst,a)){i.mesh.splitEdge(o.Sym),s.fixUpperEdge&&(i.mesh.delete(o.Onext),s.fixUpperEdge=!1),i.mesh.splice(a.anEdge,o),e.sweepEvent(i,a);return}ht(!1),s=e.topRightRegion(s),b=e.regionBelow(s),d=b.eUp.Sym,c=g=d.Onext,b.fixUpperEdge&&(ht(c!==d),e.deleteRegion(i,b),i.mesh.delete(d),d=c.Oprev),i.mesh.splice(a.anEdge,d),ot.edgeGoesLeft(c)||(c=null),e.addRightEdges(i,s,d.Onext,g,c,!0)},e.connectLeftVertex=function(i,s){var a,o,c,d,g,b,j=new bA;if(j.eUp=s.anEdge.Sym,a=i.dict.search(j).key,o=e.regionBelow(a),!!o){if(d=a.eUp,g=o.eUp,ot.edgeSign(d.Dst,s,d.Org)===0){e.connectLeftDegenerate(i,a,s);return}if(c=ot.vertLeq(g.Dst,d.Dst)?a:o,a.inside||c.fixUpperEdge){if(c===a)b=i.mesh.connect(s.anEdge.Sym,d.Lnext);else{var _e=i.mesh.connect(g.Dnext,s.anEdge);b=_e.Sym}c.fixUpperEdge?e.fixUpperEdge(i,c,b):e.computeWinding(i,e.addRegionBelow(i,a,b)),e.sweepEvent(i,s)}else e.addRightEdges(i,a,s.anEdge,s.anEdge,null,!0)}},e.sweepEvent=function(i,s){i.event=s,e.debugEvent(i);for(var a=s.anEdge;a.activeRegion===null;)if(a=a.Onext,a===s.anEdge){e.connectLeftVertex(i,s);return}var o=e.topLeftRegion(i,a.activeRegion);ht(o!==null);var c=e.regionBelow(o),d=c.eUp,g=e.finishLeftRegions(i,c,null);g.Onext===d?e.connectRightVertex(i,o,g):e.addRightEdges(i,o,g.Onext,d,d,!0)},e.addSentinel=function(i,s,a,o){var c=new bA,d=i.mesh.makeEdge();d.Org.s=a,d.Org.t=o,d.Dst.s=s,d.Dst.t=o,i.event=d.Dst,c.eUp=d,c.windingNumber=0,c.inside=!1,c.fixUpperEdge=!1,c.sentinel=!0,c.dirty=!1,c.nodeUp=i.dict.insert(c)},e.initEdgeDict=function(i){i.dict=new g7(i,e.edgeLeq);var s=i.bmax[0]-i.bmin[0],a=i.bmax[1]-i.bmin[1],o=i.bmin[0]-s,c=i.bmax[0]+s,d=i.bmin[1]-a,g=i.bmax[1]+a;e.addSentinel(i,o,c,d),e.addSentinel(i,o,c,g)},e.doneEdgeDict=function(i){for(var s,a=0;(s=i.dict.min().key)!==null;)s.sentinel||(ht(s.fixUpperEdge),ht(++a===1)),ht(s.windingNumber===0),e.deleteRegion(i,s)},e.removeDegenerateEdges=function(i){var s,a,o,c=i.mesh.eHead;for(s=c.next;s!==c;s=a)a=s.next,o=s.Lnext,ot.vertEq(s.Org,s.Dst)&&s.Lnext.Lnext!==s&&(e.spliceMergeVertices(i,o,s),i.mesh.delete(s),s=o,o=s.Lnext),o.Lnext===s&&(o!==s&&((o===a||o===a.Sym)&&(a=a.next),i.mesh.delete(o)),(s===a||s===a.Sym)&&(a=a.next),i.mesh.delete(s))},e.initPriorityQ=function(i){var s,a,o,c=0;for(o=i.mesh.vHead,a=o.next;a!==o;a=a.next)c++;for(c+=8,s=i.pq=new m7(c,ot.vertLeq),o=i.mesh.vHead,a=o.next;a!==o;a=a.next)a.pqHandle=s.insert(a);return a!==o?!1:(s.init(),!0)},e.donePriorityQ=function(i){i.pq=null},e.removeDegenerateFaces=function(i,s){var a,o,c;for(a=s.fHead.next;a!==s.fHead;a=o)o=a.next,c=a.anEdge,ht(c.Lnext!==c),c.Lnext.Lnext===c&&(e.addWinding(c.Onext,c),i.mesh.delete(c));return!0},e.computeInterior=function(i,s){s===void 0&&(s=!0);var a,o;if(e.removeDegenerateEdges(i),!e.initPriorityQ(i))return!1;for(e.initEdgeDict(i);(a=i.pq.extractMin())!==null;){for(;o=i.pq.min(),!(o===null||!ot.vertEq(o,a));)o=i.pq.extractMin(),e.spliceMergeVertices(i,a.anEdge,o.anEdge);e.sweepEvent(i,a)}return i.event=i.dict.min().key.eUp.Org,e.debugEvent(i),e.doneEdgeDict(i),e.donePriorityQ(i),e.removeDegenerateFaces(i,i.mesh)?(s&&i.mesh.check(),!0):!1},e}(),v7=function(){function e(){this.mesh=new tI,this.normal=[0,0,0],this.sUnit=[0,0,0],this.tUnit=[0,0,0],this.bmin=[0,0],this.bmax=[0,0],this.windingRule=Gt.ODD,this.dict=null,this.pq=null,this.event=null,this.vertexIndexCounter=0,this.vertices=[],this.vertexIndices=[],this.vertexCount=0,this.elements=[],this.elementCount=0}return e.prototype.dot_=function(i,s){return i[0]*s[0]+i[1]*s[1]+i[2]*s[2]},e.prototype.normalize_=function(i){var s=i[0]*i[0]+i[1]*i[1]+i[2]*i[2];if(!s)throw"Zero-size vector!";s=Math.sqrt(s),i[0]/=s,i[1]/=s,i[2]/=s},e.prototype.longAxis_=function(i){var s=0;return Math.abs(i[1])>Math.abs(i[0])&&(s=1),Math.abs(i[2])>Math.abs(i[s])&&(s=2),s},e.prototype.computeNormal_=function(i){var s,a,o,c,d,g,b=[0,0,0],j=[0,0,0],_e=[0,0,0],$=[0,0,0],rt=[0,0,0],st=[null,null,null],ut=[null,null,null],gt=this.mesh.vHead;s=gt.next;for(var wt=0;wt<3;++wt)c=s.coords[wt],j[wt]=c,ut[wt]=s,b[wt]=c,st[wt]=s;for(s=gt.next;s!==gt;s=s.next)for(var yt=0;yt<3;++yt)c=s.coords[yt],c<j[yt]&&(j[yt]=c,ut[yt]=s),c>b[yt]&&(b[yt]=c,st[yt]=s);var At=0;if(b[1]-j[1]>b[0]-j[0]&&(At=1),b[2]-j[2]>b[At]-j[At]&&(At=2),j[At]>=b[At]){i[0]=0,i[1]=0,i[2]=1;return}for(g=0,a=ut[At],o=st[At],_e[0]=a.coords[0]-o.coords[0],_e[1]=a.coords[1]-o.coords[1],_e[2]=a.coords[2]-o.coords[2],s=gt.next;s!==gt;s=s.next)$[0]=s.coords[0]-o.coords[0],$[1]=s.coords[1]-o.coords[1],$[2]=s.coords[2]-o.coords[2],rt[0]=_e[1]*$[2]-_e[2]*$[1],rt[1]=_e[2]*$[0]-_e[0]*$[2],rt[2]=_e[0]*$[1]-_e[1]*$[0],d=rt[0]*rt[0]+rt[1]*rt[1]+rt[2]*rt[2],d>g&&(g=d,i[0]=rt[0],i[1]=rt[1],i[2]=rt[2]);g<=0&&(i[0]=i[1]=i[2]=0,i[this.longAxis_(_e)]=1)},e.prototype.checkOrientation_=function(){for(var i=this.mesh.fHead,s,a=this.mesh.vHead,o,c=0,d=i.next;d!==i;d=d.next)if(o=d.anEdge,!(o.winding<=0))do c+=(o.Org.s-o.Dst.s)*(o.Org.t+o.Dst.t),o=o.Lnext;while(o!==d.anEdge);if(c<0){for(s=a.next;s!==a;s=s.next)s.t=-s.t;this.tUnit[0]=-this.tUnit[0],this.tUnit[1]=-this.tUnit[1],this.tUnit[2]=-this.tUnit[2]}},e.prototype.projectPolygon_=function(){var i=this.mesh.vHead,s=[0,0,0],a,o,c=!1;s[0]=this.normal[0],s[1]=this.normal[1],s[2]=this.normal[2],!s[0]&&!s[1]&&!s[2]&&(this.computeNormal_(s),c=!0),a=this.sUnit,o=this.tUnit;var d=this.longAxis_(s);a[d]=0,a[(d+1)%3]=1,a[(d+2)%3]=0,o[d]=0,o[(d+1)%3]=0,o[(d+2)%3]=s[d]>0?1:-1;for(var g=i.next;g!==i;g=g.next)g.s=this.dot_(g.coords,a),g.t=this.dot_(g.coords,o);c&&this.checkOrientation_();for(var b=!0,j=i.next;j!==i;j=j.next)b?(this.bmin[0]=this.bmax[0]=j.s,this.bmin[1]=this.bmax[1]=j.t,b=!1):(j.s<this.bmin[0]&&(this.bmin[0]=j.s),j.s>this.bmax[0]&&(this.bmax[0]=j.s),j.t<this.bmin[1]&&(this.bmin[1]=j.t),j.t>this.bmax[1]&&(this.bmax[1]=j.t))},e.prototype.addWinding_=function(i,s){i.winding+=s.winding,i.Sym.winding+=s.Sym.winding},e.prototype.tessellateMonoRegion_=function(i,s){var a,o;if(a=s.anEdge,!(a.Lnext!==a&&a.Lnext.Lnext!==a))throw"Mono region invalid";for(;ot.vertLeq(a.Dst,a.Org);a=a.Lprev);for(;ot.vertLeq(a.Org,a.Dst);a=a.Lnext);o=a.Lprev;for(var c=void 0;a.Lnext!==o;)if(ot.vertLeq(a.Dst,o.Org)){for(;o.Lnext!==a&&(ot.edgeGoesLeft(o.Lnext)||ot.edgeSign(o.Org,o.Dst,o.Lnext.Dst)<=0);)c=i.connect(o.Lnext,o),o=c.Sym;o=o.Lprev}else{for(;o.Lnext!==a&&(ot.edgeGoesRight(a.Lprev)||ot.edgeSign(a.Dst,a.Org,a.Lprev.Org)>=0);)c=i.connect(a,a.Lprev),a=c.Sym;a=a.Lnext}if(o.Lnext===a)throw"Mono region invalid";for(;o.Lnext.Lnext!==a;)c=i.connect(o.Lnext,o),o=c.Sym;return!0},e.prototype.tessellateInterior_=function(i){for(var s,a=i.fHead.next;a!==i.fHead;a=s)if(s=a.next,a.inside&&!this.tessellateMonoRegion_(i,a))return!1;return!0},e.prototype.discardExterior_=function(i){for(var s,a=i.fHead.next;a!==i.fHead;a=s)s=a.next,a.inside||i.zapFace(a)},e.prototype.setWindingNumber_=function(i,s,a){for(var o,c=i.eHead.next;c!==i.eHead;c=o)o=c.next,c.Rface.inside!==c.Lface.inside?c.winding=c.Lface.inside?s:-s:a?i.delete(c):c.winding=0},e.prototype.getNeighbourFace_=function(i){return!i.Rface||!i.Rface.inside?-1:i.Rface.n},e.prototype.outputPolymesh_=function(i,s,a,o){var c,d=0,g=0,b;a>3&&i.mergeConvexFaces(a);for(var j=i.vHead.next;j!==i.vHead;j=j.next)j.n=-1;for(var _e=i.fHead.next;_e!==i.fHead;_e=_e.next)if(_e.n=-1,!!_e.inside){c=_e.anEdge,b=0;do{var j=c.Org;j.n===-1&&(j.n=g,g++),b++,c=c.Lnext}while(c!==_e.anEdge);if(b>a)throw"Face vertex greater that support polygon";_e.n=d,++d}this.elementCount=d,s===Wr$1.CONNECTED_POLYGONS&&(d*=2),this.elements=[],this.elements.length=d*a,this.vertexCount=g,this.vertices=[],this.vertices.length=g*o,this.vertexIndices=[],this.vertexIndices.length=g;for(var j=i.vHead.next;j!==i.vHead;j=j.next)if(j.n!==-1){var $=j.n*o;this.vertices[$+0]=j.coords[0],this.vertices[$+1]=j.coords[1],o>2&&(this.vertices[$+2]=j.coords[2]),this.vertexIndices[j.n]=j.idx}for(var rt=0,_e=i.fHead.next;_e!==i.fHead;_e=_e.next)if(_e.inside){c=_e.anEdge,b=0;do{var j=c.Org;this.elements[rt++]=j.n,b++,c=c.Lnext}while(c!==_e.anEdge);for(var st=b;st<a;++st)this.elements[rt++]=-1;if(s===Wr$1.CONNECTED_POLYGONS){c=_e.anEdge;do this.elements[rt++]=this.getNeighbourFace_(c),c=c.Lnext;while(c!==_e.anEdge);for(var ut=b;ut<a;++ut)this.elements[rt++]=-1}}},e.prototype.outputContours_=function(i,s){var a,o,c=0,d=0;this.vertexCount=0,this.elementCount=0;for(var g=i.fHead.next;g!==i.fHead;g=g.next)if(g.inside){o=a=g.anEdge;do this.vertexCount++,a=a.Lnext;while(a!==o);this.elementCount++}this.elements=[],this.elements.length=this.elementCount*2,this.vertices=[],this.vertices.length=this.vertexCount*s,this.vertexIndices=[],this.vertexIndices.length=this.vertexCount;var b=0,j=0,_e=0;c=0;for(var g=i.fHead.next;g!==i.fHead;g=g.next)if(g.inside){d=0,o=a=g.anEdge;do this.vertices[b++]=a.Org.coords[0],this.vertices[b++]=a.Org.coords[1],s>2&&(this.vertices[b++]=a.Org.coords[2]),this.vertexIndices[j++]=this.vertexIdCallback?this.vertexIdCallback(a):a.Org.idx,d++,a=a.Lnext;while(a!==o);this.elements[_e++]=c,this.elements[_e++]=d,c+=d}},e.prototype.addContour=function(i,s){this.mesh===null&&(this.mesh=new tI),i<2&&(i=2),i>3&&(i=3);for(var a=null,o=0;o<s.length;o+=i)a===null?(a=this.mesh.makeEdge(),this.mesh.splice(a,a.Sym)):(this.mesh.splitEdge(a),a=a.Lnext),a.Org.coords[0]=s[o+0],a.Org.coords[1]=s[o+1],i>2?a.Org.coords[2]=s[o+2]:a.Org.coords[2]=0,a.Org.idx=this.vertexIndexCounter++,this.edgeCreateCallback&&this.edgeCreateCallback(a),a.winding=1,a.Sym.winding=-1},e.prototype.tesselate=function(i,s,a,o,c,d){if(i===void 0&&(i=Gt.ODD),s===void 0&&(s=Wr$1.POLYGONS),d===void 0&&(d=!0),this.vertices=[],this.elements=[],this.vertexIndices=[],this.vertexIndexCounter=0,c&&(this.normal[0]=c[0],this.normal[1]=c[1],this.normal[2]=c[2]),this.windingRule=i,o<2&&(o=2),o>3&&(o=3),!this.mesh)return!1;this.projectPolygon_(),y7.computeInterior(this,d);var g=this.mesh;return s===Wr$1.BOUNDARY_CONTOURS?this.setWindingNumber_(g,1,!0):this.tessellateInterior_(g),d&&g.check(),s===Wr$1.BOUNDARY_CONTOURS?this.outputContours_(g,o):this.outputPolymesh_(g,s,a,o),!0},e}();function ro(e){var i=e.windingRule,s=i===void 0?Gt.ODD:i,a=e.elementType,o=a===void 0?Wr$1.POLYGONS:a,c=e.polySize,d=c===void 0?3:c,g=e.vertexSize,b=g===void 0?2:g,j=e.normal,_e=j===void 0?[0,0,1]:j,$=e.contours,rt=$===void 0?[]:$,st=e.strict,ut=st===void 0?!0:st,gt=e.debug,wt=gt===void 0?!1:gt;if(!rt&&ut)throw new Error("Contours can't be empty");if(rt){var yt=new v7;e.edgeCreateCallback&&(yt.edgeCreateCallback=e.edgeCreateCallback),e.vertexIdCallback&&(yt.vertexIdCallback=e.vertexIdCallback);for(var At=0;At<rt.length;At++)yt.addContour(b||2,rt[At]);return yt.tesselate(s,o,d,b,_e,ut),{vertices:yt.vertices,vertexIndices:yt.vertexIndices,vertexCount:yt.vertexCount,elements:yt.elements,elementCount:yt.elementCount,mesh:wt?yt.mesh:void 0}}}Gt.ODD;Gt.NONZERO;Gt.POSITIVE;Gt.NEGATIVE;Gt.ABS_GEQ_TWO;Wr$1.POLYGONS;Wr$1.CONNECTED_POLYGONS;Wr$1.BOUNDARY_CONTOURS;var L0=class{constructor(e=256,i=!1){this.capacity=e,this.size=0,this.debug=i,this.debug&&console.log(`allocating with cap ${e}`);let s=e*L0.eSize;this.buffer=new ArrayBuffer(s);let a=Float32Array.BYTES_PER_ELEMENT,o=0;this.positions=new Float32Array(this.buffer,o*a,3*e),o+=3*e,this.normals=new Float32Array(this.buffer,o*a,3*e),o+=3*e,this.uvs=new Float32Array(this.buffer,o*a,2*e)}realloc(e,i=!1){if(e<this.size)throw Error("cannot shrink buffer");if(e<=this.capacity&&!i)return;this.debug&&console.log(`resizing from ${this.capacity} → ${e}`);let s=e*L0.eSize,a=new ArrayBuffer(s),o=Float32Array.BYTES_PER_ELEMENT,c=0,d=new Float32Array(a,c*o,3*e);c+=3*e;let g=new Float32Array(a,c*o,3*e);c+=3*e;let b=new Float32Array(a,c*o,2*e);i?(d.set(this.positions.subarray(0,this.size*3)),g.set(this.normals.subarray(0,this.size*3)),b.set(this.uvs.subarray(0,this.size*2))):(d.set(this.positions),g.set(this.normals),b.set(this.uvs)),this.buffer=a,this.positions=d,this.normals=g,this.uvs=b,this.capacity=e}get(e=1){let i=this.size+e;if(i>this.capacity){let a=this.capacity;for(;i>a;)a*=2;this.realloc(a)}let s=this.size;return this.size=i,s}reserve(e){let i=this.size+e;i>this.capacity&&this.realloc(i)}shrink(){this.debug&&console.log(`shrinking ${this.capacity} → ${this.size}`),this.realloc(this.size,!0)}},wm=L0;wm.eSize=8*Float32Array.BYTES_PER_ELEMENT;var lI=pi(aI()),Am={vertices:[160,160,-160,160,-160,-160,160,-160],vertexIndices:[1,0,3,2],vertexCount:4,elements:[0,4],elementCount:1,mesh:void 0},EA={vertices:[],vertexIndices:[],vertexCount:0,elements:[],elementCount:0,mesh:void 0},TA={vertices:[-160,160,160,-160,160,160,-160,-160],vertexIndices:[1,3,0,2],vertexCount:4,elements:[0,1,2,1,0,3],elementCount:2,mesh:void 0},_A=(e,i)=>([s,a])=>(a<s&&(a+=i),(e>=s?e:e+i)<=a),Hl=class extends Pe{constructor(e,i,s=0,a=12,o=3,c=Gt.ODD,d=!1){super(),this.forPathBevel=d,this.type="ShapeGeometry",this.vertexCache={},this._shape=e,this._depth=i,this._curveSegments=a,this._bevelSegmentsInput=o;let g=this._shape.extractShapePointsToFlatArray([],a),b=this._shape.shapeHoles.map(Nt=>{let Ht=Nt.extractShapePointsToFlatArray([],a),dr=[];for(let hs=Ht.length-1;hs>=1;hs-=2){let _s=Ht[hs-1],ds=Ht[hs-0];dr.push(_s,ds)}return dr}),j=[],_e=[];for(let Nt=0;Nt<g.length;Nt+=2)_e.push([g[Nt],g[Nt+1]]);j.push(_e);for(let Nt=0;Nt<b.length;Nt++){let Ht=b[Nt],dr=[];for(let hs=0;hs<Ht.length;hs+=2)dr.push([Ht[hs],Ht[hs+1]]);j.push(dr)}let $;e.isText?$=new lh().setFromPoints(e.points.map(Nt=>Nt.position)).getSize(new z$1).length()*.1:j[0].length===0?$=s:$=(0,lI.default)(j).distance,s<=0?(this._bevel=0,this._bevelSegments=0):(this._bevel=Math.min(s,$,i/2),this._bevelSegments=Math.floor(o));let rt;try{rt=ro({windingRule:c,elementType:Wr$1.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[g]})}catch{rt=Am}let st;try{st=ro({windingRule:Gt.ODD,elementType:Wr$1.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...b]})}catch{st=EA}if(!rt)throw new Error("error generating geometry");let ut=rt.elementCount;if(st){rt.elementCount+=st.elementCount;for(let Nt=0;Nt<st.elements.length;Nt++){let Ht=st.elements[Nt],dr=Nt%2===0?rt.vertexCount:0;rt.elements.push(Ht+dr)}for(let Nt=0;Nt<st.vertexIndices.length;Nt++){let Ht=st.vertexIndices[Nt],dr=rt.vertexCount;rt.vertexIndices.push(Ht+dr)}for(let Nt=0;Nt<st.vertices.length;Nt++){let Ht=st.vertices[Nt];rt.vertices.push(Ht)}}let gt=1/0,wt=-1/0,yt=1/0,At=-1/0;for(let Nt=0,Ht=rt.vertexCount;Nt<Ht;Nt++){let dr=Nt*2,hs=rt.vertices[dr+0],_s=rt.vertices[dr+1];hs<gt&&(gt=hs),hs>wt&&(wt=hs),_s<yt&&(yt=_s),_s>At&&(At=_s)}this._minX=gt,this._minY=yt,this._width=wt-gt,this._height=At-yt,this._buffer=new wm(this._computeBufferEstimatedSize(rt));let Ct=[],Tt=[];for(let Nt=rt.elementCount-1;Nt>=0;Nt--){let Ht=Nt>=ut,dr=Nt*2,hs=rt.elements[dr+0],_s=rt.elements[dr+1],ds=hs+_s,Nn={start:hs,count:_s,normals:[],continuous:[],concave:[]},us=hs,hn=ds-1,Ft=hs+1,Gr=this._shape.roundedCurves.length;do{let ou=us-hs,sp=rt.vertices[hn*2+0],wu=rt.vertices[hn*2+1],l1=rt.vertices[us*2+0],P0=rt.vertices[us*2+1],B0=rt.vertices[Ft*2+0],q1=rt.vertices[Ft*2+1],ox=l1-sp,qx=P0-wu,N_=Math.sqrt(ox*ox+qx*qx);ox/=N_,qx/=N_;let eS=l1-B0,tA=P0-q1,fD=Math.sqrt(eS*eS+tA*tA);eS/=fD,tA/=fD,Nn.normals[ou*2+0]=-tA,Nn.normals[ou*2+1]=eS,Nn.concave[ou]=ox*tA-qx*eS>0;let q3=rt.vertexIndices[us];if(Array.isArray(q3))Nn.continuous[ou]=!1;else{let[SA,wA]=this._shape.getCurveIndexFromVertexId(q3-1,!0);if(wA>0&&wA<1)Nn.continuous[ou]=!0;else{let mO=wA===1?SA+1:SA-1;mO=(mO+Gr)%Gr;let sR=wA===1?0:1,bu=this._shape.roundedCurves[SA].getTangent(wA),au=this._shape.roundedCurves[mO].getTangent(sR);Nn.continuous[ou]=bu.dot(au)>.95}}Ht&&(Nn.normals[ou*2+0]*=-1,Nn.normals[ou*2+1]*=-1),[hn,us,Ft]=[us,Ft,Ft+1],Ft>=ds&&(Ft-=_s)}while(Ft!==hs+1);let gn=[];gn.push({bevelI:0,angle:0,size:0,boundary:{vertices:rt.vertices.slice(hs*2,ds*2),vertexCount:_s,vertexIndices:new Array(_s).fill(!0).map((ou,sp)=>[sp,sp]),elements:[0,_s],elementCount:1,mesh:null},reverseMap:[],insetPoints:rt.vertices.slice(hs*2,ds*2)});let un=0;for(let ou=1;ou<=this._bevelSegments;ou++){let sp=ou/this._bevelSegments*Math.PI/2,wu=(1-Math.cos(sp))*this._bevel,l1=[],P0=[],B0=0;for(let ox=0;ox<_s;ox++){let qx=ox*2,N_=(ox-1+_s)%_s*2,eS=rt.vertices[Nn.start*2+qx+0],tA=rt.vertices[Nn.start*2+qx+1],fD=-Nn.normals[N_+0]*wu,q3=-Nn.normals[N_+1]*wu,SA=-Nn.normals[qx+0]*wu,wA=-Nn.normals[qx+1]*wu;if(Nn.concave[ox]||!Nn.concave[ox]&&Ht){let mO=Math.atan2(q3,fD),sR=Math.atan2(wA,SA);sR>mO&&(sR-=Math.PI*2);let bu=sR-mO;if(Nn.continuous[ox]||Ht){let au=mO+bu/2,X1=Math.cos(au)*wu,eE=Math.sin(au)*wu;l1[2*B0+0]=eS+X1*(Ht?-1:1),l1[2*B0+1]=tA+eE*(Ht?-1:1),P0[B0]=ox,B0++}else{let au=Math.max(1,Math.floor(a/4*Math.abs(bu)/Math.PI));for(let X1=0;X1<=au;X1++){let eE=mO+bu*(X1/au),bo=Math.cos(eE)*wu,C3=Math.sin(eE)*wu;l1[2*B0+0]=eS+bo,l1[2*B0+1]=tA+C3,P0[B0]=ox,B0++}}}else l1[2*B0+0]=eS+fD,l1[2*B0+1]=tA+q3,P0[B0]=ox,B0++,l1[2*B0+0]=eS,l1[2*B0+1]=tA,P0[B0]=ox,B0++,l1[2*B0+0]=eS+SA,l1[2*B0+1]=tA+wA,P0[B0]=ox,B0++}let q1=ro({windingRule:Gt.POSITIVE,elementType:Wr$1.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[l1],edgeCreateCallback:ox=>{let qx=ox.Org.idx,N_=P0[qx],eS=P0[(qx+1)%P0.length];ox.idx=[N_,eS],ox.Sym.idx=[eS,N_]},vertexIdCallback:ox=>{let qx=ox.Lprev.idx;return[qx?qx[1]:0,ox.idx?ox.idx[0]:0]}});if(!q1)throw console.log("Error"),new Error(`error generating bevel geometry for ${ou}'th loop`);if(!q1.vertexCount){let ox=(ou-1)/this._bevelSegments*Math.PI/2;un=(1-Math.sin(ox))*this._bevel;break}for(let ox=0;ox<q1.vertexIndices.length;ox++){let[qx,N_]=q1.vertexIndices[ox];if(qx===N_)continue;let eS=N_;N_<qx&&(eS+=_s);for(let tA=qx;tA<eS;tA++){let fD=tA%_s,q3=(tA+1)%_s;if(!Nn.continuous[fD]||!Nn.continuous[q3]){q1.vertexIndices[ox]=[qx,fD],q1.vertexIndices.splice(ox+1,0,[q3,N_]),q1.vertices.splice((ox+1)*2,0,q1.vertices[ox*2],q1.vertices[ox*2+1]);break}}}gn.push({bevelI:ou,angle:sp,size:wu,boundary:q1,reverseMap:P0,insetPoints:l1})}let Zn=(ou,sp,wu)=>{let l1=0,P0=ou.boundary.vertexIndices.length;for(;l1<P0&&wu(ou.boundary.vertexIndices[sp]);)sp=(sp+1)%P0,l1++;return l1},xu=Ct.length;for(let ou=1;ou<gn.length;ou++){let sp=gn[ou-1],wu=gn[ou],l1=sp.boundary.vertexIndices.length,P0=wu.boundary.vertexIndices.length;if(!l1||!P0)break;let B0=Nn.concave.length,q1=0,ox=_A(q1,_s);for(;!sp.boundary.vertexIndices.filter(ox).length||!wu.boundary.vertexIndices.filter(ox).length;)q1++,ox=_A(q1,_s);let qx=sp.boundary.vertexIndices.findIndex(ox),N_=wu.boundary.vertexIndices.findIndex(ox);do qx=(qx+1)%l1;while(ox(sp.boundary.vertexIndices[qx]));do N_=(N_+1)%P0;while(ox(wu.boundary.vertexIndices[N_]));q1=(q1+1)%_s;let eS=q1,tA=0,fD=this._buildBevelVert(Nn,sp,(qx-1+l1)%l1,void 0,tA),q3=this._buildBevelVert(Nn,wu,(N_-1+P0)%P0,void 0,tA),SA=fD,wA=q3,mO,sR,bu=!1;do{tA=(q1||B0)/B0,ox=_A(q1,_s);let au=Zn(sp,qx,ox),X1=Zn(wu,N_,ox),eE=bu;if(bu=!1,au&&!X1){for(let bo=0;bo<au;bo++)mO=this._buildBevelVert(Nn,sp,(qx+bo)%l1,bo/(au-1),tA),Ct.push(SA.topN,mO.topP,wA.topN),d===!1&&Ct.push(mO.bottomP,SA.bottomN,wA.bottomN),SA=mO;bu=!0}else if(!au&&X1)for(let bo=0;bo<X1;bo++)sR=this._buildBevelVert(Nn,wu,(N_+bo)%P0,bo/(X1-1),tA),Ct.push(wA.topN,SA.topP,sR.topP),d===!1&&Ct.push(SA.bottomP,wA.bottomN,sR.bottomP),wA=sR;else if(au&&X1)if(mO=this._buildBevelVert(Nn,sp,qx,0,tA),sR=this._buildBevelVert(Nn,wu,N_,0,tA),eE?(Ct.push(SA.topN,sR.topP,wA.topN),Ct.push(SA.topN,mO.topP,sR.topP),d===!1&&(Ct.push(sR.bottomP,SA.bottomN,wA.bottomN),Ct.push(sR.bottomP,mO.bottomP,SA.bottomN))):(Ct.push(wA.topN,SA.topN,mO.topP),Ct.push(wA.topN,mO.topP,sR.topP),d===!1&&(Ct.push(mO.bottomP,SA.bottomN,wA.bottomN),Ct.push(mO.bottomP,wA.bottomN,sR.bottomP))),SA=mO,wA=sR,au===X1)for(let bo=1;bo<au;bo++)mO=this._buildBevelVert(Nn,sp,(qx+bo)%l1,bo/(au-1),tA),sR=this._buildBevelVert(Nn,wu,(N_+bo)%P0,bo/(X1-1),tA),Ct.push(SA.topN,mO.topP,wA.topN),Ct.push(wA.topN,mO.topP,sR.topP),d===!1&&(Ct.push(mO.bottomP,SA.bottomN,wA.bottomN),Ct.push(mO.bottomP,wA.bottomN,sR.bottomP)),SA=mO,wA=sR;else if(au>X1){let bo=au/X1,C3=0;for(let aR=1;aR<au;aR++)mO=this._buildBevelVert(Nn,sp,(qx+aR)%l1,aR/(au-1),tA),Ct.push(SA.topN,mO.topP,wA.topN),d===!1&&Ct.push(mO.bottomP,SA.bottomN,wA.bottomN),SA=mO,aR>(C3+1)*bo&&(C3++,sR=this._buildBevelVert(Nn,wu,(N_+C3)%P0,C3/(X1-1),tA),Ct.push(wA.topN,mO.topP,sR.topP),d===!1&&Ct.push(mO.bottomP,wA.bottomN,sR.bottomP),wA=sR)}else{let bo=X1/au,C3=0;for(let aR=1;aR<X1;aR++)sR=this._buildBevelVert(Nn,wu,(N_+aR)%P0,aR/(X1-1),tA),Ct.push(wA.topN,mO.topP,sR.topP),d===!1&&Ct.push(mO.bottomP,wA.bottomN,sR.bottomP),wA=sR,aR>(C3+1)*bo&&(C3++,mO=this._buildBevelVert(Nn,sp,(qx+C3)%l1,C3/(au-1),tA),Ct.push(SA.topN,mO.topP,wA.topN),d===!1&&Ct.push(mO.bottomP,SA.bottomN,wA.bottomN),SA=mO)}qx=(qx+au)%l1,N_=(N_+X1)%P0,q1=(q1+1)%B0}while(q1!==eS)}if(d===!1&&this._depth>this._bevel*2&&this._buildWall(gn,Nn,Ct),Ht){let ou=[];for(let sp=Ct.length-1;sp>=xu+2;sp-=3){let wu=Ct[sp-2],l1=Ct[sp-1],P0=Ct[sp-0];ou.push(P0,l1,wu)}Ct.splice(xu,Ct.length-xu,...ou)}if(Ht){let ou=[];for(let sp=gn[gn.length-1].boundary.vertices.length-1;sp>=1;sp-=2){let wu=gn[gn.length-1].boundary.vertices[sp-1],l1=gn[gn.length-1].boundary.vertices[sp-0];ou.push(wu,l1)}Tt.push(ou)}if(!Ht){let ou=gn[gn.length-1],sp;try{sp=ro({windingRule:gn.length>1?Gt.POSITIVE:Gt.ODD,elementType:Wr$1.POLYGONS,vertexSize:2,strict:!0,contours:[ou.insetPoints,...Tt]})}catch{sp=TA}if(!sp)throw new Error("Error generating geometry for surface");b.length===0&&this._bevel<$&&Object.assign(this,{useNgonForTopBottomFaceDuringBake:!0});for(let wu=0;wu<sp.elementCount*3;wu+=3){let l1=this._buildSurfaceVert(sp,sp.elements[wu+0],un),P0=this._buildSurfaceVert(sp,sp.elements[wu+1],un),B0=this._buildSurfaceVert(sp,sp.elements[wu+2],un);Ct.push(l1.top,P0.top,B0.top),d===!1&&Ct.push(B0.bottom,P0.bottom,l1.bottom)}}this.vertexCache={}}this._buffer.shrink();let kt=new Xe(Uint32Array.from(Ct),1),Pt=new Xe(this._buffer.positions,3),It=new Xe(this._buffer.normals,3),Lt=new Xe(this._buffer.uvs,2);Pt.needsUpdate=!0,It.needsUpdate=!0,Lt.needsUpdate=!0,kt.needsUpdate=!0,this.setAttribute("position",Pt),this.setAttribute("normal",It),this.setAttribute("uv",Lt),this.setIndex(kt)}_computeBufferEstimatedSize(e){return e.vertexCount*2*(2+this._bevelSegments)}_buildWall(e,i,s){let a=e[0];for(let o=0,c=a.boundary.vertexCount;o<c;o++){let d=this._buildBevelVert(i,a,o),g=this._buildBevelVert(i,a,(o+1)%c);s.push(g.topP,d.topN,d.bottomN),s.push(g.topP,d.bottomN,g.bottomP)}}_buildSurfaceVert(e,i,s){let a=i.toString();if(a in this.vertexCache)return this.vertexCache[a];let o=e.vertices[i*2+0],c=e.vertices[i*2+1],d=(o-this._minX)/this._width,g=(c-this._minY)/this._height;this.forPathBevel&&(g=1);let b=this._buffer.get(this.forPathBevel?1:2),j=b*3,_e=b*2,$={top:b+0,bottom:b+1};return this._buffer.positions[j+0]=o,this._buffer.positions[j+1]=c,this._buffer.positions[j+2]=this.forPathBevel?this._bevel:this._depth-s,this._buffer.normals[j+0]=0,this._buffer.normals[j+1]=0,this._buffer.normals[j+2]=1,this._buffer.uvs[_e+0]=d,this._buffer.uvs[_e+1]=g,this.forPathBevel===!1&&(this._buffer.positions[j+3]=o,this._buffer.positions[j+4]=c,this._buffer.positions[j+5]=s,this._buffer.normals[j+3]=0,this._buffer.normals[j+4]=0,this._buffer.normals[j+5]=-1,this._buffer.uvs[_e+2]=d,this._buffer.uvs[_e+3]=g),this.vertexCache[a]=$,$}_buildBevelVert(e,i,s,a=1,o){let c=`${i.bevelI}:${s}`;if(c in this.vertexCache&&o!==0&&o!==1&&(!o||o===this.vertexCache[c].pathBevelUCoord))return this.vertexCache[c];let[d,g]=i.boundary.vertexIndices[s],b,j,_e,$;d!==g?(j=d,b=g,$=!1,_e=e.continuous[j]&&e.continuous[b]):(b=d,j=(b-1+e.count)%e.count,$=e.concave[b]&&i.bevelI>0,_e=e.continuous[b]||$);let rt=Math.cos(i.angle),st=Math.sin(i.angle),ut=s*2,gt=b*2,wt=j*2,yt=i.boundary.vertices[ut+0],At=i.boundary.vertices[ut+1],Ct=(1-st)*this._bevel,Tt=(yt-this._minX)/this._width,kt=(At-this._minY)/this._height;this.forPathBevel&&(o!==void 0&&(Tt=o),kt=1);let Pt=e.normals[gt+0],It=e.normals[gt+1],Lt=e.normals[wt+0],Nt=e.normals[wt+1];if($){let ds=Lt-Pt,Nn=Nt-It;Pt=Pt+ds*(1-a),It=It+Nn*(1-a);let us=Math.sqrt(Pt*Pt+It*It);Pt/=us,It/=us}let Ht=this.forPathBevel?this._buffer.get(_e?1:2):this._buffer.get(_e?2:4),dr=Ht*3,hs=Ht*2,_s={i:s,fi:b,topP:Ht+0,topN:Ht+0,bottomP:Ht+1,bottomN:Ht+1,pathBevelUCoord:o};return this._buffer.positions[dr+0]=yt,this._buffer.positions[dr+1]=At,this._buffer.positions[dr+2]=(this.forPathBevel?this._bevel:this._depth)-Ct,this._buffer.normals[dr+0]=Pt*rt,this._buffer.normals[dr+1]=It*rt,this._buffer.normals[dr+2]=st,this._buffer.uvs[hs+0]=Tt,this._buffer.uvs[hs+1]=kt,this.forPathBevel===!1&&(this._buffer.positions[dr+3]=yt,this._buffer.positions[dr+4]=At,this._buffer.positions[dr+5]=Ct,this._buffer.normals[dr+3]=Pt*rt,this._buffer.normals[dr+4]=It*rt,this._buffer.normals[dr+5]=-st,this._buffer.uvs[hs+2]=kt,this._buffer.uvs[hs+3]=Tt),_e||(this.forPathBevel?(Ht+=1,dr+=3,hs+=2):(Ht+=2,dr+=6,hs+=4),_s.topP=Ht+0,_s.bottomP=Ht+1,this._buffer.positions[dr+0]=yt,this._buffer.positions[dr+1]=At,this._buffer.positions[dr+2]=(this.forPathBevel?this._bevel:this._depth)-Ct,this._buffer.normals[dr+0]=Lt*rt,this._buffer.normals[dr+1]=Nt*rt,this._buffer.normals[dr+2]=st,this._buffer.uvs[hs+0]=Tt,this._buffer.uvs[hs+1]=kt,this.forPathBevel===!1&&(this._buffer.positions[dr+3]=yt,this._buffer.positions[dr+4]=At,this._buffer.positions[dr+5]=Ct,this._buffer.normals[dr+3]=Lt*rt,this._buffer.normals[dr+4]=Nt*rt,this._buffer.normals[dr+5]=-st,this._buffer.uvs[hs+2]=kt,this._buffer.uvs[hs+3]=Tt)),this.vertexCache[c]=_s,_s}clone(){let e=new Hl(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return e.userData=Ea(this.userData),e}},Ld=class extends Pe{constructor(e,i=12,s={}){super(),this.type="ShapeGeometry",this.windingRule=Gt.ODD,this.elementType=Wr$1.POLYGONS,this.polySize=3,this.vertexSize=2,this.strict=!0,this._shape=e,this._curveSegments=i,this._triangulationOptions=Object.assign({windingRule:Gt.ODD,elementType:Wr$1.POLYGONS,polySize:3,vertexSize:2,strict:!0},s);let a=this._shape.extractShapePointsToFlatArray([],this._curveSegments),o=this._shape.shapeHoles.map(rt=>rt.extractShapePointsToFlatArray([],this._curveSegments)),c,d=!0,g=!0,b,j;for(let rt=0,st=a.length/2;rt<st;rt++){let ut=rt*2,gt=a[ut+0],wt=a[ut+1];if(b!==void 0&&gt!==b&&(d=!1),j!==void 0&&wt!==j&&(g=!1),b=gt,j=wt,!d&&!g)break}if(!d&&!g)try{c=ro({contours:[a,...o],windingRule:this._triangulationOptions.windingRule,elementType:this._triangulationOptions.elementType,polySize:this._triangulationOptions.polySize,vertexSize:this._triangulationOptions.vertexSize,strict:this._triangulationOptions.strict})}catch{c=Am}let _e=(c==null?void 0:c.vertexCount)??1,$=(c==null?void 0:c.elementCount)??1;if(this._positionAttribute=new Xe(new Float32Array(_e*3),3),this._normalAttribute=new Xe(new Float32Array(_e*3),3),this._uvAttribute=new Xe(new Float32Array(_e*2),2),this._indexAttribute=new Xe(new Uint32Array($*3),1),c){let rt=1/0,st=-1/0,ut=1/0,gt=-1/0;for(let At=0,Ct=_e;At<Ct;At++){let Tt=At*2,kt=c.vertices[Tt+0],Pt=c.vertices[Tt+1];kt<rt&&(rt=kt),kt>st&&(st=kt),Pt<ut&&(ut=Pt),Pt>gt&&(gt=Pt)}let wt=st-rt,yt=gt-ut;for(let At=0,Ct=_e;At<Ct;At++){let Tt=At*2,kt=c.vertices[Tt+0],Pt=c.vertices[Tt+1],It=(kt-rt)/wt,Lt=(Pt-ut)/yt;this._positionAttribute.setXYZ(At,kt,Pt,0),this._normalAttribute.setXYZ(At,0,0,1),this._uvAttribute.setXY(At,It,Lt)}for(let At=0,Ct=$;At<Ct;At++){let Tt=At*3,kt=c.elements[Tt+0],Pt=c.elements[Tt+1],It=c.elements[Tt+2];this._indexAttribute.setX(Tt+0,kt),this._indexAttribute.setX(Tt+1,Pt),this._indexAttribute.setX(Tt+2,It)}}this.setAttribute("position",this._positionAttribute),this.setAttribute("normal",this._normalAttribute),this.setAttribute("uv",this._uvAttribute),this.setIndex(this._indexAttribute),this.setDrawRange(0,((c==null?void 0:c.elementCount)??1)*3)}clone(){let e=new Ld(this._shape,this._curveSegments);return e.userData=Ea(this.userData),e}},Bd=class extends Hl{constructor(e,i,s=0,a=12,o=3,c=Gt.ODD){super(e,i,s,a,o,c),this.type="ShapeGeometry"}_computeBufferEstimatedSize(e){return e.vertexCount*2*(2+this._bevelSegments)}_buildWall(e,i,s){let a=e[0];for(let o=0,c=a.boundary.vertexCount;o<c;o++){let d=this._buildBevelVert(i,a,o),g=this._buildBevelVert(i,a,(o+1)%c);s.push(g.topP,d.topN,d.bottomN),s.push(g.topP,d.bottomN,g.bottomP)}}clone(){let e=new Bd(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return e.userData=Ea(this.userData),e}},Gn=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,i){var j,_e;let s=Object.assign({},(i==null?void 0:i.parameters)??{width:100,subdivisions:40,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3,windingRule:Gt.ODD},e.parameters),a=Math.abs(s.width),o=Math.abs(s.height??s.width),c=Math.abs(s.depth??0),d=e.shape??(i==null?void 0:i.shape),g=(d==null?void 0:d.roundness)??s.roundness;d!==void 0&&(d instanceof Xt?(d.width!==a||d.height!==o)&&d.applySize(a,o):d=new Xt(a,o).fromJSON(d),((j=e.parameters)==null?void 0:j.roundness)!==void 0&&((_e=e.parameters)==null?void 0:_e.roundness)>0&&d.update());let b=d??new Xt(a,o);return{parameters:Object.assign(s,{width:a,height:o,depth:c,roundness:g}),shape:b}}static build(e){let{depth:i,extrudeBevelSize:s,extrudeBevelSegments:a,subdivisions:o,roundness:c,windingRule:d}=e.parameters;e.shape.roundness=c;let g;return i<=0?g=new Ld(e.shape,o,{windingRule:d}):g=new Bd(e.shape,i,s,o,a,d),Object.assign(g,{userData:{...e,type:"VectorGeometry"}})}},uI=Math.PI*2,Fd=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,i){let s=Object.assign({},(i==null?void 0:i.parameters)??{width:100,depth:0,spikes:64,angle:360,innerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return s.angle=Me.clamp(s.angle,0,360),{shape:e.shape&&e.shape instanceof Xt?e.shape:new Xt,parameters:Object.assign(s,{width:Math.abs(s.width),height:Math.abs(s.height??s.width),depth:Math.abs(s.depth??0)})}}static build(e){let{width:i,height:s,spikes:a,angle:o,innerRadius:c,depth:d,extrudeBevelSize:g,extrudeBevelSegments:b}=e.parameters,j=e.shape,_e=i*.5,$=s*.5,rt=A7(j,_e,$,o*Math.PI/180,a,c);j.isClosed=!0,j.update();let st;return o===0?(st=new Pe,st.setAttribute("position",new Te([],3))):st=Gn.create({shape:j,parameters:{subdivisions:rt,depth:d,extrudeBevelSize:g,extrudeBevelSegments:b}}),Object.assign(st,{userData:{...e,type:"EllipseGeometry"}})}};function A7(e,i,s,a,o,c){if(a>=uI)return o>30||o%4===0?(E7(e,i,s,c),Math.round(o/4)):cI(e,a,o,i,s,c);a=Math.max(a,.001);let d={x:0,y:s},g=a+Math.PI*.5,b={x:Math.cos(g)*i,y:Math.sin(g)*s},j=eI({px:d.x,py:d.y,cx:b.x,cy:b.y,rx:i,ry:s,largeArcFlag:a>Math.PI,sweepFlag:!0});return o>30||o%j.length===0?_7(e,d.x,d.y,j,o,i,s,c):cI(e,a,o,i,s,c)}function _7(e,i,s,a,o,c,d,g){let b=Math.round(o/a.length);e.addPoint(Nd(i,s));for(let j=0,_e=a.length;j<_e;j++){let $=a[j],rt=e.points[j],st=Nd($.x,$.y);rt.controls[1].position.set($.x1,$.y1),st.controls[0].position.set($.x2,$.y2),e.addPoint(st)}return g>0?hI(e,c,d,g):e.addPoint(Nd(0,0)),b}function cI(e,i,s,a,o,c){let d=-i/s;for(let g=0;g<=s;g++){let b=d*g,j=Math.sin(b)*a,_e=Math.cos(b)*o;e.addPoint(Nd(j,_e))}return i<uI?c>0?hI(e,a,o,c):e.addPoint(Nd(0,0)):(e.removePoint(e.points[e.points.length-1]),c>0&&dI(e,a,o,c)),1}function E7(e,i,s,a=0,o=0,c=0){let d=.5522847498,g=i*d,b=s*d;e.addPoint(N0(o-i,c,o-i,c-b,o-i,c+b)),e.addPoint(N0(o,c+s,o-g,c+s,o+g,c+s)),e.addPoint(N0(o+i,c,o+i,c+b,o+i,c-b)),e.addPoint(N0(o,c-s,o+g,c-s,o-g,c-s)),a>0&&dI(e,i,s,a)}function Nd(e,i){return new to(Me.generateUUID(),new z$1(e,i))}function N0(e,i,s,a,o,c){let d=Nd(e,i);return d.controls[0].position.set(s,a),d.controls[1].position.set(o,c),d}function hI(e,i,s,a){fI(e,i,s,a).forEach(o=>e.addPoint(o))}function dI(e,i,s,a){let o=fI(e,i,s,a),c=new Xt;o.forEach(d=>c.addPoint(d)),c.isClosed=!0,e.shapeHoles.push(c)}function fI(e,i,s,a){let o=a*i/100,c=o*(Math.abs(s)/Math.abs(i)),d=new z$1(o/i,c/s),g=e.points.map(b=>{let j=b.clone();return j.uuid=Me.generateUUID(),j}).reverse();return g.forEach(b=>{b.position.multiply(d);let j=b.controls[0].position.clone().multiply(d),_e=b.controls[1].position.clone().multiply(d);b.controls[0].position.copy(_e),b.controls[1].position.copy(j)}),g}var pI=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,i){let s=Object.assign({},(i==null?void 0:i.parameters)??{width:100,revolutions:2,segments:40,pathRadius:10,pathType:0,pathSegments:30,cornerRadius:30,cornerSegments:4},e.parameters),a=Math.abs(s.width),o=Math.abs(s.height??a),c=Math.abs(s.depth??a),d=Math.abs(Math.min(a,c))/2;return{parameters:Object.assign(s,{width:a,height:o,depth:c,radius:d,segments:Math.round(s.segments),pathSegments:Math.round(s.pathSegments),cornerSegments:Math.round(s.cornerSegments)})}}static build(e){let{width:i,height:s,depth:a,radius:o,revolutions:c,segments:d,pathRadius:g,pathType:b,pathSegments:j,cornerRadius:_e,cornerSegments:$}=e.parameters,rt=new _m(!1,i,s,a,o,c,d,g,b,j,_e,$);return Object.assign(rt,{userData:{...e,type:"HelixGeometry"}})}},MA=new _o([0,0,0],1),_m=class extends Pe{constructor(e=!0,i=1,s=1,a=1,o=1,c=1,d=1,g=1,b=1,j=1,_e=1,$=1){if(super(),c===0)return;let rt=e&&c===1;rt&&($=0),_e>100&&(_e=100),_e===0&&($=0);let st=()=>new _,ut=new _,gt=st(),wt=st(),yt=st(),At,Ct,Tt,kt,Pt,It,Lt,Nt,Ht=st(),dr=st(),hs=st(),_s=st(),ds=st(),Nn=st(),us=st(),hn=st(),Ft=s-2*g+.001,Gr=Ft/c,gn=Math.ceil(d*c),un=gn+1,Zn=Ft/gn,xu=-Ft/2,ou=j+1,sp=2*Math.PI/j,wu=Math.PI/2/$,l1=.01,P0=Math.min((1-_e/100)*g,g-l1),B0=g-P0,q1=0,ox=2,qx=$*ox+ox,N_=ou*qx/ox,eS=N_+ou*un,tA=Math.max(0,ou*(un+qx)),[fD,q3,SA]=[3,3,2].map(U_=>Array(tA*U_).fill(0)),wA=[],mO=o-g;function sR(U_,MO){let oI=Math.PI/2;It=MO*Zn,Nt=2*Math.PI*(It%Gr)/Gr+oI,It+=xu,Lt=Math.sin(Nt)*mO,Pt=Math.cos(Nt)*mO,e?U_.set(Pt,Lt,It):U_.set(Pt,It,Lt)}sR(ut,-1e-10),sR(gt,0),Ht.copy(ut),sR(ut,1);let bu=ut.distanceTo(gt),au=rt?0:B0+P0,X1=bu*gn+2*au,eE=P0,bo=X1-au;for(let U_=0;U_<=gn;U_++){sR(wt,U_),hn.subVectors(wt,Ht).normalize(),Ht.copy(wt),Nn.copy(wt).setComponent(+e+1,0).normalize(),us.crossVectors(hn,Nn).normalize();let MO=U_===0,oI=U_===gn,IO=MO?3*Math.PI/2:wu,PL=MO?eE:bo,CL=MO?ou:eS,TL=MO?0:tA-ou,qL=hn.clone().multiplyScalar(MO?-B0:B0).add(wt),e$=hn.clone().multiplyScalar(MO?-1:1).normalize();for(let g0=0;g0<ou;g0++){let tS=g0*sp;if(dr.addVectors(ut.copy(Nn).multiplyScalar(g*Math.cos(tS)),gt.copy(us).multiplyScalar(g*Math.sin(tS))),hs.copy(dr).normalize(),MO||oI){rt||(q1=TL+g0,[0,1,2].forEach(tE=>{fD[q1*3+tE]=qL.getComponent(tE),q3[q1*3+tE]=e$.getComponent(tE)}),SA[q1*2]=+oI,SA[q1*2+1]=g0/j),gt.copy(hs).multiplyScalar(P0),yt.addVectors(wt,gt);for(let tE=0;tE<$;tE++){let pO=tE*wu+IO;_s.addVectors(ut.copy(hn).multiplyScalar(B0*Math.sin(pO)),gt.copy(hs).multiplyScalar(B0*Math.cos(pO))),ds.copy(_s).normalize(),gt.addVectors(yt,_s),_s.normalize(),q1=CL+tE*ou+g0,[0,1,2].forEach(GL=>{fD[q1*3+GL]=gt.getComponent(GL),q3[q1*3+GL]=ds.getComponent(GL)});let jL=+MO+Math.sin(pO);SA[q1*2]=(PL+B0*jL)/X1,SA[q1*2+1]=g0/j}}gt.addVectors(wt,dr),q1=N_+U_*ou+g0,[0,1,2].forEach(tE=>{fD[q1*3+tE]=gt.getComponent(tE),q3[q1*3+tE]=hs.getComponent(tE)}),SA[q1*2]=(au+U_*bu)/X1,SA[q1*2+1]=g0/j}}let C3=un+2*$+ox,[aR,X3]=[+rt,C3-1];for(let U_=aR;U_<=X3-1;U_++){let MO=rt&&U_===X3-1;for(let oI=0;oI<ou-1;oI++)At=U_*ou+oI,Ct=At+1,Tt=(MO?oI:At)+ou,kt=(MO?oI+1:Ct)+ou,U_===0?wA.push(Ct,kt,Tt):U_===C3-2?wA.push(At,Ct,Tt):wA.push(At,Ct,Tt,Ct,kt,Tt)}this.setIndex(wA),this.setAttribute("position",new Te(fD,3)),this.setAttribute("normal",new Te(q3,3)),this.setAttribute("uv",new Te(SA,2))}getClosedTorusIndicesForBooleanOrSubdiv(){let e=this.userData.parameters,i=Math.ceil(e.tubularSegments),s=e.radialSegments+1,a=Array.from(this.getIndex().array),o,c,d,g,b=6*(i-1)*e.radialSegments,j=i,_e=j===i;for(let $=0;$<e.radialSegments;$++)o=j*s+$,c=o+1,d=(_e?$:o)+s,g=(_e?$+1:c)+s,a[b++]=o,a[b++]=c,a[b++]=d,a[b++]=c,a[b++]=g,a[b++]=d;return a.length=b,MA.array=a,MA.count=a.length,MA}},mI=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,i){let s=Object.assign({},(i==null?void 0:i.parameters)??{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(s,{width:Math.abs(s.width),height:Math.abs(s.height??s.width),depth:Math.abs(s.depth??s.width)})}}static build(e){let{width:i,height:s,depth:a,detail:o,corner:c,cornerSides:d}=e.parameters,g=o===0&&c!==0?new Em(i*.5,c,d):new Ju(i*.5,o);return g.scale(1,s/i,a/i),Object.assign(g,{userData:{...e,type:"IcosahedronGeometry"}})}},Em=class extends Ul{constructor(e=1,i=.2,s=4){let a=(1+Math.sqrt(5))/2,o=[-1,a,0,1,a,0,-1,-a,0,1,-a,0,0,-1,a,0,1,a,0,-1,-a,0,1,-a,a,0,-1,a,0,1,-a,0,-1,-a,0,1],c=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],d="IcosahedronGeometry";super(o,c,d,e,i,s),this.type=d}static fromJSON(e){return new Em(e.radius,e.corner,e.cornerSides)}},gI=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,i){var a;(((a=e.parameters)==null?void 0:a.points)??[]).forEach(o=>{Array.isArray(o)&&(o.x=o[0],o.y=o[1])});let s=Object.assign({},(i==null?void 0:i.parameters)??{width:100,segments:64,verticalSegments:64,points:[{x:0,y:-50,id:0},{x:50,y:-50,id:1},{x:50,y:50,id:2},{x:0,y:50,id:3}]},e.parameters);return{parameters:Object.assign(s,{width:Math.abs(s.width),height:Math.abs(s.height??s.width),depth:Math.abs(s.depth??s.width)})}}static build(e){let{points:i,segments:s,verticalSegments:a}=e.parameters,o=new xa;o.moveTo(i[0].x,i[0].y),o.bezierCurveTo(i[1].x,i[1].y,i[2].x,i[2].y,i[3].x,i[3].y);let c=new Xu(o.extractPoints(a).shape,s);return c.rotateZ(Math.PI),Object.assign(c,{userData:{...e,type:"LatheGeometry"}})}},Go=new ce$1,CA=new _t,F0=new _,Wl=class extends fr$2{constructor(){super(),this.uuid=Me.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}applyMatrix4(e){let i=new nr().getNormalMatrix(e);for(let s=0,a=this.vertices.length;s<a;s++)this.vertices[s].applyMatrix4(e);for(let s=0,a=this.faces.length;s<a;s++){let o=this.faces[s];o.normal.applyMatrix3(i).normalize();for(let c=0,d=o.vertexNormals.length;c<d;c++)o.vertexNormals[c].applyMatrix3(i).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this}rotateX(e){return Go.makeRotationX(e),this.applyMatrix4(Go),this}rotateY(e){return Go.makeRotationY(e),this.applyMatrix4(Go),this}rotateZ(e){return Go.makeRotationZ(e),this.applyMatrix4(Go),this}translate(e,i,s){return Go.makeTranslation(e,i,s),this.applyMatrix4(Go),this}scale(e,i,s){return Go.makeScale(e,i,s),this.applyMatrix4(Go),this}lookAt(e){return CA.lookAt(e),CA.updateMatrix(),this.applyMatrix4(CA.matrix),this}fromBufferGeometry(e){let i=this,s=e.index!==null?e.index:void 0,a=e.attributes;if(a.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;let o=a.position,c=a.normal,d=a.color,g=a.uv,b=a.uv2;b!==void 0&&(this.faceVertexUvs[1]=[]);for(let $=0;$<o.count;$++)i.vertices.push(new _().fromBufferAttribute(o,$)),d!==void 0&&i.colors.push(new We().fromBufferAttribute(d,$));function j($,rt,st,ut){let gt=d===void 0?[]:[i.colors[$].clone(),i.colors[rt].clone(),i.colors[st].clone()],wt=c===void 0?[]:[new _().fromBufferAttribute(c,$),new _().fromBufferAttribute(c,rt),new _().fromBufferAttribute(c,st)],yt=new kd($,rt,st,wt,gt,ut);i.faces.push(yt),g!==void 0&&i.faceVertexUvs[0].push([new z$1().fromBufferAttribute(g,$),new z$1().fromBufferAttribute(g,rt),new z$1().fromBufferAttribute(g,st)]),b!==void 0&&i.faceVertexUvs[1].push([new z$1().fromBufferAttribute(b,$),new z$1().fromBufferAttribute(b,rt),new z$1().fromBufferAttribute(b,st)])}let _e=e.groups;if(_e.length>0)for(let $=0;$<_e.length;$++){let rt=_e[$],st=rt.start,ut=rt.count;for(let gt=st,wt=st+ut;gt<wt;gt+=3)s!==void 0?j(s.getX(gt),s.getX(gt+1),s.getX(gt+2),rt.materialIndex):j(gt,gt+1,gt+2,rt.materialIndex)}else if(s!==void 0)for(let $=0;$<s.count;$+=3)j(s.getX($),s.getX($+1),s.getX($+2));else for(let $=0;$<o.count;$+=3)j($,$+1,$+2);return this.computeFaceNormals(),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(F0).negate(),this.translate(F0.x,F0.y,F0.z),this}normalize(){this.computeBoundingSphere();let e=this.boundingSphere.center,i=this.boundingSphere.radius,s=i===0?1:1/i,a=new ce$1;return a.set(s,0,0,-s*e.x,0,s,0,-s*e.y,0,0,s,-s*e.z,0,0,0,1),this.applyMatrix4(a),this}computeFaceNormals(){let e=new _,i=new _;for(let s=0,a=this.faces.length;s<a;s++){let o=this.faces[s],c=this.vertices[o.a],d=this.vertices[o.b],g=this.vertices[o.c];e.subVectors(g,d),i.subVectors(c,d),e.cross(i),e.normalize(),o.normal.copy(e)}}computeVertexNormals(e=!0){let i=new Array(this.vertices.length);for(let s=0,a=this.vertices.length;s<a;s++)i[s]=new _;if(e){let s=new _,a=new _;for(let o=0,c=this.faces.length;o<c;o++){let d=this.faces[o],g=this.vertices[d.a],b=this.vertices[d.b],j=this.vertices[d.c];s.subVectors(j,b),a.subVectors(g,b),s.cross(a),i[d.a].add(s),i[d.b].add(s),i[d.c].add(s)}}else{this.computeFaceNormals();for(let s=0,a=this.faces.length;s<a;s++){let o=this.faces[s];i[o.a].add(o.normal),i[o.b].add(o.normal),i[o.c].add(o.normal)}}for(let s=0,a=this.vertices.length;s<a;s++)i[s].normalize();for(let s=0,a=this.faces.length;s<a;s++){let o=this.faces[s],c=o.vertexNormals;c.length===3?(c[0].copy(i[o.a]),c[1].copy(i[o.b]),c[2].copy(i[o.c])):(c[0]=i[o.a].clone(),c[1]=i[o.b].clone(),c[2]=i[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeFlatVertexNormals(){this.computeFaceNormals();for(let e=0,i=this.faces.length;e<i;e++){let s=this.faces[e],a=s.vertexNormals;a.length===3?(a[0].copy(s.normal),a[1].copy(s.normal),a[2].copy(s.normal)):(a[0]=s.normal.clone(),a[1]=s.normal.clone(),a[2]=s.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeMorphNormals(){for(let i=0,s=this.faces.length;i<s;i++){let a=this.faces[i];a.__originalFaceNormal?a.__originalFaceNormal.copy(a.normal):a.__originalFaceNormal=a.normal.clone(),a.__originalVertexNormals||(a.__originalVertexNormals=[]);for(let o=0,c=a.vertexNormals.length;o<c;o++)a.__originalVertexNormals[o]?a.__originalVertexNormals[o].copy(a.vertexNormals[o]):a.__originalVertexNormals[o]=a.vertexNormals[o].clone()}let e=new Wl;e.faces=this.faces;for(let i=0,s=this.morphTargets.length;i<s;i++){if(!this.morphNormals[i]){this.morphNormals[i]={},this.morphNormals[i].faceNormals=[],this.morphNormals[i].vertexNormals=[];let o=this.morphNormals[i].faceNormals,c=this.morphNormals[i].vertexNormals;for(let d=0,g=this.faces.length;d<g;d++){let b=new _,j={a:new _,b:new _,c:new _};o.push(b),c.push(j)}}let a=this.morphNormals[i];e.vertices=this.morphTargets[i].vertices,e.computeFaceNormals(),e.computeVertexNormals();for(let o=0,c=this.faces.length;o<c;o++){let d=this.faces[o],g=a.faceNormals[o],b=a.vertexNormals[o];g.copy(d.normal),b.a.copy(d.vertexNormals[0]),b.b.copy(d.vertexNormals[1]),b.c.copy(d.vertexNormals[2])}}for(let i=0,s=this.faces.length;i<s;i++){let a=this.faces[i];a.normal=a.__originalFaceNormal,a.vertexNormals=a.__originalVertexNormals}}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Wt),this.boundingBox.setFromPoints(this.vertices)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Br),this.boundingSphere.setFromPoints(this.vertices)}merge(e,i,s=0){if(!(e&&e.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);return}let a,o=this.vertices.length,c=this.vertices,d=e.vertices,g=this.faces,b=e.faces,j=this.colors,_e=e.colors;i!==void 0&&(a=new nr().getNormalMatrix(i));for(let $=0,rt=d.length;$<rt;$++){let st=d[$].clone();i!==void 0&&st.applyMatrix4(i),c.push(st)}for(let $=0,rt=_e.length;$<rt;$++)j.push(_e[$].clone());for(let $=0,rt=b.length;$<rt;$++){let st=b[$],ut,gt,wt=st.vertexNormals,yt=st.vertexColors,At=new kd(st.a+o,st.b+o,st.c+o);At.normal.copy(st.normal),a!==void 0&&At.normal.applyMatrix3(a).normalize();for(let Ct=0,Tt=wt.length;Ct<Tt;Ct++)ut=wt[Ct].clone(),a!==void 0&&ut.applyMatrix3(a).normalize(),At.vertexNormals.push(ut);At.color.copy(st.color);for(let Ct=0,Tt=yt.length;Ct<Tt;Ct++)gt=yt[Ct],At.vertexColors.push(gt.clone());At.materialIndex=st.materialIndex+s,g.push(At)}for(let $=0,rt=e.faceVertexUvs.length;$<rt;$++){let st=e.faceVertexUvs[$];this.faceVertexUvs[$]===void 0&&(this.faceVertexUvs[$]=[]);for(let ut=0,gt=st.length;ut<gt;ut++){let wt=st[ut],yt=[];for(let At=0,Ct=wt.length;At<Ct;At++)yt.push(wt[At].clone());this.faceVertexUvs[$].push(yt)}}}mergeMesh(e){if(!(e&&e.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e);return}e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)}mergeVertices(e=4){let i={},s=[],a=[],o=Math.pow(10,e);for(let g=0,b=this.vertices.length;g<b;g++){let j=this.vertices[g],_e=Math.round(j.x*o)+"_"+Math.round(j.y*o)+"_"+Math.round(j.z*o);i[_e]===void 0?(i[_e]=g,s.push(this.vertices[g]),a[g]=s.length-1):a[g]=a[i[_e]]}let c=[];for(let g=0,b=this.faces.length;g<b;g++){let j=this.faces[g];j.a=a[j.a],j.b=a[j.b],j.c=a[j.c];let _e=[j.a,j.b,j.c];for(let $=0;$<3;$++)if(_e[$]===_e[($+1)%3]){c.push(g);break}}for(let g=c.length-1;g>=0;g--){let b=c[g];this.faces.splice(b,1);for(let j=0,_e=this.faceVertexUvs.length;j<_e;j++)this.faceVertexUvs[j].splice(b,1)}let d=this.vertices.length-s.length;return this.vertices=s,d}setFromPoints(e){this.vertices=[];for(let i=0,s=e.length;i<s;i++){let a=e[i];this.vertices.push(new _(a.x,a.y,a.z||0))}return this}sortFacesByMaterialIndex(){let e=this.faces,i=e.length;for(let g=0;g<i;g++)e[g]._id=g;function s(g,b){return g.materialIndex-b.materialIndex}e.sort(s);let a=this.faceVertexUvs[0],o=this.faceVertexUvs[1],c,d;a&&a.length===i&&(c=[]),o&&o.length===i&&(d=[]);for(let g=0;g<i;g++){let b=e[g]._id;c&&c.push(a[b]),d&&d.push(o[b])}c&&(this.faceVertexUvs[0]=c),d&&(this.faceVertexUvs[1]=d)}toJSON(){let e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),this.parameters!==void 0){let st=this.parameters;for(let ut in st)st[ut]!==void 0&&(e[ut]=st[ut]);return e}let i=[];for(let st=0;st<this.vertices.length;st++){let ut=this.vertices[st];i.push(ut.x,ut.y,ut.z)}let s=[],a=[],o={},c=[],d={},g=[],b={};for(let st=0;st<this.faces.length;st++){let ut=this.faces[st],gt=!0,wt=!1,yt=this.faceVertexUvs[0][st]!==void 0,At=ut.normal.length()>0,Ct=ut.vertexNormals.length>0,Tt=ut.color.r!==1||ut.color.g!==1||ut.color.b!==1,kt=ut.vertexColors.length>0,Pt=0;if(Pt=j(Pt,0,0),Pt=j(Pt,1,gt),Pt=j(Pt,2,wt),Pt=j(Pt,3,yt),Pt=j(Pt,4,At),Pt=j(Pt,5,Ct),Pt=j(Pt,6,Tt),Pt=j(Pt,7,kt),s.push(Pt),s.push(ut.a,ut.b,ut.c),s.push(ut.materialIndex),yt){let It=this.faceVertexUvs[0][st];s.push(rt(It[0]),rt(It[1]),rt(It[2]))}if(At&&s.push(_e(ut.normal)),Ct){let It=ut.vertexNormals;s.push(_e(It[0]),_e(It[1]),_e(It[2]))}if(Tt&&s.push($(ut.color)),kt){let It=ut.vertexColors;s.push($(It[0]),$(It[1]),$(It[2]))}}function j(st,ut,gt){return gt?st|1<<ut:st&~(1<<ut)}function _e(st){let ut=st.x.toString()+st.y.toString()+st.z.toString();return o[ut]!==void 0||(o[ut]=a.length/3,a.push(st.x,st.y,st.z)),o[ut]}function $(st){let ut=st.r.toString()+st.g.toString()+st.b.toString();return d[ut]!==void 0||(d[ut]=c.length,c.push(st.getHex())),d[ut]}function rt(st){let ut=st.x.toString()+st.y.toString();return b[ut]!==void 0||(b[ut]=g.length/2,g.push(st.x,st.y)),b[ut]}return e.data={},e.data.vertices=i,e.data.normals=a,c.length>0&&(e.data.colors=c),g.length>0&&(e.data.uvs=[g]),e.data.faces=s,e}clone(){return new Wl().copy(this)}copy(e){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;let i=e.vertices;for(let $=0,rt=i.length;$<rt;$++)this.vertices.push(i[$].clone());let s=e.colors;for(let $=0,rt=s.length;$<rt;$++)this.colors.push(s[$].clone());let a=e.faces;for(let $=0,rt=a.length;$<rt;$++)this.faces.push(a[$].clone());for(let $=0,rt=e.faceVertexUvs.length;$<rt;$++){let st=e.faceVertexUvs[$];this.faceVertexUvs[$]===void 0&&(this.faceVertexUvs[$]=[]);for(let ut=0,gt=st.length;ut<gt;ut++){let wt=st[ut],yt=[];for(let At=0,Ct=wt.length;At<Ct;At++){let Tt=wt[At];yt.push(Tt.clone())}this.faceVertexUvs[$].push(yt)}}let o=e.morphTargets;for(let $=0,rt=o.length;$<rt;$++){let st={};if(st.name=o[$].name,o[$].vertices!==void 0){st.vertices=[];for(let ut=0,gt=o[$].vertices.length;ut<gt;ut++)st.vertices.push(o[$].vertices[ut].clone())}if(o[$].normals!==void 0){st.normals=[];for(let ut=0,gt=o[$].normals.length;ut<gt;ut++)st.normals.push(o[$].normals[ut].clone())}this.morphTargets.push(st)}let c=e.morphNormals;for(let $=0,rt=c.length;$<rt;$++){let st={};if(c[$].vertexNormals!==void 0){st.vertexNormals=[];for(let ut=0,gt=c[$].vertexNormals.length;ut<gt;ut++){let wt=c[$].vertexNormals[ut],yt={};yt.a=wt.a.clone(),yt.b=wt.b.clone(),yt.c=wt.c.clone(),st.vertexNormals.push(yt)}}if(c[$].faceNormals!==void 0){st.faceNormals=[];for(let ut=0,gt=c[$].faceNormals.length;ut<gt;ut++)st.faceNormals.push(c[$].faceNormals[ut].clone())}this.morphNormals.push(st)}let d=e.skinWeights;for(let $=0,rt=d.length;$<rt;$++)this.skinWeights.push(d[$].clone());let g=e.skinIndices;for(let $=0,rt=g.length;$<rt;$++)this.skinIndices.push(g[$].clone());let b=e.lineDistances;for(let $=0,rt=b.length;$<rt;$++)this.lineDistances.push(b[$]);let j=e.boundingBox;j!==null&&(this.boundingBox=j.clone());let _e=e.boundingSphere;return _e!==null&&(this.boundingSphere=_e.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}toBufferGeometry(){let e=new PA().fromGeometry(this),i=new Pe,s=new Float32Array(e.vertices.length*3);if(i.setAttribute("position",k0.call(new Xe(s,3),e.vertices)),e.normals.length>0){let a=new Float32Array(e.normals.length*3);i.setAttribute("normal",k0.call(new Xe(a,3),e.normals))}if(e.colors.length>0){let a=new Float32Array(e.colors.length*3);i.setAttribute("color",yI.call(new Xe(a,3),e.colors))}if(e.uvs.length>0){let a=new Float32Array(e.uvs.length*2);i.setAttribute("uv",vI.call(new Xe(a,2),e.uvs))}if(e.uvs2.length>0){let a=new Float32Array(e.uvs2.length*2);i.setAttribute("uv2",vI.call(new Xe(a,2),e.uvs2))}i.groups=e.groups;for(let a in e.morphTargets){let o=[],c=e.morphTargets[a];for(let d=0,g=c.length;d<g;d++){let b=c[d],j=new Te(b.data.length*3,3);j.name=b.name,o.push(k0.call(j,b.data))}i.morphAttributes[a]=o}if(e.skinIndices.length>0){let a=new Te(e.skinIndices.length*4,4);i.setAttribute("skinIndex",xI.call(a,e.skinIndices))}if(e.skinWeights.length>0){let a=new Te(e.skinWeights.length*4,4);i.setAttribute("skinWeight",xI.call(a,e.skinWeights))}return e.boundingSphere!==null&&(i.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(i.boundingBox=e.boundingBox.clone()),i}computeTangents(){console.error("THREE.Geometry: .computeTangents() has been removed.")}computeLineDistances(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}applyMatrix(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}dispose(){this.dispatchEvent({type:"dispose"})}static createBufferGeometryFromObject(e){let i=new Pe,s=e.geometry;if(e.isPoints||e.isLine){let a=new Te(s.vertices.length*3,3),o=new Te(s.colors.length*3,3);if(i.setAttribute("position",k0.call(a,s.vertices)),i.setAttribute("color",yI.call(o,s.colors)),s.lineDistances&&s.lineDistances.length===s.vertices.length){let c=new Te(s.lineDistances.length,1);i.setAttribute("lineDistance",T7.call(c,s.lineDistances))}s.boundingSphere!==null&&(i.boundingSphere=s.boundingSphere.clone()),s.boundingBox!==null&&(i.boundingBox=s.boundingBox.clone())}else e.isMesh&&(i=s.toBufferGeometry());return i}};Wl.prototype.isGeometry=!0;var PA=class{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(e){let i=[],s,a,o,c=e.faces;for(a=0;a<c.length;a++){let d=c[a];d.materialIndex!==o&&(o=d.materialIndex,s!==void 0&&(s.count=a*3-s.start,i.push(s)),s={start:a*3,materialIndex:o})}s!==void 0&&(s.count=a*3-s.start,i.push(s)),this.groups=i}fromGeometry(e){let i=e.faces,s=e.vertices,a=e.faceVertexUvs,o=a[0]&&a[0].length>0,c=a[1]&&a[1].length>0,d=e.morphTargets,g=d.length,b;if(g>0){b=[];for(let wt=0;wt<g;wt++)b[wt]={name:d[wt].name,data:[]};this.morphTargets.position=b}let j=e.morphNormals,_e=j.length,$;if(_e>0){$=[];for(let wt=0;wt<_e;wt++)$[wt]={name:j[wt].name,data:[]};this.morphTargets.normal=$}let rt=e.skinIndices,st=e.skinWeights,ut=rt.length===s.length,gt=st.length===s.length;s.length>0&&i.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let wt=0;wt<i.length;wt++){let yt=i[wt];this.vertices.push(s[yt.a],s[yt.b],s[yt.c]);let At=yt.vertexNormals;if(At.length===3)this.normals.push(At[0],At[1],At[2]);else{let Tt=yt.normal;this.normals.push(Tt,Tt,Tt)}let Ct=yt.vertexColors;if(Ct.length===3)this.colors.push(Ct[0],Ct[1],Ct[2]);else{let Tt=yt.color;this.colors.push(Tt,Tt,Tt)}if(o===!0){let Tt=a[0][wt];Tt!==void 0?this.uvs.push(Tt[0],Tt[1],Tt[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",wt),this.uvs.push(new z$1,new z$1,new z$1))}if(c===!0){let Tt=a[1][wt];Tt!==void 0?this.uvs2.push(Tt[0],Tt[1],Tt[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",wt),this.uvs2.push(new z$1,new z$1,new z$1))}for(let Tt=0;Tt<g;Tt++){let kt=d[Tt].vertices;b[Tt].data.push(kt[yt.a],kt[yt.b],kt[yt.c])}for(let Tt=0;Tt<_e;Tt++){let kt=j[Tt].vertexNormals[wt];$[Tt].data.push(kt.a,kt.b,kt.c)}ut&&this.skinIndices.push(rt[yt.a],rt[yt.b],rt[yt.c]),gt&&this.skinWeights.push(st[yt.a],st[yt.b],st[yt.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),this}},kd=class{constructor(e,i,s,a,o,c=0){this.a=e,this.b=i,this.c=s,this.normal=a&&a.isVector3?a:new _,this.vertexNormals=Array.isArray(a)?a:[],this.color=o&&o.isColor?o:new We,this.vertexColors=Array.isArray(o)?o:[],this.materialIndex=c}clone(){return new this.constructor().copy(this)}copy(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(let i=0,s=e.vertexNormals.length;i<s;i++)this.vertexNormals[i]=e.vertexNormals[i].clone();for(let i=0,s=e.vertexColors.length;i<s;i++)this.vertexColors[i]=e.vertexColors[i].clone();return this}};function T7(e){return this.array.set(e),this}function yI(e){let i=this.array,s=0;for(let a=0,o=e.length;a<o;a++){let c=e[a];c===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",a),c=new We),i[s++]=c.r,i[s++]=c.g,i[s++]=c.b}return this}function vI(e){let i=this.array,s=0;for(let a=0,o=e.length;a<o;a++){let c=e[a];c===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",a),c=new z$1),i[s++]=c.x,i[s++]=c.y}return this}function k0(e){let i=this.array,s=0;for(let a=0,o=e.length;a<o;a++){let c=e[a];c===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",a),c=new _),i[s++]=c.x,i[s++]=c.y,i[s++]=c.z}return this}function xI(e){let i=this.array,s=0;for(let a=0,o=e.length;a<o;a++){let c=e[a];c===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",a),c=new Ke),i[s++]=c.x,i[s++]=c.y,i[s++]=c.z,i[s++]=c.w}return this}var M7=["a","b","c"];function C7(e,i){switch(i){case"c":return e.c;case"b":return e.b;case"a":default:return e.a}}function DA(e,i,s){let a=Math.min(e,i),o=Math.max(e,i),c=a+"_"+o;return s.get(c)}function OA(e,i,s,a,o,c){let d=Math.min(e,i),g=Math.max(e,i),b=d+"_"+g,j;if(a.has(b))j=a.get(b);else{let _e=s[d],$=s[g];j={a:_e,b:$,newEdge:null,faces:[]},a.set(b,j)}j.faces.push(o),c[e].edges.push(j),c[i].edges.push(j)}function P7(e,i,s,a){let o,c,d;for(o=0,c=e.length;o<c;o++)s[o]={edges:[]};for(o=0,c=i.length;o<c;o++)d=i[o],OA(d.a,d.b,e,a,d,s),OA(d.b,d.c,e,a,d,s),OA(d.c,d.a,e,a,d,s)}function V0(e,i,s,a,o){e.push(new kd(i,s,a,void 0,void 0,o))}function Vd(e,i){return Math.abs(i-e)/2+Math.min(e,i)}function z0(e,i,s,a){e.push([i.clone(),s.clone(),a.clone()])}var U0=class{constructor(e=1){this.subdivisions=e}modify(e){e instanceof Pe?e=new Wl().fromBufferGeometry(e):e=e.clone(),e.mergeVertices();let i=this.subdivisions;for(;i-- >0;)this._smooth(e);return e.computeFaceNormals(),e.computeVertexNormals(),e}_smooth(e){let i=new _,s,a,o,c,d,g=e.vertices,b=e.faces,j=e.faceVertexUvs[0],_e=j!==void 0&&j.length>0,$=[],rt=new Map;P7(g,b,$,rt);let st=[],ut,gt,wt,yt,At,Ct,Tt;for(let l1 of Array.from(rt.keys())){for(gt=rt.get(l1),wt=new _,At=3/8,Ct=1/8,Tt=gt.faces.length,Tt!=2&&(At=.5,Ct=0,Tt!=1),wt.addVectors(gt.a,gt.b).multiplyScalar(At),i.set(0,0,0),c=0;c<Tt;c++){for(yt=gt.faces[c],d=0;d<3&&(ut=g[C7(yt,M7[d])],!(ut!==gt.a&&ut!==gt.b));d++);ut&&i.add(ut)}i.multiplyScalar(Ct),wt.add(i),gt.newEdge=st.length,st.push(wt)}let kt,Pt,It,Lt,Nt,Ht,dr,hs=[];for(a=0,o=g.length;a<o;a++){for(Ht=g[a],Nt=$[a].edges,s=Nt.length,s==3?kt=3/16:s>3&&(kt=3/(8*s)),Pt=1-s*Number(kt),It=kt,s<=2&&(s==2?(Pt=3/4,It=1/8):s==1||s==0),dr=Ht.clone().multiplyScalar(Pt),i.set(0,0,0),c=0;c<s;c++)Lt=Nt[c],ut=Lt.a!==Ht?Lt.a:Lt.b,i.add(ut);i.multiplyScalar(Number(It)),dr.add(i),hs.push(dr)}let _s=hs.concat(st),ds=hs.length,Nn,us,hn,Ft=[],Gr=[],gn,un,Zn,xu,ou=new z$1,sp=new z$1,wu=new z$1;for(a=0,o=b.length;a<o;a++)yt=b[a],Nn=Number(DA(yt.a,yt.b,rt).newEdge)+ds,us=Number(DA(yt.b,yt.c,rt).newEdge)+ds,hn=Number(DA(yt.c,yt.a,rt).newEdge)+ds,V0(Ft,Nn,us,hn,yt.materialIndex),V0(Ft,yt.a,Nn,hn,yt.materialIndex),V0(Ft,yt.b,us,Nn,yt.materialIndex),V0(Ft,yt.c,hn,us,yt.materialIndex),_e&&(gn=j[a],un=gn[0],Zn=gn[1],xu=gn[2],ou.set(Vd(un.x,Zn.x),Vd(un.y,Zn.y)),sp.set(Vd(Zn.x,xu.x),Vd(Zn.y,xu.y)),wu.set(Vd(un.x,xu.x),Vd(un.y,xu.y)),z0(Gr,ou,sp,wu),z0(Gr,un,ou,wu),z0(Gr,Zn,sp,ou),z0(Gr,xu,wu,sp));e.vertices=_s,e.faces=Ft,_e&&(e.faceVertexUvs[0]=Gr)}},Bi=new _,bI=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,i){let s=e.geometry??(i==null?void 0:i.geometry)??new Pe().copy(new vi(100,100,100)),a;i===void 0?(s.computeBoundingBox(),s.boundingBox.getSize(Bi),a={width:Bi.x,height:Bi.y,depth:Bi.z,subdivisions:0}):a=i.parameters;let o={...a,...e.parameters};return{parameters:{width:Math.abs(o.width),height:Math.abs(o.height),depth:Math.abs(o.depth),subdivisions:Math.abs(o.subdivisions)},geometry:s}}static build(e){let{width:i,height:s,depth:a,subdivisions:o}=e.parameters,c=e.geometry??new Pe().copy(new vi(100,100,100)),d=c.userData.parameters;d===void 0?(c.computeBoundingBox(),c.boundingBox.getSize(Bi)):Bi.set(d.width,d.height,d.depth),(i!==Bi.x||s!==Bi.y||a!==Bi.z)&&c.scale(Bi.x===0?1:i/Bi.x,Bi.y===0?1:s/Bi.y,Bi.z===0?1:a/Bi.z);let g=c.originalGeometry;try{o>0?(g===void 0||(d==null?void 0:d.subdivisions)!==o)&&(g===void 0&&(g=c),c=new U0(o).modify(g).toBufferGeometry()):(g!==void 0&&(c=g),g=void 0,c.getAttribute("normal")===void 0&&c.computeVertexNormals())}catch{g!==void 0&&(c=g),g=void 0,c.getAttribute("normal")===void 0&&c.computeVertexNormals()}return g!==void 0&&Object.assign(c,{originalGeometry:g}),delete e.geometry,Object.assign(c,{userData:{...e,type:"NonParametricGeometry"}})}static loadFromUrl(e,i,s){new oh(s).load(e,a=>{let o=this.normalizeInputs({geometry:a});a.boundingBox.getSize(Bi);let c=100/Bi.x;Object.assign(o.parameters,{width:100,height:Bi.y*c,depth:Bi.z*c}),i(this.build(o))})}},G0=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,i){let s=Object.assign({},(i==null?void 0:i.parameters)??{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters);return{shape:e.shape&&e.shape instanceof Xt?e.shape:new Xt,parameters:Object.assign(s,{width:Math.abs(s.width),height:Math.abs(s.height??s.width),depth:Math.abs(s.depth??0)})}}static build(e){let{width:i,height:s,spikes:a,cornerRadius:o,depth:c,extrudeBevelSize:d,extrudeBevelSegments:g}=e.parameters,b=e.shape,j=i*.5,_e=s*.5,$=0,rt=0,st=2*Math.PI/a;for(let gt=0;gt<a;gt++){let wt=st*gt,yt=$+Math.sin(wt)*j,At=rt+Math.cos(wt)*_e;b.addPoint(b.createPoint(yt,At))}b.isClosed=!0;for(let gt=0,wt=b.points.length;gt<wt;gt++)b.points[gt].roundness=o;b.roundness=o,b.update();let ut=Gn.create({shape:b,parameters:{roundness:o,depth:c,extrudeBevelSize:d,extrudeBevelSegments:g}});return Object.assign(ut,{userData:{...e,type:"PolygonGeometry"}})}},SI=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,i){let s=Object.assign({},(i==null?void 0:i.parameters)??{width:100,radialSegments:4,heightSegments:1,cornerRadius:0,cornerSegments:8,openEnded:!1},e.parameters);return{parameters:Object.assign(s,{width:Math.abs(s.width),height:Math.abs(s.height??s.width),depth:Math.abs(s.depth??s.width)})}}static build(e){let{width:i,height:s,depth:a,radialSegments:o,heightSegments:c,openEnded:d,cornerRadius:g,cornerSegments:b}=e.parameters,j=new RA(i*.5,s,o,c,d,g,b);return j.scale(1,1,a/i),Object.assign(j,{userData:{...e,type:"PyramidGeometry"}})}};function Tm(e,i,s){s.x=e.x*i.x,s.y=e.y,s.z=e.x*i.y}function IA(e,i,s,a,o,c){let d=i.clone().sub(e),g=s.clone().sub(e),b=d.angleTo(g);if(d.normalize(),g.normalize(),a===o){let j=d.add(g).normalize();c.copy(e).addScaledVector(j,a/Math.sin(b/2))}else{let j=d.angleTo(g);c.copy(e),c.addScaledVector(d,o/Math.sin(j)),c.addScaledVector(g,a/Math.sin(j))}}function D7(e,i,s){let a=e.clone().sub(i),o=s.clone().sub(i);return a.projectOnVector(o),a.add(i)}var RA=class extends Pe{constructor(e=.5,i=1,s=4,a=1,o=!1,c=0,d=4){super(),s=Math.floor(Math.max(3,s)),a=Math.floor(a),d=Math.floor(d);let g=[],b=[],j=[],_e=[],$=0,rt=i/2,st=Math.PI/s,ut=e*Math.cos(Math.PI/s),gt=2*Math.PI/s,wt=(s-2)*Math.PI/s,yt=Math.PI-wt,At=new _(0,-rt,0),Ct=new _(0,rt,0),Tt=new z$1(e,-rt),kt=new z$1(ut,-rt),Pt=new z$1(0,Ct.y).sub(kt),It=new z$1(0,Ct.y).sub(Tt),Lt=new z$1(Pt.y,-Pt.x).normalize(),Nt=new z$1(It.y,-It.x).normalize(),Ht=e*Math.cos(Math.PI/s)*Math.tan((Math.PI-Pt.angle())/2)-1e-8;c=Math.min(c,Ht);let dr;{let hn=new _(Lt.x,Lt.y,0),Ft=new _(Math.cos(gt)*hn.x,hn.y,Math.sin(gt)*hn.x);dr=hn.angleTo(Ft)}let hs=c/Math.tan((Math.PI-Pt.angle())/2),_s=c/Math.tan((Math.PI-dr)/2),ds=new _;if(!o){b.push(At.x,At.y,At.z),j.push(0,-1,0),_e.push(0,0);let hn=$++,Ft=[],Gr=Tt.clone(),gn=hs/Math.cos(Math.PI/s);Gr.x-=gn;for(let un=0;un<s;un++){let Zn=un/s*Math.PI*2+st,xu=new z$1(Math.sin(Zn),Math.cos(Zn));Tm(Gr,xu,ds),b.push(ds.x,ds.y,ds.z),j.push(0,-1,0),_e.push(0,0),Ft.push($++)}for(let un=0;un<Ft.length;un++)g.push(Ft[un],hn,Ft[(un+1)%Ft.length])}{let hn=new _,Ft=new _,Gr=new _,gn=new _,un=new _,Zn=new _;for(let xu=0;xu<s;xu++){let ou=xu/s*Math.PI*2+st,sp=(xu+.5)/s*Math.PI*2+st,wu=(xu+1)/s*Math.PI*2+st,l1=new z$1(Math.sin(ou),Math.cos(ou)),P0=new z$1(Math.sin(sp),Math.cos(sp)),B0=new z$1(Math.sin(wu),Math.cos(wu));Tm(Tt,l1,Ft),Tm(Tt,B0,Gr),Tm(Lt,P0,hn),IA(Ct,Ft,Gr,_s,_s,gn),b.push(gn.x,gn.y,gn.z),IA(Ft,Ct,Gr,_s,hs,un),b.push(un.x,un.y,un.z),IA(Gr,Ft,Ct,hs,_s,Zn),b.push(Zn.x,Zn.y,Zn.z),j.push(hn.x,hn.y,hn.z),j.push(hn.x,hn.y,hn.z),j.push(hn.x,hn.y,hn.z),_e.push(0,0),_e.push(0,0),_e.push(0,0);let q1=$++,ox=$++,qx=$++;if(g.push(q1,ox,qx),c>0){{let tA=Ft.clone().add(Gr).multiplyScalar(.5),fD=Ct.clone().sub(tA).normalize(),q3=At.clone().sub(tA).normalize().add(fD).normalize().multiplyScalar(-1),SA=Zn.clone().sub(un);Nn(tA,SA,q3,Pt.angle())}let N_,eS;{let tA=new _;Tm(Nt,B0,tA);let fD=Zn.clone().add(gn).multiplyScalar(.5);fD=D7(fD,Gr,Ct);let q3=Zn.clone().sub(gn);[N_,eS]=Nn(fD,q3,tA,dr,gn.y)}{let tA=N_,fD=tA.clone().setY(0).normalize(),q3=new _(0,-1,0),SA=fD.clone().cross(q3);us(tA,fD,q3,SA)}{let tA=Pt.angle(),fD=Math.PI-tA,q3=Ct.clone();q3.y-=c/Math.sin(tA-Math.PI/2);let SA=new _,wA=[];for(let sR=0;sR<d;sR++){let bu=[],au=Math.PI/2-fD*sR/d,X1=Math.cos(au),eE=Math.sin(au),bo=sp;for(let C3=0;C3<=sR;C3++){let aR=Math.cos(bo),X3=Math.sin(bo);hn.x=X1*X3,hn.y=eE,hn.z=X1*aR,SA.copy(q3).addScaledVector(hn,c),b.push(SA.x,SA.y,SA.z),j.push(hn.x,hn.y,hn.z),_e.push(0,0),bu.push($++),bo+=Math.PI*2/sR/s}wA.push(bu)}eS.reverse(),wA.push(eS);let mO=wA.length-1;for(let sR=0;sR<mO;sR++){let bu=wA[sR],au=wA[sR+1],X1=bu.length-1;g.push(au[1],bu[0],au[0]);for(let eE=1;eE<=X1;eE++)g.push(bu[eE],bu[eE-1],au[eE]),g.push(au[eE+1],bu[eE],au[eE])}}}}}this.setIndex(g),this.setAttribute("position",new Te(b,3)),this.setAttribute("normal",new Te(j,3)),this.setAttribute("uv",new Te(_e,2));function Nn(hn,Ft,Gr,gn,un){let Zn=-gn/2,xu=(Math.PI-gn)/2,ou=Ft.clone().normalize().cross(Gr);hn.addScaledVector(Gr,-c/Math.sin(xu));let sp=new _,wu=new _,l1=1,P0=$,B0=[];for(let q1=0;q1<=d;q1++){let ox=Zn+q1/d*gn;wu.set(0,0,0),wu.addScaledVector(ou,Math.sin(ox)),wu.addScaledVector(Gr,Math.cos(ox));for(let qx=0;qx<=l1;qx++){let N_=qx/l1-.5;if(sp.copy(hn),sp.addScaledVector(Ft,N_),sp.addScaledVector(wu,c),un!=null){let eS=Math.max(0,sp.y-un);sp.addScaledVector(Ft,-eS/Ft.y)}b.push(sp.x,sp.y,sp.z),j.push(wu.x,wu.y,wu.z),_e.push(0,0),qx===0&&B0.push($),$++}}for(let q1=0;q1<d;q1++)for(let ox=0;ox<l1;ox++){let qx=P0+ox+(l1+1)*q1,N_=qx+(l1+1),eS=N_+1,tA=qx+1;g.push(qx,N_,tA),g.push(N_,eS,tA)}return[hn.clone().addScaledVector(Ft,.5),B0]}function us(hn,Ft,Gr,gn){let un=Math.PI/2,Zn=It.angle()-un,xu=[],ou=new _,sp=new _;for(let l1=0;l1<=d;l1++){let P0=[],B0=l1/d;for(let q1=0;q1<=l1;q1++){let ox=((l1?q1/l1:0)-.5)*yt,qx=Math.cos(ox),N_=Math.sin(ox),eS=Math.atan(Math.tan(Zn)*qx),tA=(un+eS)*B0,fD=Math.cos(tA),q3=Math.sin(tA);ou.set(0,0,0),ou.addScaledVector(Ft,q3*qx),ou.addScaledVector(Gr,fD),ou.addScaledVector(gn,q3*N_),sp.copy(hn).addScaledVector(ou,c),b.push(sp.x,sp.y,sp.z),j.push(ou.x,ou.y,ou.z),_e.push(0,0),P0.push($++)}xu.push(P0)}let wu=xu.length-1;for(let l1=0;l1<wu;l1++){let P0=xu[l1],B0=xu[l1+1],q1=P0.length-1;g.push(P0[0],B0[1],B0[0]);for(let ox=1;ox<=q1;ox++)g.push(P0[ox-1],P0[ox],B0[ox]),g.push(P0[ox],B0[ox+1],B0[ox])}}}},zd=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,i){let s=Object.assign({},(i==null?void 0:i.parameters)??{width:100,depth:0,cornerRadius:[0,0,0,0],cornerType:1,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters),a=Object.assign((i==null?void 0:i.ui)??{enabledIndieCorners:!1},e.ui);return{shape:e.shape&&e.shape instanceof Xt?e.shape:new Xt,parameters:Object.assign(s,{width:Math.abs(s.width),height:Math.abs(s.height??s.width),depth:Math.abs(s.depth??0)}),ui:a}}static build(e){let i=e.shape,{width:s,height:a,cornerRadius:o,cornerType:c,depth:d,extrudeBevelSize:g,extrudeBevelSegments:b}=e.parameters,j={x:s*.5,y:a*.5},_e={x:-j.x,y:-j.y},$={x:j.x,y:j.y};function rt(Tt,kt,Pt){return kt>s&&Pt>a?Math.min(Tt*s/kt,Tt*a/Pt):kt>s?Tt*s/kt:Pt>a?Tt*a/Pt:Tt}let st=[];st[0]=o[0]===0?0:rt(o[0],o[0]+o[3],o[0]+o[1]),st[1]=o[1]===0?0:rt(o[1],o[1]+o[2],o[1]+o[0]),st[2]=o[2]===0?0:rt(o[2],o[2]+o[1],o[2]+o[3]),st[3]=o[3]===0?0:rt(o[3],o[3]+o[0],o[3]+o[2]);let ut=_e.x,gt=$.x,wt=$.y,yt=_e.y;i.addPoint(i.createPoint(ut,wt)),i.addPoint(i.createPoint(gt,wt)),i.addPoint(i.createPoint(gt,yt)),i.addPoint(i.createPoint(ut,yt)),i.isClosed=!0;let At=!0;for(let Tt=0,kt=i.points.length;Tt<kt;Tt++)i.points[Tt].roundness=st[Tt],Tt>0&&st[Tt]!==st[Tt-1]&&(At=!1);At&&(i.roundness=st[0]),i.useCubicForRoundedCorners=c!==1,i.update();let Ct=Gn.create({shape:i,parameters:{depth:d,extrudeBevelSize:g,extrudeBevelSegments:b}});return Object.assign(Ct,{userData:{...e,type:"RectangleGeometry"}})}},wI=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,i){let s=Object.assign({},(i==null?void 0:i.parameters)??{width:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:180},e.parameters);return s.thetaLength=Me.clamp(s.thetaLength,0,180),{parameters:Object.assign(s,{width:Math.abs(s.width),height:Math.abs(s.height??s.width),depth:Math.abs(s.depth??s.width)})}}static build(e){let{width:i=100,height:s=i,depth:a=i,widthSegments:o=64,heightSegments:c=64,phiStart:d,phiLength:g,thetaStart:b,thetaLength:j}=e.parameters,_e;return j===0?(_e=new Pe,_e.setAttribute("position",new Te([],3))):_e=new Ys(.5*i,o,c,d,g,b,j*Me.DEG2RAD),_e.scale(1,s/i,a/i),Object.assign(_e,{userData:{...e,type:"SphereGeometry"}})}},AI=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,i){let s=Object.assign({},(i==null?void 0:i.parameters)??{width:100,depth:0,widthSegments:8,heightSegments:8},e.parameters);return{parameters:Object.assign(s,{width:Math.abs(s.width),height:Math.abs(s.height??s.width),depth:0})}}static build(e){let{width:i=100,height:s=i,widthSegments:a=8,heightSegments:o=8}=e.parameters,c=new wn(i,s,a,o);return c.scale(1,1,1),Object.assign(c,{userData:{...e,type:"PlaneGeometry"}})}},_I=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,i){let s=Object.assign({},(i==null?void 0:i.parameters)??{width:100,angle:90,cornerRadius:24,cornerSegments:8},e.parameters);return{parameters:Object.assign(s,{width:Math.abs(s.width),height:Math.abs(s.height??s.width),depth:Math.abs(s.depth??s.width)})}}static build(e){let{width:i,height:s,depth:a,angle:o,cornerRadius:c,cornerSegments:d}=e.parameters,g=new LA(i,s,a,o,c,d);return Object.assign(g,{userData:{...e,type:"BackdropGeometry"}})}},LA=class extends Pe{constructor(e=1,i=1,s=1,a=90,o=10,c=24){super(),this.type="BackdropGeometry";let d=[],g=[],b=[],j=.001;o==0&&(c=1),c=Math.max(1,Math.floor(c)),o=Math.min(o,100),a=Math.min(180-j,a),a*=Math.PI/180;let _e=[],$=Math.PI/2,rt=(l1=0,P0=0,B0=0)=>new _(l1,P0,B0),st=rt(),ut=rt(),[gt,wt,yt]=[i/2,e/2,s/2],At=-wt,Ct=+wt,[Tt,kt,Pt]=[rt(At,-gt,+yt),rt(At,-gt,-yt),rt(At,+gt,-yt)],It=(l1,P0=!1)=>Math.sin(l1-Math.PI/(1+ +P0)),Lt=(l1,P0=!1)=>Math.cos(l1-Math.PI/(1+ +P0));Pt.y=Math.sin(a)*i-gt;let Nt=Math.cos(a)*i-yt,Ht=Tt.z-j;a<=$?(Pt.z=Math.min(Nt,Ht),Pt.z==Ht&&(Pt.y-=(Nt-Ht)/Math.tan($-a))):kt.z=Math.min(kt.z-Nt-yt,Tt.z-j),st.subVectors(Tt,kt),ut.subVectors(Pt,kt);let dr=Math.min(st.length(),ut.length())*o/100,hs=dr*Math.tan(a/2),_s=dr/Math.cos(a/2),ds=st.clone().normalize().add(ut.normalize()).setLength(_s).add(kt);st.set(0,It(a,!0),Lt(a,!0)),_e.push([Pt,st.clone()]);let Nn=(Math.PI-a)/c;for(let l1=0;l1<=c;l1++){let P0=$+a+l1*Nn;st.set(0,Math.sin(P0)*hs,Math.cos(P0)*hs),st.add(ds),ut.set(0,It(P0),Lt(P0)),_e.push([st.clone(),ut.clone()])}_e.push([Tt,rt(0,1,0)]);let us=Math.sin(Nn/2)*hs*2,hn=_e.length-1,Ft=_e[0][0].distanceTo(_e[1][0]),Gr=_e[hn-1][0].distanceTo(_e[hn][0]),gn=Ft+us*c+Gr;_e[0].push(1);for(let l1=0;l1<=c;l1++)_e[l1+1].push(1-(Ft+l1*us)/gn);_e[hn].push(0);let[un,Zn,xu]=_e[0],ou,sp,wu;for(let l1=1;l1<_e.length;l1++)[ou,sp,wu]=_e[l1],d.push(At,un.y,un.z,At,ou.y,ou.z,Ct,un.y,un.z,Ct,un.y,un.z,At,ou.y,ou.z,Ct,ou.y,ou.z),g.push(0,Zn.y,Zn.z,0,sp.y,sp.z,0,Zn.y,Zn.z,0,Zn.y,Zn.z,0,sp.y,sp.z,0,sp.y,sp.z),b.push(0,xu,0,wu,1,xu,1,xu,0,wu,1,wu),[un,Zn,xu]=[ou,sp,wu];this.setAttribute("position",new Te(d,3)),this.setAttribute("normal",new Te(g,3)),this.setAttribute("uv",new Te(b,2))}},j0=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,i){let s=Object.assign({},(i==null?void 0:i.parameters)??{width:100,depth:0,innerRadiusPercent:38.19,spikes:5,cornerRadius:0,angle:360,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return{shape:e.shape&&e.shape instanceof Xt?e.shape:new Xt,parameters:Object.assign(s,{width:Math.abs(s.width),height:Math.abs(s.height??s.width),depth:Math.abs(s.depth??0)})}}static build(e){let{width:i,height:s,innerRadiusPercent:a,spikes:o,cornerRadius:c,angle:d,depth:g,extrudeBevelSize:b,extrudeBevelSegments:j}=e.parameters,_e=e.shape,$=i*.5,rt=s*.5,st=0,ut=0,gt=d*Math.PI/360/o,wt=Math.PI/2*3*-1,yt=$*a/100,At=rt*a/100;if(o===3&&a===50){gt=2*Math.PI/o;for(let Tt=0;Tt<o;Tt++){let kt=gt*Tt,Pt=st+Math.sin(kt)*$,It=ut+Math.cos(kt)*rt;_e.addPoint(_e.createPoint(Pt,It))}}else for(let Tt=0;Tt<o;Tt++){let kt=st+Math.cos(wt)*$,Pt=ut+Math.sin(wt)*rt;_e.addPoint(_e.createPoint(kt,Pt)),wt+=gt,kt=st+Math.cos(wt)*yt,Pt=ut+Math.sin(wt)*At,_e.addPoint(_e.createPoint(kt,Pt)),wt+=gt}_e.isClosed=!0;for(let Tt=0,kt=_e.points.length;Tt<kt;Tt++)_e.points[Tt].roundness=c;_e.roundness=c,_e.update();let Ct=Gn.create({shape:_e,parameters:{roundness:c,depth:g,extrudeBevelSize:b,extrudeBevelSegments:j}});return Object.assign(Ct,{userData:{...e,type:"StarGeometry"}})}},EI=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,i){let s=Object.assign({},(i==null?void 0:i.parameters)??{width:100,depth:0},e.parameters);return{parameters:Object.assign(s,{width:Math.abs(s.width),height:Math.abs(s.height??s.width),depth:Math.abs(s.depth??0)})}}static build(e){let{width:i,height:s}=e.parameters,a=new wn(i,s);return Object.assign(a,{userData:{...e,type:"TextFrameGeometry"}})}},TI=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,i){let s=Object.assign({},(i==null?void 0:i.parameters)??{width:100,radialSegments:32,tubularSegments:64,arc:360,cornerRadius:30,cornerSegments:8},e.parameters),a=Math.abs(s.width),o=Math.abs(s.height??s.width),c=Math.round(Math.abs(s.depth??s.width*.25));return{parameters:Object.assign(s,{width:a,height:o,depth:c})}}static build(e){let{width:i,height:s,depth:a,radialSegments:o,tubularSegments:c,arc:d,cornerRadius:g,cornerSegments:b}=e.parameters,j=O7(i,s,a,i*.5,d,c,0,0,o,g,b);return j.scale(1,s/i,1),Object.assign(j,{userData:{...e,type:"TorusGeometry"}})}};function O7(e,i,s,a,o,c,d,g,b,j,_e){[i,s]=[s,i],d=i/2;let $=Me.clamp(o/360,0,1);if($===0){let rt=new Pe;return rt.setAttribute("position",new Te([],3)),rt}return $===1&&(j=0),new _m(!0,e,i,s,a,$,c,d,g,b,j,_e)}var MI=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,i){let s=Object.assign({},(i==null?void 0:i.parameters)??{width:100,tubularSegments:64,radialSegments:32,p:2,q:3},e.parameters);return{parameters:Object.assign(s,{width:Math.abs(s.width),height:Math.abs(s.height??s.width),depth:Math.abs(s.depth??s.width),tube:s.tube??s.width*.125})}}static build(e){let{width:i,tube:s,tubularSegments:a,radialSegments:o,p:c,q:d}=e.parameters,g=i*.5;g!==s&&(g-=s);let b=new eh(g,s,a,o,c,d);return Object.assign(b,{userData:{...e,type:"TorusKnotGeometry"}})}},CI=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,i){let s=Object.assign({},(i==null?void 0:i.parameters)??{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1,isRect:!1},e.parameters);return{shape:e.shape&&e.shape instanceof Xt?e.shape:new Xt,parameters:Object.assign(s,{width:Math.abs(s.width),height:Math.abs(s.height??s.width*(s.isRect?1:Math.sqrt(3)/2)),depth:Math.abs(s.depth??0)})}}static build(e){let{width:i=100,height:s,cornerRadius:a,depth:o,extrudeBevelSize:c,extrudeBevelSegments:d,isRect:g}=e.parameters,b=e.shape,j=i*.5,_e=s*.5;g?(b.addPoint(b.createPoint(-j,_e)),b.addPoint(b.createPoint(j,-_e)),b.addPoint(b.createPoint(-j,-_e))):(b.addPoint(b.createPoint(0,_e)),b.addPoint(b.createPoint(j,-_e)),b.addPoint(b.createPoint(-j,-_e))),b.isClosed=!0;for(let rt=0,st=b.points.length;rt<st;rt++)b.points[rt].roundness=a;b.roundness=a,b.update();let $=Gn.create({shape:b,parameters:{roundness:a,depth:o,extrudeBevelSize:c,extrudeBevelSegments:d}});return Object.assign($,{userData:{...e,type:"TriangleGeometry"}})}};function PI(e,i){let s=2*Math.PI;return(e%s+s)%s===(i%s+s)%s}var BA=class{add(e,i,s){if(typeof arguments[0]!="string")for(let a in arguments[0])this.add(a,arguments[0][a],arguments[1]);else(Array.isArray(e)?e:[e]).forEach(function(a){this[a]=this[a]||[],i&&this[a][s?"unshift":"push"](i)},this)}run(e,i){this[e]=this[e]||[],this[e].forEach(function(s){s.call(i&&i.context?i.context:i,i)})}},NA=class{constructor(e){this.jsep=e,this.registered={}}register(...e){e.forEach(i=>{if(typeof i!="object"||!i.name||!i.init)throw new Error("Invalid JSEP plugin format");this.registered[i.name]||(i.init(this.jsep),this.registered[i.name]=i)})}},fe$1=class{static get version(){return"1.3.8"}static toString(){return"JavaScript Expression Parser (JSEP) v"+fe$1.version}static addUnaryOp(i){return fe$1.max_unop_len=Math.max(i.length,fe$1.max_unop_len),fe$1.unary_ops[i]=1,fe$1}static addBinaryOp(i,s,a){return fe$1.max_binop_len=Math.max(i.length,fe$1.max_binop_len),fe$1.binary_ops[i]=s,a?fe$1.right_associative.add(i):fe$1.right_associative.delete(i),fe$1}static addIdentifierChar(i){return fe$1.additional_identifier_chars.add(i),fe$1}static addLiteral(i,s){return fe$1.literals[i]=s,fe$1}static removeUnaryOp(i){return delete fe$1.unary_ops[i],i.length===fe$1.max_unop_len&&(fe$1.max_unop_len=fe$1.getMaxKeyLen(fe$1.unary_ops)),fe$1}static removeAllUnaryOps(){return fe$1.unary_ops={},fe$1.max_unop_len=0,fe$1}static removeIdentifierChar(i){return fe$1.additional_identifier_chars.delete(i),fe$1}static removeBinaryOp(i){return delete fe$1.binary_ops[i],i.length===fe$1.max_binop_len&&(fe$1.max_binop_len=fe$1.getMaxKeyLen(fe$1.binary_ops)),fe$1.right_associative.delete(i),fe$1}static removeAllBinaryOps(){return fe$1.binary_ops={},fe$1.max_binop_len=0,fe$1}static removeLiteral(i){return delete fe$1.literals[i],fe$1}static removeAllLiterals(){return fe$1.literals={},fe$1}get char(){return this.expr.charAt(this.index)}get code(){return this.expr.charCodeAt(this.index)}constructor(i){this.expr=i,this.index=0}static parse(i){return new fe$1(i).parse()}static getMaxKeyLen(i){return Math.max(0,...Object.keys(i).map(s=>s.length))}static isDecimalDigit(i){return i>=48&&i<=57}static binaryPrecedence(i){return fe$1.binary_ops[i]||0}static isIdentifierStart(i){return i>=65&&i<=90||i>=97&&i<=122||i>=128&&!fe$1.binary_ops[String.fromCharCode(i)]||fe$1.additional_identifier_chars.has(String.fromCharCode(i))}static isIdentifierPart(i){return fe$1.isIdentifierStart(i)||fe$1.isDecimalDigit(i)}throwError(i){let s=new Error(i+" at character "+this.index);throw s.index=this.index,s.description=i,s}runHook(i,s){if(fe$1.hooks[i]){let a={context:this,node:s};return fe$1.hooks.run(i,a),a.node}return s}searchHook(i){if(fe$1.hooks[i]){let s={context:this};return fe$1.hooks[i].find(function(a){return a.call(s.context,s),s.node}),s.node}}gobbleSpaces(){let i=this.code;for(;i===fe$1.SPACE_CODE||i===fe$1.TAB_CODE||i===fe$1.LF_CODE||i===fe$1.CR_CODE;)i=this.expr.charCodeAt(++this.index);this.runHook("gobble-spaces")}parse(){this.runHook("before-all");let i=this.gobbleExpressions(),s=i.length===1?i[0]:{type:fe$1.COMPOUND,body:i};return this.runHook("after-all",s)}gobbleExpressions(i){let s=[],a,o;for(;this.index<this.expr.length;)if(a=this.code,a===fe$1.SEMCOL_CODE||a===fe$1.COMMA_CODE)this.index++;else if(o=this.gobbleExpression())s.push(o);else if(this.index<this.expr.length){if(a===i)break;this.throwError('Unexpected "'+this.char+'"')}return s}gobbleExpression(){let i=this.searchHook("gobble-expression")||this.gobbleBinaryExpression();return this.gobbleSpaces(),this.runHook("after-expression",i)}gobbleBinaryOp(){this.gobbleSpaces();let i=this.expr.substr(this.index,fe$1.max_binop_len),s=i.length;for(;s>0;){if(fe$1.binary_ops.hasOwnProperty(i)&&(!fe$1.isIdentifierStart(this.code)||this.index+i.length<this.expr.length&&!fe$1.isIdentifierPart(this.expr.charCodeAt(this.index+i.length))))return this.index+=s,i;i=i.substr(0,--s)}return!1}gobbleBinaryExpression(){let i,s,a,o,c,d,g,b,j;if(d=this.gobbleToken(),!d||(s=this.gobbleBinaryOp(),!s))return d;for(c={value:s,prec:fe$1.binaryPrecedence(s),right_a:fe$1.right_associative.has(s)},g=this.gobbleToken(),g||this.throwError("Expected expression after "+s),o=[d,c,g];s=this.gobbleBinaryOp();){if(a=fe$1.binaryPrecedence(s),a===0){this.index-=s.length;break}c={value:s,prec:a,right_a:fe$1.right_associative.has(s)},j=s;let _e=$=>c.right_a&&$.right_a?a>$.prec:a<=$.prec;for(;o.length>2&&_e(o[o.length-2]);)g=o.pop(),s=o.pop().value,d=o.pop(),i={type:fe$1.BINARY_EXP,operator:s,left:d,right:g},o.push(i);i=this.gobbleToken(),i||this.throwError("Expected expression after "+j),o.push(c,i)}for(b=o.length-1,i=o[b];b>1;)i={type:fe$1.BINARY_EXP,operator:o[b-1].value,left:o[b-2],right:i},b-=2;return i}gobbleToken(){let i,s,a,o;if(this.gobbleSpaces(),o=this.searchHook("gobble-token"),o)return this.runHook("after-token",o);if(i=this.code,fe$1.isDecimalDigit(i)||i===fe$1.PERIOD_CODE)return this.gobbleNumericLiteral();if(i===fe$1.SQUOTE_CODE||i===fe$1.DQUOTE_CODE)o=this.gobbleStringLiteral();else if(i===fe$1.OBRACK_CODE)o=this.gobbleArray();else{for(s=this.expr.substr(this.index,fe$1.max_unop_len),a=s.length;a>0;){if(fe$1.unary_ops.hasOwnProperty(s)&&(!fe$1.isIdentifierStart(this.code)||this.index+s.length<this.expr.length&&!fe$1.isIdentifierPart(this.expr.charCodeAt(this.index+s.length)))){this.index+=a;let c=this.gobbleToken();return c||this.throwError("missing unaryOp argument"),this.runHook("after-token",{type:fe$1.UNARY_EXP,operator:s,argument:c,prefix:!0})}s=s.substr(0,--a)}fe$1.isIdentifierStart(i)?(o=this.gobbleIdentifier(),fe$1.literals.hasOwnProperty(o.name)?o={type:fe$1.LITERAL,value:fe$1.literals[o.name],raw:o.name}:o.name===fe$1.this_str&&(o={type:fe$1.THIS_EXP})):i===fe$1.OPAREN_CODE&&(o=this.gobbleGroup())}return o?(o=this.gobbleTokenProperty(o),this.runHook("after-token",o)):this.runHook("after-token",!1)}gobbleTokenProperty(i){this.gobbleSpaces();let s=this.code;for(;s===fe$1.PERIOD_CODE||s===fe$1.OBRACK_CODE||s===fe$1.OPAREN_CODE||s===fe$1.QUMARK_CODE;){let a;if(s===fe$1.QUMARK_CODE){if(this.expr.charCodeAt(this.index+1)!==fe$1.PERIOD_CODE)break;a=!0,this.index+=2,this.gobbleSpaces(),s=this.code}this.index++,s===fe$1.OBRACK_CODE?(i={type:fe$1.MEMBER_EXP,computed:!0,object:i,property:this.gobbleExpression()},this.gobbleSpaces(),s=this.code,s!==fe$1.CBRACK_CODE&&this.throwError("Unclosed ["),this.index++):s===fe$1.OPAREN_CODE?i={type:fe$1.CALL_EXP,arguments:this.gobbleArguments(fe$1.CPAREN_CODE),callee:i}:(s===fe$1.PERIOD_CODE||a)&&(a&&this.index--,this.gobbleSpaces(),i={type:fe$1.MEMBER_EXP,computed:!1,object:i,property:this.gobbleIdentifier()}),a&&(i.optional=!0),this.gobbleSpaces(),s=this.code}return i}gobbleNumericLiteral(){let i="",s,a;for(;fe$1.isDecimalDigit(this.code);)i+=this.expr.charAt(this.index++);if(this.code===fe$1.PERIOD_CODE)for(i+=this.expr.charAt(this.index++);fe$1.isDecimalDigit(this.code);)i+=this.expr.charAt(this.index++);if(s=this.char,s==="e"||s==="E"){for(i+=this.expr.charAt(this.index++),s=this.char,(s==="+"||s==="-")&&(i+=this.expr.charAt(this.index++));fe$1.isDecimalDigit(this.code);)i+=this.expr.charAt(this.index++);fe$1.isDecimalDigit(this.expr.charCodeAt(this.index-1))||this.throwError("Expected exponent ("+i+this.char+")")}return a=this.code,fe$1.isIdentifierStart(a)?this.throwError("Variable names cannot start with a number ("+i+this.char+")"):(a===fe$1.PERIOD_CODE||i.length===1&&i.charCodeAt(0)===fe$1.PERIOD_CODE)&&this.throwError("Unexpected period"),{type:fe$1.LITERAL,value:parseFloat(i),raw:i}}gobbleStringLiteral(){let i="",s=this.index,a=this.expr.charAt(this.index++),o=!1;for(;this.index<this.expr.length;){let c=this.expr.charAt(this.index++);if(c===a){o=!0;break}else if(c==="\\")switch(c=this.expr.charAt(this.index++),c){case"n":i+=`
`;break;case"r":i+="\r";break;case"t":i+="	";break;case"b":i+="\b";break;case"f":i+="\f";break;case"v":i+="\v";break;default:i+=c}else i+=c}return o||this.throwError('Unclosed quote after "'+i+'"'),{type:fe$1.LITERAL,value:i,raw:this.expr.substring(s,this.index)}}gobbleIdentifier(){let i=this.code,s=this.index;for(fe$1.isIdentifierStart(i)?this.index++:this.throwError("Unexpected "+this.char);this.index<this.expr.length&&(i=this.code,fe$1.isIdentifierPart(i));)this.index++;return{type:fe$1.IDENTIFIER,name:this.expr.slice(s,this.index)}}gobbleArguments(i){let s=[],a=!1,o=0;for(;this.index<this.expr.length;){this.gobbleSpaces();let c=this.code;if(c===i){a=!0,this.index++,i===fe$1.CPAREN_CODE&&o&&o>=s.length&&this.throwError("Unexpected token "+String.fromCharCode(i));break}else if(c===fe$1.COMMA_CODE){if(this.index++,o++,o!==s.length){if(i===fe$1.CPAREN_CODE)this.throwError("Unexpected token ,");else if(i===fe$1.CBRACK_CODE)for(let d=s.length;d<o;d++)s.push(null)}}else if(s.length!==o&&o!==0)this.throwError("Expected comma");else{let d=this.gobbleExpression();(!d||d.type===fe$1.COMPOUND)&&this.throwError("Expected comma"),s.push(d)}}return a||this.throwError("Expected "+String.fromCharCode(i)),s}gobbleGroup(){this.index++;let i=this.gobbleExpressions(fe$1.CPAREN_CODE);if(this.code===fe$1.CPAREN_CODE)return this.index++,i.length===1?i[0]:i.length?{type:fe$1.SEQUENCE_EXP,expressions:i}:!1;this.throwError("Unclosed (")}gobbleArray(){return this.index++,{type:fe$1.ARRAY_EXP,elements:this.gobbleArguments(fe$1.CBRACK_CODE)}}},I7=new BA;Object.assign(fe$1,{hooks:I7,plugins:new NA(fe$1),COMPOUND:"Compound",SEQUENCE_EXP:"SequenceExpression",IDENTIFIER:"Identifier",MEMBER_EXP:"MemberExpression",LITERAL:"Literal",THIS_EXP:"ThisExpression",CALL_EXP:"CallExpression",UNARY_EXP:"UnaryExpression",BINARY_EXP:"BinaryExpression",ARRAY_EXP:"ArrayExpression",TAB_CODE:9,LF_CODE:10,CR_CODE:13,SPACE_CODE:32,PERIOD_CODE:46,COMMA_CODE:44,SQUOTE_CODE:39,DQUOTE_CODE:34,OPAREN_CODE:40,CPAREN_CODE:41,OBRACK_CODE:91,CBRACK_CODE:93,QUMARK_CODE:63,SEMCOL_CODE:59,COLON_CODE:58,unary_ops:{"-":1,"!":1,"~":1,"+":1},binary_ops:{"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},right_associative:new Set,additional_identifier_chars:new Set(["$","_"]),literals:{true:!0,false:!1,null:null},this_str:"this"});fe$1.max_unop_len=fe$1.getMaxKeyLen(fe$1.unary_ops);fe$1.max_binop_len=fe$1.getMaxKeyLen(fe$1.binary_ops);var Wc=e=>new fe$1(e).parse(),R7=Object.getOwnPropertyNames(fe$1);R7.forEach(e=>{Wc[e]===void 0&&e!=="prototype"&&(Wc[e]=fe$1[e])});Wc.Jsep=fe$1;var L7="ConditionalExpression",B7={name:"ternary",init(e){e.hooks.add("after-expression",function(i){if(i.node&&this.code===e.QUMARK_CODE){this.index++;let s=i.node,a=this.gobbleExpression();if(a||this.throwError("Expected expression"),this.gobbleSpaces(),this.code===e.COLON_CODE){this.index++;let o=this.gobbleExpression();if(o||this.throwError("Expected expression"),i.node={type:L7,test:s,consequent:a,alternate:o},s.operator&&e.binary_ops[s.operator]<=.9){let c=s;for(;c.right.operator&&e.binary_ops[c.right.operator]<=.9;)c=c.right;i.node.test=c.right,c.right=i.node,i.node=s}}else this.throwError("Expected :")}})}};Wc.plugins.register(B7);var N7=["+","-","*","/","(",")","==","!=",">","<",">=","<=","and","or","!","%","^",","],F7=["0","1","2","3","4","5","6","7","8","9","."],k7=["sin","cos","tan","asin","acos","atan","atan2","sqrt","abs","log","exp","floor","ceil","round","min","max","random"];function V7(e){return typeof e!="string"?!1:!isNaN(e)&&!isNaN(parseFloat(e))}Wc.addBinaryOp("^",11,!0);function H0(e,i,s="number"){let a="";for(let d=0;d<e.length;d++){let g=e[d];if("id"in g){let b=e[d-1];if(d>0&&"id"in b){console.error("Two variables in a row",e);return}let j=i.getVariable(g.id),_e=Yi.getDisplayedValue(j);s==="number"&&Yi.isTextValue(j)&&Array.isArray(j.textValue)&&j.textValue.length===1?_e=parseFloat(_e).toString():s==="boolean"&&Yi.isBoolean(j)?_e=j?"true":"false":s==="boolean"&&Yi.isTextValue(j)&&!Array.isArray(j.textValue)&&(_e='"'+_e+'"'),a+=_e;continue}else if(s==="string"){g.name!=='"'&&g.name!=="+"&&(a+=g.name),g.name==="+"&&a[a.length-1]==="\\"&&(a=a.slice(0,-1)+g.name);continue}if(g.name==="and"){a+="&&";continue}if(g.name==="or"){a+="||";continue}if(g.name==="True"){a+="true";continue}if(g.name==="False"){a+="false";continue}if(s==="boolean"&&!V7(g.name)&&!F7.includes(g.name)&&!N7.includes(g.name)&&!k7.includes(g.name.replace(/\($/g,""))){a+='"'+g.name+'"';continue}a+=g.name}if(s==="string")return a;if(e.length===0){if(s==="number")return 0;if(s==="boolean")return!1}let o;try{o=Wc(a)}catch(d){console.error(a,d);return}let c;try{c=qt(o)}catch(d){console.error(a,o,d)}return c}function qt(e){switch(e.type){case"BinaryExpression":switch(e.operator){case"==":return+(qt(e.left)===qt(e.right));case"!=":return+(qt(e.left)!==qt(e.right));case">":return+(qt(e.left)>qt(e.right));case">=":return+(qt(e.left)>=qt(e.right));case"<":return+(qt(e.left)<qt(e.right));case"<=":return+(qt(e.left)<=qt(e.right));case"+":return qt(e.left)+qt(e.right);case"-":return qt(e.left)-qt(e.right);case"*":return qt(e.left)*qt(e.right);case"/":return qt(e.left)/qt(e.right);case"%":return qt(e.left)%qt(e.right);case"&&":return qt(e.left)&&qt(e.right);case"||":return qt(e.left)||qt(e.right);case"^":return Math.pow(qt(e.left),qt(e.right));default:throw new Error("Unknown operator: "+e.operator)}case"UnaryExpression":switch(e.operator){case"-":return-qt(e.argument);case"!":return+!qt(e.argument);default:throw new Error("Unknown operator: "+e.operator)}case"Identifier":throw new Error("Unknown identifier: "+e.name);case"Literal":return e.value;case"CallExpression":if(e.callee.type==="Identifier"){if(e.callee.name==="random"){let i=0,s=1;if(e.arguments.length>=1)try{i=qt(e.arguments[0])}catch(a){console.warn(a)}if(e.arguments.length>=2)try{s=qt(e.arguments[1])}catch(a){console.warn(a)}return i=Math.min(s,i),s=Math.max(s,i),i+Math.random()*(s-i)}return Math[e.callee.name].apply(null,e.arguments.map(qt))}else throw new Error("Unknown node");default:throw new Error("Unknown node type: "+e.type)}}var z7=new ce$1,U7=new ce$1;function G7(e,i,s){let a=[new _,new _,new _],o=[new _,new _,new _];return e.extractBasis(a[0],a[1],a[2]),i.extractBasis(o[0],o[1],o[2]),a.forEach((c,d)=>{let g=o[d],b=Me.lerp(c.length(),g.length(),s);c.lerp(g,s).setLength(b)}),new ce$1().makeBasis(a[0],a[1],a[2])}var DI=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,i){let s=Object.assign({},(i==null?void 0:i.parameters)??{width:100,height:100,depth:1,subdivisions:12,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters),a=Math.abs(s.width),o=Math.abs(s.height??s.width),c=Math.abs(s.depth??0),d=(i==null?void 0:i.shapeData)??Fd.create({parameters:M1}).userData.shape;return{path:e.path??ed.defaultData(),parameters:Object.assign(s,{width:a,height:o,depth:c,extrusion:{...r0,...s.extrusion}}),shapeData:d}}static build(e){if(e.path.points.length>=2){let i=new FA(e);return Object.assign(i,{userData:{...e,type:"PathGeometry"}})}else return Object.assign(new Pe,{userData:{...e,type:"PathGeometry"}})}},FA=class extends Pe{constructor(e){super(),this.type="PathExtrusionGeometry",this.inputs=e,this.build()}_isGeometryClosed(){return this.inputs.path.isClosed&&this.inputs.parameters.extrusion.depth===1}_isOpenEnded(){let e=this.inputs.parameters.extrusion;return!(this.inputs.path.isClosed&&e.depth===1)||!PI(e.twist,0)||e.startScale!==e.endScale}build(){let e=this._extractPathPoints();if(e.length<2)return;let i=this._computeBasisMatrices(e),{depth:s,offset:a}=this.inputs.parameters.extrusion;s=Math.max(0,Math.min(s,1)),a=Math.max(0,Math.min(a,1));let o=this.inputs.path.isClosed?e.length:e.length-1,c=Math.floor(a*o),d=this.inputs.path.isClosed?Math.ceil((s+a)*o):Math.ceil(Math.min(1,s+a)*o),g=Math.min(Math.max(2,d-c+1),o+2),b=[],j=[];for(let hn=0;hn<g;hn++){let Ft=this.inputs.path.isClosed?(hn+c)%e.length:Math.min(hn+c,e.length-1);b.push(e[Ft].clone()),j.push(i[Ft].clone())}let _e=(hn,Ft,Gr)=>{b[hn]=b[hn].clone().lerp(b[Ft],Gr),j[hn]=G7(j[hn],j[Ft],Gr)},$=0,rt=a*o%1;(!this.inputs.path.isClosed||s<=1)&&(rt||a===0)&&($=rt,_e(0,1,$));let st=0,ut=(a+s)*o%1;if((this.inputs.path.isClosed&&s<=1||!this.inputs.path.isClosed&&a+s<1)&&ut&&(st=ut,_e(b.length-1,b.length-2,1-st)),s===0){let hn=b.length-1;b[hn].copy(b[0]),j[hn].copy(j[0])}this._applyPathModifiers(j,$,st);let{bevel:gt,bevelSides:wt}=this.inputs.parameters.extrusion,yt=gt>0?this.inputs.parameters.extrusion.capType:"flat",At=5;this.inputs.parameters.extrusion.shape.type==="Custom"&&(At=this.inputs.parameters.extrusion.shape.shapeQuality==="low"?5:12);let{regions:Ct,infos:Tt,vertices:kt}=this._computeShapePoints(At),Pt=0,It;yt==="round"&&(It=new Hl(this.inputs.shapeData,2*gt,gt,At,wt,void 0,!0),Pt=It.getAttribute("position").count);let Lt=0,Nt=0;Tt.sort((hn,Ft)=>hn.start-Ft.start),Tt.forEach(hn=>{hn.verticesStart=Lt,hn.verticesCount=hn.continuous.reduce((Ft,Gr,gn)=>Ft+(gn===0||!Gr?2:1),0),Nt+=hn.verticesCount,Lt=Nt});let Ht=Nt*g,dr,hs=0;if(this._isOpenEnded()&&yt==="flat"){try{dr=ro({windingRule:Gt.ODD,elementType:Wr$1.POLYGONS,polySize:3,vertexSize:2,strict:!0,contours:Ct})}catch{dr=TA}hs=dr.vertexCount}let _s=Ht+2*hs+Pt*2,ds=Ht+2*hs,Nn={positions:new Float32Array(_s*3),normals:new Float32Array(_s*3),uvs:new Float32Array(_s*2)},us=[];if(Tt.forEach(hn=>{this._extrudeRegion(hn,kt,j,b,Nn,us,this._isGeometryClosed()&&!this._isOpenEnded())}),dr&&(this._closeEnd(dr,Ht,us,Nn,j[0],b[0],!1),this._closeEnd(dr,Ht+hs,us,Nn,j[j.length-1],b[b.length-1],!0)),It){Nn.positions.set(It.getAttribute("position").array,ds*3),Nn.normals.set(It.getAttribute("normal").array,ds*3),Nn.uvs.set(It.getAttribute("uv").array,ds*2);let hn=us.length;us.push(...It.getIndex().array.map(gn=>gn+ds)),ds+=Pt,Nn.positions.set(It.getAttribute("position").array,ds*3),Nn.normals.set(It.getAttribute("normal").array,ds*3),Nn.uvs.set(It.getAttribute("uv").array,ds*2);let Ft=us.length;us.push(...It.getIndex().array.map(gn=>gn+ds)),this.setAttribute("position",new Xe(Nn.positions,3)),this.setAttribute("normal",new Xe(Nn.normals,3)),this.setAttribute("uv",new Xe(Nn.uvs,2)),this.setIndex(us);let Gr=z7;Gr.copy(j[j.length-1]).setPosition(b[b.length-1]),this.applyMatrix4OnRange(Gr,ds,_s),Gr.copy(j[0]).setPosition(b[0]).multiply(U7.makeScale(1,1,-1)),this.applyMatrix4OnRange(Gr,ds-Pt,ds),this.reverseIndicesOnRange(hn,Ft)}else this.setAttribute("position",new Xe(Nn.positions,3)),this.setAttribute("normal",new Xe(Nn.normals,3)),this.setAttribute("uv",new Xe(Nn.uvs,2)),this.setIndex(us)}_extractPathPoints(){let e=D0(this.inputs.path).getPoints(this.inputs.path.subdivisions);if(e.length<2)return[];let i=[e[0]];return e.forEach(s=>{i[i.length-1].distanceToSquared(s)>.001&&i.push(s)}),this.inputs.path.isClosed&&i[i.length-1].distanceTo(i[0])<.001&&i.pop(),i}_computeBasisMatrices(e){let i=[],s=e.length,a=this.inputs.path.isClosed,o=new _,c=new _,d=new _,g=new _,b=new _(0,1,0);for(let ut=0;ut<s;ut++){let gt=e[ut],wt;ut===0?wt=a?e[e.length-2]:gt.clone().multiplyScalar(2).sub(e[1]):wt=e[ut-1];let yt;ut===s-1?yt=a?e[1]:gt.clone().multiplyScalar(2).sub(e[ut-1]):yt=e[ut+1];let At=gt.clone().sub(wt).normalize(),Ct=yt.clone().sub(gt).normalize(),Tt=At.clone().add(Ct).normalize();d.copy(Tt),ut===0&&(Tt.equals(b)||Tt.clone().negate().equals(b))&&b.set(0,0,1);let kt=b.clone().cross(Tt).normalize(),Pt=Tt.clone().cross(kt).normalize();b.copy(Pt),g.copy(kt),ut===0&&(o.copy(Pt),c.copy(Tt));let It=new ce$1().makeBasis(kt,Pt,Tt);i.push(It)}let j=a?c:d,_e=a?o:new _(0,1,0),$=j.clone().cross(g).normalize(),rt=Math.acos(_e.dot($));if(isNaN(rt))return i;let st=_e.clone().cross($);j.dot(st)>0&&(rt*=-1);for(let ut=1;ut<i.length;ut++){let gt=new ce$1().makeRotationZ(rt*ut/i.length);i[ut].multiply(gt)}return i}_applyPathModifiers(e,i,s){let a=e.length,{angle:o,twist:c,startScale:d,endScale:g}=this.inputs.parameters.extrusion,b=new ce$1,j=new ce$1;return e.forEach((_e,$)=>{let rt=$===0?0:$===a-1?1:($-i)/(a-(s===0?0:1)-(i+(1-s)));b.makeRotationZ(Me.lerp(o,o+c,rt)*Me.DEG2RAD);let st=Me.lerp(d,g,rt);j.makeScale(st,st,st),_e.multiply(b).multiply(j)}),e}_computeShapePoints(e=12,i=Gt.ODD){let s=this.inputs.shapeData,a=s.extractShapePointsToFlatArray([],e),o=s.shapeHoles.map(j=>{let _e=j.extractShapePointsToFlatArray([],e),$=[];for(let rt=_e.length-1;rt>=1;rt-=2){let st=_e[rt-1],ut=_e[rt-0];$.push(st,ut)}return $}),c;try{c=ro({windingRule:i,elementType:Wr$1.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[a]})}catch{c=Am}let d;try{d=ro({windingRule:Gt.ODD,elementType:Wr$1.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...o]})}catch{d=EA}if(!c)throw new Error("error generating geometry");let g=c.elementCount;if(d){c.elementCount+=d.elementCount;for(let j=0;j<d.elements.length;j++){let _e=d.elements[j],$=j%2===0?c.vertexCount:0;c.elements.push(_e+$)}for(let j=0;j<d.vertexIndices.length;j++){let _e=d.vertexIndices[j],$=c.vertexCount;c.vertexIndices.push(_e+$)}for(let j=0;j<d.vertices.length;j++){let _e=d.vertices[j];c.vertices.push(_e)}}for(let j=0,_e=c.vertexCount;j<_e;j++){let $=j*2;c.vertices[$+0],c.vertices[$+1]}let b=[];for(let j=c.elementCount-1;j>=0;j--){let _e=j>=g,$=j*2,rt=c.elements[$+0],st=c.elements[$+1],ut=rt+st,gt={start:rt,count:st,normals:[],isHole:_e,continuous:[],verticesStart:0,verticesCount:0};b.push(gt);let wt=rt,yt=ut-1,At=rt+1,Ct=s.roundedCurves.length;do{let Tt=wt-rt;c.vertices[yt*2+0],c.vertices[yt*2+1];let kt=c.vertices[wt*2+0],Pt=c.vertices[wt*2+1],It=c.vertices[At*2+0],Lt=c.vertices[At*2+1],Nt=kt-It,Ht=Pt-Lt,dr=Math.sqrt(Nt*Nt+Ht*Ht);Nt/=dr,Ht/=dr,gt.normals[Tt*2+0]=-Ht,gt.normals[Tt*2+1]=Nt;let hs=c.vertexIndices[wt];if(Array.isArray(hs))gt.continuous[Tt]=!1;else{let[_s,ds]=s.getCurveIndexFromVertexId(hs-1,!0);if(ds>0&&ds<1)gt.continuous[Tt]=!0;else{let Nn=ds===1?_s+1:_s-1;Nn=(Nn+Ct)%Ct;let us=ds===1?0:1,hn=s.roundedCurves[_s].getTangent(ds),Ft=s.roundedCurves[Nn].getTangent(us);gt.continuous[Tt]=hn.dot(Ft)>.95}}_e&&(gt.normals[Tt*2+0]*=-1,gt.normals[Tt*2+1]*=-1),[yt,wt,At]=[wt,At,At+1],At>=ut&&(At-=st)}while(At!==rt+1)}return{regions:[a,...o],infos:b,vertices:c.vertices}}_insertVertex(e,i,s,a,o){let c=i*2,d=i*3;e.positions[d+0]=s.x,e.positions[d+1]=s.y,e.positions[d+2]=s.z,e.normals[d+0]=a.x,e.normals[d+1]=a.y,e.normals[d+2]=a.z,e.uvs[c+0]=o.x,e.uvs[c+1]=o.y}_extrudeRegion(e,i,s,a,o,c,d){let g=new _,b=new _,j=new _,_e=new _,$=new z$1;s.forEach((st,ut)=>{let gt=a[ut],wt=e.verticesStart*s.length+e.verticesCount*ut;for(let yt=0;yt<e.count;yt++){let At=(e.start+yt)*2;if(g.set(i[At+0],i[At+1],0),j.copy(g).applyMatrix4(st).add(gt),e.continuous[yt])_e.set(e.normals[yt*2+0],e.normals[yt*2+1],0);else{let Ct=yt===0?(e.start+e.count-1)*2:At-2;b.set(i[Ct+0],i[Ct+1],0),_e.copy(g).sub(b),_e.set(-_e.y,_e.x,0),e.isHole||_e.negate()}if(_e.applyMatrix4(st).normalize(),$.set(yt===0?1:yt/e.count,ut/(s.length-1)),this._insertVertex(o,wt,j,_e,$),wt++,!e.continuous[yt]||yt===0){if(yt===0)_e.set(e.normals[yt*2+0],e.normals[yt*2+1],0),$.set(0,ut/(s.length-1));else{let Ct=yt===e.count-1?e.start*2:At+2;b.set(i[Ct+0],i[Ct+1],0),_e.copy(b).sub(g),_e.set(-_e.y,_e.x,0),e.isHole||_e.negate()}_e.applyMatrix4(st).normalize(),this._insertVertex(o,wt,j,_e,$),wt++}}});let rt=s.length-1;for(let st=0;st<rt;st++){let ut=e.verticesStart*s.length+e.verticesCount*st,gt=e.verticesStart*s.length+e.verticesCount*(st+1),wt=0;for(let yt=0;yt<e.count;yt++){(!e.continuous[yt]||yt===0)&&wt++;let At=yt===e.count-1?0:wt+1,Ct=ut+wt,Tt=ut+At,kt=gt+At,Pt=gt+wt;e.isHole?c.push(Ct,kt,Tt,Ct,Pt,kt):c.push(Ct,Tt,kt,Ct,kt,Pt),wt++}}}_closeEnd(e,i,s,a,o,c,d){let g=e.vertexCount,b=new _(0,0,d?-1:1).applyMatrix4(o),j=new _,_e=new z$1;for(let rt=0;rt<g;rt++){let st=2*rt;j.set(e.vertices[st+0],e.vertices[st+1],0).applyMatrix4(o).add(c),this._insertVertex(a,i+rt,j,b,_e)}let $=e.elements;for(let rt=0;rt<e.elementCount;rt++){let st=3*rt,ut=$[st+0]+i,gt=$[st+(d?1:2)]+i,wt=$[st+(d?2:1)]+i;s.push(ut,gt,wt)}}applyMatrix4OnRange(e,i,s){let a=e.elements,o=new nr().getNormalMatrix(e).elements,c,d,g,b,j=this.attributes.position,_e=this.attributes.normal;if(!j||!_e)return;let $=j.array,rt=_e.array,st=j.itemSize;for(let ut=i*st,gt=s*st;ut<gt;ut+=st){if(ut===i)debugger;c=$[ut+0],d=$[ut+1],g=$[ut+2],b=1/(a[3]*c+a[7]*d+a[11]*g+a[15]),$[ut+0]=(a[0]*c+a[4]*d+a[8]*g+a[12])*b,$[ut+1]=(a[1]*c+a[5]*d+a[9]*g+a[13])*b,$[ut+2]=(a[2]*c+a[6]*d+a[10]*g+a[14])*b,c=rt[ut+0],d=rt[ut+1],g=rt[ut+2],rt[ut+0]=o[0]*c+o[3]*d+o[6]*g,rt[ut+1]=o[1]*c+o[4]*d+o[7]*g,rt[ut+2]=o[2]*c+o[5]*d+o[8]*g}j.needsUpdate=!0,_e.needsUpdate=!0}reverseIndicesOnRange(e,i){let s=this.index;if(s){for(let a=e;a<i;a+=3){let o=s.getX(a),c=s.getX(a+1),d=s.getX(a+2);s.setXYZ(a,d,c,o)}s.needsUpdate=!0}}};function OI(){let e=new Pe;return e.setAttribute("position",new Xe(new Float32Array([]),3)),e.setIndex(new Xe(new Uint16Array([]),1)),e}var H7=OI().attributes,W7=12,q7=1,Ud=class extends Pe{constructor(e,i){super(),this.charWidths=[],this.charCoords=[],this.wrappedText=[],this.isLowResolution=!1,this.vectorShapes=[],Object.assign(this.attributes,H7),this.userData={parameters:e,type:"TextGeometry"};let s=i.getFont(e.font);s!=null&&s.isLoaded?(this.font=s,this.update(e)):this.updateFont(e.font,i).then(()=>{this.update(e),i==null||i.requestRender()})}async updateFont(e,i){let s=i.getFont(e);s&&(this.font=s,await s.loadingPromise)}update(e){let i=this.font;if(this.userData={parameters:e,type:"TextGeometry"},!(i!=null&&i.isLoaded)){console.warn("Cannot update text because its font is not loaded");return}let{width:s,height:a,depth:o,extrudeBevelSize:c,extrudeBevelSegments:d,text:g,textTransform:b}=e,j=Yi.getDisplayedValue(g),_e=b===2?j.toUpperCase():b===3?j.toLowerCase():j,$=Y7(e,i,_e),{shapes:rt,charWidths:st,charCoords:ut}=i.generateShapes($,e),gt=(typeof s=="number"?s:1)*.5,wt=(typeof a=="number"?a:1)*.5,yt=rt.map(Tt=>new Xt().fromShape(Tt,!0));this.vectorShapes=yt;let At=yt.map(Tt=>Gn.create({shape:Tt,parameters:{depth:o,extrudeBevelSegments:d,extrudeBevelSize:c,windingRule:o<=0?Gt.NONZERO:Gt.ODD,subdivisions:this.isLowResolution&&o>0?q7:W7}})),Ct=At.length?Js(At):OI();Ct.translate(-gt,wt,0),this.dispose(),this.wrappedText=$,this.charCoords=ut,this.charWidths=st,this.deleteAttribute("extrudeNormal"),Object.entries(Ct.attributes).forEach(([Tt,kt])=>{this.setAttribute(Tt,kt)}),this.setIndex(Ct.index),this.computeBoundingSphere()}clone(){let e=_n(new Pe,Ud.prototype);return e.copy(this),console.log("CloneGeometry",this,e),e}copy(e){return Object.entries(e.attributes).forEach(([i,s])=>{this.setAttribute(i,s)}),this.setIndex(e.index),this.userData={parameters:{...e.userData.parameters},type:"TextGeometry"},this}async setText(e){this.font&&await this.font.loadingPromise,await this.update({...this.userData.parameters,text:e})}get text(){return this.userData.parameters.text??""}};function Y7(e,i,s){let a=[""],o="";for(let c of s)o+=c,c===" "||c===`
`?(a[a.length-1]+=o,o="",c===`
`&&a.push("")):i.getTextWidth(a[a.length-1]+o,e)>e.width&&(a[a.length-1].length&&a.push(""),i.getTextWidth(a[a.length-1]+o,e)>e.width&&(o.length===1?(a[a.length-1]+=o,o=""):(a[a.length-1]+=o.slice(0,-1),o=o[o.length-1],a.push(""))));return a[a.length-1]+=o,a}var RI,q0=new Promise(e=>{RI=e}),II=!1,W0;function LI(){if(II)return;if(W0)return W0;async function e(){let i="https://unpkg.com/@splinetool/modelling-wasm@1.0.26/build",s=__vitePreload(()=>import("./process-BcW0pGnR.js"),__vite__mapDeps([])),[a,o]=await Promise.all([s,fetch(`${i}/process.wasm`).then(g=>g.arrayBuffer())]),c=a.default,d=await c({wasmBinary:o});RI(d),II=!0}return W0=e(),W0}var X7=["font"];function Va(e,i,s,a){var j;let o,c,d;e.type==="PathGeometry"?(c=JSON.parse(JSON.stringify(e)),d=[[],["extrusion"]]):(c={...e},d=[[]]);for(let _e of d){let $=c;for(let rt of _e)$=$[rt];for(o in $){let rt=$[o];v1(rt)&&!X7.includes(o)&&($[o]=i.getVariable(rt,[a.uuid,"geometry",..._e,o]),v1($[o])&&($[o]=1))}}let g={parameters:c,type:c.type};if(c.type==="PathGeometry")g.path=c.path;else if(c.type==="VectorGeometry"){let _e=Xt.createFromState(c.shape,c.width,c.height);g.shape=_e}else if(c.type==="NonParametricGeometry")c.data.groups&&((j=c.data.groups)==null||j.forEach(_e=>_e.materialIndex=Math.max(_e.materialIndex??0,0))),g.geometry=new oh().parse(c);else if(c.type==="SubdivGeometry"){let _e=new ai(c,s);return _e.data=e,_e}else{if(c.type==="TextGeometry")return new Ud(c,i);if(c.type==="UIGeometry")return zd.create({parameters:{width:c.width,height:c.height,cornerRadius:c.cornerRadius,cornerType:c.cornerType}})}let b;try{b=kA(g)}catch(_e){console.error(_e)}if(!b){let _e=Xt.createFromState($h.defaultData(),100,100);g.shape=_e,b=kA(g)}return b}var Q7=new ce$1;function Mm(e,i,s,a){let o=e.position.array,c=e.normal.array,d=Q7.makeScale(i,s,a).invert().elements,g,b,j;for(var _e=0,$=o.length;_e<$;_e+=3)o[_e]*=i,o[_e+1]*=s,o[_e+2]*=a,g=c[_e],b=c[_e+1],j=c[_e+2],c[_e]=d[0]*g+d[4]*b+d[8]*j,c[_e+1]=d[1]*g+d[5]*b+d[9]*j,c[_e+2]=d[2]*g+d[6]*b+d[10]*j;e.position.needsUpdate=!0,e.normal.needsUpdate=!0}var Y0=new Wt,Gd=new _,ct;q0.then(e=>{ct=e});var BI=new Float32Array([10,10,0,-10,10,0,-10,-10,0,10,-10,0]),NI=new Uint32Array([0,1,2,3]),FI=new Uint8Array([4]),ai=class extends Pe{constructor(e,i){super(),this.data=e,this.flatShading=i,this.subdivPointer=0,this.rebuild(),this.freeSubdivPointer()}mutateDirectlyScaleBaked(e,i){this.freeSubdivPointer();let s=this.data.scaleBaked,a=Lo.div(i,s);this.subdividedGeometry&&Mm(this.subdividedGeometry.attributes,...a),this.originalGeometry&&Mm(this.originalGeometry.attributes,...a),this.data=e;let o=this.userData.parameters;this.userData.parameters={width:o.width*a[0],height:o.height*a[1],depth:o.depth*a[2]},this.originalGeometry.boundingSphere.center.multiply(Gd.fromArray(a));let c=Gd.set(o.width,o.height,o.depth).length();this.originalGeometry.boundingSphere.radius=c/2}ensureSubdivPointer(){return this.subdivPointer===0&&this.rebuild(),this.subdivPointer}rebuild(){let e,i,s;try{({originalGeometry:e,subdividedGeometry:i,subdivPointer:s}=ai.build(this.data,void 0,!this.flatShading,void 0))}catch{e=new vi(100,100,100),s=0}this.subdivPointer=s,this.originalGeometry=e,this.subdividedGeometry=i??void 0;let a=this.subdividedGeometry??this.originalGeometry;Object.assign(this,a),this.calcBoundingBox()}freeSubdivPointer(){this.subdivPointer&&(ai.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0)}dispose(){super.dispose(),this.freeSubdivPointer()}calcBoundingBox(){let e=this.originalGeometry;e.boundingSphere===null&&(e.boundingSphere=new Br,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=e.boundingSphere));let i=e.attributes.position,s=e.boundingSphere.center;Y0.setFromBufferAttribute(i),Y0.getCenter(s),e.boundingSphere.radius=s.distanceTo(Y0.max),isNaN(e.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),Y0.getSize(Gd);let a={width:Gd.x,height:Gd.y,depth:Gd.z};return this.userData.parameters=a,a}static build(e,i,s,a){let o,c,d,g=(e==null?void 0:e.phongAngle)??35;s===!1&&(g=-1),i&&(ct.free_bvh(i),ct.free_subdivision_surface(i));try{o=ai.allocate(e,a)}catch(b){console.error(b,e),o=ai.allocate({positionWASM:BI,indexWASM:NI,verticesPerFaceWASM:FI},a)}if(ct.set_destination_refinement_level(o,0),c=ai.buildLevel(o,!0,g),e.subdivisions>0)try{ct.set_destination_refinement_level(o,e.subdivisions),d=ai.buildLevel(o,!1,g)}catch{try{ct.set_destination_refinement_level(o,e.subdivisions-1),d=ai.buildLevel(o,!1,g)}catch{d=null}}else d=null;return{subdivPointer:o,originalGeometry:c,subdividedGeometry:d}}static primitiveToQuads(e,i,s){e.widthSegments>16&&(e.widthSegments=16),e.heightSegments>16&&(e.heightSegments=16),e.depthSegments>16&&(e.depthSegments=16),e.radialSegments>16&&(e.radialSegments=16),e.type==="DodecahedronGeometry"&&(e.detail=0);let a=e.shape!==void 0||e.path!==void 0?i.geometry:Va(e,s,!1),o;e.type==="TorusGeometry"&&e.arc===Math.PI*2?o=a.getClosedTorusIndicesForBooleanOrSubdiv():o=a.getIndex();let c,d,g,b;({positions:c,triIndices:b}=qc(a.getAttribute("position"),o));let j;if(e.type==="CylinderGeometry"&&e.cornerRadius===0&&e.hollow===0&&e.openEnded===!1){let _e=e.radialSegments*e.heightSegments*3*2,$=_e+e.radialSegments*3;j=[_e,$]}return{indices:d,verticesPerFace:g}=GA(c,b,a,j),{positions:c,indices:d,verticesPerFace:g}}static allocate(e,i){var Ct;let s,a,o,c=[],d=[];e.positionWASM&&e.positionWASM.length>0?(s=e.positionWASM,a=e.indexWASM,o=e.verticesPerFaceWASM):(s=BI,a=NI,o=FI);let g=s.length,b=a.length,j=o.length,_e=s.length+c.length+d.length,$=a.length+o.length,rt=_e*Float32Array.BYTES_PER_ELEMENT+$*Uint32Array.BYTES_PER_ELEMENT,st=_e*Float32Array.BYTES_PER_ELEMENT,ut=ct._malloc(rt),gt=new Float32Array(ct.HEAPF32.buffer,ut,_e),wt=new Uint32Array(ct.HEAPU32.buffer,ut+st,$);gt.set(s,0),gt.set(c,s.length),gt.set(d,s.length+c.length),wt.set(a,0),wt.set(o,a.length);let yt;(Ct=e==null?void 0:e.scaleBaked)!=null&&Ct.some(Tt=>Tt!==1)&&(yt=new ce$1().makeScale(...e.scaleBaked)),i&&(yt?yt.premultiply(i):yt=i);let At=yt?ct.alloc_subdivision_surface2(ut,g,ut+st,b,ut+st+a.length*Uint32Array.BYTES_PER_ELEMENT,j,yt.elements):ct.alloc_subdivision_surface(ut,g,ut+st,b,ut+st+a.length*Uint32Array.BYTES_PER_ELEMENT,j);return ct._free(ut),At}static buildLevel(e,i,s,a,o){let c=o?ct.get_mesh_data2(e,i?ct.Level.CONTROL:ct.Level.REFINED,s,o.elements):ct.get_mesh_data(e,i?ct.Level.CONTROL:ct.Level.REFINED,s),d=8,g=ct.HEAPU32.subarray(c>>2,(c>>2)+d),b=g.subarray(4,8),j=0,_e=ct.HEAPU32[g[j]>>2],$=ct.HEAPF32.subarray(_e>>2,(_e>>2)+b[j]);j++;let rt=ct.HEAPU32[g[j]>>2],st=ct.HEAPF32.subarray(rt>>2,(rt>>2)+b[j]);j++;let ut=ct.HEAPU32[g[j]>>2],gt=ct.HEAPU32.subarray(ut>>2,(ut>>2)+b[j]);j++;let wt=ct.HEAPU32[g[j]>>2],yt=ct.HEAPU32.subarray(wt>>2,(wt>>2)+b[j]);if(j++,a===void 0){let At=new Pe;if(At.setIndex(new _o(yt,1)),At.setAttribute("position",new Te($,3)),At.setAttribute("normal",new Te(st,3)),i){At.setAttribute("faceMap",new _o(gt,1));let Ct=new Float32Array(st.length/3*4).fill(0);At.setAttribute("color",new Xe(Ct,4))}return ct.free_mesh_data(c),At.userData.type="SubdivGeometry",At}a.getAttribute("position").copyArray($),a.getAttribute("normal").copyArray(st),a.attributes.position.needsUpdate=!0,a.attributes.normal.needsUpdate=!0,ct.free_mesh_data(c)}static freeSubdivPointer(e){ct.free_bvh(e),ct.free_subdivision_surface(e)}static buildControlCageWireframe(e,i,s){let a=ct.get_wireframe_data_for_base_level(e),o=4,c=ct.HEAPU32.subarray(a>>2,(a>>2)+o),d=c.subarray(2,4),g=0,b=ct.HEAPU32[c[g]>>2],j=ct.HEAPF32.subarray(b>>2,(b>>2)+d[g]);g++;let _e=ct.HEAPU32[c[g]>>2],$=ct.HEAPU32.subarray(_e>>2,(_e>>2)+d[g]);if(i===void 0){let rt=new Pe;rt.setAttribute("position",new Te(j,3));let st=new Float32Array(j.length);for(let ut=0,gt=j.length;ut<gt;)st[ut++]=s.r,st[ut++]=s.g,st[ut++]=s.b;return rt.setAttribute("color",new Xe(st,3)),rt.setIndex(new _o($,1)),ct.free_wireframe_data_for_base_level(a),rt}i.getAttribute("position").copyArray(j),i.attributes.position.needsUpdate=!0,ct.free_wireframe_data_for_base_level(a)}static updateCollabMesh(e,i,s){let a=i===0;a||ct.set_destination_refinement_level(e,i);let o=s?ct.get_topological_data2(e,a?ct.Level.CONTROL:ct.Level.REFINED,s.elements):ct.get_topological_data(e,a?ct.Level.CONTROL:ct.Level.REFINED),c=6,d=ct.HEAPU32.subarray(o>>2,(o>>2)+c),g=d.subarray(3,6),b=0,j=ct.HEAPU32[d[b]>>2],_e=new Float32Array(ct.HEAPF32.subarray(j>>2,(j>>2)+g[b]));b++;let $=ct.HEAPU32[d[b]>>2],rt=new Uint32Array(ct.HEAPU32.subarray($>>2,($>>2)+g[b]));b++;let st=ct.HEAPU32[d[b]>>2],ut=new Uint8Array(ct.HEAPU32.subarray(st>>2,(st>>2)+g[b]));return ct.free_topological_data(o),{positions:_e,indices:rt,verticesPerFace:ut}}},kI=["getX","getY","getZ"];function qc(e,i){let s={},a=i?i.count:e.count,o=0,c=[],d=[],g=1e4;for(let j=0;j<a;j++){let _e=i?i.getX(j):j,$="";for(let rt=0;rt<3;rt++)$+=`${~~(e[kI[rt]](_e)*g)},`;if($ in s)c.push(s[$]);else{for(let rt=0;rt<3;rt++)d.push(e[kI[rt]](_e));s[$]=o,c.push(o),o++}}let b=[];for(let j=0;j<c.length;j+=3)c[j]===c[j+1]||c[j]===c[j+2]||c[j+1]===c[j+2]||b.push(c[j],c[j+1],c[j+2]);return{positions:d,triIndices:b}}var X0=new _,VA=new _,zA=new _,UA=new _;function GA(e,i,s,a){let o=[],c=[];if(s.userData.shape!==void 0&&s.userData.parameters.depth===0&&s.userData.shape.shapeHoles.length===0){let b=s.userData.shape.extractShapePointsToFlatArray([]),j=s.userData.parameters.spikes;if(s.userData.type==="EllipseGeometry"&&j<=24&&j%4===0&&s.userData.parameters.angle>=360){let rt=b.length/2/j;b=b.filter((st,ut)=>Math.floor(ut/2)%rt===0)}let _e=0;for(let rt=0;rt<b.length;rt+=2)_e+=(b[rt]-b[(rt===0?b.length:rt)-2])*(b[rt+1]+b[(rt===0?b.length:rt)-1]);e.length=0;let $=0;if(_e<0)for(let rt=0;rt<b.length;rt+=2)e.push(b[rt],b[rt+1],0),o.push($++);else for(let rt=b.length-2;rt>=0;rt-=2)e.push(b[rt],b[rt+1],0),o.push($++);return c.push($),{indices:o,verticesPerFace:c}}let d=new Float32Array([s.userData.parameters.depth])[0],g=0;for(;g<i.length;){if(s.useNgonForTopBottomFaceDuringBake){let b=0;if((e[i[g]*3+2]===d||e[i[g]*3+2]===0)&&b++,(e[i[g+1]*3+2]===d||e[i[g+1]*3+2]===0)&&b++,(e[i[g+2]*3+2]===d||e[i[g+2]*3+2]===0)&&b++,b===3)break}if(i[g+1]===i[g+3]&&i[g+2]===i[g+5]||i[g+0]===i[g+3]&&i[g+2]===i[g+4]){X0.set(e[i[g]*3],e[i[g]*3+1],e[i[g]*3+2]),VA.set(e[i[g+1]*3],e[i[g+1]*3+1],e[i[g+1]*3+2]),zA.set(e[i[g+4]*3],e[i[g+4]*3+1],e[i[g+4]*3+2]),UA.set(e[i[g+5]*3],e[i[g+5]*3+1],e[i[g+5]*3+2]),VA.sub(X0).normalize(),zA.sub(X0).normalize(),UA.sub(X0).normalize();let b=VA.cross(zA).dot(UA);Math.abs(b)>.005||a&&a.some((j,_e)=>_e%2===1?!1:g>=a[_e]&&g<a[_e+1])?(o.push(i[g],i[g+1],i[g+2]),c.push(3),g+=3):(o.push(i[g],i[g+1],i[g+4],i[g+5]),c.push(4),g+=6)}else o.push(i[g],i[g+1],i[g+2]),c.push(3),g+=3}if(s.useNgonForTopBottomFaceDuringBake){let b=[],j=[],_e=0;for(let $=0,rt=0;$<e.length;$+=3,rt++)e[$+2]===0&&(b.push(rt),_e++),e[$+2]===d&&j.push(rt);if(s.userData.parameters.extrudeBevelSize===0){let $=j[0];j[0]=j[1],j[1]=$}b.reverse(),o.push(...b,...j),c.push(_e,_e)}return{indices:o,verticesPerFace:c}}var Ms={};iF(Ms,{calcBoolean:()=>J7,calcBooleanTopological:()=>Z7,freeMeshSet:()=>rY,getMeshSet:()=>$7,hasOpenEdges:()=>eY,transformMeshSet:()=>tY});var VI,zI=new Promise(e=>{VI=e}),Q0;function UI(){if(Q0)return Q0;async function e(){let i="https://unpkg.com/@splinetool/boolean-wasm@1.0.26/build",s=__vitePreload(()=>import("./boolean-w3KXAzn1.js"),__vite__mapDeps([])),[a,o]=await Promise.all([s,fetch(`${i}/boolean.wasm`).then(g=>g.arrayBuffer())]),c=a.default,d=await c({wasmBinary:o});VI(d)}return Q0=e(),Q0}var Et,jd;zI.then(e=>Et=e);function K7(e,i,s){let a,o;e.userData.parameters.type==="TorusGeometry"&&e.userData.parameters.arc===Math.PI*2?o=e.getClosedTorusIndicesForBooleanOrSubdiv():o=e.getIndex();let{positions:c,triIndices:d}=qc(e.getAttribute("position"),o),g;if(i&&s){let{indices:b,verticesPerFace:j}=GA(c,d,e);g=j.length,a=[];for(let _e=0,$=0;_e<g;_e++){a.push(j[_e]);for(let rt=0;rt<j[_e];rt++)a.push(b[$++])}}else{let b=d.length;a=Array(b+b/3),g=0;for(let j=0,_e=0;_e<a.length;)a[_e++]=3,g++,a[_e++]=d[j++],a[_e++]=d[j++],a[_e++]=d[j++]}return{positions:c,faceIndices:a,nFaces:g}}function GI(e){let i=e.length,s=i*Uint32Array.BYTES_PER_ELEMENT,a=i*Float32Array.BYTES_PER_ELEMENT,o=Number.isInteger(e[0])?s:a,c=Et._malloc(o);return(Number.isInteger(e[0])?new Uint32Array(Et.HEAPU32.buffer,c,i):new Float32Array(Et.HEAPF32.buffer,c,i)).set(e,0),c}function jI(e){switch(e){case 0:return Et.OP.UNION;case 1:return Et.OP.INTERSECTION;case 2:return Et.OP.A_MINUS_B;case 3:return Et.OP.B_MINUS_A;case 4:return Et.OP.SYMMETRIC_DIFFERENCE;case 5:return Et.OP.ALL;default:throw new Error("Unknown boolean operation "+e)}}function Z7(e,i){jd===void 0&&(jd=Et.init_csg());let s=GI(e),a=Et.csg_calc_topological(jd,s,e.length,jI(i));Et._free(s);let o=6,c=Et.HEAPU32.subarray(a>>2,(a>>2)+o),d=c.subarray(3,6),g=0,b=Et.HEAPU32[c[g]>>2],j=new Float32Array(Et.HEAPF32.subarray(b>>2,(b>>2)+d[g]));g++;let _e=Et.HEAPU32[c[g]>>2],$=new Uint32Array(Et.HEAPU32.subarray(_e>>2,(_e>>2)+d[g]));g++;let rt=Et.HEAPU32[c[g]>>2],st=new Uint8Array(Et.HEAPU32.subarray(rt>>2,(rt>>2)+d[g]));return Et.free_mesh_data(a),{positions:j,indices:$,verticesPerFace:st}}function J7(e,i,s,a){jd===void 0&&(jd=Et.init_csg());let o=GI(e),c=Et.csg_calc(jd,o,e.length,a,jI(i));Et._free(o);let d=5,g=Et.HEAPU32.subarray(c>>2,(c>>2)+d),b=g.subarray(2,5),j=0,_e=Et.HEAPU32[g[j]>>2],$=Et.HEAPF32.subarray(_e>>2,(_e>>2)+b[j]);j++;let rt=Et.HEAPU32[g[j]>>2],st=Et.HEAPF32.subarray(rt>>2,(rt>>2)+b[j]);j++;let ut=b[j];s.setAttribute("position",new Te($,3)),s.setAttribute("normal",new Te(st,3));let gt=Et.HEAPF32.subarray((c>>2)+5,(c>>2)+5+6);return s.boundingSphere===null&&(s.boundingSphere=new Br),s.boundingSphere.radius=-1,s.userData.parameters={width:gt[3]*2,height:gt[4]*2,depth:gt[5]*2},Et.free_mesh_data(c),ut}function $7(e,i,s){if(Et===void 0)return-1;let a,o,c;if(i&&e.userData.positions!==void 0){let wt=e.userData;c=wt.verticesPerFace.length,a=wt.positions,o=Array(wt.verticesPerFace.reduce((yt,At)=>yt+At,0)+c);for(let yt=0,At=0,Ct=0;yt<wt.verticesPerFace.length;yt++){o[Ct++]=wt.verticesPerFace[yt];for(let Tt=0;Tt<wt.verticesPerFace[yt];Tt++)o[Ct++]=wt.indices[At++]}}else({positions:a,faceIndices:o,nFaces:c}=K7(e,i,s));let d=a.length,g=o.length,b=a.length,j=o.length,_e=b*Float32Array.BYTES_PER_ELEMENT+j*Uint32Array.BYTES_PER_ELEMENT,$=b*Float32Array.BYTES_PER_ELEMENT,rt=Et._malloc(_e),st=new Float32Array(Et.HEAPF32.buffer,rt,b),ut=new Uint32Array(Et.HEAPU32.buffer,rt+$,j);st.set(a,0),ut.set(o,0);let gt=Et.get_csg_mesh(rt,d,rt+$,g,c);return Et._free(rt),gt}function eY(e){return Et.has_open_edges(e)}function tY(e,i){Et.transform_csg_mesh(e,i.elements)}function rY(e){Et.free_csg_mesh(e)}var iY={ConeGeometry:FO,CubeGeometry:kO,CylinderGeometry:O0,DodecahedronGeometry:VO,EllipseGeometry:Fd,HelixGeometry:pI,IcosahedronGeometry:mI,LatheGeometry:gI,NonParametricGeometry:bI,PolygonGeometry:G0,PyramidGeometry:SI,RectangleGeometry:zd,SphereGeometry:wI,PlaneGeometry:AI,BackdropGeometry:_I,StarGeometry:j0,TextFrameGeometry:EI,TorusGeometry:TI,TorusKnotGeometry:MI,TriangleGeometry:CI,PathGeometry:DI,VectorGeometry:Gn},kA=e=>iY[e.type].create(e);function Hd(e){return e!==null&&"booleanOp"in e}var Wd=class extends Pd(sr){constructor(){super(...arguments),this.booleanMeshSetAddress=-1,this.booleanWasTransformed=!1,this.booleanMatrixInvOld=new ce$1}updateVisible(e){super.updateVisible(e),this.visible=!Hd(this.parent)&&this.visible,Hd(this.parent)&&this.parent.invalidateDownstreamBooleanData()}freeBooleanPointer(){this.booleanMeshSetAddress!==-1&&(Ms.freeMeshSet(this.booleanMeshSetAddress),this.booleanMeshSetAddress=-1)}invalidateDownstreamBooleanData(e=!1){return e?this.booleanWasTransformed=!0:this.freeBooleanPointer(),Hd(this.parent)?this.parent.invalidateDownstreamBooleanData():this}invalidateUpstreamBooleanData(){this.freeBooleanPointer();for(let e of this.children)e instanceof Wd&&(e.freeBooleanPointer(),Hd(e)&&e.invalidateUpstreamBooleanData())}updateTransformState(e,i){let s=super.updateTransformState(e,i);return s&&Hd(this.parent)&&this.invalidateDownstreamBooleanData(!0),s}onVariableUpdate(e=!1){super.onVariableUpdate(e),Hd(this.parent)&&this.invalidateDownstreamBooleanData(!0)}},K0=new Wt;function Cm(e,i=0,s=e.count,a,o){let c=1/0,d=1/0,g=1/0,b=-1/0,j=-1/0,_e=-1/0;for(let $=i;$<s;$++){let rt=e.getX($),st=e.getY($),ut=e.getZ($);rt<c&&(c=rt),st<d&&(d=st),ut<g&&(g=ut),rt>b&&(b=rt),st>j&&(j=st),ut>_e&&(_e=ut)}K0.min.set(c,d,g),K0.max.set(b,j,_e),K0.getCenter(a),K0.getSize(o).multiplyScalar(.5)}var nY=new Pe,sY=new ts,pr=class extends Wd{constructor(e,i){super(nY,sY),this.super_Entity(e,i)}updateState(e,i){this.updateState_Entity(e,i)}updateEntityBoxSize(e,i){let s=this.geometry.getAttribute("position");s!==void 0?Cm(s,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:s.count,e,i):super.updateEntityBoxSize(e,i)}},Pm=class{constructor(e){e=e??{},this.name=e.name,this.type=e.type,this.node=e.node,this.size=e.size,this.needsUpdate=e.needsUpdate}get value(){return this.node.value}set value(e){this.node.value=e}},Xi=class{constructor(e){this.hashProperties=void 0,this.isNode=!0,this.shortcuts={},this.uuid=Me.generateUUID(),this.type=e,this.name=""}analyze(e,i){i=i??{},e.analyzing=!0,this.build(e.addFlow(i.slot,i.cache,i.context),"v4"),e.clearVertexNodeCode(),e.clearFragmentNodeCode(),e.removeFlow(),e.analyzing=!1}analyzeAndFlow(e,i,s){return s=s??{},this.analyze(e,s),this.flow(e,i,s)}flow(e,i,s){s=s??{},e.addFlow(s.slot,s.cache,s.context);let a={result:this.build(e,i),code:e.clearNodeCode(),extra:e.context.extra};return e.removeFlow(),a}build(e,i,s){i=i??this.getType(e,i);let a=e.getNodeData(s??this);return e.analyzing&&this.appendDepsNode(e,a,i),e.nodes.indexOf(this)===-1&&e.nodes.push(this),this.updateFrame!==void 0&&e.updaters.indexOf(this)===-1&&e.updaters.push(this),this.generate(e,i,s)}updateFrame(e){}generateReadonly(e,i,s,a,o,c){return""}generate(e,i,s,a,o){return""}parse(e,i,s,a){}appendDepsNode(e,i,s){i.deps=(i.deps||0)+1;let a=e.getTypeLength(s);(a>(i.outputMax||0)||this.getType(e,s))&&(i.outputMax=a,i.output=s)}setName(e){this.name=e}getName(){return this.name}getType(e,i){return i==="sampler2D"||i==="samplerCube"?i:this.type}getHash(){let e="{",i,s;for(i in this)s=this[i],s instanceof Xi&&(e+='"'+i+'":'+s.getHash()+",");if(this.hashProperties)for(let a=0;a<this.hashProperties.length;a++)i=this.hashProperties[a],s=this[i],e+='"'+i+'":"'+String(s)+'",';return e+='"id":"'+this.uuid+'"}',e}},jA=class{constructor(){this.nodes={},this.keywords={}}add(e){this.nodes[e.name]=e}addKeyword(e,i,s){s=s!==void 0?s:!0,this.keywords[e]={callback:i,cache:s}}remove(e){delete this.nodes[e.name]}removeKeyword(e){delete this.keywords[e]}get(e){return this.nodes[e]}getKeyword(e,i){return this.keywords[e].callback(i)}getKeywordData(e){return this.keywords[e]}contains(e){return this.nodes[e]!==void 0}containsKeyword(e){return this.keywords[e]!==void 0}},Ni=new jA,et=class extends Xi{constructor(e,i){super(e),this.scope="",i=i??{},this.shared=i.shared!==void 0?i.shared:!0,this.unique=i.unique!==void 0?i.unique:!1}build(e,i,s,a){if(i=i??this.getType(e),this.getShared(e,i)){let o=this.getUnique(e,i);o&&this.uuid===void 0&&(this.uuid=Me.generateUUID()),s=e.getUUID(s??this.getUUID(),!o);let c=e.getNodeData(s),d=c.output||this.getType(e);if(e.analyzing)return(c.deps||0)>0||this.getLabel()?(this.appendDepsNode(e,c,i),this.generate(e,i,s)):super.build(e,i,s);if(o)return c.name=c.name||super.build(e,i,s),c.name;if(!this.getLabel()&&(!this.getShared(e,d)||e.context.ignoreCache||c.deps===1))return super.build(e,i,s);s=this.getUUID(!1);let g=this.getTemp(e,s);if(g)return e.format(g,d,i);{g=super.generate(e,i,s,c.output,a);let b=this.generate(e,d,s);return e.addNodeCode(g+" = "+b+";"),e.format(g,d,i)}}return super.build(e,i,s)}getShared(e,i){return i!=="sampler2D"&&i!=="samplerCube"&&this.shared}getUnique(e,i){return this.unique}setLabel(e){return this.label=e,this}getLabel(){return this.label}getUUID(e){let i=this.uuid;return typeof this.scope=="string"&&(i=this.scope+"-"+i),i}getTemp(e,i){i=i||this.uuid;let s=e.getVars()[i];return s?s.name:void 0}generate(e,i,s,a,o){return this.getShared(e,i)||console.error("TempNode is not shared"),s=s??this.uuid,e.getTempVar(s,a??this.getType(e),o,this.getLabel()).name}},lr=class extends et{constructor(e,i){i=i??{},i.shared=i.shared!==void 0?i.shared:!1,super(e,i),this.readonly=!1}setReadonly(e){return this.readonly=e,this.hashProperties=this.readonly?["value"]:void 0,this}getReadonly(){return this.readonly}generate(e,i,s,a,o,c){s=e.getUUID(s??this.getUUID()),a=a??this.getType(e);let d=e.getNodeData(s);return this.getReadonly()&&this.generateReadonly!==void 0?this.generateReadonly(e,i,s,a,o,c):e.isShader("vertex")?(d.vertex||(d.vertex=e.createVertexUniform(a,this,o,c,this.getLabel())),e.format(d.vertex.name,a,i)):(d.fragment||(d.fragment=e.createFragmentUniform(a,this,o,c,this.getLabel())),e.format(d.fragment.name,a,i))}},qr=class extends lr{constructor(e=0,i){super("v2"),this.nodeType="Vector2",this.value=e instanceof z$1?e:new z$1(e,i)}get x(){return this.value.x}set x(e){this.value.x=e}get y(){return this.value.y}set y(e){this.value.y=e}generateReadonly(e,i,s,a,o,c){return e.format("vec2("+this.value.x+", "+this.value.y+")",a,i)}},nn=class extends lr{constructor(e=0,i,s){super("v3"),this.nodeType="Vector3",this.value=e instanceof _?e:new _(e,i,s)}get x(){return this.value.x}set x(e){this.value.x=e}get y(){return this.value.y}set y(e){this.value.y=e}get z(){return this.value.z}set z(e){this.value.z=e}generateReadonly(e,i,s,a,o,c){return e.format("vec3("+this.value.x+", "+this.value.y+", "+this.value.z+")",a,i)}},xr$1=class extends We{constructor(i,s,a,o){super(i,s,a),this.isColorA=!0,this.a=o}setRGBA(i,s,a,o){super.setRGB(i,s,a),this.a=o}copy(i){return super.copy(i),this.a="a"in i?i.a:1,this}clone(){return new this.constructor(this.r,this.g,this.b,this.a)}equals(i){return super.equals(i)&&this.a===i.a}setStyle(i,s="srgb"){let a;if(i==="transparent")return this.setRGBA(0,0,0,0),this;if(a=/^((?:rgb|hsl)a?)\(([^)]*)\)/.exec(i)){let o,c=a[1],d=a[2];switch(c){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(d))return this.a=c==="rgba"?parseFloat(o[4]):1,super.setStyle(i,s);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)%\s*,\s*(\d*\.?\d+)%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(d))return this.a=c==="hsla"?parseFloat(o[4]):1,super.setStyle(i,s);break}}return super.setStyle(i,s)}get x(){return this.r}get y(){return this.g}get z(){return this.b}get w(){return this.a}set x(i){this.r=i}set y(i){this.g=i}set z(i){this.b=i}set w(i){this.a=i}},jn=class extends lr{constructor(e){super("v4"),this.nodeType="Vector4",this.value=e instanceof xr$1?e:new xr$1(e.r,e.g,e.b,e.a)}generateReadonly(e,i,s,a,o,c){return e.format("vec4("+this.value.r+", "+this.value.g+", "+this.value.b+", "+this.value.a+")",a,i)}},oY=/^\s*([a-z_0-9]+)\s([a-z_0-9]+)\s*\((.*?)\)/i,HI=/[a-z_0-9]+/gi,Ae=class extends et{constructor(e,i,s,a,o){super(o),this.src="",this.nodeType="Function",this.useKeywords=!0,this.includes=[],this.extensions={},this.keywords={},this.isMethod=o===void 0,this.isInterface=!1,this.parse(e,i,s,a)}getShared(e,i){return!this.isMethod}getType(e){return e.getTypeByFormat(this.type)}getInputByName(e){if(this.inputs){let i=this.inputs.length;for(;i--;)if(this.inputs[i].name===e)return this.inputs[i]}}getIncludeByName(e){if(this.includes){let i=this.includes.length;for(;i--;)if(this.includes[i].name===e)return this.includes[i]}}generate(e,i,s,a,o){let c,d=0,g=this.src;if(this.includes)for(let j=0;j<this.includes.length;j++)e.include(this.includes[j],this);for(let j in this.extensions)e.extensions[j]=!0;let b=[];for(;c=HI.exec(this.src);)b.push(c);for(let j=0;j<b.length;j++){let _e=b[j],$=_e[0],rt=this.isMethod?!this.getInputByName($):!0,st=$;if(this.keywords[$]||this.useKeywords&&rt&&Ni.containsKeyword($)){let ut=this.keywords[$];if(!ut){let gt=Ni.getKeywordData($);gt.cache&&(ut=e.keywords[$]),ut=ut||Ni.getKeyword($,e),gt.cache&&(e.keywords[$]=ut)}st=ut.build(e)}$!==st&&g[_e.index+d-1]!=="."&&(g=g.substring(0,_e.index+d)+st+g.substring(_e.index+$.length+d),d+=st.length-$.length),this.getIncludeByName(st)===void 0&&Ni.contains(st)&&e.include(Ni.get(st))}return i==="source"?g:this.isMethod?(this.isInterface||e.include(this,void 0,g),this.name):e.format("( "+g+" )",this.getType(e),i)}parse(e,i,s,a){if(this.src=e||"",this.includes=i??[],this.extensions=s??{},this.keywords=a??{},this.isMethod){let o=oY.exec(this.src);if(this.inputs=[],o&&o.length==4){this.type=o[1],this.name=o[2];let c=o[3].match(HI);if(c){let d=0;for(;d<c.length;){let g=c[d++],b;g==="in"||g==="out"||g==="inout"?b=c[d++]:(b=g,g="");let j=c[d++];this.inputs.push({name:j,type:b,qualifier:g})}}this.isInterface=this.src.indexOf("{")===-1}else this.type="",this.name=""}}},aY=/^([a-z_0-9]+)\s([a-z_0-9]+)\s?\=?\s?(.*?)(\;|$)/i,HA=class extends et{constructor(e="",i){super(),this.src="",this.useDefine=!1,this.nodeType="Const",this.parse(e||HA.PI,void 0,void 0,void 0,i)}getType(e){return e.getTypeByFormat(this.type)}parse(e,i,s,a,o){this.src=e||"";let c,d,g="",b=aY.exec(e);this.useDefine=o??this.src.charAt(0)==="#",b&&b.length>1?(d=b[1],c=b[2],g=b[3]):(c=this.src,d="f"),this.name=c,this.type=d,this.value=g}build(e,i){if(i==="source"){if(this.value)return this.useDefine?"#define "+this.name+" "+this.value:"const "+this.type+" "+this.name+" = "+this.value+";";if(this.useDefine)return this.src}return e.include(this),e.format(this.name,this.getType(e),i)}generate(e,i,s,a,o){return e.format(this.name,this.getType(e),i)}},Yt=HA;Yt.PI="PI",Yt.PI2="PI2",Yt.RECIPROCAL_PI="RECIPROCAL_PI",Yt.RECIPROCAL_PI2="RECIPROCAL_PI2",Yt.LOG2="LOG2",Yt.EPSILON="EPSILON";var lY=new RegExp(`^structs*([a-z_0-9]+)s*{s*((.|
)*?)}`,"gim"),cY=new RegExp("s*(w*?)s*(w*?)(=|;)","gim"),qd=class extends et{constructor(e=""){super(),this.inputs=[],this.src="",this.nodeType="Struct",this.parse(e)}getType(e){return e.getTypeByFormat(this.name)}getInputByName(e){let i=this.inputs.length;for(;i--;)if(this.inputs[i].name===e)return this.inputs[i]}generate(e,i,s,a,o){return i==="source"?this.src+";":e.format("( "+this.src+" )",this.getType(e),i)}parse(e=""){this.src=e,this.inputs=[];let i=lY.exec(e);if(i){let s=i[2],a;for(;a=cY.exec(s);)this.inputs.push({type:a[1],name:a[2]});this.name=i[1]}else this.name="";this.type=this.name}},Yd=class extends et{constructor(e){super("v2",{shared:!1}),this.nodeType="UV",this.index=e??0}generate(e,i){e.requires.uv[this.index]=!0;let s=this.index>0?this.index+1:"",a=e.isShader("vertex")?"uv"+s:"vUv"+s;return e.format(a,this.getType(e),i)}};Ni.addKeyword("uv",function(){return new Yd});Ni.addKeyword("uv2",function(){return new Yd(1)});var Yc=class extends et{constructor(e,i){super("v4"),this.nodeType="ColorSpace",this.input=e,this.method=i??Yc.LINEAR_TO_LINEAR,this.hashProperties=["method"]}static getEncodingComponents(e){switch(e){case Sn:return["Linear"];case at:return["sRGB"];default:return[]}}generate(e,i){var d;let s=this.input.build(e,"v4"),a=this.getType(e),o=Yc.Nodes[this.method],c=e.include(o);if(c===Yc.LINEAR_TO_LINEAR)return e.format(s,a,i);if(((d=o.inputs)==null?void 0:d.length)===2){let g=this.factor.build(e,"f");return e.format(c+"( "+s+", "+g+" )",a,i)}else return e.format(c+"( "+s+" )",a,i)}fromEncoding(e){let i=Yc.getEncodingComponents(e);this.method="LinearTo"+i[0],this.factor=i[1]}fromDecoding(e){let i=Yc.getEncodingComponents(e);this.method=i[0]+"ToLinear",this.factor=i[1]}},Cn=Yc;Cn.Nodes={LinearToLinear:new Ae(["vec4 LinearToLinear( in vec4 value ) {","	return value;","}"].join(`
`)),sRGBToLinear:new Ae(["vec4 sRGBToLinear( in vec4 value ) {","	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );","}"].join(`
`)),LinearTosRGB:new Ae(["vec4 LinearTosRGB( in vec4 value ) {","	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );","}"].join(`
`))},Cn.LINEAR_TO_LINEAR="LinearToLinear",Cn.SRGB_TO_LINEAR="sRGBToLinear",Cn.LINEAR_TO_SRGB="LinearTosRGB";var Qt=class extends Ae{constructor(e="",i,s,a,o){super(e,o,a,s,i),this.nodeType="Expression"}},Pn=class extends lr{constructor(e=new tr,i,s,a){super("v4",{shared:!0}),this.nodeType="Texture",this.value=e,this.uv=i??new Yd,this.bias=s,this.project=a!==void 0?a:!1}getTexture(e,i){return super.generate(e,i,this.value.uuid,"t")}generate(e,i){if(i==="sampler2D")return this.getTexture(e,i);let s=this.getTexture(e,i),a=this.uv.build(e,this.project?"v4":"v2"),o=this.bias?this.bias.build(e,"f"):void 0;o===void 0&&e.context.bias&&(o=e.context.bias.setTexture(this).build(e,"f"));let c,d;this.project?c="texture2DProj":c=o?"tex2DBias":"tex2D",o?d=c+"( "+s+", "+a+", "+o+" )":d=c+"( "+s+", "+a+" )";let g={include:e.isShader("vertex"),ignoreCache:!0},b=this.getType(e);return e.addContext(g),this.colorSpace=this.colorSpace??new Cn(new Qt("",b)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(d),d=this.colorSpace.build(e,b),e.removeContext(),e.format(d,b,i)}},ke=class extends lr{constructor(e){super("f"),this.nodeType="Float",this.value=e??0}generateReadonly(e,i,s,a,o,c){return e.format(this.value+(this.value%1?"":".0"),a,i)}},Dm=class extends et{constructor(e,i){super(),this.inputs=[],this.nodeType="FunctionCall",this.value=e,this.inputs=i??[]}getFunction(){return this.value}getType(e){return this.value.getType(e)}generate(e,i,s,a,o){a=this.getType(e);let c=this.value,d=c.build(e,i)+"( ",g=[];if(c.inputs){for(let b=0;b<c.inputs.length;b++){let j=c.inputs[b],_e=this.inputs[b]||this.inputs[j.name];g.push(_e.build(e,e.getTypeByFormat(j.type)))}d+=g.join(", ")+" )"}return e.format(d,a,i)}},WA=class extends et{constructor(e,i,s=WA.ADD){super(),this.nodeType="Operator",this.type=e.type,this.a=e,this.b=i,this.op=s}getType(e){let i=this.a.getType(e),s=this.b.getType(e);return e.isTypeMatrix(i)?"v4":e.getTypeLength(s)>e.getTypeLength(i)?s:i}generate(e,i){let s=this.getType(e);this.type=s;let a=this.a.build(e,s),o=this.b.build(e,s);return e.format("( "+a+" "+this.op+" "+o+" )",s,i)}},Qi=WA;Qi.ADD="+",Qi.SUB="-",Qi.MUL="*",Qi.DIV="/";var cr=class extends et{constructor(e,i=cr.ABS,s,a){super(),this.nodeType="Math",this.a=e,typeof i!="string"?this.b=i:a=i,typeof s!="string"?this.c=s:a=s,this.method=a,this.hashProperties=["method"]}getNumInputs(e){switch(this.method){case cr.MIX:case cr.CLAMP:case cr.REFRACT:case cr.SMOOTHSTEP:case cr.FACEFORWARD:return 3;case cr.MIN:case cr.MAX:case cr.MOD:case cr.STEP:case cr.REFLECT:case cr.DISTANCE:case cr.DOT:case cr.CROSS:case cr.POW:return 2;default:return 1}}getInputType(e){let i=e.getTypeLength(this.a.getType(e)),s=this.b?e.getTypeLength(this.b.getType(e)):0,a=this.c?e.getTypeLength(this.c.getType(e)):0;return i>s&&i>a?this.a.getType(e):s>a?this.b.getType(e):this.c.getType(e)}getType(e){switch(this.method){case cr.LENGTH:case cr.DISTANCE:case cr.DOT:return"f";case cr.CROSS:return"v3"}return this.getInputType(e)}generate(e,i){let s,a,o,c=this.a?e.getTypeLength(this.a.getType(e)):0,d=this.b?e.getTypeLength(this.b.getType(e)):0,g=this.c?e.getTypeLength(this.c.getType(e)):0,b=this.getInputType(e),j=this.getType(e);switch(this.type=j,this.method){case cr.NEGATE:return e.format("( -"+this.a.build(e,b)+" )",b,i);case cr.INVERT:return e.format("( 1.0 - "+this.a.build(e,b)+" )",b,i);case cr.CROSS:s=this.a.build(e,"v3"),a=this.b.build(e,"v3");break;case cr.STEP:s=this.a.build(e,c===1?"f":b),a=this.b.build(e,b);break;case cr.MIN:case cr.MAX:case cr.MOD:s=this.a.build(e,b),a=this.b.build(e,d===1?"f":b);break;case cr.REFRACT:s=this.a.build(e,b),a=this.b.build(e,b),o=this.c.build(e,"f");break;case cr.MIX:s=this.a.build(e,b),a=this.b.build(e,b),o=this.c.build(e,g===1?"f":b);break;default:s=this.a.build(e,b),this.b&&(a=this.b.build(e,b)),this.c&&(o=this.c.build(e,b));break}let _e=[];_e.push(s),a&&_e.push(a),o&&_e.push(o);let $=this.getNumInputs(e);if(_e.length!==$)throw Error(`Arguments not match used in "${this.method}". Require ${$}, currently ${_e.length}.`);return e.format(this.method+"( "+_e.join(", ")+" )",j,i)}},pt=cr;pt.RAD="radians",pt.DEG="degrees",pt.EXP="exp",pt.EXP2="exp2",pt.LOG="log",pt.LOG2="log2",pt.SQRT="sqrt",pt.INV_SQRT="inversesqrt",pt.FLOOR="floor",pt.CEIL="ceil",pt.NORMALIZE="normalize",pt.FRACT="fract",pt.SATURATE="saturate",pt.SIN="sin",pt.COS="cos",pt.TAN="tan",pt.ASIN="asin",pt.ACOS="acos",pt.ARCTAN="atan",pt.ABS="abs",pt.SIGN="sign",pt.LENGTH="length",pt.NEGATE="negate",pt.INVERT="invert",pt.MIN="min",pt.MAX="max",pt.MOD="mod",pt.STEP="step",pt.REFLECT="reflect",pt.DISTANCE="distance",pt.DOT="dot",pt.CROSS="cross",pt.POW="pow",pt.MIX="mix",pt.CLAMP="clamp",pt.REFRACT="refract",pt.SMOOTHSTEP="smoothstep",pt.FACEFORWARD="faceforward";var Xd=class extends et{constructor(e,i,s){super("v4"),this.nodeType="TextureCubeUV",this.value=e,this.uv=i,this.bias=s}bilinearCubeUV(e,i,s,a){let o=new Dm(Xd.Nodes.bilinearCubeUV,[i,s,a]);this.colorSpaceTL=this.colorSpaceTL??new Cn(new Qt("","v4")),this.colorSpaceTL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTL.input.parse(o.build(e)+".tl"),this.colorSpaceTR=this.colorSpaceTR??new Cn(new Qt("","v4")),this.colorSpaceTR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTR.input.parse(o.build(e)+".tr"),this.colorSpaceBL=this.colorSpaceBL??new Cn(new Qt("","v4")),this.colorSpaceBL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBL.input.parse(o.build(e)+".bl"),this.colorSpaceBR=this.colorSpaceBR??new Cn(new Qt("","v4")),this.colorSpaceBR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBR.input.parse(o.build(e)+".br");let c={include:e.isShader("vertex"),ignoreCache:!0};e.addContext(c),this.colorSpaceTLExp=new Qt(this.colorSpaceTL.build(e,"v4"),"v4"),this.colorSpaceTRExp=new Qt(this.colorSpaceTR.build(e,"v4"),"v4"),this.colorSpaceBLExp=new Qt(this.colorSpaceBL.build(e,"v4"),"v4"),this.colorSpaceBRExp=new Qt(this.colorSpaceBR.build(e,"v4"),"v4"),e.removeContext();let d=new Qt("mix( mix( cubeUV_TL, cubeUV_TR, cubeUV.f.x ), mix( cubeUV_BL, cubeUV_BR, cubeUV.f.x ), cubeUV.f.y )","v4");return d.keywords.cubeUV_TL=this.colorSpaceTLExp,d.keywords.cubeUV_TR=this.colorSpaceTRExp,d.keywords.cubeUV_BL=this.colorSpaceBLExp,d.keywords.cubeUV_BR=this.colorSpaceBRExp,d.keywords.cubeUV=o,d}generate(e,i){if(e.isShader("fragment")){let s=this.uv,a=this.bias||e.context.roughness,o=new Dm(Xd.Nodes.roughnessToMip,[a]),c=new pt(o,Xd.Nodes.m0,Xd.Nodes.cubeUV_maxMipLevel,pt.CLAMP),d=new pt(c,pt.FLOOR),g=new pt(c,pt.FRACT),b=this.bilinearCubeUV(e,this.value,s,d),j=this.bilinearCubeUV(e,this.value,s,new Qi(d,new ke(1).setReadonly(!0),Qi.ADD)),_e=new pt(b,j,g,pt.MIX);return e.format(_e.build(e),"v4",i)}else return console.warn("TextureCubeUVNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),i)}},Qd=Xd;Qd.Nodes=function(){let e=new qd(`struct TextureCubeUVData {
			vec4 tl;
			vec4 tr;
			vec4 br;
			vec4 bl;
			vec2 f;
		}`),i=new Yt("float cubeUV_maxMipLevel 8.0",!0),s=new Yt("float cubeUV_minMipLevel 4.0",!0),a=new Yt("float cubeUV_maxTileSize 256.0",!0),o=new Yt("float cubeUV_minTileSize 16.0",!0),c=new Ae(`float getFace(vec3 direction) {
				vec3 absDirection = abs(direction);
				float face = -1.0;
				if (absDirection.x > absDirection.z) {
					if (absDirection.x > absDirection.y)
						face = direction.x > 0.0 ? 0.0 : 3.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				} else {
					if (absDirection.z > absDirection.y)
						face = direction.z > 0.0 ? 2.0 : 5.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				}
				return face;
		}`);c.useKeywords=!1;let d=new Ae(`vec2 getUV(vec3 direction, float face) {
				vec2 uv;
				if (face == 0.0) {
					uv = vec2(direction.z, direction.y) / abs(direction.x); // pos x
				} else if (face == 1.0) {
					uv = vec2(-direction.x, -direction.z) / abs(direction.y); // pos y
				} else if (face == 2.0) {
					uv = vec2(-direction.x, direction.y) / abs(direction.z); // pos z
				} else if (face == 3.0) {
					uv = vec2(-direction.z, direction.y) / abs(direction.x); // neg x
				} else if (face == 4.0) {
					uv = vec2(-direction.x, direction.z) / abs(direction.y); // neg y
				} else {
					uv = vec2(direction.x, direction.y) / abs(direction.z); // neg z
				}
				return 0.5 * (uv + 1.0);
		}`);d.useKeywords=!1;let g=new Ae(`TextureCubeUVData bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {
			float face = getFace(direction);
			float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);
			mipInt = max(mipInt, cubeUV_minMipLevel);
			float faceSize = exp2(mipInt);
			float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);
			vec2 uv = getUV(direction, face) * (faceSize - 1.0);
			vec2 f = fract(uv);
			uv += 0.5 - f;
			if (face > 2.0) {
				uv.y += faceSize;
				face -= 3.0;
			}
			uv.x += face * faceSize;
			if(mipInt < cubeUV_maxMipLevel){
				uv.y += 2.0 * cubeUV_maxTileSize;
			}
			uv.y += filterInt * 2.0 * cubeUV_minTileSize;
			uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);
			uv *= texelSize;
			vec4 tl = texture2D(envMap, uv);
			uv.x += texelSize;
			vec4 tr = texture2D(envMap, uv);
			uv.y += texelSize;
			vec4 br = texture2D(envMap, uv);
			uv.x -= texelSize;
			vec4 bl = texture2D(envMap, uv);
			return TextureCubeUVData( tl, tr, br, bl, f );
		}`,[e,c,d,i,s,a,o]);g.useKeywords=!1;let b=new Yt("float r0 1.0",!0),j=new Yt("float v0 0.339",!0),_e=new Yt("float m0 -2.0",!0),$=new Yt("float r1 0.8",!0),rt=new Yt("float v1 0.276",!0),st=new Yt("float m1 -1.0",!0),ut=new Yt("float r4 0.4",!0),gt=new Yt("float v4 0.046",!0),wt=new Yt("float m4 2.0",!0),yt=new Yt("float r5 0.305",!0),At=new Yt("float v5 0.016",!0),Ct=new Yt("float m5 3.0",!0),Tt=new Yt("float r6 0.21",!0),kt=new Yt("float v6 0.0038",!0),Pt=new Yt("float m6 4.0",!0),It=[b,j,_e,$,rt,st,ut,gt,wt,yt,At,Ct,Tt,kt,Pt],Lt=new Ae(`float roughnessToMip(float roughness) {
			float mip = 0.0;
			if (roughness >= r1) {
				mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;
			} else if (roughness >= r4) {
				mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;
			} else if (roughness >= r5) {
				mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;
			} else if (roughness >= r6) {
				mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;
			} else {
				mip = -2.0 * log2(1.16 * roughness);// 1.16 = 1.79^0.25
			}
			return mip;
		}`,It);return{bilinearCubeUV:g,roughnessToMip:Lt,m0:_e,cubeUV_maxMipLevel:i}}();var Xc=class extends et{constructor(e){super("v3"),this.nodeType="Normal",this.scope=e??Xc.VIEW}getShared(){return this.scope===Xc.WORLD}build(e,i,s,a){let o=e.context[this.scope+"Normal"];return o?o.build(e,i,s,a):super.build(e,i,s)}generate(e,i,s,a,o){let c;switch(this.scope){case Xc.VIEW:e.isShader("vertex")?c="transformedNormal":c="geometryNormal";break;case Xc.LOCAL:e.isShader("vertex")?c="objectNormal":(e.requires.normal=!0,c="vObjectNormal");break;case Xc.WORLD:e.isShader("vertex")?c="inverseTransformDirection( transformedNormal, viewMatrix ).xyz":(e.requires.worldNormal=!0,c="vWNormal");break}return e.format(c,this.getType(e),i)}},Ki=Xc;Ki.LOCAL="local",Ki.WORLD="world",Ki.VIEW="view",Ki.NORMAL="normal";Ni.addKeyword("viewNormal",function(){return new Ki(Ki.VIEW)});Ni.addKeyword("localNormal",function(){return new Ki(Ki.NORMAL)});Ni.addKeyword("worldNormal",function(){return new Ki(Ki.WORLD)});var jo=class extends et{constructor(e){super("v3"),this.nodeType="Position",this.scope=e??jo.LOCAL}getType(){switch(this.scope){case jo.PROJECTION:return"v4"}return this.type}getShader(){switch(this.scope){case jo.LOCAL:case jo.WORLD:return!1}return!0}generate(e,i,s,a,o){let c;switch(this.scope){case jo.LOCAL:e.isShader("vertex")?c="transformed":(e.requires.position=!0,c="vPosition");break;case jo.WORLD:if(e.isShader("vertex"))return"( modelMatrix * vec4( transformed, 1.0 ) ).xyz";e.requires.worldPosition=!0,c="vWPosition";break;case jo.VIEW:c=e.isShader("vertex")?"-mvPosition.xyz":"vViewPosition";break;case jo.PROJECTION:c=e.isShader("vertex")?"( projectionMatrix * modelViewMatrix * vec4( position, 1.0 ) )":"vec4( 0.0 )";break}return e.format(c,this.getType(),i)}},Hn=jo;Hn.LOCAL="local",Hn.WORLD="world",Hn.VIEW="view",Hn.PROJECTION="projection";Ni.addKeyword("position",function(){return new Hn});Ni.addKeyword("worldPosition",function(){return new Hn(Hn.WORLD)});Ni.addKeyword("viewPosition",function(){return new Hn(Hn.VIEW)});var io=class extends et{constructor(e){super("v3"),this.nodeType="Reflect",this.scope=e??io.CUBE}getUnique(e){return!e.context.viewNormal}getType(){switch(this.scope){case io.SPHERE:return"v2"}return this.type}generate(e,i){let s=this.getUnique(e);if(e.isShader("fragment")){let a;switch(this.scope){case io.VECTOR:{let o=new Ki(Ki.VIEW),c=e.context.roughness,d=o.build(e,"v3"),g=new Hn(Hn.VIEW).build(e,"v3"),b=c?c.build(e,"f"):void 0,j=`reflect( -normalize( ${g} ), ${d} )`;b&&(j=`normalize( mix( ${j}, ${d}, ${b} * ${b} ) )`);let _e=`inverseTransformDirection( ${j}, viewMatrix )`;s?(e.addNodeCode(`vec3 reflectVec = ${_e};`),a="reflectVec"):a=_e;break}case io.CUBE:{let o=new io(io.VECTOR).build(e,"v3"),c="vec3( -"+o+".x, "+o+".yz )";s?(e.addNodeCode(`vec3 reflectCubeVec = ${c};`),a="reflectCubeVec"):a=c;break}case io.SPHERE:{let o="normalize( ( viewMatrix * vec4( "+new io(io.VECTOR).build(e,"v3")+", 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) ).xy * 0.5 + 0.5";s?(e.addNodeCode(`vec2 reflectSphereVec = ${o};`),a="reflectSphereVec"):a=o;break}}return e.format(a,this.getType(),i)}else return console.warn("ReflectNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.type,i)}},Ho=io;Ho.CUBE="cube",Ho.SPHERE="sphere",Ho.VECTOR="vector";var Z0=class extends et{constructor(e=new Pn,i,s){super("v4"),this.nodeType="TextureCube",this.value=e,this.radianceNode=new Qd(this.value,i??new Ho(Ho.VECTOR),s),this.irradianceNode=new Qd(this.value,new Ki(Ki.WORLD),new ke(1).setReadonly(!0))}generate(e,i){return e.isShader("fragment")?(e.require("irradiance"),e.context.bias&&e.context.bias.setTexture(this.value),(e.slot==="irradiance"?this.irradianceNode:this.radianceNode).build(e,i)):(console.warn("TextureCubeNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),i))}},J0=class extends lr{constructor(e=new Hu,i,s){super("v4",{shared:!0}),this.nodeType="CubeTexture",this.value=e,this.uv=i??new Ho,this.bias=s}getTexture(e,i){return super.generate(e,i,this.value.uuid,"tc")}generate(e,i){var b;if(i==="samplerCube")return this.getTexture(e,i);let s=this.getTexture(e,i),a=(b=this.uv)==null?void 0:b.build(e,"v3"),o=this.bias?this.bias.build(e,"f"):void 0;o===void 0&&e.context.bias&&(o=e.context.bias.setTexture(this).build(e,"f"));let c;o?c="texCubeBias( "+s+", "+a+", "+o+" )":c="texCube( "+s+", "+a+" )";let d={include:e.isShader("vertex"),ignoreCache:!0},g=this.getType(e);return e.addContext(d),this.colorSpace=this.colorSpace??new Cn(new Qt("",g)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(c),c=this.colorSpace.build(e,g),e.removeContext(),e.format(c,g,i)}},WI=`
uniform int frameIndex;
uniform vec2 resolution;
uniform mat4 previousModelViewMatrix;
uniform mat4 previousProjectionMatrix;

varying vec4 vCurrentPosition;
varying vec4 vPreviousPosition;
`,qI=`
layout(location = 1) out vec4 gVelocity;

uniform int frameIndex;
uniform vec2 resolution;

varying vec4 vCurrentPosition;
varying vec4 vPreviousPosition;

const vec2 haltonSequence[16] = vec2[16](
vec2( 0.000000,-0.333334),
vec2(-0.500000, 0.333334),
vec2( 0.500000,-0.777778),
vec2(-0.750000,-0.111112),
vec2( 0.250000, 0.555556),
vec2(-0.250000,-0.555556),
vec2( 0.750000, 0.111112),
vec2(-0.875000, 0.777778),
vec2(0.125000, -0.925926),
vec2(-0.375000, -0.259260),
vec2(0.625000, 0.407408),
vec2(-0.625000, -0.703704),
vec2(0.375000, -0.037038),
vec2(-0.125000, 0.629630),
vec2(0.875000, -0.481482),
vec2(-0.937500, 0.185186));

vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {
  const float goldenAngle = 2.399963f; // radians
  float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));
  float theta = float(sampleIndex) * goldenAngle + angle;
  float sine = sin(theta);
  float cosine = cos(theta);
  return vec2(cosine, sine) * r;
}

// Derived from the interleaved gradient function from Jimenez 2014 http:goo.gl/eomGso
float getNoiseInterleavedGradient(vec2 screenPos) {
    vec3 magic = vec3(0.06711056f, 0.00583715f, 52.9829189f);
    return fract(magic.z * fract(dot(screenPos, magic.xy)));
}

`,YI=`
// TODO: This could be generated CPU side and passed to the shader every frame
const vec2 haltonSequence[16] = vec2[16](
vec2( 0.000000,-0.333334),
vec2(-0.500000, 0.333334),
vec2( 0.500000,-0.777778),
vec2(-0.750000,-0.111112),
vec2( 0.250000, 0.555556),
vec2(-0.250000,-0.555556),
vec2( 0.750000, 0.111112),
vec2(-0.875000, 0.777778),
vec2(0.125000, -0.925926),
vec2(-0.375000, -0.259260),
vec2(0.625000, 0.407408),
vec2(-0.625000, -0.703704),
vec2(0.375000, -0.037038),
vec2(-0.125000, 0.629630),
vec2(0.875000, -0.481482),
vec2(-0.937500, 0.185186));

// TODO: Pass correct view size
vec2 offset = haltonSequence[frameIndex];
offset.x /= resolution.x;
offset.y /= resolution.y;

vec4 currentPosition = gl_Position;
vec4 currentPositionJittered = currentPosition + (vec4(offset.x, offset.y, 0.0, 0.0) * currentPosition.w);

// We want to calculate the velocity with unjittered positions
// so that things that are not moving get a velocity = 0
vCurrentPosition = currentPosition;
vPreviousPosition = previousProjectionMatrix * previousModelViewMatrix * vec4(transformed, 1.0);
#ifdef OUTLINE_COMPENSATION
vPreviousPosition.xy += OUTLINE_COMPENSATION;
#endif
gl_Position = currentPositionJittered;

`,XI=`
vec2 oldPos = vPreviousPosition.xy;
    oldPos /= vPreviousPosition.w;
    oldPos.xy = (oldPos.xy+1.)/2.0;

vec2 newPos = vCurrentPosition.xy;
    newPos /= vCurrentPosition.w;
    newPos.xy = (newPos.xy+1.)/2.0;

vec2 velocity = (newPos - oldPos);

// Discard fully transparent pixels 
if (gl_FragColor.a <= 0.0) discard;

gVelocity = vec4(velocity, 0.0, 1.0);
`,QI=`
layout(location = 1) out vec4 gVelocity;
`,KI=`
    // Discard fully transparent pixels 
    if (gl_FragColor.a <= 0.0) discard;

    gVelocity = vec4(0.0, 0.0, 0.0, 1.0);
`,ZI=["x","y","z","w"],uY=["float","vec2","vec3","vec4"],hY={float:"f",vec2:"v2",vec3:"v3",vec4:"v4",mat4:"v4",int:"i",bool:"b","float[]":"f[]","vec4[]":"v4[]"},dY={t:"sampler2D",tc:"samplerCube",b:"bool",i:"int",f:"float",c:"vec3",v2:"vec2",v3:"vec3",v4:"vec4",m3:"mat3",m4:"mat4","f[]":"float[]","v4[]":"vec4[]"},Kd=class{constructor(){this.includes={consts:{},functions:{},structs:{}},this.cache="",this.slot="",this.shader="",this.context={},this.needsJitter=!0,this.getIncludesCode=function(){function e(i,s){return i.deps.length-s.deps.length}return function(i,s){let a=this.getIncludes(i,s);if(!a)return"";let o="";a=a.sort(e);for(let c=0;c<a.length;c++)a[c].src&&(o+=a[c].src+`
`);return o}}(),this.slots=[],this.caches=[],this.contexts=[],this.keywords={},this.nodeData={},this.fragmentVariables={},this.fragmentParsVariables={},this.vertexParsVariables={},this.requires={uv:[],color:[],transparent:!1,irradiance:!1,position:!1,worldPosition:!1,normal:!1,worldNormal:!1,vWorldViewDir:!1,modelMatrix:!1,viewMatrix:!1,projectionMatrix:!1},this.includes={consts:[],functions:[],structs:[]},this.attributes={},this.prefixCode=["#ifdef TEXTURE_LOD_EXT","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCubeLodEXT(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2DLodEXT(a, b, c)","#else","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCube(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2D(a, b, c)","#endif",`
			// NOTE: Include Spline's blending modes. This could be part of BlendNode
			#define SPE_BLENDING_NORMAL 0
			#define SPE_BLENDING_MULTIPLY 1
			#define SPE_BLENDING_SCREEN 2
			#define SPE_BLENDING_OVERLAY 3

			vec3 spe_normalBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, b, alpha );
			}

			vec3 spe_multiplyBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, a * b, alpha );
			}

			vec3 spe_screenBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = 1.0 - ( 1.0 - a ) * ( 1.0 - b );
				return mix( a, tmp, alpha );
			}

			vec3 spe_overlayBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = mix( 1. - 2. * (1. - a) * (1. - b), 2. * a * b, step( a, vec3(.5) ) );
				return clamp( mix( a, tmp, alpha ), 0.0, 1.0 );
			}

			vec3 spe_blend( vec3 a, vec3 b, float alpha, int mode ) {
				if ( mode == SPE_BLENDING_NORMAL ) return spe_normalBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_MULTIPLY ) return spe_multiplyBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_SCREEN ) return spe_screenBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_OVERLAY ) return spe_overlayBlend( a, b, alpha );
				return vec3( 1.0 );
			}
			`,"#include <packing>","#include <common>"].join(`
`),this.parsCode={vertex:["float neighbor_offset = 0.0001;",""].join(`
`),fragment:["float accumAlpha = 0.0;",`void accumulateAlpha(float alpha) {
					accumAlpha += (1.0 - accumAlpha) * alpha;
				}`,""].join(`
`)},this.code={vertex:"",fragment:""},this.nodeCode={vertex:"",fragment:""},this.resultCode={vertex:"",fragment:""},this.finalCode={vertex:"",fragment:""},this.inputs={uniforms:{list:[],vertex:[],fragment:[]},arrayUniforms:{list:[],vertex:[],fragment:[]},vars:{varying:[],vertex:[],fragment:[]}},this.defines={},this.uniforms={},this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.updaters=[],this.nodes=[],this.analyzing=!1}build(e,i){this.addVertexParsCode(WI),this.addFragmentParsCode(qI),this.buildShader("vertex",e),this.buildShader("fragment",i);for(let s=0;s<this.requires.uv.length;s++)if(this.requires.uv[s]){let a=s>0?s+1:"";this.addVaryCode("varying vec2 vUv"+a+";"),s>0&&this.addVertexParsCode("attribute vec2 uv"+a+";"),this.addVertexFinalCode("vUv"+a+" = uv"+a+";")}return this.requires.color[0]&&(this.addVaryCode("varying vec4 vColor;"),this.addVertexParsCode("attribute vec4 color;"),this.addVertexFinalCode("vColor = color;")),this.requires.color[1]&&(this.addVaryCode("varying vec4 vColor2;"),this.addVertexParsCode("attribute vec4 color2;"),this.addVertexFinalCode("vColor2 = color2;")),this.requires.position&&(this.addVaryCode("varying vec3 vPosition;"),this.addVertexFinalCode("vPosition = transformed;")),this.requires.worldPosition,this.requires.normal&&(this.addVaryCode("varying vec3 vObjectNormal;"),this.addVertexFinalCode("vObjectNormal = normal;")),this.requires.modelMatrix&&this.addFragmentParsCode("uniform mat4 modelMatrix;"),this.requires.viewMatrix&&this.addFragmentParsCode("uniform mat4 viewMatrix;"),this.requires.projectionMatrix&&this.addFragmentParsCode("uniform mat4 projectionMatrix;"),this.requires.worldNormal&&(this.addVaryCode("varying vec3 vWNormal;"),this.addVertexFinalCode("vWNormal = inverseTransformDirection( transformedNormal, viewMatrix ).xyz;")),this.requires.vWorldViewDir&&(this.addVaryCode("varying vec3 vWorldViewDir;"),this.addVertexFinalCode("vWorldViewDir = isPerspectiveMatrix( projectionMatrix ) ?  ( (modelMatrix * vec4(position, 1.0)).xyz - cameraPosition ) : vec3( -viewMatrix[0][2], -viewMatrix[1][2], -viewMatrix[2][2] );")),this.needsJitter&&(this.addVertexFinalCode(YI),this.addFragmentFinalCode(XI)),this}buildShader(e,i){this.resultCode[e]=i.build(this.setShader(e),"v4")}setMaterial(e,i){return this.defines={},this}addFlow(e,i,s){return this.addSlot(e).addCache(i).addContext(s)}removeFlow(){return this.removeSlot().removeCache().removeContext()}addCache(e){return this.cache=e??"",this.caches.push(this.cache),this}removeCache(){return this.caches.pop(),this.cache=this.caches[this.caches.length-1]||"",this}addContext(e){return this.context=Object.assign({},this.context,e),this.context.extra=this.context.extra||{},this.contexts.push(this.context),this}removeContext(){return this.contexts.pop(),this.context=this.contexts[this.contexts.length-1]||{},this}addSlot(e){return this.slot=e||"",this.slots.push(this.slot),this}removeSlot(){return this.slots.pop(),this.slot=this.slots[this.slots.length-1]||"",this}addFragmentVariable(e,i){this.fragmentVariables[e]===void 0&&(this.addFragmentCode(`${i} ${e};`),this.fragmentVariables[e]="")}addFragmentParsVariable(e,i){this.fragmentParsVariables[e]===void 0&&(this.addFragmentParsCode(`${i} ${e};`),this.fragmentParsVariables[e]="")}addVertexParsVariable(e,i){this.vertexParsVariables[e]===void 0&&(this.addVertexParsCode(`${i} ${e};`),this.vertexParsVariables[e]="")}addVertexCode(e){this.addCode(e,"vertex")}addFragmentCode(e){this.addCode(e,"fragment")}addCode(e,i){this.code[i??this.shader]+=e+`
`}addVertexNodeCode(e){this.addNodeCode(e,"vertex")}addFragmentNodeCode(e){this.addNodeCode(e,"fragment")}addNodeCode(e,i){this.nodeCode[i??this.shader]+=e+`
`}clearNodeCode(e){e=e??this.shader;let i=this.nodeCode[e];return this.nodeCode[e]="",i}clearVertexNodeCode(){return this.clearNodeCode("vertex")}clearFragmentNodeCode(){return this.clearNodeCode("fragment")}addVertexFinalCode(e){this.addFinalCode(e,"vertex")}addFragmentFinalCode(e){this.addFinalCode(e,"fragment")}addFinalCode(e,i){this.finalCode[i??this.shader]+=e+`
`}addVertexParsCode(e){this.addParsCode(e,"vertex")}addFragmentParsCode(e){this.addParsCode(e,"fragment")}addParsCode(e,i){this.parsCode[i??this.shader]+=e+`
`}addVaryCode(e){this.addVertexParsCode(e),this.addFragmentParsCode(e)}isCache(e){return this.caches.indexOf(e)!==-1}isSlot(e){return this.slots.indexOf(e)!==-1}define(e,i){this.defines[e]=i===void 0?1:i}require(e){this.requires[e]=!0}isDefined(e){return this.defines[e]!==void 0}getVar(e,i,s,a="varying",o="V",c=""){let d=this.getVars(a),g=d[e];if(!g){let b=d.length;g={name:s||"node"+o+b+(c?"_"+c:""),type:i},d.push(g),d[e]=g}return g}getTempVar(e,i,s,a){return this.getVar(e,i,s,this.shader,"T",a)}getAttribute(e,i){if(!this.attributes[e]){let s=this.getVar(e,i);this.addVertexParsCode("attribute "+i+" "+e+";"),this.addVertexFinalCode(s.name+" = "+e+";"),this.attributes[e]={varying:s,name:e,type:i}}return this.attributes[e]}getCode(e){return[this.prefixCode,this.parsCode[e],this.getVarListCode(this.getVars("varying"),"varying"),this.getVarListCode(this.inputs.uniforms[e],"uniform"),this.getVarListCode(this.inputs.arrayUniforms[e],"uniform"),this.getIncludesCode("consts",e),this.getIncludesCode("structs",e),this.getIncludesCode("functions",e),"void main() {",this.getVarListCode(this.getVars(e)),this.code[e],this.resultCode[e],this.finalCode[e],"}"].join(`
`)}getVarListCode(e,i){i=i??"";let s="";for(let a=0,o=e.length;a<o;++a){let c=e[a],d=c.type,g=c.name,b=c.size,j=this.getFormatByType(d);if(j===void 0)throw new Error("Node pars "+j+" not found.");j.includes("[]")?s+=i+" "+j.substring(0,j.length-2)+" "+g+`[${b}];
`:s+=i+" "+j+" "+g+`;
`}return s}getVars(e){return this.inputs.vars[e??this.shader]}getNodeData(e){let i=e instanceof Xi?e.uuid:e;return this.nodeData[i]=this.nodeData[i]||{}}createUniform(e,i,s,a,o,c){if(i.includes("[]")){let d=this.inputs.arrayUniforms,g=d.list.length,b=new Pm({type:i,size:s.size,name:a||"nodeUA"+g+(c?"_"+c:""),node:s,needsUpdate:o});return d.list.push(b),d[e].push(b),d[e][b.name]=b,this.uniforms[b.name]=b,b}else{let d=this.inputs.uniforms,g=d.list.length,b=new Pm({type:i,name:a||"nodeU"+g+(c?"_"+c:""),node:s,needsUpdate:o});return d.list.push(b),d[e].push(b),d[e][b.name]=b,this.uniforms[b.name]=b,b}}createVertexUniform(e,i,s,a,o){return this.createUniform("vertex",e,i,s,a,o)}createFragmentUniform(e,i,s,a,o){return this.createUniform("fragment",e,i,s,a,o)}include(e,i,s){var c;let a;if(e=typeof e=="string"?Ni.get(e):e,this.context.include===!1)return e.name;e instanceof Ae?a=this.includes.functions:e instanceof Yt?a=this.includes.consts:e instanceof qd&&(a=this.includes.structs);let o=a[this.shader]=a[this.shader]||[];if(e){let d=o[e.name];if(d||(d=o[e.name]={node:e,deps:[]},o.push(d),d.src=e.build(this,"source")),e instanceof Ae&&i&&o[i.name]&&o[i.name].deps.indexOf(e)===-1&&(o[i.name].deps.push(e),(c=e.includes)==null?void 0:c.length)){let g=0;do this.include(e.includes[g++],i);while(g<e.includes.length)}return s&&(d.src=s),e.name}else throw new Error("Include not found.")}colorToVectorProperties(e){return e.replace("r","x").replace("g","y").replace("b","z").replace("a","w")}colorToVector(e){return e.replace(/c/g,"v3")}getIncludes(e,i){return this.includes[e][i||this.shader]}getConstructorFromLength(e){return uY[e-1]}isTypeMatrix(e){return/^m/.test(e)}getTypeLength(e){return e==="f"?1:parseInt(this.colorToVector(e).substr(1))}getTypeFromLength(e){return e===1?"f":"v"+e}findNode(...e){for(let i=0;i<arguments.length;i++){let s=e[i];if(s!=null&&s.isNode)return s}}resolve(...e){for(let i=0;i<arguments.length;i++){let s=e[i];if(s!==void 0){if(s.isNode)return s;if(s.isTexture)switch(s.mapping){case al:case ll:return new J0(s);case ch:return new Z0(new Pn(s));default:return new Pn(s)}else{if(s.isVector2)return new qr(s);if(s.isVector3)return new nn(s);if(s.isVector4)return new jn(s)}}}}format(e,i,s){switch(this.colorToVector(s+" <- "+i)){case"f <- v2":return e+".x";case"f <- v3":return e+".x";case"f <- v4":return e+".x";case"f <- i":case"f <- b":return"float( "+e+" )";case"v2 <- f":return"vec2( "+e+" )";case"v2 <- v3":return e+".xy";case"v2 <- v4":return e+".xy";case"v2 <- i":case"v2 <- b":return"vec2( float( "+e+" ) )";case"v3 <- f":return"vec3( "+e+" )";case"v3 <- v2":return"vec3( "+e+", 0.0 )";case"v3 <- v4":return e+".xyz";case"v3 <- i":case"v3 <- b":return"vec2( float( "+e+" ) )";case"v4 <- f":return"vec4( "+e+" )";case"v4 <- v2":return"vec4( "+e+", 0.0, 1.0 )";case"v4 <- v3":return"vec4( "+e+", 1.0 )";case"v4 <- i":case"v4 <- b":return"vec4( float( "+e+" ) )";case"i <- f":case"i <- b":return"int( "+e+" )";case"i <- v2":return"int( "+e+".x )";case"i <- v3":return"int( "+e+".x )";case"i <- v4":return"int( "+e+".x )";case"b <- f":return"( "+e+" != 0.0 )";case"b <- v2":return"( "+e+" != vec2( 0.0 ) )";case"b <- v3":return"( "+e+" != vec3( 0.0 ) )";case"b <- v4":return"( "+e+" != vec4( 0.0 ) )";case"b <- i":return"( "+e+" != 0 )"}return e}getTypeByFormat(e){return hY[e]||e}getFormatByType(e){return dY[e]||e}getUUID(e,i){return i=i!==void 0?i:!0,i&&this.cache&&(e=this.cache+"-"+e),e}getElementByIndex(e){return ZI[e]}getIndexByElement(e){return ZI.indexOf(e)}isShader(e){return this.shader===e}setShader(e){return this.shader=e,this}mergeDefines(e){for(let i in e)this.defines[i]=e[i];return this.defines}mergeUniform(e){for(let i in e)this.uniforms[i]=e[i];return this.uniforms}getTextureEncodingFromMap(e){let i;return e?e.isTexture&&(i=e.encoding):i=Sn,i===Sn&&this.context.gamma&&(i=at),i}},rr=class extends lr{constructor(e=0,i,s,a){super("c"),this.nodeType="Color",this.value=e instanceof xr$1?e:new xr$1(e||0,i,s,a)}setRGBA(e){this.value.setRGBA(e.r,e.g,e.b,e.a)}generate(e,i,s,a,o,c){s=e.getUUID(s??this.getUUID()),a=a??this.getType(e);let d=e.getNodeData(s),g=this.getReadonly()&&this.generateReadonly!==void 0;if(this.alpha){let b=this.alpha.build(e,"f");e.addFragmentNodeCode(`accumAlpha += ( 1.0 - accumAlpha ) * ${b};`)}return g?this.generateReadonly(e,i,s,a,o,c):e.isShader("vertex")?(d.vertex||(d.vertex=e.createVertexUniform(a,this,o,c,this.getLabel())),e.format(d.vertex.name,a,i)):(d.fragment||(d.fragment=e.createFragmentUniform(a,this,o,c,this.getLabel())),e.format(d.fragment.name,a,i))}generateReadonly(e,i,s,a,o,c){return e.format("vec3("+this.value.r+", "+this.value.g+", "+this.value.b+")",a,i)}},Dt=class extends lr{constructor(e){super("i"),this.nodeType="Int",this.value=Math.floor(e??0)}generateReadonly(e,i,s,a,o,c){return e.format(this.value.toString(),a,i)}},Jr=class extends lr{constructor(e){super("b"),this.nodeType="Bool",this.value=e??!1}generateReadonly(e,i,s,a){return e.format(this.value?"true":"false",a,i)}},no=class extends lr{constructor(e=1,i){super("f[]"),this.nodeType="FloatArray",this.size=e,this.value=Array.isArray(i)?i:typeof i=="number"?new Array(e).fill(i):new Array(e).fill(0)}},ql=class extends lr{},$0=class extends ql{constructor(e){super("v3"),this.image=e,this._value=new _}get value(){return this._value.x=this.image.isVideo?this.image.img.videoWidth??0:this.image.img.width,this._value.y=this.image.isVideo?this.image.img.videoHeight??0:this.image.img.height,this._value}},Qc=class extends ql{constructor(e,i,s=1008){super("t"),this.image=e,this.wrap=i,this.minFilter=s}get value(){return this.image.getTexture(this.wrap,this.minFilter)}},Zd=class extends lr{constructor(e){super("m3"),this.nodeType="Matrix3",this.value=e??new nr}generateReadonly(e,i,s,a,o,c){return e.format("mat3("+this.value.elements.join(", ")+")",a,i)}get elements(){return this.value.elements}set elements(e){this.value.fromArray(e)}},sn=class extends lr{constructor(e){super("m4"),this.nodeType="Matrix4",this.value=e??new ce$1}generateReadonly(e,i,s,a,o,c){return e.format("mat4("+this.value.elements.join(", ")+")",a,i)}get elements(){return this.value.elements}set elements(e){this.value.fromArray(e)}};function JI(e,i,s){e.setUvTransform(s[0],s[1],i[0],i[1],0,0,0)}var ex=class extends Zd{constructor(e,i){super(new nr),this.repeat=e,this.offset=i,JI(this.value,e,i)}updateMatrix(){JI(this.value,this.repeat,this.offset)}},so=class extends lr{constructor(e=1,i){super("v4[]"),this.nodeType="Vector4Array",this.size=e,this.value=Array.isArray(i)?i:i instanceof Ke?new Array(e).fill(i):new Array(e).fill(new Ke(0))}},Jd=class extends et{constructor(e,i,s,a){super("v3"),this.nodeType="Blend",this.a=e,this.b=i,this.alpha=s,this.mode=a}generate(e,i){if(e.isShader("fragment")){let s=[];return s.push(this.a.build(e,"c")),s.push(this.b.build(e,"c")),s.push(this.alpha.build(e,"f")),s.push(this.mode.build(e,"i")),e.format("spe_blend("+s.join(",")+")",this.getType(e),i)}else return console.warn("BlendNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),i)}},qA=class extends et{constructor(e,i){super("v3"),this.nodeType="CustomColor",this.color=e,this.alpha=i,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,i){if(e.isShader("fragment")){let s=e.include(qA.Nodes.customColor);e.addFragmentVariable(this.calpha,"float");let a=[];return a.push(this.color.build(e,"v3")),a.push(this.mask?`luminance(${this.mask.build(e,"v3")})`:"1.0"),a.push(this.alpha.build(e,"f")),a.push(this.calpha),e.format(s+"("+a.join(",")+")",this.getType(e),i)}else return console.warn("CustomColorNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),i)}},Kc=qA;Kc.Nodes=function(){return{customColor:new Ae(`vec3 customColor(vec3 color, float mask, float alpha, out float calpha) {
				float lalpha = alpha * mask;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha;

				return color;
			}`)}}();var YA=class extends et{constructor(e,i){super("v3"),this.nodeType="CustomNormal",this.cnormal=e,this.alpha=i,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,i){if(e.isShader("fragment")){let s=e.include(YA.Nodes.customNormal);e.addFragmentVariable(this.calpha,"float");let a=[];return a.push(this.cnormal.build(e,"v3")),a.push("normal"),a.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),a.push(this.alpha.build(e,"f")),a.push(this.calpha),e.format(s+"("+a.join(",")+")",this.getType(e),i)}else return console.warn("CustomNormalNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),i)}},$d=YA;$d.Nodes=function(){return{customNormal:new Ae(`vec3 customNormal(vec3 cnormal, vec3 norm, float mask, float alpha, out float calpha) {
				vec3 normal = packNormalToRGB( norm ).rgb;
				normal *= step( vec3(0.5), cnormal );

				float lalpha = alpha * mask;
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;

				return normal;
			}`)}}();var ef=class extends et{constructor(e,i,s,a,o,c,d,g,b,j,_e,$){super("v3"),this.nodeType="CustomTexture",this.texture=e,this.textureSize=i,this.crop=s,this.projection=a,this.axis=o,this.side=c,this.size=d,this.blending=g,this.mat=b,this.isMask=$,this.alpha=j,this.mode=_e,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,i){e.require("position"),e.require("normal"),e.require("uv"),e.requires.uv=[!0],e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0;let s=`g${this.uuid.toString().replace(/-/g,"")}`,a;switch(this.projection.value){case 3:a=e.include(ef.Nodes.cylindrical);break;case 2:a=e.include(ef.Nodes.spherical);break;case 1:let c=["vec3(1.0, 0.0, 0.0)","vec3(0.0, 1.0, 0.0)","vec3(0.0, 0.0, 1.0)"][this.axis.value],d=["zy","xz","xy"][this.axis.value],g=new Ae(`
		vec3 ${s}_planarTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
				vec2 projected = (1. + (position.${d})) / 2.;
				vec2 uvs = ( mat * vec3( (projected * 2. - 1.) / (size * .5), 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				${this.side.value===2?"":`lalpha *= step(0.0, ${this.side.value===1?"-1.0 * ":""}dot(vObjectNormal, ${c}));`}

				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				
				lalpha *= mask;

				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}`);a=e.include(g);break;case 4:a=e.include(ef.Nodes.triplanar);break;default:a=e.include(ef.Nodes.uv);break}e.addFragmentVariable(this.calpha,"float");let o=[];if(o.push("normal"),o.push(this.texture.generate(e,"t")),o.push(this.textureSize.build(e,"v2")),o.push(this.crop.build(e,"f")),o.push(this.mat.build(e,"mat3")),o.push(this.size.build(e,"v2")),o.push(this.blending.build(e,"f")),o.push(this.isMask.build(e,"b")),o.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),o.push(this.alpha.build(e,"f")),o.push(this.mode.build(e,"i")),o.push(this.calpha),this.projection.value===4){let c=`${s}_writeUvs`,d=c+"0",g=c+"1",b=c+"2",j=`${s}_triplanarWeights`;e.addFragmentVariable(d,"vec2"),e.addFragmentVariable(g,"vec2"),e.addFragmentVariable(b,"vec2"),e.addFragmentVariable(j,"vec3"),o.push(d),o.push(g),o.push(b),o.push(j)}else{let c=`${s}_writeUvs`;e.addFragmentVariable(c,"vec2"),o.push(c)}return e.format(a+"("+o.join(",")+")",this.getType(e),i)}},Yl=ef;Yl.Nodes=function(){let e=new Ae(`
vec3 cylindricalTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
                vec3 posN = normalize(position);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float scaledHeight = position.y / (size.y * 0.5);
                float v =  (scaledHeight / 2.) + .5;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;

				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}

				lalpha *= mask;
				
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}
`),i=new Ae(`
vec3 sphericalTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
                vec3 posN = normalize(vPosition);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float v = 0.5 + asin(posN.y) / 3.1415;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;
				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}

				lalpha *= mask;

				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}
`),s=new Ae(`vec3 uvTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
				vec2 uvs = ( mat * vec3( vUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;

				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				
				lalpha *= mask;

				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}`),a=new Ae(`vec3 triplanarTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUvs0, out vec2 writeUvs1, out vec2 writeUvs2, out vec3 writeWeights) {
				vec3 p = position;
				vec2 uv0 = (1.0 + p.xy) / 2.0;     
				vec2 uv1 = (1.0 + p.zy) / 2.0;		
				vec2 uv2 = (1.0 + p.xz) / 2.0;		
	
				uv0 = (mat * vec3((uv0 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;
				uv1 = (mat * vec3((uv1 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;
				uv2 = (mat * vec3((uv2 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;

				// Range from 3 to 128 seems to be good
				float exponent = (1.0 - blending) * 125.0 + 3.0;

				vec3 n = vObjectNormal;
				vec3 weights = abs(normalize(n));
				weights = pow(weights, vec3(exponent));
				weights /= dot(weights, vec3(1.0));

				// Write out all sets of UVs that we generated
				writeUvs0 = uv0;
				writeUvs1 = uv1;
				writeUvs2 = uv2;
				writeWeights = weights;

				// Derivatives for LOD
				vec2 df0 = fwidth(uv0);
				vec2 df1 = fwidth(uv1);
				vec2 df2 = fwidth(uv2);
				if (df0.x > 0.5) df0.x = 0.0;
				if (df1.x > 0.5) df1.x = 0.0;
				if (df2.x > 0.5) df2.x = 0.0;

				#ifdef GL_EXT_shader_texture_lod
                	vec4 tmp = 
						texture2DLodEXT(tex, uv0, log2(max(df0.x, df0.y)*min(textureSize.x, textureSize.y))) * weights.z + 
						texture2DLodEXT(tex, uv1, log2(max(df1.x, df1.y)*min(textureSize.x, textureSize.y))) * weights.x + 
						texture2DLodEXT(tex, uv2, log2(max(df2.x, df2.y)*min(textureSize.x, textureSize.y))) * weights.y;
				#else
                	vec4 tmp = 
						textureLod(tex, uv0, log2(max(df0.x, df0.y)*min(textureSize.x, textureSize.y))) * weights.z + 
						textureLod(tex, uv1, log2(max(df1.x, df1.y)*min(textureSize.x, textureSize.y))) * weights.x + 
						textureLod(tex, uv2, log2(max(df2.x, df2.y)*min(textureSize.x, textureSize.y))) * weights.y;
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;

				// Apply cropping across all 3 planes
				if ( crop > 0.5 ) {
					if ( uv0.x < 0.0 || uv0.x > 1.0 || uv0.y < 0.0 || uv0.y > 1.0 )  {
						lalpha = 0.0;
					}
					if ( uv1.x < 0.0 || uv1.x > 1.0 || uv1.y < 0.0 || uv1.y > 1.0 )  {
						lalpha = 0.0;
					}
					if ( uv2.x < 0.0 || uv2.x > 1.0 || uv2.y < 0.0 || uv2.y > 1.0 )  {
						lalpha = 0.0;
					}
				}

				lalpha *= mask;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;//n * 0.5 + 0.5;
			}			
			`);return{cylindrical:e,spherical:i,uv:s,triplanar:a}}();var tf=class extends et{constructor(e,i,s,a,o,c,d,g,b,j,_e,$){super("v3"),this.nodeType="Depth",this.gradientType=e,this.smooth=i,this.near=s,this.far=a,this.isVector=o,this.isWorldSpace=c,this.origin=d,this.direction=g,this.colors=b,this.steps=j,this.isMask=$,this.alpha=_e,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,i){let s=`g${this.uuid.toString().replace(/-/g,"")}`,a=new Ae(`vec3 ${s}_sdepth(float near, float far, vec3 origin, vec3 direction, vec4 colors[${s}_MAX_COLORS], float steps[${s}_MAX_COLORS], bool isMask, float mask, float alpha, out float calpha) {
               vec4 color = colors[0];
               #ifdef ${s}_IS_VECTOR
                   #ifdef ${s}_LINEAR
                       #ifdef ${s}_WORLDSPACE
                       float depth = vectorLinearWorldSpaceDepth(direction, origin, near, far);
                       #else
                       float depth = vectorLinearObjectSpaceDepth(direction, origin, near, far);
                       #endif
                   #else
                       #ifdef ${s}_WORLDSPACE
                           float depth = vectorSphericalWorldSpaceDepth(origin, near, far);
                       #else
                           float depth = vectorSphericalObjectSpaceDepth(origin, near, far);
                       #endif
                   #endif
               #else
                   float dist = length(vWPosition - cameraPosition);
			       float depth = ( dist - near ) / ( far - near );
               #endif


              float p;
              #ifdef ${s}_SMOOTH
				for ( int i = 1; i < ${s}_MAX_COLORS; i++ ) {
						p = clamp( ( depth - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}
              #else
                for ( int i = 1; i < ${s}_MAX_COLORS; i++ ) {
                   p = clamp(( depth - steps[i - 1] ) / ( steps[i] - steps[i - 1] ), 0.0, 1.0);
                   color = mix(color, colors[i], p);
                 }
              #endif

               float lalpha = alpha * color.a * mask;
               calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
			   accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));
			   
               return color.rgb;
			}`,[tf.Nodes.vectorLinearWorldSpaceDepth,tf.Nodes.vectorLinearObjectSpaceDepth,tf.Nodes.vectorSphericalObjectSpaceDepth,tf.Nodes.vectorSphericalWorldSpaceDepth]);if(e.isShader("fragment")){e.define(`${s}_MAX_COLORS`,this.colors.value.length),this.smooth.value&&e.define(`${s}_SMOOTH`),this.isVector.value>.5&&e.define(`${s}_IS_VECTOR`),this.gradientType.value===0&&e.define(`${s}_LINEAR`),this.isWorldSpace.value>.5&&e.define(`${s}_WORLDSPACE`),e.require("worldPosition"),e.addFragmentVariable(this.calpha,"float");let o=e.include(a),c=[];return c.push(this.near.build(e,"f")),c.push(this.far.build(e,"f")),c.push(this.origin.build(e,"v3")),c.push(this.direction.build(e,"v3")),c.push(this.colors.build(e,"v4[]")),c.push(this.steps.build(e,"f[]")),c.push(this.isMask.build(e,"b")),c.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),c.push(this.alpha.build(e,"f")),c.push(this.calpha),e.format(o+"("+c.join(",")+")",this.getType(e),i)}else return console.warn("DepthNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),i)}},rf=tf;rf.Nodes=function(){let e=new Ae(`float vectorLinearWorldSpaceDepth(vec3 direction, vec3 origin, float near, float far) {
               vec3 n = normalize(direction);
               float dist = (n.x*(vWPosition.x - origin.x) + n.y*(vWPosition.y - origin.y) + n.z*(vWPosition.z - origin.z));
               return ( dist - near ) / ( far - near );
            }`),i=new Ae(`float vectorLinearObjectSpaceDepth(vec3 direction, vec3 origin, float near, float far) {
               vec3 n = normalize(direction);
               float dist = (n.x*(position.x - origin.x) + n.y*(position.y - origin.y) + n.z*(position.z - origin.z));
               return ( dist - near ) / ( far - near );
            }`),s=new Ae(`float vectorSphericalWorldSpaceDepth(vec3 origin, float near, float far) {
               float dist = length(vWPosition - origin);
               return ( dist - near ) / ( far - near );
            }`),a=new Ae(`float vectorSphericalObjectSpaceDepth(vec3 origin, float near, float far) {
               float dist = length(position - origin);
               return ( dist - near ) / ( far - near );
            }`);return{vectorLinearWorldSpaceDepth:e,vectorLinearObjectSpaceDepth:i,vectorSphericalWorldSpaceDepth:s,vectorSphericalObjectSpaceDepth:a}}();var Om=class extends et{constructor(e,i,s,a,o,c,d,g){super("v3"),this.nodeType="Fresnel",this.color=e,this.bias=i,this.scale=s,this.intensity=a,this.factor=o,this.isMask=g,this.alpha=c,this.mode=d,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,i){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let s=new Ae(`vec3 fresnel(vec3 color, float bias, float scale, float intensity, float factor, bool isMask, float mask, float alpha, int mode, out float calpha) {
					float fresnel = bias + scale * pow( abs( factor + dot( normalize( vWorldViewDir ), normalize( vWNormal ) ) ), intensity );

					float lalpha = clamp(fresnel, 0.0, 1.0) * alpha * mask;
					calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
					accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

					return color;
				}`),a=e.include(s),o=[];return o.push(this.color.build(e,"c")),o.push(this.bias.build(e,"f")),o.push(this.scale.build(e,"f")),o.push(this.intensity.build(e,"f")),o.push(this.factor.build(e,"f")),o.push(this.isMask.build(e,"b")),o.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),o.push(this.alpha.build(e,"f")),o.push(this.mode.build(e,"i")),o.push(this.calpha),e.format(a+"("+o.join(",")+")",this.getType(e),i)}else return console.warn("FresnelNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),i)}},XA=class extends et{constructor(e,i,s,a,o,c,d,g,b){super("v3"),this.nodeType="Gradient",this.gradientType=e,this.smooth=i,this.colors=s,this.steps=a,this.offset=o,this.morph=c,this.angle=d,this.isMask=b,this.alpha=g,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,i){if(e.isShader("fragment")){e.define("GRAD_MAX",10),e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let s=e.include(XA.Nodes.gradient),a=[];return a.push(this.gradientType.build(e,"i")),a.push(this.smooth.build(e,"b")),a.push(this.colors.build(e,"v4[]")),a.push(this.steps.build(e,"f[]")),a.push(this.offset.build(e,"v2")),a.push(this.morph.build(e,"v2")),a.push(this.angle.build(e,"f")),a.push(this.isMask.build(e,"b")),a.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),a.push(this.alpha.build(e,"f")),a.push(this.calpha),e.format(s+"("+a.join(",")+")",this.getType(e),i)}else return console.warn("GradientNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),i)}},nf=XA;nf.Nodes=function(){return{gradient:new Ae(`vec3 gradient(int gradientType, bool smoothed, vec4 colors[GRAD_MAX], float steps[GRAD_MAX], vec2 offset, vec2 morph, float angle, bool isMask, float mask, float alpha, out float calpha) {
				vec4 color = colors[0];
				vec2 m = morph / vUv.xy;
				vec2 rot = vec2( 0.5 + m.x, m.y );
				vec2 dt = vec2(
					cos( angle ) * rot.x - sin( angle ) * rot.y,
					sin( angle ) * rot.x + cos( angle ) * rot.y
				);
				vec2 pt = ( vUv - 0.5 + offset ) / 2.0 + dt / 2.0;
				float t = dot( pt, dt ) / dot( dt, dt );
				if ( gradientType == 1 ) {
					t = distance (
						( vUv + morph ) * 3.0,
						( vUv + offset ) + 1.0
					) + angle;
				} else if ( gradientType == 2 ) {
					float polar = atan(
						vUv.x + morph.x - 0.5 + offset.x,
						vUv.y + morph.y - 0.5 + offset.y
					) * -1.0;
					t = fract( ( angle / PI / -2.0 ) + 0.5 * ( polar / PI ) );
				}

				float p;
				if (smoothed) {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}

				} else {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], p);
					}
				}

				float lalpha = alpha * color.a * mask;
				calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));
				
				return color.xyz;
			}`)}}();var QA=class extends et{constructor(e,i,s,a){super("v3"),this.nodeType="Matcap",this.texture=e,this.isMask=a,this.alpha=i,this.mode=s,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,i){if(e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let s=e.include(QA.Nodes.matcap);e.require("normal"),e.requires.normal=!0;let a=[];return a.push(this.texture.generate(e,"t")),a.push("normal"),a.push(this.isMask.build(e,"b")),a.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),a.push(this.alpha.build(e,"f")),a.push(this.mode.build(e,"i")),a.push(this.calpha),e.format(s+"("+a.join(",")+")",this.getType(e),i)}else return console.warn("MatcapNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),i)}},sf=QA;sf.Nodes=function(){return{matcap:new Ae(`vec3 matcap(sampler2D matcapTex, vec3 normal, bool isMask, float mask, float alpha, int mode, out float calpha) {
					vec3 viewDir = normalize( vViewPosition );
					vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
					vec3 y = cross( viewDir, x );
					vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks
					vec4 matcapColor = texture2D( matcapTex, uv );

					float lalpha = alpha * mask;
					calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
					accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));
					
					return matcapColor.rgb;
            	}`)}}();var Im=(e=>(e.SIMPLEX="simplex3d",e.SIMPLEX_FRACTAL="simplex3dFractal",e.ASHIMA="simplexAshima",e.FBM="fbm",e.PERLIN="perlin",e.VORONOI="voronoi",e))(Im||{}),Zi=function(){let e=new Ae(`vec3 random3(vec3 c) {
			float j = 4096.0*sin(dot(c,vec3(17.0, 59.4, 15.0)));
			vec3 r;
			r.z = fract(512.0*j);
			j *= .125;
			r.x = fract(512.0*j);
			j *= .125;
			r.y = fract(512.0*j);
			return r-0.5;
		}`),i=new Ae(`float simplex3d(vec3 p) {
			 vec3 s = floor(p + dot(p, vec3(F3)));
			 vec3 x = p - s + dot(s, vec3(G3));
			 
			 vec3 e = step(vec3(0.0), x - x.yzx);
			 vec3 i1 = e*(1.0 - e.zxy);
			 vec3 i2 = 1.0 - e.zxy*(1.0 - e);
				
			 vec3 x1 = x - i1 + G3;
			 vec3 x2 = x - i2 + 2.0*G3;
			 vec3 x3 = x - 1.0 + 3.0*G3;
			 
			 vec4 w, d;
			 
			 w.x = dot(x, x);
			 w.y = dot(x1, x1);
			 w.z = dot(x2, x2);
			 w.w = dot(x3, x3);
			 
			 w = max(0.6 - w, 0.0);
			 
			 d.x = dot(random3(s), x);
			 d.y = dot(random3(s + i1), x1);
			 d.z = dot(random3(s + i2), x2);
			 d.w = dot(random3(s + 1.0), x3);
			 
			 w *= w;
			 w *= w;
			 d *= w;
			 
			 return dot(d, vec4(52.0));
		}`,[e]);i.keywords.F3=new Yt("float F3 0.3333333"),i.keywords.G3=new Yt("float G3 0.1666667");let s=new Ae(`float simplex3dFractal(vec3 m) {
			mat3 rot1 = mat3(-0.37, 0.36, 0.85,-0.14,-0.93, 0.34,0.92, 0.01,0.4);
			mat3 rot2 = mat3(-0.55,-0.39, 0.74, 0.33,-0.91,-0.24,0.77, 0.12,0.63);
			mat3 rot3 = mat3(-0.71, 0.52,-0.47,-0.08,-0.72,-0.68,-0.7,-0.45,0.56);
			return 0.5333333 * simplex3d(m * rot1)
				 + 0.2666667 * simplex3d(2.0 * m * rot2)
				 + 0.1333333 * simplex3d(4.0 * m * rot3)
				 + 0.0666667 * simplex3d(8.0 * m);
		}`,[i]),a=new Ae("vec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}"),o=new Ae("vec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}"),c=new Ae(`float simplexAshima(vec3 v) {
		  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;
		  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);
		  vec3 i  = floor(v + dot(v, C.yyy) );
		  vec3 x0 =   v - i + dot(i, C.xxx) ;
		  vec3 g = step(x0.yzx, x0.xyz);
		  vec3 l = 1.0 - g;
		  vec3 i1 = min( g.xyz, l.zxy );
		  vec3 i2 = max( g.xyz, l.zxy );
		  vec3 x1 = x0 - i1 + 1.0 * C.xxx;
		  vec3 x2 = x0 - i2 + 2.0 * C.xxx;
		  vec3 x3 = x0 - 1. + 3.0 * C.xxx;
		  i = mod(i, 289.0 ); 
		  vec4 p = permute( permute( permute( 
					 i.z + vec4(0.0, i1.z, i2.z, 1.0 ))
				   + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) 
				   + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));
		  float n_ = 1.0/7.0; // N=7
		  vec3  ns = n_ * D.wyz - D.xzx;
		  vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)
		  vec4 x_ = floor(j * ns.z);
		  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)
		  vec4 x = x_ *ns.x + ns.yyyy;
		  vec4 y = y_ *ns.x + ns.yyyy;
		  vec4 h = 1.0 - abs(x) - abs(y);
		  vec4 b0 = vec4( x.xy, y.xy );
		  vec4 b1 = vec4( x.zw, y.zw );
		  vec4 s0 = floor(b0)*2.0 + 1.0;
		  vec4 s1 = floor(b1)*2.0 + 1.0;
		  vec4 sh = -step(h, vec4(0.0));
		  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;
		  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;
		  vec3 p0 = vec3(a0.xy,h.x);
		  vec3 p1 = vec3(a0.zw,h.y);
		  vec3 p2 = vec3(a1.xy,h.z);
		  vec3 p3 = vec3(a1.zw,h.w);
		  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
		  p0 *= norm.x;
		  p1 *= norm.y;
		  p2 *= norm.z;
		  p3 *= norm.w;
		  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
		  m = m * m;
		  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), 
										dot(p2,x2), dot(p3,x3) ) );
		}`,[a,o]),d=new Ae("vec4 mod289(vec4 x){return x - floor(x * (1.0 / 289.0)) * 289.0;}"),g=new Ae("vec4 perm(vec4 x){return mod289(((x * 34.0) + 1.0) * x);}",[d]),b=new Ae(`float noise(vec3 p){
			vec3 a = floor(p);
			vec3 d = p - a;
			d = d * d * (3.0 - 2.0 * d);
			vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);
			vec4 k1 = perm(b.xyxy);
			vec4 k2 = perm(k1.xyxy + b.zzww);
			vec4 c = k2 + a.zzzz;
			vec4 k3 = perm(c);
			vec4 k4 = perm(c + 1.0);
			vec4 o1 = fract(k3 * (1.0 / 41.0));
			vec4 o2 = fract(k4 * (1.0 / 41.0));
			vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);
			vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);
			return o4.y * d.y + o4.x * (1.0 - d.y);
		}`,[g]),j=new Ae(`float fbm(vec3 x) {
			float v = 0.0;
			float a = 0.5;
			vec3 shift = vec3(100);
			for (int i = 0; i < NUM_OCTAVES; ++i) {
				v += a * noise(x);
				x = x * 2.0 + shift;
				a *= 0.5;
			}
			return v;
		}`,[b]);j.keywords.NUM_OCTAVES=new Yt("int NUM_OCTAVES 5");let _e=new Ae("vec3 fade(vec3 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}"),$=new Ae(`float perlin(vec3 P){
		  vec3 Pi0 = floor(P);
		  vec3 Pi1 = Pi0 + vec3(1.0);
		  Pi0 = mod(Pi0, 289.0);
		  Pi1 = mod(Pi1, 289.0);
		  vec3 Pf0 = fract(P);
		  vec3 Pf1 = Pf0 - vec3(1.0);
		  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
		  vec4 iy = vec4(Pi0.yy, Pi1.yy);
		  vec4 iz0 = Pi0.zzzz;
		  vec4 iz1 = Pi1.zzzz;
		  vec4 ixy = permute(permute(ix) + iy);
		  vec4 ixy0 = permute(ixy + iz0);
		  vec4 ixy1 = permute(ixy + iz1);
		  vec4 gx0 = ixy0 / 7.0;
		  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;
		  gx0 = fract(gx0);
		  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
		  vec4 sz0 = step(gz0, vec4(0.0));
		  gx0 -= sz0 * (step(0.0, gx0) - 0.5);
		  gy0 -= sz0 * (step(0.0, gy0) - 0.5);
		  vec4 gx1 = ixy1 / 7.0;
		  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;
		  gx1 = fract(gx1);
		  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
		  vec4 sz1 = step(gz1, vec4(0.0));
		  gx1 -= sz1 * (step(0.0, gx1) - 0.5);
		  gy1 -= sz1 * (step(0.0, gy1) - 0.5);
		  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);
		  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);
		  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);
		  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);
		  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);
		  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);
		  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);
		  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);
		  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
		  g000 *= norm0.x;
		  g010 *= norm0.y;
		  g100 *= norm0.z;
		  g110 *= norm0.w;
		  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
		  g001 *= norm1.x;
		  g011 *= norm1.y;
		  g101 *= norm1.z;
		  g111 *= norm1.w;
		  float n000 = dot(g000, Pf0);
		  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
		  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
		  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
		  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
		  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
		  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
		  float n111 = dot(g111, Pf1);
		  vec3 fade_xyz = fade(Pf0);
		  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
		  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
		  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); 
		  return 2.2 * n_xyz;
		}`,[a,o,_e]),rt=new Ae(`float hashwithoutsine13(vec3 p3)
		{
			p3  = fract(p3 * .1031);
			p3 += dot(p3, p3.yzx + 33.33);
			return fract((p3.x + p3.y) * p3.z);
		}`),st=new Ae(`vec3 hashwithoutsine33(vec3 p3)
		{
			p3 = fract(p3 * vec3(.1031, .1030, .0973));
			p3 += dot(p3, p3.yxz+33.33);
			return fract((p3.xxy + p3.yxx)*p3.zyx);
		}`),ut=new Ae(`float metric(in vec3 p)
		{
			// L2 
			return length(p);

			// Chebyshev 
			// vec3 a = abs(p);
			// return max(a.x, max(a.y, a.z));
		}`),gt=new Ae(`float smin( float a, float b, float k )
		{
			float h = smoothstep(0.0, 1.0, 0.5 + 0.5 * (b - a) / k);
			float correction = k * h * (1.0 - h);
			return mix(b, a, h) - correction;
		}`),wt=new Ae(`float smax( float a, float b, float k )
		{
			float h = smoothstep(1.0, 0.0, 0.5 + 0.5 * (a - b) / k);
			float correction = k * h * (1.0 - h);
			return mix(a, b, h) + correction;
		}`),yt=new Ae(`float remap(float value, float input_min, float input_max, float output_min, float output_max) {
			// Compute width of each interval
			float input_width = input_max - input_min;
			float output_width = output_max - output_min;
		
			// Convert input range into a 0-1 range 
			float scaled = (value - input_min) / input_width;
		
			// Convert the 0-1 range into a value in output range
			return output_min + (scaled * output_width);
		}`),At=new Ae(`float voronoi(in vec3 x, in int style, in float smoothness, in float seed, in int quality) 
		{
			// Integer and fractional parts of this point's coordinates
			ivec3 p = ivec3(floor(x));
			vec3 f = fract(x);

			// Different variables that we will use to construct noise:
			//
			// f1: distance to the closest feature point
			// f2: distance to the second closest feature point
			// e: distance to the closest edge (cell boundary)
			//
			// We also compute "smooth" versions of all of the above quantites, essentially
			// replacing "hard" minimums with "smooth" minimums (described by IQ)
			float f1_smooth = 8.0;
			float f1 = 8.0;
			float f2_smooth = 8.0;
			float f2 = 8.0;
			float e_smooth = 8.0;
			float e = 8.0;

			// Variables stored from closest cell
			ivec3 mb;
			vec3 mr; 

			int steps = quality;
			
			for (int x = -steps; x <= steps; x++) 
			for (int y = -steps; y <= steps; y++)
			for (int z = -steps; z <= steps; z++)
			{
				ivec3 b = ivec3(x, y, z);
				vec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;
				float d = length(r);
				
				f1_smooth = smin(d, f1_smooth, smoothness);

				// Store un-smoothed distances too 
				if (d < f1) 
				{
					f2 = f1;
					f1 = d;

					mb = ivec3(x, y, z);
					mr = r;
				} 
				else if (d < f2) 
				{
					f2 = d;
				}
			}	
			
			float id = hashwithoutsine13(vec3(p + mb) + seed);

			// Second pass for edge distance  
			for (int x = -steps; x <= steps; x++) 
			for (int y = -steps; y <= steps; y++)
			for (int z = -steps; z <= steps; z++)
			{
				// Start search at the cell that contains the closest point to "x" (found in 1st pass)
				ivec3 b = mb + ivec3(x, y, z);
				vec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;
				float d1 = dot(0.5 * (mr + r), (r - mr)); 				// IQ normalizes "r - mr" but that breaks things for the smooth version?
				float d2 = dot(0.5 * (mr + r), normalize(r - mr));

				e_smooth = smin(d1, e_smooth, smoothness);

				e = min(e, d2);

				// Also compute a smooth version of F2 in this pass
				{
					ivec3 b = ivec3(x, y, z);
					if (b != mb) 
					{
						vec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;
						float d = length(r);

						f2_smooth = smin(d, f2_smooth, smoothness);
					}
				}
			}

			// Different visualization modes 
			if (style == 0) 
			{
				return f1_smooth;
			}
			if (style == 1) 
			{
				return f2_smooth;
			}
			if (style == 2) 
			{
				return f2_smooth - f1_smooth;
				
				// "Pebbles" also cool
				//return step(0.2, f2_smooth - f1_smooth);
			}
			if (style == 3) 
			{
				// This one is really good for rock / stone effects
				float a = f1; 
				float b = f2;
				float k = 3.0;
				float h = max(k - abs(a - b), 0.0) / k;
				float final = min(a, b) - h * h * k * (1.0 / 4.0);
				return final;
			}
			if (style == 4) 
			{
				// Some random adjustments to make this style stand out more 
				return exp(5.0 * e_smooth);
			}
			if (style == 5) 
			{
				return pow(f1_smooth, 3.0);
			}
			if (style == 6) 
			{				
				const float eps = 0.0125;

				// Thicker lines as the user increases the smoothness slider
				float thickness = smoothness * 0.25 + eps;

				// Blurrier lines as the user increases the smoothness slider
				float blur = pow(smoothness, 3.0) * 0.25 + eps;

				return smoothstep(
					thickness - thickness * blur, 
					thickness + thickness * blur, 
					e
				);
			}
			if (style == 7) 
			{
				return hashwithoutsine13(vec3(p + mb) + seed);
			}
		}
	`,[rt,st,ut,gt,wt,yt]);return{simplex:i,simplexFractal:s,simplexAshima:c,fbm:j,perlin:$,voronoi:At}}(),of=class extends et{constructor(e,i,s,a,o,c,d,g,b,j,_e,$,rt,st,ut,gt,wt,yt,At){super("v3"),this.nodeType="Noise",this.scale=e,this.size=i,this.move=s,this.fA=a,this.fB=o,this.distortion=c,this.colorA=d,this.colorB=g,this.colorC=b,this.colorD=j,this.noiseType=$,this.voronoiStyle=st,this.highCut=ut,this.lowCut=gt,this.smoothness=wt,this.seed=yt,this.quality=At,this.isMask=rt,this.alpha=_e,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,i,s,a,o){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let c=Object.values(Im)[this.noiseType.value],d=c=="voronoi"?`
		float v = ${c}(st + move, voronoiStyle, smoothness, seed, quality);

		// Apply clipping to colors
		v = remap(v, lowCut, highCut, 0.0, 1.0);
		v = smax(v, 0.0, smoothness * 0.25);
		v = smin(v, 1.0, smoothness * 0.25);

		// Note that the voronoi mode only uses colors "A" and "C" from the UI 
		vec4 color = mix(colorA, colorC, v); 
		`:`
		vec3 q = vec3(${c}(st),
					   ${c}(st + vec3(1.0)),
					   ${c}(st + vec3(1.0)));
		vec3 r = vec3(${c}(st + vec3(distortion, 1.0) * q + vec3(fA, 1.0) + move),
					  ${c}(st + vec3(distortion, 1.0) * q + vec3(fB, 1.0) + move), 
					  ${c}(st * q));
		float f = ${c}(st + r);
		vec4 color;
		color = mix(colorA, colorB, clamp((f * f) * 4.0, 0.0, 1.0));
		color = mix(color, colorC, clamp(length(q), 0.0, 1.0));
		color = mix(color, colorD, clamp(length(r.x), 0.0, 1.0));
		`,g=new Ae(`vec3 ${c}customNoise(float scale, vec3 size, float move, vec2 fA, vec2 fB, vec2 distortion, vec4 colorA, vec4 colorB, vec4 colorC, vec4 colorD, int voronoiStyle, float highCut, float lowCut, float smoothness, float seed, int quality, bool isMask, float mask, float alpha, out float calpha) 
			{
                // Prevent scale of zero 
				scale = max(abs(scale), 0.001);

				vec3 st = position / size;
				st /= scale;

				${d}

				float lalpha = alpha * color.a * mask;
				calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return clamp(color, 0.0, 1.0).rgb;
			}`,[Zi.simplex,Zi.simplexFractal,Zi.simplexAshima,Zi.fbm,Zi.perlin,Zi.voronoi]),b=e.include(g),j=[];return j.push(this.scale.build(e,"f")),j.push(this.size.build(e,"v3")),j.push(this.move.build(e,"f")),j.push(this.fA.build(e,"v2")),j.push(this.fB.build(e,"v2")),j.push(this.distortion.build(e,"v2")),j.push(this.colorA.build(e,"v4")),j.push(this.colorB.build(e,"v4")),j.push(this.colorC.build(e,"v4")),j.push(this.colorD.build(e,"v4")),j.push(this.voronoiStyle.build(e,"i")),j.push(this.highCut.build(e,"f")),j.push(this.lowCut.build(e,"f")),j.push(this.smoothness.build(e,"f")),j.push(this.seed.build(e,"f")),j.push(this.quality.build(e,"i")),j.push(this.isMask.build(e,"b")),j.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),j.push(this.alpha.build(e,"f")),j.push(this.calpha),e.format(b+"("+j.join(",")+")",this.getType(e),i)}};of.numOctaves=5;var KA=class extends et{constructor(e,i,s,a,o,c,d,g,b,j,_e,$,rt,st,ut,gt){super("v3"),this.nodeType="Outline",this.firstTime=!0,this.outlineColor=e,this.contourColor=i,this.outlineWidth=s,this.contourWidth=a,this.contourThreshold=o,this.outlineThreshold=c,this.contourFrequency=d,this.outlineSmoothing=g,this.contourDirection=b,this.positionalLines=j,this.compensation=_e,this.resolution=$,this.normalMap=rt,this.depthMap=st,this.pixelRatio=ut,this.alpha=gt,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,i){let s=`g${this.uuid.toString().replace(/-/g,"")}`;if(e.require("vWorldViewDir"),e.require("worldNormal"),e.extensions.derivatives=!0,this.compensation.value&&e.define("OUTLINE_COMPENSATION",`${s}_offset`),this.firstTime){let a=this.outlineWidth.build(e,"f"),o=this.resolution.build(e,"v2"),c=this.compensation.build(e,"b"),d=this.pixelRatio.build(e,"f");e.addVertexParsVariable("randomColor","attribute vec3"),e.addVertexParsVariable("extrudeNormal","attribute vec3"),e.addVertexParsVariable(a,"uniform float"),e.addVertexParsVariable(o,"uniform vec2"),e.addVertexParsVariable(c,"uniform bool"),e.addVertexParsVariable(d,"uniform float"),e.addVertexParsVariable("vID","flat out float"),e.addFragmentParsVariable("vID","flat in float"),e.addVertexFinalCode(`
                vID = randomColor.r;
                vec2 ${s}_offset = vec2(0.0);
                if (${c}) {
                    vec4 ${s}_clipPosition = projectionMatrix * (modelViewMatrix * vec4(position, 1.0));
                    // NOTE: For certain shapes, like spheres, we get incorrect extrusion when the
                    // normals face the camera directly. So we hackily fix this by offsetting the normal
                    // by a tiny amount.
                    vec3 ${s}_clipNormal = mat3(projectionMatrix) * (mat3(modelViewMatrix) * extrudeNormal) + 0.0000001;
                    ${s}_offset = normalize(${s}_clipNormal.xy) / ${o} * (${a} / 2.0) * ${s}_clipPosition.w * 2.0 * ${d};
                    ${s}_clipPosition.xy += ${s}_offset;
                    // TODO(MAX): To handle multiple outline layers, we only want to extrude
                    // if this offset is the biggest of all the potential offsets
                    gl_Position = ${s}_clipPosition;
                }
            `)}if(e.isShader("fragment")){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let a=e.include(KA.Nodes.outline),o=[];return o.push(this.outlineColor.build(e,"c")),o.push(this.contourColor.build(e,"c")),o.push(this.outlineWidth.build(e,"f")),o.push(this.contourWidth.build(e,"f")),o.push(this.contourThreshold.build(e,"f")),o.push(this.outlineThreshold.build(e,"f")),o.push(this.contourFrequency.build(e,"f")),o.push(this.outlineSmoothing.build(e,"f")),o.push(this.contourDirection.build(e,"v3")),o.push(this.positionalLines.build(e,"b")),o.push(this.resolution.build(e,"v2")),o.push(this.normalMap.getTexture(e,"t")),o.push(this.depthMap.getTexture(e,"t")),o.push(this.pixelRatio.build(e,"f")),o.push(this.compensation.build(e,"b")),o.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),o.push(this.alpha.build(e,"f")),o.push(this.calpha),this.firstTime=!this.firstTime,e.format(a+"("+o.join(",")+")",this.getType(e),i)}else return console.warn("OutlineNode is not compatible with "+e.shader+" shader."),""}},af=KA;af.Nodes=function(){let e=new Ae(`
float sobelSample(sampler2D t, sampler2D d, vec2 uv, vec2 resolution, float outlineWidth, float pixelRatio)
{
    vec2 halton = haltonSequence[frameIndex];
    float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
    float temporalAngle  = temporalOffset * PI2;

    vec2 texelSize = (vec2(1.0) / resolution);
    vec2 offsetSize = texelSize * outlineWidth * pixelRatio;

    vec2 uvSamples[9];
    vec4 normalSamples[9];

	uvSamples[0] = uv + vec2( -offsetSize.x, -offsetSize.y) + (vogelDiskSample(0, 9, temporalAngle) * texelSize);
	uvSamples[1] = uv + vec2(0.0, -offsetSize.y) + (vogelDiskSample(1, 9, temporalAngle) * texelSize);
	uvSamples[2] = uv + vec2(  offsetSize.x, -offsetSize.y) + (vogelDiskSample(2, 9, temporalAngle) * texelSize);
	uvSamples[3] = uv + vec2( -offsetSize.x, 0.0) + (vogelDiskSample(3, 9, temporalAngle) * texelSize);
	uvSamples[4] = uv;
	uvSamples[5] = uv + vec2(  offsetSize.x, 0.0) + (vogelDiskSample(5, 9, temporalAngle) * texelSize);
	uvSamples[6] = uv + vec2( -offsetSize.x, offsetSize.y) + (vogelDiskSample(6, 9, temporalAngle) * texelSize);
	uvSamples[7] = uv + vec2(0.0, offsetSize.y) + (vogelDiskSample(7, 9, temporalAngle) * texelSize);
	uvSamples[8] = uv + vec2(  offsetSize.x, offsetSize.y) + (vogelDiskSample(8, 9, temporalAngle) * texelSize);


    normalSamples[0] = texture2D(t, uvSamples[0]);
    normalSamples[1] = texture2D(t, uvSamples[1]);
    normalSamples[2] = texture2D(t, uvSamples[2]);
    normalSamples[3] = texture2D(t, uvSamples[3]);
    normalSamples[4] = texture2D(t, uvSamples[4]);
    normalSamples[5] = texture2D(t, uvSamples[5]);
    normalSamples[6] = texture2D(t, uvSamples[6]);
    normalSamples[7] = texture2D(t, uvSamples[7]);
    normalSamples[8] = texture2D(t, uvSamples[8]);

    float depthBias = 0.0001;
    // TODO(MAX): Can we somehow reduce the number of conditionals here with MATH?!
    if (normalSamples[0].a != vID && normalSamples[0].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[0]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[1].a != vID && normalSamples[1].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[1]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[2].a != vID && normalSamples[2].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[2]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[3].a != vID && normalSamples[3].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[3]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }


    if (normalSamples[4].a != vID && normalSamples[4].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[4]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[5].a != vID && normalSamples[5].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[5]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[6].a != vID && normalSamples[6].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[6]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[7].a != vID && normalSamples[7].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[7]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[8].a != vID && normalSamples[8].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[8]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    vec3 sobel_edge_h = normalSamples[2].rgb + (2.0*normalSamples[5].rgb) + normalSamples[8].rgb - (normalSamples[0].rgb + (2.0*normalSamples[3].rgb) + normalSamples[6].rgb);
  	vec3 sobel_edge_v = normalSamples[0].rgb + (2.0*normalSamples[1].rgb) + normalSamples[2].rgb - (normalSamples[6].rgb + (2.0*normalSamples[7].rgb) + normalSamples[8].rgb);

    float edgeNormal = sqrt(dot(sobel_edge_h, sobel_edge_h) + dot(sobel_edge_v, sobel_edge_v));
    return edgeNormal;
}
`);return{outline:new Ae(`vec3 outline(vec3 outlineColor, vec3 contourColor, float outlineWidth, float contourWidth, float outlineThreshold, float contourThreshold, float outlineSmoothing, float contourFrequency, vec3 contourDirection, bool positionalLines, vec2 resolution, sampler2D normalMap, sampler2D depthMap, float pixelRatio, bool compensation, float mask, float alpha, out float calpha) {
                vec3 result = outlineColor;
                float resultAlpha = 0.0;

                vec3 N = normalize(vWNormal);
                vec2 nuv = (gl_FragCoord.xy / resolution);
                float sobelSample = compensation ? sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth / 2., pixelRatio) : sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth, pixelRatio);
                resultAlpha = smoothstep(outlineThreshold - outlineSmoothing, outlineThreshold + outlineSmoothing, sobelSample);

                //resultAlpha = 1.0;
                //result = vec3(sobelSample);

                float t = 1.0 - contourThreshold;
                if(positionalLines) {
                    vec3 NDir = position * contourDirection;
                    float NT = NDir.x + NDir.y + NDir.z;
                    float f  = fract(NT * contourFrequency * 0.01);
                    float df = fwidth(NT * contourFrequency);

                    float g = smoothstep(df * (contourWidth * 0.01), df * (contourWidth * 0.01 * 2.0), f);
                    if (g < 1.0 && resultAlpha == 0.0) {
                        result = contourColor;
                        resultAlpha = 1.0;
                    }
                 }
                 else {
                    vec3 NDir = N * contourDirection;
                    float NT = NDir.x + NDir.y + NDir.z;
                    float df = fwidth(NT * contourThreshold);
                    float f = sin(NT * 1.0 * contourFrequency);
                    float g = smoothstep(0.0, df * contourWidth, 1.0 - f);

                    if (df > (t * 0.5) && g < 1.0 && resultAlpha == 0.0) {
                        result = contourColor;
                        resultAlpha = 1.0 - g;
                    }
                 }

                 float lalpha = alpha * resultAlpha * mask;
                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				 
                 return result;
             }`,[e])}}();var Wo=class extends et{constructor(e,i,s,a,o,c,d,g,b,j,_e,$,rt,st,ut,gt,wt,yt){super("v3"),this.nodeType="Pattern",this.style=e,this.projection=i,this.axis=s,this.blending=a,this.offset=o,this.colorA=c,this.colorB=d,this.frequency=g,this.size=b,this.variation=j,this.smoothness=_e,this.zigzag=$,this.rotation=rt,this.vertical=st,this.horizontal=ut,this.sides=gt,this.isMask=yt,this.alpha=wt,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,i){if(e.isShader("fragment")){e.require("position"),e.require("uv"),e.requires.uv=[!0],e.require("normal"),e.requires.normal=!0,e.addFragmentVariable(this.calpha,"float");let s;switch(this.style.value){case 0:s="circle";break;case 1:s="ring";break;case 2:s="polygon";break;case 3:s="xcross";break;case 4:s="diamond";break;case 5:s="checkerboard";break;case 6:s="line";break;case 7:s="wave";break;default:s="circle";break}let a=`g${this.uuid.toString().replace(/-/g,"")}`,o=new Ae(`float hashwithoutsine12(vec2 p)
				{
					vec3 p3 = fract(vec3(p.xyx) * .1031);
					p3 += dot(p3, p3.yzx + 33.33);
					return fract((p3.x + p3.y) * p3.z);
				}`),c=new Ae(`vec2 rotate_uv(in vec2 uv, float a, bool repeat) 
				{
					const float mid = 0.5;
					float radians = a * (PI / 180.0);
					vec2 rotated = vec2(
						cos(radians) * (uv.x - mid) + sin(radians) * (uv.y - mid) + mid,
						cos(radians) * (uv.y - mid) - sin(radians) * (uv.x - mid) + mid
					);
					return repeat ? fract(rotated): rotated;
				}`),d="";if(this.projection.value===4){let _e=this.style.value===2?`${s}(uv0, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${s}(uv0, frequency, size, variation, smoothness_remapped, zigzag, rotation)`,$=this.style.value===2?`${s}(uv1, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${s}(uv1, frequency, size, variation, smoothness_remapped, zigzag, rotation)`,rt=this.style.value===2?`${s}(uv2, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${s}(uv2, frequency, size, variation, smoothness_remapped, zigzag, rotation)`;d=`
				vec3 p = position;
				float factor = 0.0125;
				vec2 uv0 = fract(p.xy * factor);
				vec2 uv1 = fract(p.zy * factor);
				vec2 uv2 = fract(p.xz * factor);
				
				uv0 = rotate_uv(uv0 + offset, rotation, true);
				uv1 = rotate_uv(uv1 + offset, rotation, true);
				uv2 = rotate_uv(uv2 + offset, rotation, true);
	
				float d0 = ${_e};
				float d1 = ${$};
				float d2 = ${rt};
				
				// Range from 3 to 128 seems to be good
				float exponent = (1.0 - blending) * 125.0 + 3.0;

				vec3 n = vObjectNormal;
				vec3 weights = abs(normalize(n));
				weights = pow(weights, vec3(exponent));
				weights /= dot(weights, vec3(1.0));
				d0 *= weights.z;
				d1 *= weights.x;
				d2 *= weights.y;
				float draw = d0 + d1 + d2;
	
				vec2 custom_uv = uv0 * weights.z + uv1 * weights.x + uv2 * weights.y;
				`}else{let _e=this.style.value===2?`${s}(custom_uv, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${s}(custom_uv, frequency, size, variation, smoothness_remapped, zigzag, rotation)`,$="";this.axis.value===0?$=`float radius = length(p);
					float theta = atan(p.y, p.z);
					float phi = acos(p.x / radius);`:this.axis.value===1?$=`float radius = length(p);
					float theta = atan(p.x, p.z);
					float phi = acos(p.y / radius);`:(this.axis.value,$=`float radius = length(p);
					float theta = atan(p.y, p.x);
					float phi = acos(p.z / radius);`);let rt="";switch(this.projection.value){case 0:rt="custom_uv = vUv.st;";break;case 1:break;case 2:rt=`
							vec3 p = position;
							${$}
							custom_uv = vec2(theta, phi);
							custom_uv /= PI;
							`;break}d=`
				vec2 custom_uv;
				${rt}
	
				custom_uv += offset;
				custom_uv = fract(custom_uv);
				custom_uv = rotate_uv(custom_uv, rotation, true);
	
				float draw = ${_e};
				`}let g=new Ae(`vec3 ${a}_pattern(vec3 normal, float blending, int style, vec2 offset, vec4 colorA, vec4 colorB, vec2 frequency, float size, float variation, float smoothness, float zigzag, float rotation, vec2 vertical, vec2 horizontal, int sides, bool isMask, float mask, float alpha, out float calpha) {
					const float TWO_PI = PI * 2.0;
					float smoothness_remapped = pow(smoothness, 5.0);	

					${d}

					// Construct final output color
					vec4 color = mix(colorA, colorB, draw);
					color.a = clamp(color.a, 0.0, 1.0);

					// Apply cuts
					color.a *= 
						step(vertical.x, custom_uv.y) * 
						step(custom_uv.y, vertical.y);
					color.a *= 
						step(horizontal.x, abs(custom_uv.x)) * 
						step(abs(custom_uv.x), horizontal.y);

					// Accumulate alpha 
					float lalpha = alpha * clamp(color.a, 0.0, 1.0) * mask;
					calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
					accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

					return clamp(color, 0.0, 1.0).rgb;
				}`,[c,o,Wo.DrawFunctions.circle,Wo.DrawFunctions.ring,Wo.DrawFunctions.polygon,Wo.DrawFunctions.cross,Wo.DrawFunctions.diamond,Wo.DrawFunctions.checkerboard,Wo.DrawFunctions.line,Wo.DrawFunctions.wave]),b=e.include(g),j=[];return j.push("normal"),j.push(this.blending.build(e,"f")),j.push(this.style.build(e,"i")),j.push(this.offset.build(e,"v2")),j.push(this.colorA.build(e,"v4")),j.push(this.colorB.build(e,"v4")),j.push(this.frequency.build(e,"v2")),j.push(this.size.build(e,"f")),j.push(this.variation.build(e,"f")),j.push(this.smoothness.build(e,"f")),j.push(this.zigzag.build(e,"f")),j.push(this.rotation.build(e,"f")),j.push(this.vertical.build(e,"v2")),j.push(this.horizontal.build(e,"v2")),j.push(this.sides.build(e,"i")),j.push(this.isMask.build(e,"b")),j.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),j.push(this.alpha.build(e,"f")),j.push(this.calpha),e.format(b+"("+j.join(",")+")",this.getType(e),i)}else return console.warn("PatterNode is not compatible with "+e.shader+" shader."),e.format("vec3(0.0)",this.getType(e),i)}},lf=Wo;lf.DrawFunctions=function(){let e=new Ae(`float hashwithoutsine12(vec2 p) {
				vec3 p3 = fract(vec3(p.xyx) * 0.1031);
				p3 += dot(p3, p3.yzx + 33.33);
				return fract((p3.x + p3.y) * p3.z);
			}`),i=new Ae(`vec2 tile_and_center(in vec2 uv, in vec2 frequency, in float variation, in float zigzag, in float rotation) {
                // Create tiles in UV-space
                uv *= frequency;

                // Integer coords
                vec2 i = floor(uv);

                // Offset every other row based on zigzag param, then compute fractional coords
                float row_offset = mod(i.y, 2.0);
                uv.x += row_offset * zigzag;
                vec2 f = fract(uv);

				// Rotate the tile itself:
				// const float mid = 0.5;
				// f = vec2(
				// 	cos(rotation) * (f.x - mid) + sin(rotation) * (f.y - mid) + mid,
				// 	cos(rotation) * (f.y - mid) - sin(rotation) * (f.x - mid) + mid
				// );
				// f = fract(f);

                f = f * 2.0 - 1.0;

				// Recompute integer coords after shifting - then, random value per tile 
				i = floor(uv);
				float rand = (hashwithoutsine12(i) * 5.0 + 1.0);
				float jitter = mix(1.0, rand, variation);
				f *= jitter;

                return f;
            }`,[e]),s=new Ae(`float circle(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
                return smoothstep(
                    -smoothness, 
                     smoothness, 
                     length(f) - size
                );
            }`,[i]),a=new Ae(`float ring(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);

				float d = length(f);
                const float inner_width = 0.5;

                float outer = smoothstep(-smoothness, smoothness, d - size);
                float inner = smoothstep(-smoothness, smoothness, d - size * inner_width);
				return outer + (1.0 - inner);   
            }`,[i]),o=new Ae(`float sdf_ngon(in vec2 p, in float r, in int n) {
                float an = (PI * 2.0) / float(n);
                float he = r * tan(0.5 * an);
                
                // Rotate to first sector
                p = -p.yx; 
                float bn = an * floor((atan(p.y, p.x) + 0.5 * an) / an);
                vec2  cs = vec2(cos(bn), sin(bn));
                p = mat2(cs.x, -cs.y, cs.y, cs.x)*p;
            
                // Side of polygon
                return length(p - vec2(r, clamp(p.y, -he, he))) * sign(p.x - r);
            }
            
            float polygon(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation, in int sides) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
                return smoothstep(-smoothness, smoothness, sdf_ngon(f, size, sides));
            }`,[i]),c=new Ae(`float sdf_cross(in vec2 p, in vec2 b, float r ) {
                p = abs(p); 
				p = (p.y > p.x) ? p.yx : p.xy;
                vec2  q = p - b;
                float k = max(q.y, q.x);
                vec2  w = (k > 0.0) ? q : vec2(b.y - p.x, -k);
                return sign(k) * length(max(w, 0.0)) + r;
            }
            
            // Avoid namespace conflicts 
            float xcross(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
                return smoothstep(-smoothness, smoothness, sdf_cross(f, vec2(size, size * 0.25), smoothness));
            }`,[i]),d=new Ae(`float ndot(vec2 a, vec2 b) { 
                return a.x*b.x - a.y*b.y; 
            }
            
            float sdf_diamond(in vec2 p, in vec2 b) {
                p = abs(p);
                float h = clamp(ndot(b - 2.0 * p, b) / dot(b, b), -1.0, 1.0);
                float d = length(p - 0.5 * b * vec2(1.0 - h, 1.0 + h));
                return d * sign(p.x * b.y + p.y * b.x - b.x * b.y);
            }

            float diamond(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
	            return smoothstep(-smoothness, smoothness, sdf_diamond(f, vec2(size)));
            }`,[i]),g=new Ae(`float checkerboard(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                uv *= frequency;
                vec2 i = floor(uv);

                float offset = mod(i.y, 2.0);

                uv.x += offset + zigzag * offset;
                float x = floor(uv.x);
                
                return mod(x, 2.0);
            }`),b=new Ae(`float line(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, 0.0, zigzag, rotation);
				
				// Different approach for variation param here
				float row = floor(uv * frequency).y;
				float rand = hashwithoutsine12(vec2(row));
				float s = mix(size, size * rand, variation);

				return smoothstep(
					s - smoothness, 
					s + smoothness, 
					abs(f.y)
				);
            }`,[i]),j=new Ae(`// Uses bisection 
            float udf_cos(in vec2 p, in float a, in float b, in float c, in float d) {
                // Convert all data to a primitive cosine wave
                p = c * (p - vec2(d, a));
                
                const float TWO_PI = PI * 2.0;

                // Reduce to principal half cycle
                p.x = mod(p.x, TWO_PI); 
                if (p.x > PI) {
                    p.x = TWO_PI - p.x;
                }
            
                // Find zero of derivative (minimize distance)
                float xa = 0.0;
                float xb = TWO_PI;

                // 24 bit precision
                for (int i = 0; i < 24; i++) {
                    float x = 0.5 * (xa + xb);
                    float y = x - p.x + b * c * sin(x) * (p.y - b * c * cos(x));
                    if (y < 0.0) xa = x; 
                    else xb = x;
                }
                float x = 0.5 * (xa + xb);
                
                // Compute distance    
                vec2 q = vec2(x, b * c * cos(x));
                return length(p - q) / c;
            }

            float wave(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                float repeat = frequency.x;
                uv *= repeat;
                vec2 i = floor(uv);
                float row_offset = mod(i.y, 2.0);
                uv.x += row_offset * zigzag;
                vec2 f = vec2(uv.x, fract(uv.y));

                // Generalized cosine: y(x) = a + b * cos(cx + d)
                const float amplitude = 0.125;
                float wave_frequency = frequency.y * 0.1;
                float distance_estimate = udf_cos(f, 0.50, amplitude, wave_frequency * (2.0 * PI), 0.0);

				// Different approach for variation param here
				float rand = hashwithoutsine12(vec2(i.y));
				float s = mix(size, size * rand, variation);

                return smoothstep(-smoothness, smoothness, distance_estimate - s * 0.5);
            }`);return{tileAndCenter:i,circle:s,ring:a,polygon:o,cross:c,diamond:d,checkerboard:g,line:b,wave:j}}();var ZA=class extends et{constructor(e,i,s,a,o,c,d,g){super("v3"),this.nodeType="Rainbow",this.filmThickness=e,this.movement=i,this.wavelengths=s,this.noiseStrength=a,this.noiseScale=o,this.offset=c,this.isMask=g,this.alpha=d,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,i){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let s=e.include(ZA.Nodes.rainbow),a=[];return a.push(this.filmThickness.build(e,"f")),a.push(this.movement.build(e,"f")),a.push(this.wavelengths.build(e,"v3")),a.push(this.noiseStrength.build(e,"f")),a.push(this.noiseScale.build(e,"f")),a.push(this.offset.build(e,"v3")),a.push(this.isMask.build(e,"b")),a.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),a.push(this.alpha.build(e,"f")),a.push(this.calpha),e.format(s+"("+a.join(",")+")",this.getType(e),i)}else return console.warn("RainbowNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),i)}},cf=ZA;cf.Nodes=function(){let e=new Ae(`vec3 attenuation(vec3 wavelengths, float filmThickness, float movement, float noiseStrength, float noiseScale, vec3 offset) {
                 vec3 st = position / noiseScale;
				 vec3 q = vec3(simplex3d(st),
							  simplex3d(st + vec3(1.0)),
							  simplex3d(st + vec3(1.0)));

				 vec3 r = vec3(simplex3d(st + vec3(1.4, 1.3, 1.0) * q + vec3(1.7, 9.2, 1.0)),
							  simplex3d(st + vec3(2.0, 1.2, 1.0) * q + vec3(8.3, 2.8, 1.0)),
							  simplex3d(st * q));

                 float noise = simplex3d(st + r);

                 return .5 + .5 * cos((((filmThickness + (noise * noiseStrength)) / (vec3(wavelengths.r * 1.0, wavelengths.g * 0.8, wavelengths.b * 0.6) + 1.0)) * dot(normalize(vWorldViewDir + (offset * -0.001)), normalize(vWNormal))) + movement);
             }`,[Zi.simplex]);return{rainbow:new Ae(`vec3 rainbow(float filmThickness, float movement, vec3 wavelengths, float noiseStrength, float noiseScale, vec3 offset, bool isMask, float mask, float alpha, out float calpha) {
				vec3 res = clamp(attenuation(wavelengths, filmThickness, movement, noiseStrength, noiseScale, offset), 0.0, 2.0);

				float rainbowContribution = clamp(res.r + res.g + res.b, 0.0, 1.0);

				float lalpha = alpha * rainbowContribution * mask;
				calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return res;
             }`,[e])}}();var JA=class extends et{constructor(e,i,s,a,o,c,d,g,b,j){super("v3"),this.nodeType="Toon",this.positioning=e,this.colors=i,this.steps=s,this.source=a,this.isWorldSpace=o,this.noiseStrength=c,this.noiseScale=d,this.shadowColor=g,this.offset=b,this.alpha=j,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,i){if(e.require("worldNormal"),e.require("worldPosition"),e.isShader("fragment")){e.define("COLORS_MAX",10),e.addFragmentVariable(this.calpha,"float");let s=e.include(JA.Nodes.toon),a=[];return a.push(this.positioning.build(e,"i")),a.push(this.colors.build(e,"v4[]")),a.push(this.steps.build(e,"f[]")),a.push(this.source.build(e,"v3")),a.push(this.isWorldSpace.build(e,"b")),a.push(this.noiseStrength.build(e,"f")),a.push(this.noiseScale.build(e,"f")),a.push(this.shadowColor.build(e,"v4")),a.push(this.offset.build(e,"v3")),a.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),a.push(this.alpha.build(e,"f")),a.push(this.calpha),e.format(s+"("+a.join(",")+")",this.getType(e),i)}else return console.warn("ToonNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),i)}},uf=JA;uf.Nodes=function(){let e=new Ae(`float rand(float n) {
				return fract(sin(n) * 43758.5453123);
			}`),i=new Ae(`float hash1(float p) { 
				p = fract(p * 0.011); 
				p *= p + 7.5; 
				p *= p + p; 
				return fract(p); 
			}`),s=new Ae(`float valueNoise(vec3 x) {
				const vec3 step = vec3(110, 241, 171);
			
				vec3 i = floor(x);
				vec3 f = fract(x);
			 
				// For performance, compute the base input to a 1D hash from the integer part of the argument and the 
				// incremental change to the 1D based on the 3D -> 1D wrapping
				float n = dot(i, step);
			
				vec3 u = f * f * (3.0 - 2.0 * f);
				return mix(mix(mix( hash1(n + dot(step, vec3(0, 0, 0))), hash1(n + dot(step, vec3(1, 0, 0))), u.x),
							   mix( hash1(n + dot(step, vec3(0, 1, 0))), hash1(n + dot(step, vec3(1, 1, 0))), u.x), u.y),
						   mix(mix( hash1(n + dot(step, vec3(0, 0, 1))), hash1(n + dot(step, vec3(1, 0, 1))), u.x),
							   mix( hash1(n + dot(step, vec3(0, 1, 1))), hash1(n + dot(step, vec3(1, 1, 1))), u.x), u.y), u.z);
			}`,[i]),a=new Ae(`vec3 hash3(vec3 x) {
				x = vec3(dot(x,vec3(127.1, 311.7, 74.7)),
						 dot(x,vec3(269.5, 183.3, 246.1)),
						 dot(x,vec3(113.5, 271.9, 124.6)));
			
				return fract(sin(x)*43758.5453123);
			}`),o=new Ae(`vec3 voronoiNoise(in vec3 x)
			{
				vec3 p = floor(x);
				vec3 f = fract(x);

				float id = 0.0;
				vec2 res = vec2(100.0);

				for(int k=-1; k<=1; k++)
				for(int j=-1; j<=1; j++)
				for(int i=-1; i<=1; i++)
				{
					vec3 b = vec3(float(i), float(j), float(k));

					// Comment out the "+ hash(p + b);" part below to get "square" cells
					vec3 r = vec3(b) - f + hash3(p + b);
					float d = dot(r, r);

					if (d < res.x)
					{
						id = dot(p + b, vec3(1.0, 57.0, 113.0));
						res = vec2(d, res.x);			
					}
					else if (d < res.y)
					{
						res.y = d;
					}
				}

				return vec3(sqrt(res), abs(id));
			}
			`,[a]);return{toon:new Ae(`vec3 toon(int positioning, vec4 colors[COLORS_MAX], float steps[COLORS_MAX], vec3 source, bool isWorldSpace, float noiseStrength, float noiseScale, vec4 shadowColor, vec3 offset, float mask, float alpha, out float calpha) {
				float t = 0.0;
				float shadow = 1.0;

				if (positioning == 0) {

					// Can't do this mode if lighting is "none"
					#if (defined(PHONG) || defined(LAMBERT) || defined(STANDARD))

						// Algorithm from Chapter 10 of Graphics Shaders
						const vec3 weights = vec3(0.2125, 0.7154, 0.0721);
						vec3 lpos;
						vec3 l;
						float dproduct;

						#if (NUM_POINT_LIGHTS > 0)

							#if defined(USE_SHADOWMAP) && (NUM_POINT_LIGHT_SHADOWS > 0)
								PointLightShadow pointLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_POINT_LIGHTS; i++) {
								// Light positions are in view-space for some reason?
								lpos = (inverse(viewMatrix) * vec4(pointLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;
								l = normalize(lpos - worldPosition);
								
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								
								// TODO: we want to use "intensity" but it isn't available in the shader code
								//dproduct += dot(pointLights[UNROLLED_LOOP_INDEX].color, weights);

								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS)
									pointLightShadow = pointLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getPointShadow( 
											pointShadowMap[UNROLLED_LOOP_INDEX], 
											pointLightShadow.shadowMapSize, 
											pointLightShadow.shadowBias, 
											pointLightShadow.shadowRadius,
											vPointShadowCoord[UNROLLED_LOOP_INDEX], 
											pointLightShadow.shadowCameraNear, 
											pointLightShadow.shadowCameraFar);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						#if NUM_DIR_LIGHTS > 0 
							
							#if defined(USE_SHADOWMAP) && (NUM_DIR_LIGHT_SHADOWS > 0)
								DirectionalLightShadow directionalLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_DIR_LIGHTS; i++) {
								// Use the direction vector for directional lights instead
								l = (inverse(viewMatrix) * vec4(directionalLights[UNROLLED_LOOP_INDEX].direction, 0.0)).xyz;
		
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS)
									directionalLightShadow = directionalLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getShadow( 
										UNROLLED_LOOP_INDEX,
										directionalShadowMap[UNROLLED_LOOP_INDEX], 
										directionalLightShadow.shadowMapSize, 
										directionalLightShadow.shadowBias, 
										directionalLightShadow.shadowRadius, 
										vDirectionalShadowCoord[UNROLLED_LOOP_INDEX]);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						#if NUM_SPOT_LIGHTS > 0 
							
							#if defined(USE_SHADOWMAP) && (NUM_SPOT_LIGHT_SHADOWS > 0)
								SpotLightShadow spotLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_SPOT_LIGHTS; i++) {
								lpos = (inverse(viewMatrix) * vec4(spotLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;
								l = normalize(lpos - worldPosition);
								
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS)
									spotLightShadow = spotLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getShadow(
										UNROLLED_LOOP_INDEX,
										spotShadowMap[UNROLLED_LOOP_INDEX], 
										spotLightShadow.shadowMapSize, 
										spotLightShadow.shadowBias, 
										spotLightShadow.shadowRadius, 
										vSpotLightCoord[UNROLLED_LOOP_INDEX]);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						t = clamp(t, 0.0, 1.0);
				
					#endif

				} else if (positioning == 1) {
					
					vec3 origin = mix(position, worldPosition, float(isWorldSpace));
					vec3 direction = normalize(source - origin);
					t = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;	

				} else {

					vec3 origin = worldPosition;
					vec3 source = cameraPosition - offset;
					vec3 direction = normalize(source - origin);
					t = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;	
					
				}

				if (noiseStrength > 0.0) {
					// Distort with noise
					vec3 st = position / noiseScale;
					
					// Voronoi "smooth" noise
					float noise = 1.0 - voronoiNoise(st).x;

					// Voronoi cellular noise
					//float noise = 1.0 - rand(voronoiNoise(st).z);

					// Position warp noise
					// vec3 offset = vec3(
					// 	simplex3d(st),
					// 	simplex3d(st + vec3(111.1, 143.89, 217.19)),
					// 	simplex3d(st + vec3(171.1, 247.89, 117.23))
					// );
					// st += offset;
					// float noise = valueNoise(st);

					t += noise * noiseStrength;
				}

				t = clamp(t, 0.0, 1.0);

				// Compute ramp color
				float p;
				vec4 color = colors[0];
				for (int i = 1; i < COLORS_MAX; i++) {
					p = clamp((t - steps[i-1]) / (steps[i] - steps[i-1]), 0.0, 1.0);
					color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
				}

				// Incorporate custom shadow color
				if (positioning == 0) {

					vec3 blendedShadow = mix(color.rgb, shadowColor.rgb, shadowColor.a);
					color.rgb = mix(blendedShadow, color.rgb, shadow);
				
				}

				// Accumulate alpha as usual
				float lalpha = alpha * color.a * mask;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha;

				return color.xyz;

            }`,[Zi.simplex,e,s,o])}}();var $I=function(){return{textureBicubic:new Ae(`float w0( float a ) {
            return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
        }
    
        float w1( float a ) {
            return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
        }
    
        float w2( float a ){
            return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
        }
    
        float w3( float a ) {
            return ( 1.0 / 6.0 ) * ( a * a * a );
        }
    
        // g0 and g1 are the two amplitude functions
        float g0( float a ) {
            return w0( a ) + w1( a );
        }
    
        float g1( float a ) {
            return w2( a ) + w3( a );
        }
    
        // h0 and h1 are the two offset functions
        float h0( float a ) {
            return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
        }
    
        float h1( float a ) {
            return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
        }
    
        vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
            uv = uv * texelSize.zw + 0.5;
    
            vec2 iuv = floor( uv );
            vec2 fuv = fract( uv );
    
            float g0x = g0( fuv.x );
            float g1x = g1( fuv.x );
            float h0x = h0( fuv.x );
            float h1x = h1( fuv.x );
            float h0y = h0( fuv.y );
            float h1y = h1( fuv.y );
    
            vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
            vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
            vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
            vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
    
            return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) + 
                   g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
        }

        vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
            vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
            vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
            vec2 fLodSizeInv = 1.0 / fLodSize;
            vec2 cLodSizeInv = 1.0 / cLodSize;
            vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
            vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
            return mix( fSample, cSample, fract( lod ) );
        }`)}}();function eR(e,i){return e>=i?new z$1(i/e,1):new z$1(1,e/i)}var $A=class extends et{constructor(e,i,s,a,o,c,d,g){super("v3"),this.nodeType="Transmission",this.thickness=e,this.ior=i,this.roughness=s,this.transmissionSamplerSize=a,this.transmissionSamplerMap=o,this.transmissionDepthMap=c,this.aspectRatio=d,this.alpha=g,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,i){if(e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0,e.isShader("fragment")){e.define("NUM_SAMPLES",6),e.define("BLUR_SLOD",Math.pow(2,Ze.transmissionLod.value)),e.require("worldPosition"),e.requires.worldNormal=!0,e.requires.modelMatrix=!0,e.requires.projectionMatrix=!0,e.addFragmentVariable(this.calpha,"float");let s=e.include($A.Nodes.transmission),a=[];return a.push(this.thickness.build(e,"f")),a.push(this.ior.build(e,"f")),a.push(this.roughness.build(e,"f")),a.push(this.transmissionSamplerSize.build(e,"v2")),a.push(this.transmissionSamplerMap.getTexture(e,"t")),a.push(this.transmissionDepthMap.getTexture(e,"t")),a.push(this.aspectRatio.build(e,"v2")),a.push("normal"),a.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),a.push(this.alpha.build(e,"f")),a.push(this.calpha),e.format(s+"("+a.join(",")+")",this.getType(e),i)}else return console.warn("TransmissionNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),i)}},hf=$A;hf.Nodes=function(){let e=new Ae(`vec3 blur(sampler2D sp, vec2 U, vec2 scale, float lod, sampler2D dm, vec2 unrefractedU, vec2 aspectRatio) {
                // Slightly modified version of this:
                // https://www.shadertoy.com/view/ltScRG

				// Special case for blur == 0.0
				if (lod == 0.0) {
					#ifdef TEXTURE_LOD_EXT
					return texture2DLodEXT( sp, U, 0.0).rgb;
					#else
					return textureLod( sp, U, 0.0).rgb;
					#endif
				}
				
				vec2 texelSize = vec2(1.0) / resolution;
                vec2 halton = haltonSequence[frameIndex];
                float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
                float temporalAngle  = temporalOffset * PI2;
				vec3 res = vec3(0.0);
                vec2 uv = vec2(0.0);
                vec2 offset = vec2(0.0);
                vec2 vogelSample = vec2(0.0);
                for (int i = 0; i < NUM_SAMPLES; i++) {
                    vogelSample =  vogelDiskSample(i, NUM_SAMPLES, temporalAngle) * texelSize;
                    offset = vogelSample * scale * (lod * 10.0); // TODO: used to be hardcoded to 20
                    uv = U + offset;
                    float opaqueDepth = unpackRGBAToDepth(textureLod(dm, uv, lod));
                    if (opaqueDepth != 0.0 && opaqueDepth < gl_FragCoord.z) {
                        uv = unrefractedU;
                        lod = lod > 4.0 ? lod : lod / 2.0;
                    }
                    res += textureLod(sp, uv, lod).rgb;
                }
                return res / float(NUM_SAMPLES);
            }`),i=new Ae(`vec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {
		        // Direction of refracted light.
		        vec3 refractionVector = refract( -v,  n, 1.0 / ior );
		        
				// Compute rotation-independant scaling of the model matrix.
		        vec3 modelScale;
		        modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		        modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		        modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );

		        // The thickness is specified in local space
		        return normalize( refractionVector ) * thickness * modelScale;
	        }`),s=new Ae(`float applyIorToRoughness( float roughness, float ior ) {
				// Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and
				// an IOR of 1.5 results in the default amount of microfacet refraction.
				return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
			}`),a=new Ae(`vec3 getTransmissionSample( vec2 fragCoord, float roughness, float ior, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 unrefractedCoords, vec2 aspectRatio) {
				// Threejs exports do not pass a depth map to this shader, so we have to fallback to the "Threejs method of blurring" - see
				// also the code in convertTransmission.ts, which runs during export
				#ifdef IS_THREEJS_EXPORT
					float lod = log2(transmissionSamplerSize.x) * applyIorToRoughness(roughness / 5.0, ior);
					return textureBicubic(transmissionSamplerMap, fragCoord.xy, lod).rgb;
				#else
					float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
					float lod = applyIorToRoughness(roughness, ior);
					return blur(transmissionSamplerMap, fragCoord, vec2(lod), min(framebufferLod / 5.5, 8.5), transmissionDepthMap, unrefractedCoords, aspectRatio);
				#endif
			}`,[$I.textureBicubic,s,e]),o=new Ae(`vec3 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;

				// Project refracted vector on the framebuffer, while mapping to normalized device coordinates.
				vec4 ndcPos = projMatrix * viewMatrix *  vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;

				vec4 ndcPosUnrefracted = projMatrix * viewMatrix * vec4(position, 1.0 );
				vec2 unrefractedCoords = ndcPosUnrefracted.xy / ndcPosUnrefracted.w;
				unrefractedCoords += 1.0;
				unrefractedCoords /= 2.0;

				// Sample framebuffer to get pixel the refracted ray hits.
				return getTransmissionSample( refractionCoords, roughness, ior, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, unrefractedCoords, aspectRatio );
    		}`,[a,i]);return{transmission:new Ae(`vec3 transmission(float thickness, float ior, float roughness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio, vec3 normal, float mask, float alpha, out float calpha) {
                vec3 v = vec3(0.);
                if (isOrthographic) {
                    v = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
                } else {
                    v = normalize(vWPosition - cameraPosition);
                }
                vec3 transmission = getIBLVolumeRefraction(vWNormal, -v, roughness,  vWPosition, modelMatrix, viewMatrix, projectionMatrix, ior, thickness, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, aspectRatio );
                
				float lalpha = alpha * mask;
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * alpha;

				return transmission;
            }`,[o])}}();var e_=(e=>(e.NOISE="noise",e.MAP="map",e))(e_||{}),t_=class extends et{constructor(e,i,s,a,o,c,d,g,b,j,_e){super("v3"),this.displacementTypeIndex=new Dt(0),this.nodeType="VertexDisplacement",this.intensity=e,this.movementOrTexture=i,Object.values(e_)[this.displacementTypeIndex.value]==="map"&&(this.mat=new Zd(this.movementOrTexture.value.matrix)),this.cropOrOffset=s,this.scale=j,this.noiseFunctionIndex=_e,this.voronoiStyle=a,this.smoothness=o,this.seed=c,this.highCut=d,this.lowCut=g,this.quality=b}generate(e,i){if(e.isShader("vertex")){e.define("USE_LAYER_DISPLACE");let s,a=[];switch(a.push("displaced_position"),a.push("displaced_normal"),Object.values(e_)[this.displacementTypeIndex.value]){case"map":{s=e.include(t_.Nodes.map),a.push(this.movementOrTexture.getTexture(e,"t")),a.push("uv"),a.push(this.cropOrOffset.build(e,"f")),this.mat&&a.push(this.mat.build(e,"mat3"));break}case"noise":{let o=Object.values(Im)[this.noiseFunctionIndex.value],c=new Ae(`vec3 orthogonal(vec3 v) {
							return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
						}`),d=o=="voronoi"?`
					float v = ${o}((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1), voronoiStyle, smoothness, seed, quality);
					v = remap(v, lowCut, highCut, 0.0, 1.0);
					v = smax(v, 0.0, smoothness * 0.25);
					v = smin(v, 1.0, smoothness * 0.25);

					return p + n * v * intensity;
					`:`
					return p + n * ${o}((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1)) * intensity;
					`,g=new Ae(`vec3 distorted(vec3 p, vec3 n, float scale, float intensity, vec3 offset, float neighbour_offset, float movement, int voronoiStyle, float smoothness, float seed, float highCut, float lowCut, int quality) {
							${d}
						}`,[Zi.simplex,Zi.simplexFractal,Zi.simplexAshima,Zi.fbm,Zi.perlin,Zi.voronoi]),b=new Ae(`vec3 vertexDisplacementNoise(vec3 position, vec3 normal, float scale, vec3 offset, float movement, int voronoiStyle, float smoothness, float seed, float highCut, float lowCut, int quality, float intensity, out vec3 displaced_normal) {
							vec3 displaced_position = distorted(position, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);
							vec3 tangent1 = orthogonal(normal);
							vec3 tangent2 = normalize(cross(normal, tangent1));

                            // TODO(Max): The distance to the neighbors was originally scaled by 0.1.
                            // This caused some small oval/circular visual artifacts in the lighting.
                            // For now, simply using neighbors further away betters the problem,
                            // but we should figure out the underlying cause when we have some time.
                            // Maybe its related to how we calculate the tangent and bitangent?
							vec3 nearby1 = position + tangent1;
							vec3 nearby2 = position + tangent2;
							vec3 distorted1 = distorted(nearby1, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);
							vec3 distorted2 = distorted(nearby2, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);
							displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
							return displaced_position;
						}`,[g,c]);s=e.include(b),a.push(this.scale.build(e,"f")),a.push(this.cropOrOffset.build(e,"v3")),a.push(this.movementOrTexture.build(e,"f")),a.push(this.voronoiStyle.build(e,"i")),a.push(this.smoothness.build(e,"f")),a.push(this.seed.build(e,"f")),a.push(this.highCut.build(e,"f")),a.push(this.lowCut.build(e,"f")),a.push(this.quality.build(e,"i"));break}}return a.push(this.intensity.build(e,"f")),a.push("displaced_normal"),e.format(s+"("+a.join(",")+")",this.getType(e),i)}else return console.warn("VertexDisplacementNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),i)}},df=t_;df.Nodes=function(){let e=new Ae(`vec3 orthogonal(vec3 v) {
				return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
			}`),i=new Ae(`float displacementMapTexture(sampler2D tex, float crop, vec2 uv, mat3 mat, vec2 offset) {
				vec2 uvs = (mat * vec3(uv * 2.0 - 1.0, 1.0) / 2.0 + 0.5).xy + offset;
				vec4 tmp = texture2D(tex, uvs);
				vec3 col = tmp.rgb;
				if (crop > 0.5) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						return 0.0;
					}
				}
				return col.r;
			}`);return{map:new Ae(`vec3 vertexDisplacementMap(vec3 position, vec3 normal, sampler2D tex, vec2 uv, float crop, mat3 mat, float intensity, out vec3 displaced_normal) {
				vec3 displaced_position = position + normal * displacementMapTexture(tex, crop, uv, mat, vec2(0.0)) * intensity;
				vec3 tangent1 = normalize(orthogonal(normal));
				vec3 tangent2 = normalize(cross(normal, tangent1));
				vec3 nearby1 = position + tangent1 * 0.1;
				vec3 nearby2 = position + tangent2 * 0.1;
				vec3 distorted1 = nearby1 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				vec3 distorted2 = nearby2 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
				return displaced_position;
			}`,[e,i])}}();var Ze={normalRenderTarget:new Pn,normalRenderTargetDepth:new Pn,transmissionRenderTarget:new Pn,aspectRatio:new qr,transmissionSize:new qr(2048,2048),transmissionRenderTargetDepth:new Pn,aoRenderTarget:new Pn,aoEnabled:new Jr,pixelRatioNode:new ke(1),resolution:new qr,penumbraSize:new no(5,.5),frameIndex:new Dt(0),transmissionLod:new Dt(2)};for(let e of Object.values(Ze))e.isRenderGlobal=!0;var tx={skiaWasmUrl:"https://unpkg.com/@splinetool/ui-wasm@1.0.26/build/ui.wasm"},za=class extends Xi{constructor(){super("basic"),this.nodeType="Basic",this.color=new rr(si),this.shadingAlpha=new ke(1),this.shadingBlend=new Dt(0),this.previousModelViewMatrix=new sn,this.previouseProjectionMatrix=new sn}get category(){return"phong"}generate(e){let i;if(e.isShader("vertex")){let s=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:Ze.frameIndex}),e.mergeUniform({resolution:Ze.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(Xs.merge([De$1.fog])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>"].join(`
`));let a=["#include <beginnormal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];s&&a.push(s.code,s.result?"displaced_position = "+s.result+";":""),a.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","	vNormal = transformedNormal;","#endif"),a.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>"),a.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),i=a.join(`
`)}else{this.color===void 0&&(this.color=new rr(si)),this.color.analyze(e,{slot:"color"}),this.alpha&&this.alpha.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"});let s=this.color.flow(e,"c",{slot:"color"}),a=this.alpha?this.alpha.flow(e,"f"):void 0,o=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0,c=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0;e.requires.transparent=a!==void 0,e.addParsCode(["varying vec3 vWPosition;","#include <fog_pars_fragment>","#include <dithering_pars_fragment>","varying vec3 vViewPosition;","#include <normal_pars_fragment>"].join(`
`));let d=["#include <normal_fragment_begin>",s.code];a&&d.push(a.code,"#ifdef ALPHATEST"," if ( "+a.result+" <= ALPHATEST ) discard;","#endif"),c?d.push(c.code,`vec3 outgoingLight = ${s.result};`,`vec3 finalColor = spe_blend(outgoingLight, ${c.result}, 1.0, SPE_BLENDING_NORMAL);`):d.push(`vec3 finalColor = ${s.result};`);let g="1.0";this.mask&&(this.mask.analyze(e),g=`luminance(${this.mask.flow(e,"v3").result})`),a?d.push(`gl_FragColor = vec4( finalColor, accumAlpha * ${a.result} * ${g} );`):d.push("gl_FragColor = vec4("+s.result+", 1.0 );"),o&&d.push(`gl_FragColor.a *= ${o.result};`),d.push("#include <fog_fragment>","#include <dithering_fragment>"),i=d.join(`
`)}return i}},Rm=class extends Xi{constructor(){super("lambert"),this.nodeType="Lambert",this.color=new rr(si),this.emissive=new rr(0),this.emissiveIntensity=new ke(1),this.previousModelViewMatrix=new sn,this.previouseProjectionMatrix=new sn,this.shadingAlpha=new ke(1),this.shadingBlend=new Dt(0),this.occlusion=new Jr(!0)}get category(){return"lambert"}build(e){let i;if(e.define("LAMBERT"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let s=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:Ze.frameIndex}),e.mergeUniform({resolution:Ze.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(Xs.merge([De$1.fog,De$1.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <color_pars_vertex>","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let a=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];s&&a.push(s.code,s.result?"displaced_position = "+s.result+";":""),a.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),a.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>",`
					vec3 diffuse = vec3( 1.0 );
					GeometricContext geometry;
					geometry.position = mvPosition.xyz;
					geometry.normal = normalize( transformedNormal );
					geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
				`),a.push(`
					GeometricContext backGeometry;
					backGeometry.position = geometry.position;
					backGeometry.normal = -geometry.normal;
					backGeometry.viewDir = geometry.viewDir;
					vLightFront = vec3( 0.0 );
					vIndirectFront = vec3( 0.0 );
					#ifdef DOUBLE_SIDED
						vLightBack = vec3( 0.0 );
						vIndirectBack = vec3( 0.0 );
					#endif
					IncidentLight directLight;
					float dotNL;
					vec3 directLightColor_Diffuse;
					vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
					vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
					#ifdef DOUBLE_SIDED
						vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
						vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
					#endif
					#if NUM_POINT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
							getPointLightInfo( pointLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_SPOT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
							getSpotLightInfo( spotLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_DIR_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
							getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_HEMI_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
							vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
							#ifdef DOUBLE_SIDED
								vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
							#endif
						}
						#pragma unroll_loop_end
					#endif
				`,"	#include <shadowmap_vertex>","	#include <fog_vertex>"),a.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),i=a.join(`
`)}else{e.mergeUniform({penumbraSize:Ze.penumbraSize}),e.mergeUniform({frameIndex:Ze.frameIndex}),e.mergeUniform({aoMap:Ze.aoRenderTarget}),e.mergeUniform({aoEnabled:Ze.aoEnabled}),this.color===void 0&&(this.color=new rr(si)),this.color.analyze(e,{slot:"color"}),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let s=this.color.flow(e,"c",{slot:"color"}),a=this.emissive.flow(e,"c",{slot:"emissive"}),o=this.emissiveIntensity.flow(e,"f",{slot:"emissive"}),c=this.occlusion.flow(e,"b",{slot:"occlusion"}),d=this.shadingAlpha.flow(e,"f"),g=this.shadingBlend.flow(e,"i"),b=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,j=this.alpha?this.alpha.flow(e,"f"):void 0,_e=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=j!==void 0,e.addParsCode(["uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#include <normal_pars_fragment>","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <fog_pars_fragment>","#include <shadowmap_pars_fragment>","#include <shadowmask_pars_fragment>","#include <clipping_planes_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let $=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx, viewdy));
				bool isFrontFacing = (dot(normal, faceNormal) >= 0.0);
				`,"#include <clipping_planes_fragment>"];$.push(s.code,"vec3 diffuseColor = "+s.result+";","ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );"),j&&$.push(j.code,"#ifdef ALPHATEST","if ( "+j.result+" <= ALPHATEST ) discard;","#endif"),$.push("#ifdef DOUBLE_SIDED","	reflectedLight.indirectDiffuse += ( isFrontFacing ) ? vIndirectFront : vIndirectBack;","#else","	reflectedLight.indirectDiffuse += vIndirectFront;","#endif","#include <lightmap_fragment>","reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );","#ifdef DOUBLE_SIDED","	reflectedLight.directDiffuse = ( isFrontFacing ) ? vLightFront : vLightBack;","#else","	reflectedLight.directDiffuse = vLightFront;","#endif","reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();"),a&&$.push(a.code,"reflectedLight.directDiffuse += "+a.result+" * "+o.result+";"),$.push("vec3 ao = aoEnabled && "+c.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = (reflectedLight.directDiffuse + reflectedLight.indirectDiffuse) ;");let rt="1.0";this.mask&&(this.mask.analyze(e),rt=`luminance(${this.mask.flow(e,"v3").result})`),$.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${d.result} * ${rt} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${d.result} * ${rt}, ${g.result} );

					outgoingLight *= ao;
				}
				`),b&&$.push(b.code,`outgoingLight = spe_blend(outgoingLight, ${b.result}, 1.0, SPE_BLENDING_NORMAL);`),j?$.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${j.result} );`):$.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),_e&&$.push(`gl_FragColor.a *= ${_e.result};`),$.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),i=$.join(`
`)}return i}},Ua=function(){let e=new Ae(`vec2 dHdxy(sampler2D bumpMap, vec2 bumpMapUv, float bumpScale) {

            // Gradient of UVs w.r.t. X coordinate (in screen-space)
            vec2 dSTdx = dFdx(bumpMapUv);

            // Gradient of UVs w.r.t. Y coordinate (in screen-space)
            vec2 dSTdy = dFdy(bumpMapUv);
            
            // Forward differencing
            float Hll = bumpScale * luminance(texture(bumpMap, bumpMapUv).rgb);
            float dBx = bumpScale * luminance(texture(bumpMap, bumpMapUv + dSTdx).rgb) - Hll;
            float dBy = bumpScale * luminance(texture(bumpMap, bumpMapUv + dSTdy).rgb) - Hll;
            
            return vec2( dBx, dBy );
        }`),i=new Ae(`vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
            vec3 vSigmaX = dFdx( surf_pos.xyz );
            vec3 vSigmaY = dFdy( surf_pos.xyz );
            vec3 vN = surf_norm; // normalized
            
            vN = normalize(vN);

            vec3 R1 = cross( vSigmaY, vN );
            vec3 R2 = cross( vN, vSigmaX );

            R1 = normalize(R1);
            R2 = normalize(R2);
    
            float fDet = dot( vSigmaX, R1 ) * faceDirection;
    
            vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
            return normalize( abs( fDet ) * vN - vGrad );
        }`);return{dHdxy:e,perturbNormalArb:i}}(),Lm=class extends Xi{constructor(){super("phong"),this.nodeType="Phong",this.color=new rr(si),this.specular=new rr(1118481),this.shininess=new ke(30),this.previousModelViewMatrix=new sn,this.previouseProjectionMatrix=new sn,this.shadingAlpha=new ke(1),this.shadingBlend=new Dt(0),this.occlusion=new Jr(!0)}get category(){return"phong"}build(e){let i;if(e.define("PHONG"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let s=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:Ze.frameIndex}),e.mergeUniform({resolution:Ze.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(Xs.merge([De$1.fog,De$1.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <skinning_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let a=["#include <beginnormal_vertex>",`
				#include <skinbase_vertex>
				#include <skinnormal_vertex>
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif


				vec3 displaced_position = position;
				vec3 displaced_normal = objectNormal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];s&&a.push(s.code,s.result?"displaced_position = "+s.result+";":""),a.push("transformed = displaced_position;","#include <skinning_vertex>","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),a.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),a.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),i=a.join(`
`)}else{e.mergeUniform({penumbraSize:Ze.penumbraSize}),e.mergeUniform({frameIndex:Ze.frameIndex}),e.mergeUniform({aoMap:Ze.aoRenderTarget}),e.mergeUniform({aoEnabled:Ze.aoEnabled}),this.color===void 0&&(this.color=new rr(si)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e);let s=this.occlusion.flow(e,"b",{slot:"occlusion"});this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let a=this.color.flow(e,"c",{slot:"color"}),o=this.specular.flow(e,"c"),c=this.shininess.flow(e,"f"),d=this.shadingAlpha.flow(e,"f"),g=this.shadingBlend.flow(e,"i"),b=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,j=this.alpha?this.alpha.flow(e,"f"):void 0,_e=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=j!==void 0,e.addParsCode(["varying vec3 vWPosition;","uniform vec3 emissive;","uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","#include <normal_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_phong_pars_fragment>","#include <shadowmap_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let $=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	BlinnPhongMaterial material;"];if(this.bumpMap){e.include(Ua.dHdxy),e.include(Ua.perturbNormalArb);let st=this.bumpMap.texture.flow(e,"t"),ut=this.bumpMap.flow(e,"v3"),gt=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",wt="";this.bumpMap.projection.value===4?wt=`
					vec3 bumpNormal = vec3(0.0);
					{
						vec2 uv0 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						vec2 grad0 = dHdxy(${st.result}, uv0, ${gt});
						vec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);

						vec2 grad1 = dHdxy(${st.result}, uv1, ${gt});
						vec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);

						vec2 grad2 = dHdxy(${st.result}, uv2, ${gt});
						vec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);
						
						bumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;
						bumpNormal = normalize(bumpNormal);
					}

					normal = bumpNormal;
					`:wt=`
					vec2 bumpMapCachedUv = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs;
					vec2 grad = dHdxy(${st.result}, bumpMapCachedUv, ${gt});
					normal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );
					`,$.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${ut.result};
					${wt}
					`)}$.push(a.code,"	vec3 diffuseColor = "+a.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","	vec3 totalEmissiveRadiance = emissive;",o.code,"	vec3 specular = "+o.result+";",c.code,"	float shininess = max( 0.0001, "+c.result+" );","	float specularStrength = 1.0;"),j&&$.push(j.code,"#ifdef ALPHATEST","if ( "+j.result+" <= ALPHATEST ) discard;","#endif"),$.push("material.diffuseColor = diffuseColor;"),$.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),$.push("vec3 ao = aoEnabled && "+s.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse)) + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;");let rt="1.0";this.mask&&(this.mask.analyze(e),rt=`luminance(${this.mask.flow(e,"v3").result})`),$.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${d.result} * ${rt} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${d.result} * ${rt}, ${g.result} );
					
					outgoingLight *= ao;
				}
				`),b&&$.push(b.code,`outgoingLight = spe_blend(outgoingLight, ${b.result}, 1.0, SPE_BLENDING_NORMAL);`),j?$.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${j.result});`):$.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),_e&&$.push(`gl_FragColor.a *= ${_e.result};`),$.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),i=$.join(`
`)}return i}},Bm=class extends Xi{constructor(){super("standard"),this.nodeType="Standard",this.color=new rr(si),this.roughness=new ke(.3),this.metalness=new ke(0),this.reflectivity=new ke(.5),this.previousModelViewMatrix=new sn,this.previouseProjectionMatrix=new sn,this.shadingAlpha=new ke(1),this.shadingBlend=new Dt(0),this.occlusion=new Jr(!0)}get category(){return"physical"}build(e){let i;if(e.define("STANDARD"),e.requires.lights=!0,e.extensions.derivatives=!0,e.extensions.shaderTextureLOD=!0,e.isShader("vertex")){let s=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:Ze.frameIndex}),e.mergeUniform({resolution:Ze.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(Xs.merge([De$1.fog,De$1.lights])),De$1.LTC_1&&(e.uniforms.ltc_1={value:void 0},e.uniforms.ltc_2={value:void 0}),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let a=["#include <beginnormal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];s&&a.push(s.code,s.result?"displaced_position = "+s.result+";":""),a.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),a.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>","#include <shadowmap_vertex>"),a.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),i=a.join(`
`)}else{e.mergeUniform({penumbraSize:Ze.penumbraSize}),e.mergeUniform({frameIndex:Ze.frameIndex}),e.mergeUniform({aoMap:Ze.aoRenderTarget}),e.mergeUniform({aoEnabled:Ze.aoEnabled});let s={gamma:!0};this.color===void 0&&(this.color=new rr(si)),this.color.analyze(e,{slot:"color",context:s}),this.roughness.analyze(e),this.metalness.analyze(e);let a=this.occlusion.flow(e,"b",{slot:"occlusion"});this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e),this.reflectivity&&this.reflectivity.analyze(e);let o=this.color.flow(e,"c",{slot:"color",context:s}),c=this.roughness.flow(e,"f"),d=this.metalness.flow(e,"f"),g=this.shadingAlpha.flow(e,"f"),b=this.shadingBlend.flow(e,"i"),j=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,_e=this.alpha?this.alpha.flow(e,"f"):void 0,$=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0,rt=this.reflectivity?this.reflectivity.flow(e,"f"):void 0;e.requires.transparent=_e!==void 0,e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","#include <normal_pars_fragment>","#include <dithering_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_physical_pars_fragment>","#include <shadowmap_pars_fragment>"].join(`
`));let st=["#include <clipping_planes_fragment>","	#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	PhysicalMaterial material;","	material.diffuseColor = vec3( 1.0 );"];if(this.bumpMap){e.include(Ua.dHdxy),e.include(Ua.perturbNormalArb);let gt=this.bumpMap.texture.flow(e,"t"),wt=this.bumpMap.flow(e,"v3"),yt=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",At="";this.bumpMap.projection.value===4?At=`
					vec3 bumpNormal = vec3(0.0);
					{
						vec2 uv0 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						vec2 grad0 = dHdxy(${gt.result}, uv0, ${yt});
						vec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);

						vec2 grad1 = dHdxy(${gt.result}, uv1, ${yt});
						vec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);

						vec2 grad2 = dHdxy(${gt.result}, uv2, ${yt});
						vec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);
						
						bumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;
						bumpNormal = normalize(bumpNormal);
					}

					normal = bumpNormal;
					`:At=`
					vec2 bumpMapCachedUv = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs;
					vec2 grad = dHdxy(${gt.result}, bumpMapCachedUv, ${yt});
					normal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );
					`,st.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${wt.result};
					${At}
					`)}if(st.push(o.code,"	vec3 diffuseColor = "+o.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",d.code,"	float metalnessFactor = "+d.result+";"),this.roughnessMap){let gt=this.roughnessMap.texture.flow(e,"t"),wt=this.roughnessMap.flow(e,"v3"),yt="";this.roughnessMap.projection.value===4?yt=`
					float roughnessChange = 1.0;
					{
						vec2 uv0 = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						float r0 = luminance(texture(${gt.result}, uv0).rgb) * roughnessScale;
						float r1 = luminance(texture(${gt.result}, uv1).rgb) * roughnessScale;
						float r2 = luminance(texture(${gt.result}, uv2).rgb) * roughnessScale;

						roughnessChange = (r0 * weights.z + r1 * weights.x + r2 * weights.y);
					}
					float roughnessFactor = roughnessChange * ${c.result};
					`:yt=`
					vec2 roughnessMapCachedUv = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs;

					vec4 vals = texture(${gt.result},  roughnessMapCachedUv);
					float roughnessFactor = luminance(vals.rgb) * ${c.result};
					`,st.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${wt.result};

					const float roughnessScale = 1.0;

					${yt}
				`)}else st.push(c.code,"	float roughnessFactor = "+c.result+";");_e&&st.push(_e.code,"#ifdef ALPHATEST","	if ( "+_e.result+" <= ALPHATEST ) discard;","#endif"),st.push("vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );"),st.push("material.diffuseColor = diffuseColor * ( 1.0 - metalnessFactor );","material.roughness = max( roughnessFactor, 0.0525 );","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.roughness = clamp( roughnessFactor, 0.04, 1.0 );"),rt?st.push(rt.code,"material.specularColor = mix( vec3( 0.16 * pow2( "+rt.result+" ) ), diffuseColor, metalnessFactor );"):st.push("material.specularColor = mix( vec3( 0.04 ), diffuseColor, metalnessFactor );"),st.push("#include <lights_fragment_begin>"),st.push("#include <lights_fragment_end>"),st.push("vec3 ao = aoEnabled && "+a.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse)) + reflectedLight.directSpecular + reflectedLight.indirectSpecular;");let ut="1.0";this.mask&&(this.mask.analyze(e),ut=`luminance(${this.mask.flow(e,"v3").result})`),st.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${g.result} * ${ut} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${g.result} * ${ut}, ${b.result} );
					
					outgoingLight *= ao;
				}
				`),j&&st.push(j.code,`outgoingLight = spe_blend(outgoingLight, ${j.result}, 1.0, SPE_BLENDING_NORMAL);`),_e?st.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${_e.result} );`):st.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),$&&st.push(`gl_FragColor.a *= ${$.result};`),st.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),i=st.join(`
`)}return i}},Nm=class extends Xi{constructor(){super("toon"),this.nodeType="Toon",this.color=new rr(si),this.specular=new rr(1118481),this.shininess=new ke(30),this.previousModelViewMatrix=new sn,this.previouseProjectionMatrix=new sn,this.shadingAlpha=new ke(1),this.shadingBlend=new Dt(0)}get category(){return"toon"}build(e){let i;if(e.define("TOON"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let s=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:Ze.frameIndex}),e.mergeUniform({resolution:Ze.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(Xs.merge([De$1.fog,De$1.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let a=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];s&&a.push(s.code,s.result?"displaced_position = "+s.result+";":""),a.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),a.push("	#include <project_vertex>","	#include <fog_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),a.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),i=a.join(`
`)}else{e.mergeUniform({penumbraSize:Ze.penumbraSize}),e.mergeUniform({frameIndex:Ze.frameIndex}),e.mergeUniform({aoMap:Ze.aoRenderTarget}),e.mergeUniform({aoEnabled:Ze.aoEnabled}),this.color===void 0&&(this.color=new rr(si)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let s=this.color.flow(e,"c",{slot:"color"}),a=this.specular.flow(e,"c"),o=this.shininess.flow(e,"f"),c=this.shadingAlpha.flow(e,"f"),d=this.shadingBlend.flow(e,"i"),g=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,b=this.alpha?this.alpha.flow(e,"f"):void 0,j=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=b!==void 0,e.addParsCode(["uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","varying vec3 vWPosition;","#include <normal_pars_fragment>","#include <gradientmap_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <dithering_pars_fragment>",`
					varying vec3 vViewPosition;
					struct ToonMaterial {
						vec3	diffuseColor;
						vec3	specularColor;
						float	specularShininess;
						float	specularStrength;
					};
					void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
			
						reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
						reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
					}
					void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
					}
					#define RE_Direct				RE_Direct_Toon
					#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
					#define Material_LightProbeLOD( material )	(0)
					`,"#include <shadowmap_pars_fragment>","#include <bumpmap_pars_fragment>","#include <normalmap_pars_fragment>"].join(`
`));let _e=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	ToonMaterial material;"];if(this.bumpMap){e.include(Ua.dHdxy),e.include(Ua.perturbNormalArb);let rt=this.bumpMap.texture.flow(e,"t"),st=this.bumpMap.flow(e,"v3"),ut=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",gt="";this.bumpMap.projection.value===4?gt=`
					vec3 bumpNormal = vec3(0.0);
					{
						vec2 uv0 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						vec2 grad0 = dHdxy(${rt.result}, uv0, ${ut});
						vec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);

						vec2 grad1 = dHdxy(${rt.result}, uv1, ${ut});
						vec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);

						vec2 grad2 = dHdxy(${rt.result}, uv2, ${ut});
						vec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);
						
						bumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;
						bumpNormal = normalize(bumpNormal);
					}

					normal = bumpNormal;
					`:gt=`
					vec2 bumpMapCachedUv = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs;
					vec2 grad = dHdxy(${rt.result}, bumpMapCachedUv, ${ut});
					normal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );
					`,_e.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${st.result};
					${gt}
					`)}_e.push(s.code,"	vec3 diffuseColor = "+s.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",a.code,"	vec3 specular = "+a.result+";",o.code,"	float shininess = max( 0.0001, "+o.result+" );","	float specularStrength = 1.0;"),b&&_e.push(b.code,"#ifdef ALPHATEST","if ( "+b.result+" <= ALPHATEST ) discard;","#endif"),_e.push("material.diffuseColor = diffuseColor;"),_e.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),_e.push("vec3 ao = aoEnabled ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse) * ao) + reflectedLight.directSpecular;");let $="1.0";this.mask&&(this.mask.analyze(e),$=`luminance(${this.mask.flow(e,"v3").result})`),_e.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${c.result} * ${$} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${c.result} * ${$}, ${d.result} );
				}
				`),g&&_e.push(g.code,`outgoingLight = spe_blend(outgoingLight, ${g.result}, 1.0, SPE_BLENDING_NORMAL);`),b?_e.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${b.result} );`):_e.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),j&&_e.push(`gl_FragColor.a *= ${j.result};`),_e.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),i=_e.join(`
`)}return i}},rx=class{constructor(e=1e3*10){this.timeout=e,this.cache=new Map,this.head={data:null,time:0,src:null,next:null,prev:null},this.tail={data:null,time:1/0,src:null,next:null,prev:null},this.hasClean=!1,this.head.next=this.tail,this.tail.prev=this.head}log(...e){}remove(e){let i=this.cache.get(e);i&&(this.dispose(e,i.data),this.cache.delete(e),i.prev.next=i.next,i.next.prev=i.prev)}scheduleCleanup(){this.hasClean||(this.log("scheduled cleanup"),this.hasClean=!0,setTimeout(()=>{this.hasClean=!1,this.log("cleaning");let e=Date.now(),i=this.head.next;for(;i.time<e-this.timeout;)this.dispose(i.src,i.data),this.cache.delete(i.src),i=i.next,i.prev=this.head,this.head.next=i;this.head.next!==this.tail?this.scheduleCleanup():this.log("no more cleanup")},this.timeout+1e3))}has(e){var i;return(i=this.cache.get(e))==null?void 0:i.data}load(e){let i=Date.now(),s=this.cache.get(e);return s===void 0?(s={data:this.create(e),src:e,time:i,next:null,prev:null},this.cache.set(e,s)):(s.time=i,s.prev.next=s.next,s.next.prev=s.prev),s.prev=this.tail.prev,s.next=this.tail,this.tail.prev.next=s,this.tail.prev=s,this.scheduleCleanup(),s.data}},i_=class extends rx{create(e){return URL.createObjectURL(new Blob([e]))}dispose(e,i){URL.revokeObjectURL(i)}},r_;function tR(e){return typeof e=="string"?e:(r_||(r_=new i_),r_.load(e))}var ix=class{constructor(e,i){this.data=e,this.cache=i,this.refCount=0}deref(){this.refCount,this.refCount-=1,this.refCount===0&&(this.cache.remove(this),this.dispose())}dispose(){this.refCount}},nx=class{constructor(){this.cache=new Map}remove(e){this.cache.delete(e.data)}load(e){let i=this.cache.get(e);return i===void 0&&(i=this.create(e),this.cache.set(e,i)),i.refCount+=1,i}},ff=class extends ix{constructor(e,i){super(e,i.imageHolderCache),this.data=e,this.shared=i,this.loaded=!1,this.isVideo=!1,this.isCanvas=!1,this._cache={1e3:{},1001:{},1002:{}},this.isVideo=e.type==="video",this.isCanvas=e.nodeName==="CANVAS",this.updateSrc(this.isCanvas?e:e.data)}async updateSrc(e){if(typeof document>"u")return;this.disposeTextures(),this.loaded=!1;let i=()=>{this.loaded=!0;for(let a of Object.values(this._cache))for(let o of Object.values(a))o&&(o.image=this.img,o.needsUpdate=!0);this.shared.requestRender()};if(this.isCanvas)this.img=e,this.loaded=!0;else if(this.isVideo){if(this.img=document.createElement("video"),this.img.preload="auto",this.img.playsInline=!0,this.img.currentTime=.01,typeof e!="string"){var s=new FileReader;s.readAsDataURL(new Blob([e],{type:"video/mp4"}));let a;await new Promise(o=>{s.onloadend=c=>{var d;a=(d=c.target)==null?void 0:d.result,o(null)}}),this.img.src=a}else this.img.src=e;this.img.onloadeddata=()=>{i()}}else this.img=new Image,this.img.src=tR(e),this.img.onload=i}getTexture(e,i=1008){let s=this._cache[e][i];if(s)return s;{let a;return this.isCanvas&&(a=new My(this.img,void 0,e,e,void 0,i)),this.isVideo?a=new Ty(this.img,void 0,e,e):a=new tr(this.img,void 0,e,e,void 0,i),this.loaded&&(a.needsUpdate=!0),this._cache[e][i]=a,a}}setNeedsUpdate(e){for(let i of Object.values(this._cache))for(let s of Object.values(i))s&&(s.needsUpdate=e)}disposeTextures(){for(let[e,i]of Object.entries(this._cache))for(let[s,a]of Object.entries(i))a==null||a.dispose(),this._cache[e][s]=void 0}dispose(){super.dispose(),this.disposeTextures()}},cs=class extends ff{};function s_(e,i){var s=gY(i);return s.formatToParts?pY(s,e):mY(s,e)}var fY={year:0,month:1,day:2,hour:3,minute:4,second:5};function pY(e,i){try{for(var s=e.formatToParts(i),a=[],o=0;o<s.length;o++){var c=fY[s[o].type];c>=0&&(a[c]=parseInt(s[o].value,10))}return a}catch(d){if(d instanceof RangeError)return[NaN];throw d}}function mY(e,i){var s=e.format(i).replace(/\u200E/g,""),a=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(s);return[a[3],a[1],a[2],a[4],a[5],a[6]]}var n_={};function gY(e){if(!n_[e]){var i=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:"America/New_York",year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),s=i==="06/25/2014, 00:00:00"||i==="‎06‎/‎25‎/‎2014‎ ‎00‎:‎00‎:‎00";n_[e]=s?new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return n_[e]}function sx(e,i,s,a,o,c,d){var g=new Date(0);return g.setUTCFullYear(e,i,s),g.setUTCHours(a,o,c,d),g}var rR=36e5,yY=6e4,o_={timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-]\d{2}):?(\d{2})$/};function Fm(e,i,s){var a,o;if(!e||(a=o_.timezoneZ.exec(e),a))return 0;var c;if(a=o_.timezoneHH.exec(e),a)return c=parseInt(a[1],10),iR(c)?-(c*rR):NaN;if(a=o_.timezoneHHMM.exec(e),a){c=parseInt(a[1],10);var d=parseInt(a[2],10);return iR(c,d)?(o=Math.abs(c)*rR+d*yY,c>0?-o:o):NaN}if(bY(e)){i=new Date(i||Date.now());var g=s?i:vY(i),b=a_(g,e),j=s?b:xY(i,b,e);return-j}return NaN}function vY(e){return sx(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function a_(e,i){var s=s_(e,i),a=sx(s[0],s[1]-1,s[2],s[3]%24,s[4],s[5],0).getTime(),o=e.getTime(),c=o%1e3;return o-=c>=0?c:1e3+c,a-o}function xY(e,i,s){var a=e.getTime(),o=a-i,c=a_(new Date(o),s);if(i===c)return i;o-=c-i;var d=a_(new Date(o),s);return c===d?c:Math.max(c,d)}function iR(e,i){return-23<=e&&e<=23&&(i==null||0<=i&&i<=59)}var nR={};function bY(e){if(nR[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),nR[e]=!0,!0}catch{return!1}}var pR=pi(oR(),1),u_=pi(lR(),1),AY=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,cR=AY,l_=36e5,uR=6e4,_Y=2,Dn={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,plainTime:/:/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:cR};function h_(e,i){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(e===null)return new Date(NaN);var s=i||{},a=s.additionalDigits==null?_Y:(0,pR.default)(s.additionalDigits);if(a!==2&&a!==1&&a!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]")return new Date(e.getTime());if(typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]")return new Date(e);if(!(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"))return new Date(NaN);var o=EY(e),c=TY(o.date,a),d=c.year,g=c.restDateString,b=MY(g,d);if(isNaN(b))return new Date(NaN);if(b){var j=b.getTime(),_e=0,$;if(o.time&&(_e=CY(o.time),isNaN(_e)))return new Date(NaN);if(o.timeZone||s.timeZone){if($=Fm(o.timeZone||s.timeZone,new Date(j+_e)),isNaN($))return new Date(NaN)}else $=(0,u_.default)(new Date(j+_e)),$=(0,u_.default)(new Date(j+_e+$));return new Date(j+_e+$)}else return new Date(NaN)}function EY(e){var i={},s=Dn.dateTimePattern.exec(e),a;if(s?(i.date=s[1],a=s[3]):(s=Dn.datePattern.exec(e),s?(i.date=s[1],a=s[2]):(i.date=null,a=e)),a){var o=Dn.timeZone.exec(a);o?(i.time=a.replace(o[1],""),i.timeZone=o[1].trim()):i.time=a}return i}function TY(e,i){var s=Dn.YYY[i],a=Dn.YYYYY[i],o;if(o=Dn.YYYY.exec(e)||a.exec(e),o){var c=o[1];return{year:parseInt(c,10),restDateString:e.slice(c.length)}}if(o=Dn.YY.exec(e)||s.exec(e),o){var d=o[1];return{year:parseInt(d,10)*100,restDateString:e.slice(d.length)}}return{year:null}}function MY(e,i){if(i===null)return null;var s,a,o,c;if(e.length===0)return a=new Date(0),a.setUTCFullYear(i),a;if(s=Dn.MM.exec(e),s)return a=new Date(0),o=parseInt(s[1],10)-1,dR(i,o)?(a.setUTCFullYear(i,o),a):new Date(NaN);if(s=Dn.DDD.exec(e),s){a=new Date(0);var d=parseInt(s[1],10);return OY(i,d)?(a.setUTCFullYear(i,0,d),a):new Date(NaN)}if(s=Dn.MMDD.exec(e),s){a=new Date(0),o=parseInt(s[1],10)-1;var g=parseInt(s[2],10);return dR(i,o,g)?(a.setUTCFullYear(i,o,g),a):new Date(NaN)}if(s=Dn.Www.exec(e),s)return c=parseInt(s[1],10)-1,fR(i,c)?hR(i,c):new Date(NaN);if(s=Dn.WwwD.exec(e),s){c=parseInt(s[1],10)-1;var b=parseInt(s[2],10)-1;return fR(i,c,b)?hR(i,c,b):new Date(NaN)}return null}function CY(e){var i,s,a;if(i=Dn.HH.exec(e),i)return s=parseFloat(i[1].replace(",",".")),c_(s)?s%24*l_:NaN;if(i=Dn.HHMM.exec(e),i)return s=parseInt(i[1],10),a=parseFloat(i[2].replace(",",".")),c_(s,a)?s%24*l_+a*uR:NaN;if(i=Dn.HHMMSS.exec(e),i){s=parseInt(i[1],10),a=parseInt(i[2],10);var o=parseFloat(i[3].replace(",","."));return c_(s,a,o)?s%24*l_+a*uR+o*1e3:NaN}return null}function hR(e,i,s){i=i||0,s=s||0;var a=new Date(0);a.setUTCFullYear(e,0,4);var o=a.getUTCDay()||7,c=i*7+s+1-o;return a.setUTCDate(a.getUTCDate()+c),a}var PY=[31,28,31,30,31,30,31,31,30,31,30,31],DY=[31,29,31,30,31,30,31,31,30,31,30,31];function mR(e){return e%400===0||e%4===0&&e%100!==0}function dR(e,i,s){if(i<0||i>11)return!1;if(s!=null){if(s<1)return!1;var a=mR(e);if(a&&s>DY[i]||!a&&s>PY[i])return!1}return!0}function OY(e,i){if(i<1)return!1;var s=mR(e);return!(s&&i>366||!s&&i>365)}function fR(e,i,s){return!(i<0||i>52||s!=null&&(s<0||s>6))}function c_(e,i,s){return!(e!=null&&(e<0||e>=25)||i!=null&&(i<0||i>=60)||s!=null&&(s<0||s>=60))}function lx(e,i,s){var a=h_(e,s),o=Fm(i,a,!0),c=new Date(a.getTime()-o),d=new Date(0);return d.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),d.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),d}function on(e,i){return i.color(e)}function d_(e=new Date,i){let s=i.format,a=e.getSeconds(),o=e;i&&i.timeZone!==null&&(o=lx(new Date,i.timeZone));let c=o.getHours(),d=o.getMinutes(),g;i.format12h24h==="12ampm"&&(g=c>=12?"PM":"AM");let b=c;i.format12h24h!=="24"&&(b=c%12,b===0&&(b=12));let j,_e;switch(s){case"HH:mm:ss":j=[b,d,a];break;case"HH:mm":j=[b,d];break;case"HH":j=[b],g=void 0;break;case"mm":j=[d],g=void 0;break;case"ss":j=[a],g=void 0;break;case"year":_e=o.getFullYear();break;case"month":_e=o.getMonth()+1;break;case"dayOfYear":_e=Math.floor((o.getTime()-new Date(o.getFullYear(),0,0).getTime())/864e5);break;case"dayOfMonth":_e=o.getDate();break;case"secondOfDay":_e=c*60*60+d*60+a;break;default:console.error("Unknown time format",s),_e=0;break}return j!==void 0?{textValue:j,suffix:g}:_e}function gR(e,i){switch(e.type){case"fresnel":return LY(e,i);case"gradient":return BY(e,i);case"depth":return NY(e,i);case"normal":return FY(e,i);case"noise":return kY(e,i);case"rainbow":return VY(e,i);case"toon":return zY(e,i);case"outline":return UY(e,i);case"transmission":return GY(e,i);case"color":return RY(e,i);case"pattern":return jY(e,i)}}function IY(e){return{type:e.type}}function oo(e,i){let{alpha:s,mode:a,isMask:o}=e,c=typeof s=="string"?(Number(i.getVariable(s))??100)/100:s;return{...IY(e),alpha:c,mode:a,isMask:o}}function RY(e,i){return{...oo(e,i),color:on(e.color,i)}}function LY(e,i){let{bias:s,scale:a,intensity:o,factor:c,color:d}=e;return{...oo(e,i),color:on(d,i),bias:s,scale:a,intensity:o,factor:c}}function BY(e,i){let{gradientType:s,smooth:a,colors:o,steps:c,angle:d,offset:g,morph:b}=e;return{...oo(e,i),gradientType:s,smooth:a,colors:o.map(j=>new Ke(j[0],j[1],j[2],j[3])),num:o.length,steps:c,offset:new z$1(...g),morph:new z$1(...b),angle:d}}function NY(e,i){let{gradientType:s,near:a,far:o,isVector:c,isWorldSpace:d,origin:g,direction:b,colors:j,steps:_e,smooth:$}=e;return{...oo(e,i),gradientType:s,near:a,far:o,isVector:c,isWorldSpace:d,origin:new _(...g),direction:b?new _(...b):new _(1,0,0),colors:j.map(rt=>rt!==void 0?new Ke(rt[0],rt[1],rt[2],rt[3]):new Ke(0,0,0,0)),steps:_e.slice(0,j.length),smooth:$}}function FY(e,i){let{cnormal:s}=e;return{...oo(e,i),cnormal:new _(s[0],s[1],s[2])}}function kY(e,i){return{...oo(e,i),scale:e.scale,move:e.move,fA:new z$1(...e.fA),fB:new z$1(...e.fB),size:new _(...e.size),distortion:new z$1(...e.distortion),colorA:on(e.colorA,i),colorB:on(e.colorB,i),colorC:on(e.colorC,i),colorD:on(e.colorD,i),noiseType:e.noiseType,voronoiStyle:e.voronoiStyle,highCut:e.highCut,lowCut:e.lowCut,smoothness:e.smoothness,seed:e.seed,quality:e.quality}}function VY(e,i){return{...oo(e,i),filmThickness:e.filmThickness,movement:e.movement,wavelengths:new _(...e.wavelengths),noiseStrength:e.noiseStrength,noiseScale:e.noiseScale,offset:new _(...e.offset)}}function zY(e,i){return{...oo(e,i),positioning:e.positioning,colors:e.colors.map(s=>new Ke(s[0],s[1],s[2],s[3])),num:e.colors.length,steps:e.steps,source:new _(...e.source),isWorldSpace:e.isWorldSpace,noiseStrength:e.noiseStrength,noiseScale:e.noiseScale,shadowColor:on(e.shadowColor,i),offset:new _(...e.offset)}}function UY(e,i){return{...oo(e,i),outlineColor:on(e.outlineColor,i),contourColor:on(e.contourColor,i),outlineWidth:e.outlineWidth,contourWidth:e.contourWidth,outlineThreshold:e.outlineThreshold,contourThreshold:e.contourThreshold,outlineSmoothing:e.outlineSmoothing,contourFrequency:e.contourFrequency,contourDirection:new _(...e.contourDirection),positionalLines:e.positionalLines,compensation:e.compensation}}function GY(e,i){return{...oo(e,i),thickness:e.thickness,ior:e.ior,roughness:e.roughness}}function jY(e,i){return{...oo(e,i),style:e.style,projection:e.projection,axis:e.axis,blending:e.blending,offset:new z$1(...e.offset),colorA:on(e.colorA,i),colorB:on(e.colorB,i),frequency:new z$1(...e.frequency),size:e.size,variation:e.variation,smoothness:e.smoothness,zigzag:e.zigzag,rotation:e.rotation,vertical:new z$1(...e.vertical),horizontal:new z$1(...e.horizontal),sides:e.sides}}var Xl=class extends xr$1{},f_={noise:["noiseType"],texture:["projection","axis","side"],video:["projection","axis","side"],displace:["noiseType"],light:["roughnessMap","bumpMap"],depth:["smooth","isWorldSpace","gradientType","isVector"],pattern:["style","projection","axis"]},p_={depth:["colors"]};function HY(e,i,s){var c,d;if(i==="isMask")return!0;let a=f_[e.type],o=p_[e.type];if(o!==void 0){let g=e.color;if(o.includes(i)){let b=(d=(c=g[i])==null?void 0:c.value)==null?void 0:d.length;if(b!==void 0&&b!==s.length)return!0}}return a!==void 0?a.includes(i):!1}function m_(e,i,s){let a=s.uniforms[`f${s.id}_texture`];if(!a)return!1;let o=!1,c=e;if("image"in c){let d=c.image,g=i.image(d),b=a;b.image instanceof cs||b.image.deref(),b.image=g}if("video"in c){let d=c.video,g=i.video(d),b=a;b.image instanceof cs||b.image.deref(),b.image=g}if("wrapping"in c){let d=a;d.wrap=c.wrapping}if("minFilter"in c){let d=a;d.minFilter=c.minFilter}if("repeat"in c||"offset"in c){let d="mat",g=s.uniforms[`f${s.id}_${d}`];"repeat"in c&&(g.repeat=c.repeat),"offset"in c&&(g.offset=c.offset),g.updateMatrix()}return o}function yR(e,i,s,a){let o=!1;for(let[c,d]of Object.entries(e)){if(c==="bumpMap"||c==="roughnessMap"){o=!0;continue}if(!c||d===void 0)continue;if(g_(c,s,a,i)){c==="visible"&&s.type==="light"&&(o=!0);continue}s.visible=a.visible;let g=s.uniforms[`f${s.id}_${c}`];if(g&&!(g instanceof ql))switch(o=o||HY(s,c,d),g.constructor){case rr:if(typeof d=="string"){let b=i.getColor(d);b&&(g.value=b);break}else{let b=d;g.value instanceof Xl?g.value=new xr$1(b.r,b.g,b.b,b.a):g.setRGBA(b);break}case jn:if(typeof d=="string"){let b=i.getColor(d);b&&(g.value=b);break}else{let b=d;g.value instanceof Xl?g.value=new xr$1(b.r,b.g,b.b,b.a):g.value.setRGBA(b.r,b.g,b.b,b.a);break}case qr:{let b=d;g.value.setX(b[0]),g.value.setY(b[1]);break}case nn:{let b=d;g.value.setX(b[0]),g.value.setY(b[1]),g.value.setZ(b[2]);break}case Pn:{m_(d,i,s);break}case so:{g.value=d.map(b=>new Ke(...b));break}default:{g.value=d;break}}}return o}var Ql=(e,i,s)=>Math.max(0,Math.min(1,Number(i.getVariable(typeof e=="number"?e*100:e,s)??100)/100))??1,qo=class{constructor(e,i,s,a,o){this.id=e,this.uuid=i,this.data=s,this.uniforms={};for(let c in a)this.uniforms[`f${this.id}_${c}`]=a[c];for(let c in s)g_(c,this,s,o)}get type(){return this.data.type}static create(e,i,s,a){if(s.type==="light")return On.createLigherLayer(e,i,s,a);if(s.type==="texture"||s.type==="video"){let o=s.type==="texture"?a.canvas(s.texture.image)??a.image(s.texture.image):a.video(s.texture.video),c=new Qc(o,s.texture.wrapping,s.texture.minFilter??1008),d=new $0(o),g=new ex(s.texture.repeat,s.texture.offset),b=new ke(s.crop?1:0),j=new Dt(s.projection??0),_e=new Dt(["x","y","z"].indexOf(s.axis)??0),$=new Dt(s.side??0),rt=new qr(s.size?new z$1(s.size[0],s.size[1]):new z$1(100,100)),st=new ke(s.blending??0),ut=new ke(Ql(s.alpha,a)),gt=new Dt(s.mode??0),wt=new Jr(s.isMask??!1),yt=new Yl(c,d,b,j,_e,$,rt,st,g,ut,gt,wt),At=new Qt(yt.calpha,"f");return new Lr$1(e,i,s,{texture:c,textureSize:d,crop:b,projection:j,axis:_e,side:$,size:rt,blending:st,mat:g,alpha:ut,mode:gt,isMask:wt},yt,gt,At,wt,a)}else if(s.type==="matcap"){let o=a.image(s.texture.image),c=new Qc(o,s.texture.wrapping,s.texture.minFilter??1008),d=new ke(Ql(s.alpha,a)),g=new Dt(s.mode??0),b=new Jr(s.isMask??!1),j=new sf(c,d,g,b),_e=new Qt(j.calpha,"f");return new Lr$1(e,i,s,{texture:c,alpha:d,mode:g,isMask:b},j,g,_e,b,a)}else if(s.type==="displace")if(s.displacementType==="noise"){let o=new nn(new _(...s.offset)),c=new ke(s.scale??10),d=new ke(s.intensity??8),g=new ke(s.movement??1),b=new Dt(s.noiseType??0),j=new Dt(s.voronoiStyle??0),_e=new ke(s.smoothness??.5),$=new ke(s.seed??0),rt=new ke(s.highCut??1),st=new ke(s.lowCut??0),ut=new Dt(s.quality??1),gt=new df(d,g,o,j,_e,$,rt,st,ut,c,b);return new km(e,i,s,{offset:o,scale:c,intensity:d,movement:g,noiseType:b,voronoiStyle:j,smoothness:_e,seed:$,highCut:rt,lowCut:st,quality:ut},gt,a)}else throw new Error;else return YY(e,i,s,a)}updateByOp(e,i,s){let a=e;if(a.path[0]===void 0){if(a.type===0)return"type"in a.props||"category"in a.props||"visible"in a.props?(s.scene.markNeedsUpdateRendererDirty(),!0):yR(a.props,s.shared,this,i)}else if(a.path[0]==="texture")return"texture"in i||"video"in i?m_(a.props,s.shared,this):!0;return!1}dispose(){if(WY(this)){let e=this.uniforms[`f${this.id}_texture`];if(!e)return!1;let i=e;i.image instanceof cs||i.image.deref()}}hasValueByKey(e){return this.uniforms[e]!==void 0}hasValue(e){return this.hasValueByKey(`f${this.id}_${e}`)}setValue(e,i){let s=`f${this.id}_${e}`;this.hasValueByKey(s)&&i!==void 0&&(this.uniforms[s].value=i)}getNode(e){let i=`f${this.id}_${e}`;if(this.hasValueByKey(i))return this.uniforms[i]}getValue(e){let i=`f${this.id}_${e}`;if(this.hasValueByKey(i))return this.uniforms[i].value}getName(e){let i=/f\d+_(.*)/.exec(e);if(i&&i.length>1)return i[1];console.log(`Layer.getName: error ${e}`)}getNames(){let e=[];for(let i in this.uniforms){let s=this.getName(i);s&&e.push(s)}return e}},Lr$1=class extends qo{constructor(i,s,a,o,c,d,g,b,j){super(i,s,a,o,j),this.params=o,this.color=c,this.mode=d,this.alpha=g,this.isMask=b}},km=class extends qo{constructor(e,i,s,a,o,c){super(e,i,s,a,c),this.position=o}},On=class extends qo{constructor(e,i,s,a,o,c){super(e,i,s,o,c),this.node=a}static createLigherLayer(e,i,s,a){let o,c=new ke(Ql(s.alpha,a)),d=new Dt(s.mode),g=new ke(s.bumpMapIntensity),b=new ke(Ql(s.alphaOverride,a)),j;if(!s.visible)o=new za,j={};else if(s.category==="lambert"){o=new Rm;let _e=new rr(a.color(s.emissive)??0),$=new Jr(s.occlusion??!0);j={emissive:_e,occlusion:$},o.emissive=_e,o.occlusion=$}else if(s.category==="toon"){o=new Nm;let _e=new ke(s.shininess??30),$=new rr(a.color(s.specular)??1118481);j={shininess:_e,specular:$},o.shininess=_e,o.specular=$}else if(s.category==="physical"){o=new Bm;let _e=new ke(s.roughness??.3),$=new ke(s.metalness??0),rt=new ke(s.reflectivity??.5),st=new Jr(s.occlusion??!0);j={roughness:_e,metalness:$,reflectivity:rt,occlusion:st},o.roughness=_e,o.metalness=$,o.reflectivity=rt,o.occlusion=st}else{o=new Lm;let _e=new ke(s.shininess??30),$=new rr(s.specular!==void 0?a.color(s.specular)??1118481:1118481),rt=new Jr(s.occlusion??!0);j={shininess:_e,specular:$,occlusion:rt},o.shininess=_e,o.specular=$,o.occlusion=rt}return o.alpha=new ke(1),o.shadingAlpha=c,o.shadingBlend=d,o.bumpMapIntensity=g,o.alphaOverride=b,j.alpha=o.shadingAlpha,j.mode=o.shadingBlend,j.bumpMapIntensity=o.bumpMapIntensity,j.alphaOverride=o.alphaOverride,new On(e,i,s,o,j,a)}get category(){return this.node.category}};function WY(e){let i=e instanceof qo?e.type:e;return i==="texture"||i==="video"||i==="displace_map"||i==="matcap"}function Cs(e){return{alpha:new ke(e.alpha??1),mode:new Dt(e.mode??0),isMask:new Jr(e.isMask??!1)}}function qY(e,i,s,a,o){switch(e.type){case"color":{let c=new rr(a.color??si),d=Cs(a),g=new Kc(c,d.alpha),b=new Qt(g.calpha,"f");return new Lr$1(i,s,e,{color:c,...d},g,d.mode,b,d.isMask,o)}case"fresnel":{let c=new rr(a.color??16777215),d=new ke(a.bias??.1),g=new ke(a.scale??1),b=new ke(a.intensity??2),j=new ke(a.factor??1),_e=Cs(a),$=new Om(c,d,g,b,j,_e.alpha,_e.mode,_e.isMask),rt=new Qt($.calpha,"f");return new Lr$1(i,s,e,{color:c,bias:d,scale:g,intensity:b,factor:j,..._e},$,_e.mode,rt,_e.isMask,o)}case"rainbow":{let c=new ke(a.filmThickness??30),d=new ke(a.movement??0),g=new nn(a.wavelengths??new _(0,0,0)),b=new ke(a.noiseStrength??0),j=new ke(a.noiseScale??1),_e=new nn(a.offset??new _(0,0,0)),$=Cs(a),rt=new cf(c,d,g,b,j,_e,$.alpha,$.isMask),st=new Qt(rt.calpha,"f");return new Lr$1(i,s,e,{filmThickness:c,movement:d,wavelengths:g,noiseStrength:b,noiseScale:j,offset:_e,...$},rt,$.mode,st,$.isMask,o)}case"transmission":{let c=new ke(a.thickness??10),d=new ke(a.ior??1.5),g=new ke(a.roughness??.5),b=Ze.transmissionSize,j=Ze.transmissionRenderTarget,_e=Ze.transmissionRenderTargetDepth,$=window.innerWidth,rt=window.innerHeight,st=$>=rt?new qr(rt/$,1):new qr(1,$/rt),ut=Cs(a),gt=new hf(c,d,g,b,j,_e,st,ut.alpha),wt=new Qt(gt.calpha,"f");return new Lr$1(i,s,e,{thickness:c,ior:d,roughness:g,aspectRatio:st,...ut},gt,ut.mode,wt,ut.isMask,o)}case"toon":{let c=new Dt(a.positioning??0),d;a.colors?d=new so(a.colors.length,a.colors):(d=new so(10,new Ke(0,0,0,1)),d.value[1]=new Ke(1,1,1,1));let g;a.steps?g=new no(a.steps.length,a.steps):(g=new no(10,1),g.value[0]=0);let b=new nn(a.source??new _(0,0,0)),j=new Jr(a.isWorldSpace??!0),_e=new ke(a.noiseStrength??0),$=new ke(a.noiseScale??1),rt=new jn(a.shadowColor),st=new nn(a.offset??new _(0,0,0)),ut=Cs(a),gt=new uf(c,d,g,b,j,_e,$,rt,st,ut.alpha),wt=new Qt(gt.calpha,"f");return new Lr$1(i,s,e,{positioning:c,colors:d,steps:g,source:b,isWorldSpace:j,noiseStrength:_e,noiseScale:$,shadowColor:rt,offset:st,...ut},gt,ut.mode,wt,ut.isMask,o)}case"outline":{let c=new rr(a.outlineColor??16777215),d=new rr(a.contourColor??16777215),g=new ke(a.outlineWidth??.1),b=new ke(a.contourWidth??.1),j=new ke(a.outlineThreshold??.1),_e=new ke(a.contourThreshold??.1),$=new ke(a.outlineSmoothing??.1),rt=new ke(a.contourFrequency??.1),st=new nn(a.contourDirection??new _(0,1,0)),ut=new Jr(a.positionalLines??!1),gt=new Jr(a.compensation??!0),wt=Ze.normalRenderTarget,yt=Ze.normalRenderTargetDepth,At=Ze.pixelRatioNode,Ct=Ze.resolution,Tt=Cs(a),kt=new af(c,d,g,b,j,_e,$,rt,st,ut,gt,Ct,wt,yt,At,Tt.alpha),Pt=new Qt(kt.calpha,"f");return new Lr$1(i,s,e,{outlineColor:c,contourColor:d,outlineWidth:g,contourWidth:b,outlineThreshold:j,contourThreshold:_e,outlineSmoothing:$,contourFrequency:rt,contourDirection:st,positionalLines:ut,compensation:gt,...Tt},kt,Tt.mode,Pt,Tt.isMask,o)}case"depth":{let c=new Dt(a.gradientType??0),d=new Jr(a.smooth??!1),g=new ke(a.near??50),b=new ke(a.far??200),j=new ke(a.isVector??1),_e=new ke(a.isWorldSpace??0),$=new nn(a.origin??new _),rt=new nn(a.direction??new _),st;a.colors?st=new so(a.colors.length,a.colors):(st=new so(2,new Ke(0,0,0,1)),st.value[1]=new Ke(1,1,1,1));let ut;a.steps?ut=new no(a.steps.length,a.steps):(ut=new no(2,1),ut.value[0]=0);let gt=Cs(a),wt=new rf(c,d,g,b,j,_e,$,rt,st,ut,gt.alpha,gt.isMask),yt=new Qt(wt.calpha,"f");return new Lr$1(i,s,e,{gradientType:c,smooth:d,near:g,far:b,isVector:j,isWorldSpace:_e,origin:$,direction:rt,colors:st,steps:ut,...gt},wt,gt.mode,yt,gt.isMask,o)}case"noise":{let c=new ke(a.scale??1),d=new nn(a.size??new _(100,100,100)),g=new ke(a.move??1),b=new qr(a.fA??new z$1(1.7,9.2)),j=new qr(a.fB??new z$1(8.3,2.8)),_e=new qr(a.distortion??new z$1(1,1)),$=new jn(a.colorA),rt=new jn(a.colorB),st=new jn(a.colorC),ut=new jn(a.colorD),gt=new Dt(a.noiseType??0),wt=new Dt(a.voronoiStyle??0),yt=new ke(a.highCut??1),At=new ke(a.lowCut??0),Ct=new ke(a.smoothness??.5),Tt=new ke(a.seed??.5),kt=new Dt(a.quality??1),Pt=Cs(a),It=new of(c,d,g,b,j,_e,$,rt,st,ut,Pt.alpha,gt,Pt.isMask,wt,yt,At,Ct,Tt,kt),Lt=new Qt(It.calpha,"f");return new Lr$1(i,s,e,{scale:c,size:d,move:g,fA:b,fB:j,distortion:_e,colorA:$,colorB:rt,colorC:st,colorD:ut,noiseType:gt,...Pt,voronoiStyle:wt,highCut:yt,lowCut:At,smoothness:Ct,seed:Tt,quality:kt},It,Pt.mode,Lt,Pt.isMask,o)}case"normal":{let c=new nn(a.cnormal??new _(1,1,1)),d=Cs(a),g=new $d(c,d.alpha),b=new Qt(g.calpha,"f");return new Lr$1(i,s,e,{cnormal:c,...d},g,d.mode,b,d.isMask,o)}case"gradient":{let c=new Dt(a.gradientType??0),d=new Jr(a.smooth??!1),g;a.colors?g=new so(a.colors.length,a.colors):(g=new so(10,new Ke(0,0,0,1)),g.value[1]=new Ke(1,1,1,1));let b;a.steps?b=new no(a.steps.length,a.steps):(b=new no(10,1),b.value[0]=0);let j=new qr(a.offset??new z$1(0,0)),_e=new qr(a.morph??new z$1(0,0)),$=new ke(a.angle??0),rt=Cs(a),st=new nf(c,d,g,b,j,_e,$,rt.alpha,rt.isMask),ut=new Qt(st.calpha,"f");return new Lr$1(i,s,e,{gradientType:c,smooth:d,colors:g,steps:b,offset:j,morph:_e,angle:$,...rt},st,rt.mode,ut,rt.isMask,o)}case"pattern":{let c=new Dt(a.style??0),d=new Dt(a.projection??0),g=new Dt(["x","y","z"].indexOf(a.axis)??0),b=new ke(a.blending??0),j=new qr(a.offset??new z$1(0,0)),_e=new jn(a.colorA),$=new jn(a.colorB),rt=new qr(a.frequency??new z$1(10,10)),st=new ke(a.size??.5),ut=new ke(a.variation??0),gt=new ke(a.smoothness??.5),wt=new ke(a.zigzag??0),yt=new ke(a.rotation??0),At=new qr(a.vertical??new z$1(0,1)),Ct=new qr(a.horizontal??new z$1(0,1)),Tt=new Dt(a.sides??6),kt=Cs(a),Pt=new lf(c,d,g,b,j,_e,$,rt,st,ut,gt,wt,yt,At,Ct,Tt,kt.alpha,kt.isMask),It=new Qt(Pt.calpha,"f");return new Lr$1(i,s,e,{style:c,projection:d,axis:g,blending:b,offset:j,colorA:_e,colorB:$,frequency:rt,size:st,variation:ut,smoothness:gt,zigzag:wt,rotation:yt,vertical:At,horizontal:Ct,sides:Tt,...kt},Pt,kt.mode,It,kt.isMask,o)}default:{let c=new rr(1,0,0,1),d=Cs(a),g=new Kc(c,d.alpha),b=new Qt(g.calpha,"f");return new Lr$1(i,s,e,{color:c,...d},g,d.mode,b,d.isMask,o)}}}function YY(e,i,s,a){let o=gR(s,a);return qY(s,e,i,o,a)}function g_(e,i,s,a){if(s.type==="displace"&&(e==="intensity"||e==="visible")){let o=i.uniforms[`f${i.id}_intensity`];return o?(o.value=s.intensity*(s.visible?1:0),o):void 0}if(s.type!=="displace"&&(e==="alpha"||e==="visible")){let o=i.uniforms[`f${i.id}_alpha`];if(!o)return;if(o.value=Ql(s.alpha,a)*(s.visible?1:0),s.type==="outline"&&e==="visible"){let c=i.uniforms[`f${i.id}_compensation`];c&&(c.value=s.compensation&&s.visible)}return o}}function Jc(e,i){let s=0,a=e.layers.find(o=>o.data.type==="light");if(a){let o=a.data,c=Number(i.getVariable(o.alphaOverride));if((typeof o.alphaOverride=="string"?c/100:o.alphaOverride)<1)return!0}for(let o of e.layers){if(o.data.type!=="displace"&&o.data.isMask)return!0;if(o.data.type!=="displace"&&"alpha"in o.data&&o.data.type!=="light"&&o.data.type!=="fresnel"&&o.data.type!=="texture"&&o.data.type!=="matcap"&&o.data.type!=="rainbow"&&o.data.type!=="outline"&&o.data.type!=="pattern"){let c=o.data.visible?o.data.alpha:0;if(typeof c=="string"&&(c=Math.max(0,Math.min(1,Number(i.getVariable(c)??100)/100))),c===1&&o.data.type==="depth"||o.data.type==="gradient"){for(let d of o.data.colors)if(d[3]<1){c=d[3];break}}else if(c===1&&o.data.type==="noise"){let d=i.color(o.data.colorA).a,g=i.color(o.data.colorB).a,b=i.color(o.data.colorC).a,j=i.color(o.data.colorD).a,_e=Math.min(d,Math.min(g,Math.min(b,j)));_e<1&&(c=_e)}s+=(1-s)*c}}return s<1}var Wn=class extends lt{constructor(){super(void 0),this.flatShading=!1,this.needsJitter=!0,this.cacheKey="",this.fog=!0,this.dithering=!0,this.vertexColors=!0,this.transparent=!0}customProgramCacheKey(){return this.cacheKey}},cx=class extends Wn{constructor(e,i,s,a){super(),this.flatShading=e,this.side=i,this.wireframe=s,this.root=a}updateAfterBuild(){let e=this.root;this.lights=e.lights,this.vertexShader=e.vertexShader,this.fragmentShader=e.fragmentShader,this.defines=e.defines,this.uniforms=e.uniforms,this.extensions=e.extensions,this.transparent=e.transparent,this.cacheKey=e.customProgramCacheKey()+"flat"+this.flatShading+this.side}onBeforeCompile(e,i){this.root.onBeforeCompile(e)}get data(){return this.root.data}get category(){return this.root.category}get hasAO(){return this.root.hasAO}getFlavor(e,i,s){return this.root.getFlavor(e,i,s)}get layers(){return this.root.layers}get fragment(){return this.root.fragment}getLayersOfType(e){return this.root.getLayersOfType(e)}getLayerByUuid(e){return this.root.getLayerByUuid(e)}updateByOp(e,i,s){this.root.updateByOp(e,i,s)}nodeMaterialDispose(){this.root.nodeMaterialDispose()}},Ga=class extends Wn{constructor(e,i,s=!0){super(),this.data=e,this.allowVariableSaves=s,this.layerIdGen=0,this.flavors=[],this.masks={},this.type="NodeMaterial",this.updaters=[],this.reset0(e,i)}get nodeMaterial(){return this}getFlavor(e,i,s){let a=s?6:(e?3:0)+i;if(a===0)return this;this.flavors===void 0&&(this.flavors=[]),a-=1;let o=this.flavors[a];return o===void 0&&(o=new cx(e,i,s,this),this.flavors[a]=o,o.flatShading=e,o.side=i,o.updateAfterBuild()),o}get fragment(){return this.lightLayer.node}get category(){return this.lightLayer.category}get hasAO(){var e;return((e=this.lightLayer.getNode("occlusion"))==null?void 0:e.value)??!1}reset(e,i,s=!1){(this.data!==e||s)&&this.reset0(e,i)}reset0(e,i){this.data=e;let s=e.layers??oi.defaultTwoLayerData("phong").layers;try{this.layers=s.map(a=>qo.create(this.layerIdGen++,a.id,a.data,i.shared))}catch{this.layers=[]}this.layers.reverse(),this.name=e.name??"Untitled Material",this.onUpdate(i.shared),this.transparent=Jc(e,i.shared),this.saveVariableLocations(i)}onVariableUpdate(e,i,s){if(e[0]==="alphaOverride")this.transparent=Jc(this.data,s.shared),this.lightLayer.setValue("alphaOverride",Math.max(0,Math.min(Number(i)/100,1)));else if(e[0]==="layer"){let a=e[1],o=e[2];if(a&&o){let c=this.layers.find(d=>d.uuid===a);c!=null&&c.hasValue(o)&&(o==="alpha"?(this.transparent=Jc(this.data,s.shared),c.setValue(o,Math.max(0,Math.min(Number(i)/100,1)))):c.setValue(o,i))}}}saveVariableLocations(e){if(!this.allowVariableSaves)return;let i=this.data.layers.find(s=>s.data.type==="light");i&&e.shared.getVariable(i.data.alphaOverride,["material",this.uuid,"alphaOverride"]),this.data.layers.forEach(s=>{"alpha"in s.data&&typeof s.data.alpha=="string"&&e.shared.getVariable(s.data.alpha,["material",this.uuid,"layer",s.id,"alpha"])})}getLayersOfType(e){return this.layers.filter(i=>i.type===e)}getLayerByUuid(e){return this.layers.find(i=>i.uuid===e)}onUpdate(e){this.cacheKey=this.computeCacheKey(),this.lightLayer=this.layers.find(i=>i instanceof On),this.lightLayer===void 0&&(this.lightLayer=new On(0,"",{...Hr.defaultData("light","phong"),visible:!1},new za,{},e)),this.dispose();for(let i of this.flavors)i&&i.dispose();this.applyTextureMaps(),this.applyMasks(),this.blendColors(),this.blendAfterColors(),this.blendPositions()}applyTextureMaps(){let e=this.layers.find(o=>o instanceof On);if(!e)return;let i=e.data,s=i.bumpMap,a=i.roughnessMap;e.node.bumpMap=void 0,e.node.roughnessMap=void 0;for(let o=0;o<this.layers.length;++o){let c=this.layers[o];c instanceof Lr$1&&c.color instanceof Yl&&(c.uuid===s&&(e.node.bumpMap=c.color),c.uuid===a&&(e.node.roughnessMap=c.color))}}updateByOp(e,i,s){if(i!==void 0?this.data=i:i=this.data,this.transparent=Jc(i,s.shared),e.path[0]==="layers"){this.data=i;let a=s.shared,o=e.path[1];if(o===void 0){if(this.layers.reverse(),e.type===4){let c=qo.create(this.layerIdGen++,e.id,e.data,s.shared);this.layers.splice(e.localIndex,0,c),s.scene.markNeedsUpdateRendererDirty()}else if(e.type===5)this.layers.splice(e.localIndex,1)[0].dispose(),s.scene.markNeedsUpdateRendererDirty();else if(e.type===6){let c=this.layers.findIndex(g=>g.uuid===e.id),d=this.layers[c];this.layers.splice(c,1),this.layers.splice(e.localIndex,0,d),s.scene.markNeedsUpdateRendererDirty()}this.layers.reverse(),this.onUpdate(s.shared)}else{e.type===0&&e.props.occlusion!==void 0&&s.scene.markNeedsUpdateRendererDirty();let c=this.layers.find(d=>d.uuid===o);if(c){let d=i.layers.data(o),g;if(e.type===0&&("alpha"in e.props||"alphaOverride"in e.props)&&("alpha"in e.props?g={...e.props,alpha:Ql(e.props.alpha,a,["material",this.uuid,"layer",o,"alpha"])}:g={...e.props,alphaOverride:Ql(e.props.alphaOverride,a,["material",this.uuid,"alphaOverride"])}),c.updateByOp({...e,...g?{props:g}:{},path:e.path.slice(2)},d,s)){let b=qo.create(this.layerIdGen++,o,d,a);this.layers.splice(this.layers.findIndex(j=>j.uuid===o),1,b),this.onUpdate(s.shared)}}}}else this.reset(i,s)}applyMasks(){for(let e=0;e<this.layers.length;++e){let i=this.layers[e];i instanceof Lr$1?i.color.mask=void 0:i instanceof On&&(i.node.mask=void 0)}for(let e=0;e<this.layers.length;++e){let i=this.layers[e];if(i instanceof Lr$1&&i.isMask.value&&i.data.visible&&e>0){let s=e-1,a=this.layers[s];a instanceof On?a.node.mask=new Qi(i.color,i.alpha,Qi.MUL):a instanceof Lr$1&&(a.isMask.value||(a.color.mask=new Qi(i.color,i.alpha,Qi.MUL)))}}}blendColors(){let e=this.layers.findIndex(s=>s instanceof Lr$1),i=this.layers.findIndex(s=>s instanceof On);if(e!==-1&&e<i){let s=this.layers[e].color;for(let a=e+1;a<i;++a){let o=this.layers[a];if(o instanceof Lr$1){if(o.isMask.value)continue;s=new Jd(s,o.color,o.alpha,o.mode)}}this.fragment.color=s}else this.fragment.color=void 0}blendAfterColors(){let e=new Qt("outgoingLight","f"),i=this.layers.findIndex(s=>s instanceof On);if(this.layers.length>i+1){for(let s=i+1;s<this.layers.length;++s){let a=this.layers[s];if(a instanceof Lr$1){if(a.isMask.value)continue;e=new Jd(e,a.color,a.alpha,a.mode)}}this.fragment.afterColor=e}else this.fragment.afterColor=void 0}blendPositions(){let e=this.layers.filter(i=>i instanceof km);if(e.length>0){let i=e[0].position;for(let s=1;s<e.length;++s)e[s]&&(i=new Qi(i,e[s].position,Qi.ADD),i=new Qi(i,new ke(.5).setReadonly(!0),Qi.MUL));this.fragment.position=i}else this.fragment.position=void 0}getDefines(){return this.defines}getUniforms(){return this.uniforms}getVertexShader(){return this.vertexShader}getFragmentShader(){return this.fragmentShader}onBeforeCompile(e){this.build(),e.defines=this.defines,e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.extensionDerivatives=this.extensions.derivatives===!0,e.extensionFragDepth=this.extensions.fragDepth===!0,e.extensionDrawBuffers=this.extensions.drawBuffers===!0,e.extensionShaderTextureLOD=this.extensions.shaderTextureLOD===!0}clampUniformsForPreview(e,i){let s=(a,o,c)=>Math.min(Math.max(a,o),c);for(let a of this.layers)if(a.type==="displace"){let o=s(a.uniforms[`f${a.id}_intensity`].value,e,i);a.uniforms[`f${a.id}_intensity`].value=o}}computeCacheKey(){let e="[";for(let{data:i}of this.data.layers)if(i.type==="light")e+=`"${i.visible?i.category.toUpperCase():"Basic"}"`;else{let s=(f_[i.type]??[]).map(g=>i[g]),a=(p_[i.type]??[]).map(g=>{var b;return((b=i[g])==null?void 0:b.length)??0}),o=[...s,...a],c="isMask"in i&&i.isMask,d=`"${i.type}-${i.visible}-${c}"`;o.length?e+=`[${d}, "${o.join('","')}"],`:e+=d}return e=e.slice(0,-1)+"]",e}updateFrame(e){for(let i=0;i<this.updaters.length;++i)e.updateNode(this.updaters[i])}build(){let e=new Kd;e.needsJitter=this.needsJitter,this.lights=this.lightLayer.data.visible,e.build(this.fragment,this.fragment),this.vertexShader=e.getCode("vertex"),this.fragmentShader=e.getCode("fragment"),this.defines=e.defines,this.uniforms=e.uniforms,this.extensions=e.extensions,this.updaters=e.updaters;for(let i of this.flavors)i&&i.updateAfterBuild();return this}nodeMaterialDispose(){this.layers.forEach(e=>e.dispose()),super.dispose();for(let e of this.flavors)e&&e.dispose()}assetsLoaded(){for(let e of this.layers)if(e instanceof Lr$1){let i=e.params.texture;if(i instanceof Qc&&!i.image.loaded)return!1}return!0}getHash(){let e="{";return e+='"fragment":'+this.fragment.getHash(),e+="}",e}};Object.defineProperties(Wn.prototype,{properties:{get:function(){return this.fragment.properties}}});var $c=class extends Ga{constructor(e,i,s){super(e,i,!1),this.uuid=s,this.allowVariableSaves=!0,this.saveVariableLocations(i)}},SR=pi(vR()),xR=new Map;function bR(e){if(typeof e=="string")return e;let i=xR.get(e);return i||(i={url:URL.createObjectURL(new Blob([e]))},xR.set(e,i)),i.url}var ja=class{constructor({src:e,volume:i,delay:s,loop:a}){this._volume=1,this.delay=0,this._loop=1,this.loopsRemaining=0,this._status="stopped",this.onEnd=()=>{this.loopsRemaining===1/0?this.replay():this.loopsRemaining>1?(this.replay(),this.loopsRemaining--):(this._status="stopped",this.loopsRemaining=this._loop)};let o;typeof e=="string"?o={src:e}:o={src:bR(e),format:"wav"},this.sound=new SR.Howl(o),this.sound.on("end",this.onEnd),this.src=e,i!==void 0&&(this.volume=i),s!==void 0&&(this.delay=s),a!==void 0&&(this.loop=a)}get status(){return this._status}get volume(){return this._volume}set volume(e){this._volume=e,this.sound.volume(e)}get loop(){return this._loop}set loop(e){this._loop=e,this.loopsRemaining=e}replay(){this.clearDelay(),this.delayTimerId=window.setTimeout(()=>{this.sound.play(),this.clearDelay()},this.delay)}fade(e,i=1e3){e?(this.sound.volume(this._volume),this.clearFade(),this.fadeTimerId=window.setTimeout(()=>{this.sound.fade(this._volume,0,i),this.clearFade()},e)):this.sound.fade(this._volume,0,i)}on(e,i,s){this.sound.on(e,i,s)}off(e,i,s){this.sound.off(e,i,s)}play(){this._status==="playing"||this.sound.playing()||(this._status==="paused"?(this.sound.seek()===0?this.replay():this.sound.play(),this._status="playing"):this._status==="stopped"&&(this.replay(),this._status="playing"))}pause(){this._status==="playing"&&(this.sound.pause(),this.clearFade(),this.clearDelay(),this._status="paused")}stop(){this.sound.stop(),this.loopsRemaining=this._loop,this.clearFade(),this.clearDelay(),this._status="stopped"}clearFade(){this.fadeTimerId&&(clearTimeout(this.fadeTimerId),delete this.fadeTimerId)}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}dispose(e=!1){this.off(),this.stop(),this.clearFade(),this.clearDelay()}},hx=class{constructor(){this.type="ShapePath",this.color=new We,this.subPaths=[],this.currentPath=null}moveTo(e,i){return this.currentPath=new Tc,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,i),this}lineTo(e,i){var s;return(s=this.currentPath)==null||s.lineTo(e,i),this}quadraticCurveTo(e,i,s,a){var o;return(o=this.currentPath)==null||o.quadraticCurveTo(e,i,s,a),this}bezierCurveTo(e,i,s,a,o,c){var d;return(d=this.currentPath)==null||d.bezierCurveTo(e,i,s,a,o,c),this}splineThru(e){var i;return(i=this.currentPath)==null||i.splineThru(e),this}toShapes(){let e={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},i={loc:e.ORIGIN,t:0};function s(st,ut,gt,wt){let yt=st.x,At=ut.x,Ct=gt.x,Tt=wt.x,kt=st.y,Pt=ut.y,It=gt.y,Lt=wt.y,Nt=(Tt-Ct)*(kt-It)-(Lt-It)*(yt-Ct),Ht=(At-yt)*(kt-It)-(Pt-kt)*(yt-Ct),dr=(Lt-It)*(At-yt)-(Tt-Ct)*(Pt-kt),hs=Nt/dr,_s=Ht/dr;if(dr===0&&Nt!==0||hs<=0||hs>=1||_s<0||_s>1)return null;if(Nt===0&&dr===0){for(let ds=0;ds<2;ds++)if(a(ds===0?gt:wt,st,ut),i.loc===e.ORIGIN){let Nn=ds===0?gt:wt;return{x:Nn.x,y:Nn.y,t:i.t}}else if(i.loc===e.BETWEEN){let Nn=+(yt+i.t*(At-yt)).toPrecision(10),us=+(kt+i.t*(Pt-kt)).toPrecision(10);return{x:Nn,y:us,t:i.t}}return null}else{for(let us=0;us<2;us++)if(a(us===0?gt:wt,st,ut),i.loc===e.ORIGIN){let hn=us===0?gt:wt;return{x:hn.x,y:hn.y,t:i.t}}let ds=+(yt+hs*(At-yt)).toPrecision(10),Nn=+(kt+hs*(Pt-kt)).toPrecision(10);return{x:ds,y:Nn,t:hs}}}function a(st,ut,gt){let wt=gt.x-ut.x,yt=gt.y-ut.y,At=st.x-ut.x,Ct=st.y-ut.y,Tt=wt*Ct-At*yt;if(st.x===ut.x&&st.y===ut.y){i.loc=e.ORIGIN,i.t=0;return}if(st.x===gt.x&&st.y===gt.y){i.loc=e.DESTINATION,i.t=1;return}if(Tt<-Number.EPSILON){i.loc=e.LEFT;return}if(Tt>Number.EPSILON){i.loc=e.RIGHT;return}if(wt*At<0||yt*Ct<0){i.loc=e.BEHIND;return}if(Math.sqrt(wt*wt+yt*yt)<Math.sqrt(At*At+Ct*Ct)){i.loc=e.BEYOND;return}let kt;wt!==0?kt=At/wt:kt=Ct/yt,i.loc=e.BETWEEN,i.t=kt}function o(st,ut){let gt=[],wt=[];for(let yt=1;yt<st.length;yt++){let At=st[yt-1],Ct=st[yt];for(let Tt=1;Tt<ut.length;Tt++){let kt=ut[Tt-1],Pt=ut[Tt],It=s(At,Ct,kt,Pt);It!==null&&gt.find(Lt=>Lt.t<=It.t+Number.EPSILON&&Lt.t>=It.t-Number.EPSILON)===void 0&&(gt.push(It),wt.push(new z$1(It.x,It.y)))}}return wt}function c(st,ut,gt){let wt=new z$1;ut.getCenter(wt);let yt=[];return gt.forEach(At=>{At.boundingBox.containsPoint(wt)&&o(st,At.points).forEach(Ct=>{yt.push({identifier:At.identifier,isCW:At.isCW,point:Ct})})}),yt.sort((At,Ct)=>At.point.x-Ct.point.x),yt}function d(st,ut,gt,wt,yt){(yt==null||yt==="")&&(yt="nonzero");let At=new z$1;st.boundingBox.getCenter(At);let Ct=[new z$1(gt,At.y),new z$1(wt,At.y)],Tt=c(Ct,st.boundingBox,ut);Tt.sort((Ht,dr)=>Ht.point.x-dr.point.x);let kt=[],Pt=[];Tt.forEach(Ht=>{Ht.identifier===st.identifier?kt.push(Ht):Pt.push(Ht)});let It=kt[0].point.x,Lt=[],Nt=0;for(;Nt<Pt.length&&Pt[Nt].point.x<It;)Lt.length>0&&Lt[Lt.length-1]===Pt[Nt].identifier?Lt.pop():Lt.push(Pt[Nt].identifier),Nt++;if(Lt.push(st.identifier),yt==="evenodd"){let Ht=Lt.length%2===0,dr=Lt[Lt.length-2];return{identifier:st.identifier,isHole:Ht,for:dr}}else if(yt==="nonzero"){let Ht=!0,dr=null,hs=null;for(let _s=0;_s<Lt.length;_s++){let ds=Lt[_s];ut[ds]&&(Ht?(hs=ut[ds].isCW,Ht=!1,dr=ds):hs!==ut[ds].isCW&&(hs=ut[ds].isCW,Ht=!0))}return{identifier:st.identifier,isHole:Ht,for:dr}}else console.warn('fill-rule: "'+yt+'" is currently not implemented.')}let g=0,b=999999999,j=-999999999,_e=[];this.subPaths.forEach(st=>{let ut=st.getPoints(),gt=-999999999,wt=999999999,yt=-999999999,At=999999999;for(let Ct=0;Ct<ut.length;Ct++){let Tt=ut[Ct];Tt.y>gt&&(gt=Tt.y),Tt.y<wt&&(wt=Tt.y),Tt.x>yt&&(yt=Tt.x),Tt.x<At&&(At=Tt.x)}j<=yt&&(j=yt+1),b>=At&&(b=At-1),ut.length&&_e.push({curves:st.curves,points:ut,isCW:Zu.isClockWise(ut),identifier:g++,boundingBox:new lh(new z$1(At,wt),new z$1(yt,gt))})});let $=_e.map(st=>{var ut;return d(st,_e,b,j,(ut=this.userData)==null?void 0:ut.style.fillRule)}),rt=[];return _e.forEach(st=>{let ut=$[st.identifier];if(ut&&!ut.isHole){let gt=new xa;gt.curves=st.curves,$.filter(wt=>(wt==null?void 0:wt.isHole)&&wt.for===st.identifier).forEach(wt=>{if(wt){let yt=_e[wt.identifier],At=new Tc;At.curves=yt.curves,gt.holes.push(At)}}),rt.push(gt)}}),rt}},y_=!1,AR,v_=new Promise(e=>{AR=e}),wR=!1,dx;function _R(){if(y_=!0,wR)return;if(dx)return dx;async function e(){let i=await __vitePreload(()=>import("./opentype-BktxL4Qf.js"),__vite__mapDeps([]));AR(i),wR=!0}return dx=e(),dx}var Vm=class{async load(e,i,s=()=>{}){let{load:a}=await v_;a(e,(o,c)=>{o||!c?s(o??"Something went wrong"):i(c)})}async parse(e){let{parse:i,Bidi:s}=await v_;try{let a=i(e),o=new s,c=d=>a.charToGlyphIndex(d.char);return o.registerModifier("glyphIndex",null,c),o.applyFeatures(a,a.defaultRenderOptions.features),{font:a,bidi:o}}catch(a){console.error(a)}}};async function XY(e){return await(await fetch(e)).arrayBuffer()}var QY=new Vm;async function x_(e){let i,s,a=!1;if(e.url?(i=await XY(e.url),s=e.url,a=e.url.startsWith("/")):e.data&&(i=e.data.buffer.slice(e.data.byteOffset,e.data.byteOffset+e.data.byteLength)),i)if(y_){let o=await QY.parse(i);if(o)return{font:o.font,url:s,intercepted:a,arr:i,bidi:o.bidi}}else return{font:void 0,url:s,intercepted:a,arr:i,bidi:null}}function KY(e,i){return i.state.glyphIndex===e||i.state.fina===e||i.state.medi===e||i.state.init===e}var fx=class{constructor(e){this._arrayBuffer=new ArrayBuffer(1),this._isLoaded=!1,this._intercepted=!1,this._isUserFont=e.isUserFont??!1,this._loadingPromise=x_(e).then(i=>{i&&(this._arrayBuffer=i.arr,this._url=i.url,this.font=i.font,this._intercepted=i.intercepted,this._isLoaded=!0,this._bidi=i.bidi)})}update(e){this._isLoaded=!1,this._isUserFont=e.isUserFont??!1,this._loadingPromise=x_(e).then(i=>{i&&(this._arrayBuffer=i.arr,this._url=i.url,this.font=i.font,this._intercepted=i.intercepted,this._isLoaded=!0,this._bidi=i.bidi)})}get url(){return this._url}get intercepted(){return this._intercepted}get isLoaded(){return this._isLoaded}get loadingPromise(){return this._loadingPromise}reverseLigaturesTable(e,i,s){if(!this._bidi)return[];let a=this._bidi;a.getTextGlyphs(i);let o=a.tokenizer.tokens,c=[],d=0,g=s.length===o.length;for(let b=0;b<s.length;b++){let j=s[b].index,_e=String.fromCharCode(s[b].unicode),$=o[d];if(KY(j,$)||g)c.push({char:_e,index:j,replacements:[$.state.glyphIndex],replacementChars:[$.char]}),d++;else{let rt=$.char,st="",ut=[$.state.glyphIndex],gt=[],wt=!1;for(;!wt;)d++,st=i.charAt(d),rt+=st,ut.push(e.charToGlyphIndex(st)),gt=e.stringToGlyphs(rt),gt.length===1&&gt[0].index===j&&(wt=!0),d>i.length&&(wt=!0);c.push({char:_e,index:j,replacements:ut,replacementChars:Array.from(rt)}),d++}}return c}generateShapes(e,i){if(!this._isLoaded)return;let s=this.font,a=i.fontSize/this.unitsPerEm,o=i.fontSize*i.lineHeight,c=e.map(yt=>this.getTextWidth(yt,i)),d=i.width,g=this.getCharWidth(`
`,i),b=i.horizontalAlign===1?g:0,j=this.computeSpaceWidthForLine(e,0,i),_e=this.getLineInitialOffsetX(c[0],d,i.horizontalAlign,e[0],g),$=this.getLineInitialOffsetY(o,e.length,i.height,a,i.verticalAlign),rt=[],st=e.map(yt=>[]),ut=e.map(yt=>[]),gt;for(let yt=0;yt<e.length;yt++){let At=e[yt],Ct={features:{liga:!0}},Tt=[];try{Tt=s.stringToGlyphs(At,Ct)}catch(Pt){console.warn(Pt)}_e=this.getLineInitialOffsetX(c[yt],d,i.horizontalAlign,At,g);let kt=[];try{kt=this.reverseLigaturesTable(s,At,Tt)}catch(Pt){console.warn(Pt)}j=this.computeSpaceWidthForLine(e,yt,i);for(let Pt=0;Pt<Tt.length;Pt++){let It=Tt[Pt],Lt=It.index===0?`
`:It.unicode?String.fromCharCode(It.unicode):void 0,Nt=kt[Pt],Ht=0,dr=0;Pt===0&&i.horizontalAlign===2&&It.leftSideBearing!==void 0&&(dr=-It.leftSideBearing*a),gt&&(Ht=s.getKerningValue(It,gt)*a),_e+=dr+Ht;let hs=0;if(Lt===`
`)hs=b;else if(Lt===" ")hs=j;else{let _s=this.createPath(It,a,_e,$,i);_s&&(hs=_s.offsetX-(Ht+dr),rt.push(_s.path))}if(Nt.replacements.length===1)ut[yt].push([_e,$]),st[yt].push(hs);else{let _s=Nt.replacements.map(hn=>(s.glyphs.get(hn).advanceWidth??0)*a),ds=_s.reduce((hn,Ft)=>hn+=Ft,0),Nn=_s.map(hn=>hn/ds),us=_e;for(let hn=0;hn<Nn.length;hn++){let Ft=hs*Nn[hn];ut[yt].push([us,$]),st[yt].push(Ft),us+=Ft}}_e+=hs,gt=It}$-=o}let wt=[];for(let yt=0,At=rt.length;yt<At;yt++)wt.push(...rt[yt].toShapes());return{shapes:wt,charWidths:st,lineWidths:c,charCoords:ut}}get isUserFont(){return this._isUserFont}get arrayBuffer(){return this._arrayBuffer}get ascender(){var e;return((e=this.font)==null?void 0:e.ascender)??0}get descender(){var e;return((e=this.font)==null?void 0:e.descender)??0}get familyName(){var e;return((e=this.font)==null?void 0:e.names.fontFamily)??""}get subfamilyName(){var e;return((e=this.font)==null?void 0:e.names.fontSubfamily)??""}get unitsPerEm(){var e;return((e=this.font)==null?void 0:e.unitsPerEm)??1}getLineInitialOffsetX(e,i,s,a,o){return(s===3||s===2)&&a.indexOf(`
`)>=0&&(e-=o),s===3?i*.5-e*.5:s===2?i-e:0}getLineInitialOffsetY(e,i,s,a,o){let c=i*e,d=Math.abs(this.ascender-this.descender)*a,g=e-d,b=-this.ascender*a-g/2;return o===3?-(s-c-b):o===2?-(s*.5-c*.5-b):b}createPath(e,i,s,a,o){var b;let c=e.getPath(s,-a,o.fontSize,{kerning:!1,letterSpacing:o.letterSpacing});if(!c){console.error('THREE.Font: character "'+e+'" does not exists in font family '+this.familyName+".");return}let d=new hx,g=(e.advanceWidth??1)*i;if(e)for(let j of c.commands){let _e=(b=d.currentPath)==null?void 0:b.currentPoint;if(!(_e&&j.type!=="Z"&&_e.x===j.x&&-_e.y===j.y))switch(j.type){case"M":d.moveTo(j.x,-j.y);break;case"L":d.lineTo(j.x,-j.y);break;case"Q":d.quadraticCurveTo(j.x1,-j.y1,j.x,-j.y);break;case"C":d.bezierCurveTo(j.x1,-j.y1,j.x2,-j.y2,j.x,-j.y);break}}return d.subPaths.forEach(j=>{let _e=ZY(j.curves);_e!==void 0&&j.currentPoint.distanceTo(_e)>0&&j.lineTo(_e.x,_e.y)}),{offsetX:g+o.fontSize*o.letterSpacing,path:d}}getCharWidth(e,i){var s;return((s=this.font)==null?void 0:s.getAdvanceWidth(e,i.fontSize,{kerning:!0,letterSpacing:i.letterSpacing}))??0}getTextWidth(e,i){var s;return((s=this.font)==null?void 0:s.getAdvanceWidth(e,i.fontSize,{kerning:!0,letterSpacing:i.letterSpacing}))??0}computeSpaceWidthForLine(e,i,s){let a=this.getCharWidth(" ",s),o=e[i];if(o){let c=this.countSpaces(o.trimEnd());if(s.horizontalAlign===4&&i<e.length-1&&c){let d=s.width,g=this.getTextWidth(o,s);return(d-(g-c*a))/c}}return a}countSpaces(e){return(e.match(/ /g)||[]).length}};function ZY(e){if(e.length){let i=e[0];if(i instanceof pn)return i.v1;if(i instanceof fn||i instanceof is)return i.v0}}var b_=class{constructor(){this.objects=new Map,this.unreachable=new Set}getCached(e){return this.objects.get(e)}get size(){return this.objects.size}get(e,i,s){let a=this.objects.get(e);return a===void 0?(a=this.createObject(e,i,s),this.objects.set(e,a)):a.isShared=!0,a}forceDelete(e){let i=this.objects.get(e);i&&(this.disposeObject(i),this.objects.delete(e))}mutateIfUnique(e,i){let s=this.objects.get(e);if(s&&s.isShared!==!0)return this.objects.delete(e),this.objects.set(i,s),s}startGc(){this.unreachable=new Set(this.objects.keys())}markAsReachable(e,i){let s=this.objects.get(e);i===s&&this.unreachable.delete(e)}endGc(){this.unreachable.forEach(e=>{this.disposeObject(this.objects.get(e)),this.objects.delete(e)}),this.unreachable.clear()}dispose(){this.objects.forEach(e=>{this.disposeObject(e)}),this.objects.clear()}},zm=class extends b_{constructor(e){super(),this.flatShading=e}disposeObject(e){e.dispose()}createObject(e,i,s){let a=Va(e,i,this.flatShading,s);return a.computeBoundingSphere(),a}},ER={markNeedsUpdateRendererDirty:()=>{}},S_=class extends nx{constructor(e){super(),this.shared=e}create(e){return new ff(e,this.shared)}},eu=class{constructor(e,i={}){if(this.data=e,this.geometryCache=new zm(!0),this.geometryCache2=new zm(!1),this.imageHolderCache=new S_(this),this.thisContext={scene:ER,shared:this},this.deletedMaterial=new $c(oi.defaultTwoLayerData("phong"),this.thisContext,""),this.deletedImage=new cs(ad.emptyImage,this),this.deletedVideo=new cs(Jh.defaultVideo,this),this.materials={},this.images={},this.canvases={},this.videos={},this.colors={},this.audios={},this.particles={},this.fonts={},this.variables={},this.mouseProperty=null,this.raycastProperty=null,this.requestRender=()=>{this._requestRender&&this._requestRender()},i.images)for(let[s,a]of Object.entries(i.images))this.addImage(s,a);if(i.videos)for(let[s,a]of Object.entries(i.videos))this.addVideo(s,a);if(i.audios)for(let[s,a]of Object.entries(i.audios))this.addAudio(s,a);if(i.particles)for(let[s,a]of Object.entries(i.particles))this.addParticle(s,a);this.reset(e)}setRequestRender(e){this._requestRender=e}setEntityOpContext(e){this.entityOpContext=e}reset(e,i=!1){this.resetLib(e.lib);for(let{id:s,data:a}of e.variables)this.addVariableHolder(s,a),i&&this.updateVariableHolder(s,a);for(let[s,a]of Object.entries(e.images))this.addImage(s,a);for(let[s,a]of Object.entries(e.videos))this.addVideo(s,a);for(let[s,a]of Object.entries(e.colors))this.addColor(s,a);for(let[s,a]of Object.entries(e.materials))this.addMaterial(s,a);for(let[s,a]of Object.entries(e.audios))this.addAudio(s,a);for(let[s,a]of Object.entries(e.particles))this.addParticle(s,a);for(let[s,a]of Object.entries(e.fonts))this.addFont(s,a)}addMaterial(e,i){if(this.materials[e]){let s=this.materials[e];s.reset(i,this.thisContext),s.dispose()}else{let s=new $c(i,this.thisContext,e);this.materials[e]=s}}deleteMaterial(e){this.materials[e]&&(this.materials[e].nodeMaterialDispose(),delete this.materials[e])}getMaterial(e){return this.materials[e]}getMaterialOrDeletedPlaceholder(e){return this.materials[e]??this.deletedMaterial}material(e){return typeof e=="string"?this.getMaterialOrDeletedPlaceholder(e):e==null?(console.error("material is undefined or null"),this.deletedMaterial):new Ga(e,this.thisContext)}getMaterials(){return this.materials}addImage(e,i){return this.images[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),this.images[e].updateSrc(i.data),!0):(this.images[e]=new cs(i,this),!1)}deleteImage(e){let i=this.images[e];i&&(i.dispose(),delete this.images[e])}getDefaultImage(){return this.images.image_0}getImage(e){return this.images[e]??this.deletedImage}image(e){return typeof e=="string"?this.getImage(e):this.imageHolderCache.load(e)}addCanvas(e,i){return this.canvases[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),this.canvases[e].updateSrc(i),!0):(this.canvases[e]=new cs(i,this),!1)}canvas(e){return this.canvases[e]}addVideo(e,i){return this.videos[e]?(this.videos[e].updateSrc(i.data),!0):(this.videos[e]=new cs(i,this),!1)}deleteVideo(e){let i=this.videos[e];i&&(i.dispose(),delete this.videos[e])}getVideo(e){return this.videos[e]??this.deletedVideo}video(e){return typeof e=="string"?this.getVideo(e):this.imageHolderCache.load(e)}addColor(e,i){return this.colors[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),"a"in i?this.colors[e].setRGBA(i.r,i.g,i.b,i.a):this.colors[e].setRGBA(i.r,i.g,i.b,1),!0):("a"in i?this.colors[e]=new Xl(i.r,i.g,i.b,i.a):this.colors[e]=new Xl(i.r,i.g,i.b,1),!1)}updateColor(e,i){if(this.colors[e]){this.onColorOrImageUpdate&&this.onColorOrImageUpdate();let s=this.colors[e];return this.colors[e].r=i.r??s.r,this.colors[e].g=i.g??s.g,this.colors[e].b=i.b??s.b,this.colors[e].a=i.a??s.a,!0}return!1}deleteColor(e){this.colors[e]&&delete this.colors[e]}getColor(e){return this.colors[e]}color(e){let i;if(typeof e=="string"){let s=this.getColor(e);s?i=s:(console.warn("Tried to create color layer params with a color key that does not exist in the assets manager"),i=new xr$1(0,0,0,0))}else return"a"in e?new xr$1(e.r,e.g,e.b,e.a):new xr$1(e.r,e.g,e.b,1);return i}addAudio(e,i){this.audios[e]=i}getAudio(e){let i=this.audios[e];if(i instanceof ja)return i;{let s=new ja({src:i.data});return this.audios[e]=s,s}}addParticle(e,i){this.particles[e]=i}getParticle(e){return this.particles[e]}deleteParticle(e){this.particles[e]&&delete this.particles[e]}deleteAudio(e){let i=this.audios[e];i&&(i instanceof ja&&i.dispose(),delete this.audios[e])}addFont(e,i){this.fonts[e]=new fx(i),this.fonts[e].loadingPromise.then(()=>this.requestRender())}getFont(e){return this.fonts[e]}deleteFont(e){this.fonts[e]&&delete this.fonts[e]}dispose(){Object.keys(this.materials).forEach(e=>this.deleteMaterial(e)),this._requestRender=void 0,Object.values(this.audios).forEach(e=>{e instanceof ja&&e.dispose()}),this.audios={},this.particles={},this.geometryCache.dispose(),this.geometryCache2.dispose()}addVariableHolder(e,i){return this.variables[e]===void 0?(this.variables[e]={value:i.value,locations:[]},"dynamicVariableType"in i&&(this.variables[e].dynamicVariablePlayState="Playing",this.variables[e].dynamicVariableToggleIsForward=void 0),!0):(this.variables[e].value=i.value,!1)}resetDynamicVariablePlayState(){for(let e in this.variables)this.variables[e].dynamicVariablePlayState!==void 0&&(this.variables[e].dynamicVariablePlayState="Playing",this.variables[e].dynamicVariableToggleIsForward=void 0)}updateVariableHolder(e,i){this.updateVariable(e,i.value)}updateVariable(e,i){if(this.variables[e]===void 0)return!1;this.variables[e].value=i;let s=i;for(;typeof s=="string";)s=this.variables[s].value;let a=this.entityOpContext.scene;for(let o=this.variables[e].locations.length-1;o>=0;o--){let c=this.variables[e].locations[o];if(c[0]==="material"){let d=c[1],g=s,b={scene:a,shared:this},j=c.slice(2);a.traverseMaterial($=>{let rt=$.root??$;rt.uuid===d&&rt.onVariableUpdate(j,g,b)});let _e=this.materials[d];_e&&_e.onVariableUpdate(j,g,b)}else{let d=a.find(c[0]);if(d===void 0){this.variables[e].locations.splice(o,1);continue}if(c[1]!=="geometry"&&c[1]!=="particles"){for(let g=1;g<c.length-1;g++)d=d[c[g]];c[1]==="rotation"?d[c[c.length-1]]=s*Me.DEG2RAD:d[c[c.length-1]]=s}if(d=a.find(c[0]),d.type==="ParticleEmitter"&&d.updateVariableState(s,c),vt.is(d)){if(c[1]==="position"||c[1]==="rotation"||c[1]==="scale")d.onVariableUpdate();else if(c[1]==="geometry"){let g=d;d.component&&(g=d.component);let b=g.dataPatched;g.chooseGeoemtryCache(this).forceDelete(b.geometry),g.createGeometryDelayed(this.entityOpContext),g.onVariableUpdate(!0),g.instances.forEach(j=>{let _e=j.dataPatched;j.chooseGeoemtryCache(this).forceDelete(_e.geometry),j.createGeometryDelayed(this.entityOpContext),j.onVariableUpdate(!0)})}}}}return!0}deleteVariable(e){this.variables[e]&&delete this.variables[e]}getVariable(e,i){var s,a,o;if(Array.isArray(e)){if(e[0]==="mouse")return((s=this.mouseProperty)==null?void 0:s[e[1]])??0;if(e[0]==="raycast")return((a=this.raycastProperty)==null?void 0:a[e[1]])??0;let c=this.entityOpContext.scene.find(e[0]);if(e[1]==="width"||e[1]==="height"||e[1]==="depth")return c.geometry.userData.parameters[e[1]];for(let d=1;d<e.length;d++)c=c[e[d]];return e[1]==="rotation"&&(c*=Me.RAD2DEG),c}for(let c in this.variables){if(i===void 0)break;let d=this.variables[c],g=(o=d.locations)==null?void 0:o.findIndex(b=>Nr$1.equal(b,i));g!==void 0&&g!==-1&&d.locations.splice(g,1)}if(typeof e=="string"){let c=e,d=e;do{if(d=c,this.variables[c]===void 0)break;c=this.variables[c].value}while(typeof c=="string");return i&&this.variables[d]!==void 0&&this.variables[d].locations.push(i),c}else return e}getVariables(){return this.variables}getDynamicVariablePlayState(e){var i;return(i=this.variables[e])==null?void 0:i.dynamicVariablePlayState}setDynamicVariablePlayState(e,i){this.variables[e]!==void 0&&(this.variables[e].dynamicVariablePlayState=i)}getDynamicVariableToggleIsForward(e){var i;return(i=this.variables[e])==null?void 0:i.dynamicVariableToggleIsForward}setDynamicVariableToggleIsForward(e,i){this.variables[e]!==void 0&&(this.variables[e].dynamicVariableToggleIsForward=i)}resetLib(e){for(let[i,s]of Object.entries(e.images))this.addImage(i,s.asset);for(let[i,s]of Object.entries(e.audios))this.addAudio(i,s.asset);for(let[i,s]of Object.entries(e.particles))this.addParticle(i,s.asset);for(let[i,s]of Object.entries(e.colors))this.addColor(i,s.asset);for(let[i,s]of Object.entries(e.fonts))this.addFont(i,s.asset);for(let[i,s]of Object.entries(e.materials))this.addMaterial(i,s.asset);for(let[i,s]of Object.entries(e.videos))this.addVideo(i,s.asset);for(let[i,s]of Object.entries(e.variables))this.addVariableHolder(i,s.asset)}updateLibByOp(e,i){e.path[0]==="images"?e.path.length===1&&e.type===1?this.addImage(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteImage(e.id):e.path[0]==="videos"?e.path.length===1&&e.type===1?this.addVideo(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteVideo(e.id):e.path[0]==="audios"?e.path.length===1&&e.type===1?this.addAudio(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteAudio(e.id):e.path[0]==="particles"?e.path.length===1&&e.type===1?this.addParticle(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteParticle(e.id):e.path[0]==="colors"?e.path.length===1&&e.type===1?this.addColor(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteColor(e.id):e.path[0]==="materials"?e.path.length===1&&e.type===1?this.addMaterial(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteMaterial(e.id):e.path[0]==="fonts"?e.path.length===1&&e.type===1?this.addFont(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteFont(e.id):e.path[0]==="variables"?e.path.length===1&&e.type===1?this.addVariableHolder(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteVariable(e.id):e.path[0]==="components"&&i.updateByLibOp(e,this)}updateByOp(e,i,s){this.data=i,e.path[0]==="images"?e.path.length===2&&e.type===0?e.props.data&&this.getImage(e.path[1]).updateSrc(e.props.data):e.path.length===1&&e.type===1?this.addImage(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteImage(e.id):e.path[0]==="videos"?e.path.length===2&&e.type===0?e.props.data&&this.getVideo(e.path[1]).updateSrc(e.props.data):e.path.length===1&&e.type===1?this.addVideo(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteVideo(e.id):e.path[0]==="audios"?e.path.length===2&&e.type===0?e.props.data&&this.addAudio(e.path[1],i.audios[e.path[1]]):e.path.length===1&&e.type===1?this.addAudio(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteAudio(e.id):e.path[0]==="particles"?e.path.length===2&&e.type===0?e.props.data&&this.addParticle(e.path[1],i.particles[e.path[1]]):e.path.length===1&&e.type===1?this.addParticle(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteParticle(e.id):e.path[0]==="colors"?e.path.length===2&&e.type===0?this.updateColor(e.path[1],e.props):e.path.length===1&&e.type===1?this.addColor(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteColor(e.id):e.path[0]==="materials"?e.path.length===1&&e.type===1?this.addMaterial(e.id,e.data):e.path.length===1&&e.type===2?this.deleteMaterial(e.id):e.path.length>1&&this.getMaterial(e.path[1]).updateByOp(Fr$1.drop(e,2),i.materials[e.path[1]],{shared:this,scene:s}):e.path[0]==="fonts"?e.path.length===2&&e.type===0?this.updateFont(e.path[1],e,s):e.path.length===1&&e.type===1?this.addFont(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteFont(e.id):e.path[0]==="variables"?e.path.length===2&&e.type===0&&"value"in e.props?this.updateVariable(e.path[1],e.props.value):e.path.length===1&&e.type===4?this.addVariableHolder(e.id,e.data):e.path.length===1&&e.type===5&&this.deleteVariable(e.id):e.path[0]==="lib"&&this.updateLibByOp(Fr$1.drop(e,1),s)}updateFont(e,i,s){if(i.props.url){let a=this.getFont(e),o={...this.data.fonts[e],url:i.props.url};a.update(o),a.loadingPromise.then(()=>this.requestRender()),s.updateFont(e,this)}}};new eu(Mn.emptyData());var Ps=class extends pr{updateByPatchedOp(e,i,s){if(super.updateByPatchedOp(e,i,s),sD(e.path,["materials"])!==null&&e.type===0&&Array.isArray(this.material))for(let[a,o]of Object.entries(e.props)){let c=s.shared.material(o);this.material[Number(a)]=c}else if(Rt(e.path,["material"])&&this.material instanceof Wn)"material"in i&&typeof i.material!="string"&&this.material.updateByOp(Fr$1.drop(e,1),i.material,s);else if(Rt(e.path,["materials","*"])&&Array.isArray(this.material)){let a=e.path[1];if("materials"in i&&a<this.material.length){let o=i.materials[a];typeof o!="string"&&this.material[a].updateByOp(Fr$1.drop(e,2),o,s)}}}get needsAO(){return this.material!==void 0?(Array.isArray(this.material)?this.material[0]:this.material).hasAO:!1}updateState(e,i){var a,o;super.updateState(e,i),e.castShadow!==void 0&&(this.castShadow=e.castShadow),e.receiveShadow!==void 0&&(this.receiveShadow=e.receiveShadow);let s=this.dataPatched;if(((a=e.geometry)==null?void 0:a.type)!=="NonParametricGeometry"&&"material"in e&&e.material!==void 0&&(this.disposeMaterial(),this.material=i.shared.material(e.material).getFlavor(s.flatShading,s.side,s.wireframe),i.scene.markNeedsUpdateRendererDirty()),(((o=e.geometry)==null?void 0:o.type)==="NonParametricGeometry"||"materials"in e)&&("materials"in e&&e.materials!==void 0?(this.disposeMaterial(),this.material=e.materials.map(c=>i.shared.material(c).getFlavor(s.flatShading,s.side,s.wireframe)),i.scene.markNeedsUpdateRendererDirty()):"material"in e&&e.material!==void 0&&(this.disposeMaterial(),this.material=[i.shared.material(e.material).getFlavor(s.flatShading,s.side,s.wireframe)],i.scene.markNeedsUpdateRendererDirty())),e.flatShading!==void 0||e.wireframe!==void 0||e.side!==void 0)if(Array.isArray(this.material))for(let c=0;c<this.material.length;c++)this.material[c]=this.material[c].getFlavor(s.flatShading,s.side,s.wireframe);else this.material=this.material.getFlavor(s.flatShading,s.side,s.wireframe)}disposeMaterial(){this.material&&xv(this.material).forEach(e=>{e instanceof Wn&&(e instanceof $c||e.nodeMaterialDispose())})}dispose(){this.disposeMaterial(),super.dispose()}},TR=new _,MR=new Ke,CR=new Ke,$Y=new _,PR=new ce$1,ur=class extends Ps{constructor(e,i,s){super(e,i),this.data=i,this.isSkinnedMesh=!1,this.localGeometry=void 0,i.bindMode&&i.bindMatrix&&(this.bindMode=i.bindMode,this.bindMatrix=new ce$1().fromArray(i.bindMatrix),this.bindMatrixInverse=new ce$1)}chooseGeoemtryCache(e){return e.geometryCache}markGeometryAsReachable(e){this.geometryCreateDeleyed instanceof Pe&&this.chooseGeoemtryCache(e).markAsReachable(this.dataPatched.geometry,this.geometryCreateDeleyed)}get geometry(){if(this.localGeometry!==void 0)return this.localGeometry;if(this.geometryCreateDeleyed instanceof eu){let e=this.geometryCreateDeleyed,i=this.chooseGeoemtryCache(e);this.geometryCreateDeleyed=i.get(this.dataPatched.geometry,e,this)}return this.geometryCreateDeleyed}set geometry(e){this.localGeometry=e}get is2DAndNoDepth(){let e=this.dataPatched.geometry;return om.is2DParametricMesh(e.type)&&e.depth===0}get is2DType(){return om.is2DParametricMesh(this.geometry.userData.type)}get isNonParametric(){return this.geometry.userData.type==="NonParametricGeometry"}updateByPatchedOp(e,i,s){super.updateByPatchedOp(e,i,s),Rt(e.path,["geometry"])&&this.updateByPatchedOpGeometry(Fr$1.drop(e,1),i.geometry,s)}removeInteractionGeometry(e){var i;(i=this.localGeometry)==null||i.dispose(),this.localGeometry=void 0}updateGeometryInteractions(e,i){var a;this.invalidateDownstreamBooleanData();let s=this.data.geometry.type;if(s==="NonParametricGeometry"||s==="SubdivGeometry"){let o=e;if(this.localGeometry===void 0){let j={...this.data.geometry,...o};this.localGeometry=Va(j,i,this.data.flatShading,this)}let c,d,g;o.scaleBaked?[c,d,g]=o.scaleBaked:{width:c,height:d,depth:g}=o;let b=this.localGeometry.userData;b.sxPrev!==void 0&&Mm(this.localGeometry.attributes,c/b.sxPrev,d/b.syPrev,g/b.szPrev),b.sxPrev=c,b.syPrev=d,b.szPrev=g}else{let o={...this.data.geometry,...e};(a=this.localGeometry)==null||a.dispose(),this.localGeometry=Va(o,i,this.data.flatShading,this)}}refreshAttachedCloners(e){for(let i of this.attachedSurfaceCloners)e.scene.addPendingUpdateCloner(i.object)}refreshAttachedPaths(e){for(let i of this.attachedPaths)e.scene.addPendingCommand(()=>i.updateShape())}createGeometryDelayed(e){this.geometryCreateDeleyed=e.shared,this.refreshAttachedCloners(e),this.refreshAttachedPaths(e)}updateByPatchedOpGeometry(e,i,s){var o;let a=!1;e.type===0&&e.path.length===0&&Object.keys(e.props).includes("scaleBaked")&&this.geometryCreateDeleyed instanceof ai&&this.chooseGeoemtryCache(s.shared).mutateIfUnique(this.geometryCreateDeleyed.data,i)===this.geometryCreateDeleyed&&(a=!0,this.geometryCreateDeleyed.mutateDirectlyScaleBaked(i,e.props.scaleBaked),this.refreshAttachedCloners(s),this.refreshAttachedPaths(s)),a||((o=s.scene)==null||o.markGeometryCacheDirty(),this.createGeometryDelayed(s)),this.resetBBoxNeedsUpdate(),this.invalidateDownstreamBooleanData()}updateGeometryOnStateUpdate(e,i){this.createGeometryDelayed(i)}updateState(e,i){e.geometry!==void 0&&this.updateGeometryOnStateUpdate(e.geometry,i),super.updateState(e,i)}updateGeometryGroupsIfNeeded(){var e;Array.isArray(this.material)&&this.geometry.groups.length===0&&this.geometry.addGroup(0,Math.max(((e=this.geometry.getIndex())==null?void 0:e.count)??0,this.geometry.getAttribute("position").count),0)}updateEntityBoxSize(e,i){let s=this.geometry.userData.parameters;this.is2DType?e.set(0,0,s.depth*.5):this.isNonParametric?(e.setScalar(0),this.geometry.boundingSphere&&e.copy(this.geometry.boundingSphere.center),i.set(s.width,s.height,s.depth??0).multiplyScalar(.5)):e.setScalar(0),i.set(s.width,s.height,s.depth??0).multiplyScalar(.5)}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"&&this.bindMatrixInverse.copy(this.bindMatrix).invert()}bind(e,i){this.skeleton=e,this.isSkinnedMesh=!0,i===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),i=this.matrixWorld),this.bindMatrix.copy(i),this.bindMatrixInverse.copy(i).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(e){let i=new Ke,s=this.geometry.attributes.skinWeight;for(let a=0,o=s.count;a<o;a++){i.fromBufferAttribute(s,a);let c=1/i.manhattanLength();c!==1/0?i.multiplyScalar(c):i.set(1,0,0,0),s.setXYZW(a,i.x,i.y,i.z,i.w)}}boneTransform(e,i){let s=this.skeleton;if(s===void 0)return;let a=this.geometry;MR.fromBufferAttribute(a.attributes.skinIndex,e),CR.fromBufferAttribute(a.attributes.skinWeight,e),TR.copy(i).applyMatrix4(this.bindMatrix),i.set(0,0,0);for(let o=0;o<4;o++){let c=CR.getComponent(o);if(c!==0){let d=MR.getComponent(o);PR.multiplyMatrices(s.bones[d].matrixWorld,s.boneInverses[d]),i.addScaledVector($Y.copy(TR).applyMatrix4(PR),c)}}return i.applyMatrix4(this.bindMatrixInverse)}};function eX(e){var d,g;if(e.geometry.attributes.extrudeNormal||!e.geometry.attributes.position||!e.geometry.attributes.normal)return;let i=new Map,s=e.geometry.attributes,a=s.position.array,o=s.normal.array,c=new Float32Array(a.length);for(let b=0;b<a.length;b+=3){let j=`${a[b]}_${a[b+1]}_${a[b+2]}`,_e=new _(o[b],o[b+1],o[b+2]);i.has(j)?(d=i.get(j))==null||d.normals.push(_e):i.set(j,{normals:[_e],result:new _})}i.forEach((b,j)=>{for(let _e of b.normals)b.result.add(_e);b.result.divideScalar(b.normals.length)});for(let b=0;b<a.length;b+=3){let j=`${a[b]}_${a[b+1]}_${a[b+2]}`,_e=(g=i.get(j))==null?void 0:g.result;_e&&(c[b]=_e.x,c[b+1]=_e.y,c[b+2]=_e.z)}e.geometry.setAttribute("extrudeNormal",new Te(c,3))}function tX(e){if(e.geometry.attributes.extrudeNormals||!e.geometry.attributes.position)return;let i=e.geometry.attributes.position.array,s=new Float32Array(i.length),a=new _;for(let o=0;o<i.length;o+=3)a.set(i[o],i[o+1],i[o+2]).normalize(),s[o]=a.x,s[o+1]=a.y,s[o+2]=a.z;e.geometry.setAttribute("extrudeNormal",new Te(s,3))}function pf(e){if(Array.isArray(e.material)){for(let i of e.material)if(i.getLayersOfType("outline").length===0)return}else if(!(e.material instanceof Wn)||e.material.getLayersOfType("outline").length===0)return;e instanceof ur&&e.is2DAndNoDepth?tX(e):eX(e)}function mf(e){if(!e.geometry.attributes.position)return;let i=e.geometry.attributes.position.array,s=new Float32Array(i.length),a=parseInt(e.uuid.replace(/\D/g,"")),o=[Me.seededRandom(a),Me.seededRandom(a+1e4),Me.seededRandom(a+2e4)];for(let c=0;c<i.length;c++)s[c]=o[c%3];e.geometry.setAttribute("randomColor",new Xe(s,3))}var Yo=new Wt,Um=new _;function DR(e){let i=!1;return e.scene.objects.traverse((s,a)=>{a.type==="Mesh"&&a.geometry.type==="SubdivGeometry"&&(i=!0)}),i}var ao=class extends ur{constructor(e,i,s){super(e,i,s),this.data=i,this.hiddenMatrixOld=new ce$1,this.smoothShading=!0,this.skipReactionUpdate=!1}chooseGeoemtryCache(e){return this.dataPatched.flatShading?e.geometryCache:e.geometryCache2}get subdivPointerNew(){return this.localGeometry!==void 0?this.subdivPointer:this.geometry.ensureSubdivPointer()}get originalGeometryNew(){return this.localGeometry!==void 0?this.originalGeometry:this.geometry.originalGeometry}get phongAngle(){return this.data.geometry.phongAngle??45}updateEntityBoxSize(e,i){let s=this.geometry.userData.parameters;e.copy(this.originalGeometryNew.boundingSphere.center),i.set(s.width,s.height,s.depth??0).multiplyScalar(.5)}createGeometryByControls(e){var c,d,g;if(this.skipReactionUpdate===!0)return;let i=(c=this.localGeometry)==null?void 0:c.uuid,{originalGeometry:s,subdividedGeometry:a,subdivPointer:o}=ai.build(e,this.subdivPointer,this.smoothShading,this.hasNonUniformScale?this.shearScale:void 0);this.subdivPointer=o,s!==void 0&&((d=this.originalGeometry)==null||d.dispose(),this.originalGeometry=s),a!==void 0&&((g=this.subdividedGeometry)==null||g.dispose(),this.subdividedGeometry=a??void 0),this.localGeometry=this.subdividedGeometry??this.originalGeometry,pf(this),mf(this),this.calcBoundingBox(),i&&(this.localGeometry.uuid=i)}updateState(e,i){if(super.updateState(e,i),e.flatShading!==void 0){let s=this.material;this.material=Array.isArray(s)?s.map(a=>a.getFlavor(!1,a.side,a.wireframe)):s.getFlavor(!1,s.side,s.wireframe),this.smoothShading=!e.flatShading,this.createGeometryDelayed(i)}}updateMesh(e=!1){ai.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1,this.originalGeometry,e&&this.hasNonUniformScale?this.shearScaleInv:void 0),this.subdividedGeometry&&ai.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1,this.subdividedGeometry,e&&this.hasNonUniformScale?this.shearScaleInv:void 0)}updateTopology(){this.originalGeometry.dispose(),this.originalGeometry=ai.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1),this.subdividedGeometry&&(this.subdividedGeometry.dispose(),this.subdividedGeometry=ai.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1)),this.localGeometry=this.subdividedGeometry??this.originalGeometry}raycast(e,i){let s=this.localGeometry;this.localGeometry=this.originalGeometryNew,pr.prototype.raycast.call(this,e,i),this.localGeometry=s}activateSVDCompensation(){!this.hasNonUniformScale||(this.matrix.copy(this.matrixWorldRigid),this.hiddenMatrixOld.copy(this.hiddenMatrix),this.hiddenMatrix.copy(this.parent.matrixWorld).invert())}deactivateSVDCompensation(){!this.hasNonUniformScale||(this.updateMatrix(),this.hasNonUniformScale=void 0,this.hiddenMatrix.copy(this.hiddenMatrixOld))}calcBoundingBox(){let e=this.originalGeometry;e.boundingSphere===null&&(e.boundingSphere=new Br,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=e.boundingSphere));let i=e.attributes.position,s=e.boundingSphere.center;Yo.setFromBufferAttribute(i),Yo.getCenter(s),e.boundingSphere.radius=s.distanceTo(Yo.max),isNaN(e.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),Yo.getSize(Um),this.hasNonUniformScale&&Um.divide(this.scale);let a={width:Um.x,height:Um.y,depth:Um.z};return this.geometry.userData.parameters=a,a}updateBoundingSphere(e){let i=this.originalGeometry;Yo.min.set(e[0],e[2],e[4]),Yo.max.set(e[1],e[3],e[5]),this.hasNonUniformScale&&(Yo.min.applyMatrix4(this.shearScaleInv),Yo.max.applyMatrix4(this.shearScaleInv)),i.boundingSphere===null&&(i.boundingSphere=new Br);let s=i.boundingSphere.center;Yo.getCenter(s),i.boundingSphere.radius=s.distanceTo(Yo.max)}freeSubdivPointer(){var e,i;this.subdivPointer&&(ai.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0),this.localGeometry=void 0,(e=this.originalGeometry)==null||e.dispose(),(i=this.subdividedGeometry)==null||i.dispose()}dispose(){super.dispose(),this.freeSubdivPointer()}updateByPatchedOpGeometry(e,i,s){super.updateByPatchedOpGeometry(e,i,s),this.localGeometry&&this.createGeometryByControls(i)}},OR=-1,rX=1,IR={x:[1,0,0],"-x":[-1,0,0],y:[0,1,0],"-y":[0,-1,0],z:[0,0,1],"-z":[0,0,-1]},RR={polygon_center:0,edge:1,vertex:2},Gm=(e,i)=>(s,a)=>!i||s===0||e===0?0:e*a/100,xt=(e,i)=>{let s=Math.abs(i),a=s*-1;return(e-OR)*(s-a)/(rX-OR)+a};function LR(e){let i=[],s={};for(var a=0,o=e.length;a<o;a++){var c=JSON.stringify(e[a].pos.map(d=>Math.round(d*1e4)/1e4));s[c]||(i.push(e[a]),s[c]=!0)}return i}var iX=new _,px=new _,nX=new _,sX=new _;function gf(e,i){let s=nX.fromArray(e),a=sX.fromArray(i);px.copy(a).sub(s);let o=px.length();return px.normalize().multiplyScalar(o*.5),iX.copy(s).add(px).toArray()}var Ds=new Dr$1,mx=new _,gx=new _,tu=new _;function BR(e){let i=[];for(let s=0;s<=e.index.count;s++)if(mx.fromArray(e.index.array,s*3),Ds.setFromAttributeAndIndices(e.attributes.position,mx.x,mx.y,mx.z),Ds.getNormal(gx),Ds.getMidpoint(tu),!(isNaN(tu.x)||isNaN(tu.y)||isNaN(tu.z))){let{a,b:o,c}=Ds,d=a.toArray(),g=o.toArray(),b=c.toArray(),j=a.distanceTo(o),_e=o.distanceTo(c),$=c.distanceTo(a),rt=gf(d,g),st=gf(g,b),ut=gf(b,d),gt=[j,_e,$],wt=Math.max(...gt),yt=gt.filter(Tt=>Math.round(Tt)===Math.round(wt)).length>1,At=[],Ct=Ds.getMidpoint(tu).toArray();wt===j&&!yt&&(At=[st,ut,ut],Ct=rt),wt===_e&&!yt&&(At=[rt,ut,ut],Ct=st),wt===$&&!yt&&(At=[rt,st,st],Ct=ut),yt&&(At=[rt,st,ut]),i.push({vertices:[d,g,b],faceCenters:At,midpoint:Ct,norm:Ds.getNormal(gx).toArray()})}return i}function NR(e){let i=[],{position:s}=e.attributes;for(let a=0;a<s.count;a++){Ds.setFromAttributeAndIndices(s,a*3,a*3+1,a*3+2),Ds.getNormal(gx),Ds.getMidpoint(tu);let o=Ds.a.toArray(),c=Ds.b.toArray(),d=Ds.c.toArray();i.push({vertices:[o,c,d],faceCenters:[gf(o,c),gf(c,d),gf(d,o)],midpoint:tu.toArray(),norm:gx.toArray()})}return i}var oX=4,aX=.5,w_=e=>.5*(1-Math.cos(e*Math.PI)),A_=class{constructor(){this.perlin=new Array(4096)}noise(e,i=0,s=0){if(this.perlin==null){this.perlin=new Array(4096);for(let wt=0;wt<4096;wt++)this.perlin[wt]=Math.random()}e<0&&(e=-e),i<0&&(i=-i),s<0&&(s=-s);let a=Math.floor(e),o=Math.floor(i),c=Math.floor(s),d=e-a,g=i-o,b=s-c,j,_e,$=0,rt=.5,st,ut,gt;for(let wt=0;wt<oX;wt++){let yt=a+(o<<4)+(c<<8);j=w_(d),_e=w_(g),st=this.perlin[yt&4095],st+=j*(this.perlin[yt+1&4095]-st),ut=this.perlin[yt+16&4095],ut+=j*(this.perlin[yt+16+1&4095]-ut),st+=_e*(ut-st),yt+=256,ut=this.perlin[yt&4095],ut+=j*(this.perlin[yt+1&4095]-ut),gt=this.perlin[yt+16&4095],gt+=j*(this.perlin[yt+16+1&4095]-gt),ut+=_e*(gt-ut),st+=w_(b)*(ut-st),$+=st*rt,rt*=aX,a<<=1,d*=2,o<<=1,g*=2,c<<=1,b*=2,d>=1&&(a++,d--),g>=1&&(o++,g--),b>=1&&(c++,b--)}return $}noiseSeed(e){let i=(()=>{let s,a;return{setSeed(o){a=s=(o??Math.random()*4294967296)>>>0},getSeed(){return s},rand(){return a=(1664525*a+1013904223)%4294967296,a/4294967296}}})();i.setSeed(e),this.perlin=new Array(4096);for(let s=0;s<4096;s++)this.perlin[s]=i.rand()}},FR=A_,kR=new _,VR=new ce$1,zR=new qs;function __(e){let i=!1;return e.scene.objects.traverse((s,a)=>{a.type==="Mesh"&&a.geometry.type==="TextGeometry"&&(i=!0)}),i}var yf=class extends ur{constructor(e,i,s){super(e,i,s),this.data=i}get textGeometry(){return this.geometry}get charWidths(){return this.textGeometry.charWidths}get charCoords(){return this.textGeometry.charCoords}get wrappedText(){return this.textGeometry.wrappedText}get font(){return this.textGeometry.font}get initialOffsetY(){var i;let e=this.dataPatched;return((i=this.font)==null?void 0:i.getLineInitialOffsetY(this.lineHeight,this.wrappedText.length,e.geometry.height,this.fontScale,e.geometry.verticalAlign))??0}get fontScale(){let e=this.dataPatched;return this.font?e.geometry.fontSize/this.font.unitsPerEm:1}get AD(){return Math.abs(this.ascender-this.descender)}get ascender(){var e;return(((e=this.font)==null?void 0:e.ascender)??1)*this.fontScale}get descender(){var e;return(((e=this.font)==null?void 0:e.descender)??1)*this.fontScale}get lineHeight(){let e=this.dataPatched;return e.geometry.fontSize*e.geometry.lineHeight}raycast(e,i){let{matrixWorld:s}=this;if(!(isNaN(e.ray.origin.x)||this.scale.x===0||this.scale.y===0||this.scale.z===0)&&(VR.copy(s).invert(),zR.copy(e.ray).applyMatrix4(VR),zR.intersectBox(this.singleBBox,kR))){let a=kR.applyMatrix4(s),o=e.ray.origin.distanceTo(a);i.push({distance:o,point:a.clone(),object:this})}}},In=1e-4,Xo,jR,HR,WR,UR=new _,GR=new _;q0.then(e=>{Xo=e,jR=[Xo.get_face_center,Xo.get_edge_midpoint,Xo.get_vertex_position],HR=[Xo.get_face_normal,Xo.get_edge_normal,Xo.get_vertex_normal],WR=[Xo.face_count,Xo.edge_count,Xo.vertex_count]});var lX=new ce$1,cX=new ce$1,Kl=new _,ru=new _,jm=new _,E_=new _,uX=new _,hX=new _,Ha=new FR,Ji=class extends Md(_t){constructor(e,i){super(),this.parameters=i,this.objectForSample=void 0,this._pendingMediaLoad=!1,this.object=e}resetOnMove(){this.removeFromParent(),this.parent=null}expandClones(e){if(this.parent===null)this.updateState(this.parameters,e);else for(let i of this.children)i instanceof Vr&&i.expand()}invalidateTransform(e){this.matrixWorldNeedsUpdate=!0,this.traverse(i=>{i instanceof Vr&&i.object===e&&(i.matrixWorldNeedsUpdate=!0)})}onObjUpdateMatrix(){this.parameters.type!=="toObject"&&(this.matrixWorldNeedsUpdate=!0)}update(){switch(this._updateCount(),this.parameters.type){case"radial":this._updateRadial(this.parameters);break;case"linear":this._updateLinear(this.parameters);break;case"grid":this._updateGrid(this.parameters);break;case"toObject":this._updateToObject(this.parameters)}for(let e of this.children)e.updateMatrix(),e.hasNonUniformScale&&(e.updateMatrixWorld(),e.updateMatrixWorldSVD())}_updateCount(e){let i;if(e!==void 0?i=e:i=this.parameters.type==="grid"?Math.round(this.parameters.grid.count[0])*Math.round(this.parameters.grid.count[1])*Math.round(this.parameters.grid.count[2]):this.parameters.count,this.parameters.type==="toObject"&&!this.parameters.toObject.object&&(i=0),this.parameters.type==="toObject"&&this.objectForSample){for(let a=0,o=this.children.length;a<o;++a)this.remove(this.children[0]);let s=this.children;if(s.length===i)return;if(s.length<i)for(let a=0,o=i-s.length;a<o;++a){let c=new Vr(this.object);c.expand(),this.add(c)}else for(let a=0,o=s.length-i;a<o;++a)this.remove(s[a])}else{if(this.children.length===i)return;if(this.children.length<i)for(let s=0,a=i-this.children.length;s<a;++s){let o=new Vr(this.object);o.expand(),this.add(o)}else for(let s=0,a=this.children.length-i;s<a;++s)this.remove(this.children[0])}}_updateRadial(e){let i=e.radial,s=i.start*Me.DEG2RAD,a=i.end*Me.DEG2RAD,o=s-a,c=new or(i.rotation[0],i.rotation[1],i.rotation[2]),d;switch(i.axis){case"z":d=new _(0,0,1);break;case"y":d=new _(0,1,0);break;default:case"x":d=new _(1,0,0);break}let g=e.randomnessObject??Bo.defaultData([1,1,1]).randomnessObject,b=g.noiseType==="perlin";Ha.noiseSeed(g.seed);let j=M0((0,vf.default)(g.seed)),_e=Gm(g.strength,this.parameters.randomness);for(let[$,rt]of this.children.entries()){let st=$*(g.freqScale/10)+g.movement,ut=b?Ha.noise(st):j(st,st),gt=$+1;rt.scale.x=i.scale[0]+_e(gt,xt(ut,g.scale[0]))||In,rt.scale.y=i.scale[1]+_e(gt,xt(ut,g.scale[1]))||In,rt.scale.z=i.scale[2]+_e(gt,xt(ut,g.scale[2]))||In,rt.position.setScalar(0);let wt=o/e.count*$-s;switch(i.axis){case"x":rt.rotation.set(0,wt,0);break;case"y":rt.rotation.set(0,0,wt);break;case"z":rt.rotation.set(wt,0,0);break}rt.translateOnAxis(d,i.radius),rt.position.x+=i.position[0]+_e(gt,xt(ut,g.position[0])),rt.position.y+=i.position[1]+_e(gt,xt(ut,g.position[1])),rt.position.z+=i.position[2]+_e(gt,xt(ut,g.position[2]));let yt=_e(gt,xt(ut,g.rotation[0])),At=_e(gt,xt(ut,g.rotation[1])),Ct=_e(gt,xt(ut,g.rotation[2]));i.alignment===!0?(rt.rotation.x+=c.x+yt,rt.rotation.y+=c.y+At,rt.rotation.z+=c.z+Ct):rt.rotation.set(c.x+yt,c.y+At,c.z+Ct)}}_updateLinear(e){if(e.type!=="linear")throw new Error;let i=e.linear,s=new or(i.rotation[0],i.rotation[1],i.rotation[2]),a=e.randomnessObject??Bo.defaultData([1,1,1]).randomnessObject,o=a.noiseType==="perlin";Ha.noiseSeed(a.seed);let c=M0((0,vf.default)(a.seed)),d=Gm(a.strength,this.parameters.randomness);for(let[g,b]of this.children.entries()){let j=g*(a.freqScale/10)+a.movement,_e=o?Ha.noise(j):c(j,j),$=g+1,rt=d($,xt(_e,a.rotation[0])),st=d($,xt(_e,a.rotation[1])),ut=d($,xt(_e,a.rotation[2]));b.scale.x=1+(i.scale[0]-1)*g+d($,xt(_e,a.scale[0]))||In,b.scale.y=1+(i.scale[1]-1)*g+d($,xt(_e,a.scale[1]))||In,b.scale.z=1+(i.scale[2]-1)*g+d($,xt(_e,a.scale[2]))||In,b.rotation.x=s.x*g+rt,b.rotation.y=s.y*g+st,b.rotation.z=s.z*g+ut,b.position.x=i.position[0]*g+d($,xt(_e,a.position[0])),b.position.y=i.position[1]*g+d($,xt(_e,a.position[1])),b.position.z=i.position[2]*g+d($,xt(_e,a.position[2]))}}_updateGrid(e){let i=0,s=e.grid,a=e.randomnessObject??Bo.defaultData([1,1,1]).randomnessObject,o=Gm(a.strength,this.parameters.randomness),c=a.noiseType==="perlin";Ha.noiseSeed(a.seed);let d=DO((0,vf.default)(a.seed));if(s.useCenter===!0){let g={x:s.count[0]%2===0?2:1,y:s.count[1]%2===0?2:1,z:s.count[2]%2===0?2:1},b=new _(s.size[0]*(s.count[0]-g.x)*.5,s.size[1]*(s.count[1]-g.y)*.5,s.size[2]*(s.count[2]-g.z)*.5);for(let j=0;j<s.count[0];j++)for(let _e=0;_e<s.count[1];_e++)for(let $=0;$<s.count[2];$++){let rt=[(j+1)*(a.freqScale/10)+a.movement,(_e+1)*(a.freqScale/10)+a.movement,($+1)*(a.freqScale/10)+a.movement],st=c?Ha.noise(...rt):d(...rt),ut=this.children[i++];ut.scale.x=1+o(i,xt(st,a.scale[0]))||In,ut.scale.y=1+o(i,xt(st,a.scale[1]))||In,ut.scale.z=1+o(i,xt(st,a.scale[2]))||In;let gt=o(i,xt(st,a.rotation[0])),wt=o(i,xt(st,a.rotation[1])),yt=o(i,xt(st,a.rotation[2]));ut.rotation.set(gt,wt,yt),ut.position.x=s.size[0]*j-b.x+o(i,xt(st,a.position[0])),ut.position.y=s.size[1]*_e-b.y+o(i,xt(st,a.position[1])),ut.position.z=s.size[2]*$-b.z+o(i,xt(st,a.position[2]))}}else for(let g=0;g<s.count[0];g++)for(let b=0;b<s.count[1];b++)for(let j=0;j<s.count[2];j++){let _e=[(g+1)*(a.freqScale/10)+a.movement,(b+1)*(a.freqScale/10)+a.movement,(j+1)*(a.freqScale/10)+a.movement],$=c?Ha.noise(..._e):d(..._e),rt=this.children[i++];rt.scale.x=1+o(i,xt($,a.scale[0]))||In,rt.scale.y=1+o(i,xt($,a.scale[1]))||In,rt.scale.z=1+o(i,xt($,a.scale[2]))||In;let st=o(i,xt($,a.rotation[0])),ut=o(i,xt($,a.rotation[1])),gt=o(i,xt($,a.rotation[2]));rt.rotation.set(st,ut,gt),rt.position.x=s.size[0]*g+o(i,xt($,a.position[0])),rt.position.y=-s.size[1]*b+o(i,xt($,a.position[1])),rt.position.z=-s.size[2]*j+o(i,xt($,a.position[2]))}}_updateToObject(e){var gt;if(e.type!=="toObject")throw new Error;let{toObject:i}=e,s=new or(i.rotation[0],i.rotation[1],i.rotation[2]),a=e.randomnessObject??Bo.defaultData([1,1,1]).randomnessObject,o=a.noiseType==="perlin";Ha.noiseSeed(a.seed);let c=M0((0,vf.default)(a.seed)),d=Gm(a.strength,this.parameters.randomness);if(!i.object){for(let[,wt]of this.children.entries())wt.position.set(0,0,0),wt.scale.setScalar(1),wt.rotation.set(0,0,0);this.objectForSample=void 0;return}if(!this.objectForSample)return;if(this.objectForSample instanceof yf)if(!((gt=this.objectForSample.font)!=null&&gt.isLoaded)||this.objectForSample.geometry.attributes.position===void 0){this._pendingMediaLoad=!0;return}else this._pendingMediaLoad=!1;if(this.objectForSample.geometry===void 0&&this.objectForSample.isAncestorOf(this.object.uuid)){console.warn(`Oh no! The object "${this.object.name}" (${this.object.uuid}) seem to be a child/descendant of the object it's being cloned to. Please re-parent it so that they are siblings instead.`);return}let g=this.getSubdivData(),b=[],j=wt=>{let yt=wt.length,At=wt.map(kt=>kt[0]).reduce((kt,Pt)=>kt+Pt,0),Ct=wt.map(kt=>kt[1]).reduce((kt,Pt)=>kt+Pt,0),Tt=wt.map(kt=>kt[2]).reduce((kt,Pt)=>kt+Pt,0);return[At/yt,Ct/yt,Tt/yt]},_e=wt=>Math.round(wt*1e6)/1e6;g.forEach(wt=>{let yt=g.filter(At=>_e(wt.pos[0])===_e(At.pos[0])&&_e(wt.pos[1])===_e(At.pos[1])&&_e(wt.pos[2])===_e(At.pos[2]));yt.length>1?b.push({pos:wt.pos,norm:j(yt.map(At=>At.norm))}):b.push(wt)});let $=LR(b);if($.length>0){let wt=Math.round($.length*i.count/100);this._updateCount(wt)}else{let wt=this.objectForSample.geometry.getAttribute("position");if(!wt||isNaN(wt.count)||wt.count===0){console.warn(`Oh no! The object "${this.object.name}" (${this.object.uuid}) cannot be cloned on the surface of "${this.objectForSample.name}" (${this.objectForSample.uuid}) because the latter does not have a valid geometry.`);return}}this.objectForSample.updateMatrixWorld();let rt=new C0(this.objectForSample).build(),st=IR[i.axis],ut=this.children;rt.setRandomGenerator((0,vf.default)(this.object.uuid+i.seed));for(let[wt,yt]of ut.entries()){let At=wt*(a.freqScale/10)+a.movement,Ct=o?Ha.noise(At):c(At,At),Tt=wt+1,kt=d(Tt,xt(Ct,a.rotation[0])),Pt=d(Tt,xt(Ct,a.rotation[1])),It=d(Tt,xt(Ct,a.rotation[2]));i.spreadType==="random"?rt.sample(jm,E_):($.length&&(jm.fromArray($[wt].pos),E_.fromArray($[wt].norm)),this.objectForSample instanceof ao&&jm.applyMatrix4(lX.copy(this.objectForSample.matrixWorld).invert())),jm.applyMatrix4(this.object.hiddenMatrix.clone().invert()),yt.position.copy(jm),Kl.fromArray(st);let Lt=i.align==="normal"?E_:this.object.getWorldDirection(hX),Nt=ru.fromArray(i.position);ru.x+=ru.x+d(Tt,xt(Ct,a.position[0])),ru.y+=ru.y+d(Tt,xt(Ct,a.position[1])),ru.z+=ru.z+d(Tt,xt(Ct,a.position[2]));let Ht=Math.acos(Lt.dot(Kl)),dr=uX.crossVectors(Kl,Lt).normalize(),hs=cX.makeRotationAxis(dr,Ht),_s=Lt.clone().cross(this.object.up).normalize(),ds=_s.clone().cross(Lt).normalize(),Nn=new ce$1().makeBasis(_s,Lt,ds),us=new _(Kl.y,Kl.z,Kl.x).normalize(),hn=us.clone().cross(Kl).normalize(),Ft=new ce$1().makeBasis(us,Kl,hn).invert(),Gr=new ce$1().multiplyMatrices(Nn,Ft);yt.rotation.setFromRotationMatrix(Gr),Nt.applyMatrix4(hs),yt.position.add(Nt),yt.rotation.x=yt.rotation.x+s.x+kt,yt.rotation.y=yt.rotation.y+s.y+Pt,yt.rotation.z=yt.rotation.z+s.z+It,yt.scale.setScalar(1),yt.scale.x=yt.scale.x+i.scale[0]+d(Tt,xt(Ct,a.scale[0]))||In,yt.scale.y=yt.scale.y+i.scale[1]+d(Tt,xt(Ct,a.scale[1]))||In,yt.scale.z=yt.scale.z+i.scale[2]+d(Tt,xt(Ct,a.scale[2]))||In,yt.scale.multiply(this.object.scale),yt.hiddenMatrix=this.object.hiddenMatrix}}getSubdivData(){if(!this.objectForSample)return[];let e=this.parameters.toObject.spreadType;if(e==="random")return[];if(this.objectForSample instanceof ao){let i=this.objectForSample,s=RR[e],a=WR[s],o=jR[s],c=HR[s],d=[],g=a(i.subdivPointerNew);for(let b=0;b<=g-1;b++){let j=o(i.subdivPointerNew,b),_e=c(i.subdivPointerNew,b);UR.fromArray(j).applyMatrix4(i.matrixWorld),GR.fromArray(_e),d.push({pos:UR.toArray(),norm:GR.toArray()})}return d}else return(this.objectForSample.geometry.index?BR(this.objectForSample.geometry):NR(this.objectForSample.geometry)).map((i,s)=>e==="polygon_center"?{pos:i.midpoint,norm:i.norm}:e==="vertex"?[{pos:i.vertices[0],norm:i.norm},{pos:i.vertices[1],norm:i.norm},{pos:i.vertices[2],norm:i.norm}]:e==="edge"?[{pos:i.faceCenters[0],norm:i.norm},{pos:i.faceCenters[1],norm:i.norm},{pos:i.faceCenters[2],norm:i.norm}]:[]).flat()}updateState(e,i){var s;if(this.parameters=Ea(e),this.parameters.type!=="toObject")(this.parent===null||this.parent!==this.object)&&(this.removeFromParent(),(s=this.object.parent)==null||s.add(this),this.matrix=this.object.matrix,this.hiddenMatrix=this.object.hiddenMatrix,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1);else if(this.parent===null||this.parent.uuid!==this.parameters.toObject.object){this.removeFromParent();let a=i.find(this.parameters.toObject.object);a instanceof pr?this.objectForSample=a:this.objectForSample=void 0,this.matrix=new ce$1,this.hiddenMatrix=new ce$1,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1,a&&a.add(this)}this.update()}get pendingMediaLoad(){return this._pendingMediaLoad}},Qo=e=>{var i;return i=class extends e{},i.geometryHelper=new vi(30,30,30),i},yx=new qs,T_=new Br,qR=new ce$1,Ko=(e,i,s,a,o=!1)=>{let c=i,d=e.matrixWorld;if(c.boundingSphere===null&&c.computeBoundingSphere(),T_.copy(c.boundingSphere),T_.applyMatrix4(d),s.ray.intersectsSphere(T_)===!1||(qR.copy(d).invert(),yx.copy(s.ray).applyMatrix4(qR),c.boundingBox!==null&&yx.intersectsBox(c.boundingBox)===!1))return;let g,b,j,_e,$=c.index,rt=c.attributes.position,st=c.drawRange,ut,gt;if(o===!1){let yt=Math.max(0,st.start),At=Math.min($.count,st.start+st.count);for(ut=yt,gt=At;ut<gt;ut+=3)if(b=$.getX(ut),j=$.getX(ut+1),_e=$.getX(ut+2),g=wt(e,s,yx,rt,b,j,_e),g){g.faceIndex=Math.floor(ut/3),a.push(g);return}}else{let yt=c.attributes.position,At=new _,Ct=new _,Tt=new _,kt=new _,Pt=2,It=1/((e.scale.x+e.scale.y+e.scale.z)/3),Lt=It*It,Nt=Math.max(0,st.start),Ht=Math.min(yt.count,st.start+st.count);for(let dr=Nt,hs=Ht-1;dr<hs;dr+=Pt){if(At.fromBufferAttribute(yt,dr),Ct.fromBufferAttribute(yt,dr+1),yx.distanceSqToSegment(At,Ct,kt,Tt)>Lt)continue;kt.applyMatrix4(e.matrixWorld);let _s=s.ray.origin.distanceTo(kt);_s<s.near||_s>s.far||a.push({distance:_s,point:Tt.clone().applyMatrix4(e.matrixWorld),object:e})}}function wt(yt,At,Ct,Tt,kt,Pt,It){let Lt=new _,Nt=new _,Ht=new _,dr=new _,hs=new _;if(Lt.fromBufferAttribute(Tt,kt),Nt.fromBufferAttribute(Tt,Pt),Ht.fromBufferAttribute(Tt,It),Ct.intersectTriangle(Lt,Nt,Ht,!1,dr)===null)return null;hs.copy(dr),hs.applyMatrix4(yt.matrixWorld);let _s=At.ray.origin.distanceTo(hs);return _s<At.near||_s>At.far?null:{faceIndex:1,distance:_s,point:hs.clone(),object:yt}}},vx=new _,Os=new rs,M_=class extends hl{constructor(e){let i=new Pe,s=new ys({color:16777215,vertexColors:!0,toneMapped:!1}),a=[],o=[],c={},d=new We(15711266),g=new We(15711266),b=new We(2857471);j("n1","n2",d),j("n2","n4",d),j("n4","n3",d),j("n3","n1",d),j("f1","f2",d),j("f2","f4",d),j("f4","f3",d),j("f3","f1",d),j("n1","f1",d),j("n2","f2",d),j("n3","f3",d),j("n4","f4",d),j("p","n1",g),j("p","n2",g),j("p","n3",g),j("p","n4",g),j("u1","u2",b),j("u2","u3",b),j("u3","u1",b);function j($,rt,st){_e($,st),_e(rt,st)}function _e($,rt){a.push(0,0,0),o.push(rt.r,rt.g,rt.b),c[$]===void 0&&(c[$]=[]),c[$].push(a.length/3-1)}i.setAttribute("position",new Te(a,3)),i.setAttribute("color",new Te(o,3)),super(i,s),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=c,this.update()}update(){let e=this.geometry,i=this.pointMap;Os.projectionMatrixInverse.elements=[.5112609807824982,-0,-0,-0,-0,.41421356237309503,-0,-0,-0,-0,-0,-.099999,-0,-0,-1.0000000000000002,.100001];let s=1,a=1,o=.8;lo("n1",i,e,Os,-s,-a,o),lo("n2",i,e,Os,s,-a,o),lo("n3",i,e,Os,-s,a,o),lo("n4",i,e,Os,s,a,o);let c=o;lo("f1",i,e,Os,-s,-a,c),lo("f2",i,e,Os,s,-a,c),lo("f3",i,e,Os,-s,a,c),lo("f4",i,e,Os,s,a,c);let d=c,g=.5;lo("u1",i,e,Os,s*.7*g,a*1.1,d),lo("u2",i,e,Os,-s*.7*g,a*1.1,d),lo("u3",i,e,Os,0,a*(1.1+.9*g),d),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function lo(e,i,s,a,o,c,d){vx.set(o,c,d).unproject(a);let g=i[e];if(g!==void 0){let b=s.getAttribute("position");for(let j=0,_e=g.length;j<_e;j++)b.setXYZ(g[j],vx.x,vx.y,vx.z)}}var xx=class extends Qo(M_){constructor(e){super(e),this.object=e,this.object=e,this.name=`CombinedCameraHelper: ${e.uuid}`}updateMatrixWorld(e){super.updateMatrixWorld(e),this.updateTarget()}updateTarget(){let e=this.object.getTarget();this.updateWorldMatrix(!0,!1),this.worldToLocal(e)}raycast(e,i){Ko(this.object,this.geometry,e,i,!0)}},bx;(e=>e.is=i=>"objectHelper"in i)(bx||(bx={}));var Is=(e,i)=>class extends Pd(e){constructor(){super(...arguments),this.objectHelper=new i(this),this.gizmos={}}get geometryHelper(){return i.geometryHelper}raycast(s,a){this.objectHelper.raycast(s,a)}showGizmos(){for(let s in this.gizmos){let a=this.gizmos[s];a instanceof vl&&(a.visible=!0)}}updateEntityBoxSize(s,a){this.objectHelper.visible&&this.geometryHelper instanceof vi?(s.setScalar(0),a.set(this.geometryHelper.parameters.width,this.geometryHelper.parameters.height,this.geometryHelper.parameters.height).multiplyScalar(.5)):super.updateEntityBoxSize(s,a)}hideGizmos(){for(let s in this.gizmos){let a=this.gizmos[s];a instanceof vl&&(a.visible=!1)}}},Sx=790,xf=new _,C_=new _,P_=new Qe,D_=new _,Hm=new _,O_=new _,wr$1=class extends Is(rs,xx){constructor(i="",s={...Vc.defaultData,name:""}){super(),this._cameraType="OrthographicCamera",this.targetOffset=Il.DefaultTargetOffset,this.isUpVectorFlipped=!1,this.angleOffsetFromUp=0,this.wasMovedByUser=!1,this.wasMovedBySwitchCameraAction=!1,this.super_Entity(i,s),this.previousProjectionMatrix=new ce$1,this.matrixAutoUpdate=!0,this.width=window.innerWidth,this.height=window.innerHeight;let a=this.width,o=this.height;this.orthoCamera=new Wu(a*-.5,a*.5,o*.5,o*-.5,-5e4,1e4),this.perspCamera=new ri(45,a/o,50,1e4),this.left=this.orthoCamera.left,this.right=this.orthoCamera.right,this.top=this.orthoCamera.top,this.bottom=this.orthoCamera.bottom,this.far=this.orthoCamera.far,this.view=this.orthoCamera.view,this.aspect=this.perspCamera.aspect,this.focus=this.perspCamera.focus,this.filmGauge=this.perspCamera.filmGauge,this.filmOffset=this.perspCamera.filmOffset,this.objectHelper.update()}get isPerspectiveCamera(){return this.cameraType==="PerspectiveCamera"}get isOrthographicCamera(){return!this.isPerspectiveCamera}get cameraType(){return this._cameraType}set fov(i){this.perspCamera.fov=i}get fov(){return this.perspCamera.fov}setNear(i,s){i==="PerspectiveCamera"?this.perspCamera.near=s:this.orthoCamera.near=s}setZoom(i,s){s>=0&&(i==="PerspectiveCamera"?this.perspCamera.zoom=s:this.orthoCamera.zoom=s)}set cameraType(i){i==="PerspectiveCamera"?this.toPerspective():i==="OrthographicCamera"&&this.toOrthographic()}get near(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.near:this.orthoCamera.near}set near(i){this._cameraType==="PerspectiveCamera"?this.perspCamera.near=i:this.orthoCamera.near=i}get zoom(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom:this.orthoCamera.zoom}set zoom(i){i>=0&&(this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom=i:this.orthoCamera.zoom=i)}lookAt(i,s,a){typeof i=="number"&&(i=new _(i,s,a)),super.lookAt(i),this.getWorldPosition(xf),this.targetOffset=xf.distanceTo(i)}getTarget(i=new _){return this.getWorldDirection(C_),this.getWorldPosition(xf),C_.multiplyScalar(this.targetOffset),i.copy(xf).add(C_),i}getDistanceToTarget(){let i=this.getTarget();return this.getWorldPosition(xf),xf.distanceTo(i)}updateUp(){this.getWorldQuaternion(P_),D_.set(0,0,1).applyQuaternion(P_),Hm.copy(_t.DEFAULT_UP),this.isUpVectorFlipped&&Hm.negate(),Hm.applyQuaternion(P_),O_.copy(_t.DEFAULT_UP).projectOnPlane(D_),this.angleOffsetFromUp=O_.angleTo(Hm),this.angleOffsetFromUp*=O_.cross(Hm).dot(D_)>=0?1:-1}updateTransformState(i,s){let a=super.updateTransformState(i,s);return i.isUpVectorFlipped!==void 0&&(this.isUpVectorFlipped=i.isUpVectorFlipped),this.updateUp(),a}getViewFrontToObject(i){let s=i.getWorldPosition(new _),a=i.getWorldDirection(new _).multiplyScalar(this.targetOffset);return{position:s.clone().add(a),target:s}}getViewToTarget(i){let s=this.getWorldDirection(new _).multiplyScalar(this.targetOffset);return{position:i.clone().sub(s),target:i}}getViewToObject(i){let s=new _;return i.getWorldPosition(s),this.getViewToTarget(s)}setViewplaneSize(i,s,a=!1){if(this.aspect=i/s,a){let o=i>s?this.aspect:1,c=i>s?1:this.aspect;this.left=-Sx*.5*o,this.right=Sx*.5*o,this.top=Sx*.5*(1/c),this.bottom=-Sx*.5*(1/c)}else this.left=-i*.5,this.right=i*.5,this.top=s*.5,this.bottom=-s*.5;this.updateProjectionMatrix()}copyViewPlaneSize(i){this.aspect=i.aspect,this.left=i.left,this.right=i.right,this.top=i.top,this.bottom=i.bottom,this.updateProjectionMatrix()}toOrthographic(){this.orthoCamera.left=this.left,this.orthoCamera.right=this.right,this.orthoCamera.top=this.top,this.orthoCamera.bottom=this.bottom,this.orthoCamera.view=this.view,this.orthoCamera.far=this.far,this.orthoCamera.updateProjectionMatrix(),this.projectionMatrix=this.orthoCamera.projectionMatrix,this.projectionMatrixInverse=this.orthoCamera.projectionMatrixInverse,this._cameraType="OrthographicCamera",this.objectHelper&&this.objectHelper.update()}toPerspective(){this.perspCamera.aspect=this.aspect,this.perspCamera.fov=this.fov,this.perspCamera.view=this.view,this.perspCamera.far=this.far,this.perspCamera.updateProjectionMatrix(),this.projectionMatrix=this.perspCamera.projectionMatrix,this.projectionMatrixInverse=this.perspCamera.projectionMatrixInverse,this._cameraType="PerspectiveCamera",this.objectHelper&&this.objectHelper.update()}setFocalLength(i){this.perspCamera.setFocalLength(i),this.toPerspective()}getFocalLength(){return this.perspCamera.getFocalLength()}getEffectiveFOV(){return this.perspCamera.getEffectiveFOV()}getFilmWidth(){return this.perspCamera.getFilmWidth()}getFilmHeight(){return this.perspCamera.getFilmHeight()}setViewOffset(i,s,a,o,c,d){this._cameraType==="PerspectiveCamera"?this.perspCamera.setViewOffset(i,s,a,o,c,d):this.orthoCamera.setViewOffset(i,s,a,o,c,d)}clearViewOffset(){this._cameraType==="PerspectiveCamera"?(this.perspCamera.clearViewOffset(),this.toPerspective()):(this.orthoCamera.clearViewOffset(),this.toOrthographic())}copyHistory(){this.previousProjectionMatrix&&this.previousProjectionMatrix.copy(this.projectionMatrix)}updateProjectionMatrix(){this._cameraType==="PerspectiveCamera"?this.toPerspective():this._cameraType==="OrthographicCamera"&&this.toOrthographic()}updateMatrixWorld(i){super.updateMatrixWorld(i),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(i,s){super.updateWorldMatrix(i,s),this.matrixWorldInverse.copy(this.matrixWorld).invert()}copy(i,s){return super.copy(i,s),this.parent=i.parent,this.orthoCamera.copy(i.orthoCamera),this.perspCamera.copy(i.perspCamera),this.left=i.left,this.right=i.right,this.top=i.top,this.bottom=i.bottom,this.far=i.far,this.view=i.view===null?null:Object.assign({},i.view),this._cameraType=i._cameraType,this.aspect=i.aspect,this.fov=i.fov,this.focus=i.focus,this.filmGauge=i.filmGauge,this.filmOffset=i.filmOffset,this.targetOffset=i.targetOffset,this.updateProjectionMatrix(),this}toCameraState(i=[]){let s={type:this.cameraType,far:this.far,orthographic:{near:this.orthoCamera.near,zoom:this.orthoCamera.zoom},perspective:{near:this.perspCamera.near,fov:this.perspCamera.fov,zoom:this.perspCamera.zoom},up:this.up.toArray(),targetOffset:this.targetOffset,isUpVectorFlipped:this.isUpVectorFlipped};return Vh(s,i)}updateCameraSubtype(i,s){let a=i==="perspective"?"PerspectiveCamera":"OrthographicCamera";s.zoom!==void 0&&this.setZoom(a,s.zoom),s.near!==void 0&&this.setNear(a,s.near),s.fov!==void 0&&a==="PerspectiveCamera"&&(this.fov=s.fov)}updateState(i,s){this.updateCameraState(i,s)}updateCameraState(i,s){this.updateState_Entity(i,s),i.far!==void 0&&(this.far=i.far),i.orthographic!==void 0&&this.updateCameraSubtype("orthographic",i.orthographic),i.perspective!==void 0&&this.updateCameraSubtype("perspective",i.perspective),i.type!==void 0&&(this.cameraType=i.type),i.up!==void 0&&this.up.fromArray(i.up),i.targetOffset!==void 0&&(this.targetOffset=i.targetOffset),i.isUpVectorFlipped!==void 0&&(this.isUpVectorFlipped=i.isUpVectorFlipped),this.updateProjectionMatrix()}updateByPatchedOp(i,s,a){super.updateByPatchedOp(i,s,a),i.path.length===1&&i.type===0&&this.updateCameraSubtype(i.path[0],i.props)}toState(i){return{...super.toState(i),...this.toCameraState(i),type:this.cameraType}}},bf=new ce$1,fX=new ce$1,wx=new ce$1,YR=new _,XR=new _;function I_(e){let i=!1;return e.scene.objects.traverse((s,a)=>{var o;((o=a.geometry)==null?void 0:o.type)==="BooleanGeometry"&&(i=!0)}),i}var qn=class extends Ps{constructor(e,i,s){super(e,i),this.data=i,this.meshSetAddresses=[],this.needsTransformForDownstream=!1,this.geometry=new Pe,this.onAfterRender=(a,o,c,d,g,b)=>{super.onAfterRender(a,o,c,d,g,b),this.recomputeBoolean()},this.geometry.userData.parameters={width:0,height:0,depth:0}}get booleanOp(){return this.data.geometry.operation}get phongAngle(){return this.data.geometry.phongAngle??45}get isLOD(){return this.recomputeBoolean(),!1}updateByPatchedOp(e,i,s){super.updateByPatchedOp(e,i,s),e.path.length===1&&e.path[0]==="geometry"&&e.type===0&&e.props.operation!==void 0&&(this.freeBooleanPointer(),this.resetBBoxNeedsUpdate())}freeBooleanPointer(){super.freeBooleanPointer(),this.geometry.dispose()}recomputeBoolean(e,i=!0){var a;if(this.booleanMeshSetAddress!==-1&&!e)return;for(let o=0;o<this.children.length;o++){let c=this.children[o];c instanceof qn&&c.dataPatched.visible===!0&&c.recomputeBoolean(e===!0,i)}this.meshSetAddresses=[];for(let o=0;o<this.children.length;o++){let c=this.children[o];if(c instanceof pr&&c.dataPatched.visible===!0&&((a=c.geometry.attributes.position)==null?void 0:a.count)>0&&c.geometry.drawRange.count>0&&c.booleanMeshSetAddress!==0){bf.multiplyMatrices(c.hiddenMatrix,c.matrix);try{if(c.booleanMeshSetAddress===-1){if((c.geometry.index??c.geometry.getAttribute("position")).count/3<15e5&&(c.booleanMeshSetAddress=Ms.getMeshSet(c.geometry,e===!0,i)),c.booleanMeshSetAddress===-1)return;Ms.transformMeshSet(c.booleanMeshSetAddress,bf),c.booleanMatrixInvOld.copy(bf).invert(),c.booleanWasTransformed=!1}else c instanceof qn&&c.needsTransformForDownstream===!0?(Ms.transformMeshSet(c.booleanMeshSetAddress,bf),c.needsTransformForDownstream=!1):c.booleanWasTransformed===!0&&(Ms.transformMeshSet(c.booleanMeshSetAddress,fX.multiplyMatrices(bf,c.booleanMatrixInvOld)),c.booleanMatrixInvOld.copy(bf).invert(),c.booleanWasTransformed=!1)}catch(d){console.error(d),c.booleanMeshSetAddress=0,c.geometry.userData.booleanOperationDidFail=!0;continue}Ms.hasOpenEdges(c.booleanMeshSetAddress)===!1||o===this.children.length-1&&this.booleanOp===2?(this.meshSetAddresses.push(c.booleanMeshSetAddress),c.geometry.userData.booleanOperationDidFail=!1):c.geometry.userData.booleanOperationDidFail="openEdges"}}if(this.meshSetAddresses.length===0){this.geometry.setAttribute("position",new Te([],0)),this.geometry.setDrawRange(0,0);return}if(e===!0)return Ms.calcBooleanTopological(this.meshSetAddresses,this.booleanOp);let s=this.geometry;s.dispose(),this.geometry=new Pe,this.geometry.userData=s.userData,this.geometry.boundingSphere=s.boundingSphere;try{this.booleanMeshSetAddress=Ms.calcBoolean(this.meshSetAddresses,this.booleanOp,this.geometry,this.phongAngle)}catch(o){this.booleanMeshSetAddress=0,this.geometry.userData.booleanOperationDidFail=!0,console.error(o)}this.booleanMatrixInvOld.copy(this.matrix).invert(),this.needsTransformForDownstream=!0,pf(this),mf(this)}dispose(){super.dispose(),this.geometry.dispose()}get recursiveBBox(){var i;let e=super.recursiveBBox;return((i=this.geometry.boundingSphere)==null?void 0:i.radius)===-1&&(e.getCenter(this.geometry.boundingSphere.center),wx.copy(this.matrixWorld).invert(),this.geometry.boundingSphere.center.applyMatrix4(wx),YR.copy(e.max).applyMatrix4(wx),XR.copy(e.min).applyMatrix4(wx),this.geometry.boundingSphere.radius=YR.distanceTo(XR)/2),e}},Ax;(e=>{function i(s){return vt.is(s)&&s instanceof gl}e.is=i})(Ax||(Ax={}));var Sf=(e,i)=>class extends Is(e,i){updateState_Light(s,a){this.updateState_Entity(s,a),s.color!==void 0&&(this.color=a.shared.color(s.color)),s.intensity!==void 0&&(this.intensity=s.intensity),s.depth!==void 0&&(this.shadow.camera.far=s.depth,this.shadow.needsUpdate=!0),s.shadows!==void 0&&(this.castShadow=s.shadows)}},mn=e=>e instanceof pr,Rn=e=>e!==null&&e instanceof qn,QR=e=>e instanceof wr$1,KR=e=>Ax.is(e),Wm=e=>bx.is(e),Rs=class extends Qo(Uy){constructor(e,i=15){super(i),this.object=e,this.object.updateMatrixWorld(),this.name=`EmptyObjectHelper: ${e.uuid}`,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.object.isBone&&(this.visible=!1)}raycast(e,i){Ko(this.object,Rs.geometryHelper,e,i)}update(){}},Ls=class extends Is(ps,Rs){constructor(e,i){super(),this.super_Entity(e,i),this.objectHelper.update()}updateState(e,i){this.updateState_Entity(e,i),"buffer"in e&&Object.keys(e).length===1&&i.scene.reloadSplats()}},iu=class extends Is(ps,Rs){constructor(e,i,s){super(),this.super_Entity(e,i),this.context=s,this.objectHelper.update()}updateState(e,i){this.updateState_Entity(e,i)}},i3={RED:0,GREEN:1,BLUE:2,ALPHA:3},qm="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",pX=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform lowp sampler2D cocBuffer;uniform vec2 texelSize;uniform float scale;
#if PASS == 1
uniform vec4 kernel64[32];
#else
uniform vec4 kernel16[8];
#endif
varying vec2 vUv;void main(){
#ifdef FOREGROUND
vec2 CoCNearFar=texture2D(cocBuffer,vUv).rg;float CoC=CoCNearFar.r*scale;
#else
float CoC=texture2D(cocBuffer,vUv).g*scale;
#endif
if(CoC==0.0){gl_FragColor=texture2D(inputBuffer,vUv);}else{
#ifdef FOREGROUND
vec2 step=texelSize*max(CoC,CoCNearFar.g*scale);
#else
vec2 step=texelSize*CoC;
#endif
#if PASS == 1
vec4 acc=vec4(0.0);for(int i=0;i<32;++i){vec4 kernel=kernel64[i];vec2 uv=step*kernel.xy+vUv;acc+=texture2D(inputBuffer,uv);uv=step*kernel.zw+vUv;acc+=texture2D(inputBuffer,uv);}gl_FragColor=acc/64.0;
#else
vec4 maxValue=texture2D(inputBuffer,vUv);for(int i=0;i<8;++i){vec4 kernel=kernel16[i];vec2 uv=step*kernel.xy+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);uv=step*kernel.zw+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);}gl_FragColor=maxValue;
#endif
}}`,_x=class extends lt{constructor(e=!1,i=!1){super({name:"BokehMaterial",defines:{PASS:e?"2":"1"},uniforms:{kernel64:new he(null),kernel16:new he(null),inputBuffer:new he(null),cocBuffer:new he(null),texelSize:new he(new z$1),scale:new he(1)},blending:er,depthWrite:!1,depthTest:!1,fragmentShader:pX,vertexShader:qm}),this.toneMapped=!1,i&&(this.defines.FOREGROUND="1"),this.generateKernel()}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}set cocBuffer(e){this.uniforms.cocBuffer.value=e}setCoCBuffer(e){this.uniforms.cocBuffer.value=e}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(e){return this.uniforms.scale.value=e}setScale(e){this.uniforms.scale.value=e}generateKernel(){let e=2.39996323,i=new Float32Array(128),s=new Float32Array(32),a=0,o=0;for(let g=0;g<80;++g){let b=g*e,j=Math.sqrt(g)/Math.sqrt(80),_e=j*Math.cos(b),$=j*Math.sin(b);g%5===0?(s[o++]=_e,s[o++]=$):(i[a++]=_e,i[a++]=$)}let c=[],d=[];for(let g=0;g<128;)c.push(new Ke(i[g++],i[g++],i[g++],i[g++]));for(let g=0;g<32;)d.push(new Ke(s[g++],s[g++],s[g++],s[g++]));this.uniforms.kernel64.value=c,this.uniforms.kernel16.value=d}setTexelSize(e,i){this.uniforms.texelSize.value.set(e,i)}setSize(e,i){this.uniforms.texelSize.value.set(1/e,1/i)}};function ZR(e,i,s){return e*(i-s)-i}function F_(e,i,s){return Math.min(Math.max((e+i)/(i-s),0),1)}var mX=`#include <common>
#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform float focusDistance;uniform float focusRange;uniform float cameraNear;uniform float cameraFar;varying vec2 vUv;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}void main(){float depth=readDepth(vUv);
#ifdef PERSPECTIVE_CAMERA
float viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);
#else
float linearDepth=depth;
#endif
float signedDistance=linearDepth-focusDistance;float magnitude=smoothstep(0.0,focusRange,abs(signedDistance));gl_FragColor.rg=magnitude*vec2(step(signedDistance,0.0),step(0.0,signedDistance));}`,gX=class extends lt{constructor(e){super({name:"CircleOfConfusionMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new he(null),focusDistance:new he(0),focusRange:new he(0),cameraNear:new he(.3),cameraFar:new he(1e3)},blending:er,depthWrite:!1,depthTest:!1,fragmentShader:mX,vertexShader:qm}),this.toneMapped=!1,this.uniforms.focalLength=this.uniforms.focusRange,this.adoptCameraSettings(e)}get near(){return this.uniforms.cameraNear.value}get far(){return this.uniforms.cameraFar.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,i=ji){this.depthBuffer=e,this.depthPacking=i}get focusDistance(){return this.uniforms.focusDistance.value}set focusDistance(e){this.uniforms.focusDistance.value=e}get worldFocusDistance(){return-ZR(this.focusDistance,this.near,this.far)}set worldFocusDistance(e){this.focusDistance=F_(-e,this.near,this.far)}getFocusDistance(e){this.uniforms.focusDistance.value=e}setFocusDistance(e){this.uniforms.focusDistance.value=e}get focalLength(){return this.focusRange}set focalLength(e){this.focusRange=e}get focusRange(){return this.uniforms.focusRange.value}set focusRange(e){this.uniforms.focusRange.value=e}get worldFocusRange(){return-ZR(this.focusRange,this.near,this.far)}set worldFocusRange(e){this.focusRange=F_(-e,this.near,this.far)}getFocalLength(e){return this.focusRange}setFocalLength(e){this.focusRange=e}adoptCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof ri?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},yX=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <encodings_fragment>
#include <dithering_fragment>
}`,vX="uniform vec2 texelSize;uniform vec2 halfTexelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize*vec2(kernel)+halfTexelSize)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",JR=class extends lt{constructor(e=new z$1){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new he(null),texelSize:new he(new z$1),halfTexelSize:new he(new z$1),kernel:new he(0),scale:new he(1)},blending:er,depthWrite:!1,depthTest:!1,fragmentShader:yX,vertexShader:vX}),this.toneMapped=!1,this.setTexelSize(e.x,e.y)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.inputBuffer=e}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(){return this.uniforms.scale.value}setScale(e){this.uniforms.scale.value=e}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(e){this.uniforms.kernel.value=e}setKernel(e){this.kernel=e}setTexelSize(e,i){this.uniforms.texelSize.value.set(e,i),this.uniforms.halfTexelSize.value.set(e,i).multiplyScalar(.5)}setSize(e,i){let s=this.uniforms;s.texelSize.value.set(1/e,1/i),s.halfTexelSize.value.copy(s.texelSize.value).multiplyScalar(.5)}},xX=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <encodings_fragment>
}`,bX=class extends lt{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new he(null),opacity:new he(1)},blending:er,depthWrite:!1,depthTest:!1,fragmentShader:xX,vertexShader:qm}),this.toneMapped=!1}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}getOpacity(e){return this.uniforms.opacity.value}setOpacity(e){this.uniforms.opacity.value=e}},SX=`varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if EDGE_DETECTION_MODE != 0
varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;
#endif
#if EDGE_DETECTION_MODE == 1
#include <common>
#endif
#if EDGE_DETECTION_MODE == 0 || PREDICATION_MODE == 1
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}vec3 gatherNeighbors(){float p=readDepth(vUv);float pLeft=readDepth(vUv0);float pTop=readDepth(vUv1);return vec3(p,pLeft,pTop);}
#elif PREDICATION_MODE == 2
uniform sampler2D predicationBuffer;vec3 gatherNeighbors(){float p=texture2D(predicationBuffer,vUv).r;float pLeft=texture2D(predicationBuffer,vUv0).r;float pTop=texture2D(predicationBuffer,vUv1).r;return vec3(p,pLeft,pTop);}
#endif
#if PREDICATION_MODE != 0
vec2 calculatePredicatedThreshold(){vec3 neighbours=gatherNeighbors();vec2 delta=abs(neighbours.xx-neighbours.yz);vec2 edges=step(PREDICATION_THRESHOLD,delta);return PREDICATION_SCALE*EDGE_THRESHOLD*(1.0-PREDICATION_STRENGTH*edges);}
#endif
#if EDGE_DETECTION_MODE != 0
uniform sampler2D inputBuffer;
#endif
void main(){
#if EDGE_DETECTION_MODE == 0
const vec2 threshold=vec2(DEPTH_THRESHOLD);
#elif PREDICATION_MODE != 0
vec2 threshold=calculatePredicatedThreshold();
#else
const vec2 threshold=vec2(EDGE_THRESHOLD);
#endif
#if EDGE_DETECTION_MODE == 0
vec3 neighbors=gatherNeighbors();vec2 delta=abs(neighbors.xx-vec2(neighbors.y,neighbors.z));vec2 edges=step(threshold,delta);if(dot(edges,vec2(1.0))==0.0){discard;}gl_FragColor=vec4(edges,0.0,1.0);
#elif EDGE_DETECTION_MODE == 1
float l=luminance(texture2D(inputBuffer,vUv).rgb);float lLeft=luminance(texture2D(inputBuffer,vUv0).rgb);float lTop=luminance(texture2D(inputBuffer,vUv1).rgb);vec4 delta;delta.xy=abs(l-vec2(lLeft,lTop));vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}float lRight=luminance(texture2D(inputBuffer,vUv2).rgb);float lBottom=luminance(texture2D(inputBuffer,vUv3).rgb);delta.zw=abs(l-vec2(lRight,lBottom));vec2 maxDelta=max(delta.xy,delta.zw);float lLeftLeft=luminance(texture2D(inputBuffer,vUv4).rgb);float lTopTop=luminance(texture2D(inputBuffer,vUv5).rgb);delta.zw=abs(vec2(lLeft,lTop)-vec2(lLeftLeft,lTopTop));maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges.xy*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);
#elif EDGE_DETECTION_MODE == 2
vec4 delta;vec3 c=texture2D(inputBuffer,vUv).rgb;vec3 cLeft=texture2D(inputBuffer,vUv0).rgb;vec3 t=abs(c-cLeft);delta.x=max(max(t.r,t.g),t.b);vec3 cTop=texture2D(inputBuffer,vUv1).rgb;t=abs(c-cTop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}vec3 cRight=texture2D(inputBuffer,vUv2).rgb;t=abs(c-cRight);delta.z=max(max(t.r,t.g),t.b);vec3 cBottom=texture2D(inputBuffer,vUv3).rgb;t=abs(c-cBottom);delta.w=max(max(t.r,t.g),t.b);vec2 maxDelta=max(delta.xy,delta.zw);vec3 cLeftLeft=texture2D(inputBuffer,vUv4).rgb;t=abs(c-cLeftLeft);delta.z=max(max(t.r,t.g),t.b);vec3 cTopTop=texture2D(inputBuffer,vUv5).rgb;t=abs(c-cTopTop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);
#endif
}`,wX=`uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;
#if EDGE_DETECTION_MODE != 0
varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;
#endif
void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,0.0);vUv1=vUv+texelSize*vec2(0.0,-1.0);
#if EDGE_DETECTION_MODE != 0
vUv2=vUv+texelSize*vec2(1.0,0.0);vUv3=vUv+texelSize*vec2(0.0,1.0);vUv4=vUv+texelSize*vec2(-2.0,0.0);vUv5=vUv+texelSize*vec2(0.0,-2.0);
#endif
gl_Position=vec4(position.xy,1.0,1.0);}`,wf={DEPTH:0,LUMA:1,COLOR:2},AX={DISABLED:0,DEPTH:1,CUSTOM:2},_X=class extends lt{constructor(e=new z$1,i=wf.COLOR){super({name:"EdgeDetectionMaterial",defines:{THREE_REVISION:ba.replace(/\D+/g,""),LOCAL_CONTRAST_ADAPTATION_FACTOR:"2.0",EDGE_THRESHOLD:"0.1",DEPTH_THRESHOLD:"0.01",PREDICATION_MODE:"0",PREDICATION_THRESHOLD:"0.01",PREDICATION_SCALE:"2.0",PREDICATION_STRENGTH:"1.0",DEPTH_PACKING:"0"},uniforms:{inputBuffer:new he(null),depthBuffer:new he(null),predicationBuffer:new he(null),texelSize:new he(e)},blending:er,depthWrite:!1,depthTest:!1,fragmentShader:SX,vertexShader:wX}),this.toneMapped=!1,this.edgeDetectionMode=i}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,i=ji){this.depthBuffer=e,this.depthPacking=i}get edgeDetectionMode(){return Number(this.defines.EDGE_DETECTION_MODE)}set edgeDetectionMode(e){this.defines.EDGE_DETECTION_MODE=e.toFixed(0),this.needsUpdate=!0}getEdgeDetectionMode(){return this.edgeDetectionMode}setEdgeDetectionMode(e){this.edgeDetectionMode=e}get localContrastAdaptationFactor(){return Number(this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR)}set localContrastAdaptationFactor(e){this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR=e.toFixed("6"),this.needsUpdate=!0}getLocalContrastAdaptationFactor(){return this.localContrastAdaptationFactor}setLocalContrastAdaptationFactor(e){this.localContrastAdaptationFactor=e}get edgeDetectionThreshold(){return Number(this.defines.EDGE_THRESHOLD)}set edgeDetectionThreshold(e){this.defines.EDGE_THRESHOLD=e.toFixed("6"),this.defines.DEPTH_THRESHOLD=(e*.1).toFixed("6"),this.needsUpdate=!0}getEdgeDetectionThreshold(){return this.edgeDetectionThreshold}setEdgeDetectionThreshold(e){this.edgeDetectionThreshold=e}get predicationMode(){return Number(this.defines.PREDICATION_MODE)}set predicationMode(e){this.defines.PREDICATION_MODE=e.toFixed(0),this.needsUpdate=!0}getPredicationMode(){return this.predicationMode}setPredicationMode(e){this.predicationMode=e}set predicationBuffer(e){this.uniforms.predicationBuffer.value=e}setPredicationBuffer(e){this.uniforms.predicationBuffer.value=e}get predicationThreshold(){return Number(this.defines.PREDICATION_THRESHOLD)}set predicationThreshold(e){this.defines.PREDICATION_THRESHOLD=e.toFixed("6"),this.needsUpdate=!0}getPredicationThreshold(){return this.predicationThreshold}setPredicationThreshold(e){this.predicationThreshold=e}get predicationScale(){return Number(this.defines.PREDICATION_SCALE)}set predicationScale(e){this.defines.PREDICATION_SCALE=e.toFixed("6"),this.needsUpdate=!0}getPredicationScale(){return this.predicationScale}setPredicationScale(e){this.predicationScale=e}get predicationStrength(){return Number(this.defines.PREDICATION_STRENGTH)}set predicationStrength(e){this.defines.PREDICATION_STRENGTH=e.toFixed("6"),this.needsUpdate=!0}getPredicationStrength(){return this.predicationStrength}setPredicationStrength(e){this.predicationStrength=e}setSize(e,i){this.uniforms.texelSize.value.set(1/e,1/i)}},EX=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if THREE_REVISION >= 137
vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}FRAGMENT_HEADvoid main(){FRAGMENT_MAIN_UVvec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGEgl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <encodings_fragment>
#endif
#include <dithering_fragment>
}`,TX="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEADvoid main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORTgl_Position=vec4(position.xy,1.0,1.0);}",co={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},k_=class extends lt{constructor(e,i,s,a,o=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:ba.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new he(null),depthBuffer:new he(null),resolution:new he(new z$1),texelSize:new he(new z$1),cameraNear:new he(.3),cameraFar:new he(1e3),aspect:new he(1),time:new he(0)},blending:er,depthWrite:!1,depthTest:!1,dithering:o}),this.toneMapped=!1,e&&this.setShaderParts(e),i&&this.setDefines(i),s&&this.setUniforms(s),this.adoptCameraSettings(a)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,i=ji){this.depthBuffer=e,this.depthPacking=i}setShaderParts(e){return this.fragmentShader=EX.replace(co.FRAGMENT_HEAD,e.get(co.FRAGMENT_HEAD)).replace(co.FRAGMENT_MAIN_UV,e.get(co.FRAGMENT_MAIN_UV)).replace(co.FRAGMENT_MAIN_IMAGE,e.get(co.FRAGMENT_MAIN_IMAGE)),this.vertexShader=TX.replace(co.VERTEX_HEAD,e.get(co.VERTEX_HEAD)).replace(co.VERTEX_MAIN_SUPPORT,e.get(co.VERTEX_MAIN_SUPPORT)),this.needsUpdate=!0,this}setDefines(e){for(let i of e.entries())this.defines[i[0]]=i[1];return this.needsUpdate=!0,this}setUniforms(e){for(let i of e.entries())this.uniforms[i[0]]=i[1];return this}setExtensions(e){this.extensions={};for(let i of e)this.extensions[i]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(e){this.encodeOutput!==e&&(e?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(e){return this.encodeOutput}setOutputEncodingEnabled(e){this.encodeOutput=e}get time(){return this.uniforms.time.value}set time(e){this.uniforms.time.value=e}setDeltaTime(e){this.uniforms.time.value+=e}adoptCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof ri?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(e,i){let s=this.uniforms;s.resolution.value.set(e,i),s.texelSize.value.set(1/e,1/i),s.aspect.value=e/i}static get Section(){return co}},MX=`#include <common>
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l);
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*l,l);
#else
gl_FragColor=vec4(l);
#endif
}`,CX=class extends lt{constructor(e=!1,i=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:ba.replace(/\D+/g,"")},uniforms:{inputBuffer:new he(null),threshold:new he(0),smoothing:new he(1),range:new he(null)},blending:er,depthWrite:!1,depthTest:!1,fragmentShader:MX,vertexShader:qm}),this.toneMapped=!1,this.colorOutput=e,this.luminanceRange=i}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get threshold(){return this.uniforms.threshold.value}set threshold(e){this.smoothing>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=e}getThreshold(){return this.threshold}setThreshold(e){this.threshold=e}get smoothing(){return this.uniforms.smoothing.value}set smoothing(e){this.threshold>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=e}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(e){this.smoothing=e}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(e){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(e){e?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(e){return this.colorOutput}setColorOutputEnabled(e){this.colorOutput=e}get useRange(){return this.luminanceRange!==null}set useRange(e){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(e){e!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=e,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(e){this.luminanceRange=e}},PX=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef MASK_PRECISION_HIGH
uniform mediump sampler2D maskTexture;
#else
uniform lowp sampler2D maskTexture;
#endif
#if MASK_FUNCTION != 0
uniform float strength;
#endif
varying vec2 vUv;void main(){
#if COLOR_CHANNEL == 0
float mask=texture2D(maskTexture,vUv).r;
#elif COLOR_CHANNEL == 1
float mask=texture2D(maskTexture,vUv).g;
#elif COLOR_CHANNEL == 2
float mask=texture2D(maskTexture,vUv).b;
#else
float mask=texture2D(maskTexture,vUv).a;
#endif
#if MASK_FUNCTION == 0
#ifdef INVERTED
mask=step(mask,0.0);
#else
mask=1.0-step(mask,0.0);
#endif
#else
mask=clamp(mask*strength,0.0,1.0);
#ifdef INVERTED
mask=1.0-mask;
#endif
#endif
#if MASK_FUNCTION == 2
gl_FragColor=vec4(mask*texture2D(inputBuffer,vUv).rgb,mask);
#else
gl_FragColor=mask*texture2D(inputBuffer,vUv);
#endif
}`,n3={DISCARD:0,MULTIPLY:1,MULTIPLY_RGB_SET_ALPHA:2},DX=class extends lt{constructor(e=null){super({name:"MaskMaterial",uniforms:{maskTexture:new he(e),inputBuffer:new he(null),strength:new he(1)},blending:er,depthWrite:!1,depthTest:!1,fragmentShader:PX,vertexShader:qm}),this.toneMapped=!1,this.setColorChannel(i3.RED),this.setMaskFunction(n3.DISCARD)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}set maskTexture(e){this.uniforms.maskTexture.value=e,delete this.defines.MASK_PRECISION_HIGH,e.type!==Ir$1&&(this.defines.MASK_PRECISION_HIGH="1"),this.needsUpdate=!0}setMaskTexture(e){this.maskTexture=e}set colorChannel(e){this.defines.COLOR_CHANNEL=e.toFixed(0),this.needsUpdate=!0}setColorChannel(e){this.colorChannel=e}set maskFunction(e){this.defines.MASK_FUNCTION=e.toFixed(0),this.needsUpdate=!0}setMaskFunction(e){this.maskFunction=e}get inverted(){return this.defines.INVERTED!==void 0}set inverted(e){this.inverted&&!e?delete this.defines.INVERTED:e&&(this.defines.INVERTED="1"),this.needsUpdate=!0}isInverted(){return this.inverted}setInverted(e){this.inverted=e}get strength(){return this.uniforms.strength.value}set strength(e){this.uniforms.strength.value=e}getStrength(){return this.strength}setStrength(e){this.strength=e}},OX=`#define sampleLevelZeroOffset(t, coord, offset) texture2D(t, coord + offset * texelSize)
#if __VERSION__ < 300
#define round(v) floor(v + 0.5)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform lowp sampler2D areaTexture;uniform lowp sampler2D searchTexture;uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}vec2 decodeDiagBilinearAccess(in vec2 e){e.r=e.r*abs(5.0*e.r-5.0*0.75);return round(e);}vec4 decodeDiagBilinearAccess(in vec4 e){e.rb=e.rb*abs(5.0*e.rb-5.0*0.75);return round(e);}vec2 searchDiag1(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 searchDiag2(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);coord.x+=0.25*texelSize.x;vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;e=decodeDiagBilinearAccess(e);coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 areaDiag(const in vec2 dist,const in vec2 e,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE_DIAG,AREATEX_MAX_DISTANCE_DIAG)*e+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.x+=0.5;texCoord.y+=AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTexture,texCoord).rg;}vec2 calculateDiagWeights(const in vec2 texCoord,const in vec2 e,const in vec4 subsampleIndices){vec2 weights=vec2(0.0);vec4 d;vec2 end;if(e.r>0.0){d.xz=searchDiag1(texCoord,vec2(-1.0,1.0),end);d.x+=float(end.y>0.9);}else{d.xz=vec2(0.0);}d.yw=searchDiag1(texCoord,vec2(1.0,-1.0),end);if(d.x+d.y>2.0){vec4 coords=vec4(-d.x+0.25,d.x,d.y,-d.y-0.25)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.xy=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).rg;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).rg;c.yxwz=decodeDiagBilinearAccess(c.xyzw);vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.z);}d.xz=searchDiag2(texCoord,vec2(-1.0,-1.0),end);if(sampleLevelZeroOffset(inputBuffer,texCoord,vec2(1,0)).r>0.0){d.yw=searchDiag2(texCoord,vec2(1.0),end);d.y+=float(end.y>0.9);}else{d.yw=vec2(0.0);}if(d.x+d.y>2.0){vec4 coords=vec4(-d.x,-d.x,d.y,d.y)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.x=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).g;c.y=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(0,-1)).r;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).gr;vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.w).gr;}return weights;}float searchLength(const in vec2 e,const in float offset){vec2 scale=SEARCHTEX_SIZE*vec2(0.5,-1.0);vec2 bias=SEARCHTEX_SIZE*vec2(offset,1.0);scale+=vec2(-1.0,1.0);bias+=vec2(0.5,-0.5);scale*=1.0/SEARCHTEX_PACKED_SIZE;bias*=1.0/SEARCHTEX_PACKED_SIZE;return texture2D(searchTexture,scale*e+bias).r;}float searchXLeft(in vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x>end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(-2.0,0.0)*texelSize+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.0)+3.25;return texelSize.x*offset+texCoord.x;}float searchXRight(vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x<end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(2.0,0.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.5)+3.25;return-texelSize.x*offset+texCoord.x;}float searchYUp(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.y>end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=-vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.0)+3.25;return texelSize.y*offset+texCoord.y;}float searchYDown(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;i++){if(!(texCoord.y<end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.5)+3.25;return-texelSize.y*offset+texCoord.y;}vec2 area(const in vec2 dist,const in float e1,const in float e2,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.y=AREATEX_SUBTEX_SIZE*offset+texCoord.y;return texture2D(areaTexture,texCoord).rg;}void detectHorizontalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){
#if !defined(DISABLE_CORNER_DETECTION)
vec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,1)).r;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).r;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,-2)).r;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,-2)).r;weights*=clamp(factor,0.0,1.0);
#endif
}void detectVerticalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){
#if !defined(DISABLE_CORNER_DETECTION)
vec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(1,0)).g;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).g;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(-2,0)).g;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(-2,1)).g;weights*=clamp(factor,0.0,1.0);
#endif
}void main(){vec4 weights=vec4(0.0);vec4 subsampleIndices=vec4(0.0);vec2 e=texture2D(inputBuffer,vUv).rg;if(e.g>0.0){
#if !defined(DISABLE_DIAG_DETECTION)
weights.rg=calculateDiagWeights(vUv,e,subsampleIndices);if(weights.r==-weights.g){
#endif
vec2 d;vec3 coords;coords.x=searchXLeft(vOffset[0].xy,vOffset[2].x);coords.y=vOffset[1].y;d.x=coords.x;float e1=texture2D(inputBuffer,coords.xy).r;coords.z=searchXRight(vOffset[0].zw,vOffset[2].y);d.y=coords.z;d=round(resolution.xx*d+-vPixCoord.xx);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.zy,vec2(1,0)).r;weights.rg=area(sqrtD,e1,e2,subsampleIndices.y);coords.y=vUv.y;detectHorizontalCornerPattern(weights.rg,coords.xyzy,d);
#if !defined(DISABLE_DIAG_DETECTION)
}else{e.r=0.0;}
#endif
}if(e.r>0.0){vec2 d;vec3 coords;coords.y=searchYUp(vOffset[1].xy,vOffset[2].z);coords.x=vOffset[0].x;d.x=coords.y;float e1=texture2D(inputBuffer,coords.xy).g;coords.z=searchYDown(vOffset[1].zw,vOffset[2].w);d.y=coords.z;d=round(resolution.yy*d-vPixCoord.yy);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.xz,vec2(0,1)).g;weights.ba=area(sqrtD,e1,e2,subsampleIndices.x);coords.x=vUv.x;detectVerticalCornerPattern(weights.ba,coords.xyxz,d);}gl_FragColor=weights;}`,IX="uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void main(){vUv=position.xy*0.5+0.5;vPixCoord=vUv*resolution;vOffset[0]=vUv.xyxy+texelSize.xyxy*vec4(-0.25,-0.125,1.25,-0.125);vOffset[1]=vUv.xyxy+texelSize.xyxy*vec4(-0.125,-0.25,-0.125,1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*texelSize.xxyy*MAX_SEARCH_STEPS_FLOAT;gl_Position=vec4(position.xy,1.0,1.0);}",RX=class extends lt{constructor(e=new z$1,i=new z$1){super({name:"SMAAWeightsMaterial",defines:{MAX_SEARCH_STEPS_INT:"16",MAX_SEARCH_STEPS_FLOAT:"16.0",MAX_SEARCH_STEPS_DIAG_INT:"8",MAX_SEARCH_STEPS_DIAG_FLOAT:"8.0",CORNER_ROUNDING:"25",CORNER_ROUNDING_NORM:"0.25",AREATEX_MAX_DISTANCE:"16.0",AREATEX_MAX_DISTANCE_DIAG:"20.0",AREATEX_PIXEL_SIZE:"(1.0 / vec2(160.0, 560.0))",AREATEX_SUBTEX_SIZE:"(1.0 / 7.0)",SEARCHTEX_SIZE:"vec2(66.0, 33.0)",SEARCHTEX_PACKED_SIZE:"vec2(64.0, 16.0)"},uniforms:{inputBuffer:new he(null),searchTexture:new he(null),areaTexture:new he(null),resolution:new he(i),texelSize:new he(e)},blending:er,depthWrite:!1,depthTest:!1,fragmentShader:OX,vertexShader:IX}),this.toneMapped=!1}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get searchTexture(){return this.uniforms.searchTexture.value}set searchTexture(e){this.uniforms.searchTexture.value=e}get areaTexture(){return this.uniforms.areaTexture.value}set areaTexture(e){this.uniforms.areaTexture.value=e}setLookupTextures(e,i){this.searchTexture=e,this.areaTexture=i}get orthogonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_INT)}set orthogonalSearchSteps(e){let i=Math.min(Math.max(e,0),112);this.defines.MAX_SEARCH_STEPS_INT=i.toFixed("0"),this.defines.MAX_SEARCH_STEPS_FLOAT=i.toFixed("1"),this.needsUpdate=!0}setOrthogonalSearchSteps(e){this.orthogonalSearchSteps=e}get diagonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_DIAG_INT)}set diagonalSearchSteps(e){let i=Math.min(Math.max(e,0),20);this.defines.MAX_SEARCH_STEPS_DIAG_INT=i.toFixed("0"),this.defines.MAX_SEARCH_STEPS_DIAG_FLOAT=i.toFixed("1"),this.needsUpdate=!0}setDiagonalSearchSteps(e){this.diagonalSearchSteps=e}get diagonalDetection(){return this.defines.DISABLE_DIAG_DETECTION===void 0}set diagonalDetection(e){e?delete this.defines.DISABLE_DIAG_DETECTION:this.defines.DISABLE_DIAG_DETECTION="1",this.needsUpdate=!0}isDiagonalDetectionEnabled(){return this.diagonalDetection}setDiagonalDetectionEnabled(e){this.diagonalDetection=e}get cornerRounding(){return Number(this.defines.CORNER_ROUNDING)}set cornerRounding(e){let i=Math.min(Math.max(e,0),100);this.defines.CORNER_ROUNDING=i.toFixed("4"),this.defines.CORNER_ROUNDING_NORM=(i/100).toFixed("4"),this.needsUpdate=!0}setCornerRounding(e){this.cornerRounding=e}get cornerDetection(){return this.defines.DISABLE_CORNER_DETECTION===void 0}set cornerDetection(e){e?delete this.defines.DISABLE_CORNER_DETECTION:this.defines.DISABLE_CORNER_DETECTION="1",this.needsUpdate=!0}isCornerRoundingEnabled(){return this.cornerDetection}setCornerRoundingEnabled(e){this.cornerDetection=e}setSize(e,i){let s=this.uniforms;s.texelSize.value.set(1/e,1/i),s.resolution.value.set(e,i)}},LX=new rs,Zl=null;function BX(){if(Zl===null){let e=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),i=new Float32Array([0,0,2,0,0,2]);Zl=new Pe,Zl.setAttribute!==void 0?(Zl.setAttribute("position",new Xe(e,3)),Zl.setAttribute("uv",new Xe(i,2))):(Zl.addAttribute("position",new Xe(e,3)),Zl.addAttribute("uv",new Xe(i,2)))}return Zl}var wi=class{constructor(e="Pass",i=new Pi,s=LX){this.name=e,this.renderer=null,this.scene=i,this.camera=s,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){let i=this.getFullscreenMaterial();i!==null&&(i.needsUpdate=!0),this.rtt=!e}}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(e){let i=this.screen;i!==null?i.material=e:(i=new sr(BX(),e),i.frustumCulled=!1,this.scene===null&&(this.scene=new Pi),this.scene.add(i),this.screen=i)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,i=ji){}render(e,i,s,a,o){throw new Error("Render method not implemented!")}setSize(e,i){}initialize(e,i,s){}dispose(){for(let e of Object.keys(this)){let i=this[e];if(i!==null&&typeof i.dispose=="function"){if(i instanceof Pi||i===this.renderer)continue;this[e].dispose()}}}},Ym=class extends wi{constructor(e,i=!0){super("CopyPass"),this.fullscreenMaterial=new bX,this.needsSwap=!1,this.renderTarget=e,e===void 0&&(this.renderTarget=new ft(1,1,{minFilter:tt,magFilter:tt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=i}get resize(){return this.autoResize}set resize(e){this.autoResize=e}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(e){this.autoResize=e}render(e,i,s,a,o){this.fullscreenMaterial.inputBuffer=i.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,i){this.autoResize&&this.renderTarget.setSize(e,i)}initialize(e,i,s){s!==void 0&&(this.renderTarget.texture.type=s,s!==Ir$1?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":e.outputEncoding===at&&(this.renderTarget.texture.encoding=at))}},s3=class extends wi{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(e,i,s,a,o){let c=e.state.buffers.stencil;c.setLocked(!1),c.setTest(!1)}},R_=new We,V_=class extends wi{constructor(e=!0,i=!0,s=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=e,this.depth=i,this.stencil=s,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(e,i,s){this.color=e,this.depth=i,this.stencil=s}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(e){this.overrideClearColor=e}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(e){this.overrideClearAlpha=e}render(e,i,s,a,o){let c=this.overrideClearColor,d=this.overrideClearAlpha,g=e.getClearAlpha(),b=c!==null,j=d>=0;b?(R_.copy(e.getClearColor(R_)),e.setClearColor(c,j?d:g)):j&&e.setClearAlpha(d),e.setRenderTarget(this.renderToScreen?null:i),e.clear(this.color,this.depth,this.stencil),b?e.setClearColor(R_,g):j&&e.setClearAlpha(g)}},Jl=-1,Xn=class extends fr$2{constructor(e,i=Jl,s=Jl,a=1){super(),this.resizable=e,this.base=new z$1(1,1),this.preferred=new z$1(i,s),this.target=this.preferred,this.s=a}get width(){let{base:e,preferred:i,scale:s}=this,a;return i.width!==Jl?a=i.width:i.height!==Jl?a=Math.round(i.height*(e.width/Math.max(e.height,1))):a=Math.round(e.width*s),a}set width(e){this.preferredWidth=e}get height(){let{base:e,preferred:i,scale:s}=this,a;return i.height!==Jl?a=i.height:i.width!==Jl?a=Math.round(i.width/Math.max(e.width/Math.max(e.height,1),1)):a=Math.round(e.height*s),a}set height(e){this.preferredHeight=e}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(e){this.s!==e&&(this.s=e,this.preferred.setScalar(Jl),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getScale(){return this.scale}setScale(e){this.scale=e}get baseWidth(){return this.base.width}set baseWidth(e){this.base.width!==e&&(this.base.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseWidth(){return this.base.width}setBaseWidth(e){this.base.width!==e&&(this.base.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get baseHeight(){return this.base.height}set baseHeight(e){this.base.height!==e&&(this.base.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(e){this.baseHeight=e}setBaseSize(e,i){(this.base.width!==e||this.base.height!==i)&&(this.base.set(e,i),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get preferredWidth(){return this.preferred.width}set preferredWidth(e){this.preferred.width!==e&&(this.preferred.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(e){this.preferredWidth=e}get preferredHeight(){return this.preferred.height}set preferredHeight(e){this.preferred.height!==e&&(this.preferred.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(e){this.preferredHeight=e}setPreferredSize(e,i){(this.preferred.width!==e||this.preferred.height!==i)&&(this.preferred.set(e,i),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}copy(e){this.base.set(e.getBaseWidth(),e.getBaseHeight()),this.preferred.set(e.getPreferredWidth(),e.getPreferredHeight()),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height)}static get AUTO_SIZE(){return Jl}},L_=!1,$R=class{constructor(e=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(e),this.meshCount=0,this.replaceMaterial=i=>{if(i.isMesh){let s;if(i.material.flatShading)switch(i.material.side){case tn:s=this.materialsFlatShadedDoubleSide;break;case yi:s=this.materialsFlatShadedBackSide;break;default:s=this.materialsFlatShaded;break}else switch(i.material.side){case tn:s=this.materialsDoubleSide;break;case yi:s=this.materialsBackSide;break;default:s=this.materials;break}this.originalMaterials.set(i,i.material),i.isSkinnedMesh?i.material=s[2]:i.isInstancedMesh?i.material=s[1]:i.material=s[0],++this.meshCount}}}setMaterial(e){if(this.disposeMaterials(),this.material=e,e!==null){let i=this.materials=[e.clone(),e.clone(),e.clone()];for(let s of i)s.uniforms=Object.assign({},e.uniforms),s.side=es;i[2].skinning=!0,this.materialsBackSide=i.map(s=>{let a=s.clone();return a.uniforms=Object.assign({},e.uniforms),a.side=yi,a}),this.materialsDoubleSide=i.map(s=>{let a=s.clone();return a.uniforms=Object.assign({},e.uniforms),a.side=tn,a}),this.materialsFlatShaded=i.map(s=>{let a=s.clone();return a.uniforms=Object.assign({},e.uniforms),a.flatShading=!0,a}),this.materialsFlatShadedBackSide=i.map(s=>{let a=s.clone();return a.uniforms=Object.assign({},e.uniforms),a.flatShading=!0,a.side=yi,a}),this.materialsFlatShadedDoubleSide=i.map(s=>{let a=s.clone();return a.uniforms=Object.assign({},e.uniforms),a.flatShading=!0,a.side=tn,a})}}render(e,i,s){let a=e.shadowMap.enabled;if(e.shadowMap.enabled=!1,L_){let o=this.originalMaterials;this.meshCount=0,i.traverse(this.replaceMaterial),e.render(i,s);for(let c of o)c[0].material=c[1];this.meshCount!==o.size&&o.clear()}else{let o=i.overrideMaterial;i.overrideMaterial=this.material,e.render(i,s),i.overrideMaterial=o}e.shadowMap.enabled=a}disposeMaterials(){if(this.material!==null){let e=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(let i of e)i.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return L_}static set workaroundEnabled(e){L_=e}},NX=class extends wi{constructor(e,i,s=null){super("RenderPass",e,i),this.needsSwap=!1,this.clearPass=new V_,this.overrideMaterialManager=s===null?null:new $R(s),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}get renderToScreen(){return super.renderToScreen}set renderToScreen(e){super.renderToScreen=e,this.clearPass.renderToScreen=e}get overrideMaterial(){let e=this.overrideMaterialManager;return e!==null?e.material:null}set overrideMaterial(e){let i=this.overrideMaterialManager;e!==null?i!==null?i.setMaterial(e):this.overrideMaterialManager=new $R(e):i!==null&&(i.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(e){this.overrideMaterial=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getSelection(){return this.selection}setSelection(e){this.selection=e}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(e){this.ignoreBackground=e}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(e){this.skipShadowMapUpdate=e}getClearPass(){return this.clearPass}render(e,i,s,a,o){let c=this.scene,d=this.camera,g=this.selection,b=d.layers.mask,j=c.background,_e=e.shadowMap.autoUpdate,$=this.renderToScreen?null:i;g!==null&&d.layers.set(g.getLayer()),this.skipShadowMapUpdate&&(e.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(c.background=null),this.clearPass.enabled&&this.clearPass.render(e,i),e.setRenderTarget($),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(e,c,d):e.render(c,d),d.layers.mask=b,c.background=j,e.shadowMap.autoUpdate=_e}},z_=class extends wi{constructor(e,i,{resolutionScale:s=1,width:a=Xn.AUTO_SIZE,height:o=Xn.AUTO_SIZE,renderTarget:c}={}){super("DepthPass"),this.needsSwap=!1,this.renderPass=new NX(e,i,new Mp({depthPacking:Mw}));let d=this.renderPass;d.skipShadowMapUpdate=!0,d.ignoreBackground=!0;let g=d.getClearPass();g.overrideClearColor=new We(16777215),g.overrideClearAlpha=1,this.renderTarget=c,this.renderTarget===void 0&&(this.renderTarget=new ft(1,1,{minFilter:Vt,magFilter:Vt,stencilBuffer:!1}),this.renderTarget.texture.name="DepthPass.Target");let b=this.resolution=new Xn(this,a,o,s);b.addEventListener("change",j=>this.setSize(b.baseWidth,b.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,i,s,a,o){let c=this.renderToScreen?null:this.renderTarget;this.renderPass.render(e,c)}setSize(e,i){let s=this.resolution;s.setBaseSize(e,i),this.renderTarget.setSize(s.width,s.height)}},Mt={SKIP:0,ADD:1,ALPHA:2,AVERAGE:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,EXCLUSION:8,LIGHTEN:9,MULTIPLY:10,DIVIDE:11,NEGATION:12,NORMAL:13,OVERLAY:14,REFLECT:15,SCREEN:16,SOFT_LIGHT:17,SUBTRACT:18},FX="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x+y,1.0)*opacity+x*(1.0-opacity);}",kX="vec3 blend(const in vec3 x,const in vec3 y,const in float opacity){return y*opacity+x*(1.0-opacity);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){float a=min(y.a,opacity);return vec4(blend(x.rgb,y.rgb,a),max(x.a,a));}",VX="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y)*0.5*opacity+x*(1.0-opacity);}",zX="float blend(const in float x,const in float y){return(y==0.0)?y:max(1.0-(1.0-x)/y,0.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",UX="float blend(const in float x,const in float y){return(y==1.0)?y:min(x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",GX="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x,y)*opacity+x*(1.0-opacity);}",jX="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return abs(x-y)*opacity+x*(1.0-opacity);}",HX="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y-2.0*x*y)*opacity+x*(1.0-opacity);}",WX="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x,y)*opacity+x*(1.0-opacity);}",qX="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return x*y*opacity+x*(1.0-opacity);}",YX="float blend(const in float x,const in float y){return(y>0.0)?min(x/y,1.0):1.0;}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",XX="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-abs(1.0-x-y))*opacity+x*(1.0-opacity);}",QX="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y*opacity+x*(1.0-opacity);}",KX="float blend(const in float x,const in float y){return(x<0.5)?(2.0*x*y):(1.0-2.0*(1.0-x)*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",ZX="float blend(const in float x,const in float y){return(y==1.0)?y:min(x*x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",JX="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-(1.0-x)*(1.0-y))*opacity+x*(1.0-opacity);}",$X="float blend(const in float x,const in float y){return(y<0.5)?(2.0*x*y+x*x*(1.0-2.0*y)):(sqrt(x)*(2.0*y-1.0)+2.0*x*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",eQ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x+y-1.0,0.0)*opacity+x*(1.0-opacity);}",tQ=new Map([[Mt.SKIP,null],[Mt.ADD,FX],[Mt.ALPHA,kX],[Mt.AVERAGE,VX],[Mt.COLOR_BURN,zX],[Mt.COLOR_DODGE,UX],[Mt.DARKEN,GX],[Mt.DIFFERENCE,jX],[Mt.EXCLUSION,HX],[Mt.LIGHTEN,WX],[Mt.MULTIPLY,qX],[Mt.DIVIDE,YX],[Mt.NEGATION,XX],[Mt.NORMAL,QX],[Mt.OVERLAY,KX],[Mt.REFLECT,ZX],[Mt.SCREEN,JX],[Mt.SOFT_LIGHT,$X],[Mt.SUBTRACT,eQ]]),rQ=class extends fr$2{constructor(e,i=1){super(),this.f=e,this.opacity=new he(i)}getOpacity(){return this.opacity.value}setOpacity(e){this.opacity.value=e}get blendFunction(){return this.f}set blendFunction(e){this.f=e,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(e){this.blendFunction=e}getShaderCode(){return tQ.get(this.blendFunction)}},Zo={NONE:0,DEPTH:1,CONVOLUTION:2},Jo=class extends fr$2{constructor(e,i,{attributes:s=Zo.NONE,blendFunction:a=Mt.SCREEN,defines:o=new Map,uniforms:c=new Map,extensions:d=null,vertexShader:g=null}={}){super(),this.name=e,this.renderer=null,this.attributes=s,this.fragmentShader=i,this.vertexShader=g,this.defines=o,this.uniforms=c,this.extensions=d,this.blendMode=new rQ(a),this.blendMode.addEventListener("change",b=>this.setChanged())}getName(){return this.name}setRenderer(e){this.renderer=e}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(e){this.attributes=e,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(e){this.fragmentShader=e,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(e){this.vertexShader=e,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(e,i=ji){}update(e,i,s){}setSize(e,i){}initialize(e,i,s){}dispose(){for(let e of Object.keys(this)){let i=this[e];if(i!==null&&typeof i.dispose=="function"){if(i instanceof Pi||i===this.renderer)continue;this[e].dispose()}}}};function e3(e,i,s){for(let a of i){let o="$1"+e+a.charAt(0).toUpperCase()+a.slice(1),c=new RegExp("([^\\.])(\\b"+a+"\\b)","g");for(let d of s.entries())d[1]!==null&&s.set(d[0],d[1].replace(c,o))}}function iQ(e,i,s,a,o,c,d){let g=new Map([["fragment",i.getFragmentShader()],["vertex",i.getVertexShader()]]),b=g.get("fragment")!==void 0&&/mainImage/.test(g.get("fragment")),j=g.get("fragment")!==void 0&&/mainUv/.test(g.get("fragment")),_e=[],$=[],rt=!1,st=!1;if(g.get("fragment")===void 0)console.error("Missing fragment shader",i);else if(j&&d&Zo.CONVOLUTION)console.error("Effects that transform UV coordinates are incompatible with convolution effects",i);else if(!b&&!j)console.error("The fragment shader contains neither a mainImage nor a mainUv function",i);else{let ut=/(?:\w+\s+(\w+)\([\w\s,]*\)\s*{[^}]+})/g,gt=k_.Section;if(j){let yt=`	${e}MainUv(UV);
`;s.set(gt.FRAGMENT_MAIN_UV,s.get(gt.FRAGMENT_MAIN_UV)+yt),rt=!0}if(g.get("vertex")!==null&&/mainSupport/.test(g.get("vertex"))){let yt=`	${e}MainSupport(`;yt+=/mainSupport *\([\w\s]*?uv\s*?\)/.test(g.get("vertex"))?`vUv);
`:`);
`,s.set(gt.VERTEX_MAIN_SUPPORT,s.get(gt.VERTEX_MAIN_SUPPORT)+yt),_e=_e.concat([...g.get("vertex").matchAll(/(?:varying\s+\w+\s+(\w*))/g)].map(At=>At[1])),$=$.concat(_e).concat([...g.get("vertex").matchAll(ut)].map(At=>At[1]))}$=$.concat([...g.get("fragment").matchAll(ut)].map(yt=>yt[1])),$=$.concat([...i.defines.keys()].map(yt=>yt.replace(/\([\w\s,]*\)/g,""))),$=$.concat([...i.uniforms.keys()]),i.uniforms.forEach((yt,At)=>c.set(e+At.charAt(0).toUpperCase()+At.slice(1),yt)),i.defines.forEach((yt,At)=>o.set(e+At.charAt(0).toUpperCase()+At.slice(1),yt)),e3(e,$,o),e3(e,$,g);let wt=i.blendMode;if(a.set(wt.blendFunction,wt),b){let yt=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/,At=`${e}MainImage(color0, UV, `;d&Zo.DEPTH&&yt.test(g.get("fragment"))&&(At+="depth, ",st=!0),At+=`color1);
	`;let Ct=e+"BlendOpacity";c.set(Ct,wt.opacity),At+=`color0 = blend${wt.blendFunction}(color0, color1, ${Ct});

	`,s.set(gt.FRAGMENT_MAIN_IMAGE,s.get(gt.FRAGMENT_MAIN_IMAGE)+At),At=`uniform float ${Ct};

`,s.set(gt.FRAGMENT_HEAD,s.get(gt.FRAGMENT_HEAD)+At)}s.set(gt.FRAGMENT_HEAD,s.get(gt.FRAGMENT_HEAD)+g.get("fragment")+`
`),g.get("vertex")!==null&&s.set(gt.VERTEX_HEAD,s.get(gt.VERTEX_HEAD)+g.get("vertex")+`
`)}return{varyings:_e,transformedUv:rt,readDepth:st}}var nu=class extends wi{constructor(e,...i){super("EffectPass"),this.fullscreenMaterial=new k_(null,null,null,e),this.effects=i.sort((s,a)=>a.attributes-s.attributes),this.skipRendering=!1,this.uniformCount=0,this.varyingCount=0,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(e){this.fullscreenMaterial.encodeOutput=e}get dithering(){return this.fullscreenMaterial.dithering}set dithering(e){let i=this.fullscreenMaterial;i.dithering=e,i.needsUpdate=!0}verifyResources(){let e=this.renderer.capabilities,i=Math.min(e.maxFragmentUniforms,e.maxVertexUniforms);this.uniformCount>i&&console.warn("The current rendering context doesn't support more than "+i+" uniforms, but "+this.uniformCount+" were defined"),i=e.maxVaryings,this.varyingCount>i&&console.warn("The current rendering context doesn't support more than "+i+" varyings, but "+this.varyingCount+" were defined")}updateMaterial(){let e=k_.Section,i=new Map([[e.FRAGMENT_HEAD,""],[e.FRAGMENT_MAIN_UV,""],[e.FRAGMENT_MAIN_IMAGE,""],[e.VERTEX_HEAD,""],[e.VERTEX_MAIN_SUPPORT,""]]),s=new Map,a=new Map,o=new Map,c=new Set,d=0,g=0,b=0,j=!1,_e=!1;for(let rt of this.effects)if(rt.blendMode.blendFunction===Mt.SKIP)b|=rt.getAttributes()&Zo.DEPTH;else if(b&rt.getAttributes()&Zo.CONVOLUTION)console.error("Convolution effects cannot be merged",rt);else{b|=rt.getAttributes();let st="e"+d++,ut=iQ(st,rt,i,s,a,o,b);if(g+=ut.varyings.length,j=j||ut.transformedUv,_e=_e||ut.readDepth,rt.extensions!==null)for(let gt of rt.extensions)c.add(gt)}let $=/\bblend\b/g;for(let rt of s.values()){let st=rt.getShaderCode().replace($,`blend${rt.blendFunction}`);i.set(e.FRAGMENT_HEAD,i.get(e.FRAGMENT_HEAD)+st+`
`)}b&Zo.DEPTH?(_e&&i.set(e.FRAGMENT_MAIN_IMAGE,`float depth = readDepth(UV);

	`+i.get(e.FRAGMENT_MAIN_IMAGE)),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,j?(i.set(e.FRAGMENT_MAIN_UV,`vec2 transformedUv = vUv;
`+i.get(e.FRAGMENT_MAIN_UV)),a.set("UV","transformedUv")):a.set("UV","vUv"),i.forEach((rt,st,ut)=>ut.set(st,rt.trim().replace(/^#/,`
#`))),this.uniformCount=o.size,this.varyingCount=g,this.skipRendering=d===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderParts(i).setExtensions(c).setUniforms(o).setDefines(a)}recompile(){this.updateMaterial(),this.verifyResources()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(e,i=ji){this.fullscreenMaterial.depthBuffer=e,this.fullscreenMaterial.depthPacking=i;for(let s of this.effects)s.setDepthTexture(e,i)}render(e,i,s,a,o){for(let c of this.effects)c.update(e,i,a);if(!this.skipRendering||this.renderToScreen){let c=this.fullscreenMaterial;c.inputBuffer=i.texture,c.time+=a,e.setRenderTarget(this.renderToScreen?null:s),e.render(this.scene,this.camera)}}setSize(e,i){this.fullscreenMaterial.setSize(e,i);for(let s of this.effects)s.setSize(e,i)}initialize(e,i,s){this.renderer=e;for(let a of this.effects)a.initialize(e,i,s),a.addEventListener("change",o=>this.handleEvent(o));this.updateMaterial(),this.verifyResources(),s!==void 0&&s!==Ir$1&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(let e of this.effects)e.dispose()}handleEvent(e){switch(e.type){case"change":this.recompile();break}}},nQ=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],Tx=class extends wi{constructor({resolutionScale:e=.5,width:i=Xn.AUTO_SIZE,height:s=Xn.AUTO_SIZE,kernelSize:a=Xm.LARGE}={}){super("KawaseBlurPass"),this.renderTargetA=new ft(1,1,{minFilter:tt,magFilter:tt,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";let o=this.resolution=new Xn(this,i,s,e);o.addEventListener("change",c=>this.setSize(o.baseWidth,o.baseHeight)),this.blurMaterial=new JR,this.ditheredBlurMaterial=new JR,this.ditheredBlurMaterial.uniforms.scale=this.blurMaterial.uniforms.scale,this.ditheredBlurMaterial.dithering=!0,this.dithering=!1,this.kernelSize=a}getResolution(){return this.resolution}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get scale(){return this.blurMaterial.scale}set scale(e){this.blurMaterial.scale=e}getScale(){return this.blurMaterial.scale}setScale(e){this.blurMaterial.scale=e}getKernelSize(){return this.kernelSize}setKernelSize(e){this.kernelSize=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,i,s,a,o){let c=this.scene,d=this.camera,g=this.renderTargetA,b=this.renderTargetB,j=nQ[this.kernelSize],_e=this.blurMaterial,$=i,rt,st;for(this.fullscreenMaterial=_e,rt=0,st=j.length-1;rt<st;++rt){let ut=rt&1?b:g;_e.kernel=j[rt],_e.inputBuffer=$.texture,e.setRenderTarget(ut),e.render(c,d),$=ut}this.dithering&&(_e=this.ditheredBlurMaterial,this.fullscreenMaterial=_e),_e.kernel=j[rt],_e.inputBuffer=$.texture,e.setRenderTarget(this.renderToScreen?null:s),e.render(c,d)}setSize(e,i){let s=this.resolution;s.setBaseSize(e,i);let a=s.width,o=s.height;this.renderTargetA.setSize(a,o),this.renderTargetB.setSize(a,o),this.blurMaterial.setSize(a,o),this.ditheredBlurMaterial.setSize(a,o)}initialize(e,i,s){s!==void 0&&(this.renderTargetA.texture.type=s,this.renderTargetB.texture.type=s,s!==Ir$1?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.ditheredBlurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):e.outputEncoding===at&&(this.renderTargetA.texture.encoding=at,this.renderTargetB.texture.encoding=at))}static get AUTO_SIZE(){return Xn.AUTO_SIZE}},sQ=class extends wi{constructor({width:e=Xn.AUTO_SIZE,height:i=Xn.AUTO_SIZE,renderTarget:s,luminanceRange:a,colorOutput:o}={}){super("LuminancePass"),this.fullscreenMaterial=new CX(o,a),this.needsSwap=!1,this.renderTarget=s,this.renderTarget===void 0&&(this.renderTarget=new ft(1,1,{minFilter:tt,magFilter:tt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target",this.renderTarget.texture.generateMipmaps=!1);let c=this.resolution=new Xn(this,e,i);c.addEventListener("change",d=>this.setSize(c.baseWidth,c.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(e,i,s,a,o){let c=this.fullscreenMaterial;c.inputBuffer=i.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,i){let s=this.resolution;s.setBaseSize(e,i),this.renderTarget.setSize(s.width,s.height)}initialize(e,i,s){s!==void 0&&s!==Ir$1&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},o3=class extends wi{constructor(e,i){super("MaskPass",e,i),this.needsSwap=!1,this.clearPass=new V_(!1,!1,!0),this.inverse=!1}get inverted(){return this.inverse}set inverted(e){this.inverse=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(e){this.inverted=e}render(e,i,s,a,o){let c=e.getContext(),d=e.state.buffers,g=this.scene,b=this.camera,j=this.clearPass,_e=this.inverted?0:1,$=1-_e;d.color.setMask(!1),d.depth.setMask(!1),d.color.setLocked(!0),d.depth.setLocked(!0),d.stencil.setTest(!0),d.stencil.setOp(c.REPLACE,c.REPLACE,c.REPLACE),d.stencil.setFunc(c.ALWAYS,_e,4294967295),d.stencil.setClear($),d.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?j.render(e,null):(j.render(e,i),j.render(e,s))),this.renderToScreen?(e.setRenderTarget(null),e.render(g,b)):(e.setRenderTarget(i),e.render(g,b),e.setRenderTarget(s),e.render(g,b)),d.color.setLocked(!1),d.depth.setLocked(!1),d.stencil.setLocked(!1),d.stencil.setFunc(c.EQUAL,1,4294967295),d.stencil.setOp(c.KEEP,c.KEEP,c.KEEP),d.stencil.setLocked(!0)}},Yn=class extends wi{constructor(e,i="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=e,this.inputBufferUniform=null,this.setInput(i)}setInput(e){if(this.inputBufferUniform=null,this.fullscreenMaterial!==null){let i=this.fullscreenMaterial.uniforms;i!==void 0&&i[e]!==void 0&&(this.inputBufferUniform=i[e])}}render(e,i,s,a,o){this.inputBufferUniform!==null&&i!==null&&(this.inputBufferUniform.value=i.texture),e.setRenderTarget(this.renderToScreen?null:s),e.render(this.scene,this.camera)}initialize(e,i,s){s!==void 0&&s!==Ir$1&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},B_=1/1e3,oQ=1e3,a3=class{constructor(){this.previousTime=0,this.currentTime=0,this.delta=0,this.fixedDelta=1e3/60,this.elapsed=0,this.timescale=1,this.fixedDeltaEnabled=!1,this.autoReset=!1}setFixedDeltaEnabled(e){return this.fixedDeltaEnabled=e,this}isAutoResetEnabled(e){return this.autoReset}setAutoResetEnabled(e){return typeof document<"u"&&document.hidden!==void 0&&(e?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this.autoReset=e),this}getDelta(){return this.delta*B_}getFixedDelta(){return this.fixedDelta*B_}setFixedDelta(e){return this.fixedDelta=e*oQ,this}getElapsed(){return this.elapsed*B_}getTimescale(){return this.timescale}setTimescale(e){return this.timescale=e,this}update(e){return this.fixedDeltaEnabled?this.delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=e!==void 0?e:performance.now(),this.delta=this.currentTime-this.previousTime),this.delta*=this.timescale,this.elapsed+=this.delta,this}reset(){return this.delta=0,this.elapsed=0,this.currentTime=performance.now(),this}handleEvent(e){document.hidden||(this.currentTime=performance.now())}dispose(){this.setAutoResetEnabled(!1)}},Xm={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},aQ=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=clamp(texture2D(map,uv)*intensity,0.0,1.0);}`,l3=class extends Jo{constructor({blendFunction:e=Mt.SCREEN,luminanceThreshold:i=.9,luminanceSmoothing:s=.025,resolutionScale:a=.5,intensity:o=1,width:c=Xn.AUTO_SIZE,height:d=Xn.AUTO_SIZE,kernelSize:g=Xm.LARGE}={}){super("BloomEffect",aQ,{blendFunction:e,uniforms:new Map([["map",new he(null)],["intensity",new he(o)]])}),this.renderTarget=new ft(1,1,{minFilter:tt,magFilter:tt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.renderTarget.texture.generateMipmaps=!1,this.uniforms.get("map").value=this.renderTarget.texture,this.luminancePass=new sQ({renderTarget:this.renderTarget,colorOutput:!0}),this.luminanceMaterial.threshold=i,this.luminanceMaterial.smoothingFactor=s,this.blurPass=new Tx({resolutionScale:a,width:c,height:d,kernelSize:g});let b=this.blurPass.getResolution();b.addEventListener("change",j=>this.setSize(b.baseWidth,b.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}get resolution(){return this.blurPass.resolution}getResolution(){return this.blurPass.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get dithering(){return this.blurPass.dithering}set dithering(e){this.blurPass.dithering=e}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(e){this.blurPass.kernelSize=e}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(e){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(e){this.uniforms.get("intensity").value=e}getIntensity(){return this.intensity}setIntensity(e){this.intensity=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}update(e,i,s){let a=this.renderTarget;this.luminancePass.enabled?(this.luminancePass.render(e,i,a),this.blurPass.render(e,a,a)):this.blurPass.render(e,i,a)}setSize(e,i){let s=this.resolution;s.setBaseSize(e,i),this.renderTarget.setSize(s.width,s.height),this.luminancePass.resolution.copy(s)}initialize(e,i,s){this.blurPass.initialize(e,i,s),s!==void 0&&(this.renderTarget.texture.type=s,e.outputEncoding===at&&(this.renderTarget.texture.encoding=at))}},lQ="uniform float brightness;uniform float contrast;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=inputColor.rgb+vec3(brightness-0.5);if(contrast>0.0){color/=vec3(1.0-contrast);}else{color*=vec3(1.0+contrast);}outputColor=vec4(min(color+vec3(0.5),1.0),inputColor.a);}",c3=class extends Jo{constructor({blendFunction:e=Mt.NORMAL,brightness:i=0,contrast:s=0}={}){super("BrightnessContrastEffect",lQ,{blendFunction:e,uniforms:new Map([["brightness",new he(i)],["contrast",new he(s)]])})}get brightness(){return this.uniforms.get("brightness").value}set brightness(e){this.uniforms.get("brightness").value=e}getBrightness(e){return this.brightness}setBrightness(e){this.brightness=e}get contrast(){return this.uniforms.get("contrast").value}set contrast(e){this.uniforms.get("contrast").value=e}getContrast(e){return this.contrast}setContrast(e){this.contrast=e}},cQ="void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(vec3(average(inputColor.rgb)),inputColor.a);}",u3=class extends Jo{constructor(e=Mt.NORMAL){super("ColorAverageEffect",cQ,{blendFunction:e})}},uQ="varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 ra=texture2D(inputBuffer,vUvR).ra;vec2 ba=texture2D(inputBuffer,vUvB).ba;outputColor=vec4(ra.x,inputColor.g,ba.x,max(max(ra.y,ba.y),inputColor.a));}",hQ="uniform vec2 offset;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vec2 shift=offset*vec2(1.0,aspect);vUvR=uv+shift;vUvB=uv-shift;}",h3=class extends Jo{constructor({blendFunction:e=Mt.NORMAL,offset:i=new z$1(.001,5e-4)}={}){super("ChromaticAberrationEffect",uQ,{vertexShader:hQ,blendFunction:e,attributes:Zo.CONVOLUTION,uniforms:new Map([["offset",new he(i)]])})}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}},dQ=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D nearColorBuffer;uniform mediump sampler2D farColorBuffer;
#else
uniform lowp sampler2D nearColorBuffer;uniform lowp sampler2D farColorBuffer;
#endif
uniform lowp sampler2D nearCoCBuffer;uniform float scale;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec4 colorNear=texture2D(nearColorBuffer,uv);vec4 colorFar=texture2D(farColorBuffer,uv);float CoCNear=texture2D(nearCoCBuffer,uv).r;CoCNear=min(CoCNear*scale,1.0);vec4 result=inputColor*(1.0-colorFar.a)+colorFar;result=mix(result,colorNear,CoCNear);outputColor=result;}`,d3=class extends Jo{constructor(e,{blendFunction:i=Mt.NORMAL,worldFocusDistance:s,worldFocusRange:a,focusDistance:o=0,focalLength:c=.1,focusRange:d=c,bokehScale:g=1,width:b=Xn.AUTO_SIZE,height:j=Xn.AUTO_SIZE}={}){super("DepthOfFieldEffect",dQ,{blendFunction:i,attributes:Zo.DEPTH,uniforms:new Map([["nearColorBuffer",new he(null)],["farColorBuffer",new he(null)],["nearCoCBuffer",new he(null)],["scale",new he(1)]])}),this.camera=e,this.renderTarget=new ft(1,1,{minFilter:tt,magFilter:tt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="DoF.Intermediate",this.renderTarget.texture.generateMipmaps=!1,this.renderTargetMasked=this.renderTarget.clone(),this.renderTargetMasked.texture.name="DoF.Masked.Far",this.renderTargetNear=this.renderTarget.clone(),this.renderTargetNear.texture.name="DoF.Bokeh.Near",this.uniforms.get("nearColorBuffer").value=this.renderTargetNear.texture,this.renderTargetFar=this.renderTarget.clone(),this.renderTargetFar.texture.name="DoF.Bokeh.Far",this.uniforms.get("farColorBuffer").value=this.renderTargetFar.texture,this.renderTargetCoC=this.renderTarget.clone(),this.renderTargetCoC.texture.name="DoF.CoC",this.renderTargetCoCBlurred=this.renderTargetCoC.clone(),this.renderTargetCoCBlurred.texture.name="DoF.CoC.Blurred",this.uniforms.get("nearCoCBuffer").value=this.renderTargetCoCBlurred.texture,this.cocPass=new Yn(new gX(e));let _e=this.cocMaterial;_e.focusDistance=o,_e.focusRange=d,s!==void 0&&(_e.worldFocusDistance=s),a!==void 0&&(_e.worldFocusRange=a),this.blurPass=new Tx({kernelSize:Xm.MEDIUM,width:b,height:j});let $=this.blurPass.getResolution();$.addEventListener("change",st=>this.setSize($.getBaseWidth(),$.getBaseHeight())),this.maskPass=new Yn(new DX(this.renderTargetCoC.texture));let rt=this.maskPass.fullscreenMaterial;rt.maskFunction=n3.MULTIPLY,rt.colorChannel=i3.GREEN,this.bokehNearBasePass=new Yn(new _x(!1,!0)),this.bokehNearBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehNearFillPass=new Yn(new _x(!0,!0)),this.bokehNearFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehFarBasePass=new Yn(new _x(!1,!1)),this.bokehFarBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.bokehFarFillPass=new Yn(new _x(!0,!1)),this.bokehFarFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.target=null,this.bokehScale=g}get cocTexture(){return this.renderTargetCoC.texture}get cocMaterial(){return this.cocPass.fullscreenMaterial}get circleOfConfusionMaterial(){return this.cocMaterial}getCircleOfConfusionMaterial(){return this.circleOfConfusionMaterial}getBlurPass(){return this.blurPass}get resolution(){return this.blurPass.getResolution()}getResolution(){return this.blurPass.getResolution()}get bokehScale(){return this.uniforms.get("scale").value}set bokehScale(e){let i=[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];for(let s of i)s.fullscreenMaterial.setScale(e);this.maskPass.fullscreenMaterial.setStrength(e),this.uniforms.get("scale").value=e}getBokehScale(){return this.bokehScale}setBokehScale(e){this.bokehScale=e}getTarget(){return this.target}setTarget(e){this.target=e}calculateFocusDistance(e){let i=this.camera,s=i.position.distanceTo(e);return F_(-s,i.near,i.far)}setDepthTexture(e,i=ji){this.circleOfConfusionMaterial.depthBuffer=e,this.circleOfConfusionMaterial.depthPacking=i}update(e,i,s){let a=this.renderTarget,o=this.renderTargetCoC,c=this.renderTargetCoCBlurred,d=this.renderTargetMasked;if(this.target!==null){let g=this.calculateFocusDistance(this.target);this.circleOfConfusionMaterial.focusDistance=g}this.cocPass.render(e,null,o),this.blurPass.render(e,o,c),this.maskPass.render(e,i,d),this.bokehFarBasePass.render(e,d,a),this.bokehFarFillPass.render(e,a,this.renderTargetFar),this.bokehNearBasePass.render(e,i,a),this.bokehNearFillPass.render(e,a,this.renderTargetNear)}setSize(e,i){let s=this.resolution;s.setBaseSize(e,i);let a=s.width,o=s.height,c=[this.cocPass,this.blurPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];c.push(this.renderTargetCoC,this.renderTargetMasked),c.forEach(d=>d.setSize(e,i)),c=[this.renderTarget,this.renderTargetNear,this.renderTargetFar,this.renderTargetCoCBlurred],c.forEach(d=>d.setSize(a,o)),[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(d=>d.fullscreenMaterial.setSize(a,o))}initialize(e,i,s){[this.cocPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(a=>a.initialize(e,i,s)),this.blurPass.initialize(e,i,Ir$1),s!==void 0&&(this.renderTarget.texture.type=s,this.renderTargetNear.texture.type=s,this.renderTargetFar.texture.type=s,this.renderTargetMasked.texture.type=s,e.outputEncoding===at&&(this.renderTarget.texture.encoding=at,this.renderTargetNear.texture.encoding=at,this.renderTargetFar.texture.encoding=at,this.renderTargetMasked.texture.encoding=at))}};new _;new ce$1;var fQ="uniform vec3 hue;uniform float saturation;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,hue.xyz),dot(inputColor.rgb,hue.zxy),dot(inputColor.rgb,hue.yzx));float average=(color.r+color.g+color.b)/3.0;vec3 diff=average-color;if(saturation>0.0){color+=diff*(1.0-1.0/(1.001-saturation));}else{color+=diff*-saturation;}outputColor=vec4(min(color,1.0),inputColor.a);}",f3=class extends Jo{constructor({blendFunction:e=Mt.NORMAL,hue:i=0,saturation:s=0}={}){super("HueSaturationEffect",fQ,{blendFunction:e,uniforms:new Map([["hue",new he(new _)],["saturation",new he(s)]])}),this.hue=i}get saturation(){return this.uniforms.get("saturation").value}set saturation(e){this.uniforms.get("saturation").value=e}getSaturation(){return this.saturation}setSaturation(e){this.saturation=e}get hue(){let e=this.uniforms.get("hue").value;return Math.acos((e.x*3-1)/2)}set hue(e){let i=Math.sin(e),s=Math.cos(e);this.uniforms.get("hue").value.set((2*s+1)/3,(-Math.sqrt(3)*i-s+1)/3,(Math.sqrt(3)*i-s+1)/3)}getHue(){return this.hue}setHue(e){this.hue=e}};new We;var pQ=`void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*time));
#ifdef PREMULTIPLY
outputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);
#else
outputColor=vec4(noise,inputColor.a);
#endif
}`,p3=class extends Jo{constructor({blendFunction:e=Mt.SCREEN,premultiply:i=!1}={}){super("NoiseEffect",pQ,{blendFunction:e}),this.premultiply=i}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(e){this.premultiply!==e&&(e?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}isPremultiplied(){return this.premultiply}setPremultiplied(e){this.premultiply=e}},mQ="uniform bool active;uniform vec2 d;void mainUv(inout vec2 uv){if(active){uv=vec2(d.x*(floor(uv.x/d.x)+0.5),d.y*(floor(uv.y/d.y)+0.5));}}",m3=class extends Jo{constructor(e=30){super("PixelationEffect",mQ,{uniforms:new Map([["active",new he(!1)],["d",new he(new z$1)]])}),this.resolution=new z$1,this.d=0,this.granularity=e}get granularity(){return this.d}set granularity(e){let i=Math.floor(e);i%2>0&&(i+=1),this.d=i,this.uniforms.get("active").value=i>0,this.setSize(this.resolution.width,this.resolution.height)}getGranularity(){return this.granularity}setGranularity(e){this.granularity=e}setSize(e,i){this.resolution.set(e,i),this.uniforms.get("d").value.setScalar(this.d).divide(this.resolution)}};new _;new _;var t3="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAACm53kpAAAAeElEQVRYR+2XSwqAMAxEJ168ePEqwRSKhIIiuHjJqiU0gWE+1CQdApcVAMUAuARaMGCX1MIL/Ow13++9lW2s3mW9MWvsnWc/2fvGygwPAN4E8QzAA4CXAB6AHjG4JTHYI1ey3pcx6FHnEfhLDOIBKAmUBK6/ANUDTlROXAHd9EC1AAAAAElFTkSuQmCC",r3="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAIwCAYAAAABNmBHAAAgAElEQVR4Xuy9CbhlV1ktOvbpq09DkiIkUBI6kxASIH0DlAQiIK1wRfSJTx+i4JX7vKIigs8HXpXvqVcvrcC9agQ7IDTSSWgqCQQliDRBJKkkhDSkqVPNqVOnP+8b//rH3P+eZ+199tlznVTlvVrft7+1T7OaueZY42/m37QALKNk2wHg1pITlB17mC+Pp11W3X/LHyT32vhg48/5SOv+PnwpsHA70JoGlueB1iKApeqzvOzn44GatTB76Xzhd7suBR7+WWADgDEAwwCG/L54b/poDLrHuvvm70Z2Avhsc+PVcxscBU8F8C8ADg5+ipIjD/PlGwfgju8B924E5seARUfLsiNmqQW0IjL8+7L2NYD/7COBzfcCm+aB8SVgdAkYIRCXKyDax4EdAanL5PuNPllNvXDlAHwFgP8AcC2AhRIoDXbsYb48dl5WkVFTE3LGDcC9m4CZCWBuFFgeAZaGAYJQQCRqDHT+McJrVb8zwATUXH02MHYfMHEIGFsAxgjApQqACYQORjtd/B7Axt/z79sC0+cMPgjjlwPwVwHcA+DfAHzTxcVgWBroqMN8+cYBeM71wH0TwKExYHYUWCIAHYRLTlkCYgcIBcAgU/n3qy8GRu4HRgnAOWBkERhddPAJhGJDBxkvw7cqimr+zFM/ZLnZF64cgL8BYD+AWwB8x/dlWuWagHiYL984AJ/0RWBy1AE4AizyM1yxYAcTigW55xMbAkxEiwEdkJ/ZCQxPAiOHgBECcKEC4TBZcKkSv+mTieNcNPNC26mLNsj45QD8LQDTAO4GcJt/7iw2bfoG4WG+vAGwm9ExiEg69zpg/wgwPQLMjgALzn4E4aIzoJjQ9g4024uygkj+pyuAoX0VAIfngOH5NgCHMhAm8Sv2y3XDZeBhNIp8OzJE8OsBzAKYBHAXgDt8/4O+MVT0j4f58o0D8Pxrgf3DwMwIMEPQEYRkNwfgsuuDZLskip0No0gWMD/9HGDoADAkAC4Aw/wsAgZAgs2Z0ABI0GU6IVmKv+f28KDnHxkA/G0A8y6G73N9kOCjXnh/Ebb6OvgwX75xAF5wLTA1VIHPADgMLDj4yIA5AAm6aCUnv4oz46eeDwxNAUMzwJAz4BABSNDFTwSfg7DDKHE23MG5PqIY8A1u/dINs9dBdy8AgnGPM2NfUBrsnw7z5RsH4IXXAAcJviFgluAbygBINnSLWOAjGxJ4pgOKDV0v/OSLKp8iGXBovhLBBOCQM2ACoTOhnYrAdItYbCij5JFzRyIAqRccAnDAQUjg6UNQ7hsMXP0cRQAexss3DsCLCECCLwCQzMcPwUi2MwAScAKbfnY/YRLFQ8DHX+IAJAMSfDkAF13kLvleIjhjQQHxUVS3jjgGpKeeNzYVQEjgUS8k+PghONdhIwAP4+XXBYCHKIJbwJyDTgaIAdCBJx3Q2M8tYAHP9m4df/ylQOsQ0JqtRLCx30K1wtLBggScQOgsKBGcWHAJeOwRC0BSM1mQIKRbhh+Bj98JQP6t4U0APEyXXxcAEnxkQAFwoVUxID9kvQg+c1C7vidRbIDkc24B//hTQGumDcCWA5DgMxASdNIFBUI5pCML8v8API5zfEQx4BudgqiczviSnJhQwCP4BMCGl+wO8+U7AJi/W4O4YS6+pmK/2ciADsAOBhTIIiAJnPB7AvNjP+0AnANaYkAHX2JBAc+tYaJXOqBZv24Vc386XW5dtkHGW+4HFAJonpOe+YYQZAShgKjv3PNvPQaxVoI8zJdfFwASfPzMUwS3Kt1v0UFIlos6oDFdAGFcliMAP/ryAEAGNwQRnDOgLbdlIEwrIs6AZ/QgkMMHQF6ZAKQcJAsSYPwIeAIk9wJgoPK1gi7+PwF4GC/fOAAvIQPSs0URTPBJ/Pp3GSEGRHfBCIQ0xowBtUbcAj7ys5X4Jfu1HIAGQrIgQRXEsAFQIORDFhiDY/rMHmrU4QUgR08AkgUjCAW6CD6CkwBsAIQC4GG6fPMA3OXiNzCg2I9gNCMksmAAoemDzoimFwL48M85AKkiuQVMAAp8CYRRDAt8GQiJ67N6GJODAXAHlsGguscA2AJg1IPGYmxOpBxFWkRN9LsATgIwXnNs/v/5z/9XCf8BO3YAtxbc/46/KDt+5+ea1Yku2VUxHz/z0v24FwMGK1gWsK2OUUxHHdCBeRUB6OxHABr4ZICIBd0QWSF+XRdMTAjgCdTrG9cBNwE4F8CpDkICyYLGsuhFt6zs+gISwUen8zEAjgMw4cfx2H6O/90yAFo84Cbg4ID3/9TfLTt+5+ebnRABkODjx0SwPi5ec/FrYpmqSAxM8Dn60CsqAFI6GfhqAMiDE/gokmvEr0C4PgDkBQm40wE8zMFEUDKEVoxIMLl/KS73mE7H9d+vcKHQQcjwW0Yu9nP8m8sAmOIBuWY6wP2/4s0ezjjg8TuvaR6ABJ70vxUApGrm7EbGE+i472BAB+WHfqHS/eoAaEwY2E9+wLSXTqhI7CXgnB6LCoOJ4BiST+hTnG0HcCwAglCx3ARoZEVFXnBPp/O/A/hXACc7CPs9/i1lAOyIB+RDX+P9/+pbQjjjAMfv/PL6AFDs1wFAgs/9fgKfgdE/ZEpuiQlbwAde6QAMBgiRmsSwA9BY0JfjovGRDBMH4TlcXGhcBOc6HkF0gjPhZgchxTLZMAci/04W/B6Ab3t09EPXcPyflgFwRTwgJ2MN9/8bf5qFM67x+B/aW4XQz42FeL0YrRyikztUFw0704mf9kXgxhOAqc3AAsPyRxxQCs/PdXOFY0W1KHy3QIUGtx+6vdnx1vsB+dsTncm2AogglFgVEAlUWrOMB2RyEmMCGQ/Y7/HvKns6tfGAnJQ+r/9b76oJZ1zD8WdyQjYBh8aBhVEHjELouQ8ukQ7VRSCJAALwkr+sALhnGzDD3JAJYJHg9uhoi4bx8ytkWUtvHT/7+Zc4dw1uZ3612fH2dkQf7yxIEEockwkJQn4IQoq8unhAhmPRKKFx0uv4K8ueTs94wD7u//VX9ghn7OP4c+4G7h8HpseB+dF2AKlFLwuAIZ8jD6NPrOhAffmfA9/ZBuzZCkyRWSeqBCWyoYGQ5yQrBpDbum/ME1HoPo0XEkSD2zlfbna8q6+EUJcTCxKEtHL5EQjP6BEPyIgYAZBvYt3xHyx7OqvGA65y/7/9wVXCGVc5/sl7qxD66dEqiYgRzAqhN1A4CBNAAlDyAFI+iZ9/N3DLJuC+jcDUBmCWyUnOrmTYCMIOkNclLg0B8/RsNLg9+UvNjnd1APLmmQpFHyEBROuWACQT8nN+H/GAvY7/VNnT6SsesMf13/CpahGnZzhjj+PPmwX2MYdDIfQexWyBAwEUOQDrRDN/98p3A7dvAO6fAA5sqHJDBEAyoUVGkwEd6HR12XU4kwzfl6fCXTZzjy57vvnR513X7Hj7AyDvggAUi9EyFgiZqNxPQF6345nOWbD1HQ/Y5fpvuLa/2+82/vNHgAPDFQDnhoF5j2C2qBWCI8bw1eRw5CL5l94L3DEOTI4DB8Y9OWmsEu/zBJ3rgsaybqBob/7A4C7jtWcooRrczr+u2fH2D0AOQgAUCxKEP7aGgLy64+m6KdjWFA9Yc/03/Osa4glrjr+AupqHz1sEs0cxG0BC9HIePLoit9eNkVf9L+DuUWByDJgaq4ybGYLPAWgiXmLedUE7dwC7saL7CqfPKXi4NYdaykCD410bAHlDEsNiwZ9wAPYbkJcfz6T2gm3N8YDZ9d/wHxUA+739fPwXPrSKYGb+BuP3jAFDElFH9HIWwbzCIGkBr/or4J4RYO8oMOW6ZVcAuvi1Cgoha04BCwT5gfMKHm7NoRde2+x41w5A3hQZkADk5+cGiAeMx3+/7AENFA8Yrv/G71cAXFM4Yzj+otOAaQLQA0gZxaIIZtMDFTigKJV8H9Iq6aZ59ZXAvSPAvpEKgBTtBODcSCWCZeRYtpzrmLyeGNCAyFl1v+Hei8qeb370Rdc2O97BAMi7EgB/2QG41nhAHU9LuWAbOB7Qr//GPRUA13r7Gv9FZwIMoVcEswEwfDoimEP0shKKtIphaZQAXv1+YM+wA3DEdcvRKkGJADQQEsQuhi1Tjt95vBsh5nx2IO59SsHDrTmUOStNjndwAAqEry0IyCMICkOyiuIBNwBvPFQQT7gBuPjc9oRYAIHyOEL4vIFEYVNaOou5vCGE/tV/A0wOVcnpzI47NOri3QFIBpSeaSDUdYLOSWvYImSGgftpJDa4MWJbAGxivGUA5MAOc0Be6eVLj7/4Mk+hzCOYPYpZDBiNkLh+G/M3yFyv/ltgL3W3YQfgcFUhgRY2PwY+Z7/EhAR1SFyXCOb57r28QfQBsJQBMn5D4y0HYLPje9Cd7RIC0PM3EiMofF4gVCBp1P840ix/gyz56r+vAMjk9Gl375iB4+CzveuZdLkkEPJ8ZEfX/6R73vOjzT5Si9hucLxHAVg4PwJgRwh9CKOXK8YA4ZEqKZXSQWh5P+5AftXfA/uGKvYjCKn72cctbFrZNECka5L5CPwIPtMH3TVz17MLB5gdLgA2Nd6jACycHwLQxFEUSR5ASvARDB0h9AQb9bXIgCGk6lUfAPYTgEPAITKgg1BObk58srTJgG58WMkWMaAbQQT1nc8rHGANAJsc71EAFs4PAagQestgC1lsBJ4BMCSOK6dDUcwqqaFiQr/0QeAAAdjy+jBiQQeeMSBZT3nCPUDIa9z+/MIB1gCwyfEeBWDh/BCAeQSzgkjFfGLBBD5nxQ4DxN0wv3hVxX5TBGDwL5obxvVA5YqYL5BeMLd66YYxJpRB0gK+96LCAdYAsMnxHgVg4fwIgMrhUPKQ2C+Bz0PmBTqBMQehAbDlIjj4F80KJguSVZ0FuXpjoCOgXawLjALhbT9eOMAuAGxqvEcBWDg/l1IE05Ed0ygZnyHdz0VwCqEPIfNyx0QQvvLDFQCp+8nfZk5und8tXwIgWcHSNX0N2CJmnAl3v6RwgNnhl17T7HiPArBwfghAS7mV/hey2JS9FvM3BLpUUi1YwDRMXvkRYJoAlAh2l0dcZ04s6JUTDIjyBcrl4yDc/dLCAdYAsMnxHgVg4fxwKVwJgGEJNmWtxpQMpX9on2eRhVA+O56AjMfnP+e3Xvf3NwG4xIPTleiY55bpGh6UbafNU0l0z0p+5Jh5HqYJ6b51nP6XP8cx12XNHQVgIQB/bFPVg2OC7Q+WgVFWng/FvtWLI06uWh5oguKEcXVS/9sEAF//VGD7t4ETDgJbF4CNi8CGZWBs2fPL/H6Vwp2KEtVk4fJ+v/EIYPN9wKa5qu+IncfPwXHVZe/aOL3EbwS7xv8A1rQvnO0j8PArTgTGZ4BxFv9mIxhOCGsv+0OPYDRghcLfkWkEuq0+G00x4OtfDGz+d2DbHmDLjL8si8AYP/7CGIAiEEMTG92zXqSbH+d9R2aA0XnvO+JjthiIrOVDHHPOkBrzUQAWAPsZp3oPDpa/Xag6EVkLBK+5rAnJC3/nYk/APD704WiEAV8OTHwX2LQH2DgFbJgFNrBhjd8r79deGoEwsllgNBOzy8CdjweG9wBj08AIAci2D6HafmyAk4/Z7SJ72hGYRwFYAMDLTwOGp4FRFgD3HhzqRGQiyeurqOdG6r0Rm8IEZjzRlkiqCWoEgK8Axm4BJu4HJhyAbFhDxmbDGnZO4j0SgLGDkpibgEq66TJw/1nA0F5gdLpq+zDqFfd5LMeWqu5HNST0uJOIllg+qgMWgI+HPv0xwLA3gWHpW2sC441gCECbmKziaGrnUdMO4aHeh6MxAP4SMHI7ML4HGD8AjHvHJGNAgpDgY/ck3stipRemvVhc+uASMPUEYGh/9dIRgGx8Y+MNbR/00uVtH0wEx94j/v0oAxaA8Ed+GBieAYZZg5kADC0QWGOFzGJlcGPzl1BxNLXD8sk4xftwNAbA/wwM3wGMUmxOOQBnHXzetIYvibonmSiuYTNjriVg7glAiwBk0fNZH6+PmX9P6kfNmCXGpftJ7TgKwBIAnln14BAAYxMYm5C6RjCyCoOyr0qkD/c+HI0B8DXA8N3AyCQwesD1VQKH7EcASm1Q+y4CkN9pUKiVF5nLvy+fBbTUd8QBaH1HvNBROiZvfsNnrF4kcvPwpdsBLBeU18Nf7AB23Dp4ecHC8oBgUlJJecLS+7+WOpE3gbE+HKw+yoevCYkMGKqPJrdEKARutaFYRs1fiEZ0wP8CDN8LDO8FRqYq3W10pgKgfYLaYCzootgA6KXaTA90y374TKB1sBozy77xHFZ536utRgAmEaw6g5kUSFZwSXnA330qsOlfgHMPDlZesLA8IOjoLypPWHj/11EnCiVwkz7kAExtsGraYUWdSDX5TmsagL8KDBGA7Bd30JsW0oWivnEOQNP7yGTSBR101AlZSUtGyfgZDkCWY1HnJdcBVe6325hTvelg2CQjZNDygG/2An0j1wKnL6y9vGBheUC8prQ8YeH9X39OVQSc7Mc6fCaKvAeHdCIVf4yMYCynTpX+nb97NJmlSQb8r8DQHm9YOFUZTKOzoXGhs6AxF0HIexcLBvWBuiHN8s2ne98R3qc6L4Vyb2oBVjfm9MIFHbjDCh6kPOBbQoG+oW8CO5bWVl6wsDwgfr20PGHh/X/1iaEIuDcCTIW/1Q4rFv8OnYiW3c+W2iKwUjKbyjQNwL1uuR6sAEgDgq1brXOmV81PxhNB6DUDBSYzQJwFtz623XcktX1Q1VWKaTF/zZhVazBVYA1tX5MazsGvobwe/jQr0Ne6BTh5uf/ygoXlAfG60vKEhff/rSe1i4DnTWDUACY1guFTDqLYdCBvf6DJYSMYATBfOx1kLfj1v1axH10nQ3Sd0GUkBnTfpemtBJgseIKQAHLQcVxa2TnuMW0Aqui5es8xBIegVdVVE8VhzHnLh65WMB9An+X18K6aAn2tO4ETl6vqbKuVFywsDwhevqg8YeH93/Rk70JE90nowxZbIJjvS3WYNSGUwGHJTpPxwwcbBuBrgRYBeKACn7VtpdUu/c0NJxO9BIxcKu4TTODzbkonPLoaL0vyUQRb2y8HsL1ckfWzMeuFi40Qezqi+yiPhyt7FOjr6/gCFwgP7Xb5vssTFt7/nQRg6MGRWmDRoeyTlpgw68GRTwgZgo1gGmXAX6/8dtaylSKY/koyID9BhzML3q1gAos2AcOrZYSoq/pJp1VtODRm9Z3LS/7WjVkvXOzEtOpKyGrlAT+4SoG+VY8vBGCvy/dVnrDw/vee65NBJiAjBIVcAJQjOm+DkCZEeiGAMw6sAwDZsJrAdhFM9rPGhd4904Co5oVuCZPV6kD40Ec6+9W8dBTBsfdc3nkpvnB82fp2RPcs79dHgb51LA9ofsDV6vut5/3PnxcAmLVBiDqgevDaJLkYrpuQxzcNwN8AWgIgRbB8loEBzXDwl4cGiDGft58SCOWGedgjvOJ+bPvgRkiuA+ZjzhnQQOiFNVbloa7l/fos0LdO5QENgEXlCfs8Qbf7HyMA3QVjYihYhLENgjX9y/qwxQmRU/asfd0ZcLU2CHVGyusJQLKfVi98CS12T5f7iECkHpsMkAhCF8+nshWH2I/jXsOYO144GV/9ApAIrS3vt4YCfetQHtAA2G+/4PW4/2PPbzMgmUMi2NoeSCRxIt2/FvuxWURIWCXg357gfTjEDNIHnTRXRCpH5ugKwGl3HpMBXQc0v6WLYVm/5limj04rG762K2uYY9jBkr9+rI03NL5ZbczS/dJ+LQyoga4o77fGAn0NlwdMAOy3vl/T938KAcj121z8Bn+Y9eWQJRz8Y6kNagDh2ey5EvxjxQD8TWdAuneCCO4An1vw5vdzQMmdktwq7pLZQR+dM34+ZumAxvY1Y04uqOAJ6FsExzeto7zfAAX6GiwPaLWR1lrfr8n7f/Rl3QGzmsis+/uO71V9OFgP2gpPhgr7TGRqRUT6dyvr4aIs/pm/2zVUNbBSv6G8e5pEv0Cvec7Po7+bTtjlBRlkvAMBkDeQyvsNWKCvofKACYBrre/X1P0/oWEAnnFD1YdjhtXxR73mX10FfCHHE9pVWcGAI/S0gKsfA2y+twrFZw6Hxf/F0Pk8Ri/kpGSnMuDx5T0iACgQHioo0NdAecBUHW6QdsV2/cL7v/Cyqr5gnc42CCOcfX1VIZ/V8We9IDmTzVXwPDJiXuKXPxtDBma8+lzP4WAgKkPxCUAPE4v5GzEuMX0PYJPLhB6FJsc7MAMmkVxaYC/K9gG+F1++8AQ7Gwbgk78I7GFpXgIwFiRXOwaJZPUbiR0yCUDRk+cHf+YpwMj9HgfI8ClGPyvsSiH0WSKRuYlitLb/zHM/JOSs5C/YIC9cMQDZr/dwxgOW9gtGYUBi0wA8l304vDQvAchilFbpIBQhZ7Ejq6ZQ0/Yhil8y4j89Axie9DAsD6FX9HOK3QtROTFkviN83kG4felIY8DCeLrSeMDSfsEovAECUFsTjHD+tcB+tkFgcXKvBRir7qtFl9owmO4Xy/1G3bAFfPrZHorFNWBFwHjQAFctIghj2kBarw06If/+MM9ZqTN6DgsDojCerjQesLRfMApvoGkAWh8Ob/tgAPSKWCp8ngNQtadjmTdltvNvn3peFYhgQQgh+iUmEaUAUoXM1yRLmWuFLaE9Z+XIAWBhPF1pPGBpv2AU3kDTALzwmqo6qtVh9kJErAudABia38TC5wJgS2xIhAwBn3yhByL4EhzXfRXxYsDTJ4IvrNN2JFMxZcBzVo4cABbG05XGA5b2C0bhDTQNQLZBYH1AVsQSAAU+imI1obHyblnjG/kJk3U8BHz8xVUQAhnQIl5CyNgKAGp5LKSSCoAySh5Jj79vTagcxUaIBeRNe79g9gq+DXig4wGzy+PONfT7RWFA4noAkGXZVAhcBckJQgNgrLiaNb3paIDo1vHHX+oA9LQBi4DxJcOUPJUnTgU2NJUyROs8irGARxQAC+PpCtsFd40H/AEf0gMQkLgeACT41PiGoLOKqyrJq3K/Ya9mNyr5FusN/uPLPIeDa8Bc+w3rtyl4VFHaMZc3i9RWBM9jjzgAFsbTFbYLRmm/YBTeQNMAtD4cBKDXBTQGdAB2MGBo8SCLmEuS1AFVAJ3A/NhPt0PoCcA8bSDG76XI7aySg6JYuGfKwJHFgH0E5B3ueMCe/Y4L+xVHAOZ+9EHcEgQgwbeiEYx6jwTdz4qfu7EhEJqxGqruf/RnHIAEnxgwBM0aC8aUAYWNBRCmoIll4HTqO122QcZbrgMWxtMVtgvuOx6wa7/jwhtoGoDWh4MBJ16WN4lfr8AqI0TVV1O1fa9BbQzovkAy4Ed+NgCQUSxZCFWvCOaOFREXyUwZOPIA2GdA3uGOB6wPaOz+QPv5S+MA3OXiN9aclghW+d3IgupBF2pPqxcxGenDPxfSRh2ASiKKiVP2PaZScvAKoA0VDc6cOlIB2GdA3uGOB1zR77iwX/F6AFB9ONSOQW0frA50sILVcckWJyIDSgwPAVcJgFbYuZ3FJvAlEHbJ3IsgJLGedeBIA+AAAXmHOx6wo99xYb/i9QKg2iAIfDJEJHqj4SExbEty0gkdhB/6P9oZbBZIGiKYVb9GKaN50lRHBLOvhDxh/5EKwDUG5B3ueMB2QGM/grb7/6wHAPNGMAY+GSGUjC52VX2f2CD4+HO0gqkZfegXKgBaHkcWtS0AWii9xG1ImrLlN5XR8L8fmQD05BVrmEENmpYSP9QX+KHiqj2/82+HqqDWwnbBRfGATdzAegGwru2DpRq7Mzq2fpAf0Nq0Rl2wBXzglZ4yUAPAmDSVWDBPHQjLcgTqOZ6zUvdKHh4ruDCerox/Dnu7YqwXAC1NI/QcEQuK6WK/kdgCTGC0PYAP/KIDMBgglq+hIkrOfsaCviLSofcJgJ5AdM7kkSaCj/HqQKVIGvD4swF8bcBjmzjsaQ2H5D/6acBd9wALB4DFWWB5AVherMp4GKIYEOp7+26UF0aSfT/xYuDG7wDjrIpAERytXf2vajj7ueryQXSFl10K/ON3gIWDwCLvjfGB8Z54O+Ee4ve6513uB2R1yzsqC+twbC8HcNVhfAeaBuDP/TvwtS3A/ePAIfYFVlPq2HHTuyulZCTlhbjhETF5yxTQGgPGhoHhIWC4VSXGD3n0tLkMHXHxu+YyB+MlPwDuZs5K6FlsbCzdVO9DuKfkHM8AEkP7B8fOkwDcD+B7np42+JkGOvKdAL4E4K8P0zvQdET0b14D3DgB3D0B7B8HZka9WzrD88N6sFm+YcUjrn7E1ZDvMtF9DBgeAYaHgSGB0PNHCD4BLwLRsByAyX/ij0/dDUxuqlIG5hix7eFhvLcOVUAtyPSydAFmOQNe6EYGV/9ZESiKgIEgtbaD/gHALQC4ovY5r5KwtjOU/XfTAHzzLuCmIeDuMWDvKHBwpMoN0WQzNtAaYSs0K4ZlOSAjGG9kPjCBRwZ0ABKEBJexYAZEAU3A7Oi1BeDym4EDnjQ1TwCGWMW8MXcKks0YOyZNlQOQjcgYIUHllEzYQ0ktm+r6oz8G4F4AXwXwRd8/kO9A0wB8y65KmPxgGJgcqYJTKYpTv2CCzyddQJRDOjKivn+Deh8BF8BnwBtaCUA+YYEyAU8h+c6Az9gNHHRmrgOgmDA3jHQ+iWupCeUAvNSrA9HNwqx+muk9nJVNg/CTfrmbAPwbgK8D+PcHkIibjob5o13A3XypWsAkG1cPA9PDFQDZM1id0i1KxsWfOrKnAFXlifCFFMMRcASigOcs2MGAIfE9iWXplS6On7UbmPaUUTXQrgsVMzcRj5Folg2V5ayUA5BWYKwOxKUafnosWjcJwk+7W5F2EKvlE3xcXaNYfiCYsGkA/smuqug6hcleAnAImPbO6YwRpMgjCAVAm/yQmKTv5hNsAf/i7SyNBSl2a8Qv/4/M1yF+BZSYlNQCnnVrpbC+mToAACAASURBVJcaI7sOSEY2NpaDXLqpR+vE/OVksDgImgGgghHoYJbTWc7oJtFWc65/cg2AYvh2ALsB3AzgVv95nS/f4QdsIkT9T3cBrGtITWZfC5hqtQHInsEGQn3UDDvEDEY/ICf7SxMOrAg8T+c00JGkvHGd2DABUYZIAONzCUDppCFhSukCBsLQrFtZe/IixYQpSyEoJoqnuPWrVRAubQh83HNlZB23z7j1ywmj6CIIqUPxw2Xeu9bx2jx10wz4Z7sqTYZaDD8EIDuoE3hMVEphWg66JIp90k0sBxBcy+iPIIaT1RtEsHS/yIAqw+VSNPWQfe5tlVEk8auXgVa5BUsEJuT5uoliAbE5AGotmIAjCPnR9xDG3TQernYAUupTdBGEFMf83OkApHG+XlvTAPwfuyrgSZOhas3u6cwTsUBVn2gTwyFMi8wjHZAA1M9fYGHDULJD1m8Cpa8fRxDad+l+Ykf/3XNvd11U+qiL39SxXevSsshdDFvgbI1O2AwAtRZMZzTBRuDFjxe1Xg8QEIB8yyj5yYIUxfQIkfkIRnmHCM712JoG4FsdgHHp3ACoMH2G6jM4lWzoQarSvwQ6MSB/vporVaFkh+mCLlpVR8Z+dqDZLoDOpHSiQeAFDkBjPrlgCHgCUaFifg67H/9uYjn4Ai1vpTERTAASBaoQJBAKeNqHlL6mwPDZYAOROag/EYRkPX34MwHIvzW9rQcA+TLpI22G7EcQKlJGsYIJhC6ClUMiXfBTbFUQAej6nPS/OuAl9pOOqIc2BLzg++3VmWgIEUz82cRuCAtLIHQQm0gO52uOAb22sC3JEWgRfPpZf2sQBQIgLydPEIFGwPEj8MlF2bSbsulghLftqsCXq9HGgHysznrGgi5qzTUTFH8FLhAUn3hIJwCN0HLncw37qaF2zoYvuKNivmQIuUNc7GvWt6sHNs26twA6vhyq8NEMAHlyntFrDCcQehyaPTl+FwAbXDcmAKMRThakEk8Q8kPg8SPL0qzLBl+A9QCgR6uZGs3vfHz8TtBZvkgGQrEPBVAUg2Sij50QAOjiVKI3saADJRm7dSLYWfSFDkCem/dhZeMy9pPY5QvSDYQyUJoDIK8qMezh3wY6fSL49PcGgCAA8pScJLIgAUYQEmz8RPA17StvGoBv39W24eREiBoNQSgWNI1HBkdgxJSw1AI+dFIbgOYmkjimQ1r6XXC3rAbCHycAgytohf8vsB/r2KRaRq7zpZ+D37HMX0s3DDcCUGLYaw53MJ4YUODzusqlGCQAOQCejuxA8UULUkxIwAmMAp8Wa3qkN/R9W+sBwOhIEPjk5SLr8HeKFbTQfb77csPIMHGl/4MPbReslPhNe4+MiTpi9AFGV4nI7MfvagNQLh/pfrYnDAS8aJQ42A2w4em2cAyWQUuJVQTGWLs1uL7DG9J1RjhA+jvYk4t3KXeMqijpzrud4At9z3XtP16yGfjKZmCGooYh1tZzvv8xXPFl4PoJYC97k9FlwZWD+Azi/deMZWeP13eQCGEyoERudChIjbb3mJYwH7V0QIKuCwj/gfMj0asn2I0FXRSHXfL/iRkNgLyeVj8ccMY//J1fyxzTAXT2+xoQViKYD/1hDqLxPiYxTgSvQrphphG97tz4Slqafnj7uk1kIQDZrvWTw8B3jwEW+RLxPgSiCERdPwPR7+wCPg/gulFgfruDkOMQkFc5x84e708JAMmCuRNBXi4TIg5CGRzGiBGE/D4E/C2r2vcAYJoify62i0aJSMhB+2IHoNwu0fkcjQ85pu3ack5nIBREqneYFyWLkAXIJHESe00Cyx5QyeL6F/tyEcDcrOW2n7fX8df0mME+/vQ/PQjhoy3gzo3AISYf80MQaQx1peH9wb7v2mrtmCBkIMMejp3jIJD1MsaxaMZ8v5N/67INAsB3BAYU4JL4DSo1J15AFPAEwuQHZJzkKfUAtOHLJSOQRWndBYQvCQA01cfnNopfsaCJaD2baBn79QjSTiOEP1EcawIpkq2kegBTNgHWEpOKF8Uwq2NRFPM4AqCf46/rA2U9/uVDvurB01zvAJpiiwOl3fEeciCGF+Ij11f+QkbSfMPfIzqw57mEFZ9Dl3Ps5HXWAYByHJAJKV7N+s0cCQQhwSlfm4lGZ0KB8C/rABgZUS6ZHITBSEhCowUYAAksF7cStWREyxRwtuPpOlgw+5s9sq6OaIJIIlUgEhA1edoTgHxa9HVw5jibZNF+j/9yGQA/7pbujZ4bwv2+cWB6tFo0NzYnkxFA+cvEAo43VBoEo2e+48EMXEOmD9F6xhCE8RwZEJ80VblKvDlmzwicfqy93/o+8K8TwB2jVSgW138FrJQTXBNlnJgmrjZwanow9CBP/rL9wF0jwAGWDtFyoN9PHutnIHT05mPXz93dMGQAPniJsjiBXiTbxDZFMF9NLUPQxKR5qezz1Y6/YZDH0D6GkdAkYJIvRalAdHAMmPZoYhb6NhDWvEyf/ma737CXN7R1ZC7hUbPgcFgqt/ZZjADnM1xqEVhYBpb4CUk5UsL7jQvj///5buDrLeCOEeD+YQchYwG9VIfyg1NaZszFiCH6DkRGLze5/dgk8IMWcMCjdCiCzR8od1B8OTwvJM8JEShFut1fzMhi+eRJr6LI7hYP2M/xVLwKNoZjUTwRMAQQmYyhWGQxsSADOflZ4kukj7PhZ75bETjBpkAGahMkcrGgwhsXeCyBHBj1wmOBQwvAwqKzoFeRV8ZaerjKYAuirmPY/o9X7q5Cyr7fAvYMAftCPGAEoYlBiVtFwLjtp2U4irj7yOANbi+crHyrfCbTquJV44O0F1FrwQGIMZFqdQDyP/gGSZ8TC0ZRRsOlVzzgasd/u+zpMByLehAfCgMQCDyGZJHFCCgLZ2f8mgI5qauEcVx9e5vACTgCTwEMWr5TdIpWKJb5MvrnoocDswvAPAG4VLGg6UKeqmi4iuDz4er30oX0FP7u5moMvIf7W8B+jwlUNAzFnlZCIhvGFRCeWzrgXSSIBreXTFZSgVLHAp4UHOFuociEEsn2PJwl/XEk0dzfSojeerFg1IOo5BKAveIBex1P67lgUzgWQaJwLAKRH04i14ItgDKEtGsRnWx49b2Vkk9wUefTGrKCF7R0JxZMqxN8cmPAxWcAcxGABKEAKPA5u9lEaAbCmKMI+sDN1X3z+ro24wEZFc0VEE64ABgT180PF9ZdBcDb6JpqcPtPk+1ACbmKjJnllwyuILunEAWjZHkBsrsRUnfD0qEiC5IJfyisgMhzWhcP2O14Ro4WbASgAMQJ48SJwchmBCDFa8qpyBbSP7OvU4PQ0p2W7+LSnSJUFOrI4V7w5IoBTQQTfJ6oTSYk2mQcpGRyH2syGjIF6EM3V/fM++C1CfwUExhCsmzCaQT43lZC3e1hBpEHh36XEqrB7Scmq5dV0XZxmV8WuDFzAF9iwhow9seAGoBcGtKjqAc+1l9rLb/1igesO55ysmCrC8ei6IxRMAKTWNBi6Xw98xNTFUi0jEcmpYgRAPhddpVi9OIEPP5cYD4CcLkCooHPwaW9kV+iwWrQHT8uA1fd3F7DFvgUHUP2k8jTiogAqLoxFpDgbMj9jXSuN7i9dLIdaxzBp5XVBMIMgFEnFAPKT9qPd6A9BIGI7MfPmf4U+40HzI8nWgq2PBxL4FEkjKJixGRRFyQQPzzd1iAUzCAQas1YOmAEoFjwkecDC/PAwhKw6CxIkCXwOdVJLxTobMjBdyIgfvimNvNJ7Evf4jWtdnRYD1YNGVuG93VWuWs4Jf+mlZCCZxwP/cnJ6mXVKk2+tK8lQQVHRTGc64SDAZB3Ey3JcxyACkToJx4wHl+YwqloGDICmYmTFgMQFBET8yyYzyAG/AfWX8mCGQg0BTRoHwt9KVaPE/HQ890AIfgWK+CRAaMRYnVdxHbhdY8Wslw1V93UDsmPIj9GxgiAioRRMIJNvoti+SW/Ikd0gwAU8+XxJcbGITJPDvI6XdCFREFSknTB83xka40H1PGF9dnycCxFwygkK0bASJQSVAbAYeD98xUAe5U3jKIwBosSgNsuABYogl3/IwgFPrOIg1Xc4ZrpAsSrvruykl2ucykapkMMh4CExD5DwJfWAYAxwk4MKPAJgOIjGSEGwuCakRhemw6Yv0UUwRf7L00L9pnsNx6Qx4feY4O8pDEcixOjsoTKKpMYjSFYYjOC8Eq3Wnnr0YYS+0Tmi2HysrPGLqwASNYzBnT2Mz2QD91laxLB0gs12GAh81cf/o/OcHyJ+qj0S/zxnhUZbSyYWaL8+Rq2S29wowiWkJPan4MvgrDDGAlRe7KIywDIgR3meEDWg9HbJgApNTkXo8o0i7oVgxnEgFr8F7jEdnU5GvqfJQKQKyEOPlsNIQvyvupAGHS/Okv4qv9oh+PHxMLk8ggBCRxvAmEN+AiEzz2iQfQBeNmkh4K52hJBKOaNe/FSLobLRXCz43rQnu2yi9oMSMDxs2jo8303ERz1wsCGZECF4kd3DwEYYwJjhoNlQrgIjlYodbBPrwMAZfEmyzcIv27gs6XDzC/IR1DOgA9a6DRz4wZAsZ+LYXvQYsHoD4ziOFklna6YD3+nnU6dZ7bGDAcBUImIAmEUw/zbJ1i/scGNDJiLXmle3RhQ+l/aq57gUQCWzwwBKPeLsZ/LFrGg/ShRXAe64Ajkv30kALAjF8R11Dy3K7KRwJcsUTaqWScARou3w/INVnCH+A36n8RvM3nB5XP4oD6DATBYwGb5ajlOLOh6X8JaBKRG77+7ygGYp1bn+V25/01AzBnwQ1ypanD7KWfA1QDYC3zJIj7KgOUzc9nFbetX/r+O5biwNhyX5uSEDr5o0xsJwLp8/m4A7GaJUv/j3/5+HQFYJ3oFPPkho/hNeqBcMkcB2BAA6XrxmMBkfFAci/m0JpwzXw0TXvXtzrz+PKc/Ml/ugzM9MDqCAbz/keVjjGcQA/YLvjoguo1mRslRI6RwfsiA5nqhL5D6nscF8gfTdfxpS+/hLzvWfzMQCoB1Fq/8b3VWaPIDZqsRV64DALsZHVHs1gEvsqFAeBSApQC8pHK90Oql4UEAyvCwNeGcBXNLOPMLftgZsI75ouUr9ousp2TEyIJ/sU4AzC1e+WIFshyAHPZREVwItrrD3wGAhibTYBhxVpe/xePyrNBuWaoNp3DgFwC81O+RAepK/a5Lfe51jxr7JwA83nPXYgq1asl0yX5N48+f4VEGLATlK1vAo5YB1gBSRmsM+NFE57lcfPD5pPFWCJImtyvGgGfOAacBYO59zFglgHgPefZsXV6/gPXBYeC0RVgyJNOGYuJjPka9eHWgjL9bWzhWk0/n/wPn+k8bgFNmgYcsVflZnBRmIShtJM/m7JGibGBoOIIez9wKPP4AcNpylfbNlGfdI+9NjBjz8JVzppckZuJ+dBw4aQ44drk6j1LIY9JkPD7P4s2lwVEGLHwJnncscNIh4Nh5YMsSsHm5ndOu1BGFThJ8/K6JrZtoslST2+XHA6ftB05ZAE5crgAups5TfaL6EF+UyIif3gAcOwtsXep82eIYY9JkXpMgMp/AeZQBC2b8OduBYw8C2+aALQvARgJwGZhY7swEzbNa88IRvAVO1qkF91J36DNOBE7eD2yfB45fqphLnevzdGeBKBfL8UX5/CZgyyyweRHYsFwxYHzRNK6oetSBMDLjUQAWTPqPngpsnQK2zgKbCMAlYMMSME4ALrcnR6JYQIwsoUnjpDRstOLy7cBJB4CHUGwuAtuW2nUDVH1EFUhycSwWjGD64mZg0xywcaECoI0z5P3X5P6nWlHdgHgUgAUAfOYOYMtBYNMssHEe2LgITBCADkIzSJZXpCOnIg25uPrhgnupO/TyhwLHHwSOmwW2LVSik2pCrDsQskzNIBGIpBdGI+VfNgMb5oENCxX4yPRjPj4xaJ0+WGeEHRXBDUz2Mx4FbDoIbJypADixUAFwzAFI8KUJChMV2SUaAGc1cE/xFJef3FYRti64nkqWDrqqEhbrsm5zvZCdPCd8nHzJOLZuABRz9hTHZwPL7LnLnoNMIY2VyaKcjtZLHOAbNgNPngKe4BacfGF1pnydD+hphQ/8XV5UiEueLGnDN1tWXj/3/4cTwAUzwGPcRcFJiDpPt3FLmf5vjwE2HAQ2zPrEzDv7OQg5OSM+ScYQy5Xbo8465u/ZfLTJ7fKHAdumKxVh8wKwealSE6inEoSy2MWCdbUHIghv3AqMzwHji9VLZuDzD8cXxxWZs5c7apmW0fMBnIHKn5X7d6I5npvRz94O7LgXuGIReJSb+Xl1tzqflybwRwqf9i97BQRWomWJQ7oZVFtJoqDX/b/oGODsvcBTATB9gsfGqmzdjtVz+G+PAyamgYmZCoDjFE2anCVg1CeJwOMnTRB/DmUINVkkgia3y08BtkwDW+YqAFJFMD1VAAw6XG61R31O9/fdrcDYPDDmY0zjc1UjivBuAMx1QdMB+WAYXU8dhEU16dOSkppbcHFSrng8MHwnsGMPcN5ypURHp2xMIa7zDz2z8Gn/kVe0YomO0wEwBYKujL7v/zHA6C3AxfOVh58g5AsZxx4fZM7sf3h6BcDxWWeGBZ+cMEFiwGEHHRnDzun7ONHs/djkRgBunql0VDOSHIDU3cxSD4aEajhFXS4H4S1bgVGN0V8we7E0Fh9jVDG6Obr1LJMRwn+kOCaTEYT0dsfqZHXl/p7PrLi9wIY7gO0H2yAgCAWCWCowKrYE8nMLn/a7PQn9X7zIJPPkCcK+758y7x7guNsB6l98gZjLLYet3Ay5n0sv4R+fCYxPA2MOwLEAQLIDPyP8uBg2cRYmzFweAYilKkn+OC8/Fdh0CNhEA4nGA40kd6FES13WLO8v1qHKAfh9B+DoYjU2Ak/js/8NAIwg7OUb7LCC+WAfB4CpBJoIiTRNRmS1l13kqWh3Adv2A8cdqqp1MB+aIOSxWv6pq5D2kkIAvt8rF7BLJksN/jMqfa7v+7/Ak4B3A6ceqpasKMq5akAmlLWY37t8ZW97PDB2qALg2BxgAFwANEGcnI5JcrDZRPlkaXL4u1KJUAfAjbTQ59x6dSvdLPXAgGYshZWR6JIRaXB/NwFI8C1WwLMXzMeSwLfcXuKrA2G+wrLCDcN/IIg4ERRn0qvyySAQX6mG1XuA4fuAbTOVwktRRr2MLCoQyvEZ/UY/WwjAj3jtFJZkU79g1ghkgEBf98+0Umb/3A2M3lkBl/fOcdMok2EjkZyv8773LAfgHDDKjwNwxEUw9yailpwdxBAEYhBbAuGzG3aKkQEJwAkCkOCjlb7Y6SYyf2UwlAS+vKYnAXjfNmDEX7DEfA5CjUcsnzvbu1nDtUMmCDkRZEEyGdlAk6G6lQTSa6m0MP6HuY73AxNTlcJLZ6WOJYC5/CNxLpHMgdKIKNl69Qvu6/75AjHOiTU87gKOOViJb748BKCWrnK/maTA+58AjM0Ao7PA6Lx/xBAupoYDC9okBRAmPdBZ47lNA/DhwMRsxX7mPgl+SrmK5EaRNRslXFQ9CKB9DkADn79cZtkHFkysJ103eBbqlh97DpmTQTYgk9VNxu+xYbXKU3lhFoJPOgdFGY+lPkgQxokkgF9Xgj4AvfoFs84eX4Ke9x9fIC+tRfDxvvniif358sSir2LCj5wNjBKAc8CIi2AxxLCzIAGY9L7AhGIKgpATw4l8wToB0JjPrfTkp+SLQbHrOqm5jNyajS6VCMIpApDAWwQ4LrGgXqzIfnq5cv0vN0ZXHTInME5GBNLb1DGdOYQsI7AfGKFjlgqve8wJwG4T+fuFAFytXzCLb+VgWnH/fIGYfc46Hs7iHC8ZkPcdXx4VfVXJw8+cA4wIgM6AHSLKWZCTESfLfg7WsIyRF3ckiRQ+HACXkwHptyP4KHrpJvKVGnOhRF9eBF9wE0mUEogz2wC+WGI/vVxiQQIxAs9+rmHA6E1YFYB8DJwQMZl0OrLZ++i7sfT8zroYHLS9df4RACWKxSZvLXzG/fQLZqk2gqn2/vUCUQ9UZaM9wDaPeSPrC4A5C1KV+NITKwCS/SiCR/jRBDlLmP7nHynsxno1IPwJSyRpbiMADXzuPDYfZfBTEoAmcuVQdiaW0zwXwQsCYDYmMaDA1wG8TBSvaoR0G77EcGSET6hjOvVApfRPAUN0zjr45JzVcSqiTxD+VeGzXku/4Nr7JwDJOkxFIwt6j6+RqUrlkO4bXzp1gCAAv04AzgLDDsBhKugLFUvQUhTwCEKbnKCw14HwJ9cDgGQ9WegRgDI8XEcVEDvAl7lVlglAgi+I4CR+Zf1mLGgMmDFhBGFfDCicRJFERviSABjLS7FC0MFKMU+07wOPE0kGvaoQgGvtF9z1/iODkwn3VWoEXxres5ib9xx1wZufBAwLgAQexbAD0JiQwJOuJBA68/H3Zhk6+3CifqqwWNMKN8wjKgbk6gWJgC+FMaBb5vJVmsUbV2vCqo3cRWZcCIACoax53+ulkqNd7iqOcU1WcC9cxEm5kQBUdZ+sTnSL/jEtTWngi21jhJNJBivZBukXvOL+yYBkcOqxKjJ4AGgxzMrBVwdAMmHrZOAYF2l6y/mwV6xD17zmWo6MbRyeWtOHwxJ91IIhr6rqZS70DPPLXDVUrfBwzHKr1EUp6/h0T/6L/GcCqslt4IhoTcwdAqDSs7I60WQH6R329pHuFyuXDJmEjuOSbdB+wSvuP5bGUjmsA5XoUvcvBXKKAQnApUdXwah0b8jXR2YzJTsC0ZHB33FL+2yiX3h/1YeD1fFZGT81g/H6yqkVa9YEpqMhTADle8erHA6t7Mh6j4ZBXdBGjFyO4CSIm9wGBiBvgqxwIAJQlXIyEJLyI/i0SkAG/FbhaEr6BXfcv+5dLKhCg4z1C1HEBJ8+BODQGZXfk/quAZC6ketAZEQCTWAU8PIJt0fgwHzZvVWNaKqi7JLOmtDWFy42g1FxH/XfqGkII0C+a0tnDkfsGxQjn3VPsk7tXmuy+Xp0JhtoJosAaFcUAJUYKiYJxcqHqKAH9rPlG2cMrmCUbMX9guMLpGTcCMKDlZGhMK8IPnPIn1X5PA2AwegwEEYmDGBMjOI5whGQP3NPBT7VJlRNaKvF4t2IWHbDErtDlSk1p4lJ7/zd246tglGZryIfrFhQ7pU8WCAX0ZENG+57U14Z4YrCeLrSxXdev6TfLwrbxT7znMrfKQXfHLQCnyvmRIv0Q3430ezMmL98P393G3wqz6am1NYzzoGn+svqRmTAU2citctqAX/2EI8F9ACEmLHXLZGoFxtSl2xyK2bAYwrj6Xr12+1noL/jUTCD9vvFrn6u0v1/nvGkaoVBAQi0eummMAuXQHMWJAA7gCixG8U0gFfcXdlBKk4Z6zELgAJfZEKrxpC1xOIl/+Sk7jkcdYlSco90y9+gK6vJrRiADD0piad7RuFo3udNCgft94vCdrGXn+tujgV3QAcHLcFnroelivHkchEL8ue0uQ74S3eubAITS3IQhKkMRjBMokgWG3L//2z3VSnP4VDgQWxUEEUxAZFHL0eR3HDfm3IRbDHkBfF0zy4EIKNhSvr9goGEBdvTz/MIYQLQdVsTwRTFDj5jQmdArRDYJQNDSs961R3tPhx5NXoVgoxleHnarjohgLec3D2HI492yQNvIwvqO9fJm9zKGbAwnu6FhaP5pFuMg/b7tTbpBdvTz68cz/zI8azVj8iAHTqgmFHXDUB89R2dtaC7tUGw4kDOgFb0R2wYRDGZ8g9O8aU4XwPOczhiwGlMjqqLWiFYGu570wADFsbTvaxg8nkow7E8nM/atfKzln6/1mS4YHv6BQ4+Z0BbqHcd0NwwYbVD3+1yWhXJxPBrbq8AqE/XApSqAxiBV2MZ/54DMOZwKE00rnDUWcR5KiV/brjtSAMALIyn+/mCyeehjIYp6fdrvVELth8RAClyHXxmhPi6r1m8FM0ucgk8+y4RHC1kAK/5XgW+2hZYofafWcPq1B5AqDqEYsQ3nepR2gqhV2yiol1COkD0C+aOaoGx4aL7DQCwMJ7uVwomn4fm7VrX2u/XAlELth+5sHPtN+l/Ap6sX2dCsZ/phZkIJgv9l++1wbcq+2WFv2NXIjNKAPzuw7MUAV8DTuynFIEsQy83RgTAhiv+NgBABaQOGE/3mwWTLwAqHnaQfr9GnwUbARgDNBUlkpzQboyYCyYDYdILdf0l4NduW9kGoa4geNdazLElKoA3Prx7DofiETtC6XvE7hGEzJlpcis3Qgrj6d5UOJoYDcMglrX2+y0NPtl5UZUjkfx/Hqbecoe0OZzdF1gHQrln9Bhee4s3f3Zxm4MvAk9VSFdUIw0i+Q2PaBtISiBSSFgCYMjMW00MP7pwvvLDmwFgQTzdHxcOSGvBg/b7ZRZByWYAlOERluKM3Ra9CKWc0q73dTBhMFT4ZwIw9l5Lrpes+HjeBiGCUOKXeuBvPcKTiEIOR0f+RhDBMYi0Lhea4GTaa5NbOQAVDzhgPB1La5RssV3rIP1+7yy5OAADoAchEHBkFbKfGRpiweAPtMs5IFNokyOGk/7rAYC9OhBFwNXVY1at5tftCBHaWVS2AJdEcEinrDNC+Lumiyc1B8AB4+muLARAXTDCWvr93lR4/Z0Xt6ODFQkj8WtumEwHTKDLQejAfN3uds/dfjoQdatGLxb8jQBAYz6/boxiFgAVudzNIc2/s3xLk1szAORoB4yn+2DhaATAGJCtbpkCYq9+v4V+aBgAQ4i66XtaC85YkDog/zdZvzUgfN1N7a633Xqv6fe9msDIHfNaB6Ay2JRE1AHAEDIfI5nzZCLeN4Nbm9yaA+CA8XSsul6yqV0rJ2WQfr+splCyCYBR/HJyKX4phs0PKBZ0lqOYTpvniAiUAmAd+HKjo1cvDjHgr+3wPJQsVCymUZrPMuRsRBDG4AQCsunyJtFGHwAAIABJREFUcc0BUJlxQoH62q8ST8cggpKNAFRGwCD9fkuvbwAkyGgJE3C+Nz1P1q9/T3F1EZBxvZh50s6AEYC5yyUHXt5/Q8zI5/KrAmAIkkipkyGPYwXz1aRT8v5ZO6jJrRyAvKOvNXlLazsXs9bo/ztc29Pohgotp5J49Rcj/pzfIwGS//3OM4CNd1dpntQpFUmjEH4LYIgnyn/OLjL8FeDGhwJbNgFjI8DIEDA8BAy1PFK7FSKf43cNKrvHx+8C/vmxwMgmYHgEaA35J0StpvvzL/nP8RbLAfhyT207TChgDRiu/ZL9DsfWNABvYzbhCDBKoBAk/pEobGWTqp819hzQ1/0k0PoaMDEJbJjxVZFgDad0SaUO5LksWVj+XScDmw5UEUDJ6U4d0nVbC91S3ovfVHp5al64cgC+k7mZAP768KCA0WD3A/ieLz090CDceVmlAuhBljLgrfcAw6PAyDAwPFwBkCAbItM4a/FiNtERjBl76W9ffD2AbwJDdwFj+6syImRXrd5Y2FjIYcnzWPLEqnsfC0zsr6qBMQmfIDR/pyJ6xMhKyMrSDiKD2xja6TADTt0/AGAs1KcAUCFrOLF6tbtiRVFavT/wuMCa7MfVTlH098YBeBcwNAIMEYAUlS4uBULOmK3LCnwOPANlEIOSoF9+C4DvVoWXhvdWZVOYqWgi3vOXDUQhgieB0EElViMYJ08HxqeqnG8D4IIDkAzo51DKQQJvBKUmKACzbM4+5hUivwrgiwC4LzvjmgCh6nBcgiMTcv9Abo0D8E6g5eCjfpUA6AxoQIzgi8ALmWwC4z//DxcPPwBak8DQFDB8yJPpPZHeGCyC0KN5DFCByfh9/+OAsekKgEzCTwD047X0SCPM1IYQjCv2E/MJoGVwUUQoPboq0MdqkWVn7RtDDMahB4g+P6qhXFpjVtkDtRGA2nKjos7IyOyHFUbIrXe0FXsTuzIYfNb4O2M3ATGIYQOmPn6hG6gi3eUkQQAeAIYOAUOzALMVh2pAlESqGFBAXAYOMQVjxll03iO/yYKRAT0FQXkwZkjp1pz51LO2XAT3KtD3AIAwj4Wg05kfiuUHYlsXAJLVnP0INLM0OYFx78AzcRySeTsw2AJueI+Dj2Fne4EWKz5MA0MzDkCCkAByUWqsJzarEanzj2zXwjEGFHuGY+pYsMojzZL1G9EBexXou339IRBrC3lJGmNDuSHX+w7WC4Cm6wWxm8DngLTImgC8pBcGBuTXf/1fXnyTugnFwxTQOgi0CECyIFlsvvJfEnh0mhsYI/s5uxFYi1xZof7oOqSAawwYjRGBzYGXbtWXaCIrlvHUagX6SP/ruMVYCEbEqECXAMjfree2HgA0ESur1/0vtnNwGSsG0RsZME20/+/XWH6Mugk/yngPAGy5GDYALjiIHIgRUIrsZjM7Ax+BSx1S4pfffQVIep8dL7dMDsTGjJB+CvQxTHmdtrw4l0CovFruC2NOe975egDQsCXRK/eK634JhBK90q2C7I1i+Gt0jxF40k1cPJAB7UP2m3MGJAAFQrGei9iUTH9yBUDTHfU3B5+BOIKQ43BWtNtPcWIOzEZE8FoK9K0DCGNxLi3FqaKA9gTgeoFwPQAoI0OulWT11oEwiFz7cwbErzNxWtEYBB+VY76Vh4DWrH8IOoGQ7Ocg1CqMRLPltmxvs1/SHaP4dcAJePYyyUCRIzrTB8tE8FoL9DUMwl61kQQ87Rmy2PS2rgB0a1ci18RudEJH57OsY02y/+83/sZdBKr4FXQTApBvprGgQCg9UEAM+h9F6ugJDkC3gJPBEvRGrYoYCBX9IxEcS5K4i6cZAHIw8oXQ4mLBb35YH5d7OekadtTV1UZSjaEIPH4nQzYNwgjAHNwDuWGYpZc7lzPfX1cQur5oBorfzDf+zi0yVTuSkuxBI2Q+PhQDIUEnMLo1TBCZLufGw/ixbQa0KB8CTODjPohdY78IQmfDjmW7Yo/doAX6GqIiAtDHaYswSmeMubV81kp11L6hy2PdAcgblfslOKC1IiKRmyRxZgV/8++DS8BFrxXi5Hd/U6MeSKdqEsEKhpBRsgRMbAtuG4KU/+9ry5brzP/lPVMv1EPOQegharrVcgZUhVHFxNPcp9VFtlOWkL437C0WABWypFRGsV0sb5Hn2zYBwvUGoKl10v1knDgo0y7XA8Pfv0UACnjaK33Co9gJQAOe64FkNvtZAHQdjz9v2Nz2GSa3jYej2W3KGuZ9ixGdIVSoKT13B2s5AHkGheST6qn0erHv5AIgAAU+LVfw/wq3CEAV7clBKDDGZG9/5oVXx/oyYARczcqH5GyH8eFplTawFvAtrtXLGpNrQDGbejupB3omlIHQGc/ErzOcGSRs8zrhAbbuL1Tco/JfbLlNwHOmi2kIcs3owbdwNpYtynDQhsFcgvuG9/YapGFvYX22zZcAU0/GwA2LJ/4AmGF9mwEbBu98Y3cMF+uAGQCj2HVp3BbPuo3IlqxAy5wHAq4OfARmEBXGfNIBa0BIsG0ecwC67merHgRpZLwocrWaovuTxew/V0txJQ2DWeae3WAGbdhb2DB4+wRw7w5g8Qpv88liyGtoWHzMi4C9fAEHbBi8kwUKu2xNAdBxaGBLbJdZux1LwAGECYAEm6wyfpelJrEgFnRDxESwgyUxIUsVMwjVy5AYO0bG89Auu1/5BF38KqjBHlUAYXsteNCGwTeWNuwtk4JMkrlzGNizA1hm69g1Nix+zDOBW0aBeRZZGqBh8M4emfWNADDT+zqMjQyESdQFHfDbZECCLRgdHeCTe8CBaKJY1rDnBRCIAuGW4TYAZeFG8ZuMkGiQ1IEwGCJtHZBmy1obBsvVMnDD3jIAerti3LEBOMjGcOpa3WfD4ic9t6oveDtLfw7QMHjnH6wPAybW6yaG4+8D4HIQfvtDIVtLejpBFsVvUI7NIBHw3DUjRzL3rDVtsYPOkAScuX3coNDynT2VYJCkn+PjqvUD8hVbS8NgjphGxcANe8sAGNoVY/824BCBtIaGxRe8pLKZdpMkTvXiJ2toGHzSNHDPScAyq3er4qPyGaNc7JCRXWLT2TjwGmCOeQashq6+qSpZmp8vojQpheF58ncdZVjLnjWPHr4VWKTKxrHGUqq97qXu3jp0wPy+eEC/DYNZsZAO6IEb9pY9lNCuGPcNV830ZmkM9dmw+OKfbdcXvJMPdY0Ng0/7GnDXKcDMccBS7MwdKz8KCAKQIgY0MWGCtr4TOHAasMwOkTqf6unyuLykfd254nkb7qsw/iVg7jhgmSX31Vpd9yRHeLx+zRhjEGRbB6wDYT8NdymyubzDzCCGfpMJWfSRYfr9HP/aMgBm7YoxNQHMbQHm+ID6aFh8yS93tAvGQb7da2gYfPoXgbtPAqaPA+a3AEubgGU1RM6B060fgkRoCzj+TcD+04CFE4BldZdRc4/YxlxgjJMewSiwN1zWfsOngdljq3EmY08vm5i/7j5yIMqpvupKyGoNg9lngYosl9wY/0dZdrMzYl8Ne8sAWNOu2MA3zw/F2CoNiy99XbvftrcLriz6PhsGn3U9cM9xMODObQYWCMANwPJ49UliuW6SaqqBn/gGYP8pwPyJwNIxwDK76ahDeN6uXYCuYyABkEza4LbpY5WEWdSLxjF26/dQB0SJ6r4ByAN6NQxmkWcqrnQ00x1DEDJFjR8CcNWGvWVPp6ZdMQ6OVOCb3wAscPJ6NCy+7PerkP5Q3tBY1PrT9tEw+JwbgPu2AlNbgVkCcCOwtAFYcgAuiwWlM/XqDjMEbP9t4MB2YO54YJFMo/5gHIcALV1TRZ17FXOhPtvgtvkqf9H4kvHDlyKK4l6VzvVSBF22uwjOb7pbw+CfcwBSkyeFEHAUx/yw9JTyEbo27C17Ol3aFWNuAlgIn9QxO2tYfNlbK6MvaxeMRYquvL9rTcPgJ30TuH8LcHAzMOugX3QALo21WXBZLEHwRF1OgHS2eOgbgIPHA7PHAezNu7QFWFZ7JnXJ5rnqxHEulvlzwyVNN3+wern5Yovl7SXLGwvn4riLWO4fgMRJXcPd/+pmOymELEhRzBxJAo9gVL4kwVnbsLccgHEpWi3epocCAMeBRU5eTcPiy/6qtl0wpvhA+2gYfO7NwOQm4OBGYGaDs+5ExYDGgqP+ccAkINaVpB8GTv4d4OBxwNw2YGFrxYCmV0YxLNYheCXau7EhV3ga3Lb8g4+R45uoGLADgHWqhsBXA8K1AZADyRvuvtkBSArh+i9DsQhCOtf0UUgW/7aiYW/Z0+nRrhizoxXwFhyAi5y4rGHxU66qAFhT3rDSIVdpGHzencDejcDBDcDsBDBP1uX1CMJRwFiQIBzxieL3KIY1YW5MPOxNwLRb8gs0aghAss1GZ1O+SFHsdRPt0i/PLHu++dFb/x4mXfhcbWxhfCtYMFr/uWvKxfDaAcg7ipPCvFOVpuo3HrCjYW/ZA+rRrti6TS6MVQ+L4NPH2nx698GnXF0BsKa8Iab4dFZpGHz+JLBvApieqAA4J8CPOQuOBBAOV0CUYbIskRkAecrvAdNbXc/aDCxSpyT4CEIyTgRgneiLIp3nP6fs+a4A4N8B8/48CUC+ZGJA29fpuLmxJW+5h5kNFg2jiWHSi0r0Uv4pCoZsxw8DUfnhd4Vk0XGdGvaWPaBV2hVjdjgA0BlpkQ/K9bmn/HOVqtClvKEBqlfD4AtmgP3jDsBxB6DA7tdbcvYzJvQJkii2n4NOeMpbgJktbYPGACiF3wFoEx1ZMNe/4jnPLXu+KwD4t/5SO/iMBcXuesHylyACMBPDgzGg7opM8mEHIGdwrfGA1rC37AH10a64Yr4APvvOSdwEPOVbKxu+K2pdKRTmdI3dqkPPVgbSTBGAY8AsATjWniBdx0QxJylOFCcr6HBiw1P/CDgU3EgEIMW52M8YkLolQRddIN1AyKWiBretf9MJQN6HsaCPxe4rvgDdHOcOxDIAcmDFDXvLnk4f7Yqt63gEIB/Yoj+4p9xaAbBHeUPM8qF2aRh84QQwNQYcGgdmx4C50WqCFngNsgSvQ+Dxu4MuiawhwIAXVk1O+e/A7CZgThY1dcno1nHL2oDIyZULpBsAFTBZ9pjT0QQgn2V6ufRicS8QRgbs5ZYpEsENDejBfpoLrwAOjgIzZMBRZ0AHoUC+SOA56xJwNlEyTFw5FxBPeWvlzpnbANCdQ1eSGTRybMuydgMggVBsKmtYoC6Mt8znZxsZMLzAxoAOvsh+ydDqtXx4FIDl8L/omQ7A0QqA82S/ERdTI22mNfaTuBIIxR4BhKe+y61punQC+MytI/Zz/c9EuvyBeetLAfGZ5WOMZ9j2/gqABB1fMLsHAVBqhfTcyH5d9MByEdzs+B50Z7voGZX+NzNSsd8cwUcG5ASRKYbdHRNYwhhDIHRgGmO0gFP+HJh15jOXjnyKblVT5Cbfoq+yJOszF8P8+VnNPlICkMAzds/YLxlYznrJwIpO6egTPMqA5ZNDAB6iCCYAyYBcBqTRQ0e4630SxZyQJQIvMJ8mSeLrYe+p/GzGfnTpEIBy6US/out+K1wg+brs88rHmDOgAVCMnrEfxxMte1Mt6j7u9zzKgIXzczEBOJIB0BnCJoqgIfDEhM58SWzJEPGJe9hfVH42un/Mfxl9bgSiBySIBWnAJBDGEDAB8QWFA8wO3/a+wH4+rg4RLPYLul8tCI8CsJmJMQAOuwFC9qMI9g9Z0CxhZz65K0wfFBPqu7PEyVdWAOTHVlTcpxhXHZLz1w0ZA6EDLhkCskRf0sw4dRYC0PQ/vVSRAYPo7QCdj7GqVOSMeBSAzUzMxZcDMwLgcKX/zbv45SQlHXDIgagJc+bjZBqAWhUoH/Y+B2D0J7rFa6LYDRmzomsAaOeKqxEvbWacHQB08JkRIteSXiSBLYJOLB+X4xrzAzY7vgfd2S4RAKkDDgPzNEAIxMASSWF38WsgkuXLyXTRSRCe/DduSZMBMwe6ObTd8JBj24Aot07uDObPP9XsIzUGFPs5+JJ/M6oT4buxHv9X7BeY8KgOWDg/Z58GTC9Xq5FxTXOw9c3Cm6k5fPcjgbHbgAlvVG2tH1T3Oavoq6BlniZ+12n5u/2sDbOvasqoFg8x2Lnbcd1GdhSAhXN+7qMrAC4sA8sORJ6yHwD28z+Ft4fdv8UyqUDrDmCEBcpZ39kLS6aq9l4D2rLb/KYsFTPWdfbvh86vQu2s1K/K+zIjTsXIVQ9a59Egs4Y6sZfIA/EcSp/jEXv8BWcAhxaA+SVgSQAkGAMICcwVlNLlqTc9Gbv/HAA7MrL4+f1VlXwrUq7SvCoyGcrrWpGhuur2fNGYwM8YT67hT3s1LaZvqn5MLM0bzmHMmIFSgdFNj/mIBct63NhFZwEzDsBFgpDPeanNgATfCtGsX9TIKwNrg9tuVkhlng7TI/YArX1VkXKrEe1l2SynN1RCsFJsqnQv3UIMxhwIRjU5AGN9QUteVz3BUAvahuNgjC3HxLAND7nBp/cgONXF5wCz8xUDGgCjKPbvevlzcKUHH2ag6cnYzepYBB9Zi2FxDJdjoXJv1WDFiLJ6MKqKZUzoQFTfj2HmwTKcTpVWvcxHKm6kKgoORAEvVclPD6NdzLXpMT8IYNPcLV7yJGB2AVhYrAC4SNA5AxKM9ryDPE5fs6eeVKWGZ2M3S3MQfEyJUKV8L1ZpJXpVJ9pLilmlAxWkVJHKwIhjjD9TtVXVm1HdOy/pJiaMFRWM+bo0rWl4yM1N7oPhTJecC8wRgAttBjQWdBBGESwgSiV0Pb9DRgu0TY19N+M1mRKh8niqFx3rRDsLqjgl9yaGXT80vcL1wnE252PAZCzAHQCoiqoW3yYWFIt664fUpKaREr1NPakH6XkuOQ+YDwy4FMSwgU8GSRSz0UJx3Vx/5vFNbrs/EiLRY+v4ACITww6iJEodQKwBIyBRv9vwhKzUW6z66TUGEwhDS3ezqusAyNxnJn8xa1KRPSFts9YfFB/QDZcAm78CnDBT5U8rCqjfc3yh8Gn/hGd/MsKf1+QzYJ4891Jye13iy1cAE9cDJ+6FpYrEkidxDN3OtXR+FwBGMezoMmxJLOumAuD4J4rxJrfdH/XCoLGFVKiUbw+LAPQqWWaMMLrd6/+JycSIm85w9lOpt1j1MwAwFTiqAWEUxeYH5ENn/jInUVHeMXQ/f/jRePvCa4DhTwLHfBc4frGqqaNJzLPw6iZxV+HTplFGvZrXZT45N39+HW3TujlZv8D6fp8HRq8Dts9XIOR5YtakgBgdrrrt5Qsq8Ssd0BhQ4HMwmVitAWHAY/LbLDQNQDaTVJ8Q6W4qVB51OOqDZDPVB3TLOBepW5jmqaLbec3jGgBGMSxvvemDYkQ9GoKF1ShUCSKCqBeQrvmfVZPC1keBjXcCmw911tTJ8q5XgOLaQgA+x/OdWA2EGZ98gbjleTHdQHQN+2iwls3nK3/Zhj3VeQhovYzdxmArSwQgDRA3QiSCJUrTnjfl4KozRCSCCeYmt90EoJJbVCk/1+FiCwFZxLk4dRfLFia6x8LbYkD9v9cXtLG6+O4AYQRfrgPygVIcqyhTXcWFOJH8fh3rz7EKwnUArq8mcGwK2MCC1i7WY7Zenh56feHT/jE3yliE4TZncd636gPFCKWavGhcRx2J+cvs9MlSw0Ty3cCm+c7n0G0MExdW4BMIbTXE9UCynvyCCX+Ovm4gbByA/xisVgJPpXrzLj4EoRJjJIZrWHArS9iprK+KcefgiyB0XVKGjOmCmW9xhRVMUSyRFnNeFGEdI2q+/HFXclkp9WsAbgTG9wGj08CI64WxRk/OTDcUAvBHXSLQxcVCDMQSWbzv+1e7WVbz+k5w2tJtsbcCYV6WJY7hmAsDA7r1Sz3OgOgoM+KTOJbcjSI5yGIaNE1uuwlAAU/MF+tF5/0sIghVLdVdM2S0bSzHx2Mi+FTxXf8X925NC4BycK8QwfmgVX1LlcFiykEMcL2BndJJ7aQfijKfxLGDwAhByM7aC5U4qwPzNwufNnNuOH4VZaCPlPo2AahqFqoPVFc14ga2m+WEEL0cAz9kdPrOmMu8r1o/rTsXz7f9oswFs+jO6LAqkvC3Ggg5Fg6mwW03CUI6X12h8lyfcz3QHqr3DIl64DbqaQKc9mI87QXACD6vpJqY0EVxz2CEyCI5eMSGX2e7VtI5J4yTRyZhscrvt1nQuivOAaNLlYESwcySgiVbr37Bfd0/u31yEgg2FVaiPCeVOguqAfGov0iR0R9JABJ0bnwk9nMxw+fOh55EbgRhzozrBUA1polN9CLwok5HEEUQBjFMQB7D+j656PW+IrJ8O/bBCo4sGFdGejqiyYCx3mKe9/JtTiBvmI5OFiTisg9LtJFF7gZGDrUbHKs79+hyu5hSaUvh1foFr3r/6vZJCiXgCDwVVFJ7MVmRLsrGltuFCc68yFdACMDAflwR4QM3HPoKgIExt4gz42SuaQb8hBOE2oZmlu+KFlKR3QSssMJxDPWbbjpfLoJrxG8CYT8MKGZSVTCxYFTIb84nkCxCIPLDiby30gXFghaF4c2ReR466Uu2fvoFr3r/fKAEFxvpqMcd9yonIrkuK5LLV7MVCM+/uDJCyIC2J8a0z1iwqyESgMl15Sa33QKgmtPEBnp11mwuXgO70Ud4DHWzfgDYC3zBEOk7HlA6XKyHQzb8HgGoCSQLqsxorIy1Bxie7Wx0rFaf+wr9Xv32C+56/7HbJ5VHtRYT+GJrsehHcya57PyKAQk6+vBkBZPpjPEExlwU59awg3C24W6KBsC6tqHR+MidyVG3i3rdAnAsH2T093XT+zLr197MTA80h3SfsZP2UqpCrPQ46oF317VrpeiKXTJ9MhMLkgGdCacKG/mupV9w1/vnwyGgCDCKWzJe3lqsyzLWZWe6/kc/oKzgKH4jC7oolhdC4jiuzM0WPo+cPQ2AsX1obFCTO5Jzn566PwbReiwnfTWjI4KvDoh1juh+aT+WKSYD3i8Aql2rJk+VsVQly5kkddv2FvHT61icqO7Fr71/IkLNXOi0FQjV0046oBy6wZ922Q95ICqDEaL4XWw3COcf9Mw73DFB9AqE6wZAAS8XuzGQIDKf+oVkqxt00ttAc+YT0PJ9qRFSB8xoye5Xu1ZVeCSgCLbYLVNswoncHxoeLwCzBGjBNki/4BX3z9lXgUCyIIGmhova83cRgO5Te9yLgP3MfmsBS8xs8/U67ePQOqy9umBUruDchqo8sHSd3PMfT5ifo+ack8eFHI6QEcnT5GvdOnVdXof+ptJ+BVPWceiaRHA8Us/nkACo8mzqlqmWrbFDppT5A5UIZm7CPA2Vgm3QfsEd909kKIqB1qJAKCBG8ZstZz3xHOAAiwmpDIdng1maZQAkZzsHZ537YfQrwNyxoQ+HakrnS0h1mUA1C96TdJTmORyhC3oeqdwROi+GDhkFI6bYNrcNDEDeAkXwQizPRpmnIs3OdqZPSaRFUcbchHlgie6agq2kX7Dd/+d8lUJVXuUzk8ERmS+2vfd4uvN2VOV5rSwb0y3JhgIh9wJeN3YMQCIgR78Q+nDEVYBYZUrUpbXFnM7COSdf7N4IPvtDnT2BY/h8Chh10MXQeYGS+7GGjaQiABpuNIFiECnzdWJMIUHcazLptC7YivsF8/7FgLFMqpiQL5TuNbKfA/DC46rqqAbAwIKWK+timRUBEiNGsOQsyQm+Gpjd4n046hbT84KPuYjOmHHyp92gcgDS2OoIuVIeh/xyUkaVwyEWdLrewHE3uBUDcKIwnq40HpDXL+n3CzbaKdguel5VnFJl2awaghLQBTzteZ0cjLq2A2n0M6EPh2pC57Wg41poLzZsAZNso0Hw6eVR/J8bF9YjWGmVCpGKwQLBRCcrbiSxNLgVAxCF8XSl8YDHHFPW7xeFBRwv/rGqOKUBkODzqgdWPYAM53vTASMQu4Bx9J+69OHIF+N71F1O1gUB+AsBfFqKC+4Wi4BWX+CYgOTAU36wdMVNVKka3MoBWBhPxyiuko3xkSX9fvGMkqsDlzzHC1N6SQ4DoINOe7KelWWTheziObeKCdARApD1AdVnRH048gKUAmAEYi6Oh4DJV4VoGDWqjq4XLbO5o1jBoimEPhPJmwu9FvnTLgdgYTwd2wyXbMyRKen3i2eXXB245FlVYUpVxUpGiLtmGBlrTEhVUwV8dEkVKAq3MHJ1uzRbRx+OOgDWFX6MsXJU/36lJoEoA2AKvw8+uwTEDIBbStdOs8ddDsDCeDom7ZdszBIs6fcL9ror2C75US9IxJJsEsHdGFBil4yYuUwknofJgF4XcEUfjrz+X7fKo4EJJ//PkMORO6FrVjQMeL5kJhZMMXzLwNZCt1nzDFgYT8cQwpLt4hDON0i/X7ys5OrAJVe0S/ISgFY7j9ZvnQ7I3+lyqpYaL98CWp/N+nDkZdhi6bW8An1kP3fRTLKVWlwF6RZCH2L4zDDR0k1IqeTNb2OQSYNbOQMWxtMxeqtkY6I+ny9VEz6btfb7xc+XXB249AoXv85+tIBVgJJ6n4lf6oV+mfjdDJNMH0wAVFX90GMk1f5TxlS3Fggh92DyN0IORy5665KIfCktsl+K3VsGtpVOWOMiuDCerlSnjQ2rB+n3C+pIBdulz8wqonrNPLKgwKaC5B3s53qhXVq6oDNg6sOhqvqhEr3V2VNLBjmnSSNdrOLJ1zkAu6VPRjFcFz4fXDJ8i45hG94Gt3IGjOFYA8TTlQZ/qGH1oP1+8ZtlT1MAtHK8mQg25zOZUSCLIliWcbw8wfW5Ln04ssqnHX04euiCk6/3de66MPpuAQVZAEFkw2MKFw6a1wEL4+lSBvmAOMhD8vkOkFX77feLNw14YT/ssmc4A6oOdHBEkwXlgjH2k4Nal6wB4fIuX9LzZjAmorNeHMo5Tc0OewHwDTUh9HXxfGJsYkAbAAAgAElEQVS/uvCpoAcew6zBBrdyBlQwwoDxdLZWXLDFkHyF8xGE/fb7xR8XXByAAVC1oB18HQYIT+8uGfP75SCUs1o64he8v4j6cIQ+IqkPhxrBCHjdjBH6AblQkAeY1ondukSiELmsUPpjbyp7XuvDgAXxdNZVvWCLIfmKg6Bbhrjup98v3lVwcQLw8gqA5v9zC9jErutltg8gMxDWWMBaMVkmANWFyEV6R0uH2I1IzW7ypbkQOTP5f2ch9KsFkwp0kQlDAOmxzHpscGuGAQvi6VD4RgmAg/b7xZVlT5MATNXwqQc6KGwf2U2uGV2uzg3D4ua7fDnPwZcKgIdq9GaIBPZb0YdD7hgyIFWMXiH0eQ5vXS5HcMkc++9lz2t9GLAgns7KxxZsCkgdtN8vWD+vYDMAUpcja7lOR9eLVcIP4tcuob/3AOHCdW02VTX62ApB4Mv1v24gnPy9HiH03fJ366KYHYTHsgBBg1s5AxbG0+HLZaOp65i+ln6/YM5EwdYBwGj1cmUkE7+8THLNdAHhwrUOXtcrO/pwhF4cct2oN68BMDCfmsJM/n6PEPoYPp8bH3kCkbtjji2tJJA962YAWBBPZ0WBCrbYsFoOf9pDAiENk179fkuvf9nTXewKcBSjsn7ldonWbgQpx+26otaLIwAlfi2QQSJY3Yjy5i9dmsFM/oEDMM/Z7Uf0RiYUA7J+ToNbOQC3e0WBBm9qLad6HICG1ZK1XB5PoxnuOOIcxSXe/Of8xHV/P+FpwN47gKUpYHmuSve0pKZgCKSq5wqniWE1WZz/xouBm74KTMwBI17lVBXwtWSs+8/vL45Ff3vhpcAnvwos8d48DZX3M2hx9XIAnu0IIO0chu35AOgLL0yuG/jOmwbg028G/mNz1YWdETbm4I5BrFlov+EtD2wIo7l+Atg8D2xY7iw3V5diEqO54mnj6XdMAYcU+6gon7A3NSO2qFjlyZYDkAX6uD5Iam44YaUfVNDNxaJcLIPXcGGpfi6PnZdVD1wPspQBX/wl4OaNwN6Jqg+xwrxslcVFuYJblehkcYYZGPS3L20BxueBcS8nwg5H5kZkx6TQSbXFZcCQKadx5Cz5mPurAFxrRaa17pAR2PFC+ElSHKQ/0QjQcgCyGyM9v3SnsDBRJgL6msWCf6IfWeUJac8UFlpY8500DcCfvgb43hiwZwyYVhd2D/VSrKGAmIDnBkiafEcN9cprHgKMzgNjS1V7rRjRlceyrqif6KAkMgXIM+6tAnDl+zSL36O9+U8p9jGHQo285/2XA/AnXeNnKAorDXH/AILwbSvLEz6Ql2+cAf/3XcCdw8DkKHBwpOpFbE2wadzIdyh3jjNQirYWEwYq+/zJwMh8pf+xKNSwM6DZMmzNRRbM2K+2Ii6TlFrAWfd5V3i/F7IgT2LBF5LbIdkqxLPWvtzlAGQ3RpU3Y7AiixMxLOUB2t7pKQ8M0qCTnp8HkojJgNqaMEJesQv4AR3Iw8DB4QqAs+6SWRiqgJgY0HVDAdBA4Ba4xN7ndlSFAAjAYX4IPO5dBDMAdS2i+Jx7XTf1eEdTDfgAQnR34p/wQkRmjNAoByDT/ugFphXAmjAEn8qaPQAgZCs0lSckCNmVigEbFMsPBBE3DcBX7gLuawH7hoAD7EM8DMw48AhATrjtQwiXoqkTEwWd7LOneXNCbz6Tiq/TInb2M8ZzIFrTQbGiy92oGz7pXl/7jvdAJnb2470IbB3T77Sai+hyAP5voTqW6sKwFAc/TAdc5+3dvcsTrvPVYSK4SQb8xV3+6IaAqSHg0FDVh3iOIFTIFxtit9orL5Z/LD1Q4s+B8OnHVuXwhhdd5DoLGsgCCJ04q66X/Ju/vSaeAxDPvbdtmdtKDV90gVEPIl/xySkviOhmAEjrlzSkwj40SlQZYZ39I+8JBMx8mZryhOsKwqYB+KpdVSDFvhYwPVR9BD7uyX4SwRS59nNI+bRck/DzJ05v12M0nY8fAk8iWL5BB5qASPGRCi8EVjzv3mqpkC9ACrrwhKukB67GhpqRRowQMqCiYbj8oOoHeUWpdYIBAUj8c8WjrjyhNIJ1unzjDPjqXdUjJAAP8TMEzLYq9uOHICQALe/EwWe+QgddAqCzzD8+vgIgg0qp+5nYjaDzCgjmnCYone0klqP4JSgvvK+6LoFPoFMlkPGh+0rPWta4RHTNJJQz4M8EAGoNTPVU8opS64CC9zoAWTFChcq7lCdch6s3L4J/2QFIEBKA1P9mHIBmhPh3Ai354RyAAmWsR/PRs6vOR8Z8FMPS97yxtIlYgVB/I7jC0rIKSfLXF1EEB+BFFjQ3jCLA49OWsRTTEPzvzQEwry7VrZ5KwzAQAPssT9jw1dcHgCrORQCS/bgn+1HsCYQSveaHkzvGv1scgU/6R55Y1YIxhvOm1EZekQWl8wVDxJgwc88QiJc6AKX/meHDawX9z16M/Em7bO8Q08GBP/jEkAEVjMBoAFWXUjRA3KtNwOBXW3EkAZhrALktpC6lKtTV4OU7RHB+3kHWgv/zrnYZl2kCkF4uF8MGQGc+MqEYUCA0n1tkwxbw4ScHAHr71Q7W4++c8czwcBAmHVB/c7Bcek9b3FuwbdD/kjGWgzJjQ3thGmVA3jhfOyU+RxB6FamOFp8NrhsTgLy8Cpzm5QlVptAU+6CiNgXCaIQ0BcDYV8b0P4pi30vfIxD5+w72C9aliegW8MHzqrmh/meuFhYi0pKbs6D9fsh/n1XFMrYMbPgUByCZz6J+uEknDA9AornWFRb01WZEsACoHhOqyC7wdetT0QAK2KqOb5MCUvPyhLE0oQxzqaYNXL5xBvyVXe12vByLADjXAvgxBvSPGFGMIjCmJbEW8HfntxtQmxT0cmxp9UPAdKAZ1upA6EB7qgDo6oCUxXRtPVSpAwJpnUhuxAqWCCYK1MBExZljY5S8SYr+pxAFAuBayhNG26jw8usCQLX0SAAkwwcAEngyQizaXoziIli+Oe7/9kJvNk1LmBMe9ECO3XRB7aPeF0EYHNVPdT8gj016YBcWtBfBVYJuz7mF7VgGY/pO8f5WdQ1/7U67nIKNS7j0wIbDPFZsyNHHY7od/xdlEHj8CcC3TgCWHgGAPSxiSdt4312u/8SPAl8/Dlh4pDeZW2PD4J1c9+uyDaIDkgEJQKnTfG/N8nUAmu5HUnMW5ARbPfEuIHy/ACjRK7FL5pOR4RaxgTHofKl8r/S1ZWBnAGDKefbn3AFIPRPXB7sFiVQimKVgGdl5ooNwLQ1/1U+DQGSXQ9r5Evy1q9rZbP1lGQDZsPpzI8APHgXgod7qUx11YtBbFzC+/C+BL7SAWwhgdoLkONSLqy5oLogYft3ZI1F7EAC+phsAnekokhP4HIzml/PvthQWmPB9LJ7jxkcSr14jWj4/0wFlgJD5eoDw6fe4DzAYPHokWhHJZ3TFSkn4h7YOSOBwEtiMTv1aY0uktFYTmI2/43EMQmCuAJmUE0gmVD8EFdPpdnxhVhqzDr8F4NMtYM9Jfg98EVTeNu9Q2OFZBX7vr9vtgm/lcezczZ61ZNN8DCvilYCdPXqNDQpAlfGTKm0M6AA0PTAyoMSx64cRfPQHXsniOTI+fEWDFGp+Qb9BeySRBV2kpl0QxxGAlHDmkI56X6z+EP7UDYSdRgh/IouwIZ36lHabBE0GJ0r10Rgb/xA/tt/j/6aMAf+7R4CxzuBXWRGULwBfIrY6UNfpvLae7n0I+LO/reoLMqiVMbW38oUhkNkQIzZO7tIweGePcmWlAFTjAYHPVGwXxWoLYblEDkLuTT8MDPhXLJ4jALpaJB+ggU6xfgJknT7IKXIQXh4Y0FZCog+wxiUTwSkXUbSMV1rB/A31OXWuFpPUda/mRHKi1e6U+hA7Zq7l+A+UAfDtHg/LrptkQpZ727cRWOL9542Pa3rOvuOqagUltgtmJM08j4/PILbIDKz6w5PAHsbraTnMGdZWIwIzxIfeK0rn578J3LAVuH8CODRahV/FFQ/1IumIvXP1QudNfyNT8oVqcHviPcBd48A0g2RDuoDqHdb2SalZAdG9dnfDkAE0gXnH5ijWCDbKCq5/MRiV0QD8HgHQ63jG0hdsLGxA3x9Bw1Asli7hO3BwApgng/Gjvq01IHrXJ7q3Cz7E++YziF2rs1ZLZ+8H9jJsSoECWXj6igmR87aLgfbGq4GvbgLu2gjsHwdmCEIPSI1h+SkCRjpfUC3iNWcpoRrcnrYbuGsUOMBo7QBCxSTG/igxVcBIVGPWM1h1JYQPnyKNExGZMDIJ9b66eEBGxPDY1Y5nv+GCjfGAxD+DDpiawphABWZPjwNzNLAEIH4XCH0M7/5c93bBfI8Yk2cgVAdvdT10ifDkBWC/r9lGH51NhIsnsWHOfPmEUKT94WeAG8eAO8aAfWPAwVEHISNQlKQUglJjJExqC+H6Nq93kOpUg9szbwLuHa66QzFWkaFieXxi6hgVHOMCYGRuJ+5V4jYJIDKI9KlsAvFDq8QDrnb8NWVPh9EwdFkQ79TlSMIsN0Mi5s9MoOGno4U6f3YAvefL7Y7rvdoFLxOANSA8f7xSgWmd0kCQbmZ6mTLEnJ0UqWLhUkxlrBn6n3wWuGkYuGukCsufGq2iojnRFpafsU7MDxErJuZhYCsJosHtWTcBe1oeq+hxigJgXBrMmTBPnJKLrr+VED54ibHYvZos8sO+DNcrHrDX8YVVyglAKud0LtMjFPtNMz6QLDY7VomLJd671AEH4Xu+3g7nWq28ISvX58/hguOBg8vtFQvV/hEzxfqOevuTfpjri8vAWz8L3NYCfjBc6ZYHmBcitnFd06pxyb8W4gPlgonBqffTtdTg9pybqiVNBssyUsdUD7eGO9amnf3sXtxQipl7Wg/sD4A8AwHIyZMYky50Tp/xgN2OL8y051qw2hXzwRCEdT2nmck1RxHG+w5jeO9NFQBpR6ldMIMXlFWgVndqF2dVFsJzuOgRwMElB6DcI6rznemD0RnbwQiSRS3g7Z+tVIl7PC9kahiYZm6IizuLigliT/VoUog+p8P9l3wJ7qGEanB77k3VczroUToWLCsABud4ypaLCUoxf9i/9w9ADiICULrQRWuIB6w7nuZrwaZwLBGwClSqSyz3AhHbaRGEFGOmC44D72UVgjW2C2Z4lIF4ArjodODQcqUGqAxfcpG4mJVuVqcL5tbs2z/veV0tYK/nhTAqesYNHdO5PCJZos+WuzxHJIViuXFyJxupNLg976ZK2lizUKodilGUgzyGhokF8yw5Mf+qRkjdjfuDtwkkm7DTkNaBaQ2ox1q3eMD8+B6O3H6em8Kx1Ccx9ptWl9iYIUAAWrI3I3nHgPdOtsO5eOuxXXBdj0V1vOL/so3Cxef60tlSpYwveKf0pAu6ohfdJ8k4CUqgvr5jV6VGTBKALeCAh+VbZLTnh5gu6D44A6H8cVlkNK95O1WkBrfn31R5HSy+JCwPplAxRegE/2T+AloGncNmbQyogUQx/KwB4gHj8YWNTwRAOW0FIIIndoqNkTAxz/bd09XDGLBdMM6/pLKi5whAX60gCK2ujxzEAqGL2pQ1Jis5AJEAFHvTujYAKjRf+SEugm1d2COQLU/DAwQ44caEw8AtZzSIPgAvuKkdrWMM6M7xCMBoiBn4YpCE2NCfxWAA5MEuwvCCEICwlnhAHV+YORfDsWJGgPpMKwg1b9QpFnzHbD2BK2JGul9s8KkYW17vLALQRTCBpzXZpS4gtCXXMAkduuAy8E7PijPWprXJ5CR38ygw1fJDohh2BlRAgq2OeN7uTWc1D0AFNtmL54ESBsCaJcLkDajxj5ZXRiCIGA0waDwgjy8sk5+HY+X9ppUbJSCp6TnFCMXwny1WAFQ8rUAc2wUrRL6mXTAefWnFfnz3FpbagQKLAqAzoZjAKkkpXkNO5GCEvOMLFXOnnC4xIKOjnQGNdWSM+GqHQGd7JSsxUf+JzQLwhTdV4je1nQvr1MkPGtlf9yP2Dy+gAqZ6rQytfvdHSDxgLwBF8AmAYjHWluEDiKGMiqOVvtejXTBOuRSYJwDJAARgZAGWL9Nk+IM3SzgTydE4eec1nZHbtDaNAf1Dpd/SMx2END6kD0oXtFhBXmcY+OY6AFChnKnzl7NfdMR3qCAae2B+VVMYXASvDs3/X/zHJZcB84vuiqABEo0QPnhnwqQLyRURmZBPytnwHde0M1vN2lR6picoKULaxHDIEdHkW2iWg4/7b5zb7DSQAVd0/griV2JYojfpwRGEYsGBrOBmx/OgP5sAKANkcbFzNWTRnX/GSGImMYH/LYlk+gGvdT+bW+SWH+Ig1GqL5QeTtR2EYj5LVHfjw/ZDwL8yJ6TB7UU3VVoTjTYxYDK+Ivv7dzNAZIxpZSiU8jjKgIWTcykZkBawDBBnQdMr5QeTKI5iWCB09AmEb7+ucnOQ/aTPWn6wuzyS4u+R0Ob6CUGqJpIDA97AdqINbgRgBJ69CG4Jp6q/ckjXqB/RKla4WpkO2ODgHoynigA0JiLwaNiEt95YQKJ4FRC+7brKzRH9jZbN6iJYuSHm9I5iOAOhHNJfZkh+gxsBKPbLu3+JgaWDdojhMO5kkDWSlNTg4B6MpyIAjf3IggJgMD4MCARjFMU9QCgAykhSKnUCYHB9JB0wy5aTRUxmup4h+Q1uAmDs+hpXgFLnB6ULONOn5xACNJqxghsc3IPxVBGAiQG9aLeilWUJW1FvVXEN0TKp1C6At19TMSCBpz1dHtT/JH7N9yaxp6QkF73KBxYIr10nAMproB44qQGTj6sjUrtOFPtLeFQHLES9AdDFrq1E6M13MaxVCTNAXNFThIylLcor40zxtgDAPKuVwDMrOKw+SBTbtR2MND7sZwC7Qvm4wqHa4T/uIrhb+7n0EgbQdTijoyg+agWXT8llDsAFWr/B8qP1K7bT0pvtVwHhW6+t2C/m8svvZlawi2CKe37nhFtapkDnILRqBQA+v04AjMyn79EIkXO/DnzyCBwVweX4wxs9B4rRZgyPVFqykgDd+5JSpBU5r0vHyHz+jsc3ub0KABsZMCyQgeExKyFPVIz3lmcM6OfPAGCADYPE67Jfs6h7G0o+xvi7oyK4cLZfOgpsXwC2Lq9MwuuVERonKn4nSJrcXnQKcM7dwMMXgYcsVxkSebJgzOWPqdB1ad2f3gpsnwK2LXWeR9m3danUIV1lBSCPArBwtp+7DThuBti6UDWDmWA/DvXk8LRptfPtNUlihYZTOPCi04GH3wFsnwGOW6iAs5n3GeJJ+KLoE+9VDClQ8R6vOQHYegDYwuY3S6H/iJ8jb11ck0q9Qhoc9QMWgPBZJwFbpoFN88DGRWBiqQIgWyJY3lPozaGJ1KTEPh36zpTkJrcXPRE44S7g+Cng2DlgyyKwaclfFoIwvCwx9Zn3Q1DmIPx/2/sSaMuusszvjfXq1ZRUElJkKsBEGQyYhJCBSkUqAW1tsBdpuxEVaBzowXZqe1g90G2LotjQdmMjKqtBxQERdAWUAkUlZNBGkQRNyIAEMAkxpFKpqjfUG3t9//m/c/+737njPq9uVeqcte66b7jnnn32/s6///3v//++Tz0dmD0KzC4DM6vAFpd/0L3Gh6yTDgnvLwKzAWDGiH/ThcC2OWDrErB1pRgQisIQhAa+AED+HEEY6uNLyrRnZLSl6tSbrgLOeBQ44yiw8ziwfaV4UGbdegmA5QMTLFlqsfn7XecDW+eAmePAltXiXnkuZSBkRcm4UGXtU2uo3xsAZgz6y54JzMwDWzkgBOAqMMVBCSAUObh8QuN/CiTgcWAuyWhL1amvvBbY+VgxbW477paa7gIBqCnUrbUBiQuhAKDUot13IbBlDtiyBEyvtO5VDxvvVfxW/JkWNFrCeK8NAGsY7BsvKQC4hQCkJNaKy2LRIsg6SJ3IQSe1onKKC2CsOYMeN+0Dtj0ObDsGbFsEZmWp5S74g2Ir2uA22BScAJGA+dJFwPQ8ML0ETAUAkgDTPq9zdK/+sMWpPF19NxYwA4g3PtsHxAE4SQC6FdSgmGWRRIJLZJll8EGKjHiX1jwaN10HzD4BbD0GzC4WrsKMW2pNobZoCu6CLCDfCTqzgg6sr+wFphaAKQfgZHKvpRSYg7HN5XCL2AbAZwPrZGaj6ippXhgn0kqmU1woxnHedg5AATuWHig2FE1uVRwoxoX+Wcbg89S3AqCKPONcCi8oPtVP+9++G3j+oSK2xRBFDElUxbTS+3nvc4FpDsjxllXQoJg8FgdCQoGJJTTicLcQ6vPL6wbg9cDM4cJv27oAzFA5ky9/UOSvmg8oP86n0dICBn25JwjARWDSAUgBHN6vfdbv10AbARh8X91vDM2ss+NvAECKPVLCsHoyUgRqrlbnRwB933OBc+4DXrIC0IEmiLnE75di8HsyAcjzWUVGUi6uICMpVwwJVMXdeOk3XAxc+Hng+vV2esAYw+sWoP31r3eLcLwQBeQUrEHh4Jo2h4vDmJPuAyMLGAeEn7uqbgB+I7DlSWBGCwe31Gb9aL20kGDb/EGRxY6WTz8f2wtM8l4pgL1SgM8esHCvsuylME4nn9cfQLtldg6TZ0kUKorAfij23vAPCmqp3fcCl60XFINid1PlZrf41/dnApB6wSQjutUfIDJR8CGIQOwWEH7DywpKrWc8CFzqRLHkVYrB2jS2FQH5vkuBycXCAlIUUAAkCM2iRBA6+ARCe7DjYmQduLYTleiQ/XTTS4DpI+6nLhZW2nzVCEBaMLd+soIGqjD1ampdugiYWCpeBKA9bBJC9ActAk8LES26SqsftInLZ44dQif4Igdhym5WLrPDyuYH/7HTCNwDnPko8LXrBccjQaioe6BiKad3+QY/MGTH6rS3OBvCnQDuAIyqhiDkQ9RX+29yE3on8IwjxQPI8zkTiApGU3oVkD/4fGDieAuAdMw5MFQjEgg1DYsUku+a3uI0TGBfV7PotwHwaOEmbHEATvuDIutni6UAQoFRIFRYhfe/dhEw7tbe9Of0Si1g8HkrwRcevDajz07gIJ7n05rYyWIpb4ya/7vv8PRdFpj/LXDmkQLAnA4jCCOlTBRN/rFMAJKgkkVHpGUjySSBSFeg7/azqk8EgbSEq8UDRACLKDXSyaQ7Br//DcA4LSCtwnKhTEkQcmAIQhtM+Uaajl0uS9NatITXWzpzfcdNB4DpY+6nBgDaCtanYLN6fCj4u1ay0QIqtML/EYC61wSA9tAJeP6eWsAoDysFpg1eB0HIQRCIIkVeCqQf/05P3WCB+UPA+CPAzvmCaFWDKEuYcl1yMN+Y2dckqGTeHPEvvWDSNhOAfbefX0A6rS8CUw8X9066bFIfdqMHJID++DJgLACQumyc3gyAEYRRKFCLD1eu5ODLF6QvXedx0w3A1BwwxdAJLTXjd8seQnGrZ9bPFxLyA7WIKON63tYtCQBN/sv9QPm6BkLp0vl9t/m6ietR6fbyBA4gnXtORwRRpNnTtPpW6gWLH83lKqcOFTEnDiKtoHwy8RNFhrefyeztbnrBfbWfgttsP+kIyO32ELD1cHHvInrlvWs6TsnB7qAUlg/suFtAWkE55zYQ0QpqcALoNCXTEt7A3KoaDwGQfqoAOEUBa7fUbKctltwCajVbxvSiyvoasM0BaBKwwdKb9fN7NfcqBWGiSWykWXER0umeacUEonQgCKRfIgDFjya5yq8Wfsfs8dYgiuMxgpAg/vnMzu6mF0z6Zj5APdvPQec0TEosnvQosGOhaLuIYvnwEYSithE52F1XFAA0p5yigD4otCqygFKnpHUpLYP0OcKURYv6Mj4MNR433QhM0gL6QongawOg+6rl9CswKoSkEIxPyTsuAPigCYBmAXVfYcVf+n0SRYw6dP1YwNgHsgSajiJP429RrpWOM6cxDiJB6NINM4w7LbUGMQUwB/M9mZ3dSy+YVG0EoBiDBST5ddZ+PkCsAiIlQZDa3LVatJ0WXG2PbL98AB+4omB3oP/HgTUhmGgBfRqWf2TTrUSjExDSP/qWzQDgfAFAWyzR8rkFtDAKX75jo6nUguZxZ8NByHbvvqBQ36T1swcsBaBAGGRg40Ir+rt9WUDhQ5ZAU7Es2e9LLzglqHRxNkbeuW+oQRRls5jaMjnK0a9ecNf2R4LAwO829kQB3LTtEYQPUwzQAWgW0AGo8AQH0ljp/V17pm0KRcEifGuNOnocO1rACQbKPXhs8TtNwVr5uh+n6Zf3wDgu29g2FdMtOc8B6PdpFj08ZFrplw+ZA5FTvAQQ0/BT36FPDkRqBT9Jag7xYlQItY0f88j78sZzCcKPZlrAQfSCK9uvB4h577SCotUiEJ8opq8IQFl/PUBPEoBLxbRE62LSqG4dFB8r5bHcOtiOQSqT5T7RKzYDgJx+BUCCTxZQCwhaQc9oKcEnEBKknj5FsJ1LAPo9xoWWPWDy+6IIoqbeaO0VA+zHB0zxIQDKkn1GgtXiRxMIAx0Vn0Db+lkuFjLRCt5WEwD71Qvu2H5OfekD5FaciQay/GIbFgBXriwAyGmJADR1ck3DwTE3TQ4B0LetzBJErTYAr2BBSI3HTS8tLKBZPo/fWQDZp197Z3scjGb5BDp/L3+njMweB6B83Gj9wj3atOsPWin9WgXCFlVO/3ctf4iD8XkBkH5USlAZlNPZAQqARr5vxu1yjmH0givbX0UQKI63o0Wun/xHuR8E4VnPK5JQLd4VNttTBvK2uoiKOUf/f+GjwMNBh0NMV6J0c0NpcRv7mrYv3kh8/uHxYp+bVpwLp3R7sts2YzouSq3KGa+q7+x7Co4nazAerRKsVlV1QitF59dyyFZaYY0HMu9mWL3gtvZXMbymBIFMZ1ov2h0B+LTLisxgW+Eq5uU92iZ72ud9vvR+4JFp4NjkRh2ONi0OB1/UBCkvEYRhfuNs4OmhhiPKnFQlx6aAjMnSXJUAACAASURBVPjmz1w41nnwO4cCIBvBwZgTAOUHRq3gyDExD4zRGVYEnpm5LqmQc0M5esFt7acFl0SlHiBxuTkYxxdaihUC4QVXFu5FCUD5QtJl85sjGA0ziQxqeu/fem+hw0F2fLLQGxFlYMRvo7v1WmIVtpt1DFkXvOR7LwJ2HSkyoZmEypoVVe8p7b6qEMnidGG/Vl/L2aPOIwuA1pAIQE3DAmFa4j9f7CPaFpCHKujr5xzZesGdHqAqKz5X+FLRAl58le+jui+kTBALMcgZ73CDBkpN2/7+bfcWOhwUyCEAjQTcAVhKdjkPc2RajewKyu/n1//qJcA2uhBMRGXQOcn9U6JIOjXHQqSYOsVoQp1HNgAvz8yny80H5PVz9H6RqVd849WtXQ/zA0Ow2ayGLJ474L0G79vvbulwkJi8BGCg4S01SKqofoNvSIC+5zkhFUupV8rUTpJN06KpaBkFQm5M1HlkA3AyM5/u9Zl38zrk6f0iU6/4hmscgK5ISUtCTowyDqb7UxwsqFJW3fo/vbuIBJEZ1YRgyHwQKNi0KEl1OKTCZJdxtPDn//v8ooaDaVgqFyiTD2IKfcjZS4Fo+7g+HXOPv84jG4DIzKfLzQf8KVfI/FNKrQ6h94tfz+vOA9cGAAbrpylY2SDlVTTt+uCnV3/V3a7DQQAysJAwobZJgUXi78Qayhd812WeiOAZzEyUiAkHMeu5BF5FwZQAWLPwknkLQy9CrPMy8+lIHZFzvN3T+YbV+8X7c64OHHix74V6zIxB+RJ0wQ+UU992tYoFy3fcXcTDxQkoPsCUhFIczKVCegSg5B8A/PILN9ZwxBSxtiKiUAOi7JW0dLTustF8AGbm0/1o3vjjnSGdj+lYlGwdRO8XN+c1wABIoHk6k61yuSCJITq3jDY9Vx0BqK++uwAfX6JkI/hME0SC1EGguiQ+isqcQRLrF6/0jO2w+6FMnZhyZYsQ1W50qOHgPX1NXndtODsfgMwHzMin+0+ZN0S9YOllMzWfLwKQSS396P3iY3kNOLDPM1y065H4gOW3p4uTDkB8zWdb7FgbdDhEgJkCUDRvogTmd/vPv3BVAUBuvylNzAAYi4hisVQnEHoIqWblrxqm4Mx8ujfljT+YjsWBYgIOc0oJPsq1slCpH71fKybJOEoAuuVTRSCnYlmU6P/Z4iSJEcbLv+Yu9/1EAh7JKEXDKxq4ChUiKymRbwjgHdcUWTARgLYXHSr2LOU+BV7MVwzxwOfkOWybYAGZD5iRT0edjpxD6VhcOQ6j94tP51wdOHBdMeXa9OqWRcmWXA1XLUIUH6zyCwlAs3z+YBkfs1u+VIejJEF3ckrjI9T0y/aMA2+/tgAg08VURKT8vbKMUgAMIGzzAcOi5HknHQAz8+l+MW/829KxhtH7tTz+jIMAJPCYMULAWd6fvi+EY9ouoZBM/Kx/4LUBgFLgNC5o16FrE8JJVJgkiFhaQQBv3+dVbMrWVsC8UxFRkjjaVsW2DtRdOJ/vAyohVYK7A+bTvTdj8HlqTMcaRu/XxHkzjgNkIOWuDr8jnYYDKDutgpUhra0uAlAyCCUAK8BXcjBXgLCk/h0D/hcByDxFAdAzoFUqUBYRJTUcMWdPP7ONL6i5bLQeALJRQ+bT/W7G4AuAOXq/lsGdcRgAY+glLkYclJVTsa6ptCX3uQjAKINQstFrAZKIwWxQIhIJuovB/Nx+r2LzFCwlj8Y0evl/MYk0kieVtcvrwGUnHQCVjjVkPl3mItQsIPuElx9G79dOzDgMgGkAWlNyBJn8xKprBRC+zgEo4LWRgcdVcOCjjlNvmx84DrzNAahaFZWLygKWxUNibIhTcPD9BMLLa65bzreAMSGVoXvJ/Cgh1WUfO+XTZS5CDYDs9GH1fnOrIDcAkABTTDCCLYK0Cwi/586WcKJUiEpC8CCBYDsiiSplqUIUmOjf+o2tIiKVUJbgU5uSWl4DWwX4+PcXnrQATBNS+8yny1yEopdcay+930y5YhgAg+9n2OoUeI5TdQer+32fdhmGoOBZanBo+g1yEKU4dYgFSvqB//vZBIBt9RshkTbW8ZZZ2hUgvDL3iU3uux4LSBM0ZD7dPRnTH08VAIfV+2XAOucQAMuVcKfFSD/+IAABsEoGwYAoHZIKEEYxRIHwLS8pUuhjFVs6/ZZhIVWyxVKBBIRXnbQATBNS+8ynI4tBzkEACv+chlUVIKE/5cRGsWmlKfIzudc3APLQSlg3E2OCyVRc1kpU3DgBmKoQsWtlBcswjPu+nfTYtBL+GQdgOf16GCZW6pXlBCqWSgqJypoOAFfXXDifbwFJLvi5HAjlnUsiIe6AjOp4iQNQHRlT2PlgJCUbbc2s+v/hFwFb/q7gm6HlYpBbmTV2sscQyy/qFBj2v0/cAdz/HGD7NDA1AUyOOU+1CwWOewNjKj6/O03F1/WuugW4/XJgfBoYmwDGdH7IxB5kLPIB+I8AfNwZgga5ck2fJbEm8V9zNWPfrasbgMuPAcuseJ8Exsb9FdBhA+7gaQNKB6TfcgCYug+YJT+g89aoBDMmIMScP12uTKj13uDv8zsKig/uJ1uQOsnojm3qB5P5ACRBH3OhPuzzRN9DV88HqQLEWPJnvTy5nm/t/1s4BcuSpRZtGAu4fi+wtBVYEyccrYwn6hF8/FkJp9bKxAKVFsn/d8urgbHPA9NPOEOWl4+2cfoFHhfVrJTZPKHSj5daOtup6JyCpPx8rHWRVQ7WOlrYCMx8AHIzlxkALPD9c0VB+x/A3E/+E2fUYHXdF7KTGwdvTd0AHP9r4PgWYG0KWBdfsBdsMPfPrKKsoL9XAVLAvO2fFylCE4cKliyrDVZNcGS1CqEYhWFiAZV+XntaURdTLmpCEbpchTYLqi6NrkMCzLzt5Xc4HwyJmmkJ+Z73jQOh4NWeDUZiK1K08f0EXt7CMHVawIk7gaVpYJUA9LI1Ao8bzKX1cytoFtFfpdCIWz7rgzHgth8u0oPGDwETc8CEMySUzFaikgtlpW1Ta8JqNba7lVljSRgW+Q6ZP/57WQvj6fydBjXfAjKbgEvMLwWCvhNoipgNpnQshlS4IGFWzIk6ylWwAz93ETLxGWB5ClidLABoIOS7pmGfG+33YAG5mND0G8F4678vkiPJczNOAC4UyQm2N8w94kirFlfIAl7i402d6dbPWWAtrsjOFiuCvAJZOQE0pHTFsckHYDeCvhNgipQNxoAz8/8IPr5nbvH2jd+6AThJAE4AqwTdZKEBLDoDgU4+YVkPHIBoPwareOt/BkDexsMFAFnbzNJYm0IDnVwbt4uyur1kwL7Tp+iZM/08WT9Rc7DHUmuYTr/x+6o4ovvu9fjBbgR9JyA+omwwxvZI5ULg6ZW7y9FPf9QNwKm/CgCcKABovh8ByVy/UCtJq2f+X1yYJPGU27lIZLbuEWDsWBHesZeDz4iURLUWa1TE47LqK12fZmd3OXidFctqm92KatVs1jAEsNv6sdymaa2g8+xUL4I+Pn2beCgbLGWHI/h8G3oTr45iK86POlbBU9yKI/AcfLR+ouQwH9BfmmbLlTHboOnZ/T9+5vaf8FUaAThXsFOQ45mUcgZCWTAxe0UQ+urYMO1/37GtxQmoLCBtRSp30LrDp2SFdzYMgk/R+VNwvwR9mwQDsaspGSfJgYDYNTbp8psCQFJxEIBkQjDrxt8dXCUIY+COH5MVFPi8SOn2n/QYLZ9Gp0cxANIP5IvAkzVzxivRydnKNzBa8fddM84b6AFyAriMF2pajk9kYIeoClXmA3AQgr5NQEHMBqMVFMNaIOayNRL/vhlH3RZwmhbQQUcAasrVVGz4EtjCu/3dfb/ID3PbT7uKAZ/MhcIC0vqRTo4W0IBIEAmEtFwCYqjW03bcmdwBYeoWgetUbrR8snrloiR2drpACf+rD4D9EvTVjIJu7HBV+781X752Czj9lwUZkTEgcPoNPp5Nv4oBRhCG6dd+1DkMz1JIhR1BAHJ7zwqO3fIRRM5tmDK5CoQKsSgOeBYBKFZULTqcB9r6Ni5KYmd3WKDUA0BlhNLM8EbT1QBXBU72aI5ZjUcVOxz7WLkQ8d37vsart/uA6RcPsxNSAtAXHDYNC1AEpf9s01kKwuBwGU7HgVt/1jtD1e60fgQigSe/j5bQp+KYpGB+H62jT7P8/ZypBIC8Dhcx8eY9wF015abhmnoAyJ5WSrKeNgKO9SHxnT/LSasJBim5lRjWBEIVeROInKL1qunybRawLgASdEy74qjaNNzJCgqEEYzBGvK0297mAFSHEIB6ebKDgc8J1ksmV8t29f1en6L5v6cxIK5iK6Xne/5jCTiFcTqVn/r/tWDPWwXnEPTVgIKUHU7ljASawKefIwDpMdRxRB+wFgD+RREDJABpwSzz2c0LfxczVjkVKwaYgtBBezu3SvX08d39P5uO3QKahXMQciourZRAGKZWar/YZ1xXRPe8wQr2AUK7TvbOVTZBXx4MBECRnConUBSFEXT6mf/TK+/qmzAF/0UBOPqBZYF52HrTFCw2LH5G8UCzJEko5nZqmRnPh/uCXmpnVpDTsIPPwKApOaSA2QLDLSHf97iPx0tpISLfz7bl4iFfsUsnj+HZWEeOYDCDnDmCvZkEgedcCjxGseIhBYt3vx049HwMLRh8gA9gh2MoH9ABqKJzxf0McO7XlSAU4HzhYYFq+5D7hwBu/98OQLlIBCKnW39SlXNY+nqeiq2dkQg+gnGPb9/ZpT0lq6MV5D96gLCwgDmCwbdnCvZmCgY/dxy47xxg5SWuUjigYPHFbwA+fyGwfr2rXrMvPB+vp3L3GHCgi9JOHQCkRVPppeUBigXLFymyejYTB4YsgfA20ofRAlYB0FfAlvQqP0/TsX5PLOB5DNu471cmIwiBaRww/F01J+mz2pqChxUMZvpJlmBv3iTocsW4dzewfhkGFix+2febXDAeJO/YEILBB7pU1g8LQFo98QASVGYNQ6DZfEG3fnEqrgLhbf/HV15anbkFNCvohWSl9XPQ2XTM/2s3I4DwPIZwBEDfgitH0Ek6N6x+u/iD7T4g/YdBBYPpWHEaHlqwNw+AQa4Yj54JrJO+aQDB4pt+oCAyYvOPEIQDCgYfeF/9U3AbAMX7ItAlVtAspKZdz5SOlvA2pstxjES3wJ+92NgAGK2gwi78QoVfEhBeQACqNNP1RdoA18kKdgDhxkUI/zKIYDCnqyzB3jwAJnLFOEIW7QEEi1/1Y21ywVglCAcQDD5/Efj7M4CVrZ5AKlkhxeQUaxBI4nvFzxf8IfCVC4HV7cC6ZEX5nen3VX1vAGLZq8ysrvHY+QBwbGfI2E6JpLvdX+ksthpUvQrmX/sVDGZVUJZgb17vJHLFeGQcmCdVb5+Cxd/5xjZ6QzzMLOQBBIOfTV2Ps4HFHQ7CLQUQmUrV0rgKJMsCjsxGAqTn/hzw0EXA4tnAyg5gbTYBorKkUyLnkB9YVhTxu+kT13iccwtwdBewPAus+b2ar9xJAafqfgMQO4dh+J9+BHe5gqZZZzYok1JJUcpaR6bp93P+W/N6p0KuGIemgEWKgPQhWPxdP7NBLhiHKYHUp2DwpZ8rLOD8tmJQVplOLxAqmbRKC6EDYC7/CeCRPcCx3cDSrsISrs04CPm9ArZk55UvKAspYLqPaPdR4/H0g8DRHcDyVr/X6VabLHk2PhjpPVZY7d5xwF6CwS9y/4LbbVyQsEKIufGiKe0p2JvXOx3kinF0GjhOQY+oNRtljji9TQPf/fOV9IZY4Gq4D8Hgy/4W+Oo2YG5bUUy04vUcLCqSJVRWszJbNgxSmMau+q/Ao2cBR88EjtOqbgNWWaTkIFz3YiWrF4nAjtN0nBZrJnU+/8PA3CxwfMYB6LUra3oglL0tps6wlVha5rLiqd9AdDfB4Je6U0s/0BXTDYh80Sr2FOzNA2AXuWIszABL1JaKWq1R+nwGeM17OsoFY5XTVw/B4Cv+Djg0C8xvLYqJCECzgsxmZlq9T8e0XGUyaUizavPtxoFr/zvw2BnA0Z3A8e2FVV3x6c4sqwObckeyhiXAowUSADhD1XhceDMwx37lvU4XxVN2n3rJIocygkr/Vbs7fe+EdBLcfaXXQ3IPWIrpBB6XlnwpR76jYG9e7/SQKzarxM7qJFj8mg8UarMV9IZ4gvNDD8HgKx8HDs8A8zMFAFnPYQPDl0Co2g4fpDZLqKCxT0/7fhJ4fCdwbFvhRiwRgJruCOwUgCpeCvUjZmEFxhfk9W969kW/B8xvKQqnVgg+B6CB0MsI7P70AHgmd2n1NQ0rv7FvALIlVYK73MnQCDLThSGZoDpuP7uCeuX5n8zroB5yxThGnQ0CgyBMxY63Aq/5aBHG6EBviDlOLV0Eg1+0AByZLgbl+HRxnZXJoqqttA4ODovlJZVuSjTQFtq+NwNPbHMAzramdVpVs6wEoPtdNg37wJfvsYiJP9NFqvHY+7vAwjSwxAeNxVO8T6aNVRRRlT6hHrJ0Ovaw0WDJCKng7g86APvNB9wg2JvXO33IFWOBgn8EIf2nRLD4tbe1+AU7yAWbZeskGHwVdd2mgAUCcNKnJgLQrZ/V9/Jnn5JUYmnAE3hCmv3+t8AWQfSzyPK/POOgJgDdsgqA5nfJAvLdLV+bz0kK4RqPZ3wQWJxyAPqDVhZQyQr7gyaXI9axWCFVAGLvRUhV46PgLnUWBs0HbBPszeudPuWKsTRZAJDTo8l8ui/42juL5veQC7ZpsEow+OrZQlqVVuH4FLA8WVyDAOTAmHUQCAWQkOlsQAwDt/9/AE8SgPQpNa07+AhAA6HLXbb5Xr4IaAMfv/eGvP5NzyYA7UGjBWTWjh40v9fSyscHLtaxhJWxFVsNNAXH1khw983+DYPmA5aCvXkdNIBccemfceooAfhAAcA+6A2xLuAGucxrzgKOMexDfV9OwbS2BB/BEoqLSrBoYGgJ3E8qLcIEsP/ngCPuUy7S13L3wb6PU56/m/Xj4Ps0TKCXQA6AXuNeZY3HMz5QANAeND1kwcKXlj6wOZQ+b7R+Pi0PD0DeFAfk590CKg8qncfoFzIRVWVqfFfBhgn25vXOAHLFWCDbvPstBsJZ4LUPt+jdesgFg+qVptWq11bg2gtgfuLiRAAgQeg+oEmsOujsXb5SsAoCIN/3vx04OlNM6Yv0tdx1MKvK7/TFjVmeCD4HQQQhf159eV7/pmc/kwCcKABoeYvR0oept7SEoZQ0Tr1lPuPQFlAtO0nyAcWhpzw/FSjFzGjLx+RGvxzoSeC1hwsA9klvaFN5FAy+9mJgnhaQ0qqagglADo4c9AhCDpJPl5ZommQ8738HcGw6AJBW1VecZv0cePwOY0/wl1lAD/WUCx0mMlDLr8bjmb+Dwp3x4nkDYbD0thIO5aNtfmDi/xGEeRawxhs7Vb/q2huABQJwAlhyy2cC0xoggjAAUCWWAkksOiIY978TmOOqeqqwqAx3WGhHK06n7TDwOcAV/iipPAKjwgrZm2o8nkUA0gKmAHTrp+o9MTrEYvq44o9pZIOtgmu8mafCV72YAKT/RwAy5OPOuVlAAk9Oule6xQRTWUKlWtkU/IvAHAHti5oIwDK841ZPFtCmdr0U8PaC9hVultd4CIC8P2Ztt/m5/qC11TJXlJDGGpfGAmYODgFoCxACkLpuWh3KCgqE8gNVZK4KtxgjJAB/2X1Krao1rfN7CWZf3LSBT4uAEIyWBVpipL7GgwA0AW25GbGENBTRx3rm1M2w39mmrFVwjTd1Kn+VAZALEE5LtIDyMWUBvbLNLGHgd5H/V07BDp7r3uU+Jadgn3ptxekA5MBri0/Wp4wzBjDbCnkMWMqVpE8GJwLQqvfc0pqbkVj5aNk7gbCxgJno30cAjntowtXNaZ1suvSKNhsYTcVKmw9F5xGE+94dfEoP+JYhD/8OC8eIPUsUHokVVKB78XszbzAF4Pvd//PCKVGIpOAr78mn4DZOm8YC1jco+w6EFTDDPJqeCEBZBa5GffVbhmQ8DtZW5TYOvPhXip0GTuu22lTMLSw+aAVl9QhEWjurI/aQiLJkTMLsX9R3r/ymZ73fp1+37OU9hunXSkdl7T3QrhKCtlCM59k2i5CMMSIAGdqxEIwrmptzTsCEut5yilKoJLAcxCq3fe8tLCDBFwO+tKjyuxSCMdYEXoeDrHcHvu0tTwLzmwHA4N/Gh6zNCqqeOSxC2lb8tQSiMwbuqXIqAcjFh2JjBKGJyShQG6ygVbfJegULWBYcMR3rvb6oCRaQwFPgl1M5rR7/JtBZOIZWx/0+s4QeY5z/1/X2tFnAxPpFELaVkdLN8MWGVr4pCBsfMHN8bmTKfCjZ0Ncp456/x58zLzfw6Qf3ABd8pUgEYmqk5bGyek06IQl1bkXScnlN/u8L24Gdx1qVq91KQvrpgwaAAw9p+wnXPw1YjyWMGtDo2ASOFGMU7SIEUzdYD34vMPmXwLbHgdkFYAtlGiim6DpxJtvq9LtlVr/aWKEB8pUXAOOPAFPzwBTZ9r04vdQ9Ts4pAZ3cd+yHxgfMAOH+vcA69/9Uxijmz/AerYpdar1lNSMYzV+vWY/34I8DY58Gph8Bpo8A04vAFEFIknIHohGVR62QhFRSYjQE6qFri2z3iaPAhHNNlxKwArI0Q1IAxwfReacbC5gBPp66/5ICgLKCtqnsrKKlrFZUFPKOr7osMTtdsxzqQRZ93Q1MPARMPllohUxRqkEK6gShOP0S+dY2hlRv99y+ovRi7IiTnTvLqmg6xDPYpqAUgRgsoR7MxgJmgHD/c4E1FXu7FRRbvEgd7evXWlbPpp9EgUjiJpwe6zwOMlvpAWCMVusJYPIYMOlSDZRpoGiNxKzbdIQlXONMWJbGtw4svdgz3El47nzTRvPrrKptAJT6ZrzfintvAJgx4vsvdQvIXK5VYF3sUZxmJUvgA1FOvwF8spKyBtM1y6EepI4LqVMedbEaTp0EIKdPKh5FqYYqSxgo2jgFr13j6XXHnOiSZOeBVSvyC8qC2r05FVvVw9cAMAOA178AWPMp2LJaaekiCPXExwHw660n1oB/niGQazwOkkSepbJ/72I1x4CJ+cJ6lYI1riccrVicUuVSmIW82pkwnHHVOKbFsOozQGkFkwewnBES37ABYMaAX39ZAUCCb82nIlo+40p2gNnvsoKunxH1xGwA/LOzdQOQJPIuHzV2GBg7Cow7AI0l33XfjOsv6oVodes6ISbBsAZMX+kJxU56KY7pkmFVhOciuvTzSt05v0+ryuT/9gDrZNe4wPMsI7VJP3GcP7gUOOdvgL1rRYJ0ZI5IV3hV4/wrGYPPU3/AiRhYusy2K7mU999P+z90ObD7LuBZK0Xdkeq9NSX2+o4HLwfWlopFCC0fgciBMtAFC8CGrYXVoVjnU2G7rTXrzh4kfRzLY1kyGwBoeiGcPiXb5eAzdXWnazPCSScb4j3xfmav8Cx2p50lAMW0VXINitCogl2r9H2dcctWwQxQsn6ZTBbMNtcgdKIbiZj51VcBk38CXPxoQcfCUg8pjcYgZScw/momACnXyr4leBhs5QaBTHpf7X8dMPYJYO8XgAv9e8QJlAZZq8D4xSuANYKPJQn0AR2AHKy1MACKe9nfFI6IEqduEWoHIJ9wlsVKLekoMCa9EAegSTYQeM4TXco2SEMkAHEbBZoj4bbYtdyCVrFqGXgTSxgXYTZeHLi9AMjEQRCVUXP/n4KUaaT8vVTi+Rtg7GPAuYcAWlMCgUVkQfJ2Q12yBvPXMwHImhDWwf81imsTiLSEvHZkr+jY/p9CQRD4p8DOBwteItai05qn31FFdfLlFxYWgCDUIkRkj/TxbCEi/89jfPZ3X2VqYSJQbmUNQY3HQT7hbv2sLoerVwKQHNEEoCsm8R4MhPRjXUGzVEIKIoY7yaEYuY4dgGb5RXruoSgtSCLLarkICQ9f6QNykGjFdjsIBaI4kGlt8W+Rg5g0HJ8qAp47nihAzFpuWtPIMBZJlASILvR6fQ0DCVbJCkJOJCqnk4pGpb99tZ8MopyiKDX7WWDiwYKXiEQOehCrgKh+eJQ+EQHo1Lby/zRlyf8TIbf9XS5ftIb8I92YugH4ay2pLusorl7dAoonWtMwQSTdOFuQSLTGHyIC8kxSIQuA4hwU2WUAoO4/grBcDbsfWElSzg+JCoYDoEGM1ixSkHzgF/wG7y8sIa3J7JPAGWuFJSQIaU01iJHUiYP4e33BrPOHmG/JMaOfTZVYRhwGav87vWKPJ9/rSH4IOGO5sITqg/ggxXs4TOaBAECbeoOsgfl+DrQShFqcEIhyyt0MbMusEkx76iAZXKM8BvXiZAGlF+KaIbaadYpem4aDgpJZQz6YJABV5VcHAJZ0v4FxX6KG5UpYs0KnqjhRuagEVgPglYAl9ciHf8mdUrJh0Qx9vkDBzBywfbkYQIGwahA/kglATsHsDzKA0BATiPyZ4NEDwIeoa/uFYKKXL2f24nQoIgd9R3yQCMTFqwIAfdBWI7+yB5ZLECYLETd85YJl+2YAUNosLIel/xYlu4Jsl6bhNhD6it4WJCvA2Zc4Gxo73RcgJeOqFmGR6rcChLYACyGojmEYdj59KnZ+tIQRhH9IvWA2hiREjDeRI9Cly7fMF3EtWRFawhQIf5IJwE56wdTIYdt7tp9ys1K8JnoJvod9Wn682PNkP4hUy1ndWgstAtBDMLYN5/6PAc5DGNoF4SrZfN+4+IhT8jqwg2Cp8ThIJ5vfSWBXAVCrWN9SMxDK+skaOvhoAc8me654pmUB3f0wyt+E8FyRAGmPlOEoiSD2qgvmAKoOm52fAuiTDHSyIRxx+lI0QxxADubfF5vffMmSajrWlP7nmZ3dSy+4r/ZzAUEHnQ8R70HsXlK+PgJsW68G4XYGZj0EY2EYATCAT6tAhmE0DXcC4faapcwMgAIfLb0kuzT9Qmw5uwAAIABJREFUSi+EfeALkSrpBovbrQDnkm8wAo8/E3i+CCsZ98NCpAp8cUekZyBavI4ET/TnaAk/RQCyAXy6uNSPA0i+wMeB6ePA5HFgZq2wpNGK3FUDAHmv3fSCe7afX8CB4UNEEOolVi/3obastNwJ9cO5BOBKEQMsAcifHWzRAigWWAlCn5K2bQYAOe1KMjTIR2kRUhKVS7IrLia0v+3xwHMZMCbYNP0KfG79zAqK5DxOvyEuWu6VD5KSHy2YAEQAfpaRdl5UkuUctIpBnCIIl4psD03FtIIP1ADAlBuJM47EqqUX3LX9kSBQcuuyftK78xUkHyQ+RLqHZ3Fv1KcgLj5kAQ1s0Qo6IA1nHhNLQzA8ZxvBXuNx8DcS5UYpNnoYxsCnUIqvZo0F3wPTMa7Hv53HOJVbS/l+5bumX7d+5WLE44hxIRJB2NMCqj9ixwuE90svWCaIA6bAp959EKeWChAyA0PTOV2unGMQveCO7bfqHbcS4rJR7Ewqnw5AWhLuImg2uFQAXAVs8RGmntW4+g2hB3P79L/EJ9zGvqrxOPibiVihAOgrWQOf/EBfBcsPNBBqW9Hv6zzGqFzmoXz3B9AePgXiq6bgiv4YOB9QHS8AfpkAFMMjrWAcQA0iO9XJiQyAnos2vV7ESHOOQfWCO7Zf7F40mZFQScRKAYBaSU6vAVcTgN7xXHiUFpDTMK2dFh56912BTiDcvpkATIXzCL4g3WXTZ4jpGfjoF/oihL+fx+0yWUABLwIwtYKKIabgCzHQvi2ggBKn0McEQDaKT5cGkIOo6SuyYzEfjQB0EM5nZgAPoxe8of3sgSqCQM3jkdFLvpRvR13+7UVRuhUFSavNO6otwp88ZZ3+t4M6HLtch6OT9AG/q9cmtf//gV1JDYcnQ2zY6/YakfSrU+Pg1M45NqPt3IEtoM7WFHokyrWKkooglCMWLYjiUXMtK3g8Uzd1WL3gDe3vRRCoUEYCwGtYFxxqgA2E/jI20F5hhmQod98BHNnlxOTig1aGiDanO21yV4DygWuB8YeB6fnC9WEtiKVVKeE0ZGiXWczeJoWMIig5a9V5DA1ANoKDeDylZ9NSXxyAsiKawrQqmCv2HVf5e8aRoxfc1n7xs+khItAUvojvyWryxVcWJZksVSyZoQRA3dcAoHzax4Gj2wtu6FVKM7gMgti02jbV476oUJJs1j/AbA1mQ3Pm8eTRsoZDtR+xZKCiEKmMXTIeXHPGdhYArX8FwG4DGMEnAHIK4yvT58nWC2b73cexaZgWWaEKgU1gjNbPP7PvOYGsUSBkv3hBtmRWNzxjTk9RWktvxp6POj0vARjY9sWkFel8RWxegjIF4RjwAOnZWMPBTGjqvHmszxJOBUD3xyznL2bqROvoP3N3q84jG4C7M/PpcvMBef0cvV9k6hXv+2Yno5QfGArRbaCC0mWv2YtF3ecerNDhkNZIIsXQRv5dlTtGADJSz2gEE1EJQM//026HdIEZLC8B6A0tk0g1Ja8DuzJdphS82QBEZj5dbj7gxZN5er/IZI+67pscgE7QaDOUMyC0Wb8+gXjuR4F5J6YsaXnFhBoAGEVvUhb60jISgCQnoh/OLBgvIrL8v7DdFkEYM5dtNg97tvz5zJqzdfIBmJlPl5sP+DJP5xtW7xffnzeh7H+Z+3+RpkyWT1YxuURJYVtx6T0fCTocouQV85VkHRIGegEuEv/YKpkA/JceVmL8kv6t5/9pu62tfiPWcFQVEa0DZ9WcLJEPwMx8uvfnjT9IgZyj94t/ldeA/S9tMaGa9SNdmsIxbvVscVJ1GScoMt4UPwhAsmMZ0aXzQBsvdGRBjQz0FUpEJRAJQOq4KAnBdz+sfiPJ3bOYn8fsykyVWMfiN3BOzckS+QDMzKe7OW/88aqQzsfE5kH1fvGjeQ0wADodmVGwOeiMsUqHrGOnS4UFy9P/wAEojkEnI+IqOIJQNLgpCXhcmLAtD/D+kgQE235L93tj+YBqgTX9BiCeW/NedT4AmQ+YkU/3sbzxBymQuZhm8g1T+QbV+wWFdjKO/Te2mEFNlCb6gPF708VJ1TXHgKd91GnZpDfi1k/gM2vqU3DUnCuBmNQe3P9vw6pe229KOvB0K1k+ZS+rnrfM2AlA3JMZtah/EZKZT3drxuDz1O/yxAwu9JgJxr3lQfR+8aa8Buy/wdWQZAVl+ZzCrG3q9c/YrkmHy3IRYryAAqAkEBIlopJxNNUbER+fA/H+/+AAdP9PmS9dazicJybm7mlB8nR2dI1HvgVkOlZGPt2nM29GCamcGZjAwlQ+vvrV+8X/zGsAAUiLVPp/wd+zaTMFWw+/kAA0GQQnpCw5mDsAMIrcRB5mC/+MAffTwgfwKY2KfmCZ6ZIkUShrxXxBX4yYaV8Hzmcn13jUA8CMfDqWYeQcSkhVOl8U6uxH7xekrsg49h8oiCENgC5TUG5vKxxT8f2aRtOtcAKQ1s8soPuOVUIwpchNlEEIOyNSIrrvv3hwnckWIZPZsnbcDyzTpvg3lU8mpZQqozyfK74aj3wAKh1LgrsD5tMxiz/nkGD1sHq/YNFOxkEAcuW7oqmXlisuQOT7VV2jwi/kTgj1RkoZhBje8Z83SCAEEJZW0C3gff8tADCt4VASaWIBK0HI9q8BF5yUAMzIp8tNx5Jg9bB6v/jdDPSRns0BWIZeUitIo9IhHmhXTvzCPQddccnZ76U1V/IvC4SBCFyg26DFNg7c++Mhhb6qiCikT7WVUmr6lYn2nRKyrdZ51GMBlZIc07GUBdMjny6XCiUmpA6j94vMZbgBMFo552pu27PXAqXTyAUQcitOQjAm9xX0N9pIwIPmSCmH5QuPqER0L4kDYgp9zOUL6fYxkbZcFceyAreAF3GlV+NRDwAz8uksnT3jiILVSmpWNlhMze+k94vMZfgGAPJeHDjpCrgM01Tdry9OzvmYAzAqLVWIwEShwzbRwwSEn+MqP6bQK5tZlWyhjCCCsC19Xv7gOnBRbgp7cu/5AOyVjqVMmA75dJZ9nHF0yohWNlhMxKnS+0XmMtwAmFq4imnYbrEqNJPc+9kfd62RKh0On8qV9hXZ9askEPgAfI56ziocUgVbzGT28lEtRMoKtg7lBHtznfZNA+CQ+XQWM8k4uglWK/NLYKzS+8U9GReXD0g/Tyvh4Ne17Yb4Zbr6g6y7/aNWcoPpjKRTsJIags5IJwkEAv6en05S6GUBfRWsUExZyVZVQCQwrgN7Wfdd41GPBczIp8ODeXfTSbBa6YYxlY8/p3q/udc3C+jTbtvqt2oadnB2m4oNgMn0W0p+hYWHWbwg9yU/0Kb9EIy+5y2hiCit4UgKyTeAkN8Valk4Le/ldlONRz4AWWBRM6fdIPfHstw/G+SE5rMnVQ/kA5AkLHS0ak7V7reXfhgACaBqDtD3e/nmc5k9kA/A80JReq+U38zGVp3ObJo/BvAOD3dtwiWar9zEHsgHIGlFubqSx7+Jja36anLLcDvvgwA+NDpDfILv+qlzuXwAXuSjrkKemlO2e3U1uWUYnL8dwB/5e2apca9LNv+vsQfyAUheX4VguB+mzIsaG9ntqxhF4Xbe3QD+n7/uHLAW9wQ1tblMRQ/UA0CaHC7plXEh+q4T0OWcfhleYTSHBK0EH/mi+fcRuKQn4I6fWpeoB4AevCz3HOOm9yb3F5mBlZBNclYCj1aRfyfrbgPCTR6AzK+vD4CyglX7jpmN7HY66d1E0ctdIrEEE4wEIMlam+Pk7YF6AMj7EwAVbU82vTerCwhAXopJN9zVI+AYrOeULLZgErY2x8nZA/kAJGWr0naUWdFpy2cT+oCWjpdjLFxE5UzYIBBpEUX5nLnlvAktb76SPVAfAOUHpiAMm96bsVtCAMaKALICMyxDq6cXfycA+b/mOLl6oF4AiqBRIEzBp7/X2Af0+fi1XIioMIlAI+AIPIGPmeROWV3j1Zuvyu2B+gHoFfZiDS2lC0LiY52WUADkQoTTMH1BFSYRdHoRfKSu5v9qrizMHYPT+vx6ARhSuDcAzzmDo5ZGHT1PAKYMwQxME2jiSo/gEwBrrq+u41ZOy++oD4BaCcsXTPiSI3ey8s4KGoG8QwCMFM+0ggQhLR0BF19SXuD/ayakz7uR0/TsMcxg3SjfqWNA0hsrga/ojaq/8WPcC+YIk4Ke4CMSuB2XVht1Oj8zIfXlU8BtU8DhmYRXWdfrdF1fgr3+S8At48CD04DVjXQSDO70PTUnaJ5uOCwsIIFHSSFy1pKPWCDsZxCpw8UVgKSPxLXM937OzxxAljzcPAbcswU4Qh4V3UN8mKoeKm/bu78IfKJQa8VD48CylHQiL3O3/qg5Rf30BKACMtJXjXKQcfBSK8Dfqc3KVCwuN2VFGRnm/yKZtq4Re5ifyQQgM2A+BeB3GHaZBo5MAIue0l7Kt3cC4xhw+5eL7TuCkJk1jBtyerbUfYG5ExjZ/pqrxE5fAOrOq5SmowVIrRp1IyT2R6+fg0bgVYG4CsyZe2UsaiOGKXr4Sfp9k8CxCYAFSKyvXeY1o1BxQux91yMtfsHPutgnnyUuUvhc0ZsgUXib+nVkq6+ZKaABIHsgVZnuwD9sVo66rrR4ImdhLGSQ8zPL/JgBQxeU1ouWkO9PTgDzbgmXxrzMkatl3keivfG5x4r4IRcz5BfkO5vEZ0kgpIfBZ8yKjlL17syy0tMNcOn9dl4Fy6dLFabj1Mpvow9Ify+I4Nlo9Xt+ZqU9VdJpqZh4QDDyxUyYOYJwHDg+DhgI/WUVZl7aSEt93+GO9Ia2iuZKOfA7lhp9JpvAVy61w2mOwO5hmCgMHC1H9O24gu6UD9jP+ZmbtLRaSsei9SL4XDPbAEh/kGQ/pSUcc0lbApFWb67lQUhpVnLBsoKqqZclFMmUtrxPcwxl3X7vOCAtYLSCcugFQmqhdssH7HU+RznjiOlYXA8wqkOfkItTAom+oKygca4ES8jY+N3z7fSG4hfUtp3ihUHruVSsFy1iRvNP+1N7A5BdJACmVpAgZPhGOyCigEjlPLudn7kvFtOxuB4g6OjD8UWLRkCZFRwrLCEXJQQhp2K+37lQeBCRX1A7KPQto1prFEmSYn2mB9EAsO+kYfk8KQhZF8yjVz5gp/MztyOUjiW9bCUhEBhKRCCgSis45uQ/PhX/xfFWMgOnWu2gxB0TF/o0kEZ/kCDM1Ts+3RHYnwVUL6XhDFrAswfIB6w6P1MrTulY0sum1VICglKwCEACqvQFCUK3gHcsFQCM/ILayqP1k9JshVqrncMalOYYvgcGAyCvIwuod8YBJQmZpmGJeyRwkGw4n8jJOJQNw3idLFhMRNB0SgASTJyKoy/4ieXCeFfJBUeV2SoAclFyR0bbm1OHTUiN0/DTAwD7zQeM52dqj8VsGEkVE2jKetG7AEhQ0frJAv6RC0trC1skl+IWlNinGLbSaZg7Mc0xfA8MbgF1LQV1z08A2G8+oM7PVF9Ms2GUE0gQyp+Lwu2yagLgR9ZaYpkSypQ6a6Q2DCqzpkvietXIFdoZfuieGmcOD0DeP0HEbBhNwYPmA/L8zJQsATAKnguEqS+XTqkE4YfWWwCUFZTksYAYwZfIBeN9Tw0cjOwu8gDIZqsoSSvhEeQDiiGYFoyWiSDRypWgi69UP5sc5fIcquSCNeXqe2X9ZAHfM7Khe2pcOB+AT41+aO5iRD3QAHBEHd9ctuiBBoANEkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cvAFgg4GR9kADwJF2f3PxBoANBkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cfOxqYJ2au9RdPtdp/khoEOlglDYT39V1PzQFXLsMXAlgt9PCxJKPbufyf8/KHIPfBPAZABf79Xc5XQ0ZQ1Q7360NbxoHrlsDvs5ZRsgo0une06by6X1mZvtP99PNAp4F4LsBXA5gjw8EGTeqaGF4QhzQF80CX7cAvGIdeDYAfhdZ2sTKUcVrpE7nd31N5gj8e2dIo2osk7NZpMdK0Z19tv+bJ4F9K8D1ACj8yfNSikHeg+5Z969m57Y/8/ZP+dPLKZhP/rcA+AYAF7g1oRUhEMUzFMt6eSJfX78b2DkPfM0i8GIAX+uWlAMppreUUErn8p2gzTl+2flg/sDbTkvIOik+CP20//mzwAXzwDcCuNTPJeFXpEpM6QEjIHm/zTF8D7T5gATYNQCe69aAloRTGulfBESBSYNyxR5g/Bhw7hKwZwl4vk9LnM5JmsBzUyDGAX3B8G23Mz/g9BuUa/0IiutfMkj7zwKmngAuXSvOpUvAWYBtF4BTnspIj/O8zPaf7qdvWITw6eZA0JLQEhKEGgxZhUj/dz3NzSKwbR44exnYvVKcy+mM5Km0JhxInUtrGkmzCPicg3W5LMGkQiZZTm9xS9Z3+4m2o8C5c4X15pTKW2Lb+fCx7WLtjYxzqiql29Icw/dA5SqYf6RTTilg+lYCIXmICKQ4IK9wxfSJY8AZK8CuFWDnanEua9ZTAMsaCog3Dt92O/MvnRGBtGwkqKRmMEkqCaa+2k+0LQDTh4rP88UHj74kF1WaATo9QHQ7mmP4HugYhtEKj4PB6ZQ+FS0hQahpldPya1kXTOqNY8DscgG+HavAttUCvBxInitrkgL4lcO33c7spBdM3kAuSnq2nx9gQfAh4JyVwvrxwel2z3p4aMlzH6DM2z/lT+8aB+Q/OT4EEqckWQSBkGD6EQKQnDCLwBSnYgcf32fXioGUFawC4esyu7CXXnDP9tOCsyD4KLB1rmgvX7zfbu2WG/Jtme0/3U/vKxBNAMoi0KcjkATCN3HOEr3UAjDrwOP71rXixYEkeKMFlSX8ocwR6KUXTJ7AaNE2tF8WfA4Ye7Kw1mwvX/yZn+eKnvcrfzC6IK/ObP/pfnpfAGQnySoISBqUXyAASS1AK0JfagWYcRDOrAF66TxZQU7jBOEbM0egH71gcgXSFZAV54NQtj9YcNIpbONCyh8Ygi8CVospApDuB63g92W2/3Q/vW8AsqM4gLIKBBIH8bcJwMCNMX68BTqBb8s6sGWtsIA6jwDk662ZI9CvXjA5A6NVa2t/IAicnC/aGV+8T74IQPm/AmGuBc+8/VP+9IEAyLslAKMV/LgAyIUInfnjwPQqMOOgI/DstQ5Mr7UAqMF8V2YXDqoXXNl+EQQ6N9v29aKdesUpWJZbAPyPme0/3U8fGIDssDid/pUASCvCaXgJmFguAEfgEXT27gDkuwaUg/nbmSMwjF7whvbLhSDL5TwwvdRqo9oqHzACkCB8U2b7T/fThwIgO01T1IMCoAZxGRhbKoAXQUcQTjkI+a4B5e5FzjGsXvCG9gdqrLGFYrpVG/UuHzBOw2/LaXxzbh43DKeoJwlAHqLndSs4udoCoIBHQE45EPk3DuitmYOQoxdctp8+rFwIWsGFYiFFoLGNchcEQC6e+OJC5J2Z7T/dTx/aApYdJ37AyJK/DIwvFxYvWr0IwEn/H1Opco5sveDUhSAAF4HJpQJkWixp6k2n4IYfMGf0amDHev2I8+l4/UbvNw8Eozw72wJePOJ8und7EkKj9ztKGA1/7WwATo44n45pWI3e7/AAGPWZ2QBkYHCU+XTMfGGQmYIxjd7vqOE0+PXzATjifDrKtTZ6v4MP/MlyRj4AR5xPF+VaqZLJF1UzKdPV6P2eLDDr3I58AI44n07ZMARbo/d78gMubWE+AEecT8e9YOn2Uheu0fs9tUCYD8AR59MpG6bR+z21gKfW1gNAz4geRT5dTEZo9H5PPRDmAzBmRM8BJzqfLiYjSKKr0fs9dYBYDwBHmE9XtRfMsIz04aQZ1+j9npygrA+Akqs8wfl0BCCTWRq935MTYL1aVQ8Ao1zlAnAi8+kEQGZTNXq/vYb75Pt/fQAcUT5dBGCj93vyAaxXi+oDoFLyT3A+3Rcavd9eY3xS/z8fgCQX/LPR3SOzkon55jg1eyAfgD8M4NcAPD6aDmBtB1e4NMDNcer1QD4AbwbwxwDe4UvRE9wHZG1gNSXDLlwLNcep1QP5APxzzwj9IIAPnXhT5ORc5EYCA9HNcWr1QD4AmRH6FQBMTSZZH98ZmD5Bh5g1FopiNns1x6nTA/kAvAfAEwDudnI+EvQxPfkEzYfaCXRSBluQMB7YHKdGD+QDsBNBH/9+AkAobqTADGK7Inw1x8nfA/kA7EXQt8kgrGAGMfBxZ5Cv5ji5eyAfgL0I+r68uR0QmUFoBQU8vfNvzXHy9kA9AORoMw7CdGQCjoUZDwL4kv/+8OZ1gJhBIjGDgMh3vTavBc035/RAPgD7JegjODfhiMwgoqeJwNPPTaB6Ezq/hq+sB4AcXeXEP+ZhGVo9vRimIQD5v5oPAZCupgDI9wg8/qz/1Xz55usyeyAfgMMQ9GU2Op4eAchpOIJQQEz/VuPlm6/K7IH6AMjgGzdl6QtyX5jWjpQFevF3lq3xf6yhrOlIAUgQCojR8gmE+l9Nl2++JrMH6gEgR5UA5KYsc+AZmCbQCDi+IvgEQMob1XBEAHIajgBMLV+0kCdws6aGu3zqfkV9AGTwjftg3JRVVRAtHQEXX/wbAcoXP5d5CID8GoJKvqDAloKOoIz/y7x8c3pmD4zhaqwjRzCYyQg5gr2ZgsFTLweWr8XQgsXjbwLWrnNtMlKgNoLBmZAa7PTCAuYIBlMvlWQswwr2UlUw45jdDSx8HbD+Ctd+HVCwePKbgJV9aASDM8Yg59TWFDysYPBtmYK91IbNOHaPA/M7gUXKXA4hWDz79cA8+W0aweCMURj+1HYfcBjBYO54MMY3tGDv8I3nmWSHOzYOLJ0LLPGXAQWLz3oB8MQUsEa16kYwOG8whjh74yJkUMFgbsNlCfYO0epwissVY34bsHw2sEIRkAEEi/dcU0SP5qhF1ggG5w3GEGdXr4L5134Fg4kAjuDQgr1DtDqcUmZETwArZwAru4BVqsv0KVh8/o3F4v0QXZBGMDhvMIY4u3MYhv95Zh+Cu1xBcxuOU/HfeDIq5cv7FuwdotXhlCBXjOXZAnyrO4BV6in0IVh8wStLuWCsUAyvEQzOG5ABz+4eB+R/ewnu/kOP/3G/l4kJTERlljQtIot2e53/IwO2OPl4FLtcnCqAp9cahT56CBZf+LpSLhhz1N5qBIPzBmTAs/sLRHcTDKbiNHdBGGymOC/3hglEvgjAnoK9A7Y4+XgiV4zVWYDAs/etxaubYPFFP1QkLtCIP8neaASD8wZkwLP7AyC/tJNg8L/xLNBu+YBdBXsHbHEFAINcMVamgdWZAoRrfPdXm8KitLdmgYveWAq+2y7iMqfuRjA4b1AGOLt/APJLqwSD3+y5T1yI0AoSbAxMMzGV1o8/My2ro2DvAK2t+GgiV4zj4+3AIwDXtwBrVJeuECze+9aW4Dut4PxkIhYsdetGMDhvoDqcPRgA+SWp4O4veQ5Uv/mAGwR78+6rQq4Yq9PAOi2fA4/vBkKudKVU7VZw77uKvWFuZbtcMNb5v0YwOG9g+jx7cADyi6Pg7gccgIxlcA5TKhaD01yYKBmVFpBZMfx/m2Bvny3t8LGqoqTliZbVI+gMgHwnMAnCIFi897cLAAZ6QyzFzzSCwXkD1OPs4QDIL5XgLmk5JHk/SD5gKdibd38VcsVYGmuBTaAzEHLHgyCcaokB7/1IkUET5IKxwF5pBIPzBqbPs4cHIC/AaeqvPL9pmHxAE+zts6VdLCD/lcgVY3UyWD0Bj1ZwqgCggXA7sPfWAoAJvaEtZBrB4Lyx6efsPADyCtmCvf00s/NnOsgVY3m8BTRZPZuGBUACdArY+5lWDqGmYbIrLHEx0ggG5w1OH2fnA7CPizQfaXqgUw80AGywMdIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0BxoAjrT7m4s3AGwwMNIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0B8ZYNMbkX+ZekpuIiOQrPar+xs889HJg6jZg5jAwvVZ8B+ll9PlO5/Fc/o+ECjnHfi8zYfkvM5ulmp4qJXVqx5deD4zfAkw/CGxdAZgoHfuh131QkaI5hu8Bs4Ds8B0AWLnIRGCBsFfn87JffDMwdjOw5R5g8giwZa34jnQQUwDo99wBfJ4TM7COiNdlaj2rA/jeV/vfDeATAP4UGH8I2Lrc6gc+SHqY4oMZ74VSKM0xfA+UUzB/oBUUCKMl6zSQ/PsXqZD5KQC/A0w/DEwcAcYXgYnVwppwADuBkefnCim90FmBWXwnK87Uen53BI8sbuwqaz9p5UgnQhBS+ZN1zE8Ak0utviCwq8DI8/nx5hi+Bzb4gJzKZE1SEFZZgS9/2pWR/gTAJ4HJQ8DEMWB8ARhfBsaWCwDquwQKvvNgHXvOcYVbPFJPkw+dDxC/W1Y4tWDpw/Rlgo4lo1T4/KxTihDNpJwj3/UiMLXemprjffC7eWpzDN8DlYsQDiKtVxzEqoHkyX9HRizW+nIgaQnvAiaeBCbmC0s4tgSMu2rMePAR9X252jXklaTFU108K0MHav/nvJ6ZxVVk9OI7GR2IZoGQNc/HgbHgIwqILIVujuF7oOMqWFawCoRxkfEIB5CWgkREBCNf9wMTc8A4QciBWyoGz16rwNgaML5eWKpctYZL3N+TWLX0gvtuP0HHk2n16JDyxXmVhfU0qywbJbr5GSuXKxA/sV5Y9UYWdnjwyS3qKKgarWA69Wg6fjQOIK0HadnIjPVFB+AiME4AuiUkCFnESyCSkmAuU7Cjm15wX+2X2ifBRn9A8mKcW2UFjULVQcgVDl80u40SYh763FfvquhLCxitoBYUsoJfjXKttByMq9CKcHn4sPuCbgXNJwyWkECcz5Q376UX3LNncZyQAAADEklEQVT9fFgIJs6lBBwtn3Tt6FpIz4RWnuQxPh2XIGzm4CwQ9hWIFgBTK0gQHiIAJddKq0ELQh+KL1qUR4MvSEsoENIKrgALHNiMox+94K7tl9qnnMio8MSf6SNwGpYVjCDk/Ju7isq496fCqX0BkDeqlWwKwic1gAQSpzGREnFgREz01eALLvvq2Kfi45m6cf3qBXdsfxRbJMho8dimqOhEK8cXQRr9QVpvPoDNMXQP9A3ACELFxPh+jACkP0fLIKFCCRRqKuPUdqjlC9o07JZwKVNHeBC94DQcZO0XAAkmgotAk9QYrR9f/BvByYfMSATDVMzwTXMM3QMDAVAgVHCZ7/MaQK4QZUHiNCbBQlqUw74YCb7gcmYkelC9YFlwvVv7RRAorTuBkECU9asCID9/x9B935zYzyKkqpfiNHxcA0gLQgvBAaPVkCqm3h2AtC5m/RyEqzw/4xhGL3hD++MmslgqCbgUfLKAcRrmTlBzDN0DA1tAXUlWcDm1IOIIJAjlT/Fd05lbFQFwjdtgGcewesFt7Rc/Gx8iWjUCjGCT1YvWT1MwgUqrf3NG45tTbcu0aximWx9xENcEQHGbcYAEwtSXSqY0gnCdgeuMI0cvuGx/FUGgFhwEYrR80QckWN+X0fjm1DwAWv8RgJFilJZBznz0pQg+AZAAlVWh1GvGka0XzB0cCQi30aSGVa9AF62fLOB7MhrfnJoPwPER59Px+o3e76mL5Kwp2G57xPl0kxc3er+nLvyKtLmhfUC78RHn081ONnq/pzcAR5xPR9mRRu/31IVgvgUccT4dNaobvd/TGYAjzqejumqj93s6A3DE+XRUg2VSCjdaGr3fUw+I+VPwiPPpqJjO8J1Nw43e7ymHwHoAKMFd7QErAeEE5NNJMb3R+z3lsGcNzgfgiPPpomJ6o/d76oGwPgCOKJ8uKqY3er+nKwBHmE+noqRG7/fUA199U/AI8+kEwEbv93QHoEhZTnA+nYqSGr3fBoAtaiqBUImdm5hPJwA2er+nKwBHnE+X1gUzSbnR+z11wPj/AeCpPDD3t7rvAAAAAElFTkSuQmCC",gQ="uniform sampler2D weightMap;varying vec2 vOffset0;varying vec2 vOffset1;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 a;a.x=texture2D(weightMap,vOffset0).a;a.y=texture2D(weightMap,vOffset1).g;a.wz=texture2D(weightMap,uv).rb;vec4 color=inputColor;if(dot(a,vec4(1.0))>=1e-5){bool h=max(a.x,a.z)>max(a.y,a.w);vec4 blendingOffset=vec4(0.0,a.y,0.0,a.w);vec2 blendingWeight=a.yw;movec(bvec4(h),blendingOffset,vec4(a.x,0.0,a.z,0.0));movec(bvec2(h),blendingWeight,a.xz);blendingWeight/=dot(blendingWeight,vec2(1.0));vec4 blendingCoord=blendingOffset*vec4(texelSize,-texelSize)+uv.xyxy;color=blendingWeight.x*texture2D(inputBuffer,blendingCoord.xy);color+=blendingWeight.y*texture2D(inputBuffer,blendingCoord.zw);}outputColor=color;}",yQ="varying vec2 vOffset0;varying vec2 vOffset1;void mainSupport(const in vec2 uv){vOffset0=uv+texelSize*vec2(1.0,0.0);vOffset1=uv+texelSize*vec2(0.0,1.0);}",Wa={LOW:0,MEDIUM:1,HIGH:2,ULTRA:3},Mx=class extends Jo{constructor({preset:e=Wa.MEDIUM,edgeDetectionMode:i=wf.COLOR,predicationMode:s=AX.DISABLED}={}){super("SMAAEffect",gQ,{vertexShader:yQ,blendFunction:Mt.NORMAL,attributes:Zo.CONVOLUTION|Zo.DEPTH,uniforms:new Map([["weightMap",new he(null)]])});let a,o;arguments.length>1&&(a=arguments[0],o=arguments[1],arguments.length>2&&(e=arguments[2]),arguments.length>3&&(i=arguments[3])),this.renderTargetEdges=new ft(1,1,{minFilter:tt,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetEdges.texture.name="SMAA.Edges",this.renderTargetWeights=this.renderTargetEdges.clone(),this.renderTargetWeights.texture.name="SMAA.Weights",this.uniforms.get("weightMap").value=this.renderTargetWeights.texture,this.clearPass=new V_(!0,!1,!1),this.clearPass.overrideClearColor=new We(0),this.clearPass.overrideClearAlpha=1,this.edgeDetectionPass=new Yn(new _X),this.edgeDetectionMaterial.edgeDetectionMode=i,this.edgeDetectionMaterial.predicationMode=s,this.weightsPass=new Yn(new RX);let c=new Lp;c.onLoad=()=>{let d=new tr(a);d.name="SMAA.Search",d.magFilter=Vt,d.minFilter=Vt,d.generateMipmaps=!1,d.needsUpdate=!0,d.flipY=!0,this.weightsMaterial.searchTexture=d;let g=new tr(o);g.name="SMAA.Area",g.magFilter=tt,g.minFilter=tt,g.generateMipmaps=!1,g.needsUpdate=!0,g.flipY=!1,this.weightsMaterial.areaTexture=g,this.dispatchEvent({type:"load"})},c.itemStart("search"),c.itemStart("area"),a!==void 0&&o!==void 0?(c.itemEnd("search"),c.itemEnd("area")):typeof Image<"u"&&(a=new Image,o=new Image,a.addEventListener("load",()=>c.itemEnd("search")),o.addEventListener("load",()=>c.itemEnd("area")),a.src=t3,o.src=r3),this.applyPreset(e)}get edgesTexture(){return this.renderTargetEdges.texture}getEdgesTexture(){return this.edgesTexture}get weightsTexture(){return this.renderTargetWeights.texture}getWeightsTexture(){return this.weightsTexture}get edgeDetectionMaterial(){return this.edgeDetectionPass.fullscreenMaterial}get colorEdgesMaterial(){return this.edgeDetectionMaterial}getEdgeDetectionMaterial(){return this.edgeDetectionMaterial}get weightsMaterial(){return this.weightsPass.fullscreenMaterial}getWeightsMaterial(){return this.weightsMaterial}setEdgeDetectionThreshold(e){this.edgeDetectionMaterial.edgeDetectionThreshold=e}setOrthogonalSearchSteps(e){this.weightsMaterial.orthogonalSearchSteps=e}applyPreset(e){let i=this.edgeDetectionMaterial,s=this.weightsMaterial;switch(e){case Wa.LOW:i.edgeDetectionThreshold=.15,s.orthogonalSearchSteps=4,s.diagonalDetection=!1,s.cornerDetection=!1;break;case Wa.MEDIUM:i.edgeDetectionThreshold=.1,s.orthogonalSearchSteps=8,s.diagonalDetection=!1,s.cornerDetection=!1;break;case Wa.HIGH:i.edgeDetectionThreshold=.1,s.orthogonalSearchSteps=16,s.diagonalSearchSteps=8,s.cornerRounding=25,s.diagonalDetection=!0,s.cornerDetection=!0;break;case Wa.ULTRA:i.edgeDetectionThreshold=.05,s.orthogonalSearchSteps=32,s.diagonalSearchSteps=16,s.cornerRounding=25,s.diagonalDetection=!0,s.cornerDetection=!0;break}}setDepthTexture(e,i=ji){this.edgeDetectionMaterial.depthBuffer=e,this.edgeDetectionMaterial.depthPacking=i}update(e,i,s){this.clearPass.render(e,this.renderTargetEdges),this.edgeDetectionPass.render(e,i,this.renderTargetEdges),this.weightsPass.render(e,this.renderTargetEdges,this.renderTargetWeights)}setSize(e,i){this.edgeDetectionMaterial.setSize(e,i),this.weightsMaterial.setSize(e,i),this.renderTargetEdges.setSize(e,i),this.renderTargetWeights.setSize(e,i)}dispose(){let{searchTexture:e,areaTexture:i}=this.weightsMaterial;e!==null&&i!==null&&(e.dispose(),i.dispose()),super.dispose()}static get searchImageDataURL(){return t3}static get areaImageDataURL(){return r3}},vQ=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#if VIGNETTE_TECHNIQUE == 0
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#else
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#endif
outputColor=vec4(color,inputColor.a);}`,Ex={DEFAULT:0,ESKIL:1},g3=class extends Jo{constructor({blendFunction:e=Mt.NORMAL,technique:i=Ex.DEFAULT,eskil:s=!1,offset:a=.5,darkness:o=.5}={}){super("VignetteEffect",vQ,{blendFunction:e,defines:new Map([["VIGNETTE_TECHNIQUE",i.toFixed(0)]]),uniforms:new Map([["offset",new he(a)],["darkness",new he(o)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(e){this.technique!==e&&(this.defines.set("VIGNETTE_TECHNIQUE",e.toFixed(0)),this.setChanged())}get eskil(){return this.technique===Ex.ESKIL}set eskil(e){this.technique=e?Ex.ESKIL:Ex.DEFAULT}getTechnique(){return this.technique}setTechnique(e){this.technique=e}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}get darkness(){return this.uniforms.get("darkness").value}set darkness(e){this.uniforms.get("darkness").value=e}getDarkness(){return this.darkness}setDarkness(e){this.darkness=e}},li=class{constructor(e,i){this.enabled=!1,this.effect=new e(i),Object.defineProperty(this,"opacity",{enumerable:!0,set(s){this.effect.blendMode.opacity.value=s},get(){return this.effect.blendMode.opacity.value}}),Object.defineProperty(this,"blendFunction",{enumerable:!0,set(s){this.effect.blendMode.setBlendFunction(Number(s))},get(){return this.effect.blendMode.blendFunction}}),this.blendFunction=Mt.NORMAL}},Af=class extends li{constructor(){super(l3),this.blendFunction=Mt.SCREEN}set intensity(e){this.effect.intensity=e}get intensity(){return this.effect.intensity}set luminanceThreshold(e){this.effect.luminanceMaterial.threshold=e}get luminanceThreshold(){return this.effect.luminanceMaterial.threshold}set luminanceSmoothing(e){this.effect.luminanceMaterial.smoothing=e}get luminanceSmoothing(){return this.effect.luminanceMaterial.smoothing}set blurScale(e){this.effect.blurPass.scale=e}get blurScale(){return this.effect.blurPass.scale}set kernelSize(e){this.effect.blurPass.kernelSize=e}get kernelSize(){return this.effect.blurPass.kernelSize}},_f=class extends li{constructor(){super(c3)}set contrast(e){this.effect.uniforms.get("contrast").value=e}get contrast(){return this.effect.uniforms.get("contrast").value}set brightness(e){this.effect.uniforms.get("brightness").value=e}get brightness(){return this.effect.uniforms.get("brightness").value}},Ef=class extends li{constructor(){super(h3),this.effect.offset=new z$1(.01,.01)}set offset(e){this.effect.offset.set(e[0]/1e3,e[1]/1e3)}get offset(){return[this.effect.offset.x*1e3,this.effect.offset.y*1e3]}},Tf=class extends li{constructor(){super(u3)}},Mf=class extends li{constructor(){super(f3),this._hue=0}set hue(e){this._hue=e,this.effect.setHue(e)}get hue(){return this._hue}set saturation(e){this.effect.uniforms.get("saturation").value=e}get saturation(){return this.effect.uniforms.get("saturation").value}},Cf=class extends li{constructor(){super(p3),this.blendFunction=Mt.OVERLAY}},Pf=class extends li{constructor(){super(g3)}get eskil(){return this.effect.eskil}set eskil(e){this.effect.eskil=e}get darkness(){return this.effect.uniforms.get("darkness").value}set darkness(e){this.effect.uniforms.get("darkness").value=e}get offset(){return this.effect.uniforms.get("offset").value}set offset(e){this.effect.uniforms.get("offset").value=e}},Df=class extends li{constructor(e){super(d3,e)}set focalLength(e){this.effect.circleOfConfusionMaterial.uniforms.focalLength.value=e}get focalLength(){return this.effect.circleOfConfusionMaterial.uniforms.focalLength.value}set focusDistance(e){this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value=e}get focusDistance(){return this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value}get bokehScale(){return this.effect.bokehScale}set bokehScale(e){this.effect.bokehScale=e}},Of=class extends li{constructor(){super(m3)}get granularity(){return this.effect.getGranularity()}set granularity(e){this.effect.setGranularity(e)}},y3=`#define GLSLIFY 1
varying vec2 vUv;varying vec2 vTexCoords[9];uniform vec2 resolution;void main(){vUv=position.xy*0.5+0.5;vec2 texelSize=vec2(1.0)/resolution;vTexCoords[0]=vUv+vec2(-texelSize.x,-texelSize.y);vTexCoords[1]=vUv+vec2(0.0,-texelSize.y);vTexCoords[2]=vUv+vec2(texelSize.x,-texelSize.y);vTexCoords[3]=vUv+vec2(-texelSize.x,0.0);vTexCoords[4]=vUv+vec2(0.0,0.0);vTexCoords[5]=vUv+vec2(texelSize.x,0.0);vTexCoords[6]=vUv+vec2(-texelSize.x,texelSize.y);vTexCoords[7]=vUv+vec2(0.0,texelSize.y);vTexCoords[8]=vUv+vec2(texelSize.x,texelSize.y);gl_Position=vec4(position.xy,1.0,1.0);}`,v3=`#define GLSLIFY 1
#include <common>
varying vec2 vUv;varying vec2 vTexCoords[9];uniform sampler2D inputBuffer;uniform sampler2D historyBuffer;uniform sampler2D velocityBuffer;uniform sampler2D depthBuffer;uniform vec2 resolution;
#define USE_YCOCG
#define USE_CATMULL_ROM
const float feedback_min=0.5;const float feedback_max=0.95;vec3 RGB_YCoCg(vec3 c){return vec3(c.x/4.0+c.y/2.0+c.z/4.0,c.x/2.0-c.z/2.0,-c.x/4.0+c.y/2.0-c.z/4.0);}vec3 YCoCg_RGB(vec3 c){return clamp(vec3(c.x+c.y-c.z,c.x+c.z,c.x-c.y-c.z),vec3(0.0),vec3(1.0));}vec4 sample_color(sampler2D tex,vec2 uv){
#ifdef USE_YCOCG
vec4 c=texture(tex,uv);return vec4(RGB_YCoCg(c.rgb),c.a);
#else
return texture(tex,uv);
#endif
}vec4 sample_catmull_rom(sampler2D tex,vec2 uv,vec2 texSize){vec2 samplePos=uv*texSize;vec2 texPos1=floor(samplePos-0.5)+0.5;vec2 f=samplePos-texPos1;vec2 w0=f*(-0.5+f*(1.0-0.5*f));vec2 w1=1.0+f*f*(-2.5+1.5*f);vec2 w2=f*(0.5+f*(2.0-1.5*f));vec2 w3=f*f*(-0.5+0.5*f);vec2 w12=w1+w2;vec2 offset12=w2/(w1+w2);vec2 texPos0=texPos1-1.0;vec2 texPos3=texPos1+2.0;vec2 texPos12=texPos1+offset12;texPos0/=texSize;texPos3/=texSize;texPos12/=texSize;vec4 result=vec4(0.0);result+=texture2D(tex,vec2(texPos12.x,texPos0.y))*w12.x*w0.y;result+=texture2D(tex,vec2(texPos0.x,texPos12.y))*w0.x*w12.y;result+=texture2D(tex,vec2(texPos12.x,texPos12.y))*w12.x*w12.y;result+=texture2D(tex,vec2(texPos3.x,texPos12.y))*w3.x*w12.y;result+=texture2D(tex,vec2(texPos12.x,texPos3.y))*w12.x*w3.y;return result;}vec3 choose_motion_vector(){
#ifdef CHOOSE_LONGEST_MOTION_VECTOR
float longest=-1.0;vec3 v_choose=vec3(-1.0);for(int i=0;i<9;i++){vec3 v=texture2D(velocityBuffer,vTexCoords[i]).rgb;float l=length(v.xy);if(l>longest){longest=l;v_choose=v;}}return v_choose;
#else
float closest_depth=1000.0;vec2 closest_uv_offset=vec2(0.0);for(int i=0;i<9;i++){float neighbor_depth=texture2D(depthBuffer,vTexCoords[i]).r;if(neighbor_depth<closest_depth){closest_uv_offset=vTexCoords[i];closest_depth=neighbor_depth;}}return texture2D(velocityBuffer,closest_uv_offset).rgb;
#endif
}vec4 clipAabb(vec3 aabb_min,vec3 aabb_max,vec4 avg,vec4 input_texel){const float FLT_EPS=0.00000001;vec3 p_clip=0.5*(aabb_max+aabb_min);vec3 e_clip=0.5*(aabb_max-aabb_min)+FLT_EPS;vec4 v_clip=input_texel-vec4(p_clip,avg.w);vec3 v_unit=v_clip.xyz/e_clip;vec3 a_unit=abs(v_unit);float ma_unit=max(a_unit.x,max(a_unit.y,a_unit.z));if(ma_unit>1.0){return vec4(p_clip,avg.w)+v_clip/ma_unit;}else{return input_texel;}}vec3 clip_aabb_variance(in vec3 cOld,in vec3 cNew,in vec3 centre,in vec3 halfSize){if(all(lessThanEqual(abs(cOld-centre),halfSize))){return cOld;}vec3 dir=(cNew-cOld);vec3 near=centre-sign(dir)*halfSize;vec3 tAll=(near-cOld)/dir;float t=0.0001;for(int i=0;i<3;i++){if(tAll[i]>=0.0&&tAll[i]<t){t=tAll[i];}}if(t>=0.0001){return cOld;}return cOld+dir*t;}void main(){vec3 v=choose_motion_vector();vec2 velocity=v.rg;vec2 previousPixelPos=vUv-velocity;vec4 currentColor=sample_color(inputBuffer,vUv);
#ifdef USE_CATMULL_ROM
vec4 previousColor=sample_catmull_rom(historyBuffer,previousPixelPos,resolution);
#else
vec4 previousColor=sample_color(historyBuffer,previousPixelPos);
#endif
#ifdef USE_YCOCG
previousColor=vec4(RGB_YCoCg(previousColor.rgb),previousColor.a);
#endif
vec4 ctl=sample_color(inputBuffer,vTexCoords[0]);vec4 ctc=sample_color(inputBuffer,vTexCoords[1]);vec4 ctr=sample_color(inputBuffer,vTexCoords[2]);vec4 cml=sample_color(inputBuffer,vTexCoords[3]);vec4 cmc=sample_color(inputBuffer,vTexCoords[4]);vec4 cmr=sample_color(inputBuffer,vTexCoords[5]);vec4 cbl=sample_color(inputBuffer,vTexCoords[6]);vec4 cbc=sample_color(inputBuffer,vTexCoords[7]);vec4 cbr=sample_color(inputBuffer,vTexCoords[8]);vec4 cmin=min(ctl,min(ctc,min(ctr,min(cml,min(cmc,min(cmr,min(cbl,min(cbc,cbr))))))));vec4 cmax=max(ctl,max(ctc,max(ctr,max(cml,max(cmc,max(cmr,max(cbl,max(cbc,cbr))))))));vec4 cavg=(ctl+ctc+ctr+cml+cmc+cmr+cbl+cbc+cbr)/9.0;vec4 cmin5=min(ctc,min(cml,min(cmc,min(cmr,cbc))));vec4 cmax5=max(ctc,max(cml,max(cmc,max(cmr,cbc))));vec4 cavg5=(ctc+cml+cmc+cmr+cbc)/5.0;cmin=0.5*(cmin+cmin5);cmax=0.5*(cmax+cmax5);cavg=0.5*(cavg+cavg5);
#ifdef USE_YCOCG
vec2 chroma_extent=vec2(0.25*0.5*(cmax.r-cmin.r));vec2 chroma_center=currentColor.gb;cmin.yz=chroma_center-chroma_extent;cmax.yz=chroma_center+chroma_extent;cavg.yz=chroma_center;
#endif
vec4 previousColorClipped=clamp(previousColor,cmin,cmax);
#ifdef LUMINANCE_DIFFERENCES
#ifdef USE_YCOCG
float lum0=currentColor.r;float lum1=previousColorClipped.r;
#else
float lum0=luminance(currentColor.rgb);float lum1=luminance(previousColorClipped.rgb);
#endif
float unbiased_diff=abs(lum0-lum1)/max(lum0,max(lum1,0.2));float unbiased_weight=1.0-unbiased_diff;float unbiased_weight_sqr=unbiased_weight*unbiased_weight;float k_feedback=mix(feedback_min,feedback_max,unbiased_weight_sqr);vec4 result=mix(currentColor,previousColorClipped,vec4(k_feedback));
#else
const float alpha=0.1;vec4 result=mix(currentColor,previousColorClipped,1.0-alpha);
#endif
#ifdef USE_YCOCG
gl_FragColor=vec4(YCoCg_RGB(result.rgb).rgb,result.a);
#else
gl_FragColor=result;
#endif
}`,x3=`#define GLSLIFY 1
varying vec2 vUv;void main(){gl_Position=vec4(position.xy,1.0,1.0);vUv=position.xy*0.5+0.5;}`,b3=`#define GLSLIFY 1
layout(location=1)out vec4 gVelocity;varying vec2 vUv;uniform sampler2D inputBuffer;void main(){gl_FragColor=texture2D(inputBuffer,vUv);gVelocity=vec4(0.0);}`,If=class extends lt{constructor(){super({name:"PassthroughMaterial",uniforms:{inputBuffer:new he(null)},blending:er,depthWrite:!1,depthTest:!1,vertexShader:x3,fragmentShader:b3})}set inputBuffer(e){this.uniforms.inputBuffer.value=e}},Cx=class extends wi{constructor(){super("TAAResolvePass"),this.MRTCompatible=!0,this.needsSwap=!1,this.passThroughMaterial=new If,this.resolutionVector=new z$1,this.resolveMaterial=new lt({name:"TAAResolveMaterial",uniforms:{inputBuffer:new he(null),historyBuffer:new he(null),velocityBuffer:new he(null),depthBuffer:new he(null),resolution:new he(new z$1)},blending:er,depthWrite:!1,depthTest:!1,vertexShader:y3,fragmentShader:v3}),this.historyRenderTarget=new ft(1024,1024,{minFilter:tt,stencilBuffer:!1,depthBuffer:!1}),this.historyRenderTarget.texture.name="TAA.History",this.resultRenderTarget=new ft(1024,1024,{minFilter:tt,stencilBuffer:!1,depthBuffer:!1}),this.resultRenderTarget.texture.name="TAA.Output"}setSize(e,i){this.historyRenderTarget.setSize(e,i),this.resultRenderTarget.setSize(e,i)}render(e,i){this.fullscreenMaterial=this.resolveMaterial,this.resolveMaterial.uniforms.inputBuffer.value=i.texture[0],this.resolveMaterial.uniforms.velocityBuffer.value=i.texture[1],this.resolveMaterial.uniforms.depthBuffer.value=i.depthTexture,this.resolveMaterial.uniforms.historyBuffer.value=this.historyRenderTarget.texture,this.resolveMaterial.uniforms.resolution.value.set(i.width,i.height),e.setRenderTarget(this.resultRenderTarget),e.render(this.scene,this.camera),this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=this.resultRenderTarget.texture,e.setRenderTarget(this.historyRenderTarget),e.render(this.scene,this.camera);let s=this.renderToScreen?null:i;this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=this.resultRenderTarget.texture,e.setRenderTarget(s),e.render(this.scene,this.camera)}dispose(){this.resultRenderTarget.dispose(),this.historyRenderTarget.dispose(),this.resolveMaterial.dispose(),this.passThroughMaterial.dispose()}},Px=class extends wi{constructor(e,i,s){super("TransmissionPass",void 0,i),this.MRTCompatible=!0,this.depthPass=new z_(e,i,{renderTarget:s.transmissionDepthTarget}),this.passThroughMaterial=new If,this.splineScene=e,this.needsSwap=!1}updatePasses(e){this.passThroughMaterial=new If,this.depthPass=new z_(this.splineScene,this.camera,{renderTarget:e.transmissionDepthTarget})}setCamera(e){this.camera=e}setScene(e){this.splineScene=e}render(e,i,s){let a=this.camera.layers.mask,o=e;o.setRenderTarget(o.transmissionRenderTarget),this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=i.texture[0],o.clear(),o.render(this.scene,this.camera),this.camera.layers.disable(3),this.depthPass.render(e,i,s),o.shadowMap.needsUpdate=!1,o.shadowMap.autoUpdate=!1;let c=this.renderToScreen?null:i;this.camera.layers.set(3),e.setRenderTarget(c),e.render(this.splineScene,this.camera),this.camera.layers.mask=a}},S3=new Pi,_Q=new lt({transparent:!0,vertexShader:`
        void main() {
            gl_Position = vec4(0.0);
        }
    `,fragmentShader:`
        layout(location = 1) out vec4 gVelocity;

        void main() {
            gl_FragColor = vec4(0.0);
			gVelocity = vec4(0.0);
        }
    `}),su=class extends wi{constructor(e,i,s){super("OpaquePass",i??S3,s),this.MRTCompatible=!0,this.hasTransmissionPass=!1,this.clear=!0,this.clearColorOnly=!1,this.clearDepth=!1,this.needsSwap=!1,this.originalMaterials=new Map,this.MRTCompatible=e}set splatViewer(e){this._splatViewer=e}get splatViewer(){return this._splatViewer}setCamera(e){this.camera=e}setScene(e){this.scene=e??S3}getScene(){return this.scene}render(e,i){var a;this.camera.layers.enable(3),this.hasTransmissionPass&&(this.originalMaterials.clear(),this.scene.traverse(o=>{o.layers.isEnabled(3)&&o instanceof pr&&(this.originalMaterials.set(o.id,o.material),o.material=_Q)}),e.shadowMap.needsUpdate=!0,e.shadowMap.autoUpdate=!0),this.camera.layers.enable(8);let s=this.renderToScreen?null:i;if(e.setRenderTarget(s),this.clearColorOnly&&e.clear(!0,!1,!0),this.clear&&e.clear(),((a=this._splatViewer)==null?void 0:a.splatRenderingInitialized)===!0){let o=e.autoClear;e.autoClear=!1,e.render(this.scene,this.camera),this._splatViewer.update(),e.render(this._splatViewer.splatMesh,this.camera),e.autoClear=o}else e.render(this.scene,this.camera);this.clearDepth&&e.clear(!1,!0,!1),this.hasTransmissionPass&&this.originalMaterials.forEach((o,c)=>{let d=this.scene.getObjectById(c);d&&(d.material=o)})}},Dx=class{constructor(e,{depthBuffer:i=!0,stencilBuffer:s=!1,multisampling:a=0,frameBufferType:o=0}={}){this.renderer=e,this.helperStartIndex=0,this.copyPass=new Ym,this.depthTexture=null,this.timer=new a3,this._width=1,this._height=1,this.passes=[],this.helperPasses=[],this.autoRenderToScreen=!0,this.inputBuffer=this.createBuffer(i,s,o,a,!0,"input buffer mrt"),this.inputBufferSingle=this.createBuffer(i,s,o,a,!1," input buffer single"),this.inputBufferSingle.texture.dispose(),this.inputBufferSingle.depthTexture.dispose(),this.inputBufferSingle.texture=this.inputBuffer.texture[0],this.inputBufferSingle.depthTexture=this.inputBuffer.depthTexture,this.outputBuffer=this.inputBuffer.clone(),this.outputBuffer.name="output buffer mrt",this.outputBufferSingle=this.createBuffer(i,s,o,a,!1,"output buffer single"),this.outputBufferSingle.texture.dispose(),this.outputBufferSingle.depthTexture.dispose(),this.outputBufferSingle.texture=this.outputBuffer.texture[0],this.outputBufferSingle.depthTexture=this.outputBuffer.depthTexture,this.setRenderer(e)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(e){let i=this.inputBuffer,s=this.multisampling;s>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):s!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),console.log("creating new input buffer"),this.inputBuffer=this.createBuffer(i.depthBuffer,i.stencilBuffer,i.texture.type,e,!0,"new input buffer"),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(e){var i;if(this.renderer=e,e!==null){let s=e.getSize(new z$1),a=((i=e.getContext().getContextAttributes())==null?void 0:i.alpha)??!1,o=this.inputBuffer.texture[0].type;o===Ir$1&&e.outputEncoding===at&&(this.inputBuffer.texture[0].encoding=at,this.outputBuffer.texture[0].encoding=at,this.inputBuffer.dispose(),this.outputBuffer.dispose(),console.log("doing some kinda dispose??")),e.autoClear=!1,this.setSize(s.width,s.height,!1);for(let c of this.passes)c.initialize(e,a,o)}}replaceRenderer(e,i=!0){let s=this.renderer,a=s.domElement.parentNode;return this.setRenderer(e),i&&a!==null&&(a.removeChild(s.domElement),a.appendChild(e.domElement)),s}createDepthTexture(){let e=this.depthTexture=new gs(this._width,this._height);return this.inputBuffer.depthTexture=e,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(e.format=cl,e.type=ol):e.type=js,e}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(let e of this.passes)e.setDepthTexture(null)}}createBuffer(e,i,s,a,o,c){let d=this.renderer,g=d===null?new z$1:d.getDrawingBufferSize(new z$1),b={minFilter:tt,magFilter:tt,wrapS:Kt,wrapT:Kt,stencilBuffer:i,depthBuffer:e},j;return a>0?(j=new ft(g.width,g.height,b),j.samples=a):(o?(j=new Sy(g.width,g.height,2,b),j.texture[1].type=va):j=new ft(g.width,g.height,b),j.depthTexture=new gs(2048,2048),j.depthTexture.type=Sr$1),s===Ir$1&&d!==null&&d.outputEncoding===at&&(Array.isArray(j.texture)?j.texture.forEach(_e=>_e.encoding=at):j.texture.encoding=at),Array.isArray(j.texture)?j.texture.forEach((_e,$)=>{_e.name=`EffectComposer.Buffer ${o} ${$}`,_e.generateMipmaps=!1}):(j.texture.name=`EffectComposer.Buffer ${o}`,j.texture.generateMipmaps=!1),j.name=c,j}addPass(e,i){var g;let s=this.passes,a=this.renderer,o=a.getDrawingBufferSize(new z$1),c=((g=a.getContext().getContextAttributes())==null?void 0:g.alpha)??!1,d;if(e.MRTCompatible&&(d=this.inputBuffer.texture[0].type),e.MRTCompatible||(d=this.inputBuffer.texture.type),e.setRenderer(a),e.setSize(o.width,o.height),e.initialize(a,c,d),this.autoRenderToScreen&&(s.length>0&&(s[s.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),i!==void 0?s.splice(i,0,e):s.push(e),this.autoRenderToScreen&&(s[s.length-1].renderToScreen=!0),e.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){let b=this.createDepthTexture();for(e of s)e.setDepthTexture(b)}else e.setDepthTexture(this.depthTexture)}setHelperStartIndex(e){this.helperStartIndex=e}removePass(e){let i=this.passes,s=i.indexOf(e);if(s!==-1&&i.splice(s,1).length>0){if(this.depthTexture!==null){let a=(o,c)=>o||c.needsDepthTexture;i.reduce(a,!1)||(e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&s===i.length&&(e.renderToScreen=!1,i.length>0&&(i[i.length-1].renderToScreen=!0))}}removeAllPasses(){let e=this.passes;this.deleteDepthTexture(),e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){let i=this.renderer,s=this.copyPass,a=this.inputBuffer,o=this.outputBuffer,c=this.inputBufferSingle,d=this.outputBufferSingle,g=!1,b,j,_e,$;e===void 0&&(e=this.timer.update().getDelta());for(let rt of this.passes)rt.enabled&&(rt.MRTCompatible?rt.render(i,a,o,e,g):rt.render(i,c,d,e,g),rt.needsSwap&&(g&&(s.renderToScreen=rt.renderToScreen,b=i.getContext(),j=i.state.buffers.stencil,j.setFunc(b.NOTEQUAL,1,4294967295),s.render(i,a,o,e,g),j.setFunc(b.EQUAL,1,4294967295)),_e=a,$=c,a=o,c=d,o=_e,d=$),rt instanceof o3?g=!0:rt instanceof s3&&(g=!1))}setSize(e,i,s){let a=this.renderer;if(this._width=e,this._height=i,e===void 0||i===void 0){let c=a.getSize(new z$1);e=c.width,i=c.height}a.setSize(e,i,s);let o=a.getDrawingBufferSize(new z$1);this.inputBuffer.setSize(o.width,o.height),this.outputBuffer.setSize(o.width,o.height),this.inputBufferSingle.setSize(o.width,o.height),this.outputBufferSingle.setSize(o.width,o.height);for(let c of this.passes)c.setSize(o.width,o.height)}reset(){let e=this.timer.isAutoResetEnabled();this.dispose(),this.autoRenderToScreen=!0,this.timer.setAutoResetEnabled(e)}dispose(){for(let e of this.passes)e.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.inputBufferSingle!==null&&this.inputBufferSingle.dispose(),this.outputBufferSingle!==null&&this.outputBufferSingle.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},EQ=new lt({name:"CombineMaterial",uniforms:{inputBufferA:new he(null),inputBufferB:new he(null)},blending:er,depthWrite:!1,depthTest:!1,vertexShader:`
varying vec2 vUv;
void main() {
    gl_Position = vec4(position.xy, 1.0, 1.0);
    vUv = position.xy * 0.5 + 0.5;
}
`,fragmentShader:`
    varying vec2 vUv;
    uniform sampler2D inputBufferA;
    uniform sampler2D inputBufferB;

    // TODO: Why do we need these when postpro of framemode is enabled???
    layout(location = 1) out vec4 gVelocity;

    void main() {
	vec4 resA = texture2D(inputBufferA, vUv);
	vec4 resB = texture2D(inputBufferB, vUv);
    float a = resA.a + resB.a * ( 1.0 - resA.a );

	vec4 res;
	res.rgb =  resA.rgb + (resB.rgb * (1.0 - resA.a));
	res.a = resA.a + resB.a * (1.0 - resA.a);
	gl_FragColor = res;
    gVelocity = vec4(0.0);
    }
`}),Ox=class extends wi{constructor(e){super("HelperPass",void 0,e),this.MRTCompatible=!1,this.fullscreenMaterial=EQ,this.helperPass=new su(!1,void 0,this.camera),this.helperPass.hasTransmissionPass=!1,this.helperPass.clear=!1,this.helperPass.renderToScreen=!1,this.helperPassOnTop=new su(!1,void 0,this.camera),this.helperPassOnTop.hasTransmissionPass=!1,this.helperPassOnTop.clear=!1,this.helperPassOnTop.renderToScreen=!1;let i=new Mx({preset:Wa.LOW,edgeDetectionMode:wf.COLOR});this.effectPass=new nu(this.camera,i),this.rt=new ft(10,10,{minFilter:tt,magFilter:tt,wrapS:Kt,wrapT:Kt,depthBuffer:!0})}setSize(e,i){this.rt.setSize(e,i),this.effectPass.setSize(e,i)}set sceneHelpers(e){this.helperPass.setScene(e)}get sceneHelpers(){return this.helperPass.getScene()}set sceneHelpersOnTop(e){this.helperPassOnTop.setScene(e)}get sceneHelpersOnTop(){return this.helperPassOnTop.getScene()}setCamera(e){this.helperPass.setCamera(e),this.helperPassOnTop.setCamera(e)}initialize(e,i,s){super.initialize(e,i,s),this.effectPass.initialize(e,i,s)}dispose(){super.dispose(),this.rt.dispose(),this.effectPass.dispose()}render(e,i,s){this.rt.depthTexture=i.depthTexture;let a=e.getClearAlpha();e.setClearAlpha(0),this.helperPass.clearDepth=!0,this.helperPass.clearColorOnly=!0,this.helperPass.render(e,this.rt),this.helperPassOnTop.render(e,this.rt),this.effectPass.renderToScreen=!1,this.effectPass.render(e,this.rt,s),this.fullscreenMaterial.uniforms.inputBufferA.value=s.texture,this.fullscreenMaterial.uniforms.inputBufferB.value=i.texture,e.setClearAlpha(a),e.setRenderTarget(null),e.clear(),e.render(this.scene,this.camera)}},w3=`#define GLSLIFY 1
#include <skinning_pars_vertex>
out vec3 n;void main(){
#include <beginnormal_vertex>
#include <skinbase_vertex>
#include <skinnormal_vertex>
#include <defaultnormal_vertex>
#include <begin_vertex>
#include <skinning_vertex>
vec4 view_space=viewMatrix*modelMatrix*vec4(transformed,1.0);gl_Position=projectionMatrix*view_space;n=normalize(transformedNormal);}`,A3=`#define GLSLIFY 1
in vec3 n;void main(){gl_FragColor=vec4(n,1.0);}`,_3=`#define GLSLIFY 1
out vec2 v_uv;void main(){v_uv=uv;gl_Position=vec4(position.xy,1.0,1.0);}`,E3=`#define GLSLIFY 1
in vec2 v_uv;const float pi=3.14159265;const float num_steps=4.0;const float num_directions=4.0;uniform float near;uniform float far;uniform float fov;uniform vec4 proj_info;uniform bool is_ortho;uniform vec2 resolution;uniform float radius_of_influence;uniform float radius_in_screen_space;uniform float exponent;uniform vec3 ao_color;uniform float bias;uniform sampler2D texture_depth;uniform sampler2D texture_normals;uniform sampler2D texture_blue_noise;uniform sampler2D texture_blue_noise_in_disk;uniform sampler2D texture_color_pass;uniform int frame_index;uniform bool fog_enabled;uniform float fog_near;uniform float fog_far;vec3 uv_to_view_space(vec2 uv,float eye_z){return vec3((uv*proj_info.xy+proj_info.zw)*(is_ortho ? 1.0 : eye_z),eye_z);}float linearize_depth(float depth_sampled){float z=is_ortho ? depth_sampled : depth_sampled*2.0-1.0;return mix((2.0*near*far)/(far+near-z*(far-near)),near+z*(far-near),float(is_ortho));}vec3 get_view_position(vec2 uv_coords){float linear_depth=linearize_depth(texture(texture_depth,uv_coords).x);return uv_to_view_space(uv_coords,linear_depth);}vec3 min_difference(vec3 p,vec3 right,vec3 left){vec3 v1=right-p;vec3 v2=p-left;return(dot(v1,v1)<dot(v2,v2))? v1 : v2;}vec3 rebuild_normal(in vec2 uv,in vec3 p){vec2 one_over_resolution=1.0/resolution;vec3 r=get_view_position(uv+vec2(one_over_resolution.x,0));vec3 l=get_view_position(uv+vec2(-one_over_resolution.x,0));vec3 t=get_view_position(uv+vec2(0,one_over_resolution.y));vec3 b=get_view_position(uv+vec2(0,-one_over_resolution.y));return normalize(cross(min_difference(p,r,l),min_difference(p,t,b)));}float falloff(float distance_squared){float neg_inv_r2=-1.0/(radius_of_influence*radius_of_influence);return distance_squared*neg_inv_r2+1.0;}float ao_contribution(vec3 P,vec3 N,vec3 S){vec3 to_sample=S-P;float norm_squared=dot(to_sample,to_sample);float norm=sqrt(norm_squared);float cos_theta=dot(N,to_sample)/norm;return clamp(cos_theta-bias,0.0,1.0)*clamp(falloff(norm_squared),0.0,1.0);}float compute_ambient_occlusion(vec2 uv,float radius_in_screen_space,vec3 pc,vec3 view_space_n){vec2 one_over_resolution=1.0/resolution;ivec2 noise_uv=ivec2(int(mod(gl_FragCoord.x,128.0)),int(mod(gl_FragCoord.y,128.0)));float noise=texelFetch(texture_blue_noise,noise_uv,0).r;noise=fract(noise+0.61803398875*float(frame_index));float theta=noise*2.0*3.1415;float ct=cos(theta);float st=sin(theta);float step_size=radius_in_screen_space/(num_steps+1.0);const float angle_step=2.0*pi/num_directions;float contribution=0.0;for(int i=0;i<int(num_directions);++i){float current_pixel=step_size+1.0;for(int j=0;j<int(num_steps);++j){int index=i*int(num_steps)+j;vec2 blue_noise_sample=texelFetch(texture_blue_noise_in_disk,ivec2(index,0),0).rg;vec2 disk_point;disk_point.x=blue_noise_sample.x*ct-blue_noise_sample.y*st;disk_point.y=blue_noise_sample.x*st+blue_noise_sample.y*ct;vec2 sample_direction=disk_point;vec2 snapped_uv=round(current_pixel*sample_direction)*one_over_resolution+uv;vec3 ps=get_view_position(snapped_uv);current_pixel+=step_size;contribution+=ao_contribution(pc,view_space_n,ps);}}float mult=1.0/(1.0-bias);contribution*=mult/(num_directions*num_steps);return clamp(1.0-contribution*2.0,0.0,1.0);}
#define USE_GBUFFER_NORMALS
void main(){vec3 view_space_p=get_view_position(v_uv);
#ifdef USE_GBUFFER_NORMALS
vec3 view_space_n=texture(texture_normals,v_uv).rgb;view_space_n.z*=-1.0;
#else
vec3 view_space_n=-rebuild_normal(v_uv,view_space_p);
#endif
float radius_ss=radius_in_screen_space/(is_ortho ? 1.0 : view_space_p.z);float ao=compute_ambient_occlusion(v_uv,radius_ss,view_space_p,view_space_n);float final=pow(ao,exponent);if(view_space_p.z>=far){final=1.0;}vec3 color=mix(ao_color,vec3(1.0),final);if(fog_enabled){float fog_factor=smoothstep(fog_near,fog_far,view_space_p.z);color=mix(color,vec3(1.0),fog_factor);}gl_FragColor=vec4(color,1.0);}`,T3=`#define GLSLIFY 1
out vec2 v_uv;void main(){gl_Position=vec4(position.xy,1.0,1.0);v_uv=uv;}`,M3=`#define GLSLIFY 1
in vec2 v_uv;uniform sampler2D texture_ao_lrez;uniform sampler2D texture_depth_lrez;uniform sampler2D texture_depth_hrez;uniform float near;uniform float far;float linearize_depth(float depth_sampled){float z=depth_sampled*2.0-1.0;return(2.0*near*far)/(far+near-z*(far-near));}vec2 nearest_depth_filter(in vec2 uv){vec2 resolution=vec2(textureSize(texture_depth_lrez,0));vec2 texel_size=1.0/resolution;vec2 offset=uv-0.5*texel_size;float d_hrez=texture(texture_depth_hrez,uv).r;float a=abs(d_hrez-texture(texture_depth_lrez,offset).r);float b=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(texel_size.x,0.0)).r);float c=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(0.0,texel_size.y)).r);float d=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(texel_size.x,texel_size.y)).r);float min_diff=min(a,min(b,min(c,d)));if(min_diff==a)return offset;if(min_diff==b)return offset+vec2(texel_size.x,0.0);if(min_diff==c)return offset+vec2(0.0,texel_size.y);if(min_diff==d)return offset+vec2(texel_size.x,texel_size.y);}void main(){
#ifdef DEBUG
float d_lrez=texture(texture_depth_lrez,v_uv).r;float d_hrez=texture(texture_depth_hrez,v_uv).r;float output_d=mix(linearize_depth(d_lrez)/far,linearize_depth(d_hrez)/far,step(0.5,v_uv.x));gl_FragColor=vec4(vec3(output_d),1.0);
#else
vec2 filtered_uv=nearest_depth_filter(v_uv);vec4 ao=texture(texture_ao_lrez,filtered_uv);gl_FragColor=vec4(ao.rgb,1.0);gl_FragColor=ao;
#endif
}`,Rf=[[.478712,.875764],[-.337956,-.793959],[-.955259,-.028164],[.864527,.325689],[.209342,-.395657],[-.106779,.672585],[.156213,.235113],[-.413644,-.082856],[-.415667,.323909],[.141896,-.93998],[.954932,-.182516],[-.766184,.410799],[-.434912,-.458845],[.415242,-.078724],[.728335,-.491777],[-.058086,-.066401],[.20299,.686837],[-.808362,-.556402],[.507386,-.640839],[-.723494,-.22924],[.48974,.317826],[-.622663,.765301],[-.01064,.929347],[.663146,.647618],[-.096674,-.413835],[.525945,-.321063],[-.122533,.366019],[.195235,-.687983],[-.563203,.098748],[.418563,.561335],[-.378595,.800367],[.826922,.001024],[-.085372,-.766651],[-.92192,.183673],[-.590008,-.721799],[.167751,-.164393],[.032961,-.56253],[.6329,-.107059],[-.46408,.569669],[-.173676,-.958758],[-.242648,-.234303],[-.275362,.157163],[.382295,-.795131],[.562955,.115562],[.190586,.470121],[.770764,-.297576],[.237281,.93105],[-.666642,-.455871],[-.905649,-.298379],[.33952,.157829],[.701438,-.7041],[-.062758,.160346],[-.220674,.957141],[.642692,.432706],[-.77339,-.015272],[-.671467,.24688],[.158051,.062859],[.806009,.527232],[-.05762,-.247071],[.333436,-.51671],[-.550658,-.315773],[-.652078,.589846],[.008818,.530556],[-.210004,.519896]],IQ=new lt({vertexShader:w3,fragmentShader:A3}),Ix=new lt({vertexShader:T3,fragmentShader:M3,uniforms:{texture_ao_lrez:new he(null),texture_depth_lrez:new he(null),texture_depth_hrez:new he(null),near:new he(null),far:new he(null)}}),Rx=class extends wi{constructor(e,i){super("AmbientOcclusionPass",void 0,i),this.fogEnabled=!1,this.fogNear=1,this.fogFar=1e3,this.frameIndex=0,this._runHalfRes=!0,this._width=1,this._height=1;let s=1024,a=1024;this.gBuffer=new ft(s,a,{type:Sr$1,depthTexture:new gs(s,a),minFilter:tt,magFilter:tt}),this.depthBufferHighRes=new ft(s,a,{depthTexture:new gs(s,a)}),this.aoBuffer=new ft(s,a,{minFilter:tt,magFilter:tt}),this.splineScene=e,this.splineCamera=i;let o=new Float32Array(Rf.length*2);for(let d=0;d<Rf.length;d++){let g=d*2;o[g+0]=Rf[d][0],o[g+1]=Rf[d][1]}this.blueNoiseInDiskTexture=new xi(o,Rf.length,1,uh,Sr$1),this.blueNoiseInDiskTexture.wrapS=Ws,this.blueNoiseInDiskTexture.wrapT=Ws,this.blueNoiseInDiskTexture.needsUpdate=!0,this.hbaoMaterial=new lt({vertexShader:_3,fragmentShader:E3,uniforms:{near:new he(null),far:new he(null),fov:new he(null),proj_info:new he(new Ke),is_ortho:new he(!1),resolution:new he(new z$1),radius_of_influence:new he(8),radius_in_screen_space:new he(1),exponent:new he(1),ao_color:new he(new _),bias:new he(.5),texture_depth:new he(null),texture_normals:new he(null),texture_blue_noise:new he(null),texture_blue_noise_in_disk:new he(this.blueNoiseInDiskTexture),frame_index:new he(0),fog_enabled:new he(!1),fog_near:new he(1),fog_far:new he(1e3)}}),this.radius=128,this.aoColor={r:0,g:0,b:0},this.bias=.5,this.hbaoMaterial.uniforms.texture_depth.value=this.gBuffer.depthTexture,this.hbaoMaterial.uniforms.texture_normals.value=this.gBuffer.texture,this.needsSwap=!0,this.aaBuffer=new ft(s,a,{minFilter:tt,magFilter:tt,wrapS:Kt,wrapT:Kt,depthBuffer:!1,type:Sr$1});let c=new Mx({preset:Wa.ULTRA,edgeDetectionMode:wf.COLOR});this.effectPass=new nu(this.camera,c)}initialize(e,i,s){super.initialize(e,i,s),this.effectPass.initialize(e,i,s)}setBlueNoiseTexture(e){this.hbaoMaterial.uniforms.texture_blue_noise.value=e}setSize(e,i){this._width=e,this._height=i,this.depthBufferHighRes.setSize(e,i);let s=this._runHalfRes?.5:1,a=e*s,o=i*s;this.gBuffer.setSize(a,o),this.aoBuffer.setSize(a,o),this.hbaoMaterial.uniforms.resolution.value.set(a,o),this.aaBuffer.setSize(a,o),this.effectPass.setSize(a,o)}get runHalfRes(){return this._runHalfRes}set runHalfRes(e){this._runHalfRes=e,this.setSize(this._width,this._height)}setCamera(e){this.splineCamera=e}setScene(e){this.splineScene=e}render(e,i,s){this.splineScene.overrideMaterial=IQ;let a=this.splineCamera.layers.mask;if(this.splineCamera.layers.set(5),e.setRenderTarget(this.gBuffer),e.clear(),e.render(this.splineScene,this.splineCamera),e.setRenderTarget(this.depthBufferHighRes),e.clear(),e.render(this.splineScene,this.splineCamera),this.splineScene.overrideMaterial=null,this.splineCamera.layers.mask=a,this.hbaoMaterial.uniforms.radius_of_influence.value=this.radius,this.hbaoMaterial.uniforms.ao_color.value.set(this.aoColor.r,this.aoColor.g,this.aoColor.b),this.hbaoMaterial.uniforms.bias.value=this.bias,this.hbaoMaterial.uniforms.fog_enabled.value=this.fogEnabled,this.hbaoMaterial.uniforms.fog_near.value=this.fogNear,this.hbaoMaterial.uniforms.fog_far.value=this.fogFar,this.hbaoMaterial.uniforms.frame_index.value=this.frameIndex,this.frameIndex++,this.splineCamera.isPerspectiveCamera){this.hbaoMaterial.uniforms.near.value=this.splineCamera.perspCamera.near,this.hbaoMaterial.uniforms.far.value=this.splineCamera.perspCamera.far;let o=this.splineCamera.perspCamera.projectionMatrix.elements,c=2/o[0],d=2/o[5],g=-(1-o[8])/o[0],b=-(1+o[9])/o[5];this.hbaoMaterial.uniforms.proj_info.value.set(c,d,g,b);let j=this.splineCamera.perspCamera.fov*(Math.PI/180),_e=this.hbaoMaterial.uniforms.resolution.value.y/(Math.tan(j*.5)*2),$=this.hbaoMaterial.uniforms.radius_of_influence.value*.5*_e;this.hbaoMaterial.uniforms.radius_in_screen_space.value=$,this.hbaoMaterial.uniforms.is_ortho.value=!1}else{this.hbaoMaterial.uniforms.near.value=this.splineCamera.orthoCamera.near,this.hbaoMaterial.uniforms.far.value=this.splineCamera.orthoCamera.far;let o=this.splineCamera.orthoCamera.projectionMatrix.elements,c=2/o[0],d=2/o[5],g=-(1+o[12])/o[0],b=-(1-o[13])/o[5];this.hbaoMaterial.uniforms.proj_info.value.set(c,d,g,b);let j=.5*(this.hbaoMaterial.uniforms.resolution.value.y/d),_e=this.hbaoMaterial.uniforms.radius_of_influence.value*j;this.hbaoMaterial.uniforms.radius_in_screen_space.value=_e,this.hbaoMaterial.uniforms.is_ortho.value=!0}this.runHalfRes?(this.fullscreenMaterial=this.hbaoMaterial,e.setRenderTarget(this.aoBuffer),e.clear(),e.render(this.scene,this.camera),this.fullscreenMaterial=Ix,Ix.uniforms.texture_ao_lrez.value=this.aoBuffer.texture,Ix.uniforms.texture_depth_lrez.value=this.gBuffer.depthTexture,Ix.uniforms.texture_depth_hrez.value=this.depthBufferHighRes.depthTexture,e.setRenderTarget(e.aoRenderTarget),e.clear(),e.render(this.scene,this.camera)):(this.fullscreenMaterial=this.hbaoMaterial,e.setRenderTarget(this.aaBuffer),e.clear(),e.render(this.scene,this.camera),this.effectPass.renderToScreen=!1,this.effectPass.render(e,this.aaBuffer,e.aoRenderTarget))}dispose(){this.gBuffer.dispose(),this.depthBufferHighRes.dispose(),this.aoBuffer.dispose()}},RQ=`
varying vec2 vUv;
void main() {
    vUv = uv;
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,LQ=`
uniform sampler2D tInput;
uniform sampler2D tMap;
uniform vec2 resolution;
varying vec2 vUv;

uniform vec2 uResolution;
uniform vec2 uCoords;

// Draws a rectangle at center <st> with size <size>
float rectangle(vec2 st, vec2 size) {
    size = vec2(0.5) - size * 0.5;
    vec2 uv = vec2(step(size.x, st.x), step(size.y, st.y));
    uv *= vec2(step(size.x, 1.0 - st.x), step(size.y, 1.0 - st.y));

    return uv.x * uv.y;
}

uniform vec2 uSize;
uniform float uScale;
uniform float uDPR;
uniform float uCurrent;
uniform vec3 uSceneColor;

void main() {
    vec2 screenUv = gl_FragCoord.xy / uResolution.xy;
    screenUv *= 1.0 / uDPR;

    vec2 center = vec2(0.5, -0.5);
    vec2 outsideUv = screenUv;
    outsideUv += center;
    outsideUv -= uCoords.xy / uResolution.xy;
    outsideUv = (outsideUv - 0.5) + 0.5;
    outsideUv -= center;
    vec2 s = (uSize / uResolution) * uScale;
    float isOutside = 1.0 - rectangle(outsideUv, s);
    
    vec2 mid = vec2(0.5);
    vec2 insideUv = (screenUv - mid + s * mid) / s;
    vec4 background = texture2D(tInput, screenUv);
    vec4 image = texture2D(tMap, insideUv);
    gl_FragColor = mix(image, background, isOutside);
}
`,Lx=class extends Yn{constructor(){super(new lt({vertexShader:RQ,fragmentShader:LQ,uniforms:{tInput:new he(null),tMap:new he(null),uResolution:new he(new z$1),uSize:new he(new z$1),uCoords:new he(new z$1),uScale:new he(1),uSceneColor:new he(new We(16711680)),uDPR:new he(1),uCurrent:new he(0)}}),"tInput"),this.needsSwap=!0}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.tMap.value}set texture(e){this.uniforms.tMap.value=e}},BQ=`
void main() {
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,NQ=`
uniform sampler2D toScene;
uniform sampler2D fromScene;
uniform vec2 resolution;

uniform vec2 uResolution;
uniform float uDPR;

uniform float mixRatio;
uniform sampler2D tMixTexture;
uniform int useTexture;
uniform float threshold;

void main() {
	vec2 screenUv = gl_FragCoord.xy / uResolution.xy;
	screenUv *= 1.0 / uDPR;

	vec4 texel1 = texture2D( fromScene, screenUv );
	vec4 texel2 = texture2D( toScene, screenUv );

	if (useTexture==1) {
		
		vec4 transitionTexel = texture2D( tMixTexture, screenUv );
		float r = mixRatio * (1.0 + threshold * 2.0) - threshold;
		float mixf=clamp((transitionTexel.r - r)*(1.0/threshold), 0.0, 1.0);
		
		gl_FragColor = mix( texel1, texel2, mixf );
	} else {
		
		gl_FragColor = mix( texel1, texel2, mixRatio );
		
	}
}
`,FQ=[],Bx=class extends Yn{constructor(){super(new lt({vertexShader:BQ,fragmentShader:NQ,uniforms:{toScene:new he(null),fromScene:new he(null),uResolution:new he(new z$1),uDPR:new he(1),mixRatio:new he(0),threshold:new he(.1),useTexture:new he(0),tMixTexture:{value:FQ[0]}}}),"toScene"),this.needsSwap=!0}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.fromScene.value}set texture(e){this.uniforms.fromScene.value=e}},kQ=`
void main() {
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,VQ=`
uniform sampler2D inputBuffer;
uniform sampler2D blurredInputBuffer;
uniform sampler2D overlay;
uniform float blurIntensity;

uniform vec2 uResolution;
uniform float uDPR;

void main() {
	vec2 screenUv = gl_FragCoord.xy / uResolution.xy;
	screenUv *= 1.0 / uDPR;

	vec4 texel1 = texture2D( overlay, screenUv );
	vec4 texel2 = texture2D( inputBuffer, screenUv );
	vec4 texel3 = texture2D( blurredInputBuffer, screenUv );

	float blurMask2 = max(sign(texel1.a), 0.0) * blurIntensity;
    gl_FragColor = mix( mix(texel2, texel3, blurMask2), texel1, texel1.a );
	gl_FragColor.a = 1.0;
}
`,Nx=class extends Yn{constructor(){super(new lt({vertexShader:kQ,fragmentShader:VQ,uniforms:{inputBuffer:new he(null),blurredInputBuffer:new he(null),overlay:new he(null),uResolution:new he(new z$1),uDPR:new he(1),blurIntensity:new he(0)}})),this._blurEnabled=!1,this.blurTarget=new ft(1,1,{minFilter:tt,magFilter:tt,wrapS:Kt,wrapT:Kt}),this.blurPass=new Tx({width:window.innerWidth,height:window.innerHeight,kernelSize:Xm.HUGE,resolutionScale:.25}),this.blurPass.renderToScreen=!1,this.uniforms.blurredInputBuffer.value=this.blurTarget.texture}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.overlay.value}set texture(e){this.uniforms.overlay.value=e}setResolution(e,i,s=1){this.uniforms.uResolution.value.set(e,i).divideScalar(s),this.uniforms.uDPR.value=s,this.blurPass.setSize(e,i),this.blurTarget.setSize(e,i),this.blurPass.setSize(e,i)}get uiCanvas(){return this._uiCanvas}set uiCanvas(e){this._uiCanvas=e,e.texture&&(this.uniforms.overlay.value=e.texture);let i=e.frame;if(i){let s=i.data.backgroundBlur,a=s.radius;this._blurEnabled=s.enabled,this.uniforms.blurIntensity.value=this._blurEnabled?1:0,this.blurPass.scale=a/3}}render(e,i,s,a,o){this._blurEnabled&&(this.blurPass.setDepthTexture(this.getDepthTexture()),this.blurPass.render(e,i,this.blurTarget,a,o)),super.render(e,i,s,a,o)}};function P3(e,i){return i&&i.enabled&&e.push(i.effect),e}var zQ=e=>Object.values(Mt).includes(e)?e:Mt.NORMAL,Qm=class extends fr$2{constructor(e){super(),this.postprocessingState=td.defaultData,this._scene=new Pi,this._camera=new wr$1,this.effects=new Map,this.blueNoiseTexture=new xi,this._renderToScreen=!0,this._isUIOverlayEnabled=!1,this.clock=new Ny,this.renderer=e,this.debug=!1,this.effects.set("bloom",new Af),this.effects.set("chromaticAberration",new Ef),this.effects.set("vignette",new Pf),this.effects.set("noise",new Cf),this.effects.set("colorAverage",new Tf),this.effects.set("hueSaturation",new Mf),this.effects.set("brightnessContrast",new _f),this.effects.set("depthOfField",new Df),this.effects.set("pixelation",new Of),this.effectComposer=new Dx(this.renderer),this.effectComposer.autoRenderToScreen=!1,this.opaquePass=new su(!0,this.scene,this.camera),this.opaquePass.clear=!0,this.transmissionPass=new Px(this.scene,this.camera,this.renderer),this.aoPass=new Rx(this.scene,this.camera),this.taaPass=new Cx,this.taaPass.renderToScreen=!1,this.helperPass=new Ox(this.camera),this.helperPass.renderToScreen=!1,this.stylesOverlayPass=new Lx,this.stylesOverlayPass.enabled=!1,this.uiOverlayPass=new Nx,this.uiOverlayPass.enabled=!1,this.sceneTransitionPass=new Bx,this.sceneTransitionPass.enabled=!1,this._initCopyPass(),this._initPasses()}set overlayTexture(e){e!==void 0?(this.stylesOverlayPass.texture=e,this.stylesOverlayPass.enabled=!0):this.stylesOverlayPass.enabled=!1}get overlayTexture(){return this.stylesOverlayPass.texture}set sceneHelpers(e){this.helperPass.sceneHelpers=e}get sceneHelpers(){return this.helperPass.sceneHelpers}set sceneHelpersOnTop(e){this.helperPass.sceneHelpersOnTop=e}get sceneHelpersOnTop(){return this.helperPass.sceneHelpersOnTop}get scene(){return this._scene}set scene(e){this._scene=e,this.opaquePass.setScene(e),this.transmissionPass.setScene(e),this.aoPass.setScene(e)}get camera(){return this._camera}set camera(e){this._camera=e,this.opaquePass.setCamera(e),this.transmissionPass.setCamera(e),this.aoPass.setCamera(e),this.helperPass.setCamera(e)}updateRenderToScreen(){let e=!1;for(let i=this.effectComposer.passes.length-1;i>=0;i--){let s=this.effectComposer.passes[i];if(s.enabled===!0&&!e&&this._renderToScreen){s.renderToScreen=!0,e=!0;continue}s.renderToScreen=!1}}get isUIOverlayEnabled(){return this._isUIOverlayEnabled}disableUIOverlay(){this._isUIOverlayEnabled=!1}enableUIOverlay(){this._isUIOverlayEnabled=!0}disableHelpers(){this.helperPass.enabled=!1,this.updateRenderToScreen()}enableHelpers(){this.helperPass.enabled=!0,this.updateRenderToScreen()}updateBlueNoiseTexture(e){this.blueNoiseTexture=new xi(e,128,128),this.blueNoiseTexture.wrapS=Ws,this.blueNoiseTexture.wrapT=Ws,this.blueNoiseTexture.minFilter=Vt,this.blueNoiseTexture.magFilter=Vt,this.blueNoiseTexture.needsUpdate=!0}setAmbientOcclusionParams(e,i,s,a,o,c,d,g){this.aoPass.enabled=e,this.aoPass.radius=i,this.aoPass.bias=s,this.aoPass.aoColor=a,this.aoPass.fogEnabled=o,this.aoPass.fogNear=c,this.aoPass.fogFar=d,this.aoPass.runHalfRes!==!g&&(this.aoPass.runHalfRes=!g)}setTransmissionPassEnabled(e){this.transmissionPass.enabled=e,this.opaquePass.hasTransmissionPass=e}_initPasses(){var e,i;if((e=this.uvEffectPass)==null||e.dispose(),(i=this.effectPass)==null||i.dispose(),this.effectComposer.removeAllPasses(),this.transmissionPass.updatePasses(this.renderer),this.effectComposer.addPass(this.aoPass),this.effectComposer.addPass(this.opaquePass),this.effectComposer.addPass(this.transmissionPass),this.effectComposer.addPass(this.taaPass),this.postprocessingState.enabled){let s=[this.effects.get("pixelation")].reduce(P3,[]);s.length>0&&(this.uvEffectPass=new nu(this.camera,...s),this.uvEffectPass.renderToScreen=!1,this.effectComposer.addPass(this.uvEffectPass));let a=[this.effects.get("chromaticAberration"),this.effects.get("bloom"),this.effects.get("colorAverage"),this.effects.get("hueSaturation"),this.effects.get("brightnessContrast"),this.effects.get("vignette"),this.effects.get("noise")].reduce(P3,[]);a.length>0&&(this.effectPass=new nu(this.camera,...a),this.effectPass.renderToScreen=!1,this.effectComposer.addPass(this.effectPass))}this.effectComposer.addPass(this.stylesOverlayPass),this.effectComposer.addPass(this.uiOverlayPass),this.effectComposer.addPass(this.sceneTransitionPass),this.effectComposer.addPass(this.helperPass)}_initCopyPass(){if(this._savePass)return;let e=new z$1;this.renderer.getDrawingBufferSize(e),this._rt=new ft(e.x,e.y,{depthBuffer:!1,stencilBuffer:!1,wrapS:Ws,wrapT:Ws}),this._rt.samples=0,this._savePass=new Ym(this._rt,!1),this._savePass.renderToScreen=!1}setCopyPass(e){this._rt=e,this._savePass=new Ym(this._rt,!1),this.renderToScreen=!1}get renderToScreen(){return this._renderToScreen}set renderToScreen(e){if(this._renderToScreen===e)return;let i=this.effectComposer;!i||(e===!0?i.removePass(this._savePass):i.addPass(this._savePass),this._renderToScreen=e,this.updateRenderToScreen())}set sceneTransitionFromTexture(e){e!==this.sceneTransitionPass.texture&&(e!==null?this.sceneTransitionPass.enabled=!0:(this.sceneTransitionPass.enabled=!1,this.updateRenderToScreen()),this.sceneTransitionPass.texture=e)}get texture(){return this._rt&&this._rt.texture}get renderTarget(){return this._rt}updatePostprocessing(e){let{enabled:i,...s}=e,a=!1;i!==this.postprocessingState.enabled&&(a=!0);for(let o of Object.entries(s)){let c=o[1],d=this.effects.get(o[0]);if(d){d.enabled!==c.enabled&&(a=!0),d.enabled=c.enabled;for(let[g,b]of Object.entries(c))g==="blendFunction"?d.blendFunction=zQ(b):d[g]=b}}this.postprocessingState=e,a&&this._initPasses()}render(){this.effectComposer.render(this.clock.getDelta())}setScissor(e,i,s,a){e instanceof Ke?(this.effectComposer.inputBuffer.scissor.set(e.x,e.y,e.z,e.w),this.effectComposer.outputBuffer.scissor.set(e.x,e.y,e.z,e.w)):(this.effectComposer.inputBuffer.scissor.set(e,i,s,a),this.effectComposer.outputBuffer.scissor.set(e,i,s,a));let o=this.renderer.getPixelRatio();this.effectComposer.inputBuffer.scissor.multiplyScalar(o),this.effectComposer.outputBuffer.scissor.multiplyScalar(o),this.renderer.setScissor(e,i,s,a)}setScissorTest(e){this.effectComposer.inputBuffer.scissorTest=e,this.effectComposer.outputBuffer.scissorTest=e,this.renderer.setScissorTest(e)}setViewport(e,i,s,a){e instanceof Ke?(this.effectComposer.inputBuffer.viewport.copy(e),this.effectComposer.outputBuffer.viewport.copy(e)):(this.effectComposer.inputBuffer.viewport.set(e,i,s,a),this.effectComposer.outputBuffer.viewport.set(e,i,s,a))}resize(e,i,s){if(this.effectComposer.setSize(e,i,s),this._rt){let a=this.renderer.getPixelRatio();this._rt.setSize(e*a,i*a)}}dispose(){var e,i;(e=this.uvEffectPass)==null||e.dispose(),(i=this.effectPass)==null||i.dispose(),this.effectComposer.dispose()}},UQ=e=>`

// PCSS implementation based on:
// https://www.gamedev.net/articles/programming/graphics/contact-hardening-soft-shadows-made-fast-r4906/
// NOTE: This number affects how big the shadow blur can
// possibly get. Bigger number == bigger blur, but less precise results

const float  gPenumbraFilterSize = 80.0;
const int   gPenumbraSamples = ${e};
const int gShadowSamples = ${e};
const float gShadowSamplesRpc = 1.0f / float(gShadowSamples);

#ifdef USE_SHADOWMAP
    #if NUM_DIR_LIGHT_SHADOWS > 0

        uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
        varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];

        struct DirectionalLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
        };

        uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];

    #endif

    #if NUM_SPOT_LIGHT_SHADOWS > 0

        uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
        varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_SHADOWS ];

        struct SpotLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
        };

        uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];

    #endif

    #if NUM_POINT_LIGHT_SHADOWS > 0

        uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
        varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];

        struct PointLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
            float shadowCameraNear;
            float shadowCameraFar;
        };

        uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];

    #endif

    /*
    #if NUM_RECT_AREA_LIGHTS > 0

        // TODO (abelnation): create uniforms for area light shadows

    #endif
    */

float computePenumbra(int index, sampler2D shadowMap, float temporalAngle, float texelSize, vec2 uv, float compare, float texelScalar, float shadowRadius)
{
    float penumbra = 1.0;
    float blockerDepthAvg = 0.0;
    float blockerCount = 0.0;

    #pragma unroll_loop_start
    for(int i = 0; i < gPenumbraSamples; i ++)
    {
        vec2 offset = (vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize) * texelScalar;
        float depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) );

        if(depth < compare + 0.0001)
        {
            blockerDepthAvg += depth;
            blockerCount++;
        }
    }
    #pragma unroll_loop_end

    if (blockerCount > 0.0)
    {
        blockerDepthAvg /= blockerCount;

        // Compute penumbra
        penumbra = (compare - blockerDepthAvg) / (blockerDepthAvg);
        penumbra *= penumbra;
        penumbra *= 200.0 * penumbraSize[min(index, 5 - 1)]; // Magic number that affects how quickly the penumbra grows

        return clamp(penumbra, 0.00, 1.0);
    }
    return 0.0;
}

float vogelShadow(int index, sampler2D shadowMap, vec2 uv, float texelSize, float compare, float shadowRadius)
{
    float shadow         = 0.0f;

    // NOTE: When using TAA, we should use screen space interleaved gradient noise
    vec2 halton = haltonSequence[frameIndex];
    float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
    float temporalAngle  = temporalOffset * PI2;

    float texelScalar = (gPenumbraFilterSize) / (texelSize * 1024.);
    float penumbra = computePenumbra(index, shadowMap, temporalAngle, texelSize, uv, compare, texelScalar, shadowRadius);
    if (penumbra == -1.0) {
        return 1.0;
    }

    #pragma unroll_loop_start
    for (int i = 0; i < gShadowSamples; i++)
    {
        vec2 vogelSample =  vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;
        // Overall blurring offset
        vec2 offset = vogelSample * (shadowRadius * 2.);

        // Penumbra offset
        offset += vogelSample * (penumbra * texelScalar);

        shadow += step( compare, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );
    }
    #pragma unroll_loop_end

    return shadow * gShadowSamplesRpc;
}


    float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {

        return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );

    }

    vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {

        return unpackRGBATo2Half( texture2D( shadow, uv ) );

    }

    float VSMShadow (sampler2D shadow, vec2 uv, float compare ){

        float occlusion = 1.0;

        vec2 distribution = texture2DDistribution( shadow, uv );

        float hard_shadow = step( compare , distribution.x ); // Hard Shadow

        if (hard_shadow != 1.0 ) {

            float distance = compare - distribution.x ;
            float variance = max( 0.00000, distribution.y * distribution.y );
            float softness_probability = variance / (variance + distance * distance ); // Chebeyshevs inequality
            softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 ); // 0.3 reduces light bleed
            occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );

        }
        return occlusion;

    }

    float getShadow( int i, sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {

        float shadow = 1.0;

        shadowCoord.xyz /= shadowCoord.w;
        shadowCoord.z += shadowBias;

        // if ( something && something ) breaks ATI OpenGL shader compiler
        // if ( all( something, something ) ) using this instead

        bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
        bool inFrustum = all( inFrustumVec );

        bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );

        bool frustumTest = all( frustumTestVec );

        if ( frustumTest ) {

        #if defined( SHADOWMAP_TYPE_PCF )

            vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
            return vogelShadow(i, shadowMap, shadowCoord.xy, texelSize.x, shadowCoord.z, shadowRadius );

        #elif defined( SHADOWMAP_TYPE_PCF_SOFT )

            vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
            float dx = texelSize.x;
            float dy = texelSize.y;

            vec2 uv = shadowCoord.xy;
            vec2 f = fract( uv * shadowMapSize + 0.5 );
            uv -= f * texelSize;

            shadow = (
                texture2DCompare( shadowMap, uv, shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
                mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
                     f.x ) +
                mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
                     f.x ) +
                mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
                     f.y ) +
                mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
                     f.y ) +
                mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
                          texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
                          f.x ),
                     mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
                          texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
                          f.x ),
                     f.y )
            ) * ( 1.0 / 9.0 );

        #elif defined( SHADOWMAP_TYPE_VSM )

            shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );

        #else // no percentage-closer filtering:

            shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );

        #endif

        }

        return shadow;

    }

    // cubeToUV() maps a 3D direction vector suitable for cube texture mapping to a 2D
    // vector suitable for 2D texture mapping. This code uses the following layout for the
    // 2D texture:
    //
    // xzXZ
    //  y Y
    //
    // Y - Positive y direction
    // y - Negative y direction
    // X - Positive x direction
    // x - Negative x direction
    // Z - Positive z direction
    // z - Negative z direction
    //
    // Source and test bed:
    // https://gist.github.com/tschw/da10c43c467ce8afd0c4

    vec2 cubeToUV( vec3 v, float texelSizeY ) {

        // Number of texels to avoid at the edge of each square

        vec3 absV = abs( v );

        // Intersect unit cube

        float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
        absV *= scaleToCube;

        // Apply scale to avoid seams

        // two texels less per square (one texel will do for NEAREST)
        v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );

        // Unwrap

        // space: -1 ... 1 range for each square
        //
        // #X##         dim    := ( 4 , 2 )
        //  # #         center := ( 1 , 1 )

        vec2 planar = v.xy;

        float almostATexel = 1.5 * texelSizeY;
        float almostOne = 1.0 - almostATexel;

        if ( absV.z >= almostOne ) {

            if ( v.z > 0.0 )
                planar.x = 4.0 - v.x;

        } else if ( absV.x >= almostOne ) {

            float signX = sign( v.x );
            planar.x = v.z * signX + 2.0 * signX;

        } else if ( absV.y >= almostOne ) {

            float signY = sign( v.y );
            planar.x = v.x + 2.0 * signY + 2.0;
            planar.y = v.z * signY - 2.0;

        }

        // Transform to UV space

        // scale := 0.5 / dim
        // translate := ( center + 0.5 ) / dim
        return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );

    }

    float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {

        float shadow = 1.0;
        vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );

        // for point lights, the uniform @vShadowCoord is re-purposed to hold
        // the vector from the light to the world-space position of the fragment.
        vec3 lightToPosition = shadowCoord.xyz;

        // dp = normalized distance from light to fragment position
        float compare = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear ); // need to clamp?
        compare += shadowBias;

        // bd3D = base direction 3D
        vec3 bd3D = normalize( lightToPosition );

        vec2 halton = haltonSequence[frameIndex];
        float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
        float temporalAngle  = temporalOffset * PI2;

        #if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_VSM )
            for (int i = 0; i < gShadowSamples; i++) {
                vec2 vogelSample = vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;

                // Overall blurring offset
                vec3 offset = vec3(vogelSample.x, vogelSample.y, -vogelSample.x) * (shadowRadius + 5.);

                // NOTE: Removed for now
                // Penumbra offset
                //offset += vec3(vogelSample.x, vogelSample.y, vogelSample.y)  * (penumbra * gPenumbraFilterSize);

                shadow += texture2DCompare( shadowMap, cubeToUV( bd3D + offset, texelSize.y ), compare );

            }
            return shadow * gShadowSamplesRpc;

        #elif defined( SHADOWMAP_TYPE_PCF_SOFT )
            for (int i = 0; i < 16; i++) {
                vec2 vogelSample = vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;

                // Overall blurring offset
                vec3 offset = vec3(vogelSample.x, vogelSample.y, -vogelSample.x) * (shadowRadius + 5.);

                shadow += texture2DCompare( shadowMap, cubeToUV( bd3D + offset, texelSize.y ), compare );

            }
            return shadow * (1.0 / 16.0);
        #else // no percentage-closer filtering

            return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), compare );

        #endif

    }

#endif
`,GQ=bt.lights_fragment_begin,jQ=bt.shadowmask_pars_fragment,D3=null,HQ=e=>{switch(e){case"low":return 8;case"medium":return 16;case"high":return 32;default:return 16}},O3=(e="medium")=>{if(D3===e)return!1;D3=e;let i=HQ(e);bt.shadowmap_pars_fragment=UQ(i);let s=GQ.slice();s=s.replace("getShadow( spotShadowMap[ i ]","getShadow( UNROLLED_LOOP_INDEX + 3, spotShadowMap[ i ]"),s=s.replace("getShadow( directionalShadowMap[ i ]","getShadow( UNROLLED_LOOP_INDEX, directionalShadowMap[ i ]"),bt.lights_fragment_begin=s;let a=jQ.slice();return a=a.replaceAll("getShadow(","getShadow( UNROLLED_LOOP_INDEX, "),bt.shadowmask_pars_fragment=a,!0},WQ=`
attribute vec3 randomColor;
varying vec3 vNormal;
flat out vec3 vColor;

void main()
{
vNormal = normal;
vColor = randomColor;
gl_Position = projectionMatrix * (modelViewMatrix * vec4(position, 1.0));
}
`,qQ=`
uniform float depthContrast;
varying vec3 vNormal;
flat in vec3 vColor;
void main()
{
vec3 normal = (normalize(vNormal)).rgb;

float contrastDepth = (gl_FragCoord.z - 0.5) * depthContrast + 0.5;

vec3 resultColor = mix(mix(vColor, normal, 0.2), vec3(contrastDepth), 0.4);
gl_FragColor = vec4(resultColor, vColor.r);
gl_FragColor = vec4(resultColor, vColor.r);
}
`,Fx=new lt({vertexShader:WQ,fragmentShader:qQ,uniforms:{depthContrast:{value:1}}}),I3=new tr,kx=class extends Dw{constructor(e){super(e),this._pixelRatio=this.getPixelRatio(),this.viewportWidth=1,this.viewportHeight=1,this.resolution=new z$1,this.pipeline=new Qm(this),this.dummyCamera=new wr$1,this.sceneTransitionDuration=0,this.sceneTransitionTimeRemaining=-1,this.isXRCopyPassSet=!1,this.clear=(o=!0,c=!0,d=!0)=>{let g=this.getContext(),b=0;o&&(b|=g.COLOR_BUFFER_BIT),c&&(b|=g.DEPTH_BUFFER_BIT),d&&(b|=g.STENCIL_BUFFER_BIT),g.clear(b),g.clearBufferfv(g.COLOR,1,[0,0,0,1])},this.autoClear=!1;let i=this.setPixelRatio.bind(this),s=this.setSize.bind(this);this.shadowMap.enabled=!0,this.shadowMap.type=Gy,this.dummyCamera.matrixAutoUpdate=!1;let a=this.getContext();if(a&&"drawingBufferColorSpace"in a)try{a.drawingBufferColorSpace="display-p3"}catch(o){console.warn(o)}this.setPixelRatio=o=>{this._pixelRatio!==o&&(this._pixelRatio=o,i(o))},this.setSize=(o,c,d=!0)=>{var g,b;(this.viewportWidth!==o||this.viewportHeight!==c)&&(this.viewportWidth=o,this.viewportHeight=c,s(o,c,d),(g=this.normalRenderTarget)==null||g.setSize(o*this._pixelRatio,c*this._pixelRatio),this._resizeTransmission(o,c),(b=this.transmissionDepthTarget)==null||b.setSize(o*this._pixelRatio/2,c*this._pixelRatio/2),this.pipeline.resize(o,c,d))},this._superDispose=this.dispose,this.dispose=this._currentDispose}createAORenderTarget(){this.aoRenderTarget===void 0&&(this.aoRenderTarget=new ft(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio,{generateMipmaps:!1,minFilter:tt,magFilter:tt,wrapS:Kt,wrapT:Kt,depthBuffer:!1}))}_resizeTransmission(e,i){var s,a;(s=this.transmissionRenderTarget)==null||s.setSize(e*this._pixelRatio/(this.hdTransmission?1:2),i*this._pixelRatio/(this.hdTransmission?1:2)),(a=this.aoRenderTarget)==null||a.setSize(e*this._pixelRatio/1,i*this._pixelRatio/1)}get hdTransmission(){return Ze.transmissionLod.value===1}set hdTransmission(e){Ze.transmissionLod.value=e===!0?1:2,this._resizeTransmission(this.viewportWidth,this.viewportHeight)}createTransmissionRenderTarget(){this.transmissionRenderTarget===void 0&&(this.transmissionRenderTarget=new ft(this.viewportWidth*this._pixelRatio/(this.hdTransmission?1:2),this.viewportHeight*this._pixelRatio/(this.hdTransmission?1:2),{generateMipmaps:!0,minFilter:bc,magFilter:tt,wrapS:Kt,wrapT:Kt,depthBuffer:!1}),this.transmissionDepthTarget=new ft(this.viewportWidth*this._pixelRatio/2,this.viewportHeight*this._pixelRatio/2,{minFilter:Vt,magFilter:Vt,depthBuffer:!1}))}createNormalRenderTarget(){this.normalRenderTarget===void 0&&(this.normalRenderTarget=new ft(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio,{generateMipmaps:!1,minFilter:Vt,magFilter:Vt,type:Sr$1,depthTexture:new gs(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio)}))}renderNormal(e,i,s){this.normalRenderTarget&&(this.setClearColor(0),s.layers.enable(8),s.layers.disable(0),s.layers.disable(3),i.traverseEntity(a=>{a.layers.isEnabled(8)&&(a.copyPreviousMatrix=!1)}),this.setRenderTarget(this.normalRenderTarget),this.clear(),s instanceof wr$1?Fx.uniforms.depthContrast.value=(s.far-s.near)/1e4:Fx.uniforms.depthContrast.value=1,i.overrideMaterial=Fx,this.render(i,s),this.setClearColor(i.bgColor,i.bgColor.a),this.setRenderTarget(null),i.overrideMaterial=e.wireframeState?Vx:null,s.layers.enable(0),s.layers.enable(3),i.traverseEntity(a=>{a.layers.isEnabled(8)&&(a.copyPreviousMatrix=!0)}))}renderSplineSceneWithDummyCamera(e,i,s=1){this.dummyCamera.updateCameraState(i.dataPatched),this.dummyCamera.matrix.copy(i.matrixWorld);let a=i.height,o=i.width,c=this.viewportWidth/this.viewportHeight;o<a?o=a*c:a=o/c,this.dummyCamera.setViewplaneSize(o,a);for(let d=0;d<s;d++)this.renderSplineScene(e,this.dummyCamera)}renderSplineScene(e,i,{sceneHelpers:s=void 0,sceneHelpersOnTop:a=void 0,overrideTransmission:o=void 0,overrideNormal:c=void 0}={}){var rt;let d=e instanceof $l?e.activePage:e,g=d.visible;d.visible=!0;let b=d.scene;this.xr.enabled&&(this.isXRCopyPassSet===!1&&this.getRenderTarget()!==null&&(this.pipeline.setCopyPass(this.getRenderTarget()),this.isXRCopyPassSet=!0),this.xr.updateCamera(i)),this.setClearColor(d.bgColor,d.bgColor.a),d.penumbraSizeArray.forEach((st,ut)=>{Ze.penumbraSize.value[ut]=st}),Ze.pixelRatioNode.value=this.getPixelRatio(),this.resolution.x!==0&&this.resolution.y!==0?Ze.resolution.value.set(this.resolution.x,this.resolution.y):Ze.resolution.value.set(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio),c!==void 0?(Ze.normalRenderTarget.value=c,Ze.normalRenderTargetDepth.value=I3):b.needsNormal()&&(this.createNormalRenderTarget(),Ze.normalRenderTarget.value=this.normalRenderTarget.texture,Ze.normalRenderTargetDepth.value=this.normalRenderTarget.depthTexture,this.renderNormal(b,d,i));let j=d.data.ao,_e=j.occlusion;_e&&(this.createAORenderTarget(),Ze.aoRenderTarget.value=this.aoRenderTarget.texture),Ze.aoEnabled.value=_e,this.pipeline.setAmbientOcclusionParams(j.occlusion,j.radius,j.bias,d.aoColor,d.fog!==null,d.backupFog.near,d.backupFog.far,j.aoFullRes),this.pipeline.aoPass.setBlueNoiseTexture(this.pipeline.blueNoiseTexture),this.pipeline.isUIOverlayEnabled&&((rt=d.uiCanvas)!=null&&rt.enabled)&&d.uiCanvas.texture&&d.uiCanvas.texture.image.width>0?((d.uiCanvas.width!==this.viewportWidth||d.uiCanvas.height!==this.viewportHeight)&&d.uiCanvas.applySize({width:this.viewportWidth,height:this.viewportHeight}),d.uiCanvas.render(),this.pipeline.uiOverlayPass.uiCanvas=d.uiCanvas,this.pipeline.uiOverlayPass.enabled=!0,this.pipeline.uiOverlayPass.setResolution(this.domElement.width,this.domElement.height,window.devicePixelRatio),this.pipeline.updateRenderToScreen()):(this.pipeline.uiOverlayPass.enabled=!1,this.pipeline.updateRenderToScreen());let $=!1;if(o!==void 0)Ze.transmissionRenderTarget.value=o,Ze.transmissionRenderTargetDepth.value=I3,this.pipeline.setTransmissionPassEnabled(!1);else{let st=b.needsTransmission();st&&(this.transmissionRenderTarget===void 0&&($=!0),this.createTransmissionRenderTarget(),Ze.transmissionRenderTarget.value=this.transmissionRenderTarget.texture,Ze.aspectRatio.value=eR(this.viewportWidth,this.viewportHeight),Ze.transmissionRenderTargetDepth.value=this.transmissionDepthTarget.texture),this.pipeline.setTransmissionPassEnabled(st)}i.layers.enable(3),i.layers.enable(8),this.pipeline.sceneHelpers=s,this.pipeline.sceneHelpersOnTop=a,this.pipeline.scene=d,this.pipeline.camera=i,$&&this.pipeline.transmissionPass.updatePasses(this),this.pipeline.postprocessingState!==d.postprocessing&&(this.pipeline.updatePostprocessing(d.postprocessing),!s&&!a&&this.pipeline.disableHelpers()),this.clearAlphaOverride!==void 0&&this.setClearAlpha(this.clearAlphaOverride),d.overrideMaterial=b.wireframeState?Vx:null,this.pipeline.render(),Ze.frameIndex.value=(Ze.frameIndex.value+1)%16,i instanceof wr$1&&i.copyHistory(),d.visible=g}renderFromSceneForSceneTransitionPass(e,i,s){this.pipeline.renderToScreen=!1,this.pipeline.renderTarget,this.renderSplineScene(e,i),this.pipeline.sceneTransitionFromTexture=this.pipeline.renderTarget.texture,this.sceneTransitionDuration=s,this.sceneTransitionTimeRemaining=s,this.pipeline.renderToScreen=!0;let a=this.pipeline.sceneTransitionPass.uniforms;a.uDPR.value=window.devicePixelRatio,a.uResolution.value.set(this.domElement.width,this.domElement.height).divideScalar(window.devicePixelRatio)}_currentDispose(){var e,i,s,a,o,c;this._superDispose(),this.pipeline.dispose(),(e=this.aoRenderTarget)==null||e.dispose(),(i=this.transmissionRenderTarget)==null||i.dispose(),(s=this.transmissionDepthTarget)==null||s.dispose(),(a=this.normalRenderTarget)==null||a.dispose(),(c=(o=this.normalRenderTarget)==null?void 0:o.depthTexture)==null||c.dispose()}},Lf=class extends Qo(zy){constructor(e,i=15,s=10066329){super(e,i,s),this.object=e,this.added=!1,this.name=`DirectionalLightHelper: ${e.uuid}`}raycast(e,i){Ko(this.object,Lf.geometryHelper,e,i)}},Bf=class extends Qo(Vy){constructor(e,i=15,s=6710886){super(e,i,s),this.object=e,this.name=`PointLightHelper: ${e.uuid}`}raycast(e,i){Ko(this.object,Bf.geometryHelper,e,i)}},zx=class extends Qo(ky){constructor(e,i=6710886){super(e,i),this.object=e,this.name=`SpotLightHelper: ${e.uuid}`}raycast(e,i){Ko(this.object,zx.geometryHelper,e,i)}update(){if(this.object!==void 0){let e=zx._vector,i=this.object.distance?this.object.distance:1e3,s=i*Math.tan(this.object.angle);this.cone.scale.set(s,s,i),e.setFromMatrixPosition(this.object.target.matrixWorld),this.cone.lookAt(e);let a=this.color!==void 0?this.color:this.light.color;if(this.cone.material instanceof Array)for(let o=0,c=this.cone.material.length;o<c;o++)this.cone.material[o].color.set(a);else this.cone.material.color.set(a)}}},Km=zx;Km._vector=new _;function YQ(e,i){e.shadow.camera.right=i/2,e.shadow.camera.left=-i/2,e.shadow.camera.top=i/2,e.shadow.camera.bottom=-i/2,e.shadow.needsUpdate=!0}var Nf=class extends Sf(By,Lf){constructor(e,i,s){super(),this.super_Entity(e,i),this.castShadow=!0,this.shadow.mapSize.width=2048,this.shadow.mapSize.height=2048,this.shadow.normalBias=1,this.layers.enable(3);let a=this.shadow.camera;a.top=1250,a.bottom=-1250,a.right=1250,a.left=-1250,a.near=-1e4,a.far=2500;let o=new yl(this.shadow.camera);o.visible=!1,this.gizmos.shadowmap=o}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this.gizmos){let i=this.gizmos[e];i instanceof yl&&i.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.objectHelper&&this.objectHelper.update()}updateState(e,i){this.updateState_Light(e,i);let s=e.depth!==void 0&&e.depth!==this.shadow.camera.far||e.size!==void 0&&e.size/2!==this.shadow.camera.right;e.size!==void 0&&YQ(this,e.size),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null)),e.penumbraSize!==void 0&&i.scene.markPenumbraSizeDirty(),s&&this.update()}},R3=new _,L3=new _,B3=new Qe,Ff=class extends Sf(Ry,Km){constructor(e,i,s){super(),this.super_Entity(e,i),this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let a=this.shadow.camera;a.fov=Me.RAD2DEG*2*this.angle,a.aspect=1,a.near=100,a.far=2500;let o=new yl(this.shadow.camera);o.visible=!1,this.gizmos.shadowmap=o,this.update()}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this.gizmos){let i=this.gizmos[e];i instanceof yl&&i.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),L3.setFromMatrixPosition(this.matrixWorld),B3.setFromRotationMatrix(this.matrixWorld),R3.copy(this.up).applyQuaternion(B3).negate().multiplyScalar(this.distance),this.target.position.copy(L3).add(R3),this.target.updateMatrixWorld(),this.objectHelper&&this.objectHelper.update()}updateState(e,i){this.updateState_Light(e,i),e.distance!==void 0&&(this.distance=e.distance),e.decay!==void 0&&(this.decay=e.decay),e.angle!==void 0&&(this.angle=e.angle),e.penumbra!==void 0&&(this.penumbra=e.penumbra),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.penumbraSize!==void 0&&i.scene.markPenumbraSizeDirty(),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}},zt;(e=>{function i(){return[1,0,0,0,1,0,0,0,1]}e.identity=i;function s(Pt,It=e.identity()){for(let Lt=0,Nt=Pt.length;Lt<Nt;Lt++)It[Lt]=Pt[Lt];return It}e.copy=s;function a(Pt,It,Lt,Nt,Ht,dr){return e.setAbcdef(e.identity(),Pt,It,Lt,Nt,Ht,dr)}e.create=a;function o(Pt,It,Lt,Nt,Ht,dr,hs){return Pt[0]=It,Pt[1]=Nt,Pt[2]=dr,Pt[3]=Lt,Pt[4]=Ht,Pt[5]=hs,Pt}e.setAbcdef=o;function c(Pt,It){let[Lt,Nt,Ht,dr,hs,_s]=g(Pt),[ds,Nn,us,hn,Ft,Gr]=g(It),gn=ds*Lt+Nn*Ht,un=ds*Nt+Nn*dr,Zn=us*Lt+hn*Ht,xu=us*Nt+hn*dr,ou=Ft*Lt+Gr*Ht+hs,sp=Ft*Nt+Gr*dr+_s;return e.create(gn,un,Zn,xu,ou,sp)}e.append=c;function d(Pt,It){let[Lt,Nt,Ht,dr,hs,_s]=g(Pt),[ds,Nn,us,hn,Ft,Gr]=g(It),gn=Lt,un=Nt,Zn=Ht,xu=dr;(ds!==1||Nn!==0||us!==0||hn!==1)&&(gn=Lt*ds+Nt*us,un=Lt*Nn+Nt*hn,Zn=Ht*ds+dr*us,xu=Ht*Nn+dr*hn);let ou=hs*ds+_s*us+Ft,sp=hs*Nn+_s*hn+Gr;return e.create(gn,un,Zn,xu,ou,sp)}e.prepend=d;function g(Pt){return[Pt[0],Pt[3],Pt[1],Pt[4],Pt[2],Pt[5]]}e.getAbcdef=g;function b(Pt){let[It,Lt,Nt,Ht,dr,hs]=e.getAbcdef(Pt),_s=It*Ht-Lt*Nt,ds=Ht/_s,Nn=-Lt/_s,us=-Nt/_s,hn=It/_s,Ft=(Nt*hs-Ht*dr)/_s,Gr=-(It*hs-Lt*dr)/_s;return e.create(ds,Nn,us,hn,Ft,Gr)}e.invert=b;function j([Pt,It],Lt){let[Nt,Ht,dr,hs,_s,ds]=e.getAbcdef(Lt);return[Nt*Pt+dr*It+_s,Ht*Pt+hs*It+ds]}e.apply=j;function _e(Pt,It){let[Lt,Nt,Ht,dr,hs,_s]=e.getAbcdef(It),ds=1/(Lt*dr+Ht*-Nt),[Nn,us]=Pt;return[dr*ds*Nn+-Ht*ds*us+(_s*Ht-hs*dr)*ds,Lt*ds*us+-Nt*ds*Nn+(-_s*Lt+hs*Nt)*ds]}e.applyInverse=_e;function $(Pt,It,Lt=It){let[Nt,Ht,dr,hs,_s,ds]=e.getAbcdef(Pt);return e.setAbcdef(Pt,Nt*It,Ht*Lt,dr*It,hs*Lt,_s*It,ds*Lt),Pt}e.scale=$;function rt(Pt,It){let Lt=Math.cos(It),Nt=Math.sin(It),[Ht,dr,hs,_s,ds,Nn]=e.getAbcdef(Pt);return e.setAbcdef(Pt,Ht*Lt-dr*Nt,Ht*Nt+dr*Lt,hs*Lt-_s*Nt,hs*Nt+_s*Lt,ds*Lt-Nn*Nt,ds*Nt+Nn*Lt),Pt}e.rotate=rt;function st(Pt,It,Lt){let[Nt,Ht]=Lt,dr=e.translate(Pt,-Nt,-Ht);return dr=e.rotate(dr,It),dr=e.translate(dr,Nt,Ht),dr}e.rotateAround=st;function ut(Pt,It,Lt){let[Nt,Ht,dr,hs,_s,ds]=e.getAbcdef(Pt);return e.setAbcdef(Pt,Nt,Ht,dr,hs,_s+It,ds+Lt),Pt}e.translate=ut;function gt(Pt,It,Lt){let[Nt,Ht,dr,hs]=e.getAbcdef(Pt);return e.setAbcdef(Pt,Nt,Ht,dr,hs,It,Lt),Pt}e.setTranslate=gt;function wt(Pt,It,Lt){let[Nt,Ht,dr,hs]=e.getAbcdef(Pt);return e.setAbcdef(Pt,Nt,Ht,dr,hs,It,Lt),Pt}e.setPosition=wt;function yt(Pt){let[It,Lt,Nt,Ht]=e.getAbcdef(Pt),dr=Math.sqrt(It*It+Lt*Lt),hs=Math.sqrt(Nt*Nt+Ht*Ht);return[dr,hs]}e.getScale=yt;function At(Pt){let[,,,,It,Lt]=e.getAbcdef(Pt);return[It,Lt]}e.getPosition=At;function Ct(Pt,It){return e.decompose(Pt,It).rotation}e.getRotation=Ct;function Tt(Pt,It){let[Lt,Nt,Ht,dr,hs,_s]=e.getAbcdef(Pt),ds=-Math.atan2(-Ht,dr),Nn=Math.atan2(Nt,Lt),us=Math.abs(ds+Nn),hn=0,Ft=[0,0];us<1e-5||Math.abs(Math.PI*2-us)<1e-5?(hn=Nn,Ft[0]=Ft[1]=0):(hn=0,Ft[0]=ds,Ft[1]=Nn);let Gr=[Math.sqrt(Lt*Lt+Nt*Nt),Math.sqrt(Ht*Ht+dr*dr)];return{position:[hs+(It[0]*Lt+It[1]*Ht)-It[0],_s+(It[0]*Nt+It[1]*dr)-It[1]],scale:Gr,rotation:hn,skew:Ft,pivot:It}}e.decompose=Tt;function kt(Pt,It,Lt,Nt,Ht=[0,0]){let[dr,hs]=Pt,[_s,ds]=It,[Nn,us]=Nt,[hn,Ft]=Ht,Gr=Math.cos(Lt+Ft)*_s,gn=Math.sin(Lt+Ft)*_s,un=-Math.sin(Lt-hn)*ds,Zn=Math.cos(Lt-hn)*ds,xu=dr-(Nn*Gr+us*un)+Nn,ou=hs-(Nn*gn+us*Zn)+us;return e.create(Gr,gn,un,Zn,xu,ou)}e.compose=kt})(zt||(zt={}));var XQ=Math.PI/180;function N3(e,i,s,a,o,c){let d=e-s,g=i-a;return d*d/(o*o)+g*g/(c*c)<=1}function F3(e){return e*XQ}function G_(e){return{all:e=e||new Map,on:function(i,s){var a=e.get(i);a?a.push(s):e.set(i,[s])},off:function(i,s){var a=e.get(i);a&&(s?a.splice(a.indexOf(s)>>>0,1):e.set(i,[]))},emit:function(i,s){var a=e.get(i);a&&a.slice().map(function(o){o(s)}),(a=e.get("*"))&&a.slice().map(function(o){o(i,s)})}}}var Jt=class{constructor(e,i,s){this.uuid=e,this.data=i,this.localMatrix=zt.identity(),this.worldMatrix=zt.identity(),this.ignoreCameraZoom=!1,this.visible=!0,this._singleBBox=new ec,this._recursiveBBox=new ec,this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0,this.stateSelection=null,this.prevState=null,this.currentState=null,this.reversibleToState=null,this.currentTransitionEvent=null,this.previousAction=null,this.name="",this.position=[0,0],this.scale=[1,1],this.rotation=0,this.emitter=G_(),this.dpr=s.dpr??1,this.dataPatched=i}project(e,i){let s=this.worldMatrix;return i&&(s=zt.append(i.worldMatrix,s)),zt.applyInverse(e,s)}intersects(e,i,s,a=!1){return this.visible&&!this.data.raycastLock&&this.intersectsInLocalSpace(...this.project([e,i],s),a)}intersectsInLocalSpace(e,i,s=!1){let{min:a,max:o}=s?this.recursiveBBox:this.singleBBox;return e>=a[0]&&e<=o[0]&&i>=a[1]&&i<=o[1]}applyTransforms(e){e.setTransform(this.worldMatrix,this.ignoreCameraZoom)}get singleBBox(){return this.singleBBoxNeedsUpdate&&(this.singleBBoxNeedsUpdate=!1,this._singleBBox.setFromObjectSize(this,!1),this._singleBBox.computeVertices(),this._singleBBox.computeEdges()),this._singleBBox}get recursiveBBox(){return this.recursiveBBoxNeedsUpdate&&(this.recursiveBBoxNeedsUpdate=!1,this._recursiveBBox.setFromObjectSize(this,!0),this._recursiveBBox.computeVertices(),this._recursiveBBox.computeEdges()),this._recursiveBBox}updateLocalMatrix(){this.localMatrix=zt.compose(this.position,this.scale,F3(this.rotation),Na.getPivot(this.dataPatched))}updateWorldMatrix(e,i,s){let a=this.parent;i&&a!==null&&a!==void 0&&a.updateWorldMatrix(e,!0,!1),e&&this.updateLocalMatrix(),this.parent?this.worldMatrix=zt.append(this.parent.worldMatrix,this.localMatrix):this.worldMatrix=zt.copy(this.localMatrix),this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0}get pivot(){return Na.getPivot(this.data)}getCenter(){return[0,0]}getHalfSize(){return[0,0]}get id(){return this.uuid}resetBBoxNeedsUpdateSelf(){this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0}resetBBoxNeedsUpdate(){this.resetBBoxNeedsUpdateSelf(),this.traverseAncestors(e=>{e.resetBBoxNeedsUpdateSelf()})}updateTransformState(e){let i=!1;e.position!==void 0&&(i=!0,this.position=e.position),e.rotation!==void 0&&(i=!0,this.rotation=e.rotation),e.scale!==void 0&&(i=!0,this.scale=e.scale),i&&(this.updateWorldMatrix(!0,!1,!0),this.resetBBoxNeedsUpdate())}updateByOp(e,i,s){e.type===0&&e.props.visible!==void 0&&(this.visible=e.props.visible),this.data=i,this.data=i;let a=e,o=Rt(e.path,["states","*"]);if(o!==null){if(e.type===0){let[c]=o;if((this==null?void 0:this.stateSelection)===c){let d={...e.props};if(delete d.name,Object.values(e.props).some(g=>g===void 0)){let g=this.data;if(g!==void 0){let b=Nr$1.zoom(g,e.path.slice(2));if(b)for(let j in e.props)e.props[j]===void 0&&j in b&&(d[j]=b[j])}}a={...e,props:d,path:e.path.slice(2)}}}}else if(e.type===0){let c=this.stateSelection?this.data.states.data(this.stateSelection):void 0;if(c!==void 0){if(e.props.name!==void 0&&c.name){let{name:g,...b}=c;c=b}let d=Nr$1.removeOverridden(e.path,e.props,c);a={...e,props:d}}}this.updateByPatchedOpBase(a,Ba.patch(this.data,this.stateSelection?this.data.states.data(this.stateSelection):void 0),s)}changeSelectedState(e,i,s=!1){if(!(this.data.states.length===0&&!s)){for(let a of this.data.states)Ba.toOps(this.data,a.data).forEach(o=>{let c=Yh.replaceProps(o,this.data);this.dataPatched=this.data,this.updateByPatchedOp(c,this.data,i)});if(e!==null){let a=this.data.states.data(e);a&&(this.dataPatched=Ba.patch(this.data,a),Ba.toOps(this.data,a).forEach(o=>{this.updateByPatchedOp(o,this.dataPatched,i)}))}s&&this.updateTransformState(this.dataPatched),this.stateSelection=e}}updateState(e,i){e.name!==void 0&&(this.name=e.name),e.visible!==void 0&&(this.visible=e.visible),this.updateTransformState(e)}updateByPatchedOpBase(e,i,s){this.dataPatched=i,this.updateByPatchedOp(e,i,s)}updateByPatchedOp(e,i,s){e.path.length===0&&e.type===0&&this.updateState(e.props,s),this.requestRender()}traverseFrameAncestors(e){this.traverseAncestors(i=>{i.data.type==="frame2d"&&e(i)})}traverseAncestors(e){let i=this.parent;for(;i;)e(i),i=i.parent}requestRender(){this.traverseFrameAncestors(e=>{e.requestRender()})}clone(e){let i=new Jt(this.uuid,this.data,e);return i.parent=void 0,i}addEventListener(e,i){this.emitter.on(e,i)}removeEventListener(e,i){this.emitter.off(e,i)}dispatchEvent(e){this.emitter.emit(e.type,{...e,target:e.target??this})}traverseSortNextHelper(){let e=this.parent;if(e){let i=e.children;if(i){let s=i.indexOf(this)+1;return i[s]?i[s]:e.traverseSortNextHelper()}}}sortNext(){let e=this.children;return e&&e.length>0&&e[0]?e[0]:this.traverseSortNextHelper()}isDescendantOf(e){e instanceof Jt&&(e=e.uuid);let i=this;for(;i.parent;){if(i.parent.uuid===e)return!0;i=i.parent}return!1}},yn=class extends Jt{constructor(e,i,s){super(e,i,s),this.uuid=e,this.data=i,this.context=s,this.children=[]}add(e){e.parent&&e.parent instanceof yn&&e.parent.remove(e),this.children.push(e),e.parent=this}remove(e){let i=this.children.indexOf(e);i>=0&&(this.children.splice(i,1),e.parent=void 0)}traverse(e){let i=e(this);if(i!==!0)for(let s of this.children)s instanceof yn?s.traverse(e):i=e(s)}intersectsChildren(e,i,s,a=!1,o=[],c=!1){for(let d of this.children){let g=d instanceof Ln;if(d instanceof yn&&!g&&c&&d.intersectsChildren(e,i,s,a,o,!1),d.intersects(e,i,s,g)&&(o.push(d),a))break}return o}updateWorldMatrix(e,i,s){if(super.updateWorldMatrix(e,i,s),s&&this.children)for(let a of this.children)a.updateWorldMatrix(e,!1,!0)}find(e){let i;return this.traverse(s=>{s.uuid===e&&(i=s)}),i}innerDrawChildren(e){for(let i=this.children.length-1;i>=0;i--)this.children[i].draw(e)}resetBBoxNeedsUpdate(){super.resetBBoxNeedsUpdate(),this.traverse(e=>{e.resetBBoxNeedsUpdateSelf()})}clone(e){let i=new yn(this.uuid,this.data,e);i.parent=void 0;for(let s of this.children)i.add(s.clone(e));return i}},Ln=class extends yn{constructor(e,i,s){super(e,i,s),this.uuid=e,this.data=i,this.updateState(i,s)}draw(e){!this.visible||(e.save(),this.applyTransforms(e),this.innerDrawChildren(e),e.restore())}clone(e){let i=new Ln(this.uuid,this.data,e);i.parent=void 0;for(let s of this.children)i.add(s.clone(e));return i}};function QQ(e,i){let[[s,a],[o,c]]=e,[[d,g],[b,j]]=i,_e=(s-o)*(g-j)-(a-c)*(d-b);if(_e===0)return!1;let $=((s-d)*(g-j)-(a-g)*(d-b))/_e,rt=-((s-o)*(a-g)-(a-c)*(s-d))/_e;return $>=0&&$<=1&&rt>=0&&rt<=1}var V3=[[-1,1],[-1,-1],[1,-1],[1,1]],k3=(e,i,s)=>{let a=e.getCenter(),o=e.getHalfSize(),c=zt.append(i,e.worldMatrix);o[0]===0&&o[1]===0?s.push(zt.apply(a,c)):V3.forEach(d=>{let g=[d[0]*o[0]+a[0],d[1]*o[1]+a[1]];s.push(zt.apply(g,c))})},ec=class{constructor(){this.matrix=zt.identity(),this.min=[1/0,1/0],this.max=[-1/0,-1/0],this.vertices=[],this.edges=[]}setFromObjectSize(e,i=!1){e.updateWorldMatrix(),this.makeEmpty(),zt.copy(e.worldMatrix,this.matrix);let s=zt.invert(e.worldMatrix);this.expandByObjectSize(e,s,i)}expandByObjectSize(e,i,s=!1){let a=[];s===!0&&e instanceof yn?e.traverse(o=>{o.visible&&k3(o,i,a)}):k3(e,i,a),this.setFromPoints(a)}getCenter(){let[e,i]=this.min,[s,a]=this.getHalfSize();return zt.apply([e+s,i+a],this.matrix)}getSize(){return[this.max[0]-this.min[0],this.max[1]-this.min[1]]}getHalfSize(){return[(this.max[0]-this.min[0])*.5,(this.max[1]-this.min[1])*.5]}makeEmpty(){this.min=[1/0,1/0],this.max=[-1/0,-1/0]}setFromPoints(e){this.makeEmpty();for(let i of e)this.expandByPoint(i)}expandByPoint(e){this.min=[Math.min(this.min[0],e[0]),Math.min(this.min[1],e[1])],this.max=[Math.max(this.max[0],e[0]),Math.max(this.max[1],e[1])]}computeVertices(){let[e,i]=this.getHalfSize(),s=this.getCenter(),[a,o,c,d]=zt.getAbcdef(this.matrix),g=zt.create(a,o,c,d,s[0],s[1]);this.vertices=V3.map(([b,j])=>zt.apply([b*e,j*i],g))}computeEdges(){this.edges=[];for(let e=0,i=this.vertices.length;e<i;++e)this.edges.push([this.vertices[e],this.vertices[(e+1)%i]])}project(e,i){let s=this.matrix;return i&&(s=zt.append(i.worldMatrix,s)),zt.applyInverse(e,s)}intersects(e,i,s){return this.intersectsInLocalSpace(...this.project([e,i],s))}intersectsInLocalSpace(e,i){let{min:s,max:a}=this;return e>=s[0]&&e<=a[0]&&i>=s[1]&&i<=a[1]}containsPoint(e){let[i,s]=e,[a,o]=this.min,[c,d]=this.max;return i>=a&&i<=c&&s>=o&&s<=d}intersectsBBox2D(e){for(let i=0,s=this.edges.length;i<s;i++){let a=this.edges[i];for(let o=0,c=e.edges.length;o<c;o++){let d=e.edges[o];if(QQ(a,d))return!0}}for(let i=0,s=e.vertices.length;i<s;i++){let a=e.vertices[i];if(this.containsPoint(a))return!0}return!1}ensureMinMax(){let e=this.min,i=this.max;this.min=[Math.min(e[0],i[0]),Math.min(e[1],i[1])],this.max=[Math.max(e[0],i[0]),Math.max(e[1],i[1])]}copy(e){this.min=[...e.min],this.max=[...e.max],zt.copy(e.matrix,this.matrix),this.computeVertices(),this.computeEdges()}clone(){let e=new ec;return e.copy(this),e}},U3,G3=new Promise(e=>{U3=e}),z3=!1,Ux;function j3(){if(z3)return;if(Ux)return Ux;async function e(){let i=await __vitePreload(()=>import("./ui-8DWtXw2q.js"),__vite__mapDeps([]));U3(i.default??i),z3=!0}return Ux=e(),Ux}function H_(e){let i=!1;return e.scene.objects.traverse((s,a)=>{(a.type==="Mesh"&&a.geometry.type==="UIGeometry"||a.type==="Page"&&a.uiFrame!==void 0)&&(i=!0)}),i}var mt,j_;async function KQ(e){let i=await G3;mt||(j_||(j_=i({locateFile:()=>e})),mt=await j_)}var H3=zt.identity(),Zm=class{constructor(e,i=1){this.canvas=e,this.dpr=i,this._width=0,this._height=0,this._strokeMode="inside",this._layerBlur=0,this._backgroundBlur=0,this._dropShadowBlur=0,this._dropShadowOffsetX=0,this._dropShadowOffsetY=0,this._dropShadowColor=St.transparent,this._innerShadowBlur=0,this._innerShadowOffsetX=0,this._innerShadowOffsetY=0,this._innerShadowSpread=0,this._innerShadowColor=St.transparent,this._fonts=new Map;try{let s=e.getBoundingClientRect();e.width=s.width*i,e.height=s.height*i}catch{console.log(e.width,i)}this._currentM3Transform=H3,this._currentTransform=new Float32Array(H3)}async init(){var e,i;if(!this.wasmURL)throw Error("Your must set the wasm binary url with renderer.wasmURL = ... before you can call renderer.init");await KQ(this.wasmURL),this._surface=mt.MakeWebGLCanvasSurface(this.canvas),this.ctx=(e=this._surface)==null?void 0:e.getCanvas(),this._paint=new mt.Paint,this._paint.setAntiAlias(!0),this._paintFill=this._paint.copy(),this._paintFill.setStyle(mt.PaintStyle.Fill),this._paintStroke=this._paint.copy(),this._paintStroke.setStyle(mt.PaintStyle.Stroke),(i=this.ctx)==null||i.scale(this.dpr,this.dpr)}get currentTransform(){return this._currentM3Transform}get currentTransformBuffer(){return this._currentTransform}set currentTransform(e){this._currentM3Transform=e,this._currentTransform.set(e)}async loadFont(e,i){let s=await(await fetch(e)).arrayBuffer();this.registerFont(s,i)}registerFont(e,i){if(this._fonts.has(i))return;let s=mt.FontMgr.FromData(e);if(s)this._fonts.set(i,s);else throw new Error("Invalid font data for "+i)}get width(){return this._width}get height(){return this._height}set strokeColor(e){this._paintStroke&&this._paintStroke.setColor(Gx(e),mt.ColorSpace.DISPLAY_P3)}set fillColor(e){this._paintFill&&this._paintFill.setColor(Gx(e),mt.ColorSpace.DISPLAY_P3)}set lineWidth(e){this._paintStroke&&this._paintStroke.setStrokeWidth(this._strokeMode==="center"?e:e*2)}set strokeMode(e){this._strokeMode=e}set dropShadowBlur(e){this._dropShadowBlur=e}set dropShadowColor(e){this._dropShadowColor=e}set dropShadowOffsetX(e){this._dropShadowOffsetX=e}set dropShadowOffsetY(e){this._dropShadowOffsetY=e}set innerShadowBlur(e){this._innerShadowBlur=e}set innerShadowColor(e){this._innerShadowColor=e}set innerShadowOffsetX(e){this._innerShadowOffsetX=e}set innerShadowOffsetY(e){this._innerShadowOffsetY=e}set innerShadowSpread(e){this._innerShadowSpread=e}set layerBlur(e){this._layerBlur=e}set backgroundBlur(e){this._backgroundBlur=e}clear(){var e;(e=this.ctx)==null||e.clear(mt.TRANSPARENT)}save(){var e;(e=this.ctx)==null||e.save()}restore(){var e;(e=this.ctx)==null||e.restore()}beginPath(){var e;(e=this._currentPath)==null||e.delete(),this._currentPath=new mt.Path}closePath(){let e=this._currentPath;if(e){if(e.isEmpty())return;let i=e.getBounds();(i[3]-i[1]||i[2]-i[0])&&e.close()}}fill(){this._paintInner(this._paintFill,!0)}stroke(){this._paintInner(this._paintStroke,!1)}clipRect(e,i,s,a,o=0,c=0,d=0,g=0){var j,_e;let b=mt.XYWHRect(e,i,s,a);if(o===0&&c===0&&g===0&&d===0)(j=this.ctx)==null||j.clipRect(b,mt.ClipOp.Intersect,!0);else{let $=mt.RRectXY(b,o,o);$[4]=$[5]=o,$[6]=$[7]=c,$[8]=$[9]=d,$[10]=$[11]=g,(_e=this.ctx)==null||_e.clipRRect($,mt.ClipOp.Intersect,!0)}}_applyShadowOffsetMatrix(){if(this.ctx){let e=zt.invert(this.currentTransform);this.ctx.concat(e);let i=zt.translate(zt.identity(),this._dropShadowOffsetX,this._dropShadowOffsetY);this.ctx.concat(i),this.ctx.concat(this._currentTransform)}}_applyEffectsToPaint(e,i,s=!0){var a,o,c,d;if(this.ctx&&this._currentPath){let g,b=!1;if(s&&this._hasDropShadow()){let j=e.copy();j.setColor(Gx(this._dropShadowColor));let _e;this._dropShadowBlur>0&&(_e=mt.MaskFilter.MakeBlur(mt.BlurStyle.Normal,this._dropShadowBlur*this.dpr*(((a=this.camera)==null?void 0:a.scale)??1),!1),j.setMaskFilter(_e)),this.ctx.save(),this.ctx.clipPath(this._currentPath,mt.ClipOp.Difference,!0),this._applyShadowOffsetMatrix(),i(j),this.ctx.restore(),j.delete(),_e==null||_e.delete()}if(this._backgroundBlur>0&&s){this.ctx.save(),this.ctx.clipPath(this._currentPath,mt.ClipOp.Intersect,!0);let j=mt.ImageFilter.MakeBlur(this._backgroundBlur,this._backgroundBlur,mt.TileMode.Clamp,null),_e=e.copy();_e.setImageFilter(j),_e.setAlphaf(1);let $=this._currentPath.computeTightBounds();this.ctx.saveLayer(_e,$,null,mt.SaveLayerInitWithPrevious),this.ctx.drawColor(e.getColor()),this.ctx.restore(),this.ctx.restore(),_e.delete(),j.delete(),b=!0}if(this._layerBlur>0){let j=e.copy();g=mt.MaskFilter.MakeBlur(mt.BlurStyle.Normal,this._layerBlur*this.dpr*(((o=this.camera)==null?void 0:o.scale)??1),!1),j.setMaskFilter(g),i(j),j.delete(),g.delete(),b=!0}if(b||i(e),s&&this._hasInnerShadow()){let j=new mt.Paint;j.setAntiAlias(!0),j.setStyle(mt.PaintStyle.Fill),j.setColor(Gx(this._innerShadowColor));let _e;this._innerShadowBlur>0&&(_e=mt.MaskFilter.MakeBlur(mt.BlurStyle.Normal,this._innerShadowBlur*this.dpr*(((c=this.camera)==null?void 0:c.scale)??1),!1),j.setMaskFilter(_e));let $=this._currentPath.computeTightBounds(),[rt,st,ut,gt]=$,wt=ut-rt,yt=gt-st;this.ctx.save(),this.ctx.clipPath(this._currentPath,mt.ClipOp.Intersect,!0),this.ctx.saveLayer(j,$,null,mt.SaveLayerInitWithPrevious),(d=this.ctx)==null||d.translate(this._innerShadowOffsetX,this._innerShadowOffsetY),this.ctx.drawRect(mt.XYWHRect(-1e3-this._innerShadowOffsetX,-1e3-this._innerShadowOffsetY,2e3+wt+Math.abs(this._innerShadowOffsetX*2),2e3+yt+Math.abs(this._innerShadowOffsetY*2)),j),j.setBlendMode(mt.BlendMode.Clear),this.ctx.drawPath(this._currentPath,j),this.ctx.restore(),this.ctx.restore(),j.delete(),_e==null||_e.delete()}}}_paintInner(e,i=!0){if(this.ctx&&this._currentPath&&e){let s=this.ctx,a=this._currentPath;this._applyEffectsToPaint(e,o=>{let c=!1;!i&&this._strokeMode!=="center"&&(s.save(),s.clipPath(a,this._strokeMode==="outside"?mt.ClipOp.Difference:mt.ClipOp.Intersect,!0),c=!0),s.drawPath(a,o),c&&s.restore()},i)}}_hasDropShadow(){var e;return((e=this._dropShadowColor)==null?void 0:e.a)>0}_hasInnerShadow(){var e;return((e=this._innerShadowColor)==null?void 0:e.a)>0}path(e){var i;(i=this._currentPath)==null||i.addPath(mt.Path.MakeFromSVGString(e))}ellipse(e,i,s,a,o,c,d,g){var j;if(!W3([e,i,s,a])||!this._currentPath)return;if(s<0||a<0)throw Error("radii cannot be negative");let b=mt.XYWHRect(e-s,i-a,s*2,a*2);(j=this._currentPath)==null||j.addOval(b)}rect(e,i,s,a,o=0,c=0,d=0,g=0){var j,_e;let b=mt.XYWHRect(e,i,s,a);if(W3(b))if(o===0&&c===0&&g===0&&d===0)(j=this._currentPath)==null||j.addRect(b);else{let $=mt.RRectXY(b,o,o);$[4]=$[5]=o,$[6]=$[7]=c,$[8]=$[9]=d,$[10]=$[11]=g,(_e=this._currentPath)==null||_e.addRRect($)}}getHorizontalAlign(e){switch(e){case 2:return mt.TextAlign.Right;case 3:return mt.TextAlign.Center;case 4:return mt.TextAlign.Justify;case 1:default:return mt.TextAlign.Left}}drawTextInner(e,i,s,[a,o,c,d],g,b,j=!0){let _e=0,{ctx:$}=this;if(!$)return _e;let rt=b.copy(),st=b.copy();return st.setAlphaf(0),this._applyEffectsToPaint(rt,ut=>{i.pushPaintStyle(s,ut,st),i.addText(e);let gt=i.build();gt.layout(c);let wt=o;g===2?wt+=(d-gt.getHeight())/2:g===3&&(wt+=d-gt.getHeight()),$.drawParagraph(gt,a,wt),_e=gt.getHeight(),i.reset(),gt.delete()},j),rt.delete(),st.delete(),_e}drawText(e,i){let s=0,a=this._fonts.get(i.font),{ctx:o,_paintFill:c,_paintStroke:d}=this;if(a&&o){let g=new mt.TextStyle({fontFamilies:[i.font],fontSize:i.fontSize,heightMultiplier:i.lineHeight,letterSpacing:i.letterSpacing}),b=new mt.ParagraphStyle({textStyle:g,textAlign:this.getHorizontalAlign(i.horizontalAlign)}),j=mt.XYWHRect(i.x,i.y,i.width,i.height),_e=mt.ParagraphBuilder.Make(b,a);c&&(s=this.drawTextInner(e,_e,g,j,i.verticalAlign,c,!0)),d&&(s=this.drawTextInner(e,_e,g,j,i.verticalAlign,d,!1)),_e.delete()}return{height:s}}render(){var e;(e=this._surface)==null||e.flush()}moveTo(e,i){var s;(s=this._currentPath)==null||s.moveTo(e,i)}lineTo(e,i){var s;(s=this._currentPath)==null||s.lineTo(e,i)}bezierCurveTo(e,i,s,a,o,c){var d;(d=this._currentPath)==null||d.cubicTo(e,i,s,a,o,c)}quadraticCurveTo(e,i,s,a){var o;(o=this._currentPath)==null||o.quadTo(e,i,s,a)}setTransform(e,i=!1){var o,c,d,g,b;if(!this.ctx)return;let s=this.ctx.getTotalMatrix(),a=zt.invert(s);if(a&&this.ctx.concat(a),(o=this.ctx)==null||o.scale(this.dpr,this.dpr),((c=this.camera)==null?void 0:c.enabled)&&((d=this.ctx)==null||d.concat(this.camera.worldMatrix),i)){let j=zt.getScale(this.camera.worldMatrix);(g=this.ctx)==null||g.scale(1/j[0],1/j[1])}(b=this.ctx)==null||b.concat(e),this.currentTransform=e}transform(e){var i;(i=this.ctx)==null||i.concat(e)}setSize(e,i){var s;e===this._width&&i===this._height||(this._width=e,this._height=i,this.canvas.style.width=e+"px",this.canvas.style.height=i+"px",this.canvas.width=e*this.dpr,this.canvas.height=i*this.dpr,this._surface&&(this._surface=mt.MakeWebGLCanvasSurface(this.canvas),this.ctx=(s=this._surface)==null?void 0:s.getCanvas()))}};function W3(e){for(let i=0;i<e.length;i++)if(e[i]!==void 0&&!Number.isFinite(e[i]))return!1;return!0}function Gx({r:e,g:i,b:s,a}){return mt.Color4f(e,i,s,a)}var Jm=class{constructor(e,i,s){this.uuid=e,this.data=i,this.enabled=!1,this.color=St.transparent,this.blurRadius=0,this.offset=[0,0],this.spread=0,this.update(i)}update(e){e.color!==void 0&&(this.color=e.color),e.enabled!==void 0&&(this.enabled=e.enabled),e.blurRadius!==void 0&&(this.blurRadius=e.blurRadius),e.offset!==void 0&&(this.offset=e.offset),e.spread!==void 0&&(this.spread=e.spread)}},$m=class{constructor(e,i,s){this.uuid=e,this.data=i,this.enabled=!1,this.radius=0,this.update(i)}update(e){e.enabled!==void 0&&(this.enabled=e.enabled),e.radius!==void 0&&(this.radius=e.radius)}},jx=class{constructor(e,i,s){this.uuid=e,this.data=i,this.enabled=!1,this.color=St.transparent,this.update(i)}update(e){e.enabled!==void 0&&(this.enabled=e.enabled),e.color!==void 0&&(this.color=e.color)}},Hx=class{constructor(e,i,s){this.uuid=e,this.data=i,this.enabled=!1,this.color=St.transparent,this.thickness=0,this.mode="inside",this.update(i)}update(e){e.enabled!==void 0&&(this.enabled=e.enabled),e.color!==void 0&&(this.color=e.color),e.thickness!==void 0&&(this.thickness=e.thickness),e.mode!==void 0&&(this.mode=e.mode)}},Ar$1=class extends Jt{constructor(i,s,a){super(i,s,a),this.uuid=i,this.data=s,this.autoClose=!0,this.fill=new jx(i+"-fill",s.fill,a),this.stroke=new Hx(i+"-stroke",s.stroke,a),this.dropShadow=new Jm(i+"-dropShadow",s.dropShadow,a),this.innerShadow=new Jm(i+"-innerShadow",s.innerShadow,a),this.backgroundBlur=new $m(i+"-backgroundBlur",s.backgroundBlur,a),this.layerBlur=new $m(i+"-layerBlur",s.layerBlur,a)}applyFillStroke(i){i.fillColor=this.fill.enabled?this.fill.color:St.transparent,i.strokeColor=this.stroke.enabled&&this.stroke.thickness>0?this.stroke.color:St.transparent,i.strokeMode=this.stroke.mode,i.lineWidth=this.stroke.thickness}applyFilters(i){this.layerBlur.enabled?i.layerBlur=this.layerBlur.radius*5:i.layerBlur=0,this.backgroundBlur.enabled?i.backgroundBlur=this.backgroundBlur.radius*5:i.backgroundBlur=0,this.dropShadow.enabled?(i.dropShadowBlur=this.dropShadow.blurRadius*5,i.dropShadowColor=this.dropShadow.color,i.dropShadowOffsetX=this.dropShadow.offset[0],i.dropShadowOffsetY=this.dropShadow.offset[1]):i.dropShadowColor=St.transparent,this.innerShadow.enabled?(i.innerShadowSpread=this.innerShadow.spread,i.innerShadowBlur=this.innerShadow.blurRadius*5,i.innerShadowColor=this.innerShadow.color,i.innerShadowOffsetX=this.innerShadow.offset[0],i.innerShadowOffsetY=this.innerShadow.offset[1]):i.innerShadowColor=St.transparent}innerDraw(i){}draw(i){!this.visible||(i.save(),this.applyTransforms(i),this.applyFilters(i),this.applyFillStroke(i),i.beginPath(),this.innerDraw(i),this.autoClose&&i.closePath(),this.fill.enabled&&i.fill(),this.stroke.enabled&&i.stroke(),i.restore())}updateByPatchedOp(i,s,a){super.updateByPatchedOp(i,s,a),i.type===0&&(Rt(i.path,["fill"])?this.fill.update(i.props):Rt(i.path,["stroke"])?this.stroke.update(i.props):Rt(i.path,["dropShadow"])?this.dropShadow.update(i.props):Rt(i.path,["innerShadow"])?this.innerShadow.update(i.props):Rt(i.path,["layerBlur"])?this.layerBlur.update(i.props):Rt(i.path,["backgroundBlur"])?this.backgroundBlur.update(i.props):this.resetBBoxNeedsUpdate())}updateState(i,s){super.updateState(i,s),i.fill!==void 0&&this.fill.update(i.fill),i.stroke!==void 0&&this.stroke.update(i.stroke),i.dropShadow!==void 0&&this.dropShadow.update(i.dropShadow),i.innerShadow!==void 0&&this.innerShadow.update(i.innerShadow),i.layerBlur!==void 0&&this.layerBlur.update(i.layerBlur),i.backgroundBlur!==void 0&&this.backgroundBlur.update(i.backgroundBlur)}clone(i){let s=new Ar$1(this.uuid,this.data,i);return s.parent=void 0,s}},tc=class extends Ar$1{constructor(e,i,s){super(e,i,s),this.uuid=e,this.data=i,this.width=0,this.height=0,this.updateState(i,s)}innerDraw(e){e.ellipse(this.width*.5,this.height*.5,this.width*.5,this.height*.5,0,0,Math.PI*2)}intersectsInLocalSpace(e,i){return N3(e,i,this.width*.5,this.height*.5,this.width*.5,this.height*.5)}getCenter(){return[this.width*.5,this.height*.5]}getHalfSize(){return[this.width*.5,this.height*.5]}updateSizeState(e){let i=!1;e.width!==void 0&&(this.width=typeof e.width=="number"?e.width:this.width,i=!0),e.height!==void 0&&(this.height=typeof e.height=="number"?e.height:this.height,i=!0),i&&this.updateWorldMatrix(!0,!1,!0)}updateState(e,i){super.updateState(e,i),this.updateSizeState(e)}clone(e){let i=new tc(this.uuid,this.data,e);return i.parent=void 0,i}},Bs=class extends Ar$1{constructor(e,i,s){super(e,i,s),this.uuid=e,this.data=i,this.width=0,this.height=0,this.cornerRadius=[0,0,0,0],this.updateState(i,s)}innerDraw(e){e.rect(0,0,this.width,this.height,...this.cornerRadius)}getCenter(){return[this.width*.5,this.height*.5]}getHalfSize(){return[this.width*.5,this.height*.5]}updateCornerState(e){e.cornerRadius!==void 0&&(this.cornerRadius=e.cornerRadius)}updateSizeState(e){let i=!1;e.width!==void 0&&(this.width=typeof e.width=="number"?e.width:this.width,i=!0),e.height!==void 0&&(this.height=typeof e.height=="number"?e.height:this.height,i=!0),i&&this.updateWorldMatrix(!0,!1,!0)}updateState(e,i){super.updateState(e,i),this.updateSizeState(e),this.updateCornerState(e)}clone(e){let i=new Bs(this.uuid,this.data,e);return i.parent=void 0,i}},rc=class extends Ar$1{constructor(e,i,s){super(e,i,s),this.uuid=e,this.data=i,this._textHeight=0,this._textHeightDirty=!0,this.width=0,this.height=0,this.updateState(i,s)}get textHeight(){return this._textHeight}applyFillStroke(e){e.fillColor=this.fill.enabled?this.fill.color:St.transparent,e.strokeColor=this.stroke.enabled&&this.stroke.thickness>0?this.stroke.color:St.transparent,e.strokeMode="center",e.lineWidth=this.stroke.thickness}innerDraw(e){var c;(c=this._fontHolder)!=null&&c.arrayBuffer&&this._fontHolder.arrayBuffer.byteLength>1&&this.data.font&&e.registerFont(this._fontHolder.arrayBuffer,this.data.font);let i=this.data.textTransform,s=this.data.text.textValue.toString(),a=i===2?s.toUpperCase():i===3?s.toLowerCase():s,{height:o}=e.drawText(a,{x:0,y:0,width:this.width,height:this.height,fontSize:this.data.fontSize,lineHeight:this.data.lineHeight??1,letterSpacing:this.data.letterSpacing??0,horizontalAlign:this.data.horizontalAlign,verticalAlign:this.data.verticalAlign,font:this.data.font});this._textHeight=o}getCenter(){return[this.width*.5,this.height*.5]}getHalfSize(){return[this.width*.5,this.height*.5]}updateSizeState(e){let i=!1;e.width!==void 0&&(this.width=typeof e.width=="number"?e.width:this.width,i=!0),e.height!==void 0&&(this.height=typeof e.height=="number"?e.height:this.height,i=!0),i&&this.updateWorldMatrix(!0,!1,!0)}updateFontState(e,{shared:i}){e.font!==void 0&&(this._fontHolder=i.getFont(e.font),this._fontHolder&&!this._fontHolder.isLoaded&&this._fontHolder.loadingPromise.then(()=>{this.requestRender()}))}updateState(e,i){super.updateState(e,i),this.updateSizeState(e),this.updateFontState(e,i)}clone(e){let i=new rc(this.uuid,this.data,e);return i.parent=void 0,i}},kf=class extends Ar$1{constructor(e,i,s){super(e,i,s),this.uuid=e,this.data=i,this.curves=[],this.extremasBBox={min:[0,0],max:[0,0]},this.updateState(i,s)}computeExtremas(){this.curves.length===0&&this.computeCurves();let e=this.curves.map(a=>Wx.extremas(a)),i=[1/0,1/0],s=[-1/0,-1/0];for(let a=0,o=e.length;a<o;a++){let c=e[a];c[0][0]<i[0]&&(i[0]=c[0][0]),c[0][1]<i[1]&&(i[1]=c[0][1]),c[1][0]>s[0]&&(s[0]=c[1][0]),c[1][1]>s[1]&&(s[1]=c[1][1])}return this.extremasBBox.min=[i[0],i[1]],this.extremasBBox.max=[s[0],s[1]],this.extremasBBox}computeCurves(){this.curves=[];for(let s=1,a=this.data.points.length;s<a;s++){let o=this.data.points[s].data,c=this.data.points[s-1].data,d={start:c.position,cp1:c.controlNext.position,cp2:o.controlPrevious.position,end:o.position};this.curves.push(d)}let e=this.data.points[0].data,i=this.data.points[this.data.points.length-1].data;if(this.data.isClosed){let s={start:i.position,cp1:i.controlNext.position,cp2:e.controlPrevious.position,end:e.position};this.curves.push(s)}}getCenter(){let[e,i]=this.extremasBBox.min,[s,a]=this.getHalfSize();return[e+s,i+a]}getHalfSize(){let{min:e,max:i}=this.extremasBBox;return[(i[0]-e[0])*.5,(i[1]-e[1])*.5]}innerDraw(e){for(let a=0,o=this.data.points.length;a<o;a++){let c=this.data.points[a].data;if(a===0){let[d,g]=c.position;e.moveTo(d,g)}else{let d=this.data.points[a-1].data,[g,b]=d.controlNext.position,[j,_e]=c.controlPrevious.position,[$,rt]=c.position,st={start:d.position,cp1:d.controlNext.position,cp2:c.controlPrevious.position,end:c.position};Wx.derive(st),e.bezierCurveTo(g,b,j,_e,$,rt)}}let i=this.data.points[0].data,s=this.data.points[this.data.points.length-1].data;if(this.data.isClosed){let[a,o]=s.controlNext.position,[c,d]=i.controlPrevious.position,[g,b]=i.position;e.bezierCurveTo(a,o,c,d,g,b)}}updateState(e,i){super.updateState(e,i),this.computeExtremas()}clone(e){let i=new kf(this.uuid,this.data,e);return i.parent=void 0,i}},Wx;(e=>{function i(d){let g=d.start,b=d.cp1,j=d.cp2,_e=d.end,$=[3*(b[0]-g[0]),3*(b[1]-g[1])],rt=[3*(j[0]-b[0]),3*(j[1]-b[1])],st=[3*(_e[0]-j[0]),3*(_e[1]-j[1])],ut={start:$,cp:rt,end:st};return d.derivative=ut,ut.derivative=W_.derive(ut),ut}e.derive=i;function s(d,g,b,j=!1){let _e=d-2*g+b;if(_e!==0){let $=-Math.sqrt(Math.abs(g*g-d*b)),rt=-d+g,st=-($+rt)/_e,ut=-(-$+rt)/_e;return[st,ut]}else if(g!==b&&_e===0)return[(2*g-b)/(2*(g-b))];return[]}function a(d){let g=d.derivative??e.derive(d),b=g.start,j=g.cp,_e=g.end;return[s(b[0],j[0],_e[0]),s(b[1],j[1],_e[1])]}e.droot=a;function o(d){let[g,b]=e.droot(d),j=[d.start[0],d.end[0]],_e=[d.start[1],d.end[1]];for(let $ of g)j.push(e.compute(d,Math.min(1,Math.max(0,$)))[0]);for(let $ of b)_e.push(e.compute(d,Math.min(1,Math.max(0,$)))[1]);return j.sort(($,rt)=>$-rt),_e.sort(($,rt)=>$-rt),[[j[0],_e[0]],[j[j.length-1],_e[_e.length-1]]]}e.extremas=o;function c(d,g){if(g===0)return[...d.start];if(g===1)return[...d.end];let b=1-g,j=b*b,_e=g*g,$=j*b,rt=j*g*3,st=b*_e*3,ut=g*_e;return[$*d.start[0]+rt*d.cp1[0]+st*d.cp2[0]+ut*d.end[0],$*d.start[1]+rt*d.cp1[1]+st*d.cp2[1]+ut*d.end[1]]}e.compute=c})(Wx||(Wx={}));var W_;(e=>{function i(o){let c=o.start,d=o.cp,g=o.end,b=[2*(d[0]-c[0]),2*(d[1]-c[1])],j=[2*(g[0]-d[0]),2*(g[1]-d[1])],_e={start:b,end:j};return _e.derivative=q_.derive(_e),o.derivative=_e,_e}e.derive=i;function s(o){let c=o.derivative??e.derive(o),d=c.start,g=c.end;return[d[0]!==g[0]?d[0]/(d[0]-g[0]):0,d[1]!==g[1]?d[1]/(d[1]-g[1]):0]}e.droot=s;function a(o,c){if(c===0)return[...o.start];if(c===1)return[...o.end];let d=1-c,g=d*d,b=c*c,j=g,_e=d*c*2,$=b;return[j*o.start[0]+_e*o.cp[0]+$*o.end[0],j*o.start[1]+_e*o.cp[1]+$*o.end[1]]}e.compute=a})(W_||(W_={}));var q_;(e=>{function i(a){let o=a.start,c=a.end,d=[c[0]-o[0],c[1]-o[1]];return a.derivative=d,a.derivative}e.derive=i;function s(a,o){if(o===0)return[...a.start];if(o===1)return[...a.end];let c=a.start,d=a.end;return[c[0]+(d[0]-c[0])*o,c[1]+(d[1]-c[1])*o]}e.compute=s})(q_||(q_={}));var an=class extends yn{constructor(e,i,s){super(e,i,s),this.uuid=e,this.width=0,this.height=0,this.clipped=!0,this.background=new Bs(e+"-background",dd.defaultData,s),this.background.parent=this,this.updateState(i,s)}get fill(){return this.background.fill}get stroke(){return this.background.stroke}get backgroundBlur(){return this.background.backgroundBlur}get layerBlur(){return this.background.layerBlur}get dropShadow(){return this.background.dropShadow}get innerShadow(){return this.background.innerShadow}get cornerRadius(){return this.background.cornerRadius}set cornerRadius(e){this.background.cornerRadius=e}updateLocalMatrix(){var e;super.updateLocalMatrix(),(e=this.background)==null||e.updateLocalMatrix()}updateWorldMatrix(e,i,s){var a;super.updateWorldMatrix(e,i,s),(a=this.background)==null||a.updateWorldMatrix(e,i,s)}draw(e){if(!this.visible)return;e.save();let i=this.width,s=this.height;this.applyTransforms(e),this.background.width=i,this.background.height=s,this.background.draw(e),this.clipped&&e.clipRect(0,0,i,s,...this.cornerRadius),this.innerDrawChildren(e),e.restore()}getCenter(){return[this.width*.5,this.height*.5]}getHalfSize(){return[this.width*.5,this.height*.5]}updateCornerState(e){e.cornerRadius!==void 0&&(this.cornerRadius=e.cornerRadius)}updateSizeState(e){let i=!1;e.width!==void 0&&(this.width=typeof e.width=="number"?e.width:this.width,i=!0),e.height!==void 0&&(this.height=typeof e.height=="number"?e.height:this.height,i=!0),i&&this.updateWorldMatrix(!0,!1,!0)}updateState(e,i){super.updateState(e,i),this.updateSizeState(e),this.updateCornerState(e),e.fill!==void 0&&this.fill.update(e.fill),e.stroke!==void 0&&this.stroke.update(e.stroke),e.dropShadow!==void 0&&this.dropShadow.update(e.dropShadow),e.innerShadow!==void 0&&this.innerShadow.update(e.innerShadow),e.layerBlur!==void 0&&this.layerBlur.update(e.layerBlur),e.backgroundBlur!==void 0&&this.backgroundBlur.update(e.backgroundBlur),e.clipped!==void 0&&(this.clipped=e.clipped)}requestRender(){super.requestRender(),this.dispatchEvent({type:"render"})}dispose(){this.removeEventListener("render")}updateByPatchedOp(e,i,s){super.updateByPatchedOp(e,i,s),e.type===0&&(Rt(e.path,["fill"])?this.fill.update(e.props):Rt(e.path,["stroke"])?this.stroke.update(e.props):Rt(e.path,["dropShadow"])?this.dropShadow.update(e.props):Rt(e.path,["innerShadow"])?this.innerShadow.update(e.props):Rt(e.path,["layerBlur"])?this.layerBlur.update(e.props):Rt(e.path,["backgroundBlur"])?this.backgroundBlur.update(e.props):this.resetBBoxNeedsUpdate())}clone(e){let i=new an(this.uuid,this.data,e);i.parent=void 0;for(let s of this.children)i.add(s.clone(e));return i}},Q3=pi(Y_(),1),qa=class extends Ar$1{constructor(e,i,s){super(e,i,s),this.uuid=e,this.data=i,this._pathBBox=new DOMRect,this.path="",this.updateState(i,s),this.autoClose=!1,this.computeSVGBBox()}computeSVGBBox(){let e=document.createElementNS("http://www.w3.org/2000/svg","svg"),i=document.createElementNS("http://www.w3.org/2000/svg","path");document.body.appendChild(e),i.setAttribute("d",this.path),e.appendChild(i),this._pathBBox=i.getBBox(),e.remove()}innerDraw(e){e.path(this.path)}intersectsInLocalSpace(e,i){return e>=this._pathBBox.x&&e<=this._pathBBox.x+this._pathBBox.width&&i>=this._pathBBox.y&&i<=this._pathBBox.y+this._pathBBox.height}getCenter(){return[(this._pathBBox.x+this._pathBBox.width)/2,(this._pathBBox.y+this._pathBBox.height)/2]}getHalfSize(){return[(this._pathBBox.x+this._pathBBox.width)/2,(this._pathBBox.y+this._pathBBox.height)/2]}updateState(e,i){super.updateState(e,i),e.path!==void 0&&(this.path=e.path,this.computeSVGBBox())}clone(e){let i=new qa(this.uuid,this.data,e);return i.parent=void 0,i}};function K3(e,i=1,s=1){if(i<=0||s<=0)return e;let a=(0,Q3.parseSVG)(e).map(o=>{let c={...o};return"x"in c&&(c.x=c.x*i),"y"in c&&(c.y=c.y*s),"x1"in c&&(c.x1=c.x1*i),"x2"in c&&(c.x2=c.x2*i),"y1"in c&&(c.y1=c.y1*s),"y2"in c&&(c.y2=c.y2*s),"rx"in c&&(c.rx=c.rx*i),"ry"in c&&(c.ry=c.ry*s),c});return Z3(a)}function Z3(e){let i=["rx","ry","xAxisRotation","largeArc","sweep","x1","y1","x2","y2","x","y"],s;return e.map(a=>{let o=[];i.forEach(d=>{if(d in a){let g=a[d]*1;o.length&&g>=0&&o.push(","),o.push(g)}});let c=(s===a.code?o[0]<0?"":",":a.code)+o.join("");return s=a.code,c}).join("")}function J3(e,i,s){switch(i.type){case"ellipse2d":return new tc(e,i,s);case"rectangle2d":return new Bs(e,i,s);case"text2d":return new rc(e,i,s);case"vector2d":return new kf(e,i,s);case"path2d":return new qa(e,i,s);case"frame2d":return new an(e,i,s);case"group2d":default:return new Ln(e,i,s)}}var X_=class{constructor(e,i,s){this.uuid=e,this.data=i,this.group=new Ln(X_.GROUP_ID,{...lm.defaultData},s),this.createChildrenObjects(i.objects,this.group,s)}createObject(e,i,s,a,o,c){let d=J3(e,i,c);d&&(a.add(d),a.children.splice(o,0,a.children.pop()),d.updateWorldMatrix(),s.length>0&&(d instanceof Ln||d instanceof an)&&this.createChildrenObjects(s,d,c))}createChildrenObjects(e,i,s){let a=0;for(let o of e)this.createObject(o.id,o.data,o.children,i,a,s),a+=1}draw(e){this.group.draw(e)}updateEntityByOp(e,i,s,a){let o=this.find(e);if(o)try{o.updateByOp(i,s,{shared:a})}catch(c){console.error(c)}}updateTreeByOp(e,i){if(e.path.length===0&&e.type===7){let s=e.parent===null?this.group:this.find(e.parent);s!==void 0&&s instanceof yn&&(this.createObject(e.id,e.data,e.children,s,e.localIndex,i),s.requestRender())}else if(e.path.length===0&&e.type===8){let s=this.find(e.id);if(s!==void 0&&s.parent!==void 0&&s.parent instanceof yn){let a=s.parent;s.resetBBoxNeedsUpdate(),a==null||a.remove(s),a==null||a.requestRender()}}else if(e.path.length===0&&e.type===9){let s=this.find(e.id);if(s!==void 0){let a=s.parent,o=e.parent===null?this:this.find(e.parent);if(o instanceof yn||o===this){o.add(s);let c=e.localIndex;o.children.splice(c,0,o.children.pop()),s.updateWorldMatrix(!0,!1,!0),a==null||a.requestRender(),s.requestRender()}s.resetBBoxNeedsUpdate()}}}add(e){this.group.add(e)}remove(e){this.group.remove(e)}traverse(e){this.group.traverse(i=>{i!==this.group&&e(i)})}intersectsChildren(e,i,s,a=!1,o=[]){return this.group.intersectsChildren(e,i,s,a,o,!0)}find(e){return this.group.find(e)}get children(){return this.group.children}project(e,i){return this.group.project(e,i)}getWithSortKey(e){let i=this.find(e);if(i===void 0)return;let s=[],a=i;for(;a!==this.group;){let o=a;a=a.parent;let c=a.children.indexOf(o);s.splice(0,0,c)}return{entity:i,sortKey:s}}getAllSorted(e){let i=[];for(let s of e){let a=this.getWithSortKey(s.id);a!==void 0&&i.push(a)}return i.sort((s,a)=>bv(s.sortKey,a.sortKey)),i.map(s=>s.entity)}},lu=X_;lu.GROUP_ID="scene2d";function Q_({constraints:e,newParentWidth:i,newParentHeight:s,initialParentWidth:a,initialParentHeight:o,objectInitialWidth:c,objectInitialHeight:d,objectInitialPosition:g}){let{horizontalConstraint:b,verticalConstraint:j}=e,_e=i-a,$=s-o,rt=c,st=d,ut=g[0],gt=g[1];if(b!==0){if(b===1)ut+=_e;else if(b===3)ut+=_e/2;else if(b===2)rt=Math.max(1,rt+_e);else if(b===4){let wt=i/a;rt*=wt,ut*=wt}}if(j!==0){if(j===1)gt+=$;else if(j===3)gt+=$/2;else if(j===2)st=Math.max(1,st+$);else if(j===4){let wt=s/o;st*=wt,gt*=wt}}return{width:rt,height:st,position:[ut,gt]}}pi(Y_(),1);var tK=zt.identity(),Vf=class{constructor(e,i,s,a){this.uuid=e,this.width=i,this.height=s,this.context=a,this.enabled=!0,this.isScreenSpace=!1,this.isFrameDirty=!1,this.onRenderRequestedDownstream=()=>{this.isFrameDirty=!0,this.context.shared.requestRender()},this.onFrameOverrideObjectEvent=o=>{var c,d;if(((c=o.target)==null?void 0:c.uuid)!==void 0){let g=(d=this.frameRoot)==null?void 0:d.find(o.target.uuid);g&&g.dispatchEvent({...o,target:g})}},this.scene2d=new lu(Me.generateUUID(),p0.defaultData,{dpr:window.devicePixelRatio,shared:a.shared}),this.canvas=document.createElement("canvas"),this.renderer=new Zm(this.canvas),a.shared.addCanvas(this.uuid,this.canvas),this.textureHolder=a.shared.canvas(this.uuid),this.promise=this.init()}async init(){this.renderer instanceof Zm&&(this.renderer.wasmURL=tx.skiaWasmUrl),await this.renderer.init()}render(){var e,i;this.isFrameDirty&&(this.renderer.clear(),(e=this.frameOverride)==null||e.draw(this.renderer),this.renderer.render(),(i=this.textureHolder)==null||i.setNeedsUpdate(!0),this.isFrameDirty=!1)}updateEntity2DByOp(e,i,s,a){this.scene2d.updateEntityByOp(e,i,s,a),this.applySize()}updateTreeByOp(e,i){this.scene2d.updateTreeByOp(e,i),this.applySize()}applyOverrides(e){if(this.frameOverride&&this.frameRoot){this.frameOverride.position=[0,0],this.frameOverride.rotation=0;let i=(e==null?void 0:e.width)??this.width,s=(e==null?void 0:e.height)??this.height;this.frameOverride.width=i,this.frameOverride.height=s,this.frameOverride.localMatrix=tK,this.isScreenSpace&&(this.frameOverride.fill.color=St.from0to1([0,0,0,0])),this.frameOverride.data={...this.frameOverride.data,width:i,height:s},$3({objectOverride:this.frameOverride,objectRoot:this.frameRoot,newParentWidth:this.frameOverride.width,newParentHeight:this.frameOverride.height,initialParentWidth:this.frameRoot.width,initialParentHeight:this.frameRoot.height}),this.frameOverride.updateWorldMatrix(!0,!1,!0)}}applySize(e){var a,o;let i=(e==null?void 0:e.width)??this.width,s=(e==null?void 0:e.height)??this.height;this.width=i,this.height=s,this.renderer.dpr=this.isScreenSpace?window.devicePixelRatio:Math.floor(2048/Math.max(i,s)),this.renderer.setSize(i,s),(a=this.textureHolder)==null||a.dispose(),this.applyOverrides(e),(o=this.frameOverride)==null||o.requestRender()}applyFrame(e){var s,a,o;let i=this.context.scene.find2D(e);if(!(!i||!(i instanceof an)))return this.disposeFrameOverride(),this.frameRoot=i,this.frameOverride=i.clone({dpr:this.renderer.dpr,shared:this.context.shared}),this.scene2d.add(this.frameOverride),this.applySize(),(s=this.textureHolder)==null||s.dispose(),(a=this.frame)==null||a.addEventListener("render",this.onRenderRequestedDownstream),this.frameOverride.traverse(c=>{c.addEventListener("beginState",this.onFrameOverrideObjectEvent)}),this.frameOverride.traverse(c=>{c.addEventListener("completeState",this.onFrameOverrideObjectEvent)}),(o=this.frame)==null||o.requestRender(),i}get frame(){return this.frameOverride}get frameId(){var e;return(e=this.frame)==null?void 0:e.uuid}find(e){return this.scene2d.find(e)}get texture(){var e;return(e=this.textureHolder)==null?void 0:e.getTexture(1001)}disposeFrameOverride(){var e,i,s;(e=this.frameOverride)==null||e.removeEventListener("render",this.onRenderRequestedDownstream),(i=this.frameOverride)==null||i.traverse(a=>{a.removeEventListener("beginStateChange",this.onFrameOverrideObjectEvent)}),(s=this.frameOverride)==null||s.traverse(a=>{a.removeEventListener("completeState",this.onFrameOverrideObjectEvent)}),this.frameOverride&&this.scene2d.remove(this.frameOverride)}};function $3({objectOverride:e,objectRoot:i,newParentWidth:s,newParentHeight:a,initialParentWidth:o,initialParentHeight:c}){if(e instanceof an&&i instanceof an||e instanceof Ln&&i instanceof Ln)for(let d=0,g=e.children.length;d<g;d++){let b=e.children[d],j=i.children[d];b&&j&&b.uuid===j.uuid&&iK({objectOverride:b,objectRoot:j,newParentWidth:s,newParentHeight:a,initialParentWidth:o,initialParentHeight:c})}}function rK(e){if(K_(e))return[e.width,e.height];if(e instanceof qa){let[i,s]=e.getHalfSize();return[i*2,s*2]}else if(e instanceof Ln){let[i,s]=e.recursiveBBox.getHalfSize();return[i*2,s*2]}return[0,0]}function iK({objectOverride:e,objectRoot:i,newParentWidth:s,newParentHeight:a,initialParentWidth:o,initialParentHeight:c}){let[d,g]=rK(i),{width:b,height:j,position:_e}=Q_({constraints:e.data,newParentWidth:s,newParentHeight:a,initialParentWidth:o,initialParentHeight:c,objectInitialWidth:d,objectInitialHeight:g,objectInitialPosition:i.position});if(e.position=_e,e.data={...e.data,position:_e},e.states)for(let $ in e.states)nK({stateId:$,objectOverride:e,objectRoot:i,newParentWidth:s,newParentHeight:a,initialParentWidth:o,initialParentHeight:c});if(K_(e)||e instanceof Ln)K_(e)&&(e.width=b,e.height=j,e.data={...e.data,width:b,height:j}),$3({objectOverride:e,objectRoot:i,newParentWidth:b,newParentHeight:j,initialParentWidth:d,initialParentHeight:g});else if(e instanceof qa){let $=i,rt=d!==0?b/d:1,st=g!==0?j/g:1;e.path=K3($.path,rt,st),e.data={...e.data,path:e.path}}}function nK({stateId:e,objectOverride:i,objectRoot:s,newParentWidth:a,newParentHeight:o,initialParentWidth:c,initialParentHeight:d}){var j,_e;let g=(j=i.states)==null?void 0:j[e],b=(_e=s.states)==null?void 0:_e[e];if(g&&b){let{width:$,height:rt,position:st}=Q_({constraints:i.data,newParentWidth:a,newParentHeight:o,initialParentWidth:c,initialParentHeight:d,objectInitialWidth:Na.isResizeable(b)?b.width:0,objectInitialHeight:Na.isResizeable(b)?b.height:0,objectInitialPosition:b.position});Object.assign(i.states[e],{position:st}),Na.isResizeable(g)&&Object.assign(i.states[e],{width:$,height:rt})}}function K_(e){return e instanceof Bs||e instanceof an||e instanceof tc||e instanceof rc}var mr=class extends Pd(Pi){constructor(e,i,s){super(),this.data=i,this.bgColor=new xr$1(1,1,1,1),this.fog=null,this.backupFog=new qu(16777215,.1,2e3),this.fogUseBGColor=!1,this.isActive=!1,this.aoColor=new We,this.penumbraSizeArrayCache=null,this.super_Entity(e,i),this.personalCamera=new wr$1(As,{...Vc.defaultData,...i.camera,name:"Personal Camera"}),this.personalCamera.objectHelper.visible=!1,this.add(this.personalCamera),this.activeCamera=this.personalCamera,this.ambientLight=new Iy(13882323,8553090,.75),this.ambientLight.name="Default Ambient Light",this.ambientLight.layers.enable(3),this.ambientLight.removeFromParent(),this.add(this.ambientLight),i.uiScene?this.uiScene=new lu((Array.isArray(e)?e[0]:e)+"-ui",i.uiScene,{dpr:window.devicePixelRatio,shared:s.shared}):i.uiFrame&&this.createUICanvas(i.uiFrame,s)}get scene(){return this.parent}get postprocessing(){return this.data.postprocessing}get frameId(){return this.data.uiFrame}get frame(){var e;return(e=this.uiCanvas)==null?void 0:e.frame}createUICanvas(e,i){this.uiCanvas=new Vf(this.uuid+"-uiscreen",window.innerWidth,window.innerHeight,i),this.uiCanvas.isScreenSpace=!0,this.uiCanvas.promise.then(()=>{var s,a;(s=this.uiCanvas)==null||s.applyFrame(e),(a=this.uiCanvas)==null||a.applySize()})}updateVisible(){}setBackgroundColor(e){this.bgColor=e,this.fogUseBGColor===!0&&(this.backupFog.color=e)}entityChildrenCount(){return this.uiScene?this.uiScene.children.length:super.entityChildrenCount()}updateAmbientLight(e,i){e.color!==void 0&&(this.ambientLight.color=on(e.color,i)),e.intensity!==void 0&&(this.ambientLight.intensity=e.intensity),e.enabled!==void 0&&(e.enabled?this.add(this.ambientLight):this.remove(this.ambientLight))}onDeactive(){this.isActive=!1}onActive(e){this.isActive=!0,e.fog=this.fog,this.traverseEntity(i=>{i instanceof qn&&i.recomputeBoolean()}),this.updateShadow(this.data.shadow)}forceMaterialsUpdate(){this.traverseEntity(e=>{if(e instanceof Ps)if(Array.isArray(e.material))for(let i of e.material)i.needsUpdate=!0;else e.material.needsUpdate=!0,e.material.dispose()})}updateShadow(e){e.softShadowQuality!==void 0&&this.isActive&&O3(e.softShadowQuality)&&this.forceMaterialsUpdate()}updateFog(e,i){if(e.enabled?this.fog=this.backupFog:this.fog=null,this.isActive){let s=this.scene;s.fog=this.fog}this.fogUseBGColor=e.useBackgroundColor,e.useBackgroundColor?this.backupFog.color.set(this.bgColor):this.backupFog.color=on(e.color,i),this.backupFog.near=e.near,this.backupFog.far=e.far}updateAo(e,i){e.aoColor!==void 0&&(this.aoColor=on(e.aoColor,i))}updateByOp(e,i,s,a){let o=this.data.uiFrame;super.updateByOp(e,i,s,a);let c=i;Rt(e.path,["fog"])?this.updateFog(c.fog,s.shared):Rt(e.path,["ao"])?this.updateAo(c.ao,s.shared):Rt(e.path,["ambient"])?this.updateAmbientLight(c.ambient,s.shared):Rt(e.path,["shadow"])?this.updateShadow(c.shadow):e.type===0&&e.path.length===0&&(e.props.uiFrame!==void 0||o!==c.uiFrame)&&this.updateUIFrame(e.props.uiFrame,s)}updateUIFrame(e,i){e?(this.uiCanvas||this.createUICanvas(e,i),this.uiCanvas.enabled=!0,this.uiCanvas.applyFrame(e)):this.uiCanvas&&(this.uiCanvas.enabled=!1)}updateState(e,i){this.updateState_Entity(e,i),e.backgroundColor!==void 0&&this.setBackgroundColor(on(e.backgroundColor,i.shared)),e.fog!==void 0&&this.updateFog(e.fog,i.shared),e.ambient!==void 0&&this.updateAmbientLight(e.ambient,i.shared),e.ao!==void 0&&this.updateAo(e.ao,i.shared),e.shadow!==void 0&&this.updateShadow(e.shadow)}createFrame(e,i){}raycast(e,i){super.raycast(e,i)}switchActiveCamera(e){e&&e.isDescendantOf(this)&&(this.activeCamera!==this.personalCamera&&(this.activeCamera.objectHelper.visible=!0),this.activeCamera=e,e.objectHelper.visible=!1)}get playCamera(){var e;return((e=this.scene)==null?void 0:e.find(this.data.publish.playCamera))??this.personalCamera}switchToPlayCamera(){this.switchActiveCamera(this.playCamera)}get penumbraSizeArray(){return this.penumbraSizeArrayCache===null&&this.updatePenumbraSizeArray(),this.penumbraSizeArrayCache}updatePenumbraSizeArray(){this.penumbraSizeArrayCache=new Array(5).fill(.5);let e=0,i=0;this.traverseEntity(s=>{if(!s.visible)return!0;s instanceof Nf&&s.visible&&e<3&&(this.penumbraSizeArrayCache[e]=s.data.penumbraSize,e+=1),s instanceof Ff&&s.visible&&e<2&&(this.penumbraSizeArrayCache[3+i]=s.data.penumbraSize,i+=1)})}raycastWithClones(e){let i=[],s=a=>{for(let o of a.children){let c=o.cloner;vt.is(o)&&(o.visible||c!=null&&c.object.data.visible)&&((mn(o)||Wm(o)&&this.scene.enableHelpers&&o.objectHelper.visible)&&(e.intersectObject(o,!1,i),eg(o,e,i,!0)),s(o))}};return s(this),i}updateEntity2DByOp(e,i,s,a){var o;(o=this.uiCanvas)==null||o.updateEntity2DByOp(e,i,s,a)}},Yx=class extends Sf(Ly,Bf){constructor(e,i,s){super(),this.super_Entity(e,i),this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let a=this.shadow.camera;a.fov=90,a.aspect=1,a.near=100,a.far=2500;let o=new _(-a.far+this.position.x,-a.far+this.position.y,-a.far+this.position.z),c=new _(a.far+this.position.x,a.far+this.position.y,a.far+this.position.z),d=new Wt(o,c),g=new vl(d,new We(16755200));g.visible=!1,this.gizmos.shadowmap=g,this.update()}update(){if(this.shadow&&(this.shadow.camera.updateProjectionMatrix(),this.gizmos))for(let e in this.gizmos){let i=this.gizmos[e];if(i instanceof vl){let s=this.shadow.camera,a=new _(-s.far+this.position.x,-s.far+this.position.y,-s.far+this.position.z),o=new _(s.far+this.position.x,s.far+this.position.y,s.far+this.position.z);i.box.set(a,o),i.updateMatrixWorld(!0)}}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.objectHelper&&this.objectHelper.update()}updateState(e,i){this.updateState_Light(e,i),e.distance!==void 0&&(this.distance=e.distance),e.decay!==void 0&&(this.decay=e.decay),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}},Xx=class extends ur{get forceComputeSize(){return!0}get shape(){return this.geometry.userData.shape}updateEntityBoxSize(e,i){let s=this.geometry.getAttribute("position");s!==void 0?Cm(s,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:s.count,e,i):super.updateEntityBoxSize(e,i)}},ic=class extends ur{constructor(e,i,s){super(e,i,s),this._shapeId=null,this._context=s}updateState(e,i){super.updateState(e,i),this.updateShape()}updateShape(){var a;let e={...this.data.geometry.extrusion.shape};for(let o in e)typeof e[o]=="string"&&(e[o]=this._context.shared.getVariable(e[o],[this.uuid,"geometry","extrusion","shape",o]));let i;if(e.type==="Custom"){let o=e.shapeId;if(o!==this._shapeId&&this.detachShape(),o){this._shapeId=o;let c=this._context.scene.find(o);c!=null&&c.data&&(c.attachedPaths.add(this),i=(a=c.geometry.userData)==null?void 0:a.shape),i||this._context.scene.addPendingCommand(()=>this.updateShape())}}else{let o;switch(e.type){case"Rectangle":o=zd;break;case"Ellipse":o=Fd;break;case"Polygon":o=G0;break;case"Star":o=j0;break;default:throw new Error(`Unknown shape type: ${e.type}`)}i=o.create({parameters:e}).userData.shape}let s=this.geometry;i&&s.inputs&&(s.inputs.shapeData=i,s.build(),this.attachedSurfaceCloners.forEach(o=>o.update()))}detachShape(){var e;this._shapeId!==null&&((e=this._context.scene.find(this._shapeId))==null||e.attachedPaths.delete(this))}createGeometryDelayed(e){this.geometryCreateDeleyed=e.shared,this.updateShape(),this.refreshAttachedPaths(e)}updateTransformState(e,i){return super.updateTransformState(e,i)}updateGeometryInteractions(e,i){super.updateGeometryInteractions(e,i),this.updateShape()}updateEntityBoxSize(e,i){let s=this.geometry.getAttribute("position");s!==void 0?Cm(s,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:s.count,e,i):super.updateEntityBoxSize(e,i)}},uo=class extends Is(ps,Rs){constructor(e,i,s){super(),i.type==="Instance"&&typeof e=="string"&&(i=this.transformAssignData(i,s)),this.super_Entity(e,i),this.objectHelper.update()}get isComponentRoot(){return this.data.type==="Component"&&typeof this.identity=="string"}get isInstanceRoot(){return this.data.type==="Instance"&&typeof this.identity=="string"}transformAssignData(e,i){let s=sd.getComponentData({scene:i.scene.data,shared:i.shared.data},e.component);if(s){let a,o;for(let c of No.rootOverrideProps)e[c]===void 0?(a===void 0&&(a={...e}),a[c]=s.data[c]):(o===void 0&&(o={}),o[c]=e[c],a===void 0&&(a={...e}),a[c]=Co.apply(s.data[c],e[c]));return this.overrideData=o,a}else return{...Li.defaultData,...e,...as(Li.defaultData,No.rootOverrideProps)}}updateByOp(e,i,s,a){let o;if(this.isInstanceRoot&&!a){if(i=this.transformAssignData(i,s),e.type===0&&e.path.length===0&&this.component)for(let c of No.rootOverrideProps)c in e.props&&e.props[c]===void 0&&(o===void 0&&(o={...e,props:{...e.props}}),o.props[c]=this.component.data[c]);else if(e.type===0&&e.path.length>0&&No.rootOverrideProps.includes(e.path[0])){let c=e.path[0];o===void 0&&(o={...e,path:[],props:{[c]:i[c]}})}}super.updateByOp(o??e,i,s,a)}updateState(e,i){this.updateState_Entity(e,i)}expandInstanceChildren(e){let i=this.data;if(this.component===void 0){let s=e.scene.find(i.component)??null,a=!1;if(s!==this.oldComponent){if(this.oldComponent){let o=0;for(let c of this.children)if(vt.is(c))e.scene.disposeAndUnregisterEntityRecursivelyIfNotReregistered(c),Qx(c),o+=1;else break;this.children.splice(0,o)}a=!0}if(s){let o={};tL(e,[this.uuid],i.overrides,this,s,s,0,a,o);for(let c of this.children)if(vt.is(c)){let d=c.data;d.type==="Empty"&&d.animations&&c.traverseEntity(g=>{if(g instanceof ur&&g.isSkinnedMesh){let b=g.dataPatched;if(b.bones&&b.boneInverses){let j=b.bones.map(rt=>e.scene.find(o[rt])),_e=b.boneInverses.map(rt=>new ce$1().fromArray(rt)),$=new ul(j,_e);g.bind($,g.bindMatrix)}}else g.matrixAutoUpdate=!0})}}this.oldComponent=this.component}}};function Qx(e){if(e.component){let i=e.component.instances.indexOf(e);i>=0&&e.component.instances.splice(i,1);for(let s of e.children)vt.is(s)&&Qx(s)}}function eL(e,i,s,a){return e.component===i&&Xp(e.identity,a)?e.overrideData===s?2:1:0}function tL(e,i,s,a,o,c,d,g,b){if(d>50)return!1;if(a.component!==o){if(a.component){let _e=a.component.instances.indexOf(a);_e>=0&&a.component.instances.splice(_e,1)}o.instances.push(a),a.component=o}o instanceof uo&&o.isInstanceRoot&&o.expandInstanceChildren(e);let j=0;for(let _e of o.children)if(vt.is(_e)){let $=[...i,...typeof _e.identity=="string"?[_e.identity]:_e.identity],rt=id.resolve(s,$,1);rt!=null&&!(rt instanceof vr)&&(Object.setPrototypeOf(rt,vr.prototype),console.error("wrong prototype"));let st=null,ut;if(!g){let gt=a.children[j];if(st=vt.is(gt)?gt:null,st!==null){let wt=eL(st,_e,rt,$);ut=wt>=1?st.stateSelection:void 0,wt!==2&&(st=null)}if(st===null&&(st=e.scene.findInstance($)??null,st!==null)){let wt=eL(st,_e,rt,$);if(ut=wt>=1?st.stateSelection:void 0,wt!==2)st=null;else{let yt=st.parent.children.indexOf(st);st.parent.children.splice(yt,1),a.children.splice(j,0,st),st.parent===a?yt<=j&&console.error("not possible"):(st.parent=a,st.matrixWorldNeedsUpdate=!0,st.resetBBoxNeedsUpdate(),st.updateVisible(),e.pendingDeletes.delete(st))}}}if(st===null){let gt=rt?Co.apply(_e.data,rt):_e.data;Ks.is(gt.type)&&(gt={...gt,type:"Empty"}),st=eo.createEntity($,gt,e),st.overrideData=rt,a.add(st),a.children.splice(a.children.length-1,1),a.children.splice(j,0,st),st.updateState(st.data,e),ut&&st.changeSelectedState(ut,e),e.scene.registerInstanceAndSetUuid(st)}if(st.isBone){let gt=st.identity[st.identity.length-1];b[gt]=st.uuid}j+=1,tL(e,i,s,st,_e,c,d+1,g,b)}if(!g){let _e=j;for(;;){let $=a.children[j];if(vt.is($))e.pendingDeletes.add($);else break;j+=1}a.children.splice(_e,j-_e)}return!0}var Kx=class extends Is(Cp,Rs){constructor(e,i){super(),this.super_Entity(e,i),this.objectHelper.update(),this.matrixAutoUpdate=!0}updateState(e,i){this.updateState_Entity(e,i)}},_r$1=class extends ur{constructor(i,s,a){super(i,s,a),this.onBeforeRender=()=>{this.uiCanvas.render()},this.uiCanvas=new Vf(i+"-canvas",s.geometry.width,s.geometry.height,a),this.uiCanvas.promise.then(()=>{this.applyFrame(this.dataPatched.geometry.frame,a.shared)})}updateByPatchedOpGeometry(i,s,a){super.updateByPatchedOpGeometry(i,s,a),i.type===0&&(i.props.frame!==void 0&&this.applyFrame(i.props.frame,a.shared),(i.props.width!==void 0||i.props.height!==void 0)&&this.applySize(i.props,a.shared))}applySize(i,s){let a=(i==null?void 0:i.width)??this.dataPatched.geometry.width,o=(i==null?void 0:i.height)??this.dataPatched.geometry.height;this.uiCanvas.applySize({width:a,height:o}),this.applyGeometryParametersFromFrame(s)}applyFrame(i,s){this.uiCanvas.applyFrame(i),this.applyGeometryParametersFromFrame(s),this.applyMaterialParametersFromFrame({shared:s})}applyGeometryParametersFromFrame(i){var a;let s=this.frame;s&&(Object.assign(this.data,{geometry:Object.assign(this.data.geometry,{cornerRadius:s.cornerRadius,cornerType:0})}),Object.assign(this.dataPatched,{geometry:Object.assign(this.dataPatched.geometry,{cornerRadius:s.cornerRadius,cornerType:0})}),(a=this.localGeometry)==null||a.dispose(),this.localGeometry=Va(this.dataPatched.geometry,i,this.data.flatShading,this))}applyMaterialParametersFromFrame(i){let s=this.frame;if(s){let a=s.data.backgroundBlur;Object.assign(this.data.material.layers[0].data.texture,{image:this.uiCanvas.uuid}),Object.assign(this.data.material.layers[1].data,{roughness:a.radius,alpha:a.enabled?1:0}),Object.assign(this.dataPatched.material.layers[0].data.texture,{image:this.uiCanvas.uuid}),Object.assign(this.dataPatched.material.layers[1].data,{roughness:a.radius,alpha:a.enabled?1:0}),this.material.reset(this.dataPatched.material,i,!0)}}updateEntity2DByOp(i,s,a,o){this.uiCanvas.updateEntity2DByOp(i,s,a,o),i===this.frameId&&s.type===0&&(s.props.cornerRadius!==void 0?this.applyGeometryParametersFromFrame(o):Rt(s.path,["backgroundBlur"])&&this.applyMaterialParametersFromFrame({shared:o}))}get frame(){return this.uiCanvas.frame}get frameId(){var i;return(i=this.frame)==null?void 0:i.uuid}removeInteractionGeometry(i){super.removeInteractionGeometry(i),this.applySize({},i)}updateGeometryInteractions(i,s){super.updateGeometryInteractions(i,s),this.applySize({width:i.width,height:i.height},s)}},Zx=class{constructor(e,i,s){this.variables=[],this.currentTextureIndex=0;let a=Sr$1,o=new Pi,c=new rs;c.position.z=1;let d={passThruTexture:{value:null}},g=_e(rt(),d),b=new sr(new wn(2,2),g);o.add(b),this.setDataType=function(st){return a=st,this},this.addVariable=function(st,ut,gt){let wt=this.createShaderMaterial(ut),yt={name:st,initialValueTexture:gt,material:wt,dependencies:null,renderTargets:[],wrapS:null,wrapT:null,minFilter:Vt,magFilter:Vt};return this.variables.push(yt),yt},this.setVariableDependencies=function(st,ut){st.dependencies=ut},this.init=function(){if(s.capabilities.isWebGL2===!1&&s.extensions.has("OES_texture_float")===!1)return"No OES_texture_float support for float textures.";if(s.capabilities.maxVertexTextures===0)return"No support for vertex shader textures.";for(let st=0;st<this.variables.length;st++){let ut=this.variables[st];ut.renderTargets[0]=this.createRenderTarget(e,i,ut.wrapS,ut.wrapT,ut.minFilter,ut.magFilter),ut.renderTargets[1]=this.createRenderTarget(e,i,ut.wrapS,ut.wrapT,ut.minFilter,ut.magFilter),this.renderTexture(ut.initialValueTexture,ut.renderTargets[0]),this.renderTexture(ut.initialValueTexture,ut.renderTargets[1]);let gt=ut.material,wt=gt.uniforms;if(ut.dependencies!==null)for(let yt=0;yt<ut.dependencies.length;yt++){let At=ut.dependencies[yt];if(At.name!==ut.name){let Ct=!1;for(let Tt=0;Tt<this.variables.length;Tt++)if(At.name===this.variables[Tt].name){Ct=!0;break}if(!Ct)return"Variable dependency not found. Variable="+ut.name+", dependency="+At.name}wt[At.name]={value:null},gt.fragmentShader=`
uniform sampler2D `+At.name+`;
`+gt.fragmentShader}}return this.currentTextureIndex=0,null},this.compute=function(){let st=this.currentTextureIndex,ut=this.currentTextureIndex===0?1:0;for(let gt=0,wt=this.variables.length;gt<wt;gt++){let yt=this.variables[gt];if(yt.dependencies!==null){let At=yt.material.uniforms;for(let Ct=0,Tt=yt.dependencies.length;Ct<Tt;Ct++){let kt=yt.dependencies[Ct];At[kt.name].value=kt.renderTargets[st].texture}}this.doRenderTarget(yt.material,yt.renderTargets[ut])}this.currentTextureIndex=ut},this.getCurrentRenderTarget=function(st){return st.renderTargets[this.currentTextureIndex]},this.getAlternateRenderTarget=function(st){return st.renderTargets[this.currentTextureIndex===0?1:0]},this.dispose=function(){b.geometry.dispose(),b.material.dispose();let st=this.variables;for(let ut=0;ut<st.length;ut++){let gt=st[ut];gt.initialValueTexture&&gt.initialValueTexture.dispose();let wt=gt.renderTargets;for(let yt=0;yt<wt.length;yt++)wt[yt].dispose()}};function j(st){st.defines.resolution="vec2( "+e.toFixed(1)+", "+i.toFixed(1)+" )"}this.addResolutionDefine=j;function _e(st,ut){ut=ut||{};let gt=new lt({uniforms:ut,vertexShader:$(),fragmentShader:st});return j(gt),gt}this.createShaderMaterial=_e,this.createRenderTarget=function(st,ut,gt,wt,yt,At){return st=st||e,ut=ut||i,gt=gt||Kt,wt=wt||Kt,yt=yt||Vt,At=At||Vt,new ft(st,ut,{wrapS:gt,wrapT:wt,minFilter:yt,magFilter:At,format:Qr,type:a,depthBuffer:!1})},this.createTexture=function(){let st=new Float32Array(e*i*4),ut=new xi(st,e,i,Qr,Sr$1);return ut.needsUpdate=!0,ut},this.renderTexture=function(st,ut){d.passThruTexture.value=st,this.doRenderTarget(g,ut),d.passThruTexture.value=null},this.doRenderTarget=function(st,ut){let gt=s.getRenderTarget(),wt=s.xr.enabled,yt=s.shadowMap.autoUpdate,At=s.outputEncoding,Ct=s.toneMapping;s.xr.enabled=!1,s.shadowMap.autoUpdate=!1,s.outputEncoding=Sn,s.toneMapping=Hs,b.material=st,s.setRenderTarget(ut),s.render(o,c),b.material=g,s.xr.enabled=wt,s.shadowMap.autoUpdate=yt,s.outputEncoding=At,s.toneMapping=Ct,s.setRenderTarget(gt)};function $(){return`void main()	{

	gl_Position = vec4( position, 1.0 );

}
`}function rt(){return`uniform sampler2D passThruTexture;

void main() {

	vec2 uv = gl_FragCoord.xy / resolution.xy;

	gl_FragColor = texture2D( passThruTexture, uv );

}
`}}},ln=new Dr$1,Jx=new _,$x=class{constructor(e){let i=e.geometry;if(!i.isBufferGeometry||i.attributes.position.itemSize!==3)throw new Error("THREE.MeshSurfaceSampler: Requires BufferGeometry triangle mesh.");i.index&&(console.warn("THREE.MeshSurfaceSampler: Converting geometry to non-indexed BufferGeometry."),i=i.toNonIndexed()),this.geometry=i,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.colorAttribute=this.geometry.getAttribute("color"),this.weightAttribute=null,this.distribution=null}setWeightAttribute(e){return this.weightAttribute=e?this.geometry.getAttribute(e):null,this}build(){let e=this.positionAttribute,i=this.weightAttribute,s=new Float32Array(e.count/3);for(let o=0;o<e.count;o+=3){let c=1;i&&(c=i.getX(o)+i.getX(o+1)+i.getX(o+2)),ln.a.fromBufferAttribute(e,o),ln.b.fromBufferAttribute(e,o+1),ln.c.fromBufferAttribute(e,o+2),c*=ln.getArea(),s[o/3]=c}this.distribution=new Float32Array(e.count/3);let a=0;for(let o=0;o<s.length;o++)a+=s[o],this.distribution[o]=a;return this}setRandomGenerator(e){return this.randomFunction=e,this}sample(e,i,s){let a=this.distribution[this.distribution.length-1],o=this.binarySearch(this.randomFunction()*a);return this.sampleFace(o,e,i,s)}binarySearch(e){let i=this.distribution,s=0,a=i.length-1,o=-1;for(;s<=a;){let c=Math.ceil((s+a)/2);if(c===0||i[c-1]<=e&&i[c]>e){o=c;break}else e<i[c]?a=c-1:s=c+1}return o}sampleFace(e,i,s,a){let o=this.randomFunction(),c=this.randomFunction();return o+c>1&&(o=1-o,c=1-c),ln.a.fromBufferAttribute(this.positionAttribute,e*3),ln.b.fromBufferAttribute(this.positionAttribute,e*3+1),ln.c.fromBufferAttribute(this.positionAttribute,e*3+2),i.set(0,0,0).addScaledVector(ln.a,o).addScaledVector(ln.b,c).addScaledVector(ln.c,1-(o+c)),s!==void 0&&ln.getNormal(s),a!==void 0&&this.colorAttribute!==void 0&&(ln.a.fromBufferAttribute(this.colorAttribute,e*3),ln.b.fromBufferAttribute(this.colorAttribute,e*3+1),ln.c.fromBufferAttribute(this.colorAttribute,e*3+2),Jx.set(0,0,0).addScaledVector(ln.a,o).addScaledVector(ln.b,c).addScaledVector(ln.c,1-(o+c)),a.r=Jx.x,a.g=Jx.y,a.b=Jx.z),this}};function rL(e){let i=new Float32Array(e*e*2);for(let s=0;s<e;s++)for(let a=0;a<e;a++){let o=s*e+a;i[o*2+0]=s/(e-1),i[o*2+1]=a/(e-1)}return i}function iL(e){let i=Math.ceil(Math.sqrt(e));return Math.max(i,1)}function nL(e,i){let s=new sr(e.geometry,e.material),a=[],o=[],c=new _,d=new _;s.geometry.index!==null&&(s.geometry=s.geometry.toNonIndexed());let g=new $x(s).build();for(let _e=0;_e<i;_e++)g.sample(c,d),a.push(c.x,c.y,c.z),o.push(d.x,d.y,d.z);let b=new Float32Array(a),j=new Float32Array(o);return{positions:b,normals:j}}function Z_(e,i){let s=e,a=new Float32Array(4*i*i);for(let c=0;c<i*i;c++)a[4*c]=s[3*c],a[4*c+1]=s[3*c+1],a[4*c+2]=s[3*c+2],a[4*c+3]=0;let o=new xi(a,i,i,Qr,Sr$1);return o.needsUpdate=!0,o}function sL({size:e}){let i=new Float32Array(4*e*e);for(let a=0;a<e*e;a++)i[4*a]=a,i[4*a+1]=0,i[4*a+2]=0,i[4*a+3]=0;let s=new xi(i,e,e,Qr,Sr$1);return s.needsUpdate=!0,s}function oL(e){let i=new Float32Array(4*e*e);for(let a=0;a<e*e;a++)i[4*a]=0,i[4*a+1]=0,i[4*a+2]=0,i[4*a+3]=0;let s=new xi(i,e,e,Qr,Sr$1);return s.needsUpdate=!0,s}var aL=`
// uniform sampler2D uCurrentPosition; // Pass in the variable from GPGPU
// uniform sampler2D uCurrentVelocity; // Pass in the variable from GPGPU
// uniform sampler2D uCurrentEmissionRate; // Pass in the variable from GPGPU
uniform sampler2D uOriginalPosition;
uniform float uTime;
uniform float uSpeed;     // update speed of the particles
uniform vec3 uWorldOffset;    
uniform vec4 uWorldQuaternion;
uniform float uMaxLifeTime;
uniform vec3 uEmitterSize;
uniform float uFPSRatio;     // 1  for 60 FPS

float random (vec2 st) {
    return fract(sin(dot(st.xy,
        vec2(12.9898,78.233)))*
        43758.5453123);
}
vec3 applyQuaternionToVector( vec4 q, vec3 v ){
    return v + 2.0 * cross( q.xyz, cross( q.xyz, v ) + q.w * v );
}

vec3 applyForce(vec3 force, float mass) {
    vec3 acceleration = force / mass;
    
    return acceleration;
  }
  

void main() {
    vec2 vUv = gl_FragCoord.xy / resolution.xy;
    vec3 position = texture2D( uCurrentPosition, vUv ).xyz;
    float currentLife = texture2D( uCurrentPosition, vUv ).w;   // from 1 to 0
    float isSpawning = texture2D( uCurrentEmissionRate, vUv ).r;        // 1. = spawning, 0. = not spawning
    float isActive = texture2D( uCurrentEmissionRate, vUv ).g;          // 1. = active, 0. = not active
    float timeStart = texture2D( uCurrentEmissionRate, vUv ).b;         // timeStart in seconds when the particle was emitted
    vec3 originalPosition = ((texture2D( uOriginalPosition, vUv ).xyz) * uEmitterSize);
    vec3 velocity = texture2D( uCurrentVelocity, vUv ).xyz;
    float collisionFlag = texture2D( uCurrentVelocity, vUv ).w;             // 1. = collided, 0. = not collided
    float lifeTime = uMaxLifeTime;

    // Calculate the position adjustment based on collision
    //     if (collisionFlag > .5) {  
    float isColliding = step(0.5, collisionFlag); // 1.0 if collisionFlag > 0.5, otherwise 0.0
    float bounceOffset = 3.0 * isColliding; // Becomes 3.0 if colliding, 0.0 otherwise
    vec3 collisionAdjustedVelocity = velocity * (1.0 + bounceOffset);

    // Update position based on collision or normal movement
    vec3 fpsVelocity = velocity * min(uFPSRatio, 5.0);
    position += mix(fpsVelocity, collisionAdjustedVelocity, isColliding);

    // EMISSION RATE - BIRTH
    // if (isSpawning == 1.0) {
    // Better Approach to avoid If statement
    vec3 newPosition = applyQuaternionToVector(uWorldQuaternion, originalPosition) + uWorldOffset;
    originalPosition = mix(originalPosition, newPosition, isSpawning);
    position = mix(position, originalPosition, isSpawning);;
    timeStart = mix(timeStart, uTime, isSpawning);

    // Calculate timeLeft for life normalization
    float timeLeft = max(lifeTime - (uTime - timeStart), 0.0);
    float life_Normalize = timeLeft / lifeTime;

    // Use isActive to blend between the calculated color and black
    vec4 activeColor = vec4(position, life_Normalize);
    // if (isActive == 1.0) {
    gl_FragColor = mix(vec4(0.0), activeColor, isActive);

}
`,lL=`

    vec3 mod289(vec3 x) {
      return x - floor(x * (1.0 / 289.0)) * 289.0;
    }
    
    vec4 mod289(vec4 x) {
    return x - floor(x * (1.0 / 289.0)) * 289.0;
    }
    
    vec4 permute(vec4 x) {
        return mod289(((x*34.0)+1.0)*x);
    }
    
    vec4 taylorInvSqrt(vec4 r)
    {
    return 1.79284291400159 - 0.85373472095314 * r;
    }
    
    vec3 fade(vec3 t) {
  return t*t*t*(t*(t*6.0-15.0)+10.0);
}

    float snoise(vec3 v)
    {
    const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;
    const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);
    vec3 i  = floor(v + dot(v, C.yyy) );
    vec3 x0 =   v - i + dot(i, C.xxx) ;
    vec3 g = step(x0.yzx, x0.xyz);
    vec3 l = 1.0 - g;
    vec3 i1 = min( g.xyz, l.zxy );
    vec3 i2 = max( g.xyz, l.zxy );
    vec3 x1 = x0 - i1 + C.xxx;
    vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y
    vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y
    
    // Permutations
    i = mod289(i);
    vec4 p = permute( permute( permute(
                i.z + vec4(0.0, i1.z, i2.z, 1.0 ))
              + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))
              + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));
    
    // Gradients: 7x7 points over a square, mapped onto an octahedron.
    // The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)
    float n_ = 0.142857142857; // 1.0/7.0
    vec3  ns = n_ * D.wyz - D.xzx;
    
    vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)
    
    vec4 x_ = floor(j * ns.z);
    vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)
    
    vec4 x = x_ *ns.x + ns.yyyy;
    vec4 y = y_ *ns.x + ns.yyyy;
    vec4 h = 1.0 - abs(x) - abs(y);
    
    vec4 b0 = vec4( x.xy, y.xy );
    vec4 b1 = vec4( x.zw, y.zw );
    
    vec4 s0 = floor(b0)*2.0 + 1.0;
    vec4 s1 = floor(b1)*2.0 + 1.0;
    vec4 sh = -step(h, vec4(0.0));
    
    vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;
    vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;
    
    vec3 p0 = vec3(a0.xy,h.x);
    vec3 p1 = vec3(a0.zw,h.y);
    vec3 p2 = vec3(a1.xy,h.z);
    vec3 p3 = vec3(a1.zw,h.w);
    
    //Normalise gradients
    vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
    p0 *= norm.x;
    p1 *= norm.y;
    p2 *= norm.z;
    p3 *= norm.w;
    
    // Mix final noise value
    vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
    m = m * m;
    return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),
                                  dot(p2,x2), dot(p3,x3) ) );
    }
    
    vec3 snoiseVec3( vec3 x ){
    
      float s  = snoise(vec3( x ));
      float s1 = snoise(vec3( x.y - 19.1 , x.z + 33.4 , x.x + 47.2 ));
      float s2 = snoise(vec3( x.z + 74.2 , x.x - 124.5 , x.y + 99.4 ));
      vec3 c = vec3( s , s1 , s2 );
      return c;
    
    }
    
      
    vec3 curlNoise( vec3 p, float seed){
      p += seed;
      const float e = .1;
      vec3 dx = vec3( e   , 0.0 , 0.0 );
      vec3 dy = vec3( 0.0 , e   , 0.0 );
      vec3 dz = vec3( 0.0 , 0.0 , e   );
    
      vec3 p_x0 = snoiseVec3( p - dx );
      vec3 p_x1 = snoiseVec3( p + dx );
      vec3 p_y0 = snoiseVec3( p - dy );
      vec3 p_y1 = snoiseVec3( p + dy );
      vec3 p_z0 = snoiseVec3( p - dz );
      vec3 p_z1 = snoiseVec3( p + dz );
    
      float x = p_y1.z - p_y0.z - p_z1.y + p_z0.y;
      float y = p_z1.x - p_z0.x - p_x1.z + p_x0.z;
      float z = p_x1.y - p_x0.y - p_y1.x + p_y0.x;
    
      const float divisor = 1.0 / ( 2.0 * e );
      return normalize( vec3( x , y , z ) * divisor );
    
    }


// Classic Perlin noise
float cnoise(vec3 P)
{
  vec3 Pi0 = floor(P); // Integer part for indexing
  vec3 Pi1 = Pi0 + vec3(1.0); // Integer part + 1
  Pi0 = mod289(Pi0);
  Pi1 = mod289(Pi1);
  vec3 Pf0 = fract(P); // Fractional part for interpolation
  vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0
  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
  vec4 iy = vec4(Pi0.yy, Pi1.yy);
  vec4 iz0 = Pi0.zzzz;
  vec4 iz1 = Pi1.zzzz;

  vec4 ixy = permute(permute(ix) + iy);
  vec4 ixy0 = permute(ixy + iz0);
  vec4 ixy1 = permute(ixy + iz1);

  vec4 gx0 = ixy0 * (1.0 / 7.0);
  vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;
  gx0 = fract(gx0);
  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
  vec4 sz0 = step(gz0, vec4(0.0));
  gx0 -= sz0 * (step(0.0, gx0) - 0.5);
  gy0 -= sz0 * (step(0.0, gy0) - 0.5);

  vec4 gx1 = ixy1 * (1.0 / 7.0);
  vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;
  gx1 = fract(gx1);
  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
  vec4 sz1 = step(gz1, vec4(0.0));
  gx1 -= sz1 * (step(0.0, gx1) - 0.5);
  gy1 -= sz1 * (step(0.0, gy1) - 0.5);

  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);
  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);
  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);
  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);
  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);
  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);
  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);
  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);

  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
  g000 *= norm0.x;
  g010 *= norm0.y;
  g100 *= norm0.z;
  g110 *= norm0.w;
  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
  g001 *= norm1.x;
  g011 *= norm1.y;
  g101 *= norm1.z;
  g111 *= norm1.w;

  float n000 = dot(g000, Pf0);
  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
  float n111 = dot(g111, Pf1);

  vec3 fade_xyz = fade(Pf0);
  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); 
  return 2.2 * n_xyz;
}


vec3 fbm_vec3(vec3 p, float frequency, float offset)
{
  return vec3(
    cnoise((p+vec3(offset))*frequency),
    cnoise((p+vec3(offset+20.0))*frequency),
    cnoise((p+vec3(offset-30.0))*frequency)
  );
}

`,cL=`
  #ifdef USE_COLLIDER
    float restitution = max(uBounce * 2., .01); // Energy Loss
    // SPHERE COLLIDER
    // **************************************************************
    #ifdef USE_SPHERE_COLLIDER       
      // Convert collider size to radii (assuming uColliderSize is the diameter in each axis)
      vec3 radii = uColliderSize;
      // Adjust position relative to collider
      vec3 relPos = position - uColliderPos;
      // Apply rotation of the collider to the relative position
      relPos = applyQuaternionToVector(uColliderQuaternionInvert, relPos);            
      // Scale relative position by radii (for ellipsoid collision detection)
      vec3 scaledPos = relPos / radii;
      // Calculate ellipsoidal distance
      float dist = length(scaledPos); // Distance in terms of ellipsoid
      
      // Check for collision
      if (dist <= 1. + particleSize / length(radii) && collisionFlag == 0.0) {
          // Compute the normal at the collision point, accounting for particle size
        vec3 adjustedPos = scaledPos * (1.0 + particleSize / length(radii));          
        // Compute the normal at the collision point
        vec3 normal = ellipsoidNormal(adjustedPos, radii);
        // Rotate the normal back to world space
        normal = applyQuaternionToVector(uColliderQuaternion, normal);
        // Reflect the velocity vector off the normal
        velocity = reflect(velocity, normal) * restitution;

        collisionFlag = 1.0;
      } else {
        collisionFlag = 0.0;
      }
    #endif

    // BOX COLLIDER or PLANE COLLIDER 
    // **************************************************************
    #ifdef USE_BOX_COLLIDER
      // Box dimensions and repulsion variables
      vec3 boxHalfSize = uColliderSize / 2.0;
      // Convert world position to box's local space
      vec3 localPos = applyQuaternionToVector(uColliderQuaternionInvert, position - uColliderPos);      
      // Collision detection
      vec3 localDistance = abs(localPos) - boxHalfSize;
      float distToSurface = max(localDistance.x, max(localDistance.y, localDistance.z));    

      // Collision Detected
      if (distToSurface <= particleSize * 0.5 && collisionFlag == 0.0) {      
        // Find the nearest face normal for bounce direction
        vec3 normal;
        if (localDistance.x > localDistance.y && localDistance.x > localDistance.z) {
            normal = vec3(sign(localPos.x), 0.0, 0.0);
        } else if (localDistance.y > localDistance.z) {
            normal = vec3(0.0, sign(localPos.y), 0.0);
        } else {
            normal = vec3(0.0, 0.0, sign(localPos.z));
        }            
        // Rotate normal back to world space
        normal = applyQuaternionToVector(uColliderQuaternion, normal);      
        // Reflect velocity and apply repulsion force
        velocity = reflect(velocity, normal) * restitution;
        
        collisionFlag = 1.0;
      } else {
        collisionFlag = 0.0;
      }
    #endif      
  #endif      
  // END COLLIDER    
`,uL=`
  #ifdef USE_ATTRACTOR

      #ifdef USE_SPHERE_COLLIDER      
        // Convert collider size to radii (assuming uColliderSize is the diameter in each axis)
        vec3 radii = uColliderSize;
        // Adjust position relative to collider
        vec3 relPos = position - uColliderPos;
        // Apply rotation of the collider to the relative position
        relPos = applyQuaternionToVector(uColliderQuaternionInvert, relPos);            
        // Scale relative position by radii (for ellipsoid collision detection)
        vec3 scaledPos = relPos / radii;
        // Calculate ellipsoidal distance
        float distToSurface = length(scaledPos); // Distance in terms of ellipsoid
        float insideCheck = 1.0;

      #endif


      #ifdef USE_BOX_COLLIDER
        // Box dimensions
        vec3 boxHalfSize = uColliderSize / 2.0;
        // Convert world position to box's local space
        vec3 localPos = applyQuaternionToVector(uColliderQuaternionInvert, position - uColliderPos);      
        vec3 localDistance = abs(localPos) - boxHalfSize;
        float distToSurface = max(localDistance.x, max(localDistance.y, localDistance.z));
        float insideCheck = particleSize;
      #endif      
  
      // Apply vortex force inside the Helper
      #ifdef USE_FORCE_LOCAL_SPACE
        if (distToSurface <= insideCheck ) {    
            // Define parameters for the attractor field
            #ifdef USE_SPHERE_COLLIDER      
              float attractorStrength = (1.0 - distToSurface ) * uForceIntensity; // Adjust as needed
            #endif

            #ifdef USE_BOX_COLLIDER
              float attractorStrength = max((1.0 - insideCheck / distToSurface), 0.) * uForceIntensity; // Adjust as needed
              #endif

            float attractorDamping = uForceDamping;  // Adjust as needed (higher values will attenuate velocity more)
          
            // Use the same radii calculation code as for the collider
            vec3 attractorRadii = uColliderSize;
            // Adjust position relative to attractor center
            vec3 relPos = position - uColliderPos;
            // Apply rotation of the collider to the relative position
            relPos = applyQuaternionToVector(uColliderQuaternionInvert, relPos);            
            // Scale relative position by radii (for ellipsoid attraction)
            vec3 scaledPos = relPos / attractorRadii;

            // Calculate ellipsoidal distance as attractor radius
            float attractorRadius = length(scaledPos);
            // Calculate the distance from the attractor center
            vec3 relativePosition = position - uColliderPos;
            // Calculate the force vector towards the attractor center
            vec3 attractorForce = normalize(relativePosition) * attractorStrength;
            // Apply the attractor force to the particle
            velocity -= attractorForce;
            // Attenuate the particle's velocity
            velocity *= attractorDamping;
        }
      #else 
            // Calculate the distance from the attractor center
            vec3 relativePosition = position - uColliderPos;
            // Calculate the force vector towards the attractor center
            vec3 attractorForce = normalize(relativePosition) * uForceIntensity;
            // Apply the attractor force to the particle
            velocity -= attractorForce;
            // Attenuate the particle's velocity
            velocity *= uForceDamping;
      #endif    
  #endif      
`,hL=`
  #ifdef USE_VORTEX
    // Box dimensions
    vec3 boxHalfSize = uColliderSize / 2.0;
    // Convert world position to box's local space
    vec3 localPos = applyQuaternionToVector(uColliderQuaternionInvert, position - uColliderPos);      
    vec3 localDistance = abs(localPos) - boxHalfSize;
    float distToSurface = max(localDistance.x, max(localDistance.y, localDistance.z));

    // Apply vortex force inside the box
    if (distToSurface <= particleSize) {
      float vortexStrength = uForceIntensity;
      vec3 localTopCenter = vec3(0.0, 0., 0.0);

      // Transform the local top center to the world space
      vec3 vortexCenter = uColliderPos + applyQuaternionToVector(uColliderQuaternion, localTopCenter);
      // Calculate the vector from particle to vortex center
      vec3 vortexVector = vortexCenter - position;

      // Calculate the rotation axis from the inverse of the collider's quaternion and the fixed up vector
      // Note: important to add a tiny z component to the up vector to avoid instability
      vec3 upVector = vec3(0.0, 1.0, 0.01);
      vec3 rotationAxis = cross(upVector, applyQuaternionToVector(uColliderQuaternion, vortexVector));
      rotationAxis = normalize(rotationAxis);

      // Add rotational component to velocity
      float rotationSpeed = length(vortexVector * vortexStrength * 3.0) ; 

      vec3 rotationVelocity = rotationAxis * rotationSpeed;
      // velocity += rotationVelocity * 0.005 ;
      velocity = rotationVelocity * 0.005 ;

      // Calculate vortex force
      // vec3 vortexForce = normalize(vortexVector) * uSpeed * .1 ;
      // Apply the vortex force to the particle
      vec3 originDirection = applyQuaternionToVector(uWorldQuaternion, directions);
      velocity += applyForce( originDirection * uSpeed * (1. - uForceDamping) , mass * .5);
    }
  #endif      
`,dL=`
// uniform sampler2D uCurrentPosition; // Pass in the variable from GPGPU
// uniform sampler2D uCurrentVelocity; // Pass in the variable from GPGPU
// uniform sampler2D uCurrentEmissionRate; // Pass in the variable from GPGPU
uniform sampler2D uOriginalPosition;
uniform sampler2D uDirections;     
uniform vec3 uDirectionsAxis;
uniform vec4 uWorldQuaternion;
uniform vec3 uGravity;        
uniform float uNoiseStrength;     // Variation of the noise
uniform float uNoiseScale;        // Scale of the noise
uniform float uNoiseSeed;         // Seed of the noise
uniform float particleSize;
uniform float uSpeed;     // update speed of the particles
uniform float uRandomMassFactor;

// COLLIDER
uniform vec3 uColliderPos;                // Collider Position
uniform vec3 uColliderSize;               // Collider Dimension
uniform vec4 uColliderQuaternion;         // Collider Rotation
uniform vec4 uColliderQuaternionInvert;   // Collider Rotation
uniform float uBounce;                    // Bounce factor
uniform float uForceDamping;
uniform float uForceIntensity;


`+lL+`
float rand(vec2 co){
    return fract(sin(dot(co, vec2(12.9898, 78.233))) * 43758.5453);
}
vec3 applyQuaternionToVector( vec4 q, vec3 v ){
    return v + 2.0 * cross( q.xyz, cross( q.xyz, v ) + q.w * v );
 } 
vec3 applyForce(vec3 force, float mass) {
  vec3 acceleration = force / mass;
  
  return acceleration;
}

vec4 conjugate(vec4 q) {
  return vec4(q.w, -q.x, -q.y, -q.z);
}

// Function to compute the normal of the ellipsoid at a given point
vec3 ellipsoidNormal(vec3 p, vec3 radii) {
  return normalize(p / (radii * radii));
}

float friction = .3;

void main() {
    vec2 vUv = gl_FragCoord.xy / resolution.xy;
    vec3 position = texture2D( uCurrentPosition, vUv ).xyz;
    vec3 originalPosition = texture2D( uOriginalPosition, vUv ).xyz;
    float timeLeft = texture2D( uCurrentPosition, vUv ).w;
    vec3 directions = texture2D( uDirections, vUv ).xyz;    
    vec3 velocity = texture2D( uCurrentVelocity, vUv ).xyz;
    float mass = rand(originalPosition.xy) * 0.5 + 0.5;
    float isSpawning = texture2D( uCurrentEmissionRate, vUv ).x;        // 1. = spawning, 0. = not spawning
    float isActive = texture2D( uCurrentEmissionRate, vUv ).y;          // 1. = active, 0. = not active
    float collisionFlag =texture2D( uCurrentVelocity, vUv ).w;          // Indicate collision

    // Randomness Mass
    mass = (1.0 - (uRandomMassFactor * mass));
    
    if (isActive == 1.0) {
      // **************************************************************
      // FORCES NOISES
      // **************************************************************
      #ifdef USE_CURL_NOISE
        if (uNoiseScale > 0.0 ) {
          velocity = curlNoise(position * uNoiseScale * .002, uNoiseSeed) * ( uNoiseStrength + 1.0) * .05 * uSpeed;
        }
        // Variation of the noise Over Time
        if (uNoiseStrength > 0.0 && uNoiseScale == 0.0 ) {
          velocity += curlNoise( position, uNoiseSeed)  * uNoiseStrength * 0.05 * uSpeed;
        }
      #endif
      // **************************************************************
      #ifdef USE_SIMPLEX_NOISE
        if (uNoiseScale > 0.0 ) {
          velocity = vec3(snoise(position * uNoiseScale * .001) * ( uNoiseStrength + 1.0) * .1);
          velocity *= uSpeed;
        }
        // Variation of the noise Over Time
        if (uNoiseStrength > 0.0 && uNoiseScale == 0.0) {
          velocity += vec3(snoise(position * uNoiseStrength * .001) * .05 * uSpeed);
        }
      #endif
      // ************************************************************** 
      #ifdef USE_FBM_NOISE
        if (uNoiseScale > 0.0 ) {
          float offset = 0.0;
          velocity = fbm_vec3(position * uNoiseScale * .001, ( uNoiseStrength + 1.0), offset);
          velocity *= uSpeed;
        }
        // Variation of the noise Over Time
        if (uNoiseStrength > 0.0 && uNoiseScale == 0.0 ) {      
          float offset = 0.0;
          velocity += fbm_vec3(position * uNoiseStrength * .001, ( uNoiseStrength + 1.0), uNoiseSeed) * .1 * uSpeed;
        }
      #endif

      // COLLIDER
      ${cL}
      // ATTRACTION
      ${uL}  
      // VORTEX
      ${hL}
    } 
    // End isActive

    // SPAWN BIRTH 
    // **************************************************************
    // if (isSpawning == 1.)
    #ifdef USE_NORMALS
      velocity = mix(velocity, applyQuaternionToVector(uWorldQuaternion, directions) * uSpeed, isSpawning);
    #else
      velocity = mix(velocity, applyQuaternionToVector(uWorldQuaternion, uDirectionsAxis) * uSpeed, isSpawning);    
    #endif
    
    // if (collisionFlag == 0.0)
    velocity += applyForce(uGravity, mass * .5) * (1.0 - collisionFlag);

    gl_FragColor = vec4(velocity, collisionFlag);
}
`,J_=`

  // Linear Fade In
  float linearFadeIn(float t) {
    return t;
  }


  // linear fade out
  float linearFadeOut(float t) {
    return 1.0 - t;
  }
  
  float linearInOut(float t) {
    return t < 0.5 ? t :  (1.0 - t);  
  }

    // lerp
    float lerp(float a, float b, float t) {
      return a + (b - a) * t;
    }

  // Ease In Out Quart
  float exponentialInOut(float t) {
    return t < 0.4 ? lerp(0.0, 1.0, t / 0.4) :
    t > 0.6 ? lerp(1.0, 0.0, (t - 0.6) / 0.4) :
    1.0;
   }

  // constant
  float constant(float t) {
    return 1.0;
  } 
`,fL=`

float rand(vec3 co){
  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);
}

vec3 applyQuaternionToVector( vec4 q, vec3 v ){
  return v + 2.0 * cross( q.xyz, cross( q.xyz, v ) + q.w * v );
}

vec3 applyForce(vec3 force, float mass) {
  vec3 acceleration = force / mass;
    
  return acceleration;
}
`,pL=`
vec3 rgb2xyz (in vec3 rgb) {
    float r = rgb.r;
	float g = rgb.g;
	float b = rgb.b;

	r = r > 0.04045 ? pow(((r + 0.055) / 1.055), 2.4) : (r / 12.92);
	g = g > 0.04045 ? pow(((g + 0.055) / 1.055), 2.4) : (g / 12.92);
	b = b > 0.04045 ? pow(((b + 0.055) / 1.055), 2.4) : (b / 12.92);

	float x = (r * 0.4124) + (g * 0.3576) + (b * 0.1805);
	float y = (r * 0.2126) + (g * 0.7152) + (b * 0.0722);
	float z = (r * 0.0193) + (g * 0.1192) + (b * 0.9505);
    
    vec3 xyz = vec3(
        (r * 0.4124) + (g * 0.3576) + (b * 0.1805) * 100.0,
        (r * 0.2126) + (g * 0.7152) + (b * 0.0722) * 100.0,
        (r * 0.0193) + (g * 0.1192) + (b * 0.9505) * 100.0
    );
    return(xyz);
}

vec3 xyz2lab (in vec3 xyz) {
	float x = xyz.x / 95.047;
	float y = xyz.y / 100.0;
	float z = xyz.z / 108.883;

	x = x > 0.008856 ? pow(x, 1.0 / 3.0) : (7.787 * x) + (16.0 / 116.0);
	y = y > 0.008856 ? pow(y, 1.0 / 3.0) : (7.787 * y) + (16.0 / 116.0);
	z = z > 0.008856 ? pow(z, 1.0 / 3.0) : (7.787 * z) + (16.0 / 116.0);

    vec3 lab = vec3((116.0 * y) - 16.0, 500.0 * (x - y), 200.0 * (y - z));
    return(lab);
}

vec3 rgb2lab(in vec3 rgb) {
    vec3 xyz = rgb2xyz(rgb);
    vec3 lab = xyz2lab(xyz);
    return(lab);
}

vec3 xyz2rgb (in vec3 xyz) {
	float x = xyz.x / 100.0;
	float y = xyz.y / 100.0;
	float z = xyz.z / 100.0;
	
    
	float r = (x *  3.2406) + (y * -1.5372) + (z * -0.4986);
	float g = (x * -0.9689) + (y *  1.8758) + (z *  0.0415);
	float b = (x *  0.0557) + (y * -0.2040) + (z *  1.0570);

	r = r > 0.0031308 ? ((1.055 * pow(r, 1.0 / 2.4)) - 0.055) : r * 12.92;
	g = g > 0.0031308 ? ((1.055 * pow(g, 1.0 / 2.4)) - 0.055) : g * 12.92;
	b = b > 0.0031308 ? ((1.055 * pow(b, 1.0 / 2.4)) - 0.055) : b * 12.92;

	r = min(max(0.0, r), 1.0);
	g = min(max(0.0, g), 1.0);
	b = min(max(0.0, b), 1.0);

	return(vec3(r, g, b));
}

vec3 lab2xyz (in vec3 lab) {
    float l = lab.x;
	float a = lab.y;
	float b = lab.z;

  	float y = (l + 16.0) / 116.0;
	float x = a / 500.0 + y;
	float z = y - b / 200.0;

	float y2 = pow(y, 3.0);
	float x2 = pow(x, 3.0);
	float z2 = pow(z, 3.0);

  	y = y2 > 0.008856 ? y2 : (y - 16.0 / 116.0) / 7.787;
	x = x2 > 0.008856 ? x2 : (x - 16.0 / 116.0) / 7.787;
	z = z2 > 0.008856 ? z2 : (z - 16.0 / 116.0) / 7.787;

	x *= 95.047;
	y *= 100.0;
	z *= 108.883;

	return(vec3(x, y, z));
}
vec3 lab2rgb (in vec3 lab) {
    vec3 xyz = lab2xyz(lab);
    vec3 rgb = xyz2rgb(xyz);
    return(rgb);
}

`,mL=`
  uniform sampler2D uPosition;
  uniform float uSize;
  uniform float uSizeEnd;
  uniform vec3 uWorldOffset;
  uniform vec4 uWorldQuaternion;
  // Billboard Behavior - Currently at Zero, but we can change that
  uniform float uRotation;
  uniform float uRotationEnd;
  uniform vec2 center;

  // Randomness
  uniform float uRandScaleFactor;
  uniform float uRandRotationFactor;

  attribute vec2 ref;

  varying float v_LifeLeft;    // normalized lifetime 1 to 0
  varying vec2 vUv;
  varying vec2 vRef;

  ${fL}
  ${J_}
`,gL=({easeSize:e="linearFadeOut"})=>`
  vUv = uv;  
  vRef = ref;
  // Normalized LifeTime 1 to 0
  float lifeLeft = texture2D(uPosition, ref).w;
  v_LifeLeft = lifeLeft;
  // Position From DataTexture Simulation
  vec3 pos = texture2D(uPosition, ref).rgb - uWorldOffset;
  // Apply World Quaternion
  pos = applyQuaternionToVector(uWorldQuaternion, pos);  
            
  #ifdef  USE_SIZE_END
    // Scaled Over Time
    float t = 1. - lifeLeft;
    float currentSize = mix(uSize, uSizeEnd, t); // Linearly interpolate between uSize and uSizeEnd
    vec3 scaledPosition = position * vec3(currentSize);
  #else
    // Change Size Behavior over LifeTime
    float easeSize = ${e}(1. - lifeLeft);
    // Scaled Over Time
    vec3 scaledPosition = position * vec3(uSize * easeSize);
  #endif

  // Billboard Behavior
  vec2 scale;
  scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
  scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );    
  // Randomness 
  float randRef = rand(ref);
  scale *= (1.0 - (uRandScaleFactor * randRef));
  // Rotation
  float randRotation =  2.0 * PI * ( uRandRotationFactor * randRef);
  float originalRotation = (1.0 - uRotation) * 2.0 * PI;
  float originalRotationEnd = (1.0 - uRotationEnd) * 2.0 * PI;
  // OverTime
  float finalRotation = mix(originalRotation + randRotation, originalRotationEnd + randRotation, lifeLeft);

  vec2 alignedPosition = ( scaledPosition.xy - ( center - vec2( 0.5 ) ) ) * scale;
  vec2 rotatedPosition;
  rotatedPosition.x = cos( finalRotation ) * alignedPosition.x - sin( finalRotation ) * alignedPosition.y;
  rotatedPosition.y = sin( finalRotation ) * alignedPosition.x + cos( finalRotation ) * alignedPosition.y;
  
  mat4 instanceMatrix = mat4(
    vec4(1.0, 0.0, 0.0, 0.0),
    vec4(0.0, 1.0, 0.0, 0.0),
    vec4(0.0, 0.0, 1.0, 0.0),
    vec4(pos.x, pos.y, pos.z, 1.0)
  );  

  mvPosition = modelViewMatrix * instanceMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
  mvPosition.xy += rotatedPosition;
  gl_Position = projectionMatrix  * mvPosition;   
`,yL=`
  uniform vec4 uColor;                // start color
  uniform vec4 uColor2;               // end color
  uniform sampler2D uTexture;         // texture
  varying float v_LifeLeft;   // normalized lifetime 1 to 0
  varying vec2 vUv;
  varying vec2 vRef;

  float random(vec2 co) {
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
  }
  `+J_+`  
  ${pL}

`,vL=({easeOpacity:e="linearFadeOut"})=>`  
  // if Particle is dead, hide it
  if (v_LifeLeft <= 0.005 ) {
    discard;
  }

  #ifdef USE_RANDOM_COLORING
    float randVal = random(vRef); // Generate a random value based on the reference
    vec4 color = mix(uColor, uColor2, randVal); // Interpolate between the two colors
  #else
    vec4 color = mix(uColor, uColor2, 1. - v_LifeLeft);
  #endif

  // Opacity over Life Time
  float finalAlpha = ${e}(1. - v_LifeLeft);  
  vec4 textureColor = texture2D(uTexture, vUv).rgba; 
  finalColor = textureColor.rgb * color.rgb;
  finalAlpha = color.a * textureColor.a * finalAlpha;
  
  gl_FragColor = vec4(finalColor, finalAlpha);     

`,eb=class extends lt{constructor(e,i){super(),this.needsJitter=!0,this.type="ParticleMaterial",this.easeOpacity="linearFadeIn",this.easeSize="linearFadeIn",this.useSizeEnd=!1,this.isColoringRandom=!1,this.init(e,i),this.context=i}reset(){}init(e,i){this.transparent=!0,this.depthTest=!0,this.depthWrite=!1,this.easeOpacity=e.ease,this.easeSize=e.easeSize,this.layers=[],this.lightLayer=new On(0,"",{...Hr.defaultData("light","phong"),visible:!1},new za,{},i.shared),this.build()}updateState(e){e.coloring!==void 0&&(this.isColoringRandom=e.coloring==="random"),e.color!==void 0&&(e.color instanceof Array?this.uniforms.uColor.value=e.color:this.uniforms.uColor.value=this.context.shared.color(e.color)),e.color2!==void 0&&(e.color2 instanceof Array?this.uniforms.uColor2.value=e.color2:this.uniforms.uColor2.value=this.context.shared.color(e.color2)),e.size!==void 0&&(this.uniforms.uSize.value=e.size[0],this.uniforms.uSizeEnd.value=e.size[1],e.size[0]!==e.size[1]?this.useSizeEnd=!0:this.useSizeEnd=!1),e.ease!==void 0&&(this.easeOpacity=e.ease,this.build()),e.easeSize!==void 0&&(this.easeSize=e.easeSize,this.build()),this.needsUpdate=!0}onBeforeCompile(e){this.build(),e.defines=this.defines,e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader}build(){let e=new Kd;return e.needsJitter=this.needsJitter,e.addFragmentParsCode(QI),e.buildShader("vertex",this.fragment),e.buildShader("fragment",this.fragment),e.addFragmentFinalCode(KI),this.isColoringRandom&&e.define("USE_RANDOM_COLORING"),this.useSizeEnd&&e.define("USE_SIZE_END"),e.addVertexParsCode(mL),e.addFragmentParsCode(yL),e.addVertexFinalCode(gL({easeSize:this.easeSize})),e.addFragmentFinalCode(vL({easeOpacity:this.easeOpacity})),this.vertexShader=e.getCode("vertex"),this.fragmentShader=e.getCode("fragment"),this.defines=e.defines,this.uniforms={...e.uniforms,...this.uniforms},this.extensions=e.extensions,this}get nodeMaterial(){return this}get fragment(){return this.lightLayer.node}getDefines(){return this.defines}nodeMaterialDispose(){this.layers.forEach(e=>e.dispose()),super.dispose()}},zf=class{constructor(e,i,s,a){this.type="SphereEmitterShape",this.targetMesh=void 0,this.size=e,this.type=s,this.textureSize=iL(i);let o=1;this.targetMesh=(a==null?void 0:a.type)==="Mesh"&&a?a:this.getMesh(s,o);let{positions:c,dataTexture:d,dataTextureNormals:g}=this.createPositions(this.textureSize,this.targetMesh??this.getMesh(s,o));this.positionsTexture=d,this.positionsAttribute=c,this.directionsTexture=g}createPositions(e,i){let{positions:s,normals:a}=nL(i,e*e),o=Z_(s,e),c=Z_(a,e);return{dataTexture:o,positions:s,dataTextureNormals:c}}getMesh(e,i){let s=null;switch(e){case"SphereEmitterShape":{s=new Ys(i*.5,32,32);break}case"TorusEmitterShape":{s=new $u(i*.5,.3,15,40);break}case"ConeEmitterShape":{s=new dl(i,i,15);break}case"BoxEmitterShape":{s=new vi(i,i,i);break}case"PlaneEmitterShape":{s=new wn(i,i),s.rotateX(-Math.PI/2);break}case"MeshEmitterShape":{s=new Ys(i,32,32);break}default:{s=new Ys(i,32,32);break}}return new sr(s,new ts({color:16711680}))}applyToShader(e,i){this.size=new _().fromArray(i.size),e.uEmitterSize.value=this.size}dispose(){this.positionsTexture.dispose(),this.directionsTexture.dispose(),this.positionsAttribute=new Float32Array}};function cu(e){let i={...e},s=Zh.defaultData;i.forceFieldObjectId&&(i.colliderEntityId=i.forceFieldObjectId);let a={...s.shape,...i.shape},o={...s.renderMaterial,...i.renderMaterial};return{...s,...i,shape:a,renderMaterial:o}}var xL=`
// uniform sampler2D uCurrentPosition; // Pass in the variable from GPGPU
// uniform sampler2D uCurrentVelocity; // Pass in the variable from GPGPU
// uniform sampler2D uCurrentEmissionRate; // Pass in the variable from GPGPU

uniform sampler2D uIndex; // Texture with corresponding index
uniform float uLastIndexEmitted; // Last emitted index
uniform float uParticlesToEmit; // Number of particles to emit on that frame
uniform float uTime;

void main() {
    vec2 vUv = gl_FragCoord.xy / resolution.xy;
    float particleIndex = texture(uIndex, vUv).x;
    float timeLeft = texture2D( uCurrentPosition, vUv ).w;
    float isActive = texture2D( uCurrentEmissionRate, vUv ).g;    // 1. = active, 0. = not active
    float timeStart = texture2D( uCurrentEmissionRate, vUv ).b;


    // ********** Detect Colision to Create a flag and use it in position **********
    // We are doing this here, so

    // ********** Emit Particles **********
    // X = isSpawning 0.0 or 1.0
    // Y = isActive 0.0 or 1.0
    // Check if the vertex index is between the first value and the last value
    // if (particleIndex >= uLastIndexEmitted && particleIndex < uLastIndexEmitted + uParticlesToEmit) {
    //     // Emit a particle by writing 1 to the red channel of the color output
    //     // r: 1. == emit the particle
    //     // g: 1. == particle is now active
    //     timeStart = uTime;
    //     gl_FragColor = vec4(1.0, 1.0, timeStart, 1.0);
    // } else {
    //     // The Particle is either already emitted or not in the range of the particles to emit
    //     // Do not emit a particle by writing 0 to the red channel of the color output        
    //     gl_FragColor = vec4(0.0, isActive, timeStart, 1.0);
    // }
    // Determine if the particle is within the emission range
    float emitLowerBound = step(uLastIndexEmitted, particleIndex);
    float emitUpperBound = step(particleIndex, uLastIndexEmitted + uParticlesToEmit - 1.0);
    float emitParticle = emitLowerBound * emitUpperBound; // 1.0 if in range, 0.0 otherwise

    // Set timeStart and color
    timeStart = mix(timeStart, uTime, emitParticle);
    gl_FragColor = vec4(emitParticle, mix(isActive, 1.0, emitParticle), timeStart, 1.0);


}
`,$_=10,tb=class extends _t{constructor(e,i){super(),this.type="ParticleEmitter",this.debugMode=!1,this.worldSpace=!0,this.rootObject=null,this.gpuCompute=null,this.positionSimRT=null,this.velocitySimRT=null,this.emissionRateSimRT=null,this.emitterShape=void 0,this.isEmitting=!1,this.hasBeenReset=!1,this.emittedParticlesAmount=0,this.lastEmitTime=0,this.globalTime=0,this.targetFPS=60,this.previousRatio=1,this.lerpFactor=.4,this.particlesAmount=0,this.noiseStrength=0,this.noiseScale=0,this.isBillboardBased=!0,this.simFeaturesDefinition={USE_COLLIDER:!1,USE_ATTRACTOR:!1,USE_VORTEX:!1,USE_SPHERE_COLLIDER:!1,USE_BOX_COLLIDER:!1,USE_FORCE_LOCAL_SPACE:!1,USE_NORMALS:!1,USE_CURL_NOISE:!0,USE_SIMPLEX_NOISE:!1,USE_FBM_NOISE:!1},this.textureLoader=new Oy,this.currentWorldPosition=new _,this.systemQuaternion=new Qe,this.worldGravity=new _(0,0,0),this.directionAxis=new _(0,0,0),this.colliderV3=new _(0,0,0),this.colliderQuaternion=new Qe(0,0,0,1),this.matrixAutoUpdate=!0,this.renderer=e,this.system=i,this.shared=i.context.shared;let s=i.data;this.material=new eb(s.renderMaterial,i.context),this.material.uniforms={uSize:{value:0},uSizeEnd:{value:0},uColor:{value:s.renderMaterial.color},uColor2:{value:s.renderMaterial.color2},uPosition:{value:new _(0,0,0)},uEmissionData:{value:new _(0,0,0)},uTexture:{value:this.defaultTexture},uWorldOffset:{value:new _(0,0,0)},uWorldQuaternion:{value:new Ke(0,0,0,1)},uRandScaleFactor:{value:s.randomScale??0},uRandRotationFactor:{value:s.randomRotation??0},uRotation:{value:s.renderMaterial.spriteRotation[0]??0},uRotationEnd:{value:s.renderMaterial.spriteRotation[1]??0}},this.setTexture(this.material.uniforms,s.renderMaterial.texture),this.init(s)}setTexture(e,i){let s=i.data;if(typeof i=="string"){let a=this.shared.image(i),o=new tr(a.img);o.needsUpdate=!0,e.uTexture.value=o;return}if(typeof s!="string"){let a=new Image;a.onload=()=>{let d=new tr(a);d.needsUpdate=!0,e.uTexture.value=d};let o=new Blob([s],{type:"image/*"}),c=URL.createObjectURL(o);a.src=c}}updateGeometryAttributes(e,i){var a;let s=rL(i);!((a=this.emitterShape)!=null&&a.positionsAttribute)||e.geometry.setAttribute("ref",new Eo(s,2))}applyWorldSpace(){if(!this.system.started||!this.worldSpace||!this.positionSimRT||!this.velocitySimRT)return;let e=this.system;e.getWorldQuaternion(this.systemQuaternion),this.systemQuaternion.invert(),e.getWorldPosition(this.currentWorldPosition),this.material.uniforms.uWorldOffset.value=this.currentWorldPosition,this.material.uniforms.uWorldQuaternion.value.copy(this.systemQuaternion.normalize()),this.positionSimRT.material.uniforms.uWorldOffset.value=this.currentWorldPosition,this.systemQuaternion.invert(),this.positionSimRT.material.uniforms.uWorldQuaternion.value.copy(this.systemQuaternion.normalize()),this.velocitySimRT.material.uniforms.uWorldQuaternion.value.copy(this.systemQuaternion.normalize())}update(e,i){var d;if(!this.gpuCompute||!this.positionSimRT||!this.velocitySimRT||!this.emissionRateSimRT||this.hasBeenReset)return;if(this.checkIfAllParticlesAreDead()&&!this.hasBeenReset){this.reset();return}this.applyWorldSpace(),this.globalTime=e,this.positionSimRT.material.uniforms.uTime.value=e,this.emissionRateSimRT.material.uniforms.uTime.value=e;let s=1e3/i,a=this.targetFPS/s,o=this.previousRatio+(a-this.previousRatio)*this.lerpFactor;this.positionSimRT.material.uniforms.uFPSRatio.value=o,this.previousRatio=o;let c=this.isEmitting?this.GoEmitSomeParticles(e,this.system.data.birthRatePerSec):0;this.emissionRateSimRT.material.uniforms.uLastIndexEmitted.value=this.emittedParticlesAmount,this.emissionRateSimRT.material.uniforms.uParticlesToEmit.value=c,this.material.uniforms.uPosition.value=(d=this.gpuCompute.getCurrentRenderTarget(this.positionSimRT))==null?void 0:d.texture,this.system.colliderEntities.length>0&&this.renderColliders(),this.gpuCompute.compute()}renderColliders(){if(!this.velocitySimRT)return;let e=this.system.colliderEntities[0];if(!e)return;e.getWorldPosition(this.colliderV3),this.colliderV3.y===0&&(this.colliderV3.y=1e-4),this.velocitySimRT.material.uniforms.uColliderPos.value.copy(this.colliderV3);let i=e.data.size;this.colliderV3.fromArray(i),this.velocitySimRT.material.uniforms.uColliderSize.value.copy(this.simFeaturesDefinition.USE_SPHERE_COLLIDER?this.colliderV3.multiplyScalar(.5):this.colliderV3),e.getWorldQuaternion(this.colliderQuaternion),this.velocitySimRT.material.uniforms.uColliderQuaternion.value.copy(this.colliderQuaternion.normalize()),this.velocitySimRT.material.uniforms.uColliderQuaternionInvert.value.copy(this.colliderQuaternion.normalize().invert())}updateState(e){!this.velocitySimRT||!this.positionSimRT||(e.renderMaterial&&this.updateMaterialState(e.renderMaterial),this.updateParticleState(e))}updateVariableState(e,i){if(!this.velocitySimRT||!this.positionSimRT)return;i[2]==="size"&&this.material.updateState({size:[e,this.material.uniforms.uSizeEnd.value]}),i[2]==="sizeEnd"&&this.material.updateState({size:[this.material.uniforms.uSize.value,e]});let s=(a,o)=>{let c=[...this.system.data.shape.size];c[a]=o,this.updateParticleState({shape:{...this.system.data.shape,size:c}})};i[2]==="shape_size_0"&&s(0,e),i[2]==="shape_size_1"&&s(1,e),i[2]==="shape_size_2"&&s(2,e),i[2]==="speed"&&(this.velocitySimRT.material.uniforms.uSpeed.value=e/$_),i[2]==="gravity"&&this.worldGravity.set(0,e/100,0),i[2]==="noiseStrength"&&(this.noiseStrength=e,this.velocitySimRT.material.uniforms.uNoiseStrength.value=this.noiseStrength),i[2]==="noiseScale"&&(this.noiseScale=e,this.velocitySimRT.material.uniforms.uNoiseScale.value=this.noiseScale),i[2]==="direction_x"&&(this.directionAxis=this.getDirectionAxis([Number(e),this.system.data.direction[1],this.system.data.direction[2]])),i[2]==="direction_y"&&(this.directionAxis=this.getDirectionAxis([this.system.data.direction[0],Number(e),this.system.data.direction[2]])),i[2]==="direction_z"&&(this.directionAxis=this.getDirectionAxis([this.system.data.direction[0],this.system.data.direction[1],Number(e)]))}updateMaterialState(e){this.material.updateState({...e,size:e.size?[Number(this.shared.getVariable(e.size[0],[this.uuid,"particles","size"])),Number(this.shared.getVariable(e.size[1],[this.uuid,"particles","sizeEnd"]))]:[0,0]}),e.texture&&(this.setTexture(this.material.uniforms,e.texture),this.material.needsUpdate=!0)}updateParticleState(e){var i,s,a;if(!(!this.positionSimRT||!this.velocitySimRT)){if(this.shouldReInitGPUCompute(e)&&this.init(cu(this.system.data)),e.life!==void 0&&(this.positionSimRT.material.uniforms.uMaxLifeTime.value=e.life),e.speed!==void 0&&(this.velocitySimRT.material.uniforms.uSpeed.value=Number(this.shared.getVariable(e.speed,[this.uuid,"particles","speed"]))/$_),e.collisionBounce!==void 0&&(this.velocitySimRT.material.uniforms.uBounce.value=e.collisionBounce),e.noiseStrength!==void 0&&(this.noiseStrength=Number(this.shared.getVariable(e.noiseStrength,[this.uuid,"particles","noiseStrength"])),this.velocitySimRT.material.uniforms.uNoiseStrength.value=this.noiseStrength),e.noiseScale!==void 0&&(this.noiseScale=Number(this.shared.getVariable(e.noiseScale,[this.uuid,"particles","noiseScale"])),this.velocitySimRT.material.uniforms.uNoiseScale.value=this.noiseScale),e.noiseSeed!==void 0&&(this.velocitySimRT.material.uniforms.uNoiseSeed.value=e.noiseSeed),e.randomMass!==void 0&&(this.velocitySimRT.material.uniforms.uRandomMassFactor.value=e.randomMass),((i=e.renderMaterial)==null?void 0:i.size)!==void 0){let o=this.shared.getVariable(e.renderMaterial.size[0],[this.uuid,"particles","size"]);this.velocitySimRT.material.uniforms.particleSize.value=Number(o)}if(((s=e.renderMaterial)==null?void 0:s.spriteRotation)!==void 0&&(this.material.uniforms.uRotation.value=e.renderMaterial.spriteRotation[0],this.material.uniforms.uRotationEnd.value=e.renderMaterial.spriteRotation[1]),e.shape!==void 0){let o=e.shape.size??this.system.data.shape.size,c=[Number(this.shared.getVariable(o[0],[this.uuid,"particles","shape_size_0"])),Number(this.shared.getVariable(o[1],[this.uuid,"particles","shape_size_1"])),Number(this.shared.getVariable(o[2],[this.uuid,"particles","shape_size_2"]))],d={...cu(this.system.data).shape,size:c};(a=this.emitterShape)==null||a.applyToShader(this.positionSimRT.material.uniforms,d)}if(e.gravity!==void 0&&(this.worldGravity.set(0,Number(this.shared.getVariable(this.system.data.gravity,[this.uuid,"particles","gravity"]))/100,0),this.velocitySimRT.material.uniforms.uGravity={value:this.worldGravity}),e.direction!==void 0){let o=this.getDirectionFromVariable(e.direction);this.directionAxis=this.getDirectionAxis(o),this.velocitySimRT.material.uniforms.uDirectionsAxis.value=this.directionAxis}e.randomRotation!==void 0&&(this.material.uniforms.uRandRotationFactor.value=e.randomRotation),e.randomScale!==void 0&&(this.material.uniforms.uRandScaleFactor.value=e.randomScale)}}updateForceFieldParameters(e){!this.velocitySimRT||(e.forceIntensity!==void 0&&(this.velocitySimRT.material.uniforms.uForceIntensity.value=e.forceIntensity),e.forceDambing!==void 0&&(this.velocitySimRT.material.uniforms.uForceDamping.value=e.forceDambing))}getDirectionAxis(e){let i=[Number(e[0])*Me.DEG2RAD,Number(e[1])*Me.DEG2RAD,Number(e[2])*Me.DEG2RAD],s=new or(i[0],i[1],i[2],"XYZ");return this.directionAxis.set(0,1,0).applyEuler(s).normalize(),this.velocitySimRT&&(this.velocitySimRT.material.uniforms.uDirectionsAxis.value=this.directionAxis),this.directionAxis}shouldReInitGPUCompute(e){let{birthRatePerSec:i,rootObjectType:s,colliderEntityId:a,shape:o,emitTimeDuration:c,emitTimeCycle:d,life:g,directionMode:b,noiseType:j}=e;return i!==void 0||s!==void 0||a||a===null||d!==void 0||o!==void 0||g!==void 0||c!==void 0||b!==void 0||j!==void 0}init(e){this.dispose(),this.particlesAmount=this.getMaxParticlesAmount({birthRatePerSecond:e.birthRatePerSec,particleMaxLifeTime:e.life,loopDuration:e.emitTimeCycle==="infinity"?0:e.emitTimeDuration}),this.particlesAmount>1e5&&(console.warn("The maximum number of particles is limited to 100000."),this.particlesAmount=1e5),this.emitterShape=this.createShape(e.shape,this.particlesAmount);let i=setInterval(()=>{if(this.emitterShape)if(isNaN(this.emitterShape.positionsTexture.source.data.data[0])){this.init(e);return}else clearInterval(i)},100);if(!this.emitterShape)return;let s=new Zx(this.emitterShape.textureSize,this.emitterShape.textureSize,this.renderer),a=this.updateSimulationDefinition(e),o=s.addVariable("uCurrentPosition",a+aL,this.emitterShape.positionsTexture),c=s.addVariable("uCurrentVelocity",a+dL,this.emitterShape.directionsTexture),d=s.addVariable("uCurrentEmissionRate",xL,oL(this.emitterShape.textureSize));s.setVariableDependencies(o,[o,c,d]),s.setVariableDependencies(c,[o,c,d]),s.setVariableDependencies(d,[o,c,d]);let g=sL({size:this.emitterShape.textureSize}),b={uOriginalPosition:{value:this.emitterShape.positionsTexture},uWorldOffset:{value:new _(0,0,0)},uWorldQuaternion:{value:new Ke(0,0,0,1)},uTime:{value:0},uFPSRatio:{value:1},uMaxLifeTime:{value:e.life},uEmitterSize:{value:new _(Number(this.shared.getVariable(e.shape.size[0],[this.uuid,"particles","shape_size_0"])),Number(this.shared.getVariable(e.shape.size[1],[this.uuid,"particles","shape_size_1"])),Number(this.shared.getVariable(e.shape.size[2],[this.uuid,"particles","shape_size_2"])))},particleSize:{value:0}};o.material.uniforms=b;let j=this.getDirectionFromVariable(e.direction);this.directionAxis=this.getDirectionAxis(j),this.worldGravity.set(0,Number(this.shared.getVariable(this.system.data.gravity,[this.uuid,"particles","gravity"]))/100,0),this.noiseStrength=Number(this.shared.getVariable(e.noiseStrength,[this.uuid,"particles","noiseStrength"])),this.noiseScale=Number(this.shared.getVariable(e.noiseScale,[this.uuid,"particles","noiseScale"]));let _e=e.colliderEntityId&&this.system.getColliderData(e.colliderEntityId),$={uOriginalPosition:{value:this.emitterShape.positionsTexture},uDirections:{value:this.emitterShape.directionsTexture},uDirectionsAxis:{value:this.directionAxis},uWorldQuaternion:{value:new Ke(0,0,0,1)},uColliderPos:{value:new _(0,0,0)},uColliderSize:{value:new _(0,0,0)},uForceIntensity:{value:_e?_e.forceIntensity:0},uForceDamping:{value:_e?_e.forceDambing:0},uColliderQuaternion:{value:new Ke(0,0,0,1)},uColliderQuaternionInvert:{value:new Ke(0,0,0,1)},particleSize:{value:0},uGravity:{value:this.worldGravity},uNoiseStrength:{value:this.noiseStrength},uNoiseScale:{value:this.noiseScale},uNoiseSeed:{value:e.noiseSeed},uRandomMassFactor:{value:e.randomMass},uBounce:{value:e.collisionBounce},uSpeed:{value:Number(this.shared.getVariable(e.speed,[this.uuid,"particles","speed"]))/$_}};c.material.uniforms=$;let rt={uIndex:{value:g},uTime:{value:0},uLastIndexEmitted:{value:0},uParticlesToEmit:{value:0}};d.material.uniforms=rt;let st=[Number(this.shared.getVariable(e.shape.size[0],[this.uuid,"particles","shape_size_0"])),Number(this.shared.getVariable(e.shape.size[1],[this.uuid,"particles","shape_size_1"])),Number(this.shared.getVariable(e.shape.size[2],[this.uuid,"particles","shape_size_2"]))],ut={...cu(this.system.data).shape,size:st};this.emitterShape.applyToShader(o.material.uniforms,ut),s.init(),this.gpuCompute=s,this.positionSimRT=o,this.velocitySimRT=c,this.emissionRateSimRT=d,this.rootObject=this.createPrimaryEmitter(this.emitterShape.textureSize),this.add(this.rootObject),this.material.needsUpdate=!0}getDirectionFromVariable(e){let i=Number(this.shared.getVariable(e[0],[this.uuid,"particles","direction_x"])),s=Number(this.shared.getVariable(e[1],[this.uuid,"particles","direction_y"])),a=Number(this.shared.getVariable(e[2],[this.uuid,"particles","direction_z"]));return[i,s,a]}updateSimulationDefinition(e){if(this.simFeaturesDefinition.USE_COLLIDER=!1,this.simFeaturesDefinition.USE_ATTRACTOR=!1,this.simFeaturesDefinition.USE_VORTEX=!1,this.simFeaturesDefinition.USE_SPHERE_COLLIDER=!1,this.simFeaturesDefinition.USE_BOX_COLLIDER=!1,this.simFeaturesDefinition.USE_FORCE_LOCAL_SPACE=!1,this.simFeaturesDefinition.USE_NORMALS=!1,this.simFeaturesDefinition.USE_CURL_NOISE=!1,this.simFeaturesDefinition.USE_SIMPLEX_NOISE=!1,this.simFeaturesDefinition.USE_FBM_NOISE=!1,e.colliderEntityId&&this.system.colliderEntities.length>0){let s=this.system.getColliderData(e.colliderEntityId);switch(s==null?void 0:s.forceType){case"attractor":this.simFeaturesDefinition.USE_ATTRACTOR=!0;break;case"collider":this.simFeaturesDefinition.USE_COLLIDER=!0;break;case"vortex":this.simFeaturesDefinition.USE_VORTEX=!0;break}let a=s==null?void 0:s.colliderType;a==="sphere"&&(this.simFeaturesDefinition.USE_SPHERE_COLLIDER=!0),a==="box"&&(this.simFeaturesDefinition.USE_BOX_COLLIDER=!0),(s==null?void 0:s.forceRange)==="helper"&&(this.simFeaturesDefinition.USE_FORCE_LOCAL_SPACE=!0)}e.directionMode==="normals"&&(this.simFeaturesDefinition.USE_NORMALS=!0),e.noiseType==="curl"&&(this.simFeaturesDefinition.USE_CURL_NOISE=!0),e.noiseType==="simplex"&&(this.simFeaturesDefinition.USE_SIMPLEX_NOISE=!0),e.noiseType==="fbm"&&(this.simFeaturesDefinition.USE_FBM_NOISE=!0);let i="";for(let[s,a]of Object.entries(this.simFeaturesDefinition))a&&(i+=`#define ${s}
`);return i}createShape(e,i){this.emitterShape&&this.emitterShape.dispose();let s=new _(Number(this.shared.getVariable(e.size[0],[this.uuid,"particles","shape_size_0"])),Number(this.shared.getVariable(e.size[1],[this.uuid,"particles","shape_size_1"])),Number(this.shared.getVariable(e.size[2],[this.uuid,"particles","shape_size_2"])));if(e.type==="MeshEmitterShape"){let a=null;return this.system.context.scene.traverseEntity(o=>{o.uuid===e.fromMeshId&&(a=o)}),a?new zf(s,i,e.type,a):new zf(s,i,"SphereEmitterShape")}else return new zf(s,i,e.type)}createPrimaryEmitter(e){let i,s=e*e;return i=new Ey(new wn(1,1,1),this.material,s),this.updateGeometryAttributes(i,e),this.material.needsUpdate=!0,i.onBeforeRender=()=>{this.applyWorldSpace()},i}getMaxParticlesAmount({birthRatePerSecond:e,particleMaxLifeTime:i,loopDuration:s=0}){return Math.ceil(e*(i+s))}dispose(){var e,i,s;!this.gpuCompute||((i=(e=this.rootObject)==null?void 0:e.parent)==null||i.remove(this.rootObject),this.gpuCompute.dispose(),this.material.nodeMaterialDispose(),(s=this.emitterShape)==null||s.dispose())}GoEmitSomeParticles(e,i){let s=e-this.lastEmitTime,a=1/i;if(s>=a){let o=Math.max(1,Math.floor(s/a));return this.lastEmitTime=e,this.emittedParticlesAmount+o>this.particlesAmount&&(this.emittedParticlesAmount=0),this.emittedParticlesAmount+=o,o}return 0}checkIfAllParticlesAreDead(){return this.lastEmitTime+this.system.data.life+1<this.globalTime}reset(){this.hasBeenReset=!0,this.lastEmitTime=0,this.emittedParticlesAmount=0,this.gpuCompute&&this.init(cu(this.system.data))}startEmitting(){this.isEmitting=!0,this.hasBeenReset=!1,this.lastEmitTime=this.globalTime}stopEmitting(){this.isEmitting=!1}},uu=class extends pr{constructor(e,i,s){super(e,i),this.type="ParticleSystem",this.geometry=new Pe,this.actualTime=0,this.currentLoopTime=0,this.started=!1,this.stopped=!1,this.isFrozen=!1,this.isIdle=!0,this.emitter=null,this.colliderEntities=[],this.renderer=null,this.isPreWarm=!1,this._hasOnAfterRenderBeenCalled=!1,this.onAfterRender=a=>{this._hasOnAfterRenderBeenCalled||(this._hasOnAfterRenderBeenCalled=!0,this.init(a))},this.context=s,this.data={...i,...cu(i)},this.geometry.setAttribute("position",new Te([],3)),this.material=new ts({colorWrite:!1}),this.frustumCulled=!1}init(e){this.renderer=e,this.emitter=new tb(e,this),this.add(this.emitter),this.updateParticleState(this.data)}update(e){if(!this.isReady||!this.started||this.isFrozen||this.isIdle)return;this.actualTime+=e,this.stopped||(this.currentLoopTime+=e);let i=this.data.emitTimeCycle==="one_time";if((this.data.emitTimeCycle==="loop"||i)&&this.currentLoopTime>this.data.emitTimeDuration*1e3&&(this.stopped||(this.stop(),i||this.start(this.data.emitTimeLoopDelayStart==="start"?0:this.data.emitTimeDelay*1e3))),this.emitter&&this.started){let s=this.actualTime/1e3;this.emitter.update(s,e)}this.scale.set(1,1,1),this.updateMatrix()}isReady(){return!!this.emitter}hasCollider(e){return this.colliderEntities.some(i=>i.identity===e)}getColliderData(e){let i=this.colliderEntities.find(s=>s.identity===e);return i?i.data:null}updateByPatchedOp(e,i,s){super.updateByPatchedOp(e,i,s),Rt(e.path,["renderMaterial"])&&this.updateParticleState({renderMaterial:{...this.data.renderMaterial,...Fr$1.drop(e,1).props}}),Rt(e.path,["shape"])&&this.updateParticleState({shape:{...this.data.shape,...Fr$1.drop(e,1).props}})}updateState(e,i){super.updateState(e,i),this.updateParticleState(e)}updateParticleState(e){if(this.emitter){if(e.colliderEntityId!==void 0&&e.colliderEntityId!==null){let i=this.context.scene.find(e.colliderEntityId);this.colliderEntities=i?[i]:[]}e.colliderEntityId===null&&(this.colliderEntities=[]),this.emitter.updateState(e),e.emitTimeCycle&&this.started&&this.start()}}updateFromColliderEntity(e){!this.emitter||(this.emitter.updateForceFieldParameters(e),this.stop(),this.start())}start(e=0){var i;if(this.currentLoopTime=0,e){setTimeout(()=>{this.start(0)},e);return}this.started=!0,this.stopped=!1,this.isFrozen=!1,(i=this.emitter)==null||i.startEmitting()}froze(){this.isFrozen=!0}unFroze(){this.isFrozen=!1}stop(){var e;this.stopped=!0,this.currentLoopTime=0,(e=this.emitter)==null||e.stopEmitting()}reset(){var e;this.started=!1,this.stopped=!1,(e=this.emitter)==null||e.reset()}wakeUp(){this.isIdle=!1}sleep(){this.isIdle=!0,this.reset()}};function sK(e,i,s){let a;return i.geometry.type==="TextGeometry"?new yf(e,i,s):(i.geometry.type==="SubdivGeometry"?a=new ao(e,i,s):i.geometry.type==="PathGeometry"?a=new ic(e,i,s):i.geometry.type==="VectorGeometry"?a=new Xx(e,i,s):i.geometry.type==="BooleanGeometry"?a=new qn(e,i,s):i.geometry.type==="UIGeometry"?a=new _r$1(e,i,s):a=new ur(e,i,s),a)}function rb(e,i,s){return console.assert(i.type!==void 0),i.type==="Mesh"?sK(e,i,s):i.type==="Empty"?new Ls(e,i):i.type==="Particle"?new uu(e,i,s):i.type==="ParticleCollider"?new iu(e,i,s):i.type==="Splat"?new Ls(e,i):i.type==="Bone"?new Kx(e,i):i.type==="Page"?new mr(e,i,s):i.type==="PointLight"?new Yx(e,i,s):i.type==="SpotLight"?new Ff(e,i,s):i.type==="DirectionalLight"?new Nf(e,i,s):i.type==="Component"||i.type==="Instance"?new uo(e,i,s):Ks.is(i.type)?new wr$1(e,i):(console.error(i),new Ls(e,i))}eo.createEntity=rb;function oK(e,i,s){let a=rb(e.identity,i,s),o=e.children,c=e.attachedPaths,d=e.parent,g=e.component,b=e.instances,j=e.overrideData,_e=e.uuid,$=e.stateSelection;e.dispose();for(let rt of Object.keys(e))delete e[rt];Object.setPrototypeOf(e,Object.getPrototypeOf(a));for(let rt of Object.keys(a))e[rt]=a[rt];e.children=[...e.children,...o],e.attachedPaths=c,e.parent=d,e.component=g,e.instances=b,e.uuid=_e,e.overrideData=j,e.updateState(e.data,s),$&&e.changeSelectedState($,s),e.resetBBoxNeedsUpdate()}eo.changeEntityProptotype=oK;eo.Cloner=Ji;function SL(e,i,s,a){e.updateByOp(i,s,a,!1)}function wL(e,i){let s=!1,a=i.getLayersOfType("transmission"),o=i.getLayersOfType("outline");return o.length>0&&(e.layers.set(8),a.length>0&&e.layers.enable(3),s=!0,mf(e),pf(e)),a.length===0&&o.length===0&&e.layers.set(0),e instanceof Ps&&e.needsAO&&e.layers.enable(5),s}function AL(e,i){if(!i.layers)return!1;let s=!1,a=i.getLayersOfType("transmission").filter(c=>c.data.visible),o=i.getLayersOfType("outline").filter(c=>c.data.visible);return a.length>0&&(e.layers.set(3),o.length>0&&e.layers.enable(8),s=!0),a.length===0&&o.length===0&&e.layers.set(0),e.needsAO&&e.layers.enable(5),s}function _L(e){let i=!1;return e.traverseEntity(s=>{if(s instanceof Ps)if(Array.isArray(s.material))for(let a=0;a<s.material.length;a++)wL(s,s.material[a])&&(i=!0);else wL(s,s.material)&&(i=!0)}),i}function EL(e){let i=!1;return e.traverseEntity(s=>{if(s instanceof Ps)if(Array.isArray(s.material))for(let a=0;a<s.material.length;a++)AL(s,s.material[a])&&(i=!0);else AL(s,s.material)&&(i=!0)}),i}var aK=new ah,lK=new ce$1,cK=new qs;function eg(e,i,s,a=!1){let o=e.cloner;if(o)for(let c of o.children){let d=lK.copy(c.matrixWorld).invert(),g=cK.copy(i.ray).applyMatrix4(d),b=e.matrixWorld;g.applyMatrix4(b);let j=aK;j.set(g.origin,g.direction),j.near=i.near,j.far=i.far;let _e=j.intersectObject(e,!1);_e.length>0&&s.push({..._e[0],object:a?c:e})}}var ib=class{constructor(){this._constraints=new Map}setConstraint(e,i){i===null?this._constraints.delete(e):this._constraints.set(e,i)}removeDependencies(e){this._constraints.delete(e)}applyConstraints(e){let i=new Set;this._constraints.forEach((s,a)=>{let o=[a,s],c=s;for(;this._constraints.has(c);)c=this._constraints.get(c),i.has(c)||o.push(c);for(let d=o.length-2;d>=0;d--)if(!i.has(o[d])){let g=e.find(o[d]);g?g.applyPathSnapping(e):console.warn(`missing entity ${o[d]}`),i.add(o[d])}})}findDependency(e,i){let s=e;for(;this._constraints.has(s);)if(s=this._constraints.get(s),s===i)return!0;return!1}},ho=pi(Uf()),$o=pi(Gf()),$r$1=pi(Uf()),nt=pi(Gf()),nc=class{constructor(e,i,s){this._dataNormalized=e,this._minD=i,this._maxD=s}static createFromUnnormalized(e){let i=nt.sup(e),s=nt.inf(e),a=(0,$r$1.default)(new Float32Array(e.size),e.shape),o=i-s;return o<1e-4?nt.assigns(a,0):(nt.subs(a,e,s),nt.divs(a,a,o)),new nc(a,s,i)}get data(){return this._dataNormalized}get minD(){return this._minD}get maxD(){return this._maxD}denormalize(){let e=(0,$r$1.default)(new Float32Array(this._dataNormalized.size),this._dataNormalized.shape);return nt.muls(e,this._dataNormalized,this._maxD-this._minD),nt.adds(e,e,this._minD),e}},Er=class{constructor(e,i){this._quantized=e,this._method=i}get quantized(){return this._quantized}static maxIntBits(e){return 2**e-1}static fromNormalized(e,i){let s=e.data,a;if(i==="norm8x"){let o=Er.maxIntBits(8),c=(0,$r$1.default)(new Float32Array(s.size),s.shape);nt.muls(c,s,o),nt.roundeq(c),a=(0,$r$1.default)(new Uint8Array(c.data),s.shape)}else if(i==="norm565"){let o=(0,$r$1.default)(new Float32Array(s.size),s.shape);nt.assign(o,s),nt.mulseq(o.pick(null,0),Er.maxIntBits(5)),nt.mulseq(o.pick(null,1),Er.maxIntBits(6)),nt.mulseq(o.pick(null,2),Er.maxIntBits(5)),nt.roundeq(o);let c=(0,$r$1.default)(new Uint16Array(o.data),s.shape),d=(0,$r$1.default)(new Uint16Array(s.shape[0]),[s.shape[0]]),g=(0,$r$1.default)(new Uint16Array(s.shape[0]),[s.shape[0]]);nt.lshifts(d,c.pick(null,0),11),nt.lshifts(g,c.pick(null,1),5),nt.boreq(d,g),nt.boreq(d,c.pick(null,2)),a=d}else{let o=(0,$r$1.default)(new Float32Array(s.size),s.shape);nt.assign(o,s),nt.mulseq(o.pick(null,0),Er.maxIntBits(11)),nt.mulseq(o.pick(null,1),Er.maxIntBits(10)),nt.mulseq(o.pick(null,2),Er.maxIntBits(11)),nt.roundeq(o);let c=(0,$r$1.default)(new Uint32Array(o.data),s.shape),d=(0,$r$1.default)(new Uint32Array(s.shape[0]),[s.shape[0]]),g=(0,$r$1.default)(new Uint32Array(s.shape[0]),[s.shape[0]]);nt.lshifts(d,c.pick(null,0),21),nt.lshifts(g,c.pick(null,1),11),nt.boreq(d,g),nt.boreq(d,c.pick(null,2)),a=d}return new Er(a,i)}dequantize(e,i){let s=this._method,a,o=this._quantized;if(s==="norm8x"){let c=Er.maxIntBits(8);a=(0,$r$1.default)(new Float32Array(o.size),o.shape),nt.muls(a,o,1/c)}else if(s==="norm565"){let c=(0,$r$1.default)(new Uint8Array(o.shape[0]),[o.shape[0]]),d=(0,$r$1.default)(new Uint8Array(o.shape[0]),[o.shape[0]]),g=(0,$r$1.default)(new Uint8Array(o.shape[0]),[o.shape[0]]);nt.rrshifts(c,o,11),nt.rrshifts(d,o,5),nt.bandseq(d,Er.maxIntBits(6)),nt.bands(g,o,Er.maxIntBits(5)),a=(0,$r$1.default)(new Float32Array(o.shape[0]*3),[o.shape[0],3]),nt.muls(a.pick(null,0),c,1/Er.maxIntBits(5)),nt.muls(a.pick(null,1),d,1/Er.maxIntBits(6)),nt.muls(a.pick(null,2),g,1/Er.maxIntBits(5))}else{let c=(0,$r$1.default)(new Uint16Array(o.shape[0]),[o.shape[0]]),d=(0,$r$1.default)(new Uint16Array(o.shape[0]),[o.shape[0]]),g=(0,$r$1.default)(new Uint16Array(o.shape[0]),[o.shape[0]]);nt.rrshifts(c,o,21),nt.rrshifts(d,o,11),nt.bandseq(d,Er.maxIntBits(10)),nt.bands(g,o,Er.maxIntBits(11)),a=(0,$r$1.default)(new Float32Array(o.shape[0]*3),[o.shape[0],3]),nt.muls(a.pick(null,0),c,1/Er.maxIntBits(11)),nt.muls(a.pick(null,1),d,1/Er.maxIntBits(10)),nt.muls(a.pick(null,2),g,1/Er.maxIntBits(11))}return new nc(a,e,i)}},Tr$1=class{constructor(i,s,a,o,c,d=!1){this._quantized=i,this._minMaxMatrix=s,this._chunkSize=a,this._quantizationMethod=o,this._variableChunkSize=c,this._isDynamicChunks=d}get length(){return this._quantized.shape[0]}get nchunks(){return this._minMaxMatrix.shape[0]}get quantized(){return this._quantized}get method(){return this._quantizationMethod}get minmaxMatrix(){return this._minMaxMatrix}_createPrunedMinMax(i){let s=i.length,a=this.minmaxMatrix.shape[0]-s,o=(0,ho.default)(new Float32Array(a*2),[a,2]),c=0,d=a,g=0,b=this.minmaxMatrix.shape[0];for(let j=0;j<i.length;j++)b=i[j],d=b-g+c,d>c&&$o.assign(o.hi(d,2).lo(c,0),this.minmaxMatrix.hi(b,2).lo(g,0)),c=d,g=b+1;return c<a&&$o.assign(o.lo(c,0),this.minmaxMatrix.lo(g,0)),o}_createPrunedQuantized(i){let s=i.length,a=this.quantized.shape[0]-s,o=this._quantizationMethod,c,d;if(o==="norm8x"){d=this._quantized.shape[1];let $=d?a*d:a;c=(0,ho.default)(new Uint8Array($),d?[a,d]:[a,1])}else o==="norm565"?c=(0,ho.default)(new Uint16Array(a),[a]):c=(0,ho.default)(new Uint32Array(a),[a]);let g=0,b=a,j=0,_e=c.shape[0];for(let $=0;$<i.length;$++)_e=i[$],b=_e-j+g,b>g&&(d?$o.assign(c.hi(b,d).lo(g,0),this._quantized.hi(_e,d).lo(j,0)):$o.assign(c.hi(b).lo(g),this._quantized.hi(_e).lo(j))),g=b,j=_e+1;return g<a&&(d?$o.assign(c.lo(g,0),this._quantized.lo(j,0)):$o.assign(c.lo(g),this._quantized.lo(j))),c}pruneFeature(i,s,a){let o=this._createPrunedQuantized(i),c=this._createPrunedMinMax(s);return new Tr$1(o,c,this._chunkSize,this._quantizationMethod,a,!0)}static getRequiredNChunks(i,s){return Math.floor(i/s)}static fromArray(i,s,a){let o=i.shape[0],c=Math.floor(o/a),d=(0,ho.default)(new Float32Array(c*2),[c,2],[2,1]),g;s==="norm8x"?g=(0,ho.default)(new Uint8Array(i.size),i.shape):s==="norm565"?g=(0,ho.default)(new Uint16Array(i.shape[0]),[i.shape[0]]):g=(0,ho.default)(new Uint32Array(i.shape[0]),[i.shape[0]]);for(let b=0;b<c;b++){let j=b*a,_e=b+1<c?(b+1)*a:o,$;i.shape.length>1?$=nc.createFromUnnormalized(i.hi(_e,i.shape[1]).lo(j,0)):$=nc.createFromUnnormalized(i.hi(_e).lo(j)),d.set(b,0,$.minD),d.set(b,1,$.maxD),g.shape.length>1?$o.assign(g.hi(_e,g.shape[1]).lo(j,0),Er.fromNormalized($,s).quantized):$o.assign(g.hi(_e).lo(j),Er.fromNormalized($,s).quantized)}return new Tr$1(g,d,a,s)}denormDequant(){let i=this._minMaxMatrix.shape[0],s=this._quantized,a=s.shape[0],o=this._quantizationMethod,c=this._chunkSize,d;if(this._isDynamicChunks){if(!this._variableChunkSize)throw new Error("variable chunk must exists if chunkSize isDynamic");d=this._variableChunkSize}let g;o==="norm8x"?g=(0,ho.default)(new Float32Array(s.size),s.shape):g=(0,ho.default)(new Float32Array(a*3),[a,3]);let b=0,j=c;for(let _e=0;_e<i;_e++){let[$,rt]=[this._minMaxMatrix.get(_e,0),this._minMaxMatrix.get(_e,1)];this._isDynamicChunks&&(j=d[_e]);let st=_e+1<i?b+j:a,ut;s.shape.length>1?ut=new Er(s.hi(st,s.shape[1]).lo(b,0),o):ut=new Er(s.hi(st).lo(b),o),$o.assign(g.hi(st,g.shape[1]).lo(b,0),ut.dequantize($,rt).denormalize()),b=st}return g}static async fetchArrayBuffer(i){return await(await fetch(i,{mode:"cors"})).arrayBuffer()}},Ya=pi(Uf()),Bt=pi(Gf()),YL="http://127.0.0.1:8000",hu=pi(Uf()),gr=pi(Gf()),XL=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9];function QL(e){return e<1e5?e<100?e<10?0:1:e<1e4?e<1e3?2:3:4:e<1e7?e<1e6?5:6:e<1e9?e<1e8?7:8:9}function KL(e,i){if(e===i)return 0;if(~~e===e&&~~i===i){if(e===0||i===0)return e<i?-1:1;if(e<0||i<0){if(i>=0)return-1;if(e>=0)return 1;e=-e,i=-i}let o=QL(e),c=QL(i),d=0;return o<c?(e*=XL[c-o-1],i/=10,d=-1):o>c&&(i*=XL[o-c-1],e/=10,d=1),e===i?d:e<i?-1:1}let s=String(e),a=String(i);return s===a?0:s<a?-1:1}function LK(e){let i=0;for(;e>=32;)i|=e&1,e>>=1;return e+i}function ZL(e,i,s,a){let o=i+1;if(o===s)return 1;if(a(e[o++],e[i])<0){for(;o<s&&a(e[o],e[o-1])<0;)o++;BK(e,i,o)}else for(;o<s&&a(e[o],e[o-1])>=0;)o++;return o-i}function BK(e,i,s){for(s--;i<s;){let a=e[i];e[i++]=e[s],e[s--]=a}}function JL(e,i,s,a,o){for(a===i&&a++;a<s;a++){let c=e[a],d=i,g=a;for(;d<g;){let j=d+g>>>1;o(c,e[j])<0?g=j:d=j+1}let b=a-d;switch(b){case 3:e[d+3]=e[d+2];case 2:e[d+2]=e[d+1];case 1:e[d+1]=e[d];break;default:for(;b>0;)e[d+b]=e[d+b-1],b--}e[d]=c}}function rE(e,i,s,a,o,c){let d=0,g=0,b=1;if(c(e,i[s+o])>0){for(g=a-o;b<g&&c(e,i[s+o+b])>0;)d=b,b=(b<<1)+1,b<=0&&(b=g);b>g&&(b=g),d+=o,b+=o}else{for(g=o+1;b<g&&c(e,i[s+o-b])<=0;)d=b,b=(b<<1)+1,b<=0&&(b=g);b>g&&(b=g);let j=d;d=o-b,b=o-j}for(d++;d<b;){let j=d+(b-d>>>1);c(e,i[s+j])>0?d=j+1:b=j}return b}function iE(e,i,s,a,o,c){let d=0,g=0,b=1;if(c(e,i[s+o])<0){for(g=o+1;b<g&&c(e,i[s+o-b])<0;)d=b,b=(b<<1)+1,b<=0&&(b=g);b>g&&(b=g);let j=d;d=o-b,b=o-j}else{for(g=a-o;b<g&&c(e,i[s+o+b])>=0;)d=b,b=(b<<1)+1,b<=0&&(b=g);b>g&&(b=g),d+=o,b+=o}for(d++;d<b;){let j=d+(b-d>>>1);c(e,i[s+j])<0?b=j:d=j+1}return b}var nE=class{constructor(e,i){Ui(this,"array",null),Ui(this,"compare",null),Ui(this,"minGallop",7),Ui(this,"length",0),Ui(this,"tmpStorageLength",256),Ui(this,"stackLength",0),Ui(this,"runStart",null),Ui(this,"runLength",null),Ui(this,"stackSize",0),this.array=e,this.compare=i,this.length=e.length,this.length<2*256&&(this.tmpStorageLength=this.length>>>1),this.tmp=new Array(this.tmpStorageLength),this.stackLength=this.length<120?5:this.length<1542?10:this.length<119151?19:40,this.runStart=new Array(this.stackLength),this.runLength=new Array(this.stackLength)}pushRun(e,i){this.runStart[this.stackSize]=e,this.runLength[this.stackSize]=i,this.stackSize+=1}mergeRuns(){for(;this.stackSize>1;){let e=this.stackSize-2;if(e>=1&&this.runLength[e-1]<=this.runLength[e]+this.runLength[e+1]||e>=2&&this.runLength[e-2]<=this.runLength[e]+this.runLength[e-1])this.runLength[e-1]<this.runLength[e+1]&&e--;else if(this.runLength[e]>this.runLength[e+1])break;this.mergeAt(e)}}forceMergeRuns(){for(;this.stackSize>1;){let e=this.stackSize-2;e>0&&this.runLength[e-1]<this.runLength[e+1]&&e--,this.mergeAt(e)}}mergeAt(e){let i=this.compare,s=this.array,a=this.runStart[e],o=this.runLength[e],c=this.runStart[e+1],d=this.runLength[e+1];this.runLength[e]=o+d,e===this.stackSize-3&&(this.runStart[e+1]=this.runStart[e+2],this.runLength[e+1]=this.runLength[e+2]),this.stackSize--;let g=iE(s[c],s,a,o,0,i);a+=g,o-=g,o!==0&&(d=rE(s[a+o-1],s,c,d,d-1,i),d!==0&&(o<=d?this.mergeLow(a,o,c,d):this.mergeHigh(a,o,c,d)))}mergeLow(e,i,s,a){let o=this.compare,c=this.array,d=this.tmp,g=0;for(g=0;g<i;g++)d[g]=c[e+g];let b=0,j=s,_e=e;if(c[_e++]=c[j++],--a===0){for(g=0;g<i;g++)c[_e+g]=d[b+g];return}if(i===1){for(g=0;g<a;g++)c[_e+g]=c[j+g];c[_e+a]=d[b];return}let $=this.minGallop;for(;;){let rt=0,st=0,ut=!1;do if(o(c[j],d[b])<0){if(c[_e++]=c[j++],st++,rt=0,--a===0){ut=!0;break}}else if(c[_e++]=d[b++],rt++,st=0,--i===1){ut=!0;break}while((rt|st)<$);if(ut)break;do{if(rt=iE(c[j],d,b,i,0,o),rt!==0){for(g=0;g<rt;g++)c[_e+g]=d[b+g];if(_e+=rt,b+=rt,i-=rt,i<=1){ut=!0;break}}if(c[_e++]=c[j++],--a===0){ut=!0;break}if(st=rE(d[b],c,j,a,0,o),st!==0){for(g=0;g<st;g++)c[_e+g]=c[j+g];if(_e+=st,j+=st,a-=st,a===0){ut=!0;break}}if(c[_e++]=d[b++],--i===1){ut=!0;break}$--}while(rt>=7||st>=7);if(ut)break;$<0&&($=0),$+=2}if(this.minGallop=$,$<1&&(this.minGallop=1),i===1){for(g=0;g<a;g++)c[_e+g]=c[j+g];c[_e+a]=d[b]}else{if(i===0)throw new Error("mergeLow preconditions were not respected");for(g=0;g<i;g++)c[_e+g]=d[b+g]}}mergeHigh(e,i,s,a){let o=this.compare,c=this.array,d=this.tmp,g=0;for(g=0;g<a;g++)d[g]=c[s+g];let b=e+i-1,j=a-1,_e=s+a-1,$=0,rt=0;if(c[_e--]=c[b--],--i===0){for($=_e-(a-1),g=0;g<a;g++)c[$+g]=d[g];return}if(a===1){for(_e-=i,b-=i,rt=_e+1,$=b+1,g=i-1;g>=0;g--)c[rt+g]=c[$+g];c[_e]=d[j];return}let st=this.minGallop;for(;;){let ut=0,gt=0,wt=!1;do if(o(d[j],c[b])<0){if(c[_e--]=c[b--],ut++,gt=0,--i===0){wt=!0;break}}else if(c[_e--]=d[j--],gt++,ut=0,--a===1){wt=!0;break}while((ut|gt)<st);if(wt)break;do{if(ut=i-iE(d[j],c,e,i,i-1,o),ut!==0){for(_e-=ut,b-=ut,i-=ut,rt=_e+1,$=b+1,g=ut-1;g>=0;g--)c[rt+g]=c[$+g];if(i===0){wt=!0;break}}if(c[_e--]=d[j--],--a===1){wt=!0;break}if(gt=a-rE(c[b],d,0,a,a-1,o),gt!==0){for(_e-=gt,j-=gt,a-=gt,rt=_e+1,$=j+1,g=0;g<gt;g++)c[rt+g]=d[$+g];if(a<=1){wt=!0;break}}if(c[_e--]=c[b--],--i===0){wt=!0;break}st--}while(ut>=7||gt>=7);if(wt)break;st<0&&(st=0),st+=2}if(this.minGallop=st,st<1&&(this.minGallop=1),a===1){for(_e-=i,b-=i,rt=_e+1,$=b+1,g=i-1;g>=0;g--)c[rt+g]=c[$+g];c[_e]=d[j]}else{if(a===0)throw new Error("mergeHigh preconditions were not respected");for($=_e-(a-1),g=0;g<a;g++)c[$+g]=d[g]}}};function $L(e,i,s,a){if(!Array.isArray(e))throw new TypeError("Can only sort arrays");i?typeof i!="function"&&(a=s,s=i,i=KL):i=KL,s||(s=0),a||(a=e.length);let o=a-s;if(o<2)return;let c=0;if(o<32){c=ZL(e,s,a,i),JL(e,s,a,s+c,i);return}let d=new nE(e,i),g=LK(o);do{if(c=ZL(e,s,a,i),c<g){let b=o;b>g&&(b=g),JL(e,s,s+b,s+c,i),c=b}d.pushRun(s,c),d.mergeRuns(),o-=c,s+=c}while(o!==0);d.forceMergeRuns()}function sE(e){let i=(0,hu.default)(new Int32Array(e.shape[0]),[e.shape[0]]),s=(0,hu.default)(new Int32Array(e.shape[0]),[e.shape[0]]);return gr.bands(i,e,1023),gr.lshifts(s,i,16),gr.bxoreq(i,s),gr.bandseq(i,4278190335),gr.lshifts(s,i,8),gr.bxoreq(i,s),gr.bandseq(i,50393103),gr.lshifts(s,i,4),gr.bxoreq(i,s),gr.bandseq(i,51130563),gr.lshifts(s,i,2),gr.bxoreq(i,s),gr.bandseq(i,153391689),i}function NK(e){let i=sE(e.pick(null,0)),s=sE(e.pick(null,1));gr.lshiftseq(s,1);let a=sE(e.pick(null,2));return gr.lshiftseq(a,2),gr.boreq(i,s),gr.boreq(i,a),i}function sc(e,i){if(e.shape[0]!==i.shape[0])throw new Error("wrong length");let s=(0,hu.default)(new Float32Array(e.size),e.shape,e.stride,e.offset);for(let a=0;a<i.shape[0];a++){let o=i.get(a);if(e.shape.length>1)for(let c=0;c<e.shape[1];c++)s.set(a,c,e.get(o,c));else s.set(a,e.get(o))}return s}function oE(e){let i=gr.sup(e),s=gr.inf(e),a=1e3/Math.min(1e3,i-s),o=(0,hu.default)(new Float32Array(e.data),e.shape);gr.mulseq(o,a);let c=(0,hu.default)(new Int32Array(o.data),e.shape),d=NK(c),g=Array.from(d.data).map((j,_e)=>[j,_e]);$L(g,(j,_e)=>j[0]-_e[0]);let b=g.map(([j,_e])=>_e);return(0,hu.default)(Uint32Array.from(b))}var Ns=class{constructor(e,i,s,a,o,c,d,g,b,j){this.propertyDescs=e,this.format=i,this.nsplats=s,this.xyz=a,this.colors=o,this.harmonics=c,this.opacity=d,this.scaling=g,this.rotation=b,this.maxSHDegree=j}getPlyBinary(){let e=Ns._generateHeaderString(this.propertyDescs,this.format,this.nsplats),i=new TextEncoder().encode(e),s=Object.keys(this.propertyDescs).length,a=(0,Ya.default)(new Float32Array(this.nsplats*s),[this.nsplats,s]);if(Bt.assign(a.pick(null,this.propertyDescs.x.index),this.xyz.pick(null,0)),Bt.assign(a.pick(null,this.propertyDescs.y.index),this.xyz.pick(null,1)),Bt.assign(a.pick(null,this.propertyDescs.z.index),this.xyz.pick(null,2)),Bt.assign(a.pick(null,this.propertyDescs.f_dc_0.index),this.colors.pick(null,0)),Bt.assign(a.pick(null,this.propertyDescs.f_dc_1.index),this.colors.pick(null,1)),Bt.assign(a.pick(null,this.propertyDescs.f_dc_2.index),this.colors.pick(null,2)),Bt.assign(a.pick(null,this.propertyDescs.opacity.index),this.opacity.pick(null,0)),Bt.assign(a.pick(null,this.propertyDescs.scale_0.index),this.scaling.pick(null,0)),Bt.assign(a.pick(null,this.propertyDescs.scale_1.index),this.scaling.pick(null,1)),Bt.assign(a.pick(null,this.propertyDescs.scale_2.index),this.scaling.pick(null,2)),Bt.assign(a.pick(null,this.propertyDescs.rot_0.index),this.rotation.pick(null,0)),Bt.assign(a.pick(null,this.propertyDescs.rot_1.index),this.rotation.pick(null,1)),Bt.assign(a.pick(null,this.propertyDescs.rot_2.index),this.rotation.pick(null,2)),Bt.assign(a.pick(null,this.propertyDescs.rot_3.index),this.rotation.pick(null,3)),this.harmonics&&this.harmonics.length>0)for(let d=0;d<this.harmonics.length;d++){let g=d*3;Bt.assign(a.pick(null,this.propertyDescs[`f_rest_${g}`].index),this.harmonics[d].pick(null,0)),Bt.assign(a.pick(null,this.propertyDescs[`f_rest_${g+1}`].index),this.harmonics[d].pick(null,1)),Bt.assign(a.pick(null,this.propertyDescs[`f_rest_${g+2}`].index),this.harmonics[d].pick(null,2))}let o=new Uint8Array(a.data.buffer),c=new Uint8Array(o.length+i.length);return c.set(i),c.set(o,i.length),c.buffer}save(e,i){let s=this.getPlyBinary(),a=new Blob([s],{type:"application/octet-stream"}),o=new File([a],e),c=new FormData;c.append("file",o),c.append("filename",e),c.append("basedir",i),fetch(`${YL}/push_file`,{method:"POST",body:c})}static async loadFile(e){return await(await fetch(e)).arrayBuffer()}mortonPositionSplatsSort(){let e=oE(this.xyz),i=sc(this.xyz,e),s=sc(this.colors,e),a=sc(this.opacity,e),o=sc(this.scaling,e),c=sc(this.rotation,e),d=[];for(let g=0;g<this.harmonics.length;g++)d.push(sc(this.harmonics[g],e));return new Ns(this.propertyDescs,this.format,this.nsplats,i,s,d,a,o,c,this.maxSHDegree)}static _generateHeaderString(e,i,s){let a=`ply
format ${i.format} ${i.version}
element vertex ${s}`,o=Object.keys(e).length,c=Array(o);for(let d in e){let g=e[d];c[g.index]={name:d,dtype:g.dtype}}for(let d=0;d<c.length;d++)a=`${a}
property ${c[d].dtype} ${c[d].name}`;return`${a}
end_header
`}static fromArrayBuffer(e,i=3){let{splatCount:s,vertexData:a,propertiesDesc:o,format:c}=Ns.decodeHeader(e),d=a.buffer.slice(a.byteOffset),g=Object.keys(o).length,b=(0,Ya.default)(new Float32Array(d),[s,g]),j=0,_e={},$={double:8,int:4,uint:4,float:4,short:2,ushort:2,uchar:1};for(let Ct in o)if(o.hasOwnProperty(Ct)){let Tt=o[Ct].dtype;_e[Ct]=j,j+=$[Tt]}let rt=(0,Ya.default)(new Float32Array(s*3),[s,3]);Bt.assign(rt.pick(null,0),b.pick(null,_e.x/4)),Bt.assign(rt.pick(null,1),b.pick(null,_e.y/4)),Bt.assign(rt.pick(null,2),b.pick(null,_e.z/4));let st=(0,Ya.default)(new Float32Array(s*3),[s,3]);Bt.assign(st.pick(null,0),b.pick(null,_e.scale_0/4)),Bt.assign(st.pick(null,1),b.pick(null,_e.scale_1/4)),Bt.assign(st.pick(null,2),b.pick(null,_e.scale_2/4));let ut=(0,Ya.default)(new Float32Array(s*3),[s,3]);Bt.assign(ut.pick(null,0),b.pick(null,_e.f_dc_0/4)),Bt.assign(ut.pick(null,1),b.pick(null,_e.f_dc_1/4)),Bt.assign(ut.pick(null,2),b.pick(null,_e.f_dc_2/4));let gt=(0,Ya.default)(new Float32Array(s*4),[s,4]);Bt.assign(gt.pick(null,0),b.pick(null,_e.rot_1/4)),Bt.assign(gt.pick(null,1),b.pick(null,_e.rot_2/4)),Bt.assign(gt.pick(null,2),b.pick(null,_e.rot_3/4)),Bt.assign(gt.pick(null,3),b.pick(null,_e.rot_0/4));for(let Ct=0;Ct<s;Ct++){let Tt=gt.pick(Ct,null),kt=Math.sqrt(Tt.get(0)**2+Tt.get(1)**2+Tt.get(2)**2+Tt.get(3)**2);Bt.divseq(Tt,kt)}let wt=(0,Ya.default)(new Float32Array(s*1),[s,1]);Bt.assign(wt.pick(null,0),b.pick(null,_e.opacity/4));let yt=(Math.min(Math.max(i,0),3)+1)**2-1,At=[];for(let Ct=0;Ct<yt;Ct++){let Tt=(0,Ya.default)(new Float32Array(s*3),[s,3]),kt=Ct*3;Bt.assign(Tt.pick(null,0),b.pick(null,_e[`f_rest_${kt}`]/4)),Bt.assign(Tt.pick(null,1),b.pick(null,_e[`f_rest_${kt+1}`]/4)),Bt.assign(Tt.pick(null,2),b.pick(null,_e[`f_rest_${kt+2}`]/4)),At.push(Tt)}return new Ns(o,c,s,rt,ut,At,wt,st,gt,i)}static async fromPLYFile(e,i=3){let s=await Ns.loadFile(e);return Ns.fromArrayBuffer(s,i)}static decodeHeader(e){let i=new TextDecoder,s=0,a="",o=100;for(;;){if(s+o>=e.byteLength)throw new Error("End of file reached while searching for end of header");let rt=new Uint8Array(e,s,o);a+=i.decode(rt),s+=o;let st=s-o*2,ut=new Uint8Array(e,Math.max(0,st),st>0?o*2:o);if(i.decode(ut).includes("end_header"))break}let c=a.split(`
`),d=0,g={},b=0,j;for(let rt=0;rt<c.length;rt++){let st=c[rt].trim();if(st.startsWith("element vertex")){let ut=st.match(/\d+/);ut&&(d=parseInt(ut[0]))}else if(st.startsWith("property")){let ut=st.match(/(\w+)\s+(\w+)\s+(\w+)/);if(ut){let gt=ut[2],wt=ut[3];g[wt]={dtype:gt,index:b},b++}}else if(st.startsWith("format")){let ut=st.match(/(\w+)\s+(\w+)\s+(\d+\.?\d*)/);ut&&(j={format:ut[2],version:ut[3]})}else if(st==="end_header")break}let _e=a.indexOf("end_header")+10+1,$=new DataView(e,_e);return{splatCount:d,vertexData:$,headerOffset:s,propertiesDesc:g,format:j}}},du=class{constructor(e,i,s,a,o,c,d,g){this.config=e,this.xyz=i,this.scaling=s,this.color=a,this.opacity=o,this.harmonics=d,this.quaternion=c,this.variableChunkSize=g}get isDynamicChunks(){return this.variableChunkSize&&this.variableChunkSize.length>0}get nchunks(){return this.xyz.nchunks}get nsplats(){return this.xyz.length}get chunkSize(){return this.config.chunkSize}static compressFromGaussianData(e,i){let s=Tr$1.fromArray(e.xyz,i.xyz,i.chunkSize),a=Tr$1.fromArray(e.scaling,i.scaling,i.chunkSize),o=Tr$1.fromArray(e.colors,i.color,i.chunkSize),c=Tr$1.fromArray(e.opacity,i.opacity,i.chunkSize),d=Tr$1.fromArray(e.rotation,i.quaternion,i.chunkSize),g=e.harmonics,b=[];if(i.harmonics)for(let j=0;j<g.length;j++){let _e=Tr$1.fromArray(g[j],i.harmonics,i.chunkSize);b.push(_e)}return new du(i,s,a,o,c,d,b)}_countIndexesInChunks(e){let i=[],s=this.nchunks,a=this.chunkSize,o=this.nsplats,c=Tr$1.getRequiredNChunks(o,a);if(s===c)for(let d=0;d<e.length;d++){let g=e[d],b=Math.floor(g/this.chunkSize);b in i?i[b].push(g):i[b]=[g]}else{let d=this.variableChunkSize,g={},b=0;for(let j=0;j<s;j++)g[j]=b,b+=d[j];for(let j=0;j<e.length;j++){let _e=e[j],$=Math.min(Math.floor(_e/a),s-1);for(;_e>=g[$]+d[$];)$++;$ in i?i[$].push(_e):i[$]=[_e]}}return i}pruneSplats(e){let i=this._countIndexesInChunks(e),s,a=[];return i.length>0&&(s=this.variableChunkSize?[...this.variableChunkSize]:Array(this.nchunks).fill(this.chunkSize),i.forEach((o,c)=>{s[c]-=o.length,s[c]<=0&&a.push(c)}),s=s.filter(o=>o>0)),new du(this.config,this.xyz.pruneFeature(e,a,s),this.scaling.pruneFeature(e,a,s),this.color.pruneFeature(e,a,s),this.opacity.pruneFeature(e,a,s),this.quaternion.pruneFeature(e,a,s),this.harmonics?this.harmonics.map(o=>o.pruneFeature(e,a,this.variableChunkSize)):void 0,s)}static async loadConfig(e){return await(await fetch(e,{method:"GET",mode:"cors",headers:{Accept:"application/json"}})).json()}toGaussians(){var o;let e={format:"binary_little_endian",version:"1.0"},i={},s=0;if(i.x={dtype:"float",index:s},s++,i.y={dtype:"float",index:s},s++,i.z={dtype:"float",index:s},s++,i.f_dc_0={dtype:"float",index:s},s++,i.f_dc_1={dtype:"float",index:s},s++,i.f_dc_2={dtype:"float",index:s},s++,this.harmonics&&this.harmonics.length>0)for(let c=0;c<this.harmonics.length;c++)i[`f_rest_${c}`]={dtype:"float",index:s},s++,i[`f_rest_${c+1}`]={dtype:"float",index:s},s++,i[`f_rest_${c+2}`]={dtype:"float",index:s},s++;i.opacity={dtype:"float",index:s},s++,i.scale_0={dtype:"float",index:s},s++,i.scale_1={dtype:"float",index:s},s++,i.scale_2={dtype:"float",index:s},s++,i.rot_0={dtype:"float",index:s},s++,i.rot_1={dtype:"float",index:s},s++,i.rot_2={dtype:"float",index:s},s++,i.rot_3={dtype:"float",index:s},s++;let a=(o=this.harmonics)==null?void 0:o.map(c=>c.denormDequant());return new Ns(i,e,this.xyz.length,this.xyz.denormDequant(),this.color.denormDequant(),a||[],this.opacity.denormDequant(),this.scaling.denormDequant(),this.quaternion.denormDequant(),3)}},fu=pi(Uf()),Ai=pi(Gf()),eB={xyz:3,color:3,opacity:1,scaling:3,quaternion:4,harmonics:3},oc=class{constructor(e){this._buffer=e}get buffer(){return this._buffer}get decoded(){return this._decoded||(this._decoded=this.decodeBuffer()),this._decoded}get colorsA(){let e=.28209479177387814,i=this.decoded.color.denormDequant(),s=this.decoded.opacity.denormDequant(),a=(0,fu.default)(new Float32Array(i.shape[0]*4),[i.shape[0],4]);return Ai.mulseq(i,e),Ai.addseq(i,.5),Ai.mulseq(i,255),Ai.maxseq(i,0),Ai.minseq(i,255),Ai.negeq(s),Ai.expeq(s),Ai.addseq(s,1),Ai.recipeq(s),Ai.mulseq(s,255),Ai.assign(a.hi(i.shape[0],3).lo(0,0),i),Ai.assign(a.hi(i.shape[0],4).lo(0,3),s),(0,fu.default)(new Uint8Array(a.data),[i.shape[0],4]).data}get nsplats(){return this.decoded.nsplats}getSplatCount(){return this.decoded.nsplats}get precomputedCovarianceBufferData(){return this._precomputedCovarianceBufferData}decodeBuffer(){let{splatCount:e,chunkCount:i,chunkSize:s,typeChunks:a,vertexData:o,propertiesDesc:c}=this.decodeHeader(),d={xyz:c.xyz.compressionMethod,color:c.color.compressionMethod,opacity:c.opacity.compressionMethod,scaling:c.scaling.compressionMethod,quaternion:c.quaternion.compressionMethod,chunkSize:s};c.harmonics_0&&(d.harmonics=c.harmonics_0.compressionMethod);let g=o.byteOffset,b=Array(Object.keys(c).length);for(let wt in c)b[c[wt].index]={name:wt,method:c[wt].compressionMethod};let j=i*2*4,_e=g,$=a==="dynamic"?i*2:0,rt,st=!1;if($>0){let wt=new Uint16Array(o.buffer.slice(_e,_e+$));_e+=$,rt=Array.from(wt),st=!0}let ut={};for(let wt of b){let yt=0,At=!0;if(wt.method==="norm8x")yt=e*1*eB[wt.name];else if(wt.method==="norm11")yt=e*4;else if(wt.method==="norm565")yt=e*2;else throw At=!1,new Error(`Not Implemented format: ${wt.method}`);let Ct;if(At){let Pt=o.buffer.slice(_e,_e+j);Ct=(0,fu.default)(new Float32Array(Pt),[i,2]),_e+=j}else throw new Error("loading chunk byt hasnot minmax!");let Tt=o.buffer.slice(_e,_e+yt);_e+=yt;let kt;if(wt.method==="norm8x")kt=(0,fu.default)(new Uint8Array(Tt),[e,eB[wt.name]]);else if(wt.method==="norm11")kt=(0,fu.default)(new Uint32Array(Tt));else if(wt.method==="norm565")kt=(0,fu.default)(new Uint16Array(Tt));else throw new Error(`Not Implemented format: ${wt.method}`);ut[wt.name]=new Tr$1(kt,Ct,s,wt.method,rt,st)}let gt=[];for(let wt=0;wt<15;wt++){let yt=ut[`harmonics_${wt}`];yt&&(gt.push(yt),delete ut[`harmonics_${wt}`])}return gt.length>0&&(ut.harmonics=gt),new du(d,ut.xyz,ut.scaling,ut.color,ut.opacity,ut.quaternion,ut.harmonics,rt)}buildPreComputedBuffers(){let e=this.decoded,i=e.nsplats,s=new ArrayBuffer(24*i),a=new Float32Array(s),o=e.scaling.denormDequant(),c=e.quaternion.denormDequant(),d=new Qe,g=new nr,b=new nr,j=new nr,_e=new ce$1;for(let $=0;$<i;$++){_e.makeScale(Math.exp(o.get($,0)),Math.exp(o.get($,1)),Math.exp(o.get($,2))),b.setFromMatrix4(_e),d.set(c.get($,0),c.get($,1),c.get($,2),c.get($,3)),_e.makeRotationFromQuaternion(d),g.setFromMatrix4(_e),j.copy(g).multiply(b);let rt=j.elements;a[6*$]=rt[0]*rt[0]+rt[3]*rt[3]+rt[6]*rt[6],a[6*$+1]=rt[0]*rt[1]+rt[3]*rt[4]+rt[6]*rt[7],a[6*$+2]=rt[0]*rt[2]+rt[3]*rt[5]+rt[6]*rt[8],a[6*$+3]=rt[1]*rt[1]+rt[4]*rt[4]+rt[7]*rt[7],a[6*$+4]=rt[1]*rt[2]+rt[4]*rt[5]+rt[7]*rt[8],a[6*$+5]=rt[2]*rt[2]+rt[5]*rt[5]+rt[8]*rt[8]}this._precomputedCovarianceBufferData=s}decodeHeader(){let e=this._buffer,i=new TextDecoder,s=0,a="",o=100;for(;;){if(s+o>=e.byteLength)throw new Error("End of file reached while searching for end of header");let ut=new Uint8Array(e,s,o);a+=i.decode(ut),s+=o;let gt=s-o*2,wt=new Uint8Array(e,Math.max(0,gt),gt>=0?o*2:o);if(i.decode(wt).includes("end_header"))break}let c=a.split(`
`),d=0,g=0,b=0,j=0,_e="",$={};for(let ut=0;ut<c.length;ut++){let gt=c[ut].trim();if(gt.startsWith("element vertex")){let wt=gt.match(/\d+/);wt&&(d=parseInt(wt[0]))}else if(gt.startsWith("property")){let wt=gt.match(/(\w+)\s+(\w+)\s+(\w+)/);if(wt){let yt=wt[2],At=wt[3];$[yt]={compressionMethod:At,index:j},j++}}else if(gt.startsWith("element chunks")){let wt=gt.match(/\d+/);wt&&(g=parseInt(wt[0]))}else if(gt.startsWith("element chunkSize")){let wt=gt.match(/\d+/);wt&&(b=parseInt(wt[0]))}else if(gt.startsWith("element typeChunks")){let wt=gt.match(/(\w+)\s+(\w+)\s+(\w+)/);wt&&(_e=wt[3])}else if(gt==="end_header")break}let rt=a.indexOf("end_header")+10+1,st=new DataView(e,rt);return{splatCount:d,chunkCount:g,chunkSize:b,typeChunks:_e,vertexData:st,propertiesDesc:$}}pruneSplats(e){let i=this.decodeBuffer().pruneSplats(e);return oc.fromCompressedGaussianSplats(i)}static fromCompressedGaussianSplats(e){let i=e.xyz.length,s=e.xyz.nchunks,a=`gspline
element vertex ${i}
element chunks ${s}
element chunkSize ${e.chunkSize}
element typeChunks ${e.isDynamicChunks?"dynamic":"static"}
property xyz ${e.xyz.method}
property color ${e.color.method}
property opacity ${e.opacity.method}
property scaling ${e.scaling.method}
property quaternion ${e.quaternion.method}`;if(e.harmonics&&e.harmonics.length>0)for(let It=0;It<e.harmonics.length;It++)a=`${a}
property harmonics_${It} ${e.harmonics[It].method}`;a=`${a}
end_header
`;let o=new TextEncoder().encode(a),c=s*2*4,d=e.xyz.quantized.data.buffer.byteLength,g=e.xyz instanceof Tr$1?c:0,b=e.color.quantized.data.buffer.byteLength,j=e.color instanceof Tr$1?c:0,_e=e.opacity.quantized.data.buffer.byteLength,$=e.opacity instanceof Tr$1?c:0,rt=e.scaling.quantized.data.buffer.byteLength,st=e.scaling instanceof Tr$1?c:0,ut=e.quaternion.quantized.data.buffer.byteLength,gt=e.quaternion instanceof Tr$1?c:0,wt=e.variableChunkSize?Uint16Array.from(e.variableChunkSize):void 0,yt=wt?wt.byteLength:0,At=o.byteLength+yt+d+g+b+j+_e+$+rt+st+ut+gt,Ct=0,Tt=0;if(e.harmonics&&e.harmonics.length>0)for(let It=0;It<e.harmonics.length;It++)Ct+=e.harmonics[It].quantized.data.buffer.byteLength,Tt+=e.harmonics[It]instanceof Tr$1?c:0;Ct=0,Tt=0,At+=Ct+Tt;let kt=new Uint8Array(At),Pt=0;if(kt.set(o,Pt),Pt+=o.byteLength,yt>0&&(kt.set(new Uint8Array(wt.buffer),Pt),Pt+=yt),e.xyz instanceof Tr$1&&(kt.set(new Uint8Array(e.xyz.minmaxMatrix.data.buffer),Pt),Pt+=c),kt.set(new Uint8Array(e.xyz.quantized.data.buffer),Pt),Pt+=d,e.color instanceof Tr$1&&(kt.set(new Uint8Array(e.color.minmaxMatrix.data.buffer),Pt),Pt+=c),kt.set(new Uint8Array(e.color.quantized.data.buffer),Pt),Pt+=b,e.opacity instanceof Tr$1&&(kt.set(new Uint8Array(e.opacity.minmaxMatrix.data.buffer),Pt),Pt+=c),kt.set(new Uint8Array(e.opacity.quantized.data.buffer),Pt),Pt+=_e,e.scaling instanceof Tr$1&&(kt.set(new Uint8Array(e.scaling.minmaxMatrix.data.buffer),Pt),Pt+=c),kt.set(new Uint8Array(e.scaling.quantized.data.buffer),Pt),Pt+=rt,e.quaternion instanceof Tr$1&&(kt.set(new Uint8Array(e.quaternion.minmaxMatrix.data.buffer),Pt),Pt+=c),kt.set(new Uint8Array(e.quaternion.quantized.data.buffer),Pt),Pt+=ut,Ct>0&&e.harmonics&&e.harmonics.length>0)for(let It=0;It<e.harmonics.length;It++){let Lt=e.harmonics[It];Lt instanceof Tr$1&&(kt.set(new Uint8Array(Lt.minmaxMatrix.data.buffer),Pt),Pt+=c),kt.set(new Uint8Array(Lt.quantized.data.buffer),Pt),Pt+=Lt.quantized.data.byteLength}return new oc(kt.buffer)}},tB="AGFzbQEAAAAADwhkeWxpbmsuMAEEAAAAAAETA2AAAGAIf39/f39/f38AYAABfwISAQNlbnYGbWVtb3J5AgMAgIAEAwQDAAECBzkDEV9fd2FzbV9jYWxsX2N0b3JzAAALc29ydEluZGV4ZXMAARNlbXNjcmlwdGVuX3Rsc19pbml0AAIK3gMDAwABC9IDAwF/BnwBfgJAIAdFDQAgAysDUCEMIAMrAzAhDSADKwMQIQ5BACEDRP///////+9/IQtEAAAAAAAAEAAhCgNAIAIgA0ECdGoCfyAOIAEgA0EMbGoiCCoCALuiIA0gCCoCBLuioCAMIAgqAgi7oqBEAAAAAAAAsECiIgmZRAAAAAAAAOBBYwRAIAmqDAELQYCAgIB4CzYCACAJIAsgCSALYxshCyAJIAogCSAKZBshCiADQQFqIgMgB0cNAAsgB0UNACAGuCAKIAuhoyEJQQAhAwNAAn8gCSACIANBAnRqIgEoAgC3IAuhoiIKmUQAAAAAAADgQWMEQCAKqgwBC0GAgICAeAshCCABIAg2AgAgBCAIQQJ0aiIBIAEoAgBBAWo2AgAgA0EBaiIDIAdHDQALCyAGQQJPBEAgBCgCACEIQQEhAwNAIAQgA0ECdGoiASABKAIAIAhqIgg2AgAgA0EBaiIDIAZHDQALCyAHQQFrIgGtIQ8DQCAEIAIgD6dBAnQiA2ooAgBBAnRqIgcgBygCAEEBayIHNgIAIAUgASAHa0ECdGogACADaigCADYCACAPUCEDIA9CAX0hDyADRQ0ACyAGBEAgBEEAIAZBAnT8CwALCwQAQQAL",ea=class{};Ui(ea,"DepthMapRange",65536),Ui(ea,"MemoryPageSize",65536),Ui(ea,"BytesPerFloat",4),Ui(ea,"BytesPerInt",4);function FK(e){let i,s,a,o,c,d,g,b,j,_e,$,rt,st,ut,gt,wt;function yt(dr){let hs=new Float64Array(_e,d,16);for(let ds=0;ds<16;ds++)hs[ds]=dr[ds];let _s;if(a>1){i.exports.sortIndexes(o,c,j,d,g,b,rt.DepthMapRange,a);let ds=new Uint32Array(a);_s=ds.buffer,ds.set(new Uint32Array(_e,b,a))}else if(a===1){let ds=new Uint32Array(a);ds[0]=new Uint32Array(_e,o,s)[0],_s=ds.buffer}else _s=new ArrayBuffer(0);e.postMessage({sortDone:!0,indexesBuffer:_s},[_s])}function At(dr,hs,_s){let ds=new Float32Array(_e,c,s*3);a=0;let Nn=new Uint32Array(_e,o,s);for(let us=0;us<_s.length-1;us++){let hn=hs[us],Ft=dr[us].elements,Gr=hn.filter(un=>un.enabled&&un.mode==="Include").map(un=>un.type==="Box"?Pt(un):Nt(un)),gn=hn.filter(un=>un.enabled&&un.mode==="Exclude").map(un=>un.type==="Box"?Pt(un):Nt(un));for(let un=_s[us];un<_s[us+1];un++){let Zn=st[un*3],xu=st[un*3+1],ou=st[un*3+2];if((Gr.length===0||Tt(Zn,xu,ou,Gr))&&(gn.length===0||!Tt(Zn,xu,ou,gn))){let sp=1/(Ft[3]*Zn+Ft[7]*xu+Ft[11]*ou+Ft[15]);ds[a*3]=(Ft[0]*Zn+Ft[4]*xu+Ft[8]*ou+Ft[12])*sp,ds[a*3+1]=(Ft[1]*Zn+Ft[5]*xu+Ft[9]*ou+Ft[13])*sp,ds[a*3+2]=(Ft[2]*Zn+Ft[6]*xu+Ft[10]*ou+Ft[14])*sp,Nn[a]=un,a++}}}}function Ct(dr,hs){let _s=[],ds=hs.filter(hn=>hn.enabled&&hn.mode==="Include").map(hn=>hn.type==="Box"?Pt(hn):Nt(hn)),Nn=hs.filter(hn=>hn.enabled&&hn.mode==="Exclude").map(hn=>hn.type==="Box"?Pt(hn):Nt(hn)),us=dr.length;for(let hn=0;hn<us;hn+=3){let Ft=dr[hn],Gr=dr[hn+1],gn=dr[hn+2];(ds.length===0||Tt(Ft,Gr,gn,ds))&&(Nn.length===0||!Tt(Ft,Gr,gn,Nn))||_s.push(hn/3)}return console.log(_s),_s}function Tt(dr,hs,_s,ds,Nn){return ds[Nn==="Intersect"?"every":"some"](us=>{let hn=kt(dr,hs,_s,us.invRotationMatrix,us.cropCenter);return Array.isArray(us)?Lt(hn.x,hn.y,hn.z,us):Ht(hn.x,hn.y,hn.z,us)})}function kt(dr,hs,_s,ds,Nn){let us=dr-Nn[0],hn=hs-Nn[1],Ft=_s-Nn[2],Gr=1/(ds[3]*us+ds[7]*hn+ds[11]*Ft+ds[15]);return{x:(ds[0]*us+ds[4]*hn+ds[8]*Ft+ds[12])*Gr+Nn[0],y:(ds[1]*us+ds[5]*hn+ds[9]*Ft+ds[13])*Gr+Nn[1],z:(ds[2]*us+ds[6]*hn+ds[10]*Ft+ds[14])*Gr+Nn[2]}}function Pt(dr){let hs=dr.cropSize[0]/2,_s=dr.cropSize[1]/2,ds=dr.cropSize[2]/2,Nn=[dr.cropCenter[0]-hs,dr.cropCenter[1]-_s,dr.cropCenter[2]-ds,dr.cropCenter[0]+hs,dr.cropCenter[1]+_s,dr.cropCenter[2]+ds],us=It(dr.cropRotation);return Object.assign(Nn,{invRotationMatrix:us,cropCenter:dr.cropCenter})}function It(dr){let hs=[],_s=dr[0]*Math.PI/180,ds=dr[1]*Math.PI/180,Nn=dr[2]*Math.PI/180,us=Math.cos(_s),hn=Math.sin(_s),Ft=Math.cos(ds),Gr=Math.sin(ds),gn=Math.cos(Nn),un=Math.sin(Nn),Zn=us*gn,xu=us*un,ou=hn*gn,sp=hn*un;return hs[0]=Ft*gn,hs[1]=-Ft*un,hs[2]=Gr,hs[4]=xu+ou*Gr,hs[5]=Zn-sp*Gr,hs[6]=-hn*Ft,hs[8]=sp-Zn*Gr,hs[9]=ou+xu*Gr,hs[10]=us*Ft,hs[12]=0,hs[13]=0,hs[14]=0,hs[3]=0,hs[7]=0,hs[11]=0,hs[15]=1,hs}function Lt(dr,hs,_s,ds){return dr>=ds[0]&&dr<=ds[3]&&hs>=ds[1]&&hs<=ds[4]&&_s>=ds[2]&&_s<=ds[5]}function Nt(dr){let hs=2/dr.cropSize[0],_s=2/dr.cropSize[1],ds=2/dr.cropSize[2],Nn=It(dr.cropRotation);return{invRadiusX:hs,invRadiusY:_s,invRadiusZ:ds,cropCenter:dr.cropCenter,invRotationMatrix:Nn}}function Ht(dr,hs,_s,ds){let Nn=(dr-ds.cropCenter[0])*ds.invRadiusX,us=(hs-ds.cropCenter[1])*ds.invRadiusY,hn=(_s-ds.cropCenter[2])*ds.invRadiusZ;return Nn*Nn+us*us+hn*hn<=1}e.onmessage=dr=>{if(dr.data.getCroppedIndexes){let hs=new Uint32Array(Ct(new Float32Array(dr.data.positions),dr.data.crops)).buffer;e.postMessage({outOfBoundsIndexes:hs},[hs])}else if(dr.data.positions)$=dr.data.positions,st=new Float32Array($),gt=dr.data.meshMatrixWorlds,wt=dr.data.cropsArray,ut=dr.data.meshIndexIntervals,At(gt,wt,ut),e.postMessage({sortSetupComplete:!0});else if(dr.data.sort||dr.data.newMatrixWorlds||dr.data.newCropsArray)(dr.data.newMatrixWorlds||dr.data.newCropsArray)&&(wt=dr.data.newCropsArray||wt,gt=dr.data.newMatrixWorlds||gt,At(gt,wt,ut)),yt(dr.data.sort.view,dr.data.sort.cameraPosition);else if(dr.data.init){rt=dr.data.init.Constants,s=dr.data.init.splatCount;let hs=rt.BytesPerInt,_s=rt.BytesPerFloat*3,ds=new Uint8Array(dr.data.init.sorterWasmBytes),Nn=hs+_s,us=s*Nn,hn=s*rt.BytesPerInt*2+rt.DepthMapRange*rt.BytesPerInt*2,Ft=rt.MemoryPageSize*32,Gr=us+hn+Ft,gn=Math.floor(Gr/rt.MemoryPageSize)+1,un={module:{},env:{memory:new WebAssembly.Memory({initial:gn*2,maximum:gn*3,shared:!0})}};WebAssembly.compile(ds).then(Zn=>WebAssembly.instantiate(Zn,un)).then(Zn=>{i=Zn,o=0,c=s*hs,d=c+s*_s,j=d+16*rt.BytesPerFloat*2,g=j+s*rt.BytesPerInt,b=g+rt.DepthMapRange*rt.BytesPerInt,_e=un.env.memory.buffer,e.postMessage({sortSetupPhase1Complete:!0})})}}}function rB(e){let i=new Worker(URL.createObjectURL(new Blob(["(",FK.toString(),")(self)"],{type:"application/javascript"}))),s=atob(tB),a=new Uint8Array(s.length);for(let o=0;o<s.length;o++)a[o]=s.charCodeAt(o);return i.postMessage({init:{sorterWasmBytes:a.buffer,splatCount:e,Constants:{BytesPerFloat:ea.BytesPerFloat,BytesPerInt:ea.BytesPerInt,DepthMapRange:ea.DepthMapRange,MemoryPageSize:ea.MemoryPageSize}}}),i}var ob=function(){let e=new Float32Array(1),i=new Int32Array(e.buffer);return function(s){return e[0]=s,i[0]}}(),iB=function(e,i,s,a){return e+(i<<8)+(s<<16)+(a<<24)},ab=new z$1,ac=class extends sr{constructor(e,i,s,a,o=!1,c=1,d,g){super(s,a),this.splatCount=i,this.meshIndexIntervals=d,this.meshMatrixWorlds=g,this.splatBuffers=e,this.geometry=s,this.material=a,this.splatDataTextures=null,this.halfPrecisionCovariancesOnGPU=o,this.devicePixelRatio=c,this.resetLocalSplatDataAndTexturesFromSplatBuffer()}static buildMesh(e,i,s=!1,a=1,o,c){let d=ac.buildGeomtery(i),g=ac.buildMaterial(o);return new ac(e,i,d,g,s,a,o,c)}static buildMaterial(e){let i=`
            precision highp float;
            #include <common>

            attribute uint splatIndex;

            uniform highp sampler2D covariancesTexture;
            uniform highp usampler2D centersColorsTexture;
            uniform vec2 focal;
            uniform vec2 viewport;
            uniform vec2 basisViewport;
            uniform vec2 covariancesTextureSize;
            uniform vec2 centersColorsTextureSize;
						uniform highp sampler2D meshMatrixWorldsTexture;
						uniform uint meshIndexIntervals[257];
						uniform float orthoZoom;

            varying vec4 vColor;
            varying vec2 vUv;

            varying vec2 vPosition;

            const vec4 encodeNorm4 = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0);
            const uvec4 mask4 = uvec4(uint(0x000000FF), uint(0x0000FF00), uint(0x00FF0000), uint(0xFF000000));
            const uvec4 shift4 = uvec4(0, 8, 16, 24);
            vec4 uintToRGBAVec (uint u) {
               uvec4 urgba = mask4 & u;
               urgba = urgba >> shift4;
               vec4 rgba = vec4(urgba) * encodeNorm4;
               return rgba;
            }

            vec2 getDataUV(in int stride, in int offset, in vec2 dimensions) {
                vec2 samplerUV = vec2(0.0, 0.0);
                float d = float(splatIndex * uint(stride) + uint(offset)) / dimensions.x;
                samplerUV.y = float(floor(d)) / dimensions.y;
                samplerUV.x = fract(d);
                return samplerUV;
            }

            void main () {
                uvec4 sampledCenterColor = texture(centersColorsTexture, getDataUV(1, 0, centersColorsTextureSize));
                vec3 splatCenter = uintBitsToFloat(uvec3(sampledCenterColor.gba));
                vColor = uintToRGBAVec(sampledCenterColor.r);

                vPosition = position.xy * 2.0;

								uint meshIndex;
								for (int i = 1; i < 257; i++) {
									if (splatIndex < meshIndexIntervals[i]) {
										meshIndex = uint(i - 1);
										break;
									}
								}

								float strideMulmeshIndex = float(4u*meshIndex);
								float meshMatrixWorldsTextureLength = float(256*4);

								mat4 modelMat = mat4(
									texture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+0.0)/meshMatrixWorldsTextureLength, 0)),
									texture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+1.0)/meshMatrixWorldsTextureLength, 0)),
									texture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+2.0)/meshMatrixWorldsTextureLength, 0)),
									texture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+3.0)/meshMatrixWorldsTextureLength, 0))
								);
								mat4 modelViewMat = viewMatrix * modelMat;
								vec4 viewCenter = modelViewMat * vec4(splatCenter, 1.0); 
                vec4 clipCenter = projectionMatrix * viewCenter;

                vec2 sampledCovarianceA = texture(covariancesTexture, getDataUV(3, 0, covariancesTextureSize)).rg;
                vec2 sampledCovarianceB = texture(covariancesTexture, getDataUV(3, 1, covariancesTextureSize)).rg;
                vec2 sampledCovarianceC = texture(covariancesTexture, getDataUV(3, 2, covariancesTextureSize)).rg;

                vec3 cov3D_M11_M12_M13 = vec3(sampledCovarianceA.rg, sampledCovarianceB.r);
                vec3 cov3D_M22_M23_M33 = vec3(sampledCovarianceB.g, sampledCovarianceC.rg);

                // Compute the 2D covariance matrix from the upper-right portion of the 3D covariance matrix
                mat3 Vrk = mat3(
                    cov3D_M11_M12_M13.x, cov3D_M11_M12_M13.y, cov3D_M11_M12_M13.z,
                    cov3D_M11_M12_M13.y, cov3D_M22_M23_M33.x, cov3D_M22_M23_M33.y,
                    cov3D_M11_M12_M13.z, cov3D_M22_M23_M33.y, cov3D_M22_M23_M33.z
                );
                float s = 1.0 / (viewCenter.z * viewCenter.z);

                mat3 W = transpose(mat3(modelViewMat));
                mat3 T = orthoZoom > 0.0 ? W : W * mat3(
									focal.x / viewCenter.z, 0., -(focal.x * viewCenter.x) * s,
									0., focal.y / viewCenter.z, -(focal.y * viewCenter.y) * s,
									0., 0., 0.
								);
                mat3 cov2Dm = transpose(T) * Vrk * T;
                cov2Dm[0][0] += 0.3;
                cov2Dm[1][1] += 0.3;

                // We are interested in the upper-left 2x2 portion of the projected 3D covariance matrix because
                // we only care about the X and Y values. We want the X-diagonal, cov2Dm[0][0],
                // the Y-diagonal, cov2Dm[1][1], and the correlation between the two cov2Dm[0][1]. We don't
                // need cov2Dm[1][0] because it is a symetric matrix.
                vec3 cov2Dv = vec3(cov2Dm[0][0], cov2Dm[0][1], cov2Dm[1][1]);

                vec3 ndcCenter = clipCenter.xyz / clipCenter.w;

                // We now need to solve for the eigen-values and eigen vectors of the 2D covariance matrix
                // so that we can determine the 2D basis for the splat. This is done using the method described
                // here: https://people.math.harvard.edu/~knill/teaching/math21b2004/exhibits/2dmatrices/index.html
                //
                // This is a different approach than in the original work at INRIA. In that work they compute the
                // max extents of the 2D covariance matrix in screen space to form an axis aligned bounding rectangle
                // which forms the geometry that is actually rasterized. They then use the inverse 2D covariance
                // matrix (called 'conic') to determine fragment opacity.
                float a = cov2Dv.x;
                float d = cov2Dv.z;
                float b = cov2Dv.y;
                float D = a * d - b * b;
                float trace = a + d;
                float traceOver2 = 0.5 * trace;
                float term2 = sqrt(trace * trace / 4.0 - D);
                float eigenValue1 = traceOver2 + term2;
								float eigenValue2 = max(traceOver2 - term2, 0.00); // prevent negative eigen value

                const float maxSplatSize = 1024.0;
                vec2 eigenVector1 = normalize(vec2(b, eigenValue1 - a));
                // since the eigen vectors are orthogonal, we derive the second one from the first
                vec2 eigenVector2 = vec2(eigenVector1.y, -eigenVector1.x);
                vec2 basisVector1 = eigenVector1 * min(sqrt(2.0 * eigenValue1), maxSplatSize);
                vec2 basisVector2 = eigenVector2 * min(sqrt(2.0 * eigenValue2), maxSplatSize);

                vec2 ndcOffset = vec2(vPosition.x * basisVector1 + vPosition.y * basisVector2) * basisViewport;

								if (orthoZoom > 0.0) {
									ndcOffset *= orthoZoom;
								}

                gl_Position = vec4(ndcCenter.xy + ndcOffset, ndcCenter.z, 1.0);
            }`,s=`
            precision highp float;
            #include <common>

            uniform vec3 debugColor;

            varying vec4 vColor;
            varying vec2 vUv;

            varying vec2 vPosition;
						layout(location = 1) out vec4 gVelocity; 

            void main () {
                // compute the negative squared distance from the center of the splat to the
                // current fragment in the splat's local space.
                float A = -dot(vPosition, vPosition);
                if (A < -4.0) discard;
                vec3 color = vColor.rgb;
                A = exp(A) * vColor.a;
                gl_FragColor = vec4(color.rgb, A);
								gVelocity = vec4(0.0); // so it is ignored by TAA
            }`,a={covariancesTexture:{type:"t",value:null},centersColorsTexture:{type:"t",value:null},meshIndexIntervals:{value:e},meshMatrixWorldsTexture:{type:"t",value:null},focal:{type:"v2",value:new z$1},viewport:{type:"v2",value:new z$1},basisViewport:{type:"v2",value:new z$1},debugColor:{type:"v3",value:new We},covariancesTextureSize:{type:"v2",value:new z$1(1024,1024)},centersColorsTextureSize:{type:"v2",value:new z$1(1024,1024)},orthoZoom:{type:"f",value:-1}};return new lt({uniforms:a,vertexShader:i,fragmentShader:s,transparent:!0,alphaTest:1,blending:sl,depthTest:!0,depthWrite:!1,side:tn})}static buildGeomtery(e){let i=new Pe;i.setIndex([0,1,2,0,2,3]);let s=new Float32Array(4*3),a=new Xe(s,3);i.setAttribute("position",a),a.setXYZ(0,-1,-1,0),a.setXYZ(1,-1,1,0),a.setXYZ(2,1,1,0),a.setXYZ(3,1,-1,0),a.needsUpdate=!0;let o=new Np().copy(i),c=new Uint32Array(e),d=new Eo(c,1,!1);return d.setUsage(WM),o.setAttribute("splatIndex",d),o.instanceCount=e,o}resetLocalSplatDataAndTexturesFromSplatBuffer(){this.updateLocalSplatDataFromSplatBuffer(),this.allocateAndStoreLocalSplatDataInTextures()}updateLocalSplatDataFromSplatBuffer(){this.splatBuffers.forEach(a=>a.buildPreComputedBuffers()),this.covariances=new Float32Array(this.splatCount*6),this.colors=new Uint8Array(this.splatCount*4),this.centers=new Float32Array(this.splatCount*3);let e=0,i=0,s=0;for(let a of this.splatBuffers){let o=a.nsplats;this.colors.subarray(e,e+o*4).set(a.colorsA),e+=o*4,this.centers.subarray(i,i+o*3).set(a.decoded.xyz.denormDequant().data),i+=o*3,this.covariances.subarray(s,s+o*6).set(new Float32Array(a.precomputedCovarianceBufferData)),s+=o*6}}allocateAndStoreLocalSplatDataInTextures(){let e=this.splatCount,i=new z$1(4096,1024);for(;i.x*i.y*2<e*6;)i.y*=2;let s=new z$1(4096,1024);for(;s.x*s.y*4<e*4;)s.y*=2;let a,o;if(this.halfPrecisionCovariancesOnGPU){o=new Uint16Array(i.x*i.y*2);for(let _e=0;_e<this.covariances.length;_e++)o[_e]=oC.toHalfFloat(this.covariances[_e]);a=new xi(o,i.x,i.y,uh,va)}else o=new Float32Array(i.x*i.y*2),o.set(this.covariances),a=new xi(o,i.x,i.y,uh,Sr$1);a.needsUpdate=!0,this.material.uniforms.covariancesTexture.value=a,this.material.uniforms.covariancesTextureSize.value.copy(i);let c=new Uint32Array(s.x*s.y*4);for(let _e=0;_e<e;_e++){let $=_e*4,rt=_e*3,st=_e*4;c[st]=iB(this.colors[$],this.colors[$+1],this.colors[$+2],this.colors[$+3]),c[st+1]=ob(this.centers[rt]),c[st+2]=ob(this.centers[rt+1]),c[st+3]=ob(this.centers[rt+2])}let d=new xi(c,s.x,s.y,Aw,js);d.internalFormat="RGBA32UI",d.needsUpdate=!0,this.material.uniforms.centersColorsTexture.value=d,this.material.uniforms.centersColorsTextureSize.value.copy(s);let g=256*4,b=new Float32Array(256*16);for(let _e=0;_e<this.meshMatrixWorlds.length;_e++)b.set(this.meshMatrixWorlds[_e].elements,_e*16);let j=new xi(b,g,1,Qr,Sr$1);j.needsUpdate=!0,this.material.uniforms.meshMatrixWorldsTexture.value=j,this.material.uniformsNeedUpdate=!0,this.splatDataTextures={covariances:{data:o,texture:a,size:i},centerColors:{data:c,texture:d,size:s},meshMatrixWorlds:{data:b,texture:j}}}updateIndexes(e){let i=this.geometry;i.attributes.splatIndex.set(e),i.attributes.splatIndex.needsUpdate=!0,i.instanceCount=e.length}updateUniforms(e,i,s,a){this.splatCount>0&&(ab.set(e.x*this.devicePixelRatio,e.y*this.devicePixelRatio),this.material.uniforms.viewport.value.copy(ab),this.material.uniforms.basisViewport.value.set(2/ab.x,2/ab.y),this.material.uniforms.focal.value.set(i,s),this.material.uniforms.orthoZoom.value=a,this.material.uniformsNeedUpdate=!0)}getSplatDataTextures(){return this.splatDataTextures}getSplatCount(){return this.splatCount}getCenters(){return this.centers}getColors(){return this.colors}getCovariances(){return this.covariances}dispose(){this.geometry.dispose(),this.material.dispose(),this.splatDataTextures&&(this.splatDataTextures.covariances.texture.dispose(),this.splatDataTextures.centerColors.texture.dispose(),this.splatDataTextures.meshMatrixWorlds.texture.dispose())}},tg=class{constructor(e={}){Ui(this,"updateSplatMeshUniforms",function(){let i=new z$1;return function(){this.splatMesh!==null&&this.splatMesh.getSplatCount()>0&&(this.renderer.getSize(i),this.cameraFocalLengthX=this.camera.projectionMatrix.elements[0]*this.devicePixelRatio*i.x*.45,this.cameraFocalLengthY=this.camera.projectionMatrix.elements[5]*this.devicePixelRatio*i.y*.45,this.splatMesh.updateUniforms(i,this.cameraFocalLengthX,this.cameraFocalLengthY,this.camera.isPerspectiveCamera?-1:this.camera.zoom*this.devicePixelRatio))}}()),Ui(this,"updateView",function(){let i=new ce$1,s=[],a=new _(0,0,-1),o=new _(0,0,-1),c=new _,d=new _;return function(g=!1){let b=this.updateMatrixWorldsInWorkerIfNeeded(),j=this.cropsChanged();if(!g){o.set(0,0,-1).applyQuaternion(this.camera.quaternion);let $=!1,rt=!1;if(o.dot(a)<=.95&&($=!0),d.copy(this.camera.position).sub(c).length()>=1&&(rt=!0),!$&&!rt&&!b&&!j)return}c.copy(this.camera.position),a.copy(o),i.copy(this.camera.matrixWorld).invert(),i.premultiply(this.camera.perspCamera.projectionMatrix),s[0]=this.camera.position.x,s[1]=this.camera.position.y,s[2]=this.camera.position.z;let _e={sort:{view:i.elements,cameraPosition:s,splatRenderCount:this.splatRenderCount,splatSortCount:this.splatRenderCount},...b?{newMatrixWorlds:this.meshMatrixWorlds}:{},...j?{newCropsArray:this.cropsArray}:{}};this.sortRunning?this.queuedMessage=_e:(this.queuedMessage=null,this.sortRunning=!0,this.sortWorker.postMessage(_e))}}()),this.scene=e.scene,this.currentPage=null,this.renderer=e.renderer,this.devicePixelRatio=window.devicePixelRatio,this.sortWorker=null,this.splatRenderCount=0,this.splatSortCount=0,this.splatMesh=null,this.sortRunning=!1,this.splatRenderingInitialized=!1,this.meshMatrixWorlds=null,this.meshMatrixWorldsOld=null,this.cropsArray=null,this.splatEntries=null,this.queuedMessage=null}get camera(){return this.scene.activeCamera}reloadSplats(){this.splatRenderingInitialized=!1;let e=this.loadSplat();this.renderer.pipeline.opaquePass.splatViewer=e?this:null}loadSplat(e={}){this.activePage=this.scene.activePage,e.position&&(e.position=new _().fromArray(e.position)),e.orientation&&(e.orientation=new Qe().fromArray(e.orientation)),e.halfPrecisionCovariances=!!e.halfPrecisionCovariances;let i=[];if(this.splatEntries=i,this.activePage.traverseEntity(c=>{if(c.data.type==="Splat"){let d=c.visible;c.traverseAncestors(g=>{d&&(d=g.visible)}),d&&i.push(c)}}),this.splatMesh&&this.splatMesh.dispose(),i.length===0)return this.splatMesh=null,!1;this.meshMatrixWorlds=i.map(c=>c.matrixWorld),this.meshMatrixWorldsOld=i.map(c=>c.matrixWorld.clone()),this.cropsArray=i.map(c=>c.data.crops.map(d=>d.data));let s=i.map(c=>new oc(new Uint8Array(c.data.buffer).buffer)),a=0,o=[0];for(let c of s)a+=c.getSplatCount(),o.push(a);return this.setupSplatMesh(s,a,e.position,e.orientation,e.halfPrecisionCovariances,this.devicePixelRatio,o,this.meshMatrixWorlds),this.setupSortWorker(a),!0}updateMatrixWorldsInWorkerIfNeeded(){let e=this.splatDataTextures.meshMatrixWorlds.data;for(let i=0;i<this.meshMatrixWorlds.length;i++)e.set(this.meshMatrixWorlds[i].elements,i*16);return this.splatDataTextures.meshMatrixWorlds.texture.needsUpdate=!0,this.meshMatrixWorlds.every((i,s)=>i.equals(this.meshMatrixWorldsOld[s]))?!1:(this.meshMatrixWorldsOld=this.meshMatrixWorlds.map(i=>i.clone()),!0)}cropsChanged(){let e=!1;return this.splatEntries.forEach((i,s)=>{var a;i.data.crops.forEach((o,c)=>{this.cropsArray[s][c]===void 0?(e=!0,this.cropsArray[s][c]=o.data):Object.entries(o.data).forEach(([d,g])=>{var b;Array.isArray(g)&&g.some((j,_e)=>j!==this.cropsArray[s][c][d][_e])?(e=!0,this.cropsArray[s][c][d]=g):g!==((b=this.cropsArray[s][c])==null?void 0:b[d])&&(e=!0,this.cropsArray[s][c][d]=g)})}),i.data.crops.length!==((a=this.cropsArray[s])==null?void 0:a.length)&&(this.cropsArray[s].length=i.data.crops.length,e=!0)}),e}setupSplatMesh(e,i,s=new _,a=new Qe,o=!1,c=1,d,g){this.splatMesh=ac.buildMesh(e,i,o,c,d,g),this.splatMesh.position.copy(s),this.splatMesh.quaternion.copy(a),this.splatMesh.frustumCulled=!1,this.splatMesh.renderOrder=10,this.updateSplatMeshUniforms(),this.splatRenderCount=i}setupSortWorker(e){this.sortWorker=rB(e),this.sortWorker.onmessage=i=>{var s;i.data.sortDone?(this.sortRunning=!1,(s=this.splatMesh)==null||s.updateIndexes(new Uint32Array(i.data.indexesBuffer)),this.lastSortTime=i.data.sortTime,this.queuedMessage&&(this.sortWorker.postMessage(this.queuedMessage),this.queuedMessage=null)):i.data.sortCanceled?this.sortRunning=!1:i.data.sortSetupPhase1Complete?this.sortWorker.postMessage({positions:this.splatMesh.getCenters().buffer,meshMatrixWorlds:this.splatMesh.meshMatrixWorlds,meshIndexIntervals:this.splatMesh.meshIndexIntervals,cropsArray:this.cropsArray}):i.data.sortSetupComplete&&(this.splatDataTextures=this.splatMesh.getSplatDataTextures(),this.updateView(!0,!0),this.splatRenderingInitialized=!0)}}update(){this.splatRenderingInitialized!==!1&&(this.updateSplatMeshUniforms(),this.updateView())}getSplatMesh(){return this.splatMesh}},Vx=new ts;Vx.wireframe=!0;var nB=new _,$l=class extends Pi{constructor(e,i){super(),this.data=e,this.sharedAssets=i,this.enableHelpers=!1,this.wireframeState=!1,this.needsTransmissionDirty=!0,this.needsNormalDirty=!0,this._needsTransmission=!1,this._needsNormal=!1,this.geometryCacheChanged=!1,this.splatViewer=null,this.entityByUuid={},this.entityIdentityToEntity={},this.toExpandCloner=new Set,this.toUpdateCloner=new Set,this.pendingCommands=[],this.pathConstraints=new ib,this.invisibleObjects=new Ls("jflkdsafjasdifjaslk",{...a0.defaultData,visible:!1,name:"buildin invisible"}),this.needsRecomputeInstances=!1,this.init(e,i),this.matrixAutoUpdate=!1,this.errorPage=new mr("fdasfa",{...Ca.defaultData,name:""},{shared:i,scene:this})}markGeometryCacheDirty(){this.geometryCacheChanged=!0}markNeedsUpdateRendererDirty(){this.needsTransmissionDirty=!0,this.needsNormalDirty=!0}needsTransmission(){return this.needsTransmissionDirty&&(this._needsTransmission=EL(this),this.needsTransmissionDirty=!1),this._needsTransmission}needsNormal(){return this.needsNormalDirty&&(this._needsNormal=_L(this),this.needsNormalDirty=!1),this._needsNormal}registerInstanceAndSetUuid(e){let i=e.identity.join("-"),s=this.entityIdentityToEntity[i];s&&(e.uuid=s.uuid),this.entityIdentityToEntity[i]=e,this.entityByUuid[e.uuid]=e}markPenumbraSizeDirty(){for(let e of this.children)e instanceof mr&&(e.penumbraSizeArrayCache=null)}findInstance(e){return this.entityIdentityToEntity[e.join("-")]}get bgColor(){return this.activePage.bgColor}get postprocessing(){return this.activePage.data.postprocessing}getWithSortKey(e){let i=this.find(e);if(i===void 0)return;let s=[],a=i;for(;a!==this;){let o=a;a=a.parent;let c=a.children.indexOf(o);s.splice(0,0,c)}return{entity:i,sortKey:s}}getAllSorted(e){let i=[];for(let s of e){let a=this.getWithSortKey(s.id);a!==void 0&&i.push(a)}return i.sort((s,a)=>bv(s.sortKey,a.sortKey)),i.map(s=>s.entity)}nonExistOrDescendantOf(e,i){let s=this.find(e);if(s===void 0)return!0;for(;s;){if(s.uuid===i)return!0;s=s.parent}return!1}find(e){if(this.activePage&&this.activePage.personalCamera.parent){if(e==="f23858d0-4a3b-4bd8-8173-66ed0af7f6fb-personalCamera")return this.activePage.personalCamera;if(e===As)return this.activePage.personalCamera}if(e===""||e===void 0)return;let i=this.entityByUuid[e];return i===void 0?this.getObjectByProperty("uuid",e):i}find2D(e){for(let i of this.children)if(i instanceof mr&&i.uiScene){let s=i.uiScene.find(e);if(s)return s}}findScene2DfromObject2D(e){for(let i of this.children)if(i instanceof mr&&i.uiScene&&i.uiScene.find(e))return i.uiScene}find2DInUIObjects(e){let i;return this.traverseEntity(s=>{i===void 0&&s instanceof _r$1&&(i=s.uiCanvas.find(e))}),i}traverse2D(e){for(let i of this.children)i instanceof mr&&i.uiScene&&i.uiScene.traverse(e)}debugEnsureEntity(e){let i=this.find(e);if(i){if(Array.isArray(i.identity)&&this.findInstance(i.identity)===void 0){console.error("not found instance");debugger}}else{console.error("not found");debugger}}addPendingExpandCloner(e){this.toExpandCloner.add(e)}addPendingUpdateCloner(e){this.toUpdateCloner.add(e)}markToExpandCloner(e){this.toExpandCloner.add(e),e.traverseEntityAncestors(i=>{this.toExpandCloner.add(i)})}doPendingExpandCloner(){this.toExpandCloner.forEach(e=>{e.expandCloner(this)}),this.toExpandCloner.clear()}doPendingUpdateCloner(){this.toUpdateCloner.forEach(e=>{var i;(i=e.cloner)==null||i.update()}),this.toUpdateCloner.clear()}doPendingUpdates(){this.doPendingExpandCloner(),this.doPendingUpdateCloner(),this.applyPendingCommands()}addPendingCommand(e){this.pendingCommands.push(e)}applyPendingCommands(){this.pendingCommands.forEach(e=>e()),this.pendingCommands.length=0}updateByLibOp(e,i){e.path.length===1&&e.path[0]==="components"&&e.type===1&&this.createChildrenObjects([{...e.data.asset,id:e.id}],this.invisibleObjects,i)}updateTreeByOp(e,i){var s;if(e.path.length===0&&e.type===7){let a=e.parent===null?this:this.find(e.parent);if(a===void 0)throw new Error("unexpected");let o=this.createObject(e.id,e.data,e.children,a,e.localIndex,i);o.updateVisible(this),o.resetBBoxNeedsUpdate(),mn(o)&&Rn(o.parent)&&(o.invalidateUpstreamBooleanData(),o.parent.invalidateDownstreamBooleanData().recomputeBoolean()),this.markNeedsRecomputeInstancesForAncessors(a),this.markNeedsRecomputeInstancesForChildren(o),this.markToExpandCloner(o),this.markPenumbraSizeDirty(),o.updatePathSnapping()}else if(e.path.length===0&&e.type===8){let a=this.find(e.id);if(a===void 0)throw new Error("unexpected");this.markToExpandCloner(a),a.resetBBoxNeedsUpdate(),this.unregisterObject(a);let o=a.parent;this.markNeedsRecomputeInstancesForAncessors(o),this.markNeedsRecomputeInstancesForChildren(a),this.markPenumbraSizeDirty(),a.parent.remove(a),Rn(a.parent)&&(a.parent.invalidateUpstreamBooleanData(),a.parent.invalidateDownstreamBooleanData().recomputeBoolean()),mn(a)&&(a.freeBooleanPointer(),o instanceof qn&&o.invalidateDownstreamBooleanData().recomputeBoolean()),a instanceof ic&&a.detachShape(),this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(a),this.pathConstraints.removeDependencies(a.uuid),a.updatePathSnapping()}else if(e.path.length===0&&e.type===9){let a=this.find(e.id);if(a===void 0)throw new Error("unexpected");this.markNeedsRecomputeInstancesForChildren(a);let o=a.parent;this.markNeedsRecomputeInstancesForAncessors(o),(s=a.cloner)==null||s.resetOnMove(),this.markToExpandCloner(a);let c=e.parent===null?this:this.find(e.parent);if(c===void 0)throw new Error("unexpected");c.add(a),this.markNeedsRecomputeInstancesForAncessors(c),this.markToExpandCloner(a),a.invalidateClonerTransform(a),a.updateVisible(this),a.resetBBoxNeedsUpdate(),this.markPenumbraSizeDirty();let d=e.localIndex;c.children.splice(d,0,c.children.pop()),mn(a)&&(a.invalidateUpstreamBooleanData(),Rn(a.parent)?a.parent.invalidateDownstreamBooleanData().recomputeBoolean():o instanceof qn&&o.invalidateDownstreamBooleanData().recomputeBoolean()),a.updatePathSnapping()}this.markNeedsUpdateRendererDirty(),this.markGeometryCacheDirty()}get playPage(){return this.find(this.data.publish.playPage)??this.errorPage}updatePage(e){var i;this.activePage&&this.activePage.onDeactive(),this.activePage=this.errorPage;for(let s of this.children)s instanceof mr&&(s.visible=s.uuid===e,s.visible&&(this.activePage=s,this.activePage.onActive(this)));this.activePage!==((i=this.splatViewer)==null?void 0:i.activePage)&&this.reloadSplats()}updateEntityByOp(e,i,s,a){if(i.type===0){if(("overrides"in i.props||"component"in i.props)&&this.markNeedsRecomputeInstances(),"visible"in i.props&&this.markPenumbraSizeDirty(),i.path.includes("overrides")&&"states"in i.props){let{rest:c}=i.props;i={...i,props:c},this.markNeedsRecomputeInstances()}i.path[0]==="pathSnapping"&&i.props.pathId!==void 0&&this.pathConstraints.setConstraint(e,i.props.pathId)}let o=this.find(e);if(o)try{SL(o,i,s,{scene:this,shared:a}),o instanceof ur&&o.updateGeometryGroupsIfNeeded()}catch(c){console.error(c)}}updateEntity2DByOp(e,i,s,a,o,c=[]){e.updateEntityByOp(i,s,a,o),this.traverseEntity(d=>{(d instanceof _r$1||d instanceof mr)&&(c.includes(d.frameId??"")||d.frameId===i)&&d.updateEntity2DByOp(i,s,a,o)})}get activeCamera(){return this.activePage.activeCamera}switchActiveCamera(e){this.activePage.switchActiveCamera(e)}isInvisibleObjects(e){return e===this.invisibleObjects||e.hasAnccestor(this.invisibleObjects)}init(e,i){let s=Object.entries(i.data.lib.components).map((a,o)=>({data:a[1].asset.data,children:a[1].asset.children,id:a[0],fi:o}));this.invisibleObjects.updateState(this.invisibleObjects.data,{scene:this,shared:i}),this.add(this.invisibleObjects),this.createChildrenObjects(s,this.invisibleObjects,i),this.createChildrenObjects(e.objects,this,i),this.updatePage(e.publish.playPage),this.activePage.switchToPlayCamera(),this.expandInstances(i,!0),this.traverseEntity(a=>{a instanceof wr$1&&a.updateUp()}),this.doPendingExpandCloner(),this.applyPendingCommands()}markNeedsRecomputeInstances(){this.needsRecomputeInstances=!0}markNeedsRecomputeInstancesForChildren(e){e.traverseEntity(i=>{(i.data.type==="Component"||i.data.type==="Instance")&&this.markNeedsRecomputeInstances()})}markNeedsRecomputeInstancesForAncessors(e){vt.is(e)&&(e.data.type==="Component"&&this.markNeedsRecomputeInstances(),e.traverseAncestors(i=>{vt.is(i)&&i.data.type==="Component"&&this.markNeedsRecomputeInstances()}))}relativeizeInner(e,i,s,a,o,c,d){if(e){let g=a.find(e);g&&g!==a&&o.forInstancesRec(b=>{b.data=Tl(b.data,j=>{let _e=j.events.data(d.id),$=b.goUp(c);if($){let rt=[...xv($.identity),e].join("-"),st=this.entityIdentityToEntity[rt];if(st){let ut=st.uuid,gt=Nr$1.zoom(_e,i);gt[s]=ut}else console.warn("cannot find instance")}}).data})}}rewriteActions(e,i,s,a,o,c){e.forEach(d=>{d.data.type==="Transition"?this.relativeizeInner(d.data.object,[...i,d.id],"object",s,a,o,c):d.data.type==="Animation"&&this.relativeizeInner(d.data.object,[...i,d.id],"object",s,a,o,c)})}rewriteEventsBeforeGoToPlayMode(){this.traverseEntity(e=>{if(e instanceof uo&&typeof e.identity=="string"&&e.data.type==="Component")return e.traverseEntity((i,s)=>{i.data.events.forEach(a=>{if(a.data.type==="GameControl"){let o=!1;if(i.forInstancesRec(c=>{c.data=Tl(c.data,d=>{c.isInstanceRoot||(d.events.delete(a.id),o=!0)}).data}),o===!1)for(let c of ld.list)this.rewriteActions(a.data.gameActions[c],["gameActions",c],e,i,s,a)}else a.data.type==="Conditional"?(a.data.condition.type==="Distance"?(this.relativeizeInner(a.data.condition.fromObject,["condition"],"fromObject",e,i,s,a),this.relativeizeInner(a.data.condition.toObject,["condition"],"toObject",e,i,s,a)):a.data.condition.type==="State"?this.relativeizeInner(a.data.condition.object,["condition"],"object",e,i,s,a):a.data.condition.type==="Comparison"&&(a.data.condition.lOperand.type==="Property"&&this.relativeizeInner(a.data.condition.lOperand.value[0],["condition","lOperand","value"],0,e,i,s,a),a.data.condition.rOperand.type==="Property"&&this.relativeizeInner(a.data.condition.rOperand.value[0],["condition","rOperand","value"],0,e,i,s,a)),this.rewriteActions(a.data.inActions,["inActions"],e,i,s,a),this.rewriteActions(a.data.outActions,["outActions"],e,i,s,a)):"actions"in a.data&&this.rewriteActions(a.data.actions,["actions"],e,i,s,a)})}),!0})}expandInstances(e,i,s){let a=new Set;this.traverseEntity(o=>{if(o instanceof uo&&o.isInstanceRoot)return o.expandInstanceChildren({scene:this,shared:e,pendingDeletes:a}),i||o.resetBBoxNeedsUpdate(),s&&o.traverseEntity(c=>{s.addClip(c)}),!0});for(let o of a)this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(o),Qx(o)}recomputeInstances(e,i){this.needsRecomputeInstances&&(this.needsRecomputeInstances=!1,this.traverseEntity(s=>{s instanceof uo&&s.isInstanceRoot&&(s.component=void 0)}),this.expandInstances(e,!1,i))}disposeAndUnregisterEntityRecursivelyIfNotReregistered(e){e.traverseEntity(i=>{let s=typeof i.identity=="string"?i.identity:i.identity.join("-");this.entityIdentityToEntity[s]===i&&(delete this.entityByUuid[i.uuid],delete this.entityIdentityToEntity[s]),i.dispose()})}clearScene(){for(let e of this.children)vt.is(e)&&e.disposeRecursively();this.children.length=0}resetAfterClear(e,i){this.init(e,i)}raycast(e){return this.raycast1(e,!1)}raycast1(e,i){let s=[],a=o=>{for(let c of o.children){let d=c.cloner;if(vt.is(c)&&!c.raycastLock&&(c.visible||d!=null&&d.object.data.visible))if(i===!0&&c.isInstanceRoot){let g=[];if(e.intersectObject(c,!0,g),g.length){let b=g[0];b.object=c,b.point.applyMatrix4(b.object.matrixWorld);let j=c.matrixWorld.clone().invert();b.point.applyMatrix4(j),s.push(b)}}else(mn(c)||Wm(c)&&this.enableHelpers&&c.objectHelper.visible)&&(e.intersectObject(c,!1,s),eg(c,e,s)),a(c)}};return a(this.activePage),s}raycastWithClones(e){let i=[],s=a=>{for(let o of a.children){let c=o.cloner;vt.is(o)&&(o.visible||c!=null&&c.object.data.visible)&&((mn(o)||Wm(o)&&this.enableHelpers&&o.objectHelper.visible)&&(e.intersectObject(o,!1,i),eg(o,e,i,!0)),s(o))}};return s(this),i}forEachEntity(e){for(let i of this.children)vt.is(i)&&e(i)}traverseConcreteEntity(e){for(let i of this.children)vt.is(i)&&i.isConcreteEntity&&i.traverseEntity(e)}traverseEntity(e){for(let i of this.children)vt.is(i)&&i.traverseEntity(e)}updateFont(e,i){this.traverseEntity(s=>{if(s instanceof ur&&s.data.type==="Mesh"&&s.data.geometry.type==="TextGeometry"&&s.data.geometry.font===e){let a=s.geometry,o=s.data.geometry;a.updateFont(e,i).then(()=>{a.update(o);let c=s.invalidateDownstreamBooleanData();Rn(c)&&c.recomputeBoolean()})}})}traverseObject(e){for(let i of this.children)Td.is(i)&&i.traverseObject(e)}traverseVisibleEntity(e){for(let i of this.children)vt.is(i)&&i.visible&&i.traverseVisibleEntity(e)}dispose(){this.clearScene()}createChildrenObjects(e,i,s){let a=0;for(let o of e)this.createObject(o.id,o.data,o.children,i,a,s),a+=1}registerObjectCreatedInLegacy(e){this.entityByUuid[e.uuid]=e}unregisterObject(e){delete this.entityByUuid[e.uuid];for(let i of e.children)this.unregisterObject(i)}createObject(e,i,s,a,o,c){var b;let d={scene:this,shared:c},g=rb(e,i,d);return g&&(this.entityByUuid[e]=g,a.add(g),a.children.splice(o,0,a.children.pop()),s.length>0&&(g.isInstanceRoot?console.error("instance should not have children!"):this.createChildrenObjects(s,g,c)),g.updateState(i,d),g instanceof ur&&g.updateGeometryGroupsIfNeeded(),g.updateVisible(this),g.cloner&&this.toExpandCloner.add(g),(b=i.pathSnapping)!=null&&b.pathId&&this.pathConstraints.setConstraint(e,i.pathSnapping.pathId)),i.type==="Empty"&&i.animations&&g.traverseEntity(j=>{let _e=j.dataPatched;if(j instanceof ur&&_e.bones&&_e.boneInverses){let $=_e.bones.map(ut=>this.find(ut)),rt=_e.boneInverses.map(ut=>new ce$1().fromArray(ut)),st=new ul($,rt);j.bind(st,j.bindMatrix)}else j.matrixAutoUpdate=!0}),g}getCenter(e){let i=[];for(let a=0,o=e.length;a<o;++a){let{id:c,recursive:d}=e[a],g=this.find(c),b=d?g.recursiveBBox:g.singleBBox;i.push(...b.vertices)}let s=new Wt;return s.setFromPoints(i),s.getCenter(nB),nB}copyMatrixWorld(e,i){if(e===null){i.identity();return}let s=this.find(e);s?i.copy(s.matrixWorld):i.identity()}copyParentMatrixWorld(e,i){var a;if(e===null){i.identity();return}let s=(a=this.find(e))==null?void 0:a.parent;s?i.copy(s.matrixWorld):i.identity()}traverseMaterial(e){this.traverseEntity(i=>{if(i instanceof pr)if(Array.isArray(i.material))for(let s=0;s<i.material.length;s++)i.material[s]instanceof Wn&&e(i.material[s]);else i.material instanceof Wn&&e(i.material)})}updateViewPlaneSize(e,i,s=!1){this.traverseConcreteEntity(a=>{a instanceof wr$1&&a.setViewplaneSize(e,i,s)})}initializeSplatViewer(e){this.splatViewer=new tg({scene:this,renderer:e}),this.reloadSplats()}reloadSplats(){var e;(e=this.splatViewer)==null||e.reloadSplats()}},rg=(e,i)=>{let s=i.x-e.x,a=i.y-e.y;return Math.sqrt(s*s+a*a)},sB=(e,i)=>{let s=i.x-e.x,a=i.y-e.y;return kK(Math.atan2(a,s))},oB=(e,i,s)=>{let a={x:0,y:0};return s=lb(s),a.x=e.x-i*Math.cos(s),a.y=e.y-i*Math.sin(s),a},lb=e=>e*(Math.PI/180),kK=e=>e*(180/Math.PI),aB=e=>isNaN(e.buttons)?e.pressure!==0:e.buttons!==0,aE=new Map,lE=e=>{aE.has(e)&&clearTimeout(aE.get(e)),aE.set(e,setTimeout(e,100))},jf=(e,i,s)=>{let a=i.split(/[ ,]+/g),o;for(let c=0;c<a.length;c+=1)o=a[c],e.addEventListener?e.addEventListener(o,s,!1):e.attachEvent&&e.attachEvent(o,s)},cE=(e,i,s)=>{let a=i.split(/[ ,]+/g),o;for(let c=0;c<a.length;c+=1)o=a[c],e.removeEventListener?e.removeEventListener(o,s):e.detachEvent&&e.detachEvent(o,s)},cb=e=>(e.preventDefault(),e.type.match(/^touch/)?e.changedTouches:e),uE=()=>{if(typeof window>"u")return;let e=window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,i=window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;return{x:e,y:i}},ub=(e,i)=>{i.top||i.right||i.bottom||i.left?(e.style.top=i.top,e.style.right=i.right,e.style.bottom=i.bottom,e.style.left=i.left):(e.style.left=i.x+"px",e.style.top=i.y+"px")},hb=(e,i,s)=>{let a=cB(e);for(let o in a)if(a.hasOwnProperty(o))if(typeof i=="string")a[o]=i+" "+s;else{let c="";for(let d=0,g=i.length;d<g;d+=1)c+=i[d]+" "+s+", ";a[o]=c.slice(0,-2)}return a},lB=(e,i)=>{let s=cB(e);for(let a in s)s.hasOwnProperty(a)&&(s[a]=i);return s},cB=e=>{let i={};return i[e]="",["webkit","Moz","o"].forEach(function(s){i[s+e.charAt(0).toUpperCase()+e.slice(1)]=""}),i},db=(e,i)=>{for(let s in i)i.hasOwnProperty(s)&&(e[s]=i[s]);return e},uB=(e,i)=>{let s={};for(let a in e)e.hasOwnProperty(a)&&i.hasOwnProperty(a)?s[a]=i[a]:e.hasOwnProperty(a)&&(s[a]=e[a]);return s},ig=(e,i)=>{if(e.length)for(let s=0,a=e.length;s<a;s+=1)i(e[s]);else i(e)},hB=(e,i,s)=>({x:Math.min(Math.max(e.x,i.x-s),i.x+s),y:Math.min(Math.max(e.y,i.y-s),i.y+s)});typeof window<"u"&&(dB="ontouchstart"in window,fB=!!window.PointerEvent,pB=!!window.MSPointerEvent);var dB,fB,pB,ng={touch:{start:"touchstart",move:"touchmove",end:"touchend, touchcancel"},mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup, pointercancel"},MSPointer:{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}},Hf,sg={};fB?Hf=ng.pointer:pB?Hf=ng.MSPointer:dB?(Hf=ng.touch,sg=ng.mouse):Hf=ng.mouse;function pu(){}pu.prototype.on=function(e,i){var s=this,a=e.split(/[ ,]+/g),o;s._handlers_=s._handlers_||{};for(var c=0;c<a.length;c+=1)o=a[c],s._handlers_[o]=s._handlers_[o]||[],s._handlers_[o].push(i);return s};pu.prototype.off=function(e,i){var s=this;return s._handlers_=s._handlers_||{},e===void 0?s._handlers_={}:i===void 0?s._handlers_[e]=null:s._handlers_[e]&&s._handlers_[e].indexOf(i)>=0&&s._handlers_[e].splice(s._handlers_[e].indexOf(i),1),s};pu.prototype.trigger=function(e,i){var s=this,a=e.split(/[ ,]+/g),o;s._handlers_=s._handlers_||{};for(var c=0;c<a.length;c+=1)o=a[c],s._handlers_[o]&&s._handlers_[o].length&&s._handlers_[o].forEach(function(d){d.call(s,{type:o,target:s},i)})};pu.prototype.config=function(e){var i=this;i.options=i.defaults||{},e&&(i.options=uB(i.options,e))};pu.prototype.bindEvt=function(e,i){var s=this;return s._domHandlers_=s._domHandlers_||{},s._domHandlers_[i]=function(){typeof s["on"+i]=="function"?s["on"+i].apply(s,arguments):console.warn('[WARNING] : Missing "on'+i+'" handler.')},jf(e,Hf[i],s._domHandlers_[i]),sg[i]&&jf(e,sg[i],s._domHandlers_[i]),s};pu.prototype.unbindEvt=function(e,i){var s=this;return s._domHandlers_=s._domHandlers_||{},cE(e,Hf[i],s._domHandlers_[i]),sg[i]&&cE(e,sg[i],s._domHandlers_[i]),delete s._domHandlers_[i],this};var Wf=pu;function Fi(e,i){return this.identifier=i.identifier,this.position=i.position,this.frontPosition=i.frontPosition,this.collection=e,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,mode:"dynamic",zone:document.body,lockX:!1,lockY:!1,shape:"circle"},this.config(i),this.options.mode==="dynamic"&&(this.options.restOpacity=0),this.id=Fi.id,Fi.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),setPosition:this.setPosition.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}Fi.prototype=new Wf;Fi.constructor=Fi;Fi.id=0;Fi.prototype.buildEl=function(e){return this.ui={},this.options.dataOnly?this:(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front),this)};Fi.prototype.stylize=function(){if(this.options.dataOnly)return this;var e=this.options.fadeTime+"ms",i=lB("borderRadius","50%"),s=hb("transition","opacity",e),a={};return a.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},a.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:"rgba(255, 255, 255, .4)",border:"solid 2px rgba(0, 0, 0, .1)"},a.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:"rgba(255, 255, 255, .8)",border:"solid 2px rgba(0, 0, 0, .1)"},db(a.el,s),this.options.shape==="circle"&&db(a.back,i),db(a.front,i),this.applyStyles(a),this};Fi.prototype.applyStyles=function(e){for(var i in this.ui)if(this.ui.hasOwnProperty(i))for(var s in e[i])this.ui[i].style[s]=e[i][s];return this};Fi.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)?this:(this.options.zone.appendChild(this.ui.el),this)};Fi.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)?this:(this.options.zone.removeChild(this.ui.el),this)};Fi.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()};Fi.prototype.show=function(e){var i=this;return i.options.dataOnly||(clearTimeout(i.removeTimeout),clearTimeout(i.showTimeout),clearTimeout(i.restTimeout),i.addToDom(),i.restCallback(),setTimeout(function(){i.ui.el.style.opacity=1},0),i.showTimeout=setTimeout(function(){i.trigger("shown",i.instance),typeof e=="function"&&e.call(this)},i.options.fadeTime)),i};Fi.prototype.hide=function(e){var i=this;if(i.options.dataOnly)return i;if(i.ui.el.style.opacity=i.options.restOpacity,clearTimeout(i.removeTimeout),clearTimeout(i.showTimeout),clearTimeout(i.restTimeout),i.removeTimeout=setTimeout(function(){var s=i.options.mode==="dynamic"?"none":"block";i.ui.el.style.display=s,typeof e=="function"&&e.call(i),i.trigger("hidden",i.instance)},i.options.fadeTime),i.options.restJoystick){let s=i.options.restJoystick,a={};a.x=s===!0||s.x!==!1?0:i.instance.frontPosition.x,a.y=s===!0||s.y!==!1?0:i.instance.frontPosition.y,i.setPosition(e,a)}return i};Fi.prototype.setPosition=function(e,i){var s=this;s.frontPosition={x:i.x,y:i.y};var a=s.options.fadeTime+"ms",o={};o.front=hb("transition",["top","left"],a);var c={front:{}};c.front={left:s.frontPosition.x+"px",top:s.frontPosition.y+"px"},s.applyStyles(o),s.applyStyles(c),s.restTimeout=setTimeout(function(){typeof e=="function"&&e.call(s),s.restCallback()},s.options.fadeTime)};Fi.prototype.restCallback=function(){var e=this,i={};i.front=hb("transition","none",""),e.applyStyles(i),e.trigger("rested",e.instance)};Fi.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}};Fi.prototype.computeDirection=function(e){var i=e.angle.radian,s=Math.PI/4,a=Math.PI/2,o,c,d;if(i>s&&i<s*3&&!e.lockX?o="up":i>-s&&i<=s&&!e.lockY?o="left":i>-s*3&&i<=-s&&!e.lockX?o="down":e.lockY||(o="right"),e.lockY||(i>-a&&i<a?c="left":c="right"),e.lockX||(i>0?d="up":d="down"),e.force>this.options.threshold){var g={},b;for(b in this.direction)this.direction.hasOwnProperty(b)&&(g[b]=this.direction[b]);var j={};this.direction={x:c,y:d,angle:o},e.direction=this.direction;for(b in g)g[b]===this.direction[b]&&(j[b]=!0);if(j.x&&j.y&&j.angle)return e;(!j.x||!j.y)&&this.trigger("plain",e),j.x||this.trigger("plain:"+c,e),j.y||this.trigger("plain:"+d,e),j.angle||this.trigger("dir dir:"+o,e)}else this.resetDirection();return e};var mB=Fi;function ci(e,i){var s=this;s.nipples=[],s.idles=[],s.actives=[],s.ids=[],s.pressureIntervals={},s.manager=e,s.id=ci.id,ci.id+=1,s.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,lockX:!1,lockY:!1,shape:"circle",dynamicPage:!1,follow:!1},s.config(i),(s.options.mode==="static"||s.options.mode==="semi")&&(s.options.multitouch=!1),s.options.multitouch||(s.options.maxNumberOfNipples=1);let a=getComputedStyle(s.options.zone.parentElement);return a&&a.display==="flex"&&(s.parentIsFlex=!0),s.updateBox(),s.prepareNipples(),s.bindings(),s.begin(),s.nipples}ci.prototype=new Wf;ci.constructor=ci;ci.id=0;ci.prototype.prepareNipples=function(){var e=this,i=e.nipples;i.on=e.on.bind(e),i.off=e.off.bind(e),i.options=e.options,i.destroy=e.destroy.bind(e),i.ids=e.ids,i.id=e.id,i.processOnMove=e.processOnMove.bind(e),i.processOnEnd=e.processOnEnd.bind(e),i.get=function(s){if(s===void 0)return i[0];for(var a=0,o=i.length;a<o;a+=1)if(i[a].identifier===s)return i[a];return!1}};ci.prototype.bindings=function(){var e=this;e.bindEvt(e.options.zone,"start"),e.options.zone.style.touchAction="none",e.options.zone.style.msTouchAction="none"};ci.prototype.begin=function(){var e=this,i=e.options;if(i.mode==="static"){var s=e.createNipple(i.position,e.manager.getIdentifier());s.add(),e.idles.push(s)}};ci.prototype.createNipple=function(e,i){var s=this,a=s.manager.scroll,o={},c=s.options,d={x:s.parentIsFlex?a.x:a.x+s.box.left,y:s.parentIsFlex?a.y:a.y+s.box.top};if(e.x&&e.y)o={x:e.x-d.x,y:e.y-d.y};else if(e.top||e.right||e.bottom||e.left){var g=document.createElement("DIV");g.style.display="hidden",g.style.top=e.top,g.style.right=e.right,g.style.bottom=e.bottom,g.style.left=e.left,g.style.position="absolute",c.zone.appendChild(g);var b=g.getBoundingClientRect();c.zone.removeChild(g),o=e,e={x:b.left+a.x,y:b.top+a.y}}var j=new mB(s,{color:c.color,size:c.size,threshold:c.threshold,fadeTime:c.fadeTime,dataOnly:c.dataOnly,restJoystick:c.restJoystick,restOpacity:c.restOpacity,mode:c.mode,identifier:i,position:e,zone:c.zone,frontPosition:{x:0,y:0},shape:c.shape});return c.dataOnly||(ub(j.ui.el,o),ub(j.ui.front,j.frontPosition)),s.nipples.push(j),s.trigger("added "+j.identifier+":added",j),s.manager.trigger("added "+j.identifier+":added",j),s.bindNipple(j),j};ci.prototype.updateBox=function(){var e=this;e.box=e.options.zone.getBoundingClientRect()};ci.prototype.bindNipple=function(e){var i=this,s,a=function(o,c){s=o.type+" "+c.id+":"+o.type,i.trigger(s,c)};e.on("destroyed",i.onDestroyed.bind(i)),e.on("shown hidden rested dir plain",a),e.on("dir:up dir:right dir:down dir:left",a),e.on("plain:up plain:right plain:down plain:left",a)};ci.prototype.pressureFn=function(e,i,s){var a=this,o=0;clearInterval(a.pressureIntervals[s]),a.pressureIntervals[s]=setInterval((function(){var c=e.force||e.pressure||e.webkitForce||0;c!==o&&(i.trigger("pressure",c),a.trigger("pressure "+i.identifier+":pressure",c),o=c)}).bind(a),100)};ci.prototype.onstart=function(e){var i=this,s=i.options,a=e;e=cb(e),i.updateBox();var o=function(c){i.actives.length<s.maxNumberOfNipples?i.processOnStart(c):a.type.match(/^touch/)&&(Object.keys(i.manager.ids).forEach(function(d){if(Object.values(a.touches).findIndex(function(b){return b.identifier===d})<0){var g=[e[0]];g.identifier=d,i.processOnEnd(g)}}),i.actives.length<s.maxNumberOfNipples&&i.processOnStart(c))};return ig(e,o),i.manager.bindDocument(),!1};ci.prototype.processOnStart=function(e){var i=this,s=i.options,a,o=i.manager.getIdentifier(e),c=e.force||e.pressure||e.webkitForce||0,d={x:e.pageX,y:e.pageY},g=i.getOrCreate(o,d);g.identifier!==o&&i.manager.removeIdentifier(g.identifier),g.identifier=o;var b=function(_e){_e.trigger("start",_e),i.trigger("start "+_e.id+":start",_e),_e.show(),c>0&&i.pressureFn(e,_e,_e.identifier),i.processOnMove(e)};if((a=i.idles.indexOf(g))>=0&&i.idles.splice(a,1),i.actives.push(g),i.ids.push(g.identifier),s.mode!=="semi")b(g);else{var j=rg(d,g.position);if(j<=s.catchDistance)b(g);else{g.destroy(),i.processOnStart(e);return}}return g};ci.prototype.getOrCreate=function(e,i){var s=this,a=s.options,o;return/(semi|static)/.test(a.mode)?(o=s.idles[0],o?(s.idles.splice(0,1),o):a.mode==="semi"?s.createNipple(i,e):(console.warn("Coudln't find the needed nipple."),!1)):(o=s.createNipple(i,e),o)};ci.prototype.processOnMove=function(e){var i=this,s=i.options,a=i.manager.getIdentifier(e),o=i.nipples.get(a),c=i.manager.scroll;if(!aB(e)){this.processOnEnd(e);return}if(!o){console.error("Found zombie joystick with ID "+a),i.manager.removeIdentifier(a);return}if(s.dynamicPage){var d=o.el.getBoundingClientRect();o.position={x:c.x+d.left,y:c.y+d.top}}o.identifier=a;var g=o.options.size/2,b={x:e.pageX,y:e.pageY};s.lockX&&(b.y=o.position.y),s.lockY&&(b.x=o.position.x);var j=rg(b,o.position),_e=sB(b,o.position),$=lb(_e),rt=j/g,st={distance:j,position:b},ut,gt;if(o.options.shape==="circle"?(ut=Math.min(j,g),gt=oB(o.position,ut,_e)):(gt=hB(b,o.position,g),ut=rg(gt,o.position)),s.follow){if(j>g){let Ct=b.x-gt.x,Tt=b.y-gt.y;o.position.x+=Ct,o.position.y+=Tt,o.el.style.top=o.position.y-(i.box.top+c.y)+"px",o.el.style.left=o.position.x-(i.box.left+c.x)+"px",j=rg(b,o.position)}}else b=gt,j=ut;var wt=b.x-o.position.x,yt=b.y-o.position.y;o.frontPosition={x:wt,y:yt},s.dataOnly||ub(o.ui.front,o.frontPosition);var At={identifier:o.identifier,position:b,force:rt,pressure:e.force||e.pressure||e.webkitForce||0,distance:j,angle:{radian:$,degree:_e},vector:{x:wt/g,y:-yt/g},raw:st,instance:o,lockX:s.lockX,lockY:s.lockY};At=o.computeDirection(At),At.angle={radian:lb(180-_e),degree:180-_e},o.trigger("move",At),i.trigger("move "+o.id+":move",At)};ci.prototype.processOnEnd=function(e){var i=this,s=i.options,a=i.manager.getIdentifier(e),o=i.nipples.get(a),c=i.manager.removeIdentifier(o.identifier);!o||(s.dataOnly||o.hide(function(){s.mode==="dynamic"&&(o.trigger("removed",o),i.trigger("removed "+o.id+":removed",o),i.manager.trigger("removed "+o.id+":removed",o),o.destroy())}),clearInterval(i.pressureIntervals[o.identifier]),o.resetDirection(),o.trigger("end",o),i.trigger("end "+o.id+":end",o),i.ids.indexOf(o.identifier)>=0&&i.ids.splice(i.ids.indexOf(o.identifier),1),i.actives.indexOf(o)>=0&&i.actives.splice(i.actives.indexOf(o),1),/(semi|static)/.test(s.mode)?i.idles.push(o):i.nipples.indexOf(o)>=0&&i.nipples.splice(i.nipples.indexOf(o),1),i.manager.unbindDocument(),/(semi|static)/.test(s.mode)&&(i.manager.ids[c.id]=c.identifier))};ci.prototype.onDestroyed=function(e,i){var s=this;s.nipples.indexOf(i)>=0&&s.nipples.splice(s.nipples.indexOf(i),1),s.actives.indexOf(i)>=0&&s.actives.splice(s.actives.indexOf(i),1),s.idles.indexOf(i)>=0&&s.idles.splice(s.idles.indexOf(i),1),s.ids.indexOf(i.identifier)>=0&&s.ids.splice(s.ids.indexOf(i.identifier),1),s.manager.removeIdentifier(i.identifier),s.manager.unbindDocument()};ci.prototype.destroy=function(){var e=this;e.unbindEvt(e.options.zone,"start"),e.nipples.forEach(function(s){s.destroy()});for(var i in e.pressureIntervals)e.pressureIntervals.hasOwnProperty(i)&&clearInterval(e.pressureIntervals[i]);e.trigger("destroyed",e.nipples),e.manager.unbindDocument(),e.off()};var gB=ci;function $i(e){var i=this;i.ids={},i.index=0,i.collections=[],i.scroll=uE(),i.config(e),i.prepareCollections();var s=function(){var o;i.collections.forEach(function(c){c.forEach(function(d){o=d.el.getBoundingClientRect(),d.position={x:i.scroll.x+o.left,y:i.scroll.y+o.top}})})};if(typeof window>"u")return i.collections;jf(window,"resize",function(){lE(s)});var a=function(){i.scroll=uE()};return jf(window,"scroll",function(){lE(a)}),i.collections}$i.prototype=new Wf;$i.constructor=$i;$i.prototype.prepareCollections=function(){var e=this;e.collections.create=e.create.bind(e),e.collections.on=e.on.bind(e),e.collections.off=e.off.bind(e),e.collections.destroy=e.destroy.bind(e),e.collections.get=function(i){var s;return e.collections.every(function(a){return s=a.get(i),!s}),s}};$i.prototype.create=function(e){return this.createCollection(e)};$i.prototype.createCollection=function(e){var i=this,s=new gB(i,e);return i.bindCollection(s),i.collections.push(s),s};$i.prototype.bindCollection=function(e){var i=this,s,a=function(o,c){s=o.type+" "+c.id+":"+o.type,i.trigger(s,c)};e.on("destroyed",i.onDestroyed.bind(i)),e.on("shown hidden rested dir plain",a),e.on("dir:up dir:right dir:down dir:left",a),e.on("plain:up plain:right plain:down plain:left",a)};$i.prototype.bindDocument=function(){var e=this;e.binded||(e.bindEvt(document,"move").bindEvt(document,"end"),e.binded=!0)};$i.prototype.unbindDocument=function(e){var i=this;(!Object.keys(i.ids).length||e===!0)&&(i.unbindEvt(document,"move").unbindEvt(document,"end"),i.binded=!1)};$i.prototype.getIdentifier=function(e){var i;return e?(i=e.identifier===void 0?e.pointerId:e.identifier,i===void 0&&(i=this.latest||0)):i=this.index,this.ids[i]===void 0&&(this.ids[i]=this.index,this.index+=1),this.latest=i,this.ids[i]};$i.prototype.removeIdentifier=function(e){var i={};for(var s in this.ids)if(this.ids[s]===e){i.id=s,i.identifier=this.ids[s],delete this.ids[s];break}return i};$i.prototype.onmove=function(e){var i=this;return i.onAny("move",e),!1};$i.prototype.onend=function(e){var i=this;return i.onAny("end",e),!1};$i.prototype.oncancel=function(e){var i=this;return i.onAny("end",e),!1};$i.prototype.onAny=function(e,i){var s=this,a,o="processOn"+e.charAt(0).toUpperCase()+e.slice(1);i=cb(i);var c=function(g,b,j){j.ids.indexOf(b)>=0&&(j[o](g),g._found_=!0)},d=function(g){a=s.getIdentifier(g),ig(s.collections,c.bind(null,g,a)),g._found_||s.removeIdentifier(a)};return ig(i,d),!1};$i.prototype.destroy=function(){var e=this;e.unbindDocument(!0),e.ids={},e.index=0,e.collections.forEach(function(i){i.destroy()}),e.off()};$i.prototype.onDestroyed=function(e,i){var s=this;if(s.collections.indexOf(i)<0)return!1;s.collections.splice(s.collections.indexOf(i),1)};var yB=$i,vB=new yB,xB={create:function(e){return vB.create(e)},factory:vB},bB=new Map,og=new Map,ta=class{constructor(e,i,s,a){this.data=i;let{audio:o,volume:c,delay:d,loop:g}=i;if(!o)throw new Error("Missing property");let b=typeof o=="string"?a.getAudio(o).src:o.data;this.audioPlayer=new ja({src:b,volume:c,delay:d,loop:g}),og.has(s.uuid)?og.get(s.uuid).push(this):og.set(s.uuid,[this]),bB.set(e,this)}playByToggle(){this.data.toggle==="stop"?this.audioPlayer.status==="playing"?this.audioPlayer.stop():(this.audioPlayer.stop(),this.audioPlayer.play()):this.data.toggle==="pause"?this.audioPlayer.status==="playing"?this.audioPlayer.pause():this.audioPlayer.play():(this.audioPlayer.stop(),this.audioPlayer.play())}dispose(){this.audioPlayer.stop()}},qf=class{constructor(e){this.data=e}dispatch(){this.data.playAudio?this.pauseAudio(this.data.playAudio):this.data.object?this.pauseAllAudiosFromObject(this.data.object):this.pauseAllAudios()}pauseAudio(e){let i=bB.get(e);!i||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{i.audioPlayer[this.data.interaction](),this.disposeDelay()},this.data.delay)):i.audioPlayer[this.data.interaction]())}pauseAllAudiosFromObject(e){let i=og.get(e);!(i!=null&&i.length)||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{i.forEach(s=>s.audioPlayer[this.data.interaction]()),this.disposeDelay()},this.data.delay)):i.forEach(s=>s.audioPlayer[this.data.interaction]()))}pauseAllAudios(){let e=[...og.values()];!e.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{e.forEach(i=>{i.forEach(s=>{s.audioPlayer[this.data.interaction]()})}),this.disposeDelay()},this.data.delay)):e.forEach(i=>{i.forEach(s=>{s.audioPlayer[this.data.interaction]()})}))}disposeDelay(){clearTimeout(this.timeoutId),delete this.timeoutId}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},ag=class{constructor(e,i,s,a,o){if(this.data=i,this.shared=a,this.condition=o,i.interaction==="play")this.interaction=new ta(e,i,s,a);else if(i.interaction==="pause"||i.interaction==="stop")this.interaction=new qf(i);else throw new Error("Missing property")}dispatchBasic(){if(Ut(this.shared,this.condition)===!1)return!1;this.interaction instanceof ta?this.interaction.playByToggle():this.interaction.dispatch()}dispatchConditional(){if(Ut(this.shared,this.condition)===!1)return!1;this.interaction instanceof ta?this.interaction.audioPlayer.play():this.interaction.dispatch()}dispatchGameControl(e){if(Ut(this.shared,this.condition)===!1)return!1;this.interaction instanceof ta&&(e==="start"?this.interaction.audioPlayer.play():this.interaction.audioPlayer.stop())}dispose(){this.interaction.dispose()}},lg=class{constructor(e,i,s,a){this.data=e,this.page=i,this.shared=s,this.condition=a,this.delay=0,this.emission=e.emission,e.delay!==void 0&&(this.delay=e.delay),this.particleSystem=this.page.scene.find(this.data.emitterObjectId)}toggleEmitting(){this.particleSystem.started&&!this.particleSystem.stopped?this.stop():this.start(this.delay)}toggleFroze(){this.particleSystem.started&&!this.particleSystem.isFrozen?this.freeze():this.unFreeze()}start(e=0){if(e){this.delayTimerId=window.setTimeout(()=>{this.start(0),this.clearDelay()},this.delay);return}this.particleSystem.start()}stop(){this.particleSystem.stop(),this.clearDelay()}freeze(){this.particleSystem.froze(),this.clearDelay()}unFreeze(){this.particleSystem.unFroze(),this.clearDelay()}reset(){this.particleSystem.reset(),this.clearDelay()}reverseFromCurrent(){switch(this.emission){case"emitToggle":this.toggleEmitting();break;case"pauseToggle":this.toggleFroze();break}}dispatchBasic(){if(Ut(this.shared,this.condition)===!1||!this.particleSystem)return!1;switch(this.emission){case"start":this.start(this.delay);break;case"emitToggle":this.toggleEmitting();break;case"pause":this.freeze();break;case"pauseToggle":this.toggleFroze();break;case"stop":this.stop();break;case"reset":this.reset();break}}dispatchConditional(){if(Ut(this.shared,this.condition)===!1||!this.particleSystem)return!1;switch(this.emission){case"start":this.particleSystem.start();break;case"stop":this.particleSystem.stop();break;case"reset":this.particleSystem.reset();break}}dispatchGameControl(e){if(Ut(this.shared,this.condition)===!1||!this.particleSystem)return!1;e==="start"?this.particleSystem.start():this.particleSystem.stop()}dispose(){!this.particleSystem||(this.particleSystem.reset(),this.clearDelay())}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}},VK="text/plain",zK="us-ascii",SB=(e,i)=>i.some(s=>s instanceof RegExp?s.test(e):s===e),UK=(e,{stripHash:i})=>{let s=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(e);if(!s)throw new Error(`Invalid URL: ${e}`);let{type:a,data:o,hash:c}=s.groups,d=a.split(";");c=i?"":c;let g=!1;d[d.length-1]==="base64"&&(d.pop(),g=!0);let b=(d.shift()||"").toLowerCase(),j=[...d.map(_e=>{let[$,rt=""]=_e.split("=").map(st=>st.trim());return $==="charset"&&(rt=rt.toLowerCase(),rt===zK)?"":`${$}${rt?`=${rt}`:""}`}).filter(Boolean)];return g&&j.push("base64"),(j.length>0||b&&b!==VK)&&j.unshift(b),`data:${j.join(";")},${g?o.trim():o}${c?`#${c}`:""}`};function hE(e,i){if(i={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...i},e=e.trim(),/^data:/i.test(e))return UK(e,i);if(/^view-source:/i.test(e))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let s=e.startsWith("//");!s&&/^\.*\//.test(e)||(e=e.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,i.defaultProtocol));let a=new URL(e);if(i.forceHttp&&i.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(i.forceHttp&&a.protocol==="https:"&&(a.protocol="http:"),i.forceHttps&&a.protocol==="http:"&&(a.protocol="https:"),i.stripAuthentication&&(a.username="",a.password=""),i.stripHash?a.hash="":i.stripTextFragment&&(a.hash=a.hash.replace(/#?:~:text.*?$/i,"")),a.pathname){let c=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,d=0,g="";for(;;){let j=c.exec(a.pathname);if(!j)break;let _e=j[0],$=j.index,rt=a.pathname.slice(d,$);g+=rt.replace(/\/{2,}/g,"/"),g+=_e,d=$+_e.length}let b=a.pathname.slice(d,a.pathname.length);g+=b.replace(/\/{2,}/g,"/"),a.pathname=g}if(a.pathname)try{a.pathname=decodeURI(a.pathname)}catch{}if(i.removeDirectoryIndex===!0&&(i.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(i.removeDirectoryIndex)&&i.removeDirectoryIndex.length>0){let c=a.pathname.split("/"),d=c[c.length-1];SB(d,i.removeDirectoryIndex)&&(c=c.slice(0,-1),a.pathname=c.slice(1).join("/")+"/")}if(a.hostname&&(a.hostname=a.hostname.replace(/\.$/,""),i.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(a.hostname)&&(a.hostname=a.hostname.replace(/^www\./,""))),Array.isArray(i.removeQueryParameters))for(let c of[...a.searchParams.keys()])SB(c,i.removeQueryParameters)&&a.searchParams.delete(c);if(i.removeQueryParameters===!0&&(a.search=""),i.sortQueryParameters){a.searchParams.sort();try{a.search=decodeURIComponent(a.search)}catch{}}i.removeTrailingSlash&&(a.pathname=a.pathname.replace(/\/$/,""));let o=e;return e=a.toString(),!i.removeSingleSlash&&a.pathname==="/"&&!o.endsWith("/")&&a.hash===""&&(e=e.replace(/\/$/,"")),(i.removeTrailingSlash||a.pathname==="/")&&a.hash===""&&i.removeSingleSlash&&(e=e.replace(/\/$/,"")),s&&!i.normalizeProtocol&&(e=e.replace(/^http:\/\//,"//")),i.stripProtocol&&(e=e.replace(/^(?:https?:)?\/\//,"")),e}var pb=class{constructor({url:e,context:i},s,a,o){if(this.controlsManager=s,this.shared=a,this.condition=o,!e)throw new Error("Missing property");this.url=e.startsWith("mailto:")?e:hE(e,{removeTrailingSlash:!1,removeSingleSlash:!1}),this.context=i??"tab"}dispatch(){var e;if(Ut(this.shared,this.condition)===!1)return!1;Uh?window.location.assign(this.url):(this.context==="tab"?window.open(this.url,"_blank"):this.context==="window"?window.open(this.url,"_blank",`width=${window.innerWidth}, height=${window.innerHeight}`):window.open(this.url,"_parent"),(e=this.controlsManager.orbitControls)==null||e.onPointerUp($e$1[0]),z2())}},cg=class{constructor(e,i,s,a,o){this.data=e,this.page=i,this.controlsManager=s,this.shared=a,this.condition=o,this.timeoutIdQueue=[],this.dispatchInner=()=>{this.objects.forEach(this.destroyCallback)},this.destroyCallback=c=>{var j,_e;this.timeoutIdQueue.shift();let d=this.page.scene.find(c);if(d===void 0)return;let g=this.controlsManager.sharedGameControlGlobals.rapierWorld,b=g?(j=d.dataPatched.physics)==null?void 0:j.fusedBody:!0;if(d.cloner){for(let $ of d.cloner.children)b?($.playModeVisible=!1,$.rigidBody&&((_e=d.dataPatched.physics)==null?void 0:_e.rigidBody)==="positioned"&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete($.rigidBody.collider(0).handle),g.removeRigidBody($.rigidBody),$.rigidBody=void 0),$.bvhGeometry&&($.bvhGeometry=void 0)):this.clone===void 0||this.clone===$?($.playModeVisible=!1,$.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete($.rigidBody.collider(0).handle),g.removeRigidBody($.rigidBody),$.rigidBody=void 0)):$.playModeVisible===void 0&&($.playModeVisible=!0);(b||this.clone===void 0||this.clone===!1)&&(d.visible=!1,d.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(d.rigidBody.collider(0).handle),g.removeRigidBody(d.rigidBody),d.rigidBody=void 0),d.bvhGeometry&&(d.bvhGeometry=void 0))}else d.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(d.rigidBody.collider(0).handle),g.removeRigidBody(d.rigidBody),d.rigidBody=void 0),d.bvhGeometry&&(d.bvhGeometry=void 0),d.visible=!1;g===void 0?this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim=this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.filter($=>$.bvhGeometry!==void 0):this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim=this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.filter($=>$.rigidBody!==void 0),d.destroyedInAction=!0,this.controlsManager.requestRender()},this.objects=[...e.objects]}dispatch(e){if(Ut(this.shared,this.condition)===!1)return!1;this.clone=e,this.data.delay?this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3)):this.dispatchInner()}dispatchFromStart(){if(Ut(this.shared,this.condition)===!1)return!1;this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3))}dispose(){this.timeoutIdQueue.forEach(e=>window.clearTimeout(e))}},ug=class{constructor(e,i,s,a,o){this.data=e,this.page=i,this.shared=s,this.eventManager=a,this.condition=o,this.shared=s}dispatch(){if(Ut(this.shared,this.condition)===!1)return!1;clearTimeout(this.timeoutId),delete this.timeoutId,this.timeoutId=window.setTimeout(()=>{var e;this.shared.reset(this.shared.data,!0),Yf(this.page,this.shared,!0),this.eventManager.reset(),(e=this.eventManager.controlsManager.gameControl)==null||e.reset(!0),this.page.switchToPlayCamera(),this.eventManager.controlsManager.requestRender(),delete this.timeoutId},(this.data.delay??0)*1e3)}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},MB={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,timelineChangeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0,rewind:!0},mE={duration:1e3,delay:0,endDelay:0,startOnceDelay:0,pingPongDelayCorrection:0,pingPongEndDelayCorrection:0,easing:"easeOutElastic(1, .5)",round:0},GK=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],gb={CSS:{},springs:{}};function fo(e,i,s){return Math.min(Math.max(e,i),s)}function hg(e,i){return e.indexOf(i)>-1}function dE(e,i){return e.apply(null,i)}var dt={arr:function(e){return Array.isArray(e)},obj:function(e){return hg(Object.prototype.toString.call(e),"Object")},pth:function(e){return dt.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return!("isNode"in e)&&(e.nodeType||dt.svg(e))},str:function(e){return typeof e=="string"},fnc:function(e){return typeof e=="function"},und:function(e){return typeof e>"u"},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return dt.hex(e)||dt.rgb(e)||dt.hsl(e)},key:function(e){return!MB.hasOwnProperty(e)&&!mE.hasOwnProperty(e)&&e!=="targets"&&e!=="keyframes"}};function CB(e){var i=/\(([^)]+)\)/.exec(e);return i?i[1].split(",").map(function(s){return parseFloat(s)}):[]}function PB(e,i){var s=CB(e),a=fo(dt.und(s[0])?1:s[0],.1,100),o=fo(dt.und(s[1])?100:s[1],.1,100),c=fo(dt.und(s[2])?10:s[2],.1,100),d=fo(dt.und(s[3])?0:s[3],.1,100),g=Math.sqrt(o/a),b=c/(2*Math.sqrt(o*a)),j=b<1?g*Math.sqrt(1-b*b):0,_e=1,$=b<1?(b*g+-d)/j:-d+g;function rt(ut){var gt=i?i*ut/1e3:ut;return b<1?gt=Math.exp(-gt*b*g)*(_e*Math.cos(j*gt)+$*Math.sin(j*gt)):gt=(_e+$*gt)*Math.exp(-gt*g),ut===0||ut===1?ut:1-gt}function st(){var ut=gb.springs[e];if(ut)return ut;for(var gt=1/6,wt=0,yt=0;;)if(wt+=gt,rt(wt)===1){if(yt++,yt>=16)break}else yt=0;var At=wt*gt*1e3;return gb.springs[e]=At,At}return i?rt:st}function jK(e){return e===void 0&&(e=10),function(i){return Math.ceil(fo(i,1e-6,1)*e)*(1/e)}}var HK=function(){var e=11,i=1/(e-1);function s(_e,$){return 1-3*$+3*_e}function a(_e,$){return 3*$-6*_e}function o(_e){return 3*_e}function c(_e,$,rt){return((s($,rt)*_e+a($,rt))*_e+o($))*_e}function d(_e,$,rt){return 3*s($,rt)*_e*_e+2*a($,rt)*_e+o($)}function g(_e,$,rt,st,ut){var gt,wt,yt=0;do wt=$+(rt-$)/2,gt=c(wt,st,ut)-_e,gt>0?rt=wt:$=wt;while(Math.abs(gt)>1e-7&&++yt<10);return wt}function b(_e,$,rt,st){for(var ut=0;ut<4;++ut){var gt=d($,rt,st);if(gt===0)return $;var wt=c($,rt,st)-_e;$-=wt/gt}return $}function j(_e,$,rt,st){if(!(0<=_e&&_e<=1&&0<=rt&&rt<=1))return;var ut=new Float32Array(e);if(_e!==$||rt!==st)for(var gt=0;gt<e;++gt)ut[gt]=c(gt*i,_e,rt);function wt(yt){for(var At=0,Ct=1,Tt=e-1;Ct!==Tt&&ut[Ct]<=yt;++Ct)At+=i;--Ct;var kt=(yt-ut[Ct])/(ut[Ct+1]-ut[Ct]),Pt=At+kt*i,It=d(Pt,_e,rt);return It>=.001?b(yt,Pt,_e,rt):It===0?Pt:g(yt,At,At+i,_e,rt)}return function(yt){return _e===$&&rt===st||yt===0||yt===1?yt:c(wt(yt),$,st)}}return j}(),DB=function(){var e={linear:function(){return function(a){return a}}},i={Sine:function(){return function(a){return 1-Math.cos(a*Math.PI/2)}},Circ:function(){return function(a){return 1-Math.sqrt(1-a*a)}},Back:function(){return function(a){return a*a*(3*a-2)}},Bounce:function(){return function(a){for(var o,c=4;a<((o=Math.pow(2,--c))-1)/11;);return 1/Math.pow(4,3-c)-7.5625*Math.pow((o*3-2)/22-a,2)}},Elastic:function(a,o){a===void 0&&(a=1),o===void 0&&(o=.5);var c=fo(a,1,10),d=fo(o,.1,2);return function(g){return g===0||g===1?g:-c*Math.pow(2,10*(g-1))*Math.sin((g-1-d/(Math.PI*2)*Math.asin(1/c))*(Math.PI*2)/d)}}},s=["Quad","Cubic","Quart","Quint","Expo"];return s.forEach(function(a,o){i[a]=function(){return function(c){return Math.pow(c,o+2)}}}),Object.keys(i).forEach(function(a){var o=i[a];e["easeIn"+a]=o,e["easeOut"+a]=function(c,d){return function(g){return 1-o(c,d)(1-g)}},e["easeInOut"+a]=function(c,d){return function(g){return g<.5?o(c,d)(g*2)/2:1-o(c,d)(g*-2+2)/2}}}),e}();function gE(e,i){if(dt.fnc(e))return e;var s=e.split("(")[0],a=DB[s],o=CB(e);switch(s){case"spring":return PB(e,i);case"cubicBezier":return dE(HK,o);case"steps":return dE(jK,o);default:return dE(a,o)}}function OB(e){try{var i=document.querySelectorAll(e);return i}catch{return}}function yb(e,i){for(var s=e.length,a=arguments.length>=2?arguments[1]:void 0,o=[],c=0;c<s;c++)if(c in e){var d=e[c];i.call(a,d,c,e)&&o.push(d)}return o}function vb(e){return e.reduce(function(i,s){return i.concat(dt.arr(s)?vb(s):s)},[])}function wB(e){return dt.arr(e)?e:(dt.str(e)&&(e=OB(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function yE(e,i){return e.some(function(s){return s===i})}function vE(e){var i={};for(var s in e)i[s]=e[s];return i}function fE(e,i){var s=vE(e);for(var a in e)s[a]=i.hasOwnProperty(a)?i[a]:e[a];return s}function xb(e,i){var s=vE(e);for(var a in i)s[a]=dt.und(e[a])?i[a]:e[a];return s}function WK(e){var i=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e);return i?"rgba("+i[1]+",1)":e}function qK(e){var i=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,s=e.replace(i,function(g,b,j,_e){return b+b+j+j+_e+_e}),a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(s),o=parseInt(a[1],16),c=parseInt(a[2],16),d=parseInt(a[3],16);return"rgba("+o+","+c+","+d+",1)"}function YK(e){var i=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),s=parseInt(i[1],10)/360,a=parseInt(i[2],10)/100,o=parseInt(i[3],10)/100,c=i[4]||1;function d(rt,st,ut){return ut<0&&(ut+=1),ut>1&&(ut-=1),ut<1/6?rt+(st-rt)*6*ut:ut<1/2?st:ut<2/3?rt+(st-rt)*(2/3-ut)*6:rt}var g,b,j;if(a==0)g=b=j=o;else{var _e=o<.5?o*(1+a):o+a-o*a,$=2*o-_e;g=d($,_e,s+1/3),b=d($,_e,s),j=d($,_e,s-1/3)}return"rgba("+g*255+","+b*255+","+j*255+","+c+")"}function XK(e){if(dt.rgb(e))return WK(e);if(dt.hex(e))return qK(e);if(dt.hsl(e))return YK(e)}function Xa(e){var i=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(i)return i[1]}function QK(e){if(hg(e,"translate")||e==="perspective")return"px";if(hg(e,"rotate")||hg(e,"skew"))return"deg"}function pE(e,i){return dt.fnc(e)?e(i.target,i.id,i.total):e}function ra(e,i){return e.getAttribute(i)}function xE(e,i,s){var a=Xa(i);if(yE([s,"deg","rad","turn"],a))return i;var o=gb.CSS[i+s];if(!dt.und(o))return o;var c=100,d=document.createElement(e.tagName),g=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;g.appendChild(d),d.style.position="absolute",d.style.width=c+s;var b=c/d.offsetWidth;g.removeChild(d);var j=b*parseFloat(i);return gb.CSS[i+s]=j,j}function IB(e,i,s){if(i in e.style){var a=i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),o=e.style[i]||getComputedStyle(e).getPropertyValue(a)||"0";return s?xE(e,o,s):o}}function bE(e,i){if(dt.dom(e)&&!dt.inp(e)&&(ra(e,i)||dt.svg(e)&&e[i]))return"attribute";if(dt.dom(e)&&yE(GK,i))return"transform";if(dt.dom(e)&&i!=="transform"&&IB(e,i))return"css";if(e[i]!=null)return"object"}function RB(e){if(dt.dom(e)){for(var i=e.style.transform||"",s=/(\w+)\(([^)]*)\)/g,a=new Map,o;o=s.exec(i);)a.set(o[1],o[2]);return a}}function KK(e,i,s,a){var o=hg(i,"scale")?1:0+QK(i),c=RB(e).get(i)||o;return s&&(s.transforms.list.set(i,c),s.transforms.last=i),a?xE(e,c,a):c}function SE(e,i,s,a){switch(bE(e,i)){case"transform":return KK(e,i,a,s);case"css":return IB(e,i,s);case"attribute":return ra(e,i);default:return e[i]||0}}function wE(e,i){var s=/^(\*=|\+=|-=)/.exec(e);if(!s)return e;var a=Xa(e)||0,o=parseFloat(i),c=parseFloat(e.replace(s[0],""));switch(s[0][0]){case"+":return o+c+a;case"-":return o-c+a;case"*":return o*c+a}}function LB(e,i){if(dt.col(e))return XK(e);if(/\s/g.test(e))return e;var s=Xa(e),a=s?e.substr(0,e.length-s.length):e;return i?a+i:a}function AE(e,i){return Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2))}function ZK(e){return Math.PI*2*ra(e,"r")}function JK(e){return ra(e,"width")*2+ra(e,"height")*2}function $K(e){return AE({x:ra(e,"x1"),y:ra(e,"y1")},{x:ra(e,"x2"),y:ra(e,"y2")})}function BB(e){for(var i=e.points,s=0,a,o=0;o<i.numberOfItems;o++){var c=i.getItem(o);o>0&&(s+=AE(a,c)),a=c}return s}function eZ(e){var i=e.points;return BB(e)+AE(i.getItem(i.numberOfItems-1),i.getItem(0))}function NB(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return ZK(e);case"rect":return JK(e);case"line":return $K(e);case"polyline":return BB(e);case"polygon":return eZ(e)}}function tZ(e){var i=NB(e);return e.setAttribute("stroke-dasharray",i),i}function rZ(e){for(var i=e.parentNode;dt.svg(i)&&dt.svg(i.parentNode);)i=i.parentNode;return i}function FB(e,i){var s=i||{},a=s.el||rZ(e),o=a.getBoundingClientRect(),c=ra(a,"viewBox"),d=o.width,g=o.height,b=s.viewBox||(c?c.split(" "):[0,0,d,g]);return{el:a,viewBox:b,x:b[0]/1,y:b[1]/1,w:d/b[2],h:g/b[3]}}function iZ(e,i){var s=dt.str(e)?OB(e)[0]:e,a=i||100;return function(o){return{property:o,el:s,svg:FB(s),totalLength:NB(s)*(a/100)}}}function nZ(e,i){function s(g){g===void 0&&(g=0);var b=i+g>=1?i+g:0;return e.el.getPointAtLength(b)}var a=FB(e.el,e.svg),o=s(),c=s(-1),d=s(1);switch(e.property){case"x":return(o.x-a.x)*a.w;case"y":return(o.y-a.y)*a.h;case"angle":return Math.atan2(d.y-c.y,d.x-c.x)*180/Math.PI}}function AB(e,i){var s=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,a=LB(dt.pth(e)?e.totalLength:e,i)+"";return{original:a,numbers:a.match(s)?a.match(s).map(Number):[0],strings:dt.str(e)||i?a.split(s):[]}}function kB(e){var i=e?vb(dt.arr(e)?e.map(wB):wB(e)):[];return yb(i,function(s,a,o){return o.indexOf(s)===a})}function VB(e){var i=kB(e);return i.map(function(s,a){return{target:s,id:a,total:i.length,transforms:{list:RB(s)}}})}function sZ(e,i){var s=vE(i);if(/^spring/.test(s.easing)&&(s.duration=PB(s.easing)),dt.arr(e)){var a=e.length,o=a===2&&!dt.obj(e[0]);o?e={value:e}:dt.fnc(i.duration)||(s.duration=i.duration/a)}var c=dt.arr(e)?e:[e];return c.map(function(d,g){var b=dt.obj(d)&&!dt.pth(d)?d:{value:d};return dt.und(b.delay)&&(b.delay=g?0:i.delay),dt.und(b.endDelay)&&(b.endDelay=g===c.length-1?i.endDelay:0),b}).map(function(d){return xb(d,s)})}function oZ(e){for(var i=yb(vb(e.map(function(c){return Object.keys(c)})),function(c){return dt.key(c)}).reduce(function(c,d){return c.indexOf(d)<0&&c.push(d),c},[]),s={},a=function(c){var d=i[c];s[d]=e.map(function(g){var b={};for(var j in g)dt.key(j)?j==d&&(b.value=g[j]):b[j]=g[j];return b})},o=0;o<i.length;o++)a(o);return s}function aZ(e,i){var s=[],a=i.keyframes;a&&(i=xb(oZ(a),i));for(var o in i)dt.key(o)&&s.push({name:o,tweens:sZ(i[o],e)});return s}function lZ(e,i){var s={};for(var a in e){var o=pE(e[a],i);dt.arr(o)&&(o=o.map(function(c){return pE(c,i)}),o.length===1&&(o=o[0])),s[a]=o}return s.duration=parseFloat(s.duration),s.delay=parseFloat(s.delay),s}function cZ(e,i){var s;return e.tweens.map(function(a){var o=lZ(a,i),c=o.value,d=dt.arr(c)?c[1]:c,g=Xa(d),b=SE(i.target,e.name,g,i),j=s?s.to.original:b,_e=dt.arr(c)?c[0]:j,$=Xa(_e)||Xa(b),rt=g||$;return dt.und(d)&&(d=j),o.from=AB(_e,rt),o.to=AB(wE(d,_e),rt),o.start=s?s.end:0,o.end=o.start+o.delay+o.duration+o.endDelay,o.easing=gE(o.easing,o.duration),o.isPath=dt.pth(c),o.isColor=dt.col(o.from.original),o.isColor&&(o.round=1),s=o,o})}var zB={css:function(e,i,s){return e.style[i]=s},attribute:function(e,i,s){return e.setAttribute(i,s)},object:function(e,i,s){return e[i]=s},transform:function(e,i,s,a,o){if(a.list.set(i,s),i===a.last||o){var c="";a.list.forEach(function(d,g){c+=g+"("+d+") "}),e.style.transform=c}}};function UB(e,i){var s=VB(e);s.forEach(function(a){for(var o in i){var c=pE(i[o],a),d=a.target,g=Xa(c),b=SE(d,o,g,a),j=g||Xa(b),_e=wE(LB(c,j),b),$=bE(d,o);zB[$](d,o,_e,a.transforms,!0)}})}function uZ(e,i){var s=bE(e.target,i.name);if(s){var a=cZ(i,e),o=a[a.length-1];return{type:s,property:i.name,animatable:e,tweens:a,duration:o.end,delay:a[0].delay,endDelay:o.endDelay}}}function hZ(e,i){return yb(vb(e.map(function(s){return i.map(function(a){return uZ(s,a)})})),function(s){return!dt.und(s)})}function GB(e,i){var s=e.length,a=function(c){return c.timelineOffset?c.timelineOffset:0},o={};return o.duration=s?Math.max.apply(Math,e.map(function(c){let d=c.startOnceDelay??0,g=c.pingPongDelayCorrection??0,b=c.pingPongEndDelayCorrection??0;return a(c)+d+g+b+c.duration*(c.loop??1)})):i.duration,o.delay=s?Math.min.apply(Math,e.map(function(c){let d=c.startOnceDelay??0,g=c.pingPongDelayCorrection??0;return a(c)+d+g+c.delay})):i.delay,o.endDelay=s?o.duration-Math.max.apply(Math,e.map(function(c){let d=c.startOnceDelay??0,g=c.pingPongDelayCorrection??0,b=c.pingPongEndDelayCorrection??0;return a(c)+d+g+c.duration*(c.loop??1)-c.endDelay-b})):i.endDelay,o}var _B=0;function dZ(e){var i=fE(MB,e),s=fE(mE,e),a=aZ(s,e),o=VB(e.targets),c=hZ(o,a),d=GB(c,s),g=_B;return _B++,xb(i,{id:g,children:[],animatables:o,animations:c,duration:d.duration,delay:d.delay,endDelay:d.endDelay,startOnceDelay:s.startOnceDelay,pingPongDelayCorrection:s.pingPongDelayCorrection,pingPongEndDelayCorrection:s.pingPongEndDelayCorrection})}var Fs=[],EB=[],mb,fZ=function(){function e(){mb=requestAnimationFrame(i)}function i(s){var a=Fs.length;if(a){for(var o=0;o<a;){var c=Fs[o];c.paused?(Fs.splice(o,1),a-=1):(c.tick(s),o++)}e()}else mb=cancelAnimationFrame(mb)}return e}();function pZ(e){document.hidden?(Fs.forEach(function(i){return i.pause(e.timeStamp)}),EB=Fs.slice(0),ui.running=Fs=[]):EB.forEach(function(i){return i.play(e.timeStamp)})}typeof document<"u"&&document.addEventListener("visibilitychange",pZ);function ui(e){e===void 0&&(e={});var i=0,s=0,a=0,o,c,d=0,g=null;function b(Pt){var It=window.Promise&&new Promise(function(Lt){return g=Lt});return Pt.finished=It,It}var j=dZ(e);b(j);function _e(){var Pt=j.direction;Pt!=="alternate"&&(j.direction=Pt!=="normal"?"normal":"reverse"),j.reversed=!j.reversed,c.forEach(function(It){(It.loop===1||It.loop%2===0)&&(It.reversed=j.reversed)})}function $(){j.direction="normal",j.reversed=!1,c.forEach(function(Pt){return Pt.reversed=!1})}function rt(Pt){return j.reversed?j.duration-Pt:Pt}function st(){i=0,s=rt(j.currentTime)*(1/ui.speed)}function ut(Pt,It,Lt=!1){It&&(j.reversed?It.seek(It.duration*It.loop-(Pt-It.timelineOffset-It.pingPongDelayCorrection),Lt):It.seek(Pt-It.timelineOffset-It.startOnceDelay-It.pingPongDelayCorrection,Lt))}function gt(Pt,It=!1){if(j.reversed)for(var Lt=d;Lt--;)ut(Pt,c[Lt],It);else for(var Nt=0;Nt<d;Nt++)ut(Pt,c[Nt],It)}function wt(Pt){var l1,P0,B0,q1,ox,qx,N_,eS,tA,fD;var It=0,Lt=j.animations,Nt=Lt.length;for(j.direction!=="alternate"&&((l1=j.parent)==null?void 0:l1.direction)==="alternate"?((P0=j.parent)==null?void 0:P0.rewind)===!1&&j.reversePlayback===!0&&j.rewind===!1&&((B0=j.parent)!=null&&B0.reversed&&j.direction==="alternate"?Pt=j.duration-j.delay+j.endDelay-Pt:Pt=j.duration+j.delay-j.endDelay-Pt):Tt(!1,(q1=j.parent)==null?void 0:q1.rewind,j.rewind,(ox=j.parent)==null?void 0:ox.reversePlayback,j.reversePlayback)&&((qx=j.parent)!=null&&qx.reversed&&j.direction==="alternate"?Pt=j.duration-j.delay+j.endDelay-Pt:Pt=j.duration+j.delay-j.endDelay-Pt);It<Nt;){var Ht=Lt[It],dr=Ht.animatable,hs=Ht.tweens,_s=hs.length-1,ds=hs[_s];_s&&(ds=yb(hs,function(SA){return Pt<SA.end})[0]||ds);let q3;(N_=j.parent)!=null&&N_.reversed&&j.direction==="alternate"?q3=fo(Pt-ds.start-ds.endDelay,0,ds.duration)/ds.duration:q3=fo(Pt-ds.start-ds.delay,0,ds.duration)/ds.duration;for(var Nn=isNaN(q3)?1:ds.easing(q3),us=ds.to.strings,hn=ds.round,Ft=[],Gr=ds.to.numbers.length,gn=void 0,un=0;un<Gr;un++){var Zn=void 0;let SA,wA;j.direction!=="alternate"?((eS=j.parent)==null?void 0:eS.rewind)===!1&&j.reversePlayback===!0&&j.rewind===!1?(SA=ds.to.numbers[un],wA=ds.from.numbers[un]||0):(wA=ds.to.numbers[un],SA=ds.from.numbers[un]||0):Tt(!0,(tA=j.parent)==null?void 0:tA.rewind,j.rewind,(fD=j.parent)==null?void 0:fD.reversePlayback,j.reversePlayback)?(SA=ds.to.numbers[un],wA=ds.from.numbers[un]||0):(wA=ds.to.numbers[un],SA=ds.from.numbers[un]||0),ds.isPath?Zn=nZ(ds.value,Nn*wA):Zn=SA+Nn*(wA-SA),hn&&(ds.isColor&&un>2||(Zn=Math.round(Zn*hn)/hn)),Ft.push(Zn)}var xu=us.length;if(!xu)gn=Ft[0];else{gn=us[0];for(var ou=0;ou<xu;ou++){us[ou];var sp=us[ou+1],wu=Ft[ou];isNaN(wu)||(sp?gn+=wu+sp:gn+=wu+" ")}}zB[Ht.type](dr.target,Ht.property,gn,dr.transforms),Ht.currentValue=gn,It++}}function yt(Pt){j[Pt]&&!j.passThrough&&j[Pt](j)}function At(){j.remaining&&j.remaining!==!0&&j.remaining--}let Ct={0:!1,1:!0,2:!1,3:!0,4:!1,5:!1,6:!1,7:!1,8:!1,9:!0,10:!0,11:!1,12:!1,13:!1,14:!0,15:!0,16:!1,17:!0,18:!0,19:!1,20:!1,21:!1,22:!0,23:!0,24:!1,25:!0,26:!1,27:!0,28:!1,29:!1,30:!1,31:!1};function Tt(Pt,It,Lt,Nt,Ht){return Ct[Pt<<4|It<<3|Lt<<2|Nt<<1|Ht]}function kt(Pt,It=!1){var hs;var Lt=j.duration;let Nt=j.delay,Ht=Lt-j.endDelay;(hs=j.parent)!=null&&hs.reversed&&j.direction==="alternate"&&(Nt=j.endDelay,Ht=Lt-j.delay);var dr=rt(Pt);if(j.progress=fo(dr/Lt*100,0,100),It||(j.reversePlayback=dr<j.currentTime),d&&gt(dr,It),!j.began&&j.currentTime>=0&&(j.began=!0,yt("begin")),!j.loopBegan&&j.currentTime>0&&(j.loopBegan=!0,yt("loopBegin")),(j.reversed||dr>=0)&&dr<=Nt&&j.currentTime!==0&&(wt(0),yt("change")),(dr>=Ht&&j.currentTime!==Lt+j.pingPongDelayCorrection||!Lt)&&(wt(Lt),yt("change")),dr>Nt&&dr<Ht?(j.changeBegan||(j.changeBegan=!0,j.changeCompleted=!1,yt("changeBegin")),wt(dr),yt("change")):j.changeBegan?(j.changeCompleted=!0,j.changeBegan=!1,yt("change"),d&&yt("timelineChangeComplete")):j.began&&dr>Ht&&yt("changeComplete"),j.currentTime=fo(dr,0,Lt+j.pingPongDelayCorrection),j.began&&yt("update"),Pt>=Lt)if(At(),!j.remaining)j.paused=!0,j.completed||(j.completed=!0,yt("loopComplete"),yt("complete"),!j.passThrough&&"Promise"in window&&(g(),b(j)));else{d?i+=j.duration/ui.speed:i+=j.duration;for(let _s of c)_s.setStartTime(0),_s.remaining=_s.loop;yt("loopComplete"),j.loopBegan=!1,j.direction==="alternate"?_e():d&&$()}}return j.reset=function(){var Pt=j.direction;j.passThrough=!1,j.currentTime=0,j.progress=0,j.paused=!0,j.began=!1,j.loopBegan=!1,j.changeBegan=!1,j.completed=!1,j.changeCompleted=!1,j.reversePlayback=!1,j.reversed=Pt==="reverse",j.remaining=j.loop,c=j.children,d=c.length;for(var It=d;It--;)j.children[It].reset();wt(j.reversed?j.duration:0)},j.setStartTime=function(Pt){i=Pt},j.set=function(Pt,It){return UB(Pt,It),j},j.tick=function(Pt){a=Pt,i||(i=a),kt((a+(s-i))*ui.speed)},j.seek=function(Pt,It=!1){kt(Pt-i,It)},j.pause=function(Pt){j.paused=!0,d&&(o=Pt??performance.now())},j.play=function(Pt){!j.paused||(j.completed&&j.reset(),j.paused=!1,Fs.push(j),d&&o!==void 0&&(i+=(Pt??performance.now())-o),mb||fZ())},j.reverse=function(){_e(),j.completed=!j.reversed,st()},j.restart=function(){j.reset(),j.play()},j.reset(),j.autoplay&&j.play(),j}function TB(e,i){for(var s=i.length;s--;)yE(e,i[s].animatable.target)&&i.splice(s,1)}function mZ(e){for(var i=kB(e),s=Fs.length;s--;){var a=Fs[s],o=a.animations,c=a.children;TB(i,o);for(var d=c.length;d--;){var g=c[d],b=g.animations;TB(i,b),!b.length&&!g.children.length&&c.splice(d,1)}!o.length&&!c.length&&a.pause()}}function gZ(e,i){i===void 0&&(i={});var s=i.direction||"normal",a=i.easing?gE(i.easing):null,o=i.grid,c=i.axis,d=i.from||0,g=d==="first",b=d==="center",j=d==="last",_e=dt.arr(e),$=parseFloat(_e?e[0]:e),rt=_e?parseFloat(e[1]):0,st=Xa(_e?e[1]:e)||0,ut=i.start||0+(_e?$:0),gt=[],wt=0;return function(yt,At,Ct){if(g&&(d=0),b&&(d=(Ct-1)/2),j&&(d=Ct-1),!gt.length){for(var Tt=0;Tt<Ct;Tt++){if(!o)gt.push(Math.abs(d-Tt));else{var kt=b?(o[0]-1)/2:d%o[0],Pt=b?(o[1]-1)/2:Math.floor(d/o[0]),It=Tt%o[0],Lt=Math.floor(Tt/o[0]),Nt=kt-It,Ht=Pt-Lt,dr=Math.sqrt(Nt*Nt+Ht*Ht);c==="x"&&(dr=-Nt),c==="y"&&(dr=-Ht),gt.push(dr)}wt=Math.max.apply(Math,gt)}a&&(gt=gt.map(function(_s){return a(_s/wt)*wt})),s==="reverse"&&(gt=gt.map(function(_s){return c?_s<0?_s*-1:-_s:Math.abs(wt-_s)}))}var hs=_e?(rt-$)/wt:$;return ut+hs*(Math.round(gt[At]*100)/100)+st}}function yZ(e){e===void 0&&(e={});var i=ui(e);return i.duration=0,i.add=function(s,a){var o=Fs.indexOf(i),c=i.children;o>-1&&Fs.splice(o,1);function d(rt){rt.passThrough=!0}for(var g=0;g<c.length;g++)d(c[g]);var b=xb(s,fE(mE,e));b.targets=b.targets||e.targets;var j=i.duration;b.autoplay=!1,b.timelineOffset=dt.und(a)?j:wE(a,j),d(i);var _e=ui(b);d(_e),c.push(_e),_e.parent=i;var $=GB(c,e);return i.delay=$.delay,i.endDelay=$.endDelay,i.duration=$.duration,_e.loop===!0&&(i.duration=1/0),i.seek(0),i.reset(),i.autoplay&&i.play(),i},i}ui.version="3.2.0";ui.speed=1;ui.running=Fs;ui.remove=mZ;ui.get=SE;ui.set=UB;ui.convertPx=xE;ui.path=iZ;ui.setDashoffset=tZ;ui.stagger=gZ;ui.timeline=yZ;ui.easing=gE;ui.penner=DB;ui.random=function(e,i){return Math.floor(Math.random()*(i-e+1))+e};var bb=ui,jB=new _,HB=new _,WB=new Qe;function YB(e,i,s,a){if(a===0)return s.copy(e);if(a===1)return s.copy(i);let o=e.w*i.w+e.x*i.x+e.y*i.y+e.z*i.z;if(o>=1)return s.copy(e);let c=1-o*o;if(c<=Number.EPSILON){let _e=1-a;return s.w=_e*e.w+a*i.w,s.x=_e*e.x+a*i.x,s.y=_e*e.y+a*i.y,s.z=_e*e.z+a*i.z,s.normalize(),s}let d=Math.sqrt(c),g=Math.atan2(d,o),b=Math.sin((1-a)*g)/d,j=Math.sin(a*g)/d;return s.w=e.w*b+i.w*j,s.x=e.x*b+i.x*j,s.y=e.y*b+i.y*j,s.z=e.z*b+i.z*j,s}function ei(e,i,s,a,o,c){let d=s[e]?s[e]:void 0,g=a[e];if(g==null)return;let b=d!=null?typeof d=="string"?Number(o.getVariable(d)??0):d:i[e],j=typeof g=="string"?Number(o.getVariable(g)??0):g;if(b!==j)return{update:_e=>{let $=Me.lerp(b,j,_e);c?i[e]=Math.trunc($):i[e]=$},start:()=>{i[e]=b},end:()=>{i[e]=j}}}function fg(e,i,s,a,o,c){let d=s[e]?s[e]:void 0,g=a[e];if(!g)return;let b=i[e],j=[...d??b].map($=>typeof $=="string"?Number(o.getVariable($)??0):$),_e=[...g].map($=>typeof $=="string"?Number(o.getVariable($)??0):$);if(!(j.length!==_e.length||Xp(j,_e)))return{update:$=>{j.forEach((rt,st)=>{let ut=Me.lerp(rt,_e[st],$);i[e][st]=c?Math.trunc(ut):ut})},start:()=>{Object.assign(i[e],j)},end:()=>{Object.assign(i[e],_e)}}}function dg(e,i,s){return i.forEach((a,o)=>{e.setComponent(o,typeof a=="string"?Number(s.getVariable(a)??0):a)}),e}function _E(e,i,s,a,o){let c=s[e]?s[e]:void 0,d=a[e];if(!d)return;let g=i[e],b=c?dg(new _,c,o):g.clone(),j=dg(new _,d,o);if(!b.equals(j))return{update:_e=>{g.lerpVectors(b,j,_e)},start:()=>{g.copy(b)},end:()=>{g.copy(j)}}}function qB(e,i,s){return i.forEach((a,o)=>{e.setComponent(o,typeof a=="string"?Number(s.getVariable(a)??0):a)}),e}function pg(e,i,s,a,o){let c=s[e]?s[e]:void 0,d=a[e];if(!d)return;let g=i[e],b=!(g instanceof z$1),j=g instanceof z$1?g:new z$1().fromArray(g),_e=c?qB(new z$1,c,o):j.clone(),$=qB(new z$1,d,o);if(!_e.equals($))return{update:rt=>{j.lerpVectors(_e,$,rt),b&&(i[e]=j.toArray())},start:()=>{j.copy(_e),b&&(i[e]=j.toArray())},end:()=>{j.copy($),b&&(i[e]=j.toArray())}}}function XB(e,i,s,a){let o=s[e]?s[e]:void 0,c=a[e];if(!c)return;let d=i[e],g=o?new ce$1().fromArray(o):d.clone(),b=new _,j=new Qe,_e=new _;g.decompose(b,j,_e);let $=new ce$1().fromArray(c),rt=new _,st=new Qe,ut=new _;if($.decompose(rt,st,ut),!g.equals($))return{update:gt=>{WB.slerpQuaternions(j,st,gt),jB.lerpVectors(b,rt,gt),HB.lerpVectors(_e,ut,gt),d.compose(jB,WB,HB)},start:()=>{d.compose(b,j,_e)},end:()=>{d.compose(rt,st,ut)}}}function QB(e,i,s,a,o){let c=s[e]?s[e]:void 0,d=a[e];if(!d)return;let g=i[e],b=c?typeof c=="string"?o.getColor(c).clone():new We().setRGB(c.r,c.g,c.b):g.clone(),j=typeof d=="string"?o.getColor(d).clone():new We().setRGB(d.r,d.g,d.b);if(b.equals(j))return;let _e=g.clone();return i[e]=_e,{update:$=>{_e.lerpColors(b,j,$)},start:()=>{_e.copy(b)},end:()=>{_e.copy(j)}}}function mg(e,i,s,a,o){let c=s[e]?s[e]:void 0,d=a[e];if(!d)return;let g=i[e],b=new xr$1(g.r,g.g,g.b,g.a),j=c?typeof c=="string"?o.getColor(c).clone():new xr$1(c.r,c.g,c.b,c.a):b.clone(),_e=typeof d=="string"?o.getColor(d).clone():new xr$1(d.r,d.g,d.b,d.a);if(!j.equals(_e))return{update:$=>{b.lerpColors(j,_e,$);let rt=Me.lerp(j.a,_e.a,$);b.a=rt,i[e]={r:b.r,g:b.g,b:b.b,a:b.a}},start:()=>{b.copy(j)},end:()=>{b.copy(_e)}}}function ia(e,i,s,a,o){if(typeof i[e]=="number")return ei(e,i,s??{},a,o);if(Array.isArray(i[e]))return fg(e,i,s??{},a,o)}function KB(e,i,s,a){var g,b,j,_e;let o=[],c=e.cameraType==="OrthographicCamera"?(g=i.orthographic)==null?void 0:g.zoom:(b=i.perspective)==null?void 0:b.zoom,d=e.cameraType==="OrthographicCamera"?(j=s.orthographic)==null?void 0:j.zoom:(_e=s.perspective)==null?void 0:_e.zoom;if(d!==void 0){let $=c??e.zoom,rt=d;$!==rt&&o.push({update:st=>{e.zoom=Me.lerp($,rt,st),e.updateProjectionMatrix()},start:()=>{e.zoom=$,e.updateProjectionMatrix()},end:()=>{e.zoom=rt,e.updateProjectionMatrix()}})}if(s.targetOffset!==void 0){let $=ei("targetOffset",e,i,s,a);$&&o.push($)}return o}function vZ(e,i,s,a){if(s.scaleBaked===void 0)return;let o=(i.scaleBaked??e.data.geometry.scaleBaked).map(g=>typeof g=="string"?Number(a.getVariable(g)??0):g),c=s.scaleBaked.map(g=>typeof g=="string"?Number(a.getVariable(g)??0):g);if(Lo.isEqual(o,c))return;let d=[];return d.push({update:g=>{e.updateGeometryInteractions({scaleBaked:[Me.lerp(o[0],c[0],g),Me.lerp(o[1],c[1],g),Me.lerp(o[2],c[2],g)]},a),e.invalidateDownstreamBooleanData()},start:()=>{e.updateGeometryInteractions({scaleBaked:o},a),e.invalidateDownstreamBooleanData()},end:()=>{e.updateGeometryInteractions({scaleBaked:c},a),e.invalidateDownstreamBooleanData()}}),d}function xZ(e,i,s,a){if(!s.extrusion)return;let o=e.extrusion,c=i.extrusion??{},d=s.extrusion,g=[];return C1.forEach(b=>{let j=ia(b,o,c,d,a);j&&g.push(j)}),g}function ZB(e,i,s,a){let o=[];if(!("geometry"in s))return o;let c=e.geometry.userData.parameters,d="geometry"in i?i.geometry:{},g=s.geometry;if(e instanceof ao){let b=vZ(e,d,g,a);b&&o.push(...b)}else{let b={};if(Object.assign(b,as(c,P1)),P1.forEach(j=>{let _e=ia(j,b,d,g,a);_e&&o.push(_e)}),e instanceof ic){Object.assign(b,{extrusion:{...c.extrusion}});let j=xZ(b,d,g,a);j&&o.push(...j)}o.length&&o.push({update:j=>{e.updateGeometryInteractions(b,a),e.updateGeometryGroupsIfNeeded()},start:j=>{e.updateGeometryInteractions(b,a),e.updateGeometryGroupsIfNeeded()},end:j=>{e.updateGeometryInteractions(b,a),e.updateGeometryGroupsIfNeeded()}})}return o}function JB(e,i,s,a){let o=[];if(s.intensity!==void 0){let c=ei("intensity",e,i,s,a);c&&o.push(c)}if(s.color!==void 0){let c=QB("color",e,i,s,a);c&&o.push(c)}return o}function eN(e,i,s,a){let o=[];if(Array.isArray(e.material)){if(!("materials"in s&&s.materials))return o;let c="materials"in i&&i.materials?i.materials:[],d=s.materials;e.material.forEach((g,b)=>{if(!d[b])return;let j=c[b]??{},_e=d[b];typeof j=="string"||typeof _e=="string"||o.push(...$B(g,j,_e,a))})}else{if(!("material"in s&&s.material))return o;let c="material"in i&&i.material?i.material:{},d=s.material;if(typeof c=="string"||typeof d=="string")return o;o.push(...$B(e.material,c,d,a))}return o}function $B(e,i,s,a){var d;let o=[],c=Jc(s,a)||!!i.layers&&Jc(i,a);o.push(CZ(e,c));for(let g of e.layers){let b=(d=i.layers)==null?void 0:d.data(g.uuid),j=s.layers.data(g.uuid);if(!j||g.type!=="light"&&(!(g.visible??!0)||!(j.visible??!0)))continue;let _e=g.getNames().filter($=>!e0.some(rt=>$.includes(rt)));for(let $ of _e)try{let rt=g.getValue($),st;if($==="colors")st=TZ(g,b,j,$);else if(Array.isArray(rt))$==="steps"&&(st=EZ(g,b,j,$));else if(typeof rt=="number")st=bZ(g,b,j,$,a);else{if(typeof rt=="boolean")continue;rt instanceof z$1?st=SZ(g,b,j,$):rt instanceof _?st=wZ(g,b,j,$,a):rt instanceof xr$1?st=_Z(g,b,j,$,a):rt instanceof We?st=AZ(g,b,j,$,a):"isTexture"in rt&&(st=MZ(g,b,j,$))}st&&(Array.isArray(st)?o.push(...st):o.push(st))}catch(rt){console.error(`lerpMaterial: unexpected material layer for ${$}`,rt)}}return o}function bZ(e,i,s,a,o){if(!e.hasValue(a)||!(a in s))return;let c=i?i[a]:e.getValue(a),d=s[a],g=typeof c=="string"?Number(o.getVariable(c)??0):c,b=typeof d=="string"?Number(o.getVariable(d)??0):d;if(g!==b)return{update:j=>{e.setValue(a,Me.lerp(g,b,j))},start:()=>{e.setValue(a,g)},end:()=>{e.setValue(a,b)}}}function SZ(e,i,s,a){if(!e.hasValue(a)||!(a in s))return;let o=e.getValue(a),c=i?new z$1().fromArray(i[a]):o.clone(),d=new z$1().fromArray(s[a]);if(!c.equals(d))return{update:g=>{o.lerpVectors(c,d,g)},start:()=>{o.copy(c)},end:()=>{o.copy(d)}}}function wZ(e,i,s,a,o){if(!e.hasValue(a)||!(a in s))return;let c=e.getValue(a),d=i?i[a]:void 0,g=s[a],b=d?dg(new _,d,o):c.clone(),j=dg(new _,g,o);if(!b.equals(j))return{update:_e=>{c.lerpVectors(b,j,_e)},start:()=>{c.copy(b)},end:()=>{c.copy(j)}}}function AZ(e,i,s,a,o){if(!e.hasValue(a)||!(a in s))return;let c=i?i[a]:void 0,d=s[a],g=e.getValue(a),b=c?typeof c=="string"?o.getColor(c).clone():new We().setRGB(c.r,c.g,c.b):g.clone(),j=typeof d=="string"?o.getColor(d).clone():new We().setRGB(d.r,d.g,d.b);if(b.equals(j))return;let _e=g.clone();return{update:$=>{e.getValue(a)!==_e&&e.setValue(a,_e),_e.lerpColors(b,j,$)},start:()=>{_e.copy(b)},end:()=>{_e.copy(j)}}}function _Z(e,i,s,a,o){if(!e.hasValue(a)||!(a in s))return;let c=i?i[a]:void 0,d=s[a],g=e.getValue(a),b=c?typeof c=="string"?o.getColor(c).clone():new We().setRGB(c.r,c.g,c.b):g.clone(),j=typeof d=="string"?o.getColor(d).clone():new xr$1(d.r,d.g,d.b,d.a);if(b.equals(j))return;let _e=g.clone();return{update:$=>{e.getValue(a)!==_e&&e.setValue(a,_e),_e.lerpColors(b,j,$)},start:()=>{_e.copy(b)},end:()=>{_e.copy(j)}}}function EZ(e,i,s,a="steps"){if(!e.hasValue(a)||!(a in s))return;let o=[],c=e.getValue(a),d=i?i[a]:c,g=s[a];for(let b=0;b<c.length;++b){let j=d[b],_e=g[b];j!==_e&&o.push({update:$=>{c[b]=Me.lerp(j,_e,$)},start:()=>{c[b]=j},end:()=>{c[b]=_e}})}return o.length?o:void 0}function TZ(e,i,s,a="colors"){if(!e.hasValue(a)||!(a in s))return;let o=[],c=e.getValue(a),d=i?i[a]:c.map(b=>b.toArray()),g=s[a];for(let b=0;b<c.length;++b){let j=[...d[b]],_e=[...g[b]];sm.isEqual(j,_e)||o.push({update:$=>{c[b].fromArray(sm.lerp(j,_e,$))},start:()=>{c[b].fromArray(j)},end:()=>{c[b].fromArray(_e)}})}return o.length?o:void 0}function MZ(e,i,s,a="texture"){if(!e.hasValue(a)||!(a in s))return;let o=e.getNode("mat");if(!o)return;let c=i?i[a]:o,d=s[a],g=[...c.repeat],b=[...c.offset],j=[...d.repeat],_e=[...d.offset];if(!Ro.isEqual(g,j)||!Ro.isEqual(b,_e))return{update:$=>{o.repeat=Ro.lerp(g,j,$),o.offset=Ro.lerp(b,_e,$),o.updateMatrix()},start:()=>{o.repeat=[...g],o.offset=[...b],o.updateMatrix()},end:()=>{o.repeat=[...j],o.offset=[..._e],o.updateMatrix()}}}function CZ(e,i){return{update:()=>{e.transparent=i}}}var EE=new _,tN=new or;function rN(e,i,s,a,o){var st,ut,gt,wt,yt,At;let c=[],d,g,b,j,_e,$,rt;if(e instanceof Jt?(d=pg("position",e,i,s,o),d&&c.push(d),b=ei("rotation",e,i,s,o),b&&c.push(b)):(rt={slide:((st=i.pathSnapping)==null?void 0:st.slide)??((ut=e.updatedPathSnapping)==null?void 0:ut.slide)??((gt=e.dataPatched.pathSnapping)==null?void 0:gt.slide)??0,offset:((wt=i.pathSnapping)==null?void 0:wt.offset)??((yt=e.updatedPathSnapping)==null?void 0:yt.offset)??((At=e.dataPatched.pathSnapping)==null?void 0:At.offset)??0},_e=ei("slide",rt,i.pathSnapping??e.updatedPathSnapping??e.dataPatched.pathSnapping,s.pathSnapping??e.dataPatched.pathSnapping,o),_e&&c.push(_e),$=ei("offset",rt,i.pathSnapping??e.updatedPathSnapping??e.dataPatched.pathSnapping,s.pathSnapping??e.dataPatched.pathSnapping,o),$&&c.push($),!_e&&!$&&(d=_E("position",e,i,s,o),d&&c.push(d),g=_E("scale",e,i,s,o),g&&c.push(g),b=PZ(e,i,s,a,o),b&&c.push(b),j=XB("hiddenMatrix",e,i,s),j&&c.push(j))),d||g||b||j||_e||$){let Ct=e instanceof Jt?()=>{e.updateWorldMatrix(!0)}:()=>{var Tt;e.updateMatrix(),e.hasNonUniformScale&&(e.updateMatrixWorld(),e.updateMatrixWorldSVD()),(Tt=e.parent)!=null&&Tt.matrixWorldFusedFalse&&(e.matrixWorld.multiplyMatrices(e.parent.matrixWorldFusedFalse,e.matrix),e.matrixWorldNeedsUpdate=!1),mn(e)&&Rn(e.parent)&&e.invalidateDownstreamBooleanData(!0),e.updatePathSnapping(Object.assign({},i.pathSnapping,rt))};c.push({update:Ct,start:Ct,end:Ct})}return c}function PZ(e,i,s,a,o){var _e;let c=i!=null&&i.rotation?i.rotation.map($=>(typeof $=="string"?Number(o.getVariable($)??0):$)*Me.DEG2RAD):void 0,d=(_e=s.rotation)==null?void 0:_e.map($=>(typeof $=="string"?Number(o.getVariable($)??0):$)*Me.DEG2RAD);if(!d)return;let g=c?new _().fromArray(c):new _().setFromEuler(e.rotation),b=new _().fromArray(d);if(g.equals(b))return;let j=EE.subVectors(b,g);if(a&&j.toArray().every($=>Math.abs($)<2*Math.PI)){let $=new Qe().setFromEuler(tN.setFromVector3(g)),rt=new Qe().setFromEuler(tN.setFromVector3(b));return{update:st=>{YB($,rt,e.quaternion,st)},start:()=>{e.rotation.setFromVector3(g)},end:()=>{e.rotation.setFromVector3(b)}}}else return{update:$=>{EE.lerpVectors(g,b,$),e.rotation.setFromVector3(EE)},start:()=>{e.rotation.setFromVector3(g)},end:()=>{e.rotation.setFromVector3(b)}}}function iN(e,i,s,a){let o=[];if(!("cloner"in s)||!e.cloner)return o;let c=e.cloner,d="cloner"in i?i.cloner:{},g=s.cloner;x1.forEach(st=>{let ut;st==="count"?ut=ei("count",c.parameters,d,g,a,!0):ut=ia(st,c.parameters,d??{},g,a),ut&&o.push(ut)});let b=DZ(c,d,g,a);b!=null&&b.length&&o.push(...b);let j=OZ(c,d,g,a);j!=null&&j.length&&o.push(...j);let _e=IZ(c,d,g,a);_e!=null&&_e.length&&o.push(..._e);let $=RZ(c,d,g,a);$!=null&&$.length&&o.push(...$);let rt=LZ(c,d,g,a);return rt!=null&&rt.length&&o.push(...rt),o.length&&o.push({update:()=>{c.update()}}),o}function DZ(e,i,s,a){if(e.parameters.type!=="radial")return;let o=i.radial,c=s.radial;if(!c)return;let d=e.parameters.radial,g=[];return b1.forEach(b=>{let j=ia(b,d,o??{},c,a);j&&g.push(j)}),g}function OZ(e,i,s,a){if(e.parameters.type!=="linear")return;let o=i.linear,c=s.linear;if(!c)return;let d=[],g=e.parameters.linear;return S1.forEach(b=>{let j=ia(b,g,o??{},c,a);j&&d.push(j)}),d}function IZ(e,i,s,a){if(e.parameters.type!=="grid")return;let o=i.grid,c=s.grid;if(!c)return;let d=[],g=e.parameters.grid;return w1.forEach(b=>{let j;b==="count"?j=fg(b,g,o??{},c,a,!0):j=ia(b,g,o??{},c,a),j&&d.push(j)}),d}function RZ(e,i,s,a){if(e.parameters.type!=="toObject")return;let o=i.toObject,c=s.toObject;if(!c)return;let d=[],g=e.parameters.toObject;return A1.forEach(b=>{let j;b==="count"?j=ei(b,g,o??{},c,a,!0):j=ia(b,g,o??{},c,a),j&&d.push(j)}),d}function LZ(e,i,s,a){if(!e.parameters.randomness)return;let o=i.randomnessObject,c=s.randomnessObject;if(!c)return;let d=[],g=e.parameters.randomnessObject;return _1.forEach(b=>{let j=ia(b,g,o??{},c,a);j&&d.push(j)}),d}function BZ(e,i){return{update:()=>{e instanceof Ar$1&&(e.fill.enabled=i)}}}function NZ(e,i){return{update:()=>{e instanceof Ar$1&&(e.stroke.enabled=i)}}}function FZ(e,i){return{update:()=>{e instanceof Ar$1&&(e.dropShadow.enabled=i)}}}function kZ(e,i){return{update:()=>{e instanceof Ar$1&&(e.innerShadow.enabled=i)}}}function VZ(e,i){return{update:()=>{e instanceof Ar$1&&(e.backgroundBlur.enabled=i)}}}function zZ(e,i){return{update:()=>{e instanceof Ar$1&&(e.layerBlur.enabled=i)}}}function nN(e,i,s,a,o){let c=[],d,g,b,j,_e,$,rt,st,ut,gt,wt,yt,At,Ct,Tt;if("width"in e&&(d=ei("width",e,i,s,o),d&&c.push(d)),"height"in e&&(g=ei("height",e,i,s,o),g&&c.push(g)),e instanceof Ar$1||e instanceof an){let kt={...i.fill},Pt={...s.fill};kt.enabled!==void 0&&kt.enabled!==Pt.enabled&&(c.push(BZ(e,!0)),kt.enabled||Object.assign(kt,{enabled:!0,color:{...kt.color,a:0}}),Pt.enabled||Object.assign(Pt,{enabled:!0,color:{...Pt.color,a:0}})),b=mg("color",e.fill,kt,Pt,o),b&&c.push(b)}if(e instanceof Ar$1){let kt={...i.stroke},Pt={...s.stroke};(kt.enabled||Pt.enabled)&&(c.push(NZ(e,!0)),kt.enabled||Object.assign(kt,{enabled:!0,color:{...kt.color,a:0}}),Pt.enabled||Object.assign(Pt,{enabled:!0,color:{...Pt.color,a:0}})),j=mg("color",e.stroke,kt,Pt,o),j&&c.push(j),_e=ei("thickness",e.stroke,kt,Pt,o),_e&&c.push(_e)}if(e instanceof Ar$1){let kt={...i.dropShadow},Pt={...s.dropShadow};(kt.enabled||Pt.enabled)&&(c.push(FZ(e,!0)),kt.enabled||Object.assign(kt,{enabled:!0,color:{...kt.color,a:0}}),Pt.enabled||Object.assign(Pt,{enabled:!0,color:{...Pt.color,a:0}})),$=mg("color",e.dropShadow,kt,Pt,o),$&&c.push($),rt=ei("blurRadius",e.dropShadow,kt,Pt,o),rt&&c.push(rt),ut=ei("spread",e.dropShadow,kt,Pt,o),ut&&c.push(ut),st=pg("offset",e.dropShadow,kt,Pt,o),st&&c.push(st)}if(e instanceof Ar$1){let kt={...i.innerShadow},Pt={...s.innerShadow};(kt.enabled||Pt.enabled)&&(c.push(kZ(e,!0)),kt.enabled||Object.assign(kt,{enabled:!0,color:{...kt.color,a:0}}),Pt.enabled||Object.assign(Pt,{enabled:!0,color:{...Pt.color,a:0}})),gt=mg("color",e.innerShadow,kt,Pt,o),gt&&c.push(gt),wt=ei("blurRadius",e.innerShadow,kt,Pt,o),wt&&c.push(wt),At=ei("spread",e.innerShadow,kt,Pt,o),At&&c.push(At),yt=pg("offset",e.innerShadow,kt,Pt,o),yt&&c.push(yt)}if(e instanceof Ar$1||e instanceof an){let kt={...i.backgroundBlur},Pt={...s.backgroundBlur};(kt.enabled||Pt.enabled)&&(c.push(VZ(e,!0)),kt.enabled||Object.assign(kt,{enabled:!0,radius:0}),Pt.enabled||Object.assign(Pt,{enabled:!0,radius:0})),Ct=ei("radius",e.backgroundBlur,kt,Pt,o),Ct&&c.push(Ct)}if(e instanceof Ar$1){let kt={...i.layerBlur},Pt={...s.layerBlur};(kt.enabled||Pt.enabled)&&(c.push(zZ(e,!0)),kt.enabled||Object.assign(kt,{enabled:!0,radius:0}),Pt.enabled||Object.assign(Pt,{enabled:!0,radius:0})),Tt=ei("radius",e.layerBlur,kt,Pt,o),Tt&&c.push(Tt)}if(e instanceof an||e instanceof Bs){let kt=fg("cornerRadius",e,i,s,o);kt&&c.push(kt)}return c}function TE(e,i,s,a,o){let c=[];return e.data.visible&&c.push(...rN(e,i,s,o,a)),e instanceof Jt?c.push(...nN(e,i,s,o,a)):(e.data.visible&&c.push(...iN(e,i,s,a)),mn(e)?(e instanceof ur&&e.data.visible&&c.push(...ZB(e,i,s,a)),e.data.visible&&c.push(...eN(e,i,s,a))):KR(e)?e.data.visible&&c.push(...JB(e,i,s,a)):QR(e)&&c.push(...KB(e,i,s,a))),c.length?{update:d=>{c.forEach(g=>g.update(d))},start:d=>{c.forEach(g=>{var b;return(b=g.start)==null?void 0:b.call(g,d)})},end:d=>{c.forEach(g=>{var b;return(b=g.end)==null?void 0:b.call(g,d)})}}:void 0}var sN=new _;function Yf(e,i,s=!1){var c;let a=[],o=d=>{let g=d.data;delete d.states,d.currentState=null,d.reversibleToState=null,d.currentTransitionEvent=null;for(let b of g.states){let j={...b.data};d.states||(d.states={}),d.states[b.id]=Ba.patch(g,j)}aN(e.scene,d,null,i,g.events.find(b=>b.data.type==="Follow"||b.data.type==="LookAt")!==void 0),oN(e)};e.scene.traverse2D(o),e.traverseChildren(d=>{var _e,$,rt,st,ut,gt;if(s&&((_e=d.rigidBody)==null||_e.setTranslation(d.position0,!0),($=d.rigidBody)==null||$.setRotation(d.rotation0,!0),(rt=d.rigidBody)==null||rt.setLinvel(sN,!0),(st=d.rigidBody)==null||st.setAngvel(sN,!0)),!vt.is(d))return;let g=d.uuid,b=d.data;if(delete d.states,d.uuid===As)return;let j=!1;a.some(wt=>{var yt;return(yt=e.scene.find(g))==null?void 0:yt.isDescendantOf(wt)})?j=!0:((ut=b.physics)==null?void 0:ut.fusedBody)===!0&&b.physics.rigidBody==="dynamic"&&a.push(g),d.data=b,d.currentState=null,d.reversibleToState=null,d.currentTransitionEvent=null;for(let wt of b.states){let yt={...wt.data};e.data.globalPhysics.usePhysics===!0&&b.physics&&(b.physics.rigidBody==="dynamic"||j)&&(wt.data.position!==void 0&&delete yt.position,wt.data.rotation!==void 0&&delete yt.rotation,wt.data.hiddenMatrix!==void 0&&delete yt.hiddenMatrix),d.states||(d.states={}),d.states[wt.id]=Pa.patch(b,yt)}aN(e.scene,d,null,i,b.events.find(wt=>wt.data.type==="Follow"||wt.data.type==="LookAt")!==void 0),oN(e),d instanceof _r$1&&d.frame&&(d.frame.traverse(wt=>o(wt)),(gt=d.uiCanvas)==null||gt.applySize())}),e.frame&&(e.frame.traverse(d=>o(d)),(c=e.uiCanvas)==null||c.applySize())}function oN(e){e.traverseEntity(i=>{for(let s of i.data.events){let a=[];switch(s.data.type){case"Follow":case"MouseHover":case"Scroll":case"MouseDown":case"MouseUp":case"MousePress":case"KeyUp":case"KeyDown":case"KeyPress":case"Collision":a.push(...s.data.actions);break;case"GameControl":for(let o of Object.values(s.data.gameActions))a.push(...o);break;case"DragDrop":a.push(...s.data.dragDropActions.drag,...s.data.dragDropActions.drop);break;case"Conditional":a.push(...s.data.inActions,...s.data.outActions);break}for(let o of a)if(o.data.type==="Create"&&o.data.hideBase==="Yes"){let c=e.scene.find(o.data.object);c&&(c.visible=!1)}}})}function aN(e,i,s,a,o=!1){if(i instanceof ur&&i.removeInteractionGeometry(a),i instanceof Jt?i.changeSelectedState(s,{shared:a},o):i.changeSelectedState(s,{scene:e,shared:a},o),i instanceof ur&&i.updateGeometryGroupsIfNeeded(),i instanceof wr$1&&i.updateCameraState(i.dataPatched,{scene:e,shared:a}),!(i instanceof Jt)){if(i.cloner)for(let c of i.cloner.children)c.playModeVisible=void 0;i.updateVisible(e)}}function CE(e){let i;if(e.easing===5){let{control1:s,control2:a}=e;i=`cubicBezier(
			${s[0]}, ${s[1]}, ${a[0]}, ${a[1]}
		)`}else if(e.easing===6){let{mass:s,stiffness:a,damping:o,velocity:c}=e;i=`spring( ${s}, ${a}, ${o}, ${c} )`}else{let s;switch(e.easing){case 0:s=Ma.linear;break;case 1:s=Ma.ease;break;case 2:s=Ma.easeIn;break;case 3:s=Ma.easeOut;break;case 4:s=Ma.easeInOut;break;default:s=Ma.linear}let[a,o,c,d]=s;i=`cubicBezier( ${a}, ${o}, ${c}, ${d} )`}return{duration:Math.max(e.duration,1e-4),easing:i}}function ME(e){let i={delay:0,loop:e.repeat===-1?!0:e.repeat+1};if(e.repeat===0)i.direction="normal",i.rewind=!1;else switch(e.direction){case"pingpong":i.direction="alternate",i.rewind=!1;break;case"pingpong-rewind":i.direction="alternate",i.rewind=!0;break;default:i.direction="normal",i.rewind=!1;break}switch(i.delay=0,i.endDelay=0,i.startOnceDelay=0,i.pingPongDelayCorrection=0,i.pingPongEndDelayCorrection=0,e.delayDirection){case"start-once":i.startOnceDelay=e.delay;break;case"start":i.delay=e.delay;break;case"end":i.endDelay=e.delay;break;case"start-end":case void 0:i.delay=e.delay,i.endDelay=e.delay;break}return i.direction==="alternate"&&(i.delay/=2,i.endDelay/=2,e.delayDirection==="start"?(i.pingPongDelayCorrection=i.delay,typeof i.loop=="number"&&i.loop%2===0&&(i.pingPongEndDelayCorrection=i.delay)):e.delayDirection==="end"?typeof i.loop=="number"&&i.loop%2!==0&&(i.pingPongEndDelayCorrection=i.endDelay):e.delayDirection==="start-end"&&(i.pingPongDelayCorrection=i.delay,i.pingPongEndDelayCorrection=i.endDelay)),i}var UZ={type:"beginState"},GZ={type:"completeState",isfromEntity:!1},wb=class{constructor(e,i,s,a,o,c){if(this.object=e,this.data=a,this.sharedAssets=o,this.allowSlerp=c,this.targets={t:0},this.firstLoop=!0,this._changeBegan=!1,this._changeCompleted=!0,this.onChange=()=>{this.callback&&(this.callback.update(this.targets.t),this.object.requestRender()),this.targets.t===0||this.targets.t===1?this._changeCompleted||(this._changeCompleted=!0,this._changeBegan=!1,this.onChangeComplete()):(this._changeCompleted&&(this._changeCompleted=!1),this._changeBegan||(this._changeBegan=!0,this.onChangeBegin()))},this.onChangeBegin=()=>{this.object.reversibleToState=this.to.id;let d=this.targets.t>.5?this.from.id:this.to.id;this.object.prevState!==this.object.currentState&&(this.object.prevState=this.object.currentState),this.object.currentState=d,this.object.dispatchEvent({type:"beginState",state:d}),this.object instanceof Jt||this.object.traverseEntity(g=>{g!==this.object&&g instanceof wr$1&&g.dispatchEvent(UZ)})},this.onChangeComplete=()=>{this.firstLoop&&(this.onFirstLoop(),this.firstLoop=!1),this.object.reversibleToState=this.to.id;let d=this.targets.t<.5?this.from.id:this.to.id;this.object.prevState!==this.object.currentState&&(this.object.prevState=this.object.currentState),this.object.currentState=d,this.object.dispatchEvent({type:"completeState",state:d}),this.object instanceof Jt||this.object.traverseEntity(g=>{g!==this.object&&g instanceof wr$1&&g.dispatchEvent(GZ)})},this.onFirstLoop=()=>{this.useCurrentState&&(this.callback=TE(this.object,this.from.data,this.to.data,this.sharedAssets,this.allowSlerp))},i===void 0){let d=Sb(this.object,this.object.currentState===s?this.object.prevState:this.object.currentState);if(!d)throw new Error("Missing property");this.from=d}else{let d=Sb(this.object,i);if(!d)throw new Error("Missing property");this.from=d}if(s===void 0)throw new Error("Missing property");{let d=Sb(this.object,s);if(!d)throw new Error("Missing property");this.to=d}this.useCurrentState=i===void 0||s===void 0,this.params={targets:this.targets,t:1,autoplay:!1,...ME(a),...CE(a),change:this.onChange},this.callback=TE(this.object,i===void 0?{}:this.from.data,s===void 0?{}:this.to.data,this.sharedAssets,this.allowSlerp)}get changeBegan(){return this._changeBegan}get changeCompleted(){return this._changeCompleted}},gg=class extends fr$2{constructor(e,i,s,a){var c;if(super(),this.data=e,this.page=i,this.shared=s,this.condition=a,this.toggleIsForward=!1,this.timelineNeedsRebuild=!1,this.useToggle=!1,this.onTimelineChangeComplete=()=>{var d;this.data.tweens[0].data.direction!=="normal"&&(this.toggleIsForward=!this.toggleIsForward),this.timelineNeedsRebuild!==!1&&((d=this.timeline)==null||d.pause(),this.buildTimeline({isForward:this.toggleIsForward,needsRebuild:!1,isRebuild:!0}),this.timeline.play())},!e.object)throw new Error("Missing property");let o=this.page.scene.find(e.object)??((c=this.page.uiCanvas)==null?void 0:c.find(e.object))??this.page.scene.find2DInUIObjects(e.object);if(!o)throw new Error("Missing property");if(!o.states)throw new Error("Missing property");if(this.object=o,e.tweens.length<2)throw new Error("Missing property");this.tweens=Array(this.data.tweens.length-1),this.startOnceDelay=e.tweens[0].data.delayDirection==="start-once"?e.tweens[0].data.delay:0,this.init()}get playing(){return this.timeline&&this.timeline.paused===!1}init(){this.initialCurrentState=Sb(this.object,this.object.currentState).id,this.toggleIsForward=!1}get currentState(){return this.useToggle?this.initialCurrentState:this.object.currentState}buildTimeline({isForward:e=!0,needsRebuild:i=!1,isRebuild:s=!1}={}){var a,o,c,d;try{let g=ME(this.data.tweens[0].data);s&&typeof g.loop=="number"&&g.loop--,(a=this.timeline)==null||a.pause(),this.timeline=bb.timeline({autoplay:!1,...g,...g.loop===!0||g.loop>1?{timelineChangeComplete:this.onTimelineChangeComplete}:{}});let b=this.tweens.findIndex(j=>j==null?void 0:j.changeBegan);if(i===!0&&(this.timelineNeedsRebuild=!0),e){let j=b===-1?0:b;for(let _e=j;_e<this.data.tweens.length-1;_e++){let $=this.data.tweens[_e],rt=this.data.tweens[_e+1],st;_e===j&&(this.object.wasMovedByUser===!0||((o=this.object.previousAction)==null?void 0:o.playing)===!0)?(st=void 0,this.object instanceof wr$1&&(this.object.wasMovedByUser=!1)):st=$.data.state===void 0?this.currentState:$.data.state;let ut=new wb(this.object,st,rt.data.state===void 0?this.currentState:rt.data.state,rt.data,this.shared,this.data.allowSlerp??!1);b!==-1&&_e===j&&Object.assign(ut.params,{startOnceDelay:0}),this.tweens[_e]=ut,this.timeline.add(ut.params,this.timeline.duration+(_e===j?g.delay:0))}this.timeline.duration+=g.endDelay}else{let j=b===-1?this.data.tweens.length-1:b+1;for(let _e=j;_e>0;_e--){let $=this.data.tweens[_e],rt=this.data.tweens[_e-1],st;_e===j&&(this.object.wasMovedByUser===!0||((c=this.object.previousAction)==null?void 0:c.playing)===!0)?(st=void 0,this.object instanceof wr$1&&(this.object.wasMovedByUser=!1)):st=$.data.state===void 0?this.currentState:$.data.state;let ut=new wb(this.object,st,rt.data.state===void 0?this.currentState:rt.data.state,$.data,this.shared,this.data.allowSlerp??!1);b!==-1&&_e===j&&Object.assign(ut.params,{startOnceDelay:0}),this.tweens[_e-1]=ut,this.timeline.add(ut.params,this.timeline.duration+(_e===j?g.endDelay:0))}this.timeline.duration+=g.delay}}catch(g){g instanceof Error&&console.error(g.message)}((d=this.object.previousAction)==null?void 0:d.playing)===!0&&this.object.previousAction.pause(),this.object.previousAction=this}play(){if(Ut(this.shared,this.condition)===!1||this.playing)return!1;clearTimeout(this.timeoutId);let e=ME(this.data.tweens[0].data).pingPongDelayCorrection;this.timeoutId=window.setTimeout(()=>{try{this.buildTimeline(),this.timeline.play()}catch(i){i instanceof Error&&console.error(i.message)}},this.startOnceDelay+e)}pause(){var e;(e=this.timeline)==null||e.pause(),clearTimeout(this.timeoutId),this.tweens=Array(this.data.tweens.length-1),delete this.timeoutId}stop(){this.pause();let e=this.data.tweens[0].data.state===void 0?this.initialCurrentState:this.data.tweens[0].data.state;this.object instanceof Jt?this.object.changeSelectedState(e,{shared:this.shared}):this.object.changeSelectedState(e,{scene:this.page.scene,shared:this.shared}),this.object.currentState=e}seek(e){var i;this.timeline===void 0&&this.buildTimeline(),(i=this.timeline)==null||i.seek(e*this.timeline.duration,!0)}toggle(e){var i;if(Ut(this.shared,this.condition)===!1)return!1;this.useToggle=!0,clearTimeout(this.timeoutId),this.toggleIsForward=e??!this.toggleIsForward,this.playing?((i=this.timeline)==null||i.pause(),this.buildTimeline({isForward:this.toggleIsForward,needsRebuild:!0}),this.timeline.play()):this.timeoutId=window.setTimeout(()=>{var s;(s=this.timeline)==null||s.pause(),this.buildTimeline({isForward:this.toggleIsForward}),this.timeline.play()},this.startOnceDelay)}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){this.pause()}};function Sb(e,i){var o;let s,a;if(typeof i=="string"?(s=i,a=(o=e.states)==null?void 0:o[s]):i===null&&(s=null,a=e.data),!(s===void 0||a===void 0))return{id:s,data:a}}var jZ={type:"beginState"},lN={type:"completeState",isfromEntity:!1},cN={type:"requestRender"},yg=class extends fr$2{constructor(e,i,s,a){super(),this.data=e,this.page=i,this.shared=s,this.condition=a,this.toggleIsForward=!1,this.useToggle=!1,this.posStart=new _,this.posEnd=new _,this.qStart=new Qe,this.qEnd=new Qe,this.zoomStart=1,this.zoomEnd=1}init(){}get playing(){return this.animation&&this.animation.began&&!this.animation.completed}buildAnimation(e=!1){if(!this.data.animate)return;let i=this.page.scene.find(this.data.targetCamera);if(!i||!i.visible)throw new ReferenceError("Target camera not founded or not visible");let s={t:0};this.posStart.copy(this.page.activeCamera.position),this.qStart.copy(this.page.activeCamera.quaternion),this.zoomStart=this.page.activeCamera.zoom,this.animation=bb({targets:s,t:1,...CE(this.data),update:()=>{s.t===0&&(this.useToggle&&!this.toggleIsForward?(this.posEnd.copy(this.fromCamera.position),this.qEnd.copy(this.fromCamera.quaternion),this.zoomEnd=this.fromCamera.zoom,this.switchCamera(this.fromCamera.uuid)):(this.posEnd.copy(i.position),this.qEnd.copy(i.quaternion),this.zoomEnd=i.zoom,this.fromCamera=this.page.activeCamera,this.switchCamera(i.uuid)),this.page.activeCamera.dispatchEvent(jZ));let a=this.page.activeCamera;a.position.lerpVectors(this.posStart,this.posEnd,s.t),a.quaternion.slerpQuaternions(this.qStart,this.qEnd,s.t),a.zoom=this.zoomStart+(this.zoomEnd-this.zoomStart)*s.t,a.wasMovedBySwitchCameraAction=!0,a.updateMatrix(),a.updateMatrixWorld(),a.updateProjectionMatrix(),a.dispatchEvent(cN),s.t===1&&a.dispatchEvent(lN)}})}switchCamera(e){let i=this.page.activeCamera,s=this.page.scene.find(e);if(!s||!s.visible)throw new ReferenceError("Target camera not founded or not visible");this.page.switchActiveCamera(s),i.dispatchEvent({type:"cameraChange",camera:s})}play(){if(Ut(this.shared,this.condition)===!1)return!1;if(!this.playing&&this.page.activeCamera.uuid!==this.data.targetCamera)try{clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{var e;delete this.timeoutId,this.data.animate?(this.buildAnimation(),(e=this.animation)==null||e.play()):this.switchCamera(this.data.targetCamera)},this.data.delay*1e3)}catch{}}pause(){var e;(e=this.animation)==null||e.pause(),clearTimeout(this.timeoutId),delete this.timeoutId}toggle(e){var i,s;if(Ut(this.shared,this.condition)===!1)return!1;this.useToggle=!0,clearTimeout(this.timeoutId),this.toggleIsForward=e??!this.toggleIsForward;try{this.playing?((i=this.animation)==null||i.pause(),this.buildAnimation(!0),(s=this.animation)==null||s.play()):this.timeoutId=window.setTimeout(()=>{var a,o;delete this.timeoutId,this.data.animate?((a=this.animation)==null||a.pause(),this.buildAnimation(),(o=this.animation)==null||o.play()):(this.toggleIsForward?(this.fromCamera=this.page.activeCamera,this.switchCamera(this.data.targetCamera)):this.switchCamera(this.fromCamera.uuid),this.page.activeCamera.dispatchEvent(lN),this.page.activeCamera.dispatchEvent(cN))},this.data.delay*1e3)}catch{}}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){this.pause(),this.toggleIsForward=!1}},vg=class extends fr$2{constructor(e,i,s,a,o){var j,_e,$;super(),this.page=i,this.animationControls=s,this.shared=a,this.condition=o,this.startOnceDelay=0,this.toggleIsForward=!1;let c=e.object,d=i.scene.find(e.object);d&&Array.isArray(d.identity)&&(c=d.identity[0]),this.data={...e,object:c};let g=this.animationControls.clipIdToAction[e.clipId+"/"+c];this.duration=((j=g==null?void 0:g.getClip())==null?void 0:j.duration)??1;let b=(($=(_e=g==null?void 0:g.getClip())==null?void 0:_e.tracks[0])==null?void 0:$.times.length)??1/0;this.leftFrameTime=this.data.crop[0]/b*this.duration,this.rightFrameTime=this.data.crop[1]/b*this.duration,this.startOnceDelay=e.delay}get playing(){var e;return((e=this.threeAnimAction)==null?void 0:e.isRunning())??!1}play(e=!1){if(Ut(this.shared,this.condition)===!1)return!1;window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{var s;if(this.threeAnimAction=this.animationControls.play(this.data),!this.threeAnimAction)return;this.threeAnimAction.reset(),this.threeAnimAction.time=this.leftFrameTime,this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime;let i=this.data.object;Object.entries(this.animationControls.clipIdToAction).forEach(([a,o])=>{let c=a.split("/")[1];this.threeAnimAction!==o&&c===i&&o.isRunning()&&(e?o.fadeOut(.2):o.stop())}),e&&((s=this.threeAnimAction)==null||s.fadeIn(.2))},this.startOnceDelay)}pause(){this.threeAnimAction&&(this.threeAnimAction.paused=!0),window.clearTimeout(this.timeoutId),delete this.timeoutId}stop(){var e;(e=this.threeAnimAction)==null||e.fadeOut(.2)}seek(e){this.threeAnimAction=this.animationControls.play(this.data),this.threeAnimAction&&(this.threeAnimAction.paused=!0,this.threeAnimAction.time=Me.clamp(this.threeAnimAction.time+1/60*e,this.leftFrameTime,this.rightFrameTime-16e-5),this.animationControls.needsUpdate=!0,this.animationControls.requestRender())}toggle(e,i=!1){if(Ut(this.shared,this.condition)===!1)return!1;this.toggleIsForward=e??!this.toggleIsForward,this.threeAnimAction&&(this.threeAnimAction._loopCount=0),this.playing?this.threeAnimAction&&(this.threeAnimAction.timeScale=this.toggleIsForward?1:-1,this.toggleIsForward?(this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime):(this.threeAnimAction._clip.start=this.rightFrameTime,this.threeAnimAction._clip.duration=this.leftFrameTime)):this.timeoutId=window.setTimeout(()=>{var s;if(this.threeAnimAction=this.animationControls.play(this.data),this.threeAnimAction){this.toggleIsForward?(this.threeAnimAction.time=this.leftFrameTime,this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime):(this.threeAnimAction.time=this.rightFrameTime,this.threeAnimAction._clip.start=this.rightFrameTime,this.threeAnimAction._clip.duration=this.leftFrameTime),this.threeAnimAction.paused=!1,this.threeAnimAction.timeScale=this.toggleIsForward?1:-1;let a=this.data.clipId.split("/")[1];Object.entries(this.animationControls.clipIdToAction).forEach(([o,c])=>{let d=o.split("/")[1];this.threeAnimAction!==c&&d===a&&c.isRunning()&&(i?c.fadeOut(.2):c.stop())}),i&&((s=this.threeAnimAction)==null||s.fadeIn(.2))}},this.startOnceDelay)}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){var i;let e=(i=this.animationControls.clipIdToAction[this.data.clipId+"/"+this.data.object])==null?void 0:i.getClip();e&&(e.duration=this.duration),this.pause()}},xg=class{constructor(e,i,s,a,o){this.data=e,this.page=i,this.eventManager=s,this.shared=a,this.condition=o,this.timeOutId=-1,this.scene=i.scene}dispatch(){if(Ut(this.shared,this.condition)===!1)return!1;this.data.target!==this.page.uuid&&(window.clearTimeout(this.timeOutId),this.timeOutId=window.setTimeout(()=>{this.play()},this.data.delay*1e3))}dispose(){window.clearTimeout(this.timeOutId)}play(){if(this.scene.children.every(i=>i.uuid!==this.data.target))return;this.data.transition==="fade"&&this.data.duration>0&&this.eventManager.eventContext.renderer.renderFromSceneForSceneTransitionPass(this.scene,this.scene.activeCamera,this.data.duration*1e3),this.eventManager.deactivate(),this.eventManager.controlsManager.deactivate();let e=this.scene.activeCamera;this.scene.updatePage(this.data.target),this.scene.traverseVisibleEntity(i=>{i.type==="ParticleSystem"&&(i.sleep(),i.wakeUp(),i.data.autoPlay?i.start():i.stop())}),this.scene.activePage.switchToPlayCamera(),this.scene.activeCamera.copyViewPlaneSize(e),Yf(this.scene.activePage,this.shared),this.eventManager.activate(),this.eventManager.controlsManager.activate(this.eventManager)}},bg=class{constructor(e,i,s,a){this.data=e,this.page=i,this.shared=s,this.condition=a,this.evaluatedCondition=!1}checkConditions(){this.evaluatedCondition=Ut(this.shared,this.condition)}dispatch(){if(this.evaluatedCondition===!1)return!1;let e=this.shared.getVariable(this.data.variableId),i=H0(this.data.expression,this.shared,Yi.typeOfVariable(e));i!==void 0&&this.shared.updateVariable(this.data.variableId,typeof i=="string"?{textValue:i}:i)}dispose(){}},Sg=class{constructor(e,i,s,a){this.data=e,this.page=i,this.shared=s,this.condition=a,this.timeoutId=null}dispatchInner(){if(Ut(this.shared,this.condition)===!1)return!1;let e=this.shared.getDynamicVariablePlayState(this.data.variableId);if(this.data.mode==="PlayPause")this.shared.getDynamicVariableToggleIsForward(this.data.variableId)===void 0&&this.shared.setDynamicVariableToggleIsForward(this.data.variableId,!0),this.shared.setDynamicVariablePlayState(this.data.variableId,e==="Playing"?"Paused":"Playing");else if(this.data.mode==="Play"&&e!=="Playing")this.shared.getDynamicVariableToggleIsForward(this.data.variableId)===void 0&&this.shared.setDynamicVariableToggleIsForward(this.data.variableId,!0),this.shared.setDynamicVariablePlayState(this.data.variableId,"Playing");else if(this.data.mode==="Stop"&&e!=="Stopped")this.shared.setDynamicVariablePlayState(this.data.variableId,"Stopped");else if(this.data.mode==="Pause"&&e!=="Paused")this.shared.setDynamicVariablePlayState(this.data.variableId,"Paused");else if(this.data.mode==="Restart")this.shared.setDynamicVariablePlayState(this.data.variableId,"Restarted");else if(this.data.mode==="Toggle"){let i=this.shared.getDynamicVariableToggleIsForward(this.data.variableId);e==="Playing"?this.shared.setDynamicVariableToggleIsForward(this.data.variableId,i===void 0?!1:!i):(this.shared.setDynamicVariableToggleIsForward(this.data.variableId,!i),this.shared.setDynamicVariablePlayState(this.data.variableId,"Playing"))}}dispatch(){let e=this.data.delay,i=this.shared.getDynamicVariablePlayState(this.data.variableId);this.data.mode==="PlayPause"&&i==="Playing"&&(e=this.data.pauseDelay),e!==0?(this.timeoutId&&window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{this.timeoutId=null,this.dispatchInner()},e)):this.dispatchInner()}dispose(){this.timeoutId&&window.clearTimeout(this.timeoutId)}};function Ut(e,i){if(i===void 0)return!0;if(i.expression.length===0)return!1;let s=H0(i.expression,e,"boolean");return i.negate?!s:!!s}function Mr$1(e,i,s,a,o,c){let d={Audio:[],Video:[],Particles:[],Link:[],Destroy:[],Create:[],Reset:[],Transition:[],SwitchCamera:[],Animation:[],SceneTransition:[],SetVariable:[],DynamicVariablePlay:[]},g=b=>({id:j,data:_e})=>{try{_e.type==="Audio"&&!(c instanceof Jt)?Tn[e.type].includes("Audio")&&d.Audio.push(new ag(j,_e,c,a,b)):_e.type==="Video"&&!(c instanceof Jt)?Tn[e.type].includes("Video")&&d.Video.push(new wg(j,_e,c,a,b)):_e.type==="Particles"?Tn[e.type].includes("Particles")&&d.Particles.push(new lg(_e,s,a,b)):_e.type==="Link"?Tn[e.type].includes("Link")&&d.Link.push(new pb(_e,o.controlsManager,a,b)):_e.type==="Create"?Tn[e.type].includes("Create")&&d.Create.push(new Ag(_e,s,o.controlsManager,a,b)):_e.type==="Destroy"?Tn[e.type].includes("Destroy")&&d.Destroy.push(new cg(_e,s,o.controlsManager,a,b)):_e.type==="Reset"?Tn[e.type].includes("Reset")&&d.Reset.push(new ug(_e,s,a,o,b)):_e.type==="Transition"?Tn[e.type].includes("Transition")&&d.Transition.push(new gg(_e,s,a,b)):_e.type==="SwitchCamera"?Tn[e.type].includes("SwitchCamera")&&d.SwitchCamera.push(new yg(_e,s,a,b)):_e.type==="SceneTransition"?Tn[e.type].includes("SceneTransition")&&d.SceneTransition.push(new xg(_e,s,o,a,b)):_e.type==="Animation"?Tn[e.type].includes("Animation")&&d.Animation.push(new vg(_e,s,o.animationControls,a,b)):_e.type==="SetVariable"?Tn[e.type].includes("SetVariable")&&d.SetVariable.push(new bg(_e,s,a,b)):_e.type==="DynamicVariablePlay"?Tn[e.type].includes("DynamicVariablePlay")&&d.DynamicVariablePlay.push(new Sg(_e,s,a,b)):_e.type==="Conditional"&&Tn[e.type].includes("Conditional")&&(_e.ifActions.forEach(g({expression:_e.condition,negate:!1})),_e.elseActions.forEach(g({expression:_e.condition,negate:!0})))}catch{}};return i.forEach(g()),d}function hr$1(e){Object.values(e).forEach(i=>{i.forEach(s=>{(s instanceof ag||s instanceof wg||s instanceof lg||s instanceof vg||s instanceof gg||s instanceof Ag||s instanceof cg||s instanceof yg||s instanceof xg||s instanceof ug||s instanceof bg||s instanceof Sg)&&s.dispose()})})}function uN(e,i){let s;if("material"in e){let a=e.material;Array.isArray(a)?s=e.material[0].layers.find(o=>o.uuid===i):s=e.material.layers.find(o=>o.uuid===i)}if(s)return s.color.texture.image.img instanceof HTMLVideoElement?s.color.texture.image.img:void 0}var hN=new Map,_g=new Map,Qa=class{constructor(e,i,s){this.data=i,this.delay=0,this.status="stopped";let{layerId:a,loop:o,volume:c,delay:d}=i;if(this.object=s,a===void 0)throw new Error("Missing property");let g=uN(s,a);g&&(this.videoElement=g,this.videoElement.loop=o===1/0,Uh&&(this.videoElement.autoplay=!0),c!==void 0&&(this.videoElement.volume=c)),d!==void 0&&(this.delay=d),_g.has(s.uuid)?_g.get(s.uuid).push(this):_g.set(s.uuid,[this]),hN.set(e,this),this.pause()}mute(){!this.videoElement||(this.videoElement.muted=!0)}unMute(){!this.videoElement||(this.videoElement.muted=!1)}play(e){if(!this.videoElement)return;let i=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);e?(this.mute(),this.delay+=150):i?(this.mute(),window.setTimeout(()=>{this.unMute()},100)):this.unMute(),this.delayTimerId=window.setTimeout(()=>{if(!this.videoElement)return;let s=this.videoElement.play();s!==void 0&&s.then(a=>{}).catch(a=>{this.play()}),this.clearDelay()},this.delay),this.status="playing"}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}pause(){!this.videoElement||(this.videoElement.pause(),this.status="paused")}stop(){!this.videoElement||(this.videoElement.pause(),this.videoElement.currentTime=0,this.status="stopped",this.clearDelay())}playByToggle(){this.data.toggle==="stop"?this.status==="playing"?this.stop():(this.stop(),this.play()):this.data.toggle==="pause"?this.status==="playing"?this.pause():this.play():(this.stop(),this.play())}dispose(){!this.videoElement||(this.stop(),this.videoElement.muted=!0)}},Xf=class{constructor(e){this.data=e}dispatch(){this.data.playVideo?this.pauseVideo(this.data.playVideo):this.data.object?this.pauseAllVideosFromObject(this.data.object):this.pauseAllVideos()}pauseVideo(e){let i=hN.get(e);!i||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{i[this.data.interaction](),this.disposeDelay()},this.data.delay)):i[this.data.interaction]())}pauseAllVideosFromObject(e){let i=_g.get(e);!(i!=null&&i.length)||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{i.forEach(s=>s[this.data.interaction]()),this.disposeDelay()},this.data.delay)):i.forEach(s=>s[this.data.interaction]()))}pauseAllVideos(){let e=[..._g.values()];!e.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{e.forEach(i=>{i.forEach(s=>{s[this.data.interaction]()})}),this.disposeDelay()},this.data.delay)):e.forEach(i=>{i.forEach(s=>{s[this.data.interaction]()})}))}disposeDelay(){clearTimeout(this.timeoutId),delete this.timeoutId}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},wg=class{constructor(e,i,s,a,o){if(this.data=i,this.shared=a,this.condition=o,i.interaction==="play")this.interaction=new Qa(e,i,s);else if(i.interaction==="pause"||i.interaction==="stop")this.interaction=new Xf(i);else throw new Error("Missing property")}dispatchBasic(){if(Ut(this.shared,this.condition)===!1)return!1;this.interaction instanceof Qa?this.interaction.playByToggle():this.interaction.dispatch()}dispatchConditional(){if(Ut(this.shared,this.condition)===!1)return!1;this.interaction instanceof Qa?this.interaction.play():this.interaction.dispatch()}dispose(){this.interaction.dispose()}},dN=(()=>{let e,i,s,a;function o(g){!e&&!fN()&&(i==null?void 0:i.sharedGameControlGlobals.createdObjects.length)>0&&(e=requestAnimationFrame(c)),g&&(i=g,a=g.requestRender)}function c(g){let b=s?g-s:0,j=i.sharedGameControlGlobals.createdObjects,_e=i.sharedGameControlGlobals.nCreatedPerAction,$=j.length,rt=0;for(;rt<$;){let st=j[rt];st.userData.createdTime===void 0&&(st.userData.createdTime=g),st.userData.lifetime===void 0&&st.userData.quantity===void 0||st.userData.lifetime&&g-st.userData.createdTime<st.userData.lifetime||st.userData.quantity&&_e[st.userData.actionId]<=st.userData.quantity?(st.userData.velocity&&(st.position.addScaledVector(st.userData.velocity,b/1e3),st.updateMatrix(),a()),rt++):(_e[st.userData.actionId]>st.userData.quantity&&_e[st.userData.actionId]--,j.splice(rt,1),st.removeFromParent(),i.sharedGameControlGlobals.rapierWorld&&st.rigidBody?(i.sharedGameControlGlobals.colliderToEntity.delete(st.rigidBody.collider(0).handle),i.sharedGameControlGlobals.rapierWorld.removeRigidBody(st.rigidBody)):(st.bvhGeometry=void 0,i.sharedGameControlGlobals.entitiesWithTransformAnim=i.sharedGameControlGlobals.entitiesWithTransformAnim.filter(ut=>ut.bvhGeometry!==void 0)),$--,a())}e=rt>0?requestAnimationFrame(c):void 0,s=rt>0?g:void 0}function d(){fN()?e&&(cancelAnimationFrame(e),e=void 0,s=void 0):o()}return typeof document<"u"&&document.addEventListener("visibilitychange",d),o})();function fN(){return!!document&&document.hidden}var pN=new Qe,HZ=new _,WZ=new _,Ag=class{constructor(e,i,s,a,o){this.data=e,this.page=i,this.controlsManager=s,this.shared=a,this.condition=o,this.intervalId=null,this.timeoutIdQueue=[],this.uniqueId=Me.generateUUID(),this.dispatch=()=>{if(Ut(this.shared,this.condition)===!1)return!1;this.data.delay?this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3)):this.dispatchInner()},this.dispatchFromStart=()=>{if(Ut(this.shared,this.condition)===!1)return!1;this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3))},this.dispatchThrottled=Kw(this.dispatch,1e3/this.data.creationSpeed),this.dispatchStart=()=>{this.intervalId===null&&(this.intervalId=window.setInterval(this.dispatch,1e3/this.data.creationSpeed))},this.dispatchStop=()=>{this.intervalId!==null&&(window.clearInterval(this.intervalId),this.intervalId=null)},this.dispatchInner=()=>{this.timeoutIdQueue.shift();let d=new Vr(this.object);if(d.playModeVisible=!0,d.expand(),this.data.coordinateSystem!=="world"){let b=this.data.coordinateSystem,j=this.page.scene.find(b);j&&(j.updateMatrixWorldSVD(),d.hiddenMatrix.copy(j.matrixWorldRigid))}d.position.fromArray(this.data.position),d.rotation.fromArray(this.data.rotation),d.updateMatrix(),this.page.add(d);let g=this.controlsManager.sharedGameControlGlobals;g.createdObjects.push(d),g.nCreatedPerAction[this.uniqueId]===void 0?g.nCreatedPerAction[this.uniqueId]=1:g.nCreatedPerAction[this.uniqueId]++,d.updateWorldMatrix(!0,!0),d.traverseObject(this.traverseObjectCB),dN(),this.controlsManager.requestRender()},this.traverseObjectCB=d=>{var _e,$,rt,st;d.hasNonUniformScale&&d.updateMatrixWorldSVD();let g;if(this.controlsManager.sharedGameControlGlobals.rapierWorld){if(d instanceof Ji)if(d.objectForSample){if(d.objectForSample.dataPatched.physics.fusedBody)return;g=d.object}else return d.object.dataPatched.physics.fusedBody===!0&&d.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(d instanceof Vr)g=d.object;else if(g=d,(_e=g.dataPatched.cloner)==null?void 0:_e.hideBase)return!0}else{if(d instanceof Ji)return;d instanceof Vr?g=d.object:g=d}this.data.destroy==="Time"?d.userData.lifetime=this.data.lifetime*1e3:this.data.destroy==="Quantity"&&(d.userData.quantity=this.data.destroyAfterQuantity,d.userData.actionId=this.uniqueId);let b=new _().fromArray(this.data.velocity),j=g.dataPatched;if(!(j.physics.enabled==="visibility"?!j.visible:!j.physics.enabled)&&(this.controlsManager.sharedGameControlGlobals.rapierWorld?(this.controlsManager.addRigidBody(d,g,{fromCreate:!0,dynamic:this.data.dynamic}),this.data.destroy==="Collision"&&(($=d.rigidBody)==null||$.collider(0).setActiveEvents(1),d.userData.hasCollisionDestroy=!0),d.matrixWorld.decompose(HZ,pN,WZ),b.applyQuaternion(pN),this.data.velocity.some(ut=>ut!==0)&&this.data.dynamic&&((rt=d.rigidBody)==null||rt.setLinvel(b.divideScalar(this.controlsManager.pixelsPerMeter),!0))):("geometry"in d.object&&this.controlsManager.addBoundsTree(d),this.data.velocity.some(ut=>ut!==0)&&this.data.dynamic&&(d.userData.velocity=b)),((st=g.dataPatched.physics)==null?void 0:st.fusedBody)===!0))return!0};let c=this.page.scene.find(this.data.object);if(!c)throw new Error("Missing Property");if(this.object=c,this.data.coordinateSystem!=="world"&&!this.page.scene.find(this.data.coordinateSystem))throw new Error("Missing Property");dN(s)}dispose(){this.intervalId!==null&&(window.clearInterval(this.intervalId),this.intervalId=null),this.timeoutIdQueue.forEach(e=>window.clearTimeout(e)),this.dispatchThrottled.cancel(),this.page.remove(...this.controlsManager.sharedGameControlGlobals.createdObjects),this.controlsManager.sharedGameControlGlobals.createdObjects=[]}},IE=200,PE=.02,DE=.3,qZ=65;new _;var mN=new _,gN=new _,YZ=new _,Bn=new _,Kn=new _,lc=new _,OE=new ce$1,yN=new ce$1,XZ=new ce$1;new ce$1;var po=new Qe,Ka=new Qe,na=new or(0,0,0,"YXZ"),QZ=new _(1,0,0),mo=new _(0,1,0),KZ=new _(0,0,1),vN=new _(1,1,1);new Br;var ZZ=1,JZ=.025,$Z=16e-6,xN=12,eJ=20,en=new Di,ks=new Wt,tJ={type:"requestRender"},rJ={type:"updateMatrix"},bN=Math.PI/6,Ab=class extends fr$2{constructor(e,i,s,a,o,c,d,g,b){var ut;super(),this.object=e,this.domElement=i,this.data=s,this.gloabalPhysics=a,this.controlsManager=o,this.cameraFollow=c,this.camera=d,this.page=g,this.sharedAssets=b,this.enableDamping=!0,this.hiddenMatrix0=new ce$1,this.target0=new _,this.zoom0=1,this.rotForce=1,this.moveForce=1,this.pixelsPerMeter=IE,this.euler0=new or(0,0,0,"YXZ"),this.position0Cam=new _,this.quat0Cam=new Qe,this.scale0Cam=new _,this.hiddenMatrix0Cam=new ce$1,this.threshEndTranslate=.01,this.threshEndRotate=1e-8,this.threshEndRotVel=.005,this.collider={type:"capsule",radius:40,segment:new Di(new _(0,-40,0),new _(0,40,0)),matrix:new ce$1,position:new _,rotation:new Qe},this.euler=new or(0,0,0,"YXZ"),this.eulerDelta=new _,this.lastPosition=new _,this.lastCameraQuaternion=new Qe,this.lastCameraPosition=new _,this.PI_2=Math.PI/2,this.prevMouse=new z$1,this.velocityTarget=new _,this.velocity=new _,this.directionXZ=new _,this.rotVelocityStick=new _,this.rotVelocityTarget=new _,this.rotVelocity=new _,this.rotDirection=new _,this.nonColliderRotOffset=new ce$1,this.nonColliderPosOffset=new ce$1,this.firstPointerId=-1,this.rot=new _,this.path=[],this.movementState={moveNegZ:0,movePosZ:0,moveNegX:0,movePosX:0,moveNegY:0,movePosY:0,rotPosX:0,rotNegX:0,rotPosY:0,rotNegY:0,jump:0,run:0},this.vrEulerYOffset=0,this.onObject=!1,this.actionState={},this.keyAssignments=[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX","ArrowUp"],["rotPosY","ArrowLeft"],["rotNegX","ArrowDown"],["rotNegY","ArrowRight"],["jump"," "]],this.collisionEnabled=!0,this.offsetMatrix=new ce$1,this.objectToTarget=new _,this.objectToTarget0=new _,this.objectToCamXZ=new _,this.objectToCamXZ0=new _,this.targetToCamera=new _,this.targetToCamera0=new _,this.cameraPolarAxis0=new _,this.targetPos=new _,this.targetQuat=new Qe,this.lerpFactorPos=new _().setScalar(.3),this.lerpFactorPosStart=.3,this.lerpFactorPosEnd=.3,this.lerpFactorRotStart=.3,this.lerpFactorRotEnd=.3,this.lerpFactorPosCamera=.3,this.lerpFactorRotCamera=.3,this.objXZQuat=new Qe,this.objXZQuatInv=new Qe,this.objXZRotMat=new ce$1,this.isFirstPerson=!1,this.didHit=!1,this.groundVelocity=new _,this.pushedVelocity=new _,this.groundYRotation=0,this.objectRealQuat=new Qe,this.colliderWorldQuat=new Qe,this.groundNormal=new _,this.groundTilt=new Qe,this.groundTiltInv=new Qe,this.lastHitObj=null,this.isFirstFrame=!0,this.rotationAccumWhenOrientWithCamera=0,this.navMeshPathDest=null,this.position=new _,this.quaternion=new Qe,this.scale=new _,this.initialAction=!0,this.onPointerDown=gt=>{gt.target!==this.domElement||this.firstPointerId!==-1||(this.firstPointerId=gt.pointerId,this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),this.rotBy!=="keys"&&!Ii&&(!Zw||Jw>=15.5)&&this.domElement.requestPointerLock(),this.prevMouse.set(gt.clientX,gt.clientY))},this.onPointerUp=gt=>{this.firstPointerId=-1,this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),gt.pointerType==="mouse"&&this.domElement.ownerDocument.exitPointerLock()},this.onPointerMove=gt=>{if(gt.pointerId!==this.firstPointerId)return;let wt=gt.clientX-this.prevMouse.x,yt=gt.clientY-this.prevMouse.y;this.prevMouse.set(gt.clientX,gt.clientY),gt.pointerType==="mouse"&&this.rotBy!=="keys"&&(Zw&&Jw<15.5&&!Ii?(this.eulerDelta.y=-wt*this.mouseOrbitSensitivity,this.eulerDelta.x=-yt*this.mouseOrbitSensitivity):(this.eulerDelta.y=-gt.movementX*this.mouseOrbitSensitivity,this.eulerDelta.x=-gt.movementY*this.mouseOrbitSensitivity)),gt.pointerType!=="mouse"&&this.rotByTouch==="drag"&&(this.eulerDelta.y=-wt*this.mouseOrbitSensitivity*5,this.eulerDelta.x=-yt*this.mouseOrbitSensitivity*5),this.controlsManager.requestRender()},this.onPointerlockChange=gt=>{this.domElement.ownerDocument.pointerLockElement===this.domElement?Ab.isLocked=!0:Ab.isLocked=!1},this.onPointerlockError=()=>{console.error("SPE.GameControls: Unable to use Pointer Lock API")},this.handleVisibilityChange=()=>{if(document!=null&&document.hidden)for(let gt in this.movementState)this.movementState[gt]=0},this.onKeyDown=gt=>{!(gt.target instanceof HTMLInputElement)&&(gt.code==="ArrowLeft"||gt.code==="ArrowUp"||gt.code==="ArrowRight"||gt.code==="ArrowDown"||gt.code==="Space")&&gt.preventDefault();for(let wt of this.keyAssignments)if(gt.key.toUpperCase()===wt[1]||gt.key===wt[1]){this.movementState[wt[0]]=1;break}this.controlsManager.requestRender()},this.onKeyUp=gt=>{for(let wt of this.keyAssignments)if(gt.key.toUpperCase()===wt[1]||gt.key===wt[1]||gt.code.slice(3,gt.code.length).toUpperCase()===wt[1]){this.movementState[wt[0]]=0;break}},this.copyVRGamePadValues=(gt,wt)=>{for(let yt=2;yt<4;yt++){let At=gt.axes[yt];wt===0?yt===2?this.movementState.movePosX=At:this.movementState.movePosZ=At:(gt.buttons[3].pressed?this.movementState.jump=1:this.movementState.jump=0,yt===2?(Math.abs(this.movementState.rotPosY)<.3&&Math.abs(At)>=.3&&(this.vrEulerYOffset+=At<0?1:-1),this.movementState.rotPosY=At):this.moveMode==="fly"&&(this.movementState.moveNegY=At))}},this.sharedGameControlGlobals=o.sharedGameControlGlobals,e===d&&(this.isFirstPerson=!0),this.hiddenMatrix0.copy(this.object.hiddenMatrix),this.object.parent?this.object.hiddenMatrix.copy(this.object.parent.matrixWorld).invert():this.object.hiddenMatrix.identity(),this.object.matrix.copy(this.object.matrixWorld),this.object.matrix.decompose(this.position,this.quaternion,this.scale),this.euler0.setFromQuaternion(this.quaternion,"YXZ");let j=this.euler0.clone(),_e=j.y;if(this.objectRealQuat.copy(this.quaternion),j.y=0,this.quaternion.setFromEuler(j),this.objXZQuat.copy(this.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.quaternion),j.set(0,_e,0),this.quaternion.setFromEuler(j),this.rot.setFromEuler(j),this.object.matrixAutoUpdate=!1,(this.isFirstPerson||this.cameraFollow===!0)&&(this.target0.copy(this.camera.getTarget()),this.zoom0=this.camera.zoom),this.cameraFollow===!0){this.position0Cam.copy(this.camera.position),this.quat0Cam.copy(this.camera.quaternion),this.scale0Cam.copy(this.camera.scale),this.hiddenMatrix0Cam.copy(this.camera.hiddenMatrix),this.camera.parent?(this.camera.hiddenMatrix.copy((ut=this.camera)==null?void 0:ut.parent.matrixWorld),this.camera.matrix.copy(this.camera.matrixWorld)):this.camera.hiddenMatrix.identity(),this.camera.matrix.copy(this.camera.matrixWorld),this.camera.matrix.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.matrixAutoUpdate=!1,this.offsetMatrix.copy(this.object.matrix).invert().multiply(this.camera.matrix);let gt=new _(0,0,-1).applyQuaternion(this.camera.quaternion),wt=new _().subVectors(this.position,this.camera.position);this.objectToCamXZ.copy(wt),this.objectToCamXZ.y=0,this.objectToCamXZ0.copy(this.objectToCamXZ);let yt,At;Math.abs(gt.y)<1e-6?(wt.y=0,gt.y=0,At=wt.projectOnVector(gt)):wt.y/gt.y>0?At=gt.multiplyScalar(wt.y/gt.y):At=gt.multiplyScalar(wt.length()),this.targetToCamera0.copy(At).negate(),yt=this.camera.position.clone().add(At),this.objectToTarget0.subVectors(yt,this.position);let Ct=new or().setFromQuaternion(this.camera.quaternion,"YXZ");this.cameraPolarOffset=-Ct.x,Ct.x=0,Ct.z=0,Ct.y-=Math.PI/2,this.cameraPolarAxis0.set(0,0,-1).applyEuler(Ct)}if(this.object instanceof wr$1&&(this.object.matrixAutoUpdate=!1),this.euler.setFromQuaternion(this.quaternion,"YXZ"),this.rotByTouch=s.rotByTouch??"joystick",this.rotBy=s.rotBy??"keys",this.rotationMode=s.rotationMode??"normal",this.moveMode=s.moveMode??"walk",this.collisionEnabled=s.collisionEnabled,this.speedTranslate=(s.speedTranslate??250)*ZZ,this.speedOrbit=(s.speedRotate??100)*JZ,this.mouseOrbitSensitivity=(s.speedRotate??100)*$Z,this.keyAssignments=s.keyAssignments.map(gt=>{let wt=[gt[0],gt[1]];return wt[1]==="▲"?wt[1]="ArrowUp":wt[1]==="◀"?wt[1]="ArrowLeft":wt[1]==="▼"?wt[1]="ArrowDown":wt[1]==="▶"?wt[1]="ArrowRight":wt[1]==="⇧"?wt[1]="Shift":wt[1]==="↵"?wt[1]="Enter":wt[1]==="Space"?wt[1]=" ":wt[1]==="⌘"?wt[1]="Meta":wt[1]==="Ctrl"?wt[1]="Control":wt[1]==="Esc"&&(wt[1]="Escape"),wt}),s.rotBy==="mouse"){let gt;gt=this.keyAssignments.findIndex(wt=>wt[0]==="rotNegX"),gt!==-1&&(this.keyAssignments[gt][1]=""),gt=this.keyAssignments.findIndex(wt=>wt[0]==="rotPosX"),gt!==-1&&(this.keyAssignments[gt][1]=""),gt=this.keyAssignments.findIndex(wt=>wt[0]==="rotPosY"),gt!==-1&&(this.keyAssignments[gt][1]=""),gt=this.keyAssignments.findIndex(wt=>wt[0]==="rotNegY"),gt!==-1&&(this.keyAssignments[gt][1]="")}this.lerpFactorPosStart=1-.02**(1/((s.delayPos[0]??.3)*60)),this.lerpFactorPosEnd=1-.02**(1/((s.delayPos[1]??.3)*60)),this.lerpFactorPos.setScalar(this.lerpFactorPosStart),this.lerpFactorRotStart=1-.02**(1/((s.delayRot[0]??.3)*60)),this.lerpFactorRotEnd=1-.02**(1/((s.delayRot[1]??.3)*60)),this.lerpFactorPosCamera=1-.02**(1/((s.delayPosCamera??.3)*60)),this.lerpFactorRotCamera=1-.02**(1/((s.delayRotCamera??.3)*60)),this.gravity=(this.gloabalPhysics.gravity??Bl.defaultData.gravity)*xN,this.usePhysics=this.gloabalPhysics.usePhysics??Bl.defaultData.usePhysics,this.jumpPower=s.jumpPower*eJ,this.resetYPosition=this.position.y+Math.abs(s.resetYPosition)*(this.gravity>0?1:-1),this.alignToGround=s.alignToGround??!1,this.orientMode=s.autoOrientMove?s.orientMode:"none",this.orientWith=s.orientWith??cd.defaultDataThirdPerson.orientWith,this.slopeThresh=qZ*Math.PI/180,s.collider.type==="capsule"?(this.collider.radius=s.collider.radius,this.collider.segment.start.y=s.collider.height/2-s.collider.radius,this.collider.segment.end.y=-this.collider.segment.start.y,this.offset=s.collider.height*PE/this.pixelsPerMeter,this.stepThresh=s.collider.height*DE/this.pixelsPerMeter,this.colliderHeight=s.collider.height):s.collider.type==="sphere"?(this.collider.radius=s.collider.radius,this.collider.segment.start.y=0,this.collider.segment.end.y=0,this.offset=2*s.collider.radius*PE/this.pixelsPerMeter,this.stepThresh=2*s.collider.radius*DE/this.pixelsPerMeter,this.colliderHeight=s.collider.radius*2):(this.offset=s.collider.height*PE/this.pixelsPerMeter,this.stepThresh=s.collider.height*DE/this.pixelsPerMeter,this.colliderHeight=s.collider.height),this.collider.type=s.collider.type;let $=new _().fromArray(s.collider.position),rt=new Qe().setFromEuler(new or().fromArray([...s.collider.rotation,"XYZ"]));this.collider.position.copy($).multiply(this.scale),this.collider.rotation.copy(rt),this.collider.matrix.compose($,rt,vN),s.cameraXAxis!==void 0&&(this.cameraXAxis=s.cameraXAxis,this.cameraYAxis=s.cameraYAxis,this.minPolarAngle=s.cameraRotXLimits[0],this.maxPolarAngle=s.cameraRotXLimits[1],this.minAzimuthAngleRel=s.cameraRotYLimits[0],this.maxAzimuthAngleRel=s.cameraRotYLimits[1]),this.forwardDir=s.forwardDirection??"-z",this.runMultiplier=s.runMultiplier??2;let st=s.navmesh.destinationHelperRadius*2;if(st>0){let gt=new Ue;gt.push({fi:0,data:{...Hr.defaultData("light","phong"),alpha:0},id:"layer1"}),gt.push({fi:0,data:{...Hr.defaultData("color"),color:s.navmesh.destinationHelperColor,alpha:s.navmesh.destinationHelperColor.a},id:"layer2"});let wt=new Ga({layers:gt},{scene:this.page.scene,shared:this.sharedAssets});this.navMeshPathDest=new sr(O0.create({parameters:{width:st,height:st/10,hollow:.7}}),wt),this.navMeshPathDest.material.userData.opacity0=s.navmesh.destinationHelperColor.a}this.activate()}reset(e=!1){if(this.object.hiddenMatrix.copy(this.hiddenMatrix0),e){this.object.updateMatrix(),this.object.updateMatrixWorld(),this.object.matrix.copy(this.object.matrixWorld),this.object.matrix.decompose(this.position,this.quaternion,this.scale),this.object.parent?this.object.hiddenMatrix.copy(this.object.parent.matrixWorld).invert():this.object.hiddenMatrix.identity();let i=new or().setFromQuaternion(this.quaternion,"YXZ"),s=i.y;this.objectRealQuat.copy(this.quaternion),i.y=0,this.quaternion.setFromEuler(i),this.objXZQuat.copy(this.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.quaternion),i.set(0,s,0),this.quaternion.setFromEuler(i),this.rot.setFromEuler(i),this.euler.setFromQuaternion(this.quaternion,"YXZ"),this.velocityTarget.set(0,0,0),this.velocity.set(0,0,0)}else this.object instanceof wr$1?this.object.matrixAutoUpdate=!0:this.object.updateMatrix();this.cameraFollow===!0&&(this.camera.quaternion.copy(this.quat0Cam),this.camera.position.copy(this.position0Cam),this.camera.scale.copy(this.scale0Cam),this.camera.hiddenMatrix.copy(this.hiddenMatrix0Cam),this.camera.matrixAutoUpdate=!0),this.controlsManager.requestRender()}activate(){this.instantiateActions(),this.domElement.ownerDocument.addEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.addEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.addEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.addEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this.onPointerlockError),this.domElement.ownerDocument.addEventListener("visibilitychange",this.handleVisibilityChange)}deactivate(){this.disposeActions(),this.domElement.ownerDocument.removeEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.removeEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.removeEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this.onPointerlockError),this.domElement.ownerDocument.removeEventListener("visibilitychange",this.handleVisibilityChange)}dispose(){var e;this.deactivate(),(e=this.navMeshPathDest)!=null&&e.parent&&this.page.remove(this.navMeshPathDest)}instantiateActions(){let e=this.data,i=this.sharedAssets;e.gameActions!==void 0&&(this.actions={},ld.list.forEach(s=>{this.actions[s]=Mr$1({...e,disabled:!1,type:"GameControl"},e.gameActions[s],this.page,i,this.controlsManager.eventManager,this.object)})),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),this.dispatchStartEvent("idle"),this.initialAction&&(this.initialAction=!1)}disposeActions(){this.initialAction=!1,this.dispatchStopEvent("idle"),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),hr$1(this.actions.idle),hr$1(this.actions.move),hr$1(this.actions.run),hr$1(this.actions.jump)}dispatchStartEvent(e){this.actions[e]!==void 0&&(this.actionState[e]||(this.actionState[e]=!0,this.actions[e].Transition.forEach(i=>{i.play()}),this.actions[e].Animation.forEach(i=>{i.play(this.initialAction===!1)}),this.actions[e].Create.forEach(i=>{i.dispatchStart()}),this.actions[e].Audio.forEach(i=>{i.dispatchGameControl("start")}),this.actions[e].Particles.forEach(i=>{i.dispatchGameControl("start")})))}dispatchStopEvent(e){this.actions[e]!==void 0&&(!this.actionState[e]||(this.actionState[e]=!1,this.actions[e].Transition.forEach(i=>{i.stop(),i.object.currentState!==null&&i.object.changeSelectedState(null,{scene:this.page.scene,shared:this.sharedAssets})}),this.actions[e].Create.forEach(i=>{i.dispatchStop()}),this.actions[e].Audio.forEach(i=>{i.dispatchGameControl("stop")}),this.actions[e].Particles.forEach(i=>{i.dispatchGameControl("stop")})))}get colliderWorldPosition(){return Bn.copy(this.collider.position).applyQuaternion(this.objectRealQuat).add(this.position)}update(e,i,s){var g,b,j,_e,$,rt,st,ut,gt;if(this.gravity<0?this.position.y<this.resetYPosition:this.position.y>this.resetYPosition)return this.reset(!0),!0;this.sharedGameControlGlobals.gamePads.forEach(this.copyVRGamePadValues);let a=(this.isFirstFrame?16.6:e)/1e3;this.isFirstFrame&&(this.isFirstFrame=!1);let o=a*60,c=!1;if(this.usePhysics&&this.collisionEnabled){let wt=Kn.set(0,(this.velocity.y===0?this.pixelsPerMeter*Math.max(Math.abs(this.gravity)/(10*xN),1)*(this.gravity>0?1:-1):this.velocity.y)*a,0).divideScalar(this.pixelsPerMeter),yt=this.sharedGameControlGlobals.rapierWorld.castShape(this.colliderWorldPosition.divideScalar(this.pixelsPerMeter),this.colliderWorldQuat,wt,(g=this.object.rigidBody)==null?void 0:g.collider(0).shape,1,!1,16,void 0,void 0,this.object.rigidBody);if(yt){this.onObject=!0,this.groundNormal.set(yt.normal2.x,yt.normal2.y,yt.normal2.z).applyQuaternion(this.colliderWorldQuat).negate(),this.alignToGround&&this.groundTiltAdjustment(this.groundNormal),Math.acos(this.groundNormal.y)<this.slopeThresh&&(c=!0),((b=yt.collider.parent())==null?void 0:b.bodyType())===0&&Math.acos(this.groundNormal.y)*(180/Math.PI)>45&&(this.onObject=!1);let At=yt.collider.parent();this.groundYRotation=0,this.groundVelocity.set(0,0,0);for(let Ct of this.sharedGameControlGlobals.entitiesWithTransformAnim)if(Ct.rigidBody===At&&Ct.userData.isFollowingObj!==this.object.uuid){(Ct.hasNonUniformScale?Ct.matrixWorldRigid:Ct.matrixWorld).decompose(Bn,Ka,Kn),this.groundVelocity.subVectors(Bn,Ct.prevT),this.object.getWorldPosition(Kn).add(this.collider.position).sub(Bn),this.groundYRotation=na.setFromQuaternion(Ka).y-Ct.prevR.y,lc.copy(Kn).applyAxisAngle(mo,this.groundYRotation),this.groundVelocity.add(lc.sub(Kn)).divideScalar(a);break}}else this.onObject=!1}if(this.moveMode==="walk"&&this.collisionEnabled&&(this.movementState.jump===1&&this.onObject&&(this.velocityTarget.y=this.jumpPower,this.movementState.jump=0,this.dispatchStopEvent("idle"),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),this.dispatchStartEvent("jump"),this.onObject=!1),this.onObject?this.velocityTarget.y/=2:this.velocityTarget.y+=this.gravity*o),this.moveMode==="fly"&&(this.velocityTarget.y=(this.movementState.movePosY-this.movementState.moveNegY)*this.speedTranslate),this.directionXZ.z=this.movementState.movePosZ-this.movementState.moveNegZ,this.directionXZ.x=this.movementState.movePosX-this.movementState.moveNegX,this.forwardDir==="+z"&&this.directionXZ.multiplyScalar(-1),this.directionXZ.manhattanLength()>0&&(this.path=[]),this.navMeshPathDest){let wt=this.navMeshPathDest.material;if(this.moveMode==="walk"&&this.path.length>1){this.navMeshPathDest.position.copy(this.path[this.path.length-1]),this.navMeshPathDest.parent||this.page.add(this.navMeshPathDest);let yt=Bn.subVectors(this.path[1],this.position),At=Kn.subVectors(this.path[1],this.path[0]);yt.dot(At)<0?this.path.shift():(this.directionXZ.x=At.x,this.directionXZ.z=At.z),wt.opacity=wt.userData.opacity0}else wt.opacity-=.05*wt.userData.opacity0,this.navMeshPathDest.material.opacity<=0&&this.navMeshPathDest.parent&&this.page.remove(this.navMeshPathDest)}this.directionXZ.normalize(),this.movementState.run?this.moveForce=this.runMultiplier:this.moveForce=1,this.velocityTarget.z=this.directionXZ.z*this.speedTranslate*this.moveForce,this.velocityTarget.x=this.directionXZ.x*this.speedTranslate*this.moveForce,(this.moveMode==="walk"?this.velocityTarget.x+this.velocityTarget.z===0:this.velocityTarget.manhattanLength()===0)?this.lerpFactorPos.setScalar(this.lerpFactorPosEnd):this.lerpFactorPos.setScalar(this.lerpFactorPosStart),this.moveMode==="walk"&&(this.lerpFactorPos.y=1),this.didHit===!1&&this.pushedVelocity.manhattanLength()===0||this.usePhysics===!1?(this.velocity.x+=(this.velocityTarget.x-this.velocity.x)*(1-(1-this.lerpFactorPos.x)**o),this.velocity.y+=(this.velocityTarget.y-this.velocity.y)*(1-(1-this.lerpFactorPos.y)**o),this.velocity.z+=(this.velocityTarget.z-this.velocity.z)*(1-(1-this.lerpFactorPos.z)**o)):this.velocity.copy(this.velocityTarget),(this.moveMode==="walk"?this.velocity.x**2+this.velocity.z**2<this.speedTranslate:this.velocity.lengthSq()<this.speedTranslate)?(this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.onObject&&(this.dispatchStopEvent("jump"),this.dispatchStartEvent("idle"))):(this.dispatchStopEvent("idle"),this.onObject&&(this.dispatchStopEvent("jump"),this.movementState.run?(this.dispatchStopEvent("move"),this.dispatchStartEvent("run")):(this.dispatchStopEvent("run"),this.dispatchStartEvent("move"))));let d=YZ.copy(this.velocity);if(this.orientMode!=="none"&&this.isFirstPerson===!1){let wt=Kn.copy(d);wt.y=0,d.set(0,d.y,wt.length()*(this.forwardDir==="+z"?1:-1))}if(this.directionXZ.manhattanLength()>0&&this.orientMode!=="none")if(this.orientWith==="camera"&&this.path.length<=1){let wt=Bn;this.camera.getWorldDirection(wt);let yt=lc.copy(mo).multiplyScalar(wt.dot(mo));wt.sub(yt);let At=Kn.copy(this.directionXZ);At.x*=-1,this.rot.y=wt.angleTo(At)*(wt.cross(At).y>0?-1:1)+this.rotationAccumWhenOrientWithCamera}else this.rot.y=(this.path.length>1?0:this.euler.y)+Math.atan2(-this.directionXZ.z,this.directionXZ.x)+Math.PI/2*(this.forwardDir==="+z"?1:-1);if(na.setFromVector3(this.rot),this.moveMode==="walk"&&(na.x=0),d.applyEuler(na),c&&(Ka.setFromUnitVectors(mo,this.groundNormal),d.applyQuaternion(Ka)),s){let wt=na.set(0,this.vrEulerYOffset*bN,0);s.applyEuler(wt),d.x+=s.x,d.z+=s.z,this.nonColliderPosOffset.elements[13]+=s.y*a}if(this.usePhysics===!0){let wt=Kn;this.pushedVelocity.set(0,0,0);for(let yt of this.sharedGameControlGlobals.entitiesWithTransformAnim){let At=lc.setFromMatrixPosition(yt.matrixWorld).sub(yt.prevT).divideScalar(a).divideScalar(this.pixelsPerMeter),Ct=yt.rigidBody.collider(0).castCollider(At,this.object.rigidBody.collider(0),Bn.copy(d).divideScalar(this.pixelsPerMeter),a,!1);At.multiplyScalar(this.pixelsPerMeter);let Tt=vt.is(yt)?yt:yt.object;if(Ct!==null&&this.lastHitObj!==Tt){let kt;yt instanceof Vr&&(kt=yt);let Pt=this.sharedGameControlGlobals.entityToCollisionEvents[Tt.uuid];if(Pt)for(let It of Pt)It.data.target==="character"&&(It.dispatch(kt),Tt.dispatchEvent(_b));this.lastHitObj=Tt}if(Ct!==null){this.pushedVelocity.copy(At),wt.copy(Ct.normal1).applyQuaternion(yt.quaternion);break}}if(this.pushedVelocity.manhattanLength()!==0){let yt=wt.dot(d);yt<0&&d.addScaledVector(wt,-yt),d.add(this.pushedVelocity)}else d.add(this.groundVelocity)}if(this.rotDirection.y=Number(this.movementState.rotPosY)-Number(this.movementState.rotNegY),this.rotDirection.x=Number(this.movementState.rotPosX)-Number(this.movementState.rotNegX),this.rotDirection.normalize(),this.rotationMode==="normal"&&(this.movementState.rotPosX||this.movementState.rotNegX)||this.rotationMode==="steer"&&(this.movementState.rotPosX||this.movementState.rotNegX)&&(this.movementState.movePosZ||this.movementState.moveNegZ||this.moveMode==="walk")?this.rotVelocityStick.x=-this.rotDirection.x*this.speedOrbit*this.rotForce:this.rotVelocityStick.x=0,this.rotationMode==="normal"&&(this.movementState.rotPosY||this.movementState.rotNegY)||this.rotationMode==="steer"&&(this.movementState.rotPosY||this.movementState.rotNegY)&&(this.movementState.movePosZ||this.movementState.moveNegZ)?this.rotVelocityStick.y=-this.rotDirection.y*this.speedOrbit*this.rotForce:this.rotVelocityStick.y=0,this.rotVelocityTarget.subVectors(this.eulerDelta.divideScalar(a),this.rotVelocityStick),this.rotVelocityTarget.manhattanLength()===0?this.rotVelocity.lerp(this.rotVelocityTarget,1-(1-this.lerpFactorRotEnd)**o):this.rotVelocity.lerp(this.rotVelocityTarget,1-(1-this.lerpFactorRotStart)**o),this.euler.x+=this.rotVelocity.x*a,this.euler.y+=this.rotVelocity.y*a+this.groundYRotation,this.rotVelocityTarget.y===0&&this.directionXZ.manhattanLength()===0?this.rotationAccumWhenOrientWithCamera=0:(this.cameraFollow===!1||this.cameraYAxis==="Locked")&&(this.rotationAccumWhenOrientWithCamera+=this.rotVelocity.y*a),this.isFirstPerson===!1&&this.orientMode!=="none"&&this.directionXZ.manhattanLength()>0){if(this.orientMode==="radial"){this.objectToCamXZ.copy(this.objectToCamXZ0).applyAxisAngle(mo,this.euler.y-this.euler0.y);let wt=Kn.copy(this.objectToCamXZ).normalize(),yt=lc.copy(d).multiplyScalar(a);yt.y=0;let At=yt.sub(Bn.copy(wt).multiplyScalar(yt.dot(wt))).cross(wt).y;this.euler.y-=Math.atan2(At,this.objectToCamXZ.length())}}else this.rot.y+=this.rotVelocity.y*a+this.groundYRotation,this.rotVelocityTarget.y!==0&&(this.cameraFollow===!1||this.cameraYAxis==="Locked")&&(this.euler.y=this.rot.y);if(this.cameraFollow===!0&&(this.moveMode==="walk"?this.cameraXAxis==="Limit"?this.euler.x=Me.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):this.euler.x=Me.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset,this.PI_2+this.cameraPolarOffset):this.cameraXAxis==="Limit"&&(this.euler.x=Me.clamp(this.euler.x,-this.PI_2,this.PI_2))),this.moveMode==="fly"?this.rot.x=this.euler.x:this.isFirstPerson&&(i?(na.copy(i),na.y=0):(na.copy(this.euler),na.y=0),this.nonColliderRotOffset.makeRotationFromEuler(na)),i&&(this.moveMode==="walk"?(this.rot.y=i.y,this.rot.x=0,this.rot.z=0):this.rot.setFromEuler(i),this.rot.y+=this.vrEulerYOffset*bN),po.setFromAxisAngle(QZ,this.rot.x),Ka.setFromAxisAngle(mo,this.rot.y),Ka.multiply(po),po.setFromAxisAngle(KZ,this.rot.z),Ka.multiply(po),this.quaternion.copy(Ka),this.objectRealQuat.multiplyQuaternions(this.quaternion,this.objXZQuat),this.objectRealQuat.multiply(this.objXZQuat),this.colliderWorldQuat.copy(this.objectRealQuat).multiply(this.collider.rotation),this.collisionEnabled)if(this.usePhysics){let wt=Kn.copy(d).multiplyScalar(a/this.pixelsPerMeter),yt=null;this.didHit=!1;let At=new _;for(let Ct=0;Ct<5;Ct++){let Tt=wt.length(),kt=lc.copy(wt).normalize();if(yt=this.sharedGameControlGlobals.rapierWorld.castShape(this.colliderWorldPosition.divideScalar(this.pixelsPerMeter).add(At),this.colliderWorldQuat,kt,(j=this.object.rigidBody)==null?void 0:j.collider(0).shape,Tt,!1,24,void 0,void 0,this.object.rigidBody),yt!==null){this.didHit=!0;let Pt=this.sharedGameControlGlobals.colliderToEntity.get(yt.collider.handle);if(Pt!==this.lastHitObj&&Ct===0){this.lastHitObj=Pt;let Ht=this.sharedGameControlGlobals.entityToCollisionEvents[Pt==null?void 0:Pt.uuid];if(Ht){for(let dr of Ht)if(dr.data.target==="character"){let hs=((_e=this.sharedGameControlGlobals.rapierWorld)==null?void 0:_e.getCollider(yt.collider.handle))._parent,_s;if(Pt.cloner){for(let ds of Pt.cloner.children)if(ds.rigidBody===hs){_s=ds;break}}dr.dispatch(_s),Pt.dispatchEvent(_b)}}}let It=mN.set(yt.normal2.x,yt.normal2.y,yt.normal2.z).applyQuaternion(this.colliderWorldQuat),Lt=gN.copy(kt).multiplyScalar(yt.toi).dot(It),Nt=yt.toi;if(Nt===0&&(this.position.y+=this.offset*this.pixelsPerMeter),Lt>this.offset&&(Nt=yt.toi*(Lt-this.offset)/Lt,At.addScaledVector(kt,Nt)),wt.copy(kt).multiplyScalar(Tt-Nt),Math.acos(-It.y)>this.slopeThresh){let Ht=this.colliderWorldPosition.divideScalar(this.pixelsPerMeter).add(At),dr=lc.copy(yt.witness2).applyQuaternion(this.colliderWorldQuat);dr.y=0;let hs=Ht.add(dr);hs.y+=this.stepThresh;let _s=this.sharedGameControlGlobals.rapierWorld.castShape(hs,this.colliderWorldQuat,wt,($=this.object.rigidBody)==null?void 0:$.collider(0).shape,1,!1,24,void 0,void 0,this.object.rigidBody);_s!==null&&_s.toi===0&&(It.y=0,It.normalize())}wt.addScaledVector(It,-wt.dot(It))}else{Ct===0&&this.directionXZ.manhattanLength()!==0&&(this.lastHitObj=null),At.add(wt);break}}this.position.addScaledVector(At,this.pixelsPerMeter),(rt=this.object.rigidBody)==null||rt.setTranslation(Bn.copy(this.position).divideScalar(this.pixelsPerMeter),!0),(st=this.object.rigidBody)==null||st.setRotation(po.copy(this.quaternion).premultiply(this.groundTilt).multiply(this.objXZQuat),!0)}else{let wt=this.onObject?1:5,yt=d.multiplyScalar(a/wt);for(let At=0;At<wt;At++)this.position.add(yt),this.collisionAdjustment(a/wt)}else this.position.addScaledVector(d,a);if(this.moveMode==="walk"&&this.onObject&&(this.velocityTarget.y=0,this.velocity.y=0),this.quaternion.premultiply(this.groundTilt).multiply(this.objXZQuat),this.object.matrix.compose(this.position,this.quaternion,this.scale),this.object.matrixWorldNeedsUpdate=!0,this.object.matrix.multiply(this.nonColliderPosOffset).multiply(this.nonColliderRotOffset),this.quaternion.premultiply(this.groundTiltInv).multiply(this.objXZQuatInv),this.cameraFollow===!0){this.updateFollowArms();let wt=this.objectToTarget.add(this.position),yt=this.targetToCamera.add(wt);OE.lookAt(yt,wt,mo).setPosition(yt),OE.decompose(this.targetPos,this.targetQuat,Bn),this.camera.quaternion.slerp(this.targetQuat,1-(1-this.lerpFactorRotCamera)**o),this.camera.position.lerp(this.targetPos,1-(1-this.lerpFactorPosCamera)**o),this.camera.updateMatrix(),this.camera.updateMatrixWorld(),this.cameraYAxis==="Limit"&&this.orientMode==="cartesian"&&(this.euler.y=Me.clamp(this.euler.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel)),this.euler.x=Me.clamp(this.euler.x,-this.PI_2+(this.cameraPolarOffset<0?this.cameraPolarOffset:0),this.PI_2+(this.cameraPolarOffset>0?this.cameraPolarOffset:0))}return this.eulerDelta.set(0,0,0),this.object.dispatchEvent(rJ),this.path.length<2&&this.lastPosition.distanceToSquared(this.position)<this.threshEndTranslate&&Math.abs(this.rotVelocity.x)<this.threshEndRotVel&&Math.abs(this.rotVelocity.y)<this.threshEndRotVel&&(this.camera===void 0||this.isFirstPerson||this.lastCameraPosition.distanceToSquared(this.camera.position)<this.threshEndTranslate&&8*(1-this.lastCameraQuaternion.dot(this.camera.quaternion))<this.threshEndRotate)&&(this.moveMode==="fly"||this.onObject===!0||this.collisionEnabled===!1)&&(this.navMeshPathDest===null||this.navMeshPathDest.material.opacity<-.04*((gt=(ut=this.navMeshPathDest)==null?void 0:ut.material)==null?void 0:gt.userData.opacity0))?!1:(this.camera&&(this.lastCameraPosition.copy(this.camera.position),this.lastCameraQuaternion.copy(this.camera.quaternion)),this.lastPosition.copy(this.position),this.object.dispatchEvent(tJ),!0)}updateFollowArms(){this.objectToTarget.copy(this.objectToTarget0),this.targetToCamera.copy(this.targetToCamera0);let e=po.setFromAxisAngle(mo,this.cameraYAxis==="Limit"&&this.orientMode!=="radial"?Me.clamp(this.euler.y-this.euler0.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel):this.euler.y-this.euler0.y);(this.cameraYAxis!=="Locked"||this.orientMode==="radial")&&this.objectToTarget.applyQuaternion(e);let i;this.cameraXAxis==="Limit"?i=Me.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):i=Me.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset+1e-6,this.PI_2+this.cameraPolarOffset-1e-6);let s=Bn.copy(this.cameraPolarAxis0);(this.cameraYAxis!=="Locked"||this.orientMode==="radial")&&s.applyQuaternion(e);let a=Ka.setFromAxisAngle(s,i);this.cameraYAxis!=="Locked"&&this.targetToCamera.applyQuaternion(e),this.cameraXAxis!=="Locked"&&this.targetToCamera.applyQuaternion(a)}groundTiltAdjustment(e){mo.angleTo(e)*180/Math.PI<15||mo.angleTo(e)*180/Math.PI>85?po.identity():po.setFromUnitVectors(mo,e),this.groundTilt.slerp(po,.06),this.groundTiltInv.copy(this.groundTilt).invert()}collisionAdjustment(e){var o;let i=gN.set(0,0,0);this.object.matrix.compose(this.position,this.quaternion,this.scale);let s=OE.multiplyMatrices(this.object.matrix,this.objXZRotMat).multiply(this.collider.matrix).decompose(Bn,po,Kn).compose(Bn,po,vN);this.sharedGameControlGlobals.entitiesWithTransformAnim.forEach(c=>{if(c===this.object||c.isDescendantOf(this.object))return;ks.makeEmpty(),c.updateMatrixWorldSVD();let d=c.matrixWorldRigid,g=yN.copy(d).invert(),b=XZ.copy(yN).multiply(s);en.copy(this.collider.segment),en.start.applyMatrix4(b),en.end.applyMatrix4(b);let j=mN.copy(this.position).applyMatrix4(g);ks.expandByPoint(en.start),ks.expandByPoint(en.end),ks.min.addScalar(-this.collider.radius),ks.max.addScalar(this.collider.radius),c.bvhGeometry.boundsTree.shapecast({traverseBoundsOrder(_e){return _e.distanceToPoint(en.end)},intersectsBounds:_e=>_e.intersectsBox(ks),intersectsTriangle:_e=>{let $=Bn,rt=Kn,st=_e.closestPointToSegment(en,$,rt);if(st<this.collider.radius){let ut=this.collider.radius-st,gt=rt.sub($).normalize(),wt=lc.copy(j);wt.addScaledVector(gt,ut);let yt=wt.applyMatrix4(d).sub(this.position);i.add(yt),en.start.addScaledVector(gt,ut),en.end.addScaledVector(gt,ut)}}})}),ks.makeEmpty(),en.copy(this.collider.segment),en.start.applyMatrix4(s),en.end.applyMatrix4(s),ks.expandByPoint(en.start),ks.expandByPoint(en.end),ks.min.addScalar(-this.collider.radius),ks.max.addScalar(this.collider.radius),(o=this.sharedGameControlGlobals.staticMeshBVH)==null||o.shapecast({traverseBoundsOrder(c){return c.distanceToPoint(en.end)},intersectsBounds:c=>c.intersectsBox(ks),intersectsTriangle:c=>{let d=Bn,g=Kn,b=c.closestPointToSegment(en,d,g);if(b<this.collider.radius){let j=this.collider.radius-b,_e=g.sub(d).normalize();this.alignToGround&&this.groundTiltAdjustment(_e),i.addScaledVector(_e,j),en.start.addScaledVector(_e,j),en.end.addScaledVector(_e,j)}}}),this.onObject=Math.abs(i.y)>Math.abs(e*this.velocity.y*.25),this.onObject&&this.dispatchStopEvent("jump");let a=Math.max(0,i.length()-1e-5);i.normalize().multiplyScalar(a),this.position.add(i)}},Eg=Ab;Eg.isLocked=!1;var SN=pi(iA());function go(e,i){let s=new Pe;if(!e.getAttribute("position"))return s.setAttribute("position",new Te([],3)),s.setIndex([]),s;let{positions:a,triIndices:o}=qc(e.getAttribute("position"),e.getIndex());return s.setAttribute("position",new Te(a,3)),s.setIndex(o),i&&s.applyMatrix4(i),s}var iJ=new ce$1,nJ=new ce$1,sa=[[0,0,0],[0,0,0],[0,0,0]];function RE(e){let i=e.elements;sa[0][0]=i[0],sa[0][1]=i[4],sa[0][2]=i[8],sa[1][0]=i[1],sa[1][1]=i[5],sa[1][2]=i[9],sa[2][0]=i[2],sa[2][1]=i[6],sa[2][2]=i[10];let{u:s,v:a}=(0,SN.SVD)(sa),o=iJ.set(s[0][0],s[0][1],s[0][2],0,s[1][0],s[1][1],s[1][2],0,s[2][0],s[2][1],s[2][2],0,0,0,0,1),c=nJ.set(a[0][0],a[0][1],a[0][2],0,a[1][0],a[1][1],a[1][2],0,a[2][0],a[2][1],a[2][2],0,0,0,0,1);return o.multiply(c.transpose())}var Eb=class extends ah{constructor(){super(),this.layers.enable(3),this.layers.enable(8)}setFromCamera(e,i){i.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(i),this.ray.direction.set(0,0,-1).transformDirection(i.matrixWorld),this.camera=i):i.isPerspectiveCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(i),this.ray.direction.set(e.x,e.y,.5).unproject(i).sub(this.ray.origin).normalize(),this.camera=i):console.error("Raycaster: Unsupported camera type.")}intersectVisibleObjects(e,i=!0,s=[]){return e.forEach(a=>{a.visible&&this.intersectObject(a,i,s)}),s}createRaycastLineHelper(){let e=new ys({color:65280,linewidth:10}),i=new _(this.ray.origin.x,this.ray.origin.y,this.ray.origin.z),s=new _(this.ray.direction.x,this.ray.direction.y,this.ray.direction.z),a=this.camera.far-this.camera.near,o=new _().addVectors(i,s.multiplyScalar(a)),c=new Pe;return c.setFromPoints([i,o]),new Ac(c,e)}},wN=e=>e instanceof Ls||e instanceof uo;function sJ(e,i){return e.distance-i.distance}function AN(e,i,s){if(!(!Uo(i)||!i.visible)){mn(i)&&i.raycast(e,s);for(let a of i.children)AN(e,a,s)}}function Qf(e,i,s,a=!1){if(!a&&!s.some(c=>Kf(e,c)!==void 0))return[];let o=[];return i.children.forEach(c=>AN(e,c,o)),o.sort(sJ),o}function Tg(e){let i=[];if(e.length){let s=e[0].object;Uo(s)&&i.push(s);let a=s.parent;for(;a;)wN(a)&&i.push(a),a=a.parent}return i}function yo(e,i,s,a){let o=e.frame;if(o){let c=i[0]*o.width,d=(1-i[1])*o.height;for(let g of s){let b=g===o.uuid?o:o.find(g);if(b!=null&&b.intersects(c,d))return a(b),!0}}return!1}function Kf(e,i){if(mn(i)){if(i.visible){let s=[];return i.raycast(e,s),s.length?s[0]:void 0}}else if(wN(i))return _N(e,i)}function _N(e,i){if(!(!Uo(i)||!i.visible)){if(mn(i)){let s=[];if(i.raycast(e,s),s.length)return s[0]}for(let s of i.children){let a=_N(e,s);if(a)return a}}}function oJ(e,i,s){return{x:(e-(s.left+window.scrollX))/s.width*2-1,y:-((i-(s.top+window.scrollY))/s.height)*2+1}}function aJ(e,i,s){return{x:(e-(s.left+window.scrollX))/s.width,y:1-(i-(s.top+window.scrollY))/s.height}}var Tb=class{constructor(e,i,s,a,o,c,d,g){this.renderer=e,this.publish=i,this.scene=s,this.getCamera=a,this.sharedAssets=o,this.requestRender=c,this.isExport=d,this.frame=g,this.raycaster=new Eb,this._useWindowEvents=!1,this.pointerWorld={x:0,y:0},this.pointerScreen={x:0,y:0},this._useWindowEvents=i.mouseEventTarget==="window",this.domElement=e.domElement,this.eventElement=this._useWindowEvents?window:e.domElement,this._domRect=this.domElement.getBoundingClientRect()}get stopRaycast(){return this.publish.stopRaycast}get page(){return this.scene.activePage}set useWindowEvents(e){this._useWindowEvents=e,this.eventElement=e?window:this.renderer.domElement}get useWindowEvents(){return this._useWindowEvents}set domRect(e){this._domRect=e}get domRect(){return this._domRect}updateRaycaster(e){var a;let{pageX:i,pageY:s}=((a=e.touches)==null?void 0:a.length)>0?e.touches[0]:e;this.pointerWorld=oJ(i,s,this._domRect),this.pointerScreen=aJ(i,s,this._domRect),this.raycaster.setFromCamera(this.pointerWorld,this.getCamera())}},zr$1=class{constructor(i){this.eventContext=i,this.domEventsNeeded=new Set,this.hasVideoAction=!1}connect(){}disconnect(){}},LE=[["start","Start"],["keyDown","KeyDown"],["keyUp","KeyUp"],["mouseDown","MouseDown"],["mouseUp","MouseUp"],["mouseHover","MouseHover"],["collision","Collision"],["lookAt","LookAt"],["follow","Follow"],["scroll","Scroll"]],EN=e=>{var i;return(i=LE.find(([s,a])=>a===e))==null?void 0:i[0]},oa=e=>{var i;return(i=LE.find(([s])=>s===e))==null?void 0:i[1]},lJ=(e,i)=>{let s=EN(e);if(s){let a=new CustomEvent(s,{bubbles:!0});return Object.defineProperty(a,"target",{writable:!1,value:i}),a}},Mb=class extends zr$1{constructor(e){super(e),this.objectsPerEvents=new Map,this.splineEvents={},this.onBeginEvent=s=>{var c;if(!s.eventName||!s.target||s.eventName==="Scroll")return;let a=(c=this.splineEvents[EN(s.eventName)])==null?void 0:c[s.target.uuid];if(!a)return;s.eventName==="Scroll"&&s.deltaY!==void 0&&Object.assign(a,{deltaY:s.deltaY});let{domElement:o}=this.eventContext;o.dispatchEvent(a)};let{page:i}=this.eventContext;i.traverseEntity(s=>{var a,o;if((a=s.data)!=null&&a.events.length){for(let[c,d]of LE)if(s.data.events.some(g=>g.data.type===d&&!g.data.disabled)){this.objectsPerEvents.has(c)?(o=this.objectsPerEvents.get(c))==null||o.push(s):this.objectsPerEvents.set(c,[s]);let g={id:s.uuid,name:s.name},b=lJ(d,g),j=this.splineEvents[c];j?j[s.uuid]=b:this.splineEvents[c]={[s.uuid]:b}}}})}connect(){this.objectsPerEvents.forEach(e=>{e.forEach(i=>{i.addEventListener("beginEvent",this.onBeginEvent)})})}disconnect(){this.objectsPerEvents.forEach(e=>{e.forEach(i=>{i.removeEventListener("beginEvent",this.onBeginEvent)})})}},BE=class{constructor(e,i,s,a,o,c){if(this.id=e,this.data=i,this.object=s,this.entered=!1,this.alreadyPlayedNonTogglingActions=new Set,this.useToggle=i.runMode==="Toggle",(i.type==="KeyDown"||i.type==="KeyUp"||i.type==="KeyPress")&&!i.key)throw new Error("Missing property");this.actions=Mr$1(i,i.actions,a,o,c,s)}disconnect(){hr$1(this.actions)}dispatchHeld(e){this.actions.Create.forEach(i=>{e&&i.dispatchThrottled.cancel(),i.dispatchThrottled()})}dispatch(e=!1){this.actions.Transition.forEach(i=>{i.object.currentTransitionEvent!==this?(i.object.currentTransitionEvent=this,i.init()):this.data.runMode==="Once"&&this.alreadyPlayedNonTogglingActions.add(i)}),this.useToggle?(this.actions.Transition.forEach(i=>{i.toggle()}),this.actions.Animation.forEach(i=>{i.toggle()}),this.actions.SwitchCamera.forEach(i=>{i.toggle()})):this.data.type==="MousePress"||this.data.type==="KeyPress"?this.entered||(this.entered=!0,this.actions.Transition.forEach(i=>i.playFromCurrent()),this.actions.Animation.forEach(i=>i.playFromCurrent()),this.actions.SwitchCamera.forEach(i=>i.playFromCurrent()),this.actions.Create.forEach(i=>i.dispatchStart())):(this.actions.Transition.some(i=>i.playing)||this.actions.Transition.forEach(i=>{this.alreadyPlayedNonTogglingActions.has(i)===!1&&i.play()}),this.actions.SwitchCamera.some(i=>i.playing)||this.actions.SwitchCamera.forEach(i=>{i.play()}),this.actions.Animation.forEach(i=>{i.play()})),this.actions.Link.forEach(i=>{i.dispatch()}),this.actions.SceneTransition.forEach(i=>{i.dispatch()}),e===!1&&this.actions.Create.forEach(i=>{i.dispatch()}),this.actions.Destroy.forEach(i=>{i.dispatch()}),this.actions.Reset.forEach(i=>{i.dispatch()}),this.actions.Audio.forEach(i=>{i.dispatchBasic()}),this.actions.Video.forEach(i=>{i.dispatchBasic()}),this.actions.Particles.forEach(i=>{i.dispatchBasic()}),this.actions.SetVariable.forEach(i=>i.checkConditions()),this.actions.SetVariable.forEach(i=>i.dispatch()),this.actions.DynamicVariablePlay.forEach(i=>i.dispatch())}dispatchRelease(){this.entered&&(this.entered=!1,this.actions.Transition.forEach(e=>e.reverseFromCurrent()),this.actions.Particles.forEach(e=>e.reverseFromCurrent()),this.actions.Animation.forEach(e=>e.reverseFromCurrent()),this.actions.SwitchCamera.forEach(e=>e.reverseFromCurrent()),this.actions.Create.forEach(e=>e.dispatchStop()))}dispatchUserEvent(e){this.actions.Transition.forEach(i=>{i.object.currentTransitionEvent!==this&&(i.object.currentTransitionEvent=this,i.init())}),e?(this.actions.Transition.forEach(i=>i.reverseFromCurrent()),this.actions.Animation.forEach(i=>i.reverseFromCurrent()),this.actions.SwitchCamera.forEach(i=>i.reverseFromCurrent())):(this.actions.Transition.forEach(i=>i.playFromCurrent()),this.actions.Animation.forEach(i=>i.playFromCurrent()),this.actions.SwitchCamera.forEach(i=>i.playFromCurrent())),this.actions.Link.forEach(i=>{i.dispatch()}),this.actions.SceneTransition.forEach(i=>{i.dispatch()}),this.actions.Create.forEach(i=>{i.dispatch()}),this.actions.Destroy.forEach(i=>{i.dispatch()}),this.actions.Reset.forEach(i=>{i.dispatch()}),this.actions.Audio.forEach(i=>{i.dispatchBasic()}),this.actions.Video.forEach(i=>{i.dispatchBasic()}),this.actions.Particles.forEach(i=>{i.dispatchBasic()}),this.actions.SetVariable.forEach(i=>i.checkConditions()),this.actions.SetVariable.forEach(i=>i.dispatch()),this.actions.DynamicVariablePlay.forEach(i=>i.dispatch())}},Cb=class extends zr$1{constructor(e,i,s){super(e),this.useForRaycastProperty=s,this.objectsPerTypes={MouseDown:[],MouseUp:[],MousePress:[],KeyDown:[],KeyUp:[],KeyPress:[]},this.canvasMouseEvents=[],this.eventsPerObjects={MouseDown:{},MouseUp:{},MousePress:{},KeyDown:{},KeyUp:{},KeyPress:{}},this.heldKeys={},this.heldKeysPress={},this._prevObjects=[],this.sceneInterects=null,this.onCanvasRaycast=d=>{if(this.useForRaycastProperty===!0&&this.sceneInterects===null){this.eventContext.updateRaycaster(d);let{raycaster:g,page:b}=this.eventContext,j=Qf(g,b,[],!0);this.sceneInterects=j,j.length&&(this.eventContext.sharedAssets.raycastProperty={x:j[0].point.x,y:j[0].point.y,z:j[0].point.z,objX:j[0].object.matrixWorld.elements[12],objY:j[0].object.matrixWorld.elements[13],objZ:j[0].object.matrixWorld.elements[14]})}},this.onCanvasMouseDown=d=>{(d.target===this.eventContext.domElement||d.target.tagName==="SPLINE-VIEWER")&&this.canvasMouseEvents.forEach(g=>{(g.data.type==="MouseDown"||g.data.type==="MousePress")&&(this.onCanvasRaycast(d),g.dispatch())})},this.onCanvasMouseUp=d=>{(d.target===this.eventContext.domElement||d.target.tagName==="SPLINE-VIEWER")&&this.canvasMouseEvents.forEach(g=>{g.data.type==="MouseUp"?(this.onCanvasRaycast(d),g.dispatch()):g.data.type==="MousePress"&&g.dispatchRelease()})},this.onMouseDown=d=>{$e$1.length>1||(this.eventContext.updateRaycaster(d),this.handleMouseEvent("MouseDown"))},this.onMouseUp=d=>{$e$1.length>1||(this.eventContext.updateRaycaster(d),this.handleMouseEvent("MouseUp"))},this.onMousePressDown=d=>{$e$1.length>1||(this.eventContext.updateRaycaster(d),this.handleMousePressEvent())},this.onMousePressRelease=d=>{$e$1.length>1||(this.eventContext.updateRaycaster(d),this.handleMousePressEvent(!0))},this.onKeyDown=d=>{this.heldKeys[d.key]||(this.handleKeyEvent(d,"KeyDown"),this.handleKeyEventHeld(d,"KeyDown",!0)),this.heldKeys[d.key]=!0},this.onKeyUp=d=>{this.handleKeyEvent(d,"KeyUp"),this.handleKeyEventHeld(d,"KeyUp",!0)},this.onKeyPressDown=d=>{this.heldKeysPress[d.key]?this.handleKeyEventHeld(d,"KeyPress"):(this.handleKeyEvent(d,"KeyPress"),this.handleKeyEventHeld(d,"KeyPress",!0)),this.heldKeysPress[d.key]=!0},this.onKeyPressUp=d=>{this.handleKeyEvent(d,"KeyPress",!0)},this.releaseHeldKey=d=>{delete this.heldKeys[d.key]},this.releaseHeldKeyPress=d=>{delete this.heldKeysPress[d.key]},this._onUserEvent=({eventName:d,target:g,reverse:b})=>{var _e,$,rt,st;if(!d||!g)return;let j=oa(d);j&&(j==="MouseDown"||j==="MouseUp"||j==="MousePress"?(g.dispatchEvent({type:"beginEvent",eventName:j}),($=(_e=this.eventsPerObjects[j])==null?void 0:_e[g.uuid])==null||$.forEach(ut=>{ut.dispatchUserEvent(b)})):(j==="KeyDown"||j==="KeyUp"||j==="KeyPress")&&(g.dispatchEvent({type:"beginEvent",eventName:j}),(st=(rt=this.eventsPerObjects[j])==null?void 0:rt[g.uuid])==null||st.forEach(ut=>{ut.dispatchUserEvent()})))};let{page:a,sharedAssets:o}=this.eventContext,c=(d,g)=>{var j,_e;if(!((j=d.data)!=null&&j.events.length))return;let b=["MouseDown","MouseUp","MousePress","KeyDown","KeyUp","KeyPress"];for(let $ of b){let rt=this.eventsPerObjects[$];d.data.events.filter(({data:st})=>st.type===$&&st.disabled!==!0).forEach(({id:st,data:ut})=>{try{let gt=new BE(st,ut,d,a,o,i);gt.actions.Video.length&&(this.hasVideoAction=!0),(ut.type==="MouseDown"||ut.type==="MouseUp"||ut.type==="MousePress")&&(ut.mode==="Canvas"||ut.mode==="Window")?this.canvasMouseEvents.push(gt):rt[d.uuid]?rt[d.uuid].some(wt=>wt.id===gt.id)||rt[d.uuid].push(gt):rt[d.uuid]=[gt]}catch{}}),(_e=rt[d.uuid])!=null&&_e.length&&this.objectsPerTypes[$].push(d instanceof Jt&&($==="MouseDown"||$==="MouseUp"||$==="MousePress")?g:d)}};a.traverseEntity(d=>{var g;(d instanceof _r$1||d instanceof mr)&&((g=d.frame)==null||g.traverse(b=>{c(b,d)})),c(d)})}connect(){var i,s,a,o,c,d;let{domElement:e}=this.eventContext;this.heldKeys={},this.heldKeysPress={},this.domEventsNeeded.clear(),e.addEventListener("pointerdown",this.onCanvasMouseDown),e.addEventListener("pointerup",this.onCanvasMouseUp),((i=this.objectsPerTypes.MouseDown)!=null&&i.length||this.useForRaycastProperty)&&(this.domEventsNeeded.add("pointerdown"),e.addEventListener("pointerdown",this.onMouseDown)),(s=this.objectsPerTypes.MouseUp)!=null&&s.length&&(this.domEventsNeeded.add("pointerup"),e.addEventListener("pointerup",this.onMouseUp)),(a=this.objectsPerTypes.MousePress)!=null&&a.length&&(this.domEventsNeeded.add("pointerdown"),e.addEventListener("pointerdown",this.onMousePressDown),this.domEventsNeeded.add("pointerup"),e.addEventListener("pointerup",this.onMousePressRelease)),(o=this.objectsPerTypes.KeyDown)!=null&&o.length&&(this.domEventsNeeded.add("keydown"),document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.releaseHeldKey)),(c=this.objectsPerTypes.KeyUp)!=null&&c.length&&(this.domEventsNeeded.add("keyup"),document.addEventListener("keyup",this.onKeyUp)),(d=this.objectsPerTypes.KeyPress)!=null&&d.length&&(this.domEventsNeeded.add("keydown"),document.addEventListener("keydown",this.onKeyPressDown),document.addEventListener("keyup",this.releaseHeldKeyPress),this.domEventsNeeded.add("keyup"),document.addEventListener("keyup",this.onKeyPressUp)),Object.entries(this.objectsPerTypes).forEach(([g,b])=>{b.forEach(j=>{j.addEventListener("userEvent",this._onUserEvent)})})}disconnect(){let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),this.heldKeys={},this.heldKeysPress={},e.removeEventListener("pointerdown",this.onCanvasMouseDown),e.removeEventListener("pointerup",this.onCanvasMouseUp),e.removeEventListener("pointerdown",this.onMouseDown),e.removeEventListener("pointerdown",this.onMousePressDown),e.removeEventListener("pointerup",this.onMouseUp),e.removeEventListener("pointerup",this.onMousePressRelease),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp),document.removeEventListener("keydown",this.onKeyPressDown),document.removeEventListener("keyup",this.onKeyPressUp),document.removeEventListener("keyup",this.releaseHeldKey),Object.values(this.eventsPerObjects).forEach(i=>{Object.values(i).forEach(s=>{s.forEach(a=>{a.disconnect()})})}),this.canvasMouseEvents.forEach(i=>{i.disconnect()}),Object.entries(this.objectsPerTypes).forEach(([i,s])=>{s.forEach(a=>{a.removeEventListener("userEvent",this._onUserEvent)})})}handleMouseEvent(e){var g,b,j,_e;let{stopRaycast:i,raycaster:s,page:a,pointerScreen:o}=this.eventContext,c=this.objectsPerTypes[e],d=c.filter($=>!($ instanceof Jt));if(!(!c.length&&!this.useForRaycastProperty)&&!(a.uiCanvas&&yo(a,[o.x,o.y],Object.keys(this.eventsPerObjects[e]),$=>{this.handleObjectMouseEventDispatch($,e)}))){if(i||this.useForRaycastProperty){let $;if(this.sceneInterects===null?$=Qf(s,a,d,this.useForRaycastProperty):($=this.sceneInterects,this.sceneInterects=null),this.useForRaycastProperty&&$.length&&(this.eventContext.sharedAssets.raycastProperty={x:$[0].point.x,y:$[0].point.y,z:$[0].point.z,objX:$[0].object.matrixWorld.elements[12],objY:$[0].object.matrixWorld.elements[13],objZ:$[0].object.matrixWorld.elements[14]}),i){let rt=[((b=(g=$[0])==null?void 0:g.uv)==null?void 0:b.x)??0,((_e=(j=$[0])==null?void 0:j.uv)==null?void 0:_e.y)??0];Tg($).forEach(st=>{st instanceof _r$1&&yo(st,rt,Object.keys(this.eventsPerObjects[e]),ut=>{this.handleObjectMouseEventDispatch(ut,e)}),this.eventsPerObjects[e][st.uuid]&&this.handleObjectMouseEventDispatch(st,e)})}}i||d.forEach($=>{var st,ut;let rt=Kf(s,$);rt&&(this.handleObjectMouseEventDispatch($,e),$ instanceof _r$1&&yo($,[((st=rt==null?void 0:rt.uv)==null?void 0:st.x)??0,((ut=rt==null?void 0:rt.uv)==null?void 0:ut.y)??0],Object.keys(this.eventsPerObjects[e]),gt=>{this.handleObjectMouseEventDispatch(gt,e)}))})}}handleMousePressEvent(e=!1){let i="MousePress",s=this.objectsPerTypes[i],a=s.filter(c=>!(c instanceof Jt)),o=[];if(s.length){if(!e){let{stopRaycast:c,raycaster:d,page:g,pointerScreen:b}=this.eventContext,j=!1;if(g.uiCanvas&&(j=yo(g,[b.x,b.y],Object.keys(this.eventsPerObjects[i]),_e=>{o.push(_e)})),c&&!j){let _e=Qf(d,g,a);o=Tg(_e),_e.forEach($=>{var rt,st;$.object instanceof _r$1&&yo($.object,[((rt=$==null?void 0:$.uv)==null?void 0:rt.x)??0,((st=$==null?void 0:$.uv)==null?void 0:st.y)??0],Object.keys(this.eventsPerObjects[i]),ut=>{o.push(ut)})})}else a.forEach(_e=>{var rt,st;let $=Kf(d,_e);$&&(o.push(_e),_e instanceof _r$1&&yo(_e,[((rt=$==null?void 0:$.uv)==null?void 0:rt.x)??0,((st=$==null?void 0:$.uv)==null?void 0:st.y)??0],Object.keys(this.eventsPerObjects[i]),ut=>{o.push(ut)}))})}this._prevObjects.length&&this._prevObjects.forEach(c=>{o.includes(c)||this.handleObjectMouseEventDispatchRelease(c,i)}),o.length&&o.forEach(c=>{this.handleObjectMouseEventDispatch(c,i)}),this._prevObjects=o}}handleObjectMouseEventDispatch(e,i){var s,a;e.dispatchEvent({type:"beginEvent",eventName:i}),(a=(s=this.eventsPerObjects[i])==null?void 0:s[e.uuid])==null||a.forEach(o=>{o.dispatch()})}handleObjectMouseEventDispatchRelease(e,i){var s,a;e.dispatchEvent({type:"beginEvent",eventName:i}),(a=(s=this.eventsPerObjects[i])==null?void 0:s[e.uuid])==null||a.forEach(o=>{o.dispatchRelease()})}handleKeyEvent(e,i,s=!1){this.objectsPerTypes[i].forEach(a=>{let o=this.eventsPerObjects[i][a.uuid];o.some(({data:c})=>"key"in c&&c.key===e.key)&&a.dispatchEvent({type:"beginEvent",eventName:i}),o.forEach(c=>{"key"in c.data&&c.data.key===e.key&&(s?c.dispatchRelease():c.dispatch(!0))})})}handleKeyEventHeld(e,i,s=!1){this.objectsPerTypes[i].forEach(a=>{this.eventsPerObjects[i][a.uuid].forEach(o=>{"key"in o.data&&o.data.key===e.key&&o.dispatchHeld(s)})})}},cJ=new _,uJ=new _,Pb=class{constructor(e,i,s,a,o){this.actionsIn=Mr$1(e,e.inActions,s,a,o,i),this.actionsOut=Mr$1(e,e.outActions,s,a,o,i)}disconnect(){hr$1(this.actionsIn),hr$1(this.actionsOut)}},NE=class extends Pb{constructor(e,i,s,a,o,c){super(i,s,a,o,c),this.id=e,this.data=i,this.object=s,this.stage="out",this.objects=[],this.onUpdateMatrixWorld=()=>{for(let rt of this.objects)if(!rt.visible)return;let j=cJ.setFromMatrixPosition(this.objects[0].matrixWorld),_e=uJ.setFromMatrixPosition(this.objects[1].matrixWorld),$=j.distanceTo(_e)<=this.distance?"in":"out";if(this.stage!==$){this.stage=$;let rt=$==="in"?this.actionsIn:this.actionsOut;rt.Audio.forEach(st=>st.dispatchConditional()),rt.Particles.forEach(st=>st.dispatchConditional()),rt.Video.forEach(st=>st.dispatchConditional()),rt.Link.forEach(st=>st.dispatch()),rt.Create.forEach(st=>st.dispatch()),rt.Destroy.forEach(st=>st.dispatch()),rt.Reset.forEach(st=>st.dispatch()),rt.Transition.forEach(st=>{st.object.currentTransitionEvent!==this&&(st.object.currentTransitionEvent=this),st.init()}),rt.Transition.forEach(st=>st.play()),rt.Animation.forEach(st=>st.play()),rt.SwitchCamera.forEach(st=>st.play()),rt.SceneTransition.forEach(st=>st.dispatch()),rt.SetVariable.forEach(st=>st.checkConditions()),rt.SetVariable.forEach(st=>st.dispatch()),rt.DynamicVariablePlay.forEach(st=>st.dispatch())}};let{distance:d,fromObject:g,toObject:b}=i.condition;this.distance=d;for(let j of[g,b]){if(!j)throw new Error("Missing property");let _e=a.find(j);if(!_e)throw new Error("Missing property");this.objects.push(_e)}}connect(){window.setTimeout(()=>{this.objects.forEach(e=>{e.addEventListener("updateMatrixWorld",this.onUpdateMatrixWorld)}),this.onUpdateMatrixWorld()},0)}disconnect(){super.disconnect(),this.stage="out",this.objects.forEach(e=>{e.removeEventListener("updateMatrixWorld",this.onUpdateMatrixWorld)})}},FE=class extends Pb{constructor(e,i,s,a,o,c){var b;super(i,s,a,o,c),this.id=e,this.data=i,this.object=s,this.onBegin=({target:j,state:_e})=>{this.toState!==_e&&(this.actionsOut.Audio.forEach($=>$.dispatchConditional()),this.actionsOut.Particles.forEach($=>$.dispatchConditional()),this.actionsOut.Video.forEach($=>$.dispatchConditional()),this.actionsOut.Link.forEach($=>$.dispatch()),this.actionsOut.Create.forEach($=>$.dispatch()),this.actionsOut.Destroy.forEach($=>$.dispatch()),this.actionsOut.Reset.forEach($=>$.dispatch()),this.actionsIn.Transition.forEach($=>$.pause()),this.object.currentTransitionEvent=this,this.actionsOut.Transition.forEach($=>$.play()),this.actionsOut.Animation.forEach($=>$.play()),this.actionsIn.SwitchCamera.forEach($=>$.pause()),this.actionsOut.SwitchCamera.forEach($=>$.play()),this.actionsOut.SceneTransition.forEach($=>$.dispatch()),this.actionsOut.SetVariable.forEach($=>$.checkConditions()),this.actionsOut.SetVariable.forEach($=>$.dispatch()),this.actionsOut.DynamicVariablePlay.forEach($=>$.dispatch()))},this.onComplete=({target:j,state:_e})=>{this.toState===_e&&(this.actionsIn.Audio.forEach($=>$.dispatchConditional()),this.actionsIn.Particles.forEach($=>$.dispatchConditional()),this.actionsIn.Video.forEach($=>$.dispatchConditional()),this.actionsIn.Link.forEach($=>$.dispatch()),this.actionsIn.Create.forEach($=>$.dispatch()),this.actionsIn.Destroy.forEach($=>$.dispatch()),this.actionsIn.Reset.forEach($=>$.dispatch()),this.actionsOut.Transition.forEach($=>$.pause()),this.actionsOut.Transition.forEach($=>$.pause()),this.object.currentTransitionEvent=this,this.actionsIn.Transition.forEach($=>$.play()),this.actionsIn.Animation.forEach($=>$.play()),this.actionsOut.SwitchCamera.forEach($=>$.pause()),this.actionsIn.SwitchCamera.forEach($=>$.play()),this.actionsIn.SceneTransition.forEach($=>$.dispatch()),this.actionsIn.SetVariable.forEach($=>$.checkConditions()),this.actionsIn.SetVariable.forEach($=>$.dispatch()),this.actionsIn.DynamicVariablePlay.forEach($=>$.dispatch()))};let{condition:d}=i;if(!d.object)throw new Error("Missing property");let g=a.find(d.object)??a.scene.find2D(d.object);if(!g)throw new Error("Missing property");if(this.toObject=g,d.state&&!((b=this.toObject.states)!=null&&b[d.state]))throw new Error("Missing property");this.toState=d.state}connect(){bs(this.actionsOut).forEach(e=>{var i;(i=this.actionsOut[e])!=null&&i.length&&this.toObject.addEventListener("beginState",this.onBegin)}),bs(this.actionsIn).forEach(e=>{var i;(i=this.actionsIn[e])!=null&&i.length&&this.toObject.addEventListener("completeState",this.onComplete)})}disconnect(){super.disconnect(),bs(this.actionsOut).forEach(e=>{var i;(i=this.actionsIn[e])!=null&&i.length&&this.toObject.removeEventListener("beginState",this.onBegin)}),bs(this.actionsIn).forEach(e=>{var i;(i=this.actionsIn[e])!=null&&i.length&&this.toObject.removeEventListener("completeState",this.onComplete)})}},Db=class extends zr$1{constructor(e,i){super(e),this.eventsPerConditions={Comparison:[],Distance:[],State:[]},this.hasVideoAction=!1;let{page:s,sharedAssets:a}=this.eventContext;s.traverseEntity(o=>{var c;if((c=o.data)!=null&&c.events.length){for(let{id:d,data:g}of o.data.events)if(!g.disabled&&g.type==="Conditional")try{let b;g.condition.type==="Comparison"||(g.condition.type==="Distance"?b=new NE(d,g,o,s,a,i):g.condition.type==="State"&&(b=new FE(d,g,o,s,a,i))),b&&(this.eventsPerConditions[g.condition.type].push(b),(b.actionsIn.Video.length||b.actionsOut.Video.length)&&(this.hasVideoAction=!0))}catch{}}})}connect(){super.connect(),Object.values(this.eventsPerConditions).forEach(e=>e.forEach(i=>i.connect()))}disconnect(){super.disconnect(),Object.values(this.eventsPerConditions).forEach(e=>e.forEach(i=>i.disconnect()))}},Mg=new _,cc=new _,gu=new _,TN=new ii,hJ=.01,ir=new _,ki=new _,MN=new _,yu=new Qe,kE=new or,dJ=new ce$1,VE=new nr,Zf=new _,aa=new _,Jf=.2;function zE(e,i){!i||(i[0]<i[1]&&(e.x=Math.min(Math.max(e.x,i[0]),i[1])),i[2]<i[3]&&(e.y=Math.min(Math.max(e.y,i[2]),i[3])),i[4]<i[5]&&(e.z=Math.min(Math.max(e.z,i[4]),i[5])))}var fJ=function(){let e=new ce$1;return(i,s,a)=>{let o=i.obj;e.copy(o.hiddenMatrix),o.parent!==null&&e.premultiply(o.parent.matrixWorld),e.invert(),o.position.copy(s),i.reference==="global"&&zE(o.position,i.limits),o.position.applyMatrix4(e),i.reference==="parent"?zE(o.position,i.limits):i.reference==="local"&&(yu.copy(i.quat0).invert(),o.position.sub(i.position0),o.position.applyQuaternion(yu),zE(o.position,i.limits),yu.invert(),o.position.applyQuaternion(yu),o.position.add(i.position0)),e.multiply(a??o.matrixWorld).decompose(ir,o.quaternion,ki),o.updateMatrix(),o.hasNonUniformScale&&(o.updateMatrixWorld(),o.updateMatrixWorldSVD()),o instanceof pr&&Rn(o.parent)&&o.invalidateDownstreamBooleanData(!0)}}(),UE=class{constructor(e,i,s,a,o,c){this.object=e,this.data=i,this.dropDestIds=[],this.activeIdx=null,this.wasDragEventTriggered=!1,this.resetDampingFactor=this.data.resetSpeed===0?1:8/this.data.resetSpeed+1,this.snapDampingFactor=this.data.snapSpeed===0?1:8/this.data.snapSpeed+1,this.actionsDrag=Mr$1(i,i.dragDropActions.drag,s,a,o,this.object),this.actionsDrop=Mr$1(i,i.dragDropActions.drop,s,a,o,this.object);let d=[];this.data.objects.forEach(g=>{let b=s.find(g);!b||b.data.visible!==!1&&(d.push(b),c[b.uuid]&&c[b.uuid].forEach(j=>{let _e=s.find(j);!_e||_e.data.visible!==!1&&d.push(_e)}))}),this.data.dropDestinations.forEach(g=>{let b=s.find(g);!b||b.data.visible!==!1&&(this.dropDestIds.push(b.uuid),c[b.uuid]&&c[b.uuid].forEach(j=>{let _e=s.find(j);!_e||_e.data.visible!==!1&&this.dropDestIds.push(_e.uuid)}))}),this.dragItems=d.map(g=>(this.data.planeMode==="locked"&&(g.userData.lockedPlane=!0),g.userData.worldPosition0=new _().setFromMatrixPosition(g.matrixWorld),{obj:g,fromPosition:new _().setFromMatrixPosition(g.matrixWorld),pointStart:new _,pointEnd:new _,paused:!0,currentDampingFactor:this.data.dampingFactor,reset:!1,position0:new _().copy(g.position),quat0:new Qe().copy(g.quaternion),snapped:!1,orientationMatrix:new ce$1,limits:this.data.limits,reference:this.data.referenceFrame}))}get activeDragItem(){return this.activeIdx!==null?this.dragItems[this.activeIdx]:null}dispose(){hr$1(this.actionsDrag),hr$1(this.actionsDrop),this.dragItems.forEach(e=>{e.fromPosition.copy(e.obj.userData.worldPosition0),e.pointStart.copy(e.fromPosition),e.pointEnd.copy(e.pointStart),e.obj.recursiveBBoxNeedsUpdate=!0,e.obj.userData.lockedPlane=void 0,e.obj.position.copy(e.position0),e.obj.quaternion.copy(e.quat0),e.obj.updateMatrix()})}},Ob=class extends zr$1{constructor(e,i){super(e),this.eventManager=i,this.events=[],this.lastDropDestination=null,this.dragTimeout=null,this.onPointerDown=a=>{var g;if($e$1.length>1)return;this.eventContext.updateRaycaster(a);let{raycaster:o,page:c}=this.eventContext,d=c.raycastWithClones(o);if(this.lastDropDestination=null,d.length===0){this.activeEvent=null;return}for(let b of this.events){let j=0;for(let{obj:_e,pointEnd:$,pointStart:rt}of b.dragItems){if(_e===d[0].object||_e===d[0].object.object||vt.is(_e)&&_e.isAncestorOf(d[0].object.uuid)){if(b.activeIdx=j,b.activeDragItem.reset=!1,b.activeDragItem.currentDampingFactor=b.data.dampingFactor,b.activeDragItem.snapped=!1,b.data.cursor==="hand"&&this.setCursor("grabbing"),this.eventManager.controlsManager.usePhysics){b.activeDragItem.obj.rigidBody&&b.activeDragItem.obj.rigidBody.setBodyType(2,!0);let st=b.activeDragItem.obj;_e.hasNonUniformScale&&_e.updateMatrixWorldSVD(),(st.hasNonUniformScale?st.matrixWorldRigid:st.matrixWorld).decompose(ir,yu,ki),kE.setFromQuaternion(yu),st.prevR===void 0?(st.prevR=kE.clone(),st.prevT=ir.clone()):(st.prevR.copy(kE),st.prevT.copy(ir)),this.eventManager.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.push(b.activeDragItem.obj)}this.calcPlaneIntersectPos(_e,rt,b.data.plane,b.data.referenceFrame),$.copy(rt),(this.eventManager.controlsManager.usePhysics&&((g=_e.data.physics)==null?void 0:g.rigidBody)==="dynamic"||b.data.drop===!1||b.data.resetOnSnapFail===!1)&&b.activeDragItem.fromPosition.setFromMatrixPosition(b.activeDragItem.obj.matrixWorld),this.activeEvent=b,this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!1);return}j++}}this.activeEvent=null},this.onPointerMove=a=>{var g,b,j,_e;if($e$1.length>1)return;this.eventContext.updateRaycaster(a);let{raycaster:o,page:c}=this.eventContext,d=c.raycastWithClones(o);if($e$1.length===0){let $=!1;for(let rt of this.events){for(let{obj:st}of rt.dragItems)if(st===((g=d[0])==null?void 0:g.object)||st===((j=(b=d[0])==null?void 0:b.object)==null?void 0:j.object)||vt.is(st)&&st.isAncestorOf((_e=d[0])==null?void 0:_e.object.uuid)){switch($=!0,rt.data.cursor){case"hand":this.setCursor("grab");break;case"move":this.setCursor("move");break}break}if($)break}$||this.setCursor("default");return}if(this.activeEvent&&this.activeEvent.activeDragItem){let $=this.activeEvent.activeDragItem;$.snapped=!1;let rt;if(this.activeEvent.data.drop&&(rt=d.filter(st=>$.obj!==st.object&&!$.obj.isAncestorOf(st.object.uuid)&&!(st.object instanceof Ls)&&(this.activeEvent.data.dropOn==="all"||this.activeEvent.dropDestIds.some(ut=>ut===st.object.uuid||c.scene.find(ut).isAncestorOf(st.object.uuid))))[0]),rt){let st=MN.copy(rt.face.normal).applyMatrix3(VE.getNormalMatrix(rt.object.matrixWorld));if(this.activeEvent.data.snapTo==="center")$.fromPosition.setFromMatrixPosition(rt.object.matrixWorld);else if(this.activeEvent.data.snapTo==="surface"){if($.fromPosition.copy(rt.point),this.activeEvent.data.snapSurfaceMode==="bbox"){ir.copy(st).applyMatrix3(VE.setFromMatrix4($.obj.matrixWorld).transpose());let ut=$.obj;ir.x>Jf?ki.x=-ut.recursiveBBox.min.x:ir.x<-Jf&&(ki.x=-ut.recursiveBBox.max.x),ir.y>Jf?ki.y=-ut.recursiveBBox.min.y:ir.y<-Jf&&(ki.y=-ut.recursiveBBox.max.y),ir.z>Jf?ki.z=-ut.recursiveBBox.min.z:ir.z<-Jf&&(ki.z=-ut.recursiveBBox.max.z),ki.applyMatrix3(VE.invert())}else ki.copy(st).multiplyScalar(this.activeEvent.data.snapSurfaceOffset);$.fromPosition.add(ki)}this.activeEvent.data.autoOrient&&(ir.set(0,1,0).cross(st),ir.length()<1e-4&&ir.set(-1,0,0).cross(st),ki.crossVectors(MN,ir),$.orientationMatrix.makeBasis(ir,ki,st)),$.pointStart.copy($.fromPosition),$.pointEnd.copy($.pointStart),$.currentDampingFactor=this.activeEvent.snapDampingFactor,$.snapped=!0,this.lastDropDestination!==rt.object&&(this.lastDropDestination=rt.object,this.activeEvent.actionsDrop.Transition.forEach(ut=>{ut.play()}),this.activeEvent.actionsDrop.Animation.forEach(ut=>{ut.play()}),this.activeEvent.actionsDrop.Audio.forEach(ut=>{ut.dispatchGameControl("start")}),this.activeEvent.actionsDrop.Particles.forEach(ut=>{ut.dispatchGameControl("start")}),this.activeEvent.actionsDrop.Create.forEach(ut=>{ut.dispatchThrottled()}))}else $.orientationMatrix.makeRotationFromQuaternion($.quat0),this.lastDropDestination=null,$.currentDampingFactor=this.activeEvent.data.dampingFactor,this.calcPlaneIntersectPos($.obj,$.pointEnd,this.activeEvent.data.plane,this.activeEvent.data.referenceFrame),this.activeEvent.actionsDrop.Transition.forEach(st=>{st.stop(),st.object.currentState!==null&&st.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrop.Animation.forEach(st=>{st.stop()}),this.activeEvent.actionsDrop.Audio.forEach(st=>{st.dispatchGameControl("stop")}),this.activeEvent.actionsDrop.Particles.forEach(st=>{st.dispatchGameControl("stop")});this.activeEvent.actionsDrag.Create.forEach(st=>{st.dispatchThrottled()}),this.activeEvent.actionsDrag.SetVariable.forEach(st=>st.checkConditions()),this.activeEvent.actionsDrag.SetVariable.forEach(st=>st.dispatch()),this.activeEvent.actionsDrag.DynamicVariablePlay.forEach(st=>st.dispatch()),this.activeEvent.wasDragEventTriggered===!1&&(this.activeEvent.wasDragEventTriggered=!0,this.activeEvent.actionsDrag.Transition.forEach(st=>{st.play()}),this.activeEvent.actionsDrag.Animation.forEach(st=>{st.play()}),this.activeEvent.actionsDrag.Audio.forEach(st=>{st.dispatchGameControl("start")}),this.activeEvent.actionsDrag.Particles.forEach(st=>{st.dispatchGameControl("start")})),this.dragTimeout&&window.clearTimeout(this.dragTimeout),this.dragTimeout=window.setTimeout(()=>{!this.activeEvent||(this.activeEvent.wasDragEventTriggered=!1,this.activeEvent.actionsDrag.Audio.forEach(st=>{st.dispatchGameControl("stop")}),this.activeEvent.actionsDrag.Particles.forEach(st=>{st.dispatchGameControl("stop")}),this.activeEvent.actionsDrag.Transition.forEach(st=>{st.stop(),st.object.currentState!==null&&st.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrag.Animation.forEach(st=>{st.stop()}))},500),this.updateDragItem($),$.obj.dispatchEvent({type:"requestRender"})}},this.onPointerUp=a=>{var o;if(this.activeEvent&&this.activeEvent.activeDragItem){this.activeEvent.data.cursor==="hand"&&this.setCursor("grab");let c=((o=this.activeEvent.activeDragItem.obj.data.physics)==null?void 0:o.rigidBody)==="dynamic";this.activeEvent.activeDragItem.snapped===!1&&this.activeEvent.data.drop&&this.activeEvent.data.resetOnSnapFail&&(this.eventManager.controlsManager.usePhysics===!1||!c)&&(this.activeEvent.activeDragItem.reset=this.activeEvent.data.resetOnSnapFail,this.activeEvent.activeDragItem.paused=!1,this.activeEvent.activeDragItem.currentDampingFactor=this.activeEvent.resetDampingFactor),this.eventManager.controlsManager.usePhysics&&c&&(this.eventManager.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.pop(),this.activeEvent.activeDragItem.obj.rigidBody.setBodyType(0,!0),this.activeEvent.activeDragItem.paused=!0),this.activeEvent.wasDragEventTriggered===!0&&(this.activeEvent.wasDragEventTriggered=!1,this.activeEvent.actionsDrag.Transition.forEach(d=>{d.stop(),d.object.currentState!==null&&d.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrag.Animation.forEach(d=>{d.stop()}),this.activeEvent.actionsDrag.Audio.forEach(d=>{d.dispatchGameControl("stop")}),this.activeEvent.actionsDrag.Particles.forEach(d=>{d.dispatchGameControl("stop")}),this.activeEvent.actionsDrop.SetVariable.forEach(d=>d.checkConditions()),this.activeEvent.actionsDrop.SetVariable.forEach(d=>d.dispatch()),this.activeEvent.actionsDrop.DynamicVariablePlay.forEach(d=>d.dispatch())),this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!0)}};let s={};e.page.traverseEntity(a=>{a.component&&(s[a.component.uuid]?s[a.component.uuid].push(a.uuid):s[a.component.uuid]=[a.uuid])}),e.page.traverseEntity(a=>{var o;(o=a.data)==null||o.events.filter(c=>c.data.type==="DragDrop"&&!c.data.disabled).forEach(c=>{this.events.push(new UE(a,c.data,e.page,e.sharedAssets,i,s))})})}connect(){if(!this.events.length)return;this.domEventsNeeded.clear(),this.domEventsNeeded.add("pointerdown");let e=this.eventContext.domElement;e.addEventListener("pointerdown",this.onPointerDown),e.addEventListener("pointermove",this.onPointerMove),e.addEventListener("pointerup",this.onPointerUp),this.domEventsNeeded.add("pointermove")}disconnect(){if(!this.events.length)return;this.domEventsNeeded.clear();let e=this.eventContext.domElement;e.removeEventListener("pointerdown",this.onPointerDown),e.removeEventListener("pointermove",this.onPointerMove),e.removeEventListener("pointerup",this.onPointerUp),this.events.forEach(i=>i.dispose())}setCursor(e){this.eventContext.domElement.style.cursor=e}onAnimationFrameDamping(){for(let e of this.events)for(let i of e.dragItems)i.paused||this.updateDragItem(i,!0)}calcPlaneIntersectPos(e,i,s,a){let{getCamera:o,raycaster:c}=this.eventContext;o().getWorldDirection(cc),cc.negate();let d=yu.identity();switch(a==="parent"?dJ.multiplyMatrices(e.parent.matrixWorld,e.hiddenMatrix).decompose(ir,d,ki):a==="local"&&e.matrixWorld.decompose(ir,d,ki),s){case"x":ir.set(1,0,0).applyQuaternion(d),Zf.copy(cc).cross(ir),aa.copy(ir).cross(Zf);break;case"y":ir.set(0,1,0).applyQuaternion(d),Zf.copy(cc).cross(ir),aa.copy(ir).cross(Zf);break;case"z":ir.set(0,0,1).applyQuaternion(d),Zf.copy(cc).cross(ir),aa.copy(ir).cross(Zf);break;case"xy":aa.set(0,0,1).applyQuaternion(d);break;case"yz":aa.set(1,0,0).applyQuaternion(d);break;case"xz":aa.set(0,1,0).applyQuaternion(d);break;case"adaptive":cc.angleTo(ki.set(0,1,0))>Math.PI/6?(ir.crossVectors(ki.set(0,1,0),cc),aa.crossVectors(ir,ki)):aa.set(0,1,0);break;default:aa.copy(cc);break}gu.setFromMatrixPosition(e.matrixWorld);let g=e.userData.lockedPlane?e.userData.worldPosition0:gu;if(TN.setFromNormalAndCoplanarPoint(aa,g),!!c.ray.intersectPlane(TN,i)&&(s==="x"||s==="y"||s==="z")){let b=ki.subVectors(i,g).dot(ir);i.copy(g).addScaledVector(ir,b)}}updateDragItem(e,i=!1){var s,a;gu.setFromMatrixPosition(e.obj.matrixWorld),e.reset==="current"?Mg.subVectors(e.fromPosition,gu).divideScalar(e.currentDampingFactor):e.reset==="original"?(Mg.subVectors(e.obj.userData.worldPosition0,gu).divideScalar(e.currentDampingFactor),e.fromPosition.copy(e.obj.userData.worldPosition0),e.pointStart.copy(e.fromPosition),e.pointEnd.copy(e.pointStart)):Mg.subVectors(e.pointEnd,e.pointStart).add(e.fromPosition).sub(gu).divideScalar(e.currentDampingFactor),e.paused=e.currentDampingFactor>1?Mg.length()<hJ:!0,(this.activeEvent&&this.activeEvent.data.dampingFactor===1||i)&&fJ(e,Mg.add(gu),(s=this.activeEvent)!=null&&s.data.drop&&((a=this.activeEvent)!=null&&a.data.autoOrient)?e.orientationMatrix:null),e.obj.dispatchEvent({type:"beginEvent",eventName:"DragDrop"}),this.eventManager.requestRender()}},$f=new _,GE=new _,Za=new _,Ja=new _,CN=new ii,pJ=.01,mJ={type:"requestRender"},gJ=function(){let e=new _,i=new _;return(s,a,o)=>o>0?(e.subVectors(s,a),e.length()<=o?s:i.copy(a).add(e.normalize().multiplyScalar(o))):a}(),PN=function(){let e=new ce$1;return(i,s)=>{i.position.copy(s),i.parent!==null&&(e.copy(i.parent.matrixWorld).invert(),i.position.applyMatrix4(e)),e.copy(i.hiddenMatrix).invert(),i.position.applyMatrix4(e),i.updateMatrix(),i.hasNonUniformScale&&(i.updateMatrixWorld(),i.updateMatrixWorldSVD()),i instanceof pr&&Rn(i.parent)&&i.invalidateDownstreamBooleanData(!0)}}(),jE=class{constructor(e,i,s,a,o){this.data=e,this.object=i,this.paused=!1,this.currentDampingFactor=1,this.snapComplete=!1,this.isReset=!1,this.worldPosition0=new _,this.timeoutId=null,this.delayFinished=!0,this.wasOutside=!1,this.data={...Wv.defaultData,...e,...e.resetOnPointerLeave===void 0&&{resetOnPointerLeave:!1}},e.target===void 0||e.target==="cursor"||(this.target=s.find(e.target)),this.data.dampingFactor&&(this.currentDampingFactor=this.data.dampingFactor),this.resetDampingFactor=80/this.data.resetSpeed+1,this.object.getWorldPosition(this.worldPosition0),this.actions=Mr$1(e,e.actions,s,a,o,i)}},Ib=class extends zr$1{constructor(e,i){super(e),this.events=[],this.pairOfEventListeners=[],this.onMouseMove=a=>{if(!($e$1.length>1)){this.eventContext.updateRaycaster(a);for(let o of this.events)o.target===void 0&&this.updateSingleEvent(o)}},this.onMouseEnter=a=>{for(let o of this.events)o.target===void 0&&(o.isReset=!1,o.currentDampingFactor=o.data.dampingFactor)},this.onMouseLeave=a=>{for(let o of this.events)o.target===void 0&&(o.data.resetOnPointerLeave&&(o.isReset=!0,o.currentDampingFactor=o.resetDampingFactor),this.updateSingleEvent(o))},this.onTargetChange=a=>()=>{this.updateSingleEvent(a)};let{page:s}=this.eventContext;s.traverseEntity(a=>{var c,d;let o=(c=a.data)==null?void 0:c.events.find(g=>g.data.type==="Follow"&&!g.data.disabled);o&&(!s.data.globalPhysics.usePhysics||((d=a.dataPatched.physics)==null?void 0:d.rigidBody)!=="dynamic")&&this.events.push(new jE(o.data,a,s,e.sharedAssets,i))})}connect(){if(!this.events.length)return;let{domElement:e,eventElement:i}=this.eventContext;this.domEventsNeeded.clear(),Ii&&(this.domEventsNeeded.add("pointerdown"),e.addEventListener("pointerdown",this.onMouseMove)),this.domEventsNeeded.add("pointermove"),i.addEventListener("pointermove",this.onMouseMove),this.eventContext.useWindowEvents||(e.addEventListener("pointerenter",this.onMouseEnter),e.addEventListener("pointerleave",this.onMouseLeave));for(let s of this.events)if(s.target!==void 0){let a=s.target,o=this.onTargetChange(s);this.pairOfEventListeners.push([a,o]),a.addEventListener("requestRender",o)}}disconnect(){if(!this.events.length)return;let{domElement:e,eventElement:i}=this.eventContext;this.domEventsNeeded.clear(),Ii&&e.removeEventListener("pointerdown",this.onMouseMove),i.removeEventListener("pointermove",this.onMouseMove),e.removeEventListener("pointerenter",this.onMouseEnter),e.removeEventListener("pointerleave",this.onMouseLeave);for(let[s,a]of this.pairOfEventListeners)s.removeEventListener("requestRender",a);for(let s of this.events)s.paused=!0,s.isReset=!1,hr$1(s.actions)}onAnimationFrameDamping(){for(let e of this.events)e.paused||this.updateSingleEvent(e,!0)}updateSingleEvent(e,i=!1){var d;this.events.forEach(g=>{g.actions.Create.forEach(b=>{b.dispatchThrottled()})});let{plane:s,limitDistance:a,limitDistanceEnabled:o}=e.data;if(e.object.getWorldPosition(Za),e.isReset)Ja.copy(e.worldPosition0);else if(e.target)e.target.getWorldPosition(Ja);else{let{getCamera:g,raycaster:b}=this.eventContext;if(s==="custom"?(g().getWorldDirection(GE),GE.negate(),$f.copy(GE)):s==="xy"?$f.set(0,0,1):s==="xz"?$f.set(0,1,0):s==="yz"&&$f.set(1,0,0),CN.setFromNormalAndCoplanarPoint($f,Za),!b.ray.intersectPlane(CN,Ja))return}if(!e.isReset){if(Ja.distanceTo(e.worldPosition0)>a&&o&&e.target)if(e.snapComplete=!1,e.data.snapDelay&&(e.delayFinished=!1,typeof window<"u"&&e.timeoutId!==null&&(window.clearTimeout(e.timeoutId),e.timeoutId=null)),e.wasOutside=!0,e.data.resetAfterDistanceLimit)Ja.copy(e.worldPosition0),e.currentDampingFactor=e.resetDampingFactor;else return;else if(e.wasOutside&&(e.data.snapDelay&&typeof window<"u"&&(e.timeoutId=window.setTimeout(()=>{e.delayFinished=!0,e.paused=!1,this.updateSingleEvent(e)},e.data.snapDelay*1e3)),e.currentDampingFactor=e.data.dampingFactor,e.wasOutside=!1),e.delayFinished===!1)return}e.data.enabledTranslation[0]===!1&&(Ja.x=Za.x),e.data.enabledTranslation[1]===!1&&(Ja.y=Za.y),e.data.enabledTranslation[2]===!1&&(Ja.z=Za.z);let c=gJ(Za,Ja,e.wasOutside?0:e.data.maxDelta);if(e.currentDampingFactor>1){let g=$f.subVectors(c,Za).divideScalar(e.currentDampingFactor);Za.add(g),i&&PN(e.object,Za),e.paused=g.length()<pJ}else PN(e.object,c),e.paused=!0;(d=e.object)==null||d.dispatchEvent({type:"beginEvent",eventName:"Follow"}),e.object.dispatchEvent(mJ)}},Cg=new _,Rb=new _,Pg=new ce$1,ep=new Qe,uc=new Qe,Dg=new _,Og=new _,vu=new _,$a=new _,HE=new ii,yJ=1e-6,vJ={type:"requestRender"},xJ={type:"changeRotation"},DN=function(){let e=new ce$1;return function(i,s){i.parent!==null?e.multiplyMatrices(i.parent.matrixWorld,i.hiddenMatrix):e.copy(i.hiddenMatrix),s.premultiply(RE(e).invert()),i.rotation.setFromRotationMatrix(s),i.updateMatrix(),i instanceof pr&&Rn(i.parent)&&i.invalidateDownstreamBooleanData(!0)}}(),WE=class{constructor(e,i,s){this.object=i,this.paused=!1,this.currentDampingFactor=1,this.isReset=!1,this.worldQuaternion0=new Qe,this.timeoutId=null,this.delayFinished=!0,this.wasOutside=!1,this.data={...qv.defaultData,...e,...e.resetOnPointerLeave===void 0&&{resetOnPointerLeave:!1}},e.target===void 0||e.target==="cursor"||(this.target=s.find(e.target)),this.data.dampingFactor&&(this.currentDampingFactor=this.data.dampingFactor),this.object.getWorldQuaternion(this.worldQuaternion0),this.resetDampingFactor=80/this.data.resetSpeed+1}},Lb=class extends zr$1{constructor(e){super(e),this.events=[],this.pairOfEventListeners=[],this.pairOfUserEventListeners=[],this.onMouseMove=s=>{if(!($e$1.length>1)){this._lastMouseEvent=s,this.eventContext.updateRaycaster(s);for(let a of this.events)a.target===void 0&&this.updateSingleEvent(a)}},this.onMouseEnter=s=>{for(let a of this.events)a.target===void 0&&(a.isReset=!1,a.currentDampingFactor=a.data.dampingFactor)},this.onMouseLeave=s=>{for(let a of this.events)a.target===void 0&&(a.data.resetOnPointerLeave&&(a.isReset=!0,a.currentDampingFactor=a.resetDampingFactor),this.updateSingleEvent(a))},this.onScroll=s=>{if(this._lastMouseEvent){let a=new PointerEvent("pointermove",{clientX:this._lastMouseEvent.clientX,clientY:this._lastMouseEvent.clientY,bubbles:!0,cancelable:!0,view:window});this.eventContext.eventElement.dispatchEvent(a)}},this.onTargetChange=s=>()=>{this.updateSingleEvent(s)},this.createUserEventListener=s=>({eventName:a,target:o})=>{if(!a||!o)return;let c=oa(a);c&&c==="LookAt"&&this.updateSingleEvent(s)};let{page:i}=this.eventContext;i.traverseEntity(s=>{var o,c;let a=(o=s.data)==null?void 0:o.events.find(d=>d.data.type==="LookAt"&&!d.data.disabled);a&&(!i.data.globalPhysics.usePhysics||((c=s.dataPatched.physics)==null?void 0:c.rigidBody)!=="dynamic")&&this.events.push(new WE(a.data,s,i))})}connect(){if(!this.events.length)return;let{domElement:e,eventElement:i}=this.eventContext;this.domEventsNeeded.clear(),Ii&&(this.domEventsNeeded.add("pointerdown"),e.addEventListener("pointerdown",this.onMouseMove)),this.domEventsNeeded.add("pointermove"),i.addEventListener("pointermove",this.onMouseMove),this.eventContext.useWindowEvents?i.addEventListener("scroll",this.onScroll):(e.addEventListener("pointerenter",this.onMouseEnter),e.addEventListener("pointerleave",this.onMouseLeave));for(let s of this.events){if(s.target!==void 0){let c=this.onTargetChange(s),d=s.target;this.pairOfEventListeners.push([d,c]),d.addEventListener("requestRender",c)}let a=this.createUserEventListener(s),o=s.object;this.pairOfUserEventListeners.push([o,a]),o.addEventListener("userEvent",a)}}disconnect(){if(!this.events.length)return;let{domElement:e,eventElement:i}=this.eventContext;this.domEventsNeeded.clear(),Ii&&e.removeEventListener("pointerdown",this.onMouseMove),i.removeEventListener("pointermove",this.onMouseMove),e.removeEventListener("pointerenter",this.onMouseEnter),e.removeEventListener("pointerleave",this.onMouseLeave),i.removeEventListener("scroll",this.onScroll);for(let[s,a]of this.pairOfEventListeners)s.removeEventListener("requestRender",a);for(let[s,a]of this.pairOfUserEventListeners)s.removeEventListener("userEvent",a);for(let s of this.events)s.paused=!0,s.isReset=!1}onAnimationFrameDamping(){for(let e of this.events)e.paused||this.updateSingleEvent(e)}updateSingleEvent(e){var rt;let{tilt:i,axis:s,distance:a,plane:o,limitDistance:c,enabledRotation:d,limitDistanceEnabled:g}=e.data,{getCamera:b,raycaster:j}=this.eventContext,{object:_e,target:$}=e;if(_e.getWorldPosition(Dg),!e.isReset)if(e.target)e.target.getWorldPosition(Og);else{if(o==="custom"?(b().getWorldDirection(Rb),Rb.negate(),HE.setFromNormalAndCoplanarPoint(Rb,Dg)):(o==="xy"?Cg.set(0,0,1):o==="xz"?Cg.set(0,1,0):o==="yz"&&Cg.set(1,0,0),HE.setFromNormalAndCoplanarPoint(Cg,Dg)),!j.ray.intersectPlane(HE,Og))return;a>0&&(o==="custom"||o===void 0)&&Og.addScaledVector(Rb,a)}if(e.isReset||($?i==="target"?vu.copy($.up).applyMatrix4(Pg.extractRotation($.matrixWorld)).normalize():d.some(st=>st===!1)?(s==="x"?($a.set(0,0,1),d[2]===!1&&$a.set(0,1,0)):s==="y"?($a.set(1,0,0),d[0]===!1&&$a.set(0,0,1)):($a.set(0,1,0),d[1]===!1&&$a.set(1,0,0)),vu.copy($a).applyQuaternion(e.worldQuaternion0).normalize()):vu.set(0,1,0):o==="custom"?vu.set(0,1,0):vu.copy(Cg)),e.isReset)uc.copy(e.worldQuaternion0);else if(Dg.distanceTo(Og)>c&&g&&$)if(e.data.snapDelay&&(e.delayFinished=!1,typeof window<"u"&&e.timeoutId!==null&&(window.clearTimeout(e.timeoutId),e.timeoutId=null)),e.wasOutside=!0,e.data.resetAfterDistanceLimit)uc.copy(e.worldQuaternion0),e.currentDampingFactor=e.resetDampingFactor;else return;else{if(e.wasOutside&&(e.data.snapDelay&&typeof window<"u"&&(e.timeoutId=window.setTimeout(()=>{e.delayFinished=!0,e.paused=!1,this.updateSingleEvent(e)},e.data.snapDelay*1e3)),e.currentDampingFactor=e.data.dampingFactor,e.wasOutside=!1),e.delayFinished===!1)return;bJ(Pg,Og,Dg,vu,s,$a),uc.setFromRotationMatrix(Pg),ep.setFromUnitVectors($a.applyQuaternion(uc),vu),d.some(st=>st===!1)&&i!=="target"&&uc.premultiply(ep).normalize()}e.currentDampingFactor>1?(_e.updateWorldMatrix(!0,!1),ep.setFromRotationMatrix(RE(_e.matrixWorld)),ep.slerp(uc,1/e.currentDampingFactor),DN(_e,Pg.makeRotationFromQuaternion(ep)),e.paused=8*(1-ep.dot(uc))<yJ):(DN(_e,Pg.makeRotationFromQuaternion(uc)),e.paused=!0),(rt=e.object)==null||rt.dispatchEvent({type:"beginEvent",eventName:"LookAt"}),_e.dispatchEvent(vJ),_e.dispatchEvent(xJ)}},Vs=new _,Vi=new _,hi=new _;function bJ(e,i,s,a,o,c){let d=e.elements;hi.subVectors(i,s),hi.lengthSq()===0&&(hi.z=1),hi.normalize(),Vi.crossVectors(a,hi),Vi.lengthSq()===0&&(Math.abs(a.z)===1?hi.x+=1e-4:hi.z+=1e-4,hi.normalize(),Vi.crossVectors(a,hi)),Vi.normalize(),Vs.crossVectors(hi,Vi),o==="x"?c.z===1?[Vi,Vs,hi]=[hi,Vi,Vs]:(Vi.negate(),[Vi,hi]=[hi,Vi]):o==="y"?c.x===1?[Vi,Vs,hi]=[Vs,hi,Vi]:(Vi.negate(),[Vs,hi]=[hi,Vs]):c.x===1&&(Vi.negate(),[Vi,Vs]=[Vs,Vi]),d[0]=Vi.x,d[4]=Vs.x,d[8]=hi.x,d[1]=Vi.y,d[5]=Vs.y,d[9]=hi.y,d[2]=Vi.z,d[6]=Vs.z,d[10]=hi.z}var qE=class{constructor(e,i,s,a,o,c){this.id=e,this.data=i,this.object=s,this.entered=!1,this.actions=Mr$1(i,i.actions,a,o,c,s)}disconnect(){hr$1(this.actions)}dispatchEnter(){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.entered||(this.entered=!0,this.actions.Transition.forEach(e=>e.playFromCurrent()),this.actions.Animation.forEach(e=>e.play()),this.actions.Create.forEach(e=>e.dispatch()),this.actions.Particles.forEach(e=>e.dispatchBasic()),this.actions.Destroy.forEach(e=>e.dispatch()),this.actions.SwitchCamera.forEach(e=>e.playFromCurrent()),this.actions.SceneTransition.forEach(e=>e.dispatch()),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()))}dispatchLeave(){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.entered&&(this.entered=!1,this.actions.Transition.forEach(e=>e.reverseFromCurrent()),this.actions.Particles.forEach(e=>e.reverseFromCurrent()),this.actions.SwitchCamera.forEach(e=>e.reverseFromCurrent()))}dispatchUserEvent(e){this.actions.Transition.forEach(i=>{i.object.currentTransitionEvent!==this&&(i.object.currentTransitionEvent=this,i.init())}),e?(this.actions.Transition.forEach(i=>i.reverseFromCurrent()),this.actions.Particles.forEach(i=>i.reverseFromCurrent()),this.actions.Animation.forEach(i=>i.reverseFromCurrent()),this.actions.SwitchCamera.forEach(i=>i.reverseFromCurrent())):(this.actions.Transition.forEach(i=>i.playFromCurrent()),this.actions.Animation.forEach(i=>i.playFromCurrent()),this.actions.Create.forEach(i=>i.dispatch()),this.actions.Particles.forEach(i=>i.dispatchBasic()),this.actions.Destroy.forEach(i=>i.dispatch()),this.actions.SwitchCamera.forEach(i=>i.playFromCurrent())),this.actions.SceneTransition.forEach(i=>i.dispatch()),this.actions.SetVariable.forEach(i=>i.checkConditions()),this.actions.SetVariable.forEach(i=>i.dispatch()),this.actions.DynamicVariablePlay.forEach(i=>i.dispatch())}},Bb=class extends zr$1{constructor(e,i){super(e),this.eventsPerObjects={},this.objects=[],this.objects2D=[],this._prevObjects=[],this.onMouseDown=c=>{$e$1.length>1||(this.eventContext.updateRaycaster(c),this.handleMouseHoverEvent())},this.onMouseUp=c=>{$e$1.length>1||this.handleMouseHoverEvent(!0)},this.onMouseMove=c=>{$e$1.length>1||(this.eventContext.updateRaycaster(c),this.handleMouseHoverEvent())},this.onUserEvent=({eventName:c,target:d,reverse:g})=>{var j;if(!c||!d)return;let b=oa(c);b&&b==="MouseHover"&&(d.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),(j=this.eventsPerObjects[d.uuid])==null||j.forEach(_e=>_e.dispatchUserEvent(g)))};let{page:s,sharedAssets:a}=this.eventContext,o=(c,d)=>{var g,b;if(!(!c.visible||!((g=c.data)!=null&&g.events.length))){for(let{id:j,data:_e}of c.data.events)if(!_e.disabled&&_e.type==="MouseHover")try{let $=new qE(j,_e,c,s,a,i);this.eventsPerObjects[c.uuid]?this.eventsPerObjects[c.uuid].push($):this.eventsPerObjects[c.uuid]=[$]}catch{}(b=this.eventsPerObjects[c.uuid])!=null&&b.length&&this.objects.push(c instanceof Jt?d:c)}};s.traverseEntity(c=>{var d;(c instanceof _r$1||c instanceof mr)&&((d=c.frame)==null||d.traverse(g=>{o(g,c)})),o(c)})}connect(){if(!this.objects.length)return;let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),Ii&&(this.domEventsNeeded.add("pointerdown"),e.addEventListener("pointerdown",this.onMouseDown),this.domEventsNeeded.add("pointerup"),e.addEventListener("pointerup",this.onMouseUp)),this.domEventsNeeded.add("pointermove"),e.addEventListener("pointermove",this.onMouseMove),this.objects.forEach(i=>{i.addEventListener("userEvent",this.onUserEvent)})}disconnect(){if(!this.objects.length)return;let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),Ii&&(e.removeEventListener("pointerdown",this.onMouseDown),e.removeEventListener("pointerup",this.onMouseUp)),e.removeEventListener("pointermove",this.onMouseMove),Object.values(this.eventsPerObjects).forEach(i=>{i.forEach(s=>{s.disconnect()})}),this.objects.forEach(i=>{i.removeEventListener("userEvent",this.onUserEvent)})}handleMouseHoverEvent(e=!1){let i=[];if(!e){let{stopRaycast:s,raycaster:a,page:o,pointerScreen:c}=this.eventContext,d=!1;if(o.uiCanvas&&(d=yo(o,[c.x,c.y],Object.keys(this.eventsPerObjects),g=>{i.push(g)})),s&&!d){let g=Qf(a,o,this.objects);i=Tg(g),g.forEach(b=>{var j,_e;b.object instanceof _r$1&&yo(b.object,[((j=b==null?void 0:b.uv)==null?void 0:j.x)??0,((_e=b==null?void 0:b.uv)==null?void 0:_e.y)??0],Object.keys(this.eventsPerObjects),$=>{i.push($)})})}else this.objects.forEach(g=>{var j,_e;let b=Kf(a,g);b&&(i.push(g),g instanceof _r$1&&yo(g,[((j=b==null?void 0:b.uv)==null?void 0:j.x)??0,((_e=b==null?void 0:b.uv)==null?void 0:_e.y)??0],Object.keys(this.eventsPerObjects),$=>{i.push($)}))})}this._prevObjects.length&&this._prevObjects.forEach(s=>{var a;i.includes(s)||(s.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),(a=this.eventsPerObjects[s.uuid])==null||a.forEach(o=>o.dispatchLeave()))}),i.length&&i.forEach(s=>{var a;s.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),(a=this.eventsPerObjects[s.uuid])==null||a.forEach(o=>o.dispatchEnter())}),this._prevObjects=i}},YE=class{constructor(e,i,s,a,o,c){this.id=e,this.data=i,this.object=s,this.scrollCounter=0,this.actions=Mr$1(i,i.actions,a,o,c,s)}connect(){this.scrollCounter=0}disconnect(){hr$1(this.actions)}dispatch(e){this.actions.Transition.forEach(a=>{a.object.currentTransitionEvent!==this&&(a.object.currentTransitionEvent=this,a.init())});let i=e>0?1:-1;this.scrollCounter+=i,this.scrollCounter=Math.min(Math.max(this.scrollCounter,0),this.data.steps);let s=this.scrollCounter/this.data.steps;this.actions.Transition.forEach(a=>a.seek(s)),this.actions.Animation.forEach(a=>a.seek(i)),this.actions.Create.forEach(a=>a.dispatchThrottled()),this.actions.SetVariable.forEach(a=>a.checkConditions()),this.actions.SetVariable.forEach(a=>a.dispatch()),this.actions.DynamicVariablePlay.forEach(a=>a.dispatch())}dispatchUserEvent(e){this.actions.Transition.forEach(i=>{i.object.currentTransitionEvent!==this&&(i.object.currentTransitionEvent=this,i.init())}),e?(this.actions.Transition.forEach(i=>i.reverseFromCurrent()),this.actions.Animation.forEach(i=>i.reverseFromCurrent())):(this.actions.Transition.forEach(i=>{i.playFromCurrent()}),this.actions.Animation.forEach(i=>{i.playFromCurrent()})),this.actions.Create.forEach(i=>i.dispatchThrottled()),this.actions.SetVariable.forEach(i=>i.checkConditions()),this.actions.SetVariable.forEach(i=>i.dispatch()),this.actions.DynamicVariablePlay.forEach(i=>i.dispatch())}},XE=class{constructor(e,i,s,a,o,c,d){this.id=e,this.data=i,this.object=s,this.domElement=c,this.eventManager=d,this.scrollStart=0,this.scrollEnd=0,this.actions=Mr$1(i,i.actions,a,o,d,s)}computeScrollBounds(){let e=this.domElement.getBoundingClientRect(),i=document.body,s=document.documentElement,a=window.pageYOffset||s.scrollTop||i.scrollTop,o=s.clientTop||i.clientTop||0,c=Math.round(e.top+a-o);if(this.data.startFrom==="enter"){let d=window.innerHeight,g=e.height,b=this.data.enterAnchor,j=b==="top"?d:b==="bottom"?d-g:d-g*.5;this.scrollStart=c-j}else this.scrollStart=0;this.scrollStart+=this.data.startOffset??0,this.scrollEnd=this.scrollStart+(this.data.endAfter??400),this.box=e,this.computeScroll({x:window.scrollX,y:window.scrollY})}connect(){this.computeScrollBounds()}disconnect(){hr$1(this.actions)}handleResize(){this.computeScrollBounds()}get isInvalidBox(){return this.box===void 0||this.box.width===0&&this.box.height===0&&this.box.top===0&&this.box.bottom===0}computeScroll({x:e,y:i}){this.actions.Transition.forEach(o=>{o.object.currentTransitionEvent!==this&&(o.object.currentTransitionEvent=this,o.init())});let s=this.scrollEnd-this.scrollStart,a=Math.min(1,Math.max(0,(i-this.scrollStart)/s));this.actions.Transition.forEach(o=>o.seek(a)),this.actions.Animation.forEach(o=>o.seek(a)),this.actions.Create.forEach(o=>o.dispatchThrottled()),this.actions.SetVariable.forEach(o=>o.checkConditions()),this.actions.SetVariable.forEach(o=>o.dispatch()),this.actions.DynamicVariablePlay.forEach(o=>o.dispatch())}dispatch(e){this.isInvalidBox&&this.computeScrollBounds(),this.computeScroll(e)}dispatchUserEvent(e){this.actions.Transition.forEach(i=>{i.object.currentTransitionEvent!==this&&(i.object.currentTransitionEvent=this,i.init())}),e?(this.actions.Transition.forEach(i=>i.reverseFromCurrent()),this.actions.Animation.forEach(i=>i.reverseFromCurrent())):(this.actions.Transition.forEach(i=>{i.playFromCurrent()}),this.actions.Animation.forEach(i=>{i.playFromCurrent()})),this.actions.Create.forEach(i=>i.dispatchThrottled()),this.actions.SetVariable.forEach(i=>i.checkConditions()),this.actions.SetVariable.forEach(i=>i.dispatch()),this.actions.DynamicVariablePlay.forEach(i=>i.dispatch())}},Nb=class extends zr$1{constructor(e,i){super(e),this.wheelEventsPerObject=new Map,this.scrollEventsPerObject=new Map,this.isInview=!0,this.handleResize=()=>{[...this.scrollEventsPerObject.entries()].forEach(([g,b])=>{b.forEach(j=>j.handleResize())})},this.onScroll=g=>{if(!this.isInview)return;let b={y:window.scrollY,x:window.scrollX};[...this.scrollEventsPerObject.entries()].forEach(([j,_e])=>{j.dispatchEvent({type:"beginEvent",eventName:"Scroll",scroll:b}),_e.forEach($=>$.dispatch(b))})},this.onWheel=g=>{!this.isInview||g.ctrlKey||[...this.wheelEventsPerObject.entries()].forEach(([b,j])=>{b.dispatchEvent({type:"beginEvent",eventName:"Scroll",deltaY:g.deltaY}),j.forEach(_e=>_e.dispatch(g.deltaY))})},this.onUserEvent=({eventName:g,target:b,reverse:j})=>{var $;if(!g||!b)return;let _e=oa(g);_e&&_e==="Scroll"&&(b.dispatchEvent({type:"beginEvent",eventName:"Scroll"}),($=this.wheelEventsPerObject.get(b))==null||$.forEach(rt=>{rt.dispatchUserEvent(j)}))};let{page:s,sharedAssets:a,domElement:o,isExport:c}=this.eventContext,d=g=>{var b,j,_e;if((b=g.data)!=null&&b.events.length){for(let{id:$,data:rt}of g.data.events)if(!rt.disabled&&rt.type==="Scroll")if(rt.trigger==="load"||!c){let st=new YE($,rt,g,s,a,i);this.wheelEventsPerObject.has(g)?(j=this.wheelEventsPerObject.get(g))==null||j.push(st):this.wheelEventsPerObject.set(g,[st])}else{let st=new XE($,rt,g,s,a,o,i);this.scrollEventsPerObject.has(g)?(_e=this.scrollEventsPerObject.get(g))==null||_e.push(st):this.scrollEventsPerObject.set(g,[st])}}};s.traverseEntity(g=>{var b;(g instanceof _r$1||g instanceof mr)&&((b=g.frame)==null||b.traverse(j=>{d(j)})),d(g)}),this.intersectionObserver=new IntersectionObserver(g=>{let b=g[0];b&&(this.isInview=b.isIntersecting)},{root:null})}connect(){this.intersectionObserver.observe(this.eventContext.domElement),[...this.wheelEventsPerObject.entries()].forEach(([e,i])=>{i.forEach(s=>s.connect()),e.addEventListener("userEvent",this.onUserEvent)}),[...this.scrollEventsPerObject.entries()].forEach(([e,i])=>{i.forEach(s=>s.connect()),e.addEventListener("userEvent",this.onUserEvent)}),[...this.wheelEventsPerObject.values()].some(e=>e.length)&&(this.domEventsNeeded.add("wheel"),window.addEventListener("wheel",this.onWheel)),[...this.scrollEventsPerObject.values()].some(e=>e.length)&&(this.domEventsNeeded.add("scroll"),window.addEventListener("scroll",this.onScroll),window.addEventListener("resize",this.handleResize))}disconnect(){window.removeEventListener("wheel",this.onWheel),window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.handleResize),this.intersectionObserver.unobserve(this.eventContext.domElement),this.domEventsNeeded.clear(),[...this.wheelEventsPerObject.entries()].forEach(([e,i])=>{i.forEach(s=>s.disconnect()),e.removeEventListener("userEvent",this.onUserEvent)}),[...this.scrollEventsPerObject.entries()].forEach(([e,i])=>{i.forEach(s=>s.disconnect()),e.removeEventListener("userEvent",this.onUserEvent)})}},QE=class{constructor(e,i,s,a,o,c){this.id=e,this.data=i,this.object=s,this.actions=Mr$1(i,i.actions,a,o,c,s)}disconnect(){hr$1(this.actions)}dispatch(){this.actions.Transition.forEach(e=>{e.play()}),this.actions.Animation.forEach(e=>{e.play()}),this.actions.SwitchCamera.forEach(e=>{e.play()}),this.actions.SceneTransition.forEach(e=>{e.dispatch()}),this.actions.Reset.forEach(e=>e.dispatch()),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()),this.actions.Create.forEach(e=>{e.dispatchFromStart()}),this.actions.Destroy.forEach(e=>{e.dispatchFromStart()})}dispatchAfter(e){this.actions.Audio.forEach(i=>{(i.interaction.data.triggerAfter??"any")===e&&(i.interaction instanceof ta?i.interaction.audioPlayer.play():i.interaction instanceof qf&&i.interaction.dispatch())}),this.actions.Video.forEach(i=>{let s=i.interaction.data.triggerAfter??"autoplay";s===e&&(i.interaction instanceof Qa?i.interaction.play(s==="autoplay"):i.interaction instanceof Xf&&i.interaction.dispatch())}),this.actions.Particles.forEach(i=>{(i.data.triggerAfter??"any")===e&&i.dispatchBasic()})}dispatchUserEvent(e){this.actions.Transition.forEach(i=>{i.object.currentTransitionEvent!==this&&(i.object.currentTransitionEvent=this,i.init())}),e?(this.actions.Transition.forEach(i=>i.reverseFromCurrent()),this.actions.Animation.forEach(i=>i.reverseFromCurrent()),this.actions.SwitchCamera.forEach(i=>i.reverseFromCurrent())):(this.actions.Transition.forEach(i=>i.playFromCurrent()),this.actions.Animation.forEach(i=>i.playFromCurrent()),this.actions.SwitchCamera.forEach(i=>i.playFromCurrent())),this.actions.SceneTransition.forEach(i=>i.dispatch()),this.actions.Reset.forEach(i=>i.dispatch()),this.actions.SetVariable.forEach(i=>i.checkConditions()),this.actions.SetVariable.forEach(i=>i.dispatch()),this.actions.DynamicVariablePlay.forEach(i=>i.dispatch()),this.actions.Create.forEach(i=>{i.dispatch()}),this.actions.Destroy.forEach(i=>{i.dispatch()}),this.actions.Audio.forEach(i=>{i.interaction instanceof ta?i.interaction.audioPlayer.play():i.interaction instanceof qf&&i.interaction.dispatch()}),this.actions.Video.forEach(i=>{i.interaction instanceof Qa?i.interaction.play():i.interaction instanceof Xf&&i.interaction.dispatch()}),this.actions.Particles.forEach(i=>{i.dispatchBasic()})}},Fb=class extends zr$1{constructor(e,i){super(e),this.eventManager=i,this.eventsPerObject=new Map,this.eventsAfterPerObject=new Map,this.onMouseDown=()=>{[...this.eventsAfterPerObject.entries()].forEach(([s,a])=>{s.dispatchEvent({type:"beginEvent",eventName:"Start"}),a.forEach(o=>{o.dispatchAfter("mouseDown")})})},this.onKeyDown=()=>{[...this.eventsAfterPerObject.entries()].forEach(([s,a])=>{s.dispatchEvent({type:"beginEvent",eventName:"Start"}),a.forEach(o=>{o.dispatchAfter("keyDown")})})},this.onAny=()=>{let{domElement:s,isExport:a}=this.eventContext;(a?document:s).removeEventListener("pointerdown",this.onAny),document.removeEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([o,c])=>{o.dispatchEvent({type:"beginEvent",eventName:"Start"}),c.forEach(d=>{d.dispatchAfter("any")})})},this.onSceneTransitionAudioVideoPlay=()=>{[...this.eventsAfterPerObject.entries()].forEach(([s,a])=>{s.dispatchEvent({type:"beginEvent",eventName:"Start"}),a.forEach(o=>{o.actions.Audio.forEach(c=>{c.interaction instanceof ta&&c.interaction.audioPlayer.play()}),o.actions.Video.forEach(c=>{let d=c.interaction.data.triggerAfter??"autoplay";c.interaction instanceof Qa&&c.interaction.play(d==="autoplay")}),o.actions.Particles.forEach(c=>{c.dispatchBasic()})})})},this.onPlay=()=>{[...this.eventsAfterPerObject.entries()].forEach(([s,a])=>{s.dispatchEvent({type:"beginEvent",eventName:"Start"}),a.forEach(o=>{o.dispatchAfter("autoplay")})})},this.onUserEvent=({eventName:s,target:a,reverse:o})=>{var d,g;if(!s||!a)return;let c=oa(s);c&&c==="Start"&&(a instanceof Jt||a.dispatchEvent({type:"beginEvent",eventName:"Start"}),(d=this.eventsPerObject.get(a))==null||d.forEach(b=>{b.dispatchUserEvent(o)}),(g=this.eventsAfterPerObject.get(a))==null||g.forEach(b=>{b.dispatchUserEvent(o)}))}}connect(){let{sharedAssets:e,page:i}=this.eventContext,s=a=>{var o,c,d,g,b;if((o=a.data)!=null&&o.events.length)for(let{id:j,data:_e}of a.data.events){if(_e.disabled||_e.type!=="Start")continue;let $=new QE(j,_e,a,i,e,this.eventManager);($.actions.Transition.length||$.actions.Animation.length||$.actions.SwitchCamera.length||$.actions.Create.length||$.actions.Destroy.length||$.actions.SceneTransition.length||$.actions.Reset.length||$.actions.SetVariable.length||$.actions.DynamicVariablePlay.length)&&(this.eventsPerObject.has(a)?(c=this.eventsPerObject.get(a))==null||c.push($):this.eventsPerObject.set(a,[$])),$.actions.Audio.length&&(this.eventsAfterPerObject.has(a)?(d=this.eventsAfterPerObject.get(a))==null||d.push($):this.eventsAfterPerObject.set(a,[$])),$.actions.Video.length&&(this.hasVideoAction=!0,this.eventsAfterPerObject.has(a)?(g=this.eventsAfterPerObject.get(a))==null||g.push($):this.eventsAfterPerObject.set(a,[$])),$.actions.Particles.length&&(this.eventsAfterPerObject.has(a)?(b=this.eventsAfterPerObject.get(a))==null||b.push($):this.eventsAfterPerObject.set(a,[$]))}};if(i.traverseEntity(a=>{var o;(a instanceof _r$1||a instanceof mr)&&((o=a.frame)==null||o.traverse(c=>{s(c)})),s(a)}),[...this.eventsAfterPerObject.values()].some(a=>a.length)){if(this.eventManager.activateCount===0){let{domElement:a,isExport:o}=this.eventContext,c=o?document:a;c.addEventListener("pointerdown",this.onMouseDown,{once:!0}),c.addEventListener("mousedown",this.onMouseDown,{once:!0}),document.addEventListener("keydown",this.onKeyDown,{once:!0}),c.addEventListener("pointerdown",this.onAny),c.addEventListener("mousedown",this.onAny),document.addEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([d,g])=>{d.addEventListener("userEvent",this.onUserEvent)})}else this.onSceneTransitionAudioVideoPlay();this.onPlay()}[...this.eventsPerObject.entries()].forEach(([a,o])=>{a.dispatchEvent({type:"beginEvent",eventName:"Start"}),o.forEach(c=>c.dispatch()),a.addEventListener("userEvent",this.onUserEvent)})}disconnect(){if([...this.eventsAfterPerObject.values()].some(e=>e.length)){let{domElement:e,isExport:i}=this.eventContext,s=i?document:e;s.removeEventListener("pointerdown",this.onMouseDown),s.removeEventListener("mousedown",this.onMouseDown),document.removeEventListener("keydown",this.onKeyDown),s.removeEventListener("pointerdown",this.onAny),s.removeEventListener("mousedown",this.onAny),document.removeEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([a,o])=>{a.removeEventListener("userEvent",this.onUserEvent),o.forEach(c=>c.disconnect())})}[...this.eventsPerObject.entries()].forEach(([e,i])=>{e.removeEventListener("userEvent",this.onUserEvent),i.forEach(s=>s.disconnect())}),this.eventsPerObject.clear(),this.eventsAfterPerObject.clear()}},kb=class{constructor(e,i,s,a,o,c){this.id=e,this.data=i,this.object=s,this.disabled=!1,this.alreadyPlayedNonTogglingActions=new Set,this.actions=Mr$1(i,i.actions,a,o,c,s),this.target=i.target,this.useToggle=i.runMode==="Toggle"}disconnect(){hr$1(this.actions)}dispatch(e){this.disabled||(this.actions.Transition.forEach(i=>{i.object.currentTransitionEvent!==this?(i.object.currentTransitionEvent=this,i.init()):this.data.runMode==="Once"&&this.alreadyPlayedNonTogglingActions.add(i)}),this.object.dispatchEvent({type:"beginEvent",eventName:"Collision"}),this.useToggle?(this.actions.Transition.forEach(i=>{i.toggle()}),this.actions.Animation.forEach(i=>{i.toggle()})):(this.actions.Transition.forEach(i=>{this.alreadyPlayedNonTogglingActions.has(i)===!1&&i.play()}),this.actions.Animation.forEach(i=>{i.play()})),this.actions.Reset.forEach(i=>{i.dispatch()}),this.actions.Link.forEach(i=>{i.dispatch()}),this.actions.Reset.forEach(i=>{i.dispatch()}),this.actions.Create.forEach(i=>{i.dispatch()}),this.actions.Destroy.forEach(i=>{i.dispatch(e??!1)}),this.actions.SetVariable.forEach(i=>i.checkConditions()),this.actions.SetVariable.forEach(i=>i.dispatch()),this.actions.DynamicVariablePlay.forEach(i=>i.dispatch()),this.actions.Audio.forEach(i=>{i.dispatchBasic()}),this.actions.Particles.forEach(i=>{i.dispatchBasic()}),this.actions.Video.forEach(i=>{i.dispatchBasic()}))}},Vb=class extends zr$1{constructor(e,i,s,a,o){super(e),this.sharedVariables=i,this.eventManager=s,this.needsMouse=a,this.needsRaycast=o,this.dynamicVars=[],this.variablesToWatch=[],this.prevMouseProperty=null,this.prevRaycastProperty=null,this.pauseTime=0,this.events=[],this.onFrame=c=>{this.rafId=window.requestAnimationFrame(this.onFrame);let d=new Date,g=[],b=[];for(let $=0;$<this.propertiesToWatch.length;$++){let{objectId:rt,property:st,prevValue:ut}=this.propertiesToWatch[$],gt=this.eventContext.scene.find(rt),wt=Xv.propertyPaths[st];if(wt[0]==="width"||wt[0]==="height"||wt[0]==="depth")gt=gt.geometry.userData.parameters[wt[0]];else for(let yt=0;yt<wt.length;yt++)gt=gt[wt[yt]];ut===null?this.propertiesToWatch[$].prevValue=gt instanceof _?gt.clone():gt:(gt instanceof _?!gt.equals(ut):ut!==gt)&&(b.push({objId:rt,property:st}),gt instanceof _?this.propertiesToWatch[$].prevValue.copy(gt):this.propertiesToWatch[$].prevValue=gt)}for(let $=0;$<this.variablesToWatch.length;$++){let{id:rt,prevValue:st}=this.variablesToWatch[$],ut=this.shared.getVariable(rt);ut!==st&&(g.push(rt),this.variablesToWatch[$].prevValue=ut)}for(let $=0;$<this.dynamicVars.length;$++){let{id:rt,expectedTime:st,last:ut,data:gt,timerSeconds:wt,startValue:yt}=this.dynamicVars[$],At=1e3;if((gt.dynamicVariableType==="timer"||gt.dynamicVariableType==="stopwatch")&&gt.format==="number3decimal"?At=1:gt.dynamicVariableType==="counter"?At=gt.updateInterval:gt.dynamicVariableType==="random"&&(At=gt.isStatic?1/0:gt.updateInterval),st===-1){this.dynamicVars[$].last=c,this.dynamicVars[$].expectedTime=c+At;continue}if(!((this.shared.getDynamicVariablePlayState(rt)==="Stopped"||this.shared.getDynamicVariablePlayState(rt)==="Restarted")&&(this.dynamicVars[$].last=c,this.dynamicVars[$].expectedTime=c+At,gt.dynamicVariableType==="counter"&&this.shared.getVariable(rt)!==yt&&(this.shared.updateVariable(rt,yt),this.eventManager.requestRender()),(gt.dynamicVariableType==="timer"||gt.dynamicVariableType==="stopwatch")&&this.dynamicVars[$].timerSeconds!==yt&&(this.dynamicVars[$].timerSeconds=yt,this.shared.updateVariable(rt,Mn.getFormattedTimerTime(yt,gt)),this.eventManager.requestRender()),this.shared.getDynamicVariablePlayState(rt)==="Restarted"&&this.shared.setDynamicVariablePlayState(rt,"Playing"),this.shared.getDynamicVariablePlayState(rt)==="Stopped"))){if(this.shared.getDynamicVariablePlayState(rt)==="Paused"){this.dynamicVars[$].deltaToExpectedTime===void 0&&(this.dynamicVars[$].deltaToExpectedTime=Math.max(this.dynamicVars[$].expectedTime-c,0)),this.dynamicVars[$].last=c-(At-this.dynamicVars[$].deltaToExpectedTime),this.dynamicVars[$].expectedTime=c+this.dynamicVars[$].deltaToExpectedTime;continue}else this.dynamicVars[$].deltaToExpectedTime=void 0;if(c>=st)if(this.dynamicVars[$].last=c,this.dynamicVars[$].expectedTime+=At,gt.dynamicVariableType==="random"){let Ct=gt.min+Math.random()*(gt.max-gt.min),Tt=gt.decimals;Ct=Math.round(Ct*Math.pow(10,Tt))/Math.pow(10,Tt),this.shared.updateVariable(rt,Ct),g.push(rt),this.eventManager.requestRender()}else if(gt.dynamicVariableType==="counter"){if(gt.increment===0)continue;let Ct=this.shared.getVariable(rt),Tt=this.shared.getDynamicVariableToggleIsForward(rt)??!0,kt=this.shared.getVariable(rt)+gt.increment*(Tt?1:-1);gt.hasEnd&&(kt=gt.increment>0?Me.clamp(kt,yt,gt.endValue):Me.clamp(kt,gt.endValue,yt),kt===yt&&this.shared.setDynamicVariableToggleIsForward(rt,void 0),gt.repeat?kt===gt.endValue&&(kt=yt):(kt===yt||kt===gt.endValue)&&this.shared.setDynamicVariablePlayState(rt,"Paused")),kt!==Ct&&(g.push(rt),this.shared.updateVariable(rt,kt),this.eventManager.requestRender())}else if(gt.dynamicVariableType==="time")this.shared.updateVariable(rt,d_(d,gt)),g.push(rt),this.eventManager.requestRender();else{let Ct=Yi.isTextValue(gt.endValue)?ON(gt.endValue.textValue):gt.endValue,Tt=this.shared.getDynamicVariableToggleIsForward(rt)??!0,kt=wt+(c-ut)/1e3*(gt.dynamicVariableType==="timer"?-1:1)*(Tt?1:-1);kt=Math.max(kt,0),gt.hasEnd&&(kt=gt.dynamicVariableType==="stopwatch"?Me.clamp(kt,yt,Ct):Me.clamp(kt,Ct,yt),kt===yt&&this.shared.setDynamicVariableToggleIsForward(rt,void 0),gt.repeat?Math.abs(kt-Ct)<(gt.format==="number3decimal"?1e-4:.1)&&(kt=yt):(Math.abs(kt-yt)<(gt.format==="number3decimal"?1e-4:.1)||Math.abs(kt-Ct)<(gt.format==="number3decimal"?1e-4:.1))&&this.shared.setDynamicVariablePlayState(rt,"Paused")),kt!==wt&&(g.push(rt),this.dynamicVars[$].timerSeconds=kt,this.shared.updateVariable(rt,Mn.getFormattedTimerTime(kt,gt)),this.eventManager.requestRender())}}}this.needsMouse&&this.shared.mouseProperty!==this.prevMouseProperty&&(this.prevMouseProperty=this.shared.mouseProperty,this.events.forEach($=>{$.data.variableId==="mouseProperty"&&($.dispatch(),this.eventManager.requestRender())}));let j=!1;this.shared.mouseProperty!==this.prevMouseProperty&&(this.prevMouseProperty=this.shared.mouseProperty,j=!0);let _e=!1;this.shared.raycastProperty!==this.prevRaycastProperty&&(this.prevRaycastProperty=this.shared.raycastProperty,_e=!0),this.events.forEach($=>{(g.includes($.data.variableId)||b.find(rt=>rt.objId===$.data.objectId&&rt.property===$.data.property)||$.data.variableId==="mouseProperty"&&j||$.data.variableId==="raycastProperty"&&_e)&&($.dispatch(),this.eventManager.requestRender())})},this.onBlur=()=>{this.pause()},this.onFocus=()=>{this.resume()},e.page.traverseEntity(c=>{var d;(d=c.data)==null||d.events.filter(g=>g.data.type==="VariableChange"&&!g.data.disabled).forEach(g=>{this.events.push(new KE(c.uuid,g.data,c,e.page,e.sharedAssets,s))})}),this.propertiesToWatch=this.events.filter(c=>c.data.variableId==="objectProperty"&&c.data.objectId!==null).map(c=>({objectId:c.data.objectId,property:c.data.property,prevValue:null})),this.shared=e.sharedAssets,this.sharedVariables.forEach(({id:c,data:d})=>{if(!("dynamicVariableType"in d)){this.events.find(b=>b.data.variableId===c)&&this.variablesToWatch.push({id:c,prevValue:this.shared.getVariable(c)});return}let g;if(d.dynamicVariableType==="timer"||d.dynamicVariableType==="stopwatch"){let b;if(Yi.isTextValue(d.value)&&Array.isArray(d.value.textValue)){let j=d.value.textValue;j.length===3?b=j[2]+j[1]*60+j[0]*3600:b=j[1]+j[0]*60}else b=d.value;g=b,this.dynamicVars.push({id:c,last:-1,expectedTime:-1,data:d,timerSeconds:b,startValue:g})}else d.dynamicVariableType==="time"&&this.shared.updateVariable(c,d_(new Date,d)),d.dynamicVariableType==="counter"&&(g=Yi.isTextValue(d.value)?ON(d.value.textValue):d.value),this.dynamicVars.push({id:c,last:-1,expectedTime:-1,data:d,startValue:g})})}pause(){this.pauseTime=Date.now()}resume(){let e=Date.now()-this.pauseTime;for(let i=0;i<this.dynamicVars.length;i++)this.dynamicVars[i].last+=e,this.dynamicVars[i].expectedTime+=e}connect(){this.rafId=window.requestAnimationFrame(this.onFrame),window.addEventListener("blur",this.onBlur),window.addEventListener("focus",this.onFocus)}disconnect(){window.removeEventListener("blur",this.onBlur),window.removeEventListener("focus",this.onFocus),this.rafId&&(window.cancelAnimationFrame(this.rafId),this.rafId=void 0),this.events.forEach(e=>e.dispose())}},KE=class{constructor(e,i,s,a,o,c){this.id=e,this.data=i,this.object=s,this.actions=Mr$1(i,i.actions,a,o,c,s)}dispatch(){let e=this.actions;e.Audio.forEach(i=>i.dispatchConditional()),e.Particles.forEach(i=>i.dispatchConditional()),e.Video.forEach(i=>i.dispatchConditional()),e.Create.forEach(i=>i.dispatch()),e.Destroy.forEach(i=>i.dispatch()),e.Reset.forEach(i=>i.dispatch()),e.Transition.forEach(i=>{i.object.currentTransitionEvent!==this&&(i.object.currentTransitionEvent=this),i.init()}),e.Transition.forEach(i=>i.play()),e.Animation.forEach(i=>i.play()),e.SwitchCamera.forEach(i=>i.play()),e.SceneTransition.forEach(i=>i.dispatch()),e.SetVariable.forEach(i=>i.checkConditions()),e.SetVariable.forEach(i=>i.dispatch()),e.DynamicVariablePlay.forEach(i=>i.dispatch())}dispose(){hr$1(this.actions)}};function ON(e){return e.length===3?e[2]+e[1]*60+e[0]*3600:e[1]+e[0]*60}var RN="https://unpkg.com/@splinetool/runtime@1.0.26/build/",SJ="https://unpkg.com/@splinetool/navmesh-wasm@1.0.26/build/",wJ=`
(async function() {
	const [wasmImport, wasmBinary] = await Promise.all([
		import('${RN}' + 'navmesh.js'),
		fetch('${SJ}' + 'navmesh.wasm').then((res) => res.arrayBuffer()),
	]);
	const wasmModule = wasmImport.default;
	self.module = await wasmModule({ wasmBinary });
	postMessage('ready');
})();
`,AJ=`
(async function() {
	const [wasmImport, wasmBinary] = await Promise.all([
		import(self.location.origin + '/_libraries/navmesh.js'),
		fetch(self.location.origin + '/_libraries/navmesh.wasm').then((res) => res.arrayBuffer()),
	]);
	const wasmModule = wasmImport.default;
	self.module = await wasmModule({ wasmBinary });
	postMessage('ready');
})();
`,_J=`

onmessage = function(messageEvent) {
	const meshData = messageEvent.data;
	const positions = meshData[0];
	const offset = meshData[1];
	const indices = meshData[2];
	const indicesLength = meshData[3];
	const parameters = meshData[4];

	const module = self.module;
	const rc = new module.rcConfig();
	rc.cs = parameters.cs;
	rc.ch = parameters.ch;
	rc.borderSize = parameters.borderSize ? parameters.borderSize : 0;
	rc.tileSize = parameters.tileSize ? parameters.tileSize : 0;
	rc.walkableSlopeAngle = parameters.walkableSlopeAngle;
	rc.walkableHeight = parameters.walkableHeight;
	rc.walkableClimb = parameters.walkableClimb;
	rc.walkableRadius = parameters.walkableRadius;
	rc.maxEdgeLen = parameters.maxEdgeLen;
	rc.maxSimplificationError = parameters.maxSimplificationError;
	rc.minRegionArea = parameters.minRegionArea;
	rc.mergeRegionArea = parameters.mergeRegionArea;
	rc.maxVertsPerPoly = parameters.maxVertsPerPoly;
	rc.detailSampleDist = parameters.detailSampleDist;
	rc.detailSampleMaxError = parameters.detailSampleMaxError;

	if (!self.navMesh) {
		self.navMesh = new module.NavMesh();
	}
	self.navMesh.build(positions, offset, indices, indicesLength, rc);

	const navmeshData = navMesh.getNavmeshData();
	const arrView = new Uint8Array(module.HEAPU8.buffer, navmeshData.dataPointer, navmeshData.size);
	const ret = new Uint8Array(navmeshData.size);
	ret.set(arrView);
	navMesh.freeNavmeshData(navmeshData);

	postMessage(ret);
}
`,IN=.001,EJ={cs:6,ch:2,walkableSlopeAngle:90,walkableHeight:20,walkableClimb:5,walkableRadius:0,maxEdgeLen:12,maxSimplificationError:1.3,minRegionArea:8,mergeRegionArea:20,maxVertsPerPoly:6,detailSampleDist:6,detailSampleMaxError:1},LN,Ot,cn;q2.then(e=>{LN=e,Ot=new e.Vec3,cn=new e.Vec3});var TJ=new _,zb=class{constructor(e=!1,i=!1){this.usePhysics=e,this.isExport=i,this.onPointerDown=s=>{if($e$1.length!==1)return;let{raycaster:a,page:o}=this.eventContext;this.eventContext.updateRaycaster(s);let c=o.raycastWithClones(a);if(c.length!==0){if(this.gameControl){let d=TJ.copy(this.gameControl.colliderWorldPosition);d.y-=this.gameControl.colliderHeight/2,this.gameControl.path=this.computePath(d,c[0].point)}this.eventContext.requestRender()}},this.traverseWithPhysics=(s,a)=>o=>{var rt,st,ut,gt,wt,yt,At;let c;if(o instanceof Ji)if(o.objectForSample){if(o.objectForSample.dataPatched.physics.fusedBody)return;c=o.object}else return o.object.dataPatched.physics.fusedBody===!0&&o.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(o instanceof Vr)c=o.object;else if(c=o,((rt=c.dataPatched.cloner)==null?void 0:rt.disabled)===!1&&((st=c.dataPatched.cloner)==null?void 0:st.hideBase)&&((ut=c.dataPatched.physics)==null?void 0:ut.fusedBody)!==!0)return!0;if(a&&!c.userData.navmesh)return;let d=c.dataPatched;if(!d.visible&&((gt=d.physics)==null?void 0:gt.enabled)!==!0)return!0;o.updateMatrixWorldSVD();let g=Ig(d),b=c.userData.hasDestroy,j=c.userData.hasDrag,_e=!1,$=!1;for(let Ct of d.events)Ct.data.disabled!==!0&&(Ct.data.type==="GameControl"?_e=!0:Ct.data.type==="Follow"&&($=!0));if(_e||g||$||b||j)return!0;if(this.usePhysics&&((wt=d.physics)==null?void 0:wt.rigidBody)==="dynamic"){if(this.usePhysics&&((yt=d.physics)!=null&&yt.fusedBody))return!0}else if("geometry"in o&&o.geometry&&s.push(go(o.geometry,o.matrixWorld)),this.usePhysics&&((At=d.physics)==null?void 0:At.fusedBody))return o.traverseObject((Ct,Tt)=>{var It,Lt;if(Tt===0)return;let kt;if(Ct instanceof Ji)if(Ct.objectForSample){if(Ct.objectForSample.dataPatched.physics.fusedBody)return;kt=Ct.object}else return Ct.object.dataPatched.physics.fusedBody===!0&&Ct.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(Ct instanceof Vr)kt=Ct.object;else if(kt=Ct,(It=Ct.dataPatched.cloner)==null?void 0:It.hideBase)return!0;let Pt=kt.dataPatched;if(!Pt.visible&&((Lt=Pt.physics)==null?void 0:Lt.enabled)!==!0)return!0;"geometry"in Ct&&Ct.geometry&&s.push(go(Ct.geometry,Ct.matrixWorld))}),!0},this.traverseNoPhysics=(s,a)=>o=>{let c;if(o instanceof Ji)return;o instanceof Vr?c=o.object:c=o;let d=c.dataPatched;if(d.physics.enabled==="visibility"?!d.visible:!d.physics.enabled)return!0;if(a&&!c.userData.navmesh)return;let g=o.geometry,b=c.userData.hasDestroy===!0,j=c.userData.hasDrag===!0;if(Ig(d)||b||j||c.dataPatched.events.some(_e=>_e.data.disabled!==!0&&_e.data.type==="GameControl"))return!0;g&&s.push(go(g,o.matrixWorld))},this.navmeshWasm=LN,this.navMesh=new this.navmeshWasm.NavMesh,this._workerURL=URL.createObjectURL(new Blob([(i?wJ:AJ)+_J])),this._worker=new Worker(this._workerURL)}init(e,i,s){this.gameControl=i,this.eventContext=s,this.resolution=e.ch,this.setDefaultQueryExtent(new _().setScalar(e.ch*e.walkableRadius*1.2)),this._worker.onmessage=()=>{this.createNavMesh(s.page,e,a=>{this.buildFromNavmeshData(a.data)})},this.eventContext.renderer.domElement.addEventListener("pointerdown",this.onPointerDown)}createNavMesh(e,i,s){i.objects.forEach(b=>{var _e;let j=e.scene.find(b);j.traverseEntity($=>{$.userData.navmesh=!0}),(_e=j.cloner)==null||_e.traverseObject($=>{$.userData.navmesh=!0})});let a=[],o=(this.usePhysics?this.traverseWithPhysics:this.traverseNoPhysics)(a,i.zones==="custom");if(e.traverseChildren(o),i.objects.forEach(b=>{var _e;let j=e.scene.find(b);j.traverseEntity($=>{$.userData.navmesh=void 0}),(_e=j.cloner)==null||_e.traverseObject($=>{$.userData.navmesh=void 0})}),a.length===0)return!1;let c=Js(a),{positions:d,triIndices:g}=qc(c.getAttribute("position"),c.getIndex());return this._worker.postMessage([d,d.length/3,g,g.length,{...EJ,...i}]),this._worker.onmessage=s,!0}createDebugNavGeometry(){let e,i,s=this.navMesh.getDebugNavMesh(),a=s.getTriangleCount(),o=new Uint32Array(a*3),c=new Float32Array(a*3*3);for(e=0;e<a*3;e++)o[e]=e;for(e=0;e<a;e++)for(i=0;i<3;i++){let g=s.getTriangle(e).getPoint(i);c[e*9+i*3+0]=g.x,c[e*9+i*3+1]=g.y,c[e*9+i*3+2]=g.z}let d=new Pe;return d.setIndex(new Xe(o,1)),d.setAttribute("position",new Xe(c,3)),d}getClosestPoint(e){return Ot.x=e.x,Ot.y=e.y,Ot.z=e.z,this.navMesh.getClosestPoint(Ot)}getClosestPointToRef(e,i){Ot.x=e.x,Ot.y=e.y,Ot.z=e.z;let s=this.navMesh.getClosestPoint(Ot);i.set(s.x,s.y,s.z)}getRandomPointAround(e,i){return Ot.x=e.x,Ot.y=e.y,Ot.z=e.z,this.navMesh.getRandomPointAround(Ot,i)}getRandomPointAroundToRef(e,i,s){Ot.x=e.x,Ot.y=e.y,Ot.z=e.z;let a=this.navMesh.getRandomPointAround(Ot,i);s.set(a.x,a.y,a.z)}moveAlong(e,i){return Ot.x=e.x,Ot.y=e.y,Ot.z=e.z,cn.x=i.x,cn.y=i.y,cn.z=i.z,this.navMesh.moveAlong(Ot,cn)}moveAlongToRef(e,i,s){return Ot.x=e.x,Ot.y=e.y,Ot.z=e.z,cn.x=i.x,cn.y=i.y,cn.z=i.z,this.navMesh.moveAlong(Ot,cn)}computePath(e,i){let s=this.getClosestPoint(i);cn.x=s.x,cn.y=s.y,cn.z=s.z,this.getClosestPoint(e);let a=this.navMesh.computePath(Ot,cn),o=a.getPointCount(),c=[];for(let d=0;d<o;d++){let g=a.getPoint(d);c.push(new _(g.x,g.y,g.z))}return c}createCrowd(e,i){return new ZE(this,e,i)}setDefaultQueryExtent(e){Ot.x=e.x,Ot.y=e.y,Ot.z=e.z,this.navMesh.setDefaultQueryExtent(Ot)}getDefaultQueryExtent(){return this.navMesh.getDefaultQueryExtent()}buildFromNavmeshData(e){let i=e.length*e.BYTES_PER_ELEMENT,s=this.navmeshWasm._malloc(i),a=new Uint8Array(this.navmeshWasm.HEAPU8.buffer,s,i);a.set(e);let o=new this.navmeshWasm.NavmeshData;o.dataPointer=a.byteOffset,o.size=e.length,this.navMesh.buildFromNavmeshData(o),this.navmeshWasm._free(a.byteOffset)}getNavmeshData(){let e=this.navMesh.getNavmeshData(),i=new Uint8Array(this.navmeshWasm.HEAPU8.buffer,e.dataPointer,e.size),s=new Uint8Array(e.size);return s.set(i),this.navMesh.freeNavmeshData(e),s}getDefaultQueryExtentToRef(e){let i=this.navMesh.getDefaultQueryExtent();e.set(i.x,i.y,i.z)}dispose(){var e;this.navMesh.destroy(),this._worker.terminate(),URL.revokeObjectURL(this._workerURL),(e=this.eventContext)==null||e.renderer.domElement.removeEventListener("pointerdown",this.onPointerDown)}addCylinderObstacle(e,i,s){return Ot.x=e.x,Ot.y=e.y,Ot.z=e.z,this.navMesh.addCylinderObstacle(Ot,i,s)}addBoxObstacle(e,i,s){return Ot.x=e.x,Ot.y=e.y,Ot.z=e.z,cn.x=i.x,cn.y=i.y,cn.z=i.z,this.navMesh.addBoxObstacle(Ot,cn,s)}removeObstacle(e){this.navMesh.removeObstacle(e)}isSupported(){return this.navmeshWasm!==void 0}},ZE=class{constructor(e,i,s){this.navmeshWasmWrapper=e,this.transforms=[],this.agents=new Array,this.reachRadii=new Array,this._agentDestinationArmed=new Array,this._agentDestination=new Array,this.crowd=new this.navmeshWasmWrapper.navmeshWasm.Crowd(i,s,this.navmeshWasmWrapper.navMesh.getNavMesh())}onReachTarget(e,i){}addAgent(e,i,s){let a=new this.navmeshWasmWrapper.navmeshWasm.dtCrowdAgentParams;a.radius=i.radius,a.height=i.height,a.maxAcceleration=i.maxAcceleration,a.maxSpeed=i.maxSpeed,a.collisionQueryRange=i.collisionQueryRange,a.pathOptimizationRange=i.pathOptimizationRange,a.separationWeight=i.separationWeight,a.updateFlags=7,a.obstacleAvoidanceType=0,a.queryFilterType=0,a.userData=0;let o=this.crowd.addAgent(new this.navmeshWasmWrapper.navmeshWasm.Vec3(e.x,e.y,e.z),a);return this.transforms.push(s),this.agents.push(o),this.reachRadii.push(i.reachRadius?i.reachRadius:i.radius),this._agentDestinationArmed.push(!1),this._agentDestination.push(new _(0,0,0)),o}getAgentPosition(e){return this.crowd.getAgentPosition(e)}getAgentPositionToRef(e,i){let s=this.crowd.getAgentPosition(e);i.set(s.x,s.y,s.z)}getAgentVelocity(e){return this.crowd.getAgentVelocity(e)}getAgentVelocityToRef(e,i){let s=this.crowd.getAgentVelocity(e);i.set(s.x,s.y,s.z)}getAgentNextTargetPath(e){return this.crowd.getAgentNextTargetPath(e)}getAgentNextTargetPathToRef(e,i){let s=this.crowd.getAgentNextTargetPath(e);i.set(s.x,s.y,s.z)}getAgentState(e){return this.crowd.getAgentState(e)}overOffmeshConnection(e){return this.crowd.overOffmeshConnection(e)}agentGoto(e,i){this.crowd.agentGoto(e,new this.navmeshWasmWrapper.navmeshWasm.Vec3(i.x,i.y,i.z));let s=this.agents.indexOf(e);s>-1&&(this._agentDestinationArmed[s]=!0,this._agentDestination[s].set(i.x,i.y,i.z))}agentTeleport(e,i){this.crowd.agentTeleport(e,new this.navmeshWasmWrapper.navmeshWasm.Vec3(i.x,i.y,i.z))}updateAgentParameters(e,i){let s=this.crowd.getAgentParameters(e);i.radius!==void 0&&(s.radius=i.radius),i.height!==void 0&&(s.height=i.height),i.maxAcceleration!==void 0&&(s.maxAcceleration=i.maxAcceleration),i.maxSpeed!==void 0&&(s.maxSpeed=i.maxSpeed),i.collisionQueryRange!==void 0&&(s.collisionQueryRange=i.collisionQueryRange),i.pathOptimizationRange!==void 0&&(s.pathOptimizationRange=i.pathOptimizationRange),i.separationWeight!==void 0&&(s.separationWeight=i.separationWeight),this.crowd.setAgentParameters(e,s)}removeAgent(e){this.crowd.removeAgent(e);let i=this.agents.indexOf(e);i>-1&&(this.agents.splice(i,1),this.transforms.splice(i,1),this.reachRadii.splice(i,1),this._agentDestinationArmed.splice(i,1),this._agentDestination.splice(i,1))}getAgents(){return this.agents}update(e){if(this.navmeshWasmWrapper.navMesh.update(),e<=IN)return;let i=1/60,s=10;{let a=Math.floor(e/i);a>s&&(a=s),a<1&&(a=1);let o=e/a;for(let c=0;c<a;c++)this.crowd.update(o)}for(let a=0;a<this.agents.length;a++){let o=this.agents[a],c=this.getAgentPosition(o);if(this.transforms[a].copy(c),this._agentDestinationArmed[a]){let d=c.x-this._agentDestination[a].x,g=c.z-this._agentDestination[a].z,b=this.reachRadii[a],j=this._agentDestination[a].y-this.reachRadii[a],_e=this._agentDestination[a].y+this.reachRadii[a],$=d*d+g*g;c.y>j&&c.y<_e&&$<b*b&&(this.onReachTarget(o,this._agentDestination[a]),this._agentDestinationArmed[a]=!1)}}}setDefaultQueryExtent(e){let i=new this.navmeshWasmWrapper.navmeshWasm.Vec3(e.x,e.y,e.z);this.crowd.setDefaultQueryExtent(i)}getDefaultQueryExtent(){return this.crowd.getDefaultQueryExtent()}getDefaultQueryExtentToRef(e){let i=this.crowd.getDefaultQueryExtent();e.set(i.x,i.y,i.z)}getCorners(e){let i,s=this.crowd.getCorners(e),a=s.getPointCount(),o=[];for(i=0;i<a;i++){let c=s.getPoint(i);o.push(new _(c.x,c.y,c.z))}return o}dispose(){this.crowd.destroy()}};function JE(e){let i=!1;return e.scene.objects.forEach(s=>{s.data.type==="Page"&&!i&&s.data.publish.gameControlObject&&Nl.traverseModuleInstances(e,s.id,(a,o,c)=>{for(let d of c)d.data.type==="GameControl"&&d.data.navmesh.enabled&&(i=!0)})}),i}var MJ={type:"change"},BN={type:"changeZoom"},CJ={type:"changePan"},tp={type:"start"},rp={type:"end",changed:!0},PJ={type:"end",changed:!1},$E=new Qe,NN=new z$1,DJ=2*Math.PI,OJ=1e-8,IJ=.01,eT=new _,Ub=new z$1,tT=new _,Gb=new Qe,FN=new ce$1,RJ={type:"requestRender"},ip$2=class extends fr$2{constructor(i,s,a={isPlayMode:!1,isExport:!1}){super(),this.object=i,this.domElement=s,this.options=a,this.enabled=!0,this.useKeyEvents=!0,this.enableDamping=!1,this.enableZoom=!0,this.enableRotate=!0,this.enablePan=!0,this.autoRotate=!1,this.rotationLimitsMode=0,this.panLimitsMode=0,this.rotationSoftLimit=2,this.panSoftLimit=2,this.hoverRotatePanMode=0,this.zoomLimitsEnabled=!1,this.mouseButtons=[0,5],this.mouseButtonsPlay=[3,4,5],this.touches=[null,ns.DOLLY_ROTATE,ns.PAN],this.offset=new _,this.eye=new _,this.lastPosition=new _,this.lastQuaternion=new Qe,this.current=new z$1,this.overShoot=new z$1,this.overRatio=new z$1,this.spherical=new Fp,this.sphericalDelta=new Fp,this.panOffset=new _,this.panLeftV=new _,this.panUpV=new _,this.panV=new _,this.rotateStart=new z$1,this.rotateEnd=new z$1,this.rotateDelta=new z$1,this.panStart=new z$1,this.panEnd=new z$1,this.panDelta=new z$1,this.dollyStart=new z$1,this.dollyEnd=new z$1,this.dollyDelta=new z$1,this.rotationRangeFactor=new z$1,this.panRangeFactor=new z$1,this.state=-1,this.zoomChanged=!1,this.isPointerDown=!1,this.isThetaFlipped=!1,this.prevScale=0,this.scale=1,this.gesture=!1,this.timer=-1,this.timerHover=-1,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPhi=0,this.maxPhi=Math.PI,this.minTheta=-1/0,this.maxTheta=1/0,this.minH=0,this.maxH=Math.PI,this.minV=-1/0,this.maxV=1/0,this.autoRotateClockwise=!0,this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.resetHoverEffectOnPointerLeave=!1,this.hasChange=!1,this.useWindowEvents=!1,this.isTouchZoom=!0,this.autoRotateSpeed=2,this.dampingFactor=.125,this.zoomSpeed=2,this.rotateSpeed=1,this.panSpeed=1,this.hoverRotatePanStrength=.1,this.hoverRotateDamping=this.dampingFactor,this.thetaIsFree=!1,this.phiIsFree=!1,this.needsUpdate=!0,this.onCameraChange=o=>{this.object.removeEventListener("beginState",this.onBeginState),this.object.removeEventListener("completeState",this.onCompleteState),this.object.removeEventListener("cameraChange",this.onCameraChange),this.object=o.camera,this.object.addEventListener("beginState",this.onBeginState),this.object.addEventListener("completeState",this.onCompleteState),this.object.addEventListener("cameraChange",this.onCameraChange)},this.update=()=>{this.object.updateWorldMatrix(!0,!1),this.object.matrixWorld.decompose(tT,Gb,eT),this.offset.copy(tT).sub(this.target),this.spherical.setFromVector3(this.offset),this.object.isUpVectorFlipped&&(this.spherical.phi*=-1,this.spherical.theta-=Math.PI),this.autoRotate&&this.state===-1&&this.rotateLeft((this.autoRotateClockwise===!0?1:-1)*this.getAutoRotationAngle()),this.rotationLimitsMode!==0&&this.applyLimits(this.sphericalDelta,this.rotationLimitsMode,this.rotationSoftLimit,this.maxTheta,this.minTheta,this.maxPhi,this.minPhi,this.rotationRangeFactor),this.rotationLimitsMode!==2&&(this.spherical.phi+=this.sphericalDelta.phi),(this.rotationLimitsMode!==1||this.autoRotate===!0)&&(this.spherical.theta+=this.sphericalDelta.theta),this.spherical.radius*=this.scale,this.zoomLimitsEnabled&&(this.spherical.radius=Math.max(this.minDistance,Math.min(this.maxDistance,this.spherical.radius))),this.panLimitsMode!==0&&(this.target.applyQuaternion($E.copy(Gb).invert()),this.panOffset.applyQuaternion($E),this.applyLimits(this.panOffset,this.panLimitsMode,this.panSoftLimit,this.maxH,this.minH,this.maxV,this.minV,this.panRangeFactor),this.target.applyQuaternion(Gb),this.panOffset.applyQuaternion(Gb)),this.panLimitsMode===2&&(this.panOffset.y=0),this.panLimitsMode===1&&(this.panOffset.x=0),this.state===-1&&!this.gesture?(this.panOffset.multiplyScalar(1-this.dampingFactor),this.target.add(this.panOffset)):(this.target.add(this.panOffset),this.panOffset.set(0,0,0)),this.offset.setFromSpherical(this.spherical),tT.copy(this.target).add(this.offset),this.object.position.copy(this.target).add(this.offset),this.object.parent&&(FN.copy(this.object.parent.matrixWorld).invert(),this.object.position.applyMatrix4(FN));let o=this.spherical.phi%DJ;if(this.eye.copy(this.offset).normalize(),this.object.up.copy(_t.DEFAULT_UP).applyAxisAngle(this.eye,this.object.angleOffsetFromUp),o>0&&o>Math.PI||o<0&&o>-Math.PI?(this.object.up.negate(),this.object.lookAt(this.target),this.object.isUpVectorFlipped=!0):(this.object.lookAt(this.target),this.object.isUpVectorFlipped=!1),this.state===-1||this.enableDamping===!0){let c=this.hoverRotatePanMode===1?this.hoverRotateDamping:this.dampingFactor;this.sphericalDelta.theta*=1-c,this.sphericalDelta.phi*=1-c}else this.sphericalDelta.set(0,0,0);return this.scale=1,this.zoomChanged||this.lastPosition.distanceToSquared(this.object.position)>IJ||8*(1-this.lastQuaternion.dot(this.object.quaternion))>OJ?(this.dispatchEvent(MJ),this.object.dispatchEvent(RJ),this.lastPosition.copy(this.object.position),this.lastQuaternion.copy(this.object.quaternion),this.zoomChanged=!1,!0):(this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.object.wasMovedBySwitchCameraAction=!1,this.sphericalDelta.set(0,0,0),this.panOffset.set(0,0,0),!1)},this.onPointerDown=o=>{this.enabled!==!1&&(o.pointerType==="touch"||o.pointerType==="pen"&&Ii?this.onPointerDownTouch(o):this.onPointerDownMouse(o),this.state!==-1&&(this.isPointerDown=!0,this.dispatchEvent(tp),this.domElement.addEventListener("pointermove",this.onPointerMove),this.domElement.addEventListener("pointerup",this.onPointerUp),o.stopPropagation(),o.pointerType==="touch"||o.pointerType==="pen"&&Ii||this.domElement.setPointerCapture(o.pointerId)))},this.onPointerLeave=o=>{this.resetHoverEffectOnPointerLeave&&!this.useWindowEvents?(this.hoverRotatePanMode===1?(this.sphericalDelta.theta=-this.spherical.theta,this.sphericalDelta.phi=-this.spherical.phi,eT.subVectors(this.position0,this.target0),this.spherical.setFromVector3(eT),this.sphericalDelta.theta+=this.spherical.theta,this.sphericalDelta.phi+=this.spherical.phi,this.sphericalDelta.theta/=8,this.sphericalDelta.phi/=8):this.hoverRotatePanMode===2&&this.panOffset.subVectors(this.target0,this.target).divideScalar(8),this.update()):this.pointerLeaveEvent=o},this.onPointerEnter=o=>{this.resetHoverEffectOnPointerLeave||this.pointerLeaveEvent===void 0?Ub.set(o.clientX-this.domElement.clientWidth/2,o.clientY-this.domElement.clientHeight/2):Ub.set(o.clientX-this.pointerLeaveEvent.clientX,o.clientY-this.pointerLeaveEvent.clientY),this.hoverRotatePanMode===1?(this.rotateDelta.copy(Ub).multiplyScalar(this.rotateSpeed*this.hoverRotatePanStrength).rotateAround(NN,-this.object.angleOffsetFromUp),this.rotateLeft(2*Math.PI*this.rotateDelta.x/this.domElement.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/this.domElement.clientHeight),this.rotateStart.set(o.clientX,o.clientY)):this.hoverRotatePanMode===2&&(this.panDelta.copy(Ub).multiplyScalar(this.panSpeed*this.hoverRotatePanStrength),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.set(o.clientX,o.clientY)),this.update()},this.onPointerMove=o=>{this.enabled!==!1&&(this.checkRaycastLock()||(o.pointerType==="touch"||o.pointerType==="pen"&&Ii?this.onPointerMoveTouch(o):this.onPointerMoveMouse(o),o.stopPropagation()))},this.onPointerUp=o=>{this.isPointerDown=!1,$e$1.length===0&&(this.domElement.removeEventListener("pointermove",this.onPointerMove),this.domElement.removeEventListener("pointerup",this.onPointerUp)),$e$1.length>1&&o.preventDefault(),this.hasChange?this.dispatchEvent(rp):this.dispatchEvent(PJ),this.state=-1,o&&(o.stopPropagation(),o.pointerType==="touch"||o.pointerType==="pen"&&Ii||this.domElement.releasePointerCapture(o.pointerId))},this.onPointerDownMouse=o=>{let c;switch(this.useKeyEvents?c=this.mouseButtons[o.button]:c=this.mouseButtonsPlay[o.button],c){case 0:if(o.altKey===!0&&!o.shiftKey&&!Qp(o)){if(this.enableRotate===!1)return;this.handleMouseDownRotate(o),this.state=0}else if(this.key===" "){if(this.enablePan===!1)return;this.handleMouseDownPan(o),this.state=2}break;case 4:if(this.enablePan===!1)return;this.handleMouseDownPan(o),this.state=2;break;case 3:if(Qp(o)||o.shiftKey){if(this.enablePan===!1)return;this.handleMouseDownPan(o),this.state=2}else{if(this.enableRotate===!1)return;this.handleMouseDownRotate(o),this.state=0}break;case 5:if(Qp(o)||o.shiftKey){if(this.enableRotate===!1)return;this.handleMouseDownRotate(o),this.state=0}else{if(this.enablePan===!1)return;this.handleMouseDownPan(o),this.state=2}break;default:this.state=-1}},this.onPointerMoveMouse=o=>{switch(this.state){case 0:if(this.enableRotate===!1)return;this.handleMouseMoveRotate(o);break;case 1:if(this.enableZoom===!1)return;this.handleMouseMoveDolly(o);break;case 2:if(this.enablePan===!1)return;this.handleMouseMovePan(o);break}this.object.wasMovedByUser=!0},this.onPointerDownTouch=o=>{switch($e$1.length>1&&o.preventDefault(),this.touches[$e$1.length-1]){case ns.ROTATE:if(this.enableRotate===!1){this.state=-1;return}this.handleTouchStartRotate(),this.state=3;break;case ns.PAN:if(this.enablePan===!1){this.state=-1;return}this.handleTouchStartPan(),this.state=4;break;case ns.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this.handleTouchStartDollyPan(),this.state=5;break;case ns.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this.handleTouchStartDollyRotate(),this.state=6;break;default:this.state=-1}},this.onPointerMoveTouch=o=>{switch($e$1.length>1&&o.preventDefault(),this.state){case 3:if(this.enableRotate===!1)return;this.handleTouchMoveRotate(o),this.update();break;case 4:if(this.enablePan===!1)return;this.handleTouchMovePan(o),this.update();break;case 5:if(this.enableZoom===!1&&this.enablePan===!1)return;this.handleTouchMoveDollyPan(o),this.update();break;case 6:if(this.enableZoom===!1&&this.enableRotate===!1)return;this.handleTouchMoveDollyRotate(o),this.update();break;default:this.state=-1}this.object.wasMovedByUser=!0},this.dispatchEndDebounced=Lc(()=>this.dispatchEvent(rp),33),this.onMouseWheel=o=>{this.enabled===!1||this.enableZoom===!1&&this.enablePan===!1||this.checkRaycastLock()||(!this.options.isExport&&this.domElement.clientHeight===document.body.clientHeight&&this.domElement.clientWidth===document.body.clientWidth&&o.preventDefault(),this.dispatchEvent(tp),this.handleMouseWheel(o),this.dispatchEndDebounced(),this.object.wasMovedByUser=!0)},this.onGesture=o=>{if(o.preventDefault(),this.enabled!==!1&&!this.checkRaycastLock()&&!Uh)if(o.type==="gesturechange"){if(this.enableZoom===!1||this.isTouchZoom===!1)return;this.dispatchEvent(tp),o.scale>this.prevScale?this.dollyIn(this.getZoomScale()):o.scale<this.prevScale&&this.dollyOut(this.getZoomScale()),this.prevScale=o.scale,this.update(),this.object.wasMovedByUser=!0}else this.dispatchEvent(rp)},this.onContextMenu=o=>{o.preventDefault()},this.onTouchEnd=o=>{o.preventDefault()},this.onKeyDown=o=>{this.enabled!==!1&&(this.key=o.key,o.key===" "&&this.dispatchEvent(tp))},this.onKeyUp=o=>{this.enabled!==!1&&(this.key=void 0,this.state!==-1&&o.key==="Alt"&&this.onPointerUp($e$1[0]),o.key===" "&&this.dispatchEvent(rp))},this.onPointerHover=o=>{o.pointerType!=="mouse"||this.enabled===!1||this.state!==-1||this.hoverRotatePanMode===2&&this.isPanOverShoot||this.hoverRotatePanMode===1&&this.isRotateOverShoot||(this.isPointerDown=!0,this.hoverRotatePanMode===2?this.handleMouseMovePan(o,this.hoverRotatePanStrength):this.hoverRotatePanMode===1&&this.handleMouseMoveRotate(o,this.hoverRotatePanStrength))},this.onBeginState=()=>{this.enabled=!1,this.needsUpdate=!1},this.onCompleteState=o=>{o.isfromEntity&&this.options.isPlayMode||(this.enabled=!0,this.needsUpdate=!0,this.object.updateUp(),this.object.getTarget(this.target))},this.target=this.object.getTarget(),this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.quat0=this.object.quaternion.clone(),this.isUpVectorFlipped0=this.object.isUpVectorFlipped,this.offset.copy(this.object.position).sub(this.target),this.spherical.setFromVector3(this.offset),this.object.isUpVectorFlipped&&(this.spherical.phi*=-1,this.spherical.theta-=Math.PI),this.addEventListenersToCamera()}dispatchEvent(i){i.type==="start"?this.hasChange=!1:this.hasChange=!0,super.dispatchEvent(i)}addEventListenersToCamera(){this.object.addEventListener("beginState",this.onBeginState),this.object.addEventListener("completeState",this.onCompleteState),this.object.addEventListener("cameraChange",this.onCameraChange)}removeEventListenersFromCamera(){this.object.removeEventListener("beginState",this.onBeginState),this.object.removeEventListener("completeState",this.onCompleteState),this.object.removeEventListener("cameraChange",this.onCameraChange)}updateUseWindowEvents(i){if(window.removeEventListener("pointermove",this.onPointerHover),this.domElement.removeEventListener("pointermove",this.onPointerHover),this.useWindowEvents=i,this.hoverRotatePanMode!==0&&(this.useWindowEvents?window.addEventListener("pointermove",this.onPointerHover):this.domElement.addEventListener("pointermove",this.onPointerHover)),this.domElement.removeEventListener("pointerleave",this.onPointerLeave),this.domElement.removeEventListener("pointerenter",this.onPointerEnter),window.removeEventListener("pointerleave",this.onPointerLeave),window.removeEventListener("pointerenter",this.onPointerEnter),this.hoverRotatePanMode!==0&&!this.useWindowEvents){let s=this.useWindowEvents?window:this.domElement;s.addEventListener("pointerleave",this.onPointerLeave),s.addEventListener("pointerenter",this.onPointerEnter)}}fromJSON(i,s){this.setEnableDampingSpeed(i.enableDamping),this.enablePan=i.enablePan,this.enableZoom=i.enableZoom,this.enableRotate=i.enableRotate,this.rotationLimitsMode=i.rotationLimitsMode,this.thetaIsFree=i.rotationHorizontalOffset.min===i.rotationHorizontalOffset.max&&i.rotationHorizontalOffset.min===Math.PI,this.phiIsFree=i.rotationVerticalOffset.min===i.rotationVerticalOffset.max&&i.rotationVerticalOffset.min===Math.PI,this.panLimitsMode=i.panLimitsMode,this.panSoftLimit=i.panSoftLimit,this.rotationSoftLimit=i.rotationSoftLimit,this.hoverRotatePanMode=i.hoverRotatePanMode,this.hoverRotateDamping=i.hoverRotateDamping??this.dampingFactor,this.useWindowEvents=s==="window",this.hoverRotatePanMode!==0&&(this.useWindowEvents?window.addEventListener("pointermove",this.onPointerHover):this.domElement.addEventListener("pointermove",this.onPointerHover));let a=i.hoverRotatePanStrength/100;this.hoverRotatePanStrength=a**2,this.zoomLimitsEnabled=i.zoomLimitsEnabled,this.minZoom=i.zoomLimits.min,this.maxZoom=Math.max(i.zoomLimits.min,i.zoomLimits.max),this.minDistance=1e3/i.zoomLimits.max,this.maxDistance=Math.max(this.minDistance,1e3/i.zoomLimits.min),this.autoRotate=i.autoRotate,this.autoRotateSpeed=i.autoRotateSpeed,this.autoRotateClockwise=i.autoRotateClockwise;let o=this.object.getTarget().applyQuaternion($E.copy(this.object.quaternion).invert());this.minV=-i.panVerticalOffset.min+o.y,this.maxV=i.panVerticalOffset.max+o.y,this.minH=-i.panHorizontalOffset.min+o.x,this.maxH=i.panHorizontalOffset.max+o.x,this.panRangeFactor.set(this.maxH-this.minH,this.maxV-this.minV).divideScalar(2),this.rotationRangeFactor.setScalar(Math.PI).divideScalar(4),this.minPhi=la(this.spherical.phi-i.rotationVerticalOffset.min),this.maxPhi=la(this.spherical.phi+i.rotationVerticalOffset.max),this.minTheta=la(la(this.spherical.theta)-i.rotationHorizontalOffset.min),this.maxTheta=la(la(this.spherical.theta)+i.rotationHorizontalOffset.max),this.isThetaFlipped=this.minTheta>this.maxTheta,i.orbitTouches===1&&(this.touches[0]=ns.ROTATE),i.panTouches===1&&(this.touches[0]=ns.PAN),i.orbitTouches===2&&(this.touches[1]=ns.DOLLY_ROTATE),i.panTouches===2&&(this.touches[1]=ns.DOLLY_PAN),i.orbitTouches===3&&(this.touches[2]=ns.ROTATE),i.panTouches===3&&(this.touches[2]=ns.PAN),this.isTouchZoom=i.isTouchZoom,this.resetHoverEffectOnPointerLeave=i.resetHoverEffectOnPointerLeave??!1}connect(){if(this.domElement.addEventListener("contextmenu",this.onContextMenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("wheel",this.onMouseWheel),window.addEventListener("keydown",this.onKeyDown,!1),window.addEventListener("keyup",this.onKeyUp,!1),this.domElement.addEventListener("gesturestart",this.onGesture),this.domElement.addEventListener("gesturechange",this.onGesture),this.domElement.addEventListener("gestureend",this.onGesture),this.domElement.addEventListener("touchend",this.onTouchEnd),this.hoverRotatePanMode!==0&&!this.useWindowEvents){let i=this.useWindowEvents?window:this.domElement;i.addEventListener("pointerleave",this.onPointerLeave),i.addEventListener("pointerenter",this.onPointerEnter)}this.pointerLeaveEvent=void 0}dispose(){this.removeEventListenersFromCamera(),this.domElement.removeEventListener("contextmenu",this.onContextMenu),this.domElement.removeEventListener("pointerdown",this.onPointerDown),this.domElement.removeEventListener("wheel",this.onMouseWheel),window.removeEventListener("keydown",this.onKeyDown,!1),window.removeEventListener("keyup",this.onKeyUp,!1),this.domElement.removeEventListener("pointermove",this.onPointerHover),window.removeEventListener("pointermove",this.onPointerHover),this.domElement.removeEventListener("gesturestart",this.onGesture),this.domElement.removeEventListener("gesturechange",this.onGesture),this.domElement.removeEventListener("gestureend",this.onGesture),this.domElement.removeEventListener("touchend",this.onTouchEnd),this.domElement.removeEventListener("pointerleave",this.onPointerLeave),this.domElement.removeEventListener("pointerenter",this.onPointerEnter),window.removeEventListener("pointerleave",this.onPointerLeave),window.removeEventListener("pointerenter",this.onPointerEnter),this.domElement.removeEventListener("pointermove",this.onPointerMove),this.domElement.removeEventListener("pointerup",this.onPointerUp)}applyLimits(i,s,a,o,c,d,g,b){this.overShoot.set(0,0);let j,_e,$;i instanceof _?(j=i.x,_e=i.y,this.current.set(this.target.x,this.target.y),$=!0):(j=i.theta,_e=i.phi,this.current.set(la(this.spherical.theta),la(this.spherical.phi)),$=!1),a===0&&(this.current.x+=j,this.current.y+=_e),(s===3||s===2)&&(!$&&this.isThetaFlipped?this.current.x>o&&this.current.x<0?this.overShoot.x=o-this.current.x:this.current.x<c&&this.current.x>0&&(this.overShoot.x=c-this.current.x):this.current.x>o?this.overShoot.x=o-this.current.x:this.current.x<c&&(this.overShoot.x=c-this.current.x)),(s===3||s===1)&&(this.current.y>d?this.overShoot.y=d-this.current.y:this.current.y<g&&(this.overShoot.y=g-this.current.y)),$||(this.overShoot.x=la(this.overShoot.x),this.overShoot.y=la(this.overShoot.y)),a!==0?(this.overRatio.copy(this.overShoot).divide(b),this.overRatio.x=Math.min(Math.abs(this.overRatio.x),1),this.overRatio.y=Math.min(Math.abs(this.overRatio.y),1),a===1&&(this.overRatio.x=kN(Math.abs(this.overRatio.x)),this.overRatio.y=kN(Math.abs(this.overRatio.y))),this.isPointerDown||a===1?a===2&&(this.overRatio.x>.9&&!this.thetaIsFree||this.overRatio.y>.9&&!this.phiIsFree)?this.isPointerDown=!1:(j*this.overShoot.x<0&&!this.thetaIsFree&&(j*=1-this.overRatio.x),_e*this.overShoot.y<0&&!this.phiIsFree&&(_e*=1-this.overRatio.y)):a===2&&(!$&&(this.overRatio.x>.002&&!this.thetaIsFree||this.overRatio.y>.002&&!this.phiIsFree)||$&&(Math.abs(this.overShoot.x)>2||Math.abs(this.overShoot.y)>2)?(this.thetaIsFree||(j=this.overShoot.x*.05),this.phiIsFree||(_e=this.overShoot.y*.05),$?this.isPanOverShoot=!0:this.isRotateOverShoot=!0):$?this.isPanOverShoot=!1:this.isRotateOverShoot=!1)):(j+=this.overShoot.x,_e+=this.overShoot.y),i instanceof _?(i.x=j,i.y=_e):(this.thetaIsFree||(i.theta=j),this.phiIsFree||(i.phi=_e))}setEnableDampingSpeed(i){this.enableDamping=i,this.rotateSpeed=i===!0?.2:1}stopDamping(){this.sphericalDelta.theta=0,this.sphericalDelta.phi=0}getAutoRotationAngle(){return 2*Math.PI/60/60*this.autoRotateSpeed}getZoomScale(){return Math.pow(.95,this.zoomSpeed)}rotateLeft(i){this.sphericalDelta.theta-=i}rotateUp(i){this.sphericalDelta.phi-=i}panLeft(i,s){this.panLeftV.setFromMatrixColumn(s,0),this.panLeftV.multiplyScalar(-i),this.panOffset.add(this.panLeftV)}panUp(i,s){this.panUpV.setFromMatrixColumn(s,1),this.panUpV.multiplyScalar(i),this.panOffset.add(this.panUpV)}pan(i,s){let a=this.domElement;if(a&&this.object.isPerspectiveCamera){let o=this.object.position;this.panV.copy(o).sub(this.target);let c=this.panV.length();c*=Math.tan(this.object.fov/2*Math.PI/180),this.panLeft(2*i*c/a.clientHeight,this.object.matrixWorld),this.panUp(2*s*c/a.clientHeight,this.object.matrixWorld)}else a&&this.object.isOrthographicCamera&&(this.panLeft(i*(this.object.right-this.object.left)/this.object.zoom/a.clientWidth,this.object.matrixWorld),this.panUp(s*(this.object.top-this.object.bottom)/this.object.zoom/a.clientHeight,this.object.matrixWorld));this.dispatchEvent(CJ)}dollyOut(i){this.object.isPerspectiveCamera?this.scale/=i:this.object.isOrthographicCamera&&(this.object.zoom*=i,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(BN)}dollyIn(i){this.object.isPerspectiveCamera?this.scale*=i:this.object.isOrthographicCamera&&(this.object.zoom/=i,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(BN)}zoomOut(i=this.getZoomScale()){this.dispatchEvent(tp),this.dollyOut(i),this.dispatchEvent(rp)}zoomIn(i=this.getZoomScale()){this.dispatchEvent(tp),this.dollyIn(i),this.dispatchEvent(rp)}handleMouseDownRotate(i){this.rotateStart.set(i.clientX,i.clientY)}handleMouseDownDolly(i){this.dollyStart.set(i.clientX,i.clientY)}handleMouseDownPan(i){this.panStart.set(i.clientX,i.clientY)}handleMouseMoveRotate(i,s=1){i.movementX!==void 0?this.rotateDelta.set(i.movementX,i.movementY):(this.rotateEnd.set(i.clientX,i.clientY),this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart),this.rotateStart.copy(this.rotateEnd)),this.rotateDelta.multiplyScalar(this.rotateSpeed*s).rotateAround(NN,-this.object.angleOffsetFromUp);let a=this.domElement,o=this.useWindowEvents?window.innerHeight:a.clientHeight,c=2*Math.PI*this.rotateDelta.x/o,d=2*Math.PI*this.rotateDelta.y/o;this.rotateLeft(c),this.rotateUp(d),this.update()}handleMouseMoveDolly(i){this.dollyEnd.set(i.clientX,i.clientY),this.dollyDelta.subVectors(this.dollyEnd,this.dollyStart),this.dollyDelta.y>0?this.dollyOut(this.getZoomScale()):this.dollyDelta.y<0&&this.dollyIn(this.getZoomScale()),this.dollyStart.copy(this.dollyEnd),this.update()}handleMouseMovePan(i,s=1){i.movementX!==void 0?this.panDelta.set(i.movementX,i.movementY):(this.panEnd.set(i.clientX,i.clientY),this.panDelta.subVectors(this.panEnd,this.panStart),this.panStart.copy(this.panEnd)),this.panDelta.multiplyScalar(this.panSpeed*s),this.pan(this.panDelta.x,this.panDelta.y),this.update()}handleMouseWheel(i){if(F2===!1&&Qp(i)===!1&&k2(i)===!0){if(this.enablePan===!1)return;this.gesture?(this.panDelta.set(-i.deltaX,-i.deltaY).multiplyScalar(this.panSpeed),this.panDelta.x=Math.min(Math.abs(this.panDelta.x),100)*(this.panDelta.x<0?-1:1),this.panDelta.y=Math.min(Math.abs(this.panDelta.y),100)*(this.panDelta.y<0?-1:1),i.altKey?this.pan(0,this.panDelta.y):i.shiftKey?this.pan(this.panDelta.x,0):this.pan(this.panDelta.x,this.panDelta.y),this.update()):(this.gesture=!0,this.isPointerDown=!0),window.clearTimeout(this.timer),this.timer=window.setTimeout(()=>{this.gesture=!1,this.isPointerDown=!1},30)}else{if(this.enableZoom===!1)return;i.deltaY===0?i.deltaX<0?this.dollyIn(this.getZoomScale()):i.deltaX>0&&this.dollyOut(this.getZoomScale()):i.deltaY<0?this.dollyIn(this.getZoomScale()):i.deltaY>0&&this.dollyOut(this.getZoomScale()),this.update(),this.gesture=!1,this.isPointerDown=!1}}handleTouchStartRotate(){if($e$1.length===2){let i=.5*($e$1[0].pageX+$e$1[1].pageX),s=.5*($e$1[0].pageY+$e$1[1].pageY);this.rotateStart.set(i,s)}else this.rotateStart.set($e$1[0].pageX,$e$1[0].pageY)}handleTouchStartPan(){if($e$1.length===2){let i=.5*($e$1[0].pageX+$e$1[1].pageX),s=.5*($e$1[0].pageY+$e$1[1].pageY);this.panStart.set(i,s)}else this.panStart.set($e$1[0].pageX,$e$1[0].pageY)}handleTouchStartDolly(){let i=$e$1[0].pageX-$e$1[1].pageX,s=$e$1[0].pageY-$e$1[1].pageY,a=Math.sqrt(i*i+s*s);this.dollyStart.set(0,a)}handleTouchStartDollyPan(){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchStartDolly(),this.enablePan&&this.handleTouchStartPan()}handleTouchStartDollyRotate(){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchStartDolly(),this.enableRotate&&this.handleTouchStartRotate()}handleTouchMoveRotate(i){if($e$1.length===2){let a=_v(i),o=.5*(i.pageX+a.x),c=.5*(i.pageY+a.y);this.rotateEnd.set(o,c)}else{if(i.pointerId!==$e$1[0].pointerId)return;this.rotateEnd.set(i.pageX,i.pageY)}this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart).multiplyScalar(this.rotateSpeed);let s=this.domElement;s&&(this.rotateLeft(2*Math.PI*this.rotateDelta.x/s.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/s.clientHeight)),this.rotateStart.copy(this.rotateEnd)}handleTouchMovePan(i){if($e$1.length===2){let s=_v(i),a=.5*(i.pageX+s.x),o=.5*(i.pageY+s.y);this.panEnd.set(a,o)}else{if(i.pointerId!==$e$1[0].pointerId)return;this.panEnd.set(i.pageX,i.pageY)}this.panDelta.subVectors(this.panEnd,this.panStart).multiplyScalar(this.panSpeed),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.copy(this.panEnd)}handleTouchMoveDolly(i){let s=_v(i),a=i.pageX-s.x,o=i.pageY-s.y,c=Math.sqrt(a*a+o*o);this.dollyEnd.set(0,c),this.dollyDelta.set(0,Math.pow(this.dollyEnd.y/this.dollyStart.y,this.zoomSpeed)),this.dollyOut(this.dollyDelta.y),this.dollyStart.copy(this.dollyEnd)}handleTouchMoveDollyPan(i){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchMoveDolly(i),this.enablePan&&this.handleTouchMovePan(i)}handleTouchMoveDollyRotate(i){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchMoveDolly(i),this.enableRotate&&this.handleTouchMoveRotate(i)}checkRaycastLock(){var i;if(this.object.data.raycastLock){if(this.options.isPlayMode)return!1;{let s=(i=this.options)==null?void 0:i.showCameraLock;return s&&s(),!0}}else return!1}};function la(e){let i=Math.PI*2;for(;e<=-Math.PI;)e+=i;for(;e>Math.PI;)e-=i;return e}function kN(e){return 1-Math.pow(1-e,4)}var Rg=class{constructor(e,i,s,a,o,c){this.id=e,this.data=i,this.object=s,this.page=a,this.currentIntersectedObjects=[],this.disabled=!1,this.alreadyPlayedNonTogglingActions=new Set,this.actions=Mr$1(i,i.actions,a,o,c,s),this.target=i.target,this.useToggle=i.runMode==="Toggle",this.triggeringObjects=i.triggeringObjects.map(d=>a.scene.find(d))}isValidTriggeringObject(e){return this.target==="all"?!0:this.triggeringObjects.some(i=>i===e||i.isAncestorOf(e.uuid)||e.isAncestorOf(i.uuid))}disconnect(){hr$1(this.actions)}dispatch(){this.disabled||this.object.destroyedInAction||(this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this?(e.object.currentTransitionEvent=this,e.init()):this.data.runMode==="Once"&&this.alreadyPlayedNonTogglingActions.add(e)}),this.object.dispatchEvent({type:"beginEvent",eventName:"Trigger"}),this.useToggle?(this.actions.Transition.forEach(e=>{e.toggle()}),this.actions.SwitchCamera.forEach(e=>{e.toggle()})):(this.actions.Transition.forEach(e=>{this.alreadyPlayedNonTogglingActions.has(e)===!1&&e.play()}),this.actions.SwitchCamera.forEach(e=>{e.play()})),this.actions.Link.forEach(e=>{e.dispatch()}),this.actions.Reset.forEach(e=>{e.dispatch()}),this.actions.Create.forEach(e=>{e.dispatch()}),this.actions.Destroy.forEach(e=>{e.dispatch(!1)}),this.actions.Audio.forEach(e=>{e.dispatchBasic()}),this.actions.Particles.forEach(e=>{e.dispatchBasic()}),this.actions.Video.forEach(e=>{e.dispatchBasic()}),this.actions.SceneTransition.forEach(e=>{e.dispatch()}),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()))}},jt;Q2.then(e=>jt=e);var _i=new _,vo=new Qe,hc=new _,rT=new or(0,0,0,"YXZ"),VN=new or(0,0,0,"XYZ"),xo=new _,iT=new _,nT=new _(1,1,1),np=new Qe,jb=new ce$1,zN=new ce$1,LJ={type:"updateMatrix"},UN=new Qe,sT=new Br,_b={type:"beginEvent",eventName:"Collision"},BJ={type:"beginEvent",eventName:"Trigger"};function GN(e){if(Nl.physicsEnabled(e.scene.objects))return!0;let i=!1;return e.scene.objects.traverse((s,a)=>{if(a.events){if(Array.isArray(a.events)){for(let o of a.events)if(o.data.disabled!==!0&&o.data.type==="GameControl"&&o.data.collisionEnabled){i=!0;break}}else for(let o of Object.values(a.events))if(o.disabled!==!0&&o.type==="GameControl"&&o.collisionEnabled){i=!0;break}}}),i}var Ig=e=>e.states.some(i=>i.data.position!==void 0||i.data.rotation!==void 0||i.data.hiddenMatrix!==void 0||i.data.cloner!==void 0||i.data.pathSnapping!==void 0),Hb=class{constructor(e){this.eventContext=e,this.isEnabled=!1,this.gameControl=null,this.joysticks=[],this.joystickToGameControls=[],this.sharedGameControlGlobals={entitiesWithTransformAnim:[],entityToCollisionEvents:{},colliderToEntity:new Map,triggers:[],gamePads:[],createdObjects:[],nCreatedPerAction:{}},this.sensorToTriggerEvent={},this.eventManager=void 0,this.needsCollisionDetection=!1,this.initializationCounter=-1,this.rigidBodyToMesh=new Map,this.nActiveRigidBodies=0,this.collisionEvents=[],this.isExport=!1,this.processRigidBody=i=>{if(i.bodyType()!==jt.RigidBodyType.Dynamic)return;i.isSleeping()||this.nActiveRigidBodies++;let[s,a,o]=this.rigidBodyToMesh.get(i.handle);if(_i.copy(i.translation()).multiplyScalar(this.pixelsPerMeter),vo.copy(i.rotation()),s.matrixWorld.compose(_i,vo,a),s.hasNonUniformScale&&s.matrixWorld.multiply(s.shearScale),s.dispatchEvent(LJ),o){let c=s.cloner;if(c&&c.objectForSample===void 0){c.matrixWorld.copy(s.matrixWorld);for(let d of c.children)d.updateMatrixWorld(!0)}for(let d of s.children)d.updateMatrixWorld(!0)}},this.accumulator=0,this.handleCollisionEvents=(i,s,a)=>{var d,g,b,j;if(a===!1)return;let o,c;if(this.sensorToTriggerEvent[i]?(o=this.sensorToTriggerEvent[i],c=this.sharedGameControlGlobals.colliderToEntity.get(s)):this.sensorToTriggerEvent[s]&&(o=this.sensorToTriggerEvent[s],c=this.sharedGameControlGlobals.colliderToEntity.get(i)),o&&c&&o.isValidTriggeringObject(c)){o.dispatch();return}for(let _e=this.sharedGameControlGlobals.createdObjects.length-1;_e>=0;_e--){let $=this.sharedGameControlGlobals.createdObjects[_e];if($.userData.hasCollisionDestroy&&(((d=$.rigidBody)==null?void 0:d.collider(0).handle)===i||((g=$.rigidBody)==null?void 0:g.collider(0).handle)===s)){this.sharedGameControlGlobals.createdObjects.splice(_e,1),$.removeFromParent(),requestAnimationFrame(()=>{var rt;return(rt=this.sharedGameControlGlobals.rapierWorld)==null?void 0:rt.removeRigidBody($.rigidBody)});break}}if(((b=this.gameControl)==null?void 0:b.object)===this.sharedGameControlGlobals.colliderToEntity.get(i)){let _e=this.sharedGameControlGlobals.colliderToEntity.get(s),$=this.sharedGameControlGlobals.entityToCollisionEvents[_e.uuid];if($===void 0)return;for(let rt of $)rt.data.target==="character"&&this.dispatchCollisionEvent(rt,_e,s)}else if(((j=this.gameControl)==null?void 0:j.object)===this.sharedGameControlGlobals.colliderToEntity.get(s)){let _e=this.sharedGameControlGlobals.colliderToEntity.get(i),$=this.sharedGameControlGlobals.entityToCollisionEvents[_e.uuid];if($===void 0)return;for(let rt of $)rt.data.target==="character"&&this.dispatchCollisionEvent(rt,_e,i)}else{let _e=this.sharedGameControlGlobals.colliderToEntity.get(i),$=this.sharedGameControlGlobals.entityToCollisionEvents[_e.uuid];if($!==void 0)for(let ut of $)ut.data.target==="scene"&&this.dispatchCollisionEvent(ut,_e,i);let rt=this.sharedGameControlGlobals.colliderToEntity.get(s),st=this.sharedGameControlGlobals.entityToCollisionEvents[rt==null?void 0:rt.uuid];if(st!==void 0)for(let ut of st)ut.data.target==="scene"&&this.dispatchCollisionEvent(ut,rt,s)}},this.isExport=e.isExport,this.sharedAssets=e.sharedAssets,this.renderer=e.renderer,this.requestRender=e.requestRender,this.domElement=this.renderer.domElement,this.pixelsPerMeter=IE,this.gravity=this.page.data.globalPhysics.gravity}get page(){return this.eventContext.page}attachVRControllers(e){e.forEach(i=>{i.addEventListener("connected",s=>{"gamepad"in s.data&&"axes"in s.data.gamepad&&this.sharedGameControlGlobals.gamePads.push(s.data.gamepad)})})}markIsDestroyTarget(){this.page.traverseVisibleEntity(e=>{var s,a;let i=e.dataPatched;for(let o of i.events){if(o.data.disabled===!0)continue;let c=(a=(s=o.data.actions)==null?void 0:s.find(d=>d.data.type==="Destroy"))==null?void 0:a.data;if(c)for(let d of c.objects){let g=this.page.scene.find(d);g&&(g.userData.hasDestroy=!0)}}})}markIsDragObject(){this.page.traverseVisibleEntity(e=>{let i=e.dataPatched;for(let s of i.events)if(!(s.data.disabled===!0||s.data.type!=="DragDrop"))for(let a of s.data.objects){let o=this.page.scene.find(a);o&&(o.userData.hasDrag=!0)}})}initBVH(){let e=[];if(this.page.traverseChildren(i=>{var j,_e;let s,a=i instanceof iu,o=i instanceof uu;if(i instanceof Ji||a||o)return;i instanceof Vr?s=i.object:s=i;let c=s.dataPatched;if(((j=c.physics)==null?void 0:j.enabled)==="visibility"?!c.visible:!((_e=c.physics)!=null&&_e.enabled))return!0;let d=i.geometry,g=s.userData.hasDestroy===!0,b=s.userData.hasDrag===!0;if(Ig(c)||g||b||s.dataPatched.events.some($=>$.data.disabled!==!0&&$.data.type==="GameControl"))return i.updateMatrixWorldSVD(),this.addBoundsTree(i),!0;d&&e.push(go(d,i.matrixWorld))}),e.length>0){let i=Js(e,!1);this.sharedGameControlGlobals.staticMeshBVH=new Vo(i)}}addRigidBody(e,i,s){let a=[],o="geometry"in e?e.geometry:void 0,c=i.dataPatched;if((o==null?void 0:o.getAttribute("position"))!==void 0&&a.push(go(o,e.shearScale)),c.physics.fusedBody){let d=this.gatherChildrenGeom(e,a);e.traverseObject(d),e.children.forEach(b=>b.updateMatrixWorld(!0));let g=e.cloner;g&&g.objectForSample===void 0&&c.physics.rigidBody==="dynamic"&&(g.traverseObject(d),g.children.forEach(b=>b.updateMatrixWorld(!0)))}if(a.length>0){let d,g=!s.fromCreate&&c.physics.rigidBody==="dynamic"||s.fromCreate&&s.dynamic;g?(d=jt.RigidBodyDesc.dynamic(),d.setLinearDamping(c.physics.damping).setAngularDamping(c.physics.damping).setAdditionalMass(1e-9).setGravityScale(c.physics.gravityScale).enabledRotations(...c.physics.enabledRotation).enabledTranslations(...c.physics.enabledTranslation)):(s.hasTransformAnim||s.hasFollow||s.hasDrag)&&!s.fromCreate?(d=jt.RigidBodyDesc.kinematicPositionBased(),this.sharedGameControlGlobals.entitiesWithTransformAnim.push(e)):d=jt.RigidBodyDesc.fixed();let b=Js(a);(e.hasNonUniformScale?e.matrixWorldRigid:e.matrixWorld).decompose(_i,vo,hc),e.position0=_i.clone().divideScalar(this.pixelsPerMeter),e.rotation0=vo.clone(),_i.divideScalar(this.pixelsPerMeter),d.setTranslation(_i.x,_i.y,_i.z).setRotation(vo),o?b==null||b.scale(1/this.pixelsPerMeter,1/this.pixelsPerMeter,1/this.pixelsPerMeter):b==null||b.scale(hc.x/this.pixelsPerMeter,hc.y/this.pixelsPerMeter,hc.z/this.pixelsPerMeter);let j=this.sharedGameControlGlobals.rapierWorld.createRigidBody(d);g&&this.rigidBodyToMesh.set(j.handle,[e,hc.clone(),c.physics.fusedBody]);let _e=!(c.geometry===void 0||c.geometry.type==="SubdivGeometry"||c.geometry.type==="NonParametricGeometry"||c.geometry.type==="BooleanGeometry"||c.geometry.type==="VectorGeometry"||c.geometry.type==="StarGeometry"||c.geometry.type==="RectangleGeometry"||c.geometry.type==="EllipseGeometry"||c.geometry.type==="TriangleGeometry"||c.geometry.type==="TorusGeometry"||c.geometry.type==="HelixGeometry");try{this.addCollider(j,c.physics,b,i,_e)}catch{try{this.addCollider(j,c.physics,b,i,!1)}catch($){console.error($)}}e.rigidBody=j}}addBoundsTree(e){var s,a;let i=[];if(((s=e.geometry)==null?void 0:s.getAttribute("position"))!==void 0&&((a=e.geometry)==null?void 0:a.getAttribute("position").count)>0&&i.push(go(e.geometry,e.shearScale)),e.traverseObject(this.gatherChildrenGeom(e,i)),e.children.forEach(o=>o.updateMatrixWorld(!0)),i.length>0){let o=Js(i,!1);e.bvhGeometry=o,e.bvhGeometry.boundsTree=new Vo(o),this.sharedGameControlGlobals.entitiesWithTransformAnim.push(e)}}addCollider(e,i,s,a,o=!0){var g,b;if((s==null?void 0:s.getAttribute("position").count)===0||((g=s==null?void 0:s.getIndex())==null?void 0:g.count)===0)return;let c;s&&(i.colliderType==="trimesh"?c=jt.ColliderDesc.trimesh(s.getAttribute("position").array,s.getIndex().array):c=jt.ColliderDesc.convexMesh(s.getAttribute("position").array,o?s.getIndex().array:void 0)),c.setFrictionCombineRule(jt.CoefficientCombineRule.Average).setRestitutionCombineRule(jt.CoefficientCombineRule.Average).setDensity(i.density).setFriction(i.friction).setRestitution(i.restitution);let d=this.sharedGameControlGlobals.rapierWorld.createCollider(c,e);this.sharedGameControlGlobals.colliderToEntity.set(d.handle,a),(b=this.sharedGameControlGlobals.entityToCollisionEvents[a.uuid])!=null&&b.some(j=>j.target==="scene")&&d.setActiveEvents(jt.ActiveEvents.COLLISION_EVENTS)}gatherChildrenGeom(e,i){return(s,a)=>{var g;if(a===0)return;let o;if(s instanceof Ji)if(s.objectForSample){if(s.objectForSample.dataPatched.physics.fusedBody)return;o=s.object}else return s.object.dataPatched.physics.fusedBody===!0&&s.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(s instanceof Vr)o=s.object;else if(o=s,(g=o.dataPatched.cloner)==null?void 0:g.hideBase)return!0;let c=o.dataPatched;if(c.physics.enabled==="visibility"?!c.visible:!c.physics.enabled)return!0;a===1?e.hasNonUniformScale?s.matrixWorld.multiplyMatrices(e.shearScale,s.hiddenMatrix):s.matrixWorld.copy(s.hiddenMatrix):s.matrixWorld.multiplyMatrices(s.parent.matrixWorld,s.hiddenMatrix),s.matrixWorld.multiply(s.matrix);let d=s.geometry;(d==null?void 0:d.getAttribute("position"))!==void 0&&i.push(go(d,s.matrixWorld))}}activate(e){var rt,st;if(this.isEnabled)return;this.isEnabled=!0,this.eventManager=e,this.usePhysics=this.page.data.globalPhysics.usePhysics;let i=this.page.playCamera,s=!1,a=5,o=8,c=9,d="drag",g=this.page.data.publish.gameControlObject,b=g!==null?this.page.find(g):null,j=null;if(b)for(let ut of b.data.events){if(ut.data.disabled||ut.data.type!=="GameControl")break;let gt=b;for(;this.usePhysics&&((rt=gt=gt.parent)==null?void 0:rt.parent)!==null&&!((st=gt.data.physics)!=null&&st.fusedBody););ut.data.collisionEnabled&&(this.needsCollisionDetection=!0),j===null&&(j=ut.data)}if(this.page.traverseEntity(ut=>{for(let gt of ut.dataPatched.events)if(gt.data.disabled===!1&&gt.data.type==="Trigger")return this.needsCollisionDetection=!0,!0}),b&&j){s=s||j.camera===i.uuid||b.uuid===i.uuid;let ut=new Eg(b,this.renderer.domElement,j,this.eventContext.page.data.globalPhysics,this,b.uuid!==i.uuid&&j.camera===i.uuid,i,this.page,this.sharedAssets);this.gameControl=ut,a=j.joystickPosLoc,o=j.joystickRotLoc,c=j.jumpTouchButtonLoc,d=j.rotByTouch,Ii&&j.touchControl&&(this.joystickToGameControls[a]="pos",j.moveMode==="walk"&&(this.joystickToGameControls[c]="jmp"),d==="joystick"&&(this.joystickToGameControls[o]="rot"))}if(this.gameControl&&this.gameControl.data.navmesh.enabled){let ut=this.gameControl.data;if(!this.navigationMeshWrapper){this.navigationMeshWrapper=new zb(this.usePhysics,this.isExport);let gt;ut.collider.type==="sphere"?gt=ut.collider.radius*2:gt=ut.collider.height,gt=Math.floor(gt/ut.navmesh.ch-1),this.navigationMeshWrapper.init({...ut.navmesh,walkableHeight:gt},this.gameControl,this.eventContext)}}if(s===!1){let{enableRotate:ut,enablePan:gt,enableZoom:wt,autoRotate:yt,hoverRotatePanMode:At}=this.eventManager.publish.orbitControls;(ut||gt||wt||yt||At!==0)&&(this.orbitControls=new ip$2(i,this.renderer.domElement,{isExport:this.isExport,isPlayMode:!0}),this.orbitControls.addEventListener("change",this.requestRender),this.orbitControls.addEventListener("end",this.requestRender),this.orbitControls.addEventListener("start",this.requestRender),this.orbitControls.fromJSON(this.eventManager.publish.orbitControls,this.eventManager.publish.mouseEventTarget),this.orbitControls.useKeyEvents=!1,this.orbitControls.addEventListenersToCamera(),this.orbitControls.connect(),this.orbitControls.update())}let _e=this.renderer.domElement.width/this.renderer.getPixelRatio(),$=this.renderer.domElement.height/this.renderer.getPixelRatio();this.joystickToGameControls.forEach((ut,gt)=>{let wt=document.body.appendChild(document.createElement("div")),[yt,At,Ct]=this.eventManager.eventContext.publish.joystickSizeAndXYOffset[gt],Tt=(_e-5*yt)/4+yt,kt={},Pt=ut==="jmp",It=Pt?0:yt;gt<10?(gt<5?kt.top=It/2:kt.bottom=It/2,kt.left=It/2+gt%5*Tt):gt===10?(kt.left=It/2,kt.top=$/2):(kt.right=It/2,kt.top=$/2),kt.top?kt.top-=At[1]:kt.bottom+=At[1],kt.left?kt.left+=At[0]:kt.right-=At[0];for(let Ht in kt)kt[Ht]+="px";if(Pt){let Ht=wt.appendChild(document.createElement("div"));Object.assign(Ht.style,kt,{position:"absolute",width:yt+"px",height:yt+"px",backgroundColor:`rgba(255,255,255,${Ct==="show"?.4:0})`,zIndex:"9999",borderRadius:yt+"px",border:Ct==="show"?"solid 2px rgba(0, 0, 0, .1)":"none",display:"flex",alignItems:"center",justifyContent:"center",touchAction:"none"});let dr=yt/16*16*.4;Ct==="show"&&(Ht.innerHTML=`
						<svg width="${dr}" height="${yt*.4}" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
							<path d="M2 10L8 4L14 10" stroke="black" stroke-opacity="40%" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
						</svg>
					`),Ht.addEventListener("pointerdown",()=>{this.gameControl.movementState.jump=1,this.requestRender()}),Ht.addEventListener("touchend",hs=>hs.preventDefault()),this.joysticks[gt]=[void 0,wt];return}let Lt={zone:wt,mode:"static",position:kt,size:yt};Ct==="hide"&&(Lt.restOpacity=0);let Nt=xB.create(Lt);Nt.on("move",(Ht,dr)=>{let hs=this.gameControl;ut==="pos"?dr.force<.2?hs.moveForce=0:(hs.movementState.movePosZ=Math.sin(-dr.angle.radian),hs.movementState.movePosX=Math.cos(-dr.angle.radian),dr.force>1.2?hs.movementState.run=1:hs.movementState.run=0,dr.force<.3?hs.moveForce=(dr.force-.2)/.1:hs.moveForce=1):ut==="rot"&&(dr.force<.2?hs.rotForce=0:(hs.movementState.rotPosX=dr.vector.y,hs.movementState.rotPosY=-dr.vector.x,dr.force<.3?hs.rotForce=(dr.force-.2)/.1:hs.rotForce=1)),this.requestRender()}),Nt.on("end",(Ht,dr)=>{let hs=this.gameControl;ut==="pos"?(hs.movementState.movePosZ=0,hs.movementState.movePosX=0,hs.moveForce=1):ut==="rot"&&(hs.movementState.rotPosX=0,hs.movementState.rotPosY=0,hs.rotForce=1)}),this.joysticks[gt]=[Nt,wt]}),this.markIsDestroyTarget(),this.markIsDragObject(),this.rebuildBVH(),this.initializationCounter++,window.setTimeout(()=>{this.collisionEvents.forEach(ut=>ut.disabled=!1)},80)}initPhysics(){var d;(d=this.sharedGameControlGlobals.rapierWorld)==null||d.free(),this.sharedGameControlGlobals.rapierWorld=new jt.World(new jt.Vector3(0,this.gravity,0)),this.events=new jt.EventQueue(!0);let e=[],i=[];if(this.page.traverseChildren(g=>{var yt,At,Ct,Tt;let b;if(g instanceof Ji)if(g.objectForSample){if(g.objectForSample.dataPatched.physics.fusedBody)return;b=g.object}else return g.object.dataPatched.physics.fusedBody===!0&&g.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(g instanceof Vr)b=g.object;else{if(g instanceof uu||g instanceof iu)return;if(b=g,((yt=b.dataPatched.cloner)==null?void 0:yt.disabled)===!1&&((At=b.dataPatched.cloner)==null?void 0:At.hideBase)&&((Ct=b.dataPatched.physics)==null?void 0:Ct.fusedBody)!==!0)return!0}let j=b.dataPatched,_e;for(let kt of j.events)kt.data.disabled!==!0&&kt.data.type==="GameControl"&&(_e=kt.data);if(!j.physics||(j.physics.enabled==="visibility"?!j.visible:!j.physics.enabled))return!0;g.updateMatrixWorldSVD();let $=Ig(j),rt=!1,st=b.userData.hasDestroy,ut=b.userData.hasDrag,gt=!1;for(let kt of j.events)if(kt.data.disabled!==!0){if(kt.data.type==="Collision"){rt=!0;let Pt=new kb(kt.id,kt.data,b,this.page,this.sharedAssets,this.eventManager);Pt.disabled=!0,this.collisionEvents.push(Pt),this.sharedGameControlGlobals.entityToCollisionEvents[b.uuid]&&this.sharedGameControlGlobals.entityToCollisionEvents[b.uuid].every(It=>It.id!==kt.id)?this.sharedGameControlGlobals.entityToCollisionEvents[b.uuid].push(Pt):this.sharedGameControlGlobals.entityToCollisionEvents[b.uuid]=[Pt]}else if(kt.data.type==="Follow"){gt=!0;let Pt=kt.data.target;g.traverseVisible(It=>{It.userData.isFollowingObj=Pt})}}j.physics.rigidBody==="dynamic"&&j.physics.fusedBody===!1&&(g.matrixWorldFusedFalse=g.matrixWorld.clone());let wt=g.geometry;if(_e!==void 0){let kt=jt.RigidBodyDesc.kinematicPositionBased();(g.hasNonUniformScale?g.matrixWorldRigid:g.matrixWorld).decompose(_i,vo,hc),g.position0=_i.clone().divideScalar(this.pixelsPerMeter),g.rotation0=vo.clone(),_i.divideScalar(this.pixelsPerMeter),kt.setTranslation(_i.x,_i.y,_i.z).setRotation(vo);let Pt=this.sharedGameControlGlobals.rapierWorld.createRigidBody(kt);g.rigidBody=Pt;let It;_e.collider.type==="sphere"?It=jt.ColliderDesc.ball(_e.collider.radius/this.pixelsPerMeter):_e.collider.type==="capsule"?It=jt.ColliderDesc.capsule((_e.collider.height/2-_e.collider.radius)/this.pixelsPerMeter,_e.collider.radius/this.pixelsPerMeter):It=jt.ColliderDesc.cuboid(_e.collider.width/this.pixelsPerMeter/2,_e.collider.height/this.pixelsPerMeter/2,_e.collider.depth/this.pixelsPerMeter/2),It.setFrictionCombineRule(jt.CoefficientCombineRule.Average).setRestitutionCombineRule(jt.CoefficientCombineRule.Average).setDensity(j.physics.density).setFriction(j.physics.friction).setRestitution(j.physics.restitution);let Lt=this.sharedGameControlGlobals.rapierWorld.createCollider(It,Pt);this.sharedGameControlGlobals.colliderToEntity.set(Lt.handle,b),_i.fromArray(_e.collider.position).multiply(hc.setFromMatrixScale(b.matrixWorld)).divideScalar(this.pixelsPerMeter),Lt.setTranslationWrtParent(_i);let Nt=new Qe().setFromEuler(new or().setFromVector3(new _().fromArray(_e.collider.rotation)));Lt.setRotationWrtParent(Nt),Lt.setActiveEvents(jt.ActiveEvents.COLLISION_EVENTS),this.generateSensorColliderDescs(b,!0)}else j.physics.rigidBody==="dynamic"||$||gt||st||ut||rt?(this.addRigidBody(g,b,{hasFollow:gt,hasTransformAnim:$,hasDrag:ut}),this.generateSensorColliderDescs(b,j.physics.fusedBody)):(wt&&e.push(go(wt,g.matrixWorld)),j.physics.fusedBody&&g.traverseObject((kt,Pt)=>{var Ht;if(Pt===0)return;let It;if(kt instanceof Ji)if(kt.objectForSample){if(kt.objectForSample.dataPatched.physics.fusedBody)return;It=kt.object}else return kt.object.dataPatched.physics.fusedBody===!0&&kt.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(kt instanceof Vr)It=kt.object;else if(It=kt,(Ht=It.dataPatched.cloner)==null?void 0:Ht.hideBase)return!0;let Lt=It.dataPatched;if(Lt.physics.enabled==="visibility"?!Lt.visible:!Lt.physics.enabled)return!0;let Nt=kt.geometry;(Nt==null?void 0:Nt.getAttribute("position"))!==void 0&&e.push(go(Nt,kt.matrixWorld))}),this.generateSensorColliderDescs(b,j.physics.fusedBody,i));if(((Tt=j.physics)==null?void 0:Tt.fusedBody)===!0||_e)return!0}),e.length===0)return;let s=Js(e);s.scale(1/this.pixelsPerMeter,1/this.pixelsPerMeter,1/this.pixelsPerMeter);let a=jt.RigidBodyDesc.fixed(),o=this.sharedGameControlGlobals.rapierWorld.createRigidBody(a),c=jt.ColliderDesc.trimesh(s.getAttribute("position").array,s.getIndex().array).setFrictionCombineRule(jt.CoefficientCombineRule.Multiply).setRestitutionCombineRule(jt.CoefficientCombineRule.Multiply).setFriction(1).setRestitution(1);this.sharedGameControlGlobals.rapierWorld.createCollider(c,o);for(let[g,b]of i){let j=this.sharedGameControlGlobals.rapierWorld.createCollider(g,o);this.sensorToTriggerEvent[j.handle]=b}}updatePositions(){return this.nActiveRigidBodies=0,this.sharedGameControlGlobals.rapierWorld.forEachRigidBody(this.processRigidBody),this.nActiveRigidBodies>0}rebuildBVH(){this.usePhysics?this.initPhysics():(this.page.traverseEntity(e=>{for(let i of e.dataPatched.events)if(i.data.type==="Trigger"&&i.data.disabled!==!0){let s=new Rg(i.id,i.data,e,this.page,this.sharedAssets,this.eventManager),a=new ce$1().compose(xo.fromArray(i.data.position),np.setFromEuler(VN.fromArray(i.data.rotation)),nT);if(i.data.triggerZone==="box"){let o=new Wt;o.min.fromArray(i.data.size).multiplyScalar(-.5),o.max.fromArray(i.data.size).multiplyScalar(.5),this.sharedGameControlGlobals.triggers.push([o,a,e,s])}else this.sharedGameControlGlobals.triggers.push([i.data.radius,a,e,s])}}),this.needsCollisionDetection&&this.initBVH())}disconnectEvents(){this.collisionEvents.forEach(e=>e.disconnect()),this.sharedGameControlGlobals.triggers.forEach(e=>e[3].disconnect()),this.sharedGameControlGlobals.triggers.length=0}deactivate(){var e,i,s,a;if(this.isEnabled){this.isEnabled=!1,this.page.traverse(o=>{let c=o;c.matrixWorldFusedFalse&&(c.matrixWorldFusedFalse=void 0),c.rigidBody&&(c.rigidBody=void 0),c.position0&&(c.position0=void 0),c.rotation0&&(c.rotation0=void 0)}),(e=this.sharedGameControlGlobals.rapierWorld)==null||e.free(),this.sharedGameControlGlobals.rapierWorld=void 0,this.sharedGameControlGlobals.staticMeshBVH=void 0,this.accumulator=0,this.sharedGameControlGlobals.entitiesWithTransformAnim=[],this.disconnectEvents(),(i=this.gameControl)==null||i.reset(),(s=this.gameControl)==null||s.dispose(),this.gameControl=null,this.initializationCounter=-1,this.joysticks.forEach(([o,c])=>{o==null||o.destroy(),c.remove()}),this.joystickToGameControls=[],this.joysticks=[],this.orbitControls&&(this.orbitControls.dispose(),this.orbitControls=void 0),(a=this.navigationMeshWrapper)==null||a.dispose(),this.navigationMeshWrapper=void 0;for(let o of Object.values(this.sharedGameControlGlobals.entityToCollisionEvents))o.forEach(c=>c.disconnect());this.sharedGameControlGlobals.entityToCollisionEvents={},this.page.updateMatrixWorld(!0)}}update(e,i,s){if(!this.isEnabled)return!0;let a=!0;if(this.orbitControls!==void 0&&this.orbitControls.needsUpdate&&(a=!this.orbitControls.update()),this.initializationCounter>=0&&this.initializationCounter<2?(this.initializationCounter++,a=!1):this.initializationCounter===2&&this.gameControl&&(a=!this.gameControl.update(e,i,s)&&a),this.usePhysics===!1&&this.checkTrigger(),this.usePhysics){let o=.016666666666666666;if(e===0)a=this.stepPhysics()&&a;else{let c=e/1e3;c<o&&c>o*.55&&(c=o),this.accumulator+=c;let d=performance.now(),g=0,b=6;for(;this.accumulator>=o&&g<b&&(a=this.stepPhysics()&&a,this.accumulator-=o,g++,!(performance.now()-d>o*1e3)););this.accumulator=this.accumulator%o}}return a}stepPhysics(){var e;for(let i of this.sharedGameControlGlobals.entitiesWithTransformAnim){(i.hasNonUniformScale?i.matrixWorldRigid:i.matrixWorld).decompose(_i,vo,hc),rT.setFromQuaternion(vo);let s=i;s.prevR===void 0?(s.prevR=rT.clone(),s.prevT=_i.clone()):(s.prevR.copy(rT),s.prevT.copy(_i)),i.rigidBody&&(i.rigidBody.setNextKinematicTranslation(_i.divideScalar(this.pixelsPerMeter)),i.rigidBody.setNextKinematicRotation(vo))}return this.sharedGameControlGlobals.rapierWorld.step(this.events),(e=this.events)==null||e.drainCollisionEvents(this.handleCollisionEvents),!this.updatePositions()}dispatchCollisionEvent(e,i,s){var c;let a=((c=this.sharedGameControlGlobals.rapierWorld)==null?void 0:c.getCollider(s))._parent,o;if(i.cloner){for(let d of i.cloner.children)if(d.rigidBody===a){o=d;break}}e.dispatch(o),i.dispatchEvent(_b)}updateUseWindowEvents(e){var i;(i=this.orbitControls)==null||i.updateUseWindowEvents(e)}generateSensorColliderDescs(e,i,s){let a=zN.copy(e.matrixWorld).invert();e.traverseEntity((o,c)=>{if(i===!1&&c===1)return!0;for(let d of o.dataPatched.events)if(d.data.type==="Trigger"&&d.data.disabled!==!0){let g=new Rg(d.id,d.data,o,this.page,this.sharedAssets,this.eventManager),b;if(d.data.triggerZone==="box"?b=jt.ColliderDesc.cuboid(...d.data.size.map(j=>j/(2*this.pixelsPerMeter))):b=jt.ColliderDesc.ball(d.data.radius/this.pixelsPerMeter),b.setDensity(0).setSensor(!0).setActiveEvents(jt.ActiveEvents.COLLISION_EVENTS),xo.fromArray(d.data.position),np.setFromEuler(VN.fromArray(d.data.rotation)),jb.compose(xo,np,nT).premultiply(o.matrixWorld),s?(jb.decompose(xo,np,iT),b.setActiveCollisionTypes(jt.ActiveCollisionTypes.KINEMATIC_FIXED|jt.ActiveCollisionTypes.DYNAMIC_FIXED)):(jb.premultiply(a).decompose(xo,np,iT),e.rigidBody.bodyType()===jt.RigidBodyType.Dynamic||(e.rigidBody.bodyType()===jt.RigidBodyType.Fixed?b.setActiveCollisionTypes(jt.ActiveCollisionTypes.KINEMATIC_FIXED|jt.ActiveCollisionTypes.DYNAMIC_FIXED):b.setActiveCollisionTypes(jt.ActiveCollisionTypes.KINEMATIC_KINEMATIC|jt.ActiveCollisionTypes.DYNAMIC_KINEMATIC))),xo.divideScalar(this.pixelsPerMeter),b.setTranslation(xo.x,xo.y,xo.z),b.setRotation(np),s)s.push([b,g]);else{let j=this.sharedGameControlGlobals.rapierWorld.createCollider(b,e.rigidBody);this.sensorToTriggerEvent[j.handle]=g}}})}checkTrigger(){let e;for(let i=0;i<this.sharedGameControlGlobals.triggers.length;i++){let[s,a,o,c]=this.sharedGameControlGlobals.triggers[i];for(let d=0;d<this.sharedGameControlGlobals.entitiesWithTransformAnim.length;d++){let g=this.sharedGameControlGlobals.entitiesWithTransformAnim[d];if(o===g||c.isValidTriggeringObject(vt.is(g)?g:g.object)===!1)continue;let b=zN.copy(o.matrixWorld).decompose(xo,UN,iT).compose(xo,UN,nT).multiply(a),j=jb.copy(g.matrixWorld).invert().multiply(b);s instanceof Wt?e=g.bvhGeometry.boundsTree.intersectsBox(s,j):(sT.radius=s,sT.center.setFromMatrixPosition(j),e=g.bvhGeometry.boundsTree.intersectsSphere(sT)),e?c.currentIntersectedObjects.indexOf(g)===-1&&(c.currentIntersectedObjects.push(g),c.dispatch(),o.dispatchEvent(BJ)):c.currentIntersectedObjects=c.currentIntersectedObjects.filter(_e=>_e!==g)}}}};function jN(e){let i=this._clip.duration,s=this._clip.start??0,a=this.loop,o=this.time+e,c=this._loopCount,d=a===kp;if(e===0)return c===-1?o:d&&(c&1)===1?i-(o-s):o;if(a===_w){c===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(o>=i)o=i;else if(o<0)o=0;else{this.time=o;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=o,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(c===-1&&(e>=0?(c=0,this._setEndings(!0,this.repetitions===0,d)):this._setEndings(this.repetitions===0,!0,d)),o>=i||o<s){let g=Math.floor((o-s)/(i-s));o-=(i-s)*g,c+=Math.abs(g);let b=this.repetitions-c;if(b<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,d||(o=e>0?i:s,this.repetitions===1&&(o=i)),this.time=o,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(b===1){let j=e<0;this._setEndings(j,!j,d)}else this._setEndings(!1,!1,d);this._loopCount=c,this.time=o,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:g})}}else this.time=o;if(d&&(c&1)===1)return i-(o-s)}return o}var HN=!1,Wb=class{constructor(e,i,s,a){this.scene=e,this.requestRender=i,this.updateDisplayProgress=s,this.animationInspectorState=a,this.clipIdToAction={},this.activeClip=null,this.needsUpdate=!1,this.addClip=o=>{o.data.type==="Empty"&&o.data.animations&&o.data.animations.forEach((c,d)=>{let g=c[0]+"/";if(Array.isArray(o.identity)?g+=o.identity[0]:g+=o.uuid,this.clipIdToAction[g])return;let b=nh.parse(JSON.parse(c[2]));o.animations[d]=b;let j=this.mixer.clipAction(b,o);HN===!1&&(Object.getPrototypeOf(j)._updateTime=jN,HN=!0),j.clampWhenFinished=!0,this.clipIdToAction[g]=j})},this.mixer=new Fy(e),this.scene.traverseEntity(this.addClip)}deleteClip(e,i){let s=this.scene.find(i);if(!s)return;let a=s.animations.find(c=>c.uuid===e);if(!a)return;let o=this.clipIdToAction[e];!o||(o.stop(),this.mixer.uncacheClip(a),delete this.clipIdToAction[e],s.animations=s.animations.filter(c=>c.uuid!==e))}get isPlaying(){return Object.values(this.clipIdToAction).some(e=>e.isRunning())}playFromInspector(e){this.mixer.stopAllAction();let i=this.clipIdToAction[e];!i||(i.play(),this.activeClip=i.getClip(),this.requestRender())}onExitPlayMode(){Object.values(this.clipIdToAction).forEach(e=>{e.repetitions=1/0,e.loop=Ew}),this.mixer.stopAllAction(),this.requestRender()}play(e){let i=e.clipId+"/"+e.object,s=this.clipIdToAction[i];if(s)return e&&(e.repeat>=0&&(s.repetitions=e.repeat+1),e.direction==="pingpong"&&e.repeat!==0&&(s.loop=kp)),s.play(),s.paused=!1,this.requestRender(),s}resumeFromInspector(e){let i=this.clipIdToAction[e];!i||(i.play(),i.paused=!1,this.requestRender())}pauseFromInspector(e){let i=this.clipIdToAction[e];!i||(i.paused=!0)}stop(){this.mixer.stopAllAction(),this.requestRender()}update(e){var i;if(this.needsUpdate)this.needsUpdate=!1;else if(this.isPlaying===!1||(i=this.animationInspectorState)!=null&&i.isScrubbing)return;this.mixer.update(e/1e3),this.activeClip&&this.updateDisplayProgress(Math.round(this.mixer.time/this.activeClip.duration*this.maxFrames%this.maxFrames)),this.requestRender()}get maxFrames(){var e,i;return((i=(e=this.activeClip)==null?void 0:e.tracks[0])==null?void 0:i.times.length)??0}setProgressFromInspector(e,i){if(!this.clipIdToAction[i])return;this.activeClip!==this.clipIdToAction[i].getClip()&&this.playFromInspector(i);let s=this.clipIdToAction[i].paused;this.clipIdToAction[i].paused=!1,this.mixer.setTime(Math.min(this.maxFrames?e/this.maxFrames:0,.9999)*this.activeClip.duration),this.requestRender(),s&&(this.clipIdToAction[i].paused=!0)}},oT=new WeakMap,qb=class extends ml{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,i,s,a){let o=new sh(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,c=>{this.decodeDracoFile(c,i).catch(a)},s,a)}decodeDracoFile(e,i,s,a){let o={attributeIDs:s||this.defaultAttributeIDs,attributeTypes:a||this.defaultAttributeTypes,useUniqueIDs:!!s};return this.decodeGeometry(e,o).then(i)}decodeGeometry(e,i){let s=JSON.stringify(i);if(oT.has(e)){let g=oT.get(e);if(g.key===s)return g.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let a,o=this.workerNextTaskID++,c=e.byteLength,d=this._getWorker(o,c).then(g=>(a=g,new Promise((b,j)=>{a._callbacks[o]={resolve:b,reject:j},a.postMessage({type:"decode",id:o,taskConfig:i,buffer:e},[e])}))).then(g=>this._createGeometry(g.geometry));return d.catch(()=>!0).then(()=>{a&&o&&this._releaseTask(a,o)}),oT.set(e,{key:s,promise:d}),d}_createGeometry(e){let i=new Pe;e.index&&i.setIndex(new Xe(e.index.array,1));for(let s=0;s<e.attributes.length;s++){let a=e.attributes[s],o=a.name,c=a.array,d=a.itemSize;i.setAttribute(o,new Xe(c,d))}return i}_loadLibrary(e,i){let s=new sh(this.manager);return s.setPath(this.decoderPath),s.setResponseType(i),s.setWithCredentials(this.withCredentials),new Promise((a,o)=>{s.load(e,a,void 0,o)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;let e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",i=[];return e?i.push(this._loadLibrary("draco_decoder.js","text")):(i.push(this._loadLibrary("draco_wasm_wrapper.js","text")),i.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(i).then(s=>{let a=s[0];e||(this.decoderConfig.wasmBinary=s[1]);let o=NJ.toString(),c=["/* draco decoder */",a,"","/* worker */",o.substring(o.indexOf("{")+1,o.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([c]))}),this.decoderPending}_getWorker(e,i){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){let a=new Worker(this.workerSourceURL);a._callbacks={},a._taskCosts={},a._taskLoad=0,a.postMessage({type:"init",decoderConfig:this.decoderConfig}),a.onmessage=function(o){let c=o.data;switch(c.type){case"decode":a._callbacks[c.id].resolve(c);break;case"error":a._callbacks[c.id].reject(c);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+c.type+'"')}},this.workerPool.push(a)}else this.workerPool.sort(function(a,o){return a._taskLoad>o._taskLoad?-1:1});let s=this.workerPool[this.workerPool.length-1];return s._taskCosts[e]=i,s._taskLoad+=i,s})}_releaseTask(e,i){e._taskLoad-=e._taskCosts[i],delete e._callbacks[i],delete e._taskCosts[i]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}};function NJ(){let e,i;onmessage=function(d){let g=d.data;switch(g.type){case"init":e=g.decoderConfig,i=new Promise(function(_e){e.onModuleLoaded=function($){_e({draco:$})},DracoDecoderModule(e)});break;case"decode":let b=g.buffer,j=g.taskConfig;i.then(_e=>{let $=_e.draco,rt=new $.Decoder,st=new $.DecoderBuffer;st.Init(new Int8Array(b),b.byteLength);try{let ut=s($,rt,st,j),gt=ut.attributes.map(wt=>wt.array.buffer);ut.index&&gt.push(ut.index.array.buffer),self.postMessage({type:"decode",id:g.id,geometry:ut},gt)}catch(ut){console.error(ut),self.postMessage({type:"error",id:g.id,error:ut.message})}finally{$.destroy(st),$.destroy(rt)}});break}};function s(d,g,b,j){let _e=j.attributeIDs,$=j.attributeTypes,rt,st,ut=g.GetEncodedGeometryType(b);if(ut===d.TRIANGULAR_MESH)rt=new d.Mesh,st=g.DecodeBufferToMesh(b,rt);else if(ut===d.POINT_CLOUD)rt=new d.PointCloud,st=g.DecodeBufferToPointCloud(b,rt);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!st.ok()||rt.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+st.error_msg());let gt={index:null,attributes:[]};for(let wt in _e){let yt=self[$[wt]],At,Ct;if(j.useUniqueIDs)Ct=_e[wt],At=g.GetAttributeByUniqueId(rt,Ct);else{if(Ct=g.GetAttributeId(rt,d[_e[wt]]),Ct===-1)continue;At=g.GetAttribute(rt,Ct)}gt.attributes.push(o(d,g,rt,wt,yt,At))}return ut===d.TRIANGULAR_MESH&&(gt.index=a(d,g,rt)),d.destroy(rt),gt}function a(d,g,b){let j=b.num_faces()*3,_e=j*4,$=d._malloc(_e);g.GetTrianglesUInt32Array(b,_e,$);let rt=new Uint32Array(d.HEAPF32.buffer,$,j).slice();return d._free($),{array:rt,itemSize:1}}function o(d,g,b,j,_e,$){let rt=$.num_components(),st=b.num_points()*rt,ut=st*_e.BYTES_PER_ELEMENT,gt=c(d,_e),wt=d._malloc(ut);g.GetAttributeDataArrayForAllPoints(b,$,gt,ut,wt);let yt=new _e(d.HEAPF32.buffer,wt,st).slice();return d._free(wt),{name:j,array:yt,itemSize:rt}}function c(d,g){switch(g){case Float32Array:return d.DT_FLOAT32;case Int8Array:return d.DT_INT8;case Int16Array:return d.DT_INT16;case Int32Array:return d.DT_INT32;case Uint8Array:return d.DT_UINT8;case Uint16Array:return d.DT_UINT16;case Uint32Array:return d.DT_UINT32}}}var dc;function FJ(){return dc||(dc=new qb,dc.setDecoderPath("https://www.gstatic.com/draco/versioned/decoders/1.5.2/").preload()),dc.decoderPending}async function kJ(e){if(dc){let i={attributeIDs:dc.defaultAttributeIDs,attributeTypes:dc.defaultAttributeTypes,useUniqueIDs:!1},s;try{s=await dc.decodeGeometry(new Int8Array(e).buffer,i)}catch(a){console.error(a)}if(s)return{index:s.index?{array:s.index.array}:void 0,attributes:Object.entries(s.attributes).map(([a,o])=>({name:a,itemSize:o.itemSize,array:o.array}))}}return null}async function WN(e,i){let[s,a]=n1(jv.deserialize(new Uint8Array(e)));u0(s);let o=[];s.scene.objects.traverse((c,d)=>{d.type==="Mesh"&&d.geometry.type==="NonParametricGeometry"&&d.geometry.data.draco!==void 0&&o.push(d)}),o.length&&await FJ();for(let c of o){let d=await kJ(kr$1(c.geometry.data.draco));if(d){d.index&&(c.geometry.data.index={array:d.index.array,itemSize:1,normalized:!1,type:"Uint32Array"});let g={};d.attributes.forEach(({name:b,array:j,itemSize:_e})=>{g[b]={array:j,itemSize:_e,type:"Float32Array",normalized:!1}}),c.geometry.data.attributes=g,c.geometry.data.draco=void 0}}return i&&i(s),a.result().data}var aT=class{constructor(e,i,s,a,o,c,d){this.id=e,this.data=i,this.dataEvent=s,this.object=a,this.stage=!1,this.actions=Mr$1(s,i.actions,o,c,d,a)}disconnect(){hr$1(this.actions)}dispatchIn(){this.actions.Audio.forEach(e=>e.dispatchBasic()),this.actions.Particles.forEach(e=>e.dispatchBasic()),this.actions.Video.forEach(e=>e.dispatchBasic()),this.actions.Create.forEach(e=>e.dispatch()),this.actions.Destroy.forEach(e=>e.dispatch()),this.actions.Reset.forEach(e=>e.dispatch()),this.actions.Link.forEach(e=>e.dispatch()),this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.actions.Transition.forEach(e=>e.toggle()),this.actions.Animation.forEach(e=>e.play()),this.actions.SwitchCamera.forEach(e=>e.play()),this.actions.SceneTransition.forEach(e=>e.dispatch()),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch())}dispatchOut(){this.actions.Transition.forEach(e=>{e.toggle()})}},Yb=class extends zr$1{constructor(e,i){super(e),this.eventManager=i,this.breakpoints=[],this.resize=(s,a)=>{this.breakpoints.forEach(o=>{let c=Yv.deviceToSize(o.data.size),d=o.dataEvent.orientation==="horizontal"?s:a,g;switch(o.data.operator){case"<":g=d<c[0];break;case">":g=d>c[0];break;case"<>":g=d>c[0]&&d<c[1];break}o.stage!==g&&(o.stage=g,o.stage?o.dispatchIn():o.dispatchOut())})},this.onResizeObserver=new ResizeObserver(s=>{for(let a of s){let{width:o,height:c}=a.contentRect;this.resize(o,c)}})}connect(){let{page:e,sharedAssets:i,domElement:s}=this.eventContext;this.onResizeObserver.observe(s);let a=o=>{var c;if(!(!o.visible||!((c=o.data)!=null&&c.events.length)))for(let{data:d}of o.data.events)d.disabled||d.type==="Resize"&&d.breakpoints.forEach(({data:g,id:b})=>{try{let j=new aT(b,g,d,o,e,i,this.eventManager);this.breakpoints.push(j)}catch{}})};e.traverseEntity(o=>{var c;(o instanceof _r$1||o instanceof mr)&&((c=o.frame)==null||c.traverse(d=>{a(d)})),a(o)})}disconnect(){this.onResizeObserver.disconnect(),this.breakpoints.forEach(e=>{e.disconnect()}),this.breakpoints=[]}},Xb=class{constructor(e,i,s,a,o){this.publish=e,this.controlsManager=i,this.animationControls=s,this.eventContext=a,this.sharedVariables=o,this.isEnabled=!1,this.activateCount=0,this.needsMouse=!1,this.needsRaycast=!1,this.onTouchMovePreventScroll=c=>{(c.touches.length>1||this.preventTouchScroll)&&c.preventDefault()},this.onMouseWheelPreventScroll=c=>{this.preventScroll&&c.preventDefault()},this.onMouseMove=c=>{this.eventContext.sharedAssets.mouseProperty={...this.getMousePosition(c),pressed:c.buttons>0}},this.onMouseDown=c=>{this.eventContext.sharedAssets.mouseProperty={...this.getMousePosition(c),pressed:!0}},this.onMouseUp=c=>{this.eventContext.sharedAssets.mouseProperty={...this.getMousePosition(c),pressed:!1}},this.getMousePosition=c=>{var j;let{domRect:d}=this.eventContext,{pageX:g,pageY:b}=((j=c.touches)==null?void 0:j.length)>0?c.touches[0]:c;return{x:g-(d.left+window.scrollX),y:b-(d.top+window.scrollY)}},this.stopRaycast=e.stopRaycast,this.preventScroll=e.preventScroll,this.preventTouchScroll=e.preventTouchScroll,this.hideCursor=e.hideCursor,this.requestRender=a.requestRender}activate(){if(this.isEnabled)return;this.isEnabled=!0,this.initializeActionsDependentStates(),this.needsMouse&&(this.eventContext.domElement.addEventListener("pointermove",this.onMouseMove),this.eventContext.domElement.addEventListener("pointerdown",this.onMouseDown)),this.handlers={Spline:new Mb(this.eventContext),DynamicVariable:new Vb(this.eventContext,this.sharedVariables,this,this.needsMouse,this.needsRaycast),Conditional:new Db(this.eventContext,this),Start:new Fb(this.eventContext,this),Basic:new Cb(this.eventContext,this,this.needsRaycast),MouseHover:new Bb(this.eventContext,this),Scroll:new Nb(this.eventContext,this),Follow:new Ib(this.eventContext,this),DragDrop:new Ob(this.eventContext,this),LookAt:new Lb(this.eventContext),Resize:new Yb(this.eventContext,this)};let{page:e,domElement:i}=this.eventContext;this.hideCursor&&(i.style.cursor="none"),e.traverseEntity(s=>{s.addEventListener("requestRender",this.requestRender)}),Object.values(this.handlers).forEach(s=>s.connect()),i.addEventListener("wheel",this.onMouseWheelPreventScroll),i.addEventListener("touchmove",this.onTouchMovePreventScroll),this.activateCount++}deactivate(){var s;if(!this.isEnabled)return;this.isEnabled=!1,this.eventContext.domElement.removeEventListener("pointermove",this.onMouseMove),this.eventContext.domElement.removeEventListener("pointerdown",this.onMouseDown),this.eventContext.domElement.removeEventListener("pointerup",this.onMouseUp),this.eventContext.sharedAssets.mouseProperty=null,this.eventContext.sharedAssets.raycastProperty=null;let{page:e,domElement:i}=this.eventContext;i.style.cursor="",Object.values(this.handlers).forEach(a=>a.disconnect()),(s=this.controlsManager.gameControl)==null||s.disposeActions(),this.controlsManager.disconnectEvents(),e.traverseEntity(a=>{a.removeEventListener("requestRender",this.requestRender),a.destroyedInAction=!1}),i.removeEventListener("touchmove",this.onTouchMovePreventScroll),i.removeEventListener("wheel",this.onMouseWheelPreventScroll),this.animationControls.onExitPlayMode()}get isPaused(){return this.isEnabled}pause(){this.deactivate()}resume(){this.activate()}reset(){this.deactivate(),this.activate(),this.controlsManager.page.updateMatrixWorld(!0),this.controlsManager.rebuildBVH()}updateUseWindowEvents(e){let i=this.isEnabled;i&&this.deactivate(),this.eventContext.useWindowEvents=e,i&&this.activate()}initializeActionsDependentStates(){let e=this.eventContext.sharedAssets;e.resetDynamicVariablePlayState();let i=s=>{if(s.data.type==="Conditional"&&(s.data.ifActions.forEach(i),s.data.elseActions.forEach(i)),s.data.type==="Conditional"||s.data.type==="SetVariable")for(let a of s.data.type==="Conditional"?s.data.condition:s.data.expression)"id"in a&&Array.isArray(a.id)&&(a.id[0]==="mouse"&&(this.needsMouse=!0),a.id[0]==="raycast"&&(this.needsRaycast=!0));s.data.type==="DynamicVariablePlay"&&s.data.variableId!==""&&(s.data.mode==="Play"||s.data.mode==="PlayPause"||s.data.mode==="Toggle")&&e.setDynamicVariablePlayState(s.data.variableId,"Stopped")};this.eventContext.page.traverseEntity(s=>{var a;if((a=s.data)!=null&&a.events.length){for(let o of s.data.events)if(!o.data.disabled)if(o.data.type==="VariableChange"&&(o.data.variableId==="mouseProperty"&&(this.needsMouse=!0),o.data.variableId==="raycastProperty"&&(this.needsRaycast=!0)),o.data.type==="Conditional")for(let c of["inActions","outActions"])o.data[c].forEach(i);else if(o.data.type==="DragDrop")for(let c of["drag","drop"])o.data.dragDropActions[c].forEach(i);else if(o.data.type==="GameControl")for(let c of["idle","move","jump","run"])o.data.gameActions[c].forEach(i);else if(o.data.type==="Resize")for(let c of o.data.breakpoints)c.data.actions.forEach(i);else o.data.type==="LookAt"||o.data.actions.forEach(i)}})}},Qb=class{constructor(e,i,s,a,o){this._aspect=1,this.enableResponsive=!1,this._renderer=e,this._camera=i,this._frameSize=new z$1().copy(s),this._editorSize=new z$1().copy(a),this._aspect=i.aspect,this._fov=o??i.fov}set frameSize(e){this._frameSize.copy(e)}updateRenderer(){!this._renderer||this._renderer.setSize(this._frameSize.x,this._frameSize.y)}updateViewport(){if(!this._renderer||!this._camera||this._camera.cameraType!=="PerspectiveCamera")return;let e=this._frameSize.x,i=this._frameSize.y,s=this._editorSize.y;this._aspect=e/i,i<=s&&(this._camera.zoom*=s/i),this._renderer.setViewport(0,0,e,i)}updateCamera(e=!0){if(this._camera)if(this._camera.cameraType==="PerspectiveCamera"){let i=this._frameSize.y,s=this._editorSize.y,a=this._fov;if(e&&i>s){let o=VJ(i,1080,2160,1,15)/100;a*=i/s,a*=1-o}this._camera.aspect=this._aspect,this._camera.fov=a,this._camera.updateProjectionMatrix()}else this._camera.setViewplaneSize(this._frameSize.x,this._frameSize.y,this.enableResponsive)}setCamera(e){this._camera=e,this._aspect=e.aspect,this._fov=e.fov}revert(){let e=window.innerWidth,i=window.innerHeight;this._renderer&&(this._renderer.setViewport(0,0,e,i),this._renderer.setSize(e,i)),this._camera&&(this._camera.aspect=e/i,this._camera.fov=this._fov,this._camera.setViewplaneSize(e,i,this.enableResponsive),this._camera.updateProjectionMatrix())}};function VJ(e,i,s,a,o){return(e-i)/(s-i)*(o-a)+a}var Kb=class{get sharedAssets(){return this.shared}constructor(e,i={}){this.shared=new eu(e.shared,i),this.scene=new $l(e.scene,this.sharedAssets),this.shared.setEntityOpContext({scene:this.scene,shared:this.shared})}reset(e,i){this.scene.clearScene(),this.sharedAssets.reset(e.shared),this.scene.resetAfterClear(e.scene,this.sharedAssets)}resetPersonalCameraFromDocumentData(){for(let e of this.scene.children)e instanceof mr&&!e.uiScene&&e.personalCamera.updateState(e.data.camera,{scene:this.scene,shared:this.shared})}dispose(){this.scene.dispose(),this.shared.dispose()}gc(){this.shared.geometryCache.startGc(),this.shared.geometryCache2.startGc(),this.scene.traverseEntity(e=>{e instanceof ur&&e.markGeometryAsReachable(this.shared)}),this.shared.geometryCache.endGc(),this.shared.geometryCache2.endGc()}},Zb=class{constructor({x:e=10,y:i=10}){this._startTime=0;let s=document.getElementById("spe-perfs");s?this.element=s:(this.element=document.createElement("div"),document.body.appendChild(this.element),this.element.style.position="absolute",this.element.style.zIndex="10000",this.element.style.fontFamily="monospace",this.element.style.background="black",this.element.style.color="white",this.element.style.padding="10px",this.element.style.opacity="0.5",this.element.style.fontSize="11px",this.element.setAttribute("id","spe-perfs")),this.element.style.left=`${e}px`,this.element.style.top=`${i}px`}dispose(){var e;(e=this.element.parentElement)==null||e.removeChild(this.element)}start(){this._startTime=performance.now()}end(){let e=performance.now()-this._startTime;this.element.innerHTML=e.toFixed(3)+" ms"}};function zJ(e){let i;if(e.index)for(let s=0;s<e.index.array.length;s+=3)i=e.index.array[s],e.index.array[s]=e.index.array[s+2],e.index.array[s+2]=i}function Lg(e){return e instanceof ao?"SubdivObject":e.geometry.type==="NonParametricGeometry"?"NonParametric":"Mesh"}function UJ(e,i){let s={};return e.traverseEntity(a=>{var b;if(!a.visible||!(a instanceof pr)||a.type!=="Mesh"||Array.isArray(a.material)||a.states&&Object.keys(a.states).length)return;let o=a.parent;for(;o;){if(o instanceof pr&&a.states&&Object.keys(a.states).length)return;o=o.parent}let c=a.material.uuid,d=i.shared.materials[c];if(d){if(!oi.isMergable(d))return}else{let j=(b=i.scene.objects.get(a.uuid))==null?void 0:b.data;if(j&&"material"in j&&typeof j.material!="string"){if(!oi.isMergable(j.material))return;c=oi.getHash(j.material)}}s[c]||(s[c]={});let g=s[c][Lg(a)];if(g){if(g.push(a),a.cloner)for(let j of a.cloner.children)g.push(j)}else if(s[c][Lg(a)]=[a],a.cloner)for(let j of a.cloner.children)s[c][Lg(a)].push(j)}),s}function GJ(e){let i=0;return Object.values(e).forEach(s=>{Object.values(s).forEach(a=>{let o=a.length;o>i&&(i=o)})}),i}function qN(e,i){let s=UJ(i,e),a=GJ(s),o=new Array(a),c=0,d=new Array(a),g=0,b=new Array(a),j=0,_e=new Array(a),$=0;for(let[rt,st]of Object.entries(s))for(let ut of Object.values(st)){if(g=0,j=0,ut.forEach(wt=>{wt instanceof pr&&(d[g++]=wt.geometry.clone(),b[j++]=wt)}),j<2)continue;for(let wt=0;wt<j;wt++)b[wt].updateWorldMatrix(!0,!1),d[wt].applyMatrix4(b[wt].matrixWorld),b[wt].matrixWorld.determinant()<0&&zJ(d[wt]);let gt=Js(d.slice(0,g),!1);if(gt){let wt;switch(rt){case"SubdivObject":{console.warn("Turning subdiv object into mesh"),wt=new sr(gt,b[0].material);break}default:{wt=new sr(gt,b[0].material);break}}wt.castShadow=b[0].castShadow,wt.receiveShadow=b[0].receiveShadow,i.add(wt);let yt=At=>{$=0;for(let Ct of At)Ct.children&&yt(Ct.children),Ct instanceof pr&&(Array.isArray(Ct.material)||s[Ct.material.uuid]&&s[Ct.material.uuid][Lg(Ct)]&&s[Ct.material.uuid][Lg(Ct)].length>1||(_e[$++]=Ct));for(let Ct=0;Ct<$;Ct++)i.attach(_e[Ct])};for(let At=0;At<j;At++){let Ct=b[At];yt(Ct.children),o[c++]=Ct}}}for(let rt=0;rt<c;rt++)o[rt].removeFromParent()}var KN=pi(XN(),1),HJ=new z$1;function WJ(e){let i="The Spline Runtime only accepts .splinecode files that are generated from Spline export panel.";e.endsWith(".spline")?console.warn(i+" The .spline files are only meant to be used by the Editor."):e.endsWith(".splinecode")||console.warn(i)}var QN=class{constructor(e,{renderOnDemand:i,renderMode:s="auto"}={}){this._viewportMode=1,this._viewportWidth=window.innerWidth,this._viewportHeight=window.innerHeight,this._proxyObjectCache=new Map,this._variablesCache=new Map,this._isPaused=!1,this._renderRequested=!1,this._skipRender=!1,this.time=performance.now(),this.dt=0,this.currentTAAFrame=0,this.disposed=!1,this._requestRenderAutoMode=()=>{this._skipRender=!1},this.requestRender=()=>{this._renderRequested=!0},this.render=a=>{var o,c,d,g,b,j,_e,$,rt,st,ut,gt,wt;if(this.time=a,this._lastTime&&(this.dt=this.time-this._lastTime),this._lastTime=this.time,(o=this._perfs)==null||o.start(),!this._renderer){(c=this._perfs)==null||c.end();return}if(!this._isPaused&&(this.renderMode==="manual"&&!this._renderRequested||this.renderMode==="auto"&&this._skipRender)){(d=this._perfs)==null||d.end();return}if(this._renderRequested=!1,this._skipRender=!0,this._controls&&(this._skipRender=this._controls.update(this.dt)),this._eventManager&&((g=this._eventManager.handlers)!=null&&g.Start.hasVideoAction||(b=this._eventManager.handlers)!=null&&b.Basic.hasVideoAction||(j=this._eventManager.handlers)!=null&&j.Conditional.hasVideoAction)&&(this._skipRender=!1),(_e=this._animationControls)==null||_e.update(this.dt),this._skipRender?(this.currentTAAFrame++,this.currentTAAFrame<32?this._skipRender=!1:this.currentTAAFrame=0):this.currentTAAFrame=0,($=this._scene)==null||$.traverseVisibleEntity(yt=>{yt.type==="ParticleSystem"&&(yt.update(this.dt),this._skipRender=!1)}),this._scene&&this._scene.activeCamera!==this._camera&&(this._camera=this._scene.activeCamera),(rt=this._eventManager)!=null&&rt.isEnabled&&(((st=this._eventManager.handlers)==null?void 0:st.Follow).onAnimationFrameDamping(),((ut=this._eventManager.handlers)==null?void 0:ut.LookAt).onAnimationFrameDamping(),((gt=this._eventManager.handlers)==null?void 0:gt.DragDrop).onAnimationFrameDamping()),this._scene&&this._camera){if(this._scene.pathConstraints.applyConstraints(this._scene),this._renderer.sceneTransitionTimeRemaining>0){this._renderer.sceneTransitionTimeRemaining-=this.dt;let yt=1-this._renderer.sceneTransitionTimeRemaining/this._renderer.sceneTransitionDuration;this._renderer.pipeline.sceneTransitionPass.uniforms.mixRatio.value=yt,this._skipRender=!1}else this._renderer.pipeline.sceneTransitionFromTexture=null;this._renderer.renderSplineScene(this._scene,this._camera)}this.canvas.dispatchEvent(this._renderedEvent),(wt=this._perfs)==null||wt.end()},this._resize=()=>{var a,o,c,d,g,b,j,_e,$,rt;if(this._renderer){if(this._viewportMode===1&&this._frameView&&(this._frameView.frameSize=HJ.set(this._viewportWidth,this._viewportHeight)),this._renderer.setSize(this._viewportWidth,this._viewportHeight,!1),this._camera=(a=this._scene)==null?void 0:a.activeCamera,(j=this._scene)==null||j.updateViewPlaneSize(((c=(o=this._frameView)==null?void 0:o.frameSize)==null?void 0:c.x)??this._viewportWidth,((g=(d=this._frameView)==null?void 0:d.frameSize)==null?void 0:g.y)??this._viewportHeight,((b=this._frameView)==null?void 0:b.enableResponsive)??!1),this._camera){let st=Object.values(((_e=this._data)==null?void 0:_e.frames)??{})[0].preset??"fullscreen";($=this._frameView)==null||$.setCamera(this._camera),(rt=this._frameView)==null||rt.updateCamera(st!=="fullscreen"),this._camera.cameraType==="PerspectiveCamera"&&(this._camera.aspect=this._viewportWidth/this._viewportHeight),this._camera.updateProjectionMatrix()}this.eventManager&&(this.eventManager.eventContext.domRect=this.canvas.getBoundingClientRect()),this._requestRenderAutoMode()}},this._debouncedResize=Lc(this._resize,10),this._onScroll=a=>{this.eventManager&&(this.eventManager.eventContext.domRect=this.canvas.getBoundingClientRect())},this.canvas=e,this.renderMode=i?"auto":s,this._renderedEvent=new CustomEvent("rendered",{bubbles:!0}),Object.defineProperty(this._renderedEvent,"target",{writable:!1,value:this}),window.location.search.includes("perfs")&&(this._perfs=new Zb({x:10,y:10})),j2(e)}async load(e,i,s){WJ(e),this.disposed=!1;let a=await(await fetch(e,s)).arrayBuffer();await this.start(a,{variables:i})}async start(e,{interactive:i=!0,variables:s}={}){var g,b,j,_e;if(this.disposed)return;let a=await WN(e);this._data=a,a.version&&(0,KN.default)(a.version,"1.0.26")>0&&console.warn("Your .splinecode file is more recent than the library. Please upgrade @splinetool/runtime to the latest version."),await Promise.all([I_(a)&&UI(),DR(a)&&LI(),Nl.physicsEnabled(a.scene.objects)&&K2(),__(a)&&_R(),H_(a)&&j3(),JE(a)&&Y2()].filter(Boolean)),(g=this._eventManager)==null||g.deactivate(),(b=this._controls)==null||b.deactivate(),(j=this._scene)==null||j.dispose();let o=new Kb(a);if(o.resetPersonalCameraFromDocumentData(),this._scene=o.scene,this._sharedAssetsManager=o.sharedAssets,this._camera=this._scene.activeCamera,window.location.search.includes("merge-geometries")){let $=performance.now();qN(a,o.scene);let rt=performance.now();console.log("Merged geometries in ",rt-$," ms")}I_(a)&&this._scene.traverse($=>{Rn($)&&$.recomputeBoolean()}),this._sharedAssetsManager.setRequestRender(()=>{var $;this._requestRenderAutoMode(),($=this._scene)==null||$.traverse(rt=>{rt instanceof Ji&&rt.pendingMediaLoad&&rt.update()})}),(_e=this._scene)==null||_e.traverse($=>{$.type==="ParticleSystem"&&($.wakeUp(),$.data.autoPlay?$.start():$.stop())});let c=Object.keys(a.shared.fonts).map($=>this._sharedAssetsManager.getFont($).loadingPromise);if(Promise.all(c).then(()=>{o.scene.markNeedsUpdateRendererDirty(),this._requestRenderAutoMode()}),__(a)&&GN(a)&&await Promise.all(c),H_(a)){let $=[];this._scene.traverseEntity(rt=>{rt instanceof _r$1&&$.push(rt)}),await Promise.all($.map(rt=>rt.uiCanvas.promise))}this._scene.rewriteEventsBeforeGoToPlayMode(),Yf(this._scene.activePage,this._sharedAssetsManager),this._renderer||(this._renderer=new kx({canvas:this.canvas,antialias:!1,alpha:!0,stencil:!1,depth:!1,powerPreference:"high-performance"}),this._renderer.hdTransmission=a.scene.publish.hdTransmission===!0,this._renderer.setPixelRatio(window.devicePixelRatio),this._renderer.pipeline.enableUIOverlay(),this._renderer.pipeline.addEventListener("smaaloaded",this._requestRenderAutoMode)),this._scene.initializeSplatViewer(this._renderer),a.scene.blueNoiseTextureData!==void 0&&this._renderer.pipeline.updateBlueNoiseTexture(a.scene.blueNoiseTextureData);let d=Object.values(a.frames)[0];if(this._frameView?this._frameView.setCamera(this._camera):(d.preset==="fullscreen"?(this._viewportMode=1,this.canvas.style.display="block",this.canvas.parentElement&&(this._viewportWidth=this.canvas.parentElement.clientWidth||300,this.canvas.style.width="100%"),this.canvas.parentElement&&(this._viewportHeight=this.canvas.parentElement.clientHeight||150,this.canvas.style.height="100%")):(this._viewportMode=2,this._viewportWidth=d.size[0],this._viewportHeight=d.size[1],this.canvas.style.width=`${this._viewportWidth}px`,this.canvas.style.height=`${this._viewportHeight}px`),this._renderer.setSize(this._viewportWidth,this._viewportHeight,!1),this._frameView=new Qb(this._renderer,this._camera,new z$1(this._viewportWidth,this._viewportHeight),new z$1(window.innerWidth,window.innerHeight)),this._frameView.enableResponsive=(d.allowResponsive??!1)&&d.preset==="fullscreen"),i){let $=new Tb(this._renderer,this.data.scene.publish,this._scene,()=>this._scene.activeCamera,this._sharedAssetsManager,this._requestRenderAutoMode,!0,d);this._scene.updateMatrixWorld(!0),this._controls=new Hb($),this._animationControls=new Wb(this._scene,this._requestRenderAutoMode),this._eventManager=new Xb(a.scene.publish,this._controls,this._animationControls,$,a.shared.variables),this._eventManager.activate(),this._controls.activate(this._eventManager)}this._resize(),s!==void 0&&this.setVariables(s),this.dt===0&&(this.render(performance.now()),setTimeout(()=>{var $;($=this._renderer)==null||$.setAnimationLoop(this.render)},0)),this._resizeObserverTimeout=setTimeout(()=>{!this._resizeObserver&&this.canvas.parentElement&&(this._resizeObserver=new ResizeObserver(()=>{this._viewportWidth=this.canvas.clientWidth,this._viewportHeight=this.canvas.clientHeight,this._debouncedResize()}),this._resizeObserver.observe(this.canvas.parentElement))},300),document.addEventListener("scroll",this._onScroll)}setVariables(e){if(this._data!==void 0){let i=Object.entries(e);for(let[s,a]of i)this.setVariable(s,a)}}setVariable(e,i){var a;let s=this._getVariableByName(e);if(s&&!("dynamicVariableType"in s.data)){let o=i;typeof s.data.value=="number"?o=typeof i=="number"?i:typeof i=="boolean"?i===!0?1:0:parseFloat(i):typeof s.data.value=="boolean"?o=typeof i=="number"?!!i:typeof i=="boolean"?i:i.toLocaleLowerCase()==="false"?!1:!!i:typeof s.data.value!="string"&&s.data.value.textValue!==void 0&&(o=i.toString());let c=typeof o=="string"?{textValue:o}:o;(a=this._sharedAssetsManager)==null||a.updateVariable(s.id,c),this.requestRender(),this._requestRenderAutoMode()}else s===void 0?console.warn(`No variable named ${e} was found in your Spline file. Make sure to create it from Spline editor.`):"dynamicVariableType"in s.data&&console.warn(`Dynamic variables like ${e} cannot be updated from code.`)}getVariables(){let e={};return this._data&&this._data.shared.variables.forEach(i=>{e[i.data.name]===void 0&&(e[i.data.name]=this._getVariableValue(this._sharedAssetsManager.getVariable(i.id)))}),e}getVariable(e){let i=this._getVariableByName(e);if(i){let s=this._sharedAssetsManager.getVariable(i.id);return this._getVariableValue(s)}}_getVariableValue(e){return typeof e!="string"&&Yi.isTextValue(e)?Yi.getDisplayedValue(e):e}_getVariableByName(e){if(this._data){if(this._variablesCache.has(e))return this._variablesCache.get(e);let i=this._data.shared.variables.find(s=>s.data.name===e);return i&&this._variablesCache.set(e,i),i}}findObjectById(e){var s;let i=(s=this._scene)==null?void 0:s.getObjectByProperty("uuid",e);return this._createProxyObject(i)}findObjectByName(e){var s;let i=(s=this._scene)==null?void 0:s.getObjectByName(e);return this._createProxyObject(i)}getAllObjects(){var i;let e=[];return(i=this._scene)==null||i.traverseEntity(s=>{if(s.uuid!==As&&!this._scene.isInvisibleObjects(s)&&!(s instanceof mr)){let a=this._createProxyObject(s);a&&e.push(a)}}),e}getSplineEvents(){var e,i;return((i=(e=this._eventManager)==null?void 0:e.handlers)==null?void 0:i.Spline).splineEvents}emitEvent(e,i){var s;(s=this.findObjectById(i)||this.findObjectByName(i))==null||s.emitEvent(e)}emitEventReverse(e,i){var s;(s=this.findObjectById(i)||this.findObjectByName(i))==null||s.emitEventReverse(e)}addEventListener(e,i){this.canvas.addEventListener(e,i)}removeEventListener(e,i){this.canvas.removeEventListener(e,i)}setZoom(e){var i,s;((i=this._controls)==null?void 0:i.orbitControls)instanceof ip$2&&((s=this._controls)==null||s.orbitControls.zoomOut(e))}get eventManager(){return this._eventManager}get controls(){return this._controls}setSize(e,i){this._viewportWidth=e,this._viewportHeight=i,this._viewportMode=2,this._resize()}setBackgroundColor(e){var d;let{r:i,g:s,b:a,a:o}={r:0,g:0,b:0,a:1},c=new xr$1(i,s,a,o);try{c.setStyle(e)}catch{console.error("This is not a valid css color",e)}(d=this._scene)==null||d.activePage.setBackgroundColor(c),this._requestRenderAutoMode()}dispose(){var e,i,s,a,o,c,d;this.disposed=!0,(e=this._eventManager)==null||e.deactivate(),(i=this._scene)==null||i.dispose(),(s=this._sharedAssetsManager)==null||s.dispose(),this._proxyObjectCache.forEach(g=>{jw.unsubscribe(g)}),this._variablesCache.clear(),(a=this._renderer)==null||a.setAnimationLoop(null),(o=this._renderer)==null||o.dispose(),this._renderer=void 0,(c=this._sharedAssetsManager)==null||c.dispose(),this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=void 0),this._resizeObserverTimeout!==void 0&&clearTimeout(this._resizeObserverTimeout),this.canvas.style.width="",this.canvas.style.height="",this.canvas.removeAttribute("width"),this.canvas.removeAttribute("height"),this._frameView&&(this._frameView=void 0),(d=this._controls)==null||d.deactivate(),H2(this.canvas),document.removeEventListener("scroll",this._onScroll)}get isStopped(){return this._isPaused}stop(){var e,i,s;this._isPaused||((e=this._renderer)==null||e.setAnimationLoop(null),this._isPaused=!0,(i=this._eventManager)==null||i.pause(),(s=this._controls)!=null&&s.orbitControls&&(this._controls.orbitControls.enabled=!1))}play(){var e,i,s;!this._isPaused||(this._isPaused=!1,(e=this._eventManager)==null||e.resume(),(i=this._controls)!=null&&i.orbitControls&&(this._controls.orbitControls.enabled=!0),(s=this._renderer)==null||s.setAnimationLoop(this.render))}setGlobalEvents(e){var i;(i=this._eventManager)==null||i.updateUseWindowEvents(e)}get data(){return this._data}_createProxyObject(e){var o;if(e==null)return;if(this._proxyObjectCache.has(e.uuid))return this._proxyObjectCache.get(e.uuid);let i;e.traverseAncestors(c=>{c instanceof mr&&(i=c.name)});let s={name:e.name,uuid:e.uuid,visible:e.visible,intensity:e.intensity,position:e.position,rotation:e.rotation,scale:e.scale,type:e.data.type,page:i,parentUuid:e.parent instanceof mr||e instanceof $l||(o=e.parent)==null?void 0:o.uuid,emitEvent(c){e.dispatchEvent({type:"userEvent",eventName:c})},emitEventReverse(c){e.dispatchEvent({type:"userEvent",eventName:c,reverse:!0})}},a=jw(s,(c,d)=>{var g;typeof e[c]!="object"&&((g=Object.getOwnPropertyDescriptor(e,c))!=null&&g.writable)&&(e[c]=d),this._requestRenderAutoMode(),e.updateMatrix()});return this._proxyObjectCache.set(e.uuid,a),a}setUIWasmUrl(e){tx.skiaWasmUrl=e}},Z=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fe={},yr={get exports(){return fe},set exports(e){fe=e}},z={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var De;function hr(){if(De)return z;De=1;var e=React$1,i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function d(g,b,j){var _e,$={},rt=null,st=null;j!==void 0&&(rt=""+j),b.key!==void 0&&(rt=""+b.key),b.ref!==void 0&&(st=b.ref);for(_e in b)a.call(b,_e)&&!c.hasOwnProperty(_e)&&($[_e]=b[_e]);if(g&&g.defaultProps)for(_e in b=g.defaultProps,b)$[_e]===void 0&&($[_e]=b[_e]);return{$$typeof:i,type:g,key:rt,ref:st,props:$,_owner:o.current}}return z.Fragment=s,z.jsx=d,z.jsxs=d,z}(function(e){e.exports=hr()})(yr);const ce=fe.jsx;var Rr="Expected a function",$e=NaN,_r="[object Symbol]",Tr=/^\s+|\s+$/g,Sr=/^[-+]0x[0-9a-f]+$/i,Or=/^0b[01]+$/i,wr=/^0o[0-7]+$/i,jr=parseInt,Cr=typeof Z=="object"&&Z&&Z.Object===Object&&Z,Pr=typeof self=="object"&&self&&self.Object===Object&&self,xr=Cr||Pr||Function("return this")(),kr=Object.prototype,Ar=kr.toString,Fr=Math.max,Ir=Math.min,ue=function(){return xr.Date.now()};function Dr(e,i,s){var a,o,c,d,g,b,j=0,_e=!1,$=!1,rt=!0;if(typeof e!="function")throw new TypeError(Rr);i=Le(i)||0,le(s)&&(_e=!!s.leading,$="maxWait"in s,c=$?Fr(Le(s.maxWait)||0,i):c,rt="trailing"in s?!!s.trailing:rt);function st(Pt){var It=a,Lt=o;return a=o=void 0,j=Pt,d=e.apply(Lt,It),d}function ut(Pt){return j=Pt,g=setTimeout(yt,i),_e?st(Pt):d}function gt(Pt){var It=Pt-b,Lt=Pt-j,Nt=i-It;return $?Ir(Nt,c-Lt):Nt}function wt(Pt){var It=Pt-b,Lt=Pt-j;return b===void 0||It>=i||It<0||$&&Lt>=c}function yt(){var Pt=ue();if(wt(Pt))return At(Pt);g=setTimeout(yt,gt(Pt))}function At(Pt){return g=void 0,rt&&a?st(Pt):(a=o=void 0,d)}function Ct(){g!==void 0&&clearTimeout(g),j=0,a=b=o=g=void 0}function Tt(){return g===void 0?d:At(ue())}function kt(){var Pt=ue(),It=wt(Pt);if(a=arguments,o=this,b=Pt,It){if(g===void 0)return ut(b);if($)return g=setTimeout(yt,i),st(b)}return g===void 0&&(g=setTimeout(yt,i)),d}return kt.cancel=Ct,kt.flush=Tt,kt}function le(e){var i=typeof e;return!!e&&(i=="object"||i=="function")}function Wr(e){return!!e&&typeof e=="object"}function $r(e){return typeof e=="symbol"||Wr(e)&&Ar.call(e)==_r}function Le(e){if(typeof e=="number")return e;if($r(e))return $e;if(le(e)){var i=typeof e.valueOf=="function"?e.valueOf():e;e=le(i)?i+"":i}if(typeof e!="string")return e===0?e:+e;e=e.replace(Tr,"");var s=Or.test(e);return s||wr.test(e)?jr(e.slice(2),s?2:8):Sr.test(e)?$e:+e}var Lr=Dr;function Yr(e){return i=>{e.forEach(s=>{typeof s=="function"?s(i):s!=null&&(s.current=i)})}}const Nr=[],Mr={width:"100%",height:"100%"},Ur=reactExports.forwardRef(function({className:e,children:i,debounceTime:s=300,ignoreDimensions:a=Nr,parentSizeStyles:o,enableDebounceLeadingCall:c=!0,resizeObserverPolyfill:d,...g},b){const j=reactExports.useRef(null),_e=reactExports.useRef(0),[$,rt]=reactExports.useState({width:0,height:0,top:0,left:0}),st=reactExports.useMemo(()=>{const ut=Array.isArray(a)?a:[a];return Lr(gt=>{rt(wt=>Object.keys(wt).filter(yt=>wt[yt]!==gt[yt]).every(yt=>ut.includes(yt))?wt:gt)},s,{leading:c})},[s,c,a]);return reactExports.useEffect(()=>{const ut=d||window.ResizeObserver,gt=new ut(wt=>{wt.forEach(yt=>{const{left:At,top:Ct,width:Tt,height:kt}=(yt==null?void 0:yt.contentRect)??{};_e.current=window.requestAnimationFrame(()=>{st({width:Tt,height:kt,top:Ct,left:At})})})});return j.current&&gt.observe(j.current),()=>{window.cancelAnimationFrame(_e.current),gt.disconnect(),st.cancel()}},[st,d]),ce("div",{style:{...Mr,...o},ref:Yr([b,j]),className:e,...g,children:i({...$,ref:j.current,resize:st})})}),zr=reactExports.forwardRef(({scene:e,style:i,onMouseDown:s,onMouseUp:a,onMouseHover:o,onKeyDown:c,onKeyUp:d,onStart:g,onLookAt:b,onFollow:j,onWheel:_e,onLoad:$,renderOnDemand:rt=!0,...st},ut)=>{const gt=reactExports.useRef(null),[wt,yt]=reactExports.useState(!0);return reactExports.useEffect(()=>{yt(!0);let At;const Ct=[{name:"mouseDown",cb:s},{name:"mouseUp",cb:a},{name:"mouseHover",cb:o},{name:"keyDown",cb:c},{name:"keyUp",cb:d},{name:"start",cb:g},{name:"lookAt",cb:b},{name:"follow",cb:j},{name:"scroll",cb:_e}];if(gt.current){At=new QN(gt.current,{renderOnDemand:rt});async function Tt(){await At.load(e);for(let kt of Ct)kt.cb&&At.addEventListener(kt.name,kt.cb);yt(!1),$==null||$(At)}Tt()}return()=>{for(let Tt of Ct)Tt.cb&&At.removeEventListener(Tt.name,Tt.cb);At.dispose()}},[e]),ce(Ur,{ref:ut,parentSizeStyles:i,debounceTime:50,...st,children:()=>ce("canvas",{ref:gt,style:{display:wt?"none":"block"}})})});var ValidCSSEffects;(function(e){e.speed="speed",e.translateX="translateX",e.translateY="translateY",e.rotate="rotate",e.rotateX="rotateX",e.rotateY="rotateY",e.rotateZ="rotateZ",e.scale="scale",e.scaleX="scaleX",e.scaleY="scaleY",e.scaleZ="scaleZ",e.opacity="opacity"})(ValidCSSEffects||(ValidCSSEffects={}));var Units;(function(e){e.px="px",e["%"]="%",e.vh="vh",e.vw="vw"})(Units||(Units={}));var RotationUnits;(function(e){e.deg="deg",e.turn="turn",e.rad="rad"})(RotationUnits||(RotationUnits={}));var ScaleUnits;(function(e){e[""]=""})(ScaleUnits||(ScaleUnits={}));var ScrollAxis;(function(e){e.vertical="vertical",e.horizontal="horizontal"})(ScrollAxis||(ScrollAxis={}));var EasingPreset;(function(e){e.ease="ease",e.easeIn="easeIn",e.easeOut="easeOut",e.easeInOut="easeInOut",e.easeInQuad="easeInQuad",e.easeInCubic="easeInCubic",e.easeInQuart="easeInQuart",e.easeInQuint="easeInQuint",e.easeInSine="easeInSine",e.easeInExpo="easeInExpo",e.easeInCirc="easeInCirc",e.easeOutQuad="easeOutQuad",e.easeOutCubic="easeOutCubic",e.easeOutQuart="easeOutQuart",e.easeOutQuint="easeOutQuint",e.easeOutSine="easeOutSine",e.easeOutExpo="easeOutExpo",e.easeOutCirc="easeOutCirc",e.easeInOutQuad="easeInOutQuad",e.easeInOutCubic="easeInOutCubic",e.easeInOutQuart="easeInOutQuart",e.easeInOutQuint="easeInOutQuint",e.easeInOutSine="easeInOutSine",e.easeInOutExpo="easeInOutExpo",e.easeInOutCirc="easeInOutCirc",e.easeInBack="easeInBack",e.easeOutBack="easeOutBack",e.easeInOutBack="easeInOutBack"})(EasingPreset||(EasingPreset={}));ScaleUnits[""],Units.px,Units["%"],Units.vh,Units.vw,RotationUnits.deg,RotationUnits.turn,RotationUnits.rad;const Grid$1=()=>jsxRuntimeExports.jsx("div",{className:"home_div_section1_grid_bg",children:jsxRuntimeExports.jsxs("svg",{width:"102%",height:"102%",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsxs("defs",{children:[jsxRuntimeExports.jsx("pattern",{id:"smallGrid",width:"120",height:"120",patternUnits:"userSpaceOnUse",children:jsxRuntimeExports.jsx("path",{d:"M 120 0 L 0 0 0 120",fill:"none",stroke:"currentColor","stroke-width":"1"})}),jsxRuntimeExports.jsx("pattern",{id:"grid",width:"240",height:"240",patternUnits:"userSpaceOnUse",children:jsxRuntimeExports.jsx("rect",{width:"240",height:"240",fill:"url(#smallGrid)"})})]}),jsxRuntimeExports.jsx("rect",{width:"100%",height:"100%",fill:"url(#grid)"})]})}),Icon=()=>jsxRuntimeExports.jsxs("svg",{"data-v-25ecef37":"",width:"330",height:"337",viewBox:"0 0 330 337",fill:"none",xmlns:"http://www.w3.org/2000/svg",cssid:"home_dev_sp","data-v-706ceafa":"",children:[jsxRuntimeExports.jsx("path",{d:"M311.458 127.516C289.848 46.8654 206.95 -0.996002 126.299 20.6142C45.6491 42.2243 -2.21227 125.123 19.3979 205.773C41.0081 286.423 123.906 334.285 204.557 312.674C285.207 291.064 333.068 208.166 311.458 127.516Z",fill:"url(#paint0_radial-771657)"})," ",jsxRuntimeExports.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M162.421 331.431C162.439 332.464 163.282 333.297 164.32 333.297C165.266 333.297 166.051 332.604 166.194 331.698L220.107 324.843C220.467 325.907 221.473 326.673 222.659 326.673C224.146 326.673 225.351 325.467 225.351 323.98C225.351 323.611 225.277 323.26 225.143 322.94L260.784 298.742C261.069 298.96 261.425 299.09 261.811 299.09C262.745 299.09 263.502 298.333 263.502 297.4C263.502 297.142 263.444 296.897 263.341 296.679L293.173 268.237C293.609 268.542 294.14 268.721 294.713 268.721C296.2 268.721 297.405 267.515 297.405 266.028C297.405 265.188 297.02 264.437 296.417 263.944L322.444 214.559C322.566 214.584 322.693 214.597 322.823 214.597C323.871 214.597 324.721 213.747 324.721 212.699C324.721 211.922 324.254 211.254 323.586 210.96L326.958 184.988C328.356 184.89 329.459 183.725 329.459 182.302C329.459 180.949 328.46 179.828 327.159 179.638L323.593 113.672C324.623 113.293 325.357 112.304 325.357 111.144C325.357 109.657 324.152 108.451 322.665 108.451C322.247 108.451 321.852 108.546 321.499 108.716L265.044 34.1911C265.463 33.7165 265.717 33.0933 265.717 32.4108C265.717 30.9237 264.511 29.7182 263.024 29.7182C261.993 29.7182 261.096 30.2986 260.644 31.1506L196.83 12.3176L195.048 11.1831C195.101 11.0078 195.13 10.8217 195.13 10.6289C195.13 9.58051 194.28 8.73062 193.232 8.73062C192.337 8.73062 191.587 9.34952 191.386 10.1826L189.767 10.233L168.6 3.98621C168.606 3.90903 168.61 3.83096 168.61 3.75208C168.61 2.26508 167.404 1.05957 165.917 1.05957C164.466 1.05957 163.283 2.20749 163.227 3.64474L107.947 12.554C107.641 11.9155 106.989 11.4745 106.234 11.4745C105.186 11.4745 104.336 12.3244 104.336 13.3727C104.336 13.5704 104.366 13.761 104.422 13.9402L70.0904 36.9113C69.6038 36.4287 68.934 36.1307 68.1946 36.1307C66.7076 36.1307 65.5021 37.3362 65.5021 38.8232C65.5021 39.3016 65.6269 39.7509 65.8457 40.1403L35.4022 66.3569C35.1055 66.1648 34.7517 66.0532 34.3718 66.0532C33.3234 66.0532 32.4735 66.9031 32.4735 67.9515C32.4735 68.494 32.7011 68.9834 33.0661 69.3294L7.07018 120.191C6.83901 120.126 6.59528 120.091 6.34348 120.091C4.85645 120.091 3.65098 121.297 3.65098 122.784C3.65098 123.981 4.43211 124.995 5.51245 125.346L2.13409 154.724C1.23993 154.878 0.55957 155.657 0.55957 156.595C0.55957 157.496 1.18663 158.25 2.02792 158.445L5.69534 222.369C4.53938 222.671 3.68646 223.723 3.68646 224.974C3.68646 226.461 4.89194 227.666 6.37897 227.666C6.79992 227.666 7.1983 227.569 7.55317 227.397L64.9861 302.885C64.5693 303.36 64.3165 303.981 64.3165 304.662C64.3165 306.149 65.5219 307.355 67.009 307.355C68.059 307.355 68.9687 306.754 69.4126 305.877L133.342 323.454C133.338 323.515 133.336 323.577 133.336 323.639C133.336 325.126 134.541 326.331 136.028 326.331C137.079 326.331 137.989 325.729 138.433 324.852L162.421 331.431ZM164.668 329.532C164.555 329.511 164.439 329.5 164.32 329.5C163.866 329.5 163.449 329.66 163.123 329.925L154.872 324.247L167.332 324.296L164.668 329.532ZM165.621 330.017L168.528 324.301L182.886 324.357L165.863 330.293C165.791 330.193 165.71 330.101 165.621 330.017ZM138.624 322.923C138.642 322.986 138.657 323.05 138.67 323.115L151.415 323.165L145.787 319.292L138.624 322.923ZM135.992 320.947C136.004 320.946 136.016 320.946 136.028 320.946C136.885 320.946 137.648 321.346 138.141 321.97L144.785 318.602L140.773 315.841C141.586 315.976 142.401 316.104 143.217 316.226L145.87 318.052L213.631 283.704C213.541 283.412 213.493 283.102 213.493 282.78C213.493 282.663 213.5 282.547 213.512 282.432L123.981 256.504C123.643 257.199 123.055 257.751 122.335 258.042L135.992 320.947ZM134.067 321.794C134.314 321.531 134.613 321.319 134.948 321.172L121.29 258.268C121.245 258.27 121.201 258.271 121.156 258.271C119.952 258.271 118.906 257.594 118.379 256.6L61.2192 275.313C61.231 275.416 61.2372 275.52 61.2372 275.626C61.2372 275.955 61.1781 276.27 61.0701 276.562L134.067 321.794ZM60.5067 277.47L132.599 322.141L69.6953 304.846C69.6994 304.786 69.7015 304.724 69.7015 304.662C69.7015 304.506 69.6882 304.353 69.6627 304.204L88.5959 296.849C88.2067 296.619 87.8185 296.388 87.4314 296.155L69.2754 303.208C68.7965 302.463 67.9604 301.97 67.009 301.97C66.9332 301.97 66.858 301.973 66.7838 301.979L59.797 278.01C60.063 277.87 60.3026 277.687 60.5067 277.47ZM58.7709 278.309L64.4705 297.862L51.3963 269.429L56.2792 274.17C56.009 274.59 55.8522 275.09 55.8522 275.626C55.8522 277.113 57.0576 278.318 58.5447 278.318C58.6209 278.318 58.6963 278.315 58.7709 278.309ZM57.0239 273.404L50.1588 266.738L47.8743 261.769C46.9108 260.58 45.9642 259.374 45.0351 258.153L48.0336 264.674L8.64546 226.428C8.67736 226.378 8.70769 226.327 8.73635 226.275L29.4084 232.699C29.1968 232.263 28.9872 231.824 28.7796 231.385L9.05684 225.256C9.06652 225.163 9.07147 225.069 9.07147 224.974C9.07147 224.463 8.92911 223.985 8.68188 223.578L37.377 197.598C37.9106 198.016 38.583 198.265 39.3136 198.265C39.3805 198.265 39.4469 198.263 39.5127 198.259L57.4122 273.182C57.2763 273.246 57.1465 273.32 57.0239 273.404ZM58.4519 272.935L40.5524 198.012C40.904 197.861 41.2225 197.647 41.494 197.385L118.343 253.73C118.133 254.151 118.014 254.627 118.014 255.13C118.014 255.284 118.025 255.436 118.047 255.584L60.8869 274.297C60.4239 273.483 59.5484 272.933 58.5447 272.933C58.5136 272.933 58.4827 272.934 58.4519 272.935ZM118.976 252.868L42.1265 196.524C42.3366 196.102 42.4549 195.627 42.4549 195.124C42.4549 194.819 42.4114 194.524 42.3303 194.245L117.773 157.415C118.327 158.218 119.201 158.785 120.21 158.931L120.608 252.036C119.98 252.147 119.416 252.444 118.976 252.868ZM121.676 252.032L121.279 158.927C122.078 158.804 122.79 158.418 123.324 157.86L192.1 206.337C191.857 206.821 191.72 207.367 191.72 207.946C191.72 208.464 191.829 208.956 192.027 209.4L123.48 253.017C123.016 252.507 122.386 252.15 121.676 252.032ZM124.054 253.918L192.601 210.302C193.259 211.058 194.229 211.536 195.31 211.536C195.465 211.536 195.618 211.526 195.768 211.507L215.272 279.949C214.636 280.256 214.119 280.771 213.809 281.406L124.278 255.477C124.29 255.363 124.297 255.247 124.297 255.13C124.297 254.7 124.211 254.291 124.054 253.918ZM216.3 279.657L196.796 211.215C197.999 210.667 198.846 209.475 198.897 208.08L273.445 199.707C273.593 200.217 273.867 200.674 274.231 201.042L217.996 279.949C217.584 279.75 217.122 279.639 216.634 279.639C216.522 279.639 216.41 279.645 216.3 279.657ZM218.866 280.57L275.101 201.663C275.513 201.861 275.975 201.973 276.463 201.973C276.559 201.973 276.654 201.968 276.748 201.96L291.167 255.798L282.252 268.156L219.55 281.608C219.392 281.217 219.158 280.865 218.866 280.57ZM219.773 282.653L281.319 269.449L269.859 285.333L263.183 290.702L264.393 280.979C263.993 281.325 263.592 281.67 263.188 282.013L261.986 291.665L257.121 295.578L248.249 293.172C247.848 293.434 247.446 293.694 247.043 293.953L256.091 296.406L250.768 300.687L221.297 310.964L217.612 285.767C218.868 285.356 219.776 284.174 219.776 282.78C219.776 282.738 219.775 282.696 219.773 282.653ZM216.554 285.921L220.269 311.322L185.917 323.3L169.071 323.234L171.875 317.722C171.467 317.74 171.059 317.756 170.651 317.771L167.874 323.23L153.311 323.172L146.873 318.742L214.115 284.657C214.673 285.405 215.555 285.896 216.554 285.921ZM279.571 198.372C279.593 198.522 279.604 198.675 279.604 198.831C279.604 200.096 278.857 201.185 277.78 201.684L291.974 254.68L305.502 235.929L312.95 216.628L307.458 218.482C307.615 218.055 307.769 217.627 307.922 217.198L313.45 215.331L318.001 203.538L313.963 194.993C314.077 194.395 314.188 193.796 314.296 193.196L318.532 202.161L322.307 192.38L322.315 184.328L279.571 198.372ZM277.566 195.889C278.285 196.159 278.88 196.685 279.237 197.357L322.316 183.203L322.326 172.715L295.353 105.822C295.132 105.888 294.901 105.929 294.662 105.945L277.566 195.889ZM275.054 196.023C275.478 195.81 275.956 195.69 276.463 195.69C276.481 195.69 276.498 195.69 276.516 195.69L293.596 105.831C292.689 105.572 291.95 104.916 291.579 104.063L221.404 119.856C221.407 119.908 221.408 119.962 221.408 120.015C221.408 120.859 221.075 121.624 220.534 122.189L275.054 196.023ZM273.327 198.645C273.372 197.875 273.694 197.18 274.195 196.658L219.675 122.824C219.251 123.036 218.773 123.156 218.267 123.156C218.177 123.156 218.088 123.152 218 123.145L196.723 204.645C197.726 205.075 198.493 205.948 198.779 207.018L273.327 198.645ZM192.716 205.464C193.369 204.781 194.29 204.356 195.31 204.356C195.438 204.356 195.564 204.363 195.689 204.376L216.966 122.875C216.365 122.601 215.866 122.144 215.54 121.575L124.275 154.81C124.304 154.995 124.32 155.185 124.32 155.378C124.32 155.957 124.183 156.503 123.94 156.987L192.716 205.464ZM122.285 152.142C123.007 152.49 123.596 153.072 123.95 153.791L215.175 120.571C215.142 120.391 215.125 120.205 215.125 120.015C215.125 119.494 215.252 119.004 215.476 118.571L140.679 61.8758C140.118 62.4003 139.364 62.7214 138.535 62.7214C138.526 62.7214 138.516 62.7213 138.507 62.7213L122.285 152.142ZM118.328 152.71C118.965 152.137 119.806 151.788 120.73 151.788C120.908 151.788 121.084 151.801 121.256 151.827L137.456 62.5309C136.925 62.3366 136.461 62.0031 136.108 61.5746L62.1426 103.665C62.2631 103.999 62.3288 104.358 62.3288 104.733C62.3288 105.299 62.1793 105.83 61.9177 106.288L118.328 152.71ZM117.304 156.455C117.197 156.115 117.14 155.753 117.14 155.378C117.14 154.704 117.326 154.073 117.649 153.534L61.2382 107.113C60.6879 107.588 59.9712 107.875 59.1875 107.875C59.1393 107.875 59.0913 107.873 59.0436 107.871L40.4998 192.215C41.0479 192.438 41.5186 192.812 41.8607 193.285L117.304 156.455ZM38.5155 192.085C38.7703 192.018 39.0378 191.983 39.3136 191.983C39.3613 191.983 39.4087 191.984 39.4558 191.986L57.9997 107.642C57.3293 107.368 56.7748 106.869 56.43 106.239L16.2071 119.979L11.5497 132.916L38.5155 192.085ZM36.6596 196.805C36.351 196.319 36.1723 195.743 36.1723 195.124C36.1723 194.046 36.7156 193.095 37.5432 192.529L11.0314 134.355L6.88724 145.866L6.89013 154.305L14.9996 151.166C14.9586 151.563 14.9193 151.96 14.8815 152.358L6.89052 155.451L6.89411 165.915L15.5975 186.938C15.7984 188.407 16.0215 189.878 16.2669 191.348L6.89507 168.711L6.91345 222.334C7.29728 222.411 7.65155 222.57 7.95739 222.792L36.6596 196.805ZM56.0849 105.227L16.6707 118.692L23.0253 101.041L37.1844 81.8201L38.0191 85.2626C38.2835 84.8484 38.55 84.4355 38.8184 84.0238L38.0118 80.697L49.0515 65.7105L53.6363 64.8413C54.0376 64.3998 54.4416 63.9606 54.8482 63.5237L49.9829 64.4461L62.8296 47.0069L66.9662 43.8651L59.0762 101.594C57.3929 101.653 56.0463 103.036 56.0463 104.733C56.0463 104.901 56.0595 105.066 56.0849 105.227ZM60.1353 101.738L68.1699 42.9509L71.5632 40.3737L135.415 59.2158C135.401 59.3354 135.394 59.4569 135.394 59.5801C135.394 59.9543 135.459 60.3131 135.579 60.6458L61.613 102.737C61.2317 102.274 60.7205 101.922 60.1353 101.738ZM135.717 58.1907L72.6198 39.5712L77.0353 36.2177L107.184 25.3982L107.386 27.0311C107.727 26.8898 108.069 26.7498 108.411 26.6109L108.215 25.0281L142.343 12.7805L161.183 12.1933L139.418 56.5645C139.138 56.4828 138.842 56.4388 138.535 56.4388C137.299 56.4388 136.23 57.1527 135.717 58.1907ZM140.377 57.0353L162.392 12.1555L176.296 11.7222L182.132 15.8371L181.319 16.2609C181.879 16.3203 182.44 16.3828 182.999 16.4485L221.745 43.7658C221.553 44.1701 221.444 44.6221 221.442 45.0991L141.5 58.5388C141.286 57.9301 140.89 57.4071 140.377 57.0353ZM141.676 59.5928L221.618 46.1532C221.961 47.1325 222.776 47.8901 223.79 48.1538L217.992 116.886C217.272 116.948 216.621 117.254 216.122 117.72L141.325 61.0244C141.548 60.5955 141.674 60.1088 141.676 59.5928ZM219.057 116.974L224.855 48.2432C225.532 48.1851 226.148 47.9121 226.634 47.4926L291.814 101.116C291.501 101.604 291.319 102.186 291.319 102.81C291.319 102.882 291.321 102.953 291.326 103.024L221.17 118.813C220.796 117.912 220.016 117.223 219.057 116.974ZM292.537 100.326L227.314 46.6675C227.575 46.2093 227.724 45.6788 227.724 45.1136C227.724 44.9557 227.713 44.8005 227.69 44.6489L260.686 33.7462C261.15 34.5569 262.023 35.1032 263.024 35.1032C263.073 35.1032 263.122 35.102 263.17 35.0994L268.63 56.1418C269.121 56.599 269.608 57.0596 270.093 57.5236L265.125 38.3777L292.901 100.082C292.774 100.155 292.652 100.237 292.537 100.326ZM293.908 99.7168L265.451 36.4977L317.208 104.822L282.599 71.0532C284.228 73.0471 285.808 75.0869 287.339 77.1712L320.507 109.534C320.426 109.642 320.353 109.757 320.289 109.877L297.587 103.108C297.597 103.01 297.601 102.91 297.601 102.81C297.601 101.075 296.195 99.6685 294.46 99.6685C294.272 99.6685 294.087 99.6851 293.908 99.7168ZM297.307 104.14L319.983 110.901C319.976 110.981 319.972 111.062 319.972 111.144C319.972 111.688 320.134 112.195 320.412 112.618L309.817 121.835C309.933 122.207 310.047 122.58 310.159 122.954L321.165 113.38C321.52 113.619 321.936 113.775 322.384 113.822L322.329 169.865L296.313 105.346C296.738 105.036 297.082 104.621 297.307 104.14ZM260.351 32.7313L227.355 43.6342C226.826 42.6451 225.783 41.9723 224.583 41.9723C223.715 41.9723 222.93 42.3241 222.361 42.8928L184.182 15.9746L191.873 11.9691L191.893 11.975C192.205 12.2848 192.623 12.4872 193.089 12.5219L194.327 18.2175C194.709 18.292 195.09 18.368 195.47 18.4456L194.212 12.6594L196.383 13.3L210.6 22.3507C211.984 22.7855 213.362 23.24 214.732 23.7139L200.093 14.3949L260.342 32.1758C260.335 32.2532 260.332 32.3316 260.332 32.4108C260.332 32.5192 260.338 32.6262 260.351 32.7313ZM4.34944 156.434C4.35389 156.487 4.35616 156.541 4.35616 156.595C4.35616 157.193 4.07992 157.726 3.64815 158.074L5.82449 163.331L5.82193 155.864L4.34944 156.434ZM3.57664 155.061C3.72253 155.168 3.85264 155.295 3.9628 155.438L5.82153 154.719L5.81951 148.832L3.57664 155.061ZM6.95329 125.407C6.92906 125.413 6.9047 125.418 6.88023 125.423L6.88616 142.714L10.3968 132.963L6.95329 125.407ZM9.0138 122.437C9.02844 122.55 9.03599 122.666 9.03599 122.784C9.03599 123.68 8.59844 124.473 7.92538 124.963L10.9151 131.523L14.9119 120.422L9.0138 122.437ZM8.3396 120.977C8.46396 121.114 8.57435 121.264 8.66854 121.425L15.3755 119.134L20.8036 104.057L8.3396 120.977ZM34.2813 69.8477C34.2729 69.8473 34.2646 69.8468 34.2562 69.8463L24.2942 97.5165L36.8557 80.4644L34.2813 69.8477ZM36.2613 68.1353C36.2012 68.7606 35.8379 69.2971 35.3201 69.5963L37.683 79.3412L47.5086 66.003L36.2613 68.1353ZM67.3078 41.3662C67.2229 41.3366 67.1399 41.3029 67.0591 41.2652L65.0738 43.9604L67.1709 42.3676L67.3078 41.3662ZM70.8592 38.4341C70.8776 38.5612 70.8871 38.6911 70.8871 38.8232C70.8871 38.9019 70.8837 38.9799 70.8771 39.057L71.3472 39.1957L73.6854 37.4199L70.8592 38.4341ZM105.927 15.2463C105.622 15.1967 105.342 15.0749 105.105 14.899L79.8695 34.0652L107.049 24.311L105.927 15.2463ZM108.072 13.8488C107.925 14.4192 107.519 14.8856 106.987 15.1158L108.08 23.941L138.878 12.8885L108.072 13.8488ZM164.276 5.88699C164.013 5.68387 163.787 5.43292 163.614 5.14706L145.606 11.6095L161.716 11.1074L164.276 5.88699ZM167.767 5.70889C167.284 6.16495 166.634 6.44458 165.917 6.44458C165.682 6.44458 165.454 6.41437 165.236 6.35764L162.925 11.0697L174.843 10.6982L167.767 5.70889ZM324.092 182.619C324.08 182.515 324.074 182.409 324.074 182.302C324.074 181.363 324.556 180.535 325.285 180.054L323.392 175.359L323.385 182.851L324.092 182.619ZM325.319 184.573C324.951 184.338 324.643 184.015 324.426 183.634L323.384 183.977L323.378 189.603L325.319 184.573ZM320.927 212.807C320.925 212.771 320.924 212.735 320.924 212.699C320.924 212.101 321.2 211.568 321.632 211.22L318.632 204.872L314.767 214.887L320.927 212.807ZM321.375 213.927C321.344 213.891 321.314 213.853 321.286 213.814L314.267 216.184L307.964 232.516L321.375 213.927ZM294.3 263.367C294.435 263.346 294.573 263.336 294.713 263.336C294.784 263.336 294.854 263.338 294.923 263.344L303.986 239.856L292.331 256.012L294.3 263.367ZM292.021 266.06C292.02 266.049 292.02 266.039 292.02 266.028C292.02 265.062 292.529 264.215 293.294 263.74L291.524 257.131L283.811 267.821L292.021 266.06ZM292.322 267.267C292.294 267.214 292.268 267.16 292.244 267.105L282.878 269.114L272.999 282.808L292.322 267.267ZM260.401 296.467C260.645 296.099 261.03 295.832 261.478 295.742L261.796 293.189L258.396 295.924L260.401 296.467ZM222.807 321.292C223.404 321.324 223.949 321.551 224.38 321.91L248.283 302.686L221.454 312.041L222.807 321.292ZM220.021 323.435C220.212 322.51 220.876 321.758 221.749 321.445L220.426 312.399L189.127 323.313L220.021 323.435ZM233.284 316.121L258.13 299.252L251.294 301.636L233.284 316.121ZM169.305 330.225L186.096 324.37L214.474 324.482L169.305 330.225ZM161.413 330.046L152.977 324.24L140.057 324.189L161.413 330.046ZM322.304 195.356L319.163 203.495L322.289 210.11L322.304 195.356ZM323.395 172.509L323.437 130.571L326.061 179.12L323.395 172.509ZM323.363 204.372L323.375 192.579L325.665 186.644L323.363 204.372ZM306.449 236.443L318.523 219.707L297.554 259.495L306.449 236.443ZM285.166 274.394L270.642 286.075L265.635 293.014L285.166 274.394ZM262.598 295.397L267.502 288.6L262.993 292.227L262.598 295.397ZM260.004 297.467L257.367 296.752L253.778 299.638L260.004 297.467ZM183.199 15.2816L190.396 11.5332L189.628 11.3066L178.072 11.6668L183.199 15.2816ZM176.62 10.6428L186.352 10.3395L168.873 5.18115L176.62 10.6428ZM48.44 64.7386L59.8163 49.2954L36.5028 67.0018L48.44 64.7386ZM5.83919 206.217L5.82544 166.127L3.17139 159.716L5.83919 206.217ZM5.81843 145.68L3.51388 152.081L5.81377 132.08L5.81843 145.68ZM31.0191 75.6826L22.0725 100.533L9.80921 117.18L31.0191 75.6826ZM62.0605 46.2489L47.9109 56.9954L64.9587 42.3145L62.0605 46.2489ZM91.6957 23.7411L76.5196 35.2673L72.0974 36.8543L91.6957 23.7411ZM142.141 11.7176L114.51 12.5789L160.31 5.19745L142.141 11.7176ZM11.1195 230.32L64.4964 300.477L49.2711 267.365L11.1195 230.32Z",fill:"url(#paint1_radial-513745)"})," ",jsxRuntimeExports.jsxs("defs",{children:[jsxRuntimeExports.jsxs("radialGradient",{id:"paint0_radial-771657",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(131.5 27) rotate(76.5554) scale(305.369)",children:[jsxRuntimeExports.jsx("stop",{offset:"0.260417","stop-color":"#171717"})," ",jsxRuntimeExports.jsx("stop",{offset:"0.727754","stop-color":"#0F0F0F"})," ",jsxRuntimeExports.jsx("stop",{offset:"1","stop-color":"#04875E"})]})," ",jsxRuntimeExports.jsxs("radialGradient",{id:"paint1_radial-513745",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(223 326.5) rotate(-108.504) scale(182.753 305.986)",children:[jsxRuntimeExports.jsx("stop",{"stop-color":"#03D19F"})," ",jsxRuntimeExports.jsx("stop",{offset:"0.520536","stop-color":"#696969"})," ",jsxRuntimeExports.jsx("stop",{offset:"1","stop-color":"#171717"})]})]})]});var Send={},interopRequireDefault={exports:{}};(function(e){function i(s){return s&&s.__esModule?s:{default:s}}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports})(interopRequireDefault);var interopRequireDefaultExports=interopRequireDefault.exports,createSvgIcon$1={};function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},_extends$3.apply(this,arguments)}function isPlainObject$1(e){if(typeof e!="object"||e===null)return!1;const i=Object.getPrototypeOf(e);return(i===null||i===Object.prototype||Object.getPrototypeOf(i)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function deepClone(e){if(!isPlainObject$1(e))return e;const i={};return Object.keys(e).forEach(s=>{i[s]=deepClone(e[s])}),i}function deepmerge(e,i,s={clone:!0}){const a=s.clone?_extends$3({},e):e;return isPlainObject$1(e)&&isPlainObject$1(i)&&Object.keys(i).forEach(o=>{o!=="__proto__"&&(isPlainObject$1(i[o])&&o in e&&isPlainObject$1(e[o])?a[o]=deepmerge(e[o],i[o],s):s.clone?a[o]=isPlainObject$1(i[o])?deepClone(i[o]):i[o]:a[o]=i[o])}),a}function formatMuiErrorMessage(e){let i="https://mui.com/production-error/?code="+e;for(let s=1;s<arguments.length;s+=1)i+="&args[]="+encodeURIComponent(arguments[s]);return"Minified MUI error #"+e+"; visit "+i+" for the full message."}function capitalize(e){if(typeof e!="string")throw new Error(formatMuiErrorMessage(7));return e.charAt(0).toUpperCase()+e.slice(1)}function createChainedFunction(...e){return e.reduce((i,s)=>s==null?i:function(...o){i.apply(this,o),s.apply(this,o)},()=>{})}function debounce(e,i=166){let s;function a(...o){const c=()=>{e.apply(this,o)};clearTimeout(s),s=setTimeout(c,i)}return a.clear=()=>{clearTimeout(s)},a}function deprecatedPropType(e,i){return()=>null}function isMuiElement(e,i){var s,a;return reactExports.isValidElement(e)&&i.indexOf((s=e.type.muiName)!=null?s:(a=e.type)==null||(a=a._payload)==null||(a=a.value)==null?void 0:a.muiName)!==-1}function ownerDocument(e){return e&&e.ownerDocument||document}function ownerWindow(e){return ownerDocument(e).defaultView||window}function requirePropFactory(e,i){return()=>null}function setRef$1(e,i){typeof e=="function"?e(i):e&&(e.current=i)}const useEnhancedEffect=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,useEnhancedEffect$1=useEnhancedEffect;let globalId=0;function useGlobalId(e){const[i,s]=reactExports.useState(e),a=e||i;return reactExports.useEffect(()=>{i==null&&(globalId+=1,s(`mui-${globalId}`))},[i]),a}const maybeReactUseId=React$2.useId;function useId$1(e){if(maybeReactUseId!==void 0){const i=maybeReactUseId();return e??i}return useGlobalId(e)}function unsupportedProp(e,i,s,a,o){return null}function useControlled({controlled:e,default:i,name:s,state:a="value"}){const{current:o}=reactExports.useRef(e!==void 0),[c,d]=reactExports.useState(i),g=o?e:c,b=reactExports.useCallback(j=>{o||d(j)},[]);return[g,b]}function useEventCallback(e){const i=reactExports.useRef(e);return useEnhancedEffect$1(()=>{i.current=e}),reactExports.useRef((...s)=>(0,i.current)(...s)).current}function useForkRef(...e){return reactExports.useMemo(()=>e.every(i=>i==null)?null:i=>{e.forEach(s=>{setRef$1(s,i)})},e)}let hadKeyboardEvent=!0,hadFocusVisibleRecently=!1,hadFocusVisibleRecentlyTimeout;const inputTypesWhitelist={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function focusTriggersKeyboardModality(e){const{type:i,tagName:s}=e;return!!(s==="INPUT"&&inputTypesWhitelist[i]&&!e.readOnly||s==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function handleKeyDown(e){e.metaKey||e.altKey||e.ctrlKey||(hadKeyboardEvent=!0)}function handlePointerDown(){hadKeyboardEvent=!1}function handleVisibilityChange(){this.visibilityState==="hidden"&&hadFocusVisibleRecently&&(hadKeyboardEvent=!0)}function prepare(e){e.addEventListener("keydown",handleKeyDown,!0),e.addEventListener("mousedown",handlePointerDown,!0),e.addEventListener("pointerdown",handlePointerDown,!0),e.addEventListener("touchstart",handlePointerDown,!0),e.addEventListener("visibilitychange",handleVisibilityChange,!0)}function isFocusVisible(e){const{target:i}=e;try{return i.matches(":focus-visible")}catch{}return hadKeyboardEvent||focusTriggersKeyboardModality(i)}function useIsFocusVisible(){const e=reactExports.useCallback(o=>{o!=null&&prepare(o.ownerDocument)},[]),i=reactExports.useRef(!1);function s(){return i.current?(hadFocusVisibleRecently=!0,window.clearTimeout(hadFocusVisibleRecentlyTimeout),hadFocusVisibleRecentlyTimeout=window.setTimeout(()=>{hadFocusVisibleRecently=!1},100),i.current=!1,!0):!1}function a(o){return isFocusVisible(o)?(i.current=!0,!0):!1}return{isFocusVisibleRef:i,onFocus:a,onBlur:s,ref:e}}function resolveProps(e,i){const s=_extends$3({},i);return Object.keys(e).forEach(a=>{if(a.toString().match(/^(components|slots)$/))s[a]=_extends$3({},e[a],s[a]);else if(a.toString().match(/^(componentsProps|slotProps)$/)){const o=e[a]||{},c=i[a];s[a]={},!c||!Object.keys(c)?s[a]=o:!o||!Object.keys(o)?s[a]=c:(s[a]=_extends$3({},c),Object.keys(o).forEach(d=>{s[a][d]=resolveProps(o[d],c[d])}))}else s[a]===void 0&&(s[a]=e[a])}),s}function composeClasses(e,i,s=void 0){const a={};return Object.keys(e).forEach(o=>{a[o]=e[o].reduce((c,d)=>{if(d){const g=i(d);g!==""&&c.push(g),s&&s[d]&&c.push(s[d])}return c},[]).join(" ")}),a}const defaultGenerator=e=>e,createClassNameGenerator=()=>{let e=defaultGenerator;return{configure(i){e=i},generate(i){return e(i)},reset(){e=defaultGenerator}}},ClassNameGenerator=createClassNameGenerator(),globalStateClasses={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function generateUtilityClass(e,i,s="Mui"){const a=globalStateClasses[i];return a?`${s}-${a}`:`${ClassNameGenerator.generate(e)}-${i}`}function generateUtilityClasses(e,i,s="Mui"){const a={};return i.forEach(o=>{a[o]=generateUtilityClass(e,o,s)}),a}function clamp$1(e,i=Number.MIN_SAFE_INTEGER,s=Number.MAX_SAFE_INTEGER){return Math.max(i,Math.min(e,s))}function _objectWithoutPropertiesLoose$2(e,i){if(e==null)return{};var s={},a=Object.keys(e),o,c;for(c=0;c<a.length;c++)o=a[c],!(i.indexOf(o)>=0)&&(s[o]=e[o]);return s}function r(e){var i,s,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(i=0;i<o;i++)e[i]&&(s=r(e[i]))&&(a&&(a+=" "),a+=s)}else for(s in e)e[s]&&(a&&(a+=" "),a+=s);return a}function clsx(){for(var e,i,s=0,a="",o=arguments.length;s<o;s++)(e=arguments[s])&&(i=r(e))&&(a&&(a+=" "),a+=i);return a}function memoize$1(e){var i=Object.create(null);return function(s){return i[s]===void 0&&(i[s]=e(s)),i[s]}}var reactPropsRegex=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,isPropValid=memoize$1(function(e){return reactPropsRegex.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91});function sheetForTag(e){if(e.sheet)return e.sheet;for(var i=0;i<document.styleSheets.length;i++)if(document.styleSheets[i].ownerNode===e)return document.styleSheets[i]}function createStyleElement(e){var i=document.createElement("style");return i.setAttribute("data-emotion",e.key),e.nonce!==void 0&&i.setAttribute("nonce",e.nonce),i.appendChild(document.createTextNode("")),i.setAttribute("data-s",""),i}var StyleSheet=function(){function e(s){var a=this;this._insertTag=function(o){var c;a.tags.length===0?a.insertionPoint?c=a.insertionPoint.nextSibling:a.prepend?c=a.container.firstChild:c=a.before:c=a.tags[a.tags.length-1].nextSibling,a.container.insertBefore(o,c),a.tags.push(o)},this.isSpeedy=s.speedy===void 0?!0:s.speedy,this.tags=[],this.ctr=0,this.nonce=s.nonce,this.key=s.key,this.container=s.container,this.prepend=s.prepend,this.insertionPoint=s.insertionPoint,this.before=null}var i=e.prototype;return i.hydrate=function(a){a.forEach(this._insertTag)},i.insert=function(a){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(createStyleElement(this));var o=this.tags[this.tags.length-1];if(this.isSpeedy){var c=sheetForTag(o);try{c.insertRule(a,c.cssRules.length)}catch{}}else o.appendChild(document.createTextNode(a));this.ctr++},i.flush=function(){this.tags.forEach(function(a){return a.parentNode&&a.parentNode.removeChild(a)}),this.tags=[],this.ctr=0},e}(),MS="-ms-",MOZ="-moz-",WEBKIT="-webkit-",COMMENT="comm",RULESET="rule",DECLARATION="decl",IMPORT="@import",KEYFRAMES="@keyframes",LAYER="@layer",abs=Math.abs,from=String.fromCharCode,assign=Object.assign;function hash(e,i){return charat(e,0)^45?(((i<<2^charat(e,0))<<2^charat(e,1))<<2^charat(e,2))<<2^charat(e,3):0}function trim$1(e){return e.trim()}function match(e,i){return(e=i.exec(e))?e[0]:e}function replace(e,i,s){return e.replace(i,s)}function indexof(e,i){return e.indexOf(i)}function charat(e,i){return e.charCodeAt(i)|0}function substr(e,i,s){return e.slice(i,s)}function strlen(e){return e.length}function sizeof(e){return e.length}function append(e,i){return i.push(e),e}function combine(e,i){return e.map(i).join("")}var line=1,column=1,length=0,position=0,character=0,characters="";function node(e,i,s,a,o,c,d){return{value:e,root:i,parent:s,type:a,props:o,children:c,line,column,length:d,return:""}}function copy(e,i){return assign(node("",null,null,"",null,null,0),e,{length:-e.length},i)}function char(){return character}function prev(){return character=position>0?charat(characters,--position):0,column--,character===10&&(column=1,line--),character}function next(){return character=position<length?charat(characters,position++):0,column++,character===10&&(column=1,line++),character}function peek(){return charat(characters,position)}function caret(){return position}function slice(e,i){return substr(characters,e,i)}function token(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc(e){return line=column=1,length=strlen(characters=e),position=0,[]}function dealloc(e){return characters="",e}function delimit(e){return trim$1(slice(position-1,delimiter(e===91?e+2:e===40?e+1:e)))}function whitespace(e){for(;(character=peek())&&character<33;)next();return token(e)>2||token(character)>3?"":" "}function escaping(e,i){for(;--i&&next()&&!(character<48||character>102||character>57&&character<65||character>70&&character<97););return slice(e,caret()+(i<6&&peek()==32&&next()==32))}function delimiter(e){for(;next();)switch(character){case e:return position;case 34:case 39:e!==34&&e!==39&&delimiter(character);break;case 40:e===41&&delimiter(e);break;case 92:next();break}return position}function commenter(e,i){for(;next()&&e+character!==57;)if(e+character===84&&peek()===47)break;return"/*"+slice(i,position-1)+"*"+from(e===47?e:next())}function identifier(e){for(;!token(peek());)next();return slice(e,position)}function compile(e){return dealloc(parse("",null,null,null,[""],e=alloc(e),0,[0],e))}function parse(e,i,s,a,o,c,d,g,b){for(var j=0,_e=0,$=d,rt=0,st=0,ut=0,gt=1,wt=1,yt=1,At=0,Ct="",Tt=o,kt=c,Pt=a,It=Ct;wt;)switch(ut=At,At=next()){case 40:if(ut!=108&&charat(It,$-1)==58){indexof(It+=replace(delimit(At),"&","&\f"),"&\f")!=-1&&(yt=-1);break}case 34:case 39:case 91:It+=delimit(At);break;case 9:case 10:case 13:case 32:It+=whitespace(ut);break;case 92:It+=escaping(caret()-1,7);continue;case 47:switch(peek()){case 42:case 47:append(comment(commenter(next(),caret()),i,s),b);break;default:It+="/"}break;case 123*gt:g[j++]=strlen(It)*yt;case 125*gt:case 59:case 0:switch(At){case 0:case 125:wt=0;case 59+_e:yt==-1&&(It=replace(It,/\f/g,"")),st>0&&strlen(It)-$&&append(st>32?declaration(It+";",a,s,$-1):declaration(replace(It," ","")+";",a,s,$-2),b);break;case 59:It+=";";default:if(append(Pt=ruleset(It,i,s,j,_e,o,g,Ct,Tt=[],kt=[],$),c),At===123)if(_e===0)parse(It,i,Pt,Pt,Tt,c,$,g,kt);else switch(rt===99&&charat(It,3)===110?100:rt){case 100:case 108:case 109:case 115:parse(e,Pt,Pt,a&&append(ruleset(e,Pt,Pt,0,0,o,g,Ct,o,Tt=[],$),kt),o,kt,$,g,a?Tt:kt);break;default:parse(It,Pt,Pt,Pt,[""],kt,0,g,kt)}}j=_e=st=0,gt=yt=1,Ct=It="",$=d;break;case 58:$=1+strlen(It),st=ut;default:if(gt<1){if(At==123)--gt;else if(At==125&&gt++==0&&prev()==125)continue}switch(It+=from(At),At*gt){case 38:yt=_e>0?1:(It+="\f",-1);break;case 44:g[j++]=(strlen(It)-1)*yt,yt=1;break;case 64:peek()===45&&(It+=delimit(next())),rt=peek(),_e=$=strlen(Ct=It+=identifier(caret())),At++;break;case 45:ut===45&&strlen(It)==2&&(gt=0)}}return c}function ruleset(e,i,s,a,o,c,d,g,b,j,_e){for(var $=o-1,rt=o===0?c:[""],st=sizeof(rt),ut=0,gt=0,wt=0;ut<a;++ut)for(var yt=0,At=substr(e,$+1,$=abs(gt=d[ut])),Ct=e;yt<st;++yt)(Ct=trim$1(gt>0?rt[yt]+" "+At:replace(At,/&\f/g,rt[yt])))&&(b[wt++]=Ct);return node(e,i,s,o===0?RULESET:g,b,j,_e)}function comment(e,i,s){return node(e,i,s,COMMENT,from(char()),substr(e,2,-2),0)}function declaration(e,i,s,a){return node(e,i,s,DECLARATION,substr(e,0,a),substr(e,a+1,-1),a)}function serialize(e,i){for(var s="",a=sizeof(e),o=0;o<a;o++)s+=i(e[o],o,e,i)||"";return s}function stringify(e,i,s,a){switch(e.type){case LAYER:if(e.children.length)break;case IMPORT:case DECLARATION:return e.return=e.return||e.value;case COMMENT:return"";case KEYFRAMES:return e.return=e.value+"{"+serialize(e.children,a)+"}";case RULESET:e.value=e.props.join(",")}return strlen(s=serialize(e.children,a))?e.return=e.value+"{"+s+"}":""}function middleware(e){var i=sizeof(e);return function(s,a,o,c){for(var d="",g=0;g<i;g++)d+=e[g](s,a,o,c)||"";return d}}function rulesheet(e){return function(i){i.root||(i=i.return)&&e(i)}}var identifierWithPointTracking=function(i,s,a){for(var o=0,c=0;o=c,c=peek(),o===38&&c===12&&(s[a]=1),!token(c);)next();return slice(i,position)},toRules=function(i,s){var a=-1,o=44;do switch(token(o)){case 0:o===38&&peek()===12&&(s[a]=1),i[a]+=identifierWithPointTracking(position-1,s,a);break;case 2:i[a]+=delimit(o);break;case 4:if(o===44){i[++a]=peek()===58?"&\f":"",s[a]=i[a].length;break}default:i[a]+=from(o)}while(o=next());return i},getRules=function(i,s){return dealloc(toRules(alloc(i),s))},fixedElements=new WeakMap,compat=function(i){if(!(i.type!=="rule"||!i.parent||i.length<1)){for(var s=i.value,a=i.parent,o=i.column===a.column&&i.line===a.line;a.type!=="rule";)if(a=a.parent,!a)return;if(!(i.props.length===1&&s.charCodeAt(0)!==58&&!fixedElements.get(a))&&!o){fixedElements.set(i,!0);for(var c=[],d=getRules(s,c),g=a.props,b=0,j=0;b<d.length;b++)for(var _e=0;_e<g.length;_e++,j++)i.props[j]=c[b]?d[b].replace(/&\f/g,g[_e]):g[_e]+" "+d[b]}}},removeLabel=function(i){if(i.type==="decl"){var s=i.value;s.charCodeAt(0)===108&&s.charCodeAt(2)===98&&(i.return="",i.value="")}};function prefix(e,i){switch(hash(e,i)){case 5103:return WEBKIT+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return WEBKIT+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return WEBKIT+e+MOZ+e+MS+e+e;case 6828:case 4268:return WEBKIT+e+MS+e+e;case 6165:return WEBKIT+e+MS+"flex-"+e+e;case 5187:return WEBKIT+e+replace(e,/(\w+).+(:[^]+)/,WEBKIT+"box-$1$2"+MS+"flex-$1$2")+e;case 5443:return WEBKIT+e+MS+"flex-item-"+replace(e,/flex-|-self/,"")+e;case 4675:return WEBKIT+e+MS+"flex-line-pack"+replace(e,/align-content|flex-|-self/,"")+e;case 5548:return WEBKIT+e+MS+replace(e,"shrink","negative")+e;case 5292:return WEBKIT+e+MS+replace(e,"basis","preferred-size")+e;case 6060:return WEBKIT+"box-"+replace(e,"-grow","")+WEBKIT+e+MS+replace(e,"grow","positive")+e;case 4554:return WEBKIT+replace(e,/([^-])(transform)/g,"$1"+WEBKIT+"$2")+e;case 6187:return replace(replace(replace(e,/(zoom-|grab)/,WEBKIT+"$1"),/(image-set)/,WEBKIT+"$1"),e,"")+e;case 5495:case 3959:return replace(e,/(image-set\([^]*)/,WEBKIT+"$1$`$1");case 4968:return replace(replace(e,/(.+:)(flex-)?(.*)/,WEBKIT+"box-pack:$3"+MS+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+WEBKIT+e+e;case 4095:case 3583:case 4068:case 2532:return replace(e,/(.+)-inline(.+)/,WEBKIT+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(strlen(e)-1-i>6)switch(charat(e,i+1)){case 109:if(charat(e,i+4)!==45)break;case 102:return replace(e,/(.+:)(.+)-([^]+)/,"$1"+WEBKIT+"$2-$3$1"+MOZ+(charat(e,i+3)==108?"$3":"$2-$3"))+e;case 115:return~indexof(e,"stretch")?prefix(replace(e,"stretch","fill-available"),i)+e:e}break;case 4949:if(charat(e,i+1)!==115)break;case 6444:switch(charat(e,strlen(e)-3-(~indexof(e,"!important")&&10))){case 107:return replace(e,":",":"+WEBKIT)+e;case 101:return replace(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+WEBKIT+(charat(e,14)===45?"inline-":"")+"box$3$1"+WEBKIT+"$2$3$1"+MS+"$2box$3")+e}break;case 5936:switch(charat(e,i+11)){case 114:return WEBKIT+e+MS+replace(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return WEBKIT+e+MS+replace(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return WEBKIT+e+MS+replace(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return WEBKIT+e+MS+e+e}return e}var prefixer=function(i,s,a,o){if(i.length>-1&&!i.return)switch(i.type){case DECLARATION:i.return=prefix(i.value,i.length);break;case KEYFRAMES:return serialize([copy(i,{value:replace(i.value,"@","@"+WEBKIT)})],o);case RULESET:if(i.length)return combine(i.props,function(c){switch(match(c,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return serialize([copy(i,{props:[replace(c,/:(read-\w+)/,":"+MOZ+"$1")]})],o);case"::placeholder":return serialize([copy(i,{props:[replace(c,/:(plac\w+)/,":"+WEBKIT+"input-$1")]}),copy(i,{props:[replace(c,/:(plac\w+)/,":"+MOZ+"$1")]}),copy(i,{props:[replace(c,/:(plac\w+)/,MS+"input-$1")]})],o)}return""})}},defaultStylisPlugins=[prefixer],createCache=function(i){var s=i.key;if(s==="css"){var a=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(a,function(gt){var wt=gt.getAttribute("data-emotion");wt.indexOf(" ")!==-1&&(document.head.appendChild(gt),gt.setAttribute("data-s",""))})}var o=i.stylisPlugins||defaultStylisPlugins,c={},d,g=[];d=i.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+s+' "]'),function(gt){for(var wt=gt.getAttribute("data-emotion").split(" "),yt=1;yt<wt.length;yt++)c[wt[yt]]=!0;g.push(gt)});var b,j=[compat,removeLabel];{var _e,$=[stringify,rulesheet(function(gt){_e.insert(gt)})],rt=middleware(j.concat(o,$)),st=function(wt){return serialize(compile(wt),rt)};b=function(wt,yt,At,Ct){_e=At,st(wt?wt+"{"+yt.styles+"}":yt.styles),Ct&&(ut.inserted[yt.name]=!0)}}var ut={key:s,sheet:new StyleSheet({key:s,container:d,nonce:i.nonce,speedy:i.speedy,prepend:i.prepend,insertionPoint:i.insertionPoint}),nonce:i.nonce,inserted:c,registered:{},insert:b};return ut.sheet.hydrate(g),ut},isBrowser=!0;function getRegisteredStyles(e,i,s){var a="";return s.split(" ").forEach(function(o){e[o]!==void 0?i.push(e[o]+";"):a+=o+" "}),a}var registerStyles=function(i,s,a){var o=i.key+"-"+s.name;(a===!1||isBrowser===!1)&&i.registered[o]===void 0&&(i.registered[o]=s.styles)},insertStyles=function(i,s,a){registerStyles(i,s,a);var o=i.key+"-"+s.name;if(i.inserted[s.name]===void 0){var c=s;do i.insert(s===c?"."+o:"",c,i.sheet,!0),c=c.next;while(c!==void 0)}};function murmur2(e){for(var i=0,s,a=0,o=e.length;o>=4;++a,o-=4)s=e.charCodeAt(a)&255|(e.charCodeAt(++a)&255)<<8|(e.charCodeAt(++a)&255)<<16|(e.charCodeAt(++a)&255)<<24,s=(s&65535)*1540483477+((s>>>16)*59797<<16),s^=s>>>24,i=(s&65535)*1540483477+((s>>>16)*59797<<16)^(i&65535)*1540483477+((i>>>16)*59797<<16);switch(o){case 3:i^=(e.charCodeAt(a+2)&255)<<16;case 2:i^=(e.charCodeAt(a+1)&255)<<8;case 1:i^=e.charCodeAt(a)&255,i=(i&65535)*1540483477+((i>>>16)*59797<<16)}return i^=i>>>13,i=(i&65535)*1540483477+((i>>>16)*59797<<16),((i^i>>>15)>>>0).toString(36)}var unitlessKeys={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},hyphenateRegex=/[A-Z]|^ms/g,animationRegex=/_EMO_([^_]+?)_([^]*?)_EMO_/g,isCustomProperty=function(i){return i.charCodeAt(1)===45},isProcessableValue=function(i){return i!=null&&typeof i!="boolean"},processStyleName=memoize$1(function(e){return isCustomProperty(e)?e:e.replace(hyphenateRegex,"-$&").toLowerCase()}),processStyleValue=function(i,s){switch(i){case"animation":case"animationName":if(typeof s=="string")return s.replace(animationRegex,function(a,o,c){return cursor={name:o,styles:c,next:cursor},o})}return unitlessKeys[i]!==1&&!isCustomProperty(i)&&typeof s=="number"&&s!==0?s+"px":s},noComponentSelectorMessage="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function handleInterpolation(e,i,s){if(s==null)return"";if(s.__emotion_styles!==void 0)return s;switch(typeof s){case"boolean":return"";case"object":{if(s.anim===1)return cursor={name:s.name,styles:s.styles,next:cursor},s.name;if(s.styles!==void 0){var a=s.next;if(a!==void 0)for(;a!==void 0;)cursor={name:a.name,styles:a.styles,next:cursor},a=a.next;var o=s.styles+";";return o}return createStringFromObject(e,i,s)}case"function":{if(e!==void 0){var c=cursor,d=s(e);return cursor=c,handleInterpolation(e,i,d)}break}}if(i==null)return s;var g=i[s];return g!==void 0?g:s}function createStringFromObject(e,i,s){var a="";if(Array.isArray(s))for(var o=0;o<s.length;o++)a+=handleInterpolation(e,i,s[o])+";";else for(var c in s){var d=s[c];if(typeof d!="object")i!=null&&i[d]!==void 0?a+=c+"{"+i[d]+"}":isProcessableValue(d)&&(a+=processStyleName(c)+":"+processStyleValue(c,d)+";");else if(Array.isArray(d)&&typeof d[0]=="string"&&(i==null||i[d[0]]===void 0))for(var g=0;g<d.length;g++)isProcessableValue(d[g])&&(a+=processStyleName(c)+":"+processStyleValue(c,d[g])+";");else{var b=handleInterpolation(e,i,d);switch(c){case"animation":case"animationName":{a+=processStyleName(c)+":"+b+";";break}default:a+=c+"{"+b+"}"}}}return a}var labelPattern=/label:\s*([^\s;\n{]+)\s*(;|$)/g,cursor,serializeStyles=function(i,s,a){if(i.length===1&&typeof i[0]=="object"&&i[0]!==null&&i[0].styles!==void 0)return i[0];var o=!0,c="";cursor=void 0;var d=i[0];d==null||d.raw===void 0?(o=!1,c+=handleInterpolation(a,s,d)):c+=d[0];for(var g=1;g<i.length;g++)c+=handleInterpolation(a,s,i[g]),o&&(c+=d[g]);labelPattern.lastIndex=0;for(var b="",j;(j=labelPattern.exec(c))!==null;)b+="-"+j[1];var _e=murmur2(c)+b;return{name:_e,styles:c,next:cursor}},syncFallback=function(i){return i()},useInsertionEffect=React$2.useInsertionEffect?React$2.useInsertionEffect:!1,useInsertionEffectAlwaysWithSyncFallback=useInsertionEffect||syncFallback,EmotionCacheContext=reactExports.createContext(typeof HTMLElement<"u"?createCache({key:"css"}):null);EmotionCacheContext.Provider;var withEmotionCache=function(i){return reactExports.forwardRef(function(s,a){var o=reactExports.useContext(EmotionCacheContext);return i(s,o,a)})},ThemeContext=reactExports.createContext({}),testOmitPropsOnStringTag=isPropValid,testOmitPropsOnComponent=function(i){return i!=="theme"},getDefaultShouldForwardProp=function(i){return typeof i=="string"&&i.charCodeAt(0)>96?testOmitPropsOnStringTag:testOmitPropsOnComponent},composeShouldForwardProps=function(i,s,a){var o;if(s){var c=s.shouldForwardProp;o=i.__emotion_forwardProp&&c?function(d){return i.__emotion_forwardProp(d)&&c(d)}:c}return typeof o!="function"&&a&&(o=i.__emotion_forwardProp),o},Insertion=function(i){var s=i.cache,a=i.serialized,o=i.isStringTag;return registerStyles(s,a,o),useInsertionEffectAlwaysWithSyncFallback(function(){return insertStyles(s,a,o)}),null},createStyled$1=function e(i,s){var a=i.__emotion_real===i,o=a&&i.__emotion_base||i,c,d;s!==void 0&&(c=s.label,d=s.target);var g=composeShouldForwardProps(i,s,a),b=g||getDefaultShouldForwardProp(o),j=!b("as");return function(){var _e=arguments,$=a&&i.__emotion_styles!==void 0?i.__emotion_styles.slice(0):[];if(c!==void 0&&$.push("label:"+c+";"),_e[0]==null||_e[0].raw===void 0)$.push.apply($,_e);else{$.push(_e[0][0]);for(var rt=_e.length,st=1;st<rt;st++)$.push(_e[st],_e[0][st])}var ut=withEmotionCache(function(gt,wt,yt){var At=j&&gt.as||o,Ct="",Tt=[],kt=gt;if(gt.theme==null){kt={};for(var Pt in gt)kt[Pt]=gt[Pt];kt.theme=reactExports.useContext(ThemeContext)}typeof gt.className=="string"?Ct=getRegisteredStyles(wt.registered,Tt,gt.className):gt.className!=null&&(Ct=gt.className+" ");var It=serializeStyles($.concat(Tt),wt.registered,kt);Ct+=wt.key+"-"+It.name,d!==void 0&&(Ct+=" "+d);var Lt=j&&g===void 0?getDefaultShouldForwardProp(At):b,Nt={};for(var Ht in gt)j&&Ht==="as"||Lt(Ht)&&(Nt[Ht]=gt[Ht]);return Nt.className=Ct,Nt.ref=yt,reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(Insertion,{cache:wt,serialized:It,isStringTag:typeof At=="string"}),reactExports.createElement(At,Nt))});return ut.displayName=c!==void 0?c:"Styled("+(typeof o=="string"?o:o.displayName||o.name||"Component")+")",ut.defaultProps=i.defaultProps,ut.__emotion_real=ut,ut.__emotion_base=o,ut.__emotion_styles=$,ut.__emotion_forwardProp=g,Object.defineProperty(ut,"toString",{value:function(){return"."+d}}),ut.withComponent=function(gt,wt){return e(gt,_extends$3({},s,wt,{shouldForwardProp:composeShouldForwardProps(ut,wt,!0)})).apply(void 0,$)},ut}},tags=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],newStyled=createStyled$1.bind();tags.forEach(function(e){newStyled[e]=newStyled(e)});function styled$1(e,i){return newStyled(e,i)}const internal_processStyles=(e,i)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=i(e.__emotion_styles))},_excluded$f=["values","unit","step"],sortBreakpointsValues=e=>{const i=Object.keys(e).map(s=>({key:s,val:e[s]}))||[];return i.sort((s,a)=>s.val-a.val),i.reduce((s,a)=>_extends$3({},s,{[a.key]:a.val}),{})};function createBreakpoints(e){const{values:i={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:s="px",step:a=5}=e,o=_objectWithoutPropertiesLoose$2(e,_excluded$f),c=sortBreakpointsValues(i),d=Object.keys(c);function g(rt){return`@media (min-width:${typeof i[rt]=="number"?i[rt]:rt}${s})`}function b(rt){return`@media (max-width:${(typeof i[rt]=="number"?i[rt]:rt)-a/100}${s})`}function j(rt,st){const ut=d.indexOf(st);return`@media (min-width:${typeof i[rt]=="number"?i[rt]:rt}${s}) and (max-width:${(ut!==-1&&typeof i[d[ut]]=="number"?i[d[ut]]:st)-a/100}${s})`}function _e(rt){return d.indexOf(rt)+1<d.length?j(rt,d[d.indexOf(rt)+1]):g(rt)}function $(rt){const st=d.indexOf(rt);return st===0?g(d[1]):st===d.length-1?b(d[st]):j(rt,d[d.indexOf(rt)+1]).replace("@media","@media not all and")}return _extends$3({keys:d,values:c,up:g,down:b,between:j,only:_e,not:$,unit:s},o)}const shape={borderRadius:4},shape$1=shape;function merge$1(e,i){return i?deepmerge(e,i,{clone:!1}):e}const values={xs:0,sm:600,md:900,lg:1200,xl:1536},defaultBreakpoints={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${values[e]}px)`};function handleBreakpoints(e,i,s){const a=e.theme||{};if(Array.isArray(i)){const c=a.breakpoints||defaultBreakpoints;return i.reduce((d,g,b)=>(d[c.up(c.keys[b])]=s(i[b]),d),{})}if(typeof i=="object"){const c=a.breakpoints||defaultBreakpoints;return Object.keys(i).reduce((d,g)=>{if(Object.keys(c.values||values).indexOf(g)!==-1){const b=c.up(g);d[b]=s(i[g],g)}else{const b=g;d[b]=i[b]}return d},{})}return s(i)}function createEmptyBreakpointObject(e={}){var i;return((i=e.keys)==null?void 0:i.reduce((a,o)=>{const c=e.up(o);return a[c]={},a},{}))||{}}function removeUnusedBreakpoints(e,i){return e.reduce((s,a)=>{const o=s[a];return(!o||Object.keys(o).length===0)&&delete s[a],s},i)}function getPath(e,i,s=!0){if(!i||typeof i!="string")return null;if(e&&e.vars&&s){const a=`vars.${i}`.split(".").reduce((o,c)=>o&&o[c]?o[c]:null,e);if(a!=null)return a}return i.split(".").reduce((a,o)=>a&&a[o]!=null?a[o]:null,e)}function getStyleValue(e,i,s,a=s){let o;return typeof e=="function"?o=e(s):Array.isArray(e)?o=e[s]||a:o=getPath(e,s)||a,i&&(o=i(o,a,e)),o}function style$1(e){const{prop:i,cssProperty:s=e.prop,themeKey:a,transform:o}=e,c=d=>{if(d[i]==null)return null;const g=d[i],b=d.theme,j=getPath(b,a)||{};return handleBreakpoints(d,g,$=>{let rt=getStyleValue(j,o,$);return $===rt&&typeof $=="string"&&(rt=getStyleValue(j,o,`${i}${$==="default"?"":capitalize($)}`,$)),s===!1?rt:{[s]:rt}})};return c.propTypes={},c.filterProps=[i],c}function memoize(e){const i={};return s=>(i[s]===void 0&&(i[s]=e(s)),i[s])}const properties={m:"margin",p:"padding"},directions={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},aliases={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},getCssProperties=memoize(e=>{if(e.length>2)if(aliases[e])e=aliases[e];else return[e];const[i,s]=e.split(""),a=properties[i],o=directions[s]||"";return Array.isArray(o)?o.map(c=>a+c):[a+o]}),marginKeys=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],paddingKeys=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...marginKeys,...paddingKeys];function createUnaryUnit(e,i,s,a){var o;const c=(o=getPath(e,i,!1))!=null?o:s;return typeof c=="number"?d=>typeof d=="string"?d:c*d:Array.isArray(c)?d=>typeof d=="string"?d:c[d]:typeof c=="function"?c:()=>{}}function createUnarySpacing(e){return createUnaryUnit(e,"spacing",8)}function getValue(e,i){if(typeof i=="string"||i==null)return i;const s=Math.abs(i),a=e(s);return i>=0?a:typeof a=="number"?-a:`-${a}`}function getStyleFromPropValue(e,i){return s=>e.reduce((a,o)=>(a[o]=getValue(i,s),a),{})}function resolveCssProperty(e,i,s,a){if(i.indexOf(s)===-1)return null;const o=getCssProperties(s),c=getStyleFromPropValue(o,a),d=e[s];return handleBreakpoints(e,d,c)}function style(e,i){const s=createUnarySpacing(e.theme);return Object.keys(e).map(a=>resolveCssProperty(e,i,a,s)).reduce(merge$1,{})}function margin(e){return style(e,marginKeys)}margin.propTypes={};margin.filterProps=marginKeys;function padding(e){return style(e,paddingKeys)}padding.propTypes={};padding.filterProps=paddingKeys;function createSpacing(e=8){if(e.mui)return e;const i=createUnarySpacing({spacing:e}),s=(...a)=>(a.length===0?[1]:a).map(c=>{const d=i(c);return typeof d=="number"?`${d}px`:d}).join(" ");return s.mui=!0,s}function compose(...e){const i=e.reduce((a,o)=>(o.filterProps.forEach(c=>{a[c]=o}),a),{}),s=a=>Object.keys(a).reduce((o,c)=>i[c]?merge$1(o,i[c](a)):o,{});return s.propTypes={},s.filterProps=e.reduce((a,o)=>a.concat(o.filterProps),[]),s}function borderTransform(e){return typeof e!="number"?e:`${e}px solid`}function createBorderStyle(e,i){return style$1({prop:e,themeKey:"borders",transform:i})}const border=createBorderStyle("border",borderTransform),borderTop=createBorderStyle("borderTop",borderTransform),borderRight=createBorderStyle("borderRight",borderTransform),borderBottom=createBorderStyle("borderBottom",borderTransform),borderLeft=createBorderStyle("borderLeft",borderTransform),borderColor=createBorderStyle("borderColor"),borderTopColor=createBorderStyle("borderTopColor"),borderRightColor=createBorderStyle("borderRightColor"),borderBottomColor=createBorderStyle("borderBottomColor"),borderLeftColor=createBorderStyle("borderLeftColor"),outline=createBorderStyle("outline",borderTransform),outlineColor=createBorderStyle("outlineColor"),borderRadius=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const i=createUnaryUnit(e.theme,"shape.borderRadius",4),s=a=>({borderRadius:getValue(i,a)});return handleBreakpoints(e,e.borderRadius,s)}return null};borderRadius.propTypes={};borderRadius.filterProps=["borderRadius"];compose(border,borderTop,borderRight,borderBottom,borderLeft,borderColor,borderTopColor,borderRightColor,borderBottomColor,borderLeftColor,borderRadius,outline,outlineColor);const gap=e=>{if(e.gap!==void 0&&e.gap!==null){const i=createUnaryUnit(e.theme,"spacing",8),s=a=>({gap:getValue(i,a)});return handleBreakpoints(e,e.gap,s)}return null};gap.propTypes={};gap.filterProps=["gap"];const columnGap=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const i=createUnaryUnit(e.theme,"spacing",8),s=a=>({columnGap:getValue(i,a)});return handleBreakpoints(e,e.columnGap,s)}return null};columnGap.propTypes={};columnGap.filterProps=["columnGap"];const rowGap=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const i=createUnaryUnit(e.theme,"spacing",8),s=a=>({rowGap:getValue(i,a)});return handleBreakpoints(e,e.rowGap,s)}return null};rowGap.propTypes={};rowGap.filterProps=["rowGap"];const gridColumn=style$1({prop:"gridColumn"}),gridRow=style$1({prop:"gridRow"}),gridAutoFlow=style$1({prop:"gridAutoFlow"}),gridAutoColumns=style$1({prop:"gridAutoColumns"}),gridAutoRows=style$1({prop:"gridAutoRows"}),gridTemplateColumns=style$1({prop:"gridTemplateColumns"}),gridTemplateRows=style$1({prop:"gridTemplateRows"}),gridTemplateAreas=style$1({prop:"gridTemplateAreas"}),gridArea=style$1({prop:"gridArea"});compose(gap,columnGap,rowGap,gridColumn,gridRow,gridAutoFlow,gridAutoColumns,gridAutoRows,gridTemplateColumns,gridTemplateRows,gridTemplateAreas,gridArea);function paletteTransform(e,i){return i==="grey"?i:e}const color=style$1({prop:"color",themeKey:"palette",transform:paletteTransform}),bgcolor=style$1({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:paletteTransform}),backgroundColor=style$1({prop:"backgroundColor",themeKey:"palette",transform:paletteTransform});compose(color,bgcolor,backgroundColor);function sizingTransform(e){return e<=1&&e!==0?`${e*100}%`:e}const width=style$1({prop:"width",transform:sizingTransform}),maxWidth=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const i=s=>{var a,o;const c=((a=e.theme)==null||(a=a.breakpoints)==null||(a=a.values)==null?void 0:a[s])||values[s];return c?((o=e.theme)==null||(o=o.breakpoints)==null?void 0:o.unit)!=="px"?{maxWidth:`${c}${e.theme.breakpoints.unit}`}:{maxWidth:c}:{maxWidth:sizingTransform(s)}};return handleBreakpoints(e,e.maxWidth,i)}return null};maxWidth.filterProps=["maxWidth"];const minWidth=style$1({prop:"minWidth",transform:sizingTransform}),height=style$1({prop:"height",transform:sizingTransform}),maxHeight=style$1({prop:"maxHeight",transform:sizingTransform}),minHeight=style$1({prop:"minHeight",transform:sizingTransform});style$1({prop:"size",cssProperty:"width",transform:sizingTransform});style$1({prop:"size",cssProperty:"height",transform:sizingTransform});const boxSizing=style$1({prop:"boxSizing"});compose(width,maxWidth,minWidth,height,maxHeight,minHeight,boxSizing);const defaultSxConfig={border:{themeKey:"borders",transform:borderTransform},borderTop:{themeKey:"borders",transform:borderTransform},borderRight:{themeKey:"borders",transform:borderTransform},borderBottom:{themeKey:"borders",transform:borderTransform},borderLeft:{themeKey:"borders",transform:borderTransform},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:borderTransform},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:borderRadius},color:{themeKey:"palette",transform:paletteTransform},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:paletteTransform},backgroundColor:{themeKey:"palette",transform:paletteTransform},p:{style:padding},pt:{style:padding},pr:{style:padding},pb:{style:padding},pl:{style:padding},px:{style:padding},py:{style:padding},padding:{style:padding},paddingTop:{style:padding},paddingRight:{style:padding},paddingBottom:{style:padding},paddingLeft:{style:padding},paddingX:{style:padding},paddingY:{style:padding},paddingInline:{style:padding},paddingInlineStart:{style:padding},paddingInlineEnd:{style:padding},paddingBlock:{style:padding},paddingBlockStart:{style:padding},paddingBlockEnd:{style:padding},m:{style:margin},mt:{style:margin},mr:{style:margin},mb:{style:margin},ml:{style:margin},mx:{style:margin},my:{style:margin},margin:{style:margin},marginTop:{style:margin},marginRight:{style:margin},marginBottom:{style:margin},marginLeft:{style:margin},marginX:{style:margin},marginY:{style:margin},marginInline:{style:margin},marginInlineStart:{style:margin},marginInlineEnd:{style:margin},marginBlock:{style:margin},marginBlockStart:{style:margin},marginBlockEnd:{style:margin},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:gap},rowGap:{style:rowGap},columnGap:{style:columnGap},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:sizingTransform},maxWidth:{style:maxWidth},minWidth:{transform:sizingTransform},height:{transform:sizingTransform},maxHeight:{transform:sizingTransform},minHeight:{transform:sizingTransform},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},defaultSxConfig$1=defaultSxConfig;function objectsHaveSameKeys(...e){const i=e.reduce((a,o)=>a.concat(Object.keys(o)),[]),s=new Set(i);return e.every(a=>s.size===Object.keys(a).length)}function callIfFn(e,i){return typeof e=="function"?e(i):e}function unstable_createStyleFunctionSx(){function e(s,a,o,c){const d={[s]:a,theme:o},g=c[s];if(!g)return{[s]:a};const{cssProperty:b=s,themeKey:j,transform:_e,style:$}=g;if(a==null)return null;if(j==="typography"&&a==="inherit")return{[s]:a};const rt=getPath(o,j)||{};return $?$(d):handleBreakpoints(d,a,ut=>{let gt=getStyleValue(rt,_e,ut);return ut===gt&&typeof ut=="string"&&(gt=getStyleValue(rt,_e,`${s}${ut==="default"?"":capitalize(ut)}`,ut)),b===!1?gt:{[b]:gt}})}function i(s){var a;const{sx:o,theme:c={}}=s||{};if(!o)return null;const d=(a=c.unstable_sxConfig)!=null?a:defaultSxConfig$1;function g(b){let j=b;if(typeof b=="function")j=b(c);else if(typeof b!="object")return b;if(!j)return null;const _e=createEmptyBreakpointObject(c.breakpoints),$=Object.keys(_e);let rt=_e;return Object.keys(j).forEach(st=>{const ut=callIfFn(j[st],c);if(ut!=null)if(typeof ut=="object")if(d[st])rt=merge$1(rt,e(st,ut,c,d));else{const gt=handleBreakpoints({theme:c},ut,wt=>({[st]:wt}));objectsHaveSameKeys(gt,ut)?rt[st]=i({sx:ut,theme:c}):rt=merge$1(rt,gt)}else rt=merge$1(rt,e(st,ut,c,d))}),removeUnusedBreakpoints($,rt)}return Array.isArray(o)?o.map(g):g(o)}return i}const styleFunctionSx=unstable_createStyleFunctionSx();styleFunctionSx.filterProps=["sx"];const _excluded$e=["breakpoints","palette","spacing","shape"];function createTheme$1(e={},...i){const{breakpoints:s={},palette:a={},spacing:o,shape:c={}}=e,d=_objectWithoutPropertiesLoose$2(e,_excluded$e),g=createBreakpoints(s),b=createSpacing(o);let j=deepmerge({breakpoints:g,direction:"ltr",components:{},palette:_extends$3({mode:"light"},a),spacing:b,shape:_extends$3({},shape$1,c)},d);return j=i.reduce((_e,$)=>deepmerge(_e,$),j),j.unstable_sxConfig=_extends$3({},defaultSxConfig$1,d==null?void 0:d.unstable_sxConfig),j.unstable_sx=function($){return styleFunctionSx({sx:$,theme:this})},j}function isObjectEmpty(e){return Object.keys(e).length===0}function useTheme$1(e=null){const i=reactExports.useContext(ThemeContext);return!i||isObjectEmpty(i)?e:i}const systemDefaultTheme$1=createTheme$1();function useTheme(e=systemDefaultTheme$1){return useTheme$1(e)}const _excluded$d=["variant"];function isEmpty$1(e){return e.length===0}function propsToClassKey(e){const{variant:i}=e,s=_objectWithoutPropertiesLoose$2(e,_excluded$d);let a=i||"";return Object.keys(s).sort().forEach(o=>{o==="color"?a+=isEmpty$1(a)?e[o]:capitalize(e[o]):a+=`${isEmpty$1(a)?o:capitalize(o)}${capitalize(e[o].toString())}`}),a}const _excluded$c=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function isEmpty(e){return Object.keys(e).length===0}function isStringTag(e){return typeof e=="string"&&e.charCodeAt(0)>96}const getStyleOverrides=(e,i)=>i.components&&i.components[e]&&i.components[e].styleOverrides?i.components[e].styleOverrides:null,transformVariants=e=>{let i=0;const s={};return e&&e.forEach(a=>{let o="";typeof a.props=="function"?(o=`callback${i}`,i+=1):o=propsToClassKey(a.props),s[o]=a.style}),s},getVariantStyles=(e,i)=>{let s=[];return i&&i.components&&i.components[e]&&i.components[e].variants&&(s=i.components[e].variants),transformVariants(s)},variantsResolver=(e,i,s)=>{const{ownerState:a={}}=e,o=[];let c=0;return s&&s.forEach(d=>{let g=!0;if(typeof d.props=="function"){const b=_extends$3({},e,a);g=d.props(b)}else Object.keys(d.props).forEach(b=>{a[b]!==d.props[b]&&e[b]!==d.props[b]&&(g=!1)});g&&(typeof d.props=="function"?o.push(i[`callback${c}`]):o.push(i[propsToClassKey(d.props)])),typeof d.props=="function"&&(c+=1)}),o},themeVariantsResolver=(e,i,s,a)=>{var o;const c=s==null||(o=s.components)==null||(o=o[a])==null?void 0:o.variants;return variantsResolver(e,i,c)};function shouldForwardProp(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const systemDefaultTheme=createTheme$1(),lowercaseFirstLetter=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function resolveTheme({defaultTheme:e,theme:i,themeId:s}){return isEmpty(i)?e:i[s]||i}function defaultOverridesResolver(e){return e?(i,s)=>s[e]:null}const muiStyledFunctionResolver=({styledArg:e,props:i,defaultTheme:s,themeId:a})=>{const o=e(_extends$3({},i,{theme:resolveTheme(_extends$3({},i,{defaultTheme:s,themeId:a}))}));let c;if(o&&o.variants&&(c=o.variants,delete o.variants),c){const d=variantsResolver(i,transformVariants(c),c);return[o,...d]}return o};function createStyled(e={}){const{themeId:i,defaultTheme:s=systemDefaultTheme,rootShouldForwardProp:a=shouldForwardProp,slotShouldForwardProp:o=shouldForwardProp}=e,c=d=>styleFunctionSx(_extends$3({},d,{theme:resolveTheme(_extends$3({},d,{defaultTheme:s,themeId:i}))}));return c.__mui_systemSx=!0,(d,g={})=>{internal_processStyles(d,Tt=>Tt.filter(kt=>!(kt!=null&&kt.__mui_systemSx)));const{name:b,slot:j,skipVariantsResolver:_e,skipSx:$,overridesResolver:rt=defaultOverridesResolver(lowercaseFirstLetter(j))}=g,st=_objectWithoutPropertiesLoose$2(g,_excluded$c),ut=_e!==void 0?_e:j&&j!=="Root"&&j!=="root"||!1,gt=$||!1;let wt,yt=shouldForwardProp;j==="Root"||j==="root"?yt=a:j?yt=o:isStringTag(d)&&(yt=void 0);const At=styled$1(d,_extends$3({shouldForwardProp:yt,label:wt},st)),Ct=(Tt,...kt)=>{const Pt=kt?kt.map(Ht=>{if(typeof Ht=="function"&&Ht.__emotion_real!==Ht)return dr=>muiStyledFunctionResolver({styledArg:Ht,props:dr,defaultTheme:s,themeId:i});if(isPlainObject$1(Ht)){let dr=Ht,hs;return Ht&&Ht.variants&&(hs=Ht.variants,delete dr.variants,dr=_s=>{let ds=Ht;return variantsResolver(_s,transformVariants(hs),hs).forEach(us=>{ds=deepmerge(ds,us)}),ds}),dr}return Ht}):[];let It=Tt;if(isPlainObject$1(Tt)){let Ht;Tt&&Tt.variants&&(Ht=Tt.variants,delete It.variants,It=dr=>{let hs=Tt;return variantsResolver(dr,transformVariants(Ht),Ht).forEach(ds=>{hs=deepmerge(hs,ds)}),hs})}else typeof Tt=="function"&&Tt.__emotion_real!==Tt&&(It=Ht=>muiStyledFunctionResolver({styledArg:Tt,props:Ht,defaultTheme:s,themeId:i}));b&&rt&&Pt.push(Ht=>{const dr=resolveTheme(_extends$3({},Ht,{defaultTheme:s,themeId:i})),hs=getStyleOverrides(b,dr);if(hs){const _s={};return Object.entries(hs).forEach(([ds,Nn])=>{_s[ds]=typeof Nn=="function"?Nn(_extends$3({},Ht,{theme:dr})):Nn}),rt(Ht,_s)}return null}),b&&!ut&&Pt.push(Ht=>{const dr=resolveTheme(_extends$3({},Ht,{defaultTheme:s,themeId:i}));return themeVariantsResolver(Ht,getVariantStyles(b,dr),dr,b)}),gt||Pt.push(c);const Lt=Pt.length-kt.length;if(Array.isArray(Tt)&&Lt>0){const Ht=new Array(Lt).fill("");It=[...Tt,...Ht],It.raw=[...Tt.raw,...Ht]}const Nt=At(It,...Pt);return d.muiName&&(Nt.muiName=d.muiName),Nt};return At.withConfig&&(Ct.withConfig=At.withConfig),Ct}}function getThemeProps(e){const{theme:i,name:s,props:a}=e;return!i||!i.components||!i.components[s]||!i.components[s].defaultProps?a:resolveProps(i.components[s].defaultProps,a)}function useThemeProps$1({props:e,name:i,defaultTheme:s,themeId:a}){let o=useTheme(s);return a&&(o=o[a]||o),getThemeProps({theme:o,name:i,props:e})}function clampWrapper(e,i=0,s=1){return clamp$1(e,i,s)}function hexToRgb(e){e=e.slice(1);const i=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let s=e.match(i);return s&&s[0].length===1&&(s=s.map(a=>a+a)),s?`rgb${s.length===4?"a":""}(${s.map((a,o)=>o<3?parseInt(a,16):Math.round(parseInt(a,16)/255*1e3)/1e3).join(", ")})`:""}function decomposeColor(e){if(e.type)return e;if(e.charAt(0)==="#")return decomposeColor(hexToRgb(e));const i=e.indexOf("("),s=e.substring(0,i);if(["rgb","rgba","hsl","hsla","color"].indexOf(s)===-1)throw new Error(formatMuiErrorMessage(9,e));let a=e.substring(i+1,e.length-1),o;if(s==="color"){if(a=a.split(" "),o=a.shift(),a.length===4&&a[3].charAt(0)==="/"&&(a[3]=a[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(o)===-1)throw new Error(formatMuiErrorMessage(10,o))}else a=a.split(",");return a=a.map(c=>parseFloat(c)),{type:s,values:a,colorSpace:o}}function recomposeColor(e){const{type:i,colorSpace:s}=e;let{values:a}=e;return i.indexOf("rgb")!==-1?a=a.map((o,c)=>c<3?parseInt(o,10):o):i.indexOf("hsl")!==-1&&(a[1]=`${a[1]}%`,a[2]=`${a[2]}%`),i.indexOf("color")!==-1?a=`${s} ${a.join(" ")}`:a=`${a.join(", ")}`,`${i}(${a})`}function hslToRgb(e){e=decomposeColor(e);const{values:i}=e,s=i[0],a=i[1]/100,o=i[2]/100,c=a*Math.min(o,1-o),d=(j,_e=(j+s/30)%12)=>o-c*Math.max(Math.min(_e-3,9-_e,1),-1);let g="rgb";const b=[Math.round(d(0)*255),Math.round(d(8)*255),Math.round(d(4)*255)];return e.type==="hsla"&&(g+="a",b.push(i[3])),recomposeColor({type:g,values:b})}function getLuminance(e){e=decomposeColor(e);let i=e.type==="hsl"||e.type==="hsla"?decomposeColor(hslToRgb(e)).values:e.values;return i=i.map(s=>(e.type!=="color"&&(s/=255),s<=.03928?s/12.92:((s+.055)/1.055)**2.4)),Number((.2126*i[0]+.7152*i[1]+.0722*i[2]).toFixed(3))}function getContrastRatio(e,i){const s=getLuminance(e),a=getLuminance(i);return(Math.max(s,a)+.05)/(Math.min(s,a)+.05)}function darken(e,i){if(e=decomposeColor(e),i=clampWrapper(i),e.type.indexOf("hsl")!==-1)e.values[2]*=1-i;else if(e.type.indexOf("rgb")!==-1||e.type.indexOf("color")!==-1)for(let s=0;s<3;s+=1)e.values[s]*=1-i;return recomposeColor(e)}function lighten(e,i){if(e=decomposeColor(e),i=clampWrapper(i),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*i;else if(e.type.indexOf("rgb")!==-1)for(let s=0;s<3;s+=1)e.values[s]+=(255-e.values[s])*i;else if(e.type.indexOf("color")!==-1)for(let s=0;s<3;s+=1)e.values[s]+=(1-e.values[s])*i;return recomposeColor(e)}function createMixins(e,i){return _extends$3({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},i)}const common={black:"#000",white:"#fff"},common$1=common,grey={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},grey$1=grey,purple={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},purple$1=purple,red={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},red$1=red,orange={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},orange$1=orange,blue={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},blue$1=blue,lightBlue={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},lightBlue$1=lightBlue,green={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},green$1=green,_excluded$b=["mode","contrastThreshold","tonalOffset"],light={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:common$1.white,default:common$1.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},dark={text:{primary:common$1.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:common$1.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function addLightOrDark(e,i,s,a){const o=a.light||a,c=a.dark||a*1.5;e[i]||(e.hasOwnProperty(s)?e[i]=e[s]:i==="light"?e.light=lighten(e.main,o):i==="dark"&&(e.dark=darken(e.main,c)))}function getDefaultPrimary(e="light"){return e==="dark"?{main:blue$1[200],light:blue$1[50],dark:blue$1[400]}:{main:blue$1[700],light:blue$1[400],dark:blue$1[800]}}function getDefaultSecondary(e="light"){return e==="dark"?{main:purple$1[200],light:purple$1[50],dark:purple$1[400]}:{main:purple$1[500],light:purple$1[300],dark:purple$1[700]}}function getDefaultError(e="light"){return e==="dark"?{main:red$1[500],light:red$1[300],dark:red$1[700]}:{main:red$1[700],light:red$1[400],dark:red$1[800]}}function getDefaultInfo(e="light"){return e==="dark"?{main:lightBlue$1[400],light:lightBlue$1[300],dark:lightBlue$1[700]}:{main:lightBlue$1[700],light:lightBlue$1[500],dark:lightBlue$1[900]}}function getDefaultSuccess(e="light"){return e==="dark"?{main:green$1[400],light:green$1[300],dark:green$1[700]}:{main:green$1[800],light:green$1[500],dark:green$1[900]}}function getDefaultWarning(e="light"){return e==="dark"?{main:orange$1[400],light:orange$1[300],dark:orange$1[700]}:{main:"#ed6c02",light:orange$1[500],dark:orange$1[900]}}function createPalette(e){const{mode:i="light",contrastThreshold:s=3,tonalOffset:a=.2}=e,o=_objectWithoutPropertiesLoose$2(e,_excluded$b),c=e.primary||getDefaultPrimary(i),d=e.secondary||getDefaultSecondary(i),g=e.error||getDefaultError(i),b=e.info||getDefaultInfo(i),j=e.success||getDefaultSuccess(i),_e=e.warning||getDefaultWarning(i);function $(gt){return getContrastRatio(gt,dark.text.primary)>=s?dark.text.primary:light.text.primary}const rt=({color:gt,name:wt,mainShade:yt=500,lightShade:At=300,darkShade:Ct=700})=>{if(gt=_extends$3({},gt),!gt.main&&gt[yt]&&(gt.main=gt[yt]),!gt.hasOwnProperty("main"))throw new Error(formatMuiErrorMessage(11,wt?` (${wt})`:"",yt));if(typeof gt.main!="string")throw new Error(formatMuiErrorMessage(12,wt?` (${wt})`:"",JSON.stringify(gt.main)));return addLightOrDark(gt,"light",At,a),addLightOrDark(gt,"dark",Ct,a),gt.contrastText||(gt.contrastText=$(gt.main)),gt},st={dark,light};return deepmerge(_extends$3({common:_extends$3({},common$1),mode:i,primary:rt({color:c,name:"primary"}),secondary:rt({color:d,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:rt({color:g,name:"error"}),warning:rt({color:_e,name:"warning"}),info:rt({color:b,name:"info"}),success:rt({color:j,name:"success"}),grey:grey$1,contrastThreshold:s,getContrastText:$,augmentColor:rt,tonalOffset:a},st[i]),o)}const _excluded$a=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function round(e){return Math.round(e*1e5)/1e5}const caseAllCaps={textTransform:"uppercase"},defaultFontFamily='"Roboto", "Helvetica", "Arial", sans-serif';function createTypography(e,i){const s=typeof i=="function"?i(e):i,{fontFamily:a=defaultFontFamily,fontSize:o=14,fontWeightLight:c=300,fontWeightRegular:d=400,fontWeightMedium:g=500,fontWeightBold:b=700,htmlFontSize:j=16,allVariants:_e,pxToRem:$}=s,rt=_objectWithoutPropertiesLoose$2(s,_excluded$a),st=o/14,ut=$||(yt=>`${yt/j*st}rem`),gt=(yt,At,Ct,Tt,kt)=>_extends$3({fontFamily:a,fontWeight:yt,fontSize:ut(At),lineHeight:Ct},a===defaultFontFamily?{letterSpacing:`${round(Tt/At)}em`}:{},kt,_e),wt={h1:gt(c,96,1.167,-1.5),h2:gt(c,60,1.2,-.5),h3:gt(d,48,1.167,0),h4:gt(d,34,1.235,.25),h5:gt(d,24,1.334,0),h6:gt(g,20,1.6,.15),subtitle1:gt(d,16,1.75,.15),subtitle2:gt(g,14,1.57,.1),body1:gt(d,16,1.5,.15),body2:gt(d,14,1.43,.15),button:gt(g,14,1.75,.4,caseAllCaps),caption:gt(d,12,1.66,.4),overline:gt(d,12,2.66,1,caseAllCaps),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return deepmerge(_extends$3({htmlFontSize:j,pxToRem:ut,fontFamily:a,fontSize:o,fontWeightLight:c,fontWeightRegular:d,fontWeightMedium:g,fontWeightBold:b},wt),rt,{clone:!1})}const shadowKeyUmbraOpacity=.2,shadowKeyPenumbraOpacity=.14,shadowAmbientShadowOpacity=.12;function createShadow(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${shadowKeyUmbraOpacity})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${shadowKeyPenumbraOpacity})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${shadowAmbientShadowOpacity})`].join(",")}const shadows=["none",createShadow(0,2,1,-1,0,1,1,0,0,1,3,0),createShadow(0,3,1,-2,0,2,2,0,0,1,5,0),createShadow(0,3,3,-2,0,3,4,0,0,1,8,0),createShadow(0,2,4,-1,0,4,5,0,0,1,10,0),createShadow(0,3,5,-1,0,5,8,0,0,1,14,0),createShadow(0,3,5,-1,0,6,10,0,0,1,18,0),createShadow(0,4,5,-2,0,7,10,1,0,2,16,1),createShadow(0,5,5,-3,0,8,10,1,0,3,14,2),createShadow(0,5,6,-3,0,9,12,1,0,3,16,2),createShadow(0,6,6,-3,0,10,14,1,0,4,18,3),createShadow(0,6,7,-4,0,11,15,1,0,4,20,3),createShadow(0,7,8,-4,0,12,17,2,0,5,22,4),createShadow(0,7,8,-4,0,13,19,2,0,5,24,4),createShadow(0,7,9,-4,0,14,21,2,0,5,26,4),createShadow(0,8,9,-5,0,15,22,2,0,6,28,5),createShadow(0,8,10,-5,0,16,24,2,0,6,30,5),createShadow(0,8,11,-5,0,17,26,2,0,6,32,5),createShadow(0,9,11,-5,0,18,28,2,0,7,34,6),createShadow(0,9,12,-6,0,19,29,2,0,7,36,6),createShadow(0,10,13,-6,0,20,31,3,0,8,38,7),createShadow(0,10,13,-6,0,21,33,3,0,8,40,7),createShadow(0,10,14,-6,0,22,35,3,0,8,42,7),createShadow(0,11,14,-7,0,23,36,3,0,9,44,8),createShadow(0,11,15,-7,0,24,38,3,0,9,46,8)],_excluded$9=["duration","easing","delay"],easing={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},duration={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function formatMs(e){return`${Math.round(e)}ms`}function getAutoHeightDuration(e){if(!e)return 0;const i=e/36;return Math.round((4+15*i**.25+i/5)*10)}function createTransitions(e){const i=_extends$3({},easing,e.easing),s=_extends$3({},duration,e.duration);return _extends$3({getAutoHeightDuration,create:(o=["all"],c={})=>{const{duration:d=s.standard,easing:g=i.easeInOut,delay:b=0}=c;return _objectWithoutPropertiesLoose$2(c,_excluded$9),(Array.isArray(o)?o:[o]).map(j=>`${j} ${typeof d=="string"?d:formatMs(d)} ${g} ${typeof b=="string"?b:formatMs(b)}`).join(",")}},e,{easing:i,duration:s})}const zIndex={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},zIndex$1=zIndex,_excluded$8=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function createTheme(e={},...i){const{mixins:s={},palette:a={},transitions:o={},typography:c={}}=e,d=_objectWithoutPropertiesLoose$2(e,_excluded$8);if(e.vars)throw new Error(formatMuiErrorMessage(18));const g=createPalette(a),b=createTheme$1(e);let j=deepmerge(b,{mixins:createMixins(b.breakpoints,s),palette:g,shadows:shadows.slice(),typography:createTypography(g,c),transitions:createTransitions(o),zIndex:_extends$3({},zIndex$1)});return j=deepmerge(j,d),j=i.reduce((_e,$)=>deepmerge(_e,$),j),j.unstable_sxConfig=_extends$3({},defaultSxConfig$1,d==null?void 0:d.unstable_sxConfig),j.unstable_sx=function($){return styleFunctionSx({sx:$,theme:this})},j}const defaultTheme=createTheme(),defaultTheme$1=defaultTheme,THEME_ID="$$material";function useThemeProps({props:e,name:i}){return useThemeProps$1({props:e,name:i,defaultTheme:defaultTheme$1,themeId:THEME_ID})}const rootShouldForwardProp=e=>shouldForwardProp(e)&&e!=="classes",styled=createStyled({themeId:THEME_ID,defaultTheme:defaultTheme$1,rootShouldForwardProp});function getSvgIconUtilityClass(e){return generateUtilityClass("MuiSvgIcon",e)}generateUtilityClasses("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const _excluded$7=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],useUtilityClasses=e=>{const{color:i,fontSize:s,classes:a}=e,o={root:["root",i!=="inherit"&&`color${capitalize(i)}`,`fontSize${capitalize(s)}`]};return composeClasses(o,getSvgIconUtilityClass,a)},SvgIconRoot=styled("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,i)=>{const{ownerState:s}=e;return[i.root,s.color!=="inherit"&&i[`color${capitalize(s.color)}`],i[`fontSize${capitalize(s.fontSize)}`]]}})(({theme:e,ownerState:i})=>{var s,a,o,c,d,g,b,j,_e,$,rt,st,ut;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:i.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(s=e.transitions)==null||(a=s.create)==null?void 0:a.call(s,"fill",{duration:(o=e.transitions)==null||(o=o.duration)==null?void 0:o.shorter}),fontSize:{inherit:"inherit",small:((c=e.typography)==null||(d=c.pxToRem)==null?void 0:d.call(c,20))||"1.25rem",medium:((g=e.typography)==null||(b=g.pxToRem)==null?void 0:b.call(g,24))||"1.5rem",large:((j=e.typography)==null||(_e=j.pxToRem)==null?void 0:_e.call(j,35))||"2.1875rem"}[i.fontSize],color:($=(rt=(e.vars||e).palette)==null||(rt=rt[i.color])==null?void 0:rt.main)!=null?$:{action:(st=(e.vars||e).palette)==null||(st=st.action)==null?void 0:st.active,disabled:(ut=(e.vars||e).palette)==null||(ut=ut.action)==null?void 0:ut.disabled,inherit:void 0}[i.color]}}),SvgIcon=reactExports.forwardRef(function(i,s){const a=useThemeProps({props:i,name:"MuiSvgIcon"}),{children:o,className:c,color:d="inherit",component:g="svg",fontSize:b="medium",htmlColor:j,inheritViewBox:_e=!1,titleAccess:$,viewBox:rt="0 0 24 24"}=a,st=_objectWithoutPropertiesLoose$2(a,_excluded$7),ut=reactExports.isValidElement(o)&&o.type==="svg",gt=_extends$3({},a,{color:d,component:g,fontSize:b,instanceFontSize:i.fontSize,inheritViewBox:_e,viewBox:rt,hasSvgAsChild:ut}),wt={};_e||(wt.viewBox=rt);const yt=useUtilityClasses(gt);return jsxRuntimeExports.jsxs(SvgIconRoot,_extends$3({as:g,className:clsx(yt.root,c),focusable:"false",color:j,"aria-hidden":$?void 0:!0,role:$?"img":void 0,ref:s},wt,st,ut&&o.props,{ownerState:gt,children:[ut?o.props.children:o,$?jsxRuntimeExports.jsx("title",{children:$}):null]}))});SvgIcon.muiName="SvgIcon";function createSvgIcon(e,i){function s(a,o){return jsxRuntimeExports.jsx(SvgIcon,_extends$3({"data-testid":`${i}Icon`,ref:o},a,{children:e}))}return s.muiName=SvgIcon.muiName,reactExports.memo(reactExports.forwardRef(s))}const unstable_ClassNameGenerator={configure:e=>{ClassNameGenerator.configure(e)}},utils$2=Object.freeze(Object.defineProperty({__proto__:null,capitalize,createChainedFunction,createSvgIcon,debounce,deprecatedPropType,isMuiElement,ownerDocument,ownerWindow,requirePropFactory,setRef:setRef$1,unstable_ClassNameGenerator,unstable_useEnhancedEffect:useEnhancedEffect$1,unstable_useId:useId$1,unsupportedProp,useControlled,useEventCallback,useForkRef,useIsFocusVisible},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(utils$2);var hasRequiredCreateSvgIcon;function requireCreateSvgIcon(){return hasRequiredCreateSvgIcon||(hasRequiredCreateSvgIcon=1,function(e){"use client";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return i.createSvgIcon}});var i=require$$0}(createSvgIcon$1)),createSvgIcon$1}var _interopRequireDefault$c=interopRequireDefaultExports;Object.defineProperty(Send,"__esModule",{value:!0});var default_1$c=Send.default=void 0,_createSvgIcon$c=_interopRequireDefault$c(requireCreateSvgIcon()),_jsxRuntime$c=jsxRuntimeExports;default_1$c=Send.default=(0,_createSvgIcon$c.default)((0,_jsxRuntime$c.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send");var X={},_interopRequireDefault$b=interopRequireDefaultExports;Object.defineProperty(X,"__esModule",{value:!0});var default_1$b=X.default=void 0;_interopRequireWildcard$5(reactExports);var _createSvgIcon$b=_interopRequireDefault$b(requireCreateSvgIcon()),_jsxRuntime$b=jsxRuntimeExports;function _getRequireWildcardCache$5(e){if(typeof WeakMap!="function")return null;var i=new WeakMap,s=new WeakMap;return(_getRequireWildcardCache$5=function(a){return a?s:i})(e)}function _interopRequireWildcard$5(e,i){if(!i&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var s=_getRequireWildcardCache$5(i);if(s&&s.has(e))return s.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in e)if(c!=="default"&&Object.prototype.hasOwnProperty.call(e,c)){var d=o?Object.getOwnPropertyDescriptor(e,c):null;d&&(d.get||d.set)?Object.defineProperty(a,c,d):a[c]=e[c]}return a.default=e,s&&s.set(e,a),a}default_1$b=X.default=(0,_createSvgIcon$b.default)((0,_jsxRuntime$b.jsx)("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"}),"X");var Telegram={},_interopRequireDefault$a=interopRequireDefaultExports;Object.defineProperty(Telegram,"__esModule",{value:!0});var default_1$a=Telegram.default=void 0;_interopRequireWildcard$4(reactExports);var _createSvgIcon$a=_interopRequireDefault$a(requireCreateSvgIcon()),_jsxRuntime$a=jsxRuntimeExports;function _getRequireWildcardCache$4(e){if(typeof WeakMap!="function")return null;var i=new WeakMap,s=new WeakMap;return(_getRequireWildcardCache$4=function(a){return a?s:i})(e)}function _interopRequireWildcard$4(e,i){if(!i&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var s=_getRequireWildcardCache$4(i);if(s&&s.has(e))return s.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in e)if(c!=="default"&&Object.prototype.hasOwnProperty.call(e,c)){var d=o?Object.getOwnPropertyDescriptor(e,c):null;d&&(d.get||d.set)?Object.defineProperty(a,c,d):a[c]=e[c]}return a.default=e,s&&s.set(e,a),a}default_1$a=Telegram.default=(0,_createSvgIcon$a.default)((0,_jsxRuntime$a.jsx)("path",{d:"M9.78 18.65l.28-4.23 7.68-6.92c.34-.31-.07-.46-.52-.19L7.74 13.3 3.64 12c-.88-.25-.89-.86.2-1.3l15.97-6.16c.73-.33 1.43.18 1.15 1.3l-2.72 12.81c-.19.91-.74 1.13-1.5.71L12.6 16.3l-1.99 1.93c-.23.23-.42.42-.83.42z"}),"Telegram");var YouTube={},_interopRequireDefault$9=interopRequireDefaultExports;Object.defineProperty(YouTube,"__esModule",{value:!0});var default_1$9=YouTube.default=void 0;_interopRequireWildcard$3(reactExports);var _createSvgIcon$9=_interopRequireDefault$9(requireCreateSvgIcon()),_jsxRuntime$9=jsxRuntimeExports;function _getRequireWildcardCache$3(e){if(typeof WeakMap!="function")return null;var i=new WeakMap,s=new WeakMap;return(_getRequireWildcardCache$3=function(a){return a?s:i})(e)}function _interopRequireWildcard$3(e,i){if(!i&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var s=_getRequireWildcardCache$3(i);if(s&&s.has(e))return s.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in e)if(c!=="default"&&Object.prototype.hasOwnProperty.call(e,c)){var d=o?Object.getOwnPropertyDescriptor(e,c):null;d&&(d.get||d.set)?Object.defineProperty(a,c,d):a[c]=e[c]}return a.default=e,s&&s.set(e,a),a}default_1$9=YouTube.default=(0,_createSvgIcon$9.default)((0,_jsxRuntime$9.jsx)("path",{d:"M10 15l5.19-3L10 9v6m11.56-7.83c.13.47.22 1.1.28 1.9.07.8.1 1.49.1 2.09L22 12c0 2.19-.16 3.8-.44 4.83-.25.9-.83 1.48-1.73 1.73-.47.13-1.33.22-2.65.28-1.3.07-2.49.1-3.59.1L12 19c-4.19 0-6.8-.16-7.83-.44-.9-.25-1.48-.83-1.73-1.73-.13-.47-.22-1.1-.28-1.9-.07-.8-.1-1.49-.1-2.09L2 12c0-2.19.16-3.8.44-4.83.25-.9.83-1.48 1.73-1.73.47-.13 1.33-.22 2.65-.28 1.3-.07 2.49-.1 3.59-.1L12 5c4.19 0 6.8.16 7.83.44.9.25 1.48.83 1.73 1.73z"}),"YouTube");var GitHub={},_interopRequireDefault$8=interopRequireDefaultExports;Object.defineProperty(GitHub,"__esModule",{value:!0});var default_1$8=GitHub.default=void 0;_interopRequireWildcard$2(reactExports);var _createSvgIcon$8=_interopRequireDefault$8(requireCreateSvgIcon()),_jsxRuntime$8=jsxRuntimeExports;function _getRequireWildcardCache$2(e){if(typeof WeakMap!="function")return null;var i=new WeakMap,s=new WeakMap;return(_getRequireWildcardCache$2=function(a){return a?s:i})(e)}function _interopRequireWildcard$2(e,i){if(!i&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var s=_getRequireWildcardCache$2(i);if(s&&s.has(e))return s.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in e)if(c!=="default"&&Object.prototype.hasOwnProperty.call(e,c)){var d=o?Object.getOwnPropertyDescriptor(e,c):null;d&&(d.get||d.set)?Object.defineProperty(a,c,d):a[c]=e[c]}return a.default=e,s&&s.set(e,a),a}default_1$8=GitHub.default=(0,_createSvgIcon$8.default)((0,_jsxRuntime$8.jsx)("path",{d:"M12 1.27a11 11 0 00-3.48 21.46c.55.09.73-.28.73-.55v-1.84c-3.03.64-3.67-1.46-3.67-1.46-.55-1.29-1.28-1.65-1.28-1.65-.92-.65.1-.65.1-.65 1.1 0 1.73 1.1 1.73 1.1.92 1.65 2.57 1.2 3.21.92a2 2 0 01.64-1.47c-2.47-.27-5.04-1.19-5.04-5.5 0-1.1.46-2.1 1.2-2.84a3.76 3.76 0 010-2.93s.91-.28 3.11 1.1c1.8-.49 3.7-.49 5.5 0 2.1-1.38 3.02-1.1 3.02-1.1a3.76 3.76 0 010 2.93c.83.74 1.2 1.74 1.2 2.94 0 4.21-2.57 5.13-5.04 5.4.45.37.82.92.82 2.02v3.03c0 .27.1.64.73.55A11 11 0 0012 1.27"}),"GitHub");var Reddit={},_interopRequireDefault$7=interopRequireDefaultExports;Object.defineProperty(Reddit,"__esModule",{value:!0});var default_1$7=Reddit.default=void 0;_interopRequireWildcard$1(reactExports);var _createSvgIcon$7=_interopRequireDefault$7(requireCreateSvgIcon()),_jsxRuntime$7=jsxRuntimeExports;function _getRequireWildcardCache$1(e){if(typeof WeakMap!="function")return null;var i=new WeakMap,s=new WeakMap;return(_getRequireWildcardCache$1=function(a){return a?s:i})(e)}function _interopRequireWildcard$1(e,i){if(!i&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var s=_getRequireWildcardCache$1(i);if(s&&s.has(e))return s.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in e)if(c!=="default"&&Object.prototype.hasOwnProperty.call(e,c)){var d=o?Object.getOwnPropertyDescriptor(e,c):null;d&&(d.get||d.set)?Object.defineProperty(a,c,d):a[c]=e[c]}return a.default=e,s&&s.set(e,a),a}default_1$7=Reddit.default=(0,_createSvgIcon$7.default)((0,_jsxRuntime$7.jsx)("path",{d:"M22 12.14a2.19 2.19 0 0 0-3.71-1.57 10.93 10.93 0 0 0-5.86-1.87l1-4.7 3.27.71a1.56 1.56 0 1 0 .16-.76l-3.64-.77c-.11-.02-.22 0-.29.06-.09.05-.14.14-.16.26l-1.11 5.22c-2.33.07-4.43.78-5.95 1.86A2.2 2.2 0 0 0 4.19 10a2.16 2.16 0 0 0-.9 4.15 3.6 3.6 0 0 0-.05.66c0 3.37 3.92 6.12 8.76 6.12s8.76-2.73 8.76-6.12c0-.21-.01-.44-.05-.66A2.21 2.21 0 0 0 22 12.14M7 13.7c0-.86.68-1.56 1.54-1.56s1.56.7 1.56 1.56a1.56 1.56 0 0 1-1.56 1.56c-.86.02-1.54-.7-1.54-1.56m8.71 4.14C14.63 18.92 12.59 19 12 19c-.61 0-2.65-.1-3.71-1.16a.4.4 0 0 1 0-.57.4.4 0 0 1 .57 0c.68.68 2.14.91 3.14.91s2.47-.23 3.14-.91a.4.4 0 0 1 .57 0c.14.16.14.41 0 .57m-.29-2.56c-.86 0-1.56-.7-1.56-1.56a1.56 1.56 0 0 1 1.56-1.56c.86 0 1.58.7 1.58 1.56a1.6 1.6 0 0 1-1.58 1.56z"}),"Reddit");const Home=()=>{const e=[{id:"1",title:"Coinbase",img:"/img/walletsImg/coinbase_icon.png",body:jsxRuntimeExports.jsxs("div",{className:"wallets_body",children:[jsxRuntimeExports.jsx("span",{children:"Coinbase is a global digital wallet functioning as a web browser extension. With Coinbase, you can safely and seamlessly manage the Egochain-based tokens that you control."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{children:"As an HD wallet, Kaikas allows you to create more than one account with a single master seed phrase. Kaikas supports various types of Klaytn networks, and enables you to register your own customized tokens within the wallet. Kaikas also allows you to sign requests from Klaytn-based web BApps (Blockchain Applications)."})]})},{id:"2",title:"Metamask",img:"/img/walletsImg/metamask_icon.png",body:jsxRuntimeExports.jsxs("div",{className:"wallets_body",children:[jsxRuntimeExports.jsx("span",{children:"Metamask is a global digital wallet functioning as a web browser extension. With Metamask, you can safely and seamlessly manage the Egochain-based tokens that you control."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{children:"As an HD wallet, Kaikas allows you to create more than one account with a single master seed phrase. Kaikas supports various types of Klaytn networks, and enables you to register your own customized tokens within the wallet. Kaikas also allows you to sign requests from Klaytn-based web BApps (Blockchain Applications)."})]})},{id:"3",title:"Trust Wallet",img:"/img/walletsImg/trust_wallet_icon.jpeg",body:jsxRuntimeExports.jsxs("div",{className:"wallets_body",children:[jsxRuntimeExports.jsx("span",{children:"Trust Wallet is a global digital wallet functioning as a web browser extension. With Trust Wallet, you can safely and seamlessly manage the Egochain-based tokens that you control."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{children:"As an HD wallet, Kaikas allows you to create more than one account with a single master seed phrase. Kaikas supports various types of Klaytn networks, and enables you to register your own customized tokens within the wallet. Kaikas also allows you to sign requests from Klaytn-based web BApps (Blockchain Applications)."})]})},{id:"4",title:"Kaikas",img:"/img/walletsImg/kaikas_wallet_icon.png",body:jsxRuntimeExports.jsxs("div",{className:"wallets_body",children:[jsxRuntimeExports.jsx("span",{children:"Kaikas is a global digital wallet functioning as a web browser extension. With Kaikas, you can safely and seamlessly manage the Egochain-based tokens that you control."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{children:"As an HD wallet, Kaikas allows you to create more than one account with a single master seed phrase. Kaikas supports various types of Klaytn networks, and enables you to register your own customized tokens within the wallet. Kaikas also allows you to sign requests from Klaytn-based web BApps (Blockchain Applications)."})]})},{id:"5",title:"SafePal",img:"/img/walletsImg/safepal_icon.png",body:jsxRuntimeExports.jsxs("div",{className:"wallets_body",children:[jsxRuntimeExports.jsx("span",{children:"SafePal is a global digital wallet functioning as a web browser extension. With SafePal, you can safely and seamlessly manage the Egochain-based tokens that you control."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{children:"As an HD wallet, Kaikas allows you to create more than one account with a single master seed phrase. Kaikas supports various types of Klaytn networks, and enables you to register your own customized tokens within the wallet. Kaikas also allows you to sign requests from Klaytn-based web BApps (Blockchain Applications)."})]})},{id:"6",title:"Coin98",img:"/img/walletsImg/coin98_icon.png",body:jsxRuntimeExports.jsxs("div",{className:"wallets_body",children:[jsxRuntimeExports.jsx("span",{children:"Coin98 is a global digital wallet functioning as a web browser extension. With Coin98, you can safely and seamlessly manage the Egochain-based tokens that you control."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{children:"As an HD wallet, Kaikas allows you to create more than one account with a single master seed phrase. Kaikas supports various types of Klaytn networks, and enables you to register your own customized tokens within the wallet. Kaikas also allows you to sign requests from Klaytn-based web BApps (Blockchain Applications)."})]})},{id:"7",title:"Huobi Wallet",img:"/img/walletsImg/huobi_icon.png",body:jsxRuntimeExports.jsxs("div",{className:"wallets_body",children:[jsxRuntimeExports.jsx("span",{children:"Huobi Wallet is a global digital wallet functioning as a web browser extension. With Huobi Wallet, you can safely and seamlessly manage the Egochain-based tokens that you control."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{children:"As an HD wallet, Kaikas allows you to create more than one account with a single master seed phrase. Kaikas supports various types of Klaytn networks, and enables you to register your own customized tokens within the wallet. Kaikas also allows you to sign requests from Klaytn-based web BApps (Blockchain Applications)."})]})},{id:"8",title:"D'Cent",img:"/img/walletsImg/dcent_icon.png",body:jsxRuntimeExports.jsxs("div",{className:"wallets_body",children:[jsxRuntimeExports.jsx("span",{children:"D'Cent is a global digital wallet functioning as a web browser extension. With D'Cent, you can safely and seamlessly manage the Egochain-based tokens that you control."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{children:"As an HD wallet, Kaikas allows you to create more than one account with a single master seed phrase. Kaikas supports various types of Klaytn networks, and enables you to register your own customized tokens within the wallet. Kaikas also allows you to sign requests from Klaytn-based web BApps (Blockchain Applications)."})]})},{id:"9",title:"Exodus Wallet",img:"/img/walletsImg/exodus_icon.png",body:jsxRuntimeExports.jsxs("div",{className:"wallets_body",children:[jsxRuntimeExports.jsx("span",{children:"Exodus Wallet is a global digital wallet functioning as a web browser extension. With Exodus Wallet, you can safely and seamlessly manage the Egochain-based tokens that you control."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{children:"As an HD wallet, Kaikas allows you to create more than one account with a single master seed phrase. Kaikas supports various types of Klaytn networks, and enables you to register your own customized tokens within the wallet. Kaikas also allows you to sign requests from Klaytn-based web BApps (Blockchain Applications)."})]})}];return jsxRuntimeExports.jsxs("div",{className:"Home_div",children:[jsxRuntimeExports.jsxs("section",{className:"home_div_section1",children:[jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsxs("div",{className:"home_div_section1_area",children:[jsxRuntimeExports.jsxs("div",{className:"home_div_section1_area_1",children:[jsxRuntimeExports.jsxs("div",{className:"home_div_section1_area_1_div1",children:[jsxRuntimeExports.jsxs("div",{className:"home_div_section1_area_1_div1_txt1",children:[jsxRuntimeExports.jsxs("span",{className:"home_div_section1_area_1_div1_txt1_span",children:["Operating Systems",jsxRuntimeExports.jsx("br",{})," For Next-Generation"]}),"Electric Vehicles."]}),jsxRuntimeExports.jsx("div",{className:"home_div_section1_area_1_div1_txt2",children:"Seamlessly create decentralized applications on Egochain, a decentralized blockchain that blends the speed and interoperability of Cosmos with the developer power of Ethereum."})]}),jsxRuntimeExports.jsxs("div",{className:"home_div_section1_area_1_div2",children:[jsxRuntimeExports.jsx("a",{href:"/egc/coin/info",children:jsxRuntimeExports.jsx("button",{className:"home_div_section1_area_1_div2_btn",children:"Explore EGC Coin"})}),jsxRuntimeExports.jsx("a",{href:"/egax/coin/info",children:jsxRuntimeExports.jsx("button",{className:"home_div_section1_area_1_div2_btn2",children:"Explore EGAX Coin"})})]})]}),jsxRuntimeExports.jsx("div",{className:"home_div_section1_area_2",children:jsxRuntimeExports.jsx(zr,{scene:"https://prod.spline.design/TVLoAomGQBQWA2NS/scene.splinecode",className:"home_div_section1_area_2_spline_scene"})})]})}),jsxRuntimeExports.jsx("img",{src:"/img/hero_bg_light.svg",alt:"",className:"home_div_section1_bg_light"}),jsxRuntimeExports.jsx("img",{src:"/img/test_hero_light2.svg",alt:"",className:"home_div_section1_bg_light2"}),jsxRuntimeExports.jsx(Grid$1,{}),jsxRuntimeExports.jsx("img",{src:"/img/grains_ellipse.png",alt:"",className:"grains_ellipse"})]}),jsxRuntimeExports.jsxs("section",{className:"home_div_section2",children:[jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsxs("div",{className:"home_div_section3_area",children:[jsxRuntimeExports.jsxs("div",{className:"home_div_section3_area_title",children:["Why Build on Egochain?",jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_para",children:"Build interoperable decentralized applications with the combined power of Ethereum's swift smart contract development and Cosmos SDK's seamless interoperability."})]}),jsxRuntimeExports.jsxs("div",{className:"home_div_section3_area_body",children:[jsxRuntimeExports.jsxs("div",{className:"home_div_section3_area_body_cont1",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_title",children:"Secure Network"}),jsxRuntimeExports.jsxs("div",{className:"home_div_section3_area_body_cont1_body_text",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_body_text_title",children:"Powered by EGAX's Secure Network"}),jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_body_text_para",children:"Node validators actively safeguard the EGOCHAIN by securing consensus, earning EGAX tokens as their well-deserved reward."})]}),jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_icon",children:jsxRuntimeExports.jsxs("svg",{"data-v-25ecef37":"","data-v-706ceafa":"",width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"4.08823",cy:"27.0335",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"27.9115",cy:"27.0335",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"16.0003",cy:"4.97105",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M14.0242 8.49609L5.62305 23.4981",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M17.9756 8.49609L26.3767 23.4981",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M8.05859 27.0273H23.9409",stroke:"white","stroke-width":"1.5"})]})})]}),jsxRuntimeExports.jsxs("div",{className:"home_div_section3_area_body_cont1",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_title",children:"Unleashing"}),jsxRuntimeExports.jsxs("div",{className:"home_div_section3_area_body_cont1_body_text",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_body_text_title",children:"Unleashing Interoperability"}),jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_body_text_para",children:"Powered by the robust Cosmos SDK, Egochain seamlessly connects to the vibrant Cosmos ecosystem (20+ chains, $40B+) through the IBC protocol."})]}),jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_icon",children:jsxRuntimeExports.jsxs("svg",{"data-v-25ecef37":"","data-v-706ceafa":"",width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"4.08823",cy:"27.0335",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"27.9115",cy:"27.0335",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"16.0003",cy:"4.97105",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M14.0242 8.49609L5.62305 23.4981",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M17.9756 8.49609L26.3767 23.4981",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M8.05859 27.0273H23.9409",stroke:"white","stroke-width":"1.5"})]})})]}),jsxRuntimeExports.jsxs("div",{className:"home_div_section3_area_body_cont1",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_title",children:"Unleash"}),jsxRuntimeExports.jsxs("div",{className:"home_div_section3_area_body_cont1_body_text",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_body_text_title",children:"Unleash the Full Potential of Solidity"}),jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_body_text_para",children:"Egochain's EVM compatibility empowers developers to leverage the familiar Solidity language and existing dApps, while reaping the benefits of Egochain's superior scalability and security."})]}),jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_icon",children:jsxRuntimeExports.jsxs("svg",{"data-v-25ecef37":"","data-v-706ceafa":"",width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"4.08823",cy:"27.0335",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"27.9115",cy:"27.0335",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"16.0003",cy:"4.97105",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M14.0242 8.49609L5.62305 23.4981",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M17.9756 8.49609L26.3767 23.4981",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M8.05859 27.0273H23.9409",stroke:"white","stroke-width":"1.5"})]})})]}),jsxRuntimeExports.jsxs("div",{className:"home_div_section3_area_body_cont1",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_title",children:"Transactions"}),jsxRuntimeExports.jsxs("div",{className:"home_div_section3_area_body_cont1_body_text",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_body_text_title",children:"Transactions by the Millions"}),jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_body_text_para",children:"Tendermint Consensus delivers single-block finality and unmatched scalability, ensuring Egochain can handle the demands of thousands of protocols and millions of users – effortlessly."})]}),jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_icon",children:jsxRuntimeExports.jsxs("svg",{"data-v-25ecef37":"","data-v-706ceafa":"",width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"4.08823",cy:"27.0335",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"27.9115",cy:"27.0335",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"16.0003",cy:"4.97105",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M14.0242 8.49609L5.62305 23.4981",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M17.9756 8.49609L26.3767 23.4981",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M8.05859 27.0273H23.9409",stroke:"white","stroke-width":"1.5"})]})})]})]})]})}),jsxRuntimeExports.jsx("img",{src:"/img/grains_bottom.png",alt:"",className:"grains_ellipse"}),jsxRuntimeExports.jsx("img",{src:"/img/test_hero_light3.svg",alt:"",className:"home_div_section1_bg_light3"})]}),jsxRuntimeExports.jsxs("section",{className:"home_div_section4",children:[jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsxs("div",{className:"home_div_section4_area",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_tile",children:"The most adopted scaling technology"}),jsxRuntimeExports.jsxs("div",{className:"home_div_section4_area_body",children:[jsxRuntimeExports.jsxs("div",{className:"home_div_section4_area_body_cont",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_cont1_img_div",children:jsxRuntimeExports.jsx(Icon,{})}),jsxRuntimeExports.jsxs("div",{className:"home_div_section4_area_body_cont2",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_cont2_title",children:"Power the future of Web3 with next-generation dApps"}),jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_cont2_para",children:"At Egochain, we see dApps as the engine driving Web3's revolution. That's why we built Egochain OS, a streamlined 3-step program empowering developers to launch innovative dApps directly onto the next generation of electric vehicles."}),jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_cont2_button_div",children:jsxRuntimeExports.jsx("button",{className:"home_div_section4_area_body_cont2_btn",children:"Open Docs"})})]})]}),jsxRuntimeExports.jsxs("div",{className:"home_div_section4_area_body_cont2a",children:[jsxRuntimeExports.jsxs("div",{className:"home_div_section4_area_body_cont2",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_cont2_title",children:"The Blockchain Paving the Way for Real-World Adoption"}),jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_cont2_para",children:"Built on the robust Cosmos SDK and leveraging the secure Ethermint consensus mechanism, Egochain is an EVM-compatible blockchain designed for mass adoption. Its human-readable addresses simplify user interactions, making the transition to blockchain technology seamless for millions."}),jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_cont2_button_div",children:jsxRuntimeExports.jsx("button",{className:"home_div_section4_area_body_cont2_btn",children:"Open Docs"})})]}),jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_cont1_img_div2",children:jsxRuntimeExports.jsx(Icon,{})})]}),jsxRuntimeExports.jsxs("div",{className:"home_div_section4_area_body_cont3",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_cont1_img_div",children:jsxRuntimeExports.jsx(Icon,{})}),jsxRuntimeExports.jsxs("div",{className:"home_div_section4_area_body_cont2",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_cont2_title",children:"Revolutionizing Smart Contracts"}),jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_cont2_para",children:"Launch dynamic dApps with Egoras's powerful CosmWasm smart contract layer. Egoras is the first blockchain to offer auto-executing smart contracts which empower faster, more innovative and groundbreaking applications."}),jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_cont2_button_div",children:jsxRuntimeExports.jsx("button",{className:"home_div_section4_area_body_cont2_btn",children:"Open Docs"})})]})]})]})]})}),jsxRuntimeExports.jsx("img",{src:"/img/grains_ellipse.png",alt:"",className:"grains_ellipse"}),jsxRuntimeExports.jsx("img",{src:"/img/test_hero_light4.svg",alt:"",className:"home_div_section1_bg_light4"})]}),jsxRuntimeExports.jsxs("section",{className:"home_div_section2",children:[jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsxs("div",{className:"ego_chain_stat_section_area",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_title",children:"The Blockchain Built for Real-World Businesses"}),jsxRuntimeExports.jsxs("div",{className:"ego_chain_stat_section_body",children:[jsxRuntimeExports.jsxs("div",{className:"ego_chain_stat_section_body_1",children:[jsxRuntimeExports.jsxs("div",{className:"ego_chain_stat_section_body_1_cont1",children:["Egochain is more than just a blockchain platform;",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"It is a powerful framework designed to empower real-world businesses to streamline operations, optimize transactions, and unlock new levels of value."]}),jsxRuntimeExports.jsxs("div",{className:"ego_chain_stat_section_body_1_cont2",children:[jsxRuntimeExports.jsx("div",{className:"ego_chain_stat_section_body_1_cont2_title",children:"PROOF-OF-STAKE"}),jsxRuntimeExports.jsxs("div",{className:"ego_chain_stat_section_body_1_cont2_div2",children:[jsxRuntimeExports.jsx("div",{className:"ego_chain_stat_section_body_1_cont2_div2_cont1",children:"99%"}),jsxRuntimeExports.jsxs("div",{className:"ego_chain_stat_section_body_1_cont2_div2_cont2",children:["lower ",jsxRuntimeExports.jsx("br",{}),"carbon ",jsxRuntimeExports.jsx("br",{}),"footprint"]})]}),jsxRuntimeExports.jsx("div",{className:"ego_chain_stat_section_body_1_cont2_last_text",children:"Blockchain tech that truly scales."})]})]}),jsxRuntimeExports.jsxs("div",{className:"ego_chain_stat_section_body_2",children:[jsxRuntimeExports.jsxs("div",{className:"ego_chain_stat_section_body_1_cont2",children:[jsxRuntimeExports.jsx("div",{className:"ego_chain_stat_section_body_1_cont2_title",children:"LOW FEES"}),jsxRuntimeExports.jsx("div",{className:"ego_chain_stat_section_body_1_cont2_txt",children:"$0.01"}),jsxRuntimeExports.jsx("div",{className:"ego_chain_stat_section_body_1_cont2_last_text",children:"Enjoy the lowest fees – almost zero."})]}),jsxRuntimeExports.jsxs("div",{className:"ego_chain_stat_section_body_1_cont2",children:[jsxRuntimeExports.jsx("div",{className:"ego_chain_stat_section_body_1_cont2_title",children:"FAST TRANSACTIONS"}),jsxRuntimeExports.jsx("div",{className:"ego_chain_stat_section_body_1_cont2_txt",children:"7 sec"}),jsxRuntimeExports.jsx("div",{className:"ego_chain_stat_section_body_1_cont2_last_text",children:"Transactions confirmed in seconds."})]})]})]})]})}),jsxRuntimeExports.jsx("img",{src:"/img/grains_bottom.png",alt:"",className:"grains_ellipse"}),jsxRuntimeExports.jsx("img",{src:"/img/hero_bg_light.svg",alt:"",className:"home_div_section1_bg_light5"})]}),jsxRuntimeExports.jsxs("section",{className:"home_div_section5",children:[jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsxs("div",{className:"home_div_section5_area",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section5_area_title",children:"Wallets"}),jsxRuntimeExports.jsx("div",{className:"home_div_section5_area_body_cont",children:e.map(i=>jsxRuntimeExports.jsxs("div",{className:"home_div_section5_area_body_cont_div1",id:i.id,children:[jsxRuntimeExports.jsx("div",{className:"home_div_section5_area_body_cont_div1_img_div",children:jsxRuntimeExports.jsx("img",{src:i.img,alt:"",className:"home_div_section5_area_body_cont_div1_img_div_img"})}),jsxRuntimeExports.jsx("div",{className:"home_div_section5_area_body_cont_div1_title",children:i.title}),jsxRuntimeExports.jsx("div",{className:"home_div_section5_area_body_cont_div1_title_para",children:i.body}),jsxRuntimeExports.jsx("div",{className:"home_div_section5_area_body_cont_div1_last_txt",children:"WALLETS"})]}))})]})}),jsxRuntimeExports.jsx("img",{src:"/img/grains_bottom.png",alt:"",className:"grains_ellipse"}),jsxRuntimeExports.jsx("img",{src:"/img/test_hero_light2.svg",alt:"",className:"home_div_section1_bg_light2"})]}),jsxRuntimeExports.jsxs("section",{className:"home_div_section6",children:[jsxRuntimeExports.jsxs("div",{className:"container",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section6_area_community",children:jsxRuntimeExports.jsxs("div",{className:"home_div_section6_area_community_2",children:[jsxRuntimeExports.jsxs("div",{className:"home_div_section6_area_community_2_title",children:["Join the Egochain commnity",jsxRuntimeExports.jsx("div",{className:"home_div_section6_area_community_2_title_para",children:"Take part in the conversation! Stay in the know & be the first to hear about any new updates"})]}),jsxRuntimeExports.jsxs("div",{className:"home_div_section6_area_community_2_links",children:[jsxRuntimeExports.jsxs("a",{target:"_blank",href:"https://twitter.com/egorasHQ?ref_src=twsrc%5Egoogle%7Ctwcamp%5Eserp%7Ctwgr%5Eauthor",className:"home_div_section6_area_community_2_links_cont1",children:[jsxRuntimeExports.jsx(default_1$b,{className:"home_div_section6_area_community_2_links_cont1_icon",style:{background:"#000"}}),jsxRuntimeExports.jsxs("div",{className:"home_div_section6_area_community_2_links_cont1_text",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section6_area_community_2_links_cont1_text_title",children:"X"}),jsxRuntimeExports.jsx("div",{className:"home_div_section6_area_community_2_links_cont1_text_para",children:"Read the latest"})]})]}),jsxRuntimeExports.jsxs("a",{target:"_blank",href:"https://t.me/s/egorasmarket?before=480",className:"home_div_section6_area_community_2_links_cont1",children:[jsxRuntimeExports.jsx(default_1$a,{className:"home_div_section6_area_community_2_links_cont1_icon"}),jsxRuntimeExports.jsxs("div",{className:"home_div_section6_area_community_2_links_cont1_text",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section6_area_community_2_links_cont1_text_title",children:"Telegram"}),jsxRuntimeExports.jsx("div",{className:"home_div_section6_area_community_2_links_cont1_text_para",children:"Join Discussion"})]})]}),jsxRuntimeExports.jsxs("a",{href:"https://www.youtube.com/channel/UCHfi5EwXig46xp5Dx8hVBHQ",className:"home_div_section6_area_community_2_links_cont1",children:[jsxRuntimeExports.jsx(default_1$9,{className:"home_div_section6_area_community_2_links_cont1_icon",style:{background:"red"}}),jsxRuntimeExports.jsxs("div",{className:"home_div_section6_area_community_2_links_cont1_text",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section6_area_community_2_links_cont1_text_title",children:"Youtube"}),jsxRuntimeExports.jsx("div",{className:"home_div_section6_area_community_2_links_cont1_text_para",children:"Watch the latest"})]})]}),jsxRuntimeExports.jsxs("a",{target:"_blank",href:"https://github.com/EgorasMarket",className:"home_div_section6_area_community_2_links_cont1",children:[jsxRuntimeExports.jsx(default_1$8,{className:"home_div_section6_area_community_2_links_cont1_icon",style:{background:"#fff",color:"#000"}}),jsxRuntimeExports.jsxs("div",{className:"home_div_section6_area_community_2_links_cont1_text",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section6_area_community_2_links_cont1_text_title",children:"Github"}),jsxRuntimeExports.jsx("div",{className:"home_div_section6_area_community_2_links_cont1_text_para",children:"Build with us"})]})]}),jsxRuntimeExports.jsxs("div",{className:"home_div_section6_area_community_2_links_cont1",children:[jsxRuntimeExports.jsx(default_1$7,{className:"home_div_section6_area_community_2_links_cont1_icon",style:{background:"#ff4500"}}),jsxRuntimeExports.jsxs("div",{className:"home_div_section6_area_community_2_links_cont1_text",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section6_area_community_2_links_cont1_text_title",children:"Reddit"}),jsxRuntimeExports.jsx("div",{className:"home_div_section6_area_community_2_links_cont1_text_para",children:"Get Involved"})]})]}),jsxRuntimeExports.jsxs("a",{target:"_blank",href:"https://egoras.medium.com/",className:"home_div_section6_area_community_2_links_cont1",children:[jsxRuntimeExports.jsx("img",{src:"/img/medium_icon.jpeg",alt:"",className:"home_div_section6_area_community_2_links_cont1_img"}),jsxRuntimeExports.jsxs("div",{className:"home_div_section6_area_community_2_links_cont1_text",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section6_area_community_2_links_cont1_text_title",children:"Medium"}),jsxRuntimeExports.jsx("div",{className:"home_div_section6_area_community_2_links_cont1_text_para",children:"Read the latest"})]})]})]})]})}),jsxRuntimeExports.jsxs("div",{className:"home_div_section6_area",children:[jsxRuntimeExports.jsxs("div",{className:"home_div_section6_area_1",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section6_area_1_title",children:"Stay up to date"}),jsxRuntimeExports.jsxs("div",{className:"home_div_section6_area_1_text",children:["Be the first to know about the latest updates and launches.",jsxRuntimeExports.jsxs("div",{className:"home_div_section6_area_1_text_div",children:[" ",jsxRuntimeExports.jsx("a",{href:"https://play.google.com/store/apps/details?id=io.egox.dex&hl=be&gl=US",target:"_blank",children:jsxRuntimeExports.jsxs("button",{className:"header_div_area_2_btn",children:["Get App"," ",jsxRuntimeExports.jsx("img",{src:"/img/play_store_icon.png",alt:"",className:"header_div_area_2_btn_img"})]})}),jsxRuntimeExports.jsxs("button",{className:"header_div_area_2_btn2",children:[jsxRuntimeExports.jsxs("div",{className:"header_div_area_2_btn2_div",children:["Get App ",jsxRuntimeExports.jsx("span",{children:"coming soon"})]}),jsxRuntimeExports.jsx("img",{src:"/img/apple_store_icon.webp",alt:"",className:"header_div_area_2_btn2_img"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"home_div_section6_area_1_input_div",children:[jsxRuntimeExports.jsx("input",{type:"email",name:"",id:"",placeholder:"Email",className:"home_div_section6_area_1_input_div_input"}),jsxRuntimeExports.jsx("button",{className:"home_div_section6_area_1_input_div_btn",children:jsxRuntimeExports.jsx(default_1$c,{})})]})]}),jsxRuntimeExports.jsxs("div",{className:"home_div_section6_area_2",children:[" ",jsxRuntimeExports.jsx(zr,{scene:"https://prod.spline.design/TVLoAomGQBQWA2NS/scene.splinecode",className:"home_div_section1_area_2_spline_scene2"})]})]})]}),jsxRuntimeExports.jsx("img",{src:"/img/test_hero_light3.svg",alt:"",className:"home_div_section1_bg_light3"}),jsxRuntimeExports.jsx("img",{src:"/img/grains_ellipse.png",alt:"",className:"grains_ellipse"}),jsxRuntimeExports.jsx(Grid$1,{})]})]})};/**
 * @remix-run/router v1.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},_extends$2.apply(this,arguments)}var Action;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createBrowserHistory(e){e===void 0&&(e={});function i(a,o){let{pathname:c,search:d,hash:g}=a.location;return createLocation("",{pathname:c,search:d,hash:g},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function s(a,o){return typeof o=="string"?o:createPath(o)}return getUrlBasedHistory(i,s,null,e)}function invariant(e,i){if(e===!1||e===null||typeof e>"u")throw new Error(i)}function warning(e,i){if(!e){typeof console<"u"&&console.warn(i);try{throw new Error(i)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(e,i){return{usr:e.state,key:e.key,idx:i}}function createLocation(e,i,s,a){return s===void 0&&(s=null),_extends$2({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof i=="string"?parsePath(i):i,{state:s,key:i&&i.key||a||createKey()})}function createPath(e){let{pathname:i="/",search:s="",hash:a=""}=e;return s&&s!=="?"&&(i+=s.charAt(0)==="?"?s:"?"+s),a&&a!=="#"&&(i+=a.charAt(0)==="#"?a:"#"+a),i}function parsePath(e){let i={};if(e){let s=e.indexOf("#");s>=0&&(i.hash=e.substr(s),e=e.substr(0,s));let a=e.indexOf("?");a>=0&&(i.search=e.substr(a),e=e.substr(0,a)),e&&(i.pathname=e)}return i}function getUrlBasedHistory(e,i,s,a){a===void 0&&(a={});let{window:o=document.defaultView,v5Compat:c=!1}=a,d=o.history,g=Action.Pop,b=null,j=_e();j==null&&(j=0,d.replaceState(_extends$2({},d.state,{idx:j}),""));function _e(){return(d.state||{idx:null}).idx}function $(){g=Action.Pop;let wt=_e(),yt=wt==null?null:wt-j;j=wt,b&&b({action:g,location:gt.location,delta:yt})}function rt(wt,yt){g=Action.Push;let At=createLocation(gt.location,wt,yt);s&&s(At,wt),j=_e()+1;let Ct=getHistoryState(At,j),Tt=gt.createHref(At);try{d.pushState(Ct,"",Tt)}catch(kt){if(kt instanceof DOMException&&kt.name==="DataCloneError")throw kt;o.location.assign(Tt)}c&&b&&b({action:g,location:gt.location,delta:1})}function st(wt,yt){g=Action.Replace;let At=createLocation(gt.location,wt,yt);s&&s(At,wt),j=_e();let Ct=getHistoryState(At,j),Tt=gt.createHref(At);d.replaceState(Ct,"",Tt),c&&b&&b({action:g,location:gt.location,delta:0})}function ut(wt){let yt=o.location.origin!=="null"?o.location.origin:o.location.href,At=typeof wt=="string"?wt:createPath(wt);return invariant(yt,"No window.location.(origin|href) available to create URL for href: "+At),new URL(At,yt)}let gt={get action(){return g},get location(){return e(o,d)},listen(wt){if(b)throw new Error("A history only accepts one active listener");return o.addEventListener(PopStateEventType,$),b=wt,()=>{o.removeEventListener(PopStateEventType,$),b=null}},createHref(wt){return i(o,wt)},createURL:ut,encodeLocation(wt){let yt=ut(wt);return{pathname:yt.pathname,search:yt.search,hash:yt.hash}},push:rt,replace:st,go(wt){return d.go(wt)}};return gt}var ResultType;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ResultType||(ResultType={}));function matchRoutes(e,i,s){s===void 0&&(s="/");let a=typeof i=="string"?parsePath(i):i,o=stripBasename(a.pathname||"/",s);if(o==null)return null;let c=flattenRoutes(e);rankRouteBranches(c);let d=null;for(let g=0;d==null&&g<c.length;++g)d=matchRouteBranch(c[g],safelyDecodeURI(o));return d}function flattenRoutes(e,i,s,a){i===void 0&&(i=[]),s===void 0&&(s=[]),a===void 0&&(a="");let o=(c,d,g)=>{let b={relativePath:g===void 0?c.path||"":g,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};b.relativePath.startsWith("/")&&(invariant(b.relativePath.startsWith(a),'Absolute route path "'+b.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),b.relativePath=b.relativePath.slice(a.length));let j=joinPaths([a,b.relativePath]),_e=s.concat(b);c.children&&c.children.length>0&&(invariant(c.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+j+'".')),flattenRoutes(c.children,i,_e,j)),!(c.path==null&&!c.index)&&i.push({path:j,score:computeScore(j,c.index),routesMeta:_e})};return e.forEach((c,d)=>{var g;if(c.path===""||!((g=c.path)!=null&&g.includes("?")))o(c,d);else for(let b of explodeOptionalSegments(c.path))o(c,d,b)}),i}function explodeOptionalSegments(e){let i=e.split("/");if(i.length===0)return[];let[s,...a]=i,o=s.endsWith("?"),c=s.replace(/\?$/,"");if(a.length===0)return o?[c,""]:[c];let d=explodeOptionalSegments(a.join("/")),g=[];return g.push(...d.map(b=>b===""?c:[c,b].join("/"))),o&&g.push(...d),g.map(b=>e.startsWith("/")&&b===""?"/":b)}function rankRouteBranches(e){e.sort((i,s)=>i.score!==s.score?s.score-i.score:compareIndexes(i.routesMeta.map(a=>a.childrenIndex),s.routesMeta.map(a=>a.childrenIndex)))}const paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=e=>e==="*";function computeScore(e,i){let s=e.split("/"),a=s.length;return s.some(isSplat)&&(a+=splatPenalty),i&&(a+=indexRouteValue),s.filter(o=>!isSplat(o)).reduce((o,c)=>o+(paramRe.test(c)?dynamicSegmentValue:c===""?emptySegmentValue:staticSegmentValue),a)}function compareIndexes(e,i){return e.length===i.length&&e.slice(0,-1).every((a,o)=>a===i[o])?e[e.length-1]-i[i.length-1]:0}function matchRouteBranch(e,i){let{routesMeta:s}=e,a={},o="/",c=[];for(let d=0;d<s.length;++d){let g=s[d],b=d===s.length-1,j=o==="/"?i:i.slice(o.length)||"/",_e=matchPath({path:g.relativePath,caseSensitive:g.caseSensitive,end:b},j);if(!_e)return null;Object.assign(a,_e.params);let $=g.route;c.push({params:a,pathname:joinPaths([o,_e.pathname]),pathnameBase:normalizePathname(joinPaths([o,_e.pathnameBase])),route:$}),_e.pathnameBase!=="/"&&(o=joinPaths([o,_e.pathnameBase]))}return c}function matchPath(e,i){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,a]=compilePath(e.path,e.caseSensitive,e.end),o=i.match(s);if(!o)return null;let c=o[0],d=c.replace(/(.)\/+$/,"$1"),g=o.slice(1);return{params:a.reduce((j,_e,$)=>{let{paramName:rt,isOptional:st}=_e;if(rt==="*"){let gt=g[$]||"";d=c.slice(0,c.length-gt.length).replace(/(.)\/+$/,"$1")}const ut=g[$];return st&&!ut?j[rt]=void 0:j[rt]=safelyDecodeURIComponent(ut||"",rt),j},{}),pathname:c,pathnameBase:d,pattern:e}}function compilePath(e,i,s){i===void 0&&(i=!1),s===void 0&&(s=!0),warning(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let a=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,g,b)=>(a.push({paramName:g,isOptional:b!=null}),b?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(a.push({paramName:"*"}),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,i?void 0:"i"),a]}function safelyDecodeURI(e){try{return decodeURI(e)}catch(i){return warning(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+i+").")),e}}function safelyDecodeURIComponent(e,i){try{return decodeURIComponent(e)}catch(s){return warning(!1,'The value for the URL param "'+i+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+s+").")),e}}function stripBasename(e,i){if(i==="/")return e;if(!e.toLowerCase().startsWith(i.toLowerCase()))return null;let s=i.endsWith("/")?i.length-1:i.length,a=e.charAt(s);return a&&a!=="/"?null:e.slice(s)||"/"}const joinPaths=e=>e.join("/").replace(/\/\/+/g,"/"),normalizePathname=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/");function isRouteErrorResponse(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const validMutationMethodsArr=["post","put","patch","delete"];new Set(validMutationMethodsArr);const validRequestMethodsArr=["get",...validMutationMethodsArr];new Set(validRequestMethodsArr);/**
 * React Router v6.21.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},_extends$1.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant(!1),reactExports.useContext(LocationContext).location}function useRoutes(e,i){return useRoutesImpl(e,i)}function useRoutesImpl(e,i,s,a){useInRouterContext()||invariant(!1);let{navigator:o}=reactExports.useContext(NavigationContext),{matches:c}=reactExports.useContext(RouteContext),d=c[c.length-1],g=d?d.params:{};d&&d.pathname;let b=d?d.pathnameBase:"/";d&&d.route;let j=useLocation(),_e;if(i){var $;let wt=typeof i=="string"?parsePath(i):i;b==="/"||($=wt.pathname)!=null&&$.startsWith(b)||invariant(!1),_e=wt}else _e=j;let rt=_e.pathname||"/",st=b==="/"?rt:rt.slice(b.length)||"/",ut=matchRoutes(e,{pathname:st}),gt=_renderMatches(ut&&ut.map(wt=>Object.assign({},wt,{params:Object.assign({},g,wt.params),pathname:joinPaths([b,o.encodeLocation?o.encodeLocation(wt.pathname).pathname:wt.pathname]),pathnameBase:wt.pathnameBase==="/"?b:joinPaths([b,o.encodeLocation?o.encodeLocation(wt.pathnameBase).pathname:wt.pathnameBase])})),c,s,a);return i&&gt?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$1({pathname:"/",search:"",hash:"",state:null,key:"default"},_e),navigationType:Action.Pop}},gt):gt}function DefaultErrorComponent(){let e=useRouteError(),i=isRouteErrorResponse(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},i),s?reactExports.createElement("pre",{style:o},s):null,null)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,s){return s.location!==i.location||s.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:s.error,location:s.location,revalidation:i.revalidation||s.revalidation}}componentDidCatch(i,s){console.error("React Router caught the following error during render",i,s)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(e){let{routeContext:i,match:s,children:a}=e,o=reactExports.useContext(DataRouterContext);return o&&o.static&&o.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=s.route.id),reactExports.createElement(RouteContext.Provider,{value:i},a)}function _renderMatches(e,i,s,a){var o;if(i===void 0&&(i=[]),s===void 0&&(s=null),a===void 0&&(a=null),e==null){var c;if((c=s)!=null&&c.errors)e=s.matches;else return null}let d=e,g=(o=s)==null?void 0:o.errors;if(g!=null){let _e=d.findIndex($=>$.route.id&&(g==null?void 0:g[$.route.id]));_e>=0||invariant(!1),d=d.slice(0,Math.min(d.length,_e+1))}let b=!1,j=-1;if(s&&a&&a.v7_partialHydration)for(let _e=0;_e<d.length;_e++){let $=d[_e];if(($.route.HydrateFallback||$.route.hydrateFallbackElement)&&(j=_e),$.route.id){let{loaderData:rt,errors:st}=s,ut=$.route.loader&&rt[$.route.id]===void 0&&(!st||st[$.route.id]===void 0);if($.route.lazy||ut){b=!0,j>=0?d=d.slice(0,j+1):d=[d[0]];break}}}return d.reduceRight((_e,$,rt)=>{let st,ut=!1,gt=null,wt=null;s&&(st=g&&$.route.id?g[$.route.id]:void 0,gt=$.route.errorElement||defaultErrorElement,b&&(j<0&&rt===0?(warningOnce("route-fallback",!1),ut=!0,wt=null):j===rt&&(ut=!0,wt=$.route.hydrateFallbackElement||null)));let yt=i.concat(d.slice(0,rt+1)),At=()=>{let Ct;return st?Ct=gt:ut?Ct=wt:$.route.Component?Ct=reactExports.createElement($.route.Component,null):$.route.element?Ct=$.route.element:Ct=_e,reactExports.createElement(RenderedRoute,{match:$,routeContext:{outlet:_e,matches:yt,isDataRoute:s!=null},children:Ct})};return s&&($.route.ErrorBoundary||$.route.errorElement||rt===0)?reactExports.createElement(RenderErrorBoundary,{location:s.location,revalidation:s.revalidation,component:gt,error:st,children:At(),routeContext:{outlet:null,matches:yt,isDataRoute:!0}}):At()},null)}var DataRouterStateHook$1=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(DataRouterStateHook$1||{});function useDataRouterState(e){let i=reactExports.useContext(DataRouterStateContext);return i||invariant(!1),i}function useRouteContext(e){let i=reactExports.useContext(RouteContext);return i||invariant(!1),i}function useCurrentRouteId(e){let i=useRouteContext(),s=i.matches[i.matches.length-1];return s.route.id||invariant(!1),s.route.id}function useRouteError(){var e;let i=reactExports.useContext(RouteErrorContext),s=useDataRouterState(DataRouterStateHook$1.UseRouteError),a=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return i!==void 0?i:(e=s.errors)==null?void 0:e[a]}const alreadyWarned={};function warningOnce(e,i,s){!i&&!alreadyWarned[e]&&(alreadyWarned[e]=!0)}function Route(e){invariant(!1)}function Router(e){let{basename:i="/",children:s=null,location:a,navigationType:o=Action.Pop,navigator:c,static:d=!1,future:g}=e;useInRouterContext()&&invariant(!1);let b=i.replace(/^\/*/,"/"),j=reactExports.useMemo(()=>({basename:b,navigator:c,static:d,future:_extends$1({v7_relativeSplatPath:!1},g)}),[b,g,c,d]);typeof a=="string"&&(a=parsePath(a));let{pathname:_e="/",search:$="",hash:rt="",state:st=null,key:ut="default"}=a,gt=reactExports.useMemo(()=>{let wt=stripBasename(_e,b);return wt==null?null:{location:{pathname:wt,search:$,hash:rt,state:st,key:ut},navigationType:o}},[b,_e,$,rt,st,ut,o]);return gt==null?null:reactExports.createElement(NavigationContext.Provider,{value:j},reactExports.createElement(LocationContext.Provider,{children:s,value:gt}))}function Routes(e){let{children:i,location:s}=e;return useRoutes(createRoutesFromChildren(i),s)}new Promise(()=>{});function createRoutesFromChildren(e,i){i===void 0&&(i=[]);let s=[];return reactExports.Children.forEach(e,(a,o)=>{if(!reactExports.isValidElement(a))return;let c=[...i,o];if(a.type===reactExports.Fragment){s.push.apply(s,createRoutesFromChildren(a.props.children,c));return}a.type!==Route&&invariant(!1),!a.props.index||!a.props.children||invariant(!1);let d={id:a.props.id||c.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(d.children=createRoutesFromChildren(a.props.children,c)),s.push(d)}),s}/**
 * React Router DOM v6.21.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const START_TRANSITION="startTransition",startTransitionImpl=React$2[START_TRANSITION];function BrowserRouter(e){let{basename:i,children:s,future:a,window:o}=e,c=reactExports.useRef();c.current==null&&(c.current=createBrowserHistory({window:o,v5Compat:!0}));let d=c.current,[g,b]=reactExports.useState({action:d.action,location:d.location}),{v7_startTransition:j}=a||{},_e=reactExports.useCallback($=>{j&&startTransitionImpl?startTransitionImpl(()=>b($)):b($)},[b,j]);return reactExports.useLayoutEffect(()=>d.listen(_e),[d,_e]),reactExports.createElement(Router,{basename:i,children:s,location:g.location,navigationType:g.action,navigator:d,future:a})}var DataRouterHook;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function noop$1(){}function returnTrue(){return!0}function charIsNumber(e){return!!(e||"").match(/\d/)}function isNil(e){return e==null}function escapeRegExp(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function getThousandsGroupRegex(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function applyThousandSeparator(e,i,s){var a=getThousandsGroupRegex(s),o=e.search(/[1-9]/);return o=o===-1?e.length:o,e.substring(0,o)+e.substring(o,e.length).replace(a,"$1"+i)}function splitDecimal(e,i){i===void 0&&(i=!0);var s=e[0]==="-",a=s&&i;e=e.replace("-","");var o=e.split("."),c=o[0],d=o[1]||"";return{beforeDecimal:c,afterDecimal:d,hasNagation:s,addNegation:a}}function fixLeadingZero(e){if(!e)return e;var i=e[0]==="-";i&&(e=e.substring(1,e.length));var s=e.split("."),a=s[0].replace(/^0+/,"")||"0",o=s[1]||"";return(i?"-":"")+a+(o?"."+o:"")}function limitToScale(e,i,s){for(var a="",o=s?"0":"",c=0;c<=i-1;c++)a+=e[c]||o;return a}function repeat(e,i){return Array(i+1).join(e)}function toNumericString(e){e+="";var i=e[0]==="-"?"-":"";i&&(e=e.substring(1));var s=e.split(/[eE]/g),a=s[0],o=s[1];if(o=Number(o),!o)return i+a;a=a.replace(".","");var c=1+o,d=a.length;return c<0?a="0."+repeat("0",Math.abs(c))+a:c>=d?a=a+repeat("0",c-d):a=(a.substring(0,c)||"0")+"."+a.substring(c),i+a}function roundToPrecision(e,i,s){if(["","-"].indexOf(e)!==-1)return e;var a=e.indexOf(".")!==-1&&i,o=splitDecimal(e),c=o.beforeDecimal,d=o.afterDecimal,g=o.hasNagation,b=parseFloat("0."+(d||"0")),j=d.length<=i?"0."+d:b.toFixed(i),_e=j.split("."),$=c.split("").reverse().reduce(function(gt,wt,yt){return gt.length>yt?(Number(gt[0])+Number(wt)).toString()+gt.substring(1,gt.length):wt+gt},_e[0]),rt=limitToScale(_e[1]||"",Math.min(i,d.length),s),st=g?"-":"",ut=a?".":"";return""+st+$+ut+rt}function setCaretPosition(e,i){if(e.value=e.value,e!==null){if(e.createTextRange){var s=e.createTextRange();return s.move("character",i),s.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(i,i),!0):(e.focus(),!1)}}function findChangedIndex(e,i){for(var s=0,a=0,o=e.length,c=i.length;e[s]===i[s]&&s<o;)s++;for(;e[o-1-a]===i[c-1-a]&&c-a>s&&o-a>s;)a++;return{start:s,end:o-a}}function clamp(e,i,s){return Math.min(Math.max(e,i),s)}function getCurrentCaretPosition(e){return Math.max(e.selectionStart,e.selectionEnd)}function addInputMode(e){return e||typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function objectWithoutProperties(e,i){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&i.indexOf(a)===-1&&(s[a]=e[a]);return s}var defaultProps={displayType:"input",decimalSeparator:".",thousandsGroupStyle:"thousand",fixedDecimalScale:!1,prefix:"",suffix:"",allowNegative:!0,allowEmptyFormatting:!1,allowLeadingZeros:!1,isNumericString:!1,type:"text",onValueChange:noop$1,onChange:noop$1,onKeyDown:noop$1,onMouseUp:noop$1,onFocus:noop$1,onBlur:noop$1,isAllowed:returnTrue},NumberFormat=function(e){function i(s){e.call(this,s);var a=s.defaultValue;this.validateProps();var o=this.formatValueProp(a);this.state={value:o,numAsString:this.removeFormatting(o),mounted:!1},this.selectionBeforeInput={selectionStart:0,selectionEnd:0},this.onChange=this.onChange.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onFocus=this.onFocus.bind(this),this.onBlur=this.onBlur.bind(this)}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.componentDidMount=function(){this.setState({mounted:!0})},i.prototype.componentDidUpdate=function(a){this.updateValueIfRequired(a)},i.prototype.componentWillUnmount=function(){clearTimeout(this.focusTimeout),clearTimeout(this.caretPositionTimeout)},i.prototype.updateValueIfRequired=function(a){var o=this,c=o.props,d=o.state,g=o.focusedElm,b=d.value,j=d.numAsString;if(j===void 0&&(j=""),a!==c){this.validateProps();var _e=this.formatNumString(j),$=isNil(c.value)?_e:this.formatValueProp(),rt=this.removeFormatting($),st=parseFloat(rt),ut=parseFloat(j);((!isNaN(st)||!isNaN(ut))&&st!==ut||_e!==b||g===null&&$!==b)&&this.updateValue({formattedValue:$,numAsString:rt,input:g,source:"prop",event:null})}},i.prototype.getFloatString=function(a){a===void 0&&(a="");var o=this.props,c=o.decimalScale,d=this.getSeparators(),g=d.decimalSeparator,b=this.getNumberRegex(!0),j=a[0]==="-";j&&(a=a.replace("-","")),g&&c===0&&(a=a.split(g)[0]),a=(a.match(b)||[]).join("").replace(g,".");var _e=a.indexOf(".");return _e!==-1&&(a=a.substring(0,_e)+"."+a.substring(_e+1,a.length).replace(new RegExp(escapeRegExp(g),"g"),"")),j&&(a="-"+a),a},i.prototype.getNumberRegex=function(a,o){var c=this.props,d=c.format,g=c.decimalScale,b=c.customNumerals,j=this.getSeparators(),_e=j.decimalSeparator;return new RegExp("[0-9"+(b?b.join(""):"")+"]"+(_e&&g!==0&&!o&&!d?"|"+escapeRegExp(_e):""),a?"g":void 0)},i.prototype.getSeparators=function(){var a=this.props,o=a.decimalSeparator,c=this.props,d=c.thousandSeparator,g=c.allowedDecimalSeparators;return d===!0&&(d=","),g||(g=[o,"."]),{decimalSeparator:o,thousandSeparator:d,allowedDecimalSeparators:g}},i.prototype.getMaskAtIndex=function(a){var o=this.props,c=o.mask;return c===void 0&&(c=" "),typeof c=="string"?c:c[a]||" "},i.prototype.getValueObject=function(a,o){var c=parseFloat(o);return{formattedValue:a,value:o,floatValue:isNaN(c)?void 0:c}},i.prototype.validateProps=function(){var a=this.props,o=a.mask,c=this.getSeparators(),d=c.decimalSeparator,g=c.thousandSeparator;if(d===g)throw new Error(`
          Decimal separator can't be same as thousand separator.
          thousandSeparator: `+g+` (thousandSeparator = {true} is same as thousandSeparator = ",")
          decimalSeparator: `+d+` (default value for decimalSeparator is .)
       `);if(o){var b=o==="string"?o:o.toString();if(b.match(/\d/g))throw new Error(`
          Mask `+o+` should not contain numeric character;
        `)}},i.prototype.setPatchedCaretPosition=function(a,o,c){setCaretPosition(a,o),this.caretPositionTimeout=setTimeout(function(){a.value===c&&setCaretPosition(a,o)},0)},i.prototype.correctCaretPosition=function(a,o,c){var d=this.props,g=d.prefix,b=d.suffix,j=d.format;if(a==="")return 0;if(o=clamp(o,0,a.length),!j){var _e=a[0]==="-";return clamp(o,g.length+(_e?1:0),a.length-b.length)}if(typeof j=="function"||j[o]==="#"&&charIsNumber(a[o])||j[o-1]==="#"&&charIsNumber(a[o-1]))return o;var $=j.indexOf("#"),rt=j.lastIndexOf("#");o=clamp(o,$,rt+1);for(var st=j.substring(o,j.length).indexOf("#"),ut=o,gt=o+(st===-1?0:st);ut>$&&(j[ut]!=="#"||!charIsNumber(a[ut]));)ut-=1;var wt=!charIsNumber(a[gt])||c==="left"&&o!==$||o-ut<gt-o;return wt?charIsNumber(a[ut])?ut+1:ut:gt},i.prototype.getCaretPosition=function(a,o,c){var d=this.props,g=d.format,b=this.state.value,j=this.getNumberRegex(!0),_e=(a.match(j)||[]).join(""),$=(o.match(j)||[]).join(""),rt,st;for(rt=0,st=0;st<c;st++){var ut=a[st]||"",gt=o[rt]||"";if(!(!ut.match(j)&&ut!==gt)&&!(ut==="0"&&gt.match(j)&&gt!=="0"&&_e.length!==$.length)){for(;ut!==o[rt]&&rt<o.length;)rt++;rt++}}return typeof g=="string"&&!b&&(rt=o.length),rt=this.correctCaretPosition(o,rt),rt},i.prototype.removePrefixAndSuffix=function(a){var o=this.props,c=o.format,d=o.prefix,g=o.suffix;if(!c&&a){var b=a[0]==="-";b&&(a=a.substring(1,a.length)),a=d&&a.indexOf(d)===0?a.substring(d.length,a.length):a;var j=a.lastIndexOf(g);a=g&&j!==-1&&j===a.length-g.length?a.substring(0,j):a,b&&(a="-"+a)}return a},i.prototype.removePatternFormatting=function(a){for(var o=this.props,c=o.format,d=c.split("#").filter(function(st){return st!==""}),g=0,b="",j=0,_e=d.length;j<=_e;j++){var $=d[j]||"",rt=j===_e?a.length:a.indexOf($,g);if(rt===-1){b=a;break}else b+=a.substring(g,rt),g=rt+$.length}return(b.match(this.getNumberRegex(!0))||[]).join("")},i.prototype.removeFormatting=function(a){var o=this.props,c=o.format,d=o.removeFormatting;return a&&(c?typeof c=="string"?a=this.removePatternFormatting(a):typeof d=="function"?a=d(a):a=(a.match(this.getNumberRegex(!0))||[]).join(""):(a=this.removePrefixAndSuffix(a),a=this.getFloatString(a)),a)},i.prototype.formatWithPattern=function(a){for(var o=this.props,c=o.format,d=0,g=c.split(""),b=0,j=c.length;b<j;b++)c[b]==="#"&&(g[b]=a[d]||this.getMaskAtIndex(d),d+=1);return g.join("")},i.prototype.formatAsNumber=function(a){var o=this.props,c=o.decimalScale,d=o.fixedDecimalScale,g=o.prefix,b=o.suffix,j=o.allowNegative,_e=o.thousandsGroupStyle,$=this.getSeparators(),rt=$.thousandSeparator,st=$.decimalSeparator,ut=a.indexOf(".")!==-1||c&&d,gt=splitDecimal(a,j),wt=gt.beforeDecimal,yt=gt.afterDecimal,At=gt.addNegation;return c!==void 0&&(yt=limitToScale(yt,c,d)),rt&&(wt=applyThousandSeparator(wt,rt,_e)),g&&(wt=g+wt),b&&(yt=yt+b),At&&(wt="-"+wt),a=wt+(ut&&st||"")+yt,a},i.prototype.formatNumString=function(a){a===void 0&&(a="");var o=this.props,c=o.format,d=o.allowEmptyFormatting,g=o.customNumerals,b=a;if(g&&g.length===10){var j=new RegExp("["+g.join("")+"]","g");b=a.replace(j,function(_e){return g.indexOf(_e).toString()})}return a===""&&!d?b="":a==="-"&&!c?b="-":typeof c=="string"?b=this.formatWithPattern(b):typeof c=="function"?b=c(b):b=this.formatAsNumber(b),b},i.prototype.formatValueProp=function(a){var o=this.props,c=o.format,d=o.decimalScale,g=o.fixedDecimalScale,b=o.allowEmptyFormatting,j=this.props,_e=j.value,$=j.isNumericString;_e=isNil(_e)?a:_e;var rt=!_e&&_e!==0;if(rt&&b&&(_e=""),rt&&!b)return"";typeof _e=="number"&&(_e=toNumericString(_e),$=!0),_e==="Infinity"&&$&&(_e=""),$&&!c&&typeof d=="number"&&(_e=roundToPrecision(_e,d,g));var st=$?this.formatNumString(_e):this.formatInput(_e);return st},i.prototype.formatNegation=function(a){a===void 0&&(a="");var o=this.props,c=o.allowNegative,d=new RegExp("(-)"),g=new RegExp("(-)(.)*(-)"),b=d.test(a),j=g.test(a);return a=a.replace(/-/g,""),b&&!j&&c&&(a="-"+a),a},i.prototype.formatInput=function(a){a===void 0&&(a="");var o=this.props,c=o.format;return c||(a=this.removePrefixAndSuffix(a),a=this.formatNegation(a)),a=this.removeFormatting(a),this.formatNumString(a)},i.prototype.isCharacterAFormat=function(a,o){var c=this.props,d=c.format,g=c.prefix,b=c.suffix,j=c.decimalScale,_e=c.fixedDecimalScale,$=this.getSeparators(),rt=$.decimalSeparator;return!!(typeof d=="string"&&d[a]!=="#"||!d&&(a<g.length||a>=o.length-b.length||j&&_e&&o[a]===rt))},i.prototype.correctInputValue=function(a,o,c){var d=this,g=this.props,b=g.format,j=g.allowNegative,_e=g.prefix,$=g.suffix,rt=g.decimalScale,st=this.getSeparators(),ut=st.allowedDecimalSeparators,gt=st.decimalSeparator,wt=this.state.numAsString||"",yt=this.selectionBeforeInput,At=yt.selectionStart,Ct=yt.selectionEnd,Tt=findChangedIndex(o,c),kt=Tt.start,Pt=Tt.end;if(!b&&kt===Pt&&ut.indexOf(c[At])!==-1){var It=rt===0?"":gt;return c.substr(0,At)+It+c.substr(At+1,c.length)}var Lt=b?0:_e.length,Nt=o.length-(b?0:$.length);if(c.length>o.length||!c.length||kt===Pt||At===0&&Ct===o.length||kt===0&&Pt===o.length||At===Lt&&Ct===Nt)return c;var Ht=o.substr(kt,Pt-kt),dr=!![].concat(Ht).find(function(un,Zn){return d.isCharacterAFormat(Zn+kt,o)});if(dr){var hs=o.substr(kt),_s={},ds=[];[].concat(hs).forEach(function(un,Zn){d.isCharacterAFormat(Zn+kt,o)?_s[Zn]=un:Zn>Ht.length-1&&ds.push(un)}),Object.keys(_s).forEach(function(un){ds.length>un?ds.splice(un,0,_s[un]):ds.push(_s[un])}),c=o.substr(0,kt)+ds.join("")}if(!b){var Nn=this.removeFormatting(c),us=splitDecimal(Nn,j),hn=us.beforeDecimal,Ft=us.afterDecimal,Gr=us.addNegation,gn=a<c.indexOf(gt)+1;if(Nn.length<wt.length&&gn&&hn===""&&!parseFloat(Ft))return Gr?"-":""}return c},i.prototype.updateValue=function(a){var o=a.formattedValue,c=a.input,d=a.setCaretPosition;d===void 0&&(d=!0);var g=a.source,b=a.event,j=a.numAsString,_e=a.caretPos,$=this.props,rt=$.onValueChange,st=this.state,ut=st.value;if(c){if(_e===void 0&&d){var gt=a.inputValue||c.value,wt=getCurrentCaretPosition(c);c.value=o,_e=this.getCaretPosition(gt,o,wt)}c.value=o,d&&this.setPatchedCaretPosition(c,_e,o)}j===void 0&&(j=this.removeFormatting(o)),o!==ut&&(this.setState({value:o,numAsString:j}),rt(this.getValueObject(o,j),{event:b,source:g}))},i.prototype.onChange=function(a){var o=a.target,c=o.value,d=this,g=d.state,b=d.props,j=b.isAllowed,_e=g.value||"",$=getCurrentCaretPosition(o);c=this.correctInputValue($,_e,c);var rt=this.formatInput(c)||"",st=this.removeFormatting(rt),ut=this.getValueObject(rt,st),gt=j(ut);gt||(rt=_e),this.updateValue({formattedValue:rt,numAsString:st,inputValue:c,input:o,event:a,source:"event"}),gt&&b.onChange(a)},i.prototype.onBlur=function(a){var o=this,c=o.props,d=o.state,g=c.format,b=c.onBlur,j=c.allowLeadingZeros,_e=d.numAsString,$=d.value;if(this.focusedElm=null,clearTimeout(this.focusTimeout),clearTimeout(this.caretPositionTimeout),!g){isNaN(parseFloat(_e))&&(_e=""),j||(_e=fixLeadingZero(_e));var rt=this.formatNumString(_e);if(rt!==$){this.updateValue({formattedValue:rt,numAsString:_e,input:a.target,setCaretPosition:!1,event:a,source:"event"}),b(a);return}}b(a)},i.prototype.onKeyDown=function(a){var o=a.target,c=a.key,d=o.selectionStart,g=o.selectionEnd,b=o.value;b===void 0&&(b="");var j,_e=this.props,$=_e.decimalScale,rt=_e.fixedDecimalScale,st=_e.prefix,ut=_e.suffix,gt=_e.format,wt=_e.onKeyDown,yt=$!==void 0&&rt,At=this.getNumberRegex(!1,yt),Ct=new RegExp("-"),Tt=typeof gt=="string";if(this.selectionBeforeInput={selectionStart:d,selectionEnd:g},c==="ArrowLeft"||c==="Backspace"?j=d-1:c==="ArrowRight"?j=d+1:c==="Delete"&&(j=d),j===void 0||d!==g){wt(a);return}var kt=j,Pt=Tt?gt.indexOf("#"):st.length,It=Tt?gt.lastIndexOf("#")+1:b.length-ut.length;if(c==="ArrowLeft"||c==="ArrowRight"){var Lt=c==="ArrowLeft"?"left":"right";kt=this.correctCaretPosition(b,j,Lt)}else if(c==="Delete"&&!At.test(b[j])&&!Ct.test(b[j]))for(;!At.test(b[kt])&&kt<It;)kt++;else if(c==="Backspace"&&!At.test(b[j])){if(d<=Pt+1&&b[0]==="-"&&typeof gt>"u"){var Nt=b.substring(1);this.updateValue({formattedValue:Nt,caretPos:kt,input:o,event:a,source:"event"})}else if(!Ct.test(b[j])){for(;!At.test(b[kt-1])&&kt>Pt;)kt--;kt=this.correctCaretPosition(b,kt,"left")}}(kt!==j||j<Pt||j>It)&&(a.preventDefault(),this.setPatchedCaretPosition(o,kt,b)),a.isUnitTestRun&&this.setPatchedCaretPosition(o,kt,b),wt(a)},i.prototype.onMouseUp=function(a){var o=a.target,c=o.selectionStart,d=o.selectionEnd,g=o.value;if(g===void 0&&(g=""),c===d){var b=this.correctCaretPosition(g,c);b!==c&&this.setPatchedCaretPosition(o,b,g)}this.props.onMouseUp(a)},i.prototype.onFocus=function(a){var o=this;a.persist(),this.focusedElm=a.target,this.focusTimeout=setTimeout(function(){var c=a.target,d=c.selectionStart,g=c.selectionEnd,b=c.value;b===void 0&&(b="");var j=o.correctCaretPosition(b,d);j!==d&&!(d===0&&g===b.length)&&o.setPatchedCaretPosition(c,j,b),o.props.onFocus(a)},0)},i.prototype.render=function(){var a=this.props,o=a.type,c=a.displayType,d=a.customInput,g=a.renderText,b=a.getInputRef,j=a.format;a.thousandSeparator,a.decimalSeparator,a.allowedDecimalSeparators,a.thousandsGroupStyle,a.decimalScale,a.fixedDecimalScale,a.prefix,a.suffix,a.removeFormatting,a.mask,a.defaultValue,a.isNumericString,a.allowNegative,a.allowEmptyFormatting,a.allowLeadingZeros,a.onValueChange,a.isAllowed,a.customNumerals,a.onChange,a.onKeyDown,a.onMouseUp,a.onFocus,a.onBlur,a.value;var _e=objectWithoutProperties(a,["type","displayType","customInput","renderText","getInputRef","format","thousandSeparator","decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","decimalScale","fixedDecimalScale","prefix","suffix","removeFormatting","mask","defaultValue","isNumericString","allowNegative","allowEmptyFormatting","allowLeadingZeros","onValueChange","isAllowed","customNumerals","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value"]),$=_e,rt=this.state,st=rt.value,ut=rt.mounted,gt=ut&&addInputMode(j)?"numeric":void 0,wt=Object.assign({inputMode:gt},$,{type:o,value:st,onChange:this.onChange,onKeyDown:this.onKeyDown,onMouseUp:this.onMouseUp,onFocus:this.onFocus,onBlur:this.onBlur});if(c==="text")return g?g(st,$)||null:React$1.createElement("span",Object.assign({},$,{ref:b}),st);if(d){var yt=d;return React$1.createElement(yt,Object.assign({},wt,{ref:b}))}return React$1.createElement("input",Object.assign({},wt,{ref:b}))},i}(React$1.Component);NumberFormat.defaultProps=defaultProps;const numberWithCommas=e=>jsxRuntimeExports.jsx(NumberFormat,{value:e,displayType:"text",thousandSeparator:!0}),Egc=()=>{const[e,i]=reactExports.useState(0);return reactExports.useEffect(async s=>{await fetch("https://api.coingecko.com/api/v3/simple/price?ids=egoras-credit&vs_currencies=usd&include_market_cap=false&include_24hr_vol=false&include_24hr_change=true&include_last_updated_at=true").then(o=>o.json()).then(o=>{const c=o["egoras-credit"].usd;console.log(c),i(c==="0"?"0":c)})},[]),jsxRuntimeExports.jsxs("div",{className:"egox_token_div",children:[jsxRuntimeExports.jsxs("section",{className:"egox_token_div_section1",children:[jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section1area",children:[jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section1area_cont1",children:[jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section1area1",children:[jsxRuntimeExports.jsx("div",{className:"egox_token_div_section1area1_title",children:"Egochain (EGC) coin"}),jsxRuntimeExports.jsx("div",{className:"egox_token_div_section1area1_para",children:"A Powerhouse for Innovation."})]}),jsxRuntimeExports.jsx("div",{className:"egox_token_div_section1area2",children:jsxRuntimeExports.jsx("img",{src:"/img/1_inch_token_image_dummy.png",alt:"",className:"egox_token_div_section1area2_img"})})]}),jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section1area_cont2",children:[jsxRuntimeExports.jsxs("div",{className:"home_div_section1_area_stats_div1",children:[jsxRuntimeExports.jsxs("div",{className:"home_div_section1_area_stats_div1_title",children:["$",e]}),jsxRuntimeExports.jsx("div",{className:"home_div_section1_area_stats_div1_para",children:"Current Price"})]}),jsxRuntimeExports.jsxs("div",{className:"home_div_section1_area_stats_div1",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section1_area_stats_div1_title",children:"74k"}),jsxRuntimeExports.jsx("div",{className:"home_div_section1_area_stats_div1_para",children:"Circulating Supply"})]}),jsxRuntimeExports.jsxs("div",{className:"home_div_section1_area_stats_div1",children:[jsxRuntimeExports.jsxs("div",{className:"home_div_section1_area_stats_div1_title",children:["$",numberWithCommas((e*74467.35244).toFixed(2))]}),jsxRuntimeExports.jsx("div",{className:"home_div_section1_area_stats_div1_para",children:"Market Cap"})]}),jsxRuntimeExports.jsxs("div",{className:"home_div_section1_area_stats_div1",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section1_area_stats_div1_title",children:"35k"}),jsxRuntimeExports.jsx("div",{className:"home_div_section1_area_stats_div1_para",children:"Holders"})]})]})]})}),jsxRuntimeExports.jsx("img",{src:"/img/grains_ellipse.png",alt:"",className:"grains_ellipse"})]}),jsxRuntimeExports.jsxs("section",{className:"egox_token_div_section2",children:[jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section2_area",children:[jsxRuntimeExports.jsx("div",{className:"egox_token_div_section2_area_title",children:"EGC Utility"}),jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_paragraph",children:"Egochain offers a compelling blend of democratic governance and token scarcity. EGC holders directly influence the platform's trajectory through their votes for the Egochain Committee, a community-driven body responsible for the blockchain's stability and performance. Composed of elected members and consensus nodes, this committee ensures network liveliness and optimizes critical parameters. Additionally, EGC's indivisible units and limited total supply (74,467.35244 EGC) contribute to its distinct scarcity, enhancing its value proposition within the blockchain ecosystem."})]})}),jsxRuntimeExports.jsx("img",{src:"/img/grains_ellipse.png",alt:"",className:"grains_ellipse"})]})]})};var Menu={},_interopRequireDefault$6=interopRequireDefaultExports;Object.defineProperty(Menu,"__esModule",{value:!0});var default_1$6=Menu.default=void 0,_createSvgIcon$6=_interopRequireDefault$6(requireCreateSvgIcon()),_jsxRuntime$6=jsxRuntimeExports;default_1$6=Menu.default=(0,_createSvgIcon$6.default)((0,_jsxRuntime$6.jsx)("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"}),"Menu");var Close={},_interopRequireDefault$5=interopRequireDefaultExports;Object.defineProperty(Close,"__esModule",{value:!0});var default_1$5=Close.default=void 0,_createSvgIcon$5=_interopRequireDefault$5(requireCreateSvgIcon()),_jsxRuntime$5=jsxRuntimeExports;default_1$5=Close.default=(0,_createSvgIcon$5.default)((0,_jsxRuntime$5.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");var CallMade={},_interopRequireDefault$4=interopRequireDefaultExports;Object.defineProperty(CallMade,"__esModule",{value:!0});var default_1$4=CallMade.default=void 0,_createSvgIcon$4=_interopRequireDefault$4(requireCreateSvgIcon()),_jsxRuntime$4=jsxRuntimeExports;default_1$4=CallMade.default=(0,_createSvgIcon$4.default)((0,_jsxRuntime$4.jsx)("path",{d:"M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5z"}),"CallMade");var KeyboardArrowDown={},_interopRequireDefault$3=interopRequireDefaultExports;Object.defineProperty(KeyboardArrowDown,"__esModule",{value:!0});var default_1$3=KeyboardArrowDown.default=void 0,_createSvgIcon$3=_interopRequireDefault$3(requireCreateSvgIcon()),_jsxRuntime$3=jsxRuntimeExports;default_1$3=KeyboardArrowDown.default=(0,_createSvgIcon$3.default)((0,_jsxRuntime$3.jsx)("path",{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6z"}),"KeyboardArrowDown");var Info={},_interopRequireDefault$2=interopRequireDefaultExports;Object.defineProperty(Info,"__esModule",{value:!0});var default_1$2=Info.default=void 0,_createSvgIcon$2=_interopRequireDefault$2(requireCreateSvgIcon()),_jsxRuntime$2=jsxRuntimeExports;default_1$2=Info.default=(0,_createSvgIcon$2.default)((0,_jsxRuntime$2.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"}),"Info");var Description={},_interopRequireDefault$1=interopRequireDefaultExports;Object.defineProperty(Description,"__esModule",{value:!0});var default_1$1=Description.default=void 0,_createSvgIcon$1=_interopRequireDefault$1(requireCreateSvgIcon()),_jsxRuntime$1=jsxRuntimeExports;default_1$1=Description.default=(0,_createSvgIcon$1.default)((0,_jsxRuntime$1.jsx)("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zm2 16H8v-2h8zm0-4H8v-2h8zm-3-5V3.5L18.5 9z"}),"Description");const Header=()=>{const[e,i]=reactExports.useState(!1),s=()=>{i(!e)};return jsxRuntimeExports.jsxs("div",{className:"header_div",children:[jsxRuntimeExports.jsx("div",{className:"container_fluid",children:jsxRuntimeExports.jsxs("div",{className:"header_div_area",children:[jsxRuntimeExports.jsxs("a",{href:"/",className:"header_div_area_1",children:[jsxRuntimeExports.jsx("img",{src:"/img/egax_logo.png",alt:"",className:"header_div_area_1_img"}),"Egochain"]}),jsxRuntimeExports.jsxs("div",{className:"header_div_area_2",children:[jsxRuntimeExports.jsxs("a",{href:"https://github.com/EgorasMarket",className:"header_div_area_2_link1",target:"_blank",children:["Developer",jsxRuntimeExports.jsx(default_1$4,{className:"header_div_area_2_link1_icon"})]}),jsxRuntimeExports.jsxs("div",{className:"header_div_area_2_div",children:["Learn"," ",jsxRuntimeExports.jsx(default_1$3,{className:"header_div_area_2_div_icon"}),jsxRuntimeExports.jsxs("div",{className:"header_div_area_2_div_drop",children:[jsxRuntimeExports.jsxs("a",{href:window.location.protocol==="http:"?`http://localhost:${window.location.port}/egax/coin/info`:"https://egodao.org/egax/coin/info",className:"header_div_area_2_link1",children:[jsxRuntimeExports.jsx("img",{src:"/egax_logo.png",alt:"",className:"header_div_area_2_link1Img"})," ","EGAX Coin"]}),jsxRuntimeExports.jsxs("a",{href:window.location.protocol==="http:"?`http://localhost:${window.location.port}/egc/coin/info`:"https://egodao.org/egc/coin/info",className:"header_div_area_2_link1",children:[jsxRuntimeExports.jsx("img",{src:"/egc_icon2.svg",alt:"",className:"header_div_area_2_link1Img"})," ","EGC Coin"]}),jsxRuntimeExports.jsxs("a",{href:window.location.protocol==="http:"?`http://localhost:${window.location.port}/about`:"https://egodao.org/about",className:"header_div_area_2_link1",children:[jsxRuntimeExports.jsx(default_1$2,{className:"header_div_area_2_link1_icon"})," About"]}),jsxRuntimeExports.jsxs("a",{href:window.location.protocol==="http:"?`http://localhost:${window.location.port}/whitepaper`:"https://egodao.org/whitepaper",className:"header_div_area_2_link1",children:[jsxRuntimeExports.jsx(default_1$1,{className:"header_div_area_2_link1_icon"})," ","Whitepaper"]})]})]}),jsxRuntimeExports.jsxs("a",{href:window.location.protocol==="http:"?`http://faucet.localhost:${window.location.port}/`:"https://faucet.egodao.org/",className:"header_div_area_2_link1",target:"_blank",children:["Faucet",jsxRuntimeExports.jsx(default_1$4,{className:"header_div_area_2_link1_icon"})]}),jsxRuntimeExports.jsxs("a",{href:"https://egodao.org/",className:"header_div_area_2_link1",target:"_blank",children:["Stake",jsxRuntimeExports.jsx(default_1$4,{className:"header_div_area_2_link1_icon"})]}),jsxRuntimeExports.jsx("a",{href:"https://play.google.com/store/apps/details?id=io.egox.dex&hl=be&gl=US",target:"_blank",children:jsxRuntimeExports.jsxs("button",{className:"header_div_area_2_btn",children:["Get App"," ",jsxRuntimeExports.jsx("img",{src:"/img/play_store_icon.png",alt:"",className:"header_div_area_2_btn_img"})]})}),jsxRuntimeExports.jsxs("button",{className:"header_div_area_2_btn2",children:[jsxRuntimeExports.jsxs("div",{className:"header_div_area_2_btn2_div",children:["Get App ",jsxRuntimeExports.jsx("span",{children:"coming soon"})]}),jsxRuntimeExports.jsx("img",{src:"/img/apple_store_icon.webp",alt:"",className:"header_div_area_2_btn2_img"})]}),jsxRuntimeExports.jsx(default_1$6,{className:"header_div_area_2_menu_icon",onClick:s})]})]})}),e?jsxRuntimeExports.jsx("div",{className:"headerMenuDiv",children:jsxRuntimeExports.jsxs("div",{className:"headerMenuDiv_cont",children:[jsxRuntimeExports.jsx("div",{className:"headerMenuDiv_cont_1",children:jsxRuntimeExports.jsx(default_1$5,{className:"headerMenuDiv_cont_1_icon",onClick:s})}),jsxRuntimeExports.jsxs("div",{className:"headerMenuDiv_cont_body",children:[jsxRuntimeExports.jsxs("a",{href:"https://github.com/EgorasMarket",target:"_blank",className:"headerMenuDiv_cont_body_link1",children:[" ","Developer",jsxRuntimeExports.jsx(default_1$4,{className:"header_div_area_2_link1_icon"})]}),jsxRuntimeExports.jsx("a",{href:window.location.protocol==="http:"?`http://localhost:${window.location.port}/egax/coin/info`:"https://egodao.org/egax/coin/info",className:"headerMenuDiv_cont_body_link1",children:"EGAX Coin"}),jsxRuntimeExports.jsx("a",{href:window.location.protocol==="http:"?`http://localhost:${window.location.port}/egc/coin/info`:"https://egodao.org/egc/coin/info",className:"headerMenuDiv_cont_body_link1",children:"EGC Coin"}),jsxRuntimeExports.jsx("a",{href:window.location.protocol==="http:"?`http://localhost:${window.location.port}/about`:"https://egodao.org/about",className:"headerMenuDiv_cont_body_link1",children:"About"}),jsxRuntimeExports.jsx("a",{href:window.location.protocol==="http:"?`http://localhost:${window.location.port}/whitepaper`:"https://egodao.org/whitepaper",className:"headerMenuDiv_cont_body_link1",children:"White paper"}),jsxRuntimeExports.jsxs("a",{href:window.location.protocol==="http:"?`http://faucet.localhost:${window.location.port}/`:"https://faucet.egodao.org/",className:"headerMenuDiv_cont_body_link1",target:"_blank",children:[" ","Faucet",jsxRuntimeExports.jsx(default_1$4,{className:"header_div_area_2_link1_icon"})]}),jsxRuntimeExports.jsxs("a",{href:"https://egodao.org/",className:"headerMenuDiv_cont_body_link1",target:"_blank",children:[" ","Stake",jsxRuntimeExports.jsx(default_1$4,{className:"header_div_area_2_link1_icon"})]}),jsxRuntimeExports.jsxs("div",{className:"headerMenuDiv_cont_body_div",children:[jsxRuntimeExports.jsx("a",{href:"https://play.google.com/store/apps/details?id=io.egox.dex&hl=be&gl=US",target:"_blank",children:jsxRuntimeExports.jsxs("button",{className:"header_div_area_2_btn",children:["Get App"," ",jsxRuntimeExports.jsx("img",{src:"/img/play_store_icon.png",alt:"",className:"header_div_area_2_btn_img"})]})}),jsxRuntimeExports.jsxs("button",{className:"header_div_area_2_btn2",children:[jsxRuntimeExports.jsxs("div",{className:"header_div_area_2_btn2_div",children:["Get App ",jsxRuntimeExports.jsx("span",{children:"coming soon"})]}),jsxRuntimeExports.jsx("img",{src:"/img/apple_store_icon.webp",alt:"",className:"header_div_area_2_btn2_img"})]})]})]})]})}):null]})};var Twitter={},_interopRequireDefault=interopRequireDefaultExports;Object.defineProperty(Twitter,"__esModule",{value:!0});var default_1=Twitter.default=void 0;_interopRequireWildcard(reactExports);var _createSvgIcon=_interopRequireDefault(requireCreateSvgIcon()),_jsxRuntime=jsxRuntimeExports;function _getRequireWildcardCache(e){if(typeof WeakMap!="function")return null;var i=new WeakMap,s=new WeakMap;return(_getRequireWildcardCache=function(a){return a?s:i})(e)}function _interopRequireWildcard(e,i){if(!i&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var s=_getRequireWildcardCache(i);if(s&&s.has(e))return s.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in e)if(c!=="default"&&Object.prototype.hasOwnProperty.call(e,c)){var d=o?Object.getOwnPropertyDescriptor(e,c):null;d&&(d.get||d.set)?Object.defineProperty(a,c,d):a[c]=e[c]}return a.default=e,s&&s.set(e,a),a}default_1=Twitter.default=(0,_createSvgIcon.default)((0,_jsxRuntime.jsx)("path",{d:"M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"}),"Twitter");const Footer=()=>{const[e,i]=reactExports.useState(new Date().getFullYear());return reactExports.useEffect(()=>{const s=setInterval(()=>{i(new Date().getFullYear())},1e3);return()=>clearInterval(s)},[]),jsxRuntimeExports.jsx("div",{className:"footerDiv",id:"footer",children:jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsxs("div",{className:"footerDivArea",children:[jsxRuntimeExports.jsxs("div",{className:"footerDiv1",children:[jsxRuntimeExports.jsxs("div",{className:"footerDiv1_area1",children:[jsxRuntimeExports.jsxs("div",{className:"footerDiv1_area1_cont1",children:[jsxRuntimeExports.jsx("img",{src:"/img/egax_logo.png",alt:"",className:"footerDiv1_img2"}),"Egochain"]}),jsxRuntimeExports.jsx("div",{className:"footerDiv1_area1_cont2",children:jsxRuntimeExports.jsxs("div",{className:"footerDiv1_area1_cont2_links",children:[jsxRuntimeExports.jsxs("a",{href:"https://twitter.com/egorasHQ?ref_src=twsrc%5Egoogle%7Ctwcamp%5Eserp%7Ctwgr%5Eauthor",className:"footerDiv1_area1_cont2_links_link_tel",target:"_blank",children:[jsxRuntimeExports.jsx(default_1,{className:"footerDiv1_area1_cont2_links_link1"})," "]}),jsxRuntimeExports.jsxs("a",{href:"https://t.me/s/egorasmarket?before=480",className:"footerDiv1_area1_cont2_links_link_tel",target:"_blank",children:[jsxRuntimeExports.jsx(default_1$a,{className:"footerDiv1_area1_cont2_links_link1"})," "]}),jsxRuntimeExports.jsxs("a",{href:"https://github.com/EgorasMarket",className:"footerDiv1_area1_cont2_links_link_tel",target:"_blank",children:[jsxRuntimeExports.jsx(default_1$8,{className:"footerDiv1_area1_cont2_links_link1"})," "]}),jsxRuntimeExports.jsxs("a",{href:"https://www.youtube.com/channel/UCHfi5EwXig46xp5Dx8hVBHQ",className:"footerDiv1_area1_cont2_links_link_tel",target:"_blank",children:[jsxRuntimeExports.jsx(default_1$9,{className:"footerDiv1_area1_cont2_links_link1"})," "]})]})})]}),jsxRuntimeExports.jsxs("div",{className:"footerDiv1_area2",children:[jsxRuntimeExports.jsxs("div",{className:"footerDiv1_area2_cont1",children:[jsxRuntimeExports.jsx("div",{className:"footerDiv1_area2_title",children:"Eco-System"}),jsxRuntimeExports.jsxs("div",{className:"footerDiv1_area2_title_subLinks_div",children:[jsxRuntimeExports.jsx("a",{href:window.location.protocol==="http:"?`http://localhost:${window.location.port}/egax/coin/info`:"https://egodao.org/egax/coin/info",className:"footerDiv1_area2_title_subLinks_div_link1",children:"EGAX Coin"}),jsxRuntimeExports.jsx("a",{href:window.location.protocol==="http:"?`http://localhost:${window.location.port}/egc/coin/info`:"https://egodao.org/egc/coin/info",className:"footerDiv1_area2_title_subLinks_div_link1",children:"EGC Coin"}),jsxRuntimeExports.jsxs("a",{href:"https://github.com/EgorasMarket",className:"footerDiv1_area2_title_subLinks_div_link1",target:"_blank",children:["Developer",jsxRuntimeExports.jsx(default_1$4,{className:"header_div_area_2_link1_icon"})]}),jsxRuntimeExports.jsxs("a",{href:"https://egodao.org/",className:"footerDiv1_area2_title_subLinks_div_link1",target:"_blank",children:["Stake",jsxRuntimeExports.jsx(default_1$4,{className:"header_div_area_2_link1_icon"})]}),jsxRuntimeExports.jsxs("a",{href:window.location.protocol==="http:"?`http://faucet.localhost:${window.location.port}/`:"https://faucet.egodao.org/",className:"footerDiv1_area2_title_subLinks_div_link1",target:"_blank",children:["Faucet",jsxRuntimeExports.jsx(default_1$4,{className:"header_div_area_2_link1_icon"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"footerDiv1_area2_cont1",children:[jsxRuntimeExports.jsx("div",{className:"footerDiv1_area2_title",children:"Docs"}),jsxRuntimeExports.jsxs("div",{className:"footerDiv1_area2_title_subLinks_div",children:[jsxRuntimeExports.jsx("a",{href:window.location.protocol==="http:"?`http://localhost:${window.location.port}/about`:"https://egodao.org/about",className:"footerDiv1_area2_title_subLinks_div_link1",children:"About"}),jsxRuntimeExports.jsx("a",{href:window.location.protocol==="http:"?`http://localhost:${window.location.port}/whitepaper`:"https://egodao.org/whitepaper",className:"footerDiv1_area2_title_subLinks_div_link1",children:"White paper"}),jsxRuntimeExports.jsx("a",{href:window.location.protocol==="http:"?`http://localhost:${window.location.port}/privacy`:"https://egodao.org/privacy",className:"footerDiv1_area2_title_subLinks_div_link1",children:"Privacy Policy"}),jsxRuntimeExports.jsx("a",{href:window.location.protocol==="http:"?`http://localhost:${window.location.port}/terms`:"https://egodao.org/terms",className:"footerDiv1_area2_title_subLinks_div_link1",children:"Terms & conditions"})]})]}),jsxRuntimeExports.jsxs("div",{className:"footerDiv1_area2_cont1",children:[jsxRuntimeExports.jsx("div",{className:"footerDiv1_area2_title",children:"Need Help?"}),jsxRuntimeExports.jsx("div",{className:"footerDiv1_area2_title_subLinks_div",children:jsxRuntimeExports.jsx("a",{href:"mailto:support@egoras.com",className:"footerDiv1_area2_title_subLinks_div_link1",target:"_blank",children:"support@egochain.com"})})]})]})]}),jsxRuntimeExports.jsx("hr",{className:"footer_hr"}),jsxRuntimeExports.jsxs("div",{className:"footer_lastDiv",children:["© ",e," Egochain.org"]})]})})})},Roadmap=()=>jsxRuntimeExports.jsxs("div",{className:"roadMapDiv",children:[" ",jsxRuntimeExports.jsx("section",{className:"roadmap",children:jsxRuntimeExports.jsx("div",{className:"section-timeline-4",children:jsxRuntimeExports.jsx("div",{className:"containercool-2",children:jsxRuntimeExports.jsxs("div",{className:"timeline_wrappercool-2",children:[jsxRuntimeExports.jsx("div",{className:"timeline_progresscool",children:jsxRuntimeExports.jsx("div",{className:"timeline_progress-barcool"})}),jsxRuntimeExports.jsxs("div",{"data-w-id":"046baf0c-9b4c-ea28-05a2-50fd0f70aa61",className:"timeline_item-2",children:[jsxRuntimeExports.jsx("div",{id:"w-node-_046baf0c-9b4c-ea28-05a2-50fd0f70aa62-718776cd",className:"timeline_left",children:jsxRuntimeExports.jsx("div",{className:"timeline_date-text",children:"Q1 2024"})}),jsxRuntimeExports.jsx("div",{id:"w-node-_046baf0c-9b4c-ea28-05a2-50fd0f70aa65-718776cd",className:"timeline_centre",children:jsxRuntimeExports.jsx("div",{className:"timeline_circle"})}),jsxRuntimeExports.jsx("div",{id:"w-node-_046baf0c-9b4c-ea28-05a2-50fd0f70aa67-718776cd",className:"timeline_right",children:jsxRuntimeExports.jsx("div",{className:"margin-bottom-xlarge",children:jsxRuntimeExports.jsxs("div",{className:"timeline_text-2",children:["* Onboard 5,000 stakers to EgoDAO.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Launch of the Egoras Electric Vehicle (APEX).",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Distribute EGAX block rewards to EgoDAO stakers.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Secure listing on a Tier 2 exchange.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Sell 250 tricycles through EgoPay using EGAX"]})})})]}),jsxRuntimeExports.jsxs("div",{"data-w-id":"046baf0c-9b4c-ea28-05a2-50fd0f70aa89",className:"timeline_item-2",children:[jsxRuntimeExports.jsx("div",{id:"w-node-_046baf0c-9b4c-ea28-05a2-50fd0f70aa8a-718776cd",className:"timeline_left",children:jsxRuntimeExports.jsx("div",{className:"timeline_date-text",children:"Q2 2024"})}),jsxRuntimeExports.jsx("div",{id:"w-node-_046baf0c-9b4c-ea28-05a2-50fd0f70aa8d-718776cd",className:"timeline_centre",children:jsxRuntimeExports.jsx("div",{className:"timeline_circle"})}),jsxRuntimeExports.jsx("div",{className:"timeline_right",children:jsxRuntimeExports.jsx("div",{className:"margin-bottom-medium-2",children:jsxRuntimeExports.jsxs("div",{className:"timeline_text-2",children:["* Accumulate 50,000 Twitter followers.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Reach 30,000 Telegram followers.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Achieve 25,000 downloads of the EgoPay app.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Increase EGC & EGAX daily volume to 500,000 USD.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Begin mass production of the Egoras Electric Vehicle (APEX).",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Sell 300 tricycles through EgoPay using EGC & EGAX."]})})})]}),jsxRuntimeExports.jsxs("div",{"data-w-id":"046baf0c-9b4c-ea28-05a2-50fd0f70aa97",className:"timeline_item-2",children:[jsxRuntimeExports.jsx("div",{id:"w-node-_046baf0c-9b4c-ea28-05a2-50fd0f70aa98-718776cd",className:"timeline_left",children:jsxRuntimeExports.jsx("div",{className:"timeline_date-text",children:"Q3 2024"})}),jsxRuntimeExports.jsx("div",{id:"w-node-_046baf0c-9b4c-ea28-05a2-50fd0f70aa9b-718776cd",className:"timeline_centre",children:jsxRuntimeExports.jsx("div",{className:"timeline_circle"})}),jsxRuntimeExports.jsx("div",{className:"timeline_right",children:jsxRuntimeExports.jsx("div",{className:"margin-bottom-medium-2",children:jsxRuntimeExports.jsxs("div",{className:"timeline_text-2",children:["* Sell 100 Egoras Electric Vehicles (APEX) using EGC & EGAX through EgoPay.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Secure listings for EGC & EGAX on multiple Tier 2 exchanges.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Open 20 electric vehicle charging stations (charging fees payable with EGC & EGAX through EgoPay).",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Grow Twitter following to 70,000.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Sell 500 tricycles using EGC & EGAX through EgoPay."]})})})]}),jsxRuntimeExports.jsxs("div",{"data-w-id":"046baf0c-9b4c-ea28-05a2-50fd0f70aaa4",className:"timeline_item-2",children:[jsxRuntimeExports.jsx("div",{id:"w-node-_046baf0c-9b4c-ea28-05a2-50fd0f70aaa5-718776cd",className:"timeline_left",children:jsxRuntimeExports.jsx("div",{className:"timeline_date-text",children:"Q4 2024"})}),jsxRuntimeExports.jsx("div",{id:"w-node-_046baf0c-9b4c-ea28-05a2-50fd0f70aaa8-718776cd",className:"timeline_centre",children:jsxRuntimeExports.jsx("div",{className:"timeline_circle"})}),jsxRuntimeExports.jsx("div",{className:"timeline_right",children:jsxRuntimeExports.jsx("div",{className:"margin-bottom-medium-2",children:jsxRuntimeExports.jsx("div",{className:"margin-bottom-medium-2",children:jsxRuntimeExports.jsxs("div",{className:"timeline_text-2",children:["* Open 40 additional electric vehicle charging stations (charging fees payable with EGC & EGAX through EgoPay).",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Sell 500 tricycles using EGC & EGAX through EgoPay.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Achieve 100,000 downloads of the EgoPay app.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Sell 400 Egoras Electric Vehicles (APEX) using EGC & EGAX through EgoPay.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Secure a listing on a Tier 1 exchange."]})})})})]}),jsxRuntimeExports.jsx("div",{className:"overlay-fade-bottom-2"}),jsxRuntimeExports.jsx("div",{className:"overlay-fade-top-2"})]})})})})]}),RoadMapPage=()=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("section",{className:"egox_token_div_section1",children:[jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsx("div",{className:"egox_token_div_section1area",children:jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section1area_cont1",children:[jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section1area1",children:[jsxRuntimeExports.jsx("div",{className:"egox_token_div_section1area1_title",children:"About"}),jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section1area1_para",children:["Egochain spearheads the revolution in next-generation electric vehicle technology through its pioneering decentralized operating system.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Leveraging the world's fastest blockchain specifically designed for real-world applications and readily deployable Web3 modules, Egochain fosters a robust ecosystem primed for mass adoption.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," Its dApps boast unrivaled interoperability, scalability, and true decentralization, empowering millions to seamlessly integrate into the future of EV mobility."]})]}),jsxRuntimeExports.jsx("div",{className:"home_div_section1_area_2",children:jsxRuntimeExports.jsx(zr,{scene:"https://prod.spline.design/TVLoAomGQBQWA2NS/scene.splinecode",className:"home_div_section1_area_2_spline_scene"})})]})})}),jsxRuntimeExports.jsx("img",{src:"/img/grains_ellipse.png",alt:"",className:"grains_ellipse"})]}),jsxRuntimeExports.jsxs("section",{className:"egox_token_div_section3",children:[jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section3_area",children:[jsxRuntimeExports.jsx("div",{className:"egox_token_div_section3_area_title",children:"Road Map"}),jsxRuntimeExports.jsx("div",{className:"egox_token_div_section3_area_body",children:jsxRuntimeExports.jsx(Roadmap,{})})]})}),jsxRuntimeExports.jsx("img",{src:"/img/grains_bottom.png",alt:"",className:"grains_ellipse_roadmap"})]})]}),Egax=()=>jsxRuntimeExports.jsxs("div",{className:"egox_token_div",children:[jsxRuntimeExports.jsxs("section",{className:"egox_token_div_section1",children:[jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section1area",children:[jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section1area_cont1",children:[jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section1area1",children:[jsxRuntimeExports.jsx("div",{className:"egox_token_div_section1area1_title",children:"Egochain (EGAX) coin"}),jsxRuntimeExports.jsx("div",{className:"egox_token_div_section1area1_para",children:"Egochain's robust fee structure ensures network sustainability and incentivizes participation through token distribution."})]}),jsxRuntimeExports.jsx("div",{className:"egox_token_div_section1area2",children:jsxRuntimeExports.jsx("img",{src:"/img/1_inch_token_image_dummy.png",alt:"",className:"egox_token_div_section1area2_img"})})]}),jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section1area_cont2",children:[jsxRuntimeExports.jsxs("div",{className:"home_div_section1_area_stats_div1",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section1_area_stats_div1_title",children:"$0.00"}),jsxRuntimeExports.jsx("div",{className:"home_div_section1_area_stats_div1_para",children:"Current Price"})]}),jsxRuntimeExports.jsxs("div",{className:"home_div_section1_area_stats_div1",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section1_area_stats_div1_title",children:"0.00"}),jsxRuntimeExports.jsx("div",{className:"home_div_section1_area_stats_div1_para",children:"Circulating Supply"})]}),jsxRuntimeExports.jsxs("div",{className:"home_div_section1_area_stats_div1",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section1_area_stats_div1_title",children:"0.00"}),jsxRuntimeExports.jsx("div",{className:"home_div_section1_area_stats_div1_para",children:"Total Supply"})]}),jsxRuntimeExports.jsxs("div",{className:"home_div_section1_area_stats_div1",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section1_area_stats_div1_title",children:"0"}),jsxRuntimeExports.jsx("div",{className:"home_div_section1_area_stats_div1_para",children:"Holders"})]})]})]})}),jsxRuntimeExports.jsx("img",{src:"/img/grains_ellipse.png",alt:"",className:"grains_ellipse"})]}),jsxRuntimeExports.jsxs("section",{className:"home_div_section4",children:[jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsx("div",{className:"home_div_section4_area",children:jsxRuntimeExports.jsxs("div",{className:"home_div_section4_area_body",children:[jsxRuntimeExports.jsxs("div",{className:"home_div_section4_area_body_cont",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_cont1_img_div",children:jsxRuntimeExports.jsx(Icon,{})}),jsxRuntimeExports.jsxs("div",{className:"home_div_section4_area_body_cont2",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_cont2_title",children:"Transaction fees (EGAX)"}),jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_cont2_para",children:"Cover operational costs and prevent resource abuse. System fees are burned, while network fees reward consensus nodes, driving their commitment."})]})]}),jsxRuntimeExports.jsxs("div",{className:"home_div_section4_area_body_cont2a",children:[jsxRuntimeExports.jsxs("div",{className:"home_div_section4_area_body_cont2",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_cont2_title",children:"Token Generation"}),jsxRuntimeExports.jsxs("div",{className:"home_div_section4_area_body_cont2_para",children:["5 EGAX tokens are minted per block, allocated as follows:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* 10%: EGC stakers (incentivizing network security)",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* 70%: Apex EV riders (promoting adoption and engagement)",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* 20%: Validators (rewarding block validation)"]})]}),jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_cont1_img_div2",children:jsxRuntimeExports.jsx(Icon,{})})]}),jsxRuntimeExports.jsxs("div",{className:"home_div_section4_area_body_cont3",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_cont1_img_div",children:jsxRuntimeExports.jsx(Icon,{})}),jsxRuntimeExports.jsxs("div",{className:"home_div_section4_area_body_cont2",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_cont2_title",children:"Accessibility and Ease of Use"}),jsxRuntimeExports.jsxs("div",{className:"home_div_section4_area_body_cont2_para",children:["* Minimal EGaX Unit: 0.00 000001 EGAX, enabling microtransactions and fostering affordability.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Staking-Free Token Claiming: No EGAX staking required to receive earned tokens.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," * Seamless EGAX Claiming : Apex EVs integrate a built-in claim function for effortless token acquisition."]})]})]})]})})}),jsxRuntimeExports.jsx("img",{src:"/img/grains_ellipse.png",alt:"",className:"grains_ellipse"}),jsxRuntimeExports.jsx("img",{src:"/img/test_hero_light4.svg",alt:"",className:"home_div_section1_bg_light4"})]})]}),Privacy=()=>jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("section",{className:"heroSection4",children:[jsxRuntimeExports.jsxs("div",{className:"container",children:[jsxRuntimeExports.jsxs("div",{className:"heroArea4",children:[jsxRuntimeExports.jsxs("div",{className:"heroTxts4",children:[jsxRuntimeExports.jsx("h1",{className:"heroTitle4","data-aos":"fade-up","data-aos-easing":"ease-in-out","data-aos-once":"false",children:"Privacy Policy"}),jsxRuntimeExports.jsxs("p",{className:"hero4para","data-aos":"fade-up","data-aos-easing":"ease-in-out","data-aos-once":"false",children:["NEED SUPPORT:"," ",jsxRuntimeExports.jsx("a",{href:"#",className:"egrEmailLink",children:"support@egochain.org"})]})]}),jsxRuntimeExports.jsx("div",{className:"hero-images4","data-aos":"fade-left",children:jsxRuntimeExports.jsx("img",{src:"/img/privacy-image.svg",alt:"",className:"privacy"})})]}),jsxRuntimeExports.jsxs("div",{className:"privacyTextList",children:[jsxRuntimeExports.jsx("span",{className:`privacyTextList_span\r
            `,children:"Last Date Updated 10 January 2024."}),jsxRuntimeExports.jsxs("div",{className:"privacyTxts",children:[jsxRuntimeExports.jsx("div",{className:"privacyLine","data-aos":"fade-right"}),jsxRuntimeExports.jsx("div",{className:"loanDetailsTitle",children:jsxRuntimeExports.jsxs("h1",{className:"PrivacyTitle","data-aos":"fade-right",children:["1. ",jsxRuntimeExports.jsx("span",{className:"titleName",children:"About this Notice"})]})}),jsxRuntimeExports.jsx("p",{className:"AboutUsPara","data-aos":"fade-right",children:"This Privacy and Cookie Notice provides information on how egochain collects and processes your personal data when you visit our website or mobile applications."})]}),jsxRuntimeExports.jsxs("div",{className:"privacyTxts",children:[jsxRuntimeExports.jsx("div",{className:"privacyLine","data-aos":"fade-right"}),jsxRuntimeExports.jsx("div",{className:"loanDetailsTitle",children:jsxRuntimeExports.jsxs("h1",{className:"PrivacyTitle","data-aos":"fade-right",children:["2."," ",jsxRuntimeExports.jsx("span",{className:"titleName",children:"The Data We Collect About You?"})]})}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:["We collect your personal data in order to provide and continually improve our products and services. We may collect, use, store and transfer the following different kinds of personal data about you: Here for marketing and personal data optimization purposes. egochain also uses Google Digital Marketing to propose targeted offers. To find out more:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," Information you provide to us: We receive and store the information you provide to us including your identity data, contact data, delivery address and financial data.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," Information on your use of our website and/or mobile applications: We automatically collect and store certain types of information regarding your use of the egochain including information about your searches, views, downloads and transactions.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," Information from third parties and publicly available sources: We may receive information about you from third parties including our carriers; payment service providers; merchants/brands; and advertising service providers."]})]}),jsxRuntimeExports.jsxs("div",{className:"privacyTxts",children:[jsxRuntimeExports.jsx("div",{className:"privacyLine","data-aos":"fade-right"}),jsxRuntimeExports.jsx("div",{className:"loanDetailsTitle",children:jsxRuntimeExports.jsxs("h1",{className:"PrivacyTitle ","data-aos":"fade-right",children:["3."," ",jsxRuntimeExports.jsx("span",{className:"titleName",children:"Cookies and How We Use Them"})]})}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:["A cookie is a small file of letters and numbers that we put on your computer if you agree.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," Cookies allow us to distinguish you from other users of our website and mobile applications, which helps us to provide you with an enhanced browsing experience. For example we use cookies for the following purposes: Recognising and counting the number of visitors and to see how visitors move around the site when they are using it (this helps us to improve the way our website works, for example by ensuring that users can find what they are looking for). ",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Identifying your preferences and subscriptions e.g. language settings and Sending you newsletters and commercial/advertising messages tailored to your interests.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," Our approved third parties may also set cookies when you use our website. Third parties include search engines, providers of measurement and analytics services, social media networks and advertising companies."]})]}),jsxRuntimeExports.jsxs("div",{className:"privacyTxts",children:[jsxRuntimeExports.jsx("div",{className:"privacyLine","data-aos":"fade-right"}),jsxRuntimeExports.jsx("div",{className:"loanDetailsTitle",children:jsxRuntimeExports.jsxs("h1",{className:"PrivacyTitle","data-aos":"fade-right",children:["4."," ",jsxRuntimeExports.jsx("span",{className:"titleName",children:"How We Use Your Personal Data"})]})}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:["We use your personal data to operate, provide, develop and improve the products and services that we offer, including the following: Managing your relationship with us. ",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Enabling you to participate in promotions, competitions and surveys. Improving our website, applications, products and services Recommending/advertising products or services which may be of interest to you.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," Complying with our legal obligations, including verifying your identity where necessary."]})]})]})]}),jsxRuntimeExports.jsx("img",{src:"/img/projects-blurbg.png",alt:"",className:"privacyBlurBg"}),jsxRuntimeExports.jsx("img",{src:"/img/privacy-rightbg.png",alt:"",className:"privacyrightBlurBg"})]})}),TermsAndConditions=()=>jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("section",{className:"heroSection4",children:[jsxRuntimeExports.jsxs("div",{className:"container",children:[jsxRuntimeExports.jsxs("div",{className:"heroArea4",children:[jsxRuntimeExports.jsxs("div",{className:"heroTxts4",children:[jsxRuntimeExports.jsx("h1",{className:"heroTitle4","data-aos":"fade-up","data-aos-easing":"ease-in-out","data-aos-once":"false",children:"Terms & Conditions"}),jsxRuntimeExports.jsxs("p",{className:"hero4para","data-aos":"fade-up","data-aos-easing":"ease-in-out","data-aos-once":"false",children:["NEED SUPPORT:"," ",jsxRuntimeExports.jsx("a",{href:"#",className:"egrEmailLink",children:"support@egochain.org"})]})]}),jsxRuntimeExports.jsx("div",{className:"hero-images4","data-aos":"fade-left",children:jsxRuntimeExports.jsx("img",{src:"/img/privacy-image.svg",alt:"",className:"privacy"})})]}),jsxRuntimeExports.jsxs("div",{className:"privacyTextList",children:[jsxRuntimeExports.jsx("span",{className:`privacyTextList_span
            `,children:"Last Date Updated 10 January 2024."}),jsxRuntimeExports.jsxs("div",{className:"privacyTxts",children:[jsxRuntimeExports.jsx("div",{className:"privacyLine","data-aos":"fade-right"}),jsxRuntimeExports.jsx("div",{className:"loanDetailsTitle",children:jsxRuntimeExports.jsx("h1",{className:"PrivacyTitle","data-aos":"fade-right",children:jsxRuntimeExports.jsx("span",{className:"titleName",children:"Introduction"})})}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 1. "})," Please read these terms of use carefully before you start to use the Website, these will apply to your use of the Website. We recommend that you print a copy of the Terms for future reference."]}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 2. "}),"The website",jsxRuntimeExports.jsxs("a",{href:"https://egochain.org",style:{color:"#229e54"},children:[" ","https://egochain.org"]})," ","is operated by egochain Technologies Limited (“egochain” “we” “our” or “us”) a limited liability company incorporated under the Nigerian Companies and Allied Matters Act with registration Number 1832671."]}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 3. "}),'"you" and "your" means a user of the website at'," ",jsxRuntimeExports.jsxs("a",{href:"https://egochain.org",style:{color:"#229e54"},children:[" ","https://egochain.org"]})," ",'(the "Website").']})]}),jsxRuntimeExports.jsxs("div",{className:"privacyTxts",children:[jsxRuntimeExports.jsx("div",{className:"privacyLine","data-aos":"fade-right"}),jsxRuntimeExports.jsx("div",{className:"loanDetailsTitle",children:jsxRuntimeExports.jsx("h1",{className:"PrivacyTitle","data-aos":"fade-right",children:jsxRuntimeExports.jsx("span",{className:"titleName",children:"Acceptance of Terms and Conditions"})})}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 4. "}),"By accessing or using www.egochain.org or any other website operated by us where these terms and conditions are posted, you acknowledge that you agree to and are subject to the following terms and conditions, as well as the Privacy Policy (collectively called “Terms”/“Agreement”). The Privacy Policy is available at",jsxRuntimeExports.jsxs("a",{href:"https://egochain.org/privacy",style:{color:"#229e54"},children:[" ","https://egochain.org/privacy"]})]}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 5. "}),"If you do not fully agree to these Terms, you are not authorized to access or otherwise use the website. Under these Terms, “use” or “access” of the website specifically includes any direct or indirect access or use of the website or any cached version of the website and any direct or indirect access or use of any information or content on the website, regardless of how it is obtained."]}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:"6. "}),"You are not authorized to use this website unless you are able to enter into legally binding contracts. We do not knowingly collect the information of anyone who cannot validly enter into a legally binding contract. In essence, by using our website, you represent and warrant that:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{className:"subordinate",children:" a."}),"You are at least 18 years old.",jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("span",{className:"subordinate",children:" b."}),"You have the right, authority and capacity to enter into this agreement and to abide by the terms and conditions of these Terms, and that you will so abide. Where you enter into this agreement on behalf of a company or other organization, you represent and warrant that you have authority to act on behalf of that entity and to bind that entity to this agreement."]})]}),jsxRuntimeExports.jsxs("div",{className:"privacyTxts",children:[jsxRuntimeExports.jsx("div",{className:"privacyLine","data-aos":"fade-right"}),jsxRuntimeExports.jsx("div",{className:"loanDetailsTitle",children:jsxRuntimeExports.jsx("h1",{className:"PrivacyTitle ","data-aos":"fade-right",children:jsxRuntimeExports.jsx("span",{className:"titleName",children:"Disclaimer"})})}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 7. "}),"We do not guarantee that our Website, or any content on them, will always be available or be uninterrupted. Access to our Website is permitted on a temporary basis. We may suspend, withdraw, discontinue or change all or any part of our Website without notice. We will not be liable to you if for any reason our Website is unavailable at any time or for any period. You are responsible for making all arrangements necessary for you to have access to our Website."]}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 8. "}),"It is your responsibility to ensure that the Website is suitable for your intended purposes. We accept no liability as to the suitability or fitness of the Website in meeting your needs."]}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 9. "}),"We do not guarantee that the Website or the computer server from which the Website are made available, are free of viruses or other harmful components;"]}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 10. "}),"We do not guarantee the accuracy, content, timeliness, completeness, reliability, quality or suitability of any content contained in the Website or otherwise made available in connection with the Website."]}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 11. "}),"We will not be responsible to you or any third party for any business loss (including loss of profits, revenue, contracts, anticipated savings, data, goodwill or wasted expenditure) or any indirect or consequential loss in connection with your use of the Website."]}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 12. "}),"You acknowledge and agree that the operation of the Website is dependent upon the proper and effective functioning of the internet and other third party equipment and services, and that we do not guarantee and will not be liable for these in any way."]})]}),jsxRuntimeExports.jsxs("div",{className:"privacyTxts",children:[jsxRuntimeExports.jsx("div",{className:"privacyLine","data-aos":"fade-right"}),jsxRuntimeExports.jsx("div",{className:"loanDetailsTitle",children:jsxRuntimeExports.jsx("h1",{className:"PrivacyTitle","data-aos":"fade-right",children:jsxRuntimeExports.jsx("span",{className:"titleName",children:"Obligations of Users"})})}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 13. "}),"You must not",jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{className:"subordinate",children:" a."})," provide any false information relating to you or your property.",jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{className:"subordinate",children:" b."})," Use the website in any unlawful manner, for any unlawful purpose, or in any manner inconsistent with this Agreement, or act fraudulently or maliciously, for example, by hacking into or inserting malicious code, including viruses, or harmful data, into the website.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("span",{className:"subordinate",children:" c."}),"infringe our intellectual property rights or those of any third party in relation to your use of the website.",jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{className:"subordinate",children:" d."}),"Attempt any unauthorised access to any part or component of the Website.",jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("span",{className:"subordinate",children:" e."}),"use the website in a way that could damage, disable, overburden, impair or compromise our System or security or interfere with other users;",jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("span",{className:"subordinate",children:" f."}),"Collect or harvest any information or data from our systems or attempt to decipher any transmissions to or from the servers running any system.",jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("span",{className:"subordinate",children:" g."}),"Use the Website or access to it to impersonate any person or entity, or to falsely state or otherwise misrepresent its affiliation with any person or entity;",jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("span",{className:"subordinate",children:" h."}),"Restrict or inhibit the ability of any other person to access or use the Website; and",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("span",{className:"subordinate",children:" i."}),"Modify, adapt or translate any portion of the Website"]}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 14. "}),"You are also responsible for ensuring that any persons with access to our Website through your internet connection are aware of these terms of use and the other applicable terms and conditions listed above, and that they comply with them. Our Website are made available free of charge."]})]}),jsxRuntimeExports.jsxs("div",{className:"privacyTxts",children:[jsxRuntimeExports.jsx("div",{className:"privacyLine","data-aos":"fade-right"}),jsxRuntimeExports.jsx("div",{className:"loanDetailsTitle",children:jsxRuntimeExports.jsx("h1",{className:"PrivacyTitle","data-aos":"fade-right",children:jsxRuntimeExports.jsx("span",{className:"titleName",children:"Personal Information"})})}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 15. "}),'To meet our Know Your Customer (“KYC”) and Anti-Money Laundering (“AML”) obligations, we may require you to provide any or all the following: your full name; your date of birth; your Bank Verification Number ("BVN"); your current residential address; your picture; Copy of a valid Government issued ID (national ID, international passport, permanent voter’s card or driver’s license); copy of recent utility bill, bank statement, affidavit, or another bill, dated within three months of our request, which carries your name and address; any other information or document as we may require for our internal risk assessment.']}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 16. "}),"You warrant that all information and documentation provided to us are true, correct, and accurate. You also undertake to notify us of any changes to the information or documentation which you have provided."]}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 17. "}),"You hereby agree and authorise egochain to verify information provided by you against the information held by any third party (including official databases) such as, banks, Payment System Providers any other information bank available to egochain."]}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 18. "}),"The information that egochain may verify against the information which you have provided to us include (without limitation): your name, phone number, date of birth, address, age, Identification Number (“ID”) or Passport Number and such other information that will enable egochain to identify you and comply with the regulatory “Know Your Customer” requirements (together the “Personal Information”)."]}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 19. "}),"You hereby consent to egochain verifying the Personal Information and the Relevant Information and using the Personal Information and the Relevant Information to the extent necessary in egochain’s opinion for the provision of its Services."]}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 20. "}),"You agree to indentify and hold egochain and the Third Party Partners harmless with respect to any claims, losses, liabilities and expenses (including legal fees and expenses) that may arise as a result of the disclosure and reliance on such Personal Information and/or Relevant Information."]})]}),jsxRuntimeExports.jsxs("div",{className:"privacyTxts",children:[jsxRuntimeExports.jsx("div",{className:"privacyLine","data-aos":"fade-right"}),jsxRuntimeExports.jsx("div",{className:"loanDetailsTitle",children:jsxRuntimeExports.jsx("h1",{className:"PrivacyTitle","data-aos":"fade-right",children:jsxRuntimeExports.jsx("span",{className:"titleName",children:"Consent to Data Collection"})})}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 21. "}),"By using our Services, you consent to us collecting and using technical information about the Equipment and related software, hardware and peripherals for Services that are internet-based or wireless to improve our products and to provide any Services to you. If you use these Services, you consent to us and our affiliates' and partners’ transmission, collection, retention, maintenance, processing and use of your data to improve our Services and/or your experience while using egochain."]})]}),jsxRuntimeExports.jsxs("div",{className:"privacyTxts",children:[jsxRuntimeExports.jsx("div",{className:"privacyLine","data-aos":"fade-right"}),jsxRuntimeExports.jsx("div",{className:"loanDetailsTitle",children:jsxRuntimeExports.jsx("h1",{className:"PrivacyTitle","data-aos":"fade-right",children:jsxRuntimeExports.jsx("span",{className:"titleName",children:"Intellectual Property Rights."})})}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 22. "}),"The intellectual property rights in the Website and copyright in all material stored, displayed and accessible on the Website is either owned us or duly licensed by third parties. All such rights are reserved."]})]}),jsxRuntimeExports.jsxs("div",{className:"privacyTxts",children:[jsxRuntimeExports.jsx("div",{className:"privacyLine","data-aos":"fade-right"}),jsxRuntimeExports.jsx("div",{className:"loanDetailsTitle",children:jsxRuntimeExports.jsx("h1",{className:"PrivacyTitle","data-aos":"fade-right",children:jsxRuntimeExports.jsx("span",{className:"titleName",children:"Governing Law and Dispute Resolution"})})}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 23. "}),"This website is subject to the laws and regulations of Nigeria. You irrevocably agree that any dispute between you and egochain will be governed by the laws of Nigeria and any cause of action you may have hereunder or with respect to your use of the website must be commenced by resort to an arbitration in accordance with Arbitration and Conciliation Act Cap A18 Laws of the Federation of Nigeria 2004"]}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 24. "}),"You also agree and consent that any cause of action you may submit in connection with your use of the website or pursuant to these terms will be filed within six months after the incident upon which the claim or cause of action is based first occurred"]}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 25. "}),'You and egochain agree to bring any Dispute in arbitration on an individual basis only, and not as a class or collective action. There will be no right or authority for any Dispute to be brought, heard or arbitrated as a class or collective action ("Class Action Waiver"). Regardless of anything else in this Arbitration Agreement and/or the applicable Arbitration Rules, the interpretation, applicability, enforceability or formation of the Class Action Waiver may only be determined by a court and not an arbitrator.']})]}),jsxRuntimeExports.jsxs("div",{className:"privacyTxts",children:[jsxRuntimeExports.jsx("div",{className:"privacyLine","data-aos":"fade-right"}),jsxRuntimeExports.jsx("div",{className:"loanDetailsTitle",children:jsxRuntimeExports.jsx("h1",{className:"PrivacyTitle","data-aos":"fade-right",children:jsxRuntimeExports.jsx("span",{className:"titleName",children:"Amendment to the Terms"})})}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 26. "}),"We reserve the right, at our sole and absolutes discretion, to change, modify, add to, supplement or delete any of the terms and conditions of this Agreement at any time, effective with or without prior notice. If any future changes to this Agreement are unacceptable to you or cause you to no longer be in compliance with this Agreement, you must terminate, and immediately stop using, the website. Your continued use of the website following any revision to this Agreement constitutes your complete and irrevocable acceptance of any and all such changes. Please check this page from time to time to take notice of any changes we made, as they are binding on you."]})]})]})]}),jsxRuntimeExports.jsx("img",{src:"/img/projects-blurbg.png",alt:"",className:"privacyBlurBg"}),jsxRuntimeExports.jsx("img",{src:"/img/privacy-rightbg.png",alt:"",className:"privacyrightBlurBg"})]})});function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose$1(e,i){if(e==null)return{};var s={},a=Object.keys(e),o,c;for(c=0;c<a.length;c++)o=a[c],!(i.indexOf(o)>=0)&&(s[o]=e[o]);return s}const PRE_ENTER=0,ENTERING=1,ENTERED=2,PRE_EXIT=3,EXITING=4,EXITED=5,UNMOUNTED=6,STATUS=["preEnter","entering","entered","preExit","exiting","exited","unmounted"],getState=e=>({_s:e,status:STATUS[e],isEnter:e<PRE_EXIT,isMounted:e!==UNMOUNTED,isResolved:e===ENTERED||e>EXITING}),startOrEnd=e=>e?UNMOUNTED:EXITED,getEndStatus=(e,i)=>{switch(e){case ENTERING:case PRE_ENTER:return ENTERED;case EXITING:case PRE_EXIT:return startOrEnd(i)}},getTimeout=e=>typeof e=="object"?[e.enter,e.exit]:[e,e],nextTick=(e,i)=>setTimeout(()=>{isNaN(document.body.offsetTop)||e(i+1)},0),initialStateMap=new Map,initialConfigMap=new Map,updateState=(e,i,s,a,o,c)=>{clearTimeout(o);const d=getState(i),g=new Map(a.current);g.set(e,d),s(g),a.current=g,c&&c({key:e,current:d})},useTransitionMap=({allowMultiple:e,enter:i=!0,exit:s=!0,preEnter:a,preExit:o,timeout:c,initialEntered:d,mountOnEnter:g,unmountOnExit:b,onStateChange:j}={})=>{const[_e,$]=reactExports.useState(initialStateMap),rt=reactExports.useRef(_e),st=reactExports.useRef(initialConfigMap),[ut,gt]=getTimeout(c),wt=reactExports.useCallback((kt,Pt)=>{const{initialEntered:It=d}=Pt||{},Lt=It?ENTERED:startOrEnd(g);updateState(kt,Lt,$,rt),st.current.set(kt,{})},[d,g]),yt=reactExports.useCallback(kt=>{const Pt=new Map(rt.current);return Pt.delete(kt)?($(Pt),rt.current=Pt,st.current.delete(kt),!0):!1},[]),At=reactExports.useCallback(kt=>{const Pt=rt.current.get(kt);if(!Pt)return;const{timeoutId:It}=st.current.get(kt),Lt=getEndStatus(Pt._s,b);Lt&&updateState(kt,Lt,$,rt,It,j)},[j,b]),Ct=reactExports.useCallback((kt,Pt)=>{const It=rt.current.get(kt);if(!It)return;const Lt=st.current.get(kt),Nt=dr=>{switch(updateState(kt,dr,$,rt,Lt.timeoutId,j),dr){case ENTERING:ut>=0&&(Lt.timeoutId=setTimeout(()=>At(kt),ut));break;case EXITING:gt>=0&&(Lt.timeoutId=setTimeout(()=>At(kt),gt));break;case PRE_ENTER:case PRE_EXIT:Lt.timeoutId=nextTick(Nt,dr);break}},Ht=It.isEnter;typeof Pt!="boolean"&&(Pt=!Ht),Pt?Ht||(Nt(i?a?PRE_ENTER:ENTERING:ENTERED),!e&&rt.current.forEach((dr,hs)=>hs!==kt&&Ct(hs,!1))):Ht&&Nt(s?o?PRE_EXIT:EXITING:startOrEnd(b))},[j,At,e,i,s,a,o,ut,gt,b]),Tt=reactExports.useCallback(kt=>{if(!(!e&&kt!==!1))for(const Pt of rt.current.keys())Ct(Pt,kt)},[e,Ct]);return{stateMap:_e,toggle:Ct,toggleAll:Tt,endTransition:At,setItem:wt,deleteItem:yt}},_excluded$6=["transition","transitionTimeout"],getTransition=(e,i)=>e===!0||!!(e&&e[i]),useAccordionProvider=(e={})=>{let{transition:i,transitionTimeout:s}=e,a=_objectWithoutPropertiesLoose$1(e,_excluded$6);const o=useTransitionMap(_extends({timeout:s,enter:getTransition(i,"enter"),exit:getTransition(i,"exit"),preEnter:getTransition(i,"preEnter"),preExit:getTransition(i,"preExit")},a));return _extends({mountOnEnter:!!a.mountOnEnter,initialEntered:!!a.initialEntered},o)},ACCORDION_BLOCK="szh-accordion",ACCORDION_PREFIX="szh-adn",ACCORDION_ATTR=`data-${ACCORDION_PREFIX}`,ACCORDION_BTN_ATTR=`data-${ACCORDION_PREFIX}-btn`,AccordionContext=reactExports.createContext({}),bem=(e,i,s)=>(a,o)=>{const c=i?`${e}__${i}`:e;let d=c;s&&Object.keys(s).forEach(b=>{const j=s[b];j&&(d+=` ${c}--${j===!0?b:`${b}-${j}`}`)});let g=typeof a=="function"?a(o):a;return typeof g=="string"&&(g=g.trim(),g&&(d+=` ${g}`)),d},mergeProps=(e,i)=>{if(!i)return e;const s=_extends({},e);return Object.keys(i).forEach(a=>{const o=e[a],c=i[a];typeof c=="function"&&o?s[a]=(...d)=>{o(...d),c(...d)}:s[a]=c}),s},AccordionProvider=e=>jsxRuntimeExports.jsx(AccordionContext.Provider,_extends({},e)),getAccordion=e=>{do e=e.parentElement;while(e&&!e.hasAttribute(ACCORDION_ATTR));return e},getNextIndex=(e,i,s)=>e?i>0?i-1:s-1:(i+1)%s,moveFocus=(e,i)=>{const{activeElement:s}=document;if(!s||!s.hasAttribute(ACCORDION_BTN_ATTR)||getAccordion(s)!==i.currentTarget)return;const a=i.currentTarget.querySelectorAll(`[${ACCORDION_BTN_ATTR}]`),{length:o}=a;for(let c=0;c<o;c++)if(a[c]===s){let d=getNextIndex(e,c,o);for(;getAccordion(a[c])!==getAccordion(a[d]);)d=getNextIndex(e,d,o);c!==d&&(i.preventDefault(),a[d].focus());break}},useAccordion=()=>({accordionProps:{[ACCORDION_ATTR]:"",onKeyDown:i=>i.key==="ArrowUp"?moveFocus(!0,i):i.key==="ArrowDown"&&moveFocus(!1,i)}}),_excluded$5=["providerValue","className"],ControlledAccordion=reactExports.forwardRef((e,i)=>{let{providerValue:s,className:a}=e,o=_objectWithoutPropertiesLoose$1(e,_excluded$5);const{accordionProps:c}=useAccordion();return jsxRuntimeExports.jsx(AccordionProvider,{value:s,children:jsxRuntimeExports.jsx("div",_extends({},mergeProps(c,o),{ref:i,className:bem(ACCORDION_BLOCK)(a)}))})});ControlledAccordion.displayName="ControlledAccordion";const _excluded$4=["allowMultiple","initialEntered","mountOnEnter","unmountOnExit","transition","transitionTimeout","onStateChange"],Accordion=reactExports.forwardRef((e,i)=>{let{allowMultiple:s,initialEntered:a,mountOnEnter:o,unmountOnExit:c,transition:d,transitionTimeout:g,onStateChange:b}=e,j=_objectWithoutPropertiesLoose$1(e,_excluded$4);const _e=useAccordionProvider({allowMultiple:s,initialEntered:a,mountOnEnter:o,unmountOnExit:c,transition:d,transitionTimeout:g,onStateChange:b});return jsxRuntimeExports.jsx(ControlledAccordion,_extends({},j,{ref:i,providerValue:_e}))});Accordion.displayName="Accordion";let current=0;const useIdShim=()=>{const[e,i]=reactExports.useState();return reactExports.useEffect(()=>i(++current),[]),e&&`${ACCORDION_PREFIX}-${e}`},useId=React$1.useId||useIdShim,useAccordionItem=({state:e,toggle:i,disabled:s})=>{const a=useId(),o=a&&a+"-",c={id:a,"aria-controls":o,"aria-expanded":e.isEnter,onClick:i};return s?c.disabled=!0:c[ACCORDION_BTN_ATTR]="",{buttonProps:c,panelProps:{id:o,"aria-labelledby":a,role:"region"}}},useIsomorphicLayoutEffect=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?reactExports.useLayoutEffect:reactExports.useEffect,useHeightTransition=({status:e,isResolved:i})=>{const[s,a]=reactExports.useState(),o=reactExports.useRef(null);return useIsomorphicLayoutEffect(()=>{(e==="preEnter"||e==="preExit")&&a(o.current.getBoundingClientRect().height)},[e]),[{height:e==="preEnter"||e==="exiting"?0:e==="entering"||e==="preExit"?s:void 0,overflow:i?void 0:"hidden"},o]};function setRef(e,i){typeof e=="function"?e(i):e.current=i}function useMergeRef(e,i){return reactExports.useMemo(()=>e?i?s=>{setRef(e,s),setRef(i,s)}:e:i,[e,i])}const getItemState=(e,i,s)=>{const{stateMap:a,mountOnEnter:o,initialEntered:c}=e,d=s??c;return a.get(i)||{status:d?"entered":o?"unmounted":"exited",isMounted:!o,isEnter:d,isResolved:!0}},useAccordionContext=()=>reactExports.useContext(AccordionContext),useAccordionItemEffect=({itemKey:e,initialEntered:i,disabled:s}={})=>{const a=reactExports.useRef(null),o=useAccordionContext(),c=e??a.current,d=getItemState(o,c,i),{setItem:g,deleteItem:b,toggle:j}=o;return reactExports.useEffect(()=>{if(s)return;const _e=e??a.current;return g(_e,{initialEntered:i}),()=>void b(_e)},[g,b,e,i,s]),{itemRef:a,state:d,toggle:reactExports.useCallback(_e=>j(c,_e),[j,c])}},_excluded$3=["itemKey","initialEntered"],withAccordionItem=e=>{const i=reactExports.forwardRef((s,a)=>{let{itemKey:o,initialEntered:c}=s,d=_objectWithoutPropertiesLoose$1(s,_excluded$3);return jsxRuntimeExports.jsx(e,_extends({forwardedRef:a},d,useAccordionItemEffect({itemKey:o,initialEntered:c,disabled:d.disabled})))});return i.displayName="WithAccordionItem",i},_excluded$2=["forwardedRef","itemRef","state","toggle","className","disabled","header","headingTag","headingProps","buttonProps","contentProps","panelProps","children"],getRenderNode=(e,i)=>typeof e=="function"?e(i):e,WrappedItem=reactExports.memo(e=>{let{forwardedRef:i,itemRef:s,state:a,toggle:o,className:c,disabled:d,header:g,headingTag:b="h3",headingProps:j,buttonProps:_e,contentProps:$,panelProps:rt,children:st}=e,ut=_objectWithoutPropertiesLoose$1(e,_excluded$2);const gt={state:a,toggle:o,disabled:d},{buttonProps:wt,panelProps:yt}=useAccordionItem(gt),[At,Ct]=useHeightTransition(a),Tt=useMergeRef(rt&&rt.ref,Ct),{status:kt,isMounted:Pt,isEnter:It}=a;return jsxRuntimeExports.jsxs("div",_extends({},ut,{ref:useMergeRef(i,s),className:bem(ACCORDION_BLOCK,"item",{status:kt,expanded:It})(c,a),children:[jsxRuntimeExports.jsx(b,_extends({},j,{style:_extends({margin:0},j&&j.style),className:bem(ACCORDION_BLOCK,"item-heading")(j&&j.className,a),children:jsxRuntimeExports.jsx("button",_extends({},mergeProps(wt,_e),{type:"button",className:bem(ACCORDION_BLOCK,"item-btn")(_e&&_e.className,a),children:getRenderNode(g,gt)}))})),Pt&&jsxRuntimeExports.jsx("div",_extends({},$,{style:_extends({display:kt==="exited"?"none":void 0},At,$&&$.style),className:bem(ACCORDION_BLOCK,"item-content")($&&$.className,a),children:jsxRuntimeExports.jsx("div",_extends({},mergeProps(yt,rt),{ref:Tt,className:bem(ACCORDION_BLOCK,"item-panel")(rt&&rt.className,a),children:getRenderNode(st,gt)}))}))]}))});WrappedItem.displayName="AccordionItem";const AccordionItem$1=withAccordionItem(WrappedItem),chevronDown="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20class='icon%20icon-tabler%20icon-tabler-chevron-down'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20stroke-width='2'%20stroke='%23fff'%20fill='none'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3cpath%20stroke='none'%20d='M0%200h24v24H0z'%20fill='none'/%3e%3cpolyline%20points='6%209%2012%2015%2018%209'%20/%3e%3c/svg%3e",list="_list_afula_5",info="_info_afula_9",accordion="_accordion_afula_16",item="_item_afula_21",itemBtn="_itemBtn_afula_25",itemBtnExpanded="_itemBtnExpanded_afula_43",itemContent="_itemContent_afula_47",itemPanel="_itemPanel_afula_51",chevron="_chevron_afula_55",styles={list,info,accordion,item,itemBtn,itemBtnExpanded,itemContent,itemPanel,chevron},AccordionItem=({header:e,...i})=>jsxRuntimeExports.jsx(AccordionItem$1,{...i,header:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[e,jsxRuntimeExports.jsx("img",{className:styles.chevron,src:chevronDown,alt:"Chevron Down"})]}),className:styles.item,buttonProps:{className:({isEnter:s})=>`${styles.itemBtn} ${s&&styles.itemBtnExpanded}`},contentProps:{className:styles.itemContent},panelProps:{className:styles.itemPanel}}),WhitePaper=()=>{const[e,i]=reactExports.useState(null);return reactExports.useEffect(()=>{const s=document.getElementById("content"),a=()=>{const o=s.scrollTop;document.querySelectorAll(".whitePaper_div_area_body_area_section").forEach(d=>{const g=d.getAttribute("id"),b=d.offsetTop-50;o>=b&&i(g)})};return s.addEventListener("scroll",a),()=>{s.removeEventListener("scroll",a)}},[]),jsxRuntimeExports.jsxs("div",{className:"whitepaper_div",children:[jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsxs("div",{className:"whitePaper_div_area_body",children:[jsxRuntimeExports.jsxs("div",{className:"whitePaper_div_area_body_side",id:"sidebar",children:[jsxRuntimeExports.jsx("div",{className:e==="abstract"?"active":" whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#abstract",children:"Abstract"})}),jsxRuntimeExports.jsx("div",{className:e==="introduction"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#introduction",children:"Introduction"})}),jsxRuntimeExports.jsx("div",{className:e==="Production of affordable EVs"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Production of affordable EVs",children:"Production of affordable EVs"})}),jsxRuntimeExports.jsx("div",{className:e==="Streamlining Manufacturing and Boosting Accessibility"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Streamlining Manufacturing and Boosting Accessibility",children:"Streamlining Manufacturing and Boosting Accessibility"})}),jsxRuntimeExports.jsx("div",{className:e==="Benefits Beyond Cost Savings"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#in-mcd-we-trust",children:"Benefits Beyond Cost Savings"})}),jsxRuntimeExports.jsx("div",{className:e==="Charging costs & Improved charging infrastructure"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Charging costs & Improved charging infrastructure",children:"Charging costs & Improved charging infrastructure"})}),jsxRuntimeExports.jsx("div",{className:e==="Transparency, Efficiency, and Incentives"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Transparency, Efficiency, and Incentives",children:"Transparency, Efficiency, and Incentives"})}),jsxRuntimeExports.jsx("div",{className:e==="Earning Rewards in the Egochain Ecosystem: Pathways to Participation"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Earning Rewards in the Egochain Ecosystem: Pathways to Participation",children:"Earning Rewards in the Egochain Ecosystem: Pathways to Participation"})}),jsxRuntimeExports.jsx("div",{className:e==="Fueling Growth Through Rewards"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Fueling Growth Through Rewards",children:"Fueling Growth Through Rewards"})}),jsxRuntimeExports.jsx("div",{className:e==="Earning with Vesting and Liquid Ownership"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Earning with Vesting and Liquid Ownership",children:"Earning with Vesting and Liquid Ownership"})}),jsxRuntimeExports.jsx("div",{className:e==="The Egochain Coin (EGAX)"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#The Egochain Coin (EGAX)",children:"The Egochain Coin (EGAX)"})}),jsxRuntimeExports.jsx("div",{className:e==="The EGC Coin (EGC)"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#The EGC Coin (EGC)",children:"The EGC Coin (EGC)"})}),jsxRuntimeExports.jsx("div",{className:e==="Smart Electric Vehicles"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Smart Electric Vehicles",children:"Smart Electric Vehicles"})}),jsxRuntimeExports.jsx("div",{className:e==="Tokenization"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Tokenization",children:"Tokenization"})}),jsxRuntimeExports.jsx("div",{className:e==="Unlocking Value Through Collateralization"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Unlocking Value Through Collateralization",children:"Unlocking Value Through Collateralization"})}),jsxRuntimeExports.jsx("div",{className:e==="Enhancing Transparency, Empowering Lending"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Enhancing Transparency, Empowering Lending",children:"Enhancing Transparency, Empowering Lending"})}),jsxRuntimeExports.jsx("div",{className:e==="Beyond Redefining Ownership"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Beyond Redefining Ownership",children:"Beyond Redefining Ownership"})}),jsxRuntimeExports.jsx("div",{className:e==="Distributing Egax Coin"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Distributing Egax Coin",children:"Distributing Egax Coin"})}),jsxRuntimeExports.jsx("div",{className:e==="Electric Vehicle Smart Charging System"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Electric Vehicle Smart Charging System",children:"Electric Vehicle Smart Charging System"})}),jsxRuntimeExports.jsx("div",{className:e==="Smart Charging Architecture"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Smart Charging Architecture",children:"Smart Charging Architecture"})}),jsxRuntimeExports.jsx("div",{className:e==="Charging Algorithm and Flexibility Offers"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Charging Algorithm and Flexibility Offers",children:"Charging Algorithm and Flexibility Offers"})}),jsxRuntimeExports.jsx("div",{className:e==="Determining Electric Vehicle (EV) Flexibility for Next Time Step"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Determining Electric Vehicle (EV) Flexibility for Next Time Step",children:"Determining Electric Vehicle (EV) Flexibility for Next Time Step"})}),jsxRuntimeExports.jsx("div",{className:e==="Decentralized Secure Charging with Egochain"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Decentralized Secure Charging with Egochain",children:"Decentralized Secure Charging with Egochain"})}),jsxRuntimeExports.jsx("div",{className:e==="Simulation Parameters"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Simulation Parameters",children:"Simulation Parameters"})}),jsxRuntimeExports.jsx("div",{className:e==="Dynamic Charging Model Based on User Activity"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Dynamic Charging Model Based on User Activity",children:"Dynamic Charging Model Based on User Activity"})}),jsxRuntimeExports.jsx("div",{className:e==="Simulation Scenarios and Methodology"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Simulation Scenarios and Methodology",children:"Simulation Scenarios and Methodology"})}),jsxRuntimeExports.jsx("div",{className:e==="Results and Discussion"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Results and Discussion",children:"Results and Discussion"})}),jsxRuntimeExports.jsx("div",{className:e==="Conclusion"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Conclusion",children:"Conclusion"})})]}),jsxRuntimeExports.jsx("div",{className:"mobile_header",children:jsxRuntimeExports.jsx("div",{className:"mobile_header_area",children:jsxRuntimeExports.jsx(Accordion,{children:jsxRuntimeExports.jsxs(AccordionItem,{header:"Menu ",children:[jsxRuntimeExports.jsxs("div",{className:"mobile_header_links_area",children:[jsxRuntimeExports.jsx("div",{className:e==="abstract"?"active":" whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#abstract",children:"Abstract"})}),jsxRuntimeExports.jsx("div",{className:e==="introduction"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#introduction",children:"Introduction"})}),jsxRuntimeExports.jsx("div",{className:e==="Production of affordable EVs"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Production of affordable EVs",children:"Production of affordable EVs"})}),jsxRuntimeExports.jsx("div",{className:e==="Streamlining Manufacturing and Boosting Accessibility"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Streamlining Manufacturing and Boosting Accessibility",children:"Streamlining Manufacturing and Boosting Accessibility"})}),jsxRuntimeExports.jsx("div",{className:e==="Benefits Beyond Cost Savings"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#in-mcd-we-trust",children:"Benefits Beyond Cost Savings"})}),jsxRuntimeExports.jsx("div",{className:e==="Charging costs & Improved charging infrastructure"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Charging costs & Improved charging infrastructure",children:"Charging costs & Improved charging infrastructure"})}),jsxRuntimeExports.jsx("div",{className:e==="Transparency, Efficiency, and Incentives"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Transparency, Efficiency, and Incentives",children:"Transparency, Efficiency, and Incentives"})}),jsxRuntimeExports.jsx("div",{className:e==="Earning Rewards in the Egochain Ecosystem: Pathways to Participation"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Earning Rewards in the Egochain Ecosystem: Pathways to Participation",children:"Earning Rewards in the Egochain Ecosystem: Pathways to Participation"})}),jsxRuntimeExports.jsx("div",{className:e==="Fueling Growth Through Rewards"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Fueling Growth Through Rewards",children:"Fueling Growth Through Rewards"})}),jsxRuntimeExports.jsx("div",{className:e==="Earning with Vesting and Liquid Ownership"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Earning with Vesting and Liquid Ownership",children:"Earning with Vesting and Liquid Ownership"})}),jsxRuntimeExports.jsx("div",{className:e==="The Egochain Coin (EGAX)"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#The Egochain Coin (EGAX)",children:"The Egochain Coin (EGAX)"})}),jsxRuntimeExports.jsx("div",{className:e==="The EGC Coin (EGC)"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#The EGC Coin (EGC)",children:"The EGC Coin (EGC)"})}),jsxRuntimeExports.jsx("div",{className:e==="Smart Electric Vehicles"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Smart Electric Vehicles",children:"Smart Electric Vehicles"})}),jsxRuntimeExports.jsx("div",{className:e==="Tokenization"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Tokenization",children:"Tokenization"})}),jsxRuntimeExports.jsx("div",{className:e==="Unlocking Value Through Collateralization"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Unlocking Value Through Collateralization",children:"Unlocking Value Through Collateralization"})}),jsxRuntimeExports.jsx("div",{className:e==="Enhancing Transparency, Empowering Lending"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Enhancing Transparency, Empowering Lending",children:"Enhancing Transparency, Empowering Lending"})}),jsxRuntimeExports.jsx("div",{className:e==="Beyond Redefining Ownership"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Beyond Redefining Ownership",children:"Beyond Redefining Ownership"})}),jsxRuntimeExports.jsx("div",{className:e==="Distributing Egax Coin"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Distributing Egax Coin",children:"Distributing Egax Coin"})}),jsxRuntimeExports.jsx("div",{className:e==="Electric Vehicle Smart Charging System"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Electric Vehicle Smart Charging System",children:"Electric Vehicle Smart Charging System"})}),jsxRuntimeExports.jsx("div",{className:e==="Smart Charging Architecture"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Smart Charging Architecture",children:"Smart Charging Architecture"})}),jsxRuntimeExports.jsx("div",{className:e==="Charging Algorithm and Flexibility Offers"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Charging Algorithm and Flexibility Offers",children:"Charging Algorithm and Flexibility Offers"})}),jsxRuntimeExports.jsx("div",{className:e==="Determining Electric Vehicle (EV) Flexibility for Next Time Step"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Determining Electric Vehicle (EV) Flexibility for Next Time Step",children:"Determining Electric Vehicle (EV) Flexibility for Next Time Step"})}),jsxRuntimeExports.jsx("div",{className:e==="Decentralized Secure Charging with Egochain"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Decentralized Secure Charging with Egochain",children:"Decentralized Secure Charging with Egochain"})}),jsxRuntimeExports.jsx("div",{className:e==="Simulation Parameters"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Simulation Parameters",children:"Simulation Parameters"})}),jsxRuntimeExports.jsx("div",{className:e==="Dynamic Charging Model Based on User Activity"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Dynamic Charging Model Based on User Activity",children:"Dynamic Charging Model Based on User Activity"})}),jsxRuntimeExports.jsx("div",{className:e==="Simulation Scenarios and Methodology"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Simulation Scenarios and Methodology",children:"Simulation Scenarios and Methodology"})}),jsxRuntimeExports.jsx("div",{className:e==="Results and Discussion"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Results and Discussion",children:"Results and Discussion"})}),jsxRuntimeExports.jsx("div",{className:e==="Conclusion"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Conclusion",children:"Conclusion"})})]})," "]})})})}),jsxRuntimeExports.jsxs("div",{className:"whitePaper_div_area_body_area",id:"content",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_title",children:"Egochain: Incentivized Operating System for Electric Vehicles Powered by Blockchain Technology."}),jsxRuntimeExports.jsxs("section",{id:"abstract",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Abstract"})," ","Electric vehicles (EVs) offer a promising path towards sustainable transportation, widespread adoption remains hindered by high price points, underdeveloped charging infrastructure, and prohibitive charging costs. This whitepaper proposes Egochain, a blockchain-based solution designed to ignite a global EV revolution by overcoming these key barriers."]}),jsxRuntimeExports.jsxs("section",{id:"introduction",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Introduction"})," ","The undeniable force of transportation in our daily lives confronts us with a stark reality: change, however necessary, often faces an uphill battle against established social norms. Despite growing awareness of Electric Vehicles (EVs), only a fraction of the global population (less than 30%) has firsthand experience with this burgeoning technology. Yet, EVs are poised to redefine our relationship with transportation, with their global market share projected to leap from 16% in 2022 to 20% by 2023 (considering only battery electric and plug-in hybrid EVs).",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"While EV adoption is accelerating, cost remains a crucial obstacle. Soaring gasoline prices provide a compelling incentive, but high vehicle costs, underdeveloped charging infrastructure, and prohibitively expensive charging fees act as roadblocks to widespread adoption.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"This is where Egochain steps in, armed with the transformative power of blockchain technology.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Egochain envisions a future where EVs are not just a novelty, but a readily accessible and affordable transportation option for all. Our blockchain platform unlocks these possibilities through:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("li",{children:"Production of affordable EVs: By enhancing transparency and efficiency, Egochain can optimize EV manufacturing processes, driving down costs and fostering wider production of affordable electric vehicles."}),jsxRuntimeExports.jsx("li",{children:"Reduced charging costs: The secure and decentralized nature of the blockchain enables more efficient development and management of charging stations, resulting in lower charging fees for drivers."}),jsxRuntimeExports.jsx("li",{children:"Profitable charging infrastructure: Egochain offers attractive rewards and simplifies operations for those wishing to invest in charging stations, rapidly expanding access to vital charging points."})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Egochain goes beyond merely acknowledging the barriers to EV adoption. It provides a comprehensive solution, leveraging the power of blockchain to break down these hurdles and pave the way for a more sustainable and accessible transportation future."]}),jsxRuntimeExports.jsxs("section",{id:"Production of affordable EVs",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Production of affordable EVs"})," ","The electric vehicle (EV) industry faces a significant hurdle: cost. EVs generally carry a higher price tag than their gasoline-powered counterparts, primarily due to battery technology. These batteries require costly raw materials and substantial capacity to meet range expectations, driving up overall costs. Even excluding battery expenses, the sheer abundance of existing gas-powered vehicles pushes their prices down further, widening the affordability gap. While EVs often boast lower operating costs in the long run, the initial purchase barrier remains a formidable obstacle, particularly for budget-conscious consumers in developing economies.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Chart",jsxRuntimeExports.jsx("img",{src:"/img/ev_purchase_chart_reason.svg",alt:""})," "]}),jsxRuntimeExports.jsxs("section",{id:"Streamlining Manufacturing and Boosting Accessibility",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Streamlining Manufacturing and Boosting Accessibility"})," ","Egochain's transparent and efficient blockchain technology offers a solution to streamline EV manufacturing, ultimately making them more accessible.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Here is how:",jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("b",{children:" Cost Reduction Through Transparent Supply Chains:"})," ","Egochain's track-and- trace capabilities enable manufacturers to eliminate counterfeit parts and diversion within their supply chains. This not only safeguards quality but also minimizes waste and cost overruns associated with managing fraudulent components."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("b",{children:" Enhanced Profitability with Efficient Recalls:"})," ","Traditional recalls often involve entire model years due to uncertainties regarding the origin of problematic parts. Egochain's precise tracking allows targeted recalls, focusing only on vehicles equipped with components from the affected supplier. This significantly reduces the recall's scope and associated expenses."]})]})]}),jsxRuntimeExports.jsxs("section",{id:"Benefits Beyond Cost Savings",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Benefits Beyond Cost Savings"})," ","The benefits of Egochain extend beyond mere cost reduction:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("b",{children:" Increased Consumer Confidence:"})," Enhanced transparency fosters trust by assuring consumers of the provenance and quality of their EVs."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("b",{children:" Sustainability Advancement: "})," Eliminating waste and optimizing resource use within the supply chain contributes to a more sustainable automotive industry."]})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Egochain's blockchain technology positions itself as a key facilitator in overcoming the cost barrier hindering wider EV adoption, opening doors for a greener future."]}),jsxRuntimeExports.jsxs("section",{id:"Charging costs & Improved charging infrastructure",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Charging costs & Improved charging infrastructure"})," ",`Despite the surging popularity of electric vehicles (EVs) in countries like Norway, Sweden, and the UK, a lack of readily available public charging stations remains a major obstacle to wider adoption. Euromonitor International's 2023 Voice of the Consumer: Mobility Survey identified poor charging infrastructure as the second most common reason for hesitation towards EVs, fueling "range anxiety" – the fear of running out of power before finding a charger.`,jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"The European Union's 2014 Alternative Fuel Infrastructure Directive (AFID) recommends a ratio of 10 EVs per charging station for member states. However, significant gaps persist. In 2022, countries like Norway (31 EVs per charger), Germany (23), the UK (19), and Denmark (18) fell short of this target.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Chart2",jsxRuntimeExports.jsx("img",{src:"/img/whitepaper_img2.svg",alt:""})," ",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Expanding public charging networks is crucial, particularly for urban dwellers living in apartments, where home charging is often infeasible. However, challenges exist. Public EV charging stations can be expensive to install, with Level 2 and DC fast chargers costing between $2,500 and $36,000, excluding installation and permits.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Adding to the complexity, unlike the consistent gallon-based pricing of gasoline, EV charging employs various structures, sometimes leading to confusing and potentially inflated costs. This inconsistency can disincentivize EV adoption due to consumer frustration and negative experiences."]}),jsxRuntimeExports.jsxs("section",{id:"Transparency, Efficiency, and Incentives",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Transparency, Efficiency, and Incentives"})," ","Egochain's blockchain technology offers a solution by enabling an open-source network of charging stations. The decentralized nature allows ownership by anyone, including local businesses like grocery stores. Transactions are securely recorded on the blockchain, reducing fraud and improving operational efficiency.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Beyond convenience, Egochain incentivizes green transportation by rewarding EV owners with tokens for using less popular stations. This balances grid load and promotes energy efficiency, contributing to a cleaner transportation ecosystem.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Tackling range anxiety through wider public EV charging infrastructure access is crucial for a successful transition to sustainable mobility. Egochain's blockchain- based approach delivers transparency, efficiency, and incentives, offering a promising path towards overcoming current obstacles and accelerating EV adoption."]}),jsxRuntimeExports.jsxs("section",{id:"Earning Rewards in the Egochain Ecosystem: Pathways to Participation",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Earning Rewards in the Egochain Ecosystem: Pathways to Participation"})," ","This section explores the fundamental concepts powering Egochain and the rewarding landscape for those who actively contribute to its success, ultimately accelerating the adoption of electric vehicles."]}),jsxRuntimeExports.jsxs("section",{id:"Fueling Growth Through Rewards",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Fueling Growth Through Rewards"})," ","Egochain welcomes contributions through two primary channels: debt and ownership. Both play crucial roles in propelling the expansion of electric vehicle adoption and boosting the value of its native currency. Within the ownership category, two distinct options exist: liquid and vesting. Vesting ownership implies a long-term commitment, locking tokens for a predetermined period, while liquid ownership grants immediate transferability."]}),jsxRuntimeExports.jsxs("section",{id:"Earning with Vesting and Liquid Ownership",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Earning with Vesting and Liquid Ownership"})," ",jsxRuntimeExports.jsx("b",{children:"Vesting Ownership:"})," Earn rewards continuously over time while demonstrating a long-term dedication to Egochain's mission. Tokens become gradually accessible, fostering deeper alignment between contributor interests and the ecosystem's long- term vision.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("b",{children:"Liquid Ownership:"})," Earn rewards continuously over time while demonstrating a long-term dedication to Egochain's mission. Tokens become gradually accessible, fostering deeper alignment between contributor interests and the ecosystem's long- term vision.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"By recognizing the diverse motivations of potential contributors, Egochain empowers individuals to choose the reward-earning path that best aligns with their goals and risk tolerance. This inclusive approach paves the way for a robust and diverse participation landscape, propelling the ecosystem towards its ambitious goals of widespread electric vehicle adoption."]}),jsxRuntimeExports.jsx("div",{className:"break_line_txt",children:"The Egochain blockchain interacts with two kinds of coins"}),jsxRuntimeExports.jsxs("section",{id:"The Egochain Coin (EGAX)",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"The Egochain Coin (EGAX)"})," ",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("b",{children:"EGAX"})," is the native token of Egochain, a blockchain platform specifically designed for the electric vehicle (EV) ecosystem. It serves as the lifeblood of this innovative network, powering transactions, incentivizing participation, and unlocking a new era of mobility.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("b",{children:"Fueling Adoption and Infrastructure"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{children:["➔ 80% of EGAX distribution rewards directly contribute to the heart of the EV ecosystem:",jsxRuntimeExports.jsx("br",{}),"◆ ",jsxRuntimeExports.jsx("b",{children:"EV drivers:"})," Incentivized through rebates, loyalty programs, and pay- per-use charging, encouraging widespread EV adoption.",jsxRuntimeExports.jsx("br",{})," ◆ ",jsxRuntimeExports.jsx("b",{children:" Charging station operators:"}),"Earning rewards for providing essential infrastructure and promoting a sustainable future.",jsxRuntimeExports.jsx("br",{}),"➔ This targeted distribution fosters a symbiotic relationship, fueling both demand and supply within the EV market."]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("b",{children:"Secure and Staking-Free Rewards"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("li",{children:"19% of EGAX is allocated to validators who secure the Egochain network through robust consensus mechanisms. This ensures the platform's stability and transparency, building trust and attracting further investment."}),jsxRuntimeExports.jsx("li",{children:"Uniquely, Egochain eliminates the complexities of staking by offering automatic claiming of earned EGAX for all users. This user-friendly approach maximizes accessibility and participation, making EGAX truly inclusive."}),jsxRuntimeExports.jsx("li",{children:"1%: EGC holders, providing passive income for supporting the ecosystem."})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("b",{children:"Frictionless Payments and Seamless Integration"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("b",{children:"Microtransactions:"})," EGAX boasts a minimal unit value, enabling smooth and efficient payments for even the smallest purchases, like individual charging sessions. This seamless experience encourages frequent engagement and fosters broader adoption."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("b",{children:"Built-in claiming: "})," Imagine claiming your earned EGAX directly through your EV! With APEX EVs, this futuristic vision becomes reality. Claiming rewards becomes an effortless part of your driving experience, further reinforcing the integration of EGAX into the everyday lives of EV users."]})]}),jsxRuntimeExports.jsx("br",{}),"EGAX represents more than just a coin; it's the key to unlocking a future where electric mobility thrives. Its unique design incentivizes participation, simplifies interaction, and fuels continuous growth within the EV ecosystem."]}),jsxRuntimeExports.jsxs("section",{id:"The EGC Coin (EGC)",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"The EGC Coin (EGC)"})," ",jsxRuntimeExports.jsx("br",{}),"Start-ups thrive on patient capital commitment. Investors recognize the years-long journey before reaping returns from their stakes. Short-term exits pose a significant challenge. New capital raised to fuel growth competes with existing shareholders seeking to cash out. Savvy investors prioritize capital contributions that propel company expansion, not appease those aiming for a quick escape.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Long-term commitment unlocks immense value. It empowers communities to chart future-focused plans. Stakeholder dedication aligns voting and decision-making with sustainable growth, rather than fleeting spikes. Conversely, the cryptocurrency landscape often witnesses speculators flitting between digital assets based on anticipated short-term gains.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Egochain envisions a community deeply invested in its long-term vision. Its unique model empowers users to commit their EGC COIN to lockup periods – one month, six months, or even a year – garnering platform benefits in return. Staked EGC balances remain non-transferable and non-divisible, effectively taking them off the open market. This deliberate design discourages short-term trading and fosters commitment. Stakers reap daily rewards, with EGC holders receiving 15% of the annual returns directly proportional to their locked stakes."]}),jsxRuntimeExports.jsxs("section",{id:"Smart Electric Vehicles",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Smart Electric Vehicles"})," ",jsxRuntimeExports.jsx("br",{}),'The seeds of smart vehicles were sown in the fertile ground of early Bitcoin projects. In 2013, Colored Coins emerged as a pioneering concept, offering a way to represent assets on the Bitcoin blockchain. This groundbreaking initiative laid the groundwork for the evolution of "smart property" within the nascent blockchain ecosystem.',jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"The year 2014 witnessed another pivotal moment with the advent of Counterparty. This platform empowered users to create their own tokens within the Bitcoin blockchain, representing a diverse range of assets from digital goods to tangible real estate and stocks. This versatility paved the way for the next milestone – the introduction of the Ethereum blockchain in 2015. Ethereum's revolutionary smart contracts enabled intricate, automated transactions on the blockchain, fostering the creation and management of intelligent property.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Fast forward to today, and we see tangible expressions of smart vehicle evolution in systems like car immobilizers. These devices enhance traditional keys with secure protocol exchanges, ensuring only authorized individuals with the correct cryptographic tokens can activate the engine. Their impact is undeniable; in Africa, cars equipped with immobilizers represent just 2% of stolen vehicles despite constituting 28% of the car population. This success extends beyond vehicles, with cryptographic measures safeguarding modern possessions like smartphones, rendering stolen devices inoperable and protecting sensitive information.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"While these advancements are noteworthy, the full potential of crypto-activated property remains largely unexplored. Traditionally, private keys reside within physical objects like keys or SIM cards, restricting their transfer and manipulation.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Smart vehicles challenge this paradigm by enabling ownership to be mediated through smart contracts.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Integrating smart property into blockchain ecosystems unlocks a plethora of benefits – reduced transaction costs, enhanced transparency, robust security, and perhaps most importantly, the democratization of asset ownership previously accessible only to a select few."]}),jsxRuntimeExports.jsxs("section",{id:"Tokenization",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Tokenization"})," ",jsxRuntimeExports.jsx("br",{}),"The burgeoning realm of smart electric vehicles (EVs) is poised for a paradigm shift with the emergence of tokenization. This innovative approach involves fragmenting ownership into digital tokens, each representing a stake in a specific vehicle. These tokens unlock a plethora of possibilities, fundamentally redefining automobile ownership and reshaping the landscape of automotive finance."]}),jsxRuntimeExports.jsxs("section",{id:"Unlocking Value Through Collateralization",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Unlocking Value Through Collateralization"})," ",jsxRuntimeExports.jsx("br",{}),"Imagine a world where owning a smart EV empowers you to tap into its value as a source of readily available credit. Tokenization makes this a reality. By leveraging your EV's inherent worth as collateral, you gain access to a wider range of loan options, potentially securing favorable terms and unlocking valuable financial flexibility. This benefit extends beyond individual owners, offering manufacturers a novel channel for asset-backed financing, diversifying their financial instruments and unlocking untapped potential."]}),jsxRuntimeExports.jsxs("section",{id:"Enhancing Transparency, Empowering Lending",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Enhancing Transparency, Empowering Lending"})," ",jsxRuntimeExports.jsx("br",{}),"The magic of tokenization lies in its inherent transparency. Built upon the immutable foundations of blockchain technology, ownership records and transaction history become readily accessible and tamper-proof. This creates a secure and transparent ecosystem, fostering trust and enabling lenders to make informed credit decisions based on the complete and accurate picture of an EV's value. This data-driven approach mitigates risk, fosters responsible lending practices, and creates a more robust financial infrastructure for all stakeholders."]}),jsxRuntimeExports.jsxs("section",{id:"Beyond Redefining Ownership",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Beyond Redefining Ownership"})," ",jsxRuntimeExports.jsx("br",{}),"The implications of smart EV tokenization extend far beyond ownership structures. It fosters a more inclusive financial ecosystem by empowering individuals and businesses to leverage their assets effectively. This fosters economic growth, stimulates innovation, and paves the way for a future where mobility and financial opportunity are intertwined.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"The burgeoning world of smart EV tokenization represents a watershed moment in the automotive and financial landscape. By unlocking the hidden value of vehicles, streamlining ownership transparency, and creating new avenues for financial inclusion, this technology holds the potential to revolutionize the way we own, finance, and experience mobility in the years to come."]}),jsxRuntimeExports.jsxs("section",{id:"Distributing Egax Coin",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Distributing Egax Coin"})," ",jsxRuntimeExports.jsx("br",{}),"The path to involvement in a cryptocurrency community offers two main avenues: ownership and contribution. Both approaches hold merit, with each user adding value to the currency's ecosystem. Mutual exchange facilitated by a transparent and reliable accounting system serves as the bedrock for value creation within these communities, where individuals earn rewards through the contributions they make to one another.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"However, achieving equitable distribution of a cryptocurrency presents a significant challenge. While computation-based mining methods like those employed by Bitcoin and Egochain offer specific functionalities, their scope tends to be limited. Activities like solving cryptographic puzzles or performing computations for rewards often yield benefits of marginal societal impact and offer limited direct advantages to the currency's community. Additionally, economies of scale and market forces often lead to centralization, restricting participation in such distribution mechanisms to specialized entities with extensive resources.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Therefore, it's crucial to recognize that computation-based mining ultimately resembles purchase, as it necessitates capital outlay for equipment or energy costs. Recognizing this inherent exchange dynamic highlights the need for alternative, more inclusive distribution models. Egochain's mileage-based approach, while innovative in its attempt to incentivize electric vehicle adoption, still relies on a pre-existing investment (vehicle ownership) and limits participant access.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Moving forward, exploring alternative distribution methods that prioritize accessibility, transparency, and genuine contribution to the community's goals will be crucial. By focusing on these principles, we can foster truly inclusive and sustainable cryptocurrency ecosystems where value creation is shared among all participants, not just a select few."]}),jsxRuntimeExports.jsxs("section",{id:"Electric Vehicle Smart Charging System",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Electric Vehicle Smart Charging System"})," ",jsxRuntimeExports.jsx("br",{}),"The burgeoning growth of electric vehicles (EVs) presents a significant challenge to power distribution grids. Unmanaged, the high-demand energy requirements of EV charging could overwhelm existing infrastructure. To address this, a robust platform is needed to optimize EV charging, balancing user needs with grid capacity. Failure to act will lead to charging station scarcity and grid congestion in the near future.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),'This paper proposes a novel smart EV charging infrastructure built on a Egochain blockchain platform. By capturing user-defined charging parameters (kWh & duration), the system leverages "smart charging" techniques to achieve grid stability. This innovative platform streamlines the ecosystem, connecting EV owners directly with charging stations, eliminating intermediaries. Egochain, a dedicated blockchain, facilitates flexible charging arrangements (power & time) through its native token rewards. This incentivizes off-peak charging, attracting investments to expand the charging network.',jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Our simulations demonstrate a remarkable 50% increase in user acceptance with this smart charging system, compared to traditional methods. This paves the way for a sustainable and efficient future of EV charging, ensuring grid stability and user satisfaction.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"While electric vehicle (EV) technology is still in its early stages, the future of transportation points towards widespread adoption. This rapid growth, however, poses a significant challenge to power grids. Charging an EV requires almost twenty times the power of a typical North American household. While current low EV penetration and strategically installed charging points prevent grid congestion for now, stricter emission regulations and ambitious carbon neutrality goals in Europe and elsewhere promise a surge in EV ownership. The International Energy Agency projects that EVs will capture over 30% of the global market share by 2030. Therefore, developing optimal methods for integrating a large number of EVs into the grid is crucial.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Nour et al. (2019) categorize EV charging into three types: uncontrolled, delayed, and smart. Uncontrolled charging, akin to manual on-off switching, occurs when an EV is plugged in and charges to full capacity. Delayed charging utilizes time-varying electricity tariffs to incentivize EV users to shift their charging to off-peak hours.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Smart charging emerges as the most promising solution for the future. It utilizes algorithms to intelligently control charging points, potentially implemented by distribution system operators (DSOs) via communication channels to the stations. Two control architectures exist: centralized and decentralized. Centralized control involves aggregators purchasing power from multiple EV owners and acting as intermediaries between them and ancillary service markets (Daina et al., 2017). This contrasts with decentralized control, where EV owners directly influence charging flexibility based on market information and incentives offered by the charging point operator (CPO). Creating effective incentives for flexible charging preferences is therefore key to optimizing operation, minimizing grid congestion, and even allowing more EVs to be charged at a single station.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Egochain has designed incentive mechanisms for charging preferences. We aim to demonstrate how these incentives can significantly reduce grid congestion while enabling more efficient charging at multi-point stations, paving the way for a seamless transition to a future dominated by electric vehicles.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Figure1",jsxRuntimeExports.jsx("img",{src:"/img/whitepaper_img3.jpeg",alt:""}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("b",{children:"Figure 1"})," presents the architectural blueprint of the EV charging market, outlining the participating actors and their interwoven flows of information and electricity. At the core of this ecosystem lie several key players:",jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("b",{children:" EV User:"})," The individual or entity owning and operating an electric vehicle."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("b",{children:" Charge Point Operator (CPO):"})," The entity responsible for managing and operating a charging station."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("b",{children:" eMobility Service Provider (eMSP):"})," A digital bridge between EV users and CPOs, providing real-time information on charging station availability, facilitating reservations, and enabling payment functionalities."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("b",{children:"E-Mobility Clearing House:"})," The trusted entity that handles the financial transactions between EV users and CPOs, facilitated by eMSPs."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("b",{children:"Distribution System Operator (DSO):"})," The utility company responsible for operating the low and medium voltage grids and delivering electricity to end users."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("b",{children:"Electricity Supply Retailer:"})," The company selling electricity to consumers, possessing grid access contracts to purchase power from DSOs."]})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Beyond the traditional network, Egochain emerges as a game-changer. This distributed blockchain platform leverages cryptographic signatures and consensus mechanisms to secure data transactions and computations within the Internet of Things (IoT). With its inherent transparency and trust, Egochain fuels smart contract functionality, automating agreements among participants and executing actions only when predefined conditions are met.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"This paper introduces a novel model that leverages Egochain's smart contracts to incentivize EV users for aligning their charging preferences with grid priorities. These incentives, issued in the form of EGAX tokens, act as a digital currency within the network, enabling users to offset future charging costs."]}),jsxRuntimeExports.jsx("div",{className:"break_line_txt",children:"APPROACH AND SIMULATIONS"}),jsxRuntimeExports.jsxs("section",{id:"Smart Charging Architecture",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Smart Charging Architecture"})," ",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("b",{children:"Figure 2"})," illustrates the Egochain smart EV charging system. Moving beyond traditional models, Egochain leverages its blockchain technology to streamline billing and payment processes. Instead of relying on intermediaries like eMSPs and clearing houses, dedicated smart contract charge stations (cssc) deployed on the Egochain blockchain handle these functions. These csscs not only manage payments but also trigger smart charging for individual charge points (CPs), ensuring efficient energy distribution. Additionally, the system incentivizes EV users to participate in smart charging by rewarding them through csscs for offering flexible charging schedules.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("img",{src:"/img/whitepaper_img4.jpeg",alt:""})]}),jsxRuntimeExports.jsxs("section",{id:"Charging Algorithm and Flexibility Offers",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Charging Algorithm and Flexibility Offers"})," ",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("b",{children:"Figure 3"})," outlines the decision-making process whenever a new charging request arrives. EV users specify their desired energy amount (E) and maximum charging time (T) through the system. To facilitate efficient evaluation, a time step of 15 minutes is employed, ensuring each request within a given period is analyzed individually on a first-come-first-serve basis. Accepted requests initiate charging during the subsequent time interval.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Upon receiving a new request, the system first assesses potential grid congestion. If accepting the request at full power, alongside existing ones, would overload the grid, the model explores alternative solutions. It investigates whether the user has designated any flexibility preferences, allowing for smart charging adjustments and potential congestion alleviation. In the absence of flexibility (fast charge demand), the request is accepted regardless. Otherwise, a fulfillment check determines if the proposed flexibility accommodates congestion mitigation while fulfilling the user's energy demand within the specified timeframe. Successful checks translate to acceptance, while failures result in request rejection, with the option to re-evaluate in the next interval if the user remains available.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Therefore, flexibility refers to the charging time or power an EV user is willing to adjust in exchange for monetary rewards. As such, fair and transparent allocation mechanisms are crucial for managing these exchanges. The system utilizes a proportionate allocation mechanism to guarantee equitable distribution of incentives among participating users.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("img",{src:"/img/whitepaper_img5.jpeg",alt:""})]}),jsxRuntimeExports.jsxs("section",{id:"Determining Electric Vehicle (EV) Flexibility for Next Time Step",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Determining Electric Vehicle (EV) Flexibility for Next Time Step"})," ",jsxRuntimeExports.jsx("br",{}),"This algorithm estimates the potential of an EV user to offer charging flexibility during the next time step.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("b",{children:"Key parameters:"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{children:"Es(i,n):"})," Energy supplied to EV (i) at time step (n)"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{children:"Ts(i,n):"})," Charging time for EV (i) at time step (n)"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{children:"P_N(i):"})," Nominal power of charging point (CP) serving EV (i)"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{children:"TF(i,n):"})," Flexible time available for charging EV (i) at time step (n)"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{children:"Fl(i,n+1):"})," Flexible offer by EV (i) for next time step (n+1)"]})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("b",{children:"Algorithm:"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("span",{children:"1. Calculate flexible time: TF(i,n) = Ts(i,n) - Es(i,n) / P_N(i)"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{children:["2. Determine flexible offer:"," ","Fl(i,n+1) = { P_N(i) if TF(i,n) >= 15 minutes P_N(i) * TF(i,n) / 15 minutes otherwise }"]})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("b",{children:"Explanation:"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),'The algorithm first calculates the "flexible time" available for charging the EV (i) at the current time step (n). This is the difference between the scheduled charging time (Ts(i,n)) and the required time to reach the desired amount of energy with the nominal power of the CP (Es(i,n) / P_N(i)).',jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Next, the algorithm estimates the flexible offer (Fl(i,n+1)) that the EV user is willing to provide for the next time step (n+1). This offer is equal to the full nominal power of the CP (P_N(i)) if the available flexible time is at least 15 minutes. Otherwise, the offer is proportionally reduced based on the remaining flexible time.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("b",{children:"Benefits:"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("li",{children:"This algorithm provides a simple and efficient way to estimate EV flexibility potential."}),jsxRuntimeExports.jsx("li",{children:"The use of a minimum flexible time threshold ensures practical feasibility and reduces the impact of short-term fluctuations."}),jsxRuntimeExports.jsx("li",{children:"The dynamic offer based on remaining time incentivizes users to participate and ensures efficient grid resource allocation."})]})]}),jsxRuntimeExports.jsxs("section",{id:"Decentralized Secure Charging with Egochain",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Decentralized Secure Charging with Egochain:"})," ",jsxRuntimeExports.jsx("br",{}),"For enhanced security and trust, we implemented Egochain, a blockchain platform, into the charging infrastructure. Each charging point (CP) houses a Raspberry Pi (RPi) running an Egochain node (Fig. 2).",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("b",{children:"Smart Contract Orchestrates Flexibility:"}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsxs("span",{children:[" ",jsxRuntimeExports.jsx("span",{children:"1. "})," Cloud Deployment: The smart charging algorithm and flexibility offers reside in the cloud."]}),jsxRuntimeExports.jsxs("span",{children:[" ",jsxRuntimeExports.jsx("span",{children:"2. "})," Smart Contract Development and Deployment: A dedicated smart contract (SC) manages energy transactions on the Egochain network. Its Application Binary Interface (ABI) is integrated into a Python script facilitating blockchain interaction."]}),jsxRuntimeExports.jsxs("span",{children:[" ",jsxRuntimeExports.jsx("span",{children:"3. "}),"Regular Communication: Every 15 minutes, the Python script retrieves EV user charging requests (E, T) and calculates flexibility offers for the next slot. Accepted offers are encrypted and stored on the Egochain blockchain."]}),jsxRuntimeExports.jsxs("span",{children:[" ",jsxRuntimeExports.jsx("span",{children:"4. "}),"Parallel Backup: Each CPO's backend system connects to the cloud and its local blockchain node. This redundancy ensures data accessibility and direct interaction with the cloud database and Python script."]}),jsxRuntimeExports.jsxs("span",{children:[" ",jsxRuntimeExports.jsx("span",{children:"5. "}),"Rewarding Flexibility: Upon confirmed delivery of the agreed-upon flexibility offer, the Egochain node triggers EGAX token payout to the EV user, compensating them for their energy and time flexibility."]})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("b",{children:"Benefits:"}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("li",{children:"Enhanced Security: Blockchain technology guarantees tamper-proof and transparent transaction records."}),jsxRuntimeExports.jsx("li",{children:"Decentralized Trust: Secure peer-to-peer interactions eliminate the need for a central authority."}),jsxRuntimeExports.jsx("li",{children:"Automated Flexibility Rewards: Smart contracts automate reward distribution based on agreed-upon flexibility offers."})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"This approach fosters a secure, transparent, and rewarding charging ecosystem for both EV users and CPOs."]}),jsxRuntimeExports.jsxs("section",{id:"Simulation Parameters",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Simulation Parameters"})," ",jsxRuntimeExports.jsx("br",{}),"This section outlines the key parameters governing our EV charging demand model.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("li",{children:"Average Daily Travel Distance: Based on data from BMVi (2019), the average German travels 39km daily."}),jsxRuntimeExports.jsx("li",{children:"Weekly Driving Range: Translating daily travel to a weekly basis, an individual accumulates approximately 280km of weekly driving."}),jsxRuntimeExports.jsx("li",{children:"EV Battery Efficiency: Studies by AUTOBEST (2018) indicate an average driving range of 7km per kWh for electric vehicles."}),jsxRuntimeExports.jsx("li",{children:"Weekly Energy Demand: Combining weekly travel distance with battery efficiency, an average EV user requires 40kWh of energy to fulfill their weekly mobility needs."})]})]}),jsxRuntimeExports.jsxs("section",{id:"Dynamic Charging Model Based on User Activity",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Dynamic Charging Model Based on User Activity:"})," ",jsxRuntimeExports.jsx("br",{}),"To accommodate diverse user behavior and charging needs, we've implemented a time-based charging system categorized by typical dwell times. This flexible approach helps us accurately model and predict charging demand across various locations and throughout the week.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("li",{children:"Category 1 (1-2 hours): High-frequency charging for short stops, commonly found in shopping malls, restaurants, and public parking areas."}),jsxRuntimeExports.jsx("li",{children:"Category 2 (2-4 hours): Moderate-duration charging for extended stays, such as workplaces, street parking, and airport terminals."}),jsxRuntimeExports.jsx("li",{children:"Category 3 (4-8 hours): Long-term charging for overnight or extended parking, typically occurring in residential areas and hotels."})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"By leveraging this data-driven categorization, we can efficiently allocate resources, optimize charging infrastructure deployment, and ultimately, deliver a seamless and cost-effective experience for our users."]}),jsxRuntimeExports.jsxs("section",{id:"Simulation Scenarios and Methodology",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Simulation Scenarios and Methodology"})," ",jsxRuntimeExports.jsx("br",{}),"The performance of the model was evaluated through simulations under two distinct charging scenarios, each focusing on the arrival rate of charging requests at the pool:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("li",{children:"Scenario 1: Low Arrival Rate: A single charging request arrives every time step (15 minutes), representing a moderate demand on the charging pool."}),jsxRuntimeExports.jsx("li",{children:"Scenario 2: High Arrival Rate: Two charging requests arrive every time step, simulating a peak demand situation."})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("b",{children:"Both scenarios assumed the following conditions: "}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("li",{children:"Charging Power: Each charging point (CP) offers a maximum of 11 kW."}),jsxRuntimeExports.jsx("li",{children:"EV Demand: User demand for charging power is randomly generated, ranging from 10 to 40 kWh (equivalent to 50-200 km) with charging times between 1 and 4 hours."}),jsxRuntimeExports.jsx("li",{children:"Plug Availability: All charging requests are accepted as long as sufficient power is available from the grid and no plug limitations exist."})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Grid power availability serves as a key variable in the analysis. It starts at 33 kW and is progressively increased by 11 kW increments. Through repeated simulations (100 iterations per scenario), the model's performance is assessed by comparing the total electricity sold and charging request acceptance rate for both uncontrolled and smart charging strategies under varying grid power limits, EV energy demands, and available charging times."]}),jsxRuntimeExports.jsxs("section",{id:"Results and Discussion",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Results and Discussion"})," ",jsxRuntimeExports.jsx("br",{}),"Scenario 1: Figure 4 presents the results for a ten-hour charging period under varying grid power limits. The blue, orange, and yellow bars represent:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsxs("li",{children:["Total electricity sold:"," ",jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("li",{children:"Blue: Uncontrolled charging."}),jsxRuntimeExports.jsx("li",{children:"Orange: Smart charging."})]})]}),jsxRuntimeExports.jsx("li",{children:"Utilized flexibility: Electricity supplied to EVs through smart charging (difference between orange and blue bars)."})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"The dotted lines depict the average acceptance rate of uncontrolled (blue) and smart (green) charging.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"At a 33 kW power limit, uncontrolled charging achieves an average acceptance rate of 38%, while smart charging reaches 70%. This represents a 1.84 times higher acceptance rate for smart charging. As the power limit increases, the difference in acceptance rates diminishes, reaching zero by 120 kW. This indicates that beyond 120 kW, all EVs could be accommodated, demonstrating the effectiveness of smart charging in accommodating demand within existing grid constraints.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Scenario 2: Figure 5 shows the results for double the charging requests per time step. Acceptance rates decrease to 23% (uncontrolled) and 43% (smart) at a 33 kW power limit. Similar to Scenario 1, the acceptance rate gap diminishes with increasing power limits, vanishing at 143 kW.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Interestingly, at the 33 kW power limit, uncontrolled charging only supplies 309 kWh to EVs, while smart charging provides 603 kWh, equaling the uncontrolled scenario at a 66 kW power limit. This implies that smart charging, by utilizing flexibility, effectively expands the grid capacity by 33 kW.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"The yellow bars highlight the utilized flexibility, starting at its peak of 364 kWh at 88 kW and gradually decreasing to zero at 220 kW. This phenomenon reveals that as the grid capacity increases, relying on flexibility decreases. Flexibility contributions are most significant under limited grid capacity, enabling additional EV charging.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"In conclusion, these simulations demonstrate the remarkable capabilities of smart charging in:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("li",{children:"Increasing EV charging acceptance rates, especially during peak demand."}),jsxRuntimeExports.jsx("li",{children:"Effectively expanding grid capacity by utilizing flexibility under limited power availability."}),jsxRuntimeExports.jsx("li",{children:"Optimizing resource utilization by prioritizing grid electricity when sufficient capacity exists."})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"These findings offer compelling evidence for the widespread adoption of smart charging solutions as a key strategy for integrating high EV penetration into future energy grids.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("img",{src:"/img/whitepaper_img6.jpeg",alt:""})]}),jsxRuntimeExports.jsxs("section",{id:"Conclusion",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Conclusion"})," ",jsxRuntimeExports.jsx("br",{}),"The Egochain blockchain, as detailed in this whitepaper, serves as a catalyst for the widespread acceptance of electric vehicles. By fostering the establishment of intelligent charging stations, the blockchain introduces incentives that encourage electric vehicle (EV) ownership. The associated rewards, denoted as EGAX, can be employed to cover EV charging expenses, transaction fees within the Egochain blockchain, and even contribute to EV acquisitions. Additionally, the ecosystem employs EGC, the debt token, to facilitate accessible credit for EV manufacturing, with interest payments settled in EGAX. This integrated approach not only promotes sustainable transportation but also establishes a comprehensive and self-sustaining ecosystem for the electric vehicle industry."]})]})]})}),jsxRuntimeExports.jsx("img",{src:"/img/hero_bg_light.svg",alt:"",className:"home_div_section1_bg_light"}),jsxRuntimeExports.jsx("img",{src:"/img/test_hero_light2.svg",alt:"",className:"home_div_section1_bg_light2"}),jsxRuntimeExports.jsx("img",{src:"/img/grains_ellipse.png",alt:"",className:"grains_ellipse"})]})},Grid=()=>jsxRuntimeExports.jsx("div",{className:"home_div_section1_grid_bg",children:jsxRuntimeExports.jsxs("svg",{width:"102%",height:"102%",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsxs("defs",{children:[jsxRuntimeExports.jsx("pattern",{id:"smallGrid",width:"120",height:"120",patternUnits:"userSpaceOnUse",children:jsxRuntimeExports.jsx("path",{d:"M 120 0 L 0 0 0 120",fill:"none",stroke:"currentColor","stroke-width":"1"})}),jsxRuntimeExports.jsx("pattern",{id:"grid",width:"240",height:"240",patternUnits:"userSpaceOnUse",children:jsxRuntimeExports.jsx("rect",{width:"240",height:"240",fill:"url(#smallGrid)"})})]}),jsxRuntimeExports.jsx("rect",{width:"100%",height:"100%",fill:"url(#grid)"})]})});function bind(e,i){return function(){return e.apply(i,arguments)}}const{toString:toString$1}=Object.prototype,{getPrototypeOf}=Object,kindOf=(e=>i=>{const s=toString$1.call(i);return e[s]||(e[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=e=>(e=e.toLowerCase(),i=>kindOf(i)===e),typeOfTest=e=>i=>typeof i===e,{isArray}=Array,isUndefined=typeOfTest("undefined");function isBuffer(e){return e!==null&&!isUndefined(e)&&e.constructor!==null&&!isUndefined(e.constructor)&&isFunction(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(e){let i;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?i=ArrayBuffer.isView(e):i=e&&e.buffer&&isArrayBuffer(e.buffer),i}const isString=typeOfTest("string"),isFunction=typeOfTest("function"),isNumber=typeOfTest("number"),isObject=e=>e!==null&&typeof e=="object",isBoolean=e=>e===!0||e===!1,isPlainObject=e=>{if(kindOf(e)!=="object")return!1;const i=getPrototypeOf(e);return(i===null||i===Object.prototype||Object.getPrototypeOf(i)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=e=>isObject(e)&&isFunction(e.pipe),isFormData=e=>{let i;return e&&(typeof FormData=="function"&&e instanceof FormData||isFunction(e.append)&&((i=kindOf(e))==="formdata"||i==="object"&&isFunction(e.toString)&&e.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),trim=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(e,i,{allOwnKeys:s=!1}={}){if(e===null||typeof e>"u")return;let a,o;if(typeof e!="object"&&(e=[e]),isArray(e))for(a=0,o=e.length;a<o;a++)i.call(null,e[a],a,e);else{const c=s?Object.getOwnPropertyNames(e):Object.keys(e),d=c.length;let g;for(a=0;a<d;a++)g=c[a],i.call(null,e[g],g,e)}}function findKey(e,i){i=i.toLowerCase();const s=Object.keys(e);let a=s.length,o;for(;a-- >0;)if(o=s[a],i===o.toLowerCase())return o;return null}const _global=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,isContextDefined=e=>!isUndefined(e)&&e!==_global;function merge(){const{caseless:e}=isContextDefined(this)&&this||{},i={},s=(a,o)=>{const c=e&&findKey(i,o)||o;isPlainObject(i[c])&&isPlainObject(a)?i[c]=merge(i[c],a):isPlainObject(a)?i[c]=merge({},a):isArray(a)?i[c]=a.slice():i[c]=a};for(let a=0,o=arguments.length;a<o;a++)arguments[a]&&forEach(arguments[a],s);return i}const extend=(e,i,s,{allOwnKeys:a}={})=>(forEach(i,(o,c)=>{s&&isFunction(o)?e[c]=bind(o,s):e[c]=o},{allOwnKeys:a}),e),stripBOM=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),inherits=(e,i,s,a)=>{e.prototype=Object.create(i.prototype,a),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:i.prototype}),s&&Object.assign(e.prototype,s)},toFlatObject=(e,i,s,a)=>{let o,c,d;const g={};if(i=i||{},e==null)return i;do{for(o=Object.getOwnPropertyNames(e),c=o.length;c-- >0;)d=o[c],(!a||a(d,e,i))&&!g[d]&&(i[d]=e[d],g[d]=!0);e=s!==!1&&getPrototypeOf(e)}while(e&&(!s||s(e,i))&&e!==Object.prototype);return i},endsWith=(e,i,s)=>{e=String(e),(s===void 0||s>e.length)&&(s=e.length),s-=i.length;const a=e.indexOf(i,s);return a!==-1&&a===s},toArray=e=>{if(!e)return null;if(isArray(e))return e;let i=e.length;if(!isNumber(i))return null;const s=new Array(i);for(;i-- >0;)s[i]=e[i];return s},isTypedArray=(e=>i=>e&&i instanceof e)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(e,i)=>{const a=(e&&e[Symbol.iterator]).call(e);let o;for(;(o=a.next())&&!o.done;){const c=o.value;i.call(e,c[0],c[1])}},matchAll=(e,i)=>{let s;const a=[];for(;(s=e.exec(i))!==null;)a.push(s);return a},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,a,o){return a.toUpperCase()+o}),hasOwnProperty=(({hasOwnProperty:e})=>(i,s)=>e.call(i,s))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(e,i)=>{const s=Object.getOwnPropertyDescriptors(e),a={};forEach(s,(o,c)=>{let d;(d=i(o,c,e))!==!1&&(a[c]=d||o)}),Object.defineProperties(e,a)},freezeMethods=e=>{reduceDescriptors(e,(i,s)=>{if(isFunction(e)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const a=e[s];if(isFunction(a)){if(i.enumerable=!1,"writable"in i){i.writable=!1;return}i.set||(i.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},toObjectSet=(e,i)=>{const s={},a=o=>{o.forEach(c=>{s[c]=!0})};return isArray(e)?a(e):a(String(e).split(i)),s},noop=()=>{},toFiniteNumber=(e,i)=>(e=+e,Number.isFinite(e)?e:i),ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT="0123456789",ALPHABET={DIGIT,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT},generateString=(e=16,i=ALPHABET.ALPHA_DIGIT)=>{let s="";const{length:a}=i;for(;e--;)s+=i[Math.random()*a|0];return s};function isSpecCompliantForm(e){return!!(e&&isFunction(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const toJSONObject=e=>{const i=new Array(10),s=(a,o)=>{if(isObject(a)){if(i.indexOf(a)>=0)return;if(!("toJSON"in a)){i[o]=a;const c=isArray(a)?[]:{};return forEach(a,(d,g)=>{const b=s(d,o+1);!isUndefined(b)&&(c[g]=b)}),i[o]=void 0,c}}return a};return s(e,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=e=>e&&(isObject(e)||isFunction(e))&&isFunction(e.then)&&isFunction(e.catch),utils$1={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isBoolean,isObject,isPlainObject,isUndefined,isDate,isFile,isBlob,isRegExp,isFunction,isStream,isURLSearchParams,isTypedArray,isFileList,forEach,merge,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop,toFiniteNumber,findKey,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable};function AxiosError(e,i,s,a,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",i&&(this.code=i),s&&(this.config=s),a&&(this.request=a),o&&(this.response=o)}utils$1.inherits(AxiosError,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{descriptors[e]={value:e}});Object.defineProperties(AxiosError,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=(e,i,s,a,o,c)=>{const d=Object.create(prototype$1);return utils$1.toFlatObject(e,d,function(b){return b!==Error.prototype},g=>g!=="isAxiosError"),AxiosError.call(d,e.message,i,s,a,o),d.cause=e,d.name=e.name,c&&Object.assign(d,c),d};const httpAdapter=null;function isVisitable(e){return utils$1.isPlainObject(e)||utils$1.isArray(e)}function removeBrackets(e){return utils$1.endsWith(e,"[]")?e.slice(0,-2):e}function renderKey(e,i,s){return e?e.concat(i).map(function(o,c){return o=removeBrackets(o),!s&&c?"["+o+"]":o}).join(s?".":""):i}function isFlatArray(e){return utils$1.isArray(e)&&!e.some(isVisitable)}const predicates=utils$1.toFlatObject(utils$1,{},null,function(i){return/^is[A-Z]/.test(i)});function toFormData(e,i,s){if(!utils$1.isObject(e))throw new TypeError("target must be an object");i=i||new FormData,s=utils$1.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(gt,wt){return!utils$1.isUndefined(wt[gt])});const a=s.metaTokens,o=s.visitor||_e,c=s.dots,d=s.indexes,b=(s.Blob||typeof Blob<"u"&&Blob)&&utils$1.isSpecCompliantForm(i);if(!utils$1.isFunction(o))throw new TypeError("visitor must be a function");function j(ut){if(ut===null)return"";if(utils$1.isDate(ut))return ut.toISOString();if(!b&&utils$1.isBlob(ut))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer(ut)||utils$1.isTypedArray(ut)?b&&typeof Blob=="function"?new Blob([ut]):Buffer.from(ut):ut}function _e(ut,gt,wt){let yt=ut;if(ut&&!wt&&typeof ut=="object"){if(utils$1.endsWith(gt,"{}"))gt=a?gt:gt.slice(0,-2),ut=JSON.stringify(ut);else if(utils$1.isArray(ut)&&isFlatArray(ut)||(utils$1.isFileList(ut)||utils$1.endsWith(gt,"[]"))&&(yt=utils$1.toArray(ut)))return gt=removeBrackets(gt),yt.forEach(function(Ct,Tt){!(utils$1.isUndefined(Ct)||Ct===null)&&i.append(d===!0?renderKey([gt],Tt,c):d===null?gt:gt+"[]",j(Ct))}),!1}return isVisitable(ut)?!0:(i.append(renderKey(wt,gt,c),j(ut)),!1)}const $=[],rt=Object.assign(predicates,{defaultVisitor:_e,convertValue:j,isVisitable});function st(ut,gt){if(!utils$1.isUndefined(ut)){if($.indexOf(ut)!==-1)throw Error("Circular reference detected in "+gt.join("."));$.push(ut),utils$1.forEach(ut,function(yt,At){(!(utils$1.isUndefined(yt)||yt===null)&&o.call(i,yt,utils$1.isString(At)?At.trim():At,gt,rt))===!0&&st(yt,gt?gt.concat(At):[At])}),$.pop()}}if(!utils$1.isObject(e))throw new TypeError("data must be an object");return st(e),i}function encode$1(e){const i={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(a){return i[a]})}function AxiosURLSearchParams(e,i){this._pairs=[],e&&toFormData(e,this,i)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(i,s){this._pairs.push([i,s])};prototype.toString=function(i){const s=i?function(a){return i.call(this,a,encode$1)}:encode$1;return this._pairs.map(function(o){return s(o[0])+"="+s(o[1])},"").join("&")};function encode(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(e,i,s){if(!i)return e;const a=s&&s.encode||encode,o=s&&s.serialize;let c;if(o?c=o(i,s):c=utils$1.isURLSearchParams(i)?i.toString():new AxiosURLSearchParams(i,s).toString(a),c){const d=e.indexOf("#");d!==-1&&(e=e.slice(0,d)),e+=(e.indexOf("?")===-1?"?":"&")+c}return e}class InterceptorManager{constructor(){this.handlers=[]}use(i,s,a){return this.handlers.push({fulfilled:i,rejected:s,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(i){this.handlers[i]&&(this.handlers[i]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(i){utils$1.forEach(this.handlers,function(a){a!==null&&i(a)})}}const transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",hasStandardBrowserEnv=(e=>hasBrowserEnv&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),hasStandardBrowserWebWorkerEnv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",utils=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv},Symbol.toStringTag,{value:"Module"})),platform={...utils,...platform$1};function toURLEncodedForm(e,i){return toFormData(e,new platform.classes.URLSearchParams,Object.assign({visitor:function(s,a,o,c){return platform.isNode&&utils$1.isBuffer(s)?(this.append(a,s.toString("base64")),!1):c.defaultVisitor.apply(this,arguments)}},i))}function parsePropPath(e){return utils$1.matchAll(/\w+|\[(\w*)]/g,e).map(i=>i[0]==="[]"?"":i[1]||i[0])}function arrayToObject(e){const i={},s=Object.keys(e);let a;const o=s.length;let c;for(a=0;a<o;a++)c=s[a],i[c]=e[c];return i}function formDataToJSON(e){function i(s,a,o,c){let d=s[c++];if(d==="__proto__")return!0;const g=Number.isFinite(+d),b=c>=s.length;return d=!d&&utils$1.isArray(o)?o.length:d,b?(utils$1.hasOwnProp(o,d)?o[d]=[o[d],a]:o[d]=a,!g):((!o[d]||!utils$1.isObject(o[d]))&&(o[d]=[]),i(s,a,o[d],c)&&utils$1.isArray(o[d])&&(o[d]=arrayToObject(o[d])),!g)}if(utils$1.isFormData(e)&&utils$1.isFunction(e.entries)){const s={};return utils$1.forEachEntry(e,(a,o)=>{i(parsePropPath(a),o,s,0)}),s}return null}function stringifySafely(e,i,s){if(utils$1.isString(e))try{return(i||JSON.parse)(e),utils$1.trim(e)}catch(a){if(a.name!=="SyntaxError")throw a}return(s||JSON.stringify)(e)}const defaults={transitional:transitionalDefaults,adapter:["xhr","http"],transformRequest:[function(i,s){const a=s.getContentType()||"",o=a.indexOf("application/json")>-1,c=utils$1.isObject(i);if(c&&utils$1.isHTMLForm(i)&&(i=new FormData(i)),utils$1.isFormData(i))return o?JSON.stringify(formDataToJSON(i)):i;if(utils$1.isArrayBuffer(i)||utils$1.isBuffer(i)||utils$1.isStream(i)||utils$1.isFile(i)||utils$1.isBlob(i))return i;if(utils$1.isArrayBufferView(i))return i.buffer;if(utils$1.isURLSearchParams(i))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),i.toString();let g;if(c){if(a.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(i,this.formSerializer).toString();if((g=utils$1.isFileList(i))||a.indexOf("multipart/form-data")>-1){const b=this.env&&this.env.FormData;return toFormData(g?{"files[]":i}:i,b&&new b,this.formSerializer)}}return c||o?(s.setContentType("application/json",!1),stringifySafely(i)):i}],transformResponse:[function(i){const s=this.transitional||defaults.transitional,a=s&&s.forcedJSONParsing,o=this.responseType==="json";if(i&&utils$1.isString(i)&&(a&&!this.responseType||o)){const d=!(s&&s.silentJSONParsing)&&o;try{return JSON.parse(i)}catch(g){if(d)throw g.name==="SyntaxError"?AxiosError.from(g,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):g}}return i}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(i){return i>=200&&i<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1.forEach(["delete","get","head","post","put","patch"],e=>{defaults.headers[e]={}});const defaults$1=defaults,ignoreDuplicateOf=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=e=>{const i={};let s,a,o;return e&&e.split(`
`).forEach(function(d){o=d.indexOf(":"),s=d.substring(0,o).trim().toLowerCase(),a=d.substring(o+1).trim(),!(!s||i[s]&&ignoreDuplicateOf[s])&&(s==="set-cookie"?i[s]?i[s].push(a):i[s]=[a]:i[s]=i[s]?i[s]+", "+a:a)}),i},$internals=Symbol("internals");function normalizeHeader(e){return e&&String(e).trim().toLowerCase()}function normalizeValue(e){return e===!1||e==null?e:utils$1.isArray(e)?e.map(normalizeValue):String(e)}function parseTokens(e){const i=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=s.exec(e);)i[a[1]]=a[2];return i}const isValidHeaderName=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function matchHeaderValue(e,i,s,a,o){if(utils$1.isFunction(a))return a.call(this,i,s);if(o&&(i=s),!!utils$1.isString(i)){if(utils$1.isString(a))return i.indexOf(a)!==-1;if(utils$1.isRegExp(a))return a.test(i)}}function formatHeader(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(i,s,a)=>s.toUpperCase()+a)}function buildAccessors(e,i){const s=utils$1.toCamelCase(" "+i);["get","set","has"].forEach(a=>{Object.defineProperty(e,a+s,{value:function(o,c,d){return this[a].call(this,i,o,c,d)},configurable:!0})})}class AxiosHeaders{constructor(i){i&&this.set(i)}set(i,s,a){const o=this;function c(g,b,j){const _e=normalizeHeader(b);if(!_e)throw new Error("header name must be a non-empty string");const $=utils$1.findKey(o,_e);(!$||o[$]===void 0||j===!0||j===void 0&&o[$]!==!1)&&(o[$||b]=normalizeValue(g))}const d=(g,b)=>utils$1.forEach(g,(j,_e)=>c(j,_e,b));return utils$1.isPlainObject(i)||i instanceof this.constructor?d(i,s):utils$1.isString(i)&&(i=i.trim())&&!isValidHeaderName(i)?d(parseHeaders(i),s):i!=null&&c(s,i,a),this}get(i,s){if(i=normalizeHeader(i),i){const a=utils$1.findKey(this,i);if(a){const o=this[a];if(!s)return o;if(s===!0)return parseTokens(o);if(utils$1.isFunction(s))return s.call(this,o,a);if(utils$1.isRegExp(s))return s.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(i,s){if(i=normalizeHeader(i),i){const a=utils$1.findKey(this,i);return!!(a&&this[a]!==void 0&&(!s||matchHeaderValue(this,this[a],a,s)))}return!1}delete(i,s){const a=this;let o=!1;function c(d){if(d=normalizeHeader(d),d){const g=utils$1.findKey(a,d);g&&(!s||matchHeaderValue(a,a[g],g,s))&&(delete a[g],o=!0)}}return utils$1.isArray(i)?i.forEach(c):c(i),o}clear(i){const s=Object.keys(this);let a=s.length,o=!1;for(;a--;){const c=s[a];(!i||matchHeaderValue(this,this[c],c,i,!0))&&(delete this[c],o=!0)}return o}normalize(i){const s=this,a={};return utils$1.forEach(this,(o,c)=>{const d=utils$1.findKey(a,c);if(d){s[d]=normalizeValue(o),delete s[c];return}const g=i?formatHeader(c):String(c).trim();g!==c&&delete s[c],s[g]=normalizeValue(o),a[g]=!0}),this}concat(...i){return this.constructor.concat(this,...i)}toJSON(i){const s=Object.create(null);return utils$1.forEach(this,(a,o)=>{a!=null&&a!==!1&&(s[o]=i&&utils$1.isArray(a)?a.join(", "):a)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([i,s])=>i+": "+s).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(i){return i instanceof this?i:new this(i)}static concat(i,...s){const a=new this(i);return s.forEach(o=>a.set(o)),a}static accessor(i){const a=(this[$internals]=this[$internals]={accessors:{}}).accessors,o=this.prototype;function c(d){const g=normalizeHeader(d);a[g]||(buildAccessors(o,d),a[g]=!0)}return utils$1.isArray(i)?i.forEach(c):c(i),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$1.reduceDescriptors(AxiosHeaders.prototype,({value:e},i)=>{let s=i[0].toUpperCase()+i.slice(1);return{get:()=>e,set(a){this[s]=a}}});utils$1.freezeMethods(AxiosHeaders);const AxiosHeaders$1=AxiosHeaders;function transformData(e,i){const s=this||defaults$1,a=i||s,o=AxiosHeaders$1.from(a.headers);let c=a.data;return utils$1.forEach(e,function(g){c=g.call(s,c,o.normalize(),i?i.status:void 0)}),o.normalize(),c}function isCancel(e){return!!(e&&e.__CANCEL__)}function CanceledError(e,i,s){AxiosError.call(this,e??"canceled",AxiosError.ERR_CANCELED,i,s),this.name="CanceledError"}utils$1.inherits(CanceledError,AxiosError,{__CANCEL__:!0});function settle(e,i,s){const a=s.config.validateStatus;!s.status||!a||a(s.status)?e(s):i(new AxiosError("Request failed with status code "+s.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}const cookies=platform.hasStandardBrowserEnv?{write(e,i,s,a,o,c){const d=[e+"="+encodeURIComponent(i)];utils$1.isNumber(s)&&d.push("expires="+new Date(s).toGMTString()),utils$1.isString(a)&&d.push("path="+a),utils$1.isString(o)&&d.push("domain="+o),c===!0&&d.push("secure"),document.cookie=d.join("; ")},read(e){const i=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function combineURLs(e,i){return i?e.replace(/\/?\/$/,"")+"/"+i.replace(/^\/+/,""):e}function buildFullPath(e,i){return e&&!isAbsoluteURL(i)?combineURLs(e,i):i}const isURLSameOrigin=platform.hasStandardBrowserEnv?function(){const i=/(msie|trident)/i.test(navigator.userAgent),s=document.createElement("a");let a;function o(c){let d=c;return i&&(s.setAttribute("href",d),d=s.href),s.setAttribute("href",d),{href:s.href,protocol:s.protocol?s.protocol.replace(/:$/,""):"",host:s.host,search:s.search?s.search.replace(/^\?/,""):"",hash:s.hash?s.hash.replace(/^#/,""):"",hostname:s.hostname,port:s.port,pathname:s.pathname.charAt(0)==="/"?s.pathname:"/"+s.pathname}}return a=o(window.location.href),function(d){const g=utils$1.isString(d)?o(d):d;return g.protocol===a.protocol&&g.host===a.host}}():function(){return function(){return!0}}();function parseProtocol(e){const i=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return i&&i[1]||""}function speedometer(e,i){e=e||10;const s=new Array(e),a=new Array(e);let o=0,c=0,d;return i=i!==void 0?i:1e3,function(b){const j=Date.now(),_e=a[c];d||(d=j),s[o]=b,a[o]=j;let $=c,rt=0;for(;$!==o;)rt+=s[$++],$=$%e;if(o=(o+1)%e,o===c&&(c=(c+1)%e),j-d<i)return;const st=_e&&j-_e;return st?Math.round(rt*1e3/st):void 0}}function progressEventReducer(e,i){let s=0;const a=speedometer(50,250);return o=>{const c=o.loaded,d=o.lengthComputable?o.total:void 0,g=c-s,b=a(g),j=c<=d;s=c;const _e={loaded:c,total:d,progress:d?c/d:void 0,bytes:g,rate:b||void 0,estimated:b&&d&&j?(d-c)/b:void 0,event:o};_e[i?"download":"upload"]=!0,e(_e)}}const isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(e){return new Promise(function(s,a){let o=e.data;const c=AxiosHeaders$1.from(e.headers).normalize();let{responseType:d,withXSRFToken:g}=e,b;function j(){e.cancelToken&&e.cancelToken.unsubscribe(b),e.signal&&e.signal.removeEventListener("abort",b)}let _e;if(utils$1.isFormData(o)){if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)c.setContentType(!1);else if((_e=c.getContentType())!==!1){const[gt,...wt]=_e?_e.split(";").map(yt=>yt.trim()).filter(Boolean):[];c.setContentType([gt||"multipart/form-data",...wt].join("; "))}}let $=new XMLHttpRequest;if(e.auth){const gt=e.auth.username||"",wt=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";c.set("Authorization","Basic "+btoa(gt+":"+wt))}const rt=buildFullPath(e.baseURL,e.url);$.open(e.method.toUpperCase(),buildURL(rt,e.params,e.paramsSerializer),!0),$.timeout=e.timeout;function st(){if(!$)return;const gt=AxiosHeaders$1.from("getAllResponseHeaders"in $&&$.getAllResponseHeaders()),yt={data:!d||d==="text"||d==="json"?$.responseText:$.response,status:$.status,statusText:$.statusText,headers:gt,config:e,request:$};settle(function(Ct){s(Ct),j()},function(Ct){a(Ct),j()},yt),$=null}if("onloadend"in $?$.onloadend=st:$.onreadystatechange=function(){!$||$.readyState!==4||$.status===0&&!($.responseURL&&$.responseURL.indexOf("file:")===0)||setTimeout(st)},$.onabort=function(){$&&(a(new AxiosError("Request aborted",AxiosError.ECONNABORTED,e,$)),$=null)},$.onerror=function(){a(new AxiosError("Network Error",AxiosError.ERR_NETWORK,e,$)),$=null},$.ontimeout=function(){let wt=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const yt=e.transitional||transitionalDefaults;e.timeoutErrorMessage&&(wt=e.timeoutErrorMessage),a(new AxiosError(wt,yt.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,e,$)),$=null},platform.hasStandardBrowserEnv&&(g&&utils$1.isFunction(g)&&(g=g(e)),g||g!==!1&&isURLSameOrigin(rt))){const gt=e.xsrfHeaderName&&e.xsrfCookieName&&cookies.read(e.xsrfCookieName);gt&&c.set(e.xsrfHeaderName,gt)}o===void 0&&c.setContentType(null),"setRequestHeader"in $&&utils$1.forEach(c.toJSON(),function(wt,yt){$.setRequestHeader(yt,wt)}),utils$1.isUndefined(e.withCredentials)||($.withCredentials=!!e.withCredentials),d&&d!=="json"&&($.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&$.addEventListener("progress",progressEventReducer(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&$.upload&&$.upload.addEventListener("progress",progressEventReducer(e.onUploadProgress)),(e.cancelToken||e.signal)&&(b=gt=>{$&&(a(!gt||gt.type?new CanceledError(null,e,$):gt),$.abort(),$=null)},e.cancelToken&&e.cancelToken.subscribe(b),e.signal&&(e.signal.aborted?b():e.signal.addEventListener("abort",b)));const ut=parseProtocol(rt);if(ut&&platform.protocols.indexOf(ut)===-1){a(new AxiosError("Unsupported protocol "+ut+":",AxiosError.ERR_BAD_REQUEST,e));return}$.send(o||null)})},knownAdapters={http:httpAdapter,xhr:xhrAdapter};utils$1.forEach(knownAdapters,(e,i)=>{if(e){try{Object.defineProperty(e,"name",{value:i})}catch{}Object.defineProperty(e,"adapterName",{value:i})}});const renderReason=e=>`- ${e}`,isResolvedHandle=e=>utils$1.isFunction(e)||e===null||e===!1,adapters={getAdapter:e=>{e=utils$1.isArray(e)?e:[e];const{length:i}=e;let s,a;const o={};for(let c=0;c<i;c++){s=e[c];let d;if(a=s,!isResolvedHandle(s)&&(a=knownAdapters[(d=String(s)).toLowerCase()],a===void 0))throw new AxiosError(`Unknown adapter '${d}'`);if(a)break;o[d||"#"+c]=a}if(!a){const c=Object.entries(o).map(([g,b])=>`adapter ${g} `+(b===!1?"is not supported by the environment":"is not available in the build"));let d=i?c.length>1?`since :
`+c.map(renderReason).join(`
`):" "+renderReason(c[0]):"as no adapter specified";throw new AxiosError("There is no suitable adapter to dispatch the request "+d,"ERR_NOT_SUPPORT")}return a},adapters:knownAdapters};function throwIfCancellationRequested(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new CanceledError(null,e)}function dispatchRequest(e){return throwIfCancellationRequested(e),e.headers=AxiosHeaders$1.from(e.headers),e.data=transformData.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(e.adapter||defaults$1.adapter)(e).then(function(a){return throwIfCancellationRequested(e),a.data=transformData.call(e,e.transformResponse,a),a.headers=AxiosHeaders$1.from(a.headers),a},function(a){return isCancel(a)||(throwIfCancellationRequested(e),a&&a.response&&(a.response.data=transformData.call(e,e.transformResponse,a.response),a.response.headers=AxiosHeaders$1.from(a.response.headers))),Promise.reject(a)})}const headersToObject=e=>e instanceof AxiosHeaders$1?e.toJSON():e;function mergeConfig(e,i){i=i||{};const s={};function a(j,_e,$){return utils$1.isPlainObject(j)&&utils$1.isPlainObject(_e)?utils$1.merge.call({caseless:$},j,_e):utils$1.isPlainObject(_e)?utils$1.merge({},_e):utils$1.isArray(_e)?_e.slice():_e}function o(j,_e,$){if(utils$1.isUndefined(_e)){if(!utils$1.isUndefined(j))return a(void 0,j,$)}else return a(j,_e,$)}function c(j,_e){if(!utils$1.isUndefined(_e))return a(void 0,_e)}function d(j,_e){if(utils$1.isUndefined(_e)){if(!utils$1.isUndefined(j))return a(void 0,j)}else return a(void 0,_e)}function g(j,_e,$){if($ in i)return a(j,_e);if($ in e)return a(void 0,j)}const b={url:c,method:c,data:c,baseURL:d,transformRequest:d,transformResponse:d,paramsSerializer:d,timeout:d,timeoutMessage:d,withCredentials:d,withXSRFToken:d,adapter:d,responseType:d,xsrfCookieName:d,xsrfHeaderName:d,onUploadProgress:d,onDownloadProgress:d,decompress:d,maxContentLength:d,maxBodyLength:d,beforeRedirect:d,transport:d,httpAgent:d,httpsAgent:d,cancelToken:d,socketPath:d,responseEncoding:d,validateStatus:g,headers:(j,_e)=>o(headersToObject(j),headersToObject(_e),!0)};return utils$1.forEach(Object.keys(Object.assign({},e,i)),function(_e){const $=b[_e]||o,rt=$(e[_e],i[_e],_e);utils$1.isUndefined(rt)&&$!==g||(s[_e]=rt)}),s}const VERSION="1.6.7",validators$1={};["object","boolean","number","function","string","symbol"].forEach((e,i)=>{validators$1[e]=function(a){return typeof a===e||"a"+(i<1?"n ":" ")+e}});const deprecatedWarnings={};validators$1.transitional=function(i,s,a){function o(c,d){return"[Axios v"+VERSION+"] Transitional option '"+c+"'"+d+(a?". "+a:"")}return(c,d,g)=>{if(i===!1)throw new AxiosError(o(d," has been removed"+(s?" in "+s:"")),AxiosError.ERR_DEPRECATED);return s&&!deprecatedWarnings[d]&&(deprecatedWarnings[d]=!0,console.warn(o(d," has been deprecated since v"+s+" and will be removed in the near future"))),i?i(c,d,g):!0}};function assertOptions(e,i,s){if(typeof e!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const a=Object.keys(e);let o=a.length;for(;o-- >0;){const c=a[o],d=i[c];if(d){const g=e[c],b=g===void 0||d(g,c,e);if(b!==!0)throw new AxiosError("option "+c+" must be "+b,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new AxiosError("Unknown option "+c,AxiosError.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;class Axios{constructor(i){this.defaults=i,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}async request(i,s){try{return await this._request(i,s)}catch(a){if(a instanceof Error){let o;Error.captureStackTrace?Error.captureStackTrace(o={}):o=new Error;const c=o.stack?o.stack.replace(/^.+\n/,""):"";a.stack?c&&!String(a.stack).endsWith(c.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+c):a.stack=c}throw a}}_request(i,s){typeof i=="string"?(s=s||{},s.url=i):s=i||{},s=mergeConfig(this.defaults,s);const{transitional:a,paramsSerializer:o,headers:c}=s;a!==void 0&&validator.assertOptions(a,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),o!=null&&(utils$1.isFunction(o)?s.paramsSerializer={serialize:o}:validator.assertOptions(o,{encode:validators.function,serialize:validators.function},!0)),s.method=(s.method||this.defaults.method||"get").toLowerCase();let d=c&&utils$1.merge(c.common,c[s.method]);c&&utils$1.forEach(["delete","get","head","post","put","patch","common"],ut=>{delete c[ut]}),s.headers=AxiosHeaders$1.concat(d,c);const g=[];let b=!0;this.interceptors.request.forEach(function(gt){typeof gt.runWhen=="function"&&gt.runWhen(s)===!1||(b=b&&gt.synchronous,g.unshift(gt.fulfilled,gt.rejected))});const j=[];this.interceptors.response.forEach(function(gt){j.push(gt.fulfilled,gt.rejected)});let _e,$=0,rt;if(!b){const ut=[dispatchRequest.bind(this),void 0];for(ut.unshift.apply(ut,g),ut.push.apply(ut,j),rt=ut.length,_e=Promise.resolve(s);$<rt;)_e=_e.then(ut[$++],ut[$++]);return _e}rt=g.length;let st=s;for($=0;$<rt;){const ut=g[$++],gt=g[$++];try{st=ut(st)}catch(wt){gt.call(this,wt);break}}try{_e=dispatchRequest.call(this,st)}catch(ut){return Promise.reject(ut)}for($=0,rt=j.length;$<rt;)_e=_e.then(j[$++],j[$++]);return _e}getUri(i){i=mergeConfig(this.defaults,i);const s=buildFullPath(i.baseURL,i.url);return buildURL(s,i.params,i.paramsSerializer)}}utils$1.forEach(["delete","get","head","options"],function(i){Axios.prototype[i]=function(s,a){return this.request(mergeConfig(a||{},{method:i,url:s,data:(a||{}).data}))}});utils$1.forEach(["post","put","patch"],function(i){function s(a){return function(c,d,g){return this.request(mergeConfig(g||{},{method:i,headers:a?{"Content-Type":"multipart/form-data"}:{},url:c,data:d}))}}Axios.prototype[i]=s(),Axios.prototype[i+"Form"]=s(!0)});const Axios$1=Axios;class CancelToken{constructor(i){if(typeof i!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(c){s=c});const a=this;this.promise.then(o=>{if(!a._listeners)return;let c=a._listeners.length;for(;c-- >0;)a._listeners[c](o);a._listeners=null}),this.promise.then=o=>{let c;const d=new Promise(g=>{a.subscribe(g),c=g}).then(o);return d.cancel=function(){a.unsubscribe(c)},d},i(function(c,d,g){a.reason||(a.reason=new CanceledError(c,d,g),s(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(i){if(this.reason){i(this.reason);return}this._listeners?this._listeners.push(i):this._listeners=[i]}unsubscribe(i){if(!this._listeners)return;const s=this._listeners.indexOf(i);s!==-1&&this._listeners.splice(s,1)}static source(){let i;return{token:new CancelToken(function(o){i=o}),cancel:i}}}const CancelToken$1=CancelToken;function spread(e){return function(s){return e.apply(null,s)}}function isAxiosError(e){return utils$1.isObject(e)&&e.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([e,i])=>{HttpStatusCode[i]=e});const HttpStatusCode$1=HttpStatusCode;function createInstance(e){const i=new Axios$1(e),s=bind(Axios$1.prototype.request,i);return utils$1.extend(s,Axios$1.prototype,i,{allOwnKeys:!0}),utils$1.extend(s,i,null,{allOwnKeys:!0}),s.create=function(o){return createInstance(mergeConfig(e,o))},s}const axios=createInstance(defaults$1);axios.Axios=Axios$1;axios.CanceledError=CanceledError;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel;axios.VERSION=VERSION;axios.toFormData=toFormData;axios.AxiosError=AxiosError;axios.Cancel=axios.CanceledError;axios.all=function(i){return Promise.all(i)};axios.spread=spread;axios.isAxiosError=isAxiosError;axios.mergeConfig=mergeConfig;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=e=>formDataToJSON(utils$1.isHTMLForm(e)?new FormData(e):e);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;const API_URL="https://egoras-v3-staging.egoras.com",config={headers:{"Content-Type":"application/json"}};var ScaleLoader$1={},unitConverter={};Object.defineProperty(unitConverter,"__esModule",{value:!0});unitConverter.cssValue=unitConverter.parseLengthAndUnit=void 0;var cssUnit={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function parseLengthAndUnit(e){if(typeof e=="number")return{value:e,unit:"px"};var i,s=(e.match(/^[0-9.]*/)||"").toString();s.includes(".")?i=parseFloat(s):i=parseInt(s,10);var a=(e.match(/[^0-9]*$/)||"").toString();return cssUnit[a]?{value:i,unit:a}:(console.warn("React Spinners: ".concat(e," is not a valid css value. Defaulting to ").concat(i,"px.")),{value:i,unit:"px"})}unitConverter.parseLengthAndUnit=parseLengthAndUnit;function cssValue(e){var i=parseLengthAndUnit(e);return"".concat(i.value).concat(i.unit)}unitConverter.cssValue=cssValue;var animation={};Object.defineProperty(animation,"__esModule",{value:!0});animation.createAnimation=void 0;var createAnimation=function(e,i,s){var a="react-spinners-".concat(e,"-").concat(s);if(typeof window>"u"||!window.document)return a;var o=document.createElement("style");document.head.appendChild(o);var c=o.sheet,d=`
    @keyframes `.concat(a,` {
      `).concat(i,`
    }
  `);return c&&c.insertRule(d,0),a};animation.createAnimation=createAnimation;var __assign=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign=Object.assign||function(e){for(var i,s=1,a=arguments.length;s<a;s++){i=arguments[s];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},__assign.apply(this,arguments)},__createBinding=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,i,s,a){a===void 0&&(a=s);var o=Object.getOwnPropertyDescriptor(i,s);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(e,a,o)}:function(e,i,s,a){a===void 0&&(a=s),e[a]=i[s]}),__setModuleDefault=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,i){Object.defineProperty(e,"default",{enumerable:!0,value:i})}:function(e,i){e.default=i}),__importStar=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var i={};if(e!=null)for(var s in e)s!=="default"&&Object.prototype.hasOwnProperty.call(e,s)&&__createBinding(i,e,s);return __setModuleDefault(i,e),i},__rest=commonjsGlobal&&commonjsGlobal.__rest||function(e,i){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&i.indexOf(a)<0&&(s[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(e);o<a.length;o++)i.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(s[a[o]]=e[a[o]]);return s};Object.defineProperty(ScaleLoader$1,"__esModule",{value:!0});var React=__importStar(reactExports),unitConverter_1=unitConverter,animation_1=animation,scale=(0,animation_1.createAnimation)("ScaleLoader","0% {transform: scaley(1.0)} 50% {transform: scaley(0.4)} 100% {transform: scaley(1.0)}","scale");function ScaleLoader(e){var i=e.loading,s=i===void 0?!0:i,a=e.color,o=a===void 0?"#000000":a,c=e.speedMultiplier,d=c===void 0?1:c,g=e.cssOverride,b=g===void 0?{}:g,j=e.height,_e=j===void 0?35:j,$=e.width,rt=$===void 0?4:$,st=e.radius,ut=st===void 0?2:st,gt=e.margin,wt=gt===void 0?2:gt,yt=__rest(e,["loading","color","speedMultiplier","cssOverride","height","width","radius","margin"]),At=__assign({display:"inherit"},b),Ct=function(Tt){return{backgroundColor:o,width:(0,unitConverter_1.cssValue)(rt),height:(0,unitConverter_1.cssValue)(_e),margin:(0,unitConverter_1.cssValue)(wt),borderRadius:(0,unitConverter_1.cssValue)(ut),display:"inline-block",animation:"".concat(scale," ").concat(1/d,"s ").concat(Tt*.1,"s infinite cubic-bezier(0.2, 0.68, 0.18, 1.08)"),animationFillMode:"both"}};return s?React.createElement("span",__assign({style:At},yt),React.createElement("span",{style:Ct(1)}),React.createElement("span",{style:Ct(2)}),React.createElement("span",{style:Ct(3)}),React.createElement("span",{style:Ct(4)}),React.createElement("span",{style:Ct(5)})):null}var _default=ScaleLoader$1.default=ScaleLoader;const v$1="4.10.1",fr$1=25,ip$1=0,op$1=55,w$1=796,h$1=714,nm$1="Anim8*",ddd$1=0,assets$1=[{id:"comp_745",layers:[{ddd:0,ind:1,ty:4,nm:"cruz3",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},n:["0p833_0p833_0p167_0p167"],t:18,s:[1],e:[100]},{t:28}],ix:11},r:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},n:["0p667_1_0p333_0"],t:18,s:[-33],e:[13]},{t:50}],ix:10},p:{a:1,k:[{i:{x:0,y:1},o:{x:.333,y:0},n:"0_1_0p333_0",t:18,s:[614.125,467.5,0],e:[841.125,680.5,0],to:[37.8333320617676,35.5,0],ti:[-37.8333320617676,-35.5,0]},{t:28}],ix:2},a:{a:0,k:[-882.375,-1726,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-894.5,-1726],[-869.5,-1726]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.12156863,.67843137,.38431373,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:3,ix:5},lc:1,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 2",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-894.5,-1726],[-869.5,-1726]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.12156863,.67843137,.38431373,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:3,ix:5},lc:1,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[-882.239,-1725.811],ix:2},a:{a:0,k:[-882.239,-1725.811],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:-90,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,ix:2,mn:"ADBE Vector Group",hd:!1}],ip:18,op:1020.5,st:18,bm:0},{ddd:0,ind:2,ty:4,nm:"cruz2",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},n:["0p833_0p833_0p167_0p167"],t:16,s:[1],e:[100]},{t:26}],ix:11},r:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},n:["0p667_1_0p333_0"],t:16,s:[-30],e:[16]},{t:50}],ix:10},p:{a:1,k:[{i:{x:0,y:1},o:{x:.333,y:0},n:"0_1_0p333_0",t:16,s:[606.125,465.5,0],e:[322.125,572.5,0],to:[-47.3333320617676,17.8333339691162,0],ti:[47.3333320617676,-17.8333339691162,0]},{t:26}],ix:2},a:{a:0,k:[-882.375,-1726,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-894.5,-1726],[-869.5,-1726]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.12156863,.67843137,.38431373,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:3,ix:5},lc:1,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 2",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-894.5,-1726],[-869.5,-1726]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.12156863,.67843137,.38431373,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:3,ix:5},lc:1,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[-882.239,-1725.811],ix:2},a:{a:0,k:[-882.239,-1725.811],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:-90,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,ix:2,mn:"ADBE Vector Group",hd:!1}],ip:16,op:1018.5,st:16,bm:0},{ddd:0,ind:3,ty:4,nm:"cruz1",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},n:["0p833_0p833_0p167_0p167"],t:15,s:[1],e:[100]},{t:25}],ix:11},r:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},n:["0p667_1_0p333_0"],t:15,s:[-28],e:[18]},{t:50}],ix:10},p:{a:1,k:[{i:{x:.103,y:1},o:{x:.333,y:0},n:"0p103_1_0p333_0",t:15,s:[614.125,462.5,0],e:[852.125,164.5,0],to:[39.6666679382324,-49.6666679382324,0],ti:[-39.6666679382324,49.6666679382324,0]},{t:25}],ix:2},a:{a:0,k:[-882.375,-1726,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-894.5,-1726],[-869.5,-1726]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.12156863,.67843137,.38431373,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:3,ix:5},lc:1,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 2",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-894.5,-1726],[-869.5,-1726]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.12156863,.67843137,.38431373,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:3,ix:5},lc:1,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[-882.239,-1725.811],ix:2},a:{a:0,k:[-882.239,-1725.811],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:-90,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,ix:2,mn:"ADBE Vector Group",hd:!1}],ip:15,op:1017.5,st:15,bm:0},{ddd:0,ind:4,ty:4,nm:"Bolas2",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[617.5,490.5,0],ix:2},a:{a:0,k:[-1112,-1428,0],ix:1},s:{a:1,k:[{i:{x:[.101,.101,.667],y:[1,1,1]},o:{x:[.333,.333,.333],y:[0,0,0]},n:["0p101_1_0p333_0","0p101_1_0p333_0","0p667_1_0p333_0"],t:13,s:[0,0,100],e:[100,100,100]},{t:25}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[19.355,19.355],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[.12156863,.67843137,.38431373,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[-952.029,-1150.197],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[64.361,64.361],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 3",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[19.355,19.355],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[.12156863,.67843137,.38431373,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[-1435.793,-1556.371],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[64.361,64.361],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 2",np:3,cix:2,ix:2,mn:"ADBE Vector Group",hd:!1}],ip:13,op:1015.5,st:13,bm:0},{ddd:0,ind:5,ty:4,nm:"Bolas1",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.833],y:[.921]},o:{x:[.333],y:[0]},n:["0p833_0p921_0p333_0"],t:11,s:[-11],e:[0]},{i:{x:[.15],y:[1]},o:{x:[.167],y:[.327]},n:["0p15_1_0p167_0p327"],t:23,s:[0],e:[6]},{t:50}],ix:10},p:{a:0,k:[621.5,478.5,0],ix:2},a:{a:0,k:[-1108,-1440,0],ix:1},s:{a:1,k:[{i:{x:[.101,.101,.667],y:[1,1,1]},o:{x:[.333,.333,.333],y:[0,0,0]},n:["0p101_1_0p333_0","0p101_1_0p333_0","0p667_1_0p333_0"],t:11,s:[0,0,100],e:[100,100,100]},{t:23}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[19.355,19.355],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[.12156863,.67843137,.38431373,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:5,ix:5},lc:1,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[-1151.238,-1723.625],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[140.88,140.88],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 2",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[19.355,19.355],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[.12156863,.67843137,.38431373,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:5,ix:5},lc:1,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[-1282.949,-1147.881],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[140.88,140.88],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:3,cix:2,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[19.355,19.355],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[.12156863,.67843137,.38431373,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:5,ix:5},lc:1,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[-819.535,-1371.645],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[85.671,85.671],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 3",np:3,cix:2,ix:3,mn:"ADBE Vector Group",hd:!1}],ip:11,op:1013.5,st:11,bm:0},{ddd:0,ind:6,ty:4,nm:"stroke3",sr:1,ks:{o:{a:0,k:50,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[1950.5,2175.5,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-1401.5,-1457.5],[-1117.454,-1623.493]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.12156863,.67843137,.38431373,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:92,ix:5},lc:2,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100.04,99.99],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:0,k:0,ix:1},e:{a:1,k:[{i:{x:[.156],y:[1]},o:{x:[.333],y:[0]},n:["0p156_1_0p333_0"],t:9,s:[0],e:[100]},{t:17}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:9,op:1011.5,st:9,bm:0},{ddd:0,ind:7,ty:4,nm:"stroke4",sr:1,ks:{o:{a:0,k:50,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[2288.5,1790.5,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-1401.5,-1457.5],[-1372.351,-1474.477]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.12156863,.67843137,.38431373,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:92,ix:5},lc:2,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100.04,99.99],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:0,k:0,ix:1},e:{a:1,k:[{i:{x:[.156],y:[1]},o:{x:[.333],y:[0]},n:["0p156_1_0p333_0"],t:6.5,s:[0],e:[100]},{t:14.5}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:6.5,op:1009,st:6.5,bm:0},{ddd:0,ind:8,ty:4,nm:"stroke2",sr:1,ks:{o:{a:0,k:50,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[1818.5,2059.5,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-1401.5,-1457.5],[-1027.49,-1672.499]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.12156863,.67843137,.38431373,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:92,ix:5},lc:2,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100.04,99.99],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:0,k:0,ix:1},e:{a:1,k:[{i:{x:[.156],y:[1]},o:{x:[.333],y:[0]},n:["0p156_1_0p333_0"],t:4,s:[0],e:[100]},{t:12}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:4,op:1006.5,st:4,bm:0},{ddd:0,ind:9,ty:4,nm:"stroke1",sr:1,ks:{o:{a:0,k:50,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[1729.5,1918.5,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-1401.5,-1457.5],[-1027.49,-1672.499]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.12156863,.67843137,.38431373,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:92,ix:5},lc:2,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100.04,99.99],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:0,k:0,ix:1},e:{a:1,k:[{i:{x:[.156],y:[1]},o:{x:[.333],y:[0]},n:["0p156_1_0p333_0"],t:0,s:[0],e:[100]},{t:8}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:0,op:1002.5,st:0,bm:0}]}],layers$1=[{ddd:0,ind:1,ty:4,nm:"Shape Layer 3",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[396.5,357,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0]],v:[[-72,6],[-28,49],[75,-54]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[1,1,1,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:18,ix:5},lc:1,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:0,k:0,ix:1},e:{a:1,k:[{i:{x:[.156],y:[1]},o:{x:[.333],y:[0]},n:["0p156_1_0p333_0"],t:18,s:[0],e:[100]},{t:32}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:18,op:73,st:18,bm:0},{ddd:0,ind:2,ty:4,nm:"Shape Layer 2",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[398,357.031,0],ix:2},a:{a:0,k:[9.719,2.719,0],ix:1},s:{a:1,k:[{i:{x:[0,0,.667],y:[1,1,1]},o:{x:[.333,.333,.333],y:[0,0,0]},n:["0_1_0p333_0","0_1_0p333_0","0p667_1_0p333_0"],t:13,s:[30,30,100],e:[91.577,91.577,100]},{t:21}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[355.438,355.438],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[1,1,1,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:0,ix:5},lc:1,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[.12156863,.67843137,.38431373,1],ix:4},o:{a:0,k:100,ix:5},r:1,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[9.719,2.719],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:13,op:68,st:13,bm:0},{ddd:0,ind:3,ty:4,nm:"Shape Layer 1",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[398.111,357.031,0],ix:2},a:{a:0,k:[9.719,2.719,0],ix:1},s:{a:1,k:[{i:{x:[0,0,.667],y:[1,1,1]},o:{x:[.333,.333,.333],y:[0,0,0]},n:["0_1_0p333_0","0_1_0p333_0","0p667_1_0p333_0"],t:8,s:[30,30,100],e:[101.143,101.143,100]},{t:16}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[355.438,355.438],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[1,1,1,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:0,ix:5},lc:1,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[.47843137,.86666667,.65882353,1],ix:4},o:{a:0,k:100,ix:5},r:1,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[9.719,2.719],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:8,op:63,st:8,bm:0},{ddd:0,ind:4,ty:0,nm:"BG",refId:"comp_745",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[1513.5,1812.5,0],ix:2},a:{a:0,k:[1729.5,1918.5,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,w:3459,h:3837,ip:0,op:1005,st:0,bm:0}],successLoader={v:v$1,fr:fr$1,ip:ip$1,op:op$1,w:w$1,h:h$1,nm:nm$1,ddd:ddd$1,assets:assets$1,layers:layers$1};var lottie$1={exports:{}};(function(module,exports){typeof navigator<"u"&&function(e,i){module.exports=i()}(commonjsGlobal,function(){var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(i){_useWebWorker=!!i},getWebWorker=function(){return _useWebWorker},setLocationHref=function(i){locationHref=i},getLocationHref=function(){return locationHref};function createTag(e){return document.createElement(e)}function extendPrototype(e,i){var s,a=e.length,o;for(s=0;s<a;s+=1){o=e[s].prototype;for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(i.prototype[c]=o[c])}}function getDescriptor(e,i){return Object.getOwnPropertyDescriptor(e,i)}function createProxyFunction(e){function i(){}return i.prototype=e,i}var audioControllerFactory=function(){function e(i){this.audios=[],this.audioFactory=i,this._volume=1,this._isMuted=!1}return e.prototype={addAudio:function(s){this.audios.push(s)},pause:function(){var s,a=this.audios.length;for(s=0;s<a;s+=1)this.audios[s].pause()},resume:function(){var s,a=this.audios.length;for(s=0;s<a;s+=1)this.audios[s].resume()},setRate:function(s){var a,o=this.audios.length;for(a=0;a<o;a+=1)this.audios[a].setRate(s)},createAudio:function(s){return this.audioFactory?this.audioFactory(s):window.Howl?new window.Howl({src:[s]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(s){this.audioFactory=s},setVolume:function(s){this._volume=s,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var s,a=this.audios.length;for(s=0;s<a;s+=1)this.audios[s].volume(this._volume*(this._isMuted?0:1))}},function(){return new e}}(),createTypedArray=function(){function e(s,a){var o=0,c=[],d;switch(s){case"int16":case"uint8c":d=1;break;default:d=1.1;break}for(o=0;o<a;o+=1)c.push(d);return c}function i(s,a){return s==="float32"?new Float32Array(a):s==="int16"?new Int16Array(a):s==="uint8c"?new Uint8ClampedArray(a):e(s,a)}return typeof Uint8ClampedArray=="function"&&typeof Float32Array=="function"?i:e}();function createSizedArray(e){return Array.apply(null,{length:e})}function _typeof$6(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$6=function(s){return typeof s}:_typeof$6=function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},_typeof$6(e)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};(function(){var e=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],i,s=e.length;for(i=0;i<s;i+=1)BMMath[e[i]]=Math[e[i]]})(),BMMath.random=Math.random,BMMath.abs=function(e){var i=_typeof$6(e);if(i==="object"&&e.length){var s=createSizedArray(e.length),a,o=e.length;for(a=0;a<o;a+=1)s[a]=Math.abs(e[a]);return s}return Math.abs(e)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function styleDiv(e){e.style.position="absolute",e.style.top=0,e.style.left=0,e.style.display="block",e.style.transformOrigin="0 0",e.style.webkitTransformOrigin="0 0",e.style.backfaceVisibility="visible",e.style.webkitBackfaceVisibility="visible",e.style.transformStyle="preserve-3d",e.style.webkitTransformStyle="preserve-3d",e.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(e,i,s,a){this.type=e,this.currentTime=i,this.totalTime=s,this.direction=a<0?-1:1}function BMCompleteEvent(e,i){this.type=e,this.direction=i<0?-1:1}function BMCompleteLoopEvent(e,i,s,a){this.type=e,this.currentLoop=s,this.totalLoops=i,this.direction=a<0?-1:1}function BMSegmentStartEvent(e,i,s){this.type=e,this.firstFrame=i,this.totalFrames=s}function BMDestroyEvent(e,i){this.type=e,this.target=i}function BMRenderFrameErrorEvent(e,i){this.type="renderFrameError",this.nativeError=e,this.currentTime=i}function BMConfigErrorEvent(e){this.type="configError",this.nativeError=e}var createElementID=function(){var e=0;return function(){return e+=1,idPrefix$1+"__lottie_element_"+e}}();function HSVtoRGB(e,i,s){var a,o,c,d,g,b,j,_e;switch(d=Math.floor(e*6),g=e*6-d,b=s*(1-i),j=s*(1-g*i),_e=s*(1-(1-g)*i),d%6){case 0:a=s,o=_e,c=b;break;case 1:a=j,o=s,c=b;break;case 2:a=b,o=s,c=_e;break;case 3:a=b,o=j,c=s;break;case 4:a=_e,o=b,c=s;break;case 5:a=s,o=b,c=j;break}return[a,o,c]}function RGBtoHSV(e,i,s){var a=Math.max(e,i,s),o=Math.min(e,i,s),c=a-o,d,g=a===0?0:c/a,b=a/255;switch(a){case o:d=0;break;case e:d=i-s+c*(i<s?6:0),d/=6*c;break;case i:d=s-e+c*2,d/=6*c;break;case s:d=e-i+c*4,d/=6*c;break}return[d,g,b]}function addSaturationToRGB(e,i){var s=RGBtoHSV(e[0]*255,e[1]*255,e[2]*255);return s[1]+=i,s[1]>1?s[1]=1:s[1]<=0&&(s[1]=0),HSVtoRGB(s[0],s[1],s[2])}function addBrightnessToRGB(e,i){var s=RGBtoHSV(e[0]*255,e[1]*255,e[2]*255);return s[2]+=i,s[2]>1?s[2]=1:s[2]<0&&(s[2]=0),HSVtoRGB(s[0],s[1],s[2])}function addHueToRGB(e,i){var s=RGBtoHSV(e[0]*255,e[1]*255,e[2]*255);return s[0]+=i/360,s[0]>1?s[0]-=1:s[0]<0&&(s[0]+=1),HSVtoRGB(s[0],s[1],s[2])}var rgbToHex=function(){var e=[],i,s;for(i=0;i<256;i+=1)s=i.toString(16),e[i]=s.length===1?"0"+s:s;return function(a,o,c){return a<0&&(a=0),o<0&&(o=0),c<0&&(c=0),"#"+e[a]+e[o]+e[c]}}(),setSubframeEnabled=function(i){subframeEnabled=!!i},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(i){expressionsPlugin=i},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(i){expressionsInterfaces=i},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(i){defaultCurveSegments=i},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(i){idPrefix$1=i};function createNS(e){return document.createElementNS(svgNS,e)}function _typeof$5(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$5=function(s){return typeof s}:_typeof$5=function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},_typeof$5(e)}var dataManager=function(){var e=1,i=[],s,a,o={onmessage:function(){},postMessage:function(st){s({data:st})}},c={postMessage:function(st){o.onmessage({data:st})}};function d(rt){if(window.Worker&&window.Blob&&getWebWorker()){var st=new Blob(["var _workerSelf = self; self.onmessage = ",rt.toString()],{type:"text/javascript"}),ut=URL.createObjectURL(st);return new Worker(ut)}return s=rt,o}function g(){a||(a=d(function(st){function ut(){function wt(Nn,us){var hn,Ft,Gr=Nn.length,gn,un,Zn,xu;for(Ft=0;Ft<Gr;Ft+=1)if(hn=Nn[Ft],"ks"in hn&&!hn.completed){if(hn.completed=!0,hn.hasMask){var ou=hn.masksProperties;for(un=ou.length,gn=0;gn<un;gn+=1)if(ou[gn].pt.k.i)kt(ou[gn].pt.k);else for(xu=ou[gn].pt.k.length,Zn=0;Zn<xu;Zn+=1)ou[gn].pt.k[Zn].s&&kt(ou[gn].pt.k[Zn].s[0]),ou[gn].pt.k[Zn].e&&kt(ou[gn].pt.k[Zn].e[0])}hn.ty===0?(hn.layers=Ct(hn.refId,us),wt(hn.layers,us)):hn.ty===4?Tt(hn.shapes):hn.ty===5&&_s(hn)}}function yt(Nn,us){if(Nn){var hn=0,Ft=Nn.length;for(hn=0;hn<Ft;hn+=1)Nn[hn].t===1&&(Nn[hn].data.layers=Ct(Nn[hn].data.refId,us),wt(Nn[hn].data.layers,us))}}function At(Nn,us){for(var hn=0,Ft=us.length;hn<Ft;){if(us[hn].id===Nn)return us[hn];hn+=1}return null}function Ct(Nn,us){var hn=At(Nn,us);return hn?hn.layers.__used?JSON.parse(JSON.stringify(hn.layers)):(hn.layers.__used=!0,hn.layers):null}function Tt(Nn){var us,hn=Nn.length,Ft,Gr;for(us=hn-1;us>=0;us-=1)if(Nn[us].ty==="sh")if(Nn[us].ks.k.i)kt(Nn[us].ks.k);else for(Gr=Nn[us].ks.k.length,Ft=0;Ft<Gr;Ft+=1)Nn[us].ks.k[Ft].s&&kt(Nn[us].ks.k[Ft].s[0]),Nn[us].ks.k[Ft].e&&kt(Nn[us].ks.k[Ft].e[0]);else Nn[us].ty==="gr"&&Tt(Nn[us].it)}function kt(Nn){var us,hn=Nn.i.length;for(us=0;us<hn;us+=1)Nn.i[us][0]+=Nn.v[us][0],Nn.i[us][1]+=Nn.v[us][1],Nn.o[us][0]+=Nn.v[us][0],Nn.o[us][1]+=Nn.v[us][1]}function Pt(Nn,us){var hn=us?us.split("."):[100,100,100];return Nn[0]>hn[0]?!0:hn[0]>Nn[0]?!1:Nn[1]>hn[1]?!0:hn[1]>Nn[1]?!1:Nn[2]>hn[2]?!0:hn[2]>Nn[2]?!1:null}var It=function(){var Nn=[4,4,14];function us(Ft){var Gr=Ft.t.d;Ft.t.d={k:[{s:Gr,t:0}]}}function hn(Ft){var Gr,gn=Ft.length;for(Gr=0;Gr<gn;Gr+=1)Ft[Gr].ty===5&&us(Ft[Gr])}return function(Ft){if(Pt(Nn,Ft.v)&&(hn(Ft.layers),Ft.assets)){var Gr,gn=Ft.assets.length;for(Gr=0;Gr<gn;Gr+=1)Ft.assets[Gr].layers&&hn(Ft.assets[Gr].layers)}}}(),Lt=function(){var Nn=[4,7,99];return function(us){if(us.chars&&!Pt(Nn,us.v)){var hn,Ft=us.chars.length;for(hn=0;hn<Ft;hn+=1){var Gr=us.chars[hn];Gr.data&&Gr.data.shapes&&(Tt(Gr.data.shapes),Gr.data.ip=0,Gr.data.op=99999,Gr.data.st=0,Gr.data.sr=1,Gr.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},us.chars[hn].t||(Gr.data.shapes.push({ty:"no"}),Gr.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}}(),Nt=function(){var Nn=[5,7,15];function us(Ft){var Gr=Ft.t.p;typeof Gr.a=="number"&&(Gr.a={a:0,k:Gr.a}),typeof Gr.p=="number"&&(Gr.p={a:0,k:Gr.p}),typeof Gr.r=="number"&&(Gr.r={a:0,k:Gr.r})}function hn(Ft){var Gr,gn=Ft.length;for(Gr=0;Gr<gn;Gr+=1)Ft[Gr].ty===5&&us(Ft[Gr])}return function(Ft){if(Pt(Nn,Ft.v)&&(hn(Ft.layers),Ft.assets)){var Gr,gn=Ft.assets.length;for(Gr=0;Gr<gn;Gr+=1)Ft.assets[Gr].layers&&hn(Ft.assets[Gr].layers)}}}(),Ht=function(){var Nn=[4,1,9];function us(Ft){var Gr,gn=Ft.length,un,Zn;for(Gr=0;Gr<gn;Gr+=1)if(Ft[Gr].ty==="gr")us(Ft[Gr].it);else if(Ft[Gr].ty==="fl"||Ft[Gr].ty==="st")if(Ft[Gr].c.k&&Ft[Gr].c.k[0].i)for(Zn=Ft[Gr].c.k.length,un=0;un<Zn;un+=1)Ft[Gr].c.k[un].s&&(Ft[Gr].c.k[un].s[0]/=255,Ft[Gr].c.k[un].s[1]/=255,Ft[Gr].c.k[un].s[2]/=255,Ft[Gr].c.k[un].s[3]/=255),Ft[Gr].c.k[un].e&&(Ft[Gr].c.k[un].e[0]/=255,Ft[Gr].c.k[un].e[1]/=255,Ft[Gr].c.k[un].e[2]/=255,Ft[Gr].c.k[un].e[3]/=255);else Ft[Gr].c.k[0]/=255,Ft[Gr].c.k[1]/=255,Ft[Gr].c.k[2]/=255,Ft[Gr].c.k[3]/=255}function hn(Ft){var Gr,gn=Ft.length;for(Gr=0;Gr<gn;Gr+=1)Ft[Gr].ty===4&&us(Ft[Gr].shapes)}return function(Ft){if(Pt(Nn,Ft.v)&&(hn(Ft.layers),Ft.assets)){var Gr,gn=Ft.assets.length;for(Gr=0;Gr<gn;Gr+=1)Ft.assets[Gr].layers&&hn(Ft.assets[Gr].layers)}}}(),dr=function(){var Nn=[4,4,18];function us(Ft){var Gr,gn=Ft.length,un,Zn;for(Gr=gn-1;Gr>=0;Gr-=1)if(Ft[Gr].ty==="sh")if(Ft[Gr].ks.k.i)Ft[Gr].ks.k.c=Ft[Gr].closed;else for(Zn=Ft[Gr].ks.k.length,un=0;un<Zn;un+=1)Ft[Gr].ks.k[un].s&&(Ft[Gr].ks.k[un].s[0].c=Ft[Gr].closed),Ft[Gr].ks.k[un].e&&(Ft[Gr].ks.k[un].e[0].c=Ft[Gr].closed);else Ft[Gr].ty==="gr"&&us(Ft[Gr].it)}function hn(Ft){var Gr,gn,un=Ft.length,Zn,xu,ou,sp;for(gn=0;gn<un;gn+=1){if(Gr=Ft[gn],Gr.hasMask){var wu=Gr.masksProperties;for(xu=wu.length,Zn=0;Zn<xu;Zn+=1)if(wu[Zn].pt.k.i)wu[Zn].pt.k.c=wu[Zn].cl;else for(sp=wu[Zn].pt.k.length,ou=0;ou<sp;ou+=1)wu[Zn].pt.k[ou].s&&(wu[Zn].pt.k[ou].s[0].c=wu[Zn].cl),wu[Zn].pt.k[ou].e&&(wu[Zn].pt.k[ou].e[0].c=wu[Zn].cl)}Gr.ty===4&&us(Gr.shapes)}}return function(Ft){if(Pt(Nn,Ft.v)&&(hn(Ft.layers),Ft.assets)){var Gr,gn=Ft.assets.length;for(Gr=0;Gr<gn;Gr+=1)Ft.assets[Gr].layers&&hn(Ft.assets[Gr].layers)}}}();function hs(Nn){Nn.__complete||(Ht(Nn),It(Nn),Lt(Nn),Nt(Nn),dr(Nn),wt(Nn.layers,Nn.assets),yt(Nn.chars,Nn.assets),Nn.__complete=!0)}function _s(Nn){Nn.t.a.length===0&&"m"in Nn.t.p}var ds={};return ds.completeData=hs,ds.checkColors=Ht,ds.checkChars=Lt,ds.checkPathProperties=Nt,ds.checkShapes=dr,ds.completeLayers=wt,ds}if(c.dataManager||(c.dataManager=ut()),c.assetLoader||(c.assetLoader=function(){function wt(At){var Ct=At.getResponseHeader("content-type");return Ct&&At.responseType==="json"&&Ct.indexOf("json")!==-1||At.response&&_typeof$5(At.response)==="object"?At.response:At.response&&typeof At.response=="string"?JSON.parse(At.response):At.responseText?JSON.parse(At.responseText):null}function yt(At,Ct,Tt,kt){var Pt,It=new XMLHttpRequest;try{It.responseType="json"}catch{}It.onreadystatechange=function(){if(It.readyState===4)if(It.status===200)Pt=wt(It),Tt(Pt);else try{Pt=wt(It),Tt(Pt)}catch(Lt){kt&&kt(Lt)}};try{It.open(["G","E","T"].join(""),At,!0)}catch{It.open(["G","E","T"].join(""),Ct+"/"+At,!0)}It.send()}return{load:yt}}()),st.data.type==="loadAnimation")c.assetLoader.load(st.data.path,st.data.fullPath,function(wt){c.dataManager.completeData(wt),c.postMessage({id:st.data.id,payload:wt,status:"success"})},function(){c.postMessage({id:st.data.id,status:"error"})});else if(st.data.type==="complete"){var gt=st.data.animation;c.dataManager.completeData(gt),c.postMessage({id:st.data.id,payload:gt,status:"success"})}else st.data.type==="loadData"&&c.assetLoader.load(st.data.path,st.data.fullPath,function(wt){c.postMessage({id:st.data.id,payload:wt,status:"success"})},function(){c.postMessage({id:st.data.id,status:"error"})})}),a.onmessage=function(rt){var st=rt.data,ut=st.id,gt=i[ut];i[ut]=null,st.status==="success"?gt.onComplete(st.payload):gt.onError&&gt.onError()})}function b(rt,st){e+=1;var ut="processId_"+e;return i[ut]={onComplete:rt,onError:st},ut}function j(rt,st,ut){g();var gt=b(st,ut);a.postMessage({type:"loadAnimation",path:rt,fullPath:window.location.origin+window.location.pathname,id:gt})}function _e(rt,st,ut){g();var gt=b(st,ut);a.postMessage({type:"loadData",path:rt,fullPath:window.location.origin+window.location.pathname,id:gt})}function $(rt,st,ut){g();var gt=b(st,ut);a.postMessage({type:"complete",animation:rt,id:gt})}return{loadAnimation:j,loadData:_e,completeAnimation:$}}(),ImagePreloader=function(){var e=function(){var yt=createTag("canvas");yt.width=1,yt.height=1;var At=yt.getContext("2d");return At.fillStyle="rgba(0,0,0,0)",At.fillRect(0,0,1,1),yt}();function i(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function s(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function a(yt,At,Ct){var Tt="";if(yt.e)Tt=yt.p;else if(At){var kt=yt.p;kt.indexOf("images/")!==-1&&(kt=kt.split("/")[1]),Tt=At+kt}else Tt=Ct,Tt+=yt.u?yt.u:"",Tt+=yt.p;return Tt}function o(yt){var At=0,Ct=setInterval((function(){var Tt=yt.getBBox();(Tt.width||At>500)&&(this._imageLoaded(),clearInterval(Ct)),At+=1}).bind(this),50)}function c(yt){var At=a(yt,this.assetsPath,this.path),Ct=createNS("image");isSafari?this.testImageLoaded(Ct):Ct.addEventListener("load",this._imageLoaded,!1),Ct.addEventListener("error",(function(){Tt.img=e,this._imageLoaded()}).bind(this),!1),Ct.setAttributeNS("http://www.w3.org/1999/xlink","href",At),this._elementHelper.append?this._elementHelper.append(Ct):this._elementHelper.appendChild(Ct);var Tt={img:Ct,assetData:yt};return Tt}function d(yt){var At=a(yt,this.assetsPath,this.path),Ct=createTag("img");Ct.crossOrigin="anonymous",Ct.addEventListener("load",this._imageLoaded,!1),Ct.addEventListener("error",(function(){Tt.img=e,this._imageLoaded()}).bind(this),!1),Ct.src=At;var Tt={img:Ct,assetData:yt};return Tt}function g(yt){var At={assetData:yt},Ct=a(yt,this.assetsPath,this.path);return dataManager.loadData(Ct,(function(Tt){At.img=Tt,this._footageLoaded()}).bind(this),(function(){At.img={},this._footageLoaded()}).bind(this)),At}function b(yt,At){this.imagesLoadedCb=At;var Ct,Tt=yt.length;for(Ct=0;Ct<Tt;Ct+=1)yt[Ct].layers||(!yt[Ct].t||yt[Ct].t==="seq"?(this.totalImages+=1,this.images.push(this._createImageData(yt[Ct]))):yt[Ct].t===3&&(this.totalFootages+=1,this.images.push(this.createFootageData(yt[Ct]))))}function j(yt){this.path=yt||""}function _e(yt){this.assetsPath=yt||""}function $(yt){for(var At=0,Ct=this.images.length;At<Ct;){if(this.images[At].assetData===yt)return this.images[At].img;At+=1}return null}function rt(){this.imagesLoadedCb=null,this.images.length=0}function st(){return this.totalImages===this.loadedAssets}function ut(){return this.totalFootages===this.loadedFootagesCount}function gt(yt,At){yt==="svg"?(this._elementHelper=At,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}function wt(){this._imageLoaded=i.bind(this),this._footageLoaded=s.bind(this),this.testImageLoaded=o.bind(this),this.createFootageData=g.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return wt.prototype={loadAssets:b,setAssetsPath:_e,setPath:j,loadedImages:st,loadedFootages:ut,destroy:rt,getAsset:$,createImgData:d,createImageData:c,imageLoaded:i,footageLoaded:s,setCacheType:gt},wt}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(i,s){if(this._cbs[i])for(var a=this._cbs[i],o=0;o<a.length;o+=1)a[o](s)},addEventListener:function(i,s){return this._cbs[i]||(this._cbs[i]=[]),this._cbs[i].push(s),(function(){this.removeEventListener(i,s)}).bind(this)},removeEventListener:function(i,s){if(!s)this._cbs[i]=null;else if(this._cbs[i]){for(var a=0,o=this._cbs[i].length;a<o;)this._cbs[i][a]===s&&(this._cbs[i].splice(a,1),a-=1,o-=1),a+=1;this._cbs[i].length||(this._cbs[i]=null)}}};var markerParser=function(){function e(i){for(var s=i.split(`\r
`),a={},o,c=0,d=0;d<s.length;d+=1)o=s[d].split(":"),o.length===2&&(a[o[0]]=o[1].trim(),c+=1);if(c===0)throw new Error;return a}return function(i){for(var s=[],a=0;a<i.length;a+=1){var o=i[a],c={time:o.tm,duration:o.dr};try{c.payload=JSON.parse(i[a].cm)}catch{try{c.payload=e(i[a].cm)}catch{c.payload={name:i[a].cm}}}s.push(c)}return s}}(),ProjectInterface=function(){function e(i){this.compositions.push(i)}return function(){function i(s){for(var a=0,o=this.compositions.length;a<o;){if(this.compositions[a].data&&this.compositions[a].data.nm===s)return this.compositions[a].prepareFrame&&this.compositions[a].data.xt&&this.compositions[a].prepareFrame(this.currentFrame),this.compositions[a].compInterface;a+=1}return null}return i.compositions=[],i.currentFrame=0,i.registerComposition=e,i}}(),renderers={},registerRenderer=function(i,s){renderers[i]=s};function getRenderer(e){return renderers[e]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var e in renderers)if(renderers[e])return e;return""}function _typeof$4(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$4=function(s){return typeof s}:_typeof$4=function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},_typeof$4(e)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0),this.expressionsPlugin=getExpressionsPlugin()};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(e){(e.wrapper||e.container)&&(this.wrapper=e.wrapper||e.container);var i="svg";e.animType?i=e.animType:e.renderer&&(i=e.renderer);var s=getRenderer(i);this.renderer=new s(this,e.rendererSettings),this.imagePreloader.setCacheType(i,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=i,e.loop===""||e.loop===null||e.loop===void 0||e.loop===!0?this.loop=!0:e.loop===!1?this.loop=!1:this.loop=parseInt(e.loop,10),this.autoplay="autoplay"in e?e.autoplay:!0,this.name=e.name?e.name:"",this.autoloadSegments=Object.prototype.hasOwnProperty.call(e,"autoloadSegments")?e.autoloadSegments:!0,this.assetsPath=e.assetsPath,this.initialSegment=e.initialSegment,e.audioFactory&&this.audioController.setAudioFactory(e.audioFactory),e.animationData?this.setupAnimation(e.animationData):e.path&&(e.path.lastIndexOf("\\")!==-1?this.path=e.path.substr(0,e.path.lastIndexOf("\\")+1):this.path=e.path.substr(0,e.path.lastIndexOf("/")+1),this.fileName=e.path.substr(e.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(e.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(e){dataManager.completeAnimation(e,this.configAnimation)},AnimationItem.prototype.setData=function(e,i){i&&_typeof$4(i)!=="object"&&(i=JSON.parse(i));var s={wrapper:e,animationData:i},a=e.attributes;s.path=a.getNamedItem("data-animation-path")?a.getNamedItem("data-animation-path").value:a.getNamedItem("data-bm-path")?a.getNamedItem("data-bm-path").value:a.getNamedItem("bm-path")?a.getNamedItem("bm-path").value:"",s.animType=a.getNamedItem("data-anim-type")?a.getNamedItem("data-anim-type").value:a.getNamedItem("data-bm-type")?a.getNamedItem("data-bm-type").value:a.getNamedItem("bm-type")?a.getNamedItem("bm-type").value:a.getNamedItem("data-bm-renderer")?a.getNamedItem("data-bm-renderer").value:a.getNamedItem("bm-renderer")?a.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var o=a.getNamedItem("data-anim-loop")?a.getNamedItem("data-anim-loop").value:a.getNamedItem("data-bm-loop")?a.getNamedItem("data-bm-loop").value:a.getNamedItem("bm-loop")?a.getNamedItem("bm-loop").value:"";o==="false"?s.loop=!1:o==="true"?s.loop=!0:o!==""&&(s.loop=parseInt(o,10));var c=a.getNamedItem("data-anim-autoplay")?a.getNamedItem("data-anim-autoplay").value:a.getNamedItem("data-bm-autoplay")?a.getNamedItem("data-bm-autoplay").value:a.getNamedItem("bm-autoplay")?a.getNamedItem("bm-autoplay").value:!0;s.autoplay=c!=="false",s.name=a.getNamedItem("data-name")?a.getNamedItem("data-name").value:a.getNamedItem("data-bm-name")?a.getNamedItem("data-bm-name").value:a.getNamedItem("bm-name")?a.getNamedItem("bm-name").value:"";var d=a.getNamedItem("data-anim-prerender")?a.getNamedItem("data-anim-prerender").value:a.getNamedItem("data-bm-prerender")?a.getNamedItem("data-bm-prerender").value:a.getNamedItem("bm-prerender")?a.getNamedItem("bm-prerender").value:"";d==="false"&&(s.prerender=!1),s.path?this.setParams(s):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(e){e.op>this.animationData.op&&(this.animationData.op=e.op,this.totalFrames=Math.floor(e.op-this.animationData.ip));var i=this.animationData.layers,s,a=i.length,o=e.layers,c,d=o.length;for(c=0;c<d;c+=1)for(s=0;s<a;){if(i[s].id===o[c].id){i[s]=o[c];break}s+=1}if((e.chars||e.fonts)&&(this.renderer.globalData.fontManager.addChars(e.chars),this.renderer.globalData.fontManager.addFonts(e.fonts,this.renderer.globalData.defs)),e.assets)for(a=e.assets.length,s=0;s<a;s+=1)this.animationData.assets.push(e.assets[s]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(e){this.animationData=e;var i=getExpressionsPlugin();i&&i.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var e=this.animationData.segments;if(!e||e.length===0||!this.autoloadSegments){this.trigger("data_ready"),this.timeCompleted=this.totalFrames;return}var i=e.shift();this.timeCompleted=i.time*this.frameRate;var s=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(s,this.includeLayers.bind(this),(function(){this.trigger("data_failed")}).bind(this))},AnimationItem.prototype.loadSegments=function(){var e=this.animationData.segments;e||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(e){if(this.renderer)try{this.animationData=e,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(e),e.assets||(e.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(e.assets),this.markers=markerParser(e.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(i){this.triggerConfigError(i)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||this.renderer.rendererType!=="canvas")&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var e=getExpressionsPlugin();e&&e.initExpressions(this),this.renderer.initItems(),setTimeout((function(){this.trigger("DOMLoaded")}).bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(e,i){var s=typeof e=="number"?e:void 0,a=typeof i=="number"?i:void 0;this.renderer.updateContainerSize(s,a)},AnimationItem.prototype.setSubframe=function(e){this.isSubframeEnabled=!!e},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!(this.isLoaded===!1||!this.renderer))try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(e){this.triggerRenderFrameError(e)}},AnimationItem.prototype.play=function(e){e&&this.name!==e||this.isPaused===!0&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(e){e&&this.name!==e||this.isPaused===!1&&(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(e){e&&this.name!==e||(this.isPaused===!0?this.play():this.pause())},AnimationItem.prototype.stop=function(e){e&&this.name!==e||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(e){for(var i,s=0;s<this.markers.length;s+=1)if(i=this.markers[s],i.payload&&i.payload.name===e)return i;return null},AnimationItem.prototype.goToAndStop=function(e,i,s){if(!(s&&this.name!==s)){var a=Number(e);if(isNaN(a)){var o=this.getMarkerData(e);o&&this.goToAndStop(o.time,!0)}else i?this.setCurrentRawFrameValue(e):this.setCurrentRawFrameValue(e*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(e,i,s){if(!(s&&this.name!==s)){var a=Number(e);if(isNaN(a)){var o=this.getMarkerData(e);o&&(o.duration?this.playSegments([o.time,o.time+o.duration],!0):this.goToAndStop(o.time,!0))}else this.goToAndStop(a,i,s);this.play()}},AnimationItem.prototype.advanceTime=function(e){if(!(this.isPaused===!0||this.isLoaded===!1)){var i=this.currentRawFrame+e*this.frameModifier,s=!1;i>=this.totalFrames-1&&this.frameModifier>0?!this.loop||this.playCount===this.loop?this.checkSegments(i>this.totalFrames?i%this.totalFrames:0)||(s=!0,i=this.totalFrames-1):i>=this.totalFrames?(this.playCount+=1,this.checkSegments(i%this.totalFrames)||(this.setCurrentRawFrameValue(i%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(i):i<0?this.checkSegments(i%this.totalFrames)||(this.loop&&!(this.playCount--<=0&&this.loop!==!0)?(this.setCurrentRawFrameValue(this.totalFrames+i%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0):(s=!0,i=0)):this.setCurrentRawFrameValue(i),s&&(this.setCurrentRawFrameValue(i),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(e,i){this.playCount=0,e[1]<e[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=e[0]-e[1],this.timeCompleted=this.totalFrames,this.firstFrame=e[1],this.setCurrentRawFrameValue(this.totalFrames-.001-i)):e[1]>e[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=e[1]-e[0],this.timeCompleted=this.totalFrames,this.firstFrame=e[0],this.setCurrentRawFrameValue(.001+i)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(e,i){var s=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<e?s=e:this.currentRawFrame+this.firstFrame>i&&(s=i-e)),this.firstFrame=e,this.totalFrames=i-e,this.timeCompleted=this.totalFrames,s!==-1&&this.goToAndStop(s,!0)},AnimationItem.prototype.playSegments=function(e,i){if(i&&(this.segments.length=0),_typeof$4(e[0])==="object"){var s,a=e.length;for(s=0;s<a;s+=1)this.segments.push(e[s])}else this.segments.push(e);this.segments.length&&i&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(e){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),e&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(e){return this.segments.length?(this.adjustSegment(this.segments.shift(),e),!0):!1},AnimationItem.prototype.destroy=function(e){e&&this.name!==e||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(e){this.currentRawFrame=e,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(e){this.playSpeed=e,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(e){this.playDirection=e<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(e){this.loop=e},AnimationItem.prototype.setVolume=function(e,i){i&&this.name!==i||this.audioController.setVolume(e)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(e){e&&this.name!==e||this.audioController.mute()},AnimationItem.prototype.unmute=function(e){e&&this.name!==e||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(e){var i="";if(e.e)i=e.p;else if(this.assetsPath){var s=e.p;s.indexOf("images/")!==-1&&(s=s.split("/")[1]),i=this.assetsPath+s}else i=this.path,i+=e.u?e.u:"",i+=e.p;return i},AnimationItem.prototype.getAssetData=function(e){for(var i=0,s=this.assets.length;i<s;){if(e===this.assets[i].id)return this.assets[i];i+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(e){return e?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(e,i,s){try{var a=this.renderer.getElementByPath(e);a.updateDocumentData(i,s)}catch{}},AnimationItem.prototype.trigger=function(e){if(this._cbs&&this._cbs[e])switch(e){case"enterFrame":this.triggerEvent(e,new BMEnterFrameEvent(e,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(e,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(e,new BMCompleteLoopEvent(e,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(e,new BMCompleteEvent(e,this.frameMult));break;case"segmentStart":this.triggerEvent(e,new BMSegmentStartEvent(e,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(e,new BMDestroyEvent(e,this));break;default:this.triggerEvent(e)}e==="enterFrame"&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(e,this.currentFrame,this.totalFrames,this.frameMult)),e==="loopComplete"&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(e,this.loop,this.playCount,this.frameMult)),e==="complete"&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(e,this.frameMult)),e==="segmentStart"&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(e,this.firstFrame,this.totalFrames)),e==="destroy"&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(e,this))},AnimationItem.prototype.triggerRenderFrameError=function(e){var i=new BMRenderFrameErrorEvent(e,this.currentFrame);this.triggerEvent("error",i),this.onError&&this.onError.call(this,i)},AnimationItem.prototype.triggerConfigError=function(e){var i=new BMConfigErrorEvent(e,this.currentFrame);this.triggerEvent("error",i),this.onError&&this.onError.call(this,i)};var animationManager=function(){var e={},i=[],s=0,a=0,o=0,c=!0,d=!1;function g(us){for(var hn=0,Ft=us.target;hn<a;)i[hn].animation===Ft&&(i.splice(hn,1),hn-=1,a-=1,Ft.isPaused||$()),hn+=1}function b(us,hn){if(!us)return null;for(var Ft=0;Ft<a;){if(i[Ft].elem===us&&i[Ft].elem!==null)return i[Ft].animation;Ft+=1}var Gr=new AnimationItem;return rt(Gr,us),Gr.setData(us,hn),Gr}function j(){var us,hn=i.length,Ft=[];for(us=0;us<hn;us+=1)Ft.push(i[us].animation);return Ft}function _e(){o+=1,Ht()}function $(){o-=1}function rt(us,hn){us.addEventListener("destroy",g),us.addEventListener("_active",_e),us.addEventListener("_idle",$),i.push({elem:hn,animation:us}),a+=1}function st(us){var hn=new AnimationItem;return rt(hn,null),hn.setParams(us),hn}function ut(us,hn){var Ft;for(Ft=0;Ft<a;Ft+=1)i[Ft].animation.setSpeed(us,hn)}function gt(us,hn){var Ft;for(Ft=0;Ft<a;Ft+=1)i[Ft].animation.setDirection(us,hn)}function wt(us){var hn;for(hn=0;hn<a;hn+=1)i[hn].animation.play(us)}function yt(us){var hn=us-s,Ft;for(Ft=0;Ft<a;Ft+=1)i[Ft].animation.advanceTime(hn);s=us,o&&!d?window.requestAnimationFrame(yt):c=!0}function At(us){s=us,window.requestAnimationFrame(yt)}function Ct(us){var hn;for(hn=0;hn<a;hn+=1)i[hn].animation.pause(us)}function Tt(us,hn,Ft){var Gr;for(Gr=0;Gr<a;Gr+=1)i[Gr].animation.goToAndStop(us,hn,Ft)}function kt(us){var hn;for(hn=0;hn<a;hn+=1)i[hn].animation.stop(us)}function Pt(us){var hn;for(hn=0;hn<a;hn+=1)i[hn].animation.togglePause(us)}function It(us){var hn;for(hn=a-1;hn>=0;hn-=1)i[hn].animation.destroy(us)}function Lt(us,hn,Ft){var Gr=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),gn,un=Gr.length;for(gn=0;gn<un;gn+=1)Ft&&Gr[gn].setAttribute("data-bm-type",Ft),b(Gr[gn],us);if(hn&&un===0){Ft||(Ft="svg");var Zn=document.getElementsByTagName("body")[0];Zn.innerText="";var xu=createTag("div");xu.style.width="100%",xu.style.height="100%",xu.setAttribute("data-bm-type",Ft),Zn.appendChild(xu),b(xu,us)}}function Nt(){var us;for(us=0;us<a;us+=1)i[us].animation.resize()}function Ht(){!d&&o&&c&&(window.requestAnimationFrame(At),c=!1)}function dr(){d=!0}function hs(){d=!1,Ht()}function _s(us,hn){var Ft;for(Ft=0;Ft<a;Ft+=1)i[Ft].animation.setVolume(us,hn)}function ds(us){var hn;for(hn=0;hn<a;hn+=1)i[hn].animation.mute(us)}function Nn(us){var hn;for(hn=0;hn<a;hn+=1)i[hn].animation.unmute(us)}return e.registerAnimation=b,e.loadAnimation=st,e.setSpeed=ut,e.setDirection=gt,e.play=wt,e.pause=Ct,e.stop=kt,e.togglePause=Pt,e.searchAnimations=Lt,e.resize=Nt,e.goToAndStop=Tt,e.destroy=It,e.freeze=dr,e.unfreeze=hs,e.setVolume=_s,e.mute=ds,e.unmute=Nn,e.getRegisteredAnimations=j,e}(),BezierFactory=function(){var e={};e.getBezierEasing=s;var i={};function s(At,Ct,Tt,kt,Pt){var It=Pt||("bez_"+At+"_"+Ct+"_"+Tt+"_"+kt).replace(/\./g,"p");if(i[It])return i[It];var Lt=new yt([At,Ct,Tt,kt]);return i[It]=Lt,Lt}var a=4,o=.001,c=1e-7,d=10,g=11,b=1/(g-1),j=typeof Float32Array=="function";function _e(At,Ct){return 1-3*Ct+3*At}function $(At,Ct){return 3*Ct-6*At}function rt(At){return 3*At}function st(At,Ct,Tt){return((_e(Ct,Tt)*At+$(Ct,Tt))*At+rt(Ct))*At}function ut(At,Ct,Tt){return 3*_e(Ct,Tt)*At*At+2*$(Ct,Tt)*At+rt(Ct)}function gt(At,Ct,Tt,kt,Pt){var It,Lt,Nt=0;do Lt=Ct+(Tt-Ct)/2,It=st(Lt,kt,Pt)-At,It>0?Tt=Lt:Ct=Lt;while(Math.abs(It)>c&&++Nt<d);return Lt}function wt(At,Ct,Tt,kt){for(var Pt=0;Pt<a;++Pt){var It=ut(Ct,Tt,kt);if(It===0)return Ct;var Lt=st(Ct,Tt,kt)-At;Ct-=Lt/It}return Ct}function yt(At){this._p=At,this._mSampleValues=j?new Float32Array(g):new Array(g),this._precomputed=!1,this.get=this.get.bind(this)}return yt.prototype={get:function(Ct){var Tt=this._p[0],kt=this._p[1],Pt=this._p[2],It=this._p[3];return this._precomputed||this._precompute(),Tt===kt&&Pt===It?Ct:Ct===0?0:Ct===1?1:st(this._getTForX(Ct),kt,It)},_precompute:function(){var Ct=this._p[0],Tt=this._p[1],kt=this._p[2],Pt=this._p[3];this._precomputed=!0,(Ct!==Tt||kt!==Pt)&&this._calcSampleValues()},_calcSampleValues:function(){for(var Ct=this._p[0],Tt=this._p[2],kt=0;kt<g;++kt)this._mSampleValues[kt]=st(kt*b,Ct,Tt)},_getTForX:function(Ct){for(var Tt=this._p[0],kt=this._p[2],Pt=this._mSampleValues,It=0,Lt=1,Nt=g-1;Lt!==Nt&&Pt[Lt]<=Ct;++Lt)It+=b;--Lt;var Ht=(Ct-Pt[Lt])/(Pt[Lt+1]-Pt[Lt]),dr=It+Ht*b,hs=ut(dr,Tt,kt);return hs>=o?wt(Ct,dr,Tt,kt):hs===0?dr:gt(Ct,It,It+b,Tt,kt)}},e}(),pooling=function(){function e(i){return i.concat(createSizedArray(i.length))}return{double:e}}(),poolFactory=function(){return function(e,i,s){var a=0,o=e,c=createSizedArray(o),d={newElement:g,release:b};function g(){var j;return a?(a-=1,j=c[a]):j=i(),j}function b(j){a===o&&(c=pooling.double(c),o*=2),s&&s(j),c[a]=j,a+=1}return d}}(),bezierLengthPool=function(){function e(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}return poolFactory(8,e)}(),segmentsLengthPool=function(){function e(){return{lengths:[],totalLength:0}}function i(s){var a,o=s.lengths.length;for(a=0;a<o;a+=1)bezierLengthPool.release(s.lengths[a]);s.lengths.length=0}return poolFactory(8,e,i)}();function bezFunction(){var e=Math;function i(rt,st,ut,gt,wt,yt){var At=rt*gt+st*wt+ut*yt-wt*gt-yt*rt-ut*st;return At>-.001&&At<.001}function s(rt,st,ut,gt,wt,yt,At,Ct,Tt){if(ut===0&&yt===0&&Tt===0)return i(rt,st,gt,wt,At,Ct);var kt=e.sqrt(e.pow(gt-rt,2)+e.pow(wt-st,2)+e.pow(yt-ut,2)),Pt=e.sqrt(e.pow(At-rt,2)+e.pow(Ct-st,2)+e.pow(Tt-ut,2)),It=e.sqrt(e.pow(At-gt,2)+e.pow(Ct-wt,2)+e.pow(Tt-yt,2)),Lt;return kt>Pt?kt>It?Lt=kt-Pt-It:Lt=It-Pt-kt:It>Pt?Lt=It-Pt-kt:Lt=Pt-kt-It,Lt>-1e-4&&Lt<1e-4}var a=function(){return function(rt,st,ut,gt){var wt=getDefaultCurveSegments(),yt,At,Ct,Tt,kt,Pt=0,It,Lt=[],Nt=[],Ht=bezierLengthPool.newElement();for(Ct=ut.length,yt=0;yt<wt;yt+=1){for(kt=yt/(wt-1),It=0,At=0;At<Ct;At+=1)Tt=bmPow(1-kt,3)*rt[At]+3*bmPow(1-kt,2)*kt*ut[At]+3*(1-kt)*bmPow(kt,2)*gt[At]+bmPow(kt,3)*st[At],Lt[At]=Tt,Nt[At]!==null&&(It+=bmPow(Lt[At]-Nt[At],2)),Nt[At]=Lt[At];It&&(It=bmSqrt(It),Pt+=It),Ht.percents[yt]=kt,Ht.lengths[yt]=Pt}return Ht.addedLength=Pt,Ht}}();function o(rt){var st=segmentsLengthPool.newElement(),ut=rt.c,gt=rt.v,wt=rt.o,yt=rt.i,At,Ct=rt._length,Tt=st.lengths,kt=0;for(At=0;At<Ct-1;At+=1)Tt[At]=a(gt[At],gt[At+1],wt[At],yt[At+1]),kt+=Tt[At].addedLength;return ut&&Ct&&(Tt[At]=a(gt[At],gt[0],wt[At],yt[0]),kt+=Tt[At].addedLength),st.totalLength=kt,st}function c(rt){this.segmentLength=0,this.points=new Array(rt)}function d(rt,st){this.partialLength=rt,this.point=st}var g=function(){var rt={};return function(st,ut,gt,wt){var yt=(st[0]+"_"+st[1]+"_"+ut[0]+"_"+ut[1]+"_"+gt[0]+"_"+gt[1]+"_"+wt[0]+"_"+wt[1]).replace(/\./g,"p");if(!rt[yt]){var At=getDefaultCurveSegments(),Ct,Tt,kt,Pt,It,Lt=0,Nt,Ht,dr=null;st.length===2&&(st[0]!==ut[0]||st[1]!==ut[1])&&i(st[0],st[1],ut[0],ut[1],st[0]+gt[0],st[1]+gt[1])&&i(st[0],st[1],ut[0],ut[1],ut[0]+wt[0],ut[1]+wt[1])&&(At=2);var hs=new c(At);for(kt=gt.length,Ct=0;Ct<At;Ct+=1){for(Ht=createSizedArray(kt),It=Ct/(At-1),Nt=0,Tt=0;Tt<kt;Tt+=1)Pt=bmPow(1-It,3)*st[Tt]+3*bmPow(1-It,2)*It*(st[Tt]+gt[Tt])+3*(1-It)*bmPow(It,2)*(ut[Tt]+wt[Tt])+bmPow(It,3)*ut[Tt],Ht[Tt]=Pt,dr!==null&&(Nt+=bmPow(Ht[Tt]-dr[Tt],2));Nt=bmSqrt(Nt),Lt+=Nt,hs.points[Ct]=new d(Nt,Ht),dr=Ht}hs.segmentLength=Lt,rt[yt]=hs}return rt[yt]}}();function b(rt,st){var ut=st.percents,gt=st.lengths,wt=ut.length,yt=bmFloor((wt-1)*rt),At=rt*st.addedLength,Ct=0;if(yt===wt-1||yt===0||At===gt[yt])return ut[yt];for(var Tt=gt[yt]>At?-1:1,kt=!0;kt;)if(gt[yt]<=At&&gt[yt+1]>At?(Ct=(At-gt[yt])/(gt[yt+1]-gt[yt]),kt=!1):yt+=Tt,yt<0||yt>=wt-1){if(yt===wt-1)return ut[yt];kt=!1}return ut[yt]+(ut[yt+1]-ut[yt])*Ct}function j(rt,st,ut,gt,wt,yt){var At=b(wt,yt),Ct=1-At,Tt=e.round((Ct*Ct*Ct*rt[0]+(At*Ct*Ct+Ct*At*Ct+Ct*Ct*At)*ut[0]+(At*At*Ct+Ct*At*At+At*Ct*At)*gt[0]+At*At*At*st[0])*1e3)/1e3,kt=e.round((Ct*Ct*Ct*rt[1]+(At*Ct*Ct+Ct*At*Ct+Ct*Ct*At)*ut[1]+(At*At*Ct+Ct*At*At+At*Ct*At)*gt[1]+At*At*At*st[1])*1e3)/1e3;return[Tt,kt]}var _e=createTypedArray("float32",8);function $(rt,st,ut,gt,wt,yt,At){wt<0?wt=0:wt>1&&(wt=1);var Ct=b(wt,At);yt=yt>1?1:yt;var Tt=b(yt,At),kt,Pt=rt.length,It=1-Ct,Lt=1-Tt,Nt=It*It*It,Ht=Ct*It*It*3,dr=Ct*Ct*It*3,hs=Ct*Ct*Ct,_s=It*It*Lt,ds=Ct*It*Lt+It*Ct*Lt+It*It*Tt,Nn=Ct*Ct*Lt+It*Ct*Tt+Ct*It*Tt,us=Ct*Ct*Tt,hn=It*Lt*Lt,Ft=Ct*Lt*Lt+It*Tt*Lt+It*Lt*Tt,Gr=Ct*Tt*Lt+It*Tt*Tt+Ct*Lt*Tt,gn=Ct*Tt*Tt,un=Lt*Lt*Lt,Zn=Tt*Lt*Lt+Lt*Tt*Lt+Lt*Lt*Tt,xu=Tt*Tt*Lt+Lt*Tt*Tt+Tt*Lt*Tt,ou=Tt*Tt*Tt;for(kt=0;kt<Pt;kt+=1)_e[kt*4]=e.round((Nt*rt[kt]+Ht*ut[kt]+dr*gt[kt]+hs*st[kt])*1e3)/1e3,_e[kt*4+1]=e.round((_s*rt[kt]+ds*ut[kt]+Nn*gt[kt]+us*st[kt])*1e3)/1e3,_e[kt*4+2]=e.round((hn*rt[kt]+Ft*ut[kt]+Gr*gt[kt]+gn*st[kt])*1e3)/1e3,_e[kt*4+3]=e.round((un*rt[kt]+Zn*ut[kt]+xu*gt[kt]+ou*st[kt])*1e3)/1e3;return _e}return{getSegmentsLength:o,getNewSegment:$,getPointInSegment:j,buildBezierData:g,pointOnLine2D:i,pointOnLine3D:s}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(e,i){var s=this.offsetTime,a;this.propType==="multidimensional"&&(a=createTypedArray("float32",this.pv.length));for(var o=i.lastIndex,c=o,d=this.keyframes.length-1,g=!0,b,j,_e;g;){if(b=this.keyframes[c],j=this.keyframes[c+1],c===d-1&&e>=j.t-s){b.h&&(b=j),o=0;break}if(j.t-s>e){o=c;break}c<d-1?c+=1:(o=0,g=!1)}_e=this.keyframesMetadata[c]||{};var $,rt,st,ut,gt,wt,yt=j.t-s,At=b.t-s,Ct;if(b.to){_e.bezierData||(_e.bezierData=bez.buildBezierData(b.s,j.s||b.e,b.to,b.ti));var Tt=_e.bezierData;if(e>=yt||e<At){var kt=e>=yt?Tt.points.length-1:0;for(rt=Tt.points[kt].point.length,$=0;$<rt;$+=1)a[$]=Tt.points[kt].point[$]}else{_e.__fnct?wt=_e.__fnct:(wt=BezierFactory.getBezierEasing(b.o.x,b.o.y,b.i.x,b.i.y,b.n).get,_e.__fnct=wt),st=wt((e-At)/(yt-At));var Pt=Tt.segmentLength*st,It,Lt=i.lastFrame<e&&i._lastKeyframeIndex===c?i._lastAddedLength:0;for(gt=i.lastFrame<e&&i._lastKeyframeIndex===c?i._lastPoint:0,g=!0,ut=Tt.points.length;g;){if(Lt+=Tt.points[gt].partialLength,Pt===0||st===0||gt===Tt.points.length-1){for(rt=Tt.points[gt].point.length,$=0;$<rt;$+=1)a[$]=Tt.points[gt].point[$];break}else if(Pt>=Lt&&Pt<Lt+Tt.points[gt+1].partialLength){for(It=(Pt-Lt)/Tt.points[gt+1].partialLength,rt=Tt.points[gt].point.length,$=0;$<rt;$+=1)a[$]=Tt.points[gt].point[$]+(Tt.points[gt+1].point[$]-Tt.points[gt].point[$])*It;break}gt<ut-1?gt+=1:g=!1}i._lastPoint=gt,i._lastAddedLength=Lt-Tt.points[gt].partialLength,i._lastKeyframeIndex=c}}else{var Nt,Ht,dr,hs,_s;if(d=b.s.length,Ct=j.s||b.e,this.sh&&b.h!==1)if(e>=yt)a[0]=Ct[0],a[1]=Ct[1],a[2]=Ct[2];else if(e<=At)a[0]=b.s[0],a[1]=b.s[1],a[2]=b.s[2];else{var ds=createQuaternion(b.s),Nn=createQuaternion(Ct),us=(e-At)/(yt-At);quaternionToEuler(a,slerp(ds,Nn,us))}else for(c=0;c<d;c+=1)b.h!==1&&(e>=yt?st=1:e<At?st=0:(b.o.x.constructor===Array?(_e.__fnct||(_e.__fnct=[]),_e.__fnct[c]?wt=_e.__fnct[c]:(Nt=b.o.x[c]===void 0?b.o.x[0]:b.o.x[c],Ht=b.o.y[c]===void 0?b.o.y[0]:b.o.y[c],dr=b.i.x[c]===void 0?b.i.x[0]:b.i.x[c],hs=b.i.y[c]===void 0?b.i.y[0]:b.i.y[c],wt=BezierFactory.getBezierEasing(Nt,Ht,dr,hs).get,_e.__fnct[c]=wt)):_e.__fnct?wt=_e.__fnct:(Nt=b.o.x,Ht=b.o.y,dr=b.i.x,hs=b.i.y,wt=BezierFactory.getBezierEasing(Nt,Ht,dr,hs).get,b.keyframeMetadata=wt),st=wt((e-At)/(yt-At)))),Ct=j.s||b.e,_s=b.h===1?b.s[c]:b.s[c]+(Ct[c]-b.s[c])*st,this.propType==="multidimensional"?a[c]=_s:a=_s}return i.lastIndex=o,a}function slerp(e,i,s){var a=[],o=e[0],c=e[1],d=e[2],g=e[3],b=i[0],j=i[1],_e=i[2],$=i[3],rt,st,ut,gt,wt;return st=o*b+c*j+d*_e+g*$,st<0&&(st=-st,b=-b,j=-j,_e=-_e,$=-$),1-st>1e-6?(rt=Math.acos(st),ut=Math.sin(rt),gt=Math.sin((1-s)*rt)/ut,wt=Math.sin(s*rt)/ut):(gt=1-s,wt=s),a[0]=gt*o+wt*b,a[1]=gt*c+wt*j,a[2]=gt*d+wt*_e,a[3]=gt*g+wt*$,a}function quaternionToEuler(e,i){var s=i[0],a=i[1],o=i[2],c=i[3],d=Math.atan2(2*a*c-2*s*o,1-2*a*a-2*o*o),g=Math.asin(2*s*a+2*o*c),b=Math.atan2(2*s*c-2*a*o,1-2*s*s-2*o*o);e[0]=d/degToRads,e[1]=g/degToRads,e[2]=b/degToRads}function createQuaternion(e){var i=e[0]*degToRads,s=e[1]*degToRads,a=e[2]*degToRads,o=Math.cos(i/2),c=Math.cos(s/2),d=Math.cos(a/2),g=Math.sin(i/2),b=Math.sin(s/2),j=Math.sin(a/2),_e=o*c*d-g*b*j,$=g*b*d+o*c*j,rt=g*c*d+o*b*j,st=o*b*d-g*c*j;return[$,rt,st,_e]}function getValueAtCurrentTime(){var e=this.comp.renderedFrame-this.offsetTime,i=this.keyframes[0].t-this.offsetTime,s=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(e===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=s&&e>=s||this._caching.lastFrame<i&&e<i))){this._caching.lastFrame>=e&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var a=this.interpolateValue(e,this._caching);this.pv=a}return this._caching.lastFrame=e,this.pv}function setVValue(e){var i;if(this.propType==="unidimensional")i=e*this.mult,mathAbs(this.v-i)>1e-5&&(this.v=i,this._mdf=!0);else for(var s=0,a=this.v.length;s<a;)i=e[s]*this.mult,mathAbs(this.v[s]-i)>1e-5&&(this.v[s]=i,this._mdf=!0),s+=1}function processEffectsSequence(){if(!(this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)){if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=this._isFirstFrame;var e,i=this.effectsSequence.length,s=this.kf?this.pv:this.data.k;for(e=0;e<i;e+=1)s=this.effectsSequence[e](s);this.setVValue(s),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(e){this.effectsSequence.push(e),this.container.addDynamicProperty(this)}function ValueProperty(e,i,s,a){this.propType="unidimensional",this.mult=s||1,this.data=i,this.v=s?i.k*s:i.k,this.pv=i.k,this._mdf=!1,this.elem=e,this.container=a,this.comp=e.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(e,i,s,a){this.propType="multidimensional",this.mult=s||1,this.data=i,this._mdf=!1,this.elem=e,this.container=a,this.comp=e.comp,this.k=!1,this.kf=!1,this.frameId=-1;var o,c=i.k.length;for(this.v=createTypedArray("float32",c),this.pv=createTypedArray("float32",c),this.vel=createTypedArray("float32",c),o=0;o<c;o+=1)this.v[o]=i.k[o]*this.mult,this.pv[o]=i.k[o];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(e,i,s,a){this.propType="unidimensional",this.keyframes=i.k,this.keyframesMetadata=[],this.offsetTime=e.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=i,this.mult=s||1,this.elem=e,this.container=a,this.comp=e.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(e,i,s,a){this.propType="multidimensional";var o,c=i.k.length,d,g,b,j;for(o=0;o<c-1;o+=1)i.k[o].to&&i.k[o].s&&i.k[o+1]&&i.k[o+1].s&&(d=i.k[o].s,g=i.k[o+1].s,b=i.k[o].to,j=i.k[o].ti,(d.length===2&&!(d[0]===g[0]&&d[1]===g[1])&&bez.pointOnLine2D(d[0],d[1],g[0],g[1],d[0]+b[0],d[1]+b[1])&&bez.pointOnLine2D(d[0],d[1],g[0],g[1],g[0]+j[0],g[1]+j[1])||d.length===3&&!(d[0]===g[0]&&d[1]===g[1]&&d[2]===g[2])&&bez.pointOnLine3D(d[0],d[1],d[2],g[0],g[1],g[2],d[0]+b[0],d[1]+b[1],d[2]+b[2])&&bez.pointOnLine3D(d[0],d[1],d[2],g[0],g[1],g[2],g[0]+j[0],g[1]+j[1],g[2]+j[2]))&&(i.k[o].to=null,i.k[o].ti=null),d[0]===g[0]&&d[1]===g[1]&&b[0]===0&&b[1]===0&&j[0]===0&&j[1]===0&&(d.length===2||d[2]===g[2]&&b[2]===0&&j[2]===0)&&(i.k[o].to=null,i.k[o].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=i,this.keyframes=i.k,this.keyframesMetadata=[],this.offsetTime=e.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=s||1,this.elem=e,this.container=a,this.comp=e.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var _e=i.k[0].s.length;for(this.v=createTypedArray("float32",_e),this.pv=createTypedArray("float32",_e),o=0;o<_e;o+=1)this.v[o]=initFrame,this.pv[o]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",_e)},this.addEffect=addEffect}var PropertyFactory=function(){function e(s,a,o,c,d){a.sid&&(a=s.globalData.slotManager.getProp(a));var g;if(!a.k.length)g=new ValueProperty(s,a,c,d);else if(typeof a.k[0]=="number")g=new MultiDimensionalProperty(s,a,c,d);else switch(o){case 0:g=new KeyframedValueProperty(s,a,c,d);break;case 1:g=new KeyframedMultidimensionalProperty(s,a,c,d);break}return g.effectsSequence.length&&d.addDynamicProperty(g),g}var i={getProp:e};return i}();function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(i){this.dynamicProperties.indexOf(i)===-1&&(this.dynamicProperties.push(i),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;var i,s=this.dynamicProperties.length;for(i=0;i<s;i+=1)this.dynamicProperties[i].getValue(),this.dynamicProperties[i]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(i){this.container=i,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=function(){function e(){return createTypedArray("float32",2)}return poolFactory(8,e)}();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(e,i){this.c=e,this.setLength(i);for(var s=0;s<i;)this.v[s]=pointPool.newElement(),this.o[s]=pointPool.newElement(),this.i[s]=pointPool.newElement(),s+=1},ShapePath.prototype.setLength=function(e){for(;this._maxLength<e;)this.doubleArrayLength();this._length=e},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(e,i,s,a,o){var c;switch(this._length=Math.max(this._length,a+1),this._length>=this._maxLength&&this.doubleArrayLength(),s){case"v":c=this.v;break;case"i":c=this.i;break;case"o":c=this.o;break;default:c=[];break}(!c[a]||c[a]&&!o)&&(c[a]=pointPool.newElement()),c[a][0]=e,c[a][1]=i},ShapePath.prototype.setTripleAt=function(e,i,s,a,o,c,d,g){this.setXYAt(e,i,"v",d,g),this.setXYAt(s,a,"o",d,g),this.setXYAt(o,c,"i",d,g)},ShapePath.prototype.reverse=function(){var e=new ShapePath;e.setPathData(this.c,this._length);var i=this.v,s=this.o,a=this.i,o=0;this.c&&(e.setTripleAt(i[0][0],i[0][1],a[0][0],a[0][1],s[0][0],s[0][1],0,!1),o=1);var c=this._length-1,d=this._length,g;for(g=o;g<d;g+=1)e.setTripleAt(i[c][0],i[c][1],a[c][0],a[c][1],s[c][0],s[c][1],g,!1),c-=1;return e},ShapePath.prototype.length=function(){return this._length};var shapePool=function(){function e(){return new ShapePath}function i(o){var c=o._length,d;for(d=0;d<c;d+=1)pointPool.release(o.v[d]),pointPool.release(o.i[d]),pointPool.release(o.o[d]),o.v[d]=null,o.i[d]=null,o.o[d]=null;o._length=0,o.c=!1}function s(o){var c=a.newElement(),d,g=o._length===void 0?o.v.length:o._length;for(c.setLength(g),c.c=o.c,d=0;d<g;d+=1)c.setTripleAt(o.v[d][0],o.v[d][1],o.o[d][0],o.o[d][1],o.i[d][0],o.i[d][1],d);return c}var a=poolFactory(4,e,i);return a.clone=s,a}();function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(e){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=e,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var e;for(e=0;e<this._length;e+=1)shapePool.release(this.shapes[e]);this._length=0};var shapeCollectionPool=function(){var e={newShapeCollection:o,release:c},i=0,s=4,a=createSizedArray(s);function o(){var d;return i?(i-=1,d=a[i]):d=new ShapeCollection,d}function c(d){var g,b=d._length;for(g=0;g<b;g+=1)shapePool.release(d.shapes[g]);d._length=0,i===s&&(a=pooling.double(a),s*=2),a[i]=d,i+=1}return e}(),ShapePropertyFactory=function(){var e=-999999;function i(yt,At,Ct){var Tt=Ct.lastIndex,kt,Pt,It,Lt,Nt,Ht,dr,hs,_s,ds=this.keyframes;if(yt<ds[0].t-this.offsetTime)kt=ds[0].s[0],It=!0,Tt=0;else if(yt>=ds[ds.length-1].t-this.offsetTime)kt=ds[ds.length-1].s?ds[ds.length-1].s[0]:ds[ds.length-2].e[0],It=!0;else{for(var Nn=Tt,us=ds.length-1,hn=!0,Ft,Gr,gn;hn&&(Ft=ds[Nn],Gr=ds[Nn+1],!(Gr.t-this.offsetTime>yt));)Nn<us-1?Nn+=1:hn=!1;if(gn=this.keyframesMetadata[Nn]||{},It=Ft.h===1,Tt=Nn,!It){if(yt>=Gr.t-this.offsetTime)hs=1;else if(yt<Ft.t-this.offsetTime)hs=0;else{var un;gn.__fnct?un=gn.__fnct:(un=BezierFactory.getBezierEasing(Ft.o.x,Ft.o.y,Ft.i.x,Ft.i.y).get,gn.__fnct=un),hs=un((yt-(Ft.t-this.offsetTime))/(Gr.t-this.offsetTime-(Ft.t-this.offsetTime)))}Pt=Gr.s?Gr.s[0]:Ft.e[0]}kt=Ft.s[0]}for(Ht=At._length,dr=kt.i[0].length,Ct.lastIndex=Tt,Lt=0;Lt<Ht;Lt+=1)for(Nt=0;Nt<dr;Nt+=1)_s=It?kt.i[Lt][Nt]:kt.i[Lt][Nt]+(Pt.i[Lt][Nt]-kt.i[Lt][Nt])*hs,At.i[Lt][Nt]=_s,_s=It?kt.o[Lt][Nt]:kt.o[Lt][Nt]+(Pt.o[Lt][Nt]-kt.o[Lt][Nt])*hs,At.o[Lt][Nt]=_s,_s=It?kt.v[Lt][Nt]:kt.v[Lt][Nt]+(Pt.v[Lt][Nt]-kt.v[Lt][Nt])*hs,At.v[Lt][Nt]=_s}function s(){var yt=this.comp.renderedFrame-this.offsetTime,At=this.keyframes[0].t-this.offsetTime,Ct=this.keyframes[this.keyframes.length-1].t-this.offsetTime,Tt=this._caching.lastFrame;return Tt!==e&&(Tt<At&&yt<At||Tt>Ct&&yt>Ct)||(this._caching.lastIndex=Tt<yt?this._caching.lastIndex:0,this.interpolateShape(yt,this.pv,this._caching)),this._caching.lastFrame=yt,this.pv}function a(){this.paths=this.localShapeCollection}function o(yt,At){if(yt._length!==At._length||yt.c!==At.c)return!1;var Ct,Tt=yt._length;for(Ct=0;Ct<Tt;Ct+=1)if(yt.v[Ct][0]!==At.v[Ct][0]||yt.v[Ct][1]!==At.v[Ct][1]||yt.o[Ct][0]!==At.o[Ct][0]||yt.o[Ct][1]!==At.o[Ct][1]||yt.i[Ct][0]!==At.i[Ct][0]||yt.i[Ct][1]!==At.i[Ct][1])return!1;return!0}function c(yt){o(this.v,yt)||(this.v=shapePool.clone(yt),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function d(){if(this.elem.globalData.frameId!==this.frameId){if(!this.effectsSequence.length){this._mdf=!1;return}if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=!1;var yt;this.kf?yt=this.pv:this.data.ks?yt=this.data.ks.k:yt=this.data.pt.k;var At,Ct=this.effectsSequence.length;for(At=0;At<Ct;At+=1)yt=this.effectsSequence[At](yt);this.setVValue(yt),this.lock=!1,this.frameId=this.elem.globalData.frameId}}function g(yt,At,Ct){this.propType="shape",this.comp=yt.comp,this.container=yt,this.elem=yt,this.data=At,this.k=!1,this.kf=!1,this._mdf=!1;var Tt=Ct===3?At.pt.k:At.ks.k;this.v=shapePool.clone(Tt),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=a,this.effectsSequence=[]}function b(yt){this.effectsSequence.push(yt),this.container.addDynamicProperty(this)}g.prototype.interpolateShape=i,g.prototype.getValue=d,g.prototype.setVValue=c,g.prototype.addEffect=b;function j(yt,At,Ct){this.propType="shape",this.comp=yt.comp,this.elem=yt,this.container=yt,this.offsetTime=yt.data.st,this.keyframes=Ct===3?At.pt.k:At.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var Tt=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,Tt),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=e,this.reset=a,this._caching={lastFrame:e,lastIndex:0},this.effectsSequence=[s.bind(this)]}j.prototype.getValue=d,j.prototype.interpolateShape=i,j.prototype.setVValue=c,j.prototype.addEffect=b;var _e=function(){var yt=roundCorner;function At(Ct,Tt){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=Tt.d,this.elem=Ct,this.comp=Ct.comp,this.frameId=-1,this.initDynamicPropertyContainer(Ct),this.p=PropertyFactory.getProp(Ct,Tt.p,1,0,this),this.s=PropertyFactory.getProp(Ct,Tt.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return At.prototype={reset:a,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var Tt=this.p.v[0],kt=this.p.v[1],Pt=this.s.v[0]/2,It=this.s.v[1]/2,Lt=this.d!==3,Nt=this.v;Nt.v[0][0]=Tt,Nt.v[0][1]=kt-It,Nt.v[1][0]=Lt?Tt+Pt:Tt-Pt,Nt.v[1][1]=kt,Nt.v[2][0]=Tt,Nt.v[2][1]=kt+It,Nt.v[3][0]=Lt?Tt-Pt:Tt+Pt,Nt.v[3][1]=kt,Nt.i[0][0]=Lt?Tt-Pt*yt:Tt+Pt*yt,Nt.i[0][1]=kt-It,Nt.i[1][0]=Lt?Tt+Pt:Tt-Pt,Nt.i[1][1]=kt-It*yt,Nt.i[2][0]=Lt?Tt+Pt*yt:Tt-Pt*yt,Nt.i[2][1]=kt+It,Nt.i[3][0]=Lt?Tt-Pt:Tt+Pt,Nt.i[3][1]=kt+It*yt,Nt.o[0][0]=Lt?Tt+Pt*yt:Tt-Pt*yt,Nt.o[0][1]=kt-It,Nt.o[1][0]=Lt?Tt+Pt:Tt-Pt,Nt.o[1][1]=kt+It*yt,Nt.o[2][0]=Lt?Tt-Pt*yt:Tt+Pt*yt,Nt.o[2][1]=kt+It,Nt.o[3][0]=Lt?Tt-Pt:Tt+Pt,Nt.o[3][1]=kt-It*yt}},extendPrototype([DynamicPropertyContainer],At),At}(),$=function(){function yt(At,Ct){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=At,this.comp=At.comp,this.data=Ct,this.frameId=-1,this.d=Ct.d,this.initDynamicPropertyContainer(At),Ct.sy===1?(this.ir=PropertyFactory.getProp(At,Ct.ir,0,0,this),this.is=PropertyFactory.getProp(At,Ct.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(At,Ct.pt,0,0,this),this.p=PropertyFactory.getProp(At,Ct.p,1,0,this),this.r=PropertyFactory.getProp(At,Ct.r,0,degToRads,this),this.or=PropertyFactory.getProp(At,Ct.or,0,0,this),this.os=PropertyFactory.getProp(At,Ct.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return yt.prototype={reset:a,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var Ct=Math.floor(this.pt.v)*2,Tt=Math.PI*2/Ct,kt=!0,Pt=this.or.v,It=this.ir.v,Lt=this.os.v,Nt=this.is.v,Ht=2*Math.PI*Pt/(Ct*2),dr=2*Math.PI*It/(Ct*2),hs,_s,ds,Nn,us=-Math.PI/2;us+=this.r.v;var hn=this.data.d===3?-1:1;for(this.v._length=0,hs=0;hs<Ct;hs+=1){_s=kt?Pt:It,ds=kt?Lt:Nt,Nn=kt?Ht:dr;var Ft=_s*Math.cos(us),Gr=_s*Math.sin(us),gn=Ft===0&&Gr===0?0:Gr/Math.sqrt(Ft*Ft+Gr*Gr),un=Ft===0&&Gr===0?0:-Ft/Math.sqrt(Ft*Ft+Gr*Gr);Ft+=+this.p.v[0],Gr+=+this.p.v[1],this.v.setTripleAt(Ft,Gr,Ft-gn*Nn*ds*hn,Gr-un*Nn*ds*hn,Ft+gn*Nn*ds*hn,Gr+un*Nn*ds*hn,hs,!0),kt=!kt,us+=Tt*hn}},convertPolygonToPath:function(){var Ct=Math.floor(this.pt.v),Tt=Math.PI*2/Ct,kt=this.or.v,Pt=this.os.v,It=2*Math.PI*kt/(Ct*4),Lt,Nt=-Math.PI*.5,Ht=this.data.d===3?-1:1;for(Nt+=this.r.v,this.v._length=0,Lt=0;Lt<Ct;Lt+=1){var dr=kt*Math.cos(Nt),hs=kt*Math.sin(Nt),_s=dr===0&&hs===0?0:hs/Math.sqrt(dr*dr+hs*hs),ds=dr===0&&hs===0?0:-dr/Math.sqrt(dr*dr+hs*hs);dr+=+this.p.v[0],hs+=+this.p.v[1],this.v.setTripleAt(dr,hs,dr-_s*It*Pt*Ht,hs-ds*It*Pt*Ht,dr+_s*It*Pt*Ht,hs+ds*It*Pt*Ht,Lt,!0),Nt+=Tt*Ht}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],yt),yt}(),rt=function(){function yt(At,Ct){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=At,this.comp=At.comp,this.frameId=-1,this.d=Ct.d,this.initDynamicPropertyContainer(At),this.p=PropertyFactory.getProp(At,Ct.p,1,0,this),this.s=PropertyFactory.getProp(At,Ct.s,1,0,this),this.r=PropertyFactory.getProp(At,Ct.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return yt.prototype={convertRectToPath:function(){var Ct=this.p.v[0],Tt=this.p.v[1],kt=this.s.v[0]/2,Pt=this.s.v[1]/2,It=bmMin(kt,Pt,this.r.v),Lt=It*(1-roundCorner);this.v._length=0,this.d===2||this.d===1?(this.v.setTripleAt(Ct+kt,Tt-Pt+It,Ct+kt,Tt-Pt+It,Ct+kt,Tt-Pt+Lt,0,!0),this.v.setTripleAt(Ct+kt,Tt+Pt-It,Ct+kt,Tt+Pt-Lt,Ct+kt,Tt+Pt-It,1,!0),It!==0?(this.v.setTripleAt(Ct+kt-It,Tt+Pt,Ct+kt-It,Tt+Pt,Ct+kt-Lt,Tt+Pt,2,!0),this.v.setTripleAt(Ct-kt+It,Tt+Pt,Ct-kt+Lt,Tt+Pt,Ct-kt+It,Tt+Pt,3,!0),this.v.setTripleAt(Ct-kt,Tt+Pt-It,Ct-kt,Tt+Pt-It,Ct-kt,Tt+Pt-Lt,4,!0),this.v.setTripleAt(Ct-kt,Tt-Pt+It,Ct-kt,Tt-Pt+Lt,Ct-kt,Tt-Pt+It,5,!0),this.v.setTripleAt(Ct-kt+It,Tt-Pt,Ct-kt+It,Tt-Pt,Ct-kt+Lt,Tt-Pt,6,!0),this.v.setTripleAt(Ct+kt-It,Tt-Pt,Ct+kt-Lt,Tt-Pt,Ct+kt-It,Tt-Pt,7,!0)):(this.v.setTripleAt(Ct-kt,Tt+Pt,Ct-kt+Lt,Tt+Pt,Ct-kt,Tt+Pt,2),this.v.setTripleAt(Ct-kt,Tt-Pt,Ct-kt,Tt-Pt+Lt,Ct-kt,Tt-Pt,3))):(this.v.setTripleAt(Ct+kt,Tt-Pt+It,Ct+kt,Tt-Pt+Lt,Ct+kt,Tt-Pt+It,0,!0),It!==0?(this.v.setTripleAt(Ct+kt-It,Tt-Pt,Ct+kt-It,Tt-Pt,Ct+kt-Lt,Tt-Pt,1,!0),this.v.setTripleAt(Ct-kt+It,Tt-Pt,Ct-kt+Lt,Tt-Pt,Ct-kt+It,Tt-Pt,2,!0),this.v.setTripleAt(Ct-kt,Tt-Pt+It,Ct-kt,Tt-Pt+It,Ct-kt,Tt-Pt+Lt,3,!0),this.v.setTripleAt(Ct-kt,Tt+Pt-It,Ct-kt,Tt+Pt-Lt,Ct-kt,Tt+Pt-It,4,!0),this.v.setTripleAt(Ct-kt+It,Tt+Pt,Ct-kt+It,Tt+Pt,Ct-kt+Lt,Tt+Pt,5,!0),this.v.setTripleAt(Ct+kt-It,Tt+Pt,Ct+kt-Lt,Tt+Pt,Ct+kt-It,Tt+Pt,6,!0),this.v.setTripleAt(Ct+kt,Tt+Pt-It,Ct+kt,Tt+Pt-It,Ct+kt,Tt+Pt-Lt,7,!0)):(this.v.setTripleAt(Ct-kt,Tt-Pt,Ct-kt+Lt,Tt-Pt,Ct-kt,Tt-Pt,1,!0),this.v.setTripleAt(Ct-kt,Tt+Pt,Ct-kt,Tt+Pt-Lt,Ct-kt,Tt+Pt,2,!0),this.v.setTripleAt(Ct+kt,Tt+Pt,Ct+kt-Lt,Tt+Pt,Ct+kt,Tt+Pt,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:a},extendPrototype([DynamicPropertyContainer],yt),yt}();function st(yt,At,Ct){var Tt;if(Ct===3||Ct===4){var kt=Ct===3?At.pt:At.ks,Pt=kt.k;Pt.length?Tt=new j(yt,At,Ct):Tt=new g(yt,At,Ct)}else Ct===5?Tt=new rt(yt,At):Ct===6?Tt=new _e(yt,At):Ct===7&&(Tt=new $(yt,At));return Tt.k&&yt.addDynamicProperty(Tt),Tt}function ut(){return g}function gt(){return j}var wt={};return wt.getShapeProp=st,wt.getConstructorFunction=ut,wt.getKeyframedConstructorFunction=gt,wt}();/*!
 Transformation Matrix v2.0
 (c) Epistemex 2014-2015
 www.epistemex.com
 By Ken Fyrstenberg
 Contributions by leeoniya.
 License: MIT, header required.
 */var Matrix=function(){var e=Math.cos,i=Math.sin,s=Math.tan,a=Math.round;function o(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function c(Ft){if(Ft===0)return this;var Gr=e(Ft),gn=i(Ft);return this._t(Gr,-gn,0,0,gn,Gr,0,0,0,0,1,0,0,0,0,1)}function d(Ft){if(Ft===0)return this;var Gr=e(Ft),gn=i(Ft);return this._t(1,0,0,0,0,Gr,-gn,0,0,gn,Gr,0,0,0,0,1)}function g(Ft){if(Ft===0)return this;var Gr=e(Ft),gn=i(Ft);return this._t(Gr,0,gn,0,0,1,0,0,-gn,0,Gr,0,0,0,0,1)}function b(Ft){if(Ft===0)return this;var Gr=e(Ft),gn=i(Ft);return this._t(Gr,-gn,0,0,gn,Gr,0,0,0,0,1,0,0,0,0,1)}function j(Ft,Gr){return this._t(1,Gr,Ft,1,0,0)}function _e(Ft,Gr){return this.shear(s(Ft),s(Gr))}function $(Ft,Gr){var gn=e(Gr),un=i(Gr);return this._t(gn,un,0,0,-un,gn,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,s(Ft),1,0,0,0,0,1,0,0,0,0,1)._t(gn,-un,0,0,un,gn,0,0,0,0,1,0,0,0,0,1)}function rt(Ft,Gr,gn){return!gn&&gn!==0&&(gn=1),Ft===1&&Gr===1&&gn===1?this:this._t(Ft,0,0,0,0,Gr,0,0,0,0,gn,0,0,0,0,1)}function st(Ft,Gr,gn,un,Zn,xu,ou,sp,wu,l1,P0,B0,q1,ox,qx,N_){return this.props[0]=Ft,this.props[1]=Gr,this.props[2]=gn,this.props[3]=un,this.props[4]=Zn,this.props[5]=xu,this.props[6]=ou,this.props[7]=sp,this.props[8]=wu,this.props[9]=l1,this.props[10]=P0,this.props[11]=B0,this.props[12]=q1,this.props[13]=ox,this.props[14]=qx,this.props[15]=N_,this}function ut(Ft,Gr,gn){return gn=gn||0,Ft!==0||Gr!==0||gn!==0?this._t(1,0,0,0,0,1,0,0,0,0,1,0,Ft,Gr,gn,1):this}function gt(Ft,Gr,gn,un,Zn,xu,ou,sp,wu,l1,P0,B0,q1,ox,qx,N_){var eS=this.props;if(Ft===1&&Gr===0&&gn===0&&un===0&&Zn===0&&xu===1&&ou===0&&sp===0&&wu===0&&l1===0&&P0===1&&B0===0)return eS[12]=eS[12]*Ft+eS[15]*q1,eS[13]=eS[13]*xu+eS[15]*ox,eS[14]=eS[14]*P0+eS[15]*qx,eS[15]*=N_,this._identityCalculated=!1,this;var tA=eS[0],fD=eS[1],q3=eS[2],SA=eS[3],wA=eS[4],mO=eS[5],sR=eS[6],bu=eS[7],au=eS[8],X1=eS[9],eE=eS[10],bo=eS[11],C3=eS[12],aR=eS[13],X3=eS[14],U_=eS[15];return eS[0]=tA*Ft+fD*Zn+q3*wu+SA*q1,eS[1]=tA*Gr+fD*xu+q3*l1+SA*ox,eS[2]=tA*gn+fD*ou+q3*P0+SA*qx,eS[3]=tA*un+fD*sp+q3*B0+SA*N_,eS[4]=wA*Ft+mO*Zn+sR*wu+bu*q1,eS[5]=wA*Gr+mO*xu+sR*l1+bu*ox,eS[6]=wA*gn+mO*ou+sR*P0+bu*qx,eS[7]=wA*un+mO*sp+sR*B0+bu*N_,eS[8]=au*Ft+X1*Zn+eE*wu+bo*q1,eS[9]=au*Gr+X1*xu+eE*l1+bo*ox,eS[10]=au*gn+X1*ou+eE*P0+bo*qx,eS[11]=au*un+X1*sp+eE*B0+bo*N_,eS[12]=C3*Ft+aR*Zn+X3*wu+U_*q1,eS[13]=C3*Gr+aR*xu+X3*l1+U_*ox,eS[14]=C3*gn+aR*ou+X3*P0+U_*qx,eS[15]=C3*un+aR*sp+X3*B0+U_*N_,this._identityCalculated=!1,this}function wt(Ft){var Gr=Ft.props;return this.transform(Gr[0],Gr[1],Gr[2],Gr[3],Gr[4],Gr[5],Gr[6],Gr[7],Gr[8],Gr[9],Gr[10],Gr[11],Gr[12],Gr[13],Gr[14],Gr[15])}function yt(){return this._identityCalculated||(this._identity=!(this.props[0]!==1||this.props[1]!==0||this.props[2]!==0||this.props[3]!==0||this.props[4]!==0||this.props[5]!==1||this.props[6]!==0||this.props[7]!==0||this.props[8]!==0||this.props[9]!==0||this.props[10]!==1||this.props[11]!==0||this.props[12]!==0||this.props[13]!==0||this.props[14]!==0||this.props[15]!==1),this._identityCalculated=!0),this._identity}function At(Ft){for(var Gr=0;Gr<16;){if(Ft.props[Gr]!==this.props[Gr])return!1;Gr+=1}return!0}function Ct(Ft){var Gr;for(Gr=0;Gr<16;Gr+=1)Ft.props[Gr]=this.props[Gr];return Ft}function Tt(Ft){var Gr;for(Gr=0;Gr<16;Gr+=1)this.props[Gr]=Ft[Gr]}function kt(Ft,Gr,gn){return{x:Ft*this.props[0]+Gr*this.props[4]+gn*this.props[8]+this.props[12],y:Ft*this.props[1]+Gr*this.props[5]+gn*this.props[9]+this.props[13],z:Ft*this.props[2]+Gr*this.props[6]+gn*this.props[10]+this.props[14]}}function Pt(Ft,Gr,gn){return Ft*this.props[0]+Gr*this.props[4]+gn*this.props[8]+this.props[12]}function It(Ft,Gr,gn){return Ft*this.props[1]+Gr*this.props[5]+gn*this.props[9]+this.props[13]}function Lt(Ft,Gr,gn){return Ft*this.props[2]+Gr*this.props[6]+gn*this.props[10]+this.props[14]}function Nt(){var Ft=this.props[0]*this.props[5]-this.props[1]*this.props[4],Gr=this.props[5]/Ft,gn=-this.props[1]/Ft,un=-this.props[4]/Ft,Zn=this.props[0]/Ft,xu=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/Ft,ou=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/Ft,sp=new Matrix;return sp.props[0]=Gr,sp.props[1]=gn,sp.props[4]=un,sp.props[5]=Zn,sp.props[12]=xu,sp.props[13]=ou,sp}function Ht(Ft){var Gr=this.getInverseMatrix();return Gr.applyToPointArray(Ft[0],Ft[1],Ft[2]||0)}function dr(Ft){var Gr,gn=Ft.length,un=[];for(Gr=0;Gr<gn;Gr+=1)un[Gr]=Ht(Ft[Gr]);return un}function hs(Ft,Gr,gn){var un=createTypedArray("float32",6);if(this.isIdentity())un[0]=Ft[0],un[1]=Ft[1],un[2]=Gr[0],un[3]=Gr[1],un[4]=gn[0],un[5]=gn[1];else{var Zn=this.props[0],xu=this.props[1],ou=this.props[4],sp=this.props[5],wu=this.props[12],l1=this.props[13];un[0]=Ft[0]*Zn+Ft[1]*ou+wu,un[1]=Ft[0]*xu+Ft[1]*sp+l1,un[2]=Gr[0]*Zn+Gr[1]*ou+wu,un[3]=Gr[0]*xu+Gr[1]*sp+l1,un[4]=gn[0]*Zn+gn[1]*ou+wu,un[5]=gn[0]*xu+gn[1]*sp+l1}return un}function _s(Ft,Gr,gn){var un;return this.isIdentity()?un=[Ft,Gr,gn]:un=[Ft*this.props[0]+Gr*this.props[4]+gn*this.props[8]+this.props[12],Ft*this.props[1]+Gr*this.props[5]+gn*this.props[9]+this.props[13],Ft*this.props[2]+Gr*this.props[6]+gn*this.props[10]+this.props[14]],un}function ds(Ft,Gr){if(this.isIdentity())return Ft+","+Gr;var gn=this.props;return Math.round((Ft*gn[0]+Gr*gn[4]+gn[12])*100)/100+","+Math.round((Ft*gn[1]+Gr*gn[5]+gn[13])*100)/100}function Nn(){for(var Ft=0,Gr=this.props,gn="matrix3d(",un=1e4;Ft<16;)gn+=a(Gr[Ft]*un)/un,gn+=Ft===15?")":",",Ft+=1;return gn}function us(Ft){var Gr=1e4;return Ft<1e-6&&Ft>0||Ft>-1e-6&&Ft<0?a(Ft*Gr)/Gr:Ft}function hn(){var Ft=this.props,Gr=us(Ft[0]),gn=us(Ft[1]),un=us(Ft[4]),Zn=us(Ft[5]),xu=us(Ft[12]),ou=us(Ft[13]);return"matrix("+Gr+","+gn+","+un+","+Zn+","+xu+","+ou+")"}return function(){this.reset=o,this.rotate=c,this.rotateX=d,this.rotateY=g,this.rotateZ=b,this.skew=_e,this.skewFromAxis=$,this.shear=j,this.scale=rt,this.setTransform=st,this.translate=ut,this.transform=gt,this.multiply=wt,this.applyToPoint=kt,this.applyToX=Pt,this.applyToY=It,this.applyToZ=Lt,this.applyToPointArray=_s,this.applyToTriplePoints=hs,this.applyToPointStringified=ds,this.toCSS=Nn,this.to2dCSS=hn,this.clone=Ct,this.cloneFromProps=Tt,this.equals=At,this.inversePoints=dr,this.inversePoint=Ht,this.getInverseMatrix=Nt,this._t=this.transform,this.isIdentity=yt,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$3=function(s){return typeof s}:_typeof$3=function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},_typeof$3(e)}var lottie={};function setLocation(e){setLocationHref(e)}function searchAnimations(){animationManager.searchAnimations()}function setSubframeRendering(e){setSubframeEnabled(e)}function setPrefix(e){setIdPrefix(e)}function loadAnimation(e){return animationManager.loadAnimation(e)}function setQuality(e){if(typeof e=="string")switch(e){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10);break}else!isNaN(e)&&e>1&&setDefaultCurveSegments(e)}function inBrowser(){return typeof navigator<"u"}function installPlugin(e,i){e==="expressions"&&setExpressionsPlugin(i)}function getFactory(e){switch(e){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.12.2";function checkReady(){document.readyState==="complete"&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(e){for(var i=queryString.split("&"),s=0;s<i.length;s+=1){var a=i[s].split("=");if(decodeURIComponent(a[0])==e)return decodeURIComponent(a[1])}return null}var queryString="";{var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{_typeof$3(exports)!=="object"&&(window.bodymovin=lottie)}catch(e){}var ShapeModifiers=function(){var e={},i={};e.registerModifier=s,e.getModifier=a;function s(o,c){i[o]||(i[o]=c)}function a(o,c,d){return new i[o](c,d)}return e}();function ShapeModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(e){if(!this.closed){e.sh.container.addDynamicProperty(e.sh);var i={shape:e.sh,data:e,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(i),this.addShapeToModifier(i),this._isAnimated&&e.setAsAnimated()}},ShapeModifier.prototype.init=function(e,i){this.shapes=[],this.elem=e,this.initDynamicPropertyContainer(e),this.initModifierProperties(e,i),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier);function TrimModifier(){}extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(e,i){this.s=PropertyFactory.getProp(e,i.s,0,.01,this),this.e=PropertyFactory.getProp(e,i.e,0,.01,this),this.o=PropertyFactory.getProp(e,i.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=i.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(e){e.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(e,i,s,a,o){var c=[];i<=1?c.push({s:e,e:i}):e>=1?c.push({s:e-1,e:i-1}):(c.push({s:e,e:1}),c.push({s:0,e:i-1}));var d=[],g,b=c.length,j;for(g=0;g<b;g+=1)if(j=c[g],!(j.e*o<a||j.s*o>a+s)){var _e,$;j.s*o<=a?_e=0:_e=(j.s*o-a)/s,j.e*o>=a+s?$=1:$=(j.e*o-a)/s,d.push([_e,$])}return d.length||d.push([0,0]),d},TrimModifier.prototype.releasePathsData=function(e){var i,s=e.length;for(i=0;i<s;i+=1)segmentsLengthPool.release(e[i]);return e.length=0,e},TrimModifier.prototype.processShapes=function(e){var i,s;if(this._mdf||e){var a=this.o.v%360/360;if(a<0&&(a+=1),this.s.v>1?i=1+a:this.s.v<0?i=0+a:i=this.s.v+a,this.e.v>1?s=1+a:this.e.v<0?s=0+a:s=this.e.v+a,i>s){var o=i;i=s,s=o}i=Math.round(i*1e4)*1e-4,s=Math.round(s*1e4)*1e-4,this.sValue=i,this.eValue=s}else i=this.sValue,s=this.eValue;var c,d,g=this.shapes.length,b,j,_e,$,rt,st=0;if(s===i)for(d=0;d<g;d+=1)this.shapes[d].localShapeCollection.releaseShapes(),this.shapes[d].shape._mdf=!0,this.shapes[d].shape.paths=this.shapes[d].localShapeCollection,this._mdf&&(this.shapes[d].pathsData.length=0);else if(s===1&&i===0||s===0&&i===1){if(this._mdf)for(d=0;d<g;d+=1)this.shapes[d].pathsData.length=0,this.shapes[d].shape._mdf=!0}else{var ut=[],gt,wt;for(d=0;d<g;d+=1)if(gt=this.shapes[d],!gt.shape._mdf&&!this._mdf&&!e&&this.m!==2)gt.shape.paths=gt.localShapeCollection;else{if(c=gt.shape.paths,j=c._length,rt=0,!gt.shape._mdf&&gt.pathsData.length)rt=gt.totalShapeLength;else{for(_e=this.releasePathsData(gt.pathsData),b=0;b<j;b+=1)$=bez.getSegmentsLength(c.shapes[b]),_e.push($),rt+=$.totalLength;gt.totalShapeLength=rt,gt.pathsData=_e}st+=rt,gt.shape._mdf=!0}var yt=i,At=s,Ct=0,Tt;for(d=g-1;d>=0;d-=1)if(gt=this.shapes[d],gt.shape._mdf){for(wt=gt.localShapeCollection,wt.releaseShapes(),this.m===2&&g>1?(Tt=this.calculateShapeEdges(i,s,gt.totalShapeLength,Ct,st),Ct+=gt.totalShapeLength):Tt=[[yt,At]],j=Tt.length,b=0;b<j;b+=1){yt=Tt[b][0],At=Tt[b][1],ut.length=0,At<=1?ut.push({s:gt.totalShapeLength*yt,e:gt.totalShapeLength*At}):yt>=1?ut.push({s:gt.totalShapeLength*(yt-1),e:gt.totalShapeLength*(At-1)}):(ut.push({s:gt.totalShapeLength*yt,e:gt.totalShapeLength}),ut.push({s:0,e:gt.totalShapeLength*(At-1)}));var kt=this.addShapes(gt,ut[0]);if(ut[0].s!==ut[0].e){if(ut.length>1){var Pt=gt.shape.paths.shapes[gt.shape.paths._length-1];if(Pt.c){var It=kt.pop();this.addPaths(kt,wt),kt=this.addShapes(gt,ut[1],It)}else this.addPaths(kt,wt),kt=this.addShapes(gt,ut[1])}this.addPaths(kt,wt)}}gt.shape.paths=wt}}},TrimModifier.prototype.addPaths=function(e,i){var s,a=e.length;for(s=0;s<a;s+=1)i.addShape(e[s])},TrimModifier.prototype.addSegment=function(e,i,s,a,o,c,d){o.setXYAt(i[0],i[1],"o",c),o.setXYAt(s[0],s[1],"i",c+1),d&&o.setXYAt(e[0],e[1],"v",c),o.setXYAt(a[0],a[1],"v",c+1)},TrimModifier.prototype.addSegmentFromArray=function(e,i,s,a){i.setXYAt(e[1],e[5],"o",s),i.setXYAt(e[2],e[6],"i",s+1),a&&i.setXYAt(e[0],e[4],"v",s),i.setXYAt(e[3],e[7],"v",s+1)},TrimModifier.prototype.addShapes=function(e,i,s){var a=e.pathsData,o=e.shape.paths.shapes,c,d=e.shape.paths._length,g,b,j=0,_e,$,rt,st,ut=[],gt,wt=!0;for(s?($=s._length,gt=s._length):(s=shapePool.newElement(),$=0,gt=0),ut.push(s),c=0;c<d;c+=1){for(rt=a[c].lengths,s.c=o[c].c,b=o[c].c?rt.length:rt.length+1,g=1;g<b;g+=1)if(_e=rt[g-1],j+_e.addedLength<i.s)j+=_e.addedLength,s.c=!1;else if(j>i.e){s.c=!1;break}else i.s<=j&&i.e>=j+_e.addedLength?(this.addSegment(o[c].v[g-1],o[c].o[g-1],o[c].i[g],o[c].v[g],s,$,wt),wt=!1):(st=bez.getNewSegment(o[c].v[g-1],o[c].v[g],o[c].o[g-1],o[c].i[g],(i.s-j)/_e.addedLength,(i.e-j)/_e.addedLength,rt[g-1]),this.addSegmentFromArray(st,s,$,wt),wt=!1,s.c=!1),j+=_e.addedLength,$+=1;if(o[c].c&&rt.length){if(_e=rt[g-1],j<=i.e){var yt=rt[g-1].addedLength;i.s<=j&&i.e>=j+yt?(this.addSegment(o[c].v[g-1],o[c].o[g-1],o[c].i[0],o[c].v[0],s,$,wt),wt=!1):(st=bez.getNewSegment(o[c].v[g-1],o[c].v[0],o[c].o[g-1],o[c].i[0],(i.s-j)/yt,(i.e-j)/yt,rt[g-1]),this.addSegmentFromArray(st,s,$,wt),wt=!1,s.c=!1)}else s.c=!1;j+=_e.addedLength,$+=1}if(s._length&&(s.setXYAt(s.v[gt][0],s.v[gt][1],"i",gt),s.setXYAt(s.v[s._length-1][0],s.v[s._length-1][1],"o",s._length-1)),j>i.e)break;c<d-1&&(s=shapePool.newElement(),wt=!0,ut.push(s),$=0)}return ut};function PuckerAndBloatModifier(){}extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(e,i){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(e,i.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(e,i){var s=i/100,a=[0,0],o=e._length,c=0;for(c=0;c<o;c+=1)a[0]+=e.v[c][0],a[1]+=e.v[c][1];a[0]/=o,a[1]/=o;var d=shapePool.newElement();d.c=e.c;var g,b,j,_e,$,rt;for(c=0;c<o;c+=1)g=e.v[c][0]+(a[0]-e.v[c][0])*s,b=e.v[c][1]+(a[1]-e.v[c][1])*s,j=e.o[c][0]+(a[0]-e.o[c][0])*-s,_e=e.o[c][1]+(a[1]-e.o[c][1])*-s,$=e.i[c][0]+(a[0]-e.i[c][0])*-s,rt=e.i[c][1]+(a[1]-e.i[c][1])*-s,d.setTripleAt(g,b,j,_e,$,rt,c);return d},PuckerAndBloatModifier.prototype.processShapes=function(e){var i,s,a=this.shapes.length,o,c,d=this.amount.v;if(d!==0){var g,b;for(s=0;s<a;s+=1){if(g=this.shapes[s],b=g.localShapeCollection,!(!g.shape._mdf&&!this._mdf&&!e))for(b.releaseShapes(),g.shape._mdf=!0,i=g.shape.paths.shapes,c=g.shape.paths._length,o=0;o<c;o+=1)b.addShape(this.processPath(i[o],d));g.shape.paths=g.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var e=[0,0];function i(b){var j=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||j,this.a&&b.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&b.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&b.skewFromAxis(-this.sk.v,this.sa.v),this.r?b.rotate(-this.r.v):b.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?b.translate(this.px.v,this.py.v,-this.pz.v):b.translate(this.px.v,this.py.v,0):b.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}function s(b){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||b){var j;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var _e,$;if(j=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(_e=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/j,0),$=this.p.getValueAtTime(this.p.keyframes[0].t/j,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(_e=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/j,0),$=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/j,0)):(_e=this.p.pv,$=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/j,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){_e=[],$=[];var rt=this.px,st=this.py;rt._caching.lastFrame+rt.offsetTime<=rt.keyframes[0].t?(_e[0]=rt.getValueAtTime((rt.keyframes[0].t+.01)/j,0),_e[1]=st.getValueAtTime((st.keyframes[0].t+.01)/j,0),$[0]=rt.getValueAtTime(rt.keyframes[0].t/j,0),$[1]=st.getValueAtTime(st.keyframes[0].t/j,0)):rt._caching.lastFrame+rt.offsetTime>=rt.keyframes[rt.keyframes.length-1].t?(_e[0]=rt.getValueAtTime(rt.keyframes[rt.keyframes.length-1].t/j,0),_e[1]=st.getValueAtTime(st.keyframes[st.keyframes.length-1].t/j,0),$[0]=rt.getValueAtTime((rt.keyframes[rt.keyframes.length-1].t-.01)/j,0),$[1]=st.getValueAtTime((st.keyframes[st.keyframes.length-1].t-.01)/j,0)):(_e=[rt.pv,st.pv],$[0]=rt.getValueAtTime((rt._caching.lastFrame+rt.offsetTime-.01)/j,rt.offsetTime),$[1]=st.getValueAtTime((st._caching.lastFrame+st.offsetTime-.01)/j,st.offsetTime))}else $=e,_e=$;this.v.rotate(-Math.atan2(_e[1]-$[1],_e[0]-$[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}}function a(){if(this.appliedTransformations=0,this.pre.reset(),!this.a.effectsSequence.length)this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1;else return;if(!this.s.effectsSequence.length)this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2;else return;if(this.sk)if(!this.sk.effectsSequence.length&&!this.sa.effectsSequence.length)this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3;else return;this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):!this.rz.effectsSequence.length&&!this.ry.effectsSequence.length&&!this.rx.effectsSequence.length&&!this.or.effectsSequence.length&&(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}function o(){}function c(b){this._addDynamicProperty(b),this.elem.addDynamicProperty(b),this._isDirty=!0}function d(b,j,_e){if(this.elem=b,this.frameId=-1,this.propType="transform",this.data=j,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(_e||b),j.p&&j.p.s?(this.px=PropertyFactory.getProp(b,j.p.x,0,0,this),this.py=PropertyFactory.getProp(b,j.p.y,0,0,this),j.p.z&&(this.pz=PropertyFactory.getProp(b,j.p.z,0,0,this))):this.p=PropertyFactory.getProp(b,j.p||{k:[0,0,0]},1,0,this),j.rx){if(this.rx=PropertyFactory.getProp(b,j.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(b,j.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(b,j.rz,0,degToRads,this),j.or.k[0].ti){var $,rt=j.or.k.length;for($=0;$<rt;$+=1)j.or.k[$].to=null,j.or.k[$].ti=null}this.or=PropertyFactory.getProp(b,j.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(b,j.r||{k:0},0,degToRads,this);j.sk&&(this.sk=PropertyFactory.getProp(b,j.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(b,j.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(b,j.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(b,j.s||{k:[100,100,100]},1,.01,this),j.o?this.o=PropertyFactory.getProp(b,j.o,0,.01,b):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}d.prototype={applyToMatrix:i,getValue:s,precalculateMatrix:a,autoOrient:o},extendPrototype([DynamicPropertyContainer],d),d.prototype.addDynamicProperty=c,d.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty;function g(b,j,_e){return new d(b,j,_e)}return{getTransformProperty:g}}();function RepeaterModifier(){}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(e,i){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(e,i.c,0,null,this),this.o=PropertyFactory.getProp(e,i.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(e,i.tr,this),this.so=PropertyFactory.getProp(e,i.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(e,i.tr.eo,0,.01,this),this.data=i,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(e,i,s,a,o,c){var d=c?-1:1,g=a.s.v[0]+(1-a.s.v[0])*(1-o),b=a.s.v[1]+(1-a.s.v[1])*(1-o);e.translate(a.p.v[0]*d*o,a.p.v[1]*d*o,a.p.v[2]),i.translate(-a.a.v[0],-a.a.v[1],a.a.v[2]),i.rotate(-a.r.v*d*o),i.translate(a.a.v[0],a.a.v[1],a.a.v[2]),s.translate(-a.a.v[0],-a.a.v[1],a.a.v[2]),s.scale(c?1/g:g,c?1/b:b),s.translate(a.a.v[0],a.a.v[1],a.a.v[2])},RepeaterModifier.prototype.init=function(e,i,s,a){for(this.elem=e,this.arr=i,this.pos=s,this.elemsData=a,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(e),this.initModifierProperties(e,i[s]);s>0;)s-=1,this._elements.unshift(i[s]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(e){var i,s=e.length;for(i=0;i<s;i+=1)e[i]._processed=!1,e[i].ty==="gr"&&this.resetElements(e[i].it)},RepeaterModifier.prototype.cloneElements=function(e){var i=JSON.parse(JSON.stringify(e));return this.resetElements(i),i},RepeaterModifier.prototype.changeGroupRender=function(e,i){var s,a=e.length;for(s=0;s<a;s+=1)e[s]._render=i,e[s].ty==="gr"&&this.changeGroupRender(e[s].it,i)},RepeaterModifier.prototype.processShapes=function(e){var i,s,a,o,c,d=!1;if(this._mdf||e){var g=Math.ceil(this.c.v);if(this._groups.length<g){for(;this._groups.length<g;){var b={it:this.cloneElements(this._elements),ty:"gr"};b.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,b),this._groups.splice(0,0,b),this._currentCopies+=1}this.elem.reloadShapes(),d=!0}c=0;var j;for(a=0;a<=this._groups.length-1;a+=1){if(j=c<g,this._groups[a]._render=j,this.changeGroupRender(this._groups[a].it,j),!j){var _e=this.elemsData[a].it,$=_e[_e.length-1];$.transform.op.v!==0?($.transform.op._mdf=!0,$.transform.op.v=0):$.transform.op._mdf=!1}c+=1}this._currentCopies=g;var rt=this.o.v,st=rt%1,ut=rt>0?Math.floor(rt):Math.ceil(rt),gt=this.pMatrix.props,wt=this.rMatrix.props,yt=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var At=0;if(rt>0){for(;At<ut;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),At+=1;st&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,st,!1),At+=st)}else if(rt<0){for(;At>ut;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),At-=1;st&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-st,!0),At-=st)}a=this.data.m===1?0:this._currentCopies-1,o=this.data.m===1?1:-1,c=this._currentCopies;for(var Ct,Tt;c;){if(i=this.elemsData[a].it,s=i[i.length-1].transform.mProps.v.props,Tt=s.length,i[i.length-1].transform.mProps._mdf=!0,i[i.length-1].transform.op._mdf=!0,i[i.length-1].transform.op.v=this._currentCopies===1?this.so.v:this.so.v+(this.eo.v-this.so.v)*(a/(this._currentCopies-1)),At!==0){for((a!==0&&o===1||a!==this._currentCopies-1&&o===-1)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(wt[0],wt[1],wt[2],wt[3],wt[4],wt[5],wt[6],wt[7],wt[8],wt[9],wt[10],wt[11],wt[12],wt[13],wt[14],wt[15]),this.matrix.transform(yt[0],yt[1],yt[2],yt[3],yt[4],yt[5],yt[6],yt[7],yt[8],yt[9],yt[10],yt[11],yt[12],yt[13],yt[14],yt[15]),this.matrix.transform(gt[0],gt[1],gt[2],gt[3],gt[4],gt[5],gt[6],gt[7],gt[8],gt[9],gt[10],gt[11],gt[12],gt[13],gt[14],gt[15]),Ct=0;Ct<Tt;Ct+=1)s[Ct]=this.matrix.props[Ct];this.matrix.reset()}else for(this.matrix.reset(),Ct=0;Ct<Tt;Ct+=1)s[Ct]=this.matrix.props[Ct];At+=1,c-=1,a+=o}}else for(c=this._currentCopies,a=0,o=1;c;)i=this.elemsData[a].it,s=i[i.length-1].transform.mProps.v.props,i[i.length-1].transform.mProps._mdf=!1,i[i.length-1].transform.op._mdf=!1,c-=1,a+=o;return d},RepeaterModifier.prototype.addShape=function(){};function RoundCornersModifier(){}extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(e,i){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(e,i.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(e,i){var s=shapePool.newElement();s.c=e.c;var a,o=e._length,c,d,g,b,j,_e,$=0,rt,st,ut,gt,wt,yt;for(a=0;a<o;a+=1)c=e.v[a],g=e.o[a],d=e.i[a],c[0]===g[0]&&c[1]===g[1]&&c[0]===d[0]&&c[1]===d[1]?(a===0||a===o-1)&&!e.c?(s.setTripleAt(c[0],c[1],g[0],g[1],d[0],d[1],$),$+=1):(a===0?b=e.v[o-1]:b=e.v[a-1],j=Math.sqrt(Math.pow(c[0]-b[0],2)+Math.pow(c[1]-b[1],2)),_e=j?Math.min(j/2,i)/j:0,wt=c[0]+(b[0]-c[0])*_e,rt=wt,yt=c[1]-(c[1]-b[1])*_e,st=yt,ut=rt-(rt-c[0])*roundCorner,gt=st-(st-c[1])*roundCorner,s.setTripleAt(rt,st,ut,gt,wt,yt,$),$+=1,a===o-1?b=e.v[0]:b=e.v[a+1],j=Math.sqrt(Math.pow(c[0]-b[0],2)+Math.pow(c[1]-b[1],2)),_e=j?Math.min(j/2,i)/j:0,ut=c[0]+(b[0]-c[0])*_e,rt=ut,gt=c[1]+(b[1]-c[1])*_e,st=gt,wt=rt-(rt-c[0])*roundCorner,yt=st-(st-c[1])*roundCorner,s.setTripleAt(rt,st,ut,gt,wt,yt,$),$+=1):(s.setTripleAt(e.v[a][0],e.v[a][1],e.o[a][0],e.o[a][1],e.i[a][0],e.i[a][1],$),$+=1);return s},RoundCornersModifier.prototype.processShapes=function(e){var i,s,a=this.shapes.length,o,c,d=this.rd.v;if(d!==0){var g,b;for(s=0;s<a;s+=1){if(g=this.shapes[s],b=g.localShapeCollection,!(!g.shape._mdf&&!this._mdf&&!e))for(b.releaseShapes(),g.shape._mdf=!0,i=g.shape.paths.shapes,c=g.shape.paths._length,o=0;o<c;o+=1)b.addShape(this.processPath(i[o],d));g.shape.paths=g.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function floatEqual(e,i){return Math.abs(e-i)*1e5<=Math.min(Math.abs(e),Math.abs(i))}function floatZero(e){return Math.abs(e)<=1e-5}function lerp(e,i,s){return e*(1-s)+i*s}function lerpPoint(e,i,s){return[lerp(e[0],i[0],s),lerp(e[1],i[1],s)]}function quadRoots(e,i,s){if(e===0)return[];var a=i*i-4*e*s;if(a<0)return[];var o=-i/(2*e);if(a===0)return[o];var c=Math.sqrt(a)/(2*e);return[o-c,o+c]}function polynomialCoefficients(e,i,s,a){return[-e+3*i-3*s+a,3*e-6*i+3*s,-3*e+3*i,e]}function singlePoint(e){return new PolynomialBezier(e,e,e,e,!1)}function PolynomialBezier(e,i,s,a,o){o&&pointEqual(e,i)&&(i=lerpPoint(e,a,1/3)),o&&pointEqual(s,a)&&(s=lerpPoint(e,a,2/3));var c=polynomialCoefficients(e[0],i[0],s[0],a[0]),d=polynomialCoefficients(e[1],i[1],s[1],a[1]);this.a=[c[0],d[0]],this.b=[c[1],d[1]],this.c=[c[2],d[2]],this.d=[c[3],d[3]],this.points=[e,i,s,a]}PolynomialBezier.prototype.point=function(e){return[((this.a[0]*e+this.b[0])*e+this.c[0])*e+this.d[0],((this.a[1]*e+this.b[1])*e+this.c[1])*e+this.d[1]]},PolynomialBezier.prototype.derivative=function(e){return[(3*e*this.a[0]+2*this.b[0])*e+this.c[0],(3*e*this.a[1]+2*this.b[1])*e+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(e){var i=this.derivative(e);return Math.atan2(i[1],i[0])},PolynomialBezier.prototype.normalAngle=function(e){var i=this.derivative(e);return Math.atan2(i[0],i[1])},PolynomialBezier.prototype.inflectionPoints=function(){var e=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(e))return[];var i=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/e,s=i*i-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/e;if(s<0)return[];var a=Math.sqrt(s);return floatZero(a)?a>0&&a<1?[i]:[]:[i-a,i+a].filter(function(o){return o>0&&o<1})},PolynomialBezier.prototype.split=function(e){if(e<=0)return[singlePoint(this.points[0]),this];if(e>=1)return[this,singlePoint(this.points[this.points.length-1])];var i=lerpPoint(this.points[0],this.points[1],e),s=lerpPoint(this.points[1],this.points[2],e),a=lerpPoint(this.points[2],this.points[3],e),o=lerpPoint(i,s,e),c=lerpPoint(s,a,e),d=lerpPoint(o,c,e);return[new PolynomialBezier(this.points[0],i,o,d,!0),new PolynomialBezier(d,c,a,this.points[3],!0)]};function extrema(e,i){var s=e.points[0][i],a=e.points[e.points.length-1][i];if(s>a){var o=a;a=s,s=o}for(var c=quadRoots(3*e.a[i],2*e.b[i],e.c[i]),d=0;d<c.length;d+=1)if(c[d]>0&&c[d]<1){var g=e.point(c[d])[i];g<s?s=g:g>a&&(a=g)}return{min:s,max:a}}PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var e=this.bounds();return{left:e.x.min,right:e.x.max,top:e.y.min,bottom:e.y.max,width:e.x.max-e.x.min,height:e.y.max-e.y.min,cx:(e.x.max+e.x.min)/2,cy:(e.y.max+e.y.min)/2}};function intersectData(e,i,s){var a=e.boundingBox();return{cx:a.cx,cy:a.cy,width:a.width,height:a.height,bez:e,t:(i+s)/2,t1:i,t2:s}}function splitData(e){var i=e.bez.split(.5);return[intersectData(i[0],e.t1,e.t),intersectData(i[1],e.t,e.t2)]}function boxIntersect(e,i){return Math.abs(e.cx-i.cx)*2<e.width+i.width&&Math.abs(e.cy-i.cy)*2<e.height+i.height}function intersectsImpl(e,i,s,a,o,c){if(boxIntersect(e,i)){if(s>=c||e.width<=a&&e.height<=a&&i.width<=a&&i.height<=a){o.push([e.t,i.t]);return}var d=splitData(e),g=splitData(i);intersectsImpl(d[0],g[0],s+1,a,o,c),intersectsImpl(d[0],g[1],s+1,a,o,c),intersectsImpl(d[1],g[0],s+1,a,o,c),intersectsImpl(d[1],g[1],s+1,a,o,c)}}PolynomialBezier.prototype.intersections=function(e,i,s){i===void 0&&(i=2),s===void 0&&(s=7);var a=[];return intersectsImpl(intersectData(this,0,1),intersectData(e,0,1),0,i,a,s),a},PolynomialBezier.shapeSegment=function(e,i){var s=(i+1)%e.length();return new PolynomialBezier(e.v[i],e.o[i],e.i[s],e.v[s],!0)},PolynomialBezier.shapeSegmentInverted=function(e,i){var s=(i+1)%e.length();return new PolynomialBezier(e.v[s],e.i[s],e.o[i],e.v[i],!0)};function crossProduct(e,i){return[e[1]*i[2]-e[2]*i[1],e[2]*i[0]-e[0]*i[2],e[0]*i[1]-e[1]*i[0]]}function lineIntersection(e,i,s,a){var o=[e[0],e[1],1],c=[i[0],i[1],1],d=[s[0],s[1],1],g=[a[0],a[1],1],b=crossProduct(crossProduct(o,c),crossProduct(d,g));return floatZero(b[2])?null:[b[0]/b[2],b[1]/b[2]]}function polarOffset(e,i,s){return[e[0]+Math.cos(i)*s,e[1]-Math.sin(i)*s]}function pointDistance(e,i){return Math.hypot(e[0]-i[0],e[1]-i[1])}function pointEqual(e,i){return floatEqual(e[0],i[0])&&floatEqual(e[1],i[1])}function ZigZagModifier(){}extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(e,i){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(e,i.s,0,null,this),this.frequency=PropertyFactory.getProp(e,i.r,0,null,this),this.pointsType=PropertyFactory.getProp(e,i.pt,0,null,this),this._isAnimated=this.amplitude.effectsSequence.length!==0||this.frequency.effectsSequence.length!==0||this.pointsType.effectsSequence.length!==0};function setPoint(e,i,s,a,o,c,d){var g=s-Math.PI/2,b=s+Math.PI/2,j=i[0]+Math.cos(s)*a*o,_e=i[1]-Math.sin(s)*a*o;e.setTripleAt(j,_e,j+Math.cos(g)*c,_e-Math.sin(g)*c,j+Math.cos(b)*d,_e-Math.sin(b)*d,e.length())}function getPerpendicularVector(e,i){var s=[i[0]-e[0],i[1]-e[1]],a=-Math.PI*.5,o=[Math.cos(a)*s[0]-Math.sin(a)*s[1],Math.sin(a)*s[0]+Math.cos(a)*s[1]];return o}function getProjectingAngle(e,i){var s=i===0?e.length()-1:i-1,a=(i+1)%e.length(),o=e.v[s],c=e.v[a],d=getPerpendicularVector(o,c);return Math.atan2(0,1)-Math.atan2(d[1],d[0])}function zigZagCorner(e,i,s,a,o,c,d){var g=getProjectingAngle(i,s),b=i.v[s%i._length],j=i.v[s===0?i._length-1:s-1],_e=i.v[(s+1)%i._length],$=c===2?Math.sqrt(Math.pow(b[0]-j[0],2)+Math.pow(b[1]-j[1],2)):0,rt=c===2?Math.sqrt(Math.pow(b[0]-_e[0],2)+Math.pow(b[1]-_e[1],2)):0;setPoint(e,i.v[s%i._length],g,d,a,rt/((o+1)*2),$/((o+1)*2))}function zigZagSegment(e,i,s,a,o,c){for(var d=0;d<a;d+=1){var g=(d+1)/(a+1),b=o===2?Math.sqrt(Math.pow(i.points[3][0]-i.points[0][0],2)+Math.pow(i.points[3][1]-i.points[0][1],2)):0,j=i.normalAngle(g),_e=i.point(g);setPoint(e,_e,j,c,s,b/((a+1)*2),b/((a+1)*2)),c=-c}return c}ZigZagModifier.prototype.processPath=function(e,i,s,a){var o=e._length,c=shapePool.newElement();if(c.c=e.c,e.c||(o-=1),o===0)return c;var d=-1,g=PolynomialBezier.shapeSegment(e,0);zigZagCorner(c,e,0,i,s,a,d);for(var b=0;b<o;b+=1)d=zigZagSegment(c,g,i,s,a,-d),b===o-1&&!e.c?g=null:g=PolynomialBezier.shapeSegment(e,(b+1)%o),zigZagCorner(c,e,b+1,i,s,a,d);return c},ZigZagModifier.prototype.processShapes=function(e){var i,s,a=this.shapes.length,o,c,d=this.amplitude.v,g=Math.max(0,Math.round(this.frequency.v)),b=this.pointsType.v;if(d!==0){var j,_e;for(s=0;s<a;s+=1){if(j=this.shapes[s],_e=j.localShapeCollection,!(!j.shape._mdf&&!this._mdf&&!e))for(_e.releaseShapes(),j.shape._mdf=!0,i=j.shape.paths.shapes,c=j.shape.paths._length,o=0;o<c;o+=1)_e.addShape(this.processPath(i[o],d,g,b));j.shape.paths=j.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function linearOffset(e,i,s){var a=Math.atan2(i[0]-e[0],i[1]-e[1]);return[polarOffset(e,a,s),polarOffset(i,a,s)]}function offsetSegment(e,i){var s,a,o,c,d,g,b;b=linearOffset(e.points[0],e.points[1],i),s=b[0],a=b[1],b=linearOffset(e.points[1],e.points[2],i),o=b[0],c=b[1],b=linearOffset(e.points[2],e.points[3],i),d=b[0],g=b[1];var j=lineIntersection(s,a,o,c);j===null&&(j=a);var _e=lineIntersection(d,g,o,c);return _e===null&&(_e=d),new PolynomialBezier(s,j,_e,g)}function joinLines(e,i,s,a,o){var c=i.points[3],d=s.points[0];if(a===3||pointEqual(c,d))return c;if(a===2){var g=-i.tangentAngle(1),b=-s.tangentAngle(0)+Math.PI,j=lineIntersection(c,polarOffset(c,g+Math.PI/2,100),d,polarOffset(d,g+Math.PI/2,100)),_e=j?pointDistance(j,c):pointDistance(c,d)/2,$=polarOffset(c,g,2*_e*roundCorner);return e.setXYAt($[0],$[1],"o",e.length()-1),$=polarOffset(d,b,2*_e*roundCorner),e.setTripleAt(d[0],d[1],d[0],d[1],$[0],$[1],e.length()),d}var rt=pointEqual(c,i.points[2])?i.points[0]:i.points[2],st=pointEqual(d,s.points[1])?s.points[3]:s.points[1],ut=lineIntersection(rt,c,d,st);return ut&&pointDistance(ut,c)<o?(e.setTripleAt(ut[0],ut[1],ut[0],ut[1],ut[0],ut[1],e.length()),ut):c}function getIntersection(e,i){var s=e.intersections(i);return s.length&&floatEqual(s[0][0],1)&&s.shift(),s.length?s[0]:null}function pruneSegmentIntersection(e,i){var s=e.slice(),a=i.slice(),o=getIntersection(e[e.length-1],i[0]);return o&&(s[e.length-1]=e[e.length-1].split(o[0])[0],a[0]=i[0].split(o[1])[1]),e.length>1&&i.length>1&&(o=getIntersection(e[0],i[i.length-1]),o)?[[e[0].split(o[0])[0]],[i[i.length-1].split(o[1])[1]]]:[s,a]}function pruneIntersections(e){for(var i,s=1;s<e.length;s+=1)i=pruneSegmentIntersection(e[s-1],e[s]),e[s-1]=i[0],e[s]=i[1];return e.length>1&&(i=pruneSegmentIntersection(e[e.length-1],e[0]),e[e.length-1]=i[0],e[0]=i[1]),e}function offsetSegmentSplit(e,i){var s=e.inflectionPoints(),a,o,c,d;if(s.length===0)return[offsetSegment(e,i)];if(s.length===1||floatEqual(s[1],1))return c=e.split(s[0]),a=c[0],o=c[1],[offsetSegment(a,i),offsetSegment(o,i)];c=e.split(s[0]),a=c[0];var g=(s[1]-s[0])/(1-s[0]);return c=c[1].split(g),d=c[0],o=c[1],[offsetSegment(a,i),offsetSegment(d,i),offsetSegment(o,i)]}function OffsetPathModifier(){}extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(e,i){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(e,i.a,0,null,this),this.miterLimit=PropertyFactory.getProp(e,i.ml,0,null,this),this.lineJoin=i.lj,this._isAnimated=this.amount.effectsSequence.length!==0},OffsetPathModifier.prototype.processPath=function(e,i,s,a){var o=shapePool.newElement();o.c=e.c;var c=e.length();e.c||(c-=1);var d,g,b,j=[];for(d=0;d<c;d+=1)b=PolynomialBezier.shapeSegment(e,d),j.push(offsetSegmentSplit(b,i));if(!e.c)for(d=c-1;d>=0;d-=1)b=PolynomialBezier.shapeSegmentInverted(e,d),j.push(offsetSegmentSplit(b,i));j=pruneIntersections(j);var _e=null,$=null;for(d=0;d<j.length;d+=1){var rt=j[d];for($&&(_e=joinLines(o,$,rt[0],s,a)),$=rt[rt.length-1],g=0;g<rt.length;g+=1)b=rt[g],_e&&pointEqual(b.points[0],_e)?o.setXYAt(b.points[1][0],b.points[1][1],"o",o.length()-1):o.setTripleAt(b.points[0][0],b.points[0][1],b.points[1][0],b.points[1][1],b.points[0][0],b.points[0][1],o.length()),o.setTripleAt(b.points[3][0],b.points[3][1],b.points[3][0],b.points[3][1],b.points[2][0],b.points[2][1],o.length()),_e=b.points[3]}return j.length&&joinLines(o,$,j[0][0],s,a),o},OffsetPathModifier.prototype.processShapes=function(e){var i,s,a=this.shapes.length,o,c,d=this.amount.v,g=this.miterLimit.v,b=this.lineJoin;if(d!==0){var j,_e;for(s=0;s<a;s+=1){if(j=this.shapes[s],_e=j.localShapeCollection,!(!j.shape._mdf&&!this._mdf&&!e))for(_e.releaseShapes(),j.shape._mdf=!0,i=j.shape.paths.shapes,c=j.shape.paths._length,o=0;o<c;o+=1)_e.addShape(this.processPath(i[o],d,b,g));j.shape.paths=j.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function getFontProperties(e){for(var i=e.fStyle?e.fStyle.split(" "):[],s="normal",a="normal",o=i.length,c,d=0;d<o;d+=1)switch(c=i[d].toLowerCase(),c){case"italic":a="italic";break;case"bold":s="700";break;case"black":s="900";break;case"medium":s="500";break;case"regular":case"normal":s="400";break;case"light":case"thin":s="200";break}return{style:a,weight:e.fWeight||s}}var FontManager=function(){var e=5e3,i={w:0,size:0,shapes:[],data:{shapes:[]}},s=[];s=s.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var a=127988,o=917631,c=917601,d=917626,g=65039,b=8205,j=127462,_e=127487,$=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"];function rt(us){var hn=us.split(","),Ft,Gr=hn.length,gn=[];for(Ft=0;Ft<Gr;Ft+=1)hn[Ft]!=="sans-serif"&&hn[Ft]!=="monospace"&&gn.push(hn[Ft]);return gn.join(",")}function st(us,hn){var Ft=createTag("span");Ft.setAttribute("aria-hidden",!0),Ft.style.fontFamily=hn;var Gr=createTag("span");Gr.innerText="giItT1WQy@!-/#",Ft.style.position="absolute",Ft.style.left="-10000px",Ft.style.top="-10000px",Ft.style.fontSize="300px",Ft.style.fontVariant="normal",Ft.style.fontStyle="normal",Ft.style.fontWeight="normal",Ft.style.letterSpacing="0",Ft.appendChild(Gr),document.body.appendChild(Ft);var gn=Gr.offsetWidth;return Gr.style.fontFamily=rt(us)+", "+hn,{node:Gr,w:gn,parent:Ft}}function ut(){var us,hn=this.fonts.length,Ft,Gr,gn=hn;for(us=0;us<hn;us+=1)this.fonts[us].loaded?gn-=1:this.fonts[us].fOrigin==="n"||this.fonts[us].origin===0?this.fonts[us].loaded=!0:(Ft=this.fonts[us].monoCase.node,Gr=this.fonts[us].monoCase.w,Ft.offsetWidth!==Gr?(gn-=1,this.fonts[us].loaded=!0):(Ft=this.fonts[us].sansCase.node,Gr=this.fonts[us].sansCase.w,Ft.offsetWidth!==Gr&&(gn-=1,this.fonts[us].loaded=!0)),this.fonts[us].loaded&&(this.fonts[us].sansCase.parent.parentNode.removeChild(this.fonts[us].sansCase.parent),this.fonts[us].monoCase.parent.parentNode.removeChild(this.fonts[us].monoCase.parent)));gn!==0&&Date.now()-this.initTime<e?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)}function gt(us,hn){var Ft=document.body&&hn?"svg":"canvas",Gr,gn=getFontProperties(us);if(Ft==="svg"){var un=createNS("text");un.style.fontSize="100px",un.setAttribute("font-family",us.fFamily),un.setAttribute("font-style",gn.style),un.setAttribute("font-weight",gn.weight),un.textContent="1",us.fClass?(un.style.fontFamily="inherit",un.setAttribute("class",us.fClass)):un.style.fontFamily=us.fFamily,hn.appendChild(un),Gr=un}else{var Zn=new OffscreenCanvas(500,500).getContext("2d");Zn.font=gn.style+" "+gn.weight+" 100px "+us.fFamily,Gr=Zn}function xu(ou){return Ft==="svg"?(Gr.textContent=ou,Gr.getComputedTextLength()):Gr.measureText(ou).width}return{measureText:xu}}function wt(us,hn){if(!us){this.isLoaded=!0;return}if(this.chars){this.isLoaded=!0,this.fonts=us.list;return}if(!document.body){this.isLoaded=!0,us.list.forEach(function(P0){P0.helper=gt(P0),P0.cache={}}),this.fonts=us.list;return}var Ft=us.list,Gr,gn=Ft.length,un=gn;for(Gr=0;Gr<gn;Gr+=1){var Zn=!0,xu,ou;if(Ft[Gr].loaded=!1,Ft[Gr].monoCase=st(Ft[Gr].fFamily,"monospace"),Ft[Gr].sansCase=st(Ft[Gr].fFamily,"sans-serif"),!Ft[Gr].fPath)Ft[Gr].loaded=!0,un-=1;else if(Ft[Gr].fOrigin==="p"||Ft[Gr].origin===3){if(xu=document.querySelectorAll('style[f-forigin="p"][f-family="'+Ft[Gr].fFamily+'"], style[f-origin="3"][f-family="'+Ft[Gr].fFamily+'"]'),xu.length>0&&(Zn=!1),Zn){var sp=createTag("style");sp.setAttribute("f-forigin",Ft[Gr].fOrigin),sp.setAttribute("f-origin",Ft[Gr].origin),sp.setAttribute("f-family",Ft[Gr].fFamily),sp.type="text/css",sp.innerText="@font-face {font-family: "+Ft[Gr].fFamily+"; font-style: normal; src: url('"+Ft[Gr].fPath+"');}",hn.appendChild(sp)}}else if(Ft[Gr].fOrigin==="g"||Ft[Gr].origin===1){for(xu=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),ou=0;ou<xu.length;ou+=1)xu[ou].href.indexOf(Ft[Gr].fPath)!==-1&&(Zn=!1);if(Zn){var wu=createTag("link");wu.setAttribute("f-forigin",Ft[Gr].fOrigin),wu.setAttribute("f-origin",Ft[Gr].origin),wu.type="text/css",wu.rel="stylesheet",wu.href=Ft[Gr].fPath,document.body.appendChild(wu)}}else if(Ft[Gr].fOrigin==="t"||Ft[Gr].origin===2){for(xu=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),ou=0;ou<xu.length;ou+=1)Ft[Gr].fPath===xu[ou].src&&(Zn=!1);if(Zn){var l1=createTag("link");l1.setAttribute("f-forigin",Ft[Gr].fOrigin),l1.setAttribute("f-origin",Ft[Gr].origin),l1.setAttribute("rel","stylesheet"),l1.setAttribute("href",Ft[Gr].fPath),hn.appendChild(l1)}}Ft[Gr].helper=gt(Ft[Gr],hn),Ft[Gr].cache={},this.fonts.push(Ft[Gr])}un===0?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}function yt(us){if(us){this.chars||(this.chars=[]);var hn,Ft=us.length,Gr,gn=this.chars.length,un;for(hn=0;hn<Ft;hn+=1){for(Gr=0,un=!1;Gr<gn;)this.chars[Gr].style===us[hn].style&&this.chars[Gr].fFamily===us[hn].fFamily&&this.chars[Gr].ch===us[hn].ch&&(un=!0),Gr+=1;un||(this.chars.push(us[hn]),gn+=1)}}}function At(us,hn,Ft){for(var Gr=0,gn=this.chars.length;Gr<gn;){if(this.chars[Gr].ch===us&&this.chars[Gr].style===hn&&this.chars[Gr].fFamily===Ft)return this.chars[Gr];Gr+=1}return(typeof us=="string"&&us.charCodeAt(0)!==13||!us)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",us,hn,Ft)),i}function Ct(us,hn,Ft){var Gr=this.getFontByName(hn),gn=us;if(!Gr.cache[gn]){var un=Gr.helper;if(us===" "){var Zn=un.measureText("|"+us+"|"),xu=un.measureText("||");Gr.cache[gn]=(Zn-xu)/100}else Gr.cache[gn]=un.measureText(us)/100}return Gr.cache[gn]*Ft}function Tt(us){for(var hn=0,Ft=this.fonts.length;hn<Ft;){if(this.fonts[hn].fName===us)return this.fonts[hn];hn+=1}return this.fonts[0]}function kt(us){var hn=0,Ft=us.charCodeAt(0);if(Ft>=55296&&Ft<=56319){var Gr=us.charCodeAt(1);Gr>=56320&&Gr<=57343&&(hn=(Ft-55296)*1024+Gr-56320+65536)}return hn}function Pt(us,hn){var Ft=us.toString(16)+hn.toString(16);return $.indexOf(Ft)!==-1}function It(us){return us===b}function Lt(us){return us===g}function Nt(us){var hn=kt(us);return hn>=j&&hn<=_e}function Ht(us){return Nt(us.substr(0,2))&&Nt(us.substr(2,2))}function dr(us){return s.indexOf(us)!==-1}function hs(us,hn){var Ft=kt(us.substr(hn,2));if(Ft!==a)return!1;var Gr=0;for(hn+=2;Gr<5;){if(Ft=kt(us.substr(hn,2)),Ft<c||Ft>d)return!1;Gr+=1,hn+=2}return kt(us.substr(hn,2))===o}function _s(){this.isLoaded=!0}var ds=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};ds.isModifier=Pt,ds.isZeroWidthJoiner=It,ds.isFlagEmoji=Ht,ds.isRegionalCode=Nt,ds.isCombinedCharacter=dr,ds.isRegionalFlag=hs,ds.isVariationSelector=Lt,ds.BLACK_FLAG_CODE_POINT=a;var Nn={addChars:yt,addFonts:wt,getCharData:At,getFontByName:Tt,measureText:Ct,checkLoadedFonts:ut,setIsLoaded:_s};return ds.prototype=Nn,ds}();function SlotManager(e){this.animationData=e}SlotManager.prototype.getProp=function(e){return this.animationData.slots&&this.animationData.slots[e.sid]?Object.assign(e,this.animationData.slots[e.sid].p):e};function slotFactory(e){return new SlotManager(e)}function RenderableElement(){}RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(i){this.renderableComponents.indexOf(i)===-1&&this.renderableComponents.push(i)},removeRenderableComponent:function(i){this.renderableComponents.indexOf(i)!==-1&&this.renderableComponents.splice(this.renderableComponents.indexOf(i),1)},prepareRenderableFrame:function(i){this.checkLayerLimits(i)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(i){this.data.ip-this.data.st<=i&&this.data.op-this.data.st>i?this.isInRange!==!0&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):this.isInRange!==!1&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var i,s=this.renderableComponents.length;for(i=0;i<s;i+=1)this.renderableComponents[i].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return this.data.ty===5?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=function(){var e={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(i){return e[i]||""}}();function SliderEffect(e,i,s){this.p=PropertyFactory.getProp(i,e.v,0,0,s)}function AngleEffect(e,i,s){this.p=PropertyFactory.getProp(i,e.v,0,0,s)}function ColorEffect(e,i,s){this.p=PropertyFactory.getProp(i,e.v,1,0,s)}function PointEffect(e,i,s){this.p=PropertyFactory.getProp(i,e.v,1,0,s)}function LayerIndexEffect(e,i,s){this.p=PropertyFactory.getProp(i,e.v,0,0,s)}function MaskIndexEffect(e,i,s){this.p=PropertyFactory.getProp(i,e.v,0,0,s)}function CheckboxEffect(e,i,s){this.p=PropertyFactory.getProp(i,e.v,0,0,s)}function NoValueEffect(){this.p={}}function EffectsManager(e,i){var s=e.ef||[];this.effectElements=[];var a,o=s.length,c;for(a=0;a<o;a+=1)c=new GroupEffect(s[a],i),this.effectElements.push(c)}function GroupEffect(e,i){this.init(e,i)}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(e,i){this.data=e,this.effectElements=[],this.initDynamicPropertyContainer(i);var s,a=this.data.ef.length,o,c=this.data.ef;for(s=0;s<a;s+=1){switch(o=null,c[s].ty){case 0:o=new SliderEffect(c[s],i,this);break;case 1:o=new AngleEffect(c[s],i,this);break;case 2:o=new ColorEffect(c[s],i,this);break;case 3:o=new PointEffect(c[s],i,this);break;case 4:case 7:o=new CheckboxEffect(c[s],i,this);break;case 10:o=new LayerIndexEffect(c[s],i,this);break;case 11:o=new MaskIndexEffect(c[s],i,this);break;case 5:o=new EffectsManager(c[s],i);break;default:o=new NoValueEffect(c[s]);break}o&&this.effectElements.push(o)}};function BaseElement(){}BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var i=0,s=this.data.masksProperties.length;i<s;){if(this.data.masksProperties[i].mode!=="n"&&this.data.masksProperties[i].cl!==!1)return!0;i+=1}return!1},initExpressions:function(){var i=getExpressionInterfaces();if(i){var s=i("layer"),a=i("effects"),o=i("shape"),c=i("text"),d=i("comp");this.layerInterface=s(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var g=a.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(g),this.data.ty===0||this.data.xt?this.compInterface=d(this):this.data.ty===4?(this.layerInterface.shapeInterface=o(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):this.data.ty===5&&(this.layerInterface.textInterface=c(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var i=getBlendMode(this.data.bm),s=this.baseElement||this.layerElement;s.style["mix-blend-mode"]=i},initBaseData:function(i,s,a){this.globalData=s,this.comp=a,this.data=i,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}};function FrameElement(){}FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(i,s){var a,o=this.dynamicProperties.length;for(a=0;a<o;a+=1)(s||this._isParent&&this.dynamicProperties[a].propType==="transform")&&(this.dynamicProperties[a].getValue(),this.dynamicProperties[a]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(i){this.dynamicProperties.indexOf(i)===-1&&this.dynamicProperties.push(i)}};function FootageElement(e,i,s){this.initFrame(),this.initRenderable(),this.assetData=i.getAssetData(e.refId),this.footageData=i.imageLoader.getAsset(this.assetData),this.initBaseData(e,i,s)}FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var e=getExpressionInterfaces();if(e){var i=e("footage");this.layerInterface=i(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData};function AudioElement(e,i,s){this.initFrame(),this.initRenderable(),this.assetData=i.getAssetData(e.refId),this.initBaseData(e,i,s),this._isPlaying=!1,this._canPlay=!1;var a=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(a),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,i.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,e.au&&e.au.lv?e.au.lv:{k:[100]},1,.01,this)}AudioElement.prototype.prepareFrame=function(e){if(this.prepareRenderableFrame(e,!0),this.prepareProperties(e,!0),this.tm._placeholder)this._currentTime=e/this.data.sr;else{var i=this.tm.v;this._currentTime=i}this._volume=this.lv.v[0];var s=this._volume*this._volumeMultiplier;this._previousVolume!==s&&(this._previousVolume=s,this.audio.volume(s))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(e){this.audio.rate(e)},AudioElement.prototype.volume=function(e){this._volumeMultiplier=e,this._previousVolume=e*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){};function BaseRenderer(){}BaseRenderer.prototype.checkLayers=function(e){var i,s=this.layers.length,a;for(this.completeLayers=!0,i=s-1;i>=0;i-=1)this.elements[i]||(a=this.layers[i],a.ip-a.st<=e-this.layers[i].st&&a.op-a.st>e-this.layers[i].st&&this.buildItem(i)),this.completeLayers=this.elements[i]?this.completeLayers:!1;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(e){switch(e.ty){case 2:return this.createImage(e);case 0:return this.createComp(e);case 1:return this.createSolid(e);case 3:return this.createNull(e);case 4:return this.createShape(e);case 5:return this.createText(e);case 6:return this.createAudio(e);case 13:return this.createCamera(e);case 15:return this.createFootage(e);default:return this.createNull(e)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(e){return new AudioElement(e,this.globalData,this)},BaseRenderer.prototype.createFootage=function(e){return new FootageElement(e,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var e,i=this.layers.length;for(e=0;e<i;e+=1)this.buildItem(e);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(e){this.completeLayers=!1;var i,s=e.length,a,o=this.layers.length;for(i=0;i<s;i+=1)for(a=0;a<o;){if(this.layers[a].id===e[i].id){this.layers[a]=e[i];break}a+=1}},BaseRenderer.prototype.setProjectInterface=function(e){this.globalData.projectInterface=e},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(e,i,s){for(var a=this.elements,o=this.layers,c=0,d=o.length;c<d;)o[c].ind==i&&(!a[c]||a[c]===!0?(this.buildItem(c),this.addPendingElement(e)):(s.push(a[c]),a[c].setAsParent(),o[c].parent!==void 0?this.buildElementParenting(e,o[c].parent,s):e.setHierarchy(s))),c+=1},BaseRenderer.prototype.addPendingElement=function(e){this.pendingElements.push(e)},BaseRenderer.prototype.searchExtraCompositions=function(e){var i,s=e.length;for(i=0;i<s;i+=1)if(e[i].xt){var a=this.createComp(e[i]);a.initExpressions(),this.globalData.projectInterface.registerComposition(a)}},BaseRenderer.prototype.getElementById=function(e){var i,s=this.elements.length;for(i=0;i<s;i+=1)if(this.elements[i].data.ind===e)return this.elements[i];return null},BaseRenderer.prototype.getElementByPath=function(e){var i=e.shift(),s;if(typeof i=="number")s=this.elements[i];else{var a,o=this.elements.length;for(a=0;a<o;a+=1)if(this.elements[a].data.nm===i){s=this.elements[a];break}}return e.length===0?s:s.getElementByPath(e)},BaseRenderer.prototype.setupGlobalData=function(e,i){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(e),this.globalData.fontManager.addChars(e.chars),this.globalData.fontManager.addFonts(e.fonts,i),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=e.fr,this.globalData.nm=e.nm,this.globalData.compSize={w:e.w,h:e.h}};var effectTypes={TRANSFORM_EFFECT:"transformEFfect"};function TransformElement(){}TransformElement.prototype={initTransform:function(){var i=new Matrix;this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_localMatMdf:!1,_opMdf:!1,mat:i,localMat:i,localOpacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var i,s=this.finalTransform.mat,a=0,o=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;a<o;){if(this.hierarchy[a].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}a+=1}if(this.finalTransform._matMdf)for(i=this.finalTransform.mProp.v.props,s.cloneFromProps(i),a=0;a<o;a+=1)s.multiply(this.hierarchy[a].finalTransform.mProp.v)}this.finalTransform._matMdf&&(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v)},renderLocalTransform:function(){if(this.localTransforms){var i=0,s=this.localTransforms.length;if(this.finalTransform._localMatMdf=this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;i<s;)this.localTransforms[i]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[i]._opMdf&&!this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v,this.finalTransform._opMdf=!0),i+=1;if(this.finalTransform._localMatMdf){var a=this.finalTransform.localMat;for(this.localTransforms[0].matrix.clone(a),i=1;i<s;i+=1){var o=this.localTransforms[i].matrix;a.multiply(o)}a.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){var c=this.finalTransform.localOpacity;for(i=0;i<s;i+=1)c*=this.localTransforms[i].opacity*.01;this.finalTransform.localOpacity=c}}},searchEffectTransforms:function(){if(this.renderableEffectsManager){var i=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);if(i.length){this.localTransforms=[],this.finalTransform.localMat=new Matrix;var s=0,a=i.length;for(s=0;s<a;s+=1)this.localTransforms.push(i[s])}}},globalToLocal:function(i){var s=[];s.push(this.finalTransform);for(var a=!0,o=this.comp;a;)o.finalTransform?(o.data.hasMask&&s.splice(0,0,o.finalTransform),o=o.comp):a=!1;var c,d=s.length,g;for(c=0;c<d;c+=1)g=s[c].mat.applyToPointArray(0,0,0),i=[i[0]-g[0],i[1]-g[1],0];return i},mHelper:new Matrix};function MaskElement(e,i,s){this.data=e,this.element=i,this.globalData=s,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var a=this.globalData.defs,o,c=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(c),this.solidPath="";var d,g=this.masksProperties,b=0,j=[],_e,$,rt=createElementID(),st,ut,gt,wt,yt="clipPath",At="clip-path";for(o=0;o<c;o+=1)if((g[o].mode!=="a"&&g[o].mode!=="n"||g[o].inv||g[o].o.k!==100||g[o].o.x)&&(yt="mask",At="mask"),(g[o].mode==="s"||g[o].mode==="i")&&b===0?(st=createNS("rect"),st.setAttribute("fill","#ffffff"),st.setAttribute("width",this.element.comp.data.w||0),st.setAttribute("height",this.element.comp.data.h||0),j.push(st)):st=null,d=createNS("path"),g[o].mode==="n")this.viewData[o]={op:PropertyFactory.getProp(this.element,g[o].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,g[o],3),elem:d,lastPath:""},a.appendChild(d);else{b+=1,d.setAttribute("fill",g[o].mode==="s"?"#000000":"#ffffff"),d.setAttribute("clip-rule","nonzero");var Ct;if(g[o].x.k!==0?(yt="mask",At="mask",wt=PropertyFactory.getProp(this.element,g[o].x,0,null,this.element),Ct=createElementID(),ut=createNS("filter"),ut.setAttribute("id",Ct),gt=createNS("feMorphology"),gt.setAttribute("operator","erode"),gt.setAttribute("in","SourceGraphic"),gt.setAttribute("radius","0"),ut.appendChild(gt),a.appendChild(ut),d.setAttribute("stroke",g[o].mode==="s"?"#000000":"#ffffff")):(gt=null,wt=null),this.storedData[o]={elem:d,x:wt,expan:gt,lastPath:"",lastOperator:"",filterId:Ct,lastRadius:0},g[o].mode==="i"){$=j.length;var Tt=createNS("g");for(_e=0;_e<$;_e+=1)Tt.appendChild(j[_e]);var kt=createNS("mask");kt.setAttribute("mask-type","alpha"),kt.setAttribute("id",rt+"_"+b),kt.appendChild(d),a.appendChild(kt),Tt.setAttribute("mask","url("+getLocationHref()+"#"+rt+"_"+b+")"),j.length=0,j.push(Tt)}else j.push(d);g[o].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[o]={elem:d,lastPath:"",op:PropertyFactory.getProp(this.element,g[o].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,g[o],3),invRect:st},this.viewData[o].prop.k||this.drawPath(g[o],this.viewData[o].prop.v,this.viewData[o])}for(this.maskElement=createNS(yt),c=j.length,o=0;o<c;o+=1)this.maskElement.appendChild(j[o]);b>0&&(this.maskElement.setAttribute("id",rt),this.element.maskedElement.setAttribute(At,"url("+getLocationHref()+"#"+rt+")"),a.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}MaskElement.prototype.getMaskProperty=function(e){return this.viewData[e].prop},MaskElement.prototype.renderFrame=function(e){var i=this.element.finalTransform.mat,s,a=this.masksProperties.length;for(s=0;s<a;s+=1)if((this.viewData[s].prop._mdf||e)&&this.drawPath(this.masksProperties[s],this.viewData[s].prop.v,this.viewData[s]),(this.viewData[s].op._mdf||e)&&this.viewData[s].elem.setAttribute("fill-opacity",this.viewData[s].op.v),this.masksProperties[s].mode!=="n"&&(this.viewData[s].invRect&&(this.element.finalTransform.mProp._mdf||e)&&this.viewData[s].invRect.setAttribute("transform",i.getInverseMatrix().to2dCSS()),this.storedData[s].x&&(this.storedData[s].x._mdf||e))){var o=this.storedData[s].expan;this.storedData[s].x.v<0?(this.storedData[s].lastOperator!=="erode"&&(this.storedData[s].lastOperator="erode",this.storedData[s].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[s].filterId+")")),o.setAttribute("radius",-this.storedData[s].x.v)):(this.storedData[s].lastOperator!=="dilate"&&(this.storedData[s].lastOperator="dilate",this.storedData[s].elem.setAttribute("filter",null)),this.storedData[s].elem.setAttribute("stroke-width",this.storedData[s].x.v*2))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var e="M0,0 ";return e+=" h"+this.globalData.compSize.w,e+=" v"+this.globalData.compSize.h,e+=" h-"+this.globalData.compSize.w,e+=" v-"+this.globalData.compSize.h+" ",e},MaskElement.prototype.drawPath=function(e,i,s){var a=" M"+i.v[0][0]+","+i.v[0][1],o,c;for(c=i._length,o=1;o<c;o+=1)a+=" C"+i.o[o-1][0]+","+i.o[o-1][1]+" "+i.i[o][0]+","+i.i[o][1]+" "+i.v[o][0]+","+i.v[o][1];if(i.c&&c>1&&(a+=" C"+i.o[o-1][0]+","+i.o[o-1][1]+" "+i.i[0][0]+","+i.i[0][1]+" "+i.v[0][0]+","+i.v[0][1]),s.lastPath!==a){var d="";s.elem&&(i.c&&(d=e.inv?this.solidPath+a:a),s.elem.setAttribute("d",d)),s.lastPath=a}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var e={};e.createFilter=i,e.createAlphaToLuminanceFilter=s;function i(a,o){var c=createNS("filter");return c.setAttribute("id",a),o!==!0&&(c.setAttribute("filterUnits","objectBoundingBox"),c.setAttribute("x","0%"),c.setAttribute("y","0%"),c.setAttribute("width","100%"),c.setAttribute("height","100%")),c}function s(){var a=createNS("feColorMatrix");return a.setAttribute("type","matrix"),a.setAttribute("color-interpolation-filters","sRGB"),a.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),a}return e}(),featureSupport=function(){var e={maskType:!0,svgLumaHidden:!0,offscreenCanvas:typeof OffscreenCanvas<"u"};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(e.maskType=!1),/firefox/i.test(navigator.userAgent)&&(e.svgLumaHidden=!1),e}(),registeredEffects$1={},idPrefix="filter_result_";function SVGEffects(e){var i,s="SourceGraphic",a=e.data.ef?e.data.ef.length:0,o=createElementID(),c=filtersFactory.createFilter(o,!0),d=0;this.filters=[];var g;for(i=0;i<a;i+=1){g=null;var b=e.data.ef[i].ty;if(registeredEffects$1[b]){var j=registeredEffects$1[b].effect;g=new j(c,e.effectsManager.effectElements[i],e,idPrefix+d,s),s=idPrefix+d,registeredEffects$1[b].countsAsEffect&&(d+=1)}g&&this.filters.push(g)}d&&(e.globalData.defs.appendChild(c),e.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+o+")")),this.filters.length&&e.addRenderableComponent(this)}SVGEffects.prototype.renderFrame=function(e){var i,s=this.filters.length;for(i=0;i<s;i+=1)this.filters[i].renderFrame(e)},SVGEffects.prototype.getEffects=function(e){var i,s=this.filters.length,a=[];for(i=0;i<s;i+=1)this.filters[i].type===e&&a.push(this.filters[i]);return a};function registerEffect$1(e,i,s){registeredEffects$1[e]={effect:i,countsAsEffect:s}}function SVGBaseElement(){}SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var i=null;if(this.data.td){this.matteMasks={};var s=createNS("g");s.setAttribute("id",this.layerId),s.appendChild(this.layerElement),i=s,this.globalData.defs.appendChild(s)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),i=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.ty===0&&!this.data.hd){var a=createNS("clipPath"),o=createNS("path");o.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var c=createElementID();if(a.setAttribute("id",c),a.appendChild(o),this.globalData.defs.appendChild(a),this.checkMasks()){var d=createNS("g");d.setAttribute("clip-path","url("+getLocationHref()+"#"+c+")"),d.appendChild(this.layerElement),this.transformedElement=d,i?i.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+c+")")}this.data.bm!==0&&this.setBlendMode()},renderElement:function(){this.finalTransform._localMatMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.localOpacity)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this),this.searchEffectTransforms()},getMatte:function(i){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[i]){var s=this.layerId+"_"+i,a,o,c,d;if(i===1||i===3){var g=createNS("mask");g.setAttribute("id",s),g.setAttribute("mask-type",i===3?"luminance":"alpha"),c=createNS("use"),c.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),g.appendChild(c),this.globalData.defs.appendChild(g),!featureSupport.maskType&&i===1&&(g.setAttribute("mask-type","luminance"),a=createElementID(),o=filtersFactory.createFilter(a),this.globalData.defs.appendChild(o),o.appendChild(filtersFactory.createAlphaToLuminanceFilter()),d=createNS("g"),d.appendChild(c),g.appendChild(d),d.setAttribute("filter","url("+getLocationHref()+"#"+a+")"))}else if(i===2){var b=createNS("mask");b.setAttribute("id",s),b.setAttribute("mask-type","alpha");var j=createNS("g");b.appendChild(j),a=createElementID(),o=filtersFactory.createFilter(a);var _e=createNS("feComponentTransfer");_e.setAttribute("in","SourceGraphic"),o.appendChild(_e);var $=createNS("feFuncA");$.setAttribute("type","table"),$.setAttribute("tableValues","1.0 0.0"),_e.appendChild($),this.globalData.defs.appendChild(o);var rt=createNS("rect");rt.setAttribute("width",this.comp.data.w),rt.setAttribute("height",this.comp.data.h),rt.setAttribute("x","0"),rt.setAttribute("y","0"),rt.setAttribute("fill","#ffffff"),rt.setAttribute("opacity","0"),j.setAttribute("filter","url("+getLocationHref()+"#"+a+")"),j.appendChild(rt),c=createNS("use"),c.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),j.appendChild(c),featureSupport.maskType||(b.setAttribute("mask-type","luminance"),o.appendChild(filtersFactory.createAlphaToLuminanceFilter()),d=createNS("g"),j.appendChild(rt),d.appendChild(this.layerElement),j.appendChild(d)),this.globalData.defs.appendChild(b)}this.matteMasks[i]=s}return this.matteMasks[i]},setMatte:function(i){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+i+")")}};function HierarchyElement(){}HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(i){this.hierarchy=i},setAsParent:function(){this._isParent=!0},checkParenting:function(){this.data.parent!==void 0&&this.comp.buildElementParenting(this,this.data.parent,[])}};function RenderableDOMElement(){}(function(){var e={initElement:function(s,a,o){this.initFrame(),this.initBaseData(s,a,o),this.initTransform(s,a,o),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){if(!this.hidden&&(!this.isInRange||this.isTransparent)){var s=this.baseElement||this.layerElement;s.style.display="none",this.hidden=!0}},show:function(){if(this.isInRange&&!this.isTransparent){if(!this.data.hd){var s=this.baseElement||this.layerElement;s.style.display="block"}this.hidden=!1,this._isFirstFrame=!0}},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(s){this._mdf=!1,this.prepareRenderableFrame(s),this.prepareProperties(s,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}};extendPrototype([RenderableElement,createProxyFunction(e)],RenderableDOMElement)})();function IImageElement(e,i,s){this.assetData=i.getAssetData(e.refId),this.assetData&&this.assetData.sid&&(this.assetData=i.slotManager.getProp(this.assetData)),this.initElement(e,i,s),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var e=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",e),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect};function ProcessedElement(e,i){this.elem=e,this.pos=i}function IShapeElement(){}IShapeElement.prototype={addShapeToModifiers:function(i){var s,a=this.shapeModifiers.length;for(s=0;s<a;s+=1)this.shapeModifiers[s].addShape(i)},isShapeInAnimatedModifiers:function(i){for(var s=0,a=this.shapeModifiers.length;s<a;)if(this.shapeModifiers[s].isAnimatedWithShape(i))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var i,s=this.shapes.length;for(i=0;i<s;i+=1)this.shapes[i].sh.reset();s=this.shapeModifiers.length;var a;for(i=s-1;i>=0&&(a=this.shapeModifiers[i].processShapes(this._isFirstFrame),!a);i-=1);}},searchProcessedElement:function(i){for(var s=this.processedElements,a=0,o=s.length;a<o;){if(s[a].elem===i)return s[a].pos;a+=1}return 0},addProcessedElement:function(i,s){for(var a=this.processedElements,o=a.length;o;)if(o-=1,a[o].elem===i){a[o].pos=s;return}a.push(new ProcessedElement(i,s))},prepareFrame:function(i){this.prepareRenderableFrame(i),this.prepareProperties(i,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(e,i,s){this.caches=[],this.styles=[],this.transformers=e,this.lStr="",this.sh=s,this.lvl=i,this._isAnimated=!!s.k;for(var a=0,o=e.length;a<o;){if(e[a].mProps.dynamicProperties.length){this._isAnimated=!0;break}a+=1}}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0};function SVGStyleData(e,i){this.data=e,this.type=e.ty,this.d="",this.lvl=i,this._mdf=!1,this.closed=e.hd===!0,this.pElem=createNS("path"),this.msElem=null}SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1};function DashProperty(e,i,s,a){this.elem=e,this.frameId=-1,this.dataProps=createSizedArray(i.length),this.renderer=s,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",i.length?i.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(a);var o,c=i.length||0,d;for(o=0;o<c;o+=1)d=PropertyFactory.getProp(e,i[o].v,0,0,this),this.k=d.k||this.k,this.dataProps[o]={n:i[o].n,p:d};this.k||this.getValue(!0),this._isAnimated=this.k}DashProperty.prototype.getValue=function(e){if(!(this.elem.globalData.frameId===this.frameId&&!e)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||e,this._mdf)){var i=0,s=this.dataProps.length;for(this.renderer==="svg"&&(this.dashStr=""),i=0;i<s;i+=1)this.dataProps[i].n!=="o"?this.renderer==="svg"?this.dashStr+=" "+this.dataProps[i].p.v:this.dashArray[i]=this.dataProps[i].p.v:this.dashoffset[0]=this.dataProps[i].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty);function SVGStrokeStyleData(e,i,s){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(e,i.o,0,.01,this),this.w=PropertyFactory.getProp(e,i.w,0,null,this),this.d=new DashProperty(e,i.d||{},"svg",this),this.c=PropertyFactory.getProp(e,i.c,1,255,this),this.style=s,this._isAnimated=!!this._isAnimated}extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData);function SVGFillStyleData(e,i,s){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(e,i.o,0,.01,this),this.c=PropertyFactory.getProp(e,i.c,1,255,this),this.style=s}extendPrototype([DynamicPropertyContainer],SVGFillStyleData);function SVGNoStyleData(e,i,s){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.style=s}extendPrototype([DynamicPropertyContainer],SVGNoStyleData);function GradientProperty(e,i,s){this.data=i,this.c=createTypedArray("uint8c",i.p*4);var a=i.k.k[0].s?i.k.k[0].s.length-i.p*4:i.k.k.length-i.p*4;this.o=createTypedArray("float32",a),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=a,this.initDynamicPropertyContainer(s),this.prop=PropertyFactory.getProp(e,i.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}GradientProperty.prototype.comparePoints=function(e,i){for(var s=0,a=this.o.length/2,o;s<a;){if(o=Math.abs(e[s*4]-e[i*4+s*2]),o>.01)return!1;s+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!==this.c.length/4)return!1;if(this.data.k.k[0].s)for(var e=0,i=this.data.k.k.length;e<i;){if(!this.comparePoints(this.data.k.k[e].s,this.data.p))return!1;e+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(e){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||e){var i,s=this.data.p*4,a,o;for(i=0;i<s;i+=1)a=i%4===0?100:255,o=Math.round(this.prop.v[i]*a),this.c[i]!==o&&(this.c[i]=o,this._cmdf=!e);if(this.o.length)for(s=this.prop.v.length,i=this.data.p*4;i<s;i+=1)a=i%2===0?100:1,o=i%2===0?Math.round(this.prop.v[i]*100):this.prop.v[i],this.o[i-this.data.p*4]!==o&&(this.o[i-this.data.p*4]=o,this._omdf=!e);this._mdf=!e}},extendPrototype([DynamicPropertyContainer],GradientProperty);function SVGGradientFillStyleData(e,i,s){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.initGradientData(e,i,s)}SVGGradientFillStyleData.prototype.initGradientData=function(e,i,s){this.o=PropertyFactory.getProp(e,i.o,0,.01,this),this.s=PropertyFactory.getProp(e,i.s,1,null,this),this.e=PropertyFactory.getProp(e,i.e,1,null,this),this.h=PropertyFactory.getProp(e,i.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(e,i.a||{k:0},0,degToRads,this),this.g=new GradientProperty(e,i.g,this),this.style=s,this.stops=[],this.setGradientData(s.pElem,i),this.setGradientOpacity(i,s),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(e,i){var s=createElementID(),a=createNS(i.t===1?"linearGradient":"radialGradient");a.setAttribute("id",s),a.setAttribute("spreadMethod","pad"),a.setAttribute("gradientUnits","userSpaceOnUse");var o=[],c,d,g;for(g=i.g.p*4,d=0;d<g;d+=4)c=createNS("stop"),a.appendChild(c),o.push(c);e.setAttribute(i.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+s+")"),this.gf=a,this.cst=o},SVGGradientFillStyleData.prototype.setGradientOpacity=function(e,i){if(this.g._hasOpacity&&!this.g._collapsable){var s,a,o,c=createNS("mask"),d=createNS("path");c.appendChild(d);var g=createElementID(),b=createElementID();c.setAttribute("id",b);var j=createNS(e.t===1?"linearGradient":"radialGradient");j.setAttribute("id",g),j.setAttribute("spreadMethod","pad"),j.setAttribute("gradientUnits","userSpaceOnUse"),o=e.g.k.k[0].s?e.g.k.k[0].s.length:e.g.k.k.length;var _e=this.stops;for(a=e.g.p*4;a<o;a+=2)s=createNS("stop"),s.setAttribute("stop-color","rgb(255,255,255)"),j.appendChild(s),_e.push(s);d.setAttribute(e.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+g+")"),e.ty==="gs"&&(d.setAttribute("stroke-linecap",lineCapEnum[e.lc||2]),d.setAttribute("stroke-linejoin",lineJoinEnum[e.lj||2]),e.lj===1&&d.setAttribute("stroke-miterlimit",e.ml)),this.of=j,this.ms=c,this.ost=_e,this.maskId=b,i.msElem=d}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData);function SVGGradientStrokeStyleData(e,i,s){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(e,i.w,0,null,this),this.d=new DashProperty(e,i.d||{},"svg",this),this.initGradientData(e,i,s),this._isAnimated=!!this._isAnimated}extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(e,i,s){this.transform={mProps:e,op:i,container:s},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}var buildShapeString=function(i,s,a,o){if(s===0)return"";var c=i.o,d=i.i,g=i.v,b,j=" M"+o.applyToPointStringified(g[0][0],g[0][1]);for(b=1;b<s;b+=1)j+=" C"+o.applyToPointStringified(c[b-1][0],c[b-1][1])+" "+o.applyToPointStringified(d[b][0],d[b][1])+" "+o.applyToPointStringified(g[b][0],g[b][1]);return a&&s&&(j+=" C"+o.applyToPointStringified(c[b-1][0],c[b-1][1])+" "+o.applyToPointStringified(d[0][0],d[0][1])+" "+o.applyToPointStringified(g[0][0],g[0][1]),j+="z"),j},SVGElementsRenderer=function(){var e=new Matrix,i=new Matrix,s={createRenderFunction:a};function a($){switch($.ty){case"fl":return g;case"gf":return j;case"gs":return b;case"st":return _e;case"sh":case"el":case"rc":case"sr":return d;case"tr":return o;case"no":return c;default:return null}}function o($,rt,st){(st||rt.transform.op._mdf)&&rt.transform.container.setAttribute("opacity",rt.transform.op.v),(st||rt.transform.mProps._mdf)&&rt.transform.container.setAttribute("transform",rt.transform.mProps.v.to2dCSS())}function c(){}function d($,rt,st){var ut,gt,wt,yt,At,Ct,Tt=rt.styles.length,kt=rt.lvl,Pt,It,Lt,Nt;for(Ct=0;Ct<Tt;Ct+=1){if(yt=rt.sh._mdf||st,rt.styles[Ct].lvl<kt){for(It=i.reset(),Lt=kt-rt.styles[Ct].lvl,Nt=rt.transformers.length-1;!yt&&Lt>0;)yt=rt.transformers[Nt].mProps._mdf||yt,Lt-=1,Nt-=1;if(yt)for(Lt=kt-rt.styles[Ct].lvl,Nt=rt.transformers.length-1;Lt>0;)It.multiply(rt.transformers[Nt].mProps.v),Lt-=1,Nt-=1}else It=e;if(Pt=rt.sh.paths,gt=Pt._length,yt){for(wt="",ut=0;ut<gt;ut+=1)At=Pt.shapes[ut],At&&At._length&&(wt+=buildShapeString(At,At._length,At.c,It));rt.caches[Ct]=wt}else wt=rt.caches[Ct];rt.styles[Ct].d+=$.hd===!0?"":wt,rt.styles[Ct]._mdf=yt||rt.styles[Ct]._mdf}}function g($,rt,st){var ut=rt.style;(rt.c._mdf||st)&&ut.pElem.setAttribute("fill","rgb("+bmFloor(rt.c.v[0])+","+bmFloor(rt.c.v[1])+","+bmFloor(rt.c.v[2])+")"),(rt.o._mdf||st)&&ut.pElem.setAttribute("fill-opacity",rt.o.v)}function b($,rt,st){j($,rt,st),_e($,rt,st)}function j($,rt,st){var ut=rt.gf,gt=rt.g._hasOpacity,wt=rt.s.v,yt=rt.e.v;if(rt.o._mdf||st){var At=$.ty==="gf"?"fill-opacity":"stroke-opacity";rt.style.pElem.setAttribute(At,rt.o.v)}if(rt.s._mdf||st){var Ct=$.t===1?"x1":"cx",Tt=Ct==="x1"?"y1":"cy";ut.setAttribute(Ct,wt[0]),ut.setAttribute(Tt,wt[1]),gt&&!rt.g._collapsable&&(rt.of.setAttribute(Ct,wt[0]),rt.of.setAttribute(Tt,wt[1]))}var kt,Pt,It,Lt;if(rt.g._cmdf||st){kt=rt.cst;var Nt=rt.g.c;for(It=kt.length,Pt=0;Pt<It;Pt+=1)Lt=kt[Pt],Lt.setAttribute("offset",Nt[Pt*4]+"%"),Lt.setAttribute("stop-color","rgb("+Nt[Pt*4+1]+","+Nt[Pt*4+2]+","+Nt[Pt*4+3]+")")}if(gt&&(rt.g._omdf||st)){var Ht=rt.g.o;for(rt.g._collapsable?kt=rt.cst:kt=rt.ost,It=kt.length,Pt=0;Pt<It;Pt+=1)Lt=kt[Pt],rt.g._collapsable||Lt.setAttribute("offset",Ht[Pt*2]+"%"),Lt.setAttribute("stop-opacity",Ht[Pt*2+1])}if($.t===1)(rt.e._mdf||st)&&(ut.setAttribute("x2",yt[0]),ut.setAttribute("y2",yt[1]),gt&&!rt.g._collapsable&&(rt.of.setAttribute("x2",yt[0]),rt.of.setAttribute("y2",yt[1])));else{var dr;if((rt.s._mdf||rt.e._mdf||st)&&(dr=Math.sqrt(Math.pow(wt[0]-yt[0],2)+Math.pow(wt[1]-yt[1],2)),ut.setAttribute("r",dr),gt&&!rt.g._collapsable&&rt.of.setAttribute("r",dr)),rt.e._mdf||rt.h._mdf||rt.a._mdf||st){dr||(dr=Math.sqrt(Math.pow(wt[0]-yt[0],2)+Math.pow(wt[1]-yt[1],2)));var hs=Math.atan2(yt[1]-wt[1],yt[0]-wt[0]),_s=rt.h.v;_s>=1?_s=.99:_s<=-1&&(_s=-.99);var ds=dr*_s,Nn=Math.cos(hs+rt.a.v)*ds+wt[0],us=Math.sin(hs+rt.a.v)*ds+wt[1];ut.setAttribute("fx",Nn),ut.setAttribute("fy",us),gt&&!rt.g._collapsable&&(rt.of.setAttribute("fx",Nn),rt.of.setAttribute("fy",us))}}}function _e($,rt,st){var ut=rt.style,gt=rt.d;gt&&(gt._mdf||st)&&gt.dashStr&&(ut.pElem.setAttribute("stroke-dasharray",gt.dashStr),ut.pElem.setAttribute("stroke-dashoffset",gt.dashoffset[0])),rt.c&&(rt.c._mdf||st)&&ut.pElem.setAttribute("stroke","rgb("+bmFloor(rt.c.v[0])+","+bmFloor(rt.c.v[1])+","+bmFloor(rt.c.v[2])+")"),(rt.o._mdf||st)&&ut.pElem.setAttribute("stroke-opacity",rt.o.v),(rt.w._mdf||st)&&(ut.pElem.setAttribute("stroke-width",rt.w.v),ut.msElem&&ut.msElem.setAttribute("stroke-width",rt.w.v))}return s}();function SVGShapeElement(e,i,s){this.shapes=[],this.shapesData=e.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(e,i,s),this.prevViewData=[]}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var e,i=this.shapes.length,s,a,o=this.stylesList.length,c,d=[],g=!1;for(a=0;a<o;a+=1){for(c=this.stylesList[a],g=!1,d.length=0,e=0;e<i;e+=1)s=this.shapes[e],s.styles.indexOf(c)!==-1&&(d.push(s),g=s._isAnimated||g);d.length>1&&g&&this.setShapesAsAnimated(d)}},SVGShapeElement.prototype.setShapesAsAnimated=function(e){var i,s=e.length;for(i=0;i<s;i+=1)e[i].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(e,i){var s,a=new SVGStyleData(e,i),o=a.pElem;if(e.ty==="st")s=new SVGStrokeStyleData(this,e,a);else if(e.ty==="fl")s=new SVGFillStyleData(this,e,a);else if(e.ty==="gf"||e.ty==="gs"){var c=e.ty==="gf"?SVGGradientFillStyleData:SVGGradientStrokeStyleData;s=new c(this,e,a),this.globalData.defs.appendChild(s.gf),s.maskId&&(this.globalData.defs.appendChild(s.ms),this.globalData.defs.appendChild(s.of),o.setAttribute("mask","url("+getLocationHref()+"#"+s.maskId+")"))}else e.ty==="no"&&(s=new SVGNoStyleData(this,e,a));return(e.ty==="st"||e.ty==="gs")&&(o.setAttribute("stroke-linecap",lineCapEnum[e.lc||2]),o.setAttribute("stroke-linejoin",lineJoinEnum[e.lj||2]),o.setAttribute("fill-opacity","0"),e.lj===1&&o.setAttribute("stroke-miterlimit",e.ml)),e.r===2&&o.setAttribute("fill-rule","evenodd"),e.ln&&o.setAttribute("id",e.ln),e.cl&&o.setAttribute("class",e.cl),e.bm&&(o.style["mix-blend-mode"]=getBlendMode(e.bm)),this.stylesList.push(a),this.addToAnimatedContents(e,s),s},SVGShapeElement.prototype.createGroupElement=function(e){var i=new ShapeGroupData;return e.ln&&i.gr.setAttribute("id",e.ln),e.cl&&i.gr.setAttribute("class",e.cl),e.bm&&(i.gr.style["mix-blend-mode"]=getBlendMode(e.bm)),i},SVGShapeElement.prototype.createTransformElement=function(e,i){var s=TransformPropertyFactory.getTransformProperty(this,e,this),a=new SVGTransformData(s,s.o,i);return this.addToAnimatedContents(e,a),a},SVGShapeElement.prototype.createShapeElement=function(e,i,s){var a=4;e.ty==="rc"?a=5:e.ty==="el"?a=6:e.ty==="sr"&&(a=7);var o=ShapePropertyFactory.getShapeProp(this,e,a,this),c=new SVGShapeData(i,s,o);return this.shapes.push(c),this.addShapeToModifiers(c),this.addToAnimatedContents(e,c),c},SVGShapeElement.prototype.addToAnimatedContents=function(e,i){for(var s=0,a=this.animatedContents.length;s<a;){if(this.animatedContents[s].element===i)return;s+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(e),element:i,data:e})},SVGShapeElement.prototype.setElementStyles=function(e){var i=e.styles,s,a=this.stylesList.length;for(s=0;s<a;s+=1)this.stylesList[s].closed||i.push(this.stylesList[s])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var e,i=this.itemsData.length;for(e=0;e<i;e+=1)this.prevViewData[e]=this.itemsData[e];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),i=this.dynamicProperties.length,e=0;e<i;e+=1)this.dynamicProperties[e].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(e,i,s,a,o,c,d){var g=[].concat(c),b,j=e.length-1,_e,$,rt=[],st=[],ut,gt,wt;for(b=j;b>=0;b-=1){if(wt=this.searchProcessedElement(e[b]),wt?i[b]=s[wt-1]:e[b]._render=d,e[b].ty==="fl"||e[b].ty==="st"||e[b].ty==="gf"||e[b].ty==="gs"||e[b].ty==="no")wt?i[b].style.closed=!1:i[b]=this.createStyleElement(e[b],o),e[b]._render&&i[b].style.pElem.parentNode!==a&&a.appendChild(i[b].style.pElem),rt.push(i[b].style);else if(e[b].ty==="gr"){if(!wt)i[b]=this.createGroupElement(e[b]);else for($=i[b].it.length,_e=0;_e<$;_e+=1)i[b].prevViewData[_e]=i[b].it[_e];this.searchShapes(e[b].it,i[b].it,i[b].prevViewData,i[b].gr,o+1,g,d),e[b]._render&&i[b].gr.parentNode!==a&&a.appendChild(i[b].gr)}else e[b].ty==="tr"?(wt||(i[b]=this.createTransformElement(e[b],a)),ut=i[b].transform,g.push(ut)):e[b].ty==="sh"||e[b].ty==="rc"||e[b].ty==="el"||e[b].ty==="sr"?(wt||(i[b]=this.createShapeElement(e[b],g,o)),this.setElementStyles(i[b])):e[b].ty==="tm"||e[b].ty==="rd"||e[b].ty==="ms"||e[b].ty==="pb"||e[b].ty==="zz"||e[b].ty==="op"?(wt?(gt=i[b],gt.closed=!1):(gt=ShapeModifiers.getModifier(e[b].ty),gt.init(this,e[b]),i[b]=gt,this.shapeModifiers.push(gt)),st.push(gt)):e[b].ty==="rp"&&(wt?(gt=i[b],gt.closed=!0):(gt=ShapeModifiers.getModifier(e[b].ty),i[b]=gt,gt.init(this,e,b,i),this.shapeModifiers.push(gt),d=!1),st.push(gt));this.addProcessedElement(e[b],b+1)}for(j=rt.length,b=0;b<j;b+=1)rt[b].closed=!0;for(j=st.length,b=0;b<j;b+=1)st[b].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var e,i=this.stylesList.length;for(e=0;e<i;e+=1)this.stylesList[e].reset();for(this.renderShape(),e=0;e<i;e+=1)(this.stylesList[e]._mdf||this._isFirstFrame)&&(this.stylesList[e].msElem&&(this.stylesList[e].msElem.setAttribute("d",this.stylesList[e].d),this.stylesList[e].d="M0 0"+this.stylesList[e].d),this.stylesList[e].pElem.setAttribute("d",this.stylesList[e].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var e,i=this.animatedContents.length,s;for(e=0;e<i;e+=1)s=this.animatedContents[e],(this._isFirstFrame||s.element._isAnimated)&&s.data!==!0&&s.fn(s.data,s.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null};function LetterProps(e,i,s,a,o,c){this.o=e,this.sw=i,this.sc=s,this.fc=a,this.m=o,this.p=c,this._mdf={o:!0,sw:!!i,sc:!!s,fc:!!a,m:!0,p:!0}}LetterProps.prototype.update=function(e,i,s,a,o,c){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var d=!1;return this.o!==e&&(this.o=e,this._mdf.o=!0,d=!0),this.sw!==i&&(this.sw=i,this._mdf.sw=!0,d=!0),this.sc!==s&&(this.sc=s,this._mdf.sc=!0,d=!0),this.fc!==a&&(this.fc=a,this._mdf.fc=!0,d=!0),this.m!==o&&(this.m=o,this._mdf.m=!0,d=!0),c.length&&(this.p[0]!==c[0]||this.p[1]!==c[1]||this.p[4]!==c[4]||this.p[5]!==c[5]||this.p[12]!==c[12]||this.p[13]!==c[13])&&(this.p=c,this._mdf.p=!0,d=!0),d};function TextProperty(e,i){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,i.d&&i.d.sid&&(i.d=e.globalData.slotManager.getProp(i.d)),this.data=i,this.elem=e,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(e,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s]);return e},TextProperty.prototype.setCurrentData=function(e){e.__complete||this.completeTextData(e),this.currentData=e,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(e){this.effectsSequence.push(e),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(e){if(!((this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)&&!e)){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var i=this.currentData,s=this.keysIndex;if(this.lock){this.setCurrentData(this.currentData);return}this.lock=!0,this._mdf=!1;var a,o=this.effectsSequence.length,c=e||this.data.d.k[this.keysIndex].s;for(a=0;a<o;a+=1)s!==this.keysIndex?c=this.effectsSequence[a](c,c.t):c=this.effectsSequence[a](this.currentData,c.t);i!==c&&this.setCurrentData(c),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}},TextProperty.prototype.getKeyframeValue=function(){for(var e=this.data.d.k,i=this.elem.comp.renderedFrame,s=0,a=e.length;s<=a-1&&!(s===a-1||e[s+1].t>i);)s+=1;return this.keysIndex!==s&&(this.keysIndex=s),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(e){for(var i=[],s=0,a=e.length,o,c,d=!1,g=!1,b="";s<a;)d=g,g=!1,o=e.charCodeAt(s),b=e.charAt(s),FontManager.isCombinedCharacter(o)?d=!0:o>=55296&&o<=56319?FontManager.isRegionalFlag(e,s)?b=e.substr(s,14):(c=e.charCodeAt(s+1),c>=56320&&c<=57343&&(FontManager.isModifier(o,c)?(b=e.substr(s,2),d=!0):FontManager.isFlagEmoji(e.substr(s,4))?b=e.substr(s,4):b=e.substr(s,2))):o>56319?(c=e.charCodeAt(s+1),FontManager.isVariationSelector(o)&&(d=!0)):FontManager.isZeroWidthJoiner(o)&&(d=!0,g=!0),d?(i[i.length-1]+=b,d=!1):i.push(b),s+=b.length;return i},TextProperty.prototype.completeTextData=function(e){e.__complete=!0;var i=this.elem.globalData.fontManager,s=this.data,a=[],o,c,d,g=0,b,j=s.m.g,_e=0,$=0,rt=0,st=[],ut=0,gt=0,wt,yt,At=i.getFontByName(e.f),Ct,Tt=0,kt=getFontProperties(At);e.fWeight=kt.weight,e.fStyle=kt.style,e.finalSize=e.s,e.finalText=this.buildFinalText(e.t),c=e.finalText.length,e.finalLineHeight=e.lh;var Pt=e.tr/1e3*e.finalSize,It;if(e.sz)for(var Lt=!0,Nt=e.sz[0],Ht=e.sz[1],dr,hs;Lt;){hs=this.buildFinalText(e.t),dr=0,ut=0,c=hs.length,Pt=e.tr/1e3*e.finalSize;var _s=-1;for(o=0;o<c;o+=1)It=hs[o].charCodeAt(0),d=!1,hs[o]===" "?_s=o:(It===13||It===3)&&(ut=0,d=!0,dr+=e.finalLineHeight||e.finalSize*1.2),i.chars?(Ct=i.getCharData(hs[o],At.fStyle,At.fFamily),Tt=d?0:Ct.w*e.finalSize/100):Tt=i.measureText(hs[o],e.f,e.finalSize),ut+Tt>Nt&&hs[o]!==" "?(_s===-1?c+=1:o=_s,dr+=e.finalLineHeight||e.finalSize*1.2,hs.splice(o,_s===o?1:0,"\r"),_s=-1,ut=0):(ut+=Tt,ut+=Pt);dr+=At.ascent*e.finalSize/100,this.canResize&&e.finalSize>this.minimumFontSize&&Ht<dr?(e.finalSize-=1,e.finalLineHeight=e.finalSize*e.lh/e.s):(e.finalText=hs,c=e.finalText.length,Lt=!1)}ut=-Pt,Tt=0;var ds=0,Nn;for(o=0;o<c;o+=1)if(d=!1,Nn=e.finalText[o],It=Nn.charCodeAt(0),It===13||It===3?(ds=0,st.push(ut),gt=ut>gt?ut:gt,ut=-2*Pt,b="",d=!0,rt+=1):b=Nn,i.chars?(Ct=i.getCharData(Nn,At.fStyle,i.getFontByName(e.f).fFamily),Tt=d?0:Ct.w*e.finalSize/100):Tt=i.measureText(b,e.f,e.finalSize),Nn===" "?ds+=Tt+Pt:(ut+=Tt+Pt+ds,ds=0),a.push({l:Tt,an:Tt,add:_e,n:d,anIndexes:[],val:b,line:rt,animatorJustifyOffset:0}),j==2){if(_e+=Tt,b===""||b===" "||o===c-1){for((b===""||b===" ")&&(_e-=Tt);$<=o;)a[$].an=_e,a[$].ind=g,a[$].extra=Tt,$+=1;g+=1,_e=0}}else if(j==3){if(_e+=Tt,b===""||o===c-1){for(b===""&&(_e-=Tt);$<=o;)a[$].an=_e,a[$].ind=g,a[$].extra=Tt,$+=1;_e=0,g+=1}}else a[g].ind=g,a[g].extra=0,g+=1;if(e.l=a,gt=ut>gt?ut:gt,st.push(ut),e.sz)e.boxWidth=e.sz[0],e.justifyOffset=0;else switch(e.boxWidth=gt,e.j){case 1:e.justifyOffset=-e.boxWidth;break;case 2:e.justifyOffset=-e.boxWidth/2;break;default:e.justifyOffset=0}e.lineWidths=st;var us=s.a,hn,Ft;yt=us.length;var Gr,gn,un=[];for(wt=0;wt<yt;wt+=1){for(hn=us[wt],hn.a.sc&&(e.strokeColorAnim=!0),hn.a.sw&&(e.strokeWidthAnim=!0),(hn.a.fc||hn.a.fh||hn.a.fs||hn.a.fb)&&(e.fillColorAnim=!0),gn=0,Gr=hn.s.b,o=0;o<c;o+=1)Ft=a[o],Ft.anIndexes[wt]=gn,(Gr==1&&Ft.val!==""||Gr==2&&Ft.val!==""&&Ft.val!==" "||Gr==3&&(Ft.n||Ft.val==" "||o==c-1)||Gr==4&&(Ft.n||o==c-1))&&(hn.s.rn===1&&un.push(gn),gn+=1);s.a[wt].s.totalChars=gn;var Zn=-1,xu;if(hn.s.rn===1)for(o=0;o<c;o+=1)Ft=a[o],Zn!=Ft.anIndexes[wt]&&(Zn=Ft.anIndexes[wt],xu=un.splice(Math.floor(Math.random()*un.length),1)[0]),Ft.anIndexes[wt]=xu}e.yOffset=e.finalLineHeight||e.finalSize*1.2,e.ls=e.ls||0,e.ascent=At.ascent*e.finalSize/100},TextProperty.prototype.updateDocumentData=function(e,i){i=i===void 0?this.keysIndex:i;var s=this.copyData({},this.data.d.k[i].s);s=this.copyData(s,e),this.data.d.k[i].s=s,this.recalculate(i),this.setCurrentData(s),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(e){var i=this.data.d.k[e].s;i.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(i)},TextProperty.prototype.canResizeFont=function(e){this.canResize=e,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(e){this.minimumFontSize=Math.floor(e)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var e=Math.max,i=Math.min,s=Math.floor;function a(c,d){this._currentTextLength=-1,this.k=!1,this.data=d,this.elem=c,this.comp=c.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(c),this.s=PropertyFactory.getProp(c,d.s||{k:0},0,0,this),"e"in d?this.e=PropertyFactory.getProp(c,d.e,0,0,this):this.e={v:100},this.o=PropertyFactory.getProp(c,d.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(c,d.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(c,d.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(c,d.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(c,d.a,0,.01,this),this.dynamicProperties.length||this.getValue()}a.prototype={getMult:function(d){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var g=0,b=0,j=1,_e=1;this.ne.v>0?g=this.ne.v/100:b=-this.ne.v/100,this.xe.v>0?j=1-this.xe.v/100:_e=1+this.xe.v/100;var $=BezierFactory.getBezierEasing(g,b,j,_e).get,rt=0,st=this.finalS,ut=this.finalE,gt=this.data.sh;if(gt===2)ut===st?rt=d>=ut?1:0:rt=e(0,i(.5/(ut-st)+(d-st)/(ut-st),1)),rt=$(rt);else if(gt===3)ut===st?rt=d>=ut?0:1:rt=1-e(0,i(.5/(ut-st)+(d-st)/(ut-st),1)),rt=$(rt);else if(gt===4)ut===st?rt=0:(rt=e(0,i(.5/(ut-st)+(d-st)/(ut-st),1)),rt<.5?rt*=2:rt=1-2*(rt-.5)),rt=$(rt);else if(gt===5){if(ut===st)rt=0;else{var wt=ut-st;d=i(e(0,d+.5-st),ut-st);var yt=-wt/2+d,At=wt/2;rt=Math.sqrt(1-yt*yt/(At*At))}rt=$(rt)}else gt===6?(ut===st?rt=0:(d=i(e(0,d+.5-st),ut-st),rt=(1+Math.cos(Math.PI+Math.PI*2*d/(ut-st)))/2),rt=$(rt)):(d>=s(st)&&(d-st<0?rt=e(0,i(i(ut,1)-(st-d),1)):rt=e(0,i(ut-d,1))),rt=$(rt));if(this.sm.v!==100){var Ct=this.sm.v*.01;Ct===0&&(Ct=1e-8);var Tt=.5-Ct*.5;rt<Tt?rt=0:(rt=(rt-Tt)/Ct,rt>1&&(rt=1))}return rt*this.a.v},getValue:function(d){this.iterateDynamicProperties(),this._mdf=d||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,d&&this.data.r===2&&(this.e.v=this._currentTextLength);var g=this.data.r===2?1:100/this.data.totalChars,b=this.o.v/g,j=this.s.v/g+b,_e=this.e.v/g+b;if(j>_e){var $=j;j=_e,_e=$}this.finalS=j,this.finalE=_e}},extendPrototype([DynamicPropertyContainer],a);function o(c,d,g){return new a(c,d)}return{getTextSelectorProp:o}}();function TextAnimatorDataProperty(e,i,s){var a={propType:!1},o=PropertyFactory.getProp,c=i.a;this.a={r:c.r?o(e,c.r,0,degToRads,s):a,rx:c.rx?o(e,c.rx,0,degToRads,s):a,ry:c.ry?o(e,c.ry,0,degToRads,s):a,sk:c.sk?o(e,c.sk,0,degToRads,s):a,sa:c.sa?o(e,c.sa,0,degToRads,s):a,s:c.s?o(e,c.s,1,.01,s):a,a:c.a?o(e,c.a,1,0,s):a,o:c.o?o(e,c.o,0,.01,s):a,p:c.p?o(e,c.p,1,0,s):a,sw:c.sw?o(e,c.sw,0,0,s):a,sc:c.sc?o(e,c.sc,1,0,s):a,fc:c.fc?o(e,c.fc,1,0,s):a,fh:c.fh?o(e,c.fh,0,0,s):a,fs:c.fs?o(e,c.fs,0,.01,s):a,fb:c.fb?o(e,c.fb,0,.01,s):a,t:c.t?o(e,c.t,0,0,s):a},this.s=TextSelectorProp.getTextSelectorProp(e,i.s,s),this.s.t=i.s.t}function TextAnimatorProperty(e,i,s){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=e,this._renderType=i,this._elem=s,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(s)}TextAnimatorProperty.prototype.searchProperties=function(){var e,i=this._textData.a.length,s,a=PropertyFactory.getProp;for(e=0;e<i;e+=1)s=this._textData.a[e],this._animatorsData[e]=new TextAnimatorDataProperty(this._elem,s,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:a(this._elem,this._textData.p.a,0,0,this),f:a(this._elem,this._textData.p.f,0,0,this),l:a(this._elem,this._textData.p.l,0,0,this),r:a(this._elem,this._textData.p.r,0,0,this),p:a(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=a(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(e,i){if(this.lettersChangedFlag=i,!(!this._mdf&&!this._isFirstFrame&&!i&&(!this._hasMaskedPath||!this._pathData.m._mdf))){this._isFirstFrame=!1;var s=this._moreOptions.alignment.v,a=this._animatorsData,o=this._textData,c=this.mHelper,d=this._renderType,g=this.renderedLetters.length,b,j,_e,$,rt=e.l,st,ut,gt,wt,yt,At,Ct,Tt,kt,Pt,It,Lt,Nt,Ht,dr;if(this._hasMaskedPath){if(dr=this._pathData.m,!this._pathData.n||this._pathData._mdf){var hs=dr.v;this._pathData.r.v&&(hs=hs.reverse()),st={tLength:0,segments:[]},$=hs._length-1;var _s;for(Lt=0,_e=0;_e<$;_e+=1)_s=bez.buildBezierData(hs.v[_e],hs.v[_e+1],[hs.o[_e][0]-hs.v[_e][0],hs.o[_e][1]-hs.v[_e][1]],[hs.i[_e+1][0]-hs.v[_e+1][0],hs.i[_e+1][1]-hs.v[_e+1][1]]),st.tLength+=_s.segmentLength,st.segments.push(_s),Lt+=_s.segmentLength;_e=$,dr.v.c&&(_s=bez.buildBezierData(hs.v[_e],hs.v[0],[hs.o[_e][0]-hs.v[_e][0],hs.o[_e][1]-hs.v[_e][1]],[hs.i[0][0]-hs.v[0][0],hs.i[0][1]-hs.v[0][1]]),st.tLength+=_s.segmentLength,st.segments.push(_s),Lt+=_s.segmentLength),this._pathData.pi=st}if(st=this._pathData.pi,ut=this._pathData.f.v,Ct=0,At=1,wt=0,yt=!0,Pt=st.segments,ut<0&&dr.v.c)for(st.tLength<Math.abs(ut)&&(ut=-Math.abs(ut)%st.tLength),Ct=Pt.length-1,kt=Pt[Ct].points,At=kt.length-1;ut<0;)ut+=kt[At].partialLength,At-=1,At<0&&(Ct-=1,kt=Pt[Ct].points,At=kt.length-1);kt=Pt[Ct].points,Tt=kt[At-1],gt=kt[At],It=gt.partialLength}$=rt.length,b=0,j=0;var ds=e.finalSize*1.2*.714,Nn=!0,us,hn,Ft,Gr,gn;Gr=a.length;var un,Zn=-1,xu,ou,sp,wu=ut,l1=Ct,P0=At,B0=-1,q1,ox,qx,N_,eS,tA,fD,q3,SA="",wA=this.defaultPropsArray,mO;if(e.j===2||e.j===1){var sR=0,bu=0,au=e.j===2?-.5:-1,X1=0,eE=!0;for(_e=0;_e<$;_e+=1)if(rt[_e].n){for(sR&&(sR+=bu);X1<_e;)rt[X1].animatorJustifyOffset=sR,X1+=1;sR=0,eE=!0}else{for(Ft=0;Ft<Gr;Ft+=1)us=a[Ft].a,us.t.propType&&(eE&&e.j===2&&(bu+=us.t.v*au),hn=a[Ft].s,un=hn.getMult(rt[_e].anIndexes[Ft],o.a[Ft].s.totalChars),un.length?sR+=us.t.v*un[0]*au:sR+=us.t.v*un*au);eE=!1}for(sR&&(sR+=bu);X1<_e;)rt[X1].animatorJustifyOffset=sR,X1+=1}for(_e=0;_e<$;_e+=1){if(c.reset(),q1=1,rt[_e].n)b=0,j+=e.yOffset,j+=Nn?1:0,ut=wu,Nn=!1,this._hasMaskedPath&&(Ct=l1,At=P0,kt=Pt[Ct].points,Tt=kt[At-1],gt=kt[At],It=gt.partialLength,wt=0),SA="",q3="",tA="",mO="",wA=this.defaultPropsArray;else{if(this._hasMaskedPath){if(B0!==rt[_e].line){switch(e.j){case 1:ut+=Lt-e.lineWidths[rt[_e].line];break;case 2:ut+=(Lt-e.lineWidths[rt[_e].line])/2;break}B0=rt[_e].line}Zn!==rt[_e].ind&&(rt[Zn]&&(ut+=rt[Zn].extra),ut+=rt[_e].an/2,Zn=rt[_e].ind),ut+=s[0]*rt[_e].an*.005;var bo=0;for(Ft=0;Ft<Gr;Ft+=1)us=a[Ft].a,us.p.propType&&(hn=a[Ft].s,un=hn.getMult(rt[_e].anIndexes[Ft],o.a[Ft].s.totalChars),un.length?bo+=us.p.v[0]*un[0]:bo+=us.p.v[0]*un),us.a.propType&&(hn=a[Ft].s,un=hn.getMult(rt[_e].anIndexes[Ft],o.a[Ft].s.totalChars),un.length?bo+=us.a.v[0]*un[0]:bo+=us.a.v[0]*un);for(yt=!0,this._pathData.a.v&&(ut=rt[0].an*.5+(Lt-this._pathData.f.v-rt[0].an*.5-rt[rt.length-1].an*.5)*Zn/($-1),ut+=this._pathData.f.v);yt;)wt+It>=ut+bo||!kt?(Nt=(ut+bo-wt)/gt.partialLength,ou=Tt.point[0]+(gt.point[0]-Tt.point[0])*Nt,sp=Tt.point[1]+(gt.point[1]-Tt.point[1])*Nt,c.translate(-s[0]*rt[_e].an*.005,-(s[1]*ds)*.01),yt=!1):kt&&(wt+=gt.partialLength,At+=1,At>=kt.length&&(At=0,Ct+=1,Pt[Ct]?kt=Pt[Ct].points:dr.v.c?(At=0,Ct=0,kt=Pt[Ct].points):(wt-=gt.partialLength,kt=null)),kt&&(Tt=gt,gt=kt[At],It=gt.partialLength));xu=rt[_e].an/2-rt[_e].add,c.translate(-xu,0,0)}else xu=rt[_e].an/2-rt[_e].add,c.translate(-xu,0,0),c.translate(-s[0]*rt[_e].an*.005,-s[1]*ds*.01,0);for(Ft=0;Ft<Gr;Ft+=1)us=a[Ft].a,us.t.propType&&(hn=a[Ft].s,un=hn.getMult(rt[_e].anIndexes[Ft],o.a[Ft].s.totalChars),(b!==0||e.j!==0)&&(this._hasMaskedPath?un.length?ut+=us.t.v*un[0]:ut+=us.t.v*un:un.length?b+=us.t.v*un[0]:b+=us.t.v*un));for(e.strokeWidthAnim&&(qx=e.sw||0),e.strokeColorAnim&&(e.sc?ox=[e.sc[0],e.sc[1],e.sc[2]]:ox=[0,0,0]),e.fillColorAnim&&e.fc&&(N_=[e.fc[0],e.fc[1],e.fc[2]]),Ft=0;Ft<Gr;Ft+=1)us=a[Ft].a,us.a.propType&&(hn=a[Ft].s,un=hn.getMult(rt[_e].anIndexes[Ft],o.a[Ft].s.totalChars),un.length?c.translate(-us.a.v[0]*un[0],-us.a.v[1]*un[1],us.a.v[2]*un[2]):c.translate(-us.a.v[0]*un,-us.a.v[1]*un,us.a.v[2]*un));for(Ft=0;Ft<Gr;Ft+=1)us=a[Ft].a,us.s.propType&&(hn=a[Ft].s,un=hn.getMult(rt[_e].anIndexes[Ft],o.a[Ft].s.totalChars),un.length?c.scale(1+(us.s.v[0]-1)*un[0],1+(us.s.v[1]-1)*un[1],1):c.scale(1+(us.s.v[0]-1)*un,1+(us.s.v[1]-1)*un,1));for(Ft=0;Ft<Gr;Ft+=1){if(us=a[Ft].a,hn=a[Ft].s,un=hn.getMult(rt[_e].anIndexes[Ft],o.a[Ft].s.totalChars),us.sk.propType&&(un.length?c.skewFromAxis(-us.sk.v*un[0],us.sa.v*un[1]):c.skewFromAxis(-us.sk.v*un,us.sa.v*un)),us.r.propType&&(un.length?c.rotateZ(-us.r.v*un[2]):c.rotateZ(-us.r.v*un)),us.ry.propType&&(un.length?c.rotateY(us.ry.v*un[1]):c.rotateY(us.ry.v*un)),us.rx.propType&&(un.length?c.rotateX(us.rx.v*un[0]):c.rotateX(us.rx.v*un)),us.o.propType&&(un.length?q1+=(us.o.v*un[0]-q1)*un[0]:q1+=(us.o.v*un-q1)*un),e.strokeWidthAnim&&us.sw.propType&&(un.length?qx+=us.sw.v*un[0]:qx+=us.sw.v*un),e.strokeColorAnim&&us.sc.propType)for(eS=0;eS<3;eS+=1)un.length?ox[eS]+=(us.sc.v[eS]-ox[eS])*un[0]:ox[eS]+=(us.sc.v[eS]-ox[eS])*un;if(e.fillColorAnim&&e.fc){if(us.fc.propType)for(eS=0;eS<3;eS+=1)un.length?N_[eS]+=(us.fc.v[eS]-N_[eS])*un[0]:N_[eS]+=(us.fc.v[eS]-N_[eS])*un;us.fh.propType&&(un.length?N_=addHueToRGB(N_,us.fh.v*un[0]):N_=addHueToRGB(N_,us.fh.v*un)),us.fs.propType&&(un.length?N_=addSaturationToRGB(N_,us.fs.v*un[0]):N_=addSaturationToRGB(N_,us.fs.v*un)),us.fb.propType&&(un.length?N_=addBrightnessToRGB(N_,us.fb.v*un[0]):N_=addBrightnessToRGB(N_,us.fb.v*un))}}for(Ft=0;Ft<Gr;Ft+=1)us=a[Ft].a,us.p.propType&&(hn=a[Ft].s,un=hn.getMult(rt[_e].anIndexes[Ft],o.a[Ft].s.totalChars),this._hasMaskedPath?un.length?c.translate(0,us.p.v[1]*un[0],-us.p.v[2]*un[1]):c.translate(0,us.p.v[1]*un,-us.p.v[2]*un):un.length?c.translate(us.p.v[0]*un[0],us.p.v[1]*un[1],-us.p.v[2]*un[2]):c.translate(us.p.v[0]*un,us.p.v[1]*un,-us.p.v[2]*un));if(e.strokeWidthAnim&&(tA=qx<0?0:qx),e.strokeColorAnim&&(fD="rgb("+Math.round(ox[0]*255)+","+Math.round(ox[1]*255)+","+Math.round(ox[2]*255)+")"),e.fillColorAnim&&e.fc&&(q3="rgb("+Math.round(N_[0]*255)+","+Math.round(N_[1]*255)+","+Math.round(N_[2]*255)+")"),this._hasMaskedPath){if(c.translate(0,-e.ls),c.translate(0,s[1]*ds*.01+j,0),this._pathData.p.v){Ht=(gt.point[1]-Tt.point[1])/(gt.point[0]-Tt.point[0]);var C3=Math.atan(Ht)*180/Math.PI;gt.point[0]<Tt.point[0]&&(C3+=180),c.rotate(-C3*Math.PI/180)}c.translate(ou,sp,0),ut-=s[0]*rt[_e].an*.005,rt[_e+1]&&Zn!==rt[_e+1].ind&&(ut+=rt[_e].an/2,ut+=e.tr*.001*e.finalSize)}else{switch(c.translate(b,j,0),e.ps&&c.translate(e.ps[0],e.ps[1]+e.ascent,0),e.j){case 1:c.translate(rt[_e].animatorJustifyOffset+e.justifyOffset+(e.boxWidth-e.lineWidths[rt[_e].line]),0,0);break;case 2:c.translate(rt[_e].animatorJustifyOffset+e.justifyOffset+(e.boxWidth-e.lineWidths[rt[_e].line])/2,0,0);break}c.translate(0,-e.ls),c.translate(xu,0,0),c.translate(s[0]*rt[_e].an*.005,s[1]*ds*.01,0),b+=rt[_e].l+e.tr*.001*e.finalSize}d==="html"?SA=c.toCSS():d==="svg"?SA=c.to2dCSS():wA=[c.props[0],c.props[1],c.props[2],c.props[3],c.props[4],c.props[5],c.props[6],c.props[7],c.props[8],c.props[9],c.props[10],c.props[11],c.props[12],c.props[13],c.props[14],c.props[15]],mO=q1}g<=_e?(gn=new LetterProps(mO,tA,fD,q3,SA,wA),this.renderedLetters.push(gn),g+=1,this.lettersChangedFlag=!0):(gn=this.renderedLetters[_e],this.lettersChangedFlag=gn.update(mO,tA,fD,q3,SA,wA)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty);function ITextElement(){}ITextElement.prototype.initElement=function(e,i,s){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(e,i,s),this.textProperty=new TextProperty(this,e.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(e.t,this.renderType,this),this.initTransform(e,i,s),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(e){this._mdf=!1,this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange)},ITextElement.prototype.createPathShape=function(e,i){var s,a=i.length,o,c="";for(s=0;s<a;s+=1)i[s].ty==="sh"&&(o=i[s].ks.k,c+=buildShapeString(o,o.i.length,!0,e));return c},ITextElement.prototype.updateDocumentData=function(e,i){this.textProperty.updateDocumentData(e,i)},ITextElement.prototype.canResizeFont=function(e){this.textProperty.canResizeFont(e)},ITextElement.prototype.setMinimumFontSize=function(e){this.textProperty.setMinimumFontSize(e)},ITextElement.prototype.applyTextPropertiesToMatrix=function(e,i,s,a,o){switch(e.ps&&i.translate(e.ps[0],e.ps[1]+e.ascent,0),i.translate(0,-e.ls,0),e.j){case 1:i.translate(e.justifyOffset+(e.boxWidth-e.lineWidths[s]),0,0);break;case 2:i.translate(e.justifyOffset+(e.boxWidth-e.lineWidths[s])/2,0,0);break}i.translate(a,o,0)},ITextElement.prototype.buildColor=function(e){return"rgb("+Math.round(e[0]*255)+","+Math.round(e[1]*255)+","+Math.round(e[2]*255)+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},ITextElement.prototype.validateText=function(){(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)};var emptyShapeData={shapes:[]};function SVGTextLottieElement(e,i,s){this.textSpans=[],this.renderType="svg",this.initElement(e,i,s)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(e){for(var i=0,s=e.length,a=[],o="";i<s;)e[i]==="\r"||e[i]===""?(a.push(o),o=""):o+=e[i],i+=1;return a.push(o),a},SVGTextLottieElement.prototype.buildShapeData=function(e,i){if(e.shapes&&e.shapes.length){var s=e.shapes[0];if(s.it){var a=s.it[s.it.length-1];a.s&&(a.s.k[0]=i,a.s.k[1]=i)}}return e},SVGTextLottieElement.prototype.buildNewText=function(){this.addDynamicProperty(this);var e,i,s=this.textProperty.currentData;this.renderedLetters=createSizedArray(s?s.l.length:0),s.fc?this.layerElement.setAttribute("fill",this.buildColor(s.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),s.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(s.sc)),this.layerElement.setAttribute("stroke-width",s.sw)),this.layerElement.setAttribute("font-size",s.finalSize);var a=this.globalData.fontManager.getFontByName(s.f);if(a.fClass)this.layerElement.setAttribute("class",a.fClass);else{this.layerElement.setAttribute("font-family",a.fFamily);var o=s.fWeight,c=s.fStyle;this.layerElement.setAttribute("font-style",c),this.layerElement.setAttribute("font-weight",o)}this.layerElement.setAttribute("aria-label",s.t);var d=s.l||[],g=!!this.globalData.fontManager.chars;i=d.length;var b,j=this.mHelper,_e="",$=this.data.singleShape,rt=0,st=0,ut=!0,gt=s.tr*.001*s.finalSize;if($&&!g&&!s.sz){var wt=this.textContainer,yt="start";switch(s.j){case 1:yt="end";break;case 2:yt="middle";break;default:yt="start";break}wt.setAttribute("text-anchor",yt),wt.setAttribute("letter-spacing",gt);var At=this.buildTextContents(s.finalText);for(i=At.length,st=s.ps?s.ps[1]+s.ascent:0,e=0;e<i;e+=1)b=this.textSpans[e].span||createNS("tspan"),b.textContent=At[e],b.setAttribute("x",0),b.setAttribute("y",st),b.style.display="inherit",wt.appendChild(b),this.textSpans[e]||(this.textSpans[e]={span:null,glyph:null}),this.textSpans[e].span=b,st+=s.finalLineHeight;this.layerElement.appendChild(wt)}else{var Ct=this.textSpans.length,Tt;for(e=0;e<i;e+=1){if(this.textSpans[e]||(this.textSpans[e]={span:null,childSpan:null,glyph:null}),!g||!$||e===0){if(b=Ct>e?this.textSpans[e].span:createNS(g?"g":"text"),Ct<=e){if(b.setAttribute("stroke-linecap","butt"),b.setAttribute("stroke-linejoin","round"),b.setAttribute("stroke-miterlimit","4"),this.textSpans[e].span=b,g){var kt=createNS("g");b.appendChild(kt),this.textSpans[e].childSpan=kt}this.textSpans[e].span=b,this.layerElement.appendChild(b)}b.style.display="inherit"}if(j.reset(),$&&(d[e].n&&(rt=-gt,st+=s.yOffset,st+=ut?1:0,ut=!1),this.applyTextPropertiesToMatrix(s,j,d[e].line,rt,st),rt+=d[e].l||0,rt+=gt),g){Tt=this.globalData.fontManager.getCharData(s.finalText[e],a.fStyle,this.globalData.fontManager.getFontByName(s.f).fFamily);var Pt;if(Tt.t===1)Pt=new SVGCompElement(Tt.data,this.globalData,this);else{var It=emptyShapeData;Tt.data&&Tt.data.shapes&&(It=this.buildShapeData(Tt.data,s.finalSize)),Pt=new SVGShapeElement(It,this.globalData,this)}if(this.textSpans[e].glyph){var Lt=this.textSpans[e].glyph;this.textSpans[e].childSpan.removeChild(Lt.layerElement),Lt.destroy()}this.textSpans[e].glyph=Pt,Pt._debug=!0,Pt.prepareFrame(0),Pt.renderFrame(),this.textSpans[e].childSpan.appendChild(Pt.layerElement),Tt.t===1&&this.textSpans[e].childSpan.setAttribute("transform","scale("+s.finalSize/100+","+s.finalSize/100+")")}else $&&b.setAttribute("transform","translate("+j.props[12]+","+j.props[13]+")"),b.textContent=d[e].val,b.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}$&&b&&b.setAttribute("d",_e)}for(;e<this.textSpans.length;)this.textSpans[e].span.style.display="none",e+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var e=this.layerElement.getBBox();this.bbox={top:e.y,left:e.x,width:e.width,height:e.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var e,i=this.textSpans.length,s;for(this.renderedFrame=this.comp.renderedFrame,e=0;e<i;e+=1)s=this.textSpans[e].glyph,s&&(s.prepareFrame(this.comp.renderedFrame-this.data.st),s._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if(this.validateText(),(!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){this._sizeChanged=!0;var e,i,s=this.textAnimator.renderedLetters,a=this.textProperty.currentData.l;i=a.length;var o,c,d;for(e=0;e<i;e+=1)a[e].n||(o=s[e],c=this.textSpans[e].span,d=this.textSpans[e].glyph,d&&d.renderFrame(),o._mdf.m&&c.setAttribute("transform",o.m),o._mdf.o&&c.setAttribute("opacity",o.o),o._mdf.sw&&c.setAttribute("stroke-width",o.sw),o._mdf.sc&&c.setAttribute("stroke",o.sc),o._mdf.fc&&c.setAttribute("fill",o.fc))}};function ISolidElement(e,i,s){this.initElement(e,i,s)}extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var e=createNS("rect");e.setAttribute("width",this.data.sw),e.setAttribute("height",this.data.sh),e.setAttribute("fill",this.data.sc),this.layerElement.appendChild(e)};function NullElement(e,i,s){this.initFrame(),this.initBaseData(e,i,s),this.initFrame(),this.initTransform(e,i,s),this.initHierarchy()}NullElement.prototype.prepareFrame=function(e){this.prepareProperties(e,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement);function SVGRendererBase(){}extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(e){return new NullElement(e,this.globalData,this)},SVGRendererBase.prototype.createShape=function(e){return new SVGShapeElement(e,this.globalData,this)},SVGRendererBase.prototype.createText=function(e){return new SVGTextLottieElement(e,this.globalData,this)},SVGRendererBase.prototype.createImage=function(e){return new IImageElement(e,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(e){return new ISolidElement(e,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(e){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+e.w+" "+e.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",e.w),this.svgElement.setAttribute("height",e.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),this.renderConfig.focusable!==void 0&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var i=this.globalData.defs;this.setupGlobalData(e,i),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=e;var s=createNS("clipPath"),a=createNS("rect");a.setAttribute("width",e.w),a.setAttribute("height",e.h),a.setAttribute("x",0),a.setAttribute("y",0);var o=createElementID();s.setAttribute("id",o),s.appendChild(a),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+o+")"),i.appendChild(s),this.layers=e.layers,this.elements=createSizedArray(e.layers.length)},SVGRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var e,i=this.layers?this.layers.length:0;for(e=0;e<i;e+=1)this.elements[e]&&this.elements[e].destroy&&this.elements[e].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(e){var i=0,s=this.layers.length;for(i=0;i<s;i+=1)if(this.layers[i].ind===e)return i;return-1},SVGRendererBase.prototype.buildItem=function(e){var i=this.elements;if(!(i[e]||this.layers[e].ty===99)){i[e]=!0;var s=this.createItem(this.layers[e]);if(i[e]=s,getExpressionsPlugin()&&(this.layers[e].ty===0&&this.globalData.projectInterface.registerComposition(s),s.initExpressions()),this.appendElementInPos(s,e),this.layers[e].tt){var a="tp"in this.layers[e]?this.findIndexByInd(this.layers[e].tp):e-1;if(a===-1)return;if(!this.elements[a]||this.elements[a]===!0)this.buildItem(a),this.addPendingElement(s);else{var o=i[a],c=o.getMatte(this.layers[e].tt);s.setMatte(c)}}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var e=this.pendingElements.pop();if(e.checkParenting(),e.data.tt)for(var i=0,s=this.elements.length;i<s;){if(this.elements[i]===e){var a="tp"in e.data?this.findIndexByInd(e.data.tp):i-1,o=this.elements[a],c=o.getMatte(this.layers[i].tt);e.setMatte(c);break}i+=1}}},SVGRendererBase.prototype.renderFrame=function(e){if(!(this.renderedFrame===e||this.destroyed)){e===null?e=this.renderedFrame:this.renderedFrame=e,this.globalData.frameNum=e,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=e,this.globalData._mdf=!1;var i,s=this.layers.length;for(this.completeLayers||this.checkLayers(e),i=s-1;i>=0;i-=1)(this.completeLayers||this.elements[i])&&this.elements[i].prepareFrame(e-this.layers[i].st);if(this.globalData._mdf)for(i=0;i<s;i+=1)(this.completeLayers||this.elements[i])&&this.elements[i].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(e,i){var s=e.getBaseElement();if(s){for(var a=0,o;a<i;)this.elements[a]&&this.elements[a]!==!0&&this.elements[a].getBaseElement()&&(o=this.elements[a].getBaseElement()),a+=1;o?this.layerElement.insertBefore(s,o):this.layerElement.appendChild(s)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"};function ICompElement(){}extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(e,i,s){this.initFrame(),this.initBaseData(e,i,s),this.initTransform(e,i,s),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),(this.data.xt||!i.progressiveLoad)&&this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(e){if(this._mdf=!1,this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange),!(!this.isInRange&&!this.data.xt)){if(this.tm._placeholder)this.renderedFrame=e/this.data.sr;else{var i=this.tm.v;i===this.data.op&&(i=this.data.op-1),this.renderedFrame=i}var s,a=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),s=a-1;s>=0;s-=1)(this.completeLayers||this.elements[s])&&(this.elements[s].prepareFrame(this.renderedFrame-this.layers[s].st),this.elements[s]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var e,i=this.layers.length;for(e=0;e<i;e+=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()},ICompElement.prototype.setElements=function(e){this.elements=e},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var e,i=this.layers.length;for(e=0;e<i;e+=1)this.elements[e]&&this.elements[e].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()};function SVGCompElement(e,i,s){this.layers=e.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(e,i,s),this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,i.frameRate,this):{_placeholder:!0}}extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(e){return new SVGCompElement(e,this.globalData,this)};function SVGRenderer(e,i){this.animationItem=e,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var s="";if(i&&i.title){var a=createNS("title"),o=createElementID();a.setAttribute("id",o),a.textContent=i.title,this.svgElement.appendChild(a),s+=o}if(i&&i.description){var c=createNS("desc"),d=createElementID();c.setAttribute("id",d),c.textContent=i.description,this.svgElement.appendChild(c),s+=" "+d}s&&this.svgElement.setAttribute("aria-labelledby",s);var g=createNS("defs");this.svgElement.appendChild(g);var b=createNS("g");this.svgElement.appendChild(b),this.layerElement=b,this.renderConfig={preserveAspectRatio:i&&i.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:i&&i.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:i&&i.contentVisibility||"visible",progressiveLoad:i&&i.progressiveLoad||!1,hideOnTransparent:!(i&&i.hideOnTransparent===!1),viewBoxOnly:i&&i.viewBoxOnly||!1,viewBoxSize:i&&i.viewBoxSize||!1,className:i&&i.className||"",id:i&&i.id||"",focusable:i&&i.focusable,filterSize:{width:i&&i.filterSize&&i.filterSize.width||"100%",height:i&&i.filterSize&&i.filterSize.height||"100%",x:i&&i.filterSize&&i.filterSize.x||"0%",y:i&&i.filterSize&&i.filterSize.y||"0%"},width:i&&i.width,height:i&&i.height,runExpressions:!i||i.runExpressions===void 0||i.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:g,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(e){return new SVGCompElement(e,this.globalData,this)};function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}ShapeTransformManager.prototype={addTransformSequence:function(i){var s,a=i.length,o="_";for(s=0;s<a;s+=1)o+=i[s].transform.key+"_";var c=this.sequences[o];return c||(c={transforms:[].concat(i),finalTransform:new Matrix,_mdf:!1},this.sequences[o]=c,this.sequenceList.push(c)),c},processSequence:function(i,s){for(var a=0,o=i.transforms.length,c=s;a<o&&!s;){if(i.transforms[a].transform.mProps._mdf){c=!0;break}a+=1}if(c)for(i.finalTransform.reset(),a=o-1;a>=0;a-=1)i.finalTransform.multiply(i.transforms[a].transform.mProps.v);i._mdf=c},processSequences:function(i){var s,a=this.sequenceList.length;for(s=0;s<a;s+=1)this.processSequence(this.sequenceList[s],i)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var i="__lottie_element_luma_buffer",s=null,a=null,o=null;function c(){var b=createNS("svg"),j=createNS("filter"),_e=createNS("feColorMatrix");return j.setAttribute("id",i),_e.setAttribute("type","matrix"),_e.setAttribute("color-interpolation-filters","sRGB"),_e.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),j.appendChild(_e),b.appendChild(j),b.setAttribute("id",i+"_svg"),featureSupport.svgLumaHidden&&(b.style.display="none"),b}function d(){s||(o=c(),document.body.appendChild(o),s=createTag("canvas"),a=s.getContext("2d"),a.filter="url(#"+i+")",a.fillStyle="rgba(0,0,0,0)",a.fillRect(0,0,1,1))}function g(b){return s||d(),s.width=b.width,s.height=b.height,a.filter="url(#"+i+")",s}return{load:d,get:g}};function createCanvas(e,i){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(e,i);var s=createTag("canvas");return s.width=e,s.height=i,s}var assetLoader=function(){return{loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas}}(),registeredEffects={};function CVEffects(e){var i,s=e.data.ef?e.data.ef.length:0;this.filters=[];var a;for(i=0;i<s;i+=1){a=null;var o=e.data.ef[i].ty;if(registeredEffects[o]){var c=registeredEffects[o].effect;a=new c(e.effectsManager.effectElements[i],e)}a&&this.filters.push(a)}this.filters.length&&e.addRenderableComponent(this)}CVEffects.prototype.renderFrame=function(e){var i,s=this.filters.length;for(i=0;i<s;i+=1)this.filters[i].renderFrame(e)},CVEffects.prototype.getEffects=function(e){var i,s=this.filters.length,a=[];for(i=0;i<s;i+=1)this.filters[i].type===e&&a.push(this.filters[i]);return a};function registerEffect(e,i){registeredEffects[e]={effect:i}}function CVMaskElement(e,i){this.data=e,this.element=i,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var s,a=this.masksProperties.length,o=!1;for(s=0;s<a;s+=1)this.masksProperties[s].mode!=="n"&&(o=!0),this.viewData[s]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[s],3);this.hasMasks=o,o&&this.element.addRenderableComponent(this)}CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var e=this.element.finalTransform.mat,i=this.element.canvasContext,s,a=this.masksProperties.length,o,c,d;for(i.beginPath(),s=0;s<a;s+=1)if(this.masksProperties[s].mode!=="n"){this.masksProperties[s].inv&&(i.moveTo(0,0),i.lineTo(this.element.globalData.compSize.w,0),i.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),i.lineTo(0,this.element.globalData.compSize.h),i.lineTo(0,0)),d=this.viewData[s].v,o=e.applyToPointArray(d.v[0][0],d.v[0][1],0),i.moveTo(o[0],o[1]);var g,b=d._length;for(g=1;g<b;g+=1)c=e.applyToTriplePoints(d.o[g-1],d.i[g],d.v[g]),i.bezierCurveTo(c[0],c[1],c[2],c[3],c[4],c[5]);c=e.applyToTriplePoints(d.o[g-1],d.i[0],d.v[0]),i.bezierCurveTo(c[0],c[1],c[2],c[3],c[4],c[5])}this.element.globalData.renderer.save(!0),i.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};function CVBaseElement(){}var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var i=this.globalData.canvasContext,s=assetLoader.createCanvas(i.canvas.width,i.canvas.height);this.buffers.push(s);var a=assetLoader.createCanvas(i.canvas.width,i.canvas.height);this.buffers.push(a),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this),this.searchEffectTransforms()},createContent:function(){},setBlendMode:function(){var i=this.globalData;if(i.blendMode!==this.data.bm){i.blendMode=this.data.bm;var s=getBlendMode(this.data.bm);i.canvasContext.globalCompositeOperation=s}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this),this.transformEffects=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT)},hideElement:function(){!this.hidden&&(!this.isInRange||this.isTransparent)&&(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(i){i.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var i=this.buffers[0],s=i.getContext("2d");this.clearCanvas(s),s.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var i=this.buffers[1],s=i.getContext("2d");this.clearCanvas(s),s.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform);var a=this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1);if(a.renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var o=assetLoader.getLumaCanvas(this.canvasContext.canvas),c=o.getContext("2d");c.drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(o,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(i,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(i){if(!(this.hidden||this.data.hd)&&!(this.data.td===1&&!i)){this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.setBlendMode();var s=this.data.ty===0;this.prepareLayer(),this.globalData.renderer.save(s),this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity),this.renderInnerContent(),this.globalData.renderer.restore(s),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement;function CVShapeData(e,i,s,a){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var o=4;i.ty==="rc"?o=5:i.ty==="el"?o=6:i.ty==="sr"&&(o=7),this.sh=ShapePropertyFactory.getShapeProp(e,i,o,e);var c,d=s.length,g;for(c=0;c<d;c+=1)s[c].closed||(g={transforms:a.addTransformSequence(s[c].transforms),trNodes:[]},this.styledShapes.push(g),s[c].elements.push(g))}CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated;function CVShapeElement(e,i,s){this.shapes=[],this.shapesData=e.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(e,i,s)}extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(e,i){var s={data:e,type:e.ty,preTransforms:this.transformsManager.addTransformSequence(i),transforms:[],elements:[],closed:e.hd===!0},a={};if(e.ty==="fl"||e.ty==="st"?(a.c=PropertyFactory.getProp(this,e.c,1,255,this),a.c.k||(s.co="rgb("+bmFloor(a.c.v[0])+","+bmFloor(a.c.v[1])+","+bmFloor(a.c.v[2])+")")):(e.ty==="gf"||e.ty==="gs")&&(a.s=PropertyFactory.getProp(this,e.s,1,null,this),a.e=PropertyFactory.getProp(this,e.e,1,null,this),a.h=PropertyFactory.getProp(this,e.h||{k:0},0,.01,this),a.a=PropertyFactory.getProp(this,e.a||{k:0},0,degToRads,this),a.g=new GradientProperty(this,e.g,this)),a.o=PropertyFactory.getProp(this,e.o,0,.01,this),e.ty==="st"||e.ty==="gs"){if(s.lc=lineCapEnum[e.lc||2],s.lj=lineJoinEnum[e.lj||2],e.lj==1&&(s.ml=e.ml),a.w=PropertyFactory.getProp(this,e.w,0,null,this),a.w.k||(s.wi=a.w.v),e.d){var o=new DashProperty(this,e.d,"canvas",this);a.d=o,a.d.k||(s.da=a.d.dashArray,s.do=a.d.dashoffset[0])}}else s.r=e.r===2?"evenodd":"nonzero";return this.stylesList.push(s),a.style=s,a},CVShapeElement.prototype.createGroupElement=function(){var e={it:[],prevViewData:[]};return e},CVShapeElement.prototype.createTransformElement=function(e){var i={transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,e.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,e,this)}};return i},CVShapeElement.prototype.createShapeElement=function(e){var i=new CVShapeData(this,e,this.stylesList,this.transformsManager);return this.shapes.push(i),this.addShapeToModifiers(i),i},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var e,i=this.itemsData.length;for(e=0;e<i;e+=1)this.prevViewData[e]=this.itemsData[e];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),i=this.dynamicProperties.length,e=0;e<i;e+=1)this.dynamicProperties[e].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(e){var i,s=this.stylesList.length;for(i=0;i<s;i+=1)this.stylesList[i].closed||this.stylesList[i].transforms.push(e)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var e,i=this.stylesList.length;for(e=0;e<i;e+=1)this.stylesList[e].closed||this.stylesList[e].transforms.pop()},CVShapeElement.prototype.closeStyles=function(e){var i,s=e.length;for(i=0;i<s;i+=1)e[i].closed=!0},CVShapeElement.prototype.searchShapes=function(e,i,s,a,o){var c,d=e.length-1,g,b,j=[],_e=[],$,rt,st,ut=[].concat(o);for(c=d;c>=0;c-=1){if($=this.searchProcessedElement(e[c]),$?i[c]=s[$-1]:e[c]._shouldRender=a,e[c].ty==="fl"||e[c].ty==="st"||e[c].ty==="gf"||e[c].ty==="gs")$?i[c].style.closed=!1:i[c]=this.createStyleElement(e[c],ut),j.push(i[c].style);else if(e[c].ty==="gr"){if(!$)i[c]=this.createGroupElement(e[c]);else for(b=i[c].it.length,g=0;g<b;g+=1)i[c].prevViewData[g]=i[c].it[g];this.searchShapes(e[c].it,i[c].it,i[c].prevViewData,a,ut)}else e[c].ty==="tr"?($||(st=this.createTransformElement(e[c]),i[c]=st),ut.push(i[c]),this.addTransformToStyleList(i[c])):e[c].ty==="sh"||e[c].ty==="rc"||e[c].ty==="el"||e[c].ty==="sr"?$||(i[c]=this.createShapeElement(e[c])):e[c].ty==="tm"||e[c].ty==="rd"||e[c].ty==="pb"||e[c].ty==="zz"||e[c].ty==="op"?($?(rt=i[c],rt.closed=!1):(rt=ShapeModifiers.getModifier(e[c].ty),rt.init(this,e[c]),i[c]=rt,this.shapeModifiers.push(rt)),_e.push(rt)):e[c].ty==="rp"&&($?(rt=i[c],rt.closed=!0):(rt=ShapeModifiers.getModifier(e[c].ty),i[c]=rt,rt.init(this,e,c,i),this.shapeModifiers.push(rt),a=!1),_e.push(rt));this.addProcessedElement(e[c],c+1)}for(this.removeTransformFromStyleList(),this.closeStyles(j),d=_e.length,c=0;c<d;c+=1)_e[c].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(e,i){(e._opMdf||i.op._mdf||this._isFirstFrame)&&(i.opacity=e.opacity,i.opacity*=i.op.v,i._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var e,i=this.stylesList.length,s,a,o,c,d,g,b=this.globalData.renderer,j=this.globalData.canvasContext,_e,$;for(e=0;e<i;e+=1)if($=this.stylesList[e],_e=$.type,!((_e==="st"||_e==="gs")&&$.wi===0||!$.data._shouldRender||$.coOp===0||this.globalData.currentGlobalAlpha===0)){for(b.save(),d=$.elements,_e==="st"||_e==="gs"?(b.ctxStrokeStyle(_e==="st"?$.co:$.grd),b.ctxLineWidth($.wi),b.ctxLineCap($.lc),b.ctxLineJoin($.lj),b.ctxMiterLimit($.ml||0)):b.ctxFillStyle(_e==="fl"?$.co:$.grd),b.ctxOpacity($.coOp),_e!=="st"&&_e!=="gs"&&j.beginPath(),b.ctxTransform($.preTransforms.finalTransform.props),a=d.length,s=0;s<a;s+=1){for((_e==="st"||_e==="gs")&&(j.beginPath(),$.da&&(j.setLineDash($.da),j.lineDashOffset=$.do)),g=d[s].trNodes,c=g.length,o=0;o<c;o+=1)g[o].t==="m"?j.moveTo(g[o].p[0],g[o].p[1]):g[o].t==="c"?j.bezierCurveTo(g[o].pts[0],g[o].pts[1],g[o].pts[2],g[o].pts[3],g[o].pts[4],g[o].pts[5]):j.closePath();(_e==="st"||_e==="gs")&&(b.ctxStroke(),$.da&&j.setLineDash(this.dashResetter))}_e!=="st"&&_e!=="gs"&&this.globalData.renderer.ctxFill($.r),b.restore()}},CVShapeElement.prototype.renderShape=function(e,i,s,a){var o,c=i.length-1,d;for(d=e,o=c;o>=0;o-=1)i[o].ty==="tr"?(d=s[o].transform,this.renderShapeTransform(e,d)):i[o].ty==="sh"||i[o].ty==="el"||i[o].ty==="rc"||i[o].ty==="sr"?this.renderPath(i[o],s[o]):i[o].ty==="fl"?this.renderFill(i[o],s[o],d):i[o].ty==="st"?this.renderStroke(i[o],s[o],d):i[o].ty==="gf"||i[o].ty==="gs"?this.renderGradientFill(i[o],s[o],d):i[o].ty==="gr"?this.renderShape(d,i[o].it,s[o].it):i[o].ty;a&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(e,i){if(this._isFirstFrame||i._mdf||e.transforms._mdf){var s=e.trNodes,a=i.paths,o,c,d,g=a._length;s.length=0;var b=e.transforms.finalTransform;for(d=0;d<g;d+=1){var j=a.shapes[d];if(j&&j.v){for(c=j._length,o=1;o<c;o+=1)o===1&&s.push({t:"m",p:b.applyToPointArray(j.v[0][0],j.v[0][1],0)}),s.push({t:"c",pts:b.applyToTriplePoints(j.o[o-1],j.i[o],j.v[o])});c===1&&s.push({t:"m",p:b.applyToPointArray(j.v[0][0],j.v[0][1],0)}),j.c&&c&&(s.push({t:"c",pts:b.applyToTriplePoints(j.o[o-1],j.i[0],j.v[0])}),s.push({t:"z"}))}}e.trNodes=s}},CVShapeElement.prototype.renderPath=function(e,i){if(e.hd!==!0&&e._shouldRender){var s,a=i.styledShapes.length;for(s=0;s<a;s+=1)this.renderStyledShape(i.styledShapes[s],i.sh)}},CVShapeElement.prototype.renderFill=function(e,i,s){var a=i.style;(i.c._mdf||this._isFirstFrame)&&(a.co="rgb("+bmFloor(i.c.v[0])+","+bmFloor(i.c.v[1])+","+bmFloor(i.c.v[2])+")"),(i.o._mdf||s._opMdf||this._isFirstFrame)&&(a.coOp=i.o.v*s.opacity)},CVShapeElement.prototype.renderGradientFill=function(e,i,s){var a=i.style,o;if(!a.grd||i.g._mdf||i.s._mdf||i.e._mdf||e.t!==1&&(i.h._mdf||i.a._mdf)){var c=this.globalData.canvasContext,d=i.s.v,g=i.e.v;if(e.t===1)o=c.createLinearGradient(d[0],d[1],g[0],g[1]);else{var b=Math.sqrt(Math.pow(d[0]-g[0],2)+Math.pow(d[1]-g[1],2)),j=Math.atan2(g[1]-d[1],g[0]-d[0]),_e=i.h.v;_e>=1?_e=.99:_e<=-1&&(_e=-.99);var $=b*_e,rt=Math.cos(j+i.a.v)*$+d[0],st=Math.sin(j+i.a.v)*$+d[1];o=c.createRadialGradient(rt,st,0,d[0],d[1],b)}var ut,gt=e.g.p,wt=i.g.c,yt=1;for(ut=0;ut<gt;ut+=1)i.g._hasOpacity&&i.g._collapsable&&(yt=i.g.o[ut*2+1]),o.addColorStop(wt[ut*4]/100,"rgba("+wt[ut*4+1]+","+wt[ut*4+2]+","+wt[ut*4+3]+","+yt+")");a.grd=o}a.coOp=i.o.v*s.opacity},CVShapeElement.prototype.renderStroke=function(e,i,s){var a=i.style,o=i.d;o&&(o._mdf||this._isFirstFrame)&&(a.da=o.dashArray,a.do=o.dashoffset[0]),(i.c._mdf||this._isFirstFrame)&&(a.co="rgb("+bmFloor(i.c.v[0])+","+bmFloor(i.c.v[1])+","+bmFloor(i.c.v[2])+")"),(i.o._mdf||s._opMdf||this._isFirstFrame)&&(a.coOp=i.o.v*s.opacity),(i.w._mdf||this._isFirstFrame)&&(a.wi=i.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0};function CVTextElement(e,i,s){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(e,i,s)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var e=this.textProperty.currentData;this.renderedLetters=createSizedArray(e.l?e.l.length:0);var i=!1;e.fc?(i=!0,this.values.fill=this.buildColor(e.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=i;var s=!1;e.sc&&(s=!0,this.values.stroke=this.buildColor(e.sc),this.values.sWidth=e.sw);var a=this.globalData.fontManager.getFontByName(e.f),o,c,d=e.l,g=this.mHelper;this.stroke=s,this.values.fValue=e.finalSize+"px "+this.globalData.fontManager.getFontByName(e.f).fFamily,c=e.finalText.length;var b,j,_e,$,rt,st,ut,gt,wt,yt,At=this.data.singleShape,Ct=e.tr*.001*e.finalSize,Tt=0,kt=0,Pt=!0,It=0;for(o=0;o<c;o+=1){b=this.globalData.fontManager.getCharData(e.finalText[o],a.fStyle,this.globalData.fontManager.getFontByName(e.f).fFamily),j=b&&b.data||{},g.reset(),At&&d[o].n&&(Tt=-Ct,kt+=e.yOffset,kt+=Pt?1:0,Pt=!1),rt=j.shapes?j.shapes[0].it:[],ut=rt.length,g.scale(e.finalSize/100,e.finalSize/100),At&&this.applyTextPropertiesToMatrix(e,g,d[o].line,Tt,kt),wt=createSizedArray(ut-1);var Lt=0;for(st=0;st<ut;st+=1)if(rt[st].ty==="sh"){for($=rt[st].ks.k.i.length,gt=rt[st].ks.k,yt=[],_e=1;_e<$;_e+=1)_e===1&&yt.push(g.applyToX(gt.v[0][0],gt.v[0][1],0),g.applyToY(gt.v[0][0],gt.v[0][1],0)),yt.push(g.applyToX(gt.o[_e-1][0],gt.o[_e-1][1],0),g.applyToY(gt.o[_e-1][0],gt.o[_e-1][1],0),g.applyToX(gt.i[_e][0],gt.i[_e][1],0),g.applyToY(gt.i[_e][0],gt.i[_e][1],0),g.applyToX(gt.v[_e][0],gt.v[_e][1],0),g.applyToY(gt.v[_e][0],gt.v[_e][1],0));yt.push(g.applyToX(gt.o[_e-1][0],gt.o[_e-1][1],0),g.applyToY(gt.o[_e-1][0],gt.o[_e-1][1],0),g.applyToX(gt.i[0][0],gt.i[0][1],0),g.applyToY(gt.i[0][0],gt.i[0][1],0),g.applyToX(gt.v[0][0],gt.v[0][1],0),g.applyToY(gt.v[0][0],gt.v[0][1],0)),wt[Lt]=yt,Lt+=1}At&&(Tt+=d[o].l,Tt+=Ct),this.textSpans[It]?this.textSpans[It].elem=wt:this.textSpans[It]={elem:wt},It+=1}},CVTextElement.prototype.renderInnerContent=function(){this.validateText();var e=this.canvasContext;e.font=this.values.fValue,this.globalData.renderer.ctxLineCap("butt"),this.globalData.renderer.ctxLineJoin("miter"),this.globalData.renderer.ctxMiterLimit(4),this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var i,s,a,o,c,d,g=this.textAnimator.renderedLetters,b=this.textProperty.currentData.l;s=b.length;var j,_e=null,$=null,rt=null,st,ut,gt=this.globalData.renderer;for(i=0;i<s;i+=1)if(!b[i].n){if(j=g[i],j&&(gt.save(),gt.ctxTransform(j.p),gt.ctxOpacity(j.o)),this.fill){for(j&&j.fc?_e!==j.fc&&(gt.ctxFillStyle(j.fc),_e=j.fc):_e!==this.values.fill&&(_e=this.values.fill,gt.ctxFillStyle(this.values.fill)),st=this.textSpans[i].elem,o=st.length,this.globalData.canvasContext.beginPath(),a=0;a<o;a+=1)for(ut=st[a],d=ut.length,this.globalData.canvasContext.moveTo(ut[0],ut[1]),c=2;c<d;c+=6)this.globalData.canvasContext.bezierCurveTo(ut[c],ut[c+1],ut[c+2],ut[c+3],ut[c+4],ut[c+5]);this.globalData.canvasContext.closePath(),gt.ctxFill()}if(this.stroke){for(j&&j.sw?rt!==j.sw&&(rt=j.sw,gt.ctxLineWidth(j.sw)):rt!==this.values.sWidth&&(rt=this.values.sWidth,gt.ctxLineWidth(this.values.sWidth)),j&&j.sc?$!==j.sc&&($=j.sc,gt.ctxStrokeStyle(j.sc)):$!==this.values.stroke&&($=this.values.stroke,gt.ctxStrokeStyle(this.values.stroke)),st=this.textSpans[i].elem,o=st.length,this.globalData.canvasContext.beginPath(),a=0;a<o;a+=1)for(ut=st[a],d=ut.length,this.globalData.canvasContext.moveTo(ut[0],ut[1]),c=2;c<d;c+=6)this.globalData.canvasContext.bezierCurveTo(ut[c],ut[c+1],ut[c+2],ut[c+3],ut[c+4],ut[c+5]);this.globalData.canvasContext.closePath(),gt.ctxStroke()}j&&this.globalData.renderer.restore()}};function CVImageElement(e,i,s){this.assetData=i.getAssetData(e.refId),this.img=i.imageLoader.getAsset(this.assetData),this.initElement(e,i,s)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var e=createTag("canvas");e.width=this.assetData.w,e.height=this.assetData.h;var i=e.getContext("2d"),s=this.img.width,a=this.img.height,o=s/a,c=this.assetData.w/this.assetData.h,d,g,b=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;o>c&&b==="xMidYMid slice"||o<c&&b!=="xMidYMid slice"?(g=a,d=g*c):(d=s,g=d/c),i.drawImage(this.img,(s-d)/2,(a-g)/2,d,g,0,0,this.assetData.w,this.assetData.h),this.img=e}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null};function CVSolidElement(e,i,s){this.initElement(e,i,s)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){this.globalData.renderer.ctxFillStyle(this.data.sc),this.globalData.renderer.ctxFillRect(0,0,this.data.sw,this.data.sh)};function CanvasRendererBase(){}extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(e){return new CVShapeElement(e,this.globalData,this)},CanvasRendererBase.prototype.createText=function(e){return new CVTextElement(e,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(e){return new CVImageElement(e,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(e){return new CVSolidElement(e,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(e){e[0]===1&&e[1]===0&&e[4]===0&&e[5]===1&&e[12]===0&&e[13]===0||this.canvasContext.transform(e[0],e[1],e[4],e[5],e[12],e[13])},CanvasRendererBase.prototype.ctxOpacity=function(e){this.canvasContext.globalAlpha*=e<0?0:e},CanvasRendererBase.prototype.ctxFillStyle=function(e){this.canvasContext.fillStyle=e},CanvasRendererBase.prototype.ctxStrokeStyle=function(e){this.canvasContext.strokeStyle=e},CanvasRendererBase.prototype.ctxLineWidth=function(e){this.canvasContext.lineWidth=e},CanvasRendererBase.prototype.ctxLineCap=function(e){this.canvasContext.lineCap=e},CanvasRendererBase.prototype.ctxLineJoin=function(e){this.canvasContext.lineJoin=e},CanvasRendererBase.prototype.ctxMiterLimit=function(e){this.canvasContext.miterLimit=e},CanvasRendererBase.prototype.ctxFill=function(e){this.canvasContext.fill(e)},CanvasRendererBase.prototype.ctxFillRect=function(e,i,s,a){this.canvasContext.fillRect(e,i,s,a)},CanvasRendererBase.prototype.ctxStroke=function(){this.canvasContext.stroke()},CanvasRendererBase.prototype.reset=function(){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}this.contextData.reset()},CanvasRendererBase.prototype.save=function(){this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(e){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}e&&(this.globalData.blendMode="source-over"),this.contextData.restore(e)},CanvasRendererBase.prototype.configAnimation=function(e){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var i=this.animationItem.container.style;i.width="100%",i.height="100%";var s="0px 0px 0px";i.transformOrigin=s,i.mozTransformOrigin=s,i.webkitTransformOrigin=s,i["-webkit-transform"]=s,i.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.contextData.setContext(this.canvasContext),this.data=e,this.layers=e.layers,this.transformCanvas={w:e.w,h:e.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(e,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(e.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(e,i){this.reset();var s,a;e?(s=e,a=i,this.canvasContext.canvas.width=s,this.canvasContext.canvas.height=a):(this.animationItem.wrapper&&this.animationItem.container?(s=this.animationItem.wrapper.offsetWidth,a=this.animationItem.wrapper.offsetHeight):(s=this.canvasContext.canvas.width,a=this.canvasContext.canvas.height),this.canvasContext.canvas.width=s*this.renderConfig.dpr,this.canvasContext.canvas.height=a*this.renderConfig.dpr);var o,c;if(this.renderConfig.preserveAspectRatio.indexOf("meet")!==-1||this.renderConfig.preserveAspectRatio.indexOf("slice")!==-1){var d=this.renderConfig.preserveAspectRatio.split(" "),g=d[1]||"meet",b=d[0]||"xMidYMid",j=b.substr(0,4),_e=b.substr(4);o=s/a,c=this.transformCanvas.w/this.transformCanvas.h,c>o&&g==="meet"||c<o&&g==="slice"?(this.transformCanvas.sx=s/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=s/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=a/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=a/(this.transformCanvas.h/this.renderConfig.dpr)),j==="xMid"&&(c<o&&g==="meet"||c>o&&g==="slice")?this.transformCanvas.tx=(s-this.transformCanvas.w*(a/this.transformCanvas.h))/2*this.renderConfig.dpr:j==="xMax"&&(c<o&&g==="meet"||c>o&&g==="slice")?this.transformCanvas.tx=(s-this.transformCanvas.w*(a/this.transformCanvas.h))*this.renderConfig.dpr:this.transformCanvas.tx=0,_e==="YMid"&&(c>o&&g==="meet"||c<o&&g==="slice")?this.transformCanvas.ty=(a-this.transformCanvas.h*(s/this.transformCanvas.w))/2*this.renderConfig.dpr:_e==="YMax"&&(c>o&&g==="meet"||c<o&&g==="slice")?this.transformCanvas.ty=(a-this.transformCanvas.h*(s/this.transformCanvas.w))*this.renderConfig.dpr:this.transformCanvas.ty=0}else this.renderConfig.preserveAspectRatio==="none"?(this.transformCanvas.sx=s/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=a/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText="");var e,i=this.layers?this.layers.length:0;for(e=i-1;e>=0;e-=1)this.elements[e]&&this.elements[e].destroy&&this.elements[e].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(e,i){if(!(this.renderedFrame===e&&this.renderConfig.clearCanvas===!0&&!i||this.destroyed||e===-1)){this.renderedFrame=e,this.globalData.frameNum=e-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||i,this.globalData.projectInterface.currentFrame=e;var s,a=this.layers.length;for(this.completeLayers||this.checkLayers(e),s=a-1;s>=0;s-=1)(this.completeLayers||this.elements[s])&&this.elements[s].prepareFrame(e-this.layers[s].st);if(this.globalData._mdf){for(this.renderConfig.clearCanvas===!0?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),s=a-1;s>=0;s-=1)(this.completeLayers||this.elements[s])&&this.elements[s].renderFrame();this.renderConfig.clearCanvas!==!0&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(e){var i=this.elements;if(!(i[e]||this.layers[e].ty===99)){var s=this.createItem(this.layers[e],this,this.globalData);i[e]=s,s.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var e=this.pendingElements.pop();e.checkParenting()}},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"};function CanvasContext(){this.opacity=-1,this.transform=createTypedArray("float32",16),this.fillStyle="",this.strokeStyle="",this.lineWidth="",this.lineCap="",this.lineJoin="",this.miterLimit="",this.id=Math.random()}function CVContextData(){this.stack=[],this.cArrPos=0,this.cTr=new Matrix;var e,i=15;for(e=0;e<i;e+=1){var s=new CanvasContext;this.stack[e]=s}this._length=i,this.nativeContext=null,this.transformMat=new Matrix,this.currentOpacity=1,this.currentFillStyle="",this.appliedFillStyle="",this.currentStrokeStyle="",this.appliedStrokeStyle="",this.currentLineWidth="",this.appliedLineWidth="",this.currentLineCap="",this.appliedLineCap="",this.currentLineJoin="",this.appliedLineJoin="",this.appliedMiterLimit="",this.currentMiterLimit=""}CVContextData.prototype.duplicate=function(){var e=this._length*2,i=0;for(i=this._length;i<e;i+=1)this.stack[i]=new CanvasContext;this._length=e},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.stack[this.cArrPos].opacity=1},CVContextData.prototype.restore=function(e){this.cArrPos-=1;var i=this.stack[this.cArrPos],s=i.transform,a,o=this.cTr.props;for(a=0;a<16;a+=1)o[a]=s[a];if(e){this.nativeContext.restore();var c=this.stack[this.cArrPos+1];this.appliedFillStyle=c.fillStyle,this.appliedStrokeStyle=c.strokeStyle,this.appliedLineWidth=c.lineWidth,this.appliedLineCap=c.lineCap,this.appliedLineJoin=c.lineJoin,this.appliedMiterLimit=c.miterLimit}this.nativeContext.setTransform(s[0],s[1],s[4],s[5],s[12],s[13]),(e||i.opacity!==-1&&this.currentOpacity!==i.opacity)&&(this.nativeContext.globalAlpha=i.opacity,this.currentOpacity=i.opacity),this.currentFillStyle=i.fillStyle,this.currentStrokeStyle=i.strokeStyle,this.currentLineWidth=i.lineWidth,this.currentLineCap=i.lineCap,this.currentLineJoin=i.lineJoin,this.currentMiterLimit=i.miterLimit},CVContextData.prototype.save=function(e){e&&this.nativeContext.save();var i=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var s=this.stack[this.cArrPos],a;for(a=0;a<16;a+=1)s.transform[a]=i[a];this.cArrPos+=1;var o=this.stack[this.cArrPos];o.opacity=s.opacity,o.fillStyle=s.fillStyle,o.strokeStyle=s.strokeStyle,o.lineWidth=s.lineWidth,o.lineCap=s.lineCap,o.lineJoin=s.lineJoin,o.miterLimit=s.miterLimit},CVContextData.prototype.setOpacity=function(e){this.stack[this.cArrPos].opacity=e},CVContextData.prototype.setContext=function(e){this.nativeContext=e},CVContextData.prototype.fillStyle=function(e){this.stack[this.cArrPos].fillStyle!==e&&(this.currentFillStyle=e,this.stack[this.cArrPos].fillStyle=e)},CVContextData.prototype.strokeStyle=function(e){this.stack[this.cArrPos].strokeStyle!==e&&(this.currentStrokeStyle=e,this.stack[this.cArrPos].strokeStyle=e)},CVContextData.prototype.lineWidth=function(e){this.stack[this.cArrPos].lineWidth!==e&&(this.currentLineWidth=e,this.stack[this.cArrPos].lineWidth=e)},CVContextData.prototype.lineCap=function(e){this.stack[this.cArrPos].lineCap!==e&&(this.currentLineCap=e,this.stack[this.cArrPos].lineCap=e)},CVContextData.prototype.lineJoin=function(e){this.stack[this.cArrPos].lineJoin!==e&&(this.currentLineJoin=e,this.stack[this.cArrPos].lineJoin=e)},CVContextData.prototype.miterLimit=function(e){this.stack[this.cArrPos].miterLimit!==e&&(this.currentMiterLimit=e,this.stack[this.cArrPos].miterLimit=e)},CVContextData.prototype.transform=function(e){this.transformMat.cloneFromProps(e);var i=this.cTr;this.transformMat.multiply(i),i.cloneFromProps(this.transformMat.props);var s=i.props;this.nativeContext.setTransform(s[0],s[1],s[4],s[5],s[12],s[13])},CVContextData.prototype.opacity=function(e){var i=this.stack[this.cArrPos].opacity;i*=e<0?0:e,this.stack[this.cArrPos].opacity!==i&&(this.currentOpacity!==e&&(this.nativeContext.globalAlpha=e,this.currentOpacity=e),this.stack[this.cArrPos].opacity=i)},CVContextData.prototype.fill=function(e){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fill(e)},CVContextData.prototype.fillRect=function(e,i,s,a){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fillRect(e,i,s,a)},CVContextData.prototype.stroke=function(){this.appliedStrokeStyle!==this.currentStrokeStyle&&(this.appliedStrokeStyle=this.currentStrokeStyle,this.nativeContext.strokeStyle=this.appliedStrokeStyle),this.appliedLineWidth!==this.currentLineWidth&&(this.appliedLineWidth=this.currentLineWidth,this.nativeContext.lineWidth=this.appliedLineWidth),this.appliedLineCap!==this.currentLineCap&&(this.appliedLineCap=this.currentLineCap,this.nativeContext.lineCap=this.appliedLineCap),this.appliedLineJoin!==this.currentLineJoin&&(this.appliedLineJoin=this.currentLineJoin,this.nativeContext.lineJoin=this.appliedLineJoin),this.appliedMiterLimit!==this.currentMiterLimit&&(this.appliedMiterLimit=this.currentMiterLimit,this.nativeContext.miterLimit=this.appliedMiterLimit),this.nativeContext.stroke()};function CVCompElement(e,i,s){this.completeLayers=!1,this.layers=e.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(e,i,s),this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,i.frameRate,this):{_placeholder:!0}}extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var e=this.canvasContext;e.beginPath(),e.moveTo(0,0),e.lineTo(this.data.w,0),e.lineTo(this.data.w,this.data.h),e.lineTo(0,this.data.h),e.lineTo(0,0),e.clip();var i,s=this.layers.length;for(i=s-1;i>=0;i-=1)(this.completeLayers||this.elements[i])&&this.elements[i].renderFrame()},CVCompElement.prototype.destroy=function(){var e,i=this.layers.length;for(e=i-1;e>=0;e-=1)this.elements[e]&&this.elements[e].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(e){return new CVCompElement(e,this.globalData,this)};function CanvasRenderer(e,i){this.animationItem=e,this.renderConfig={clearCanvas:i&&i.clearCanvas!==void 0?i.clearCanvas:!0,context:i&&i.context||null,progressiveLoad:i&&i.progressiveLoad||!1,preserveAspectRatio:i&&i.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:i&&i.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:i&&i.contentVisibility||"visible",className:i&&i.className||"",id:i&&i.id||"",runExpressions:!i||i.runExpressions===void 0||i.runExpressions},this.renderConfig.dpr=i&&i.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=i&&i.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas",this.renderConfig.clearCanvas&&(this.ctxTransform=this.contextData.transform.bind(this.contextData),this.ctxOpacity=this.contextData.opacity.bind(this.contextData),this.ctxFillStyle=this.contextData.fillStyle.bind(this.contextData),this.ctxStrokeStyle=this.contextData.strokeStyle.bind(this.contextData),this.ctxLineWidth=this.contextData.lineWidth.bind(this.contextData),this.ctxLineCap=this.contextData.lineCap.bind(this.contextData),this.ctxLineJoin=this.contextData.lineJoin.bind(this.contextData),this.ctxMiterLimit=this.contextData.miterLimit.bind(this.contextData),this.ctxFill=this.contextData.fill.bind(this.contextData),this.ctxFillRect=this.contextData.fillRect.bind(this.contextData),this.ctxStroke=this.contextData.stroke.bind(this.contextData),this.save=this.contextData.save.bind(this.contextData))}extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(e){return new CVCompElement(e,this.globalData,this)};function HBaseElement(){}HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.bm!==0&&this.setBlendMode()},renderElement:function(){var i=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var s=this.finalTransform.mat.toCSS();i.transform=s,i.webkitTransform=s}this.finalTransform._opMdf&&(i.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting;function HSolidElement(e,i,s){this.initElement(e,i,s)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var e;this.data.hasMask?(e=createNS("rect"),e.setAttribute("width",this.data.sw),e.setAttribute("height",this.data.sh),e.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):(e=createTag("div"),e.style.width=this.data.sw+"px",e.style.height=this.data.sh+"px",e.style.backgroundColor=this.data.sc),this.layerElement.appendChild(e)};function HShapeElement(e,i,s){this.shapes=[],this.shapesData=e.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(e,i,s),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var e;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),e=this.svgElement;else{e=createNS("svg");var i=this.comp.data?this.comp.data:this.globalData.compSize;e.setAttribute("width",i.w),e.setAttribute("height",i.h),e.appendChild(this.shapesContainer),this.layerElement.appendChild(e)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=e},HShapeElement.prototype.getTransformedPoint=function(e,i){var s,a=e.length;for(s=0;s<a;s+=1)i=e[s].mProps.v.applyToPointArray(i[0],i[1],0);return i},HShapeElement.prototype.calculateShapeBoundingBox=function(e,i){var s=e.sh.v,a=e.transformers,o,c=s._length,d,g,b,j;if(!(c<=1)){for(o=0;o<c-1;o+=1)d=this.getTransformedPoint(a,s.v[o]),g=this.getTransformedPoint(a,s.o[o]),b=this.getTransformedPoint(a,s.i[o+1]),j=this.getTransformedPoint(a,s.v[o+1]),this.checkBounds(d,g,b,j,i);s.c&&(d=this.getTransformedPoint(a,s.v[o]),g=this.getTransformedPoint(a,s.o[o]),b=this.getTransformedPoint(a,s.i[0]),j=this.getTransformedPoint(a,s.v[0]),this.checkBounds(d,g,b,j,i))}},HShapeElement.prototype.checkBounds=function(e,i,s,a,o){this.getBoundsOfCurve(e,i,s,a);var c=this.shapeBoundingBox;o.x=bmMin(c.left,o.x),o.xMax=bmMax(c.right,o.xMax),o.y=bmMin(c.top,o.y),o.yMax=bmMax(c.bottom,o.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(e,i,s,a){for(var o=[[e[0],a[0]],[e[1],a[1]]],c,d,g,b,j,_e,$,rt=0;rt<2;++rt)d=6*e[rt]-12*i[rt]+6*s[rt],c=-3*e[rt]+9*i[rt]-9*s[rt]+3*a[rt],g=3*i[rt]-3*e[rt],d|=0,c|=0,g|=0,c===0&&d===0||(c===0?(b=-g/d,b>0&&b<1&&o[rt].push(this.calculateF(b,e,i,s,a,rt))):(j=d*d-4*g*c,j>=0&&(_e=(-d+bmSqrt(j))/(2*c),_e>0&&_e<1&&o[rt].push(this.calculateF(_e,e,i,s,a,rt)),$=(-d-bmSqrt(j))/(2*c),$>0&&$<1&&o[rt].push(this.calculateF($,e,i,s,a,rt)))));this.shapeBoundingBox.left=bmMin.apply(null,o[0]),this.shapeBoundingBox.top=bmMin.apply(null,o[1]),this.shapeBoundingBox.right=bmMax.apply(null,o[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,o[1])},HShapeElement.prototype.calculateF=function(e,i,s,a,o,c){return bmPow(1-e,3)*i[c]+3*bmPow(1-e,2)*e*s[c]+3*(1-e)*bmPow(e,2)*a[c]+bmPow(e,3)*o[c]},HShapeElement.prototype.calculateBoundingBox=function(e,i){var s,a=e.length;for(s=0;s<a;s+=1)e[s]&&e[s].sh?this.calculateShapeBoundingBox(e[s],i):e[s]&&e[s].it?this.calculateBoundingBox(e[s].it,i):e[s]&&e[s].style&&e[s].w&&this.expandStrokeBoundingBox(e[s].w,i)},HShapeElement.prototype.expandStrokeBoundingBox=function(e,i){var s=0;if(e.keyframes){for(var a=0;a<e.keyframes.length;a+=1){var o=e.keyframes[a].s;o>s&&(s=o)}s*=e.mult}else s=e.v*e.mult;i.x-=s,i.xMax+=s,i.y-=s,i.yMax+=s},HShapeElement.prototype.currentBoxContains=function(e){return this.currentBBox.x<=e.x&&this.currentBBox.y<=e.y&&this.currentBBox.width+this.currentBBox.x>=e.x+e.width&&this.currentBBox.height+this.currentBBox.y>=e.y+e.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var e=this.tempBoundingBox,i=999999;if(e.x=i,e.xMax=-i,e.y=i,e.yMax=-i,this.calculateBoundingBox(this.itemsData,e),e.width=e.xMax<e.x?0:e.xMax-e.x,e.height=e.yMax<e.y?0:e.yMax-e.y,this.currentBoxContains(e))return;var s=!1;if(this.currentBBox.w!==e.width&&(this.currentBBox.w=e.width,this.shapeCont.setAttribute("width",e.width),s=!0),this.currentBBox.h!==e.height&&(this.currentBBox.h=e.height,this.shapeCont.setAttribute("height",e.height),s=!0),s||this.currentBBox.x!==e.x||this.currentBBox.y!==e.y){this.currentBBox.w=e.width,this.currentBBox.h=e.height,this.currentBBox.x=e.x,this.currentBBox.y=e.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var a=this.shapeCont.style,o="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";a.transform=o,a.webkitTransform=o}}};function HTextElement(e,i,s){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(e,i,s)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var e=createNS("g");this.maskedElement.appendChild(e),this.innerElem=e}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var e=this.textProperty.currentData;this.renderedLetters=createSizedArray(e.l?e.l.length:0);var i=this.innerElem.style,s=e.fc?this.buildColor(e.fc):"rgba(0,0,0,0)";i.fill=s,i.color=s,e.sc&&(i.stroke=this.buildColor(e.sc),i.strokeWidth=e.sw+"px");var a=this.globalData.fontManager.getFontByName(e.f);if(!this.globalData.fontManager.chars)if(i.fontSize=e.finalSize+"px",i.lineHeight=e.finalSize+"px",a.fClass)this.innerElem.className=a.fClass;else{i.fontFamily=a.fFamily;var o=e.fWeight,c=e.fStyle;i.fontStyle=c,i.fontWeight=o}var d,g,b=e.l;g=b.length;var j,_e,$,rt=this.mHelper,st,ut="",gt=0;for(d=0;d<g;d+=1){if(this.globalData.fontManager.chars?(this.textPaths[gt]?j=this.textPaths[gt]:(j=createNS("path"),j.setAttribute("stroke-linecap",lineCapEnum[1]),j.setAttribute("stroke-linejoin",lineJoinEnum[2]),j.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[gt]?(_e=this.textSpans[gt],$=_e.children[0]):(_e=createTag("div"),_e.style.lineHeight=0,$=createNS("svg"),$.appendChild(j),styleDiv(_e)))):this.isMasked?j=this.textPaths[gt]?this.textPaths[gt]:createNS("text"):this.textSpans[gt]?(_e=this.textSpans[gt],j=this.textPaths[gt]):(_e=createTag("span"),styleDiv(_e),j=createTag("span"),styleDiv(j),_e.appendChild(j)),this.globalData.fontManager.chars){var wt=this.globalData.fontManager.getCharData(e.finalText[d],a.fStyle,this.globalData.fontManager.getFontByName(e.f).fFamily),yt;if(wt?yt=wt.data:yt=null,rt.reset(),yt&&yt.shapes&&yt.shapes.length&&(st=yt.shapes[0].it,rt.scale(e.finalSize/100,e.finalSize/100),ut=this.createPathShape(rt,st),j.setAttribute("d",ut)),this.isMasked)this.innerElem.appendChild(j);else{if(this.innerElem.appendChild(_e),yt&&yt.shapes){document.body.appendChild($);var At=$.getBBox();$.setAttribute("width",At.width+2),$.setAttribute("height",At.height+2),$.setAttribute("viewBox",At.x-1+" "+(At.y-1)+" "+(At.width+2)+" "+(At.height+2));var Ct=$.style,Tt="translate("+(At.x-1)+"px,"+(At.y-1)+"px)";Ct.transform=Tt,Ct.webkitTransform=Tt,b[d].yOffset=At.y-1}else $.setAttribute("width",1),$.setAttribute("height",1);_e.appendChild($)}}else if(j.textContent=b[d].val,j.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(j);else{this.innerElem.appendChild(_e);var kt=j.style,Pt="translate3d(0,"+-e.finalSize/1.2+"px,0)";kt.transform=Pt,kt.webkitTransform=Pt}this.isMasked?this.textSpans[gt]=j:this.textSpans[gt]=_e,this.textSpans[gt].style.display="block",this.textPaths[gt]=j,gt+=1}for(;gt<this.textSpans.length;)this.textSpans[gt].style.display="none",gt+=1},HTextElement.prototype.renderInnerContent=function(){this.validateText();var e;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),e=this.svgElement.style;var i="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";e.transform=i,e.webkitTransform=i}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),!(!this.lettersChangedFlag&&!this.textAnimator.lettersChangedFlag)){var s,a,o=0,c=this.textAnimator.renderedLetters,d=this.textProperty.currentData.l;a=d.length;var g,b,j;for(s=0;s<a;s+=1)d[s].n?o+=1:(b=this.textSpans[s],j=this.textPaths[s],g=c[o],o+=1,g._mdf.m&&(this.isMasked?b.setAttribute("transform",g.m):(b.style.webkitTransform=g.m,b.style.transform=g.m)),b.style.opacity=g.o,g.sw&&g._mdf.sw&&j.setAttribute("stroke-width",g.sw),g.sc&&g._mdf.sc&&j.setAttribute("stroke",g.sc),g.fc&&g._mdf.fc&&(j.setAttribute("fill",g.fc),j.style.color=g.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var _e=this.innerElem.getBBox();this.currentBBox.w!==_e.width&&(this.currentBBox.w=_e.width,this.svgElement.setAttribute("width",_e.width)),this.currentBBox.h!==_e.height&&(this.currentBBox.h=_e.height,this.svgElement.setAttribute("height",_e.height));var $=1;if(this.currentBBox.w!==_e.width+$*2||this.currentBBox.h!==_e.height+$*2||this.currentBBox.x!==_e.x-$||this.currentBBox.y!==_e.y-$){this.currentBBox.w=_e.width+$*2,this.currentBBox.h=_e.height+$*2,this.currentBBox.x=_e.x-$,this.currentBBox.y=_e.y-$,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),e=this.svgElement.style;var rt="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";e.transform=rt,e.webkitTransform=rt}}}};function HCameraElement(e,i,s){this.initFrame(),this.initBaseData(e,i,s),this.initHierarchy();var a=PropertyFactory.getProp;if(this.pe=a(this,e.pe,0,0,this),e.ks.p.s?(this.px=a(this,e.ks.p.x,1,0,this),this.py=a(this,e.ks.p.y,1,0,this),this.pz=a(this,e.ks.p.z,1,0,this)):this.p=a(this,e.ks.p,1,0,this),e.ks.a&&(this.a=a(this,e.ks.a,1,0,this)),e.ks.or.k.length&&e.ks.or.k[0].to){var o,c=e.ks.or.k.length;for(o=0;o<c;o+=1)e.ks.or.k[o].to=null,e.ks.or.k[o].ti=null}this.or=a(this,e.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=a(this,e.ks.rx,0,degToRads,this),this.ry=a(this,e.ks.ry,0,degToRads,this),this.rz=a(this,e.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var e,i=this.comp.threeDElements.length,s,a,o;for(e=0;e<i;e+=1)if(s=this.comp.threeDElements[e],s.type==="3d"){a=s.perspectiveElem.style,o=s.container.style;var c=this.pe.v+"px",d="0px 0px 0px",g="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";a.perspective=c,a.webkitPerspective=c,o.transformOrigin=d,o.mozTransformOrigin=d,o.webkitTransformOrigin=d,a.transform=g,a.webkitTransform=g}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var e=this._isFirstFrame,i,s;if(this.hierarchy)for(s=this.hierarchy.length,i=0;i<s;i+=1)e=this.hierarchy[i].finalTransform.mProp._mdf||e;if(e||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(s=this.hierarchy.length-1,i=s;i>=0;i-=1){var a=this.hierarchy[i].finalTransform.mProp;this.mat.translate(-a.p.v[0],-a.p.v[1],a.p.v[2]),this.mat.rotateX(-a.or.v[0]).rotateY(-a.or.v[1]).rotateZ(a.or.v[2]),this.mat.rotateX(-a.rx.v).rotateY(-a.ry.v).rotateZ(a.rz.v),this.mat.scale(1/a.s.v[0],1/a.s.v[1],1/a.s.v[2]),this.mat.translate(a.a.v[0],a.a.v[1],a.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var o;this.p?o=[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:o=[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var c=Math.sqrt(Math.pow(o[0],2)+Math.pow(o[1],2)+Math.pow(o[2],2)),d=[o[0]/c,o[1]/c,o[2]/c],g=Math.sqrt(d[2]*d[2]+d[0]*d[0]),b=Math.atan2(d[1],g),j=Math.atan2(d[0],-d[2]);this.mat.rotateY(j).rotateX(-b)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var _e=!this._prevMat.equals(this.mat);if((_e||this.pe._mdf)&&this.comp.threeDElements){s=this.comp.threeDElements.length;var $,rt,st;for(i=0;i<s;i+=1)if($=this.comp.threeDElements[i],$.type==="3d"){if(_e){var ut=this.mat.toCSS();st=$.container.style,st.transform=ut,st.webkitTransform=ut}this.pe._mdf&&(rt=$.perspectiveElem.style,rt.perspective=this.pe.v+"px",rt.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(e){this.prepareProperties(e,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null};function HImageElement(e,i,s){this.assetData=i.getAssetData(e.refId),this.initElement(e,i,s)}extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var e=this.globalData.getAssetsPath(this.assetData),i=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",e),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(i),i.crossOrigin="anonymous",i.src=e,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)};function HybridRendererBase(e,i){this.animationItem=e,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:i&&i.className||"",imagePreserveAspectRatio:i&&i.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(i&&i.hideOnTransparent===!1),filterSize:{width:i&&i.filterSize&&i.filterSize.width||"400%",height:i&&i.filterSize&&i.filterSize.height||"400%",x:i&&i.filterSize&&i.filterSize.x||"-100%",y:i&&i.filterSize&&i.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var e=this.pendingElements.pop();e.checkParenting()}},HybridRendererBase.prototype.appendElementInPos=function(e,i){var s=e.getBaseElement();if(s){var a=this.layers[i];if(!a.ddd||!this.supports3d)if(this.threeDElements)this.addTo3dContainer(s,i);else{for(var o=0,c,d,g;o<i;)this.elements[o]&&this.elements[o]!==!0&&this.elements[o].getBaseElement&&(d=this.elements[o],g=this.layers[o].ddd?this.getThreeDContainerByPos(o):d.getBaseElement(),c=g||c),o+=1;c?(!a.ddd||!this.supports3d)&&this.layerElement.insertBefore(s,c):(!a.ddd||!this.supports3d)&&this.layerElement.appendChild(s)}else this.addTo3dContainer(s,i)}},HybridRendererBase.prototype.createShape=function(e){return this.supports3d?new HShapeElement(e,this.globalData,this):new SVGShapeElement(e,this.globalData,this)},HybridRendererBase.prototype.createText=function(e){return this.supports3d?new HTextElement(e,this.globalData,this):new SVGTextLottieElement(e,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(e){return this.camera=new HCameraElement(e,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(e){return this.supports3d?new HImageElement(e,this.globalData,this):new IImageElement(e,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(e){return this.supports3d?new HSolidElement(e,this.globalData,this):new ISolidElement(e,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(e){for(var i=0,s=this.threeDElements.length;i<s;){if(this.threeDElements[i].startPos<=e&&this.threeDElements[i].endPos>=e)return this.threeDElements[i].perspectiveElem;i+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(e,i){var s=createTag("div"),a,o;styleDiv(s);var c=createTag("div");if(styleDiv(c),i==="3d"){a=s.style,a.width=this.globalData.compSize.w+"px",a.height=this.globalData.compSize.h+"px";var d="50% 50%";a.webkitTransformOrigin=d,a.mozTransformOrigin=d,a.transformOrigin=d,o=c.style;var g="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";o.transform=g,o.webkitTransform=g}s.appendChild(c);var b={container:c,perspectiveElem:s,startPos:e,endPos:e,type:i};return this.threeDElements.push(b),b},HybridRendererBase.prototype.build3dContainers=function(){var e,i=this.layers.length,s,a="";for(e=0;e<i;e+=1)this.layers[e].ddd&&this.layers[e].ty!==3?(a!=="3d"&&(a="3d",s=this.createThreeDContainer(e,"3d")),s.endPos=Math.max(s.endPos,e)):(a!=="2d"&&(a="2d",s=this.createThreeDContainer(e,"2d")),s.endPos=Math.max(s.endPos,e));for(i=this.threeDElements.length,e=i-1;e>=0;e-=1)this.resizerElem.appendChild(this.threeDElements[e].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(e,i){for(var s=0,a=this.threeDElements.length;s<a;){if(i<=this.threeDElements[s].endPos){for(var o=this.threeDElements[s].startPos,c;o<i;)this.elements[o]&&this.elements[o].getBaseElement&&(c=this.elements[o].getBaseElement()),o+=1;c?this.threeDElements[s].container.insertBefore(e,c):this.threeDElements[s].container.appendChild(e);break}s+=1}},HybridRendererBase.prototype.configAnimation=function(e){var i=createTag("div"),s=this.animationItem.wrapper,a=i.style;a.width=e.w+"px",a.height=e.h+"px",this.resizerElem=i,styleDiv(i),a.transformStyle="flat",a.mozTransformStyle="flat",a.webkitTransformStyle="flat",this.renderConfig.className&&i.setAttribute("class",this.renderConfig.className),s.appendChild(i),a.overflow="hidden";var o=createNS("svg");o.setAttribute("width","1"),o.setAttribute("height","1"),styleDiv(o),this.resizerElem.appendChild(o);var c=createNS("defs");o.appendChild(c),this.data=e,this.setupGlobalData(e,o),this.globalData.defs=c,this.layers=e.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var e,i=this.layers?this.layers.length:0;for(e=0;e<i;e+=1)this.elements[e]&&this.elements[e].destroy&&this.elements[e].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var e=this.animationItem.wrapper.offsetWidth,i=this.animationItem.wrapper.offsetHeight,s=e/i,a=this.globalData.compSize.w/this.globalData.compSize.h,o,c,d,g;a>s?(o=e/this.globalData.compSize.w,c=e/this.globalData.compSize.w,d=0,g=(i-this.globalData.compSize.h*(e/this.globalData.compSize.w))/2):(o=i/this.globalData.compSize.h,c=i/this.globalData.compSize.h,d=(e-this.globalData.compSize.w*(i/this.globalData.compSize.h))/2,g=0);var b=this.resizerElem.style;b.webkitTransform="matrix3d("+o+",0,0,0,0,"+c+",0,0,0,0,1,0,"+d+","+g+",0,1)",b.transform=b.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var e=this.globalData.compSize.w,i=this.globalData.compSize.h,s,a=this.threeDElements.length;for(s=0;s<a;s+=1){var o=this.threeDElements[s].perspectiveElem.style;o.webkitPerspective=Math.sqrt(Math.pow(e,2)+Math.pow(i,2))+"px",o.perspective=o.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(e){var i,s=e.length,a=createTag("div");for(i=0;i<s;i+=1)if(e[i].xt){var o=this.createComp(e[i],a,this.globalData.comp,null);o.initExpressions(),this.globalData.projectInterface.registerComposition(o)}};function HCompElement(e,i,s){this.layers=e.layers,this.supports3d=!e.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(e,i,s),this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,i.frameRate,this):{_placeholder:!0}}extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(e,i){for(var s=0,a;s<i;)this.elements[s]&&this.elements[s].getBaseElement&&(a=this.elements[s].getBaseElement()),s+=1;a?this.layerElement.insertBefore(e,a):this.layerElement.appendChild(e)},HCompElement.prototype.createComp=function(e){return this.supports3d?new HCompElement(e,this.globalData,this):new SVGCompElement(e,this.globalData,this)};function HybridRenderer(e,i){this.animationItem=e,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:i&&i.className||"",imagePreserveAspectRatio:i&&i.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(i&&i.hideOnTransparent===!1),filterSize:{width:i&&i.filterSize&&i.filterSize.width||"400%",height:i&&i.filterSize&&i.filterSize.height||"400%",x:i&&i.filterSize&&i.filterSize.x||"-100%",y:i&&i.filterSize&&i.filterSize.y||"-100%"},runExpressions:!i||i.runExpressions===void 0||i.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(e){return this.supports3d?new HCompElement(e,this.globalData,this):new SVGCompElement(e,this.globalData,this)};var CompExpressionInterface=function(){return function(e){function i(s){for(var a=0,o=e.layers.length;a<o;){if(e.layers[a].nm===s||e.layers[a].ind===s)return e.elements[a].layerInterface;a+=1}return null}return Object.defineProperty(i,"_name",{value:e.data.nm}),i.layer=i,i.pixelAspect=1,i.height=e.data.h||e.globalData.compSize.h,i.width=e.data.w||e.globalData.compSize.w,i.pixelAspect=1,i.frameDuration=1/e.globalData.frameRate,i.displayStartTime=0,i.numLayers=e.layers.length,i}}();function _typeof$2(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$2=function(s){return typeof s}:_typeof$2=function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},_typeof$2(e)}function seedRandom(e,i){var s=this,a=256,o=6,c=52,d="random",g=i.pow(a,o),b=i.pow(2,c),j=b*2,_e=a-1,$;function rt(Ct,Tt,kt){var Pt=[];Tt=Tt===!0?{entropy:!0}:Tt||{};var It=wt(gt(Tt.entropy?[Ct,At(e)]:Ct===null?yt():Ct,3),Pt),Lt=new st(Pt),Nt=function(){for(var dr=Lt.g(o),hs=g,_s=0;dr<b;)dr=(dr+_s)*a,hs*=a,_s=Lt.g(1);for(;dr>=j;)dr/=2,hs/=2,_s>>>=1;return(dr+_s)/hs};return Nt.int32=function(){return Lt.g(4)|0},Nt.quick=function(){return Lt.g(4)/4294967296},Nt.double=Nt,wt(At(Lt.S),e),(Tt.pass||kt||function(Ht,dr,hs,_s){return _s&&(_s.S&&ut(_s,Lt),Ht.state=function(){return ut(Lt,{})}),hs?(i[d]=Ht,dr):Ht})(Nt,It,"global"in Tt?Tt.global:this==i,Tt.state)}i["seed"+d]=rt;function st(Ct){var Tt,kt=Ct.length,Pt=this,It=0,Lt=Pt.i=Pt.j=0,Nt=Pt.S=[];for(kt||(Ct=[kt++]);It<a;)Nt[It]=It++;for(It=0;It<a;It++)Nt[It]=Nt[Lt=_e&Lt+Ct[It%kt]+(Tt=Nt[It])],Nt[Lt]=Tt;Pt.g=function(Ht){for(var dr,hs=0,_s=Pt.i,ds=Pt.j,Nn=Pt.S;Ht--;)dr=Nn[_s=_e&_s+1],hs=hs*a+Nn[_e&(Nn[_s]=Nn[ds=_e&ds+dr])+(Nn[ds]=dr)];return Pt.i=_s,Pt.j=ds,hs}}function ut(Ct,Tt){return Tt.i=Ct.i,Tt.j=Ct.j,Tt.S=Ct.S.slice(),Tt}function gt(Ct,Tt){var kt=[],Pt=_typeof$2(Ct),It;if(Tt&&Pt=="object")for(It in Ct)try{kt.push(gt(Ct[It],Tt-1))}catch{}return kt.length?kt:Pt=="string"?Ct:Ct+"\0"}function wt(Ct,Tt){for(var kt=Ct+"",Pt,It=0;It<kt.length;)Tt[_e&It]=_e&(Pt^=Tt[_e&It]*19)+kt.charCodeAt(It++);return At(Tt)}function yt(){try{var Ct=new Uint8Array(a);return(s.crypto||s.msCrypto).getRandomValues(Ct),At(Ct)}catch{var Tt=s.navigator,kt=Tt&&Tt.plugins;return[+new Date,s,kt,s.screen,At(e)]}}function At(Ct){return String.fromCharCode.apply(0,Ct)}wt(i.random(),e)}function initialize$2(e){seedRandom([],e)}var propTypes={SHAPE:"shape"};function _typeof$1(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(s){return typeof s}:_typeof$1=function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},_typeof$1(e)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null,_lottieGlobal={};initialize$2(BMMath);function resetFrame(){_lottieGlobal={}}function $bm_isInstanceOfArray(e){return e.constructor===Array||e.constructor===Float32Array}function isNumerable(e,i){return e==="number"||i instanceof Number||e==="boolean"||e==="string"}function $bm_neg(e){var i=_typeof$1(e);if(i==="number"||e instanceof Number||i==="boolean")return-e;if($bm_isInstanceOfArray(e)){var s,a=e.length,o=[];for(s=0;s<a;s+=1)o[s]=-e[s];return o}return e.propType?e.v:-e}var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(e,i){var s=_typeof$1(e),a=_typeof$1(i);if(isNumerable(s,e)&&isNumerable(a,i)||s==="string"||a==="string")return e+i;if($bm_isInstanceOfArray(e)&&isNumerable(a,i))return e=e.slice(0),e[0]+=i,e;if(isNumerable(s,e)&&$bm_isInstanceOfArray(i))return i=i.slice(0),i[0]=e+i[0],i;if($bm_isInstanceOfArray(e)&&$bm_isInstanceOfArray(i)){for(var o=0,c=e.length,d=i.length,g=[];o<c||o<d;)(typeof e[o]=="number"||e[o]instanceof Number)&&(typeof i[o]=="number"||i[o]instanceof Number)?g[o]=e[o]+i[o]:g[o]=i[o]===void 0?e[o]:e[o]||i[o],o+=1;return g}return 0}var add=sum;function sub(e,i){var s=_typeof$1(e),a=_typeof$1(i);if(isNumerable(s,e)&&isNumerable(a,i))return s==="string"&&(e=parseInt(e,10)),a==="string"&&(i=parseInt(i,10)),e-i;if($bm_isInstanceOfArray(e)&&isNumerable(a,i))return e=e.slice(0),e[0]-=i,e;if(isNumerable(s,e)&&$bm_isInstanceOfArray(i))return i=i.slice(0),i[0]=e-i[0],i;if($bm_isInstanceOfArray(e)&&$bm_isInstanceOfArray(i)){for(var o=0,c=e.length,d=i.length,g=[];o<c||o<d;)(typeof e[o]=="number"||e[o]instanceof Number)&&(typeof i[o]=="number"||i[o]instanceof Number)?g[o]=e[o]-i[o]:g[o]=i[o]===void 0?e[o]:e[o]||i[o],o+=1;return g}return 0}function mul(e,i){var s=_typeof$1(e),a=_typeof$1(i),o;if(isNumerable(s,e)&&isNumerable(a,i))return e*i;var c,d;if($bm_isInstanceOfArray(e)&&isNumerable(a,i)){for(d=e.length,o=createTypedArray("float32",d),c=0;c<d;c+=1)o[c]=e[c]*i;return o}if(isNumerable(s,e)&&$bm_isInstanceOfArray(i)){for(d=i.length,o=createTypedArray("float32",d),c=0;c<d;c+=1)o[c]=e*i[c];return o}return 0}function div(e,i){var s=_typeof$1(e),a=_typeof$1(i),o;if(isNumerable(s,e)&&isNumerable(a,i))return e/i;var c,d;if($bm_isInstanceOfArray(e)&&isNumerable(a,i)){for(d=e.length,o=createTypedArray("float32",d),c=0;c<d;c+=1)o[c]=e[c]/i;return o}if(isNumerable(s,e)&&$bm_isInstanceOfArray(i)){for(d=i.length,o=createTypedArray("float32",d),c=0;c<d;c+=1)o[c]=e/i[c];return o}return 0}function mod(e,i){return typeof e=="string"&&(e=parseInt(e,10)),typeof i=="string"&&(i=parseInt(i,10)),e%i}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(e,i,s){if(i>s){var a=s;s=i,i=a}return Math.min(Math.max(e,i),s)}function radiansToDegrees(e){return e/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(e){return e*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(e,i){if(typeof e=="number"||e instanceof Number)return i=i||0,Math.abs(e-i);i||(i=helperLengthArray);var s,a=Math.min(e.length,i.length),o=0;for(s=0;s<a;s+=1)o+=Math.pow(i[s]-e[s],2);return Math.sqrt(o)}function normalize(e){return div(e,length(e))}function rgbToHsl(e){var i=e[0],s=e[1],a=e[2],o=Math.max(i,s,a),c=Math.min(i,s,a),d,g,b=(o+c)/2;if(o===c)d=0,g=0;else{var j=o-c;switch(g=b>.5?j/(2-o-c):j/(o+c),o){case i:d=(s-a)/j+(s<a?6:0);break;case s:d=(a-i)/j+2;break;case a:d=(i-s)/j+4;break}d/=6}return[d,g,b,e[3]]}function hue2rgb(e,i,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?e+(i-e)*6*s:s<1/2?i:s<2/3?e+(i-e)*(2/3-s)*6:e}function hslToRgb(e){var i=e[0],s=e[1],a=e[2],o,c,d;if(s===0)o=a,d=a,c=a;else{var g=a<.5?a*(1+s):a+s-a*s,b=2*a-g;o=hue2rgb(b,g,i+1/3),c=hue2rgb(b,g,i),d=hue2rgb(b,g,i-1/3)}return[o,c,d,e[3]]}function linear(e,i,s,a,o){if((a===void 0||o===void 0)&&(a=i,o=s,i=0,s=1),s<i){var c=s;s=i,i=c}if(e<=i)return a;if(e>=s)return o;var d=s===i?0:(e-i)/(s-i);if(!a.length)return a+(o-a)*d;var g,b=a.length,j=createTypedArray("float32",b);for(g=0;g<b;g+=1)j[g]=a[g]+(o[g]-a[g])*d;return j}function random(e,i){if(i===void 0&&(e===void 0?(e=0,i=1):(i=e,e=void 0)),i.length){var s,a=i.length;e||(e=createTypedArray("float32",a));var o=createTypedArray("float32",a),c=BMMath.random();for(s=0;s<a;s+=1)o[s]=e[s]+c*(i[s]-e[s]);return o}e===void 0&&(e=0);var d=BMMath.random();return e+d*(i-e)}function createPath(e,i,s,a){var o,c=e.length,d=shapePool.newElement();d.setPathData(!!a,c);var g=[0,0],b,j;for(o=0;o<c;o+=1)b=i&&i[o]?i[o]:g,j=s&&s[o]?s[o]:g,d.setTripleAt(e[o][0],e[o][1],j[0]+e[o][0],j[1]+e[o][1],b[0]+e[o][0],b[1]+e[o][1],o,!0);return d}function initiateExpression(elem,data,property){function noOp(e){return e}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=val.indexOf("random")!==-1,elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||this.data.hd!==!0,wiggle=(function e(i,s){var a,o,c=this.pv.length?this.pv.length:1,d=createTypedArray("float32",c);i=5;var g=Math.floor(time*i);for(a=0,o=0;a<g;){for(o=0;o<c;o+=1)d[o]+=-s+s*2*BMMath.random();a+=1}var b=time*i,j=b-Math.floor(b),_e=createTypedArray("float32",c);if(c>1){for(o=0;o<c;o+=1)_e[o]=this.pv[o]+d[o]+(-s+s*2*BMMath.random())*j;return _e}return this.pv+d[0]+(-s+s*2*BMMath.random())*j}).bind(this);thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty));function loopInDuration(e,i){return loopIn(e,i,!0)}function loopOutDuration(e,i){return loopOut(e,i,!0)}this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);function lookAt(e,i){var s=[i[0]-e[0],i[1]-e[1],i[2]-e[2]],a=Math.atan2(s[0],Math.sqrt(s[1]*s[1]+s[2]*s[2]))/degToRads,o=-Math.atan2(s[1],s[2])/degToRads;return[o,a,0]}function easeOut(e,i,s,a,o){return applyEase(easeOutBez,e,i,s,a,o)}function easeIn(e,i,s,a,o){return applyEase(easeInBez,e,i,s,a,o)}function ease(e,i,s,a,o){return applyEase(easeInOutBez,e,i,s,a,o)}function applyEase(e,i,s,a,o,c){o===void 0?(o=s,c=a):i=(i-s)/(a-s),i>1?i=1:i<0&&(i=0);var d=e(i);if($bm_isInstanceOfArray(o)){var g,b=o.length,j=createTypedArray("float32",b);for(g=0;g<b;g+=1)j[g]=(c[g]-o[g])*d+o[g];return j}return(c-o)*d+o}function nearestKey(e){var i,s=data.k.length,a,o;if(!data.k.length||typeof data.k[0]=="number")a=0,o=0;else if(a=-1,e*=elem.comp.globalData.frameRate,e<data.k[0].t)a=1,o=data.k[0].t;else{for(i=0;i<s-1;i+=1)if(e===data.k[i].t){a=i+1,o=data.k[i].t;break}else if(e>data.k[i].t&&e<data.k[i+1].t){e-data.k[i].t>data.k[i+1].t-e?(a=i+2,o=data.k[i+1].t):(a=i+1,o=data.k[i].t);break}a===-1&&(a=i+1,o=data.k[i].t)}var c={};return c.index=a,c.time=o/elem.comp.globalData.frameRate,c}function key(e){var i,s,a;if(!data.k.length||typeof data.k[0]=="number")throw new Error("The property has no keyframe at index "+e);e-=1,i={time:data.k[e].t/elem.comp.globalData.frameRate,value:[]};var o=Object.prototype.hasOwnProperty.call(data.k[e],"s")?data.k[e].s:data.k[e-1].e;for(a=o.length,s=0;s<a;s+=1)i[s]=o[s],i.value[s]=o[s];return i}function framesToTime(e,i){return i||(i=elem.comp.globalData.frameRate),e/i}function timeToFrames(e,i){return!e&&e!==0&&(e=time),i||(i=elem.comp.globalData.frameRate),e*i}function seedRandom(e){BMMath.seedrandom(randSeed+e)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(e,i){return typeof value=="string"?i===void 0?value.substring(e):value.substring(e,i):""}function substr(e,i){return typeof value=="string"?i===void 0?value.substr(e):value.substr(e,i):""}function posterizeTime(e){time=e===0?0:Math.floor(time*e)/e,value=valueAtTime(time)}var time,velocity,value,text,textIndex,textTotal,selectorValue,index=elem.data.ind,hasParent=!!(elem.hierarchy&&elem.hierarchy.length),parent,randSeed=Math.floor(Math.random()*1e6),globalData=elem.globalData;function executeExpression(e){return value=e,this.frameExpressionId===elem.globalData.frameId&&this.propType!=="textSelector"?value:(this.propType==="textSelector"&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),elemType===4&&!content&&(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),hasParent=!!(elem.hierarchy&&elem.hierarchy.length),hasParent&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt,scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath,_lottieGlobal],ob.resetFrame=resetFrame,ob}(),Expressions=function(){var e={};e.initExpressions=i,e.resetFrame=ExpressionManager.resetFrame;function i(s){var a=0,o=[];function c(){a+=1}function d(){a-=1,a===0&&b()}function g(j){o.indexOf(j)===-1&&o.push(j)}function b(){var j,_e=o.length;for(j=0;j<_e;j+=1)o[j].release();o.length=0}s.renderer.compInterface=CompExpressionInterface(s.renderer),s.renderer.globalData.projectInterface.registerComposition(s.renderer),s.renderer.globalData.pushExpression=c,s.renderer.globalData.popExpression=d,s.renderer.globalData.registerExpressionProperty=g}return e}(),MaskManagerInterface=function(){function e(s,a){this._mask=s,this._data=a}Object.defineProperty(e.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(e.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),this._mask.op.v*100}});var i=function(a){var o=createSizedArray(a.viewData.length),c,d=a.viewData.length;for(c=0;c<d;c+=1)o[c]=new e(a.viewData[c],a.masksProperties[c]);var g=function(j){for(c=0;c<d;){if(a.masksProperties[c].nm===j)return o[c];c+=1}return null};return g};return i}(),ExpressionPropertyInterface=function(){var e={pv:0,v:0,mult:1},i={pv:[0,0,0],v:[0,0,0],mult:1};function s(d,g,b){Object.defineProperty(d,"velocity",{get:function(){return g.getVelocityAtTime(g.comp.currentFrame)}}),d.numKeys=g.keyframes?g.keyframes.length:0,d.key=function(j){if(!d.numKeys)return 0;var _e="";"s"in g.keyframes[j-1]?_e=g.keyframes[j-1].s:"e"in g.keyframes[j-2]?_e=g.keyframes[j-2].e:_e=g.keyframes[j-2].s;var $=b==="unidimensional"?new Number(_e):Object.assign({},_e);return $.time=g.keyframes[j-1].t/g.elem.comp.globalData.frameRate,$.value=b==="unidimensional"?_e[0]:_e,$},d.valueAtTime=g.getValueAtTime,d.speedAtTime=g.getSpeedAtTime,d.velocityAtTime=g.getVelocityAtTime,d.propertyGroup=g.propertyGroup}function a(d){(!d||!("pv"in d))&&(d=e);var g=1/d.mult,b=d.pv*g,j=new Number(b);return j.value=b,s(j,d,"unidimensional"),function(){return d.k&&d.getValue(),b=d.v*g,j.value!==b&&(j=new Number(b),j.value=b,s(j,d,"unidimensional")),j}}function o(d){(!d||!("pv"in d))&&(d=i);var g=1/d.mult,b=d.data&&d.data.l||d.pv.length,j=createTypedArray("float32",b),_e=createTypedArray("float32",b);return j.value=_e,s(j,d,"multidimensional"),function(){d.k&&d.getValue();for(var $=0;$<b;$+=1)_e[$]=d.v[$]*g,j[$]=_e[$];return j}}function c(){return e}return function(d){return d?d.propType==="unidimensional"?a(d):o(d):c}}(),TransformExpressionInterface=function(){return function(e){function i(d){switch(d){case"scale":case"Scale":case"ADBE Scale":case 6:return i.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return i.rotation;case"ADBE Rotate X":return i.xRotation;case"ADBE Rotate Y":return i.yRotation;case"position":case"Position":case"ADBE Position":case 2:return i.position;case"ADBE Position_0":return i.xPosition;case"ADBE Position_1":return i.yPosition;case"ADBE Position_2":return i.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return i.anchorPoint;case"opacity":case"Opacity":case 11:return i.opacity;default:return null}}Object.defineProperty(i,"rotation",{get:ExpressionPropertyInterface(e.r||e.rz)}),Object.defineProperty(i,"zRotation",{get:ExpressionPropertyInterface(e.rz||e.r)}),Object.defineProperty(i,"xRotation",{get:ExpressionPropertyInterface(e.rx)}),Object.defineProperty(i,"yRotation",{get:ExpressionPropertyInterface(e.ry)}),Object.defineProperty(i,"scale",{get:ExpressionPropertyInterface(e.s)});var s,a,o,c;return e.p?c=ExpressionPropertyInterface(e.p):(s=ExpressionPropertyInterface(e.px),a=ExpressionPropertyInterface(e.py),e.pz&&(o=ExpressionPropertyInterface(e.pz))),Object.defineProperty(i,"position",{get:function(){return e.p?c():[s(),a(),o?o():0]}}),Object.defineProperty(i,"xPosition",{get:ExpressionPropertyInterface(e.px)}),Object.defineProperty(i,"yPosition",{get:ExpressionPropertyInterface(e.py)}),Object.defineProperty(i,"zPosition",{get:ExpressionPropertyInterface(e.pz)}),Object.defineProperty(i,"anchorPoint",{get:ExpressionPropertyInterface(e.a)}),Object.defineProperty(i,"opacity",{get:ExpressionPropertyInterface(e.o)}),Object.defineProperty(i,"skew",{get:ExpressionPropertyInterface(e.sk)}),Object.defineProperty(i,"skewAxis",{get:ExpressionPropertyInterface(e.sa)}),Object.defineProperty(i,"orientation",{get:ExpressionPropertyInterface(e.or)}),i}}(),LayerExpressionInterface=function(){function e(j){var _e=new Matrix;if(j!==void 0){var $=this._elem.finalTransform.mProp.getValueAtTime(j);$.clone(_e)}else{var rt=this._elem.finalTransform.mProp;rt.applyToMatrix(_e)}return _e}function i(j,_e){var $=this.getMatrix(_e);return $.props[12]=0,$.props[13]=0,$.props[14]=0,this.applyPoint($,j)}function s(j,_e){var $=this.getMatrix(_e);return this.applyPoint($,j)}function a(j,_e){var $=this.getMatrix(_e);return $.props[12]=0,$.props[13]=0,$.props[14]=0,this.invertPoint($,j)}function o(j,_e){var $=this.getMatrix(_e);return this.invertPoint($,j)}function c(j,_e){if(this._elem.hierarchy&&this._elem.hierarchy.length){var $,rt=this._elem.hierarchy.length;for($=0;$<rt;$+=1)this._elem.hierarchy[$].finalTransform.mProp.applyToMatrix(j)}return j.applyToPointArray(_e[0],_e[1],_e[2]||0)}function d(j,_e){if(this._elem.hierarchy&&this._elem.hierarchy.length){var $,rt=this._elem.hierarchy.length;for($=0;$<rt;$+=1)this._elem.hierarchy[$].finalTransform.mProp.applyToMatrix(j)}return j.inversePoint(_e)}function g(j){var _e=new Matrix;if(_e.reset(),this._elem.finalTransform.mProp.applyToMatrix(_e),this._elem.hierarchy&&this._elem.hierarchy.length){var $,rt=this._elem.hierarchy.length;for($=0;$<rt;$+=1)this._elem.hierarchy[$].finalTransform.mProp.applyToMatrix(_e);return _e.inversePoint(j)}return _e.inversePoint(j)}function b(){return[1,1,1,1]}return function(j){var _e;function $(gt){st.mask=new MaskManagerInterface(gt,j)}function rt(gt){st.effect=gt}function st(gt){switch(gt){case"ADBE Root Vectors Group":case"Contents":case 2:return st.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return _e;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return st.effect;case"ADBE Text Properties":return st.textInterface;default:return null}}st.getMatrix=e,st.invertPoint=d,st.applyPoint=c,st.toWorld=s,st.toWorldVec=i,st.fromWorld=o,st.fromWorldVec=a,st.toComp=s,st.fromComp=g,st.sampleImage=b,st.sourceRectAtTime=j.sourceRectAtTime.bind(j),st._elem=j,_e=TransformExpressionInterface(j.finalTransform.mProp);var ut=getDescriptor(_e,"anchorPoint");return Object.defineProperties(st,{hasParent:{get:function(){return j.hierarchy.length}},parent:{get:function(){return j.hierarchy[0].layerInterface}},rotation:getDescriptor(_e,"rotation"),scale:getDescriptor(_e,"scale"),position:getDescriptor(_e,"position"),opacity:getDescriptor(_e,"opacity"),anchorPoint:ut,anchor_point:ut,transform:{get:function(){return _e}},active:{get:function(){return j.isInRange}}}),st.startTime=j.data.st,st.index=j.data.ind,st.source=j.data.refId,st.height=j.data.ty===0?j.data.h:100,st.width=j.data.ty===0?j.data.w:100,st.inPoint=j.data.ip/j.comp.globalData.frameRate,st.outPoint=j.data.op/j.comp.globalData.frameRate,st._name=j.data.nm,st.registerMaskInterface=$,st.registerEffectsInterface=rt,st}}(),propertyGroupFactory=function(){return function(e,i){return function(s){return s=s===void 0?1:s,s<=0?e:i(s-1)}}}(),PropertyInterface=function(){return function(e,i){var s={_name:e};function a(o){return o=o===void 0?1:o,o<=0?s:i(o-1)}return a}}(),EffectsExpressionInterface=function(){var e={createEffectsInterface:i};function i(o,c){if(o.effectsManager){var d=[],g=o.data.ef,b,j=o.effectsManager.effectElements.length;for(b=0;b<j;b+=1)d.push(s(g[b],o.effectsManager.effectElements[b],c,o));var _e=o.data.ef||[],$=function(st){for(b=0,j=_e.length;b<j;){if(st===_e[b].nm||st===_e[b].mn||st===_e[b].ix)return d[b];b+=1}return null};return Object.defineProperty($,"numProperties",{get:function(){return _e.length}}),$}return null}function s(o,c,d,g){function b(st){for(var ut=o.ef,gt=0,wt=ut.length;gt<wt;){if(st===ut[gt].nm||st===ut[gt].mn||st===ut[gt].ix)return ut[gt].ty===5?_e[gt]:_e[gt]();gt+=1}throw new Error}var j=propertyGroupFactory(b,d),_e=[],$,rt=o.ef.length;for($=0;$<rt;$+=1)o.ef[$].ty===5?_e.push(s(o.ef[$],c.effectElements[$],c.effectElements[$].propertyGroup,g)):_e.push(a(c.effectElements[$],o.ef[$].ty,g,j));return o.mn==="ADBE Color Control"&&Object.defineProperty(b,"color",{get:function(){return _e[0]()}}),Object.defineProperties(b,{numProperties:{get:function(){return o.np}},_name:{value:o.nm},propertyGroup:{value:j}}),b.enabled=o.en!==0,b.active=b.enabled,b}function a(o,c,d,g){var b=ExpressionPropertyInterface(o.p);function j(){return c===10?d.comp.compInterface(o.p.v):b()}return o.p.setGroupProperty&&o.p.setGroupProperty(PropertyInterface("",g)),j}return e}(),ShapePathInterface=function(){return function(i,s,a){var o=s.sh;function c(g){return g==="Shape"||g==="shape"||g==="Path"||g==="path"||g==="ADBE Vector Shape"||g===2?c.path:null}var d=propertyGroupFactory(c,a);return o.setGroupProperty(PropertyInterface("Path",d)),Object.defineProperties(c,{path:{get:function(){return o.k&&o.getValue(),o}},shape:{get:function(){return o.k&&o.getValue(),o}},_name:{value:i.nm},ix:{value:i.ix},propertyIndex:{value:i.ix},mn:{value:i.mn},propertyGroup:{value:a}}),c}}(),ShapeExpressionInterface=function(){function e(ut,gt,wt){var yt=[],At,Ct=ut?ut.length:0;for(At=0;At<Ct;At+=1)ut[At].ty==="gr"?yt.push(s(ut[At],gt[At],wt)):ut[At].ty==="fl"?yt.push(a(ut[At],gt[At],wt)):ut[At].ty==="st"?yt.push(d(ut[At],gt[At],wt)):ut[At].ty==="tm"?yt.push(g(ut[At],gt[At],wt)):ut[At].ty==="tr"||(ut[At].ty==="el"?yt.push(j(ut[At],gt[At],wt)):ut[At].ty==="sr"?yt.push(_e(ut[At],gt[At],wt)):ut[At].ty==="sh"?yt.push(ShapePathInterface(ut[At],gt[At],wt)):ut[At].ty==="rc"?yt.push($(ut[At],gt[At],wt)):ut[At].ty==="rd"?yt.push(rt(ut[At],gt[At],wt)):ut[At].ty==="rp"?yt.push(st(ut[At],gt[At],wt)):ut[At].ty==="gf"?yt.push(o(ut[At],gt[At],wt)):yt.push(c(ut[At],gt[At])));return yt}function i(ut,gt,wt){var yt,At=function(kt){for(var Pt=0,It=yt.length;Pt<It;){if(yt[Pt]._name===kt||yt[Pt].mn===kt||yt[Pt].propertyIndex===kt||yt[Pt].ix===kt||yt[Pt].ind===kt)return yt[Pt];Pt+=1}return typeof kt=="number"?yt[kt-1]:null};At.propertyGroup=propertyGroupFactory(At,wt),yt=e(ut.it,gt.it,At.propertyGroup),At.numProperties=yt.length;var Ct=b(ut.it[ut.it.length-1],gt.it[gt.it.length-1],At.propertyGroup);return At.transform=Ct,At.propertyIndex=ut.cix,At._name=ut.nm,At}function s(ut,gt,wt){var yt=function(kt){switch(kt){case"ADBE Vectors Group":case"Contents":case 2:return yt.content;default:return yt.transform}};yt.propertyGroup=propertyGroupFactory(yt,wt);var At=i(ut,gt,yt.propertyGroup),Ct=b(ut.it[ut.it.length-1],gt.it[gt.it.length-1],yt.propertyGroup);return yt.content=At,yt.transform=Ct,Object.defineProperty(yt,"_name",{get:function(){return ut.nm}}),yt.numProperties=ut.np,yt.propertyIndex=ut.ix,yt.nm=ut.nm,yt.mn=ut.mn,yt}function a(ut,gt,wt){function yt(At){return At==="Color"||At==="color"?yt.color:At==="Opacity"||At==="opacity"?yt.opacity:null}return Object.defineProperties(yt,{color:{get:ExpressionPropertyInterface(gt.c)},opacity:{get:ExpressionPropertyInterface(gt.o)},_name:{value:ut.nm},mn:{value:ut.mn}}),gt.c.setGroupProperty(PropertyInterface("Color",wt)),gt.o.setGroupProperty(PropertyInterface("Opacity",wt)),yt}function o(ut,gt,wt){function yt(At){return At==="Start Point"||At==="start point"?yt.startPoint:At==="End Point"||At==="end point"?yt.endPoint:At==="Opacity"||At==="opacity"?yt.opacity:null}return Object.defineProperties(yt,{startPoint:{get:ExpressionPropertyInterface(gt.s)},endPoint:{get:ExpressionPropertyInterface(gt.e)},opacity:{get:ExpressionPropertyInterface(gt.o)},type:{get:function(){return"a"}},_name:{value:ut.nm},mn:{value:ut.mn}}),gt.s.setGroupProperty(PropertyInterface("Start Point",wt)),gt.e.setGroupProperty(PropertyInterface("End Point",wt)),gt.o.setGroupProperty(PropertyInterface("Opacity",wt)),yt}function c(){function ut(){return null}return ut}function d(ut,gt,wt){var yt=propertyGroupFactory(It,wt),At=propertyGroupFactory(Pt,yt);function Ct(Lt){Object.defineProperty(Pt,ut.d[Lt].nm,{get:ExpressionPropertyInterface(gt.d.dataProps[Lt].p)})}var Tt,kt=ut.d?ut.d.length:0,Pt={};for(Tt=0;Tt<kt;Tt+=1)Ct(Tt),gt.d.dataProps[Tt].p.setGroupProperty(At);function It(Lt){return Lt==="Color"||Lt==="color"?It.color:Lt==="Opacity"||Lt==="opacity"?It.opacity:Lt==="Stroke Width"||Lt==="stroke width"?It.strokeWidth:null}return Object.defineProperties(It,{color:{get:ExpressionPropertyInterface(gt.c)},opacity:{get:ExpressionPropertyInterface(gt.o)},strokeWidth:{get:ExpressionPropertyInterface(gt.w)},dash:{get:function(){return Pt}},_name:{value:ut.nm},mn:{value:ut.mn}}),gt.c.setGroupProperty(PropertyInterface("Color",yt)),gt.o.setGroupProperty(PropertyInterface("Opacity",yt)),gt.w.setGroupProperty(PropertyInterface("Stroke Width",yt)),It}function g(ut,gt,wt){function yt(Ct){return Ct===ut.e.ix||Ct==="End"||Ct==="end"?yt.end:Ct===ut.s.ix?yt.start:Ct===ut.o.ix?yt.offset:null}var At=propertyGroupFactory(yt,wt);return yt.propertyIndex=ut.ix,gt.s.setGroupProperty(PropertyInterface("Start",At)),gt.e.setGroupProperty(PropertyInterface("End",At)),gt.o.setGroupProperty(PropertyInterface("Offset",At)),yt.propertyIndex=ut.ix,yt.propertyGroup=wt,Object.defineProperties(yt,{start:{get:ExpressionPropertyInterface(gt.s)},end:{get:ExpressionPropertyInterface(gt.e)},offset:{get:ExpressionPropertyInterface(gt.o)},_name:{value:ut.nm}}),yt.mn=ut.mn,yt}function b(ut,gt,wt){function yt(Ct){return ut.a.ix===Ct||Ct==="Anchor Point"?yt.anchorPoint:ut.o.ix===Ct||Ct==="Opacity"?yt.opacity:ut.p.ix===Ct||Ct==="Position"?yt.position:ut.r.ix===Ct||Ct==="Rotation"||Ct==="ADBE Vector Rotation"?yt.rotation:ut.s.ix===Ct||Ct==="Scale"?yt.scale:ut.sk&&ut.sk.ix===Ct||Ct==="Skew"?yt.skew:ut.sa&&ut.sa.ix===Ct||Ct==="Skew Axis"?yt.skewAxis:null}var At=propertyGroupFactory(yt,wt);return gt.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",At)),gt.transform.mProps.p.setGroupProperty(PropertyInterface("Position",At)),gt.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",At)),gt.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",At)),gt.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",At)),gt.transform.mProps.sk&&(gt.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",At)),gt.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",At))),gt.transform.op.setGroupProperty(PropertyInterface("Opacity",At)),Object.defineProperties(yt,{opacity:{get:ExpressionPropertyInterface(gt.transform.mProps.o)},position:{get:ExpressionPropertyInterface(gt.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(gt.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(gt.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(gt.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(gt.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(gt.transform.mProps.sa)},_name:{value:ut.nm}}),yt.ty="tr",yt.mn=ut.mn,yt.propertyGroup=wt,yt}function j(ut,gt,wt){function yt(Tt){return ut.p.ix===Tt?yt.position:ut.s.ix===Tt?yt.size:null}var At=propertyGroupFactory(yt,wt);yt.propertyIndex=ut.ix;var Ct=gt.sh.ty==="tm"?gt.sh.prop:gt.sh;return Ct.s.setGroupProperty(PropertyInterface("Size",At)),Ct.p.setGroupProperty(PropertyInterface("Position",At)),Object.defineProperties(yt,{size:{get:ExpressionPropertyInterface(Ct.s)},position:{get:ExpressionPropertyInterface(Ct.p)},_name:{value:ut.nm}}),yt.mn=ut.mn,yt}function _e(ut,gt,wt){function yt(Tt){return ut.p.ix===Tt?yt.position:ut.r.ix===Tt?yt.rotation:ut.pt.ix===Tt?yt.points:ut.or.ix===Tt||Tt==="ADBE Vector Star Outer Radius"?yt.outerRadius:ut.os.ix===Tt?yt.outerRoundness:ut.ir&&(ut.ir.ix===Tt||Tt==="ADBE Vector Star Inner Radius")?yt.innerRadius:ut.is&&ut.is.ix===Tt?yt.innerRoundness:null}var At=propertyGroupFactory(yt,wt),Ct=gt.sh.ty==="tm"?gt.sh.prop:gt.sh;return yt.propertyIndex=ut.ix,Ct.or.setGroupProperty(PropertyInterface("Outer Radius",At)),Ct.os.setGroupProperty(PropertyInterface("Outer Roundness",At)),Ct.pt.setGroupProperty(PropertyInterface("Points",At)),Ct.p.setGroupProperty(PropertyInterface("Position",At)),Ct.r.setGroupProperty(PropertyInterface("Rotation",At)),ut.ir&&(Ct.ir.setGroupProperty(PropertyInterface("Inner Radius",At)),Ct.is.setGroupProperty(PropertyInterface("Inner Roundness",At))),Object.defineProperties(yt,{position:{get:ExpressionPropertyInterface(Ct.p)},rotation:{get:ExpressionPropertyInterface(Ct.r)},points:{get:ExpressionPropertyInterface(Ct.pt)},outerRadius:{get:ExpressionPropertyInterface(Ct.or)},outerRoundness:{get:ExpressionPropertyInterface(Ct.os)},innerRadius:{get:ExpressionPropertyInterface(Ct.ir)},innerRoundness:{get:ExpressionPropertyInterface(Ct.is)},_name:{value:ut.nm}}),yt.mn=ut.mn,yt}function $(ut,gt,wt){function yt(Tt){return ut.p.ix===Tt?yt.position:ut.r.ix===Tt?yt.roundness:ut.s.ix===Tt||Tt==="Size"||Tt==="ADBE Vector Rect Size"?yt.size:null}var At=propertyGroupFactory(yt,wt),Ct=gt.sh.ty==="tm"?gt.sh.prop:gt.sh;return yt.propertyIndex=ut.ix,Ct.p.setGroupProperty(PropertyInterface("Position",At)),Ct.s.setGroupProperty(PropertyInterface("Size",At)),Ct.r.setGroupProperty(PropertyInterface("Rotation",At)),Object.defineProperties(yt,{position:{get:ExpressionPropertyInterface(Ct.p)},roundness:{get:ExpressionPropertyInterface(Ct.r)},size:{get:ExpressionPropertyInterface(Ct.s)},_name:{value:ut.nm}}),yt.mn=ut.mn,yt}function rt(ut,gt,wt){function yt(Tt){return ut.r.ix===Tt||Tt==="Round Corners 1"?yt.radius:null}var At=propertyGroupFactory(yt,wt),Ct=gt;return yt.propertyIndex=ut.ix,Ct.rd.setGroupProperty(PropertyInterface("Radius",At)),Object.defineProperties(yt,{radius:{get:ExpressionPropertyInterface(Ct.rd)},_name:{value:ut.nm}}),yt.mn=ut.mn,yt}function st(ut,gt,wt){function yt(Tt){return ut.c.ix===Tt||Tt==="Copies"?yt.copies:ut.o.ix===Tt||Tt==="Offset"?yt.offset:null}var At=propertyGroupFactory(yt,wt),Ct=gt;return yt.propertyIndex=ut.ix,Ct.c.setGroupProperty(PropertyInterface("Copies",At)),Ct.o.setGroupProperty(PropertyInterface("Offset",At)),Object.defineProperties(yt,{copies:{get:ExpressionPropertyInterface(Ct.c)},offset:{get:ExpressionPropertyInterface(Ct.o)},_name:{value:ut.nm}}),yt.mn=ut.mn,yt}return function(ut,gt,wt){var yt;function At(Tt){if(typeof Tt=="number")return Tt=Tt===void 0?1:Tt,Tt===0?wt:yt[Tt-1];for(var kt=0,Pt=yt.length;kt<Pt;){if(yt[kt]._name===Tt)return yt[kt];kt+=1}return null}function Ct(){return wt}return At.propertyGroup=propertyGroupFactory(At,Ct),yt=e(ut,gt,At.propertyGroup),At.numProperties=yt.length,At._name="Contents",At}}(),TextExpressionInterface=function(){return function(e){var i;function s(a){switch(a){case"ADBE Text Document":return s.sourceText;default:return null}}return Object.defineProperty(s,"sourceText",{get:function(){e.textProperty.getValue();var o=e.textProperty.currentData.t;return(!i||o!==i.value)&&(i=new String(o),i.value=o||new String(o),Object.defineProperty(i,"style",{get:function(){return{fillColor:e.textProperty.currentData.fc}}})),i}}),s}}();function _typeof(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(s){return typeof s}:_typeof=function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},_typeof(e)}var FootageInterface=function(){var e=function(a){var o="",c=a.getFootageData();function d(){return o="",c=a.getFootageData(),g}function g(b){if(c[b])return o=b,c=c[b],_typeof(c)==="object"?g:c;var j=b.indexOf(o);if(j!==-1){var _e=parseInt(b.substr(j+o.length),10);return c=c[_e],_typeof(c)==="object"?g:c}return""}return d},i=function(a){function o(c){return c==="Outline"?o.outlineInterface():null}return o._name="Outline",o.outlineInterface=e(a),o};return function(s){function a(o){return o==="Data"?a.dataInterface:null}return a._name="Data",a.dataInterface=i(s),a}}(),interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(e){return interfaces[e]||null}var expressionHelpers=function(){function e(d,g,b){g.x&&(b.k=!0,b.x=!0,b.initiateExpression=ExpressionManager.initiateExpression,b.effectsSequence.push(b.initiateExpression(d,g,b).bind(b)))}function i(d){return d*=this.elem.globalData.frameRate,d-=this.offsetTime,d!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<d?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(d,this._cachingAtTime),this._cachingAtTime.lastFrame=d),this._cachingAtTime.value}function s(d){var g=-.01,b=this.getValueAtTime(d),j=this.getValueAtTime(d+g),_e=0;if(b.length){var $;for($=0;$<b.length;$+=1)_e+=Math.pow(j[$]-b[$],2);_e=Math.sqrt(_e)*100}else _e=0;return _e}function a(d){if(this.vel!==void 0)return this.vel;var g=-.001,b=this.getValueAtTime(d),j=this.getValueAtTime(d+g),_e;if(b.length){_e=createTypedArray("float32",b.length);var $;for($=0;$<b.length;$+=1)_e[$]=(j[$]-b[$])/g}else _e=(j-b)/g;return _e}function o(){return this.pv}function c(d){this.propertyGroup=d}return{searchExpressions:e,getSpeedAtTime:s,getVelocityAtTime:a,getValueAtTime:i,getStaticValueAtTime:o,setGroupProperty:c}}();function addPropertyDecorator(){function e(rt,st,ut){if(!this.k||!this.keyframes)return this.pv;rt=rt?rt.toLowerCase():"";var gt=this.comp.renderedFrame,wt=this.keyframes,yt=wt[wt.length-1].t;if(gt<=yt)return this.pv;var At,Ct;ut?(st?At=Math.abs(yt-this.elem.comp.globalData.frameRate*st):At=Math.max(0,yt-this.elem.data.ip),Ct=yt-At):((!st||st>wt.length-1)&&(st=wt.length-1),Ct=wt[wt.length-1-st].t,At=yt-Ct);var Tt,kt,Pt;if(rt==="pingpong"){var It=Math.floor((gt-Ct)/At);if(It%2!==0)return this.getValueAtTime((At-(gt-Ct)%At+Ct)/this.comp.globalData.frameRate,0)}else if(rt==="offset"){var Lt=this.getValueAtTime(Ct/this.comp.globalData.frameRate,0),Nt=this.getValueAtTime(yt/this.comp.globalData.frameRate,0),Ht=this.getValueAtTime(((gt-Ct)%At+Ct)/this.comp.globalData.frameRate,0),dr=Math.floor((gt-Ct)/At);if(this.pv.length){for(Pt=new Array(Lt.length),kt=Pt.length,Tt=0;Tt<kt;Tt+=1)Pt[Tt]=(Nt[Tt]-Lt[Tt])*dr+Ht[Tt];return Pt}return(Nt-Lt)*dr+Ht}else if(rt==="continue"){var hs=this.getValueAtTime(yt/this.comp.globalData.frameRate,0),_s=this.getValueAtTime((yt-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(Pt=new Array(hs.length),kt=Pt.length,Tt=0;Tt<kt;Tt+=1)Pt[Tt]=hs[Tt]+(hs[Tt]-_s[Tt])*((gt-yt)/this.comp.globalData.frameRate)/5e-4;return Pt}return hs+(hs-_s)*((gt-yt)/.001)}return this.getValueAtTime(((gt-Ct)%At+Ct)/this.comp.globalData.frameRate,0)}function i(rt,st,ut){if(!this.k)return this.pv;rt=rt?rt.toLowerCase():"";var gt=this.comp.renderedFrame,wt=this.keyframes,yt=wt[0].t;if(gt>=yt)return this.pv;var At,Ct;ut?(st?At=Math.abs(this.elem.comp.globalData.frameRate*st):At=Math.max(0,this.elem.data.op-yt),Ct=yt+At):((!st||st>wt.length-1)&&(st=wt.length-1),Ct=wt[st].t,At=Ct-yt);var Tt,kt,Pt;if(rt==="pingpong"){var It=Math.floor((yt-gt)/At);if(It%2===0)return this.getValueAtTime(((yt-gt)%At+yt)/this.comp.globalData.frameRate,0)}else if(rt==="offset"){var Lt=this.getValueAtTime(yt/this.comp.globalData.frameRate,0),Nt=this.getValueAtTime(Ct/this.comp.globalData.frameRate,0),Ht=this.getValueAtTime((At-(yt-gt)%At+yt)/this.comp.globalData.frameRate,0),dr=Math.floor((yt-gt)/At)+1;if(this.pv.length){for(Pt=new Array(Lt.length),kt=Pt.length,Tt=0;Tt<kt;Tt+=1)Pt[Tt]=Ht[Tt]-(Nt[Tt]-Lt[Tt])*dr;return Pt}return Ht-(Nt-Lt)*dr}else if(rt==="continue"){var hs=this.getValueAtTime(yt/this.comp.globalData.frameRate,0),_s=this.getValueAtTime((yt+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(Pt=new Array(hs.length),kt=Pt.length,Tt=0;Tt<kt;Tt+=1)Pt[Tt]=hs[Tt]+(hs[Tt]-_s[Tt])*(yt-gt)/.001;return Pt}return hs+(hs-_s)*(yt-gt)/.001}return this.getValueAtTime((At-((yt-gt)%At+yt))/this.comp.globalData.frameRate,0)}function s(rt,st){if(!this.k)return this.pv;if(rt=(rt||.4)*.5,st=Math.floor(st||5),st<=1)return this.pv;var ut=this.comp.renderedFrame/this.comp.globalData.frameRate,gt=ut-rt,wt=ut+rt,yt=st>1?(wt-gt)/(st-1):1,At=0,Ct=0,Tt;this.pv.length?Tt=createTypedArray("float32",this.pv.length):Tt=0;for(var kt;At<st;){if(kt=this.getValueAtTime(gt+At*yt),this.pv.length)for(Ct=0;Ct<this.pv.length;Ct+=1)Tt[Ct]+=kt[Ct];else Tt+=kt;At+=1}if(this.pv.length)for(Ct=0;Ct<this.pv.length;Ct+=1)Tt[Ct]/=st;else Tt/=st;return Tt}function a(rt){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var st=this._transformCachingAtTime.v;if(st.cloneFromProps(this.pre.props),this.appliedTransformations<1){var ut=this.a.getValueAtTime(rt);st.translate(-ut[0]*this.a.mult,-ut[1]*this.a.mult,ut[2]*this.a.mult)}if(this.appliedTransformations<2){var gt=this.s.getValueAtTime(rt);st.scale(gt[0]*this.s.mult,gt[1]*this.s.mult,gt[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var wt=this.sk.getValueAtTime(rt),yt=this.sa.getValueAtTime(rt);st.skewFromAxis(-wt*this.sk.mult,yt*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var At=this.r.getValueAtTime(rt);st.rotate(-At*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var Ct=this.rz.getValueAtTime(rt),Tt=this.ry.getValueAtTime(rt),kt=this.rx.getValueAtTime(rt),Pt=this.or.getValueAtTime(rt);st.rotateZ(-Ct*this.rz.mult).rotateY(Tt*this.ry.mult).rotateX(kt*this.rx.mult).rotateZ(-Pt[2]*this.or.mult).rotateY(Pt[1]*this.or.mult).rotateX(Pt[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var It=this.px.getValueAtTime(rt),Lt=this.py.getValueAtTime(rt);if(this.data.p.z){var Nt=this.pz.getValueAtTime(rt);st.translate(It*this.px.mult,Lt*this.py.mult,-Nt*this.pz.mult)}else st.translate(It*this.px.mult,Lt*this.py.mult,0)}else{var Ht=this.p.getValueAtTime(rt);st.translate(Ht[0]*this.p.mult,Ht[1]*this.p.mult,-Ht[2]*this.p.mult)}return st}function o(){return this.v.clone(new Matrix)}var c=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(rt,st,ut){var gt=c(rt,st,ut);return gt.dynamicProperties.length?gt.getValueAtTime=a.bind(gt):gt.getValueAtTime=o.bind(gt),gt.setGroupProperty=expressionHelpers.setGroupProperty,gt};var d=PropertyFactory.getProp;PropertyFactory.getProp=function(rt,st,ut,gt,wt){var yt=d(rt,st,ut,gt,wt);yt.kf?yt.getValueAtTime=expressionHelpers.getValueAtTime.bind(yt):yt.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(yt),yt.setGroupProperty=expressionHelpers.setGroupProperty,yt.loopOut=e,yt.loopIn=i,yt.smooth=s,yt.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(yt),yt.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(yt),yt.numKeys=st.a===1?st.k.length:0,yt.propertyIndex=st.ix;var At=0;return ut!==0&&(At=createTypedArray("float32",st.a===1?st.k[0].s.length:st.k.length)),yt._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:At},expressionHelpers.searchExpressions(rt,st,yt),yt.k&&wt.addDynamicProperty(yt),yt};function g(rt){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),rt*=this.elem.globalData.frameRate,rt-=this.offsetTime,rt!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<rt?this._caching.lastIndex:0,this._cachingAtTime.lastTime=rt,this.interpolateShape(rt,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue}var b=ShapePropertyFactory.getConstructorFunction(),j=ShapePropertyFactory.getKeyframedConstructorFunction();function _e(){}_e.prototype={vertices:function(st,ut){this.k&&this.getValue();var gt=this.v;ut!==void 0&&(gt=this.getValueAtTime(ut,0));var wt,yt=gt._length,At=gt[st],Ct=gt.v,Tt=createSizedArray(yt);for(wt=0;wt<yt;wt+=1)st==="i"||st==="o"?Tt[wt]=[At[wt][0]-Ct[wt][0],At[wt][1]-Ct[wt][1]]:Tt[wt]=[At[wt][0],At[wt][1]];return Tt},points:function(st){return this.vertices("v",st)},inTangents:function(st){return this.vertices("i",st)},outTangents:function(st){return this.vertices("o",st)},isClosed:function(){return this.v.c},pointOnPath:function(st,ut){var gt=this.v;ut!==void 0&&(gt=this.getValueAtTime(ut,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(gt));for(var wt=this._segmentsLength,yt=wt.lengths,At=wt.totalLength*st,Ct=0,Tt=yt.length,kt=0,Pt;Ct<Tt;){if(kt+yt[Ct].addedLength>At){var It=Ct,Lt=gt.c&&Ct===Tt-1?0:Ct+1,Nt=(At-kt)/yt[Ct].addedLength;Pt=bez.getPointInSegment(gt.v[It],gt.v[Lt],gt.o[It],gt.i[Lt],Nt,yt[Ct]);break}else kt+=yt[Ct].addedLength;Ct+=1}return Pt||(Pt=gt.c?[gt.v[0][0],gt.v[0][1]]:[gt.v[gt._length-1][0],gt.v[gt._length-1][1]]),Pt},vectorOnPath:function(st,ut,gt){st==1?st=this.v.c:st==0&&(st=.999);var wt=this.pointOnPath(st,ut),yt=this.pointOnPath(st+.001,ut),At=yt[0]-wt[0],Ct=yt[1]-wt[1],Tt=Math.sqrt(Math.pow(At,2)+Math.pow(Ct,2));if(Tt===0)return[0,0];var kt=gt==="tangent"?[At/Tt,Ct/Tt]:[-Ct/Tt,At/Tt];return kt},tangentOnPath:function(st,ut){return this.vectorOnPath(st,ut,"tangent")},normalOnPath:function(st,ut){return this.vectorOnPath(st,ut,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([_e],b),extendPrototype([_e],j),j.prototype.getValueAtTime=g,j.prototype.initiateExpression=ExpressionManager.initiateExpression;var $=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(rt,st,ut,gt,wt){var yt=$(rt,st,ut,gt,wt);return yt.propertyIndex=st.ix,yt.lock=!1,ut===3?expressionHelpers.searchExpressions(rt,st.pt,yt):ut===4&&expressionHelpers.searchExpressions(rt,st.ks,yt),yt.k&&rt.addDynamicProperty(yt),yt}}function initialize$1(){addPropertyDecorator()}function addDecorator(){function e(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}TextProperty.prototype.getExpressionValue=function(i,s){var a=this.calculateExpression(s);if(i.t!==a){var o={};return this.copyData(o,i),o.t=a.toString(),o.__complete=!1,o}return i},TextProperty.prototype.searchProperty=function(){var i=this.searchKeyframes(),s=this.searchExpressions();return this.kf=i||s,this.kf},TextProperty.prototype.searchExpressions=e}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function e(i,s){var a=createNS("feMerge");a.setAttribute("result",i);var o,c;for(c=0;c<s.length;c+=1)o=createNS("feMergeNode"),o.setAttribute("in",s[c]),a.appendChild(o),a.appendChild(o);return a}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(e,i,s,a,o){this.filterManager=i;var c=createNS("feColorMatrix");c.setAttribute("type","matrix"),c.setAttribute("color-interpolation-filters","linearRGB"),c.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=c,c.setAttribute("result",a+"_tint_1"),e.appendChild(c),c=createNS("feColorMatrix"),c.setAttribute("type","matrix"),c.setAttribute("color-interpolation-filters","sRGB"),c.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),c.setAttribute("result",a+"_tint_2"),e.appendChild(c),this.matrixFilter=c;var d=this.createMergeNode(a,[o,a+"_tint_1",a+"_tint_2"]);e.appendChild(d)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var i=this.filterManager.effectElements[0].p.v,s=this.filterManager.effectElements[1].p.v,a=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+a+" 0"),this.matrixFilter.setAttribute("values",s[0]-i[0]+" 0 0 0 "+i[0]+" "+(s[1]-i[1])+" 0 0 0 "+i[1]+" "+(s[2]-i[2])+" 0 0 0 "+i[2]+" 0 0 0 1 0")}};function SVGFillFilter(e,i,s,a){this.filterManager=i;var o=createNS("feColorMatrix");o.setAttribute("type","matrix"),o.setAttribute("color-interpolation-filters","sRGB"),o.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),o.setAttribute("result",a),e.appendChild(o),this.matrixFilter=o}SVGFillFilter.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var i=this.filterManager.effectElements[2].p.v,s=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+i[0]+" 0 0 0 0 "+i[1]+" 0 0 0 0 "+i[2]+" 0 0 0 "+s+" 0")}};function SVGStrokeEffect(e,i,s){this.initialized=!1,this.filterManager=i,this.elem=s,this.paths=[]}SVGStrokeEffect.prototype.initialize=function(){var e=this.elem.layerElement.children||this.elem.layerElement.childNodes,i,s,a,o;for(this.filterManager.effectElements[1].p.v===1?(o=this.elem.maskManager.masksProperties.length,a=0):(a=this.filterManager.effectElements[0].p.v-1,o=a+1),s=createNS("g"),s.setAttribute("fill","none"),s.setAttribute("stroke-linecap","round"),s.setAttribute("stroke-dashoffset",1),a;a<o;a+=1)i=createNS("path"),s.appendChild(i),this.paths.push({p:i,m:a});if(this.filterManager.effectElements[10].p.v===3){var c=createNS("mask"),d=createElementID();c.setAttribute("id",d),c.setAttribute("mask-type","alpha"),c.appendChild(s),this.elem.globalData.defs.appendChild(c);var g=createNS("g");for(g.setAttribute("mask","url("+getLocationHref()+"#"+d+")");e[0];)g.appendChild(e[0]);this.elem.layerElement.appendChild(g),this.masker=c,s.setAttribute("stroke","#fff")}else if(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2){if(this.filterManager.effectElements[10].p.v===2)for(e=this.elem.layerElement.children||this.elem.layerElement.childNodes;e.length;)this.elem.layerElement.removeChild(e[0]);this.elem.layerElement.appendChild(s),this.elem.layerElement.removeAttribute("mask"),s.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=s},SVGStrokeEffect.prototype.renderFrame=function(e){this.initialized||this.initialize();var i,s=this.paths.length,a,o;for(i=0;i<s;i+=1)if(this.paths[i].m!==-1&&(a=this.elem.maskManager.viewData[this.paths[i].m],o=this.paths[i].p,(e||this.filterManager._mdf||a.prop._mdf)&&o.setAttribute("d",a.lastPath),e||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||a.prop._mdf)){var c;if(this.filterManager.effectElements[7].p.v!==0||this.filterManager.effectElements[8].p.v!==100){var d=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,g=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,b=o.getTotalLength();c="0 0 0 "+b*d+" ";var j=b*(g-d),_e=1+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01,$=Math.floor(j/_e),rt;for(rt=0;rt<$;rt+=1)c+="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01+" ";c+="0 "+b*10+" 0 0"}else c="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01;o.setAttribute("stroke-dasharray",c)}if((e||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",this.filterManager.effectElements[4].p.v*2),(e||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2)&&(e||this.filterManager.effectElements[3].p._mdf)){var st=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(st[0]*255)+","+bmFloor(st[1]*255)+","+bmFloor(st[2]*255)+")")}};function SVGTritoneFilter(e,i,s,a){this.filterManager=i;var o=createNS("feColorMatrix");o.setAttribute("type","matrix"),o.setAttribute("color-interpolation-filters","linearRGB"),o.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),e.appendChild(o);var c=createNS("feComponentTransfer");c.setAttribute("color-interpolation-filters","sRGB"),c.setAttribute("result",a),this.matrixFilter=c;var d=createNS("feFuncR");d.setAttribute("type","table"),c.appendChild(d),this.feFuncR=d;var g=createNS("feFuncG");g.setAttribute("type","table"),c.appendChild(g),this.feFuncG=g;var b=createNS("feFuncB");b.setAttribute("type","table"),c.appendChild(b),this.feFuncB=b,e.appendChild(c)}SVGTritoneFilter.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var i=this.filterManager.effectElements[0].p.v,s=this.filterManager.effectElements[1].p.v,a=this.filterManager.effectElements[2].p.v,o=a[0]+" "+s[0]+" "+i[0],c=a[1]+" "+s[1]+" "+i[1],d=a[2]+" "+s[2]+" "+i[2];this.feFuncR.setAttribute("tableValues",o),this.feFuncG.setAttribute("tableValues",c),this.feFuncB.setAttribute("tableValues",d)}};function SVGProLevelsFilter(e,i,s,a){this.filterManager=i;var o=this.filterManager.effectElements,c=createNS("feComponentTransfer");(o[10].p.k||o[10].p.v!==0||o[11].p.k||o[11].p.v!==1||o[12].p.k||o[12].p.v!==1||o[13].p.k||o[13].p.v!==0||o[14].p.k||o[14].p.v!==1)&&(this.feFuncR=this.createFeFunc("feFuncR",c)),(o[17].p.k||o[17].p.v!==0||o[18].p.k||o[18].p.v!==1||o[19].p.k||o[19].p.v!==1||o[20].p.k||o[20].p.v!==0||o[21].p.k||o[21].p.v!==1)&&(this.feFuncG=this.createFeFunc("feFuncG",c)),(o[24].p.k||o[24].p.v!==0||o[25].p.k||o[25].p.v!==1||o[26].p.k||o[26].p.v!==1||o[27].p.k||o[27].p.v!==0||o[28].p.k||o[28].p.v!==1)&&(this.feFuncB=this.createFeFunc("feFuncB",c)),(o[31].p.k||o[31].p.v!==0||o[32].p.k||o[32].p.v!==1||o[33].p.k||o[33].p.v!==1||o[34].p.k||o[34].p.v!==0||o[35].p.k||o[35].p.v!==1)&&(this.feFuncA=this.createFeFunc("feFuncA",c)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(c.setAttribute("color-interpolation-filters","sRGB"),e.appendChild(c)),(o[3].p.k||o[3].p.v!==0||o[4].p.k||o[4].p.v!==1||o[5].p.k||o[5].p.v!==1||o[6].p.k||o[6].p.v!==0||o[7].p.k||o[7].p.v!==1)&&(c=createNS("feComponentTransfer"),c.setAttribute("color-interpolation-filters","sRGB"),c.setAttribute("result",a),e.appendChild(c),this.feFuncRComposed=this.createFeFunc("feFuncR",c),this.feFuncGComposed=this.createFeFunc("feFuncG",c),this.feFuncBComposed=this.createFeFunc("feFuncB",c))}SVGProLevelsFilter.prototype.createFeFunc=function(e,i){var s=createNS(e);return s.setAttribute("type","table"),i.appendChild(s),s},SVGProLevelsFilter.prototype.getTableValue=function(e,i,s,a,o){for(var c=0,d=256,g,b=Math.min(e,i),j=Math.max(e,i),_e=Array.call(null,{length:d}),$,rt=0,st=o-a,ut=i-e;c<=256;)g=c/256,g<=b?$=ut<0?o:a:g>=j?$=ut<0?a:o:$=a+st*Math.pow((g-e)/ut,1/s),_e[rt]=$,rt+=1,c+=256/(d-1);return _e.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var i,s=this.filterManager.effectElements;this.feFuncRComposed&&(e||s[3].p._mdf||s[4].p._mdf||s[5].p._mdf||s[6].p._mdf||s[7].p._mdf)&&(i=this.getTableValue(s[3].p.v,s[4].p.v,s[5].p.v,s[6].p.v,s[7].p.v),this.feFuncRComposed.setAttribute("tableValues",i),this.feFuncGComposed.setAttribute("tableValues",i),this.feFuncBComposed.setAttribute("tableValues",i)),this.feFuncR&&(e||s[10].p._mdf||s[11].p._mdf||s[12].p._mdf||s[13].p._mdf||s[14].p._mdf)&&(i=this.getTableValue(s[10].p.v,s[11].p.v,s[12].p.v,s[13].p.v,s[14].p.v),this.feFuncR.setAttribute("tableValues",i)),this.feFuncG&&(e||s[17].p._mdf||s[18].p._mdf||s[19].p._mdf||s[20].p._mdf||s[21].p._mdf)&&(i=this.getTableValue(s[17].p.v,s[18].p.v,s[19].p.v,s[20].p.v,s[21].p.v),this.feFuncG.setAttribute("tableValues",i)),this.feFuncB&&(e||s[24].p._mdf||s[25].p._mdf||s[26].p._mdf||s[27].p._mdf||s[28].p._mdf)&&(i=this.getTableValue(s[24].p.v,s[25].p.v,s[26].p.v,s[27].p.v,s[28].p.v),this.feFuncB.setAttribute("tableValues",i)),this.feFuncA&&(e||s[31].p._mdf||s[32].p._mdf||s[33].p._mdf||s[34].p._mdf||s[35].p._mdf)&&(i=this.getTableValue(s[31].p.v,s[32].p.v,s[33].p.v,s[34].p.v,s[35].p.v),this.feFuncA.setAttribute("tableValues",i))}};function SVGDropShadowEffect(e,i,s,a,o){var c=i.container.globalData.renderConfig.filterSize,d=i.data.fs||c;e.setAttribute("x",d.x||c.x),e.setAttribute("y",d.y||c.y),e.setAttribute("width",d.width||c.width),e.setAttribute("height",d.height||c.height),this.filterManager=i;var g=createNS("feGaussianBlur");g.setAttribute("in","SourceAlpha"),g.setAttribute("result",a+"_drop_shadow_1"),g.setAttribute("stdDeviation","0"),this.feGaussianBlur=g,e.appendChild(g);var b=createNS("feOffset");b.setAttribute("dx","25"),b.setAttribute("dy","0"),b.setAttribute("in",a+"_drop_shadow_1"),b.setAttribute("result",a+"_drop_shadow_2"),this.feOffset=b,e.appendChild(b);var j=createNS("feFlood");j.setAttribute("flood-color","#00ff00"),j.setAttribute("flood-opacity","1"),j.setAttribute("result",a+"_drop_shadow_3"),this.feFlood=j,e.appendChild(j);var _e=createNS("feComposite");_e.setAttribute("in",a+"_drop_shadow_3"),_e.setAttribute("in2",a+"_drop_shadow_2"),_e.setAttribute("operator","in"),_e.setAttribute("result",a+"_drop_shadow_4"),e.appendChild(_e);var $=this.createMergeNode(a,[a+"_drop_shadow_4",o]);e.appendChild($)}extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){if((e||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),e||this.filterManager.effectElements[0].p._mdf){var i=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(i[0]*255),Math.round(i[1]*255),Math.round(i[2]*255)))}if((e||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),e||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var s=this.filterManager.effectElements[3].p.v,a=(this.filterManager.effectElements[2].p.v-90)*degToRads,o=s*Math.cos(a),c=s*Math.sin(a);this.feOffset.setAttribute("dx",o),this.feOffset.setAttribute("dy",c)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(e,i,s){this.initialized=!1,this.filterManager=i,this.filterElem=e,this.elem=s,s.matteElement=createNS("g"),s.matteElement.appendChild(s.layerElement),s.matteElement.appendChild(s.transformedElement),s.baseElement=s.matteElement}SVGMatte3Effect.prototype.findSymbol=function(e){for(var i=0,s=_svgMatteSymbols.length;i<s;){if(_svgMatteSymbols[i]===e)return _svgMatteSymbols[i];i+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(e,i){var s=e.layerElement.parentNode;if(s){for(var a=s.children,o=0,c=a.length;o<c&&a[o]!==e.layerElement;)o+=1;var d;o<=c-2&&(d=a[o+1]);var g=createNS("use");g.setAttribute("href","#"+i),d?s.insertBefore(g,d):s.appendChild(g)}},SVGMatte3Effect.prototype.setElementAsMask=function(e,i){if(!this.findSymbol(i)){var s=createElementID(),a=createNS("mask");a.setAttribute("id",i.layerId),a.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(i);var o=e.globalData.defs;o.appendChild(a);var c=createNS("symbol");c.setAttribute("id",s),this.replaceInParent(i,s),c.appendChild(i.layerElement),o.appendChild(c);var d=createNS("use");d.setAttribute("href","#"+s),a.appendChild(d),i.data.hd=!1,i.show()}e.setMatte(i.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var e=this.filterManager.effectElements[0].p.v,i=this.elem.comp.elements,s=0,a=i.length;s<a;)i[s]&&i[s].data.ind===e&&this.setElementAsMask(this.elem,i[s]),s+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()};function SVGGaussianBlurEffect(e,i,s,a){e.setAttribute("x","-100%"),e.setAttribute("y","-100%"),e.setAttribute("width","300%"),e.setAttribute("height","300%"),this.filterManager=i;var o=createNS("feGaussianBlur");o.setAttribute("result",a),e.appendChild(o),this.feGaussianBlur=o}SVGGaussianBlurEffect.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var i=.3,s=this.filterManager.effectElements[0].p.v*i,a=this.filterManager.effectElements[1].p.v,o=a==3?0:s,c=a==2?0:s;this.feGaussianBlur.setAttribute("stdDeviation",o+" "+c);var d=this.filterManager.effectElements[2].p.v==1?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",d)}};function TransformEffect(){}TransformEffect.prototype.init=function(e){this.effectsManager=e,this.type=effectTypes.TRANSFORM_EFFECT,this.matrix=new Matrix,this.opacity=-1,this._mdf=!1,this._opMdf=!1},TransformEffect.prototype.renderFrame=function(e){if(this._opMdf=!1,this._mdf=!1,e||this.effectsManager._mdf){var i=this.effectsManager.effectElements,s=i[0].p.v,a=i[1].p.v,o=i[2].p.v===1,c=i[3].p.v,d=o?c:i[4].p.v,g=i[5].p.v,b=i[6].p.v,j=i[7].p.v;this.matrix.reset(),this.matrix.translate(-s[0],-s[1],s[2]),this.matrix.scale(d*.01,c*.01,1),this.matrix.rotate(-j*degToRads),this.matrix.skewFromAxis(-g*degToRads,(b+90)*degToRads),this.matrix.translate(a[0],a[1],0),this._mdf=!0,this.opacity!==i[8].p.v&&(this.opacity=i[8].p.v,this._opMdf=!0)}};function SVGTransformEffect(e,i){this.init(i)}extendPrototype([TransformEffect],SVGTransformEffect);function CVTransformEffect(e){this.init(e)}return extendPrototype([TransformEffect],CVTransformEffect),registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect$1(20,SVGTintFilter,!0),registerEffect$1(21,SVGFillFilter,!0),registerEffect$1(22,SVGStrokeEffect,!1),registerEffect$1(23,SVGTritoneFilter,!0),registerEffect$1(24,SVGProLevelsFilter,!0),registerEffect$1(25,SVGDropShadowEffect,!0),registerEffect$1(28,SVGMatte3Effect,!1),registerEffect$1(29,SVGGaussianBlurEffect,!0),registerEffect$1(35,SVGTransformEffect,!1),registerEffect(35,CVTransformEffect),lottie})})(lottie$1,lottie$1.exports);var lottieExports=lottie$1.exports;const lottie=getDefaultExportFromCjs(lottieExports);function _iterableToArrayLimit(e,i){var s=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(s!=null){var a,o,c,d,g=[],b=!0,j=!1;try{if(c=(s=s.call(e)).next,i===0){if(Object(s)!==s)return;b=!1}else for(;!(b=(a=c.call(s)).done)&&(g.push(a.value),g.length!==i);b=!0);}catch(_e){j=!0,o=_e}finally{try{if(!b&&s.return!=null&&(d=s.return(),Object(d)!==d))return}finally{if(j)throw o}}return g}}function ownKeys(e,i){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);i&&(a=a.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),s.push.apply(s,a)}return s}function _objectSpread2(e){for(var i=1;i<arguments.length;i++){var s=arguments[i]!=null?arguments[i]:{};i%2?ownKeys(Object(s),!0).forEach(function(a){_defineProperty(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ownKeys(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function _defineProperty(e,i,s){return i=_toPropertyKey(i),i in e?Object.defineProperty(e,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[i]=s,e}function _objectWithoutPropertiesLoose(e,i){if(e==null)return{};var s={},a=Object.keys(e),o,c;for(c=0;c<a.length;c++)o=a[c],!(i.indexOf(o)>=0)&&(s[o]=e[o]);return s}function _objectWithoutProperties(e,i){if(e==null)return{};var s=_objectWithoutPropertiesLoose(e,i),a,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(o=0;o<c.length;o++)a=c[o],!(i.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function _slicedToArray(e,i){return _arrayWithHoles(e)||_iterableToArrayLimit(e,i)||_unsupportedIterableToArray(e,i)||_nonIterableRest()}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _unsupportedIterableToArray(e,i){if(e){if(typeof e=="string")return _arrayLikeToArray(e,i);var s=Object.prototype.toString.call(e).slice(8,-1);if(s==="Object"&&e.constructor&&(s=e.constructor.name),s==="Map"||s==="Set")return Array.from(e);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return _arrayLikeToArray(e,i)}}function _arrayLikeToArray(e,i){(i==null||i>e.length)&&(i=e.length);for(var s=0,a=new Array(i);s<i;s++)a[s]=e[s];return a}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _toPrimitive(e,i){if(typeof e!="object"||e===null)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,i||"default");if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}function _toPropertyKey(e){var i=_toPrimitive(e,"string");return typeof i=="symbol"?i:String(i)}var _excluded$1=["animationData","loop","autoplay","initialSegment","onComplete","onLoopComplete","onEnterFrame","onSegmentStart","onConfigReady","onDataReady","onDataFailed","onLoadedImages","onDOMLoaded","onDestroy","lottieRef","renderer","name","assetsPath","rendererSettings"],useLottie=function e(i,s){var a=i.animationData,o=i.loop,c=i.autoplay,d=i.initialSegment,g=i.onComplete,b=i.onLoopComplete,j=i.onEnterFrame,_e=i.onSegmentStart,$=i.onConfigReady,rt=i.onDataReady,st=i.onDataFailed,ut=i.onLoadedImages,gt=i.onDOMLoaded,wt=i.onDestroy;i.lottieRef,i.renderer,i.name,i.assetsPath,i.rendererSettings;var yt=_objectWithoutProperties(i,_excluded$1),At=reactExports.useState(!1),Ct=_slicedToArray(At,2),Tt=Ct[0],kt=Ct[1],Pt=reactExports.useRef(),It=reactExports.useRef(null),Lt=function(){var Zn;(Zn=Pt.current)===null||Zn===void 0||Zn.play()},Nt=function(){var Zn;(Zn=Pt.current)===null||Zn===void 0||Zn.stop()},Ht=function(){var Zn;(Zn=Pt.current)===null||Zn===void 0||Zn.pause()},dr=function(Zn){var xu;(xu=Pt.current)===null||xu===void 0||xu.setSpeed(Zn)},hs=function(Zn,xu){var ou;(ou=Pt.current)===null||ou===void 0||ou.goToAndPlay(Zn,xu)},_s=function(Zn,xu){var ou;(ou=Pt.current)===null||ou===void 0||ou.goToAndStop(Zn,xu)},ds=function(Zn){var xu;(xu=Pt.current)===null||xu===void 0||xu.setDirection(Zn)},Nn=function(Zn,xu){var ou;(ou=Pt.current)===null||ou===void 0||ou.playSegments(Zn,xu)},us=function(Zn){var xu;(xu=Pt.current)===null||xu===void 0||xu.setSubframe(Zn)},hn=function(Zn){var xu;return(xu=Pt.current)===null||xu===void 0?void 0:xu.getDuration(Zn)},Ft=function(){var Zn;(Zn=Pt.current)===null||Zn===void 0||Zn.destroy(),Pt.current=void 0},Gr=function(){var Zn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},xu;if(It.current){(xu=Pt.current)===null||xu===void 0||xu.destroy();var ou=_objectSpread2(_objectSpread2(_objectSpread2({},i),Zn),{},{container:It.current});return Pt.current=lottie.loadAnimation(ou),kt(!!Pt.current),function(){var sp;(sp=Pt.current)===null||sp===void 0||sp.destroy(),Pt.current=void 0}}};reactExports.useEffect(function(){var un=Gr();return function(){return un==null?void 0:un()}},[a,o]),reactExports.useEffect(function(){Pt.current&&(Pt.current.autoplay=!!c)},[c]),reactExports.useEffect(function(){if(Pt.current){if(!d){Pt.current.resetSegments(!0);return}!Array.isArray(d)||!d.length||((Pt.current.currentRawFrame<d[0]||Pt.current.currentRawFrame>d[1])&&(Pt.current.currentRawFrame=d[0]),Pt.current.setSegment(d[0],d[1]))}},[d]),reactExports.useEffect(function(){var un=[{name:"complete",handler:g},{name:"loopComplete",handler:b},{name:"enterFrame",handler:j},{name:"segmentStart",handler:_e},{name:"config_ready",handler:$},{name:"data_ready",handler:rt},{name:"data_failed",handler:st},{name:"loaded_images",handler:ut},{name:"DOMLoaded",handler:gt},{name:"destroy",handler:wt}],Zn=un.filter(function(ou){return ou.handler!=null});if(Zn.length){var xu=Zn.map(function(ou){var sp;return(sp=Pt.current)===null||sp===void 0||sp.addEventListener(ou.name,ou.handler),function(){var wu;(wu=Pt.current)===null||wu===void 0||wu.removeEventListener(ou.name,ou.handler)}});return function(){xu.forEach(function(ou){return ou()})}}},[g,b,j,_e,$,rt,st,ut,gt,wt]);var gn=React$1.createElement("div",_objectSpread2({style:s,ref:It},yt));return{View:gn,play:Lt,stop:Nt,pause:Ht,setSpeed:dr,goToAndStop:_s,goToAndPlay:hs,setDirection:ds,playSegments:Nn,setSubframe:us,getDuration:hn,destroy:Ft,animationContainerRef:It,animationLoaded:Tt,animationItem:Pt.current}};function getContainerVisibility(e){var i=e.getBoundingClientRect(),s=i.top,a=i.height,o=window.innerHeight-s,c=window.innerHeight+a;return o/c}function getContainerCursorPosition(e,i,s){var a=e.getBoundingClientRect(),o=a.top,c=a.left,d=a.width,g=a.height,b=(i-c)/d,j=(s-o)/g;return{x:b,y:j}}var useInitInteractivity=function e(i){var s=i.wrapperRef,a=i.animationItem,o=i.mode,c=i.actions;reactExports.useEffect(function(){var d=s.current;if(!(!d||!a||!c.length)){a.stop();var g=function(){var _e=null,$=function(){var st=getContainerVisibility(d),ut=c.find(function(wt){var yt=wt.visibility;return yt&&st>=yt[0]&&st<=yt[1]});if(ut){if(ut.type==="seek"&&ut.visibility&&ut.frames.length===2){var gt=ut.frames[0]+Math.ceil((st-ut.visibility[0])/(ut.visibility[1]-ut.visibility[0])*ut.frames[1]);//! goToAndStop must be relative to the start of the current segment
a.goToAndStop(gt-a.firstFrame-1,!0)}ut.type==="loop"&&(_e===null||_e!==ut.frames||a.isPaused)&&(a.playSegments(ut.frames,!0),_e=ut.frames),ut.type==="play"&&a.isPaused&&(a.resetSegments(!0),a.play()),ut.type==="stop"&&a.goToAndStop(ut.frames[0]-a.firstFrame-1,!0)}};return document.addEventListener("scroll",$),function(){document.removeEventListener("scroll",$)}},b=function(){var _e=function(ut,gt){var wt=ut,yt=gt;if(wt!==-1&&yt!==-1){var At=getContainerCursorPosition(d,wt,yt);wt=At.x,yt=At.y}var Ct=c.find(function(Pt){var It=Pt.position;return It&&Array.isArray(It.x)&&Array.isArray(It.y)?wt>=It.x[0]&&wt<=It.x[1]&&yt>=It.y[0]&&yt<=It.y[1]:It&&!Number.isNaN(It.x)&&!Number.isNaN(It.y)?wt===It.x&&yt===It.y:!1});if(Ct){if(Ct.type==="seek"&&Ct.position&&Array.isArray(Ct.position.x)&&Array.isArray(Ct.position.y)&&Ct.frames.length===2){var Tt=(wt-Ct.position.x[0])/(Ct.position.x[1]-Ct.position.x[0]),kt=(yt-Ct.position.y[0])/(Ct.position.y[1]-Ct.position.y[0]);a.playSegments(Ct.frames,!0),a.goToAndStop(Math.ceil((Tt+kt)/2*(Ct.frames[1]-Ct.frames[0])),!0)}Ct.type==="loop"&&a.playSegments(Ct.frames,!0),Ct.type==="play"&&(a.isPaused&&a.resetSegments(!1),a.playSegments(Ct.frames)),Ct.type==="stop"&&a.goToAndStop(Ct.frames[0],!0)}},$=function(ut){_e(ut.clientX,ut.clientY)},rt=function(){_e(-1,-1)};return d.addEventListener("mousemove",$),d.addEventListener("mouseout",rt),function(){d.removeEventListener("mousemove",$),d.removeEventListener("mouseout",rt)}};switch(o){case"scroll":return g();case"cursor":return b()}}},[o,a])},useLottieInteractivity=function e(i){var s=i.actions,a=i.mode,o=i.lottieObj,c=o.animationItem,d=o.View,g=o.animationContainerRef;return useInitInteractivity({actions:s,animationItem:c,mode:a,wrapperRef:g}),d},_excluded=["style","interactivity"],Lottie=function e(i){var s,a,o,c=i.style,d=i.interactivity,g=_objectWithoutProperties(i,_excluded),b=useLottie(g,c),j=b.View,_e=b.play,$=b.stop,rt=b.pause,st=b.setSpeed,ut=b.goToAndStop,gt=b.goToAndPlay,wt=b.setDirection,yt=b.playSegments,At=b.setSubframe,Ct=b.getDuration,Tt=b.destroy,kt=b.animationContainerRef,Pt=b.animationLoaded,It=b.animationItem;return reactExports.useEffect(function(){i.lottieRef&&(i.lottieRef.current={play:_e,stop:$,pause:rt,setSpeed:st,goToAndPlay:gt,goToAndStop:ut,setDirection:wt,playSegments:yt,setSubframe:At,getDuration:Ct,destroy:Tt,animationContainerRef:kt,animationLoaded:Pt,animationItem:It})},[(s=i.lottieRef)===null||s===void 0?void 0:s.current]),useLottieInteractivity({lottieObj:{View:j,play:_e,stop:$,pause:rt,setSpeed:st,goToAndStop:ut,goToAndPlay:gt,setDirection:wt,playSegments:yt,setSubframe:At,getDuration:Ct,destroy:Tt,animationContainerRef:kt,animationLoaded:Pt,animationItem:It},actions:(a=d==null?void 0:d.actions)!==null&&a!==void 0?a:[],mode:(o=d==null?void 0:d.mode)!==null&&o!==void 0?o:"scroll"})};const SuccessModal=({SuccesTxt:e,successFunc:i})=>jsxRuntimeExports.jsx("div",{className:"successModalDiv",children:jsxRuntimeExports.jsxs("div",{className:"successModalDiv_cont",children:[jsxRuntimeExports.jsx("div",{className:"successModalDiv_cont_animation",children:jsxRuntimeExports.jsx(Lottie,{animationData:successLoader,loop:!1,autoPlay:!0,className:"successModalDiv_cont_animation_icon",preserveAspectRatio:"xMidYMid meet"})}),jsxRuntimeExports.jsxs("div",{className:"successModalDiv_cont_body",children:[jsxRuntimeExports.jsx("div",{className:"successModalDiv_cont_body_title",children:"Success"}),jsxRuntimeExports.jsx("div",{className:"successModalDiv_cont_body_para",children:e})]}),jsxRuntimeExports.jsx("div",{className:"successModalDiv_cont_button_div",children:jsxRuntimeExports.jsx("button",{className:"successModalDiv_cont_button",onClick:i,children:"Continue"})})]})}),v="4.8.0",meta={g:"LottieFiles AE ",a:"",k:"",d:"",tc:""},fr=24,ip=0,op=59,w=1080,h=1080,nm="X",ddd=0,assets=[],layers=[{ddd:0,ind:1,ty:4,nm:"asterisco 2",sr:1,ks:{o:{a:1,k:[{i:{x:[.65],y:[1]},o:{x:[.35],y:[0]},t:41,s:[100]},{t:48,s:[0]}],ix:11},r:{a:1,k:[{i:{x:[.65],y:[1]},o:{x:[.35],y:[0]},t:29,s:[0]},{t:38,s:[90]}],ix:10},p:{a:1,k:[{i:{x:.38,y:1},o:{x:.167,y:.167},t:14,s:[552.625,563.5,0],to:[-54.333,177.667,0],ti:[152.333,-20.167,0]},{t:26,s:[138.625,967.5,0]}],ix:2},a:{a:0,k:[415.625,-457.5,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[436.5,-435.75],[390.875,-481.375]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.709803921569,.227450980392,.227450980392,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[.227450995352,.709803921569,.290196078431,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 4",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[392.25,-435.5],[439.75,-482.5]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.709803921569,.227450980392,.227450980392,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[.227450995352,.709803921569,.290196078431,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 3",np:3,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[415,-425.25],[415,-489.75]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.709803921569,.227450980392,.227450980392,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[.227450995352,.709803921569,.290196078431,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 2",np:3,cix:2,bm:0,ix:3,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[384.25,-457],[447,-457]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.709803921569,.227450980392,.227450980392,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[.227450995352,.709803921569,.290196078431,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:4,mn:"ADBE Vector Group",hd:!1}],ip:14,op:73,st:14,bm:0},{ddd:0,ind:2,ty:4,nm:"asterisco",sr:1,ks:{o:{a:1,k:[{i:{x:[.65],y:[1]},o:{x:[.35],y:[0]},t:38,s:[100]},{t:45,s:[0]}],ix:11},r:{a:1,k:[{i:{x:[.65],y:[1]},o:{x:[.35],y:[0]},t:26,s:[0]},{t:35,s:[90]}],ix:10},p:{a:1,k:[{i:{x:.38,y:1},o:{x:.167,y:.167},t:11,s:[555.625,540.5,0],to:[58.667,-208.333,0],ti:[-145.667,14.333,0]},{t:23,s:[939.125,146.5,0]}],ix:2},a:{a:0,k:[415.625,-457.5,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[436.5,-435.75],[390.875,-481.375]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.709803921569,.227450980392,.227450980392,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[.227450995352,.709803921569,.290196078431,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 4",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[392.25,-435.5],[439.75,-482.5]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.709803921569,.227450980392,.227450980392,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[.227450995352,.709803921569,.290196078431,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 3",np:3,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[415,-425.25],[415,-489.75]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.709803921569,.227450980392,.227450980392,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[.227450995352,.709803921569,.290196078431,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 2",np:3,cix:2,bm:0,ix:3,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[384.25,-457],[447,-457]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.709803921569,.227450980392,.227450980392,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[.227450995352,.709803921569,.290196078431,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:4,mn:"ADBE Vector Group",hd:!1}],ip:11,op:70,st:11,bm:0},{ddd:0,ind:3,ty:4,nm:"X",parent:5,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[-278.125,-292.563,0],ix:2},a:{a:0,k:[39.875,7.438,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-91,-131],[168,149]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[1,1,1,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:76,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[.913725490196,.732413677141,.732413677141,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 2",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-92,149],[171.75,-134.125]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[1,1,1,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:76,ix:5},lc:2,lj:2,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:2,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:0,k:0,ix:1},e:{a:1,k:[{i:{x:[.693],y:[.942]},o:{x:[.769],y:[0]},t:17,s:[0]},{t:29,s:[100]}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:3,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:17,op:76,st:17,bm:0},{ddd:0,ind:4,ty:4,nm:"Circulo linea",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[514,546,0],ix:2},a:{a:0,k:[-276,-296,0],ix:1},s:{a:1,k:[{i:{x:[.662,.662,.542],y:[1,1,-8.04]},o:{x:[.895,.895,.663],y:[.086,.086,0]},t:6,s:[0,0,100]},{i:{x:[.658,.658,.602],y:[1,1,1]},o:{x:[.362,.362,.275],y:[0,0,6.41]},t:17,s:[114.619,114.619,100]},{t:30,s:[85,85,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[724,724],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[.709803921569,.227450980392,.227450980392,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[-276,-296],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:5,op:35,st:1,bm:0},{ddd:0,ind:5,ty:4,nm:"Circulo",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[514,546,0],ix:2},a:{a:0,k:[-276,-296,0],ix:1},s:{a:1,k:[{i:{x:[.77,.77,.542],y:[1,1,-10.506]},o:{x:[.86,.86,.663],y:[.106,.106,0]},t:4,s:[0,0,100]},{i:{x:[.301,.301,.602],y:[1,1,1]},o:{x:[.484,.484,.275],y:[0,0,4.93]},t:18,s:[115,115,100]},{t:28,s:[100,100,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[681,681],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"fl",c:{a:0,k:[.907451076134,0,0,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[-276,-296],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:3,op:67,st:-1,bm:0},{ddd:0,ind:6,ty:4,nm:"Burbuja 4",sr:1,ks:{o:{a:1,k:[{i:{x:[.39],y:[1]},o:{x:[.61],y:[0]},t:33,s:[100]},{t:44,s:[0]}],ix:11},r:{a:0,k:226.48,ix:10},p:{a:1,k:[{i:{x:.39,y:1},o:{x:.61,y:0},t:13,s:[507,552,0],to:[-157.833,-198.5,0],ti:[103.333,13.5,0]},{t:43,s:[97.5,236.5,0]}],ix:2},a:{a:0,k:[-72,-212,0],ix:1},s:{a:1,k:[{i:{x:[.39,.39,.39],y:[1,1,1]},o:{x:[.61,.61,.61],y:[0,0,0]},t:13,s:[100,100,100]},{t:43,s:[100,100,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-4.25,-2],[.5,-4]],o:[[4.25,2],[-.5,4]],v:[[-63,-228],[-56.25,-215.5]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.709803921569,.227450980392,.227450980392,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:4,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[64,64],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[.709803921569,.227450980392,.227450980392,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:4,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[-72,-212],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:3,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1}],ip:13,op:72,st:13,bm:0},{ddd:0,ind:7,ty:4,nm:"Burbuja 3",sr:1,ks:{o:{a:1,k:[{i:{x:[.39],y:[1]},o:{x:[.61],y:[0]},t:36,s:[100]},{t:47,s:[0]}],ix:11},r:{a:0,k:169.291,ix:10},p:{a:1,k:[{i:{x:.39,y:1},o:{x:.61,y:0},t:16,s:[501,552,0],to:[-271.833,59.5,0],ti:[39.833,-87,0]},{t:46,s:[107.5,792.5,0]}],ix:2},a:{a:0,k:[-72,-212,0],ix:1},s:{a:1,k:[{i:{x:[.39,.39,.39],y:[1,1,1]},o:{x:[.61,.61,.61],y:[0,0,0]},t:16,s:[100,100,100]},{t:46,s:[100,100,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-4.25,-2],[.5,-4]],o:[[4.25,2],[-.5,4]],v:[[-63,-228],[-56.25,-215.5]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.709803921569,.227450980392,.227450980392,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:4,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[64,64],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[.709803921569,.227450980392,.227450980392,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:4,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[-72,-212],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:3,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1}],ip:16,op:75,st:16,bm:0},{ddd:0,ind:8,ty:4,nm:"Burbuja 2",sr:1,ks:{o:{a:1,k:[{i:{x:[.39],y:[1]},o:{x:[.61],y:[0]},t:33,s:[100]},{t:44,s:[0]}],ix:11},r:{a:0,k:68,ix:10},p:{a:1,k:[{i:{x:.39,y:1},o:{x:.61,y:0},t:13,s:[513,546,0],to:[76.167,107.5,0],ti:[-65.167,9,0]},{t:43,s:[891.5,736.5,0]}],ix:2},a:{a:0,k:[-72,-212,0],ix:1},s:{a:1,k:[{i:{x:[.39,.39,.39],y:[1,1,1]},o:{x:[.61,.61,.61],y:[0,0,0]},t:13,s:[100,100,100]},{t:43,s:[100,100,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-4.25,-2],[.5,-4]],o:[[4.25,2],[-.5,4]],v:[[-63,-228],[-56.25,-215.5]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.709803921569,.227450980392,.227450980392,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:4,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[64,64],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[.709803921569,.227450980392,.227450980392,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:4,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[-72,-212],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:3,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1}],ip:13,op:72,st:13,bm:0},{ddd:0,ind:9,ty:4,nm:"Burbuja 1",sr:1,ks:{o:{a:1,k:[{i:{x:[.39],y:[1]},o:{x:[.61],y:[0]},t:33,s:[100]},{t:44,s:[0]}],ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.39,y:1},o:{x:.61,y:0},t:13,s:[513,546,0],to:[44.167,-94.5,0],ti:[-65.167,9,0]},{t:43,s:[817.5,248.5,0]}],ix:2},a:{a:0,k:[-72,-212,0],ix:1},s:{a:1,k:[{i:{x:[.39,.39,.39],y:[1,1,1]},o:{x:[.61,.61,.61],y:[0,0,0]},t:13,s:[100,100,100]},{t:43,s:[100,100,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-4.25,-2],[.5,-4]],o:[[4.25,2],[-.5,4]],v:[[-63,-228],[-56.25,-215.5]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.709803921569,.227450980392,.227450980392,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:4,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[64,64],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[.709803921569,.227450980392,.227450980392,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:4,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[-72,-212],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:3,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1}],ip:13,op:72,st:13,bm:0},{ddd:0,ind:10,ty:4,nm:"Circulo fill back",sr:1,ks:{o:{a:1,k:[{i:{x:[.47],y:[1]},o:{x:[.53],y:[0]},t:9,s:[100]},{t:24,s:[0]}],ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[514,546,0],ix:2},a:{a:0,k:[-276,-296,0],ix:1},s:{a:1,k:[{i:{x:[.425,.425,.542],y:[1,1,-8.862]},o:{x:[.41,.41,.663],y:[.226,.226,0]},t:0,s:[0,0,100]},{t:12,s:[114.619,114.619,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[1186,1186],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"fl",c:{a:0,k:[1,.58509796741,.58509796741,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[-276,-296],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:31,st:0,bm:0}],markers=[],errorLoader={v,meta,fr,ip,op,w,h,nm,ddd,assets,layers,markers},ErrorModal=({ErrorTxt:e,errorFunc:i})=>jsxRuntimeExports.jsx("div",{className:"successModalDiv",children:jsxRuntimeExports.jsxs("div",{className:"successModalDiv_cont",children:[jsxRuntimeExports.jsx("div",{className:"successModalDiv_cont_animation",children:jsxRuntimeExports.jsx(Lottie,{animationData:errorLoader,loop:!1,autoPlay:!0,className:"successModalDiv_cont_animation_icon",preserveAspectRatio:"xMidYMid meet"})}),jsxRuntimeExports.jsxs("div",{className:"successModalDiv_cont_body",children:[jsxRuntimeExports.jsx("div",{className:"successModalDiv_cont_body_title",children:"Error"}),jsxRuntimeExports.jsx("div",{className:"successModalDiv_cont_body_para",children:e})]}),jsxRuntimeExports.jsx("div",{className:"successModalDiv_cont_button_div",children:jsxRuntimeExports.jsx("button",{className:"errorModalDiv_cont_button",onClick:i,children:"Continue"})})]})}),Faucet=()=>{const[e,i]=reactExports.useState(""),[s,a]=reactExports.useState(!1),[o,c]=reactExports.useState(!1),[d,g]=reactExports.useState(""),[b,j]=reactExports.useState(""),[_e,$]=reactExports.useState(!1),[rt,st]=reactExports.useState(!1),ut=async()=>{$(!0),st(!0);const wt={wallet:e};try{const yt=await axios.post(API_URL+"/web3/faucet/submit-address",wt,config);console.log(yt),yt.status===200?(console.log(yt),console.log(yt.data.data.message),a(!0),j("You have successfully claimed 1egax"),$(!1),st(!1),st(!1)):(console.log(yt),a(!1),c(!0),g(yt.data.data.message),$(!1),st(!1))}catch(yt){console.log(yt.response),g(yt.response),a(!1),c(!0),$(!1)}},gt=wt=>{i(wt.target.value),console.log(wt.target.value)};return jsxRuntimeExports.jsxs("div",{className:"Home_div_faucet",children:[jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsxs("div",{className:"Home_div_area",children:[jsxRuntimeExports.jsxs("div",{className:"Home_div_area_head",children:[jsxRuntimeExports.jsxs("div",{className:"Home_div_area_head_cont1",children:["EGAX ",jsxRuntimeExports.jsx("span",{className:"Home_div_area_head_span",children:" FAUCET"})," "]}),jsxRuntimeExports.jsx("div",{className:"Home_div_area_head_para",children:"Obtain EGO Chain Testnet tokens every 24 hours for seamless and confident development."})]}),jsxRuntimeExports.jsxs("div",{className:"Home_div_area_cont",children:[jsxRuntimeExports.jsxs("div",{className:"Home_div_area_cont_area1",children:[jsxRuntimeExports.jsxs("div",{className:"Home_div_area_cont_area1_cont1",children:[jsxRuntimeExports.jsx("div",{className:"Home_div_area_cont_area1_cont1_title",children:"Token"}),jsxRuntimeExports.jsxs("div",{className:"Home_div_area_cont_area1_cont1_div",children:[jsxRuntimeExports.jsx("img",{src:"/egax_logo.png",alt:"",className:"Home_div_area_cont_area1_cont1_div_img"}),"1 EGAX"]})]}),jsxRuntimeExports.jsxs("div",{className:"Home_div_area_cont_area1_cont2",children:[jsxRuntimeExports.jsx("div",{className:"Home_div_area_cont_area1_cont2_title",children:"Wallet Address"}),jsxRuntimeExports.jsx("input",{type:"text",onChange:gt,value:e,placeholder:"Enter your Ego Chain Testnet wallet address",className:"Home_div_area_cont_area1_cont2_input"})]})]}),e===""?jsxRuntimeExports.jsx("button",{className:"Home_div_area_cont_area2_btn",disabled:!0,children:"Send 1 EGAX"}):jsxRuntimeExports.jsx("button",{className:"Home_div_area_cont_area2_btn",onClick:ut,disabled:rt,children:_e?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(_default,{color:"#366e51",height:20})," Sending..."]}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:" Send 1 EGAX"})})]})]})}),jsxRuntimeExports.jsx("img",{src:"/img/hero_bg_light.svg",alt:"",className:"home_div_section1_bg_light"}),jsxRuntimeExports.jsx("img",{src:"/img/test_hero_light2.svg",alt:"",className:"home_div_section1_bg_light2"}),jsxRuntimeExports.jsx(Grid,{}),jsxRuntimeExports.jsx("img",{src:"/img/grains_ellipse.png",alt:"",className:"grains_ellipse"}),s?jsxRuntimeExports.jsx(SuccessModal,{SuccesTxt:b,successFunc:()=>{window.location.href="/"}}):null,o?jsxRuntimeExports.jsx(ErrorModal,{ErrorTxt:d,errorFunc:()=>{c(!1)}}):null]})};function App(){return window.location.host.split(".")[0]==="faucet"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Header,{}),jsxRuntimeExports.jsx(Faucet,{}),jsxRuntimeExports.jsx(Footer,{})]}):jsxRuntimeExports.jsxs("div",{className:"App",children:[jsxRuntimeExports.jsx(Header,{}),jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(Home,{})}),jsxRuntimeExports.jsx(Route,{path:"/privacy",element:jsxRuntimeExports.jsx(Privacy,{})}),jsxRuntimeExports.jsx(Route,{path:"/whitepaper",element:jsxRuntimeExports.jsx(WhitePaper,{})}),jsxRuntimeExports.jsx(Route,{path:"/terms",element:jsxRuntimeExports.jsx(TermsAndConditions,{})}),jsxRuntimeExports.jsx(Route,{path:"/egc/coin/info",element:jsxRuntimeExports.jsx(Egc,{})}),jsxRuntimeExports.jsx(Route,{path:"/egax/coin/info",element:jsxRuntimeExports.jsx(Egax,{})}),jsxRuntimeExports.jsx(Route,{path:"/about",element:jsxRuntimeExports.jsx(RoadMapPage,{})})]}),jsxRuntimeExports.jsx(Footer,{})]})}client.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsx(App,{})}))});export default C$();
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
