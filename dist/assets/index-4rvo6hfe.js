function _mergeNamespaces(e,a){for(var i=0;i<a.length;i++){const o=a[i];if(typeof o!="string"&&!Array.isArray(o)){for(const c in o)if(c!=="default"&&!(c in e)){const d=Object.getOwnPropertyDescriptor(o,c);d&&Object.defineProperty(e,c,d.get?d:{enumerable:!0,get:()=>o[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))o(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const g of d.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&o(g)}).observe(document,{childList:!0,subtree:!0});function i(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(c){if(c.ep)return;c.ep=!0;const d=i(c);fetch(c.href,d)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(e.__esModule)return e;var a=e.default;if(typeof a=="function"){var i=function o(){return this instanceof o?Reflect.construct(a,arguments,this.constructor):a.apply(this,arguments)};i.prototype=a.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(o){var c=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(i,o,c.get?c:{enumerable:!0,get:function(){return e[o]}})}),i}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react$1={exports:{}},react_production_min$1={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$2=Symbol.for("react.element"),n$2=Symbol.for("react.portal"),p$3=Symbol.for("react.fragment"),q$2=Symbol.for("react.strict_mode"),r$2=Symbol.for("react.profiler"),t$1=Symbol.for("react.provider"),u$1=Symbol.for("react.context"),v$4=Symbol.for("react.forward_ref"),w$3=Symbol.for("react.suspense"),x$1=Symbol.for("react.memo"),y$1=Symbol.for("react.lazy"),z$4=Symbol.iterator;function A$2(e){return e===null||typeof e!="object"?null:(e=z$4&&e[z$4]||e["@@iterator"],typeof e=="function"?e:null)}var B$2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$2=Object.assign,D$2={};function E$2(e,a,i){this.props=e,this.context=a,this.refs=D$2,this.updater=i||B$2}E$2.prototype.isReactComponent={};E$2.prototype.setState=function(e,a){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,a,"setState")};E$2.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function F$1(){}F$1.prototype=E$2.prototype;function G$2(e,a,i){this.props=e,this.context=a,this.refs=D$2,this.updater=i||B$2}var H$2=G$2.prototype=new F$1;H$2.constructor=G$2;C$2(H$2,E$2.prototype);H$2.isPureReactComponent=!0;var I$2=Array.isArray,J$1=Object.prototype.hasOwnProperty,K$2={current:null},L$2={key:!0,ref:!0,__self:!0,__source:!0};function M$2(e,a,i){var o,c={},d=null,g=null;if(a!=null)for(o in a.ref!==void 0&&(g=a.ref),a.key!==void 0&&(d=""+a.key),a)J$1.call(a,o)&&!L$2.hasOwnProperty(o)&&(c[o]=a[o]);var b=arguments.length-2;if(b===1)c.children=i;else if(1<b){for(var j=Array(b),$=0;$<b;$++)j[$]=arguments[$+2];c.children=j}if(e&&e.defaultProps)for(o in b=e.defaultProps,b)c[o]===void 0&&(c[o]=b[o]);return{$$typeof:l$2,type:e,key:d,ref:g,props:c,_owner:K$2.current}}function N$2(e,a){return{$$typeof:l$2,type:e.type,key:a,ref:e.ref,props:e.props,_owner:e._owner}}function O$2(e){return typeof e=="object"&&e!==null&&e.$$typeof===l$2}function escape$1(e){var a={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return a[i]})}var P$2=/\/+/g;function Q$2(e,a){return typeof e=="object"&&e!==null&&e.key!=null?escape$1(""+e.key):a.toString(36)}function R$2(e,a,i,o,c){var d=typeof e;(d==="undefined"||d==="boolean")&&(e=null);var g=!1;if(e===null)g=!0;else switch(d){case"string":case"number":g=!0;break;case"object":switch(e.$$typeof){case l$2:case n$2:g=!0}}if(g)return g=e,c=c(g),e=o===""?"."+Q$2(g,0):o,I$2(c)?(i="",e!=null&&(i=e.replace(P$2,"$&/")+"/"),R$2(c,a,i,"",function($){return $})):c!=null&&(O$2(c)&&(c=N$2(c,i+(!c.key||g&&g.key===c.key?"":(""+c.key).replace(P$2,"$&/")+"/")+e)),a.push(c)),1;if(g=0,o=o===""?".":o+":",I$2(e))for(var b=0;b<e.length;b++){d=e[b];var j=o+Q$2(d,b);g+=R$2(d,a,i,j,c)}else if(j=A$2(e),typeof j=="function")for(e=j.call(e),b=0;!(d=e.next()).done;)d=d.value,j=o+Q$2(d,b++),g+=R$2(d,a,i,j,c);else if(d==="object")throw a=String(e),Error("Objects are not valid as a React child (found: "+(a==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":a)+"). If you meant to render a collection of children, use an array instead.");return g}function S$2(e,a,i){if(e==null)return e;var o=[],c=0;return R$2(e,o,"","",function(d){return a.call(i,d,c++)}),o}function T$2(e){if(e._status===-1){var a=e._result;a=a(),a.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=a)}if(e._status===1)return e._result.default;throw e._result}var U$2={current:null},V$2={transition:null},W$2={ReactCurrentDispatcher:U$2,ReactCurrentBatchConfig:V$2,ReactCurrentOwner:K$2};react_production_min$1.Children={map:S$2,forEach:function(e,a,i){S$2(e,function(){a.apply(this,arguments)},i)},count:function(e){var a=0;return S$2(e,function(){a++}),a},toArray:function(e){return S$2(e,function(a){return a})||[]},only:function(e){if(!O$2(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};react_production_min$1.Component=E$2;react_production_min$1.Fragment=p$3;react_production_min$1.Profiler=r$2;react_production_min$1.PureComponent=G$2;react_production_min$1.StrictMode=q$2;react_production_min$1.Suspense=w$3;react_production_min$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$2;react_production_min$1.cloneElement=function(e,a,i){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=C$2({},e.props),c=e.key,d=e.ref,g=e._owner;if(a!=null){if(a.ref!==void 0&&(d=a.ref,g=K$2.current),a.key!==void 0&&(c=""+a.key),e.type&&e.type.defaultProps)var b=e.type.defaultProps;for(j in a)J$1.call(a,j)&&!L$2.hasOwnProperty(j)&&(o[j]=a[j]===void 0&&b!==void 0?b[j]:a[j])}var j=arguments.length-2;if(j===1)o.children=i;else if(1<j){b=Array(j);for(var $=0;$<j;$++)b[$]=arguments[$+2];o.children=b}return{$$typeof:l$2,type:e.type,key:c,ref:d,props:o,_owner:g}};react_production_min$1.createContext=function(e){return e={$$typeof:u$1,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:t$1,_context:e},e.Consumer=e};react_production_min$1.createElement=M$2;react_production_min$1.createFactory=function(e){var a=M$2.bind(null,e);return a.type=e,a};react_production_min$1.createRef=function(){return{current:null}};react_production_min$1.forwardRef=function(e){return{$$typeof:v$4,render:e}};react_production_min$1.isValidElement=O$2;react_production_min$1.lazy=function(e){return{$$typeof:y$1,_payload:{_status:-1,_result:e},_init:T$2}};react_production_min$1.memo=function(e,a){return{$$typeof:x$1,type:e,compare:a===void 0?null:a}};react_production_min$1.startTransition=function(e){var a=V$2.transition;V$2.transition={};try{e()}finally{V$2.transition=a}};react_production_min$1.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min$1.useCallback=function(e,a){return U$2.current.useCallback(e,a)};react_production_min$1.useContext=function(e){return U$2.current.useContext(e)};react_production_min$1.useDebugValue=function(){};react_production_min$1.useDeferredValue=function(e){return U$2.current.useDeferredValue(e)};react_production_min$1.useEffect=function(e,a){return U$2.current.useEffect(e,a)};react_production_min$1.useId=function(){return U$2.current.useId()};react_production_min$1.useImperativeHandle=function(e,a,i){return U$2.current.useImperativeHandle(e,a,i)};react_production_min$1.useInsertionEffect=function(e,a){return U$2.current.useInsertionEffect(e,a)};react_production_min$1.useLayoutEffect=function(e,a){return U$2.current.useLayoutEffect(e,a)};react_production_min$1.useMemo=function(e,a){return U$2.current.useMemo(e,a)};react_production_min$1.useReducer=function(e,a,i){return U$2.current.useReducer(e,a,i)};react_production_min$1.useRef=function(e){return U$2.current.useRef(e)};react_production_min$1.useState=function(e){return U$2.current.useState(e)};react_production_min$1.useSyncExternalStore=function(e,a,i){return U$2.current.useSyncExternalStore(e,a,i)};react_production_min$1.useTransition=function(){return U$2.current.useTransition()};react_production_min$1.version="18.2.0";react$1.exports=react_production_min$1;var reactExports$1=react$1.exports;const React$1=getDefaultExportFromCjs(reactExports$1),React$2=_mergeNamespaces({__proto__:null,default:React$1},[reactExports$1]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=reactExports$1,k=Symbol.for("react.element"),l$1=Symbol.for("react.fragment"),m$1=Object.prototype.hasOwnProperty,n$1=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$2={key:!0,ref:!0,__self:!0,__source:!0};function q$1(e,a,i){var o,c={},d=null,g=null;i!==void 0&&(d=""+i),a.key!==void 0&&(d=""+a.key),a.ref!==void 0&&(g=a.ref);for(o in a)m$1.call(a,o)&&!p$2.hasOwnProperty(o)&&(c[o]=a[o]);if(e&&e.defaultProps)for(o in a=e.defaultProps,a)c[o]===void 0&&(c[o]=a[o]);return{$$typeof:k,type:e,key:d,ref:g,props:c,_owner:n$1.current}}reactJsxRuntime_production_min.Fragment=l$1;reactJsxRuntime_production_min.jsx=q$1;reactJsxRuntime_production_min.jsxs=q$1;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function a(dr,us){var Nn=dr.length;dr.push(us);e:for(;0<Nn;){var gn=Nn-1>>>1,Zn=dr[gn];if(0<c(Zn,us))dr[gn]=us,dr[Nn]=Zn,Nn=gn;else break e}}function i(dr){return dr.length===0?null:dr[0]}function o(dr){if(dr.length===0)return null;var us=dr[0],Nn=dr.pop();if(Nn!==us){dr[0]=Nn;e:for(var gn=0,Zn=dr.length,xu=Zn>>>1;gn<xu;){var au=2*(gn+1)-1,Vv=dr[au],wu=au+1,a1=dr[wu];if(0>c(Vv,Nn))wu<Zn&&0>c(a1,Vv)?(dr[gn]=a1,dr[wu]=Nn,gn=wu):(dr[gn]=Vv,dr[au]=Nn,gn=au);else if(wu<Zn&&0>c(a1,Nn))dr[gn]=a1,dr[wu]=Nn,gn=wu;else break e}}return us}function c(dr,us){var Nn=dr.sortIndex-us.sortIndex;return Nn!==0?Nn:dr.id-us.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;e.unstable_now=function(){return d.now()}}else{var g=Date,b=g.now();e.unstable_now=function(){return g.now()-b}}var j=[],$=[],rt=1,_e=null,st=3,ut=!1,gt=!1,yt=!1,Pt=typeof setTimeout=="function"?setTimeout:null,wt=typeof clearTimeout=="function"?clearTimeout:null,Ct=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function At(dr){for(var us=i($);us!==null;){if(us.callback===null)o($);else if(us.startTime<=dr)o($),us.sortIndex=us.expirationTime,a(j,us);else break;us=i($)}}function Tt(dr){if(yt=!1,At(dr),!gt)if(i(j)!==null)gt=!0,ds(kt);else{var us=i($);us!==null&&un(Tt,us.startTime-dr)}}function kt(dr,us){gt=!1,yt&&(yt=!1,wt(Ft),Ft=-1),ut=!0;var Nn=st;try{for(At(us),_e=i(j);_e!==null&&(!(_e.expirationTime>us)||dr&&!Gr());){var gn=_e.callback;if(typeof gn=="function"){_e.callback=null,st=_e.priorityLevel;var Zn=gn(_e.expirationTime<=us);us=e.unstable_now(),typeof Zn=="function"?_e.callback=Zn:_e===i(j)&&o(j),At(us)}else o(j);_e=i(j)}if(_e!==null)var xu=!0;else{var au=i($);au!==null&&un(Tt,au.startTime-us),xu=!1}return xu}finally{_e=null,st=Nn,ut=!1}}var It=!1,Lt=null,Ft=-1,Nt=5,Ht=-1;function Gr(){return!(e.unstable_now()-Ht<Nt)}function hs(){if(Lt!==null){var dr=e.unstable_now();Ht=dr;var us=!0;try{us=Lt(!0,dr)}finally{us?_s():(It=!1,Lt=null)}}else It=!1}var _s;if(typeof Ct=="function")_s=function(){Ct(hs)};else if(typeof MessageChannel<"u"){var hn=new MessageChannel,Qn=hn.port2;hn.port1.onmessage=hs,_s=function(){Qn.postMessage(null)}}else _s=function(){Pt(hs,0)};function ds(dr){Lt=dr,It||(It=!0,_s())}function un(dr,us){Ft=Pt(function(){dr(e.unstable_now())},us)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(dr){dr.callback=null},e.unstable_continueExecution=function(){gt||ut||(gt=!0,ds(kt))},e.unstable_forceFrameRate=function(dr){0>dr||125<dr?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Nt=0<dr?Math.floor(1e3/dr):5},e.unstable_getCurrentPriorityLevel=function(){return st},e.unstable_getFirstCallbackNode=function(){return i(j)},e.unstable_next=function(dr){switch(st){case 1:case 2:case 3:var us=3;break;default:us=st}var Nn=st;st=us;try{return dr()}finally{st=Nn}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(dr,us){switch(dr){case 1:case 2:case 3:case 4:case 5:break;default:dr=3}var Nn=st;st=dr;try{return us()}finally{st=Nn}},e.unstable_scheduleCallback=function(dr,us,Nn){var gn=e.unstable_now();switch(typeof Nn=="object"&&Nn!==null?(Nn=Nn.delay,Nn=typeof Nn=="number"&&0<Nn?gn+Nn:gn):Nn=gn,dr){case 1:var Zn=-1;break;case 2:Zn=250;break;case 5:Zn=1073741823;break;case 4:Zn=1e4;break;default:Zn=5e3}return Zn=Nn+Zn,dr={id:rt++,callback:us,priorityLevel:dr,startTime:Nn,expirationTime:Zn,sortIndex:-1},Nn>gn?(dr.sortIndex=Nn,a($,dr),i(j)===null&&dr===i($)&&(yt?(wt(Ft),Ft=-1):yt=!0,un(Tt,Nn-gn))):(dr.sortIndex=Zn,a(j,dr),gt||ut||(gt=!0,ds(kt))),dr},e.unstable_shouldYield=Gr,e.unstable_wrapCallback=function(dr){var us=st;return function(){var Nn=st;st=us;try{return dr.apply(this,arguments)}finally{st=Nn}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa$2=reactExports$1,ca=schedulerExports;function p$1(e){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)a+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da$1=new Set,ea$1={};function fa$1(e,a){ha$1(e,a),ha$1(e+"Capture",a)}function ha$1(e,a){for(ea$1[e]=a,e=0;e<a.length;e++)da$1.add(a[e])}var ia$1=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja$1=Object.prototype.hasOwnProperty,ka$1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la$1={},ma$1={};function oa$1(e){return ja$1.call(ma$1,e)?!0:ja$1.call(la$1,e)?!1:ka$1.test(e)?ma$1[e]=!0:(la$1[e]=!0,!1)}function pa$1(e,a,i,o){if(i!==null&&i.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return o?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function qa$1(e,a,i,o){if(a===null||typeof a>"u"||pa$1(e,a,i,o))return!0;if(o)return!1;if(i!==null)switch(i.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function v$3(e,a,i,o,c,d,g){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=o,this.attributeNamespace=c,this.mustUseProperty=i,this.propertyName=e,this.type=a,this.sanitizeURL=d,this.removeEmptyString=g}var z$3={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){z$3[e]=new v$3(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var a=e[0];z$3[a]=new v$3(a,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){z$3[e]=new v$3(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){z$3[e]=new v$3(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){z$3[e]=new v$3(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){z$3[e]=new v$3(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){z$3[e]=new v$3(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){z$3[e]=new v$3(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){z$3[e]=new v$3(e,5,!1,e.toLowerCase(),null,!1,!1)});var ra$1=/[\-:]([a-z])/g;function sa$1(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var a=e.replace(ra$1,sa$1);z$3[a]=new v$3(a,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var a=e.replace(ra$1,sa$1);z$3[a]=new v$3(a,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var a=e.replace(ra$1,sa$1);z$3[a]=new v$3(a,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){z$3[e]=new v$3(e,1,!1,e.toLowerCase(),null,!1,!1)});z$3.xlinkHref=new v$3("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){z$3[e]=new v$3(e,1,!1,e.toLowerCase(),null,!0,!0)});function ta$1(e,a,i,o){var c=z$3.hasOwnProperty(a)?z$3[a]:null;(c!==null?c.type!==0:o||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(qa$1(a,i,c,o)&&(i=null),o||c===null?oa$1(a)&&(i===null?e.removeAttribute(a):e.setAttribute(a,""+i)):c.mustUseProperty?e[c.propertyName]=i===null?c.type===3?!1:"":i:(a=c.attributeName,o=c.attributeNamespace,i===null?e.removeAttribute(a):(c=c.type,i=c===3||c===4&&i===!0?"":""+i,o?e.setAttributeNS(o,a,i):e.setAttribute(a,i))))}var ua$1=aa$2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va$1=Symbol.for("react.element"),wa$1=Symbol.for("react.portal"),ya$1=Symbol.for("react.fragment"),za$1=Symbol.for("react.strict_mode"),Aa$1=Symbol.for("react.profiler"),Ba$1=Symbol.for("react.provider"),Ca$1=Symbol.for("react.context"),Da$1=Symbol.for("react.forward_ref"),Ea$1=Symbol.for("react.suspense"),Fa$1=Symbol.for("react.suspense_list"),Ga$1=Symbol.for("react.memo"),Ha$1=Symbol.for("react.lazy"),Ia$1=Symbol.for("react.offscreen"),Ja$1=Symbol.iterator;function Ka$1(e){return e===null||typeof e!="object"?null:(e=Ja$1&&e[Ja$1]||e["@@iterator"],typeof e=="function"?e:null)}var A$1=Object.assign,La$1;function Ma$1(e){if(La$1===void 0)try{throw Error()}catch(i){var a=i.stack.trim().match(/\n( *(at )?)/);La$1=a&&a[1]||""}return`
`+La$1+e}var Na$1=!1;function Oa$1(e,a){if(!e||Na$1)return"";Na$1=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch($){var o=$}Reflect.construct(e,[],a)}else{try{a.call()}catch($){o=$}e.call(a.prototype)}else{try{throw Error()}catch($){o=$}e()}}catch($){if($&&o&&typeof $.stack=="string"){for(var c=$.stack.split(`
`),d=o.stack.split(`
`),g=c.length-1,b=d.length-1;1<=g&&0<=b&&c[g]!==d[b];)b--;for(;1<=g&&0<=b;g--,b--)if(c[g]!==d[b]){if(g!==1||b!==1)do if(g--,b--,0>b||c[g]!==d[b]){var j=`
`+c[g].replace(" at new "," at ");return e.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",e.displayName)),j}while(1<=g&&0<=b);break}}}finally{Na$1=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?Ma$1(e):""}function Pa$1(e){switch(e.tag){case 5:return Ma$1(e.type);case 16:return Ma$1("Lazy");case 13:return Ma$1("Suspense");case 19:return Ma$1("SuspenseList");case 0:case 2:case 15:return e=Oa$1(e.type,!1),e;case 11:return e=Oa$1(e.type.render,!1),e;case 1:return e=Oa$1(e.type,!0),e;default:return""}}function Qa$1(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ya$1:return"Fragment";case wa$1:return"Portal";case Aa$1:return"Profiler";case za$1:return"StrictMode";case Ea$1:return"Suspense";case Fa$1:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ca$1:return(e.displayName||"Context")+".Consumer";case Ba$1:return(e._context.displayName||"Context")+".Provider";case Da$1:var a=e.render;return e=e.displayName,e||(e=a.displayName||a.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ga$1:return a=e.displayName||null,a!==null?a:Qa$1(e.type)||"Memo";case Ha$1:a=e._payload,e=e._init;try{return Qa$1(e(a))}catch{}}return null}function Ra$1(e){var a=e.type;switch(e.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=a.render,e=e.displayName||e.name||"",a.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa$1(a);case 8:return a===za$1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function Sa$1(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ta$1(e){var a=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Ua$1(e){var a=Ta$1(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,a),o=""+e[a];if(!e.hasOwnProperty(a)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var c=i.get,d=i.set;return Object.defineProperty(e,a,{configurable:!0,get:function(){return c.call(this)},set:function(g){o=""+g,d.call(this,g)}}),Object.defineProperty(e,a,{enumerable:i.enumerable}),{getValue:function(){return o},setValue:function(g){o=""+g},stopTracking:function(){e._valueTracker=null,delete e[a]}}}}function Va$1(e){e._valueTracker||(e._valueTracker=Ua$1(e))}function Wa$1(e){if(!e)return!1;var a=e._valueTracker;if(!a)return!0;var i=a.getValue(),o="";return e&&(o=Ta$1(e)?e.checked?"true":"false":e.value),e=o,e!==i?(a.setValue(e),!0):!1}function Xa$1(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ya$1(e,a){var i=a.checked;return A$1({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function Za$1(e,a){var i=a.defaultValue==null?"":a.defaultValue,o=a.checked!=null?a.checked:a.defaultChecked;i=Sa$1(a.value!=null?a.value:i),e._wrapperState={initialChecked:o,initialValue:i,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function ab$1(e,a){a=a.checked,a!=null&&ta$1(e,"checked",a,!1)}function bb$1(e,a){ab$1(e,a);var i=Sa$1(a.value),o=a.type;if(i!=null)o==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(o==="submit"||o==="reset"){e.removeAttribute("value");return}a.hasOwnProperty("value")?cb$1(e,a.type,i):a.hasOwnProperty("defaultValue")&&cb$1(e,a.type,Sa$1(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(e.defaultChecked=!!a.defaultChecked)}function db$1(e,a,i){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var o=a.type;if(!(o!=="submit"&&o!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+e._wrapperState.initialValue,i||a===e.value||(e.value=a),e.defaultValue=a}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function cb$1(e,a,i){(a!=="number"||Xa$1(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var eb$1=Array.isArray;function fb(e,a,i,o){if(e=e.options,a){a={};for(var c=0;c<i.length;c++)a["$"+i[c]]=!0;for(i=0;i<e.length;i++)c=a.hasOwnProperty("$"+e[i].value),e[i].selected!==c&&(e[i].selected=c),c&&o&&(e[i].defaultSelected=!0)}else{for(i=""+Sa$1(i),a=null,c=0;c<e.length;c++){if(e[c].value===i){e[c].selected=!0,o&&(e[c].defaultSelected=!0);return}a!==null||e[c].disabled||(a=e[c])}a!==null&&(a.selected=!0)}}function gb$1(e,a){if(a.dangerouslySetInnerHTML!=null)throw Error(p$1(91));return A$1({},a,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function hb$1(e,a){var i=a.value;if(i==null){if(i=a.children,a=a.defaultValue,i!=null){if(a!=null)throw Error(p$1(92));if(eb$1(i)){if(1<i.length)throw Error(p$1(93));i=i[0]}a=i}a==null&&(a=""),i=a}e._wrapperState={initialValue:Sa$1(i)}}function ib$1(e,a){var i=Sa$1(a.value),o=Sa$1(a.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),a.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),o!=null&&(e.defaultValue=""+o)}function jb$1(e){var a=e.textContent;a===e._wrapperState.initialValue&&a!==""&&a!==null&&(e.value=a)}function kb$1(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb$1(e,a){return e==null||e==="http://www.w3.org/1999/xhtml"?kb$1(a):e==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var mb$1,nb=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,i,o,c){MSApp.execUnsafeLocalFunction(function(){return e(a,i,o,c)})}:e}(function(e,a){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=a;else{for(mb$1=mb$1||document.createElement("div"),mb$1.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=mb$1.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;a.firstChild;)e.appendChild(a.firstChild)}});function ob$1(e,a){if(a){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=a;return}}e.textContent=a}var pb$1={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb$1=["Webkit","ms","Moz","O"];Object.keys(pb$1).forEach(function(e){qb$1.forEach(function(a){a=a+e.charAt(0).toUpperCase()+e.substring(1),pb$1[a]=pb$1[e]})});function rb$1(e,a,i){return a==null||typeof a=="boolean"||a===""?"":i||typeof a!="number"||a===0||pb$1.hasOwnProperty(e)&&pb$1[e]?(""+a).trim():a+"px"}function sb(e,a){e=e.style;for(var i in a)if(a.hasOwnProperty(i)){var o=i.indexOf("--")===0,c=rb$1(i,a[i],o);i==="float"&&(i="cssFloat"),o?e.setProperty(i,c):e[i]=c}}var tb$1=A$1({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub$1(e,a){if(a){if(tb$1[e]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(p$1(137,e));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(p$1(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(p$1(61))}if(a.style!=null&&typeof a.style!="object")throw Error(p$1(62))}}function vb$1(e,a){if(e.indexOf("-")===-1)return typeof a.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb$1=null;function xb$1(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var yb$1=null,zb$1=null,Ab$1=null;function Bb$1(e){if(e=Cb$1(e)){if(typeof yb$1!="function")throw Error(p$1(280));var a=e.stateNode;a&&(a=Db$1(a),yb$1(e.stateNode,e.type,a))}}function Eb$1(e){zb$1?Ab$1?Ab$1.push(e):Ab$1=[e]:zb$1=e}function Fb$1(){if(zb$1){var e=zb$1,a=Ab$1;if(Ab$1=zb$1=null,Bb$1(e),a)for(e=0;e<a.length;e++)Bb$1(a[e])}}function Gb$1(e,a){return e(a)}function Hb$1(){}var Ib$1=!1;function Jb(e,a,i){if(Ib$1)return e(a,i);Ib$1=!0;try{return Gb$1(e,a,i)}finally{Ib$1=!1,(zb$1!==null||Ab$1!==null)&&(Hb$1(),Fb$1())}}function Kb$1(e,a){var i=e.stateNode;if(i===null)return null;var o=Db$1(i);if(o===null)return null;i=o[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(p$1(231,a,typeof i));return i}var Lb$1=!1;if(ia$1)try{var Mb$1={};Object.defineProperty(Mb$1,"passive",{get:function(){Lb$1=!0}}),window.addEventListener("test",Mb$1,Mb$1),window.removeEventListener("test",Mb$1,Mb$1)}catch{Lb$1=!1}function Nb$1(e,a,i,o,c,d,g,b,j){var $=Array.prototype.slice.call(arguments,3);try{a.apply(i,$)}catch(rt){this.onError(rt)}}var Ob$1=!1,Pb$1=null,Qb$1=!1,Rb$1=null,Sb$1={onError:function(e){Ob$1=!0,Pb$1=e}};function Tb$1(e,a,i,o,c,d,g,b,j){Ob$1=!1,Pb$1=null,Nb$1.apply(Sb$1,arguments)}function Ub$1(e,a,i,o,c,d,g,b,j){if(Tb$1.apply(this,arguments),Ob$1){if(Ob$1){var $=Pb$1;Ob$1=!1,Pb$1=null}else throw Error(p$1(198));Qb$1||(Qb$1=!0,Rb$1=$)}}function Vb$1(e){var a=e,i=e;if(e.alternate)for(;a.return;)a=a.return;else{e=a;do a=e,a.flags&4098&&(i=a.return),e=a.return;while(e)}return a.tag===3?i:null}function Wb$1(e){if(e.tag===13){var a=e.memoizedState;if(a===null&&(e=e.alternate,e!==null&&(a=e.memoizedState)),a!==null)return a.dehydrated}return null}function Xb$1(e){if(Vb$1(e)!==e)throw Error(p$1(188))}function Yb$1(e){var a=e.alternate;if(!a){if(a=Vb$1(e),a===null)throw Error(p$1(188));return a!==e?null:e}for(var i=e,o=a;;){var c=i.return;if(c===null)break;var d=c.alternate;if(d===null){if(o=c.return,o!==null){i=o;continue}break}if(c.child===d.child){for(d=c.child;d;){if(d===i)return Xb$1(c),e;if(d===o)return Xb$1(c),a;d=d.sibling}throw Error(p$1(188))}if(i.return!==o.return)i=c,o=d;else{for(var g=!1,b=c.child;b;){if(b===i){g=!0,i=c,o=d;break}if(b===o){g=!0,o=c,i=d;break}b=b.sibling}if(!g){for(b=d.child;b;){if(b===i){g=!0,i=d,o=c;break}if(b===o){g=!0,o=d,i=c;break}b=b.sibling}if(!g)throw Error(p$1(189))}}if(i.alternate!==o)throw Error(p$1(190))}if(i.tag!==3)throw Error(p$1(188));return i.stateNode.current===i?e:a}function Zb$1(e){return e=Yb$1(e),e!==null?$b(e):null}function $b(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var a=$b(e);if(a!==null)return a;e=e.sibling}return null}var ac$1=ca.unstable_scheduleCallback,bc$1=ca.unstable_cancelCallback,cc$1=ca.unstable_shouldYield,dc$1=ca.unstable_requestPaint,B$1=ca.unstable_now,ec$1=ca.unstable_getCurrentPriorityLevel,fc$1=ca.unstable_ImmediatePriority,gc$1=ca.unstable_UserBlockingPriority,hc$1=ca.unstable_NormalPriority,ic$1=ca.unstable_LowPriority,jc$1=ca.unstable_IdlePriority,kc$1=null,lc$1=null;function mc$1(e){if(lc$1&&typeof lc$1.onCommitFiberRoot=="function")try{lc$1.onCommitFiberRoot(kc$1,e,void 0,(e.current.flags&128)===128)}catch{}}var oc$1=Math.clz32?Math.clz32:nc$1,pc$1=Math.log,qc$1=Math.LN2;function nc$1(e){return e>>>=0,e===0?32:31-(pc$1(e)/qc$1|0)|0}var rc$1=64,sc$1=4194304;function tc$1(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function uc$1(e,a){var i=e.pendingLanes;if(i===0)return 0;var o=0,c=e.suspendedLanes,d=e.pingedLanes,g=i&268435455;if(g!==0){var b=g&~c;b!==0?o=tc$1(b):(d&=g,d!==0&&(o=tc$1(d)))}else g=i&~c,g!==0?o=tc$1(g):d!==0&&(o=tc$1(d));if(o===0)return 0;if(a!==0&&a!==o&&!(a&c)&&(c=o&-o,d=a&-a,c>=d||c===16&&(d&4194240)!==0))return a;if(o&4&&(o|=i&16),a=e.entangledLanes,a!==0)for(e=e.entanglements,a&=o;0<a;)i=31-oc$1(a),c=1<<i,o|=e[i],a&=~c;return o}function vc$1(e,a){switch(e){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc$1(e,a){for(var i=e.suspendedLanes,o=e.pingedLanes,c=e.expirationTimes,d=e.pendingLanes;0<d;){var g=31-oc$1(d),b=1<<g,j=c[g];j===-1?(!(b&i)||b&o)&&(c[g]=vc$1(b,a)):j<=a&&(e.expiredLanes|=b),d&=~b}}function xc$1(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function yc$1(){var e=rc$1;return rc$1<<=1,!(rc$1&4194240)&&(rc$1=64),e}function zc$1(e){for(var a=[],i=0;31>i;i++)a.push(e);return a}function Ac$1(e,a,i){e.pendingLanes|=a,a!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,a=31-oc$1(a),e[a]=i}function Bc$1(e,a){var i=e.pendingLanes&~a;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=a,e.mutableReadLanes&=a,e.entangledLanes&=a,a=e.entanglements;var o=e.eventTimes;for(e=e.expirationTimes;0<i;){var c=31-oc$1(i),d=1<<c;a[c]=0,o[c]=-1,e[c]=-1,i&=~d}}function Cc$1(e,a){var i=e.entangledLanes|=a;for(e=e.entanglements;i;){var o=31-oc$1(i),c=1<<o;c&a|e[o]&a&&(e[o]|=a),i&=~c}}var C$1=0;function Dc$1(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Ec$1,Fc$1,Gc$1,Hc$1,Ic$1,Jc$1=!1,Kc$1=[],Lc$1=null,Mc$1=null,Nc$1=null,Oc$1=new Map,Pc$1=new Map,Qc$1=[],Rc$1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc$1(e,a){switch(e){case"focusin":case"focusout":Lc$1=null;break;case"dragenter":case"dragleave":Mc$1=null;break;case"mouseover":case"mouseout":Nc$1=null;break;case"pointerover":case"pointerout":Oc$1.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc$1.delete(a.pointerId)}}function Tc$1(e,a,i,o,c,d){return e===null||e.nativeEvent!==d?(e={blockedOn:a,domEventName:i,eventSystemFlags:o,nativeEvent:d,targetContainers:[c]},a!==null&&(a=Cb$1(a),a!==null&&Fc$1(a)),e):(e.eventSystemFlags|=o,a=e.targetContainers,c!==null&&a.indexOf(c)===-1&&a.push(c),e)}function Uc$1(e,a,i,o,c){switch(a){case"focusin":return Lc$1=Tc$1(Lc$1,e,a,i,o,c),!0;case"dragenter":return Mc$1=Tc$1(Mc$1,e,a,i,o,c),!0;case"mouseover":return Nc$1=Tc$1(Nc$1,e,a,i,o,c),!0;case"pointerover":var d=c.pointerId;return Oc$1.set(d,Tc$1(Oc$1.get(d)||null,e,a,i,o,c)),!0;case"gotpointercapture":return d=c.pointerId,Pc$1.set(d,Tc$1(Pc$1.get(d)||null,e,a,i,o,c)),!0}return!1}function Vc$1(e){var a=Wc$1(e.target);if(a!==null){var i=Vb$1(a);if(i!==null){if(a=i.tag,a===13){if(a=Wb$1(i),a!==null){e.blockedOn=a,Ic$1(e.priority,function(){Gc$1(i)});return}}else if(a===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Xc$1(e){if(e.blockedOn!==null)return!1;for(var a=e.targetContainers;0<a.length;){var i=Yc$1(e.domEventName,e.eventSystemFlags,a[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var o=new i.constructor(i.type,i);wb$1=o,i.target.dispatchEvent(o),wb$1=null}else return a=Cb$1(i),a!==null&&Fc$1(a),e.blockedOn=i,!1;a.shift()}return!0}function Zc(e,a,i){Xc$1(e)&&i.delete(a)}function $c$1(){Jc$1=!1,Lc$1!==null&&Xc$1(Lc$1)&&(Lc$1=null),Mc$1!==null&&Xc$1(Mc$1)&&(Mc$1=null),Nc$1!==null&&Xc$1(Nc$1)&&(Nc$1=null),Oc$1.forEach(Zc),Pc$1.forEach(Zc)}function ad$1(e,a){e.blockedOn===a&&(e.blockedOn=null,Jc$1||(Jc$1=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c$1)))}function bd$1(e){function a(c){return ad$1(c,e)}if(0<Kc$1.length){ad$1(Kc$1[0],e);for(var i=1;i<Kc$1.length;i++){var o=Kc$1[i];o.blockedOn===e&&(o.blockedOn=null)}}for(Lc$1!==null&&ad$1(Lc$1,e),Mc$1!==null&&ad$1(Mc$1,e),Nc$1!==null&&ad$1(Nc$1,e),Oc$1.forEach(a),Pc$1.forEach(a),i=0;i<Qc$1.length;i++)o=Qc$1[i],o.blockedOn===e&&(o.blockedOn=null);for(;0<Qc$1.length&&(i=Qc$1[0],i.blockedOn===null);)Vc$1(i),i.blockedOn===null&&Qc$1.shift()}var cd$1=ua$1.ReactCurrentBatchConfig,dd$1=!0;function ed$1(e,a,i,o){var c=C$1,d=cd$1.transition;cd$1.transition=null;try{C$1=1,fd$1(e,a,i,o)}finally{C$1=c,cd$1.transition=d}}function gd$1(e,a,i,o){var c=C$1,d=cd$1.transition;cd$1.transition=null;try{C$1=4,fd$1(e,a,i,o)}finally{C$1=c,cd$1.transition=d}}function fd$1(e,a,i,o){if(dd$1){var c=Yc$1(e,a,i,o);if(c===null)hd$1(e,a,o,id$1,i),Sc$1(e,o);else if(Uc$1(c,e,a,i,o))o.stopPropagation();else if(Sc$1(e,o),a&4&&-1<Rc$1.indexOf(e)){for(;c!==null;){var d=Cb$1(c);if(d!==null&&Ec$1(d),d=Yc$1(e,a,i,o),d===null&&hd$1(e,a,o,id$1,i),d===c)break;c=d}c!==null&&o.stopPropagation()}else hd$1(e,a,o,null,i)}}var id$1=null;function Yc$1(e,a,i,o){if(id$1=null,e=xb$1(o),e=Wc$1(e),e!==null)if(a=Vb$1(e),a===null)e=null;else if(i=a.tag,i===13){if(e=Wb$1(a),e!==null)return e;e=null}else if(i===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;e=null}else a!==e&&(e=null);return id$1=e,null}function jd$1(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec$1()){case fc$1:return 1;case gc$1:return 4;case hc$1:case ic$1:return 16;case jc$1:return 536870912;default:return 16}default:return 16}}var kd$1=null,ld$1=null,md$1=null;function nd$1(){if(md$1)return md$1;var e,a=ld$1,i=a.length,o,c="value"in kd$1?kd$1.value:kd$1.textContent,d=c.length;for(e=0;e<i&&a[e]===c[e];e++);var g=i-e;for(o=1;o<=g&&a[i-o]===c[d-o];o++);return md$1=c.slice(e,1<o?1-o:void 0)}function od$1(e){var a=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&a===13&&(e=13)):e=a,e===10&&(e=13),32<=e||e===13?e:0}function pd$1(){return!0}function qd$1(){return!1}function rd$1(e){function a(i,o,c,d,g){this._reactName=i,this._targetInst=c,this.type=o,this.nativeEvent=d,this.target=g,this.currentTarget=null;for(var b in e)e.hasOwnProperty(b)&&(i=e[b],this[b]=i?i(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?pd$1:qd$1,this.isPropagationStopped=qd$1,this}return A$1(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=pd$1)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=pd$1)},persist:function(){},isPersistent:pd$1}),a}var sd$1={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td$1=rd$1(sd$1),ud$1=A$1({},sd$1,{view:0,detail:0}),vd$1=rd$1(ud$1),wd$1,xd$1,yd$1,Ad$1=A$1({},ud$1,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd$1,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==yd$1&&(yd$1&&e.type==="mousemove"?(wd$1=e.screenX-yd$1.screenX,xd$1=e.screenY-yd$1.screenY):xd$1=wd$1=0,yd$1=e),wd$1)},movementY:function(e){return"movementY"in e?e.movementY:xd$1}}),Bd$1=rd$1(Ad$1),Cd$1=A$1({},Ad$1,{dataTransfer:0}),Dd$1=rd$1(Cd$1),Ed$1=A$1({},ud$1,{relatedTarget:0}),Fd$1=rd$1(Ed$1),Gd$1=A$1({},sd$1,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd$1=rd$1(Gd$1),Id$1=A$1({},sd$1,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Jd$1=rd$1(Id$1),Kd$1=A$1({},sd$1,{data:0}),Ld$1=rd$1(Kd$1),Md$1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd$1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od$1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd$1(e){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(e):(e=Od$1[e])?!!a[e]:!1}function zd$1(){return Pd$1}var Qd$1=A$1({},ud$1,{key:function(e){if(e.key){var a=Md$1[e.key]||e.key;if(a!=="Unidentified")return a}return e.type==="keypress"?(e=od$1(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Nd$1[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd$1,charCode:function(e){return e.type==="keypress"?od$1(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?od$1(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Rd$1=rd$1(Qd$1),Sd$1=A$1({},Ad$1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td$1=rd$1(Sd$1),Ud$1=A$1({},ud$1,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd$1}),Vd$1=rd$1(Ud$1),Wd$1=A$1({},sd$1,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd$1=rd$1(Wd$1),Yd$1=A$1({},Ad$1,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd$1=rd$1(Yd$1),$d$1=[9,13,27,32],ae=ia$1&&"CompositionEvent"in window,be=null;ia$1&&"documentMode"in document&&(be=document.documentMode);var ce$2=ia$1&&"TextEvent"in window&&!be,de=ia$1&&(!ae||be&&8<be&&11>=be),ee=" ",fe$2=!1;function ge(e,a){switch(e){case"keyup":return $d$1.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$1(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ie=!1;function je(e,a){switch(e){case"compositionend":return he$1(a);case"keypress":return a.which!==32?null:(fe$2=!0,ee);case"textInput":return e=a.data,e===ee&&fe$2?null:e;default:return null}}function ke$1(e,a){if(ie)return e==="compositionend"||!ae&&ge(e,a)?(e=nd$1(),md$1=ld$1=kd$1=null,ie=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return de&&a.locale!=="ko"?null:a.data;default:return null}}var le$1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a==="input"?!!le$1[e.type]:a==="textarea"}function ne(e,a,i,o){Eb$1(o),a=oe(a,"onChange"),0<a.length&&(i=new td$1("onChange","change",null,i,o),e.push({event:i,listeners:a}))}var pe=null,qe$1=null;function re(e){se$1(e,0)}function te(e){var a=ue$2(e);if(Wa$1(a))return e}function ve(e,a){if(e==="change")return a}var we=!1;if(ia$1){var xe;if(ia$1){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae$1(){pe&&(pe.detachEvent("onpropertychange",Be),qe$1=pe=null)}function Be(e){if(e.propertyName==="value"&&te(qe$1)){var a=[];ne(a,qe$1,e,xb$1(e)),Jb(re,a)}}function Ce(e,a,i){e==="focusin"?(Ae$1(),pe=a,qe$1=i,pe.attachEvent("onpropertychange",Be)):e==="focusout"&&Ae$1()}function De$2(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return te(qe$1)}function Ee(e,a){if(e==="click")return te(a)}function Fe(e,a){if(e==="input"||e==="change")return te(a)}function Ge(e,a){return e===a&&(e!==0||1/e===1/a)||e!==e&&a!==a}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(e,a){if(He(e,a))return!0;if(typeof e!="object"||e===null||typeof a!="object"||a===null)return!1;var i=Object.keys(e),o=Object.keys(a);if(i.length!==o.length)return!1;for(o=0;o<i.length;o++){var c=i[o];if(!ja$1.call(a,c)||!He(e[c],a[c]))return!1}return!0}function Je(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ke$1(e,a){var i=Je(e);e=0;for(var o;i;){if(i.nodeType===3){if(o=e+i.textContent.length,e<=a&&o>=a)return{node:i,offset:a-e};e=o}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Je(i)}}function Le$1(e,a){return e&&a?e===a?!0:e&&e.nodeType===3?!1:a&&a.nodeType===3?Le$1(e,a.parentNode):"contains"in e?e.contains(a):e.compareDocumentPosition?!!(e.compareDocumentPosition(a)&16):!1:!1}function Me$1(){for(var e=window,a=Xa$1();a instanceof e.HTMLIFrameElement;){try{var i=typeof a.contentWindow.location.href=="string"}catch{i=!1}if(i)e=a.contentWindow;else break;a=Xa$1(e.document)}return a}function Ne(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a&&(a==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||a==="textarea"||e.contentEditable==="true")}function Oe(e){var a=Me$1(),i=e.focusedElem,o=e.selectionRange;if(a!==i&&i&&i.ownerDocument&&Le$1(i.ownerDocument.documentElement,i)){if(o!==null&&Ne(i)){if(a=o.start,e=o.end,e===void 0&&(e=a),"selectionStart"in i)i.selectionStart=a,i.selectionEnd=Math.min(e,i.value.length);else if(e=(a=i.ownerDocument||document)&&a.defaultView||window,e.getSelection){e=e.getSelection();var c=i.textContent.length,d=Math.min(o.start,c);o=o.end===void 0?d:Math.min(o.end,c),!e.extend&&d>o&&(c=o,o=d,d=c),c=Ke$1(i,d);var g=Ke$1(i,o);c&&g&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==g.node||e.focusOffset!==g.offset)&&(a=a.createRange(),a.setStart(c.node,c.offset),e.removeAllRanges(),d>o?(e.addRange(a),e.extend(g.node,g.offset)):(a.setEnd(g.node,g.offset),e.addRange(a)))}}for(a=[],e=i;e=e.parentNode;)e.nodeType===1&&a.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<a.length;i++)e=a[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Pe$1=ia$1&&"documentMode"in document&&11>=document.documentMode,Qe$1=null,Re=null,Se$1=null,Te$1=!1;function Ue$1(e,a,i){var o=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Te$1||Qe$1==null||Qe$1!==Xa$1(o)||(o=Qe$1,"selectionStart"in o&&Ne(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Se$1&&Ie(Se$1,o)||(Se$1=o,o=oe(Re,"onSelect"),0<o.length&&(a=new td$1("onSelect","select",null,a,i),e.push({event:a,listeners:o}),a.target=Qe$1)))}function Ve(e,a){var i={};return i[e.toLowerCase()]=a.toLowerCase(),i["Webkit"+e]="webkit"+a,i["Moz"+e]="moz"+a,i}var We$1={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe$1={},Ye={};ia$1&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We$1.animationend.animation,delete We$1.animationiteration.animation,delete We$1.animationstart.animation),"TransitionEvent"in window||delete We$1.transitionend.transition);function Ze$1(e){if(Xe$1[e])return Xe$1[e];if(!We$1[e])return e;var a=We$1[e],i;for(i in a)if(a.hasOwnProperty(i)&&i in Ye)return Xe$1[e]=a[i];return e}var $e$2=Ze$1("animationend"),af$1=Ze$1("animationiteration"),bf$1=Ze$1("animationstart"),cf$1=Ze$1("transitionend"),df$1=new Map,ef$1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff$1(e,a){df$1.set(e,a),fa$1(a,[e])}for(var gf$1=0;gf$1<ef$1.length;gf$1++){var hf$1=ef$1[gf$1],jf$1=hf$1.toLowerCase(),kf$1=hf$1[0].toUpperCase()+hf$1.slice(1);ff$1(jf$1,"on"+kf$1)}ff$1($e$2,"onAnimationEnd");ff$1(af$1,"onAnimationIteration");ff$1(bf$1,"onAnimationStart");ff$1("dblclick","onDoubleClick");ff$1("focusin","onFocus");ff$1("focusout","onBlur");ff$1(cf$1,"onTransitionEnd");ha$1("onMouseEnter",["mouseout","mouseover"]);ha$1("onMouseLeave",["mouseout","mouseover"]);ha$1("onPointerEnter",["pointerout","pointerover"]);ha$1("onPointerLeave",["pointerout","pointerover"]);fa$1("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa$1("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa$1("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa$1("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa$1("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa$1("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf$1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf$1=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf$1));function nf$1(e,a,i){var o=e.type||"unknown-event";e.currentTarget=i,Ub$1(o,a,void 0,e),e.currentTarget=null}function se$1(e,a){a=(a&4)!==0;for(var i=0;i<e.length;i++){var o=e[i],c=o.event;o=o.listeners;e:{var d=void 0;if(a)for(var g=o.length-1;0<=g;g--){var b=o[g],j=b.instance,$=b.currentTarget;if(b=b.listener,j!==d&&c.isPropagationStopped())break e;nf$1(c,b,$),d=j}else for(g=0;g<o.length;g++){if(b=o[g],j=b.instance,$=b.currentTarget,b=b.listener,j!==d&&c.isPropagationStopped())break e;nf$1(c,b,$),d=j}}}if(Qb$1)throw e=Rb$1,Qb$1=!1,Rb$1=null,e}function D$1(e,a){var i=a[of$1];i===void 0&&(i=a[of$1]=new Set);var o=e+"__bubble";i.has(o)||(pf$1(a,e,2,!1),i.add(o))}function qf$1(e,a,i){var o=0;a&&(o|=4),pf$1(i,e,o,a)}var rf$1="_reactListening"+Math.random().toString(36).slice(2);function sf$1(e){if(!e[rf$1]){e[rf$1]=!0,da$1.forEach(function(i){i!=="selectionchange"&&(mf$1.has(i)||qf$1(i,!1,e),qf$1(i,!0,e))});var a=e.nodeType===9?e:e.ownerDocument;a===null||a[rf$1]||(a[rf$1]=!0,qf$1("selectionchange",!1,a))}}function pf$1(e,a,i,o){switch(jd$1(a)){case 1:var c=ed$1;break;case 4:c=gd$1;break;default:c=fd$1}i=c.bind(null,a,i,e),c=void 0,!Lb$1||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(c=!0),o?c!==void 0?e.addEventListener(a,i,{capture:!0,passive:c}):e.addEventListener(a,i,!0):c!==void 0?e.addEventListener(a,i,{passive:c}):e.addEventListener(a,i,!1)}function hd$1(e,a,i,o,c){var d=o;if(!(a&1)&&!(a&2)&&o!==null)e:for(;;){if(o===null)return;var g=o.tag;if(g===3||g===4){var b=o.stateNode.containerInfo;if(b===c||b.nodeType===8&&b.parentNode===c)break;if(g===4)for(g=o.return;g!==null;){var j=g.tag;if((j===3||j===4)&&(j=g.stateNode.containerInfo,j===c||j.nodeType===8&&j.parentNode===c))return;g=g.return}for(;b!==null;){if(g=Wc$1(b),g===null)return;if(j=g.tag,j===5||j===6){o=d=g;continue e}b=b.parentNode}}o=o.return}Jb(function(){var $=d,rt=xb$1(i),_e=[];e:{var st=df$1.get(e);if(st!==void 0){var ut=td$1,gt=e;switch(e){case"keypress":if(od$1(i)===0)break e;case"keydown":case"keyup":ut=Rd$1;break;case"focusin":gt="focus",ut=Fd$1;break;case"focusout":gt="blur",ut=Fd$1;break;case"beforeblur":case"afterblur":ut=Fd$1;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ut=Bd$1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ut=Dd$1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ut=Vd$1;break;case $e$2:case af$1:case bf$1:ut=Hd$1;break;case cf$1:ut=Xd$1;break;case"scroll":ut=vd$1;break;case"wheel":ut=Zd$1;break;case"copy":case"cut":case"paste":ut=Jd$1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ut=Td$1}var yt=(a&4)!==0,Pt=!yt&&e==="scroll",wt=yt?st!==null?st+"Capture":null:st;yt=[];for(var Ct=$,At;Ct!==null;){At=Ct;var Tt=At.stateNode;if(At.tag===5&&Tt!==null&&(At=Tt,wt!==null&&(Tt=Kb$1(Ct,wt),Tt!=null&&yt.push(tf$1(Ct,Tt,At)))),Pt)break;Ct=Ct.return}0<yt.length&&(st=new ut(st,gt,null,i,rt),_e.push({event:st,listeners:yt}))}}if(!(a&7)){e:{if(st=e==="mouseover"||e==="pointerover",ut=e==="mouseout"||e==="pointerout",st&&i!==wb$1&&(gt=i.relatedTarget||i.fromElement)&&(Wc$1(gt)||gt[uf$1]))break e;if((ut||st)&&(st=rt.window===rt?rt:(st=rt.ownerDocument)?st.defaultView||st.parentWindow:window,ut?(gt=i.relatedTarget||i.toElement,ut=$,gt=gt?Wc$1(gt):null,gt!==null&&(Pt=Vb$1(gt),gt!==Pt||gt.tag!==5&&gt.tag!==6)&&(gt=null)):(ut=null,gt=$),ut!==gt)){if(yt=Bd$1,Tt="onMouseLeave",wt="onMouseEnter",Ct="mouse",(e==="pointerout"||e==="pointerover")&&(yt=Td$1,Tt="onPointerLeave",wt="onPointerEnter",Ct="pointer"),Pt=ut==null?st:ue$2(ut),At=gt==null?st:ue$2(gt),st=new yt(Tt,Ct+"leave",ut,i,rt),st.target=Pt,st.relatedTarget=At,Tt=null,Wc$1(rt)===$&&(yt=new yt(wt,Ct+"enter",gt,i,rt),yt.target=At,yt.relatedTarget=Pt,Tt=yt),Pt=Tt,ut&&gt)t:{for(yt=ut,wt=gt,Ct=0,At=yt;At;At=vf$1(At))Ct++;for(At=0,Tt=wt;Tt;Tt=vf$1(Tt))At++;for(;0<Ct-At;)yt=vf$1(yt),Ct--;for(;0<At-Ct;)wt=vf$1(wt),At--;for(;Ct--;){if(yt===wt||wt!==null&&yt===wt.alternate)break t;yt=vf$1(yt),wt=vf$1(wt)}yt=null}else yt=null;ut!==null&&wf$1(_e,st,ut,yt,!1),gt!==null&&Pt!==null&&wf$1(_e,Pt,gt,yt,!0)}}e:{if(st=$?ue$2($):window,ut=st.nodeName&&st.nodeName.toLowerCase(),ut==="select"||ut==="input"&&st.type==="file")var kt=ve;else if(me(st))if(we)kt=Fe;else{kt=De$2;var It=Ce}else(ut=st.nodeName)&&ut.toLowerCase()==="input"&&(st.type==="checkbox"||st.type==="radio")&&(kt=Ee);if(kt&&(kt=kt(e,$))){ne(_e,kt,i,rt);break e}It&&It(e,st,$),e==="focusout"&&(It=st._wrapperState)&&It.controlled&&st.type==="number"&&cb$1(st,"number",st.value)}switch(It=$?ue$2($):window,e){case"focusin":(me(It)||It.contentEditable==="true")&&(Qe$1=It,Re=$,Se$1=null);break;case"focusout":Se$1=Re=Qe$1=null;break;case"mousedown":Te$1=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$1=!1,Ue$1(_e,i,rt);break;case"selectionchange":if(Pe$1)break;case"keydown":case"keyup":Ue$1(_e,i,rt)}var Lt;if(ae)e:{switch(e){case"compositionstart":var Ft="onCompositionStart";break e;case"compositionend":Ft="onCompositionEnd";break e;case"compositionupdate":Ft="onCompositionUpdate";break e}Ft=void 0}else ie?ge(e,i)&&(Ft="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(Ft="onCompositionStart");Ft&&(de&&i.locale!=="ko"&&(ie||Ft!=="onCompositionStart"?Ft==="onCompositionEnd"&&ie&&(Lt=nd$1()):(kd$1=rt,ld$1="value"in kd$1?kd$1.value:kd$1.textContent,ie=!0)),It=oe($,Ft),0<It.length&&(Ft=new Ld$1(Ft,e,null,i,rt),_e.push({event:Ft,listeners:It}),Lt?Ft.data=Lt:(Lt=he$1(i),Lt!==null&&(Ft.data=Lt)))),(Lt=ce$2?je(e,i):ke$1(e,i))&&($=oe($,"onBeforeInput"),0<$.length&&(rt=new Ld$1("onBeforeInput","beforeinput",null,i,rt),_e.push({event:rt,listeners:$}),rt.data=Lt))}se$1(_e,a)})}function tf$1(e,a,i){return{instance:e,listener:a,currentTarget:i}}function oe(e,a){for(var i=a+"Capture",o=[];e!==null;){var c=e,d=c.stateNode;c.tag===5&&d!==null&&(c=d,d=Kb$1(e,i),d!=null&&o.unshift(tf$1(e,d,c)),d=Kb$1(e,a),d!=null&&o.push(tf$1(e,d,c))),e=e.return}return o}function vf$1(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function wf$1(e,a,i,o,c){for(var d=a._reactName,g=[];i!==null&&i!==o;){var b=i,j=b.alternate,$=b.stateNode;if(j!==null&&j===o)break;b.tag===5&&$!==null&&(b=$,c?(j=Kb$1(i,d),j!=null&&g.unshift(tf$1(i,j,b))):c||(j=Kb$1(i,d),j!=null&&g.push(tf$1(i,j,b)))),i=i.return}g.length!==0&&e.push({event:a,listeners:g})}var xf$1=/\r\n?/g,yf$1=/\u0000|\uFFFD/g;function zf$1(e){return(typeof e=="string"?e:""+e).replace(xf$1,`
`).replace(yf$1,"")}function Af$1(e,a,i){if(a=zf$1(a),zf$1(e)!==a&&i)throw Error(p$1(425))}function Bf$1(){}var Cf$1=null,Df$1=null;function Ef$1(e,a){return e==="textarea"||e==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Ff$1=typeof setTimeout=="function"?setTimeout:void 0,Gf$1=typeof clearTimeout=="function"?clearTimeout:void 0,Hf$1=typeof Promise=="function"?Promise:void 0,Jf$1=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf$1<"u"?function(e){return Hf$1.resolve(null).then(e).catch(If$1)}:Ff$1;function If$1(e){setTimeout(function(){throw e})}function Kf$1(e,a){var i=a,o=0;do{var c=i.nextSibling;if(e.removeChild(i),c&&c.nodeType===8)if(i=c.data,i==="/$"){if(o===0){e.removeChild(c),bd$1(a);return}o--}else i!=="$"&&i!=="$?"&&i!=="$!"||o++;i=c}while(i);bd$1(a)}function Lf$1(e){for(;e!=null;e=e.nextSibling){var a=e.nodeType;if(a===1||a===3)break;if(a===8){if(a=e.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return e}function Mf$1(e){e=e.previousSibling;for(var a=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(a===0)return e;a--}else i==="/$"&&a++}e=e.previousSibling}return null}var Nf$1=Math.random().toString(36).slice(2),Of$1="__reactFiber$"+Nf$1,Pf$1="__reactProps$"+Nf$1,uf$1="__reactContainer$"+Nf$1,of$1="__reactEvents$"+Nf$1,Qf$1="__reactListeners$"+Nf$1,Rf$1="__reactHandles$"+Nf$1;function Wc$1(e){var a=e[Of$1];if(a)return a;for(var i=e.parentNode;i;){if(a=i[uf$1]||i[Of$1]){if(i=a.alternate,a.child!==null||i!==null&&i.child!==null)for(e=Mf$1(e);e!==null;){if(i=e[Of$1])return i;e=Mf$1(e)}return a}e=i,i=e.parentNode}return null}function Cb$1(e){return e=e[Of$1]||e[uf$1],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ue$2(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(p$1(33))}function Db$1(e){return e[Pf$1]||null}var Sf$1=[],Tf$1=-1;function Uf$1(e){return{current:e}}function E$1(e){0>Tf$1||(e.current=Sf$1[Tf$1],Sf$1[Tf$1]=null,Tf$1--)}function G$1(e,a){Tf$1++,Sf$1[Tf$1]=e.current,e.current=a}var Vf$1={},H$1=Uf$1(Vf$1),Wf$1=Uf$1(!1),Xf$1=Vf$1;function Yf$1(e,a){var i=e.type.contextTypes;if(!i)return Vf$1;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===a)return o.__reactInternalMemoizedMaskedChildContext;var c={},d;for(d in i)c[d]=a[d];return o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=c),c}function Zf$1(e){return e=e.childContextTypes,e!=null}function $f$1(){E$1(Wf$1),E$1(H$1)}function ag$1(e,a,i){if(H$1.current!==Vf$1)throw Error(p$1(168));G$1(H$1,a),G$1(Wf$1,i)}function bg$1(e,a,i){var o=e.stateNode;if(a=a.childContextTypes,typeof o.getChildContext!="function")return i;o=o.getChildContext();for(var c in o)if(!(c in a))throw Error(p$1(108,Ra$1(e)||"Unknown",c));return A$1({},i,o)}function cg$1(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Vf$1,Xf$1=H$1.current,G$1(H$1,e),G$1(Wf$1,Wf$1.current),!0}function dg$1(e,a,i){var o=e.stateNode;if(!o)throw Error(p$1(169));i?(e=bg$1(e,a,Xf$1),o.__reactInternalMemoizedMergedChildContext=e,E$1(Wf$1),E$1(H$1),G$1(H$1,e)):E$1(Wf$1),G$1(Wf$1,i)}var eg$1=null,fg$1=!1,gg$1=!1;function hg$1(e){eg$1===null?eg$1=[e]:eg$1.push(e)}function ig$1(e){fg$1=!0,hg$1(e)}function jg$1(){if(!gg$1&&eg$1!==null){gg$1=!0;var e=0,a=C$1;try{var i=eg$1;for(C$1=1;e<i.length;e++){var o=i[e];do o=o(!0);while(o!==null)}eg$1=null,fg$1=!1}catch(c){throw eg$1!==null&&(eg$1=eg$1.slice(e+1)),ac$1(fc$1,jg$1),c}finally{C$1=a,gg$1=!1}}return null}var kg$1=[],lg$1=0,mg$1=null,ng$1=0,og$1=[],pg$1=0,qg$1=null,rg$1=1,sg$1="";function tg$1(e,a){kg$1[lg$1++]=ng$1,kg$1[lg$1++]=mg$1,mg$1=e,ng$1=a}function ug$1(e,a,i){og$1[pg$1++]=rg$1,og$1[pg$1++]=sg$1,og$1[pg$1++]=qg$1,qg$1=e;var o=rg$1;e=sg$1;var c=32-oc$1(o)-1;o&=~(1<<c),i+=1;var d=32-oc$1(a)+c;if(30<d){var g=c-c%5;d=(o&(1<<g)-1).toString(32),o>>=g,c-=g,rg$1=1<<32-oc$1(a)+c|i<<c|o,sg$1=d+e}else rg$1=1<<d|i<<c|o,sg$1=e}function vg$1(e){e.return!==null&&(tg$1(e,1),ug$1(e,1,0))}function wg$1(e){for(;e===mg$1;)mg$1=kg$1[--lg$1],kg$1[lg$1]=null,ng$1=kg$1[--lg$1],kg$1[lg$1]=null;for(;e===qg$1;)qg$1=og$1[--pg$1],og$1[pg$1]=null,sg$1=og$1[--pg$1],og$1[pg$1]=null,rg$1=og$1[--pg$1],og$1[pg$1]=null}var xg$1=null,yg$1=null,I$1=!1,zg$1=null;function Ag$1(e,a){var i=Bg(5,null,null,0);i.elementType="DELETED",i.stateNode=a,i.return=e,a=e.deletions,a===null?(e.deletions=[i],e.flags|=16):a.push(i)}function Cg$1(e,a){switch(e.tag){case 5:var i=e.type;return a=a.nodeType!==1||i.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(e.stateNode=a,xg$1=e,yg$1=Lf$1(a.firstChild),!0):!1;case 6:return a=e.pendingProps===""||a.nodeType!==3?null:a,a!==null?(e.stateNode=a,xg$1=e,yg$1=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(i=qg$1!==null?{id:rg$1,overflow:sg$1}:null,e.memoizedState={dehydrated:a,treeContext:i,retryLane:1073741824},i=Bg(18,null,null,0),i.stateNode=a,i.return=e,e.child=i,xg$1=e,yg$1=null,!0):!1;default:return!1}}function Dg$1(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Eg$1(e){if(I$1){var a=yg$1;if(a){var i=a;if(!Cg$1(e,a)){if(Dg$1(e))throw Error(p$1(418));a=Lf$1(i.nextSibling);var o=xg$1;a&&Cg$1(e,a)?Ag$1(o,i):(e.flags=e.flags&-4097|2,I$1=!1,xg$1=e)}}else{if(Dg$1(e))throw Error(p$1(418));e.flags=e.flags&-4097|2,I$1=!1,xg$1=e}}}function Fg$1(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;xg$1=e}function Gg$1(e){if(e!==xg$1)return!1;if(!I$1)return Fg$1(e),I$1=!0,!1;var a;if((a=e.tag!==3)&&!(a=e.tag!==5)&&(a=e.type,a=a!=="head"&&a!=="body"&&!Ef$1(e.type,e.memoizedProps)),a&&(a=yg$1)){if(Dg$1(e))throw Hg$1(),Error(p$1(418));for(;a;)Ag$1(e,a),a=Lf$1(a.nextSibling)}if(Fg$1(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(p$1(317));e:{for(e=e.nextSibling,a=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(a===0){yg$1=Lf$1(e.nextSibling);break e}a--}else i!=="$"&&i!=="$!"&&i!=="$?"||a++}e=e.nextSibling}yg$1=null}}else yg$1=xg$1?Lf$1(e.stateNode.nextSibling):null;return!0}function Hg$1(){for(var e=yg$1;e;)e=Lf$1(e.nextSibling)}function Ig$1(){yg$1=xg$1=null,I$1=!1}function Jg$1(e){zg$1===null?zg$1=[e]:zg$1.push(e)}var Kg$1=ua$1.ReactCurrentBatchConfig;function Lg$1(e,a){if(e&&e.defaultProps){a=A$1({},a),e=e.defaultProps;for(var i in e)a[i]===void 0&&(a[i]=e[i]);return a}return a}var Mg$1=Uf$1(null),Ng=null,Og$1=null,Pg$1=null;function Qg$1(){Pg$1=Og$1=Ng=null}function Rg$1(e){var a=Mg$1.current;E$1(Mg$1),e._currentValue=a}function Sg$1(e,a,i){for(;e!==null;){var o=e.alternate;if((e.childLanes&a)!==a?(e.childLanes|=a,o!==null&&(o.childLanes|=a)):o!==null&&(o.childLanes&a)!==a&&(o.childLanes|=a),e===i)break;e=e.return}}function Tg$1(e,a){Ng=e,Pg$1=Og$1=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&a&&(Ug$1=!0),e.firstContext=null)}function Vg$1(e){var a=e._currentValue;if(Pg$1!==e)if(e={context:e,memoizedValue:a,next:null},Og$1===null){if(Ng===null)throw Error(p$1(308));Og$1=e,Ng.dependencies={lanes:0,firstContext:e}}else Og$1=Og$1.next=e;return a}var Wg$1=null;function Xg$1(e){Wg$1===null?Wg$1=[e]:Wg$1.push(e)}function Yg$1(e,a,i,o){var c=a.interleaved;return c===null?(i.next=i,Xg$1(a)):(i.next=c.next,c.next=i),a.interleaved=i,Zg$1(e,o)}function Zg$1(e,a){e.lanes|=a;var i=e.alternate;for(i!==null&&(i.lanes|=a),i=e,e=e.return;e!==null;)e.childLanes|=a,i=e.alternate,i!==null&&(i.childLanes|=a),i=e,e=e.return;return i.tag===3?i.stateNode:null}var $g$1=!1;function ah$1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh$1(e,a){e=e.updateQueue,a.updateQueue===e&&(a.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ch$1(e,a){return{eventTime:e,lane:a,tag:0,payload:null,callback:null,next:null}}function dh$1(e,a,i){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,K$1&2){var c=o.pending;return c===null?a.next=a:(a.next=c.next,c.next=a),o.pending=a,Zg$1(e,i)}return c=o.interleaved,c===null?(a.next=a,Xg$1(o)):(a.next=c.next,c.next=a),o.interleaved=a,Zg$1(e,i)}function eh$1(e,a,i){if(a=a.updateQueue,a!==null&&(a=a.shared,(i&4194240)!==0)){var o=a.lanes;o&=e.pendingLanes,i|=o,a.lanes=i,Cc$1(e,i)}}function fh$1(e,a){var i=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,i===o)){var c=null,d=null;if(i=i.firstBaseUpdate,i!==null){do{var g={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};d===null?c=d=g:d=d.next=g,i=i.next}while(i!==null);d===null?c=d=a:d=d.next=a}else c=d=a;i={baseState:o.baseState,firstBaseUpdate:c,lastBaseUpdate:d,shared:o.shared,effects:o.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=a:e.next=a,i.lastBaseUpdate=a}function gh$1(e,a,i,o){var c=e.updateQueue;$g$1=!1;var d=c.firstBaseUpdate,g=c.lastBaseUpdate,b=c.shared.pending;if(b!==null){c.shared.pending=null;var j=b,$=j.next;j.next=null,g===null?d=$:g.next=$,g=j;var rt=e.alternate;rt!==null&&(rt=rt.updateQueue,b=rt.lastBaseUpdate,b!==g&&(b===null?rt.firstBaseUpdate=$:b.next=$,rt.lastBaseUpdate=j))}if(d!==null){var _e=c.baseState;g=0,rt=$=j=null,b=d;do{var st=b.lane,ut=b.eventTime;if((o&st)===st){rt!==null&&(rt=rt.next={eventTime:ut,lane:0,tag:b.tag,payload:b.payload,callback:b.callback,next:null});e:{var gt=e,yt=b;switch(st=a,ut=i,yt.tag){case 1:if(gt=yt.payload,typeof gt=="function"){_e=gt.call(ut,_e,st);break e}_e=gt;break e;case 3:gt.flags=gt.flags&-65537|128;case 0:if(gt=yt.payload,st=typeof gt=="function"?gt.call(ut,_e,st):gt,st==null)break e;_e=A$1({},_e,st);break e;case 2:$g$1=!0}}b.callback!==null&&b.lane!==0&&(e.flags|=64,st=c.effects,st===null?c.effects=[b]:st.push(b))}else ut={eventTime:ut,lane:st,tag:b.tag,payload:b.payload,callback:b.callback,next:null},rt===null?($=rt=ut,j=_e):rt=rt.next=ut,g|=st;if(b=b.next,b===null){if(b=c.shared.pending,b===null)break;st=b,b=st.next,st.next=null,c.lastBaseUpdate=st,c.shared.pending=null}}while(!0);if(rt===null&&(j=_e),c.baseState=j,c.firstBaseUpdate=$,c.lastBaseUpdate=rt,a=c.shared.interleaved,a!==null){c=a;do g|=c.lane,c=c.next;while(c!==a)}else d===null&&(c.shared.lanes=0);hh$1|=g,e.lanes=g,e.memoizedState=_e}}function ih$1(e,a,i){if(e=a.effects,a.effects=null,e!==null)for(a=0;a<e.length;a++){var o=e[a],c=o.callback;if(c!==null){if(o.callback=null,o=i,typeof c!="function")throw Error(p$1(191,c));c.call(o)}}}var jh$1=new aa$2.Component().refs;function kh$1(e,a,i,o){a=e.memoizedState,i=i(o,a),i=i==null?a:A$1({},a,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var nh$1={isMounted:function(e){return(e=e._reactInternals)?Vb$1(e)===e:!1},enqueueSetState:function(e,a,i){e=e._reactInternals;var o=L$1(),c=lh$1(e),d=ch$1(o,c);d.payload=a,i!=null&&(d.callback=i),a=dh$1(e,d,c),a!==null&&(mh$1(a,e,c,o),eh$1(a,e,c))},enqueueReplaceState:function(e,a,i){e=e._reactInternals;var o=L$1(),c=lh$1(e),d=ch$1(o,c);d.tag=1,d.payload=a,i!=null&&(d.callback=i),a=dh$1(e,d,c),a!==null&&(mh$1(a,e,c,o),eh$1(a,e,c))},enqueueForceUpdate:function(e,a){e=e._reactInternals;var i=L$1(),o=lh$1(e),c=ch$1(i,o);c.tag=2,a!=null&&(c.callback=a),a=dh$1(e,c,o),a!==null&&(mh$1(a,e,o,i),eh$1(a,e,o))}};function oh$1(e,a,i,o,c,d,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,d,g):a.prototype&&a.prototype.isPureReactComponent?!Ie(i,o)||!Ie(c,d):!0}function ph$1(e,a,i){var o=!1,c=Vf$1,d=a.contextType;return typeof d=="object"&&d!==null?d=Vg$1(d):(c=Zf$1(a)?Xf$1:H$1.current,o=a.contextTypes,d=(o=o!=null)?Yf$1(e,c):Vf$1),a=new a(i,d),e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=nh$1,e.stateNode=a,a._reactInternals=e,o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=d),a}function qh$1(e,a,i,o){e=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(i,o),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(i,o),a.state!==e&&nh$1.enqueueReplaceState(a,a.state,null)}function rh$1(e,a,i,o){var c=e.stateNode;c.props=i,c.state=e.memoizedState,c.refs=jh$1,ah$1(e);var d=a.contextType;typeof d=="object"&&d!==null?c.context=Vg$1(d):(d=Zf$1(a)?Xf$1:H$1.current,c.context=Yf$1(e,d)),c.state=e.memoizedState,d=a.getDerivedStateFromProps,typeof d=="function"&&(kh$1(e,a,d,i),c.state=e.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(a=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),a!==c.state&&nh$1.enqueueReplaceState(c,c.state,null),gh$1(e,i,c,o),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function sh$1(e,a,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(p$1(309));var o=i.stateNode}if(!o)throw Error(p$1(147,e));var c=o,d=""+e;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===d?a.ref:(a=function(g){var b=c.refs;b===jh$1&&(b=c.refs={}),g===null?delete b[d]:b[d]=g},a._stringRef=d,a)}if(typeof e!="string")throw Error(p$1(284));if(!i._owner)throw Error(p$1(290,e))}return e}function th$1(e,a){throw e=Object.prototype.toString.call(a),Error(p$1(31,e==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":e))}function uh$1(e){var a=e._init;return a(e._payload)}function vh$1(e){function a(wt,Ct){if(e){var At=wt.deletions;At===null?(wt.deletions=[Ct],wt.flags|=16):At.push(Ct)}}function i(wt,Ct){if(!e)return null;for(;Ct!==null;)a(wt,Ct),Ct=Ct.sibling;return null}function o(wt,Ct){for(wt=new Map;Ct!==null;)Ct.key!==null?wt.set(Ct.key,Ct):wt.set(Ct.index,Ct),Ct=Ct.sibling;return wt}function c(wt,Ct){return wt=wh$1(wt,Ct),wt.index=0,wt.sibling=null,wt}function d(wt,Ct,At){return wt.index=At,e?(At=wt.alternate,At!==null?(At=At.index,At<Ct?(wt.flags|=2,Ct):At):(wt.flags|=2,Ct)):(wt.flags|=1048576,Ct)}function g(wt){return e&&wt.alternate===null&&(wt.flags|=2),wt}function b(wt,Ct,At,Tt){return Ct===null||Ct.tag!==6?(Ct=xh$1(At,wt.mode,Tt),Ct.return=wt,Ct):(Ct=c(Ct,At),Ct.return=wt,Ct)}function j(wt,Ct,At,Tt){var kt=At.type;return kt===ya$1?rt(wt,Ct,At.props.children,Tt,At.key):Ct!==null&&(Ct.elementType===kt||typeof kt=="object"&&kt!==null&&kt.$$typeof===Ha$1&&uh$1(kt)===Ct.type)?(Tt=c(Ct,At.props),Tt.ref=sh$1(wt,Ct,At),Tt.return=wt,Tt):(Tt=yh$1(At.type,At.key,At.props,null,wt.mode,Tt),Tt.ref=sh$1(wt,Ct,At),Tt.return=wt,Tt)}function $(wt,Ct,At,Tt){return Ct===null||Ct.tag!==4||Ct.stateNode.containerInfo!==At.containerInfo||Ct.stateNode.implementation!==At.implementation?(Ct=zh$1(At,wt.mode,Tt),Ct.return=wt,Ct):(Ct=c(Ct,At.children||[]),Ct.return=wt,Ct)}function rt(wt,Ct,At,Tt,kt){return Ct===null||Ct.tag!==7?(Ct=Ah$1(At,wt.mode,Tt,kt),Ct.return=wt,Ct):(Ct=c(Ct,At),Ct.return=wt,Ct)}function _e(wt,Ct,At){if(typeof Ct=="string"&&Ct!==""||typeof Ct=="number")return Ct=xh$1(""+Ct,wt.mode,At),Ct.return=wt,Ct;if(typeof Ct=="object"&&Ct!==null){switch(Ct.$$typeof){case va$1:return At=yh$1(Ct.type,Ct.key,Ct.props,null,wt.mode,At),At.ref=sh$1(wt,null,Ct),At.return=wt,At;case wa$1:return Ct=zh$1(Ct,wt.mode,At),Ct.return=wt,Ct;case Ha$1:var Tt=Ct._init;return _e(wt,Tt(Ct._payload),At)}if(eb$1(Ct)||Ka$1(Ct))return Ct=Ah$1(Ct,wt.mode,At,null),Ct.return=wt,Ct;th$1(wt,Ct)}return null}function st(wt,Ct,At,Tt){var kt=Ct!==null?Ct.key:null;if(typeof At=="string"&&At!==""||typeof At=="number")return kt!==null?null:b(wt,Ct,""+At,Tt);if(typeof At=="object"&&At!==null){switch(At.$$typeof){case va$1:return At.key===kt?j(wt,Ct,At,Tt):null;case wa$1:return At.key===kt?$(wt,Ct,At,Tt):null;case Ha$1:return kt=At._init,st(wt,Ct,kt(At._payload),Tt)}if(eb$1(At)||Ka$1(At))return kt!==null?null:rt(wt,Ct,At,Tt,null);th$1(wt,At)}return null}function ut(wt,Ct,At,Tt,kt){if(typeof Tt=="string"&&Tt!==""||typeof Tt=="number")return wt=wt.get(At)||null,b(Ct,wt,""+Tt,kt);if(typeof Tt=="object"&&Tt!==null){switch(Tt.$$typeof){case va$1:return wt=wt.get(Tt.key===null?At:Tt.key)||null,j(Ct,wt,Tt,kt);case wa$1:return wt=wt.get(Tt.key===null?At:Tt.key)||null,$(Ct,wt,Tt,kt);case Ha$1:var It=Tt._init;return ut(wt,Ct,At,It(Tt._payload),kt)}if(eb$1(Tt)||Ka$1(Tt))return wt=wt.get(At)||null,rt(Ct,wt,Tt,kt,null);th$1(Ct,Tt)}return null}function gt(wt,Ct,At,Tt){for(var kt=null,It=null,Lt=Ct,Ft=Ct=0,Nt=null;Lt!==null&&Ft<At.length;Ft++){Lt.index>Ft?(Nt=Lt,Lt=null):Nt=Lt.sibling;var Ht=st(wt,Lt,At[Ft],Tt);if(Ht===null){Lt===null&&(Lt=Nt);break}e&&Lt&&Ht.alternate===null&&a(wt,Lt),Ct=d(Ht,Ct,Ft),It===null?kt=Ht:It.sibling=Ht,It=Ht,Lt=Nt}if(Ft===At.length)return i(wt,Lt),I$1&&tg$1(wt,Ft),kt;if(Lt===null){for(;Ft<At.length;Ft++)Lt=_e(wt,At[Ft],Tt),Lt!==null&&(Ct=d(Lt,Ct,Ft),It===null?kt=Lt:It.sibling=Lt,It=Lt);return I$1&&tg$1(wt,Ft),kt}for(Lt=o(wt,Lt);Ft<At.length;Ft++)Nt=ut(Lt,wt,Ft,At[Ft],Tt),Nt!==null&&(e&&Nt.alternate!==null&&Lt.delete(Nt.key===null?Ft:Nt.key),Ct=d(Nt,Ct,Ft),It===null?kt=Nt:It.sibling=Nt,It=Nt);return e&&Lt.forEach(function(Gr){return a(wt,Gr)}),I$1&&tg$1(wt,Ft),kt}function yt(wt,Ct,At,Tt){var kt=Ka$1(At);if(typeof kt!="function")throw Error(p$1(150));if(At=kt.call(At),At==null)throw Error(p$1(151));for(var It=kt=null,Lt=Ct,Ft=Ct=0,Nt=null,Ht=At.next();Lt!==null&&!Ht.done;Ft++,Ht=At.next()){Lt.index>Ft?(Nt=Lt,Lt=null):Nt=Lt.sibling;var Gr=st(wt,Lt,Ht.value,Tt);if(Gr===null){Lt===null&&(Lt=Nt);break}e&&Lt&&Gr.alternate===null&&a(wt,Lt),Ct=d(Gr,Ct,Ft),It===null?kt=Gr:It.sibling=Gr,It=Gr,Lt=Nt}if(Ht.done)return i(wt,Lt),I$1&&tg$1(wt,Ft),kt;if(Lt===null){for(;!Ht.done;Ft++,Ht=At.next())Ht=_e(wt,Ht.value,Tt),Ht!==null&&(Ct=d(Ht,Ct,Ft),It===null?kt=Ht:It.sibling=Ht,It=Ht);return I$1&&tg$1(wt,Ft),kt}for(Lt=o(wt,Lt);!Ht.done;Ft++,Ht=At.next())Ht=ut(Lt,wt,Ft,Ht.value,Tt),Ht!==null&&(e&&Ht.alternate!==null&&Lt.delete(Ht.key===null?Ft:Ht.key),Ct=d(Ht,Ct,Ft),It===null?kt=Ht:It.sibling=Ht,It=Ht);return e&&Lt.forEach(function(hs){return a(wt,hs)}),I$1&&tg$1(wt,Ft),kt}function Pt(wt,Ct,At,Tt){if(typeof At=="object"&&At!==null&&At.type===ya$1&&At.key===null&&(At=At.props.children),typeof At=="object"&&At!==null){switch(At.$$typeof){case va$1:e:{for(var kt=At.key,It=Ct;It!==null;){if(It.key===kt){if(kt=At.type,kt===ya$1){if(It.tag===7){i(wt,It.sibling),Ct=c(It,At.props.children),Ct.return=wt,wt=Ct;break e}}else if(It.elementType===kt||typeof kt=="object"&&kt!==null&&kt.$$typeof===Ha$1&&uh$1(kt)===It.type){i(wt,It.sibling),Ct=c(It,At.props),Ct.ref=sh$1(wt,It,At),Ct.return=wt,wt=Ct;break e}i(wt,It);break}else a(wt,It);It=It.sibling}At.type===ya$1?(Ct=Ah$1(At.props.children,wt.mode,Tt,At.key),Ct.return=wt,wt=Ct):(Tt=yh$1(At.type,At.key,At.props,null,wt.mode,Tt),Tt.ref=sh$1(wt,Ct,At),Tt.return=wt,wt=Tt)}return g(wt);case wa$1:e:{for(It=At.key;Ct!==null;){if(Ct.key===It)if(Ct.tag===4&&Ct.stateNode.containerInfo===At.containerInfo&&Ct.stateNode.implementation===At.implementation){i(wt,Ct.sibling),Ct=c(Ct,At.children||[]),Ct.return=wt,wt=Ct;break e}else{i(wt,Ct);break}else a(wt,Ct);Ct=Ct.sibling}Ct=zh$1(At,wt.mode,Tt),Ct.return=wt,wt=Ct}return g(wt);case Ha$1:return It=At._init,Pt(wt,Ct,It(At._payload),Tt)}if(eb$1(At))return gt(wt,Ct,At,Tt);if(Ka$1(At))return yt(wt,Ct,At,Tt);th$1(wt,At)}return typeof At=="string"&&At!==""||typeof At=="number"?(At=""+At,Ct!==null&&Ct.tag===6?(i(wt,Ct.sibling),Ct=c(Ct,At),Ct.return=wt,wt=Ct):(i(wt,Ct),Ct=xh$1(At,wt.mode,Tt),Ct.return=wt,wt=Ct),g(wt)):i(wt,Ct)}return Pt}var Bh$1=vh$1(!0),Ch$1=vh$1(!1),Dh$1={},Eh$1=Uf$1(Dh$1),Fh$1=Uf$1(Dh$1),Gh$1=Uf$1(Dh$1);function Hh$1(e){if(e===Dh$1)throw Error(p$1(174));return e}function Ih$1(e,a){switch(G$1(Gh$1,a),G$1(Fh$1,e),G$1(Eh$1,Dh$1),e=a.nodeType,e){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:lb$1(null,"");break;default:e=e===8?a.parentNode:a,a=e.namespaceURI||null,e=e.tagName,a=lb$1(a,e)}E$1(Eh$1),G$1(Eh$1,a)}function Jh$1(){E$1(Eh$1),E$1(Fh$1),E$1(Gh$1)}function Kh$1(e){Hh$1(Gh$1.current);var a=Hh$1(Eh$1.current),i=lb$1(a,e.type);a!==i&&(G$1(Fh$1,e),G$1(Eh$1,i))}function Lh$1(e){Fh$1.current===e&&(E$1(Eh$1),E$1(Fh$1))}var M$1=Uf$1(0);function Mh$1(e){for(var a=e;a!==null;){if(a.tag===13){var i=a.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if(a.flags&128)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Nh$1=[];function Oh$1(){for(var e=0;e<Nh$1.length;e++)Nh$1[e]._workInProgressVersionPrimary=null;Nh$1.length=0}var Ph$1=ua$1.ReactCurrentDispatcher,Qh$1=ua$1.ReactCurrentBatchConfig,Rh$1=0,N$1=null,O$1=null,P$1=null,Sh$1=!1,Th$1=!1,Uh$1=0,Vh$1=0;function Q$1(){throw Error(p$1(321))}function Wh$1(e,a){if(a===null)return!1;for(var i=0;i<a.length&&i<e.length;i++)if(!He(e[i],a[i]))return!1;return!0}function Xh$1(e,a,i,o,c,d){if(Rh$1=d,N$1=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Ph$1.current=e===null||e.memoizedState===null?Yh$1:Zh$1,e=i(o,c),Th$1){d=0;do{if(Th$1=!1,Uh$1=0,25<=d)throw Error(p$1(301));d+=1,P$1=O$1=null,a.updateQueue=null,Ph$1.current=$h$1,e=i(o,c)}while(Th$1)}if(Ph$1.current=ai$1,a=O$1!==null&&O$1.next!==null,Rh$1=0,P$1=O$1=N$1=null,Sh$1=!1,a)throw Error(p$1(300));return e}function bi$1(){var e=Uh$1!==0;return Uh$1=0,e}function ci$1(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P$1===null?N$1.memoizedState=P$1=e:P$1=P$1.next=e,P$1}function di(){if(O$1===null){var e=N$1.alternate;e=e!==null?e.memoizedState:null}else e=O$1.next;var a=P$1===null?N$1.memoizedState:P$1.next;if(a!==null)P$1=a,O$1=e;else{if(e===null)throw Error(p$1(310));O$1=e,e={memoizedState:O$1.memoizedState,baseState:O$1.baseState,baseQueue:O$1.baseQueue,queue:O$1.queue,next:null},P$1===null?N$1.memoizedState=P$1=e:P$1=P$1.next=e}return P$1}function ei$1(e,a){return typeof a=="function"?a(e):a}function fi(e){var a=di(),i=a.queue;if(i===null)throw Error(p$1(311));i.lastRenderedReducer=e;var o=O$1,c=o.baseQueue,d=i.pending;if(d!==null){if(c!==null){var g=c.next;c.next=d.next,d.next=g}o.baseQueue=c=d,i.pending=null}if(c!==null){d=c.next,o=o.baseState;var b=g=null,j=null,$=d;do{var rt=$.lane;if((Rh$1&rt)===rt)j!==null&&(j=j.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),o=$.hasEagerState?$.eagerState:e(o,$.action);else{var _e={lane:rt,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};j===null?(b=j=_e,g=o):j=j.next=_e,N$1.lanes|=rt,hh$1|=rt}$=$.next}while($!==null&&$!==d);j===null?g=o:j.next=b,He(o,a.memoizedState)||(Ug$1=!0),a.memoizedState=o,a.baseState=g,a.baseQueue=j,i.lastRenderedState=o}if(e=i.interleaved,e!==null){c=e;do d=c.lane,N$1.lanes|=d,hh$1|=d,c=c.next;while(c!==e)}else c===null&&(i.lanes=0);return[a.memoizedState,i.dispatch]}function gi$1(e){var a=di(),i=a.queue;if(i===null)throw Error(p$1(311));i.lastRenderedReducer=e;var o=i.dispatch,c=i.pending,d=a.memoizedState;if(c!==null){i.pending=null;var g=c=c.next;do d=e(d,g.action),g=g.next;while(g!==c);He(d,a.memoizedState)||(Ug$1=!0),a.memoizedState=d,a.baseQueue===null&&(a.baseState=d),i.lastRenderedState=d}return[d,o]}function hi$1(){}function ii$1(e,a){var i=N$1,o=di(),c=a(),d=!He(o.memoizedState,c);if(d&&(o.memoizedState=c,Ug$1=!0),o=o.queue,ji$1(ki$1.bind(null,i,o,e),[e]),o.getSnapshot!==a||d||P$1!==null&&P$1.memoizedState.tag&1){if(i.flags|=2048,li$1(9,mi$1.bind(null,i,o,c,a),void 0,null),R$1===null)throw Error(p$1(349));Rh$1&30||ni$1(i,a,c)}return c}function ni$1(e,a,i){e.flags|=16384,e={getSnapshot:a,value:i},a=N$1.updateQueue,a===null?(a={lastEffect:null,stores:null},N$1.updateQueue=a,a.stores=[e]):(i=a.stores,i===null?a.stores=[e]:i.push(e))}function mi$1(e,a,i,o){a.value=i,a.getSnapshot=o,oi$1(a)&&pi$1(e)}function ki$1(e,a,i){return i(function(){oi$1(a)&&pi$1(e)})}function oi$1(e){var a=e.getSnapshot;e=e.value;try{var i=a();return!He(e,i)}catch{return!0}}function pi$1(e){var a=Zg$1(e,1);a!==null&&mh$1(a,e,1,-1)}function qi$1(e){var a=ci$1();return typeof e=="function"&&(e=e()),a.memoizedState=a.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei$1,lastRenderedState:e},a.queue=e,e=e.dispatch=ri$1.bind(null,N$1,e),[a.memoizedState,e]}function li$1(e,a,i,o){return e={tag:e,create:a,destroy:i,deps:o,next:null},a=N$1.updateQueue,a===null?(a={lastEffect:null,stores:null},N$1.updateQueue=a,a.lastEffect=e.next=e):(i=a.lastEffect,i===null?a.lastEffect=e.next=e:(o=i.next,i.next=e,e.next=o,a.lastEffect=e)),e}function si$1(){return di().memoizedState}function ti$1(e,a,i,o){var c=ci$1();N$1.flags|=e,c.memoizedState=li$1(1|a,i,void 0,o===void 0?null:o)}function ui$1(e,a,i,o){var c=di();o=o===void 0?null:o;var d=void 0;if(O$1!==null){var g=O$1.memoizedState;if(d=g.destroy,o!==null&&Wh$1(o,g.deps)){c.memoizedState=li$1(a,i,d,o);return}}N$1.flags|=e,c.memoizedState=li$1(1|a,i,d,o)}function vi$1(e,a){return ti$1(8390656,8,e,a)}function ji$1(e,a){return ui$1(2048,8,e,a)}function wi$1(e,a){return ui$1(4,2,e,a)}function xi$1(e,a){return ui$1(4,4,e,a)}function yi$1(e,a){if(typeof a=="function")return e=e(),a(e),function(){a(null)};if(a!=null)return e=e(),a.current=e,function(){a.current=null}}function zi$1(e,a,i){return i=i!=null?i.concat([e]):null,ui$1(4,4,yi$1.bind(null,a,e),i)}function Ai$1(){}function Bi$1(e,a){var i=di();a=a===void 0?null:a;var o=i.memoizedState;return o!==null&&a!==null&&Wh$1(a,o[1])?o[0]:(i.memoizedState=[e,a],e)}function Ci$1(e,a){var i=di();a=a===void 0?null:a;var o=i.memoizedState;return o!==null&&a!==null&&Wh$1(a,o[1])?o[0]:(e=e(),i.memoizedState=[e,a],e)}function Di$1(e,a,i){return Rh$1&21?(He(i,a)||(i=yc$1(),N$1.lanes|=i,hh$1|=i,e.baseState=!0),a):(e.baseState&&(e.baseState=!1,Ug$1=!0),e.memoizedState=i)}function Ei(e,a){var i=C$1;C$1=i!==0&&4>i?i:4,e(!0);var o=Qh$1.transition;Qh$1.transition={};try{e(!1),a()}finally{C$1=i,Qh$1.transition=o}}function Fi$1(){return di().memoizedState}function Gi$1(e,a,i){var o=lh$1(e);if(i={lane:o,action:i,hasEagerState:!1,eagerState:null,next:null},Hi$1(e))Ii$1(a,i);else if(i=Yg$1(e,a,i,o),i!==null){var c=L$1();mh$1(i,e,o,c),Ji$1(i,a,o)}}function ri$1(e,a,i){var o=lh$1(e),c={lane:o,action:i,hasEagerState:!1,eagerState:null,next:null};if(Hi$1(e))Ii$1(a,c);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=a.lastRenderedReducer,d!==null))try{var g=a.lastRenderedState,b=d(g,i);if(c.hasEagerState=!0,c.eagerState=b,He(b,g)){var j=a.interleaved;j===null?(c.next=c,Xg$1(a)):(c.next=j.next,j.next=c),a.interleaved=c;return}}catch{}finally{}i=Yg$1(e,a,c,o),i!==null&&(c=L$1(),mh$1(i,e,o,c),Ji$1(i,a,o))}}function Hi$1(e){var a=e.alternate;return e===N$1||a!==null&&a===N$1}function Ii$1(e,a){Th$1=Sh$1=!0;var i=e.pending;i===null?a.next=a:(a.next=i.next,i.next=a),e.pending=a}function Ji$1(e,a,i){if(i&4194240){var o=a.lanes;o&=e.pendingLanes,i|=o,a.lanes=i,Cc$1(e,i)}}var ai$1={readContext:Vg$1,useCallback:Q$1,useContext:Q$1,useEffect:Q$1,useImperativeHandle:Q$1,useInsertionEffect:Q$1,useLayoutEffect:Q$1,useMemo:Q$1,useReducer:Q$1,useRef:Q$1,useState:Q$1,useDebugValue:Q$1,useDeferredValue:Q$1,useTransition:Q$1,useMutableSource:Q$1,useSyncExternalStore:Q$1,useId:Q$1,unstable_isNewReconciler:!1},Yh$1={readContext:Vg$1,useCallback:function(e,a){return ci$1().memoizedState=[e,a===void 0?null:a],e},useContext:Vg$1,useEffect:vi$1,useImperativeHandle:function(e,a,i){return i=i!=null?i.concat([e]):null,ti$1(4194308,4,yi$1.bind(null,a,e),i)},useLayoutEffect:function(e,a){return ti$1(4194308,4,e,a)},useInsertionEffect:function(e,a){return ti$1(4,2,e,a)},useMemo:function(e,a){var i=ci$1();return a=a===void 0?null:a,e=e(),i.memoizedState=[e,a],e},useReducer:function(e,a,i){var o=ci$1();return a=i!==void 0?i(a):a,o.memoizedState=o.baseState=a,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:a},o.queue=e,e=e.dispatch=Gi$1.bind(null,N$1,e),[o.memoizedState,e]},useRef:function(e){var a=ci$1();return e={current:e},a.memoizedState=e},useState:qi$1,useDebugValue:Ai$1,useDeferredValue:function(e){return ci$1().memoizedState=e},useTransition:function(){var e=qi$1(!1),a=e[0];return e=Ei.bind(null,e[1]),ci$1().memoizedState=e,[a,e]},useMutableSource:function(){},useSyncExternalStore:function(e,a,i){var o=N$1,c=ci$1();if(I$1){if(i===void 0)throw Error(p$1(407));i=i()}else{if(i=a(),R$1===null)throw Error(p$1(349));Rh$1&30||ni$1(o,a,i)}c.memoizedState=i;var d={value:i,getSnapshot:a};return c.queue=d,vi$1(ki$1.bind(null,o,d,e),[e]),o.flags|=2048,li$1(9,mi$1.bind(null,o,d,i,a),void 0,null),i},useId:function(){var e=ci$1(),a=R$1.identifierPrefix;if(I$1){var i=sg$1,o=rg$1;i=(o&~(1<<32-oc$1(o)-1)).toString(32)+i,a=":"+a+"R"+i,i=Uh$1++,0<i&&(a+="H"+i.toString(32)),a+=":"}else i=Vh$1++,a=":"+a+"r"+i.toString(32)+":";return e.memoizedState=a},unstable_isNewReconciler:!1},Zh$1={readContext:Vg$1,useCallback:Bi$1,useContext:Vg$1,useEffect:ji$1,useImperativeHandle:zi$1,useInsertionEffect:wi$1,useLayoutEffect:xi$1,useMemo:Ci$1,useReducer:fi,useRef:si$1,useState:function(){return fi(ei$1)},useDebugValue:Ai$1,useDeferredValue:function(e){var a=di();return Di$1(a,O$1.memoizedState,e)},useTransition:function(){var e=fi(ei$1)[0],a=di().memoizedState;return[e,a]},useMutableSource:hi$1,useSyncExternalStore:ii$1,useId:Fi$1,unstable_isNewReconciler:!1},$h$1={readContext:Vg$1,useCallback:Bi$1,useContext:Vg$1,useEffect:ji$1,useImperativeHandle:zi$1,useInsertionEffect:wi$1,useLayoutEffect:xi$1,useMemo:Ci$1,useReducer:gi$1,useRef:si$1,useState:function(){return gi$1(ei$1)},useDebugValue:Ai$1,useDeferredValue:function(e){var a=di();return O$1===null?a.memoizedState=e:Di$1(a,O$1.memoizedState,e)},useTransition:function(){var e=gi$1(ei$1)[0],a=di().memoizedState;return[e,a]},useMutableSource:hi$1,useSyncExternalStore:ii$1,useId:Fi$1,unstable_isNewReconciler:!1};function Ki$1(e,a){try{var i="",o=a;do i+=Pa$1(o),o=o.return;while(o);var c=i}catch(d){c=`
Error generating stack: `+d.message+`
`+d.stack}return{value:e,source:a,stack:c,digest:null}}function Li$1(e,a,i){return{value:e,source:null,stack:i??null,digest:a??null}}function Mi$1(e,a){try{console.error(a.value)}catch(i){setTimeout(function(){throw i})}}var Ni$1=typeof WeakMap=="function"?WeakMap:Map;function Oi$1(e,a,i){i=ch$1(-1,i),i.tag=3,i.payload={element:null};var o=a.value;return i.callback=function(){Pi$1||(Pi$1=!0,Qi$1=o),Mi$1(e,a)},i}function Ri$1(e,a,i){i=ch$1(-1,i),i.tag=3;var o=e.type.getDerivedStateFromError;if(typeof o=="function"){var c=a.value;i.payload=function(){return o(c)},i.callback=function(){Mi$1(e,a)}}var d=e.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(i.callback=function(){Mi$1(e,a),typeof o!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var g=a.stack;this.componentDidCatch(a.value,{componentStack:g!==null?g:""})}),i}function Ti$1(e,a,i){var o=e.pingCache;if(o===null){o=e.pingCache=new Ni$1;var c=new Set;o.set(a,c)}else c=o.get(a),c===void 0&&(c=new Set,o.set(a,c));c.has(i)||(c.add(i),e=Ui$1.bind(null,e,a,i),a.then(e,e))}function Vi$1(e){do{var a;if((a=e.tag===13)&&(a=e.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return e;e=e.return}while(e!==null);return null}function Wi$1(e,a,i,o,c){return e.mode&1?(e.flags|=65536,e.lanes=c,e):(e===a?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(a=ch$1(-1,1),a.tag=2,dh$1(i,a,1))),i.lanes|=1),e)}var Xi$1=ua$1.ReactCurrentOwner,Ug$1=!1;function Yi$1(e,a,i,o){a.child=e===null?Ch$1(a,null,i,o):Bh$1(a,e.child,i,o)}function Zi$1(e,a,i,o,c){i=i.render;var d=a.ref;return Tg$1(a,c),o=Xh$1(e,a,i,o,d,c),i=bi$1(),e!==null&&!Ug$1?(a.updateQueue=e.updateQueue,a.flags&=-2053,e.lanes&=~c,$i$1(e,a,c)):(I$1&&i&&vg$1(a),a.flags|=1,Yi$1(e,a,o,c),a.child)}function aj$1(e,a,i,o,c){if(e===null){var d=i.type;return typeof d=="function"&&!bj$1(d)&&d.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(a.tag=15,a.type=d,cj$1(e,a,d,o,c)):(e=yh$1(i.type,null,o,a,a.mode,c),e.ref=a.ref,e.return=a,a.child=e)}if(d=e.child,!(e.lanes&c)){var g=d.memoizedProps;if(i=i.compare,i=i!==null?i:Ie,i(g,o)&&e.ref===a.ref)return $i$1(e,a,c)}return a.flags|=1,e=wh$1(d,o),e.ref=a.ref,e.return=a,a.child=e}function cj$1(e,a,i,o,c){if(e!==null){var d=e.memoizedProps;if(Ie(d,o)&&e.ref===a.ref)if(Ug$1=!1,a.pendingProps=o=d,(e.lanes&c)!==0)e.flags&131072&&(Ug$1=!0);else return a.lanes=e.lanes,$i$1(e,a,c)}return dj$1(e,a,i,o,c)}function ej$1(e,a,i){var o=a.pendingProps,c=o.children,d=e!==null?e.memoizedState:null;if(o.mode==="hidden")if(!(a.mode&1))a.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$1(fj$1,gj$1),gj$1|=i;else{if(!(i&1073741824))return e=d!==null?d.baseLanes|i:i,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:e,cachePool:null,transitions:null},a.updateQueue=null,G$1(fj$1,gj$1),gj$1|=e,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=d!==null?d.baseLanes:i,G$1(fj$1,gj$1),gj$1|=o}else d!==null?(o=d.baseLanes|i,a.memoizedState=null):o=i,G$1(fj$1,gj$1),gj$1|=o;return Yi$1(e,a,c,i),a.child}function hj$1(e,a){var i=a.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(a.flags|=512,a.flags|=2097152)}function dj$1(e,a,i,o,c){var d=Zf$1(i)?Xf$1:H$1.current;return d=Yf$1(a,d),Tg$1(a,c),i=Xh$1(e,a,i,o,d,c),o=bi$1(),e!==null&&!Ug$1?(a.updateQueue=e.updateQueue,a.flags&=-2053,e.lanes&=~c,$i$1(e,a,c)):(I$1&&o&&vg$1(a),a.flags|=1,Yi$1(e,a,i,c),a.child)}function ij$1(e,a,i,o,c){if(Zf$1(i)){var d=!0;cg$1(a)}else d=!1;if(Tg$1(a,c),a.stateNode===null)jj$1(e,a),ph$1(a,i,o),rh$1(a,i,o,c),o=!0;else if(e===null){var g=a.stateNode,b=a.memoizedProps;g.props=b;var j=g.context,$=i.contextType;typeof $=="object"&&$!==null?$=Vg$1($):($=Zf$1(i)?Xf$1:H$1.current,$=Yf$1(a,$));var rt=i.getDerivedStateFromProps,_e=typeof rt=="function"||typeof g.getSnapshotBeforeUpdate=="function";_e||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(b!==o||j!==$)&&qh$1(a,g,o,$),$g$1=!1;var st=a.memoizedState;g.state=st,gh$1(a,o,g,c),j=a.memoizedState,b!==o||st!==j||Wf$1.current||$g$1?(typeof rt=="function"&&(kh$1(a,i,rt,o),j=a.memoizedState),(b=$g$1||oh$1(a,i,b,o,st,j,$))?(_e||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(a.flags|=4194308)):(typeof g.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=o,a.memoizedState=j),g.props=o,g.state=j,g.context=$,o=b):(typeof g.componentDidMount=="function"&&(a.flags|=4194308),o=!1)}else{g=a.stateNode,bh$1(e,a),b=a.memoizedProps,$=a.type===a.elementType?b:Lg$1(a.type,b),g.props=$,_e=a.pendingProps,st=g.context,j=i.contextType,typeof j=="object"&&j!==null?j=Vg$1(j):(j=Zf$1(i)?Xf$1:H$1.current,j=Yf$1(a,j));var ut=i.getDerivedStateFromProps;(rt=typeof ut=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(b!==_e||st!==j)&&qh$1(a,g,o,j),$g$1=!1,st=a.memoizedState,g.state=st,gh$1(a,o,g,c);var gt=a.memoizedState;b!==_e||st!==gt||Wf$1.current||$g$1?(typeof ut=="function"&&(kh$1(a,i,ut,o),gt=a.memoizedState),($=$g$1||oh$1(a,i,$,o,st,gt,j)||!1)?(rt||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(o,gt,j),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(o,gt,j)),typeof g.componentDidUpdate=="function"&&(a.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof g.componentDidUpdate!="function"||b===e.memoizedProps&&st===e.memoizedState||(a.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&st===e.memoizedState||(a.flags|=1024),a.memoizedProps=o,a.memoizedState=gt),g.props=o,g.state=gt,g.context=j,o=$):(typeof g.componentDidUpdate!="function"||b===e.memoizedProps&&st===e.memoizedState||(a.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&st===e.memoizedState||(a.flags|=1024),o=!1)}return kj$1(e,a,i,o,d,c)}function kj$1(e,a,i,o,c,d){hj$1(e,a);var g=(a.flags&128)!==0;if(!o&&!g)return c&&dg$1(a,i,!1),$i$1(e,a,d);o=a.stateNode,Xi$1.current=a;var b=g&&typeof i.getDerivedStateFromError!="function"?null:o.render();return a.flags|=1,e!==null&&g?(a.child=Bh$1(a,e.child,null,d),a.child=Bh$1(a,null,b,d)):Yi$1(e,a,b,d),a.memoizedState=o.state,c&&dg$1(a,i,!0),a.child}function lj$1(e){var a=e.stateNode;a.pendingContext?ag$1(e,a.pendingContext,a.pendingContext!==a.context):a.context&&ag$1(e,a.context,!1),Ih$1(e,a.containerInfo)}function mj$1(e,a,i,o,c){return Ig$1(),Jg$1(c),a.flags|=256,Yi$1(e,a,i,o),a.child}var nj$1={dehydrated:null,treeContext:null,retryLane:0};function oj$1(e){return{baseLanes:e,cachePool:null,transitions:null}}function pj$1(e,a,i){var o=a.pendingProps,c=M$1.current,d=!1,g=(a.flags&128)!==0,b;if((b=g)||(b=e!==null&&e.memoizedState===null?!1:(c&2)!==0),b?(d=!0,a.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),G$1(M$1,c&1),e===null)return Eg$1(a),e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(a.mode&1?e.data==="$!"?a.lanes=8:a.lanes=1073741824:a.lanes=1,null):(g=o.children,e=o.fallback,d?(o=a.mode,d=a.child,g={mode:"hidden",children:g},!(o&1)&&d!==null?(d.childLanes=0,d.pendingProps=g):d=qj$1(g,o,0,null),e=Ah$1(e,o,i,null),d.return=a,e.return=a,d.sibling=e,a.child=d,a.child.memoizedState=oj$1(i),a.memoizedState=nj$1,e):rj$1(a,g));if(c=e.memoizedState,c!==null&&(b=c.dehydrated,b!==null))return sj$1(e,a,g,o,b,c,i);if(d){d=o.fallback,g=a.mode,c=e.child,b=c.sibling;var j={mode:"hidden",children:o.children};return!(g&1)&&a.child!==c?(o=a.child,o.childLanes=0,o.pendingProps=j,a.deletions=null):(o=wh$1(c,j),o.subtreeFlags=c.subtreeFlags&14680064),b!==null?d=wh$1(b,d):(d=Ah$1(d,g,i,null),d.flags|=2),d.return=a,o.return=a,o.sibling=d,a.child=o,o=d,d=a.child,g=e.child.memoizedState,g=g===null?oj$1(i):{baseLanes:g.baseLanes|i,cachePool:null,transitions:g.transitions},d.memoizedState=g,d.childLanes=e.childLanes&~i,a.memoizedState=nj$1,o}return d=e.child,e=d.sibling,o=wh$1(d,{mode:"visible",children:o.children}),!(a.mode&1)&&(o.lanes=i),o.return=a,o.sibling=null,e!==null&&(i=a.deletions,i===null?(a.deletions=[e],a.flags|=16):i.push(e)),a.child=o,a.memoizedState=null,o}function rj$1(e,a){return a=qj$1({mode:"visible",children:a},e.mode,0,null),a.return=e,e.child=a}function tj$1(e,a,i,o){return o!==null&&Jg$1(o),Bh$1(a,e.child,null,i),e=rj$1(a,a.pendingProps.children),e.flags|=2,a.memoizedState=null,e}function sj$1(e,a,i,o,c,d,g){if(i)return a.flags&256?(a.flags&=-257,o=Li$1(Error(p$1(422))),tj$1(e,a,g,o)):a.memoizedState!==null?(a.child=e.child,a.flags|=128,null):(d=o.fallback,c=a.mode,o=qj$1({mode:"visible",children:o.children},c,0,null),d=Ah$1(d,c,g,null),d.flags|=2,o.return=a,d.return=a,o.sibling=d,a.child=o,a.mode&1&&Bh$1(a,e.child,null,g),a.child.memoizedState=oj$1(g),a.memoizedState=nj$1,d);if(!(a.mode&1))return tj$1(e,a,g,null);if(c.data==="$!"){if(o=c.nextSibling&&c.nextSibling.dataset,o)var b=o.dgst;return o=b,d=Error(p$1(419)),o=Li$1(d,o,void 0),tj$1(e,a,g,o)}if(b=(g&e.childLanes)!==0,Ug$1||b){if(o=R$1,o!==null){switch(g&-g){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(o.suspendedLanes|g)?0:c,c!==0&&c!==d.retryLane&&(d.retryLane=c,Zg$1(e,c),mh$1(o,e,c,-1))}return uj$1(),o=Li$1(Error(p$1(421))),tj$1(e,a,g,o)}return c.data==="$?"?(a.flags|=128,a.child=e.child,a=vj$1.bind(null,e),c._reactRetry=a,null):(e=d.treeContext,yg$1=Lf$1(c.nextSibling),xg$1=a,I$1=!0,zg$1=null,e!==null&&(og$1[pg$1++]=rg$1,og$1[pg$1++]=sg$1,og$1[pg$1++]=qg$1,rg$1=e.id,sg$1=e.overflow,qg$1=a),a=rj$1(a,o.children),a.flags|=4096,a)}function wj$1(e,a,i){e.lanes|=a;var o=e.alternate;o!==null&&(o.lanes|=a),Sg$1(e.return,a,i)}function xj$1(e,a,i,o,c){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:o,tail:i,tailMode:c}:(d.isBackwards=a,d.rendering=null,d.renderingStartTime=0,d.last=o,d.tail=i,d.tailMode=c)}function yj$1(e,a,i){var o=a.pendingProps,c=o.revealOrder,d=o.tail;if(Yi$1(e,a,o.children,i),o=M$1.current,o&2)o=o&1|2,a.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=a.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&wj$1(e,i,a);else if(e.tag===19)wj$1(e,i,a);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===a)break e;for(;e.sibling===null;){if(e.return===null||e.return===a)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(G$1(M$1,o),!(a.mode&1))a.memoizedState=null;else switch(c){case"forwards":for(i=a.child,c=null;i!==null;)e=i.alternate,e!==null&&Mh$1(e)===null&&(c=i),i=i.sibling;i=c,i===null?(c=a.child,a.child=null):(c=i.sibling,i.sibling=null),xj$1(a,!1,c,i,d);break;case"backwards":for(i=null,c=a.child,a.child=null;c!==null;){if(e=c.alternate,e!==null&&Mh$1(e)===null){a.child=c;break}e=c.sibling,c.sibling=i,i=c,c=e}xj$1(a,!0,i,null,d);break;case"together":xj$1(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function jj$1(e,a){!(a.mode&1)&&e!==null&&(e.alternate=null,a.alternate=null,a.flags|=2)}function $i$1(e,a,i){if(e!==null&&(a.dependencies=e.dependencies),hh$1|=a.lanes,!(i&a.childLanes))return null;if(e!==null&&a.child!==e.child)throw Error(p$1(153));if(a.child!==null){for(e=a.child,i=wh$1(e,e.pendingProps),a.child=i,i.return=a;e.sibling!==null;)e=e.sibling,i=i.sibling=wh$1(e,e.pendingProps),i.return=a;i.sibling=null}return a.child}function zj$1(e,a,i){switch(a.tag){case 3:lj$1(a),Ig$1();break;case 5:Kh$1(a);break;case 1:Zf$1(a.type)&&cg$1(a);break;case 4:Ih$1(a,a.stateNode.containerInfo);break;case 10:var o=a.type._context,c=a.memoizedProps.value;G$1(Mg$1,o._currentValue),o._currentValue=c;break;case 13:if(o=a.memoizedState,o!==null)return o.dehydrated!==null?(G$1(M$1,M$1.current&1),a.flags|=128,null):i&a.child.childLanes?pj$1(e,a,i):(G$1(M$1,M$1.current&1),e=$i$1(e,a,i),e!==null?e.sibling:null);G$1(M$1,M$1.current&1);break;case 19:if(o=(i&a.childLanes)!==0,e.flags&128){if(o)return yj$1(e,a,i);a.flags|=128}if(c=a.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),G$1(M$1,M$1.current),o)break;return null;case 22:case 23:return a.lanes=0,ej$1(e,a,i)}return $i$1(e,a,i)}var Aj$1,Bj$1,Cj$1,Dj$1;Aj$1=function(e,a){for(var i=a.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break;for(;i.sibling===null;){if(i.return===null||i.return===a)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};Bj$1=function(){};Cj$1=function(e,a,i,o){var c=e.memoizedProps;if(c!==o){e=a.stateNode,Hh$1(Eh$1.current);var d=null;switch(i){case"input":c=Ya$1(e,c),o=Ya$1(e,o),d=[];break;case"select":c=A$1({},c,{value:void 0}),o=A$1({},o,{value:void 0}),d=[];break;case"textarea":c=gb$1(e,c),o=gb$1(e,o),d=[];break;default:typeof c.onClick!="function"&&typeof o.onClick=="function"&&(e.onclick=Bf$1)}ub$1(i,o);var g;i=null;for($ in c)if(!o.hasOwnProperty($)&&c.hasOwnProperty($)&&c[$]!=null)if($==="style"){var b=c[$];for(g in b)b.hasOwnProperty(g)&&(i||(i={}),i[g]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(ea$1.hasOwnProperty($)?d||(d=[]):(d=d||[]).push($,null));for($ in o){var j=o[$];if(b=c!=null?c[$]:void 0,o.hasOwnProperty($)&&j!==b&&(j!=null||b!=null))if($==="style")if(b){for(g in b)!b.hasOwnProperty(g)||j&&j.hasOwnProperty(g)||(i||(i={}),i[g]="");for(g in j)j.hasOwnProperty(g)&&b[g]!==j[g]&&(i||(i={}),i[g]=j[g])}else i||(d||(d=[]),d.push($,i)),i=j;else $==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,b=b?b.__html:void 0,j!=null&&b!==j&&(d=d||[]).push($,j)):$==="children"?typeof j!="string"&&typeof j!="number"||(d=d||[]).push($,""+j):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(ea$1.hasOwnProperty($)?(j!=null&&$==="onScroll"&&D$1("scroll",e),d||b===j||(d=[])):(d=d||[]).push($,j))}i&&(d=d||[]).push("style",i);var $=d;(a.updateQueue=$)&&(a.flags|=4)}};Dj$1=function(e,a,i,o){i!==o&&(a.flags|=4)};function Ej$1(e,a){if(!I$1)switch(e.tailMode){case"hidden":a=e.tail;for(var i=null;a!==null;)a.alternate!==null&&(i=a),a=a.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?a||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function S$1(e){var a=e.alternate!==null&&e.alternate.child===e.child,i=0,o=0;if(a)for(var c=e.child;c!==null;)i|=c.lanes|c.childLanes,o|=c.subtreeFlags&14680064,o|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)i|=c.lanes|c.childLanes,o|=c.subtreeFlags,o|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=o,e.childLanes=i,a}function Fj$1(e,a,i){var o=a.pendingProps;switch(wg$1(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$1(a),null;case 1:return Zf$1(a.type)&&$f$1(),S$1(a),null;case 3:return o=a.stateNode,Jh$1(),E$1(Wf$1),E$1(H$1),Oh$1(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(Gg$1(a)?a.flags|=4:e===null||e.memoizedState.isDehydrated&&!(a.flags&256)||(a.flags|=1024,zg$1!==null&&(Gj$1(zg$1),zg$1=null))),Bj$1(e,a),S$1(a),null;case 5:Lh$1(a);var c=Hh$1(Gh$1.current);if(i=a.type,e!==null&&a.stateNode!=null)Cj$1(e,a,i,o,c),e.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!o){if(a.stateNode===null)throw Error(p$1(166));return S$1(a),null}if(e=Hh$1(Eh$1.current),Gg$1(a)){o=a.stateNode,i=a.type;var d=a.memoizedProps;switch(o[Of$1]=a,o[Pf$1]=d,e=(a.mode&1)!==0,i){case"dialog":D$1("cancel",o),D$1("close",o);break;case"iframe":case"object":case"embed":D$1("load",o);break;case"video":case"audio":for(c=0;c<lf$1.length;c++)D$1(lf$1[c],o);break;case"source":D$1("error",o);break;case"img":case"image":case"link":D$1("error",o),D$1("load",o);break;case"details":D$1("toggle",o);break;case"input":Za$1(o,d),D$1("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!d.multiple},D$1("invalid",o);break;case"textarea":hb$1(o,d),D$1("invalid",o)}ub$1(i,d),c=null;for(var g in d)if(d.hasOwnProperty(g)){var b=d[g];g==="children"?typeof b=="string"?o.textContent!==b&&(d.suppressHydrationWarning!==!0&&Af$1(o.textContent,b,e),c=["children",b]):typeof b=="number"&&o.textContent!==""+b&&(d.suppressHydrationWarning!==!0&&Af$1(o.textContent,b,e),c=["children",""+b]):ea$1.hasOwnProperty(g)&&b!=null&&g==="onScroll"&&D$1("scroll",o)}switch(i){case"input":Va$1(o),db$1(o,d,!0);break;case"textarea":Va$1(o),jb$1(o);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(o.onclick=Bf$1)}o=c,a.updateQueue=o,o!==null&&(a.flags|=4)}else{g=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=kb$1(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=g.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof o.is=="string"?e=g.createElement(i,{is:o.is}):(e=g.createElement(i),i==="select"&&(g=e,o.multiple?g.multiple=!0:o.size&&(g.size=o.size))):e=g.createElementNS(e,i),e[Of$1]=a,e[Pf$1]=o,Aj$1(e,a,!1,!1),a.stateNode=e;e:{switch(g=vb$1(i,o),i){case"dialog":D$1("cancel",e),D$1("close",e),c=o;break;case"iframe":case"object":case"embed":D$1("load",e),c=o;break;case"video":case"audio":for(c=0;c<lf$1.length;c++)D$1(lf$1[c],e);c=o;break;case"source":D$1("error",e),c=o;break;case"img":case"image":case"link":D$1("error",e),D$1("load",e),c=o;break;case"details":D$1("toggle",e),c=o;break;case"input":Za$1(e,o),c=Ya$1(e,o),D$1("invalid",e);break;case"option":c=o;break;case"select":e._wrapperState={wasMultiple:!!o.multiple},c=A$1({},o,{value:void 0}),D$1("invalid",e);break;case"textarea":hb$1(e,o),c=gb$1(e,o),D$1("invalid",e);break;default:c=o}ub$1(i,c),b=c;for(d in b)if(b.hasOwnProperty(d)){var j=b[d];d==="style"?sb(e,j):d==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,j!=null&&nb(e,j)):d==="children"?typeof j=="string"?(i!=="textarea"||j!=="")&&ob$1(e,j):typeof j=="number"&&ob$1(e,""+j):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ea$1.hasOwnProperty(d)?j!=null&&d==="onScroll"&&D$1("scroll",e):j!=null&&ta$1(e,d,j,g))}switch(i){case"input":Va$1(e),db$1(e,o,!1);break;case"textarea":Va$1(e),jb$1(e);break;case"option":o.value!=null&&e.setAttribute("value",""+Sa$1(o.value));break;case"select":e.multiple=!!o.multiple,d=o.value,d!=null?fb(e,!!o.multiple,d,!1):o.defaultValue!=null&&fb(e,!!o.multiple,o.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=Bf$1)}switch(i){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return S$1(a),null;case 6:if(e&&a.stateNode!=null)Dj$1(e,a,e.memoizedProps,o);else{if(typeof o!="string"&&a.stateNode===null)throw Error(p$1(166));if(i=Hh$1(Gh$1.current),Hh$1(Eh$1.current),Gg$1(a)){if(o=a.stateNode,i=a.memoizedProps,o[Of$1]=a,(d=o.nodeValue!==i)&&(e=xg$1,e!==null))switch(e.tag){case 3:Af$1(o.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Af$1(o.nodeValue,i,(e.mode&1)!==0)}d&&(a.flags|=4)}else o=(i.nodeType===9?i:i.ownerDocument).createTextNode(o),o[Of$1]=a,a.stateNode=o}return S$1(a),null;case 13:if(E$1(M$1),o=a.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(I$1&&yg$1!==null&&a.mode&1&&!(a.flags&128))Hg$1(),Ig$1(),a.flags|=98560,d=!1;else if(d=Gg$1(a),o!==null&&o.dehydrated!==null){if(e===null){if(!d)throw Error(p$1(318));if(d=a.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(p$1(317));d[Of$1]=a}else Ig$1(),!(a.flags&128)&&(a.memoizedState=null),a.flags|=4;S$1(a),d=!1}else zg$1!==null&&(Gj$1(zg$1),zg$1=null),d=!0;if(!d)return a.flags&65536?a:null}return a.flags&128?(a.lanes=i,a):(o=o!==null,o!==(e!==null&&e.memoizedState!==null)&&o&&(a.child.flags|=8192,a.mode&1&&(e===null||M$1.current&1?T$1===0&&(T$1=3):uj$1())),a.updateQueue!==null&&(a.flags|=4),S$1(a),null);case 4:return Jh$1(),Bj$1(e,a),e===null&&sf$1(a.stateNode.containerInfo),S$1(a),null;case 10:return Rg$1(a.type._context),S$1(a),null;case 17:return Zf$1(a.type)&&$f$1(),S$1(a),null;case 19:if(E$1(M$1),d=a.memoizedState,d===null)return S$1(a),null;if(o=(a.flags&128)!==0,g=d.rendering,g===null)if(o)Ej$1(d,!1);else{if(T$1!==0||e!==null&&e.flags&128)for(e=a.child;e!==null;){if(g=Mh$1(e),g!==null){for(a.flags|=128,Ej$1(d,!1),o=g.updateQueue,o!==null&&(a.updateQueue=o,a.flags|=4),a.subtreeFlags=0,o=i,i=a.child;i!==null;)d=i,e=o,d.flags&=14680066,g=d.alternate,g===null?(d.childLanes=0,d.lanes=e,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=g.childLanes,d.lanes=g.lanes,d.child=g.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=g.memoizedProps,d.memoizedState=g.memoizedState,d.updateQueue=g.updateQueue,d.type=g.type,e=g.dependencies,d.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return G$1(M$1,M$1.current&1|2),a.child}e=e.sibling}d.tail!==null&&B$1()>Hj$1&&(a.flags|=128,o=!0,Ej$1(d,!1),a.lanes=4194304)}else{if(!o)if(e=Mh$1(g),e!==null){if(a.flags|=128,o=!0,i=e.updateQueue,i!==null&&(a.updateQueue=i,a.flags|=4),Ej$1(d,!0),d.tail===null&&d.tailMode==="hidden"&&!g.alternate&&!I$1)return S$1(a),null}else 2*B$1()-d.renderingStartTime>Hj$1&&i!==1073741824&&(a.flags|=128,o=!0,Ej$1(d,!1),a.lanes=4194304);d.isBackwards?(g.sibling=a.child,a.child=g):(i=d.last,i!==null?i.sibling=g:a.child=g,d.last=g)}return d.tail!==null?(a=d.tail,d.rendering=a,d.tail=a.sibling,d.renderingStartTime=B$1(),a.sibling=null,i=M$1.current,G$1(M$1,o?i&1|2:i&1),a):(S$1(a),null);case 22:case 23:return Ij$1(),o=a.memoizedState!==null,e!==null&&e.memoizedState!==null!==o&&(a.flags|=8192),o&&a.mode&1?gj$1&1073741824&&(S$1(a),a.subtreeFlags&6&&(a.flags|=8192)):S$1(a),null;case 24:return null;case 25:return null}throw Error(p$1(156,a.tag))}function Jj$1(e,a){switch(wg$1(a),a.tag){case 1:return Zf$1(a.type)&&$f$1(),e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 3:return Jh$1(),E$1(Wf$1),E$1(H$1),Oh$1(),e=a.flags,e&65536&&!(e&128)?(a.flags=e&-65537|128,a):null;case 5:return Lh$1(a),null;case 13:if(E$1(M$1),e=a.memoizedState,e!==null&&e.dehydrated!==null){if(a.alternate===null)throw Error(p$1(340));Ig$1()}return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 19:return E$1(M$1),null;case 4:return Jh$1(),null;case 10:return Rg$1(a.type._context),null;case 22:case 23:return Ij$1(),null;case 24:return null;default:return null}}var Kj$1=!1,U$1=!1,Lj$1=typeof WeakSet=="function"?WeakSet:Set,V$1=null;function Mj$1(e,a){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(o){W$1(e,a,o)}else i.current=null}function Nj$1(e,a,i){try{i()}catch(o){W$1(e,a,o)}}var Oj$1=!1;function Pj$1(e,a){if(Cf$1=dd$1,e=Me$1(),Ne(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var o=i.getSelection&&i.getSelection();if(o&&o.rangeCount!==0){i=o.anchorNode;var c=o.anchorOffset,d=o.focusNode;o=o.focusOffset;try{i.nodeType,d.nodeType}catch{i=null;break e}var g=0,b=-1,j=-1,$=0,rt=0,_e=e,st=null;t:for(;;){for(var ut;_e!==i||c!==0&&_e.nodeType!==3||(b=g+c),_e!==d||o!==0&&_e.nodeType!==3||(j=g+o),_e.nodeType===3&&(g+=_e.nodeValue.length),(ut=_e.firstChild)!==null;)st=_e,_e=ut;for(;;){if(_e===e)break t;if(st===i&&++$===c&&(b=g),st===d&&++rt===o&&(j=g),(ut=_e.nextSibling)!==null)break;_e=st,st=_e.parentNode}_e=ut}i=b===-1||j===-1?null:{start:b,end:j}}else i=null}i=i||{start:0,end:0}}else i=null;for(Df$1={focusedElem:e,selectionRange:i},dd$1=!1,V$1=a;V$1!==null;)if(a=V$1,e=a.child,(a.subtreeFlags&1028)!==0&&e!==null)e.return=a,V$1=e;else for(;V$1!==null;){a=V$1;try{var gt=a.alternate;if(a.flags&1024)switch(a.tag){case 0:case 11:case 15:break;case 1:if(gt!==null){var yt=gt.memoizedProps,Pt=gt.memoizedState,wt=a.stateNode,Ct=wt.getSnapshotBeforeUpdate(a.elementType===a.type?yt:Lg$1(a.type,yt),Pt);wt.__reactInternalSnapshotBeforeUpdate=Ct}break;case 3:var At=a.stateNode.containerInfo;At.nodeType===1?At.textContent="":At.nodeType===9&&At.documentElement&&At.removeChild(At.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$1(163))}}catch(Tt){W$1(a,a.return,Tt)}if(e=a.sibling,e!==null){e.return=a.return,V$1=e;break}V$1=a.return}return gt=Oj$1,Oj$1=!1,gt}function Qj$1(e,a,i){var o=a.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var c=o=o.next;do{if((c.tag&e)===e){var d=c.destroy;c.destroy=void 0,d!==void 0&&Nj$1(a,i,d)}c=c.next}while(c!==o)}}function Rj$1(e,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var i=a=a.next;do{if((i.tag&e)===e){var o=i.create;i.destroy=o()}i=i.next}while(i!==a)}}function Sj$1(e){var a=e.ref;if(a!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof a=="function"?a(e):a.current=e}}function Tj$1(e){var a=e.alternate;a!==null&&(e.alternate=null,Tj$1(a)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(a=e.stateNode,a!==null&&(delete a[Of$1],delete a[Pf$1],delete a[of$1],delete a[Qf$1],delete a[Rf$1])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Uj$1(e){return e.tag===5||e.tag===3||e.tag===4}function Vj$1(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Uj$1(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Wj$1(e,a,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,a?i.nodeType===8?i.parentNode.insertBefore(e,a):i.insertBefore(e,a):(i.nodeType===8?(a=i.parentNode,a.insertBefore(e,i)):(a=i,a.appendChild(e)),i=i._reactRootContainer,i!=null||a.onclick!==null||(a.onclick=Bf$1));else if(o!==4&&(e=e.child,e!==null))for(Wj$1(e,a,i),e=e.sibling;e!==null;)Wj$1(e,a,i),e=e.sibling}function Xj$1(e,a,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,a?i.insertBefore(e,a):i.appendChild(e);else if(o!==4&&(e=e.child,e!==null))for(Xj$1(e,a,i),e=e.sibling;e!==null;)Xj$1(e,a,i),e=e.sibling}var X$2=null,Yj$1=!1;function Zj$1(e,a,i){for(i=i.child;i!==null;)ak$1(e,a,i),i=i.sibling}function ak$1(e,a,i){if(lc$1&&typeof lc$1.onCommitFiberUnmount=="function")try{lc$1.onCommitFiberUnmount(kc$1,i)}catch{}switch(i.tag){case 5:U$1||Mj$1(i,a);case 6:var o=X$2,c=Yj$1;X$2=null,Zj$1(e,a,i),X$2=o,Yj$1=c,X$2!==null&&(Yj$1?(e=X$2,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):X$2.removeChild(i.stateNode));break;case 18:X$2!==null&&(Yj$1?(e=X$2,i=i.stateNode,e.nodeType===8?Kf$1(e.parentNode,i):e.nodeType===1&&Kf$1(e,i),bd$1(e)):Kf$1(X$2,i.stateNode));break;case 4:o=X$2,c=Yj$1,X$2=i.stateNode.containerInfo,Yj$1=!0,Zj$1(e,a,i),X$2=o,Yj$1=c;break;case 0:case 11:case 14:case 15:if(!U$1&&(o=i.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){c=o=o.next;do{var d=c,g=d.destroy;d=d.tag,g!==void 0&&(d&2||d&4)&&Nj$1(i,a,g),c=c.next}while(c!==o)}Zj$1(e,a,i);break;case 1:if(!U$1&&(Mj$1(i,a),o=i.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=i.memoizedProps,o.state=i.memoizedState,o.componentWillUnmount()}catch(b){W$1(i,a,b)}Zj$1(e,a,i);break;case 21:Zj$1(e,a,i);break;case 22:i.mode&1?(U$1=(o=U$1)||i.memoizedState!==null,Zj$1(e,a,i),U$1=o):Zj$1(e,a,i);break;default:Zj$1(e,a,i)}}function bk$1(e){var a=e.updateQueue;if(a!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new Lj$1),a.forEach(function(o){var c=ck$1.bind(null,e,o);i.has(o)||(i.add(o),o.then(c,c))})}}function dk$1(e,a){var i=a.deletions;if(i!==null)for(var o=0;o<i.length;o++){var c=i[o];try{var d=e,g=a,b=g;e:for(;b!==null;){switch(b.tag){case 5:X$2=b.stateNode,Yj$1=!1;break e;case 3:X$2=b.stateNode.containerInfo,Yj$1=!0;break e;case 4:X$2=b.stateNode.containerInfo,Yj$1=!0;break e}b=b.return}if(X$2===null)throw Error(p$1(160));ak$1(d,g,c),X$2=null,Yj$1=!1;var j=c.alternate;j!==null&&(j.return=null),c.return=null}catch($){W$1(c,a,$)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)ek$1(a,e),a=a.sibling}function ek$1(e,a){var i=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(dk$1(a,e),fk$1(e),o&4){try{Qj$1(3,e,e.return),Rj$1(3,e)}catch(yt){W$1(e,e.return,yt)}try{Qj$1(5,e,e.return)}catch(yt){W$1(e,e.return,yt)}}break;case 1:dk$1(a,e),fk$1(e),o&512&&i!==null&&Mj$1(i,i.return);break;case 5:if(dk$1(a,e),fk$1(e),o&512&&i!==null&&Mj$1(i,i.return),e.flags&32){var c=e.stateNode;try{ob$1(c,"")}catch(yt){W$1(e,e.return,yt)}}if(o&4&&(c=e.stateNode,c!=null)){var d=e.memoizedProps,g=i!==null?i.memoizedProps:d,b=e.type,j=e.updateQueue;if(e.updateQueue=null,j!==null)try{b==="input"&&d.type==="radio"&&d.name!=null&&ab$1(c,d),vb$1(b,g);var $=vb$1(b,d);for(g=0;g<j.length;g+=2){var rt=j[g],_e=j[g+1];rt==="style"?sb(c,_e):rt==="dangerouslySetInnerHTML"?nb(c,_e):rt==="children"?ob$1(c,_e):ta$1(c,rt,_e,$)}switch(b){case"input":bb$1(c,d);break;case"textarea":ib$1(c,d);break;case"select":var st=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!d.multiple;var ut=d.value;ut!=null?fb(c,!!d.multiple,ut,!1):st!==!!d.multiple&&(d.defaultValue!=null?fb(c,!!d.multiple,d.defaultValue,!0):fb(c,!!d.multiple,d.multiple?[]:"",!1))}c[Pf$1]=d}catch(yt){W$1(e,e.return,yt)}}break;case 6:if(dk$1(a,e),fk$1(e),o&4){if(e.stateNode===null)throw Error(p$1(162));c=e.stateNode,d=e.memoizedProps;try{c.nodeValue=d}catch(yt){W$1(e,e.return,yt)}}break;case 3:if(dk$1(a,e),fk$1(e),o&4&&i!==null&&i.memoizedState.isDehydrated)try{bd$1(a.containerInfo)}catch(yt){W$1(e,e.return,yt)}break;case 4:dk$1(a,e),fk$1(e);break;case 13:dk$1(a,e),fk$1(e),c=e.child,c.flags&8192&&(d=c.memoizedState!==null,c.stateNode.isHidden=d,!d||c.alternate!==null&&c.alternate.memoizedState!==null||(gk$1=B$1())),o&4&&bk$1(e);break;case 22:if(rt=i!==null&&i.memoizedState!==null,e.mode&1?(U$1=($=U$1)||rt,dk$1(a,e),U$1=$):dk$1(a,e),fk$1(e),o&8192){if($=e.memoizedState!==null,(e.stateNode.isHidden=$)&&!rt&&e.mode&1)for(V$1=e,rt=e.child;rt!==null;){for(_e=V$1=rt;V$1!==null;){switch(st=V$1,ut=st.child,st.tag){case 0:case 11:case 14:case 15:Qj$1(4,st,st.return);break;case 1:Mj$1(st,st.return);var gt=st.stateNode;if(typeof gt.componentWillUnmount=="function"){o=st,i=st.return;try{a=o,gt.props=a.memoizedProps,gt.state=a.memoizedState,gt.componentWillUnmount()}catch(yt){W$1(o,i,yt)}}break;case 5:Mj$1(st,st.return);break;case 22:if(st.memoizedState!==null){hk$1(_e);continue}}ut!==null?(ut.return=st,V$1=ut):hk$1(_e)}rt=rt.sibling}e:for(rt=null,_e=e;;){if(_e.tag===5){if(rt===null){rt=_e;try{c=_e.stateNode,$?(d=c.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(b=_e.stateNode,j=_e.memoizedProps.style,g=j!=null&&j.hasOwnProperty("display")?j.display:null,b.style.display=rb$1("display",g))}catch(yt){W$1(e,e.return,yt)}}}else if(_e.tag===6){if(rt===null)try{_e.stateNode.nodeValue=$?"":_e.memoizedProps}catch(yt){W$1(e,e.return,yt)}}else if((_e.tag!==22&&_e.tag!==23||_e.memoizedState===null||_e===e)&&_e.child!==null){_e.child.return=_e,_e=_e.child;continue}if(_e===e)break e;for(;_e.sibling===null;){if(_e.return===null||_e.return===e)break e;rt===_e&&(rt=null),_e=_e.return}rt===_e&&(rt=null),_e.sibling.return=_e.return,_e=_e.sibling}}break;case 19:dk$1(a,e),fk$1(e),o&4&&bk$1(e);break;case 21:break;default:dk$1(a,e),fk$1(e)}}function fk$1(e){var a=e.flags;if(a&2){try{e:{for(var i=e.return;i!==null;){if(Uj$1(i)){var o=i;break e}i=i.return}throw Error(p$1(160))}switch(o.tag){case 5:var c=o.stateNode;o.flags&32&&(ob$1(c,""),o.flags&=-33);var d=Vj$1(e);Xj$1(e,d,c);break;case 3:case 4:var g=o.stateNode.containerInfo,b=Vj$1(e);Wj$1(e,b,g);break;default:throw Error(p$1(161))}}catch(j){W$1(e,e.return,j)}e.flags&=-3}a&4096&&(e.flags&=-4097)}function ik$1(e,a,i){V$1=e,jk$1(e)}function jk$1(e,a,i){for(var o=(e.mode&1)!==0;V$1!==null;){var c=V$1,d=c.child;if(c.tag===22&&o){var g=c.memoizedState!==null||Kj$1;if(!g){var b=c.alternate,j=b!==null&&b.memoizedState!==null||U$1;b=Kj$1;var $=U$1;if(Kj$1=g,(U$1=j)&&!$)for(V$1=c;V$1!==null;)g=V$1,j=g.child,g.tag===22&&g.memoizedState!==null?kk$1(c):j!==null?(j.return=g,V$1=j):kk$1(c);for(;d!==null;)V$1=d,jk$1(d),d=d.sibling;V$1=c,Kj$1=b,U$1=$}lk$1(e)}else c.subtreeFlags&8772&&d!==null?(d.return=c,V$1=d):lk$1(e)}}function lk$1(e){for(;V$1!==null;){var a=V$1;if(a.flags&8772){var i=a.alternate;try{if(a.flags&8772)switch(a.tag){case 0:case 11:case 15:U$1||Rj$1(5,a);break;case 1:var o=a.stateNode;if(a.flags&4&&!U$1)if(i===null)o.componentDidMount();else{var c=a.elementType===a.type?i.memoizedProps:Lg$1(a.type,i.memoizedProps);o.componentDidUpdate(c,i.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var d=a.updateQueue;d!==null&&ih$1(a,d,o);break;case 3:var g=a.updateQueue;if(g!==null){if(i=null,a.child!==null)switch(a.child.tag){case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}ih$1(a,g,i)}break;case 5:var b=a.stateNode;if(i===null&&a.flags&4){i=b;var j=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":j.autoFocus&&i.focus();break;case"img":j.src&&(i.src=j.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var $=a.alternate;if($!==null){var rt=$.memoizedState;if(rt!==null){var _e=rt.dehydrated;_e!==null&&bd$1(_e)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$1(163))}U$1||a.flags&512&&Sj$1(a)}catch(st){W$1(a,a.return,st)}}if(a===e){V$1=null;break}if(i=a.sibling,i!==null){i.return=a.return,V$1=i;break}V$1=a.return}}function hk$1(e){for(;V$1!==null;){var a=V$1;if(a===e){V$1=null;break}var i=a.sibling;if(i!==null){i.return=a.return,V$1=i;break}V$1=a.return}}function kk$1(e){for(;V$1!==null;){var a=V$1;try{switch(a.tag){case 0:case 11:case 15:var i=a.return;try{Rj$1(4,a)}catch(j){W$1(a,i,j)}break;case 1:var o=a.stateNode;if(typeof o.componentDidMount=="function"){var c=a.return;try{o.componentDidMount()}catch(j){W$1(a,c,j)}}var d=a.return;try{Sj$1(a)}catch(j){W$1(a,d,j)}break;case 5:var g=a.return;try{Sj$1(a)}catch(j){W$1(a,g,j)}}}catch(j){W$1(a,a.return,j)}if(a===e){V$1=null;break}var b=a.sibling;if(b!==null){b.return=a.return,V$1=b;break}V$1=a.return}}var mk$1=Math.ceil,nk$1=ua$1.ReactCurrentDispatcher,ok$1=ua$1.ReactCurrentOwner,pk$1=ua$1.ReactCurrentBatchConfig,K$1=0,R$1=null,Y$1=null,Z$2=0,gj$1=0,fj$1=Uf$1(0),T$1=0,qk$1=null,hh$1=0,rk$1=0,sk$1=0,tk$1=null,uk$1=null,gk$1=0,Hj$1=1/0,vk$1=null,Pi$1=!1,Qi$1=null,Si=null,wk$1=!1,xk$1=null,yk$1=0,zk$1=0,Ak$1=null,Bk$1=-1,Ck$1=0;function L$1(){return K$1&6?B$1():Bk$1!==-1?Bk$1:Bk$1=B$1()}function lh$1(e){return e.mode&1?K$1&2&&Z$2!==0?Z$2&-Z$2:Kg$1.transition!==null?(Ck$1===0&&(Ck$1=yc$1()),Ck$1):(e=C$1,e!==0||(e=window.event,e=e===void 0?16:jd$1(e.type)),e):1}function mh$1(e,a,i,o){if(50<zk$1)throw zk$1=0,Ak$1=null,Error(p$1(185));Ac$1(e,i,o),(!(K$1&2)||e!==R$1)&&(e===R$1&&(!(K$1&2)&&(rk$1|=i),T$1===4&&Dk$1(e,Z$2)),Ek$1(e,o),i===1&&K$1===0&&!(a.mode&1)&&(Hj$1=B$1()+500,fg$1&&jg$1()))}function Ek$1(e,a){var i=e.callbackNode;wc$1(e,a);var o=uc$1(e,e===R$1?Z$2:0);if(o===0)i!==null&&bc$1(i),e.callbackNode=null,e.callbackPriority=0;else if(a=o&-o,e.callbackPriority!==a){if(i!=null&&bc$1(i),a===1)e.tag===0?ig$1(Fk$1.bind(null,e)):hg$1(Fk$1.bind(null,e)),Jf$1(function(){!(K$1&6)&&jg$1()}),i=null;else{switch(Dc$1(o)){case 1:i=fc$1;break;case 4:i=gc$1;break;case 16:i=hc$1;break;case 536870912:i=jc$1;break;default:i=hc$1}i=Gk$1(i,Hk$1.bind(null,e))}e.callbackPriority=a,e.callbackNode=i}}function Hk$1(e,a){if(Bk$1=-1,Ck$1=0,K$1&6)throw Error(p$1(327));var i=e.callbackNode;if(Ik$1()&&e.callbackNode!==i)return null;var o=uc$1(e,e===R$1?Z$2:0);if(o===0)return null;if(o&30||o&e.expiredLanes||a)a=Jk$1(e,o);else{a=o;var c=K$1;K$1|=2;var d=Kk$1();(R$1!==e||Z$2!==a)&&(vk$1=null,Hj$1=B$1()+500,Lk$1(e,a));do try{Mk$1();break}catch(b){Nk$1(e,b)}while(!0);Qg$1(),nk$1.current=d,K$1=c,Y$1!==null?a=0:(R$1=null,Z$2=0,a=T$1)}if(a!==0){if(a===2&&(c=xc$1(e),c!==0&&(o=c,a=Ok$1(e,c))),a===1)throw i=qk$1,Lk$1(e,0),Dk$1(e,o),Ek$1(e,B$1()),i;if(a===6)Dk$1(e,o);else{if(c=e.current.alternate,!(o&30)&&!Pk$1(c)&&(a=Jk$1(e,o),a===2&&(d=xc$1(e),d!==0&&(o=d,a=Ok$1(e,d))),a===1))throw i=qk$1,Lk$1(e,0),Dk$1(e,o),Ek$1(e,B$1()),i;switch(e.finishedWork=c,e.finishedLanes=o,a){case 0:case 1:throw Error(p$1(345));case 2:Qk$1(e,uk$1,vk$1);break;case 3:if(Dk$1(e,o),(o&130023424)===o&&(a=gk$1+500-B$1(),10<a)){if(uc$1(e,0)!==0)break;if(c=e.suspendedLanes,(c&o)!==o){L$1(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=Ff$1(Qk$1.bind(null,e,uk$1,vk$1),a);break}Qk$1(e,uk$1,vk$1);break;case 4:if(Dk$1(e,o),(o&4194240)===o)break;for(a=e.eventTimes,c=-1;0<o;){var g=31-oc$1(o);d=1<<g,g=a[g],g>c&&(c=g),o&=~d}if(o=c,o=B$1()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*mk$1(o/1960))-o,10<o){e.timeoutHandle=Ff$1(Qk$1.bind(null,e,uk$1,vk$1),o);break}Qk$1(e,uk$1,vk$1);break;case 5:Qk$1(e,uk$1,vk$1);break;default:throw Error(p$1(329))}}}return Ek$1(e,B$1()),e.callbackNode===i?Hk$1.bind(null,e):null}function Ok$1(e,a){var i=tk$1;return e.current.memoizedState.isDehydrated&&(Lk$1(e,a).flags|=256),e=Jk$1(e,a),e!==2&&(a=uk$1,uk$1=i,a!==null&&Gj$1(a)),e}function Gj$1(e){uk$1===null?uk$1=e:uk$1.push.apply(uk$1,e)}function Pk$1(e){for(var a=e;;){if(a.flags&16384){var i=a.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var o=0;o<i.length;o++){var c=i[o],d=c.getSnapshot;c=c.value;try{if(!He(d(),c))return!1}catch{return!1}}}if(i=a.child,a.subtreeFlags&16384&&i!==null)i.return=a,a=i;else{if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Dk$1(e,a){for(a&=~sk$1,a&=~rk$1,e.suspendedLanes|=a,e.pingedLanes&=~a,e=e.expirationTimes;0<a;){var i=31-oc$1(a),o=1<<i;e[i]=-1,a&=~o}}function Fk$1(e){if(K$1&6)throw Error(p$1(327));Ik$1();var a=uc$1(e,0);if(!(a&1))return Ek$1(e,B$1()),null;var i=Jk$1(e,a);if(e.tag!==0&&i===2){var o=xc$1(e);o!==0&&(a=o,i=Ok$1(e,o))}if(i===1)throw i=qk$1,Lk$1(e,0),Dk$1(e,a),Ek$1(e,B$1()),i;if(i===6)throw Error(p$1(345));return e.finishedWork=e.current.alternate,e.finishedLanes=a,Qk$1(e,uk$1,vk$1),Ek$1(e,B$1()),null}function Rk$1(e,a){var i=K$1;K$1|=1;try{return e(a)}finally{K$1=i,K$1===0&&(Hj$1=B$1()+500,fg$1&&jg$1())}}function Sk$1(e){xk$1!==null&&xk$1.tag===0&&!(K$1&6)&&Ik$1();var a=K$1;K$1|=1;var i=pk$1.transition,o=C$1;try{if(pk$1.transition=null,C$1=1,e)return e()}finally{C$1=o,pk$1.transition=i,K$1=a,!(K$1&6)&&jg$1()}}function Ij$1(){gj$1=fj$1.current,E$1(fj$1)}function Lk$1(e,a){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,Gf$1(i)),Y$1!==null)for(i=Y$1.return;i!==null;){var o=i;switch(wg$1(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&$f$1();break;case 3:Jh$1(),E$1(Wf$1),E$1(H$1),Oh$1();break;case 5:Lh$1(o);break;case 4:Jh$1();break;case 13:E$1(M$1);break;case 19:E$1(M$1);break;case 10:Rg$1(o.type._context);break;case 22:case 23:Ij$1()}i=i.return}if(R$1=e,Y$1=e=wh$1(e.current,null),Z$2=gj$1=a,T$1=0,qk$1=null,sk$1=rk$1=hh$1=0,uk$1=tk$1=null,Wg$1!==null){for(a=0;a<Wg$1.length;a++)if(i=Wg$1[a],o=i.interleaved,o!==null){i.interleaved=null;var c=o.next,d=i.pending;if(d!==null){var g=d.next;d.next=c,o.next=g}i.pending=o}Wg$1=null}return e}function Nk$1(e,a){do{var i=Y$1;try{if(Qg$1(),Ph$1.current=ai$1,Sh$1){for(var o=N$1.memoizedState;o!==null;){var c=o.queue;c!==null&&(c.pending=null),o=o.next}Sh$1=!1}if(Rh$1=0,P$1=O$1=N$1=null,Th$1=!1,Uh$1=0,ok$1.current=null,i===null||i.return===null){T$1=1,qk$1=a,Y$1=null;break}e:{var d=e,g=i.return,b=i,j=a;if(a=Z$2,b.flags|=32768,j!==null&&typeof j=="object"&&typeof j.then=="function"){var $=j,rt=b,_e=rt.tag;if(!(rt.mode&1)&&(_e===0||_e===11||_e===15)){var st=rt.alternate;st?(rt.updateQueue=st.updateQueue,rt.memoizedState=st.memoizedState,rt.lanes=st.lanes):(rt.updateQueue=null,rt.memoizedState=null)}var ut=Vi$1(g);if(ut!==null){ut.flags&=-257,Wi$1(ut,g,b,d,a),ut.mode&1&&Ti$1(d,$,a),a=ut,j=$;var gt=a.updateQueue;if(gt===null){var yt=new Set;yt.add(j),a.updateQueue=yt}else gt.add(j);break e}else{if(!(a&1)){Ti$1(d,$,a),uj$1();break e}j=Error(p$1(426))}}else if(I$1&&b.mode&1){var Pt=Vi$1(g);if(Pt!==null){!(Pt.flags&65536)&&(Pt.flags|=256),Wi$1(Pt,g,b,d,a),Jg$1(Ki$1(j,b));break e}}d=j=Ki$1(j,b),T$1!==4&&(T$1=2),tk$1===null?tk$1=[d]:tk$1.push(d),d=g;do{switch(d.tag){case 3:d.flags|=65536,a&=-a,d.lanes|=a;var wt=Oi$1(d,j,a);fh$1(d,wt);break e;case 1:b=j;var Ct=d.type,At=d.stateNode;if(!(d.flags&128)&&(typeof Ct.getDerivedStateFromError=="function"||At!==null&&typeof At.componentDidCatch=="function"&&(Si===null||!Si.has(At)))){d.flags|=65536,a&=-a,d.lanes|=a;var Tt=Ri$1(d,b,a);fh$1(d,Tt);break e}}d=d.return}while(d!==null)}Tk$1(i)}catch(kt){a=kt,Y$1===i&&i!==null&&(Y$1=i=i.return);continue}break}while(!0)}function Kk$1(){var e=nk$1.current;return nk$1.current=ai$1,e===null?ai$1:e}function uj$1(){(T$1===0||T$1===3||T$1===2)&&(T$1=4),R$1===null||!(hh$1&268435455)&&!(rk$1&268435455)||Dk$1(R$1,Z$2)}function Jk$1(e,a){var i=K$1;K$1|=2;var o=Kk$1();(R$1!==e||Z$2!==a)&&(vk$1=null,Lk$1(e,a));do try{Uk$1();break}catch(c){Nk$1(e,c)}while(!0);if(Qg$1(),K$1=i,nk$1.current=o,Y$1!==null)throw Error(p$1(261));return R$1=null,Z$2=0,T$1}function Uk$1(){for(;Y$1!==null;)Vk$1(Y$1)}function Mk$1(){for(;Y$1!==null&&!cc$1();)Vk$1(Y$1)}function Vk$1(e){var a=Wk$1(e.alternate,e,gj$1);e.memoizedProps=e.pendingProps,a===null?Tk$1(e):Y$1=a,ok$1.current=null}function Tk$1(e){var a=e;do{var i=a.alternate;if(e=a.return,a.flags&32768){if(i=Jj$1(i,a),i!==null){i.flags&=32767,Y$1=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{T$1=6,Y$1=null;return}}else if(i=Fj$1(i,a,gj$1),i!==null){Y$1=i;return}if(a=a.sibling,a!==null){Y$1=a;return}Y$1=a=e}while(a!==null);T$1===0&&(T$1=5)}function Qk$1(e,a,i){var o=C$1,c=pk$1.transition;try{pk$1.transition=null,C$1=1,Xk$1(e,a,i,o)}finally{pk$1.transition=c,C$1=o}return null}function Xk$1(e,a,i,o){do Ik$1();while(xk$1!==null);if(K$1&6)throw Error(p$1(327));i=e.finishedWork;var c=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(p$1(177));e.callbackNode=null,e.callbackPriority=0;var d=i.lanes|i.childLanes;if(Bc$1(e,d),e===R$1&&(Y$1=R$1=null,Z$2=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||wk$1||(wk$1=!0,Gk$1(hc$1,function(){return Ik$1(),null})),d=(i.flags&15990)!==0,i.subtreeFlags&15990||d){d=pk$1.transition,pk$1.transition=null;var g=C$1;C$1=1;var b=K$1;K$1|=4,ok$1.current=null,Pj$1(e,i),ek$1(i,e),Oe(Df$1),dd$1=!!Cf$1,Df$1=Cf$1=null,e.current=i,ik$1(i),dc$1(),K$1=b,C$1=g,pk$1.transition=d}else e.current=i;if(wk$1&&(wk$1=!1,xk$1=e,yk$1=c),d=e.pendingLanes,d===0&&(Si=null),mc$1(i.stateNode),Ek$1(e,B$1()),a!==null)for(o=e.onRecoverableError,i=0;i<a.length;i++)c=a[i],o(c.value,{componentStack:c.stack,digest:c.digest});if(Pi$1)throw Pi$1=!1,e=Qi$1,Qi$1=null,e;return yk$1&1&&e.tag!==0&&Ik$1(),d=e.pendingLanes,d&1?e===Ak$1?zk$1++:(zk$1=0,Ak$1=e):zk$1=0,jg$1(),null}function Ik$1(){if(xk$1!==null){var e=Dc$1(yk$1),a=pk$1.transition,i=C$1;try{if(pk$1.transition=null,C$1=16>e?16:e,xk$1===null)var o=!1;else{if(e=xk$1,xk$1=null,yk$1=0,K$1&6)throw Error(p$1(331));var c=K$1;for(K$1|=4,V$1=e.current;V$1!==null;){var d=V$1,g=d.child;if(V$1.flags&16){var b=d.deletions;if(b!==null){for(var j=0;j<b.length;j++){var $=b[j];for(V$1=$;V$1!==null;){var rt=V$1;switch(rt.tag){case 0:case 11:case 15:Qj$1(8,rt,d)}var _e=rt.child;if(_e!==null)_e.return=rt,V$1=_e;else for(;V$1!==null;){rt=V$1;var st=rt.sibling,ut=rt.return;if(Tj$1(rt),rt===$){V$1=null;break}if(st!==null){st.return=ut,V$1=st;break}V$1=ut}}}var gt=d.alternate;if(gt!==null){var yt=gt.child;if(yt!==null){gt.child=null;do{var Pt=yt.sibling;yt.sibling=null,yt=Pt}while(yt!==null)}}V$1=d}}if(d.subtreeFlags&2064&&g!==null)g.return=d,V$1=g;else e:for(;V$1!==null;){if(d=V$1,d.flags&2048)switch(d.tag){case 0:case 11:case 15:Qj$1(9,d,d.return)}var wt=d.sibling;if(wt!==null){wt.return=d.return,V$1=wt;break e}V$1=d.return}}var Ct=e.current;for(V$1=Ct;V$1!==null;){g=V$1;var At=g.child;if(g.subtreeFlags&2064&&At!==null)At.return=g,V$1=At;else e:for(g=Ct;V$1!==null;){if(b=V$1,b.flags&2048)try{switch(b.tag){case 0:case 11:case 15:Rj$1(9,b)}}catch(kt){W$1(b,b.return,kt)}if(b===g){V$1=null;break e}var Tt=b.sibling;if(Tt!==null){Tt.return=b.return,V$1=Tt;break e}V$1=b.return}}if(K$1=c,jg$1(),lc$1&&typeof lc$1.onPostCommitFiberRoot=="function")try{lc$1.onPostCommitFiberRoot(kc$1,e)}catch{}o=!0}return o}finally{C$1=i,pk$1.transition=a}}return!1}function Yk$1(e,a,i){a=Ki$1(i,a),a=Oi$1(e,a,1),e=dh$1(e,a,1),a=L$1(),e!==null&&(Ac$1(e,1,a),Ek$1(e,a))}function W$1(e,a,i){if(e.tag===3)Yk$1(e,e,i);else for(;a!==null;){if(a.tag===3){Yk$1(a,e,i);break}else if(a.tag===1){var o=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Si===null||!Si.has(o))){e=Ki$1(i,e),e=Ri$1(a,e,1),a=dh$1(a,e,1),e=L$1(),a!==null&&(Ac$1(a,1,e),Ek$1(a,e));break}}a=a.return}}function Ui$1(e,a,i){var o=e.pingCache;o!==null&&o.delete(a),a=L$1(),e.pingedLanes|=e.suspendedLanes&i,R$1===e&&(Z$2&i)===i&&(T$1===4||T$1===3&&(Z$2&130023424)===Z$2&&500>B$1()-gk$1?Lk$1(e,0):sk$1|=i),Ek$1(e,a)}function Zk$1(e,a){a===0&&(e.mode&1?(a=sc$1,sc$1<<=1,!(sc$1&130023424)&&(sc$1=4194304)):a=1);var i=L$1();e=Zg$1(e,a),e!==null&&(Ac$1(e,a,i),Ek$1(e,i))}function vj$1(e){var a=e.memoizedState,i=0;a!==null&&(i=a.retryLane),Zk$1(e,i)}function ck$1(e,a){var i=0;switch(e.tag){case 13:var o=e.stateNode,c=e.memoizedState;c!==null&&(i=c.retryLane);break;case 19:o=e.stateNode;break;default:throw Error(p$1(314))}o!==null&&o.delete(a),Zk$1(e,i)}var Wk$1;Wk$1=function(e,a,i){if(e!==null)if(e.memoizedProps!==a.pendingProps||Wf$1.current)Ug$1=!0;else{if(!(e.lanes&i)&&!(a.flags&128))return Ug$1=!1,zj$1(e,a,i);Ug$1=!!(e.flags&131072)}else Ug$1=!1,I$1&&a.flags&1048576&&ug$1(a,ng$1,a.index);switch(a.lanes=0,a.tag){case 2:var o=a.type;jj$1(e,a),e=a.pendingProps;var c=Yf$1(a,H$1.current);Tg$1(a,i),c=Xh$1(null,a,o,e,c,i);var d=bi$1();return a.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Zf$1(o)?(d=!0,cg$1(a)):d=!1,a.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,ah$1(a),c.updater=nh$1,a.stateNode=c,c._reactInternals=a,rh$1(a,o,e,i),a=kj$1(null,a,o,!0,d,i)):(a.tag=0,I$1&&d&&vg$1(a),Yi$1(null,a,c,i),a=a.child),a;case 16:o=a.elementType;e:{switch(jj$1(e,a),e=a.pendingProps,c=o._init,o=c(o._payload),a.type=o,c=a.tag=$k$1(o),e=Lg$1(o,e),c){case 0:a=dj$1(null,a,o,e,i);break e;case 1:a=ij$1(null,a,o,e,i);break e;case 11:a=Zi$1(null,a,o,e,i);break e;case 14:a=aj$1(null,a,o,Lg$1(o.type,e),i);break e}throw Error(p$1(306,o,""))}return a;case 0:return o=a.type,c=a.pendingProps,c=a.elementType===o?c:Lg$1(o,c),dj$1(e,a,o,c,i);case 1:return o=a.type,c=a.pendingProps,c=a.elementType===o?c:Lg$1(o,c),ij$1(e,a,o,c,i);case 3:e:{if(lj$1(a),e===null)throw Error(p$1(387));o=a.pendingProps,d=a.memoizedState,c=d.element,bh$1(e,a),gh$1(a,o,null,i);var g=a.memoizedState;if(o=g.element,d.isDehydrated)if(d={element:o,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},a.updateQueue.baseState=d,a.memoizedState=d,a.flags&256){c=Ki$1(Error(p$1(423)),a),a=mj$1(e,a,o,i,c);break e}else if(o!==c){c=Ki$1(Error(p$1(424)),a),a=mj$1(e,a,o,i,c);break e}else for(yg$1=Lf$1(a.stateNode.containerInfo.firstChild),xg$1=a,I$1=!0,zg$1=null,i=Ch$1(a,null,o,i),a.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Ig$1(),o===c){a=$i$1(e,a,i);break e}Yi$1(e,a,o,i)}a=a.child}return a;case 5:return Kh$1(a),e===null&&Eg$1(a),o=a.type,c=a.pendingProps,d=e!==null?e.memoizedProps:null,g=c.children,Ef$1(o,c)?g=null:d!==null&&Ef$1(o,d)&&(a.flags|=32),hj$1(e,a),Yi$1(e,a,g,i),a.child;case 6:return e===null&&Eg$1(a),null;case 13:return pj$1(e,a,i);case 4:return Ih$1(a,a.stateNode.containerInfo),o=a.pendingProps,e===null?a.child=Bh$1(a,null,o,i):Yi$1(e,a,o,i),a.child;case 11:return o=a.type,c=a.pendingProps,c=a.elementType===o?c:Lg$1(o,c),Zi$1(e,a,o,c,i);case 7:return Yi$1(e,a,a.pendingProps,i),a.child;case 8:return Yi$1(e,a,a.pendingProps.children,i),a.child;case 12:return Yi$1(e,a,a.pendingProps.children,i),a.child;case 10:e:{if(o=a.type._context,c=a.pendingProps,d=a.memoizedProps,g=c.value,G$1(Mg$1,o._currentValue),o._currentValue=g,d!==null)if(He(d.value,g)){if(d.children===c.children&&!Wf$1.current){a=$i$1(e,a,i);break e}}else for(d=a.child,d!==null&&(d.return=a);d!==null;){var b=d.dependencies;if(b!==null){g=d.child;for(var j=b.firstContext;j!==null;){if(j.context===o){if(d.tag===1){j=ch$1(-1,i&-i),j.tag=2;var $=d.updateQueue;if($!==null){$=$.shared;var rt=$.pending;rt===null?j.next=j:(j.next=rt.next,rt.next=j),$.pending=j}}d.lanes|=i,j=d.alternate,j!==null&&(j.lanes|=i),Sg$1(d.return,i,a),b.lanes|=i;break}j=j.next}}else if(d.tag===10)g=d.type===a.type?null:d.child;else if(d.tag===18){if(g=d.return,g===null)throw Error(p$1(341));g.lanes|=i,b=g.alternate,b!==null&&(b.lanes|=i),Sg$1(g,i,a),g=d.sibling}else g=d.child;if(g!==null)g.return=d;else for(g=d;g!==null;){if(g===a){g=null;break}if(d=g.sibling,d!==null){d.return=g.return,g=d;break}g=g.return}d=g}Yi$1(e,a,c.children,i),a=a.child}return a;case 9:return c=a.type,o=a.pendingProps.children,Tg$1(a,i),c=Vg$1(c),o=o(c),a.flags|=1,Yi$1(e,a,o,i),a.child;case 14:return o=a.type,c=Lg$1(o,a.pendingProps),c=Lg$1(o.type,c),aj$1(e,a,o,c,i);case 15:return cj$1(e,a,a.type,a.pendingProps,i);case 17:return o=a.type,c=a.pendingProps,c=a.elementType===o?c:Lg$1(o,c),jj$1(e,a),a.tag=1,Zf$1(o)?(e=!0,cg$1(a)):e=!1,Tg$1(a,i),ph$1(a,o,c),rh$1(a,o,c,i),kj$1(null,a,o,!0,e,i);case 19:return yj$1(e,a,i);case 22:return ej$1(e,a,i)}throw Error(p$1(156,a.tag))};function Gk$1(e,a){return ac$1(e,a)}function al$1(e,a,i,o){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(e,a,i,o){return new al$1(e,a,i,o)}function bj$1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function $k$1(e){if(typeof e=="function")return bj$1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Da$1)return 11;if(e===Ga$1)return 14}return 2}function wh$1(e,a){var i=e.alternate;return i===null?(i=Bg(e.tag,a,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=a,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,a=e.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function yh$1(e,a,i,o,c,d){var g=2;if(o=e,typeof e=="function")bj$1(e)&&(g=1);else if(typeof e=="string")g=5;else e:switch(e){case ya$1:return Ah$1(i.children,c,d,a);case za$1:g=8,c|=8;break;case Aa$1:return e=Bg(12,i,a,c|2),e.elementType=Aa$1,e.lanes=d,e;case Ea$1:return e=Bg(13,i,a,c),e.elementType=Ea$1,e.lanes=d,e;case Fa$1:return e=Bg(19,i,a,c),e.elementType=Fa$1,e.lanes=d,e;case Ia$1:return qj$1(i,c,d,a);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ba$1:g=10;break e;case Ca$1:g=9;break e;case Da$1:g=11;break e;case Ga$1:g=14;break e;case Ha$1:g=16,o=null;break e}throw Error(p$1(130,e==null?e:typeof e,""))}return a=Bg(g,i,a,c),a.elementType=e,a.type=o,a.lanes=d,a}function Ah$1(e,a,i,o){return e=Bg(7,e,o,a),e.lanes=i,e}function qj$1(e,a,i,o){return e=Bg(22,e,o,a),e.elementType=Ia$1,e.lanes=i,e.stateNode={isHidden:!1},e}function xh$1(e,a,i){return e=Bg(6,e,null,a),e.lanes=i,e}function zh$1(e,a,i){return a=Bg(4,e.children!==null?e.children:[],e.key,a),a.lanes=i,a.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},a}function bl$1(e,a,i,o,c){this.tag=a,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc$1(0),this.expirationTimes=zc$1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc$1(0),this.identifierPrefix=o,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function cl$1(e,a,i,o,c,d,g,b,j){return e=new bl$1(e,a,i,b,j),a===1?(a=1,d===!0&&(a|=8)):a=0,d=Bg(3,null,null,a),e.current=d,d.stateNode=e,d.memoizedState={element:o,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah$1(d),e}function dl$1(e,a,i){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa$1,key:o==null?null:""+o,children:e,containerInfo:a,implementation:i}}function el$1(e){if(!e)return Vf$1;e=e._reactInternals;e:{if(Vb$1(e)!==e||e.tag!==1)throw Error(p$1(170));var a=e;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(Zf$1(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(p$1(171))}if(e.tag===1){var i=e.type;if(Zf$1(i))return bg$1(e,i,a)}return a}function fl$1(e,a,i,o,c,d,g,b,j){return e=cl$1(i,o,!0,e,c,d,g,b,j),e.context=el$1(null),i=e.current,o=L$1(),c=lh$1(i),d=ch$1(o,c),d.callback=a??null,dh$1(i,d,c),e.current.lanes=c,Ac$1(e,c,o),Ek$1(e,o),e}function gl$1(e,a,i,o){var c=a.current,d=L$1(),g=lh$1(c);return i=el$1(i),a.context===null?a.context=i:a.pendingContext=i,a=ch$1(d,g),a.payload={element:e},o=o===void 0?null:o,o!==null&&(a.callback=o),e=dh$1(c,a,g),e!==null&&(mh$1(e,c,g,d),eh$1(e,c,g)),g}function hl$1(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function il$1(e,a){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<a?i:a}}function jl(e,a){il$1(e,a),(e=e.alternate)&&il$1(e,a)}function kl$1(){return null}var ll$1=typeof reportError=="function"?reportError:function(e){console.error(e)};function ml$1(e){this._internalRoot=e}nl$1.prototype.render=ml$1.prototype.render=function(e){var a=this._internalRoot;if(a===null)throw Error(p$1(409));gl$1(e,a,null,null)};nl$1.prototype.unmount=ml$1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var a=e.containerInfo;Sk$1(function(){gl$1(null,e,null,null)}),a[uf$1]=null}};function nl$1(e){this._internalRoot=e}nl$1.prototype.unstable_scheduleHydration=function(e){if(e){var a=Hc$1();e={blockedOn:null,target:e,priority:a};for(var i=0;i<Qc$1.length&&a!==0&&a<Qc$1[i].priority;i++);Qc$1.splice(i,0,e),i===0&&Vc$1(e)}};function ol$1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function pl$1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ql$1(){}function rl$1(e,a,i,o,c){if(c){if(typeof o=="function"){var d=o;o=function(){var $=hl$1(g);d.call($)}}var g=fl$1(a,o,e,0,null,!1,!1,"",ql$1);return e._reactRootContainer=g,e[uf$1]=g.current,sf$1(e.nodeType===8?e.parentNode:e),Sk$1(),g}for(;c=e.lastChild;)e.removeChild(c);if(typeof o=="function"){var b=o;o=function(){var $=hl$1(j);b.call($)}}var j=cl$1(e,0,!1,null,null,!1,!1,"",ql$1);return e._reactRootContainer=j,e[uf$1]=j.current,sf$1(e.nodeType===8?e.parentNode:e),Sk$1(function(){gl$1(a,j,i,o)}),j}function sl$1(e,a,i,o,c){var d=i._reactRootContainer;if(d){var g=d;if(typeof c=="function"){var b=c;c=function(){var j=hl$1(g);b.call(j)}}gl$1(a,g,e,c)}else g=rl$1(i,a,e,c,o);return hl$1(g)}Ec$1=function(e){switch(e.tag){case 3:var a=e.stateNode;if(a.current.memoizedState.isDehydrated){var i=tc$1(a.pendingLanes);i!==0&&(Cc$1(a,i|1),Ek$1(a,B$1()),!(K$1&6)&&(Hj$1=B$1()+500,jg$1()))}break;case 13:Sk$1(function(){var o=Zg$1(e,1);if(o!==null){var c=L$1();mh$1(o,e,1,c)}}),jl(e,1)}};Fc$1=function(e){if(e.tag===13){var a=Zg$1(e,134217728);if(a!==null){var i=L$1();mh$1(a,e,134217728,i)}jl(e,134217728)}};Gc$1=function(e){if(e.tag===13){var a=lh$1(e),i=Zg$1(e,a);if(i!==null){var o=L$1();mh$1(i,e,a,o)}jl(e,a)}};Hc$1=function(){return C$1};Ic$1=function(e,a){var i=C$1;try{return C$1=e,a()}finally{C$1=i}};yb$1=function(e,a,i){switch(a){case"input":if(bb$1(e,i),a=i.name,i.type==="radio"&&a!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<i.length;a++){var o=i[a];if(o!==e&&o.form===e.form){var c=Db$1(o);if(!c)throw Error(p$1(90));Wa$1(o),bb$1(o,c)}}}break;case"textarea":ib$1(e,i);break;case"select":a=i.value,a!=null&&fb(e,!!i.multiple,a,!1)}};Gb$1=Rk$1;Hb$1=Sk$1;var tl$1={usingClientEntryPoint:!1,Events:[Cb$1,ue$2,Db$1,Eb$1,Fb$1,Rk$1]},ul$1={findFiberByHostInstance:Wc$1,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl$1={bundleType:ul$1.bundleType,version:ul$1.version,rendererPackageName:ul$1.rendererPackageName,rendererConfig:ul$1.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua$1.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Zb$1(e),e===null?null:e.stateNode},findFiberByHostInstance:ul$1.findFiberByHostInstance||kl$1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl$1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl$1.isDisabled&&wl$1.supportsFiber)try{kc$1=wl$1.inject(vl$1),lc$1=wl$1}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl$1;reactDom_production_min.createPortal=function(e,a){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol$1(a))throw Error(p$1(200));return dl$1(e,a,null,i)};reactDom_production_min.createRoot=function(e,a){if(!ol$1(e))throw Error(p$1(299));var i=!1,o="",c=ll$1;return a!=null&&(a.unstable_strictMode===!0&&(i=!0),a.identifierPrefix!==void 0&&(o=a.identifierPrefix),a.onRecoverableError!==void 0&&(c=a.onRecoverableError)),a=cl$1(e,1,!1,null,null,i,!1,o,c),e[uf$1]=a.current,sf$1(e.nodeType===8?e.parentNode:e),new ml$1(a)};reactDom_production_min.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var a=e._reactInternals;if(a===void 0)throw typeof e.render=="function"?Error(p$1(188)):(e=Object.keys(e).join(","),Error(p$1(268,e)));return e=Zb$1(a),e=e===null?null:e.stateNode,e};reactDom_production_min.flushSync=function(e){return Sk$1(e)};reactDom_production_min.hydrate=function(e,a,i){if(!pl$1(a))throw Error(p$1(200));return sl$1(null,e,a,!0,i)};reactDom_production_min.hydrateRoot=function(e,a,i){if(!ol$1(e))throw Error(p$1(405));var o=i!=null&&i.hydratedSources||null,c=!1,d="",g=ll$1;if(i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onRecoverableError!==void 0&&(g=i.onRecoverableError)),a=fl$1(a,null,e,1,i??null,c,!1,d,g),e[uf$1]=a.current,sf$1(e),o)for(e=0;e<o.length;e++)i=o[e],c=i._getVersion,c=c(i._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[i,c]:a.mutableSourceEagerHydrationData.push(i,c);return new nl$1(a)};reactDom_production_min.render=function(e,a,i){if(!pl$1(a))throw Error(p$1(200));return sl$1(null,e,a,!1,i)};reactDom_production_min.unmountComponentAtNode=function(e){if(!pl$1(e))throw Error(p$1(40));return e._reactRootContainer?(Sk$1(function(){sl$1(null,null,e,!1,function(){e._reactRootContainer=null,e[uf$1]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Rk$1;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(e,a,i,o){if(!pl$1(i))throw Error(p$1(200));if(e==null||e._reactInternals===void 0)throw Error(p$1(38));return sl$1(e,a,i,!1,o)};reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(e){console.error(e)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,m=reactDomExports;client.createRoot=m.createRoot,client.hydrateRoot=m.hydrateRoot;const scriptRel="modulepreload",assetsURL=function(e){return"/"+e},seen={},__vitePreload=function(a,i,o){let c=Promise.resolve();if(i&&i.length>0){const d=document.getElementsByTagName("link");c=Promise.all(i.map(g=>{if(g=assetsURL(g),g in seen)return;seen[g]=!0;const b=g.endsWith(".css"),j=b?'[rel="stylesheet"]':"";if(!!o)for(let _e=d.length-1;_e>=0;_e--){const st=d[_e];if(st.href===g&&(!b||st.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${g}"]${j}`))return;const rt=document.createElement("link");if(rt.rel=b?"stylesheet":scriptRel,b||(rt.as="script",rt.crossOrigin=""),rt.href=g,document.head.appendChild(rt),b)return new Promise((_e,st)=>{rt.addEventListener("load",_e),rt.addEventListener("error",()=>st(new Error(`Unable to preload CSS for ${g}`)))})}))}return c.then(()=>a()).catch(d=>{const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=d,window.dispatchEvent(g),!g.defaultPrevented)throw d})};var ZN=Object.create,Fg=Object.defineProperty,JN=Object.getOwnPropertyDescriptor,$N=Object.getOwnPropertyNames,eF=Object.getPrototypeOf,tF=Object.prototype.hasOwnProperty,rF=(e,a,i)=>a in e?Fg(e,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[a]=i,zi=(e,a)=>()=>(a||e((a={exports:{}}).exports,a),a.exports),iF=(e,a)=>{for(var i in a)Fg(e,i,{get:a[i],enumerable:!0})},nF=(e,a,i,o)=>{if(a&&typeof a=="object"||typeof a=="function")for(let c of $N(a))!tF.call(e,c)&&c!==i&&Fg(e,c,{get:()=>a[c],enumerable:!(o=JN(a,c))||o.enumerable});return e},pi=(e,a,i)=>(i=e!=null?ZN(eF(e)):{},nF(a||!e||!e.__esModule?Fg(i,"default",{value:e,enumerable:!0}):i,e)),Ui=(e,a,i)=>(rF(e,typeof a!="symbol"?a+"":a,i),i),CO=zi((e,a)=>{(function(i,o){typeof e=="object"?a.exports=o():typeof define=="function"&&define.amd?define(o):i.Alea=o()})(e,function(){return i.importState=function(c){var d=new i;return d.importState(c),d},i;function i(){return function(c){var d=0,g=0,b=0,j=1;c.length==0&&(c=[+new Date]);var $=o();d=$(" "),g=$(" "),b=$(" ");for(var rt=0;rt<c.length;rt++)d-=$(c[rt]),d<0&&(d+=1),g-=$(c[rt]),g<0&&(g+=1),b-=$(c[rt]),b<0&&(b+=1);$=null;var _e=function(){var st=2091639*d+j*23283064365386963e-26;return d=g,g=b,b=st-(j=st|0)};return _e.next=_e,_e.uint32=function(){return _e()*4294967296},_e.fract53=function(){return _e()+(_e()*2097152|0)*11102230246251565e-32},_e.version="Alea 0.9",_e.args=c,_e.exportState=function(){return[d,g,b,j]},_e.importState=function(st){d=+st[0]||0,g=+st[1]||0,b=+st[2]||0,j=+st[3]||0},_e}(Array.prototype.slice.call(arguments))}function o(){var c=4022871197,d=function(g){g=g.toString();for(var b=0;b<g.length;b++){c+=g.charCodeAt(b);var j=.02519603282416938*c;c=j>>>0,j-=c,j*=c,c=j>>>0,j-=c,c+=j*4294967296}return(c>>>0)*23283064365386963e-26};return d.version="Mash 0.9",d}})}),iA=zi((e,a)=>{(function(i,o){typeof e=="object"&&typeof a<"u"?o(e):typeof define=="function"&&define.amd?define(["exports"],o):o((i=typeof globalThis<"u"?globalThis:i||self).SVDJS={})})(e,function(i){i.SVD=function(o,c,d,g,b){if(c=c===void 0||c,d=d===void 0||d,b=1e-64/(g=g||Math.pow(2,-52)),!o)throw new TypeError("Matrix a is not defined");var j,$,rt,_e,st,ut,gt,yt,Pt,wt,Ct,At,Tt=o[0].length,kt=o.length;if(kt<Tt)throw new TypeError("Invalid matrix: m < n");for(var It=[],Lt=[],Ft=[],Nt=c==="f"?kt:Tt,Ht=wt=gt=0;Ht<kt;Ht++)Lt[Ht]=new Array(Nt).fill(0);for(Ht=0;Ht<Tt;Ht++)Ft[Ht]=new Array(Tt).fill(0);var Gr,hs=new Array(Tt).fill(0);for(Ht=0;Ht<kt;Ht++)for(j=0;j<Tt;j++)Lt[Ht][j]=o[Ht][j];for(Ht=0;Ht<Tt;Ht++){for(It[Ht]=gt,Pt=0,rt=Ht+1,j=Ht;j<kt;j++)Pt+=Math.pow(Lt[j][Ht],2);if(Pt<b)gt=0;else for(yt=(ut=Lt[Ht][Ht])*(gt=ut<0?Math.sqrt(Pt):-Math.sqrt(Pt))-Pt,Lt[Ht][Ht]=ut-gt,j=rt;j<Tt;j++){for(Pt=0,$=Ht;$<kt;$++)Pt+=Lt[$][Ht]*Lt[$][j];for(ut=Pt/yt,$=Ht;$<kt;$++)Lt[$][j]=Lt[$][j]+ut*Lt[$][Ht]}for(hs[Ht]=gt,Pt=0,j=rt;j<Tt;j++)Pt+=Math.pow(Lt[Ht][j],2);if(Pt<b)gt=0;else{for(yt=(ut=Lt[Ht][Ht+1])*(gt=ut<0?Math.sqrt(Pt):-Math.sqrt(Pt))-Pt,Lt[Ht][Ht+1]=ut-gt,j=rt;j<Tt;j++)It[j]=Lt[Ht][j]/yt;for(j=rt;j<kt;j++){for(Pt=0,$=rt;$<Tt;$++)Pt+=Lt[j][$]*Lt[Ht][$];for($=rt;$<Tt;$++)Lt[j][$]=Lt[j][$]+Pt*It[$]}}wt<(Ct=Math.abs(hs[Ht])+Math.abs(It[Ht]))&&(wt=Ct)}if(d)for(Ht=Tt-1;0<=Ht;Ht--){if(gt!==0){for(yt=Lt[Ht][Ht+1]*gt,j=rt;j<Tt;j++)Ft[j][Ht]=Lt[Ht][j]/yt;for(j=rt;j<Tt;j++){for(Pt=0,$=rt;$<Tt;$++)Pt+=Lt[Ht][$]*Ft[$][j];for($=rt;$<Tt;$++)Ft[$][j]=Ft[$][j]+Pt*Ft[$][Ht]}}for(j=rt;j<Tt;j++)Ft[Ht][j]=0,Ft[j][Ht]=0;Ft[Ht][Ht]=1,gt=It[Ht],rt=Ht}if(c){if(c==="f")for(Ht=Tt;Ht<kt;Ht++){for(j=Tt;j<kt;j++)Lt[Ht][j]=0;Lt[Ht][Ht]=1}for(Ht=Tt-1;0<=Ht;Ht--){for(rt=Ht+1,gt=hs[Ht],j=rt;j<Nt;j++)Lt[Ht][j]=0;if(gt!==0){for(yt=Lt[Ht][Ht]*gt,j=rt;j<Nt;j++){for(Pt=0,$=rt;$<kt;$++)Pt+=Lt[$][Ht]*Lt[$][j];for(ut=Pt/yt,$=Ht;$<kt;$++)Lt[$][j]=Lt[$][j]+ut*Lt[$][Ht]}for(j=Ht;j<kt;j++)Lt[j][Ht]=Lt[j][Ht]/gt}else for(j=Ht;j<kt;j++)Lt[j][Ht]=0;Lt[Ht][Ht]=Lt[Ht][Ht]+1}}for(g*=wt,$=Tt-1;0<=$;$--)for(var _s=0;_s<50;_s++){for(Gr=!1,rt=$;0<=rt;rt--){if(Math.abs(It[rt])<=g){Gr=!0;break}if(Math.abs(hs[rt-1])<=g)break}if(!Gr){for(st=0,_e=rt-(Pt=1),Ht=rt;Ht<$+1&&(ut=Pt*It[Ht],It[Ht]=st*It[Ht],!(Math.abs(ut)<=g));Ht++)if(gt=hs[Ht],hs[Ht]=Math.sqrt(ut*ut+gt*gt),st=gt/(yt=hs[Ht]),Pt=-ut/yt,c)for(j=0;j<kt;j++)Ct=Lt[j][_e],At=Lt[j][Ht],Lt[j][_e]=Ct*st+At*Pt,Lt[j][Ht]=-Ct*Pt+At*st}if(At=hs[$],rt===$){if(At<0&&(hs[$]=-At,d))for(j=0;j<Tt;j++)Ft[j][$]=-Ft[j][$];break}for(wt=hs[rt],ut=(((Ct=hs[$-1])-At)*(Ct+At)+((gt=It[$-1])-(yt=It[$]))*(gt+yt))/(2*yt*Ct),gt=Math.sqrt(ut*ut+1),ut=((wt-At)*(wt+At)+yt*(Ct/(ut<0?ut-gt:ut+gt)-yt))/wt,Ht=rt+(Pt=st=1);Ht<$+1;Ht++){if(gt=It[Ht],Ct=hs[Ht],yt=Pt*gt,gt*=st,At=Math.sqrt(ut*ut+yt*yt),ut=wt*(st=ut/(It[Ht-1]=At))+gt*(Pt=yt/At),gt=-wt*Pt+gt*st,yt=Ct*Pt,Ct*=st,d)for(j=0;j<Tt;j++)wt=Ft[j][Ht-1],At=Ft[j][Ht],Ft[j][Ht-1]=wt*st+At*Pt,Ft[j][Ht]=-wt*Pt+At*st;if(At=Math.sqrt(ut*ut+yt*yt),ut=(st=ut/(hs[Ht-1]=At))*gt+(Pt=yt/At)*Ct,wt=-Pt*gt+st*Ct,c)for(j=0;j<kt;j++)Ct=Lt[j][Ht-1],At=Lt[j][Ht],Lt[j][Ht-1]=Ct*st+At*Pt,Lt[j][Ht]=-Ct*Pt+At*st}It[rt]=0,It[$]=ut,hs[$]=wt}for(Ht=0;Ht<Tt;Ht++)hs[Ht]<g&&(hs[Ht]=0);return{u:Lt,q:hs,v:Ft}},i.VERSION="1.1.1",Object.defineProperty(i,"__esModule",{value:!0})})}),sI=zi((e,a)=>{(function(i,o){typeof e=="object"&&typeof a<"u"?a.exports=o():typeof define=="function"&&define.amd?define(o):(i=i||self,i.TinyQueue=o())})(e,function(){var i=function(c,d){if(c===void 0&&(c=[]),d===void 0&&(d=o),this.data=c,this.length=this.data.length,this.compare=d,this.length>0)for(var g=(this.length>>1)-1;g>=0;g--)this._down(g)};i.prototype.push=function(c){this.data.push(c),this.length++,this._up(this.length-1)},i.prototype.pop=function(){if(this.length!==0){var c=this.data[0],d=this.data.pop();return this.length--,this.length>0&&(this.data[0]=d,this._down(0)),c}},i.prototype.peek=function(){return this.data[0]},i.prototype._up=function(c){for(var d=this,g=d.data,b=d.compare,j=g[c];c>0;){var $=c-1>>1,rt=g[$];if(b(j,rt)>=0)break;g[c]=rt,c=$}g[c]=j},i.prototype._down=function(c){for(var d=this,g=d.data,b=d.compare,j=this.length>>1,$=g[c];c<j;){var rt=(c<<1)+1,_e=g[rt],st=rt+1;if(st<this.length&&b(g[st],_e)<0&&(rt=st,_e=g[st]),b(_e,$)>=0)break;g[c]=_e,c=rt}g[c]=$};function o(c,d){return c<d?-1:c>d?1:0}return i})}),aI=zi((e,a)=>{var i=sI();i.default&&(i=i.default),a.exports=o,a.exports.default=o;function o($,rt,_e){rt=rt||1;for(var st,ut,gt,yt,Pt=0;Pt<$[0].length;Pt++){var wt=$[0][Pt];(!Pt||wt[0]<st)&&(st=wt[0]),(!Pt||wt[1]<ut)&&(ut=wt[1]),(!Pt||wt[0]>gt)&&(gt=wt[0]),(!Pt||wt[1]>yt)&&(yt=wt[1])}var Ct=gt-st,At=yt-ut,Tt=Math.min(Ct,At),kt=Tt/2;if(Tt===0){var It=[st,ut];return It.distance=0,It}for(var Lt=new i(void 0,c),Ft=st;Ft<gt;Ft+=Tt)for(var Nt=ut;Nt<yt;Nt+=Tt)Lt.push(new d(Ft+kt,Nt+kt,kt,$));var Ht=b($),Gr=new d(st+Ct/2,ut+At/2,0,$);Gr.d>Ht.d&&(Ht=Gr);for(var hs=Lt.length;Lt.length;){var _s=Lt.pop();_s.d>Ht.d&&(Ht=_s,_e&&console.log("found best %d after %d probes",Math.round(1e4*_s.d)/1e4,hs)),!(_s.max-Ht.d<=rt)&&(kt=_s.h/2,Lt.push(new d(_s.x-kt,_s.y-kt,kt,$)),Lt.push(new d(_s.x+kt,_s.y-kt,kt,$)),Lt.push(new d(_s.x-kt,_s.y+kt,kt,$)),Lt.push(new d(_s.x+kt,_s.y+kt,kt,$)),hs+=4)}_e&&(console.log("num probes: "+hs),console.log("best distance: "+Ht.d));var hn=[Ht.x,Ht.y];return hn.distance=Ht.d,hn}function c($,rt){return rt.max-$.max}function d($,rt,_e,st){this.x=$,this.y=rt,this.h=_e,this.d=g($,rt,st),this.max=this.d+this.h*Math.SQRT2}function g($,rt,_e){for(var st=!1,ut=1/0,gt=0;gt<_e.length;gt++)for(var yt=_e[gt],Pt=0,wt=yt.length,Ct=wt-1;Pt<wt;Ct=Pt++){var At=yt[Pt],Tt=yt[Ct];At[1]>rt!=Tt[1]>rt&&$<(Tt[0]-At[0])*(rt-At[1])/(Tt[1]-At[1])+At[0]&&(st=!st),ut=Math.min(ut,j($,rt,At,Tt))}return ut===0?0:(st?1:-1)*Math.sqrt(ut)}function b($){for(var rt=0,_e=0,st=0,ut=$[0],gt=0,yt=ut.length,Pt=yt-1;gt<yt;Pt=gt++){var wt=ut[gt],Ct=ut[Pt],At=wt[0]*Ct[1]-Ct[0]*wt[1];_e+=(wt[0]+Ct[0])*At,st+=(wt[1]+Ct[1])*At,rt+=At*3}return rt===0?new d(ut[0][0],ut[0][1],0,$):new d(_e/rt,st/rt,0,$)}function j($,rt,_e,st){var ut=_e[0],gt=_e[1],yt=st[0]-ut,Pt=st[1]-gt;if(yt!==0||Pt!==0){var wt=(($-ut)*yt+(rt-gt)*Pt)/(yt*yt+Pt*Pt);wt>1?(ut=st[0],gt=st[1]):wt>0&&(ut+=yt*wt,gt+=Pt*wt)}return yt=$-ut,Pt=rt-gt,yt*yt+Pt*Pt}}),oR=zi((e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;function i(o){if(o===null||o===!0||o===!1)return NaN;var c=Number(o);return isNaN(c)?c:c<0?Math.ceil(c):Math.floor(c)}a.exports=e.default}),lR=zi((e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;function i(o){var c=new Date(Date.UTC(o.getFullYear(),o.getMonth(),o.getDate(),o.getHours(),o.getMinutes(),o.getSeconds(),o.getMilliseconds()));return c.setUTCFullYear(o.getFullYear()),o.getTime()-c.getTime()}a.exports=e.default}),vR=zi(e=>{(function(){var a=function(){this.init()};a.prototype={init:function(){var _e=this||i;return _e._counter=1e3,_e._html5AudioPool=[],_e.html5PoolSize=10,_e._codecs={},_e._howls=[],_e._muted=!1,_e._volume=1,_e._canPlayEvent="canplaythrough",_e._navigator=typeof window<"u"&&window.navigator?window.navigator:null,_e.masterGain=null,_e.noAudio=!1,_e.usingWebAudio=!0,_e.autoSuspend=!0,_e.ctx=null,_e.autoUnlock=!0,_e._setup(),_e},volume:function(_e){var st=this||i;if(_e=parseFloat(_e),st.ctx||rt(),typeof _e<"u"&&_e>=0&&_e<=1){if(st._volume=_e,st._muted)return st;st.usingWebAudio&&st.masterGain.gain.setValueAtTime(_e,i.ctx.currentTime);for(var ut=0;ut<st._howls.length;ut++)if(!st._howls[ut]._webAudio)for(var gt=st._howls[ut]._getSoundIds(),yt=0;yt<gt.length;yt++){var Pt=st._howls[ut]._soundById(gt[yt]);Pt&&Pt._node&&(Pt._node.volume=Pt._volume*_e)}return st}return st._volume},mute:function(_e){var st=this||i;st.ctx||rt(),st._muted=_e,st.usingWebAudio&&st.masterGain.gain.setValueAtTime(_e?0:st._volume,i.ctx.currentTime);for(var ut=0;ut<st._howls.length;ut++)if(!st._howls[ut]._webAudio)for(var gt=st._howls[ut]._getSoundIds(),yt=0;yt<gt.length;yt++){var Pt=st._howls[ut]._soundById(gt[yt]);Pt&&Pt._node&&(Pt._node.muted=_e?!0:Pt._muted)}return st},stop:function(){for(var _e=this||i,st=0;st<_e._howls.length;st++)_e._howls[st].stop();return _e},unload:function(){for(var _e=this||i,st=_e._howls.length-1;st>=0;st--)_e._howls[st].unload();return _e.usingWebAudio&&_e.ctx&&typeof _e.ctx.close<"u"&&(_e.ctx.close(),_e.ctx=null,rt()),_e},codecs:function(_e){return(this||i)._codecs[_e.replace(/^x-/,"")]},_setup:function(){var _e=this||i;if(_e.state=_e.ctx&&_e.ctx.state||"suspended",_e._autoSuspend(),!_e.usingWebAudio)if(typeof Audio<"u")try{var st=new Audio;typeof st.oncanplaythrough>"u"&&(_e._canPlayEvent="canplay")}catch{_e.noAudio=!0}else _e.noAudio=!0;try{var st=new Audio;st.muted&&(_e.noAudio=!0)}catch{}return _e.noAudio||_e._setupCodecs(),_e},_setupCodecs:function(){var _e=this||i,st=null;try{st=typeof Audio<"u"?new Audio:null}catch{return _e}if(!st||typeof st.canPlayType!="function")return _e;var ut=st.canPlayType("audio/mpeg;").replace(/^no$/,""),gt=_e._navigator?_e._navigator.userAgent:"",yt=gt.match(/OPR\/([0-6].)/g),Pt=yt&&parseInt(yt[0].split("/")[1],10)<33,wt=gt.indexOf("Safari")!==-1&&gt.indexOf("Chrome")===-1,Ct=gt.match(/Version\/(.*?) /),At=wt&&Ct&&parseInt(Ct[1],10)<15;return _e._codecs={mp3:!!(!Pt&&(ut||st.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!ut,opus:!!st.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!st.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!st.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(st.canPlayType('audio/wav; codecs="1"')||st.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!st.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!st.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(st.canPlayType("audio/x-m4a;")||st.canPlayType("audio/m4a;")||st.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(st.canPlayType("audio/x-m4b;")||st.canPlayType("audio/m4b;")||st.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(st.canPlayType("audio/x-mp4;")||st.canPlayType("audio/mp4;")||st.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!At&&st.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!At&&st.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!st.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(st.canPlayType("audio/x-flac;")||st.canPlayType("audio/flac;")).replace(/^no$/,"")},_e},_unlockAudio:function(){var _e=this||i;if(!(_e._audioUnlocked||!_e.ctx)){_e._audioUnlocked=!1,_e.autoUnlock=!1,!_e._mobileUnloaded&&_e.ctx.sampleRate!==44100&&(_e._mobileUnloaded=!0,_e.unload()),_e._scratchBuffer=_e.ctx.createBuffer(1,1,22050);var st=function(ut){for(;_e._html5AudioPool.length<_e.html5PoolSize;)try{var gt=new Audio;gt._unlocked=!0,_e._releaseHtml5Audio(gt)}catch{_e.noAudio=!0;break}for(var yt=0;yt<_e._howls.length;yt++)if(!_e._howls[yt]._webAudio)for(var Pt=_e._howls[yt]._getSoundIds(),wt=0;wt<Pt.length;wt++){var Ct=_e._howls[yt]._soundById(Pt[wt]);Ct&&Ct._node&&!Ct._node._unlocked&&(Ct._node._unlocked=!0,Ct._node.load())}_e._autoResume();var At=_e.ctx.createBufferSource();At.buffer=_e._scratchBuffer,At.connect(_e.ctx.destination),typeof At.start>"u"?At.noteOn(0):At.start(0),typeof _e.ctx.resume=="function"&&_e.ctx.resume(),At.onended=function(){At.disconnect(0),_e._audioUnlocked=!0,document.removeEventListener("touchstart",st,!0),document.removeEventListener("touchend",st,!0),document.removeEventListener("click",st,!0),document.removeEventListener("keydown",st,!0);for(var Tt=0;Tt<_e._howls.length;Tt++)_e._howls[Tt]._emit("unlock")}};return document.addEventListener("touchstart",st,!0),document.addEventListener("touchend",st,!0),document.addEventListener("click",st,!0),document.addEventListener("keydown",st,!0),_e}},_obtainHtml5Audio:function(){var _e=this||i;if(_e._html5AudioPool.length)return _e._html5AudioPool.pop();var st=new Audio().play();return st&&typeof Promise<"u"&&(st instanceof Promise||typeof st.then=="function")&&st.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(_e){var st=this||i;return _e._unlocked&&st._html5AudioPool.push(_e),st},_autoSuspend:function(){var _e=this;if(!(!_e.autoSuspend||!_e.ctx||typeof _e.ctx.suspend>"u"||!i.usingWebAudio)){for(var st=0;st<_e._howls.length;st++)if(_e._howls[st]._webAudio){for(var ut=0;ut<_e._howls[st]._sounds.length;ut++)if(!_e._howls[st]._sounds[ut]._paused)return _e}return _e._suspendTimer&&clearTimeout(_e._suspendTimer),_e._suspendTimer=setTimeout(function(){if(_e.autoSuspend){_e._suspendTimer=null,_e.state="suspending";var gt=function(){_e.state="suspended",_e._resumeAfterSuspend&&(delete _e._resumeAfterSuspend,_e._autoResume())};_e.ctx.suspend().then(gt,gt)}},3e4),_e}},_autoResume:function(){var _e=this;if(!(!_e.ctx||typeof _e.ctx.resume>"u"||!i.usingWebAudio))return _e.state==="running"&&_e.ctx.state!=="interrupted"&&_e._suspendTimer?(clearTimeout(_e._suspendTimer),_e._suspendTimer=null):_e.state==="suspended"||_e.state==="running"&&_e.ctx.state==="interrupted"?(_e.ctx.resume().then(function(){_e.state="running";for(var st=0;st<_e._howls.length;st++)_e._howls[st]._emit("resume")}),_e._suspendTimer&&(clearTimeout(_e._suspendTimer),_e._suspendTimer=null)):_e.state==="suspending"&&(_e._resumeAfterSuspend=!0),_e}};var i=new a,o=function(_e){var st=this;if(!_e.src||_e.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}st.init(_e)};o.prototype={init:function(_e){var st=this;return i.ctx||rt(),st._autoplay=_e.autoplay||!1,st._format=typeof _e.format!="string"?_e.format:[_e.format],st._html5=_e.html5||!1,st._muted=_e.mute||!1,st._loop=_e.loop||!1,st._pool=_e.pool||5,st._preload=typeof _e.preload=="boolean"||_e.preload==="metadata"?_e.preload:!0,st._rate=_e.rate||1,st._sprite=_e.sprite||{},st._src=typeof _e.src!="string"?_e.src:[_e.src],st._volume=_e.volume!==void 0?_e.volume:1,st._xhr={method:_e.xhr&&_e.xhr.method?_e.xhr.method:"GET",headers:_e.xhr&&_e.xhr.headers?_e.xhr.headers:null,withCredentials:_e.xhr&&_e.xhr.withCredentials?_e.xhr.withCredentials:!1},st._duration=0,st._state="unloaded",st._sounds=[],st._endTimers={},st._queue=[],st._playLock=!1,st._onend=_e.onend?[{fn:_e.onend}]:[],st._onfade=_e.onfade?[{fn:_e.onfade}]:[],st._onload=_e.onload?[{fn:_e.onload}]:[],st._onloaderror=_e.onloaderror?[{fn:_e.onloaderror}]:[],st._onplayerror=_e.onplayerror?[{fn:_e.onplayerror}]:[],st._onpause=_e.onpause?[{fn:_e.onpause}]:[],st._onplay=_e.onplay?[{fn:_e.onplay}]:[],st._onstop=_e.onstop?[{fn:_e.onstop}]:[],st._onmute=_e.onmute?[{fn:_e.onmute}]:[],st._onvolume=_e.onvolume?[{fn:_e.onvolume}]:[],st._onrate=_e.onrate?[{fn:_e.onrate}]:[],st._onseek=_e.onseek?[{fn:_e.onseek}]:[],st._onunlock=_e.onunlock?[{fn:_e.onunlock}]:[],st._onresume=[],st._webAudio=i.usingWebAudio&&!st._html5,typeof i.ctx<"u"&&i.ctx&&i.autoUnlock&&i._unlockAudio(),i._howls.push(st),st._autoplay&&st._queue.push({event:"play",action:function(){st.play()}}),st._preload&&st._preload!=="none"&&st.load(),st},load:function(){var _e=this,st=null;if(i.noAudio){_e._emit("loaderror",null,"No audio support.");return}typeof _e._src=="string"&&(_e._src=[_e._src]);for(var ut=0;ut<_e._src.length;ut++){var gt,yt;if(_e._format&&_e._format[ut])gt=_e._format[ut];else{if(yt=_e._src[ut],typeof yt!="string"){_e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}gt=/^data:audio\/([^;,]+);/i.exec(yt),gt||(gt=/\.([^.]+)$/.exec(yt.split("?",1)[0])),gt&&(gt=gt[1].toLowerCase())}if(gt||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),gt&&i.codecs(gt)){st=_e._src[ut];break}}if(!st){_e._emit("loaderror",null,"No codec support for selected audio sources.");return}return _e._src=st,_e._state="loading",window.location.protocol==="https:"&&st.slice(0,5)==="http:"&&(_e._html5=!0,_e._webAudio=!1),new c(_e),_e._webAudio&&g(_e),_e},play:function(_e,st){var ut=this,gt=null;if(typeof _e=="number")gt=_e,_e=null;else{if(typeof _e=="string"&&ut._state==="loaded"&&!ut._sprite[_e])return null;if(typeof _e>"u"&&(_e="__default",!ut._playLock)){for(var yt=0,Pt=0;Pt<ut._sounds.length;Pt++)ut._sounds[Pt]._paused&&!ut._sounds[Pt]._ended&&(yt++,gt=ut._sounds[Pt]._id);yt===1?_e=null:gt=null}}var wt=gt?ut._soundById(gt):ut._inactiveSound();if(!wt)return null;if(gt&&!_e&&(_e=wt._sprite||"__default"),ut._state!=="loaded"){wt._sprite=_e,wt._ended=!1;var Ct=wt._id;return ut._queue.push({event:"play",action:function(){ut.play(Ct)}}),Ct}if(gt&&!wt._paused)return st||ut._loadQueue("play"),wt._id;ut._webAudio&&i._autoResume();var At=Math.max(0,wt._seek>0?wt._seek:ut._sprite[_e][0]/1e3),Tt=Math.max(0,(ut._sprite[_e][0]+ut._sprite[_e][1])/1e3-At),kt=Tt*1e3/Math.abs(wt._rate),It=ut._sprite[_e][0]/1e3,Lt=(ut._sprite[_e][0]+ut._sprite[_e][1])/1e3;wt._sprite=_e,wt._ended=!1;var Ft=function(){wt._paused=!1,wt._seek=At,wt._start=It,wt._stop=Lt,wt._loop=!!(wt._loop||ut._sprite[_e][2])};if(At>=Lt){ut._ended(wt);return}var Nt=wt._node;if(ut._webAudio){var Ht=function(){ut._playLock=!1,Ft(),ut._refreshBuffer(wt);var hn=wt._muted||ut._muted?0:wt._volume;Nt.gain.setValueAtTime(hn,i.ctx.currentTime),wt._playStart=i.ctx.currentTime,typeof Nt.bufferSource.start>"u"?wt._loop?Nt.bufferSource.noteGrainOn(0,At,86400):Nt.bufferSource.noteGrainOn(0,At,Tt):wt._loop?Nt.bufferSource.start(0,At,86400):Nt.bufferSource.start(0,At,Tt),kt!==1/0&&(ut._endTimers[wt._id]=setTimeout(ut._ended.bind(ut,wt),kt)),st||setTimeout(function(){ut._emit("play",wt._id),ut._loadQueue()},0)};i.state==="running"&&i.ctx.state!=="interrupted"?Ht():(ut._playLock=!0,ut.once("resume",Ht),ut._clearTimer(wt._id))}else{var Gr=function(){Nt.currentTime=At,Nt.muted=wt._muted||ut._muted||i._muted||Nt.muted,Nt.volume=wt._volume*i.volume(),Nt.playbackRate=wt._rate;try{var hn=Nt.play();if(hn&&typeof Promise<"u"&&(hn instanceof Promise||typeof hn.then=="function")?(ut._playLock=!0,Ft(),hn.then(function(){ut._playLock=!1,Nt._unlocked=!0,st?ut._loadQueue():ut._emit("play",wt._id)}).catch(function(){ut._playLock=!1,ut._emit("playerror",wt._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),wt._ended=!0,wt._paused=!0})):st||(ut._playLock=!1,Ft(),ut._emit("play",wt._id)),Nt.playbackRate=wt._rate,Nt.paused){ut._emit("playerror",wt._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}_e!=="__default"||wt._loop?ut._endTimers[wt._id]=setTimeout(ut._ended.bind(ut,wt),kt):(ut._endTimers[wt._id]=function(){ut._ended(wt),Nt.removeEventListener("ended",ut._endTimers[wt._id],!1)},Nt.addEventListener("ended",ut._endTimers[wt._id],!1))}catch(Qn){ut._emit("playerror",wt._id,Qn)}};Nt.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(Nt.src=ut._src,Nt.load());var hs=window&&window.ejecta||!Nt.readyState&&i._navigator.isCocoonJS;if(Nt.readyState>=3||hs)Gr();else{ut._playLock=!0,ut._state="loading";var _s=function(){ut._state="loaded",Gr(),Nt.removeEventListener(i._canPlayEvent,_s,!1)};Nt.addEventListener(i._canPlayEvent,_s,!1),ut._clearTimer(wt._id)}}return wt._id},pause:function(_e){var st=this;if(st._state!=="loaded"||st._playLock)return st._queue.push({event:"pause",action:function(){st.pause(_e)}}),st;for(var ut=st._getSoundIds(_e),gt=0;gt<ut.length;gt++){st._clearTimer(ut[gt]);var yt=st._soundById(ut[gt]);if(yt&&!yt._paused&&(yt._seek=st.seek(ut[gt]),yt._rateSeek=0,yt._paused=!0,st._stopFade(ut[gt]),yt._node))if(st._webAudio){if(!yt._node.bufferSource)continue;typeof yt._node.bufferSource.stop>"u"?yt._node.bufferSource.noteOff(0):yt._node.bufferSource.stop(0),st._cleanBuffer(yt._node)}else(!isNaN(yt._node.duration)||yt._node.duration===1/0)&&yt._node.pause();arguments[1]||st._emit("pause",yt?yt._id:null)}return st},stop:function(_e,st){var ut=this;if(ut._state!=="loaded"||ut._playLock)return ut._queue.push({event:"stop",action:function(){ut.stop(_e)}}),ut;for(var gt=ut._getSoundIds(_e),yt=0;yt<gt.length;yt++){ut._clearTimer(gt[yt]);var Pt=ut._soundById(gt[yt]);Pt&&(Pt._seek=Pt._start||0,Pt._rateSeek=0,Pt._paused=!0,Pt._ended=!0,ut._stopFade(gt[yt]),Pt._node&&(ut._webAudio?Pt._node.bufferSource&&(typeof Pt._node.bufferSource.stop>"u"?Pt._node.bufferSource.noteOff(0):Pt._node.bufferSource.stop(0),ut._cleanBuffer(Pt._node)):(!isNaN(Pt._node.duration)||Pt._node.duration===1/0)&&(Pt._node.currentTime=Pt._start||0,Pt._node.pause(),Pt._node.duration===1/0&&ut._clearSound(Pt._node))),st||ut._emit("stop",Pt._id))}return ut},mute:function(_e,st){var ut=this;if(ut._state!=="loaded"||ut._playLock)return ut._queue.push({event:"mute",action:function(){ut.mute(_e,st)}}),ut;if(typeof st>"u")if(typeof _e=="boolean")ut._muted=_e;else return ut._muted;for(var gt=ut._getSoundIds(st),yt=0;yt<gt.length;yt++){var Pt=ut._soundById(gt[yt]);Pt&&(Pt._muted=_e,Pt._interval&&ut._stopFade(Pt._id),ut._webAudio&&Pt._node?Pt._node.gain.setValueAtTime(_e?0:Pt._volume,i.ctx.currentTime):Pt._node&&(Pt._node.muted=i._muted?!0:_e),ut._emit("mute",Pt._id))}return ut},volume:function(){var _e=this,st=arguments,ut,gt;if(st.length===0)return _e._volume;if(st.length===1||st.length===2&&typeof st[1]>"u"){var yt=_e._getSoundIds(),Pt=yt.indexOf(st[0]);Pt>=0?gt=parseInt(st[0],10):ut=parseFloat(st[0])}else st.length>=2&&(ut=parseFloat(st[0]),gt=parseInt(st[1],10));var wt;if(typeof ut<"u"&&ut>=0&&ut<=1){if(_e._state!=="loaded"||_e._playLock)return _e._queue.push({event:"volume",action:function(){_e.volume.apply(_e,st)}}),_e;typeof gt>"u"&&(_e._volume=ut),gt=_e._getSoundIds(gt);for(var Ct=0;Ct<gt.length;Ct++)wt=_e._soundById(gt[Ct]),wt&&(wt._volume=ut,st[2]||_e._stopFade(gt[Ct]),_e._webAudio&&wt._node&&!wt._muted?wt._node.gain.setValueAtTime(ut,i.ctx.currentTime):wt._node&&!wt._muted&&(wt._node.volume=ut*i.volume()),_e._emit("volume",wt._id))}else return wt=gt?_e._soundById(gt):_e._sounds[0],wt?wt._volume:0;return _e},fade:function(_e,st,ut,gt){var yt=this;if(yt._state!=="loaded"||yt._playLock)return yt._queue.push({event:"fade",action:function(){yt.fade(_e,st,ut,gt)}}),yt;_e=Math.min(Math.max(0,parseFloat(_e)),1),st=Math.min(Math.max(0,parseFloat(st)),1),ut=parseFloat(ut),yt.volume(_e,gt);for(var Pt=yt._getSoundIds(gt),wt=0;wt<Pt.length;wt++){var Ct=yt._soundById(Pt[wt]);if(Ct){if(gt||yt._stopFade(Pt[wt]),yt._webAudio&&!Ct._muted){var At=i.ctx.currentTime,Tt=At+ut/1e3;Ct._volume=_e,Ct._node.gain.setValueAtTime(_e,At),Ct._node.gain.linearRampToValueAtTime(st,Tt)}yt._startFadeInterval(Ct,_e,st,ut,Pt[wt],typeof gt>"u")}}return yt},_startFadeInterval:function(_e,st,ut,gt,yt,Pt){var wt=this,Ct=st,At=ut-st,Tt=Math.abs(At/.01),kt=Math.max(4,Tt>0?gt/Tt:gt),It=Date.now();_e._fadeTo=ut,_e._interval=setInterval(function(){var Lt=(Date.now()-It)/gt;It=Date.now(),Ct+=At*Lt,Ct=Math.round(Ct*100)/100,At<0?Ct=Math.max(ut,Ct):Ct=Math.min(ut,Ct),wt._webAudio?_e._volume=Ct:wt.volume(Ct,_e._id,!0),Pt&&(wt._volume=Ct),(ut<st&&Ct<=ut||ut>st&&Ct>=ut)&&(clearInterval(_e._interval),_e._interval=null,_e._fadeTo=null,wt.volume(ut,_e._id),wt._emit("fade",_e._id))},kt)},_stopFade:function(_e){var st=this,ut=st._soundById(_e);return ut&&ut._interval&&(st._webAudio&&ut._node.gain.cancelScheduledValues(i.ctx.currentTime),clearInterval(ut._interval),ut._interval=null,st.volume(ut._fadeTo,_e),ut._fadeTo=null,st._emit("fade",_e)),st},loop:function(){var _e=this,st=arguments,ut,gt,yt;if(st.length===0)return _e._loop;if(st.length===1)if(typeof st[0]=="boolean")ut=st[0],_e._loop=ut;else return yt=_e._soundById(parseInt(st[0],10)),yt?yt._loop:!1;else st.length===2&&(ut=st[0],gt=parseInt(st[1],10));for(var Pt=_e._getSoundIds(gt),wt=0;wt<Pt.length;wt++)yt=_e._soundById(Pt[wt]),yt&&(yt._loop=ut,_e._webAudio&&yt._node&&yt._node.bufferSource&&(yt._node.bufferSource.loop=ut,ut&&(yt._node.bufferSource.loopStart=yt._start||0,yt._node.bufferSource.loopEnd=yt._stop,_e.playing(Pt[wt])&&(_e.pause(Pt[wt],!0),_e.play(Pt[wt],!0)))));return _e},rate:function(){var _e=this,st=arguments,ut,gt;if(st.length===0)gt=_e._sounds[0]._id;else if(st.length===1){var yt=_e._getSoundIds(),Pt=yt.indexOf(st[0]);Pt>=0?gt=parseInt(st[0],10):ut=parseFloat(st[0])}else st.length===2&&(ut=parseFloat(st[0]),gt=parseInt(st[1],10));var wt;if(typeof ut=="number"){if(_e._state!=="loaded"||_e._playLock)return _e._queue.push({event:"rate",action:function(){_e.rate.apply(_e,st)}}),_e;typeof gt>"u"&&(_e._rate=ut),gt=_e._getSoundIds(gt);for(var Ct=0;Ct<gt.length;Ct++)if(wt=_e._soundById(gt[Ct]),wt){_e.playing(gt[Ct])&&(wt._rateSeek=_e.seek(gt[Ct]),wt._playStart=_e._webAudio?i.ctx.currentTime:wt._playStart),wt._rate=ut,_e._webAudio&&wt._node&&wt._node.bufferSource?wt._node.bufferSource.playbackRate.setValueAtTime(ut,i.ctx.currentTime):wt._node&&(wt._node.playbackRate=ut);var At=_e.seek(gt[Ct]),Tt=(_e._sprite[wt._sprite][0]+_e._sprite[wt._sprite][1])/1e3-At,kt=Tt*1e3/Math.abs(wt._rate);(_e._endTimers[gt[Ct]]||!wt._paused)&&(_e._clearTimer(gt[Ct]),_e._endTimers[gt[Ct]]=setTimeout(_e._ended.bind(_e,wt),kt)),_e._emit("rate",wt._id)}}else return wt=_e._soundById(gt),wt?wt._rate:_e._rate;return _e},seek:function(){var _e=this,st=arguments,ut,gt;if(st.length===0)_e._sounds.length&&(gt=_e._sounds[0]._id);else if(st.length===1){var yt=_e._getSoundIds(),Pt=yt.indexOf(st[0]);Pt>=0?gt=parseInt(st[0],10):_e._sounds.length&&(gt=_e._sounds[0]._id,ut=parseFloat(st[0]))}else st.length===2&&(ut=parseFloat(st[0]),gt=parseInt(st[1],10));if(typeof gt>"u")return 0;if(typeof ut=="number"&&(_e._state!=="loaded"||_e._playLock))return _e._queue.push({event:"seek",action:function(){_e.seek.apply(_e,st)}}),_e;var wt=_e._soundById(gt);if(wt)if(typeof ut=="number"&&ut>=0){var Ct=_e.playing(gt);Ct&&_e.pause(gt,!0),wt._seek=ut,wt._ended=!1,_e._clearTimer(gt),!_e._webAudio&&wt._node&&!isNaN(wt._node.duration)&&(wt._node.currentTime=ut);var At=function(){Ct&&_e.play(gt,!0),_e._emit("seek",gt)};if(Ct&&!_e._webAudio){var Tt=function(){_e._playLock?setTimeout(Tt,0):At()};setTimeout(Tt,0)}else At()}else if(_e._webAudio){var kt=_e.playing(gt)?i.ctx.currentTime-wt._playStart:0,It=wt._rateSeek?wt._rateSeek-wt._seek:0;return wt._seek+(It+kt*Math.abs(wt._rate))}else return wt._node.currentTime;return _e},playing:function(_e){var st=this;if(typeof _e=="number"){var ut=st._soundById(_e);return ut?!ut._paused:!1}for(var gt=0;gt<st._sounds.length;gt++)if(!st._sounds[gt]._paused)return!0;return!1},duration:function(_e){var st=this,ut=st._duration,gt=st._soundById(_e);return gt&&(ut=st._sprite[gt._sprite][1]/1e3),ut},state:function(){return this._state},unload:function(){for(var _e=this,st=_e._sounds,ut=0;ut<st.length;ut++)st[ut]._paused||_e.stop(st[ut]._id),_e._webAudio||(_e._clearSound(st[ut]._node),st[ut]._node.removeEventListener("error",st[ut]._errorFn,!1),st[ut]._node.removeEventListener(i._canPlayEvent,st[ut]._loadFn,!1),st[ut]._node.removeEventListener("ended",st[ut]._endFn,!1),i._releaseHtml5Audio(st[ut]._node)),delete st[ut]._node,_e._clearTimer(st[ut]._id);var gt=i._howls.indexOf(_e);gt>=0&&i._howls.splice(gt,1);var yt=!0;for(ut=0;ut<i._howls.length;ut++)if(i._howls[ut]._src===_e._src||_e._src.indexOf(i._howls[ut]._src)>=0){yt=!1;break}return d&&yt&&delete d[_e._src],i.noAudio=!1,_e._state="unloaded",_e._sounds=[],_e=null,null},on:function(_e,st,ut,gt){var yt=this,Pt=yt["_on"+_e];return typeof st=="function"&&Pt.push(gt?{id:ut,fn:st,once:gt}:{id:ut,fn:st}),yt},off:function(_e,st,ut){var gt=this,yt=gt["_on"+_e],Pt=0;if(typeof st=="number"&&(ut=st,st=null),st||ut)for(Pt=0;Pt<yt.length;Pt++){var wt=ut===yt[Pt].id;if(st===yt[Pt].fn&&wt||!st&&wt){yt.splice(Pt,1);break}}else if(_e)gt["_on"+_e]=[];else{var Ct=Object.keys(gt);for(Pt=0;Pt<Ct.length;Pt++)Ct[Pt].indexOf("_on")===0&&Array.isArray(gt[Ct[Pt]])&&(gt[Ct[Pt]]=[])}return gt},once:function(_e,st,ut){var gt=this;return gt.on(_e,st,ut,1),gt},_emit:function(_e,st,ut){for(var gt=this,yt=gt["_on"+_e],Pt=yt.length-1;Pt>=0;Pt--)(!yt[Pt].id||yt[Pt].id===st||_e==="load")&&(setTimeout((function(wt){wt.call(this,st,ut)}).bind(gt,yt[Pt].fn),0),yt[Pt].once&&gt.off(_e,yt[Pt].fn,yt[Pt].id));return gt._loadQueue(_e),gt},_loadQueue:function(_e){var st=this;if(st._queue.length>0){var ut=st._queue[0];ut.event===_e&&(st._queue.shift(),st._loadQueue()),_e||ut.action()}return st},_ended:function(_e){var st=this,ut=_e._sprite;if(!st._webAudio&&_e._node&&!_e._node.paused&&!_e._node.ended&&_e._node.currentTime<_e._stop)return setTimeout(st._ended.bind(st,_e),100),st;var gt=!!(_e._loop||st._sprite[ut][2]);if(st._emit("end",_e._id),!st._webAudio&&gt&&st.stop(_e._id,!0).play(_e._id),st._webAudio&&gt){st._emit("play",_e._id),_e._seek=_e._start||0,_e._rateSeek=0,_e._playStart=i.ctx.currentTime;var yt=(_e._stop-_e._start)*1e3/Math.abs(_e._rate);st._endTimers[_e._id]=setTimeout(st._ended.bind(st,_e),yt)}return st._webAudio&&!gt&&(_e._paused=!0,_e._ended=!0,_e._seek=_e._start||0,_e._rateSeek=0,st._clearTimer(_e._id),st._cleanBuffer(_e._node),i._autoSuspend()),!st._webAudio&&!gt&&st.stop(_e._id,!0),st},_clearTimer:function(_e){var st=this;if(st._endTimers[_e]){if(typeof st._endTimers[_e]!="function")clearTimeout(st._endTimers[_e]);else{var ut=st._soundById(_e);ut&&ut._node&&ut._node.removeEventListener("ended",st._endTimers[_e],!1)}delete st._endTimers[_e]}return st},_soundById:function(_e){for(var st=this,ut=0;ut<st._sounds.length;ut++)if(_e===st._sounds[ut]._id)return st._sounds[ut];return null},_inactiveSound:function(){var _e=this;_e._drain();for(var st=0;st<_e._sounds.length;st++)if(_e._sounds[st]._ended)return _e._sounds[st].reset();return new c(_e)},_drain:function(){var _e=this,st=_e._pool,ut=0,gt=0;if(!(_e._sounds.length<st)){for(gt=0;gt<_e._sounds.length;gt++)_e._sounds[gt]._ended&&ut++;for(gt=_e._sounds.length-1;gt>=0;gt--){if(ut<=st)return;_e._sounds[gt]._ended&&(_e._webAudio&&_e._sounds[gt]._node&&_e._sounds[gt]._node.disconnect(0),_e._sounds.splice(gt,1),ut--)}}},_getSoundIds:function(_e){var st=this;if(typeof _e>"u"){for(var ut=[],gt=0;gt<st._sounds.length;gt++)ut.push(st._sounds[gt]._id);return ut}else return[_e]},_refreshBuffer:function(_e){var st=this;return _e._node.bufferSource=i.ctx.createBufferSource(),_e._node.bufferSource.buffer=d[st._src],_e._panner?_e._node.bufferSource.connect(_e._panner):_e._node.bufferSource.connect(_e._node),_e._node.bufferSource.loop=_e._loop,_e._loop&&(_e._node.bufferSource.loopStart=_e._start||0,_e._node.bufferSource.loopEnd=_e._stop||0),_e._node.bufferSource.playbackRate.setValueAtTime(_e._rate,i.ctx.currentTime),st},_cleanBuffer:function(_e){var st=this,ut=i._navigator&&i._navigator.vendor.indexOf("Apple")>=0;if(i._scratchBuffer&&_e.bufferSource&&(_e.bufferSource.onended=null,_e.bufferSource.disconnect(0),ut))try{_e.bufferSource.buffer=i._scratchBuffer}catch{}return _e.bufferSource=null,st},_clearSound:function(_e){var st=/MSIE |Trident\//.test(i._navigator&&i._navigator.userAgent);st||(_e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var c=function(_e){this._parent=_e,this.init()};c.prototype={init:function(){var _e=this,st=_e._parent;return _e._muted=st._muted,_e._loop=st._loop,_e._volume=st._volume,_e._rate=st._rate,_e._seek=0,_e._paused=!0,_e._ended=!0,_e._sprite="__default",_e._id=++i._counter,st._sounds.push(_e),_e.create(),_e},create:function(){var _e=this,st=_e._parent,ut=i._muted||_e._muted||_e._parent._muted?0:_e._volume;return st._webAudio?(_e._node=typeof i.ctx.createGain>"u"?i.ctx.createGainNode():i.ctx.createGain(),_e._node.gain.setValueAtTime(ut,i.ctx.currentTime),_e._node.paused=!0,_e._node.connect(i.masterGain)):i.noAudio||(_e._node=i._obtainHtml5Audio(),_e._errorFn=_e._errorListener.bind(_e),_e._node.addEventListener("error",_e._errorFn,!1),_e._loadFn=_e._loadListener.bind(_e),_e._node.addEventListener(i._canPlayEvent,_e._loadFn,!1),_e._endFn=_e._endListener.bind(_e),_e._node.addEventListener("ended",_e._endFn,!1),_e._node.src=st._src,_e._node.preload=st._preload===!0?"auto":st._preload,_e._node.volume=ut*i.volume(),_e._node.load()),_e},reset:function(){var _e=this,st=_e._parent;return _e._muted=st._muted,_e._loop=st._loop,_e._volume=st._volume,_e._rate=st._rate,_e._seek=0,_e._rateSeek=0,_e._paused=!0,_e._ended=!0,_e._sprite="__default",_e._id=++i._counter,_e},_errorListener:function(){var _e=this;_e._parent._emit("loaderror",_e._id,_e._node.error?_e._node.error.code:0),_e._node.removeEventListener("error",_e._errorFn,!1)},_loadListener:function(){var _e=this,st=_e._parent;st._duration=Math.ceil(_e._node.duration*10)/10,Object.keys(st._sprite).length===0&&(st._sprite={__default:[0,st._duration*1e3]}),st._state!=="loaded"&&(st._state="loaded",st._emit("load"),st._loadQueue()),_e._node.removeEventListener(i._canPlayEvent,_e._loadFn,!1)},_endListener:function(){var _e=this,st=_e._parent;st._duration===1/0&&(st._duration=Math.ceil(_e._node.duration*10)/10,st._sprite.__default[1]===1/0&&(st._sprite.__default[1]=st._duration*1e3),st._ended(_e)),_e._node.removeEventListener("ended",_e._endFn,!1)}};var d={},g=function(_e){var st=_e._src;if(d[st]){_e._duration=d[st].duration,$(_e);return}if(/^data:[^;]+;base64,/.test(st)){for(var ut=atob(st.split(",")[1]),gt=new Uint8Array(ut.length),yt=0;yt<ut.length;++yt)gt[yt]=ut.charCodeAt(yt);j(gt.buffer,_e)}else{var Pt=new XMLHttpRequest;Pt.open(_e._xhr.method,st,!0),Pt.withCredentials=_e._xhr.withCredentials,Pt.responseType="arraybuffer",_e._xhr.headers&&Object.keys(_e._xhr.headers).forEach(function(wt){Pt.setRequestHeader(wt,_e._xhr.headers[wt])}),Pt.onload=function(){var wt=(Pt.status+"")[0];if(wt!=="0"&&wt!=="2"&&wt!=="3"){_e._emit("loaderror",null,"Failed loading audio file with status: "+Pt.status+".");return}j(Pt.response,_e)},Pt.onerror=function(){_e._webAudio&&(_e._html5=!0,_e._webAudio=!1,_e._sounds=[],delete d[st],_e.load())},b(Pt)}},b=function(_e){try{_e.send()}catch{_e.onerror()}},j=function(_e,st){var ut=function(){st._emit("loaderror",null,"Decoding audio data failed.")},gt=function(yt){yt&&st._sounds.length>0?(d[st._src]=yt,$(st,yt)):ut()};typeof Promise<"u"&&i.ctx.decodeAudioData.length===1?i.ctx.decodeAudioData(_e).then(gt).catch(ut):i.ctx.decodeAudioData(_e,gt,ut)},$=function(_e,st){st&&!_e._duration&&(_e._duration=st.duration),Object.keys(_e._sprite).length===0&&(_e._sprite={__default:[0,_e._duration*1e3]}),_e._state!=="loaded"&&(_e._state="loaded",_e._emit("load"),_e._loadQueue())},rt=function(){if(i.usingWebAudio){try{typeof AudioContext<"u"?i.ctx=new AudioContext:typeof webkitAudioContext<"u"?i.ctx=new webkitAudioContext:i.usingWebAudio=!1}catch{i.usingWebAudio=!1}i.ctx||(i.usingWebAudio=!1);var _e=/iP(hone|od|ad)/.test(i._navigator&&i._navigator.platform),st=i._navigator&&i._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),ut=st?parseInt(st[1],10):null;if(_e&&ut&&ut<9){var gt=/safari/.test(i._navigator&&i._navigator.userAgent.toLowerCase());i._navigator&&!gt&&(i.usingWebAudio=!1)}i.usingWebAudio&&(i.masterGain=typeof i.ctx.createGain>"u"?i.ctx.createGainNode():i.ctx.createGain(),i.masterGain.gain.setValueAtTime(i._muted?0:i._volume,i.ctx.currentTime),i.masterGain.connect(i.ctx.destination)),i._setup()}};typeof define=="function"&&define.amd&&define([],function(){return{Howler:i,Howl:o}}),typeof e<"u"&&(e.Howler=i,e.Howl=o),typeof global<"u"?(global.HowlerGlobal=a,global.Howler=i,global.Howl=o,global.Sound=c):typeof window<"u"&&(window.HowlerGlobal=a,window.Howler=i,window.Howl=o,window.Sound=c)})(),function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(i){var o=this;if(!o.ctx||!o.ctx.listener)return o;for(var c=o._howls.length-1;c>=0;c--)o._howls[c].stereo(i);return o},HowlerGlobal.prototype.pos=function(i,o,c){var d=this;if(!d.ctx||!d.ctx.listener)return d;if(o=typeof o!="number"?d._pos[1]:o,c=typeof c!="number"?d._pos[2]:c,typeof i=="number")d._pos=[i,o,c],typeof d.ctx.listener.positionX<"u"?(d.ctx.listener.positionX.setTargetAtTime(d._pos[0],Howler.ctx.currentTime,.1),d.ctx.listener.positionY.setTargetAtTime(d._pos[1],Howler.ctx.currentTime,.1),d.ctx.listener.positionZ.setTargetAtTime(d._pos[2],Howler.ctx.currentTime,.1)):d.ctx.listener.setPosition(d._pos[0],d._pos[1],d._pos[2]);else return d._pos;return d},HowlerGlobal.prototype.orientation=function(i,o,c,d,g,b){var j=this;if(!j.ctx||!j.ctx.listener)return j;var $=j._orientation;if(o=typeof o!="number"?$[1]:o,c=typeof c!="number"?$[2]:c,d=typeof d!="number"?$[3]:d,g=typeof g!="number"?$[4]:g,b=typeof b!="number"?$[5]:b,typeof i=="number")j._orientation=[i,o,c,d,g,b],typeof j.ctx.listener.forwardX<"u"?(j.ctx.listener.forwardX.setTargetAtTime(i,Howler.ctx.currentTime,.1),j.ctx.listener.forwardY.setTargetAtTime(o,Howler.ctx.currentTime,.1),j.ctx.listener.forwardZ.setTargetAtTime(c,Howler.ctx.currentTime,.1),j.ctx.listener.upX.setTargetAtTime(d,Howler.ctx.currentTime,.1),j.ctx.listener.upY.setTargetAtTime(g,Howler.ctx.currentTime,.1),j.ctx.listener.upZ.setTargetAtTime(b,Howler.ctx.currentTime,.1)):j.ctx.listener.setOrientation(i,o,c,d,g,b);else return $;return j},Howl.prototype.init=function(i){return function(o){var c=this;return c._orientation=o.orientation||[1,0,0],c._stereo=o.stereo||null,c._pos=o.pos||null,c._pannerAttr={coneInnerAngle:typeof o.coneInnerAngle<"u"?o.coneInnerAngle:360,coneOuterAngle:typeof o.coneOuterAngle<"u"?o.coneOuterAngle:360,coneOuterGain:typeof o.coneOuterGain<"u"?o.coneOuterGain:0,distanceModel:typeof o.distanceModel<"u"?o.distanceModel:"inverse",maxDistance:typeof o.maxDistance<"u"?o.maxDistance:1e4,panningModel:typeof o.panningModel<"u"?o.panningModel:"HRTF",refDistance:typeof o.refDistance<"u"?o.refDistance:1,rolloffFactor:typeof o.rolloffFactor<"u"?o.rolloffFactor:1},c._onstereo=o.onstereo?[{fn:o.onstereo}]:[],c._onpos=o.onpos?[{fn:o.onpos}]:[],c._onorientation=o.onorientation?[{fn:o.onorientation}]:[],i.call(this,o)}}(Howl.prototype.init),Howl.prototype.stereo=function(i,o){var c=this;if(!c._webAudio)return c;if(c._state!=="loaded")return c._queue.push({event:"stereo",action:function(){c.stereo(i,o)}}),c;var d=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof o>"u")if(typeof i=="number")c._stereo=i,c._pos=[i,0,0];else return c._stereo;for(var g=c._getSoundIds(o),b=0;b<g.length;b++){var j=c._soundById(g[b]);if(j)if(typeof i=="number")j._stereo=i,j._pos=[i,0,0],j._node&&(j._pannerAttr.panningModel="equalpower",(!j._panner||!j._panner.pan)&&a(j,d),d==="spatial"?typeof j._panner.positionX<"u"?(j._panner.positionX.setValueAtTime(i,Howler.ctx.currentTime),j._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),j._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):j._panner.setPosition(i,0,0):j._panner.pan.setValueAtTime(i,Howler.ctx.currentTime)),c._emit("stereo",j._id);else return j._stereo}return c},Howl.prototype.pos=function(i,o,c,d){var g=this;if(!g._webAudio)return g;if(g._state!=="loaded")return g._queue.push({event:"pos",action:function(){g.pos(i,o,c,d)}}),g;if(o=typeof o!="number"?0:o,c=typeof c!="number"?-.5:c,typeof d>"u")if(typeof i=="number")g._pos=[i,o,c];else return g._pos;for(var b=g._getSoundIds(d),j=0;j<b.length;j++){var $=g._soundById(b[j]);if($)if(typeof i=="number")$._pos=[i,o,c],$._node&&((!$._panner||$._panner.pan)&&a($,"spatial"),typeof $._panner.positionX<"u"?($._panner.positionX.setValueAtTime(i,Howler.ctx.currentTime),$._panner.positionY.setValueAtTime(o,Howler.ctx.currentTime),$._panner.positionZ.setValueAtTime(c,Howler.ctx.currentTime)):$._panner.setPosition(i,o,c)),g._emit("pos",$._id);else return $._pos}return g},Howl.prototype.orientation=function(i,o,c,d){var g=this;if(!g._webAudio)return g;if(g._state!=="loaded")return g._queue.push({event:"orientation",action:function(){g.orientation(i,o,c,d)}}),g;if(o=typeof o!="number"?g._orientation[1]:o,c=typeof c!="number"?g._orientation[2]:c,typeof d>"u")if(typeof i=="number")g._orientation=[i,o,c];else return g._orientation;for(var b=g._getSoundIds(d),j=0;j<b.length;j++){var $=g._soundById(b[j]);if($)if(typeof i=="number")$._orientation=[i,o,c],$._node&&($._panner||($._pos||($._pos=g._pos||[0,0,-.5]),a($,"spatial")),typeof $._panner.orientationX<"u"?($._panner.orientationX.setValueAtTime(i,Howler.ctx.currentTime),$._panner.orientationY.setValueAtTime(o,Howler.ctx.currentTime),$._panner.orientationZ.setValueAtTime(c,Howler.ctx.currentTime)):$._panner.setOrientation(i,o,c)),g._emit("orientation",$._id);else return $._orientation}return g},Howl.prototype.pannerAttr=function(){var i=this,o=arguments,c,d,g;if(!i._webAudio)return i;if(o.length===0)return i._pannerAttr;if(o.length===1)if(typeof o[0]=="object")c=o[0],typeof d>"u"&&(c.pannerAttr||(c.pannerAttr={coneInnerAngle:c.coneInnerAngle,coneOuterAngle:c.coneOuterAngle,coneOuterGain:c.coneOuterGain,distanceModel:c.distanceModel,maxDistance:c.maxDistance,refDistance:c.refDistance,rolloffFactor:c.rolloffFactor,panningModel:c.panningModel}),i._pannerAttr={coneInnerAngle:typeof c.pannerAttr.coneInnerAngle<"u"?c.pannerAttr.coneInnerAngle:i._coneInnerAngle,coneOuterAngle:typeof c.pannerAttr.coneOuterAngle<"u"?c.pannerAttr.coneOuterAngle:i._coneOuterAngle,coneOuterGain:typeof c.pannerAttr.coneOuterGain<"u"?c.pannerAttr.coneOuterGain:i._coneOuterGain,distanceModel:typeof c.pannerAttr.distanceModel<"u"?c.pannerAttr.distanceModel:i._distanceModel,maxDistance:typeof c.pannerAttr.maxDistance<"u"?c.pannerAttr.maxDistance:i._maxDistance,refDistance:typeof c.pannerAttr.refDistance<"u"?c.pannerAttr.refDistance:i._refDistance,rolloffFactor:typeof c.pannerAttr.rolloffFactor<"u"?c.pannerAttr.rolloffFactor:i._rolloffFactor,panningModel:typeof c.pannerAttr.panningModel<"u"?c.pannerAttr.panningModel:i._panningModel});else return g=i._soundById(parseInt(o[0],10)),g?g._pannerAttr:i._pannerAttr;else o.length===2&&(c=o[0],d=parseInt(o[1],10));for(var b=i._getSoundIds(d),j=0;j<b.length;j++)if(g=i._soundById(b[j]),g){var $=g._pannerAttr;$={coneInnerAngle:typeof c.coneInnerAngle<"u"?c.coneInnerAngle:$.coneInnerAngle,coneOuterAngle:typeof c.coneOuterAngle<"u"?c.coneOuterAngle:$.coneOuterAngle,coneOuterGain:typeof c.coneOuterGain<"u"?c.coneOuterGain:$.coneOuterGain,distanceModel:typeof c.distanceModel<"u"?c.distanceModel:$.distanceModel,maxDistance:typeof c.maxDistance<"u"?c.maxDistance:$.maxDistance,refDistance:typeof c.refDistance<"u"?c.refDistance:$.refDistance,rolloffFactor:typeof c.rolloffFactor<"u"?c.rolloffFactor:$.rolloffFactor,panningModel:typeof c.panningModel<"u"?c.panningModel:$.panningModel};var rt=g._panner;rt?(rt.coneInnerAngle=$.coneInnerAngle,rt.coneOuterAngle=$.coneOuterAngle,rt.coneOuterGain=$.coneOuterGain,rt.distanceModel=$.distanceModel,rt.maxDistance=$.maxDistance,rt.refDistance=$.refDistance,rt.rolloffFactor=$.rolloffFactor,rt.panningModel=$.panningModel):(g._pos||(g._pos=i._pos||[0,0,-.5]),a(g,"spatial"))}return i},Sound.prototype.init=function(i){return function(){var o=this,c=o._parent;o._orientation=c._orientation,o._stereo=c._stereo,o._pos=c._pos,o._pannerAttr=c._pannerAttr,i.call(this),o._stereo?c.stereo(o._stereo):o._pos&&c.pos(o._pos[0],o._pos[1],o._pos[2],o._id)}}(Sound.prototype.init),Sound.prototype.reset=function(i){return function(){var o=this,c=o._parent;return o._orientation=c._orientation,o._stereo=c._stereo,o._pos=c._pos,o._pannerAttr=c._pannerAttr,o._stereo?c.stereo(o._stereo):o._pos?c.pos(o._pos[0],o._pos[1],o._pos[2],o._id):o._panner&&(o._panner.disconnect(0),o._panner=void 0,c._refreshBuffer(o)),i.call(this)}}(Sound.prototype.reset);var a=function(i,o){o=o||"spatial",o==="spatial"?(i._panner=Howler.ctx.createPanner(),i._panner.coneInnerAngle=i._pannerAttr.coneInnerAngle,i._panner.coneOuterAngle=i._pannerAttr.coneOuterAngle,i._panner.coneOuterGain=i._pannerAttr.coneOuterGain,i._panner.distanceModel=i._pannerAttr.distanceModel,i._panner.maxDistance=i._pannerAttr.maxDistance,i._panner.refDistance=i._pannerAttr.refDistance,i._panner.rolloffFactor=i._pannerAttr.rolloffFactor,i._panner.panningModel=i._pannerAttr.panningModel,typeof i._panner.positionX<"u"?(i._panner.positionX.setValueAtTime(i._pos[0],Howler.ctx.currentTime),i._panner.positionY.setValueAtTime(i._pos[1],Howler.ctx.currentTime),i._panner.positionZ.setValueAtTime(i._pos[2],Howler.ctx.currentTime)):i._panner.setPosition(i._pos[0],i._pos[1],i._pos[2]),typeof i._panner.orientationX<"u"?(i._panner.orientationX.setValueAtTime(i._orientation[0],Howler.ctx.currentTime),i._panner.orientationY.setValueAtTime(i._orientation[1],Howler.ctx.currentTime),i._panner.orientationZ.setValueAtTime(i._orientation[2],Howler.ctx.currentTime)):i._panner.setOrientation(i._orientation[0],i._orientation[1],i._orientation[2])):(i._panner=Howler.ctx.createStereoPanner(),i._panner.pan.setValueAtTime(i._stereo,Howler.ctx.currentTime)),i._panner.connect(i._node),i._paused||i._parent.pause(i._id,!0).play(i._id,!0)}}()}),Y3=zi((e,a)=>{function i(d,g){function b(){this.constructor=d}b.prototype=g.prototype,d.prototype=new b}function o(d,g,b,j){this.message=d,this.expected=g,this.found=b,this.location=j,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,o)}i(o,Error),o.buildMessage=function(d,g){var b={literal:function(gt){return'"'+$(gt.text)+'"'},class:function(gt){var yt="",Pt;for(Pt=0;Pt<gt.parts.length;Pt++)yt+=gt.parts[Pt]instanceof Array?rt(gt.parts[Pt][0])+"-"+rt(gt.parts[Pt][1]):rt(gt.parts[Pt]);return"["+(gt.inverted?"^":"")+yt+"]"},any:function(gt){return"any character"},end:function(gt){return"end of input"},other:function(gt){return gt.description}};function j(gt){return gt.charCodeAt(0).toString(16).toUpperCase()}function $(gt){return gt.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(yt){return"\\x0"+j(yt)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(yt){return"\\x"+j(yt)})}function rt(gt){return gt.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(yt){return"\\x0"+j(yt)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(yt){return"\\x"+j(yt)})}function _e(gt){return b[gt.type](gt)}function st(gt){var yt=new Array(gt.length),Pt,wt;for(Pt=0;Pt<gt.length;Pt++)yt[Pt]=_e(gt[Pt]);if(yt.sort(),yt.length>0){for(Pt=1,wt=1;Pt<yt.length;Pt++)yt[Pt-1]!==yt[Pt]&&(yt[wt]=yt[Pt],wt++);yt.length=wt}switch(yt.length){case 1:return yt[0];case 2:return yt[0]+" or "+yt[1];default:return yt.slice(0,-1).join(", ")+", or "+yt[yt.length-1]}}function ut(gt){return gt?'"'+$(gt)+'"':"end of input"}return"Expected "+st(d)+" but "+ut(g)+" found."};function c(d,g){g=g!==void 0?g:{};var b={},j={svg_path:i$},$=i$,rt=function(bo){if(!bo)return[];for(var ou=[],g0=0;g0<bo.length;g0++)ou=ou.concat.apply(ou,bo[g0]);var bu=ou[0];return bu&&bu.code=="m"&&(delete bu.relative,bu.code="M"),ou},_e=function(bo,ou){return f$(bo,ou)},st=/^[Mm]/,ut=mO(["M","m"],!1,!1),gt=function(bo,ou,g0){var bu=d$(bo,[ou]);return g0&&(bu=bu.concat(d$(bo=="M"?"L":"l",g0[1]))),bu},yt=/^[Zz]/,Pt=mO(["Z","z"],!1,!1),wt=function(){return d$("Z")},Ct=/^[Ll]/,At=mO(["L","l"],!1,!1),Tt=function(bo,ou){return d$(bo,ou)},kt=/^[Hh]/,It=mO(["H","h"],!1,!1),Lt=function(bo,ou){return d$(bo,ou.map(function(g0){return{x:g0}}))},Ft=/^[Vv]/,Nt=mO(["V","v"],!1,!1),Ht=function(bo,ou){return d$(bo,ou.map(function(g0){return{y:g0}}))},Gr=/^[Cc]/,hs=mO(["C","c"],!1,!1),_s=function(bo,ou,g0){return{x1:bo.x,y1:bo.y,x2:ou.x,y2:ou.y,x:g0.x,y:g0.y}},hn=/^[Ss]/,Qn=mO(["S","s"],!1,!1),ds=function(bo,ou){return{x2:bo.x,y2:bo.y,x:ou.x,y:ou.y}},un=/^[Qq]/,dr=mO(["Q","q"],!1,!1),us=function(bo,ou){return{x1:bo.x,y1:bo.y,x:ou.x,y:ou.y}},Nn=/^[Tt]/,gn=mO(["T","t"],!1,!1),Zn=/^[Aa]/,xu=mO(["A","a"],!1,!1),au=function(bo,ou,g0,bu,X1,X3){return{rx:bo,ry:ou,xAxisRotation:g0,largeArc:bu,sweep:X1,x:X3.x,y:X3.y}},Vv=function(bo,ou){return{x:bo,y:ou}},wu=function(bo){return bo*1},a1=function(bo){return bo.join("")*1},P0=/^[01]/,B0=mO(["0","1"],!1,!1),q1=function(bo){return bo=="1"},ox=function(){return""},N_=",",eS=oI(",",!1),tS=function(bo){return bo.join("")},tA=".",aR=oI(".",!1),sR=/^[eE]/,AA=mO(["e","E"],!1,!1),SA=/^[+\-]/,IO=mO(["+","-"],!1,!1),pO=/^[0-9]/,Su=mO([["0","9"]],!1,!1),mu=function(bo){return bo.join("")},ax=/^[ \t\n\r]/,tE=mO([" ","	",`
`,"\r"],!1,!1),So=0,fD=[{line:1,column:1}],C3=0,q3=[],qx;if("startRule"in g){if(!(g.startRule in j))throw new Error(`Can't start parsing from rule "`+g.startRule+'".');$=j[g.startRule]}function oI(bo,ou){return{type:"literal",text:bo,ignoreCase:ou}}function mO(bo,ou,g0){return{type:"class",parts:bo,inverted:ou,ignoreCase:g0}}function bL(){return{type:"end"}}function OL(bo){var ou=fD[bo],g0;if(ou)return ou;for(g0=bo-1;!fD[g0];)g0--;for(ou=fD[g0],ou={line:ou.line,column:ou.column};g0<bo;)d.charCodeAt(g0)===10?(ou.line++,ou.column=1):ou.column++,g0++;return fD[bo]=ou,ou}function CL(bo,ou){var g0=OL(bo),bu=OL(ou);return{start:{offset:bo,line:g0.line,column:g0.column},end:{offset:ou,line:bu.line,column:bu.column}}}function TL(bo){So<C3||(So>C3&&(C3=So,q3=[]),q3.push(bo))}function e$(bo,ou,g0){return new o(o.buildMessage(bo,ou),bo,ou,g0)}function i$(){var bo,ou,g0,bu,X1;for(bo=So,ou=[],g0=BL();g0!==b;)ou.push(g0),g0=BL();if(ou!==b)if(g0=l1(),g0===b&&(g0=null),g0!==b){for(bu=[],X1=BL();X1!==b;)bu.push(X1),X1=BL();bu!==b?(ou=rt(g0),bo=ou):(So=bo,bo=b)}else So=bo,bo=b;else So=bo,bo=b;return bo}function l1(){var bo,ou,g0,bu,X1,X3;if(bo=So,ou=iS(),ou!==b){for(g0=[],bu=So,X1=[],X3=BL();X3!==b;)X1.push(X3),X3=BL();for(X1!==b?(X3=iS(),X3!==b?(X1=[X1,X3],bu=X1):(So=bu,bu=b)):(So=bu,bu=b);bu!==b;){for(g0.push(bu),bu=So,X1=[],X3=BL();X3!==b;)X1.push(X3),X3=BL();X1!==b?(X3=iS(),X3!==b?(X1=[X1,X3],bu=X1):(So=bu,bu=b)):(So=bu,bu=b)}g0!==b?(ou=_e(ou,g0),bo=ou):(So=bo,bo=b)}else So=bo,bo=b;return bo}function iS(){var bo,ou,g0,bu,X1,X3;if(bo=So,ou=MO(),ou!==b){for(g0=[],bu=So,X1=[],X3=BL();X3!==b;)X1.push(X3),X3=BL();for(X1!==b?(X3=wA(),X3!==b?(X1=[X1,X3],bu=X1):(So=bu,bu=b)):(So=bu,bu=b);bu!==b;){for(g0.push(bu),bu=So,X1=[],X3=BL();X3!==b;)X1.push(X3),X3=BL();X1!==b?(X3=wA(),X3!==b?(X1=[X1,X3],bu=X1):(So=bu,bu=b)):(So=bu,bu=b)}g0!==b?(ou=_e(ou,g0),bo=ou):(So=bo,bo=b)}else So=bo,bo=b;return bo}function wA(){var bo;return bo=IL(),bo===b&&(bo=GL(),bo===b&&(bo=n$(),bo===b&&(bo=t$(),bo===b&&(bo=h$(),bo===b&&(bo=w$(),bo===b&&(bo=sp(),bo===b&&(bo=ux(),bo===b&&(bo=PL())))))))),bo}function MO(){var bo,ou,g0,bu,X1,X3,m$;if(bo=So,st.test(d.charAt(So))?(ou=d.charAt(So),So++):(ou=b,TL(ut)),ou!==b){for(g0=[],bu=BL();bu!==b;)g0.push(bu),bu=BL();g0!==b?(bu=jL(),bu!==b?(X1=So,X3=VL(),X3===b&&(X3=null),X3!==b?(m$=s$(),m$!==b?(X3=[X3,m$],X1=X3):(So=X1,X1=b)):(So=X1,X1=b),X1===b&&(X1=null),X1!==b?(ou=gt(ou,bu,X1),bo=ou):(So=bo,bo=b)):(So=bo,bo=b)):(So=bo,bo=b)}else So=bo,bo=b;return bo}function IL(){var bo,ou;return bo=So,yt.test(d.charAt(So))?(ou=d.charAt(So),So++):(ou=b,TL(Pt)),ou!==b&&(ou=wt()),bo=ou,bo}function GL(){var bo,ou,g0,bu;if(bo=So,Ct.test(d.charAt(So))?(ou=d.charAt(So),So++):(ou=b,TL(At)),ou!==b){for(g0=[],bu=BL();bu!==b;)g0.push(bu),bu=BL();g0!==b?(bu=s$(),bu!==b?(ou=Tt(ou,bu),bo=ou):(So=bo,bo=b)):(So=bo,bo=b)}else So=bo,bo=b;return bo}function s$(){var bo,ou,g0,bu,X1,X3;if(bo=So,ou=jL(),ou!==b){for(g0=[],bu=So,X1=VL(),X1===b&&(X1=null),X1!==b?(X3=jL(),X3!==b?(X1=[X1,X3],bu=X1):(So=bu,bu=b)):(So=bu,bu=b);bu!==b;)g0.push(bu),bu=So,X1=VL(),X1===b&&(X1=null),X1!==b?(X3=jL(),X3!==b?(X1=[X1,X3],bu=X1):(So=bu,bu=b)):(So=bu,bu=b);g0!==b?(ou=_e(ou,g0),bo=ou):(So=bo,bo=b)}else So=bo,bo=b;return bo}function n$(){var bo,ou,g0,bu;if(bo=So,kt.test(d.charAt(So))?(ou=d.charAt(So),So++):(ou=b,TL(It)),ou!==b){for(g0=[],bu=BL();bu!==b;)g0.push(bu),bu=BL();g0!==b?(bu=c$(),bu!==b?(ou=Lt(ou,bu),bo=ou):(So=bo,bo=b)):(So=bo,bo=b)}else So=bo,bo=b;return bo}function c$(){var bo,ou,g0,bu,X1,X3;if(bo=So,ou=UL(),ou!==b){for(g0=[],bu=So,X1=VL(),X1===b&&(X1=null),X1!==b?(X3=UL(),X3!==b?(X1=[X1,X3],bu=X1):(So=bu,bu=b)):(So=bu,bu=b);bu!==b;)g0.push(bu),bu=So,X1=VL(),X1===b&&(X1=null),X1!==b?(X3=UL(),X3!==b?(X1=[X1,X3],bu=X1):(So=bu,bu=b)):(So=bu,bu=b);g0!==b?(ou=_e(ou,g0),bo=ou):(So=bo,bo=b)}else So=bo,bo=b;return bo}function t$(){var bo,ou,g0,bu;if(bo=So,Ft.test(d.charAt(So))?(ou=d.charAt(So),So++):(ou=b,TL(Nt)),ou!==b){for(g0=[],bu=BL();bu!==b;)g0.push(bu),bu=BL();g0!==b?(bu=c$(),bu!==b?(ou=Ht(ou,bu),bo=ou):(So=bo,bo=b)):(So=bo,bo=b)}else So=bo,bo=b;return bo}function h$(){var bo,ou,g0,bu;if(bo=So,Gr.test(d.charAt(So))?(ou=d.charAt(So),So++):(ou=b,TL(hs)),ou!==b){for(g0=[],bu=BL();bu!==b;)g0.push(bu),bu=BL();g0!==b?(bu=o$(),bu!==b?(ou=Tt(ou,bu),bo=ou):(So=bo,bo=b)):(So=bo,bo=b)}else So=bo,bo=b;return bo}function o$(){var bo,ou,g0,bu,X1,X3;if(bo=So,ou=y$(),ou!==b){for(g0=[],bu=So,X1=VL(),X1===b&&(X1=null),X1!==b?(X3=y$(),X3!==b?(X1=[X1,X3],bu=X1):(So=bu,bu=b)):(So=bu,bu=b);bu!==b;)g0.push(bu),bu=So,X1=VL(),X1===b&&(X1=null),X1!==b?(X3=y$(),X3!==b?(X1=[X1,X3],bu=X1):(So=bu,bu=b)):(So=bu,bu=b);g0!==b?(ou=_e(ou,g0),bo=ou):(So=bo,bo=b)}else So=bo,bo=b;return bo}function y$(){var bo,ou,g0,bu,X1,X3;return bo=So,ou=jL(),ou!==b?(g0=VL(),g0===b&&(g0=null),g0!==b?(bu=jL(),bu!==b?(X1=VL(),X1===b&&(X1=null),X1!==b?(X3=jL(),X3!==b?(ou=_s(ou,bu,X3),bo=ou):(So=bo,bo=b)):(So=bo,bo=b)):(So=bo,bo=b)):(So=bo,bo=b)):(So=bo,bo=b),bo}function w$(){var bo,ou,g0,bu;if(bo=So,hn.test(d.charAt(So))?(ou=d.charAt(So),So++):(ou=b,TL(Qn)),ou!==b){for(g0=[],bu=BL();bu!==b;)g0.push(bu),bu=BL();g0!==b?(bu=S$(),bu!==b?(ou=Tt(ou,bu),bo=ou):(So=bo,bo=b)):(So=bo,bo=b)}else So=bo,bo=b;return bo}function S$(){var bo,ou,g0,bu,X1,X3;if(bo=So,ou=x$(),ou!==b){for(g0=[],bu=So,X1=VL(),X1===b&&(X1=null),X1!==b?(X3=x$(),X3!==b?(X1=[X1,X3],bu=X1):(So=bu,bu=b)):(So=bu,bu=b);bu!==b;)g0.push(bu),bu=So,X1=VL(),X1===b&&(X1=null),X1!==b?(X3=x$(),X3!==b?(X1=[X1,X3],bu=X1):(So=bu,bu=b)):(So=bu,bu=b);g0!==b?(ou=_e(ou,g0),bo=ou):(So=bo,bo=b)}else So=bo,bo=b;return bo}function x$(){var bo,ou,g0,bu;return bo=So,ou=jL(),ou!==b?(g0=VL(),g0===b&&(g0=null),g0!==b?(bu=jL(),bu!==b?(ou=ds(ou,bu),bo=ou):(So=bo,bo=b)):(So=bo,bo=b)):(So=bo,bo=b),bo}function sp(){var bo,ou,g0,bu;if(bo=So,un.test(d.charAt(So))?(ou=d.charAt(So),So++):(ou=b,TL(dr)),ou!==b){for(g0=[],bu=BL();bu!==b;)g0.push(bu),bu=BL();g0!==b?(bu=U_(),bu!==b?(ou=Tt(ou,bu),bo=ou):(So=bo,bo=b)):(So=bo,bo=b)}else So=bo,bo=b;return bo}function U_(){var bo,ou,g0,bu,X1,X3;if(bo=So,ou=rS(),ou!==b){for(g0=[],bu=So,X1=VL(),X1===b&&(X1=null),X1!==b?(X3=rS(),X3!==b?(X1=[X1,X3],bu=X1):(So=bu,bu=b)):(So=bu,bu=b);bu!==b;)g0.push(bu),bu=So,X1=VL(),X1===b&&(X1=null),X1!==b?(X3=rS(),X3!==b?(X1=[X1,X3],bu=X1):(So=bu,bu=b)):(So=bu,bu=b);g0!==b?(ou=_e(ou,g0),bo=ou):(So=bo,bo=b)}else So=bo,bo=b;return bo}function rS(){var bo,ou,g0,bu;return bo=So,ou=jL(),ou!==b?(g0=VL(),g0===b&&(g0=null),g0!==b?(bu=jL(),bu!==b?(ou=us(ou,bu),bo=ou):(So=bo,bo=b)):(So=bo,bo=b)):(So=bo,bo=b),bo}function ux(){var bo,ou,g0,bu;if(bo=So,Nn.test(d.charAt(So))?(ou=d.charAt(So),So++):(ou=b,TL(gn)),ou!==b){for(g0=[],bu=BL();bu!==b;)g0.push(bu),bu=BL();g0!==b?(bu=eE(),bu!==b?(ou=Tt(ou,bu),bo=ou):(So=bo,bo=b)):(So=bo,bo=b)}else So=bo,bo=b;return bo}function eE(){var bo,ou,g0,bu,X1,X3;if(bo=So,ou=jL(),ou!==b){for(g0=[],bu=So,X1=VL(),X1===b&&(X1=null),X1!==b?(X3=jL(),X3!==b?(X1=[X1,X3],bu=X1):(So=bu,bu=b)):(So=bu,bu=b);bu!==b;)g0.push(bu),bu=So,X1=VL(),X1===b&&(X1=null),X1!==b?(X3=jL(),X3!==b?(X1=[X1,X3],bu=X1):(So=bu,bu=b)):(So=bu,bu=b);g0!==b?(ou=_e(ou,g0),bo=ou):(So=bo,bo=b)}else So=bo,bo=b;return bo}function PL(){var bo,ou,g0,bu;if(bo=So,Zn.test(d.charAt(So))?(ou=d.charAt(So),So++):(ou=b,TL(xu)),ou!==b){for(g0=[],bu=BL();bu!==b;)g0.push(bu),bu=BL();g0!==b?(bu=LL(),bu!==b?(ou=Tt(ou,bu),bo=ou):(So=bo,bo=b)):(So=bo,bo=b)}else So=bo,bo=b;return bo}function LL(){var bo,ou,g0,bu,X1,X3;if(bo=So,ou=FL(),ou!==b){for(g0=[],bu=So,X1=VL(),X1===b&&(X1=null),X1!==b?(X3=FL(),X3!==b?(X1=[X1,X3],bu=X1):(So=bu,bu=b)):(So=bu,bu=b);bu!==b;)g0.push(bu),bu=So,X1=VL(),X1===b&&(X1=null),X1!==b?(X3=FL(),X3!==b?(X1=[X1,X3],bu=X1):(So=bu,bu=b)):(So=bu,bu=b);g0!==b?(ou=_e(ou,g0),bo=ou):(So=bo,bo=b)}else So=bo,bo=b;return bo}function FL(){var bo,ou,g0,bu,X1,X3,m$,E$,b$,P$,_$,C$;return bo=So,ou=qL(),ou!==b?(g0=VL(),g0===b&&(g0=null),g0!==b?(bu=qL(),bu!==b?(X1=VL(),X1===b&&(X1=null),X1!==b?(X3=UL(),X3!==b?(m$=VL(),m$!==b?(E$=WL(),E$!==b?(b$=VL(),b$===b&&(b$=null),b$!==b?(P$=WL(),P$!==b?(_$=VL(),_$===b&&(_$=null),_$!==b?(C$=jL(),C$!==b?(ou=au(ou,bu,X3,E$,P$,C$),bo=ou):(So=bo,bo=b)):(So=bo,bo=b)):(So=bo,bo=b)):(So=bo,bo=b)):(So=bo,bo=b)):(So=bo,bo=b)):(So=bo,bo=b)):(So=bo,bo=b)):(So=bo,bo=b)):(So=bo,bo=b)):(So=bo,bo=b),bo}function jL(){var bo,ou,g0,bu;return bo=So,ou=UL(),ou!==b?(g0=VL(),g0===b&&(g0=null),g0!==b?(bu=UL(),bu!==b?(ou=Vv(ou,bu),bo=ou):(So=bo,bo=b)):(So=bo,bo=b)):(So=bo,bo=b),bo}function qL(){var bo,ou;return bo=So,ou=l$(),ou===b&&(ou=u$()),ou!==b&&(ou=wu(ou)),bo=ou,bo}function UL(){var bo,ou,g0,bu;return bo=So,ou=So,g0=HL(),g0===b&&(g0=null),g0!==b?(bu=l$(),bu!==b?(g0=[g0,bu],ou=g0):(So=ou,ou=b)):(So=ou,ou=b),ou===b&&(ou=So,g0=HL(),g0===b&&(g0=null),g0!==b?(bu=u$(),bu!==b?(g0=[g0,bu],ou=g0):(So=ou,ou=b)):(So=ou,ou=b)),ou!==b&&(ou=a1(ou)),bo=ou,bo}function WL(){var bo,ou;return bo=So,P0.test(d.charAt(So))?(ou=d.charAt(So),So++):(ou=b,TL(B0)),ou!==b&&(ou=q1(ou)),bo=ou,bo}function VL(){var bo,ou,g0,bu,X1;if(bo=So,ou=[],g0=BL(),g0!==b)for(;g0!==b;)ou.push(g0),g0=BL();else ou=b;if(ou!==b)if(g0=a$(),g0===b&&(g0=null),g0!==b){for(bu=[],X1=BL();X1!==b;)bu.push(X1),X1=BL();bu!==b?(ou=[ou,g0,bu],bo=ou):(So=bo,bo=b)}else So=bo,bo=b;else So=bo,bo=b;if(bo===b){if(bo=So,ou=So,g0=a$(),g0!==b){for(bu=[],X1=BL();X1!==b;)bu.push(X1),X1=BL();bu!==b?(g0=[g0,bu],ou=g0):(So=ou,ou=b)}else So=ou,ou=b;ou!==b&&(ou=ox()),bo=ou}return bo}function a$(){var bo;return d.charCodeAt(So)===44?(bo=N_,So++):(bo=b,TL(eS)),bo}function l$(){var bo,ou,g0,bu;return bo=So,ou=So,g0=p$(),g0!==b?(bu=r$(),bu===b&&(bu=null),bu!==b?(g0=[g0,bu],ou=g0):(So=ou,ou=b)):(So=ou,ou=b),ou===b&&(ou=So,g0=u$(),g0!==b?(bu=r$(),bu!==b?(g0=[g0,bu],ou=g0):(So=ou,ou=b)):(So=ou,ou=b)),ou!==b&&(ou=tS(ou)),bo=ou,bo}function p$(){var bo,ou,g0,bu,X1;return bo=So,ou=So,g0=u$(),g0===b&&(g0=null),g0!==b?(d.charCodeAt(So)===46?(bu=tA,So++):(bu=b,TL(aR)),bu!==b?(X1=u$(),X1!==b?(g0=[g0,bu,X1],ou=g0):(So=ou,ou=b)):(So=ou,ou=b)):(So=ou,ou=b),ou===b&&(ou=So,g0=u$(),g0!==b?(d.charCodeAt(So)===46?(bu=tA,So++):(bu=b,TL(aR)),bu!==b?(g0=[g0,bu],ou=g0):(So=ou,ou=b)):(So=ou,ou=b)),ou!==b&&(ou=tS(ou)),bo=ou,bo}function r$(){var bo,ou,g0,bu,X1;return bo=So,ou=So,sR.test(d.charAt(So))?(g0=d.charAt(So),So++):(g0=b,TL(AA)),g0!==b?(bu=HL(),bu===b&&(bu=null),bu!==b?(X1=u$(),X1!==b?(g0=[g0,bu,X1],ou=g0):(So=ou,ou=b)):(So=ou,ou=b)):(So=ou,ou=b),ou!==b&&(ou=tS(ou)),bo=ou,bo}function HL(){var bo;return SA.test(d.charAt(So))?(bo=d.charAt(So),So++):(bo=b,TL(IO)),bo}function u$(){var bo,ou,g0;if(bo=So,ou=[],pO.test(d.charAt(So))?(g0=d.charAt(So),So++):(g0=b,TL(Su)),g0!==b)for(;g0!==b;)ou.push(g0),pO.test(d.charAt(So))?(g0=d.charAt(So),So++):(g0=b,TL(Su));else ou=b;return ou!==b&&(ou=mu(ou)),bo=ou,bo}function BL(){var bo,ou;return bo=So,ax.test(d.charAt(So))?(ou=d.charAt(So),So++):(ou=b,TL(tE)),ou!==b&&(ou=ox()),bo=ou,bo}function f$(bo,ou){if(!ou)return[bo];for(var g0=[bo],bu=0,X1=ou.length;bu<X1;bu++)g0[bu+1]=ou[bu][1];return g0}var v$={m:"moveto",l:"lineto",h:"horizontal lineto",v:"vertical lineto",c:"curveto",s:"smooth curveto",q:"quadratic curveto",t:"smooth quadratic curveto",a:"elliptical arc",z:"closepath"};for(var g$ in v$)v$[g$.toUpperCase()]=v$[g$];function d$(bo,ou){ou||(ou=[{}]);for(var g0=ou.length;g0--;){var bu={code:bo,command:v$[bo]};bo==bo.toLowerCase()&&(bu.relative=!0);for(var X1 in ou[g0])bu[X1]=ou[g0][X1];ou[g0]=bu}return ou}if(qx=$(),qx!==b&&So===d.length)return qx;throw qx!==b&&So<d.length&&TL(bL()),e$(q3,C3<d.length?d.charAt(C3):null,C3<d.length?CL(C3,C3+1):CL(C3,C3))}a.exports={SyntaxError:o,parse:c}}),Y_=zi((e,a)=>{var i=Y3().parse;i.parseSVG=i,i.makeAbsolute=o,a.exports=i;function o(c){var d,g={x:0,y:0},b={x:"x0",y:"y0",x1:"x0",y1:"y0",x2:"x0",y2:"y0"};return c.forEach(function(j){j.command==="moveto"&&(d=j),j.x0=g.x,j.y0=g.y;for(var $ in b)$ in j&&(j[$]+=j.relative?j[b[$]]:0);"x"in j||(j.x=g.x),"y"in j||(j.y=g.y),j.relative=!1,j.code=j.code.toUpperCase(),j.command=="closepath"&&(j.x=d.x,j.y=d.y),g=j}),c}}),ML=zi((e,a)=>{function i(o){for(var c=new Array(o),d=0;d<o;++d)c[d]=d;return c}a.exports=i}),DL=zi((e,a)=>{a.exports=function(c){return c!=null&&(i(c)||o(c)||!!c._isBuffer)};function i(c){return!!c.constructor&&typeof c.constructor.isBuffer=="function"&&c.constructor.isBuffer(c)}function o(c){return typeof c.readFloatLE=="function"&&typeof c.slice=="function"&&i(c.slice(0,0))}}),Uf=zi((e,a)=>{var i=ML(),o=DL(),c=typeof Float64Array<"u";function d(_e,st){return _e[0]-st[0]}function g(){var _e=this.stride,st=new Array(_e.length),ut;for(ut=0;ut<st.length;++ut)st[ut]=[Math.abs(_e[ut]),ut];st.sort(d);var gt=new Array(st.length);for(ut=0;ut<gt.length;++ut)gt[ut]=st[ut][1];return gt}function b(_e,st){var ut=["View",st,"d",_e].join("");st<0&&(ut="View_Nil"+_e);var gt=_e==="generic";if(st===-1){var yt="function "+ut+"(a){this.data=a;};var proto="+ut+".prototype;proto.dtype='"+_e+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+ut+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+ut+"(a){return new "+ut+"(a);}",Ht=new Function(yt);return Ht()}else if(st===0){var yt="function "+ut+"(a,d) {this.data = a;this.offset = d};var proto="+ut+".prototype;proto.dtype='"+_e+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+ut+"_copy() {return new "+ut+"(this.data,this.offset)};proto.pick=function "+ut+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+ut+"_get(){return "+(gt?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+ut+"_set(v){return "+(gt?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+ut+"(a,b,c,d){return new "+ut+"(a,d)}",Ht=new Function("TrivialArray",yt);return Ht($[_e][0])}var yt=["'use strict'"],Pt=i(st),wt=Pt.map(function(Gr){return"i"+Gr}),Ct="this.offset+"+Pt.map(function(Gr){return"this.stride["+Gr+"]*i"+Gr}).join("+"),At=Pt.map(function(Gr){return"b"+Gr}).join(","),Tt=Pt.map(function(Gr){return"c"+Gr}).join(",");yt.push("function "+ut+"(a,"+At+","+Tt+",d){this.data=a","this.shape=["+At+"]","this.stride=["+Tt+"]","this.offset=d|0}","var proto="+ut+".prototype","proto.dtype='"+_e+"'","proto.dimension="+st),yt.push("Object.defineProperty(proto,'size',{get:function "+ut+"_size(){return "+Pt.map(function(Gr){return"this.shape["+Gr+"]"}).join("*"),"}})"),st===1?yt.push("proto.order=[0]"):(yt.push("Object.defineProperty(proto,'order',{get:"),st<4?(yt.push("function "+ut+"_order(){"),st===2?yt.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):st===3&&yt.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):yt.push("ORDER})")),yt.push("proto.set=function "+ut+"_set("+wt.join(",")+",v){"),gt?yt.push("return this.data.set("+Ct+",v)}"):yt.push("return this.data["+Ct+"]=v}"),yt.push("proto.get=function "+ut+"_get("+wt.join(",")+"){"),gt?yt.push("return this.data.get("+Ct+")}"):yt.push("return this.data["+Ct+"]}"),yt.push("proto.index=function "+ut+"_index(",wt.join(),"){return "+Ct+"}"),yt.push("proto.hi=function "+ut+"_hi("+wt.join(",")+"){return new "+ut+"(this.data,"+Pt.map(function(Gr){return["(typeof i",Gr,"!=='number'||i",Gr,"<0)?this.shape[",Gr,"]:i",Gr,"|0"].join("")}).join(",")+","+Pt.map(function(Gr){return"this.stride["+Gr+"]"}).join(",")+",this.offset)}");var kt=Pt.map(function(Gr){return"a"+Gr+"=this.shape["+Gr+"]"}),It=Pt.map(function(Gr){return"c"+Gr+"=this.stride["+Gr+"]"});yt.push("proto.lo=function "+ut+"_lo("+wt.join(",")+"){var b=this.offset,d=0,"+kt.join(",")+","+It.join(","));for(var Lt=0;Lt<st;++Lt)yt.push("if(typeof i"+Lt+"==='number'&&i"+Lt+">=0){d=i"+Lt+"|0;b+=c"+Lt+"*d;a"+Lt+"-=d}");yt.push("return new "+ut+"(this.data,"+Pt.map(function(Gr){return"a"+Gr}).join(",")+","+Pt.map(function(Gr){return"c"+Gr}).join(",")+",b)}"),yt.push("proto.step=function "+ut+"_step("+wt.join(",")+"){var "+Pt.map(function(Gr){return"a"+Gr+"=this.shape["+Gr+"]"}).join(",")+","+Pt.map(function(Gr){return"b"+Gr+"=this.stride["+Gr+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var Lt=0;Lt<st;++Lt)yt.push("if(typeof i"+Lt+"==='number'){d=i"+Lt+"|0;if(d<0){c+=b"+Lt+"*(a"+Lt+"-1);a"+Lt+"=ceil(-a"+Lt+"/d)}else{a"+Lt+"=ceil(a"+Lt+"/d)}b"+Lt+"*=d}");yt.push("return new "+ut+"(this.data,"+Pt.map(function(Gr){return"a"+Gr}).join(",")+","+Pt.map(function(Gr){return"b"+Gr}).join(",")+",c)}");for(var Ft=new Array(st),Nt=new Array(st),Lt=0;Lt<st;++Lt)Ft[Lt]="a[i"+Lt+"]",Nt[Lt]="b[i"+Lt+"]";yt.push("proto.transpose=function "+ut+"_transpose("+wt+"){"+wt.map(function(Gr,hs){return Gr+"=("+Gr+"===undefined?"+hs+":"+Gr+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+ut+"(this.data,"+Ft.join(",")+","+Nt.join(",")+",this.offset)}"),yt.push("proto.pick=function "+ut+"_pick("+wt+"){var a=[],b=[],c=this.offset");for(var Lt=0;Lt<st;++Lt)yt.push("if(typeof i"+Lt+"==='number'&&i"+Lt+">=0){c=(c+this.stride["+Lt+"]*i"+Lt+")|0}else{a.push(this.shape["+Lt+"]);b.push(this.stride["+Lt+"])}");yt.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),yt.push("return function construct_"+ut+"(data,shape,stride,offset){return new "+ut+"(data,"+Pt.map(function(Gr){return"shape["+Gr+"]"}).join(",")+","+Pt.map(function(Gr){return"stride["+Gr+"]"}).join(",")+",offset)}");var Ht=new Function("CTOR_LIST","ORDER",yt.join(`
`));return Ht($[_e],g)}function j(_e){if(o(_e))return"buffer";if(c)switch(Object.prototype.toString.call(_e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(_e)?"array":"generic"}var $={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};function rt(_e,st,ut,gt){if(_e===void 0){var Tt=$.array[0];return Tt([])}else typeof _e=="number"&&(_e=[_e]);st===void 0&&(st=[_e.length]);var yt=st.length;if(ut===void 0){ut=new Array(yt);for(var Pt=yt-1,wt=1;Pt>=0;--Pt)ut[Pt]=wt,wt*=st[Pt]}if(gt===void 0){gt=0;for(var Pt=0;Pt<yt;++Pt)ut[Pt]<0&&(gt-=(st[Pt]-1)*ut[Pt])}for(var Ct=j(_e),At=$[Ct];At.length<=yt+1;)At.push(b(Ct,At.length-1));var Tt=At[yt+1];return Tt(_e,st,ut,gt)}a.exports=rt}),RL=zi((e,a)=>{function i(d,g){for(var b=1,j=d.length,$=d[0],rt=d[0],_e=1;_e<j;++_e)if(rt=$,$=d[_e],g($,rt)){if(_e===b){b++;continue}d[b++]=$}return d.length=b,d}function o(d){for(var g=1,b=d.length,j=d[0],$=d[0],rt=1;rt<b;++rt,$=j)if($=j,j=d[rt],j!==$){if(rt===g){g++;continue}d[g++]=j}return d.length=g,d}function c(d,g,b){return d.length===0?d:g?(b||d.sort(g),i(d,g)):(b||d.sort(),o(d))}a.exports=c}),NL=zi((e,a)=>{var i=RL();function o($,rt,_e){var st=$.length,ut=rt.arrayArgs.length,gt=rt.indexArgs.length>0,yt=[],Pt=[],wt=0,Ct=0,At,Tt;for(At=0;At<st;++At)Pt.push(["i",At,"=0"].join(""));for(Tt=0;Tt<ut;++Tt)for(At=0;At<st;++At)Ct=wt,wt=$[At],At===0?Pt.push(["d",Tt,"s",At,"=t",Tt,"p",wt].join("")):Pt.push(["d",Tt,"s",At,"=(t",Tt,"p",wt,"-s",Ct,"*t",Tt,"p",Ct,")"].join(""));for(Pt.length>0&&yt.push("var "+Pt.join(",")),At=st-1;At>=0;--At)wt=$[At],yt.push(["for(i",At,"=0;i",At,"<s",wt,";++i",At,"){"].join(""));for(yt.push(_e),At=0;At<st;++At){for(Ct=wt,wt=$[At],Tt=0;Tt<ut;++Tt)yt.push(["p",Tt,"+=d",Tt,"s",At].join(""));gt&&(At>0&&yt.push(["index[",Ct,"]-=s",Ct].join("")),yt.push(["++index[",wt,"]"].join(""))),yt.push("}")}return yt.join(`
`)}function c($,rt,_e,st){for(var ut=rt.length,gt=_e.arrayArgs.length,yt=_e.blockSize,Pt=_e.indexArgs.length>0,wt=[],Ct=0;Ct<gt;++Ct)wt.push(["var offset",Ct,"=p",Ct].join(""));for(var Ct=$;Ct<ut;++Ct)wt.push(["for(var j"+Ct+"=SS[",rt[Ct],"]|0;j",Ct,">0;){"].join("")),wt.push(["if(j",Ct,"<",yt,"){"].join("")),wt.push(["s",rt[Ct],"=j",Ct].join("")),wt.push(["j",Ct,"=0"].join("")),wt.push(["}else{s",rt[Ct],"=",yt].join("")),wt.push(["j",Ct,"-=",yt,"}"].join("")),Pt&&wt.push(["index[",rt[Ct],"]=j",Ct].join(""));for(var Ct=0;Ct<gt;++Ct){for(var At=["offset"+Ct],Tt=$;Tt<ut;++Tt)At.push(["j",Tt,"*t",Ct,"p",rt[Tt]].join(""));wt.push(["p",Ct,"=(",At.join("+"),")"].join(""))}wt.push(o(rt,_e,st));for(var Ct=$;Ct<ut;++Ct)wt.push("}");return wt.join(`
`)}function d($){for(var rt=0,_e=$[0].length;rt<_e;){for(var st=1;st<$.length;++st)if($[st][rt]!==$[0][rt])return rt;++rt}return rt}function g($,rt,_e){for(var st=$.body,ut=[],gt=[],yt=0;yt<$.args.length;++yt){var Pt=$.args[yt];if(!(Pt.count<=0)){var wt=new RegExp(Pt.name,"g"),Ct="",At=rt.arrayArgs.indexOf(yt);switch(rt.argTypes[yt]){case"offset":var Tt=rt.offsetArgIndex.indexOf(yt),kt=rt.offsetArgs[Tt];At=kt.array,Ct="+q"+Tt;case"array":Ct="p"+At+Ct;var It="l"+yt,Lt="a"+At;if(rt.arrayBlockIndices[At]===0)Pt.count===1?_e[At]==="generic"?Pt.lvalue?(ut.push(["var ",It,"=",Lt,".get(",Ct,")"].join("")),st=st.replace(wt,It),gt.push([Lt,".set(",Ct,",",It,")"].join(""))):st=st.replace(wt,[Lt,".get(",Ct,")"].join("")):st=st.replace(wt,[Lt,"[",Ct,"]"].join("")):_e[At]==="generic"?(ut.push(["var ",It,"=",Lt,".get(",Ct,")"].join("")),st=st.replace(wt,It),Pt.lvalue&&gt.push([Lt,".set(",Ct,",",It,")"].join(""))):(ut.push(["var ",It,"=",Lt,"[",Ct,"]"].join("")),st=st.replace(wt,It),Pt.lvalue&&gt.push([Lt,"[",Ct,"]=",It].join("")));else{for(var Ft=[Pt.name],Nt=[Ct],Ht=0;Ht<Math.abs(rt.arrayBlockIndices[At]);Ht++)Ft.push("\\s*\\[([^\\]]+)\\]"),Nt.push("$"+(Ht+1)+"*t"+At+"b"+Ht);if(wt=new RegExp(Ft.join(""),"g"),Ct=Nt.join("+"),_e[At]==="generic")throw new Error("cwise: Generic arrays not supported in combination with blocks!");st=st.replace(wt,[Lt,"[",Ct,"]"].join(""))}break;case"scalar":st=st.replace(wt,"Y"+rt.scalarArgs.indexOf(yt));break;case"index":st=st.replace(wt,"index");break;case"shape":st=st.replace(wt,"shape");break}}}return[ut.join(`
`),st,gt.join(`
`)].join(`
`).trim()}function b($){for(var rt=new Array($.length),_e=!0,st=0;st<$.length;++st){var ut=$[st],gt=ut.match(/\d+/);gt?gt=gt[0]:gt="",ut.charAt(0)===0?rt[st]="u"+ut.charAt(1)+gt:rt[st]=ut.charAt(0)+gt,st>0&&(_e=_e&&rt[st]===rt[st-1])}return _e?rt[0]:rt.join("")}function j($,rt){for(var _e=rt[1].length-Math.abs($.arrayBlockIndices[0])|0,st=new Array($.arrayArgs.length),ut=new Array($.arrayArgs.length),gt=0;gt<$.arrayArgs.length;++gt)ut[gt]=rt[2*gt],st[gt]=rt[2*gt+1];for(var yt=[],Pt=[],wt=[],Ct=[],At=[],gt=0;gt<$.arrayArgs.length;++gt){$.arrayBlockIndices[gt]<0?(wt.push(0),Ct.push(_e),yt.push(_e),Pt.push(_e+$.arrayBlockIndices[gt])):(wt.push($.arrayBlockIndices[gt]),Ct.push($.arrayBlockIndices[gt]+_e),yt.push(0),Pt.push($.arrayBlockIndices[gt]));for(var Tt=[],kt=0;kt<st[gt].length;kt++)wt[gt]<=st[gt][kt]&&st[gt][kt]<Ct[gt]&&Tt.push(st[gt][kt]-wt[gt]);At.push(Tt)}for(var It=["SS"],Lt=["'use strict'"],Ft=[],kt=0;kt<_e;++kt)Ft.push(["s",kt,"=SS[",kt,"]"].join(""));for(var gt=0;gt<$.arrayArgs.length;++gt){It.push("a"+gt),It.push("t"+gt),It.push("p"+gt);for(var kt=0;kt<_e;++kt)Ft.push(["t",gt,"p",kt,"=t",gt,"[",wt[gt]+kt,"]"].join(""));for(var kt=0;kt<Math.abs($.arrayBlockIndices[gt]);++kt)Ft.push(["t",gt,"b",kt,"=t",gt,"[",yt[gt]+kt,"]"].join(""))}for(var gt=0;gt<$.scalarArgs.length;++gt)It.push("Y"+gt);if($.shapeArgs.length>0&&Ft.push("shape=SS.slice(0)"),$.indexArgs.length>0){for(var Nt=new Array(_e),gt=0;gt<_e;++gt)Nt[gt]="0";Ft.push(["index=[",Nt.join(","),"]"].join(""))}for(var gt=0;gt<$.offsetArgs.length;++gt){for(var Ht=$.offsetArgs[gt],Gr=[],kt=0;kt<Ht.offset.length;++kt)Ht.offset[kt]!==0&&(Ht.offset[kt]===1?Gr.push(["t",Ht.array,"p",kt].join("")):Gr.push([Ht.offset[kt],"*t",Ht.array,"p",kt].join("")));Gr.length===0?Ft.push("q"+gt+"=0"):Ft.push(["q",gt,"=",Gr.join("+")].join(""))}var hs=i([].concat($.pre.thisVars).concat($.body.thisVars).concat($.post.thisVars));Ft=Ft.concat(hs),Ft.length>0&&Lt.push("var "+Ft.join(","));for(var gt=0;gt<$.arrayArgs.length;++gt)Lt.push("p"+gt+"|=0");$.pre.body.length>3&&Lt.push(g($.pre,$,ut));var _s=g($.body,$,ut),hn=d(At);hn<_e?Lt.push(c(hn,At[0],$,_s)):Lt.push(o(At[0],$,_s)),$.post.body.length>3&&Lt.push(g($.post,$,ut)),$.debug&&console.log("-----Generated cwise routine for ",rt,`:
`+Lt.join(`
`)+`
----------`);var Qn=[$.funcName||"unnamed","_cwise_loop_",st[0].join("s"),"m",hn,b(ut)].join(""),ds=new Function(["function ",Qn,"(",It.join(","),"){",Lt.join(`
`),"} return ",Qn].join(""));return ds()}a.exports=j}),kL=zi((e,a)=>{var i=NL();function o(c){var d=["'use strict'","var CACHED={}"],g=[],b=c.funcName+"_cwise_thunk";d.push(["return function ",b,"(",c.shimArgs.join(","),"){"].join(""));for(var j=[],$=[],rt=[["array",c.arrayArgs[0],".shape.slice(",Math.max(0,c.arrayBlockIndices[0]),c.arrayBlockIndices[0]<0?","+c.arrayBlockIndices[0]+")":")"].join("")],_e=[],st=[],ut=0;ut<c.arrayArgs.length;++ut){var gt=c.arrayArgs[ut];g.push(["t",gt,"=array",gt,".dtype,","r",gt,"=array",gt,".order"].join("")),j.push("t"+gt),j.push("r"+gt),$.push("t"+gt),$.push("r"+gt+".join()"),rt.push("array"+gt+".data"),rt.push("array"+gt+".stride"),rt.push("array"+gt+".offset|0"),ut>0&&(_e.push("array"+c.arrayArgs[0]+".shape.length===array"+gt+".shape.length+"+(Math.abs(c.arrayBlockIndices[0])-Math.abs(c.arrayBlockIndices[ut]))),st.push("array"+c.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,c.arrayBlockIndices[0])+"]===array"+gt+".shape[shapeIndex+"+Math.max(0,c.arrayBlockIndices[ut])+"]"))}c.arrayArgs.length>1&&(d.push("if (!("+_e.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),d.push("for(var shapeIndex=array"+c.arrayArgs[0]+".shape.length-"+Math.abs(c.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),d.push("if (!("+st.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),d.push("}"));for(var ut=0;ut<c.scalarArgs.length;++ut)rt.push("scalar"+c.scalarArgs[ut]);g.push(["type=[",$.join(","),"].join()"].join("")),g.push("proc=CACHED[type]"),d.push("var "+g.join(",")),d.push(["if(!proc){","CACHED[type]=proc=compile([",j.join(","),"])}","return proc(",rt.join(","),")}"].join("")),c.debug&&console.log(`-----Generated thunk:
`+d.join(`
`)+`
----------`);var yt=new Function("compile",d.join(`
`));return yt(i.bind(void 0,c))}a.exports=o}),zL=zi((e,a)=>{var i=kL();function o(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function c(d){var g=new o;g.pre=d.pre,g.body=d.body,g.post=d.post;var b=d.args.slice(0);g.argTypes=b;for(var j=0;j<b.length;++j){var $=b[j];if($==="array"||typeof $=="object"&&$.blockIndices){if(g.argTypes[j]="array",g.arrayArgs.push(j),g.arrayBlockIndices.push($.blockIndices?$.blockIndices:0),g.shimArgs.push("array"+j),j<g.pre.args.length&&g.pre.args[j].count>0)throw new Error("cwise: pre() block may not reference array args");if(j<g.post.args.length&&g.post.args[j].count>0)throw new Error("cwise: post() block may not reference array args")}else if($==="scalar")g.scalarArgs.push(j),g.shimArgs.push("scalar"+j);else if($==="index"){if(g.indexArgs.push(j),j<g.pre.args.length&&g.pre.args[j].count>0)throw new Error("cwise: pre() block may not reference array index");if(j<g.body.args.length&&g.body.args[j].lvalue)throw new Error("cwise: body() block may not write to array index");if(j<g.post.args.length&&g.post.args[j].count>0)throw new Error("cwise: post() block may not reference array index")}else if($==="shape"){if(g.shapeArgs.push(j),j<g.pre.args.length&&g.pre.args[j].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(j<g.body.args.length&&g.body.args[j].lvalue)throw new Error("cwise: body() block may not write to array shape");if(j<g.post.args.length&&g.post.args[j].lvalue)throw new Error("cwise: post() block may not write to array shape")}else if(typeof $=="object"&&$.offset)g.argTypes[j]="offset",g.offsetArgs.push({array:$.array,offset:$.offset}),g.offsetArgIndex.push(j);else throw new Error("cwise: Unknown argument type "+b[j])}if(g.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(g.pre.args.length>b.length)throw new Error("cwise: Too many arguments in pre() block");if(g.body.args.length>b.length)throw new Error("cwise: Too many arguments in body() block");if(g.post.args.length>b.length)throw new Error("cwise: Too many arguments in post() block");return g.debug=!!d.printCode||!!d.debug,g.funcName=d.funcName||"cwise",g.blockSize=d.blockSize||64,i(g)}a.exports=c}),Gf=zi(e=>{var a=zL(),i={body:"",args:[],thisVars:[],localVars:[]};function o(st){if(!st)return i;for(var ut=0;ut<st.args.length;++ut){var gt=st.args[ut];ut===0?st.args[ut]={name:gt,lvalue:!0,rvalue:!!st.rvalue,count:st.count||1}:st.args[ut]={name:gt,lvalue:!1,rvalue:!0,count:1}}return st.thisVars||(st.thisVars=[]),st.localVars||(st.localVars=[]),st}function c(st){return a({args:st.args,pre:o(st.pre),body:o(st.body),post:o(st.proc),funcName:st.funcName})}function d(st){for(var ut=[],gt=0;gt<st.args.length;++gt)ut.push("a"+gt);var yt=new Function("P",["return function ",st.funcName,"_ndarrayops(",ut.join(","),") {P(",ut.join(","),");return a0}"].join(""));return yt(c(st))}var g={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};(function(){for(var st in g){var ut=g[st];e[st]=d({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+ut+"c"},funcName:st}),e[st+"eq"]=d({args:["array","array"],body:{args:["a","b"],body:"a"+ut+"=b"},rvalue:!0,funcName:st+"eq"}),e[st+"s"]=d({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+ut+"s"},funcName:st+"s"}),e[st+"seq"]=d({args:["array","scalar"],body:{args:["a","s"],body:"a"+ut+"=s"},rvalue:!0,funcName:st+"seq"})}})();var b={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var st in b){var ut=b[st];e[st]=d({args:["array","array"],body:{args:["a","b"],body:"a="+ut+"b"},funcName:st}),e[st+"eq"]=d({args:["array"],body:{args:["a"],body:"a="+ut+"a"},rvalue:!0,count:2,funcName:st+"eq"})}})();var j={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};(function(){for(var st in j){var ut=j[st];e[st]=d({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+ut+"c"},funcName:st}),e[st+"s"]=d({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+ut+"s"},funcName:st+"s"}),e[st+"eq"]=d({args:["array","array"],body:{args:["a","b"],body:"a=a"+ut+"b"},rvalue:!0,count:2,funcName:st+"eq"}),e[st+"seq"]=d({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+ut+"s"},rvalue:!0,count:2,funcName:st+"seq"})}})();var $=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];(function(){for(var st=0;st<$.length;++st){var ut=$[st];e[ut]=d({args:["array","array"],pre:{args:[],body:"this_f=Math."+ut,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:ut}),e[ut+"eq"]=d({args:["array"],pre:{args:[],body:"this_f=Math."+ut,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:ut+"eq"})}})();var rt=["max","min","atan2","pow"];(function(){for(var st=0;st<rt.length;++st){var ut=rt[st];e[ut]=d({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+ut,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:ut}),e[ut+"s"]=d({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+ut,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:ut+"s"}),e[ut+"eq"]=d({args:["array","array"],pre:{args:[],body:"this_f=Math."+ut,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:ut+"eq"}),e[ut+"seq"]=d({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+ut,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:ut+"seq"})}})();var _e=["atan2","pow"];(function(){for(var st=0;st<_e.length;++st){var ut=_e[st];e[ut+"op"]=d({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+ut,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:ut+"op"}),e[ut+"ops"]=d({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+ut,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:ut+"ops"}),e[ut+"opeq"]=d({args:["array","array"],pre:{args:[],body:"this_f=Math."+ut,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:ut+"opeq"}),e[ut+"opseq"]=d({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+ut,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:ut+"opseq"})}})(),e.any=a({args:["array"],pre:i,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),e.all=a({args:["array"],pre:i,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),e.sum=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),e.prod=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),e.norm2squared=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),e.norm2=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),e.norminf=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),e.norm1=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),e.sup=a({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),e.inf=a({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),e.argmin=a({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),e.argmax=a({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),e.random=d({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),e.assign=d({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),e.assigns=d({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),e.equals=a({args:["array","array"],pre:i,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})}),XN=zi((e,a)=>{a.exports=function(i,o){for(var c=i.split("."),d=o.split("."),g=0;g<3;g++){var b=Number(c[g]),j=Number(d[g]);if(b>j)return 1;if(j>b)return-1;if(!isNaN(b)&&isNaN(j))return 1;if(isNaN(b)&&!isNaN(j))return-1}return 0}}),ba$1="149",ns={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},sF=0,lT=1,oF=2,Gy=1,aF=2,mp=3,es=0,yi=1,tn=2,er=0,sl=1,cT=2,uT=3,hT=4,lF=5,Fu=100,cF=101,uF=102,dT=103,fT=104,hF=200,dF=201,fF=202,pF=203,zM=204,UM=205,mF=206,gF=207,yF=208,vF=209,xF=210,bF=0,SF=1,wF=2,US=3,AF=4,_F=5,EF=6,TF=7,GM=0,MF=1,CF=2,Hs=0,PF=1,DF=2,OF=3,IF=4,RF=5,jM=300,al=301,ll=302,GS=303,jS=304,ch=306,Ws=1e3,Kt=1001,HS=1002,Vt=1003,pT=1004,nS=1005,tt=1006,LF=1007,bc=1008,Ir$1=1009,BF=1010,NF=1011,HM=1012,FF=1013,js=1014,Sr$1=1015,va=1016,kF=1017,VF=1018,ol=1020,zF=1021,Qr=1023,UF=1024,GF=1025,vc=1026,cl=1027,jF=1028,HF=1029,uh=1030,WF=1031,Aw=1033,sS=33776,oS=33777,aS=33778,lS=33779,mT=35840,gT=35841,yT=35842,vT=35843,qF=36196,xT=37492,bT=37496,ST=37808,wT=37809,AT=37810,_T=37811,ET=37812,TT=37813,MT=37814,CT=37815,PT=37816,DT=37817,OT=37818,IT=37819,RT=37820,LT=37821,cS=36492,YF=36283,BT=36284,NT=36285,FT=36286,_w=2200,Ew=2201,kp=2202,fy=2300,py=2301,uS=2302,ku=2400,Vu=2401,my=2402,Tw=2500,XF=2501,Sn=3e3,at=3001,ji=3200,Mw=3201,QF=0,KF=1,wo="srgb",wp="srgb-linear",hS=7680,ZF=519,WS=35044,WM=35048,kT="300 es",qS=1035,fr$2=class{addEventListener(a,i){this._listeners===void 0&&(this._listeners={});let o=this._listeners;o[a]===void 0&&(o[a]=[]),o[a].indexOf(i)===-1&&o[a].push(i)}hasEventListener(a,i){if(this._listeners===void 0)return!1;let o=this._listeners;return o[a]!==void 0&&o[a].indexOf(i)!==-1}removeEventListener(a,i){if(this._listeners===void 0)return;let o=this._listeners[a];if(o!==void 0){let c=o.indexOf(i);c!==-1&&o.splice(c,1)}}dispatchEvent(a){if(this._listeners===void 0)return;let i=this._listeners[a.type];if(i!==void 0){a.target=this;let o=i.slice(0);for(let c=0,d=o.length;c<d;c++)o[c].call(this,a);a.target=null}}},dn=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],VT=1234567,yp=Math.PI/180,Ap=180/Math.PI;function ms(){let e=Math.random()*4294967295|0,a=Math.random()*4294967295|0,i=Math.random()*4294967295|0,o=Math.random()*4294967295|0;return(dn[e&255]+dn[e>>8&255]+dn[e>>16&255]+dn[e>>24&255]+"-"+dn[a&255]+dn[a>>8&255]+"-"+dn[a>>16&15|64]+dn[a>>24&255]+"-"+dn[i&63|128]+dn[i>>8&255]+"-"+dn[i>>16&255]+dn[i>>24&255]+dn[o&255]+dn[o>>8&255]+dn[o>>16&255]+dn[o>>24&255]).toLowerCase()}function gi(e,a,i){return Math.max(a,Math.min(i,e))}function Cw(e,a){return(e%a+a)%a}function JF(e,a,i,o,c){return o+(e-a)*(c-o)/(i-a)}function $F(e,a,i){return e!==a?(i-e)/(a-e):0}function vp(e,a,i){return(1-i)*e+i*a}function ek(e,a,i,o){return vp(e,a,1-Math.exp(-i*o))}function tk(e,a=1){return a-Math.abs(Cw(e,a*2)-a)}function rk(e,a,i){return e<=a?0:e>=i?1:(e=(e-a)/(i-a),e*e*(3-2*e))}function ik(e,a,i){return e<=a?0:e>=i?1:(e=(e-a)/(i-a),e*e*e*(e*(e*6-15)+10))}function nk(e,a){return e+Math.floor(Math.random()*(a-e+1))}function sk(e,a){return e+Math.random()*(a-e)}function ok(e){return e*(.5-Math.random())}function ak(e){e!==void 0&&(VT=e);let a=VT+=1831565813;return a=Math.imul(a^a>>>15,a|1),a^=a+Math.imul(a^a>>>7,a|61),((a^a>>>14)>>>0)/4294967296}function lk(e){return e*yp}function ck(e){return e*Ap}function YS(e){return(e&e-1)===0&&e!==0}function qM(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function gy(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function uk(e,a,i,o,c){let d=Math.cos,g=Math.sin,b=d(i/2),j=g(i/2),$=d((a+o)/2),rt=g((a+o)/2),_e=d((a-o)/2),st=g((a-o)/2),ut=d((o-a)/2),gt=g((o-a)/2);switch(c){case"XYX":e.set(b*rt,j*_e,j*st,b*$);break;case"YZY":e.set(j*st,b*rt,j*_e,b*$);break;case"ZXZ":e.set(j*_e,j*st,b*rt,b*$);break;case"XZX":e.set(b*rt,j*gt,j*ut,b*$);break;case"YXY":e.set(j*ut,b*rt,j*gt,b*$);break;case"ZYZ":e.set(j*gt,j*ut,b*rt,b*$);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+c)}}function ya(e,a){switch(a.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function br(e,a){switch(a.constructor){case Float32Array:return e;case Uint16Array:return Math.round(e*65535);case Uint8Array:return Math.round(e*255);case Int16Array:return Math.round(e*32767);case Int8Array:return Math.round(e*127);default:throw new Error("Invalid component type.")}}var Me=Object.freeze({__proto__:null,DEG2RAD:yp,RAD2DEG:Ap,ceilPowerOfTwo:qM,clamp:gi,damp:ek,degToRad:lk,denormalize:ya,euclideanModulo:Cw,floorPowerOfTwo:gy,generateUUID:ms,inverseLerp:$F,isPowerOfTwo:YS,lerp:vp,mapLinear:JF,normalize:br,pingpong:tk,radToDeg:ck,randFloat:sk,randFloatSpread:ok,randInt:nk,seededRandom:ak,setQuaternionFromProperEuler:uk,smootherstep:ik,smoothstep:rk}),z$2=class{constructor(a=0,i=0){z$2.prototype.isVector2=!0,this.x=a,this.y=i}get width(){return this.x}set width(a){this.x=a}get height(){return this.y}set height(a){this.y=a}set(a,i){return this.x=a,this.y=i,this}setScalar(a){return this.x=a,this.y=a,this}setX(a){return this.x=a,this}setY(a){return this.y=a,this}setComponent(a,i){switch(a){case 0:this.x=i;break;case 1:this.y=i;break;default:throw new Error("index is out of range: "+a)}return this}getComponent(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+a)}}clone(){return new this.constructor(this.x,this.y)}copy(a){return this.x=a.x,this.y=a.y,this}add(a){return this.x+=a.x,this.y+=a.y,this}addScalar(a){return this.x+=a,this.y+=a,this}addVectors(a,i){return this.x=a.x+i.x,this.y=a.y+i.y,this}addScaledVector(a,i){return this.x+=a.x*i,this.y+=a.y*i,this}sub(a){return this.x-=a.x,this.y-=a.y,this}subScalar(a){return this.x-=a,this.y-=a,this}subVectors(a,i){return this.x=a.x-i.x,this.y=a.y-i.y,this}multiply(a){return this.x*=a.x,this.y*=a.y,this}multiplyScalar(a){return this.x*=a,this.y*=a,this}divide(a){return this.x/=a.x,this.y/=a.y,this}divideScalar(a){return this.multiplyScalar(1/a)}applyMatrix3(a){let i=this.x,o=this.y,c=a.elements;return this.x=c[0]*i+c[3]*o+c[6],this.y=c[1]*i+c[4]*o+c[7],this}min(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this}max(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this}clamp(a,i){return this.x=Math.max(a.x,Math.min(i.x,this.x)),this.y=Math.max(a.y,Math.min(i.y,this.y)),this}clampScalar(a,i){return this.x=Math.max(a,Math.min(i,this.x)),this.y=Math.max(a,Math.min(i,this.y)),this}clampLength(a,i){let o=this.length();return this.divideScalar(o||1).multiplyScalar(Math.max(a,Math.min(i,o)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(a){return this.x*a.x+this.y*a.y}cross(a){return this.x*a.y-this.y*a.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(a){return Math.sqrt(this.distanceToSquared(a))}distanceToSquared(a){let i=this.x-a.x,o=this.y-a.y;return i*i+o*o}manhattanDistanceTo(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)}setLength(a){return this.normalize().multiplyScalar(a)}lerp(a,i){return this.x+=(a.x-this.x)*i,this.y+=(a.y-this.y)*i,this}lerpVectors(a,i,o){return this.x=a.x+(i.x-a.x)*o,this.y=a.y+(i.y-a.y)*o,this}equals(a){return a.x===this.x&&a.y===this.y}fromArray(a,i=0){return this.x=a[i],this.y=a[i+1],this}toArray(a=[],i=0){return a[i]=this.x,a[i+1]=this.y,a}fromBufferAttribute(a,i){return this.x=a.getX(i),this.y=a.getY(i),this}rotateAround(a,i){let o=Math.cos(i),c=Math.sin(i),d=this.x-a.x,g=this.y-a.y;return this.x=d*o-g*c+a.x,this.y=d*c+g*o+a.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},nr=class{constructor(){nr.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,a,i,o,c,d,g,b,j){let $=this.elements;return $[0]=e,$[1]=o,$[2]=g,$[3]=a,$[4]=c,$[5]=b,$[6]=i,$[7]=d,$[8]=j,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let a=this.elements,i=e.elements;return a[0]=i[0],a[1]=i[1],a[2]=i[2],a[3]=i[3],a[4]=i[4],a[5]=i[5],a[6]=i[6],a[7]=i[7],a[8]=i[8],this}extractBasis(e,a,i){return e.setFromMatrix3Column(this,0),a.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let a=e.elements;return this.set(a[0],a[4],a[8],a[1],a[5],a[9],a[2],a[6],a[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,a){let i=e.elements,o=a.elements,c=this.elements,d=i[0],g=i[3],b=i[6],j=i[1],$=i[4],rt=i[7],_e=i[2],st=i[5],ut=i[8],gt=o[0],yt=o[3],Pt=o[6],wt=o[1],Ct=o[4],At=o[7],Tt=o[2],kt=o[5],It=o[8];return c[0]=d*gt+g*wt+b*Tt,c[3]=d*yt+g*Ct+b*kt,c[6]=d*Pt+g*At+b*It,c[1]=j*gt+$*wt+rt*Tt,c[4]=j*yt+$*Ct+rt*kt,c[7]=j*Pt+$*At+rt*It,c[2]=_e*gt+st*wt+ut*Tt,c[5]=_e*yt+st*Ct+ut*kt,c[8]=_e*Pt+st*At+ut*It,this}multiplyScalar(e){let a=this.elements;return a[0]*=e,a[3]*=e,a[6]*=e,a[1]*=e,a[4]*=e,a[7]*=e,a[2]*=e,a[5]*=e,a[8]*=e,this}determinant(){let e=this.elements,a=e[0],i=e[1],o=e[2],c=e[3],d=e[4],g=e[5],b=e[6],j=e[7],$=e[8];return a*d*$-a*g*j-i*c*$+i*g*b+o*c*j-o*d*b}invert(){let e=this.elements,a=e[0],i=e[1],o=e[2],c=e[3],d=e[4],g=e[5],b=e[6],j=e[7],$=e[8],rt=$*d-g*j,_e=g*b-$*c,st=j*c-d*b,ut=a*rt+i*_e+o*st;if(ut===0)return this.set(0,0,0,0,0,0,0,0,0);let gt=1/ut;return e[0]=rt*gt,e[1]=(o*j-$*i)*gt,e[2]=(g*i-o*d)*gt,e[3]=_e*gt,e[4]=($*a-o*b)*gt,e[5]=(o*c-g*a)*gt,e[6]=st*gt,e[7]=(i*b-j*a)*gt,e[8]=(d*a-i*c)*gt,this}transpose(){let e,a=this.elements;return e=a[1],a[1]=a[3],a[3]=e,e=a[2],a[2]=a[6],a[6]=e,e=a[5],a[5]=a[7],a[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let a=this.elements;return e[0]=a[0],e[1]=a[3],e[2]=a[6],e[3]=a[1],e[4]=a[4],e[5]=a[7],e[6]=a[2],e[7]=a[5],e[8]=a[8],this}setUvTransform(e,a,i,o,c,d,g){let b=Math.cos(c),j=Math.sin(c);return this.set(i*b,i*j,-i*(b*d+j*g)+d+e,-o*j,o*b,-o*(-j*d+b*g)+g+a,0,0,1),this}scale(e,a){return this.premultiply(dS.makeScale(e,a)),this}rotate(e){return this.premultiply(dS.makeRotation(-e)),this}translate(e,a){return this.premultiply(dS.makeTranslation(e,a)),this}makeTranslation(e,a){return this.set(1,0,e,0,1,a,0,0,1),this}makeRotation(e){let a=Math.cos(e),i=Math.sin(e);return this.set(a,-i,0,i,a,0,0,0,1),this}makeScale(e,a){return this.set(e,0,0,0,a,0,0,0,1),this}equals(e){let a=this.elements,i=e.elements;for(let o=0;o<9;o++)if(a[o]!==i[o])return!1;return!0}fromArray(e,a=0){for(let i=0;i<9;i++)this.elements[i]=e[i+a];return this}toArray(e=[],a=0){let i=this.elements;return e[a]=i[0],e[a+1]=i[1],e[a+2]=i[2],e[a+3]=i[3],e[a+4]=i[4],e[a+5]=i[5],e[a+6]=i[6],e[a+7]=i[7],e[a+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}},dS=new nr;function YM(e){for(let a=e.length-1;a>=0;--a)if(e[a]>=65535)return!0;return!1}var hk={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function kg(e,a){return new hk[e](a)}function _p(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function xc(e){return e<.04045?e*.0773993808:Math.pow(e*.9478672986+.0521327014,2.4)}function dy(e){return e<.0031308?e*12.92:1.055*Math.pow(e,.41666)-.055}var fS={[wo]:{[wp]:xc},[wp]:{[wo]:dy}},vn={legacyMode:!0,get workingColorSpace(){return wp},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,a,i){if(this.legacyMode||a===i||!a||!i)return e;if(fS[a]&&fS[a][i]!==void 0){let o=fS[a][i];return e.r=o(e.r),e.g=o(e.g),e.b=o(e.b),e}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(e,a){return this.convert(e,this.workingColorSpace,a)},toWorkingColorSpace:function(e,a){return this.convert(e,a,this.workingColorSpace)}},XM={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ti={r:0,g:0,b:0},zs={h:0,s:0,l:0},Vg={h:0,s:0,l:0};function pS(e,a,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+(a-e)*6*i:i<1/2?a:i<2/3?e+(a-e)*6*(2/3-i):e}function zg(e,a){return a.r=e.r,a.g=e.g,a.b=e.b,a}var We=class{constructor(e,a,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,a===void 0&&i===void 0?this.set(e):this.setRGB(e,a,i)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,a=wo){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,vn.toWorkingColorSpace(this,a),this}setRGB(e,a,i,o=vn.workingColorSpace){return this.r=e,this.g=a,this.b=i,vn.toWorkingColorSpace(this,o),this}setHSL(e,a,i,o=vn.workingColorSpace){if(e=Cw(e,1),a=gi(a,0,1),i=gi(i,0,1),a===0)this.r=this.g=this.b=i;else{let c=i<=.5?i*(1+a):i+a-i*a,d=2*i-c;this.r=pS(d,c,e+1/3),this.g=pS(d,c,e),this.b=pS(d,c,e-1/3)}return vn.toWorkingColorSpace(this,o),this}setStyle(e,a=wo){function i(c){c!==void 0&&parseFloat(c)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let o;if(o=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let c,d=o[1],g=o[2];switch(d){case"rgb":case"rgba":if(c=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(g))return this.r=Math.min(255,parseInt(c[1],10))/255,this.g=Math.min(255,parseInt(c[2],10))/255,this.b=Math.min(255,parseInt(c[3],10))/255,vn.toWorkingColorSpace(this,a),i(c[4]),this;if(c=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(g))return this.r=Math.min(100,parseInt(c[1],10))/100,this.g=Math.min(100,parseInt(c[2],10))/100,this.b=Math.min(100,parseInt(c[3],10))/100,vn.toWorkingColorSpace(this,a),i(c[4]),this;break;case"hsl":case"hsla":if(c=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(g)){let b=parseFloat(c[1])/360,j=parseFloat(c[2])/100,$=parseFloat(c[3])/100;return i(c[4]),this.setHSL(b,j,$,a)}break}}else if(o=/^\#([A-Fa-f\d]+)$/.exec(e)){let c=o[1],d=c.length;if(d===3)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,vn.toWorkingColorSpace(this,a),this;if(d===6)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,vn.toWorkingColorSpace(this,a),this}return e&&e.length>0?this.setColorName(e,a):this}setColorName(e,a=wo){let i=XM[e.toLowerCase()];return i!==void 0?this.setHex(i,a):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=xc(e.r),this.g=xc(e.g),this.b=xc(e.b),this}copyLinearToSRGB(e){return this.r=dy(e.r),this.g=dy(e.g),this.b=dy(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=wo){return vn.fromWorkingColorSpace(zg(this,Ti),e),gi(Ti.r*255,0,255)<<16^gi(Ti.g*255,0,255)<<8^gi(Ti.b*255,0,255)<<0}getHexString(e=wo){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,a=vn.workingColorSpace){vn.fromWorkingColorSpace(zg(this,Ti),a);let i=Ti.r,o=Ti.g,c=Ti.b,d=Math.max(i,o,c),g=Math.min(i,o,c),b,j,$=(g+d)/2;if(g===d)b=0,j=0;else{let rt=d-g;switch(j=$<=.5?rt/(d+g):rt/(2-d-g),d){case i:b=(o-c)/rt+(o<c?6:0);break;case o:b=(c-i)/rt+2;break;case c:b=(i-o)/rt+4;break}b/=6}return e.h=b,e.s=j,e.l=$,e}getRGB(e,a=vn.workingColorSpace){return vn.fromWorkingColorSpace(zg(this,Ti),a),e.r=Ti.r,e.g=Ti.g,e.b=Ti.b,e}getStyle(e=wo){return vn.fromWorkingColorSpace(zg(this,Ti),e),e!==wo?`color(${e} ${Ti.r} ${Ti.g} ${Ti.b})`:`rgb(${Ti.r*255|0},${Ti.g*255|0},${Ti.b*255|0})`}offsetHSL(e,a,i){return this.getHSL(zs),zs.h+=e,zs.s+=a,zs.l+=i,this.setHSL(zs.h,zs.s,zs.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,a){return this.r=e.r+a.r,this.g=e.g+a.g,this.b=e.b+a.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,a){return this.r+=(e.r-this.r)*a,this.g+=(e.g-this.g)*a,this.b+=(e.b-this.b)*a,this}lerpColors(e,a,i){return this.r=e.r+(a.r-e.r)*i,this.g=e.g+(a.g-e.g)*i,this.b=e.b+(a.b-e.b)*i,this}lerpHSL(e,a){this.getHSL(zs),e.getHSL(Vg);let i=vp(zs.h,Vg.h,a),o=vp(zs.s,Vg.s,a),c=vp(zs.l,Vg.l,a);return this.setHSL(i,o,c),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,a=0){return this.r=e[a],this.g=e[a+1],this.b=e[a+2],this}toArray(e=[],a=0){return e[a]=this.r,e[a+1]=this.g,e[a+2]=this.b,e}fromBufferAttribute(e,a){return this.r=e.getX(a),this.g=e.getY(a),this.b=e.getZ(a),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};We.NAMES=XM;var Au,yy=class{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let a;if(e instanceof HTMLCanvasElement)a=e;else{Au===void 0&&(Au=_p("canvas")),Au.width=e.width,Au.height=e.height;let i=Au.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),a=Au}return a.width>2048||a.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),a.toDataURL("image/jpeg",.6)):a.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){let a=_p("canvas");a.width=e.width,a.height=e.height;let i=a.getContext("2d");i.drawImage(e,0,0,e.width,e.height);let o=i.getImageData(0,0,e.width,e.height),c=o.data;for(let d=0;d<c.length;d++)c[d]=xc(c[d]/255)*255;return i.putImageData(o,0,0),a}else if(e.data){let a=e.data.slice(0);for(let i=0;i<a.length;i++)a instanceof Uint8Array||a instanceof Uint8ClampedArray?a[i]=Math.floor(xc(a[i]/255)*255):a[i]=xc(a[i]);return{data:a,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},vy=class{constructor(e=null){this.isSource=!0,this.uuid=ms(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){let a=e===void 0||typeof e=="string";if(!a&&e.images[this.uuid]!==void 0)return e.images[this.uuid];let i={uuid:this.uuid,url:""},o=this.data;if(o!==null){let c;if(Array.isArray(o)){c=[];for(let d=0,g=o.length;d<g;d++)o[d].isDataTexture?c.push(mS(o[d].image)):c.push(mS(o[d]))}else c=mS(o);i.url=c}return a||(e.images[this.uuid]=i),i}};function mS(e){return typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap?yy.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var dk=0,tr=class extends fr$2{constructor(e=tr.DEFAULT_IMAGE,a=tr.DEFAULT_MAPPING,i=Kt,o=Kt,c=tt,d=bc,g=Qr,b=Ir$1,j=tr.DEFAULT_ANISOTROPY,$=Sn){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:dk++}),this.uuid=ms(),this.name="",this.source=new vy(e),this.mipmaps=[],this.mapping=a,this.wrapS=i,this.wrapT=o,this.magFilter=c,this.minFilter=d,this.anisotropy=j,this.format=g,this.internalFormat=null,this.type=b,this.offset=new z$2(0,0),this.repeat=new z$2(1,1),this.center=new z$2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new nr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=$,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){let a=e===void 0||typeof e=="string";if(!a&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];let i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),a||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==jM)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ws:e.x=e.x-Math.floor(e.x);break;case Kt:e.x=e.x<0?0:1;break;case HS:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Ws:e.y=e.y-Math.floor(e.y);break;case Kt:e.y=e.y<0?0:1;break;case HS:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}};tr.DEFAULT_IMAGE=null;tr.DEFAULT_MAPPING=jM;tr.DEFAULT_ANISOTROPY=1;var Ke=class{constructor(e=0,a=0,i=0,o=1){Ke.prototype.isVector4=!0,this.x=e,this.y=a,this.z=i,this.w=o}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,a,i,o){return this.x=e,this.y=a,this.z=i,this.w=o,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,a){switch(e){case 0:this.x=a;break;case 1:this.y=a;break;case 2:this.z=a;break;case 3:this.w=a;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,a){return this.x=e.x+a.x,this.y=e.y+a.y,this.z=e.z+a.z,this.w=e.w+a.w,this}addScaledVector(e,a){return this.x+=e.x*a,this.y+=e.y*a,this.z+=e.z*a,this.w+=e.w*a,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,a){return this.x=e.x-a.x,this.y=e.y-a.y,this.z=e.z-a.z,this.w=e.w-a.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let a=this.x,i=this.y,o=this.z,c=this.w,d=e.elements;return this.x=d[0]*a+d[4]*i+d[8]*o+d[12]*c,this.y=d[1]*a+d[5]*i+d[9]*o+d[13]*c,this.z=d[2]*a+d[6]*i+d[10]*o+d[14]*c,this.w=d[3]*a+d[7]*i+d[11]*o+d[15]*c,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let a=Math.sqrt(1-e.w*e.w);return a<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/a,this.y=e.y/a,this.z=e.z/a),this}setAxisAngleFromRotationMatrix(e){let a,i,o,c,d=e.elements,g=d[0],b=d[4],j=d[8],$=d[1],rt=d[5],_e=d[9],st=d[2],ut=d[6],gt=d[10];if(Math.abs(b-$)<.01&&Math.abs(j-st)<.01&&Math.abs(_e-ut)<.01){if(Math.abs(b+$)<.1&&Math.abs(j+st)<.1&&Math.abs(_e+ut)<.1&&Math.abs(g+rt+gt-3)<.1)return this.set(1,0,0,0),this;a=Math.PI;let Pt=(g+1)/2,wt=(rt+1)/2,Ct=(gt+1)/2,At=(b+$)/4,Tt=(j+st)/4,kt=(_e+ut)/4;return Pt>wt&&Pt>Ct?Pt<.01?(i=0,o=.707106781,c=.707106781):(i=Math.sqrt(Pt),o=At/i,c=Tt/i):wt>Ct?wt<.01?(i=.707106781,o=0,c=.707106781):(o=Math.sqrt(wt),i=At/o,c=kt/o):Ct<.01?(i=.707106781,o=.707106781,c=0):(c=Math.sqrt(Ct),i=Tt/c,o=kt/c),this.set(i,o,c,a),this}let yt=Math.sqrt((ut-_e)*(ut-_e)+(j-st)*(j-st)+($-b)*($-b));return Math.abs(yt)<.001&&(yt=1),this.x=(ut-_e)/yt,this.y=(j-st)/yt,this.z=($-b)/yt,this.w=Math.acos((g+rt+gt-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,a){return this.x=Math.max(e.x,Math.min(a.x,this.x)),this.y=Math.max(e.y,Math.min(a.y,this.y)),this.z=Math.max(e.z,Math.min(a.z,this.z)),this.w=Math.max(e.w,Math.min(a.w,this.w)),this}clampScalar(e,a){return this.x=Math.max(e,Math.min(a,this.x)),this.y=Math.max(e,Math.min(a,this.y)),this.z=Math.max(e,Math.min(a,this.z)),this.w=Math.max(e,Math.min(a,this.w)),this}clampLength(e,a){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(a,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,a){return this.x+=(e.x-this.x)*a,this.y+=(e.y-this.y)*a,this.z+=(e.z-this.z)*a,this.w+=(e.w-this.w)*a,this}lerpVectors(e,a,i){return this.x=e.x+(a.x-e.x)*i,this.y=e.y+(a.y-e.y)*i,this.z=e.z+(a.z-e.z)*i,this.w=e.w+(a.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,a=0){return this.x=e[a],this.y=e[a+1],this.z=e[a+2],this.w=e[a+3],this}toArray(e=[],a=0){return e[a]=this.x,e[a+1]=this.y,e[a+2]=this.z,e[a+3]=this.w,e}fromBufferAttribute(e,a){return this.x=e.getX(a),this.y=e.getY(a),this.z=e.getZ(a),this.w=e.getW(a),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},ft=class extends fr$2{constructor(e=1,a=1,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=a,this.depth=1,this.scissor=new Ke(0,0,e,a),this.scissorTest=!1,this.viewport=new Ke(0,0,e,a);let o={width:e,height:a,depth:1};this.texture=new tr(o,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:tt,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null,this.samples=i.samples!==void 0?i.samples:0}setSize(e,a,i=1){(this.width!==e||this.height!==a||this.depth!==i)&&(this.width=e,this.height=a,this.depth=i,this.texture.image.width=e,this.texture.image.height=a,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,a),this.scissor.set(0,0,e,a)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;let a=Object.assign({},e.texture.image);return this.texture.source=new vy(a),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},xy=class extends tr{constructor(e=null,a=1,i=1,o=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:a,height:i,depth:o},this.magFilter=Vt,this.minFilter=Vt,this.wrapR=Kt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},by=class extends tr{constructor(e=null,a=1,i=1,o=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:a,height:i,depth:o},this.magFilter=Vt,this.minFilter=Vt,this.wrapR=Kt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},Sy=class extends ft{constructor(e=1,a=1,i=1,o={}){super(e,a,o),this.isWebGLMultipleRenderTargets=!0;let c=this.texture;this.texture=[];for(let d=0;d<i;d++)this.texture[d]=c.clone(),this.texture[d].isRenderTargetTexture=!0}setSize(e,a,i=1){if(this.width!==e||this.height!==a||this.depth!==i){this.width=e,this.height=a,this.depth=i;for(let o=0,c=this.texture.length;o<c;o++)this.texture[o].image.width=e,this.texture[o].image.height=a,this.texture[o].image.depth=i;this.dispose()}return this.viewport.set(0,0,e,a),this.scissor.set(0,0,e,a),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let a=0,i=e.texture.length;a<i;a++)this.texture[a]=e.texture[a].clone(),this.texture[a].isRenderTargetTexture=!0;return this}},Qe=class{constructor(e=0,a=0,i=0,o=1){this.isQuaternion=!0,this._x=e,this._y=a,this._z=i,this._w=o}static slerpFlat(e,a,i,o,c,d,g){let b=i[o+0],j=i[o+1],$=i[o+2],rt=i[o+3],_e=c[d+0],st=c[d+1],ut=c[d+2],gt=c[d+3];if(g===0){e[a+0]=b,e[a+1]=j,e[a+2]=$,e[a+3]=rt;return}if(g===1){e[a+0]=_e,e[a+1]=st,e[a+2]=ut,e[a+3]=gt;return}if(rt!==gt||b!==_e||j!==st||$!==ut){let yt=1-g,Pt=b*_e+j*st+$*ut+rt*gt,wt=Pt>=0?1:-1,Ct=1-Pt*Pt;if(Ct>Number.EPSILON){let Tt=Math.sqrt(Ct),kt=Math.atan2(Tt,Pt*wt);yt=Math.sin(yt*kt)/Tt,g=Math.sin(g*kt)/Tt}let At=g*wt;if(b=b*yt+_e*At,j=j*yt+st*At,$=$*yt+ut*At,rt=rt*yt+gt*At,yt===1-g){let Tt=1/Math.sqrt(b*b+j*j+$*$+rt*rt);b*=Tt,j*=Tt,$*=Tt,rt*=Tt}}e[a]=b,e[a+1]=j,e[a+2]=$,e[a+3]=rt}static multiplyQuaternionsFlat(e,a,i,o,c,d){let g=i[o],b=i[o+1],j=i[o+2],$=i[o+3],rt=c[d],_e=c[d+1],st=c[d+2],ut=c[d+3];return e[a]=g*ut+$*rt+b*st-j*_e,e[a+1]=b*ut+$*_e+j*rt-g*st,e[a+2]=j*ut+$*st+g*_e-b*rt,e[a+3]=$*ut-g*rt-b*_e-j*st,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,a,i,o){return this._x=e,this._y=a,this._z=i,this._w=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,a){let i=e._x,o=e._y,c=e._z,d=e._order,g=Math.cos,b=Math.sin,j=g(i/2),$=g(o/2),rt=g(c/2),_e=b(i/2),st=b(o/2),ut=b(c/2);switch(d){case"XYZ":this._x=_e*$*rt+j*st*ut,this._y=j*st*rt-_e*$*ut,this._z=j*$*ut+_e*st*rt,this._w=j*$*rt-_e*st*ut;break;case"YXZ":this._x=_e*$*rt+j*st*ut,this._y=j*st*rt-_e*$*ut,this._z=j*$*ut-_e*st*rt,this._w=j*$*rt+_e*st*ut;break;case"ZXY":this._x=_e*$*rt-j*st*ut,this._y=j*st*rt+_e*$*ut,this._z=j*$*ut+_e*st*rt,this._w=j*$*rt-_e*st*ut;break;case"ZYX":this._x=_e*$*rt-j*st*ut,this._y=j*st*rt+_e*$*ut,this._z=j*$*ut-_e*st*rt,this._w=j*$*rt+_e*st*ut;break;case"YZX":this._x=_e*$*rt+j*st*ut,this._y=j*st*rt+_e*$*ut,this._z=j*$*ut-_e*st*rt,this._w=j*$*rt-_e*st*ut;break;case"XZY":this._x=_e*$*rt-j*st*ut,this._y=j*st*rt-_e*$*ut,this._z=j*$*ut+_e*st*rt,this._w=j*$*rt+_e*st*ut;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+d)}return a!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,a){let i=a/2,o=Math.sin(i);return this._x=e.x*o,this._y=e.y*o,this._z=e.z*o,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){let a=e.elements,i=a[0],o=a[4],c=a[8],d=a[1],g=a[5],b=a[9],j=a[2],$=a[6],rt=a[10],_e=i+g+rt;if(_e>0){let st=.5/Math.sqrt(_e+1);this._w=.25/st,this._x=($-b)*st,this._y=(c-j)*st,this._z=(d-o)*st}else if(i>g&&i>rt){let st=2*Math.sqrt(1+i-g-rt);this._w=($-b)/st,this._x=.25*st,this._y=(o+d)/st,this._z=(c+j)/st}else if(g>rt){let st=2*Math.sqrt(1+g-i-rt);this._w=(c-j)/st,this._x=(o+d)/st,this._y=.25*st,this._z=(b+$)/st}else{let st=2*Math.sqrt(1+rt-i-g);this._w=(d-o)/st,this._x=(c+j)/st,this._y=(b+$)/st,this._z=.25*st}return this._onChangeCallback(),this}setFromUnitVectors(e,a){let i=e.dot(a)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*a.z-e.z*a.y,this._y=e.z*a.x-e.x*a.z,this._z=e.x*a.y-e.y*a.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(gi(this.dot(e),-1,1)))}rotateTowards(e,a){let i=this.angleTo(e);if(i===0)return this;let o=Math.min(1,a/i);return this.slerp(e,o),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,a){let i=e._x,o=e._y,c=e._z,d=e._w,g=a._x,b=a._y,j=a._z,$=a._w;return this._x=i*$+d*g+o*j-c*b,this._y=o*$+d*b+c*g-i*j,this._z=c*$+d*j+i*b-o*g,this._w=d*$-i*g-o*b-c*j,this._onChangeCallback(),this}slerp(e,a){if(a===0)return this;if(a===1)return this.copy(e);let i=this._x,o=this._y,c=this._z,d=this._w,g=d*e._w+i*e._x+o*e._y+c*e._z;if(g<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,g=-g):this.copy(e),g>=1)return this._w=d,this._x=i,this._y=o,this._z=c,this;let b=1-g*g;if(b<=Number.EPSILON){let st=1-a;return this._w=st*d+a*this._w,this._x=st*i+a*this._x,this._y=st*o+a*this._y,this._z=st*c+a*this._z,this.normalize(),this._onChangeCallback(),this}let j=Math.sqrt(b),$=Math.atan2(j,g),rt=Math.sin((1-a)*$)/j,_e=Math.sin(a*$)/j;return this._w=d*rt+this._w*_e,this._x=i*rt+this._x*_e,this._y=o*rt+this._y*_e,this._z=c*rt+this._z*_e,this._onChangeCallback(),this}slerpQuaternions(e,a,i){return this.copy(e).slerp(a,i)}random(){let e=Math.random(),a=Math.sqrt(1-e),i=Math.sqrt(e),o=2*Math.PI*Math.random(),c=2*Math.PI*Math.random();return this.set(a*Math.cos(o),i*Math.sin(c),i*Math.cos(c),a*Math.sin(o))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,a=0){return this._x=e[a],this._y=e[a+1],this._z=e[a+2],this._w=e[a+3],this._onChangeCallback(),this}toArray(e=[],a=0){return e[a]=this._x,e[a+1]=this._y,e[a+2]=this._z,e[a+3]=this._w,e}fromBufferAttribute(e,a){return this._x=e.getX(a),this._y=e.getY(a),this._z=e.getZ(a),this._w=e.getW(a),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},_=class{constructor(e=0,a=0,i=0){_.prototype.isVector3=!0,this.x=e,this.y=a,this.z=i}set(e,a,i){return i===void 0&&(i=this.z),this.x=e,this.y=a,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,a){switch(e){case 0:this.x=a;break;case 1:this.y=a;break;case 2:this.z=a;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,a){return this.x=e.x+a.x,this.y=e.y+a.y,this.z=e.z+a.z,this}addScaledVector(e,a){return this.x+=e.x*a,this.y+=e.y*a,this.z+=e.z*a,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,a){return this.x=e.x-a.x,this.y=e.y-a.y,this.z=e.z-a.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,a){return this.x=e.x*a.x,this.y=e.y*a.y,this.z=e.z*a.z,this}applyEuler(e){return this.applyQuaternion(zT.setFromEuler(e))}applyAxisAngle(e,a){return this.applyQuaternion(zT.setFromAxisAngle(e,a))}applyMatrix3(e){let a=this.x,i=this.y,o=this.z,c=e.elements;return this.x=c[0]*a+c[3]*i+c[6]*o,this.y=c[1]*a+c[4]*i+c[7]*o,this.z=c[2]*a+c[5]*i+c[8]*o,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let a=this.x,i=this.y,o=this.z,c=e.elements,d=1/(c[3]*a+c[7]*i+c[11]*o+c[15]);return this.x=(c[0]*a+c[4]*i+c[8]*o+c[12])*d,this.y=(c[1]*a+c[5]*i+c[9]*o+c[13])*d,this.z=(c[2]*a+c[6]*i+c[10]*o+c[14])*d,this}applyQuaternion(e){let a=this.x,i=this.y,o=this.z,c=e.x,d=e.y,g=e.z,b=e.w,j=b*a+d*o-g*i,$=b*i+g*a-c*o,rt=b*o+c*i-d*a,_e=-c*a-d*i-g*o;return this.x=j*b+_e*-c+$*-g-rt*-d,this.y=$*b+_e*-d+rt*-c-j*-g,this.z=rt*b+_e*-g+j*-d-$*-c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let a=this.x,i=this.y,o=this.z,c=e.elements;return this.x=c[0]*a+c[4]*i+c[8]*o,this.y=c[1]*a+c[5]*i+c[9]*o,this.z=c[2]*a+c[6]*i+c[10]*o,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,a){return this.x=Math.max(e.x,Math.min(a.x,this.x)),this.y=Math.max(e.y,Math.min(a.y,this.y)),this.z=Math.max(e.z,Math.min(a.z,this.z)),this}clampScalar(e,a){return this.x=Math.max(e,Math.min(a,this.x)),this.y=Math.max(e,Math.min(a,this.y)),this.z=Math.max(e,Math.min(a,this.z)),this}clampLength(e,a){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(a,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,a){return this.x+=(e.x-this.x)*a,this.y+=(e.y-this.y)*a,this.z+=(e.z-this.z)*a,this}lerpVectors(e,a,i){return this.x=e.x+(a.x-e.x)*i,this.y=e.y+(a.y-e.y)*i,this.z=e.z+(a.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,a){let i=e.x,o=e.y,c=e.z,d=a.x,g=a.y,b=a.z;return this.x=o*b-c*g,this.y=c*d-i*b,this.z=i*g-o*d,this}projectOnVector(e){let a=e.lengthSq();if(a===0)return this.set(0,0,0);let i=e.dot(this)/a;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return gS.copy(this).projectOnVector(e),this.sub(gS)}reflect(e){return this.sub(gS.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let a=Math.sqrt(this.lengthSq()*e.lengthSq());if(a===0)return Math.PI/2;let i=this.dot(e)/a;return Math.acos(gi(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let a=this.x-e.x,i=this.y-e.y,o=this.z-e.z;return a*a+i*i+o*o}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,a,i){let o=Math.sin(a)*e;return this.x=o*Math.sin(i),this.y=Math.cos(a)*e,this.z=o*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,a,i){return this.x=e*Math.sin(a),this.y=i,this.z=e*Math.cos(a),this}setFromMatrixPosition(e){let a=e.elements;return this.x=a[12],this.y=a[13],this.z=a[14],this}setFromMatrixScale(e){let a=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),o=this.setFromMatrixColumn(e,2).length();return this.x=a,this.y=i,this.z=o,this}setFromMatrixColumn(e,a){return this.fromArray(e.elements,a*4)}setFromMatrix3Column(e,a){return this.fromArray(e.elements,a*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,a=0){return this.x=e[a],this.y=e[a+1],this.z=e[a+2],this}toArray(e=[],a=0){return e[a]=this.x,e[a+1]=this.y,e[a+2]=this.z,e}fromBufferAttribute(e,a){return this.x=e.getX(a),this.y=e.getY(a),this.z=e.getZ(a),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=(Math.random()-.5)*2,a=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(a),this.y=i*Math.sin(a),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},gS=new _,zT=new Qe,Wt=class{constructor(e=new _(1/0,1/0,1/0),a=new _(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=a}set(e,a){return this.min.copy(e),this.max.copy(a),this}setFromArray(e){let a=1/0,i=1/0,o=1/0,c=-1/0,d=-1/0,g=-1/0;for(let b=0,j=e.length;b<j;b+=3){let $=e[b],rt=e[b+1],_e=e[b+2];$<a&&(a=$),rt<i&&(i=rt),_e<o&&(o=_e),$>c&&(c=$),rt>d&&(d=rt),_e>g&&(g=_e)}return this.min.set(a,i,o),this.max.set(c,d,g),this}setFromBufferAttribute(e){let a=1/0,i=1/0,o=1/0,c=-1/0,d=-1/0,g=-1/0;for(let b=0,j=e.count;b<j;b++){let $=e.getX(b),rt=e.getY(b),_e=e.getZ(b);$<a&&(a=$),rt<i&&(i=rt),_e<o&&(o=_e),$>c&&(c=$),rt>d&&(d=rt),_e>g&&(g=_e)}return this.min.set(a,i,o),this.max.set(c,d,g),this}setFromPoints(e){this.makeEmpty();for(let a=0,i=e.length;a<i;a++)this.expandByPoint(e[a]);return this}setFromCenterAndSize(e,a){let i=fc.copy(a).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,a=!1){return this.makeEmpty(),this.expandByObject(e,a)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,a=!1){e.updateWorldMatrix(!1,!1);let i=e.geometry;if(i!==void 0)if(a&&i.attributes!=null&&i.attributes.position!==void 0){let c=i.attributes.position;for(let d=0,g=c.count;d<g;d++)fc.fromBufferAttribute(c,d).applyMatrix4(e.matrixWorld),this.expandByPoint(fc)}else i.boundingBox===null&&i.computeBoundingBox(),yS.copy(i.boundingBox),yS.applyMatrix4(e.matrixWorld),this.union(yS);let o=e.children;for(let c=0,d=o.length;c<d;c++)this.expandByObject(o[c],a);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,a){return a.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,fc),fc.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let a,i;return e.normal.x>0?(a=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(a=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(a+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(a+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(a+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(a+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),a<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(op$2),Ug.subVectors(this.max,op$2),_u.subVectors(e.a,op$2),Eu.subVectors(e.b,op$2),Tu.subVectors(e.c,op$2),el.subVectors(Eu,_u),tl.subVectors(Tu,Eu),pc.subVectors(_u,Tu);let a=[0,-el.z,el.y,0,-tl.z,tl.y,0,-pc.z,pc.y,el.z,0,-el.x,tl.z,0,-tl.x,pc.z,0,-pc.x,-el.y,el.x,0,-tl.y,tl.x,0,-pc.y,pc.x,0];return!vS(a,_u,Eu,Tu,Ug)||(a=[1,0,0,0,1,0,0,0,1],!vS(a,_u,Eu,Tu,Ug))?!1:(Gg.crossVectors(el,tl),a=[Gg.x,Gg.y,Gg.z],vS(a,_u,Eu,Tu,Ug))}clampPoint(e,a){return a.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return fc.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(fc).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(ua[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ua[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ua[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ua[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ua[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ua[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ua[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ua[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ua),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},ua=[new _,new _,new _,new _,new _,new _,new _,new _],fc=new _,yS=new Wt,_u=new _,Eu=new _,Tu=new _,el=new _,tl=new _,pc=new _,op$2=new _,Ug=new _,Gg=new _,mc=new _;function vS(e,a,i,o,c){for(let d=0,g=e.length-3;d<=g;d+=3){mc.fromArray(e,d);let b=c.x*Math.abs(mc.x)+c.y*Math.abs(mc.y)+c.z*Math.abs(mc.z),j=a.dot(mc),$=i.dot(mc),rt=o.dot(mc);if(Math.max(-Math.max(j,$,rt),Math.min(j,$,rt))>b)return!1}return!0}var fk=new Wt,ap=new _,xS=new _,Br=class{constructor(e=new _,a=-1){this.center=e,this.radius=a}set(e,a){return this.center.copy(e),this.radius=a,this}setFromPoints(e,a){let i=this.center;a!==void 0?i.copy(a):fk.setFromPoints(e).getCenter(i);let o=0;for(let c=0,d=e.length;c<d;c++)o=Math.max(o,i.distanceToSquared(e[c]));return this.radius=Math.sqrt(o),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let a=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=a*a}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,a){let i=this.center.distanceToSquared(e);return a.copy(e),i>this.radius*this.radius&&(a.sub(this.center).normalize(),a.multiplyScalar(this.radius).add(this.center)),a}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;ap.subVectors(e,this.center);let a=ap.lengthSq();if(a>this.radius*this.radius){let i=Math.sqrt(a),o=(i-this.radius)*.5;this.center.addScaledVector(ap,o/i),this.radius+=o}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(xS.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(ap.copy(e.center).add(xS)),this.expandByPoint(ap.copy(e.center).sub(xS))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}},ha=new _,bS=new _,jg=new _,rl=new _,SS=new _,Hg=new _,wS=new _,qs=class{constructor(e=new _,a=new _(0,0,-1)){this.origin=e,this.direction=a}set(e,a){return this.origin.copy(e),this.direction.copy(a),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,a){return a.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ha)),this}closestPointToPoint(e,a){a.subVectors(e,this.origin);let i=a.dot(this.direction);return i<0?a.copy(this.origin):a.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let a=ha.subVectors(e,this.origin).dot(this.direction);return a<0?this.origin.distanceToSquared(e):(ha.copy(this.direction).multiplyScalar(a).add(this.origin),ha.distanceToSquared(e))}distanceSqToSegment(e,a,i,o){bS.copy(e).add(a).multiplyScalar(.5),jg.copy(a).sub(e).normalize(),rl.copy(this.origin).sub(bS);let c=e.distanceTo(a)*.5,d=-this.direction.dot(jg),g=rl.dot(this.direction),b=-rl.dot(jg),j=rl.lengthSq(),$=Math.abs(1-d*d),rt,_e,st,ut;if($>0)if(rt=d*b-g,_e=d*g-b,ut=c*$,rt>=0)if(_e>=-ut)if(_e<=ut){let gt=1/$;rt*=gt,_e*=gt,st=rt*(rt+d*_e+2*g)+_e*(d*rt+_e+2*b)+j}else _e=c,rt=Math.max(0,-(d*_e+g)),st=-rt*rt+_e*(_e+2*b)+j;else _e=-c,rt=Math.max(0,-(d*_e+g)),st=-rt*rt+_e*(_e+2*b)+j;else _e<=-ut?(rt=Math.max(0,-(-d*c+g)),_e=rt>0?-c:Math.min(Math.max(-c,-b),c),st=-rt*rt+_e*(_e+2*b)+j):_e<=ut?(rt=0,_e=Math.min(Math.max(-c,-b),c),st=_e*(_e+2*b)+j):(rt=Math.max(0,-(d*c+g)),_e=rt>0?c:Math.min(Math.max(-c,-b),c),st=-rt*rt+_e*(_e+2*b)+j);else _e=d>0?-c:c,rt=Math.max(0,-(d*_e+g)),st=-rt*rt+_e*(_e+2*b)+j;return i&&i.copy(this.direction).multiplyScalar(rt).add(this.origin),o&&o.copy(jg).multiplyScalar(_e).add(bS),st}intersectSphere(e,a){ha.subVectors(e.center,this.origin);let i=ha.dot(this.direction),o=ha.dot(ha)-i*i,c=e.radius*e.radius;if(o>c)return null;let d=Math.sqrt(c-o),g=i-d,b=i+d;return g<0&&b<0?null:g<0?this.at(b,a):this.at(g,a)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let a=e.normal.dot(this.direction);if(a===0)return e.distanceToPoint(this.origin)===0?0:null;let i=-(this.origin.dot(e.normal)+e.constant)/a;return i>=0?i:null}intersectPlane(e,a){let i=this.distanceToPlane(e);return i===null?null:this.at(i,a)}intersectsPlane(e){let a=e.distanceToPoint(this.origin);return a===0||e.normal.dot(this.direction)*a<0}intersectBox(e,a){let i,o,c,d,g,b,j=1/this.direction.x,$=1/this.direction.y,rt=1/this.direction.z,_e=this.origin;return j>=0?(i=(e.min.x-_e.x)*j,o=(e.max.x-_e.x)*j):(i=(e.max.x-_e.x)*j,o=(e.min.x-_e.x)*j),$>=0?(c=(e.min.y-_e.y)*$,d=(e.max.y-_e.y)*$):(c=(e.max.y-_e.y)*$,d=(e.min.y-_e.y)*$),i>d||c>o||((c>i||isNaN(i))&&(i=c),(d<o||isNaN(o))&&(o=d),rt>=0?(g=(e.min.z-_e.z)*rt,b=(e.max.z-_e.z)*rt):(g=(e.max.z-_e.z)*rt,b=(e.min.z-_e.z)*rt),i>b||g>o)||((g>i||i!==i)&&(i=g),(b<o||o!==o)&&(o=b),o<0)?null:this.at(i>=0?i:o,a)}intersectsBox(e){return this.intersectBox(e,ha)!==null}intersectTriangle(e,a,i,o,c){SS.subVectors(a,e),Hg.subVectors(i,e),wS.crossVectors(SS,Hg);let d=this.direction.dot(wS),g;if(d>0){if(o)return null;g=1}else if(d<0)g=-1,d=-d;else return null;rl.subVectors(this.origin,e);let b=g*this.direction.dot(Hg.crossVectors(rl,Hg));if(b<0)return null;let j=g*this.direction.dot(SS.cross(rl));if(j<0||b+j>d)return null;let $=-g*rl.dot(wS);return $<0?null:this.at($/d,c)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},ce$1=class{constructor(){ce$1.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(a,i,o,c,d,g,b,j,$,rt,_e,st,ut,gt,yt,Pt){let wt=this.elements;return wt[0]=a,wt[4]=i,wt[8]=o,wt[12]=c,wt[1]=d,wt[5]=g,wt[9]=b,wt[13]=j,wt[2]=$,wt[6]=rt,wt[10]=_e,wt[14]=st,wt[3]=ut,wt[7]=gt,wt[11]=yt,wt[15]=Pt,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new ce$1().fromArray(this.elements)}copy(a){let i=this.elements,o=a.elements;return i[0]=o[0],i[1]=o[1],i[2]=o[2],i[3]=o[3],i[4]=o[4],i[5]=o[5],i[6]=o[6],i[7]=o[7],i[8]=o[8],i[9]=o[9],i[10]=o[10],i[11]=o[11],i[12]=o[12],i[13]=o[13],i[14]=o[14],i[15]=o[15],this}copyPosition(a){let i=this.elements,o=a.elements;return i[12]=o[12],i[13]=o[13],i[14]=o[14],this}setFromMatrix3(a){let i=a.elements;return this.set(i[0],i[3],i[6],0,i[1],i[4],i[7],0,i[2],i[5],i[8],0,0,0,0,1),this}extractBasis(a,i,o){return a.setFromMatrixColumn(this,0),i.setFromMatrixColumn(this,1),o.setFromMatrixColumn(this,2),this}makeBasis(a,i,o){return this.set(a.x,i.x,o.x,0,a.y,i.y,o.y,0,a.z,i.z,o.z,0,0,0,0,1),this}extractRotation(a){let i=this.elements,o=a.elements,c=1/Mu.setFromMatrixColumn(a,0).length(),d=1/Mu.setFromMatrixColumn(a,1).length(),g=1/Mu.setFromMatrixColumn(a,2).length();return i[0]=o[0]*c,i[1]=o[1]*c,i[2]=o[2]*c,i[3]=0,i[4]=o[4]*d,i[5]=o[5]*d,i[6]=o[6]*d,i[7]=0,i[8]=o[8]*g,i[9]=o[9]*g,i[10]=o[10]*g,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this}makeRotationFromEuler(a){let i=this.elements,o=a.x,c=a.y,d=a.z,g=Math.cos(o),b=Math.sin(o),j=Math.cos(c),$=Math.sin(c),rt=Math.cos(d),_e=Math.sin(d);if(a.order==="XYZ"){let st=g*rt,ut=g*_e,gt=b*rt,yt=b*_e;i[0]=j*rt,i[4]=-j*_e,i[8]=$,i[1]=ut+gt*$,i[5]=st-yt*$,i[9]=-b*j,i[2]=yt-st*$,i[6]=gt+ut*$,i[10]=g*j}else if(a.order==="YXZ"){let st=j*rt,ut=j*_e,gt=$*rt,yt=$*_e;i[0]=st+yt*b,i[4]=gt*b-ut,i[8]=g*$,i[1]=g*_e,i[5]=g*rt,i[9]=-b,i[2]=ut*b-gt,i[6]=yt+st*b,i[10]=g*j}else if(a.order==="ZXY"){let st=j*rt,ut=j*_e,gt=$*rt,yt=$*_e;i[0]=st-yt*b,i[4]=-g*_e,i[8]=gt+ut*b,i[1]=ut+gt*b,i[5]=g*rt,i[9]=yt-st*b,i[2]=-g*$,i[6]=b,i[10]=g*j}else if(a.order==="ZYX"){let st=g*rt,ut=g*_e,gt=b*rt,yt=b*_e;i[0]=j*rt,i[4]=gt*$-ut,i[8]=st*$+yt,i[1]=j*_e,i[5]=yt*$+st,i[9]=ut*$-gt,i[2]=-$,i[6]=b*j,i[10]=g*j}else if(a.order==="YZX"){let st=g*j,ut=g*$,gt=b*j,yt=b*$;i[0]=j*rt,i[4]=yt-st*_e,i[8]=gt*_e+ut,i[1]=_e,i[5]=g*rt,i[9]=-b*rt,i[2]=-$*rt,i[6]=ut*_e+gt,i[10]=st-yt*_e}else if(a.order==="XZY"){let st=g*j,ut=g*$,gt=b*j,yt=b*$;i[0]=j*rt,i[4]=-_e,i[8]=$*rt,i[1]=st*_e+yt,i[5]=g*rt,i[9]=ut*_e-gt,i[2]=gt*_e-ut,i[6]=b*rt,i[10]=yt*_e+st}return i[3]=0,i[7]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this}makeRotationFromQuaternion(a){return this.compose(pk,a,mk)}lookAt(a,i,o){let c=this.elements;return Jn.subVectors(a,i),Jn.lengthSq()===0&&(Jn.z=1),Jn.normalize(),il.crossVectors(o,Jn),il.lengthSq()===0&&(Math.abs(o.z)===1?Jn.x+=1e-4:Jn.z+=1e-4,Jn.normalize(),il.crossVectors(o,Jn)),il.normalize(),Wg.crossVectors(Jn,il),c[0]=il.x,c[4]=Wg.x,c[8]=Jn.x,c[1]=il.y,c[5]=Wg.y,c[9]=Jn.y,c[2]=il.z,c[6]=Wg.z,c[10]=Jn.z,this}multiply(a){return this.multiplyMatrices(this,a)}premultiply(a){return this.multiplyMatrices(a,this)}multiplyMatrices(a,i){let o=a.elements,c=i.elements,d=this.elements,g=o[0],b=o[4],j=o[8],$=o[12],rt=o[1],_e=o[5],st=o[9],ut=o[13],gt=o[2],yt=o[6],Pt=o[10],wt=o[14],Ct=o[3],At=o[7],Tt=o[11],kt=o[15],It=c[0],Lt=c[4],Ft=c[8],Nt=c[12],Ht=c[1],Gr=c[5],hs=c[9],_s=c[13],hn=c[2],Qn=c[6],ds=c[10],un=c[14],dr=c[3],us=c[7],Nn=c[11],gn=c[15];return d[0]=g*It+b*Ht+j*hn+$*dr,d[4]=g*Lt+b*Gr+j*Qn+$*us,d[8]=g*Ft+b*hs+j*ds+$*Nn,d[12]=g*Nt+b*_s+j*un+$*gn,d[1]=rt*It+_e*Ht+st*hn+ut*dr,d[5]=rt*Lt+_e*Gr+st*Qn+ut*us,d[9]=rt*Ft+_e*hs+st*ds+ut*Nn,d[13]=rt*Nt+_e*_s+st*un+ut*gn,d[2]=gt*It+yt*Ht+Pt*hn+wt*dr,d[6]=gt*Lt+yt*Gr+Pt*Qn+wt*us,d[10]=gt*Ft+yt*hs+Pt*ds+wt*Nn,d[14]=gt*Nt+yt*_s+Pt*un+wt*gn,d[3]=Ct*It+At*Ht+Tt*hn+kt*dr,d[7]=Ct*Lt+At*Gr+Tt*Qn+kt*us,d[11]=Ct*Ft+At*hs+Tt*ds+kt*Nn,d[15]=Ct*Nt+At*_s+Tt*un+kt*gn,this}multiplyScalar(a){let i=this.elements;return i[0]*=a,i[4]*=a,i[8]*=a,i[12]*=a,i[1]*=a,i[5]*=a,i[9]*=a,i[13]*=a,i[2]*=a,i[6]*=a,i[10]*=a,i[14]*=a,i[3]*=a,i[7]*=a,i[11]*=a,i[15]*=a,this}determinant(){let a=this.elements,i=a[0],o=a[4],c=a[8],d=a[12],g=a[1],b=a[5],j=a[9],$=a[13],rt=a[2],_e=a[6],st=a[10],ut=a[14],gt=a[3],yt=a[7],Pt=a[11],wt=a[15];return gt*(+d*j*_e-c*$*_e-d*b*st+o*$*st+c*b*ut-o*j*ut)+yt*(+i*j*ut-i*$*st+d*g*st-c*g*ut+c*$*rt-d*j*rt)+Pt*(+i*$*_e-i*b*ut-d*g*_e+o*g*ut+d*b*rt-o*$*rt)+wt*(-c*b*rt-i*j*_e+i*b*st+c*g*_e-o*g*st+o*j*rt)}transpose(){let a=this.elements,i;return i=a[1],a[1]=a[4],a[4]=i,i=a[2],a[2]=a[8],a[8]=i,i=a[6],a[6]=a[9],a[9]=i,i=a[3],a[3]=a[12],a[12]=i,i=a[7],a[7]=a[13],a[13]=i,i=a[11],a[11]=a[14],a[14]=i,this}setPosition(a,i,o){let c=this.elements;return a.isVector3?(c[12]=a.x,c[13]=a.y,c[14]=a.z):(c[12]=a,c[13]=i,c[14]=o),this}invert(){let a=this.elements,i=a[0],o=a[1],c=a[2],d=a[3],g=a[4],b=a[5],j=a[6],$=a[7],rt=a[8],_e=a[9],st=a[10],ut=a[11],gt=a[12],yt=a[13],Pt=a[14],wt=a[15],Ct=_e*Pt*$-yt*st*$+yt*j*ut-b*Pt*ut-_e*j*wt+b*st*wt,At=gt*st*$-rt*Pt*$-gt*j*ut+g*Pt*ut+rt*j*wt-g*st*wt,Tt=rt*yt*$-gt*_e*$+gt*b*ut-g*yt*ut-rt*b*wt+g*_e*wt,kt=gt*_e*j-rt*yt*j-gt*b*st+g*yt*st+rt*b*Pt-g*_e*Pt,It=i*Ct+o*At+c*Tt+d*kt;if(It===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let Lt=1/It;return a[0]=Ct*Lt,a[1]=(yt*st*d-_e*Pt*d-yt*c*ut+o*Pt*ut+_e*c*wt-o*st*wt)*Lt,a[2]=(b*Pt*d-yt*j*d+yt*c*$-o*Pt*$-b*c*wt+o*j*wt)*Lt,a[3]=(_e*j*d-b*st*d-_e*c*$+o*st*$+b*c*ut-o*j*ut)*Lt,a[4]=At*Lt,a[5]=(rt*Pt*d-gt*st*d+gt*c*ut-i*Pt*ut-rt*c*wt+i*st*wt)*Lt,a[6]=(gt*j*d-g*Pt*d-gt*c*$+i*Pt*$+g*c*wt-i*j*wt)*Lt,a[7]=(g*st*d-rt*j*d+rt*c*$-i*st*$-g*c*ut+i*j*ut)*Lt,a[8]=Tt*Lt,a[9]=(gt*_e*d-rt*yt*d-gt*o*ut+i*yt*ut+rt*o*wt-i*_e*wt)*Lt,a[10]=(g*yt*d-gt*b*d+gt*o*$-i*yt*$-g*o*wt+i*b*wt)*Lt,a[11]=(rt*b*d-g*_e*d-rt*o*$+i*_e*$+g*o*ut-i*b*ut)*Lt,a[12]=kt*Lt,a[13]=(rt*yt*c-gt*_e*c+gt*o*st-i*yt*st-rt*o*Pt+i*_e*Pt)*Lt,a[14]=(gt*b*c-g*yt*c-gt*o*j+i*yt*j+g*o*Pt-i*b*Pt)*Lt,a[15]=(g*_e*c-rt*b*c+rt*o*j-i*_e*j-g*o*st+i*b*st)*Lt,this}scale(a){let i=this.elements,o=a.x,c=a.y,d=a.z;return i[0]*=o,i[4]*=c,i[8]*=d,i[1]*=o,i[5]*=c,i[9]*=d,i[2]*=o,i[6]*=c,i[10]*=d,i[3]*=o,i[7]*=c,i[11]*=d,this}getMaxScaleOnAxis(){let a=this.elements,i=a[0]*a[0]+a[1]*a[1]+a[2]*a[2],o=a[4]*a[4]+a[5]*a[5]+a[6]*a[6],c=a[8]*a[8]+a[9]*a[9]+a[10]*a[10];return Math.sqrt(Math.max(i,o,c))}makeTranslation(a,i,o){return this.set(1,0,0,a,0,1,0,i,0,0,1,o,0,0,0,1),this}makeRotationX(a){let i=Math.cos(a),o=Math.sin(a);return this.set(1,0,0,0,0,i,-o,0,0,o,i,0,0,0,0,1),this}makeRotationY(a){let i=Math.cos(a),o=Math.sin(a);return this.set(i,0,o,0,0,1,0,0,-o,0,i,0,0,0,0,1),this}makeRotationZ(a){let i=Math.cos(a),o=Math.sin(a);return this.set(i,-o,0,0,o,i,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(a,i){let o=Math.cos(i),c=Math.sin(i),d=1-o,g=a.x,b=a.y,j=a.z,$=d*g,rt=d*b;return this.set($*g+o,$*b-c*j,$*j+c*b,0,$*b+c*j,rt*b+o,rt*j-c*g,0,$*j-c*b,rt*j+c*g,d*j*j+o,0,0,0,0,1),this}makeScale(a,i,o){return this.set(a,0,0,0,0,i,0,0,0,0,o,0,0,0,0,1),this}makeShear(a,i,o,c,d,g){return this.set(1,o,d,0,a,1,g,0,i,c,1,0,0,0,0,1),this}compose(a,i,o){let c=this.elements,d=i._x,g=i._y,b=i._z,j=i._w,$=d+d,rt=g+g,_e=b+b,st=d*$,ut=d*rt,gt=d*_e,yt=g*rt,Pt=g*_e,wt=b*_e,Ct=j*$,At=j*rt,Tt=j*_e,kt=o.x,It=o.y,Lt=o.z;return c[0]=(1-(yt+wt))*kt,c[1]=(ut+Tt)*kt,c[2]=(gt-At)*kt,c[3]=0,c[4]=(ut-Tt)*It,c[5]=(1-(st+wt))*It,c[6]=(Pt+Ct)*It,c[7]=0,c[8]=(gt+At)*Lt,c[9]=(Pt-Ct)*Lt,c[10]=(1-(st+yt))*Lt,c[11]=0,c[12]=a.x,c[13]=a.y,c[14]=a.z,c[15]=1,this}decompose(a,i,o){let c=this.elements,d=Mu.set(c[0],c[1],c[2]).length(),g=Mu.set(c[4],c[5],c[6]).length(),b=Mu.set(c[8],c[9],c[10]).length();this.determinant()<0&&(d=-d),a.x=c[12],a.y=c[13],a.z=c[14],Us.copy(this);let j=1/d,$=1/g,rt=1/b;return Us.elements[0]*=j,Us.elements[1]*=j,Us.elements[2]*=j,Us.elements[4]*=$,Us.elements[5]*=$,Us.elements[6]*=$,Us.elements[8]*=rt,Us.elements[9]*=rt,Us.elements[10]*=rt,i.setFromRotationMatrix(Us),o.x=d,o.y=g,o.z=b,this}makePerspective(a,i,o,c,d,g){let b=this.elements,j=2*d/(i-a),$=2*d/(o-c),rt=(i+a)/(i-a),_e=(o+c)/(o-c),st=-(g+d)/(g-d),ut=-2*g*d/(g-d);return b[0]=j,b[4]=0,b[8]=rt,b[12]=0,b[1]=0,b[5]=$,b[9]=_e,b[13]=0,b[2]=0,b[6]=0,b[10]=st,b[14]=ut,b[3]=0,b[7]=0,b[11]=-1,b[15]=0,this}makeOrthographic(a,i,o,c,d,g){let b=this.elements,j=1/(i-a),$=1/(o-c),rt=1/(g-d),_e=(i+a)*j,st=(o+c)*$,ut=(g+d)*rt;return b[0]=2*j,b[4]=0,b[8]=0,b[12]=-_e,b[1]=0,b[5]=2*$,b[9]=0,b[13]=-st,b[2]=0,b[6]=0,b[10]=-2*rt,b[14]=-ut,b[3]=0,b[7]=0,b[11]=0,b[15]=1,this}equals(a){let i=this.elements,o=a.elements;for(let c=0;c<16;c++)if(i[c]!==o[c])return!1;return!0}fromArray(a,i=0){for(let o=0;o<16;o++)this.elements[o]=a[o+i];return this}toArray(a=[],i=0){let o=this.elements;return a[i]=o[0],a[i+1]=o[1],a[i+2]=o[2],a[i+3]=o[3],a[i+4]=o[4],a[i+5]=o[5],a[i+6]=o[6],a[i+7]=o[7],a[i+8]=o[8],a[i+9]=o[9],a[i+10]=o[10],a[i+11]=o[11],a[i+12]=o[12],a[i+13]=o[13],a[i+14]=o[14],a[i+15]=o[15],a}},Mu=new _,Us=new ce$1,pk=new _(0,0,0),mk=new _(1,1,1),il=new _,Wg=new _,Jn=new _,UT=new ce$1,GT=new Qe,or$1=class{constructor(a=0,i=0,o=0,c=or$1.DEFAULT_ORDER){this.isEuler=!0,this._x=a,this._y=i,this._z=o,this._order=c}get x(){return this._x}set x(a){this._x=a,this._onChangeCallback()}get y(){return this._y}set y(a){this._y=a,this._onChangeCallback()}get z(){return this._z}set z(a){this._z=a,this._onChangeCallback()}get order(){return this._order}set order(a){this._order=a,this._onChangeCallback()}set(a,i,o,c=this._order){return this._x=a,this._y=i,this._z=o,this._order=c,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(a){return this._x=a._x,this._y=a._y,this._z=a._z,this._order=a._order,this._onChangeCallback(),this}setFromRotationMatrix(a,i=this._order,o=!0){let c=a.elements,d=c[0],g=c[4],b=c[8],j=c[1],$=c[5],rt=c[9],_e=c[2],st=c[6],ut=c[10];switch(i){case"XYZ":this._y=Math.asin(gi(b,-1,1)),Math.abs(b)<.9999999?(this._x=Math.atan2(-rt,ut),this._z=Math.atan2(-g,d)):(this._x=Math.atan2(st,$),this._z=0);break;case"YXZ":this._x=Math.asin(-gi(rt,-1,1)),Math.abs(rt)<.9999999?(this._y=Math.atan2(b,ut),this._z=Math.atan2(j,$)):(this._y=Math.atan2(-_e,d),this._z=0);break;case"ZXY":this._x=Math.asin(gi(st,-1,1)),Math.abs(st)<.9999999?(this._y=Math.atan2(-_e,ut),this._z=Math.atan2(-g,$)):(this._y=0,this._z=Math.atan2(j,d));break;case"ZYX":this._y=Math.asin(-gi(_e,-1,1)),Math.abs(_e)<.9999999?(this._x=Math.atan2(st,ut),this._z=Math.atan2(j,d)):(this._x=0,this._z=Math.atan2(-g,$));break;case"YZX":this._z=Math.asin(gi(j,-1,1)),Math.abs(j)<.9999999?(this._x=Math.atan2(-rt,$),this._y=Math.atan2(-_e,d)):(this._x=0,this._y=Math.atan2(b,ut));break;case"XZY":this._z=Math.asin(-gi(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(st,$),this._y=Math.atan2(b,d)):(this._x=Math.atan2(-rt,ut),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,o===!0&&this._onChangeCallback(),this}setFromQuaternion(a,i,o){return UT.makeRotationFromQuaternion(a),this.setFromRotationMatrix(UT,i,o)}setFromVector3(a,i=this._order){return this.set(a.x,a.y,a.z,i)}reorder(a){return GT.setFromEuler(this),this.setFromQuaternion(GT,a)}equals(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._order===this._order}fromArray(a){return this._x=a[0],this._y=a[1],this._z=a[2],a[3]!==void 0&&(this._order=a[3]),this._onChangeCallback(),this}toArray(a=[],i=0){return a[i]=this._x,a[i+1]=this._y,a[i+2]=this._z,a[i+3]=this._order,a}_onChange(a){return this._onChangeCallback=a,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}};or$1.DEFAULT_ORDER="XYZ";var Ep=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},gk=0,jT=new _,Cu=new Qe,da=new ce$1,qg=new _,lp=new _,yk=new _,vk=new Qe,HT=new _(1,0,0),WT=new _(0,1,0),qT=new _(0,0,1),xk={type:"added"},YT={type:"removed"},_t=class extends fr$2{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:gk++}),this.uuid=ms(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=_t.DEFAULT_UP.clone();let e=new _,a=new or$1,i=new Qe,o=new _(1,1,1);function c(){i.setFromEuler(a,!1)}function d(){a.setFromQuaternion(i,void 0,!1)}a._onChange(c),i._onChange(d),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:a},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new ce$1},normalMatrix:{value:new nr}}),this.matrix=new ce$1,this.matrixWorld=new ce$1,this.matrixAutoUpdate=_t.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=_t.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Ep,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,a){this.quaternion.setFromAxisAngle(e,a)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,a){return Cu.setFromAxisAngle(e,a),this.quaternion.multiply(Cu),this}rotateOnWorldAxis(e,a){return Cu.setFromAxisAngle(e,a),this.quaternion.premultiply(Cu),this}rotateX(e){return this.rotateOnAxis(HT,e)}rotateY(e){return this.rotateOnAxis(WT,e)}rotateZ(e){return this.rotateOnAxis(qT,e)}translateOnAxis(e,a){return jT.copy(e).applyQuaternion(this.quaternion),this.position.add(jT.multiplyScalar(a)),this}translateX(e){return this.translateOnAxis(HT,e)}translateY(e){return this.translateOnAxis(WT,e)}translateZ(e){return this.translateOnAxis(qT,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(da.copy(this.matrixWorld).invert())}lookAt(e,a,i){e.isVector3?qg.copy(e):qg.set(e,a,i);let o=this.parent;this.updateWorldMatrix(!0,!1),lp.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?da.lookAt(lp,qg,this.up):da.lookAt(qg,lp,this.up),this.quaternion.setFromRotationMatrix(da),o&&(da.extractRotation(o.matrixWorld),Cu.setFromRotationMatrix(da),this.quaternion.premultiply(Cu.invert()))}add(e){if(arguments.length>1){for(let a=0;a<arguments.length;a++)this.add(arguments[a]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(xk)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}let a=this.children.indexOf(e);return a!==-1&&(e.parent=null,this.children.splice(a,1),e.dispatchEvent(YT)),this}removeFromParent(){let e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){let a=this.children[e];a.parent=null,a.dispatchEvent(YT)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),da.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),da.multiply(e.parent.matrixWorld)),e.applyMatrix4(da),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,a){if(this[e]===a)return this;for(let i=0,o=this.children.length;i<o;i++){let c=this.children[i].getObjectByProperty(e,a);if(c!==void 0)return c}}getObjectsByProperty(e,a){let i=[];this[e]===a&&i.push(this);for(let o=0,c=this.children.length;o<c;o++){let d=this.children[o].getObjectsByProperty(e,a);d.length>0&&(i=i.concat(d))}return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(lp,e,yk),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(lp,vk,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let a=this.matrixWorld.elements;return e.set(a[8],a[9],a[10]).normalize()}raycast(){}traverse(e){e(this);let a=this.children;for(let i=0,o=a.length;i<o;i++)a[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);let a=this.children;for(let i=0,o=a.length;i<o;i++)a[i].traverseVisible(e)}traverseAncestors(e){let a=this.parent;a!==null&&(e(a),a.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);let a=this.children;for(let i=0,o=a.length;i<o;i++){let c=a[i];(c.matrixWorldAutoUpdate===!0||e===!0)&&c.updateMatrixWorld(e)}}updateWorldMatrix(e,a){let i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),a===!0){let o=this.children;for(let c=0,d=o.length;c<d;c++){let g=o[c];g.matrixWorldAutoUpdate===!0&&g.updateWorldMatrix(!1,!0)}}}toJSON(e){let a=e===void 0||typeof e=="string",i={};a&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});let o={};o.uuid=this.uuid,o.type=this.type,this.name!==""&&(o.name=this.name),this.castShadow===!0&&(o.castShadow=!0),this.receiveShadow===!0&&(o.receiveShadow=!0),this.visible===!1&&(o.visible=!1),this.frustumCulled===!1&&(o.frustumCulled=!1),this.renderOrder!==0&&(o.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(o.instanceColor=this.instanceColor.toJSON()));function c(g,b){return g[b.uuid]===void 0&&(g[b.uuid]=b.toJSON(e)),b.uuid}if(this.isScene)this.background&&(this.background.isColor?o.background=this.background.toJSON():this.background.isTexture&&(o.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(o.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){o.geometry=c(e.geometries,this.geometry);let g=this.geometry.parameters;if(g!==void 0&&g.shapes!==void 0){let b=g.shapes;if(Array.isArray(b))for(let j=0,$=b.length;j<$;j++){let rt=b[j];c(e.shapes,rt)}else c(e.shapes,b)}}if(this.isSkinnedMesh&&(o.bindMode=this.bindMode,o.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(c(e.skeletons,this.skeleton),o.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let g=[];for(let b=0,j=this.material.length;b<j;b++)g.push(c(e.materials,this.material[b]));o.material=g}else o.material=c(e.materials,this.material);if(this.children.length>0){o.children=[];for(let g=0;g<this.children.length;g++)o.children.push(this.children[g].toJSON(e).object)}if(this.animations.length>0){o.animations=[];for(let g=0;g<this.animations.length;g++){let b=this.animations[g];o.animations.push(c(e.animations,b))}}if(a){let g=d(e.geometries),b=d(e.materials),j=d(e.textures),$=d(e.images),rt=d(e.shapes),_e=d(e.skeletons),st=d(e.animations),ut=d(e.nodes);g.length>0&&(i.geometries=g),b.length>0&&(i.materials=b),j.length>0&&(i.textures=j),$.length>0&&(i.images=$),rt.length>0&&(i.shapes=rt),_e.length>0&&(i.skeletons=_e),st.length>0&&(i.animations=st),ut.length>0&&(i.nodes=ut)}return i.object=o,i;function d(g){let b=[];for(let j in g){let $=g[j];delete $.metadata,b.push($)}return b}}clone(e){return new this.constructor().copy(this,e)}copy(e,a=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),a===!0)for(let i=0;i<e.children.length;i++){let o=e.children[i];this.add(o.clone())}return this}};_t.DEFAULT_UP=new _(0,1,0);_t.DEFAULT_MATRIX_AUTO_UPDATE=!0;_t.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;var Gs=new _,fa=new _,AS=new _,pa=new _,Pu=new _,Du=new _,XT=new _,_S=new _,ES=new _,TS=new _,Dr$1=class{constructor(a=new _,i=new _,o=new _){this.a=a,this.b=i,this.c=o}static getNormal(a,i,o,c){c.subVectors(o,i),Gs.subVectors(a,i),c.cross(Gs);let d=c.lengthSq();return d>0?c.multiplyScalar(1/Math.sqrt(d)):c.set(0,0,0)}static getBarycoord(a,i,o,c,d){Gs.subVectors(c,i),fa.subVectors(o,i),AS.subVectors(a,i);let g=Gs.dot(Gs),b=Gs.dot(fa),j=Gs.dot(AS),$=fa.dot(fa),rt=fa.dot(AS),_e=g*$-b*b;if(_e===0)return d.set(-2,-1,-1);let st=1/_e,ut=($*j-b*rt)*st,gt=(g*rt-b*j)*st;return d.set(1-ut-gt,gt,ut)}static containsPoint(a,i,o,c){return this.getBarycoord(a,i,o,c,pa),pa.x>=0&&pa.y>=0&&pa.x+pa.y<=1}static getUV(a,i,o,c,d,g,b,j){return this.getBarycoord(a,i,o,c,pa),j.set(0,0),j.addScaledVector(d,pa.x),j.addScaledVector(g,pa.y),j.addScaledVector(b,pa.z),j}static isFrontFacing(a,i,o,c){return Gs.subVectors(o,i),fa.subVectors(a,i),Gs.cross(fa).dot(c)<0}set(a,i,o){return this.a.copy(a),this.b.copy(i),this.c.copy(o),this}setFromPointsAndIndices(a,i,o,c){return this.a.copy(a[i]),this.b.copy(a[o]),this.c.copy(a[c]),this}setFromAttributeAndIndices(a,i,o,c){return this.a.fromBufferAttribute(a,i),this.b.fromBufferAttribute(a,o),this.c.fromBufferAttribute(a,c),this}clone(){return new this.constructor().copy(this)}copy(a){return this.a.copy(a.a),this.b.copy(a.b),this.c.copy(a.c),this}getArea(){return Gs.subVectors(this.c,this.b),fa.subVectors(this.a,this.b),Gs.cross(fa).length()*.5}getMidpoint(a){return a.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(a){return Dr$1.getNormal(this.a,this.b,this.c,a)}getPlane(a){return a.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(a,i){return Dr$1.getBarycoord(a,this.a,this.b,this.c,i)}getUV(a,i,o,c,d){return Dr$1.getUV(a,this.a,this.b,this.c,i,o,c,d)}containsPoint(a){return Dr$1.containsPoint(a,this.a,this.b,this.c)}isFrontFacing(a){return Dr$1.isFrontFacing(this.a,this.b,this.c,a)}intersectsBox(a){return a.intersectsTriangle(this)}closestPointToPoint(a,i){let o=this.a,c=this.b,d=this.c,g,b;Pu.subVectors(c,o),Du.subVectors(d,o),_S.subVectors(a,o);let j=Pu.dot(_S),$=Du.dot(_S);if(j<=0&&$<=0)return i.copy(o);ES.subVectors(a,c);let rt=Pu.dot(ES),_e=Du.dot(ES);if(rt>=0&&_e<=rt)return i.copy(c);let st=j*_e-rt*$;if(st<=0&&j>=0&&rt<=0)return g=j/(j-rt),i.copy(o).addScaledVector(Pu,g);TS.subVectors(a,d);let ut=Pu.dot(TS),gt=Du.dot(TS);if(gt>=0&&ut<=gt)return i.copy(d);let yt=ut*$-j*gt;if(yt<=0&&$>=0&&gt<=0)return b=$/($-gt),i.copy(o).addScaledVector(Du,b);let Pt=rt*gt-ut*_e;if(Pt<=0&&_e-rt>=0&&ut-gt>=0)return XT.subVectors(d,c),b=(_e-rt)/(_e-rt+(ut-gt)),i.copy(c).addScaledVector(XT,b);let wt=1/(Pt+yt+st);return g=yt*wt,b=st*wt,i.copy(o).addScaledVector(Pu,g).addScaledVector(Du,b)}equals(a){return a.a.equals(this.a)&&a.b.equals(this.b)&&a.c.equals(this.c)}},bk=0,Sc=class extends fr$2{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:bk++}),this.uuid=ms(),this.name="",this.type="Material",this.blending=sl,this.side=es,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=zM,this.blendDst=UM,this.blendEquation=Fu,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=US,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=ZF,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=hS,this.stencilZFail=hS,this.stencilZPass=hS,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(let a in e){let i=e[a];if(i===void 0){console.warn("THREE.Material: '"+a+"' parameter is undefined.");continue}let o=this[a];if(o===void 0){console.warn("THREE."+this.type+": '"+a+"' is not a property of this material.");continue}o&&o.isColor?o.set(i):o&&o.isVector3&&i&&i.isVector3?o.copy(i):this[a]=i}}toJSON(e){let a=e===void 0||typeof e=="string";a&&(e={textures:{},images:{}});let i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==sl&&(i.blending=this.blending),this.side!==es&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(i.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function o(c){let d=[];for(let g in c){let b=c[g];delete b.metadata,d.push(b)}return d}if(a){let c=o(e.textures),d=o(e.images);c.length>0&&(i.textures=c),d.length>0&&(i.images=d)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let a=e.clippingPlanes,i=null;if(a!==null){let o=a.length;i=new Array(o);for(let c=0;c!==o;++c)i[c]=a[c].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}},ts=class extends Sc{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new We(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=GM,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}},mi=new _,Yg=new z$2,Xe=class{constructor(e,a,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=a,this.count=e!==void 0?e.length/a:0,this.normalized=i,this.usage=WS,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,a,i){e*=this.itemSize,i*=a.itemSize;for(let o=0,c=this.itemSize;o<c;o++)this.array[e+o]=a.array[i+o];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let a=0,i=this.count;a<i;a++)Yg.fromBufferAttribute(this,a),Yg.applyMatrix3(e),this.setXY(a,Yg.x,Yg.y);else if(this.itemSize===3)for(let a=0,i=this.count;a<i;a++)mi.fromBufferAttribute(this,a),mi.applyMatrix3(e),this.setXYZ(a,mi.x,mi.y,mi.z);return this}applyMatrix4(e){for(let a=0,i=this.count;a<i;a++)mi.fromBufferAttribute(this,a),mi.applyMatrix4(e),this.setXYZ(a,mi.x,mi.y,mi.z);return this}applyNormalMatrix(e){for(let a=0,i=this.count;a<i;a++)mi.fromBufferAttribute(this,a),mi.applyNormalMatrix(e),this.setXYZ(a,mi.x,mi.y,mi.z);return this}transformDirection(e){for(let a=0,i=this.count;a<i;a++)mi.fromBufferAttribute(this,a),mi.transformDirection(e),this.setXYZ(a,mi.x,mi.y,mi.z);return this}set(e,a=0){return this.array.set(e,a),this}getX(e){let a=this.array[e*this.itemSize];return this.normalized&&(a=ya(a,this.array)),a}setX(e,a){return this.normalized&&(a=br(a,this.array)),this.array[e*this.itemSize]=a,this}getY(e){let a=this.array[e*this.itemSize+1];return this.normalized&&(a=ya(a,this.array)),a}setY(e,a){return this.normalized&&(a=br(a,this.array)),this.array[e*this.itemSize+1]=a,this}getZ(e){let a=this.array[e*this.itemSize+2];return this.normalized&&(a=ya(a,this.array)),a}setZ(e,a){return this.normalized&&(a=br(a,this.array)),this.array[e*this.itemSize+2]=a,this}getW(e){let a=this.array[e*this.itemSize+3];return this.normalized&&(a=ya(a,this.array)),a}setW(e,a){return this.normalized&&(a=br(a,this.array)),this.array[e*this.itemSize+3]=a,this}setXY(e,a,i){return e*=this.itemSize,this.normalized&&(a=br(a,this.array),i=br(i,this.array)),this.array[e+0]=a,this.array[e+1]=i,this}setXYZ(e,a,i,o){return e*=this.itemSize,this.normalized&&(a=br(a,this.array),i=br(i,this.array),o=br(o,this.array)),this.array[e+0]=a,this.array[e+1]=i,this.array[e+2]=o,this}setXYZW(e,a,i,o,c){return e*=this.itemSize,this.normalized&&(a=br(a,this.array),i=br(i,this.array),o=br(o,this.array),c=br(c,this.array)),this.array[e+0]=a,this.array[e+1]=i,this.array[e+2]=o,this.array[e+3]=c,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==WS&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}},wy=class extends Xe{constructor(e,a,i){super(new Uint16Array(e),a,i)}},_o=class extends Xe{constructor(e,a,i){super(new Uint32Array(e),a,i)}},Te=class extends Xe{constructor(e,a,i){super(new Float32Array(e),a,i)}},Sk=0,fs=new ce$1,MS$1=new _t,Ou=new _,$n=new Wt,cp=new Wt,Gi=new _,Pe=class extends fr$2{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Sk++}),this.uuid=ms(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(YM(e)?_o:wy)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,a){return this.attributes[e]=a,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,a,i=0){this.groups.push({start:e,count:a,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,a){this.drawRange.start=e,this.drawRange.count=a}applyMatrix4(e){let a=this.attributes.position;a!==void 0&&(a.applyMatrix4(e),a.needsUpdate=!0);let i=this.attributes.normal;if(i!==void 0){let c=new nr().getNormalMatrix(e);i.applyNormalMatrix(c),i.needsUpdate=!0}let o=this.attributes.tangent;return o!==void 0&&(o.transformDirection(e),o.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return fs.makeRotationFromQuaternion(e),this.applyMatrix4(fs),this}rotateX(e){return fs.makeRotationX(e),this.applyMatrix4(fs),this}rotateY(e){return fs.makeRotationY(e),this.applyMatrix4(fs),this}rotateZ(e){return fs.makeRotationZ(e),this.applyMatrix4(fs),this}translate(e,a,i){return fs.makeTranslation(e,a,i),this.applyMatrix4(fs),this}scale(e,a,i){return fs.makeScale(e,a,i),this.applyMatrix4(fs),this}lookAt(e){return MS$1.lookAt(e),MS$1.updateMatrix(),this.applyMatrix4(MS$1.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ou).negate(),this.translate(Ou.x,Ou.y,Ou.z),this}setFromPoints(e){let a=[];for(let i=0,o=e.length;i<o;i++){let c=e[i];a.push(c.x,c.y,c.z||0)}return this.setAttribute("position",new Te(a,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Wt);let e=this.attributes.position,a=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new _(-1/0,-1/0,-1/0),new _(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),a)for(let i=0,o=a.length;i<o;i++){let c=a[i];$n.setFromBufferAttribute(c),this.morphTargetsRelative?(Gi.addVectors(this.boundingBox.min,$n.min),this.boundingBox.expandByPoint(Gi),Gi.addVectors(this.boundingBox.max,$n.max),this.boundingBox.expandByPoint(Gi)):(this.boundingBox.expandByPoint($n.min),this.boundingBox.expandByPoint($n.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Br);let e=this.attributes.position,a=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new _,1/0);return}if(e){let i=this.boundingSphere.center;if($n.setFromBufferAttribute(e),a)for(let c=0,d=a.length;c<d;c++){let g=a[c];cp.setFromBufferAttribute(g),this.morphTargetsRelative?(Gi.addVectors($n.min,cp.min),$n.expandByPoint(Gi),Gi.addVectors($n.max,cp.max),$n.expandByPoint(Gi)):($n.expandByPoint(cp.min),$n.expandByPoint(cp.max))}$n.getCenter(i);let o=0;for(let c=0,d=e.count;c<d;c++)Gi.fromBufferAttribute(e,c),o=Math.max(o,i.distanceToSquared(Gi));if(a)for(let c=0,d=a.length;c<d;c++){let g=a[c],b=this.morphTargetsRelative;for(let j=0,$=g.count;j<$;j++)Gi.fromBufferAttribute(g,j),b&&(Ou.fromBufferAttribute(e,j),Gi.add(Ou)),o=Math.max(o,i.distanceToSquared(Gi))}this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,a=this.attributes;if(e===null||a.position===void 0||a.normal===void 0||a.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let i=e.array,o=a.position.array,c=a.normal.array,d=a.uv.array,g=o.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Xe(new Float32Array(4*g),4));let b=this.getAttribute("tangent").array,j=[],$=[];for(let Nt=0;Nt<g;Nt++)j[Nt]=new _,$[Nt]=new _;let rt=new _,_e=new _,st=new _,ut=new z$2,gt=new z$2,yt=new z$2,Pt=new _,wt=new _;function Ct(Nt,Ht,Gr){rt.fromArray(o,Nt*3),_e.fromArray(o,Ht*3),st.fromArray(o,Gr*3),ut.fromArray(d,Nt*2),gt.fromArray(d,Ht*2),yt.fromArray(d,Gr*2),_e.sub(rt),st.sub(rt),gt.sub(ut),yt.sub(ut);let hs=1/(gt.x*yt.y-yt.x*gt.y);!isFinite(hs)||(Pt.copy(_e).multiplyScalar(yt.y).addScaledVector(st,-gt.y).multiplyScalar(hs),wt.copy(st).multiplyScalar(gt.x).addScaledVector(_e,-yt.x).multiplyScalar(hs),j[Nt].add(Pt),j[Ht].add(Pt),j[Gr].add(Pt),$[Nt].add(wt),$[Ht].add(wt),$[Gr].add(wt))}let At=this.groups;At.length===0&&(At=[{start:0,count:i.length}]);for(let Nt=0,Ht=At.length;Nt<Ht;++Nt){let Gr=At[Nt],hs=Gr.start,_s=Gr.count;for(let hn=hs,Qn=hs+_s;hn<Qn;hn+=3)Ct(i[hn+0],i[hn+1],i[hn+2])}let Tt=new _,kt=new _,It=new _,Lt=new _;function Ft(Nt){It.fromArray(c,Nt*3),Lt.copy(It);let Ht=j[Nt];Tt.copy(Ht),Tt.sub(It.multiplyScalar(It.dot(Ht))).normalize(),kt.crossVectors(Lt,Ht);let Gr=kt.dot($[Nt])<0?-1:1;b[Nt*4]=Tt.x,b[Nt*4+1]=Tt.y,b[Nt*4+2]=Tt.z,b[Nt*4+3]=Gr}for(let Nt=0,Ht=At.length;Nt<Ht;++Nt){let Gr=At[Nt],hs=Gr.start,_s=Gr.count;for(let hn=hs,Qn=hs+_s;hn<Qn;hn+=3)Ft(i[hn+0]),Ft(i[hn+1]),Ft(i[hn+2])}}computeVertexNormals(){let e=this.index,a=this.getAttribute("position");if(a!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Xe(new Float32Array(a.count*3),3),this.setAttribute("normal",i);else for(let _e=0,st=i.count;_e<st;_e++)i.setXYZ(_e,0,0,0);let o=new _,c=new _,d=new _,g=new _,b=new _,j=new _,$=new _,rt=new _;if(e)for(let _e=0,st=e.count;_e<st;_e+=3){let ut=e.getX(_e+0),gt=e.getX(_e+1),yt=e.getX(_e+2);o.fromBufferAttribute(a,ut),c.fromBufferAttribute(a,gt),d.fromBufferAttribute(a,yt),$.subVectors(d,c),rt.subVectors(o,c),$.cross(rt),g.fromBufferAttribute(i,ut),b.fromBufferAttribute(i,gt),j.fromBufferAttribute(i,yt),g.add($),b.add($),j.add($),i.setXYZ(ut,g.x,g.y,g.z),i.setXYZ(gt,b.x,b.y,b.z),i.setXYZ(yt,j.x,j.y,j.z)}else for(let _e=0,st=a.count;_e<st;_e+=3)o.fromBufferAttribute(a,_e+0),c.fromBufferAttribute(a,_e+1),d.fromBufferAttribute(a,_e+2),$.subVectors(d,c),rt.subVectors(o,c),$.cross(rt),i.setXYZ(_e+0,$.x,$.y,$.z),i.setXYZ(_e+1,$.x,$.y,$.z),i.setXYZ(_e+2,$.x,$.y,$.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){let e=this.attributes.normal;for(let a=0,i=e.count;a<i;a++)Gi.fromBufferAttribute(e,a),Gi.normalize(),e.setXYZ(a,Gi.x,Gi.y,Gi.z)}toNonIndexed(){function e(g,b){let j=g.array,$=g.itemSize,rt=g.normalized,_e=new j.constructor(b.length*$),st=0,ut=0;for(let gt=0,yt=b.length;gt<yt;gt++){g.isInterleavedBufferAttribute?st=b[gt]*g.data.stride+g.offset:st=b[gt]*$;for(let Pt=0;Pt<$;Pt++)_e[ut++]=j[st++]}return new Xe(_e,$,rt)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let a=new Pe,i=this.index.array,o=this.attributes;for(let g in o){let b=o[g],j=e(b,i);a.setAttribute(g,j)}let c=this.morphAttributes;for(let g in c){let b=[],j=c[g];for(let $=0,rt=j.length;$<rt;$++){let _e=j[$],st=e(_e,i);b.push(st)}a.morphAttributes[g]=b}a.morphTargetsRelative=this.morphTargetsRelative;let d=this.groups;for(let g=0,b=d.length;g<b;g++){let j=d[g];a.addGroup(j.start,j.count,j.materialIndex)}return a}toJSON(){let e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){let b=this.parameters;for(let j in b)b[j]!==void 0&&(e[j]=b[j]);return e}e.data={attributes:{}};let a=this.index;a!==null&&(e.data.index={type:a.array.constructor.name,array:Array.prototype.slice.call(a.array)});let i=this.attributes;for(let b in i){let j=i[b];e.data.attributes[b]=j.toJSON(e.data)}let o={},c=!1;for(let b in this.morphAttributes){let j=this.morphAttributes[b],$=[];for(let rt=0,_e=j.length;rt<_e;rt++){let st=j[rt];$.push(st.toJSON(e.data))}$.length>0&&(o[b]=$,c=!0)}c&&(e.data.morphAttributes=o,e.data.morphTargetsRelative=this.morphTargetsRelative);let d=this.groups;d.length>0&&(e.data.groups=JSON.parse(JSON.stringify(d)));let g=this.boundingSphere;return g!==null&&(e.data.boundingSphere={center:g.center.toArray(),radius:g.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let a={};this.name=e.name;let i=e.index;i!==null&&this.setIndex(i.clone(a));let o=e.attributes;for(let j in o){let $=o[j];this.setAttribute(j,$.clone(a))}let c=e.morphAttributes;for(let j in c){let $=[],rt=c[j];for(let _e=0,st=rt.length;_e<st;_e++)$.push(rt[_e].clone(a));this.morphAttributes[j]=$}this.morphTargetsRelative=e.morphTargetsRelative;let d=e.groups;for(let j=0,$=d.length;j<$;j++){let rt=d[j];this.addGroup(rt.start,rt.count,rt.materialIndex)}let g=e.boundingBox;g!==null&&(this.boundingBox=g.clone());let b=e.boundingSphere;return b!==null&&(this.boundingSphere=b.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}},QT=new ce$1,Iu=new qs,CS=new Br,up=new _,hp=new _,dp=new _,PS=new _,Xg=new _,Qg=new z$2,Kg=new z$2,Zg=new z$2,DS=new _,Jg=new _,sr=class extends _t{constructor(e=new Pe,a=new ts){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=a,this.updateMorphTargets()}copy(e,a){return super.copy(e,a),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){let e=this.geometry.morphAttributes,a=Object.keys(e);if(a.length>0){let i=e[a[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,c=i.length;o<c;o++){let d=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[d]=o}}}}getVertexPosition(e,a){let i=this.geometry,o=i.attributes.position,c=i.morphAttributes.position,d=i.morphTargetsRelative;a.fromBufferAttribute(o,e);let g=this.morphTargetInfluences;if(c&&g){Xg.set(0,0,0);for(let b=0,j=c.length;b<j;b++){let $=g[b],rt=c[b];$!==0&&(PS.fromBufferAttribute(rt,e),d?Xg.addScaledVector(PS,$):Xg.addScaledVector(PS.sub(a),$))}a.add(Xg)}return this.isSkinnedMesh&&this.boneTransform(e,a),a}raycast(e,a){let i=this.geometry,o=this.material,c=this.matrixWorld;if(o===void 0||(i.boundingSphere===null&&i.computeBoundingSphere(),CS.copy(i.boundingSphere),CS.applyMatrix4(c),e.ray.intersectsSphere(CS)===!1)||(QT.copy(c).invert(),Iu.copy(e.ray).applyMatrix4(QT),i.boundingBox!==null&&Iu.intersectsBox(i.boundingBox)===!1))return;let d,g=i.index,b=i.attributes.position,j=i.attributes.uv,$=i.attributes.uv2,rt=i.groups,_e=i.drawRange;if(g!==null)if(Array.isArray(o))for(let st=0,ut=rt.length;st<ut;st++){let gt=rt[st],yt=o[gt.materialIndex],Pt=Math.max(gt.start,_e.start),wt=Math.min(g.count,Math.min(gt.start+gt.count,_e.start+_e.count));for(let Ct=Pt,At=wt;Ct<At;Ct+=3){let Tt=g.getX(Ct),kt=g.getX(Ct+1),It=g.getX(Ct+2);d=$g(this,yt,e,Iu,j,$,Tt,kt,It),d&&(d.faceIndex=Math.floor(Ct/3),d.face.materialIndex=gt.materialIndex,a.push(d))}}else{let st=Math.max(0,_e.start),ut=Math.min(g.count,_e.start+_e.count);for(let gt=st,yt=ut;gt<yt;gt+=3){let Pt=g.getX(gt),wt=g.getX(gt+1),Ct=g.getX(gt+2);d=$g(this,o,e,Iu,j,$,Pt,wt,Ct),d&&(d.faceIndex=Math.floor(gt/3),a.push(d))}}else if(b!==void 0)if(Array.isArray(o))for(let st=0,ut=rt.length;st<ut;st++){let gt=rt[st],yt=o[gt.materialIndex],Pt=Math.max(gt.start,_e.start),wt=Math.min(b.count,Math.min(gt.start+gt.count,_e.start+_e.count));for(let Ct=Pt,At=wt;Ct<At;Ct+=3){let Tt=Ct,kt=Ct+1,It=Ct+2;d=$g(this,yt,e,Iu,j,$,Tt,kt,It),d&&(d.faceIndex=Math.floor(Ct/3),d.face.materialIndex=gt.materialIndex,a.push(d))}}else{let st=Math.max(0,_e.start),ut=Math.min(b.count,_e.start+_e.count);for(let gt=st,yt=ut;gt<yt;gt+=3){let Pt=gt,wt=gt+1,Ct=gt+2;d=$g(this,o,e,Iu,j,$,Pt,wt,Ct),d&&(d.faceIndex=Math.floor(gt/3),a.push(d))}}}};function wk(e,a,i,o,c,d,g,b){let j;if(a.side===yi?j=o.intersectTriangle(g,d,c,!0,b):j=o.intersectTriangle(c,d,g,a.side===es,b),j===null)return null;Jg.copy(b),Jg.applyMatrix4(e.matrixWorld);let $=i.ray.origin.distanceTo(Jg);return $<i.near||$>i.far?null:{distance:$,point:Jg.clone(),object:e}}function $g(e,a,i,o,c,d,g,b,j){e.getVertexPosition(g,up),e.getVertexPosition(b,hp),e.getVertexPosition(j,dp);let $=wk(e,a,i,o,up,hp,dp,DS);if($){c&&(Qg.fromBufferAttribute(c,g),Kg.fromBufferAttribute(c,b),Zg.fromBufferAttribute(c,j),$.uv=Dr$1.getUV(DS,up,hp,dp,Qg,Kg,Zg,new z$2)),d&&(Qg.fromBufferAttribute(d,g),Kg.fromBufferAttribute(d,b),Zg.fromBufferAttribute(d,j),$.uv2=Dr$1.getUV(DS,up,hp,dp,Qg,Kg,Zg,new z$2));let rt={a:g,b,c:j,normal:new _,materialIndex:0};Dr$1.getNormal(up,hp,dp,rt.normal),$.face=rt}return $}var vi=class extends Pe{constructor(e=1,a=1,i=1,o=1,c=1,d=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:a,depth:i,widthSegments:o,heightSegments:c,depthSegments:d};let g=this;o=Math.floor(o),c=Math.floor(c),d=Math.floor(d);let b=[],j=[],$=[],rt=[],_e=0,st=0;ut("z","y","x",-1,-1,i,a,e,d,c,0),ut("z","y","x",1,-1,i,a,-e,d,c,1),ut("x","z","y",1,1,e,i,a,o,d,2),ut("x","z","y",1,-1,e,i,-a,o,d,3),ut("x","y","z",1,-1,e,a,i,o,c,4),ut("x","y","z",-1,-1,e,a,-i,o,c,5),this.setIndex(b),this.setAttribute("position",new Te(j,3)),this.setAttribute("normal",new Te($,3)),this.setAttribute("uv",new Te(rt,2));function ut(gt,yt,Pt,wt,Ct,At,Tt,kt,It,Lt,Ft){let Nt=At/It,Ht=Tt/Lt,Gr=At/2,hs=Tt/2,_s=kt/2,hn=It+1,Qn=Lt+1,ds=0,un=0,dr=new _;for(let us=0;us<Qn;us++){let Nn=us*Ht-hs;for(let gn=0;gn<hn;gn++){let Zn=gn*Nt-Gr;dr[gt]=Zn*wt,dr[yt]=Nn*Ct,dr[Pt]=_s,j.push(dr.x,dr.y,dr.z),dr[gt]=0,dr[yt]=0,dr[Pt]=kt>0?1:-1,$.push(dr.x,dr.y,dr.z),rt.push(gn/It),rt.push(1-us/Lt),ds+=1}}for(let us=0;us<Lt;us++)for(let Nn=0;Nn<It;Nn++){let gn=_e+Nn+hn*us,Zn=_e+Nn+hn*(us+1),xu=_e+(Nn+1)+hn*(us+1),au=_e+(Nn+1)+hn*us;b.push(gn,Zn,au),b.push(Zn,xu,au),un+=6}g.addGroup(st,un,Ft),st+=un,_e+=ds}}static fromJSON(e){return new vi(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function ju(e){let a={};for(let i in e){a[i]={};for(let o in e[i]){let c=e[i][o];c&&(c.isColor||c.isMatrix3||c.isMatrix4||c.isVector2||c.isVector3||c.isVector4||c.isTexture||c.isQuaternion)?a[i][o]=c.clone():Array.isArray(c)?a[i][o]=c.slice():a[i][o]=c}}return a}function bn(e){let a={};for(let i=0;i<e.length;i++){let o=ju(e[i]);for(let c in o)a[c]=o[c]}return a}function Ak(e){let a=[];for(let i=0;i<e.length;i++)a.push(e[i].clone());return a}function QM(e){return e.getRenderTarget()===null&&e.outputEncoding===at?wo:wp}var Xs={clone:ju,merge:bn},_k=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Ek=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,lt=class extends Sc{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=_k,this.fragmentShader=Ek,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=ju(e.uniforms),this.uniformsGroups=Ak(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let a=super.toJSON(e);a.glslVersion=this.glslVersion,a.uniforms={};for(let o in this.uniforms){let c=this.uniforms[o].value;c&&c.isTexture?a.uniforms[o]={type:"t",value:c.toJSON(e).uuid}:c&&c.isColor?a.uniforms[o]={type:"c",value:c.getHex()}:c&&c.isVector2?a.uniforms[o]={type:"v2",value:c.toArray()}:c&&c.isVector3?a.uniforms[o]={type:"v3",value:c.toArray()}:c&&c.isVector4?a.uniforms[o]={type:"v4",value:c.toArray()}:c&&c.isMatrix3?a.uniforms[o]={type:"m3",value:c.toArray()}:c&&c.isMatrix4?a.uniforms[o]={type:"m4",value:c.toArray()}:a.uniforms[o]={value:c}}Object.keys(this.defines).length>0&&(a.defines=this.defines),a.vertexShader=this.vertexShader,a.fragmentShader=this.fragmentShader;let i={};for(let o in this.extensions)this.extensions[o]===!0&&(i[o]=!0);return Object.keys(i).length>0&&(a.extensions=i),a}},rs=class extends _t{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ce$1,this.projectionMatrix=new ce$1,this.projectionMatrixInverse=new ce$1}copy(e,a){return super.copy(e,a),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let a=this.matrixWorld.elements;return e.set(-a[8],-a[9],-a[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,a){super.updateWorldMatrix(e,a),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},ri=class extends rs{constructor(e=50,a=1,i=.1,o=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=o,this.focus=10,this.aspect=a,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,a){return super.copy(e,a),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let a=.5*this.getFilmHeight()/e;this.fov=Ap*2*Math.atan(a),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(yp*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Ap*2*Math.atan(Math.tan(yp*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,a,i,o,c,d){this.aspect=e/a,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=a,this.view.offsetX=i,this.view.offsetY=o,this.view.width=c,this.view.height=d,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,a=e*Math.tan(yp*.5*this.fov)/this.zoom,i=2*a,o=this.aspect*i,c=-.5*o,d=this.view;if(this.view!==null&&this.view.enabled){let b=d.fullWidth,j=d.fullHeight;c+=d.offsetX*o/b,a-=d.offsetY*i/j,o*=d.width/b,i*=d.height/j}let g=this.filmOffset;g!==0&&(c+=e*g/this.getFilmWidth()),this.projectionMatrix.makePerspective(c,c+o,a,a-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let a=super.toJSON(e);return a.object.fov=this.fov,a.object.zoom=this.zoom,a.object.near=this.near,a.object.far=this.far,a.object.focus=this.focus,a.object.aspect=this.aspect,this.view!==null&&(a.object.view=Object.assign({},this.view)),a.object.filmGauge=this.filmGauge,a.object.filmOffset=this.filmOffset,a}},Ru=-90,Lu=1,XS=class extends _t{constructor(e,a,i){super(),this.type="CubeCamera",this.renderTarget=i;let o=new ri(Ru,Lu,e,a);o.layers=this.layers,o.up.set(0,1,0),o.lookAt(1,0,0),this.add(o);let c=new ri(Ru,Lu,e,a);c.layers=this.layers,c.up.set(0,1,0),c.lookAt(-1,0,0),this.add(c);let d=new ri(Ru,Lu,e,a);d.layers=this.layers,d.up.set(0,0,-1),d.lookAt(0,1,0),this.add(d);let g=new ri(Ru,Lu,e,a);g.layers=this.layers,g.up.set(0,0,1),g.lookAt(0,-1,0),this.add(g);let b=new ri(Ru,Lu,e,a);b.layers=this.layers,b.up.set(0,1,0),b.lookAt(0,0,1),this.add(b);let j=new ri(Ru,Lu,e,a);j.layers=this.layers,j.up.set(0,1,0),j.lookAt(0,0,-1),this.add(j)}update(e,a){this.parent===null&&this.updateMatrixWorld();let i=this.renderTarget,[o,c,d,g,b,j]=this.children,$=e.getRenderTarget(),rt=e.toneMapping,_e=e.xr.enabled;e.toneMapping=Hs,e.xr.enabled=!1;let st=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(a,o),e.setRenderTarget(i,1),e.render(a,c),e.setRenderTarget(i,2),e.render(a,d),e.setRenderTarget(i,3),e.render(a,g),e.setRenderTarget(i,4),e.render(a,b),i.texture.generateMipmaps=st,e.setRenderTarget(i,5),e.render(a,j),e.setRenderTarget($),e.toneMapping=rt,e.xr.enabled=_e,i.texture.needsPMREMUpdate=!0}},Hu=class extends tr{constructor(e,a,i,o,c,d,g,b,j,$){e=e!==void 0?e:[],a=a!==void 0?a:al,super(e,a,i,o,c,d,g,b,j,$),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},QS=class extends ft{constructor(e=1,a={}){super(e,e,a),this.isWebGLCubeRenderTarget=!0;let i={width:e,height:e,depth:1},o=[i,i,i,i,i,i];this.texture=new Hu(o,a.mapping,a.wrapS,a.wrapT,a.magFilter,a.minFilter,a.format,a.type,a.anisotropy,a.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=a.generateMipmaps!==void 0?a.generateMipmaps:!1,this.texture.minFilter=a.minFilter!==void 0?a.minFilter:tt}fromEquirectangularTexture(e,a){this.texture.type=a.type,this.texture.encoding=a.encoding,this.texture.generateMipmaps=a.generateMipmaps,this.texture.minFilter=a.minFilter,this.texture.magFilter=a.magFilter;let i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},o=new vi(5,5,5),c=new lt({name:"CubemapFromEquirect",uniforms:ju(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:yi,blending:er});c.uniforms.tEquirect.value=a;let d=new sr(o,c),g=a.minFilter;return a.minFilter===bc&&(a.minFilter=tt),new XS(1,10,this).update(e,d),a.minFilter=g,d.geometry.dispose(),d.material.dispose(),this}clear(e,a,i,o){let c=e.getRenderTarget();for(let d=0;d<6;d++)e.setRenderTarget(this,d),e.clear(a,i,o);e.setRenderTarget(c)}},OS=new _,Tk=new _,Mk=new nr,ii=class{constructor(e=new _(1,0,0),a=0){this.isPlane=!0,this.normal=e,this.constant=a}set(e,a){return this.normal.copy(e),this.constant=a,this}setComponents(e,a,i,o){return this.normal.set(e,a,i),this.constant=o,this}setFromNormalAndCoplanarPoint(e,a){return this.normal.copy(e),this.constant=-a.dot(this.normal),this}setFromCoplanarPoints(e,a,i){let o=OS.subVectors(i,a).cross(Tk.subVectors(e,a)).normalize();return this.setFromNormalAndCoplanarPoint(o,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,a){return a.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,a){let i=e.delta(OS),o=this.normal.dot(i);if(o===0)return this.distanceToPoint(e.start)===0?a.copy(e.start):null;let c=-(e.start.dot(this.normal)+this.constant)/o;return c<0||c>1?null:a.copy(i).multiplyScalar(c).add(e.start)}intersectsLine(e){let a=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return a<0&&i>0||i<0&&a>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,a){let i=a||Mk.getNormalMatrix(e),o=this.coplanarPoint(OS).applyMatrix4(e),c=this.normal.applyMatrix3(i).normalize();return this.constant=-o.dot(c),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}},Bu=new Br,ey=new _,Tp=class{constructor(e=new ii,a=new ii,i=new ii,o=new ii,c=new ii,d=new ii){this.planes=[e,a,i,o,c,d]}set(e,a,i,o,c,d){let g=this.planes;return g[0].copy(e),g[1].copy(a),g[2].copy(i),g[3].copy(o),g[4].copy(c),g[5].copy(d),this}copy(e){let a=this.planes;for(let i=0;i<6;i++)a[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){let a=this.planes,i=e.elements,o=i[0],c=i[1],d=i[2],g=i[3],b=i[4],j=i[5],$=i[6],rt=i[7],_e=i[8],st=i[9],ut=i[10],gt=i[11],yt=i[12],Pt=i[13],wt=i[14],Ct=i[15];return a[0].setComponents(g-o,rt-b,gt-_e,Ct-yt).normalize(),a[1].setComponents(g+o,rt+b,gt+_e,Ct+yt).normalize(),a[2].setComponents(g+c,rt+j,gt+st,Ct+Pt).normalize(),a[3].setComponents(g-c,rt-j,gt-st,Ct-Pt).normalize(),a[4].setComponents(g-d,rt-$,gt-ut,Ct-wt).normalize(),a[5].setComponents(g+d,rt+$,gt+ut,Ct+wt).normalize(),this}intersectsObject(e){let a=e.geometry;return a.boundingSphere===null&&a.computeBoundingSphere(),Bu.copy(a.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Bu)}intersectsSprite(e){return Bu.center.set(0,0,0),Bu.radius=.7071067811865476,Bu.applyMatrix4(e.matrixWorld),this.intersectsSphere(Bu)}intersectsSphere(e){let a=this.planes,i=e.center,o=-e.radius;for(let c=0;c<6;c++)if(a[c].distanceToPoint(i)<o)return!1;return!0}intersectsBox(e){let a=this.planes;for(let i=0;i<6;i++){let o=a[i];if(ey.x=o.normal.x>0?e.max.x:e.min.x,ey.y=o.normal.y>0?e.max.y:e.min.y,ey.z=o.normal.z>0?e.max.z:e.min.z,o.distanceToPoint(ey)<0)return!1}return!0}containsPoint(e){let a=this.planes;for(let i=0;i<6;i++)if(a[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};function KM(){let e=null,a=!1,i=null,o=null;function c(d,g){i(d,g),o=e.requestAnimationFrame(c)}return{start:function(){a!==!0&&i!==null&&(o=e.requestAnimationFrame(c),a=!0)},stop:function(){e.cancelAnimationFrame(o),a=!1},setAnimationLoop:function(d){i=d},setContext:function(d){e=d}}}function Ck(e,a){let i=a.isWebGL2,o=new WeakMap;function c($,rt){let _e=$.array,st=$.usage,ut=e.createBuffer();e.bindBuffer(rt,ut),e.bufferData(rt,_e,st),$.onUploadCallback();let gt;if(_e instanceof Float32Array)gt=5126;else if(_e instanceof Uint16Array)if($.isFloat16BufferAttribute)if(i)gt=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else gt=5123;else if(_e instanceof Int16Array)gt=5122;else if(_e instanceof Uint32Array)gt=5125;else if(_e instanceof Int32Array)gt=5124;else if(_e instanceof Int8Array)gt=5120;else if(_e instanceof Uint8Array)gt=5121;else if(_e instanceof Uint8ClampedArray)gt=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+_e);return{buffer:ut,type:gt,bytesPerElement:_e.BYTES_PER_ELEMENT,version:$.version}}function d($,rt,_e){let st=rt.array,ut=rt.updateRange;e.bindBuffer(_e,$),ut.count===-1?e.bufferSubData(_e,0,st):(i?e.bufferSubData(_e,ut.offset*st.BYTES_PER_ELEMENT,st,ut.offset,ut.count):e.bufferSubData(_e,ut.offset*st.BYTES_PER_ELEMENT,st.subarray(ut.offset,ut.offset+ut.count)),ut.count=-1),rt.onUploadCallback()}function g($){return $.isInterleavedBufferAttribute&&($=$.data),o.get($)}function b($){$.isInterleavedBufferAttribute&&($=$.data);let rt=o.get($);rt&&(e.deleteBuffer(rt.buffer),o.delete($))}function j($,rt){if($.isGLBufferAttribute){let st=o.get($);(!st||st.version<$.version)&&o.set($,{buffer:$.buffer,type:$.type,bytesPerElement:$.elementSize,version:$.version});return}$.isInterleavedBufferAttribute&&($=$.data);let _e=o.get($);_e===void 0?o.set($,c($,rt)):_e.version<$.version&&(d(_e.buffer,$,rt),_e.version=$.version)}return{get:g,remove:b,update:j}}var wn=class extends Pe{constructor(e=1,a=1,i=1,o=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:a,widthSegments:i,heightSegments:o};let c=e/2,d=a/2,g=Math.floor(i),b=Math.floor(o),j=g+1,$=b+1,rt=e/g,_e=a/b,st=[],ut=[],gt=[],yt=[];for(let Pt=0;Pt<$;Pt++){let wt=Pt*_e-d;for(let Ct=0;Ct<j;Ct++){let At=Ct*rt-c;ut.push(At,-wt,0),gt.push(0,0,1),yt.push(Ct/g),yt.push(1-Pt/b)}}for(let Pt=0;Pt<b;Pt++)for(let wt=0;wt<g;wt++){let Ct=wt+j*Pt,At=wt+j*(Pt+1),Tt=wt+1+j*(Pt+1),kt=wt+1+j*Pt;st.push(Ct,At,kt),st.push(At,Tt,kt)}this.setIndex(st),this.setAttribute("position",new Te(ut,3)),this.setAttribute("normal",new Te(gt,3)),this.setAttribute("uv",new Te(yt,2))}static fromJSON(e){return new wn(e.width,e.height,e.widthSegments,e.heightSegments)}},Pk=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,Dk=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Ok=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,Ik=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Rk=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Lk=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Bk="vec3 transformed = vec3( position );",Nk=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Fk=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,kk=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Vk=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,zk=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,Uk=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Gk=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,jk=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Hk=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Wk=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,qk=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,Yk=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,Xk=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,Qk=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Kk=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Zk=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Jk=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,$k=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,eV=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,tV="gl_FragColor = linearToOutputTexel( gl_FragColor );",rV=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,iV=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,nV=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,sV=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,oV=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,aV=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,lV=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,cV=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,uV=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,hV=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,dV=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,fV=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,pV=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,mV=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,gV=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,yV=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,vV=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,xV=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,bV=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,SV=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,wV=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,AV=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,_V=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,EV=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,TV=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,MV=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,CV=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,PV=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,DV=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,OV=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,IV=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,RV=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,LV=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,BV=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,NV=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,FV=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,kV=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,VV=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,zV=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,UV=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,GV=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,jV=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,HV=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,WV=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,qV=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,YV=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,XV=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,QV=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,KV=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,ZV=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,JV=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,$V=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,ez=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,tz=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,rz=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,iz=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,nz=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,sz=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,oz=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,az=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,lz=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,cz=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,uz=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,hz=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,dz=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,fz=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,pz=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,mz=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,gz=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,yz=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,vz=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,xz=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,bz=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,Sz=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,wz=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,Az=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,_z=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,Ez=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,Tz=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,Mz=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Cz=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Pz=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Dz=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Oz=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Iz=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Rz=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Lz=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,Bz=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Nz=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Fz=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,kz=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Vz=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,zz=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Uz=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Gz=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,jz=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Hz=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Wz=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,qz=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Yz=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Xz=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Qz=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Kz=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Zz=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Jz=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$z=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,eU=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,tU=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,rU=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,iU=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,nU=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,sU=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,oU=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,bt={alphamap_fragment:Pk,alphamap_pars_fragment:Dk,alphatest_fragment:Ok,alphatest_pars_fragment:Ik,aomap_fragment:Rk,aomap_pars_fragment:Lk,begin_vertex:Bk,beginnormal_vertex:Nk,bsdfs:Fk,iridescence_fragment:kk,bumpmap_pars_fragment:Vk,clipping_planes_fragment:zk,clipping_planes_pars_fragment:Uk,clipping_planes_pars_vertex:Gk,clipping_planes_vertex:jk,color_fragment:Hk,color_pars_fragment:Wk,color_pars_vertex:qk,color_vertex:Yk,common:Xk,cube_uv_reflection_fragment:Qk,defaultnormal_vertex:Kk,displacementmap_pars_vertex:Zk,displacementmap_vertex:Jk,emissivemap_fragment:$k,emissivemap_pars_fragment:eV,encodings_fragment:tV,encodings_pars_fragment:rV,envmap_fragment:iV,envmap_common_pars_fragment:nV,envmap_pars_fragment:sV,envmap_pars_vertex:oV,envmap_physical_pars_fragment:vV,envmap_vertex:aV,fog_vertex:lV,fog_pars_vertex:cV,fog_fragment:uV,fog_pars_fragment:hV,gradientmap_pars_fragment:dV,lightmap_fragment:fV,lightmap_pars_fragment:pV,lights_lambert_fragment:mV,lights_lambert_pars_fragment:gV,lights_pars_begin:yV,lights_toon_fragment:xV,lights_toon_pars_fragment:bV,lights_phong_fragment:SV,lights_phong_pars_fragment:wV,lights_physical_fragment:AV,lights_physical_pars_fragment:_V,lights_fragment_begin:EV,lights_fragment_maps:TV,lights_fragment_end:MV,logdepthbuf_fragment:CV,logdepthbuf_pars_fragment:PV,logdepthbuf_pars_vertex:DV,logdepthbuf_vertex:OV,map_fragment:IV,map_pars_fragment:RV,map_particle_fragment:LV,map_particle_pars_fragment:BV,metalnessmap_fragment:NV,metalnessmap_pars_fragment:FV,morphcolor_vertex:kV,morphnormal_vertex:VV,morphtarget_pars_vertex:zV,morphtarget_vertex:UV,normal_fragment_begin:GV,normal_fragment_maps:jV,normal_pars_fragment:HV,normal_pars_vertex:WV,normal_vertex:qV,normalmap_pars_fragment:YV,clearcoat_normal_fragment_begin:XV,clearcoat_normal_fragment_maps:QV,clearcoat_pars_fragment:KV,iridescence_pars_fragment:ZV,output_fragment:JV,packing:$V,premultiplied_alpha_fragment:ez,project_vertex:tz,dithering_fragment:rz,dithering_pars_fragment:iz,roughnessmap_fragment:nz,roughnessmap_pars_fragment:sz,shadowmap_pars_fragment:oz,shadowmap_pars_vertex:az,shadowmap_vertex:lz,shadowmask_pars_fragment:cz,skinbase_vertex:uz,skinning_pars_vertex:hz,skinning_vertex:dz,skinnormal_vertex:fz,specularmap_fragment:pz,specularmap_pars_fragment:mz,tonemapping_fragment:gz,tonemapping_pars_fragment:yz,transmission_fragment:vz,transmission_pars_fragment:xz,uv_pars_fragment:bz,uv_pars_vertex:Sz,uv_vertex:wz,uv2_pars_fragment:Az,uv2_pars_vertex:_z,uv2_vertex:Ez,worldpos_vertex:Tz,background_vert:Mz,background_frag:Cz,backgroundCube_vert:Pz,backgroundCube_frag:Dz,cube_vert:Oz,cube_frag:Iz,depth_vert:Rz,depth_frag:Lz,distanceRGBA_vert:Bz,distanceRGBA_frag:Nz,equirect_vert:Fz,equirect_frag:kz,linedashed_vert:Vz,linedashed_frag:zz,meshbasic_vert:Uz,meshbasic_frag:Gz,meshlambert_vert:jz,meshlambert_frag:Hz,meshmatcap_vert:Wz,meshmatcap_frag:qz,meshnormal_vert:Yz,meshnormal_frag:Xz,meshphong_vert:Qz,meshphong_frag:Kz,meshphysical_vert:Zz,meshphysical_frag:Jz,meshtoon_vert:$z,meshtoon_frag:eU,points_vert:tU,points_frag:rU,shadow_vert:iU,shadow_frag:nU,sprite_vert:sU,sprite_frag:oU},De$1={common:{diffuse:{value:new We(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new nr},uv2Transform:{value:new nr},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new z$2(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new We(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new We(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new nr}},sprite:{diffuse:{value:new We(16777215)},opacity:{value:1},center:{value:new z$2(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new nr}}},Ao={basic:{uniforms:bn([De$1.common,De$1.specularmap,De$1.envmap,De$1.aomap,De$1.lightmap,De$1.fog]),vertexShader:bt.meshbasic_vert,fragmentShader:bt.meshbasic_frag},lambert:{uniforms:bn([De$1.common,De$1.specularmap,De$1.envmap,De$1.aomap,De$1.lightmap,De$1.emissivemap,De$1.bumpmap,De$1.normalmap,De$1.displacementmap,De$1.fog,De$1.lights,{emissive:{value:new We(0)}}]),vertexShader:bt.meshlambert_vert,fragmentShader:bt.meshlambert_frag},phong:{uniforms:bn([De$1.common,De$1.specularmap,De$1.envmap,De$1.aomap,De$1.lightmap,De$1.emissivemap,De$1.bumpmap,De$1.normalmap,De$1.displacementmap,De$1.fog,De$1.lights,{emissive:{value:new We(0)},specular:{value:new We(1118481)},shininess:{value:30}}]),vertexShader:bt.meshphong_vert,fragmentShader:bt.meshphong_frag},standard:{uniforms:bn([De$1.common,De$1.envmap,De$1.aomap,De$1.lightmap,De$1.emissivemap,De$1.bumpmap,De$1.normalmap,De$1.displacementmap,De$1.roughnessmap,De$1.metalnessmap,De$1.fog,De$1.lights,{emissive:{value:new We(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:bt.meshphysical_vert,fragmentShader:bt.meshphysical_frag},toon:{uniforms:bn([De$1.common,De$1.aomap,De$1.lightmap,De$1.emissivemap,De$1.bumpmap,De$1.normalmap,De$1.displacementmap,De$1.gradientmap,De$1.fog,De$1.lights,{emissive:{value:new We(0)}}]),vertexShader:bt.meshtoon_vert,fragmentShader:bt.meshtoon_frag},matcap:{uniforms:bn([De$1.common,De$1.bumpmap,De$1.normalmap,De$1.displacementmap,De$1.fog,{matcap:{value:null}}]),vertexShader:bt.meshmatcap_vert,fragmentShader:bt.meshmatcap_frag},points:{uniforms:bn([De$1.points,De$1.fog]),vertexShader:bt.points_vert,fragmentShader:bt.points_frag},dashed:{uniforms:bn([De$1.common,De$1.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:bt.linedashed_vert,fragmentShader:bt.linedashed_frag},depth:{uniforms:bn([De$1.common,De$1.displacementmap]),vertexShader:bt.depth_vert,fragmentShader:bt.depth_frag},normal:{uniforms:bn([De$1.common,De$1.bumpmap,De$1.normalmap,De$1.displacementmap,{opacity:{value:1}}]),vertexShader:bt.meshnormal_vert,fragmentShader:bt.meshnormal_frag},sprite:{uniforms:bn([De$1.sprite,De$1.fog]),vertexShader:bt.sprite_vert,fragmentShader:bt.sprite_frag},background:{uniforms:{uvTransform:{value:new nr},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:bt.background_vert,fragmentShader:bt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:bt.backgroundCube_vert,fragmentShader:bt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:bt.cube_vert,fragmentShader:bt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:bt.equirect_vert,fragmentShader:bt.equirect_frag},distanceRGBA:{uniforms:bn([De$1.common,De$1.displacementmap,{referencePosition:{value:new _},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:bt.distanceRGBA_vert,fragmentShader:bt.distanceRGBA_frag},shadow:{uniforms:bn([De$1.lights,De$1.fog,{color:{value:new We(0)},opacity:{value:1}}]),vertexShader:bt.shadow_vert,fragmentShader:bt.shadow_frag}};Ao.physical={uniforms:bn([Ao.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new z$2(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new We(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new z$2},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new We(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new We(1,1,1)},specularColorMap:{value:null}}]),vertexShader:bt.meshphysical_vert,fragmentShader:bt.meshphysical_frag};var ty={r:0,b:0,g:0};function aU(e,a,i,o,c,d,g){let b=new We(0),j=d===!0?0:1,$,rt,_e=null,st=0,ut=null;function gt(Pt,wt){let Ct=!1,At=wt.isScene===!0?wt.background:null;At&&At.isTexture&&(At=(wt.backgroundBlurriness>0?i:a).get(At));let Tt=e.xr,kt=Tt.getSession&&Tt.getSession();kt&&kt.environmentBlendMode==="additive"&&(At=null),At===null?yt(b,j):At&&At.isColor&&(yt(At,1),Ct=!0),(e.autoClear||Ct)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),At&&(At.isCubeTexture||At.mapping===ch)?(rt===void 0&&(rt=new sr(new vi(1,1,1),new lt({name:"BackgroundCubeMaterial",uniforms:ju(Ao.backgroundCube.uniforms),vertexShader:Ao.backgroundCube.vertexShader,fragmentShader:Ao.backgroundCube.fragmentShader,side:yi,depthTest:!1,depthWrite:!1,fog:!1})),rt.geometry.deleteAttribute("normal"),rt.geometry.deleteAttribute("uv"),rt.onBeforeRender=function(It,Lt,Ft){this.matrixWorld.copyPosition(Ft.matrixWorld)},Object.defineProperty(rt.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),c.update(rt)),rt.material.uniforms.envMap.value=At,rt.material.uniforms.flipEnvMap.value=At.isCubeTexture&&At.isRenderTargetTexture===!1?-1:1,rt.material.uniforms.backgroundBlurriness.value=wt.backgroundBlurriness,rt.material.uniforms.backgroundIntensity.value=wt.backgroundIntensity,rt.material.toneMapped=At.encoding!==at,(_e!==At||st!==At.version||ut!==e.toneMapping)&&(rt.material.needsUpdate=!0,_e=At,st=At.version,ut=e.toneMapping),rt.layers.enableAll(),Pt.unshift(rt,rt.geometry,rt.material,0,0,null)):At&&At.isTexture&&($===void 0&&($=new sr(new wn(2,2),new lt({name:"BackgroundMaterial",uniforms:ju(Ao.background.uniforms),vertexShader:Ao.background.vertexShader,fragmentShader:Ao.background.fragmentShader,side:es,depthTest:!1,depthWrite:!1,fog:!1})),$.geometry.deleteAttribute("normal"),Object.defineProperty($.material,"map",{get:function(){return this.uniforms.t2D.value}}),c.update($)),$.material.uniforms.t2D.value=At,$.material.uniforms.backgroundIntensity.value=wt.backgroundIntensity,$.material.toneMapped=At.encoding!==at,At.matrixAutoUpdate===!0&&At.updateMatrix(),$.material.uniforms.uvTransform.value.copy(At.matrix),(_e!==At||st!==At.version||ut!==e.toneMapping)&&($.material.needsUpdate=!0,_e=At,st=At.version,ut=e.toneMapping),$.layers.enableAll(),Pt.unshift($,$.geometry,$.material,0,0,null))}function yt(Pt,wt){Pt.getRGB(ty,QM(e)),o.buffers.color.setClear(ty.r,ty.g,ty.b,wt,g)}return{getClearColor:function(){return b},setClearColor:function(Pt,wt=1){b.set(Pt),j=wt,yt(b,j)},getClearAlpha:function(){return j},setClearAlpha:function(Pt){j=Pt,yt(b,j)},render:gt}}function lU(e,a,i,o){let c=e.getParameter(34921),d=o.isWebGL2?null:a.get("OES_vertex_array_object"),g=o.isWebGL2||d!==null,b={},j=Pt(null),$=j,rt=!1;function _e(hn,Qn,ds,un,dr){let us=!1;if(g){let Nn=yt(un,ds,Qn);$!==Nn&&($=Nn,ut($.object)),us=wt(hn,un,ds,dr),us&&Ct(hn,un,ds,dr)}else{let Nn=Qn.wireframe===!0;($.geometry!==un.id||$.program!==ds.id||$.wireframe!==Nn)&&($.geometry=un.id,$.program=ds.id,$.wireframe=Nn,us=!0)}dr!==null&&i.update(dr,34963),(us||rt)&&(rt=!1,Ft(hn,Qn,ds,un),dr!==null&&e.bindBuffer(34963,i.get(dr).buffer))}function st(){return o.isWebGL2?e.createVertexArray():d.createVertexArrayOES()}function ut(hn){return o.isWebGL2?e.bindVertexArray(hn):d.bindVertexArrayOES(hn)}function gt(hn){return o.isWebGL2?e.deleteVertexArray(hn):d.deleteVertexArrayOES(hn)}function yt(hn,Qn,ds){let un=ds.wireframe===!0,dr=b[hn.id];dr===void 0&&(dr={},b[hn.id]=dr);let us=dr[Qn.id];us===void 0&&(us={},dr[Qn.id]=us);let Nn=us[un];return Nn===void 0&&(Nn=Pt(st()),us[un]=Nn),Nn}function Pt(hn){let Qn=[],ds=[],un=[];for(let dr=0;dr<c;dr++)Qn[dr]=0,ds[dr]=0,un[dr]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Qn,enabledAttributes:ds,attributeDivisors:un,object:hn,attributes:{},index:null}}function wt(hn,Qn,ds,un){let dr=$.attributes,us=Qn.attributes,Nn=0,gn=ds.getAttributes();for(let Zn in gn)if(gn[Zn].location>=0){let xu=dr[Zn],au=us[Zn];if(au===void 0&&(Zn==="instanceMatrix"&&hn.instanceMatrix&&(au=hn.instanceMatrix),Zn==="instanceColor"&&hn.instanceColor&&(au=hn.instanceColor)),xu===void 0||xu.attribute!==au||au&&xu.data!==au.data)return!0;Nn++}return $.attributesNum!==Nn||$.index!==un}function Ct(hn,Qn,ds,un){let dr={},us=Qn.attributes,Nn=0,gn=ds.getAttributes();for(let Zn in gn)if(gn[Zn].location>=0){let xu=us[Zn];xu===void 0&&(Zn==="instanceMatrix"&&hn.instanceMatrix&&(xu=hn.instanceMatrix),Zn==="instanceColor"&&hn.instanceColor&&(xu=hn.instanceColor));let au={};au.attribute=xu,xu&&xu.data&&(au.data=xu.data),dr[Zn]=au,Nn++}$.attributes=dr,$.attributesNum=Nn,$.index=un}function At(){let hn=$.newAttributes;for(let Qn=0,ds=hn.length;Qn<ds;Qn++)hn[Qn]=0}function Tt(hn){kt(hn,0)}function kt(hn,Qn){let ds=$.newAttributes,un=$.enabledAttributes,dr=$.attributeDivisors;ds[hn]=1,un[hn]===0&&(e.enableVertexAttribArray(hn),un[hn]=1),dr[hn]!==Qn&&((o.isWebGL2?e:a.get("ANGLE_instanced_arrays"))[o.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](hn,Qn),dr[hn]=Qn)}function It(){let hn=$.newAttributes,Qn=$.enabledAttributes;for(let ds=0,un=Qn.length;ds<un;ds++)Qn[ds]!==hn[ds]&&(e.disableVertexAttribArray(ds),Qn[ds]=0)}function Lt(hn,Qn,ds,un,dr,us){o.isWebGL2===!0&&(ds===5124||ds===5125)?e.vertexAttribIPointer(hn,Qn,ds,dr,us):e.vertexAttribPointer(hn,Qn,ds,un,dr,us)}function Ft(hn,Qn,ds,un){if(o.isWebGL2===!1&&(hn.isInstancedMesh||un.isInstancedBufferGeometry)&&a.get("ANGLE_instanced_arrays")===null)return;At();let dr=un.attributes,us=ds.getAttributes(),Nn=Qn.defaultAttributeValues;for(let gn in us){let Zn=us[gn];if(Zn.location>=0){let xu=dr[gn];if(xu===void 0&&(gn==="instanceMatrix"&&hn.instanceMatrix&&(xu=hn.instanceMatrix),gn==="instanceColor"&&hn.instanceColor&&(xu=hn.instanceColor)),xu!==void 0){let au=xu.normalized,Vv=xu.itemSize,wu=i.get(xu);if(wu===void 0)continue;let a1=wu.buffer,P0=wu.type,B0=wu.bytesPerElement;if(xu.isInterleavedBufferAttribute){let q1=xu.data,ox=q1.stride,N_=xu.offset;if(q1.isInstancedInterleavedBuffer){for(let eS=0;eS<Zn.locationSize;eS++)kt(Zn.location+eS,q1.meshPerAttribute);hn.isInstancedMesh!==!0&&un._maxInstanceCount===void 0&&(un._maxInstanceCount=q1.meshPerAttribute*q1.count)}else for(let eS=0;eS<Zn.locationSize;eS++)Tt(Zn.location+eS);e.bindBuffer(34962,a1);for(let eS=0;eS<Zn.locationSize;eS++)Lt(Zn.location+eS,Vv/Zn.locationSize,P0,au,ox*B0,(N_+Vv/Zn.locationSize*eS)*B0)}else{if(xu.isInstancedBufferAttribute){for(let q1=0;q1<Zn.locationSize;q1++)kt(Zn.location+q1,xu.meshPerAttribute);hn.isInstancedMesh!==!0&&un._maxInstanceCount===void 0&&(un._maxInstanceCount=xu.meshPerAttribute*xu.count)}else for(let q1=0;q1<Zn.locationSize;q1++)Tt(Zn.location+q1);e.bindBuffer(34962,a1);for(let q1=0;q1<Zn.locationSize;q1++)Lt(Zn.location+q1,Vv/Zn.locationSize,P0,au,Vv*B0,Vv/Zn.locationSize*q1*B0)}}else if(Nn!==void 0){let au=Nn[gn];if(au!==void 0)switch(au.length){case 2:e.vertexAttrib2fv(Zn.location,au);break;case 3:e.vertexAttrib3fv(Zn.location,au);break;case 4:e.vertexAttrib4fv(Zn.location,au);break;default:e.vertexAttrib1fv(Zn.location,au)}}}}It()}function Nt(){hs();for(let hn in b){let Qn=b[hn];for(let ds in Qn){let un=Qn[ds];for(let dr in un)gt(un[dr].object),delete un[dr];delete Qn[ds]}delete b[hn]}}function Ht(hn){if(b[hn.id]===void 0)return;let Qn=b[hn.id];for(let ds in Qn){let un=Qn[ds];for(let dr in un)gt(un[dr].object),delete un[dr];delete Qn[ds]}delete b[hn.id]}function Gr(hn){for(let Qn in b){let ds=b[Qn];if(ds[hn.id]===void 0)continue;let un=ds[hn.id];for(let dr in un)gt(un[dr].object),delete un[dr];delete ds[hn.id]}}function hs(){_s(),rt=!0,$!==j&&($=j,ut($.object))}function _s(){j.geometry=null,j.program=null,j.wireframe=!1}return{setup:_e,reset:hs,resetDefaultState:_s,dispose:Nt,releaseStatesOfGeometry:Ht,releaseStatesOfProgram:Gr,initAttributes:At,enableAttribute:Tt,disableUnusedAttributes:It}}function cU(e,a,i,o){let c=o.isWebGL2,d;function g($){d=$}function b($,rt){e.drawArrays(d,$,rt),i.update(rt,d,1)}function j($,rt,_e){if(_e===0)return;let st,ut;if(c)st=e,ut="drawArraysInstanced";else if(st=a.get("ANGLE_instanced_arrays"),ut="drawArraysInstancedANGLE",st===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}st[ut](d,$,rt,_e),i.update(rt,d,_e)}this.setMode=g,this.render=b,this.renderInstances=j}function uU(e,a,i){let o;function c(){if(o!==void 0)return o;if(a.has("EXT_texture_filter_anisotropic")===!0){let Lt=a.get("EXT_texture_filter_anisotropic");o=e.getParameter(Lt.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else o=0;return o}function d(Lt){if(Lt==="highp"){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";Lt="mediump"}return Lt==="mediump"&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}let g=typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext,b=i.precision!==void 0?i.precision:"highp",j=d(b);j!==b&&(console.warn("THREE.WebGLRenderer:",b,"not supported, using",j,"instead."),b=j);let $=g||a.has("WEBGL_draw_buffers"),rt=i.logarithmicDepthBuffer===!0,_e=e.getParameter(34930),st=e.getParameter(35660),ut=e.getParameter(3379),gt=e.getParameter(34076),yt=e.getParameter(34921),Pt=e.getParameter(36347),wt=e.getParameter(36348),Ct=e.getParameter(36349),At=st>0,Tt=g||a.has("OES_texture_float"),kt=At&&Tt,It=g?e.getParameter(36183):0;return{isWebGL2:g,drawBuffers:$,getMaxAnisotropy:c,getMaxPrecision:d,precision:b,logarithmicDepthBuffer:rt,maxTextures:_e,maxVertexTextures:st,maxTextureSize:ut,maxCubemapSize:gt,maxAttributes:yt,maxVertexUniforms:Pt,maxVaryings:wt,maxFragmentUniforms:Ct,vertexTextures:At,floatFragmentTextures:Tt,floatVertexTextures:kt,maxSamples:It}}function hU(e){let a=this,i=null,o=0,c=!1,d=!1,g=new ii,b=new nr,j={value:null,needsUpdate:!1};this.uniform=j,this.numPlanes=0,this.numIntersection=0,this.init=function(_e,st){let ut=_e.length!==0||st||o!==0||c;return c=st,o=_e.length,ut},this.beginShadows=function(){d=!0,rt(null)},this.endShadows=function(){d=!1},this.setGlobalState=function(_e,st){i=rt(_e,st,0)},this.setState=function(_e,st,ut){let gt=_e.clippingPlanes,yt=_e.clipIntersection,Pt=_e.clipShadows,wt=e.get(_e);if(!c||gt===null||gt.length===0||d&&!Pt)d?rt(null):$();else{let Ct=d?0:o,At=Ct*4,Tt=wt.clippingState||null;j.value=Tt,Tt=rt(gt,st,At,ut);for(let kt=0;kt!==At;++kt)Tt[kt]=i[kt];wt.clippingState=Tt,this.numIntersection=yt?this.numPlanes:0,this.numPlanes+=Ct}};function $(){j.value!==i&&(j.value=i,j.needsUpdate=o>0),a.numPlanes=o,a.numIntersection=0}function rt(_e,st,ut,gt){let yt=_e!==null?_e.length:0,Pt=null;if(yt!==0){if(Pt=j.value,gt!==!0||Pt===null){let wt=ut+yt*4,Ct=st.matrixWorldInverse;b.getNormalMatrix(Ct),(Pt===null||Pt.length<wt)&&(Pt=new Float32Array(wt));for(let At=0,Tt=ut;At!==yt;++At,Tt+=4)g.copy(_e[At]).applyMatrix4(Ct,b),g.normal.toArray(Pt,Tt),Pt[Tt+3]=g.constant}j.value=Pt,j.needsUpdate=!0}return a.numPlanes=yt,a.numIntersection=0,Pt}}function dU(e){let a=new WeakMap;function i(g,b){return b===GS?g.mapping=al:b===jS&&(g.mapping=ll),g}function o(g){if(g&&g.isTexture&&g.isRenderTargetTexture===!1){let b=g.mapping;if(b===GS||b===jS)if(a.has(g)){let j=a.get(g).texture;return i(j,g.mapping)}else{let j=g.image;if(j&&j.height>0){let $=new QS(j.height/2);return $.fromEquirectangularTexture(e,g),a.set(g,$),g.addEventListener("dispose",c),i($.texture,g.mapping)}else return null}}return g}function c(g){let b=g.target;b.removeEventListener("dispose",c);let j=a.get(b);j!==void 0&&(a.delete(b),j.dispose())}function d(){a=new WeakMap}return{get:o,dispose:d}}var Wu=class extends rs{constructor(e=-1,a=1,i=1,o=-1,c=.1,d=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=a,this.top=i,this.bottom=o,this.near=c,this.far=d,this.updateProjectionMatrix()}copy(e,a){return super.copy(e,a),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,a,i,o,c,d){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=a,this.view.offsetX=i,this.view.offsetY=o,this.view.width=c,this.view.height=d,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),a=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,o=(this.top+this.bottom)/2,c=i-e,d=i+e,g=o+a,b=o-a;if(this.view!==null&&this.view.enabled){let j=(this.right-this.left)/this.view.fullWidth/this.zoom,$=(this.top-this.bottom)/this.view.fullHeight/this.zoom;c+=j*this.view.offsetX,d=c+j*this.view.width,g-=$*this.view.offsetY,b=g-$*this.view.height}this.projectionMatrix.makeOrthographic(c,d,g,b,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let a=super.toJSON(e);return a.object.zoom=this.zoom,a.object.left=this.left,a.object.right=this.right,a.object.top=this.top,a.object.bottom=this.bottom,a.object.near=this.near,a.object.far=this.far,this.view!==null&&(a.object.view=Object.assign({},this.view)),a}},zu=4,KT=[.125,.215,.35,.446,.526,.582],yc=20,IS=new Wu,ZT=new We,RS=null,gc=(1+Math.sqrt(5))/2,Nu=1/gc,JT=[new _(1,1,1),new _(-1,1,1),new _(1,1,-1),new _(-1,1,-1),new _(0,gc,Nu),new _(0,gc,-Nu),new _(Nu,0,gc),new _(-Nu,0,gc),new _(gc,Nu,0),new _(-gc,Nu,0)],Ay=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,a=0,i=.1,o=100){RS=this._renderer.getRenderTarget(),this._setSize(256);let c=this._allocateTargets();return c.depthBuffer=!0,this._sceneToCubeUV(e,i,o,c),a>0&&this._blur(c,0,0,a),this._applyPMREM(c),this._cleanup(c),c}fromEquirectangular(e,a=null){return this._fromTexture(e,a)}fromCubemap(e,a=null){return this._fromTexture(e,a)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=tM(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=eM(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(RS),e.scissorTest=!1,ry(e,0,0,e.width,e.height)}_fromTexture(e,a){e.mapping===al||e.mapping===ll?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),RS=this._renderer.getRenderTarget();let i=a||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),a=4*this._cubeSize,i={magFilter:tt,minFilter:tt,generateMipmaps:!1,type:va,format:Qr,encoding:Sn,depthBuffer:!1},o=$T(e,a,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==a){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=$T(e,a,i);let{_lodMax:c}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=fU(c)),this._blurMaterial=pU(c,e,a)}return o}_compileMaterial(e){let a=new sr(this._lodPlanes[0],e);this._renderer.compile(a,IS)}_sceneToCubeUV(e,a,i,o){let c=new ri(90,1,a,i),d=[1,-1,1,1,1,1],g=[1,1,1,-1,-1,-1],b=this._renderer,j=b.autoClear,$=b.toneMapping;b.getClearColor(ZT),b.toneMapping=Hs,b.autoClear=!1;let rt=new ts({name:"PMREM.Background",side:yi,depthWrite:!1,depthTest:!1}),_e=new sr(new vi,rt),st=!1,ut=e.background;ut?ut.isColor&&(rt.color.copy(ut),e.background=null,st=!0):(rt.color.copy(ZT),st=!0);for(let gt=0;gt<6;gt++){let yt=gt%3;yt===0?(c.up.set(0,d[gt],0),c.lookAt(g[gt],0,0)):yt===1?(c.up.set(0,0,d[gt]),c.lookAt(0,g[gt],0)):(c.up.set(0,d[gt],0),c.lookAt(0,0,g[gt]));let Pt=this._cubeSize;ry(o,yt*Pt,gt>2?Pt:0,Pt,Pt),b.setRenderTarget(o),st&&b.render(_e,c),b.render(e,c)}_e.geometry.dispose(),_e.material.dispose(),b.toneMapping=$,b.autoClear=j,e.background=ut}_textureToCubeUV(e,a){let i=this._renderer,o=e.mapping===al||e.mapping===ll;o?(this._cubemapMaterial===null&&(this._cubemapMaterial=tM()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=eM());let c=o?this._cubemapMaterial:this._equirectMaterial,d=new sr(this._lodPlanes[0],c),g=c.uniforms;g.envMap.value=e;let b=this._cubeSize;ry(a,0,0,3*b,2*b),i.setRenderTarget(a),i.render(d,IS)}_applyPMREM(e){let a=this._renderer,i=a.autoClear;a.autoClear=!1;for(let o=1;o<this._lodPlanes.length;o++){let c=Math.sqrt(this._sigmas[o]*this._sigmas[o]-this._sigmas[o-1]*this._sigmas[o-1]),d=JT[(o-1)%JT.length];this._blur(e,o-1,o,c,d)}a.autoClear=i}_blur(e,a,i,o,c){let d=this._pingPongRenderTarget;this._halfBlur(e,d,a,i,o,"latitudinal",c),this._halfBlur(d,e,i,i,o,"longitudinal",c)}_halfBlur(e,a,i,o,c,d,g){let b=this._renderer,j=this._blurMaterial;d!=="latitudinal"&&d!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let $=3,rt=new sr(this._lodPlanes[o],j),_e=j.uniforms,st=this._sizeLods[i]-1,ut=isFinite(c)?Math.PI/(2*st):2*Math.PI/(2*yc-1),gt=c/ut,yt=isFinite(c)?1+Math.floor($*gt):yc;yt>yc&&console.warn(`sigmaRadians, ${c}, is too large and will clip, as it requested ${yt} samples when the maximum is set to ${yc}`);let Pt=[],wt=0;for(let It=0;It<yc;++It){let Lt=It/gt,Ft=Math.exp(-Lt*Lt/2);Pt.push(Ft),It===0?wt+=Ft:It<yt&&(wt+=2*Ft)}for(let It=0;It<Pt.length;It++)Pt[It]=Pt[It]/wt;_e.envMap.value=e.texture,_e.samples.value=yt,_e.weights.value=Pt,_e.latitudinal.value=d==="latitudinal",g&&(_e.poleAxis.value=g);let{_lodMax:Ct}=this;_e.dTheta.value=ut,_e.mipInt.value=Ct-i;let At=this._sizeLods[o],Tt=3*At*(o>Ct-zu?o-Ct+zu:0),kt=4*(this._cubeSize-At);ry(a,Tt,kt,3*At,2*At),b.setRenderTarget(a),b.render(rt,IS)}};function fU(e){let a=[],i=[],o=[],c=e,d=e-zu+1+KT.length;for(let g=0;g<d;g++){let b=Math.pow(2,c);i.push(b);let j=1/b;g>e-zu?j=KT[g-e+zu-1]:g===0&&(j=0),o.push(j);let $=1/(b-2),rt=-$,_e=1+$,st=[rt,rt,_e,rt,_e,_e,rt,rt,_e,_e,rt,_e],ut=6,gt=6,yt=3,Pt=2,wt=1,Ct=new Float32Array(yt*gt*ut),At=new Float32Array(Pt*gt*ut),Tt=new Float32Array(wt*gt*ut);for(let It=0;It<ut;It++){let Lt=It%3*2/3-1,Ft=It>2?0:-1,Nt=[Lt,Ft,0,Lt+2/3,Ft,0,Lt+2/3,Ft+1,0,Lt,Ft,0,Lt+2/3,Ft+1,0,Lt,Ft+1,0];Ct.set(Nt,yt*gt*It),At.set(st,Pt*gt*It);let Ht=[It,It,It,It,It,It];Tt.set(Ht,wt*gt*It)}let kt=new Pe;kt.setAttribute("position",new Xe(Ct,yt)),kt.setAttribute("uv",new Xe(At,Pt)),kt.setAttribute("faceIndex",new Xe(Tt,wt)),a.push(kt),c>zu&&c--}return{lodPlanes:a,sizeLods:i,sigmas:o}}function $T(e,a,i){let o=new ft(e,a,i);return o.texture.mapping=ch,o.texture.name="PMREM.cubeUv",o.scissorTest=!0,o}function ry(e,a,i,o,c){e.viewport.set(a,i,o,c),e.scissor.set(a,i,o,c)}function pU(e,a,i){let o=new Float32Array(yc),c=new _(0,1,0);return new lt({name:"SphericalGaussianBlur",defines:{n:yc,CUBEUV_TEXEL_WIDTH:1/a,CUBEUV_TEXEL_HEIGHT:1/i,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:o},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:c}},vertexShader:Pw(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:er,depthTest:!1,depthWrite:!1})}function eM(){return new lt({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Pw(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:er,depthTest:!1,depthWrite:!1})}function tM(){return new lt({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Pw(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:er,depthTest:!1,depthWrite:!1})}function Pw(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function mU(e){let a=new WeakMap,i=null;function o(b){if(b&&b.isTexture){let j=b.mapping,$=j===GS||j===jS,rt=j===al||j===ll;if($||rt)if(b.isRenderTargetTexture&&b.needsPMREMUpdate===!0){b.needsPMREMUpdate=!1;let _e=a.get(b);return i===null&&(i=new Ay(e)),_e=$?i.fromEquirectangular(b,_e):i.fromCubemap(b,_e),a.set(b,_e),_e.texture}else{if(a.has(b))return a.get(b).texture;{let _e=b.image;if($&&_e&&_e.height>0||rt&&_e&&c(_e)){i===null&&(i=new Ay(e));let st=$?i.fromEquirectangular(b):i.fromCubemap(b);return a.set(b,st),b.addEventListener("dispose",d),st.texture}else return null}}}return b}function c(b){let j=0,$=6;for(let rt=0;rt<$;rt++)b[rt]!==void 0&&j++;return j===$}function d(b){let j=b.target;j.removeEventListener("dispose",d);let $=a.get(j);$!==void 0&&(a.delete(j),$.dispose())}function g(){a=new WeakMap,i!==null&&(i.dispose(),i=null)}return{get:o,dispose:g}}function gU(e){let a={};function i(o){if(a[o]!==void 0)return a[o];let c;switch(o){case"WEBGL_depth_texture":c=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":c=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":c=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":c=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:c=e.getExtension(o)}return a[o]=c,c}return{has:function(o){return i(o)!==null},init:function(o){o.isWebGL2?i("EXT_color_buffer_float"):(i("WEBGL_depth_texture"),i("OES_texture_float"),i("OES_texture_half_float"),i("OES_texture_half_float_linear"),i("OES_standard_derivatives"),i("OES_element_index_uint"),i("OES_vertex_array_object"),i("ANGLE_instanced_arrays")),i("OES_texture_float_linear"),i("EXT_color_buffer_half_float"),i("WEBGL_multisampled_render_to_texture")},get:function(o){let c=i(o);return c===null&&console.warn("THREE.WebGLRenderer: "+o+" extension not supported."),c}}}function yU(e,a,i,o){let c={},d=new WeakMap;function g(_e){let st=_e.target;st.index!==null&&a.remove(st.index);for(let gt in st.attributes)a.remove(st.attributes[gt]);st.removeEventListener("dispose",g),delete c[st.id];let ut=d.get(st);ut&&(a.remove(ut),d.delete(st)),o.releaseStatesOfGeometry(st),st.isInstancedBufferGeometry===!0&&delete st._maxInstanceCount,i.memory.geometries--}function b(_e,st){return c[st.id]===!0||(st.addEventListener("dispose",g),c[st.id]=!0,i.memory.geometries++),st}function j(_e){let st=_e.attributes;for(let gt in st)a.update(st[gt],34962);let ut=_e.morphAttributes;for(let gt in ut){let yt=ut[gt];for(let Pt=0,wt=yt.length;Pt<wt;Pt++)a.update(yt[Pt],34962)}}function $(_e){let st=[],ut=_e.index,gt=_e.attributes.position,yt=0;if(ut!==null){let Ct=ut.array;yt=ut.version;for(let At=0,Tt=Ct.length;At<Tt;At+=3){let kt=Ct[At+0],It=Ct[At+1],Lt=Ct[At+2];st.push(kt,It,It,Lt,Lt,kt)}}else{let Ct=gt.array;yt=gt.version;for(let At=0,Tt=Ct.length/3-1;At<Tt;At+=3){let kt=At+0,It=At+1,Lt=At+2;st.push(kt,It,It,Lt,Lt,kt)}}let Pt=new(YM(st)?_o:wy)(st,1);Pt.version=yt;let wt=d.get(_e);wt&&a.remove(wt),d.set(_e,Pt)}function rt(_e){let st=d.get(_e);if(st){let ut=_e.index;ut!==null&&st.version<ut.version&&$(_e)}else $(_e);return d.get(_e)}return{get:b,update:j,getWireframeAttribute:rt}}function vU(e,a,i,o){let c=o.isWebGL2,d;function g(st){d=st}let b,j;function $(st){b=st.type,j=st.bytesPerElement}function rt(st,ut){e.drawElements(d,ut,b,st*j),i.update(ut,d,1)}function _e(st,ut,gt){if(gt===0)return;let yt,Pt;if(c)yt=e,Pt="drawElementsInstanced";else if(yt=a.get("ANGLE_instanced_arrays"),Pt="drawElementsInstancedANGLE",yt===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}yt[Pt](d,ut,b,st*j,gt),i.update(ut,d,gt)}this.setMode=g,this.setIndex=$,this.render=rt,this.renderInstances=_e}function xU(e){let a={geometries:0,textures:0},i={frame:0,calls:0,triangles:0,points:0,lines:0};function o(d,g,b){switch(i.calls++,g){case 4:i.triangles+=b*(d/3);break;case 1:i.lines+=b*(d/2);break;case 3:i.lines+=b*(d-1);break;case 2:i.lines+=b*d;break;case 0:i.points+=b*d;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",g);break}}function c(){i.frame++,i.calls=0,i.triangles=0,i.points=0,i.lines=0}return{memory:a,render:i,programs:null,autoReset:!0,reset:c,update:o}}function bU(e,a){return e[0]-a[0]}function SU(e,a){return Math.abs(a[1])-Math.abs(e[1])}function wU(e,a,i){let o={},c=new Float32Array(8),d=new WeakMap,g=new Ke,b=[];for(let $=0;$<8;$++)b[$]=[$,0];function j($,rt,_e,st){let ut=$.morphTargetInfluences;if(a.isWebGL2===!0){let gt=rt.morphAttributes.position||rt.morphAttributes.normal||rt.morphAttributes.color,yt=gt!==void 0?gt.length:0,Pt=d.get(rt);if(Pt===void 0||Pt.count!==yt){let At=function(){hn.dispose(),d.delete(rt),rt.removeEventListener("dispose",At)};Pt!==void 0&&Pt.texture.dispose();let Tt=rt.morphAttributes.position!==void 0,kt=rt.morphAttributes.normal!==void 0,It=rt.morphAttributes.color!==void 0,Lt=rt.morphAttributes.position||[],Ft=rt.morphAttributes.normal||[],Nt=rt.morphAttributes.color||[],Ht=0;Tt===!0&&(Ht=1),kt===!0&&(Ht=2),It===!0&&(Ht=3);let Gr=rt.attributes.position.count*Ht,hs=1;Gr>a.maxTextureSize&&(hs=Math.ceil(Gr/a.maxTextureSize),Gr=a.maxTextureSize);let _s=new Float32Array(Gr*hs*4*yt),hn=new xy(_s,Gr,hs,yt);hn.type=Sr$1,hn.needsUpdate=!0;let Qn=Ht*4;for(let ds=0;ds<yt;ds++){let un=Lt[ds],dr=Ft[ds],us=Nt[ds],Nn=Gr*hs*4*ds;for(let gn=0;gn<un.count;gn++){let Zn=gn*Qn;Tt===!0&&(g.fromBufferAttribute(un,gn),_s[Nn+Zn+0]=g.x,_s[Nn+Zn+1]=g.y,_s[Nn+Zn+2]=g.z,_s[Nn+Zn+3]=0),kt===!0&&(g.fromBufferAttribute(dr,gn),_s[Nn+Zn+4]=g.x,_s[Nn+Zn+5]=g.y,_s[Nn+Zn+6]=g.z,_s[Nn+Zn+7]=0),It===!0&&(g.fromBufferAttribute(us,gn),_s[Nn+Zn+8]=g.x,_s[Nn+Zn+9]=g.y,_s[Nn+Zn+10]=g.z,_s[Nn+Zn+11]=us.itemSize===4?g.w:1)}}Pt={count:yt,texture:hn,size:new z$2(Gr,hs)},d.set(rt,Pt),rt.addEventListener("dispose",At)}let wt=0;for(let At=0;At<ut.length;At++)wt+=ut[At];let Ct=rt.morphTargetsRelative?1:1-wt;st.getUniforms().setValue(e,"morphTargetBaseInfluence",Ct),st.getUniforms().setValue(e,"morphTargetInfluences",ut),st.getUniforms().setValue(e,"morphTargetsTexture",Pt.texture,i),st.getUniforms().setValue(e,"morphTargetsTextureSize",Pt.size)}else{let gt=ut===void 0?0:ut.length,yt=o[rt.id];if(yt===void 0||yt.length!==gt){yt=[];for(let Tt=0;Tt<gt;Tt++)yt[Tt]=[Tt,0];o[rt.id]=yt}for(let Tt=0;Tt<gt;Tt++){let kt=yt[Tt];kt[0]=Tt,kt[1]=ut[Tt]}yt.sort(SU);for(let Tt=0;Tt<8;Tt++)Tt<gt&&yt[Tt][1]?(b[Tt][0]=yt[Tt][0],b[Tt][1]=yt[Tt][1]):(b[Tt][0]=Number.MAX_SAFE_INTEGER,b[Tt][1]=0);b.sort(bU);let Pt=rt.morphAttributes.position,wt=rt.morphAttributes.normal,Ct=0;for(let Tt=0;Tt<8;Tt++){let kt=b[Tt],It=kt[0],Lt=kt[1];It!==Number.MAX_SAFE_INTEGER&&Lt?(Pt&&rt.getAttribute("morphTarget"+Tt)!==Pt[It]&&rt.setAttribute("morphTarget"+Tt,Pt[It]),wt&&rt.getAttribute("morphNormal"+Tt)!==wt[It]&&rt.setAttribute("morphNormal"+Tt,wt[It]),c[Tt]=Lt,Ct+=Lt):(Pt&&rt.hasAttribute("morphTarget"+Tt)===!0&&rt.deleteAttribute("morphTarget"+Tt),wt&&rt.hasAttribute("morphNormal"+Tt)===!0&&rt.deleteAttribute("morphNormal"+Tt),c[Tt]=0)}let At=rt.morphTargetsRelative?1:1-Ct;st.getUniforms().setValue(e,"morphTargetBaseInfluence",At),st.getUniforms().setValue(e,"morphTargetInfluences",c)}}return{update:j}}function AU(e,a,i,o){let c=new WeakMap;function d(j){let $=o.render.frame,rt=j.geometry,_e=a.get(j,rt);return c.get(_e)!==$&&(a.update(_e),c.set(_e,$)),j.isInstancedMesh&&(j.hasEventListener("dispose",b)===!1&&j.addEventListener("dispose",b),i.update(j.instanceMatrix,34962),j.instanceColor!==null&&i.update(j.instanceColor,34962)),_e}function g(){c=new WeakMap}function b(j){let $=j.target;$.removeEventListener("dispose",b),i.remove($.instanceMatrix),$.instanceColor!==null&&i.remove($.instanceColor)}return{update:d,dispose:g}}var ZM=new tr,JM=new xy,$M=new by,eC=new Hu,rM=[],iM=[],nM=new Float32Array(16),sM=new Float32Array(9),oM=new Float32Array(4);function hh(e,a,i){let o=e[0];if(o<=0||o>0)return e;let c=a*i,d=rM[c];if(d===void 0&&(d=new Float32Array(c),rM[c]=d),a!==0){o.toArray(d,0);for(let g=1,b=0;g!==a;++g)b+=i,e[g].toArray(d,b)}return d}function Mi(e,a){if(e.length!==a.length)return!1;for(let i=0,o=e.length;i<o;i++)if(e[i]!==a[i])return!1;return!0}function Ci(e,a){for(let i=0,o=a.length;i<o;i++)e[i]=a[i]}function jy(e,a){let i=iM[a];i===void 0&&(i=new Int32Array(a),iM[a]=i);for(let o=0;o!==a;++o)i[o]=e.allocateTextureUnit();return i}function _U(e,a){let i=this.cache;i[0]!==a&&(e.uniform1f(this.addr,a),i[0]=a)}function EU(e,a){let i=this.cache;if(a.x!==void 0)(i[0]!==a.x||i[1]!==a.y)&&(e.uniform2f(this.addr,a.x,a.y),i[0]=a.x,i[1]=a.y);else{if(Mi(i,a))return;e.uniform2fv(this.addr,a),Ci(i,a)}}function TU(e,a){let i=this.cache;if(a.x!==void 0)(i[0]!==a.x||i[1]!==a.y||i[2]!==a.z)&&(e.uniform3f(this.addr,a.x,a.y,a.z),i[0]=a.x,i[1]=a.y,i[2]=a.z);else if(a.r!==void 0)(i[0]!==a.r||i[1]!==a.g||i[2]!==a.b)&&(e.uniform3f(this.addr,a.r,a.g,a.b),i[0]=a.r,i[1]=a.g,i[2]=a.b);else{if(Mi(i,a))return;e.uniform3fv(this.addr,a),Ci(i,a)}}function MU(e,a){let i=this.cache;if(a.x!==void 0)(i[0]!==a.x||i[1]!==a.y||i[2]!==a.z||i[3]!==a.w)&&(e.uniform4f(this.addr,a.x,a.y,a.z,a.w),i[0]=a.x,i[1]=a.y,i[2]=a.z,i[3]=a.w);else{if(Mi(i,a))return;e.uniform4fv(this.addr,a),Ci(i,a)}}function CU(e,a){let i=this.cache,o=a.elements;if(o===void 0){if(Mi(i,a))return;e.uniformMatrix2fv(this.addr,!1,a),Ci(i,a)}else{if(Mi(i,o))return;oM.set(o),e.uniformMatrix2fv(this.addr,!1,oM),Ci(i,o)}}function PU(e,a){let i=this.cache,o=a.elements;if(o===void 0){if(Mi(i,a))return;e.uniformMatrix3fv(this.addr,!1,a),Ci(i,a)}else{if(Mi(i,o))return;sM.set(o),e.uniformMatrix3fv(this.addr,!1,sM),Ci(i,o)}}function DU(e,a){let i=this.cache,o=a.elements;if(o===void 0){if(Mi(i,a))return;e.uniformMatrix4fv(this.addr,!1,a),Ci(i,a)}else{if(Mi(i,o))return;nM.set(o),e.uniformMatrix4fv(this.addr,!1,nM),Ci(i,o)}}function OU(e,a){let i=this.cache;i[0]!==a&&(e.uniform1i(this.addr,a),i[0]=a)}function IU(e,a){let i=this.cache;if(a.x!==void 0)(i[0]!==a.x||i[1]!==a.y)&&(e.uniform2i(this.addr,a.x,a.y),i[0]=a.x,i[1]=a.y);else{if(Mi(i,a))return;e.uniform2iv(this.addr,a),Ci(i,a)}}function RU(e,a){let i=this.cache;if(a.x!==void 0)(i[0]!==a.x||i[1]!==a.y||i[2]!==a.z)&&(e.uniform3i(this.addr,a.x,a.y,a.z),i[0]=a.x,i[1]=a.y,i[2]=a.z);else{if(Mi(i,a))return;e.uniform3iv(this.addr,a),Ci(i,a)}}function LU(e,a){let i=this.cache;if(a.x!==void 0)(i[0]!==a.x||i[1]!==a.y||i[2]!==a.z||i[3]!==a.w)&&(e.uniform4i(this.addr,a.x,a.y,a.z,a.w),i[0]=a.x,i[1]=a.y,i[2]=a.z,i[3]=a.w);else{if(Mi(i,a))return;e.uniform4iv(this.addr,a),Ci(i,a)}}function BU(e,a){let i=this.cache;i[0]!==a&&(e.uniform1ui(this.addr,a),i[0]=a)}function NU(e,a){let i=this.cache;if(a.x!==void 0)(i[0]!==a.x||i[1]!==a.y)&&(e.uniform2ui(this.addr,a.x,a.y),i[0]=a.x,i[1]=a.y);else{if(Mi(i,a))return;e.uniform2uiv(this.addr,a),Ci(i,a)}}function FU(e,a){let i=this.cache;if(a.x!==void 0)(i[0]!==a.x||i[1]!==a.y||i[2]!==a.z)&&(e.uniform3ui(this.addr,a.x,a.y,a.z),i[0]=a.x,i[1]=a.y,i[2]=a.z);else{if(Mi(i,a))return;e.uniform3uiv(this.addr,a),Ci(i,a)}}function kU(e,a){let i=this.cache;if(a.x!==void 0)(i[0]!==a.x||i[1]!==a.y||i[2]!==a.z||i[3]!==a.w)&&(e.uniform4ui(this.addr,a.x,a.y,a.z,a.w),i[0]=a.x,i[1]=a.y,i[2]=a.z,i[3]=a.w);else{if(Mi(i,a))return;e.uniform4uiv(this.addr,a),Ci(i,a)}}function VU(e,a,i){let o=this.cache,c=i.allocateTextureUnit();o[0]!==c&&(e.uniform1i(this.addr,c),o[0]=c),i.setTexture2D(a||ZM,c)}function zU(e,a,i){let o=this.cache,c=i.allocateTextureUnit();o[0]!==c&&(e.uniform1i(this.addr,c),o[0]=c),i.setTexture3D(a||$M,c)}function UU(e,a,i){let o=this.cache,c=i.allocateTextureUnit();o[0]!==c&&(e.uniform1i(this.addr,c),o[0]=c),i.setTextureCube(a||eC,c)}function GU(e,a,i){let o=this.cache,c=i.allocateTextureUnit();o[0]!==c&&(e.uniform1i(this.addr,c),o[0]=c),i.setTexture2DArray(a||JM,c)}function jU(e){switch(e){case 5126:return _U;case 35664:return EU;case 35665:return TU;case 35666:return MU;case 35674:return CU;case 35675:return PU;case 35676:return DU;case 5124:case 35670:return OU;case 35667:case 35671:return IU;case 35668:case 35672:return RU;case 35669:case 35673:return LU;case 5125:return BU;case 36294:return NU;case 36295:return FU;case 36296:return kU;case 35678:case 36198:case 36298:case 36306:case 35682:return VU;case 35679:case 36299:case 36307:return zU;case 35680:case 36300:case 36308:case 36293:return UU;case 36289:case 36303:case 36311:case 36292:return GU}}function HU(e,a){e.uniform1fv(this.addr,a)}function WU(e,a){let i=hh(a,this.size,2);e.uniform2fv(this.addr,i)}function qU(e,a){let i=hh(a,this.size,3);e.uniform3fv(this.addr,i)}function YU(e,a){let i=hh(a,this.size,4);e.uniform4fv(this.addr,i)}function XU(e,a){let i=hh(a,this.size,4);e.uniformMatrix2fv(this.addr,!1,i)}function QU(e,a){let i=hh(a,this.size,9);e.uniformMatrix3fv(this.addr,!1,i)}function KU(e,a){let i=hh(a,this.size,16);e.uniformMatrix4fv(this.addr,!1,i)}function ZU(e,a){e.uniform1iv(this.addr,a)}function JU(e,a){e.uniform2iv(this.addr,a)}function $U(e,a){e.uniform3iv(this.addr,a)}function eG(e,a){e.uniform4iv(this.addr,a)}function tG(e,a){e.uniform1uiv(this.addr,a)}function rG(e,a){e.uniform2uiv(this.addr,a)}function iG(e,a){e.uniform3uiv(this.addr,a)}function nG(e,a){e.uniform4uiv(this.addr,a)}function sG(e,a,i){let o=this.cache,c=a.length,d=jy(i,c);Mi(o,d)||(e.uniform1iv(this.addr,d),Ci(o,d));for(let g=0;g!==c;++g)i.setTexture2D(a[g]||ZM,d[g])}function oG(e,a,i){let o=this.cache,c=a.length,d=jy(i,c);Mi(o,d)||(e.uniform1iv(this.addr,d),Ci(o,d));for(let g=0;g!==c;++g)i.setTexture3D(a[g]||$M,d[g])}function aG(e,a,i){let o=this.cache,c=a.length,d=jy(i,c);Mi(o,d)||(e.uniform1iv(this.addr,d),Ci(o,d));for(let g=0;g!==c;++g)i.setTextureCube(a[g]||eC,d[g])}function lG(e,a,i){let o=this.cache,c=a.length,d=jy(i,c);Mi(o,d)||(e.uniform1iv(this.addr,d),Ci(o,d));for(let g=0;g!==c;++g)i.setTexture2DArray(a[g]||JM,d[g])}function cG(e){switch(e){case 5126:return HU;case 35664:return WU;case 35665:return qU;case 35666:return YU;case 35674:return XU;case 35675:return QU;case 35676:return KU;case 5124:case 35670:return ZU;case 35667:case 35671:return JU;case 35668:case 35672:return $U;case 35669:case 35673:return eG;case 5125:return tG;case 36294:return rG;case 36295:return iG;case 36296:return nG;case 35678:case 36198:case 36298:case 36306:case 35682:return sG;case 35679:case 36299:case 36307:return oG;case 35680:case 36300:case 36308:case 36293:return aG;case 36289:case 36303:case 36311:case 36292:return lG}}var KS=class{constructor(e,a,i){this.id=e,this.addr=i,this.cache=[],this.setValue=jU(a.type)}},ZS=class{constructor(e,a,i){this.id=e,this.addr=i,this.cache=[],this.size=a.size,this.setValue=cG(a.type)}},JS=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,a,i){let o=this.seq;for(let c=0,d=o.length;c!==d;++c){let g=o[c];g.setValue(e,a[g.id],i)}}},LS=/(\w+)(\])?(\[|\.)?/g;function aM(e,a){e.seq.push(a),e.map[a.id]=a}function uG(e,a,i){let o=e.name,c=o.length;for(LS.lastIndex=0;;){let d=LS.exec(o),g=LS.lastIndex,b=d[1],j=d[2]==="]",$=d[3];if(j&&(b=b|0),$===void 0||$==="["&&g+2===c){aM(i,$===void 0?new KS(b,e,a):new ZS(b,e,a));break}else{let rt=i.map[b];rt===void 0&&(rt=new JS(b),aM(i,rt)),i=rt}}}var Gu=class{constructor(e,a){this.seq=[],this.map={};let i=e.getProgramParameter(a,35718);for(let o=0;o<i;++o){let c=e.getActiveUniform(a,o),d=e.getUniformLocation(a,c.name);uG(c,d,this)}}setValue(e,a,i,o){let c=this.map[a];c!==void 0&&c.setValue(e,i,o)}setOptional(e,a,i){let o=a[i];o!==void 0&&this.setValue(e,i,o)}static upload(e,a,i,o){for(let c=0,d=a.length;c!==d;++c){let g=a[c],b=i[g.id];b.needsUpdate!==!1&&g.setValue(e,b.value,o)}}static seqWithValue(e,a){let i=[];for(let o=0,c=e.length;o!==c;++o){let d=e[o];d.id in a&&i.push(d)}return i}};function lM(e,a,i){let o=e.createShader(a);return e.shaderSource(o,i),e.compileShader(o),o}var hG=0;function dG(e,a){let i=e.split(`
`),o=[],c=Math.max(a-6,0),d=Math.min(a+6,i.length);for(let g=c;g<d;g++){let b=g+1;o.push(`${b===a?">":" "} ${b}: ${i[g]}`)}return o.join(`
`)}function fG(e){switch(e){case Sn:return["Linear","( value )"];case at:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function cM(e,a,i){let o=e.getShaderParameter(a,35713),c=e.getShaderInfoLog(a).trim();if(o&&c==="")return"";let d=/ERROR: 0:(\d+)/.exec(c);if(d){let g=parseInt(d[1]);return i.toUpperCase()+`

`+c+`

`+dG(e.getShaderSource(a),g)}else return c}function pG(e,a){let i=fG(a);return"vec4 "+e+"( vec4 value ) { return LinearTo"+i[0]+i[1]+"; }"}function mG(e,a){let i;switch(a){case PF:i="Linear";break;case DF:i="Reinhard";break;case OF:i="OptimizedCineon";break;case IF:i="ACESFilmic";break;case RF:i="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",a),i="Linear"}return"vec3 "+e+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}function gG(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||e.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(gp).join(`
`)}function yG(e){let a=[];for(let i in e){let o=e[i];o!==!1&&a.push("#define "+i+" "+o)}return a.join(`
`)}function vG(e,a){let i={},o=e.getProgramParameter(a,35721);for(let c=0;c<o;c++){let d=e.getActiveAttrib(a,c),g=d.name,b=1;d.type===35674&&(b=2),d.type===35675&&(b=3),d.type===35676&&(b=4),i[g]={type:d.type,location:e.getAttribLocation(a,g),locationSize:b}}return i}function gp(e){return e!==""}function uM(e,a){let i=a.numSpotLightShadows+a.numSpotLightMaps-a.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,a.numDirLights).replace(/NUM_SPOT_LIGHTS/g,a.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,a.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,i).replace(/NUM_RECT_AREA_LIGHTS/g,a.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,a.numPointLights).replace(/NUM_HEMI_LIGHTS/g,a.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,a.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,a.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,a.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,a.numPointLightShadows)}function hM(e,a){return e.replace(/NUM_CLIPPING_PLANES/g,a.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,a.numClippingPlanes-a.numClipIntersection)}var xG=/^[ \t]*#include +<([\w\d./]+)>/gm;function $S(e){return e.replace(xG,bG)}function bG(e,a){let i=bt[a];if(i===void 0)throw new Error("Can not resolve #include <"+a+">");return $S(i)}var SG=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function dM(e){return e.replace(SG,wG)}function wG(e,a,i,o){let c="";for(let d=parseInt(a);d<parseInt(i);d++)c+=o.replace(/\[\s*i\s*\]/g,"[ "+d+" ]").replace(/UNROLLED_LOOP_INDEX/g,d);return c}function fM(e){let a="precision "+e.precision+` float;
precision `+e.precision+" int;";return e.precision==="highp"?a+=`
#define HIGH_PRECISION`:e.precision==="mediump"?a+=`
#define MEDIUM_PRECISION`:e.precision==="lowp"&&(a+=`
#define LOW_PRECISION`),a}function AG(e){let a="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===Gy?a="SHADOWMAP_TYPE_PCF":e.shadowMapType===aF?a="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===mp&&(a="SHADOWMAP_TYPE_VSM"),a}function _G(e){let a="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case al:case ll:a="ENVMAP_TYPE_CUBE";break;case ch:a="ENVMAP_TYPE_CUBE_UV";break}return a}function EG(e){let a="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case ll:a="ENVMAP_MODE_REFRACTION";break}return a}function TG(e){let a="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case GM:a="ENVMAP_BLENDING_MULTIPLY";break;case MF:a="ENVMAP_BLENDING_MIX";break;case CF:a="ENVMAP_BLENDING_ADD";break}return a}function MG(e){let a=e.envMapCubeUVHeight;if(a===null)return null;let i=Math.log2(a)-2,o=1/a;return{texelWidth:1/(3*Math.max(Math.pow(2,i),7*16)),texelHeight:o,maxMip:i}}function CG(e,a,i,o){let c=e.getContext(),d=i.defines,g=i.vertexShader,b=i.fragmentShader,j=AG(i),$=_G(i),rt=EG(i),_e=TG(i),st=MG(i),ut=i.isWebGL2?"":gG(i),gt=yG(d),yt=c.createProgram(),Pt,wt,Ct=i.glslVersion?"#version "+i.glslVersion+`
`:"";i.isRawShaderMaterial?(Pt=[gt].filter(gp).join(`
`),Pt.length>0&&(Pt+=`
`),wt=[ut,gt].filter(gp).join(`
`),wt.length>0&&(wt+=`
`)):(Pt=[fM(i),"#define SHADER_NAME "+i.shaderName,gt,i.instancing?"#define USE_INSTANCING":"",i.instancingColor?"#define USE_INSTANCING_COLOR":"",i.supportsVertexTextures?"#define VERTEX_TEXTURES":"",i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+rt:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMap&&i.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",i.normalMap&&i.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.displacementMap&&i.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",i.specularColorMap?"#define USE_SPECULARCOLORMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.sheenColorMap?"#define USE_SHEENCOLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUvs?"#define USE_UV":"",i.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",i.flatShading?"#define FLAT_SHADED":"",i.skinning?"#define USE_SKINNING":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals&&i.flatShading===!1?"#define USE_MORPHNORMALS":"",i.morphColors&&i.isWebGL2?"#define USE_MORPHCOLORS":"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+i.morphTextureStride:"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_COUNT "+i.morphTargetsCount:"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+j:"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(gp).join(`
`),wt=[ut,fM(i),"#define SHADER_NAME "+i.shaderName,gt,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.matcap?"#define USE_MATCAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+$:"",i.envMap?"#define "+rt:"",i.envMap?"#define "+_e:"",st?"#define CUBEUV_TEXEL_WIDTH "+st.texelWidth:"",st?"#define CUBEUV_TEXEL_HEIGHT "+st.texelHeight:"",st?"#define CUBEUV_MAX_MIP "+st.maxMip+".0":"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMap&&i.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",i.normalMap&&i.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",i.clearcoat?"#define USE_CLEARCOAT":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.iridescence?"#define USE_IRIDESCENCE":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",i.specularColorMap?"#define USE_SPECULARCOLORMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.alphaTest?"#define USE_ALPHATEST":"",i.sheen?"#define USE_SHEEN":"",i.sheenColorMap?"#define USE_SHEENCOLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors||i.instancingColor?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUvs?"#define USE_UV":"",i.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",i.gradientMap?"#define USE_GRADIENTMAP":"",i.flatShading?"#define FLAT_SHADED":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+j:"",i.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",i.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",i.toneMapping!==Hs?"#define TONE_MAPPING":"",i.toneMapping!==Hs?bt.tonemapping_pars_fragment:"",i.toneMapping!==Hs?mG("toneMapping",i.toneMapping):"",i.dithering?"#define DITHERING":"",i.opaque?"#define OPAQUE":"",bt.encodings_pars_fragment,pG("linearToOutputTexel",i.outputEncoding),i.useDepthPacking?"#define DEPTH_PACKING "+i.depthPacking:"",`
`].filter(gp).join(`
`)),g=$S(g),g=uM(g,i),g=hM(g,i),b=$S(b),b=uM(b,i),b=hM(b,i),g=dM(g),b=dM(b),i.isWebGL2&&i.isRawShaderMaterial!==!0&&(Ct=`#version 300 es
`,Pt=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+Pt,wt=["#define varying in",i.glslVersion===kT?"":"layout(location = 0) out highp vec4 pc_fragColor;",i.glslVersion===kT?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+wt);let At=Ct+Pt+g,Tt=Ct+wt+b,kt=lM(c,35633,At),It=lM(c,35632,Tt);if(c.attachShader(yt,kt),c.attachShader(yt,It),i.index0AttributeName!==void 0?c.bindAttribLocation(yt,0,i.index0AttributeName):i.morphTargets===!0&&c.bindAttribLocation(yt,0,"position"),c.linkProgram(yt),e.debug.checkShaderErrors){let Nt=c.getProgramInfoLog(yt).trim(),Ht=c.getShaderInfoLog(kt).trim(),Gr=c.getShaderInfoLog(It).trim(),hs=!0,_s=!0;if(c.getProgramParameter(yt,35714)===!1){hs=!1;let hn=cM(c,kt,"vertex"),Qn=cM(c,It,"fragment");console.error("THREE.WebGLProgram: Shader Error "+c.getError()+" - VALIDATE_STATUS "+c.getProgramParameter(yt,35715)+`

Program Info Log: `+Nt+`
`+hn+`
`+Qn)}else Nt!==""?console.warn("THREE.WebGLProgram: Program Info Log:",Nt):(Ht===""||Gr==="")&&(_s=!1);_s&&(this.diagnostics={runnable:hs,programLog:Nt,vertexShader:{log:Ht,prefix:Pt},fragmentShader:{log:Gr,prefix:wt}})}c.deleteShader(kt),c.deleteShader(It);let Lt;this.getUniforms=function(){return Lt===void 0&&(Lt=new Gu(c,yt)),Lt};let Ft;return this.getAttributes=function(){return Ft===void 0&&(Ft=vG(c,yt)),Ft},this.destroy=function(){o.releaseStatesOfProgram(this),c.deleteProgram(yt),this.program=void 0},this.name=i.shaderName,this.id=hG++,this.cacheKey=a,this.usedTimes=1,this.program=yt,this.vertexShader=kt,this.fragmentShader=It,this}var PG=0,ew=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let a=e.vertexShader,i=e.fragmentShader,o=this._getShaderStage(a),c=this._getShaderStage(i),d=this._getShaderCacheForMaterial(e);return d.has(o)===!1&&(d.add(o),o.usedTimes++),d.has(c)===!1&&(d.add(c),c.usedTimes++),this}remove(e){let a=this.materialCache.get(e);for(let i of a)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let a=this.materialCache,i=a.get(e);return i===void 0&&(i=new Set,a.set(e,i)),i}_getShaderStage(e){let a=this.shaderCache,i=a.get(e);return i===void 0&&(i=new tw(e),a.set(e,i)),i}},tw=class{constructor(e){this.id=PG++,this.code=e,this.usedTimes=0}};function DG(e,a,i,o,c,d,g){let b=new Ep,j=new ew,$=[],rt=c.isWebGL2,_e=c.logarithmicDepthBuffer,st=c.vertexTextures,ut=c.precision,gt={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function yt(Ft,Nt,Ht,Gr,hs){let _s=Gr.fog,hn=hs.geometry,Qn=Ft.isMeshStandardMaterial?Gr.environment:null,ds=(Ft.isMeshStandardMaterial?i:a).get(Ft.envMap||Qn),un=ds&&ds.mapping===ch?ds.image.height:null,dr=gt[Ft.type];Ft.precision!==null&&(ut=c.getMaxPrecision(Ft.precision),ut!==Ft.precision&&console.warn("THREE.WebGLProgram.getParameters:",Ft.precision,"not supported, using",ut,"instead."));let us=hn.morphAttributes.position||hn.morphAttributes.normal||hn.morphAttributes.color,Nn=us!==void 0?us.length:0,gn=0;hn.morphAttributes.position!==void 0&&(gn=1),hn.morphAttributes.normal!==void 0&&(gn=2),hn.morphAttributes.color!==void 0&&(gn=3);let Zn,xu,au,Vv;if(dr){let q1=Ao[dr];Zn=q1.vertexShader,xu=q1.fragmentShader}else Zn=Ft.vertexShader,xu=Ft.fragmentShader,j.update(Ft),au=j.getVertexShaderID(Ft),Vv=j.getFragmentShaderID(Ft);let wu=e.getRenderTarget(),a1=Ft.alphaTest>0,P0=Ft.clearcoat>0,B0=Ft.iridescence>0;return{isWebGL2:rt,shaderID:dr,shaderName:Ft.type,vertexShader:Zn,fragmentShader:xu,defines:Ft.defines,customVertexShaderID:au,customFragmentShaderID:Vv,isRawShaderMaterial:Ft.isRawShaderMaterial===!0,glslVersion:Ft.glslVersion,precision:ut,instancing:hs.isInstancedMesh===!0,instancingColor:hs.isInstancedMesh===!0&&hs.instanceColor!==null,supportsVertexTextures:st,outputEncoding:wu===null?e.outputEncoding:wu.isXRRenderTarget===!0?wu.texture.encoding:Sn,map:!!Ft.map,matcap:!!Ft.matcap,envMap:!!ds,envMapMode:ds&&ds.mapping,envMapCubeUVHeight:un,lightMap:!!Ft.lightMap,aoMap:!!Ft.aoMap,emissiveMap:!!Ft.emissiveMap,bumpMap:!!Ft.bumpMap,normalMap:!!Ft.normalMap,objectSpaceNormalMap:Ft.normalMapType===KF,tangentSpaceNormalMap:Ft.normalMapType===QF,decodeVideoTexture:!!Ft.map&&Ft.map.isVideoTexture===!0&&Ft.map.encoding===at,clearcoat:P0,clearcoatMap:P0&&!!Ft.clearcoatMap,clearcoatRoughnessMap:P0&&!!Ft.clearcoatRoughnessMap,clearcoatNormalMap:P0&&!!Ft.clearcoatNormalMap,iridescence:B0,iridescenceMap:B0&&!!Ft.iridescenceMap,iridescenceThicknessMap:B0&&!!Ft.iridescenceThicknessMap,displacementMap:!!Ft.displacementMap,roughnessMap:!!Ft.roughnessMap,metalnessMap:!!Ft.metalnessMap,specularMap:!!Ft.specularMap,specularIntensityMap:!!Ft.specularIntensityMap,specularColorMap:!!Ft.specularColorMap,opaque:Ft.transparent===!1&&Ft.blending===sl,alphaMap:!!Ft.alphaMap,alphaTest:a1,gradientMap:!!Ft.gradientMap,sheen:Ft.sheen>0,sheenColorMap:!!Ft.sheenColorMap,sheenRoughnessMap:!!Ft.sheenRoughnessMap,transmission:Ft.transmission>0,transmissionMap:!!Ft.transmissionMap,thicknessMap:!!Ft.thicknessMap,combine:Ft.combine,vertexTangents:!!Ft.normalMap&&!!hn.attributes.tangent,vertexColors:Ft.vertexColors,vertexAlphas:Ft.vertexColors===!0&&!!hn.attributes.color&&hn.attributes.color.itemSize===4,vertexUvs:!!Ft.map||!!Ft.bumpMap||!!Ft.normalMap||!!Ft.specularMap||!!Ft.alphaMap||!!Ft.emissiveMap||!!Ft.roughnessMap||!!Ft.metalnessMap||!!Ft.clearcoatMap||!!Ft.clearcoatRoughnessMap||!!Ft.clearcoatNormalMap||!!Ft.iridescenceMap||!!Ft.iridescenceThicknessMap||!!Ft.displacementMap||!!Ft.transmissionMap||!!Ft.thicknessMap||!!Ft.specularIntensityMap||!!Ft.specularColorMap||!!Ft.sheenColorMap||!!Ft.sheenRoughnessMap,uvsVertexOnly:!(Ft.map||Ft.bumpMap||Ft.normalMap||Ft.specularMap||Ft.alphaMap||Ft.emissiveMap||Ft.roughnessMap||Ft.metalnessMap||Ft.clearcoatNormalMap||Ft.iridescenceMap||Ft.iridescenceThicknessMap||Ft.transmission>0||Ft.transmissionMap||Ft.thicknessMap||Ft.specularIntensityMap||Ft.specularColorMap||Ft.sheen>0||Ft.sheenColorMap||Ft.sheenRoughnessMap)&&!!Ft.displacementMap,fog:!!_s,useFog:Ft.fog===!0,fogExp2:_s&&_s.isFogExp2,flatShading:!!Ft.flatShading,sizeAttenuation:Ft.sizeAttenuation,logarithmicDepthBuffer:_e,skinning:hs.isSkinnedMesh===!0,morphTargets:hn.morphAttributes.position!==void 0,morphNormals:hn.morphAttributes.normal!==void 0,morphColors:hn.morphAttributes.color!==void 0,morphTargetsCount:Nn,morphTextureStride:gn,numDirLights:Nt.directional.length,numPointLights:Nt.point.length,numSpotLights:Nt.spot.length,numSpotLightMaps:Nt.spotLightMap.length,numRectAreaLights:Nt.rectArea.length,numHemiLights:Nt.hemi.length,numDirLightShadows:Nt.directionalShadowMap.length,numPointLightShadows:Nt.pointShadowMap.length,numSpotLightShadows:Nt.spotShadowMap.length,numSpotLightShadowsWithMaps:Nt.numSpotLightShadowsWithMaps,numClippingPlanes:g.numPlanes,numClipIntersection:g.numIntersection,dithering:Ft.dithering,shadowMapEnabled:e.shadowMap.enabled&&Ht.length>0,shadowMapType:e.shadowMap.type,toneMapping:Ft.toneMapped?e.toneMapping:Hs,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:Ft.premultipliedAlpha,doubleSided:Ft.side===tn,flipSided:Ft.side===yi,useDepthPacking:!!Ft.depthPacking,depthPacking:Ft.depthPacking||0,index0AttributeName:Ft.index0AttributeName,extensionDerivatives:Ft.extensions&&Ft.extensions.derivatives,extensionFragDepth:Ft.extensions&&Ft.extensions.fragDepth,extensionDrawBuffers:Ft.extensions&&Ft.extensions.drawBuffers,extensionShaderTextureLOD:Ft.extensions&&Ft.extensions.shaderTextureLOD,rendererExtensionFragDepth:rt||o.has("EXT_frag_depth"),rendererExtensionDrawBuffers:rt||o.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:rt||o.has("EXT_shader_texture_lod"),customProgramCacheKey:Ft.customProgramCacheKey()}}function Pt(Ft){let Nt=[];if(Ft.shaderID?Nt.push(Ft.shaderID):(Nt.push(Ft.customVertexShaderID),Nt.push(Ft.customFragmentShaderID)),Ft.defines!==void 0)for(let Ht in Ft.defines)Nt.push(Ht),Nt.push(Ft.defines[Ht]);return Ft.isRawShaderMaterial===!1&&(wt(Nt,Ft),Ct(Nt,Ft),Nt.push(e.outputEncoding)),Nt.push(Ft.customProgramCacheKey),Nt.join()}function wt(Ft,Nt){Ft.push(Nt.precision),Ft.push(Nt.outputEncoding),Ft.push(Nt.envMapMode),Ft.push(Nt.envMapCubeUVHeight),Ft.push(Nt.combine),Ft.push(Nt.vertexUvs),Ft.push(Nt.fogExp2),Ft.push(Nt.sizeAttenuation),Ft.push(Nt.morphTargetsCount),Ft.push(Nt.morphAttributeCount),Ft.push(Nt.numDirLights),Ft.push(Nt.numPointLights),Ft.push(Nt.numSpotLights),Ft.push(Nt.numSpotLightMaps),Ft.push(Nt.numHemiLights),Ft.push(Nt.numRectAreaLights),Ft.push(Nt.numDirLightShadows),Ft.push(Nt.numPointLightShadows),Ft.push(Nt.numSpotLightShadows),Ft.push(Nt.numSpotLightShadowsWithMaps),Ft.push(Nt.shadowMapType),Ft.push(Nt.toneMapping),Ft.push(Nt.numClippingPlanes),Ft.push(Nt.numClipIntersection),Ft.push(Nt.depthPacking)}function Ct(Ft,Nt){b.disableAll(),Nt.isWebGL2&&b.enable(0),Nt.supportsVertexTextures&&b.enable(1),Nt.instancing&&b.enable(2),Nt.instancingColor&&b.enable(3),Nt.map&&b.enable(4),Nt.matcap&&b.enable(5),Nt.envMap&&b.enable(6),Nt.lightMap&&b.enable(7),Nt.aoMap&&b.enable(8),Nt.emissiveMap&&b.enable(9),Nt.bumpMap&&b.enable(10),Nt.normalMap&&b.enable(11),Nt.objectSpaceNormalMap&&b.enable(12),Nt.tangentSpaceNormalMap&&b.enable(13),Nt.clearcoat&&b.enable(14),Nt.clearcoatMap&&b.enable(15),Nt.clearcoatRoughnessMap&&b.enable(16),Nt.clearcoatNormalMap&&b.enable(17),Nt.iridescence&&b.enable(18),Nt.iridescenceMap&&b.enable(19),Nt.iridescenceThicknessMap&&b.enable(20),Nt.displacementMap&&b.enable(21),Nt.specularMap&&b.enable(22),Nt.roughnessMap&&b.enable(23),Nt.metalnessMap&&b.enable(24),Nt.gradientMap&&b.enable(25),Nt.alphaMap&&b.enable(26),Nt.alphaTest&&b.enable(27),Nt.vertexColors&&b.enable(28),Nt.vertexAlphas&&b.enable(29),Nt.vertexUvs&&b.enable(30),Nt.vertexTangents&&b.enable(31),Nt.uvsVertexOnly&&b.enable(32),Ft.push(b.mask),b.disableAll(),Nt.fog&&b.enable(0),Nt.useFog&&b.enable(1),Nt.flatShading&&b.enable(2),Nt.logarithmicDepthBuffer&&b.enable(3),Nt.skinning&&b.enable(4),Nt.morphTargets&&b.enable(5),Nt.morphNormals&&b.enable(6),Nt.morphColors&&b.enable(7),Nt.premultipliedAlpha&&b.enable(8),Nt.shadowMapEnabled&&b.enable(9),Nt.physicallyCorrectLights&&b.enable(10),Nt.doubleSided&&b.enable(11),Nt.flipSided&&b.enable(12),Nt.useDepthPacking&&b.enable(13),Nt.dithering&&b.enable(14),Nt.specularIntensityMap&&b.enable(15),Nt.specularColorMap&&b.enable(16),Nt.transmission&&b.enable(17),Nt.transmissionMap&&b.enable(18),Nt.thicknessMap&&b.enable(19),Nt.sheen&&b.enable(20),Nt.sheenColorMap&&b.enable(21),Nt.sheenRoughnessMap&&b.enable(22),Nt.decodeVideoTexture&&b.enable(23),Nt.opaque&&b.enable(24),Ft.push(b.mask)}function At(Ft){let Nt=gt[Ft.type],Ht;if(Nt){let Gr=Ao[Nt];Ht=Xs.clone(Gr.uniforms)}else Ht=Ft.uniforms;return Ht}function Tt(Ft,Nt){let Ht;for(let Gr=0,hs=$.length;Gr<hs;Gr++){let _s=$[Gr];if(_s.cacheKey===Nt){Ht=_s,++Ht.usedTimes;break}}return Ht===void 0&&(Ht=new CG(e,Nt,Ft,d),$.push(Ht)),Ht}function kt(Ft){if(--Ft.usedTimes===0){let Nt=$.indexOf(Ft);$[Nt]=$[$.length-1],$.pop(),Ft.destroy()}}function It(Ft){j.remove(Ft)}function Lt(){j.dispose()}return{getParameters:yt,getProgramCacheKey:Pt,getUniforms:At,acquireProgram:Tt,releaseProgram:kt,releaseShaderCache:It,programs:$,dispose:Lt}}function OG(){let e=new WeakMap;function a(d){let g=e.get(d);return g===void 0&&(g={},e.set(d,g)),g}function i(d){e.delete(d)}function o(d,g,b){e.get(d)[g]=b}function c(){e=new WeakMap}return{get:a,remove:i,update:o,dispose:c}}function IG(e,a){return e.groupOrder!==a.groupOrder?e.groupOrder-a.groupOrder:e.renderOrder!==a.renderOrder?e.renderOrder-a.renderOrder:e.material.id!==a.material.id?e.material.id-a.material.id:e.z!==a.z?e.z-a.z:e.id-a.id}function pM(e,a){return e.groupOrder!==a.groupOrder?e.groupOrder-a.groupOrder:e.renderOrder!==a.renderOrder?e.renderOrder-a.renderOrder:e.z!==a.z?a.z-e.z:e.id-a.id}function mM(){let e=[],a=0,i=[],o=[],c=[];function d(){a=0,i.length=0,o.length=0,c.length=0}function g(_e,st,ut,gt,yt,Pt){let wt=e[a];return wt===void 0?(wt={id:_e.id,object:_e,geometry:st,material:ut,groupOrder:gt,renderOrder:_e.renderOrder,z:yt,group:Pt},e[a]=wt):(wt.id=_e.id,wt.object=_e,wt.geometry=st,wt.material=ut,wt.groupOrder=gt,wt.renderOrder=_e.renderOrder,wt.z=yt,wt.group=Pt),a++,wt}function b(_e,st,ut,gt,yt,Pt){let wt=g(_e,st,ut,gt,yt,Pt);ut.transmission>0?o.push(wt):ut.transparent===!0?c.push(wt):i.push(wt)}function j(_e,st,ut,gt,yt,Pt){let wt=g(_e,st,ut,gt,yt,Pt);ut.transmission>0?o.unshift(wt):ut.transparent===!0?c.unshift(wt):i.unshift(wt)}function $(_e,st){i.length>1&&i.sort(_e||IG),o.length>1&&o.sort(st||pM),c.length>1&&c.sort(st||pM)}function rt(){for(let _e=a,st=e.length;_e<st;_e++){let ut=e[_e];if(ut.id===null)break;ut.id=null,ut.object=null,ut.geometry=null,ut.material=null,ut.group=null}}return{opaque:i,transmissive:o,transparent:c,init:d,push:b,unshift:j,finish:rt,sort:$}}function RG(){let e=new WeakMap;function a(o,c){let d=e.get(o),g;return d===void 0?(g=new mM,e.set(o,[g])):c>=d.length?(g=new mM,d.push(g)):g=d[c],g}function i(){e=new WeakMap}return{get:a,dispose:i}}function LG(){let e={};return{get:function(a){if(e[a.id]!==void 0)return e[a.id];let i;switch(a.type){case"DirectionalLight":i={direction:new _,color:new We};break;case"SpotLight":i={position:new _,direction:new _,color:new We,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":i={position:new _,color:new We,distance:0,decay:0};break;case"HemisphereLight":i={direction:new _,skyColor:new We,groundColor:new We};break;case"RectAreaLight":i={color:new We,position:new _,halfWidth:new _,halfHeight:new _};break}return e[a.id]=i,i}}}function BG(){let e={};return{get:function(a){if(e[a.id]!==void 0)return e[a.id];let i;switch(a.type){case"DirectionalLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new z$2};break;case"SpotLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new z$2};break;case"PointLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new z$2,shadowCameraNear:1,shadowCameraFar:1e3};break}return e[a.id]=i,i}}}var NG=0;function FG(e,a){return(a.castShadow?2:0)-(e.castShadow?2:0)+(a.map?1:0)-(e.map?1:0)}function kG(e,a){let i=new LG,o=BG(),c={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let rt=0;rt<9;rt++)c.probe.push(new _);let d=new _,g=new ce$1,b=new ce$1;function j(rt,_e){let st=0,ut=0,gt=0;for(let Gr=0;Gr<9;Gr++)c.probe[Gr].set(0,0,0);let yt=0,Pt=0,wt=0,Ct=0,At=0,Tt=0,kt=0,It=0,Lt=0,Ft=0;rt.sort(FG);let Nt=_e!==!0?Math.PI:1;for(let Gr=0,hs=rt.length;Gr<hs;Gr++){let _s=rt[Gr],hn=_s.color,Qn=_s.intensity,ds=_s.distance,un=_s.shadow&&_s.shadow.map?_s.shadow.map.texture:null;if(_s.isAmbientLight)st+=hn.r*Qn*Nt,ut+=hn.g*Qn*Nt,gt+=hn.b*Qn*Nt;else if(_s.isLightProbe)for(let dr=0;dr<9;dr++)c.probe[dr].addScaledVector(_s.sh.coefficients[dr],Qn);else if(_s.isDirectionalLight){let dr=i.get(_s);if(dr.color.copy(_s.color).multiplyScalar(_s.intensity*Nt),_s.castShadow){let us=_s.shadow,Nn=o.get(_s);Nn.shadowBias=us.bias,Nn.shadowNormalBias=us.normalBias,Nn.shadowRadius=us.radius,Nn.shadowMapSize=us.mapSize,c.directionalShadow[yt]=Nn,c.directionalShadowMap[yt]=un,c.directionalShadowMatrix[yt]=_s.shadow.matrix,Tt++}c.directional[yt]=dr,yt++}else if(_s.isSpotLight){let dr=i.get(_s);dr.position.setFromMatrixPosition(_s.matrixWorld),dr.color.copy(hn).multiplyScalar(Qn*Nt),dr.distance=ds,dr.coneCos=Math.cos(_s.angle),dr.penumbraCos=Math.cos(_s.angle*(1-_s.penumbra)),dr.decay=_s.decay,c.spot[wt]=dr;let us=_s.shadow;if(_s.map&&(c.spotLightMap[Lt]=_s.map,Lt++,us.updateMatrices(_s),_s.castShadow&&Ft++),c.spotLightMatrix[wt]=us.matrix,_s.castShadow){let Nn=o.get(_s);Nn.shadowBias=us.bias,Nn.shadowNormalBias=us.normalBias,Nn.shadowRadius=us.radius,Nn.shadowMapSize=us.mapSize,c.spotShadow[wt]=Nn,c.spotShadowMap[wt]=un,It++}wt++}else if(_s.isRectAreaLight){let dr=i.get(_s);dr.color.copy(hn).multiplyScalar(Qn),dr.halfWidth.set(_s.width*.5,0,0),dr.halfHeight.set(0,_s.height*.5,0),c.rectArea[Ct]=dr,Ct++}else if(_s.isPointLight){let dr=i.get(_s);if(dr.color.copy(_s.color).multiplyScalar(_s.intensity*Nt),dr.distance=_s.distance,dr.decay=_s.decay,_s.castShadow){let us=_s.shadow,Nn=o.get(_s);Nn.shadowBias=us.bias,Nn.shadowNormalBias=us.normalBias,Nn.shadowRadius=us.radius,Nn.shadowMapSize=us.mapSize,Nn.shadowCameraNear=us.camera.near,Nn.shadowCameraFar=us.camera.far,c.pointShadow[Pt]=Nn,c.pointShadowMap[Pt]=un,c.pointShadowMatrix[Pt]=_s.shadow.matrix,kt++}c.point[Pt]=dr,Pt++}else if(_s.isHemisphereLight){let dr=i.get(_s);dr.skyColor.copy(_s.color).multiplyScalar(Qn*Nt),dr.groundColor.copy(_s.groundColor).multiplyScalar(Qn*Nt),c.hemi[At]=dr,At++}}Ct>0&&(a.isWebGL2||e.has("OES_texture_float_linear")===!0?(c.rectAreaLTC1=De$1.LTC_FLOAT_1,c.rectAreaLTC2=De$1.LTC_FLOAT_2):e.has("OES_texture_half_float_linear")===!0?(c.rectAreaLTC1=De$1.LTC_HALF_1,c.rectAreaLTC2=De$1.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),c.ambient[0]=st,c.ambient[1]=ut,c.ambient[2]=gt;let Ht=c.hash;(Ht.directionalLength!==yt||Ht.pointLength!==Pt||Ht.spotLength!==wt||Ht.rectAreaLength!==Ct||Ht.hemiLength!==At||Ht.numDirectionalShadows!==Tt||Ht.numPointShadows!==kt||Ht.numSpotShadows!==It||Ht.numSpotMaps!==Lt)&&(c.directional.length=yt,c.spot.length=wt,c.rectArea.length=Ct,c.point.length=Pt,c.hemi.length=At,c.directionalShadow.length=Tt,c.directionalShadowMap.length=Tt,c.pointShadow.length=kt,c.pointShadowMap.length=kt,c.spotShadow.length=It,c.spotShadowMap.length=It,c.directionalShadowMatrix.length=Tt,c.pointShadowMatrix.length=kt,c.spotLightMatrix.length=It+Lt-Ft,c.spotLightMap.length=Lt,c.numSpotLightShadowsWithMaps=Ft,Ht.directionalLength=yt,Ht.pointLength=Pt,Ht.spotLength=wt,Ht.rectAreaLength=Ct,Ht.hemiLength=At,Ht.numDirectionalShadows=Tt,Ht.numPointShadows=kt,Ht.numSpotShadows=It,Ht.numSpotMaps=Lt,c.version=NG++)}function $(rt,_e){let st=0,ut=0,gt=0,yt=0,Pt=0,wt=_e.matrixWorldInverse;for(let Ct=0,At=rt.length;Ct<At;Ct++){let Tt=rt[Ct];if(Tt.isDirectionalLight){let kt=c.directional[st];kt.direction.setFromMatrixPosition(Tt.matrixWorld),d.setFromMatrixPosition(Tt.target.matrixWorld),kt.direction.sub(d),kt.direction.transformDirection(wt),st++}else if(Tt.isSpotLight){let kt=c.spot[gt];kt.position.setFromMatrixPosition(Tt.matrixWorld),kt.position.applyMatrix4(wt),kt.direction.setFromMatrixPosition(Tt.matrixWorld),d.setFromMatrixPosition(Tt.target.matrixWorld),kt.direction.sub(d),kt.direction.transformDirection(wt),gt++}else if(Tt.isRectAreaLight){let kt=c.rectArea[yt];kt.position.setFromMatrixPosition(Tt.matrixWorld),kt.position.applyMatrix4(wt),b.identity(),g.copy(Tt.matrixWorld),g.premultiply(wt),b.extractRotation(g),kt.halfWidth.set(Tt.width*.5,0,0),kt.halfHeight.set(0,Tt.height*.5,0),kt.halfWidth.applyMatrix4(b),kt.halfHeight.applyMatrix4(b),yt++}else if(Tt.isPointLight){let kt=c.point[ut];kt.position.setFromMatrixPosition(Tt.matrixWorld),kt.position.applyMatrix4(wt),ut++}else if(Tt.isHemisphereLight){let kt=c.hemi[Pt];kt.direction.setFromMatrixPosition(Tt.matrixWorld),kt.direction.transformDirection(wt),Pt++}}}return{setup:j,setupView:$,state:c}}function gM(e,a){let i=new kG(e,a),o=[],c=[];function d(){o.length=0,c.length=0}function g(rt){o.push(rt)}function b(rt){c.push(rt)}function j(rt){i.setup(o,rt)}function $(rt){i.setupView(o,rt)}return{init:d,state:{lightsArray:o,shadowsArray:c,lights:i},setupLights:j,setupLightsView:$,pushLight:g,pushShadow:b}}function VG(e,a){let i=new WeakMap;function o(d,g=0){let b=i.get(d),j;return b===void 0?(j=new gM(e,a),i.set(d,[j])):g>=b.length?(j=new gM(e,a),b.push(j)):j=b[g],j}function c(){i=new WeakMap}return{get:o,dispose:c}}var Mp=class extends Sc{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=ji,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},rw=class extends Sc{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new _,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}},zG=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,UG=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function GG(e,a,i){let o=new Tp,c=new z$2,d=new z$2,g=new Ke,b=new Mp({depthPacking:Mw}),j=new rw,$={},rt=i.maxTextureSize,_e={[es]:yi,[yi]:es,[tn]:tn},st=new lt({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new z$2},radius:{value:4}},vertexShader:zG,fragmentShader:UG}),ut=st.clone();ut.defines.HORIZONTAL_PASS=1;let gt=new Pe;gt.setAttribute("position",new Xe(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let yt=new sr(gt,st),Pt=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Gy,this.render=function(Tt,kt,It){if(Pt.enabled===!1||Pt.autoUpdate===!1&&Pt.needsUpdate===!1||Tt.length===0)return;let Lt=e.getRenderTarget(),Ft=e.getActiveCubeFace(),Nt=e.getActiveMipmapLevel(),Ht=e.state;Ht.setBlending(er),Ht.buffers.color.setClear(1,1,1,1),Ht.buffers.depth.setTest(!0),Ht.setScissorTest(!1);for(let Gr=0,hs=Tt.length;Gr<hs;Gr++){let _s=Tt[Gr],hn=_s.shadow;if(hn===void 0){console.warn("THREE.WebGLShadowMap:",_s,"has no shadow.");continue}if(hn.autoUpdate===!1&&hn.needsUpdate===!1)continue;c.copy(hn.mapSize);let Qn=hn.getFrameExtents();if(c.multiply(Qn),d.copy(hn.mapSize),(c.x>rt||c.y>rt)&&(c.x>rt&&(d.x=Math.floor(rt/Qn.x),c.x=d.x*Qn.x,hn.mapSize.x=d.x),c.y>rt&&(d.y=Math.floor(rt/Qn.y),c.y=d.y*Qn.y,hn.mapSize.y=d.y)),hn.map===null){let un=this.type!==mp?{minFilter:Vt,magFilter:Vt}:{};hn.map=new ft(c.x,c.y,un),hn.map.texture.name=_s.name+".shadowMap",hn.camera.updateProjectionMatrix()}e.setRenderTarget(hn.map),e.clear();let ds=hn.getViewportCount();for(let un=0;un<ds;un++){let dr=hn.getViewport(un);g.set(d.x*dr.x,d.y*dr.y,d.x*dr.z,d.y*dr.w),Ht.viewport(g),hn.updateMatrices(_s,un),o=hn.getFrustum(),At(kt,It,hn.camera,_s,this.type)}hn.isPointLightShadow!==!0&&this.type===mp&&wt(hn,It),hn.needsUpdate=!1}Pt.needsUpdate=!1,e.setRenderTarget(Lt,Ft,Nt)};function wt(Tt,kt){let It=a.update(yt);st.defines.VSM_SAMPLES!==Tt.blurSamples&&(st.defines.VSM_SAMPLES=Tt.blurSamples,ut.defines.VSM_SAMPLES=Tt.blurSamples,st.needsUpdate=!0,ut.needsUpdate=!0),Tt.mapPass===null&&(Tt.mapPass=new ft(c.x,c.y)),st.uniforms.shadow_pass.value=Tt.map.texture,st.uniforms.resolution.value=Tt.mapSize,st.uniforms.radius.value=Tt.radius,e.setRenderTarget(Tt.mapPass),e.clear(),e.renderBufferDirect(kt,null,It,st,yt,null),ut.uniforms.shadow_pass.value=Tt.mapPass.texture,ut.uniforms.resolution.value=Tt.mapSize,ut.uniforms.radius.value=Tt.radius,e.setRenderTarget(Tt.map),e.clear(),e.renderBufferDirect(kt,null,It,ut,yt,null)}function Ct(Tt,kt,It,Lt,Ft,Nt){let Ht=null,Gr=It.isPointLight===!0?Tt.customDistanceMaterial:Tt.customDepthMaterial;if(Gr!==void 0)Ht=Gr;else if(Ht=It.isPointLight===!0?j:b,e.localClippingEnabled&&kt.clipShadows===!0&&Array.isArray(kt.clippingPlanes)&&kt.clippingPlanes.length!==0||kt.displacementMap&&kt.displacementScale!==0||kt.alphaMap&&kt.alphaTest>0||kt.map&&kt.alphaTest>0){let hs=Ht.uuid,_s=kt.uuid,hn=$[hs];hn===void 0&&(hn={},$[hs]=hn);let Qn=hn[_s];Qn===void 0&&(Qn=Ht.clone(),hn[_s]=Qn),Ht=Qn}return Ht.visible=kt.visible,Ht.wireframe=kt.wireframe,Nt===mp?Ht.side=kt.shadowSide!==null?kt.shadowSide:kt.side:Ht.side=kt.shadowSide!==null?kt.shadowSide:_e[kt.side],Ht.alphaMap=kt.alphaMap,Ht.alphaTest=kt.alphaTest,Ht.map=kt.map,Ht.clipShadows=kt.clipShadows,Ht.clippingPlanes=kt.clippingPlanes,Ht.clipIntersection=kt.clipIntersection,Ht.displacementMap=kt.displacementMap,Ht.displacementScale=kt.displacementScale,Ht.displacementBias=kt.displacementBias,Ht.wireframeLinewidth=kt.wireframeLinewidth,Ht.linewidth=kt.linewidth,It.isPointLight===!0&&Ht.isMeshDistanceMaterial===!0&&(Ht.referencePosition.setFromMatrixPosition(It.matrixWorld),Ht.nearDistance=Lt,Ht.farDistance=Ft),Ht}function At(Tt,kt,It,Lt,Ft){if(Tt.visible===!1)return;if(Tt.layers.test(kt.layers)&&(Tt.isMesh||Tt.isLine||Tt.isPoints)&&(Tt.castShadow||Tt.receiveShadow&&Ft===mp)&&(!Tt.frustumCulled||o.intersectsObject(Tt))){Tt.modelViewMatrix.multiplyMatrices(It.matrixWorldInverse,Tt.matrixWorld);let Ht=a.update(Tt),Gr=Tt.material;if(Array.isArray(Gr)){let hs=Ht.groups;for(let _s=0,hn=hs.length;_s<hn;_s++){let Qn=hs[_s],ds=Gr[Qn.materialIndex];if(ds&&ds.visible){let un=Ct(Tt,ds,Lt,It.near,It.far,Ft);e.renderBufferDirect(It,null,Ht,un,Tt,Qn)}}}else if(Gr.visible){let hs=Ct(Tt,Gr,Lt,It.near,It.far,Ft);e.renderBufferDirect(It,null,Ht,hs,Tt,null)}}let Nt=Tt.children;for(let Ht=0,Gr=Nt.length;Ht<Gr;Ht++)At(Nt[Ht],kt,It,Lt,Ft)}}function jG(e,a,i){let o=i.isWebGL2;function c(){let l1=!1,iS=new Ke,wA=null,MO=new Ke(0,0,0,0);return{setMask:function(IL){wA!==IL&&!l1&&(e.colorMask(IL,IL,IL,IL),wA=IL)},setLocked:function(IL){l1=IL},setClear:function(IL,GL,s$,n$,c$){c$===!0&&(IL*=n$,GL*=n$,s$*=n$),iS.set(IL,GL,s$,n$),MO.equals(iS)===!1&&(e.clearColor(IL,GL,s$,n$),MO.copy(iS))},reset:function(){l1=!1,wA=null,MO.set(-1,0,0,0)}}}function d(){let l1=!1,iS=null,wA=null,MO=null;return{setTest:function(IL){IL?a1(2929):P0(2929)},setMask:function(IL){iS!==IL&&!l1&&(e.depthMask(IL),iS=IL)},setFunc:function(IL){if(wA!==IL){switch(IL){case bF:e.depthFunc(512);break;case SF:e.depthFunc(519);break;case wF:e.depthFunc(513);break;case US:e.depthFunc(515);break;case AF:e.depthFunc(514);break;case _F:e.depthFunc(518);break;case EF:e.depthFunc(516);break;case TF:e.depthFunc(517);break;default:e.depthFunc(515)}wA=IL}},setLocked:function(IL){l1=IL},setClear:function(IL){MO!==IL&&(e.clearDepth(IL),MO=IL)},reset:function(){l1=!1,iS=null,wA=null,MO=null}}}function g(){let l1=!1,iS=null,wA=null,MO=null,IL=null,GL=null,s$=null,n$=null,c$=null;return{setTest:function(t$){l1||(t$?a1(2960):P0(2960))},setMask:function(t$){iS!==t$&&!l1&&(e.stencilMask(t$),iS=t$)},setFunc:function(t$,h$,o$){(wA!==t$||MO!==h$||IL!==o$)&&(e.stencilFunc(t$,h$,o$),wA=t$,MO=h$,IL=o$)},setOp:function(t$,h$,o$){(GL!==t$||s$!==h$||n$!==o$)&&(e.stencilOp(t$,h$,o$),GL=t$,s$=h$,n$=o$)},setLocked:function(t$){l1=t$},setClear:function(t$){c$!==t$&&(e.clearStencil(t$),c$=t$)},reset:function(){l1=!1,iS=null,wA=null,MO=null,IL=null,GL=null,s$=null,n$=null,c$=null}}}let b=new c,j=new d,$=new g,rt=new WeakMap,_e=new WeakMap,st={},ut={},gt=new WeakMap,yt=[],Pt=null,wt=!1,Ct=null,At=null,Tt=null,kt=null,It=null,Lt=null,Ft=null,Nt=!1,Ht=null,Gr=null,hs=null,_s=null,hn=null,Qn=e.getParameter(35661),ds=!1,un=0,dr=e.getParameter(7938);dr.indexOf("WebGL")!==-1?(un=parseFloat(/^WebGL (\d)/.exec(dr)[1]),ds=un>=1):dr.indexOf("OpenGL ES")!==-1&&(un=parseFloat(/^OpenGL ES (\d)/.exec(dr)[1]),ds=un>=2);let us=null,Nn={},gn=e.getParameter(3088),Zn=e.getParameter(2978),xu=new Ke().fromArray(gn),au=new Ke().fromArray(Zn);function Vv(l1,iS,wA){let MO=new Uint8Array(4),IL=e.createTexture();e.bindTexture(l1,IL),e.texParameteri(l1,10241,9728),e.texParameteri(l1,10240,9728);for(let GL=0;GL<wA;GL++)e.texImage2D(iS+GL,0,6408,1,1,0,6408,5121,MO);return IL}let wu={};wu[3553]=Vv(3553,3553,1),wu[34067]=Vv(34067,34069,6),b.setClear(0,0,0,1),j.setClear(1),$.setClear(0),a1(2929),j.setFunc(US),aR(!1),sR(lT),a1(2884),tS(er);function a1(l1){st[l1]!==!0&&(e.enable(l1),st[l1]=!0)}function P0(l1){st[l1]!==!1&&(e.disable(l1),st[l1]=!1)}function B0(l1,iS){return ut[l1]!==iS?(e.bindFramebuffer(l1,iS),ut[l1]=iS,o&&(l1===36009&&(ut[36160]=iS),l1===36160&&(ut[36009]=iS)),!0):!1}function q1(l1,iS){let wA=yt,MO=!1;if(l1)if(wA=gt.get(iS),wA===void 0&&(wA=[],gt.set(iS,wA)),l1.isWebGLMultipleRenderTargets){let IL=l1.texture;if(wA.length!==IL.length||wA[0]!==36064){for(let GL=0,s$=IL.length;GL<s$;GL++)wA[GL]=36064+GL;wA.length=IL.length,MO=!0}}else wA[0]!==36064&&(wA[0]=36064,MO=!0);else wA[0]!==1029&&(wA[0]=1029,MO=!0);MO&&(i.isWebGL2?e.drawBuffers(wA):a.get("WEBGL_draw_buffers").drawBuffersWEBGL(wA))}function ox(l1){return Pt!==l1?(e.useProgram(l1),Pt=l1,!0):!1}let N_={[Fu]:32774,[cF]:32778,[uF]:32779};if(o)N_[dT]=32775,N_[fT]=32776;else{let l1=a.get("EXT_blend_minmax");l1!==null&&(N_[dT]=l1.MIN_EXT,N_[fT]=l1.MAX_EXT)}let eS={[hF]:0,[dF]:1,[fF]:768,[zM]:770,[xF]:776,[yF]:774,[mF]:772,[pF]:769,[UM]:771,[vF]:775,[gF]:773};function tS(l1,iS,wA,MO,IL,GL,s$,n$){if(l1===er){wt===!0&&(P0(3042),wt=!1);return}if(wt===!1&&(a1(3042),wt=!0),l1!==lF){if(l1!==Ct||n$!==Nt){if((At!==Fu||It!==Fu)&&(e.blendEquation(32774),At=Fu,It=Fu),n$)switch(l1){case sl:e.blendFuncSeparate(1,771,1,771);break;case cT:e.blendFunc(1,1);break;case uT:e.blendFuncSeparate(0,769,0,1);break;case hT:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",l1);break}else switch(l1){case sl:e.blendFuncSeparate(770,771,1,771);break;case cT:e.blendFunc(770,1);break;case uT:e.blendFuncSeparate(0,769,0,1);break;case hT:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",l1);break}Tt=null,kt=null,Lt=null,Ft=null,Ct=l1,Nt=n$}return}IL=IL||iS,GL=GL||wA,s$=s$||MO,(iS!==At||IL!==It)&&(e.blendEquationSeparate(N_[iS],N_[IL]),At=iS,It=IL),(wA!==Tt||MO!==kt||GL!==Lt||s$!==Ft)&&(e.blendFuncSeparate(eS[wA],eS[MO],eS[GL],eS[s$]),Tt=wA,kt=MO,Lt=GL,Ft=s$),Ct=l1,Nt=!1}function tA(l1,iS){l1.side===tn?P0(2884):a1(2884);let wA=l1.side===yi;iS&&(wA=!wA),aR(wA),l1.blending===sl&&l1.transparent===!1?tS(er):tS(l1.blending,l1.blendEquation,l1.blendSrc,l1.blendDst,l1.blendEquationAlpha,l1.blendSrcAlpha,l1.blendDstAlpha,l1.premultipliedAlpha),j.setFunc(l1.depthFunc),j.setTest(l1.depthTest),j.setMask(l1.depthWrite),b.setMask(l1.colorWrite);let MO=l1.stencilWrite;$.setTest(MO),MO&&($.setMask(l1.stencilWriteMask),$.setFunc(l1.stencilFunc,l1.stencilRef,l1.stencilFuncMask),$.setOp(l1.stencilFail,l1.stencilZFail,l1.stencilZPass)),SA(l1.polygonOffset,l1.polygonOffsetFactor,l1.polygonOffsetUnits),l1.alphaToCoverage===!0?a1(32926):P0(32926)}function aR(l1){Ht!==l1&&(l1?e.frontFace(2304):e.frontFace(2305),Ht=l1)}function sR(l1){l1!==sF?(a1(2884),l1!==Gr&&(l1===lT?e.cullFace(1029):l1===oF?e.cullFace(1028):e.cullFace(1032))):P0(2884),Gr=l1}function AA(l1){l1!==hs&&(ds&&e.lineWidth(l1),hs=l1)}function SA(l1,iS,wA){l1?(a1(32823),(_s!==iS||hn!==wA)&&(e.polygonOffset(iS,wA),_s=iS,hn=wA)):P0(32823)}function IO(l1){l1?a1(3089):P0(3089)}function pO(l1){l1===void 0&&(l1=33984+Qn-1),us!==l1&&(e.activeTexture(l1),us=l1)}function Su(l1,iS,wA){wA===void 0&&(us===null?wA=33984+Qn-1:wA=us);let MO=Nn[wA];MO===void 0&&(MO={type:void 0,texture:void 0},Nn[wA]=MO),(MO.type!==l1||MO.texture!==iS)&&(us!==wA&&(e.activeTexture(wA),us=wA),e.bindTexture(l1,iS||wu[l1]),MO.type=l1,MO.texture=iS)}function mu(){let l1=Nn[us];l1!==void 0&&l1.type!==void 0&&(e.bindTexture(l1.type,null),l1.type=void 0,l1.texture=void 0)}function ax(){try{e.compressedTexImage2D.apply(e,arguments)}catch(l1){console.error("THREE.WebGLState:",l1)}}function tE(){try{e.compressedTexImage3D.apply(e,arguments)}catch(l1){console.error("THREE.WebGLState:",l1)}}function So(){try{e.texSubImage2D.apply(e,arguments)}catch(l1){console.error("THREE.WebGLState:",l1)}}function fD(){try{e.texSubImage3D.apply(e,arguments)}catch(l1){console.error("THREE.WebGLState:",l1)}}function C3(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(l1){console.error("THREE.WebGLState:",l1)}}function q3(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(l1){console.error("THREE.WebGLState:",l1)}}function qx(){try{e.texStorage2D.apply(e,arguments)}catch(l1){console.error("THREE.WebGLState:",l1)}}function oI(){try{e.texStorage3D.apply(e,arguments)}catch(l1){console.error("THREE.WebGLState:",l1)}}function mO(){try{e.texImage2D.apply(e,arguments)}catch(l1){console.error("THREE.WebGLState:",l1)}}function bL(){try{e.texImage3D.apply(e,arguments)}catch(l1){console.error("THREE.WebGLState:",l1)}}function OL(l1){xu.equals(l1)===!1&&(e.scissor(l1.x,l1.y,l1.z,l1.w),xu.copy(l1))}function CL(l1){au.equals(l1)===!1&&(e.viewport(l1.x,l1.y,l1.z,l1.w),au.copy(l1))}function TL(l1,iS){let wA=_e.get(iS);wA===void 0&&(wA=new WeakMap,_e.set(iS,wA));let MO=wA.get(l1);MO===void 0&&(MO=e.getUniformBlockIndex(iS,l1.name),wA.set(l1,MO))}function e$(l1,iS){let wA=_e.get(iS).get(l1);rt.get(iS)!==wA&&(e.uniformBlockBinding(iS,wA,l1.__bindingPointIndex),rt.set(iS,wA))}function i$(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),o===!0&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),st={},us=null,Nn={},ut={},gt=new WeakMap,yt=[],Pt=null,wt=!1,Ct=null,At=null,Tt=null,kt=null,It=null,Lt=null,Ft=null,Nt=!1,Ht=null,Gr=null,hs=null,_s=null,hn=null,xu.set(0,0,e.canvas.width,e.canvas.height),au.set(0,0,e.canvas.width,e.canvas.height),b.reset(),j.reset(),$.reset()}return{buffers:{color:b,depth:j,stencil:$},enable:a1,disable:P0,bindFramebuffer:B0,drawBuffers:q1,useProgram:ox,setBlending:tS,setMaterial:tA,setFlipSided:aR,setCullFace:sR,setLineWidth:AA,setPolygonOffset:SA,setScissorTest:IO,activeTexture:pO,bindTexture:Su,unbindTexture:mu,compressedTexImage2D:ax,compressedTexImage3D:tE,texImage2D:mO,texImage3D:bL,updateUBOMapping:TL,uniformBlockBinding:e$,texStorage2D:qx,texStorage3D:oI,texSubImage2D:So,texSubImage3D:fD,compressedTexSubImage2D:C3,compressedTexSubImage3D:q3,scissor:OL,viewport:CL,reset:i$}}function HG(e,a,i,o,c,d,g){let b=c.isWebGL2,j=c.maxTextures,$=c.maxCubemapSize,rt=c.maxTextureSize,_e=c.maxSamples,st=a.has("WEBGL_multisampled_render_to_texture")?a.get("WEBGL_multisampled_render_to_texture"):null,ut=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),gt=new WeakMap,yt,Pt=new WeakMap,wt=!1;try{wt=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function Ct(Su,mu){return wt?new OffscreenCanvas(Su,mu):_p("canvas")}function At(Su,mu,ax,tE){let So=1;if((Su.width>tE||Su.height>tE)&&(So=tE/Math.max(Su.width,Su.height)),So<1||mu===!0)if(typeof HTMLImageElement<"u"&&Su instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Su instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Su instanceof ImageBitmap){let fD=mu?gy:Math.floor,C3=fD(So*Su.width),q3=fD(So*Su.height);yt===void 0&&(yt=Ct(C3,q3));let qx=ax?Ct(C3,q3):yt;return qx.width=C3,qx.height=q3,qx.getContext("2d").drawImage(Su,0,0,C3,q3),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Su.width+"x"+Su.height+") to ("+C3+"x"+q3+")."),qx}else return"data"in Su&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Su.width+"x"+Su.height+")."),Su;return Su}function Tt(Su){return YS(Su.width)&&YS(Su.height)}function kt(Su){return b?!1:Su.wrapS!==Kt||Su.wrapT!==Kt||Su.minFilter!==Vt&&Su.minFilter!==tt}function It(Su,mu){return Su.generateMipmaps&&mu&&Su.minFilter!==Vt&&Su.minFilter!==tt}function Lt(Su){e.generateMipmap(Su)}function Ft(Su,mu,ax,tE,So=!1){if(b===!1)return mu;if(Su!==null){if(e[Su]!==void 0)return e[Su];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Su+"'")}let fD=mu;return mu===6403&&(ax===5126&&(fD=33326),ax===5131&&(fD=33325),ax===5121&&(fD=33321)),mu===33319&&(ax===5126&&(fD=33328),ax===5131&&(fD=33327),ax===5121&&(fD=33323)),mu===6408&&(ax===5126&&(fD=34836),ax===5131&&(fD=34842),ax===5121&&(fD=tE===at&&So===!1?35907:32856),ax===32819&&(fD=32854),ax===32820&&(fD=32855)),(fD===33325||fD===33326||fD===33327||fD===33328||fD===34842||fD===34836)&&a.get("EXT_color_buffer_float"),fD}function Nt(Su,mu,ax){return It(Su,ax)===!0||Su.isFramebufferTexture&&Su.minFilter!==Vt&&Su.minFilter!==tt?Math.log2(Math.max(mu.width,mu.height))+1:Su.mipmaps!==void 0&&Su.mipmaps.length>0?Su.mipmaps.length:Su.isCompressedTexture&&Array.isArray(Su.image)?mu.mipmaps.length:1}function Ht(Su){return Su===Vt||Su===pT||Su===nS?9728:9729}function Gr(Su){let mu=Su.target;mu.removeEventListener("dispose",Gr),_s(mu),mu.isVideoTexture&&gt.delete(mu)}function hs(Su){let mu=Su.target;mu.removeEventListener("dispose",hs),Qn(mu)}function _s(Su){let mu=o.get(Su);if(mu.__webglInit===void 0)return;let ax=Su.source,tE=Pt.get(ax);if(tE){let So=tE[mu.__cacheKey];So.usedTimes--,So.usedTimes===0&&hn(Su),Object.keys(tE).length===0&&Pt.delete(ax)}o.remove(Su)}function hn(Su){let mu=o.get(Su);e.deleteTexture(mu.__webglTexture);let ax=Su.source,tE=Pt.get(ax);delete tE[mu.__cacheKey],g.memory.textures--}function Qn(Su){let mu=Su.texture,ax=o.get(Su),tE=o.get(mu);if(tE.__webglTexture!==void 0&&(e.deleteTexture(tE.__webglTexture),g.memory.textures--),Su.depthTexture&&Su.depthTexture.dispose(),Su.isWebGLCubeRenderTarget)for(let So=0;So<6;So++)e.deleteFramebuffer(ax.__webglFramebuffer[So]),ax.__webglDepthbuffer&&e.deleteRenderbuffer(ax.__webglDepthbuffer[So]);else{if(e.deleteFramebuffer(ax.__webglFramebuffer),ax.__webglDepthbuffer&&e.deleteRenderbuffer(ax.__webglDepthbuffer),ax.__webglMultisampledFramebuffer&&e.deleteFramebuffer(ax.__webglMultisampledFramebuffer),ax.__webglColorRenderbuffer)for(let So=0;So<ax.__webglColorRenderbuffer.length;So++)ax.__webglColorRenderbuffer[So]&&e.deleteRenderbuffer(ax.__webglColorRenderbuffer[So]);ax.__webglDepthRenderbuffer&&e.deleteRenderbuffer(ax.__webglDepthRenderbuffer)}if(Su.isWebGLMultipleRenderTargets)for(let So=0,fD=mu.length;So<fD;So++){let C3=o.get(mu[So]);C3.__webglTexture&&(e.deleteTexture(C3.__webglTexture),g.memory.textures--),o.remove(mu[So])}o.remove(mu),o.remove(Su)}let ds=0;function un(){ds=0}function dr(){let Su=ds;return Su>=j&&console.warn("THREE.WebGLTextures: Trying to use "+Su+" texture units while this GPU supports only "+j),ds+=1,Su}function us(Su){let mu=[];return mu.push(Su.wrapS),mu.push(Su.wrapT),mu.push(Su.wrapR||0),mu.push(Su.magFilter),mu.push(Su.minFilter),mu.push(Su.anisotropy),mu.push(Su.internalFormat),mu.push(Su.format),mu.push(Su.type),mu.push(Su.generateMipmaps),mu.push(Su.premultiplyAlpha),mu.push(Su.flipY),mu.push(Su.unpackAlignment),mu.push(Su.encoding),mu.join()}function Nn(Su,mu){let ax=o.get(Su);if(Su.isVideoTexture&&IO(Su),Su.isRenderTargetTexture===!1&&Su.version>0&&ax.__version!==Su.version){let tE=Su.image;if(tE===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(tE.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{P0(ax,Su,mu);return}}i.bindTexture(3553,ax.__webglTexture,33984+mu)}function gn(Su,mu){let ax=o.get(Su);if(Su.version>0&&ax.__version!==Su.version){P0(ax,Su,mu);return}i.bindTexture(35866,ax.__webglTexture,33984+mu)}function Zn(Su,mu){let ax=o.get(Su);if(Su.version>0&&ax.__version!==Su.version){P0(ax,Su,mu);return}i.bindTexture(32879,ax.__webglTexture,33984+mu)}function xu(Su,mu){let ax=o.get(Su);if(Su.version>0&&ax.__version!==Su.version){B0(ax,Su,mu);return}i.bindTexture(34067,ax.__webglTexture,33984+mu)}let au={[Ws]:10497,[Kt]:33071,[HS]:33648},Vv={[Vt]:9728,[pT]:9984,[nS]:9986,[tt]:9729,[LF]:9985,[bc]:9987};function wu(Su,mu,ax){if(ax?(e.texParameteri(Su,10242,au[mu.wrapS]),e.texParameteri(Su,10243,au[mu.wrapT]),(Su===32879||Su===35866)&&e.texParameteri(Su,32882,au[mu.wrapR]),e.texParameteri(Su,10240,Vv[mu.magFilter]),e.texParameteri(Su,10241,Vv[mu.minFilter])):(e.texParameteri(Su,10242,33071),e.texParameteri(Su,10243,33071),(Su===32879||Su===35866)&&e.texParameteri(Su,32882,33071),(mu.wrapS!==Kt||mu.wrapT!==Kt)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(Su,10240,Ht(mu.magFilter)),e.texParameteri(Su,10241,Ht(mu.minFilter)),mu.minFilter!==Vt&&mu.minFilter!==tt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),a.has("EXT_texture_filter_anisotropic")===!0){let tE=a.get("EXT_texture_filter_anisotropic");if(mu.magFilter===Vt||mu.minFilter!==nS&&mu.minFilter!==bc||mu.type===Sr$1&&a.has("OES_texture_float_linear")===!1||b===!1&&mu.type===va&&a.has("OES_texture_half_float_linear")===!1)return;(mu.anisotropy>1||o.get(mu).__currentAnisotropy)&&(e.texParameterf(Su,tE.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(mu.anisotropy,c.getMaxAnisotropy())),o.get(mu).__currentAnisotropy=mu.anisotropy)}}function a1(Su,mu){let ax=!1;Su.__webglInit===void 0&&(Su.__webglInit=!0,mu.addEventListener("dispose",Gr));let tE=mu.source,So=Pt.get(tE);So===void 0&&(So={},Pt.set(tE,So));let fD=us(mu);if(fD!==Su.__cacheKey){So[fD]===void 0&&(So[fD]={texture:e.createTexture(),usedTimes:0},g.memory.textures++,ax=!0),So[fD].usedTimes++;let C3=So[Su.__cacheKey];C3!==void 0&&(So[Su.__cacheKey].usedTimes--,C3.usedTimes===0&&hn(mu)),Su.__cacheKey=fD,Su.__webglTexture=So[fD].texture}return ax}function P0(Su,mu,ax){let tE=3553;(mu.isDataArrayTexture||mu.isCompressedArrayTexture)&&(tE=35866),mu.isData3DTexture&&(tE=32879);let So=a1(Su,mu),fD=mu.source;i.bindTexture(tE,Su.__webglTexture,33984+ax);let C3=o.get(fD);if(fD.version!==C3.__version||So===!0){i.activeTexture(33984+ax),e.pixelStorei(37440,mu.flipY),e.pixelStorei(37441,mu.premultiplyAlpha),e.pixelStorei(3317,mu.unpackAlignment),e.pixelStorei(37443,0);let q3=kt(mu)&&Tt(mu.image)===!1,qx=At(mu.image,q3,!1,rt);qx=pO(mu,qx);let oI=Tt(qx)||b,mO=d.convert(mu.format,mu.encoding),bL=d.convert(mu.type),OL=Ft(mu.internalFormat,mO,bL,mu.encoding,mu.isVideoTexture);wu(tE,mu,oI);let CL,TL=mu.mipmaps,e$=b&&mu.isVideoTexture!==!0,i$=C3.__version===void 0||So===!0,l1=Nt(mu,qx,oI);if(mu.isDepthTexture)OL=6402,b?mu.type===Sr$1?OL=36012:mu.type===js?OL=33190:mu.type===ol?OL=35056:OL=33189:mu.type===Sr$1&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),mu.format===vc&&OL===6402&&mu.type!==HM&&mu.type!==js&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),mu.type=js,bL=d.convert(mu.type)),mu.format===cl&&OL===6402&&(OL=34041,mu.type!==ol&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),mu.type=ol,bL=d.convert(mu.type))),i$&&(e$?i.texStorage2D(3553,1,OL,qx.width,qx.height):i.texImage2D(3553,0,OL,qx.width,qx.height,0,mO,bL,null));else if(mu.isDataTexture)if(TL.length>0&&oI){e$&&i$&&i.texStorage2D(3553,l1,OL,TL[0].width,TL[0].height);for(let iS=0,wA=TL.length;iS<wA;iS++)CL=TL[iS],e$?i.texSubImage2D(3553,iS,0,0,CL.width,CL.height,mO,bL,CL.data):i.texImage2D(3553,iS,OL,CL.width,CL.height,0,mO,bL,CL.data);mu.generateMipmaps=!1}else e$?(i$&&i.texStorage2D(3553,l1,OL,qx.width,qx.height),i.texSubImage2D(3553,0,0,0,qx.width,qx.height,mO,bL,qx.data)):i.texImage2D(3553,0,OL,qx.width,qx.height,0,mO,bL,qx.data);else if(mu.isCompressedTexture)if(mu.isCompressedArrayTexture){e$&&i$&&i.texStorage3D(35866,l1,OL,TL[0].width,TL[0].height,qx.depth);for(let iS=0,wA=TL.length;iS<wA;iS++)CL=TL[iS],mu.format!==Qr?mO!==null?e$?i.compressedTexSubImage3D(35866,iS,0,0,0,CL.width,CL.height,qx.depth,mO,CL.data,0,0):i.compressedTexImage3D(35866,iS,OL,CL.width,CL.height,qx.depth,0,CL.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):e$?i.texSubImage3D(35866,iS,0,0,0,CL.width,CL.height,qx.depth,mO,bL,CL.data):i.texImage3D(35866,iS,OL,CL.width,CL.height,qx.depth,0,mO,bL,CL.data)}else{e$&&i$&&i.texStorage2D(3553,l1,OL,TL[0].width,TL[0].height);for(let iS=0,wA=TL.length;iS<wA;iS++)CL=TL[iS],mu.format!==Qr?mO!==null?e$?i.compressedTexSubImage2D(3553,iS,0,0,CL.width,CL.height,mO,CL.data):i.compressedTexImage2D(3553,iS,OL,CL.width,CL.height,0,CL.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):e$?i.texSubImage2D(3553,iS,0,0,CL.width,CL.height,mO,bL,CL.data):i.texImage2D(3553,iS,OL,CL.width,CL.height,0,mO,bL,CL.data)}else if(mu.isDataArrayTexture)e$?(i$&&i.texStorage3D(35866,l1,OL,qx.width,qx.height,qx.depth),i.texSubImage3D(35866,0,0,0,0,qx.width,qx.height,qx.depth,mO,bL,qx.data)):i.texImage3D(35866,0,OL,qx.width,qx.height,qx.depth,0,mO,bL,qx.data);else if(mu.isData3DTexture)e$?(i$&&i.texStorage3D(32879,l1,OL,qx.width,qx.height,qx.depth),i.texSubImage3D(32879,0,0,0,0,qx.width,qx.height,qx.depth,mO,bL,qx.data)):i.texImage3D(32879,0,OL,qx.width,qx.height,qx.depth,0,mO,bL,qx.data);else if(mu.isFramebufferTexture){if(i$)if(e$)i.texStorage2D(3553,l1,OL,qx.width,qx.height);else{let iS=qx.width,wA=qx.height;for(let MO=0;MO<l1;MO++)i.texImage2D(3553,MO,OL,iS,wA,0,mO,bL,null),iS>>=1,wA>>=1}}else if(TL.length>0&&oI){e$&&i$&&i.texStorage2D(3553,l1,OL,TL[0].width,TL[0].height);for(let iS=0,wA=TL.length;iS<wA;iS++)CL=TL[iS],e$?i.texSubImage2D(3553,iS,0,0,mO,bL,CL):i.texImage2D(3553,iS,OL,mO,bL,CL);mu.generateMipmaps=!1}else e$?(i$&&i.texStorage2D(3553,l1,OL,qx.width,qx.height),i.texSubImage2D(3553,0,0,0,mO,bL,qx)):i.texImage2D(3553,0,OL,mO,bL,qx);It(mu,oI)&&Lt(tE),C3.__version=fD.version,mu.onUpdate&&mu.onUpdate(mu)}Su.__version=mu.version}function B0(Su,mu,ax){if(mu.image.length!==6)return;let tE=a1(Su,mu),So=mu.source;i.bindTexture(34067,Su.__webglTexture,33984+ax);let fD=o.get(So);if(So.version!==fD.__version||tE===!0){i.activeTexture(33984+ax),e.pixelStorei(37440,mu.flipY),e.pixelStorei(37441,mu.premultiplyAlpha),e.pixelStorei(3317,mu.unpackAlignment),e.pixelStorei(37443,0);let C3=mu.isCompressedTexture||mu.image[0].isCompressedTexture,q3=mu.image[0]&&mu.image[0].isDataTexture,qx=[];for(let iS=0;iS<6;iS++)!C3&&!q3?qx[iS]=At(mu.image[iS],!1,!0,$):qx[iS]=q3?mu.image[iS].image:mu.image[iS],qx[iS]=pO(mu,qx[iS]);let oI=qx[0],mO=Tt(oI)||b,bL=d.convert(mu.format,mu.encoding),OL=d.convert(mu.type),CL=Ft(mu.internalFormat,bL,OL,mu.encoding),TL=b&&mu.isVideoTexture!==!0,e$=fD.__version===void 0||tE===!0,i$=Nt(mu,oI,mO);wu(34067,mu,mO);let l1;if(C3){TL&&e$&&i.texStorage2D(34067,i$,CL,oI.width,oI.height);for(let iS=0;iS<6;iS++){l1=qx[iS].mipmaps;for(let wA=0;wA<l1.length;wA++){let MO=l1[wA];mu.format!==Qr?bL!==null?TL?i.compressedTexSubImage2D(34069+iS,wA,0,0,MO.width,MO.height,bL,MO.data):i.compressedTexImage2D(34069+iS,wA,CL,MO.width,MO.height,0,MO.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):TL?i.texSubImage2D(34069+iS,wA,0,0,MO.width,MO.height,bL,OL,MO.data):i.texImage2D(34069+iS,wA,CL,MO.width,MO.height,0,bL,OL,MO.data)}}}else{l1=mu.mipmaps,TL&&e$&&(l1.length>0&&i$++,i.texStorage2D(34067,i$,CL,qx[0].width,qx[0].height));for(let iS=0;iS<6;iS++)if(q3){TL?i.texSubImage2D(34069+iS,0,0,0,qx[iS].width,qx[iS].height,bL,OL,qx[iS].data):i.texImage2D(34069+iS,0,CL,qx[iS].width,qx[iS].height,0,bL,OL,qx[iS].data);for(let wA=0;wA<l1.length;wA++){let MO=l1[wA].image[iS].image;TL?i.texSubImage2D(34069+iS,wA+1,0,0,MO.width,MO.height,bL,OL,MO.data):i.texImage2D(34069+iS,wA+1,CL,MO.width,MO.height,0,bL,OL,MO.data)}}else{TL?i.texSubImage2D(34069+iS,0,0,0,bL,OL,qx[iS]):i.texImage2D(34069+iS,0,CL,bL,OL,qx[iS]);for(let wA=0;wA<l1.length;wA++){let MO=l1[wA];TL?i.texSubImage2D(34069+iS,wA+1,0,0,bL,OL,MO.image[iS]):i.texImage2D(34069+iS,wA+1,CL,bL,OL,MO.image[iS])}}}It(mu,mO)&&Lt(34067),fD.__version=So.version,mu.onUpdate&&mu.onUpdate(mu)}Su.__version=mu.version}function q1(Su,mu,ax,tE,So){let fD=d.convert(ax.format,ax.encoding),C3=d.convert(ax.type),q3=Ft(ax.internalFormat,fD,C3,ax.encoding);o.get(mu).__hasExternalTextures||(So===32879||So===35866?i.texImage3D(So,0,q3,mu.width,mu.height,mu.depth,0,fD,C3,null):i.texImage2D(So,0,q3,mu.width,mu.height,0,fD,C3,null)),i.bindFramebuffer(36160,Su),SA(mu)?st.framebufferTexture2DMultisampleEXT(36160,tE,So,o.get(ax).__webglTexture,0,AA(mu)):(So===3553||So>=34069&&So<=34074)&&e.framebufferTexture2D(36160,tE,So,o.get(ax).__webglTexture,0),i.bindFramebuffer(36160,null)}function ox(Su,mu,ax){if(e.bindRenderbuffer(36161,Su),mu.depthBuffer&&!mu.stencilBuffer){let tE=33189;if(ax||SA(mu)){let So=mu.depthTexture;So&&So.isDepthTexture&&(So.type===Sr$1?tE=36012:So.type===js&&(tE=33190));let fD=AA(mu);SA(mu)?st.renderbufferStorageMultisampleEXT(36161,fD,tE,mu.width,mu.height):e.renderbufferStorageMultisample(36161,fD,tE,mu.width,mu.height)}else e.renderbufferStorage(36161,tE,mu.width,mu.height);e.framebufferRenderbuffer(36160,36096,36161,Su)}else if(mu.depthBuffer&&mu.stencilBuffer){let tE=AA(mu);ax&&SA(mu)===!1?e.renderbufferStorageMultisample(36161,tE,35056,mu.width,mu.height):SA(mu)?st.renderbufferStorageMultisampleEXT(36161,tE,35056,mu.width,mu.height):e.renderbufferStorage(36161,34041,mu.width,mu.height),e.framebufferRenderbuffer(36160,33306,36161,Su)}else{let tE=mu.isWebGLMultipleRenderTargets===!0?mu.texture:[mu.texture];for(let So=0;So<tE.length;So++){let fD=tE[So],C3=d.convert(fD.format,fD.encoding),q3=d.convert(fD.type),qx=Ft(fD.internalFormat,C3,q3,fD.encoding),oI=AA(mu);ax&&SA(mu)===!1?e.renderbufferStorageMultisample(36161,oI,qx,mu.width,mu.height):SA(mu)?st.renderbufferStorageMultisampleEXT(36161,oI,qx,mu.width,mu.height):e.renderbufferStorage(36161,qx,mu.width,mu.height)}}e.bindRenderbuffer(36161,null)}function N_(Su,mu){if(mu&&mu.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(i.bindFramebuffer(36160,Su),!(mu.depthTexture&&mu.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!o.get(mu.depthTexture).__webglTexture||mu.depthTexture.image.width!==mu.width||mu.depthTexture.image.height!==mu.height)&&(mu.depthTexture.image.width=mu.width,mu.depthTexture.image.height=mu.height,mu.depthTexture.needsUpdate=!0),Nn(mu.depthTexture,0);let ax=o.get(mu.depthTexture).__webglTexture,tE=AA(mu);if(mu.depthTexture.format===vc)SA(mu)?st.framebufferTexture2DMultisampleEXT(36160,36096,3553,ax,0,tE):e.framebufferTexture2D(36160,36096,3553,ax,0);else if(mu.depthTexture.format===cl)SA(mu)?st.framebufferTexture2DMultisampleEXT(36160,33306,3553,ax,0,tE):e.framebufferTexture2D(36160,33306,3553,ax,0);else throw new Error("Unknown depthTexture format")}function eS(Su){let mu=o.get(Su),ax=Su.isWebGLCubeRenderTarget===!0;if(Su.depthTexture&&!mu.__autoAllocateDepthBuffer){if(ax)throw new Error("target.depthTexture not supported in Cube render targets");N_(mu.__webglFramebuffer,Su)}else if(ax){mu.__webglDepthbuffer=[];for(let tE=0;tE<6;tE++)i.bindFramebuffer(36160,mu.__webglFramebuffer[tE]),mu.__webglDepthbuffer[tE]=e.createRenderbuffer(),ox(mu.__webglDepthbuffer[tE],Su,!1)}else i.bindFramebuffer(36160,mu.__webglFramebuffer),mu.__webglDepthbuffer=e.createRenderbuffer(),ox(mu.__webglDepthbuffer,Su,!1);i.bindFramebuffer(36160,null)}function tS(Su,mu,ax){let tE=o.get(Su);mu!==void 0&&q1(tE.__webglFramebuffer,Su,Su.texture,36064,3553),ax!==void 0&&eS(Su)}function tA(Su){let mu=Su.texture,ax=o.get(Su),tE=o.get(mu);Su.addEventListener("dispose",hs),Su.isWebGLMultipleRenderTargets!==!0&&(tE.__webglTexture===void 0&&(tE.__webglTexture=e.createTexture()),tE.__version=mu.version,g.memory.textures++);let So=Su.isWebGLCubeRenderTarget===!0,fD=Su.isWebGLMultipleRenderTargets===!0,C3=Tt(Su)||b;if(So){ax.__webglFramebuffer=[];for(let q3=0;q3<6;q3++)ax.__webglFramebuffer[q3]=e.createFramebuffer()}else{if(ax.__webglFramebuffer=e.createFramebuffer(),fD)if(c.drawBuffers){let q3=Su.texture;for(let qx=0,oI=q3.length;qx<oI;qx++){let mO=o.get(q3[qx]);mO.__webglTexture===void 0&&(mO.__webglTexture=e.createTexture(),g.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(b&&Su.samples>0&&SA(Su)===!1){let q3=fD?mu:[mu];ax.__webglMultisampledFramebuffer=e.createFramebuffer(),ax.__webglColorRenderbuffer=[],i.bindFramebuffer(36160,ax.__webglMultisampledFramebuffer);for(let qx=0;qx<q3.length;qx++){let oI=q3[qx];ax.__webglColorRenderbuffer[qx]=e.createRenderbuffer(),e.bindRenderbuffer(36161,ax.__webglColorRenderbuffer[qx]);let mO=d.convert(oI.format,oI.encoding),bL=d.convert(oI.type),OL=Ft(oI.internalFormat,mO,bL,oI.encoding,Su.isXRRenderTarget===!0),CL=AA(Su);e.renderbufferStorageMultisample(36161,CL,OL,Su.width,Su.height),e.framebufferRenderbuffer(36160,36064+qx,36161,ax.__webglColorRenderbuffer[qx])}e.bindRenderbuffer(36161,null),Su.depthBuffer&&(ax.__webglDepthRenderbuffer=e.createRenderbuffer(),ox(ax.__webglDepthRenderbuffer,Su,!0)),i.bindFramebuffer(36160,null)}}if(So){i.bindTexture(34067,tE.__webglTexture),wu(34067,mu,C3);for(let q3=0;q3<6;q3++)q1(ax.__webglFramebuffer[q3],Su,mu,36064,34069+q3);It(mu,C3)&&Lt(34067),i.unbindTexture()}else if(fD){let q3=Su.texture;for(let qx=0,oI=q3.length;qx<oI;qx++){let mO=q3[qx],bL=o.get(mO);i.bindTexture(3553,bL.__webglTexture),wu(3553,mO,C3),q1(ax.__webglFramebuffer,Su,mO,36064+qx,3553),It(mO,C3)&&Lt(3553)}i.unbindTexture()}else{let q3=3553;(Su.isWebGL3DRenderTarget||Su.isWebGLArrayRenderTarget)&&(b?q3=Su.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),i.bindTexture(q3,tE.__webglTexture),wu(q3,mu,C3),q1(ax.__webglFramebuffer,Su,mu,36064,q3),It(mu,C3)&&Lt(q3),i.unbindTexture()}Su.depthBuffer&&eS(Su)}function aR(Su){let mu=Tt(Su)||b,ax=Su.isWebGLMultipleRenderTargets===!0?Su.texture:[Su.texture];for(let tE=0,So=ax.length;tE<So;tE++){let fD=ax[tE];if(It(fD,mu)){let C3=Su.isWebGLCubeRenderTarget?34067:3553,q3=o.get(fD).__webglTexture;i.bindTexture(C3,q3),Lt(C3),i.unbindTexture()}}}function sR(Su){if(b&&Su.samples>0&&SA(Su)===!1){let mu=Su.isWebGLMultipleRenderTargets?Su.texture:[Su.texture],ax=Su.width,tE=Su.height,So=16384,fD=[],C3=Su.stencilBuffer?33306:36096,q3=o.get(Su),qx=Su.isWebGLMultipleRenderTargets===!0;if(qx)for(let oI=0;oI<mu.length;oI++)i.bindFramebuffer(36160,q3.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+oI,36161,null),i.bindFramebuffer(36160,q3.__webglFramebuffer),e.framebufferTexture2D(36009,36064+oI,3553,null,0);i.bindFramebuffer(36008,q3.__webglMultisampledFramebuffer),i.bindFramebuffer(36009,q3.__webglFramebuffer);for(let oI=0;oI<mu.length;oI++){fD.push(36064+oI),Su.depthBuffer&&fD.push(C3);let mO=q3.__ignoreDepthValues!==void 0?q3.__ignoreDepthValues:!1;if(mO===!1&&(Su.depthBuffer&&(So|=256),Su.stencilBuffer&&(So|=1024)),qx&&e.framebufferRenderbuffer(36008,36064,36161,q3.__webglColorRenderbuffer[oI]),mO===!0&&(e.invalidateFramebuffer(36008,[C3]),e.invalidateFramebuffer(36009,[C3])),qx){let bL=o.get(mu[oI]).__webglTexture;e.framebufferTexture2D(36009,36064,3553,bL,0)}e.blitFramebuffer(0,0,ax,tE,0,0,ax,tE,So,9728),ut&&e.invalidateFramebuffer(36008,fD)}if(i.bindFramebuffer(36008,null),i.bindFramebuffer(36009,null),qx)for(let oI=0;oI<mu.length;oI++){i.bindFramebuffer(36160,q3.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+oI,36161,q3.__webglColorRenderbuffer[oI]);let mO=o.get(mu[oI]).__webglTexture;i.bindFramebuffer(36160,q3.__webglFramebuffer),e.framebufferTexture2D(36009,36064+oI,3553,mO,0)}i.bindFramebuffer(36009,q3.__webglMultisampledFramebuffer)}}function AA(Su){return Math.min(_e,Su.samples)}function SA(Su){let mu=o.get(Su);return b&&Su.samples>0&&a.has("WEBGL_multisampled_render_to_texture")===!0&&mu.__useRenderToTexture!==!1}function IO(Su){let mu=g.render.frame;gt.get(Su)!==mu&&(gt.set(Su,mu),Su.update())}function pO(Su,mu){let ax=Su.encoding,tE=Su.format,So=Su.type;return Su.isCompressedTexture===!0||Su.isVideoTexture===!0||Su.format===qS||ax!==Sn&&(ax===at?b===!1?a.has("EXT_sRGB")===!0&&tE===Qr?(Su.format=qS,Su.minFilter=tt,Su.generateMipmaps=!1):mu=yy.sRGBToLinear(mu):(tE!==Qr||So!==Ir$1)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",ax)),mu}this.allocateTextureUnit=dr,this.resetTextureUnits=un,this.setTexture2D=Nn,this.setTexture2DArray=gn,this.setTexture3D=Zn,this.setTextureCube=xu,this.rebindTextures=tS,this.setupRenderTarget=tA,this.updateRenderTargetMipmap=aR,this.updateMultisampleRenderTarget=sR,this.setupDepthRenderbuffer=eS,this.setupFrameBufferTexture=q1,this.useMultisampledRTT=SA}function WG(e,a,i){let o=i.isWebGL2;function c(d,g=null){let b;if(d===Ir$1)return 5121;if(d===kF)return 32819;if(d===VF)return 32820;if(d===BF)return 5120;if(d===NF)return 5122;if(d===HM)return 5123;if(d===FF)return 5124;if(d===js)return 5125;if(d===Sr$1)return 5126;if(d===va)return o?5131:(b=a.get("OES_texture_half_float"),b!==null?b.HALF_FLOAT_OES:null);if(d===zF)return 6406;if(d===Qr)return 6408;if(d===UF)return 6409;if(d===GF)return 6410;if(d===vc)return 6402;if(d===cl)return 34041;if(d===qS)return b=a.get("EXT_sRGB"),b!==null?b.SRGB_ALPHA_EXT:null;if(d===jF)return 6403;if(d===HF)return 36244;if(d===uh)return 33319;if(d===WF)return 33320;if(d===Aw)return 36249;if(d===sS||d===oS||d===aS||d===lS)if(g===at)if(b=a.get("WEBGL_compressed_texture_s3tc_srgb"),b!==null){if(d===sS)return b.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(d===oS)return b.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(d===aS)return b.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(d===lS)return b.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(b=a.get("WEBGL_compressed_texture_s3tc"),b!==null){if(d===sS)return b.COMPRESSED_RGB_S3TC_DXT1_EXT;if(d===oS)return b.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(d===aS)return b.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(d===lS)return b.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(d===mT||d===gT||d===yT||d===vT)if(b=a.get("WEBGL_compressed_texture_pvrtc"),b!==null){if(d===mT)return b.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(d===gT)return b.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(d===yT)return b.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(d===vT)return b.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(d===qF)return b=a.get("WEBGL_compressed_texture_etc1"),b!==null?b.COMPRESSED_RGB_ETC1_WEBGL:null;if(d===xT||d===bT)if(b=a.get("WEBGL_compressed_texture_etc"),b!==null){if(d===xT)return g===at?b.COMPRESSED_SRGB8_ETC2:b.COMPRESSED_RGB8_ETC2;if(d===bT)return g===at?b.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:b.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(d===ST||d===wT||d===AT||d===_T||d===ET||d===TT||d===MT||d===CT||d===PT||d===DT||d===OT||d===IT||d===RT||d===LT)if(b=a.get("WEBGL_compressed_texture_astc"),b!==null){if(d===ST)return g===at?b.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:b.COMPRESSED_RGBA_ASTC_4x4_KHR;if(d===wT)return g===at?b.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:b.COMPRESSED_RGBA_ASTC_5x4_KHR;if(d===AT)return g===at?b.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:b.COMPRESSED_RGBA_ASTC_5x5_KHR;if(d===_T)return g===at?b.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:b.COMPRESSED_RGBA_ASTC_6x5_KHR;if(d===ET)return g===at?b.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:b.COMPRESSED_RGBA_ASTC_6x6_KHR;if(d===TT)return g===at?b.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:b.COMPRESSED_RGBA_ASTC_8x5_KHR;if(d===MT)return g===at?b.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:b.COMPRESSED_RGBA_ASTC_8x6_KHR;if(d===CT)return g===at?b.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:b.COMPRESSED_RGBA_ASTC_8x8_KHR;if(d===PT)return g===at?b.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:b.COMPRESSED_RGBA_ASTC_10x5_KHR;if(d===DT)return g===at?b.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:b.COMPRESSED_RGBA_ASTC_10x6_KHR;if(d===OT)return g===at?b.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:b.COMPRESSED_RGBA_ASTC_10x8_KHR;if(d===IT)return g===at?b.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:b.COMPRESSED_RGBA_ASTC_10x10_KHR;if(d===RT)return g===at?b.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:b.COMPRESSED_RGBA_ASTC_12x10_KHR;if(d===LT)return g===at?b.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:b.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(d===cS)if(b=a.get("EXT_texture_compression_bptc"),b!==null){if(d===cS)return g===at?b.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:b.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(d===YF||d===BT||d===NT||d===FT)if(b=a.get("EXT_texture_compression_rgtc"),b!==null){if(d===cS)return b.COMPRESSED_RED_RGTC1_EXT;if(d===BT)return b.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(d===NT)return b.COMPRESSED_RED_GREEN_RGTC2_EXT;if(d===FT)return b.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return d===ol?o?34042:(b=a.get("WEBGL_depth_texture"),b!==null?b.UNSIGNED_INT_24_8_WEBGL:null):e[d]!==void 0?e[d]:null}return{convert:c}}var iw=class extends ri{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}},ps=class extends _t{constructor(){super(),this.isGroup=!0,this.type="Group"}},qG={type:"move"},xp=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new ps,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new ps,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new _,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new _),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new ps,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new _,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new _),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){let a=this._hand;if(a)for(let i of e.hand.values())this._getHandJoint(a,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,a,i){let o=null,c=null,d=null,g=this._targetRay,b=this._grip,j=this._hand;if(e&&a.session.visibilityState!=="visible-blurred"){if(j&&e.hand){d=!0;for(let gt of e.hand.values()){let yt=a.getJointPose(gt,i),Pt=this._getHandJoint(j,gt);yt!==null&&(Pt.matrix.fromArray(yt.transform.matrix),Pt.matrix.decompose(Pt.position,Pt.rotation,Pt.scale),Pt.jointRadius=yt.radius),Pt.visible=yt!==null}let $=j.joints["index-finger-tip"],rt=j.joints["thumb-tip"],_e=$.position.distanceTo(rt.position),st=.02,ut=.005;j.inputState.pinching&&_e>st+ut?(j.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!j.inputState.pinching&&_e<=st-ut&&(j.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else b!==null&&e.gripSpace&&(c=a.getPose(e.gripSpace,i),c!==null&&(b.matrix.fromArray(c.transform.matrix),b.matrix.decompose(b.position,b.rotation,b.scale),c.linearVelocity?(b.hasLinearVelocity=!0,b.linearVelocity.copy(c.linearVelocity)):b.hasLinearVelocity=!1,c.angularVelocity?(b.hasAngularVelocity=!0,b.angularVelocity.copy(c.angularVelocity)):b.hasAngularVelocity=!1));g!==null&&(o=a.getPose(e.targetRaySpace,i),o===null&&c!==null&&(o=c),o!==null&&(g.matrix.fromArray(o.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),o.linearVelocity?(g.hasLinearVelocity=!0,g.linearVelocity.copy(o.linearVelocity)):g.hasLinearVelocity=!1,o.angularVelocity?(g.hasAngularVelocity=!0,g.angularVelocity.copy(o.angularVelocity)):g.hasAngularVelocity=!1,this.dispatchEvent(qG)))}return g!==null&&(g.visible=o!==null),b!==null&&(b.visible=c!==null),j!==null&&(j.visible=d!==null),this}_getHandJoint(e,a){if(e.joints[a.jointName]===void 0){let i=new ps;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[a.jointName]=i,e.add(i)}return e.joints[a.jointName]}},gs=class extends tr{constructor(e,a,i,o,c,d,g,b,j,$){if($=$!==void 0?$:vc,$!==vc&&$!==cl)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&$===vc&&(i=js),i===void 0&&$===cl&&(i=ol),super(null,o,c,d,g,b,$,i,j),this.isDepthTexture=!0,this.image={width:e,height:a},this.magFilter=g!==void 0?g:Vt,this.minFilter=b!==void 0?b:Vt,this.flipY=!1,this.generateMipmaps=!1}},nw=class extends fr$2{constructor(e,a){super();let i=this,o=null,c=1,d=null,g="local-floor",b=1,j=null,$=null,rt=null,_e=null,st=null,ut=null,gt=a.getContextAttributes(),yt=null,Pt=null,wt=[],Ct=[],At=new Set,Tt=new Map,kt=new ri;kt.layers.enable(1),kt.viewport=new Ke;let It=new ri;It.layers.enable(2),It.viewport=new Ke;let Lt=[kt,It],Ft=new iw;Ft.layers.enable(1),Ft.layers.enable(2);let Nt=null,Ht=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(gn){let Zn=wt[gn];return Zn===void 0&&(Zn=new xp,wt[gn]=Zn),Zn.getTargetRaySpace()},this.getControllerGrip=function(gn){let Zn=wt[gn];return Zn===void 0&&(Zn=new xp,wt[gn]=Zn),Zn.getGripSpace()},this.getHand=function(gn){let Zn=wt[gn];return Zn===void 0&&(Zn=new xp,wt[gn]=Zn),Zn.getHandSpace()};function Gr(gn){let Zn=Ct.indexOf(gn.inputSource);if(Zn===-1)return;let xu=wt[Zn];xu!==void 0&&xu.dispatchEvent({type:gn.type,data:gn.inputSource})}function hs(){o.removeEventListener("select",Gr),o.removeEventListener("selectstart",Gr),o.removeEventListener("selectend",Gr),o.removeEventListener("squeeze",Gr),o.removeEventListener("squeezestart",Gr),o.removeEventListener("squeezeend",Gr),o.removeEventListener("end",hs),o.removeEventListener("inputsourceschange",_s);for(let gn=0;gn<wt.length;gn++){let Zn=Ct[gn];Zn!==null&&(Ct[gn]=null,wt[gn].disconnect(Zn))}Nt=null,Ht=null,e.setRenderTarget(yt),st=null,_e=null,rt=null,o=null,Pt=null,Nn.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(gn){c=gn,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(gn){g=gn,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return j||d},this.setReferenceSpace=function(gn){j=gn},this.getBaseLayer=function(){return _e!==null?_e:st},this.getBinding=function(){return rt},this.getFrame=function(){return ut},this.getSession=function(){return o},this.setSession=async function(gn){if(o=gn,o!==null){if(yt=e.getRenderTarget(),o.addEventListener("select",Gr),o.addEventListener("selectstart",Gr),o.addEventListener("selectend",Gr),o.addEventListener("squeeze",Gr),o.addEventListener("squeezestart",Gr),o.addEventListener("squeezeend",Gr),o.addEventListener("end",hs),o.addEventListener("inputsourceschange",_s),gt.xrCompatible!==!0&&await a.makeXRCompatible(),o.renderState.layers===void 0||e.capabilities.isWebGL2===!1){let Zn={antialias:o.renderState.layers===void 0?gt.antialias:!0,alpha:gt.alpha,depth:gt.depth,stencil:gt.stencil,framebufferScaleFactor:c};st=new XRWebGLLayer(o,a,Zn),o.updateRenderState({baseLayer:st}),Pt=new ft(st.framebufferWidth,st.framebufferHeight,{format:Qr,type:Ir$1,encoding:e.outputEncoding,stencilBuffer:gt.stencil})}else{let Zn=null,xu=null,au=null;gt.depth&&(au=gt.stencil?35056:33190,Zn=gt.stencil?cl:vc,xu=gt.stencil?ol:js);let Vv={colorFormat:32856,depthFormat:au,scaleFactor:c};rt=new XRWebGLBinding(o,a),_e=rt.createProjectionLayer(Vv),o.updateRenderState({layers:[_e]}),Pt=new ft(_e.textureWidth,_e.textureHeight,{format:Qr,type:Ir$1,depthTexture:new gs(_e.textureWidth,_e.textureHeight,xu,void 0,void 0,void 0,void 0,void 0,void 0,Zn),stencilBuffer:gt.stencil,encoding:e.outputEncoding,samples:gt.antialias?4:0});let wu=e.properties.get(Pt);wu.__ignoreDepthValues=_e.ignoreDepthValues}Pt.isXRRenderTarget=!0,this.setFoveation(b),j=null,d=await o.requestReferenceSpace(g),Nn.setContext(o),Nn.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}};function _s(gn){for(let Zn=0;Zn<gn.removed.length;Zn++){let xu=gn.removed[Zn],au=Ct.indexOf(xu);au>=0&&(Ct[au]=null,wt[au].disconnect(xu))}for(let Zn=0;Zn<gn.added.length;Zn++){let xu=gn.added[Zn],au=Ct.indexOf(xu);if(au===-1){for(let wu=0;wu<wt.length;wu++)if(wu>=Ct.length){Ct.push(xu),au=wu;break}else if(Ct[wu]===null){Ct[wu]=xu,au=wu;break}if(au===-1)break}let Vv=wt[au];Vv&&Vv.connect(xu)}}let hn=new _,Qn=new _;function ds(gn,Zn,xu){hn.setFromMatrixPosition(Zn.matrixWorld),Qn.setFromMatrixPosition(xu.matrixWorld);let au=hn.distanceTo(Qn),Vv=Zn.projectionMatrix.elements,wu=xu.projectionMatrix.elements,a1=Vv[14]/(Vv[10]-1),P0=Vv[14]/(Vv[10]+1),B0=(Vv[9]+1)/Vv[5],q1=(Vv[9]-1)/Vv[5],ox=(Vv[8]-1)/Vv[0],N_=(wu[8]+1)/wu[0],eS=a1*ox,tS=a1*N_,tA=au/(-ox+N_),aR=tA*-ox;Zn.matrixWorld.decompose(gn.position,gn.quaternion,gn.scale),gn.translateX(aR),gn.translateZ(tA),gn.matrixWorld.compose(gn.position,gn.quaternion,gn.scale),gn.matrixWorldInverse.copy(gn.matrixWorld).invert();let sR=a1+tA,AA=P0+tA,SA=eS-aR,IO=tS+(au-aR),pO=B0*P0/AA*sR,Su=q1*P0/AA*sR;gn.projectionMatrix.makePerspective(SA,IO,pO,Su,sR,AA)}function un(gn,Zn){Zn===null?gn.matrixWorld.copy(gn.matrix):gn.matrixWorld.multiplyMatrices(Zn.matrixWorld,gn.matrix),gn.matrixWorldInverse.copy(gn.matrixWorld).invert()}this.updateCamera=function(gn){if(o===null)return;Ft.near=It.near=kt.near=gn.near,Ft.far=It.far=kt.far=gn.far,(Nt!==Ft.near||Ht!==Ft.far)&&(o.updateRenderState({depthNear:Ft.near,depthFar:Ft.far}),Nt=Ft.near,Ht=Ft.far);let Zn=gn.parent,xu=Ft.cameras;un(Ft,Zn);for(let Vv=0;Vv<xu.length;Vv++)un(xu[Vv],Zn);Ft.matrixWorld.decompose(Ft.position,Ft.quaternion,Ft.scale),gn.matrix.copy(Ft.matrix),gn.matrix.decompose(gn.position,gn.quaternion,gn.scale);let au=gn.children;for(let Vv=0,wu=au.length;Vv<wu;Vv++)au[Vv].updateMatrixWorld(!0);xu.length===2?ds(Ft,kt,It):Ft.projectionMatrix.copy(kt.projectionMatrix)},this.getCamera=function(){return Ft},this.getFoveation=function(){if(!(_e===null&&st===null))return b},this.setFoveation=function(gn){b=gn,_e!==null&&(_e.fixedFoveation=gn),st!==null&&st.fixedFoveation!==void 0&&(st.fixedFoveation=gn)},this.getPlanes=function(){return At};let dr=null;function us(gn,Zn){if($=Zn.getViewerPose(j||d),ut=Zn,$!==null){let xu=$.views;st!==null&&(e.setRenderTargetFramebuffer(Pt,st.framebuffer),e.setRenderTarget(Pt));let au=!1;xu.length!==Ft.cameras.length&&(Ft.cameras.length=0,au=!0);for(let Vv=0;Vv<xu.length;Vv++){let wu=xu[Vv],a1=null;if(st!==null)a1=st.getViewport(wu);else{let B0=rt.getViewSubImage(_e,wu);a1=B0.viewport,Vv===0&&(e.setRenderTargetTextures(Pt,B0.colorTexture,_e.ignoreDepthValues?void 0:B0.depthStencilTexture),e.setRenderTarget(Pt))}let P0=Lt[Vv];P0===void 0&&(P0=new ri,P0.layers.enable(Vv),P0.viewport=new Ke,Lt[Vv]=P0),P0.matrix.fromArray(wu.transform.matrix),P0.projectionMatrix.fromArray(wu.projectionMatrix),P0.viewport.set(a1.x,a1.y,a1.width,a1.height),Vv===0&&Ft.matrix.copy(P0.matrix),au===!0&&Ft.cameras.push(P0)}}for(let xu=0;xu<wt.length;xu++){let au=Ct[xu],Vv=wt[xu];au!==null&&Vv!==void 0&&Vv.update(au,Zn,j||d)}if(dr&&dr(gn,Zn),Zn.detectedPlanes){i.dispatchEvent({type:"planesdetected",data:Zn.detectedPlanes});let xu=null;for(let au of At)Zn.detectedPlanes.has(au)||(xu===null&&(xu=[]),xu.push(au));if(xu!==null)for(let au of xu)At.delete(au),Tt.delete(au),i.dispatchEvent({type:"planeremoved",data:au});for(let au of Zn.detectedPlanes)if(!At.has(au))At.add(au),Tt.set(au,Zn.lastChangedTime),i.dispatchEvent({type:"planeadded",data:au});else{let Vv=Tt.get(au);au.lastChangedTime>Vv&&(Tt.set(au,au.lastChangedTime),i.dispatchEvent({type:"planechanged",data:au}))}}ut=null}let Nn=new KM;Nn.setAnimationLoop(us),this.setAnimationLoop=function(gn){dr=gn},this.dispose=function(){}}};function YG(e,a){function i(yt,Pt){Pt.color.getRGB(yt.fogColor.value,QM(e)),Pt.isFog?(yt.fogNear.value=Pt.near,yt.fogFar.value=Pt.far):Pt.isFogExp2&&(yt.fogDensity.value=Pt.density)}function o(yt,Pt,wt,Ct,At){Pt.isMeshBasicMaterial||Pt.isMeshLambertMaterial?c(yt,Pt):Pt.isMeshToonMaterial?(c(yt,Pt),rt(yt,Pt)):Pt.isMeshPhongMaterial?(c(yt,Pt),$(yt,Pt)):Pt.isMeshStandardMaterial?(c(yt,Pt),_e(yt,Pt),Pt.isMeshPhysicalMaterial&&st(yt,Pt,At)):Pt.isMeshMatcapMaterial?(c(yt,Pt),ut(yt,Pt)):Pt.isMeshDepthMaterial?c(yt,Pt):Pt.isMeshDistanceMaterial?(c(yt,Pt),gt(yt,Pt)):Pt.isMeshNormalMaterial?c(yt,Pt):Pt.isLineBasicMaterial?(d(yt,Pt),Pt.isLineDashedMaterial&&g(yt,Pt)):Pt.isPointsMaterial?b(yt,Pt,wt,Ct):Pt.isSpriteMaterial?j(yt,Pt):Pt.isShadowMaterial?(yt.color.value.copy(Pt.color),yt.opacity.value=Pt.opacity):Pt.isShaderMaterial&&(Pt.uniformsNeedUpdate=!1)}function c(yt,Pt){yt.opacity.value=Pt.opacity,Pt.color&&yt.diffuse.value.copy(Pt.color),Pt.emissive&&yt.emissive.value.copy(Pt.emissive).multiplyScalar(Pt.emissiveIntensity),Pt.map&&(yt.map.value=Pt.map),Pt.alphaMap&&(yt.alphaMap.value=Pt.alphaMap),Pt.bumpMap&&(yt.bumpMap.value=Pt.bumpMap,yt.bumpScale.value=Pt.bumpScale,Pt.side===yi&&(yt.bumpScale.value*=-1)),Pt.displacementMap&&(yt.displacementMap.value=Pt.displacementMap,yt.displacementScale.value=Pt.displacementScale,yt.displacementBias.value=Pt.displacementBias),Pt.emissiveMap&&(yt.emissiveMap.value=Pt.emissiveMap),Pt.normalMap&&(yt.normalMap.value=Pt.normalMap,yt.normalScale.value.copy(Pt.normalScale),Pt.side===yi&&yt.normalScale.value.negate()),Pt.specularMap&&(yt.specularMap.value=Pt.specularMap),Pt.alphaTest>0&&(yt.alphaTest.value=Pt.alphaTest);let wt=a.get(Pt).envMap;if(wt&&(yt.envMap.value=wt,yt.flipEnvMap.value=wt.isCubeTexture&&wt.isRenderTargetTexture===!1?-1:1,yt.reflectivity.value=Pt.reflectivity,yt.ior.value=Pt.ior,yt.refractionRatio.value=Pt.refractionRatio),Pt.lightMap){yt.lightMap.value=Pt.lightMap;let Tt=e.physicallyCorrectLights!==!0?Math.PI:1;yt.lightMapIntensity.value=Pt.lightMapIntensity*Tt}Pt.aoMap&&(yt.aoMap.value=Pt.aoMap,yt.aoMapIntensity.value=Pt.aoMapIntensity);let Ct;Pt.map?Ct=Pt.map:Pt.specularMap?Ct=Pt.specularMap:Pt.displacementMap?Ct=Pt.displacementMap:Pt.normalMap?Ct=Pt.normalMap:Pt.bumpMap?Ct=Pt.bumpMap:Pt.roughnessMap?Ct=Pt.roughnessMap:Pt.metalnessMap?Ct=Pt.metalnessMap:Pt.alphaMap?Ct=Pt.alphaMap:Pt.emissiveMap?Ct=Pt.emissiveMap:Pt.clearcoatMap?Ct=Pt.clearcoatMap:Pt.clearcoatNormalMap?Ct=Pt.clearcoatNormalMap:Pt.clearcoatRoughnessMap?Ct=Pt.clearcoatRoughnessMap:Pt.iridescenceMap?Ct=Pt.iridescenceMap:Pt.iridescenceThicknessMap?Ct=Pt.iridescenceThicknessMap:Pt.specularIntensityMap?Ct=Pt.specularIntensityMap:Pt.specularColorMap?Ct=Pt.specularColorMap:Pt.transmissionMap?Ct=Pt.transmissionMap:Pt.thicknessMap?Ct=Pt.thicknessMap:Pt.sheenColorMap?Ct=Pt.sheenColorMap:Pt.sheenRoughnessMap&&(Ct=Pt.sheenRoughnessMap),Ct!==void 0&&(Ct.isWebGLRenderTarget&&(Ct=Ct.texture),Ct.matrixAutoUpdate===!0&&Ct.updateMatrix(),yt.uvTransform.value.copy(Ct.matrix));let At;Pt.aoMap?At=Pt.aoMap:Pt.lightMap&&(At=Pt.lightMap),At!==void 0&&(At.isWebGLRenderTarget&&(At=At.texture),At.matrixAutoUpdate===!0&&At.updateMatrix(),yt.uv2Transform.value.copy(At.matrix))}function d(yt,Pt){yt.diffuse.value.copy(Pt.color),yt.opacity.value=Pt.opacity}function g(yt,Pt){yt.dashSize.value=Pt.dashSize,yt.totalSize.value=Pt.dashSize+Pt.gapSize,yt.scale.value=Pt.scale}function b(yt,Pt,wt,Ct){yt.diffuse.value.copy(Pt.color),yt.opacity.value=Pt.opacity,yt.size.value=Pt.size*wt,yt.scale.value=Ct*.5,Pt.map&&(yt.map.value=Pt.map),Pt.alphaMap&&(yt.alphaMap.value=Pt.alphaMap),Pt.alphaTest>0&&(yt.alphaTest.value=Pt.alphaTest);let At;Pt.map?At=Pt.map:Pt.alphaMap&&(At=Pt.alphaMap),At!==void 0&&(At.matrixAutoUpdate===!0&&At.updateMatrix(),yt.uvTransform.value.copy(At.matrix))}function j(yt,Pt){yt.diffuse.value.copy(Pt.color),yt.opacity.value=Pt.opacity,yt.rotation.value=Pt.rotation,Pt.map&&(yt.map.value=Pt.map),Pt.alphaMap&&(yt.alphaMap.value=Pt.alphaMap),Pt.alphaTest>0&&(yt.alphaTest.value=Pt.alphaTest);let wt;Pt.map?wt=Pt.map:Pt.alphaMap&&(wt=Pt.alphaMap),wt!==void 0&&(wt.matrixAutoUpdate===!0&&wt.updateMatrix(),yt.uvTransform.value.copy(wt.matrix))}function $(yt,Pt){yt.specular.value.copy(Pt.specular),yt.shininess.value=Math.max(Pt.shininess,1e-4)}function rt(yt,Pt){Pt.gradientMap&&(yt.gradientMap.value=Pt.gradientMap)}function _e(yt,Pt){yt.roughness.value=Pt.roughness,yt.metalness.value=Pt.metalness,Pt.roughnessMap&&(yt.roughnessMap.value=Pt.roughnessMap),Pt.metalnessMap&&(yt.metalnessMap.value=Pt.metalnessMap),a.get(Pt).envMap&&(yt.envMapIntensity.value=Pt.envMapIntensity)}function st(yt,Pt,wt){yt.ior.value=Pt.ior,Pt.sheen>0&&(yt.sheenColor.value.copy(Pt.sheenColor).multiplyScalar(Pt.sheen),yt.sheenRoughness.value=Pt.sheenRoughness,Pt.sheenColorMap&&(yt.sheenColorMap.value=Pt.sheenColorMap),Pt.sheenRoughnessMap&&(yt.sheenRoughnessMap.value=Pt.sheenRoughnessMap)),Pt.clearcoat>0&&(yt.clearcoat.value=Pt.clearcoat,yt.clearcoatRoughness.value=Pt.clearcoatRoughness,Pt.clearcoatMap&&(yt.clearcoatMap.value=Pt.clearcoatMap),Pt.clearcoatRoughnessMap&&(yt.clearcoatRoughnessMap.value=Pt.clearcoatRoughnessMap),Pt.clearcoatNormalMap&&(yt.clearcoatNormalScale.value.copy(Pt.clearcoatNormalScale),yt.clearcoatNormalMap.value=Pt.clearcoatNormalMap,Pt.side===yi&&yt.clearcoatNormalScale.value.negate())),Pt.iridescence>0&&(yt.iridescence.value=Pt.iridescence,yt.iridescenceIOR.value=Pt.iridescenceIOR,yt.iridescenceThicknessMinimum.value=Pt.iridescenceThicknessRange[0],yt.iridescenceThicknessMaximum.value=Pt.iridescenceThicknessRange[1],Pt.iridescenceMap&&(yt.iridescenceMap.value=Pt.iridescenceMap),Pt.iridescenceThicknessMap&&(yt.iridescenceThicknessMap.value=Pt.iridescenceThicknessMap)),Pt.transmission>0&&(yt.transmission.value=Pt.transmission,yt.transmissionSamplerMap.value=wt.texture,yt.transmissionSamplerSize.value.set(wt.width,wt.height),Pt.transmissionMap&&(yt.transmissionMap.value=Pt.transmissionMap),yt.thickness.value=Pt.thickness,Pt.thicknessMap&&(yt.thicknessMap.value=Pt.thicknessMap),yt.attenuationDistance.value=Pt.attenuationDistance,yt.attenuationColor.value.copy(Pt.attenuationColor)),yt.specularIntensity.value=Pt.specularIntensity,yt.specularColor.value.copy(Pt.specularColor),Pt.specularIntensityMap&&(yt.specularIntensityMap.value=Pt.specularIntensityMap),Pt.specularColorMap&&(yt.specularColorMap.value=Pt.specularColorMap)}function ut(yt,Pt){Pt.matcap&&(yt.matcap.value=Pt.matcap)}function gt(yt,Pt){yt.referencePosition.value.copy(Pt.referencePosition),yt.nearDistance.value=Pt.nearDistance,yt.farDistance.value=Pt.farDistance}return{refreshFogUniforms:i,refreshMaterialUniforms:o}}function XG(e,a,i,o){let c={},d={},g=[],b=i.isWebGL2?e.getParameter(35375):0;function j(Ct,At){let Tt=At.program;o.uniformBlockBinding(Ct,Tt)}function $(Ct,At){let Tt=c[Ct.id];Tt===void 0&&(gt(Ct),Tt=rt(Ct),c[Ct.id]=Tt,Ct.addEventListener("dispose",Pt));let kt=At.program;o.updateUBOMapping(Ct,kt);let It=a.render.frame;d[Ct.id]!==It&&(st(Ct),d[Ct.id]=It)}function rt(Ct){let At=_e();Ct.__bindingPointIndex=At;let Tt=e.createBuffer(),kt=Ct.__size,It=Ct.usage;return e.bindBuffer(35345,Tt),e.bufferData(35345,kt,It),e.bindBuffer(35345,null),e.bindBufferBase(35345,At,Tt),Tt}function _e(){for(let Ct=0;Ct<b;Ct++)if(g.indexOf(Ct)===-1)return g.push(Ct),Ct;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function st(Ct){let At=c[Ct.id],Tt=Ct.uniforms,kt=Ct.__cache;e.bindBuffer(35345,At);for(let It=0,Lt=Tt.length;It<Lt;It++){let Ft=Tt[It];if(ut(Ft,It,kt)===!0){let Nt=Ft.__offset,Ht=Array.isArray(Ft.value)?Ft.value:[Ft.value],Gr=0;for(let hs=0;hs<Ht.length;hs++){let _s=Ht[hs],hn=yt(_s);typeof _s=="number"?(Ft.__data[0]=_s,e.bufferSubData(35345,Nt+Gr,Ft.__data)):_s.isMatrix3?(Ft.__data[0]=_s.elements[0],Ft.__data[1]=_s.elements[1],Ft.__data[2]=_s.elements[2],Ft.__data[3]=_s.elements[0],Ft.__data[4]=_s.elements[3],Ft.__data[5]=_s.elements[4],Ft.__data[6]=_s.elements[5],Ft.__data[7]=_s.elements[0],Ft.__data[8]=_s.elements[6],Ft.__data[9]=_s.elements[7],Ft.__data[10]=_s.elements[8],Ft.__data[11]=_s.elements[0]):(_s.toArray(Ft.__data,Gr),Gr+=hn.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(35345,Nt,Ft.__data)}}e.bindBuffer(35345,null)}function ut(Ct,At,Tt){let kt=Ct.value;if(Tt[At]===void 0){if(typeof kt=="number")Tt[At]=kt;else{let It=Array.isArray(kt)?kt:[kt],Lt=[];for(let Ft=0;Ft<It.length;Ft++)Lt.push(It[Ft].clone());Tt[At]=Lt}return!0}else if(typeof kt=="number"){if(Tt[At]!==kt)return Tt[At]=kt,!0}else{let It=Array.isArray(Tt[At])?Tt[At]:[Tt[At]],Lt=Array.isArray(kt)?kt:[kt];for(let Ft=0;Ft<It.length;Ft++){let Nt=It[Ft];if(Nt.equals(Lt[Ft])===!1)return Nt.copy(Lt[Ft]),!0}}return!1}function gt(Ct){let At=Ct.uniforms,Tt=0,kt=16,It=0;for(let Lt=0,Ft=At.length;Lt<Ft;Lt++){let Nt=At[Lt],Ht={boundary:0,storage:0},Gr=Array.isArray(Nt.value)?Nt.value:[Nt.value];for(let hs=0,_s=Gr.length;hs<_s;hs++){let hn=Gr[hs],Qn=yt(hn);Ht.boundary+=Qn.boundary,Ht.storage+=Qn.storage}if(Nt.__data=new Float32Array(Ht.storage/Float32Array.BYTES_PER_ELEMENT),Nt.__offset=Tt,Lt>0){It=Tt%kt;let hs=kt-It;It!==0&&hs-Ht.boundary<0&&(Tt+=kt-It,Nt.__offset=Tt)}Tt+=Ht.storage}return It=Tt%kt,It>0&&(Tt+=kt-It),Ct.__size=Tt,Ct.__cache={},this}function yt(Ct){let At={boundary:0,storage:0};return typeof Ct=="number"?(At.boundary=4,At.storage=4):Ct.isVector2?(At.boundary=8,At.storage=8):Ct.isVector3||Ct.isColor?(At.boundary=16,At.storage=12):Ct.isVector4?(At.boundary=16,At.storage=16):Ct.isMatrix3?(At.boundary=48,At.storage=48):Ct.isMatrix4?(At.boundary=64,At.storage=64):Ct.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",Ct),At}function Pt(Ct){let At=Ct.target;At.removeEventListener("dispose",Pt);let Tt=g.indexOf(At.__bindingPointIndex);g.splice(Tt,1),e.deleteBuffer(c[At.id]),delete c[At.id],delete d[At.id]}function wt(){for(let Ct in c)e.deleteBuffer(c[Ct]);g=[],c={},d={}}return{bind:j,update:$,dispose:wt}}function QG(){let e=_p("canvas");return e.style.display="block",e}function Dw(e={}){this.isWebGLRenderer=!0;let a=e.canvas!==void 0?e.canvas:QG(),i=e.context!==void 0?e.context:null,o=e.depth!==void 0?e.depth:!0,c=e.stencil!==void 0?e.stencil:!0,d=e.antialias!==void 0?e.antialias:!1,g=e.premultipliedAlpha!==void 0?e.premultipliedAlpha:!0,b=e.preserveDrawingBuffer!==void 0?e.preserveDrawingBuffer:!1,j=e.powerPreference!==void 0?e.powerPreference:"default",$=e.failIfMajorPerformanceCaveat!==void 0?e.failIfMajorPerformanceCaveat:!1,rt;i!==null?rt=i.getContextAttributes().alpha:rt=e.alpha!==void 0?e.alpha:!1;let _e=null,st=null,ut=[],gt=[];this.domElement=a,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Sn,this.physicallyCorrectLights=!1,this.toneMapping=Hs,this.toneMappingExposure=1;let yt=this,Pt=!1,wt=0,Ct=0,At=null,Tt=-1,kt=null,It=new Ke,Lt=new Ke,Ft=null,Nt=a.width,Ht=a.height,Gr=1,hs=null,_s=null,hn=new Ke(0,0,Nt,Ht),Qn=new Ke(0,0,Nt,Ht),ds=!1,un=new Tp,dr=!1,us=!1,Nn=null,gn=new ce$1,Zn=new z$2,xu=new _,au={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Vv(){return At===null?Gr:1}let wu=i;function a1(sp,U_){for(let rS=0;rS<sp.length;rS++){let ux=sp[rS],eE=a.getContext(ux,U_);if(eE!==null)return eE}return null}try{let sp={alpha:!0,depth:o,stencil:c,antialias:d,premultipliedAlpha:g,preserveDrawingBuffer:b,powerPreference:j,failIfMajorPerformanceCaveat:$};if("setAttribute"in a&&a.setAttribute("data-engine",`three.js r${ba$1}`),a.addEventListener("webglcontextlost",OL,!1),a.addEventListener("webglcontextrestored",CL,!1),a.addEventListener("webglcontextcreationerror",TL,!1),wu===null){let U_=["webgl2","webgl","experimental-webgl"];if(yt.isWebGL1Renderer===!0&&U_.shift(),wu=a1(U_,sp),wu===null)throw a1(U_)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}wu.getShaderPrecisionFormat===void 0&&(wu.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(sp){throw console.error("THREE.WebGLRenderer: "+sp.message),sp}let P0,B0,q1,ox,N_,eS,tS,tA,aR,sR,AA,SA,IO,pO,Su,mu,ax,tE,So,fD,C3,q3,qx,oI;function mO(){P0=new gU(wu),B0=new uU(wu,P0,e),P0.init(B0),q3=new WG(wu,P0,B0),q1=new jG(wu,P0,B0),ox=new xU,N_=new OG,eS=new HG(wu,P0,q1,N_,B0,q3,ox),tS=new dU(yt),tA=new mU(yt),aR=new Ck(wu,B0),qx=new lU(wu,P0,aR,B0),sR=new yU(wu,aR,ox,qx),AA=new AU(wu,sR,aR,ox),So=new wU(wu,B0,eS),mu=new hU(N_),SA=new DG(yt,tS,tA,P0,B0,qx,mu),IO=new YG(yt,N_),pO=new RG,Su=new VG(P0,B0),tE=new aU(yt,tS,tA,q1,AA,rt,g),ax=new GG(yt,AA,B0),oI=new XG(wu,ox,B0,q1),fD=new cU(wu,P0,ox,B0),C3=new vU(wu,P0,ox,B0),ox.programs=SA.programs,yt.capabilities=B0,yt.extensions=P0,yt.properties=N_,yt.renderLists=pO,yt.shadowMap=ax,yt.state=q1,yt.info=ox}mO();let bL=new nw(yt,wu);this.xr=bL,this.getContext=function(){return wu},this.getContextAttributes=function(){return wu.getContextAttributes()},this.forceContextLoss=function(){let sp=P0.get("WEBGL_lose_context");sp&&sp.loseContext()},this.forceContextRestore=function(){let sp=P0.get("WEBGL_lose_context");sp&&sp.restoreContext()},this.getPixelRatio=function(){return Gr},this.setPixelRatio=function(sp){sp!==void 0&&(Gr=sp,this.setSize(Nt,Ht,!1))},this.getSize=function(sp){return sp.set(Nt,Ht)},this.setSize=function(sp,U_,rS){if(bL.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Nt=sp,Ht=U_,a.width=Math.floor(sp*Gr),a.height=Math.floor(U_*Gr),rS!==!1&&(a.style.width=sp+"px",a.style.height=U_+"px"),this.setViewport(0,0,sp,U_)},this.getDrawingBufferSize=function(sp){return sp.set(Nt*Gr,Ht*Gr).floor()},this.setDrawingBufferSize=function(sp,U_,rS){Nt=sp,Ht=U_,Gr=rS,a.width=Math.floor(sp*rS),a.height=Math.floor(U_*rS),this.setViewport(0,0,sp,U_)},this.getCurrentViewport=function(sp){return sp.copy(It)},this.getViewport=function(sp){return sp.copy(hn)},this.setViewport=function(sp,U_,rS,ux){sp.isVector4?hn.set(sp.x,sp.y,sp.z,sp.w):hn.set(sp,U_,rS,ux),q1.viewport(It.copy(hn).multiplyScalar(Gr).floor())},this.getScissor=function(sp){return sp.copy(Qn)},this.setScissor=function(sp,U_,rS,ux){sp.isVector4?Qn.set(sp.x,sp.y,sp.z,sp.w):Qn.set(sp,U_,rS,ux),q1.scissor(Lt.copy(Qn).multiplyScalar(Gr).floor())},this.getScissorTest=function(){return ds},this.setScissorTest=function(sp){q1.setScissorTest(ds=sp)},this.setOpaqueSort=function(sp){hs=sp},this.setTransparentSort=function(sp){_s=sp},this.getClearColor=function(sp){return sp.copy(tE.getClearColor())},this.setClearColor=function(){tE.setClearColor.apply(tE,arguments)},this.getClearAlpha=function(){return tE.getClearAlpha()},this.setClearAlpha=function(){tE.setClearAlpha.apply(tE,arguments)},this.clear=function(sp=!0,U_=!0,rS=!0){let ux=0;sp&&(ux|=16384),U_&&(ux|=256),rS&&(ux|=1024),wu.clear(ux)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){a.removeEventListener("webglcontextlost",OL,!1),a.removeEventListener("webglcontextrestored",CL,!1),a.removeEventListener("webglcontextcreationerror",TL,!1),pO.dispose(),Su.dispose(),N_.dispose(),tS.dispose(),tA.dispose(),AA.dispose(),qx.dispose(),oI.dispose(),SA.dispose(),bL.dispose(),bL.removeEventListener("sessionstart",MO),bL.removeEventListener("sessionend",IL),Nn&&(Nn.dispose(),Nn=null),GL.stop()};function OL(sp){sp.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),Pt=!0}function CL(){console.log("THREE.WebGLRenderer: Context Restored."),Pt=!1;let sp=ox.autoReset,U_=ax.enabled,rS=ax.autoUpdate,ux=ax.needsUpdate,eE=ax.type;mO(),ox.autoReset=sp,ax.enabled=U_,ax.autoUpdate=rS,ax.needsUpdate=ux,ax.type=eE}function TL(sp){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",sp.statusMessage)}function e$(sp){let U_=sp.target;U_.removeEventListener("dispose",e$),i$(U_)}function i$(sp){l1(sp),N_.remove(sp)}function l1(sp){let U_=N_.get(sp).programs;U_!==void 0&&(U_.forEach(function(rS){SA.releaseProgram(rS)}),sp.isShaderMaterial&&SA.releaseShaderCache(sp))}this.renderBufferDirect=function(sp,U_,rS,ux,eE,PL){U_===null&&(U_=au);let LL=eE.isMesh&&eE.matrixWorld.determinant()<0,FL=w$(sp,U_,rS,ux,eE);q1.setMaterial(ux,LL);let jL=rS.index,qL=1;ux.wireframe===!0&&(jL=sR.getWireframeAttribute(rS),qL=2);let UL=rS.drawRange,WL=rS.attributes.position,VL=UL.start*qL,a$=(UL.start+UL.count)*qL;PL!==null&&(VL=Math.max(VL,PL.start*qL),a$=Math.min(a$,(PL.start+PL.count)*qL)),jL!==null?(VL=Math.max(VL,0),a$=Math.min(a$,jL.count)):WL!=null&&(VL=Math.max(VL,0),a$=Math.min(a$,WL.count));let l$=a$-VL;if(l$<0||l$===1/0)return;qx.setup(eE,ux,FL,rS,jL);let p$,r$=fD;if(jL!==null&&(p$=aR.get(jL),r$=C3,r$.setIndex(p$)),eE.isMesh)ux.wireframe===!0?(q1.setLineWidth(ux.wireframeLinewidth*Vv()),r$.setMode(1)):r$.setMode(4);else if(eE.isLine){let HL=ux.linewidth;HL===void 0&&(HL=1),q1.setLineWidth(HL*Vv()),eE.isLineSegments?r$.setMode(1):eE.isLineLoop?r$.setMode(2):r$.setMode(3)}else eE.isPoints?r$.setMode(0):eE.isSprite&&r$.setMode(4);if(eE.isInstancedMesh)r$.renderInstances(VL,l$,eE.count);else if(rS.isInstancedBufferGeometry){let HL=rS._maxInstanceCount!==void 0?rS._maxInstanceCount:1/0,u$=Math.min(rS.instanceCount,HL);r$.renderInstances(VL,l$,u$)}else r$.render(VL,l$)},this.compile=function(sp,U_){function rS(ux,eE,PL){ux.transparent===!0&&ux.side===tn&&ux.forceSinglePass===!1?(ux.side=yi,ux.needsUpdate=!0,o$(ux,eE,PL),ux.side=es,ux.needsUpdate=!0,o$(ux,eE,PL),ux.side=tn):o$(ux,eE,PL)}st=Su.get(sp),st.init(),gt.push(st),sp.traverseVisible(function(ux){ux.isLight&&ux.layers.test(U_.layers)&&(st.pushLight(ux),ux.castShadow&&st.pushShadow(ux))}),st.setupLights(yt.physicallyCorrectLights),sp.traverse(function(ux){let eE=ux.material;if(eE)if(Array.isArray(eE))for(let PL=0;PL<eE.length;PL++){let LL=eE[PL];rS(LL,sp,ux)}else rS(eE,sp,ux)}),gt.pop(),st=null};let iS=null;function wA(sp){iS&&iS(sp)}function MO(){GL.stop()}function IL(){GL.start()}let GL=new KM;GL.setAnimationLoop(wA),typeof self<"u"&&GL.setContext(self),this.setAnimationLoop=function(sp){iS=sp,bL.setAnimationLoop(sp),sp===null?GL.stop():GL.start()},bL.addEventListener("sessionstart",MO),bL.addEventListener("sessionend",IL),this.render=function(sp,U_){if(U_!==void 0&&U_.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(Pt===!0)return;sp.matrixWorldAutoUpdate===!0&&sp.updateMatrixWorld(),U_.parent===null&&U_.matrixWorldAutoUpdate===!0&&U_.updateMatrixWorld(),bL.enabled===!0&&bL.isPresenting===!0&&(bL.cameraAutoUpdate===!0&&bL.updateCamera(U_),U_=bL.getCamera()),sp.isScene===!0&&sp.onBeforeRender(yt,sp,U_,At),st=Su.get(sp,gt.length),st.init(),gt.push(st),gn.multiplyMatrices(U_.projectionMatrix,U_.matrixWorldInverse),un.setFromProjectionMatrix(gn),us=this.localClippingEnabled,dr=mu.init(this.clippingPlanes,us),_e=pO.get(sp,ut.length),_e.init(),ut.push(_e),s$(sp,U_,0,yt.sortObjects),_e.finish(),yt.sortObjects===!0&&_e.sort(hs,_s),dr===!0&&mu.beginShadows();let rS=st.state.shadowsArray;if(ax.render(rS,sp,U_),dr===!0&&mu.endShadows(),this.info.autoReset===!0&&this.info.reset(),tE.render(_e,sp),st.setupLights(yt.physicallyCorrectLights),U_.isArrayCamera){let ux=U_.cameras;for(let eE=0,PL=ux.length;eE<PL;eE++){let LL=ux[eE];n$(_e,sp,LL,LL.viewport)}}else n$(_e,sp,U_);At!==null&&(eS.updateMultisampleRenderTarget(At),eS.updateRenderTargetMipmap(At)),sp.isScene===!0&&sp.onAfterRender(yt,sp,U_),qx.resetDefaultState(),Tt=-1,kt=null,gt.pop(),gt.length>0?st=gt[gt.length-1]:st=null,ut.pop(),ut.length>0?_e=ut[ut.length-1]:_e=null};function s$(sp,U_,rS,ux){if(sp.visible===!1)return;if(sp.layers.test(U_.layers)){if(sp.isGroup)rS=sp.renderOrder;else if(sp.isLOD)sp.autoUpdate===!0&&sp.update(U_);else if(sp.isLight)st.pushLight(sp),sp.castShadow&&st.pushShadow(sp);else if(sp.isSprite){if(!sp.frustumCulled||un.intersectsSprite(sp)){ux&&xu.setFromMatrixPosition(sp.matrixWorld).applyMatrix4(gn);let PL=AA.update(sp),LL=sp.material;LL.visible&&_e.push(sp,PL,LL,rS,xu.z,null)}}else if((sp.isMesh||sp.isLine||sp.isPoints)&&(sp.isSkinnedMesh&&sp.skeleton.frame!==ox.render.frame&&(sp.skeleton.update(),sp.skeleton.frame=ox.render.frame),!sp.frustumCulled||un.intersectsObject(sp))){ux&&xu.setFromMatrixPosition(sp.matrixWorld).applyMatrix4(gn);let PL=AA.update(sp),LL=sp.material;if(Array.isArray(LL)){let FL=PL.groups;for(let jL=0,qL=FL.length;jL<qL;jL++){let UL=FL[jL],WL=LL[UL.materialIndex];WL&&WL.visible&&_e.push(sp,PL,WL,rS,xu.z,UL)}}else LL.visible&&_e.push(sp,PL,LL,rS,xu.z,null)}}let eE=sp.children;for(let PL=0,LL=eE.length;PL<LL;PL++)s$(eE[PL],U_,rS,ux)}function n$(sp,U_,rS,ux){let eE=sp.opaque,PL=sp.transmissive,LL=sp.transparent;st.setupLightsView(rS),dr===!0&&mu.setGlobalState(yt.clippingPlanes,rS),PL.length>0&&c$(eE,U_,rS),ux&&q1.viewport(It.copy(ux)),eE.length>0&&t$(eE,U_,rS),PL.length>0&&t$(PL,U_,rS),LL.length>0&&t$(LL,U_,rS),q1.buffers.depth.setTest(!0),q1.buffers.depth.setMask(!0),q1.buffers.color.setMask(!0),q1.setPolygonOffset(!1)}function c$(sp,U_,rS){let ux=B0.isWebGL2;Nn===null&&(Nn=new ft(1,1,{generateMipmaps:!0,type:P0.has("EXT_color_buffer_half_float")?va:Ir$1,minFilter:bc,samples:ux&&d===!0?4:0})),yt.getDrawingBufferSize(Zn),ux?Nn.setSize(Zn.x,Zn.y):Nn.setSize(gy(Zn.x),gy(Zn.y));let eE=yt.getRenderTarget();yt.setRenderTarget(Nn),yt.clear();let PL=yt.toneMapping;yt.toneMapping=Hs,t$(sp,U_,rS),yt.toneMapping=PL,eS.updateMultisampleRenderTarget(Nn),eS.updateRenderTargetMipmap(Nn),yt.setRenderTarget(eE)}function t$(sp,U_,rS){let ux=U_.isScene===!0?U_.overrideMaterial:null;for(let eE=0,PL=sp.length;eE<PL;eE++){let LL=sp[eE],FL=LL.object,jL=LL.geometry,qL=ux===null?LL.material:ux,UL=LL.group;FL.layers.test(rS.layers)&&h$(FL,U_,rS,jL,qL,UL)}}function h$(sp,U_,rS,ux,eE,PL){sp.onBeforeRender(yt,U_,rS,ux,eE,PL),sp.modelViewMatrix.multiplyMatrices(rS.matrixWorldInverse,sp.matrixWorld),sp.normalMatrix.getNormalMatrix(sp.modelViewMatrix),eE.onBeforeRender(yt,U_,rS,ux,sp,PL),eE.transparent===!0&&eE.side===tn&&eE.forceSinglePass===!1?(eE.side=yi,eE.needsUpdate=!0,yt.renderBufferDirect(rS,U_,ux,eE,sp,PL),eE.side=es,eE.needsUpdate=!0,yt.renderBufferDirect(rS,U_,ux,eE,sp,PL),eE.side=tn):yt.renderBufferDirect(rS,U_,ux,eE,sp,PL),sp.onAfterRender(yt,U_,rS,ux,eE,PL)}function o$(sp,U_,rS){U_.isScene!==!0&&(U_=au);let ux=N_.get(sp),eE=st.state.lights,PL=st.state.shadowsArray,LL=eE.state.version,FL=SA.getParameters(sp,eE.state,PL,U_,rS),jL=SA.getProgramCacheKey(FL),qL=ux.programs;ux.environment=sp.isMeshStandardMaterial?U_.environment:null,ux.fog=U_.fog,ux.envMap=(sp.isMeshStandardMaterial?tA:tS).get(sp.envMap||ux.environment),qL===void 0&&(sp.addEventListener("dispose",e$),qL=new Map,ux.programs=qL);let UL=qL.get(jL);if(UL!==void 0){if(ux.currentProgram===UL&&ux.lightsStateVersion===LL)return y$(sp,FL),UL}else FL.uniforms=SA.getUniforms(sp),sp.onBuild(rS,FL,yt),sp.onBeforeCompile(FL,yt),UL=SA.acquireProgram(FL,jL),qL.set(jL,UL),ux.uniforms=FL.uniforms;let WL=ux.uniforms;(!sp.isShaderMaterial&&!sp.isRawShaderMaterial||sp.clipping===!0)&&(WL.clippingPlanes=mu.uniform),y$(sp,FL),ux.needsLights=x$(sp),ux.lightsStateVersion=LL,ux.needsLights&&(WL.ambientLightColor.value=eE.state.ambient,WL.lightProbe.value=eE.state.probe,WL.directionalLights.value=eE.state.directional,WL.directionalLightShadows.value=eE.state.directionalShadow,WL.spotLights.value=eE.state.spot,WL.spotLightShadows.value=eE.state.spotShadow,WL.rectAreaLights.value=eE.state.rectArea,WL.ltc_1.value=eE.state.rectAreaLTC1,WL.ltc_2.value=eE.state.rectAreaLTC2,WL.pointLights.value=eE.state.point,WL.pointLightShadows.value=eE.state.pointShadow,WL.hemisphereLights.value=eE.state.hemi,WL.directionalShadowMap.value=eE.state.directionalShadowMap,WL.directionalShadowMatrix.value=eE.state.directionalShadowMatrix,WL.spotShadowMap.value=eE.state.spotShadowMap,WL.spotLightMatrix.value=eE.state.spotLightMatrix,WL.spotLightMap.value=eE.state.spotLightMap,WL.pointShadowMap.value=eE.state.pointShadowMap,WL.pointShadowMatrix.value=eE.state.pointShadowMatrix);let VL=UL.getUniforms(),a$=Gu.seqWithValue(VL.seq,WL);return ux.currentProgram=UL,ux.uniformsList=a$,UL}function y$(sp,U_){let rS=N_.get(sp);rS.outputEncoding=U_.outputEncoding,rS.instancing=U_.instancing,rS.skinning=U_.skinning,rS.morphTargets=U_.morphTargets,rS.morphNormals=U_.morphNormals,rS.morphColors=U_.morphColors,rS.morphTargetsCount=U_.morphTargetsCount,rS.numClippingPlanes=U_.numClippingPlanes,rS.numIntersection=U_.numClipIntersection,rS.vertexAlphas=U_.vertexAlphas,rS.vertexTangents=U_.vertexTangents,rS.toneMapping=U_.toneMapping}function w$(sp,U_,rS,ux,eE){U_.isScene!==!0&&(U_=au),eS.resetTextureUnits();let PL=U_.fog,LL=ux.isMeshStandardMaterial?U_.environment:null,FL=At===null?yt.outputEncoding:At.isXRRenderTarget===!0?At.texture.encoding:Sn,jL=(ux.isMeshStandardMaterial?tA:tS).get(ux.envMap||LL),qL=ux.vertexColors===!0&&!!rS.attributes.color&&rS.attributes.color.itemSize===4,UL=!!ux.normalMap&&!!rS.attributes.tangent,WL=!!rS.morphAttributes.position,VL=!!rS.morphAttributes.normal,a$=!!rS.morphAttributes.color,l$=ux.toneMapped?yt.toneMapping:Hs,p$=rS.morphAttributes.position||rS.morphAttributes.normal||rS.morphAttributes.color,r$=p$!==void 0?p$.length:0,HL=N_.get(ux),u$=st.state.lights;if(dr===!0&&(us===!0||sp!==kt)){let bu=sp===kt&&ux.id===Tt;mu.setState(ux,sp,bu)}let BL=!1;ux.version===HL.__version?(HL.needsLights&&HL.lightsStateVersion!==u$.state.version||HL.outputEncoding!==FL||eE.isInstancedMesh&&HL.instancing===!1||!eE.isInstancedMesh&&HL.instancing===!0||eE.isSkinnedMesh&&HL.skinning===!1||!eE.isSkinnedMesh&&HL.skinning===!0||HL.envMap!==jL||ux.fog===!0&&HL.fog!==PL||HL.numClippingPlanes!==void 0&&(HL.numClippingPlanes!==mu.numPlanes||HL.numIntersection!==mu.numIntersection)||HL.vertexAlphas!==qL||HL.vertexTangents!==UL||HL.morphTargets!==WL||HL.morphNormals!==VL||HL.morphColors!==a$||HL.toneMapping!==l$||B0.isWebGL2===!0&&HL.morphTargetsCount!==r$)&&(BL=!0):(BL=!0,HL.__version=ux.version);let f$=HL.currentProgram;BL===!0&&(f$=o$(ux,U_,eE));let v$=!1,g$=!1,d$=!1,bo=f$.getUniforms(),ou=HL.uniforms;if(q1.useProgram(f$.program)&&(v$=!0,g$=!0,d$=!0),ux.id!==Tt&&(Tt=ux.id,g$=!0),v$||kt!==sp){if(bo.setValue(wu,"projectionMatrix",sp.projectionMatrix),B0.logarithmicDepthBuffer&&bo.setValue(wu,"logDepthBufFC",2/(Math.log(sp.far+1)/Math.LN2)),kt!==sp&&(kt=sp,g$=!0,d$=!0),ux.isShaderMaterial||ux.isMeshPhongMaterial||ux.isMeshToonMaterial||ux.isMeshStandardMaterial||ux.envMap){let bu=bo.map.cameraPosition;bu!==void 0&&bu.setValue(wu,xu.setFromMatrixPosition(sp.matrixWorld))}(ux.isMeshPhongMaterial||ux.isMeshToonMaterial||ux.isMeshLambertMaterial||ux.isMeshBasicMaterial||ux.isMeshStandardMaterial||ux.isShaderMaterial)&&bo.setValue(wu,"isOrthographic",sp.isOrthographicCamera===!0),(ux.isMeshPhongMaterial||ux.isMeshToonMaterial||ux.isMeshLambertMaterial||ux.isMeshBasicMaterial||ux.isMeshStandardMaterial||ux.isShaderMaterial||ux.isShadowMaterial||eE.isSkinnedMesh)&&bo.setValue(wu,"viewMatrix",sp.matrixWorldInverse)}if(eE.isSkinnedMesh){bo.setOptional(wu,eE,"bindMatrix"),bo.setOptional(wu,eE,"bindMatrixInverse");let bu=eE.skeleton;bu&&(B0.floatVertexTextures?(bu.boneTexture===null&&bu.computeBoneTexture(),bo.setValue(wu,"boneTexture",bu.boneTexture,eS),bo.setValue(wu,"boneTextureSize",bu.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}let g0=rS.morphAttributes;if((g0.position!==void 0||g0.normal!==void 0||g0.color!==void 0&&B0.isWebGL2===!0)&&So.update(eE,rS,ux,f$),(g$||HL.receiveShadow!==eE.receiveShadow)&&(HL.receiveShadow=eE.receiveShadow,bo.setValue(wu,"receiveShadow",eE.receiveShadow)),ux.isMeshGouraudMaterial&&ux.envMap!==null&&(ou.envMap.value=jL,ou.flipEnvMap.value=jL.isCubeTexture&&jL.isRenderTargetTexture===!1?-1:1),g$&&(bo.setValue(wu,"toneMappingExposure",yt.toneMappingExposure),HL.needsLights&&S$(ou,d$),PL&&ux.fog===!0&&IO.refreshFogUniforms(ou,PL),IO.refreshMaterialUniforms(ou,ux,Gr,Ht,Nn),Gu.upload(wu,HL.uniformsList,ou,eS)),ux.isShaderMaterial&&ux.uniformsNeedUpdate===!0&&(Gu.upload(wu,HL.uniformsList,ou,eS),ux.uniformsNeedUpdate=!1),ux.isSpriteMaterial&&bo.setValue(wu,"center",eE.center),bo.setValue(wu,"modelViewMatrix",eE.modelViewMatrix),bo.setValue(wu,"normalMatrix",eE.normalMatrix),bo.setValue(wu,"modelMatrix",eE.matrixWorld),eE.previousModelViewMatrix&&bo.setValue(wu,"previousModelViewMatrix",eE.previousModelViewMatrix),sp.previousProjectionMatrix&&bo.setValue(wu,"previousProjectionMatrix",sp.previousProjectionMatrix),ux.isShaderMaterial||ux.isRawShaderMaterial){let bu=ux.uniformsGroups;for(let X1=0,X3=bu.length;X1<X3;X1++)if(B0.isWebGL2){let m$=bu[X1];oI.update(m$,f$),oI.bind(m$,f$)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return f$}function S$(sp,U_){sp.ambientLightColor.needsUpdate=U_,sp.lightProbe.needsUpdate=U_,sp.directionalLights.needsUpdate=U_,sp.directionalLightShadows.needsUpdate=U_,sp.pointLights.needsUpdate=U_,sp.pointLightShadows.needsUpdate=U_,sp.spotLights.needsUpdate=U_,sp.spotLightShadows.needsUpdate=U_,sp.rectAreaLights.needsUpdate=U_,sp.hemisphereLights.needsUpdate=U_}function x$(sp){return sp.isMeshLambertMaterial||sp.isMeshToonMaterial||sp.isMeshPhongMaterial||sp.isMeshStandardMaterial||sp.isShadowMaterial||sp.isShaderMaterial&&sp.lights===!0}this.getActiveCubeFace=function(){return wt},this.getActiveMipmapLevel=function(){return Ct},this.getRenderTarget=function(){return At},this.setRenderTargetTextures=function(sp,U_,rS){N_.get(sp.texture).__webglTexture=U_,N_.get(sp.depthTexture).__webglTexture=rS;let ux=N_.get(sp);ux.__hasExternalTextures=!0,ux.__hasExternalTextures&&(ux.__autoAllocateDepthBuffer=rS===void 0,ux.__autoAllocateDepthBuffer||P0.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ux.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(sp,U_){let rS=N_.get(sp);rS.__webglFramebuffer=U_,rS.__useDefaultFramebuffer=U_===void 0},this.setRenderTarget=function(sp,U_=0,rS=0){At=sp,wt=U_,Ct=rS;let ux=!0,eE=null,PL=!1,LL=!1;if(sp){let FL=N_.get(sp);FL.__useDefaultFramebuffer!==void 0?(q1.bindFramebuffer(36160,null),ux=!1):FL.__webglFramebuffer===void 0?eS.setupRenderTarget(sp):FL.__hasExternalTextures&&eS.rebindTextures(sp,N_.get(sp.texture).__webglTexture,N_.get(sp.depthTexture).__webglTexture);let jL=sp.texture;(jL.isData3DTexture||jL.isDataArrayTexture||jL.isCompressedArrayTexture)&&(LL=!0);let qL=N_.get(sp).__webglFramebuffer;sp.isWebGLCubeRenderTarget?(eE=qL[U_],PL=!0):B0.isWebGL2&&sp.samples>0&&eS.useMultisampledRTT(sp)===!1?eE=N_.get(sp).__webglMultisampledFramebuffer:eE=qL,It.copy(sp.viewport),Lt.copy(sp.scissor),Ft=sp.scissorTest}else It.copy(hn).multiplyScalar(Gr).floor(),Lt.copy(Qn).multiplyScalar(Gr).floor(),Ft=ds;if(q1.bindFramebuffer(36160,eE)&&B0.drawBuffers&&ux&&q1.drawBuffers(sp,eE),q1.viewport(It),q1.scissor(Lt),q1.setScissorTest(Ft),PL){let FL=N_.get(sp.texture);wu.framebufferTexture2D(36160,36064,34069+U_,FL.__webglTexture,rS)}else if(LL){let FL=N_.get(sp.texture),jL=U_||0;wu.framebufferTextureLayer(36160,36064,FL.__webglTexture,rS||0,jL)}Tt=-1},this.readRenderTargetPixels=function(sp,U_,rS,ux,eE,PL,LL){if(!(sp&&sp.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let FL=N_.get(sp).__webglFramebuffer;if(sp.isWebGLCubeRenderTarget&&LL!==void 0&&(FL=FL[LL]),FL){q1.bindFramebuffer(36160,FL);try{let jL=sp.texture,qL=jL.format,UL=jL.type;if(qL!==Qr&&q3.convert(qL)!==wu.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}let WL=UL===va&&(P0.has("EXT_color_buffer_half_float")||B0.isWebGL2&&P0.has("EXT_color_buffer_float"));if(UL!==Ir$1&&q3.convert(UL)!==wu.getParameter(35738)&&!(UL===Sr$1&&(B0.isWebGL2||P0.has("OES_texture_float")||P0.has("WEBGL_color_buffer_float")))&&!WL){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}U_>=0&&U_<=sp.width-ux&&rS>=0&&rS<=sp.height-eE&&wu.readPixels(U_,rS,ux,eE,q3.convert(qL),q3.convert(UL),PL)}finally{let jL=At!==null?N_.get(At).__webglFramebuffer:null;q1.bindFramebuffer(36160,jL)}}},this.copyFramebufferToTexture=function(sp,U_,rS=0){let ux=Math.pow(2,-rS),eE=Math.floor(U_.image.width*ux),PL=Math.floor(U_.image.height*ux);eS.setTexture2D(U_,0),wu.copyTexSubImage2D(3553,rS,0,0,sp.x,sp.y,eE,PL),q1.unbindTexture()},this.copyTextureToTexture=function(sp,U_,rS,ux=0){let eE=U_.image.width,PL=U_.image.height,LL=q3.convert(rS.format),FL=q3.convert(rS.type);eS.setTexture2D(rS,0),wu.pixelStorei(37440,rS.flipY),wu.pixelStorei(37441,rS.premultiplyAlpha),wu.pixelStorei(3317,rS.unpackAlignment),U_.isDataTexture?wu.texSubImage2D(3553,ux,sp.x,sp.y,eE,PL,LL,FL,U_.image.data):U_.isCompressedTexture?wu.compressedTexSubImage2D(3553,ux,sp.x,sp.y,U_.mipmaps[0].width,U_.mipmaps[0].height,LL,U_.mipmaps[0].data):wu.texSubImage2D(3553,ux,sp.x,sp.y,LL,FL,U_.image),ux===0&&rS.generateMipmaps&&wu.generateMipmap(3553),q1.unbindTexture()},this.copyTextureToTexture3D=function(sp,U_,rS,ux,eE=0){if(yt.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}let PL=sp.max.x-sp.min.x+1,LL=sp.max.y-sp.min.y+1,FL=sp.max.z-sp.min.z+1,jL=q3.convert(ux.format),qL=q3.convert(ux.type),UL;if(ux.isData3DTexture)eS.setTexture3D(ux,0),UL=32879;else if(ux.isDataArrayTexture)eS.setTexture2DArray(ux,0),UL=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}wu.pixelStorei(37440,ux.flipY),wu.pixelStorei(37441,ux.premultiplyAlpha),wu.pixelStorei(3317,ux.unpackAlignment);let WL=wu.getParameter(3314),VL=wu.getParameter(32878),a$=wu.getParameter(3316),l$=wu.getParameter(3315),p$=wu.getParameter(32877),r$=rS.isCompressedTexture?rS.mipmaps[0]:rS.image;wu.pixelStorei(3314,r$.width),wu.pixelStorei(32878,r$.height),wu.pixelStorei(3316,sp.min.x),wu.pixelStorei(3315,sp.min.y),wu.pixelStorei(32877,sp.min.z),rS.isDataTexture||rS.isData3DTexture?wu.texSubImage3D(UL,eE,U_.x,U_.y,U_.z,PL,LL,FL,jL,qL,r$.data):rS.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),wu.compressedTexSubImage3D(UL,eE,U_.x,U_.y,U_.z,PL,LL,FL,jL,r$.data)):wu.texSubImage3D(UL,eE,U_.x,U_.y,U_.z,PL,LL,FL,jL,qL,r$),wu.pixelStorei(3314,WL),wu.pixelStorei(32878,VL),wu.pixelStorei(3316,a$),wu.pixelStorei(3315,l$),wu.pixelStorei(32877,p$),eE===0&&ux.generateMipmaps&&wu.generateMipmap(UL),q1.unbindTexture()},this.initTexture=function(sp){sp.isCubeTexture?eS.setTextureCube(sp,0):sp.isData3DTexture?eS.setTexture3D(sp,0):sp.isDataArrayTexture||sp.isCompressedArrayTexture?eS.setTexture2DArray(sp,0):eS.setTexture2D(sp,0),q1.unbindTexture()},this.resetState=function(){wt=0,Ct=0,At=null,q1.reset(),qx.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}var sw=class extends Dw{};sw.prototype.isWebGL1Renderer=!0;var qu=class{constructor(e,a=1,i=1e3){this.isFog=!0,this.name="",this.color=new We(e),this.near=a,this.far=i}clone(){return new qu(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}},Pi=class extends _t{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,a){return super.copy(e,a),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let a=super.toJSON(e);return this.fog!==null&&(a.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(a.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(a.object.backgroundIntensity=this.backgroundIntensity),a}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}},_y=class{constructor(e,a){this.isInterleavedBuffer=!0,this.array=e,this.stride=a,this.count=e!==void 0?e.length/a:0,this.usage=WS,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=ms()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,a,i){e*=this.stride,i*=a.stride;for(let o=0,c=this.stride;o<c;o++)this.array[e+o]=a.array[i+o];return this}set(e,a=0){return this.array.set(e,a),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ms()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let a=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(a,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ms()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},xn=new _,wc=class{constructor(e,a,i,o=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=a,this.offset=i,this.normalized=o}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let a=0,i=this.data.count;a<i;a++)xn.fromBufferAttribute(this,a),xn.applyMatrix4(e),this.setXYZ(a,xn.x,xn.y,xn.z);return this}applyNormalMatrix(e){for(let a=0,i=this.count;a<i;a++)xn.fromBufferAttribute(this,a),xn.applyNormalMatrix(e),this.setXYZ(a,xn.x,xn.y,xn.z);return this}transformDirection(e){for(let a=0,i=this.count;a<i;a++)xn.fromBufferAttribute(this,a),xn.transformDirection(e),this.setXYZ(a,xn.x,xn.y,xn.z);return this}setX(e,a){return this.normalized&&(a=br(a,this.array)),this.data.array[e*this.data.stride+this.offset]=a,this}setY(e,a){return this.normalized&&(a=br(a,this.array)),this.data.array[e*this.data.stride+this.offset+1]=a,this}setZ(e,a){return this.normalized&&(a=br(a,this.array)),this.data.array[e*this.data.stride+this.offset+2]=a,this}setW(e,a){return this.normalized&&(a=br(a,this.array)),this.data.array[e*this.data.stride+this.offset+3]=a,this}getX(e){let a=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(a=ya(a,this.array)),a}getY(e){let a=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(a=ya(a,this.array)),a}getZ(e){let a=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(a=ya(a,this.array)),a}getW(e){let a=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(a=ya(a,this.array)),a}setXY(e,a,i){return e=e*this.data.stride+this.offset,this.normalized&&(a=br(a,this.array),i=br(i,this.array)),this.data.array[e+0]=a,this.data.array[e+1]=i,this}setXYZ(e,a,i,o){return e=e*this.data.stride+this.offset,this.normalized&&(a=br(a,this.array),i=br(i,this.array),o=br(o,this.array)),this.data.array[e+0]=a,this.data.array[e+1]=i,this.data.array[e+2]=o,this}setXYZW(e,a,i,o,c){return e=e*this.data.stride+this.offset,this.normalized&&(a=br(a,this.array),i=br(i,this.array),o=br(o,this.array),c=br(c,this.array)),this.data.array[e+0]=a,this.data.array[e+1]=i,this.data.array[e+2]=o,this.data.array[e+3]=c,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let a=[];for(let i=0;i<this.count;i++){let o=i*this.data.stride+this.offset;for(let c=0;c<this.itemSize;c++)a.push(this.data.array[o+c])}return new Xe(new this.array.constructor(a),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new wc(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let a=[];for(let i=0;i<this.count;i++){let o=i*this.data.stride+this.offset;for(let c=0;c<this.itemSize;c++)a.push(this.data.array[o+c])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:a,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}},Cp=class extends _t{constructor(){super(),this.isBone=!0,this.type="Bone"}},xi=class extends tr{constructor(e=null,a=1,i=1,o,c,d,g,b,j=Vt,$=Vt,rt,_e){super(null,d,g,b,j,$,o,c,rt,_e),this.isDataTexture=!0,this.image={data:e,width:a,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},yM=new ce$1,KG=new ce$1,ul=class{constructor(e=[],a=[]){this.uuid=ms(),this.bones=e.slice(0),this.boneInverses=a,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){let e=this.bones,a=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),a.length===0)this.calculateInverses();else if(e.length!==a.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,o=this.bones.length;i<o;i++)this.boneInverses.push(new ce$1)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,a=this.bones.length;e<a;e++){let i=new ce$1;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,a=this.bones.length;e<a;e++){let i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,a=this.bones.length;e<a;e++){let i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){let e=this.bones,a=this.boneInverses,i=this.boneMatrices,o=this.boneTexture;for(let c=0,d=e.length;c<d;c++){let g=e[c]?e[c].matrixWorld:KG;yM.multiplyMatrices(g,a[c]),yM.toArray(i,c*16)}o!==null&&(o.needsUpdate=!0)}clone(){return new ul(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=qM(e),e=Math.max(e,4);let a=new Float32Array(e*e*4);a.set(this.boneMatrices);let i=new xi(a,e,e,Qr,Sr$1);return i.needsUpdate=!0,this.boneMatrices=a,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let a=0,i=this.bones.length;a<i;a++){let o=this.bones[a];if(o.name===e)return o}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,a){this.uuid=e.uuid;for(let i=0,o=e.bones.length;i<o;i++){let c=e.bones[i],d=a[c];d===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",c),d=new Cp),this.bones.push(d),this.boneInverses.push(new ce$1().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){let e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;let a=this.bones,i=this.boneInverses;for(let o=0,c=a.length;o<c;o++){let d=a[o];e.bones.push(d.uuid);let g=i[o];e.boneInverses.push(g.toArray())}return e}},Eo=class extends Xe{constructor(e,a,i,o=1){super(e,a,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=o}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){let e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}},vM=new ce$1,xM=new ce$1,iy=[],ZG=new ce$1,fp=new sr,Ey=class extends sr{constructor(e,a,i){super(e,a),this.isInstancedMesh=!0,this.instanceMatrix=new Eo(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1;for(let o=0;o<i;o++)this.setMatrixAt(o,ZG)}copy(e,a){return super.copy(e,a),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,a){a.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,a){a.fromArray(this.instanceMatrix.array,e*16)}raycast(e,a){let i=this.matrixWorld,o=this.count;if(fp.geometry=this.geometry,fp.material=this.material,fp.material!==void 0)for(let c=0;c<o;c++){this.getMatrixAt(c,vM),xM.multiplyMatrices(i,vM),fp.matrixWorld=xM,fp.raycast(e,iy);for(let d=0,g=iy.length;d<g;d++){let b=iy[d];b.instanceId=c,b.object=this,a.push(b)}iy.length=0}}setColorAt(e,a){this.instanceColor===null&&(this.instanceColor=new Eo(new Float32Array(this.instanceMatrix.count*3),3)),a.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,a){a.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}},ys=class extends Sc{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new We(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}},bM=new _,SM=new _,wM=new ce$1,BS=new qs,ny=new Br,Ac=class extends _t{constructor(e=new Pe,a=new ys){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=a,this.updateMorphTargets()}copy(e,a){return super.copy(e,a),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(e.index===null){let a=e.attributes.position,i=[0];for(let o=1,c=a.count;o<c;o++)bM.fromBufferAttribute(a,o-1),SM.fromBufferAttribute(a,o),i[o]=i[o-1],i[o]+=bM.distanceTo(SM);e.setAttribute("lineDistance",new Te(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,a){let i=this.geometry,o=this.matrixWorld,c=e.params.Line.threshold,d=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),ny.copy(i.boundingSphere),ny.applyMatrix4(o),ny.radius+=c,e.ray.intersectsSphere(ny)===!1)return;wM.copy(o).invert(),BS.copy(e.ray).applyMatrix4(wM);let g=c/((this.scale.x+this.scale.y+this.scale.z)/3),b=g*g,j=new _,$=new _,rt=new _,_e=new _,st=this.isLineSegments?2:1,ut=i.index,gt=i.attributes.position;if(ut!==null){let yt=Math.max(0,d.start),Pt=Math.min(ut.count,d.start+d.count);for(let wt=yt,Ct=Pt-1;wt<Ct;wt+=st){let At=ut.getX(wt),Tt=ut.getX(wt+1);if(j.fromBufferAttribute(gt,At),$.fromBufferAttribute(gt,Tt),BS.distanceSqToSegment(j,$,_e,rt)>b)continue;_e.applyMatrix4(this.matrixWorld);let kt=e.ray.origin.distanceTo(_e);kt<e.near||kt>e.far||a.push({distance:kt,point:rt.clone().applyMatrix4(this.matrixWorld),index:wt,face:null,faceIndex:null,object:this})}}else{let yt=Math.max(0,d.start),Pt=Math.min(gt.count,d.start+d.count);for(let wt=yt,Ct=Pt-1;wt<Ct;wt+=st){if(j.fromBufferAttribute(gt,wt),$.fromBufferAttribute(gt,wt+1),BS.distanceSqToSegment(j,$,_e,rt)>b)continue;_e.applyMatrix4(this.matrixWorld);let At=e.ray.origin.distanceTo(_e);At<e.near||At>e.far||a.push({distance:At,point:rt.clone().applyMatrix4(this.matrixWorld),index:wt,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){let e=this.geometry.morphAttributes,a=Object.keys(e);if(a.length>0){let i=e[a[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,c=i.length;o<c;o++){let d=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[d]=o}}}}},AM=new _,_M=new _,hl=class extends Ac{constructor(e,a){super(e,a),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(e.index===null){let a=e.attributes.position,i=[];for(let o=0,c=a.count;o<c;o+=2)AM.fromBufferAttribute(a,o),_M.fromBufferAttribute(a,o+1),i[o]=o===0?0:i[o-1],i[o+1]=i[o]+AM.distanceTo(_M);e.setAttribute("lineDistance",new Te(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},Ty=class extends tr{constructor(e,a,i,o,c,d,g,b,j){super(e,a,i,o,c,d,g,b,j),this.isVideoTexture=!0,this.minFilter=d!==void 0?d:tt,this.magFilter=c!==void 0?c:tt,this.generateMipmaps=!1;let $=this;function rt(){$.needsUpdate=!0,e.requestVideoFrameCallback(rt)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(rt)}clone(){return new this.constructor(this.image).copy(this)}update(){let e=this.image;!("requestVideoFrameCallback"in e)&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}},My=class extends tr{constructor(e,a,i,o,c,d,g,b,j){super(e,a,i,o,c,d,g,b,j),this.isCanvasTexture=!0,this.needsUpdate=!0}},vs=class{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,a){let i=this.getUtoTmapping(e);return this.getPoint(i,a)}getPoints(e=5){let a=[];for(let i=0;i<=e;i++)a.push(this.getPoint(i/e));return a}getSpacedPoints(e=5){let a=[];for(let i=0;i<=e;i++)a.push(this.getPointAt(i/e));return a}getLength(){let e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let a=[],i,o=this.getPoint(0),c=0;a.push(0);for(let d=1;d<=e;d++)i=this.getPoint(d/e),c+=i.distanceTo(o),a.push(c),o=i;return this.cacheArcLengths=a,a}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,a){let i=this.getLengths(),o=0,c=i.length,d;a?d=a:d=e*i[c-1];let g=0,b=c-1,j;for(;g<=b;)if(o=Math.floor(g+(b-g)/2),j=i[o]-d,j<0)g=o+1;else if(j>0)b=o-1;else{b=o;break}if(o=b,i[o]===d)return o/(c-1);let $=i[o],rt=i[o+1]-$,_e=(d-$)/rt;return(o+_e)/(c-1)}getTangent(e,a){let i=e-1e-4,o=e+1e-4;i<0&&(i=0),o>1&&(o=1);let c=this.getPoint(i),d=this.getPoint(o),g=a||(c.isVector2?new z$2:new _);return g.copy(d).sub(c).normalize(),g}getTangentAt(e,a){let i=this.getUtoTmapping(e);return this.getTangent(i,a)}computeFrenetFrames(e,a){let i=new _,o=[],c=[],d=[],g=new _,b=new ce$1;for(let st=0;st<=e;st++){let ut=st/e;o[st]=this.getTangentAt(ut,new _)}c[0]=new _,d[0]=new _;let j=Number.MAX_VALUE,$=Math.abs(o[0].x),rt=Math.abs(o[0].y),_e=Math.abs(o[0].z);$<=j&&(j=$,i.set(1,0,0)),rt<=j&&(j=rt,i.set(0,1,0)),_e<=j&&i.set(0,0,1),g.crossVectors(o[0],i).normalize(),c[0].crossVectors(o[0],g),d[0].crossVectors(o[0],c[0]);for(let st=1;st<=e;st++){if(c[st]=c[st-1].clone(),d[st]=d[st-1].clone(),g.crossVectors(o[st-1],o[st]),g.length()>Number.EPSILON){g.normalize();let ut=Math.acos(gi(o[st-1].dot(o[st]),-1,1));c[st].applyMatrix4(b.makeRotationAxis(g,ut))}d[st].crossVectors(o[st],c[st])}if(a===!0){let st=Math.acos(gi(c[0].dot(c[e]),-1,1));st/=e,o[0].dot(g.crossVectors(c[0],c[e]))>0&&(st=-st);for(let ut=1;ut<=e;ut++)c[ut].applyMatrix4(b.makeRotationAxis(o[ut],st*ut)),d[ut].crossVectors(o[ut],c[ut])}return{tangents:o,normals:c,binormals:d}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){let e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},_c=class extends vs{constructor(e=0,a=0,i=1,o=1,c=0,d=Math.PI*2,g=!1,b=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=a,this.xRadius=i,this.yRadius=o,this.aStartAngle=c,this.aEndAngle=d,this.aClockwise=g,this.aRotation=b}getPoint(e,a){let i=a||new z$2,o=Math.PI*2,c=this.aEndAngle-this.aStartAngle,d=Math.abs(c)<Number.EPSILON;for(;c<0;)c+=o;for(;c>o;)c-=o;c<Number.EPSILON&&(d?c=0:c=o),this.aClockwise===!0&&!d&&(c===o?c=-o:c=c-o);let g=this.aStartAngle+e*c,b=this.aX+this.xRadius*Math.cos(g),j=this.aY+this.yRadius*Math.sin(g);if(this.aRotation!==0){let $=Math.cos(this.aRotation),rt=Math.sin(this.aRotation),_e=b-this.aX,st=j-this.aY;b=_e*$-st*rt+this.aX,j=_e*rt+st*$+this.aY}return i.set(b,j)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){let e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},ow=class extends _c{constructor(e,a,i,o,c,d){super(e,a,i,i,o,c,d),this.isArcCurve=!0,this.type="ArcCurve"}};function Ow(){let e=0,a=0,i=0,o=0;function c(d,g,b,j){e=d,a=b,i=-3*d+3*g-2*b-j,o=2*d-2*g+b+j}return{initCatmullRom:function(d,g,b,j,$){c(g,b,$*(b-d),$*(j-g))},initNonuniformCatmullRom:function(d,g,b,j,$,rt,_e){let st=(g-d)/$-(b-d)/($+rt)+(b-g)/rt,ut=(b-g)/rt-(j-g)/(rt+_e)+(j-b)/_e;st*=rt,ut*=rt,c(g,b,st,ut)},calc:function(d){let g=d*d,b=g*d;return e+a*d+i*g+o*b}}}var sy=new _,NS=new Ow,FS=new Ow,kS=new Ow,aw=class extends vs{constructor(e=[],a=!1,i="centripetal",o=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=a,this.curveType=i,this.tension=o}getPoint(e,a=new _){let i=a,o=this.points,c=o.length,d=(c-(this.closed?0:1))*e,g=Math.floor(d),b=d-g;this.closed?g+=g>0?0:(Math.floor(Math.abs(g)/c)+1)*c:b===0&&g===c-1&&(g=c-2,b=1);let j,$;this.closed||g>0?j=o[(g-1)%c]:(sy.subVectors(o[0],o[1]).add(o[0]),j=sy);let rt=o[g%c],_e=o[(g+1)%c];if(this.closed||g+2<c?$=o[(g+2)%c]:(sy.subVectors(o[c-1],o[c-2]).add(o[c-1]),$=sy),this.curveType==="centripetal"||this.curveType==="chordal"){let st=this.curveType==="chordal"?.5:.25,ut=Math.pow(j.distanceToSquared(rt),st),gt=Math.pow(rt.distanceToSquared(_e),st),yt=Math.pow(_e.distanceToSquared($),st);gt<1e-4&&(gt=1),ut<1e-4&&(ut=gt),yt<1e-4&&(yt=gt),NS.initNonuniformCatmullRom(j.x,rt.x,_e.x,$.x,ut,gt,yt),FS.initNonuniformCatmullRom(j.y,rt.y,_e.y,$.y,ut,gt,yt),kS.initNonuniformCatmullRom(j.z,rt.z,_e.z,$.z,ut,gt,yt)}else this.curveType==="catmullrom"&&(NS.initCatmullRom(j.x,rt.x,_e.x,$.x,this.tension),FS.initCatmullRom(j.y,rt.y,_e.y,$.y,this.tension),kS.initCatmullRom(j.z,rt.z,_e.z,$.z,this.tension));return i.set(NS.calc(b),FS.calc(b),kS.calc(b)),i}copy(e){super.copy(e),this.points=[];for(let a=0,i=e.points.length;a<i;a++){let o=e.points[a];this.points.push(o.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){let e=super.toJSON();e.points=[];for(let a=0,i=this.points.length;a<i;a++){let o=this.points[a];e.points.push(o.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let a=0,i=e.points.length;a<i;a++){let o=e.points[a];this.points.push(new _().fromArray(o))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}};function EM(e,a,i,o,c){let d=(o-a)*.5,g=(c-i)*.5,b=e*e,j=e*b;return(2*i-2*o+d+g)*j+(-3*i+3*o-2*d-g)*b+d*e+i}function JG(e,a){let i=1-e;return i*i*a}function $G(e,a){return 2*(1-e)*e*a}function e4(e,a){return e*e*a}function bp(e,a,i,o){return JG(e,a)+$G(e,i)+e4(e,o)}function t4(e,a){let i=1-e;return i*i*i*a}function r4(e,a){let i=1-e;return 3*i*i*e*a}function i4(e,a){return 3*(1-e)*e*e*a}function n4(e,a){return e*e*e*a}function Sp(e,a,i,o,c){return t4(e,a)+r4(e,i)+i4(e,o)+n4(e,c)}var fn=class extends vs{constructor(e=new z$2,a=new z$2,i=new z$2,o=new z$2){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=a,this.v2=i,this.v3=o}getPoint(e,a=new z$2){let i=a,o=this.v0,c=this.v1,d=this.v2,g=this.v3;return i.set(Sp(e,o.x,c.x,d.x,g.x),Sp(e,o.y,c.y,d.y,g.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},Ec=class extends vs{constructor(e=new _,a=new _,i=new _,o=new _){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=a,this.v2=i,this.v3=o}getPoint(e,a=new _){let i=a,o=this.v0,c=this.v1,d=this.v2,g=this.v3;return i.set(Sp(e,o.x,c.x,d.x,g.x),Sp(e,o.y,c.y,d.y,g.y),Sp(e,o.z,c.z,d.z,g.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},pn=class extends vs{constructor(e=new z$2,a=new z$2){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=a}getPoint(e,a=new z$2){let i=a;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,a){return this.getPoint(e,a)}getTangent(e,a){let i=a||new z$2;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Pp=class extends vs{constructor(e=new _,a=new _){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=a}getPoint(e,a=new _){let i=a;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,a){return this.getPoint(e,a)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},is$1=class extends vs{constructor(a=new z$2,i=new z$2,o=new z$2){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=a,this.v1=i,this.v2=o}getPoint(a,i=new z$2){let o=i,c=this.v0,d=this.v1,g=this.v2;return o.set(bp(a,c.x,d.x,g.x),bp(a,c.y,d.y,g.y)),o}copy(a){return super.copy(a),this.v0.copy(a.v0),this.v1.copy(a.v1),this.v2.copy(a.v2),this}toJSON(){let a=super.toJSON();return a.v0=this.v0.toArray(),a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a}fromJSON(a){return super.fromJSON(a),this.v0.fromArray(a.v0),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this}},lw=class extends vs{constructor(e=new _,a=new _,i=new _){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=a,this.v2=i}getPoint(e,a=new _){let i=a,o=this.v0,c=this.v1,d=this.v2;return i.set(bp(e,o.x,c.x,d.x),bp(e,o.y,c.y,d.y),bp(e,o.z,c.z,d.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Yu=class extends vs{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,a=new z$2){let i=a,o=this.points,c=(o.length-1)*e,d=Math.floor(c),g=c-d,b=o[d===0?d:d-1],j=o[d],$=o[d>o.length-2?o.length-1:d+1],rt=o[d>o.length-3?o.length-1:d+2];return i.set(EM(g,b.x,j.x,$.x,rt.x),EM(g,b.y,j.y,$.y,rt.y)),i}copy(e){super.copy(e),this.points=[];for(let a=0,i=e.points.length;a<i;a++){let o=e.points[a];this.points.push(o.clone())}return this}toJSON(){let e=super.toJSON();e.points=[];for(let a=0,i=this.points.length;a<i;a++){let o=this.points[a];e.points.push(o.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let a=0,i=e.points.length;a<i;a++){let o=e.points[a];this.points.push(new z$2().fromArray(o))}return this}},s4=Object.freeze({__proto__:null,ArcCurve:ow,CatmullRomCurve3:aw,CubicBezierCurve:fn,CubicBezierCurve3:Ec,EllipseCurve:_c,LineCurve:pn,LineCurve3:Pp,QuadraticBezierCurve:is$1,QuadraticBezierCurve3:lw,SplineCurve:Yu}),Dp=class extends vs{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){let e=this.curves[0].getPoint(0),a=this.curves[this.curves.length-1].getPoint(1);e.equals(a)||this.curves.push(new pn(a,e))}getPoint(e,a){let i=e*this.getLength(),o=this.getCurveLengths(),c=0;for(;c<o.length;){if(o[c]>=i){let d=o[c]-i,g=this.curves[c],b=g.getLength(),j=b===0?0:1-d/b;return g.getPointAt(j,a)}c++}return null}getLength(){let e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let e=[],a=0;for(let i=0,o=this.curves.length;i<o;i++)a+=this.curves[i].getLength(),e.push(a);return this.cacheLengths=e,e}getSpacedPoints(e=40){let a=[];for(let i=0;i<=e;i++)a.push(this.getPoint(i/e));return this.autoClose&&a.push(a[0]),a}getPoints(e=12){let a=[],i;for(let o=0,c=this.curves;o<c.length;o++){let d=c[o],g=d.isEllipseCurve?e*2:d.isLineCurve||d.isLineCurve3?1:d.isSplineCurve?e*d.points.length:e,b=d.getPoints(g);for(let j=0;j<b.length;j++){let $=b[j];i&&i.equals($)||(a.push($),i=$)}}return this.autoClose&&a.length>1&&!a[a.length-1].equals(a[0])&&a.push(a[0]),a}copy(e){super.copy(e),this.curves=[];for(let a=0,i=e.curves.length;a<i;a++){let o=e.curves[a];this.curves.push(o.clone())}return this.autoClose=e.autoClose,this}toJSON(){let e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let a=0,i=this.curves.length;a<i;a++){let o=this.curves[a];e.curves.push(o.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let a=0,i=e.curves.length;a<i;a++){let o=e.curves[a];this.curves.push(new s4[o.type]().fromJSON(o))}return this}},Tc=class extends Dp{constructor(e){super(),this.type="Path",this.currentPoint=new z$2,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let a=1,i=e.length;a<i;a++)this.lineTo(e[a].x,e[a].y);return this}moveTo(e,a){return this.currentPoint.set(e,a),this}lineTo(e,a){let i=new pn(this.currentPoint.clone(),new z$2(e,a));return this.curves.push(i),this.currentPoint.set(e,a),this}quadraticCurveTo(e,a,i,o){let c=new is$1(this.currentPoint.clone(),new z$2(e,a),new z$2(i,o));return this.curves.push(c),this.currentPoint.set(i,o),this}bezierCurveTo(e,a,i,o,c,d){let g=new fn(this.currentPoint.clone(),new z$2(e,a),new z$2(i,o),new z$2(c,d));return this.curves.push(g),this.currentPoint.set(c,d),this}splineThru(e){let a=[this.currentPoint.clone()].concat(e),i=new Yu(a);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,a,i,o,c,d){let g=this.currentPoint.x,b=this.currentPoint.y;return this.absarc(e+g,a+b,i,o,c,d),this}absarc(e,a,i,o,c,d){return this.absellipse(e,a,i,i,o,c,d),this}ellipse(e,a,i,o,c,d,g,b){let j=this.currentPoint.x,$=this.currentPoint.y;return this.absellipse(e+j,a+$,i,o,c,d,g,b),this}absellipse(e,a,i,o,c,d,g,b){let j=new _c(e,a,i,o,c,d,g,b);if(this.curves.length>0){let rt=j.getPoint(0);rt.equals(this.currentPoint)||this.lineTo(rt.x,rt.y)}this.curves.push(j);let $=j.getPoint(1);return this.currentPoint.copy($),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){let e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}},Xu=class extends Pe{constructor(e=[new z$2(0,-.5),new z$2(.5,0),new z$2(0,.5)],a=12,i=0,o=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:a,phiStart:i,phiLength:o},a=Math.floor(a),o=gi(o,0,Math.PI*2);let c=[],d=[],g=[],b=[],j=[],$=1/a,rt=new _,_e=new z$2,st=new _,ut=new _,gt=new _,yt=0,Pt=0;for(let wt=0;wt<=e.length-1;wt++)switch(wt){case 0:yt=e[wt+1].x-e[wt].x,Pt=e[wt+1].y-e[wt].y,st.x=Pt*1,st.y=-yt,st.z=Pt*0,gt.copy(st),st.normalize(),b.push(st.x,st.y,st.z);break;case e.length-1:b.push(gt.x,gt.y,gt.z);break;default:yt=e[wt+1].x-e[wt].x,Pt=e[wt+1].y-e[wt].y,st.x=Pt*1,st.y=-yt,st.z=Pt*0,ut.copy(st),st.x+=gt.x,st.y+=gt.y,st.z+=gt.z,st.normalize(),b.push(st.x,st.y,st.z),gt.copy(ut)}for(let wt=0;wt<=a;wt++){let Ct=i+wt*$*o,At=Math.sin(Ct),Tt=Math.cos(Ct);for(let kt=0;kt<=e.length-1;kt++){rt.x=e[kt].x*At,rt.y=e[kt].y,rt.z=e[kt].x*Tt,d.push(rt.x,rt.y,rt.z),_e.x=wt/a,_e.y=kt/(e.length-1),g.push(_e.x,_e.y);let It=b[3*kt+0]*At,Lt=b[3*kt+1],Ft=b[3*kt+0]*Tt;j.push(It,Lt,Ft)}}for(let wt=0;wt<a;wt++)for(let Ct=0;Ct<e.length-1;Ct++){let At=Ct+wt*e.length,Tt=At,kt=At+e.length,It=At+e.length+1,Lt=At+1;c.push(Tt,kt,Lt),c.push(It,Lt,kt)}this.setIndex(c),this.setAttribute("position",new Te(d,3)),this.setAttribute("uv",new Te(g,2)),this.setAttribute("normal",new Te(j,3))}static fromJSON(e){return new Xu(e.points,e.segments,e.phiStart,e.phiLength)}},Mc=class extends Pe{constructor(e=1,a=1,i=1,o=32,c=1,d=!1,g=0,b=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:a,height:i,radialSegments:o,heightSegments:c,openEnded:d,thetaStart:g,thetaLength:b};let j=this;o=Math.floor(o),c=Math.floor(c);let $=[],rt=[],_e=[],st=[],ut=0,gt=[],yt=i/2,Pt=0;wt(),d===!1&&(e>0&&Ct(!0),a>0&&Ct(!1)),this.setIndex($),this.setAttribute("position",new Te(rt,3)),this.setAttribute("normal",new Te(_e,3)),this.setAttribute("uv",new Te(st,2));function wt(){let At=new _,Tt=new _,kt=0,It=(a-e)/i;for(let Lt=0;Lt<=c;Lt++){let Ft=[],Nt=Lt/c,Ht=Nt*(a-e)+e;for(let Gr=0;Gr<=o;Gr++){let hs=Gr/o,_s=hs*b+g,hn=Math.sin(_s),Qn=Math.cos(_s);Tt.x=Ht*hn,Tt.y=-Nt*i+yt,Tt.z=Ht*Qn,rt.push(Tt.x,Tt.y,Tt.z),At.set(hn,It,Qn).normalize(),_e.push(At.x,At.y,At.z),st.push(hs,1-Nt),Ft.push(ut++)}gt.push(Ft)}for(let Lt=0;Lt<o;Lt++)for(let Ft=0;Ft<c;Ft++){let Nt=gt[Ft][Lt],Ht=gt[Ft+1][Lt],Gr=gt[Ft+1][Lt+1],hs=gt[Ft][Lt+1];$.push(Nt,Ht,hs),$.push(Ht,Gr,hs),kt+=6}j.addGroup(Pt,kt,0),Pt+=kt}function Ct(At){let Tt=ut,kt=new z$2,It=new _,Lt=0,Ft=At===!0?e:a,Nt=At===!0?1:-1;for(let Gr=1;Gr<=o;Gr++)rt.push(0,yt*Nt,0),_e.push(0,Nt,0),st.push(.5,.5),ut++;let Ht=ut;for(let Gr=0;Gr<=o;Gr++){let hs=Gr/o*b+g,_s=Math.cos(hs),hn=Math.sin(hs);It.x=Ft*hn,It.y=yt*Nt,It.z=Ft*_s,rt.push(It.x,It.y,It.z),_e.push(0,Nt,0),kt.x=_s*.5+.5,kt.y=hn*.5*Nt+.5,st.push(kt.x,kt.y),ut++}for(let Gr=0;Gr<o;Gr++){let hs=Tt+Gr,_s=Ht+Gr;At===!0?$.push(_s,_s+1,hs):$.push(_s+1,_s,hs),Lt+=3}j.addGroup(Pt,Lt,At===!0?1:2),Pt+=Lt}}static fromJSON(e){return new Mc(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},dl=class extends Mc{constructor(e=1,a=1,i=32,o=1,c=!1,d=0,g=Math.PI*2){super(0,e,a,i,o,c,d,g),this.type="ConeGeometry",this.parameters={radius:e,height:a,radialSegments:i,heightSegments:o,openEnded:c,thetaStart:d,thetaLength:g}}static fromJSON(e){return new dl(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},Qu=class extends Pe{constructor(e=[],a=[],i=1,o=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:a,radius:i,detail:o};let c=[],d=[];g(o),j(i),$(),this.setAttribute("position",new Te(c,3)),this.setAttribute("normal",new Te(c.slice(),3)),this.setAttribute("uv",new Te(d,2)),o===0?this.computeVertexNormals():this.normalizeNormals();function g(wt){let Ct=new _,At=new _,Tt=new _;for(let kt=0;kt<a.length;kt+=3)st(a[kt+0],Ct),st(a[kt+1],At),st(a[kt+2],Tt),b(Ct,At,Tt,wt)}function b(wt,Ct,At,Tt){let kt=Tt+1,It=[];for(let Lt=0;Lt<=kt;Lt++){It[Lt]=[];let Ft=wt.clone().lerp(At,Lt/kt),Nt=Ct.clone().lerp(At,Lt/kt),Ht=kt-Lt;for(let Gr=0;Gr<=Ht;Gr++)Gr===0&&Lt===kt?It[Lt][Gr]=Ft:It[Lt][Gr]=Ft.clone().lerp(Nt,Gr/Ht)}for(let Lt=0;Lt<kt;Lt++)for(let Ft=0;Ft<2*(kt-Lt)-1;Ft++){let Nt=Math.floor(Ft/2);Ft%2===0?(_e(It[Lt][Nt+1]),_e(It[Lt+1][Nt]),_e(It[Lt][Nt])):(_e(It[Lt][Nt+1]),_e(It[Lt+1][Nt+1]),_e(It[Lt+1][Nt]))}}function j(wt){let Ct=new _;for(let At=0;At<c.length;At+=3)Ct.x=c[At+0],Ct.y=c[At+1],Ct.z=c[At+2],Ct.normalize().multiplyScalar(wt),c[At+0]=Ct.x,c[At+1]=Ct.y,c[At+2]=Ct.z}function $(){let wt=new _;for(let Ct=0;Ct<c.length;Ct+=3){wt.x=c[Ct+0],wt.y=c[Ct+1],wt.z=c[Ct+2];let At=yt(wt)/2/Math.PI+.5,Tt=Pt(wt)/Math.PI+.5;d.push(At,1-Tt)}ut(),rt()}function rt(){for(let wt=0;wt<d.length;wt+=6){let Ct=d[wt+0],At=d[wt+2],Tt=d[wt+4],kt=Math.max(Ct,At,Tt),It=Math.min(Ct,At,Tt);kt>.9&&It<.1&&(Ct<.2&&(d[wt+0]+=1),At<.2&&(d[wt+2]+=1),Tt<.2&&(d[wt+4]+=1))}}function _e(wt){c.push(wt.x,wt.y,wt.z)}function st(wt,Ct){let At=wt*3;Ct.x=e[At+0],Ct.y=e[At+1],Ct.z=e[At+2]}function ut(){let wt=new _,Ct=new _,At=new _,Tt=new _,kt=new z$2,It=new z$2,Lt=new z$2;for(let Ft=0,Nt=0;Ft<c.length;Ft+=9,Nt+=6){wt.set(c[Ft+0],c[Ft+1],c[Ft+2]),Ct.set(c[Ft+3],c[Ft+4],c[Ft+5]),At.set(c[Ft+6],c[Ft+7],c[Ft+8]),kt.set(d[Nt+0],d[Nt+1]),It.set(d[Nt+2],d[Nt+3]),Lt.set(d[Nt+4],d[Nt+5]),Tt.copy(wt).add(Ct).add(At).divideScalar(3);let Ht=yt(Tt);gt(kt,Nt+0,wt,Ht),gt(It,Nt+2,Ct,Ht),gt(Lt,Nt+4,At,Ht)}}function gt(wt,Ct,At,Tt){Tt<0&&wt.x===1&&(d[Ct]=wt.x-1),At.x===0&&At.z===0&&(d[Ct]=Tt/2/Math.PI+.5)}function yt(wt){return Math.atan2(wt.z,-wt.x)}function Pt(wt){return Math.atan2(-wt.y,Math.sqrt(wt.x*wt.x+wt.z*wt.z))}}static fromJSON(e){return new Qu(e.vertices,e.indices,e.radius,e.details)}},Ku=class extends Qu{constructor(e=1,a=0){let i=(1+Math.sqrt(5))/2,o=1/i,c=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-o,-i,0,-o,i,0,o,-i,0,o,i,-o,-i,0,-o,i,0,o,-i,0,o,i,0,-i,0,-o,i,0,-o,-i,0,o,i,0,o],d=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(c,d,e,a),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:a}}static fromJSON(e){return new Ku(e.radius,e.detail)}},xa=class extends Tc{constructor(e){super(e),this.uuid=ms(),this.type="Shape",this.holes=[]}getPointsHoles(e){let a=[];for(let i=0,o=this.holes.length;i<o;i++)a[i]=this.holes[i].getPoints(e);return a}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let a=0,i=e.holes.length;a<i;a++){let o=e.holes[a];this.holes.push(o.clone())}return this}toJSON(){let e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let a=0,i=this.holes.length;a<i;a++){let o=this.holes[a];e.holes.push(o.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let a=0,i=e.holes.length;a<i;a++){let o=e.holes[a];this.holes.push(new Tc().fromJSON(o))}return this}},o4={triangulate:function(e,a,i=2){let o=a&&a.length,c=o?a[0]*i:e.length,d=tC(e,0,c,i,!0),g=[];if(!d||d.next===d.prev)return g;let b,j,$,rt,_e,st,ut;if(o&&(d=h4(e,a,d,i)),e.length>80*i){b=$=e[0],j=rt=e[1];for(let gt=i;gt<c;gt+=i)_e=e[gt],st=e[gt+1],_e<b&&(b=_e),st<j&&(j=st),_e>$&&($=_e),st>rt&&(rt=st);ut=Math.max($-b,rt-j),ut=ut!==0?32767/ut:0}return Op(d,g,i,b,j,ut,0),g}};function tC(e,a,i,o,c){let d,g;if(c===w4(e,a,i,o)>0)for(d=a;d<i;d+=o)g=TM(d,e[d],e[d+1],g);else for(d=i-o;d>=a;d-=o)g=TM(d,e[d],e[d+1],g);return g&&Hy(g,g.next)&&(Rp(g),g=g.next),g}function Cc(e,a){if(!e)return e;a||(a=e);let i=e,o;do if(o=!1,!i.steiner&&(Hy(i,i.next)||jr$1(i.prev,i,i.next)===0)){if(Rp(i),i=a=i.prev,i===i.next)break;o=!0}else i=i.next;while(o||i!==a);return a}function Op(e,a,i,o,c,d,g){if(!e)return;!g&&d&&g4(e,o,c,d);let b=e,j,$;for(;e.prev!==e.next;){if(j=e.prev,$=e.next,d?l4(e,o,c,d):a4(e)){a.push(j.i/i|0),a.push(e.i/i|0),a.push($.i/i|0),Rp(e),e=$.next,b=$.next;continue}if(e=$,e===b){g?g===1?(e=c4(Cc(e),a,i),Op(e,a,i,o,c,d,2)):g===2&&u4(e,a,i,o,c,d):Op(Cc(e),a,i,o,c,d,1);break}}}function a4(e){let a=e.prev,i=e,o=e.next;if(jr$1(a,i,o)>=0)return!1;let c=a.x,d=i.x,g=o.x,b=a.y,j=i.y,$=o.y,rt=c<d?c<g?c:g:d<g?d:g,_e=b<j?b<$?b:$:j<$?j:$,st=c>d?c>g?c:g:d>g?d:g,ut=b>j?b>$?b:$:j>$?j:$,gt=o.next;for(;gt!==a;){if(gt.x>=rt&&gt.x<=st&&gt.y>=_e&&gt.y<=ut&&Uu(c,b,d,j,g,$,gt.x,gt.y)&&jr$1(gt.prev,gt,gt.next)>=0)return!1;gt=gt.next}return!0}function l4(e,a,i,o){let c=e.prev,d=e,g=e.next;if(jr$1(c,d,g)>=0)return!1;let b=c.x,j=d.x,$=g.x,rt=c.y,_e=d.y,st=g.y,ut=b<j?b<$?b:$:j<$?j:$,gt=rt<_e?rt<st?rt:st:_e<st?_e:st,yt=b>j?b>$?b:$:j>$?j:$,Pt=rt>_e?rt>st?rt:st:_e>st?_e:st,wt=cw(ut,gt,a,i,o),Ct=cw(yt,Pt,a,i,o),At=e.prevZ,Tt=e.nextZ;for(;At&&At.z>=wt&&Tt&&Tt.z<=Ct;){if(At.x>=ut&&At.x<=yt&&At.y>=gt&&At.y<=Pt&&At!==c&&At!==g&&Uu(b,rt,j,_e,$,st,At.x,At.y)&&jr$1(At.prev,At,At.next)>=0||(At=At.prevZ,Tt.x>=ut&&Tt.x<=yt&&Tt.y>=gt&&Tt.y<=Pt&&Tt!==c&&Tt!==g&&Uu(b,rt,j,_e,$,st,Tt.x,Tt.y)&&jr$1(Tt.prev,Tt,Tt.next)>=0))return!1;Tt=Tt.nextZ}for(;At&&At.z>=wt;){if(At.x>=ut&&At.x<=yt&&At.y>=gt&&At.y<=Pt&&At!==c&&At!==g&&Uu(b,rt,j,_e,$,st,At.x,At.y)&&jr$1(At.prev,At,At.next)>=0)return!1;At=At.prevZ}for(;Tt&&Tt.z<=Ct;){if(Tt.x>=ut&&Tt.x<=yt&&Tt.y>=gt&&Tt.y<=Pt&&Tt!==c&&Tt!==g&&Uu(b,rt,j,_e,$,st,Tt.x,Tt.y)&&jr$1(Tt.prev,Tt,Tt.next)>=0)return!1;Tt=Tt.nextZ}return!0}function c4(e,a,i){let o=e;do{let c=o.prev,d=o.next.next;!Hy(c,d)&&rC(c,o,o.next,d)&&Ip(c,d)&&Ip(d,c)&&(a.push(c.i/i|0),a.push(o.i/i|0),a.push(d.i/i|0),Rp(o),Rp(o.next),o=e=d),o=o.next}while(o!==e);return Cc(o)}function u4(e,a,i,o,c,d){let g=e;do{let b=g.next.next;for(;b!==g.prev;){if(g.i!==b.i&&x4(g,b)){let j=iC(g,b);g=Cc(g,g.next),j=Cc(j,j.next),Op(g,a,i,o,c,d,0),Op(j,a,i,o,c,d,0);return}b=b.next}g=g.next}while(g!==e)}function h4(e,a,i,o){let c=[],d,g,b,j,$;for(d=0,g=a.length;d<g;d++)b=a[d]*o,j=d<g-1?a[d+1]*o:e.length,$=tC(e,b,j,o,!1),$===$.next&&($.steiner=!0),c.push(v4($));for(c.sort(d4),d=0;d<c.length;d++)i=f4(c[d],i);return i}function d4(e,a){return e.x-a.x}function f4(e,a){let i=p4(e,a);if(!i)return a;let o=iC(i,e);return Cc(o,o.next),Cc(i,i.next)}function p4(e,a){let i=a,o=-1/0,c,d=e.x,g=e.y;do{if(g<=i.y&&g>=i.next.y&&i.next.y!==i.y){let st=i.x+(g-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(st<=d&&st>o&&(o=st,c=i.x<i.next.x?i:i.next,st===d))return c}i=i.next}while(i!==a);if(!c)return null;let b=c,j=c.x,$=c.y,rt=1/0,_e;i=c;do d>=i.x&&i.x>=j&&d!==i.x&&Uu(g<$?d:o,g,j,$,g<$?o:d,g,i.x,i.y)&&(_e=Math.abs(g-i.y)/(d-i.x),Ip(i,e)&&(_e<rt||_e===rt&&(i.x>c.x||i.x===c.x&&m4(c,i)))&&(c=i,rt=_e)),i=i.next;while(i!==b);return c}function m4(e,a){return jr$1(e.prev,e,a.prev)<0&&jr$1(a.next,e,e.next)<0}function g4(e,a,i,o){let c=e;do c.z===0&&(c.z=cw(c.x,c.y,a,i,o)),c.prevZ=c.prev,c.nextZ=c.next,c=c.next;while(c!==e);c.prevZ.nextZ=null,c.prevZ=null,y4(c)}function y4(e){let a,i,o,c,d,g,b,j,$=1;do{for(i=e,e=null,d=null,g=0;i;){for(g++,o=i,b=0,a=0;a<$&&(b++,o=o.nextZ,!!o);a++);for(j=$;b>0||j>0&&o;)b!==0&&(j===0||!o||i.z<=o.z)?(c=i,i=i.nextZ,b--):(c=o,o=o.nextZ,j--),d?d.nextZ=c:e=c,c.prevZ=d,d=c;i=o}d.nextZ=null,$*=2}while(g>1);return e}function cw(e,a,i,o,c){return e=(e-i)*c|0,a=(a-o)*c|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,a=(a|a<<8)&16711935,a=(a|a<<4)&252645135,a=(a|a<<2)&858993459,a=(a|a<<1)&1431655765,e|a<<1}function v4(e){let a=e,i=e;do(a.x<i.x||a.x===i.x&&a.y<i.y)&&(i=a),a=a.next;while(a!==e);return i}function Uu(e,a,i,o,c,d,g,b){return(c-g)*(a-b)>=(e-g)*(d-b)&&(e-g)*(o-b)>=(i-g)*(a-b)&&(i-g)*(d-b)>=(c-g)*(o-b)}function x4(e,a){return e.next.i!==a.i&&e.prev.i!==a.i&&!b4$1(e,a)&&(Ip(e,a)&&Ip(a,e)&&S4(e,a)&&(jr$1(e.prev,e,a.prev)||jr$1(e,a.prev,a))||Hy(e,a)&&jr$1(e.prev,e,e.next)>0&&jr$1(a.prev,a,a.next)>0)}function jr$1(e,a,i){return(a.y-e.y)*(i.x-a.x)-(a.x-e.x)*(i.y-a.y)}function Hy(e,a){return e.x===a.x&&e.y===a.y}function rC(e,a,i,o){let c=ay(jr$1(e,a,i)),d=ay(jr$1(e,a,o)),g=ay(jr$1(i,o,e)),b=ay(jr$1(i,o,a));return!!(c!==d&&g!==b||c===0&&oy(e,i,a)||d===0&&oy(e,o,a)||g===0&&oy(i,e,o)||b===0&&oy(i,a,o))}function oy(e,a,i){return a.x<=Math.max(e.x,i.x)&&a.x>=Math.min(e.x,i.x)&&a.y<=Math.max(e.y,i.y)&&a.y>=Math.min(e.y,i.y)}function ay(e){return e>0?1:e<0?-1:0}function b4$1(e,a){let i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==a.i&&i.next.i!==a.i&&rC(i,i.next,e,a))return!0;i=i.next}while(i!==e);return!1}function Ip(e,a){return jr$1(e.prev,e,e.next)<0?jr$1(e,a,e.next)>=0&&jr$1(e,e.prev,a)>=0:jr$1(e,a,e.prev)<0||jr$1(e,e.next,a)<0}function S4(e,a){let i=e,o=!1,c=(e.x+a.x)/2,d=(e.y+a.y)/2;do i.y>d!=i.next.y>d&&i.next.y!==i.y&&c<(i.next.x-i.x)*(d-i.y)/(i.next.y-i.y)+i.x&&(o=!o),i=i.next;while(i!==e);return o}function iC(e,a){let i=new uw(e.i,e.x,e.y),o=new uw(a.i,a.x,a.y),c=e.next,d=a.prev;return e.next=a,a.prev=e,i.next=c,c.prev=i,o.next=i,i.prev=o,d.next=o,o.prev=d,o}function TM(e,a,i,o){let c=new uw(e,a,i);return o?(c.next=o.next,c.prev=o,o.next.prev=c,o.next=c):(c.prev=c,c.next=c),c}function Rp(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function uw(e,a,i){this.i=e,this.x=a,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function w4(e,a,i,o){let c=0;for(let d=a,g=i-o;d<i;d+=o)c+=(e[g]-e[d])*(e[d+1]+e[g+1]),g=d;return c}var Zu=class{static area(e){let a=e.length,i=0;for(let o=a-1,c=0;c<a;o=c++)i+=e[o].x*e[c].y-e[c].x*e[o].y;return i*.5}static isClockWise(e){return Zu.area(e)<0}static triangulateShape(e,a){let i=[],o=[],c=[];MM(e),CM(i,e);let d=e.length;a.forEach(MM);for(let b=0;b<a.length;b++)o.push(d),d+=a[b].length,CM(i,a[b]);let g=o4.triangulate(i,o);for(let b=0;b<g.length;b+=3)c.push(g.slice(b,b+3));return c}};function MM(e){let a=e.length;a>2&&e[a-1].equals(e[0])&&e.pop()}function CM(e,a){for(let i=0;i<a.length;i++)e.push(a[i].x),e.push(a[i].y)}var Ju=class extends Qu{constructor(e=1,a=0){let i=(1+Math.sqrt(5))/2,o=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],c=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(o,c,e,a),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:a}}static fromJSON(e){return new Ju(e.radius,e.detail)}},Ys=class extends Pe{constructor(e=1,a=32,i=16,o=0,c=Math.PI*2,d=0,g=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:a,heightSegments:i,phiStart:o,phiLength:c,thetaStart:d,thetaLength:g},a=Math.max(3,Math.floor(a)),i=Math.max(2,Math.floor(i));let b=Math.min(d+g,Math.PI),j=0,$=[],rt=new _,_e=new _,st=[],ut=[],gt=[],yt=[];for(let Pt=0;Pt<=i;Pt++){let wt=[],Ct=Pt/i,At=0;Pt==0&&d==0?At=.5/a:Pt==i&&b==Math.PI&&(At=-.5/a);for(let Tt=0;Tt<=a;Tt++){let kt=Tt/a;rt.x=-e*Math.cos(o+kt*c)*Math.sin(d+Ct*g),rt.y=e*Math.cos(d+Ct*g),rt.z=e*Math.sin(o+kt*c)*Math.sin(d+Ct*g),ut.push(rt.x,rt.y,rt.z),_e.copy(rt).normalize(),gt.push(_e.x,_e.y,_e.z),yt.push(kt+At,1-Ct),wt.push(j++)}$.push(wt)}for(let Pt=0;Pt<i;Pt++)for(let wt=0;wt<a;wt++){let Ct=$[Pt][wt+1],At=$[Pt][wt],Tt=$[Pt+1][wt],kt=$[Pt+1][wt+1];(Pt!==0||d>0)&&st.push(Ct,At,kt),(Pt!==i-1||b<Math.PI)&&st.push(At,Tt,kt)}this.setIndex(st),this.setAttribute("position",new Te(ut,3)),this.setAttribute("normal",new Te(gt,3)),this.setAttribute("uv",new Te(yt,2))}static fromJSON(e){return new Ys(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}},$u=class extends Pe{constructor(e=1,a=.4,i=12,o=48,c=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:a,radialSegments:i,tubularSegments:o,arc:c},i=Math.floor(i),o=Math.floor(o);let d=[],g=[],b=[],j=[],$=new _,rt=new _,_e=new _;for(let st=0;st<=i;st++)for(let ut=0;ut<=o;ut++){let gt=ut/o*c,yt=st/i*Math.PI*2;rt.x=(e+a*Math.cos(yt))*Math.cos(gt),rt.y=(e+a*Math.cos(yt))*Math.sin(gt),rt.z=a*Math.sin(yt),g.push(rt.x,rt.y,rt.z),$.x=e*Math.cos(gt),$.y=e*Math.sin(gt),_e.subVectors(rt,$).normalize(),b.push(_e.x,_e.y,_e.z),j.push(ut/o),j.push(st/i)}for(let st=1;st<=i;st++)for(let ut=1;ut<=o;ut++){let gt=(o+1)*st+ut-1,yt=(o+1)*(st-1)+ut-1,Pt=(o+1)*(st-1)+ut,wt=(o+1)*st+ut;d.push(gt,yt,wt),d.push(yt,Pt,wt)}this.setIndex(d),this.setAttribute("position",new Te(g,3)),this.setAttribute("normal",new Te(b,3)),this.setAttribute("uv",new Te(j,2))}static fromJSON(e){return new $u(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}},eh=class extends Pe{constructor(e=1,a=.4,i=64,o=8,c=2,d=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:a,tubularSegments:i,radialSegments:o,p:c,q:d},i=Math.floor(i),o=Math.floor(o);let g=[],b=[],j=[],$=[],rt=new _,_e=new _,st=new _,ut=new _,gt=new _,yt=new _,Pt=new _;for(let Ct=0;Ct<=i;++Ct){let At=Ct/i*c*Math.PI*2;wt(At,c,d,e,st),wt(At+.01,c,d,e,ut),yt.subVectors(ut,st),Pt.addVectors(ut,st),gt.crossVectors(yt,Pt),Pt.crossVectors(gt,yt),gt.normalize(),Pt.normalize();for(let Tt=0;Tt<=o;++Tt){let kt=Tt/o*Math.PI*2,It=-a*Math.cos(kt),Lt=a*Math.sin(kt);rt.x=st.x+(It*Pt.x+Lt*gt.x),rt.y=st.y+(It*Pt.y+Lt*gt.y),rt.z=st.z+(It*Pt.z+Lt*gt.z),b.push(rt.x,rt.y,rt.z),_e.subVectors(rt,st).normalize(),j.push(_e.x,_e.y,_e.z),$.push(Ct/i),$.push(Tt/o)}}for(let Ct=1;Ct<=i;Ct++)for(let At=1;At<=o;At++){let Tt=(o+1)*(Ct-1)+(At-1),kt=(o+1)*Ct+(At-1),It=(o+1)*Ct+At,Lt=(o+1)*(Ct-1)+At;g.push(Tt,kt,Lt),g.push(kt,It,Lt)}this.setIndex(g),this.setAttribute("position",new Te(b,3)),this.setAttribute("normal",new Te(j,3)),this.setAttribute("uv",new Te($,2));function wt(Ct,At,Tt,kt,It){let Lt=Math.cos(Ct),Ft=Math.sin(Ct),Nt=Tt/At*Ct,Ht=Math.cos(Nt);It.x=kt*(2+Ht)*.5*Lt,It.y=kt*(2+Ht)*Ft*.5,It.z=kt*Math.sin(Nt)*.5}}static fromJSON(e){return new eh(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}};function nl(e,a,i){return nC(e)?new e.constructor(e.subarray(a,i!==void 0?i:e.length)):e.slice(a,i)}function ly(e,a,i){return!e||!i&&e.constructor===a?e:typeof a.BYTES_PER_ELEMENT=="number"?new a(e):Array.prototype.slice.call(e)}function nC(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function A4(e){function a(c,d){return e[c]-e[d]}let i=e.length,o=new Array(i);for(let c=0;c!==i;++c)o[c]=c;return o.sort(a),o}function PM(e,a,i){let o=e.length,c=new e.constructor(o);for(let d=0,g=0;g!==o;++d){let b=i[d]*a;for(let j=0;j!==a;++j)c[g++]=e[b+j]}return c}function sC(e,a,i,o){let c=1,d=e[0];for(;d!==void 0&&d[o]===void 0;)d=e[c++];if(d===void 0)return;let g=d[o];if(g!==void 0)if(Array.isArray(g))do g=d[o],g!==void 0&&(a.push(d.time),i.push.apply(i,g)),d=e[c++];while(d!==void 0);else if(g.toArray!==void 0)do g=d[o],g!==void 0&&(a.push(d.time),g.toArray(i,i.length)),d=e[c++];while(d!==void 0);else do g=d[o],g!==void 0&&(a.push(d.time),i.push(g)),d=e[c++];while(d!==void 0)}var th=class{constructor(e,a,i,o){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=o!==void 0?o:new a.constructor(i),this.sampleValues=a,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){let a=this.parameterPositions,i=this._cachedIndex,o=a[i],c=a[i-1];e:{t:{let d;i:{r:if(!(e<o)){for(let g=i+2;;){if(o===void 0){if(e<c)break r;return i=a.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===g)break;if(c=o,o=a[++i],e<o)break t}d=a.length;break i}if(!(e>=c)){let g=a[1];e<g&&(i=2,c=g);for(let b=i-2;;){if(c===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===b)break;if(o=c,c=a[--i-1],e>=c)break t}d=i,i=0;break i}break e}for(;i<d;){let g=i+d>>>1;e<a[g]?d=g:i=g+1}if(o=a[i],c=a[i-1],c===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(o===void 0)return i=a.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,c,o)}return this.interpolate_(i,c,e,o)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let a=this.resultBuffer,i=this.sampleValues,o=this.valueSize,c=e*o;for(let d=0;d!==o;++d)a[d]=i[c+d];return a}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},hw=class extends th{constructor(e,a,i,o){super(e,a,i,o),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ku,endingEnd:ku}}intervalChanged_(e,a,i){let o=this.parameterPositions,c=e-2,d=e+1,g=o[c],b=o[d];if(g===void 0)switch(this.getSettings_().endingStart){case Vu:c=e,g=2*a-i;break;case my:c=o.length-2,g=a+o[c]-o[c+1];break;default:c=e,g=i}if(b===void 0)switch(this.getSettings_().endingEnd){case Vu:d=e,b=2*i-a;break;case my:d=1,b=i+o[1]-o[0];break;default:d=e-1,b=a}let j=(i-a)*.5,$=this.valueSize;this._weightPrev=j/(a-g),this._weightNext=j/(b-i),this._offsetPrev=c*$,this._offsetNext=d*$}interpolate_(e,a,i,o){let c=this.resultBuffer,d=this.sampleValues,g=this.valueSize,b=e*g,j=b-g,$=this._offsetPrev,rt=this._offsetNext,_e=this._weightPrev,st=this._weightNext,ut=(i-a)/(o-a),gt=ut*ut,yt=gt*ut,Pt=-_e*yt+2*_e*gt-_e*ut,wt=(1+_e)*yt+(-1.5-2*_e)*gt+(-.5+_e)*ut+1,Ct=(-1-st)*yt+(1.5+st)*gt+.5*ut,At=st*yt-st*gt;for(let Tt=0;Tt!==g;++Tt)c[Tt]=Pt*d[$+Tt]+wt*d[j+Tt]+Ct*d[b+Tt]+At*d[rt+Tt];return c}},Cy=class extends th{constructor(e,a,i,o){super(e,a,i,o)}interpolate_(e,a,i,o){let c=this.resultBuffer,d=this.sampleValues,g=this.valueSize,b=e*g,j=b-g,$=(i-a)/(o-a),rt=1-$;for(let _e=0;_e!==g;++_e)c[_e]=d[j+_e]*rt+d[b+_e]*$;return c}},dw=class extends th{constructor(e,a,i,o){super(e,a,i,o)}interpolate_(e){return this.copySampleValue_(e-1)}},xs=class{constructor(e,a,i,o){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(a===void 0||a.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=ly(a,this.TimeBufferType),this.values=ly(i,this.ValueBufferType),this.setInterpolation(o||this.DefaultInterpolation)}static toJSON(e){let a=e.constructor,i;if(a.toJSON!==this.toJSON)i=a.toJSON(e);else{i={name:e.name,times:ly(e.times,Array),values:ly(e.values,Array)};let o=e.getInterpolation();o!==e.DefaultInterpolation&&(i.interpolation=o)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new dw(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Cy(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new hw(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let a;switch(e){case fy:a=this.InterpolantFactoryMethodDiscrete;break;case py:a=this.InterpolantFactoryMethodLinear;break;case uS:a=this.InterpolantFactoryMethodSmooth;break}if(a===void 0){let i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=a,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return fy;case this.InterpolantFactoryMethodLinear:return py;case this.InterpolantFactoryMethodSmooth:return uS}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){let a=this.times;for(let i=0,o=a.length;i!==o;++i)a[i]+=e}return this}scale(e){if(e!==1){let a=this.times;for(let i=0,o=a.length;i!==o;++i)a[i]*=e}return this}trim(e,a){let i=this.times,o=i.length,c=0,d=o-1;for(;c!==o&&i[c]<e;)++c;for(;d!==-1&&i[d]>a;)--d;if(++d,c!==0||d!==o){c>=d&&(d=Math.max(d,1),c=d-1);let g=this.getValueSize();this.times=nl(i,c,d),this.values=nl(this.values,c*g,d*g)}return this}validate(){let e=!0,a=this.getValueSize();a-Math.floor(a)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);let i=this.times,o=this.values,c=i.length;c===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let d=null;for(let g=0;g!==c;g++){let b=i[g];if(typeof b=="number"&&isNaN(b)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,g,b),e=!1;break}if(d!==null&&d>b){console.error("THREE.KeyframeTrack: Out of order keys.",this,g,b,d),e=!1;break}d=b}if(o!==void 0&&nC(o))for(let g=0,b=o.length;g!==b;++g){let j=o[g];if(isNaN(j)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,g,j),e=!1;break}}return e}optimize(){let e=nl(this.times),a=nl(this.values),i=this.getValueSize(),o=this.getInterpolation()===uS,c=e.length-1,d=1;for(let g=1;g<c;++g){let b=!1,j=e[g],$=e[g+1];if(j!==$&&(g!==1||j!==e[0]))if(o)b=!0;else{let rt=g*i,_e=rt-i,st=rt+i;for(let ut=0;ut!==i;++ut){let gt=a[rt+ut];if(gt!==a[_e+ut]||gt!==a[st+ut]){b=!0;break}}}if(b){if(g!==d){e[d]=e[g];let rt=g*i,_e=d*i;for(let st=0;st!==i;++st)a[_e+st]=a[rt+st]}++d}}if(c>0){e[d]=e[c];for(let g=c*i,b=d*i,j=0;j!==i;++j)a[b+j]=a[g+j];++d}return d!==e.length?(this.times=nl(e,0,d),this.values=nl(a,0,d*i)):(this.times=e,this.values=a),this}clone(){let e=nl(this.times,0),a=nl(this.values,0),i=this.constructor,o=new i(this.name,e,a);return o.createInterpolant=this.createInterpolant,o}};xs.prototype.TimeBufferType=Float32Array;xs.prototype.ValueBufferType=Float32Array;xs.prototype.DefaultInterpolation=py;var fl=class extends xs{};fl.prototype.ValueTypeName="bool";fl.prototype.ValueBufferType=Array;fl.prototype.DefaultInterpolation=fy;fl.prototype.InterpolantFactoryMethodLinear=void 0;fl.prototype.InterpolantFactoryMethodSmooth=void 0;var Py=class extends xs{};Py.prototype.ValueTypeName="color";var rh=class extends xs{};rh.prototype.ValueTypeName="number";var fw=class extends th{constructor(e,a,i,o){super(e,a,i,o)}interpolate_(e,a,i,o){let c=this.resultBuffer,d=this.sampleValues,g=this.valueSize,b=(i-a)/(o-a),j=e*g;for(let $=j+g;j!==$;j+=4)Qe.slerpFlat(c,0,d,j-g,d,j,b);return c}},Pc=class extends xs{InterpolantFactoryMethodLinear(e){return new fw(this.times,this.values,this.getValueSize(),e)}};Pc.prototype.ValueTypeName="quaternion";Pc.prototype.DefaultInterpolation=py;Pc.prototype.InterpolantFactoryMethodSmooth=void 0;var pl=class extends xs{};pl.prototype.ValueTypeName="string";pl.prototype.ValueBufferType=Array;pl.prototype.DefaultInterpolation=fy;pl.prototype.InterpolantFactoryMethodLinear=void 0;pl.prototype.InterpolantFactoryMethodSmooth=void 0;var ih=class extends xs{};ih.prototype.ValueTypeName="vector";var nh=class{constructor(e,a=-1,i,o=Tw){this.name=e,this.tracks=i,this.duration=a,this.blendMode=o,this.uuid=ms(),this.duration<0&&this.resetDuration()}static parse(e){let a=[],i=e.tracks,o=1/(e.fps||1);for(let d=0,g=i.length;d!==g;++d)a.push(E4(i[d]).scale(o));let c=new this(e.name,e.duration,a,e.blendMode);return c.uuid=e.uuid,c}static toJSON(e){let a=[],i=e.tracks,o={name:e.name,duration:e.duration,tracks:a,uuid:e.uuid,blendMode:e.blendMode};for(let c=0,d=i.length;c!==d;++c)a.push(xs.toJSON(i[c]));return o}static CreateFromMorphTargetSequence(e,a,i,o){let c=a.length,d=[];for(let g=0;g<c;g++){let b=[],j=[];b.push((g+c-1)%c,g,(g+1)%c),j.push(0,1,0);let $=A4(b);b=PM(b,1,$),j=PM(j,1,$),!o&&b[0]===0&&(b.push(c),j.push(j[0])),d.push(new rh(".morphTargetInfluences["+a[g].name+"]",b,j).scale(1/i))}return new this(e,-1,d)}static findByName(e,a){let i=e;if(!Array.isArray(e)){let o=e;i=o.geometry&&o.geometry.animations||o.animations}for(let o=0;o<i.length;o++)if(i[o].name===a)return i[o];return null}static CreateClipsFromMorphTargetSequences(e,a,i){let o={},c=/^([\w-]*?)([\d]+)$/;for(let g=0,b=e.length;g<b;g++){let j=e[g],$=j.name.match(c);if($&&$.length>1){let rt=$[1],_e=o[rt];_e||(o[rt]=_e=[]),_e.push(j)}}let d=[];for(let g in o)d.push(this.CreateFromMorphTargetSequence(g,o[g],a,i));return d}static parseAnimation(e,a){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;let i=function($,rt,_e,st,ut){if(_e.length!==0){let gt=[],yt=[];sC(_e,gt,yt,st),gt.length!==0&&ut.push(new $(rt,gt,yt))}},o=[],c=e.name||"default",d=e.fps||30,g=e.blendMode,b=e.length||-1,j=e.hierarchy||[];for(let $=0;$<j.length;$++){let rt=j[$].keys;if(!(!rt||rt.length===0))if(rt[0].morphTargets){let _e={},st;for(st=0;st<rt.length;st++)if(rt[st].morphTargets)for(let ut=0;ut<rt[st].morphTargets.length;ut++)_e[rt[st].morphTargets[ut]]=-1;for(let ut in _e){let gt=[],yt=[];for(let Pt=0;Pt!==rt[st].morphTargets.length;++Pt){let wt=rt[st];gt.push(wt.time),yt.push(wt.morphTarget===ut?1:0)}o.push(new rh(".morphTargetInfluence["+ut+"]",gt,yt))}b=_e.length*d}else{let _e=".bones["+a[$].name+"]";i(ih,_e+".position",rt,"pos",o),i(Pc,_e+".quaternion",rt,"rot",o),i(ih,_e+".scale",rt,"scl",o)}}return o.length===0?null:new this(c,b,o,g)}resetDuration(){let e=this.tracks,a=0;for(let i=0,o=e.length;i!==o;++i){let c=this.tracks[i];a=Math.max(a,c.times[c.times.length-1])}return this.duration=a,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let a=0;a<this.tracks.length;a++)e=e&&this.tracks[a].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){let e=[];for(let a=0;a<this.tracks.length;a++)e.push(this.tracks[a].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}};function _4(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return rh;case"vector":case"vector2":case"vector3":case"vector4":return ih;case"color":return Py;case"quaternion":return Pc;case"bool":case"boolean":return fl;case"string":return pl}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}function E4(e){if(e.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");let a=_4(e.type);if(e.times===void 0){let i=[],o=[];sC(e.keys,i,o,"value"),e.times=i,e.values=o}return a.parse!==void 0?a.parse(e):new a(e.name,e.times,e.values,e.interpolation)}var Dy={enabled:!1,files:{},add:function(e,a){this.enabled!==!1&&(this.files[e]=a)},get:function(e){if(this.enabled!==!1)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},Lp=class{constructor(e,a,i){let o=this,c=!1,d=0,g=0,b,j=[];this.onStart=void 0,this.onLoad=e,this.onProgress=a,this.onError=i,this.itemStart=function($){g++,c===!1&&o.onStart!==void 0&&o.onStart($,d,g),c=!0},this.itemEnd=function($){d++,o.onProgress!==void 0&&o.onProgress($,d,g),d===g&&(c=!1,o.onLoad!==void 0&&o.onLoad())},this.itemError=function($){o.onError!==void 0&&o.onError($)},this.resolveURL=function($){return b?b($):$},this.setURLModifier=function($){return b=$,this},this.addHandler=function($,rt){return j.push($,rt),this},this.removeHandler=function($){let rt=j.indexOf($);return rt!==-1&&j.splice(rt,2),this},this.getHandler=function($){for(let rt=0,_e=j.length;rt<_e;rt+=2){let st=j[rt],ut=j[rt+1];if(st.global&&(st.lastIndex=0),st.test($))return ut}return null}}},T4=new Lp,ml=class{constructor(e){this.manager=e!==void 0?e:T4,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,a){let i=this;return new Promise(function(o,c){i.load(e,o,a,c)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}},ma={},pw=class extends Error{constructor(e,a){super(e),this.response=a}},sh=class extends ml{constructor(e){super(e)}load(e,a,i,o){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let c=Dy.get(e);if(c!==void 0)return this.manager.itemStart(e),setTimeout(()=>{a&&a(c),this.manager.itemEnd(e)},0),c;if(ma[e]!==void 0){ma[e].push({onLoad:a,onProgress:i,onError:o});return}ma[e]=[],ma[e].push({onLoad:a,onProgress:i,onError:o});let d=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),g=this.mimeType,b=this.responseType;fetch(d).then(j=>{if(j.status===200||j.status===0){if(j.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||j.body===void 0||j.body.getReader===void 0)return j;let $=ma[e],rt=j.body.getReader(),_e=j.headers.get("Content-Length")||j.headers.get("X-File-Size"),st=_e?parseInt(_e):0,ut=st!==0,gt=0,yt=new ReadableStream({start(Pt){wt();function wt(){rt.read().then(({done:Ct,value:At})=>{if(Ct)Pt.close();else{gt+=At.byteLength;let Tt=new ProgressEvent("progress",{lengthComputable:ut,loaded:gt,total:st});for(let kt=0,It=$.length;kt<It;kt++){let Lt=$[kt];Lt.onProgress&&Lt.onProgress(Tt)}Pt.enqueue(At),wt()}})}}});return new Response(yt)}else throw new pw(`fetch for "${j.url}" responded with ${j.status}: ${j.statusText}`,j)}).then(j=>{switch(b){case"arraybuffer":return j.arrayBuffer();case"blob":return j.blob();case"document":return j.text().then($=>new DOMParser().parseFromString($,g));case"json":return j.json();default:if(g===void 0)return j.text();{let $=/charset="?([^;"\s]*)"?/i.exec(g),rt=$&&$[1]?$[1].toLowerCase():void 0,_e=new TextDecoder(rt);return j.arrayBuffer().then(st=>_e.decode(st))}}}).then(j=>{Dy.add(e,j);let $=ma[e];delete ma[e];for(let rt=0,_e=$.length;rt<_e;rt++){let st=$[rt];st.onLoad&&st.onLoad(j)}}).catch(j=>{let $=ma[e];if($===void 0)throw this.manager.itemError(e),j;delete ma[e];for(let rt=0,_e=$.length;rt<_e;rt++){let st=$[rt];st.onError&&st.onError(j)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}},mw=class extends ml{constructor(e){super(e)}load(e,a,i,o){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let c=this,d=Dy.get(e);if(d!==void 0)return c.manager.itemStart(e),setTimeout(function(){a&&a(d),c.manager.itemEnd(e)},0),d;let g=_p("img");function b(){$(),Dy.add(e,this),a&&a(this),c.manager.itemEnd(e)}function j(rt){$(),o&&o(rt),c.manager.itemError(e),c.manager.itemEnd(e)}function $(){g.removeEventListener("load",b,!1),g.removeEventListener("error",j,!1)}return g.addEventListener("load",b,!1),g.addEventListener("error",j,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(g.crossOrigin=this.crossOrigin),c.manager.itemStart(e),g.src=e,g}},Oy=class extends ml{constructor(e){super(e)}load(e,a,i,o){let c=new tr,d=new mw(this.manager);return d.setCrossOrigin(this.crossOrigin),d.setPath(this.path),d.load(e,function(g){c.image=g,c.needsUpdate=!0,a!==void 0&&a(c)},i,o),c}},gl=class extends _t{constructor(e,a=1){super(),this.isLight=!0,this.type="Light",this.color=new We(e),this.intensity=a}dispose(){}copy(e,a){return super.copy(e,a),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let a=super.toJSON(e);return a.object.color=this.color.getHex(),a.object.intensity=this.intensity,this.groundColor!==void 0&&(a.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(a.object.distance=this.distance),this.angle!==void 0&&(a.object.angle=this.angle),this.decay!==void 0&&(a.object.decay=this.decay),this.penumbra!==void 0&&(a.object.penumbra=this.penumbra),this.shadow!==void 0&&(a.object.shadow=this.shadow.toJSON()),a}},Iy=class extends gl{constructor(e,a,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(_t.DEFAULT_UP),this.updateMatrix(),this.groundColor=new We(a)}copy(e,a){return super.copy(e,a),this.groundColor.copy(e.groundColor),this}},VS=new ce$1,DM=new _,OM=new _,Bp=class{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new z$2(512,512),this.map=null,this.mapPass=null,this.matrix=new ce$1,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Tp,this._frameExtents=new z$2(1,1),this._viewportCount=1,this._viewports=[new Ke(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let a=this.camera,i=this.matrix;DM.setFromMatrixPosition(e.matrixWorld),a.position.copy(DM),OM.setFromMatrixPosition(e.target.matrixWorld),a.lookAt(OM),a.updateMatrixWorld(),VS.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),this._frustum.setFromProjectionMatrix(VS),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(VS)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}},gw=class extends Bp{constructor(){super(new ri(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){let a=this.camera,i=Ap*2*e.angle*this.focus,o=this.mapSize.width/this.mapSize.height,c=e.distance||a.far;(i!==a.fov||o!==a.aspect||c!==a.far)&&(a.fov=i,a.aspect=o,a.far=c,a.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}},Ry=class extends gl{constructor(e,a,i=0,o=Math.PI/3,c=0,d=2){super(e,a),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(_t.DEFAULT_UP),this.updateMatrix(),this.target=new _t,this.distance=i,this.angle=o,this.penumbra=c,this.decay=d,this.map=null,this.shadow=new gw}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,a){return super.copy(e,a),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},IM=new ce$1,pp=new _,zS=new _,yw=class extends Bp{constructor(){super(new ri(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new z$2(4,2),this._viewportCount=6,this._viewports=[new Ke(2,1,1,1),new Ke(0,1,1,1),new Ke(3,1,1,1),new Ke(1,1,1,1),new Ke(3,0,1,1),new Ke(1,0,1,1)],this._cubeDirections=[new _(1,0,0),new _(-1,0,0),new _(0,0,1),new _(0,0,-1),new _(0,1,0),new _(0,-1,0)],this._cubeUps=[new _(0,1,0),new _(0,1,0),new _(0,1,0),new _(0,1,0),new _(0,0,1),new _(0,0,-1)]}updateMatrices(e,a=0){let i=this.camera,o=this.matrix,c=e.distance||i.far;c!==i.far&&(i.far=c,i.updateProjectionMatrix()),pp.setFromMatrixPosition(e.matrixWorld),i.position.copy(pp),zS.copy(i.position),zS.add(this._cubeDirections[a]),i.up.copy(this._cubeUps[a]),i.lookAt(zS),i.updateMatrixWorld(),o.makeTranslation(-pp.x,-pp.y,-pp.z),IM.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(IM)}},Ly=class extends gl{constructor(e,a,i=0,o=2){super(e,a),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=o,this.shadow=new yw}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,a){return super.copy(e,a),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}},vw=class extends Bp{constructor(){super(new Wu(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},By=class extends gl{constructor(e,a){super(e,a),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(_t.DEFAULT_UP),this.updateMatrix(),this.target=new _t,this.shadow=new vw}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},Np=class extends Pe{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){let e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}},oh=class extends ml{constructor(e){super(e)}load(e,a,i,o){let c=this,d=new sh(c.manager);d.setPath(c.path),d.setRequestHeader(c.requestHeader),d.setWithCredentials(c.withCredentials),d.load(e,function(g){try{a(c.parse(JSON.parse(g)))}catch(b){o?o(b):console.error(b),c.manager.itemError(e)}},i,o)}parse(e){let a={},i={};function o(_e,st){if(a[st]!==void 0)return a[st];let ut=_e.interleavedBuffers[st],gt=c(_e,ut.buffer),yt=kg(ut.type,gt),Pt=new _y(yt,ut.stride);return Pt.uuid=ut.uuid,a[st]=Pt,Pt}function c(_e,st){if(i[st]!==void 0)return i[st];let ut=_e.arrayBuffers[st],gt=new Uint32Array(ut).buffer;return i[st]=gt,gt}let d=e.isInstancedBufferGeometry?new Np:new Pe,g=e.data.index;if(g!==void 0){let _e=kg(g.type,g.array);d.setIndex(new Xe(_e,1))}let b=e.data.attributes;for(let _e in b){let st=b[_e],ut;if(st.isInterleavedBufferAttribute){let gt=o(e.data,st.data);ut=new wc(gt,st.itemSize,st.offset,st.normalized)}else{let gt=kg(st.type,st.array),yt=st.isInstancedBufferAttribute?Eo:Xe;ut=new yt(gt,st.itemSize,st.normalized)}st.name!==void 0&&(ut.name=st.name),st.usage!==void 0&&ut.setUsage(st.usage),st.updateRange!==void 0&&(ut.updateRange.offset=st.updateRange.offset,ut.updateRange.count=st.updateRange.count),d.setAttribute(_e,ut)}let j=e.data.morphAttributes;if(j)for(let _e in j){let st=j[_e],ut=[];for(let gt=0,yt=st.length;gt<yt;gt++){let Pt=st[gt],wt;if(Pt.isInterleavedBufferAttribute){let Ct=o(e.data,Pt.data);wt=new wc(Ct,Pt.itemSize,Pt.offset,Pt.normalized)}else{let Ct=kg(Pt.type,Pt.array);wt=new Xe(Ct,Pt.itemSize,Pt.normalized)}Pt.name!==void 0&&(wt.name=Pt.name),ut.push(wt)}d.morphAttributes[_e]=ut}e.data.morphTargetsRelative&&(d.morphTargetsRelative=!0);let $=e.data.groups||e.data.drawcalls||e.data.offsets;if($!==void 0)for(let _e=0,st=$.length;_e!==st;++_e){let ut=$[_e];d.addGroup(ut.start,ut.count,ut.materialIndex)}let rt=e.data.boundingSphere;if(rt!==void 0){let _e=new _;rt.center!==void 0&&_e.fromArray(rt.center),d.boundingSphere=new Br(_e,rt.radius)}return e.name&&(d.name=e.name),e.userData&&(d.userData=e.userData),d}},Ny=class{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=RM(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let a=RM();e=(a-this.oldTime)/1e3,this.oldTime=a,this.elapsedTime+=e}return e}};function RM(){return(typeof performance>"u"?Date:performance).now()}var xw=class{constructor(e,a,i){this.binding=e,this.valueSize=i;let o,c,d;switch(a){case"quaternion":o=this._slerp,c=this._slerpAdditive,d=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":o=this._select,c=this._select,d=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:o=this._lerp,c=this._lerpAdditive,d=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=o,this._mixBufferRegionAdditive=c,this._setIdentity=d,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,a){let i=this.buffer,o=this.valueSize,c=e*o+o,d=this.cumulativeWeight;if(d===0){for(let g=0;g!==o;++g)i[c+g]=i[g];d=a}else{d+=a;let g=a/d;this._mixBufferRegion(i,c,0,g,o)}this.cumulativeWeight=d}accumulateAdditive(e){let a=this.buffer,i=this.valueSize,o=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(a,o,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){let a=this.valueSize,i=this.buffer,o=e*a+a,c=this.cumulativeWeight,d=this.cumulativeWeightAdditive,g=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,c<1){let b=a*this._origIndex;this._mixBufferRegion(i,o,b,1-c,a)}d>0&&this._mixBufferRegionAdditive(i,o,this._addIndex*a,1,a);for(let b=a,j=a+a;b!==j;++b)if(i[b]!==i[b+a]){g.setValue(i,o);break}}saveOriginalState(){let e=this.binding,a=this.buffer,i=this.valueSize,o=i*this._origIndex;e.getValue(a,o);for(let c=i,d=o;c!==d;++c)a[c]=a[o+c%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){let e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){let e=this._addIndex*this.valueSize,a=e+this.valueSize;for(let i=e;i<a;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){let e=this._origIndex*this.valueSize,a=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[a+i]=this.buffer[e+i]}_select(e,a,i,o,c){if(o>=.5)for(let d=0;d!==c;++d)e[a+d]=e[i+d]}_slerp(e,a,i,o){Qe.slerpFlat(e,a,e,a,e,i,o)}_slerpAdditive(e,a,i,o,c){let d=this._workIndex*c;Qe.multiplyQuaternionsFlat(e,d,e,a,e,i),Qe.slerpFlat(e,a,e,a,e,d,o)}_lerp(e,a,i,o,c){let d=1-o;for(let g=0;g!==c;++g){let b=a+g;e[b]=e[b]*d+e[i+g]*o}}_lerpAdditive(e,a,i,o,c){for(let d=0;d!==c;++d){let g=a+d;e[g]=e[g]+e[i+d]*o}}},Iw="\\[\\]\\.:\\/",M4=new RegExp("["+Iw+"]","g"),Rw="[^"+Iw+"]",C4="[^"+Iw.replace("\\.","")+"]",P4=/((?:WC+[\/:])*)/.source.replace("WC",Rw),D4=/(WCOD+)?/.source.replace("WCOD",C4),O4=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Rw),I4=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Rw),R4=new RegExp("^"+P4+D4+O4+I4+"$"),L4=["material","materials","bones","map"],bw=class{constructor(e,a,i){let o=i||$t.parseTrackName(a);this._targetGroup=e,this._bindings=e.subscribe_(a,o)}getValue(e,a){this.bind();let i=this._targetGroup.nCachedObjects_,o=this._bindings[i];o!==void 0&&o.getValue(e,a)}setValue(e,a){let i=this._bindings;for(let o=this._targetGroup.nCachedObjects_,c=i.length;o!==c;++o)i[o].setValue(e,a)}bind(){let e=this._bindings;for(let a=this._targetGroup.nCachedObjects_,i=e.length;a!==i;++a)e[a].bind()}unbind(){let e=this._bindings;for(let a=this._targetGroup.nCachedObjects_,i=e.length;a!==i;++a)e[a].unbind()}},$t=class{constructor(e,a,i){this.path=a,this.parsedPath=i||$t.parseTrackName(a),this.node=$t.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,a,i){return e&&e.isAnimationObjectGroup?new $t.Composite(e,a,i):new $t(e,a,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(M4,"")}static parseTrackName(e){let a=R4.exec(e);if(a===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);let i={nodeName:a[2],objectName:a[3],objectIndex:a[4],propertyName:a[5],propertyIndex:a[6]},o=i.nodeName&&i.nodeName.lastIndexOf(".");if(o!==void 0&&o!==-1){let c=i.nodeName.substring(o+1);L4.indexOf(c)!==-1&&(i.nodeName=i.nodeName.substring(0,o),i.objectName=c)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,a){if(a===void 0||a===""||a==="."||a===-1||a===e.name||a===e.uuid)return e;if(e.skeleton){let i=e.skeleton.getBoneByName(a);if(i!==void 0)return i}if(e.children){let i=function(c){for(let d=0;d<c.length;d++){let g=c[d];if(g.name===a||g.uuid===a)return g;let b=i(g.children);if(b)return b}return null},o=i(e.children);if(o)return o}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,a){e[a]=this.targetObject[this.propertyName]}_getValue_array(e,a){let i=this.resolvedProperty;for(let o=0,c=i.length;o!==c;++o)e[a++]=i[o]}_getValue_arrayElement(e,a){e[a]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,a){this.resolvedProperty.toArray(e,a)}_setValue_direct(e,a){this.targetObject[this.propertyName]=e[a]}_setValue_direct_setNeedsUpdate(e,a){this.targetObject[this.propertyName]=e[a],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,a){this.targetObject[this.propertyName]=e[a],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,a){let i=this.resolvedProperty;for(let o=0,c=i.length;o!==c;++o)i[o]=e[a++]}_setValue_array_setNeedsUpdate(e,a){let i=this.resolvedProperty;for(let o=0,c=i.length;o!==c;++o)i[o]=e[a++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,a){let i=this.resolvedProperty;for(let o=0,c=i.length;o!==c;++o)i[o]=e[a++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,a){this.resolvedProperty[this.propertyIndex]=e[a]}_setValue_arrayElement_setNeedsUpdate(e,a){this.resolvedProperty[this.propertyIndex]=e[a],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,a){this.resolvedProperty[this.propertyIndex]=e[a],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,a){this.resolvedProperty.fromArray(e,a)}_setValue_fromArray_setNeedsUpdate(e,a){this.resolvedProperty.fromArray(e,a),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,a){this.resolvedProperty.fromArray(e,a),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,a){this.bind(),this.getValue(e,a)}_setValue_unbound(e,a){this.bind(),this.setValue(e,a)}bind(){let e=this.node,a=this.parsedPath,i=a.objectName,o=a.propertyName,c=a.propertyIndex;if(e||(e=$t.findNode(this.rootNode,a.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(i){let j=a.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let $=0;$<e.length;$++)if(e[$].name===j){j=$;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(j!==void 0){if(e[j]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[j]}}let d=e[o];if(d===void 0){let j=a.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+j+"."+o+" but it wasn't found.",e);return}let g=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?g=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(g=this.Versioning.MatrixWorldNeedsUpdate);let b=this.BindingType.Direct;if(c!==void 0){if(o==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[c]!==void 0&&(c=e.morphTargetDictionary[c])}b=this.BindingType.ArrayElement,this.resolvedProperty=d,this.propertyIndex=c}else d.fromArray!==void 0&&d.toArray!==void 0?(b=this.BindingType.HasFromToArray,this.resolvedProperty=d):Array.isArray(d)?(b=this.BindingType.EntireArray,this.resolvedProperty=d):this.propertyName=o;this.getValue=this.GetterByBindingType[b],this.setValue=this.SetterByBindingTypeAndVersioning[b][g]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}};$t.Composite=bw;$t.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};$t.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};$t.prototype.GetterByBindingType=[$t.prototype._getValue_direct,$t.prototype._getValue_array,$t.prototype._getValue_arrayElement,$t.prototype._getValue_toArray];$t.prototype.SetterByBindingTypeAndVersioning=[[$t.prototype._setValue_direct,$t.prototype._setValue_direct_setNeedsUpdate,$t.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[$t.prototype._setValue_array,$t.prototype._setValue_array_setNeedsUpdate,$t.prototype._setValue_array_setMatrixWorldNeedsUpdate],[$t.prototype._setValue_arrayElement,$t.prototype._setValue_arrayElement_setNeedsUpdate,$t.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[$t.prototype._setValue_fromArray,$t.prototype._setValue_fromArray_setNeedsUpdate,$t.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var Sw=class{constructor(e,a,i=null,o=a.blendMode){this._mixer=e,this._clip=a,this._localRoot=i,this.blendMode=o;let c=a.tracks,d=c.length,g=new Array(d),b={endingStart:ku,endingEnd:ku};for(let j=0;j!==d;++j){let $=c[j].createInterpolant(null);g[j]=$,$.settings=b}this._interpolantSettings=b,this._interpolants=g,this._propertyBindings=new Array(d),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Ew,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,a){return this.loop=e,this.repetitions=a,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,a,i){if(e.fadeOut(a),this.fadeIn(a),i){let o=this._clip.duration,c=e._clip.duration,d=c/o,g=o/c;e.warp(1,d,a),this.warp(g,1,a)}return this}crossFadeTo(e,a,i){return e.crossFadeFrom(this,a,i)}stopFading(){let e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,a,i){let o=this._mixer,c=o.time,d=this.timeScale,g=this._timeScaleInterpolant;g===null&&(g=o._lendControlInterpolant(),this._timeScaleInterpolant=g);let b=g.parameterPositions,j=g.sampleValues;return b[0]=c,b[1]=c+i,j[0]=e/d,j[1]=a/d,this}stopWarping(){let e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,a,i,o){if(!this.enabled){this._updateWeight(e);return}let c=this._startTime;if(c!==null){let b=(e-c)*i;b<0||i===0?a=0:(this._startTime=null,a=i*b)}a*=this._updateTimeScale(e);let d=this._updateTime(a),g=this._updateWeight(e);if(g>0){let b=this._interpolants,j=this._propertyBindings;switch(this.blendMode){case XF:for(let $=0,rt=b.length;$!==rt;++$)b[$].evaluate(d),j[$].accumulateAdditive(g);break;case Tw:default:for(let $=0,rt=b.length;$!==rt;++$)b[$].evaluate(d),j[$].accumulate(o,g)}}}_updateWeight(e){let a=0;if(this.enabled){a=this.weight;let i=this._weightInterpolant;if(i!==null){let o=i.evaluate(e)[0];a*=o,e>i.parameterPositions[1]&&(this.stopFading(),o===0&&(this.enabled=!1))}}return this._effectiveWeight=a,a}_updateTimeScale(e){let a=0;if(!this.paused){a=this.timeScale;let i=this._timeScaleInterpolant;if(i!==null){let o=i.evaluate(e)[0];a*=o,e>i.parameterPositions[1]&&(this.stopWarping(),a===0?this.paused=!0:this.timeScale=a)}}return this._effectiveTimeScale=a,a}_updateTime(e){let a=this._clip.duration,i=this.loop,o=this.time+e,c=this._loopCount,d=i===kp;if(e===0)return c===-1?o:d&&(c&1)===1?a-o:o;if(i===_w){c===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(o>=a)o=a;else if(o<0)o=0;else{this.time=o;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=o,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(c===-1&&(e>=0?(c=0,this._setEndings(!0,this.repetitions===0,d)):this._setEndings(this.repetitions===0,!0,d)),o>=a||o<0){let g=Math.floor(o/a);o-=a*g,c+=Math.abs(g);let b=this.repetitions-c;if(b<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,o=e>0?a:0,this.time=o,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(b===1){let j=e<0;this._setEndings(j,!j,d)}else this._setEndings(!1,!1,d);this._loopCount=c,this.time=o,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:g})}}else this.time=o;if(d&&(c&1)===1)return a-o}return o}_setEndings(e,a,i){let o=this._interpolantSettings;i?(o.endingStart=Vu,o.endingEnd=Vu):(e?o.endingStart=this.zeroSlopeAtStart?Vu:ku:o.endingStart=my,a?o.endingEnd=this.zeroSlopeAtEnd?Vu:ku:o.endingEnd=my)}_scheduleFading(e,a,i){let o=this._mixer,c=o.time,d=this._weightInterpolant;d===null&&(d=o._lendControlInterpolant(),this._weightInterpolant=d);let g=d.parameterPositions,b=d.sampleValues;return g[0]=c,b[0]=a,g[1]=c+e,b[1]=i,this}},B4=new Float32Array(1),Fy=class extends fr$2{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,a){let i=e._localRoot||this._root,o=e._clip.tracks,c=o.length,d=e._propertyBindings,g=e._interpolants,b=i.uuid,j=this._bindingsByRootAndName,$=j[b];$===void 0&&($={},j[b]=$);for(let rt=0;rt!==c;++rt){let _e=o[rt],st=_e.name,ut=$[st];if(ut!==void 0)++ut.referenceCount,d[rt]=ut;else{if(ut=d[rt],ut!==void 0){ut._cacheIndex===null&&(++ut.referenceCount,this._addInactiveBinding(ut,b,st));continue}let gt=a&&a._propertyBindings[rt].binding.parsedPath;ut=new xw($t.create(i,st,gt),_e.ValueTypeName,_e.getValueSize()),++ut.referenceCount,this._addInactiveBinding(ut,b,st),d[rt]=ut}g[rt].resultBuffer=ut.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){let i=(e._localRoot||this._root).uuid,o=e._clip.uuid,c=this._actionsByClip[o];this._bindAction(e,c&&c.knownActions[0]),this._addInactiveAction(e,o,i)}let a=e._propertyBindings;for(let i=0,o=a.length;i!==o;++i){let c=a[i];c.useCount++===0&&(this._lendBinding(c),c.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){let a=e._propertyBindings;for(let i=0,o=a.length;i!==o;++i){let c=a[i];--c.useCount===0&&(c.restoreOriginalState(),this._takeBackBinding(c))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;let e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){let a=e._cacheIndex;return a!==null&&a<this._nActiveActions}_addInactiveAction(e,a,i){let o=this._actions,c=this._actionsByClip,d=c[a];if(d===void 0)d={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,c[a]=d;else{let g=d.knownActions;e._byClipCacheIndex=g.length,g.push(e)}e._cacheIndex=o.length,o.push(e),d.actionByRoot[i]=e}_removeInactiveAction(e){let a=this._actions,i=a[a.length-1],o=e._cacheIndex;i._cacheIndex=o,a[o]=i,a.pop(),e._cacheIndex=null;let c=e._clip.uuid,d=this._actionsByClip,g=d[c],b=g.knownActions,j=b[b.length-1],$=e._byClipCacheIndex;j._byClipCacheIndex=$,b[$]=j,b.pop(),e._byClipCacheIndex=null;let rt=g.actionByRoot,_e=(e._localRoot||this._root).uuid;delete rt[_e],b.length===0&&delete d[c],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){let a=e._propertyBindings;for(let i=0,o=a.length;i!==o;++i){let c=a[i];--c.referenceCount===0&&this._removeInactiveBinding(c)}}_lendAction(e){let a=this._actions,i=e._cacheIndex,o=this._nActiveActions++,c=a[o];e._cacheIndex=o,a[o]=e,c._cacheIndex=i,a[i]=c}_takeBackAction(e){let a=this._actions,i=e._cacheIndex,o=--this._nActiveActions,c=a[o];e._cacheIndex=o,a[o]=e,c._cacheIndex=i,a[i]=c}_addInactiveBinding(e,a,i){let o=this._bindingsByRootAndName,c=this._bindings,d=o[a];d===void 0&&(d={},o[a]=d),d[i]=e,e._cacheIndex=c.length,c.push(e)}_removeInactiveBinding(e){let a=this._bindings,i=e.binding,o=i.rootNode.uuid,c=i.path,d=this._bindingsByRootAndName,g=d[o],b=a[a.length-1],j=e._cacheIndex;b._cacheIndex=j,a[j]=b,a.pop(),delete g[c],Object.keys(g).length===0&&delete d[o]}_lendBinding(e){let a=this._bindings,i=e._cacheIndex,o=this._nActiveBindings++,c=a[o];e._cacheIndex=o,a[o]=e,c._cacheIndex=i,a[i]=c}_takeBackBinding(e){let a=this._bindings,i=e._cacheIndex,o=--this._nActiveBindings,c=a[o];e._cacheIndex=o,a[o]=e,c._cacheIndex=i,a[i]=c}_lendControlInterpolant(){let e=this._controlInterpolants,a=this._nActiveControlInterpolants++,i=e[a];return i===void 0&&(i=new Cy(new Float32Array(2),new Float32Array(2),1,B4),i.__cacheIndex=a,e[a]=i),i}_takeBackControlInterpolant(e){let a=this._controlInterpolants,i=e.__cacheIndex,o=--this._nActiveControlInterpolants,c=a[o];e.__cacheIndex=o,a[o]=e,c.__cacheIndex=i,a[i]=c}clipAction(e,a,i){let o=a||this._root,c=o.uuid,d=typeof e=="string"?nh.findByName(o,e):e,g=d!==null?d.uuid:e,b=this._actionsByClip[g],j=null;if(i===void 0&&(d!==null?i=d.blendMode:i=Tw),b!==void 0){let rt=b.actionByRoot[c];if(rt!==void 0&&rt.blendMode===i)return rt;j=b.knownActions[0],d===null&&(d=j._clip)}if(d===null)return null;let $=new Sw(this,d,a,i);return this._bindAction($,j),this._addInactiveAction($,g,c),$}existingAction(e,a){let i=a||this._root,o=i.uuid,c=typeof e=="string"?nh.findByName(i,e):e,d=c?c.uuid:e,g=this._actionsByClip[d];return g!==void 0&&g.actionByRoot[o]||null}stopAllAction(){let e=this._actions,a=this._nActiveActions;for(let i=a-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;let a=this._actions,i=this._nActiveActions,o=this.time+=e,c=Math.sign(e),d=this._accuIndex^=1;for(let j=0;j!==i;++j)a[j]._update(o,e,c,d);let g=this._bindings,b=this._nActiveBindings;for(let j=0;j!==b;++j)g[j].apply(d);return this}setTime(e){this.time=0;for(let a=0;a<this._actions.length;a++)this._actions[a].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){let a=this._actions,i=e.uuid,o=this._actionsByClip,c=o[i];if(c!==void 0){let d=c.knownActions;for(let g=0,b=d.length;g!==b;++g){let j=d[g];this._deactivateAction(j);let $=j._cacheIndex,rt=a[a.length-1];j._cacheIndex=null,j._byClipCacheIndex=null,rt._cacheIndex=$,a[$]=rt,a.pop(),this._removeInactiveBindingsForAction(j)}delete o[i]}}uncacheRoot(e){let a=e.uuid,i=this._actionsByClip;for(let d in i){let g=i[d].actionByRoot,b=g[a];b!==void 0&&(this._deactivateAction(b),this._removeInactiveAction(b))}let o=this._bindingsByRootAndName,c=o[a];if(c!==void 0)for(let d in c){let g=c[d];g.restoreOriginalState(),this._removeInactiveBinding(g)}}uncacheAction(e,a){let i=this.existingAction(e,a);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}},he=class{constructor(e){this.value=e}clone(){return new he(this.value.clone===void 0?this.value:this.value.clone())}},ah=class{constructor(e,a,i=0,o=1/0){this.ray=new qs(e,a),this.near=i,this.far=o,this.camera=null,this.layers=new Ep,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,a){this.ray.set(e,a)}setFromCamera(e,a){a.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(a.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(a).sub(this.ray.origin).normalize(),this.camera=a):a.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(a.near+a.far)/(a.near-a.far)).unproject(a),this.ray.direction.set(0,0,-1).transformDirection(a.matrixWorld),this.camera=a):console.error("THREE.Raycaster: Unsupported camera type: "+a.type)}intersectObject(e,a=!0,i=[]){return ww(e,this,i,a),i.sort(LM),i}intersectObjects(e,a=!0,i=[]){for(let o=0,c=e.length;o<c;o++)ww(e[o],this,i,a);return i.sort(LM),i}};function LM(e,a){return e.distance-a.distance}function ww(e,a,i,o){if(e.layers.test(a.layers)&&e.raycast(a,i),o===!0){let c=e.children;for(let d=0,g=c.length;d<g;d++)ww(c[d],a,i,!0)}}var Fp=class{constructor(e=1,a=0,i=0){return this.radius=e,this.phi=a,this.theta=i,this}set(e,a,i){return this.radius=e,this.phi=a,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,a,i){return this.radius=Math.sqrt(e*e+a*a+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(gi(a/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}},BM=new z$2,lh=class{constructor(e=new z$2(1/0,1/0),a=new z$2(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=a}set(e,a){return this.min.copy(e),this.max.copy(a),this}setFromPoints(e){this.makeEmpty();for(let a=0,i=e.length;a<i;a++)this.expandByPoint(e[a]);return this}setFromCenterAndSize(e,a){let i=BM.copy(a).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,a){return a.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,a){return a.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return BM.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},NM=new _,cy=new _,Di=class{constructor(e=new _,a=new _){this.start=e,this.end=a}set(e,a){return this.start.copy(e),this.end.copy(a),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,a){return this.delta(a).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,a){NM.subVectors(e,this.start),cy.subVectors(this.end,this.start);let i=cy.dot(cy),o=cy.dot(NM)/i;return a&&(o=gi(o,0,1)),o}closestPointToPoint(e,a,i){let o=this.closestPointToPointParameter(e,a);return this.delta(i).multiplyScalar(o).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}},FM=new _,ky=class extends _t{constructor(e,a){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=a,this.type="SpotLightHelper";let i=new Pe,o=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let d=0,g=1,b=32;d<b;d++,g++){let j=d/b*Math.PI*2,$=g/b*Math.PI*2;o.push(Math.cos(j),Math.sin(j),1,Math.cos($),Math.sin($),1)}i.setAttribute("position",new Te(o,3));let c=new ys({fog:!1,toneMapped:!1});this.cone=new hl(i,c),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);let e=this.light.distance?this.light.distance:1e3,a=e*Math.tan(this.light.angle);this.cone.scale.set(a,a,e),FM.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(FM),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},Vy=class extends sr{constructor(e,a,i){let o=new Ys(a,4,2),c=new ts({wireframe:!0,fog:!1,toneMapped:!1});super(o,c),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},kM=new _,uy=new _,VM=new _,zy=class extends _t{constructor(e,a,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",a===void 0&&(a=1);let o=new Pe;o.setAttribute("position",new Te([-a,a,0,a,a,0,a,-a,0,-a,-a,0,-a,a,0],3));let c=new ys({fog:!1,toneMapped:!1});this.lightPlane=new Ac(o,c),this.add(this.lightPlane),o=new Pe,o.setAttribute("position",new Te([0,0,0,0,0,1],3)),this.targetLine=new Ac(o,c),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),kM.setFromMatrixPosition(this.light.matrixWorld),uy.setFromMatrixPosition(this.light.target.matrixWorld),VM.subVectors(uy,kM),this.lightPlane.lookAt(uy),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(uy),this.targetLine.scale.z=VM.length()}},hy=new _,Xr=new rs,yl=class extends hl{constructor(e){let a=new Pe,i=new ys({color:16777215,vertexColors:!0,toneMapped:!1}),o=[],c=[],d={};g("n1","n2"),g("n2","n4"),g("n4","n3"),g("n3","n1"),g("f1","f2"),g("f2","f4"),g("f4","f3"),g("f3","f1"),g("n1","f1"),g("n2","f2"),g("n3","f3"),g("n4","f4"),g("p","n1"),g("p","n2"),g("p","n3"),g("p","n4"),g("u1","u2"),g("u2","u3"),g("u3","u1"),g("c","t"),g("p","c"),g("cn1","cn2"),g("cn3","cn4"),g("cf1","cf2"),g("cf3","cf4");function g(ut,gt){b(ut),b(gt)}function b(ut){o.push(0,0,0),c.push(0,0,0),d[ut]===void 0&&(d[ut]=[]),d[ut].push(o.length/3-1)}a.setAttribute("position",new Te(o,3)),a.setAttribute("color",new Te(c,3)),super(a,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=d,this.update();let j=new We(16755200),$=new We(16711680),rt=new We(43775),_e=new We(16777215),st=new We(3355443);this.setColors(j,$,rt,_e,st)}setColors(e,a,i,o,c){let d=this.geometry.getAttribute("color");d.setXYZ(0,e.r,e.g,e.b),d.setXYZ(1,e.r,e.g,e.b),d.setXYZ(2,e.r,e.g,e.b),d.setXYZ(3,e.r,e.g,e.b),d.setXYZ(4,e.r,e.g,e.b),d.setXYZ(5,e.r,e.g,e.b),d.setXYZ(6,e.r,e.g,e.b),d.setXYZ(7,e.r,e.g,e.b),d.setXYZ(8,e.r,e.g,e.b),d.setXYZ(9,e.r,e.g,e.b),d.setXYZ(10,e.r,e.g,e.b),d.setXYZ(11,e.r,e.g,e.b),d.setXYZ(12,e.r,e.g,e.b),d.setXYZ(13,e.r,e.g,e.b),d.setXYZ(14,e.r,e.g,e.b),d.setXYZ(15,e.r,e.g,e.b),d.setXYZ(16,e.r,e.g,e.b),d.setXYZ(17,e.r,e.g,e.b),d.setXYZ(18,e.r,e.g,e.b),d.setXYZ(19,e.r,e.g,e.b),d.setXYZ(20,e.r,e.g,e.b),d.setXYZ(21,e.r,e.g,e.b),d.setXYZ(22,e.r,e.g,e.b),d.setXYZ(23,e.r,e.g,e.b),d.setXYZ(24,a.r,a.g,a.b),d.setXYZ(25,a.r,a.g,a.b),d.setXYZ(26,a.r,a.g,a.b),d.setXYZ(27,a.r,a.g,a.b),d.setXYZ(28,a.r,a.g,a.b),d.setXYZ(29,a.r,a.g,a.b),d.setXYZ(30,a.r,a.g,a.b),d.setXYZ(31,a.r,a.g,a.b),d.setXYZ(32,i.r,i.g,i.b),d.setXYZ(33,i.r,i.g,i.b),d.setXYZ(34,i.r,i.g,i.b),d.setXYZ(35,i.r,i.g,i.b),d.setXYZ(36,i.r,i.g,i.b),d.setXYZ(37,i.r,i.g,i.b),d.setXYZ(38,o.r,o.g,o.b),d.setXYZ(39,o.r,o.g,o.b),d.setXYZ(40,c.r,c.g,c.b),d.setXYZ(41,c.r,c.g,c.b),d.setXYZ(42,c.r,c.g,c.b),d.setXYZ(43,c.r,c.g,c.b),d.setXYZ(44,c.r,c.g,c.b),d.setXYZ(45,c.r,c.g,c.b),d.setXYZ(46,c.r,c.g,c.b),d.setXYZ(47,c.r,c.g,c.b),d.setXYZ(48,c.r,c.g,c.b),d.setXYZ(49,c.r,c.g,c.b),d.needsUpdate=!0}update(){let e=this.geometry,a=this.pointMap,i=1,o=1;Xr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),ti("c",a,e,Xr,0,0,-1),ti("t",a,e,Xr,0,0,1),ti("n1",a,e,Xr,-i,-o,-1),ti("n2",a,e,Xr,i,-o,-1),ti("n3",a,e,Xr,-i,o,-1),ti("n4",a,e,Xr,i,o,-1),ti("f1",a,e,Xr,-i,-o,1),ti("f2",a,e,Xr,i,-o,1),ti("f3",a,e,Xr,-i,o,1),ti("f4",a,e,Xr,i,o,1),ti("u1",a,e,Xr,i*.7,o*1.1,-1),ti("u2",a,e,Xr,-i*.7,o*1.1,-1),ti("u3",a,e,Xr,0,o*2,-1),ti("cf1",a,e,Xr,-i,0,1),ti("cf2",a,e,Xr,i,0,1),ti("cf3",a,e,Xr,0,-o,1),ti("cf4",a,e,Xr,0,o,1),ti("cn1",a,e,Xr,-i,0,-1),ti("cn2",a,e,Xr,i,0,-1),ti("cn3",a,e,Xr,0,-o,-1),ti("cn4",a,e,Xr,0,o,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function ti(e,a,i,o,c,d,g){hy.set(c,d,g).unproject(o);let b=a[e];if(b!==void 0){let j=i.getAttribute("position");for(let $=0,rt=b.length;$<rt;$++)j.setXYZ(b[$],hy.x,hy.y,hy.z)}}var vl=class extends hl{constructor(e,a=16776960){let i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),o=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],c=new Pe;c.setIndex(new Xe(i,1)),c.setAttribute("position",new Te(o,3)),super(c,new ys({color:a,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){let a=this.box;a.isEmpty()||(a.getCenter(this.position),a.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}},Uy=class extends hl{constructor(e=1){let a=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],o=new Pe;o.setAttribute("position",new Te(a,3)),o.setAttribute("color",new Te(i,3));let c=new ys({vertexColors:!0,toneMapped:!1});super(o,c),this.type="AxesHelper"}setColors(e,a,i){let o=new We,c=this.geometry.attributes.color.array;return o.set(e),o.toArray(c,0),o.toArray(c,3),o.set(a),o.toArray(c,6),o.toArray(c,9),o.set(i),o.toArray(c,12),o.toArray(c,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}},ga=N4();function N4(){let e=new ArrayBuffer(4),a=new Float32Array(e),i=new Uint32Array(e),o=new Uint32Array(512),c=new Uint32Array(512);for(let j=0;j<256;++j){let $=j-127;$<-27?(o[j]=0,o[j|256]=32768,c[j]=24,c[j|256]=24):$<-14?(o[j]=1024>>-$-14,o[j|256]=1024>>-$-14|32768,c[j]=-$-1,c[j|256]=-$-1):$<=15?(o[j]=$+15<<10,o[j|256]=$+15<<10|32768,c[j]=13,c[j|256]=13):$<128?(o[j]=31744,o[j|256]=64512,c[j]=24,c[j|256]=24):(o[j]=31744,o[j|256]=64512,c[j]=13,c[j|256]=13)}let d=new Uint32Array(2048),g=new Uint32Array(64),b=new Uint32Array(64);for(let j=1;j<1024;++j){let $=j<<13,rt=0;for(;!($&8388608);)$<<=1,rt-=8388608;$&=-8388609,rt+=947912704,d[j]=$|rt}for(let j=1024;j<2048;++j)d[j]=939524096+(j-1024<<13);for(let j=1;j<31;++j)g[j]=j<<23;g[31]=1199570944,g[32]=2147483648;for(let j=33;j<63;++j)g[j]=2147483648+(j-32<<23);g[63]=3347054592;for(let j=1;j<64;++j)j!==32&&(b[j]=1024);return{floatView:a,uint32View:i,baseTable:o,shiftTable:c,mantissaTable:d,exponentTable:g,offsetTable:b}}function F4(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=gi(e,-65504,65504),ga.floatView[0]=e;let a=ga.uint32View[0],i=a>>23&511;return ga.baseTable[i]+((a&8388607)>>ga.shiftTable[i])}function k4(e){let a=e>>10;return ga.uint32View[0]=ga.mantissaTable[ga.offsetTable[a]+(e&1023)]+ga.exponentTable[a],ga.floatView[0]}var oC=Object.freeze({__proto__:null,fromHalfFloat:k4,toHalfFloat:F4});typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:ba$1}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=ba$1);var dh=".",Vp=Symbol("target"),Lw=Symbol("unsubscribe");function zp(e){return e instanceof Date||e instanceof Set||e instanceof Map||e instanceof WeakSet||e instanceof WeakMap||ArrayBuffer.isView(e)}function aC(e){return(typeof e=="object"?e===null:typeof e!="function")||e instanceof RegExp}var ss=Array.isArray;function Dc(e){return typeof e=="symbol"}var V4={after:(e,a)=>ss(e)?e.slice(a.length):a===""?e:e.slice(a.length+1),concat:(e,a)=>ss(e)?(e=[...e],a&&e.push(a),e):a&&a.toString!==void 0?(e!==""&&(e+=dh),Dc(a)?e+a.toString():e+a):e,initial:e=>{if(ss(e))return e.slice(0,-1);if(e==="")return e;let a=e.lastIndexOf(dh);return a===-1?"":e.slice(0,a)},last:e=>{if(ss(e))return e[e.length-1]||"";if(e==="")return e;let a=e.lastIndexOf(dh);return a===-1?e:e.slice(a+1)},walk:(e,a)=>{if(ss(e))for(let i of e)a(i);else if(e!==""){let i=0,o=e.indexOf(dh);if(o===-1)a(e);else for(;i<e.length;)o===-1&&(o=e.length),a(e.slice(i,o)),i=o+1,o=e.indexOf(dh,i)}},get(e,a){return this.walk(a,i=>{e&&(e=e[i])}),e}},An=V4;function Bw(e){return typeof e=="object"&&typeof e.next=="function"}function Nw(e,a,i,o,c){let d=e.next;if(a.name==="entries")e.next=function(){let g=d.call(this);return g.done===!1&&(g.value[0]=c(g.value[0],a,g.value[0],o),g.value[1]=c(g.value[1],a,g.value[0],o)),g};else if(a.name==="values"){let g=i[Vp].keys();e.next=function(){let b=d.call(this);return b.done===!1&&(b.value=c(b.value,a,g.next().value,o)),b}}else e.next=function(){let g=d.call(this);return g.done===!1&&(g.value=c(g.value,a,g.value,o)),g};return e}function Wy(e,a,i){return e.isUnsubscribed||a.ignoreSymbols&&Dc(i)||a.ignoreUnderscores&&i.charAt(0)==="_"||"ignoreKeys"in a&&a.ignoreKeys.includes(i)}var Up=class{constructor(e){this._equals=e,this._proxyCache=new WeakMap,this._pathCache=new WeakMap,this.isUnsubscribed=!1}_getDescriptorCache(){return this._descriptorCache===void 0&&(this._descriptorCache=new WeakMap),this._descriptorCache}_getProperties(e){let a=this._getDescriptorCache(),i=a.get(e);return i===void 0&&(i={},a.set(e,i)),i}_getOwnPropertyDescriptor(e,a){if(this.isUnsubscribed)return Reflect.getOwnPropertyDescriptor(e,a);let i=this._getProperties(e),o=i[a];return o===void 0&&(o=Reflect.getOwnPropertyDescriptor(e,a),i[a]=o),o}getProxy(e,a,i,o){if(this.isUnsubscribed)return e;let c=e[o],d=c||e;this._pathCache.set(d,a);let g=this._proxyCache.get(d);return g===void 0&&(g=c===void 0?new Proxy(e,i):e,this._proxyCache.set(d,g)),g}getPath(e){return this.isUnsubscribed?void 0:this._pathCache.get(e)}isDetached(e,a){return!Object.is(e,An.get(a,this.getPath(e)))}defineProperty(e,a,i){return Reflect.defineProperty(e,a,i)?(this.isUnsubscribed||(this._getProperties(e)[a]=i),!0):!1}setProperty(e,a,i,o,c){if(!this._equals(c,i)||!(a in e)){let d=this._getOwnPropertyDescriptor(e,a);return d!==void 0&&"set"in d?Reflect.set(e,a,i,o):Reflect.set(e,a,i)}return!0}deleteProperty(e,a,i){if(Reflect.deleteProperty(e,a)){if(!this.isUnsubscribed){let o=this._getDescriptorCache().get(e);o&&(delete o[a],this._pathCache.delete(i))}return!0}return!1}isSameDescriptor(e,a,i){let o=this._getOwnPropertyDescriptor(a,i);return e!==void 0&&o!==void 0&&Object.is(e.value,o.value)&&(e.writable||!1)===(o.writable||!1)&&(e.enumerable||!1)===(o.enumerable||!1)&&(e.configurable||!1)===(o.configurable||!1)&&e.get===o.get&&e.set===o.set}isGetInvariant(e,a){let i=this._getOwnPropertyDescriptor(e,a);return i!==void 0&&i.configurable!==!0&&i.writable!==!0}unsubscribe(){this._descriptorCache=null,this._pathCache=null,this._proxyCache=null,this.isUnsubscribed=!0}};function fh(e){return toString.call(e)==="[object Object]"}function ph(){return!0}function xl(e,a){return e.length!==a.length||e.some((i,o)=>a[o]!==i)}var qy=new Set(["hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),z4=new Set(["concat","includes","indexOf","join","keys","lastIndexOf"]),Fw={push:ph,pop:ph,shift:ph,unshift:ph,copyWithin:xl,reverse:xl,sort:xl,splice:xl,flat:xl,fill:xl},lC=new Set([...qy,...z4,...Object.keys(Fw)]);function mh(e,a){if(e.size!==a.size)return!0;for(let i of e)if(!a.has(i))return!0;return!1}var kw=["keys","values","entries"],Vw=new Set(["has","toString"]),zw={add:mh,clear:mh,delete:mh,forEach:mh},cC=new Set([...Vw,...Object.keys(zw),...kw]);function gh(e,a){if(e.size!==a.size)return!0;let i;for(let[o,c]of e)if(i=a.get(o),i!==c||i===void 0&&!a.has(o))return!0;return!1}var U4=new Set([...Vw,"get"]),Uw={set:gh,clear:gh,delete:gh,forEach:gh},uC=new Set([...U4,...Object.keys(Uw),...kw]),Hi=class{constructor(e,a,i,o){this._path=a,this._isChanged=!1,this._clonedCache=new Set,this._hasOnValidate=o,this._changes=o?[]:null,this.clone=a===void 0?e:this._shallowClone(e)}static isHandledMethod(e){return qy.has(e)}_shallowClone(e){let a=e;if(fh(e))a={...e};else if(ss(e))a=[...e];else if(e instanceof Date)a=new Date(e);else if(e instanceof Set)a=new Set([...e].map(i=>this._shallowClone(i)));else if(e instanceof Map){a=new Map;for(let[i,o]of e.entries())a.set(i,this._shallowClone(o))}return this._clonedCache.add(a),a}preferredThisArg(e,a,i,o){return e?(ss(o)?this._onIsChanged=Fw[a]:o instanceof Set?this._onIsChanged=zw[a]:o instanceof Map&&(this._onIsChanged=Uw[a]),o):i}update(e,a,i){let o=An.after(e,this._path);if(a!=="length"){let c=this.clone;An.walk(o,d=>{c&&c[d]&&(this._clonedCache.has(c[d])||(c[d]=this._shallowClone(c[d])),c=c[d])}),this._hasOnValidate&&this._changes.push({path:o,property:a,previous:i}),c&&c[a]&&(c[a]=i)}this._isChanged=!0}undo(e){let a;for(let i=this._changes.length-1;i!==-1;i--)a=this._changes[i],An.get(e,a.path)[a.property]=a.previous}isChanged(e){return this._onIsChanged===void 0?this._isChanged:this._onIsChanged(this.clone,e)}},yh=class extends Hi{static isHandledMethod(e){return lC.has(e)}},Gp=class extends Hi{undo(e){e.setTime(this.clone.getTime())}isChanged(e,a){return!a(this.clone.valueOf(),e.valueOf())}},vh=class extends Hi{static isHandledMethod(e){return cC.has(e)}undo(e){for(let a of this.clone)e.add(a);for(let a of e)this.clone.has(a)||e.delete(a)}},xh=class extends Hi{static isHandledMethod(e){return uC.has(e)}undo(e){for(let[a,i]of this.clone.entries())e.set(a,i);for(let a of e.keys())this.clone.has(a)||e.delete(a)}},jp=class extends Hi{constructor(e,a,i,o){super(void 0,a,i,o),this._arg1=i[0],this._weakValue=e.has(this._arg1)}isChanged(e){return this._weakValue!==e.has(this._arg1)}undo(e){this._weakValue&&!e.has(this._arg1)?e.add(this._arg1):e.delete(this._arg1)}},Hp=class extends Hi{constructor(e,a,i,o){super(void 0,a,i,o),this._weakKey=i[0],this._weakHas=e.has(this._weakKey),this._weakValue=e.get(this._weakKey)}isChanged(e){return this._weakValue!==e.get(this._weakKey)}undo(e){let a=e.has(this._weakKey);this._weakHas&&!a?e.set(this._weakKey,this._weakValue):!this._weakHas&&a?e.delete(this._weakKey):this._weakValue!==e.get(this._weakKey)&&e.set(this._weakKey,this._weakValue)}},Qs=class{constructor(e){this._stack=[],this._hasOnValidate=e}static isHandledType(e){return fh(e)||ss(e)||zp(e)}static isHandledMethod(e,a){return fh(e)?Hi.isHandledMethod(a):ss(e)?yh.isHandledMethod(a):e instanceof Set?vh.isHandledMethod(a):e instanceof Map?xh.isHandledMethod(a):zp(e)}get isCloning(){return this._stack.length>0}start(e,a,i){let o=Hi;ss(e)?o=yh:e instanceof Date?o=Gp:e instanceof Set?o=vh:e instanceof Map?o=xh:e instanceof WeakSet?o=jp:e instanceof WeakMap&&(o=Hp),this._stack.push(new o(e,a,i,this._hasOnValidate))}update(e,a,i){this._stack[this._stack.length-1].update(e,a,i)}preferredThisArg(e,a,i){let{name:o}=e,c=Qs.isHandledMethod(i,o);return this._stack[this._stack.length-1].preferredThisArg(c,o,a,i)}isChanged(e,a,i){return this._stack[this._stack.length-1].isChanged(e,a,i)}undo(e){this._previousClone!==void 0&&this._previousClone.undo(e)}stop(){return this._previousClone=this._stack.pop(),this._previousClone.clone}},G4={equals:Object.is,isShallow:!1,pathAsArray:!1,ignoreSymbols:!1,ignoreUnderscores:!1,ignoreDetached:!1,details:!1},Gw=(e,a,i={})=>{i={...G4,...i};let o=Symbol("ProxyTarget"),{equals:c,isShallow:d,ignoreDetached:g,details:b}=i,j=new Up(c),$=typeof i.onValidate=="function",rt=new Qs($),_e=(Ct,At,Tt,kt,It)=>!$||rt.isCloning||i.onValidate(An.concat(j.getPath(Ct),At),Tt,kt,It)===!0,st=(Ct,At,Tt,kt)=>{!Wy(j,i,At)&&!(g&&j.isDetached(Ct,e))&&ut(j.getPath(Ct),At,Tt,kt)},ut=(Ct,At,Tt,kt,It)=>{rt.isCloning?rt.update(Ct,At,kt):a(An.concat(Ct,At),Tt,kt,It)},gt=Ct=>Ct&&(Ct[o]||Ct),yt=(Ct,At,Tt,kt)=>aC(Ct)||Tt==="constructor"||d&&!Qs.isHandledMethod(At,Tt)||Wy(j,i,Tt)||j.isGetInvariant(At,Tt)||g&&j.isDetached(At,e)?Ct:(kt===void 0&&(kt=j.getPath(At)),j.getProxy(Ct,An.concat(kt,Tt),Pt,o)),Pt={get(Ct,At,Tt){if(Dc(At)){if(At===o||At===Vp)return Ct;if(At===Lw&&!j.isUnsubscribed&&j.getPath(Ct).length===0)return j.unsubscribe(),Ct}let kt=zp(Ct)?Reflect.get(Ct,At):Reflect.get(Ct,At,Tt);return yt(kt,Ct,At)},set(Ct,At,Tt,kt){Tt=gt(Tt);let It=Ct[o]||Ct,Lt=It[At];if(c(Lt,Tt)&&At in Ct)return!0;let Ft=_e(Ct,At,Tt,Lt);return Ft&&j.setProperty(It,At,Tt,kt,Lt)?(st(Ct,At,Ct[At],Lt),!0):!Ft},defineProperty(Ct,At,Tt){if(!j.isSameDescriptor(Tt,Ct,At)){let kt=Ct[At];_e(Ct,At,Tt.value,kt)&&j.defineProperty(Ct,At,Tt,kt)&&st(Ct,At,Tt.value,kt)}return!0},deleteProperty(Ct,At){if(!Reflect.has(Ct,At))return!0;let Tt=Reflect.get(Ct,At),kt=_e(Ct,At,void 0,Tt);return kt&&j.deleteProperty(Ct,At,Tt)?(st(Ct,At,void 0,Tt),!0):!kt},apply(Ct,At,Tt){let kt=At[o]||At;if(j.isUnsubscribed)return Reflect.apply(Ct,kt,Tt);if((b===!1||b!==!0&&!b.includes(Ct.name))&&Qs.isHandledType(kt)){let It=An.initial(j.getPath(Ct)),Lt=Qs.isHandledMethod(kt,Ct.name);rt.start(kt,It,Tt);let Ft=Reflect.apply(Ct,rt.preferredThisArg(Ct,At,kt),Lt?Tt.map(Gr=>gt(Gr)):Tt),Nt=rt.isChanged(kt,c),Ht=rt.stop();if(Qs.isHandledType(Ft)&&Lt&&(At instanceof Map&&Ct.name==="get"&&(It=An.concat(It,Tt[0])),Ft=j.getProxy(Ft,It,Pt)),Nt){let Gr={name:Ct.name,args:Tt,result:Ft},hs=rt.isCloning?An.initial(It):It,_s=rt.isCloning?An.last(It):"";_e(An.get(e,hs),_s,kt,Ht,Gr)?ut(hs,_s,kt,Ht,Gr):rt.undo(kt)}return(At instanceof Map||At instanceof Set)&&Bw(Ft)?Nw(Ft,Ct,At,It,yt):Ft}return Reflect.apply(Ct,At,Tt)}},wt=j.getProxy(e,i.pathAsArray?[]:"",Pt);return a=a.bind(wt),$&&(i.onValidate=i.onValidate.bind(wt)),wt};Gw.target=e=>e&&e[Vp]||e;Gw.unsubscribe=e=>e[Lw]||e;var jw=Gw,j4=typeof global=="object"&&global&&global.Object===Object&&global,Yy=j4,H4=typeof self=="object"&&self&&self.Object===Object&&self,W4=Yy||H4||Function("return this")(),Kr=W4,q4=Kr.Symbol,Wi=q4,hC=Object.prototype,Y4=hC.hasOwnProperty,X4=hC.toString,Wp=Wi?Wi.toStringTag:void 0;function Q4(e){var a=Y4.call(e,Wp),i=e[Wp];try{e[Wp]=void 0;var o=!0}catch{}var c=X4.call(e);return o&&(a?e[Wp]=i:delete e[Wp]),c}var dC=Q4,K4=Object.prototype,Z4=K4.toString;function J4(e){return Z4.call(e)}var fC=J4,$4="[object Null]",ej="[object Undefined]",pC=Wi?Wi.toStringTag:void 0;function tj(e){return e==null?e===void 0?ej:$4:pC&&pC in Object(e)?dC(e):fC(e)}var os=tj;function rj(e){return e!=null&&typeof e=="object"}var rn=rj,ij="[object Symbol]";function nj(e){return typeof e=="symbol"||rn(e)&&os(e)==ij}var bl=nj;function sj(e,a){for(var i=-1,o=e==null?0:e.length,c=Array(o);++i<o;)c[i]=a(e[i],i,e);return c}var Xy=sj,oj=Array.isArray,Oi=oj,aj=1/0,mC=Wi?Wi.prototype:void 0,gC=mC?mC.toString:void 0;function yC(e){if(typeof e=="string")return e;if(Oi(e))return Xy(e,yC)+"";if(bl(e))return gC?gC.call(e):"";var a=e+"";return a=="0"&&1/e==-aj?"-0":a}var vC=yC,lj=/\s/;function cj(e){for(var a=e.length;a--&&lj.test(e.charAt(a)););return a}var xC=cj,uj=/^\s+/;function hj(e){return e&&e.slice(0,xC(e)+1).replace(uj,"")}var bC=hj;function dj(e){var a=typeof e;return e!=null&&(a=="object"||a=="function")}var bi=dj,SC=NaN,fj=/^[-+]0x[0-9a-f]+$/i,pj=/^0b[01]+$/i,mj=/^0o[0-7]+$/i,gj=parseInt;function yj(e){if(typeof e=="number")return e;if(bl(e))return SC;if(bi(e)){var a=typeof e.valueOf=="function"?e.valueOf():e;e=bi(a)?a+"":a}if(typeof e!="string")return e===0?e:+e;e=bC(e);var i=pj.test(e);return i||mj.test(e)?gj(e.slice(2),i?2:8):fj.test(e)?SC:+e}var Hw=yj;function vj(e){return e}var wC=vj,xj="[object AsyncFunction]",bj="[object Function]",Sj="[object GeneratorFunction]",wj="[object Proxy]";function Aj(e){if(!bi(e))return!1;var a=os(e);return a==bj||a==Sj||a==xj||a==wj}var Qy=Aj,_j=Kr["__core-js_shared__"],Ky=_j,AC=function(){var e=/[^.]+$/.exec(Ky&&Ky.keys&&Ky.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Ej(e){return!!AC&&AC in e}var _C=Ej,Tj=Function.prototype,Mj=Tj.toString;function Cj(e){if(e!=null){try{return Mj.call(e)}catch{}try{return e+""}catch{}}return""}var Sa=Cj,Pj=/[\\^$.*+?()[\]{}|]/g,Dj=/^\[object .+?Constructor\]$/,Oj=Function.prototype,Ij=Object.prototype,Rj=Oj.toString,Lj=Ij.hasOwnProperty,Bj=RegExp("^"+Rj.call(Lj).replace(Pj,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Nj(e){if(!bi(e)||_C(e))return!1;var a=Qy(e)?Bj:Dj;return a.test(Sa(e))}var EC=Nj;function Fj(e,a){return e==null?void 0:e[a]}var TC=Fj;function kj(e,a){var i=TC(e,a);return EC(i)?i:void 0}var Fn=kj,Vj=Fn(Kr,"WeakMap"),Zy=Vj,MC=Object.create,zj=function(){function e(){}return function(a){if(!bi(a))return{};if(MC)return MC(a);e.prototype=a;var i=new e;return e.prototype=void 0,i}}(),CC=zj;function Uj(e,a,i){switch(i.length){case 0:return e.call(a);case 1:return e.call(a,i[0]);case 2:return e.call(a,i[0],i[1]);case 3:return e.call(a,i[0],i[1],i[2])}return e.apply(a,i)}var PC=Uj;function Gj(e,a){var i=-1,o=e.length;for(a||(a=Array(o));++i<o;)a[i]=e[i];return a}var DC=Gj,jj=800,Hj=16,Wj=Date.now;function qj(e){var a=0,i=0;return function(){var o=Wj(),c=Hj-(o-i);if(i=o,c>0){if(++a>=jj)return arguments[0]}else a=0;return e.apply(void 0,arguments)}}var OC=qj;function Yj(e){return function(){return e}}var IC=Yj,Xj=function(){try{var e=Fn(Object,"defineProperty");return e({},"",{}),e}catch{}}(),bh=Xj,Qj=bh?function(e,a){return bh(e,"toString",{configurable:!0,enumerable:!1,value:IC(a),writable:!0})}:wC,RC=Qj,Kj=OC(RC),LC=Kj;function Zj(e,a){for(var i=-1,o=e==null?0:e.length;++i<o&&a(e[i],i,e)!==!1;);return e}var BC=Zj,Jj=9007199254740991,$j=/^(?:0|[1-9]\d*)$/;function eH(e,a){var i=typeof e;return a=a??Jj,!!a&&(i=="number"||i!="symbol"&&$j.test(e))&&e>-1&&e%1==0&&e<a}var Sh=eH;function tH(e,a,i){a=="__proto__"&&bh?bh(e,a,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[a]=i}var Jy=tH;function rH(e,a){return e===a||e!==e&&a!==a}var wh=rH,iH=Object.prototype,nH=iH.hasOwnProperty;function sH(e,a,i){var o=e[a];(!(nH.call(e,a)&&wh(o,i))||i===void 0&&!(a in e))&&Jy(e,a,i)}var Ah=sH;function oH(e,a,i,o){var c=!i;i||(i={});for(var d=-1,g=a.length;++d<g;){var b=a[d],j=o?o(i[b],e[b],b,i,e):void 0;j===void 0&&(j=e[b]),c?Jy(i,b,j):Ah(i,b,j)}return i}var To=oH,NC=Math.max;function aH(e,a,i){return a=NC(a===void 0?e.length-1:a,0),function(){for(var o=arguments,c=-1,d=NC(o.length-a,0),g=Array(d);++c<d;)g[c]=o[a+c];c=-1;for(var b=Array(a+1);++c<a;)b[c]=o[c];return b[a]=i(g),PC(e,this,b)}}var FC=aH,lH=9007199254740991;function cH(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=lH}var _h=cH;function uH(e){return e!=null&&_h(e.length)&&!Qy(e)}var $y=uH,hH=Object.prototype;function dH(e){var a=e&&e.constructor,i=typeof a=="function"&&a.prototype||hH;return e===i}var Eh=dH;function fH(e,a){for(var i=-1,o=Array(e);++i<e;)o[i]=a(i);return o}var kC=fH,pH="[object Arguments]";function mH(e){return rn(e)&&os(e)==pH}var Ww=mH,VC=Object.prototype,gH=VC.hasOwnProperty,yH=VC.propertyIsEnumerable,vH=Ww(function(){return arguments}())?Ww:function(e){return rn(e)&&gH.call(e,"callee")&&!yH.call(e,"callee")},Th=vH;function xH(){return!1}var zC=xH,jC=typeof exports=="object"&&exports&&!exports.nodeType&&exports,UC=jC&&typeof module=="object"&&module&&!module.nodeType&&module,bH=UC&&UC.exports===jC,GC=bH?Kr.Buffer:void 0,SH=GC?GC.isBuffer:void 0,wH=SH||zC,Oc=wH,AH="[object Arguments]",_H="[object Array]",EH="[object Boolean]",TH="[object Date]",MH="[object Error]",CH="[object Function]",PH="[object Map]",DH="[object Number]",OH="[object Object]",IH="[object RegExp]",RH="[object Set]",LH="[object String]",BH="[object WeakMap]",NH="[object ArrayBuffer]",FH="[object DataView]",kH="[object Float32Array]",VH="[object Float64Array]",zH="[object Int8Array]",UH="[object Int16Array]",GH="[object Int32Array]",jH="[object Uint8Array]",HH="[object Uint8ClampedArray]",WH="[object Uint16Array]",qH="[object Uint32Array]",Rr$1={};Rr$1[kH]=Rr$1[VH]=Rr$1[zH]=Rr$1[UH]=Rr$1[GH]=Rr$1[jH]=Rr$1[HH]=Rr$1[WH]=Rr$1[qH]=!0;Rr$1[AH]=Rr$1[_H]=Rr$1[NH]=Rr$1[EH]=Rr$1[FH]=Rr$1[TH]=Rr$1[MH]=Rr$1[CH]=Rr$1[PH]=Rr$1[DH]=Rr$1[OH]=Rr$1[IH]=Rr$1[RH]=Rr$1[LH]=Rr$1[BH]=!1;function YH(e){return rn(e)&&_h(e.length)&&!!Rr$1[os(e)]}var HC=YH;function XH(e){return function(a){return e(a)}}var Mh=XH,WC=typeof exports=="object"&&exports&&!exports.nodeType&&exports,qp=WC&&typeof module=="object"&&module&&!module.nodeType&&module,QH=qp&&qp.exports===WC,qw=QH&&Yy.process,KH=function(){try{var e=qp&&qp.require&&qp.require("util").types;return e||qw&&qw.binding&&qw.binding("util")}catch{}}(),wa=KH,qC=wa&&wa.isTypedArray,ZH=qC?Mh(qC):HC,ev=ZH,JH=Object.prototype,$H=JH.hasOwnProperty;function e5(e,a){var i=Oi(e),o=!i&&Th(e),c=!i&&!o&&Oc(e),d=!i&&!o&&!c&&ev(e),g=i||o||c||d,b=g?kC(e.length,String):[],j=b.length;for(var $ in e)(a||$H.call(e,$))&&!(g&&($=="length"||c&&($=="offset"||$=="parent")||d&&($=="buffer"||$=="byteLength"||$=="byteOffset")||Sh($,j)))&&b.push($);return b}var tv=e5;function t5(e,a){return function(i){return e(a(i))}}var rv=t5,r5=rv(Object.keys,Object),YC=r5,i5=Object.prototype,n5=i5.hasOwnProperty;function s5(e){if(!Eh(e))return YC(e);var a=[];for(var i in Object(e))n5.call(e,i)&&i!="constructor"&&a.push(i);return a}var XC=s5;function o5(e){return $y(e)?tv(e):XC(e)}var Ch=o5;function a5(e){var a=[];if(e!=null)for(var i in Object(e))a.push(i);return a}var QC=a5,l5=Object.prototype,c5=l5.hasOwnProperty;function u5(e){if(!bi(e))return QC(e);var a=Eh(e),i=[];for(var o in e)o=="constructor"&&(a||!c5.call(e,o))||i.push(o);return i}var KC=u5;function h5(e){return $y(e)?tv(e,!0):KC(e)}var bs=h5,d5=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,f5=/^\w*$/;function p5(e,a){if(Oi(e))return!1;var i=typeof e;return i=="number"||i=="symbol"||i=="boolean"||e==null||bl(e)?!0:f5.test(e)||!d5.test(e)||a!=null&&e in Object(a)}var ZC=p5,m5=Fn(Object,"create"),Aa=m5;function g5(){this.__data__=Aa?Aa(null):{},this.size=0}var JC=g5;function y5(e){var a=this.has(e)&&delete this.__data__[e];return this.size-=a?1:0,a}var $C=y5,v5="__lodash_hash_undefined__",x5=Object.prototype,b5$1=x5.hasOwnProperty;function S5(e){var a=this.__data__;if(Aa){var i=a[e];return i===v5?void 0:i}return b5$1.call(a,e)?a[e]:void 0}var eP=S5,w5=Object.prototype,A5=w5.hasOwnProperty;function _5(e){var a=this.__data__;return Aa?a[e]!==void 0:A5.call(a,e)}var tP=_5,E5="__lodash_hash_undefined__";function T5(e,a){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=Aa&&a===void 0?E5:a,this}var rP=T5;function Ph(e){var a=-1,i=e==null?0:e.length;for(this.clear();++a<i;){var o=e[a];this.set(o[0],o[1])}}Ph.prototype.clear=JC;Ph.prototype.delete=$C;Ph.prototype.get=eP;Ph.prototype.has=tP;Ph.prototype.set=rP;var Yw=Ph;function M5(){this.__data__=[],this.size=0}var iP=M5;function C5(e,a){for(var i=e.length;i--;)if(wh(e[i][0],a))return i;return-1}var Sl=C5,P5=Array.prototype,D5=P5.splice;function O5(e){var a=this.__data__,i=Sl(a,e);if(i<0)return!1;var o=a.length-1;return i==o?a.pop():D5.call(a,i,1),--this.size,!0}var nP=O5;function I5(e){var a=this.__data__,i=Sl(a,e);return i<0?void 0:a[i][1]}var sP=I5;function R5(e){return Sl(this.__data__,e)>-1}var oP=R5;function L5(e,a){var i=this.__data__,o=Sl(i,e);return o<0?(++this.size,i.push([e,a])):i[o][1]=a,this}var aP=L5;function Dh(e){var a=-1,i=e==null?0:e.length;for(this.clear();++a<i;){var o=e[a];this.set(o[0],o[1])}}Dh.prototype.clear=iP;Dh.prototype.delete=nP;Dh.prototype.get=sP;Dh.prototype.has=oP;Dh.prototype.set=aP;var wl=Dh,B5=Fn(Kr,"Map"),Al=B5;function N5(){this.size=0,this.__data__={hash:new Yw,map:new(Al||wl),string:new Yw}}var lP=N5;function F5(e){var a=typeof e;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?e!=="__proto__":e===null}var cP=F5;function k5(e,a){var i=e.__data__;return cP(a)?i[typeof a=="string"?"string":"hash"]:i.map}var _l=k5;function V5(e){var a=_l(this,e).delete(e);return this.size-=a?1:0,a}var uP=V5;function z5(e){return _l(this,e).get(e)}var hP=z5;function U5(e){return _l(this,e).has(e)}var dP=U5;function G5(e,a){var i=_l(this,e),o=i.size;return i.set(e,a),this.size+=i.size==o?0:1,this}var fP=G5;function Oh(e){var a=-1,i=e==null?0:e.length;for(this.clear();++a<i;){var o=e[a];this.set(o[0],o[1])}}Oh.prototype.clear=lP;Oh.prototype.delete=uP;Oh.prototype.get=hP;Oh.prototype.has=dP;Oh.prototype.set=fP;var Ic=Oh,j5="Expected a function";function Xw(e,a){if(typeof e!="function"||a!=null&&typeof a!="function")throw new TypeError(j5);var i=function(){var o=arguments,c=a?a.apply(this,o):o[0],d=i.cache;if(d.has(c))return d.get(c);var g=e.apply(this,o);return i.cache=d.set(c,g)||d,g};return i.cache=new(Xw.Cache||Ic),i}Xw.Cache=Ic;var pP=Xw,H5=500;function W5(e){var a=pP(e,function(o){return i.size===H5&&i.clear(),o}),i=a.cache;return a}var mP=W5,q5=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Y5=/\\(\\)?/g,X5=mP(function(e){var a=[];return e.charCodeAt(0)===46&&a.push(""),e.replace(q5,function(i,o,c,d){a.push(c?d.replace(Y5,"$1"):o||i)}),a}),gP=X5;function Q5(e){return e==null?"":vC(e)}var yP=Q5;function K5(e,a){return Oi(e)?e:ZC(e,a)?[e]:gP(yP(e))}var Ss=K5,Z5=1/0;function J5(e){if(typeof e=="string"||bl(e))return e;var a=e+"";return a=="0"&&1/e==-Z5?"-0":a}var El=J5;function $5(e,a){a=Ss(a,e);for(var i=0,o=a.length;e!=null&&i<o;)e=e[El(a[i++])];return i&&i==o?e:void 0}var iv=$5;function eW(e,a){for(var i=-1,o=a.length,c=e.length;++i<o;)e[c+i]=a[i];return e}var Ih=eW,vP=Wi?Wi.isConcatSpreadable:void 0;function tW(e){return Oi(e)||Th(e)||!!(vP&&e&&e[vP])}var xP=tW;function bP(e,a,i,o,c){var d=-1,g=e.length;for(i||(i=xP),c||(c=[]);++d<g;){var b=e[d];a>0&&i(b)?a>1?bP(b,a-1,i,o,c):Ih(c,b):o||(c[c.length]=b)}return c}var SP=bP;function rW(e){var a=e==null?0:e.length;return a?SP(e,1):[]}var wP=rW;function iW(e){return LC(FC(e,void 0,wP),e+"")}var nv=iW,nW=rv(Object.getPrototypeOf,Object),Rh=nW,sW="[object Object]",oW=Function.prototype,aW=Object.prototype,AP=oW.toString,lW=aW.hasOwnProperty,cW=AP.call(Object);function uW(e){if(!rn(e)||os(e)!=sW)return!1;var a=Rh(e);if(a===null)return!0;var i=lW.call(a,"constructor")&&a.constructor;return typeof i=="function"&&i instanceof i&&AP.call(i)==cW}var _P=uW;function hW(e,a,i){var o=-1,c=e.length;a<0&&(a=-a>c?0:c+a),i=i>c?c:i,i<0&&(i+=c),c=a>i?0:i-a>>>0,a>>>=0;for(var d=Array(c);++o<c;)d[o]=e[o+a];return d}var EP=hW;function dW(){this.__data__=new wl,this.size=0}var TP=dW;function fW(e){var a=this.__data__,i=a.delete(e);return this.size=a.size,i}var MP=fW;function pW(e){return this.__data__.get(e)}var CP=pW;function mW(e){return this.__data__.has(e)}var PP=mW,gW=200;function yW(e,a){var i=this.__data__;if(i instanceof wl){var o=i.__data__;if(!Al||o.length<gW-1)return o.push([e,a]),this.size=++i.size,this;i=this.__data__=new Ic(o)}return i.set(e,a),this.size=i.size,this}var DP=yW;function Lh(e){var a=this.__data__=new wl(e);this.size=a.size}Lh.prototype.clear=TP;Lh.prototype.delete=MP;Lh.prototype.get=CP;Lh.prototype.has=PP;Lh.prototype.set=DP;var Bh=Lh;function vW(e,a){return e&&To(a,Ch(a),e)}var OP=vW;function xW(e,a){return e&&To(a,bs(a),e)}var IP=xW,NP=typeof exports=="object"&&exports&&!exports.nodeType&&exports,RP=NP&&typeof module=="object"&&module&&!module.nodeType&&module,bW=RP&&RP.exports===NP,LP=bW?Kr.Buffer:void 0,BP=LP?LP.allocUnsafe:void 0;function SW(e,a){if(a)return e.slice();var i=e.length,o=BP?BP(i):new e.constructor(i);return e.copy(o),o}var FP=SW;function wW(e,a){for(var i=-1,o=e==null?0:e.length,c=0,d=[];++i<o;){var g=e[i];a(g,i,e)&&(d[c++]=g)}return d}var kP=wW;function AW(){return[]}var sv=AW,_W=Object.prototype,EW=_W.propertyIsEnumerable,VP=Object.getOwnPropertySymbols,TW=VP?function(e){return e==null?[]:(e=Object(e),kP(VP(e),function(a){return EW.call(e,a)}))}:sv,Nh=TW;function MW(e,a){return To(e,Nh(e),a)}var zP=MW,CW=Object.getOwnPropertySymbols,PW=CW?function(e){for(var a=[];e;)Ih(a,Nh(e)),e=Rh(e);return a}:sv,ov=PW;function DW(e,a){return To(e,ov(e),a)}var UP=DW;function OW(e,a,i){var o=a(e);return Oi(e)?o:Ih(o,i(e))}var av=OW;function IW(e){return av(e,Ch,Nh)}var Yp=IW;function RW(e){return av(e,bs,ov)}var lv=RW,LW=Fn(Kr,"DataView"),cv=LW,BW=Fn(Kr,"Promise"),uv=BW,NW=Fn(Kr,"Set"),hv=NW,GP="[object Map]",FW="[object Object]",jP="[object Promise]",HP="[object Set]",WP="[object WeakMap]",qP="[object DataView]",kW=Sa(cv),VW=Sa(Al),zW=Sa(uv),UW=Sa(hv),GW=Sa(Zy),Rc=os;(cv&&Rc(new cv(new ArrayBuffer(1)))!=qP||Al&&Rc(new Al)!=GP||uv&&Rc(uv.resolve())!=jP||hv&&Rc(new hv)!=HP||Zy&&Rc(new Zy)!=WP)&&(Rc=function(e){var a=os(e),i=a==FW?e.constructor:void 0,o=i?Sa(i):"";if(o)switch(o){case kW:return qP;case VW:return GP;case zW:return jP;case UW:return HP;case GW:return WP}return a});var _a=Rc,jW=Object.prototype,HW=jW.hasOwnProperty;function WW(e){var a=e.length,i=new e.constructor(a);return a&&typeof e[0]=="string"&&HW.call(e,"index")&&(i.index=e.index,i.input=e.input),i}var YP=WW,qW=Kr.Uint8Array,Fh=qW;function YW(e){var a=new e.constructor(e.byteLength);return new Fh(a).set(new Fh(e)),a}var kh=YW;function XW(e,a){var i=a?kh(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)}var XP=XW,QW=/\w*$/;function KW(e){var a=new e.constructor(e.source,QW.exec(e));return a.lastIndex=e.lastIndex,a}var QP=KW,KP=Wi?Wi.prototype:void 0,ZP=KP?KP.valueOf:void 0;function ZW(e){return ZP?Object(ZP.call(e)):{}}var JP=ZW;function JW(e,a){var i=a?kh(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}var $P=JW,$W="[object Boolean]",e6="[object Date]",t6="[object Map]",r6="[object Number]",i6="[object RegExp]",n6="[object Set]",s6="[object String]",o6="[object Symbol]",a6="[object ArrayBuffer]",l6="[object DataView]",c6="[object Float32Array]",u6="[object Float64Array]",h6="[object Int8Array]",d6="[object Int16Array]",f6="[object Int32Array]",p6="[object Uint8Array]",m6="[object Uint8ClampedArray]",g6="[object Uint16Array]",y6="[object Uint32Array]";function v6(e,a,i){var o=e.constructor;switch(a){case a6:return kh(e);case $W:case e6:return new o(+e);case l6:return XP(e,i);case c6:case u6:case h6:case d6:case f6:case p6:case m6:case g6:case y6:return $P(e,i);case t6:return new o;case r6:case s6:return new o(e);case i6:return QP(e);case n6:return new o;case o6:return JP(e)}}var e2=v6;function x6(e){return typeof e.constructor=="function"&&!Eh(e)?CC(Rh(e)):{}}var t2=x6,b6$1="[object Map]";function S6(e){return rn(e)&&_a(e)==b6$1}var r2=S6,i2=wa&&wa.isMap,w6=i2?Mh(i2):r2,n2=w6,A6="[object Set]";function _6(e){return rn(e)&&_a(e)==A6}var s2=_6,o2=wa&&wa.isSet,E6=o2?Mh(o2):s2,a2=E6,T6=1,M6=2,C6=4,l2="[object Arguments]",P6="[object Array]",D6="[object Boolean]",O6="[object Date]",I6="[object Error]",c2="[object Function]",R6="[object GeneratorFunction]",L6="[object Map]",B6="[object Number]",u2="[object Object]",N6="[object RegExp]",F6="[object Set]",k6="[object String]",V6="[object Symbol]",z6="[object WeakMap]",U6="[object ArrayBuffer]",G6="[object DataView]",j6="[object Float32Array]",H6="[object Float64Array]",W6="[object Int8Array]",q6="[object Int16Array]",Y6="[object Int32Array]",X6="[object Uint8Array]",Q6="[object Uint8ClampedArray]",K6="[object Uint16Array]",Z6="[object Uint32Array]",Or$1={};Or$1[l2]=Or$1[P6]=Or$1[U6]=Or$1[G6]=Or$1[D6]=Or$1[O6]=Or$1[j6]=Or$1[H6]=Or$1[W6]=Or$1[q6]=Or$1[Y6]=Or$1[L6]=Or$1[B6]=Or$1[u2]=Or$1[N6]=Or$1[F6]=Or$1[k6]=Or$1[V6]=Or$1[X6]=Or$1[Q6]=Or$1[K6]=Or$1[Z6]=!0;Or$1[I6]=Or$1[c2]=Or$1[z6]=!1;function dv(e,a,i,o,c,d){var g,b=a&T6,j=a&M6,$=a&C6;if(i&&(g=c?i(e,o,c,d):i(e)),g!==void 0)return g;if(!bi(e))return e;var rt=Oi(e);if(rt){if(g=YP(e),!b)return DC(e,g)}else{var _e=_a(e),st=_e==c2||_e==R6;if(Oc(e))return FP(e,b);if(_e==u2||_e==l2||st&&!c){if(g=j||st?{}:t2(e),!b)return j?UP(e,IP(g,e)):zP(e,OP(g,e))}else{if(!Or$1[_e])return c?e:{};g=e2(e,_e,b)}}d||(d=new Bh);var ut=d.get(e);if(ut)return ut;d.set(e,g),a2(e)?e.forEach(function(Pt){g.add(dv(Pt,a,i,Pt,e,d))}):n2(e)&&e.forEach(function(Pt,wt){g.set(wt,dv(Pt,a,i,wt,e,d))});var gt=$?j?lv:Yp:j?bs:Ch,yt=rt?void 0:gt(e);return BC(yt||e,function(Pt,wt){yt&&(wt=Pt,Pt=e[wt]),Ah(g,wt,dv(Pt,a,i,wt,e,d))}),g}var fv=dv,J6=1,$6=4;function e8(e){return fv(e,J6|$6)}var Ea=e8,t8="__lodash_hash_undefined__";function r8(e){return this.__data__.set(e,t8),this}var h2=r8;function i8(e){return this.__data__.has(e)}var d2=i8;function pv(e){var a=-1,i=e==null?0:e.length;for(this.__data__=new Ic;++a<i;)this.add(e[a])}pv.prototype.add=pv.prototype.push=h2;pv.prototype.has=d2;var f2=pv;function n8(e,a){for(var i=-1,o=e==null?0:e.length;++i<o;)if(a(e[i],i,e))return!0;return!1}var p2=n8;function s8(e,a){return e.has(a)}var m2=s8,o8=1,a8=2;function l8(e,a,i,o,c,d){var g=i&o8,b=e.length,j=a.length;if(b!=j&&!(g&&j>b))return!1;var $=d.get(e),rt=d.get(a);if($&&rt)return $==a&&rt==e;var _e=-1,st=!0,ut=i&a8?new f2:void 0;for(d.set(e,a),d.set(a,e);++_e<b;){var gt=e[_e],yt=a[_e];if(o)var Pt=g?o(yt,gt,_e,a,e,d):o(gt,yt,_e,e,a,d);if(Pt!==void 0){if(Pt)continue;st=!1;break}if(ut){if(!p2(a,function(wt,Ct){if(!m2(ut,Ct)&&(gt===wt||c(gt,wt,i,o,d)))return ut.push(Ct)})){st=!1;break}}else if(!(gt===yt||c(gt,yt,i,o,d))){st=!1;break}}return d.delete(e),d.delete(a),st}var mv=l8;function c8(e){var a=-1,i=Array(e.size);return e.forEach(function(o,c){i[++a]=[c,o]}),i}var g2=c8;function u8(e){var a=-1,i=Array(e.size);return e.forEach(function(o){i[++a]=o}),i}var y2=u8,h8=1,d8=2,f8="[object Boolean]",p8="[object Date]",m8="[object Error]",g8="[object Map]",y8="[object Number]",v8="[object RegExp]",x8="[object Set]",b8$1="[object String]",S8="[object Symbol]",w8="[object ArrayBuffer]",A8="[object DataView]",v2=Wi?Wi.prototype:void 0,Qw=v2?v2.valueOf:void 0;function _8(e,a,i,o,c,d,g){switch(i){case A8:if(e.byteLength!=a.byteLength||e.byteOffset!=a.byteOffset)return!1;e=e.buffer,a=a.buffer;case w8:return!(e.byteLength!=a.byteLength||!d(new Fh(e),new Fh(a)));case f8:case p8:case y8:return wh(+e,+a);case m8:return e.name==a.name&&e.message==a.message;case v8:case b8$1:return e==a+"";case g8:var b=g2;case x8:var j=o&h8;if(b||(b=y2),e.size!=a.size&&!j)return!1;var $=g.get(e);if($)return $==a;o|=d8,g.set(e,a);var rt=mv(b(e),b(a),o,c,d,g);return g.delete(e),rt;case S8:if(Qw)return Qw.call(e)==Qw.call(a)}return!1}var x2=_8,E8=1,T8=Object.prototype,M8=T8.hasOwnProperty;function C8(e,a,i,o,c,d){var g=i&E8,b=Yp(e),j=b.length,$=Yp(a),rt=$.length;if(j!=rt&&!g)return!1;for(var _e=j;_e--;){var st=b[_e];if(!(g?st in a:M8.call(a,st)))return!1}var ut=d.get(e),gt=d.get(a);if(ut&&gt)return ut==a&&gt==e;var yt=!0;d.set(e,a),d.set(a,e);for(var Pt=g;++_e<j;){st=b[_e];var wt=e[st],Ct=a[st];if(o)var At=g?o(Ct,wt,st,a,e,d):o(wt,Ct,st,e,a,d);if(!(At===void 0?wt===Ct||c(wt,Ct,i,o,d):At)){yt=!1;break}Pt||(Pt=st=="constructor")}if(yt&&!Pt){var Tt=e.constructor,kt=a.constructor;Tt!=kt&&"constructor"in e&&"constructor"in a&&!(typeof Tt=="function"&&Tt instanceof Tt&&typeof kt=="function"&&kt instanceof kt)&&(yt=!1)}return d.delete(e),d.delete(a),yt}var b2$1=C8,P8=1,S2="[object Arguments]",w2="[object Array]",gv="[object Object]",D8=Object.prototype,A2=D8.hasOwnProperty;function O8(e,a,i,o,c,d){var g=Oi(e),b=Oi(a),j=g?w2:_a(e),$=b?w2:_a(a);j=j==S2?gv:j,$=$==S2?gv:$;var rt=j==gv,_e=$==gv,st=j==$;if(st&&Oc(e)){if(!Oc(a))return!1;g=!0,rt=!1}if(st&&!rt)return d||(d=new Bh),g||ev(e)?mv(e,a,i,o,c,d):x2(e,a,j,i,o,c,d);if(!(i&P8)){var ut=rt&&A2.call(e,"__wrapped__"),gt=_e&&A2.call(a,"__wrapped__");if(ut||gt){var yt=ut?e.value():e,Pt=gt?a.value():a;return d||(d=new Bh),c(yt,Pt,i,o,d)}}return st?(d||(d=new Bh),b2$1(e,a,i,o,c,d)):!1}var _2=O8;function E2(e,a,i,o,c){return e===a?!0:e==null||a==null||!rn(e)&&!rn(a)?e!==e&&a!==a:_2(e,a,i,o,E2,c)}var T2=E2;function I8(e,a){return e!=null&&a in Object(e)}var M2=I8;function R8(e,a,i){a=Ss(a,e);for(var o=-1,c=a.length,d=!1;++o<c;){var g=El(a[o]);if(!(d=e!=null&&i(e,g)))break;e=e[g]}return d||++o!=c?d:(c=e==null?0:e.length,!!c&&_h(c)&&Sh(g,c)&&(Oi(e)||Th(e)))}var C2=R8;function L8(e,a){return e!=null&&C2(e,a,M2)}var P2=L8,B8=function(){return Kr.Date.now()},yv=B8,N8="Expected a function",F8=Math.max,k8=Math.min;function V8(e,a,i){var o,c,d,g,b,j,$=0,rt=!1,_e=!1,st=!0;if(typeof e!="function")throw new TypeError(N8);a=Hw(a)||0,bi(i)&&(rt=!!i.leading,_e="maxWait"in i,d=_e?F8(Hw(i.maxWait)||0,a):d,st="trailing"in i?!!i.trailing:st);function ut(It){var Lt=o,Ft=c;return o=c=void 0,$=It,g=e.apply(Ft,Lt),g}function gt(It){return $=It,b=setTimeout(wt,a),rt?ut(It):g}function yt(It){var Lt=It-j,Ft=It-$,Nt=a-Lt;return _e?k8(Nt,d-Ft):Nt}function Pt(It){var Lt=It-j,Ft=It-$;return j===void 0||Lt>=a||Lt<0||_e&&Ft>=d}function wt(){var It=yv();if(Pt(It))return Ct(It);b=setTimeout(wt,yt(It))}function Ct(It){return b=void 0,st&&o?ut(It):(o=c=void 0,g)}function At(){b!==void 0&&clearTimeout(b),$=0,o=j=c=b=void 0}function Tt(){return b===void 0?g:Ct(yv())}function kt(){var It=yv(),Lt=Pt(It);if(o=arguments,c=this,j=It,Lt){if(b===void 0)return gt(j);if(_e)return clearTimeout(b),b=setTimeout(wt,a),ut(j)}return b===void 0&&(b=setTimeout(wt,a)),g}return kt.cancel=At,kt.flush=Tt,kt}var Lc=V8;function z8(e){var a=e==null?0:e.length;return a?e[a-1]:void 0}var D2=z8;function U8(e,a){return a.length<2?e:iv(e,EP(a,0,-1))}var O2=U8;function G8(e,a){return T2(e,a)}var Xp=G8;function j8(e,a){return a=Ss(a,e),e=O2(e,a),e==null||delete e[El(D2(a))]}var I2=j8;function H8(e){return _P(e)?void 0:e}var R2=H8,W8=1,q8=2,Y8=4,X8=nv(function(e,a){var i={};if(e==null)return i;var o=!1;a=Xy(a,function(d){return d=Ss(d,e),o||(o=d.length>1),d}),To(e,lv(e),i),o&&(i=fv(i,W8|q8|Y8,R2));for(var c=a.length;c--;)I2(i,a[c]);return i}),Vh=X8;function Q8(e,a,i,o){if(!bi(e))return e;a=Ss(a,e);for(var c=-1,d=a.length,g=d-1,b=e;b!=null&&++c<d;){var j=El(a[c]),$=i;if(j==="__proto__"||j==="constructor"||j==="prototype")return e;if(c!=g){var rt=b[j];$=o?o(rt,j,b):void 0,$===void 0&&($=bi(rt)?rt:Sh(a[c+1])?[]:{})}Ah(b,j,$),b=b[j]}return e}var L2=Q8;function K8(e,a,i){for(var o=-1,c=a.length,d={};++o<c;){var g=a[o],b=iv(e,g);i(b,g)&&L2(d,Ss(g,e),b)}return d}var B2=K8;function Z8(e,a){return B2(e,a,function(i,o){return P2(e,o)})}var N2=Z8,J8=nv(function(e,a){return e==null?{}:N2(e,a)}),as=J8,$8="Expected a function";function eq(e,a,i){var o=!0,c=!0;if(typeof e!="function")throw new TypeError($8);return bi(i)&&(o="leading"in i?!!i.leading:o,c="trailing"in i?!!i.trailing:c),Lc(e,a,{leading:o,maxWait:a,trailing:c})}var Kw=eq;function vv(e){for(let a of Object.keys(e))e[a]===void 0&&delete e[a];return e}function _n(e,a){return Object.setPrototypeOf(e,a),e}var tq=()=>typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().includes(" electron/"),rq=()=>typeof window>"u"?!1:window.navigator.platform.toUpperCase().includes("MAC"),iq=()=>typeof window>"u"?!1:/iPad|iPhone|iPod/.test(window.navigator.userAgent)||zh&&"ontouchend"in document,nq=()=>typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1,sq=()=>typeof window>"u"?!1:"ontouchstart"in window||navigator.maxTouchPoints>0,oq=()=>{if(typeof window>"u")return!1;let e=navigator.userAgent,a=navigator.vendor;return/Safari/i.test(e)&&/Apple Computer/.test(a)},aq=()=>{if(typeof window>"u")return null;let e=navigator.userAgent.match(/Version\/(\d+\.\d)/);return e&&e[1]},lq=()=>{if(typeof window>"u")return;let e=new URLSearchParams(window.location.search).get("desktop-app-version");return e?(window.localStorage.setItem("desktop-app-version",e),e):window.localStorage.getItem("desktop-app-version")??"0.0.6"},cq=tq();cq&&lq();var zh=rq(),Uh=iq(),F2=nq(),Ii=sq(),Zw=oq(),Jw=Number(aq());function xv(e){return Array.isArray(e)?e:[e]}function bv(e,a){let i=0;for(;i<e.length&&i<a.length;){if(e[i]<a[i])return-1;if(e[i]>a[i])return 1;i+=1}return i!==a.length?-1:i!==e.length?1:0}function Qp(e){return zh?e.metaKey:e.ctrlKey}function k2(e){return e.wheelDeltaY===0||e.deltaY===0?zh&&e.shiftKey&&Math.abs(e.wheelDeltaX)>=120?!1:e.wheelDeltaX?e.wheelDeltaX===-3*e.deltaX||e.wheelDeltaX===-3*window.devicePixelRatio*e.deltaX:e.deltaMode===0:e.wheelDeltaY?e.wheelDeltaY===-3*e.deltaY||e.wheelDeltaY===-3*window.devicePixelRatio*e.deltaY:e.deltaMode===0}var $e$1=[],wv={},Kp={},Sv={};function V2(e){$e$1.includes(e)||$e$1.push(e)}function Gh(e){delete wv[e.pointerId];for(let a=0;a<$e$1.length;a++)if($e$1[a].pointerId===e.pointerId){$e$1.splice(a,1);break}}function z2(){$e$1.splice(0,$e$1.length)}function Av(e){if(e.pointerType!=="touch")return;let a=wv[e.pointerId];a===void 0&&(a={x:0,y:0},wv[e.pointerId]=a),a.x=e.pageX,a.y=e.pageY}function _v(e){let a=e.pointerId===$e$1[0].pointerId?$e$1[1]:$e$1[0];return wv[a.pointerId]}function U2(e){Kp[e.key]=!0,Sv[e.key]=Sv[e.key]===void 0?1:Sv[e.key]+1}function G2(e){if(zh&&Kp.Meta)for(let a in Kp)Kp[a]=!1;else Kp[e.key]=!1;Sv={}}function j2(e){e.addEventListener("pointerdown",V2,!0),e.addEventListener("pointerdown",Av,!0),e.addEventListener("pointermove",Av,!0),e.addEventListener("pointerup",Gh,!0),e.addEventListener("pointercancel",Gh,!0),e.addEventListener("pointerleave",Gh,!0),window.addEventListener("keydown",U2,!0),window.addEventListener("keyup",G2,!0)}function H2(e){e.removeEventListener("pointerdown",V2,!0),e.removeEventListener("pointerdown",Av,!0),e.removeEventListener("pointermove",Av,!0),e.removeEventListener("pointerup",Gh,!0),e.removeEventListener("pointercancel",Gh,!0),e.removeEventListener("pointerleave",Gh,!0),window.removeEventListener("keydown",U2,!0),window.removeEventListener("keyup",G2,!0)}var W2,q2=new Promise(e=>{W2=e}),Ev;function Y2(){if(Ev)return Ev;async function e(){let a="https://unpkg.com/@splinetool/navmesh-wasm@1.0.26/build",i=__vitePreload(()=>import("./navmesh-QdgGSsus.js"),__vite__mapDeps([])),[o,c]=await Promise.all([i,fetch(`${a}/navmesh.wasm`).then(b=>b.arrayBuffer())]),d=o.default,g=await d({wasmBinary:c});W2(g)}return Ev=e(),Ev}var X2,Q2=new Promise(e=>{X2=e}),Tv;function K2(){if(Tv)return Tv;async function e(){let a=await __vitePreload(()=>import("./physics-XY0FX9ij.js"),__vite__mapDeps([]));await a.init(),X2(a)}return Tv=e(),Tv}var it=class{modifyById(e,a){let i=this;if(i[e]===void 0)throw new Error("not expected");{let o={...i,[e]:a};return Object.setPrototypeOf(o,it.prototype),o}}add(e,a){var i;return((i=this.runOp({type:1,id:e,data:a}))==null?void 0:i.data)??this}runOp(e){let a=this;if(e.type===1){let i=a[e.id],o;i===void 0?o={type:2,id:e.id}:o={type:1,id:e.id,data:i};let{id:c,data:d}=e,g={...a,[c]:d};return Object.setPrototypeOf(g,it.prototype),{data:g,actual:e,reverse:o}}else if(e.type===2){let{id:i}=e,o=a[i];if(o===void 0)return null;{let c={...a};return Object.setPrototypeOf(c,it.prototype),delete c[i],{data:c,actual:e,reverse:{type:1,id:i,data:o}}}}return null}};function Zp(e){if(e.deepFreeze!==void 0){e.deepFreeze(e);return}let a=Object.getOwnPropertyNames(e);for(let i of a){let o=e[i];o&&typeof o=="object"&&Zp(o)}return Object.freeze(e)}function Z2(e,a){let i=0;for(;i<e.length&&i<a.length;){if(e[i]<a[i])return-1;if(e[i]>a[i])return 1;i+=1}return i!==a.length?-1:i!==e.length?1:0}var jh=class extends Error{};function Mv(e){let a={...e};return Object.setPrototypeOf(a,Object.getPrototypeOf(e)),a}function Mo(e,a,i){if(e===void 0?a===void 0?(e=0,a=10):e=a-10:a===void 0&&(a=e+10),e>a){let d=e;e=a,a=d}let o=[],c=1/(i+1);for(let d=0;d<i;d++){let g=e+(a-e)*(d+.75+Math.random()*.5)*c;o.push(g)}return o}function Hh(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array}function J2(){return typeof process<"u"}function $2(e,a){for(let i of e)a(i.id,i.data)!==!0&&$2(i.children,a)}function eD(e,a){if(a(e.id,e.data)!==!0)for(let i of e.children)eD(i,a)}var yr$1=class extends Array{constructor(...a){super(...a),Object.setPrototypeOf(this,yr$1.prototype)}deepFreeze(){let a=0;for(;a<this.length;)Zp(this[a]),a++}fillCaches0(a,i){this.objCaches.set(a.id,a),this.parentCaches.set(a.id,i);for(let o of a.children)this.fillCaches0(o,a.id)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,this.parentCaches=new Map;for(let a of this)this.fillCaches0(a,null)}}randomId(){this.fillCaches();let a=Array.from(this.objCaches.keys());if(a.length!==0)return a[Math.max(0,Math.floor(Math.random()*a.length)-1)]}nonExistOrDescendantOf(a,i){if(!this.has(a))return!0;for(;a;){let o=this.parent(a);if(o===i)return!0;a=o}return!1}rootAcestor(a){for(;a;){let i=this.parent(a);if(i)a=i;else return a}return a}isDescendantOf(a,i){for(;a;){let o=this.parent(a);if(o===i)return!0;a=o}return!1}data(a){var i;return(i=this.get(a))==null?void 0:i.data}has(a){return this.childrenOf(a)!==void 0}get(a){return this.fillCaches(),this.objCaches.get(a)}childrenOf(a){var i;return a===null?this:(i=this.get(a))==null?void 0:i.children}traverseFrom(a,i){if(a===null)this.traverse(i);else{let o=this.get(a);o&&eD(o,i)}}traverse(a){$2(this,a)}totalSize(){return this.fillCaches(),this.objCaches.size}parent(a){return this.fillCaches(),this.parentCaches.get(a)}childrenArray(a){return a===null?this:this.get(a).children}modifyById(a,i){if(this.get(a)===void 0)throw new Error("not expected");{let o=this.parent(a),c=this.childrenArray(o),d=c.findIndex(b=>b.id===a);if(d<0)throw new Error("not expected");let g=c[d];return c=[...c],c[d]={...g,data:i},this.modifyArrayBy(o,c)}}modifyArrayBy(a,i){let o=a,c=i;for(;o!==null;){let g=c,b=o;if(o=this.parent(o),o===void 0)throw new Error;c=this.childrenArray(o);let j=c.findIndex($=>$.id===b);if(j<0)throw new Error;c=[...c],c[j]={...c[j],children:g}}Object.setPrototypeOf(c,yr$1.prototype);let d=c;return d.fillCaches(),d}runOp(a){switch(a.type){case 7:return this.addOp(a);case 8:return this.deleteOp(a);case 9:return this.moveOp(a)}return null}checkDuplicatedIdRec({id:a,children:i}){if(this.get(a)!==void 0)return!0;for(let o of i)if(this.checkDuplicatedIdRec(o))return!0;return!1}addOp(a){let{parent:i,fi:o,id:c,data:d,children:g}=a;if(i!==null&&this.get(i)===void 0||this.checkDuplicatedIdRec(a))return null;{let b=i,j=this.childrenArray(b),$={fi:o,id:c,data:d,children:g};return j=[...j,$],j.sort((rt,_e)=>rt.fi-_e.fi),a.localIndex=j.indexOf($),{data:this.modifyArrayBy(b,j),actual:a,reverse:{type:8,id:c}}}}deleteOp(a){let{id:i}=a;if(this.get(i)===null)return null;{let o=this.parent(i);if(o===void 0)return null;let c=this.childrenArray(o),d=c.findIndex(b=>b.id===i);a.localIndex=d,c=[...c];let g=c.splice(d,1)[0];return{data:this.modifyArrayBy(o,c),actual:a,reverse:{type:7,...g,parent:o}}}}moveOp(a){let{parent:i,fi:o,id:c}=a;if(i!==null&&this.get(i)===void 0)return this.deleteOp({type:8,id:c});if(i!==null){let st=i;for(;st!==null;){if(st===void 0)throw new Error;if(st===c)throw new jh("cyclic tree");st=this.parent(st)}}let d=this.parent(c);if(d===void 0)return null;let g=d,b=this.childrenArray(d),j=b.findIndex(st=>st.id===c);b=[...b];let $=b.splice(j,1)[0],rt=this.modifyArrayBy(d,b);d=i,b=rt.childrenArray(d);let _e=$.fi;return $={...$,fi:o},b=[...b,$],b.sort((st,ut)=>st.fi-ut.fi),a.localIndex=b.indexOf($),rt=rt.modifyArrayBy(d,b),{data:rt,actual:a,reverse:{type:9,parent:g,fi:_e,id:c}}}previous(a,i){if(i===null){let c=this.childrenArray(a);return c.length===0?null:c[c.length-1].id}let o=null;for(let c of this.childrenArray(a)){if(c.id===i)return o;o=c.id}return null}traverseSortNext(a){let i=this.parent(a);if(i!==void 0){let o=this.childrenArray(i),c=o.findIndex(d=>d.id===a)+1;if(c<o.length)return o[c].id;if(i)return this.traverseSortNext(i)}}sortNext(a){let i=this.childrenArray(a);return i.length>0?i[0].id:this.traverseSortNext(a)}traverseSortPrevious(a){let i=this.childrenArray(a);return i.length>0?this.traverseSortPrevious(i[i.length-1].id):a}sortPrevious(a){let i=this.parent(a);if(i!==void 0){let o=this.childrenArray(i),c=o.findIndex(d=>d.id===a)-1;return c>=0?this.traverseSortPrevious(o[c].id):i}}getAllSorted(a){let i=[];for(let o of a){let c=this.getWithSortKey(o.id);c!==void 0&&i.push({...o,...c})}i.sort((o,c)=>Z2(o.sortKey,c.sortKey));for(let o of i)delete o.sortKey;return i}getWithSortKey(a){var i=a;let o=[],c=this.get(i),d=c;if(c!==void 0){for(;i;)o.splice(0,0,c.fi),i=this.parent(i),i!==null&&(c=this.get(i));return{...d,sortKey:o}}}insertBeforeHelper(a,i,o){return this.insertAfterHelper(a,this.previous(a,i),o)}insertAfterHelper(a,i,o){let c=this.childrenArray(a);if(i===null){if(c.length===0)return Mo(0,o,o);{let d=c[0].fi;return Mo(d-o,d,o)}}else{let d=this.get(i);if(d===void 0||this.parent(i)!==a)throw new Error("illegal args");let g=c.find(b=>b.fi>d.fi);if(g===void 0){let b=c[c.length-1].fi;return Mo(b,b+o,o)}else return Mo(d.fi,g.fi,o)}}},Wh;(e=>{function a(i,o){if(o.type!==0)return null;if(Array.isArray(i)){let c=o.props,d={},g=[...i],b=!1;if(c)for(let j of Object.keys(c)){let $=parseInt(j);if(isNaN($))throw new Error("wrong index");d[j]=g[$],g[$]=c[j],b=!0}return b?{data:g,actual:o,reverse:{type:0,props:d}}:null}else{let c=o.props,d={},g={...i},b=!1;if(c)for(let j of Object.keys(c)){d[j]=g[j];let $=c[j];$===void 0?delete g[j]:g[j]=$,b=!0}return b?{data:g,actual:o,reverse:{type:0,props:d}}:null}}e.runOp=a})(Wh||(Wh={}));var Ue=class extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Ue.prototype)}deepFreeze(){let e=0;for(;e<this.length;)Zp(this[e]),e++}fillCaches0(e){this.objCaches.set(e.id,e)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,Object.getOwnPropertyDescriptor(this,"objCaches").enumerable=!1;for(let e of this)this.fillCaches0(e)}}randomId(){this.fillCaches();let e=Array.from(this.objCaches.keys());if(e.length!==0)return e[Math.max(0,Math.floor(Math.random()*e.length)-1)]}data(e){var a;return(a=this.get(e))==null?void 0:a.data}get(e){return this.fillCaches(),this.objCaches.get(e)}modifyById(e,a){if(this.get(e)===void 0)throw new Error("not expected");{let i=this,o=i.findIndex(d=>d.id===e);if(o<0)throw new Error("not expected");let c=i[o];return i=[...i],i[o]={...c,data:a},this.modifyArrayBy(i)}}modifyArrayBy(e){Object.setPrototypeOf(e,Ue.prototype);let a=e;return J2()||a.fillCaches(),a}runOp(e){switch(e.type){case 4:return this.addOp(e);case 5:return this.deleteOp(e);case 6:return this.moveOp(e)}return null}addOp(e){let{fi:a,id:i,data:o}=e,c=this,d={fi:a,id:i,data:o};return c=[...c,d],c.sort((g,b)=>g.fi-b.fi),e.localIndex=c.indexOf(d),{data:this.modifyArrayBy(c),actual:e,reverse:{type:5,id:i}}}deleteOp(e){let{id:a}=e,i=this,o=i.findIndex(d=>d.id===a);if(o===-1)return null;e.localIndex=o,i=[...i];let c=i.splice(o,1)[0];return{data:this.modifyArrayBy(i),actual:e,reverse:{type:4,...c}}}moveOp(e){let{fi:a,id:i}=e,o=this;o=[...o];let c=o.findIndex(b=>b.id===i);if(c===-1)return null;let d=o[c].fi,g={...o[c],fi:a};return o[c]=g,o.sort((b,j)=>b.fi-j.fi),e.localIndex=o.indexOf(g),{data:this.modifyArrayBy(o),actual:e,reverse:{type:6,fi:d,id:i}}}previous(e){if(e===null)return this.length===0?null:this[this.length-1].id;let a=null;for(let i of this){if(i.id===e)return a;a=i.id}return null}insertBeforeHelper(e,a){return this.insertAfterHelper(this.previous(e),a)}insertAfterHelper(e,a){let i=this;if(e===null){if(i.length===0)return Mo(0,a,a);{let o=i[0].fi;return Mo(o-a,o,a)}}else{let o=this.get(e);if(o===void 0)throw new Error("illegal args");let c=i.find(d=>d.fi>o.fi);if(c===void 0){let d=i[i.length-1].fi;return Mo(d,d+a,a)}else return Mo(o.fi,c.fi,a)}}};function qh(e){return e&&typeof e=="object"&&e instanceof vr}var vr=class{unusedFunOverridesTable(e){}runOp(e){let a=[],i=this,o=0,c={};for(;o<e.path.length;){if(a.push(i),i=i===void 0?void 0:i[e.path[o]],i!==void 0&&!qh(i))return null;o+=1}i=i?Mv(i):new vr;for(let[b,j]of Object.entries(e.props)){let $=i[b];c[b]=$,j===void 0?delete i[b]:i[b]=j}for(;o>0;){if(Object.keys(i).length===0){let b=a[o-1];b&&(i=Mv(b),delete i[e.path[o-1]])}else{let b=a[o-1];if(b){let j=Mv(b);j[e.path[o-1]]=i,i=j}else{let j=new vr;j[e.path[o-1]]=i,i=j}}o-=1}let d=Object.setPrototypeOf(i,vr.prototype),g={...e,props:c};return{data:d,actual:e,reverse:g}}},Co;(e=>{function a(c,d){return Jp(c,d)??c}e.apply=a;function i(c,d){return e1(c,d)}e.merge=i;function o(c,d){let g=0,b=d.path,j=c;for(;g<b.length&&j!==void 0;){if(j=Nr$1.zoomOnce(j,b[g]),j===void 0)return d;if(!qh(j))return;g+=1}if(j===void 0)return d;if(qh(j))if(d.type===0){let $={...d.props};for(let rt of Object.keys(j))delete $[rt];return{...d,props:$}}else if(d.type===1||d.type===4||d.type===7){let $=$w([d],j);return $?(console.log($),$):d}else return d}e.filterOp=o})(Co||(Co={}));function $w(e,a){if(a===void 0)return;let i=!1,o=e.map(c=>{let d=c.id,g=Jp(c.data,a[d]);if(i=i||g!==void 0,g===void 0&&(g=c.data),c.children){let b=$w(c.children,a);return b!==void 0?i=!0:b=c.children,{...c,id:d,data:g,children:b}}else return{...c,id:d,data:g}});if(i)return o}function uq(e,a){if(a===void 0)return;let i=!1,o=e.map(c=>{let d=c.id,g=Jp(c.data,a[d]);return i=i||g!==void 0,g===void 0&&(g=c.data),{...c,id:d,data:g}});if(i)return Object.setPrototypeOf(o,Object.getPrototypeOf(e)),o}function Jp(e,a){if(!qh(a))return a;if(e instanceof yr$1){let i=$w(e,a);return i!==void 0&&Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i}else{if(e instanceof Ue)return uq(e,a);if(Array.isArray(e)){let i=!1,o=e.map((c,d)=>{let g=Jp(c,a[d]);return i=i||g!==void 0,g===void 0&&(g=c),g});return i?(Object.setPrototypeOf(o,Object.getPrototypeOf(e)),o):void 0}else{if(e instanceof vr)return e1(e,a);if(e&&typeof e=="object"){let i={},o=!1;for(let[c,d]of Object.entries(e)){let g=Jp(d,a[c]);o=o||g!==void 0,g===void 0&&(g=d),i[c]=g}return o?(Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i):void 0}}}}function e1(e,a){if(e===void 0)return a;if(a===void 0)return e;if(!qh(a))return a;if(!qh(e))return Co.apply(e,a);let i=new Set;for(let c of Object.keys(e))i.add(c);for(let c of Object.keys(a))i.add(c);let o=new vr;for(let c of i){let d=e1(e===void 0?void 0:e[c],a===void 0?void 0:a[c]);o[c]=d}return o}function tD(e,a){let i={cur:[],result:[],len:0};return e=$p(e,a,i)??e,[e,i.result]}function Cv(e,a){return e===null?null:(e.cur[e.len]=a,e.len+=1,e)}function Pv(e){e&&(e.len-=1)}function hq(e){if(e===null)return null;e.result.push(e.cur.slice(0,e.len))}function rD(e,a,i){let o=!1,c=e.map(d=>{let g=d.id,b=a[g];if(b!==void 0&&typeof b=="string"&&(o=!0,g=b,i!==null))throw new Error("not supported");let j=$p(d.data,a,Cv(i,g));Pv(i),o=o||j!==void 0,j===void 0&&(j=d.data);let $=rD(d.children,a,i);return $!==void 0?o=!0:$=d.children,{...d,id:g,data:j,children:$}});if(o)return c}function dq(e,a,i){let o=!1,c=e.map(d=>{let g=d.id,b=a[g];if(b!==void 0&&typeof b=="string"&&(o=!0,g=b,i!==null))throw new Error("not supported");let j=$p(d.data,a,Cv(i,g));return Pv(i),o=o||j!==void 0,j===void 0&&(j=d.data),{...d,id:g,data:j}});if(o)return Object.setPrototypeOf(c,Object.getPrototypeOf(e)),c}function $p(e,a,i){if(e instanceof yr$1){let o=rD(e,a,i);return o!==void 0&&Object.setPrototypeOf(o,Object.getPrototypeOf(e)),o}else{if(e instanceof Ue)return dq(e,a,i);if(Array.isArray(e)){let o=!1,c=e.map((d,g)=>{let b=$p(d,a,Cv(i,g));return Pv(i),o=o||b!==void 0,b===void 0&&(b=d),b});return o?(Object.setPrototypeOf(c,Object.getPrototypeOf(e)),c):void 0}else if(e&&typeof e=="object"&&!Hh(e)){let o={},c=!1;for(let[d,g]of Object.entries(e))if(d!=="name"){let b=a[d];if(typeof b=="string"){if(i!==null)throw new Error("not supported");c=!0,d=b}let j=$p(g,a,Cv(i,d));Pv(i),c=c||j!==void 0,j===void 0&&(j=g),o[d]=j}else o[d]=g;return c?(Object.setPrototypeOf(o,Object.getPrototypeOf(e)),o):void 0}else if(typeof e=="string"){let o=a[e];return o!==void 0&&hq(i),o}else return}}var Yh;(e=>{function a(i,o){let c=Nr$1.zoom(o,i.path);if(typeof c=="object"){let d={};for(let g of Object.keys(i.props))d[g]=c[g];return{...i,props:d}}else return{...i,props:{}}}e.replaceProps=a})(Yh||(Yh={}));var Fr$1;(e=>{function a(j,$){return{...j,path:j.path.slice($)}}e.drop=a;function i(j,$){var rt;return((rt=o(j,$))==null?void 0:rt.data)??j}e.applySimple=i;function o(j,$){var st,ut;let rt=$.path;for(var _e=[];;){let gt;if(j instanceof vr&&$.type===0&&(gt=j.runOp({...$,path:rt.slice(_e.length)}),gt===null&&(gt=void 0)),gt===void 0&&_e.length===rt.length&&(j instanceof yr$1||j instanceof Ue||j instanceof it?gt=j.runOp($):gt=Wh.runOp(j,$)),gt!==void 0)if(gt!==null){let wt=gt.data;for(let Ct=_e.length-1;Ct>=0;Ct--){let At=rt[Ct],Tt=_e[Ct];if(Tt instanceof yr$1){if(typeof At=="number")throw new Error("illegal arg");wt=Tt.modifyById(At,wt)}else if(Tt instanceof Ue){if(typeof At=="number")throw new Error("illegal arg");wt=Tt.modifyById(At,wt)}else if(Tt instanceof it){if(typeof At=="number")throw new Error("illegal arg");wt=Tt.modifyById(At,wt)}else if(Tt instanceof vr){let kt={...Tt,[At]:wt};wt=Object.setPrototypeOf(kt,vr.prototype)}else if(typeof Tt=="object")if(Array.isArray(Tt)){if(typeof At=="string"&&(At=parseInt(At),isNaN(At)))throw new Error("Invalid path");let kt=wt;wt=[...Tt],wt[At]=kt}else wt={...Tt,[At]:wt};else return null}return{data:wt,actual:{...gt.actual,path:rt},reverse:{...gt.reverse,path:rt}}}else return null;let yt=rt[_e.length],Pt;if(j instanceof yr$1){if(typeof yt=="number")throw new Error("");Pt=(st=j.get(yt))==null?void 0:st.data}else if(j instanceof Ue){if(typeof yt=="number")throw new Error("");Pt=(ut=j.get(yt))==null?void 0:ut.data}else j!==null&&(Pt=j[yt]);if(Pt!==void 0)_e.push(j),j=Pt;else return null}}e.apply=o;function c(j,$){for(let rt=0;rt<j.length&&rt<$.length;rt++)if(j[rt]!==$[rt])return!0;return!1}e.pathDisjoint=c;function d(j,$){if(j.length!==$.length)return!1;for(let rt=0;rt<j.length;rt++)if(j[rt]!==$[rt])return!1;return!0}e.pathEq=d;function g(j,$){return c(j.path,$.path)}e.commutative=g;function b(j,$){return j.type===0&&$.type===0&&d(j.path,$.path)?Object.keys(j.props).every(rt=>$.props[rt]!==void 0):!1}e.subsumed=b})(Fr$1||(Fr$1={}));var em;(e=>{function a(){return[]}e.empty=a;function i($,rt){let _e=[];for(let st of $){let[ut,...gt]=st.path;ut===rt&&_e.push({...st,path:gt})}return _e}e.removePrefix=i;function o($,rt){return $.map(_e=>({..._e,path:[rt,..._e.path]}))}e.addPrefix=o;function c($,rt){return[...$,...rt]}e.concat=c;function d($,rt){return[...$.filter(_e=>!rt.some(st=>Fr$1.subsumed(_e,st))),...rt]}e.compress=d;function g($,rt){return $.every(_e=>rt.every(st=>Fr$1.commutative(_e,st)))}e.commutative=g;function b($,rt){for(let _e of rt){let st=j($,_e);st!==null&&($=st.data)}return $}e.applyAll=b;function j($,rt){var _e=$;let st=[],ut=[];for(let gt of rt)try{if(gt.type===3||gt.type===5&&gt.path[gt.path.length-1]==="variables"){let yt,Pt,wt;if(gt.type===3?(yt=Nr$1.zoom(_e,[...gt.path,gt.id]),wt=Fr$1.apply(_e,{...gt,type:2})):(yt=Nr$1.zoom(_e,[...gt.path,gt.id,"value"]),wt=Fr$1.apply(_e,gt)),wt!==null){_e=wt.data;let[Ct,At]=tD(_e,{[gt.id]:yt});_e=Ct;for(let Tt=0;Tt<At.length;Tt++){let kt=At[Tt],It=kt.pop();if(typeof It=="number"){let Lt=[It];for(let Nt=Tt+1;Nt<At.length;Nt++){let Ht=At[Nt],Gr=Ht[Ht.length-1];if(typeof Gr=="number"&&Nr$1.equal(kt,Ht.slice(0,Ht.length-1)))Lt.push(Gr),At.splice(Nt,1);else break}let Ft=Nr$1.zoom(_e,kt);Pt=Ft.map((Nt,Ht)=>Lt.includes(Ht)?gt.id:Nt),yt=Ft,It=kt.pop()}else{if(It==="alphaOverride"||It==="alpha"){yt/=100;let Lt=yt,Ft=Nr$1.zoom(_e,kt.slice(0,kt.length-2)),Nt=Ft.layers.map(Ht=>Ht.id===kt[kt.length-1]?{...Ht,data:{...Ht.data,[It]:Lt}}:Ht);Object.setPrototypeOf(Nt,Object.getPrototypeOf(Ft.layers)),Ft.layers=Nt}Pt=gt.id}st.push({type:0,path:kt,props:{[It]:yt}}),ut.push({type:0,path:kt,props:{[It]:Pt}})}ut.push(wt.reverse),st.push(wt.actual)}}else{let yt=Fr$1.apply(_e,gt);yt!==null&&(st.push(yt.actual),_e=yt.data,ut.push(yt.reverse))}}catch(yt){if(yt instanceof jh)return null;throw yt}return{data:_e,actual:st,reverse:ut.reverse()}}e.apply=j})(em||(em={}));var iD=Symbol(),fq=Symbol(),Ov=Symbol(),Bc=class{reportOp(e,a,i=[]){let o=this;if(a===null)return;o._current=a.data;let c=i;for(;!(o instanceof Dv);){let d=o._path,g=o._current;if(d!==""&&c.splice(0,0,d),o=o._parent,o===null)return;o.update(d,g)}o.push(c,e,a.actual,a.reverse)}deleteChildren(e){if(this._children){let a=this._children[e];if(a){let i=a[Ov];i&&i(),delete this._children[e]}}}},r1=class extends Bc{constructor(e,a,i){super(),this._parent=e,this._path=a,this._current=i}update(e,a){if(Array.isArray(this._current)){if(typeof e=="string"&&(e=parseInt(e),isNaN(e)))throw new Error("Invalid path");this._current=[...this._current],this._current[e]=a}else this._current={...this._current,[e]:a}}runOp(e){this.reportOp(e,Wh.runOp(this._current,e),e.path)}},i1=class extends Bc{constructor(e,a,i){super(),this._parent=e,this._path=a,this._current=i}update(e,a){this._current={...this._current,[e]:a},Object.setPrototypeOf(this._current,it.prototype)}runOp(e){this.reportOp(e,this._current.runOp(e))}},nD={get(e,a){if(a===Ov)return()=>{e._parent=null};if(a===iD)return e._current;if(a===fq)return e;let{_current:i,_children:o}=e;if(a==="push"&&Array.isArray(i))throw new Error("not supported to expand array");let c=o===void 0?void 0:o[a];if(c!==void 0)return c;let d=i[a],g=Iv(e,a,d);return g!==d?(o===void 0&&(o={},e._children=o),o[a]=g,g):d},has(e,a){return a in e._current},ownKeys(e){return Reflect.ownKeys(e._current)},defineProperty(){throw Error("not supported")},getPrototypeOf(e){return Object.getPrototypeOf(e._current)},setPrototypeOf(){throw Error("not supported")},getOwnPropertyDescriptor(e,a){let i=e._current,o=Reflect.getOwnPropertyDescriptor(i,a);return o&&{writable:!0,configurable:!0,enumerable:o.enumerable,value:i[a]}}},pq={...nD,set(e,a,i){let o={type:0,props:{[a]:kr$1(i)??i}};return e.deleteChildren(a),e.runOp(o),!0},deleteProperty(e,a){let i={type:0,props:{[a]:void 0}};return e.deleteChildren(a),e.runOp(i),!0}},mq={...nD,set(e,a,i){return i===void 0?this.deleteProperty(e,a):(e.deleteChildren(a),e.runOp({type:1,id:a,data:i})),!0},deleteProperty(e,a){return e.runOp({type:2,id:a}),!0}},Xh=class extends Bc{constructor(e,a,i){super(),this._children={},this._parent=e,this._path=a,this._current=i,this[Ov]=()=>{this._parent=null}}unproxy(){return this._current}update(e,a){this._current=this._current.modifyById(e,a)}runOp(e){this.reportOp(e,this._current.runOp(e))}randomId(){return this._current.randomId()}isDescendantOf(e,a){return this._current.isDescendantOf(e,a)}childrenOf(e){return this._current.childrenOf(e)}traverse(e){return this._current.traverse(e)}get(e){return this._current.get(e)}parent(e){return this._current.parent(e)}traverse(e){this._current.traverse((a,i)=>{e(a,this.data(a))})}data(e){var g;let{_current:a,_children:i}=this,o=i===void 0?void 0:i[e];if(o!==void 0)return o;let c=(g=a.get(e))==null?void 0:g.data,d=Iv(this,e,c);return d!==c?(i===void 0&&(i={},this._children=i),i[e]=d,d):c}add(e,a,i,o,c){this.runOp({type:7,parent:e,fi:a,id:i,data:o,children:c})}move(e,a,i){this.runOp({type:9,parent:e,fi:a,id:i})}insertAfter(e,a,i){let o=this._current.insertAfterHelper(e,a,i.length);for(let c=0;c<i.length;c++){let d=i[c];this.add(e,o[c],d.id,d.data,d.children)}}insertBefore(e,a,i){let o=this._current.insertBeforeHelper(e,a,i.length);for(let c=0;c<i.length;c++){let d=i[c];this.add(e,o[c],d.id,d.data,d.children)}}moveAfter(e,a,i){let o=this._current.insertAfterHelper(e,a,i.length);for(let c=0;c<i.length;c++){let d=i[c];this.move(e,o[c],d)}}moveBefore(e,a,i){let o=this._current.insertBeforeHelper(e,a,i.length);for(let c=0;c<i.length;c++){let d=i[c];this.move(e,o[c],d)}}delete(e){this.deleteChildren(e),this.runOp({type:8,id:e})}sortNext(e){return this._current.sortNext(e)}sortPrevious(e){return this._current.sortPrevious(e)}getAllSorted(e){return this._current.getAllSorted(e)}},Qh=class extends Bc{constructor(e,a,i){super(),this._children={},this._parent=e,this._path=a,this._current=i,this[Ov]=()=>{this._parent=null}}unproxy(){return this._current}get length(){return this._current.length}forEach(e){let a=this.length;for(let i=0;i<a;i++){let o=this._current[i].id,c=this._current[i].fi;e(this.data(this._current[i].id),o,c)}}find(e){let a=this.length;for(let i=0;i<a;i++){let o=this._current[i].id;if(e(this.data(o),o))return this.get(o)}}update(e,a){this._current=this._current.modifyById(e,a)}randomId(){return this._current.randomId()}get(e){return{...this._current.get(e),data:this.data(e)}}data(e){var g;let{_current:a,_children:i}=this,o=i===void 0?void 0:i[e];if(o!==void 0)return o;let c=(g=a.get(e))==null?void 0:g.data,d=Iv(this,e,c);return d!==c?(i===void 0&&(i={},this._children=i),i[e]=d,d):c}runOp(e){this.reportOp(e,this._current.runOp(e))}add(e,a,i){this.runOp({type:4,fi:e,id:a,data:i})}move(e,a){this.runOp({type:6,fi:e,id:a})}insertAfter(e,a){let i=this._current.insertAfterHelper(e,a.length);for(let o=0;o<a.length;o++){let c=a[o];this.add(i[o],c.id,c.data)}}insertBefore(e,a){let i=this._current.insertBeforeHelper(e,a.length);for(let o=0;o<a.length;o++){let c=a[o];this.add(i[o],c.id,c.data)}}moveAfter(e,a){let i=this._current.insertAfterHelper(e,a.length);for(let o=0;o<a.length;o++){let c=a[o];this.move(i[o],c)}}moveBefore(e,a){let i=this._current.insertBeforeHelper(e,a.length);for(let o=0;o<a.length;o++){let c=a[o];this.move(i[o],c)}}delete(e){this.deleteChildren(e),this.runOp({type:5,id:e})}};function t1(e,a,i){if(e.length>0){let o=e[e.length-1];if(o.type===0&&a.type===0&&Nr$1.equal(o.path,i)){Object.assign(o.props,a.props);return}}e.push({...a,path:i})}var Dv=class extends Bc{constructor(e){super(),this.ts=[],this.actual=[],this.reverse=[],this._current=e}update(e,a){if(e!=="")throw new Error("");this._current=a}push(e,a,i,o){t1(this.ts,a,e),t1(this.actual,i,e),t1(this.reverse,o,e)}result(){return{data:this._current,ts:this.ts,actual:this.actual,reverse:this.reverse.reverse()}}};function Iv(e,a,i){return i instanceof yr$1?new Xh(e,a,i):i instanceof Ue?new Qh(e,a,i):i instanceof it?new Proxy(new i1(e,a,i),mq):i!==null&&typeof i=="object"?Hh(i)?i:new Proxy(new r1(e,a,i),pq):i}function n1(e){let a=new Dv(e);return[Iv(a,"",e),a]}function Tl(e,a){let[i,o]=n1(e);return a(i),o.result()}function kr$1(e){return e instanceof Xh||e instanceof Qh?e._current:e!==null&&typeof e=="object"?e[iD]:e}var Nr$1;(e=>{function a(d,g){if(g.length===d.length)for(var b=0;b<d.length;){if(d[b]!==g[b])return!1;b+=1}else return!1;return!0}e.equal=a;function i(d,g,b){let j=c(b,d);if(j!==void 0&&typeof j=="object"&&j!==null){let $={...g};return Object.keys(j).forEach(rt=>{delete $[rt]}),$}else return g}e.removeOverridden=i;function o(d,g){if((d instanceof yr$1||d instanceof Xh)&&typeof g=="string"||(d instanceof Ue||d instanceof Qh)&&typeof g=="string")return d.data(g);if(typeof g=="number"&&Array.isArray(d)||typeof g=="string"&&typeof d=="object"&&d!==null)return d[g]}e.zoomOnce=o;function c(d,g,b=0){for(;b<g.length&&d!==void 0;)d=o(d,g[b]),b+=1;return d}e.zoom=c})(Nr$1||(Nr$1={}));function sD(e,a){let i=[];if(a.length===e.length)for(var o=0;o<e.length;){if(a[o]==="*")i.push(e[o]);else if(e[o]!==a[o])return null;o+=1}else return null;return i}function Rt(e,a){let i=[];if(a.length<=e.length)for(var o=0;o<a.length;){if(a[o]==="*")i.push(e[o]);else if(e[o]!==a[o])return null;o+=1}else return null;return i}var Rv=class{},tm=class extends Rv{constructor(e){super(),this.id=e}},rm=class extends Rv{constructor(e){super(),this.data=e}},o1;try{o1=new TextDecoder}catch{}var qe,Cl,se=0,kn={},Zt,Ml,ws=0,Po=0,ls,Ta,En=[],ar,oD={useRecords:!1,mapsAsObjects:!0},im=class{},u1=new im;u1.name="MessagePack 0xC1";var Kh=!1,Do=class{constructor(e){e&&(e.useRecords===!1&&e.mapsAsObjects===void 0&&(e.mapsAsObjects=!0),e.structures?e.structures.sharedLength=e.structures.length:e.getStructures&&((e.structures=[]).uninitialized=!0,e.structures.sharedLength=0)),Object.assign(this,e)}unpack(e,a){if(qe)return vD(()=>(Bv(),this?this.unpack(e,a):Do.prototype.unpack.call(oD,e,a)));Cl=a>-1?a:e.length,se=0,Po=0,Ml=null,ls=null,qe=e;try{ar=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(i){throw qe=null,e instanceof Uint8Array?i:new Error("Source must be a Uint8Array or Buffer but was a "+(e&&typeof e=="object"?e.constructor.name:typeof e))}if(this instanceof Do){if(kn=this,this.structures)return Zt=this.structures,Lv();(!Zt||Zt.length>0)&&(Zt=[])}else kn=oD,(!Zt||Zt.length>0)&&(Zt=[]);return Lv()}unpackMultiple(e,a){let i,o=0;try{Kh=!0;let c=e.length,d=this?this.unpack(e,c):kv.unpack(e,c);if(a){for(a(d);se<c;)if(o=se,a(Lv())===!1)return}else{for(i=[d];se<c;)o=se,i.push(Lv());return i}}catch(c){throw c.lastPosition=o,c.values=i,c}finally{Kh=!1,Bv()}}_mergeStructures(e,a){e=e||[];for(let i=0,o=e.length;i<o;i++){let c=e[i];c&&(c.isShared=!0,i>=32&&(c.highByte=i-32>>5))}e.sharedLength=e.length;for(let i in a||[])if(i>=0){let o=e[i],c=a[i];c&&(o&&((e.restoreStructures||(e.restoreStructures=[]))[i]=o),e[i]=c)}return this.structures=e}decode(e,a){return this.unpack(e,a)}};function Lv(){try{if(!kn.trusted&&!Kh){let a=Zt.sharedLength||0;a<Zt.length&&(Zt.length=a)}let e=Zr();if(se==Cl)Zt.restoreStructures&&aD(),Zt=null,qe=null,Ta&&(Ta=null);else if(se>Cl){let a=new Error("Unexpected end of MessagePack data");throw a.incomplete=!0,a}else if(!Kh)throw new Error("Data read, but end of buffer not reached");return e}catch(e){throw Zt.restoreStructures&&aD(),Bv(),(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer"))&&(e.incomplete=!0),e}}function aD(){for(let e in Zt.restoreStructures)Zt[e]=Zt.restoreStructures[e];Zt.restoreStructures=null}function Zr(){let e=qe[se++];if(e<160)if(e<128){if(e<64)return e;{let a=Zt[e&63]||kn.getStructures&&pD()[e&63];return a?(a.read||(a.read=h1(a,e&63)),a.read()):e}}else if(e<144)if(e-=128,kn.mapsAsObjects){let a={};for(let i=0;i<e;i++)a[gD()]=Zr();return a}else{let a=new Map;for(let i=0;i<e;i++)a.set(Zr(),Zr());return a}else{e-=144;let a=new Array(e);for(let i=0;i<e;i++)a[i]=Zr();return a}else if(e<192){let a=e-160;if(Po>=se)return Ml.slice(se-ws,(se+=a)-ws);if(Po==0&&Cl<140){let i=a<16?d1(a):mD(a);if(i!=null)return i}return c1(a)}else{let a;switch(e){case 192:return null;case 193:return ls?(a=Zr(),a>0?ls[1].slice(ls.position1,ls.position1+=a):ls[0].slice(ls.position0,ls.position0-=a)):u1;case 194:return!1;case 195:return!0;case 196:return s1(qe[se++]);case 197:return a=ar.getUint16(se),se+=2,s1(a);case 198:return a=ar.getUint32(se),se+=4,s1(a);case 199:return Nc(qe[se++]);case 200:return a=ar.getUint16(se),se+=2,Nc(a);case 201:return a=ar.getUint32(se),se+=4,Nc(a);case 202:if(a=ar.getFloat32(se),kn.useFloat32>2){let i=Fv[(qe[se]&127)<<1|qe[se+1]>>7];return se+=4,(i*a+(a>0?.5:-.5)>>0)/i}return se+=4,a;case 203:return a=ar.getFloat64(se),se+=8,a;case 204:return qe[se++];case 205:return a=ar.getUint16(se),se+=2,a;case 206:return a=ar.getUint32(se),se+=4,a;case 207:return kn.int64AsNumber?(a=ar.getUint32(se)*4294967296,a+=ar.getUint32(se+4)):a=ar.getBigUint64(se),se+=8,a;case 208:return ar.getInt8(se++);case 209:return a=ar.getInt16(se),se+=2,a;case 210:return a=ar.getInt32(se),se+=4,a;case 211:return kn.int64AsNumber?(a=ar.getInt32(se)*4294967296,a+=ar.getUint32(se+4)):a=ar.getBigInt64(se),se+=8,a;case 212:if(a=qe[se++],a==114)return dD(qe[se++]&63);{let i=En[a];if(i)return i.read?(se++,i.read(Zr())):i.noBuffer?(se++,i()):i(qe.subarray(se,++se));throw new Error("Unknown extension "+a)}case 213:return a=qe[se],a==114?(se++,dD(qe[se++]&63,qe[se++])):Nc(2);case 214:return Nc(4);case 215:return Nc(8);case 216:return Nc(16);case 217:return a=qe[se++],Po>=se?Ml.slice(se-ws,(se+=a)-ws):yq(a);case 218:return a=ar.getUint16(se),se+=2,Po>=se?Ml.slice(se-ws,(se+=a)-ws):vq(a);case 219:return a=ar.getUint32(se),se+=4,Po>=se?Ml.slice(se-ws,(se+=a)-ws):xq(a);case 220:return a=ar.getUint16(se),se+=2,cD(a);case 221:return a=ar.getUint32(se),se+=4,cD(a);case 222:return a=ar.getUint16(se),se+=2,uD(a);case 223:return a=ar.getUint32(se),se+=4,uD(a);default:if(e>=224)return e-256;if(e===void 0){let i=new Error("Unexpected end of MessagePack data");throw i.incomplete=!0,i}throw new Error("Unknown MessagePack token "+e)}}}var gq=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function h1(e,a){function i(){if(i.count++>2){let c=e.read=new Function("r","return function(){return {"+e.map(d=>gq.test(d)?d+":r()":"["+JSON.stringify(d)+"]:r()").join(",")+"}}")(Zr);return e.highByte===0&&(e.read=lD(a,e.read)),c()}let o={};for(let c=0,d=e.length;c<d;c++){let g=e[c];o[g]=Zr()}return o}return i.count=0,e.highByte===0?lD(a,i):i}var lD=(e,a)=>function(){let i=qe[se++];if(i===0)return a();let o=e<32?-(e+(i<<5)):e+(i<<5),c=Zt[o]||pD()[o];if(!c)throw new Error("Record id is not defined for "+o);return c.read||(c.read=h1(c,e)),c.read()};function pD(){let e=vD(()=>(qe=null,kn.getStructures()));return Zt=kn._mergeStructures(e,Zt)}var c1=Nv,yq=Nv,vq=Nv,xq=Nv;function Nv(e){let a;if(e<16&&(a=d1(e)))return a;if(e>64&&o1)return o1.decode(qe.subarray(se,se+=e));let i=se+e,o=[];for(a="";se<i;){let c=qe[se++];if(!(c&128))o.push(c);else if((c&224)===192){let d=qe[se++]&63;o.push((c&31)<<6|d)}else if((c&240)===224){let d=qe[se++]&63,g=qe[se++]&63;o.push((c&31)<<12|d<<6|g)}else if((c&248)===240){let d=qe[se++]&63,g=qe[se++]&63,b=qe[se++]&63,j=(c&7)<<18|d<<12|g<<6|b;j>65535&&(j-=65536,o.push(j>>>10&1023|55296),j=56320|j&1023),o.push(j)}else o.push(c);o.length>=4096&&(a+=qi.apply(String,o),o.length=0)}return o.length>0&&(a+=qi.apply(String,o)),a}function cD(e){let a=new Array(e);for(let i=0;i<e;i++)a[i]=Zr();return a}function uD(e){if(kn.mapsAsObjects){let a={};for(let i=0;i<e;i++)a[gD()]=Zr();return a}else{let a=new Map;for(let i=0;i<e;i++)a.set(Zr(),Zr());return a}}var qi=String.fromCharCode;function mD(e){let a=se,i=new Array(e);for(let o=0;o<e;o++){let c=qe[se++];if((c&128)>0){se=a;return}i[o]=c}return qi.apply(String,i)}function d1(e){if(e<4)if(e<2){if(e===0)return"";{let a=qe[se++];if((a&128)>1){se-=1;return}return qi(a)}}else{let a=qe[se++],i=qe[se++];if((a&128)>0||(i&128)>0){se-=2;return}if(e<3)return qi(a,i);let o=qe[se++];if((o&128)>0){se-=3;return}return qi(a,i,o)}else{let a=qe[se++],i=qe[se++],o=qe[se++],c=qe[se++];if((a&128)>0||(i&128)>0||(o&128)>0||(c&128)>0){se-=4;return}if(e<6){if(e===4)return qi(a,i,o,c);{let d=qe[se++];if((d&128)>0){se-=5;return}return qi(a,i,o,c,d)}}else if(e<8){let d=qe[se++],g=qe[se++];if((d&128)>0||(g&128)>0){se-=6;return}if(e<7)return qi(a,i,o,c,d,g);let b=qe[se++];if((b&128)>0){se-=7;return}return qi(a,i,o,c,d,g,b)}else{let d=qe[se++],g=qe[se++],b=qe[se++],j=qe[se++];if((d&128)>0||(g&128)>0||(b&128)>0||(j&128)>0){se-=8;return}if(e<10){if(e===8)return qi(a,i,o,c,d,g,b,j);{let $=qe[se++];if(($&128)>0){se-=9;return}return qi(a,i,o,c,d,g,b,j,$)}}else if(e<12){let $=qe[se++],rt=qe[se++];if(($&128)>0||(rt&128)>0){se-=10;return}if(e<11)return qi(a,i,o,c,d,g,b,j,$,rt);let _e=qe[se++];if((_e&128)>0){se-=11;return}return qi(a,i,o,c,d,g,b,j,$,rt,_e)}else{let $=qe[se++],rt=qe[se++],_e=qe[se++],st=qe[se++];if(($&128)>0||(rt&128)>0||(_e&128)>0||(st&128)>0){se-=12;return}if(e<14){if(e===12)return qi(a,i,o,c,d,g,b,j,$,rt,_e,st);{let ut=qe[se++];if((ut&128)>0){se-=13;return}return qi(a,i,o,c,d,g,b,j,$,rt,_e,st,ut)}}else{let ut=qe[se++],gt=qe[se++];if((ut&128)>0||(gt&128)>0){se-=14;return}if(e<15)return qi(a,i,o,c,d,g,b,j,$,rt,_e,st,ut,gt);let yt=qe[se++];if((yt&128)>0){se-=15;return}return qi(a,i,o,c,d,g,b,j,$,rt,_e,st,ut,gt,yt)}}}}}function s1(e){return kn.copyBuffers?Uint8Array.prototype.slice.call(qe,se,se+=e):qe.subarray(se,se+=e)}function Nc(e){let a=qe[se++];if(En[a])return En[a](qe.subarray(se,se+=e));throw new Error("Unknown extension type "+a)}var hD=new Array(4096);function gD(){let e=qe[se++];if(e>=160&&e<192){if(e=e-160,Po>=se)return Ml.slice(se-ws,(se+=e)-ws);if(!(Po==0&&Cl<180))return c1(e)}else return se--,Zr();let a=(e<<5^(e>1?ar.getUint16(se):e>0?qe[se]:0))&4095,i=hD[a],o=se,c=se+e-3,d,g=0;if(i&&i.bytes==e){for(;o<c;){if(d=ar.getUint32(o),d!=i[g++]){o=1879048192;break}o+=4}for(c+=3;o<c;)if(d=qe[o++],d!=i[g++]){o=1879048192;break}if(o===c)return se=o,i.string;c-=3,o=se}for(i=[],hD[a]=i,i.bytes=e;o<c;)d=ar.getUint32(o),i.push(d),o+=4;for(c+=3;o<c;)d=qe[o++],i.push(d);let b=e<16?d1(e):mD(e);return b!=null?i.string=b:i.string=c1(e)}var dD=(e,a)=>{var i=Zr();let o=e;a!==void 0&&(e=e<32?-((a<<5)+e):(a<<5)+e,i.highByte=a);let c=Zt[e];return c&&c.isShared&&((Zt.restoreStructures||(Zt.restoreStructures=[]))[e]=c),Zt[e]=i,i.read=h1(i,o),i.read()},yD=typeof self=="object"?self:global;En[0]=()=>{};En[0].noBuffer=!0;En[101]=()=>{let e=Zr();return(yD[e[0]]||Error)(e[1])};En[105]=e=>{let a=ar.getUint32(se-4);Ta||(Ta=new Map);let i=qe[se],o;i>=144&&i<160||i==220||i==221?o=[]:o={};let c={target:o};Ta.set(a,c);let d=Zr();return c.used?Object.assign(o,d):(c.target=d,d)};En[112]=e=>{let a=ar.getUint32(se-4),i=Ta.get(a);return i.used=!0,i.target};En[115]=()=>new Set(Zr());var f1=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map(e=>e+"Array");En[116]=e=>{let a=e[0],i=f1[a];if(!i)throw new Error("Could not find typed array for code "+a);return new yD[i](Uint8Array.prototype.slice.call(e,1).buffer)};En[120]=()=>{let e=Zr();return new RegExp(e[0],e[1])};En[98]=e=>{let a=(e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3],i=se;se+=a-4,ls=[Zr(),Zr()],ls.position0=0,ls.position1=0;let o=se;se=i;try{return Zr()}finally{se=o}};En[255]=e=>e.length==4?new Date((e[0]*16777216+(e[1]<<16)+(e[2]<<8)+e[3])*1e3):e.length==8?new Date(((e[0]<<22)+(e[1]<<14)+(e[2]<<6)+(e[3]>>2))/1e6+((e[3]&3)*4294967296+e[4]*16777216+(e[5]<<16)+(e[6]<<8)+e[7])*1e3):e.length==12?new Date(((e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3])/1e6+((e[4]&128?-281474976710656:0)+e[6]*1099511627776+e[7]*4294967296+e[8]*16777216+(e[9]<<16)+(e[10]<<8)+e[11])*1e3):new Date("invalid");function vD(e){let a=Cl,i=se,o=ws,c=Po,d=Ml,g=Ta,b=ls,j=new Uint8Array(qe.slice(0,Cl)),$=Zt,rt=Zt.slice(0,Zt.length),_e=kn,st=Kh,ut=e();return Cl=a,se=i,ws=o,Po=c,Ml=d,Ta=g,ls=b,qe=j,Kh=st,Zt=$,Zt.splice(0,Zt.length,...rt),kn=_e,ar=new DataView(qe.buffer,qe.byteOffset,qe.byteLength),ut}function Bv(){qe=null,Ta=null,Zt=null}function xD(e){e.unpack?En[e.type]=e.unpack:En[e.type]=e}var Fv=new Array(147);for(let e=0;e<256;e++)Fv[e]=+("1e"+Math.floor(45.15-e*.30103));var kv=new Do({useRecords:!1});kv.unpack;kv.unpackMultiple;kv.unpack;var Aq=new Float32Array(1);new Uint8Array(Aq.buffer,0,4);var zv;try{zv=new TextEncoder}catch{}var Uv,m1,Gv=typeof Buffer<"u",p1=Gv?Buffer.allocUnsafeSlow:Uint8Array,AD=Gv?Buffer:Uint8Array,bD=Gv?4294967296:2144337920,Se,ni,ue$1=0,Oo,Io=null,_q=/[\u0080-\uFFFF]/,nm$2=Symbol("record-id"),Fc=class extends Do{constructor(e){super(e),this.offset=0;let a,i,o,c,d,g=0,b=AD.prototype.utf8Write?function(It,Lt,Ft){return Se.utf8Write(It,Lt,Ft)}:zv&&zv.encodeInto?function(It,Lt){return zv.encodeInto(It,Se.subarray(Lt)).written}:!1,j=this;e||(e={});let $=e&&e.sequential,rt=e.structures||e.saveStructures,_e=e.maxSharedStructures;if(_e==null&&(_e=rt?32:0),_e>8160)throw new Error("Maximum maxSharedStructure is 8160");let st=e.maxOwnStructures;st==null&&(st=rt?32:64),$&&!e.saveStructures&&(this.structures=[]);let ut=_e>32||st+_e>64,gt=_e+64,yt=_e+st+64;if(yt>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let Pt=[],wt=0,Ct=0;this.pack=this.encode=function(It,Lt){if(Se||(Se=new p1(8192),ni=new DataView(Se.buffer,0,8192),ue$1=0),Oo=Se.length-10,Oo-ue$1<2048?(Se=new p1(Se.length),ni=new DataView(Se.buffer,0,Se.length),Oo=Se.length-10,ue$1=0):ue$1=ue$1+7&2147483640,a=ue$1,d=j.structuredClone?new Map:null,j.bundleStrings?(Io=["",""],Se[ue$1++]=214,Se[ue$1++]=98,Io.position=ue$1-a,ue$1+=4):Io=null,i=j.structures,i){i.uninitialized&&(i=j._mergeStructures(j.getStructures()));let Ft=i.sharedLength||0;if(Ft>_e)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+i.sharedLength);if(!i.transitions){i.transitions=Object.create(null);for(let Nt=0;Nt<Ft;Nt++){let Ht=i[Nt];if(!Ht)continue;let Gr,hs=i.transitions;for(let _s=0,hn=Ht.length;_s<hn;_s++){let Qn=Ht[_s];Gr=hs[Qn],Gr||(Gr=hs[Qn]=Object.create(null)),hs=Gr}hs[nm$2]=Nt+64}g=Ft}$||(i.nextId=Ft+64)}o&&(o=!1),c=i||[];try{if(At(It),Io){ni.setUint32(Io.position+a,ue$1-Io.position-a);let Ft=Io;Io=null,At(Ft[0]),At(Ft[1])}if(j.offset=ue$1,d&&d.idsToInsert){ue$1+=d.idsToInsert.length*6,ue$1>Oo&&kt(ue$1),j.offset=ue$1;let Ft=Tq(Se.subarray(a,ue$1),d.idsToInsert);return d=null,Ft}return Lt&ED?(Se.start=a,Se.end=ue$1,Se):Se.subarray(a,ue$1)}finally{if(i){if(Ct<10&&Ct++,wt>1e4)i.transitions=null,Ct=0,wt=0,Pt.length>0&&(Pt=[]);else if(Pt.length>0&&!$){for(let Ft=0,Nt=Pt.length;Ft<Nt;Ft++)Pt[Ft][nm$2]=0;Pt=[]}if(o&&j.saveStructures){let Ft=i.sharedLength||_e;i.length>Ft&&(i=i.slice(0,Ft));let Nt=Se.subarray(a,ue$1);return j.saveStructures(i,g)===!1?(j._mergeStructures(j.getStructures()),j.pack(It)):(g=Ft,Nt)}}Lt&Rq&&(ue$1=a)}};let At=It=>{ue$1>Oo&&(Se=kt(ue$1));var Lt=typeof It,Ft;if(Lt==="string"){let Nt=It.length;if(Io&&Nt>=8&&Nt<4096){let hs=_q.test(It);Io[hs?0:1]+=It,Se[ue$1++]=193,At(hs?-Nt:Nt);return}let Ht;Nt<32?Ht=1:Nt<256?Ht=2:Nt<65536?Ht=3:Ht=5;let Gr=Nt*3;if(ue$1+Gr>Oo&&(Se=kt(ue$1+Gr)),Nt<64||!b){let hs,_s,hn,Qn=ue$1+Ht;for(hs=0;hs<Nt;hs++)_s=It.charCodeAt(hs),_s<128?Se[Qn++]=_s:_s<2048?(Se[Qn++]=_s>>6|192,Se[Qn++]=_s&63|128):(_s&64512)===55296&&((hn=It.charCodeAt(hs+1))&64512)===56320?(_s=65536+((_s&1023)<<10)+(hn&1023),hs++,Se[Qn++]=_s>>18|240,Se[Qn++]=_s>>12&63|128,Se[Qn++]=_s>>6&63|128,Se[Qn++]=_s&63|128):(Se[Qn++]=_s>>12|224,Se[Qn++]=_s>>6&63|128,Se[Qn++]=_s&63|128);Ft=Qn-ue$1-Ht}else Ft=b(It,ue$1+Ht,Gr);Ft<32?Se[ue$1++]=160|Ft:Ft<256?(Ht<2&&Se.copyWithin(ue$1+2,ue$1+1,ue$1+1+Ft),Se[ue$1++]=217,Se[ue$1++]=Ft):Ft<65536?(Ht<3&&Se.copyWithin(ue$1+3,ue$1+2,ue$1+2+Ft),Se[ue$1++]=218,Se[ue$1++]=Ft>>8,Se[ue$1++]=Ft&255):(Ht<5&&Se.copyWithin(ue$1+5,ue$1+3,ue$1+3+Ft),Se[ue$1++]=219,ni.setUint32(ue$1,Ft),ue$1+=4),ue$1+=Ft}else if(Lt==="number")if(It>>>0===It)It<64?Se[ue$1++]=It:It<256?(Se[ue$1++]=204,Se[ue$1++]=It):It<65536?(Se[ue$1++]=205,Se[ue$1++]=It>>8,Se[ue$1++]=It&255):(Se[ue$1++]=206,ni.setUint32(ue$1,It),ue$1+=4);else if(It>>0===It)It>=-32?Se[ue$1++]=256+It:It>=-128?(Se[ue$1++]=208,Se[ue$1++]=It+256):It>=-32768?(Se[ue$1++]=209,ni.setInt16(ue$1,It),ue$1+=2):(Se[ue$1++]=210,ni.setInt32(ue$1,It),ue$1+=4);else{let Nt;if((Nt=this.useFloat32)>0&&It<4294967296&&It>=-2147483648){Se[ue$1++]=202,ni.setFloat32(ue$1,It);let Ht;if(Nt<4||(Ht=It*Fv[(Se[ue$1]&127)<<1|Se[ue$1+1]>>7])>>0===Ht){ue$1+=4;return}else ue$1--}Se[ue$1++]=203,ni.setFloat64(ue$1,It),ue$1+=8}else if(Lt==="object")if(!It)Se[ue$1++]=192;else{if(d){let Ht=d.get(It);if(Ht){if(!Ht.id){let Gr=d.idsToInsert||(d.idsToInsert=[]);Ht.id=Gr.push(Ht)}Se[ue$1++]=214,Se[ue$1++]=112,ni.setUint32(ue$1,Ht.id),ue$1+=4;return}else d.set(It,{offset:ue$1-a})}let Nt=It.constructor;if(Nt===Object)Tt(It,!0);else if(Nt===Array){Ft=It.length,Ft<16?Se[ue$1++]=144|Ft:Ft<65536?(Se[ue$1++]=220,Se[ue$1++]=Ft>>8,Se[ue$1++]=Ft&255):(Se[ue$1++]=221,ni.setUint32(ue$1,Ft),ue$1+=4);for(let Ht=0;Ht<Ft;Ht++)At(It[Ht])}else if(Nt===Map){Ft=It.size,Ft<16?Se[ue$1++]=128|Ft:Ft<65536?(Se[ue$1++]=222,Se[ue$1++]=Ft>>8,Se[ue$1++]=Ft&255):(Se[ue$1++]=223,ni.setUint32(ue$1,Ft),ue$1+=4);for(let[Ht,Gr]of It)At(Ht),At(Gr)}else{for(let Ht=0,Gr=Uv.length;Ht<Gr;Ht++){let hs=m1[Ht];if(It instanceof hs){let _s=Uv[Ht];if(_s.write){_s.type&&(Se[ue$1++]=212,Se[ue$1++]=_s.type,Se[ue$1++]=0),At(_s.write.call(this,It));return}let hn=Se,Qn=ni,ds=ue$1;Se=null;let un;try{un=_s.pack.call(this,It,dr=>(Se=hn,hn=null,ue$1+=dr,ue$1>Oo&&kt(ue$1),{target:Se,targetView:ni,position:ue$1-dr}),At)}finally{hn&&(Se=hn,ni=Qn,ue$1=ds,Oo=Se.length-10)}un&&(un.length+ue$1>Oo&&kt(un.length+ue$1),ue$1=Eq(un,Se,ue$1,_s.type));return}}Tt(It,!It.hasOwnProperty)}}else if(Lt==="boolean")Se[ue$1++]=It?195:194;else if(Lt==="bigint"){if(It<BigInt(1)<<BigInt(63)&&It>=-(BigInt(1)<<BigInt(63)))Se[ue$1++]=211,ni.setBigInt64(ue$1,It);else if(It<BigInt(1)<<BigInt(64)&&It>0)Se[ue$1++]=207,ni.setBigUint64(ue$1,It);else if(this.largeBigIntToFloat)Se[ue$1++]=203,ni.setFloat64(ue$1,Number(It));else throw new RangeError(It+" was too large to fit in MessagePack 64-bit integer format, set largeBigIntToFloat to convert to float-64");ue$1+=8}else if(Lt==="undefined")this.encodeUndefinedAsNil?Se[ue$1++]=192:(Se[ue$1++]=212,Se[ue$1++]=0,Se[ue$1++]=0);else if(Lt==="function")At(this.writeFunction&&this.writeFunction());else throw new Error("Unknown type: "+Lt)},Tt=this.useRecords===!1?this.variableMapSize?It=>{let Lt=Object.keys(It),Ft=Lt.length;Ft<16?Se[ue$1++]=128|Ft:Ft<65536?(Se[ue$1++]=222,Se[ue$1++]=Ft>>8,Se[ue$1++]=Ft&255):(Se[ue$1++]=223,ni.setUint32(ue$1,Ft),ue$1+=4);let Nt;for(let Ht=0;Ht<Ft;Ht++)At(Nt=Lt[Ht]),At(It[Nt])}:(It,Lt)=>{Se[ue$1++]=222;let Ft=ue$1-a;ue$1+=2;let Nt=0;for(let Ht in It)(Lt||It.hasOwnProperty(Ht))&&(At(Ht),At(It[Ht]),Nt++);Se[Ft+++a]=Nt>>8,Se[Ft+a]=Nt&255}:It=>{let Lt=Object.keys(It),Ft,Nt=c.transitions||(c.transitions=Object.create(null)),Ht=0;for(let hs=0,_s=Lt.length;hs<_s;hs++){let hn=Lt[hs];Ft=Nt[hn],Ft||(Ft=Nt[hn]=Object.create(null),Ht++),Nt=Ft}let Gr=Nt[nm$2];if(Gr)Gr>=96&&ut?(Se[ue$1++]=((Gr-=96)&31)+96,Se[ue$1++]=Gr>>5):Se[ue$1++]=Gr;else{Gr=c.nextId,Gr||(Gr=64),Gr<gt&&this.shouldShareStructure&&!this.shouldShareStructure(Lt)?(Gr=c.nextOwnId,Gr<yt||(Gr=gt),c.nextOwnId=Gr+1):(Gr>=yt&&(Gr=gt),c.nextId=Gr+1);let hs=Lt.highByte=Gr>=96&&ut?Gr-96>>5:-1;Nt[nm$2]=Gr,c[Gr-64]=Lt,Gr<gt?(Lt.isShared=!0,c.sharedLength=Gr-63,o=!0,hs>=0?(Se[ue$1++]=(Gr&31)+96,Se[ue$1++]=hs):Se[ue$1++]=Gr):(hs>=0?(Se[ue$1++]=213,Se[ue$1++]=114,Se[ue$1++]=(Gr&31)+96,Se[ue$1++]=hs):(Se[ue$1++]=212,Se[ue$1++]=114,Se[ue$1++]=Gr),Ht&&(wt+=Ct*Ht),Pt.length>=st&&(Pt.shift()[nm$2]=0),Pt.push(Nt),At(Lt))}for(let hs=0,_s=Lt.length;hs<_s;hs++)At(It[Lt[hs]])},kt=It=>{let Lt;if(It>16777216){if(It-a>bD)throw new Error("Packed buffer would be larger than maximum buffer size");Lt=Math.min(bD,Math.round(Math.max((It-a)*(It>67108864?1.25:2),4194304)/4096)*4096)}else Lt=(Math.max(It-a<<2,Se.length-1)>>12)+1<<12;let Ft=new p1(Lt);return ni=new DataView(Ft.buffer,0,Lt),Se.copy?Se.copy(Ft,0,a,It):Ft.set(Se.slice(a,It)),ue$1-=a,a=0,Oo=Ft.length-10,Se=Ft}}useBuffer(e){Se=e,ni=new DataView(Se.buffer,Se.byteOffset,Se.byteLength),ue$1=0}};m1=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,im];Uv=[{pack(e,a,i){let o=e.getTime()/1e3;if((this.useTimestamp32||e.getMilliseconds()===0)&&o>=0&&o<4294967296){let{target:c,targetView:d,position:g}=a(6);c[g++]=214,c[g++]=255,d.setUint32(g,o)}else if(o>0&&o<17179869184){let{target:c,targetView:d,position:g}=a(10);c[g++]=215,c[g++]=255,d.setUint32(g,e.getMilliseconds()*4e6+(o/1e3/4294967296>>0)),d.setUint32(g+4,o)}else if(isNaN(o)){if(this.onInvalidDate)return a(0),i(this.onInvalidDate());let{target:c,targetView:d,position:g}=a(3);c[g++]=212,c[g++]=255,c[g++]=255}else{let{target:c,targetView:d,position:g}=a(15);c[g++]=199,c[g++]=12,c[g++]=255,d.setUint32(g,e.getMilliseconds()*1e6),d.setBigInt64(g+4,BigInt(Math.floor(o)))}}},{pack(e,a,i){let o=Array.from(e),{target:c,position:d}=a(this.structuredClone?3:0);this.structuredClone&&(c[d++]=212,c[d++]=115,c[d++]=0),i(o)}},{pack(e,a,i){let{target:o,position:c}=a(this.structuredClone?3:0);this.structuredClone&&(o[c++]=212,o[c++]=101,o[c++]=0),i([e.name,e.message])}},{pack(e,a,i){let{target:o,position:c}=a(this.structuredClone?3:0);this.structuredClone&&(o[c++]=212,o[c++]=120,o[c++]=0),i([e.source,e.flags])}},{pack(e,a){this.structuredClone?SD(e,16,a):wD(Gv?Buffer.from(e):new Uint8Array(e),a)}},{pack(e,a){let i=e.constructor;i!==AD&&this.structuredClone?SD(e,f1.indexOf(i.name),a):wD(e,a)}},{pack(e,a){let{target:i,position:o}=a(1);i[o]=193}}];function SD(e,a,i,o){let c=e.byteLength;if(c+1<256){var{target:d,position:g}=i(4+c);d[g++]=199,d[g++]=c+1}else if(c+1<65536){var{target:d,position:g}=i(5+c);d[g++]=200,d[g++]=c+1>>8,d[g++]=c+1&255}else{var{target:d,position:g,targetView:b}=i(7+c);d[g++]=201,b.setUint32(g,c+1),g+=4}d[g++]=116,d[g++]=a,d.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),g)}function wD(e,a){let i=e.byteLength;var o,c;if(i<256){var{target:o,position:c}=a(i+2);o[c++]=196,o[c++]=i}else if(i<65536){var{target:o,position:c}=a(i+3);o[c++]=197,o[c++]=i>>8,o[c++]=i&255}else{var{target:o,position:c,targetView:d}=a(i+5);o[c++]=198,d.setUint32(c,i),c+=4}o.set(e,c)}function Eq(e,a,i,o){let c=e.length;switch(c){case 1:a[i++]=212;break;case 2:a[i++]=213;break;case 4:a[i++]=214;break;case 8:a[i++]=215;break;case 16:a[i++]=216;break;default:c<256?(a[i++]=199,a[i++]=c):c<65536?(a[i++]=200,a[i++]=c>>8,a[i++]=c&255):(a[i++]=201,a[i++]=c>>24,a[i++]=c>>16&255,a[i++]=c>>8&255,a[i++]=c&255)}return a[i++]=o,a.set(e,i),i+=c,i}function Tq(e,a){let i,o=a.length*6,c=e.length-o;for(a.sort((d,g)=>d.offset>g.offset?1:-1);i=a.pop();){let d=i.offset,g=i.id;e.copyWithin(d+o,d,c),o-=6;let b=d+o;e[b++]=214,e[b++]=105,e[b++]=g>>24,e[b++]=g>>16&255,e[b++]=g>>8&255,e[b++]=g&255,c=d}return e}function Pl(e){if(e.Class){if(!e.pack&&!e.write)throw new Error("Extension has no pack or write function");if(e.pack&&!e.type)throw new Error("Extension has no type (numeric code to identify the extension)");m1.unshift(e.Class),Uv.unshift(e)}xD(e)}var _D=new Fc({useRecords:!1});_D.pack;_D.pack;var ED=512,Rq=1024,TD=new Fc({structuredClone:!0});Pl({Class:it.prototype.constructor,type:1,write(e){return{...e}},read(e){return Object.setPrototypeOf(e,it.prototype),e}});Pl({Class:Ue.prototype.constructor,type:2,write(e){return[...e]},read(e){return Object.setPrototypeOf(e,Ue.prototype),e}});Pl({Class:yr$1.prototype.constructor,type:3,write(e){return[...e]},read(e){return Object.setPrototypeOf(e,yr$1.prototype),e}});Pl({Class:tm.prototype.constructor,type:4,write(e){return e.id},read(e){return new tm(e)}});Pl({Class:rm.prototype.constructor,type:5,write(e){return e.data},read(e){return new rm(e)}});Pl({Class:vr.prototype.constructor,type:6,write(e){return{...e}},read(e){return Object.setPrototypeOf(e,vr.prototype),e}});function Lq(e){var a=0;if(e.length===0)return a;for(let i=0;i<e.length;i++){let o=e[i];a=(a<<5)-a+o,a=a&a}return a}function g1(e){if(Hh(e))return e;if(Array.isArray(e))return e.map(g1);if(typeof e=="object"&&e!==null){let a={};for(let i of Object.keys(e).sort())a[i]=g1(e[i]);return Object.setPrototypeOf(a,Object.getPrototypeOf(e)),a}else return e}var jv;(e=>{function a(c){return TD.pack(c)}e.serialize=a;function i(c){return TD.unpack(c)}e.deserialize=i;function o(c){return Lq(a(g1(c))).toString()}e.checksum=o})(jv||(jv={}));var MD;(e=>{function a(o){return o.type==="Conditional"?o.condition.type==="Distance"?"Distance":"StateChange":o.type}e.toEventUIType=a;function i(o){return o==="Distance"||o==="StateChange"?"Conditional":o}e.fromEventUIType=i})(MD||(MD={}));var Tn={LookAt:[],Follow:["Create"],DragDrop:["Transition","Animation","Audio","Particles","Create","SetVariable","DynamicVariablePlay","Conditional"],MouseHover:["Transition","Animation","Particles","Create","Destroy","SwitchCamera","SceneTransition","SetVariable","DynamicVariablePlay","Conditional"],Scroll:["Transition","Animation","Create","SetVariable","DynamicVariablePlay","Conditional"],Start:["Transition","Animation","Audio","Particles","Video","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],Conditional:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],MouseDown:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],MouseUp:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],MousePress:["Transition","Animation","Audio","Particles","Video","Link","Create","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],KeyDown:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],KeyUp:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],KeyPress:["Transition","Animation","Audio","Particles","Video","Link","Create","SwitchCamera","Reset","SetVariable","DynamicVariablePlay","Conditional"],GameControl:["Transition","Animation","Audio","Particles","Create","Conditional"],Collision:["Transition","Animation","Audio","Particles","Video","Create","Destroy","Reset","SetVariable","DynamicVariablePlay","Conditional"],Trigger:["Transition","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],Resize:["Transition","Animation","Audio","Particles","Video","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],VariableChange:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"]},CD;(e=>{function a(o){return o.type==="MouseDown"||o.type==="MouseUp"||o.type==="MousePress"||o.type==="KeyDown"||o.type==="KeyUp"||o.type==="KeyPress"}e.is=a;function i(o){return o==="MouseDown"||o==="MouseUp"||o==="MousePress"?{type:o,mode:"Object",disabled:!1,runMode:"Once",actions:new Ue}:{type:o,disabled:!1,key:void 0,runMode:"Once",actions:new Ue}}e.defaultData=i})(CD||(CD={}));var Hv;(e=>{function a(i){return{type:"Property",value:[i??null,"position","x"]}}e.propertyDefaultData=a,e.valueDefaultData={type:"Literal",value:0}})(Hv||(Hv={}));var y1;(e=>{function a(c){return{type:"Comparison",operator:"==",lOperand:Hv.propertyDefaultData(c),rOperand:{...Hv.valueDefaultData}}}e.comparisonDefaultData=a;function i(c){return{type:"Distance",toObject:c??null,fromObject:c??null,distance:200}}e.distanceDefaultData=i;function o(c,d){return{type:"State",object:c??null,state:d??null}}e.stateDefaultData=o})(y1||(y1={}));var PD;(e=>{function a(o){return o.type==="Conditional"}e.is=a;function i(o){return{type:"Conditional",disabled:!1,inActions:new Ue,outActions:new Ue,condition:y1.distanceDefaultData(o)}}e.defaultData=i})(PD||(PD={}));var DD;(e=>e.defaultData={type:"DragDrop",cursor:"hand",disabled:!1,dampingFactor:1,objects:[],snapTo:"center",snapSurfaceMode:"bbox",snapSurfaceOffset:0,dropOn:"all",autoOrient:!0,dropDestinations:[],plane:"adaptive",planeMode:"locked",referenceFrame:"global",limits:[-1/0,1/0,-1/0,1/0,-1/0,1/0],drop:!1,resetOnSnapFail:!1,snapSpeed:20,resetSpeed:20,dragDropActions:{drag:new Ue,drop:new Ue}})(DD||(DD={}));var Wv;(e=>e.defaultData={type:"Follow",disabled:!1,maxDelta:0,dampingFactor:1,target:"cursor",plane:"custom",resetOnPointerLeave:!0,resetAfterDistanceLimit:!0,enabledTranslation:[!0,!0,!0],limitDistanceEnabled:!1,limitDistance:1e3,snapDelay:0,resetSpeed:5,actions:new Ue})(Wv||(Wv={}));var qv;(e=>e.defaultData={type:"LookAt",disabled:!1,distance:1e3,dampingFactor:1,target:"cursor",tilt:"up",axis:"z",plane:"custom",resetOnPointerLeave:!0,resetAfterDistanceLimit:!0,enabledRotation:[!0,!0,!0],limitDistanceEnabled:!1,limitDistance:1e3,snapDelay:0,resetSpeed:5})(qv||(qv={}));var OD;(e=>{function a(o){return o.type==="MouseHover"}e.is=a;function i(){return{type:"MouseHover",disabled:!1,actions:new Ue}}e.defaultData=i})(OD||(OD={}));var ID;(e=>{function a(o){return o.type==="Scroll"}e.is=a;function i(){return{type:"Scroll",disabled:!1,steps:100,trigger:"load",startFrom:"enter",enterAnchor:"top",startOffset:0,endAfter:400,actions:new Ue}}e.defaultData=i})(ID||(ID={}));var RD;(e=>{function a(o){return o.type==="Start"}e.is=a;function i(){return{type:"Start",disabled:!1,actions:new Ue}}e.defaultData=i})(RD||(RD={}));var LD;(e=>{function a(o){return o.type==="Collision"}e.is=a;function i(){return{type:"Collision",disabled:!1,runMode:"Once",target:"character",actions:new Ue}}e.defaultData=i})(LD||(LD={}));var BD;(e=>{function a(o){return o.type==="Trigger"}e.is=a;function i(o,c){return{type:"Trigger",disabled:!1,runMode:"Once",target:"all",triggeringObjects:[],actions:new Ue,triggerZone:"box",position:c.toArray(),rotation:[0,0,0],size:o.toArray(),radius:o.length()/2,helperVisible:!0}}e.defaultData=i})(BD||(BD={}));var Yv;(e=>{e.defaultSizes={mobile:[480,480],tablet:[768,768],desktop:[1200,1200],custom:[769,1200]};function a(g){return g.type==="Resize"}e.is=a;function i(g){return typeof g=="string"?g:"custom"}e.sizeToDevice=i;function o(g){return typeof g=="string"?[...e.defaultSizes[g]]:[...g]}e.deviceToSize=o;function c(){let g={size:"mobile",operator:"<",actions:new Ue},b={size:"tablet",operator:"<",actions:new Ue},j={size:[...e.defaultSizes.custom],operator:"<>",actions:new Ue},$=new Ue;return $.push({id:Me.generateUUID(),fi:0,data:g},{id:Me.generateUUID(),fi:1,data:b},{id:Me.generateUUID(),fi:2,data:j}),{type:"Resize",disabled:!1,orientation:"horizontal",breakpoints:$}}e.defaultData=c;function d(){return{size:[...e.defaultSizes.custom],operator:"<>",actions:new Ue}}e.defaultBreakpointData=d})(Yv||(Yv={}));var Xv;(e=>{e.propertyPaths={Position:["position"],"Position X":["position","x"],"Position Y":["position","y"],"Position Z":["position","z"],Rotation:["rotation"],"Rotation X":["rotation","x"],"Rotation Y":["rotation","y"],"Rotation Z":["rotation","z"],Scale:["scale"],"Scale X":["scale","x"],"Scale Y":["scale","y"],"Scale Z":["scale","z"],Width:["width"],Height:["height"],Depth:["depth"],"Mouse Position X":["mouse","x"],"Mouse Position Y":["mouse","y"],"Mouse Pressed":["mouse","pressed"],"Screen Width":["mouse","width"],"Screen Height":["mouse","height"],"Hit Position X":["raycast","x"],"Hit Position Y":["raycast","y"],"Hit Position Z":["raycast","z"],"Hit Object Position X":["raycast","objX"],"Hit Object Position Y":["raycast","objY"],"Hit Object Position Z":["raycast","objZ"]};function a(o){return o.type==="VariableChange"}e.is=a;function i(){return{disabled:!1,type:"VariableChange",actions:new Ue,variableId:"",objectId:null,property:"Position X"}}e.defaultData=i})(Xv||(Xv={}));var As="personal camera",Ol="a218fcc3-276b-49b9-b485-49037fd14f5f",kD=2960946,si=5526619,Ro;(e=>{function a(st,ut){return st[0]===ut[0]&&st[1]===ut[1]}e.isEqual=a;function i(st,ut,gt){return[st[0]+(ut[0]-st[0])*gt,st[1]+(ut[1]-st[1])*gt]}e.lerp=i;function o(st,ut){return[st[0]+ut[0],st[1]+ut[1]]}e.add=o;function c(st,ut){return[st[0]-ut[0],st[1]-ut[1]]}e.sub=c;function d(st,ut){return Math.pow(ut[0]-st[0],2)+Math.pow(ut[1]-st[1],2)}e.distanceSquared=d;function g(st,ut){return Math.sqrt(d(st,ut))}e.distance=g;function b(st,ut){return st[0]*ut[0]+st[1]*ut[1]}e.dot=b;function j(st,ut){return[st[0]*ut,st[1]*ut]}e.scalarMultiply=j;function $(st,ut,gt){let yt=e.sub(ut,st),Pt=e.sub(gt,st),wt=e.dot(yt,Pt)/e.dot(yt,yt),Ct=e.scalarMultiply(yt,wt);return e.add(st,Ct)}e.projectionOnto=$;function rt(st,ut,gt){return g(st,$(st,ut,gt))}e.projectionOntoDistance=rt;function _e(st,ut){return[(st[0]+ut[0])*.5,(st[1]+ut[1])*.5]}e.center=_e})(Ro||(Ro={}));var Lo;(e=>{function a(j,$){return j[0]===$[0]&&j[1]===$[1]&&j[2]===$[2]}e.isEqual=a;function i(j,$){return[j[0]+$[0],j[1]+$[1],j[2]+$[2]]}e.add=i;function o(j,$){return[j[0]-$[0],j[1]-$[1],j[2]-$[2]]}e.sub=o;function c(j,$){return[j[0]/$[0],j[1]/$[1],j[2]/$[2]]}e.div=c;function d(j,$){return[j[0]*$[0],j[1]*$[1],j[2]*$[2]]}e.mul=d;function g(j,$){return Math.hypot(j[0]-$[0],j[1]-$[1],j[2]-$[2])}e.dist=g;function b(j,$,rt){return[j[0]+($[0]-j[0])*rt,j[1]+($[1]-j[1])*rt,j[2]+($[2]-j[2])*rt]}e.lerp=b})(Lo||(Lo={}));var sm;(e=>{function a(o,c){return o[0]===c[0]&&o[1]===c[1]&&o[2]===c[2]&&o[3]===c[3]}e.isEqual=a;function i(o,c,d){return[o[0]+(c[0]-o[0])*d,o[1]+(c[1]-o[1])*d,o[2]+(c[2]-o[2])*d,o[3]+(c[3]-o[3])*d]}e.lerp=i})(sm||(sm={}));var Dl;(e=>{e.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function a(c,d){for(let g=0;g<16;g++)if(c[g]!==d[g])return!1;return!0}e.isEqual=a;function i(c){return c??e.identity}e.simplify=i;function o(c,d){let g=d.slice(0);for(var b=0,j=d.length;b<j;b+=3){let $=c[3]*d[b]+c[7]*d[b+1]+c[11]*d[b+2]+c[15];g[b]=(c[0]*d[b]+c[4]*d[b+1]+c[8]*d[b+2]+c[12])/$,g[b+1]=(c[1]*d[b]+c[5]*d[b+1]+c[9]*d[b+2]+c[13])/$,g[b+2]=(c[2]*d[b]+c[6]*d[b+1]+c[10]*d[b+2]+c[14])/$}return g}e.applyMatrix4=o})(Dl||(Dl={}));var Ri;(e=>{function a($){return typeof $=="object"&&typeof $.r=="number"&&typeof $.g=="number"&&typeof $.b=="number"}e.isRGB=a,e.white={r:1,g:1,b:1},e.red={r:1,g:0,b:0},e.black={r:0,g:0,b:0};function i($){return{r:Math.round($.r*255),g:Math.round($.g*255),b:Math.round($.b*255),a:1}}e.toRgb255a1=i;function o($){return{r:$.r,g:$.g,b:$.b}}e.clone=o;function c($){return $=Math.floor($),{r:($>>16&255)/255,g:($>>8&255)/255,b:($&255)/255}}e.fromHex=c;function d($){return Math.round($.r*255)*65536+Math.round($.g*255)*256+Math.round($.b*255)}e.toHex=d;function g($,rt){return $.r===rt.r&&$.g===rt.g&&$.b===rt.b}e.equals=g;function b($,rt){return $.r.toFixed(2)===rt.r.toFixed(2)&&$.g.toFixed(2)===rt.g.toFixed(2)&&$.b.toFixed(2)===rt.b.toFixed(2)}e.equalsFixed=b;function j($,rt,_e){return{r:$.r+(rt.r-$.r)*_e,g:$.g+(rt.g-$.g)*_e,b:$.b+(rt.b-$.b)*_e}}e.lerp=j})(Ri||(Ri={}));var St;(e=>{e.white={...Ri.white,a:1},e.transparent={...Ri.white,a:0};function a(j){return{r:j[0],g:j[1],b:j[2],a:j[3]}}e.from0to1=a;function i(j,$){return{...Ri.fromHex(j),a:$}}e.fromHexAndA=i;function o(j){return{r:Math.round(j.r*255),g:Math.round(j.g*255),b:Math.round(j.b*255),a:j.a}}e.toRgb255a1=o;function c(j,$){return Ri.equals(j,$)&&j.a===$.a}e.equals=c;function d(j,$){return Ri.equalsFixed(j,$)&&j.a.toFixed(2)===$.a.toFixed(2)}e.equalsFixed=d;function g(j,$,rt){return{r:j.r+($.r-j.r)*rt,g:j.g+($.g-j.g)*rt,b:j.b+($.b-j.b)*rt,a:j.a+($.a-j.a)*rt}}e.lerp=g;function b({r:j,g:$,b:rt,a:_e}=e.white){return`rgba(${j*255}, ${$*255}, ${rt*255}, ${_e})`}e.toStyle=b})(St||(St={}));var Qv;(e=>e.identity={position:[0,0,0],rotation:[0,0,0],scale:[1,1,1]})(Qv||(Qv={}));var ND;(e=>e.defaultData={mass:1,stiffness:80,damping:10,velocity:0})(ND||(ND={}));var FD;(e=>e.defaultData={control1:[.5,0],control2:[.5,1]})(FD||(FD={}));var Ma;(e=>(e.linear=[0,0,1,1],e.ease=[.25,.1,.25,1],e.easeIn=[.42,0,1,1],e.easeOut=[0,0,.58,1],e.easeInOut=[.42,0,.58,1]))(Ma||(Ma={}));function v1(e){return typeof e=="string"&&e.length===36?/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e):!1}var Ks;(e=>{e.all=["PerspectiveCamera","OrthographicCamera"];function a(i){return e.all.includes(i)}e.is=a})(Ks||(Ks={}));var Il;(e=>{e.DefaultUp=[0,1,0],e.DefaultTargetOffset=1e3,e.defaultData={far:1e5,type:"OrthographicCamera",perspective:{near:70,fov:45,zoom:1},orthographic:{near:-1e5,zoom:1},up:e.DefaultUp,isUpVectorFlipped:!1,targetOffset:e.DefaultTargetOffset};function a(i){return i.type==="PerspectiveCamera"?i.perspective.zoom:i.orthographic.zoom}e.getZoom=a})(Il||(Il={}));var Bo;(e=>{function a(o,c=.1){return{disabled:!1,type:"linear",hideBase:!1,count:3,radial:{radius:Math.max(o[0],o[1])*2,start:0,end:360,alignment:!1,axis:"y",scale:[1,1,1],rotation:[0,0,0],position:[0,0,0]},toObject:{object:"",spreadType:"random",scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],axis:"x",seed:0,count:99,align:"normal"},linear:{scale:[1,1,1],rotation:[0,0,0],position:[o[0]+o[0]*c,0,0]},grid:{count:[2,2,2],size:o.map(d=>d*(1+c)),useCenter:!0},randomness:!1,randomnessObject:{strength:100,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],movement:1,seed:0,freqScale:10,noiseType:"perlin"}}}e.defaultData=a;function i(o,c){let d={...o};if(x1.forEach(g=>{Object.assign(d,{[g]:c[g]??o[g]})}),d.radial={...o.radial},c.radial){let g=o.radial,b=c.radial;b1$1.forEach(j=>{Object.assign(d.radial,{[j]:b[j]??g[j]})})}if(d.linear={...o.linear},c.linear){let g=o.linear,b=c.linear;S1.forEach(j=>{Object.assign(d.linear,{[j]:b[j]??g[j]})})}if(d.grid={...o.grid},c.grid){let g=o.grid,b=c.grid;w1.forEach(j=>{Object.assign(d.grid,{[j]:b[j]??g[j]})})}if(d.toObject={...o.toObject},c.toObject){let g=o.toObject,b=c.toObject;A1.forEach(j=>{Object.assign(d.toObject,{[j]:b[j]??g[j]})})}if(d.randomnessObject={...o.randomnessObject},c.randomnessObject){let g=o.randomnessObject,b=c.randomnessObject;_1.forEach(j=>{Object.assign(d.randomnessObject,{[j]:b[j]??g[j]})})}return d}e.merge=i})(Bo||(Bo={}));var Kv;(e=>{e.defaultData={radial:{},linear:{},grid:{},toObject:{},randomnessObject:{}};let a=["radial","linear","grid","toObject","randomnessObject"];function i(o,c){let d=[];o.count!==void 0&&d.push({type:0,path:c,props:{count:o.count}});for(let g of a){let b=o[g];b&&Object.keys(b).length>0&&d.push({type:0,path:[...c,g],props:b})}return d}e.toOps=i})(Kv||(Kv={}));var x1=["count"],b1$1=["radius","start","end","position","scale","rotation"],S1=["position","scale","rotation"],w1=["count","size"],A1=["count","position","scale","rotation"],_1=["strength","scale","rotation","position","movement","seed","freqScale"],Zv;(e=>{e.all=["PointLight","SpotLight","DirectionalLight","HemisphereLight"];function a(i){return e.all.includes(i)}e.is=a})(Zv||(Zv={}));var Jv;(e=>{function a(o){return i(o)}e.defaultData=a;function i(o){if(o==="PointLight")return{type:o,color:St.white,intensity:1,distance:2e3,decay:1,shadows:!0,shadowResolution:1024,shadowRadius:1,penumbraSize:.5,depth:1e5};if(o==="SpotLight")return{type:o,color:St.white,intensity:1,distance:2e3,decay:1,shadows:!0,penumbra:0,angle:30/180*Math.PI,depth:1e5,penumbraSize:.5,shadowResolution:1024,shadowRadius:1};if(o==="DirectionalLight")return{type:o,color:St.white,intensity:1,shadows:!0,size:2e3,depth:1e5,penumbraSize:.5,shadowResolution:1024,shadowRadius:1};throw new Error("not implemented")}})(Jv||(Jv={}));var Zh;(e=>(e.defaultShapeData={type:"PlaneEmitterShape",size:[100,100,100]},e.defaultCollisionData={colliderEntityId:null,collisionBounce:.75},e.defaultData={renderMaterial:{type:"particleMaterial",color:{r:1,g:.2,b:.545,a:1},color2:{r:.945,g:.714,b:.184,a:1},coloring:"gradient",ease:"linearFadeOut",easeSize:"linearFadeOut",transparent:!0,size:[40,40],texture:"pt_default_particle",spriteRotation:[0,0]},birthRatePerSec:50,gravity:1,noiseStrength:0,noiseScale:0,noiseSeed:1,noiseType:"curl",randomRotation:0,randomScale:.2,randomMass:.5,rootObjectType:"instancedMesh",life:1,direction:[0,0,0],directionMode:"axis",speed:10,shape:e.defaultShapeData,autoPlay:!0,emitTimeDelay:0,emitTimeCycle:"infinity",emitTimeLoopDelayStart:"end",emitTimeDuration:1,...e.defaultCollisionData}))(Zh||(Zh={}));var Rl;(e=>e.defaultData={enabled:"visibility",fusedBody:!0,rigidBody:"positioned",density:1,pointMass:0,gravityScale:1,friction:.5,damping:0,restitution:.2,colliderType:"convex",enabledRotation:[!0,!0,!0],enabledTranslation:[!0,!0,!0]})(Rl||(Rl={}));var E1;(e=>{e.defaultData={castShadow:!0,receiveShadow:!0};function a(i,o){return i.castShadow===o.castShadow&&i.receiveShadow===o.receiveShadow}e.equals=a})(E1||(E1={}));var T1;(e=>{e.defaultData={flatShading:!1,wireframe:!1,side:0};function a(i,o){return i.flatShading===o.flatShading&&i.side===o.side&&i.wireframe===o.wireframe}e.equals=a})(T1||(T1={}));var $v;(e=>e.defaultData={...T1.defaultData,...E1.defaultData})($v||($v={}));var VD;(e=>{function a(i,o){var d,g;let c=[];if("material"in i){let b=typeof i.material=="string"?o.materials[i.material]??((d=o.lib.materials[i.material])==null?void 0:d.asset):i.material;b&&c.push(b)}else if("materials"in i)for(let b of i.materials){let j=typeof b=="string"?o.materials[b]??((g=o.lib.materials[b])==null?void 0:g.asset):b;j&&c.push(j)}return c}e.getMaterialData=a})(VD||(VD={}));var Jh;(e=>(e.defaultVideo={data:"",thumb:"/_assets/_videos/catThumb.png",type:"video",name:"Cat video"},e.maxSize=3e7))(Jh||(Jh={}));var zD;(e=>{function a(i){return i==="texture"||i==="video"||i==="color"||i==="depth"||i==="normal"||i==="gradient"||i==="noise"||i==="fresnel"||i==="rainbow"||i==="toon"||i==="outline"||i==="particle"||i==="transmission"||i==="matcap"||i==="displace"||i==="pattern"||i==="light"}e.is=a})(zD||(zD={}));function GD(e){return e.type!=="displace"}var UD;(e=>{function a(i){return i==="phong"||i==="toon"||i==="lambert"||i==="physical"}e.is=a})(UD||(UD={}));var e0=["mode","gradientType","noiseType","displacementType","projection","cnormal","crop","axis","side"],jD=["wrapping","image","video","name","minFilter"],Hr;(e=>{function a(d,g){let{texture:b,...j}=g;if(Object.assign(d,j),b){let $=d.texture;$&&Object.assign($,b)}}e.patch=a;function i(d,g){return d==="light"&&g?o(g):c(d)}e.defaultData=i;function o(d){let g={mode:0,isMask:!1,visible:!0,bumpMap:void 0,bumpMapIntensity:5,roughnessMap:void 0,alphaOverride:1};switch(d){case"phong":return{...g,category:"phong",specular:{r:.2,g:.2,b:.2},shininess:5,type:"light",visible:!0,mode:0,occlusion:!0,alpha:.6};case"toon":return{...g,category:"toon",specular:{r:.2,g:.2,b:.2},shininess:10,type:"light",alpha:1};case"lambert":return{...g,category:"lambert",emissive:{r:0,g:0,b:0},type:"light",alpha:1,visible:!0,mode:0,occlusion:!0};case"physical":return{...g,category:"physical",roughness:.2,metalness:.2,reflectivity:.2,type:"light",alpha:1,visible:!0,mode:0,occlusion:!0}}}function c(d){let g={alpha:1,mode:0,isMask:!1,visible:!0};switch(d){case"texture":return{...g,type:"texture",size:[128,128],blending:0,axis:"x",side:2,projection:0,texture:{image:"image_0",wrapping:1e3,repeat:[1,1],offset:[0,0],minFilter:1008},crop:!1};case"video":return{...g,type:"video",size:[128,128],blending:0,axis:"x",side:2,projection:0,texture:{video:Jh.defaultVideo,wrapping:1001,repeat:[1,1],offset:[0,0],minFilter:1008},crop:!1};case"color":return{...g,type:"color",color:Ri.fromHex(si)};case"depth":return{...g,type:"depth",gradientType:1,smooth:!1,isVector:!0,isWorldSpace:!1,origin:[0,0,0],direction:[1,0,0],colors:[[1,1,1,1],[0,0,0,1]],steps:[0,1],near:50,far:200};case"normal":return{...g,type:"normal",cnormal:[1,1,1]};case"gradient":return{...g,type:"gradient",gradientType:0,smooth:!1,colors:[[0,0,0,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,1,1,1,1,1,1,1,1,1],num:2,angle:0,offset:[0,0],morph:[0,0]};case"noise":return{...g,type:"noise",size:[100,100,100],noiseType:0,scale:1,move:1,colorA:{...Ri.fromHex(6710886),a:1},colorB:{...Ri.fromHex(6710886),a:1},colorC:{...Ri.fromHex(16777215),a:1},colorD:{...Ri.fromHex(16777215),a:1},distortion:[1,1],fA:[1.7,9.2],fB:[8.3,2.8],voronoiStyle:0,highCut:1,lowCut:0,smoothness:.3,seed:0,quality:1};case"fresnel":return{...g,type:"fresnel",color:St.fromHexAndA(16777215,1),bias:.1,scale:1,intensity:2,factor:1};case"rainbow":return{...g,type:"rainbow",filmThickness:30,movement:0,wavelengths:[0,0,0],noiseStrength:0,noiseScale:1,offset:[0,0,0]};case"toon":return{...g,type:"toon",positioning:2,colors:[[0,0,0,1],[.5,.5,.5,1],[.5,.5,.5,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,.475,.525,1,1,1,1,1,1,1],num:4,source:[0,1e3,0],isWorldSpace:!0,noiseStrength:0,noiseScale:1,shadowColor:St.fromHexAndA(0,0),offset:[0,0,0]};case"outline":return{...g,type:"outline",outlineColor:St.fromHexAndA(0,1),contourColor:St.fromHexAndA(0,1),outlineWidth:2,contourWidth:5,outlineThreshold:.4,contourThreshold:0,outlineSmoothing:0,contourFrequency:10,contourDirection:[0,1,0],positionalLines:!1,compensation:!0};case"matcap":return{...g,type:"matcap",texture:{image:"matcap_0",wrapping:1001,repeat:[1,1],offset:[0,0],minFilter:1008}};case"transmission":return{...g,type:"transmission",thickness:10,ior:1.5,roughness:1};case"displace":return{visible:!0,type:"displace",displacementType:"noise",noiseType:0,scale:10,movement:1,offset:[0,0,0],intensity:8,voronoiStyle:0,smoothness:.3,seed:0,highCut:1,lowCut:0,quality:1};case"pattern":return{...g,type:"pattern",style:0,projection:0,axis:"y",blending:0,offset:[0,0],colorA:{...Ri.fromHex(0),a:1},colorB:{...Ri.fromHex(16777215),a:1},frequency:[10,10],size:.5,variation:0,smoothness:.5,zigzag:0,rotation:0,vertical:[0,1],horizontal:[0,1],sides:6}}}})(Hr||(Hr={}));var oi;(e=>{function a(rt){return!rt.layers.some(_e=>_e.data.type==="texture"&&_e.data.projection!==0||_e.data.type==="depth"&&!_e.data.isWorldSpace||_e.data.type==="noise"||_e.data.type==="displace")}e.isMergable=a;function i(rt){let _e="";return rt.layers.forEach(st=>{Object.entries(st.data).forEach(([ut,gt])=>{_e+=`${ut}${gt}`,Array.isArray(gt)?gt.forEach(yt=>_e+=`${yt}`):typeof gt=="object"?Object.values(gt).forEach(yt=>{typeof yt=="number"?_e+=`${yt.toFixed(4)}`:_e+=`${yt}`}):_e+=`${gt}`})}),_e}e.getHash=i;function o(){return{layers:new Ue}}e.defaultEmptyData=o;function c(rt="layer1",_e="layer2"){return g("phong",rt,_e)}e.defaultData=c;function d(rt,_e){return{...rt,name:_e}}e.withName=d;function g(rt,_e="layer1",st="layer2"){let ut=new Ue;return ut.push({fi:0,data:Hr.defaultData("light",rt),id:_e}),ut.push({fi:1,data:Hr.defaultData("color"),id:st}),{layers:ut}}e.defaultTwoLayerData=g;function b(rt){let _e=Hr.defaultData("texture");rt&&Object.assign(_e.texture,{image:rt});let st=new Ue;return st.push({fi:0,data:_e,id:"layer1"}),st.push({fi:1,data:{...Hr.defaultData("transmission"),alpha:1},id:"layer2"}),st.push({fi:2,data:{...Hr.defaultData("light","lambert"),alpha:0},id:"layer3"}),{layers:st}}e.defaultUIObjectMaterial=b;function j(rt,_e="phong",st="layer1",ut="layer2"){let gt=Hr.defaultData("texture");Object.assign(gt.texture,{image:rt});let yt=new Ue;return yt.push({fi:0,data:gt,id:st}),yt.push({fi:1,data:Hr.defaultData("light",_e),id:ut}),{layers:yt}}e.defaultTwoLayerTextureData=j;function $(rt,_e="phong",st="layer1",ut="layer2"){let gt=Hr.defaultData("video");Object.assign(gt.texture,{video:rt});let yt=new Ue;return yt.push({fi:0,data:gt,id:st}),yt.push({fi:1,data:Hr.defaultData("light",_e),id:ut}),{layers:yt}}e.defaultTwoLayerVideoTextureData=$})(oi||(oi={}));var $h;(e=>{function a(){return{points:new Ue,roundness:0,shapeHoles:[],isClosed:!1}}e.defaultData=a})($h||($h={}));var ed;(e=>{function a(){return{points:new Ue,lastInsertionPlane:null,subdivisions:12,isClosed:!1}}e.defaultData=a})(ed||(ed={}));var M1={type:"Ellipse",width:50,height:50,spikes:16,angle:360,innerRadius:0},t0;(e=>{function a(i,o){let c={...i};return C1.forEach(d=>{Object.assign(c,{[d]:o[d]??i[d]})}),c}e.merge=a})(t0||(t0={}));var r0={shape:M1,depth:1,offset:0,bevel:50,bevelSides:6,angle:0,twist:0,startScale:1,endScale:1,capType:"flat"},C1=["depth","offset","angle","twist","startScale","endScale"],om;(e=>{function a(o){return o==="PolygonGeometry"||o==="RectangleGeometry"||o==="StarGeometry"||o==="TriangleGeometry"||o==="EllipseGeometry"||o==="UIGeometry"}e.is2DParametricMesh=a;function i(o){return o==="PolygonGeometry"||o==="PolygonGeometry"||o==="RectangleGeometry"||o==="StarGeometry"||o==="TriangleGeometry"||o==="EllipseGeometry"||o==="PathGeometry"||o==="VectorGeometry"||o==="ConeGeometry"||o==="CubeGeometry"||o==="CylinderGeometry"||o==="DodecahedronGeometry"||o==="HelixGeometry"||o==="IcosahedronGeometry"||o==="LatheGeometry"||o==="PyramidGeometry"||o==="SphereGeometry"||o==="PlaneGeometry"||o==="BackdropGeometry"||o==="TorusGeometry"||o==="TorusKnotGeometry"||o==="BooleanGeometry"||o==="TextGeometry"}e.isParametricMesh=i})(om||(om={}));var i0;(e=>{function a(i,o){let c={...i};return Object.assign(c,o),c.type==="PathGeometry"&&"extrusion"in o&&o.extrusion&&(c.extrusion={...i.extrusion},Object.assign(c.extrusion,t0.merge(c.extrusion,o.extrusion))),c}e.merge=a})(i0||(i0={}));var Ll;(e=>{function a(i){if(i==="RectangleGeometry")return{width:320,height:320,type:i,cornerRadius:[0,0,0,0],cornerType:0,depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if(i==="UIGeometry")return{type:i,frame:"",cornerRadius:[0,0,0,0],cornerType:0,width:1,height:1};if(i==="PathGeometry")return{type:i,width:1,height:1,depth:1,path:ed.defaultData(),extrusion:r0};if(i==="VectorGeometry")return{width:1,height:1,type:i,subdivisions:12,shape:$h.defaultData(),depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if(i==="BooleanGeometry")return{type:i,operation:2,width:0,height:0,depth:0,phongAngle:35};if(i==="TextGeometry")return{type:i,width:100,height:100,depth:0,horizontalAlign:1,verticalAlign:1,fontSize:16,lineHeight:1.2,letterSpacing:0,text:{textValue:""},textTransform:1,font:"Roboto_regular",extrudeBevelSize:0,extrudeBevelSegments:1};if(i==="SphereGeometry")return{type:"SphereGeometry",width:100,height:100,depth:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:180};throw new Error("not implemented")}e.defaultData=a})(Ll||(Ll={}));var P1=["width","height","depth"],n0;(e=>e.defaultData={enabled:!1,useBackgroundColor:!1,color:Ri.white,near:.1,far:2e3})(n0||(n0={}));var td;(e=>{let a={opacity:1,blendFunction:13,enabled:!1};e.defaultData={enabled:!1,pixelation:{...a,blendFunction:16,granularity:15},bloom:{...a,blendFunction:16,intensity:1,blurScale:1,luminanceThreshold:.25,luminanceSmoothing:.025,kernelSize:3},chromaticAberration:{...a,offset:[2,2]},vignette:{...a,darkness:1,offset:0},hueSaturation:{...a,hue:3,saturation:0},brightnessContrast:{...a,brightness:.25,contrast:0},depthOfField:{...a,focalLength:2,focusDistance:2,bokehScale:2},noise:{...a,blendFunction:16}}})(td||(td={}));var D1;(e=>e.defaultData={softShadowQuality:"low"})(D1||(D1={}));var O1;(e=>e.defaultData={enabled:!0,color:{r:.8274509803921568,g:.8274509803921568,b:.8274509803921568},intensity:.75})(O1||(O1={}));var I1;(e=>e.defaultData={occlusion:!1,aoFullRes:!1,radius:256,bias:.5,aoColor:{r:.19607843137254902,g:.19607843137254902,b:.19607843137254902}})(I1||(I1={}));var Bl;(e=>e.defaultData={usePhysics:!1,gravity:-10})(Bl||(Bl={}));var R1;(e=>e.defaultData={playCamera:As,gameControlObject:null})(R1||(R1={}));var s0;(e=>e.defaultData={backgroundColor:St.fromHexAndA(kD,1),postprocessing:td.defaultData,fog:n0.defaultData,globalPhysics:Bl.defaultData,ambient:O1.defaultData,ao:I1.defaultData,shadow:D1.defaultData,publish:R1.defaultData})(s0||(s0={}));var o0;(e=>e.defaultData={colliderType:"box",size:[100,100,100],colliderHelperVisible:!0,forceType:"collider",forceRange:"global",forceIntensity:.5,forceDambing:.95})(o0||(o0={}));var HD;(e=>{function a(o){return o==="Component"||o==="Instance"}e.isComponentRelated=a;function i(o){return o==="Empty"||o==="Instance"}e.isEmptyOrComponent=i})(HD||(HD={}));var rd;(e=>{e.identity={...Qv.identity,hiddenMatrix:Dl.identity};function a(c){return{position:c.position,rotation:c.rotation,scale:c.scale,hiddenMatrix:c.hiddenMatrix}}e.fromObject=a;function i(c,d){return{position:(d==null?void 0:d.position)||c.position,rotation:(d==null?void 0:d.rotation)||c.rotation,scale:(d==null?void 0:d.scale)||c.scale,hiddenMatrix:(d==null?void 0:d.hiddenMatrix)||c.hiddenMatrix}}e.merge=i;function o(c,d){return vv({position:Lo.isEqual(c.position,d.position)?void 0:d.position,rotation:Lo.isEqual(c.rotation,d.rotation)?void 0:d.rotation,scale:Lo.isEqual(c.scale,d.scale)?null:d.scale,hiddenMatrix:Dl.isEqual(c.hiddenMatrix,d.hiddenMatrix)?void 0:d.hiddenMatrix})}e.diff=o})(rd||(rd={}));var Li;(e=>e.defaultData={states:new Ue,events:new Ue,visible:!0,raycastLock:!1,physics:Rl.defaultData,pathSnapping:{pathId:null,slide:0,offset:0,orientation:"tangential"},...rd.identity,cloner:null})(Li||(Li={}));var a0;(e=>e.defaultData={type:"Empty",...Li.defaultData})(a0||(a0={}));var WD;(e=>e.defaultData={type:"ParticleCollider",...o0.defaultData,...Li.defaultData})(WD||(WD={}));var qD;(e=>e.defaultData={type:"Component",...Li.defaultData})(qD||(qD={}));var YD;(e=>e.defaultData={type:"Particle",...Li.defaultData,...Zh.defaultData})(YD||(YD={}));var kc;(e=>e.defaultData={type:"Mesh",...Li.defaultData,...$v.defaultData})(kc||(kc={}));var Vc;(e=>e.defaultData={...Li.defaultData,...rd.identity,position:[0,0,Il.DefaultTargetOffset],...Il.defaultData})(Vc||(Vc={}));var l0;(e=>{function a(i){return{...Li.defaultData,...Jv.defaultData(i)}}e.defaultData=a,e.defaultDirectionalLightData={...e.defaultData("DirectionalLight"),position:[200,300,300],name:"Directional Light",intensity:.7}})(l0||(l0={}));var id;(e=>{function a(o,c,d=0){for(;d<c.length;){let g=o?o[c[d]]:void 0;if(c.length===d+1)return g;if(g)o=g.descendants,d+=1;else return}}e.resolveWithDes=a;function i(o,c,d=0){let g=a(o,c,d);if(g){let b=Object.keys(g);if(b.length===1&&b[0]==="descendants")return}return g}e.resolve=i})(id||(id={}));var No;(e=>{e.rootOverrideProps=["physics","events"],e.compositeNonOptionalOverrideProps=["geometry"],e.compositeEntireOverrideOverrideProps=["material"];function a(o,c){return{...Li.defaultData,...c,component:o,overrides:new vr,physics:void 0,events:void 0,type:"Instance"}}e.ofComponent=a;function i(o){let c=rd.fromObject(o.data);return a(o.id,c)}e.fromComponentData=i})(No||(No={}));var Ca;(e=>{e.defaultData={type:"Page",...Li.defaultData,physics:{...Rl.defaultData,fusedBody:!1},...s0.defaultData,camera:Vc.defaultData};function a(i){return i.uiScene!==void 0}e.isUIPage=a})(Ca||(Ca={}));var c0;(e=>(e.defaultCamera={position:[0,0,1e3],scale:[1,1,1],rotation:[0,0,0],hiddenMatrix:Dl.identity,name:"Play Camera",visible:!0,raycastLock:!1,physics:Rl.defaultData,states:new Ue,events:new Ue,cloner:null,pathSnapping:{pathId:null,orientation:"tangential",slide:0,offset:0},...Il.defaultData},e.KeysByResetCategory={States:["states"],Events:["events"],Material:["material","materials"],Geometry:["geometry"],Position:["position"],Rotation:["rotation"],Scale:["scale"],Transform:["position","scale","rotation","hiddenMatrix"],Name:["name"],Visibility:["visible","raycastLock","flatShading","wireframe","side"],Shadows:["castShadow","receiveShadow"],Cloner:["cloner"],Physics:["physics"]},e.defaultMeshObject={name:"Rectangle",...Li.defaultData,...kc.defaultData,geometry:Ll.defaultData("RectangleGeometry"),material:oi.defaultTwoLayerData("phong","layer1","layer2")},e.defaultBooleanObject={name:"Boolean",...Li.defaultData,...kc.defaultData,geometry:Ll.defaultData("BooleanGeometry"),material:oi.defaultTwoLayerData("phong","layer1","layer2")},e.defaultTextObject={name:"Text",...Li.defaultData,...kc.defaultData,geometry:Ll.defaultData("TextGeometry"),material:oi.defaultTwoLayerData("phong","layer1","layer2")}))(c0||(c0={}));var Pa;(e=>{function a(d,g){let b={name:g};return d.type==="Mesh"?(b.geometry={},"material"in d&&(b.material={layers:new vr}),"materials"in d&&(b.materials=d.materials.map(j=>({layers:new vr})))):Ks.is(d.type)&&(b.perspective={},b.orthographic={}),b}e.newEmpty=a;function i(d,g){if(g===void 0)return d;let b={...d};return"material"in b&&"material"in g&&g.material&&(b.material=Tl(b.material,j=>{if(typeof j!="string")for(let[$,rt]of Object.entries(g.material.layers)){let _e=j.layers.data($);_e&&Hr.patch(_e,rt)}}).data),b.materials&&g.materials&&(b.materials=Tl(b.materials,j=>{var $,rt;for(let _e=0;_e<b.materials.length;_e++){let st=g.materials[_e];if(typeof st!="string")for(let[ut,gt]of Object.entries(st.layers)){let yt=(rt=($=j[_e])==null?void 0:$.layers)==null?void 0:rt.data(ut);yt&&Hr.patch(yt,gt)}}}).data),b}function o(d,g){let b,j=[],$={orthographic:0,perspective:0,geometry:0};function rt(_e,st){for(let[ut,gt]of Object.entries(st.layers)){let{texture:yt,...Pt}=gt;if(yt!==void 0&&Object.keys(yt).length>0){let wt={path:[..._e,"layers",ut,"texture"],props:yt,type:0};j.push(wt)}if(Object.keys(Pt).length>0){let wt={path:[..._e,"layers",ut],props:Pt,type:0};j.push(wt)}}}for(let[_e,st]of Object.entries(g))if(_e!=="name")if(_e==="cloner")j.push(...Kv.toOps(st,["cloner"]));else if(_e==="pathSnapping")j.push({path:[_e],props:{slide:st.slide,offset:st.offset},type:0});else if(_e==="material")rt(["material"],st);else if(_e==="materials")for(let[ut,gt]of Object.entries(st))rt(["materials",ut],gt);else if($[_e]===0){if(_e==="geometry"&&st.extrusion!==void 0){let ut={path:[_e,"extrusion"],props:st.extrusion,type:0};j.push(ut),st={...st},delete st.extrusion}if(Object.keys(st).length>0){let ut={path:[_e],props:st,type:0};j.push(ut)}}else b===void 0&&(b={path:[],props:{},type:0},j.push(b)),b.props[_e]=st;return j}e.toOps=o;function c(d,g){var j,$,rt,_e,st,ut;if(g===void 0)return d;let b={...d};if(Object.assign(b,rd.merge(b,g)),Object.assign(b,{pathSnapping:Object.assign({},b.pathSnapping,{slide:((j=g.pathSnapping)==null?void 0:j.slide)??(($=b.pathSnapping)==null?void 0:$.slide)??0,offset:((rt=g.pathSnapping)==null?void 0:rt.offset)??((_e=b.pathSnapping)==null?void 0:_e.offset)??0})}),Ks.is(d.type)){b.orthographic={...b.orthographic},b.perspective={...b.perspective};let gt=g;((st=gt.orthographic)==null?void 0:st.zoom)!==void 0&&(b.orthographic.zoom=gt.orthographic.zoom),((ut=gt.perspective)==null?void 0:ut.zoom)!==void 0&&(b.perspective.zoom=gt.perspective.zoom),gt.isUpVectorFlipped!==void 0&&(b.isUpVectorFlipped=gt.isUpVectorFlipped),gt.targetOffset!==void 0&&(b.targetOffset=gt.targetOffset)}else if(d.type==="Mesh")"geometry"in g&&Object.assign(b,{geometry:i0.merge(b.geometry,g.geometry)}),(g.material||g.materials)&&(b=i(b,g)),b.cloner&&"cloner"in g&&Object.assign(b,{cloner:Bo.merge(b.cloner,g.cloner)});else if(d.type==="Empty")b.cloner&&"cloner"in g&&Object.assign(b,{cloner:Bo.merge(b.cloner,g.cloner)});else if(Zv.is(d.type)){let gt=g;gt.intensity!==void 0&&(b.intensity=gt.intensity),gt.color!==void 0&&(typeof gt.color=="string"?b.color=gt.color:b.color=Ri.clone(gt.color))}return b}e.patch=c})(Pa||(Pa={}));var nd;(e=>e.defaultData={enablePan:!0,enableZoom:!0,enableRotate:!0,enableDamping:!0,rotationLimitsMode:0,rotationVerticalOffset:{min:Math.PI/4,max:Math.PI/4},rotationHorizontalOffset:{min:Math.PI/4,max:Math.PI/4},rotationSoftLimit:2,panLimitsMode:0,panVerticalOffset:{min:250,max:250},panHorizontalOffset:{min:250,max:250},panSoftLimit:2,zoomLimitsEnabled:!1,zoomLimits:{min:.1,max:2},autoRotate:!1,autoRotateSpeed:2,autoRotateClockwise:!0,hoverRotatePanMode:0,hoverRotatePanStrength:20,hoverRotateDamping:.125,isTouchZoom:!0,orbitTouches:2,panTouches:3,resetHoverEffectOnPointerLeave:!0})(nd||(nd={}));var Zs;(e=>e.defaultData={orbitControls:nd.defaultData,playPage:Ol,withBackground:!0,preventScroll:!1,preventTouchScroll:!1,hideCursor:!1,mouseEventTarget:"canvas",joystickSizeAndXYOffset:Array(12).fill(0).map((a,i)=>{let o=0,c=0;return i<5?c=-30:i<10&&(c=30),i===0||i===10||i===5?o=30:(i===4||i===11||i===9)&&(o=-30),[120,[o,c],"show"]}),settings:{image:{format:"jpg",ratio:1},video:{format:"mp4",imageFormat:"jpg",fps:30,mbps:80,ratio:Math.max(1,typeof window<"u"?Math.floor(window.devicePixelRatio):1),stopMode:"manual",duration:5e3},web:{logo:!0,compress:!0,preset:1,preload:!0,hint:!1}},stopRaycast:!0,hdTransmission:!1})(Zs||(Zs={}));var L1;(e=>e.defaultData={id:"basic",label:"Basic",style:"None",prompt:""})(L1||(L1={}));var B1;(e=>e.defaultData={weather:0,shadows:0,lightOrigin:0,temperature:0,sun:0,camera:0,environment:0,particles:0,nature:0,floor:0})(B1||(B1={}));var Da;(e=>(e.defaultData=()=>({mode:"line-art-both",prompt:"",negativePrompt:"",style:{...L1.defaultData},isRandomSeed:!0,seed:e.generateSeed(),guessMode:!1,advanced:!1,steps:20,guidanceScale:7.5,controlNetScale:1,modifiers:B1.defaultData}),e.generateSeed=()=>Math.round(Math.random()*1e5)))(Da||(Da={}));var Nl;(e=>{function a(o){return o.find(c=>c.data.type==="Page"&&c.data.globalPhysics.usePhysics)!==void 0}e.physicsEnabled=a;function i(o,c,d){o.scene.objects.traverseFrom(c,(g,b)=>{var j;if(b.type==="Instance"){let $=(j=sd.getComponentData(o,b.component))==null?void 0:j.data;$&&d(g,b,$.events)}else d(g,b,b.events)})}e.traverseModuleInstances=i})(Nl||(Nl={}));var Oa;(e=>{e.TRASH_CAN_ID="830a2708-8ed9-49cf-a68e-085299892222";function a(c={withLight:!0,withSquare:!0}){let d=[],g=c0.defaultMeshObject;c.withLight===!0&&d.push({fi:-1,data:l0.defaultDirectionalLightData,id:"830a2708-8ed9-49cf-a68e-085299899103",children:[]}),c.withSquare===!0&&d.push({fi:1,id:"7ba78968-2a55-48f2-b14c-5191da3e075e",data:g,children:[]});let b=new yr$1;return b.push({fi:1,id:Ol,data:{...Ca.defaultData,name:"Scene 1"},children:d}),b}e.defaultData={objects:a(),publish:Zs.defaultData,styles:Da.defaultData()},e.emptyDataWithoutPage=function(){return{objects:new yr$1,publish:Zs.defaultData,styles:Da.defaultData()}},e.emptyDataWithPage=function(c){return{objects:a(c),publish:Zs.defaultData,styles:Da.defaultData()}},e.emptyData=function(){return{objects:new yr$1,publish:{...Zs.defaultData},styles:Da.defaultData()}};function i(c){return{...e.defaultData,objects:_n(c,yr$1.prototype)}}e.withObjs=i;function o(c,d){return i([{id:c,data:d,children:[],fi:0}])}e.withObj=o})(Oa||(Oa={}));var od;(e=>e.defaultData={preset:"fullscreen",allowResponsive:!1,size:[512,512],coords:[0,0],sceneScale:1,color:{r:0,g:0,b:0,a:.5}})(od||(od={}));var ad;(e=>e.emptyImage={data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVQYV2NgYAAAAAMAAWgmWQ0AAAAASUVORK5CYII=",name:"empty"})(ad||(ad={}));var Yi;(e=>{function a(g){return g.textValue!==void 0}e.isTextValue=a;function i(g){return typeof g=="number"}e.isNumber=i;function o(g){return typeof g=="boolean"}e.isBoolean=o;function c(g){return a(g)?"string":o(g)?"boolean":"number"}e.typeOfVariable=c;function d(g){return e.isTextValue(g)?Array.isArray(g.textValue)?g.textValue.map(b=>b.toString().padStart(g.padding??2,"0")).join(g.deliminator??":")+(g.suffix!==void 0?" "+g.suffix:""):g.textValue.toString():e.isBoolean(g)?g?"True":"False":e.isNumber(g)?parseFloat(g.toFixed(3)).toString():g.toString()}e.getDisplayedValue=d})(Yi||(Yi={}));var N1;(e=>e.all=["images","videos","colors","audios","particles","fonts","materials","variables"])(N1||(N1={}));var XD;(e=>e.all=[...N1.all,"components"])(XD||(XD={}));var QD;(e=>{function a(){return{images:new it,videos:new it,colors:new it,audios:new it,particles:new it,fonts:new it,materials:new it,components:new it,variables:new it}}e.defaultData=a})(QD||(QD={}));var Ia;(e=>{function a(){return{images:new it,videos:new it,colors:new it,audios:new it,particles:new it,fonts:new it,materials:new it,components:new it,variables:new it}}e.defaultData=a})(Ia||(Ia={}));var Mn;(e=>{function a(){let g={};return g["89b10010-844c-11ec-a8a3-0242ac120002"]={r:.5,g:.5,b:.5,a:1,name:"Default Color"},_n(g,it.prototype)}e.defaultColors=a;function i(g){let b={};return g!=null&&g.withAITexture&&(b["a1b10010-844c-a8a3-11ec-0242ac2011ec"]={...ad.emptyImage,name:"AI generated image"}),_n(b,it.prototype)}e.defaultImages=i;function o(){return{catelogs:new it,materials:new it,images:new it,videos:new it,colors:new it,audios:new it,particles:new it,fonts:new it,variables:new Ue,lib:Ia.defaultData()}}e.emptyData=o;function c(g){switch(g){case"number":return{value:0,name:"Number"};case"boolean":return{value:!1,name:"Boolean"};case"string":return{value:{textValue:"String value"},name:"String"};case"time":let b=[0,0,0];return{name:"Time",value:{textValue:b,deliminator:":",padding:2,suffix:"AM"},dynamicVariableType:"time",format:"HH:mm:ss",format12h24h:"12ampm",timeZone:null,hasEnd:!1,endValue:{textValue:b,deliminator:":",padding:2,suffix:"AM"},autoStart:!0,repeat:!1};case"counter":return{name:"Counter",value:0,dynamicVariableType:"counter",updateInterval:1e3,increment:1,autoStart:!0,hasEnd:!0,endValue:60,repeat:!0,randomStart:!1,range:[0,100],decimals:0};case"random":return{name:"Random",value:0,dynamicVariableType:"random",updateInterval:1e3,increment:1,autoStart:!0,isStatic:!1,hasEnd:!0,endValue:60,repeat:!0,min:0,max:100,decimals:0};default:console.error("Unknown variable type",g)}}e.defaultVariables=c;function d(g,b){if(b.format==="HH:mm:ss"){let j=Math.floor(g/3600),$=Math.floor((g-j*3600)/60),rt=Math.round(g-j*3600-$*60);return{textValue:[j,$,rt]}}else if(b.format==="mm:ss"){let j=Math.floor(g/60),$=Math.round(g-j*60);return{textValue:[j,$]}}else return b.format==="number"?g=Math.round(g):g=Math.round(g*1e3)/1e3,g}e.getFormattedTimerTime=d})(Mn||(Mn={}));var ld;(e=>e.list=["idle","move","jump","run"])(ld||(ld={}));var cd;(e=>(e.defaultColliderData={type:"capsule",height:200,radius:50,position:[0,0,0],rotation:[0,0,0]},e.defaultDataThirdPerson={moveMode:"walk",forwardDirection:"+z",speedTranslate:1e3,speedRotate:100,runMultiplier:2,rotationMode:"normal",rotBy:"keys",rotByTouch:"drag",delayPos:[.3,.3],delayRot:[.3,.3],keyAssignments:[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX","▲"],["rotPosY","◀"],["rotNegX","▼"],["rotNegY","▶"],["jump","Space"],["run","⇧"],["none","Ctrl"]],touchControl:!0,joystickPosLoc:5,joystickRotLoc:11,jumpTouchButtonLoc:9,collider:e.defaultColliderData,colliderHelperVisible:!0,collisionEnabled:!0,jumpPower:100,resetYPosition:3e3,alignToGround:!1,autoOrientMove:!0,orientWith:"camera",orientMode:"radial",delayPosCamera:.3,delayRotCamera:.3,camera:"",cameraXAxis:"Limit",cameraYAxis:"Free",cameraRotXLimits:[0,Math.PI/2],cameraRotYLimits:[-Math.PI/2,Math.PI/2],gameActions:{idle:new Ue,move:new Ue,jump:new Ue,run:new Ue},navmesh:{enabled:!1,ch:6,cs:6,walkableClimb:5,walkableHeight:1,walkableRadius:0,zones:"all",objects:[],helperVisible:!0,destinationHelperRadius:0,destinationHelperColor:St.fromHexAndA(3728051,1)}}))(cd||(cd={}));function KD(e){e.layers.forEach(a=>{if(a.type==="depth"&&a.colorA!==void 0){let i=a.colorA,o=a.colorB,c=[[i.r,i.g,i.b,i.a],[o.r,o.g,o.b,o.a]],d=[0,1];for(let b=2;b<10;b++)c.push(c[1]),d.push(1);let g={...as(kr$1(a),"type","visible","isVector","isWorldSpace","origin","alpha","mode"),near:Math.max(0,a.near),far:Math.max(0,a.far),colors:c,steps:d,num:2,direction:[1,0,0],smooth:!1,gradientType:1};Object.assign(a,g)}else if(a.type==="depth"&&a.gradientType===1&&(a.near<0||a.far<0)){let i={...kr$1(a),near:Math.max(a.near,0),far:Math.max(a.far,0)};Object.assign(a,i)}})}function Ra(e,a){Object.values(e.shared.materials).forEach(i=>a(i))}function La(e,a){e.scene.objects.traverse((i,o)=>{"materials"in o?o.materials.forEach((c,d)=>{c===void 0&&(o.materials[d]=oi.defaultData(),c=o.materials[d]),typeof c!="string"&&a(c)}):"material"in o?typeof o.material!="string"&&(o.material===void 0&&(o.material=oi.defaultData()),a(o.material)):o.type==="Mesh"&&(o.material===void 0&&(o.material=oi.defaultData()),a(o.material)),"overrides"in o&&Object.values(o.overrides).forEach(c=>{c.material&&typeof c.material!="string"&&Object.getPrototypeOf(c.material)!==vr.prototype&&a(c.material)})})}function Nq(e){Object.assign(e.scene.publish,{orbitControls:{...nd.defaultData,...kr$1(e.scene.publish.orbitControls)}})}function Fq(e){Object.assign(e.scene.publish.settings,{video:{...Zs.defaultData.settings.video,...kr$1(e.scene.publish.settings.video)}})}function kq(e){function a(i){if(i.layers){for(let o of Object.values(i.layers))if(o){for(let[c,d]of Object.entries(o))if((e0.includes(c)||typeof d=="boolean")&&delete o[c],c==="texture")for(let[g,b]of Object.entries(d))(jD.includes(g)||typeof b=="boolean")&&delete d[g]}}}e.scene.objects.traverse((i,o)=>{o.states.forEach(c=>{let d=c;d.material?a(d.material):d.materials&&d.materials.forEach(g=>{a(g)})})})}function Vq(e){e.scene.publish.withBackground=!0}function zq(e){e.scene.publish.settings.web={compress:!0,preload:!0,preset:1,logo:!0,hint:!1}}function Uq(e){e.scene.objects.traverse((a,i)=>{let o=i.cloner;o&&(o.radial.scale=o.radial.scale.map(c=>c+1),o.linear.scale=o.linear.scale.map(c=>c+1))})}function Gq(e){e.scene.objects.traverse((a,i)=>{let o=i.geometry;o&&(o.type==="DodecahedronGeometry"||o.type==="IcosahedronGeometry")&&(o.detail=Math.round(o.detail))})}function jq(e){e.scene.objects.traverse((a,i)=>{let o=e.scene.objects.unproxy().parent(a);if(o){let c=kr$1(e.scene.objects.data(o));c&&c.type==="Mesh"&&c.geometry.type==="BooleanGeometry"&&i.type==="Mesh"&&(i.visible=kr$1(i).booleanExclude!==!0)}})}function Hq(e){e.scene.objects.traverse((a,i)=>{if(i.type==="Mesh"){let o=i;i.geometry.type==="NonParametricGeometry"?o.material!==void 0&&delete o.material:o.materials!==void 0&&delete o.materials}})}function Wq(e){function a(o){Object.setPrototypeOf(o,vr.prototype),o.texture&&Object.setPrototypeOf(o.texture,vr.prototype)}function i(o){Object.setPrototypeOf(o,vr.prototype);for(let c in o)a(o[c])}e.scene.objects.traverse((o,c)=>{c.states.forEach(d=>{let g=d;if(g.material){let b=kr$1(g.material).layers;i(b),g.material.layers=b}if(g.materials)for(let b=0;b<g.materials.length;b++){let j=g.materials[b],$=kr$1(j).layers;i($),j.layers=$}})})}function ZD(e){e.layers===void 0&&Object.assign(e,oi.defaultTwoLayerData("lambert"))}function F1(e){!e.layers||e.layers.forEach(a=>{if(a.type==="depth"&&a.colors.length===10){let i=[...a.colors];i.push(a.colors[9]);let o=[...a.steps];o.push(a.steps[9]);let c={...kr$1(a),colors:i,steps:o};Object.assign(a,c)}})}function qq(e){e.scene.objects.traverse((a,i)=>{i.type==="Mesh"&&(i.geometry.type==="BooleanGeometry"||i.geometry.type==="SubdivGeometry")&&(i.geometry.phongAngle=35)})}function JD(e){e.scene.objects.traverse((a,i)=>{"materials"in i?i.materials.forEach(o=>{typeof o!="string"&&F1(o)}):"material"in i&&typeof i.material!="string"&&F1(i.material)}),Object.values(e.shared.materials).forEach(a=>F1(a))}function Yq(e){e.scene.environment.ambientLight.softShadows=!1,e.scene.environment.ambientLight.softShadowQuality="low",e.scene.objects.traverse((a,i)=>{(i.type==="DirectionalLight"||i.type==="SpotLight")&&(i.shadowResolution=1024,i.shadowRadius=1,i.depth=1e5)}),e.shared.penumbraSize=new Array(5).fill(.5)}function Xq(e){e.shared.audios=_n({},it.prototype)}function Qq(e){e.shared.videos=_n({},it.prototype)}function Kq(e){let a=e.shared.materials;Object.entries(a).forEach(([i,o])=>{if(!o.layers){let c={name:"Untitled Material",layers:[{fi:0,data:{type:"light",category:"phong",alpha:.6,visible:!0,mode:0,specular:{r:.2,g:.2,b:.2},shininess:5},id:"layer1"},{fi:1,data:{type:"color",alpha:1,visible:!0,mode:0,color:{r:.2823529411764706,g:.2823529411764706,b:.30196078431372547}},id:"layer2"}]};Object.assign(a,{[i]:c})}})}function Zq(e){Object.entries(kr$1(e.shared.images)).filter(a=>a[1].asset===!1).map(a=>a[0]).forEach(a=>{delete e.shared.images[a]}),Object.entries(kr$1(e.shared.audios)).filter(a=>a[1].asset===!1).map(a=>a[0]).forEach(a=>{delete e.shared.audios[a]})}function Jq(e){e.scene.publish.settings.web.preload=!1}function $D(e){e.layers&&e.layers.forEach(a=>{a.type==="depth"&&a.num!==void 0&&(a.colors=a.colors.slice(0,a.num),a.steps=a.steps.slice(0,a.num),delete a.num)})}function eO(e){e.layers&&e.layers.forEach(a=>{GD(a)&&a.isMask===void 0&&(a.isMask=!1),(a.type==="texture"||a.type==="video")&&a.blending===void 0&&(a.blending=0),(a.type==="noise"||a.type==="displace"&&a.displacementType==="noise")&&(a.voronoiStyle===void 0&&(a.voronoiStyle=0),a.highCut===void 0&&(a.highCut=1),a.lowCut===void 0&&(a.lowCut=0),a.smoothness===void 0&&(a.smoothness=.3),a.seed===void 0&&(a.seed=0),a.quality===void 0&&(a.quality=1))})}function $q(e){e.shared.fonts=_n({},it.prototype)}function e9(e){return e.replace(".typeface","").replace(/optimer/gi,"open sans").replace("space_mono","space mono").replace(/alma_mono/gi,"varela round").replace(/droid_sans_mono/gi,"noto sans mono").replace(/droid_sans|gentilis|gnomon_(simple|foreground)|helvetiker/gi,"roboto").replace(/droid_serif/gi,"roboto slab").replace("_sans"," sans").replace("crimson_text","crimson text").replace("medium_medium","medium").replace("fatface_fatface","fatface").replace("100hairline","thin").replace("200thin","extralight").replace("300light","light").replace("500medium","medium").replace("600semi","semibold").replace("800heavy","extrabold").replace("900black","black").replace(/bodoni_(11|16|24|36|48|72|96)([^_])/gi,"bodoni_$1_$2").replace(/bodoni_(11|16|24|36|48|72|96)/gi,"bodoni moda").replace(/(thin|hairline)(_regular)?/gi,"100").replace(/(extra|ultra)light(_regular)?/gi,"200").replace(/light(_regular)?/gi,"300").replace(/_book|_normal|_roman/gi,"_regular").replace(/medium(_regular)?/gi,"500").replace(/(semi|demi)bold(_regular)?/gi,"600").replace(/(extra|ultra)bold(_regular)?/gi,"800").replace(/bold(_regular)?/gi,"700").replace(/(black|heavy|fatface)(_regular)?/gi,"900").replace(/([1-9]00)_italic/gi,"$1italic").replace(/regularitalic/gi,"italic").replace(/regularitalic/gi,"italic").split(" ").map(a=>a.charAt(0).toUpperCase()+a.slice(1)).join(" ")}function t9(e){let a=[];e.scene.objects.traverse((i,o)=>{let c=o;if(c.type==="TextFrame"){let d=oi.defaultTwoLayerData("phong"),g=typeof c.color=="string"?e.shared.colors[c.color]:c.color;d.layers[1].data.color={r:g.r,g:g.g,b:g.b},d.layers[1].data.alpha=c.alpha;let b=e9(c.font);e.shared.fonts[b]===void 0&&(e.shared.fonts[b]={name:b});let j={name:c.name,...Li.defaultData,...kc.defaultData,flatShading:!1,wireframe:!1,geometry:{...Ll.defaultData("TextGeometry"),width:c.width,height:c.height,font:b,depth:0,horizontalAlign:c.horizontalAlign,verticalAlign:c.verticalAlign,fontSize:c.fontSize*1.40625,lineHeight:c.lineHeight/1.40625,letterSpacing:c.letterSpacing-1,text:c.text,textTransform:c.textTransform,extrudeBevelSize:0,extrudeBevelSegments:1},material:d,states:kr$1(c.states),events:kr$1(c.events),visible:c.visible,raycastLock:c.raycastLock,position:c.position,rotation:c.rotation,scale:c.scale,hiddenMatrix:c.hiddenMatrix},$=kr$1(e.scene.objects).parent(i);e.scene.objects.insertAfter($??null,i,[{id:i+"new",data:j,children:[]}]),a.push(i)}}),a.forEach(i=>{e.scene.objects.delete(i)})}function r9(e){let a={0:"MouseDown",1:"MouseUp",2:"MouseHover",5:"KeyDown",6:"KeyUp",7:"Start",9:"LookAt",10:"Follow",11:"Scroll",12:"Audio",13:"GameControl"};e.scene.objects.traverse((i,o)=>{o.events.forEach(c=>{if(a[Number(c.type)])if(Object.assign(c,{type:a[Number(c.type)]}),c.type==="Audio"&&"audioEvent"in c&&(Object.assign(c,{playAudio:c.audioEvent}),delete c.audioEvent),c.type==="GameControl")Object.assign(c,{gameActions:{idle:new Ue,move:new Ue,jump:new Ue}});else{let d=new Ue;Object.assign(c,{actions:d}),(c.type==="MouseDown"||c.type==="MouseUp"||c.type==="KeyDown"||c.type==="KeyUp")&&"url"in c&&d.push({fi:0,id:Me.generateUUID(),data:{type:"Link",url:c.url,delay:0}}),"targets"in c&&(c.targets.forEach((g,b,j)=>{let $={state:void 0,repeat:0,delay:0,delayDirection:void 0,direction:"normal",duration:0,easing:4},rt={easing:g.easing,duration:g.duration};g.easing===6?Object.assign(rt,as(g,"mass","stiffness","damping","velocity")):g.easing===5&&Object.assign(rt,{control1:{...g.control1},control2:{...g.control2}});let _e={repeat:g.repeat?-1:0,delay:g.delay,delayDirection:g.delayDirection,direction:g.cycle&&g.rewind?"pingpong-rewind":g.cycle?"pingpong":"normal"},st={state:g.state,..._e,...rt},ut={allowSlerp:!0,type:"Transition",object:g.object,repeat:0,delay:0,delayDirection:void 0,direction:"normal",tweens:new Ue({fi:0,id:Me.generateUUID(),data:$},{fi:1,id:Me.generateUUID(),data:st})};d.push({fi:j,id:b,data:ut})}),delete c.targets)}})})}function i9(e){e.scene.objects.traverse((a,i)=>{function o(c,d){var j;let g=new Ue,b=[];if(i.events.forEach(($,rt,_e)=>{if($.type==="Audio"&&$.trigger===d){let st;b.push(rt),$.interaction==="play"?st={...as($,"interaction","audio","delay","volume","loop"),triggerAfter:"after"in $?$.after:void 0,toggle:"after"in $?$.toggle:void 0,type:"Audio"}:($.interaction==="pause"||$.interaction==="stop")&&(st={...as($,"interaction","delay","object","playAudio"),type:"Audio"}),st&&g.push({fi:_e,id:rt,data:st})}}),b.forEach($=>i.events.delete($)),g.length){let $=(j=i.events.find(rt=>rt.type===c))==null?void 0:j.data;$?"actions"in $&&$.actions.insertBefore(null,g):i.events.insertBefore(null,[{id:Me.generateUUID(),data:{type:c,actions:g}}])}}o("Start","start"),o("MouseDown","mouseDown"),o("MouseUp","mouseUp"),o("KeyDown","keyDown"),o("KeyUp","keyUp")})}function tO(e){var i;let a=(i=e.layers.find(o=>o.type==="light"))==null?void 0:i.data;if((a==null?void 0:a.category)==="basic"){let o=Hr.defaultData("light","phong"),c=a;Object.assign(c,o),c.visible=!1}}function rO(e){Ra(e,tO),La(e,tO)}function n9(e){e.scene.objects.traverse((a,i)=>{i.type==="Mesh"&&i.geometry.type==="SubdivGeometry"&&(i.geometry.scaleBaked||(i.geometry.scaleBaked=[1,1,1]))})}function s9(e){e.scene.objects.traverse((a,i)=>{(i.type==="Empty"||i.type==="Mesh")&&i.cloner&&!i.cloner.randomnessObject&&!i.cloner.toObject&&!i.cloner.randomness&&(i.cloner={...i.cloner,toObject:{object:"",spreadType:"random",scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],axis:"x",seed:0,count:99,align:"normal"},randomness:!1,randomnessObject:{strength:100,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],movement:1,seed:0,freqScale:10,noiseType:"perlin"}})})}function o9(e){e.scene.objects.traverse((a,i)=>{i.type==="Mesh"&&i.geometry.type==="NonParametricGeometry"&&!("material"in i)&&!("materials"in i)&&(i.material=oi.defaultTwoLayerData("phong"))})}function a9(e){e.scene.publish.orbitControls.autoZoom===void 0&&(e.scene.publish.orbitControls.autoZoom=!1),e.scene.objects.traverse((a,i)=>{(i.type==="OrthographicCamera"||i.type==="PerspectiveCamera")&&(i.orthographic.autoZoom===void 0&&(i.orthographic.autoZoom=!1),i.orthographic.autoZoomFrustumSize===void 0&&(i.orthographic.autoZoomFrustumSize=790))})}function l9(e){e.scene.objects.traverse((a,i)=>{i.pathSnapping===void 0&&(i.pathSnapping={pathId:null,slide:0,offset:0,orientation:"tangential"}),i.pathSnapping.offset===void 0&&(i.pathSnapping.offset=0)})}function c9(e){e.scene.publish.mouseEventTarget===void 0&&(e.scene.publish.mouseEventTarget="canvas"),e.scene.publish.settings.web.hint===void 0&&(e.scene.publish.settings.web.hint=!1)}function u9(e){let{video:a}=e.scene.publish.settings;a.format==="gif"&&a.fps>48&&(a.fps=15)}function h9(e){e.scene.objects.traverse((a,i)=>{i.events.forEach(o=>{o.type==="GameControl"&&(o.resetYPosition=Math.abs(o.resetYPosition-i.position[1]))})})}function d9(e){let a=e.scene.environment.usePhysics;e.scene.objects.traverse((i,o)=>{a&&o.physics===null?o.collision=!1:o.collision="visibility"})}function f9(e){e.scene.objects.traverse((a,i)=>{i.events.forEach(o=>{o.type==="GameControl"&&(o.navmesh=cd.defaultDataThirdPerson.navmesh)})})}function p9(e){e.scene.styles||(e.scene.styles=Da.defaultData())}function iO(e){e.layers.forEach(a=>{a.type==="light"&&a.category!=="toon"&&a.occlusion===void 0&&(a.occlusion=!0)})}function m9(e){e.scene.environment.ambientLight.occlusion===void 0&&(e.scene.environment.ambientLight.occlusion=!1),e.scene.environment.ambientLight.aoFullRes===void 0&&(e.scene.environment.ambientLight.aoFullRes=!1),e.scene.environment.ambientLight.radius===void 0&&(e.scene.environment.ambientLight.radius=256),e.scene.environment.ambientLight.bias===void 0&&(e.scene.environment.ambientLight.bias=.5),e.scene.environment.ambientLight.aoColor===void 0&&(e.scene.environment.ambientLight.aoColor={r:.19607843137254902,g:.19607843137254902,b:.19607843137254902}),La(e,iO),Ra(e,iO)}function g9(e){e.scene.objects.traverse((a,i)=>{i.events.forEach(o=>{o.type==="GameControl"&&Object.assign(o.gameActions,{run:new Ue})})})}function y9(e){e.scene.objects.traverse((a,i)=>{i.events.forEach(o=>{o.type==="GameControl"&&(o.keyAssignments=[...o.keyAssignments,["run","⇧"],["none","Ctrl"]])})})}function nO(e){e.layers&&e.layers.forEach(a=>{a.type==="light"&&a.bumpMapIntensity===void 0&&(a.bumpMapIntensity=5)})}function sO(e,a){if(a<1&&(La(e,KD),Ra(e,KD),e.schema=1),a<2&&(Nq(e),e.schema=2),a<3&&(kq(e),e.schema=3),a<4&&(Vq(e),e.schema=4),a<5&&(zq(e),e.schema=5),a<6&&(Uq(e),e.schema=6),a<7&&(Gq(e),e.schema=7),a<8&&(e.schema=8),a<9&&(JD(e),e.schema=9),a<10&&(qq(e),e.schema=10),a<11&&(Yq(e),e.schema=11),a<12&&(JD(e),e.schema=12),a<13&&(Xq(e),e.schema=13),a<14&&(Kq(e),e.schema=14),a<15&&(Zq(e),e.schema=15),a<16&&(Jq(e),e.schema=16),a<17&&(La(e,$D),Ra(e,$D),e.schema=17),a<18&&(La(e,ZD),Ra(e,ZD),e.schema=18),a<19&&(Fq(e),e.schema=19),a<20&&($q(e),t9(e),e.schema=20),a<21&&(r9(e),i9(e),e.schema=21),a<22&&(rO(e),e.schema=22),a<23&&(n9(e),e.schema=23),a<24&&(s9(e),e.schema=24),(a<25||e.shared.videos===void 0)&&(Qq(e),a<25&&(e.schema=25)),a<26&&(jq(e),e.schema=26),a<27&&(Hq(e),e.schema=27),a<28&&(rO(e),e.schema=28),a<29&&(Wq(e),e.schema=29),a<30&&(o9(e),e.schema=30),a<31&&(a9(e),e.schema=31),a<33&&(l9(e),e.schema=33),a<34&&(c9(e),e.schema=34),a<35&&(u9(e),e.schema=35),a<36&&(h9(e),e.schema=36),a<37&&(d9(e),e.schema=37),a<38&&(La(e,eO),Ra(e,eO),e.schema=38),a<39&&(f9(e),e.schema=39),a<40&&(p9(e),e.schema=40),a<41&&(m9(e),e.schema=41),a<42&&(g9(e),e.schema=42),a<43&&(y9(e),e.schema=43),a<99){La(e,nO),Ra(e,nO),e.scene.publish.playCamera===null&&(e.scene.publish.playCamera=As);let i=kr$1(e.scene.objects),o=e.scene.objects;e.scene.publish.playPage=Ol,o.insertBefore(null,null,[{id:Ol,data:{...Ca.defaultData,backgroundColor:e.scene.backgroundColor,fog:e.scene.fog,postprocessing:e.scene.postprocessing,ao:as(e.scene.environment.ambientLight,"occlusion","aoFullRes","radius","bias","aoColor"),publish:{playCamera:e.scene.publish.playCamera,gameControlObject:e.scene.publish.gameControlObject},shadow:as(e.scene.environment.ambientLight,"softShadowQuality"),globalPhysics:{...Bl.defaultData,...as(e.scene.environment,"usePhysics","gravity")},camera:kr$1(e.scene.ownerCamera)??Ca.defaultData.camera,name:"Scene"},children:[]}]);for(let g of i)g.id!==Oa.TRASH_CAN_ID&&o.move(Ol,g.fi,g.id);let c=0,d=0;e.shared.penumbraSize&&e.scene.objects.traverse((g,b)=>{b.type==="DirectionalLight"?(b.penumbraSize=e.shared.penumbraSize[Math.min(c,2)],c+=1):b.type==="SpotLight"&&(b.penumbraSize=e.shared.penumbraSize[3+Math.min(d,1)],d+=1),(b.physics===void 0||b.physics===null)&&b.type!=="Instance"&&(b.physics={},Object.assign(b.physics,Rl.defaultData)),b.physics!==void 0&&b.physics!==null&&(b.physics.enabled=b.collision??"visibility",delete b.collision)}),e.schema=99}}function oO(e){e.layers&&e.layers.forEach(a=>{a.type==="light"&&a.alphaOverride===void 0&&(a.alphaOverride=1)})}function v9(e){e.scene.objects.traverse((a,i)=>{let o=i.geometry;o&&o.type==="PathGeometry"&&(o.extrusion.capType="flat",o.extrusion.bevel=50,o.extrusion.bevelSides=6,o.extrusion.shape.type==="Custom"&&(o.extrusion.shape.shapeQuality="low"))})}function x9(e){var a;Array.isArray(kr$1(e.events))&&((a=e.events)==null||a.forEach(i=>{"disabled"in i||(i.disabled=!1),(i.type==="MouseDown"||i.type==="MouseUp"||i.type==="MousePress")&&(i.mode=i.mode||"Object")}))}var ud=180/Math.PI;function aO(e){e.rotation=e.rotation.slice(0,3).map(a=>a*ud)}function lO(e){var i,o;aO(e),e.type==="Page"&&aO(e.camera),(i=e.states)==null||i.forEach(c=>{c.rotation===void 0||c.rotation===null||(c.rotation=c.rotation.slice(0,3).map(d=>d*ud))});let a=e.geometry;a&&a.type==="SphereGeometry"&&(a.thetaLength=(a.thetaLength??180)*ud),a&&a.type==="TorusGeometry"&&(a.arc=a.arc*ud),a&&a.type==="PathGeometry"&&(a.extrusion.angle*=ud,a.extrusion.twist*=ud),e.type==="Mesh"&&e.geometry.type==="TextGeometry"&&(e.geometry.text={textValue:e.geometry.text}),Array.isArray(kr$1(e.events))&&((o=e.events)==null||o.forEach(c=>{(c.type==="MouseDown"||c.type==="MouseUp"||c.type==="MousePress"||c.type==="KeyDown"||c.type==="KeyUp"||c.type==="KeyPress"||c.type==="Collision"||c.type==="Trigger")&&(c.runMode=c.toggle?"Toggle":"Repeat")}))}function b9$1(e){e.shared.variables=_n({},it.prototype)}function S9(e){let a=kr$1(e.shared.variables);e.shared.variables=_n(Object.entries(a??{}).map(([i,o],c)=>({fi:c,id:i,data:o})),Ue.prototype)}var Fo=111;function cO(e,a){a(e.data);for(let i of e.children)cO(i,a)}function w9(e){let a=e.schema??104;a!==Fo&&a<105&&(cO(e.asset,lO),e.schema=105)}function A9(e){e.shared.particles=_n({},it.prototype),e.shared.lib&&(e.shared.lib.particles=Ia.defaultData().particles)}function _9(e){e.scene.objects.traverse((a,i)=>{i.type==="Particle"&&typeof i.renderMaterial.size=="number"&&Object.assign(i.renderMaterial,{size:[i.renderMaterial.size,i.renderMaterial.size]})})}function u0(e){let a=e.schema??0;if(a!==Fo){console.warn("updating from ",a,"to ",Fo),sO(e,a),a<100&&(e.scene.publish.joystickSizeAndXYOffset===void 0&&(e.scene.publish.joystickSizeAndXYOffset=Zs.defaultData.joystickSizeAndXYOffset),e.schema=100),a<101&&(La(e,oO),Ra(e,oO),e.schema=101),a<102&&(v9(e),e.schema=102),a<104&&(e.shared.catelogs=new it,e.shared.lib=Ia.defaultData(),e.schema=104),a<105&&(b9$1(e),e.scene.objects.traverse((i,o)=>{lO(o)}),e.schema=105);for(let i of Object.values(e.shared.lib.components))w9(i);a<106&&(S9(e),e.schema=106),a<107&&(e.shared.lib.variables=Ia.defaultData().variables,e.schema=107),a<109&&(A9(e),e.schema=109),a<110&&(_9(e),e.schema=110),a<111&&(e.scene.objects.traverse((i,o)=>{x9(o)}),e.schema=111)}}var sd;(e=>{e.defaultData={schema:Fo,scene:Oa.defaultData,frames:new it().add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",od.defaultData),shared:{...Mn.emptyData(),colors:Mn.defaultColors()}},e.emptyDataForImports=function(c){let d=Oa.emptyDataWithPage(c);return{schema:Fo,scene:d,frames:new it().add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",od.defaultData),shared:{...Mn.emptyData(),colors:Mn.defaultColors(),images:Mn.defaultImages(c)}}},e.emptyData=function(){return{schema:Fo,scene:Oa.emptyDataWithPage(),frames:new it().add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",od.defaultData),shared:Mn.emptyData()}},e.clipboard2dData=function(){return{schema:Fo,scene:Oa.emptyData(),frames:new it,shared:Mn.emptyData()}},e.collabHelper={...em,updateSchema(c){return(c.schema??0)<Fo?Tl(c,u0):(c.schema??0)-Fo}};function a(c){let d=e.collabHelper.updateSchema(c);return typeof d=="number"?d===0?c:null:d.data}e.updateSchemaDirectly=a;function i(c){return{...c,shared:{...c.shared,lib:Ia.defaultData()}}}e.withoutLib=i;function o(c,d){let g=c.scene.objects.get(d);if(g&&g.data.type==="Component")return g;{let b=c.shared.lib.components[d];if(b)return b.asset}}e.getComponentData=o})(sd||(sd={}));var uO;(e=>{function a(i){return!0}e.is=a})(uO||(uO={}));var h0;(e=>{e.defaultData={position:[0,0],scale:[1,1],rotation:0};function a(o,c){return{position:(c==null?void 0:c.position)??o.position,rotation:(c==null?void 0:c.rotation)??o.rotation,scale:(c==null?void 0:c.scale)??o.scale}}e.merge=a;function i(o,c){return vv({position:Ro.isEqual(o.position,c.position)?void 0:c.position,rotation:o.rotation===c.rotation?void 0:c.rotation,scale:Ro.isEqual(o.scale,c.scale)?void 0:c.scale})}e.diff=i})(h0||(h0={}));var k1;(e=>e.defaultData={horizontalConstraint:0,verticalConstraint:0})(k1||(k1={}));var d0;(e=>e.defaultData={opacity:1,fill:{color:St.white,enabled:!0},stroke:{color:St.from0to1([0,0,0,1]),thickness:1,enabled:!1,mode:"inside"},layerBlur:{radius:2,enabled:!1},backgroundBlur:{radius:2,enabled:!1},dropShadow:{offset:[10,10],blurRadius:10,color:St.from0to1([0,0,0,1]),enabled:!1,spread:0},innerShadow:{offset:[10,10],blurRadius:10,color:St.from0to1([0,0,0,1]),enabled:!1,spread:0}})(d0||(d0={}));var Ba;(e=>{function a(g,b){return{name:b}}e.newEmpty=a;function i(g,b){if(b===void 0)return g;let j={...g},$=["width","height","cornerRadius"];for(let rt of $)rt in j&&rt in b&&b[rt]!==void 0&&Object.assign(j,{[rt]:b[rt]});return j}function o(g,b){if(b===void 0)return g;let j={...g};return"fill"in j&&"fill"in b&&b.fill!==void 0&&Object.assign(j,{fill:{...j.fill,...b.fill}}),"stroke"in j&&"stroke"in b&&b.stroke!==void 0&&Object.assign(j,{stroke:{...j.stroke,...b.stroke}}),"layerBlur"in j&&"layerBlur"in b&&b.layerBlur!==void 0&&Object.assign(j,{layerBlur:{...j.layerBlur,...b.layerBlur}}),"backgroundBlur"in j&&"backgroundBlur"in b&&b.backgroundBlur!==void 0&&Object.assign(j,{backgroundBlur:{...j.backgroundBlur,...b.backgroundBlur}}),"dropShadow"in j&&"dropShadow"in b&&b.dropShadow!==void 0&&Object.assign(j,{dropShadow:{...j.dropShadow,...b.dropShadow}}),"innerShadow"in j&&"innerShadow"in b&&b.innerShadow!==void 0&&Object.assign(j,{innerShadow:{...j.innerShadow,...b.innerShadow}}),j}function c(g,b){if(b===void 0)return g;let j={...g};return Object.assign(j,h0.merge(j,b)),j=i(j,b),j=o(j,b),j}e.patch=c;function d(g,b){let j,$=[];for(let[rt,_e]of Object.entries(b))rt!=="name"&&(j===void 0&&(j={path:[],props:{},type:0},$.push(j)),j.props[rt]=_e);return $}e.toOps=d})(Ba||(Ba={}));var am;(e=>e.defaultData={...h0.defaultData,...k1.defaultData,states:new Ue,events:new Ue,visible:!0,raycastLock:!1})(am||(am={}));var hd;(e=>e.defaultData={...am.defaultData,...d0.defaultData})(hd||(hd={}));var f0;(e=>e.defaultData={cornerRadius:[0,0,0,0]})(f0||(f0={}));var V1;(e=>e.defaultData={...hd.defaultData,type:"ellipse2d",width:100,height:100,name:"Ellipse"})(V1||(V1={}));var dd;(e=>e.defaultData={...hd.defaultData,...f0.defaultData,type:"rectangle2d",width:100,height:100,name:"Rectangle"})(dd||(dd={}));var z1;(e=>e.defaultData={...hd.defaultData,type:"text2d",width:100,height:100,fontSize:12,lineHeight:1.2,letterSpacing:0,text:{textValue:"Hello world"},horizontalAlign:1,verticalAlign:1,textTransform:1,font:"Roboto_regular",name:"Text"})(z1||(z1={}));var U1;(e=>e.defaultData={...hd.defaultData,type:"path2d",path:"",name:"Path"})(U1||(U1={}));var hO;(e=>{function a(i){return i.type==="ellipse2d"||i.type==="rectangle2d"||i.type==="text2d"||i.type==="vector2d"||i.type==="path2d"}e.is=a})(hO||(hO={}));var lm;(e=>e.defaultData={...am.defaultData,name:"Group",type:"group2d"})(lm||(lm={}));var G1;(e=>e.defaultData={...am.defaultData,...f0.defaultData,...d0.defaultData,name:"Frame",type:"frame2d",clipped:!0,width:200,height:200,fill:{color:St.fromHexAndA(si,1),enabled:!0},stroke:{color:St.fromHexAndA(0,1),thickness:1,enabled:!1,mode:"inside"},backgroundBlur:{radius:2,enabled:!1},layerBlur:{radius:2,enabled:!1}})(G1||(G1={}));var Na;(e=>{function a(d){switch(d){case"rectangle2d":return{...dd.defaultData};case"ellipse2d":return{...V1.defaultData};case"text2d":return{...z1.defaultData};case"vector2d":return{...dd.defaultData};case"path2d":return{...U1.defaultData};case"frame2d":return{...G1.defaultData};case"group2d":return{...lm.defaultData}}}e.defaultData=a;function i(d){return"width"in d&&"height"in d?[typeof d.width=="number"?d.width*.5:0,typeof d.height=="number"?d.height*.5:0]:[0,0]}e.getPivot=i;function o(d){return d.type==="rectangle2d"||d.type==="ellipse2d"||d.type==="text2d"||d.type==="frame2d"}e.isResizeable=o;function c(d){return d.type==="rectangle2d"||d.type==="frame2d"}e.hasCorners=c})(Na||(Na={}));var p0;(e=>(e.defaultData={name:"UI",type:"scene2d",objects:new yr$1},e.emptyData=function(){return{type:"scene2d",objects:new yr$1}}))(p0||(p0={}));function Js(e,a=!1){let i=e[0].index!==null,o=new Set(Object.keys(e[0].attributes)),c=new Set(Object.keys(e[0].morphAttributes)),d={},g={},b=e[0].morphTargetsRelative,j=new Pe,$=0;for(let rt=0;rt<e.length;++rt){let _e=e[rt],st=0;if(i!==(_e.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+rt+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let ut in _e.attributes){if(!o.has(ut))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+rt+'. All geometries must have compatible attributes; make sure "'+ut+'" attribute exists among all geometries, or in none of them.'),null;d[ut]===void 0&&(d[ut]=[]),d[ut].push(_e.attributes[ut]),st++}if(st!==o.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+rt+". Make sure all geometries have the same number of attributes."),null;if(b!==_e.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+rt+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let ut in _e.morphAttributes){if(!c.has(ut))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+rt+".  .morphAttributes must be consistent throughout all geometries."),null;g[ut]===void 0&&(g[ut]=[]),g[ut].push(_e.morphAttributes[ut])}if(a){let ut;if(i)ut=_e.index.count;else if(_e.attributes.position!==void 0)ut=_e.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+rt+". The geometry must have either an index or a position attribute"),null;j.addGroup($,ut,rt),$+=ut}}if(i){let rt=0,_e=[];for(let st=0;st<e.length;++st){let ut=e[st].index;for(let gt=0;gt<ut.count;++gt)_e.push(ut.getX(gt)+rt);rt+=e[st].attributes.position.count}j.setIndex(_e)}for(let rt in d){let _e=dO(d[rt]);if(!_e)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+rt+" attribute."),null;j.setAttribute(rt,_e)}for(let rt in g){let _e=g[rt][0].length;if(_e===0)break;j.morphAttributes=j.morphAttributes||{},j.morphAttributes[rt]=[];for(let st=0;st<_e;++st){let ut=[];for(let yt=0;yt<g[rt].length;++yt)ut.push(g[rt][yt][st]);let gt=dO(ut);if(!gt)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+rt+" morphAttribute."),null;j.morphAttributes[rt].push(gt)}}return j}function dO(e){let a,i,o,c=0;for(let b=0;b<e.length;++b){let j=e[b];if(j.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(a===void 0&&(a=j.array.constructor),a!==j.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(i===void 0&&(i=j.itemSize),i!==j.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(o===void 0&&(o=j.normalized),o!==j.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;c+=j.array.length}let d=new a(c),g=0;for(let b=0;b<e.length;++b)d.set(e[b].array,g),g+=e[b].array.length;return new Xe(d,i,o)}var fO=Math.pow(2,-24),zc=class{constructor(){}};function Es(e,a,i){return i.min.x=a[e],i.min.y=a[e+1],i.min.z=a[e+2],i.max.x=a[e+3],i.max.y=a[e+4],i.max.z=a[e+5],i}function j1(e){let a=-1,i=-1/0;for(let o=0;o<3;o++){let c=e[o+3]-e[o];c>i&&(i=c,a=o)}return a}function H1(e,a){a.set(e)}function W1(e,a,i){let o,c;for(let d=0;d<3;d++){let g=d+3;o=e[d],c=a[d],i[d]=o<c?o:c,o=e[g],c=a[g],i[g]=o>c?o:c}}function cm(e,a,i){for(let o=0;o<3;o++){let c=a[e+2*o],d=a[e+2*o+1],g=c-d,b=c+d;g<i[o]&&(i[o]=g),b>i[o+3]&&(i[o+3]=b)}}function fd(e){let a=e[3]-e[0],i=e[4]-e[1],o=e[5]-e[2];return 2*(a*i+i*o+o*a)}function M9(e,a){if(!e.index){let i=e.attributes.position.count,o=a.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,c;i>65535?c=new Uint32Array(new o(4*i)):c=new Uint16Array(new o(2*i)),e.setIndex(new Xe(c,1));for(let d=0;d<i;d++)c[d]=d}}function C9(e){if(!e.groups||!e.groups.length)return[{offset:0,count:e.index.count/3}];let a=[],i=new Set;for(let c of e.groups)i.add(c.start),i.add(c.start+c.count);let o=Array.from(i.values()).sort((c,d)=>c-d);for(let c=0;c<o.length-1;c++){let d=o[c],g=o[c+1];a.push({offset:d/3,count:(g-d)/3})}return a}function Y1(e,a,i,o,c=null){let d=1/0,g=1/0,b=1/0,j=-1/0,$=-1/0,rt=-1/0,_e=1/0,st=1/0,ut=1/0,gt=-1/0,yt=-1/0,Pt=-1/0,wt=c!==null;for(let Ct=a*6,At=(a+i)*6;Ct<At;Ct+=6){let Tt=e[Ct+0],kt=e[Ct+1],It=Tt-kt,Lt=Tt+kt;It<d&&(d=It),Lt>j&&(j=Lt),wt&&Tt<_e&&(_e=Tt),wt&&Tt>gt&&(gt=Tt);let Ft=e[Ct+2],Nt=e[Ct+3],Ht=Ft-Nt,Gr=Ft+Nt;Ht<g&&(g=Ht),Gr>$&&($=Gr),wt&&Ft<st&&(st=Ft),wt&&Ft>yt&&(yt=Ft);let hs=e[Ct+4],_s=e[Ct+5],hn=hs-_s,Qn=hs+_s;hn<b&&(b=hn),Qn>rt&&(rt=Qn),wt&&hs<ut&&(ut=hs),wt&&hs>Pt&&(Pt=hs)}o[0]=d,o[1]=g,o[2]=b,o[3]=j,o[4]=$,o[5]=rt,wt&&(c[0]=_e,c[1]=st,c[2]=ut,c[3]=gt,c[4]=yt,c[5]=Pt)}function P9(e,a,i,o){let c=1/0,d=1/0,g=1/0,b=-1/0,j=-1/0,$=-1/0;for(let rt=a*6,_e=(a+i)*6;rt<_e;rt+=6){let st=e[rt+0];st<c&&(c=st),st>b&&(b=st);let ut=e[rt+2];ut<d&&(d=ut),ut>j&&(j=ut);let gt=e[rt+4];gt<g&&(g=gt),gt>$&&($=gt)}o[0]=c,o[1]=d,o[2]=g,o[3]=b,o[4]=j,o[5]=$}function D9(e,a,i,o,c){let d=i,g=i+o-1,b=c.pos,j=c.axis*2;for(;;){for(;d<=g&&a[d*6+j]<b;)d++;for(;d<=g&&a[g*6+j]>=b;)g--;if(d<g){for(let $=0;$<3;$++){let rt=e[d*3+$];e[d*3+$]=e[g*3+$],e[g*3+$]=rt;let _e=a[d*6+$*2+0];a[d*6+$*2+0]=a[g*6+$*2+0],a[g*6+$*2+0]=_e;let st=a[d*6+$*2+1];a[d*6+$*2+1]=a[g*6+$*2+1],a[g*6+$*2+1]=st}d++,g--}else return d}}var Fa=32,O9=(e,a)=>e.candidate-a.candidate,Fl=new Array(Fa).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),m0=new Float32Array(6);function I9(e,a,i,o,c,d){let g=-1,b=0;if(d===0)g=j1(a),g!==-1&&(b=(a[g]+a[g+3])/2);else if(d===1)g=j1(e),g!==-1&&(b=R9(i,o,c,g));else if(d===2){let j=fd(e),$=1.25*c,rt=o*6,_e=(o+c)*6;for(let st=0;st<3;st++){let ut=a[st],gt=(a[st+3]-ut)/Fa;if(c<Fa/4){let yt=[...Fl];yt.length=c;let Pt=0;for(let Ct=rt;Ct<_e;Ct+=6,Pt++){let At=yt[Pt];At.candidate=i[Ct+2*st],At.count=0;let{bounds:Tt,leftCacheBounds:kt,rightCacheBounds:It}=At;for(let Lt=0;Lt<3;Lt++)It[Lt]=1/0,It[Lt+3]=-1/0,kt[Lt]=1/0,kt[Lt+3]=-1/0,Tt[Lt]=1/0,Tt[Lt+3]=-1/0;cm(Ct,i,Tt)}yt.sort(O9);let wt=c;for(let Ct=0;Ct<wt;Ct++){let At=yt[Ct];for(;Ct+1<wt&&yt[Ct+1].candidate===At.candidate;)yt.splice(Ct+1,1),wt--}for(let Ct=rt;Ct<_e;Ct+=6){let At=i[Ct+2*st];for(let Tt=0;Tt<wt;Tt++){let kt=yt[Tt];At>=kt.candidate?cm(Ct,i,kt.rightCacheBounds):(cm(Ct,i,kt.leftCacheBounds),kt.count++)}}for(let Ct=0;Ct<wt;Ct++){let At=yt[Ct],Tt=At.count,kt=c-At.count,It=At.leftCacheBounds,Lt=At.rightCacheBounds,Ft=0;Tt!==0&&(Ft=fd(It)/j);let Nt=0;kt!==0&&(Nt=fd(Lt)/j);let Ht=1+1.25*(Ft*Tt+Nt*kt);Ht<$&&(g=st,$=Ht,b=At.candidate)}}else{for(let wt=0;wt<Fa;wt++){let Ct=Fl[wt];Ct.count=0,Ct.candidate=ut+gt+wt*gt;let At=Ct.bounds;for(let Tt=0;Tt<3;Tt++)At[Tt]=1/0,At[Tt+3]=-1/0}for(let wt=rt;wt<_e;wt+=6){let Ct=~~((i[wt+2*st]-ut)/gt);Ct>=Fa&&(Ct=Fa-1);let At=Fl[Ct];At.count++,cm(wt,i,At.bounds)}let yt=Fl[Fa-1];H1(yt.bounds,yt.rightCacheBounds);for(let wt=Fa-2;wt>=0;wt--){let Ct=Fl[wt],At=Fl[wt+1];W1(Ct.bounds,At.rightCacheBounds,Ct.rightCacheBounds)}let Pt=0;for(let wt=0;wt<Fa-1;wt++){let Ct=Fl[wt],At=Ct.count,Tt=Ct.bounds,kt=Fl[wt+1].rightCacheBounds;At!==0&&(Pt===0?H1(Tt,m0):W1(Tt,m0,m0)),Pt+=At;let It=0,Lt=0;Pt!==0&&(It=fd(m0)/j);let Ft=c-Pt;Ft!==0&&(Lt=fd(kt)/j);let Nt=1+1.25*(It*Pt+Lt*Ft);Nt<$&&(g=st,$=Nt,b=Ct.candidate)}}}}else console.warn(`MeshBVH: Invalid build strategy value ${d} used.`);return{axis:g,pos:b}}function R9(e,a,i,o){let c=0;for(let d=a,g=a+i;d<g;d++)c+=e[d*6+o*2];return c/i}function L9(e,a){let i=e.attributes.position,o=e.index.array,c=o.length/3,d=new Float32Array(c*6),g=i.normalized,b=i.array,j=i.offset||0,$=3;i.isInterleavedBufferAttribute&&($=i.data.stride);let rt=["getX","getY","getZ"];for(let _e=0;_e<c;_e++){let st=_e*3,ut=_e*6,gt,yt,Pt;g?(gt=o[st+0],yt=o[st+1],Pt=o[st+2]):(gt=o[st+0]*$+j,yt=o[st+1]*$+j,Pt=o[st+2]*$+j);for(let wt=0;wt<3;wt++){let Ct,At,Tt;g?(Ct=i[rt[wt]](gt),At=i[rt[wt]](yt),Tt=i[rt[wt]](Pt)):(Ct=b[gt+wt],At=b[yt+wt],Tt=b[Pt+wt]);let kt=Ct;At<kt&&(kt=At),Tt<kt&&(kt=Tt);let It=Ct;At>It&&(It=At),Tt>It&&(It=Tt);let Lt=(It-kt)/2,Ft=wt*2;d[ut+Ft+0]=kt+Lt,d[ut+Ft+1]=Lt+(Math.abs(kt)+Lt)*fO,kt<a[wt]&&(a[wt]=kt),It>a[wt+3]&&(a[wt+3]=It)}}return d}function B9(e,a){function i(wt){st&&st(wt/ut)}function o(wt,Ct,At,Tt=null,kt=0){if(!gt&&kt>=j&&(gt=!0,$&&(console.warn(`MeshBVH: Max depth of ${j} reached when generating BVH. Consider increasing maxDepth.`),console.warn(e))),At<=rt||kt>=j)return i(Ct+At),wt.offset=Ct,wt.count=At,wt;let It=I9(wt.boundingData,Tt,g,Ct,At,_e);if(It.axis===-1)return i(Ct+At),wt.offset=Ct,wt.count=At,wt;let Lt=D9(b,g,Ct,At,It);if(Lt===Ct||Lt===Ct+At)i(Ct+At),wt.offset=Ct,wt.count=At;else{wt.splitAxis=It.axis;let Ft=new zc,Nt=Ct,Ht=Lt-Ct;wt.left=Ft,Ft.boundingData=new Float32Array(6),Y1(g,Nt,Ht,Ft.boundingData,d),o(Ft,Nt,Ht,d,kt+1);let Gr=new zc,hs=Lt,_s=At-Ht;wt.right=Gr,Gr.boundingData=new Float32Array(6),Y1(g,hs,_s,Gr.boundingData,d),o(Gr,hs,_s,d,kt+1)}return wt}M9(e,a);let c=new Float32Array(6),d=new Float32Array(6),g=L9(e,c),b=e.index.array,j=a.maxDepth,$=a.verbose,rt=a.maxLeafTris,_e=a.strategy,st=a.onProgress,ut=e.index.count/3,gt=!1,yt=[],Pt=C9(e);if(Pt.length===1){let wt=Pt[0],Ct=new zc;Ct.boundingData=c,P9(g,wt.offset,wt.count,d),o(Ct,wt.offset,wt.count,d),yt.push(Ct)}else for(let wt of Pt){let Ct=new zc;Ct.boundingData=new Float32Array(6),Y1(g,wt.offset,wt.count,Ct.boundingData,d),o(Ct,wt.offset,wt.count,d),yt.push(Ct)}return yt}function gO(e,a){let i=B9(e,a),o,c,d,g=[],b=a.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;for(let rt=0;rt<i.length;rt++){let _e=i[rt],st=j(_e),ut=new b(32*st);o=new Float32Array(ut),c=new Uint32Array(ut),d=new Uint16Array(ut),$(0,_e),g.push(ut)}return g;function j(rt){return rt.count?1:1+j(rt.left)+j(rt.right)}function $(rt,_e){let st=rt/4,ut=rt/2,gt=!!_e.count,yt=_e.boundingData;for(let Pt=0;Pt<6;Pt++)o[st+Pt]=yt[Pt];if(gt){let Pt=_e.offset,wt=_e.count;return c[st+6]=Pt,d[ut+14]=wt,d[ut+15]=65535,rt+32}else{let Pt=_e.left,wt=_e.right,Ct=_e.splitAxis,At;if(At=$(rt+32,Pt),At/4>Math.pow(2,32))throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return c[st+6]=At/4,At=$(At,wt),c[st+7]=Ct,At}}}var Vn=class{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(e,a){let i=1/0,o=-1/0;for(let c=0,d=e.length;c<d;c++){let g=e[c][a];i=g<i?g:i,o=g>o?g:o}this.min=i,this.max=o}setFromPoints(e,a){let i=1/0,o=-1/0;for(let c=0,d=a.length;c<d;c++){let g=a[c],b=e.dot(g);i=b<i?b:i,o=b>o?b:o}this.min=i,this.max=o}isSeparated(e){return this.min>e.max||e.min>this.max}};Vn.prototype.setFromBox=function(){let e=new _;return function(a,i){let o=i.min,c=i.max,d=1/0,g=-1/0;for(let b=0;b<=1;b++)for(let j=0;j<=1;j++)for(let $=0;$<=1;$++){e.x=o.x*b+c.x*(1-b),e.y=o.y*j+c.y*(1-j),e.z=o.z*$+c.z*(1-$);let rt=a.dot(e);d=Math.min(rt,d),g=Math.max(rt,g)}this.min=d,this.max=g}}();var N9=function(){let e=new _,a=new _,i=new _;return function(o,c,d){let g=o.start,b=e,j=c.start,$=a;i.subVectors(g,j),e.subVectors(o.end,o.start),a.subVectors(c.end,c.start);let rt=i.dot($),_e=$.dot(b),st=$.dot($),ut=i.dot(b),gt=b.dot(b)*st-_e*_e,yt,Pt;gt!==0?yt=(rt*_e-ut*st)/gt:yt=0,Pt=(rt+yt*_e)/st,d.x=yt,d.y=Pt}}(),um=function(){let e=new z$2,a=new _,i=new _;return function(o,c,d,g){N9(o,c,e);let b=e.x,j=e.y;if(b>=0&&b<=1&&j>=0&&j<=1){o.at(b,d),c.at(j,g);return}else if(b>=0&&b<=1){j<0?c.at(0,g):c.at(1,g),o.closestPointToPoint(g,!0,d);return}else if(j>=0&&j<=1){b<0?o.at(0,d):o.at(1,d),c.closestPointToPoint(d,!0,g);return}else{let $;b<0?$=o.start:$=o.end;let rt;j<0?rt=c.start:rt=c.end;let _e=a,st=i;if(o.closestPointToPoint(rt,!0,a),c.closestPointToPoint($,!0,i),_e.distanceToSquared(rt)<=st.distanceToSquared($)){d.copy(_e),g.copy(rt);return}else{d.copy($),g.copy(st);return}}}}(),yO=function(){let e=new _,a=new _,i=new ii,o=new Di;return function(c,d){let{radius:g,center:b}=c,{a:j,b:$,c:rt}=d;if(o.start=j,o.end=$,o.closestPointToPoint(b,!0,e).distanceTo(b)<=g||(o.start=j,o.end=rt,o.closestPointToPoint(b,!0,e).distanceTo(b)<=g)||(o.start=$,o.end=rt,o.closestPointToPoint(b,!0,e).distanceTo(b)<=g))return!0;let _e=d.getPlane(i);if(Math.abs(_e.distanceToPoint(b))<=g){let st=_e.projectPoint(b,a);if(d.containsPoint(st))return!0}return!1}}(),F9=1e-15;function pd(e){return Math.abs(e)<F9}var zn=class extends Dr$1{constructor(...e){super(...e),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new _),this.satBounds=new Array(4).fill().map(()=>new Vn),this.points=[this.a,this.b,this.c],this.sphere=new Br,this.plane=new ii,this.needsUpdate=!0}intersectsSphere(e){return yO(e,this)}update(){let e=this.a,a=this.b,i=this.c,o=this.points,c=this.satAxes,d=this.satBounds,g=c[0],b=d[0];this.getNormal(g),b.setFromPoints(g,o);let j=c[1],$=d[1];j.subVectors(e,a),$.setFromPoints(j,o);let rt=c[2],_e=d[2];rt.subVectors(a,i),_e.setFromPoints(rt,o);let st=c[3],ut=d[3];st.subVectors(i,e),ut.setFromPoints(st,o),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(g,e),this.needsUpdate=!1}};zn.prototype.closestPointToSegment=function(){let e=new _,a=new _,i=new Di;return function(o,c=null,d=null){let{start:g,end:b}=o,j=this.points,$,rt=1/0;for(let _e=0;_e<3;_e++){let st=(_e+1)%3;i.start.copy(j[_e]),i.end.copy(j[st]),um(i,o,e,a),$=e.distanceToSquared(a),$<rt&&(rt=$,c&&c.copy(e),d&&d.copy(a))}return this.closestPointToPoint(g,e),$=g.distanceToSquared(e),$<rt&&(rt=$,c&&c.copy(e),d&&d.copy(g)),this.closestPointToPoint(b,e),$=b.distanceToSquared(e),$<rt&&(rt=$,c&&c.copy(e),d&&d.copy(b)),Math.sqrt(rt)}}();zn.prototype.intersectsTriangle=function(){let e=new zn,a=new Array(3),i=new Array(3),o=new Vn,c=new Vn,d=new _,g=new _,b=new _,j=new _,$=new Di,rt=new Di,_e=new Di;return function(st,ut=null,gt=!1){this.needsUpdate&&this.update(),st.isExtendedTriangle?st.needsUpdate&&st.update():(e.copy(st),e.update(),st=e);let yt=this.plane,Pt=st.plane;if(Math.abs(yt.normal.dot(Pt.normal))>1-1e-10){let wt=this.satBounds,Ct=this.satAxes;i[0]=st.a,i[1]=st.b,i[2]=st.c;for(let kt=0;kt<4;kt++){let It=wt[kt],Lt=Ct[kt];if(o.setFromPoints(Lt,i),It.isSeparated(o))return!1}let At=st.satBounds,Tt=st.satAxes;a[0]=this.a,a[1]=this.b,a[2]=this.c;for(let kt=0;kt<4;kt++){let It=At[kt],Lt=Tt[kt];if(o.setFromPoints(Lt,a),It.isSeparated(o))return!1}for(let kt=0;kt<4;kt++){let It=Ct[kt];for(let Lt=0;Lt<4;Lt++){let Ft=Tt[Lt];if(d.crossVectors(It,Ft),o.setFromPoints(d,a),c.setFromPoints(d,i),o.isSeparated(c))return!1}}return ut&&(gt||console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),ut.start.set(0,0,0),ut.end.set(0,0,0)),!0}else{let wt=this.points,Ct=!1,At=0;for(let _s=0;_s<3;_s++){let hn=wt[_s],Qn=wt[(_s+1)%3];$.start.copy(hn),$.end.copy(Qn),$.delta(g);let ds=Ct?rt.start:rt.end,un=pd(Pt.distanceToPoint(hn));if(pd(Pt.normal.dot(g))&&un){rt.copy($),At=2;break}if((Pt.intersectLine($,ds)||un)&&!pd(ds.distanceTo(Qn))){if(At++,Ct)break;Ct=!0}}if(At===1&&st.containsPoint(rt.end))return ut&&(ut.start.copy(rt.end),ut.end.copy(rt.end)),!0;if(At!==2)return!1;let Tt=st.points,kt=!1,It=0;for(let _s=0;_s<3;_s++){let hn=Tt[_s],Qn=Tt[(_s+1)%3];$.start.copy(hn),$.end.copy(Qn),$.delta(b);let ds=kt?_e.start:_e.end,un=pd(yt.distanceToPoint(hn));if(pd(yt.normal.dot(b))&&un){_e.copy($),It=2;break}if((yt.intersectLine($,ds)||un)&&!pd(ds.distanceTo(Qn))){if(It++,kt)break;kt=!0}}if(It===1&&this.containsPoint(_e.end))return ut&&(ut.start.copy(_e.end),ut.end.copy(_e.end)),!0;if(It!==2)return!1;if(rt.delta(g),_e.delta(b),g.dot(b)<0){let _s=_e.start;_e.start=_e.end,_e.end=_s}let Lt=rt.start.dot(g),Ft=rt.end.dot(g),Nt=_e.start.dot(g),Ht=_e.end.dot(g),Gr=Ft<Nt,hs=Lt<Ht;return Lt!==Ht&&Nt!==Ft&&Gr===hs?!1:(ut&&(j.subVectors(rt.start,_e.start),j.dot(g)>0?ut.start.copy(rt.start):ut.start.copy(_e.start),j.subVectors(rt.end,_e.end),j.dot(g)<0?ut.end.copy(rt.end):ut.end.copy(_e.end)),!0)}}}();zn.prototype.distanceToPoint=function(){let e=new _;return function(a){return this.closestPointToPoint(a,e),a.distanceTo(e)}}();zn.prototype.distanceToTriangle=function(){let e=new _,a=new _,i=["a","b","c"],o=new Di,c=new Di;return function(d,g=null,b=null){let j=g||b?o:null;if(this.intersectsTriangle(d,j))return(g||b)&&(g&&j.getCenter(g),b&&j.getCenter(b)),0;let $=1/0;for(let rt=0;rt<3;rt++){let _e,st=i[rt],ut=d[st];this.closestPointToPoint(ut,e),_e=ut.distanceToSquared(e),_e<$&&($=_e,g&&g.copy(e),b&&b.copy(ut));let gt=this[st];d.closestPointToPoint(gt,e),_e=gt.distanceToSquared(e),_e<$&&($=_e,g&&g.copy(gt),b&&b.copy(e))}for(let rt=0;rt<3;rt++){let _e=i[rt],st=i[(rt+1)%3];o.set(this[_e],this[st]);for(let ut=0;ut<3;ut++){let gt=i[ut],yt=i[(ut+1)%3];c.set(d[gt],d[yt]),um(o,c,e,a);let Pt=e.distanceToSquared(a);Pt<$&&($=Pt,g&&g.copy(e),b&&b.copy(a))}}return Math.sqrt($)}}();var Un=class{constructor(e,a,i){this.isOrientedBox=!0,this.min=new _,this.max=new _,this.matrix=new ce$1,this.invMatrix=new ce$1,this.points=new Array(8).fill().map(()=>new _),this.satAxes=new Array(3).fill().map(()=>new _),this.satBounds=new Array(3).fill().map(()=>new Vn),this.alignedSatBounds=new Array(3).fill().map(()=>new Vn),this.needsUpdate=!1,e&&this.min.copy(e),a&&this.max.copy(a),i&&this.matrix.copy(i)}set(e,a,i){this.min.copy(e),this.max.copy(a),this.matrix.copy(i),this.needsUpdate=!0}copy(e){this.min.copy(e.min),this.max.copy(e.max),this.matrix.copy(e.matrix),this.needsUpdate=!0}};Un.prototype.update=function(){return function(){let e=this.matrix,a=this.min,i=this.max,o=this.points;for(let j=0;j<=1;j++)for(let $=0;$<=1;$++)for(let rt=0;rt<=1;rt++){let _e=1*j|2*$|4*rt,st=o[_e];st.x=j?i.x:a.x,st.y=$?i.y:a.y,st.z=rt?i.z:a.z,st.applyMatrix4(e)}let c=this.satBounds,d=this.satAxes,g=o[0];for(let j=0;j<3;j++){let $=d[j],rt=c[j],_e=1<<j,st=o[_e];$.subVectors(g,st),rt.setFromPoints($,o)}let b=this.alignedSatBounds;b[0].setFromPointsField(o,"x"),b[1].setFromPointsField(o,"y"),b[2].setFromPointsField(o,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1}}();Un.prototype.intersectsBox=function(){let e=new Vn;return function(a){this.needsUpdate&&this.update();let i=a.min,o=a.max,c=this.satBounds,d=this.satAxes,g=this.alignedSatBounds;if(e.min=i.x,e.max=o.x,g[0].isSeparated(e)||(e.min=i.y,e.max=o.y,g[1].isSeparated(e))||(e.min=i.z,e.max=o.z,g[2].isSeparated(e)))return!1;for(let b=0;b<3;b++){let j=d[b],$=c[b];if(e.setFromBox(j,a),$.isSeparated(e))return!1}return!0}}();Un.prototype.intersectsTriangle=function(){let e=new zn,a=new Array(3),i=new Vn,o=new Vn,c=new _;return function(d){this.needsUpdate&&this.update(),d.isExtendedTriangle?d.needsUpdate&&d.update():(e.copy(d),e.update(),d=e);let g=this.satBounds,b=this.satAxes;a[0]=d.a,a[1]=d.b,a[2]=d.c;for(let _e=0;_e<3;_e++){let st=g[_e],ut=b[_e];if(i.setFromPoints(ut,a),st.isSeparated(i))return!1}let j=d.satBounds,$=d.satAxes,rt=this.points;for(let _e=0;_e<3;_e++){let st=j[_e],ut=$[_e];if(i.setFromPoints(ut,rt),st.isSeparated(i))return!1}for(let _e=0;_e<3;_e++){let st=b[_e];for(let ut=0;ut<4;ut++){let gt=$[ut];if(c.crossVectors(st,gt),i.setFromPoints(c,a),o.setFromPoints(c,rt),i.isSeparated(o))return!1}}return!0}}();Un.prototype.closestPointToPoint=function(){return function(e,a){return this.needsUpdate&&this.update(),a.copy(e).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),a}}();Un.prototype.distanceToPoint=function(){let e=new _;return function(a){return this.closestPointToPoint(a,e),a.distanceTo(e)}}();Un.prototype.distanceToBox=function(){let e=["x","y","z"],a=new Array(12).fill().map(()=>new Di),i=new Array(12).fill().map(()=>new Di),o=new _,c=new _;return function(d,g=0,b=null,j=null){if(this.needsUpdate&&this.update(),this.intersectsBox(d))return(b||j)&&(d.getCenter(c),this.closestPointToPoint(c,o),d.closestPointToPoint(o,c),b&&b.copy(o),j&&j.copy(c)),0;let $=g*g,rt=d.min,_e=d.max,st=this.points,ut=1/0;for(let yt=0;yt<8;yt++){let Pt=st[yt];c.copy(Pt).clamp(rt,_e);let wt=Pt.distanceToSquared(c);if(wt<ut&&(ut=wt,b&&b.copy(Pt),j&&j.copy(c),wt<$))return Math.sqrt(wt)}let gt=0;for(let yt=0;yt<3;yt++)for(let Pt=0;Pt<=1;Pt++)for(let wt=0;wt<=1;wt++){let Ct=(yt+1)%3,At=(yt+2)%3,Tt=Pt<<Ct|wt<<At,kt=1<<yt|Pt<<Ct|wt<<At,It=st[Tt],Lt=st[kt];a[gt].set(It,Lt);let Ft=e[yt],Nt=e[Ct],Ht=e[At],Gr=i[gt],hs=Gr.start,_s=Gr.end;hs[Ft]=rt[Ft],hs[Nt]=Pt?rt[Nt]:_e[Nt],hs[Ht]=wt?rt[Ht]:_e[Nt],_s[Ft]=_e[Ft],_s[Nt]=Pt?rt[Nt]:_e[Nt],_s[Ht]=wt?rt[Ht]:_e[Nt],gt++}for(let yt=0;yt<=1;yt++)for(let Pt=0;Pt<=1;Pt++)for(let wt=0;wt<=1;wt++){c.x=yt?_e.x:rt.x,c.y=Pt?_e.y:rt.y,c.z=wt?_e.z:rt.z,this.closestPointToPoint(c,o);let Ct=c.distanceToSquared(o);if(Ct<ut&&(ut=Ct,b&&b.copy(o),j&&j.copy(c),Ct<$))return Math.sqrt(Ct)}for(let yt=0;yt<12;yt++){let Pt=a[yt];for(let wt=0;wt<12;wt++){let Ct=i[wt];um(Pt,Ct,o,c);let At=o.distanceToSquared(c);if(At<ut&&(ut=At,b&&b.copy(o),j&&j.copy(c),At<$))return Math.sqrt(At)}}return Math.sqrt(ut)}}();var md=new _,gd=new _,yd=new _,y0=new z$2,v0=new z$2,x0=new z$2,vO=new _,xO=new _,bO=new _,b0$1=new _;function k9(e,a,i,o,c,d){let g;return d===yi?g=e.intersectTriangle(o,i,a,!0,c):g=e.intersectTriangle(a,i,o,d!==tn,c),g===null?null:{distance:e.origin.distanceTo(c),point:c.clone()}}function V9(e,a,i,o,c,d,g,b,j){md.fromBufferAttribute(a,d),gd.fromBufferAttribute(a,g),yd.fromBufferAttribute(a,b);let $=k9(e,md,gd,yd,b0$1,j);if($){o&&(y0.fromBufferAttribute(o,d),v0.fromBufferAttribute(o,g),x0.fromBufferAttribute(o,b),$.uv=Dr$1.getInterpolation(b0$1,md,gd,yd,y0,v0,x0,new z$2)),c&&(y0.fromBufferAttribute(c,d),v0.fromBufferAttribute(c,g),x0.fromBufferAttribute(c,b),$.uv1=Dr$1.getInterpolation(b0$1,md,gd,yd,y0,v0,x0,new z$2)),i&&(vO.fromBufferAttribute(i,d),xO.fromBufferAttribute(i,g),bO.fromBufferAttribute(i,b),$.normal=Dr$1.getInterpolation(b0$1,md,gd,yd,vO,xO,bO,new _),$.normal.dot(e.direction)>0&&$.normal.multiplyScalar(-1));let rt={a:d,b:g,c:b,normal:new _,materialIndex:0};Dr$1.getNormal(md,gd,yd,rt.normal),$.face=rt,$.faceIndex=d}return $}function Q1(e,a,i,o,c){let d=o*3,g=e.index.getX(d),b=e.index.getX(d+1),j=e.index.getX(d+2),{position:$,normal:rt,uv:_e,uv1:st}=e.attributes,ut=V9(i,$,rt,_e,st,g,b,j,a);return ut?(ut.faceIndex=o,c&&c.push(ut),ut):null}function SO(e,a,i,o,c,d){for(let g=o,b=o+c;g<b;g++)Q1(e,a,i,g,d)}function wO(e,a,i,o,c){let d=1/0,g=null;for(let b=o,j=o+c;b<j;b++){let $=Q1(e,a,i,b);$&&$.distance<d&&(g=$,d=$.distance)}return g}function Ts(e,a,i,o){let c=e.a,d=e.b,g=e.c,b=a,j=a+1,$=a+2;i&&(b=i.getX(a),j=i.getX(a+1),$=i.getX(a+2)),c.x=o.getX(b),c.y=o.getY(b),c.z=o.getZ(b),d.x=o.getX(j),d.y=o.getY(j),d.z=o.getZ(j),g.x=o.getX($),g.y=o.getY($),g.z=o.getZ($)}function K1(e,a,i,o,c,d,g){let b=i.index,j=i.attributes.position;for(let $=e,rt=a+e;$<rt;$++)if(Ts(g,$*3,b,j),g.needsUpdate=!0,o(g,$,c,d))return!0;return!1}var vd=class{constructor(e){this._getNewPrimitive=e,this._primitives=[]}getPrimitive(){let e=this._primitives;return e.length===0?this._getNewPrimitive():e.pop()}releasePrimitive(e){this._primitives.push(e)}};function ka(e,a){return a[e+15]===65535}function Uc(e,a){return a[e+6]}function xd(e,a){return a[e+14]}function bd(e){return e+8}function Sd(e,a){return a[e+6]}function AO(e,a){return a[e+7]}var wd=new Wt,w0=new _,U9=["x","y","z"];function A0(e,a,i,o,c){let d=e*2,g=Ad,b=kl,j=Vl;if(ka(d,b)){let $=Uc(e,j),rt=xd(d,b);SO(a,i,o,$,rt,c)}else{let $=bd(e);E0($,g,o,w0)&&A0($,a,i,o,c);let rt=Sd(e,j);E0(rt,g,o,w0)&&A0(rt,a,i,o,c)}}function _0(e,a,i,o){let c=e*2,d=Ad,g=kl,b=Vl;if(ka(c,g)){let j=Uc(e,b),$=xd(c,g);return wO(a,i,o,j,$)}else{let j=AO(e,b),$=U9[j],rt=o.direction[$]>=0,_e,st;rt?(_e=bd(e),st=Sd(e,b)):(_e=Sd(e,b),st=bd(e));let ut=E0(_e,d,o,w0)?_0(_e,a,i,o):null;if(ut){let yt=ut.point[$];if(rt?yt<=d[st+j]:yt>=d[st+j+3])return ut}let gt=E0(st,d,o,w0)?_0(st,a,i,o):null;return ut&&gt?ut.distance<=gt.distance?ut:gt:ut||gt||null}}var _O=function(){let e,a,i=[],o=new vd(()=>new Wt);return function(...d){e=o.getPrimitive(),a=o.getPrimitive(),i.push(e,a);let g=c(...d);o.releasePrimitive(e),o.releasePrimitive(a),i.pop(),i.pop();let b=i.length;return b>0&&(a=i[b-1],e=i[b-2]),g};function c(d,g,b,j,$=null,rt=0,_e=0){function st(Ct){let At=Ct*2,Tt=kl,kt=Vl;for(;!ka(At,Tt);)Ct=bd(Ct),At=Ct*2;return Uc(Ct,kt)}function ut(Ct){let At=Ct*2,Tt=kl,kt=Vl;for(;!ka(At,Tt);)Ct=Sd(Ct,kt),At=Ct*2;return Uc(Ct,kt)+xd(At,Tt)}let gt=d*2,yt=Ad,Pt=kl,wt=Vl;if(ka(gt,Pt)){let Ct=Uc(d,wt),At=xd(gt,Pt);return Es(d,yt,e),j(Ct,At,!1,_e,rt+d,e)}else{let Ct=bd(d),At=Sd(d,wt),Tt=Ct,kt=At,It,Lt,Ft,Nt;if($&&(Ft=e,Nt=a,Es(Tt,yt,Ft),Es(kt,yt,Nt),It=$(Ft),Lt=$(Nt),Lt<It)){Tt=At,kt=Ct;let ds=It;It=Lt,Lt=ds,Ft=Nt}Ft||(Ft=e,Es(Tt,yt,Ft));let Ht=ka(Tt*2,Pt),Gr=b(Ft,Ht,It,_e+1,rt+Tt),hs;if(Gr===2){let ds=st(Tt),un=ut(Tt)-ds;hs=j(ds,un,!0,_e+1,rt+Tt,Ft)}else hs=Gr&&c(Tt,g,b,j,$,rt,_e+1);if(hs)return!0;Nt=a,Es(kt,yt,Nt);let _s=ka(kt*2,Pt),hn=b(Nt,_s,Lt,_e+1,rt+kt),Qn;if(hn===2){let ds=st(kt),un=ut(kt)-ds;Qn=j(ds,un,!0,_e+1,rt+kt,Nt)}else Qn=hn&&c(kt,g,b,j,$,rt,_e+1);return!!Qn}}}(),EO=function(){let e=new zn,a=new zn,i=new ce$1,o=new Un,c=new Un;return function d(g,b,j,$,rt=null){let _e=g*2,st=Ad,ut=kl,gt=Vl;if(rt===null&&(j.boundingBox||j.computeBoundingBox(),o.set(j.boundingBox.min,j.boundingBox.max,$),rt=o),ka(_e,ut)){let yt=b,Pt=yt.index,wt=yt.attributes.position,Ct=j.index,At=j.attributes.position,Tt=Uc(g,gt),kt=xd(_e,ut);if(i.copy($).invert(),j.boundsTree)return Es(g,st,c),c.matrix.copy(i),c.needsUpdate=!0,j.boundsTree.shapecast({intersectsBounds:It=>c.intersectsBox(It),intersectsTriangle:It=>{It.a.applyMatrix4($),It.b.applyMatrix4($),It.c.applyMatrix4($),It.needsUpdate=!0;for(let Lt=Tt*3,Ft=(kt+Tt)*3;Lt<Ft;Lt+=3)if(Ts(a,Lt,Pt,wt),a.needsUpdate=!0,It.intersectsTriangle(a))return!0;return!1}});for(let It=Tt*3,Lt=kt+Tt*3;It<Lt;It+=3){Ts(e,It,Pt,wt),e.a.applyMatrix4(i),e.b.applyMatrix4(i),e.c.applyMatrix4(i),e.needsUpdate=!0;for(let Ft=0,Nt=Ct.count;Ft<Nt;Ft+=3)if(Ts(a,Ft,Ct,At),a.needsUpdate=!0,e.intersectsTriangle(a))return!0}}else{let yt=g+8,Pt=gt[g+6];return Es(yt,st,wd),!!(rt.intersectsBox(wd)&&d(yt,b,j,$,rt)||(Es(Pt,st,wd),rt.intersectsBox(wd)&&d(Pt,b,j,$,rt)))}}}();function E0(e,a,i,o){return Es(e,a,wd),i.intersectBox(wd,o)}var Z1=[],S0,Ad,kl,Vl;function _d(e){S0&&Z1.push(S0),S0=e,Ad=new Float32Array(e),kl=new Uint16Array(e),Vl=new Uint32Array(e)}function hm(){S0=null,Ad=null,kl=null,Vl=null,Z1.length&&_d(Z1.pop())}var J1=Symbol("skip tree generation"),$1=new Wt,eA=new Wt,Ed=new ce$1,Gc=new Un,dm=new Un,fm=new _,T0=new _,G9=new _,j9=new _,H9=new _,TO=new Wt,ko=new vd(()=>new zn),Vo=class{static serialize(e,a={}){if(a.isBufferGeometry)return console.warn("MeshBVH.serialize: The arguments for the function have changed. See documentation for new signature."),Vo.serialize(arguments[0],{cloneBuffers:arguments[2]===void 0?!0:arguments[2]});a={cloneBuffers:!0,...a};let i=e.geometry,o=e._roots,c=i.getIndex(),d;return a.cloneBuffers?d={roots:o.map(g=>g.slice()),index:c.array.slice()}:d={roots:o,index:c.array},d}static deserialize(e,a,i={}){if(typeof i=="boolean")return console.warn("MeshBVH.deserialize: The arguments for the function have changed. See documentation for new signature."),Vo.deserialize(arguments[0],arguments[1],{setIndex:arguments[2]===void 0?!0:arguments[2]});i={setIndex:!0,...i};let{index:o,roots:c}=e,d=new Vo(a,{...i,[J1]:!0});if(d._roots=c,i.setIndex){let g=a.getIndex();if(g===null){let b=new Xe(e.index,1,!1);a.setIndex(b)}else g.array!==o&&(g.array.set(o),g.needsUpdate=!0)}return d}constructor(e,a={}){if(e.isBufferGeometry){if(e.index&&e.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw new Error("MeshBVH: Only BufferGeometries are supported.");if(a=Object.assign({strategy:0,maxDepth:40,maxLeafTris:10,verbose:!0,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,[J1]:!1},a),a.useSharedArrayBuffer&&typeof SharedArrayBuffer>"u")throw new Error("MeshBVH: SharedArrayBuffer is not available.");this._roots=null,a[J1]||(this._roots=gO(e,a),!e.boundingBox&&a.setBoundingBox&&(e.boundingBox=this.getBoundingBox(new Wt))),this.geometry=e}refit(e=null){e&&Array.isArray(e)&&(e=new Set(e));let a=this.geometry,i=a.index.array,o=a.attributes.position,c,d,g,b,j=0,$=this._roots;for(let _e=0,st=$.length;_e<st;_e++)c=$[_e],d=new Uint32Array(c),g=new Uint16Array(c),b=new Float32Array(c),rt(0,j),j+=c.byteLength;function rt(_e,st,ut=!1){let gt=_e*2;if(g[gt+15]===65535){let yt=d[_e+6],Pt=g[gt+14],wt=1/0,Ct=1/0,At=1/0,Tt=-1/0,kt=-1/0,It=-1/0;for(let Lt=3*yt,Ft=3*(yt+Pt);Lt<Ft;Lt++){let Nt=i[Lt],Ht=o.getX(Nt),Gr=o.getY(Nt),hs=o.getZ(Nt);Ht<wt&&(wt=Ht),Ht>Tt&&(Tt=Ht),Gr<Ct&&(Ct=Gr),Gr>kt&&(kt=Gr),hs<At&&(At=hs),hs>It&&(It=hs)}return b[_e+0]!==wt||b[_e+1]!==Ct||b[_e+2]!==At||b[_e+3]!==Tt||b[_e+4]!==kt||b[_e+5]!==It?(b[_e+0]=wt,b[_e+1]=Ct,b[_e+2]=At,b[_e+3]=Tt,b[_e+4]=kt,b[_e+5]=It,!0):!1}else{let yt=_e+8,Pt=d[_e+6],wt=yt+st,Ct=Pt+st,At=ut,Tt=!1,kt=!1;e?At||(Tt=e.has(wt),kt=e.has(Ct),At=!Tt&&!kt):(Tt=!0,kt=!0);let It=At||Tt,Lt=At||kt,Ft=!1;It&&(Ft=rt(yt,st,At));let Nt=!1;Lt&&(Nt=rt(Pt,st,At));let Ht=Ft||Nt;if(Ht)for(let Gr=0;Gr<3;Gr++){let hs=yt+Gr,_s=Pt+Gr,hn=b[hs],Qn=b[hs+3],ds=b[_s],un=b[_s+3];b[_e+Gr]=hn<ds?hn:ds,b[_e+Gr+3]=Qn>un?Qn:un}return Ht}}}traverse(e,a=0){let i=this._roots[a],o=new Uint32Array(i),c=new Uint16Array(i);d(0);function d(g,b=0){let j=g*2,$=c[j+15]===65535;if($){let rt=o[g+6],_e=c[j+14];e(b,$,new Float32Array(i,g*4,6),rt,_e)}else{let rt=g+8,_e=o[g+6],st=o[g+7];e(b,$,new Float32Array(i,g*4,6),st)||(d(rt,b+1),d(_e,b+1))}}}raycast(e,a=es){let i=this._roots,o=this.geometry,c=[],d=a.isMaterial,g=Array.isArray(a),b=o.groups,j=d?a.side:a;for(let $=0,rt=i.length;$<rt;$++){let _e=g?a[b[$].materialIndex].side:j,st=c.length;if(_d(i[$]),A0(0,o,_e,e,c),hm(),g){let ut=b[$].materialIndex;for(let gt=st,yt=c.length;gt<yt;gt++)c[gt].face.materialIndex=ut}}return c}raycastFirst(e,a=es){let i=this._roots,o=this.geometry,c=a.isMaterial,d=Array.isArray(a),g=null,b=o.groups,j=c?a.side:a;for(let $=0,rt=i.length;$<rt;$++){let _e=d?a[b[$].materialIndex].side:j;_d(i[$]);let st=_0(0,o,_e,e);hm(),st!=null&&(g==null||st.distance<g.distance)&&(g=st,d&&(st.face.materialIndex=b[$].materialIndex))}return g}intersectsGeometry(e,a){let i=this.geometry,o=!1;for(let c of this._roots)if(_d(c),o=EO(0,i,e,a),hm(),o)break;return o}shapecast(e,a,i){let o=this.geometry;if(e instanceof Function){if(a){let _e=a;a=(st,ut,gt,yt)=>{let Pt=ut*3;return _e(st,Pt,Pt+1,Pt+2,gt,yt)}}e={boundsTraverseOrder:i,intersectsBounds:e,intersectsTriangle:a,intersectsRange:null},console.warn("MeshBVH: Shapecast function signature has changed and now takes an object of callbacks as a second argument. See docs for new signature.")}let c=ko.getPrimitive(),{boundsTraverseOrder:d,intersectsBounds:g,intersectsRange:b,intersectsTriangle:j}=e;if(b&&j){let _e=b;b=(st,ut,gt,yt,Pt)=>_e(st,ut,gt,yt,Pt)?!0:K1(st,ut,o,j,gt,yt,c)}else b||(j?b=(_e,st,ut,gt)=>K1(_e,st,o,j,ut,gt,c):b=(_e,st,ut)=>ut);let $=!1,rt=0;for(let _e of this._roots){if(_d(_e),$=_O(0,o,g,b,d,rt),hm(),$)break;rt+=_e.byteLength}return ko.releasePrimitive(c),$}bvhcast(e,a,i){let{intersectsRanges:o,intersectsTriangles:c}=i,d=this.geometry.index,g=this.geometry.attributes.position,b=e.geometry.index,j=e.geometry.attributes.position;Ed.copy(a).invert();let $=ko.getPrimitive(),rt=ko.getPrimitive();if(c){let st=function(ut,gt,yt,Pt,wt,Ct,At,Tt){for(let kt=yt,It=yt+Pt;kt<It;kt++){Ts(rt,kt*3,b,j),rt.a.applyMatrix4(a),rt.b.applyMatrix4(a),rt.c.applyMatrix4(a),rt.needsUpdate=!0;for(let Lt=ut,Ft=ut+gt;Lt<Ft;Lt++)if(Ts($,Lt*3,d,g),$.needsUpdate=!0,c($,rt,Lt,kt,wt,Ct,At,Tt))return!0}return!1};if(o){let ut=o;o=function(gt,yt,Pt,wt,Ct,At,Tt,kt){return ut(gt,yt,Pt,wt,Ct,At,Tt,kt)?!0:st(gt,yt,Pt,wt,Ct,At,Tt,kt)}}else o=st}e.getBoundingBox(eA),eA.applyMatrix4(a);let _e=this.shapecast({intersectsBounds:st=>eA.intersectsBox(st),intersectsRange:(st,ut,gt,yt,Pt,wt)=>($1.copy(wt),$1.applyMatrix4(Ed),e.shapecast({intersectsBounds:Ct=>$1.intersectsBox(Ct),intersectsRange:(Ct,At,Tt,kt,It)=>o(st,ut,Ct,At,yt,Pt,kt,It)}))});return ko.releasePrimitive($),ko.releasePrimitive(rt),_e}intersectsBox(e,a){return Gc.set(e.min,e.max,a),Gc.needsUpdate=!0,this.shapecast({intersectsBounds:i=>Gc.intersectsBox(i),intersectsTriangle:i=>Gc.intersectsTriangle(i)})}intersectsSphere(e){return this.shapecast({intersectsBounds:a=>e.intersectsBox(a),intersectsTriangle:a=>a.intersectsSphere(e)})}closestPointToGeometry(e,a,i={},o={},c=0,d=1/0){e.boundingBox||e.computeBoundingBox(),Gc.set(e.boundingBox.min,e.boundingBox.max,a),Gc.needsUpdate=!0;let g=this.geometry,b=g.attributes.position,j=g.index,$=e.attributes.position,rt=e.index,_e=ko.getPrimitive(),st=ko.getPrimitive(),ut=T0,gt=G9,yt=null,Pt=null;o&&(yt=j9,Pt=H9);let wt=1/0,Ct=null,At=null;return Ed.copy(a).invert(),dm.matrix.copy(Ed),this.shapecast({boundsTraverseOrder:Tt=>Gc.distanceToBox(Tt),intersectsBounds:(Tt,kt,It)=>It<wt&&It<d?(kt&&(dm.min.copy(Tt.min),dm.max.copy(Tt.max),dm.needsUpdate=!0),!0):!1,intersectsRange:(Tt,kt)=>{if(e.boundsTree)return e.boundsTree.shapecast({boundsTraverseOrder:It=>dm.distanceToBox(It),intersectsBounds:(It,Lt,Ft)=>Ft<wt&&Ft<d,intersectsRange:(It,Lt)=>{for(let Ft=It*3,Nt=(It+Lt)*3;Ft<Nt;Ft+=3){Ts(st,Ft,rt,$),st.a.applyMatrix4(a),st.b.applyMatrix4(a),st.c.applyMatrix4(a),st.needsUpdate=!0;for(let Ht=Tt*3,Gr=(Tt+kt)*3;Ht<Gr;Ht+=3){Ts(_e,Ht,j,b),_e.needsUpdate=!0;let hs=_e.distanceToTriangle(st,ut,yt);if(hs<wt&&(gt.copy(ut),Pt&&Pt.copy(yt),wt=hs,Ct=Ht/3,At=Ft/3),hs<c)return!0}}}});{let It=rt?rt.count:$.count;for(let Lt=0,Ft=It;Lt<Ft;Lt+=3){Ts(st,Lt,rt,$),st.a.applyMatrix4(a),st.b.applyMatrix4(a),st.c.applyMatrix4(a),st.needsUpdate=!0;for(let Nt=Tt*3,Ht=(Tt+kt)*3;Nt<Ht;Nt+=3){Ts(_e,Nt,j,b),_e.needsUpdate=!0;let Gr=_e.distanceToTriangle(st,ut,yt);if(Gr<wt&&(gt.copy(ut),Pt&&Pt.copy(yt),wt=Gr,Ct=Nt/3,At=Lt/3),Gr<c)return!0}}}}}),ko.releasePrimitive(_e),ko.releasePrimitive(st),wt===1/0?null:(i.point?i.point.copy(gt):i.point=gt.clone(),i.distance=wt,i.faceIndex=Ct,o&&(o.point?o.point.copy(Pt):o.point=Pt.clone(),o.point.applyMatrix4(Ed),gt.applyMatrix4(Ed),o.distance=gt.sub(o.point).length(),o.faceIndex=At),i)}closestPointToPoint(e,a={},i=0,o=1/0){let c=i*i,d=o*o,g=1/0,b=null;if(this.shapecast({boundsTraverseOrder:$=>(fm.copy(e).clamp($.min,$.max),fm.distanceToSquared(e)),intersectsBounds:($,rt,_e)=>_e<g&&_e<d,intersectsTriangle:($,rt)=>{$.closestPointToPoint(e,fm);let _e=e.distanceToSquared(fm);return _e<g&&(T0.copy(fm),g=_e,b=rt),_e<c}}),g===1/0)return null;let j=Math.sqrt(g);return a.point?a.point.copy(T0):a.point=T0.clone(),a.distance=j,a.faceIndex=b,a}getBoundingBox(e){return e.makeEmpty(),this._roots.forEach(a=>{Es(0,new Float32Array(a),TO),e.union(TO)}),e}},vf=pi(CO()),W9=.5*(Math.sqrt(3)-1),pm=(3-Math.sqrt(3))/6,q9=1/3,zo=1/6,mm=e=>Math.floor(e)|0,PO=new Float64Array([1,1,-1,1,1,-1,-1,-1,1,0,-1,0,1,0,-1,0,0,1,0,-1,0,1,0,-1]),rA=new Float64Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]);function M0(e=Math.random){let a=OO(e),i=new Float64Array(a).map(c=>PO[c%12*2]),o=new Float64Array(a).map(c=>PO[c%12*2+1]);return function(c,d){let g=0,b=0,j=0,$=(c+d)*W9,rt=mm(c+$),_e=mm(d+$),st=(rt+_e)*pm,ut=rt-st,gt=_e-st,yt=c-ut,Pt=d-gt,wt,Ct;yt>Pt?(wt=1,Ct=0):(wt=0,Ct=1);let At=yt-wt+pm,Tt=Pt-Ct+pm,kt=yt-1+2*pm,It=Pt-1+2*pm,Lt=rt&255,Ft=_e&255,Nt=.5-yt*yt-Pt*Pt;if(Nt>=0){let hs=Lt+a[Ft],_s=i[hs],hn=o[hs];Nt*=Nt,g=Nt*Nt*(_s*yt+hn*Pt)}let Ht=.5-At*At-Tt*Tt;if(Ht>=0){let hs=Lt+wt+a[Ft+Ct],_s=i[hs],hn=o[hs];Ht*=Ht,b=Ht*Ht*(_s*At+hn*Tt)}let Gr=.5-kt*kt-It*It;if(Gr>=0){let hs=Lt+1+a[Ft+1],_s=i[hs],hn=o[hs];Gr*=Gr,j=Gr*Gr*(_s*kt+hn*It)}return 70*(g+b+j)}}function DO(e=Math.random){let a=OO(e),i=new Float64Array(a).map(d=>rA[d%12*3]),o=new Float64Array(a).map(d=>rA[d%12*3+1]),c=new Float64Array(a).map(d=>rA[d%12*3+2]);return function(d,g,b){let j,$,rt,_e,st=(d+g+b)*q9,ut=mm(d+st),gt=mm(g+st),yt=mm(b+st),Pt=(ut+gt+yt)*zo,wt=ut-Pt,Ct=gt-Pt,At=yt-Pt,Tt=d-wt,kt=g-Ct,It=b-At,Lt,Ft,Nt,Ht,Gr,hs;Tt>=kt?kt>=It?(Lt=1,Ft=0,Nt=0,Ht=1,Gr=1,hs=0):Tt>=It?(Lt=1,Ft=0,Nt=0,Ht=1,Gr=0,hs=1):(Lt=0,Ft=0,Nt=1,Ht=1,Gr=0,hs=1):kt<It?(Lt=0,Ft=0,Nt=1,Ht=0,Gr=1,hs=1):Tt<It?(Lt=0,Ft=1,Nt=0,Ht=0,Gr=1,hs=1):(Lt=0,Ft=1,Nt=0,Ht=1,Gr=1,hs=0);let _s=Tt-Lt+zo,hn=kt-Ft+zo,Qn=It-Nt+zo,ds=Tt-Ht+2*zo,un=kt-Gr+2*zo,dr=It-hs+2*zo,us=Tt-1+3*zo,Nn=kt-1+3*zo,gn=It-1+3*zo,Zn=ut&255,xu=gt&255,au=yt&255,Vv=.6-Tt*Tt-kt*kt-It*It;if(Vv<0)j=0;else{let B0=Zn+a[xu+a[au]];Vv*=Vv,j=Vv*Vv*(i[B0]*Tt+o[B0]*kt+c[B0]*It)}let wu=.6-_s*_s-hn*hn-Qn*Qn;if(wu<0)$=0;else{let B0=Zn+Lt+a[xu+Ft+a[au+Nt]];wu*=wu,$=wu*wu*(i[B0]*_s+o[B0]*hn+c[B0]*Qn)}let a1=.6-ds*ds-un*un-dr*dr;if(a1<0)rt=0;else{let B0=Zn+Ht+a[xu+Gr+a[au+hs]];a1*=a1,rt=a1*a1*(i[B0]*ds+o[B0]*un+c[B0]*dr)}let P0=.6-us*us-Nn*Nn-gn*gn;if(P0<0)_e=0;else{let B0=Zn+1+a[xu+1+a[au+1]];P0*=P0,_e=P0*P0*(i[B0]*us+o[B0]*Nn+c[B0]*gn)}return 32*(j+$+rt+_e)}}function OO(e){let a=new Uint8Array(512);for(let i=0;i<512/2;i++)a[i]=i;for(let i=0;i<512/2-1;i++){let o=i+~~(e()*(256-i)),c=a[i];a[i]=a[o],a[o]=c}for(let i=256;i<512;i++)a[i]=a[i-256];return a}var $s=new Dr$1,C0=class{constructor(e){this.weightAttribute=null;let a=e.geometry;if(!a.isBufferGeometry||a.attributes.position.itemSize!==3)throw new Error("THREE.MeshSurfaceSampler: Requires BufferGeometry triangle mesh.");a.index&&(a=a.toNonIndexed()),this.geometry=a,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.distribution=null}build(){let e=this.positionAttribute,a=new Float32Array(e.count/3);for(let o=0;o<e.count;o+=3){let c=1;$s.a.fromBufferAttribute(e,o),$s.b.fromBufferAttribute(e,o+1),$s.c.fromBufferAttribute(e,o+2),c*=$s.getArea(),a[o/3]=c}this.distribution=new Float32Array(e.count/3);let i=0;for(let o=0;o<a.length;o++)i+=a[o],this.distribution[o]=i;return this}setRandomGenerator(e){return this.randomFunction=e,this}sample(e,a){if(this.distribution){let i=this.distribution[this.distribution.length-1],o=this.binarySearch(this.randomFunction()*i);return this.sampleFace(o,e,a)}}binarySearch(e){if(!this.distribution)return 0;let a=this.distribution,i=0,o=a.length-1,c=-1;for(;i<=o;){let d=Math.ceil((i+o)/2);if(d===0||a[d-1]<=e&&a[d]>e){c=d;break}else e<a[d]?o=d-1:i=d+1}return c}sampleFace(e,a,i){let o=this.randomFunction(),c=this.randomFunction();return o+c>1&&(o=1-o,c=1-c),$s.a.fromBufferAttribute(this.positionAttribute,e*3),$s.b.fromBufferAttribute(this.positionAttribute,e*3+1),$s.c.fromBufferAttribute(this.positionAttribute,e*3+2),a.set(0,0,0).addScaledVector($s.a,o).addScaledVector($s.b,c).addScaledVector($s.c,1-(o+c)),$s.getNormal(i),this}},RO=pi(iA()),Y9=new ce$1,X9=new ce$1,Q9=new ce$1,Td;(e=>{function a(i){return i&&i.__isSPEObject}e.is=a})(Td||(Td={}));var Md=e=>class extends e{constructor(){super(...arguments),this.previousModelViewMatrix=new ce$1,this.copyPreviousMatrix=!0,this.hiddenMatrix=new ce$1,this.matrixWorldRigid=new ce$1,this.shearScale=new ce$1,this.shearScaleInv=new ce$1}get __isSPEObject(){return!0}isDescendantOf(a){a instanceof _t&&(a=a.uuid);let i=this;for(;i.parent;){if(i.parent.uuid===a)return!0;i=i.parent}return!1}updateMatrixWorld(a){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||a)&&(this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,a=!0);for(let i of this.children)i.updateMatrixWorld(a)}updateWorldMatrix(a,i){let o=this.parent;if(a&&o!==null&&o.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),i)for(let c of this.children)c.updateWorldMatrix(!1,!0)}traverseChildren(a,i=0){for(let o of this.children)Td.is(o)&&o.traverseObject(a,i+1)}traverseObject(a,i=0){if(a(this,i)!==!0)for(let o of this.children)Td.is(o)&&o.traverseObject(a,i+1)}updateMatrixWorldSVD(){let a=this.matrixWorld.elements,i=[[a[0],a[4],a[8]],[a[1],a[5],a[9]],[a[2],a[6],a[10]]],{u:o,v:c,q:d}=(0,RO.SVD)(i),g=Y9.set(o[0][0],o[0][1],o[0][2],0,o[1][0],o[1][1],o[1][2],0,o[2][0],o[2][1],o[2][2],0,0,0,0,1),b=X9.set(c[0][0],c[0][1],c[0][2],0,c[1][0],c[1][1],c[1][2],0,c[2][0],c[2][1],c[2][2],0,0,0,0,1),j=Q9.copy(b).transpose();this.shearScale.makeScale(d[0],d[1],d[2]).multiply(j).premultiply(b),this.shearScaleInv.copy(this.shearScale).invert(),this.matrixWorldRigid.multiplyMatrices(g,j).copyPosition(this.matrixWorld),d.every($=>Math.abs(d[0]-$)<.01)?this.hasNonUniformScale=!1:this.hasNonUniformScale=!0}attach(a,i){this.updateWorldMatrix(!0,!1);let o=new ce$1().copy(this.matrixWorld).invert();return a.parent!==null&&(a.parent.updateWorldMatrix(!0,!1),o.multiply(a.parent.matrixWorld)),"hiddenMatrix"in a&&a.hiddenMatrix instanceof ce$1?a.hiddenMatrix.premultiply(o):a.applyMatrix4(o),a.updateWorldMatrix(!1,!1),this.add(a),i!==void 0&&(this.children.pop(),this.children.splice(i,0,a)),this}copy(a,i=!1){return super.copy(a,i),this.hasNonUniformScale=a.hasNonUniformScale,this}onAfterRender(a,i,o,c,d,g){this.copyPreviousMatrix&&this.previousModelViewMatrix.copy(this.modelViewMatrix)}},nA=class extends Md(_t){},K9=e=>e.type==="Mesh",Vr=class extends nA{constructor(e){super(),this.object=e,this.matrixAutoUpdate=!1,this.hasNonUniformScale=e.hasNonUniformScale}raycast(e,a){}expand(){let e=0,a=this.object.entityChildren(e);for(;a;){let i=this.children[e];(i==null?void 0:i.object)!==a&&(i&&this.remove(i),i=new Vr(a),this.add(i),this.children.splice(e,0,this.children.pop()),i.matrixWorldNeedsUpdate=!0,i.matrixAutoUpdate=!1,i.matrix=a.matrix,i.hiddenMatrix=a.hiddenMatrix),i.expand(),e+=1,a=this.object.entityChildren(e)}for(;this.children.length>e;)this.remove(this.children[e])}get visible(){var e;return this.playModeVisible!==void 0?this.playModeVisible:this.object.visible||this.object.dataPatched.visible&&((e=this.object.dataPatched.cloner)==null?void 0:e.hideBase)===!0}set visible(e){}get castShadow(){return this.object.castShadow}set castShadow(e){}get receiveShadow(){return this.object.receiveShadow}set receiveShadow(e){}get isMesh(){return K9(this.object)}get isLight(){return this.object.isLight}get layers(){return this.object.layers}set layers(e){}get isCamera(){return!1}get geometry(){if(this.object.geometry)return this.object.geometry}get material(){if(this.object.material)return this.object.material}},jc=new _,Hc=new _,Cd=new ce$1,BO=[new _(-1,1,1),new _(-1,-1,1),new _(1,-1,1),new _(1,1,1),new _(-1,1,-1),new _(-1,-1,-1),new _(1,-1,-1),new _(1,1,-1)],Z9=[[0,3],[1,2],[5,6],[4,7],[0,1],[3,2],[7,6],[4,5],[0,4],[1,5],[2,6],[3,7]],J9=[[0,2],[7,5],[4,1],[3,6],[4,3],[1,6]],LO=(e,a,i)=>{e.updateEntityBoxSize(jc,Hc),Cd.copy(a).multiply(e.matrixWorld),Hc.x===0&&Hc.y===0&&Hc.z===0?i.push(new _(jc.x,jc.y,jc.z).applyMatrix4(Cd)):BO.forEach(o=>{i.push(o.clone().multiply(Hc).add(jc).applyMatrix4(Cd))})},gm=class extends Wt{constructor(){super(...arguments),this.matrix=new ce$1,this.vertices=[],this.faces=[],this.edges=[],this.centerEdges=[]}copy(e){return super.copy(e),this.matrix.copy(e.matrix),this.vertices=e.vertices.map(a=>a.clone()),this.faces=e.faces.map(a=>a.clone()),this.edges=e.edges.map(a=>a.clone()),this.centerEdges=e.centerEdges.map(a=>a.clone()),this}setFromObjectSize(e,a=!1){e.updateWorldMatrix(!1,a),this.makeEmpty(),this.matrix.copy(e.matrixWorld);let i=new ce$1().copy(e.matrixWorld).invert();return this.expandByObjectSize(e,i,a)}expandByObjectSize(e,a,i=!1){let o=[];return i===!0?e.traverseEntity(c=>{if(c.visible||c.cloner&&c.data.visible){if(!("geometry"in c)){o.push(new _);return}LO(c,a,o)}}):LO(e,a,o),this.setFromPoints(o)}getCenter(e){return e=super.getCenter(e),e.applyMatrix4(this.matrix),e}getPositionToCenter(e){return e=super.getCenter(e),e.applyMatrix4(Cd.copy(this.matrix).setPosition(0,0,0)),e}computeVertices(){this.getSize(Hc).multiplyScalar(.5),this.getCenter(jc),Cd.copy(this.matrix).setPosition(jc),this.vertices=BO.map(e=>e.clone().multiply(Hc).applyMatrix4(Cd))}computeEdges(){this.vertices.length>0&&this.computeVertices(),this.edges=Z9.map(([e,a])=>new Di(this.vertices[e],this.vertices[a])),this.centerEdges=this.edges.map(e=>e.getCenter(new _))}computeFaces(){this.vertices.length>0&&this.computeVertices(),this.faces=J9.map(([e,a])=>this.vertices[e].clone().add(this.vertices[a]).multiplyScalar(.5))}},eo={Cloner:()=>{},changeEntityProptotype:()=>{},createEntity:()=>{}},oA=class extends Dp{constructor(){super()}getPoints(e=12){let a=[],i,o=this.getCurveLengths(),c=o[o.length-1]/o.length;for(let d=0,g=this.curves;d<g.length;d++){let b=g[d],j=d===0?o[d]:o[d]-o[d-1],$=Math.ceil(e*j/c),rt=b.getPoints($);for(let _e=0;_e<rt.length;_e++){let st=rt[_e];i&&i.equals(st)||(a.push(st),i=st)}}return this.autoClose&&a.length>1&&!a[a.length-1].equals(a[0])&&a.push(a[0]),a}},aA=.001;function lA(e,a,i){return a.clone().sub(e).cross(a.clone().sub(i)).length()<=aA}function sA(e,a){let i=new _(...e.position),o=new _(...e.controlNext.position),c=new _(...a.controlPrevious.position),d=new _(...a.position);return lA(i,o,d)&&lA(i,c,d)}function D0(e){let a=e.points.map(rt=>new _(...rt.data.position)),i=[e.points[0]],o=new _(...i[0].data.position);for(let rt=0;rt<e.points.length-1;rt++)lA(o,a[rt],a[rt+1])||(i.push(e.points[rt]),o=a[rt]);i.push(e.points[e.points.length-1]);let c=e.isClosed,d=i.length-(c?0:1),g=i.length,b=[];for(let rt=0;rt<g;rt++){let _e=i[rt].data,st=new _(..._e.position),ut=new _(..._e.controlPrevious.position),gt=new _(..._e.controlNext.position),yt={position:st,baseRoundness:_e.roundness,controlPrevious:ut,controlNext:gt};if(_e.roundness===0||!e.isClosed&&(rt===0||rt===g-1)){b[rt]={...yt,removedLength:0};continue}let Pt=c&&rt==0?g-1:rt-1,wt=c&&rt==g-1?0:rt+1,Ct=i[Pt].data,At=i[wt].data,Tt=new _(...Ct.position),kt=new _(...At.position),It=Tt.clone().sub(st).normalize(),Lt=kt.clone().sub(st).normalize();Object.assign(yt,{prevDir:It,nextDir:Lt});let Ft=sA(Ct,_e),Nt=sA(_e,At);if(!Ft||!Nt)b[rt]={...yt,removedLength:0};else{let Ht=It.clone().add(Lt).normalize(),Gr=Ht.clone().cross(It).length()/It.dot(Ht);b[rt]={...yt,tan:Gr,removedLength:_e.roundness/Gr}}}for(let rt=0;rt<d;rt++){let _e=rt,st=c&&rt===g-1?0:rt+1,ut=b[_e],gt=b[st];if(ut.removedLength!==0||gt.removedLength!==0){let yt=ut.position.distanceTo(gt.position);ut.removedLength=Math.min(ut.removedLength,yt/2),gt.removedLength=Math.min(gt.removedLength,yt/2)}}let j=[];for(let rt=0;rt<d;rt++){let _e=rt,st=c&&rt===g-1?0:rt+1,ut=b[_e],gt=b[st],yt=null;if(!sA(i[_e].data,i[st].data))ut.position.distanceTo(gt.position)>aA&&(yt=new Ec(ut.position,ut.controlNext,gt.controlPrevious,gt.position));else{let Pt=ut.position.clone(),wt=gt.position.clone();(ut.removedLength!==0||gt.removedLength!==0)&&(ut.nextDir&&Pt.add(ut.nextDir.clone().setLength(ut.removedLength)),gt.prevDir&&wt.add(gt.prevDir.clone().setLength(gt.removedLength))),Pt.distanceTo(wt)>aA&&(yt=new Ec(Pt,Pt.clone().lerp(wt,.3),wt.clone().lerp(Pt,.3),wt))}j[2*rt+1]=yt}for(let rt=0;rt<g;rt++){let _e=b[rt];if(_e.removedLength===0){j[2*rt]=null;continue}let st=_e.position,ut=_e.prevDir.clone().multiplyScalar(_e.removedLength).add(st),gt=_e.nextDir.clone().multiplyScalar(_e.removedLength).add(st),yt=_e.tan*_e.removedLength,Pt=_e.prevDir.clone().add(_e.nextDir).normalize(),wt=ut.clone().lerp(gt,.5),Ct=ut.distanceTo(gt)/2,At=Pt.clone().multiplyScalar(Math.sqrt(Math.pow(yt,2)-Math.pow(Ct,2))).add(wt),Tt=Pt.clone().multiplyScalar(-yt).add(At),kt=st.distanceTo(Tt)/st.distanceTo(wt),It=_e.prevDir.clone().multiplyScalar(kt*st.distanceTo(ut)).add(st),Lt=It.clone().lerp(Tt,2),Ft=ut.clone().lerp(It,4/3),Nt=gt.clone().lerp(Lt,4/3);j[2*rt]=new Ec(ut,Ft,Nt,gt)}let $=new oA;return j.forEach(rt=>{rt&&$.add(rt)}),$}var vt;(e=>{function a(i){return i&&i.__isEntity}e.is=a})(vt||(vt={}));var Uo=e=>vt.is(e),$9={type:"completeState",isfromEntity:!0},e7=["x","y","z"],cA=new _,t7=new _().set(0,1,0),Pd=e=>class extends Md(e){constructor(){super(...arguments),this.raycastLock=!1,this.scaleLock=!1,this.disposed=!1,this.stateSelection=null,this.destroyedInAction=!1,this.instances=[],this.prevState=null,this.currentState=null,this.reversibleToState=null,this.currentTransitionEvent=null,this.previousAction=null,this._singleBBox=new gm,this._recursiveBBox=new gm,this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0,this._needApplyPathSnapping=!0,this.attachedPaths=new Set}get __isEntity(){return!0}entityChildren(a){let i=this.children[a];if(vt.is(i))return i}entityChildrenCount(){let a=this.children.length;for(;a--;)if(vt.is(this.children[a]))return a+1;return 0}get isConcreteEntity(){return typeof this.identity=="string"}get isVirtualEntity(){return typeof this.identity!="string"}get isInstanceRoot(){return this.isConcreteEntity&&this.data.type==="Instance"}nearestInstanceSelfOrParent(){let a=this;for(;a.data.type!=="Instance";){let i=a.parent;if(vt.is(i))a=i;else return}return a}forInstancesRec(a){this.instances.forEach(i=>{i.disposed||a(i),i.forInstancesRec(a)})}super_Entity(a,i){typeof a=="string"&&(this.uuid=a),this.identity=a,this.data=i,this.matrixAutoUpdate=!1,this.dataPatched=this.data}changeSelectedState(a,i,o=!1){if(!(this.data.states.length===0&&!o)){for(let c of this.data.states)Pa.toOps(this.data,c.data).forEach(d=>{let g=Yh.replaceProps(d,this.data);this.dataPatched=this.data,this.updateByPatchedOp(g,this.data,i)});if(a!==null){let c=this.data.states.data(a);c&&(this.dataPatched=Pa.patch(this.data,c),Pa.toOps(this.data,c).forEach(d=>{this.updateByPatchedOp(d,this.dataPatched,i)}))}o&&this.updateTransformState(this.dataPatched,i),this.stateSelection=a,this.updatePathSnapping(this.dataPatched.pathSnapping)}}get singleBBox(){return this.singleBBoxNeedsUpdate&&(this.singleBBoxNeedsUpdate=!1,this._singleBBox.setFromObjectSize(this,!1),this._singleBBox.computeVertices(),this._singleBBox.computeEdges(),this._singleBBox.computeFaces()),this._singleBBox}get recursiveBBox(){return this.recursiveBBoxNeedsUpdate&&(this.recursiveBBoxNeedsUpdate=!1,this._recursiveBBox.setFromObjectSize(this,!0),this._recursiveBBox.computeVertices(),this._recursiveBBox.computeEdges(),this._recursiveBBox.computeFaces()),this._recursiveBBox}updateEntityBoxSize(a,i){a.setScalar(0),i.setScalar(0)}resetBBoxNeedsUpdateSelf(){this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0}resetBBoxNeedsUpdate(){this.resetBBoxNeedsUpdateSelf(),this.traverseAncestors(a=>{Uo(a)&&a.resetBBoxNeedsUpdateSelf()}),this.traverseEntity(a=>{a.resetBBoxNeedsUpdateSelf()})}find(a){let i;return this.traverseEntity(o=>{o.uuid===a&&(i=o)}),i}traverseSortNextHelper(){let a=this.parent;if(a){let i=a.children,o=i.indexOf(this)+1;if(vt.is(i[o]))return i[o];if(vt.is(a))return a.traverseSortNextHelper()}}sortNext(){let a=this.children;return this.children.length>0&&vt.is(this.children[0])?a[0]:this.traverseSortNextHelper()}goUp(a){let i=this;for(;a>0&&i!==null;)i=i.parent,a-=1;return i}hasAnccestorOrSelf(a){return this===a||this.hasAnccestor(a)}hasAnccestor(a){let i=this.parent;for(;i;){if(a===i)return!0;i=i.parent}return!1}countToAccestor(a){let i=0,o=this;for(;o!==a;){if(o===null)return-1;o=o.parent,i+=1}return i}forEachEntity(a){for(let i of this.children)Uo(i)&&a(i)}traverseEntityAncestors(a){this.traverseAncestors(i=>{vt.is(i)&&a(i)})}traverseConcreteEntity(a,i=0){if(a(this,i)!==!0)for(let o of this.children)Uo(o)&&o.isConcreteEntity&&o.traverseEntity(a,i+1)}traverseEntity(a,i=0){if(a(this,i)!==!0)for(let o of this.children)Uo(o)&&o.traverseEntity(a,i+1)}traverseVisibleEntity(a){a(this);for(let i of this.children)Uo(i)&&i.visible&&i.traverseVisibleEntity(a)}updateMatrix(){super.updateMatrix(),this.cloner&&this.cloner.onObjUpdateMatrix(),this.dispatchEvent({type:"updateMatrix"})}updateMatrixWorld(a){super.updateMatrixWorld(a),this.dispatchEvent({type:"updateMatrixWorld"})}copy(a,i=!1){return super.copy(a,i),this.dataPatched=a.dataPatched,this.raycastLock=a.raycastLock,this.scaleLock=a.scaleLock,this.hiddenMatrix.copy(a.hiddenMatrix),this}hasEntityChild(){return this.children.some(a=>Uo(a))}isAncestorOf(a){if(this.uuid===a)return!1;let i=!1;return this.traverseEntity(o=>{o.uuid===a&&(i=!0)}),i}toObjectTransformState(a=[]){this.updateWorldMatrix(!0,!1);let i={position:this.position.toArray(),rotation:[this.rotation.x*Me.RAD2DEG,this.rotation.y*Me.RAD2DEG,this.rotation.z*Me.RAD2DEG],scale:this.scale.toArray(),hiddenMatrix:this.hiddenMatrix.toArray()};return Vh(i,a)}getTransformValues(a,i,o){return i[a].map((c,d)=>(o==null?void 0:o.shared.getVariable(c,[this.uuid,a,e7[d]]))??c)}updateTransformState(a,i){let o=!1;return a.position&&(this.position.fromArray(this.getTransformValues("position",a,i)),o=!0),a.rotation&&(cA.fromArray(this.getTransformValues("rotation",a,i)).multiplyScalar(Me.DEG2RAD),this.rotation.setFromVector3(cA),o=!0),a.scale&&(this.scale.fromArray(this.getTransformValues("scale",a,i)),o=!0),a.hiddenMatrix!==void 0&&(o=!0,this.hiddenMatrix.fromArray(a.hiddenMatrix??Dl.identity)),o&&(this.updateMatrix(),this.resetBBoxNeedsUpdate(),this.invalidateClonerTransform(this),this.traverseEntityAncestors(c=>{c.invalidateClonerTransform(this)})),a.position&&a.rotation&&a.scale&&a.hiddenMatrix!==void 0&&this.updateWorldMatrix(!1,!0),o}onVariableUpdate(a=!1){if(a){this.resetBBoxNeedsUpdate();return}this.updateMatrix(),this.resetBBoxNeedsUpdate(),this.invalidateClonerTransform(this),this.traverseEntityAncestors(i=>{i.invalidateClonerTransform(this)})}dispose(){this.disposed=!0,this.cloner&&(this.cloner.removeFromParent(),this.cloner=void 0)}disposeChildrenRecursively(){for(let a of this.children)vt.is(a)&&a.disposeRecursively()}disposeRecursively(){this.dispose(),this.children.forEach(a=>{vt.is(a)&&a.disposeRecursively()})}toState(a=[]){let i={name:this.name,visible:this.visible,raycastLock:this.raycastLock,...this.toObjectTransformState(a)};return Vh(i,a)}updateByObjUpdateOp(a,i){a!==void 0&&this.updateByOp({type:0,props:a,path:[]},{...this.data,...a},i,!1)}updateByOp(a,i,o,c){let d=this.data;this.data=i;let g=a,b=Rt(a.path,["states","*"]);if(b!==null){if(a.type===0){let[j]=b;if((this==null?void 0:this.stateSelection)===j){let $={...a.props};if(delete $.name,Object.values(a.props).some(rt=>rt===void 0)){let rt=this.data;if(rt!==void 0){let _e=Nr$1.zoom(rt,a.path.slice(2));if(_e)for(let st in a.props)a.props[st]===void 0&&st in _e&&($[st]=_e[st])}}g={...a,props:$,path:a.path.slice(2)}}}}else if(a.type===0){let j=this.stateSelection?this.data.states.data(this.stateSelection):void 0;if(j!==void 0){if(a.props.name!==void 0&&j.name){let{name:rt,..._e}=j;j=_e}if(a.props.material!==void 0&&"material"in j){let{material:rt,..._e}=j;j=_e}let $=Nr$1.removeOverridden(a.path,a.props,j);g={...a,props:$}}}if(this.updateByPatchedOpBase(g,Pa.patch(this.data,this.stateSelection?this.data.states.data(this.stateSelection):void 0),o),Rt(a.path,["overrides"])){let j=[],$=[...a.path];for(j.push($[1]),$.splice(0,2);$.length>0&&$[0]==="descendants";)j.push($[1]),$.splice(0,2);if(j[j.length-1]===void 0){if(a.type===0)for(let rt of Object.keys(a.props)){j[j.length-1]=rt;let _e=o.scene.findInstance([this.uuid,...j]);_e&&(_e.overrideData=a.props[rt],_e.updateState(Co.apply(_e.component.data,_e.overrideData),o))}}else{let rt=o.scene.findInstance([this.uuid,...j]);if(rt){let _e=Nr$1.zoom(rt.component.data,$);if(a={...a,path:$},a.type===0){let st=a.props;if(_e)for(let[ut,gt]of Object.entries(a.props))gt===void 0&&(st===a.props&&(st={...a.props}),st[ut]=_e[ut]);a={...a,props:st}}rt.overrideData=id.resolve(i.overrides,j),rt.updateByOp(a,Fr$1.applySimple(rt.data,a),o,!1)}}}else if(this.instances.length>0){let j;if(a.path.length===0&&a.type===0){let $;for(let rt of No.rootOverrideProps)rt in a.props&&($===void 0&&($={}),$[rt]=a.props[rt]);$&&(j={...a,props:$})}else for(let $ of No.rootOverrideProps)if(Rt(a.path,[$])){j=a;break}j!==void 0&&this.instances.forEach($=>{if($.isInstanceRoot){let rt=Co.filterOp($.overrideData,j);rt&&$.updateByOp(rt,Fr$1.applySimple($.data,rt),o,!0)}}),this.instances.forEach($=>{if(!$.isInstanceRoot){let rt=Co.filterOp($.overrideData,a);if(rt){let _e;d===$.data&&a===rt?_e=i:_e=Fr$1.applySimple($.data,rt),$.updateByOp(rt,_e,o,!0)}}})}}updateByPatchedOpBase(a,i,o){if(this.dataPatched=i,a.path.length===0&&a.type===0)a.props.type!==void 0&&!Ks.is(a.props.type)&&eo.changeEntityProptotype(this,i,o);else if(a.path.length===1&&a.path[0]==="geometry"&&a.type===0&&"type"in a.props){eo.changeEntityProptotype(this,i,o);for(let c of this.children)vt.is(c)&&c.updateVisible(o.scene)}this.updateByPatchedOp(a,i,o)}updateByPatchedOp(a,i,o){if(a.path.length===0&&a.type===0&&this.updateState(a.props,o),Rt(a.path,["pathSnapping"])!==null&&this.updatePathSnapping(i.pathSnapping),Rt(a.path,["cloner"])!==null){let c=Fr$1.drop(a,1);c.path.length===0&&c.type===0&&c.props.disabled===!0?this.setFromClonerState(null,o):this.cloner?this.cloner.updateState(i.cloner,o.scene):(this.setFromClonerState(i.cloner,o),this.expandCloner(o.scene)),this.updateVisible(o.scene)}}updatePathSnapping(a=this.dataPatched.pathSnapping){this._updatedPathSnapping=a,this._needApplyPathSnapping=!0}get updatedPathSnapping(){return this._updatedPathSnapping}applyPathSnapping(a){var gt,yt,Pt,wt,Ct;let i=((gt=this._updatedPathSnapping)==null?void 0:gt.pathId)??this.dataPatched.pathSnapping.pathId,o=((yt=this._updatedPathSnapping)==null?void 0:yt.slide)??this.dataPatched.pathSnapping.slide??0,c=((Pt=this._updatedPathSnapping)==null?void 0:Pt.offset)??this.dataPatched.pathSnapping.offset??0,d=((wt=this._updatedPathSnapping)==null?void 0:wt.orientation)??this.dataPatched.pathSnapping.orientation;if(i===null)return;let g=a.find(i);if(!g||this._needApplyPathSnapping===!1)return;this._needApplyPathSnapping=!1;let b=g.data;if(b.geometry.path.points.length<=1)return;let j=D0(b.geometry.path),$=(o+c)%1;o+c===1&&$===0&&($=1);let rt=j.getPointAt($);if(rt===null)return;let _e=this.parent?(Ct=this.parent)==null?void 0:Ct.matrixWorld:new ce$1;g.updateMatrixWorld();let st=new ce$1().multiplyMatrices(_e.clone().invert(),g.matrixWorld);rt.applyMatrix4(st);let ut={position:rt.toArray(),rotation:b.rotation};if(d==="tangential"){let At=new ce$1().extractRotation(g.matrixWorld),Tt=j.getTangentAt($).applyMatrix4(At).add(rt),kt=new ce$1().lookAt(rt,Tt,t7),It=cA.setFromEuler(new or$1().setFromRotationMatrix(kt)).multiplyScalar(Me.RAD2DEG);ut={...ut,rotation:It.toArray()}}this.updateTransformState(ut),this.traverseEntity(At=>{At._cameraType&&At.dispatchEvent($9)})}updateVisible(a){var o;if(this.visible=this.dataPatched.visible&&(!this.dataPatched.cloner||(this.dataPatched.cloner.disabled??!1)||((o=this.dataPatched.cloner)==null?void 0:o.hideBase)!==!0),!a)return;let i=!1;this.traverseEntity(c=>{if(c.data.type==="Splat")return i=!0,!0}),i&&a.reloadSplats()}updateState_Entity(a,i){a.name!==void 0&&(this.name=a.name),a.raycastLock!==void 0&&(this.raycastLock=a.raycastLock),a.visible!==void 0&&(this.updateVisible(i==null?void 0:i.scene),this.resetBBoxNeedsUpdate()),i&&"cloner"in a&&a.cloner!==void 0&&(this.setFromClonerState(a.cloner,i),this.updateVisible(i.scene)),this.updateTransformState(a,i)}get attachedSurfaceCloners(){return this.children.filter(a=>a instanceof eo.Cloner&&a.parameters.type==="toObject")}setFromClonerState(a,i){this.disposed||(a===null||a.disabled?(this.cloner&&this.cloner.removeFromParent(),this.cloner=void 0):this.cloner===void 0?(this.cloner=new eo.Cloner(this,a),i.scene.addPendingExpandCloner(this)):this.cloner.updateState(a,i.scene))}expandCloner(a){!this.disposed&&this.cloner&&this.cloner.expandClones(a)}invalidateClonerTransform(a){this.cloner&&this.cloner.invalidateTransform(a)}requestRender(){this.dispatchEvent({type:"requestRender"})}},O0=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,a){let i=Object.assign({},(a==null?void 0:a.parameters)??{width:100,radialSegments:64,heightSegments:1,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadius:8,cornerSegments:8,hollow:0},e.parameters);i.thetaLength=Me.clamp(i.thetaLength,0,360);let o=i.width/2,c=i.radiusTop??o,d=i.radiusBottom??o;return c===d?(c=o,d=o):c>d?(c=o,d=d*o/c):(c=c*o/d,d=o),{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width),radiusTop:c,radiusBottom:d})}}static build(e){let{width:a,depth:i,height:o,radialSegments:c,heightSegments:d,openEnded:g,thetaStart:b,thetaLength:j,radiusTop:$,radiusBottom:rt,cornerRadius:_e,cornerSegments:st,hollow:ut}=e.parameters,gt;return j===0?(gt=new Pe,gt.setAttribute("position",new Te([],3))):_e||ut?gt=new ym($,rt,o,c,d,g,b,j*Math.PI/180,_e,_e,st,ut):gt=new Mc($,rt,o,c,d,g,b,j*Math.PI/180),gt.scale(1,1,i/a),Object.assign(gt,{userData:{...e,type:"CylinderGeometry"}})}};function zl(e,a,i){i.x=e.x*a.x,i.y=e.y,i.z=e.x*a.y}function NO(e){return new z$2(e.y,-e.x)}var ym=class extends Pe{constructor(e,a,i,o,c,d,g,b,j,$,rt,_e,st=!1){super(),this.type="RoundedCylinderBufferGeometry",e=e!==void 0?e:1,a=a!==void 0?a:1,i=i||1,o=Math.floor(o)||8,c=Math.floor(c)||1,d=d!==void 0?d:!1,g=g!==void 0?g:0,b=b!==void 0?b:Math.PI*2,d&&(j=0,$=0);let ut=[],gt=[],yt=[],Pt=[],wt=0,Ct=i/2,At=new _,Tt=new _;st&&e==0&&(e=j),st&&a==0&&(a=$);let kt=new z$2(e,Ct),It=new z$2(a,-Ct),Lt=null,Ft=null,Nt=null,Ht=null,Gr=kt.clone().sub(It),hs=0,_s=0,hn=0;_e>0&&(hs=Math.min(e,a)*(1-_e),_s=e-hs,hn=a-hs);let Qn=kt.clone();Qn.x-=hs;let ds=Math.PI-Gr.angle(),un=Gr.angle(),dr=Math.tan(un/2),us=Math.tan(ds/2),Nn=dr+us,gn=_e?Nn:us,Zn=_e?Nn:dr;if(j=Math.min(j,(e-_s)/gn,Gr.length()/Nn),$=Math.min($,(a-hn)/Zn,Gr.length()/Nn),j>0){let P0=j/dr;Lt=kt.clone().sub(new z$2(P0,j)),_e&&(Nt=Lt.clone(),Nt.x-=hs-Nn*j),kt.sub(Gr.clone().setLength(P0))}if($>0){let P0=$/us;Ft=It.clone().sub(new z$2(P0,-$)),It.add(Gr.clone().setLength(P0)),_e&&(Ht=Ft.clone(),Ht.x-=hs-Nn*$,Qn.sub(Gr.clone().setLength(P0)))}Gr=kt.clone().sub(It);let xu=Gr.length()<.5,au=[];for(let P0=0;P0<=o;P0++){let B0=[],q1=P0/o,ox=q1*b+g,N_=new z$2(Math.sin(ox),Math.cos(ox));Ht&&Ft?(Vv(B0,q1,N_,ds,$,Ht,-1,!0),Vv(B0,q1,N_,un,$,Ft,-1,!1)):Ft?(wu(B0,N_,Ft.x,0,-1),Vv(B0,q1,N_,un,$,Ft,-1,!1)):d||wu(B0,N_,a,hn,-1);let eS=NO(Gr).normalize();if(zl(eS,N_,At),!xu)for(let tS=0;tS<=c;tS++){let tA=tS/c,aR=Gr.clone().multiplyScalar(tA).add(It);zl(aR,N_,Tt),gt.push(Tt.x,Tt.y,Tt.z),yt.push(At.x,At.y,At.z),Pt.push(q1,.5+Tt.y/i),B0.push(wt++)}if(Nt&&Lt?(Vv(B0,q1,N_,ds,j,Lt,1,!1),Vv(B0,q1,N_,un,j,Nt,1,!0)):Lt?(Vv(B0,q1,N_,ds,j,Lt,1,!1),wu(B0,N_,Lt.x,0,1)):d||wu(B0,N_,e,_s,1),_e&&!xu){let tS=NO(Gr).multiplyScalar(-1).normalize();zl(tS,N_,At);for(let tA=0;tA<=c;tA++){let aR=tA/c,sR=Gr.clone().multiplyScalar(-aR).add(Qn);zl(sR,N_,Tt),gt.push(Tt.x,Tt.y,Tt.z),yt.push(At.x,At.y,At.z),Pt.push(q1,.5+Tt.y/i),B0.push(wt++)}}_e&&!d&&B0.push(B0[0]),au.push(B0)}for(let P0=0;P0<au.length-1;P0++)for(let B0=0;B0<au[0].length-1;B0++){if(d&&_e&&B0==c)continue;let q1=au[P0][B0],ox=au[P0+1][B0],N_=au[P0+1][B0+1],eS=au[P0][B0+1],tS=gt[N_*3+0],tA=gt[N_*3+2];ut.push(q1,ox,eS),(tS!=0||tA!=0)&&ut.push(ox,N_,eS)}b<Math.PI*2&&(a1(-1,au[0],g),a1(1,au[au.length-1],g+b)),this.setIndex(ut),this.setAttribute("position",new Te(gt,3)),this.setAttribute("normal",new Te(yt,3)),this.setAttribute("uv",new Te(Pt,2));function Vv(P0,B0,q1,ox,N_,eS,tS,tA){for(let aR=0;aR<rt+1;aR++){let sR=aR/rt,AA=tS<0?sR:1-sR;tA&&(AA-=1),AA*=ox;let SA=new z$2(Math.sin(AA),Math.cos(AA)*tS),IO=SA.clone().multiplyScalar(N_).add(eS);zl(IO,q1,Tt),gt.push(Tt.x,Tt.y,Tt.z),zl(SA,q1,At),yt.push(At.x,At.y,At.z),Pt.push(B0,.5+Tt.y/i),P0.push(wt++)}}function wu(P0,B0,q1,ox,N_){let eS=new _,tS=new z$2,tA=[q1,ox];N_<0&&tA.reverse();for(let aR of tA)tS.set(aR,Ct*N_),zl(tS,B0,eS),gt.push(eS.x,eS.y,eS.z),yt.push(0,N_,0),Pt.push(.5,.5),P0.push(wt++)}function a1(P0,B0,q1){let ox=new z$2(Math.sin(q1),Math.cos(q1)),N_=new z$2(-Math.cos(q1),Math.sin(q1)),eS=new _,tS=P0<0?(sR,AA,SA)=>ut.push(sR,AA,SA):(sR,AA,SA)=>ut.push(sR,SA,AA),tA=new z$2((e+a+_s+hn)/4,0);zl(tA,ox,eS),gt.push(eS.x,eS.y,eS.z),yt.push(N_.x,0,N_.y),Pt.push(.5,.5);let aR=wt++;for(let sR of B0){let AA=gt.slice(sR*3,sR*3+3);gt.push(...AA),yt.push(N_.x,0,N_.y);let SA=Pt.slice(sR*2,sR*2+2);Pt.push(...SA),wt++}for(let sR=aR+1;sR<wt-1;sR++)tS(aR,sR,sR+1);tS(aR,wt-1,aR+1)}}},FO=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,a){let i=Object.assign({},(a==null?void 0:a.parameters)??{width:100,radialSegments:32,heightSegments:8,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadiusTop:8,cornerRadiusBottom:8,cornerSegments:8},e.parameters);return i.thetaLength=Me.clamp(i.thetaLength,0,360),{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width)})}}static build(e){let{width:a,depth:i,height:o,radialSegments:c,heightSegments:d,openEnded:g,thetaStart:b,thetaLength:j,cornerRadiusTop:$,cornerRadiusBottom:rt,cornerSegments:_e}=e.parameters,st;return j===0?(st=new Pe,st.setAttribute("position",new Te([],3))):$>0||rt>0||j<360?st=new ym(0,a/2,o,c,d,g,b,j*Math.PI/180,$,rt,_e,0,!0):st=new dl(a/2,o,c,d,g),st.scale(1,1,i/a),Object.assign(st,{userData:{...e,type:"ConeGeometry"}})}},kO=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,a){let i=Object.assign({},(a==null?void 0:a.parameters)??{width:100,widthSegments:1,heightSegments:1,depthSegments:1,cornerRadius:8,cornerSegments:8},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width)})}}static build(e){let{width:a,height:i,depth:o,widthSegments:c,heightSegments:d,depthSegments:g,cornerRadius:b,cornerSegments:j}=e.parameters,$;return b==0?$=new vi(a,i,o,c,d,g):$=new hA(a,i,o,c,d,g,b,j),Object.assign($,{userData:{...e,type:"CubeGeometry"}})}},uA=Math.PI/2,hA=class extends Pe{constructor(e=1,a=1,i=1,o=1,c=1,d=1,g=0,b=4){super(),this.type="BoxGeometry";let j=this;o=Math.floor(o),c=Math.floor(c),d=Math.floor(d),b=Math.floor(b),g=Math.min(g,e/2,a/2,i/2);let $=[],rt=[],_e=[],st=[],ut=0,gt=0;yt("z","y","x",-1,-1,i,a,e,d,c,0),yt("z","y","x",1,-1,i,a,-e,d,c,1),yt("x","z","y",1,1,e,i,a,o,d,2),yt("x","z","y",1,-1,e,i,-a,o,d,3),yt("x","y","z",1,-1,e,a,i,o,c,4),yt("x","y","z",-1,-1,e,a,-i,o,c,5),g>0&&(Pt("z","y","x",-1,-1,1,i,a,e,d,0),Pt("z","y","x",1,-1,-1,i,a,e,d,1),Pt("z","y","x",-1,1,-1,i,a,e,d,1),Pt("z","y","x",1,1,1,i,a,e,d,0),Pt("x","y","z",-1,-1,-1,e,a,i,o,0),Pt("x","y","z",1,-1,1,e,a,i,o,1),Pt("x","y","z",-1,1,1,e,a,i,o,0),Pt("x","y","z",1,1,-1,e,a,i,o,1),Pt("y","x","z",-1,-1,1,a,e,i,c,0),Pt("y","x","z",1,-1,-1,a,e,i,c,1),Pt("y","x","z",1,1,1,a,e,i,c,1),Pt("y","x","z",-1,1,-1,a,e,i,c,0),wt(1,1,1),wt(-1,1,1),wt(1,-1,1),wt(-1,-1,1),wt(1,1,-1),wt(-1,1,-1),wt(1,-1,-1),wt(-1,-1,-1)),this.setIndex($),this.setAttribute("position",new Te(rt,3)),this.setAttribute("normal",new Te(_e,3)),this.setAttribute("uv",new Te(st,2));function yt(Ct,At,Tt,kt,It,Lt,Ft,Nt,Ht,Gr,hs){let _s=(Lt-2*g)/Ht,hn=(Ft-2*g)/Gr,Qn=Lt/2-g,ds=Ft/2-g,un=Nt/2,dr=Ht+1,us=Gr+1,Nn=0,gn=0,Zn=new _;for(let xu=0;xu<us;xu++){let au=xu*hn-ds;for(let Vv=0;Vv<dr;Vv++){let wu=Vv*_s-Qn;Zn[Ct]=wu*kt,Zn[At]=au*It,Zn[Tt]=un,rt.push(Zn.x,Zn.y,Zn.z),Zn[Ct]=0,Zn[At]=0,Zn[Tt]=Nt>0?1:-1,_e.push(Zn.x,Zn.y,Zn.z),st.push(Vv/Ht),st.push(1-xu/Gr),Nn+=1}}for(let xu=0;xu<Gr;xu++)for(let au=0;au<Ht;au++){let Vv=ut+au+dr*xu,wu=ut+au+dr*(xu+1),a1=ut+(au+1)+dr*(xu+1),P0=ut+(au+1)+dr*xu;$.push(Vv,wu,P0),$.push(wu,a1,P0),gn+=6}j.addGroup(gt,gn,hs),gt+=gn,ut+=Nn}function Pt(Ct,At,Tt,kt,It,Lt,Ft,Nt,Ht,Gr,hs){let _s=(Ft-2*g)/Gr,hn=Ft/2-g,Qn=Nt/2-g,ds=Ht/2,un=Gr+1,dr=0,us=0,Nn=new _,gn=new _;for(let Zn=0;Zn<b+1;Zn++){let xu=Zn/b*uA,au=Math.sin(xu)*g,Vv=(1-Math.cos(xu))*g,wu=Math.sin(xu),a1=Math.cos(xu);Nn[At]=(Qn+au)*It,Nn[Tt]=(ds-Vv)*Lt,gn[Ct]=0,gn[At]=wu*Math.sign(Nn[At]),gn[Tt]=a1*Math.sign(Nn[Tt]);for(let P0=0;P0<un;P0++){let B0=P0*_s-hn;Nn[Ct]=B0*kt,rt.push(Nn.x,Nn.y,Nn.z),_e.push(gn.x,gn.y,gn.z),st.push(P0/Gr),st.push(0),dr+=1}}for(let Zn=0;Zn<b;Zn++)for(let xu=0;xu<Gr;xu++){let au=ut+xu+un*Zn,Vv=ut+xu+un*(Zn+1),wu=ut+(xu+1)+un*(Zn+1),a1=ut+(xu+1)+un*Zn;$.push(au,Vv,a1),$.push(Vv,wu,a1),us+=6}j.addGroup(gt,us,hs),gt+=us,ut+=dr}function wt(Ct,At,Tt){let kt=new _,It=new _(e/2,a/2,i/2);It.subScalar(g);let Lt=[],Ft=Ct*At*Tt>0?(Ht,Gr,hs)=>$.push(Ht,Gr,hs):(Ht,Gr,hs)=>$.push(Ht,hs,Gr);for(let Ht=0;Ht<=b;Ht++){let Gr=[],hs=uA*(1-Ht/b),_s=Math.cos(hs),hn=Math.sin(hs),Qn=0;for(let ds=0;ds<=Ht;ds++){let un=Math.cos(Qn),dr=Math.sin(Qn);kt.x=_s*un,kt.y=hn,kt.z=_s*dr;let us=It.clone().addScaledVector(kt,g);rt.push(Ct*us.x,At*us.y,Tt*us.z),_e.push(Ct*kt.x,At*kt.y,Tt*kt.z),st.push(0,0),Gr.push(ut++),Qn+=uA/Ht}Lt.push(Gr)}let Nt=Lt.length-1;for(let Ht=0;Ht<Nt;Ht++){let Gr=Lt[Ht],hs=Lt[Ht+1],_s=Gr.length-1;Ft(Gr[0],hs[1],hs[0]);for(let hn=1;hn<=_s;hn++)Ft(Gr[hn-1],Gr[hn],hs[hn]),Ft(Gr[hn],hs[hn+1],hs[hn])}}}},Ul=class extends Pe{constructor(e=[],a=[],i="",o=1,c=.2,d=4){super(),this.type="PolyhedronGeometryRound";let g=[],b=[],j=[];$(),rt(),this.setAttribute("position",new Te(g,3)),this.setAttribute("normal",new Te(j,3)),this.setAttribute("uv",new Te(b,2));return;function $(){var un;c=Math.min(1-1e-5,c),c==0&&(d=0);let _e={IcosahedronGeometry:5,DodecahedronGeometry:3,HexahedronGeometry:3,OctahedronGeometry:4,TetrahedronGeometry:3}[i],st=new _,ut=st.clone(),gt=new Dr$1,yt=c*o,Pt=o-yt,wt=d+1,Ct=new _,At=(dr,us)=>Ct.subVectors(dr,us).normalize(),Tt=(dr,us)=>Array(dr).fill(void 0).map(us),kt=Tt(e.length/3,(dr,us)=>new _().fromArray(e,us*3).setLength(o)),It=[],Lt=1e6;for(let dr=0;dr<kt.length;dr++){let us=kt[dr],Nn=[],gn,Zn,xu,au=1e10,Vv=-1;for(;(Vv=a.indexOf(dr,Vv+1))!=-1;){let B0=Vv-Vv%3;gn=a[B0+(Vv+1)%3],Zn=a[B0+(Vv+2)%3],xu=us.distanceToSquared(kt[gn]),au=Math.min(au,xu),Nn.push([gn,Zn,xu])}au+=1e-6;let wu=[],a1=0,P0=Nn.length;for(let B0=0;B0<P0;B0++){[gn,Zn,xu]=Nn[a1];let q1=((un=It[gn])==null?void 0:un.includes(dr))==!0;xu<=au&&wu.push(gn+ +q1*Lt),a1=Nn.findIndex(ox=>ox[0]==Zn)}It.push(wu)}let Ft=[];{let dr=0,us=0,Nn,gn,Zn=_e==3;for(let xu=0;xu<=d;xu++){Nn=xu*(xu+1)/2,gn=(xu+1)*(xu+2)/2;for(let au=0;au<d-xu;au++)[dr,us]=[Nn+au+xu+2,gn+au+xu+3],Ft.push(Nn,gn,...Zn?[us,Nn]:[dr,gn],us,dr),[Nn,gn]=[dr,us];Ft.push(Nn,gn,Nn+d+2)}}let Nt=st.clone(),Ht=st.clone(),Gr=st.clone(),hs=st.clone(),_s=st.clone(),hn=[],Qn=Tt(kt.length,()=>Tt(_e,()=>st.clone()));for(let dr=0;dr<kt.length;dr++){st.copy(kt[dr]).normalize(),Nt.copy(st).multiplyScalar(Pt);let us=It[dr];for(let wu=0;wu<us.length;wu++){let a1=us[wu],P0=us[(wu+1)%_e];gt.setFromPointsAndIndices(kt,dr,a1%Lt,P0%Lt),gt.b.sub(gt.a).setLength(1e10).add(gt.a),gt.c.sub(gt.a).setLength(1e10).add(gt.a),gt.closestPointToPoint(Nt,Qn[dr][wu])}let Nn=[],gn=[],Zn=[],xu=new _;d==0&&[...Qn[dr]].reduce((wu,a1)=>wu.add(a1),xu).multiplyScalar(1/_e);for(let wu=0;wu<_e;wu++){let a1=[],P0=(wu-1+_e)%_e,B0=Qn[dr][P0],q1=Qn[dr][wu];st.copy(B0).sub(Nt),ut.copy(q1).sub(Nt);let ox=Nt.angleTo(st),N_=st.angleTo(ut),eS=Math.cos(ox)*yt;d==0?Ht.copy(xu):Ht.copy(Nt).setLength(Pt+eS),gn.push(eS);let tS=[Ht,B0,q1];for(let tA=0;tA<2;tA++){let aR=tS[tA],sR=tS[tA+1];hs.subVectors(aR,Nt),_s.subVectors(sR,Nt),Gr.crossVectors(hs,_s).normalize();for(let AA=0;AA<wt;AA++){let SA=[ox,N_][tA]*AA/wt;st.copy(hs).applyAxisAngle(Gr,SA).add(Nt),Nn.push(st.clone()),tA&&(At(st,Nt),a1.push([AA==0?aR:st.clone(),Ct.clone()]))}tA&&(At(sR,Nt),a1.push([sR,Ct.clone()]))}Zn.push(a1)}hn.push(Zn);let au=2*wt,Vv=2;for(let wu=0;wu<_e;wu++){let a1=au*wu,P0=au*((wu+1)%_e),B0=[Nn[a1]];for(let ox=1;ox<wt;ox++){hs=Nn[a1+ox],_s=Nn[P0+ox],B0.push(hs);for(let N_=1,eS=ox-Vv+1;N_<=eS;N_++)st.lerpVectors(hs,_s,N_/(eS+1)),st.sub(Nt).setLength(gn[wu]).add(Nt),B0.push(st.clone());B0.push(_s)}for(let ox=0;ox<wt;ox++)B0.push(Nn[ox+wt+a1]);B0.push(Nn[P0+wt]);let q1=Ft.map(ox=>B0[ox]);g.push(...q1.map(ox=>[ox.x,ox.y,ox.z]).flat()),j.push(...q1.map(ox=>(At(ox,Nt),[Ct.x,Ct.y,Ct.z])).flat())}}let ds=[];for(let dr=0;dr<It.length;dr++)for(let us=0;us<_e;us++){let Nn=It[dr][us];if(Nn<Lt){let gn=It[Nn].findIndex(au=>au%Lt==dr),Zn=hn[dr][us],xu=hn[Nn][gn];for(let au=0;au<wt;au++){let Vv=Zn[au],wu=xu[wt-au],a1=Zn[au+1],P0=xu[wt-(au+1)];[Vv,wu,a1,a1,wu,P0].forEach(B0=>{g.push(B0[0].x,B0[0].y,B0[0].z),j.push(B0[1].x,B0[1].y,B0[1].z)})}ds.push(Zn[0][0],xu[wt][0],Zn[wt][0],xu[0][0])}}for(;ds.length;){let dr,us,Nn,gn;[dr,us]=ds.splice(0,2);let Zn=[dr];for(;dr!=us;)Zn.push(us),Nn=ds.indexOf(us),gn=Nn%2,us=ds.splice(Nn-gn,2)[1-gn];Ct.subVectors(Zn[0],Zn[1]).cross(st.subVectors(Zn[0],Zn[2])).normalize();let xu=Ct.dot(Zn[0])<0;xu&&Ct.negate();for(let au=1;au<=Zn.length-2;au++)[Zn[au+ +xu],Zn[au+1-+xu],Zn[0]].forEach(Vv=>{g.push(Vv.x,Vv.y,Vv.z),j.push(Ct.x,Ct.y,Ct.z)})}}function rt(){let _e=new _;for(let It=0;It<g.length;It+=3){_e.x=g[It+0],_e.y=g[It+1],_e.z=g[It+2];let Lt=Tt(_e)/2/Math.PI+.5,Ft=kt(_e)/Math.PI+.5;b.push(Lt,1-Ft)}let st=new _,ut=new _,gt=new _,yt=new _,Pt=new z$2,wt=new z$2,Ct=new z$2,At=(It,Lt,Ft,Nt)=>{Nt<0&&It.x===1&&(b[Lt]=It.x-1),Ft.x===0&&Ft.z===0&&(b[Lt]=Nt/2/Math.PI+.5)};for(let It=0,Lt=0;It<g.length;It+=9,Lt+=6){st.set(g[It+0],g[It+1],g[It+2]),ut.set(g[It+3],g[It+4],g[It+5]),gt.set(g[It+6],g[It+7],g[It+8]),Pt.set(b[Lt+0],b[Lt+1]),wt.set(b[Lt+2],b[Lt+3]),Ct.set(b[Lt+4],b[Lt+5]),yt.copy(st).add(ut).add(gt).divideScalar(3);let Ft=Tt(yt);At(Pt,Lt+0,st,Ft),At(wt,Lt+2,ut,Ft),At(Ct,Lt+4,gt,Ft)}for(let It=0;It<b.length;It+=6){let Lt=b[It+0],Ft=b[It+2],Nt=b[It+4],Ht=Math.max(Lt,Ft,Nt),Gr=Math.min(Lt,Ft,Nt);Ht>.9&&Gr<.1&&(Lt<.2&&(b[It+0]+=1),Ft<.2&&(b[It+2]+=1),Nt<.2&&(b[It+4]+=1))}function Tt(It){return Math.atan2(It.z,-It.x)}function kt(It){return Math.atan2(-It.y,Math.sqrt(It.x*It.x+It.z*It.z))}}}static fromJSON(e){return new Ul(e.vertices,e.indices,e.radius,e.corner,e.cornerSides)}},VO=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,a){let i=Object.assign({},(a==null?void 0:a.parameters)??{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width)})}}static build(e){let{width:a,height:i,depth:o,detail:c,corner:d,cornerSides:g}=e.parameters,b=c===0&&d!==0?new vm(a*.5,d,g):new Ku(a*.5,c);return b.scale(1,i/a,o/a),Object.assign(b,{userData:{...e,type:"DodecahedronGeometry"}})}},vm=class extends Ul{constructor(e=1,a=.2,i=4){let o=(1+Math.sqrt(5))/2,c=1/o,d=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-c,-o,0,-c,o,0,c,-o,0,c,o,-c,-o,0,-c,o,0,c,-o,0,c,o,0,-o,0,-c,o,0,-c,-o,0,c,o,0,c],g=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],b="DodecahedronGeometry";super(d,g,b,e,a,i),this.type=b}static fromJSON(e){return new vm(e.radius,e.corner,e.cornerSides)}},xm=1e-12,Dd=class{constructor(e){this.position=new z$2,this.startPosition=new z$2,this.uuid=Me.generateUUID(),this.position=e.clone()}start(){this.reset()}reset(){this.startPosition.copy(this.position)}applyOffset(e){this.position.copy(this.startPosition).add(e)}copy(e){return this.position.copy(e.position),this.startPosition.copy(e.startPosition),this}clone(){return new Dd(this.position).copy(this)}toJSON(){return[this.position.x,this.position.y]}},Od=class extends Dd{constructor(e){super(e.position),this.parent=e}copy(e){return super.copy(e),this}clone(){return new Od(this.parent).copy(this)}},to=class extends Dd{constructor(e,a){super(a),this.controls=[],this.roundness=0,this.areControlsDirectionsMirrored=!0,this.uuid=e,this.controls.push(new Od(this),new Od(this))}static create(e,a){let i=new to(e,new z$2(...a.position));return i.controls[0].position.set(...a.controlPrevious.position),i.controls[1].position.set(...a.controlNext.position),i.roundness=a.roundness,i.areControlsDirectionsMirrored=a.areControlsDirectionsMirrored,i}getOppositeControl(e){let a=this.controls.indexOf(e);return a===0?this.controls[1]:a===1?this.controls[0]:null}applyOffsetToControls(e,a=1){for(let i=0,o=this.controls.length;i<o;i++){let c=this.controls[i];this.position.distanceTo(c.position)<=a?c.position.copy(this.position):c.applyOffset(e)}}controlsMoved(){return!(this.position.equals(this.controls[0].position)&&this.position.equals(this.controls[1].position))}copy(e){return super.copy(e),this.controls[0].copy(e.controls[0]),this.controls[1].copy(e.controls[1]),this.roundness=e.roundness,this.uuid=e.uuid,this}clone(){return new to(this.uuid,this.position).copy(this)}toJSON(){return super.toJSON().concat(this.controls[0].toJSON(),this.controls[1].toJSON(),[this.roundness])}computeTangents(){var i,o;let e=(i=this.curveBefore)==null?void 0:i.getTangentAt(1),a=(o=this.curveAfter)==null?void 0:o.getTangentAt(0);return[e,a]}computeNormals(e=new z$2,a=new z$2){let[i,o]=this.computeTangents();return i&&o&&(zO(i,e),zO(o,a)),[e,a]}computeTangent(e=new z$2){let[a,i]=this.computeTangents();return a&&i&&e.copy(a).add(i).normalize(),e}computeNormal(e=new z$2){let[a,i]=this.computeNormals();return e.copy(a).add(i).normalize(),e}};function zO(e,a=new z$2){let i=e.length();return a.set(-e.y/i,e.x/i)}var fA=e=>e,Id=new z$2,I0=new z$2,r7=new z$2,i7=new z$2,n7=new z$2,s7=new z$2,GO=new _,jO=new _;function HO(e){let a=new z$2;a.addVectors(e.v0,Id.subVectors(e.v1,e.v0).multiplyScalar(2/3));let i=new z$2;return i.addVectors(e.v2,I0.subVectors(e.v1,e.v2).multiplyScalar(2/3)),new fn(e.v0,a,i,e.v2)}function bm(e,a,i=Number.EPSILON){return Math.abs(e-a)<i}function o7(e,a,i=Number.EPSILON){return e.distanceTo(a)<i}function a7(e,a,i=Number.EPSILON){return e.distanceTo(a)<i}function pA(e,a,i){let o=Math.sqrt(Math.pow(a.x-e.x,2)+Math.pow(a.y-e.y,2)),c=Math.sqrt(Math.pow(a.x-i.x,2)+Math.pow(a.y-i.y,2)),d=Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2));return Math.acos((c*c+o*o-d*d)/(2*c*o))}function WO(e,a,i){return UO(e,a)&&UO(a,i)&&dA(e.position,a.position,i.position)}function dA(e,a,i){return Id.copy(a).sub(e).cross(I0.copy(i).sub(e))===0}function qO(e,a,i,o,c){let d=Math.sqrt(Math.pow(a.x-e.x,2)+Math.pow(a.y-e.y,2)),g=(e.y+a.y)/2,b=(e.x+a.x)/2,j=Math.sqrt(Math.pow(i,2)-Math.pow(d/2,2))*(e.y-a.y)/d,$=Math.sqrt(Math.pow(i,2)-Math.pow(d/2,2))*(a.x-e.x)/d;return o.set(b+j,g+$),c.set(b-j,g-$),[o,c]}function YO(e,a,i){let o=e.distanceTo(i),c=a.distanceTo(i);return o<c?a:e}function XO(e,a,i,o,c,d){let g=a.x-e.x,b=a.y-e.y,j=i.x-e.x,$=i.y-e.y,rt=Math.sqrt((g+j)*(g+j)+(b+$)*(b+$)),_e;return pA(a,e,i)>Math.PI&&(rt*=-1),bm($,b)?_e=(b+$)*(o/rt-.5)*8/3/(g-j):_e=(g+j)*(o/rt-.5)*8/3/($-b),c.set(a.x-_e*b,a.y+_e*g),d.set(i.x+_e*$,i.y-_e*j),[c,d]}function mA(e,a){return e.position.equals(e.controls[1].position)&&a.position.equals(a.controls[0].position)}function UO(e,a){return dA(e.position,e.controls[1].position,a.position)&&dA(e.position,a.controls[0].position,a.position)}function QO(e,a,i,o,c=.5){let d=Id.subVectors(a,e).multiplyScalar(c).add(e),g=I0.subVectors(i,a).multiplyScalar(c).add(a),b=r7.subVectors(o,i).multiplyScalar(c).add(i),j=d,$=i7.subVectors(g,d).multiplyScalar(c).add(d),rt=n7.subVectors(b,g).multiplyScalar(c).add(g),_e=b,st=s7.subVectors(rt,$).multiplyScalar(c).add($);return[e.x,e.y,j.x,j.y,$.x,$.y,st.x,st.y,rt.x,rt.y,_e.x,_e.y,o.x,o.y]}function KO(e,a,i=12,o=!0){let c=jO.set(0,0,0),d,g=0;for(let b=0;b<a.length;b++){let j=fA(a[b]),$=Id,rt=Gl(j,i);for(let _e=0;_e<=rt;_e++)if(j instanceof fn||j instanceof is$1||j instanceof pn){if(j.getPoint(_e/rt,$),c.set($.x,$.y,0),d!==void 0&&a7(d,c))continue;d===void 0&&(d=GO),d.copy(c),e.setXYZ(g,c.x,c.y,c.z),g++}}return o&&g>1&&!(e.getX(g-1)===e.getX(0)&&e.getY(g-1)===e.getY(0)&&e.getZ(g-1)===e.getZ(0))&&(e.setXYZ(g,e.getX(0),e.getY(0),e.getZ(0)),g++),e}function ZO(e,a,i,o=12,c=!0){let d=jO.set(0,0,0),g=0,b=[];for(let j=0;j<a.length;j++){if(i[j]===!1)continue;let $,rt=fA(a[j]),_e=Id,st=Gl(rt,o);b.push(st);for(let ut=0;ut<=st;ut++)if(rt instanceof fn||rt instanceof is$1||rt instanceof pn){if(rt.getPoint(ut/st,_e),d.set(_e.x,_e.y,0),$==null?void 0:$.equals(d))continue;$===void 0?$=GO:(e.setXYZ(g,$.x,$.y,$.z),g++,e.setXYZ(g,d.x,d.y,d.z),g++),$.copy(d)}}return c&&g>1&&!(e.getX(g-1)===e.getX(0)&&e.getY(g-1)===e.getY(0)&&e.getZ(g-1)===e.getZ(0))&&(e.setXYZ(g,e.getX(0),e.getY(0),e.getZ(0)),g++),b}function gA(e,a=12,i=!1){let o=[];for(let c=0,d=e.length;c<d;c++){let g=e[c],b=0;if(i&&g.roundedCurveCorner!==void 0){let j=Gl(g.roundedCurveCorner,a)*.5;c>0&&(o[c-1]+=j),b+=j}g.curveAfter!==void 0&&(b+=Gl(g.curveAfter,a)),o.push(b)}return e.length>0&&i&&e[0].roundedCurveCorner!==void 0&&(o[e.length-1]+=Gl(e[0].roundedCurveCorner,a)*.5),o}function Gl(e,a=12){return e&&e instanceof _c?a*2:e&&(e instanceof pn||e instanceof Pp)?1:e&&e instanceof Yu?a*e.points.length:a}function JO(e,a,i=12,o=!0){let c,d=0;for(let g=0;g<a.length;g++){let b=fA(a[g]),j=Gl(b,i),$=Id;for(let rt=0;rt<=j;rt++)if(b instanceof fn||b instanceof is$1||b instanceof pn){if(b.getPoint(rt/j,$),c!==void 0&&o7(c,$,xm))continue;c===void 0&&(c=I0),c.copy($),e.push($.x,$.y),d++}}return bm(e[0],e[e.length-2],xm)&&bm(e[1],e[e.length-1],xm)&&(e.pop(),e.pop()),o&&d>1&&!(bm(e[d-1],e[1],xm)&&bm(e[d-2],e[0],xm))&&(e.push(e[0],e[1]),d++),e}var yA=new z$2,l7=new z$2,c7=new z$2,u7=new z$2,h7=new z$2,d7=new z$2,Xt=class extends xa{constructor(e=100,a=100){super(),this.points=[],this.shapeHoles=[],this.plane=new ii(new _(0,0,-1)),this.subdivision=0,this.controlSnapDistance=4,this.pointIDs=0,this.isMesh2D=!1,this.isText=!1,this._roundness=0,this.isClosed=!1,this.useCubicForRoundedCorners=!0,this.uuid=Me.generateUUID(),this.needsUpdate=!1,this.roundedCurves=[],this._width=e,this._height=a}static createFromState(e,a,i){let o=new Xt;return o.isClosed=e.isClosed,o.points=e.points.map(c=>to.create(c.id,c.data)),typeof e.roundness=="number"&&(o.roundness=e.roundness),o.shapeHoles=e.shapeHoles.map(c=>Xt.createFromState(c)),a!==void 0&&i!==void 0&&o.applySize(a,i),o.update(),o}get width(){return this._width}get height(){return this._height}get roundness(){return this._roundness}set roundness(e){if(this._roundness!==e){this._roundness=e;for(let a=0,i=this.points.length;a<i;a++)this.points[a].roundness=e;this.needsUpdate=!0}}getPointsIndexesByIds(e){return e.map(a=>this.getPointIndexById(a)).filter(a=>a>=0)}getPointIndexById(e){let a=this.points.length,i=this.points.findIndex(o=>o.uuid===e);if(i<0){let o=a;for(let c=0,d=this.shapeHoles.length;c<d;c++){let g=this.shapeHoles[c],b=g.points.length,j=g.getPointIndexById(e);if(j<0)o+=b;else return j+o}}return i}getLineIndexById(e){return this.getPointIndexById(e)}getBezierPoint(e){if(e<=this.points.length-1)return this.points[e];if(this.shapeHoles.length>0){let a=this.points.length;for(let i=0,o=this.shapeHoles.length;i<o;i++){let c=this.shapeHoles[i],d=e-a;if(d<=c.points.length-1)return c.points[d];a+=c.points.length}}throw new Error("This shape does not have a point for this index: "+e)}getBezierPointIndex(e){let a=this.points.indexOf(e);if(a>=0)return a;if(a=this.points.length,this.shapeHoles.length>0)for(let i=0,o=this.shapeHoles.length;i<o;i++){let c=this.shapeHoles[i],d=c.points.indexOf(e);if(d>=0)return a+d;a+=c.points.length}return-1}getAllPoints(){let e=[].concat(...this.shapeHoles.map(a=>a.points));return[...this.points,...e]}applySize(e,a){e===0&&(e=.001),a===0&&(a=.001),this._width=e,this._height=a}applyScale(e,a){let i=yA.set(e,a);for(let o=0,c=this.points.length;o<c;o++){let d=this.points[o];d.position.multiply(i),d.controls[0].position.multiply(i),d.controls[1].position.multiply(i)}for(let o=0,c=this.shapeHoles.length;o<c;o++)this.shapeHoles[o].applyScale(e,a);this._update()}createPoint(e,a=0,i=Me.generateUUID()){let o;e instanceof z$2?o=e:o=new z$2(e,a);let c=new to(i,o);return c.roundness=this.roundness,c}addPoint(e){this.points.push(e),this.needsUpdate=!0}addPointAt(e,a){this.points.splice(a,0,e),this.needsUpdate=!0}getPointByUuid(e){for(let a=0,i=this.points.length;a<i;a++){let o=this.points[a];if(o.uuid===e)return o}for(let a=0,i=this.shapeHoles.length;a<i;a++){let o=this.shapeHoles[a].getPointByUuid(e);if(o)return o}}getFirstPoint(){return this.points[0]}getLastPoint(){return this.points[this.points.length-1]}removePoint(e){let a=this.points.indexOf(e);a>=0&&this.points.splice(a,1),this.needsUpdate=!0}removePointById(e){let a=this.points.find(i=>i.uuid===e);a&&this.removePoint(a)}update(){for(let e=0,a=this.shapeHoles.length;e<a;e++)this.shapeHoles[e].update();this._update()}extractShapePointsToBuffer(e,a=12,i=!1){this.subdivision=a,this.curveDivisions===void 0&&this.computeCurveDivisions(a);let o=i?this.roundedCurveDivisions:this.curveDivisions;return KO(e,i?this.roundedCurves:this.curves,a,this.autoClose),o.reduce((c,d)=>c+d,0)+1}computeCurveDivisions(e=12){return this.curveDivisions=gA(this.points,e,!1),this.roundedCurveDivisions=gA(this.points,e,!0),this.curveDivisions}extractFilteredShapePointsToBuffer(e,a,i=12){return ZO(e,this.curves,a,i,this.autoClose).reduce((o,c)=>o+c,0)*2}extractShapePointsToFlatArray(e,a=12){return this.subdivision=a,this.curveDivisions===void 0&&this.computeCurveDivisions(a),JO(e,this.roundedCurves,a,this.autoClose)}getCurveIndexFromVertexId(e,a=!1){let i=0;this.curveDivisions===void 0&&this.computeCurveDivisions(this.subdivision);let o=a?this.roundedCurveDivisions:this.curveDivisions,c=0;a&&this.points[0].roundedCurveCorner!==void 0&&(c=Gl(this.points[0].roundedCurveCorner,this.subdivision)*.5);let d=e-c;d<0&&(d+=o.reduce((g,b)=>g+b,0));for(let g=0,b=o.length;g<b;g++){let j=o[g];if(d<i+j)return[g,(d-i+1)/j];i+=j}return[0,1]}getCurveT(e,a,i){let o=this.points[e],c=this.points[e>=this.points.length-1?0:e+1],d=this.curveDivisions,g=d[e];if(mA(o,c)){let j=o.position.distanceTo(c.position);return o.position.distanceTo(yA.set(i.x,i.y))/j}let b=0;for(let j=0;j<e;j++)b+=d[j];return(a-b)/g}dispose(){}_applyCurveForPoint(e,a){mA(a,e)?this.lineTo(e.position.x,e.position.y):this.bezierCurveTo(a.controls[1].position.x,a.controls[1].position.y,e.controls[0].position.x,e.controls[0].position.y,e.position.x,e.position.y);let i=this.curves[this.curves.length-1];e.curveBefore=i,a.curveAfter=i;let o=i.clone();e.roundedCurveBefore=o,a.roundedCurveAfter=o,e.roundedCurveCorner=void 0,this.roundedCurves.push(o)}_update(){if(this.curves=[],this.roundedCurves=[],!this.points.length)return;for(let a=0,i=this.points.length;a<i;a++){let o=this.points[a];if(a===0)this.moveTo(o.position.x,o.position.y);else{let c=this.points[a-1];this._applyCurveForPoint(o,c)}}let e=this.getLastPoint();if(e!=null&&e.curveAfter&&(e.curveAfter=void 0),this.isClosed){let a=this.points[0],i=this.points[this.points.length-1];this._applyCurveForPoint(a,i)}if(this.points.length>2){let a=0;for(let i=0,o=this.points.length;i<o;i++){let c=this.points[i],d=this.points[i-1]??this.points[this.points.length-1],g=this.points[i+1]??this.points[0],b=c.roundness,j=d&&g&&WO(d,c,g);if(!c.controlsMoved()&&b>0&&!j){let $=c.curveBefore,rt=c.curveAfter;if($===void 0||rt===void 0)continue;let _e=c.roundedCurveBefore,st=c.roundedCurveAfter,ut=$.getLength(),gt=rt.getLength(),yt=Math.min(b,ut*.499),Pt=Math.min(b,gt*.499),wt=Math.min(yt,Pt),Ct=1-wt/ut,At=wt/gt,Tt=$.getPointAt(Ct,yA),kt=rt.getPointAt(At,l7);this._subSplitCurve($,_e,Ct,Tt,void 0),this._subSplitCurve(rt,st,At,void 0,kt);let It;if(this.useCubicForRoundedCorners){let Lt=pA(Tt,c.position,kt)/2,Ft=Math.tan(Lt)*Tt.distanceTo(c.position),[Nt,Ht]=qO(Tt,kt,Ft,c7,u7),Gr=YO(Nt,Ht,c.position),[hs,_s]=XO(Gr,Tt,kt,Ft,h7,d7);It=new fn(Tt.clone(),hs.clone(),_s.clone(),kt.clone())}else It=new is$1(Tt.clone(),c.position.clone(),kt.clone());c.roundedCurveCorner=It,this.roundedCurves.splice(i+a,0,It),a++}}}}_subSplitCurve(e,a,i,o,c){if(e instanceof pn)o!==void 0&&a.v2.copy(o),c!==void 0&&a.v1.copy(c);else{let d=e,g=a,b=d.getUtoTmapping(i,0),j=QO(d.v0,d.v1,d.v2,d.v3,b);return o!==void 0&&(g.v0.set(j[0],j[1]),g.v1.set(j[2],j[3]),g.v2.set(j[4],j[5]),g.v3.set(j[6],j[7])),c!==void 0&&(g.v0.set(j[6],j[7]),g.v1.set(j[8],j[9]),g.v2.set(j[10],j[11]),g.v3.set(j[12],j[13])),g}return a}clone(){let e=new Xt(this._width,this._height);return e.points=this.points.map(a=>a.clone()),e.isClosed=this.isClosed,e.roundness=this.roundness,e.isMesh2D=this.isMesh2D,e.shapeHoles=this.shapeHoles.map(a=>a.clone()),e}toJSON(){return{points:this.points.reduce((e,a)=>e.concat(a.toJSON()),[]),shapeHoles:this.shapeHoles.map(e=>e.toJSON()),isClosed:this.isClosed,roundness:this.roundness}}fromJSON(e){var i;this.points=[],this.pointIDs=0;let a=e.points.length/7;for(let o=0;o<a;o++){let c=o*7,d=e.points[c+0],g=e.points[c+1],b=e.points[c+2],j=e.points[c+3],$=e.points[c+4],rt=e.points[c+5],_e=e.points[c+6],st=new to(Me.generateUUID(),new z$2(d,g));st.controls[0].position.set(b,j),st.controls[1].position.set($,rt),st.roundness=_e,this.points.push(st)}return this.shapeHoles=(i=e.shapeHoles)!=null&&i.length?e.shapeHoles.map(o=>{let c=new Xt;return c.fromJSON(o),c}):[],this.isClosed=e.isClosed,this._roundness=e.roundness,this._update(),this}fromShape(e,a=!1){this.isText=a;let i=(c,d)=>{d instanceof fn&&d.v3.equals(c.position)&&c.controls[0].position.copy(d.v2)},o=c=>{let d=[],g,b;for(g=0,b=c.length;g<b;g++)c[g]instanceof is$1&&(c[g]=HO(c[g]));for(g=0,b=c.length;g<b;g++){let rt=c[g],_e=g>0?c[g-1]:null,st;rt instanceof fn?(st=this.createPoint(rt.v0),st.controls[1].position.copy(rt.v1)):rt instanceof pn&&(st=this.createPoint(rt.v1)),st!==void 0&&(_e!==null&&i(st,_e),d.push(st))}let j=c[c.length-1],$=!1;return j instanceof fn?j.v3.equals(d[0].position)&&(d[0].controls[0].position.copy(j.v2),$=!0):j instanceof pn&&j.v2.equals(d[0].position)&&($=!0),this.isClosed=$,d};return this.points=o(e.curves),e instanceof xa&&(this.shapeHoles=e.holes.map(c=>{let d=new Xt;return d.fromShape(c),d})),this.update(),this}updatePoint(e,a){let i=this.getPointByUuid(e);i&&(a.position!==void 0&&i.position.fromArray(a.position),a.roundness!==void 0&&(i.roundness=a.roundness),a.areControlsDirectionsMirrored!==void 0&&(i.areControlsDirectionsMirrored=a.areControlsDirectionsMirrored),this.needsUpdate=!0)}updatePreviousControl(e,a){var o;let i=(o=this.getPointByUuid(e))==null?void 0:o.controls[0];i&&(a.position&&i.position.fromArray(a.position),this.needsUpdate=!0)}updateNextControl(e,a){var o;let i=(o=this.getPointByUuid(e))==null?void 0:o.controls[1];i&&(a.position&&i.position.fromArray(a.position),this.needsUpdate=!0)}},xA=Math.PI*2;function vA({x:e,y:a},i,o,c,d){return{x:e*i+c,y:a*o+d}}function f7(e,a){let i=a===1.5707963267948966?.551915024494:a===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(a/4),o=Math.cos(e),c=Math.sin(e),d=Math.cos(e+a),g=Math.sin(e+a);return[{x:o-c*i,y:c+o*i},{x:d+g*i,y:g-d*i},{x:d,y:g}]}function $O(e,a,i,o){let c=e*o-a*i<0?-1:1,d=Math.min(1,Math.max(-1,e*i+a*o));return c*Math.acos(d)}function p7(e,a,i,o,c,d,g,b,j,$){let rt=Math.pow(c,2),_e=Math.pow(d,2),st=Math.pow(g,2),ut=Math.pow(b,2),gt=rt*_e-rt*ut-_e*st;gt<0&&(gt=0),gt/=rt*ut+_e*st,gt=Math.sqrt(gt)*(j===$?-1:1);let yt=gt*c/d*b,Pt=gt*-d/c*g,wt=yt+(e+i)/2,Ct=Pt+(a+o)/2,At=(g-yt)/c,Tt=(b-Pt)/d,kt=(-g-yt)/c,It=(-b-Pt)/d,Lt=$O(1,0,At,Tt),Ft=$O(At,Tt,kt,It);return!$&&Ft>0&&(Ft-=xA),$&&Ft<0&&(Ft+=xA),{centerx:wt,centery:Ct,ang1:Lt,ang2:Ft}}function eI({px:e,py:a,cx:i,cy:o,rx:c,ry:d,largeArcFlag:g,sweepFlag:b}){let j=[];if(c===0||d===0)return[];let $=(e-i)/2,rt=(a-o)/2;if($===0&&rt===0)return[];c=Math.abs(c),d=Math.abs(d);let _e=Math.pow($,2)/Math.pow(c,2)+Math.pow(rt,2)/Math.pow(d,2);_e>1&&(c*=Math.sqrt(_e),d*=Math.sqrt(_e));let st=p7(e,a,i,o,c,d,$,rt,g,b),{ang1:ut,ang2:gt}=st,{centerx:yt,centery:Pt}=st,wt=Math.abs(gt)/(xA/4);Math.abs(1-wt)<1e-7&&(wt=1);let Ct=Math.max(Math.ceil(wt),1);gt/=Ct;for(let At=0;At<Ct;At++)j.push(f7(ut,gt)),ut+=gt;return j.map(At=>{let{x:Tt,y:kt}=vA(At[0],c,d,yt,Pt),{x:It,y:Lt}=vA(At[1],c,d,yt,Pt),{x:Ft,y:Nt}=vA(At[2],c,d,yt,Pt);return{x1:Tt,y1:kt,x2:It,y2:Lt,x:Ft,y:Nt}})}var Gt;(function(e){e[e.ODD=0]="ODD",e[e.NONZERO=1]="NONZERO",e[e.POSITIVE=2]="POSITIVE",e[e.NEGATIVE=3]="NEGATIVE",e[e.ABS_GEQ_TWO=4]="ABS_GEQ_TWO"})(Gt||(Gt={}));var Wr$1;(function(e){e[e.POLYGONS=0]="POLYGONS",e[e.CONNECTED_POLYGONS=1]="CONNECTED_POLYGONS",e[e.BOUNDARY_CONTOURS=2]="BOUNDARY_CONTOURS"})(Wr$1||(Wr$1={}));function ht(e,a){if(!e)throw a||"Assertion Failed!"}var ot=function(){function e(){}return e.vertEq=function(a,i){return a.s===i.s&&a.t===i.t},e.vertLeq=function(a,i){return a.s<i.s||a.s===i.s&&a.t<=i.t},e.transLeq=function(a,i){return a.t<i.t||a.t===i.t&&a.s<=i.s},e.edgeGoesLeft=function(a){return e.vertLeq(a.Dst,a.Org)},e.edgeGoesRight=function(a){return e.vertLeq(a.Org,a.Dst)},e.vertL1dist=function(a,i){return Math.abs(a.s-i.s)+Math.abs(a.t-i.t)},e.edgeEval=function(a,i,o){ht(e.vertLeq(a,i)&&e.vertLeq(i,o));var c=i.s-a.s,d=o.s-i.s;return c+d>0?c<d?i.t-a.t+(a.t-o.t)*(c/(c+d)):i.t-o.t+(o.t-a.t)*(d/(c+d)):0},e.edgeSign=function(a,i,o){ht(e.vertLeq(a,i)&&e.vertLeq(i,o));var c=i.s-a.s,d=o.s-i.s;return c+d>0?(i.t-o.t)*c+(i.t-a.t)*d:0},e.transEval=function(a,i,o){ht(e.transLeq(a,i)&&e.transLeq(i,o));var c=i.t-a.t,d=o.t-i.t;return c+d>0?c<d?i.s-a.s+(a.s-o.s)*(c/(c+d)):i.s-o.s+(o.s-a.s)*(d/(c+d)):0},e.transSign=function(a,i,o){ht(e.transLeq(a,i)&&e.transLeq(i,o));var c=i.t-a.t,d=o.t-i.t;return c+d>0?(i.s-o.s)*c+(i.s-a.s)*d:0},e.vertCCW=function(a,i,o){return a.s*(i.t-o.t)+i.s*(o.t-a.t)+o.s*(a.t-i.t)>=0},e.interpolate=function(a,i,o,c){return a=a<0?0:a,o=o<0?0:o,a<=o?o===0?(i+c)/2:i+(c-i)*(a/(a+o)):c+(i-c)*(o/(a+o))},e.intersect=function(a,i,o,c,d){var g,b,j;e.vertLeq(a,i)||(j=a,a=i,i=j),e.vertLeq(o,c)||(j=o,o=c,c=j),e.vertLeq(a,o)||(j=a,a=o,o=j,j=i,i=c,c=j),e.vertLeq(o,i)?e.vertLeq(i,c)?(g=e.edgeEval(a,o,i),b=e.edgeEval(o,i,c),g+b<0&&(g=-g,b=-b),d.s=e.interpolate(g,o.s,b,i.s)):(g=e.edgeSign(a,o,i),b=-e.edgeSign(a,c,i),g+b<0&&(g=-g,b=-b),d.s=e.interpolate(g,o.s,b,c.s)):d.s=(o.s+i.s)/2,e.transLeq(a,i)||(j=a,a=i,i=j),e.transLeq(o,c)||(j=o,o=c,c=j),e.transLeq(a,o)||(j=a,a=o,o=j,j=i,i=c,c=j),e.transLeq(o,i)?e.transLeq(i,c)?(g=e.transEval(a,o,i),b=e.transEval(o,i,c),g+b<0&&(g=-g,b=-b),d.t=e.interpolate(g,o.t,b,i.t)):(g=e.transSign(a,o,i),b=-e.transSign(a,c,i),g+b<0&&(g=-g,b=-b),d.t=e.interpolate(g,o.t,b,c.t)):d.t=(o.t+i.t)/2},e}(),Sm=function(){function e(){this.next=null,this.prev=null,this.anEdge=null,this.trail=null,this.n=0,this.marked=!1,this.inside=!1}return e}(),R0=function(){function e(a){this.side=a,this.next=null,this.Org=null,this.Sym=null,this.Onext=null,this.Lnext=null,this.Lface=null,this.activeRegion=null,this.winding=0}return Object.defineProperty(e.prototype,"Rface",{get:function(){return this.Sym.Lface},set:function(a){this.Sym.Lface=a},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dst",{get:function(){return this.Sym.Org},set:function(a){this.Sym.Org=a},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Oprev",{get:function(){return this.Sym.Lnext},set:function(a){this.Sym.Lnext=a},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Lprev",{get:function(){return this.Onext.Sym},set:function(a){this.Onext.Sym=a},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dprev",{get:function(){return this.Lnext.Sym},set:function(a){this.Lnext.Sym=a},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rprev",{get:function(){return this.Sym.Onext},set:function(a){this.Sym.Onext=a},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dnext",{get:function(){return this.Sym.Onext.Sym},set:function(a){this.Sym.Onext.Sym=a},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rnext",{get:function(){return this.Sym.Lnext.Sym},set:function(a){this.Sym.Lnext.Sym=a},enumerable:!0,configurable:!0}),e}(),Rd=function(){function e(){this.next=null,this.prev=null,this.anEdge=null,this.coords=[0,0,0],this.s=0,this.t=0,this.pqHandle=0,this.n=0,this.idx=0}return e}(),tI=function(){function e(){var a=new Rd,i=new Sm,o=new R0(0),c=new R0(1);a.next=a.prev=a,a.anEdge=null,i.next=i.prev=i,o.next=o,o.Sym=c,c.next=c,c.Sym=o,this.vHead=a,this.fHead=i,this.eHead=o,this.eHeadSym=c}return e.prototype.makeEdge_=function(a){var i=new R0(0),o=new R0(1);a.Sym.side<a.side&&(a=a.Sym);var c=a.Sym.next;return o.next=c,c.Sym.next=i,i.next=a,a.Sym.next=o,i.Sym=o,i.Onext=i,i.Lnext=o,i.Org=null,i.Lface=null,i.winding=0,i.activeRegion=null,o.Sym=i,o.Onext=o,o.Lnext=i,o.Org=null,o.Lface=null,o.winding=0,o.activeRegion=null,i},e.prototype.splice_=function(a,i){var o=a.Onext,c=i.Onext;o.Sym.Lnext=i,c.Sym.Lnext=a,a.Onext=c,i.Onext=o},e.prototype.makeVertex_=function(a,i,o){var c=a;ht(c,"Vertex can't be null!");var d=o.prev;c.prev=d,d.next=c,c.next=o,o.prev=c,c.anEdge=i;var g=i;do g.Org=c,g=g.Onext;while(g!==i)},e.prototype.makeFace_=function(a,i,o){var c=a;ht(c,"Face can't be null");var d=o.prev;c.prev=d,d.next=c,c.next=o,o.prev=c,c.anEdge=i,c.trail=null,c.marked=!1,c.inside=o.inside;var g=i;do g.Lface=c,g=g.Lnext;while(g!==i)},e.prototype.killEdge_=function(a){a.Sym.side<a.side&&(a=a.Sym);var i=a.next,o=a.Sym.next;i.Sym.next=o,o.Sym.next=i},e.prototype.killVertex_=function(a,i){var o=a.anEdge,c=o;do c.Org=i,c=c.Onext;while(c!==o);var d=a.prev,g=a.next;g.prev=d,d.next=g},e.prototype.killFace_=function(a,i){var o=a.anEdge,c=o;do c.Lface=i,c=c.Lnext;while(c!==o);var d=a.prev,g=a.next;g.prev=d,d.next=g},e.prototype.makeEdge=function(){var a=new Rd,i=new Rd,o=new Sm,c=this.makeEdge_(this.eHead);return this.makeVertex_(a,c,this.vHead),this.makeVertex_(i,c.Sym,this.vHead),this.makeFace_(o,c,this.fHead),c},e.prototype.splice=function(a,i){var o=!1,c=!1;if(a!==i){if(i.Org!==a.Org&&(c=!0,this.killVertex_(i.Org,a.Org)),i.Lface!==a.Lface&&(o=!0,this.killFace_(i.Lface,a.Lface)),this.splice_(i,a),!c){var d=new Rd;this.makeVertex_(d,i,a.Org),a.Org.anEdge=a}if(!o){var g=new Sm;this.makeFace_(g,i,a.Lface),a.Lface.anEdge=a}}},e.prototype.delete=function(a){var i=a.Sym,o=!1;if(a.Lface!==a.Rface&&(o=!0,this.killFace_(a.Lface,a.Rface)),a.Onext===a)this.killVertex_(a.Org,null);else if(a.Rface.anEdge=a.Oprev,a.Org.anEdge=a.Onext,this.splice_(a,a.Oprev),!o){var c=new Sm;this.makeFace_(c,a,a.Lface)}i.Onext===i?(this.killVertex_(i.Org,null),this.killFace_(i.Lface,null)):(a.Lface.anEdge=i.Oprev,i.Org.anEdge=i.Onext,this.splice_(i,i.Oprev)),this.killEdge_(a)},e.prototype.addEdgeVertex=function(a){var i=this.makeEdge_(a),o=i.Sym;this.splice_(i,a.Lnext),i.Org=a.Dst;var c=new Rd;return this.makeVertex_(c,o,i.Org),i.Lface=o.Lface=a.Lface,i},e.prototype.splitEdge=function(a){var i=this.addEdgeVertex(a),o=i.Sym;return this.splice_(a.Sym,a.Sym.Oprev),this.splice_(a.Sym,o),a.Dst=o.Org,o.Dst.anEdge=o.Sym,o.Rface=a.Rface,o.winding=a.winding,o.Sym.winding=a.Sym.winding,o.idx=a.idx,o.Sym.idx=a.Sym.idx,o},e.prototype.connect=function(a,i){var o=!1,c=this.makeEdge_(a),d=c.Sym;if(i.Lface!==a.Lface&&(o=!0,this.killFace_(i.Lface,a.Lface)),this.splice_(c,a.Lnext),this.splice_(d,i),c.Org=a.Dst,d.Org=i.Org,c.Lface=d.Lface=a.Lface,a.Lface.anEdge=d,!o){var g=new Sm;this.makeFace_(g,c,a.Lface)}return c},e.prototype.zapFace=function(a){var i=a.anEdge,o,c,d,g,b;c=i.Lnext;do o=c,c=o.Lnext,o.Lface=null,o.Rface===null&&(o.Onext===o?this.killVertex_(o.Org,null):(o.Org.anEdge=o.Onext,this.splice_(o,o.Oprev)),d=o.Sym,d.Onext===d?this.killVertex_(d.Org,null):(d.Org.anEdge=d.Onext,this.splice_(d,d.Oprev)),this.killEdge_(o));while(o!=i);g=a.prev,b=a.next,b.prev=g,g.next=b},e.prototype.countFaceVerts_=function(a){var i=a.anEdge,o=0;do o++,i=i.Lnext;while(i!==a.anEdge);return o},e.prototype.mergeConvexFaces=function(a){var i,o,c,d,g,b,j;for(i=this.fHead.next;i!==this.fHead;i=i.next)if(i.inside)for(o=i.anEdge,g=o.Org;c=o.Lnext,d=o.Sym,d&&d.Lface&&d.Lface.inside&&(b=this.countFaceVerts_(i),j=this.countFaceVerts_(d.Lface),b+j-2<=a&&ot.vertCCW(o.Lprev.Org,o.Org,d.Lnext.Lnext.Org)&&ot.vertCCW(d.Lprev.Org,d.Org,o.Lnext.Lnext.Org)&&(c=d.Lnext,this.delete(d),o=null,d=null)),!(o&&o.Lnext.Org===g);)o=c;return!0},e.prototype.check=function(){var a=this.fHead,i=this.vHead,o=this.eHead,c,d,g,b,j,$;for(d=a,d=a;(c=d.next)!==a;d=c){ht(c.prev===d),j=c.anEdge;do ht(j.Sym!==j),ht(j.Sym.Sym===j),ht(j.Lnext.Onext.Sym===j),ht(j.Onext.Sym.Lnext===j),ht(j.Lface===c),j=j.Lnext;while(j!==c.anEdge)}for(ht(c.prev===d&&c.anEdge===null),b=i,b=i;(g=b.next)!==i;b=g){ht(g.prev===b),j=g.anEdge;do ht(j.Sym!==j),ht(j.Sym.Sym===j),ht(j.Lnext.Onext.Sym===j),ht(j.Onext.Sym.Lnext===j),ht(j.Org===g),j=j.Onext;while(j!==g.anEdge)}for(ht(g.prev===b&&g.anEdge===null),$=o,$=o;(j=$.next)!==o;$=j)ht(j.Sym.next===$.Sym),ht(j.Sym!==j),ht(j.Sym.Sym===j),ht(j.Org!==null),ht(j.Dst!==null),ht(j.Lnext.Onext.Sym===j),ht(j.Onext.Sym.Lnext===j);ht(j.Sym.next===$.Sym&&j.Sym===this.eHeadSym&&j.Sym.Sym===j&&j.Org===null&&j.Dst===null&&j.Lface===null&&j.Rface===null)},e}(),rI=function(){function e(){this.handle=null}return e}(),iI=function(){function e(){this.key=null,this.node=0}return e}(),m7=function(){function e(a,i){this.leq=i,this.max=0,this.nodes=[],this.handles=[],this.initialized=!1,this.freeList=0,this.size=0,this.max=a,this.nodes=[],this.handles=[];for(var o=0;o<a+1;o++)this.nodes[o]=new rI,this.handles[o]=new iI;this.initialized=!1,this.nodes[1].handle=1,this.handles[1].key=null}return e.prototype.floatDown_=function(a){var i=this.nodes,o=this.handles,c,d,g;for(c=i[a].handle;;){if(g=a<<1,g<this.size&&this.leq(o[i[g+1].handle].key,o[i[g].handle].key)&&++g,ht(g<=this.max),d=i[g].handle,g>this.size||this.leq(o[c].key,o[d].key)){i[a].handle=c,o[c].node=a;break}i[a].handle=d,o[d].node=a,a=g}},e.prototype.floatUp_=function(a){var i=this.nodes,o=this.handles,c,d,g;for(c=i[a].handle;;){if(g=a>>1,d=i[g].handle,g===0||this.leq(o[d].key,o[c].key)){i[a].handle=c,o[c].node=a;break}i[a].handle=d,o[d].node=a,a=g}},e.prototype.init=function(){for(var a=this.size;a>=1;--a)this.floatDown_(a);this.initialized=!0},e.prototype.min=function(){return this.handles[this.nodes[1].handle].key},e.prototype.insert=function(a){var i,o;if(i=++this.size,i*2>this.max){this.max*=2;var c,d;for(d=this.nodes.length,this.nodes.length=this.max+1,c=d;c<this.nodes.length;c++)this.nodes[c]=new rI;for(d=this.handles.length,this.handles.length=this.max+1,c=d;c<this.handles.length;c++)this.handles[c]=new iI}return this.freeList===0?o=i:(o=this.freeList,this.freeList=this.handles[o].node),this.nodes[i].handle=o,this.handles[o].node=i,this.handles[o].key=a,this.initialized&&this.floatUp_(i),o},e.prototype.extractMin=function(){var a=this.nodes,i=this.handles,o=a[1].handle,c=i[o].key;return this.size>0&&(a[1].handle=a[this.size].handle,i[a[1].handle].node=1,i[o].key=null,i[o].node=this.freeList,this.freeList=o,--this.size,this.size>0&&this.floatDown_(1)),c},e.prototype.delete=function(a){var i=this.nodes,o=this.handles,c;ht(a>=1&&a<=this.max&&o[a].key!==null),c=o[a].node,i[c].handle=i[this.size].handle,o[i[c].handle].node=c,--this.size,c<=this.size&&(c<=1||this.leq(o[i[c>>1].handle].key,o[i[c].handle].key)?this.floatDown_(c):this.floatUp_(c)),o[a].key=null,o[a].node=this.freeList,this.freeList=a},e}(),bA=function(){function e(){this.eUp=null,this.nodeUp=null,this.windingNumber=0,this.inside=!1,this.sentinel=!1,this.dirty=!1,this.fixUpperEdge=!1}return e}(),nI=function(){function e(){this.key=null,this.next=null,this.prev=null}return e}(),g7=function(){function e(a,i){this.frame=a,this.leq=i,this.head=new nI,this.head.next=this.head,this.head.prev=this.head}return e.prototype.min=function(){return this.head.next},e.prototype.max=function(){return this.head.prev},e.prototype.insert=function(a){return this.insertBefore(this.head,a)},e.prototype.search=function(a){var i=this.head;do i=i.next;while(i.key!==null&&!this.leq(this.frame,a,i.key));return i},e.prototype.insertBefore=function(a,i){do a=a.prev;while(a.key!==null&&!this.leq(this.frame,a.key,i));var o=new nI;return o.key=i,o.next=a.next,a.next.prev=o,o.prev=a,a.next=o,o},e.prototype.delete=function(a){a.next.prev=a.prev,a.prev.next=a.next},e}(),y7=function(){function e(){}return e.regionBelow=function(a){return a.nodeUp.prev.key},e.regionAbove=function(a){return a.nodeUp.next.key},e.debugEvent=function(a){},e.addWinding=function(a,i){a.winding+=i.winding,a.Sym.winding+=i.Sym.winding},e.edgeLeq=function(a,i,o){var c=a.event,d=i.eUp,g=o.eUp;if(d.Dst===c)return g.Dst===c?ot.vertLeq(d.Org,g.Org)?ot.edgeSign(g.Dst,d.Org,g.Org)<=0:ot.edgeSign(d.Dst,g.Org,d.Org)>=0:ot.edgeSign(g.Dst,c,g.Org)<=0;if(g.Dst===c)return ot.edgeSign(d.Dst,c,d.Org)>=0;var b=ot.edgeEval(d.Dst,c,d.Org),j=ot.edgeEval(g.Dst,c,g.Org);return b>=j},e.deleteRegion=function(a,i){i.fixUpperEdge&&ht(i.eUp.winding===0),i.eUp.activeRegion=null,a.dict.delete(i.nodeUp)},e.fixUpperEdge=function(a,i,o){ht(i.fixUpperEdge),a.mesh.delete(i.eUp),i.fixUpperEdge=!1,i.eUp=o,o.activeRegion=i},e.topLeftRegion=function(a,i){var o=i.eUp.Org,c;do i=e.regionAbove(i);while(i.eUp.Org===o);if(i.fixUpperEdge){if(c=a.mesh.connect(e.regionBelow(i).eUp.Sym,i.eUp.Lnext),c===null)return null;e.fixUpperEdge(a,i,c),i=e.regionAbove(i)}return i},e.topRightRegion=function(a){var i=a.eUp.Dst;do a=e.regionAbove(a);while(a.eUp.Dst===i);return a},e.addRegionBelow=function(a,i,o){var c=new bA;return c.eUp=o,c.nodeUp=a.dict.insertBefore(i.nodeUp,c),c.fixUpperEdge=!1,c.sentinel=!1,c.dirty=!1,o.activeRegion=c,c},e.isWindingInside=function(a,i){switch(a.windingRule){case Gt.ODD:return(i&1)!==0;case Gt.NONZERO:return i!==0;case Gt.POSITIVE:return i>0;case Gt.NEGATIVE:return i<0;case Gt.ABS_GEQ_TWO:return i>=2||i<=-2}throw new Error("Invalid winding rulle")},e.computeWinding=function(a,i){i.windingNumber=e.regionAbove(i).windingNumber+i.eUp.winding,i.inside=e.isWindingInside(a,i.windingNumber)},e.finishRegion=function(a,i){var o=i.eUp,c=o.Lface;c.inside=i.inside,c.anEdge=o,e.deleteRegion(a,i)},e.finishLeftRegions=function(a,i,o){for(var c,d=null,g=i,b=i.eUp;g!==o;){if(g.fixUpperEdge=!1,d=e.regionBelow(g),c=d.eUp,c.Org!=b.Org){if(!d.fixUpperEdge){e.finishRegion(a,g);break}c=a.mesh.connect(b.Lprev,c.Sym),e.fixUpperEdge(a,d,c)}b.Onext!==c&&(a.mesh.splice(c.Oprev,c),a.mesh.splice(b,c)),e.finishRegion(a,g),b=d.eUp,g=d}return b},e.addRightEdges=function(a,i,o,c,d,g){var b,j,$,rt,_e=!0;$=o;do ht(ot.vertLeq($.Org,$.Dst)),e.addRegionBelow(a,i,$.Sym),$=$.Onext;while($!==c);for(d===null&&(d=e.regionBelow(i).eUp.Rprev),j=i,rt=d;b=e.regionBelow(j),$=b.eUp.Sym,$.Org===rt.Org;)$.Onext!==rt&&(a.mesh.splice($.Oprev,$),a.mesh.splice(rt.Oprev,$)),b.windingNumber=j.windingNumber-$.winding,b.inside=e.isWindingInside(a,b.windingNumber),j.dirty=!0,!_e&&e.checkForRightSplice(a,j)&&(e.addWinding($,rt),e.deleteRegion(a,j),a.mesh.delete(rt)),_e=!1,j=b,rt=$;j.dirty=!0,ht(j.windingNumber-$.winding===b.windingNumber),g&&e.walkDirtyRegions(a,j)},e.spliceMergeVertices=function(a,i,o){a.mesh.splice(i,o)},e.vertexWeights=function(a,i,o){var c=ot.vertL1dist(i,a),d=ot.vertL1dist(o,a),g=.5*d/(c+d),b=.5*c/(c+d);a.coords[0]+=g*i.coords[0]+b*o.coords[0],a.coords[1]+=g*i.coords[1]+b*o.coords[1],a.coords[2]+=g*i.coords[2]+b*o.coords[2]},e.getIntersectData=function(a,i,o,c,d,g){i.coords[0]=i.coords[1]=i.coords[2]=0,i.idx=-1,e.vertexWeights(i,o,c),e.vertexWeights(i,d,g)},e.checkForRightSplice=function(a,i){var o=e.regionBelow(i),c=i.eUp,d=o.eUp;if(ot.vertLeq(c.Org,d.Org)){if(ot.edgeSign(d.Dst,c.Org,d.Org)>0)return!1;ot.vertEq(c.Org,d.Org)?c.Org!==d.Org&&(a.pq.delete(c.Org.pqHandle),e.spliceMergeVertices(a,d.Oprev,c)):(a.mesh.splitEdge(d.Sym),a.mesh.splice(c,d.Oprev),i.dirty=o.dirty=!0)}else{if(ot.edgeSign(c.Dst,d.Org,c.Org)<0)return!1;e.regionAbove(i).dirty=i.dirty=!0,a.mesh.splitEdge(c.Sym),a.mesh.splice(d.Oprev,c)}return!0},e.checkForLeftSplice=function(a,i){var o=e.regionBelow(i),c=i.eUp,d=o.eUp,g;if(ht(!ot.vertEq(c.Dst,d.Dst)),ot.vertLeq(c.Dst,d.Dst)){if(ot.edgeSign(c.Dst,d.Dst,c.Org)<0)return!1;e.regionAbove(i).dirty=i.dirty=!0,g=a.mesh.splitEdge(c),a.mesh.splice(d.Sym,g),g.Lface.inside=i.inside}else{if(ot.edgeSign(d.Dst,c.Dst,d.Org)>0)return!1;i.dirty=o.dirty=!0,g=a.mesh.splitEdge(d),a.mesh.splice(c.Lnext,d.Sym),g.Rface.inside=i.inside}return!0},e.checkForIntersect=function(a,i){var o=e.regionBelow(i),c=i.eUp,d=o.eUp,g=c.Org,b=d.Org,j=c.Dst,$=d.Dst,rt,_e,st=new Rd,ut,gt;if(ht(!ot.vertEq($,j)),ht(ot.edgeSign(j,a.event,g)<=0),ht(ot.edgeSign($,a.event,b)>=0),ht(g!==a.event&&b!==a.event),ht(!i.fixUpperEdge&&!o.fixUpperEdge),g===b||(rt=Math.min(g.t,j.t),_e=Math.max(b.t,$.t),rt>_e))return!1;if(ot.vertLeq(g,b)){if(ot.edgeSign($,g,b)>0)return!1}else if(ot.edgeSign(j,b,g)<0)return!1;return e.debugEvent(a),ot.intersect(j,g,$,b,st),ht(Math.min(g.t,j.t)<=st.t),ht(st.t<=Math.max(b.t,$.t)),ht(Math.min($.s,j.s)<=st.s),ht(st.s<=Math.max(b.s,g.s)),ot.vertLeq(st,a.event)&&(st.s=a.event.s,st.t=a.event.t),ut=ot.vertLeq(g,b)?g:b,ot.vertLeq(ut,st)&&(st.s=ut.s,st.t=ut.t),ot.vertEq(st,g)||ot.vertEq(st,b)?(e.checkForRightSplice(a,i),!1):!ot.vertEq(j,a.event)&&ot.edgeSign(j,a.event,st)>=0||!ot.vertEq($,a.event)&&ot.edgeSign($,a.event,st)<=0?$===a.event?(a.mesh.splitEdge(c.Sym),a.mesh.splice(d.Sym,c),i=e.topLeftRegion(a,i),c=e.regionBelow(i).eUp,e.finishLeftRegions(a,e.regionBelow(i),o),e.addRightEdges(a,i,c.Oprev,c,c,!0),!0):j===a.event?(a.mesh.splitEdge(d.Sym),a.mesh.splice(c.Lnext,d.Oprev),o=i,i=e.topRightRegion(i),gt=e.regionBelow(i).eUp.Rprev,o.eUp=d.Oprev,d=e.finishLeftRegions(a,o,null),e.addRightEdges(a,i,d.Onext,c.Rprev,gt,!0),!0):(ot.edgeSign(j,a.event,st)>=0&&(e.regionAbove(i).dirty=i.dirty=!0,a.mesh.splitEdge(c.Sym),c.Org.s=a.event.s,c.Org.t=a.event.t),ot.edgeSign($,a.event,st)<=0&&(i.dirty=o.dirty=!0,a.mesh.splitEdge(d.Sym),d.Org.s=a.event.s,d.Org.t=a.event.t),!1):(a.mesh.splitEdge(c.Sym),a.mesh.splitEdge(d.Sym),a.mesh.splice(d.Oprev,c),c.Org.s=st.s,c.Org.t=st.t,c.Org.pqHandle=a.pq.insert(c.Org),e.getIntersectData(a,c.Org,g,j,b,$),e.regionAbove(i).dirty=i.dirty=o.dirty=!0,!1)},e.walkDirtyRegions=function(a,i){for(var o=e.regionBelow(i),c,d;;){for(;o.dirty;)i=o,o=e.regionBelow(o);if(!i.dirty&&(o=i,i=e.regionAbove(i),i===null||!i.dirty))return;if(i.dirty=!1,c=i.eUp,d=o.eUp,c.Dst!==d.Dst&&e.checkForLeftSplice(a,i)&&(o.fixUpperEdge?(e.deleteRegion(a,o),a.mesh.delete(d),o=e.regionBelow(i),d=o.eUp):i.fixUpperEdge&&(e.deleteRegion(a,i),a.mesh.delete(c),i=e.regionAbove(o),c=i.eUp)),c.Org!==d.Org)if(c.Dst!==d.Dst&&!i.fixUpperEdge&&!o.fixUpperEdge&&(c.Dst===a.event||d.Dst===a.event)){if(e.checkForIntersect(a,i))return}else e.checkForRightSplice(a,i);c.Org===d.Org&&c.Dst===d.Dst&&(e.addWinding(d,c),e.deleteRegion(a,i),a.mesh.delete(c),i=e.regionAbove(o))}},e.connectRightVertex=function(a,i,o){var c,d=o.Onext,g=e.regionBelow(i),b=i.eUp,j=g.eUp,$=!1;if(b.Dst!==j.Dst&&e.checkForIntersect(a,i),ot.vertEq(b.Org,a.event)&&(a.mesh.splice(d.Oprev,b),i=e.topLeftRegion(a,i),d=e.regionBelow(i).eUp,e.finishLeftRegions(a,e.regionBelow(i),g),$=!0),ot.vertEq(j.Org,a.event)&&(a.mesh.splice(o,j.Oprev),o=e.finishLeftRegions(a,g,null),$=!0),$){e.addRightEdges(a,i,o.Onext,d,d,!0);return}ot.vertLeq(j.Org,b.Org)?c=j.Oprev:c=b,c=a.mesh.connect(o.Lprev,c),e.addRightEdges(a,i,c,c.Onext,c.Onext,!1),c.Sym.activeRegion.fixUpperEdge=!0,e.walkDirtyRegions(a,i)},e.connectLeftDegenerate=function(a,i,o){var c,d,g,b,j;if(c=i.eUp,ot.vertEq(c.Org,o)){ht(!1),e.spliceMergeVertices(a,c,o.anEdge);return}if(!ot.vertEq(c.Dst,o)){a.mesh.splitEdge(c.Sym),i.fixUpperEdge&&(a.mesh.delete(c.Onext),i.fixUpperEdge=!1),a.mesh.splice(o.anEdge,c),e.sweepEvent(a,o);return}ht(!1),i=e.topRightRegion(i),j=e.regionBelow(i),g=j.eUp.Sym,d=b=g.Onext,j.fixUpperEdge&&(ht(d!==g),e.deleteRegion(a,j),a.mesh.delete(g),g=d.Oprev),a.mesh.splice(o.anEdge,g),ot.edgeGoesLeft(d)||(d=null),e.addRightEdges(a,i,g.Onext,b,d,!0)},e.connectLeftVertex=function(a,i){var o,c,d,g,b,j,$=new bA;if($.eUp=i.anEdge.Sym,o=a.dict.search($).key,c=e.regionBelow(o),!!c){if(g=o.eUp,b=c.eUp,ot.edgeSign(g.Dst,i,g.Org)===0){e.connectLeftDegenerate(a,o,i);return}if(d=ot.vertLeq(b.Dst,g.Dst)?o:c,o.inside||d.fixUpperEdge){if(d===o)j=a.mesh.connect(i.anEdge.Sym,g.Lnext);else{var rt=a.mesh.connect(b.Dnext,i.anEdge);j=rt.Sym}d.fixUpperEdge?e.fixUpperEdge(a,d,j):e.computeWinding(a,e.addRegionBelow(a,o,j)),e.sweepEvent(a,i)}else e.addRightEdges(a,o,i.anEdge,i.anEdge,null,!0)}},e.sweepEvent=function(a,i){a.event=i,e.debugEvent(a);for(var o=i.anEdge;o.activeRegion===null;)if(o=o.Onext,o===i.anEdge){e.connectLeftVertex(a,i);return}var c=e.topLeftRegion(a,o.activeRegion);ht(c!==null);var d=e.regionBelow(c),g=d.eUp,b=e.finishLeftRegions(a,d,null);b.Onext===g?e.connectRightVertex(a,c,b):e.addRightEdges(a,c,b.Onext,g,g,!0)},e.addSentinel=function(a,i,o,c){var d=new bA,g=a.mesh.makeEdge();g.Org.s=o,g.Org.t=c,g.Dst.s=i,g.Dst.t=c,a.event=g.Dst,d.eUp=g,d.windingNumber=0,d.inside=!1,d.fixUpperEdge=!1,d.sentinel=!0,d.dirty=!1,d.nodeUp=a.dict.insert(d)},e.initEdgeDict=function(a){a.dict=new g7(a,e.edgeLeq);var i=a.bmax[0]-a.bmin[0],o=a.bmax[1]-a.bmin[1],c=a.bmin[0]-i,d=a.bmax[0]+i,g=a.bmin[1]-o,b=a.bmax[1]+o;e.addSentinel(a,c,d,g),e.addSentinel(a,c,d,b)},e.doneEdgeDict=function(a){for(var i,o=0;(i=a.dict.min().key)!==null;)i.sentinel||(ht(i.fixUpperEdge),ht(++o===1)),ht(i.windingNumber===0),e.deleteRegion(a,i)},e.removeDegenerateEdges=function(a){var i,o,c,d=a.mesh.eHead;for(i=d.next;i!==d;i=o)o=i.next,c=i.Lnext,ot.vertEq(i.Org,i.Dst)&&i.Lnext.Lnext!==i&&(e.spliceMergeVertices(a,c,i),a.mesh.delete(i),i=c,c=i.Lnext),c.Lnext===i&&(c!==i&&((c===o||c===o.Sym)&&(o=o.next),a.mesh.delete(c)),(i===o||i===o.Sym)&&(o=o.next),a.mesh.delete(i))},e.initPriorityQ=function(a){var i,o,c,d=0;for(c=a.mesh.vHead,o=c.next;o!==c;o=o.next)d++;for(d+=8,i=a.pq=new m7(d,ot.vertLeq),c=a.mesh.vHead,o=c.next;o!==c;o=o.next)o.pqHandle=i.insert(o);return o!==c?!1:(i.init(),!0)},e.donePriorityQ=function(a){a.pq=null},e.removeDegenerateFaces=function(a,i){var o,c,d;for(o=i.fHead.next;o!==i.fHead;o=c)c=o.next,d=o.anEdge,ht(d.Lnext!==d),d.Lnext.Lnext===d&&(e.addWinding(d.Onext,d),a.mesh.delete(d));return!0},e.computeInterior=function(a,i){i===void 0&&(i=!0);var o,c;if(e.removeDegenerateEdges(a),!e.initPriorityQ(a))return!1;for(e.initEdgeDict(a);(o=a.pq.extractMin())!==null;){for(;c=a.pq.min(),!(c===null||!ot.vertEq(c,o));)c=a.pq.extractMin(),e.spliceMergeVertices(a,o.anEdge,c.anEdge);e.sweepEvent(a,o)}return a.event=a.dict.min().key.eUp.Org,e.debugEvent(a),e.doneEdgeDict(a),e.donePriorityQ(a),e.removeDegenerateFaces(a,a.mesh)?(i&&a.mesh.check(),!0):!1},e}(),v7=function(){function e(){this.mesh=new tI,this.normal=[0,0,0],this.sUnit=[0,0,0],this.tUnit=[0,0,0],this.bmin=[0,0],this.bmax=[0,0],this.windingRule=Gt.ODD,this.dict=null,this.pq=null,this.event=null,this.vertexIndexCounter=0,this.vertices=[],this.vertexIndices=[],this.vertexCount=0,this.elements=[],this.elementCount=0}return e.prototype.dot_=function(a,i){return a[0]*i[0]+a[1]*i[1]+a[2]*i[2]},e.prototype.normalize_=function(a){var i=a[0]*a[0]+a[1]*a[1]+a[2]*a[2];if(!i)throw"Zero-size vector!";i=Math.sqrt(i),a[0]/=i,a[1]/=i,a[2]/=i},e.prototype.longAxis_=function(a){var i=0;return Math.abs(a[1])>Math.abs(a[0])&&(i=1),Math.abs(a[2])>Math.abs(a[i])&&(i=2),i},e.prototype.computeNormal_=function(a){var i,o,c,d,g,b,j=[0,0,0],$=[0,0,0],rt=[0,0,0],_e=[0,0,0],st=[0,0,0],ut=[null,null,null],gt=[null,null,null],yt=this.mesh.vHead;i=yt.next;for(var Pt=0;Pt<3;++Pt)d=i.coords[Pt],$[Pt]=d,gt[Pt]=i,j[Pt]=d,ut[Pt]=i;for(i=yt.next;i!==yt;i=i.next)for(var wt=0;wt<3;++wt)d=i.coords[wt],d<$[wt]&&($[wt]=d,gt[wt]=i),d>j[wt]&&(j[wt]=d,ut[wt]=i);var Ct=0;if(j[1]-$[1]>j[0]-$[0]&&(Ct=1),j[2]-$[2]>j[Ct]-$[Ct]&&(Ct=2),$[Ct]>=j[Ct]){a[0]=0,a[1]=0,a[2]=1;return}for(b=0,o=gt[Ct],c=ut[Ct],rt[0]=o.coords[0]-c.coords[0],rt[1]=o.coords[1]-c.coords[1],rt[2]=o.coords[2]-c.coords[2],i=yt.next;i!==yt;i=i.next)_e[0]=i.coords[0]-c.coords[0],_e[1]=i.coords[1]-c.coords[1],_e[2]=i.coords[2]-c.coords[2],st[0]=rt[1]*_e[2]-rt[2]*_e[1],st[1]=rt[2]*_e[0]-rt[0]*_e[2],st[2]=rt[0]*_e[1]-rt[1]*_e[0],g=st[0]*st[0]+st[1]*st[1]+st[2]*st[2],g>b&&(b=g,a[0]=st[0],a[1]=st[1],a[2]=st[2]);b<=0&&(a[0]=a[1]=a[2]=0,a[this.longAxis_(rt)]=1)},e.prototype.checkOrientation_=function(){for(var a=this.mesh.fHead,i,o=this.mesh.vHead,c,d=0,g=a.next;g!==a;g=g.next)if(c=g.anEdge,!(c.winding<=0))do d+=(c.Org.s-c.Dst.s)*(c.Org.t+c.Dst.t),c=c.Lnext;while(c!==g.anEdge);if(d<0){for(i=o.next;i!==o;i=i.next)i.t=-i.t;this.tUnit[0]=-this.tUnit[0],this.tUnit[1]=-this.tUnit[1],this.tUnit[2]=-this.tUnit[2]}},e.prototype.projectPolygon_=function(){var a=this.mesh.vHead,i=[0,0,0],o,c,d=!1;i[0]=this.normal[0],i[1]=this.normal[1],i[2]=this.normal[2],!i[0]&&!i[1]&&!i[2]&&(this.computeNormal_(i),d=!0),o=this.sUnit,c=this.tUnit;var g=this.longAxis_(i);o[g]=0,o[(g+1)%3]=1,o[(g+2)%3]=0,c[g]=0,c[(g+1)%3]=0,c[(g+2)%3]=i[g]>0?1:-1;for(var b=a.next;b!==a;b=b.next)b.s=this.dot_(b.coords,o),b.t=this.dot_(b.coords,c);d&&this.checkOrientation_();for(var j=!0,$=a.next;$!==a;$=$.next)j?(this.bmin[0]=this.bmax[0]=$.s,this.bmin[1]=this.bmax[1]=$.t,j=!1):($.s<this.bmin[0]&&(this.bmin[0]=$.s),$.s>this.bmax[0]&&(this.bmax[0]=$.s),$.t<this.bmin[1]&&(this.bmin[1]=$.t),$.t>this.bmax[1]&&(this.bmax[1]=$.t))},e.prototype.addWinding_=function(a,i){a.winding+=i.winding,a.Sym.winding+=i.Sym.winding},e.prototype.tessellateMonoRegion_=function(a,i){var o,c;if(o=i.anEdge,!(o.Lnext!==o&&o.Lnext.Lnext!==o))throw"Mono region invalid";for(;ot.vertLeq(o.Dst,o.Org);o=o.Lprev);for(;ot.vertLeq(o.Org,o.Dst);o=o.Lnext);c=o.Lprev;for(var d=void 0;o.Lnext!==c;)if(ot.vertLeq(o.Dst,c.Org)){for(;c.Lnext!==o&&(ot.edgeGoesLeft(c.Lnext)||ot.edgeSign(c.Org,c.Dst,c.Lnext.Dst)<=0);)d=a.connect(c.Lnext,c),c=d.Sym;c=c.Lprev}else{for(;c.Lnext!==o&&(ot.edgeGoesRight(o.Lprev)||ot.edgeSign(o.Dst,o.Org,o.Lprev.Org)>=0);)d=a.connect(o,o.Lprev),o=d.Sym;o=o.Lnext}if(c.Lnext===o)throw"Mono region invalid";for(;c.Lnext.Lnext!==o;)d=a.connect(c.Lnext,c),c=d.Sym;return!0},e.prototype.tessellateInterior_=function(a){for(var i,o=a.fHead.next;o!==a.fHead;o=i)if(i=o.next,o.inside&&!this.tessellateMonoRegion_(a,o))return!1;return!0},e.prototype.discardExterior_=function(a){for(var i,o=a.fHead.next;o!==a.fHead;o=i)i=o.next,o.inside||a.zapFace(o)},e.prototype.setWindingNumber_=function(a,i,o){for(var c,d=a.eHead.next;d!==a.eHead;d=c)c=d.next,d.Rface.inside!==d.Lface.inside?d.winding=d.Lface.inside?i:-i:o?a.delete(d):d.winding=0},e.prototype.getNeighbourFace_=function(a){return!a.Rface||!a.Rface.inside?-1:a.Rface.n},e.prototype.outputPolymesh_=function(a,i,o,c){var d,g=0,b=0,j;o>3&&a.mergeConvexFaces(o);for(var $=a.vHead.next;$!==a.vHead;$=$.next)$.n=-1;for(var rt=a.fHead.next;rt!==a.fHead;rt=rt.next)if(rt.n=-1,!!rt.inside){d=rt.anEdge,j=0;do{var $=d.Org;$.n===-1&&($.n=b,b++),j++,d=d.Lnext}while(d!==rt.anEdge);if(j>o)throw"Face vertex greater that support polygon";rt.n=g,++g}this.elementCount=g,i===Wr$1.CONNECTED_POLYGONS&&(g*=2),this.elements=[],this.elements.length=g*o,this.vertexCount=b,this.vertices=[],this.vertices.length=b*c,this.vertexIndices=[],this.vertexIndices.length=b;for(var $=a.vHead.next;$!==a.vHead;$=$.next)if($.n!==-1){var _e=$.n*c;this.vertices[_e+0]=$.coords[0],this.vertices[_e+1]=$.coords[1],c>2&&(this.vertices[_e+2]=$.coords[2]),this.vertexIndices[$.n]=$.idx}for(var st=0,rt=a.fHead.next;rt!==a.fHead;rt=rt.next)if(rt.inside){d=rt.anEdge,j=0;do{var $=d.Org;this.elements[st++]=$.n,j++,d=d.Lnext}while(d!==rt.anEdge);for(var ut=j;ut<o;++ut)this.elements[st++]=-1;if(i===Wr$1.CONNECTED_POLYGONS){d=rt.anEdge;do this.elements[st++]=this.getNeighbourFace_(d),d=d.Lnext;while(d!==rt.anEdge);for(var gt=j;gt<o;++gt)this.elements[st++]=-1}}},e.prototype.outputContours_=function(a,i){var o,c,d=0,g=0;this.vertexCount=0,this.elementCount=0;for(var b=a.fHead.next;b!==a.fHead;b=b.next)if(b.inside){c=o=b.anEdge;do this.vertexCount++,o=o.Lnext;while(o!==c);this.elementCount++}this.elements=[],this.elements.length=this.elementCount*2,this.vertices=[],this.vertices.length=this.vertexCount*i,this.vertexIndices=[],this.vertexIndices.length=this.vertexCount;var j=0,$=0,rt=0;d=0;for(var b=a.fHead.next;b!==a.fHead;b=b.next)if(b.inside){g=0,c=o=b.anEdge;do this.vertices[j++]=o.Org.coords[0],this.vertices[j++]=o.Org.coords[1],i>2&&(this.vertices[j++]=o.Org.coords[2]),this.vertexIndices[$++]=this.vertexIdCallback?this.vertexIdCallback(o):o.Org.idx,g++,o=o.Lnext;while(o!==c);this.elements[rt++]=d,this.elements[rt++]=g,d+=g}},e.prototype.addContour=function(a,i){this.mesh===null&&(this.mesh=new tI),a<2&&(a=2),a>3&&(a=3);for(var o=null,c=0;c<i.length;c+=a)o===null?(o=this.mesh.makeEdge(),this.mesh.splice(o,o.Sym)):(this.mesh.splitEdge(o),o=o.Lnext),o.Org.coords[0]=i[c+0],o.Org.coords[1]=i[c+1],a>2?o.Org.coords[2]=i[c+2]:o.Org.coords[2]=0,o.Org.idx=this.vertexIndexCounter++,this.edgeCreateCallback&&this.edgeCreateCallback(o),o.winding=1,o.Sym.winding=-1},e.prototype.tesselate=function(a,i,o,c,d,g){if(a===void 0&&(a=Gt.ODD),i===void 0&&(i=Wr$1.POLYGONS),g===void 0&&(g=!0),this.vertices=[],this.elements=[],this.vertexIndices=[],this.vertexIndexCounter=0,d&&(this.normal[0]=d[0],this.normal[1]=d[1],this.normal[2]=d[2]),this.windingRule=a,c<2&&(c=2),c>3&&(c=3),!this.mesh)return!1;this.projectPolygon_(),y7.computeInterior(this,g);var b=this.mesh;return i===Wr$1.BOUNDARY_CONTOURS?this.setWindingNumber_(b,1,!0):this.tessellateInterior_(b),g&&b.check(),i===Wr$1.BOUNDARY_CONTOURS?this.outputContours_(b,c):this.outputPolymesh_(b,i,o,c),!0},e}();function ro(e){var a=e.windingRule,i=a===void 0?Gt.ODD:a,o=e.elementType,c=o===void 0?Wr$1.POLYGONS:o,d=e.polySize,g=d===void 0?3:d,b=e.vertexSize,j=b===void 0?2:b,$=e.normal,rt=$===void 0?[0,0,1]:$,_e=e.contours,st=_e===void 0?[]:_e,ut=e.strict,gt=ut===void 0?!0:ut,yt=e.debug,Pt=yt===void 0?!1:yt;if(!st&&gt)throw new Error("Contours can't be empty");if(st){var wt=new v7;e.edgeCreateCallback&&(wt.edgeCreateCallback=e.edgeCreateCallback),e.vertexIdCallback&&(wt.vertexIdCallback=e.vertexIdCallback);for(var Ct=0;Ct<st.length;Ct++)wt.addContour(j||2,st[Ct]);return wt.tesselate(i,c,g,j,rt,gt),{vertices:wt.vertices,vertexIndices:wt.vertexIndices,vertexCount:wt.vertexCount,elements:wt.elements,elementCount:wt.elementCount,mesh:Pt?wt.mesh:void 0}}}Gt.ODD;Gt.NONZERO;Gt.POSITIVE;Gt.NEGATIVE;Gt.ABS_GEQ_TWO;Wr$1.POLYGONS;Wr$1.CONNECTED_POLYGONS;Wr$1.BOUNDARY_CONTOURS;var L0=class{constructor(e=256,a=!1){this.capacity=e,this.size=0,this.debug=a,this.debug&&console.log(`allocating with cap ${e}`);let i=e*L0.eSize;this.buffer=new ArrayBuffer(i);let o=Float32Array.BYTES_PER_ELEMENT,c=0;this.positions=new Float32Array(this.buffer,c*o,3*e),c+=3*e,this.normals=new Float32Array(this.buffer,c*o,3*e),c+=3*e,this.uvs=new Float32Array(this.buffer,c*o,2*e)}realloc(e,a=!1){if(e<this.size)throw Error("cannot shrink buffer");if(e<=this.capacity&&!a)return;this.debug&&console.log(`resizing from ${this.capacity} → ${e}`);let i=e*L0.eSize,o=new ArrayBuffer(i),c=Float32Array.BYTES_PER_ELEMENT,d=0,g=new Float32Array(o,d*c,3*e);d+=3*e;let b=new Float32Array(o,d*c,3*e);d+=3*e;let j=new Float32Array(o,d*c,2*e);a?(g.set(this.positions.subarray(0,this.size*3)),b.set(this.normals.subarray(0,this.size*3)),j.set(this.uvs.subarray(0,this.size*2))):(g.set(this.positions),b.set(this.normals),j.set(this.uvs)),this.buffer=o,this.positions=g,this.normals=b,this.uvs=j,this.capacity=e}get(e=1){let a=this.size+e;if(a>this.capacity){let o=this.capacity;for(;a>o;)o*=2;this.realloc(o)}let i=this.size;return this.size=a,i}reserve(e){let a=this.size+e;a>this.capacity&&this.realloc(a)}shrink(){this.debug&&console.log(`shrinking ${this.capacity} → ${this.size}`),this.realloc(this.size,!0)}},wm=L0;wm.eSize=8*Float32Array.BYTES_PER_ELEMENT;var lI=pi(aI()),Am={vertices:[160,160,-160,160,-160,-160,160,-160],vertexIndices:[1,0,3,2],vertexCount:4,elements:[0,4],elementCount:1,mesh:void 0},EA={vertices:[],vertexIndices:[],vertexCount:0,elements:[],elementCount:0,mesh:void 0},TA={vertices:[-160,160,160,-160,160,160,-160,-160],vertexIndices:[1,3,0,2],vertexCount:4,elements:[0,1,2,1,0,3],elementCount:2,mesh:void 0},_A=(e,a)=>([i,o])=>(o<i&&(o+=a),(e>=i?e:e+a)<=o),Hl=class extends Pe{constructor(e,a,i=0,o=12,c=3,d=Gt.ODD,g=!1){super(),this.forPathBevel=g,this.type="ShapeGeometry",this.vertexCache={},this._shape=e,this._depth=a,this._curveSegments=o,this._bevelSegmentsInput=c;let b=this._shape.extractShapePointsToFlatArray([],o),j=this._shape.shapeHoles.map(Nt=>{let Ht=Nt.extractShapePointsToFlatArray([],o),Gr=[];for(let hs=Ht.length-1;hs>=1;hs-=2){let _s=Ht[hs-1],hn=Ht[hs-0];Gr.push(_s,hn)}return Gr}),$=[],rt=[];for(let Nt=0;Nt<b.length;Nt+=2)rt.push([b[Nt],b[Nt+1]]);$.push(rt);for(let Nt=0;Nt<j.length;Nt++){let Ht=j[Nt],Gr=[];for(let hs=0;hs<Ht.length;hs+=2)Gr.push([Ht[hs],Ht[hs+1]]);$.push(Gr)}let _e;e.isText?_e=new lh().setFromPoints(e.points.map(Nt=>Nt.position)).getSize(new z$2).length()*.1:$[0].length===0?_e=i:_e=(0,lI.default)($).distance,i<=0?(this._bevel=0,this._bevelSegments=0):(this._bevel=Math.min(i,_e,a/2),this._bevelSegments=Math.floor(c));let st;try{st=ro({windingRule:d,elementType:Wr$1.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[b]})}catch{st=Am}let ut;try{ut=ro({windingRule:Gt.ODD,elementType:Wr$1.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...j]})}catch{ut=EA}if(!st)throw new Error("error generating geometry");let gt=st.elementCount;if(ut){st.elementCount+=ut.elementCount;for(let Nt=0;Nt<ut.elements.length;Nt++){let Ht=ut.elements[Nt],Gr=Nt%2===0?st.vertexCount:0;st.elements.push(Ht+Gr)}for(let Nt=0;Nt<ut.vertexIndices.length;Nt++){let Ht=ut.vertexIndices[Nt],Gr=st.vertexCount;st.vertexIndices.push(Ht+Gr)}for(let Nt=0;Nt<ut.vertices.length;Nt++){let Ht=ut.vertices[Nt];st.vertices.push(Ht)}}let yt=1/0,Pt=-1/0,wt=1/0,Ct=-1/0;for(let Nt=0,Ht=st.vertexCount;Nt<Ht;Nt++){let Gr=Nt*2,hs=st.vertices[Gr+0],_s=st.vertices[Gr+1];hs<yt&&(yt=hs),hs>Pt&&(Pt=hs),_s<wt&&(wt=_s),_s>Ct&&(Ct=_s)}this._minX=yt,this._minY=wt,this._width=Pt-yt,this._height=Ct-wt,this._buffer=new wm(this._computeBufferEstimatedSize(st));let At=[],Tt=[];for(let Nt=st.elementCount-1;Nt>=0;Nt--){let Ht=Nt>=gt,Gr=Nt*2,hs=st.elements[Gr+0],_s=st.elements[Gr+1],hn=hs+_s,Qn={start:hs,count:_s,normals:[],continuous:[],concave:[]},ds=hs,un=hn-1,dr=hs+1,us=this._shape.roundedCurves.length;do{let au=ds-hs,Vv=st.vertices[un*2+0],wu=st.vertices[un*2+1],a1=st.vertices[ds*2+0],P0=st.vertices[ds*2+1],B0=st.vertices[dr*2+0],q1=st.vertices[dr*2+1],ox=a1-Vv,N_=P0-wu,eS=Math.sqrt(ox*ox+N_*N_);ox/=eS,N_/=eS;let tS=a1-B0,tA=P0-q1,aR=Math.sqrt(tS*tS+tA*tA);tS/=aR,tA/=aR,Qn.normals[au*2+0]=-tA,Qn.normals[au*2+1]=tS,Qn.concave[au]=ox*tA-N_*tS>0;let sR=st.vertexIndices[ds];if(Array.isArray(sR))Qn.continuous[au]=!1;else{let[AA,SA]=this._shape.getCurveIndexFromVertexId(sR-1,!0);if(SA>0&&SA<1)Qn.continuous[au]=!0;else{let IO=SA===1?AA+1:AA-1;IO=(IO+us)%us;let pO=SA===1?0:1,Su=this._shape.roundedCurves[AA].getTangent(SA),mu=this._shape.roundedCurves[IO].getTangent(pO);Qn.continuous[au]=Su.dot(mu)>.95}}Ht&&(Qn.normals[au*2+0]*=-1,Qn.normals[au*2+1]*=-1),[un,ds,dr]=[ds,dr,dr+1],dr>=hn&&(dr-=_s)}while(dr!==hs+1);let Nn=[];Nn.push({bevelI:0,angle:0,size:0,boundary:{vertices:st.vertices.slice(hs*2,hn*2),vertexCount:_s,vertexIndices:new Array(_s).fill(!0).map((au,Vv)=>[Vv,Vv]),elements:[0,_s],elementCount:1,mesh:null},reverseMap:[],insetPoints:st.vertices.slice(hs*2,hn*2)});let gn=0;for(let au=1;au<=this._bevelSegments;au++){let Vv=au/this._bevelSegments*Math.PI/2,wu=(1-Math.cos(Vv))*this._bevel,a1=[],P0=[],B0=0;for(let ox=0;ox<_s;ox++){let N_=ox*2,eS=(ox-1+_s)%_s*2,tS=st.vertices[Qn.start*2+N_+0],tA=st.vertices[Qn.start*2+N_+1],aR=-Qn.normals[eS+0]*wu,sR=-Qn.normals[eS+1]*wu,AA=-Qn.normals[N_+0]*wu,SA=-Qn.normals[N_+1]*wu;if(Qn.concave[ox]||!Qn.concave[ox]&&Ht){let IO=Math.atan2(sR,aR),pO=Math.atan2(SA,AA);pO>IO&&(pO-=Math.PI*2);let Su=pO-IO;if(Qn.continuous[ox]||Ht){let mu=IO+Su/2,ax=Math.cos(mu)*wu,tE=Math.sin(mu)*wu;a1[2*B0+0]=tS+ax*(Ht?-1:1),a1[2*B0+1]=tA+tE*(Ht?-1:1),P0[B0]=ox,B0++}else{let mu=Math.max(1,Math.floor(o/4*Math.abs(Su)/Math.PI));for(let ax=0;ax<=mu;ax++){let tE=IO+Su*(ax/mu),So=Math.cos(tE)*wu,fD=Math.sin(tE)*wu;a1[2*B0+0]=tS+So,a1[2*B0+1]=tA+fD,P0[B0]=ox,B0++}}}else a1[2*B0+0]=tS+aR,a1[2*B0+1]=tA+sR,P0[B0]=ox,B0++,a1[2*B0+0]=tS,a1[2*B0+1]=tA,P0[B0]=ox,B0++,a1[2*B0+0]=tS+AA,a1[2*B0+1]=tA+SA,P0[B0]=ox,B0++}let q1=ro({windingRule:Gt.POSITIVE,elementType:Wr$1.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[a1],edgeCreateCallback:ox=>{let N_=ox.Org.idx,eS=P0[N_],tS=P0[(N_+1)%P0.length];ox.idx=[eS,tS],ox.Sym.idx=[tS,eS]},vertexIdCallback:ox=>{let N_=ox.Lprev.idx;return[N_?N_[1]:0,ox.idx?ox.idx[0]:0]}});if(!q1)throw console.log("Error"),new Error(`error generating bevel geometry for ${au}'th loop`);if(!q1.vertexCount){let ox=(au-1)/this._bevelSegments*Math.PI/2;gn=(1-Math.sin(ox))*this._bevel;break}for(let ox=0;ox<q1.vertexIndices.length;ox++){let[N_,eS]=q1.vertexIndices[ox];if(N_===eS)continue;let tS=eS;eS<N_&&(tS+=_s);for(let tA=N_;tA<tS;tA++){let aR=tA%_s,sR=(tA+1)%_s;if(!Qn.continuous[aR]||!Qn.continuous[sR]){q1.vertexIndices[ox]=[N_,aR],q1.vertexIndices.splice(ox+1,0,[sR,eS]),q1.vertices.splice((ox+1)*2,0,q1.vertices[ox*2],q1.vertices[ox*2+1]);break}}}Nn.push({bevelI:au,angle:Vv,size:wu,boundary:q1,reverseMap:P0,insetPoints:a1})}let Zn=(au,Vv,wu)=>{let a1=0,P0=au.boundary.vertexIndices.length;for(;a1<P0&&wu(au.boundary.vertexIndices[Vv]);)Vv=(Vv+1)%P0,a1++;return a1},xu=At.length;for(let au=1;au<Nn.length;au++){let Vv=Nn[au-1],wu=Nn[au],a1=Vv.boundary.vertexIndices.length,P0=wu.boundary.vertexIndices.length;if(!a1||!P0)break;let B0=Qn.concave.length,q1=0,ox=_A(q1,_s);for(;!Vv.boundary.vertexIndices.filter(ox).length||!wu.boundary.vertexIndices.filter(ox).length;)q1++,ox=_A(q1,_s);let N_=Vv.boundary.vertexIndices.findIndex(ox),eS=wu.boundary.vertexIndices.findIndex(ox);do N_=(N_+1)%a1;while(ox(Vv.boundary.vertexIndices[N_]));do eS=(eS+1)%P0;while(ox(wu.boundary.vertexIndices[eS]));q1=(q1+1)%_s;let tS=q1,tA=0,aR=this._buildBevelVert(Qn,Vv,(N_-1+a1)%a1,void 0,tA),sR=this._buildBevelVert(Qn,wu,(eS-1+P0)%P0,void 0,tA),AA=aR,SA=sR,IO,pO,Su=!1;do{tA=(q1||B0)/B0,ox=_A(q1,_s);let mu=Zn(Vv,N_,ox),ax=Zn(wu,eS,ox),tE=Su;if(Su=!1,mu&&!ax){for(let So=0;So<mu;So++)IO=this._buildBevelVert(Qn,Vv,(N_+So)%a1,So/(mu-1),tA),At.push(AA.topN,IO.topP,SA.topN),g===!1&&At.push(IO.bottomP,AA.bottomN,SA.bottomN),AA=IO;Su=!0}else if(!mu&&ax)for(let So=0;So<ax;So++)pO=this._buildBevelVert(Qn,wu,(eS+So)%P0,So/(ax-1),tA),At.push(SA.topN,AA.topP,pO.topP),g===!1&&At.push(AA.bottomP,SA.bottomN,pO.bottomP),SA=pO;else if(mu&&ax)if(IO=this._buildBevelVert(Qn,Vv,N_,0,tA),pO=this._buildBevelVert(Qn,wu,eS,0,tA),tE?(At.push(AA.topN,pO.topP,SA.topN),At.push(AA.topN,IO.topP,pO.topP),g===!1&&(At.push(pO.bottomP,AA.bottomN,SA.bottomN),At.push(pO.bottomP,IO.bottomP,AA.bottomN))):(At.push(SA.topN,AA.topN,IO.topP),At.push(SA.topN,IO.topP,pO.topP),g===!1&&(At.push(IO.bottomP,AA.bottomN,SA.bottomN),At.push(IO.bottomP,SA.bottomN,pO.bottomP))),AA=IO,SA=pO,mu===ax)for(let So=1;So<mu;So++)IO=this._buildBevelVert(Qn,Vv,(N_+So)%a1,So/(mu-1),tA),pO=this._buildBevelVert(Qn,wu,(eS+So)%P0,So/(ax-1),tA),At.push(AA.topN,IO.topP,SA.topN),At.push(SA.topN,IO.topP,pO.topP),g===!1&&(At.push(IO.bottomP,AA.bottomN,SA.bottomN),At.push(IO.bottomP,SA.bottomN,pO.bottomP)),AA=IO,SA=pO;else if(mu>ax){let So=mu/ax,fD=0;for(let C3=1;C3<mu;C3++)IO=this._buildBevelVert(Qn,Vv,(N_+C3)%a1,C3/(mu-1),tA),At.push(AA.topN,IO.topP,SA.topN),g===!1&&At.push(IO.bottomP,AA.bottomN,SA.bottomN),AA=IO,C3>(fD+1)*So&&(fD++,pO=this._buildBevelVert(Qn,wu,(eS+fD)%P0,fD/(ax-1),tA),At.push(SA.topN,IO.topP,pO.topP),g===!1&&At.push(IO.bottomP,SA.bottomN,pO.bottomP),SA=pO)}else{let So=ax/mu,fD=0;for(let C3=1;C3<ax;C3++)pO=this._buildBevelVert(Qn,wu,(eS+C3)%P0,C3/(ax-1),tA),At.push(SA.topN,IO.topP,pO.topP),g===!1&&At.push(IO.bottomP,SA.bottomN,pO.bottomP),SA=pO,C3>(fD+1)*So&&(fD++,IO=this._buildBevelVert(Qn,Vv,(N_+fD)%a1,fD/(mu-1),tA),At.push(AA.topN,IO.topP,SA.topN),g===!1&&At.push(IO.bottomP,AA.bottomN,SA.bottomN),AA=IO)}N_=(N_+mu)%a1,eS=(eS+ax)%P0,q1=(q1+1)%B0}while(q1!==tS)}if(g===!1&&this._depth>this._bevel*2&&this._buildWall(Nn,Qn,At),Ht){let au=[];for(let Vv=At.length-1;Vv>=xu+2;Vv-=3){let wu=At[Vv-2],a1=At[Vv-1],P0=At[Vv-0];au.push(P0,a1,wu)}At.splice(xu,At.length-xu,...au)}if(Ht){let au=[];for(let Vv=Nn[Nn.length-1].boundary.vertices.length-1;Vv>=1;Vv-=2){let wu=Nn[Nn.length-1].boundary.vertices[Vv-1],a1=Nn[Nn.length-1].boundary.vertices[Vv-0];au.push(wu,a1)}Tt.push(au)}if(!Ht){let au=Nn[Nn.length-1],Vv;try{Vv=ro({windingRule:Nn.length>1?Gt.POSITIVE:Gt.ODD,elementType:Wr$1.POLYGONS,vertexSize:2,strict:!0,contours:[au.insetPoints,...Tt]})}catch{Vv=TA}if(!Vv)throw new Error("Error generating geometry for surface");j.length===0&&this._bevel<_e&&Object.assign(this,{useNgonForTopBottomFaceDuringBake:!0});for(let wu=0;wu<Vv.elementCount*3;wu+=3){let a1=this._buildSurfaceVert(Vv,Vv.elements[wu+0],gn),P0=this._buildSurfaceVert(Vv,Vv.elements[wu+1],gn),B0=this._buildSurfaceVert(Vv,Vv.elements[wu+2],gn);At.push(a1.top,P0.top,B0.top),g===!1&&At.push(B0.bottom,P0.bottom,a1.bottom)}}this.vertexCache={}}this._buffer.shrink();let kt=new Xe(Uint32Array.from(At),1),It=new Xe(this._buffer.positions,3),Lt=new Xe(this._buffer.normals,3),Ft=new Xe(this._buffer.uvs,2);It.needsUpdate=!0,Lt.needsUpdate=!0,Ft.needsUpdate=!0,kt.needsUpdate=!0,this.setAttribute("position",It),this.setAttribute("normal",Lt),this.setAttribute("uv",Ft),this.setIndex(kt)}_computeBufferEstimatedSize(e){return e.vertexCount*2*(2+this._bevelSegments)}_buildWall(e,a,i){let o=e[0];for(let c=0,d=o.boundary.vertexCount;c<d;c++){let g=this._buildBevelVert(a,o,c),b=this._buildBevelVert(a,o,(c+1)%d);i.push(b.topP,g.topN,g.bottomN),i.push(b.topP,g.bottomN,b.bottomP)}}_buildSurfaceVert(e,a,i){let o=a.toString();if(o in this.vertexCache)return this.vertexCache[o];let c=e.vertices[a*2+0],d=e.vertices[a*2+1],g=(c-this._minX)/this._width,b=(d-this._minY)/this._height;this.forPathBevel&&(b=1);let j=this._buffer.get(this.forPathBevel?1:2),$=j*3,rt=j*2,_e={top:j+0,bottom:j+1};return this._buffer.positions[$+0]=c,this._buffer.positions[$+1]=d,this._buffer.positions[$+2]=this.forPathBevel?this._bevel:this._depth-i,this._buffer.normals[$+0]=0,this._buffer.normals[$+1]=0,this._buffer.normals[$+2]=1,this._buffer.uvs[rt+0]=g,this._buffer.uvs[rt+1]=b,this.forPathBevel===!1&&(this._buffer.positions[$+3]=c,this._buffer.positions[$+4]=d,this._buffer.positions[$+5]=i,this._buffer.normals[$+3]=0,this._buffer.normals[$+4]=0,this._buffer.normals[$+5]=-1,this._buffer.uvs[rt+2]=g,this._buffer.uvs[rt+3]=b),this.vertexCache[o]=_e,_e}_buildBevelVert(e,a,i,o=1,c){let d=`${a.bevelI}:${i}`;if(d in this.vertexCache&&c!==0&&c!==1&&(!c||c===this.vertexCache[d].pathBevelUCoord))return this.vertexCache[d];let[g,b]=a.boundary.vertexIndices[i],j,$,rt,_e;g!==b?($=g,j=b,_e=!1,rt=e.continuous[$]&&e.continuous[j]):(j=g,$=(j-1+e.count)%e.count,_e=e.concave[j]&&a.bevelI>0,rt=e.continuous[j]||_e);let st=Math.cos(a.angle),ut=Math.sin(a.angle),gt=i*2,yt=j*2,Pt=$*2,wt=a.boundary.vertices[gt+0],Ct=a.boundary.vertices[gt+1],At=(1-ut)*this._bevel,Tt=(wt-this._minX)/this._width,kt=(Ct-this._minY)/this._height;this.forPathBevel&&(c!==void 0&&(Tt=c),kt=1);let It=e.normals[yt+0],Lt=e.normals[yt+1],Ft=e.normals[Pt+0],Nt=e.normals[Pt+1];if(_e){let hn=Ft-It,Qn=Nt-Lt;It=It+hn*(1-o),Lt=Lt+Qn*(1-o);let ds=Math.sqrt(It*It+Lt*Lt);It/=ds,Lt/=ds}let Ht=this.forPathBevel?this._buffer.get(rt?1:2):this._buffer.get(rt?2:4),Gr=Ht*3,hs=Ht*2,_s={i,fi:j,topP:Ht+0,topN:Ht+0,bottomP:Ht+1,bottomN:Ht+1,pathBevelUCoord:c};return this._buffer.positions[Gr+0]=wt,this._buffer.positions[Gr+1]=Ct,this._buffer.positions[Gr+2]=(this.forPathBevel?this._bevel:this._depth)-At,this._buffer.normals[Gr+0]=It*st,this._buffer.normals[Gr+1]=Lt*st,this._buffer.normals[Gr+2]=ut,this._buffer.uvs[hs+0]=Tt,this._buffer.uvs[hs+1]=kt,this.forPathBevel===!1&&(this._buffer.positions[Gr+3]=wt,this._buffer.positions[Gr+4]=Ct,this._buffer.positions[Gr+5]=At,this._buffer.normals[Gr+3]=It*st,this._buffer.normals[Gr+4]=Lt*st,this._buffer.normals[Gr+5]=-ut,this._buffer.uvs[hs+2]=kt,this._buffer.uvs[hs+3]=Tt),rt||(this.forPathBevel?(Ht+=1,Gr+=3,hs+=2):(Ht+=2,Gr+=6,hs+=4),_s.topP=Ht+0,_s.bottomP=Ht+1,this._buffer.positions[Gr+0]=wt,this._buffer.positions[Gr+1]=Ct,this._buffer.positions[Gr+2]=(this.forPathBevel?this._bevel:this._depth)-At,this._buffer.normals[Gr+0]=Ft*st,this._buffer.normals[Gr+1]=Nt*st,this._buffer.normals[Gr+2]=ut,this._buffer.uvs[hs+0]=Tt,this._buffer.uvs[hs+1]=kt,this.forPathBevel===!1&&(this._buffer.positions[Gr+3]=wt,this._buffer.positions[Gr+4]=Ct,this._buffer.positions[Gr+5]=At,this._buffer.normals[Gr+3]=Ft*st,this._buffer.normals[Gr+4]=Nt*st,this._buffer.normals[Gr+5]=-ut,this._buffer.uvs[hs+2]=kt,this._buffer.uvs[hs+3]=Tt)),this.vertexCache[d]=_s,_s}clone(){let e=new Hl(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return e.userData=Ea(this.userData),e}},Ld=class extends Pe{constructor(e,a=12,i={}){super(),this.type="ShapeGeometry",this.windingRule=Gt.ODD,this.elementType=Wr$1.POLYGONS,this.polySize=3,this.vertexSize=2,this.strict=!0,this._shape=e,this._curveSegments=a,this._triangulationOptions=Object.assign({windingRule:Gt.ODD,elementType:Wr$1.POLYGONS,polySize:3,vertexSize:2,strict:!0},i);let o=this._shape.extractShapePointsToFlatArray([],this._curveSegments),c=this._shape.shapeHoles.map(st=>st.extractShapePointsToFlatArray([],this._curveSegments)),d,g=!0,b=!0,j,$;for(let st=0,ut=o.length/2;st<ut;st++){let gt=st*2,yt=o[gt+0],Pt=o[gt+1];if(j!==void 0&&yt!==j&&(g=!1),$!==void 0&&Pt!==$&&(b=!1),j=yt,$=Pt,!g&&!b)break}if(!g&&!b)try{d=ro({contours:[o,...c],windingRule:this._triangulationOptions.windingRule,elementType:this._triangulationOptions.elementType,polySize:this._triangulationOptions.polySize,vertexSize:this._triangulationOptions.vertexSize,strict:this._triangulationOptions.strict})}catch{d=Am}let rt=(d==null?void 0:d.vertexCount)??1,_e=(d==null?void 0:d.elementCount)??1;if(this._positionAttribute=new Xe(new Float32Array(rt*3),3),this._normalAttribute=new Xe(new Float32Array(rt*3),3),this._uvAttribute=new Xe(new Float32Array(rt*2),2),this._indexAttribute=new Xe(new Uint32Array(_e*3),1),d){let st=1/0,ut=-1/0,gt=1/0,yt=-1/0;for(let Ct=0,At=rt;Ct<At;Ct++){let Tt=Ct*2,kt=d.vertices[Tt+0],It=d.vertices[Tt+1];kt<st&&(st=kt),kt>ut&&(ut=kt),It<gt&&(gt=It),It>yt&&(yt=It)}let Pt=ut-st,wt=yt-gt;for(let Ct=0,At=rt;Ct<At;Ct++){let Tt=Ct*2,kt=d.vertices[Tt+0],It=d.vertices[Tt+1],Lt=(kt-st)/Pt,Ft=(It-gt)/wt;this._positionAttribute.setXYZ(Ct,kt,It,0),this._normalAttribute.setXYZ(Ct,0,0,1),this._uvAttribute.setXY(Ct,Lt,Ft)}for(let Ct=0,At=_e;Ct<At;Ct++){let Tt=Ct*3,kt=d.elements[Tt+0],It=d.elements[Tt+1],Lt=d.elements[Tt+2];this._indexAttribute.setX(Tt+0,kt),this._indexAttribute.setX(Tt+1,It),this._indexAttribute.setX(Tt+2,Lt)}}this.setAttribute("position",this._positionAttribute),this.setAttribute("normal",this._normalAttribute),this.setAttribute("uv",this._uvAttribute),this.setIndex(this._indexAttribute),this.setDrawRange(0,((d==null?void 0:d.elementCount)??1)*3)}clone(){let e=new Ld(this._shape,this._curveSegments);return e.userData=Ea(this.userData),e}},Bd=class extends Hl{constructor(e,a,i=0,o=12,c=3,d=Gt.ODD){super(e,a,i,o,c,d),this.type="ShapeGeometry"}_computeBufferEstimatedSize(e){return e.vertexCount*2*(2+this._bevelSegments)}_buildWall(e,a,i){let o=e[0];for(let c=0,d=o.boundary.vertexCount;c<d;c++){let g=this._buildBevelVert(a,o,c),b=this._buildBevelVert(a,o,(c+1)%d);i.push(b.topP,g.topN,g.bottomN),i.push(b.topP,g.bottomN,b.bottomP)}}clone(){let e=new Bd(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return e.userData=Ea(this.userData),e}},Gn=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,a){var $,rt;let i=Object.assign({},(a==null?void 0:a.parameters)??{width:100,subdivisions:40,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3,windingRule:Gt.ODD},e.parameters),o=Math.abs(i.width),c=Math.abs(i.height??i.width),d=Math.abs(i.depth??0),g=e.shape??(a==null?void 0:a.shape),b=(g==null?void 0:g.roundness)??i.roundness;g!==void 0&&(g instanceof Xt?(g.width!==o||g.height!==c)&&g.applySize(o,c):g=new Xt(o,c).fromJSON(g),(($=e.parameters)==null?void 0:$.roundness)!==void 0&&((rt=e.parameters)==null?void 0:rt.roundness)>0&&g.update());let j=g??new Xt(o,c);return{parameters:Object.assign(i,{width:o,height:c,depth:d,roundness:b}),shape:j}}static build(e){let{depth:a,extrudeBevelSize:i,extrudeBevelSegments:o,subdivisions:c,roundness:d,windingRule:g}=e.parameters;e.shape.roundness=d;let b;return a<=0?b=new Ld(e.shape,c,{windingRule:g}):b=new Bd(e.shape,a,i,c,o,g),Object.assign(b,{userData:{...e,type:"VectorGeometry"}})}},uI=Math.PI*2,Fd=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,a){let i=Object.assign({},(a==null?void 0:a.parameters)??{width:100,depth:0,spikes:64,angle:360,innerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return i.angle=Me.clamp(i.angle,0,360),{shape:e.shape&&e.shape instanceof Xt?e.shape:new Xt,parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??0)})}}static build(e){let{width:a,height:i,spikes:o,angle:c,innerRadius:d,depth:g,extrudeBevelSize:b,extrudeBevelSegments:j}=e.parameters,$=e.shape,rt=a*.5,_e=i*.5,st=A7($,rt,_e,c*Math.PI/180,o,d);$.isClosed=!0,$.update();let ut;return c===0?(ut=new Pe,ut.setAttribute("position",new Te([],3))):ut=Gn.create({shape:$,parameters:{subdivisions:st,depth:g,extrudeBevelSize:b,extrudeBevelSegments:j}}),Object.assign(ut,{userData:{...e,type:"EllipseGeometry"}})}};function A7(e,a,i,o,c,d){if(o>=uI)return c>30||c%4===0?(E7(e,a,i,d),Math.round(c/4)):cI(e,o,c,a,i,d);o=Math.max(o,.001);let g={x:0,y:i},b=o+Math.PI*.5,j={x:Math.cos(b)*a,y:Math.sin(b)*i},$=eI({px:g.x,py:g.y,cx:j.x,cy:j.y,rx:a,ry:i,largeArcFlag:o>Math.PI,sweepFlag:!0});return c>30||c%$.length===0?_7(e,g.x,g.y,$,c,a,i,d):cI(e,o,c,a,i,d)}function _7(e,a,i,o,c,d,g,b){let j=Math.round(c/o.length);e.addPoint(Nd(a,i));for(let $=0,rt=o.length;$<rt;$++){let _e=o[$],st=e.points[$],ut=Nd(_e.x,_e.y);st.controls[1].position.set(_e.x1,_e.y1),ut.controls[0].position.set(_e.x2,_e.y2),e.addPoint(ut)}return b>0?hI(e,d,g,b):e.addPoint(Nd(0,0)),j}function cI(e,a,i,o,c,d){let g=-a/i;for(let b=0;b<=i;b++){let j=g*b,$=Math.sin(j)*o,rt=Math.cos(j)*c;e.addPoint(Nd($,rt))}return a<uI?d>0?hI(e,o,c,d):e.addPoint(Nd(0,0)):(e.removePoint(e.points[e.points.length-1]),d>0&&dI(e,o,c,d)),1}function E7(e,a,i,o=0,c=0,d=0){let g=.5522847498,b=a*g,j=i*g;e.addPoint(N0(c-a,d,c-a,d-j,c-a,d+j)),e.addPoint(N0(c,d+i,c-b,d+i,c+b,d+i)),e.addPoint(N0(c+a,d,c+a,d+j,c+a,d-j)),e.addPoint(N0(c,d-i,c+b,d-i,c-b,d-i)),o>0&&dI(e,a,i,o)}function Nd(e,a){return new to(Me.generateUUID(),new z$2(e,a))}function N0(e,a,i,o,c,d){let g=Nd(e,a);return g.controls[0].position.set(i,o),g.controls[1].position.set(c,d),g}function hI(e,a,i,o){fI(e,a,i,o).forEach(c=>e.addPoint(c))}function dI(e,a,i,o){let c=fI(e,a,i,o),d=new Xt;c.forEach(g=>d.addPoint(g)),d.isClosed=!0,e.shapeHoles.push(d)}function fI(e,a,i,o){let c=o*a/100,d=c*(Math.abs(i)/Math.abs(a)),g=new z$2(c/a,d/i),b=e.points.map(j=>{let $=j.clone();return $.uuid=Me.generateUUID(),$}).reverse();return b.forEach(j=>{j.position.multiply(g);let $=j.controls[0].position.clone().multiply(g),rt=j.controls[1].position.clone().multiply(g);j.controls[0].position.copy(rt),j.controls[1].position.copy($)}),b}var pI=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,a){let i=Object.assign({},(a==null?void 0:a.parameters)??{width:100,revolutions:2,segments:40,pathRadius:10,pathType:0,pathSegments:30,cornerRadius:30,cornerSegments:4},e.parameters),o=Math.abs(i.width),c=Math.abs(i.height??o),d=Math.abs(i.depth??o),g=Math.abs(Math.min(o,d))/2;return{parameters:Object.assign(i,{width:o,height:c,depth:d,radius:g,segments:Math.round(i.segments),pathSegments:Math.round(i.pathSegments),cornerSegments:Math.round(i.cornerSegments)})}}static build(e){let{width:a,height:i,depth:o,radius:c,revolutions:d,segments:g,pathRadius:b,pathType:j,pathSegments:$,cornerRadius:rt,cornerSegments:_e}=e.parameters,st=new _m(!1,a,i,o,c,d,g,b,j,$,rt,_e);return Object.assign(st,{userData:{...e,type:"HelixGeometry"}})}},MA=new _o([0,0,0],1),_m=class extends Pe{constructor(e=!0,a=1,i=1,o=1,c=1,d=1,g=1,b=1,j=1,$=1,rt=1,_e=1){if(super(),d===0)return;let st=e&&d===1;st&&(_e=0),rt>100&&(rt=100),rt===0&&(_e=0);let ut=()=>new _,gt=new _,yt=ut(),Pt=ut(),wt=ut(),Ct,At,Tt,kt,It,Lt,Ft,Nt,Ht=ut(),Gr=ut(),hs=ut(),_s=ut(),hn=ut(),Qn=ut(),ds=ut(),un=ut(),dr=i-2*b+.001,us=dr/d,Nn=Math.ceil(g*d),gn=Nn+1,Zn=dr/Nn,xu=-dr/2,au=$+1,Vv=2*Math.PI/$,wu=Math.PI/2/_e,a1=.01,P0=Math.min((1-rt/100)*b,b-a1),B0=b-P0,q1=0,ox=2,N_=_e*ox+ox,eS=au*N_/ox,tS=eS+au*gn,tA=Math.max(0,au*(gn+N_)),[aR,sR,AA]=[3,3,2].map(qx=>Array(tA*qx).fill(0)),SA=[],IO=c-b;function pO(qx,oI){let mO=Math.PI/2;Lt=oI*Zn,Nt=2*Math.PI*(Lt%us)/us+mO,Lt+=xu,Ft=Math.sin(Nt)*IO,It=Math.cos(Nt)*IO,e?qx.set(It,Ft,Lt):qx.set(It,Lt,Ft)}pO(gt,-1e-10),pO(yt,0),Ht.copy(gt),pO(gt,1);let Su=gt.distanceTo(yt),mu=st?0:B0+P0,ax=Su*Nn+2*mu,tE=P0,So=ax-mu;for(let qx=0;qx<=Nn;qx++){pO(Pt,qx),un.subVectors(Pt,Ht).normalize(),Ht.copy(Pt),Qn.copy(Pt).setComponent(+e+1,0).normalize(),ds.crossVectors(un,Qn).normalize();let oI=qx===0,mO=qx===Nn,bL=oI?3*Math.PI/2:wu,OL=oI?tE:So,CL=oI?au:tS,TL=oI?0:tA-au,e$=un.clone().multiplyScalar(oI?-B0:B0).add(Pt),i$=un.clone().multiplyScalar(oI?-1:1).normalize();for(let l1=0;l1<au;l1++){let iS=l1*Vv;if(Gr.addVectors(gt.copy(Qn).multiplyScalar(b*Math.cos(iS)),yt.copy(ds).multiplyScalar(b*Math.sin(iS))),hs.copy(Gr).normalize(),oI||mO){st||(q1=TL+l1,[0,1,2].forEach(wA=>{aR[q1*3+wA]=e$.getComponent(wA),sR[q1*3+wA]=i$.getComponent(wA)}),AA[q1*2]=+mO,AA[q1*2+1]=l1/$),yt.copy(hs).multiplyScalar(P0),wt.addVectors(Pt,yt);for(let wA=0;wA<_e;wA++){let MO=wA*wu+bL;_s.addVectors(gt.copy(un).multiplyScalar(B0*Math.sin(MO)),yt.copy(hs).multiplyScalar(B0*Math.cos(MO))),hn.copy(_s).normalize(),yt.addVectors(wt,_s),_s.normalize(),q1=CL+wA*au+l1,[0,1,2].forEach(GL=>{aR[q1*3+GL]=yt.getComponent(GL),sR[q1*3+GL]=hn.getComponent(GL)});let IL=+oI+Math.sin(MO);AA[q1*2]=(OL+B0*IL)/ax,AA[q1*2+1]=l1/$}}yt.addVectors(Pt,Gr),q1=eS+qx*au+l1,[0,1,2].forEach(wA=>{aR[q1*3+wA]=yt.getComponent(wA),sR[q1*3+wA]=hs.getComponent(wA)}),AA[q1*2]=(mu+qx*Su)/ax,AA[q1*2+1]=l1/$}}let fD=gn+2*_e+ox,[C3,q3]=[+st,fD-1];for(let qx=C3;qx<=q3-1;qx++){let oI=st&&qx===q3-1;for(let mO=0;mO<au-1;mO++)Ct=qx*au+mO,At=Ct+1,Tt=(oI?mO:Ct)+au,kt=(oI?mO+1:At)+au,qx===0?SA.push(At,kt,Tt):qx===fD-2?SA.push(Ct,At,Tt):SA.push(Ct,At,Tt,At,kt,Tt)}this.setIndex(SA),this.setAttribute("position",new Te(aR,3)),this.setAttribute("normal",new Te(sR,3)),this.setAttribute("uv",new Te(AA,2))}getClosedTorusIndicesForBooleanOrSubdiv(){let e=this.userData.parameters,a=Math.ceil(e.tubularSegments),i=e.radialSegments+1,o=Array.from(this.getIndex().array),c,d,g,b,j=6*(a-1)*e.radialSegments,$=a,rt=$===a;for(let _e=0;_e<e.radialSegments;_e++)c=$*i+_e,d=c+1,g=(rt?_e:c)+i,b=(rt?_e+1:d)+i,o[j++]=c,o[j++]=d,o[j++]=g,o[j++]=d,o[j++]=b,o[j++]=g;return o.length=j,MA.array=o,MA.count=o.length,MA}},mI=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,a){let i=Object.assign({},(a==null?void 0:a.parameters)??{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width)})}}static build(e){let{width:a,height:i,depth:o,detail:c,corner:d,cornerSides:g}=e.parameters,b=c===0&&d!==0?new Em(a*.5,d,g):new Ju(a*.5,c);return b.scale(1,i/a,o/a),Object.assign(b,{userData:{...e,type:"IcosahedronGeometry"}})}},Em=class extends Ul{constructor(e=1,a=.2,i=4){let o=(1+Math.sqrt(5))/2,c=[-1,o,0,1,o,0,-1,-o,0,1,-o,0,0,-1,o,0,1,o,0,-1,-o,0,1,-o,o,0,-1,o,0,1,-o,0,-1,-o,0,1],d=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],g="IcosahedronGeometry";super(c,d,g,e,a,i),this.type=g}static fromJSON(e){return new Em(e.radius,e.corner,e.cornerSides)}},gI=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,a){var o;(((o=e.parameters)==null?void 0:o.points)??[]).forEach(c=>{Array.isArray(c)&&(c.x=c[0],c.y=c[1])});let i=Object.assign({},(a==null?void 0:a.parameters)??{width:100,segments:64,verticalSegments:64,points:[{x:0,y:-50,id:0},{x:50,y:-50,id:1},{x:50,y:50,id:2},{x:0,y:50,id:3}]},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width)})}}static build(e){let{points:a,segments:i,verticalSegments:o}=e.parameters,c=new xa;c.moveTo(a[0].x,a[0].y),c.bezierCurveTo(a[1].x,a[1].y,a[2].x,a[2].y,a[3].x,a[3].y);let d=new Xu(c.extractPoints(o).shape,i);return d.rotateZ(Math.PI),Object.assign(d,{userData:{...e,type:"LatheGeometry"}})}},Go=new ce$1,CA=new _t,F0=new _,Wl=class extends fr$2{constructor(){super(),this.uuid=Me.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}applyMatrix4(e){let a=new nr().getNormalMatrix(e);for(let i=0,o=this.vertices.length;i<o;i++)this.vertices[i].applyMatrix4(e);for(let i=0,o=this.faces.length;i<o;i++){let c=this.faces[i];c.normal.applyMatrix3(a).normalize();for(let d=0,g=c.vertexNormals.length;d<g;d++)c.vertexNormals[d].applyMatrix3(a).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this}rotateX(e){return Go.makeRotationX(e),this.applyMatrix4(Go),this}rotateY(e){return Go.makeRotationY(e),this.applyMatrix4(Go),this}rotateZ(e){return Go.makeRotationZ(e),this.applyMatrix4(Go),this}translate(e,a,i){return Go.makeTranslation(e,a,i),this.applyMatrix4(Go),this}scale(e,a,i){return Go.makeScale(e,a,i),this.applyMatrix4(Go),this}lookAt(e){return CA.lookAt(e),CA.updateMatrix(),this.applyMatrix4(CA.matrix),this}fromBufferGeometry(e){let a=this,i=e.index!==null?e.index:void 0,o=e.attributes;if(o.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;let c=o.position,d=o.normal,g=o.color,b=o.uv,j=o.uv2;j!==void 0&&(this.faceVertexUvs[1]=[]);for(let _e=0;_e<c.count;_e++)a.vertices.push(new _().fromBufferAttribute(c,_e)),g!==void 0&&a.colors.push(new We().fromBufferAttribute(g,_e));function $(_e,st,ut,gt){let yt=g===void 0?[]:[a.colors[_e].clone(),a.colors[st].clone(),a.colors[ut].clone()],Pt=d===void 0?[]:[new _().fromBufferAttribute(d,_e),new _().fromBufferAttribute(d,st),new _().fromBufferAttribute(d,ut)],wt=new kd(_e,st,ut,Pt,yt,gt);a.faces.push(wt),b!==void 0&&a.faceVertexUvs[0].push([new z$2().fromBufferAttribute(b,_e),new z$2().fromBufferAttribute(b,st),new z$2().fromBufferAttribute(b,ut)]),j!==void 0&&a.faceVertexUvs[1].push([new z$2().fromBufferAttribute(j,_e),new z$2().fromBufferAttribute(j,st),new z$2().fromBufferAttribute(j,ut)])}let rt=e.groups;if(rt.length>0)for(let _e=0;_e<rt.length;_e++){let st=rt[_e],ut=st.start,gt=st.count;for(let yt=ut,Pt=ut+gt;yt<Pt;yt+=3)i!==void 0?$(i.getX(yt),i.getX(yt+1),i.getX(yt+2),st.materialIndex):$(yt,yt+1,yt+2,st.materialIndex)}else if(i!==void 0)for(let _e=0;_e<i.count;_e+=3)$(i.getX(_e),i.getX(_e+1),i.getX(_e+2));else for(let _e=0;_e<c.count;_e+=3)$(_e,_e+1,_e+2);return this.computeFaceNormals(),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(F0).negate(),this.translate(F0.x,F0.y,F0.z),this}normalize(){this.computeBoundingSphere();let e=this.boundingSphere.center,a=this.boundingSphere.radius,i=a===0?1:1/a,o=new ce$1;return o.set(i,0,0,-i*e.x,0,i,0,-i*e.y,0,0,i,-i*e.z,0,0,0,1),this.applyMatrix4(o),this}computeFaceNormals(){let e=new _,a=new _;for(let i=0,o=this.faces.length;i<o;i++){let c=this.faces[i],d=this.vertices[c.a],g=this.vertices[c.b],b=this.vertices[c.c];e.subVectors(b,g),a.subVectors(d,g),e.cross(a),e.normalize(),c.normal.copy(e)}}computeVertexNormals(e=!0){let a=new Array(this.vertices.length);for(let i=0,o=this.vertices.length;i<o;i++)a[i]=new _;if(e){let i=new _,o=new _;for(let c=0,d=this.faces.length;c<d;c++){let g=this.faces[c],b=this.vertices[g.a],j=this.vertices[g.b],$=this.vertices[g.c];i.subVectors($,j),o.subVectors(b,j),i.cross(o),a[g.a].add(i),a[g.b].add(i),a[g.c].add(i)}}else{this.computeFaceNormals();for(let i=0,o=this.faces.length;i<o;i++){let c=this.faces[i];a[c.a].add(c.normal),a[c.b].add(c.normal),a[c.c].add(c.normal)}}for(let i=0,o=this.vertices.length;i<o;i++)a[i].normalize();for(let i=0,o=this.faces.length;i<o;i++){let c=this.faces[i],d=c.vertexNormals;d.length===3?(d[0].copy(a[c.a]),d[1].copy(a[c.b]),d[2].copy(a[c.c])):(d[0]=a[c.a].clone(),d[1]=a[c.b].clone(),d[2]=a[c.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeFlatVertexNormals(){this.computeFaceNormals();for(let e=0,a=this.faces.length;e<a;e++){let i=this.faces[e],o=i.vertexNormals;o.length===3?(o[0].copy(i.normal),o[1].copy(i.normal),o[2].copy(i.normal)):(o[0]=i.normal.clone(),o[1]=i.normal.clone(),o[2]=i.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeMorphNormals(){for(let a=0,i=this.faces.length;a<i;a++){let o=this.faces[a];o.__originalFaceNormal?o.__originalFaceNormal.copy(o.normal):o.__originalFaceNormal=o.normal.clone(),o.__originalVertexNormals||(o.__originalVertexNormals=[]);for(let c=0,d=o.vertexNormals.length;c<d;c++)o.__originalVertexNormals[c]?o.__originalVertexNormals[c].copy(o.vertexNormals[c]):o.__originalVertexNormals[c]=o.vertexNormals[c].clone()}let e=new Wl;e.faces=this.faces;for(let a=0,i=this.morphTargets.length;a<i;a++){if(!this.morphNormals[a]){this.morphNormals[a]={},this.morphNormals[a].faceNormals=[],this.morphNormals[a].vertexNormals=[];let c=this.morphNormals[a].faceNormals,d=this.morphNormals[a].vertexNormals;for(let g=0,b=this.faces.length;g<b;g++){let j=new _,$={a:new _,b:new _,c:new _};c.push(j),d.push($)}}let o=this.morphNormals[a];e.vertices=this.morphTargets[a].vertices,e.computeFaceNormals(),e.computeVertexNormals();for(let c=0,d=this.faces.length;c<d;c++){let g=this.faces[c],b=o.faceNormals[c],j=o.vertexNormals[c];b.copy(g.normal),j.a.copy(g.vertexNormals[0]),j.b.copy(g.vertexNormals[1]),j.c.copy(g.vertexNormals[2])}}for(let a=0,i=this.faces.length;a<i;a++){let o=this.faces[a];o.normal=o.__originalFaceNormal,o.vertexNormals=o.__originalVertexNormals}}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Wt),this.boundingBox.setFromPoints(this.vertices)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Br),this.boundingSphere.setFromPoints(this.vertices)}merge(e,a,i=0){if(!(e&&e.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);return}let o,c=this.vertices.length,d=this.vertices,g=e.vertices,b=this.faces,j=e.faces,$=this.colors,rt=e.colors;a!==void 0&&(o=new nr().getNormalMatrix(a));for(let _e=0,st=g.length;_e<st;_e++){let ut=g[_e].clone();a!==void 0&&ut.applyMatrix4(a),d.push(ut)}for(let _e=0,st=rt.length;_e<st;_e++)$.push(rt[_e].clone());for(let _e=0,st=j.length;_e<st;_e++){let ut=j[_e],gt,yt,Pt=ut.vertexNormals,wt=ut.vertexColors,Ct=new kd(ut.a+c,ut.b+c,ut.c+c);Ct.normal.copy(ut.normal),o!==void 0&&Ct.normal.applyMatrix3(o).normalize();for(let At=0,Tt=Pt.length;At<Tt;At++)gt=Pt[At].clone(),o!==void 0&&gt.applyMatrix3(o).normalize(),Ct.vertexNormals.push(gt);Ct.color.copy(ut.color);for(let At=0,Tt=wt.length;At<Tt;At++)yt=wt[At],Ct.vertexColors.push(yt.clone());Ct.materialIndex=ut.materialIndex+i,b.push(Ct)}for(let _e=0,st=e.faceVertexUvs.length;_e<st;_e++){let ut=e.faceVertexUvs[_e];this.faceVertexUvs[_e]===void 0&&(this.faceVertexUvs[_e]=[]);for(let gt=0,yt=ut.length;gt<yt;gt++){let Pt=ut[gt],wt=[];for(let Ct=0,At=Pt.length;Ct<At;Ct++)wt.push(Pt[Ct].clone());this.faceVertexUvs[_e].push(wt)}}}mergeMesh(e){if(!(e&&e.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e);return}e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)}mergeVertices(e=4){let a={},i=[],o=[],c=Math.pow(10,e);for(let b=0,j=this.vertices.length;b<j;b++){let $=this.vertices[b],rt=Math.round($.x*c)+"_"+Math.round($.y*c)+"_"+Math.round($.z*c);a[rt]===void 0?(a[rt]=b,i.push(this.vertices[b]),o[b]=i.length-1):o[b]=o[a[rt]]}let d=[];for(let b=0,j=this.faces.length;b<j;b++){let $=this.faces[b];$.a=o[$.a],$.b=o[$.b],$.c=o[$.c];let rt=[$.a,$.b,$.c];for(let _e=0;_e<3;_e++)if(rt[_e]===rt[(_e+1)%3]){d.push(b);break}}for(let b=d.length-1;b>=0;b--){let j=d[b];this.faces.splice(j,1);for(let $=0,rt=this.faceVertexUvs.length;$<rt;$++)this.faceVertexUvs[$].splice(j,1)}let g=this.vertices.length-i.length;return this.vertices=i,g}setFromPoints(e){this.vertices=[];for(let a=0,i=e.length;a<i;a++){let o=e[a];this.vertices.push(new _(o.x,o.y,o.z||0))}return this}sortFacesByMaterialIndex(){let e=this.faces,a=e.length;for(let b=0;b<a;b++)e[b]._id=b;function i(b,j){return b.materialIndex-j.materialIndex}e.sort(i);let o=this.faceVertexUvs[0],c=this.faceVertexUvs[1],d,g;o&&o.length===a&&(d=[]),c&&c.length===a&&(g=[]);for(let b=0;b<a;b++){let j=e[b]._id;d&&d.push(o[j]),g&&g.push(c[j])}d&&(this.faceVertexUvs[0]=d),g&&(this.faceVertexUvs[1]=g)}toJSON(){let e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),this.parameters!==void 0){let ut=this.parameters;for(let gt in ut)ut[gt]!==void 0&&(e[gt]=ut[gt]);return e}let a=[];for(let ut=0;ut<this.vertices.length;ut++){let gt=this.vertices[ut];a.push(gt.x,gt.y,gt.z)}let i=[],o=[],c={},d=[],g={},b=[],j={};for(let ut=0;ut<this.faces.length;ut++){let gt=this.faces[ut],yt=!0,Pt=!1,wt=this.faceVertexUvs[0][ut]!==void 0,Ct=gt.normal.length()>0,At=gt.vertexNormals.length>0,Tt=gt.color.r!==1||gt.color.g!==1||gt.color.b!==1,kt=gt.vertexColors.length>0,It=0;if(It=$(It,0,0),It=$(It,1,yt),It=$(It,2,Pt),It=$(It,3,wt),It=$(It,4,Ct),It=$(It,5,At),It=$(It,6,Tt),It=$(It,7,kt),i.push(It),i.push(gt.a,gt.b,gt.c),i.push(gt.materialIndex),wt){let Lt=this.faceVertexUvs[0][ut];i.push(st(Lt[0]),st(Lt[1]),st(Lt[2]))}if(Ct&&i.push(rt(gt.normal)),At){let Lt=gt.vertexNormals;i.push(rt(Lt[0]),rt(Lt[1]),rt(Lt[2]))}if(Tt&&i.push(_e(gt.color)),kt){let Lt=gt.vertexColors;i.push(_e(Lt[0]),_e(Lt[1]),_e(Lt[2]))}}function $(ut,gt,yt){return yt?ut|1<<gt:ut&~(1<<gt)}function rt(ut){let gt=ut.x.toString()+ut.y.toString()+ut.z.toString();return c[gt]!==void 0||(c[gt]=o.length/3,o.push(ut.x,ut.y,ut.z)),c[gt]}function _e(ut){let gt=ut.r.toString()+ut.g.toString()+ut.b.toString();return g[gt]!==void 0||(g[gt]=d.length,d.push(ut.getHex())),g[gt]}function st(ut){let gt=ut.x.toString()+ut.y.toString();return j[gt]!==void 0||(j[gt]=b.length/2,b.push(ut.x,ut.y)),j[gt]}return e.data={},e.data.vertices=a,e.data.normals=o,d.length>0&&(e.data.colors=d),b.length>0&&(e.data.uvs=[b]),e.data.faces=i,e}clone(){return new Wl().copy(this)}copy(e){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;let a=e.vertices;for(let _e=0,st=a.length;_e<st;_e++)this.vertices.push(a[_e].clone());let i=e.colors;for(let _e=0,st=i.length;_e<st;_e++)this.colors.push(i[_e].clone());let o=e.faces;for(let _e=0,st=o.length;_e<st;_e++)this.faces.push(o[_e].clone());for(let _e=0,st=e.faceVertexUvs.length;_e<st;_e++){let ut=e.faceVertexUvs[_e];this.faceVertexUvs[_e]===void 0&&(this.faceVertexUvs[_e]=[]);for(let gt=0,yt=ut.length;gt<yt;gt++){let Pt=ut[gt],wt=[];for(let Ct=0,At=Pt.length;Ct<At;Ct++){let Tt=Pt[Ct];wt.push(Tt.clone())}this.faceVertexUvs[_e].push(wt)}}let c=e.morphTargets;for(let _e=0,st=c.length;_e<st;_e++){let ut={};if(ut.name=c[_e].name,c[_e].vertices!==void 0){ut.vertices=[];for(let gt=0,yt=c[_e].vertices.length;gt<yt;gt++)ut.vertices.push(c[_e].vertices[gt].clone())}if(c[_e].normals!==void 0){ut.normals=[];for(let gt=0,yt=c[_e].normals.length;gt<yt;gt++)ut.normals.push(c[_e].normals[gt].clone())}this.morphTargets.push(ut)}let d=e.morphNormals;for(let _e=0,st=d.length;_e<st;_e++){let ut={};if(d[_e].vertexNormals!==void 0){ut.vertexNormals=[];for(let gt=0,yt=d[_e].vertexNormals.length;gt<yt;gt++){let Pt=d[_e].vertexNormals[gt],wt={};wt.a=Pt.a.clone(),wt.b=Pt.b.clone(),wt.c=Pt.c.clone(),ut.vertexNormals.push(wt)}}if(d[_e].faceNormals!==void 0){ut.faceNormals=[];for(let gt=0,yt=d[_e].faceNormals.length;gt<yt;gt++)ut.faceNormals.push(d[_e].faceNormals[gt].clone())}this.morphNormals.push(ut)}let g=e.skinWeights;for(let _e=0,st=g.length;_e<st;_e++)this.skinWeights.push(g[_e].clone());let b=e.skinIndices;for(let _e=0,st=b.length;_e<st;_e++)this.skinIndices.push(b[_e].clone());let j=e.lineDistances;for(let _e=0,st=j.length;_e<st;_e++)this.lineDistances.push(j[_e]);let $=e.boundingBox;$!==null&&(this.boundingBox=$.clone());let rt=e.boundingSphere;return rt!==null&&(this.boundingSphere=rt.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}toBufferGeometry(){let e=new PA().fromGeometry(this),a=new Pe,i=new Float32Array(e.vertices.length*3);if(a.setAttribute("position",k0.call(new Xe(i,3),e.vertices)),e.normals.length>0){let o=new Float32Array(e.normals.length*3);a.setAttribute("normal",k0.call(new Xe(o,3),e.normals))}if(e.colors.length>0){let o=new Float32Array(e.colors.length*3);a.setAttribute("color",yI.call(new Xe(o,3),e.colors))}if(e.uvs.length>0){let o=new Float32Array(e.uvs.length*2);a.setAttribute("uv",vI.call(new Xe(o,2),e.uvs))}if(e.uvs2.length>0){let o=new Float32Array(e.uvs2.length*2);a.setAttribute("uv2",vI.call(new Xe(o,2),e.uvs2))}a.groups=e.groups;for(let o in e.morphTargets){let c=[],d=e.morphTargets[o];for(let g=0,b=d.length;g<b;g++){let j=d[g],$=new Te(j.data.length*3,3);$.name=j.name,c.push(k0.call($,j.data))}a.morphAttributes[o]=c}if(e.skinIndices.length>0){let o=new Te(e.skinIndices.length*4,4);a.setAttribute("skinIndex",xI.call(o,e.skinIndices))}if(e.skinWeights.length>0){let o=new Te(e.skinWeights.length*4,4);a.setAttribute("skinWeight",xI.call(o,e.skinWeights))}return e.boundingSphere!==null&&(a.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(a.boundingBox=e.boundingBox.clone()),a}computeTangents(){console.error("THREE.Geometry: .computeTangents() has been removed.")}computeLineDistances(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}applyMatrix(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}dispose(){this.dispatchEvent({type:"dispose"})}static createBufferGeometryFromObject(e){let a=new Pe,i=e.geometry;if(e.isPoints||e.isLine){let o=new Te(i.vertices.length*3,3),c=new Te(i.colors.length*3,3);if(a.setAttribute("position",k0.call(o,i.vertices)),a.setAttribute("color",yI.call(c,i.colors)),i.lineDistances&&i.lineDistances.length===i.vertices.length){let d=new Te(i.lineDistances.length,1);a.setAttribute("lineDistance",T7.call(d,i.lineDistances))}i.boundingSphere!==null&&(a.boundingSphere=i.boundingSphere.clone()),i.boundingBox!==null&&(a.boundingBox=i.boundingBox.clone())}else e.isMesh&&(a=i.toBufferGeometry());return a}};Wl.prototype.isGeometry=!0;var PA=class{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(e){let a=[],i,o,c,d=e.faces;for(o=0;o<d.length;o++){let g=d[o];g.materialIndex!==c&&(c=g.materialIndex,i!==void 0&&(i.count=o*3-i.start,a.push(i)),i={start:o*3,materialIndex:c})}i!==void 0&&(i.count=o*3-i.start,a.push(i)),this.groups=a}fromGeometry(e){let a=e.faces,i=e.vertices,o=e.faceVertexUvs,c=o[0]&&o[0].length>0,d=o[1]&&o[1].length>0,g=e.morphTargets,b=g.length,j;if(b>0){j=[];for(let Pt=0;Pt<b;Pt++)j[Pt]={name:g[Pt].name,data:[]};this.morphTargets.position=j}let $=e.morphNormals,rt=$.length,_e;if(rt>0){_e=[];for(let Pt=0;Pt<rt;Pt++)_e[Pt]={name:$[Pt].name,data:[]};this.morphTargets.normal=_e}let st=e.skinIndices,ut=e.skinWeights,gt=st.length===i.length,yt=ut.length===i.length;i.length>0&&a.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let Pt=0;Pt<a.length;Pt++){let wt=a[Pt];this.vertices.push(i[wt.a],i[wt.b],i[wt.c]);let Ct=wt.vertexNormals;if(Ct.length===3)this.normals.push(Ct[0],Ct[1],Ct[2]);else{let Tt=wt.normal;this.normals.push(Tt,Tt,Tt)}let At=wt.vertexColors;if(At.length===3)this.colors.push(At[0],At[1],At[2]);else{let Tt=wt.color;this.colors.push(Tt,Tt,Tt)}if(c===!0){let Tt=o[0][Pt];Tt!==void 0?this.uvs.push(Tt[0],Tt[1],Tt[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",Pt),this.uvs.push(new z$2,new z$2,new z$2))}if(d===!0){let Tt=o[1][Pt];Tt!==void 0?this.uvs2.push(Tt[0],Tt[1],Tt[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",Pt),this.uvs2.push(new z$2,new z$2,new z$2))}for(let Tt=0;Tt<b;Tt++){let kt=g[Tt].vertices;j[Tt].data.push(kt[wt.a],kt[wt.b],kt[wt.c])}for(let Tt=0;Tt<rt;Tt++){let kt=$[Tt].vertexNormals[Pt];_e[Tt].data.push(kt.a,kt.b,kt.c)}gt&&this.skinIndices.push(st[wt.a],st[wt.b],st[wt.c]),yt&&this.skinWeights.push(ut[wt.a],ut[wt.b],ut[wt.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),this}},kd=class{constructor(e,a,i,o,c,d=0){this.a=e,this.b=a,this.c=i,this.normal=o&&o.isVector3?o:new _,this.vertexNormals=Array.isArray(o)?o:[],this.color=c&&c.isColor?c:new We,this.vertexColors=Array.isArray(c)?c:[],this.materialIndex=d}clone(){return new this.constructor().copy(this)}copy(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(let a=0,i=e.vertexNormals.length;a<i;a++)this.vertexNormals[a]=e.vertexNormals[a].clone();for(let a=0,i=e.vertexColors.length;a<i;a++)this.vertexColors[a]=e.vertexColors[a].clone();return this}};function T7(e){return this.array.set(e),this}function yI(e){let a=this.array,i=0;for(let o=0,c=e.length;o<c;o++){let d=e[o];d===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",o),d=new We),a[i++]=d.r,a[i++]=d.g,a[i++]=d.b}return this}function vI(e){let a=this.array,i=0;for(let o=0,c=e.length;o<c;o++){let d=e[o];d===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",o),d=new z$2),a[i++]=d.x,a[i++]=d.y}return this}function k0(e){let a=this.array,i=0;for(let o=0,c=e.length;o<c;o++){let d=e[o];d===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",o),d=new _),a[i++]=d.x,a[i++]=d.y,a[i++]=d.z}return this}function xI(e){let a=this.array,i=0;for(let o=0,c=e.length;o<c;o++){let d=e[o];d===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",o),d=new Ke),a[i++]=d.x,a[i++]=d.y,a[i++]=d.z,a[i++]=d.w}return this}var M7=["a","b","c"];function C7(e,a){switch(a){case"c":return e.c;case"b":return e.b;case"a":default:return e.a}}function DA(e,a,i){let o=Math.min(e,a),c=Math.max(e,a),d=o+"_"+c;return i.get(d)}function OA(e,a,i,o,c,d){let g=Math.min(e,a),b=Math.max(e,a),j=g+"_"+b,$;if(o.has(j))$=o.get(j);else{let rt=i[g],_e=i[b];$={a:rt,b:_e,newEdge:null,faces:[]},o.set(j,$)}$.faces.push(c),d[e].edges.push($),d[a].edges.push($)}function P7(e,a,i,o){let c,d,g;for(c=0,d=e.length;c<d;c++)i[c]={edges:[]};for(c=0,d=a.length;c<d;c++)g=a[c],OA(g.a,g.b,e,o,g,i),OA(g.b,g.c,e,o,g,i),OA(g.c,g.a,e,o,g,i)}function V0(e,a,i,o,c){e.push(new kd(a,i,o,void 0,void 0,c))}function Vd(e,a){return Math.abs(a-e)/2+Math.min(e,a)}function z0(e,a,i,o){e.push([a.clone(),i.clone(),o.clone()])}var U0=class{constructor(e=1){this.subdivisions=e}modify(e){e instanceof Pe?e=new Wl().fromBufferGeometry(e):e=e.clone(),e.mergeVertices();let a=this.subdivisions;for(;a-- >0;)this._smooth(e);return e.computeFaceNormals(),e.computeVertexNormals(),e}_smooth(e){let a=new _,i,o,c,d,g,b=e.vertices,j=e.faces,$=e.faceVertexUvs[0],rt=$!==void 0&&$.length>0,_e=[],st=new Map;P7(b,j,_e,st);let ut=[],gt,yt,Pt,wt,Ct,At,Tt;for(let a1 of Array.from(st.keys())){for(yt=st.get(a1),Pt=new _,Ct=3/8,At=1/8,Tt=yt.faces.length,Tt!=2&&(Ct=.5,At=0,Tt!=1),Pt.addVectors(yt.a,yt.b).multiplyScalar(Ct),a.set(0,0,0),d=0;d<Tt;d++){for(wt=yt.faces[d],g=0;g<3&&(gt=b[C7(wt,M7[g])],!(gt!==yt.a&&gt!==yt.b));g++);gt&&a.add(gt)}a.multiplyScalar(At),Pt.add(a),yt.newEdge=ut.length,ut.push(Pt)}let kt,It,Lt,Ft,Nt,Ht,Gr,hs=[];for(o=0,c=b.length;o<c;o++){for(Ht=b[o],Nt=_e[o].edges,i=Nt.length,i==3?kt=3/16:i>3&&(kt=3/(8*i)),It=1-i*Number(kt),Lt=kt,i<=2&&(i==2?(It=3/4,Lt=1/8):i==1||i==0),Gr=Ht.clone().multiplyScalar(It),a.set(0,0,0),d=0;d<i;d++)Ft=Nt[d],gt=Ft.a!==Ht?Ft.a:Ft.b,a.add(gt);a.multiplyScalar(Number(Lt)),Gr.add(a),hs.push(Gr)}let _s=hs.concat(ut),hn=hs.length,Qn,ds,un,dr=[],us=[],Nn,gn,Zn,xu,au=new z$2,Vv=new z$2,wu=new z$2;for(o=0,c=j.length;o<c;o++)wt=j[o],Qn=Number(DA(wt.a,wt.b,st).newEdge)+hn,ds=Number(DA(wt.b,wt.c,st).newEdge)+hn,un=Number(DA(wt.c,wt.a,st).newEdge)+hn,V0(dr,Qn,ds,un,wt.materialIndex),V0(dr,wt.a,Qn,un,wt.materialIndex),V0(dr,wt.b,ds,Qn,wt.materialIndex),V0(dr,wt.c,un,ds,wt.materialIndex),rt&&(Nn=$[o],gn=Nn[0],Zn=Nn[1],xu=Nn[2],au.set(Vd(gn.x,Zn.x),Vd(gn.y,Zn.y)),Vv.set(Vd(Zn.x,xu.x),Vd(Zn.y,xu.y)),wu.set(Vd(gn.x,xu.x),Vd(gn.y,xu.y)),z0(us,au,Vv,wu),z0(us,gn,au,wu),z0(us,Zn,Vv,au),z0(us,xu,wu,Vv));e.vertices=_s,e.faces=dr,rt&&(e.faceVertexUvs[0]=us)}},Bi=new _,bI=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,a){let i=e.geometry??(a==null?void 0:a.geometry)??new Pe().copy(new vi(100,100,100)),o;a===void 0?(i.computeBoundingBox(),i.boundingBox.getSize(Bi),o={width:Bi.x,height:Bi.y,depth:Bi.z,subdivisions:0}):o=a.parameters;let c={...o,...e.parameters};return{parameters:{width:Math.abs(c.width),height:Math.abs(c.height),depth:Math.abs(c.depth),subdivisions:Math.abs(c.subdivisions)},geometry:i}}static build(e){let{width:a,height:i,depth:o,subdivisions:c}=e.parameters,d=e.geometry??new Pe().copy(new vi(100,100,100)),g=d.userData.parameters;g===void 0?(d.computeBoundingBox(),d.boundingBox.getSize(Bi)):Bi.set(g.width,g.height,g.depth),(a!==Bi.x||i!==Bi.y||o!==Bi.z)&&d.scale(Bi.x===0?1:a/Bi.x,Bi.y===0?1:i/Bi.y,Bi.z===0?1:o/Bi.z);let b=d.originalGeometry;try{c>0?(b===void 0||(g==null?void 0:g.subdivisions)!==c)&&(b===void 0&&(b=d),d=new U0(c).modify(b).toBufferGeometry()):(b!==void 0&&(d=b),b=void 0,d.getAttribute("normal")===void 0&&d.computeVertexNormals())}catch{b!==void 0&&(d=b),b=void 0,d.getAttribute("normal")===void 0&&d.computeVertexNormals()}return b!==void 0&&Object.assign(d,{originalGeometry:b}),delete e.geometry,Object.assign(d,{userData:{...e,type:"NonParametricGeometry"}})}static loadFromUrl(e,a,i){new oh(i).load(e,o=>{let c=this.normalizeInputs({geometry:o});o.boundingBox.getSize(Bi);let d=100/Bi.x;Object.assign(c.parameters,{width:100,height:Bi.y*d,depth:Bi.z*d}),a(this.build(c))})}},G0=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,a){let i=Object.assign({},(a==null?void 0:a.parameters)??{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters);return{shape:e.shape&&e.shape instanceof Xt?e.shape:new Xt,parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??0)})}}static build(e){let{width:a,height:i,spikes:o,cornerRadius:c,depth:d,extrudeBevelSize:g,extrudeBevelSegments:b}=e.parameters,j=e.shape,$=a*.5,rt=i*.5,_e=0,st=0,ut=2*Math.PI/o;for(let yt=0;yt<o;yt++){let Pt=ut*yt,wt=_e+Math.sin(Pt)*$,Ct=st+Math.cos(Pt)*rt;j.addPoint(j.createPoint(wt,Ct))}j.isClosed=!0;for(let yt=0,Pt=j.points.length;yt<Pt;yt++)j.points[yt].roundness=c;j.roundness=c,j.update();let gt=Gn.create({shape:j,parameters:{roundness:c,depth:d,extrudeBevelSize:g,extrudeBevelSegments:b}});return Object.assign(gt,{userData:{...e,type:"PolygonGeometry"}})}},SI=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,a){let i=Object.assign({},(a==null?void 0:a.parameters)??{width:100,radialSegments:4,heightSegments:1,cornerRadius:0,cornerSegments:8,openEnded:!1},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width)})}}static build(e){let{width:a,height:i,depth:o,radialSegments:c,heightSegments:d,openEnded:g,cornerRadius:b,cornerSegments:j}=e.parameters,$=new RA(a*.5,i,c,d,g,b,j);return $.scale(1,1,o/a),Object.assign($,{userData:{...e,type:"PyramidGeometry"}})}};function Tm(e,a,i){i.x=e.x*a.x,i.y=e.y,i.z=e.x*a.y}function IA(e,a,i,o,c,d){let g=a.clone().sub(e),b=i.clone().sub(e),j=g.angleTo(b);if(g.normalize(),b.normalize(),o===c){let $=g.add(b).normalize();d.copy(e).addScaledVector($,o/Math.sin(j/2))}else{let $=g.angleTo(b);d.copy(e),d.addScaledVector(g,c/Math.sin($)),d.addScaledVector(b,o/Math.sin($))}}function D7(e,a,i){let o=e.clone().sub(a),c=i.clone().sub(a);return o.projectOnVector(c),o.add(a)}var RA=class extends Pe{constructor(e=.5,a=1,i=4,o=1,c=!1,d=0,g=4){super(),i=Math.floor(Math.max(3,i)),o=Math.floor(o),g=Math.floor(g);let b=[],j=[],$=[],rt=[],_e=0,st=a/2,ut=Math.PI/i,gt=e*Math.cos(Math.PI/i),yt=2*Math.PI/i,Pt=(i-2)*Math.PI/i,wt=Math.PI-Pt,Ct=new _(0,-st,0),At=new _(0,st,0),Tt=new z$2(e,-st),kt=new z$2(gt,-st),It=new z$2(0,At.y).sub(kt),Lt=new z$2(0,At.y).sub(Tt),Ft=new z$2(It.y,-It.x).normalize(),Nt=new z$2(Lt.y,-Lt.x).normalize(),Ht=e*Math.cos(Math.PI/i)*Math.tan((Math.PI-It.angle())/2)-1e-8;d=Math.min(d,Ht);let Gr;{let un=new _(Ft.x,Ft.y,0),dr=new _(Math.cos(yt)*un.x,un.y,Math.sin(yt)*un.x);Gr=un.angleTo(dr)}let hs=d/Math.tan((Math.PI-It.angle())/2),_s=d/Math.tan((Math.PI-Gr)/2),hn=new _;if(!c){j.push(Ct.x,Ct.y,Ct.z),$.push(0,-1,0),rt.push(0,0);let un=_e++,dr=[],us=Tt.clone(),Nn=hs/Math.cos(Math.PI/i);us.x-=Nn;for(let gn=0;gn<i;gn++){let Zn=gn/i*Math.PI*2+ut,xu=new z$2(Math.sin(Zn),Math.cos(Zn));Tm(us,xu,hn),j.push(hn.x,hn.y,hn.z),$.push(0,-1,0),rt.push(0,0),dr.push(_e++)}for(let gn=0;gn<dr.length;gn++)b.push(dr[gn],un,dr[(gn+1)%dr.length])}{let un=new _,dr=new _,us=new _,Nn=new _,gn=new _,Zn=new _;for(let xu=0;xu<i;xu++){let au=xu/i*Math.PI*2+ut,Vv=(xu+.5)/i*Math.PI*2+ut,wu=(xu+1)/i*Math.PI*2+ut,a1=new z$2(Math.sin(au),Math.cos(au)),P0=new z$2(Math.sin(Vv),Math.cos(Vv)),B0=new z$2(Math.sin(wu),Math.cos(wu));Tm(Tt,a1,dr),Tm(Tt,B0,us),Tm(Ft,P0,un),IA(At,dr,us,_s,_s,Nn),j.push(Nn.x,Nn.y,Nn.z),IA(dr,At,us,_s,hs,gn),j.push(gn.x,gn.y,gn.z),IA(us,dr,At,hs,_s,Zn),j.push(Zn.x,Zn.y,Zn.z),$.push(un.x,un.y,un.z),$.push(un.x,un.y,un.z),$.push(un.x,un.y,un.z),rt.push(0,0),rt.push(0,0),rt.push(0,0);let q1=_e++,ox=_e++,N_=_e++;if(b.push(q1,ox,N_),d>0){{let tA=dr.clone().add(us).multiplyScalar(.5),aR=At.clone().sub(tA).normalize(),sR=Ct.clone().sub(tA).normalize().add(aR).normalize().multiplyScalar(-1),AA=Zn.clone().sub(gn);Qn(tA,AA,sR,It.angle())}let eS,tS;{let tA=new _;Tm(Nt,B0,tA);let aR=Zn.clone().add(Nn).multiplyScalar(.5);aR=D7(aR,us,At);let sR=Zn.clone().sub(Nn);[eS,tS]=Qn(aR,sR,tA,Gr,Nn.y)}{let tA=eS,aR=tA.clone().setY(0).normalize(),sR=new _(0,-1,0),AA=aR.clone().cross(sR);ds(tA,aR,sR,AA)}{let tA=It.angle(),aR=Math.PI-tA,sR=At.clone();sR.y-=d/Math.sin(tA-Math.PI/2);let AA=new _,SA=[];for(let pO=0;pO<g;pO++){let Su=[],mu=Math.PI/2-aR*pO/g,ax=Math.cos(mu),tE=Math.sin(mu),So=Vv;for(let fD=0;fD<=pO;fD++){let C3=Math.cos(So),q3=Math.sin(So);un.x=ax*q3,un.y=tE,un.z=ax*C3,AA.copy(sR).addScaledVector(un,d),j.push(AA.x,AA.y,AA.z),$.push(un.x,un.y,un.z),rt.push(0,0),Su.push(_e++),So+=Math.PI*2/pO/i}SA.push(Su)}tS.reverse(),SA.push(tS);let IO=SA.length-1;for(let pO=0;pO<IO;pO++){let Su=SA[pO],mu=SA[pO+1],ax=Su.length-1;b.push(mu[1],Su[0],mu[0]);for(let tE=1;tE<=ax;tE++)b.push(Su[tE],Su[tE-1],mu[tE]),b.push(mu[tE+1],Su[tE],mu[tE])}}}}}this.setIndex(b),this.setAttribute("position",new Te(j,3)),this.setAttribute("normal",new Te($,3)),this.setAttribute("uv",new Te(rt,2));function Qn(un,dr,us,Nn,gn){let Zn=-Nn/2,xu=(Math.PI-Nn)/2,au=dr.clone().normalize().cross(us);un.addScaledVector(us,-d/Math.sin(xu));let Vv=new _,wu=new _,a1=1,P0=_e,B0=[];for(let q1=0;q1<=g;q1++){let ox=Zn+q1/g*Nn;wu.set(0,0,0),wu.addScaledVector(au,Math.sin(ox)),wu.addScaledVector(us,Math.cos(ox));for(let N_=0;N_<=a1;N_++){let eS=N_/a1-.5;if(Vv.copy(un),Vv.addScaledVector(dr,eS),Vv.addScaledVector(wu,d),gn!=null){let tS=Math.max(0,Vv.y-gn);Vv.addScaledVector(dr,-tS/dr.y)}j.push(Vv.x,Vv.y,Vv.z),$.push(wu.x,wu.y,wu.z),rt.push(0,0),N_===0&&B0.push(_e),_e++}}for(let q1=0;q1<g;q1++)for(let ox=0;ox<a1;ox++){let N_=P0+ox+(a1+1)*q1,eS=N_+(a1+1),tS=eS+1,tA=N_+1;b.push(N_,eS,tA),b.push(eS,tS,tA)}return[un.clone().addScaledVector(dr,.5),B0]}function ds(un,dr,us,Nn){let gn=Math.PI/2,Zn=Lt.angle()-gn,xu=[],au=new _,Vv=new _;for(let a1=0;a1<=g;a1++){let P0=[],B0=a1/g;for(let q1=0;q1<=a1;q1++){let ox=((a1?q1/a1:0)-.5)*wt,N_=Math.cos(ox),eS=Math.sin(ox),tS=Math.atan(Math.tan(Zn)*N_),tA=(gn+tS)*B0,aR=Math.cos(tA),sR=Math.sin(tA);au.set(0,0,0),au.addScaledVector(dr,sR*N_),au.addScaledVector(us,aR),au.addScaledVector(Nn,sR*eS),Vv.copy(un).addScaledVector(au,d),j.push(Vv.x,Vv.y,Vv.z),$.push(au.x,au.y,au.z),rt.push(0,0),P0.push(_e++)}xu.push(P0)}let wu=xu.length-1;for(let a1=0;a1<wu;a1++){let P0=xu[a1],B0=xu[a1+1],q1=P0.length-1;b.push(P0[0],B0[1],B0[0]);for(let ox=1;ox<=q1;ox++)b.push(P0[ox-1],P0[ox],B0[ox]),b.push(P0[ox],B0[ox+1],B0[ox])}}}},zd=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,a){let i=Object.assign({},(a==null?void 0:a.parameters)??{width:100,depth:0,cornerRadius:[0,0,0,0],cornerType:1,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters),o=Object.assign((a==null?void 0:a.ui)??{enabledIndieCorners:!1},e.ui);return{shape:e.shape&&e.shape instanceof Xt?e.shape:new Xt,parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??0)}),ui:o}}static build(e){let a=e.shape,{width:i,height:o,cornerRadius:c,cornerType:d,depth:g,extrudeBevelSize:b,extrudeBevelSegments:j}=e.parameters,$={x:i*.5,y:o*.5},rt={x:-$.x,y:-$.y},_e={x:$.x,y:$.y};function st(Tt,kt,It){return kt>i&&It>o?Math.min(Tt*i/kt,Tt*o/It):kt>i?Tt*i/kt:It>o?Tt*o/It:Tt}let ut=[];ut[0]=c[0]===0?0:st(c[0],c[0]+c[3],c[0]+c[1]),ut[1]=c[1]===0?0:st(c[1],c[1]+c[2],c[1]+c[0]),ut[2]=c[2]===0?0:st(c[2],c[2]+c[1],c[2]+c[3]),ut[3]=c[3]===0?0:st(c[3],c[3]+c[0],c[3]+c[2]);let gt=rt.x,yt=_e.x,Pt=_e.y,wt=rt.y;a.addPoint(a.createPoint(gt,Pt)),a.addPoint(a.createPoint(yt,Pt)),a.addPoint(a.createPoint(yt,wt)),a.addPoint(a.createPoint(gt,wt)),a.isClosed=!0;let Ct=!0;for(let Tt=0,kt=a.points.length;Tt<kt;Tt++)a.points[Tt].roundness=ut[Tt],Tt>0&&ut[Tt]!==ut[Tt-1]&&(Ct=!1);Ct&&(a.roundness=ut[0]),a.useCubicForRoundedCorners=d!==1,a.update();let At=Gn.create({shape:a,parameters:{depth:g,extrudeBevelSize:b,extrudeBevelSegments:j}});return Object.assign(At,{userData:{...e,type:"RectangleGeometry"}})}},wI=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,a){let i=Object.assign({},(a==null?void 0:a.parameters)??{width:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:180},e.parameters);return i.thetaLength=Me.clamp(i.thetaLength,0,180),{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width)})}}static build(e){let{width:a=100,height:i=a,depth:o=a,widthSegments:c=64,heightSegments:d=64,phiStart:g,phiLength:b,thetaStart:j,thetaLength:$}=e.parameters,rt;return $===0?(rt=new Pe,rt.setAttribute("position",new Te([],3))):rt=new Ys(.5*a,c,d,g,b,j,$*Me.DEG2RAD),rt.scale(1,i/a,o/a),Object.assign(rt,{userData:{...e,type:"SphereGeometry"}})}},AI=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,a){let i=Object.assign({},(a==null?void 0:a.parameters)??{width:100,depth:0,widthSegments:8,heightSegments:8},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:0})}}static build(e){let{width:a=100,height:i=a,widthSegments:o=8,heightSegments:c=8}=e.parameters,d=new wn(a,i,o,c);return d.scale(1,1,1),Object.assign(d,{userData:{...e,type:"PlaneGeometry"}})}},_I=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,a){let i=Object.assign({},(a==null?void 0:a.parameters)??{width:100,angle:90,cornerRadius:24,cornerSegments:8},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width)})}}static build(e){let{width:a,height:i,depth:o,angle:c,cornerRadius:d,cornerSegments:g}=e.parameters,b=new LA(a,i,o,c,d,g);return Object.assign(b,{userData:{...e,type:"BackdropGeometry"}})}},LA=class extends Pe{constructor(e=1,a=1,i=1,o=90,c=10,d=24){super(),this.type="BackdropGeometry";let g=[],b=[],j=[],$=.001;c==0&&(d=1),d=Math.max(1,Math.floor(d)),c=Math.min(c,100),o=Math.min(180-$,o),o*=Math.PI/180;let rt=[],_e=Math.PI/2,st=(a1=0,P0=0,B0=0)=>new _(a1,P0,B0),ut=st(),gt=st(),[yt,Pt,wt]=[a/2,e/2,i/2],Ct=-Pt,At=+Pt,[Tt,kt,It]=[st(Ct,-yt,+wt),st(Ct,-yt,-wt),st(Ct,+yt,-wt)],Lt=(a1,P0=!1)=>Math.sin(a1-Math.PI/(1+ +P0)),Ft=(a1,P0=!1)=>Math.cos(a1-Math.PI/(1+ +P0));It.y=Math.sin(o)*a-yt;let Nt=Math.cos(o)*a-wt,Ht=Tt.z-$;o<=_e?(It.z=Math.min(Nt,Ht),It.z==Ht&&(It.y-=(Nt-Ht)/Math.tan(_e-o))):kt.z=Math.min(kt.z-Nt-wt,Tt.z-$),ut.subVectors(Tt,kt),gt.subVectors(It,kt);let Gr=Math.min(ut.length(),gt.length())*c/100,hs=Gr*Math.tan(o/2),_s=Gr/Math.cos(o/2),hn=ut.clone().normalize().add(gt.normalize()).setLength(_s).add(kt);ut.set(0,Lt(o,!0),Ft(o,!0)),rt.push([It,ut.clone()]);let Qn=(Math.PI-o)/d;for(let a1=0;a1<=d;a1++){let P0=_e+o+a1*Qn;ut.set(0,Math.sin(P0)*hs,Math.cos(P0)*hs),ut.add(hn),gt.set(0,Lt(P0),Ft(P0)),rt.push([ut.clone(),gt.clone()])}rt.push([Tt,st(0,1,0)]);let ds=Math.sin(Qn/2)*hs*2,un=rt.length-1,dr=rt[0][0].distanceTo(rt[1][0]),us=rt[un-1][0].distanceTo(rt[un][0]),Nn=dr+ds*d+us;rt[0].push(1);for(let a1=0;a1<=d;a1++)rt[a1+1].push(1-(dr+a1*ds)/Nn);rt[un].push(0);let[gn,Zn,xu]=rt[0],au,Vv,wu;for(let a1=1;a1<rt.length;a1++)[au,Vv,wu]=rt[a1],g.push(Ct,gn.y,gn.z,Ct,au.y,au.z,At,gn.y,gn.z,At,gn.y,gn.z,Ct,au.y,au.z,At,au.y,au.z),b.push(0,Zn.y,Zn.z,0,Vv.y,Vv.z,0,Zn.y,Zn.z,0,Zn.y,Zn.z,0,Vv.y,Vv.z,0,Vv.y,Vv.z),j.push(0,xu,0,wu,1,xu,1,xu,0,wu,1,wu),[gn,Zn,xu]=[au,Vv,wu];this.setAttribute("position",new Te(g,3)),this.setAttribute("normal",new Te(b,3)),this.setAttribute("uv",new Te(j,2))}},j0=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,a){let i=Object.assign({},(a==null?void 0:a.parameters)??{width:100,depth:0,innerRadiusPercent:38.19,spikes:5,cornerRadius:0,angle:360,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return{shape:e.shape&&e.shape instanceof Xt?e.shape:new Xt,parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??0)})}}static build(e){let{width:a,height:i,innerRadiusPercent:o,spikes:c,cornerRadius:d,angle:g,depth:b,extrudeBevelSize:j,extrudeBevelSegments:$}=e.parameters,rt=e.shape,_e=a*.5,st=i*.5,ut=0,gt=0,yt=g*Math.PI/360/c,Pt=Math.PI/2*3*-1,wt=_e*o/100,Ct=st*o/100;if(c===3&&o===50){yt=2*Math.PI/c;for(let Tt=0;Tt<c;Tt++){let kt=yt*Tt,It=ut+Math.sin(kt)*_e,Lt=gt+Math.cos(kt)*st;rt.addPoint(rt.createPoint(It,Lt))}}else for(let Tt=0;Tt<c;Tt++){let kt=ut+Math.cos(Pt)*_e,It=gt+Math.sin(Pt)*st;rt.addPoint(rt.createPoint(kt,It)),Pt+=yt,kt=ut+Math.cos(Pt)*wt,It=gt+Math.sin(Pt)*Ct,rt.addPoint(rt.createPoint(kt,It)),Pt+=yt}rt.isClosed=!0;for(let Tt=0,kt=rt.points.length;Tt<kt;Tt++)rt.points[Tt].roundness=d;rt.roundness=d,rt.update();let At=Gn.create({shape:rt,parameters:{roundness:d,depth:b,extrudeBevelSize:j,extrudeBevelSegments:$}});return Object.assign(At,{userData:{...e,type:"StarGeometry"}})}},EI=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,a){let i=Object.assign({},(a==null?void 0:a.parameters)??{width:100,depth:0},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??0)})}}static build(e){let{width:a,height:i}=e.parameters,o=new wn(a,i);return Object.assign(o,{userData:{...e,type:"TextFrameGeometry"}})}},TI=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,a){let i=Object.assign({},(a==null?void 0:a.parameters)??{width:100,radialSegments:32,tubularSegments:64,arc:360,cornerRadius:30,cornerSegments:8},e.parameters),o=Math.abs(i.width),c=Math.abs(i.height??i.width),d=Math.round(Math.abs(i.depth??i.width*.25));return{parameters:Object.assign(i,{width:o,height:c,depth:d})}}static build(e){let{width:a,height:i,depth:o,radialSegments:c,tubularSegments:d,arc:g,cornerRadius:b,cornerSegments:j}=e.parameters,$=O7(a,i,o,a*.5,g,d,0,0,c,b,j);return $.scale(1,i/a,1),Object.assign($,{userData:{...e,type:"TorusGeometry"}})}};function O7(e,a,i,o,c,d,g,b,j,$,rt){[a,i]=[i,a],g=a/2;let _e=Me.clamp(c/360,0,1);if(_e===0){let st=new Pe;return st.setAttribute("position",new Te([],3)),st}return _e===1&&($=0),new _m(!0,e,a,i,o,_e,d,g,b,j,$,rt)}var MI=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,a){let i=Object.assign({},(a==null?void 0:a.parameters)??{width:100,tubularSegments:64,radialSegments:32,p:2,q:3},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width),tube:i.tube??i.width*.125})}}static build(e){let{width:a,tube:i,tubularSegments:o,radialSegments:c,p:d,q:g}=e.parameters,b=a*.5;b!==i&&(b-=i);let j=new eh(b,i,o,c,d,g);return Object.assign(j,{userData:{...e,type:"TorusKnotGeometry"}})}},CI=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,a){let i=Object.assign({},(a==null?void 0:a.parameters)??{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1,isRect:!1},e.parameters);return{shape:e.shape&&e.shape instanceof Xt?e.shape:new Xt,parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width*(i.isRect?1:Math.sqrt(3)/2)),depth:Math.abs(i.depth??0)})}}static build(e){let{width:a=100,height:i,cornerRadius:o,depth:c,extrudeBevelSize:d,extrudeBevelSegments:g,isRect:b}=e.parameters,j=e.shape,$=a*.5,rt=i*.5;b?(j.addPoint(j.createPoint(-$,rt)),j.addPoint(j.createPoint($,-rt)),j.addPoint(j.createPoint(-$,-rt))):(j.addPoint(j.createPoint(0,rt)),j.addPoint(j.createPoint($,-rt)),j.addPoint(j.createPoint(-$,-rt))),j.isClosed=!0;for(let st=0,ut=j.points.length;st<ut;st++)j.points[st].roundness=o;j.roundness=o,j.update();let _e=Gn.create({shape:j,parameters:{roundness:o,depth:c,extrudeBevelSize:d,extrudeBevelSegments:g}});return Object.assign(_e,{userData:{...e,type:"TriangleGeometry"}})}};function PI$1(e,a){let i=2*Math.PI;return(e%i+i)%i===(a%i+i)%i}var BA=class{add(e,a,i){if(typeof arguments[0]!="string")for(let o in arguments[0])this.add(o,arguments[0][o],arguments[1]);else(Array.isArray(e)?e:[e]).forEach(function(o){this[o]=this[o]||[],a&&this[o][i?"unshift":"push"](a)},this)}run(e,a){this[e]=this[e]||[],this[e].forEach(function(i){i.call(a&&a.context?a.context:a,a)})}},NA=class{constructor(e){this.jsep=e,this.registered={}}register(...e){e.forEach(a=>{if(typeof a!="object"||!a.name||!a.init)throw new Error("Invalid JSEP plugin format");this.registered[a.name]||(a.init(this.jsep),this.registered[a.name]=a)})}},fe$1=class{static get version(){return"1.3.8"}static toString(){return"JavaScript Expression Parser (JSEP) v"+fe$1.version}static addUnaryOp(a){return fe$1.max_unop_len=Math.max(a.length,fe$1.max_unop_len),fe$1.unary_ops[a]=1,fe$1}static addBinaryOp(a,i,o){return fe$1.max_binop_len=Math.max(a.length,fe$1.max_binop_len),fe$1.binary_ops[a]=i,o?fe$1.right_associative.add(a):fe$1.right_associative.delete(a),fe$1}static addIdentifierChar(a){return fe$1.additional_identifier_chars.add(a),fe$1}static addLiteral(a,i){return fe$1.literals[a]=i,fe$1}static removeUnaryOp(a){return delete fe$1.unary_ops[a],a.length===fe$1.max_unop_len&&(fe$1.max_unop_len=fe$1.getMaxKeyLen(fe$1.unary_ops)),fe$1}static removeAllUnaryOps(){return fe$1.unary_ops={},fe$1.max_unop_len=0,fe$1}static removeIdentifierChar(a){return fe$1.additional_identifier_chars.delete(a),fe$1}static removeBinaryOp(a){return delete fe$1.binary_ops[a],a.length===fe$1.max_binop_len&&(fe$1.max_binop_len=fe$1.getMaxKeyLen(fe$1.binary_ops)),fe$1.right_associative.delete(a),fe$1}static removeAllBinaryOps(){return fe$1.binary_ops={},fe$1.max_binop_len=0,fe$1}static removeLiteral(a){return delete fe$1.literals[a],fe$1}static removeAllLiterals(){return fe$1.literals={},fe$1}get char(){return this.expr.charAt(this.index)}get code(){return this.expr.charCodeAt(this.index)}constructor(a){this.expr=a,this.index=0}static parse(a){return new fe$1(a).parse()}static getMaxKeyLen(a){return Math.max(0,...Object.keys(a).map(i=>i.length))}static isDecimalDigit(a){return a>=48&&a<=57}static binaryPrecedence(a){return fe$1.binary_ops[a]||0}static isIdentifierStart(a){return a>=65&&a<=90||a>=97&&a<=122||a>=128&&!fe$1.binary_ops[String.fromCharCode(a)]||fe$1.additional_identifier_chars.has(String.fromCharCode(a))}static isIdentifierPart(a){return fe$1.isIdentifierStart(a)||fe$1.isDecimalDigit(a)}throwError(a){let i=new Error(a+" at character "+this.index);throw i.index=this.index,i.description=a,i}runHook(a,i){if(fe$1.hooks[a]){let o={context:this,node:i};return fe$1.hooks.run(a,o),o.node}return i}searchHook(a){if(fe$1.hooks[a]){let i={context:this};return fe$1.hooks[a].find(function(o){return o.call(i.context,i),i.node}),i.node}}gobbleSpaces(){let a=this.code;for(;a===fe$1.SPACE_CODE||a===fe$1.TAB_CODE||a===fe$1.LF_CODE||a===fe$1.CR_CODE;)a=this.expr.charCodeAt(++this.index);this.runHook("gobble-spaces")}parse(){this.runHook("before-all");let a=this.gobbleExpressions(),i=a.length===1?a[0]:{type:fe$1.COMPOUND,body:a};return this.runHook("after-all",i)}gobbleExpressions(a){let i=[],o,c;for(;this.index<this.expr.length;)if(o=this.code,o===fe$1.SEMCOL_CODE||o===fe$1.COMMA_CODE)this.index++;else if(c=this.gobbleExpression())i.push(c);else if(this.index<this.expr.length){if(o===a)break;this.throwError('Unexpected "'+this.char+'"')}return i}gobbleExpression(){let a=this.searchHook("gobble-expression")||this.gobbleBinaryExpression();return this.gobbleSpaces(),this.runHook("after-expression",a)}gobbleBinaryOp(){this.gobbleSpaces();let a=this.expr.substr(this.index,fe$1.max_binop_len),i=a.length;for(;i>0;){if(fe$1.binary_ops.hasOwnProperty(a)&&(!fe$1.isIdentifierStart(this.code)||this.index+a.length<this.expr.length&&!fe$1.isIdentifierPart(this.expr.charCodeAt(this.index+a.length))))return this.index+=i,a;a=a.substr(0,--i)}return!1}gobbleBinaryExpression(){let a,i,o,c,d,g,b,j,$;if(g=this.gobbleToken(),!g||(i=this.gobbleBinaryOp(),!i))return g;for(d={value:i,prec:fe$1.binaryPrecedence(i),right_a:fe$1.right_associative.has(i)},b=this.gobbleToken(),b||this.throwError("Expected expression after "+i),c=[g,d,b];i=this.gobbleBinaryOp();){if(o=fe$1.binaryPrecedence(i),o===0){this.index-=i.length;break}d={value:i,prec:o,right_a:fe$1.right_associative.has(i)},$=i;let rt=_e=>d.right_a&&_e.right_a?o>_e.prec:o<=_e.prec;for(;c.length>2&&rt(c[c.length-2]);)b=c.pop(),i=c.pop().value,g=c.pop(),a={type:fe$1.BINARY_EXP,operator:i,left:g,right:b},c.push(a);a=this.gobbleToken(),a||this.throwError("Expected expression after "+$),c.push(d,a)}for(j=c.length-1,a=c[j];j>1;)a={type:fe$1.BINARY_EXP,operator:c[j-1].value,left:c[j-2],right:a},j-=2;return a}gobbleToken(){let a,i,o,c;if(this.gobbleSpaces(),c=this.searchHook("gobble-token"),c)return this.runHook("after-token",c);if(a=this.code,fe$1.isDecimalDigit(a)||a===fe$1.PERIOD_CODE)return this.gobbleNumericLiteral();if(a===fe$1.SQUOTE_CODE||a===fe$1.DQUOTE_CODE)c=this.gobbleStringLiteral();else if(a===fe$1.OBRACK_CODE)c=this.gobbleArray();else{for(i=this.expr.substr(this.index,fe$1.max_unop_len),o=i.length;o>0;){if(fe$1.unary_ops.hasOwnProperty(i)&&(!fe$1.isIdentifierStart(this.code)||this.index+i.length<this.expr.length&&!fe$1.isIdentifierPart(this.expr.charCodeAt(this.index+i.length)))){this.index+=o;let d=this.gobbleToken();return d||this.throwError("missing unaryOp argument"),this.runHook("after-token",{type:fe$1.UNARY_EXP,operator:i,argument:d,prefix:!0})}i=i.substr(0,--o)}fe$1.isIdentifierStart(a)?(c=this.gobbleIdentifier(),fe$1.literals.hasOwnProperty(c.name)?c={type:fe$1.LITERAL,value:fe$1.literals[c.name],raw:c.name}:c.name===fe$1.this_str&&(c={type:fe$1.THIS_EXP})):a===fe$1.OPAREN_CODE&&(c=this.gobbleGroup())}return c?(c=this.gobbleTokenProperty(c),this.runHook("after-token",c)):this.runHook("after-token",!1)}gobbleTokenProperty(a){this.gobbleSpaces();let i=this.code;for(;i===fe$1.PERIOD_CODE||i===fe$1.OBRACK_CODE||i===fe$1.OPAREN_CODE||i===fe$1.QUMARK_CODE;){let o;if(i===fe$1.QUMARK_CODE){if(this.expr.charCodeAt(this.index+1)!==fe$1.PERIOD_CODE)break;o=!0,this.index+=2,this.gobbleSpaces(),i=this.code}this.index++,i===fe$1.OBRACK_CODE?(a={type:fe$1.MEMBER_EXP,computed:!0,object:a,property:this.gobbleExpression()},this.gobbleSpaces(),i=this.code,i!==fe$1.CBRACK_CODE&&this.throwError("Unclosed ["),this.index++):i===fe$1.OPAREN_CODE?a={type:fe$1.CALL_EXP,arguments:this.gobbleArguments(fe$1.CPAREN_CODE),callee:a}:(i===fe$1.PERIOD_CODE||o)&&(o&&this.index--,this.gobbleSpaces(),a={type:fe$1.MEMBER_EXP,computed:!1,object:a,property:this.gobbleIdentifier()}),o&&(a.optional=!0),this.gobbleSpaces(),i=this.code}return a}gobbleNumericLiteral(){let a="",i,o;for(;fe$1.isDecimalDigit(this.code);)a+=this.expr.charAt(this.index++);if(this.code===fe$1.PERIOD_CODE)for(a+=this.expr.charAt(this.index++);fe$1.isDecimalDigit(this.code);)a+=this.expr.charAt(this.index++);if(i=this.char,i==="e"||i==="E"){for(a+=this.expr.charAt(this.index++),i=this.char,(i==="+"||i==="-")&&(a+=this.expr.charAt(this.index++));fe$1.isDecimalDigit(this.code);)a+=this.expr.charAt(this.index++);fe$1.isDecimalDigit(this.expr.charCodeAt(this.index-1))||this.throwError("Expected exponent ("+a+this.char+")")}return o=this.code,fe$1.isIdentifierStart(o)?this.throwError("Variable names cannot start with a number ("+a+this.char+")"):(o===fe$1.PERIOD_CODE||a.length===1&&a.charCodeAt(0)===fe$1.PERIOD_CODE)&&this.throwError("Unexpected period"),{type:fe$1.LITERAL,value:parseFloat(a),raw:a}}gobbleStringLiteral(){let a="",i=this.index,o=this.expr.charAt(this.index++),c=!1;for(;this.index<this.expr.length;){let d=this.expr.charAt(this.index++);if(d===o){c=!0;break}else if(d==="\\")switch(d=this.expr.charAt(this.index++),d){case"n":a+=`
`;break;case"r":a+="\r";break;case"t":a+="	";break;case"b":a+="\b";break;case"f":a+="\f";break;case"v":a+="\v";break;default:a+=d}else a+=d}return c||this.throwError('Unclosed quote after "'+a+'"'),{type:fe$1.LITERAL,value:a,raw:this.expr.substring(i,this.index)}}gobbleIdentifier(){let a=this.code,i=this.index;for(fe$1.isIdentifierStart(a)?this.index++:this.throwError("Unexpected "+this.char);this.index<this.expr.length&&(a=this.code,fe$1.isIdentifierPart(a));)this.index++;return{type:fe$1.IDENTIFIER,name:this.expr.slice(i,this.index)}}gobbleArguments(a){let i=[],o=!1,c=0;for(;this.index<this.expr.length;){this.gobbleSpaces();let d=this.code;if(d===a){o=!0,this.index++,a===fe$1.CPAREN_CODE&&c&&c>=i.length&&this.throwError("Unexpected token "+String.fromCharCode(a));break}else if(d===fe$1.COMMA_CODE){if(this.index++,c++,c!==i.length){if(a===fe$1.CPAREN_CODE)this.throwError("Unexpected token ,");else if(a===fe$1.CBRACK_CODE)for(let g=i.length;g<c;g++)i.push(null)}}else if(i.length!==c&&c!==0)this.throwError("Expected comma");else{let g=this.gobbleExpression();(!g||g.type===fe$1.COMPOUND)&&this.throwError("Expected comma"),i.push(g)}}return o||this.throwError("Expected "+String.fromCharCode(a)),i}gobbleGroup(){this.index++;let a=this.gobbleExpressions(fe$1.CPAREN_CODE);if(this.code===fe$1.CPAREN_CODE)return this.index++,a.length===1?a[0]:a.length?{type:fe$1.SEQUENCE_EXP,expressions:a}:!1;this.throwError("Unclosed (")}gobbleArray(){return this.index++,{type:fe$1.ARRAY_EXP,elements:this.gobbleArguments(fe$1.CBRACK_CODE)}}},I7=new BA;Object.assign(fe$1,{hooks:I7,plugins:new NA(fe$1),COMPOUND:"Compound",SEQUENCE_EXP:"SequenceExpression",IDENTIFIER:"Identifier",MEMBER_EXP:"MemberExpression",LITERAL:"Literal",THIS_EXP:"ThisExpression",CALL_EXP:"CallExpression",UNARY_EXP:"UnaryExpression",BINARY_EXP:"BinaryExpression",ARRAY_EXP:"ArrayExpression",TAB_CODE:9,LF_CODE:10,CR_CODE:13,SPACE_CODE:32,PERIOD_CODE:46,COMMA_CODE:44,SQUOTE_CODE:39,DQUOTE_CODE:34,OPAREN_CODE:40,CPAREN_CODE:41,OBRACK_CODE:91,CBRACK_CODE:93,QUMARK_CODE:63,SEMCOL_CODE:59,COLON_CODE:58,unary_ops:{"-":1,"!":1,"~":1,"+":1},binary_ops:{"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},right_associative:new Set,additional_identifier_chars:new Set(["$","_"]),literals:{true:!0,false:!1,null:null},this_str:"this"});fe$1.max_unop_len=fe$1.getMaxKeyLen(fe$1.unary_ops);fe$1.max_binop_len=fe$1.getMaxKeyLen(fe$1.binary_ops);var Wc=e=>new fe$1(e).parse(),R7=Object.getOwnPropertyNames(fe$1);R7.forEach(e=>{Wc[e]===void 0&&e!=="prototype"&&(Wc[e]=fe$1[e])});Wc.Jsep=fe$1;var L7="ConditionalExpression",B7={name:"ternary",init(e){e.hooks.add("after-expression",function(a){if(a.node&&this.code===e.QUMARK_CODE){this.index++;let i=a.node,o=this.gobbleExpression();if(o||this.throwError("Expected expression"),this.gobbleSpaces(),this.code===e.COLON_CODE){this.index++;let c=this.gobbleExpression();if(c||this.throwError("Expected expression"),a.node={type:L7,test:i,consequent:o,alternate:c},i.operator&&e.binary_ops[i.operator]<=.9){let d=i;for(;d.right.operator&&e.binary_ops[d.right.operator]<=.9;)d=d.right;a.node.test=d.right,d.right=a.node,a.node=i}}else this.throwError("Expected :")}})}};Wc.plugins.register(B7);var N7=["+","-","*","/","(",")","==","!=",">","<",">=","<=","and","or","!","%","^",","],F7=["0","1","2","3","4","5","6","7","8","9","."],k7=["sin","cos","tan","asin","acos","atan","atan2","sqrt","abs","log","exp","floor","ceil","round","min","max","random"];function V7(e){return typeof e!="string"?!1:!isNaN(e)&&!isNaN(parseFloat(e))}Wc.addBinaryOp("^",11,!0);function H0(e,a,i="number"){let o="";for(let g=0;g<e.length;g++){let b=e[g];if("id"in b){let j=e[g-1];if(g>0&&"id"in j){console.error("Two variables in a row",e);return}let $=a.getVariable(b.id),rt=Yi.getDisplayedValue($);i==="number"&&Yi.isTextValue($)&&Array.isArray($.textValue)&&$.textValue.length===1?rt=parseFloat(rt).toString():i==="boolean"&&Yi.isBoolean($)?rt=$?"true":"false":i==="boolean"&&Yi.isTextValue($)&&!Array.isArray($.textValue)&&(rt='"'+rt+'"'),o+=rt;continue}else if(i==="string"){b.name!=='"'&&b.name!=="+"&&(o+=b.name),b.name==="+"&&o[o.length-1]==="\\"&&(o=o.slice(0,-1)+b.name);continue}if(b.name==="and"){o+="&&";continue}if(b.name==="or"){o+="||";continue}if(b.name==="True"){o+="true";continue}if(b.name==="False"){o+="false";continue}if(i==="boolean"&&!V7(b.name)&&!F7.includes(b.name)&&!N7.includes(b.name)&&!k7.includes(b.name.replace(/\($/g,""))){o+='"'+b.name+'"';continue}o+=b.name}if(i==="string")return o;if(e.length===0){if(i==="number")return 0;if(i==="boolean")return!1}let c;try{c=Wc(o)}catch(g){console.error(o,g);return}let d;try{d=qt(c)}catch(g){console.error(o,c,g)}return d}function qt(e){switch(e.type){case"BinaryExpression":switch(e.operator){case"==":return+(qt(e.left)===qt(e.right));case"!=":return+(qt(e.left)!==qt(e.right));case">":return+(qt(e.left)>qt(e.right));case">=":return+(qt(e.left)>=qt(e.right));case"<":return+(qt(e.left)<qt(e.right));case"<=":return+(qt(e.left)<=qt(e.right));case"+":return qt(e.left)+qt(e.right);case"-":return qt(e.left)-qt(e.right);case"*":return qt(e.left)*qt(e.right);case"/":return qt(e.left)/qt(e.right);case"%":return qt(e.left)%qt(e.right);case"&&":return qt(e.left)&&qt(e.right);case"||":return qt(e.left)||qt(e.right);case"^":return Math.pow(qt(e.left),qt(e.right));default:throw new Error("Unknown operator: "+e.operator)}case"UnaryExpression":switch(e.operator){case"-":return-qt(e.argument);case"!":return+!qt(e.argument);default:throw new Error("Unknown operator: "+e.operator)}case"Identifier":throw new Error("Unknown identifier: "+e.name);case"Literal":return e.value;case"CallExpression":if(e.callee.type==="Identifier"){if(e.callee.name==="random"){let a=0,i=1;if(e.arguments.length>=1)try{a=qt(e.arguments[0])}catch(o){console.warn(o)}if(e.arguments.length>=2)try{i=qt(e.arguments[1])}catch(o){console.warn(o)}return a=Math.min(i,a),i=Math.max(i,a),a+Math.random()*(i-a)}return Math[e.callee.name].apply(null,e.arguments.map(qt))}else throw new Error("Unknown node");default:throw new Error("Unknown node type: "+e.type)}}var z7=new ce$1,U7=new ce$1;function G7(e,a,i){let o=[new _,new _,new _],c=[new _,new _,new _];return e.extractBasis(o[0],o[1],o[2]),a.extractBasis(c[0],c[1],c[2]),o.forEach((d,g)=>{let b=c[g],j=Me.lerp(d.length(),b.length(),i);d.lerp(b,i).setLength(j)}),new ce$1().makeBasis(o[0],o[1],o[2])}var DI=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,a){let i=Object.assign({},(a==null?void 0:a.parameters)??{width:100,height:100,depth:1,subdivisions:12,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters),o=Math.abs(i.width),c=Math.abs(i.height??i.width),d=Math.abs(i.depth??0),g=(a==null?void 0:a.shapeData)??Fd.create({parameters:M1}).userData.shape;return{path:e.path??ed.defaultData(),parameters:Object.assign(i,{width:o,height:c,depth:d,extrusion:{...r0,...i.extrusion}}),shapeData:g}}static build(e){if(e.path.points.length>=2){let a=new FA(e);return Object.assign(a,{userData:{...e,type:"PathGeometry"}})}else return Object.assign(new Pe,{userData:{...e,type:"PathGeometry"}})}},FA=class extends Pe{constructor(e){super(),this.type="PathExtrusionGeometry",this.inputs=e,this.build()}_isGeometryClosed(){return this.inputs.path.isClosed&&this.inputs.parameters.extrusion.depth===1}_isOpenEnded(){let e=this.inputs.parameters.extrusion;return!(this.inputs.path.isClosed&&e.depth===1)||!PI$1(e.twist,0)||e.startScale!==e.endScale}build(){let e=this._extractPathPoints();if(e.length<2)return;let a=this._computeBasisMatrices(e),{depth:i,offset:o}=this.inputs.parameters.extrusion;i=Math.max(0,Math.min(i,1)),o=Math.max(0,Math.min(o,1));let c=this.inputs.path.isClosed?e.length:e.length-1,d=Math.floor(o*c),g=this.inputs.path.isClosed?Math.ceil((i+o)*c):Math.ceil(Math.min(1,i+o)*c),b=Math.min(Math.max(2,g-d+1),c+2),j=[],$=[];for(let un=0;un<b;un++){let dr=this.inputs.path.isClosed?(un+d)%e.length:Math.min(un+d,e.length-1);j.push(e[dr].clone()),$.push(a[dr].clone())}let rt=(un,dr,us)=>{j[un]=j[un].clone().lerp(j[dr],us),$[un]=G7($[un],$[dr],us)},_e=0,st=o*c%1;(!this.inputs.path.isClosed||i<=1)&&(st||o===0)&&(_e=st,rt(0,1,_e));let ut=0,gt=(o+i)*c%1;if((this.inputs.path.isClosed&&i<=1||!this.inputs.path.isClosed&&o+i<1)&&gt&&(ut=gt,rt(j.length-1,j.length-2,1-ut)),i===0){let un=j.length-1;j[un].copy(j[0]),$[un].copy($[0])}this._applyPathModifiers($,_e,ut);let{bevel:yt,bevelSides:Pt}=this.inputs.parameters.extrusion,wt=yt>0?this.inputs.parameters.extrusion.capType:"flat",Ct=5;this.inputs.parameters.extrusion.shape.type==="Custom"&&(Ct=this.inputs.parameters.extrusion.shape.shapeQuality==="low"?5:12);let{regions:At,infos:Tt,vertices:kt}=this._computeShapePoints(Ct),It=0,Lt;wt==="round"&&(Lt=new Hl(this.inputs.shapeData,2*yt,yt,Ct,Pt,void 0,!0),It=Lt.getAttribute("position").count);let Ft=0,Nt=0;Tt.sort((un,dr)=>un.start-dr.start),Tt.forEach(un=>{un.verticesStart=Ft,un.verticesCount=un.continuous.reduce((dr,us,Nn)=>dr+(Nn===0||!us?2:1),0),Nt+=un.verticesCount,Ft=Nt});let Ht=Nt*b,Gr,hs=0;if(this._isOpenEnded()&&wt==="flat"){try{Gr=ro({windingRule:Gt.ODD,elementType:Wr$1.POLYGONS,polySize:3,vertexSize:2,strict:!0,contours:At})}catch{Gr=TA}hs=Gr.vertexCount}let _s=Ht+2*hs+It*2,hn=Ht+2*hs,Qn={positions:new Float32Array(_s*3),normals:new Float32Array(_s*3),uvs:new Float32Array(_s*2)},ds=[];if(Tt.forEach(un=>{this._extrudeRegion(un,kt,$,j,Qn,ds,this._isGeometryClosed()&&!this._isOpenEnded())}),Gr&&(this._closeEnd(Gr,Ht,ds,Qn,$[0],j[0],!1),this._closeEnd(Gr,Ht+hs,ds,Qn,$[$.length-1],j[j.length-1],!0)),Lt){Qn.positions.set(Lt.getAttribute("position").array,hn*3),Qn.normals.set(Lt.getAttribute("normal").array,hn*3),Qn.uvs.set(Lt.getAttribute("uv").array,hn*2);let un=ds.length;ds.push(...Lt.getIndex().array.map(Nn=>Nn+hn)),hn+=It,Qn.positions.set(Lt.getAttribute("position").array,hn*3),Qn.normals.set(Lt.getAttribute("normal").array,hn*3),Qn.uvs.set(Lt.getAttribute("uv").array,hn*2);let dr=ds.length;ds.push(...Lt.getIndex().array.map(Nn=>Nn+hn)),this.setAttribute("position",new Xe(Qn.positions,3)),this.setAttribute("normal",new Xe(Qn.normals,3)),this.setAttribute("uv",new Xe(Qn.uvs,2)),this.setIndex(ds);let us=z7;us.copy($[$.length-1]).setPosition(j[j.length-1]),this.applyMatrix4OnRange(us,hn,_s),us.copy($[0]).setPosition(j[0]).multiply(U7.makeScale(1,1,-1)),this.applyMatrix4OnRange(us,hn-It,hn),this.reverseIndicesOnRange(un,dr)}else this.setAttribute("position",new Xe(Qn.positions,3)),this.setAttribute("normal",new Xe(Qn.normals,3)),this.setAttribute("uv",new Xe(Qn.uvs,2)),this.setIndex(ds)}_extractPathPoints(){let e=D0(this.inputs.path).getPoints(this.inputs.path.subdivisions);if(e.length<2)return[];let a=[e[0]];return e.forEach(i=>{a[a.length-1].distanceToSquared(i)>.001&&a.push(i)}),this.inputs.path.isClosed&&a[a.length-1].distanceTo(a[0])<.001&&a.pop(),a}_computeBasisMatrices(e){let a=[],i=e.length,o=this.inputs.path.isClosed,c=new _,d=new _,g=new _,b=new _,j=new _(0,1,0);for(let gt=0;gt<i;gt++){let yt=e[gt],Pt;gt===0?Pt=o?e[e.length-2]:yt.clone().multiplyScalar(2).sub(e[1]):Pt=e[gt-1];let wt;gt===i-1?wt=o?e[1]:yt.clone().multiplyScalar(2).sub(e[gt-1]):wt=e[gt+1];let Ct=yt.clone().sub(Pt).normalize(),At=wt.clone().sub(yt).normalize(),Tt=Ct.clone().add(At).normalize();g.copy(Tt),gt===0&&(Tt.equals(j)||Tt.clone().negate().equals(j))&&j.set(0,0,1);let kt=j.clone().cross(Tt).normalize(),It=Tt.clone().cross(kt).normalize();j.copy(It),b.copy(kt),gt===0&&(c.copy(It),d.copy(Tt));let Lt=new ce$1().makeBasis(kt,It,Tt);a.push(Lt)}let $=o?d:g,rt=o?c:new _(0,1,0),_e=$.clone().cross(b).normalize(),st=Math.acos(rt.dot(_e));if(isNaN(st))return a;let ut=rt.clone().cross(_e);$.dot(ut)>0&&(st*=-1);for(let gt=1;gt<a.length;gt++){let yt=new ce$1().makeRotationZ(st*gt/a.length);a[gt].multiply(yt)}return a}_applyPathModifiers(e,a,i){let o=e.length,{angle:c,twist:d,startScale:g,endScale:b}=this.inputs.parameters.extrusion,j=new ce$1,$=new ce$1;return e.forEach((rt,_e)=>{let st=_e===0?0:_e===o-1?1:(_e-a)/(o-(i===0?0:1)-(a+(1-i)));j.makeRotationZ(Me.lerp(c,c+d,st)*Me.DEG2RAD);let ut=Me.lerp(g,b,st);$.makeScale(ut,ut,ut),rt.multiply(j).multiply($)}),e}_computeShapePoints(e=12,a=Gt.ODD){let i=this.inputs.shapeData,o=i.extractShapePointsToFlatArray([],e),c=i.shapeHoles.map($=>{let rt=$.extractShapePointsToFlatArray([],e),_e=[];for(let st=rt.length-1;st>=1;st-=2){let ut=rt[st-1],gt=rt[st-0];_e.push(ut,gt)}return _e}),d;try{d=ro({windingRule:a,elementType:Wr$1.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[o]})}catch{d=Am}let g;try{g=ro({windingRule:Gt.ODD,elementType:Wr$1.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...c]})}catch{g=EA}if(!d)throw new Error("error generating geometry");let b=d.elementCount;if(g){d.elementCount+=g.elementCount;for(let $=0;$<g.elements.length;$++){let rt=g.elements[$],_e=$%2===0?d.vertexCount:0;d.elements.push(rt+_e)}for(let $=0;$<g.vertexIndices.length;$++){let rt=g.vertexIndices[$],_e=d.vertexCount;d.vertexIndices.push(rt+_e)}for(let $=0;$<g.vertices.length;$++){let rt=g.vertices[$];d.vertices.push(rt)}}for(let $=0,rt=d.vertexCount;$<rt;$++){let _e=$*2;d.vertices[_e+0],d.vertices[_e+1]}let j=[];for(let $=d.elementCount-1;$>=0;$--){let rt=$>=b,_e=$*2,st=d.elements[_e+0],ut=d.elements[_e+1],gt=st+ut,yt={start:st,count:ut,normals:[],isHole:rt,continuous:[],verticesStart:0,verticesCount:0};j.push(yt);let Pt=st,wt=gt-1,Ct=st+1,At=i.roundedCurves.length;do{let Tt=Pt-st;d.vertices[wt*2+0],d.vertices[wt*2+1];let kt=d.vertices[Pt*2+0],It=d.vertices[Pt*2+1],Lt=d.vertices[Ct*2+0],Ft=d.vertices[Ct*2+1],Nt=kt-Lt,Ht=It-Ft,Gr=Math.sqrt(Nt*Nt+Ht*Ht);Nt/=Gr,Ht/=Gr,yt.normals[Tt*2+0]=-Ht,yt.normals[Tt*2+1]=Nt;let hs=d.vertexIndices[Pt];if(Array.isArray(hs))yt.continuous[Tt]=!1;else{let[_s,hn]=i.getCurveIndexFromVertexId(hs-1,!0);if(hn>0&&hn<1)yt.continuous[Tt]=!0;else{let Qn=hn===1?_s+1:_s-1;Qn=(Qn+At)%At;let ds=hn===1?0:1,un=i.roundedCurves[_s].getTangent(hn),dr=i.roundedCurves[Qn].getTangent(ds);yt.continuous[Tt]=un.dot(dr)>.95}}rt&&(yt.normals[Tt*2+0]*=-1,yt.normals[Tt*2+1]*=-1),[wt,Pt,Ct]=[Pt,Ct,Ct+1],Ct>=gt&&(Ct-=ut)}while(Ct!==st+1)}return{regions:[o,...c],infos:j,vertices:d.vertices}}_insertVertex(e,a,i,o,c){let d=a*2,g=a*3;e.positions[g+0]=i.x,e.positions[g+1]=i.y,e.positions[g+2]=i.z,e.normals[g+0]=o.x,e.normals[g+1]=o.y,e.normals[g+2]=o.z,e.uvs[d+0]=c.x,e.uvs[d+1]=c.y}_extrudeRegion(e,a,i,o,c,d,g){let b=new _,j=new _,$=new _,rt=new _,_e=new z$2;i.forEach((ut,gt)=>{let yt=o[gt],Pt=e.verticesStart*i.length+e.verticesCount*gt;for(let wt=0;wt<e.count;wt++){let Ct=(e.start+wt)*2;if(b.set(a[Ct+0],a[Ct+1],0),$.copy(b).applyMatrix4(ut).add(yt),e.continuous[wt])rt.set(e.normals[wt*2+0],e.normals[wt*2+1],0);else{let At=wt===0?(e.start+e.count-1)*2:Ct-2;j.set(a[At+0],a[At+1],0),rt.copy(b).sub(j),rt.set(-rt.y,rt.x,0),e.isHole||rt.negate()}if(rt.applyMatrix4(ut).normalize(),_e.set(wt===0?1:wt/e.count,gt/(i.length-1)),this._insertVertex(c,Pt,$,rt,_e),Pt++,!e.continuous[wt]||wt===0){if(wt===0)rt.set(e.normals[wt*2+0],e.normals[wt*2+1],0),_e.set(0,gt/(i.length-1));else{let At=wt===e.count-1?e.start*2:Ct+2;j.set(a[At+0],a[At+1],0),rt.copy(j).sub(b),rt.set(-rt.y,rt.x,0),e.isHole||rt.negate()}rt.applyMatrix4(ut).normalize(),this._insertVertex(c,Pt,$,rt,_e),Pt++}}});let st=i.length-1;for(let ut=0;ut<st;ut++){let gt=e.verticesStart*i.length+e.verticesCount*ut,yt=e.verticesStart*i.length+e.verticesCount*(ut+1),Pt=0;for(let wt=0;wt<e.count;wt++){(!e.continuous[wt]||wt===0)&&Pt++;let Ct=wt===e.count-1?0:Pt+1,At=gt+Pt,Tt=gt+Ct,kt=yt+Ct,It=yt+Pt;e.isHole?d.push(At,kt,Tt,At,It,kt):d.push(At,Tt,kt,At,kt,It),Pt++}}}_closeEnd(e,a,i,o,c,d,g){let b=e.vertexCount,j=new _(0,0,g?-1:1).applyMatrix4(c),$=new _,rt=new z$2;for(let st=0;st<b;st++){let ut=2*st;$.set(e.vertices[ut+0],e.vertices[ut+1],0).applyMatrix4(c).add(d),this._insertVertex(o,a+st,$,j,rt)}let _e=e.elements;for(let st=0;st<e.elementCount;st++){let ut=3*st,gt=_e[ut+0]+a,yt=_e[ut+(g?1:2)]+a,Pt=_e[ut+(g?2:1)]+a;i.push(gt,yt,Pt)}}applyMatrix4OnRange(e,a,i){let o=e.elements,c=new nr().getNormalMatrix(e).elements,d,g,b,j,$=this.attributes.position,rt=this.attributes.normal;if(!$||!rt)return;let _e=$.array,st=rt.array,ut=$.itemSize;for(let gt=a*ut,yt=i*ut;gt<yt;gt+=ut){if(gt===a)debugger;d=_e[gt+0],g=_e[gt+1],b=_e[gt+2],j=1/(o[3]*d+o[7]*g+o[11]*b+o[15]),_e[gt+0]=(o[0]*d+o[4]*g+o[8]*b+o[12])*j,_e[gt+1]=(o[1]*d+o[5]*g+o[9]*b+o[13])*j,_e[gt+2]=(o[2]*d+o[6]*g+o[10]*b+o[14])*j,d=st[gt+0],g=st[gt+1],b=st[gt+2],st[gt+0]=c[0]*d+c[3]*g+c[6]*b,st[gt+1]=c[1]*d+c[4]*g+c[7]*b,st[gt+2]=c[2]*d+c[5]*g+c[8]*b}$.needsUpdate=!0,rt.needsUpdate=!0}reverseIndicesOnRange(e,a){let i=this.index;if(i){for(let o=e;o<a;o+=3){let c=i.getX(o),d=i.getX(o+1),g=i.getX(o+2);i.setXYZ(o,g,d,c)}i.needsUpdate=!0}}};function OI(){let e=new Pe;return e.setAttribute("position",new Xe(new Float32Array([]),3)),e.setIndex(new Xe(new Uint16Array([]),1)),e}var H7=OI().attributes,W7=12,q7=1,Ud=class extends Pe{constructor(e,a){super(),this.charWidths=[],this.charCoords=[],this.wrappedText=[],this.isLowResolution=!1,this.vectorShapes=[],Object.assign(this.attributes,H7),this.userData={parameters:e,type:"TextGeometry"};let i=a.getFont(e.font);i!=null&&i.isLoaded?(this.font=i,this.update(e)):this.updateFont(e.font,a).then(()=>{this.update(e),a==null||a.requestRender()})}async updateFont(e,a){let i=a.getFont(e);i&&(this.font=i,await i.loadingPromise)}update(e){let a=this.font;if(this.userData={parameters:e,type:"TextGeometry"},!(a!=null&&a.isLoaded)){console.warn("Cannot update text because its font is not loaded");return}let{width:i,height:o,depth:c,extrudeBevelSize:d,extrudeBevelSegments:g,text:b,textTransform:j}=e,$=Yi.getDisplayedValue(b),rt=j===2?$.toUpperCase():j===3?$.toLowerCase():$,_e=Y7(e,a,rt),{shapes:st,charWidths:ut,charCoords:gt}=a.generateShapes(_e,e),yt=(typeof i=="number"?i:1)*.5,Pt=(typeof o=="number"?o:1)*.5,wt=st.map(Tt=>new Xt().fromShape(Tt,!0));this.vectorShapes=wt;let Ct=wt.map(Tt=>Gn.create({shape:Tt,parameters:{depth:c,extrudeBevelSegments:g,extrudeBevelSize:d,windingRule:c<=0?Gt.NONZERO:Gt.ODD,subdivisions:this.isLowResolution&&c>0?q7:W7}})),At=Ct.length?Js(Ct):OI();At.translate(-yt,Pt,0),this.dispose(),this.wrappedText=_e,this.charCoords=gt,this.charWidths=ut,this.deleteAttribute("extrudeNormal"),Object.entries(At.attributes).forEach(([Tt,kt])=>{this.setAttribute(Tt,kt)}),this.setIndex(At.index),this.computeBoundingSphere()}clone(){let e=_n(new Pe,Ud.prototype);return e.copy(this),console.log("CloneGeometry",this,e),e}copy(e){return Object.entries(e.attributes).forEach(([a,i])=>{this.setAttribute(a,i)}),this.setIndex(e.index),this.userData={parameters:{...e.userData.parameters},type:"TextGeometry"},this}async setText(e){this.font&&await this.font.loadingPromise,await this.update({...this.userData.parameters,text:e})}get text(){return this.userData.parameters.text??""}};function Y7(e,a,i){let o=[""],c="";for(let d of i)c+=d,d===" "||d===`
`?(o[o.length-1]+=c,c="",d===`
`&&o.push("")):a.getTextWidth(o[o.length-1]+c,e)>e.width&&(o[o.length-1].length&&o.push(""),a.getTextWidth(o[o.length-1]+c,e)>e.width&&(c.length===1?(o[o.length-1]+=c,c=""):(o[o.length-1]+=c.slice(0,-1),c=c[c.length-1],o.push(""))));return o[o.length-1]+=c,o}var RI,q0=new Promise(e=>{RI=e}),II=!1,W0;function LI(){if(II)return;if(W0)return W0;async function e(){let a="https://unpkg.com/@splinetool/modelling-wasm@1.0.26/build",i=__vitePreload(()=>import("./process-BcW0pGnR.js"),__vite__mapDeps([])),[o,c]=await Promise.all([i,fetch(`${a}/process.wasm`).then(b=>b.arrayBuffer())]),d=o.default,g=await d({wasmBinary:c});RI(g),II=!0}return W0=e(),W0}var X7=["font"];function Va(e,a,i,o){var $;let c,d,g;e.type==="PathGeometry"?(d=JSON.parse(JSON.stringify(e)),g=[[],["extrusion"]]):(d={...e},g=[[]]);for(let rt of g){let _e=d;for(let st of rt)_e=_e[st];for(c in _e){let st=_e[c];v1(st)&&!X7.includes(c)&&(_e[c]=a.getVariable(st,[o.uuid,"geometry",...rt,c]),v1(_e[c])&&(_e[c]=1))}}let b={parameters:d,type:d.type};if(d.type==="PathGeometry")b.path=d.path;else if(d.type==="VectorGeometry"){let rt=Xt.createFromState(d.shape,d.width,d.height);b.shape=rt}else if(d.type==="NonParametricGeometry")d.data.groups&&(($=d.data.groups)==null||$.forEach(rt=>rt.materialIndex=Math.max(rt.materialIndex??0,0))),b.geometry=new oh().parse(d);else if(d.type==="SubdivGeometry"){let rt=new ai(d,i);return rt.data=e,rt}else{if(d.type==="TextGeometry")return new Ud(d,a);if(d.type==="UIGeometry")return zd.create({parameters:{width:d.width,height:d.height,cornerRadius:d.cornerRadius,cornerType:d.cornerType}})}let j;try{j=kA(b)}catch(rt){console.error(rt)}if(!j){let rt=Xt.createFromState($h.defaultData(),100,100);b.shape=rt,j=kA(b)}return j}var Q7=new ce$1;function Mm(e,a,i,o){let c=e.position.array,d=e.normal.array,g=Q7.makeScale(a,i,o).invert().elements,b,j,$;for(var rt=0,_e=c.length;rt<_e;rt+=3)c[rt]*=a,c[rt+1]*=i,c[rt+2]*=o,b=d[rt],j=d[rt+1],$=d[rt+2],d[rt]=g[0]*b+g[4]*j+g[8]*$,d[rt+1]=g[1]*b+g[5]*j+g[9]*$,d[rt+2]=g[2]*b+g[6]*j+g[10]*$;e.position.needsUpdate=!0,e.normal.needsUpdate=!0}var Y0=new Wt,Gd=new _,ct;q0.then(e=>{ct=e});var BI=new Float32Array([10,10,0,-10,10,0,-10,-10,0,10,-10,0]),NI=new Uint32Array([0,1,2,3]),FI=new Uint8Array([4]),ai=class extends Pe{constructor(e,a){super(),this.data=e,this.flatShading=a,this.subdivPointer=0,this.rebuild(),this.freeSubdivPointer()}mutateDirectlyScaleBaked(e,a){this.freeSubdivPointer();let i=this.data.scaleBaked,o=Lo.div(a,i);this.subdividedGeometry&&Mm(this.subdividedGeometry.attributes,...o),this.originalGeometry&&Mm(this.originalGeometry.attributes,...o),this.data=e;let c=this.userData.parameters;this.userData.parameters={width:c.width*o[0],height:c.height*o[1],depth:c.depth*o[2]},this.originalGeometry.boundingSphere.center.multiply(Gd.fromArray(o));let d=Gd.set(c.width,c.height,c.depth).length();this.originalGeometry.boundingSphere.radius=d/2}ensureSubdivPointer(){return this.subdivPointer===0&&this.rebuild(),this.subdivPointer}rebuild(){let e,a,i;try{({originalGeometry:e,subdividedGeometry:a,subdivPointer:i}=ai.build(this.data,void 0,!this.flatShading,void 0))}catch{e=new vi(100,100,100),i=0}this.subdivPointer=i,this.originalGeometry=e,this.subdividedGeometry=a??void 0;let o=this.subdividedGeometry??this.originalGeometry;Object.assign(this,o),this.calcBoundingBox()}freeSubdivPointer(){this.subdivPointer&&(ai.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0)}dispose(){super.dispose(),this.freeSubdivPointer()}calcBoundingBox(){let e=this.originalGeometry;e.boundingSphere===null&&(e.boundingSphere=new Br,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=e.boundingSphere));let a=e.attributes.position,i=e.boundingSphere.center;Y0.setFromBufferAttribute(a),Y0.getCenter(i),e.boundingSphere.radius=i.distanceTo(Y0.max),isNaN(e.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),Y0.getSize(Gd);let o={width:Gd.x,height:Gd.y,depth:Gd.z};return this.userData.parameters=o,o}static build(e,a,i,o){let c,d,g,b=(e==null?void 0:e.phongAngle)??35;i===!1&&(b=-1),a&&(ct.free_bvh(a),ct.free_subdivision_surface(a));try{c=ai.allocate(e,o)}catch(j){console.error(j,e),c=ai.allocate({positionWASM:BI,indexWASM:NI,verticesPerFaceWASM:FI},o)}if(ct.set_destination_refinement_level(c,0),d=ai.buildLevel(c,!0,b),e.subdivisions>0)try{ct.set_destination_refinement_level(c,e.subdivisions),g=ai.buildLevel(c,!1,b)}catch{try{ct.set_destination_refinement_level(c,e.subdivisions-1),g=ai.buildLevel(c,!1,b)}catch{g=null}}else g=null;return{subdivPointer:c,originalGeometry:d,subdividedGeometry:g}}static primitiveToQuads(e,a,i){e.widthSegments>16&&(e.widthSegments=16),e.heightSegments>16&&(e.heightSegments=16),e.depthSegments>16&&(e.depthSegments=16),e.radialSegments>16&&(e.radialSegments=16),e.type==="DodecahedronGeometry"&&(e.detail=0);let o=e.shape!==void 0||e.path!==void 0?a.geometry:Va(e,i,!1),c;e.type==="TorusGeometry"&&e.arc===Math.PI*2?c=o.getClosedTorusIndicesForBooleanOrSubdiv():c=o.getIndex();let d,g,b,j;({positions:d,triIndices:j}=qc(o.getAttribute("position"),c));let $;if(e.type==="CylinderGeometry"&&e.cornerRadius===0&&e.hollow===0&&e.openEnded===!1){let rt=e.radialSegments*e.heightSegments*3*2,_e=rt+e.radialSegments*3;$=[rt,_e]}return{indices:g,verticesPerFace:b}=GA(d,j,o,$),{positions:d,indices:g,verticesPerFace:b}}static allocate(e,a){var At;let i,o,c,d=[],g=[];e.positionWASM&&e.positionWASM.length>0?(i=e.positionWASM,o=e.indexWASM,c=e.verticesPerFaceWASM):(i=BI,o=NI,c=FI);let b=i.length,j=o.length,$=c.length,rt=i.length+d.length+g.length,_e=o.length+c.length,st=rt*Float32Array.BYTES_PER_ELEMENT+_e*Uint32Array.BYTES_PER_ELEMENT,ut=rt*Float32Array.BYTES_PER_ELEMENT,gt=ct._malloc(st),yt=new Float32Array(ct.HEAPF32.buffer,gt,rt),Pt=new Uint32Array(ct.HEAPU32.buffer,gt+ut,_e);yt.set(i,0),yt.set(d,i.length),yt.set(g,i.length+d.length),Pt.set(o,0),Pt.set(c,o.length);let wt;(At=e==null?void 0:e.scaleBaked)!=null&&At.some(Tt=>Tt!==1)&&(wt=new ce$1().makeScale(...e.scaleBaked)),a&&(wt?wt.premultiply(a):wt=a);let Ct=wt?ct.alloc_subdivision_surface2(gt,b,gt+ut,j,gt+ut+o.length*Uint32Array.BYTES_PER_ELEMENT,$,wt.elements):ct.alloc_subdivision_surface(gt,b,gt+ut,j,gt+ut+o.length*Uint32Array.BYTES_PER_ELEMENT,$);return ct._free(gt),Ct}static buildLevel(e,a,i,o,c){let d=c?ct.get_mesh_data2(e,a?ct.Level.CONTROL:ct.Level.REFINED,i,c.elements):ct.get_mesh_data(e,a?ct.Level.CONTROL:ct.Level.REFINED,i),g=8,b=ct.HEAPU32.subarray(d>>2,(d>>2)+g),j=b.subarray(4,8),$=0,rt=ct.HEAPU32[b[$]>>2],_e=ct.HEAPF32.subarray(rt>>2,(rt>>2)+j[$]);$++;let st=ct.HEAPU32[b[$]>>2],ut=ct.HEAPF32.subarray(st>>2,(st>>2)+j[$]);$++;let gt=ct.HEAPU32[b[$]>>2],yt=ct.HEAPU32.subarray(gt>>2,(gt>>2)+j[$]);$++;let Pt=ct.HEAPU32[b[$]>>2],wt=ct.HEAPU32.subarray(Pt>>2,(Pt>>2)+j[$]);if($++,o===void 0){let Ct=new Pe;if(Ct.setIndex(new _o(wt,1)),Ct.setAttribute("position",new Te(_e,3)),Ct.setAttribute("normal",new Te(ut,3)),a){Ct.setAttribute("faceMap",new _o(yt,1));let At=new Float32Array(ut.length/3*4).fill(0);Ct.setAttribute("color",new Xe(At,4))}return ct.free_mesh_data(d),Ct.userData.type="SubdivGeometry",Ct}o.getAttribute("position").copyArray(_e),o.getAttribute("normal").copyArray(ut),o.attributes.position.needsUpdate=!0,o.attributes.normal.needsUpdate=!0,ct.free_mesh_data(d)}static freeSubdivPointer(e){ct.free_bvh(e),ct.free_subdivision_surface(e)}static buildControlCageWireframe(e,a,i){let o=ct.get_wireframe_data_for_base_level(e),c=4,d=ct.HEAPU32.subarray(o>>2,(o>>2)+c),g=d.subarray(2,4),b=0,j=ct.HEAPU32[d[b]>>2],$=ct.HEAPF32.subarray(j>>2,(j>>2)+g[b]);b++;let rt=ct.HEAPU32[d[b]>>2],_e=ct.HEAPU32.subarray(rt>>2,(rt>>2)+g[b]);if(a===void 0){let st=new Pe;st.setAttribute("position",new Te($,3));let ut=new Float32Array($.length);for(let gt=0,yt=$.length;gt<yt;)ut[gt++]=i.r,ut[gt++]=i.g,ut[gt++]=i.b;return st.setAttribute("color",new Xe(ut,3)),st.setIndex(new _o(_e,1)),ct.free_wireframe_data_for_base_level(o),st}a.getAttribute("position").copyArray($),a.attributes.position.needsUpdate=!0,ct.free_wireframe_data_for_base_level(o)}static updateCollabMesh(e,a,i){let o=a===0;o||ct.set_destination_refinement_level(e,a);let c=i?ct.get_topological_data2(e,o?ct.Level.CONTROL:ct.Level.REFINED,i.elements):ct.get_topological_data(e,o?ct.Level.CONTROL:ct.Level.REFINED),d=6,g=ct.HEAPU32.subarray(c>>2,(c>>2)+d),b=g.subarray(3,6),j=0,$=ct.HEAPU32[g[j]>>2],rt=new Float32Array(ct.HEAPF32.subarray($>>2,($>>2)+b[j]));j++;let _e=ct.HEAPU32[g[j]>>2],st=new Uint32Array(ct.HEAPU32.subarray(_e>>2,(_e>>2)+b[j]));j++;let ut=ct.HEAPU32[g[j]>>2],gt=new Uint8Array(ct.HEAPU32.subarray(ut>>2,(ut>>2)+b[j]));return ct.free_topological_data(c),{positions:rt,indices:st,verticesPerFace:gt}}},kI=["getX","getY","getZ"];function qc(e,a){let i={},o=a?a.count:e.count,c=0,d=[],g=[],b=1e4;for(let $=0;$<o;$++){let rt=a?a.getX($):$,_e="";for(let st=0;st<3;st++)_e+=`${~~(e[kI[st]](rt)*b)},`;if(_e in i)d.push(i[_e]);else{for(let st=0;st<3;st++)g.push(e[kI[st]](rt));i[_e]=c,d.push(c),c++}}let j=[];for(let $=0;$<d.length;$+=3)d[$]===d[$+1]||d[$]===d[$+2]||d[$+1]===d[$+2]||j.push(d[$],d[$+1],d[$+2]);return{positions:g,triIndices:j}}var X0=new _,VA=new _,zA=new _,UA=new _;function GA(e,a,i,o){let c=[],d=[];if(i.userData.shape!==void 0&&i.userData.parameters.depth===0&&i.userData.shape.shapeHoles.length===0){let j=i.userData.shape.extractShapePointsToFlatArray([]),$=i.userData.parameters.spikes;if(i.userData.type==="EllipseGeometry"&&$<=24&&$%4===0&&i.userData.parameters.angle>=360){let st=j.length/2/$;j=j.filter((ut,gt)=>Math.floor(gt/2)%st===0)}let rt=0;for(let st=0;st<j.length;st+=2)rt+=(j[st]-j[(st===0?j.length:st)-2])*(j[st+1]+j[(st===0?j.length:st)-1]);e.length=0;let _e=0;if(rt<0)for(let st=0;st<j.length;st+=2)e.push(j[st],j[st+1],0),c.push(_e++);else for(let st=j.length-2;st>=0;st-=2)e.push(j[st],j[st+1],0),c.push(_e++);return d.push(_e),{indices:c,verticesPerFace:d}}let g=new Float32Array([i.userData.parameters.depth])[0],b=0;for(;b<a.length;){if(i.useNgonForTopBottomFaceDuringBake){let j=0;if((e[a[b]*3+2]===g||e[a[b]*3+2]===0)&&j++,(e[a[b+1]*3+2]===g||e[a[b+1]*3+2]===0)&&j++,(e[a[b+2]*3+2]===g||e[a[b+2]*3+2]===0)&&j++,j===3)break}if(a[b+1]===a[b+3]&&a[b+2]===a[b+5]||a[b+0]===a[b+3]&&a[b+2]===a[b+4]){X0.set(e[a[b]*3],e[a[b]*3+1],e[a[b]*3+2]),VA.set(e[a[b+1]*3],e[a[b+1]*3+1],e[a[b+1]*3+2]),zA.set(e[a[b+4]*3],e[a[b+4]*3+1],e[a[b+4]*3+2]),UA.set(e[a[b+5]*3],e[a[b+5]*3+1],e[a[b+5]*3+2]),VA.sub(X0).normalize(),zA.sub(X0).normalize(),UA.sub(X0).normalize();let j=VA.cross(zA).dot(UA);Math.abs(j)>.005||o&&o.some(($,rt)=>rt%2===1?!1:b>=o[rt]&&b<o[rt+1])?(c.push(a[b],a[b+1],a[b+2]),d.push(3),b+=3):(c.push(a[b],a[b+1],a[b+4],a[b+5]),d.push(4),b+=6)}else c.push(a[b],a[b+1],a[b+2]),d.push(3),b+=3}if(i.useNgonForTopBottomFaceDuringBake){let j=[],$=[],rt=0;for(let _e=0,st=0;_e<e.length;_e+=3,st++)e[_e+2]===0&&(j.push(st),rt++),e[_e+2]===g&&$.push(st);if(i.userData.parameters.extrudeBevelSize===0){let _e=$[0];$[0]=$[1],$[1]=_e}j.reverse(),c.push(...j,...$),d.push(rt,rt)}return{indices:c,verticesPerFace:d}}var Ms={};iF(Ms,{calcBoolean:()=>J7,calcBooleanTopological:()=>Z7,freeMeshSet:()=>rY,getMeshSet:()=>$7,hasOpenEdges:()=>eY,transformMeshSet:()=>tY});var VI,zI=new Promise(e=>{VI=e}),Q0;function UI(){if(Q0)return Q0;async function e(){let a="https://unpkg.com/@splinetool/boolean-wasm@1.0.26/build",i=__vitePreload(()=>import("./boolean-w3KXAzn1.js"),__vite__mapDeps([])),[o,c]=await Promise.all([i,fetch(`${a}/boolean.wasm`).then(b=>b.arrayBuffer())]),d=o.default,g=await d({wasmBinary:c});VI(g)}return Q0=e(),Q0}var Et,jd;zI.then(e=>Et=e);function K7(e,a,i){let o,c;e.userData.parameters.type==="TorusGeometry"&&e.userData.parameters.arc===Math.PI*2?c=e.getClosedTorusIndicesForBooleanOrSubdiv():c=e.getIndex();let{positions:d,triIndices:g}=qc(e.getAttribute("position"),c),b;if(a&&i){let{indices:j,verticesPerFace:$}=GA(d,g,e);b=$.length,o=[];for(let rt=0,_e=0;rt<b;rt++){o.push($[rt]);for(let st=0;st<$[rt];st++)o.push(j[_e++])}}else{let j=g.length;o=Array(j+j/3),b=0;for(let $=0,rt=0;rt<o.length;)o[rt++]=3,b++,o[rt++]=g[$++],o[rt++]=g[$++],o[rt++]=g[$++]}return{positions:d,faceIndices:o,nFaces:b}}function GI(e){let a=e.length,i=a*Uint32Array.BYTES_PER_ELEMENT,o=a*Float32Array.BYTES_PER_ELEMENT,c=Number.isInteger(e[0])?i:o,d=Et._malloc(c);return(Number.isInteger(e[0])?new Uint32Array(Et.HEAPU32.buffer,d,a):new Float32Array(Et.HEAPF32.buffer,d,a)).set(e,0),d}function jI(e){switch(e){case 0:return Et.OP.UNION;case 1:return Et.OP.INTERSECTION;case 2:return Et.OP.A_MINUS_B;case 3:return Et.OP.B_MINUS_A;case 4:return Et.OP.SYMMETRIC_DIFFERENCE;case 5:return Et.OP.ALL;default:throw new Error("Unknown boolean operation "+e)}}function Z7(e,a){jd===void 0&&(jd=Et.init_csg());let i=GI(e),o=Et.csg_calc_topological(jd,i,e.length,jI(a));Et._free(i);let c=6,d=Et.HEAPU32.subarray(o>>2,(o>>2)+c),g=d.subarray(3,6),b=0,j=Et.HEAPU32[d[b]>>2],$=new Float32Array(Et.HEAPF32.subarray(j>>2,(j>>2)+g[b]));b++;let rt=Et.HEAPU32[d[b]>>2],_e=new Uint32Array(Et.HEAPU32.subarray(rt>>2,(rt>>2)+g[b]));b++;let st=Et.HEAPU32[d[b]>>2],ut=new Uint8Array(Et.HEAPU32.subarray(st>>2,(st>>2)+g[b]));return Et.free_mesh_data(o),{positions:$,indices:_e,verticesPerFace:ut}}function J7(e,a,i,o){jd===void 0&&(jd=Et.init_csg());let c=GI(e),d=Et.csg_calc(jd,c,e.length,o,jI(a));Et._free(c);let g=5,b=Et.HEAPU32.subarray(d>>2,(d>>2)+g),j=b.subarray(2,5),$=0,rt=Et.HEAPU32[b[$]>>2],_e=Et.HEAPF32.subarray(rt>>2,(rt>>2)+j[$]);$++;let st=Et.HEAPU32[b[$]>>2],ut=Et.HEAPF32.subarray(st>>2,(st>>2)+j[$]);$++;let gt=j[$];i.setAttribute("position",new Te(_e,3)),i.setAttribute("normal",new Te(ut,3));let yt=Et.HEAPF32.subarray((d>>2)+5,(d>>2)+5+6);return i.boundingSphere===null&&(i.boundingSphere=new Br),i.boundingSphere.radius=-1,i.userData.parameters={width:yt[3]*2,height:yt[4]*2,depth:yt[5]*2},Et.free_mesh_data(d),gt}function $7(e,a,i){if(Et===void 0)return-1;let o,c,d;if(a&&e.userData.positions!==void 0){let Pt=e.userData;d=Pt.verticesPerFace.length,o=Pt.positions,c=Array(Pt.verticesPerFace.reduce((wt,Ct)=>wt+Ct,0)+d);for(let wt=0,Ct=0,At=0;wt<Pt.verticesPerFace.length;wt++){c[At++]=Pt.verticesPerFace[wt];for(let Tt=0;Tt<Pt.verticesPerFace[wt];Tt++)c[At++]=Pt.indices[Ct++]}}else({positions:o,faceIndices:c,nFaces:d}=K7(e,a,i));let g=o.length,b=c.length,j=o.length,$=c.length,rt=j*Float32Array.BYTES_PER_ELEMENT+$*Uint32Array.BYTES_PER_ELEMENT,_e=j*Float32Array.BYTES_PER_ELEMENT,st=Et._malloc(rt),ut=new Float32Array(Et.HEAPF32.buffer,st,j),gt=new Uint32Array(Et.HEAPU32.buffer,st+_e,$);ut.set(o,0),gt.set(c,0);let yt=Et.get_csg_mesh(st,g,st+_e,b,d);return Et._free(st),yt}function eY(e){return Et.has_open_edges(e)}function tY(e,a){Et.transform_csg_mesh(e,a.elements)}function rY(e){Et.free_csg_mesh(e)}var iY={ConeGeometry:FO,CubeGeometry:kO,CylinderGeometry:O0,DodecahedronGeometry:VO,EllipseGeometry:Fd,HelixGeometry:pI,IcosahedronGeometry:mI,LatheGeometry:gI,NonParametricGeometry:bI,PolygonGeometry:G0,PyramidGeometry:SI,RectangleGeometry:zd,SphereGeometry:wI,PlaneGeometry:AI,BackdropGeometry:_I,StarGeometry:j0,TextFrameGeometry:EI,TorusGeometry:TI,TorusKnotGeometry:MI,TriangleGeometry:CI,PathGeometry:DI,VectorGeometry:Gn},kA=e=>iY[e.type].create(e);function Hd(e){return e!==null&&"booleanOp"in e}var Wd=class extends Pd(sr){constructor(){super(...arguments),this.booleanMeshSetAddress=-1,this.booleanWasTransformed=!1,this.booleanMatrixInvOld=new ce$1}updateVisible(e){super.updateVisible(e),this.visible=!Hd(this.parent)&&this.visible,Hd(this.parent)&&this.parent.invalidateDownstreamBooleanData()}freeBooleanPointer(){this.booleanMeshSetAddress!==-1&&(Ms.freeMeshSet(this.booleanMeshSetAddress),this.booleanMeshSetAddress=-1)}invalidateDownstreamBooleanData(e=!1){return e?this.booleanWasTransformed=!0:this.freeBooleanPointer(),Hd(this.parent)?this.parent.invalidateDownstreamBooleanData():this}invalidateUpstreamBooleanData(){this.freeBooleanPointer();for(let e of this.children)e instanceof Wd&&(e.freeBooleanPointer(),Hd(e)&&e.invalidateUpstreamBooleanData())}updateTransformState(e,a){let i=super.updateTransformState(e,a);return i&&Hd(this.parent)&&this.invalidateDownstreamBooleanData(!0),i}onVariableUpdate(e=!1){super.onVariableUpdate(e),Hd(this.parent)&&this.invalidateDownstreamBooleanData(!0)}},K0=new Wt;function Cm(e,a=0,i=e.count,o,c){let d=1/0,g=1/0,b=1/0,j=-1/0,$=-1/0,rt=-1/0;for(let _e=a;_e<i;_e++){let st=e.getX(_e),ut=e.getY(_e),gt=e.getZ(_e);st<d&&(d=st),ut<g&&(g=ut),gt<b&&(b=gt),st>j&&(j=st),ut>$&&($=ut),gt>rt&&(rt=gt)}K0.min.set(d,g,b),K0.max.set(j,$,rt),K0.getCenter(o),K0.getSize(c).multiplyScalar(.5)}var nY=new Pe,sY=new ts,pr=class extends Wd{constructor(e,a){super(nY,sY),this.super_Entity(e,a)}updateState(e,a){this.updateState_Entity(e,a)}updateEntityBoxSize(e,a){let i=this.geometry.getAttribute("position");i!==void 0?Cm(i,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:i.count,e,a):super.updateEntityBoxSize(e,a)}},Pm=class{constructor(e){e=e??{},this.name=e.name,this.type=e.type,this.node=e.node,this.size=e.size,this.needsUpdate=e.needsUpdate}get value(){return this.node.value}set value(e){this.node.value=e}},Xi=class{constructor(e){this.hashProperties=void 0,this.isNode=!0,this.shortcuts={},this.uuid=Me.generateUUID(),this.type=e,this.name=""}analyze(e,a){a=a??{},e.analyzing=!0,this.build(e.addFlow(a.slot,a.cache,a.context),"v4"),e.clearVertexNodeCode(),e.clearFragmentNodeCode(),e.removeFlow(),e.analyzing=!1}analyzeAndFlow(e,a,i){return i=i??{},this.analyze(e,i),this.flow(e,a,i)}flow(e,a,i){i=i??{},e.addFlow(i.slot,i.cache,i.context);let o={result:this.build(e,a),code:e.clearNodeCode(),extra:e.context.extra};return e.removeFlow(),o}build(e,a,i){a=a??this.getType(e,a);let o=e.getNodeData(i??this);return e.analyzing&&this.appendDepsNode(e,o,a),e.nodes.indexOf(this)===-1&&e.nodes.push(this),this.updateFrame!==void 0&&e.updaters.indexOf(this)===-1&&e.updaters.push(this),this.generate(e,a,i)}updateFrame(e){}generateReadonly(e,a,i,o,c,d){return""}generate(e,a,i,o,c){return""}parse(e,a,i,o){}appendDepsNode(e,a,i){a.deps=(a.deps||0)+1;let o=e.getTypeLength(i);(o>(a.outputMax||0)||this.getType(e,i))&&(a.outputMax=o,a.output=i)}setName(e){this.name=e}getName(){return this.name}getType(e,a){return a==="sampler2D"||a==="samplerCube"?a:this.type}getHash(){let e="{",a,i;for(a in this)i=this[a],i instanceof Xi&&(e+='"'+a+'":'+i.getHash()+",");if(this.hashProperties)for(let o=0;o<this.hashProperties.length;o++)a=this.hashProperties[o],i=this[a],e+='"'+a+'":"'+String(i)+'",';return e+='"id":"'+this.uuid+'"}',e}},jA=class{constructor(){this.nodes={},this.keywords={}}add(e){this.nodes[e.name]=e}addKeyword(e,a,i){i=i!==void 0?i:!0,this.keywords[e]={callback:a,cache:i}}remove(e){delete this.nodes[e.name]}removeKeyword(e){delete this.keywords[e]}get(e){return this.nodes[e]}getKeyword(e,a){return this.keywords[e].callback(a)}getKeywordData(e){return this.keywords[e]}contains(e){return this.nodes[e]!==void 0}containsKeyword(e){return this.keywords[e]!==void 0}},Ni=new jA,et=class extends Xi{constructor(e,a){super(e),this.scope="",a=a??{},this.shared=a.shared!==void 0?a.shared:!0,this.unique=a.unique!==void 0?a.unique:!1}build(e,a,i,o){if(a=a??this.getType(e),this.getShared(e,a)){let c=this.getUnique(e,a);c&&this.uuid===void 0&&(this.uuid=Me.generateUUID()),i=e.getUUID(i??this.getUUID(),!c);let d=e.getNodeData(i),g=d.output||this.getType(e);if(e.analyzing)return(d.deps||0)>0||this.getLabel()?(this.appendDepsNode(e,d,a),this.generate(e,a,i)):super.build(e,a,i);if(c)return d.name=d.name||super.build(e,a,i),d.name;if(!this.getLabel()&&(!this.getShared(e,g)||e.context.ignoreCache||d.deps===1))return super.build(e,a,i);i=this.getUUID(!1);let b=this.getTemp(e,i);if(b)return e.format(b,g,a);{b=super.generate(e,a,i,d.output,o);let j=this.generate(e,g,i);return e.addNodeCode(b+" = "+j+";"),e.format(b,g,a)}}return super.build(e,a,i)}getShared(e,a){return a!=="sampler2D"&&a!=="samplerCube"&&this.shared}getUnique(e,a){return this.unique}setLabel(e){return this.label=e,this}getLabel(){return this.label}getUUID(e){let a=this.uuid;return typeof this.scope=="string"&&(a=this.scope+"-"+a),a}getTemp(e,a){a=a||this.uuid;let i=e.getVars()[a];return i?i.name:void 0}generate(e,a,i,o,c){return this.getShared(e,a)||console.error("TempNode is not shared"),i=i??this.uuid,e.getTempVar(i,o??this.getType(e),c,this.getLabel()).name}},lr=class extends et{constructor(e,a){a=a??{},a.shared=a.shared!==void 0?a.shared:!1,super(e,a),this.readonly=!1}setReadonly(e){return this.readonly=e,this.hashProperties=this.readonly?["value"]:void 0,this}getReadonly(){return this.readonly}generate(e,a,i,o,c,d){i=e.getUUID(i??this.getUUID()),o=o??this.getType(e);let g=e.getNodeData(i);return this.getReadonly()&&this.generateReadonly!==void 0?this.generateReadonly(e,a,i,o,c,d):e.isShader("vertex")?(g.vertex||(g.vertex=e.createVertexUniform(o,this,c,d,this.getLabel())),e.format(g.vertex.name,o,a)):(g.fragment||(g.fragment=e.createFragmentUniform(o,this,c,d,this.getLabel())),e.format(g.fragment.name,o,a))}},qr=class extends lr{constructor(e=0,a){super("v2"),this.nodeType="Vector2",this.value=e instanceof z$2?e:new z$2(e,a)}get x(){return this.value.x}set x(e){this.value.x=e}get y(){return this.value.y}set y(e){this.value.y=e}generateReadonly(e,a,i,o,c,d){return e.format("vec2("+this.value.x+", "+this.value.y+")",o,a)}},nn=class extends lr{constructor(e=0,a,i){super("v3"),this.nodeType="Vector3",this.value=e instanceof _?e:new _(e,a,i)}get x(){return this.value.x}set x(e){this.value.x=e}get y(){return this.value.y}set y(e){this.value.y=e}get z(){return this.value.z}set z(e){this.value.z=e}generateReadonly(e,a,i,o,c,d){return e.format("vec3("+this.value.x+", "+this.value.y+", "+this.value.z+")",o,a)}},xr$1=class extends We{constructor(a,i,o,c){super(a,i,o),this.isColorA=!0,this.a=c}setRGBA(a,i,o,c){super.setRGB(a,i,o),this.a=c}copy(a){return super.copy(a),this.a="a"in a?a.a:1,this}clone(){return new this.constructor(this.r,this.g,this.b,this.a)}equals(a){return super.equals(a)&&this.a===a.a}setStyle(a,i="srgb"){let o;if(a==="transparent")return this.setRGBA(0,0,0,0),this;if(o=/^((?:rgb|hsl)a?)\(([^)]*)\)/.exec(a)){let c,d=o[1],g=o[2];switch(d){case"rgb":case"rgba":if(c=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(g))return this.a=d==="rgba"?parseFloat(c[4]):1,super.setStyle(a,i);break;case"hsl":case"hsla":if(c=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)%\s*,\s*(\d*\.?\d+)%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(g))return this.a=d==="hsla"?parseFloat(c[4]):1,super.setStyle(a,i);break}}return super.setStyle(a,i)}get x(){return this.r}get y(){return this.g}get z(){return this.b}get w(){return this.a}set x(a){this.r=a}set y(a){this.g=a}set z(a){this.b=a}set w(a){this.a=a}},jn=class extends lr{constructor(e){super("v4"),this.nodeType="Vector4",this.value=e instanceof xr$1?e:new xr$1(e.r,e.g,e.b,e.a)}generateReadonly(e,a,i,o,c,d){return e.format("vec4("+this.value.r+", "+this.value.g+", "+this.value.b+", "+this.value.a+")",o,a)}},oY=/^\s*([a-z_0-9]+)\s([a-z_0-9]+)\s*\((.*?)\)/i,HI=/[a-z_0-9]+/gi,Ae=class extends et{constructor(e,a,i,o,c){super(c),this.src="",this.nodeType="Function",this.useKeywords=!0,this.includes=[],this.extensions={},this.keywords={},this.isMethod=c===void 0,this.isInterface=!1,this.parse(e,a,i,o)}getShared(e,a){return!this.isMethod}getType(e){return e.getTypeByFormat(this.type)}getInputByName(e){if(this.inputs){let a=this.inputs.length;for(;a--;)if(this.inputs[a].name===e)return this.inputs[a]}}getIncludeByName(e){if(this.includes){let a=this.includes.length;for(;a--;)if(this.includes[a].name===e)return this.includes[a]}}generate(e,a,i,o,c){let d,g=0,b=this.src;if(this.includes)for(let $=0;$<this.includes.length;$++)e.include(this.includes[$],this);for(let $ in this.extensions)e.extensions[$]=!0;let j=[];for(;d=HI.exec(this.src);)j.push(d);for(let $=0;$<j.length;$++){let rt=j[$],_e=rt[0],st=this.isMethod?!this.getInputByName(_e):!0,ut=_e;if(this.keywords[_e]||this.useKeywords&&st&&Ni.containsKeyword(_e)){let gt=this.keywords[_e];if(!gt){let yt=Ni.getKeywordData(_e);yt.cache&&(gt=e.keywords[_e]),gt=gt||Ni.getKeyword(_e,e),yt.cache&&(e.keywords[_e]=gt)}ut=gt.build(e)}_e!==ut&&b[rt.index+g-1]!=="."&&(b=b.substring(0,rt.index+g)+ut+b.substring(rt.index+_e.length+g),g+=ut.length-_e.length),this.getIncludeByName(ut)===void 0&&Ni.contains(ut)&&e.include(Ni.get(ut))}return a==="source"?b:this.isMethod?(this.isInterface||e.include(this,void 0,b),this.name):e.format("( "+b+" )",this.getType(e),a)}parse(e,a,i,o){if(this.src=e||"",this.includes=a??[],this.extensions=i??{},this.keywords=o??{},this.isMethod){let c=oY.exec(this.src);if(this.inputs=[],c&&c.length==4){this.type=c[1],this.name=c[2];let d=c[3].match(HI);if(d){let g=0;for(;g<d.length;){let b=d[g++],j;b==="in"||b==="out"||b==="inout"?j=d[g++]:(j=b,b="");let $=d[g++];this.inputs.push({name:$,type:j,qualifier:b})}}this.isInterface=this.src.indexOf("{")===-1}else this.type="",this.name=""}}},aY=/^([a-z_0-9]+)\s([a-z_0-9]+)\s?\=?\s?(.*?)(\;|$)/i,HA=class extends et{constructor(e="",a){super(),this.src="",this.useDefine=!1,this.nodeType="Const",this.parse(e||HA.PI,void 0,void 0,void 0,a)}getType(e){return e.getTypeByFormat(this.type)}parse(e,a,i,o,c){this.src=e||"";let d,g,b="",j=aY.exec(e);this.useDefine=c??this.src.charAt(0)==="#",j&&j.length>1?(g=j[1],d=j[2],b=j[3]):(d=this.src,g="f"),this.name=d,this.type=g,this.value=b}build(e,a){if(a==="source"){if(this.value)return this.useDefine?"#define "+this.name+" "+this.value:"const "+this.type+" "+this.name+" = "+this.value+";";if(this.useDefine)return this.src}return e.include(this),e.format(this.name,this.getType(e),a)}generate(e,a,i,o,c){return e.format(this.name,this.getType(e),a)}},Yt=HA;Yt.PI="PI",Yt.PI2="PI2",Yt.RECIPROCAL_PI="RECIPROCAL_PI",Yt.RECIPROCAL_PI2="RECIPROCAL_PI2",Yt.LOG2="LOG2",Yt.EPSILON="EPSILON";var lY=new RegExp(`^structs*([a-z_0-9]+)s*{s*((.|
)*?)}`,"gim"),cY=new RegExp("s*(w*?)s*(w*?)(=|;)","gim"),qd=class extends et{constructor(e=""){super(),this.inputs=[],this.src="",this.nodeType="Struct",this.parse(e)}getType(e){return e.getTypeByFormat(this.name)}getInputByName(e){let a=this.inputs.length;for(;a--;)if(this.inputs[a].name===e)return this.inputs[a]}generate(e,a,i,o,c){return a==="source"?this.src+";":e.format("( "+this.src+" )",this.getType(e),a)}parse(e=""){this.src=e,this.inputs=[];let a=lY.exec(e);if(a){let i=a[2],o;for(;o=cY.exec(i);)this.inputs.push({type:o[1],name:o[2]});this.name=a[1]}else this.name="";this.type=this.name}},Yd=class extends et{constructor(e){super("v2",{shared:!1}),this.nodeType="UV",this.index=e??0}generate(e,a){e.requires.uv[this.index]=!0;let i=this.index>0?this.index+1:"",o=e.isShader("vertex")?"uv"+i:"vUv"+i;return e.format(o,this.getType(e),a)}};Ni.addKeyword("uv",function(){return new Yd});Ni.addKeyword("uv2",function(){return new Yd(1)});var Yc=class extends et{constructor(e,a){super("v4"),this.nodeType="ColorSpace",this.input=e,this.method=a??Yc.LINEAR_TO_LINEAR,this.hashProperties=["method"]}static getEncodingComponents(e){switch(e){case Sn:return["Linear"];case at:return["sRGB"];default:return[]}}generate(e,a){var g;let i=this.input.build(e,"v4"),o=this.getType(e),c=Yc.Nodes[this.method],d=e.include(c);if(d===Yc.LINEAR_TO_LINEAR)return e.format(i,o,a);if(((g=c.inputs)==null?void 0:g.length)===2){let b=this.factor.build(e,"f");return e.format(d+"( "+i+", "+b+" )",o,a)}else return e.format(d+"( "+i+" )",o,a)}fromEncoding(e){let a=Yc.getEncodingComponents(e);this.method="LinearTo"+a[0],this.factor=a[1]}fromDecoding(e){let a=Yc.getEncodingComponents(e);this.method=a[0]+"ToLinear",this.factor=a[1]}},Cn=Yc;Cn.Nodes={LinearToLinear:new Ae(["vec4 LinearToLinear( in vec4 value ) {","	return value;","}"].join(`
`)),sRGBToLinear:new Ae(["vec4 sRGBToLinear( in vec4 value ) {","	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );","}"].join(`
`)),LinearTosRGB:new Ae(["vec4 LinearTosRGB( in vec4 value ) {","	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );","}"].join(`
`))},Cn.LINEAR_TO_LINEAR="LinearToLinear",Cn.SRGB_TO_LINEAR="sRGBToLinear",Cn.LINEAR_TO_SRGB="LinearTosRGB";var Qt=class extends Ae{constructor(e="",a,i,o,c){super(e,c,o,i,a),this.nodeType="Expression"}},Pn=class extends lr{constructor(e=new tr,a,i,o){super("v4",{shared:!0}),this.nodeType="Texture",this.value=e,this.uv=a??new Yd,this.bias=i,this.project=o!==void 0?o:!1}getTexture(e,a){return super.generate(e,a,this.value.uuid,"t")}generate(e,a){if(a==="sampler2D")return this.getTexture(e,a);let i=this.getTexture(e,a),o=this.uv.build(e,this.project?"v4":"v2"),c=this.bias?this.bias.build(e,"f"):void 0;c===void 0&&e.context.bias&&(c=e.context.bias.setTexture(this).build(e,"f"));let d,g;this.project?d="texture2DProj":d=c?"tex2DBias":"tex2D",c?g=d+"( "+i+", "+o+", "+c+" )":g=d+"( "+i+", "+o+" )";let b={include:e.isShader("vertex"),ignoreCache:!0},j=this.getType(e);return e.addContext(b),this.colorSpace=this.colorSpace??new Cn(new Qt("",j)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(g),g=this.colorSpace.build(e,j),e.removeContext(),e.format(g,j,a)}},ke=class extends lr{constructor(e){super("f"),this.nodeType="Float",this.value=e??0}generateReadonly(e,a,i,o,c,d){return e.format(this.value+(this.value%1?"":".0"),o,a)}},Dm=class extends et{constructor(e,a){super(),this.inputs=[],this.nodeType="FunctionCall",this.value=e,this.inputs=a??[]}getFunction(){return this.value}getType(e){return this.value.getType(e)}generate(e,a,i,o,c){o=this.getType(e);let d=this.value,g=d.build(e,a)+"( ",b=[];if(d.inputs){for(let j=0;j<d.inputs.length;j++){let $=d.inputs[j],rt=this.inputs[j]||this.inputs[$.name];b.push(rt.build(e,e.getTypeByFormat($.type)))}g+=b.join(", ")+" )"}return e.format(g,o,a)}},WA=class extends et{constructor(e,a,i=WA.ADD){super(),this.nodeType="Operator",this.type=e.type,this.a=e,this.b=a,this.op=i}getType(e){let a=this.a.getType(e),i=this.b.getType(e);return e.isTypeMatrix(a)?"v4":e.getTypeLength(i)>e.getTypeLength(a)?i:a}generate(e,a){let i=this.getType(e);this.type=i;let o=this.a.build(e,i),c=this.b.build(e,i);return e.format("( "+o+" "+this.op+" "+c+" )",i,a)}},Qi=WA;Qi.ADD="+",Qi.SUB="-",Qi.MUL="*",Qi.DIV="/";var cr=class extends et{constructor(e,a=cr.ABS,i,o){super(),this.nodeType="Math",this.a=e,typeof a!="string"?this.b=a:o=a,typeof i!="string"?this.c=i:o=i,this.method=o,this.hashProperties=["method"]}getNumInputs(e){switch(this.method){case cr.MIX:case cr.CLAMP:case cr.REFRACT:case cr.SMOOTHSTEP:case cr.FACEFORWARD:return 3;case cr.MIN:case cr.MAX:case cr.MOD:case cr.STEP:case cr.REFLECT:case cr.DISTANCE:case cr.DOT:case cr.CROSS:case cr.POW:return 2;default:return 1}}getInputType(e){let a=e.getTypeLength(this.a.getType(e)),i=this.b?e.getTypeLength(this.b.getType(e)):0,o=this.c?e.getTypeLength(this.c.getType(e)):0;return a>i&&a>o?this.a.getType(e):i>o?this.b.getType(e):this.c.getType(e)}getType(e){switch(this.method){case cr.LENGTH:case cr.DISTANCE:case cr.DOT:return"f";case cr.CROSS:return"v3"}return this.getInputType(e)}generate(e,a){let i,o,c,d=this.a?e.getTypeLength(this.a.getType(e)):0,g=this.b?e.getTypeLength(this.b.getType(e)):0,b=this.c?e.getTypeLength(this.c.getType(e)):0,j=this.getInputType(e),$=this.getType(e);switch(this.type=$,this.method){case cr.NEGATE:return e.format("( -"+this.a.build(e,j)+" )",j,a);case cr.INVERT:return e.format("( 1.0 - "+this.a.build(e,j)+" )",j,a);case cr.CROSS:i=this.a.build(e,"v3"),o=this.b.build(e,"v3");break;case cr.STEP:i=this.a.build(e,d===1?"f":j),o=this.b.build(e,j);break;case cr.MIN:case cr.MAX:case cr.MOD:i=this.a.build(e,j),o=this.b.build(e,g===1?"f":j);break;case cr.REFRACT:i=this.a.build(e,j),o=this.b.build(e,j),c=this.c.build(e,"f");break;case cr.MIX:i=this.a.build(e,j),o=this.b.build(e,j),c=this.c.build(e,b===1?"f":j);break;default:i=this.a.build(e,j),this.b&&(o=this.b.build(e,j)),this.c&&(c=this.c.build(e,j));break}let rt=[];rt.push(i),o&&rt.push(o),c&&rt.push(c);let _e=this.getNumInputs(e);if(rt.length!==_e)throw Error(`Arguments not match used in "${this.method}". Require ${_e}, currently ${rt.length}.`);return e.format(this.method+"( "+rt.join(", ")+" )",$,a)}},pt=cr;pt.RAD="radians",pt.DEG="degrees",pt.EXP="exp",pt.EXP2="exp2",pt.LOG="log",pt.LOG2="log2",pt.SQRT="sqrt",pt.INV_SQRT="inversesqrt",pt.FLOOR="floor",pt.CEIL="ceil",pt.NORMALIZE="normalize",pt.FRACT="fract",pt.SATURATE="saturate",pt.SIN="sin",pt.COS="cos",pt.TAN="tan",pt.ASIN="asin",pt.ACOS="acos",pt.ARCTAN="atan",pt.ABS="abs",pt.SIGN="sign",pt.LENGTH="length",pt.NEGATE="negate",pt.INVERT="invert",pt.MIN="min",pt.MAX="max",pt.MOD="mod",pt.STEP="step",pt.REFLECT="reflect",pt.DISTANCE="distance",pt.DOT="dot",pt.CROSS="cross",pt.POW="pow",pt.MIX="mix",pt.CLAMP="clamp",pt.REFRACT="refract",pt.SMOOTHSTEP="smoothstep",pt.FACEFORWARD="faceforward";var Xd=class extends et{constructor(e,a,i){super("v4"),this.nodeType="TextureCubeUV",this.value=e,this.uv=a,this.bias=i}bilinearCubeUV(e,a,i,o){let c=new Dm(Xd.Nodes.bilinearCubeUV,[a,i,o]);this.colorSpaceTL=this.colorSpaceTL??new Cn(new Qt("","v4")),this.colorSpaceTL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTL.input.parse(c.build(e)+".tl"),this.colorSpaceTR=this.colorSpaceTR??new Cn(new Qt("","v4")),this.colorSpaceTR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTR.input.parse(c.build(e)+".tr"),this.colorSpaceBL=this.colorSpaceBL??new Cn(new Qt("","v4")),this.colorSpaceBL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBL.input.parse(c.build(e)+".bl"),this.colorSpaceBR=this.colorSpaceBR??new Cn(new Qt("","v4")),this.colorSpaceBR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBR.input.parse(c.build(e)+".br");let d={include:e.isShader("vertex"),ignoreCache:!0};e.addContext(d),this.colorSpaceTLExp=new Qt(this.colorSpaceTL.build(e,"v4"),"v4"),this.colorSpaceTRExp=new Qt(this.colorSpaceTR.build(e,"v4"),"v4"),this.colorSpaceBLExp=new Qt(this.colorSpaceBL.build(e,"v4"),"v4"),this.colorSpaceBRExp=new Qt(this.colorSpaceBR.build(e,"v4"),"v4"),e.removeContext();let g=new Qt("mix( mix( cubeUV_TL, cubeUV_TR, cubeUV.f.x ), mix( cubeUV_BL, cubeUV_BR, cubeUV.f.x ), cubeUV.f.y )","v4");return g.keywords.cubeUV_TL=this.colorSpaceTLExp,g.keywords.cubeUV_TR=this.colorSpaceTRExp,g.keywords.cubeUV_BL=this.colorSpaceBLExp,g.keywords.cubeUV_BR=this.colorSpaceBRExp,g.keywords.cubeUV=c,g}generate(e,a){if(e.isShader("fragment")){let i=this.uv,o=this.bias||e.context.roughness,c=new Dm(Xd.Nodes.roughnessToMip,[o]),d=new pt(c,Xd.Nodes.m0,Xd.Nodes.cubeUV_maxMipLevel,pt.CLAMP),g=new pt(d,pt.FLOOR),b=new pt(d,pt.FRACT),j=this.bilinearCubeUV(e,this.value,i,g),$=this.bilinearCubeUV(e,this.value,i,new Qi(g,new ke(1).setReadonly(!0),Qi.ADD)),rt=new pt(j,$,b,pt.MIX);return e.format(rt.build(e),"v4",a)}else return console.warn("TextureCubeUVNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),a)}},Qd=Xd;Qd.Nodes=function(){let e=new qd(`struct TextureCubeUVData {
			vec4 tl;
			vec4 tr;
			vec4 br;
			vec4 bl;
			vec2 f;
		}`),a=new Yt("float cubeUV_maxMipLevel 8.0",!0),i=new Yt("float cubeUV_minMipLevel 4.0",!0),o=new Yt("float cubeUV_maxTileSize 256.0",!0),c=new Yt("float cubeUV_minTileSize 16.0",!0),d=new Ae(`float getFace(vec3 direction) {
				vec3 absDirection = abs(direction);
				float face = -1.0;
				if (absDirection.x > absDirection.z) {
					if (absDirection.x > absDirection.y)
						face = direction.x > 0.0 ? 0.0 : 3.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				} else {
					if (absDirection.z > absDirection.y)
						face = direction.z > 0.0 ? 2.0 : 5.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				}
				return face;
		}`);d.useKeywords=!1;let g=new Ae(`vec2 getUV(vec3 direction, float face) {
				vec2 uv;
				if (face == 0.0) {
					uv = vec2(direction.z, direction.y) / abs(direction.x); // pos x
				} else if (face == 1.0) {
					uv = vec2(-direction.x, -direction.z) / abs(direction.y); // pos y
				} else if (face == 2.0) {
					uv = vec2(-direction.x, direction.y) / abs(direction.z); // pos z
				} else if (face == 3.0) {
					uv = vec2(-direction.z, direction.y) / abs(direction.x); // neg x
				} else if (face == 4.0) {
					uv = vec2(-direction.x, direction.z) / abs(direction.y); // neg y
				} else {
					uv = vec2(direction.x, direction.y) / abs(direction.z); // neg z
				}
				return 0.5 * (uv + 1.0);
		}`);g.useKeywords=!1;let b=new Ae(`TextureCubeUVData bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {
			float face = getFace(direction);
			float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);
			mipInt = max(mipInt, cubeUV_minMipLevel);
			float faceSize = exp2(mipInt);
			float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);
			vec2 uv = getUV(direction, face) * (faceSize - 1.0);
			vec2 f = fract(uv);
			uv += 0.5 - f;
			if (face > 2.0) {
				uv.y += faceSize;
				face -= 3.0;
			}
			uv.x += face * faceSize;
			if(mipInt < cubeUV_maxMipLevel){
				uv.y += 2.0 * cubeUV_maxTileSize;
			}
			uv.y += filterInt * 2.0 * cubeUV_minTileSize;
			uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);
			uv *= texelSize;
			vec4 tl = texture2D(envMap, uv);
			uv.x += texelSize;
			vec4 tr = texture2D(envMap, uv);
			uv.y += texelSize;
			vec4 br = texture2D(envMap, uv);
			uv.x -= texelSize;
			vec4 bl = texture2D(envMap, uv);
			return TextureCubeUVData( tl, tr, br, bl, f );
		}`,[e,d,g,a,i,o,c]);b.useKeywords=!1;let j=new Yt("float r0 1.0",!0),$=new Yt("float v0 0.339",!0),rt=new Yt("float m0 -2.0",!0),_e=new Yt("float r1 0.8",!0),st=new Yt("float v1 0.276",!0),ut=new Yt("float m1 -1.0",!0),gt=new Yt("float r4 0.4",!0),yt=new Yt("float v4 0.046",!0),Pt=new Yt("float m4 2.0",!0),wt=new Yt("float r5 0.305",!0),Ct=new Yt("float v5 0.016",!0),At=new Yt("float m5 3.0",!0),Tt=new Yt("float r6 0.21",!0),kt=new Yt("float v6 0.0038",!0),It=new Yt("float m6 4.0",!0),Lt=[j,$,rt,_e,st,ut,gt,yt,Pt,wt,Ct,At,Tt,kt,It],Ft=new Ae(`float roughnessToMip(float roughness) {
			float mip = 0.0;
			if (roughness >= r1) {
				mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;
			} else if (roughness >= r4) {
				mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;
			} else if (roughness >= r5) {
				mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;
			} else if (roughness >= r6) {
				mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;
			} else {
				mip = -2.0 * log2(1.16 * roughness);// 1.16 = 1.79^0.25
			}
			return mip;
		}`,Lt);return{bilinearCubeUV:b,roughnessToMip:Ft,m0:rt,cubeUV_maxMipLevel:a}}();var Xc=class extends et{constructor(e){super("v3"),this.nodeType="Normal",this.scope=e??Xc.VIEW}getShared(){return this.scope===Xc.WORLD}build(e,a,i,o){let c=e.context[this.scope+"Normal"];return c?c.build(e,a,i,o):super.build(e,a,i)}generate(e,a,i,o,c){let d;switch(this.scope){case Xc.VIEW:e.isShader("vertex")?d="transformedNormal":d="geometryNormal";break;case Xc.LOCAL:e.isShader("vertex")?d="objectNormal":(e.requires.normal=!0,d="vObjectNormal");break;case Xc.WORLD:e.isShader("vertex")?d="inverseTransformDirection( transformedNormal, viewMatrix ).xyz":(e.requires.worldNormal=!0,d="vWNormal");break}return e.format(d,this.getType(e),a)}},Ki=Xc;Ki.LOCAL="local",Ki.WORLD="world",Ki.VIEW="view",Ki.NORMAL="normal";Ni.addKeyword("viewNormal",function(){return new Ki(Ki.VIEW)});Ni.addKeyword("localNormal",function(){return new Ki(Ki.NORMAL)});Ni.addKeyword("worldNormal",function(){return new Ki(Ki.WORLD)});var jo=class extends et{constructor(e){super("v3"),this.nodeType="Position",this.scope=e??jo.LOCAL}getType(){switch(this.scope){case jo.PROJECTION:return"v4"}return this.type}getShader(){switch(this.scope){case jo.LOCAL:case jo.WORLD:return!1}return!0}generate(e,a,i,o,c){let d;switch(this.scope){case jo.LOCAL:e.isShader("vertex")?d="transformed":(e.requires.position=!0,d="vPosition");break;case jo.WORLD:if(e.isShader("vertex"))return"( modelMatrix * vec4( transformed, 1.0 ) ).xyz";e.requires.worldPosition=!0,d="vWPosition";break;case jo.VIEW:d=e.isShader("vertex")?"-mvPosition.xyz":"vViewPosition";break;case jo.PROJECTION:d=e.isShader("vertex")?"( projectionMatrix * modelViewMatrix * vec4( position, 1.0 ) )":"vec4( 0.0 )";break}return e.format(d,this.getType(),a)}},Hn=jo;Hn.LOCAL="local",Hn.WORLD="world",Hn.VIEW="view",Hn.PROJECTION="projection";Ni.addKeyword("position",function(){return new Hn});Ni.addKeyword("worldPosition",function(){return new Hn(Hn.WORLD)});Ni.addKeyword("viewPosition",function(){return new Hn(Hn.VIEW)});var io=class extends et{constructor(e){super("v3"),this.nodeType="Reflect",this.scope=e??io.CUBE}getUnique(e){return!e.context.viewNormal}getType(){switch(this.scope){case io.SPHERE:return"v2"}return this.type}generate(e,a){let i=this.getUnique(e);if(e.isShader("fragment")){let o;switch(this.scope){case io.VECTOR:{let c=new Ki(Ki.VIEW),d=e.context.roughness,g=c.build(e,"v3"),b=new Hn(Hn.VIEW).build(e,"v3"),j=d?d.build(e,"f"):void 0,$=`reflect( -normalize( ${b} ), ${g} )`;j&&($=`normalize( mix( ${$}, ${g}, ${j} * ${j} ) )`);let rt=`inverseTransformDirection( ${$}, viewMatrix )`;i?(e.addNodeCode(`vec3 reflectVec = ${rt};`),o="reflectVec"):o=rt;break}case io.CUBE:{let c=new io(io.VECTOR).build(e,"v3"),d="vec3( -"+c+".x, "+c+".yz )";i?(e.addNodeCode(`vec3 reflectCubeVec = ${d};`),o="reflectCubeVec"):o=d;break}case io.SPHERE:{let c="normalize( ( viewMatrix * vec4( "+new io(io.VECTOR).build(e,"v3")+", 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) ).xy * 0.5 + 0.5";i?(e.addNodeCode(`vec2 reflectSphereVec = ${c};`),o="reflectSphereVec"):o=c;break}}return e.format(o,this.getType(),a)}else return console.warn("ReflectNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.type,a)}},Ho=io;Ho.CUBE="cube",Ho.SPHERE="sphere",Ho.VECTOR="vector";var Z0=class extends et{constructor(e=new Pn,a,i){super("v4"),this.nodeType="TextureCube",this.value=e,this.radianceNode=new Qd(this.value,a??new Ho(Ho.VECTOR),i),this.irradianceNode=new Qd(this.value,new Ki(Ki.WORLD),new ke(1).setReadonly(!0))}generate(e,a){return e.isShader("fragment")?(e.require("irradiance"),e.context.bias&&e.context.bias.setTexture(this.value),(e.slot==="irradiance"?this.irradianceNode:this.radianceNode).build(e,a)):(console.warn("TextureCubeNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),a))}},J0=class extends lr{constructor(e=new Hu,a,i){super("v4",{shared:!0}),this.nodeType="CubeTexture",this.value=e,this.uv=a??new Ho,this.bias=i}getTexture(e,a){return super.generate(e,a,this.value.uuid,"tc")}generate(e,a){var j;if(a==="samplerCube")return this.getTexture(e,a);let i=this.getTexture(e,a),o=(j=this.uv)==null?void 0:j.build(e,"v3"),c=this.bias?this.bias.build(e,"f"):void 0;c===void 0&&e.context.bias&&(c=e.context.bias.setTexture(this).build(e,"f"));let d;c?d="texCubeBias( "+i+", "+o+", "+c+" )":d="texCube( "+i+", "+o+" )";let g={include:e.isShader("vertex"),ignoreCache:!0},b=this.getType(e);return e.addContext(g),this.colorSpace=this.colorSpace??new Cn(new Qt("",b)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(d),d=this.colorSpace.build(e,b),e.removeContext(),e.format(d,b,a)}},WI=`
uniform int frameIndex;
uniform vec2 resolution;
uniform mat4 previousModelViewMatrix;
uniform mat4 previousProjectionMatrix;

varying vec4 vCurrentPosition;
varying vec4 vPreviousPosition;
`,qI=`
layout(location = 1) out vec4 gVelocity;

uniform int frameIndex;
uniform vec2 resolution;

varying vec4 vCurrentPosition;
varying vec4 vPreviousPosition;

const vec2 haltonSequence[16] = vec2[16](
vec2( 0.000000,-0.333334),
vec2(-0.500000, 0.333334),
vec2( 0.500000,-0.777778),
vec2(-0.750000,-0.111112),
vec2( 0.250000, 0.555556),
vec2(-0.250000,-0.555556),
vec2( 0.750000, 0.111112),
vec2(-0.875000, 0.777778),
vec2(0.125000, -0.925926),
vec2(-0.375000, -0.259260),
vec2(0.625000, 0.407408),
vec2(-0.625000, -0.703704),
vec2(0.375000, -0.037038),
vec2(-0.125000, 0.629630),
vec2(0.875000, -0.481482),
vec2(-0.937500, 0.185186));

vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {
  const float goldenAngle = 2.399963f; // radians
  float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));
  float theta = float(sampleIndex) * goldenAngle + angle;
  float sine = sin(theta);
  float cosine = cos(theta);
  return vec2(cosine, sine) * r;
}

// Derived from the interleaved gradient function from Jimenez 2014 http:goo.gl/eomGso
float getNoiseInterleavedGradient(vec2 screenPos) {
    vec3 magic = vec3(0.06711056f, 0.00583715f, 52.9829189f);
    return fract(magic.z * fract(dot(screenPos, magic.xy)));
}

`,YI=`
// TODO: This could be generated CPU side and passed to the shader every frame
const vec2 haltonSequence[16] = vec2[16](
vec2( 0.000000,-0.333334),
vec2(-0.500000, 0.333334),
vec2( 0.500000,-0.777778),
vec2(-0.750000,-0.111112),
vec2( 0.250000, 0.555556),
vec2(-0.250000,-0.555556),
vec2( 0.750000, 0.111112),
vec2(-0.875000, 0.777778),
vec2(0.125000, -0.925926),
vec2(-0.375000, -0.259260),
vec2(0.625000, 0.407408),
vec2(-0.625000, -0.703704),
vec2(0.375000, -0.037038),
vec2(-0.125000, 0.629630),
vec2(0.875000, -0.481482),
vec2(-0.937500, 0.185186));

// TODO: Pass correct view size
vec2 offset = haltonSequence[frameIndex];
offset.x /= resolution.x;
offset.y /= resolution.y;

vec4 currentPosition = gl_Position;
vec4 currentPositionJittered = currentPosition + (vec4(offset.x, offset.y, 0.0, 0.0) * currentPosition.w);

// We want to calculate the velocity with unjittered positions
// so that things that are not moving get a velocity = 0
vCurrentPosition = currentPosition;
vPreviousPosition = previousProjectionMatrix * previousModelViewMatrix * vec4(transformed, 1.0);
#ifdef OUTLINE_COMPENSATION
vPreviousPosition.xy += OUTLINE_COMPENSATION;
#endif
gl_Position = currentPositionJittered;

`,XI=`
vec2 oldPos = vPreviousPosition.xy;
    oldPos /= vPreviousPosition.w;
    oldPos.xy = (oldPos.xy+1.)/2.0;

vec2 newPos = vCurrentPosition.xy;
    newPos /= vCurrentPosition.w;
    newPos.xy = (newPos.xy+1.)/2.0;

vec2 velocity = (newPos - oldPos);

// Discard fully transparent pixels 
if (gl_FragColor.a <= 0.0) discard;

gVelocity = vec4(velocity, 0.0, 1.0);
`,QI=`
layout(location = 1) out vec4 gVelocity;
`,KI=`
    // Discard fully transparent pixels 
    if (gl_FragColor.a <= 0.0) discard;

    gVelocity = vec4(0.0, 0.0, 0.0, 1.0);
`,ZI=["x","y","z","w"],uY=["float","vec2","vec3","vec4"],hY={float:"f",vec2:"v2",vec3:"v3",vec4:"v4",mat4:"v4",int:"i",bool:"b","float[]":"f[]","vec4[]":"v4[]"},dY={t:"sampler2D",tc:"samplerCube",b:"bool",i:"int",f:"float",c:"vec3",v2:"vec2",v3:"vec3",v4:"vec4",m3:"mat3",m4:"mat4","f[]":"float[]","v4[]":"vec4[]"},Kd=class{constructor(){this.includes={consts:{},functions:{},structs:{}},this.cache="",this.slot="",this.shader="",this.context={},this.needsJitter=!0,this.getIncludesCode=function(){function e(a,i){return a.deps.length-i.deps.length}return function(a,i){let o=this.getIncludes(a,i);if(!o)return"";let c="";o=o.sort(e);for(let d=0;d<o.length;d++)o[d].src&&(c+=o[d].src+`
`);return c}}(),this.slots=[],this.caches=[],this.contexts=[],this.keywords={},this.nodeData={},this.fragmentVariables={},this.fragmentParsVariables={},this.vertexParsVariables={},this.requires={uv:[],color:[],transparent:!1,irradiance:!1,position:!1,worldPosition:!1,normal:!1,worldNormal:!1,vWorldViewDir:!1,modelMatrix:!1,viewMatrix:!1,projectionMatrix:!1},this.includes={consts:[],functions:[],structs:[]},this.attributes={},this.prefixCode=["#ifdef TEXTURE_LOD_EXT","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCubeLodEXT(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2DLodEXT(a, b, c)","#else","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCube(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2D(a, b, c)","#endif",`
			// NOTE: Include Spline's blending modes. This could be part of BlendNode
			#define SPE_BLENDING_NORMAL 0
			#define SPE_BLENDING_MULTIPLY 1
			#define SPE_BLENDING_SCREEN 2
			#define SPE_BLENDING_OVERLAY 3

			vec3 spe_normalBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, b, alpha );
			}

			vec3 spe_multiplyBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, a * b, alpha );
			}

			vec3 spe_screenBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = 1.0 - ( 1.0 - a ) * ( 1.0 - b );
				return mix( a, tmp, alpha );
			}

			vec3 spe_overlayBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = mix( 1. - 2. * (1. - a) * (1. - b), 2. * a * b, step( a, vec3(.5) ) );
				return clamp( mix( a, tmp, alpha ), 0.0, 1.0 );
			}

			vec3 spe_blend( vec3 a, vec3 b, float alpha, int mode ) {
				if ( mode == SPE_BLENDING_NORMAL ) return spe_normalBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_MULTIPLY ) return spe_multiplyBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_SCREEN ) return spe_screenBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_OVERLAY ) return spe_overlayBlend( a, b, alpha );
				return vec3( 1.0 );
			}
			`,"#include <packing>","#include <common>"].join(`
`),this.parsCode={vertex:["float neighbor_offset = 0.0001;",""].join(`
`),fragment:["float accumAlpha = 0.0;",`void accumulateAlpha(float alpha) {
					accumAlpha += (1.0 - accumAlpha) * alpha;
				}`,""].join(`
`)},this.code={vertex:"",fragment:""},this.nodeCode={vertex:"",fragment:""},this.resultCode={vertex:"",fragment:""},this.finalCode={vertex:"",fragment:""},this.inputs={uniforms:{list:[],vertex:[],fragment:[]},arrayUniforms:{list:[],vertex:[],fragment:[]},vars:{varying:[],vertex:[],fragment:[]}},this.defines={},this.uniforms={},this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.updaters=[],this.nodes=[],this.analyzing=!1}build(e,a){this.addVertexParsCode(WI),this.addFragmentParsCode(qI),this.buildShader("vertex",e),this.buildShader("fragment",a);for(let i=0;i<this.requires.uv.length;i++)if(this.requires.uv[i]){let o=i>0?i+1:"";this.addVaryCode("varying vec2 vUv"+o+";"),i>0&&this.addVertexParsCode("attribute vec2 uv"+o+";"),this.addVertexFinalCode("vUv"+o+" = uv"+o+";")}return this.requires.color[0]&&(this.addVaryCode("varying vec4 vColor;"),this.addVertexParsCode("attribute vec4 color;"),this.addVertexFinalCode("vColor = color;")),this.requires.color[1]&&(this.addVaryCode("varying vec4 vColor2;"),this.addVertexParsCode("attribute vec4 color2;"),this.addVertexFinalCode("vColor2 = color2;")),this.requires.position&&(this.addVaryCode("varying vec3 vPosition;"),this.addVertexFinalCode("vPosition = transformed;")),this.requires.worldPosition,this.requires.normal&&(this.addVaryCode("varying vec3 vObjectNormal;"),this.addVertexFinalCode("vObjectNormal = normal;")),this.requires.modelMatrix&&this.addFragmentParsCode("uniform mat4 modelMatrix;"),this.requires.viewMatrix&&this.addFragmentParsCode("uniform mat4 viewMatrix;"),this.requires.projectionMatrix&&this.addFragmentParsCode("uniform mat4 projectionMatrix;"),this.requires.worldNormal&&(this.addVaryCode("varying vec3 vWNormal;"),this.addVertexFinalCode("vWNormal = inverseTransformDirection( transformedNormal, viewMatrix ).xyz;")),this.requires.vWorldViewDir&&(this.addVaryCode("varying vec3 vWorldViewDir;"),this.addVertexFinalCode("vWorldViewDir = isPerspectiveMatrix( projectionMatrix ) ?  ( (modelMatrix * vec4(position, 1.0)).xyz - cameraPosition ) : vec3( -viewMatrix[0][2], -viewMatrix[1][2], -viewMatrix[2][2] );")),this.needsJitter&&(this.addVertexFinalCode(YI),this.addFragmentFinalCode(XI)),this}buildShader(e,a){this.resultCode[e]=a.build(this.setShader(e),"v4")}setMaterial(e,a){return this.defines={},this}addFlow(e,a,i){return this.addSlot(e).addCache(a).addContext(i)}removeFlow(){return this.removeSlot().removeCache().removeContext()}addCache(e){return this.cache=e??"",this.caches.push(this.cache),this}removeCache(){return this.caches.pop(),this.cache=this.caches[this.caches.length-1]||"",this}addContext(e){return this.context=Object.assign({},this.context,e),this.context.extra=this.context.extra||{},this.contexts.push(this.context),this}removeContext(){return this.contexts.pop(),this.context=this.contexts[this.contexts.length-1]||{},this}addSlot(e){return this.slot=e||"",this.slots.push(this.slot),this}removeSlot(){return this.slots.pop(),this.slot=this.slots[this.slots.length-1]||"",this}addFragmentVariable(e,a){this.fragmentVariables[e]===void 0&&(this.addFragmentCode(`${a} ${e};`),this.fragmentVariables[e]="")}addFragmentParsVariable(e,a){this.fragmentParsVariables[e]===void 0&&(this.addFragmentParsCode(`${a} ${e};`),this.fragmentParsVariables[e]="")}addVertexParsVariable(e,a){this.vertexParsVariables[e]===void 0&&(this.addVertexParsCode(`${a} ${e};`),this.vertexParsVariables[e]="")}addVertexCode(e){this.addCode(e,"vertex")}addFragmentCode(e){this.addCode(e,"fragment")}addCode(e,a){this.code[a??this.shader]+=e+`
`}addVertexNodeCode(e){this.addNodeCode(e,"vertex")}addFragmentNodeCode(e){this.addNodeCode(e,"fragment")}addNodeCode(e,a){this.nodeCode[a??this.shader]+=e+`
`}clearNodeCode(e){e=e??this.shader;let a=this.nodeCode[e];return this.nodeCode[e]="",a}clearVertexNodeCode(){return this.clearNodeCode("vertex")}clearFragmentNodeCode(){return this.clearNodeCode("fragment")}addVertexFinalCode(e){this.addFinalCode(e,"vertex")}addFragmentFinalCode(e){this.addFinalCode(e,"fragment")}addFinalCode(e,a){this.finalCode[a??this.shader]+=e+`
`}addVertexParsCode(e){this.addParsCode(e,"vertex")}addFragmentParsCode(e){this.addParsCode(e,"fragment")}addParsCode(e,a){this.parsCode[a??this.shader]+=e+`
`}addVaryCode(e){this.addVertexParsCode(e),this.addFragmentParsCode(e)}isCache(e){return this.caches.indexOf(e)!==-1}isSlot(e){return this.slots.indexOf(e)!==-1}define(e,a){this.defines[e]=a===void 0?1:a}require(e){this.requires[e]=!0}isDefined(e){return this.defines[e]!==void 0}getVar(e,a,i,o="varying",c="V",d=""){let g=this.getVars(o),b=g[e];if(!b){let j=g.length;b={name:i||"node"+c+j+(d?"_"+d:""),type:a},g.push(b),g[e]=b}return b}getTempVar(e,a,i,o){return this.getVar(e,a,i,this.shader,"T",o)}getAttribute(e,a){if(!this.attributes[e]){let i=this.getVar(e,a);this.addVertexParsCode("attribute "+a+" "+e+";"),this.addVertexFinalCode(i.name+" = "+e+";"),this.attributes[e]={varying:i,name:e,type:a}}return this.attributes[e]}getCode(e){return[this.prefixCode,this.parsCode[e],this.getVarListCode(this.getVars("varying"),"varying"),this.getVarListCode(this.inputs.uniforms[e],"uniform"),this.getVarListCode(this.inputs.arrayUniforms[e],"uniform"),this.getIncludesCode("consts",e),this.getIncludesCode("structs",e),this.getIncludesCode("functions",e),"void main() {",this.getVarListCode(this.getVars(e)),this.code[e],this.resultCode[e],this.finalCode[e],"}"].join(`
`)}getVarListCode(e,a){a=a??"";let i="";for(let o=0,c=e.length;o<c;++o){let d=e[o],g=d.type,b=d.name,j=d.size,$=this.getFormatByType(g);if($===void 0)throw new Error("Node pars "+$+" not found.");$.includes("[]")?i+=a+" "+$.substring(0,$.length-2)+" "+b+`[${j}];
`:i+=a+" "+$+" "+b+`;
`}return i}getVars(e){return this.inputs.vars[e??this.shader]}getNodeData(e){let a=e instanceof Xi?e.uuid:e;return this.nodeData[a]=this.nodeData[a]||{}}createUniform(e,a,i,o,c,d){if(a.includes("[]")){let g=this.inputs.arrayUniforms,b=g.list.length,j=new Pm({type:a,size:i.size,name:o||"nodeUA"+b+(d?"_"+d:""),node:i,needsUpdate:c});return g.list.push(j),g[e].push(j),g[e][j.name]=j,this.uniforms[j.name]=j,j}else{let g=this.inputs.uniforms,b=g.list.length,j=new Pm({type:a,name:o||"nodeU"+b+(d?"_"+d:""),node:i,needsUpdate:c});return g.list.push(j),g[e].push(j),g[e][j.name]=j,this.uniforms[j.name]=j,j}}createVertexUniform(e,a,i,o,c){return this.createUniform("vertex",e,a,i,o,c)}createFragmentUniform(e,a,i,o,c){return this.createUniform("fragment",e,a,i,o,c)}include(e,a,i){var d;let o;if(e=typeof e=="string"?Ni.get(e):e,this.context.include===!1)return e.name;e instanceof Ae?o=this.includes.functions:e instanceof Yt?o=this.includes.consts:e instanceof qd&&(o=this.includes.structs);let c=o[this.shader]=o[this.shader]||[];if(e){let g=c[e.name];if(g||(g=c[e.name]={node:e,deps:[]},c.push(g),g.src=e.build(this,"source")),e instanceof Ae&&a&&c[a.name]&&c[a.name].deps.indexOf(e)===-1&&(c[a.name].deps.push(e),(d=e.includes)==null?void 0:d.length)){let b=0;do this.include(e.includes[b++],a);while(b<e.includes.length)}return i&&(g.src=i),e.name}else throw new Error("Include not found.")}colorToVectorProperties(e){return e.replace("r","x").replace("g","y").replace("b","z").replace("a","w")}colorToVector(e){return e.replace(/c/g,"v3")}getIncludes(e,a){return this.includes[e][a||this.shader]}getConstructorFromLength(e){return uY[e-1]}isTypeMatrix(e){return/^m/.test(e)}getTypeLength(e){return e==="f"?1:parseInt(this.colorToVector(e).substr(1))}getTypeFromLength(e){return e===1?"f":"v"+e}findNode(...e){for(let a=0;a<arguments.length;a++){let i=e[a];if(i!=null&&i.isNode)return i}}resolve(...e){for(let a=0;a<arguments.length;a++){let i=e[a];if(i!==void 0){if(i.isNode)return i;if(i.isTexture)switch(i.mapping){case al:case ll:return new J0(i);case ch:return new Z0(new Pn(i));default:return new Pn(i)}else{if(i.isVector2)return new qr(i);if(i.isVector3)return new nn(i);if(i.isVector4)return new jn(i)}}}}format(e,a,i){switch(this.colorToVector(i+" <- "+a)){case"f <- v2":return e+".x";case"f <- v3":return e+".x";case"f <- v4":return e+".x";case"f <- i":case"f <- b":return"float( "+e+" )";case"v2 <- f":return"vec2( "+e+" )";case"v2 <- v3":return e+".xy";case"v2 <- v4":return e+".xy";case"v2 <- i":case"v2 <- b":return"vec2( float( "+e+" ) )";case"v3 <- f":return"vec3( "+e+" )";case"v3 <- v2":return"vec3( "+e+", 0.0 )";case"v3 <- v4":return e+".xyz";case"v3 <- i":case"v3 <- b":return"vec2( float( "+e+" ) )";case"v4 <- f":return"vec4( "+e+" )";case"v4 <- v2":return"vec4( "+e+", 0.0, 1.0 )";case"v4 <- v3":return"vec4( "+e+", 1.0 )";case"v4 <- i":case"v4 <- b":return"vec4( float( "+e+" ) )";case"i <- f":case"i <- b":return"int( "+e+" )";case"i <- v2":return"int( "+e+".x )";case"i <- v3":return"int( "+e+".x )";case"i <- v4":return"int( "+e+".x )";case"b <- f":return"( "+e+" != 0.0 )";case"b <- v2":return"( "+e+" != vec2( 0.0 ) )";case"b <- v3":return"( "+e+" != vec3( 0.0 ) )";case"b <- v4":return"( "+e+" != vec4( 0.0 ) )";case"b <- i":return"( "+e+" != 0 )"}return e}getTypeByFormat(e){return hY[e]||e}getFormatByType(e){return dY[e]||e}getUUID(e,a){return a=a!==void 0?a:!0,a&&this.cache&&(e=this.cache+"-"+e),e}getElementByIndex(e){return ZI[e]}getIndexByElement(e){return ZI.indexOf(e)}isShader(e){return this.shader===e}setShader(e){return this.shader=e,this}mergeDefines(e){for(let a in e)this.defines[a]=e[a];return this.defines}mergeUniform(e){for(let a in e)this.uniforms[a]=e[a];return this.uniforms}getTextureEncodingFromMap(e){let a;return e?e.isTexture&&(a=e.encoding):a=Sn,a===Sn&&this.context.gamma&&(a=at),a}},rr=class extends lr{constructor(e=0,a,i,o){super("c"),this.nodeType="Color",this.value=e instanceof xr$1?e:new xr$1(e||0,a,i,o)}setRGBA(e){this.value.setRGBA(e.r,e.g,e.b,e.a)}generate(e,a,i,o,c,d){i=e.getUUID(i??this.getUUID()),o=o??this.getType(e);let g=e.getNodeData(i),b=this.getReadonly()&&this.generateReadonly!==void 0;if(this.alpha){let j=this.alpha.build(e,"f");e.addFragmentNodeCode(`accumAlpha += ( 1.0 - accumAlpha ) * ${j};`)}return b?this.generateReadonly(e,a,i,o,c,d):e.isShader("vertex")?(g.vertex||(g.vertex=e.createVertexUniform(o,this,c,d,this.getLabel())),e.format(g.vertex.name,o,a)):(g.fragment||(g.fragment=e.createFragmentUniform(o,this,c,d,this.getLabel())),e.format(g.fragment.name,o,a))}generateReadonly(e,a,i,o,c,d){return e.format("vec3("+this.value.r+", "+this.value.g+", "+this.value.b+")",o,a)}},Dt=class extends lr{constructor(e){super("i"),this.nodeType="Int",this.value=Math.floor(e??0)}generateReadonly(e,a,i,o,c,d){return e.format(this.value.toString(),o,a)}},Jr=class extends lr{constructor(e){super("b"),this.nodeType="Bool",this.value=e??!1}generateReadonly(e,a,i,o){return e.format(this.value?"true":"false",o,a)}},no=class extends lr{constructor(e=1,a){super("f[]"),this.nodeType="FloatArray",this.size=e,this.value=Array.isArray(a)?a:typeof a=="number"?new Array(e).fill(a):new Array(e).fill(0)}},ql=class extends lr{},$0=class extends ql{constructor(e){super("v3"),this.image=e,this._value=new _}get value(){return this._value.x=this.image.isVideo?this.image.img.videoWidth??0:this.image.img.width,this._value.y=this.image.isVideo?this.image.img.videoHeight??0:this.image.img.height,this._value}},Qc=class extends ql{constructor(e,a,i=1008){super("t"),this.image=e,this.wrap=a,this.minFilter=i}get value(){return this.image.getTexture(this.wrap,this.minFilter)}},Zd=class extends lr{constructor(e){super("m3"),this.nodeType="Matrix3",this.value=e??new nr}generateReadonly(e,a,i,o,c,d){return e.format("mat3("+this.value.elements.join(", ")+")",o,a)}get elements(){return this.value.elements}set elements(e){this.value.fromArray(e)}},sn=class extends lr{constructor(e){super("m4"),this.nodeType="Matrix4",this.value=e??new ce$1}generateReadonly(e,a,i,o,c,d){return e.format("mat4("+this.value.elements.join(", ")+")",o,a)}get elements(){return this.value.elements}set elements(e){this.value.fromArray(e)}};function JI(e,a,i){e.setUvTransform(i[0],i[1],a[0],a[1],0,0,0)}var ex=class extends Zd{constructor(e,a){super(new nr),this.repeat=e,this.offset=a,JI(this.value,e,a)}updateMatrix(){JI(this.value,this.repeat,this.offset)}},so=class extends lr{constructor(e=1,a){super("v4[]"),this.nodeType="Vector4Array",this.size=e,this.value=Array.isArray(a)?a:a instanceof Ke?new Array(e).fill(a):new Array(e).fill(new Ke(0))}},Jd=class extends et{constructor(e,a,i,o){super("v3"),this.nodeType="Blend",this.a=e,this.b=a,this.alpha=i,this.mode=o}generate(e,a){if(e.isShader("fragment")){let i=[];return i.push(this.a.build(e,"c")),i.push(this.b.build(e,"c")),i.push(this.alpha.build(e,"f")),i.push(this.mode.build(e,"i")),e.format("spe_blend("+i.join(",")+")",this.getType(e),a)}else return console.warn("BlendNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),a)}},qA=class extends et{constructor(e,a){super("v3"),this.nodeType="CustomColor",this.color=e,this.alpha=a,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,a){if(e.isShader("fragment")){let i=e.include(qA.Nodes.customColor);e.addFragmentVariable(this.calpha,"float");let o=[];return o.push(this.color.build(e,"v3")),o.push(this.mask?`luminance(${this.mask.build(e,"v3")})`:"1.0"),o.push(this.alpha.build(e,"f")),o.push(this.calpha),e.format(i+"("+o.join(",")+")",this.getType(e),a)}else return console.warn("CustomColorNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),a)}},Kc=qA;Kc.Nodes=function(){return{customColor:new Ae(`vec3 customColor(vec3 color, float mask, float alpha, out float calpha) {
				float lalpha = alpha * mask;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha;

				return color;
			}`)}}();var YA=class extends et{constructor(e,a){super("v3"),this.nodeType="CustomNormal",this.cnormal=e,this.alpha=a,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,a){if(e.isShader("fragment")){let i=e.include(YA.Nodes.customNormal);e.addFragmentVariable(this.calpha,"float");let o=[];return o.push(this.cnormal.build(e,"v3")),o.push("normal"),o.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),o.push(this.alpha.build(e,"f")),o.push(this.calpha),e.format(i+"("+o.join(",")+")",this.getType(e),a)}else return console.warn("CustomNormalNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),a)}},$d=YA;$d.Nodes=function(){return{customNormal:new Ae(`vec3 customNormal(vec3 cnormal, vec3 norm, float mask, float alpha, out float calpha) {
				vec3 normal = packNormalToRGB( norm ).rgb;
				normal *= step( vec3(0.5), cnormal );

				float lalpha = alpha * mask;
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;

				return normal;
			}`)}}();var ef=class extends et{constructor(e,a,i,o,c,d,g,b,j,$,rt,_e){super("v3"),this.nodeType="CustomTexture",this.texture=e,this.textureSize=a,this.crop=i,this.projection=o,this.axis=c,this.side=d,this.size=g,this.blending=b,this.mat=j,this.isMask=_e,this.alpha=$,this.mode=rt,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,a){e.require("position"),e.require("normal"),e.require("uv"),e.requires.uv=[!0],e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0;let i=`g${this.uuid.toString().replace(/-/g,"")}`,o;switch(this.projection.value){case 3:o=e.include(ef.Nodes.cylindrical);break;case 2:o=e.include(ef.Nodes.spherical);break;case 1:let d=["vec3(1.0, 0.0, 0.0)","vec3(0.0, 1.0, 0.0)","vec3(0.0, 0.0, 1.0)"][this.axis.value],g=["zy","xz","xy"][this.axis.value],b=new Ae(`
		vec3 ${i}_planarTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
				vec2 projected = (1. + (position.${g})) / 2.;
				vec2 uvs = ( mat * vec3( (projected * 2. - 1.) / (size * .5), 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				${this.side.value===2?"":`lalpha *= step(0.0, ${this.side.value===1?"-1.0 * ":""}dot(vObjectNormal, ${d}));`}

				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				
				lalpha *= mask;

				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}`);o=e.include(b);break;case 4:o=e.include(ef.Nodes.triplanar);break;default:o=e.include(ef.Nodes.uv);break}e.addFragmentVariable(this.calpha,"float");let c=[];if(c.push("normal"),c.push(this.texture.generate(e,"t")),c.push(this.textureSize.build(e,"v2")),c.push(this.crop.build(e,"f")),c.push(this.mat.build(e,"mat3")),c.push(this.size.build(e,"v2")),c.push(this.blending.build(e,"f")),c.push(this.isMask.build(e,"b")),c.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),c.push(this.alpha.build(e,"f")),c.push(this.mode.build(e,"i")),c.push(this.calpha),this.projection.value===4){let d=`${i}_writeUvs`,g=d+"0",b=d+"1",j=d+"2",$=`${i}_triplanarWeights`;e.addFragmentVariable(g,"vec2"),e.addFragmentVariable(b,"vec2"),e.addFragmentVariable(j,"vec2"),e.addFragmentVariable($,"vec3"),c.push(g),c.push(b),c.push(j),c.push($)}else{let d=`${i}_writeUvs`;e.addFragmentVariable(d,"vec2"),c.push(d)}return e.format(o+"("+c.join(",")+")",this.getType(e),a)}},Yl=ef;Yl.Nodes=function(){let e=new Ae(`
vec3 cylindricalTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
                vec3 posN = normalize(position);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float scaledHeight = position.y / (size.y * 0.5);
                float v =  (scaledHeight / 2.) + .5;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;

				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}

				lalpha *= mask;
				
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}
`),a=new Ae(`
vec3 sphericalTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
                vec3 posN = normalize(vPosition);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float v = 0.5 + asin(posN.y) / 3.1415;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;
				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}

				lalpha *= mask;

				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}
`),i=new Ae(`vec3 uvTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
				vec2 uvs = ( mat * vec3( vUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;

				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				
				lalpha *= mask;

				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}`),o=new Ae(`vec3 triplanarTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUvs0, out vec2 writeUvs1, out vec2 writeUvs2, out vec3 writeWeights) {
				vec3 p = position;
				vec2 uv0 = (1.0 + p.xy) / 2.0;     
				vec2 uv1 = (1.0 + p.zy) / 2.0;		
				vec2 uv2 = (1.0 + p.xz) / 2.0;		
	
				uv0 = (mat * vec3((uv0 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;
				uv1 = (mat * vec3((uv1 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;
				uv2 = (mat * vec3((uv2 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;

				// Range from 3 to 128 seems to be good
				float exponent = (1.0 - blending) * 125.0 + 3.0;

				vec3 n = vObjectNormal;
				vec3 weights = abs(normalize(n));
				weights = pow(weights, vec3(exponent));
				weights /= dot(weights, vec3(1.0));

				// Write out all sets of UVs that we generated
				writeUvs0 = uv0;
				writeUvs1 = uv1;
				writeUvs2 = uv2;
				writeWeights = weights;

				// Derivatives for LOD
				vec2 df0 = fwidth(uv0);
				vec2 df1 = fwidth(uv1);
				vec2 df2 = fwidth(uv2);
				if (df0.x > 0.5) df0.x = 0.0;
				if (df1.x > 0.5) df1.x = 0.0;
				if (df2.x > 0.5) df2.x = 0.0;

				#ifdef GL_EXT_shader_texture_lod
                	vec4 tmp = 
						texture2DLodEXT(tex, uv0, log2(max(df0.x, df0.y)*min(textureSize.x, textureSize.y))) * weights.z + 
						texture2DLodEXT(tex, uv1, log2(max(df1.x, df1.y)*min(textureSize.x, textureSize.y))) * weights.x + 
						texture2DLodEXT(tex, uv2, log2(max(df2.x, df2.y)*min(textureSize.x, textureSize.y))) * weights.y;
				#else
                	vec4 tmp = 
						textureLod(tex, uv0, log2(max(df0.x, df0.y)*min(textureSize.x, textureSize.y))) * weights.z + 
						textureLod(tex, uv1, log2(max(df1.x, df1.y)*min(textureSize.x, textureSize.y))) * weights.x + 
						textureLod(tex, uv2, log2(max(df2.x, df2.y)*min(textureSize.x, textureSize.y))) * weights.y;
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;

				// Apply cropping across all 3 planes
				if ( crop > 0.5 ) {
					if ( uv0.x < 0.0 || uv0.x > 1.0 || uv0.y < 0.0 || uv0.y > 1.0 )  {
						lalpha = 0.0;
					}
					if ( uv1.x < 0.0 || uv1.x > 1.0 || uv1.y < 0.0 || uv1.y > 1.0 )  {
						lalpha = 0.0;
					}
					if ( uv2.x < 0.0 || uv2.x > 1.0 || uv2.y < 0.0 || uv2.y > 1.0 )  {
						lalpha = 0.0;
					}
				}

				lalpha *= mask;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;//n * 0.5 + 0.5;
			}			
			`);return{cylindrical:e,spherical:a,uv:i,triplanar:o}}();var tf=class extends et{constructor(e,a,i,o,c,d,g,b,j,$,rt,_e){super("v3"),this.nodeType="Depth",this.gradientType=e,this.smooth=a,this.near=i,this.far=o,this.isVector=c,this.isWorldSpace=d,this.origin=g,this.direction=b,this.colors=j,this.steps=$,this.isMask=_e,this.alpha=rt,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,a){let i=`g${this.uuid.toString().replace(/-/g,"")}`,o=new Ae(`vec3 ${i}_sdepth(float near, float far, vec3 origin, vec3 direction, vec4 colors[${i}_MAX_COLORS], float steps[${i}_MAX_COLORS], bool isMask, float mask, float alpha, out float calpha) {
               vec4 color = colors[0];
               #ifdef ${i}_IS_VECTOR
                   #ifdef ${i}_LINEAR
                       #ifdef ${i}_WORLDSPACE
                       float depth = vectorLinearWorldSpaceDepth(direction, origin, near, far);
                       #else
                       float depth = vectorLinearObjectSpaceDepth(direction, origin, near, far);
                       #endif
                   #else
                       #ifdef ${i}_WORLDSPACE
                           float depth = vectorSphericalWorldSpaceDepth(origin, near, far);
                       #else
                           float depth = vectorSphericalObjectSpaceDepth(origin, near, far);
                       #endif
                   #endif
               #else
                   float dist = length(vWPosition - cameraPosition);
			       float depth = ( dist - near ) / ( far - near );
               #endif


              float p;
              #ifdef ${i}_SMOOTH
				for ( int i = 1; i < ${i}_MAX_COLORS; i++ ) {
						p = clamp( ( depth - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}
              #else
                for ( int i = 1; i < ${i}_MAX_COLORS; i++ ) {
                   p = clamp(( depth - steps[i - 1] ) / ( steps[i] - steps[i - 1] ), 0.0, 1.0);
                   color = mix(color, colors[i], p);
                 }
              #endif

               float lalpha = alpha * color.a * mask;
               calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
			   accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));
			   
               return color.rgb;
			}`,[tf.Nodes.vectorLinearWorldSpaceDepth,tf.Nodes.vectorLinearObjectSpaceDepth,tf.Nodes.vectorSphericalObjectSpaceDepth,tf.Nodes.vectorSphericalWorldSpaceDepth]);if(e.isShader("fragment")){e.define(`${i}_MAX_COLORS`,this.colors.value.length),this.smooth.value&&e.define(`${i}_SMOOTH`),this.isVector.value>.5&&e.define(`${i}_IS_VECTOR`),this.gradientType.value===0&&e.define(`${i}_LINEAR`),this.isWorldSpace.value>.5&&e.define(`${i}_WORLDSPACE`),e.require("worldPosition"),e.addFragmentVariable(this.calpha,"float");let c=e.include(o),d=[];return d.push(this.near.build(e,"f")),d.push(this.far.build(e,"f")),d.push(this.origin.build(e,"v3")),d.push(this.direction.build(e,"v3")),d.push(this.colors.build(e,"v4[]")),d.push(this.steps.build(e,"f[]")),d.push(this.isMask.build(e,"b")),d.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),d.push(this.alpha.build(e,"f")),d.push(this.calpha),e.format(c+"("+d.join(",")+")",this.getType(e),a)}else return console.warn("DepthNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),a)}},rf=tf;rf.Nodes=function(){let e=new Ae(`float vectorLinearWorldSpaceDepth(vec3 direction, vec3 origin, float near, float far) {
               vec3 n = normalize(direction);
               float dist = (n.x*(vWPosition.x - origin.x) + n.y*(vWPosition.y - origin.y) + n.z*(vWPosition.z - origin.z));
               return ( dist - near ) / ( far - near );
            }`),a=new Ae(`float vectorLinearObjectSpaceDepth(vec3 direction, vec3 origin, float near, float far) {
               vec3 n = normalize(direction);
               float dist = (n.x*(position.x - origin.x) + n.y*(position.y - origin.y) + n.z*(position.z - origin.z));
               return ( dist - near ) / ( far - near );
            }`),i=new Ae(`float vectorSphericalWorldSpaceDepth(vec3 origin, float near, float far) {
               float dist = length(vWPosition - origin);
               return ( dist - near ) / ( far - near );
            }`),o=new Ae(`float vectorSphericalObjectSpaceDepth(vec3 origin, float near, float far) {
               float dist = length(position - origin);
               return ( dist - near ) / ( far - near );
            }`);return{vectorLinearWorldSpaceDepth:e,vectorLinearObjectSpaceDepth:a,vectorSphericalWorldSpaceDepth:i,vectorSphericalObjectSpaceDepth:o}}();var Om=class extends et{constructor(e,a,i,o,c,d,g,b){super("v3"),this.nodeType="Fresnel",this.color=e,this.bias=a,this.scale=i,this.intensity=o,this.factor=c,this.isMask=b,this.alpha=d,this.mode=g,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,a){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let i=new Ae(`vec3 fresnel(vec3 color, float bias, float scale, float intensity, float factor, bool isMask, float mask, float alpha, int mode, out float calpha) {
					float fresnel = bias + scale * pow( abs( factor + dot( normalize( vWorldViewDir ), normalize( vWNormal ) ) ), intensity );

					float lalpha = clamp(fresnel, 0.0, 1.0) * alpha * mask;
					calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
					accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

					return color;
				}`),o=e.include(i),c=[];return c.push(this.color.build(e,"c")),c.push(this.bias.build(e,"f")),c.push(this.scale.build(e,"f")),c.push(this.intensity.build(e,"f")),c.push(this.factor.build(e,"f")),c.push(this.isMask.build(e,"b")),c.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),c.push(this.alpha.build(e,"f")),c.push(this.mode.build(e,"i")),c.push(this.calpha),e.format(o+"("+c.join(",")+")",this.getType(e),a)}else return console.warn("FresnelNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),a)}},XA=class extends et{constructor(e,a,i,o,c,d,g,b,j){super("v3"),this.nodeType="Gradient",this.gradientType=e,this.smooth=a,this.colors=i,this.steps=o,this.offset=c,this.morph=d,this.angle=g,this.isMask=j,this.alpha=b,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,a){if(e.isShader("fragment")){e.define("GRAD_MAX",10),e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let i=e.include(XA.Nodes.gradient),o=[];return o.push(this.gradientType.build(e,"i")),o.push(this.smooth.build(e,"b")),o.push(this.colors.build(e,"v4[]")),o.push(this.steps.build(e,"f[]")),o.push(this.offset.build(e,"v2")),o.push(this.morph.build(e,"v2")),o.push(this.angle.build(e,"f")),o.push(this.isMask.build(e,"b")),o.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),o.push(this.alpha.build(e,"f")),o.push(this.calpha),e.format(i+"("+o.join(",")+")",this.getType(e),a)}else return console.warn("GradientNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),a)}},nf=XA;nf.Nodes=function(){return{gradient:new Ae(`vec3 gradient(int gradientType, bool smoothed, vec4 colors[GRAD_MAX], float steps[GRAD_MAX], vec2 offset, vec2 morph, float angle, bool isMask, float mask, float alpha, out float calpha) {
				vec4 color = colors[0];
				vec2 m = morph / vUv.xy;
				vec2 rot = vec2( 0.5 + m.x, m.y );
				vec2 dt = vec2(
					cos( angle ) * rot.x - sin( angle ) * rot.y,
					sin( angle ) * rot.x + cos( angle ) * rot.y
				);
				vec2 pt = ( vUv - 0.5 + offset ) / 2.0 + dt / 2.0;
				float t = dot( pt, dt ) / dot( dt, dt );
				if ( gradientType == 1 ) {
					t = distance (
						( vUv + morph ) * 3.0,
						( vUv + offset ) + 1.0
					) + angle;
				} else if ( gradientType == 2 ) {
					float polar = atan(
						vUv.x + morph.x - 0.5 + offset.x,
						vUv.y + morph.y - 0.5 + offset.y
					) * -1.0;
					t = fract( ( angle / PI / -2.0 ) + 0.5 * ( polar / PI ) );
				}

				float p;
				if (smoothed) {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}

				} else {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], p);
					}
				}

				float lalpha = alpha * color.a * mask;
				calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));
				
				return color.xyz;
			}`)}}();var QA=class extends et{constructor(e,a,i,o){super("v3"),this.nodeType="Matcap",this.texture=e,this.isMask=o,this.alpha=a,this.mode=i,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,a){if(e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let i=e.include(QA.Nodes.matcap);e.require("normal"),e.requires.normal=!0;let o=[];return o.push(this.texture.generate(e,"t")),o.push("normal"),o.push(this.isMask.build(e,"b")),o.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),o.push(this.alpha.build(e,"f")),o.push(this.mode.build(e,"i")),o.push(this.calpha),e.format(i+"("+o.join(",")+")",this.getType(e),a)}else return console.warn("MatcapNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),a)}},sf=QA;sf.Nodes=function(){return{matcap:new Ae(`vec3 matcap(sampler2D matcapTex, vec3 normal, bool isMask, float mask, float alpha, int mode, out float calpha) {
					vec3 viewDir = normalize( vViewPosition );
					vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
					vec3 y = cross( viewDir, x );
					vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks
					vec4 matcapColor = texture2D( matcapTex, uv );

					float lalpha = alpha * mask;
					calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
					accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));
					
					return matcapColor.rgb;
            	}`)}}();var Im=(e=>(e.SIMPLEX="simplex3d",e.SIMPLEX_FRACTAL="simplex3dFractal",e.ASHIMA="simplexAshima",e.FBM="fbm",e.PERLIN="perlin",e.VORONOI="voronoi",e))(Im||{}),Zi=function(){let e=new Ae(`vec3 random3(vec3 c) {
			float j = 4096.0*sin(dot(c,vec3(17.0, 59.4, 15.0)));
			vec3 r;
			r.z = fract(512.0*j);
			j *= .125;
			r.x = fract(512.0*j);
			j *= .125;
			r.y = fract(512.0*j);
			return r-0.5;
		}`),a=new Ae(`float simplex3d(vec3 p) {
			 vec3 s = floor(p + dot(p, vec3(F3)));
			 vec3 x = p - s + dot(s, vec3(G3));
			 
			 vec3 e = step(vec3(0.0), x - x.yzx);
			 vec3 i1 = e*(1.0 - e.zxy);
			 vec3 i2 = 1.0 - e.zxy*(1.0 - e);
				
			 vec3 x1 = x - i1 + G3;
			 vec3 x2 = x - i2 + 2.0*G3;
			 vec3 x3 = x - 1.0 + 3.0*G3;
			 
			 vec4 w, d;
			 
			 w.x = dot(x, x);
			 w.y = dot(x1, x1);
			 w.z = dot(x2, x2);
			 w.w = dot(x3, x3);
			 
			 w = max(0.6 - w, 0.0);
			 
			 d.x = dot(random3(s), x);
			 d.y = dot(random3(s + i1), x1);
			 d.z = dot(random3(s + i2), x2);
			 d.w = dot(random3(s + 1.0), x3);
			 
			 w *= w;
			 w *= w;
			 d *= w;
			 
			 return dot(d, vec4(52.0));
		}`,[e]);a.keywords.F3=new Yt("float F3 0.3333333"),a.keywords.G3=new Yt("float G3 0.1666667");let i=new Ae(`float simplex3dFractal(vec3 m) {
			mat3 rot1 = mat3(-0.37, 0.36, 0.85,-0.14,-0.93, 0.34,0.92, 0.01,0.4);
			mat3 rot2 = mat3(-0.55,-0.39, 0.74, 0.33,-0.91,-0.24,0.77, 0.12,0.63);
			mat3 rot3 = mat3(-0.71, 0.52,-0.47,-0.08,-0.72,-0.68,-0.7,-0.45,0.56);
			return 0.5333333 * simplex3d(m * rot1)
				 + 0.2666667 * simplex3d(2.0 * m * rot2)
				 + 0.1333333 * simplex3d(4.0 * m * rot3)
				 + 0.0666667 * simplex3d(8.0 * m);
		}`,[a]),o=new Ae("vec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}"),c=new Ae("vec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}"),d=new Ae(`float simplexAshima(vec3 v) {
		  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;
		  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);
		  vec3 i  = floor(v + dot(v, C.yyy) );
		  vec3 x0 =   v - i + dot(i, C.xxx) ;
		  vec3 g = step(x0.yzx, x0.xyz);
		  vec3 l = 1.0 - g;
		  vec3 i1 = min( g.xyz, l.zxy );
		  vec3 i2 = max( g.xyz, l.zxy );
		  vec3 x1 = x0 - i1 + 1.0 * C.xxx;
		  vec3 x2 = x0 - i2 + 2.0 * C.xxx;
		  vec3 x3 = x0 - 1. + 3.0 * C.xxx;
		  i = mod(i, 289.0 ); 
		  vec4 p = permute( permute( permute( 
					 i.z + vec4(0.0, i1.z, i2.z, 1.0 ))
				   + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) 
				   + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));
		  float n_ = 1.0/7.0; // N=7
		  vec3  ns = n_ * D.wyz - D.xzx;
		  vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)
		  vec4 x_ = floor(j * ns.z);
		  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)
		  vec4 x = x_ *ns.x + ns.yyyy;
		  vec4 y = y_ *ns.x + ns.yyyy;
		  vec4 h = 1.0 - abs(x) - abs(y);
		  vec4 b0 = vec4( x.xy, y.xy );
		  vec4 b1 = vec4( x.zw, y.zw );
		  vec4 s0 = floor(b0)*2.0 + 1.0;
		  vec4 s1 = floor(b1)*2.0 + 1.0;
		  vec4 sh = -step(h, vec4(0.0));
		  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;
		  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;
		  vec3 p0 = vec3(a0.xy,h.x);
		  vec3 p1 = vec3(a0.zw,h.y);
		  vec3 p2 = vec3(a1.xy,h.z);
		  vec3 p3 = vec3(a1.zw,h.w);
		  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
		  p0 *= norm.x;
		  p1 *= norm.y;
		  p2 *= norm.z;
		  p3 *= norm.w;
		  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
		  m = m * m;
		  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), 
										dot(p2,x2), dot(p3,x3) ) );
		}`,[o,c]),g=new Ae("vec4 mod289(vec4 x){return x - floor(x * (1.0 / 289.0)) * 289.0;}"),b=new Ae("vec4 perm(vec4 x){return mod289(((x * 34.0) + 1.0) * x);}",[g]),j=new Ae(`float noise(vec3 p){
			vec3 a = floor(p);
			vec3 d = p - a;
			d = d * d * (3.0 - 2.0 * d);
			vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);
			vec4 k1 = perm(b.xyxy);
			vec4 k2 = perm(k1.xyxy + b.zzww);
			vec4 c = k2 + a.zzzz;
			vec4 k3 = perm(c);
			vec4 k4 = perm(c + 1.0);
			vec4 o1 = fract(k3 * (1.0 / 41.0));
			vec4 o2 = fract(k4 * (1.0 / 41.0));
			vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);
			vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);
			return o4.y * d.y + o4.x * (1.0 - d.y);
		}`,[b]),$=new Ae(`float fbm(vec3 x) {
			float v = 0.0;
			float a = 0.5;
			vec3 shift = vec3(100);
			for (int i = 0; i < NUM_OCTAVES; ++i) {
				v += a * noise(x);
				x = x * 2.0 + shift;
				a *= 0.5;
			}
			return v;
		}`,[j]);$.keywords.NUM_OCTAVES=new Yt("int NUM_OCTAVES 5");let rt=new Ae("vec3 fade(vec3 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}"),_e=new Ae(`float perlin(vec3 P){
		  vec3 Pi0 = floor(P);
		  vec3 Pi1 = Pi0 + vec3(1.0);
		  Pi0 = mod(Pi0, 289.0);
		  Pi1 = mod(Pi1, 289.0);
		  vec3 Pf0 = fract(P);
		  vec3 Pf1 = Pf0 - vec3(1.0);
		  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
		  vec4 iy = vec4(Pi0.yy, Pi1.yy);
		  vec4 iz0 = Pi0.zzzz;
		  vec4 iz1 = Pi1.zzzz;
		  vec4 ixy = permute(permute(ix) + iy);
		  vec4 ixy0 = permute(ixy + iz0);
		  vec4 ixy1 = permute(ixy + iz1);
		  vec4 gx0 = ixy0 / 7.0;
		  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;
		  gx0 = fract(gx0);
		  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
		  vec4 sz0 = step(gz0, vec4(0.0));
		  gx0 -= sz0 * (step(0.0, gx0) - 0.5);
		  gy0 -= sz0 * (step(0.0, gy0) - 0.5);
		  vec4 gx1 = ixy1 / 7.0;
		  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;
		  gx1 = fract(gx1);
		  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
		  vec4 sz1 = step(gz1, vec4(0.0));
		  gx1 -= sz1 * (step(0.0, gx1) - 0.5);
		  gy1 -= sz1 * (step(0.0, gy1) - 0.5);
		  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);
		  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);
		  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);
		  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);
		  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);
		  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);
		  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);
		  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);
		  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
		  g000 *= norm0.x;
		  g010 *= norm0.y;
		  g100 *= norm0.z;
		  g110 *= norm0.w;
		  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
		  g001 *= norm1.x;
		  g011 *= norm1.y;
		  g101 *= norm1.z;
		  g111 *= norm1.w;
		  float n000 = dot(g000, Pf0);
		  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
		  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
		  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
		  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
		  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
		  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
		  float n111 = dot(g111, Pf1);
		  vec3 fade_xyz = fade(Pf0);
		  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
		  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
		  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); 
		  return 2.2 * n_xyz;
		}`,[o,c,rt]),st=new Ae(`float hashwithoutsine13(vec3 p3)
		{
			p3  = fract(p3 * .1031);
			p3 += dot(p3, p3.yzx + 33.33);
			return fract((p3.x + p3.y) * p3.z);
		}`),ut=new Ae(`vec3 hashwithoutsine33(vec3 p3)
		{
			p3 = fract(p3 * vec3(.1031, .1030, .0973));
			p3 += dot(p3, p3.yxz+33.33);
			return fract((p3.xxy + p3.yxx)*p3.zyx);
		}`),gt=new Ae(`float metric(in vec3 p)
		{
			// L2 
			return length(p);

			// Chebyshev 
			// vec3 a = abs(p);
			// return max(a.x, max(a.y, a.z));
		}`),yt=new Ae(`float smin( float a, float b, float k )
		{
			float h = smoothstep(0.0, 1.0, 0.5 + 0.5 * (b - a) / k);
			float correction = k * h * (1.0 - h);
			return mix(b, a, h) - correction;
		}`),Pt=new Ae(`float smax( float a, float b, float k )
		{
			float h = smoothstep(1.0, 0.0, 0.5 + 0.5 * (a - b) / k);
			float correction = k * h * (1.0 - h);
			return mix(a, b, h) + correction;
		}`),wt=new Ae(`float remap(float value, float input_min, float input_max, float output_min, float output_max) {
			// Compute width of each interval
			float input_width = input_max - input_min;
			float output_width = output_max - output_min;
		
			// Convert input range into a 0-1 range 
			float scaled = (value - input_min) / input_width;
		
			// Convert the 0-1 range into a value in output range
			return output_min + (scaled * output_width);
		}`),Ct=new Ae(`float voronoi(in vec3 x, in int style, in float smoothness, in float seed, in int quality) 
		{
			// Integer and fractional parts of this point's coordinates
			ivec3 p = ivec3(floor(x));
			vec3 f = fract(x);

			// Different variables that we will use to construct noise:
			//
			// f1: distance to the closest feature point
			// f2: distance to the second closest feature point
			// e: distance to the closest edge (cell boundary)
			//
			// We also compute "smooth" versions of all of the above quantites, essentially
			// replacing "hard" minimums with "smooth" minimums (described by IQ)
			float f1_smooth = 8.0;
			float f1 = 8.0;
			float f2_smooth = 8.0;
			float f2 = 8.0;
			float e_smooth = 8.0;
			float e = 8.0;

			// Variables stored from closest cell
			ivec3 mb;
			vec3 mr; 

			int steps = quality;
			
			for (int x = -steps; x <= steps; x++) 
			for (int y = -steps; y <= steps; y++)
			for (int z = -steps; z <= steps; z++)
			{
				ivec3 b = ivec3(x, y, z);
				vec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;
				float d = length(r);
				
				f1_smooth = smin(d, f1_smooth, smoothness);

				// Store un-smoothed distances too 
				if (d < f1) 
				{
					f2 = f1;
					f1 = d;

					mb = ivec3(x, y, z);
					mr = r;
				} 
				else if (d < f2) 
				{
					f2 = d;
				}
			}	
			
			float id = hashwithoutsine13(vec3(p + mb) + seed);

			// Second pass for edge distance  
			for (int x = -steps; x <= steps; x++) 
			for (int y = -steps; y <= steps; y++)
			for (int z = -steps; z <= steps; z++)
			{
				// Start search at the cell that contains the closest point to "x" (found in 1st pass)
				ivec3 b = mb + ivec3(x, y, z);
				vec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;
				float d1 = dot(0.5 * (mr + r), (r - mr)); 				// IQ normalizes "r - mr" but that breaks things for the smooth version?
				float d2 = dot(0.5 * (mr + r), normalize(r - mr));

				e_smooth = smin(d1, e_smooth, smoothness);

				e = min(e, d2);

				// Also compute a smooth version of F2 in this pass
				{
					ivec3 b = ivec3(x, y, z);
					if (b != mb) 
					{
						vec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;
						float d = length(r);

						f2_smooth = smin(d, f2_smooth, smoothness);
					}
				}
			}

			// Different visualization modes 
			if (style == 0) 
			{
				return f1_smooth;
			}
			if (style == 1) 
			{
				return f2_smooth;
			}
			if (style == 2) 
			{
				return f2_smooth - f1_smooth;
				
				// "Pebbles" also cool
				//return step(0.2, f2_smooth - f1_smooth);
			}
			if (style == 3) 
			{
				// This one is really good for rock / stone effects
				float a = f1; 
				float b = f2;
				float k = 3.0;
				float h = max(k - abs(a - b), 0.0) / k;
				float final = min(a, b) - h * h * k * (1.0 / 4.0);
				return final;
			}
			if (style == 4) 
			{
				// Some random adjustments to make this style stand out more 
				return exp(5.0 * e_smooth);
			}
			if (style == 5) 
			{
				return pow(f1_smooth, 3.0);
			}
			if (style == 6) 
			{				
				const float eps = 0.0125;

				// Thicker lines as the user increases the smoothness slider
				float thickness = smoothness * 0.25 + eps;

				// Blurrier lines as the user increases the smoothness slider
				float blur = pow(smoothness, 3.0) * 0.25 + eps;

				return smoothstep(
					thickness - thickness * blur, 
					thickness + thickness * blur, 
					e
				);
			}
			if (style == 7) 
			{
				return hashwithoutsine13(vec3(p + mb) + seed);
			}
		}
	`,[st,ut,gt,yt,Pt,wt]);return{simplex:a,simplexFractal:i,simplexAshima:d,fbm:$,perlin:_e,voronoi:Ct}}(),of=class extends et{constructor(e,a,i,o,c,d,g,b,j,$,rt,_e,st,ut,gt,yt,Pt,wt,Ct){super("v3"),this.nodeType="Noise",this.scale=e,this.size=a,this.move=i,this.fA=o,this.fB=c,this.distortion=d,this.colorA=g,this.colorB=b,this.colorC=j,this.colorD=$,this.noiseType=_e,this.voronoiStyle=ut,this.highCut=gt,this.lowCut=yt,this.smoothness=Pt,this.seed=wt,this.quality=Ct,this.isMask=st,this.alpha=rt,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,a,i,o,c){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let d=Object.values(Im)[this.noiseType.value],g=d=="voronoi"?`
		float v = ${d}(st + move, voronoiStyle, smoothness, seed, quality);

		// Apply clipping to colors
		v = remap(v, lowCut, highCut, 0.0, 1.0);
		v = smax(v, 0.0, smoothness * 0.25);
		v = smin(v, 1.0, smoothness * 0.25);

		// Note that the voronoi mode only uses colors "A" and "C" from the UI 
		vec4 color = mix(colorA, colorC, v); 
		`:`
		vec3 q = vec3(${d}(st),
					   ${d}(st + vec3(1.0)),
					   ${d}(st + vec3(1.0)));
		vec3 r = vec3(${d}(st + vec3(distortion, 1.0) * q + vec3(fA, 1.0) + move),
					  ${d}(st + vec3(distortion, 1.0) * q + vec3(fB, 1.0) + move), 
					  ${d}(st * q));
		float f = ${d}(st + r);
		vec4 color;
		color = mix(colorA, colorB, clamp((f * f) * 4.0, 0.0, 1.0));
		color = mix(color, colorC, clamp(length(q), 0.0, 1.0));
		color = mix(color, colorD, clamp(length(r.x), 0.0, 1.0));
		`,b=new Ae(`vec3 ${d}customNoise(float scale, vec3 size, float move, vec2 fA, vec2 fB, vec2 distortion, vec4 colorA, vec4 colorB, vec4 colorC, vec4 colorD, int voronoiStyle, float highCut, float lowCut, float smoothness, float seed, int quality, bool isMask, float mask, float alpha, out float calpha) 
			{
                // Prevent scale of zero 
				scale = max(abs(scale), 0.001);

				vec3 st = position / size;
				st /= scale;

				${g}

				float lalpha = alpha * color.a * mask;
				calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return clamp(color, 0.0, 1.0).rgb;
			}`,[Zi.simplex,Zi.simplexFractal,Zi.simplexAshima,Zi.fbm,Zi.perlin,Zi.voronoi]),j=e.include(b),$=[];return $.push(this.scale.build(e,"f")),$.push(this.size.build(e,"v3")),$.push(this.move.build(e,"f")),$.push(this.fA.build(e,"v2")),$.push(this.fB.build(e,"v2")),$.push(this.distortion.build(e,"v2")),$.push(this.colorA.build(e,"v4")),$.push(this.colorB.build(e,"v4")),$.push(this.colorC.build(e,"v4")),$.push(this.colorD.build(e,"v4")),$.push(this.voronoiStyle.build(e,"i")),$.push(this.highCut.build(e,"f")),$.push(this.lowCut.build(e,"f")),$.push(this.smoothness.build(e,"f")),$.push(this.seed.build(e,"f")),$.push(this.quality.build(e,"i")),$.push(this.isMask.build(e,"b")),$.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),$.push(this.alpha.build(e,"f")),$.push(this.calpha),e.format(j+"("+$.join(",")+")",this.getType(e),a)}};of.numOctaves=5;var KA=class extends et{constructor(e,a,i,o,c,d,g,b,j,$,rt,_e,st,ut,gt,yt){super("v3"),this.nodeType="Outline",this.firstTime=!0,this.outlineColor=e,this.contourColor=a,this.outlineWidth=i,this.contourWidth=o,this.contourThreshold=c,this.outlineThreshold=d,this.contourFrequency=g,this.outlineSmoothing=b,this.contourDirection=j,this.positionalLines=$,this.compensation=rt,this.resolution=_e,this.normalMap=st,this.depthMap=ut,this.pixelRatio=gt,this.alpha=yt,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,a){let i=`g${this.uuid.toString().replace(/-/g,"")}`;if(e.require("vWorldViewDir"),e.require("worldNormal"),e.extensions.derivatives=!0,this.compensation.value&&e.define("OUTLINE_COMPENSATION",`${i}_offset`),this.firstTime){let o=this.outlineWidth.build(e,"f"),c=this.resolution.build(e,"v2"),d=this.compensation.build(e,"b"),g=this.pixelRatio.build(e,"f");e.addVertexParsVariable("randomColor","attribute vec3"),e.addVertexParsVariable("extrudeNormal","attribute vec3"),e.addVertexParsVariable(o,"uniform float"),e.addVertexParsVariable(c,"uniform vec2"),e.addVertexParsVariable(d,"uniform bool"),e.addVertexParsVariable(g,"uniform float"),e.addVertexParsVariable("vID","flat out float"),e.addFragmentParsVariable("vID","flat in float"),e.addVertexFinalCode(`
                vID = randomColor.r;
                vec2 ${i}_offset = vec2(0.0);
                if (${d}) {
                    vec4 ${i}_clipPosition = projectionMatrix * (modelViewMatrix * vec4(position, 1.0));
                    // NOTE: For certain shapes, like spheres, we get incorrect extrusion when the
                    // normals face the camera directly. So we hackily fix this by offsetting the normal
                    // by a tiny amount.
                    vec3 ${i}_clipNormal = mat3(projectionMatrix) * (mat3(modelViewMatrix) * extrudeNormal) + 0.0000001;
                    ${i}_offset = normalize(${i}_clipNormal.xy) / ${c} * (${o} / 2.0) * ${i}_clipPosition.w * 2.0 * ${g};
                    ${i}_clipPosition.xy += ${i}_offset;
                    // TODO(MAX): To handle multiple outline layers, we only want to extrude
                    // if this offset is the biggest of all the potential offsets
                    gl_Position = ${i}_clipPosition;
                }
            `)}if(e.isShader("fragment")){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let o=e.include(KA.Nodes.outline),c=[];return c.push(this.outlineColor.build(e,"c")),c.push(this.contourColor.build(e,"c")),c.push(this.outlineWidth.build(e,"f")),c.push(this.contourWidth.build(e,"f")),c.push(this.contourThreshold.build(e,"f")),c.push(this.outlineThreshold.build(e,"f")),c.push(this.contourFrequency.build(e,"f")),c.push(this.outlineSmoothing.build(e,"f")),c.push(this.contourDirection.build(e,"v3")),c.push(this.positionalLines.build(e,"b")),c.push(this.resolution.build(e,"v2")),c.push(this.normalMap.getTexture(e,"t")),c.push(this.depthMap.getTexture(e,"t")),c.push(this.pixelRatio.build(e,"f")),c.push(this.compensation.build(e,"b")),c.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),c.push(this.alpha.build(e,"f")),c.push(this.calpha),this.firstTime=!this.firstTime,e.format(o+"("+c.join(",")+")",this.getType(e),a)}else return console.warn("OutlineNode is not compatible with "+e.shader+" shader."),""}},af=KA;af.Nodes=function(){let e=new Ae(`
float sobelSample(sampler2D t, sampler2D d, vec2 uv, vec2 resolution, float outlineWidth, float pixelRatio)
{
    vec2 halton = haltonSequence[frameIndex];
    float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
    float temporalAngle  = temporalOffset * PI2;

    vec2 texelSize = (vec2(1.0) / resolution);
    vec2 offsetSize = texelSize * outlineWidth * pixelRatio;

    vec2 uvSamples[9];
    vec4 normalSamples[9];

	uvSamples[0] = uv + vec2( -offsetSize.x, -offsetSize.y) + (vogelDiskSample(0, 9, temporalAngle) * texelSize);
	uvSamples[1] = uv + vec2(0.0, -offsetSize.y) + (vogelDiskSample(1, 9, temporalAngle) * texelSize);
	uvSamples[2] = uv + vec2(  offsetSize.x, -offsetSize.y) + (vogelDiskSample(2, 9, temporalAngle) * texelSize);
	uvSamples[3] = uv + vec2( -offsetSize.x, 0.0) + (vogelDiskSample(3, 9, temporalAngle) * texelSize);
	uvSamples[4] = uv;
	uvSamples[5] = uv + vec2(  offsetSize.x, 0.0) + (vogelDiskSample(5, 9, temporalAngle) * texelSize);
	uvSamples[6] = uv + vec2( -offsetSize.x, offsetSize.y) + (vogelDiskSample(6, 9, temporalAngle) * texelSize);
	uvSamples[7] = uv + vec2(0.0, offsetSize.y) + (vogelDiskSample(7, 9, temporalAngle) * texelSize);
	uvSamples[8] = uv + vec2(  offsetSize.x, offsetSize.y) + (vogelDiskSample(8, 9, temporalAngle) * texelSize);


    normalSamples[0] = texture2D(t, uvSamples[0]);
    normalSamples[1] = texture2D(t, uvSamples[1]);
    normalSamples[2] = texture2D(t, uvSamples[2]);
    normalSamples[3] = texture2D(t, uvSamples[3]);
    normalSamples[4] = texture2D(t, uvSamples[4]);
    normalSamples[5] = texture2D(t, uvSamples[5]);
    normalSamples[6] = texture2D(t, uvSamples[6]);
    normalSamples[7] = texture2D(t, uvSamples[7]);
    normalSamples[8] = texture2D(t, uvSamples[8]);

    float depthBias = 0.0001;
    // TODO(MAX): Can we somehow reduce the number of conditionals here with MATH?!
    if (normalSamples[0].a != vID && normalSamples[0].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[0]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[1].a != vID && normalSamples[1].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[1]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[2].a != vID && normalSamples[2].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[2]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[3].a != vID && normalSamples[3].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[3]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }


    if (normalSamples[4].a != vID && normalSamples[4].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[4]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[5].a != vID && normalSamples[5].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[5]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[6].a != vID && normalSamples[6].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[6]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[7].a != vID && normalSamples[7].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[7]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[8].a != vID && normalSamples[8].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[8]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    vec3 sobel_edge_h = normalSamples[2].rgb + (2.0*normalSamples[5].rgb) + normalSamples[8].rgb - (normalSamples[0].rgb + (2.0*normalSamples[3].rgb) + normalSamples[6].rgb);
  	vec3 sobel_edge_v = normalSamples[0].rgb + (2.0*normalSamples[1].rgb) + normalSamples[2].rgb - (normalSamples[6].rgb + (2.0*normalSamples[7].rgb) + normalSamples[8].rgb);

    float edgeNormal = sqrt(dot(sobel_edge_h, sobel_edge_h) + dot(sobel_edge_v, sobel_edge_v));
    return edgeNormal;
}
`);return{outline:new Ae(`vec3 outline(vec3 outlineColor, vec3 contourColor, float outlineWidth, float contourWidth, float outlineThreshold, float contourThreshold, float outlineSmoothing, float contourFrequency, vec3 contourDirection, bool positionalLines, vec2 resolution, sampler2D normalMap, sampler2D depthMap, float pixelRatio, bool compensation, float mask, float alpha, out float calpha) {
                vec3 result = outlineColor;
                float resultAlpha = 0.0;

                vec3 N = normalize(vWNormal);
                vec2 nuv = (gl_FragCoord.xy / resolution);
                float sobelSample = compensation ? sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth / 2., pixelRatio) : sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth, pixelRatio);
                resultAlpha = smoothstep(outlineThreshold - outlineSmoothing, outlineThreshold + outlineSmoothing, sobelSample);

                //resultAlpha = 1.0;
                //result = vec3(sobelSample);

                float t = 1.0 - contourThreshold;
                if(positionalLines) {
                    vec3 NDir = position * contourDirection;
                    float NT = NDir.x + NDir.y + NDir.z;
                    float f  = fract(NT * contourFrequency * 0.01);
                    float df = fwidth(NT * contourFrequency);

                    float g = smoothstep(df * (contourWidth * 0.01), df * (contourWidth * 0.01 * 2.0), f);
                    if (g < 1.0 && resultAlpha == 0.0) {
                        result = contourColor;
                        resultAlpha = 1.0;
                    }
                 }
                 else {
                    vec3 NDir = N * contourDirection;
                    float NT = NDir.x + NDir.y + NDir.z;
                    float df = fwidth(NT * contourThreshold);
                    float f = sin(NT * 1.0 * contourFrequency);
                    float g = smoothstep(0.0, df * contourWidth, 1.0 - f);

                    if (df > (t * 0.5) && g < 1.0 && resultAlpha == 0.0) {
                        result = contourColor;
                        resultAlpha = 1.0 - g;
                    }
                 }

                 float lalpha = alpha * resultAlpha * mask;
                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				 
                 return result;
             }`,[e])}}();var Wo=class extends et{constructor(e,a,i,o,c,d,g,b,j,$,rt,_e,st,ut,gt,yt,Pt,wt){super("v3"),this.nodeType="Pattern",this.style=e,this.projection=a,this.axis=i,this.blending=o,this.offset=c,this.colorA=d,this.colorB=g,this.frequency=b,this.size=j,this.variation=$,this.smoothness=rt,this.zigzag=_e,this.rotation=st,this.vertical=ut,this.horizontal=gt,this.sides=yt,this.isMask=wt,this.alpha=Pt,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,a){if(e.isShader("fragment")){e.require("position"),e.require("uv"),e.requires.uv=[!0],e.require("normal"),e.requires.normal=!0,e.addFragmentVariable(this.calpha,"float");let i;switch(this.style.value){case 0:i="circle";break;case 1:i="ring";break;case 2:i="polygon";break;case 3:i="xcross";break;case 4:i="diamond";break;case 5:i="checkerboard";break;case 6:i="line";break;case 7:i="wave";break;default:i="circle";break}let o=`g${this.uuid.toString().replace(/-/g,"")}`,c=new Ae(`float hashwithoutsine12(vec2 p)
				{
					vec3 p3 = fract(vec3(p.xyx) * .1031);
					p3 += dot(p3, p3.yzx + 33.33);
					return fract((p3.x + p3.y) * p3.z);
				}`),d=new Ae(`vec2 rotate_uv(in vec2 uv, float a, bool repeat) 
				{
					const float mid = 0.5;
					float radians = a * (PI / 180.0);
					vec2 rotated = vec2(
						cos(radians) * (uv.x - mid) + sin(radians) * (uv.y - mid) + mid,
						cos(radians) * (uv.y - mid) - sin(radians) * (uv.x - mid) + mid
					);
					return repeat ? fract(rotated): rotated;
				}`),g="";if(this.projection.value===4){let rt=this.style.value===2?`${i}(uv0, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${i}(uv0, frequency, size, variation, smoothness_remapped, zigzag, rotation)`,_e=this.style.value===2?`${i}(uv1, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${i}(uv1, frequency, size, variation, smoothness_remapped, zigzag, rotation)`,st=this.style.value===2?`${i}(uv2, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${i}(uv2, frequency, size, variation, smoothness_remapped, zigzag, rotation)`;g=`
				vec3 p = position;
				float factor = 0.0125;
				vec2 uv0 = fract(p.xy * factor);
				vec2 uv1 = fract(p.zy * factor);
				vec2 uv2 = fract(p.xz * factor);
				
				uv0 = rotate_uv(uv0 + offset, rotation, true);
				uv1 = rotate_uv(uv1 + offset, rotation, true);
				uv2 = rotate_uv(uv2 + offset, rotation, true);
	
				float d0 = ${rt};
				float d1 = ${_e};
				float d2 = ${st};
				
				// Range from 3 to 128 seems to be good
				float exponent = (1.0 - blending) * 125.0 + 3.0;

				vec3 n = vObjectNormal;
				vec3 weights = abs(normalize(n));
				weights = pow(weights, vec3(exponent));
				weights /= dot(weights, vec3(1.0));
				d0 *= weights.z;
				d1 *= weights.x;
				d2 *= weights.y;
				float draw = d0 + d1 + d2;
	
				vec2 custom_uv = uv0 * weights.z + uv1 * weights.x + uv2 * weights.y;
				`}else{let rt=this.style.value===2?`${i}(custom_uv, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${i}(custom_uv, frequency, size, variation, smoothness_remapped, zigzag, rotation)`,_e="";this.axis.value===0?_e=`float radius = length(p);
					float theta = atan(p.y, p.z);
					float phi = acos(p.x / radius);`:this.axis.value===1?_e=`float radius = length(p);
					float theta = atan(p.x, p.z);
					float phi = acos(p.y / radius);`:(this.axis.value,_e=`float radius = length(p);
					float theta = atan(p.y, p.x);
					float phi = acos(p.z / radius);`);let st="";switch(this.projection.value){case 0:st="custom_uv = vUv.st;";break;case 1:break;case 2:st=`
							vec3 p = position;
							${_e}
							custom_uv = vec2(theta, phi);
							custom_uv /= PI;
							`;break}g=`
				vec2 custom_uv;
				${st}
	
				custom_uv += offset;
				custom_uv = fract(custom_uv);
				custom_uv = rotate_uv(custom_uv, rotation, true);
	
				float draw = ${rt};
				`}let b=new Ae(`vec3 ${o}_pattern(vec3 normal, float blending, int style, vec2 offset, vec4 colorA, vec4 colorB, vec2 frequency, float size, float variation, float smoothness, float zigzag, float rotation, vec2 vertical, vec2 horizontal, int sides, bool isMask, float mask, float alpha, out float calpha) {
					const float TWO_PI = PI * 2.0;
					float smoothness_remapped = pow(smoothness, 5.0);	

					${g}

					// Construct final output color
					vec4 color = mix(colorA, colorB, draw);
					color.a = clamp(color.a, 0.0, 1.0);

					// Apply cuts
					color.a *= 
						step(vertical.x, custom_uv.y) * 
						step(custom_uv.y, vertical.y);
					color.a *= 
						step(horizontal.x, abs(custom_uv.x)) * 
						step(abs(custom_uv.x), horizontal.y);

					// Accumulate alpha 
					float lalpha = alpha * clamp(color.a, 0.0, 1.0) * mask;
					calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
					accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

					return clamp(color, 0.0, 1.0).rgb;
				}`,[d,c,Wo.DrawFunctions.circle,Wo.DrawFunctions.ring,Wo.DrawFunctions.polygon,Wo.DrawFunctions.cross,Wo.DrawFunctions.diamond,Wo.DrawFunctions.checkerboard,Wo.DrawFunctions.line,Wo.DrawFunctions.wave]),j=e.include(b),$=[];return $.push("normal"),$.push(this.blending.build(e,"f")),$.push(this.style.build(e,"i")),$.push(this.offset.build(e,"v2")),$.push(this.colorA.build(e,"v4")),$.push(this.colorB.build(e,"v4")),$.push(this.frequency.build(e,"v2")),$.push(this.size.build(e,"f")),$.push(this.variation.build(e,"f")),$.push(this.smoothness.build(e,"f")),$.push(this.zigzag.build(e,"f")),$.push(this.rotation.build(e,"f")),$.push(this.vertical.build(e,"v2")),$.push(this.horizontal.build(e,"v2")),$.push(this.sides.build(e,"i")),$.push(this.isMask.build(e,"b")),$.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),$.push(this.alpha.build(e,"f")),$.push(this.calpha),e.format(j+"("+$.join(",")+")",this.getType(e),a)}else return console.warn("PatterNode is not compatible with "+e.shader+" shader."),e.format("vec3(0.0)",this.getType(e),a)}},lf=Wo;lf.DrawFunctions=function(){let e=new Ae(`float hashwithoutsine12(vec2 p) {
				vec3 p3 = fract(vec3(p.xyx) * 0.1031);
				p3 += dot(p3, p3.yzx + 33.33);
				return fract((p3.x + p3.y) * p3.z);
			}`),a=new Ae(`vec2 tile_and_center(in vec2 uv, in vec2 frequency, in float variation, in float zigzag, in float rotation) {
                // Create tiles in UV-space
                uv *= frequency;

                // Integer coords
                vec2 i = floor(uv);

                // Offset every other row based on zigzag param, then compute fractional coords
                float row_offset = mod(i.y, 2.0);
                uv.x += row_offset * zigzag;
                vec2 f = fract(uv);

				// Rotate the tile itself:
				// const float mid = 0.5;
				// f = vec2(
				// 	cos(rotation) * (f.x - mid) + sin(rotation) * (f.y - mid) + mid,
				// 	cos(rotation) * (f.y - mid) - sin(rotation) * (f.x - mid) + mid
				// );
				// f = fract(f);

                f = f * 2.0 - 1.0;

				// Recompute integer coords after shifting - then, random value per tile 
				i = floor(uv);
				float rand = (hashwithoutsine12(i) * 5.0 + 1.0);
				float jitter = mix(1.0, rand, variation);
				f *= jitter;

                return f;
            }`,[e]),i=new Ae(`float circle(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
                return smoothstep(
                    -smoothness, 
                     smoothness, 
                     length(f) - size
                );
            }`,[a]),o=new Ae(`float ring(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);

				float d = length(f);
                const float inner_width = 0.5;

                float outer = smoothstep(-smoothness, smoothness, d - size);
                float inner = smoothstep(-smoothness, smoothness, d - size * inner_width);
				return outer + (1.0 - inner);   
            }`,[a]),c=new Ae(`float sdf_ngon(in vec2 p, in float r, in int n) {
                float an = (PI * 2.0) / float(n);
                float he = r * tan(0.5 * an);
                
                // Rotate to first sector
                p = -p.yx; 
                float bn = an * floor((atan(p.y, p.x) + 0.5 * an) / an);
                vec2  cs = vec2(cos(bn), sin(bn));
                p = mat2(cs.x, -cs.y, cs.y, cs.x)*p;
            
                // Side of polygon
                return length(p - vec2(r, clamp(p.y, -he, he))) * sign(p.x - r);
            }
            
            float polygon(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation, in int sides) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
                return smoothstep(-smoothness, smoothness, sdf_ngon(f, size, sides));
            }`,[a]),d=new Ae(`float sdf_cross(in vec2 p, in vec2 b, float r ) {
                p = abs(p); 
				p = (p.y > p.x) ? p.yx : p.xy;
                vec2  q = p - b;
                float k = max(q.y, q.x);
                vec2  w = (k > 0.0) ? q : vec2(b.y - p.x, -k);
                return sign(k) * length(max(w, 0.0)) + r;
            }
            
            // Avoid namespace conflicts 
            float xcross(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
                return smoothstep(-smoothness, smoothness, sdf_cross(f, vec2(size, size * 0.25), smoothness));
            }`,[a]),g=new Ae(`float ndot(vec2 a, vec2 b) { 
                return a.x*b.x - a.y*b.y; 
            }
            
            float sdf_diamond(in vec2 p, in vec2 b) {
                p = abs(p);
                float h = clamp(ndot(b - 2.0 * p, b) / dot(b, b), -1.0, 1.0);
                float d = length(p - 0.5 * b * vec2(1.0 - h, 1.0 + h));
                return d * sign(p.x * b.y + p.y * b.x - b.x * b.y);
            }

            float diamond(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
	            return smoothstep(-smoothness, smoothness, sdf_diamond(f, vec2(size)));
            }`,[a]),b=new Ae(`float checkerboard(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                uv *= frequency;
                vec2 i = floor(uv);

                float offset = mod(i.y, 2.0);

                uv.x += offset + zigzag * offset;
                float x = floor(uv.x);
                
                return mod(x, 2.0);
            }`),j=new Ae(`float line(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, 0.0, zigzag, rotation);
				
				// Different approach for variation param here
				float row = floor(uv * frequency).y;
				float rand = hashwithoutsine12(vec2(row));
				float s = mix(size, size * rand, variation);

				return smoothstep(
					s - smoothness, 
					s + smoothness, 
					abs(f.y)
				);
            }`,[a]),$=new Ae(`// Uses bisection 
            float udf_cos(in vec2 p, in float a, in float b, in float c, in float d) {
                // Convert all data to a primitive cosine wave
                p = c * (p - vec2(d, a));
                
                const float TWO_PI = PI * 2.0;

                // Reduce to principal half cycle
                p.x = mod(p.x, TWO_PI); 
                if (p.x > PI) {
                    p.x = TWO_PI - p.x;
                }
            
                // Find zero of derivative (minimize distance)
                float xa = 0.0;
                float xb = TWO_PI;

                // 24 bit precision
                for (int i = 0; i < 24; i++) {
                    float x = 0.5 * (xa + xb);
                    float y = x - p.x + b * c * sin(x) * (p.y - b * c * cos(x));
                    if (y < 0.0) xa = x; 
                    else xb = x;
                }
                float x = 0.5 * (xa + xb);
                
                // Compute distance    
                vec2 q = vec2(x, b * c * cos(x));
                return length(p - q) / c;
            }

            float wave(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                float repeat = frequency.x;
                uv *= repeat;
                vec2 i = floor(uv);
                float row_offset = mod(i.y, 2.0);
                uv.x += row_offset * zigzag;
                vec2 f = vec2(uv.x, fract(uv.y));

                // Generalized cosine: y(x) = a + b * cos(cx + d)
                const float amplitude = 0.125;
                float wave_frequency = frequency.y * 0.1;
                float distance_estimate = udf_cos(f, 0.50, amplitude, wave_frequency * (2.0 * PI), 0.0);

				// Different approach for variation param here
				float rand = hashwithoutsine12(vec2(i.y));
				float s = mix(size, size * rand, variation);

                return smoothstep(-smoothness, smoothness, distance_estimate - s * 0.5);
            }`);return{tileAndCenter:a,circle:i,ring:o,polygon:c,cross:d,diamond:g,checkerboard:b,line:j,wave:$}}();var ZA=class extends et{constructor(e,a,i,o,c,d,g,b){super("v3"),this.nodeType="Rainbow",this.filmThickness=e,this.movement=a,this.wavelengths=i,this.noiseStrength=o,this.noiseScale=c,this.offset=d,this.isMask=b,this.alpha=g,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,a){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let i=e.include(ZA.Nodes.rainbow),o=[];return o.push(this.filmThickness.build(e,"f")),o.push(this.movement.build(e,"f")),o.push(this.wavelengths.build(e,"v3")),o.push(this.noiseStrength.build(e,"f")),o.push(this.noiseScale.build(e,"f")),o.push(this.offset.build(e,"v3")),o.push(this.isMask.build(e,"b")),o.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),o.push(this.alpha.build(e,"f")),o.push(this.calpha),e.format(i+"("+o.join(",")+")",this.getType(e),a)}else return console.warn("RainbowNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),a)}},cf=ZA;cf.Nodes=function(){let e=new Ae(`vec3 attenuation(vec3 wavelengths, float filmThickness, float movement, float noiseStrength, float noiseScale, vec3 offset) {
                 vec3 st = position / noiseScale;
				 vec3 q = vec3(simplex3d(st),
							  simplex3d(st + vec3(1.0)),
							  simplex3d(st + vec3(1.0)));

				 vec3 r = vec3(simplex3d(st + vec3(1.4, 1.3, 1.0) * q + vec3(1.7, 9.2, 1.0)),
							  simplex3d(st + vec3(2.0, 1.2, 1.0) * q + vec3(8.3, 2.8, 1.0)),
							  simplex3d(st * q));

                 float noise = simplex3d(st + r);

                 return .5 + .5 * cos((((filmThickness + (noise * noiseStrength)) / (vec3(wavelengths.r * 1.0, wavelengths.g * 0.8, wavelengths.b * 0.6) + 1.0)) * dot(normalize(vWorldViewDir + (offset * -0.001)), normalize(vWNormal))) + movement);
             }`,[Zi.simplex]);return{rainbow:new Ae(`vec3 rainbow(float filmThickness, float movement, vec3 wavelengths, float noiseStrength, float noiseScale, vec3 offset, bool isMask, float mask, float alpha, out float calpha) {
				vec3 res = clamp(attenuation(wavelengths, filmThickness, movement, noiseStrength, noiseScale, offset), 0.0, 2.0);

				float rainbowContribution = clamp(res.r + res.g + res.b, 0.0, 1.0);

				float lalpha = alpha * rainbowContribution * mask;
				calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return res;
             }`,[e])}}();var JA=class extends et{constructor(e,a,i,o,c,d,g,b,j,$){super("v3"),this.nodeType="Toon",this.positioning=e,this.colors=a,this.steps=i,this.source=o,this.isWorldSpace=c,this.noiseStrength=d,this.noiseScale=g,this.shadowColor=b,this.offset=j,this.alpha=$,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,a){if(e.require("worldNormal"),e.require("worldPosition"),e.isShader("fragment")){e.define("COLORS_MAX",10),e.addFragmentVariable(this.calpha,"float");let i=e.include(JA.Nodes.toon),o=[];return o.push(this.positioning.build(e,"i")),o.push(this.colors.build(e,"v4[]")),o.push(this.steps.build(e,"f[]")),o.push(this.source.build(e,"v3")),o.push(this.isWorldSpace.build(e,"b")),o.push(this.noiseStrength.build(e,"f")),o.push(this.noiseScale.build(e,"f")),o.push(this.shadowColor.build(e,"v4")),o.push(this.offset.build(e,"v3")),o.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),o.push(this.alpha.build(e,"f")),o.push(this.calpha),e.format(i+"("+o.join(",")+")",this.getType(e),a)}else return console.warn("ToonNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),a)}},uf=JA;uf.Nodes=function(){let e=new Ae(`float rand(float n) {
				return fract(sin(n) * 43758.5453123);
			}`),a=new Ae(`float hash1(float p) { 
				p = fract(p * 0.011); 
				p *= p + 7.5; 
				p *= p + p; 
				return fract(p); 
			}`),i=new Ae(`float valueNoise(vec3 x) {
				const vec3 step = vec3(110, 241, 171);
			
				vec3 i = floor(x);
				vec3 f = fract(x);
			 
				// For performance, compute the base input to a 1D hash from the integer part of the argument and the 
				// incremental change to the 1D based on the 3D -> 1D wrapping
				float n = dot(i, step);
			
				vec3 u = f * f * (3.0 - 2.0 * f);
				return mix(mix(mix( hash1(n + dot(step, vec3(0, 0, 0))), hash1(n + dot(step, vec3(1, 0, 0))), u.x),
							   mix( hash1(n + dot(step, vec3(0, 1, 0))), hash1(n + dot(step, vec3(1, 1, 0))), u.x), u.y),
						   mix(mix( hash1(n + dot(step, vec3(0, 0, 1))), hash1(n + dot(step, vec3(1, 0, 1))), u.x),
							   mix( hash1(n + dot(step, vec3(0, 1, 1))), hash1(n + dot(step, vec3(1, 1, 1))), u.x), u.y), u.z);
			}`,[a]),o=new Ae(`vec3 hash3(vec3 x) {
				x = vec3(dot(x,vec3(127.1, 311.7, 74.7)),
						 dot(x,vec3(269.5, 183.3, 246.1)),
						 dot(x,vec3(113.5, 271.9, 124.6)));
			
				return fract(sin(x)*43758.5453123);
			}`),c=new Ae(`vec3 voronoiNoise(in vec3 x)
			{
				vec3 p = floor(x);
				vec3 f = fract(x);

				float id = 0.0;
				vec2 res = vec2(100.0);

				for(int k=-1; k<=1; k++)
				for(int j=-1; j<=1; j++)
				for(int i=-1; i<=1; i++)
				{
					vec3 b = vec3(float(i), float(j), float(k));

					// Comment out the "+ hash(p + b);" part below to get "square" cells
					vec3 r = vec3(b) - f + hash3(p + b);
					float d = dot(r, r);

					if (d < res.x)
					{
						id = dot(p + b, vec3(1.0, 57.0, 113.0));
						res = vec2(d, res.x);			
					}
					else if (d < res.y)
					{
						res.y = d;
					}
				}

				return vec3(sqrt(res), abs(id));
			}
			`,[o]);return{toon:new Ae(`vec3 toon(int positioning, vec4 colors[COLORS_MAX], float steps[COLORS_MAX], vec3 source, bool isWorldSpace, float noiseStrength, float noiseScale, vec4 shadowColor, vec3 offset, float mask, float alpha, out float calpha) {
				float t = 0.0;
				float shadow = 1.0;

				if (positioning == 0) {

					// Can't do this mode if lighting is "none"
					#if (defined(PHONG) || defined(LAMBERT) || defined(STANDARD))

						// Algorithm from Chapter 10 of Graphics Shaders
						const vec3 weights = vec3(0.2125, 0.7154, 0.0721);
						vec3 lpos;
						vec3 l;
						float dproduct;

						#if (NUM_POINT_LIGHTS > 0)

							#if defined(USE_SHADOWMAP) && (NUM_POINT_LIGHT_SHADOWS > 0)
								PointLightShadow pointLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_POINT_LIGHTS; i++) {
								// Light positions are in view-space for some reason?
								lpos = (inverse(viewMatrix) * vec4(pointLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;
								l = normalize(lpos - worldPosition);
								
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								
								// TODO: we want to use "intensity" but it isn't available in the shader code
								//dproduct += dot(pointLights[UNROLLED_LOOP_INDEX].color, weights);

								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS)
									pointLightShadow = pointLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getPointShadow( 
											pointShadowMap[UNROLLED_LOOP_INDEX], 
											pointLightShadow.shadowMapSize, 
											pointLightShadow.shadowBias, 
											pointLightShadow.shadowRadius,
											vPointShadowCoord[UNROLLED_LOOP_INDEX], 
											pointLightShadow.shadowCameraNear, 
											pointLightShadow.shadowCameraFar);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						#if NUM_DIR_LIGHTS > 0 
							
							#if defined(USE_SHADOWMAP) && (NUM_DIR_LIGHT_SHADOWS > 0)
								DirectionalLightShadow directionalLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_DIR_LIGHTS; i++) {
								// Use the direction vector for directional lights instead
								l = (inverse(viewMatrix) * vec4(directionalLights[UNROLLED_LOOP_INDEX].direction, 0.0)).xyz;
		
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS)
									directionalLightShadow = directionalLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getShadow( 
										UNROLLED_LOOP_INDEX,
										directionalShadowMap[UNROLLED_LOOP_INDEX], 
										directionalLightShadow.shadowMapSize, 
										directionalLightShadow.shadowBias, 
										directionalLightShadow.shadowRadius, 
										vDirectionalShadowCoord[UNROLLED_LOOP_INDEX]);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						#if NUM_SPOT_LIGHTS > 0 
							
							#if defined(USE_SHADOWMAP) && (NUM_SPOT_LIGHT_SHADOWS > 0)
								SpotLightShadow spotLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_SPOT_LIGHTS; i++) {
								lpos = (inverse(viewMatrix) * vec4(spotLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;
								l = normalize(lpos - worldPosition);
								
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS)
									spotLightShadow = spotLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getShadow(
										UNROLLED_LOOP_INDEX,
										spotShadowMap[UNROLLED_LOOP_INDEX], 
										spotLightShadow.shadowMapSize, 
										spotLightShadow.shadowBias, 
										spotLightShadow.shadowRadius, 
										vSpotLightCoord[UNROLLED_LOOP_INDEX]);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						t = clamp(t, 0.0, 1.0);
				
					#endif

				} else if (positioning == 1) {
					
					vec3 origin = mix(position, worldPosition, float(isWorldSpace));
					vec3 direction = normalize(source - origin);
					t = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;	

				} else {

					vec3 origin = worldPosition;
					vec3 source = cameraPosition - offset;
					vec3 direction = normalize(source - origin);
					t = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;	
					
				}

				if (noiseStrength > 0.0) {
					// Distort with noise
					vec3 st = position / noiseScale;
					
					// Voronoi "smooth" noise
					float noise = 1.0 - voronoiNoise(st).x;

					// Voronoi cellular noise
					//float noise = 1.0 - rand(voronoiNoise(st).z);

					// Position warp noise
					// vec3 offset = vec3(
					// 	simplex3d(st),
					// 	simplex3d(st + vec3(111.1, 143.89, 217.19)),
					// 	simplex3d(st + vec3(171.1, 247.89, 117.23))
					// );
					// st += offset;
					// float noise = valueNoise(st);

					t += noise * noiseStrength;
				}

				t = clamp(t, 0.0, 1.0);

				// Compute ramp color
				float p;
				vec4 color = colors[0];
				for (int i = 1; i < COLORS_MAX; i++) {
					p = clamp((t - steps[i-1]) / (steps[i] - steps[i-1]), 0.0, 1.0);
					color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
				}

				// Incorporate custom shadow color
				if (positioning == 0) {

					vec3 blendedShadow = mix(color.rgb, shadowColor.rgb, shadowColor.a);
					color.rgb = mix(blendedShadow, color.rgb, shadow);
				
				}

				// Accumulate alpha as usual
				float lalpha = alpha * color.a * mask;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha;

				return color.xyz;

            }`,[Zi.simplex,e,i,c])}}();var $I=function(){return{textureBicubic:new Ae(`float w0( float a ) {
            return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
        }
    
        float w1( float a ) {
            return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
        }
    
        float w2( float a ){
            return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
        }
    
        float w3( float a ) {
            return ( 1.0 / 6.0 ) * ( a * a * a );
        }
    
        // g0 and g1 are the two amplitude functions
        float g0( float a ) {
            return w0( a ) + w1( a );
        }
    
        float g1( float a ) {
            return w2( a ) + w3( a );
        }
    
        // h0 and h1 are the two offset functions
        float h0( float a ) {
            return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
        }
    
        float h1( float a ) {
            return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
        }
    
        vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
            uv = uv * texelSize.zw + 0.5;
    
            vec2 iuv = floor( uv );
            vec2 fuv = fract( uv );
    
            float g0x = g0( fuv.x );
            float g1x = g1( fuv.x );
            float h0x = h0( fuv.x );
            float h1x = h1( fuv.x );
            float h0y = h0( fuv.y );
            float h1y = h1( fuv.y );
    
            vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
            vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
            vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
            vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
    
            return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) + 
                   g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
        }

        vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
            vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
            vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
            vec2 fLodSizeInv = 1.0 / fLodSize;
            vec2 cLodSizeInv = 1.0 / cLodSize;
            vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
            vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
            return mix( fSample, cSample, fract( lod ) );
        }`)}}();function eR(e,a){return e>=a?new z$2(a/e,1):new z$2(1,e/a)}var $A=class extends et{constructor(e,a,i,o,c,d,g,b){super("v3"),this.nodeType="Transmission",this.thickness=e,this.ior=a,this.roughness=i,this.transmissionSamplerSize=o,this.transmissionSamplerMap=c,this.transmissionDepthMap=d,this.aspectRatio=g,this.alpha=b,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,a){if(e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0,e.isShader("fragment")){e.define("NUM_SAMPLES",6),e.define("BLUR_SLOD",Math.pow(2,Ze.transmissionLod.value)),e.require("worldPosition"),e.requires.worldNormal=!0,e.requires.modelMatrix=!0,e.requires.projectionMatrix=!0,e.addFragmentVariable(this.calpha,"float");let i=e.include($A.Nodes.transmission),o=[];return o.push(this.thickness.build(e,"f")),o.push(this.ior.build(e,"f")),o.push(this.roughness.build(e,"f")),o.push(this.transmissionSamplerSize.build(e,"v2")),o.push(this.transmissionSamplerMap.getTexture(e,"t")),o.push(this.transmissionDepthMap.getTexture(e,"t")),o.push(this.aspectRatio.build(e,"v2")),o.push("normal"),o.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),o.push(this.alpha.build(e,"f")),o.push(this.calpha),e.format(i+"("+o.join(",")+")",this.getType(e),a)}else return console.warn("TransmissionNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),a)}},hf=$A;hf.Nodes=function(){let e=new Ae(`vec3 blur(sampler2D sp, vec2 U, vec2 scale, float lod, sampler2D dm, vec2 unrefractedU, vec2 aspectRatio) {
                // Slightly modified version of this:
                // https://www.shadertoy.com/view/ltScRG

				// Special case for blur == 0.0
				if (lod == 0.0) {
					#ifdef TEXTURE_LOD_EXT
					return texture2DLodEXT( sp, U, 0.0).rgb;
					#else
					return textureLod( sp, U, 0.0).rgb;
					#endif
				}
				
				vec2 texelSize = vec2(1.0) / resolution;
                vec2 halton = haltonSequence[frameIndex];
                float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
                float temporalAngle  = temporalOffset * PI2;
				vec3 res = vec3(0.0);
                vec2 uv = vec2(0.0);
                vec2 offset = vec2(0.0);
                vec2 vogelSample = vec2(0.0);
                for (int i = 0; i < NUM_SAMPLES; i++) {
                    vogelSample =  vogelDiskSample(i, NUM_SAMPLES, temporalAngle) * texelSize;
                    offset = vogelSample * scale * (lod * 10.0); // TODO: used to be hardcoded to 20
                    uv = U + offset;
                    float opaqueDepth = unpackRGBAToDepth(textureLod(dm, uv, lod));
                    if (opaqueDepth != 0.0 && opaqueDepth < gl_FragCoord.z) {
                        uv = unrefractedU;
                        lod = lod > 4.0 ? lod : lod / 2.0;
                    }
                    res += textureLod(sp, uv, lod).rgb;
                }
                return res / float(NUM_SAMPLES);
            }`),a=new Ae(`vec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {
		        // Direction of refracted light.
		        vec3 refractionVector = refract( -v,  n, 1.0 / ior );
		        
				// Compute rotation-independant scaling of the model matrix.
		        vec3 modelScale;
		        modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		        modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		        modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );

		        // The thickness is specified in local space
		        return normalize( refractionVector ) * thickness * modelScale;
	        }`),i=new Ae(`float applyIorToRoughness( float roughness, float ior ) {
				// Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and
				// an IOR of 1.5 results in the default amount of microfacet refraction.
				return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
			}`),o=new Ae(`vec3 getTransmissionSample( vec2 fragCoord, float roughness, float ior, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 unrefractedCoords, vec2 aspectRatio) {
				// Threejs exports do not pass a depth map to this shader, so we have to fallback to the "Threejs method of blurring" - see
				// also the code in convertTransmission.ts, which runs during export
				#ifdef IS_THREEJS_EXPORT
					float lod = log2(transmissionSamplerSize.x) * applyIorToRoughness(roughness / 5.0, ior);
					return textureBicubic(transmissionSamplerMap, fragCoord.xy, lod).rgb;
				#else
					float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
					float lod = applyIorToRoughness(roughness, ior);
					return blur(transmissionSamplerMap, fragCoord, vec2(lod), min(framebufferLod / 5.5, 8.5), transmissionDepthMap, unrefractedCoords, aspectRatio);
				#endif
			}`,[$I.textureBicubic,i,e]),c=new Ae(`vec3 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;

				// Project refracted vector on the framebuffer, while mapping to normalized device coordinates.
				vec4 ndcPos = projMatrix * viewMatrix *  vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;

				vec4 ndcPosUnrefracted = projMatrix * viewMatrix * vec4(position, 1.0 );
				vec2 unrefractedCoords = ndcPosUnrefracted.xy / ndcPosUnrefracted.w;
				unrefractedCoords += 1.0;
				unrefractedCoords /= 2.0;

				// Sample framebuffer to get pixel the refracted ray hits.
				return getTransmissionSample( refractionCoords, roughness, ior, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, unrefractedCoords, aspectRatio );
    		}`,[o,a]);return{transmission:new Ae(`vec3 transmission(float thickness, float ior, float roughness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio, vec3 normal, float mask, float alpha, out float calpha) {
                vec3 v = vec3(0.);
                if (isOrthographic) {
                    v = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
                } else {
                    v = normalize(vWPosition - cameraPosition);
                }
                vec3 transmission = getIBLVolumeRefraction(vWNormal, -v, roughness,  vWPosition, modelMatrix, viewMatrix, projectionMatrix, ior, thickness, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, aspectRatio );
                
				float lalpha = alpha * mask;
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * alpha;

				return transmission;
            }`,[c])}}();var e_=(e=>(e.NOISE="noise",e.MAP="map",e))(e_||{}),t_=class extends et{constructor(e,a,i,o,c,d,g,b,j,$,rt){super("v3"),this.displacementTypeIndex=new Dt(0),this.nodeType="VertexDisplacement",this.intensity=e,this.movementOrTexture=a,Object.values(e_)[this.displacementTypeIndex.value]==="map"&&(this.mat=new Zd(this.movementOrTexture.value.matrix)),this.cropOrOffset=i,this.scale=$,this.noiseFunctionIndex=rt,this.voronoiStyle=o,this.smoothness=c,this.seed=d,this.highCut=g,this.lowCut=b,this.quality=j}generate(e,a){if(e.isShader("vertex")){e.define("USE_LAYER_DISPLACE");let i,o=[];switch(o.push("displaced_position"),o.push("displaced_normal"),Object.values(e_)[this.displacementTypeIndex.value]){case"map":{i=e.include(t_.Nodes.map),o.push(this.movementOrTexture.getTexture(e,"t")),o.push("uv"),o.push(this.cropOrOffset.build(e,"f")),this.mat&&o.push(this.mat.build(e,"mat3"));break}case"noise":{let c=Object.values(Im)[this.noiseFunctionIndex.value],d=new Ae(`vec3 orthogonal(vec3 v) {
							return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
						}`),g=c=="voronoi"?`
					float v = ${c}((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1), voronoiStyle, smoothness, seed, quality);
					v = remap(v, lowCut, highCut, 0.0, 1.0);
					v = smax(v, 0.0, smoothness * 0.25);
					v = smin(v, 1.0, smoothness * 0.25);

					return p + n * v * intensity;
					`:`
					return p + n * ${c}((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1)) * intensity;
					`,b=new Ae(`vec3 distorted(vec3 p, vec3 n, float scale, float intensity, vec3 offset, float neighbour_offset, float movement, int voronoiStyle, float smoothness, float seed, float highCut, float lowCut, int quality) {
							${g}
						}`,[Zi.simplex,Zi.simplexFractal,Zi.simplexAshima,Zi.fbm,Zi.perlin,Zi.voronoi]),j=new Ae(`vec3 vertexDisplacementNoise(vec3 position, vec3 normal, float scale, vec3 offset, float movement, int voronoiStyle, float smoothness, float seed, float highCut, float lowCut, int quality, float intensity, out vec3 displaced_normal) {
							vec3 displaced_position = distorted(position, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);
							vec3 tangent1 = orthogonal(normal);
							vec3 tangent2 = normalize(cross(normal, tangent1));

                            // TODO(Max): The distance to the neighbors was originally scaled by 0.1.
                            // This caused some small oval/circular visual artifacts in the lighting.
                            // For now, simply using neighbors further away betters the problem,
                            // but we should figure out the underlying cause when we have some time.
                            // Maybe its related to how we calculate the tangent and bitangent?
							vec3 nearby1 = position + tangent1;
							vec3 nearby2 = position + tangent2;
							vec3 distorted1 = distorted(nearby1, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);
							vec3 distorted2 = distorted(nearby2, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);
							displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
							return displaced_position;
						}`,[b,d]);i=e.include(j),o.push(this.scale.build(e,"f")),o.push(this.cropOrOffset.build(e,"v3")),o.push(this.movementOrTexture.build(e,"f")),o.push(this.voronoiStyle.build(e,"i")),o.push(this.smoothness.build(e,"f")),o.push(this.seed.build(e,"f")),o.push(this.highCut.build(e,"f")),o.push(this.lowCut.build(e,"f")),o.push(this.quality.build(e,"i"));break}}return o.push(this.intensity.build(e,"f")),o.push("displaced_normal"),e.format(i+"("+o.join(",")+")",this.getType(e),a)}else return console.warn("VertexDisplacementNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),a)}},df=t_;df.Nodes=function(){let e=new Ae(`vec3 orthogonal(vec3 v) {
				return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
			}`),a=new Ae(`float displacementMapTexture(sampler2D tex, float crop, vec2 uv, mat3 mat, vec2 offset) {
				vec2 uvs = (mat * vec3(uv * 2.0 - 1.0, 1.0) / 2.0 + 0.5).xy + offset;
				vec4 tmp = texture2D(tex, uvs);
				vec3 col = tmp.rgb;
				if (crop > 0.5) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						return 0.0;
					}
				}
				return col.r;
			}`);return{map:new Ae(`vec3 vertexDisplacementMap(vec3 position, vec3 normal, sampler2D tex, vec2 uv, float crop, mat3 mat, float intensity, out vec3 displaced_normal) {
				vec3 displaced_position = position + normal * displacementMapTexture(tex, crop, uv, mat, vec2(0.0)) * intensity;
				vec3 tangent1 = normalize(orthogonal(normal));
				vec3 tangent2 = normalize(cross(normal, tangent1));
				vec3 nearby1 = position + tangent1 * 0.1;
				vec3 nearby2 = position + tangent2 * 0.1;
				vec3 distorted1 = nearby1 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				vec3 distorted2 = nearby2 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
				return displaced_position;
			}`,[e,a])}}();var Ze={normalRenderTarget:new Pn,normalRenderTargetDepth:new Pn,transmissionRenderTarget:new Pn,aspectRatio:new qr,transmissionSize:new qr(2048,2048),transmissionRenderTargetDepth:new Pn,aoRenderTarget:new Pn,aoEnabled:new Jr,pixelRatioNode:new ke(1),resolution:new qr,penumbraSize:new no(5,.5),frameIndex:new Dt(0),transmissionLod:new Dt(2)};for(let e of Object.values(Ze))e.isRenderGlobal=!0;var tx={skiaWasmUrl:"https://unpkg.com/@splinetool/ui-wasm@1.0.26/build/ui.wasm"},za=class extends Xi{constructor(){super("basic"),this.nodeType="Basic",this.color=new rr(si),this.shadingAlpha=new ke(1),this.shadingBlend=new Dt(0),this.previousModelViewMatrix=new sn,this.previouseProjectionMatrix=new sn}get category(){return"phong"}generate(e){let a;if(e.isShader("vertex")){let i=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:Ze.frameIndex}),e.mergeUniform({resolution:Ze.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(Xs.merge([De$1.fog])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>"].join(`
`));let o=["#include <beginnormal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];i&&o.push(i.code,i.result?"displaced_position = "+i.result+";":""),o.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","	vNormal = transformedNormal;","#endif"),o.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>"),o.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),a=o.join(`
`)}else{this.color===void 0&&(this.color=new rr(si)),this.color.analyze(e,{slot:"color"}),this.alpha&&this.alpha.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"});let i=this.color.flow(e,"c",{slot:"color"}),o=this.alpha?this.alpha.flow(e,"f"):void 0,c=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0,d=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0;e.requires.transparent=o!==void 0,e.addParsCode(["varying vec3 vWPosition;","#include <fog_pars_fragment>","#include <dithering_pars_fragment>","varying vec3 vViewPosition;","#include <normal_pars_fragment>"].join(`
`));let g=["#include <normal_fragment_begin>",i.code];o&&g.push(o.code,"#ifdef ALPHATEST"," if ( "+o.result+" <= ALPHATEST ) discard;","#endif"),d?g.push(d.code,`vec3 outgoingLight = ${i.result};`,`vec3 finalColor = spe_blend(outgoingLight, ${d.result}, 1.0, SPE_BLENDING_NORMAL);`):g.push(`vec3 finalColor = ${i.result};`);let b="1.0";this.mask&&(this.mask.analyze(e),b=`luminance(${this.mask.flow(e,"v3").result})`),o?g.push(`gl_FragColor = vec4( finalColor, accumAlpha * ${o.result} * ${b} );`):g.push("gl_FragColor = vec4("+i.result+", 1.0 );"),c&&g.push(`gl_FragColor.a *= ${c.result};`),g.push("#include <fog_fragment>","#include <dithering_fragment>"),a=g.join(`
`)}return a}},Rm=class extends Xi{constructor(){super("lambert"),this.nodeType="Lambert",this.color=new rr(si),this.emissive=new rr(0),this.emissiveIntensity=new ke(1),this.previousModelViewMatrix=new sn,this.previouseProjectionMatrix=new sn,this.shadingAlpha=new ke(1),this.shadingBlend=new Dt(0),this.occlusion=new Jr(!0)}get category(){return"lambert"}build(e){let a;if(e.define("LAMBERT"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let i=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:Ze.frameIndex}),e.mergeUniform({resolution:Ze.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(Xs.merge([De$1.fog,De$1.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <color_pars_vertex>","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let o=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];i&&o.push(i.code,i.result?"displaced_position = "+i.result+";":""),o.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),o.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>",`
					vec3 diffuse = vec3( 1.0 );
					GeometricContext geometry;
					geometry.position = mvPosition.xyz;
					geometry.normal = normalize( transformedNormal );
					geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
				`),o.push(`
					GeometricContext backGeometry;
					backGeometry.position = geometry.position;
					backGeometry.normal = -geometry.normal;
					backGeometry.viewDir = geometry.viewDir;
					vLightFront = vec3( 0.0 );
					vIndirectFront = vec3( 0.0 );
					#ifdef DOUBLE_SIDED
						vLightBack = vec3( 0.0 );
						vIndirectBack = vec3( 0.0 );
					#endif
					IncidentLight directLight;
					float dotNL;
					vec3 directLightColor_Diffuse;
					vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
					vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
					#ifdef DOUBLE_SIDED
						vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
						vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
					#endif
					#if NUM_POINT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
							getPointLightInfo( pointLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_SPOT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
							getSpotLightInfo( spotLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_DIR_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
							getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_HEMI_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
							vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
							#ifdef DOUBLE_SIDED
								vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
							#endif
						}
						#pragma unroll_loop_end
					#endif
				`,"	#include <shadowmap_vertex>","	#include <fog_vertex>"),o.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),a=o.join(`
`)}else{e.mergeUniform({penumbraSize:Ze.penumbraSize}),e.mergeUniform({frameIndex:Ze.frameIndex}),e.mergeUniform({aoMap:Ze.aoRenderTarget}),e.mergeUniform({aoEnabled:Ze.aoEnabled}),this.color===void 0&&(this.color=new rr(si)),this.color.analyze(e,{slot:"color"}),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let i=this.color.flow(e,"c",{slot:"color"}),o=this.emissive.flow(e,"c",{slot:"emissive"}),c=this.emissiveIntensity.flow(e,"f",{slot:"emissive"}),d=this.occlusion.flow(e,"b",{slot:"occlusion"}),g=this.shadingAlpha.flow(e,"f"),b=this.shadingBlend.flow(e,"i"),j=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,$=this.alpha?this.alpha.flow(e,"f"):void 0,rt=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=$!==void 0,e.addParsCode(["uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#include <normal_pars_fragment>","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <fog_pars_fragment>","#include <shadowmap_pars_fragment>","#include <shadowmask_pars_fragment>","#include <clipping_planes_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let _e=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx, viewdy));
				bool isFrontFacing = (dot(normal, faceNormal) >= 0.0);
				`,"#include <clipping_planes_fragment>"];_e.push(i.code,"vec3 diffuseColor = "+i.result+";","ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );"),$&&_e.push($.code,"#ifdef ALPHATEST","if ( "+$.result+" <= ALPHATEST ) discard;","#endif"),_e.push("#ifdef DOUBLE_SIDED","	reflectedLight.indirectDiffuse += ( isFrontFacing ) ? vIndirectFront : vIndirectBack;","#else","	reflectedLight.indirectDiffuse += vIndirectFront;","#endif","#include <lightmap_fragment>","reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );","#ifdef DOUBLE_SIDED","	reflectedLight.directDiffuse = ( isFrontFacing ) ? vLightFront : vLightBack;","#else","	reflectedLight.directDiffuse = vLightFront;","#endif","reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();"),o&&_e.push(o.code,"reflectedLight.directDiffuse += "+o.result+" * "+c.result+";"),_e.push("vec3 ao = aoEnabled && "+d.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = (reflectedLight.directDiffuse + reflectedLight.indirectDiffuse) ;");let st="1.0";this.mask&&(this.mask.analyze(e),st=`luminance(${this.mask.flow(e,"v3").result})`),_e.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${g.result} * ${st} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${g.result} * ${st}, ${b.result} );

					outgoingLight *= ao;
				}
				`),j&&_e.push(j.code,`outgoingLight = spe_blend(outgoingLight, ${j.result}, 1.0, SPE_BLENDING_NORMAL);`),$?_e.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${$.result} );`):_e.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),rt&&_e.push(`gl_FragColor.a *= ${rt.result};`),_e.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),a=_e.join(`
`)}return a}},Ua=function(){let e=new Ae(`vec2 dHdxy(sampler2D bumpMap, vec2 bumpMapUv, float bumpScale) {

            // Gradient of UVs w.r.t. X coordinate (in screen-space)
            vec2 dSTdx = dFdx(bumpMapUv);

            // Gradient of UVs w.r.t. Y coordinate (in screen-space)
            vec2 dSTdy = dFdy(bumpMapUv);
            
            // Forward differencing
            float Hll = bumpScale * luminance(texture(bumpMap, bumpMapUv).rgb);
            float dBx = bumpScale * luminance(texture(bumpMap, bumpMapUv + dSTdx).rgb) - Hll;
            float dBy = bumpScale * luminance(texture(bumpMap, bumpMapUv + dSTdy).rgb) - Hll;
            
            return vec2( dBx, dBy );
        }`),a=new Ae(`vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
            vec3 vSigmaX = dFdx( surf_pos.xyz );
            vec3 vSigmaY = dFdy( surf_pos.xyz );
            vec3 vN = surf_norm; // normalized
            
            vN = normalize(vN);

            vec3 R1 = cross( vSigmaY, vN );
            vec3 R2 = cross( vN, vSigmaX );

            R1 = normalize(R1);
            R2 = normalize(R2);
    
            float fDet = dot( vSigmaX, R1 ) * faceDirection;
    
            vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
            return normalize( abs( fDet ) * vN - vGrad );
        }`);return{dHdxy:e,perturbNormalArb:a}}(),Lm=class extends Xi{constructor(){super("phong"),this.nodeType="Phong",this.color=new rr(si),this.specular=new rr(1118481),this.shininess=new ke(30),this.previousModelViewMatrix=new sn,this.previouseProjectionMatrix=new sn,this.shadingAlpha=new ke(1),this.shadingBlend=new Dt(0),this.occlusion=new Jr(!0)}get category(){return"phong"}build(e){let a;if(e.define("PHONG"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let i=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:Ze.frameIndex}),e.mergeUniform({resolution:Ze.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(Xs.merge([De$1.fog,De$1.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <skinning_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let o=["#include <beginnormal_vertex>",`
				#include <skinbase_vertex>
				#include <skinnormal_vertex>
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif


				vec3 displaced_position = position;
				vec3 displaced_normal = objectNormal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];i&&o.push(i.code,i.result?"displaced_position = "+i.result+";":""),o.push("transformed = displaced_position;","#include <skinning_vertex>","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),o.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),o.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),a=o.join(`
`)}else{e.mergeUniform({penumbraSize:Ze.penumbraSize}),e.mergeUniform({frameIndex:Ze.frameIndex}),e.mergeUniform({aoMap:Ze.aoRenderTarget}),e.mergeUniform({aoEnabled:Ze.aoEnabled}),this.color===void 0&&(this.color=new rr(si)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e);let i=this.occlusion.flow(e,"b",{slot:"occlusion"});this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let o=this.color.flow(e,"c",{slot:"color"}),c=this.specular.flow(e,"c"),d=this.shininess.flow(e,"f"),g=this.shadingAlpha.flow(e,"f"),b=this.shadingBlend.flow(e,"i"),j=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,$=this.alpha?this.alpha.flow(e,"f"):void 0,rt=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=$!==void 0,e.addParsCode(["varying vec3 vWPosition;","uniform vec3 emissive;","uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","#include <normal_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_phong_pars_fragment>","#include <shadowmap_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let _e=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	BlinnPhongMaterial material;"];if(this.bumpMap){e.include(Ua.dHdxy),e.include(Ua.perturbNormalArb);let ut=this.bumpMap.texture.flow(e,"t"),gt=this.bumpMap.flow(e,"v3"),yt=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",Pt="";this.bumpMap.projection.value===4?Pt=`
					vec3 bumpNormal = vec3(0.0);
					{
						vec2 uv0 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						vec2 grad0 = dHdxy(${ut.result}, uv0, ${yt});
						vec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);

						vec2 grad1 = dHdxy(${ut.result}, uv1, ${yt});
						vec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);

						vec2 grad2 = dHdxy(${ut.result}, uv2, ${yt});
						vec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);
						
						bumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;
						bumpNormal = normalize(bumpNormal);
					}

					normal = bumpNormal;
					`:Pt=`
					vec2 bumpMapCachedUv = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs;
					vec2 grad = dHdxy(${ut.result}, bumpMapCachedUv, ${yt});
					normal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );
					`,_e.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${gt.result};
					${Pt}
					`)}_e.push(o.code,"	vec3 diffuseColor = "+o.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","	vec3 totalEmissiveRadiance = emissive;",c.code,"	vec3 specular = "+c.result+";",d.code,"	float shininess = max( 0.0001, "+d.result+" );","	float specularStrength = 1.0;"),$&&_e.push($.code,"#ifdef ALPHATEST","if ( "+$.result+" <= ALPHATEST ) discard;","#endif"),_e.push("material.diffuseColor = diffuseColor;"),_e.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),_e.push("vec3 ao = aoEnabled && "+i.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse)) + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;");let st="1.0";this.mask&&(this.mask.analyze(e),st=`luminance(${this.mask.flow(e,"v3").result})`),_e.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${g.result} * ${st} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${g.result} * ${st}, ${b.result} );
					
					outgoingLight *= ao;
				}
				`),j&&_e.push(j.code,`outgoingLight = spe_blend(outgoingLight, ${j.result}, 1.0, SPE_BLENDING_NORMAL);`),$?_e.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${$.result});`):_e.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),rt&&_e.push(`gl_FragColor.a *= ${rt.result};`),_e.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),a=_e.join(`
`)}return a}},Bm=class extends Xi{constructor(){super("standard"),this.nodeType="Standard",this.color=new rr(si),this.roughness=new ke(.3),this.metalness=new ke(0),this.reflectivity=new ke(.5),this.previousModelViewMatrix=new sn,this.previouseProjectionMatrix=new sn,this.shadingAlpha=new ke(1),this.shadingBlend=new Dt(0),this.occlusion=new Jr(!0)}get category(){return"physical"}build(e){let a;if(e.define("STANDARD"),e.requires.lights=!0,e.extensions.derivatives=!0,e.extensions.shaderTextureLOD=!0,e.isShader("vertex")){let i=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:Ze.frameIndex}),e.mergeUniform({resolution:Ze.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(Xs.merge([De$1.fog,De$1.lights])),De$1.LTC_1&&(e.uniforms.ltc_1={value:void 0},e.uniforms.ltc_2={value:void 0}),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let o=["#include <beginnormal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];i&&o.push(i.code,i.result?"displaced_position = "+i.result+";":""),o.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),o.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>","#include <shadowmap_vertex>"),o.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),a=o.join(`
`)}else{e.mergeUniform({penumbraSize:Ze.penumbraSize}),e.mergeUniform({frameIndex:Ze.frameIndex}),e.mergeUniform({aoMap:Ze.aoRenderTarget}),e.mergeUniform({aoEnabled:Ze.aoEnabled});let i={gamma:!0};this.color===void 0&&(this.color=new rr(si)),this.color.analyze(e,{slot:"color",context:i}),this.roughness.analyze(e),this.metalness.analyze(e);let o=this.occlusion.flow(e,"b",{slot:"occlusion"});this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e),this.reflectivity&&this.reflectivity.analyze(e);let c=this.color.flow(e,"c",{slot:"color",context:i}),d=this.roughness.flow(e,"f"),g=this.metalness.flow(e,"f"),b=this.shadingAlpha.flow(e,"f"),j=this.shadingBlend.flow(e,"i"),$=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,rt=this.alpha?this.alpha.flow(e,"f"):void 0,_e=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0,st=this.reflectivity?this.reflectivity.flow(e,"f"):void 0;e.requires.transparent=rt!==void 0,e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","#include <normal_pars_fragment>","#include <dithering_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_physical_pars_fragment>","#include <shadowmap_pars_fragment>"].join(`
`));let ut=["#include <clipping_planes_fragment>","	#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	PhysicalMaterial material;","	material.diffuseColor = vec3( 1.0 );"];if(this.bumpMap){e.include(Ua.dHdxy),e.include(Ua.perturbNormalArb);let yt=this.bumpMap.texture.flow(e,"t"),Pt=this.bumpMap.flow(e,"v3"),wt=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",Ct="";this.bumpMap.projection.value===4?Ct=`
					vec3 bumpNormal = vec3(0.0);
					{
						vec2 uv0 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						vec2 grad0 = dHdxy(${yt.result}, uv0, ${wt});
						vec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);

						vec2 grad1 = dHdxy(${yt.result}, uv1, ${wt});
						vec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);

						vec2 grad2 = dHdxy(${yt.result}, uv2, ${wt});
						vec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);
						
						bumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;
						bumpNormal = normalize(bumpNormal);
					}

					normal = bumpNormal;
					`:Ct=`
					vec2 bumpMapCachedUv = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs;
					vec2 grad = dHdxy(${yt.result}, bumpMapCachedUv, ${wt});
					normal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );
					`,ut.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${Pt.result};
					${Ct}
					`)}if(ut.push(c.code,"	vec3 diffuseColor = "+c.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",g.code,"	float metalnessFactor = "+g.result+";"),this.roughnessMap){let yt=this.roughnessMap.texture.flow(e,"t"),Pt=this.roughnessMap.flow(e,"v3"),wt="";this.roughnessMap.projection.value===4?wt=`
					float roughnessChange = 1.0;
					{
						vec2 uv0 = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						float r0 = luminance(texture(${yt.result}, uv0).rgb) * roughnessScale;
						float r1 = luminance(texture(${yt.result}, uv1).rgb) * roughnessScale;
						float r2 = luminance(texture(${yt.result}, uv2).rgb) * roughnessScale;

						roughnessChange = (r0 * weights.z + r1 * weights.x + r2 * weights.y);
					}
					float roughnessFactor = roughnessChange * ${d.result};
					`:wt=`
					vec2 roughnessMapCachedUv = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs;

					vec4 vals = texture(${yt.result},  roughnessMapCachedUv);
					float roughnessFactor = luminance(vals.rgb) * ${d.result};
					`,ut.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${Pt.result};

					const float roughnessScale = 1.0;

					${wt}
				`)}else ut.push(d.code,"	float roughnessFactor = "+d.result+";");rt&&ut.push(rt.code,"#ifdef ALPHATEST","	if ( "+rt.result+" <= ALPHATEST ) discard;","#endif"),ut.push("vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );"),ut.push("material.diffuseColor = diffuseColor * ( 1.0 - metalnessFactor );","material.roughness = max( roughnessFactor, 0.0525 );","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.roughness = clamp( roughnessFactor, 0.04, 1.0 );"),st?ut.push(st.code,"material.specularColor = mix( vec3( 0.16 * pow2( "+st.result+" ) ), diffuseColor, metalnessFactor );"):ut.push("material.specularColor = mix( vec3( 0.04 ), diffuseColor, metalnessFactor );"),ut.push("#include <lights_fragment_begin>"),ut.push("#include <lights_fragment_end>"),ut.push("vec3 ao = aoEnabled && "+o.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse)) + reflectedLight.directSpecular + reflectedLight.indirectSpecular;");let gt="1.0";this.mask&&(this.mask.analyze(e),gt=`luminance(${this.mask.flow(e,"v3").result})`),ut.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${b.result} * ${gt} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${b.result} * ${gt}, ${j.result} );
					
					outgoingLight *= ao;
				}
				`),$&&ut.push($.code,`outgoingLight = spe_blend(outgoingLight, ${$.result}, 1.0, SPE_BLENDING_NORMAL);`),rt?ut.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${rt.result} );`):ut.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),_e&&ut.push(`gl_FragColor.a *= ${_e.result};`),ut.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),a=ut.join(`
`)}return a}},Nm=class extends Xi{constructor(){super("toon"),this.nodeType="Toon",this.color=new rr(si),this.specular=new rr(1118481),this.shininess=new ke(30),this.previousModelViewMatrix=new sn,this.previouseProjectionMatrix=new sn,this.shadingAlpha=new ke(1),this.shadingBlend=new Dt(0)}get category(){return"toon"}build(e){let a;if(e.define("TOON"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let i=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:Ze.frameIndex}),e.mergeUniform({resolution:Ze.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(Xs.merge([De$1.fog,De$1.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let o=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];i&&o.push(i.code,i.result?"displaced_position = "+i.result+";":""),o.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),o.push("	#include <project_vertex>","	#include <fog_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),o.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),a=o.join(`
`)}else{e.mergeUniform({penumbraSize:Ze.penumbraSize}),e.mergeUniform({frameIndex:Ze.frameIndex}),e.mergeUniform({aoMap:Ze.aoRenderTarget}),e.mergeUniform({aoEnabled:Ze.aoEnabled}),this.color===void 0&&(this.color=new rr(si)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let i=this.color.flow(e,"c",{slot:"color"}),o=this.specular.flow(e,"c"),c=this.shininess.flow(e,"f"),d=this.shadingAlpha.flow(e,"f"),g=this.shadingBlend.flow(e,"i"),b=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,j=this.alpha?this.alpha.flow(e,"f"):void 0,$=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=j!==void 0,e.addParsCode(["uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","varying vec3 vWPosition;","#include <normal_pars_fragment>","#include <gradientmap_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <dithering_pars_fragment>",`
					varying vec3 vViewPosition;
					struct ToonMaterial {
						vec3	diffuseColor;
						vec3	specularColor;
						float	specularShininess;
						float	specularStrength;
					};
					void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
			
						reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
						reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
					}
					void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
					}
					#define RE_Direct				RE_Direct_Toon
					#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
					#define Material_LightProbeLOD( material )	(0)
					`,"#include <shadowmap_pars_fragment>","#include <bumpmap_pars_fragment>","#include <normalmap_pars_fragment>"].join(`
`));let rt=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	ToonMaterial material;"];if(this.bumpMap){e.include(Ua.dHdxy),e.include(Ua.perturbNormalArb);let st=this.bumpMap.texture.flow(e,"t"),ut=this.bumpMap.flow(e,"v3"),gt=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",yt="";this.bumpMap.projection.value===4?yt=`
					vec3 bumpNormal = vec3(0.0);
					{
						vec2 uv0 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						vec2 grad0 = dHdxy(${st.result}, uv0, ${gt});
						vec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);

						vec2 grad1 = dHdxy(${st.result}, uv1, ${gt});
						vec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);

						vec2 grad2 = dHdxy(${st.result}, uv2, ${gt});
						vec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);
						
						bumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;
						bumpNormal = normalize(bumpNormal);
					}

					normal = bumpNormal;
					`:yt=`
					vec2 bumpMapCachedUv = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs;
					vec2 grad = dHdxy(${st.result}, bumpMapCachedUv, ${gt});
					normal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );
					`,rt.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${ut.result};
					${yt}
					`)}rt.push(i.code,"	vec3 diffuseColor = "+i.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",o.code,"	vec3 specular = "+o.result+";",c.code,"	float shininess = max( 0.0001, "+c.result+" );","	float specularStrength = 1.0;"),j&&rt.push(j.code,"#ifdef ALPHATEST","if ( "+j.result+" <= ALPHATEST ) discard;","#endif"),rt.push("material.diffuseColor = diffuseColor;"),rt.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),rt.push("vec3 ao = aoEnabled ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse) * ao) + reflectedLight.directSpecular;");let _e="1.0";this.mask&&(this.mask.analyze(e),_e=`luminance(${this.mask.flow(e,"v3").result})`),rt.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${d.result} * ${_e} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${d.result} * ${_e}, ${g.result} );
				}
				`),b&&rt.push(b.code,`outgoingLight = spe_blend(outgoingLight, ${b.result}, 1.0, SPE_BLENDING_NORMAL);`),j?rt.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${j.result} );`):rt.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),$&&rt.push(`gl_FragColor.a *= ${$.result};`),rt.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),a=rt.join(`
`)}return a}},rx=class{constructor(e=1e3*10){this.timeout=e,this.cache=new Map,this.head={data:null,time:0,src:null,next:null,prev:null},this.tail={data:null,time:1/0,src:null,next:null,prev:null},this.hasClean=!1,this.head.next=this.tail,this.tail.prev=this.head}log(...e){}remove(e){let a=this.cache.get(e);a&&(this.dispose(e,a.data),this.cache.delete(e),a.prev.next=a.next,a.next.prev=a.prev)}scheduleCleanup(){this.hasClean||(this.log("scheduled cleanup"),this.hasClean=!0,setTimeout(()=>{this.hasClean=!1,this.log("cleaning");let e=Date.now(),a=this.head.next;for(;a.time<e-this.timeout;)this.dispose(a.src,a.data),this.cache.delete(a.src),a=a.next,a.prev=this.head,this.head.next=a;this.head.next!==this.tail?this.scheduleCleanup():this.log("no more cleanup")},this.timeout+1e3))}has(e){var a;return(a=this.cache.get(e))==null?void 0:a.data}load(e){let a=Date.now(),i=this.cache.get(e);return i===void 0?(i={data:this.create(e),src:e,time:a,next:null,prev:null},this.cache.set(e,i)):(i.time=a,i.prev.next=i.next,i.next.prev=i.prev),i.prev=this.tail.prev,i.next=this.tail,this.tail.prev.next=i,this.tail.prev=i,this.scheduleCleanup(),i.data}},i_=class extends rx{create(e){return URL.createObjectURL(new Blob([e]))}dispose(e,a){URL.revokeObjectURL(a)}},r_;function tR(e){return typeof e=="string"?e:(r_||(r_=new i_),r_.load(e))}var ix=class{constructor(e,a){this.data=e,this.cache=a,this.refCount=0}deref(){this.refCount,this.refCount-=1,this.refCount===0&&(this.cache.remove(this),this.dispose())}dispose(){this.refCount}},nx=class{constructor(){this.cache=new Map}remove(e){this.cache.delete(e.data)}load(e){let a=this.cache.get(e);return a===void 0&&(a=this.create(e),this.cache.set(e,a)),a.refCount+=1,a}},ff=class extends ix{constructor(e,a){super(e,a.imageHolderCache),this.data=e,this.shared=a,this.loaded=!1,this.isVideo=!1,this.isCanvas=!1,this._cache={1e3:{},1001:{},1002:{}},this.isVideo=e.type==="video",this.isCanvas=e.nodeName==="CANVAS",this.updateSrc(this.isCanvas?e:e.data)}async updateSrc(e){if(typeof document>"u")return;this.disposeTextures(),this.loaded=!1;let a=()=>{this.loaded=!0;for(let o of Object.values(this._cache))for(let c of Object.values(o))c&&(c.image=this.img,c.needsUpdate=!0);this.shared.requestRender()};if(this.isCanvas)this.img=e,this.loaded=!0;else if(this.isVideo){if(this.img=document.createElement("video"),this.img.preload="auto",this.img.playsInline=!0,this.img.currentTime=.01,typeof e!="string"){var i=new FileReader;i.readAsDataURL(new Blob([e],{type:"video/mp4"}));let o;await new Promise(c=>{i.onloadend=d=>{var g;o=(g=d.target)==null?void 0:g.result,c(null)}}),this.img.src=o}else this.img.src=e;this.img.onloadeddata=()=>{a()}}else this.img=new Image,this.img.src=tR(e),this.img.onload=a}getTexture(e,a=1008){let i=this._cache[e][a];if(i)return i;{let o;return this.isCanvas&&(o=new My(this.img,void 0,e,e,void 0,a)),this.isVideo?o=new Ty(this.img,void 0,e,e):o=new tr(this.img,void 0,e,e,void 0,a),this.loaded&&(o.needsUpdate=!0),this._cache[e][a]=o,o}}setNeedsUpdate(e){for(let a of Object.values(this._cache))for(let i of Object.values(a))i&&(i.needsUpdate=e)}disposeTextures(){for(let[e,a]of Object.entries(this._cache))for(let[i,o]of Object.entries(a))o==null||o.dispose(),this._cache[e][i]=void 0}dispose(){super.dispose(),this.disposeTextures()}},cs=class extends ff{};function s_(e,a){var i=gY(a);return i.formatToParts?pY(i,e):mY(i,e)}var fY={year:0,month:1,day:2,hour:3,minute:4,second:5};function pY(e,a){try{for(var i=e.formatToParts(a),o=[],c=0;c<i.length;c++){var d=fY[i[c].type];d>=0&&(o[d]=parseInt(i[c].value,10))}return o}catch(g){if(g instanceof RangeError)return[NaN];throw g}}function mY(e,a){var i=e.format(a).replace(/\u200E/g,""),o=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(i);return[o[3],o[1],o[2],o[4],o[5],o[6]]}var n_={};function gY(e){if(!n_[e]){var a=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:"America/New_York",year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),i=a==="06/25/2014, 00:00:00"||a==="‎06‎/‎25‎/‎2014‎ ‎00‎:‎00‎:‎00";n_[e]=i?new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return n_[e]}function sx(e,a,i,o,c,d,g){var b=new Date(0);return b.setUTCFullYear(e,a,i),b.setUTCHours(o,c,d,g),b}var rR=36e5,yY=6e4,o_={timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-]\d{2}):?(\d{2})$/};function Fm(e,a,i){var o,c;if(!e||(o=o_.timezoneZ.exec(e),o))return 0;var d;if(o=o_.timezoneHH.exec(e),o)return d=parseInt(o[1],10),iR(d)?-(d*rR):NaN;if(o=o_.timezoneHHMM.exec(e),o){d=parseInt(o[1],10);var g=parseInt(o[2],10);return iR(d,g)?(c=Math.abs(d)*rR+g*yY,d>0?-c:c):NaN}if(bY(e)){a=new Date(a||Date.now());var b=i?a:vY(a),j=a_(b,e),$=i?j:xY(a,j,e);return-$}return NaN}function vY(e){return sx(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function a_(e,a){var i=s_(e,a),o=sx(i[0],i[1]-1,i[2],i[3]%24,i[4],i[5],0).getTime(),c=e.getTime(),d=c%1e3;return c-=d>=0?d:1e3+d,o-c}function xY(e,a,i){var o=e.getTime(),c=o-a,d=a_(new Date(c),i);if(a===d)return a;c-=d-a;var g=a_(new Date(c),i);return d===g?d:Math.max(d,g)}function iR(e,a){return-23<=e&&e<=23&&(a==null||0<=a&&a<=59)}var nR={};function bY(e){if(nR[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),nR[e]=!0,!0}catch{return!1}}var pR=pi(oR(),1),u_=pi(lR(),1),AY=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,cR=AY,l_=36e5,uR=6e4,_Y=2,Dn={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,plainTime:/:/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:cR};function h_(e,a){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(e===null)return new Date(NaN);var i=a||{},o=i.additionalDigits==null?_Y:(0,pR.default)(i.additionalDigits);if(o!==2&&o!==1&&o!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]")return new Date(e.getTime());if(typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]")return new Date(e);if(!(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"))return new Date(NaN);var c=EY(e),d=TY(c.date,o),g=d.year,b=d.restDateString,j=MY(b,g);if(isNaN(j))return new Date(NaN);if(j){var $=j.getTime(),rt=0,_e;if(c.time&&(rt=CY(c.time),isNaN(rt)))return new Date(NaN);if(c.timeZone||i.timeZone){if(_e=Fm(c.timeZone||i.timeZone,new Date($+rt)),isNaN(_e))return new Date(NaN)}else _e=(0,u_.default)(new Date($+rt)),_e=(0,u_.default)(new Date($+rt+_e));return new Date($+rt+_e)}else return new Date(NaN)}function EY(e){var a={},i=Dn.dateTimePattern.exec(e),o;if(i?(a.date=i[1],o=i[3]):(i=Dn.datePattern.exec(e),i?(a.date=i[1],o=i[2]):(a.date=null,o=e)),o){var c=Dn.timeZone.exec(o);c?(a.time=o.replace(c[1],""),a.timeZone=c[1].trim()):a.time=o}return a}function TY(e,a){var i=Dn.YYY[a],o=Dn.YYYYY[a],c;if(c=Dn.YYYY.exec(e)||o.exec(e),c){var d=c[1];return{year:parseInt(d,10),restDateString:e.slice(d.length)}}if(c=Dn.YY.exec(e)||i.exec(e),c){var g=c[1];return{year:parseInt(g,10)*100,restDateString:e.slice(g.length)}}return{year:null}}function MY(e,a){if(a===null)return null;var i,o,c,d;if(e.length===0)return o=new Date(0),o.setUTCFullYear(a),o;if(i=Dn.MM.exec(e),i)return o=new Date(0),c=parseInt(i[1],10)-1,dR(a,c)?(o.setUTCFullYear(a,c),o):new Date(NaN);if(i=Dn.DDD.exec(e),i){o=new Date(0);var g=parseInt(i[1],10);return OY(a,g)?(o.setUTCFullYear(a,0,g),o):new Date(NaN)}if(i=Dn.MMDD.exec(e),i){o=new Date(0),c=parseInt(i[1],10)-1;var b=parseInt(i[2],10);return dR(a,c,b)?(o.setUTCFullYear(a,c,b),o):new Date(NaN)}if(i=Dn.Www.exec(e),i)return d=parseInt(i[1],10)-1,fR(a,d)?hR(a,d):new Date(NaN);if(i=Dn.WwwD.exec(e),i){d=parseInt(i[1],10)-1;var j=parseInt(i[2],10)-1;return fR(a,d,j)?hR(a,d,j):new Date(NaN)}return null}function CY(e){var a,i,o;if(a=Dn.HH.exec(e),a)return i=parseFloat(a[1].replace(",",".")),c_(i)?i%24*l_:NaN;if(a=Dn.HHMM.exec(e),a)return i=parseInt(a[1],10),o=parseFloat(a[2].replace(",",".")),c_(i,o)?i%24*l_+o*uR:NaN;if(a=Dn.HHMMSS.exec(e),a){i=parseInt(a[1],10),o=parseInt(a[2],10);var c=parseFloat(a[3].replace(",","."));return c_(i,o,c)?i%24*l_+o*uR+c*1e3:NaN}return null}function hR(e,a,i){a=a||0,i=i||0;var o=new Date(0);o.setUTCFullYear(e,0,4);var c=o.getUTCDay()||7,d=a*7+i+1-c;return o.setUTCDate(o.getUTCDate()+d),o}var PY=[31,28,31,30,31,30,31,31,30,31,30,31],DY=[31,29,31,30,31,30,31,31,30,31,30,31];function mR(e){return e%400===0||e%4===0&&e%100!==0}function dR(e,a,i){if(a<0||a>11)return!1;if(i!=null){if(i<1)return!1;var o=mR(e);if(o&&i>DY[a]||!o&&i>PY[a])return!1}return!0}function OY(e,a){if(a<1)return!1;var i=mR(e);return!(i&&a>366||!i&&a>365)}function fR(e,a,i){return!(a<0||a>52||i!=null&&(i<0||i>6))}function c_(e,a,i){return!(e!=null&&(e<0||e>=25)||a!=null&&(a<0||a>=60)||i!=null&&(i<0||i>=60))}function lx(e,a,i){var o=h_(e,i),c=Fm(a,o,!0),d=new Date(o.getTime()-c),g=new Date(0);return g.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),g.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),g}function on(e,a){return a.color(e)}function d_(e=new Date,a){let i=a.format,o=e.getSeconds(),c=e;a&&a.timeZone!==null&&(c=lx(new Date,a.timeZone));let d=c.getHours(),g=c.getMinutes(),b;a.format12h24h==="12ampm"&&(b=d>=12?"PM":"AM");let j=d;a.format12h24h!=="24"&&(j=d%12,j===0&&(j=12));let $,rt;switch(i){case"HH:mm:ss":$=[j,g,o];break;case"HH:mm":$=[j,g];break;case"HH":$=[j],b=void 0;break;case"mm":$=[g],b=void 0;break;case"ss":$=[o],b=void 0;break;case"year":rt=c.getFullYear();break;case"month":rt=c.getMonth()+1;break;case"dayOfYear":rt=Math.floor((c.getTime()-new Date(c.getFullYear(),0,0).getTime())/864e5);break;case"dayOfMonth":rt=c.getDate();break;case"secondOfDay":rt=d*60*60+g*60+o;break;default:console.error("Unknown time format",i),rt=0;break}return $!==void 0?{textValue:$,suffix:b}:rt}function gR(e,a){switch(e.type){case"fresnel":return LY(e,a);case"gradient":return BY(e,a);case"depth":return NY(e,a);case"normal":return FY(e,a);case"noise":return kY(e,a);case"rainbow":return VY(e,a);case"toon":return zY(e,a);case"outline":return UY(e,a);case"transmission":return GY(e,a);case"color":return RY(e,a);case"pattern":return jY(e,a)}}function IY(e){return{type:e.type}}function oo(e,a){let{alpha:i,mode:o,isMask:c}=e,d=typeof i=="string"?(Number(a.getVariable(i))??100)/100:i;return{...IY(e),alpha:d,mode:o,isMask:c}}function RY(e,a){return{...oo(e,a),color:on(e.color,a)}}function LY(e,a){let{bias:i,scale:o,intensity:c,factor:d,color:g}=e;return{...oo(e,a),color:on(g,a),bias:i,scale:o,intensity:c,factor:d}}function BY(e,a){let{gradientType:i,smooth:o,colors:c,steps:d,angle:g,offset:b,morph:j}=e;return{...oo(e,a),gradientType:i,smooth:o,colors:c.map($=>new Ke($[0],$[1],$[2],$[3])),num:c.length,steps:d,offset:new z$2(...b),morph:new z$2(...j),angle:g}}function NY(e,a){let{gradientType:i,near:o,far:c,isVector:d,isWorldSpace:g,origin:b,direction:j,colors:$,steps:rt,smooth:_e}=e;return{...oo(e,a),gradientType:i,near:o,far:c,isVector:d,isWorldSpace:g,origin:new _(...b),direction:j?new _(...j):new _(1,0,0),colors:$.map(st=>st!==void 0?new Ke(st[0],st[1],st[2],st[3]):new Ke(0,0,0,0)),steps:rt.slice(0,$.length),smooth:_e}}function FY(e,a){let{cnormal:i}=e;return{...oo(e,a),cnormal:new _(i[0],i[1],i[2])}}function kY(e,a){return{...oo(e,a),scale:e.scale,move:e.move,fA:new z$2(...e.fA),fB:new z$2(...e.fB),size:new _(...e.size),distortion:new z$2(...e.distortion),colorA:on(e.colorA,a),colorB:on(e.colorB,a),colorC:on(e.colorC,a),colorD:on(e.colorD,a),noiseType:e.noiseType,voronoiStyle:e.voronoiStyle,highCut:e.highCut,lowCut:e.lowCut,smoothness:e.smoothness,seed:e.seed,quality:e.quality}}function VY(e,a){return{...oo(e,a),filmThickness:e.filmThickness,movement:e.movement,wavelengths:new _(...e.wavelengths),noiseStrength:e.noiseStrength,noiseScale:e.noiseScale,offset:new _(...e.offset)}}function zY(e,a){return{...oo(e,a),positioning:e.positioning,colors:e.colors.map(i=>new Ke(i[0],i[1],i[2],i[3])),num:e.colors.length,steps:e.steps,source:new _(...e.source),isWorldSpace:e.isWorldSpace,noiseStrength:e.noiseStrength,noiseScale:e.noiseScale,shadowColor:on(e.shadowColor,a),offset:new _(...e.offset)}}function UY(e,a){return{...oo(e,a),outlineColor:on(e.outlineColor,a),contourColor:on(e.contourColor,a),outlineWidth:e.outlineWidth,contourWidth:e.contourWidth,outlineThreshold:e.outlineThreshold,contourThreshold:e.contourThreshold,outlineSmoothing:e.outlineSmoothing,contourFrequency:e.contourFrequency,contourDirection:new _(...e.contourDirection),positionalLines:e.positionalLines,compensation:e.compensation}}function GY(e,a){return{...oo(e,a),thickness:e.thickness,ior:e.ior,roughness:e.roughness}}function jY(e,a){return{...oo(e,a),style:e.style,projection:e.projection,axis:e.axis,blending:e.blending,offset:new z$2(...e.offset),colorA:on(e.colorA,a),colorB:on(e.colorB,a),frequency:new z$2(...e.frequency),size:e.size,variation:e.variation,smoothness:e.smoothness,zigzag:e.zigzag,rotation:e.rotation,vertical:new z$2(...e.vertical),horizontal:new z$2(...e.horizontal),sides:e.sides}}var Xl=class extends xr$1{},f_={noise:["noiseType"],texture:["projection","axis","side"],video:["projection","axis","side"],displace:["noiseType"],light:["roughnessMap","bumpMap"],depth:["smooth","isWorldSpace","gradientType","isVector"],pattern:["style","projection","axis"]},p_={depth:["colors"]};function HY(e,a,i){var d,g;if(a==="isMask")return!0;let o=f_[e.type],c=p_[e.type];if(c!==void 0){let b=e.color;if(c.includes(a)){let j=(g=(d=b[a])==null?void 0:d.value)==null?void 0:g.length;if(j!==void 0&&j!==i.length)return!0}}return o!==void 0?o.includes(a):!1}function m_(e,a,i){let o=i.uniforms[`f${i.id}_texture`];if(!o)return!1;let c=!1,d=e;if("image"in d){let g=d.image,b=a.image(g),j=o;j.image instanceof cs||j.image.deref(),j.image=b}if("video"in d){let g=d.video,b=a.video(g),j=o;j.image instanceof cs||j.image.deref(),j.image=b}if("wrapping"in d){let g=o;g.wrap=d.wrapping}if("minFilter"in d){let g=o;g.minFilter=d.minFilter}if("repeat"in d||"offset"in d){let g="mat",b=i.uniforms[`f${i.id}_${g}`];"repeat"in d&&(b.repeat=d.repeat),"offset"in d&&(b.offset=d.offset),b.updateMatrix()}return c}function yR(e,a,i,o){let c=!1;for(let[d,g]of Object.entries(e)){if(d==="bumpMap"||d==="roughnessMap"){c=!0;continue}if(!d||g===void 0)continue;if(g_(d,i,o,a)){d==="visible"&&i.type==="light"&&(c=!0);continue}i.visible=o.visible;let b=i.uniforms[`f${i.id}_${d}`];if(b&&!(b instanceof ql))switch(c=c||HY(i,d,g),b.constructor){case rr:if(typeof g=="string"){let j=a.getColor(g);j&&(b.value=j);break}else{let j=g;b.value instanceof Xl?b.value=new xr$1(j.r,j.g,j.b,j.a):b.setRGBA(j);break}case jn:if(typeof g=="string"){let j=a.getColor(g);j&&(b.value=j);break}else{let j=g;b.value instanceof Xl?b.value=new xr$1(j.r,j.g,j.b,j.a):b.value.setRGBA(j.r,j.g,j.b,j.a);break}case qr:{let j=g;b.value.setX(j[0]),b.value.setY(j[1]);break}case nn:{let j=g;b.value.setX(j[0]),b.value.setY(j[1]),b.value.setZ(j[2]);break}case Pn:{m_(g,a,i);break}case so:{b.value=g.map(j=>new Ke(...j));break}default:{b.value=g;break}}}return c}var Ql=(e,a,i)=>Math.max(0,Math.min(1,Number(a.getVariable(typeof e=="number"?e*100:e,i)??100)/100))??1,qo=class{constructor(e,a,i,o,c){this.id=e,this.uuid=a,this.data=i,this.uniforms={};for(let d in o)this.uniforms[`f${this.id}_${d}`]=o[d];for(let d in i)g_(d,this,i,c)}get type(){return this.data.type}static create(e,a,i,o){if(i.type==="light")return On.createLigherLayer(e,a,i,o);if(i.type==="texture"||i.type==="video"){let c=i.type==="texture"?o.canvas(i.texture.image)??o.image(i.texture.image):o.video(i.texture.video),d=new Qc(c,i.texture.wrapping,i.texture.minFilter??1008),g=new $0(c),b=new ex(i.texture.repeat,i.texture.offset),j=new ke(i.crop?1:0),$=new Dt(i.projection??0),rt=new Dt(["x","y","z"].indexOf(i.axis)??0),_e=new Dt(i.side??0),st=new qr(i.size?new z$2(i.size[0],i.size[1]):new z$2(100,100)),ut=new ke(i.blending??0),gt=new ke(Ql(i.alpha,o)),yt=new Dt(i.mode??0),Pt=new Jr(i.isMask??!1),wt=new Yl(d,g,j,$,rt,_e,st,ut,b,gt,yt,Pt),Ct=new Qt(wt.calpha,"f");return new Lr$1(e,a,i,{texture:d,textureSize:g,crop:j,projection:$,axis:rt,side:_e,size:st,blending:ut,mat:b,alpha:gt,mode:yt,isMask:Pt},wt,yt,Ct,Pt,o)}else if(i.type==="matcap"){let c=o.image(i.texture.image),d=new Qc(c,i.texture.wrapping,i.texture.minFilter??1008),g=new ke(Ql(i.alpha,o)),b=new Dt(i.mode??0),j=new Jr(i.isMask??!1),$=new sf(d,g,b,j),rt=new Qt($.calpha,"f");return new Lr$1(e,a,i,{texture:d,alpha:g,mode:b,isMask:j},$,b,rt,j,o)}else if(i.type==="displace")if(i.displacementType==="noise"){let c=new nn(new _(...i.offset)),d=new ke(i.scale??10),g=new ke(i.intensity??8),b=new ke(i.movement??1),j=new Dt(i.noiseType??0),$=new Dt(i.voronoiStyle??0),rt=new ke(i.smoothness??.5),_e=new ke(i.seed??0),st=new ke(i.highCut??1),ut=new ke(i.lowCut??0),gt=new Dt(i.quality??1),yt=new df(g,b,c,$,rt,_e,st,ut,gt,d,j);return new km(e,a,i,{offset:c,scale:d,intensity:g,movement:b,noiseType:j,voronoiStyle:$,smoothness:rt,seed:_e,highCut:st,lowCut:ut,quality:gt},yt,o)}else throw new Error;else return YY(e,a,i,o)}updateByOp(e,a,i){let o=e;if(o.path[0]===void 0){if(o.type===0)return"type"in o.props||"category"in o.props||"visible"in o.props?(i.scene.markNeedsUpdateRendererDirty(),!0):yR(o.props,i.shared,this,a)}else if(o.path[0]==="texture")return"texture"in a||"video"in a?m_(o.props,i.shared,this):!0;return!1}dispose(){if(WY(this)){let e=this.uniforms[`f${this.id}_texture`];if(!e)return!1;let a=e;a.image instanceof cs||a.image.deref()}}hasValueByKey(e){return this.uniforms[e]!==void 0}hasValue(e){return this.hasValueByKey(`f${this.id}_${e}`)}setValue(e,a){let i=`f${this.id}_${e}`;this.hasValueByKey(i)&&a!==void 0&&(this.uniforms[i].value=a)}getNode(e){let a=`f${this.id}_${e}`;if(this.hasValueByKey(a))return this.uniforms[a]}getValue(e){let a=`f${this.id}_${e}`;if(this.hasValueByKey(a))return this.uniforms[a].value}getName(e){let a=/f\d+_(.*)/.exec(e);if(a&&a.length>1)return a[1];console.log(`Layer.getName: error ${e}`)}getNames(){let e=[];for(let a in this.uniforms){let i=this.getName(a);i&&e.push(i)}return e}},Lr$1=class extends qo{constructor(a,i,o,c,d,g,b,j,$){super(a,i,o,c,$),this.params=c,this.color=d,this.mode=g,this.alpha=b,this.isMask=j}},km=class extends qo{constructor(e,a,i,o,c,d){super(e,a,i,o,d),this.position=c}},On=class extends qo{constructor(e,a,i,o,c,d){super(e,a,i,c,d),this.node=o}static createLigherLayer(e,a,i,o){let c,d=new ke(Ql(i.alpha,o)),g=new Dt(i.mode),b=new ke(i.bumpMapIntensity),j=new ke(Ql(i.alphaOverride,o)),$;if(!i.visible)c=new za,$={};else if(i.category==="lambert"){c=new Rm;let rt=new rr(o.color(i.emissive)??0),_e=new Jr(i.occlusion??!0);$={emissive:rt,occlusion:_e},c.emissive=rt,c.occlusion=_e}else if(i.category==="toon"){c=new Nm;let rt=new ke(i.shininess??30),_e=new rr(o.color(i.specular)??1118481);$={shininess:rt,specular:_e},c.shininess=rt,c.specular=_e}else if(i.category==="physical"){c=new Bm;let rt=new ke(i.roughness??.3),_e=new ke(i.metalness??0),st=new ke(i.reflectivity??.5),ut=new Jr(i.occlusion??!0);$={roughness:rt,metalness:_e,reflectivity:st,occlusion:ut},c.roughness=rt,c.metalness=_e,c.reflectivity=st,c.occlusion=ut}else{c=new Lm;let rt=new ke(i.shininess??30),_e=new rr(i.specular!==void 0?o.color(i.specular)??1118481:1118481),st=new Jr(i.occlusion??!0);$={shininess:rt,specular:_e,occlusion:st},c.shininess=rt,c.specular=_e,c.occlusion=st}return c.alpha=new ke(1),c.shadingAlpha=d,c.shadingBlend=g,c.bumpMapIntensity=b,c.alphaOverride=j,$.alpha=c.shadingAlpha,$.mode=c.shadingBlend,$.bumpMapIntensity=c.bumpMapIntensity,$.alphaOverride=c.alphaOverride,new On(e,a,i,c,$,o)}get category(){return this.node.category}};function WY(e){let a=e instanceof qo?e.type:e;return a==="texture"||a==="video"||a==="displace_map"||a==="matcap"}function Cs(e){return{alpha:new ke(e.alpha??1),mode:new Dt(e.mode??0),isMask:new Jr(e.isMask??!1)}}function qY(e,a,i,o,c){switch(e.type){case"color":{let d=new rr(o.color??si),g=Cs(o),b=new Kc(d,g.alpha),j=new Qt(b.calpha,"f");return new Lr$1(a,i,e,{color:d,...g},b,g.mode,j,g.isMask,c)}case"fresnel":{let d=new rr(o.color??16777215),g=new ke(o.bias??.1),b=new ke(o.scale??1),j=new ke(o.intensity??2),$=new ke(o.factor??1),rt=Cs(o),_e=new Om(d,g,b,j,$,rt.alpha,rt.mode,rt.isMask),st=new Qt(_e.calpha,"f");return new Lr$1(a,i,e,{color:d,bias:g,scale:b,intensity:j,factor:$,...rt},_e,rt.mode,st,rt.isMask,c)}case"rainbow":{let d=new ke(o.filmThickness??30),g=new ke(o.movement??0),b=new nn(o.wavelengths??new _(0,0,0)),j=new ke(o.noiseStrength??0),$=new ke(o.noiseScale??1),rt=new nn(o.offset??new _(0,0,0)),_e=Cs(o),st=new cf(d,g,b,j,$,rt,_e.alpha,_e.isMask),ut=new Qt(st.calpha,"f");return new Lr$1(a,i,e,{filmThickness:d,movement:g,wavelengths:b,noiseStrength:j,noiseScale:$,offset:rt,..._e},st,_e.mode,ut,_e.isMask,c)}case"transmission":{let d=new ke(o.thickness??10),g=new ke(o.ior??1.5),b=new ke(o.roughness??.5),j=Ze.transmissionSize,$=Ze.transmissionRenderTarget,rt=Ze.transmissionRenderTargetDepth,_e=window.innerWidth,st=window.innerHeight,ut=_e>=st?new qr(st/_e,1):new qr(1,_e/st),gt=Cs(o),yt=new hf(d,g,b,j,$,rt,ut,gt.alpha),Pt=new Qt(yt.calpha,"f");return new Lr$1(a,i,e,{thickness:d,ior:g,roughness:b,aspectRatio:ut,...gt},yt,gt.mode,Pt,gt.isMask,c)}case"toon":{let d=new Dt(o.positioning??0),g;o.colors?g=new so(o.colors.length,o.colors):(g=new so(10,new Ke(0,0,0,1)),g.value[1]=new Ke(1,1,1,1));let b;o.steps?b=new no(o.steps.length,o.steps):(b=new no(10,1),b.value[0]=0);let j=new nn(o.source??new _(0,0,0)),$=new Jr(o.isWorldSpace??!0),rt=new ke(o.noiseStrength??0),_e=new ke(o.noiseScale??1),st=new jn(o.shadowColor),ut=new nn(o.offset??new _(0,0,0)),gt=Cs(o),yt=new uf(d,g,b,j,$,rt,_e,st,ut,gt.alpha),Pt=new Qt(yt.calpha,"f");return new Lr$1(a,i,e,{positioning:d,colors:g,steps:b,source:j,isWorldSpace:$,noiseStrength:rt,noiseScale:_e,shadowColor:st,offset:ut,...gt},yt,gt.mode,Pt,gt.isMask,c)}case"outline":{let d=new rr(o.outlineColor??16777215),g=new rr(o.contourColor??16777215),b=new ke(o.outlineWidth??.1),j=new ke(o.contourWidth??.1),$=new ke(o.outlineThreshold??.1),rt=new ke(o.contourThreshold??.1),_e=new ke(o.outlineSmoothing??.1),st=new ke(o.contourFrequency??.1),ut=new nn(o.contourDirection??new _(0,1,0)),gt=new Jr(o.positionalLines??!1),yt=new Jr(o.compensation??!0),Pt=Ze.normalRenderTarget,wt=Ze.normalRenderTargetDepth,Ct=Ze.pixelRatioNode,At=Ze.resolution,Tt=Cs(o),kt=new af(d,g,b,j,$,rt,_e,st,ut,gt,yt,At,Pt,wt,Ct,Tt.alpha),It=new Qt(kt.calpha,"f");return new Lr$1(a,i,e,{outlineColor:d,contourColor:g,outlineWidth:b,contourWidth:j,outlineThreshold:$,contourThreshold:rt,outlineSmoothing:_e,contourFrequency:st,contourDirection:ut,positionalLines:gt,compensation:yt,...Tt},kt,Tt.mode,It,Tt.isMask,c)}case"depth":{let d=new Dt(o.gradientType??0),g=new Jr(o.smooth??!1),b=new ke(o.near??50),j=new ke(o.far??200),$=new ke(o.isVector??1),rt=new ke(o.isWorldSpace??0),_e=new nn(o.origin??new _),st=new nn(o.direction??new _),ut;o.colors?ut=new so(o.colors.length,o.colors):(ut=new so(2,new Ke(0,0,0,1)),ut.value[1]=new Ke(1,1,1,1));let gt;o.steps?gt=new no(o.steps.length,o.steps):(gt=new no(2,1),gt.value[0]=0);let yt=Cs(o),Pt=new rf(d,g,b,j,$,rt,_e,st,ut,gt,yt.alpha,yt.isMask),wt=new Qt(Pt.calpha,"f");return new Lr$1(a,i,e,{gradientType:d,smooth:g,near:b,far:j,isVector:$,isWorldSpace:rt,origin:_e,direction:st,colors:ut,steps:gt,...yt},Pt,yt.mode,wt,yt.isMask,c)}case"noise":{let d=new ke(o.scale??1),g=new nn(o.size??new _(100,100,100)),b=new ke(o.move??1),j=new qr(o.fA??new z$2(1.7,9.2)),$=new qr(o.fB??new z$2(8.3,2.8)),rt=new qr(o.distortion??new z$2(1,1)),_e=new jn(o.colorA),st=new jn(o.colorB),ut=new jn(o.colorC),gt=new jn(o.colorD),yt=new Dt(o.noiseType??0),Pt=new Dt(o.voronoiStyle??0),wt=new ke(o.highCut??1),Ct=new ke(o.lowCut??0),At=new ke(o.smoothness??.5),Tt=new ke(o.seed??.5),kt=new Dt(o.quality??1),It=Cs(o),Lt=new of(d,g,b,j,$,rt,_e,st,ut,gt,It.alpha,yt,It.isMask,Pt,wt,Ct,At,Tt,kt),Ft=new Qt(Lt.calpha,"f");return new Lr$1(a,i,e,{scale:d,size:g,move:b,fA:j,fB:$,distortion:rt,colorA:_e,colorB:st,colorC:ut,colorD:gt,noiseType:yt,...It,voronoiStyle:Pt,highCut:wt,lowCut:Ct,smoothness:At,seed:Tt,quality:kt},Lt,It.mode,Ft,It.isMask,c)}case"normal":{let d=new nn(o.cnormal??new _(1,1,1)),g=Cs(o),b=new $d(d,g.alpha),j=new Qt(b.calpha,"f");return new Lr$1(a,i,e,{cnormal:d,...g},b,g.mode,j,g.isMask,c)}case"gradient":{let d=new Dt(o.gradientType??0),g=new Jr(o.smooth??!1),b;o.colors?b=new so(o.colors.length,o.colors):(b=new so(10,new Ke(0,0,0,1)),b.value[1]=new Ke(1,1,1,1));let j;o.steps?j=new no(o.steps.length,o.steps):(j=new no(10,1),j.value[0]=0);let $=new qr(o.offset??new z$2(0,0)),rt=new qr(o.morph??new z$2(0,0)),_e=new ke(o.angle??0),st=Cs(o),ut=new nf(d,g,b,j,$,rt,_e,st.alpha,st.isMask),gt=new Qt(ut.calpha,"f");return new Lr$1(a,i,e,{gradientType:d,smooth:g,colors:b,steps:j,offset:$,morph:rt,angle:_e,...st},ut,st.mode,gt,st.isMask,c)}case"pattern":{let d=new Dt(o.style??0),g=new Dt(o.projection??0),b=new Dt(["x","y","z"].indexOf(o.axis)??0),j=new ke(o.blending??0),$=new qr(o.offset??new z$2(0,0)),rt=new jn(o.colorA),_e=new jn(o.colorB),st=new qr(o.frequency??new z$2(10,10)),ut=new ke(o.size??.5),gt=new ke(o.variation??0),yt=new ke(o.smoothness??.5),Pt=new ke(o.zigzag??0),wt=new ke(o.rotation??0),Ct=new qr(o.vertical??new z$2(0,1)),At=new qr(o.horizontal??new z$2(0,1)),Tt=new Dt(o.sides??6),kt=Cs(o),It=new lf(d,g,b,j,$,rt,_e,st,ut,gt,yt,Pt,wt,Ct,At,Tt,kt.alpha,kt.isMask),Lt=new Qt(It.calpha,"f");return new Lr$1(a,i,e,{style:d,projection:g,axis:b,blending:j,offset:$,colorA:rt,colorB:_e,frequency:st,size:ut,variation:gt,smoothness:yt,zigzag:Pt,rotation:wt,vertical:Ct,horizontal:At,sides:Tt,...kt},It,kt.mode,Lt,kt.isMask,c)}default:{let d=new rr(1,0,0,1),g=Cs(o),b=new Kc(d,g.alpha),j=new Qt(b.calpha,"f");return new Lr$1(a,i,e,{color:d,...g},b,g.mode,j,g.isMask,c)}}}function YY(e,a,i,o){let c=gR(i,o);return qY(i,e,a,c,o)}function g_(e,a,i,o){if(i.type==="displace"&&(e==="intensity"||e==="visible")){let c=a.uniforms[`f${a.id}_intensity`];return c?(c.value=i.intensity*(i.visible?1:0),c):void 0}if(i.type!=="displace"&&(e==="alpha"||e==="visible")){let c=a.uniforms[`f${a.id}_alpha`];if(!c)return;if(c.value=Ql(i.alpha,o)*(i.visible?1:0),i.type==="outline"&&e==="visible"){let d=a.uniforms[`f${a.id}_compensation`];d&&(d.value=i.compensation&&i.visible)}return c}}function Jc(e,a){let i=0,o=e.layers.find(c=>c.data.type==="light");if(o){let c=o.data,d=Number(a.getVariable(c.alphaOverride));if((typeof c.alphaOverride=="string"?d/100:c.alphaOverride)<1)return!0}for(let c of e.layers){if(c.data.type!=="displace"&&c.data.isMask)return!0;if(c.data.type!=="displace"&&"alpha"in c.data&&c.data.type!=="light"&&c.data.type!=="fresnel"&&c.data.type!=="texture"&&c.data.type!=="matcap"&&c.data.type!=="rainbow"&&c.data.type!=="outline"&&c.data.type!=="pattern"){let d=c.data.visible?c.data.alpha:0;if(typeof d=="string"&&(d=Math.max(0,Math.min(1,Number(a.getVariable(d)??100)/100))),d===1&&c.data.type==="depth"||c.data.type==="gradient"){for(let g of c.data.colors)if(g[3]<1){d=g[3];break}}else if(d===1&&c.data.type==="noise"){let g=a.color(c.data.colorA).a,b=a.color(c.data.colorB).a,j=a.color(c.data.colorC).a,$=a.color(c.data.colorD).a,rt=Math.min(g,Math.min(b,Math.min(j,$)));rt<1&&(d=rt)}i+=(1-i)*d}}return i<1}var Wn=class extends lt{constructor(){super(void 0),this.flatShading=!1,this.needsJitter=!0,this.cacheKey="",this.fog=!0,this.dithering=!0,this.vertexColors=!0,this.transparent=!0}customProgramCacheKey(){return this.cacheKey}},cx=class extends Wn{constructor(e,a,i,o){super(),this.flatShading=e,this.side=a,this.wireframe=i,this.root=o}updateAfterBuild(){let e=this.root;this.lights=e.lights,this.vertexShader=e.vertexShader,this.fragmentShader=e.fragmentShader,this.defines=e.defines,this.uniforms=e.uniforms,this.extensions=e.extensions,this.transparent=e.transparent,this.cacheKey=e.customProgramCacheKey()+"flat"+this.flatShading+this.side}onBeforeCompile(e,a){this.root.onBeforeCompile(e)}get data(){return this.root.data}get category(){return this.root.category}get hasAO(){return this.root.hasAO}getFlavor(e,a,i){return this.root.getFlavor(e,a,i)}get layers(){return this.root.layers}get fragment(){return this.root.fragment}getLayersOfType(e){return this.root.getLayersOfType(e)}getLayerByUuid(e){return this.root.getLayerByUuid(e)}updateByOp(e,a,i){this.root.updateByOp(e,a,i)}nodeMaterialDispose(){this.root.nodeMaterialDispose()}},Ga=class extends Wn{constructor(e,a,i=!0){super(),this.data=e,this.allowVariableSaves=i,this.layerIdGen=0,this.flavors=[],this.masks={},this.type="NodeMaterial",this.updaters=[],this.reset0(e,a)}get nodeMaterial(){return this}getFlavor(e,a,i){let o=i?6:(e?3:0)+a;if(o===0)return this;this.flavors===void 0&&(this.flavors=[]),o-=1;let c=this.flavors[o];return c===void 0&&(c=new cx(e,a,i,this),this.flavors[o]=c,c.flatShading=e,c.side=a,c.updateAfterBuild()),c}get fragment(){return this.lightLayer.node}get category(){return this.lightLayer.category}get hasAO(){var e;return((e=this.lightLayer.getNode("occlusion"))==null?void 0:e.value)??!1}reset(e,a,i=!1){(this.data!==e||i)&&this.reset0(e,a)}reset0(e,a){this.data=e;let i=e.layers??oi.defaultTwoLayerData("phong").layers;try{this.layers=i.map(o=>qo.create(this.layerIdGen++,o.id,o.data,a.shared))}catch{this.layers=[]}this.layers.reverse(),this.name=e.name??"Untitled Material",this.onUpdate(a.shared),this.transparent=Jc(e,a.shared),this.saveVariableLocations(a)}onVariableUpdate(e,a,i){if(e[0]==="alphaOverride")this.transparent=Jc(this.data,i.shared),this.lightLayer.setValue("alphaOverride",Math.max(0,Math.min(Number(a)/100,1)));else if(e[0]==="layer"){let o=e[1],c=e[2];if(o&&c){let d=this.layers.find(g=>g.uuid===o);d!=null&&d.hasValue(c)&&(c==="alpha"?(this.transparent=Jc(this.data,i.shared),d.setValue(c,Math.max(0,Math.min(Number(a)/100,1)))):d.setValue(c,a))}}}saveVariableLocations(e){if(!this.allowVariableSaves)return;let a=this.data.layers.find(i=>i.data.type==="light");a&&e.shared.getVariable(a.data.alphaOverride,["material",this.uuid,"alphaOverride"]),this.data.layers.forEach(i=>{"alpha"in i.data&&typeof i.data.alpha=="string"&&e.shared.getVariable(i.data.alpha,["material",this.uuid,"layer",i.id,"alpha"])})}getLayersOfType(e){return this.layers.filter(a=>a.type===e)}getLayerByUuid(e){return this.layers.find(a=>a.uuid===e)}onUpdate(e){this.cacheKey=this.computeCacheKey(),this.lightLayer=this.layers.find(a=>a instanceof On),this.lightLayer===void 0&&(this.lightLayer=new On(0,"",{...Hr.defaultData("light","phong"),visible:!1},new za,{},e)),this.dispose();for(let a of this.flavors)a&&a.dispose();this.applyTextureMaps(),this.applyMasks(),this.blendColors(),this.blendAfterColors(),this.blendPositions()}applyTextureMaps(){let e=this.layers.find(c=>c instanceof On);if(!e)return;let a=e.data,i=a.bumpMap,o=a.roughnessMap;e.node.bumpMap=void 0,e.node.roughnessMap=void 0;for(let c=0;c<this.layers.length;++c){let d=this.layers[c];d instanceof Lr$1&&d.color instanceof Yl&&(d.uuid===i&&(e.node.bumpMap=d.color),d.uuid===o&&(e.node.roughnessMap=d.color))}}updateByOp(e,a,i){if(a!==void 0?this.data=a:a=this.data,this.transparent=Jc(a,i.shared),e.path[0]==="layers"){this.data=a;let o=i.shared,c=e.path[1];if(c===void 0){if(this.layers.reverse(),e.type===4){let d=qo.create(this.layerIdGen++,e.id,e.data,i.shared);this.layers.splice(e.localIndex,0,d),i.scene.markNeedsUpdateRendererDirty()}else if(e.type===5)this.layers.splice(e.localIndex,1)[0].dispose(),i.scene.markNeedsUpdateRendererDirty();else if(e.type===6){let d=this.layers.findIndex(b=>b.uuid===e.id),g=this.layers[d];this.layers.splice(d,1),this.layers.splice(e.localIndex,0,g),i.scene.markNeedsUpdateRendererDirty()}this.layers.reverse(),this.onUpdate(i.shared)}else{e.type===0&&e.props.occlusion!==void 0&&i.scene.markNeedsUpdateRendererDirty();let d=this.layers.find(g=>g.uuid===c);if(d){let g=a.layers.data(c),b;if(e.type===0&&("alpha"in e.props||"alphaOverride"in e.props)&&("alpha"in e.props?b={...e.props,alpha:Ql(e.props.alpha,o,["material",this.uuid,"layer",c,"alpha"])}:b={...e.props,alphaOverride:Ql(e.props.alphaOverride,o,["material",this.uuid,"alphaOverride"])}),d.updateByOp({...e,...b?{props:b}:{},path:e.path.slice(2)},g,i)){let j=qo.create(this.layerIdGen++,c,g,o);this.layers.splice(this.layers.findIndex($=>$.uuid===c),1,j),this.onUpdate(i.shared)}}}}else this.reset(a,i)}applyMasks(){for(let e=0;e<this.layers.length;++e){let a=this.layers[e];a instanceof Lr$1?a.color.mask=void 0:a instanceof On&&(a.node.mask=void 0)}for(let e=0;e<this.layers.length;++e){let a=this.layers[e];if(a instanceof Lr$1&&a.isMask.value&&a.data.visible&&e>0){let i=e-1,o=this.layers[i];o instanceof On?o.node.mask=new Qi(a.color,a.alpha,Qi.MUL):o instanceof Lr$1&&(o.isMask.value||(o.color.mask=new Qi(a.color,a.alpha,Qi.MUL)))}}}blendColors(){let e=this.layers.findIndex(i=>i instanceof Lr$1),a=this.layers.findIndex(i=>i instanceof On);if(e!==-1&&e<a){let i=this.layers[e].color;for(let o=e+1;o<a;++o){let c=this.layers[o];if(c instanceof Lr$1){if(c.isMask.value)continue;i=new Jd(i,c.color,c.alpha,c.mode)}}this.fragment.color=i}else this.fragment.color=void 0}blendAfterColors(){let e=new Qt("outgoingLight","f"),a=this.layers.findIndex(i=>i instanceof On);if(this.layers.length>a+1){for(let i=a+1;i<this.layers.length;++i){let o=this.layers[i];if(o instanceof Lr$1){if(o.isMask.value)continue;e=new Jd(e,o.color,o.alpha,o.mode)}}this.fragment.afterColor=e}else this.fragment.afterColor=void 0}blendPositions(){let e=this.layers.filter(a=>a instanceof km);if(e.length>0){let a=e[0].position;for(let i=1;i<e.length;++i)e[i]&&(a=new Qi(a,e[i].position,Qi.ADD),a=new Qi(a,new ke(.5).setReadonly(!0),Qi.MUL));this.fragment.position=a}else this.fragment.position=void 0}getDefines(){return this.defines}getUniforms(){return this.uniforms}getVertexShader(){return this.vertexShader}getFragmentShader(){return this.fragmentShader}onBeforeCompile(e){this.build(),e.defines=this.defines,e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.extensionDerivatives=this.extensions.derivatives===!0,e.extensionFragDepth=this.extensions.fragDepth===!0,e.extensionDrawBuffers=this.extensions.drawBuffers===!0,e.extensionShaderTextureLOD=this.extensions.shaderTextureLOD===!0}clampUniformsForPreview(e,a){let i=(o,c,d)=>Math.min(Math.max(o,c),d);for(let o of this.layers)if(o.type==="displace"){let c=i(o.uniforms[`f${o.id}_intensity`].value,e,a);o.uniforms[`f${o.id}_intensity`].value=c}}computeCacheKey(){let e="[";for(let{data:a}of this.data.layers)if(a.type==="light")e+=`"${a.visible?a.category.toUpperCase():"Basic"}"`;else{let i=(f_[a.type]??[]).map(b=>a[b]),o=(p_[a.type]??[]).map(b=>{var j;return((j=a[b])==null?void 0:j.length)??0}),c=[...i,...o],d="isMask"in a&&a.isMask,g=`"${a.type}-${a.visible}-${d}"`;c.length?e+=`[${g}, "${c.join('","')}"],`:e+=g}return e=e.slice(0,-1)+"]",e}updateFrame(e){for(let a=0;a<this.updaters.length;++a)e.updateNode(this.updaters[a])}build(){let e=new Kd;e.needsJitter=this.needsJitter,this.lights=this.lightLayer.data.visible,e.build(this.fragment,this.fragment),this.vertexShader=e.getCode("vertex"),this.fragmentShader=e.getCode("fragment"),this.defines=e.defines,this.uniforms=e.uniforms,this.extensions=e.extensions,this.updaters=e.updaters;for(let a of this.flavors)a&&a.updateAfterBuild();return this}nodeMaterialDispose(){this.layers.forEach(e=>e.dispose()),super.dispose();for(let e of this.flavors)e&&e.dispose()}assetsLoaded(){for(let e of this.layers)if(e instanceof Lr$1){let a=e.params.texture;if(a instanceof Qc&&!a.image.loaded)return!1}return!0}getHash(){let e="{";return e+='"fragment":'+this.fragment.getHash(),e+="}",e}};Object.defineProperties(Wn.prototype,{properties:{get:function(){return this.fragment.properties}}});var $c=class extends Ga{constructor(e,a,i){super(e,a,!1),this.uuid=i,this.allowVariableSaves=!0,this.saveVariableLocations(a)}},SR=pi(vR()),xR=new Map;function bR(e){if(typeof e=="string")return e;let a=xR.get(e);return a||(a={url:URL.createObjectURL(new Blob([e]))},xR.set(e,a)),a.url}var ja=class{constructor({src:e,volume:a,delay:i,loop:o}){this._volume=1,this.delay=0,this._loop=1,this.loopsRemaining=0,this._status="stopped",this.onEnd=()=>{this.loopsRemaining===1/0?this.replay():this.loopsRemaining>1?(this.replay(),this.loopsRemaining--):(this._status="stopped",this.loopsRemaining=this._loop)};let c;typeof e=="string"?c={src:e}:c={src:bR(e),format:"wav"},this.sound=new SR.Howl(c),this.sound.on("end",this.onEnd),this.src=e,a!==void 0&&(this.volume=a),i!==void 0&&(this.delay=i),o!==void 0&&(this.loop=o)}get status(){return this._status}get volume(){return this._volume}set volume(e){this._volume=e,this.sound.volume(e)}get loop(){return this._loop}set loop(e){this._loop=e,this.loopsRemaining=e}replay(){this.clearDelay(),this.delayTimerId=window.setTimeout(()=>{this.sound.play(),this.clearDelay()},this.delay)}fade(e,a=1e3){e?(this.sound.volume(this._volume),this.clearFade(),this.fadeTimerId=window.setTimeout(()=>{this.sound.fade(this._volume,0,a),this.clearFade()},e)):this.sound.fade(this._volume,0,a)}on(e,a,i){this.sound.on(e,a,i)}off(e,a,i){this.sound.off(e,a,i)}play(){this._status==="playing"||this.sound.playing()||(this._status==="paused"?(this.sound.seek()===0?this.replay():this.sound.play(),this._status="playing"):this._status==="stopped"&&(this.replay(),this._status="playing"))}pause(){this._status==="playing"&&(this.sound.pause(),this.clearFade(),this.clearDelay(),this._status="paused")}stop(){this.sound.stop(),this.loopsRemaining=this._loop,this.clearFade(),this.clearDelay(),this._status="stopped"}clearFade(){this.fadeTimerId&&(clearTimeout(this.fadeTimerId),delete this.fadeTimerId)}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}dispose(e=!1){this.off(),this.stop(),this.clearFade(),this.clearDelay()}},hx=class{constructor(){this.type="ShapePath",this.color=new We,this.subPaths=[],this.currentPath=null}moveTo(e,a){return this.currentPath=new Tc,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,a),this}lineTo(e,a){var i;return(i=this.currentPath)==null||i.lineTo(e,a),this}quadraticCurveTo(e,a,i,o){var c;return(c=this.currentPath)==null||c.quadraticCurveTo(e,a,i,o),this}bezierCurveTo(e,a,i,o,c,d){var g;return(g=this.currentPath)==null||g.bezierCurveTo(e,a,i,o,c,d),this}splineThru(e){var a;return(a=this.currentPath)==null||a.splineThru(e),this}toShapes(){let e={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},a={loc:e.ORIGIN,t:0};function i(ut,gt,yt,Pt){let wt=ut.x,Ct=gt.x,At=yt.x,Tt=Pt.x,kt=ut.y,It=gt.y,Lt=yt.y,Ft=Pt.y,Nt=(Tt-At)*(kt-Lt)-(Ft-Lt)*(wt-At),Ht=(Ct-wt)*(kt-Lt)-(It-kt)*(wt-At),Gr=(Ft-Lt)*(Ct-wt)-(Tt-At)*(It-kt),hs=Nt/Gr,_s=Ht/Gr;if(Gr===0&&Nt!==0||hs<=0||hs>=1||_s<0||_s>1)return null;if(Nt===0&&Gr===0){for(let hn=0;hn<2;hn++)if(o(hn===0?yt:Pt,ut,gt),a.loc===e.ORIGIN){let Qn=hn===0?yt:Pt;return{x:Qn.x,y:Qn.y,t:a.t}}else if(a.loc===e.BETWEEN){let Qn=+(wt+a.t*(Ct-wt)).toPrecision(10),ds=+(kt+a.t*(It-kt)).toPrecision(10);return{x:Qn,y:ds,t:a.t}}return null}else{for(let ds=0;ds<2;ds++)if(o(ds===0?yt:Pt,ut,gt),a.loc===e.ORIGIN){let un=ds===0?yt:Pt;return{x:un.x,y:un.y,t:a.t}}let hn=+(wt+hs*(Ct-wt)).toPrecision(10),Qn=+(kt+hs*(It-kt)).toPrecision(10);return{x:hn,y:Qn,t:hs}}}function o(ut,gt,yt){let Pt=yt.x-gt.x,wt=yt.y-gt.y,Ct=ut.x-gt.x,At=ut.y-gt.y,Tt=Pt*At-Ct*wt;if(ut.x===gt.x&&ut.y===gt.y){a.loc=e.ORIGIN,a.t=0;return}if(ut.x===yt.x&&ut.y===yt.y){a.loc=e.DESTINATION,a.t=1;return}if(Tt<-Number.EPSILON){a.loc=e.LEFT;return}if(Tt>Number.EPSILON){a.loc=e.RIGHT;return}if(Pt*Ct<0||wt*At<0){a.loc=e.BEHIND;return}if(Math.sqrt(Pt*Pt+wt*wt)<Math.sqrt(Ct*Ct+At*At)){a.loc=e.BEYOND;return}let kt;Pt!==0?kt=Ct/Pt:kt=At/wt,a.loc=e.BETWEEN,a.t=kt}function c(ut,gt){let yt=[],Pt=[];for(let wt=1;wt<ut.length;wt++){let Ct=ut[wt-1],At=ut[wt];for(let Tt=1;Tt<gt.length;Tt++){let kt=gt[Tt-1],It=gt[Tt],Lt=i(Ct,At,kt,It);Lt!==null&&yt.find(Ft=>Ft.t<=Lt.t+Number.EPSILON&&Ft.t>=Lt.t-Number.EPSILON)===void 0&&(yt.push(Lt),Pt.push(new z$2(Lt.x,Lt.y)))}}return Pt}function d(ut,gt,yt){let Pt=new z$2;gt.getCenter(Pt);let wt=[];return yt.forEach(Ct=>{Ct.boundingBox.containsPoint(Pt)&&c(ut,Ct.points).forEach(At=>{wt.push({identifier:Ct.identifier,isCW:Ct.isCW,point:At})})}),wt.sort((Ct,At)=>Ct.point.x-At.point.x),wt}function g(ut,gt,yt,Pt,wt){(wt==null||wt==="")&&(wt="nonzero");let Ct=new z$2;ut.boundingBox.getCenter(Ct);let At=[new z$2(yt,Ct.y),new z$2(Pt,Ct.y)],Tt=d(At,ut.boundingBox,gt);Tt.sort((Ht,Gr)=>Ht.point.x-Gr.point.x);let kt=[],It=[];Tt.forEach(Ht=>{Ht.identifier===ut.identifier?kt.push(Ht):It.push(Ht)});let Lt=kt[0].point.x,Ft=[],Nt=0;for(;Nt<It.length&&It[Nt].point.x<Lt;)Ft.length>0&&Ft[Ft.length-1]===It[Nt].identifier?Ft.pop():Ft.push(It[Nt].identifier),Nt++;if(Ft.push(ut.identifier),wt==="evenodd"){let Ht=Ft.length%2===0,Gr=Ft[Ft.length-2];return{identifier:ut.identifier,isHole:Ht,for:Gr}}else if(wt==="nonzero"){let Ht=!0,Gr=null,hs=null;for(let _s=0;_s<Ft.length;_s++){let hn=Ft[_s];gt[hn]&&(Ht?(hs=gt[hn].isCW,Ht=!1,Gr=hn):hs!==gt[hn].isCW&&(hs=gt[hn].isCW,Ht=!0))}return{identifier:ut.identifier,isHole:Ht,for:Gr}}else console.warn('fill-rule: "'+wt+'" is currently not implemented.')}let b=0,j=999999999,$=-999999999,rt=[];this.subPaths.forEach(ut=>{let gt=ut.getPoints(),yt=-999999999,Pt=999999999,wt=-999999999,Ct=999999999;for(let At=0;At<gt.length;At++){let Tt=gt[At];Tt.y>yt&&(yt=Tt.y),Tt.y<Pt&&(Pt=Tt.y),Tt.x>wt&&(wt=Tt.x),Tt.x<Ct&&(Ct=Tt.x)}$<=wt&&($=wt+1),j>=Ct&&(j=Ct-1),gt.length&&rt.push({curves:ut.curves,points:gt,isCW:Zu.isClockWise(gt),identifier:b++,boundingBox:new lh(new z$2(Ct,Pt),new z$2(wt,yt))})});let _e=rt.map(ut=>{var gt;return g(ut,rt,j,$,(gt=this.userData)==null?void 0:gt.style.fillRule)}),st=[];return rt.forEach(ut=>{let gt=_e[ut.identifier];if(gt&&!gt.isHole){let yt=new xa;yt.curves=ut.curves,_e.filter(Pt=>(Pt==null?void 0:Pt.isHole)&&Pt.for===ut.identifier).forEach(Pt=>{if(Pt){let wt=rt[Pt.identifier],Ct=new Tc;Ct.curves=wt.curves,yt.holes.push(Ct)}}),st.push(yt)}}),st}},y_=!1,AR,v_=new Promise(e=>{AR=e}),wR=!1,dx;function _R(){if(y_=!0,wR)return;if(dx)return dx;async function e(){let a=await __vitePreload(()=>import("./opentype-BktxL4Qf.js"),__vite__mapDeps([]));AR(a),wR=!0}return dx=e(),dx}var Vm=class{async load(e,a,i=()=>{}){let{load:o}=await v_;o(e,(c,d)=>{c||!d?i(c??"Something went wrong"):a(d)})}async parse(e){let{parse:a,Bidi:i}=await v_;try{let o=a(e),c=new i,d=g=>o.charToGlyphIndex(g.char);return c.registerModifier("glyphIndex",null,d),c.applyFeatures(o,o.defaultRenderOptions.features),{font:o,bidi:c}}catch(o){console.error(o)}}};async function XY(e){return await(await fetch(e)).arrayBuffer()}var QY=new Vm;async function x_(e){let a,i,o=!1;if(e.url?(a=await XY(e.url),i=e.url,o=e.url.startsWith("/")):e.data&&(a=e.data.buffer.slice(e.data.byteOffset,e.data.byteOffset+e.data.byteLength)),a)if(y_){let c=await QY.parse(a);if(c)return{font:c.font,url:i,intercepted:o,arr:a,bidi:c.bidi}}else return{font:void 0,url:i,intercepted:o,arr:a,bidi:null}}function KY(e,a){return a.state.glyphIndex===e||a.state.fina===e||a.state.medi===e||a.state.init===e}var fx=class{constructor(e){this._arrayBuffer=new ArrayBuffer(1),this._isLoaded=!1,this._intercepted=!1,this._isUserFont=e.isUserFont??!1,this._loadingPromise=x_(e).then(a=>{a&&(this._arrayBuffer=a.arr,this._url=a.url,this.font=a.font,this._intercepted=a.intercepted,this._isLoaded=!0,this._bidi=a.bidi)})}update(e){this._isLoaded=!1,this._isUserFont=e.isUserFont??!1,this._loadingPromise=x_(e).then(a=>{a&&(this._arrayBuffer=a.arr,this._url=a.url,this.font=a.font,this._intercepted=a.intercepted,this._isLoaded=!0,this._bidi=a.bidi)})}get url(){return this._url}get intercepted(){return this._intercepted}get isLoaded(){return this._isLoaded}get loadingPromise(){return this._loadingPromise}reverseLigaturesTable(e,a,i){if(!this._bidi)return[];let o=this._bidi;o.getTextGlyphs(a);let c=o.tokenizer.tokens,d=[],g=0,b=i.length===c.length;for(let j=0;j<i.length;j++){let $=i[j].index,rt=String.fromCharCode(i[j].unicode),_e=c[g];if(KY($,_e)||b)d.push({char:rt,index:$,replacements:[_e.state.glyphIndex],replacementChars:[_e.char]}),g++;else{let st=_e.char,ut="",gt=[_e.state.glyphIndex],yt=[],Pt=!1;for(;!Pt;)g++,ut=a.charAt(g),st+=ut,gt.push(e.charToGlyphIndex(ut)),yt=e.stringToGlyphs(st),yt.length===1&&yt[0].index===$&&(Pt=!0),g>a.length&&(Pt=!0);d.push({char:rt,index:$,replacements:gt,replacementChars:Array.from(st)}),g++}}return d}generateShapes(e,a){if(!this._isLoaded)return;let i=this.font,o=a.fontSize/this.unitsPerEm,c=a.fontSize*a.lineHeight,d=e.map(wt=>this.getTextWidth(wt,a)),g=a.width,b=this.getCharWidth(`
`,a),j=a.horizontalAlign===1?b:0,$=this.computeSpaceWidthForLine(e,0,a),rt=this.getLineInitialOffsetX(d[0],g,a.horizontalAlign,e[0],b),_e=this.getLineInitialOffsetY(c,e.length,a.height,o,a.verticalAlign),st=[],ut=e.map(wt=>[]),gt=e.map(wt=>[]),yt;for(let wt=0;wt<e.length;wt++){let Ct=e[wt],At={features:{liga:!0}},Tt=[];try{Tt=i.stringToGlyphs(Ct,At)}catch(It){console.warn(It)}rt=this.getLineInitialOffsetX(d[wt],g,a.horizontalAlign,Ct,b);let kt=[];try{kt=this.reverseLigaturesTable(i,Ct,Tt)}catch(It){console.warn(It)}$=this.computeSpaceWidthForLine(e,wt,a);for(let It=0;It<Tt.length;It++){let Lt=Tt[It],Ft=Lt.index===0?`
`:Lt.unicode?String.fromCharCode(Lt.unicode):void 0,Nt=kt[It],Ht=0,Gr=0;It===0&&a.horizontalAlign===2&&Lt.leftSideBearing!==void 0&&(Gr=-Lt.leftSideBearing*o),yt&&(Ht=i.getKerningValue(Lt,yt)*o),rt+=Gr+Ht;let hs=0;if(Ft===`
`)hs=j;else if(Ft===" ")hs=$;else{let _s=this.createPath(Lt,o,rt,_e,a);_s&&(hs=_s.offsetX-(Ht+Gr),st.push(_s.path))}if(Nt.replacements.length===1)gt[wt].push([rt,_e]),ut[wt].push(hs);else{let _s=Nt.replacements.map(un=>(i.glyphs.get(un).advanceWidth??0)*o),hn=_s.reduce((un,dr)=>un+=dr,0),Qn=_s.map(un=>un/hn),ds=rt;for(let un=0;un<Qn.length;un++){let dr=hs*Qn[un];gt[wt].push([ds,_e]),ut[wt].push(dr),ds+=dr}}rt+=hs,yt=Lt}_e-=c}let Pt=[];for(let wt=0,Ct=st.length;wt<Ct;wt++)Pt.push(...st[wt].toShapes());return{shapes:Pt,charWidths:ut,lineWidths:d,charCoords:gt}}get isUserFont(){return this._isUserFont}get arrayBuffer(){return this._arrayBuffer}get ascender(){var e;return((e=this.font)==null?void 0:e.ascender)??0}get descender(){var e;return((e=this.font)==null?void 0:e.descender)??0}get familyName(){var e;return((e=this.font)==null?void 0:e.names.fontFamily)??""}get subfamilyName(){var e;return((e=this.font)==null?void 0:e.names.fontSubfamily)??""}get unitsPerEm(){var e;return((e=this.font)==null?void 0:e.unitsPerEm)??1}getLineInitialOffsetX(e,a,i,o,c){return(i===3||i===2)&&o.indexOf(`
`)>=0&&(e-=c),i===3?a*.5-e*.5:i===2?a-e:0}getLineInitialOffsetY(e,a,i,o,c){let d=a*e,g=Math.abs(this.ascender-this.descender)*o,b=e-g,j=-this.ascender*o-b/2;return c===3?-(i-d-j):c===2?-(i*.5-d*.5-j):j}createPath(e,a,i,o,c){var j;let d=e.getPath(i,-o,c.fontSize,{kerning:!1,letterSpacing:c.letterSpacing});if(!d){console.error('THREE.Font: character "'+e+'" does not exists in font family '+this.familyName+".");return}let g=new hx,b=(e.advanceWidth??1)*a;if(e)for(let $ of d.commands){let rt=(j=g.currentPath)==null?void 0:j.currentPoint;if(!(rt&&$.type!=="Z"&&rt.x===$.x&&-rt.y===$.y))switch($.type){case"M":g.moveTo($.x,-$.y);break;case"L":g.lineTo($.x,-$.y);break;case"Q":g.quadraticCurveTo($.x1,-$.y1,$.x,-$.y);break;case"C":g.bezierCurveTo($.x1,-$.y1,$.x2,-$.y2,$.x,-$.y);break}}return g.subPaths.forEach($=>{let rt=ZY($.curves);rt!==void 0&&$.currentPoint.distanceTo(rt)>0&&$.lineTo(rt.x,rt.y)}),{offsetX:b+c.fontSize*c.letterSpacing,path:g}}getCharWidth(e,a){var i;return((i=this.font)==null?void 0:i.getAdvanceWidth(e,a.fontSize,{kerning:!0,letterSpacing:a.letterSpacing}))??0}getTextWidth(e,a){var i;return((i=this.font)==null?void 0:i.getAdvanceWidth(e,a.fontSize,{kerning:!0,letterSpacing:a.letterSpacing}))??0}computeSpaceWidthForLine(e,a,i){let o=this.getCharWidth(" ",i),c=e[a];if(c){let d=this.countSpaces(c.trimEnd());if(i.horizontalAlign===4&&a<e.length-1&&d){let g=i.width,b=this.getTextWidth(c,i);return(g-(b-d*o))/d}}return o}countSpaces(e){return(e.match(/ /g)||[]).length}};function ZY(e){if(e.length){let a=e[0];if(a instanceof pn)return a.v1;if(a instanceof fn||a instanceof is$1)return a.v0}}var b_=class{constructor(){this.objects=new Map,this.unreachable=new Set}getCached(e){return this.objects.get(e)}get size(){return this.objects.size}get(e,a,i){let o=this.objects.get(e);return o===void 0?(o=this.createObject(e,a,i),this.objects.set(e,o)):o.isShared=!0,o}forceDelete(e){let a=this.objects.get(e);a&&(this.disposeObject(a),this.objects.delete(e))}mutateIfUnique(e,a){let i=this.objects.get(e);if(i&&i.isShared!==!0)return this.objects.delete(e),this.objects.set(a,i),i}startGc(){this.unreachable=new Set(this.objects.keys())}markAsReachable(e,a){let i=this.objects.get(e);a===i&&this.unreachable.delete(e)}endGc(){this.unreachable.forEach(e=>{this.disposeObject(this.objects.get(e)),this.objects.delete(e)}),this.unreachable.clear()}dispose(){this.objects.forEach(e=>{this.disposeObject(e)}),this.objects.clear()}},zm=class extends b_{constructor(e){super(),this.flatShading=e}disposeObject(e){e.dispose()}createObject(e,a,i){let o=Va(e,a,this.flatShading,i);return o.computeBoundingSphere(),o}},ER={markNeedsUpdateRendererDirty:()=>{}},S_=class extends nx{constructor(e){super(),this.shared=e}create(e){return new ff(e,this.shared)}},eu=class{constructor(e,a={}){if(this.data=e,this.geometryCache=new zm(!0),this.geometryCache2=new zm(!1),this.imageHolderCache=new S_(this),this.thisContext={scene:ER,shared:this},this.deletedMaterial=new $c(oi.defaultTwoLayerData("phong"),this.thisContext,""),this.deletedImage=new cs(ad.emptyImage,this),this.deletedVideo=new cs(Jh.defaultVideo,this),this.materials={},this.images={},this.canvases={},this.videos={},this.colors={},this.audios={},this.particles={},this.fonts={},this.variables={},this.mouseProperty=null,this.raycastProperty=null,this.requestRender=()=>{this._requestRender&&this._requestRender()},a.images)for(let[i,o]of Object.entries(a.images))this.addImage(i,o);if(a.videos)for(let[i,o]of Object.entries(a.videos))this.addVideo(i,o);if(a.audios)for(let[i,o]of Object.entries(a.audios))this.addAudio(i,o);if(a.particles)for(let[i,o]of Object.entries(a.particles))this.addParticle(i,o);this.reset(e)}setRequestRender(e){this._requestRender=e}setEntityOpContext(e){this.entityOpContext=e}reset(e,a=!1){this.resetLib(e.lib);for(let{id:i,data:o}of e.variables)this.addVariableHolder(i,o),a&&this.updateVariableHolder(i,o);for(let[i,o]of Object.entries(e.images))this.addImage(i,o);for(let[i,o]of Object.entries(e.videos))this.addVideo(i,o);for(let[i,o]of Object.entries(e.colors))this.addColor(i,o);for(let[i,o]of Object.entries(e.materials))this.addMaterial(i,o);for(let[i,o]of Object.entries(e.audios))this.addAudio(i,o);for(let[i,o]of Object.entries(e.particles))this.addParticle(i,o);for(let[i,o]of Object.entries(e.fonts))this.addFont(i,o)}addMaterial(e,a){if(this.materials[e]){let i=this.materials[e];i.reset(a,this.thisContext),i.dispose()}else{let i=new $c(a,this.thisContext,e);this.materials[e]=i}}deleteMaterial(e){this.materials[e]&&(this.materials[e].nodeMaterialDispose(),delete this.materials[e])}getMaterial(e){return this.materials[e]}getMaterialOrDeletedPlaceholder(e){return this.materials[e]??this.deletedMaterial}material(e){return typeof e=="string"?this.getMaterialOrDeletedPlaceholder(e):e==null?(console.error("material is undefined or null"),this.deletedMaterial):new Ga(e,this.thisContext)}getMaterials(){return this.materials}addImage(e,a){return this.images[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),this.images[e].updateSrc(a.data),!0):(this.images[e]=new cs(a,this),!1)}deleteImage(e){let a=this.images[e];a&&(a.dispose(),delete this.images[e])}getDefaultImage(){return this.images.image_0}getImage(e){return this.images[e]??this.deletedImage}image(e){return typeof e=="string"?this.getImage(e):this.imageHolderCache.load(e)}addCanvas(e,a){return this.canvases[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),this.canvases[e].updateSrc(a),!0):(this.canvases[e]=new cs(a,this),!1)}canvas(e){return this.canvases[e]}addVideo(e,a){return this.videos[e]?(this.videos[e].updateSrc(a.data),!0):(this.videos[e]=new cs(a,this),!1)}deleteVideo(e){let a=this.videos[e];a&&(a.dispose(),delete this.videos[e])}getVideo(e){return this.videos[e]??this.deletedVideo}video(e){return typeof e=="string"?this.getVideo(e):this.imageHolderCache.load(e)}addColor(e,a){return this.colors[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),"a"in a?this.colors[e].setRGBA(a.r,a.g,a.b,a.a):this.colors[e].setRGBA(a.r,a.g,a.b,1),!0):("a"in a?this.colors[e]=new Xl(a.r,a.g,a.b,a.a):this.colors[e]=new Xl(a.r,a.g,a.b,1),!1)}updateColor(e,a){if(this.colors[e]){this.onColorOrImageUpdate&&this.onColorOrImageUpdate();let i=this.colors[e];return this.colors[e].r=a.r??i.r,this.colors[e].g=a.g??i.g,this.colors[e].b=a.b??i.b,this.colors[e].a=a.a??i.a,!0}return!1}deleteColor(e){this.colors[e]&&delete this.colors[e]}getColor(e){return this.colors[e]}color(e){let a;if(typeof e=="string"){let i=this.getColor(e);i?a=i:(console.warn("Tried to create color layer params with a color key that does not exist in the assets manager"),a=new xr$1(0,0,0,0))}else return"a"in e?new xr$1(e.r,e.g,e.b,e.a):new xr$1(e.r,e.g,e.b,1);return a}addAudio(e,a){this.audios[e]=a}getAudio(e){let a=this.audios[e];if(a instanceof ja)return a;{let i=new ja({src:a.data});return this.audios[e]=i,i}}addParticle(e,a){this.particles[e]=a}getParticle(e){return this.particles[e]}deleteParticle(e){this.particles[e]&&delete this.particles[e]}deleteAudio(e){let a=this.audios[e];a&&(a instanceof ja&&a.dispose(),delete this.audios[e])}addFont(e,a){this.fonts[e]=new fx(a),this.fonts[e].loadingPromise.then(()=>this.requestRender())}getFont(e){return this.fonts[e]}deleteFont(e){this.fonts[e]&&delete this.fonts[e]}dispose(){Object.keys(this.materials).forEach(e=>this.deleteMaterial(e)),this._requestRender=void 0,Object.values(this.audios).forEach(e=>{e instanceof ja&&e.dispose()}),this.audios={},this.particles={},this.geometryCache.dispose(),this.geometryCache2.dispose()}addVariableHolder(e,a){return this.variables[e]===void 0?(this.variables[e]={value:a.value,locations:[]},"dynamicVariableType"in a&&(this.variables[e].dynamicVariablePlayState="Playing",this.variables[e].dynamicVariableToggleIsForward=void 0),!0):(this.variables[e].value=a.value,!1)}resetDynamicVariablePlayState(){for(let e in this.variables)this.variables[e].dynamicVariablePlayState!==void 0&&(this.variables[e].dynamicVariablePlayState="Playing",this.variables[e].dynamicVariableToggleIsForward=void 0)}updateVariableHolder(e,a){this.updateVariable(e,a.value)}updateVariable(e,a){if(this.variables[e]===void 0)return!1;this.variables[e].value=a;let i=a;for(;typeof i=="string";)i=this.variables[i].value;let o=this.entityOpContext.scene;for(let c=this.variables[e].locations.length-1;c>=0;c--){let d=this.variables[e].locations[c];if(d[0]==="material"){let g=d[1],b=i,j={scene:o,shared:this},$=d.slice(2);o.traverseMaterial(_e=>{let st=_e.root??_e;st.uuid===g&&st.onVariableUpdate($,b,j)});let rt=this.materials[g];rt&&rt.onVariableUpdate($,b,j)}else{let g=o.find(d[0]);if(g===void 0){this.variables[e].locations.splice(c,1);continue}if(d[1]!=="geometry"&&d[1]!=="particles"){for(let b=1;b<d.length-1;b++)g=g[d[b]];d[1]==="rotation"?g[d[d.length-1]]=i*Me.DEG2RAD:g[d[d.length-1]]=i}if(g=o.find(d[0]),g.type==="ParticleEmitter"&&g.updateVariableState(i,d),vt.is(g)){if(d[1]==="position"||d[1]==="rotation"||d[1]==="scale")g.onVariableUpdate();else if(d[1]==="geometry"){let b=g;g.component&&(b=g.component);let j=b.dataPatched;b.chooseGeoemtryCache(this).forceDelete(j.geometry),b.createGeometryDelayed(this.entityOpContext),b.onVariableUpdate(!0),b.instances.forEach($=>{let rt=$.dataPatched;$.chooseGeoemtryCache(this).forceDelete(rt.geometry),$.createGeometryDelayed(this.entityOpContext),$.onVariableUpdate(!0)})}}}}return!0}deleteVariable(e){this.variables[e]&&delete this.variables[e]}getVariable(e,a){var i,o,c;if(Array.isArray(e)){if(e[0]==="mouse")return((i=this.mouseProperty)==null?void 0:i[e[1]])??0;if(e[0]==="raycast")return((o=this.raycastProperty)==null?void 0:o[e[1]])??0;let d=this.entityOpContext.scene.find(e[0]);if(e[1]==="width"||e[1]==="height"||e[1]==="depth")return d.geometry.userData.parameters[e[1]];for(let g=1;g<e.length;g++)d=d[e[g]];return e[1]==="rotation"&&(d*=Me.RAD2DEG),d}for(let d in this.variables){if(a===void 0)break;let g=this.variables[d],b=(c=g.locations)==null?void 0:c.findIndex(j=>Nr$1.equal(j,a));b!==void 0&&b!==-1&&g.locations.splice(b,1)}if(typeof e=="string"){let d=e,g=e;do{if(g=d,this.variables[d]===void 0)break;d=this.variables[d].value}while(typeof d=="string");return a&&this.variables[g]!==void 0&&this.variables[g].locations.push(a),d}else return e}getVariables(){return this.variables}getDynamicVariablePlayState(e){var a;return(a=this.variables[e])==null?void 0:a.dynamicVariablePlayState}setDynamicVariablePlayState(e,a){this.variables[e]!==void 0&&(this.variables[e].dynamicVariablePlayState=a)}getDynamicVariableToggleIsForward(e){var a;return(a=this.variables[e])==null?void 0:a.dynamicVariableToggleIsForward}setDynamicVariableToggleIsForward(e,a){this.variables[e]!==void 0&&(this.variables[e].dynamicVariableToggleIsForward=a)}resetLib(e){for(let[a,i]of Object.entries(e.images))this.addImage(a,i.asset);for(let[a,i]of Object.entries(e.audios))this.addAudio(a,i.asset);for(let[a,i]of Object.entries(e.particles))this.addParticle(a,i.asset);for(let[a,i]of Object.entries(e.colors))this.addColor(a,i.asset);for(let[a,i]of Object.entries(e.fonts))this.addFont(a,i.asset);for(let[a,i]of Object.entries(e.materials))this.addMaterial(a,i.asset);for(let[a,i]of Object.entries(e.videos))this.addVideo(a,i.asset);for(let[a,i]of Object.entries(e.variables))this.addVariableHolder(a,i.asset)}updateLibByOp(e,a){e.path[0]==="images"?e.path.length===1&&e.type===1?this.addImage(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteImage(e.id):e.path[0]==="videos"?e.path.length===1&&e.type===1?this.addVideo(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteVideo(e.id):e.path[0]==="audios"?e.path.length===1&&e.type===1?this.addAudio(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteAudio(e.id):e.path[0]==="particles"?e.path.length===1&&e.type===1?this.addParticle(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteParticle(e.id):e.path[0]==="colors"?e.path.length===1&&e.type===1?this.addColor(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteColor(e.id):e.path[0]==="materials"?e.path.length===1&&e.type===1?this.addMaterial(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteMaterial(e.id):e.path[0]==="fonts"?e.path.length===1&&e.type===1?this.addFont(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteFont(e.id):e.path[0]==="variables"?e.path.length===1&&e.type===1?this.addVariableHolder(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteVariable(e.id):e.path[0]==="components"&&a.updateByLibOp(e,this)}updateByOp(e,a,i){this.data=a,e.path[0]==="images"?e.path.length===2&&e.type===0?e.props.data&&this.getImage(e.path[1]).updateSrc(e.props.data):e.path.length===1&&e.type===1?this.addImage(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteImage(e.id):e.path[0]==="videos"?e.path.length===2&&e.type===0?e.props.data&&this.getVideo(e.path[1]).updateSrc(e.props.data):e.path.length===1&&e.type===1?this.addVideo(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteVideo(e.id):e.path[0]==="audios"?e.path.length===2&&e.type===0?e.props.data&&this.addAudio(e.path[1],a.audios[e.path[1]]):e.path.length===1&&e.type===1?this.addAudio(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteAudio(e.id):e.path[0]==="particles"?e.path.length===2&&e.type===0?e.props.data&&this.addParticle(e.path[1],a.particles[e.path[1]]):e.path.length===1&&e.type===1?this.addParticle(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteParticle(e.id):e.path[0]==="colors"?e.path.length===2&&e.type===0?this.updateColor(e.path[1],e.props):e.path.length===1&&e.type===1?this.addColor(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteColor(e.id):e.path[0]==="materials"?e.path.length===1&&e.type===1?this.addMaterial(e.id,e.data):e.path.length===1&&e.type===2?this.deleteMaterial(e.id):e.path.length>1&&this.getMaterial(e.path[1]).updateByOp(Fr$1.drop(e,2),a.materials[e.path[1]],{shared:this,scene:i}):e.path[0]==="fonts"?e.path.length===2&&e.type===0?this.updateFont(e.path[1],e,i):e.path.length===1&&e.type===1?this.addFont(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteFont(e.id):e.path[0]==="variables"?e.path.length===2&&e.type===0&&"value"in e.props?this.updateVariable(e.path[1],e.props.value):e.path.length===1&&e.type===4?this.addVariableHolder(e.id,e.data):e.path.length===1&&e.type===5&&this.deleteVariable(e.id):e.path[0]==="lib"&&this.updateLibByOp(Fr$1.drop(e,1),i)}updateFont(e,a,i){if(a.props.url){let o=this.getFont(e),c={...this.data.fonts[e],url:a.props.url};o.update(c),o.loadingPromise.then(()=>this.requestRender()),i.updateFont(e,this)}}};new eu(Mn.emptyData());var Ps=class extends pr{updateByPatchedOp(e,a,i){if(super.updateByPatchedOp(e,a,i),sD(e.path,["materials"])!==null&&e.type===0&&Array.isArray(this.material))for(let[o,c]of Object.entries(e.props)){let d=i.shared.material(c);this.material[Number(o)]=d}else if(Rt(e.path,["material"])&&this.material instanceof Wn)"material"in a&&typeof a.material!="string"&&this.material.updateByOp(Fr$1.drop(e,1),a.material,i);else if(Rt(e.path,["materials","*"])&&Array.isArray(this.material)){let o=e.path[1];if("materials"in a&&o<this.material.length){let c=a.materials[o];typeof c!="string"&&this.material[o].updateByOp(Fr$1.drop(e,2),c,i)}}}get needsAO(){return this.material!==void 0?(Array.isArray(this.material)?this.material[0]:this.material).hasAO:!1}updateState(e,a){var o,c;super.updateState(e,a),e.castShadow!==void 0&&(this.castShadow=e.castShadow),e.receiveShadow!==void 0&&(this.receiveShadow=e.receiveShadow);let i=this.dataPatched;if(((o=e.geometry)==null?void 0:o.type)!=="NonParametricGeometry"&&"material"in e&&e.material!==void 0&&(this.disposeMaterial(),this.material=a.shared.material(e.material).getFlavor(i.flatShading,i.side,i.wireframe),a.scene.markNeedsUpdateRendererDirty()),(((c=e.geometry)==null?void 0:c.type)==="NonParametricGeometry"||"materials"in e)&&("materials"in e&&e.materials!==void 0?(this.disposeMaterial(),this.material=e.materials.map(d=>a.shared.material(d).getFlavor(i.flatShading,i.side,i.wireframe)),a.scene.markNeedsUpdateRendererDirty()):"material"in e&&e.material!==void 0&&(this.disposeMaterial(),this.material=[a.shared.material(e.material).getFlavor(i.flatShading,i.side,i.wireframe)],a.scene.markNeedsUpdateRendererDirty())),e.flatShading!==void 0||e.wireframe!==void 0||e.side!==void 0)if(Array.isArray(this.material))for(let d=0;d<this.material.length;d++)this.material[d]=this.material[d].getFlavor(i.flatShading,i.side,i.wireframe);else this.material=this.material.getFlavor(i.flatShading,i.side,i.wireframe)}disposeMaterial(){this.material&&xv(this.material).forEach(e=>{e instanceof Wn&&(e instanceof $c||e.nodeMaterialDispose())})}dispose(){this.disposeMaterial(),super.dispose()}},TR=new _,MR=new Ke,CR=new Ke,$Y=new _,PR=new ce$1,ur=class extends Ps{constructor(e,a,i){super(e,a),this.data=a,this.isSkinnedMesh=!1,this.localGeometry=void 0,a.bindMode&&a.bindMatrix&&(this.bindMode=a.bindMode,this.bindMatrix=new ce$1().fromArray(a.bindMatrix),this.bindMatrixInverse=new ce$1)}chooseGeoemtryCache(e){return e.geometryCache}markGeometryAsReachable(e){this.geometryCreateDeleyed instanceof Pe&&this.chooseGeoemtryCache(e).markAsReachable(this.dataPatched.geometry,this.geometryCreateDeleyed)}get geometry(){if(this.localGeometry!==void 0)return this.localGeometry;if(this.geometryCreateDeleyed instanceof eu){let e=this.geometryCreateDeleyed,a=this.chooseGeoemtryCache(e);this.geometryCreateDeleyed=a.get(this.dataPatched.geometry,e,this)}return this.geometryCreateDeleyed}set geometry(e){this.localGeometry=e}get is2DAndNoDepth(){let e=this.dataPatched.geometry;return om.is2DParametricMesh(e.type)&&e.depth===0}get is2DType(){return om.is2DParametricMesh(this.geometry.userData.type)}get isNonParametric(){return this.geometry.userData.type==="NonParametricGeometry"}updateByPatchedOp(e,a,i){super.updateByPatchedOp(e,a,i),Rt(e.path,["geometry"])&&this.updateByPatchedOpGeometry(Fr$1.drop(e,1),a.geometry,i)}removeInteractionGeometry(e){var a;(a=this.localGeometry)==null||a.dispose(),this.localGeometry=void 0}updateGeometryInteractions(e,a){var o;this.invalidateDownstreamBooleanData();let i=this.data.geometry.type;if(i==="NonParametricGeometry"||i==="SubdivGeometry"){let c=e;if(this.localGeometry===void 0){let $={...this.data.geometry,...c};this.localGeometry=Va($,a,this.data.flatShading,this)}let d,g,b;c.scaleBaked?[d,g,b]=c.scaleBaked:{width:d,height:g,depth:b}=c;let j=this.localGeometry.userData;j.sxPrev!==void 0&&Mm(this.localGeometry.attributes,d/j.sxPrev,g/j.syPrev,b/j.szPrev),j.sxPrev=d,j.syPrev=g,j.szPrev=b}else{let c={...this.data.geometry,...e};(o=this.localGeometry)==null||o.dispose(),this.localGeometry=Va(c,a,this.data.flatShading,this)}}refreshAttachedCloners(e){for(let a of this.attachedSurfaceCloners)e.scene.addPendingUpdateCloner(a.object)}refreshAttachedPaths(e){for(let a of this.attachedPaths)e.scene.addPendingCommand(()=>a.updateShape())}createGeometryDelayed(e){this.geometryCreateDeleyed=e.shared,this.refreshAttachedCloners(e),this.refreshAttachedPaths(e)}updateByPatchedOpGeometry(e,a,i){var c;let o=!1;e.type===0&&e.path.length===0&&Object.keys(e.props).includes("scaleBaked")&&this.geometryCreateDeleyed instanceof ai&&this.chooseGeoemtryCache(i.shared).mutateIfUnique(this.geometryCreateDeleyed.data,a)===this.geometryCreateDeleyed&&(o=!0,this.geometryCreateDeleyed.mutateDirectlyScaleBaked(a,e.props.scaleBaked),this.refreshAttachedCloners(i),this.refreshAttachedPaths(i)),o||((c=i.scene)==null||c.markGeometryCacheDirty(),this.createGeometryDelayed(i)),this.resetBBoxNeedsUpdate(),this.invalidateDownstreamBooleanData()}updateGeometryOnStateUpdate(e,a){this.createGeometryDelayed(a)}updateState(e,a){e.geometry!==void 0&&this.updateGeometryOnStateUpdate(e.geometry,a),super.updateState(e,a)}updateGeometryGroupsIfNeeded(){var e;Array.isArray(this.material)&&this.geometry.groups.length===0&&this.geometry.addGroup(0,Math.max(((e=this.geometry.getIndex())==null?void 0:e.count)??0,this.geometry.getAttribute("position").count),0)}updateEntityBoxSize(e,a){let i=this.geometry.userData.parameters;this.is2DType?e.set(0,0,i.depth*.5):this.isNonParametric?(e.setScalar(0),this.geometry.boundingSphere&&e.copy(this.geometry.boundingSphere.center),a.set(i.width,i.height,i.depth??0).multiplyScalar(.5)):e.setScalar(0),a.set(i.width,i.height,i.depth??0).multiplyScalar(.5)}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"&&this.bindMatrixInverse.copy(this.bindMatrix).invert()}bind(e,a){this.skeleton=e,this.isSkinnedMesh=!0,a===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),a=this.matrixWorld),this.bindMatrix.copy(a),this.bindMatrixInverse.copy(a).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(e){let a=new Ke,i=this.geometry.attributes.skinWeight;for(let o=0,c=i.count;o<c;o++){a.fromBufferAttribute(i,o);let d=1/a.manhattanLength();d!==1/0?a.multiplyScalar(d):a.set(1,0,0,0),i.setXYZW(o,a.x,a.y,a.z,a.w)}}boneTransform(e,a){let i=this.skeleton;if(i===void 0)return;let o=this.geometry;MR.fromBufferAttribute(o.attributes.skinIndex,e),CR.fromBufferAttribute(o.attributes.skinWeight,e),TR.copy(a).applyMatrix4(this.bindMatrix),a.set(0,0,0);for(let c=0;c<4;c++){let d=CR.getComponent(c);if(d!==0){let g=MR.getComponent(c);PR.multiplyMatrices(i.bones[g].matrixWorld,i.boneInverses[g]),a.addScaledVector($Y.copy(TR).applyMatrix4(PR),d)}}return a.applyMatrix4(this.bindMatrixInverse)}};function eX(e){var g,b;if(e.geometry.attributes.extrudeNormal||!e.geometry.attributes.position||!e.geometry.attributes.normal)return;let a=new Map,i=e.geometry.attributes,o=i.position.array,c=i.normal.array,d=new Float32Array(o.length);for(let j=0;j<o.length;j+=3){let $=`${o[j]}_${o[j+1]}_${o[j+2]}`,rt=new _(c[j],c[j+1],c[j+2]);a.has($)?(g=a.get($))==null||g.normals.push(rt):a.set($,{normals:[rt],result:new _})}a.forEach((j,$)=>{for(let rt of j.normals)j.result.add(rt);j.result.divideScalar(j.normals.length)});for(let j=0;j<o.length;j+=3){let $=`${o[j]}_${o[j+1]}_${o[j+2]}`,rt=(b=a.get($))==null?void 0:b.result;rt&&(d[j]=rt.x,d[j+1]=rt.y,d[j+2]=rt.z)}e.geometry.setAttribute("extrudeNormal",new Te(d,3))}function tX(e){if(e.geometry.attributes.extrudeNormals||!e.geometry.attributes.position)return;let a=e.geometry.attributes.position.array,i=new Float32Array(a.length),o=new _;for(let c=0;c<a.length;c+=3)o.set(a[c],a[c+1],a[c+2]).normalize(),i[c]=o.x,i[c+1]=o.y,i[c+2]=o.z;e.geometry.setAttribute("extrudeNormal",new Te(i,3))}function pf(e){if(Array.isArray(e.material)){for(let a of e.material)if(a.getLayersOfType("outline").length===0)return}else if(!(e.material instanceof Wn)||e.material.getLayersOfType("outline").length===0)return;e instanceof ur&&e.is2DAndNoDepth?tX(e):eX(e)}function mf(e){if(!e.geometry.attributes.position)return;let a=e.geometry.attributes.position.array,i=new Float32Array(a.length),o=parseInt(e.uuid.replace(/\D/g,"")),c=[Me.seededRandom(o),Me.seededRandom(o+1e4),Me.seededRandom(o+2e4)];for(let d=0;d<a.length;d++)i[d]=c[d%3];e.geometry.setAttribute("randomColor",new Xe(i,3))}var Yo=new Wt,Um=new _;function DR(e){let a=!1;return e.scene.objects.traverse((i,o)=>{o.type==="Mesh"&&o.geometry.type==="SubdivGeometry"&&(a=!0)}),a}var ao=class extends ur{constructor(e,a,i){super(e,a,i),this.data=a,this.hiddenMatrixOld=new ce$1,this.smoothShading=!0,this.skipReactionUpdate=!1}chooseGeoemtryCache(e){return this.dataPatched.flatShading?e.geometryCache:e.geometryCache2}get subdivPointerNew(){return this.localGeometry!==void 0?this.subdivPointer:this.geometry.ensureSubdivPointer()}get originalGeometryNew(){return this.localGeometry!==void 0?this.originalGeometry:this.geometry.originalGeometry}get phongAngle(){return this.data.geometry.phongAngle??45}updateEntityBoxSize(e,a){let i=this.geometry.userData.parameters;e.copy(this.originalGeometryNew.boundingSphere.center),a.set(i.width,i.height,i.depth??0).multiplyScalar(.5)}createGeometryByControls(e){var d,g,b;if(this.skipReactionUpdate===!0)return;let a=(d=this.localGeometry)==null?void 0:d.uuid,{originalGeometry:i,subdividedGeometry:o,subdivPointer:c}=ai.build(e,this.subdivPointer,this.smoothShading,this.hasNonUniformScale?this.shearScale:void 0);this.subdivPointer=c,i!==void 0&&((g=this.originalGeometry)==null||g.dispose(),this.originalGeometry=i),o!==void 0&&((b=this.subdividedGeometry)==null||b.dispose(),this.subdividedGeometry=o??void 0),this.localGeometry=this.subdividedGeometry??this.originalGeometry,pf(this),mf(this),this.calcBoundingBox(),a&&(this.localGeometry.uuid=a)}updateState(e,a){if(super.updateState(e,a),e.flatShading!==void 0){let i=this.material;this.material=Array.isArray(i)?i.map(o=>o.getFlavor(!1,o.side,o.wireframe)):i.getFlavor(!1,i.side,i.wireframe),this.smoothShading=!e.flatShading,this.createGeometryDelayed(a)}}updateMesh(e=!1){ai.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1,this.originalGeometry,e&&this.hasNonUniformScale?this.shearScaleInv:void 0),this.subdividedGeometry&&ai.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1,this.subdividedGeometry,e&&this.hasNonUniformScale?this.shearScaleInv:void 0)}updateTopology(){this.originalGeometry.dispose(),this.originalGeometry=ai.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1),this.subdividedGeometry&&(this.subdividedGeometry.dispose(),this.subdividedGeometry=ai.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1)),this.localGeometry=this.subdividedGeometry??this.originalGeometry}raycast(e,a){let i=this.localGeometry;this.localGeometry=this.originalGeometryNew,pr.prototype.raycast.call(this,e,a),this.localGeometry=i}activateSVDCompensation(){!this.hasNonUniformScale||(this.matrix.copy(this.matrixWorldRigid),this.hiddenMatrixOld.copy(this.hiddenMatrix),this.hiddenMatrix.copy(this.parent.matrixWorld).invert())}deactivateSVDCompensation(){!this.hasNonUniformScale||(this.updateMatrix(),this.hasNonUniformScale=void 0,this.hiddenMatrix.copy(this.hiddenMatrixOld))}calcBoundingBox(){let e=this.originalGeometry;e.boundingSphere===null&&(e.boundingSphere=new Br,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=e.boundingSphere));let a=e.attributes.position,i=e.boundingSphere.center;Yo.setFromBufferAttribute(a),Yo.getCenter(i),e.boundingSphere.radius=i.distanceTo(Yo.max),isNaN(e.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),Yo.getSize(Um),this.hasNonUniformScale&&Um.divide(this.scale);let o={width:Um.x,height:Um.y,depth:Um.z};return this.geometry.userData.parameters=o,o}updateBoundingSphere(e){let a=this.originalGeometry;Yo.min.set(e[0],e[2],e[4]),Yo.max.set(e[1],e[3],e[5]),this.hasNonUniformScale&&(Yo.min.applyMatrix4(this.shearScaleInv),Yo.max.applyMatrix4(this.shearScaleInv)),a.boundingSphere===null&&(a.boundingSphere=new Br);let i=a.boundingSphere.center;Yo.getCenter(i),a.boundingSphere.radius=i.distanceTo(Yo.max)}freeSubdivPointer(){var e,a;this.subdivPointer&&(ai.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0),this.localGeometry=void 0,(e=this.originalGeometry)==null||e.dispose(),(a=this.subdividedGeometry)==null||a.dispose()}dispose(){super.dispose(),this.freeSubdivPointer()}updateByPatchedOpGeometry(e,a,i){super.updateByPatchedOpGeometry(e,a,i),this.localGeometry&&this.createGeometryByControls(a)}},OR=-1,rX=1,IR={x:[1,0,0],"-x":[-1,0,0],y:[0,1,0],"-y":[0,-1,0],z:[0,0,1],"-z":[0,0,-1]},RR={polygon_center:0,edge:1,vertex:2},Gm=(e,a)=>(i,o)=>!a||i===0||e===0?0:e*o/100,xt=(e,a)=>{let i=Math.abs(a),o=i*-1;return(e-OR)*(i-o)/(rX-OR)+o};function LR(e){let a=[],i={};for(var o=0,c=e.length;o<c;o++){var d=JSON.stringify(e[o].pos.map(g=>Math.round(g*1e4)/1e4));i[d]||(a.push(e[o]),i[d]=!0)}return a}var iX=new _,px=new _,nX=new _,sX=new _;function gf(e,a){let i=nX.fromArray(e),o=sX.fromArray(a);px.copy(o).sub(i);let c=px.length();return px.normalize().multiplyScalar(c*.5),iX.copy(i).add(px).toArray()}var Ds=new Dr$1,mx=new _,gx=new _,tu=new _;function BR(e){let a=[];for(let i=0;i<=e.index.count;i++)if(mx.fromArray(e.index.array,i*3),Ds.setFromAttributeAndIndices(e.attributes.position,mx.x,mx.y,mx.z),Ds.getNormal(gx),Ds.getMidpoint(tu),!(isNaN(tu.x)||isNaN(tu.y)||isNaN(tu.z))){let{a:o,b:c,c:d}=Ds,g=o.toArray(),b=c.toArray(),j=d.toArray(),$=o.distanceTo(c),rt=c.distanceTo(d),_e=d.distanceTo(o),st=gf(g,b),ut=gf(b,j),gt=gf(j,g),yt=[$,rt,_e],Pt=Math.max(...yt),wt=yt.filter(Tt=>Math.round(Tt)===Math.round(Pt)).length>1,Ct=[],At=Ds.getMidpoint(tu).toArray();Pt===$&&!wt&&(Ct=[ut,gt,gt],At=st),Pt===rt&&!wt&&(Ct=[st,gt,gt],At=ut),Pt===_e&&!wt&&(Ct=[st,ut,ut],At=gt),wt&&(Ct=[st,ut,gt]),a.push({vertices:[g,b,j],faceCenters:Ct,midpoint:At,norm:Ds.getNormal(gx).toArray()})}return a}function NR(e){let a=[],{position:i}=e.attributes;for(let o=0;o<i.count;o++){Ds.setFromAttributeAndIndices(i,o*3,o*3+1,o*3+2),Ds.getNormal(gx),Ds.getMidpoint(tu);let c=Ds.a.toArray(),d=Ds.b.toArray(),g=Ds.c.toArray();a.push({vertices:[c,d,g],faceCenters:[gf(c,d),gf(d,g),gf(g,c)],midpoint:tu.toArray(),norm:gx.toArray()})}return a}var oX=4,aX=.5,w_=e=>.5*(1-Math.cos(e*Math.PI)),A_=class{constructor(){this.perlin=new Array(4096)}noise(e,a=0,i=0){if(this.perlin==null){this.perlin=new Array(4096);for(let Pt=0;Pt<4096;Pt++)this.perlin[Pt]=Math.random()}e<0&&(e=-e),a<0&&(a=-a),i<0&&(i=-i);let o=Math.floor(e),c=Math.floor(a),d=Math.floor(i),g=e-o,b=a-c,j=i-d,$,rt,_e=0,st=.5,ut,gt,yt;for(let Pt=0;Pt<oX;Pt++){let wt=o+(c<<4)+(d<<8);$=w_(g),rt=w_(b),ut=this.perlin[wt&4095],ut+=$*(this.perlin[wt+1&4095]-ut),gt=this.perlin[wt+16&4095],gt+=$*(this.perlin[wt+16+1&4095]-gt),ut+=rt*(gt-ut),wt+=256,gt=this.perlin[wt&4095],gt+=$*(this.perlin[wt+1&4095]-gt),yt=this.perlin[wt+16&4095],yt+=$*(this.perlin[wt+16+1&4095]-yt),gt+=rt*(yt-gt),ut+=w_(j)*(gt-ut),_e+=ut*st,st*=aX,o<<=1,g*=2,c<<=1,b*=2,d<<=1,j*=2,g>=1&&(o++,g--),b>=1&&(c++,b--),j>=1&&(d++,j--)}return _e}noiseSeed(e){let a=(()=>{let i,o;return{setSeed(c){o=i=(c??Math.random()*4294967296)>>>0},getSeed(){return i},rand(){return o=(1664525*o+1013904223)%4294967296,o/4294967296}}})();a.setSeed(e),this.perlin=new Array(4096);for(let i=0;i<4096;i++)this.perlin[i]=a.rand()}},FR=A_,kR=new _,VR=new ce$1,zR=new qs;function __(e){let a=!1;return e.scene.objects.traverse((i,o)=>{o.type==="Mesh"&&o.geometry.type==="TextGeometry"&&(a=!0)}),a}var yf=class extends ur{constructor(e,a,i){super(e,a,i),this.data=a}get textGeometry(){return this.geometry}get charWidths(){return this.textGeometry.charWidths}get charCoords(){return this.textGeometry.charCoords}get wrappedText(){return this.textGeometry.wrappedText}get font(){return this.textGeometry.font}get initialOffsetY(){var a;let e=this.dataPatched;return((a=this.font)==null?void 0:a.getLineInitialOffsetY(this.lineHeight,this.wrappedText.length,e.geometry.height,this.fontScale,e.geometry.verticalAlign))??0}get fontScale(){let e=this.dataPatched;return this.font?e.geometry.fontSize/this.font.unitsPerEm:1}get AD(){return Math.abs(this.ascender-this.descender)}get ascender(){var e;return(((e=this.font)==null?void 0:e.ascender)??1)*this.fontScale}get descender(){var e;return(((e=this.font)==null?void 0:e.descender)??1)*this.fontScale}get lineHeight(){let e=this.dataPatched;return e.geometry.fontSize*e.geometry.lineHeight}raycast(e,a){let{matrixWorld:i}=this;if(!(isNaN(e.ray.origin.x)||this.scale.x===0||this.scale.y===0||this.scale.z===0)&&(VR.copy(i).invert(),zR.copy(e.ray).applyMatrix4(VR),zR.intersectBox(this.singleBBox,kR))){let o=kR.applyMatrix4(i),c=e.ray.origin.distanceTo(o);a.push({distance:c,point:o.clone(),object:this})}}},In=1e-4,Xo,jR,HR,WR,UR=new _,GR=new _;q0.then(e=>{Xo=e,jR=[Xo.get_face_center,Xo.get_edge_midpoint,Xo.get_vertex_position],HR=[Xo.get_face_normal,Xo.get_edge_normal,Xo.get_vertex_normal],WR=[Xo.face_count,Xo.edge_count,Xo.vertex_count]});var lX=new ce$1,cX=new ce$1,Kl=new _,ru=new _,jm=new _,E_=new _,uX=new _,hX=new _,Ha=new FR,Ji=class extends Md(_t){constructor(e,a){super(),this.parameters=a,this.objectForSample=void 0,this._pendingMediaLoad=!1,this.object=e}resetOnMove(){this.removeFromParent(),this.parent=null}expandClones(e){if(this.parent===null)this.updateState(this.parameters,e);else for(let a of this.children)a instanceof Vr&&a.expand()}invalidateTransform(e){this.matrixWorldNeedsUpdate=!0,this.traverse(a=>{a instanceof Vr&&a.object===e&&(a.matrixWorldNeedsUpdate=!0)})}onObjUpdateMatrix(){this.parameters.type!=="toObject"&&(this.matrixWorldNeedsUpdate=!0)}update(){switch(this._updateCount(),this.parameters.type){case"radial":this._updateRadial(this.parameters);break;case"linear":this._updateLinear(this.parameters);break;case"grid":this._updateGrid(this.parameters);break;case"toObject":this._updateToObject(this.parameters)}for(let e of this.children)e.updateMatrix(),e.hasNonUniformScale&&(e.updateMatrixWorld(),e.updateMatrixWorldSVD())}_updateCount(e){let a;if(e!==void 0?a=e:a=this.parameters.type==="grid"?Math.round(this.parameters.grid.count[0])*Math.round(this.parameters.grid.count[1])*Math.round(this.parameters.grid.count[2]):this.parameters.count,this.parameters.type==="toObject"&&!this.parameters.toObject.object&&(a=0),this.parameters.type==="toObject"&&this.objectForSample){for(let o=0,c=this.children.length;o<c;++o)this.remove(this.children[0]);let i=this.children;if(i.length===a)return;if(i.length<a)for(let o=0,c=a-i.length;o<c;++o){let d=new Vr(this.object);d.expand(),this.add(d)}else for(let o=0,c=i.length-a;o<c;++o)this.remove(i[o])}else{if(this.children.length===a)return;if(this.children.length<a)for(let i=0,o=a-this.children.length;i<o;++i){let c=new Vr(this.object);c.expand(),this.add(c)}else for(let i=0,o=this.children.length-a;i<o;++i)this.remove(this.children[0])}}_updateRadial(e){let a=e.radial,i=a.start*Me.DEG2RAD,o=a.end*Me.DEG2RAD,c=i-o,d=new or$1(a.rotation[0],a.rotation[1],a.rotation[2]),g;switch(a.axis){case"z":g=new _(0,0,1);break;case"y":g=new _(0,1,0);break;default:case"x":g=new _(1,0,0);break}let b=e.randomnessObject??Bo.defaultData([1,1,1]).randomnessObject,j=b.noiseType==="perlin";Ha.noiseSeed(b.seed);let $=M0((0,vf.default)(b.seed)),rt=Gm(b.strength,this.parameters.randomness);for(let[_e,st]of this.children.entries()){let ut=_e*(b.freqScale/10)+b.movement,gt=j?Ha.noise(ut):$(ut,ut),yt=_e+1;st.scale.x=a.scale[0]+rt(yt,xt(gt,b.scale[0]))||In,st.scale.y=a.scale[1]+rt(yt,xt(gt,b.scale[1]))||In,st.scale.z=a.scale[2]+rt(yt,xt(gt,b.scale[2]))||In,st.position.setScalar(0);let Pt=c/e.count*_e-i;switch(a.axis){case"x":st.rotation.set(0,Pt,0);break;case"y":st.rotation.set(0,0,Pt);break;case"z":st.rotation.set(Pt,0,0);break}st.translateOnAxis(g,a.radius),st.position.x+=a.position[0]+rt(yt,xt(gt,b.position[0])),st.position.y+=a.position[1]+rt(yt,xt(gt,b.position[1])),st.position.z+=a.position[2]+rt(yt,xt(gt,b.position[2]));let wt=rt(yt,xt(gt,b.rotation[0])),Ct=rt(yt,xt(gt,b.rotation[1])),At=rt(yt,xt(gt,b.rotation[2]));a.alignment===!0?(st.rotation.x+=d.x+wt,st.rotation.y+=d.y+Ct,st.rotation.z+=d.z+At):st.rotation.set(d.x+wt,d.y+Ct,d.z+At)}}_updateLinear(e){if(e.type!=="linear")throw new Error;let a=e.linear,i=new or$1(a.rotation[0],a.rotation[1],a.rotation[2]),o=e.randomnessObject??Bo.defaultData([1,1,1]).randomnessObject,c=o.noiseType==="perlin";Ha.noiseSeed(o.seed);let d=M0((0,vf.default)(o.seed)),g=Gm(o.strength,this.parameters.randomness);for(let[b,j]of this.children.entries()){let $=b*(o.freqScale/10)+o.movement,rt=c?Ha.noise($):d($,$),_e=b+1,st=g(_e,xt(rt,o.rotation[0])),ut=g(_e,xt(rt,o.rotation[1])),gt=g(_e,xt(rt,o.rotation[2]));j.scale.x=1+(a.scale[0]-1)*b+g(_e,xt(rt,o.scale[0]))||In,j.scale.y=1+(a.scale[1]-1)*b+g(_e,xt(rt,o.scale[1]))||In,j.scale.z=1+(a.scale[2]-1)*b+g(_e,xt(rt,o.scale[2]))||In,j.rotation.x=i.x*b+st,j.rotation.y=i.y*b+ut,j.rotation.z=i.z*b+gt,j.position.x=a.position[0]*b+g(_e,xt(rt,o.position[0])),j.position.y=a.position[1]*b+g(_e,xt(rt,o.position[1])),j.position.z=a.position[2]*b+g(_e,xt(rt,o.position[2]))}}_updateGrid(e){let a=0,i=e.grid,o=e.randomnessObject??Bo.defaultData([1,1,1]).randomnessObject,c=Gm(o.strength,this.parameters.randomness),d=o.noiseType==="perlin";Ha.noiseSeed(o.seed);let g=DO((0,vf.default)(o.seed));if(i.useCenter===!0){let b={x:i.count[0]%2===0?2:1,y:i.count[1]%2===0?2:1,z:i.count[2]%2===0?2:1},j=new _(i.size[0]*(i.count[0]-b.x)*.5,i.size[1]*(i.count[1]-b.y)*.5,i.size[2]*(i.count[2]-b.z)*.5);for(let $=0;$<i.count[0];$++)for(let rt=0;rt<i.count[1];rt++)for(let _e=0;_e<i.count[2];_e++){let st=[($+1)*(o.freqScale/10)+o.movement,(rt+1)*(o.freqScale/10)+o.movement,(_e+1)*(o.freqScale/10)+o.movement],ut=d?Ha.noise(...st):g(...st),gt=this.children[a++];gt.scale.x=1+c(a,xt(ut,o.scale[0]))||In,gt.scale.y=1+c(a,xt(ut,o.scale[1]))||In,gt.scale.z=1+c(a,xt(ut,o.scale[2]))||In;let yt=c(a,xt(ut,o.rotation[0])),Pt=c(a,xt(ut,o.rotation[1])),wt=c(a,xt(ut,o.rotation[2]));gt.rotation.set(yt,Pt,wt),gt.position.x=i.size[0]*$-j.x+c(a,xt(ut,o.position[0])),gt.position.y=i.size[1]*rt-j.y+c(a,xt(ut,o.position[1])),gt.position.z=i.size[2]*_e-j.z+c(a,xt(ut,o.position[2]))}}else for(let b=0;b<i.count[0];b++)for(let j=0;j<i.count[1];j++)for(let $=0;$<i.count[2];$++){let rt=[(b+1)*(o.freqScale/10)+o.movement,(j+1)*(o.freqScale/10)+o.movement,($+1)*(o.freqScale/10)+o.movement],_e=d?Ha.noise(...rt):g(...rt),st=this.children[a++];st.scale.x=1+c(a,xt(_e,o.scale[0]))||In,st.scale.y=1+c(a,xt(_e,o.scale[1]))||In,st.scale.z=1+c(a,xt(_e,o.scale[2]))||In;let ut=c(a,xt(_e,o.rotation[0])),gt=c(a,xt(_e,o.rotation[1])),yt=c(a,xt(_e,o.rotation[2]));st.rotation.set(ut,gt,yt),st.position.x=i.size[0]*b+c(a,xt(_e,o.position[0])),st.position.y=-i.size[1]*j+c(a,xt(_e,o.position[1])),st.position.z=-i.size[2]*$+c(a,xt(_e,o.position[2]))}}_updateToObject(e){var yt;if(e.type!=="toObject")throw new Error;let{toObject:a}=e,i=new or$1(a.rotation[0],a.rotation[1],a.rotation[2]),o=e.randomnessObject??Bo.defaultData([1,1,1]).randomnessObject,c=o.noiseType==="perlin";Ha.noiseSeed(o.seed);let d=M0((0,vf.default)(o.seed)),g=Gm(o.strength,this.parameters.randomness);if(!a.object){for(let[,Pt]of this.children.entries())Pt.position.set(0,0,0),Pt.scale.setScalar(1),Pt.rotation.set(0,0,0);this.objectForSample=void 0;return}if(!this.objectForSample)return;if(this.objectForSample instanceof yf)if(!((yt=this.objectForSample.font)!=null&&yt.isLoaded)||this.objectForSample.geometry.attributes.position===void 0){this._pendingMediaLoad=!0;return}else this._pendingMediaLoad=!1;if(this.objectForSample.geometry===void 0&&this.objectForSample.isAncestorOf(this.object.uuid)){console.warn(`Oh no! The object "${this.object.name}" (${this.object.uuid}) seem to be a child/descendant of the object it's being cloned to. Please re-parent it so that they are siblings instead.`);return}let b=this.getSubdivData(),j=[],$=Pt=>{let wt=Pt.length,Ct=Pt.map(kt=>kt[0]).reduce((kt,It)=>kt+It,0),At=Pt.map(kt=>kt[1]).reduce((kt,It)=>kt+It,0),Tt=Pt.map(kt=>kt[2]).reduce((kt,It)=>kt+It,0);return[Ct/wt,At/wt,Tt/wt]},rt=Pt=>Math.round(Pt*1e6)/1e6;b.forEach(Pt=>{let wt=b.filter(Ct=>rt(Pt.pos[0])===rt(Ct.pos[0])&&rt(Pt.pos[1])===rt(Ct.pos[1])&&rt(Pt.pos[2])===rt(Ct.pos[2]));wt.length>1?j.push({pos:Pt.pos,norm:$(wt.map(Ct=>Ct.norm))}):j.push(Pt)});let _e=LR(j);if(_e.length>0){let Pt=Math.round(_e.length*a.count/100);this._updateCount(Pt)}else{let Pt=this.objectForSample.geometry.getAttribute("position");if(!Pt||isNaN(Pt.count)||Pt.count===0){console.warn(`Oh no! The object "${this.object.name}" (${this.object.uuid}) cannot be cloned on the surface of "${this.objectForSample.name}" (${this.objectForSample.uuid}) because the latter does not have a valid geometry.`);return}}this.objectForSample.updateMatrixWorld();let st=new C0(this.objectForSample).build(),ut=IR[a.axis],gt=this.children;st.setRandomGenerator((0,vf.default)(this.object.uuid+a.seed));for(let[Pt,wt]of gt.entries()){let Ct=Pt*(o.freqScale/10)+o.movement,At=c?Ha.noise(Ct):d(Ct,Ct),Tt=Pt+1,kt=g(Tt,xt(At,o.rotation[0])),It=g(Tt,xt(At,o.rotation[1])),Lt=g(Tt,xt(At,o.rotation[2]));a.spreadType==="random"?st.sample(jm,E_):(_e.length&&(jm.fromArray(_e[Pt].pos),E_.fromArray(_e[Pt].norm)),this.objectForSample instanceof ao&&jm.applyMatrix4(lX.copy(this.objectForSample.matrixWorld).invert())),jm.applyMatrix4(this.object.hiddenMatrix.clone().invert()),wt.position.copy(jm),Kl.fromArray(ut);let Ft=a.align==="normal"?E_:this.object.getWorldDirection(hX),Nt=ru.fromArray(a.position);ru.x+=ru.x+g(Tt,xt(At,o.position[0])),ru.y+=ru.y+g(Tt,xt(At,o.position[1])),ru.z+=ru.z+g(Tt,xt(At,o.position[2]));let Ht=Math.acos(Ft.dot(Kl)),Gr=uX.crossVectors(Kl,Ft).normalize(),hs=cX.makeRotationAxis(Gr,Ht),_s=Ft.clone().cross(this.object.up).normalize(),hn=_s.clone().cross(Ft).normalize(),Qn=new ce$1().makeBasis(_s,Ft,hn),ds=new _(Kl.y,Kl.z,Kl.x).normalize(),un=ds.clone().cross(Kl).normalize(),dr=new ce$1().makeBasis(ds,Kl,un).invert(),us=new ce$1().multiplyMatrices(Qn,dr);wt.rotation.setFromRotationMatrix(us),Nt.applyMatrix4(hs),wt.position.add(Nt),wt.rotation.x=wt.rotation.x+i.x+kt,wt.rotation.y=wt.rotation.y+i.y+It,wt.rotation.z=wt.rotation.z+i.z+Lt,wt.scale.setScalar(1),wt.scale.x=wt.scale.x+a.scale[0]+g(Tt,xt(At,o.scale[0]))||In,wt.scale.y=wt.scale.y+a.scale[1]+g(Tt,xt(At,o.scale[1]))||In,wt.scale.z=wt.scale.z+a.scale[2]+g(Tt,xt(At,o.scale[2]))||In,wt.scale.multiply(this.object.scale),wt.hiddenMatrix=this.object.hiddenMatrix}}getSubdivData(){if(!this.objectForSample)return[];let e=this.parameters.toObject.spreadType;if(e==="random")return[];if(this.objectForSample instanceof ao){let a=this.objectForSample,i=RR[e],o=WR[i],c=jR[i],d=HR[i],g=[],b=o(a.subdivPointerNew);for(let j=0;j<=b-1;j++){let $=c(a.subdivPointerNew,j),rt=d(a.subdivPointerNew,j);UR.fromArray($).applyMatrix4(a.matrixWorld),GR.fromArray(rt),g.push({pos:UR.toArray(),norm:GR.toArray()})}return g}else return(this.objectForSample.geometry.index?BR(this.objectForSample.geometry):NR(this.objectForSample.geometry)).map((a,i)=>e==="polygon_center"?{pos:a.midpoint,norm:a.norm}:e==="vertex"?[{pos:a.vertices[0],norm:a.norm},{pos:a.vertices[1],norm:a.norm},{pos:a.vertices[2],norm:a.norm}]:e==="edge"?[{pos:a.faceCenters[0],norm:a.norm},{pos:a.faceCenters[1],norm:a.norm},{pos:a.faceCenters[2],norm:a.norm}]:[]).flat()}updateState(e,a){var i;if(this.parameters=Ea(e),this.parameters.type!=="toObject")(this.parent===null||this.parent!==this.object)&&(this.removeFromParent(),(i=this.object.parent)==null||i.add(this),this.matrix=this.object.matrix,this.hiddenMatrix=this.object.hiddenMatrix,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1);else if(this.parent===null||this.parent.uuid!==this.parameters.toObject.object){this.removeFromParent();let o=a.find(this.parameters.toObject.object);o instanceof pr?this.objectForSample=o:this.objectForSample=void 0,this.matrix=new ce$1,this.hiddenMatrix=new ce$1,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1,o&&o.add(this)}this.update()}get pendingMediaLoad(){return this._pendingMediaLoad}},Qo=e=>{var a;return a=class extends e{},a.geometryHelper=new vi(30,30,30),a},yx=new qs,T_=new Br,qR=new ce$1,Ko=(e,a,i,o,c=!1)=>{let d=a,g=e.matrixWorld;if(d.boundingSphere===null&&d.computeBoundingSphere(),T_.copy(d.boundingSphere),T_.applyMatrix4(g),i.ray.intersectsSphere(T_)===!1||(qR.copy(g).invert(),yx.copy(i.ray).applyMatrix4(qR),d.boundingBox!==null&&yx.intersectsBox(d.boundingBox)===!1))return;let b,j,$,rt,_e=d.index,st=d.attributes.position,ut=d.drawRange,gt,yt;if(c===!1){let wt=Math.max(0,ut.start),Ct=Math.min(_e.count,ut.start+ut.count);for(gt=wt,yt=Ct;gt<yt;gt+=3)if(j=_e.getX(gt),$=_e.getX(gt+1),rt=_e.getX(gt+2),b=Pt(e,i,yx,st,j,$,rt),b){b.faceIndex=Math.floor(gt/3),o.push(b);return}}else{let wt=d.attributes.position,Ct=new _,At=new _,Tt=new _,kt=new _,It=2,Lt=1/((e.scale.x+e.scale.y+e.scale.z)/3),Ft=Lt*Lt,Nt=Math.max(0,ut.start),Ht=Math.min(wt.count,ut.start+ut.count);for(let Gr=Nt,hs=Ht-1;Gr<hs;Gr+=It){if(Ct.fromBufferAttribute(wt,Gr),At.fromBufferAttribute(wt,Gr+1),yx.distanceSqToSegment(Ct,At,kt,Tt)>Ft)continue;kt.applyMatrix4(e.matrixWorld);let _s=i.ray.origin.distanceTo(kt);_s<i.near||_s>i.far||o.push({distance:_s,point:Tt.clone().applyMatrix4(e.matrixWorld),object:e})}}function Pt(wt,Ct,At,Tt,kt,It,Lt){let Ft=new _,Nt=new _,Ht=new _,Gr=new _,hs=new _;if(Ft.fromBufferAttribute(Tt,kt),Nt.fromBufferAttribute(Tt,It),Ht.fromBufferAttribute(Tt,Lt),At.intersectTriangle(Ft,Nt,Ht,!1,Gr)===null)return null;hs.copy(Gr),hs.applyMatrix4(wt.matrixWorld);let _s=Ct.ray.origin.distanceTo(hs);return _s<Ct.near||_s>Ct.far?null:{faceIndex:1,distance:_s,point:hs.clone(),object:wt}}},vx=new _,Os=new rs,M_=class extends hl{constructor(e){let a=new Pe,i=new ys({color:16777215,vertexColors:!0,toneMapped:!1}),o=[],c=[],d={},g=new We(15711266),b=new We(15711266),j=new We(2857471);$("n1","n2",g),$("n2","n4",g),$("n4","n3",g),$("n3","n1",g),$("f1","f2",g),$("f2","f4",g),$("f4","f3",g),$("f3","f1",g),$("n1","f1",g),$("n2","f2",g),$("n3","f3",g),$("n4","f4",g),$("p","n1",b),$("p","n2",b),$("p","n3",b),$("p","n4",b),$("u1","u2",j),$("u2","u3",j),$("u3","u1",j);function $(_e,st,ut){rt(_e,ut),rt(st,ut)}function rt(_e,st){o.push(0,0,0),c.push(st.r,st.g,st.b),d[_e]===void 0&&(d[_e]=[]),d[_e].push(o.length/3-1)}a.setAttribute("position",new Te(o,3)),a.setAttribute("color",new Te(c,3)),super(a,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=d,this.update()}update(){let e=this.geometry,a=this.pointMap;Os.projectionMatrixInverse.elements=[.5112609807824982,-0,-0,-0,-0,.41421356237309503,-0,-0,-0,-0,-0,-.099999,-0,-0,-1.0000000000000002,.100001];let i=1,o=1,c=.8;lo("n1",a,e,Os,-i,-o,c),lo("n2",a,e,Os,i,-o,c),lo("n3",a,e,Os,-i,o,c),lo("n4",a,e,Os,i,o,c);let d=c;lo("f1",a,e,Os,-i,-o,d),lo("f2",a,e,Os,i,-o,d),lo("f3",a,e,Os,-i,o,d),lo("f4",a,e,Os,i,o,d);let g=d,b=.5;lo("u1",a,e,Os,i*.7*b,o*1.1,g),lo("u2",a,e,Os,-i*.7*b,o*1.1,g),lo("u3",a,e,Os,0,o*(1.1+.9*b),g),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function lo(e,a,i,o,c,d,g){vx.set(c,d,g).unproject(o);let b=a[e];if(b!==void 0){let j=i.getAttribute("position");for(let $=0,rt=b.length;$<rt;$++)j.setXYZ(b[$],vx.x,vx.y,vx.z)}}var xx=class extends Qo(M_){constructor(e){super(e),this.object=e,this.object=e,this.name=`CombinedCameraHelper: ${e.uuid}`}updateMatrixWorld(e){super.updateMatrixWorld(e),this.updateTarget()}updateTarget(){let e=this.object.getTarget();this.updateWorldMatrix(!0,!1),this.worldToLocal(e)}raycast(e,a){Ko(this.object,this.geometry,e,a,!0)}},bx;(e=>e.is=a=>"objectHelper"in a)(bx||(bx={}));var Is=(e,a)=>class extends Pd(e){constructor(){super(...arguments),this.objectHelper=new a(this),this.gizmos={}}get geometryHelper(){return a.geometryHelper}raycast(i,o){this.objectHelper.raycast(i,o)}showGizmos(){for(let i in this.gizmos){let o=this.gizmos[i];o instanceof vl&&(o.visible=!0)}}updateEntityBoxSize(i,o){this.objectHelper.visible&&this.geometryHelper instanceof vi?(i.setScalar(0),o.set(this.geometryHelper.parameters.width,this.geometryHelper.parameters.height,this.geometryHelper.parameters.height).multiplyScalar(.5)):super.updateEntityBoxSize(i,o)}hideGizmos(){for(let i in this.gizmos){let o=this.gizmos[i];o instanceof vl&&(o.visible=!1)}}},Sx=790,xf=new _,C_=new _,P_=new Qe,D_=new _,Hm=new _,O_=new _,wr$1=class extends Is(rs,xx){constructor(a="",i={...Vc.defaultData,name:""}){super(),this._cameraType="OrthographicCamera",this.targetOffset=Il.DefaultTargetOffset,this.isUpVectorFlipped=!1,this.angleOffsetFromUp=0,this.wasMovedByUser=!1,this.wasMovedBySwitchCameraAction=!1,this.super_Entity(a,i),this.previousProjectionMatrix=new ce$1,this.matrixAutoUpdate=!0,this.width=window.innerWidth,this.height=window.innerHeight;let o=this.width,c=this.height;this.orthoCamera=new Wu(o*-.5,o*.5,c*.5,c*-.5,-5e4,1e4),this.perspCamera=new ri(45,o/c,50,1e4),this.left=this.orthoCamera.left,this.right=this.orthoCamera.right,this.top=this.orthoCamera.top,this.bottom=this.orthoCamera.bottom,this.far=this.orthoCamera.far,this.view=this.orthoCamera.view,this.aspect=this.perspCamera.aspect,this.focus=this.perspCamera.focus,this.filmGauge=this.perspCamera.filmGauge,this.filmOffset=this.perspCamera.filmOffset,this.objectHelper.update()}get isPerspectiveCamera(){return this.cameraType==="PerspectiveCamera"}get isOrthographicCamera(){return!this.isPerspectiveCamera}get cameraType(){return this._cameraType}set fov(a){this.perspCamera.fov=a}get fov(){return this.perspCamera.fov}setNear(a,i){a==="PerspectiveCamera"?this.perspCamera.near=i:this.orthoCamera.near=i}setZoom(a,i){i>=0&&(a==="PerspectiveCamera"?this.perspCamera.zoom=i:this.orthoCamera.zoom=i)}set cameraType(a){a==="PerspectiveCamera"?this.toPerspective():a==="OrthographicCamera"&&this.toOrthographic()}get near(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.near:this.orthoCamera.near}set near(a){this._cameraType==="PerspectiveCamera"?this.perspCamera.near=a:this.orthoCamera.near=a}get zoom(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom:this.orthoCamera.zoom}set zoom(a){a>=0&&(this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom=a:this.orthoCamera.zoom=a)}lookAt(a,i,o){typeof a=="number"&&(a=new _(a,i,o)),super.lookAt(a),this.getWorldPosition(xf),this.targetOffset=xf.distanceTo(a)}getTarget(a=new _){return this.getWorldDirection(C_),this.getWorldPosition(xf),C_.multiplyScalar(this.targetOffset),a.copy(xf).add(C_),a}getDistanceToTarget(){let a=this.getTarget();return this.getWorldPosition(xf),xf.distanceTo(a)}updateUp(){this.getWorldQuaternion(P_),D_.set(0,0,1).applyQuaternion(P_),Hm.copy(_t.DEFAULT_UP),this.isUpVectorFlipped&&Hm.negate(),Hm.applyQuaternion(P_),O_.copy(_t.DEFAULT_UP).projectOnPlane(D_),this.angleOffsetFromUp=O_.angleTo(Hm),this.angleOffsetFromUp*=O_.cross(Hm).dot(D_)>=0?1:-1}updateTransformState(a,i){let o=super.updateTransformState(a,i);return a.isUpVectorFlipped!==void 0&&(this.isUpVectorFlipped=a.isUpVectorFlipped),this.updateUp(),o}getViewFrontToObject(a){let i=a.getWorldPosition(new _),o=a.getWorldDirection(new _).multiplyScalar(this.targetOffset);return{position:i.clone().add(o),target:i}}getViewToTarget(a){let i=this.getWorldDirection(new _).multiplyScalar(this.targetOffset);return{position:a.clone().sub(i),target:a}}getViewToObject(a){let i=new _;return a.getWorldPosition(i),this.getViewToTarget(i)}setViewplaneSize(a,i,o=!1){if(this.aspect=a/i,o){let c=a>i?this.aspect:1,d=a>i?1:this.aspect;this.left=-Sx*.5*c,this.right=Sx*.5*c,this.top=Sx*.5*(1/d),this.bottom=-Sx*.5*(1/d)}else this.left=-a*.5,this.right=a*.5,this.top=i*.5,this.bottom=-i*.5;this.updateProjectionMatrix()}copyViewPlaneSize(a){this.aspect=a.aspect,this.left=a.left,this.right=a.right,this.top=a.top,this.bottom=a.bottom,this.updateProjectionMatrix()}toOrthographic(){this.orthoCamera.left=this.left,this.orthoCamera.right=this.right,this.orthoCamera.top=this.top,this.orthoCamera.bottom=this.bottom,this.orthoCamera.view=this.view,this.orthoCamera.far=this.far,this.orthoCamera.updateProjectionMatrix(),this.projectionMatrix=this.orthoCamera.projectionMatrix,this.projectionMatrixInverse=this.orthoCamera.projectionMatrixInverse,this._cameraType="OrthographicCamera",this.objectHelper&&this.objectHelper.update()}toPerspective(){this.perspCamera.aspect=this.aspect,this.perspCamera.fov=this.fov,this.perspCamera.view=this.view,this.perspCamera.far=this.far,this.perspCamera.updateProjectionMatrix(),this.projectionMatrix=this.perspCamera.projectionMatrix,this.projectionMatrixInverse=this.perspCamera.projectionMatrixInverse,this._cameraType="PerspectiveCamera",this.objectHelper&&this.objectHelper.update()}setFocalLength(a){this.perspCamera.setFocalLength(a),this.toPerspective()}getFocalLength(){return this.perspCamera.getFocalLength()}getEffectiveFOV(){return this.perspCamera.getEffectiveFOV()}getFilmWidth(){return this.perspCamera.getFilmWidth()}getFilmHeight(){return this.perspCamera.getFilmHeight()}setViewOffset(a,i,o,c,d,g){this._cameraType==="PerspectiveCamera"?this.perspCamera.setViewOffset(a,i,o,c,d,g):this.orthoCamera.setViewOffset(a,i,o,c,d,g)}clearViewOffset(){this._cameraType==="PerspectiveCamera"?(this.perspCamera.clearViewOffset(),this.toPerspective()):(this.orthoCamera.clearViewOffset(),this.toOrthographic())}copyHistory(){this.previousProjectionMatrix&&this.previousProjectionMatrix.copy(this.projectionMatrix)}updateProjectionMatrix(){this._cameraType==="PerspectiveCamera"?this.toPerspective():this._cameraType==="OrthographicCamera"&&this.toOrthographic()}updateMatrixWorld(a){super.updateMatrixWorld(a),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(a,i){super.updateWorldMatrix(a,i),this.matrixWorldInverse.copy(this.matrixWorld).invert()}copy(a,i){return super.copy(a,i),this.parent=a.parent,this.orthoCamera.copy(a.orthoCamera),this.perspCamera.copy(a.perspCamera),this.left=a.left,this.right=a.right,this.top=a.top,this.bottom=a.bottom,this.far=a.far,this.view=a.view===null?null:Object.assign({},a.view),this._cameraType=a._cameraType,this.aspect=a.aspect,this.fov=a.fov,this.focus=a.focus,this.filmGauge=a.filmGauge,this.filmOffset=a.filmOffset,this.targetOffset=a.targetOffset,this.updateProjectionMatrix(),this}toCameraState(a=[]){let i={type:this.cameraType,far:this.far,orthographic:{near:this.orthoCamera.near,zoom:this.orthoCamera.zoom},perspective:{near:this.perspCamera.near,fov:this.perspCamera.fov,zoom:this.perspCamera.zoom},up:this.up.toArray(),targetOffset:this.targetOffset,isUpVectorFlipped:this.isUpVectorFlipped};return Vh(i,a)}updateCameraSubtype(a,i){let o=a==="perspective"?"PerspectiveCamera":"OrthographicCamera";i.zoom!==void 0&&this.setZoom(o,i.zoom),i.near!==void 0&&this.setNear(o,i.near),i.fov!==void 0&&o==="PerspectiveCamera"&&(this.fov=i.fov)}updateState(a,i){this.updateCameraState(a,i)}updateCameraState(a,i){this.updateState_Entity(a,i),a.far!==void 0&&(this.far=a.far),a.orthographic!==void 0&&this.updateCameraSubtype("orthographic",a.orthographic),a.perspective!==void 0&&this.updateCameraSubtype("perspective",a.perspective),a.type!==void 0&&(this.cameraType=a.type),a.up!==void 0&&this.up.fromArray(a.up),a.targetOffset!==void 0&&(this.targetOffset=a.targetOffset),a.isUpVectorFlipped!==void 0&&(this.isUpVectorFlipped=a.isUpVectorFlipped),this.updateProjectionMatrix()}updateByPatchedOp(a,i,o){super.updateByPatchedOp(a,i,o),a.path.length===1&&a.type===0&&this.updateCameraSubtype(a.path[0],a.props)}toState(a){return{...super.toState(a),...this.toCameraState(a),type:this.cameraType}}},bf=new ce$1,fX=new ce$1,wx=new ce$1,YR=new _,XR=new _;function I_(e){let a=!1;return e.scene.objects.traverse((i,o)=>{var c;((c=o.geometry)==null?void 0:c.type)==="BooleanGeometry"&&(a=!0)}),a}var qn=class extends Ps{constructor(e,a,i){super(e,a),this.data=a,this.meshSetAddresses=[],this.needsTransformForDownstream=!1,this.geometry=new Pe,this.onAfterRender=(o,c,d,g,b,j)=>{super.onAfterRender(o,c,d,g,b,j),this.recomputeBoolean()},this.geometry.userData.parameters={width:0,height:0,depth:0}}get booleanOp(){return this.data.geometry.operation}get phongAngle(){return this.data.geometry.phongAngle??45}get isLOD(){return this.recomputeBoolean(),!1}updateByPatchedOp(e,a,i){super.updateByPatchedOp(e,a,i),e.path.length===1&&e.path[0]==="geometry"&&e.type===0&&e.props.operation!==void 0&&(this.freeBooleanPointer(),this.resetBBoxNeedsUpdate())}freeBooleanPointer(){super.freeBooleanPointer(),this.geometry.dispose()}recomputeBoolean(e,a=!0){var o;if(this.booleanMeshSetAddress!==-1&&!e)return;for(let c=0;c<this.children.length;c++){let d=this.children[c];d instanceof qn&&d.dataPatched.visible===!0&&d.recomputeBoolean(e===!0,a)}this.meshSetAddresses=[];for(let c=0;c<this.children.length;c++){let d=this.children[c];if(d instanceof pr&&d.dataPatched.visible===!0&&((o=d.geometry.attributes.position)==null?void 0:o.count)>0&&d.geometry.drawRange.count>0&&d.booleanMeshSetAddress!==0){bf.multiplyMatrices(d.hiddenMatrix,d.matrix);try{if(d.booleanMeshSetAddress===-1){if((d.geometry.index??d.geometry.getAttribute("position")).count/3<15e5&&(d.booleanMeshSetAddress=Ms.getMeshSet(d.geometry,e===!0,a)),d.booleanMeshSetAddress===-1)return;Ms.transformMeshSet(d.booleanMeshSetAddress,bf),d.booleanMatrixInvOld.copy(bf).invert(),d.booleanWasTransformed=!1}else d instanceof qn&&d.needsTransformForDownstream===!0?(Ms.transformMeshSet(d.booleanMeshSetAddress,bf),d.needsTransformForDownstream=!1):d.booleanWasTransformed===!0&&(Ms.transformMeshSet(d.booleanMeshSetAddress,fX.multiplyMatrices(bf,d.booleanMatrixInvOld)),d.booleanMatrixInvOld.copy(bf).invert(),d.booleanWasTransformed=!1)}catch(g){console.error(g),d.booleanMeshSetAddress=0,d.geometry.userData.booleanOperationDidFail=!0;continue}Ms.hasOpenEdges(d.booleanMeshSetAddress)===!1||c===this.children.length-1&&this.booleanOp===2?(this.meshSetAddresses.push(d.booleanMeshSetAddress),d.geometry.userData.booleanOperationDidFail=!1):d.geometry.userData.booleanOperationDidFail="openEdges"}}if(this.meshSetAddresses.length===0){this.geometry.setAttribute("position",new Te([],0)),this.geometry.setDrawRange(0,0);return}if(e===!0)return Ms.calcBooleanTopological(this.meshSetAddresses,this.booleanOp);let i=this.geometry;i.dispose(),this.geometry=new Pe,this.geometry.userData=i.userData,this.geometry.boundingSphere=i.boundingSphere;try{this.booleanMeshSetAddress=Ms.calcBoolean(this.meshSetAddresses,this.booleanOp,this.geometry,this.phongAngle)}catch(c){this.booleanMeshSetAddress=0,this.geometry.userData.booleanOperationDidFail=!0,console.error(c)}this.booleanMatrixInvOld.copy(this.matrix).invert(),this.needsTransformForDownstream=!0,pf(this),mf(this)}dispose(){super.dispose(),this.geometry.dispose()}get recursiveBBox(){var a;let e=super.recursiveBBox;return((a=this.geometry.boundingSphere)==null?void 0:a.radius)===-1&&(e.getCenter(this.geometry.boundingSphere.center),wx.copy(this.matrixWorld).invert(),this.geometry.boundingSphere.center.applyMatrix4(wx),YR.copy(e.max).applyMatrix4(wx),XR.copy(e.min).applyMatrix4(wx),this.geometry.boundingSphere.radius=YR.distanceTo(XR)/2),e}},Ax;(e=>{function a(i){return vt.is(i)&&i instanceof gl}e.is=a})(Ax||(Ax={}));var Sf=(e,a)=>class extends Is(e,a){updateState_Light(i,o){this.updateState_Entity(i,o),i.color!==void 0&&(this.color=o.shared.color(i.color)),i.intensity!==void 0&&(this.intensity=i.intensity),i.depth!==void 0&&(this.shadow.camera.far=i.depth,this.shadow.needsUpdate=!0),i.shadows!==void 0&&(this.castShadow=i.shadows)}},mn=e=>e instanceof pr,Rn=e=>e!==null&&e instanceof qn,QR=e=>e instanceof wr$1,KR=e=>Ax.is(e),Wm=e=>bx.is(e),Rs=class extends Qo(Uy){constructor(e,a=15){super(a),this.object=e,this.object.updateMatrixWorld(),this.name=`EmptyObjectHelper: ${e.uuid}`,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.object.isBone&&(this.visible=!1)}raycast(e,a){Ko(this.object,Rs.geometryHelper,e,a)}update(){}},Ls=class extends Is(ps,Rs){constructor(e,a){super(),this.super_Entity(e,a),this.objectHelper.update()}updateState(e,a){this.updateState_Entity(e,a),"buffer"in e&&Object.keys(e).length===1&&a.scene.reloadSplats()}},iu=class extends Is(ps,Rs){constructor(e,a,i){super(),this.super_Entity(e,a),this.context=i,this.objectHelper.update()}updateState(e,a){this.updateState_Entity(e,a)}},i3={RED:0,GREEN:1,BLUE:2,ALPHA:3},qm="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",pX=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform lowp sampler2D cocBuffer;uniform vec2 texelSize;uniform float scale;
#if PASS == 1
uniform vec4 kernel64[32];
#else
uniform vec4 kernel16[8];
#endif
varying vec2 vUv;void main(){
#ifdef FOREGROUND
vec2 CoCNearFar=texture2D(cocBuffer,vUv).rg;float CoC=CoCNearFar.r*scale;
#else
float CoC=texture2D(cocBuffer,vUv).g*scale;
#endif
if(CoC==0.0){gl_FragColor=texture2D(inputBuffer,vUv);}else{
#ifdef FOREGROUND
vec2 step=texelSize*max(CoC,CoCNearFar.g*scale);
#else
vec2 step=texelSize*CoC;
#endif
#if PASS == 1
vec4 acc=vec4(0.0);for(int i=0;i<32;++i){vec4 kernel=kernel64[i];vec2 uv=step*kernel.xy+vUv;acc+=texture2D(inputBuffer,uv);uv=step*kernel.zw+vUv;acc+=texture2D(inputBuffer,uv);}gl_FragColor=acc/64.0;
#else
vec4 maxValue=texture2D(inputBuffer,vUv);for(int i=0;i<8;++i){vec4 kernel=kernel16[i];vec2 uv=step*kernel.xy+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);uv=step*kernel.zw+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);}gl_FragColor=maxValue;
#endif
}}`,_x=class extends lt{constructor(e=!1,a=!1){super({name:"BokehMaterial",defines:{PASS:e?"2":"1"},uniforms:{kernel64:new he(null),kernel16:new he(null),inputBuffer:new he(null),cocBuffer:new he(null),texelSize:new he(new z$2),scale:new he(1)},blending:er,depthWrite:!1,depthTest:!1,fragmentShader:pX,vertexShader:qm}),this.toneMapped=!1,a&&(this.defines.FOREGROUND="1"),this.generateKernel()}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}set cocBuffer(e){this.uniforms.cocBuffer.value=e}setCoCBuffer(e){this.uniforms.cocBuffer.value=e}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(e){return this.uniforms.scale.value=e}setScale(e){this.uniforms.scale.value=e}generateKernel(){let e=2.39996323,a=new Float32Array(128),i=new Float32Array(32),o=0,c=0;for(let b=0;b<80;++b){let j=b*e,$=Math.sqrt(b)/Math.sqrt(80),rt=$*Math.cos(j),_e=$*Math.sin(j);b%5===0?(i[c++]=rt,i[c++]=_e):(a[o++]=rt,a[o++]=_e)}let d=[],g=[];for(let b=0;b<128;)d.push(new Ke(a[b++],a[b++],a[b++],a[b++]));for(let b=0;b<32;)g.push(new Ke(i[b++],i[b++],i[b++],i[b++]));this.uniforms.kernel64.value=d,this.uniforms.kernel16.value=g}setTexelSize(e,a){this.uniforms.texelSize.value.set(e,a)}setSize(e,a){this.uniforms.texelSize.value.set(1/e,1/a)}};function ZR(e,a,i){return e*(a-i)-a}function F_(e,a,i){return Math.min(Math.max((e+a)/(a-i),0),1)}var mX=`#include <common>
#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform float focusDistance;uniform float focusRange;uniform float cameraNear;uniform float cameraFar;varying vec2 vUv;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}void main(){float depth=readDepth(vUv);
#ifdef PERSPECTIVE_CAMERA
float viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);
#else
float linearDepth=depth;
#endif
float signedDistance=linearDepth-focusDistance;float magnitude=smoothstep(0.0,focusRange,abs(signedDistance));gl_FragColor.rg=magnitude*vec2(step(signedDistance,0.0),step(0.0,signedDistance));}`,gX=class extends lt{constructor(e){super({name:"CircleOfConfusionMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new he(null),focusDistance:new he(0),focusRange:new he(0),cameraNear:new he(.3),cameraFar:new he(1e3)},blending:er,depthWrite:!1,depthTest:!1,fragmentShader:mX,vertexShader:qm}),this.toneMapped=!1,this.uniforms.focalLength=this.uniforms.focusRange,this.adoptCameraSettings(e)}get near(){return this.uniforms.cameraNear.value}get far(){return this.uniforms.cameraFar.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,a=ji){this.depthBuffer=e,this.depthPacking=a}get focusDistance(){return this.uniforms.focusDistance.value}set focusDistance(e){this.uniforms.focusDistance.value=e}get worldFocusDistance(){return-ZR(this.focusDistance,this.near,this.far)}set worldFocusDistance(e){this.focusDistance=F_(-e,this.near,this.far)}getFocusDistance(e){this.uniforms.focusDistance.value=e}setFocusDistance(e){this.uniforms.focusDistance.value=e}get focalLength(){return this.focusRange}set focalLength(e){this.focusRange=e}get focusRange(){return this.uniforms.focusRange.value}set focusRange(e){this.uniforms.focusRange.value=e}get worldFocusRange(){return-ZR(this.focusRange,this.near,this.far)}set worldFocusRange(e){this.focusRange=F_(-e,this.near,this.far)}getFocalLength(e){return this.focusRange}setFocalLength(e){this.focusRange=e}adoptCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof ri?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},yX=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <encodings_fragment>
#include <dithering_fragment>
}`,vX="uniform vec2 texelSize;uniform vec2 halfTexelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize*vec2(kernel)+halfTexelSize)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",JR=class extends lt{constructor(e=new z$2){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new he(null),texelSize:new he(new z$2),halfTexelSize:new he(new z$2),kernel:new he(0),scale:new he(1)},blending:er,depthWrite:!1,depthTest:!1,fragmentShader:yX,vertexShader:vX}),this.toneMapped=!1,this.setTexelSize(e.x,e.y)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.inputBuffer=e}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(){return this.uniforms.scale.value}setScale(e){this.uniforms.scale.value=e}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(e){this.uniforms.kernel.value=e}setKernel(e){this.kernel=e}setTexelSize(e,a){this.uniforms.texelSize.value.set(e,a),this.uniforms.halfTexelSize.value.set(e,a).multiplyScalar(.5)}setSize(e,a){let i=this.uniforms;i.texelSize.value.set(1/e,1/a),i.halfTexelSize.value.copy(i.texelSize.value).multiplyScalar(.5)}},xX=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <encodings_fragment>
}`,bX=class extends lt{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new he(null),opacity:new he(1)},blending:er,depthWrite:!1,depthTest:!1,fragmentShader:xX,vertexShader:qm}),this.toneMapped=!1}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}getOpacity(e){return this.uniforms.opacity.value}setOpacity(e){this.uniforms.opacity.value=e}},SX=`varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if EDGE_DETECTION_MODE != 0
varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;
#endif
#if EDGE_DETECTION_MODE == 1
#include <common>
#endif
#if EDGE_DETECTION_MODE == 0 || PREDICATION_MODE == 1
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}vec3 gatherNeighbors(){float p=readDepth(vUv);float pLeft=readDepth(vUv0);float pTop=readDepth(vUv1);return vec3(p,pLeft,pTop);}
#elif PREDICATION_MODE == 2
uniform sampler2D predicationBuffer;vec3 gatherNeighbors(){float p=texture2D(predicationBuffer,vUv).r;float pLeft=texture2D(predicationBuffer,vUv0).r;float pTop=texture2D(predicationBuffer,vUv1).r;return vec3(p,pLeft,pTop);}
#endif
#if PREDICATION_MODE != 0
vec2 calculatePredicatedThreshold(){vec3 neighbours=gatherNeighbors();vec2 delta=abs(neighbours.xx-neighbours.yz);vec2 edges=step(PREDICATION_THRESHOLD,delta);return PREDICATION_SCALE*EDGE_THRESHOLD*(1.0-PREDICATION_STRENGTH*edges);}
#endif
#if EDGE_DETECTION_MODE != 0
uniform sampler2D inputBuffer;
#endif
void main(){
#if EDGE_DETECTION_MODE == 0
const vec2 threshold=vec2(DEPTH_THRESHOLD);
#elif PREDICATION_MODE != 0
vec2 threshold=calculatePredicatedThreshold();
#else
const vec2 threshold=vec2(EDGE_THRESHOLD);
#endif
#if EDGE_DETECTION_MODE == 0
vec3 neighbors=gatherNeighbors();vec2 delta=abs(neighbors.xx-vec2(neighbors.y,neighbors.z));vec2 edges=step(threshold,delta);if(dot(edges,vec2(1.0))==0.0){discard;}gl_FragColor=vec4(edges,0.0,1.0);
#elif EDGE_DETECTION_MODE == 1
float l=luminance(texture2D(inputBuffer,vUv).rgb);float lLeft=luminance(texture2D(inputBuffer,vUv0).rgb);float lTop=luminance(texture2D(inputBuffer,vUv1).rgb);vec4 delta;delta.xy=abs(l-vec2(lLeft,lTop));vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}float lRight=luminance(texture2D(inputBuffer,vUv2).rgb);float lBottom=luminance(texture2D(inputBuffer,vUv3).rgb);delta.zw=abs(l-vec2(lRight,lBottom));vec2 maxDelta=max(delta.xy,delta.zw);float lLeftLeft=luminance(texture2D(inputBuffer,vUv4).rgb);float lTopTop=luminance(texture2D(inputBuffer,vUv5).rgb);delta.zw=abs(vec2(lLeft,lTop)-vec2(lLeftLeft,lTopTop));maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges.xy*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);
#elif EDGE_DETECTION_MODE == 2
vec4 delta;vec3 c=texture2D(inputBuffer,vUv).rgb;vec3 cLeft=texture2D(inputBuffer,vUv0).rgb;vec3 t=abs(c-cLeft);delta.x=max(max(t.r,t.g),t.b);vec3 cTop=texture2D(inputBuffer,vUv1).rgb;t=abs(c-cTop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}vec3 cRight=texture2D(inputBuffer,vUv2).rgb;t=abs(c-cRight);delta.z=max(max(t.r,t.g),t.b);vec3 cBottom=texture2D(inputBuffer,vUv3).rgb;t=abs(c-cBottom);delta.w=max(max(t.r,t.g),t.b);vec2 maxDelta=max(delta.xy,delta.zw);vec3 cLeftLeft=texture2D(inputBuffer,vUv4).rgb;t=abs(c-cLeftLeft);delta.z=max(max(t.r,t.g),t.b);vec3 cTopTop=texture2D(inputBuffer,vUv5).rgb;t=abs(c-cTopTop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);
#endif
}`,wX=`uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;
#if EDGE_DETECTION_MODE != 0
varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;
#endif
void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,0.0);vUv1=vUv+texelSize*vec2(0.0,-1.0);
#if EDGE_DETECTION_MODE != 0
vUv2=vUv+texelSize*vec2(1.0,0.0);vUv3=vUv+texelSize*vec2(0.0,1.0);vUv4=vUv+texelSize*vec2(-2.0,0.0);vUv5=vUv+texelSize*vec2(0.0,-2.0);
#endif
gl_Position=vec4(position.xy,1.0,1.0);}`,wf={DEPTH:0,LUMA:1,COLOR:2},AX={DISABLED:0,DEPTH:1,CUSTOM:2},_X=class extends lt{constructor(e=new z$2,a=wf.COLOR){super({name:"EdgeDetectionMaterial",defines:{THREE_REVISION:ba$1.replace(/\D+/g,""),LOCAL_CONTRAST_ADAPTATION_FACTOR:"2.0",EDGE_THRESHOLD:"0.1",DEPTH_THRESHOLD:"0.01",PREDICATION_MODE:"0",PREDICATION_THRESHOLD:"0.01",PREDICATION_SCALE:"2.0",PREDICATION_STRENGTH:"1.0",DEPTH_PACKING:"0"},uniforms:{inputBuffer:new he(null),depthBuffer:new he(null),predicationBuffer:new he(null),texelSize:new he(e)},blending:er,depthWrite:!1,depthTest:!1,fragmentShader:SX,vertexShader:wX}),this.toneMapped=!1,this.edgeDetectionMode=a}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,a=ji){this.depthBuffer=e,this.depthPacking=a}get edgeDetectionMode(){return Number(this.defines.EDGE_DETECTION_MODE)}set edgeDetectionMode(e){this.defines.EDGE_DETECTION_MODE=e.toFixed(0),this.needsUpdate=!0}getEdgeDetectionMode(){return this.edgeDetectionMode}setEdgeDetectionMode(e){this.edgeDetectionMode=e}get localContrastAdaptationFactor(){return Number(this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR)}set localContrastAdaptationFactor(e){this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR=e.toFixed("6"),this.needsUpdate=!0}getLocalContrastAdaptationFactor(){return this.localContrastAdaptationFactor}setLocalContrastAdaptationFactor(e){this.localContrastAdaptationFactor=e}get edgeDetectionThreshold(){return Number(this.defines.EDGE_THRESHOLD)}set edgeDetectionThreshold(e){this.defines.EDGE_THRESHOLD=e.toFixed("6"),this.defines.DEPTH_THRESHOLD=(e*.1).toFixed("6"),this.needsUpdate=!0}getEdgeDetectionThreshold(){return this.edgeDetectionThreshold}setEdgeDetectionThreshold(e){this.edgeDetectionThreshold=e}get predicationMode(){return Number(this.defines.PREDICATION_MODE)}set predicationMode(e){this.defines.PREDICATION_MODE=e.toFixed(0),this.needsUpdate=!0}getPredicationMode(){return this.predicationMode}setPredicationMode(e){this.predicationMode=e}set predicationBuffer(e){this.uniforms.predicationBuffer.value=e}setPredicationBuffer(e){this.uniforms.predicationBuffer.value=e}get predicationThreshold(){return Number(this.defines.PREDICATION_THRESHOLD)}set predicationThreshold(e){this.defines.PREDICATION_THRESHOLD=e.toFixed("6"),this.needsUpdate=!0}getPredicationThreshold(){return this.predicationThreshold}setPredicationThreshold(e){this.predicationThreshold=e}get predicationScale(){return Number(this.defines.PREDICATION_SCALE)}set predicationScale(e){this.defines.PREDICATION_SCALE=e.toFixed("6"),this.needsUpdate=!0}getPredicationScale(){return this.predicationScale}setPredicationScale(e){this.predicationScale=e}get predicationStrength(){return Number(this.defines.PREDICATION_STRENGTH)}set predicationStrength(e){this.defines.PREDICATION_STRENGTH=e.toFixed("6"),this.needsUpdate=!0}getPredicationStrength(){return this.predicationStrength}setPredicationStrength(e){this.predicationStrength=e}setSize(e,a){this.uniforms.texelSize.value.set(1/e,1/a)}},EX=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if THREE_REVISION >= 137
vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}FRAGMENT_HEADvoid main(){FRAGMENT_MAIN_UVvec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGEgl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <encodings_fragment>
#endif
#include <dithering_fragment>
}`,TX="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEADvoid main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORTgl_Position=vec4(position.xy,1.0,1.0);}",co={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},k_=class extends lt{constructor(e,a,i,o,c=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:ba$1.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new he(null),depthBuffer:new he(null),resolution:new he(new z$2),texelSize:new he(new z$2),cameraNear:new he(.3),cameraFar:new he(1e3),aspect:new he(1),time:new he(0)},blending:er,depthWrite:!1,depthTest:!1,dithering:c}),this.toneMapped=!1,e&&this.setShaderParts(e),a&&this.setDefines(a),i&&this.setUniforms(i),this.adoptCameraSettings(o)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,a=ji){this.depthBuffer=e,this.depthPacking=a}setShaderParts(e){return this.fragmentShader=EX.replace(co.FRAGMENT_HEAD,e.get(co.FRAGMENT_HEAD)).replace(co.FRAGMENT_MAIN_UV,e.get(co.FRAGMENT_MAIN_UV)).replace(co.FRAGMENT_MAIN_IMAGE,e.get(co.FRAGMENT_MAIN_IMAGE)),this.vertexShader=TX.replace(co.VERTEX_HEAD,e.get(co.VERTEX_HEAD)).replace(co.VERTEX_MAIN_SUPPORT,e.get(co.VERTEX_MAIN_SUPPORT)),this.needsUpdate=!0,this}setDefines(e){for(let a of e.entries())this.defines[a[0]]=a[1];return this.needsUpdate=!0,this}setUniforms(e){for(let a of e.entries())this.uniforms[a[0]]=a[1];return this}setExtensions(e){this.extensions={};for(let a of e)this.extensions[a]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(e){this.encodeOutput!==e&&(e?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(e){return this.encodeOutput}setOutputEncodingEnabled(e){this.encodeOutput=e}get time(){return this.uniforms.time.value}set time(e){this.uniforms.time.value=e}setDeltaTime(e){this.uniforms.time.value+=e}adoptCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof ri?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(e,a){let i=this.uniforms;i.resolution.value.set(e,a),i.texelSize.value.set(1/e,1/a),i.aspect.value=e/a}static get Section(){return co}},MX=`#include <common>
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l);
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*l,l);
#else
gl_FragColor=vec4(l);
#endif
}`,CX=class extends lt{constructor(e=!1,a=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:ba$1.replace(/\D+/g,"")},uniforms:{inputBuffer:new he(null),threshold:new he(0),smoothing:new he(1),range:new he(null)},blending:er,depthWrite:!1,depthTest:!1,fragmentShader:MX,vertexShader:qm}),this.toneMapped=!1,this.colorOutput=e,this.luminanceRange=a}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get threshold(){return this.uniforms.threshold.value}set threshold(e){this.smoothing>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=e}getThreshold(){return this.threshold}setThreshold(e){this.threshold=e}get smoothing(){return this.uniforms.smoothing.value}set smoothing(e){this.threshold>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=e}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(e){this.smoothing=e}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(e){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(e){e?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(e){return this.colorOutput}setColorOutputEnabled(e){this.colorOutput=e}get useRange(){return this.luminanceRange!==null}set useRange(e){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(e){e!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=e,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(e){this.luminanceRange=e}},PX$1=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef MASK_PRECISION_HIGH
uniform mediump sampler2D maskTexture;
#else
uniform lowp sampler2D maskTexture;
#endif
#if MASK_FUNCTION != 0
uniform float strength;
#endif
varying vec2 vUv;void main(){
#if COLOR_CHANNEL == 0
float mask=texture2D(maskTexture,vUv).r;
#elif COLOR_CHANNEL == 1
float mask=texture2D(maskTexture,vUv).g;
#elif COLOR_CHANNEL == 2
float mask=texture2D(maskTexture,vUv).b;
#else
float mask=texture2D(maskTexture,vUv).a;
#endif
#if MASK_FUNCTION == 0
#ifdef INVERTED
mask=step(mask,0.0);
#else
mask=1.0-step(mask,0.0);
#endif
#else
mask=clamp(mask*strength,0.0,1.0);
#ifdef INVERTED
mask=1.0-mask;
#endif
#endif
#if MASK_FUNCTION == 2
gl_FragColor=vec4(mask*texture2D(inputBuffer,vUv).rgb,mask);
#else
gl_FragColor=mask*texture2D(inputBuffer,vUv);
#endif
}`,n3={DISCARD:0,MULTIPLY:1,MULTIPLY_RGB_SET_ALPHA:2},DX=class extends lt{constructor(e=null){super({name:"MaskMaterial",uniforms:{maskTexture:new he(e),inputBuffer:new he(null),strength:new he(1)},blending:er,depthWrite:!1,depthTest:!1,fragmentShader:PX$1,vertexShader:qm}),this.toneMapped=!1,this.setColorChannel(i3.RED),this.setMaskFunction(n3.DISCARD)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}set maskTexture(e){this.uniforms.maskTexture.value=e,delete this.defines.MASK_PRECISION_HIGH,e.type!==Ir$1&&(this.defines.MASK_PRECISION_HIGH="1"),this.needsUpdate=!0}setMaskTexture(e){this.maskTexture=e}set colorChannel(e){this.defines.COLOR_CHANNEL=e.toFixed(0),this.needsUpdate=!0}setColorChannel(e){this.colorChannel=e}set maskFunction(e){this.defines.MASK_FUNCTION=e.toFixed(0),this.needsUpdate=!0}setMaskFunction(e){this.maskFunction=e}get inverted(){return this.defines.INVERTED!==void 0}set inverted(e){this.inverted&&!e?delete this.defines.INVERTED:e&&(this.defines.INVERTED="1"),this.needsUpdate=!0}isInverted(){return this.inverted}setInverted(e){this.inverted=e}get strength(){return this.uniforms.strength.value}set strength(e){this.uniforms.strength.value=e}getStrength(){return this.strength}setStrength(e){this.strength=e}},OX=`#define sampleLevelZeroOffset(t, coord, offset) texture2D(t, coord + offset * texelSize)
#if __VERSION__ < 300
#define round(v) floor(v + 0.5)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform lowp sampler2D areaTexture;uniform lowp sampler2D searchTexture;uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}vec2 decodeDiagBilinearAccess(in vec2 e){e.r=e.r*abs(5.0*e.r-5.0*0.75);return round(e);}vec4 decodeDiagBilinearAccess(in vec4 e){e.rb=e.rb*abs(5.0*e.rb-5.0*0.75);return round(e);}vec2 searchDiag1(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 searchDiag2(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);coord.x+=0.25*texelSize.x;vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;e=decodeDiagBilinearAccess(e);coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 areaDiag(const in vec2 dist,const in vec2 e,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE_DIAG,AREATEX_MAX_DISTANCE_DIAG)*e+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.x+=0.5;texCoord.y+=AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTexture,texCoord).rg;}vec2 calculateDiagWeights(const in vec2 texCoord,const in vec2 e,const in vec4 subsampleIndices){vec2 weights=vec2(0.0);vec4 d;vec2 end;if(e.r>0.0){d.xz=searchDiag1(texCoord,vec2(-1.0,1.0),end);d.x+=float(end.y>0.9);}else{d.xz=vec2(0.0);}d.yw=searchDiag1(texCoord,vec2(1.0,-1.0),end);if(d.x+d.y>2.0){vec4 coords=vec4(-d.x+0.25,d.x,d.y,-d.y-0.25)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.xy=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).rg;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).rg;c.yxwz=decodeDiagBilinearAccess(c.xyzw);vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.z);}d.xz=searchDiag2(texCoord,vec2(-1.0,-1.0),end);if(sampleLevelZeroOffset(inputBuffer,texCoord,vec2(1,0)).r>0.0){d.yw=searchDiag2(texCoord,vec2(1.0),end);d.y+=float(end.y>0.9);}else{d.yw=vec2(0.0);}if(d.x+d.y>2.0){vec4 coords=vec4(-d.x,-d.x,d.y,d.y)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.x=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).g;c.y=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(0,-1)).r;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).gr;vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.w).gr;}return weights;}float searchLength(const in vec2 e,const in float offset){vec2 scale=SEARCHTEX_SIZE*vec2(0.5,-1.0);vec2 bias=SEARCHTEX_SIZE*vec2(offset,1.0);scale+=vec2(-1.0,1.0);bias+=vec2(0.5,-0.5);scale*=1.0/SEARCHTEX_PACKED_SIZE;bias*=1.0/SEARCHTEX_PACKED_SIZE;return texture2D(searchTexture,scale*e+bias).r;}float searchXLeft(in vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x>end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(-2.0,0.0)*texelSize+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.0)+3.25;return texelSize.x*offset+texCoord.x;}float searchXRight(vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x<end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(2.0,0.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.5)+3.25;return-texelSize.x*offset+texCoord.x;}float searchYUp(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.y>end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=-vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.0)+3.25;return texelSize.y*offset+texCoord.y;}float searchYDown(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;i++){if(!(texCoord.y<end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.5)+3.25;return-texelSize.y*offset+texCoord.y;}vec2 area(const in vec2 dist,const in float e1,const in float e2,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.y=AREATEX_SUBTEX_SIZE*offset+texCoord.y;return texture2D(areaTexture,texCoord).rg;}void detectHorizontalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){
#if !defined(DISABLE_CORNER_DETECTION)
vec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,1)).r;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).r;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,-2)).r;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,-2)).r;weights*=clamp(factor,0.0,1.0);
#endif
}void detectVerticalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){
#if !defined(DISABLE_CORNER_DETECTION)
vec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(1,0)).g;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).g;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(-2,0)).g;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(-2,1)).g;weights*=clamp(factor,0.0,1.0);
#endif
}void main(){vec4 weights=vec4(0.0);vec4 subsampleIndices=vec4(0.0);vec2 e=texture2D(inputBuffer,vUv).rg;if(e.g>0.0){
#if !defined(DISABLE_DIAG_DETECTION)
weights.rg=calculateDiagWeights(vUv,e,subsampleIndices);if(weights.r==-weights.g){
#endif
vec2 d;vec3 coords;coords.x=searchXLeft(vOffset[0].xy,vOffset[2].x);coords.y=vOffset[1].y;d.x=coords.x;float e1=texture2D(inputBuffer,coords.xy).r;coords.z=searchXRight(vOffset[0].zw,vOffset[2].y);d.y=coords.z;d=round(resolution.xx*d+-vPixCoord.xx);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.zy,vec2(1,0)).r;weights.rg=area(sqrtD,e1,e2,subsampleIndices.y);coords.y=vUv.y;detectHorizontalCornerPattern(weights.rg,coords.xyzy,d);
#if !defined(DISABLE_DIAG_DETECTION)
}else{e.r=0.0;}
#endif
}if(e.r>0.0){vec2 d;vec3 coords;coords.y=searchYUp(vOffset[1].xy,vOffset[2].z);coords.x=vOffset[0].x;d.x=coords.y;float e1=texture2D(inputBuffer,coords.xy).g;coords.z=searchYDown(vOffset[1].zw,vOffset[2].w);d.y=coords.z;d=round(resolution.yy*d-vPixCoord.yy);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.xz,vec2(0,1)).g;weights.ba=area(sqrtD,e1,e2,subsampleIndices.x);coords.x=vUv.x;detectVerticalCornerPattern(weights.ba,coords.xyxz,d);}gl_FragColor=weights;}`,IX="uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void main(){vUv=position.xy*0.5+0.5;vPixCoord=vUv*resolution;vOffset[0]=vUv.xyxy+texelSize.xyxy*vec4(-0.25,-0.125,1.25,-0.125);vOffset[1]=vUv.xyxy+texelSize.xyxy*vec4(-0.125,-0.25,-0.125,1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*texelSize.xxyy*MAX_SEARCH_STEPS_FLOAT;gl_Position=vec4(position.xy,1.0,1.0);}",RX=class extends lt{constructor(e=new z$2,a=new z$2){super({name:"SMAAWeightsMaterial",defines:{MAX_SEARCH_STEPS_INT:"16",MAX_SEARCH_STEPS_FLOAT:"16.0",MAX_SEARCH_STEPS_DIAG_INT:"8",MAX_SEARCH_STEPS_DIAG_FLOAT:"8.0",CORNER_ROUNDING:"25",CORNER_ROUNDING_NORM:"0.25",AREATEX_MAX_DISTANCE:"16.0",AREATEX_MAX_DISTANCE_DIAG:"20.0",AREATEX_PIXEL_SIZE:"(1.0 / vec2(160.0, 560.0))",AREATEX_SUBTEX_SIZE:"(1.0 / 7.0)",SEARCHTEX_SIZE:"vec2(66.0, 33.0)",SEARCHTEX_PACKED_SIZE:"vec2(64.0, 16.0)"},uniforms:{inputBuffer:new he(null),searchTexture:new he(null),areaTexture:new he(null),resolution:new he(a),texelSize:new he(e)},blending:er,depthWrite:!1,depthTest:!1,fragmentShader:OX,vertexShader:IX}),this.toneMapped=!1}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get searchTexture(){return this.uniforms.searchTexture.value}set searchTexture(e){this.uniforms.searchTexture.value=e}get areaTexture(){return this.uniforms.areaTexture.value}set areaTexture(e){this.uniforms.areaTexture.value=e}setLookupTextures(e,a){this.searchTexture=e,this.areaTexture=a}get orthogonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_INT)}set orthogonalSearchSteps(e){let a=Math.min(Math.max(e,0),112);this.defines.MAX_SEARCH_STEPS_INT=a.toFixed("0"),this.defines.MAX_SEARCH_STEPS_FLOAT=a.toFixed("1"),this.needsUpdate=!0}setOrthogonalSearchSteps(e){this.orthogonalSearchSteps=e}get diagonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_DIAG_INT)}set diagonalSearchSteps(e){let a=Math.min(Math.max(e,0),20);this.defines.MAX_SEARCH_STEPS_DIAG_INT=a.toFixed("0"),this.defines.MAX_SEARCH_STEPS_DIAG_FLOAT=a.toFixed("1"),this.needsUpdate=!0}setDiagonalSearchSteps(e){this.diagonalSearchSteps=e}get diagonalDetection(){return this.defines.DISABLE_DIAG_DETECTION===void 0}set diagonalDetection(e){e?delete this.defines.DISABLE_DIAG_DETECTION:this.defines.DISABLE_DIAG_DETECTION="1",this.needsUpdate=!0}isDiagonalDetectionEnabled(){return this.diagonalDetection}setDiagonalDetectionEnabled(e){this.diagonalDetection=e}get cornerRounding(){return Number(this.defines.CORNER_ROUNDING)}set cornerRounding(e){let a=Math.min(Math.max(e,0),100);this.defines.CORNER_ROUNDING=a.toFixed("4"),this.defines.CORNER_ROUNDING_NORM=(a/100).toFixed("4"),this.needsUpdate=!0}setCornerRounding(e){this.cornerRounding=e}get cornerDetection(){return this.defines.DISABLE_CORNER_DETECTION===void 0}set cornerDetection(e){e?delete this.defines.DISABLE_CORNER_DETECTION:this.defines.DISABLE_CORNER_DETECTION="1",this.needsUpdate=!0}isCornerRoundingEnabled(){return this.cornerDetection}setCornerRoundingEnabled(e){this.cornerDetection=e}setSize(e,a){let i=this.uniforms;i.texelSize.value.set(1/e,1/a),i.resolution.value.set(e,a)}},LX=new rs,Zl=null;function BX(){if(Zl===null){let e=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),a=new Float32Array([0,0,2,0,0,2]);Zl=new Pe,Zl.setAttribute!==void 0?(Zl.setAttribute("position",new Xe(e,3)),Zl.setAttribute("uv",new Xe(a,2))):(Zl.addAttribute("position",new Xe(e,3)),Zl.addAttribute("uv",new Xe(a,2)))}return Zl}var wi=class{constructor(e="Pass",a=new Pi,i=LX){this.name=e,this.renderer=null,this.scene=a,this.camera=i,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){let a=this.getFullscreenMaterial();a!==null&&(a.needsUpdate=!0),this.rtt=!e}}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(e){let a=this.screen;a!==null?a.material=e:(a=new sr(BX(),e),a.frustumCulled=!1,this.scene===null&&(this.scene=new Pi),this.scene.add(a),this.screen=a)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,a=ji){}render(e,a,i,o,c){throw new Error("Render method not implemented!")}setSize(e,a){}initialize(e,a,i){}dispose(){for(let e of Object.keys(this)){let a=this[e];if(a!==null&&typeof a.dispose=="function"){if(a instanceof Pi||a===this.renderer)continue;this[e].dispose()}}}},Ym=class extends wi{constructor(e,a=!0){super("CopyPass"),this.fullscreenMaterial=new bX,this.needsSwap=!1,this.renderTarget=e,e===void 0&&(this.renderTarget=new ft(1,1,{minFilter:tt,magFilter:tt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=a}get resize(){return this.autoResize}set resize(e){this.autoResize=e}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(e){this.autoResize=e}render(e,a,i,o,c){this.fullscreenMaterial.inputBuffer=a.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,a){this.autoResize&&this.renderTarget.setSize(e,a)}initialize(e,a,i){i!==void 0&&(this.renderTarget.texture.type=i,i!==Ir$1?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":e.outputEncoding===at&&(this.renderTarget.texture.encoding=at))}},s3=class extends wi{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(e,a,i,o,c){let d=e.state.buffers.stencil;d.setLocked(!1),d.setTest(!1)}},R_=new We,V_=class extends wi{constructor(e=!0,a=!0,i=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=e,this.depth=a,this.stencil=i,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(e,a,i){this.color=e,this.depth=a,this.stencil=i}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(e){this.overrideClearColor=e}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(e){this.overrideClearAlpha=e}render(e,a,i,o,c){let d=this.overrideClearColor,g=this.overrideClearAlpha,b=e.getClearAlpha(),j=d!==null,$=g>=0;j?(R_.copy(e.getClearColor(R_)),e.setClearColor(d,$?g:b)):$&&e.setClearAlpha(g),e.setRenderTarget(this.renderToScreen?null:a),e.clear(this.color,this.depth,this.stencil),j?e.setClearColor(R_,b):$&&e.setClearAlpha(b)}},Jl=-1,Xn=class extends fr$2{constructor(e,a=Jl,i=Jl,o=1){super(),this.resizable=e,this.base=new z$2(1,1),this.preferred=new z$2(a,i),this.target=this.preferred,this.s=o}get width(){let{base:e,preferred:a,scale:i}=this,o;return a.width!==Jl?o=a.width:a.height!==Jl?o=Math.round(a.height*(e.width/Math.max(e.height,1))):o=Math.round(e.width*i),o}set width(e){this.preferredWidth=e}get height(){let{base:e,preferred:a,scale:i}=this,o;return a.height!==Jl?o=a.height:a.width!==Jl?o=Math.round(a.width/Math.max(e.width/Math.max(e.height,1),1)):o=Math.round(e.height*i),o}set height(e){this.preferredHeight=e}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(e){this.s!==e&&(this.s=e,this.preferred.setScalar(Jl),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getScale(){return this.scale}setScale(e){this.scale=e}get baseWidth(){return this.base.width}set baseWidth(e){this.base.width!==e&&(this.base.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseWidth(){return this.base.width}setBaseWidth(e){this.base.width!==e&&(this.base.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get baseHeight(){return this.base.height}set baseHeight(e){this.base.height!==e&&(this.base.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(e){this.baseHeight=e}setBaseSize(e,a){(this.base.width!==e||this.base.height!==a)&&(this.base.set(e,a),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get preferredWidth(){return this.preferred.width}set preferredWidth(e){this.preferred.width!==e&&(this.preferred.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(e){this.preferredWidth=e}get preferredHeight(){return this.preferred.height}set preferredHeight(e){this.preferred.height!==e&&(this.preferred.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(e){this.preferredHeight=e}setPreferredSize(e,a){(this.preferred.width!==e||this.preferred.height!==a)&&(this.preferred.set(e,a),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}copy(e){this.base.set(e.getBaseWidth(),e.getBaseHeight()),this.preferred.set(e.getPreferredWidth(),e.getPreferredHeight()),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height)}static get AUTO_SIZE(){return Jl}},L_=!1,$R=class{constructor(e=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(e),this.meshCount=0,this.replaceMaterial=a=>{if(a.isMesh){let i;if(a.material.flatShading)switch(a.material.side){case tn:i=this.materialsFlatShadedDoubleSide;break;case yi:i=this.materialsFlatShadedBackSide;break;default:i=this.materialsFlatShaded;break}else switch(a.material.side){case tn:i=this.materialsDoubleSide;break;case yi:i=this.materialsBackSide;break;default:i=this.materials;break}this.originalMaterials.set(a,a.material),a.isSkinnedMesh?a.material=i[2]:a.isInstancedMesh?a.material=i[1]:a.material=i[0],++this.meshCount}}}setMaterial(e){if(this.disposeMaterials(),this.material=e,e!==null){let a=this.materials=[e.clone(),e.clone(),e.clone()];for(let i of a)i.uniforms=Object.assign({},e.uniforms),i.side=es;a[2].skinning=!0,this.materialsBackSide=a.map(i=>{let o=i.clone();return o.uniforms=Object.assign({},e.uniforms),o.side=yi,o}),this.materialsDoubleSide=a.map(i=>{let o=i.clone();return o.uniforms=Object.assign({},e.uniforms),o.side=tn,o}),this.materialsFlatShaded=a.map(i=>{let o=i.clone();return o.uniforms=Object.assign({},e.uniforms),o.flatShading=!0,o}),this.materialsFlatShadedBackSide=a.map(i=>{let o=i.clone();return o.uniforms=Object.assign({},e.uniforms),o.flatShading=!0,o.side=yi,o}),this.materialsFlatShadedDoubleSide=a.map(i=>{let o=i.clone();return o.uniforms=Object.assign({},e.uniforms),o.flatShading=!0,o.side=tn,o})}}render(e,a,i){let o=e.shadowMap.enabled;if(e.shadowMap.enabled=!1,L_){let c=this.originalMaterials;this.meshCount=0,a.traverse(this.replaceMaterial),e.render(a,i);for(let d of c)d[0].material=d[1];this.meshCount!==c.size&&c.clear()}else{let c=a.overrideMaterial;a.overrideMaterial=this.material,e.render(a,i),a.overrideMaterial=c}e.shadowMap.enabled=o}disposeMaterials(){if(this.material!==null){let e=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(let a of e)a.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return L_}static set workaroundEnabled(e){L_=e}},NX=class extends wi{constructor(e,a,i=null){super("RenderPass",e,a),this.needsSwap=!1,this.clearPass=new V_,this.overrideMaterialManager=i===null?null:new $R(i),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}get renderToScreen(){return super.renderToScreen}set renderToScreen(e){super.renderToScreen=e,this.clearPass.renderToScreen=e}get overrideMaterial(){let e=this.overrideMaterialManager;return e!==null?e.material:null}set overrideMaterial(e){let a=this.overrideMaterialManager;e!==null?a!==null?a.setMaterial(e):this.overrideMaterialManager=new $R(e):a!==null&&(a.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(e){this.overrideMaterial=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getSelection(){return this.selection}setSelection(e){this.selection=e}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(e){this.ignoreBackground=e}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(e){this.skipShadowMapUpdate=e}getClearPass(){return this.clearPass}render(e,a,i,o,c){let d=this.scene,g=this.camera,b=this.selection,j=g.layers.mask,$=d.background,rt=e.shadowMap.autoUpdate,_e=this.renderToScreen?null:a;b!==null&&g.layers.set(b.getLayer()),this.skipShadowMapUpdate&&(e.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(d.background=null),this.clearPass.enabled&&this.clearPass.render(e,a),e.setRenderTarget(_e),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(e,d,g):e.render(d,g),g.layers.mask=j,d.background=$,e.shadowMap.autoUpdate=rt}},z_=class extends wi{constructor(e,a,{resolutionScale:i=1,width:o=Xn.AUTO_SIZE,height:c=Xn.AUTO_SIZE,renderTarget:d}={}){super("DepthPass"),this.needsSwap=!1,this.renderPass=new NX(e,a,new Mp({depthPacking:Mw}));let g=this.renderPass;g.skipShadowMapUpdate=!0,g.ignoreBackground=!0;let b=g.getClearPass();b.overrideClearColor=new We(16777215),b.overrideClearAlpha=1,this.renderTarget=d,this.renderTarget===void 0&&(this.renderTarget=new ft(1,1,{minFilter:Vt,magFilter:Vt,stencilBuffer:!1}),this.renderTarget.texture.name="DepthPass.Target");let j=this.resolution=new Xn(this,o,c,i);j.addEventListener("change",$=>this.setSize(j.baseWidth,j.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,a,i,o,c){let d=this.renderToScreen?null:this.renderTarget;this.renderPass.render(e,d)}setSize(e,a){let i=this.resolution;i.setBaseSize(e,a),this.renderTarget.setSize(i.width,i.height)}},Mt={SKIP:0,ADD:1,ALPHA:2,AVERAGE:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,EXCLUSION:8,LIGHTEN:9,MULTIPLY:10,DIVIDE:11,NEGATION:12,NORMAL:13,OVERLAY:14,REFLECT:15,SCREEN:16,SOFT_LIGHT:17,SUBTRACT:18},FX="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x+y,1.0)*opacity+x*(1.0-opacity);}",kX="vec3 blend(const in vec3 x,const in vec3 y,const in float opacity){return y*opacity+x*(1.0-opacity);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){float a=min(y.a,opacity);return vec4(blend(x.rgb,y.rgb,a),max(x.a,a));}",VX="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y)*0.5*opacity+x*(1.0-opacity);}",zX="float blend(const in float x,const in float y){return(y==0.0)?y:max(1.0-(1.0-x)/y,0.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",UX="float blend(const in float x,const in float y){return(y==1.0)?y:min(x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",GX="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x,y)*opacity+x*(1.0-opacity);}",jX="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return abs(x-y)*opacity+x*(1.0-opacity);}",HX="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y-2.0*x*y)*opacity+x*(1.0-opacity);}",WX="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x,y)*opacity+x*(1.0-opacity);}",qX="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return x*y*opacity+x*(1.0-opacity);}",YX="float blend(const in float x,const in float y){return(y>0.0)?min(x/y,1.0):1.0;}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",XX="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-abs(1.0-x-y))*opacity+x*(1.0-opacity);}",QX="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y*opacity+x*(1.0-opacity);}",KX="float blend(const in float x,const in float y){return(x<0.5)?(2.0*x*y):(1.0-2.0*(1.0-x)*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",ZX="float blend(const in float x,const in float y){return(y==1.0)?y:min(x*x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",JX="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-(1.0-x)*(1.0-y))*opacity+x*(1.0-opacity);}",$X="float blend(const in float x,const in float y){return(y<0.5)?(2.0*x*y+x*x*(1.0-2.0*y)):(sqrt(x)*(2.0*y-1.0)+2.0*x*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",eQ="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x+y-1.0,0.0)*opacity+x*(1.0-opacity);}",tQ=new Map([[Mt.SKIP,null],[Mt.ADD,FX],[Mt.ALPHA,kX],[Mt.AVERAGE,VX],[Mt.COLOR_BURN,zX],[Mt.COLOR_DODGE,UX],[Mt.DARKEN,GX],[Mt.DIFFERENCE,jX],[Mt.EXCLUSION,HX],[Mt.LIGHTEN,WX],[Mt.MULTIPLY,qX],[Mt.DIVIDE,YX],[Mt.NEGATION,XX],[Mt.NORMAL,QX],[Mt.OVERLAY,KX],[Mt.REFLECT,ZX],[Mt.SCREEN,JX],[Mt.SOFT_LIGHT,$X],[Mt.SUBTRACT,eQ]]),rQ=class extends fr$2{constructor(e,a=1){super(),this.f=e,this.opacity=new he(a)}getOpacity(){return this.opacity.value}setOpacity(e){this.opacity.value=e}get blendFunction(){return this.f}set blendFunction(e){this.f=e,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(e){this.blendFunction=e}getShaderCode(){return tQ.get(this.blendFunction)}},Zo={NONE:0,DEPTH:1,CONVOLUTION:2},Jo=class extends fr$2{constructor(e,a,{attributes:i=Zo.NONE,blendFunction:o=Mt.SCREEN,defines:c=new Map,uniforms:d=new Map,extensions:g=null,vertexShader:b=null}={}){super(),this.name=e,this.renderer=null,this.attributes=i,this.fragmentShader=a,this.vertexShader=b,this.defines=c,this.uniforms=d,this.extensions=g,this.blendMode=new rQ(o),this.blendMode.addEventListener("change",j=>this.setChanged())}getName(){return this.name}setRenderer(e){this.renderer=e}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(e){this.attributes=e,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(e){this.fragmentShader=e,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(e){this.vertexShader=e,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(e,a=ji){}update(e,a,i){}setSize(e,a){}initialize(e,a,i){}dispose(){for(let e of Object.keys(this)){let a=this[e];if(a!==null&&typeof a.dispose=="function"){if(a instanceof Pi||a===this.renderer)continue;this[e].dispose()}}}};function e3(e,a,i){for(let o of a){let c="$1"+e+o.charAt(0).toUpperCase()+o.slice(1),d=new RegExp("([^\\.])(\\b"+o+"\\b)","g");for(let g of i.entries())g[1]!==null&&i.set(g[0],g[1].replace(d,c))}}function iQ(e,a,i,o,c,d,g){let b=new Map([["fragment",a.getFragmentShader()],["vertex",a.getVertexShader()]]),j=b.get("fragment")!==void 0&&/mainImage/.test(b.get("fragment")),$=b.get("fragment")!==void 0&&/mainUv/.test(b.get("fragment")),rt=[],_e=[],st=!1,ut=!1;if(b.get("fragment")===void 0)console.error("Missing fragment shader",a);else if($&&g&Zo.CONVOLUTION)console.error("Effects that transform UV coordinates are incompatible with convolution effects",a);else if(!j&&!$)console.error("The fragment shader contains neither a mainImage nor a mainUv function",a);else{let gt=/(?:\w+\s+(\w+)\([\w\s,]*\)\s*{[^}]+})/g,yt=k_.Section;if($){let wt=`	${e}MainUv(UV);
`;i.set(yt.FRAGMENT_MAIN_UV,i.get(yt.FRAGMENT_MAIN_UV)+wt),st=!0}if(b.get("vertex")!==null&&/mainSupport/.test(b.get("vertex"))){let wt=`	${e}MainSupport(`;wt+=/mainSupport *\([\w\s]*?uv\s*?\)/.test(b.get("vertex"))?`vUv);
`:`);
`,i.set(yt.VERTEX_MAIN_SUPPORT,i.get(yt.VERTEX_MAIN_SUPPORT)+wt),rt=rt.concat([...b.get("vertex").matchAll(/(?:varying\s+\w+\s+(\w*))/g)].map(Ct=>Ct[1])),_e=_e.concat(rt).concat([...b.get("vertex").matchAll(gt)].map(Ct=>Ct[1]))}_e=_e.concat([...b.get("fragment").matchAll(gt)].map(wt=>wt[1])),_e=_e.concat([...a.defines.keys()].map(wt=>wt.replace(/\([\w\s,]*\)/g,""))),_e=_e.concat([...a.uniforms.keys()]),a.uniforms.forEach((wt,Ct)=>d.set(e+Ct.charAt(0).toUpperCase()+Ct.slice(1),wt)),a.defines.forEach((wt,Ct)=>c.set(e+Ct.charAt(0).toUpperCase()+Ct.slice(1),wt)),e3(e,_e,c),e3(e,_e,b);let Pt=a.blendMode;if(o.set(Pt.blendFunction,Pt),j){let wt=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/,Ct=`${e}MainImage(color0, UV, `;g&Zo.DEPTH&&wt.test(b.get("fragment"))&&(Ct+="depth, ",ut=!0),Ct+=`color1);
	`;let At=e+"BlendOpacity";d.set(At,Pt.opacity),Ct+=`color0 = blend${Pt.blendFunction}(color0, color1, ${At});

	`,i.set(yt.FRAGMENT_MAIN_IMAGE,i.get(yt.FRAGMENT_MAIN_IMAGE)+Ct),Ct=`uniform float ${At};

`,i.set(yt.FRAGMENT_HEAD,i.get(yt.FRAGMENT_HEAD)+Ct)}i.set(yt.FRAGMENT_HEAD,i.get(yt.FRAGMENT_HEAD)+b.get("fragment")+`
`),b.get("vertex")!==null&&i.set(yt.VERTEX_HEAD,i.get(yt.VERTEX_HEAD)+b.get("vertex")+`
`)}return{varyings:rt,transformedUv:st,readDepth:ut}}var nu=class extends wi{constructor(e,...a){super("EffectPass"),this.fullscreenMaterial=new k_(null,null,null,e),this.effects=a.sort((i,o)=>o.attributes-i.attributes),this.skipRendering=!1,this.uniformCount=0,this.varyingCount=0,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(e){this.fullscreenMaterial.encodeOutput=e}get dithering(){return this.fullscreenMaterial.dithering}set dithering(e){let a=this.fullscreenMaterial;a.dithering=e,a.needsUpdate=!0}verifyResources(){let e=this.renderer.capabilities,a=Math.min(e.maxFragmentUniforms,e.maxVertexUniforms);this.uniformCount>a&&console.warn("The current rendering context doesn't support more than "+a+" uniforms, but "+this.uniformCount+" were defined"),a=e.maxVaryings,this.varyingCount>a&&console.warn("The current rendering context doesn't support more than "+a+" varyings, but "+this.varyingCount+" were defined")}updateMaterial(){let e=k_.Section,a=new Map([[e.FRAGMENT_HEAD,""],[e.FRAGMENT_MAIN_UV,""],[e.FRAGMENT_MAIN_IMAGE,""],[e.VERTEX_HEAD,""],[e.VERTEX_MAIN_SUPPORT,""]]),i=new Map,o=new Map,c=new Map,d=new Set,g=0,b=0,j=0,$=!1,rt=!1;for(let st of this.effects)if(st.blendMode.blendFunction===Mt.SKIP)j|=st.getAttributes()&Zo.DEPTH;else if(j&st.getAttributes()&Zo.CONVOLUTION)console.error("Convolution effects cannot be merged",st);else{j|=st.getAttributes();let ut="e"+g++,gt=iQ(ut,st,a,i,o,c,j);if(b+=gt.varyings.length,$=$||gt.transformedUv,rt=rt||gt.readDepth,st.extensions!==null)for(let yt of st.extensions)d.add(yt)}let _e=/\bblend\b/g;for(let st of i.values()){let ut=st.getShaderCode().replace(_e,`blend${st.blendFunction}`);a.set(e.FRAGMENT_HEAD,a.get(e.FRAGMENT_HEAD)+ut+`
`)}j&Zo.DEPTH?(rt&&a.set(e.FRAGMENT_MAIN_IMAGE,`float depth = readDepth(UV);

	`+a.get(e.FRAGMENT_MAIN_IMAGE)),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,$?(a.set(e.FRAGMENT_MAIN_UV,`vec2 transformedUv = vUv;
`+a.get(e.FRAGMENT_MAIN_UV)),o.set("UV","transformedUv")):o.set("UV","vUv"),a.forEach((st,ut,gt)=>gt.set(ut,st.trim().replace(/^#/,`
#`))),this.uniformCount=c.size,this.varyingCount=b,this.skipRendering=g===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderParts(a).setExtensions(d).setUniforms(c).setDefines(o)}recompile(){this.updateMaterial(),this.verifyResources()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(e,a=ji){this.fullscreenMaterial.depthBuffer=e,this.fullscreenMaterial.depthPacking=a;for(let i of this.effects)i.setDepthTexture(e,a)}render(e,a,i,o,c){for(let d of this.effects)d.update(e,a,o);if(!this.skipRendering||this.renderToScreen){let d=this.fullscreenMaterial;d.inputBuffer=a.texture,d.time+=o,e.setRenderTarget(this.renderToScreen?null:i),e.render(this.scene,this.camera)}}setSize(e,a){this.fullscreenMaterial.setSize(e,a);for(let i of this.effects)i.setSize(e,a)}initialize(e,a,i){this.renderer=e;for(let o of this.effects)o.initialize(e,a,i),o.addEventListener("change",c=>this.handleEvent(c));this.updateMaterial(),this.verifyResources(),i!==void 0&&i!==Ir$1&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(let e of this.effects)e.dispose()}handleEvent(e){switch(e.type){case"change":this.recompile();break}}},nQ=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],Tx=class extends wi{constructor({resolutionScale:e=.5,width:a=Xn.AUTO_SIZE,height:i=Xn.AUTO_SIZE,kernelSize:o=Xm.LARGE}={}){super("KawaseBlurPass"),this.renderTargetA=new ft(1,1,{minFilter:tt,magFilter:tt,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";let c=this.resolution=new Xn(this,a,i,e);c.addEventListener("change",d=>this.setSize(c.baseWidth,c.baseHeight)),this.blurMaterial=new JR,this.ditheredBlurMaterial=new JR,this.ditheredBlurMaterial.uniforms.scale=this.blurMaterial.uniforms.scale,this.ditheredBlurMaterial.dithering=!0,this.dithering=!1,this.kernelSize=o}getResolution(){return this.resolution}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get scale(){return this.blurMaterial.scale}set scale(e){this.blurMaterial.scale=e}getScale(){return this.blurMaterial.scale}setScale(e){this.blurMaterial.scale=e}getKernelSize(){return this.kernelSize}setKernelSize(e){this.kernelSize=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,a,i,o,c){let d=this.scene,g=this.camera,b=this.renderTargetA,j=this.renderTargetB,$=nQ[this.kernelSize],rt=this.blurMaterial,_e=a,st,ut;for(this.fullscreenMaterial=rt,st=0,ut=$.length-1;st<ut;++st){let gt=st&1?j:b;rt.kernel=$[st],rt.inputBuffer=_e.texture,e.setRenderTarget(gt),e.render(d,g),_e=gt}this.dithering&&(rt=this.ditheredBlurMaterial,this.fullscreenMaterial=rt),rt.kernel=$[st],rt.inputBuffer=_e.texture,e.setRenderTarget(this.renderToScreen?null:i),e.render(d,g)}setSize(e,a){let i=this.resolution;i.setBaseSize(e,a);let o=i.width,c=i.height;this.renderTargetA.setSize(o,c),this.renderTargetB.setSize(o,c),this.blurMaterial.setSize(o,c),this.ditheredBlurMaterial.setSize(o,c)}initialize(e,a,i){i!==void 0&&(this.renderTargetA.texture.type=i,this.renderTargetB.texture.type=i,i!==Ir$1?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.ditheredBlurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):e.outputEncoding===at&&(this.renderTargetA.texture.encoding=at,this.renderTargetB.texture.encoding=at))}static get AUTO_SIZE(){return Xn.AUTO_SIZE}},sQ=class extends wi{constructor({width:e=Xn.AUTO_SIZE,height:a=Xn.AUTO_SIZE,renderTarget:i,luminanceRange:o,colorOutput:c}={}){super("LuminancePass"),this.fullscreenMaterial=new CX(c,o),this.needsSwap=!1,this.renderTarget=i,this.renderTarget===void 0&&(this.renderTarget=new ft(1,1,{minFilter:tt,magFilter:tt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target",this.renderTarget.texture.generateMipmaps=!1);let d=this.resolution=new Xn(this,e,a);d.addEventListener("change",g=>this.setSize(d.baseWidth,d.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(e,a,i,o,c){let d=this.fullscreenMaterial;d.inputBuffer=a.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,a){let i=this.resolution;i.setBaseSize(e,a),this.renderTarget.setSize(i.width,i.height)}initialize(e,a,i){i!==void 0&&i!==Ir$1&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},o3=class extends wi{constructor(e,a){super("MaskPass",e,a),this.needsSwap=!1,this.clearPass=new V_(!1,!1,!0),this.inverse=!1}get inverted(){return this.inverse}set inverted(e){this.inverse=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(e){this.inverted=e}render(e,a,i,o,c){let d=e.getContext(),g=e.state.buffers,b=this.scene,j=this.camera,$=this.clearPass,rt=this.inverted?0:1,_e=1-rt;g.color.setMask(!1),g.depth.setMask(!1),g.color.setLocked(!0),g.depth.setLocked(!0),g.stencil.setTest(!0),g.stencil.setOp(d.REPLACE,d.REPLACE,d.REPLACE),g.stencil.setFunc(d.ALWAYS,rt,4294967295),g.stencil.setClear(_e),g.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?$.render(e,null):($.render(e,a),$.render(e,i))),this.renderToScreen?(e.setRenderTarget(null),e.render(b,j)):(e.setRenderTarget(a),e.render(b,j),e.setRenderTarget(i),e.render(b,j)),g.color.setLocked(!1),g.depth.setLocked(!1),g.stencil.setLocked(!1),g.stencil.setFunc(d.EQUAL,1,4294967295),g.stencil.setOp(d.KEEP,d.KEEP,d.KEEP),g.stencil.setLocked(!0)}},Yn=class extends wi{constructor(e,a="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=e,this.inputBufferUniform=null,this.setInput(a)}setInput(e){if(this.inputBufferUniform=null,this.fullscreenMaterial!==null){let a=this.fullscreenMaterial.uniforms;a!==void 0&&a[e]!==void 0&&(this.inputBufferUniform=a[e])}}render(e,a,i,o,c){this.inputBufferUniform!==null&&a!==null&&(this.inputBufferUniform.value=a.texture),e.setRenderTarget(this.renderToScreen?null:i),e.render(this.scene,this.camera)}initialize(e,a,i){i!==void 0&&i!==Ir$1&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},B_=1/1e3,oQ=1e3,a3=class{constructor(){this.previousTime=0,this.currentTime=0,this.delta=0,this.fixedDelta=1e3/60,this.elapsed=0,this.timescale=1,this.fixedDeltaEnabled=!1,this.autoReset=!1}setFixedDeltaEnabled(e){return this.fixedDeltaEnabled=e,this}isAutoResetEnabled(e){return this.autoReset}setAutoResetEnabled(e){return typeof document<"u"&&document.hidden!==void 0&&(e?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this.autoReset=e),this}getDelta(){return this.delta*B_}getFixedDelta(){return this.fixedDelta*B_}setFixedDelta(e){return this.fixedDelta=e*oQ,this}getElapsed(){return this.elapsed*B_}getTimescale(){return this.timescale}setTimescale(e){return this.timescale=e,this}update(e){return this.fixedDeltaEnabled?this.delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=e!==void 0?e:performance.now(),this.delta=this.currentTime-this.previousTime),this.delta*=this.timescale,this.elapsed+=this.delta,this}reset(){return this.delta=0,this.elapsed=0,this.currentTime=performance.now(),this}handleEvent(e){document.hidden||(this.currentTime=performance.now())}dispose(){this.setAutoResetEnabled(!1)}},Xm={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},aQ=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=clamp(texture2D(map,uv)*intensity,0.0,1.0);}`,l3=class extends Jo{constructor({blendFunction:e=Mt.SCREEN,luminanceThreshold:a=.9,luminanceSmoothing:i=.025,resolutionScale:o=.5,intensity:c=1,width:d=Xn.AUTO_SIZE,height:g=Xn.AUTO_SIZE,kernelSize:b=Xm.LARGE}={}){super("BloomEffect",aQ,{blendFunction:e,uniforms:new Map([["map",new he(null)],["intensity",new he(c)]])}),this.renderTarget=new ft(1,1,{minFilter:tt,magFilter:tt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.renderTarget.texture.generateMipmaps=!1,this.uniforms.get("map").value=this.renderTarget.texture,this.luminancePass=new sQ({renderTarget:this.renderTarget,colorOutput:!0}),this.luminanceMaterial.threshold=a,this.luminanceMaterial.smoothingFactor=i,this.blurPass=new Tx({resolutionScale:o,width:d,height:g,kernelSize:b});let j=this.blurPass.getResolution();j.addEventListener("change",$=>this.setSize(j.baseWidth,j.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}get resolution(){return this.blurPass.resolution}getResolution(){return this.blurPass.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get dithering(){return this.blurPass.dithering}set dithering(e){this.blurPass.dithering=e}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(e){this.blurPass.kernelSize=e}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(e){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(e){this.uniforms.get("intensity").value=e}getIntensity(){return this.intensity}setIntensity(e){this.intensity=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}update(e,a,i){let o=this.renderTarget;this.luminancePass.enabled?(this.luminancePass.render(e,a,o),this.blurPass.render(e,o,o)):this.blurPass.render(e,a,o)}setSize(e,a){let i=this.resolution;i.setBaseSize(e,a),this.renderTarget.setSize(i.width,i.height),this.luminancePass.resolution.copy(i)}initialize(e,a,i){this.blurPass.initialize(e,a,i),i!==void 0&&(this.renderTarget.texture.type=i,e.outputEncoding===at&&(this.renderTarget.texture.encoding=at))}},lQ="uniform float brightness;uniform float contrast;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=inputColor.rgb+vec3(brightness-0.5);if(contrast>0.0){color/=vec3(1.0-contrast);}else{color*=vec3(1.0+contrast);}outputColor=vec4(min(color+vec3(0.5),1.0),inputColor.a);}",c3=class extends Jo{constructor({blendFunction:e=Mt.NORMAL,brightness:a=0,contrast:i=0}={}){super("BrightnessContrastEffect",lQ,{blendFunction:e,uniforms:new Map([["brightness",new he(a)],["contrast",new he(i)]])})}get brightness(){return this.uniforms.get("brightness").value}set brightness(e){this.uniforms.get("brightness").value=e}getBrightness(e){return this.brightness}setBrightness(e){this.brightness=e}get contrast(){return this.uniforms.get("contrast").value}set contrast(e){this.uniforms.get("contrast").value=e}getContrast(e){return this.contrast}setContrast(e){this.contrast=e}},cQ="void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(vec3(average(inputColor.rgb)),inputColor.a);}",u3=class extends Jo{constructor(e=Mt.NORMAL){super("ColorAverageEffect",cQ,{blendFunction:e})}},uQ="varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 ra=texture2D(inputBuffer,vUvR).ra;vec2 ba=texture2D(inputBuffer,vUvB).ba;outputColor=vec4(ra.x,inputColor.g,ba.x,max(max(ra.y,ba.y),inputColor.a));}",hQ="uniform vec2 offset;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vec2 shift=offset*vec2(1.0,aspect);vUvR=uv+shift;vUvB=uv-shift;}",h3=class extends Jo{constructor({blendFunction:e=Mt.NORMAL,offset:a=new z$2(.001,5e-4)}={}){super("ChromaticAberrationEffect",uQ,{vertexShader:hQ,blendFunction:e,attributes:Zo.CONVOLUTION,uniforms:new Map([["offset",new he(a)]])})}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}},dQ=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D nearColorBuffer;uniform mediump sampler2D farColorBuffer;
#else
uniform lowp sampler2D nearColorBuffer;uniform lowp sampler2D farColorBuffer;
#endif
uniform lowp sampler2D nearCoCBuffer;uniform float scale;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec4 colorNear=texture2D(nearColorBuffer,uv);vec4 colorFar=texture2D(farColorBuffer,uv);float CoCNear=texture2D(nearCoCBuffer,uv).r;CoCNear=min(CoCNear*scale,1.0);vec4 result=inputColor*(1.0-colorFar.a)+colorFar;result=mix(result,colorNear,CoCNear);outputColor=result;}`,d3=class extends Jo{constructor(e,{blendFunction:a=Mt.NORMAL,worldFocusDistance:i,worldFocusRange:o,focusDistance:c=0,focalLength:d=.1,focusRange:g=d,bokehScale:b=1,width:j=Xn.AUTO_SIZE,height:$=Xn.AUTO_SIZE}={}){super("DepthOfFieldEffect",dQ,{blendFunction:a,attributes:Zo.DEPTH,uniforms:new Map([["nearColorBuffer",new he(null)],["farColorBuffer",new he(null)],["nearCoCBuffer",new he(null)],["scale",new he(1)]])}),this.camera=e,this.renderTarget=new ft(1,1,{minFilter:tt,magFilter:tt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="DoF.Intermediate",this.renderTarget.texture.generateMipmaps=!1,this.renderTargetMasked=this.renderTarget.clone(),this.renderTargetMasked.texture.name="DoF.Masked.Far",this.renderTargetNear=this.renderTarget.clone(),this.renderTargetNear.texture.name="DoF.Bokeh.Near",this.uniforms.get("nearColorBuffer").value=this.renderTargetNear.texture,this.renderTargetFar=this.renderTarget.clone(),this.renderTargetFar.texture.name="DoF.Bokeh.Far",this.uniforms.get("farColorBuffer").value=this.renderTargetFar.texture,this.renderTargetCoC=this.renderTarget.clone(),this.renderTargetCoC.texture.name="DoF.CoC",this.renderTargetCoCBlurred=this.renderTargetCoC.clone(),this.renderTargetCoCBlurred.texture.name="DoF.CoC.Blurred",this.uniforms.get("nearCoCBuffer").value=this.renderTargetCoCBlurred.texture,this.cocPass=new Yn(new gX(e));let rt=this.cocMaterial;rt.focusDistance=c,rt.focusRange=g,i!==void 0&&(rt.worldFocusDistance=i),o!==void 0&&(rt.worldFocusRange=o),this.blurPass=new Tx({kernelSize:Xm.MEDIUM,width:j,height:$});let _e=this.blurPass.getResolution();_e.addEventListener("change",ut=>this.setSize(_e.getBaseWidth(),_e.getBaseHeight())),this.maskPass=new Yn(new DX(this.renderTargetCoC.texture));let st=this.maskPass.fullscreenMaterial;st.maskFunction=n3.MULTIPLY,st.colorChannel=i3.GREEN,this.bokehNearBasePass=new Yn(new _x(!1,!0)),this.bokehNearBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehNearFillPass=new Yn(new _x(!0,!0)),this.bokehNearFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehFarBasePass=new Yn(new _x(!1,!1)),this.bokehFarBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.bokehFarFillPass=new Yn(new _x(!0,!1)),this.bokehFarFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.target=null,this.bokehScale=b}get cocTexture(){return this.renderTargetCoC.texture}get cocMaterial(){return this.cocPass.fullscreenMaterial}get circleOfConfusionMaterial(){return this.cocMaterial}getCircleOfConfusionMaterial(){return this.circleOfConfusionMaterial}getBlurPass(){return this.blurPass}get resolution(){return this.blurPass.getResolution()}getResolution(){return this.blurPass.getResolution()}get bokehScale(){return this.uniforms.get("scale").value}set bokehScale(e){let a=[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];for(let i of a)i.fullscreenMaterial.setScale(e);this.maskPass.fullscreenMaterial.setStrength(e),this.uniforms.get("scale").value=e}getBokehScale(){return this.bokehScale}setBokehScale(e){this.bokehScale=e}getTarget(){return this.target}setTarget(e){this.target=e}calculateFocusDistance(e){let a=this.camera,i=a.position.distanceTo(e);return F_(-i,a.near,a.far)}setDepthTexture(e,a=ji){this.circleOfConfusionMaterial.depthBuffer=e,this.circleOfConfusionMaterial.depthPacking=a}update(e,a,i){let o=this.renderTarget,c=this.renderTargetCoC,d=this.renderTargetCoCBlurred,g=this.renderTargetMasked;if(this.target!==null){let b=this.calculateFocusDistance(this.target);this.circleOfConfusionMaterial.focusDistance=b}this.cocPass.render(e,null,c),this.blurPass.render(e,c,d),this.maskPass.render(e,a,g),this.bokehFarBasePass.render(e,g,o),this.bokehFarFillPass.render(e,o,this.renderTargetFar),this.bokehNearBasePass.render(e,a,o),this.bokehNearFillPass.render(e,o,this.renderTargetNear)}setSize(e,a){let i=this.resolution;i.setBaseSize(e,a);let o=i.width,c=i.height,d=[this.cocPass,this.blurPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];d.push(this.renderTargetCoC,this.renderTargetMasked),d.forEach(g=>g.setSize(e,a)),d=[this.renderTarget,this.renderTargetNear,this.renderTargetFar,this.renderTargetCoCBlurred],d.forEach(g=>g.setSize(o,c)),[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(g=>g.fullscreenMaterial.setSize(o,c))}initialize(e,a,i){[this.cocPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(o=>o.initialize(e,a,i)),this.blurPass.initialize(e,a,Ir$1),i!==void 0&&(this.renderTarget.texture.type=i,this.renderTargetNear.texture.type=i,this.renderTargetFar.texture.type=i,this.renderTargetMasked.texture.type=i,e.outputEncoding===at&&(this.renderTarget.texture.encoding=at,this.renderTargetNear.texture.encoding=at,this.renderTargetFar.texture.encoding=at,this.renderTargetMasked.texture.encoding=at))}};new _;new ce$1;var fQ="uniform vec3 hue;uniform float saturation;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,hue.xyz),dot(inputColor.rgb,hue.zxy),dot(inputColor.rgb,hue.yzx));float average=(color.r+color.g+color.b)/3.0;vec3 diff=average-color;if(saturation>0.0){color+=diff*(1.0-1.0/(1.001-saturation));}else{color+=diff*-saturation;}outputColor=vec4(min(color,1.0),inputColor.a);}",f3=class extends Jo{constructor({blendFunction:e=Mt.NORMAL,hue:a=0,saturation:i=0}={}){super("HueSaturationEffect",fQ,{blendFunction:e,uniforms:new Map([["hue",new he(new _)],["saturation",new he(i)]])}),this.hue=a}get saturation(){return this.uniforms.get("saturation").value}set saturation(e){this.uniforms.get("saturation").value=e}getSaturation(){return this.saturation}setSaturation(e){this.saturation=e}get hue(){let e=this.uniforms.get("hue").value;return Math.acos((e.x*3-1)/2)}set hue(e){let a=Math.sin(e),i=Math.cos(e);this.uniforms.get("hue").value.set((2*i+1)/3,(-Math.sqrt(3)*a-i+1)/3,(Math.sqrt(3)*a-i+1)/3)}getHue(){return this.hue}setHue(e){this.hue=e}};new We;var pQ=`void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*time));
#ifdef PREMULTIPLY
outputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);
#else
outputColor=vec4(noise,inputColor.a);
#endif
}`,p3=class extends Jo{constructor({blendFunction:e=Mt.SCREEN,premultiply:a=!1}={}){super("NoiseEffect",pQ,{blendFunction:e}),this.premultiply=a}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(e){this.premultiply!==e&&(e?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}isPremultiplied(){return this.premultiply}setPremultiplied(e){this.premultiply=e}},mQ="uniform bool active;uniform vec2 d;void mainUv(inout vec2 uv){if(active){uv=vec2(d.x*(floor(uv.x/d.x)+0.5),d.y*(floor(uv.y/d.y)+0.5));}}",m3=class extends Jo{constructor(e=30){super("PixelationEffect",mQ,{uniforms:new Map([["active",new he(!1)],["d",new he(new z$2)]])}),this.resolution=new z$2,this.d=0,this.granularity=e}get granularity(){return this.d}set granularity(e){let a=Math.floor(e);a%2>0&&(a+=1),this.d=a,this.uniforms.get("active").value=a>0,this.setSize(this.resolution.width,this.resolution.height)}getGranularity(){return this.granularity}setGranularity(e){this.granularity=e}setSize(e,a){this.resolution.set(e,a),this.uniforms.get("d").value.setScalar(this.d).divide(this.resolution)}};new _;new _;var t3="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAACm53kpAAAAeElEQVRYR+2XSwqAMAxEJ168ePEqwRSKhIIiuHjJqiU0gWE+1CQdApcVAMUAuARaMGCX1MIL/Ow13++9lW2s3mW9MWvsnWc/2fvGygwPAN4E8QzAA4CXAB6AHjG4JTHYI1ey3pcx6FHnEfhLDOIBKAmUBK6/ANUDTlROXAHd9EC1AAAAAElFTkSuQmCC",r3="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAIwCAYAAAABNmBHAAAgAElEQVR4Xuy9CbhlV1ktOvbpq09DkiIkUBI6kxASIH0DlAQiIK1wRfSJTx+i4JX7vKIigs8HXpXvqVcvrcC9agQ7IDTSSWgqCQQliDRBJKkkhDSkqVPNqVOnP+8b//rH3P+eZ+199tlznVTlvVrft7+1T7OaueZY42/m37QALKNk2wHg1pITlB17mC+Pp11W3X/LHyT32vhg48/5SOv+PnwpsHA70JoGlueB1iKApeqzvOzn44GatTB76Xzhd7suBR7+WWADgDEAwwCG/L54b/poDLrHuvvm70Z2Avhsc+PVcxscBU8F8C8ADg5+ipIjD/PlGwfgju8B924E5seARUfLsiNmqQW0IjL8+7L2NYD/7COBzfcCm+aB8SVgdAkYIRCXKyDax4EdAanL5PuNPllNvXDlAHwFgP8AcC2AhRIoDXbsYb48dl5WkVFTE3LGDcC9m4CZCWBuFFgeAZaGAYJQQCRqDHT+McJrVb8zwATUXH02MHYfMHEIGFsAxgjApQqACYQORjtd/B7Axt/z79sC0+cMPgjjlwPwVwHcA+DfAHzTxcVgWBroqMN8+cYBeM71wH0TwKExYHYUWCIAHYRLTlkCYgcIBcAgU/n3qy8GRu4HRgnAOWBkERhddPAJhGJDBxkvw7cqimr+zFM/ZLnZF64cgL8BYD+AWwB8x/dlWuWagHiYL984AJ/0RWBy1AE4AizyM1yxYAcTigW55xMbAkxEiwEdkJ/ZCQxPAiOHgBECcKEC4TBZcKkSv+mTieNcNPNC26mLNsj45QD8LQDTAO4GcJt/7iw2bfoG4WG+vAGwm9ExiEg69zpg/wgwPQLMjgALzn4E4aIzoJjQ9g4024uygkj+pyuAoX0VAIfngOH5NgCHMhAm8Sv2y3XDZeBhNIp8OzJE8OsBzAKYBHAXgDt8/4O+MVT0j4f58o0D8Pxrgf3DwMwIMEPQEYRkNwfgsuuDZLskip0No0gWMD/9HGDoADAkAC4Aw/wsAgZAgs2Z0ABI0GU6IVmKv+f28KDnHxkA/G0A8y6G73N9kOCjXnh/Ebb6OvgwX75xAF5wLTA1VIHPADgMLDj4yIA5AAm6aCUnv4oz46eeDwxNAUMzwJAz4BABSNDFTwSfg7DDKHE23MG5PqIY8A1u/dINs9dBdy8AgnGPM2NfUBrsnw7z5RsH4IXXAAcJviFgluAbygBINnSLWOAjGxJ4pgOKDV0v/OSLKp8iGXBovhLBBOCQM2ACoTOhnYrAdItYbCij5JFzRyIAqRccAnDAQUjg6UNQ7hsMXP0cRQAexss3DsCLCECCLwCQzMcPwUi2MwAScAKbfnY/YRLFQ8DHX+IAJAMSfDkAF13kLvleIjhjQQHxUVS3jjgGpKeeNzYVQEjgUS8k+PghONdhIwAP4+XXBYCHKIJbwJyDTgaIAdCBJx3Q2M8tYAHP9m4df/ylQOsQ0JqtRLCx30K1wtLBggScQOgsKBGcWHAJeOwRC0BSM1mQIKRbhh+Bj98JQP6t4U0APEyXXxcAEnxkQAFwoVUxID9kvQg+c1C7vidRbIDkc24B//hTQGumDcCWA5DgMxASdNIFBUI5pCML8v8API5zfEQx4BudgqiczviSnJhQwCP4BMCGl+wO8+U7AJi/W4O4YS6+pmK/2ciADsAOBhTIIiAJnPB7AvNjP+0AnANaYkAHX2JBAc+tYaJXOqBZv24Vc386XW5dtkHGW+4HFAJonpOe+YYQZAShgKjv3PNvPQaxVoI8zJdfFwASfPzMUwS3Kt1v0UFIlos6oDFdAGFcliMAP/ryAEAGNwQRnDOgLbdlIEwrIs6AZ/QgkMMHQF6ZAKQcJAsSYPwIeAIk9wJgoPK1gi7+PwF4GC/fOAAvIQPSs0URTPBJ/Pp3GSEGRHfBCIQ0xowBtUbcAj7ys5X4Jfu1HIAGQrIgQRXEsAFQIORDFhiDY/rMHmrU4QUgR08AkgUjCAW6CD6CkwBsAIQC4GG6fPMA3OXiNzCg2I9gNCMksmAAoemDzoimFwL48M85AKkiuQVMAAp8CYRRDAt8GQiJ67N6GJODAXAHlsGguscA2AJg1IPGYmxOpBxFWkRN9LsATgIwXnNs/v/5z/9XCf8BO3YAtxbc/46/KDt+5+ea1Yku2VUxHz/z0v24FwMGK1gWsK2OUUxHHdCBeRUB6OxHABr4ZICIBd0QWSF+XRdMTAjgCdTrG9cBNwE4F8CpDkICyYLGsuhFt6zs+gISwUen8zEAjgMw4cfx2H6O/90yAFo84Cbg4ID3/9TfLTt+5+ebnRABkODjx0SwPi5ec/FrYpmqSAxM8Dn60CsqAFI6GfhqAMiDE/gokmvEr0C4PgDkBQm40wE8zMFEUDKEVoxIMLl/KS73mE7H9d+vcKHQQcjwW0Yu9nP8m8sAmOIBuWY6wP2/4s0ezjjg8TuvaR6ABJ70vxUApGrm7EbGE+i472BAB+WHfqHS/eoAaEwY2E9+wLSXTqhI7CXgnB6LCoOJ4BiST+hTnG0HcCwAglCx3ARoZEVFXnBPp/O/A/hXACc7CPs9/i1lAOyIB+RDX+P9/+pbQjjjAMfv/PL6AFDs1wFAgs/9fgKfgdE/ZEpuiQlbwAde6QAMBgiRmsSwA9BY0JfjovGRDBMH4TlcXGhcBOc6HkF0gjPhZgchxTLZMAci/04W/B6Ab3t09EPXcPyflgFwRTwgJ2MN9/8bf5qFM67x+B/aW4XQz42FeL0YrRyikztUFw0704mf9kXgxhOAqc3AAsPyRxxQCs/PdXOFY0W1KHy3QIUGtx+6vdnx1vsB+dsTncm2AogglFgVEAlUWrOMB2RyEmMCGQ/Y7/HvKns6tfGAnJQ+r/9b76oJZ1zD8WdyQjYBh8aBhVEHjELouQ8ukQ7VRSCJAALwkr+sALhnGzDD3JAJYJHg9uhoi4bx8ytkWUtvHT/7+Zc4dw1uZ3612fH2dkQf7yxIEEockwkJQn4IQoq8unhAhmPRKKFx0uv4K8ueTs94wD7u//VX9ghn7OP4c+4G7h8HpseB+dF2AKlFLwuAIZ8jD6NPrOhAffmfA9/ZBuzZCkyRWSeqBCWyoYGQ5yQrBpDbum/ME1HoPo0XEkSD2zlfbna8q6+EUJcTCxKEtHL5EQjP6BEPyIgYAZBvYt3xHyx7OqvGA65y/7/9wVXCGVc5/sl7qxD66dEqiYgRzAqhN1A4CBNAAlDyAFI+iZ9/N3DLJuC+jcDUBmCWyUnOrmTYCMIOkNclLg0B8/RsNLg9+UvNjnd1APLmmQpFHyEBROuWACQT8nN+H/GAvY7/VNnT6SsesMf13/CpahGnZzhjj+PPmwX2MYdDIfQexWyBAwEUOQDrRDN/98p3A7dvAO6fAA5sqHJDBEAyoUVGkwEd6HR12XU4kwzfl6fCXTZzjy57vvnR513X7Hj7AyDvggAUi9EyFgiZqNxPQF6345nOWbD1HQ/Y5fpvuLa/2+82/vNHgAPDFQDnhoF5j2C2qBWCI8bw1eRw5CL5l94L3DEOTI4DB8Y9OWmsEu/zBJ3rgsaybqBob/7A4C7jtWcooRrczr+u2fH2D0AOQgAUCxKEP7aGgLy64+m6KdjWFA9Yc/03/Osa4glrjr+AupqHz1sEs0cxG0BC9HIePLoit9eNkVf9L+DuUWByDJgaq4ybGYLPAWgiXmLedUE7dwC7saL7CqfPKXi4NYdaykCD410bAHlDEsNiwZ9wAPYbkJcfz6T2gm3N8YDZ9d/wHxUA+739fPwXPrSKYGb+BuP3jAFDElFH9HIWwbzCIGkBr/or4J4RYO8oMOW6ZVcAuvi1Cgoha04BCwT5gfMKHm7NoRde2+x41w5A3hQZkADk5+cGiAeMx3+/7AENFA8Yrv/G71cAXFM4Yzj+otOAaQLQA0gZxaIIZtMDFTigKJV8H9Iq6aZ59ZXAvSPAvpEKgBTtBODcSCWCZeRYtpzrmLyeGNCAyFl1v+Hei8qeb370Rdc2O97BAMi7EgB/2QG41nhAHU9LuWAbOB7Qr//GPRUA13r7Gv9FZwIMoVcEswEwfDoimEP0shKKtIphaZQAXv1+YM+wA3DEdcvRKkGJADQQEsQuhi1Tjt95vBsh5nx2IO59SsHDrTmUOStNjndwAAqEry0IyCMICkOyiuIBNwBvPFQQT7gBuPjc9oRYAIHyOEL4vIFEYVNaOou5vCGE/tV/A0wOVcnpzI47NOri3QFIBpSeaSDUdYLOSWvYImSGgftpJDa4MWJbAGxivGUA5MAOc0Be6eVLj7/4Mk+hzCOYPYpZDBiNkLh+G/M3yFyv/ltgL3W3YQfgcFUhgRY2PwY+Z7/EhAR1SFyXCOb57r28QfQBsJQBMn5D4y0HYLPje9Cd7RIC0PM3EiMofF4gVCBp1P840ix/gyz56r+vAMjk9Gl375iB4+CzveuZdLkkEPJ8ZEfX/6R73vOjzT5Si9hucLxHAVg4PwJgRwh9CKOXK8YA4ZEqKZXSQWh5P+5AftXfA/uGKvYjCKn72cctbFrZNECka5L5CPwIPtMH3TVz17MLB5gdLgA2Nd6jACycHwLQxFEUSR5ASvARDB0h9AQb9bXIgCGk6lUfAPYTgEPAITKgg1BObk58srTJgG58WMkWMaAbQQT1nc8rHGANAJsc71EAFs4PAagQestgC1lsBJ4BMCSOK6dDUcwqqaFiQr/0QeAAAdjy+jBiQQeeMSBZT3nCPUDIa9z+/MIB1gCwyfEeBWDh/BCAeQSzgkjFfGLBBD5nxQ4DxN0wv3hVxX5TBGDwL5obxvVA5YqYL5BeMLd66YYxJpRB0gK+96LCAdYAsMnxHgVg4fwIgMrhUPKQ2C+Bz0PmBTqBMQehAbDlIjj4F80KJguSVZ0FuXpjoCOgXawLjALhbT9eOMAuAGxqvEcBWDg/l1IE05Ed0ygZnyHdz0VwCqEPIfNyx0QQvvLDFQCp+8nfZk5und8tXwIgWcHSNX0N2CJmnAl3v6RwgNnhl17T7HiPArBwfghAS7mV/hey2JS9FvM3BLpUUi1YwDRMXvkRYJoAlAh2l0dcZ04s6JUTDIjyBcrl4yDc/dLCAdYAsMnxHgVg4fxwKVwJgGEJNmWtxpQMpX9on2eRhVA+O56AjMfnP+e3Xvf3NwG4xIPTleiY55bpGh6UbafNU0l0z0p+5Jh5HqYJ6b51nP6XP8cx12XNHQVgIQB/bFPVg2OC7Q+WgVFWng/FvtWLI06uWh5oguKEcXVS/9sEAF//VGD7t4ETDgJbF4CNi8CGZWBs2fPL/H6Vwp2KEtVk4fJ+v/EIYPN9wKa5qu+IncfPwXHVZe/aOL3EbwS7xv8A1rQvnO0j8PArTgTGZ4BxFv9mIxhOCGsv+0OPYDRghcLfkWkEuq0+G00x4OtfDGz+d2DbHmDLjL8si8AYP/7CGIAiEEMTG92zXqSbH+d9R2aA0XnvO+JjthiIrOVDHHPOkBrzUQAWAPsZp3oPDpa/Xag6EVkLBK+5rAnJC3/nYk/APD704WiEAV8OTHwX2LQH2DgFbJgFNrBhjd8r79deGoEwsllgNBOzy8CdjweG9wBj08AIAci2D6HafmyAk4/Z7SJ72hGYRwFYAMDLTwOGp4FRFgD3HhzqRGQiyeurqOdG6r0Rm8IEZjzRlkiqCWoEgK8Axm4BJu4HJhyAbFhDxmbDGnZO4j0SgLGDkpibgEq66TJw/1nA0F5gdLpq+zDqFfd5LMeWqu5HNST0uJOIllg+qgMWgI+HPv0xwLA3gWHpW2sC441gCECbmKziaGrnUdMO4aHeh6MxAP4SMHI7ML4HGD8AjHvHJGNAgpDgY/ck3stipRemvVhc+uASMPUEYGh/9dIRgGx8Y+MNbR/00uVtH0wEx94j/v0oAxaA8Ed+GBieAYZZg5kADC0QWGOFzGJlcGPzl1BxNLXD8sk4xftwNAbA/wwM3wGMUmxOOQBnHXzetIYvibonmSiuYTNjriVg7glAiwBk0fNZH6+PmX9P6kfNmCXGpftJ7TgKwBIAnln14BAAYxMYm5C6RjCyCoOyr0qkD/c+HI0B8DXA8N3AyCQwesD1VQKH7EcASm1Q+y4CkN9pUKiVF5nLvy+fBbTUd8QBaH1HvNBROiZvfsNnrF4kcvPwpdsBLBeU18Nf7AB23Dp4ecHC8oBgUlJJecLS+7+WOpE3gbE+HKw+yoevCYkMGKqPJrdEKARutaFYRs1fiEZ0wP8CDN8LDO8FRqYq3W10pgKgfYLaYCzootgA6KXaTA90y374TKB1sBozy77xHFZ536utRgAmEaw6g5kUSFZwSXnA330qsOlfgHMPDlZesLA8IOjoLypPWHj/11EnCiVwkz7kAExtsGraYUWdSDX5TmsagL8KDBGA7Bd30JsW0oWivnEOQNP7yGTSBR101AlZSUtGyfgZDkCWY1HnJdcBVe6325hTvelg2CQjZNDygG/2An0j1wKnL6y9vGBheUC8prQ8YeH9X39OVQSc7Mc6fCaKvAeHdCIVf4yMYCynTpX+nb97NJmlSQb8r8DQHm9YOFUZTKOzoXGhs6AxF0HIexcLBvWBuiHN8s2ne98R3qc6L4Vyb2oBVjfm9MIFHbjDCh6kPOBbQoG+oW8CO5bWVl6wsDwgfr20PGHh/X/1iaEIuDcCTIW/1Q4rFv8OnYiW3c+W2iKwUjKbyjQNwL1uuR6sAEgDgq1brXOmV81PxhNB6DUDBSYzQJwFtz623XcktX1Q1VWKaTF/zZhVazBVYA1tX5MazsGvobwe/jQr0Ne6BTh5uf/ygoXlAfG60vKEhff/rSe1i4DnTWDUACY1guFTDqLYdCBvf6DJYSMYATBfOx1kLfj1v1axH10nQ3Sd0GUkBnTfpemtBJgseIKQAHLQcVxa2TnuMW0Aqui5es8xBIegVdVVE8VhzHnLh65WMB9An+X18K6aAn2tO4ETl6vqbKuVFywsDwhevqg8YeH93/Rk70JE90nowxZbIJjvS3WYNSGUwGHJTpPxwwcbBuBrgRYBeKACn7VtpdUu/c0NJxO9BIxcKu4TTODzbkonPLoaL0vyUQRb2y8HsL1ckfWzMeuFi40Qezqi+yiPhyt7FOjr6/gCFwgP7Xb5vssTFt7/nQRg6MGRWmDRoeyTlpgw68GRTwgZgo1gGmXAX6/8dtaylSKY/koyID9BhzML3q1gAos2AcOrZYSoq/pJp1VtODRm9Z3LS/7WjVkvXOzEtOpKyGrlAT+4SoG+VY8vBGCvy/dVnrDw/vee65NBJiAjBIVcAJQjOm+DkCZEeiGAMw6sAwDZsJrAdhFM9rPGhd4904Co5oVuCZPV6kD40Ec6+9W8dBTBsfdc3nkpvnB82fp2RPcs79dHgb51LA9ofsDV6vut5/3PnxcAmLVBiDqgevDaJLkYrpuQxzcNwN8AWgIgRbB8loEBzXDwl4cGiDGft58SCOWGedgjvOJ+bPvgRkiuA+ZjzhnQQOiFNVbloa7l/fos0LdO5QENgEXlCfs8Qbf7HyMA3QVjYihYhLENgjX9y/qwxQmRU/asfd0ZcLU2CHVGyusJQLKfVi98CS12T5f7iECkHpsMkAhCF8+nshWH2I/jXsOYO144GV/9ApAIrS3vt4YCfetQHtAA2G+/4PW4/2PPbzMgmUMi2NoeSCRxIt2/FvuxWURIWCXg357gfTjEDNIHnTRXRCpH5ugKwGl3HpMBXQc0v6WLYVm/5limj04rG762K2uYY9jBkr9+rI03NL5ZbczS/dJ+LQyoga4o77fGAn0NlwdMAOy3vl/T938KAcj121z8Bn+Y9eWQJRz8Y6kNagDh2ey5EvxjxQD8TWdAuneCCO4An1vw5vdzQMmdktwq7pLZQR+dM34+ZumAxvY1Y04uqOAJ6FsExzeto7zfAAX6GiwPaLWR1lrfr8n7f/Rl3QGzmsis+/uO71V9OFgP2gpPhgr7TGRqRUT6dyvr4aIs/pm/2zVUNbBSv6G8e5pEv0Cvec7Po7+bTtjlBRlkvAMBkDeQyvsNWKCvofKACYBrre/X1P0/oWEAnnFD1YdjhtXxR73mX10FfCHHE9pVWcGAI/S0gKsfA2y+twrFZw6Hxf/F0Pk8Ri/kpGSnMuDx5T0iACgQHioo0NdAecBUHW6QdsV2/cL7v/Cyqr5gnc42CCOcfX1VIZ/V8We9IDmTzVXwPDJiXuKXPxtDBma8+lzP4WAgKkPxCUAPE4v5GzEuMX0PYJPLhB6FJsc7MAMmkVxaYC/K9gG+F1++8AQ7Gwbgk78I7GFpXgIwFiRXOwaJZPUbiR0yCUDRk+cHf+YpwMj9HgfI8ClGPyvsSiH0WSKRuYlitLb/zHM/JOSs5C/YIC9cMQDZr/dwxgOW9gtGYUBi0wA8l304vDQvAchilFbpIBQhZ7Ejq6ZQ0/Yhil8y4j89Axie9DAsD6FX9HOK3QtROTFkviN83kG4felIY8DCeLrSeMDSfsEovAECUFsTjHD+tcB+tkFgcXKvBRir7qtFl9owmO4Xy/1G3bAFfPrZHorFNWBFwHjQAFctIghj2kBarw06If/+MM9ZqTN6DgsDojCerjQesLRfMApvoGkAWh8Ob/tgAPSKWCp8ngNQtadjmTdltvNvn3peFYhgQQgh+iUmEaUAUoXM1yRLmWuFLaE9Z+XIAWBhPF1pPGBpv2AU3kDTALzwmqo6qtVh9kJErAudABia38TC5wJgS2xIhAwBn3yhByL4EhzXfRXxYsDTJ4IvrNN2JFMxZcBzVo4cABbG05XGA5b2C0bhDTQNQLZBYH1AVsQSAAU+imI1obHyblnjG/kJk3U8BHz8xVUQAhnQIl5CyNgKAGp5LKSSCoAySh5Jj79vTagcxUaIBeRNe79g9gq+DXig4wGzy+PONfT7RWFA4noAkGXZVAhcBckJQgNgrLiaNb3paIDo1vHHX+oA9LQBi4DxJcOUPJUnTgU2NJUyROs8irGARxQAC+PpCtsFd40H/AEf0gMQkLgeACT41PiGoLOKqyrJq3K/Ya9mNyr5FusN/uPLPIeDa8Bc+w3rtyl4VFHaMZc3i9RWBM9jjzgAFsbTFbYLRmm/YBTeQNMAtD4cBKDXBTQGdAB2MGBo8SCLmEuS1AFVAJ3A/NhPt0PoCcA8bSDG76XI7aySg6JYuGfKwJHFgH0E5B3ueMCe/Y4L+xVHAOZ+9EHcEgQgwbeiEYx6jwTdz4qfu7EhEJqxGqruf/RnHIAEnxgwBM0aC8aUAYWNBRCmoIll4HTqO122QcZbrgMWxtMVtgvuOx6wa7/jwhtoGoDWh4MBJ16WN4lfr8AqI0TVV1O1fa9BbQzovkAy4Ed+NgCQUSxZCFWvCOaOFREXyUwZOPIA2GdA3uGOB6wPaOz+QPv5S+MA3OXiN9aclghW+d3IgupBF2pPqxcxGenDPxfSRh2ASiKKiVP2PaZScvAKoA0VDc6cOlIB2GdA3uGOB1zR77iwX/F6AFB9ONSOQW0frA50sILVcckWJyIDSgwPAVcJgFbYuZ3FJvAlEHbJ3IsgJLGedeBIA+AAAXmHOx6wo99xYb/i9QKg2iAIfDJEJHqj4SExbEty0gkdhB/6P9oZbBZIGiKYVb9GKaN50lRHBLOvhDxh/5EKwDUG5B3ueMB2QGM/grb7/6wHAPNGMAY+GSGUjC52VX2f2CD4+HO0gqkZfegXKgBaHkcWtS0AWii9xG1ImrLlN5XR8L8fmQD05BVrmEENmpYSP9QX+KHiqj2/82+HqqDWwnbBRfGATdzAegGwru2DpRq7Mzq2fpAf0Nq0Rl2wBXzglZ4yUAPAmDSVWDBPHQjLcgTqOZ6zUvdKHh4ruDCerox/Dnu7YqwXAC1NI/QcEQuK6WK/kdgCTGC0PYAP/KIDMBgglq+hIkrOfsaCviLSofcJgJ5AdM7kkSaCj/HqQKVIGvD4swF8bcBjmzjsaQ2H5D/6acBd9wALB4DFWWB5AVherMp4GKIYEOp7+26UF0aSfT/xYuDG7wDjrIpAERytXf2vajj7ueryQXSFl10K/ON3gIWDwCLvjfGB8Z54O+Ee4ve6513uB2R1yzsqC+twbC8HcNVhfAeaBuDP/TvwtS3A/ePAIfYFVlPq2HHTuyulZCTlhbjhETF5yxTQGgPGhoHhIWC4VSXGD3n0tLkMHXHxu+YyB+MlPwDuZs5K6FlsbCzdVO9DuKfkHM8AEkP7B8fOkwDcD+B7np42+JkGOvKdAL4E4K8P0zvQdET0b14D3DgB3D0B7B8HZka9WzrD88N6sFm+YcUjrn7E1ZDvMtF9DBgeAYaHgSGB0PNHCD4BLwLRsByAyX/ij0/dDUxuqlIG5hix7eFhvLcOVUAtyPSydAFmOQNe6EYGV/9ZESiKgIEgtbaD/gHALQC4ovY5r5KwtjOU/XfTAHzzLuCmIeDuMWDvKHBwpMoN0WQzNtAaYSs0K4ZlOSAjGG9kPjCBRwZ0ABKEBJexYAZEAU3A7Oi1BeDym4EDnjQ1TwCGWMW8MXcKks0YOyZNlQOQjcgYIUHllEzYQ0ktm+r6oz8G4F4AXwXwRd8/kO9A0wB8y65KmPxgGJgcqYJTKYpTv2CCzyddQJRDOjKivn+Deh8BF8BnwBtaCUA+YYEyAU8h+c6Az9gNHHRmrgOgmDA3jHQ+iWupCeUAvNSrA9HNwqx+muk9nJVNg/CTfrmbAPwbgK8D+PcHkIibjob5o13A3XypWsAkG1cPA9PDFQDZM1id0i1KxsWfOrKnAFXlifCFFMMRcASigOcs2MGAIfE9iWXplS6On7UbmPaUUTXQrgsVMzcRj5Folg2V5ayUA5BWYKwOxKUafnosWjcJwk+7W5F2EKvlE3xcXaNYfiCYsGkA/smuqug6hcleAnAImPbO6YwRpMgjCAVAm/yQmKTv5hNsAf/i7SyNBSl2a8Qv/4/M1yF+BZSYlNQCnnVrpbC+mToAACAASURBVJcaI7sOSEY2NpaDXLqpR+vE/OVksDgImgGgghHoYJbTWc7oJtFWc65/cg2AYvh2ALsB3AzgVv95nS/f4QdsIkT9T3cBrGtITWZfC5hqtQHInsEGQn3UDDvEDEY/ICf7SxMOrAg8T+c00JGkvHGd2DABUYZIAONzCUDppCFhSukCBsLQrFtZe/IixYQpSyEoJoqnuPWrVRAubQh83HNlZB23z7j1ywmj6CIIqUPxw2Xeu9bx2jx10wz4Z7sqTYZaDD8EIDuoE3hMVEphWg66JIp90k0sBxBcy+iPIIaT1RtEsHS/yIAqw+VSNPWQfe5tlVEk8auXgVa5BUsEJuT5uoliAbE5AGotmIAjCPnR9xDG3TQernYAUupTdBGEFMf83OkApHG+XlvTAPwfuyrgSZOhas3u6cwTsUBVn2gTwyFMi8wjHZAA1M9fYGHDULJD1m8Cpa8fRxDad+l+Ykf/3XNvd11U+qiL39SxXevSsshdDFvgbI1O2AwAtRZMZzTBRuDFjxe1Xg8QEIB8yyj5yYIUxfQIkfkIRnmHCM712JoG4FsdgHHp3ACoMH2G6jM4lWzoQarSvwQ6MSB/vporVaFkh+mCLlpVR8Z+dqDZLoDOpHSiQeAFDkBjPrlgCHgCUaFifg67H/9uYjn4Ai1vpTERTAASBaoQJBAKeNqHlL6mwPDZYAOROag/EYRkPX34MwHIvzW9rQcA+TLpI22G7EcQKlJGsYIJhC6ClUMiXfBTbFUQAej6nPS/OuAl9pOOqIc2BLzg++3VmWgIEUz82cRuCAtLIHQQm0gO52uOAb22sC3JEWgRfPpZf2sQBQIgLydPEIFGwPEj8MlF2bSbsulghLftqsCXq9HGgHysznrGgi5qzTUTFH8FLhAUn3hIJwCN0HLncw37qaF2zoYvuKNivmQIuUNc7GvWt6sHNs26twA6vhyq8NEMAHlyntFrDCcQehyaPTl+FwAbXDcmAKMRThakEk8Q8kPg8SPL0qzLBl+A9QCgR6uZGs3vfHz8TtBZvkgGQrEPBVAUg2Sij50QAOjiVKI3saADJRm7dSLYWfSFDkCem/dhZeMy9pPY5QvSDYQyUJoDIK8qMezh3wY6fSL49PcGgCAA8pScJLIgAUYQEmz8RPA17StvGoBv39W24eREiBoNQSgWNI1HBkdgxJSw1AI+dFIbgOYmkjimQ1r6XXC3rAbCHycAgytohf8vsB/r2KRaRq7zpZ+D37HMX0s3DDcCUGLYaw53MJ4YUODzusqlGCQAOQCejuxA8UULUkxIwAmMAp8Wa3qkN/R9W+sBwOhIEPjk5SLr8HeKFbTQfb77csPIMHGl/4MPbReslPhNe4+MiTpi9AFGV4nI7MfvagNQLh/pfrYnDAS8aJQ42A2w4em2cAyWQUuJVQTGWLs1uL7DG9J1RjhA+jvYk4t3KXeMqijpzrud4At9z3XtP16yGfjKZmCGooYh1tZzvv8xXPFl4PoJYC97k9FlwZWD+Azi/deMZWeP13eQCGEyoERudChIjbb3mJYwH7V0QIKuCwj/gfMj0asn2I0FXRSHXfL/iRkNgLyeVj8ccMY//J1fyxzTAXT2+xoQViKYD/1hDqLxPiYxTgSvQrphphG97tz4Slqafnj7uk1kIQDZrvWTw8B3jwEW+RLxPgSiCERdPwPR7+wCPg/gulFgfruDkOMQkFc5x84e708JAMmCuRNBXi4TIg5CGRzGiBGE/D4E/C2r2vcAYJoify62i0aJSMhB+2IHoNwu0fkcjQ85pu3ack5nIBREqneYFyWLkAXIJHESe00Cyx5QyeL6F/tyEcDcrOW2n7fX8df0mME+/vQ/PQjhoy3gzo3AISYf80MQaQx1peH9wb7v2mrtmCBkIMMejp3jIJD1MsaxaMZ8v5N/67INAsB3BAYU4JL4DSo1J15AFPAEwuQHZJzkKfUAtOHLJSOQRWndBYQvCQA01cfnNopfsaCJaD2baBn79QjSTiOEP1EcawIpkq2kegBTNgHWEpOKF8Uwq2NRFPM4AqCf46/rA2U9/uVDvurB01zvAJpiiwOl3fEeciCGF+Ij11f+QkbSfMPfIzqw57mEFZ9Dl3Ps5HXWAYByHJAJKV7N+s0cCQQhwSlfm4lGZ0KB8C/rABgZUS6ZHITBSEhCowUYAAksF7cStWREyxRwtuPpOlgw+5s9sq6OaIJIIlUgEhA1edoTgHxa9HVw5jibZNF+j/9yGQA/7pbujZ4bwv2+cWB6tFo0NzYnkxFA+cvEAo43VBoEo2e+48EMXEOmD9F6xhCE8RwZEJ80VblKvDlmzwicfqy93/o+8K8TwB2jVSgW138FrJQTXBNlnJgmrjZwanow9CBP/rL9wF0jwAGWDtFyoN9PHutnIHT05mPXz93dMGQAPniJsjiBXiTbxDZFMF9NLUPQxKR5qezz1Y6/YZDH0D6GkdAkYJIvRalAdHAMmPZoYhb6NhDWvEyf/ma737CXN7R1ZC7hUbPgcFgqt/ZZjADnM1xqEVhYBpb4CUk5UsL7jQvj///5buDrLeCOEeD+YQchYwG9VIfyg1NaZszFiCH6DkRGLze5/dgk8IMWcMCjdCiCzR8od1B8OTwvJM8JEShFut1fzMhi+eRJr6LI7hYP2M/xVLwKNoZjUTwRMAQQmYyhWGQxsSADOflZ4kukj7PhZ75bETjBpkAGahMkcrGgwhsXeCyBHBj1wmOBQwvAwqKzoFeRV8ZaerjKYAuirmPY/o9X7q5Cyr7fAvYMAftCPGAEoYlBiVtFwLjtp2U4irj7yOANbi+crHyrfCbTquJV44O0F1FrwQGIMZFqdQDyP/gGSZ8TC0ZRRsOlVzzgasd/u+zpMByLehAfCgMQCDyGZJHFCCgLZ2f8mgI5qauEcVx9e5vACTgCTwEMWr5TdIpWKJb5MvrnoocDswvAPAG4VLGg6UKeqmi4iuDz4er30oX0FP7u5moMvIf7W8B+jwlUNAzFnlZCIhvGFRCeWzrgXSSIBreXTFZSgVLHAp4UHOFuociEEsn2PJwl/XEk0dzfSojeerFg1IOo5BKAveIBex1P67lgUzgWQaJwLAKRH04i14ItgDKEtGsRnWx49b2Vkk9wUefTGrKCF7R0JxZMqxN8cmPAxWcAcxGABKEAKPA5u9lEaAbCmKMI+sDN1X3z+ro24wEZFc0VEE64ABgT180PF9ZdBcDb6JpqcPtPk+1ACbmKjJnllwyuILunEAWjZHkBsrsRUnfD0qEiC5IJfyisgMhzWhcP2O14Ro4WbASgAMQJ48SJwchmBCDFa8qpyBbSP7OvU4PQ0p2W7+LSnSJUFOrI4V7w5IoBTQQTfJ6oTSYk2mQcpGRyH2syGjIF6EM3V/fM++C1CfwUExhCsmzCaQT43lZC3e1hBpEHh36XEqrB7Scmq5dV0XZxmV8WuDFzAF9iwhow9seAGoBcGtKjqAc+1l9rLb/1igesO55ysmCrC8ei6IxRMAKTWNBi6Xw98xNTFUi0jEcmpYgRAPhddpVi9OIEPP5cYD4CcLkCooHPwaW9kV+iwWrQHT8uA1fd3F7DFvgUHUP2k8jTiogAqLoxFpDgbMj9jXSuN7i9dLIdaxzBp5XVBMIMgFEnFAPKT9qPd6A9BIGI7MfPmf4U+40HzI8nWgq2PBxL4FEkjKJixGRRFyQQPzzd1iAUzCAQas1YOmAEoFjwkecDC/PAwhKw6CxIkCXwOdVJLxTobMjBdyIgfvimNvNJ7Evf4jWtdnRYD1YNGVuG93VWuWs4Jf+mlZCCZxwP/cnJ6mXVKk2+tK8lQQVHRTGc64SDAZB3Ey3JcxyACkToJx4wHl+YwqloGDICmYmTFgMQFBET8yyYzyAG/AfWX8mCGQg0BTRoHwt9KVaPE/HQ890AIfgWK+CRAaMRYnVdxHbhdY8Wslw1V93UDsmPIj9GxgiAioRRMIJNvoti+SW/Ikd0gwAU8+XxJcbGITJPDvI6XdCFREFSknTB83xka40H1PGF9dnycCxFwygkK0bASJQSVAbAYeD98xUAe5U3jKIwBosSgNsuABYogl3/IwgFPrOIg1Xc4ZrpAsSrvruykl2ucykapkMMh4CExD5DwJfWAYAxwk4MKPAJgOIjGSEGwuCakRhemw6Yv0UUwRf7L00L9pnsNx6Qx4feY4O8pDEcixOjsoTKKpMYjSFYYjOC8Eq3Wnnr0YYS+0Tmi2HysrPGLqwASNYzBnT2Mz2QD91laxLB0gs12GAh81cf/o/OcHyJ+qj0S/zxnhUZbSyYWaL8+Rq2S29wowiWkJPan4MvgrDDGAlRe7KIywDIgR3meEDWg9HbJgApNTkXo8o0i7oVgxnEgFr8F7jEdnU5GvqfJQKQKyEOPlsNIQvyvupAGHS/Okv4qv9oh+PHxMLk8ggBCRxvAmEN+AiEzz2iQfQBeNmkh4K52hJBKOaNe/FSLobLRXCz43rQnu2yi9oMSMDxs2jo8303ERz1wsCGZECF4kd3DwEYYwJjhoNlQrgIjlYodbBPrwMAZfEmyzcIv27gs6XDzC/IR1DOgA9a6DRz4wZAsZ+LYXvQYsHoD4ziOFklna6YD3+nnU6dZ7bGDAcBUImIAmEUw/zbJ1i/scGNDJiLXmle3RhQ+l/aq57gUQCWzwwBKPeLsZ/LFrGg/ShRXAe64Ajkv30kALAjF8R11Dy3K7KRwJcsUTaqWScARou3w/INVnCH+A36n8RvM3nB5XP4oD6DATBYwGb5ajlOLOh6X8JaBKRG77+7ygGYp1bn+V25/01AzBnwQ1ypanD7KWfA1QDYC3zJIj7KgOUzc9nFbetX/r+O5biwNhyX5uSEDr5o0xsJwLp8/m4A7GaJUv/j3/5+HQFYJ3oFPPkho/hNeqBcMkcB2BAA6XrxmMBkfFAci/m0JpwzXw0TXvXtzrz+PKc/Ml/ugzM9MDqCAbz/keVjjGcQA/YLvjoguo1mRslRI6RwfsiA5nqhL5D6nscF8gfTdfxpS+/hLzvWfzMQCoB1Fq/8b3VWaPIDZqsRV64DALsZHVHs1gEvsqFAeBSApQC8pHK90Oql4UEAyvCwNeGcBXNLOPMLftgZsI75ouUr9ousp2TEyIJ/sU4AzC1e+WIFshyAHPZREVwItrrD3wGAhibTYBhxVpe/xePyrNBuWaoNp3DgFwC81O+RAepK/a5Lfe51jxr7JwA83nPXYgq1asl0yX5N48+f4VEGLATlK1vAo5YB1gBSRmsM+NFE57lcfPD5pPFWCJImtyvGgGfOAacBYO59zFglgHgPefZsXV6/gPXBYeC0RVgyJNOGYuJjPka9eHWgjL9bWzhWk0/n/wPn+k8bgFNmgYcsVflZnBRmIShtJM/m7JGibGBoOIIez9wKPP4AcNpylfbNlGfdI+9NjBjz8JVzppckZuJ+dBw4aQ44drk6j1LIY9JkPD7P4s2lwVEGLHwJnncscNIh4Nh5YMsSsHm5ndOu1BGFThJ8/K6JrZtoslST2+XHA6ftB05ZAE5crgAups5TfaL6EF+UyIif3gAcOwtsXep82eIYY9JkXpMgMp/AeZQBC2b8OduBYw8C2+aALQvARgJwGZhY7swEzbNa88IRvAVO1qkF91J36DNOBE7eD2yfB45fqphLnevzdGeBKBfL8UX5/CZgyyyweRHYsFwxYHzRNK6oetSBMDLjUQAWTPqPngpsnQK2zgKbCMAlYMMSME4ALrcnR6JYQIwsoUnjpDRstOLy7cBJB4CHUGwuAtuW2nUDVH1EFUhycSwWjGD64mZg0xywcaECoI0z5P3X5P6nWlHdgHgUgAUAfOYOYMtBYNMssHEe2LgITBCADkIzSJZXpCOnIg25uPrhgnupO/TyhwLHHwSOmwW2LVSik2pCrDsQskzNIBGIpBdGI+VfNgMb5oENCxX4yPRjPj4xaJ0+WGeEHRXBDUz2Mx4FbDoIbJypADixUAFwzAFI8KUJChMV2SUaAGc1cE/xFJef3FYRti64nkqWDrqqEhbrsm5zvZCdPCd8nHzJOLZuABRz9hTHZwPL7LnLnoNMIY2VyaKcjtZLHOAbNgNPngKe4BacfGF1pnydD+hphQ/8XV5UiEueLGnDN1tWXj/3/4cTwAUzwGPcRcFJiDpPt3FLmf5vjwE2HAQ2zPrEzDv7OQg5OSM+ScYQy5Xbo8465u/ZfLTJ7fKHAdumKxVh8wKwealSE6inEoSy2MWCdbUHIghv3AqMzwHji9VLZuDzD8cXxxWZs5c7apmW0fMBnIHKn5X7d6I5npvRz94O7LgXuGIReJSb+Xl1tzqflybwRwqf9i97BQRWomWJQ7oZVFtJoqDX/b/oGODsvcBTATB9gsfGqmzdjtVz+G+PAyamgYmZCoDjFE2anCVg1CeJwOMnTRB/DmUINVkkgia3y08BtkwDW+YqAFJFMD1VAAw6XG61R31O9/fdrcDYPDDmY0zjc1UjivBuAMx1QdMB+WAYXU8dhEU16dOSkppbcHFSrng8MHwnsGMPcN5ypURHp2xMIa7zDz2z8Gn/kVe0YomO0wEwBYKujL7v/zHA6C3AxfOVh58g5AsZxx4fZM7sf3h6BcDxWWeGBZ+cMEFiwGEHHRnDzun7ONHs/djkRgBunql0VDOSHIDU3cxSD4aEajhFXS4H4S1bgVGN0V8we7E0Fh9jVDG6Obr1LJMRwn+kOCaTEYT0dsfqZHXl/p7PrLi9wIY7gO0H2yAgCAWCWCowKrYE8nMLn/a7PQn9X7zIJPPkCcK+758y7x7guNsB6l98gZjLLYet3Ay5n0sv4R+fCYxPA2MOwLEAQLIDPyP8uBg2cRYmzFweAYilKkn+OC8/Fdh0CNhEA4nGA40kd6FES13WLO8v1qHKAfh9B+DoYjU2Ak/js/8NAIwg7OUb7LCC+WAfB4CpBJoIiTRNRmS1l13kqWh3Adv2A8cdqqp1MB+aIOSxWv6pq5D2kkIAvt8rF7BLJksN/jMqfa7v+7/Ak4B3A6ceqpasKMq5akAmlLWY37t8ZW97PDB2qALg2BxgAFwANEGcnI5JcrDZRPlkaXL4u1KJUAfAjbTQ59x6dSvdLPXAgGYshZWR6JIRaXB/NwFI8C1WwLMXzMeSwLfcXuKrA2G+wrLCDcN/IIg4ERRn0qvyySAQX6mG1XuA4fuAbTOVwktRRr2MLCoQyvEZ/UY/WwjAj3jtFJZkU79g1ghkgEBf98+0Umb/3A2M3lkBl/fOcdMok2EjkZyv8773LAfgHDDKjwNwxEUw9yailpwdxBAEYhBbAuGzG3aKkQEJwAkCkOCjlb7Y6SYyf2UwlAS+vKYnAXjfNmDEX7DEfA5CjUcsnzvbu1nDtUMmCDkRZEEyGdlAk6G6lQTSa6m0MP6HuY73AxNTlcJLZ6WOJYC5/CNxLpHMgdKIKNl69Qvu6/75AjHOiTU87gKOOViJb748BKCWrnK/maTA+58AjM0Ao7PA6Lx/xBAupoYDC9okBRAmPdBZ47lNA/DhwMRsxX7mPgl+SrmK5EaRNRslXFQ9CKB9DkADn79cZtkHFkysJ103eBbqlh97DpmTQTYgk9VNxu+xYbXKU3lhFoJPOgdFGY+lPkgQxokkgF9Xgj4AvfoFs84eX4Ke9x9fIC+tRfDxvvniif358sSir2LCj5wNjBKAc8CIi2AxxLCzIAGY9L7AhGIKgpATw4l8wToB0JjPrfTkp+SLQbHrOqm5jNyajS6VCMIpApDAWwQ4LrGgXqzIfnq5cv0vN0ZXHTInME5GBNLb1DGdOYQsI7AfGKFjlgqve8wJwG4T+fuFAFytXzCLb+VgWnH/fIGYfc46Hs7iHC8ZkPcdXx4VfVXJw8+cA4wIgM6AHSLKWZCTESfLfg7WsIyRF3ckiRQ+HACXkwHptyP4KHrpJvKVGnOhRF9eBF9wE0mUEogz2wC+WGI/vVxiQQIxAs9+rmHA6E1YFYB8DJwQMZl0OrLZ++i7sfT8zroYHLS9df4RACWKxSZvLXzG/fQLZqk2gqn2/vUCUQ9UZaM9wDaPeSPrC4A5C1KV+NITKwCS/SiCR/jRBDlLmP7nHynsxno1IPwJSyRpbiMADXzuPDYfZfBTEoAmcuVQdiaW0zwXwQsCYDYmMaDA1wG8TBSvaoR0G77EcGSET6hjOvVApfRPAUN0zjr45JzVcSqiTxD+VeGzXku/4Nr7JwDJOkxFIwt6j6+RqUrlkO4bXzp1gCAAv04AzgLDDsBhKugLFUvQUhTwCEKbnKCw14HwJ9cDgGQ9WegRgDI8XEcVEDvAl7lVlglAgi+I4CR+Zf1mLGgMmDFhBGFfDCicRJFERviSABjLS7FC0MFKMU+07wOPE0kGvaoQgGvtF9z1/iODkwn3VWoEXxres5ib9xx1wZufBAwLgAQexbAD0JiQwJOuJBA68/H3Zhk6+3CifqqwWNMKN8wjKgbk6gWJgC+FMaBb5vJVmsUbV2vCqo3cRWZcCIACoax53+ulkqNd7iqOcU1WcC9cxEm5kQBUdZ+sTnSL/jEtTWngi21jhJNJBivZBukXvOL+yYBkcOqxKjJ4AGgxzMrBVwdAMmHrZOAYF2l6y/mwV6xD17zmWo6MbRyeWtOHwxJ91IIhr6rqZS70DPPLXDVUrfBwzHKr1EUp6/h0T/6L/GcCqslt4IhoTcwdAqDSs7I60WQH6R329pHuFyuXDJmEjuOSbdB+wSvuP5bGUjmsA5XoUvcvBXKKAQnApUdXwah0b8jXR2YzJTsC0ZHB33FL+2yiX3h/1YeD1fFZGT81g/H6yqkVa9YEpqMhTADle8erHA6t7Mh6j4ZBXdBGjFyO4CSIm9wGBiBvgqxwIAJQlXIyEJLyI/i0SkAG/FbhaEr6BXfcv+5dLKhCg4z1C1HEBJ8+BODQGZXfk/quAZC6ketAZEQCTWAU8PIJt0fgwHzZvVWNaKqi7JLOmtDWFy42g1FxH/XfqGkII0C+a0tnDkfsGxQjn3VPsk7tXmuy+Xp0JhtoJosAaFcUAJUYKiYJxcqHqKAH9rPlG2cMrmCUbMX9guMLpGTcCMKDlZGhMK8IPnPIn1X5PA2AwegwEEYmDGBMjOI5whGQP3NPBT7VJlRNaKvF4t2IWHbDErtDlSk1p4lJ7/zd246tglGZryIfrFhQ7pU8WCAX0ZENG+57U14Z4YrCeLrSxXdev6TfLwrbxT7znMrfKQXfHLQCnyvmRIv0Q3430ezMmL98P393G3wqz6am1NYzzoGn+svqRmTAU2citctqAX/2EI8F9ACEmLHXLZGoFxtSl2xyK2bAYwrj6Xr12+1noL/jUTCD9vvFrn6u0v1/nvGkaoVBAQi0eummMAuXQHMWJAA7gCixG8U0gFfcXdlBKk4Z6zELgAJfZEKrxpC1xOIl/+Sk7jkcdYlSco90y9+gK6vJrRiADD0piad7RuFo3udNCgft94vCdrGXn+tujgV3QAcHLcFnroelivHkchEL8ue0uQ74S3eubAITS3IQhKkMRjBMokgWG3L//2z3VSnP4VDgQWxUEEUxAZFHL0eR3HDfm3IRbDHkBfF0zy4EIKNhSvr9goGEBdvTz/MIYQLQdVsTwRTFDj5jQmdArRDYJQNDSs961R3tPhx5NXoVgoxleHnarjohgLec3D2HI492yQNvIwvqO9fJm9zKGbAwnu6FhaP5pFuMg/b7tTbpBdvTz68cz/zI8azVj8iAHTqgmFHXDUB89R2dtaC7tUGw4kDOgFb0R2wYRDGZ8g9O8aU4XwPOczhiwGlMjqqLWiFYGu570wADFsbTvaxg8nkow7E8nM/atfKzln6/1mS4YHv6BQ4+Z0BbqHcd0NwwYbVD3+1yWhXJxPBrbq8AqE/XApSqAxiBV2MZ/54DMOZwKE00rnDUWcR5KiV/brjtSAMALIyn+/mCyeehjIYp6fdrvVELth8RAClyHXxmhPi6r1m8FM0ucgk8+y4RHC1kAK/5XgW+2hZYofafWcPq1B5AqDqEYsQ3nepR2gqhV2yiol1COkD0C+aOaoGx4aL7DQCwMJ7uVwomn4fm7VrX2u/XAlELth+5sHPtN+l/Ap6sX2dCsZ/phZkIJgv9l++1wbcq+2WFv2NXIjNKAPzuw7MUAV8DTuynFIEsQy83RgTAhiv+NgBABaQOGE/3mwWTLwAqHnaQfr9GnwUbARgDNBUlkpzQboyYCyYDYdILdf0l4NduW9kGoa4geNdazLElKoA3Prx7DofiETtC6XvE7hGEzJlpcis3Qgrj6d5UOJoYDcMglrX2+y0NPtl5UZUjkfx/Hqbecoe0OZzdF1gHQrln9Bhee4s3f3Zxm4MvAk9VSFdUIw0i+Q2PaBtISiBSSFgCYMjMW00MP7pwvvLDmwFgQTzdHxcOSGvBg/b7ZRZByWYAlOERluKM3Ra9CKWc0q73dTBhMFT4ZwIw9l5Lrpes+HjeBiGCUOKXeuBvPcKTiEIOR0f+RhDBMYi0Lhea4GTaa5NbOQAVDzhgPB1La5RssV3rIP1+7yy5OAADoAchEHBkFbKfGRpiweAPtMs5IFNokyOGk/7rAYC9OhBFwNXVY1at5tftCBHaWVS2AJdEcEinrDNC+Lumiyc1B8AB4+muLARAXTDCWvr93lR4/Z0Xt6ODFQkj8WtumEwHTKDLQejAfN3uds/dfjoQdatGLxb8jQBAYz6/boxiFgAVudzNIc2/s3xLk1szAORoB4yn+2DhaATAGJCtbpkCYq9+v4V+aBgAQ4i66XtaC85YkDog/zdZvzUgfN1N7a633Xqv6fe9msDIHfNaB6Ay2JRE1AHAEDIfI5nzZCLeN4Nbm9yaA+CA8XSsul6yqV0rJ2WQfr+splCyCYBR/HJyKX4phs0PKBZ0lqOYTpvniAiUAmAd+HKjo1cvDjHgr+3wPJQsVCymUZrPMuRsRBDG4AQCsunyJtFGHwAAIABJREFUcc0BUJlxQoH62q8ST8cggpKNAFRGwCD9fkuvbwAkyGgJE3C+Nz1P1q9/T3F1EZBxvZh50s6AEYC5yyUHXt5/Q8zI5/KrAmAIkkipkyGPYwXz1aRT8v5ZO6jJrRyAvKOvNXlLazsXs9bo/ztc29Pohgotp5J49Rcj/pzfIwGS//3OM4CNd1dpntQpFUmjEH4LYIgnyn/OLjL8FeDGhwJbNgFjI8DIEDA8BAy1PFK7FSKf43cNKrvHx+8C/vmxwMgmYHgEaA35J0StpvvzL/nP8RbLAfhyT207TChgDRiu/ZL9DsfWNABvYzbhCDBKoBAk/pEobGWTqp819hzQ1/0k0PoaMDEJbJjxVZFgDad0SaUO5LksWVj+XScDmw5UEUDJ6U4d0nVbC91S3ovfVHp5al64cgC+k7mZAP768KCA0WD3A/ieLz090CDceVmlAuhBljLgrfcAw6PAyDAwPFwBkCAbItM4a/FiNtERjBl76W9ffD2AbwJDdwFj+6syImRXrd5Y2FjIYcnzWPLEqnsfC0zsr6qBMQmfIDR/pyJ6xMhKyMrSDiKD2xja6TADTt0/AGAs1KcAUCFrOLF6tbtiRVFavT/wuMCa7MfVTlH098YBeBcwNAIMEYAUlS4uBULOmK3LCnwOPANlEIOSoF9+C4DvVoWXhvdWZVOYqWgi3vOXDUQhgieB0EElViMYJ08HxqeqnG8D4IIDkAzo51DKQQJvBKUmKACzbM4+5hUivwrgiwC4LzvjmgCh6nBcgiMTcv9Abo0D8E6g5eCjfpUA6AxoQIzgi8ALmWwC4z//DxcPPwBak8DQFDB8yJPpPZHeGCyC0KN5DFCByfh9/+OAsekKgEzCTwD047X0SCPM1IYQjCv2E/MJoGVwUUQoPboq0MdqkWVn7RtDDMahB4g+P6qhXFpjVtkDtRGA2nKjos7IyOyHFUbIrXe0FXsTuzIYfNb4O2M3ATGIYQOmPn6hG6gi3eUkQQAeAIYOAUOzALMVh2pAlESqGFBAXAYOMQVjxll03iO/yYKRAT0FQXkwZkjp1pz51LO2XAT3KtD3AIAwj4Wg05kfiuUHYlsXAJLVnP0INLM0OYFx78AzcRySeTsw2AJueI+Dj2Fne4EWKz5MA0MzDkCCkAByUWqsJzarEanzj2zXwjEGFHuGY+pYsMojzZL1G9EBexXou339IRBrC3lJGmNDuSHX+w7WC4Cm6wWxm8DngLTImgC8pBcGBuTXf/1fXnyTugnFwxTQOgi0CECyIFlsvvJfEnh0mhsYI/s5uxFYi1xZof7oOqSAawwYjRGBzYGXbtWXaCIrlvHUagX6SP/ruMVYCEbEqECXAMjfree2HgA0ESur1/0vtnNwGSsG0RsZME20/+/XWH6Mugk/yngPAGy5GDYALjiIHIgRUIrsZjM7Ax+BSx1S4pfffQVIep8dL7dMDsTGjJB+CvQxTHmdtrw4l0CovFruC2NOe975egDQsCXRK/eK634JhBK90q2C7I1i+Gt0jxF40k1cPJAB7UP2m3MGJAAFQrGei9iUTH9yBUDTHfU3B5+BOIKQ43BWtNtPcWIOzEZE8FoK9K0DCGNxLi3FqaKA9gTgeoFwPQAoI0OulWT11oEwiFz7cwbErzNxWtEYBB+VY76Vh4DWrH8IOoGQ7Ocg1CqMRLPltmxvs1/SHaP4dcAJePYyyUCRIzrTB8tE8FoL9DUMwl61kQQ87Rmy2PS2rgB0a1ci18RudEJH57OsY02y/+83/sZdBKr4FXQTApBvprGgQCg9UEAM+h9F6ugJDkC3gJPBEvRGrYoYCBX9IxEcS5K4i6cZAHIw8oXQ4mLBb35YH5d7OekadtTV1UZSjaEIPH4nQzYNwgjAHNwDuWGYpZc7lzPfX1cQur5oBorfzDf+zi0yVTuSkuxBI2Q+PhQDIUEnMLo1TBCZLufGw/ixbQa0KB8CTODjPohdY78IQmfDjmW7Yo/doAX6GqIiAtDHaYswSmeMubV81kp11L6hy2PdAcgblfslOKC1IiKRmyRxZgV/8++DS8BFrxXi5Hd/U6MeSKdqEsEKhpBRsgRMbAtuG4KU/+9ry5brzP/lPVMv1EPOQegharrVcgZUhVHFxNPcp9VFtlOWkL437C0WABWypFRGsV0sb5Hn2zYBwvUGoKl10v1knDgo0y7XA8Pfv0UACnjaK33Co9gJQAOe64FkNvtZAHQdjz9v2Nz2GSa3jYej2W3KGuZ9ixGdIVSoKT13B2s5AHkGheST6qn0erHv5AIgAAU+LVfw/wq3CEAV7clBKDDGZG9/5oVXx/oyYARczcqH5GyH8eFplTawFvAtrtXLGpNrQDGbejupB3omlIHQGc/ErzOcGSRs8zrhAbbuL1Tco/JfbLlNwHOmi2kIcs3owbdwNpYtynDQhsFcgvuG9/YapGFvYX22zZcAU0/GwA2LJ/4AmGF9mwEbBu98Y3cMF+uAGQCj2HVp3BbPuo3IlqxAy5wHAq4OfARmEBXGfNIBa0BIsG0ecwC67merHgRpZLwocrWaovuTxew/V0txJQ2DWeae3WAGbdhb2DB4+wRw7w5g8Qpv88liyGtoWHzMi4C9fAEHbBi8kwUKu2xNAdBxaGBLbJdZux1LwAGECYAEm6wyfpelJrEgFnRDxESwgyUxIUsVMwjVy5AYO0bG89Auu1/5BF38KqjBHlUAYXsteNCGwTeWNuwtk4JMkrlzGNizA1hm69g1Nix+zDOBW0aBeRZZGqBh8M4emfWNADDT+zqMjQyESdQFHfDbZECCLRgdHeCTe8CBaKJY1rDnBRCIAuGW4TYAZeFG8ZuMkGiQ1IEwGCJtHZBmy1obBsvVMnDD3jIAerti3LEBOMjGcOpa3WfD4ic9t6oveDtLfw7QMHjnH6wPAybW6yaG4+8D4HIQfvtDIVtLejpBFsVvUI7NIBHw3DUjRzL3rDVtsYPOkAScuX3coNDynT2VYJCkn+PjqvUD8hVbS8NgjphGxcANe8sAGNoVY/824BCBtIaGxRe8pLKZdpMkTvXiJ2toGHzSNHDPScAyq3er4qPyGaNc7JCRXWLT2TjwGmCOeQashq6+qSpZmp8vojQpheF58ncdZVjLnjWPHr4VWKTKxrHGUqq97qXu3jp0wPy+eEC/DYNZsZAO6IEb9pY9lNCuGPcNV830ZmkM9dmw+OKfbdcXvJMPdY0Ng0/7GnDXKcDMccBS7MwdKz8KCAKQIgY0MWGCtr4TOHAasMwOkTqf6unyuLykfd254nkb7qsw/iVg7jhgmSX31Vpd9yRHeLx+zRhjEGRbB6wDYT8NdymyubzDzCCGfpMJWfSRYfr9HP/aMgBm7YoxNQHMbQHm+ID6aFh8yS93tAvGQb7da2gYfPoXgbtPAqaPA+a3AEubgGU1RM6B060fgkRoCzj+TcD+04CFE4BldZdRc4/YxlxgjJMewSiwN1zWfsOngdljq3EmY08vm5i/7j5yIMqpvupKyGoNg9lngYosl9wY/0dZdrMzYl8Ne8sAWNOu2MA3zw/F2CoNiy99XbvftrcLriz6PhsGn3U9cM9xMODObQYWCMANwPJ49UliuW6SaqqBn/gGYP8pwPyJwNIxwDK76ahDeN6uXYCuYyABkEza4LbpY5WEWdSLxjF26/dQB0SJ6r4ByAN6NQxmkWcqrnQ00x1DEDJFjR8CcNWGvWVPp6ZdMQ6OVOCb3wAscPJ6NCy+7PerkP5Q3tBY1PrT9tEw+JwbgPu2AlNbgVkCcCOwtAFYcgAuiwWlM/XqDjMEbP9t4MB2YO54YJFMo/5gHIcALV1TRZ17FXOhPtvgtvkqf9H4kvHDlyKK4l6VzvVSBF22uwjOb7pbw+CfcwBSkyeFEHAUx/yw9JTyEbo27C17Ol3aFWNuAlgIn9QxO2tYfNlbK6MvaxeMRYquvL9rTcPgJ30TuH8LcHAzMOugX3QALo21WXBZLEHwRF1OgHS2eOgbgIPHA7PHAezNu7QFWFZ7JnXJ5rnqxHEulvlzwyVNN3+wern5Yovl7SXLGwvn4riLWO4fgMRJXcPd/+pmOymELEhRzBxJAo9gVL4kwVnbsLccgHEpWi3epocCAMeBRU5eTcPiy/6qtl0wpvhA+2gYfO7NwOQm4OBGYGaDs+5ExYDGgqP+ccAkINaVpB8GTv4d4OBxwNw2YGFrxYCmV0YxLNYheCXau7EhV3ga3Lb8g4+R45uoGLADgHWqhsBXA8K1AZADyRvuvtkBSArh+i9DsQhCOtf0UUgW/7aiYW/Z0+nRrhizoxXwFhyAi5y4rGHxU66qAFhT3rDSIVdpGHzencDejcDBDcDsBDBP1uX1CMJRwFiQIBzxieL3KIY1YW5MPOxNwLRb8gs0aghAss1GZ1O+SFHsdRPt0i/PLHu++dFb/x4mXfhcbWxhfCtYMFr/uWvKxfDaAcg7ipPCvFOVpuo3HrCjYW/ZA+rRrti6TS6MVQ+L4NPH2nx698GnXF0BsKa8Iab4dFZpGHz+JLBvApieqAA4J8CPOQuOBBAOV0CUYbIskRkAecrvAdNbXc/aDCxSpyT4CEIyTgRgneiLIp3nP6fs+a4A4N8B8/48CUC+ZGJA29fpuLmxJW+5h5kNFg2jiWHSi0r0Uv4pCoZsxw8DUfnhd4Vk0XGdGvaWPaBV2hVjdjgA0BlpkQ/K9bmn/HOVqtClvKEBqlfD4AtmgP3jDsBxB6DA7tdbcvYzJvQJkii2n4NOeMpbgJktbYPGACiF3wFoEx1ZMNe/4jnPLXu+KwD4t/5SO/iMBcXuesHylyACMBPDgzGg7opM8mEHIGdwrfGA1rC37AH10a64Yr4APvvOSdwEPOVbKxu+K2pdKRTmdI3dqkPPVgbSTBGAY8AsATjWniBdx0QxJylOFCcr6HBiw1P/CDgU3EgEIMW52M8YkLolQRddIN1AyKWiBretf9MJQN6HsaCPxe4rvgDdHOcOxDIAcmDFDXvLnk4f7Yqt63gEIB/Yoj+4p9xaAbBHeUPM8qF2aRh84QQwNQYcGgdmx4C50WqCFngNsgSvQ+Dxu4MuiawhwIAXVk1O+e/A7CZgThY1dcno1nHL2oDIyZULpBsAFTBZ9pjT0QQgn2V6ufRicS8QRgbs5ZYpEsENDejBfpoLrwAOjgIzZMBRZ0AHoUC+SOA56xJwNlEyTFw5FxBPeWvlzpnbANCdQ1eSGTRybMuydgMggVBsKmtYoC6Mt8znZxsZMLzAxoAOvsh+ydDqtXx4FIDl8L/omQ7A0QqA82S/ERdTI22mNfaTuBIIxR4BhKe+y61punQC+MytI/Zz/c9EuvyBeetLAfGZ5WOMZ9j2/gqABB1fMLsHAVBqhfTcyH5d9MByEdzs+B50Z7voGZX+NzNSsd8cwUcG5ASRKYbdHRNYwhhDIHRgGmO0gFP+HJh15jOXjnyKblVT5Cbfoq+yJOszF8P8+VnNPlICkMAzds/YLxlYznrJwIpO6egTPMqA5ZNDAB6iCCYAyYBcBqTRQ0e4630SxZyQJQIvMJ8mSeLrYe+p/GzGfnTpEIBy6US/out+K1wg+brs88rHmDOgAVCMnrEfxxMte1Mt6j7u9zzKgIXzczEBOJIB0BnCJoqgIfDEhM58SWzJEPGJe9hfVH42un/Mfxl9bgSiBySIBWnAJBDGEDAB8QWFA8wO3/a+wH4+rg4RLPYLul8tCI8CsJmJMQAOuwFC9qMI9g9Z0CxhZz65K0wfFBPqu7PEyVdWAOTHVlTcpxhXHZLz1w0ZA6EDLhkCskRf0sw4dRYC0PQ/vVSRAYPo7QCdj7GqVOSMeBSAzUzMxZcDMwLgcKX/zbv45SQlHXDIgagJc+bjZBqAWhUoH/Y+B2D0J7rFa6LYDRmzomsAaOeKqxEvbWacHQB08JkRIteSXiSBLYJOLB+X4xrzAzY7vgfd2S4RAKkDDgPzNEAIxMASSWF38WsgkuXLyXTRSRCe/DduSZMBMwe6ObTd8JBj24Aot07uDObPP9XsIzUGFPs5+JJ/M6oT4buxHv9X7BeY8KgOWDg/Z58GTC9Xq5FxTXOw9c3Cm6k5fPcjgbHbgAlvVG2tH1T3Oavoq6BlniZ+12n5u/2sDbOvasqoFg8x2Lnbcd1GdhSAhXN+7qMrAC4sA8sORJ6yHwD28z+Ft4fdv8UyqUDrDmCEBcpZ39kLS6aq9l4D2rLb/KYsFTPWdfbvh86vQu2s1K/K+zIjTsXIVQ9a59Egs4Y6sZfIA/EcSp/jEXv8BWcAhxaA+SVgSQAkGAMICcwVlNLlqTc9Gbv/HAA7MrL4+f1VlXwrUq7SvCoyGcrrWpGhuur2fNGYwM8YT67hT3s1LaZvqn5MLM0bzmHMmIFSgdFNj/mIBct63NhFZwEzDsBFgpDPeanNgATfCtGsX9TIKwNrg9tuVkhlng7TI/YArX1VkXKrEe1l2SynN1RCsFJsqnQv3UIMxhwIRjU5AGN9QUteVz3BUAvahuNgjC3HxLAND7nBp/cgONXF5wCz8xUDGgCjKPbvevlzcKUHH2ag6cnYzepYBB9Zi2FxDJdjoXJv1WDFiLJ6MKqKZUzoQFTfj2HmwTKcTpVWvcxHKm6kKgoORAEvVclPD6NdzLXpMT8IYNPcLV7yJGB2AVhYrAC4SNA5AxKM9ryDPE5fs6eeVKWGZ2M3S3MQfEyJUKV8L1ZpJXpVJ9pLilmlAxWkVJHKwIhjjD9TtVXVm1HdOy/pJiaMFRWM+bo0rWl4yM1N7oPhTJecC8wRgAttBjQWdBBGESwgSiV0Pb9DRgu0TY19N+M1mRKh8niqFx3rRDsLqjgl9yaGXT80vcL1wnE252PAZCzAHQCoiqoW3yYWFIt664fUpKaREr1NPakH6XkuOQ+YDwy4FMSwgU8GSRSz0UJx3Vx/5vFNbrs/EiLRY+v4ACITww6iJEodQKwBIyBRv9vwhKzUW6z66TUGEwhDS3ezqusAyNxnJn8xa1KRPSFts9YfFB/QDZcAm78CnDBT5U8rCqjfc3yh8Gn/hGd/MsKf1+QzYJ4891Jye13iy1cAE9cDJ+6FpYrEkidxDN3OtXR+FwBGMezoMmxJLOumAuD4J4rxJrfdH/XCoLGFVKiUbw+LAPQqWWaMMLrd6/+JycSIm85w9lOpt1j1MwAwFTiqAWEUxeYH5ENn/jInUVHeMXQ/f/jRePvCa4DhTwLHfBc4frGqqaNJzLPw6iZxV+HTplFGvZrXZT45N39+HW3TujlZv8D6fp8HRq8Dts9XIOR5YtakgBgdrrrt5Qsq8Ssd0BhQ4HMwmVitAWHAY/LbLDQNQDaTVJ8Q6W4qVB51OOqDZDPVB3TLOBepW5jmqaLbec3jGgBGMSxvvemDYkQ9GoKF1ShUCSKCqBeQrvmfVZPC1keBjXcCmw911tTJ8q5XgOLaQgA+x/OdWA2EGZ98gbjleTHdQHQN+2iwls3nK3/Zhj3VeQhovYzdxmArSwQgDRA3QiSCJUrTnjfl4KozRCSCCeYmt90EoJJbVCk/1+FiCwFZxLk4dRfLFia6x8LbYkD9v9cXtLG6+O4AYQRfrgPygVIcqyhTXcWFOJH8fh3rz7EKwnUArq8mcGwK2MCC1i7WY7Zenh56feHT/jE3yliE4TZncd636gPFCKWavGhcRx2J+cvs9MlSw0Ty3cCm+c7n0G0MExdW4BMIbTXE9UCynvyCCX+Ovm4gbByA/xisVgJPpXrzLj4EoRJjJIZrWHArS9iprK+KcefgiyB0XVKGjOmCmW9xhRVMUSyRFnNeFGEdI2q+/HFXclkp9WsAbgTG9wGj08CI64WxRk/OTDcUAvBHXSLQxcVCDMQSWbzv+1e7WVbz+k5w2tJtsbcCYV6WJY7hmAsDA7r1Sz3OgOgoM+KTOJbcjSI5yGIaNE1uuwlAAU/MF+tF5/0sIghVLdVdM2S0bSzHx2Mi+FTxXf8X925NC4BycK8QwfmgVX1LlcFiykEMcL2BndJJ7aQfijKfxLGDwAhByM7aC5U4qwPzNwufNnNuOH4VZaCPlPo2AahqFqoPVFc14ga2m+WEEL0cAz9kdPrOmMu8r1o/rTsXz7f9oswFs+jO6LAqkvC3Ggg5Fg6mwW03CUI6X12h8lyfcz3QHqr3DIl64DbqaQKc9mI87QXACD6vpJqY0EVxz2CEyCI5eMSGX2e7VtI5J4yTRyZhscrvt1nQuivOAaNLlYESwcySgiVbr37Bfd0/u31yEgg2FVaiPCeVOguqAfGov0iR0R9JABJ0bnwk9nMxw+fOh55EbgRhzozrBUA1polN9CLwok5HEEUQBjFMQB7D+j656PW+IrJ8O/bBCo4sGFdGejqiyYCx3mKe9/JtTiBvmI5OFiTisg9LtJFF7gZGDrUbHKs79+hyu5hSaUvh1foFr3r/6vZJCiXgCDwVVFJ7MVmRLsrGltuFCc68yFdACMDAflwR4QM3HPoKgIExt4gz42SuaQb8hBOE2oZmlu+KFlKR3QSssMJxDPWbbjpfLoJrxG8CYT8MKGZSVTCxYFTIb84nkCxCIPLDiby30gXFghaF4c2ReR466Uu2fvoFr3r/fKAEFxvpqMcd9yonIrkuK5LLV7MVCM+/uDJCyIC2J8a0z1iwqyESgMl15Sa33QKgmtPEBnp11mwuXgO70Ud4DHWzfgDYC3zBEOk7HlA6XKyHQzb8HgGoCSQLqsxorIy1Bxie7Wx0rFaf+wr9Xv32C+56/7HbJ5VHtRYT+GJrsehHcya57PyKAQk6+vBkBZPpjPEExlwU59awg3C24W6KBsC6tqHR+MidyVG3i3rdAnAsH2T093XT+zLr197MTA80h3SfsZP2UqpCrPQ46oF317VrpeiKXTJ9MhMLkgGdCacKG/mupV9w1/vnwyGgCDCKWzJe3lqsyzLWZWe6/kc/oKzgKH4jC7oolhdC4jiuzM0WPo+cPQ2AsX1obFCTO5Jzn566PwbReiwnfTWjI4KvDoh1juh+aT+WKSYD3i8Aql2rJk+VsVQly5kkddv2FvHT61icqO7Fr71/IkLNXOi0FQjV0046oBy6wZ922Q95ICqDEaL4XWw3COcf9Mw73DFB9AqE6wZAAS8XuzGQIDKf+oVkqxt00ttAc+YT0PJ9qRFSB8xoye5Xu1ZVeCSgCLbYLVNswoncHxoeLwCzBGjBNki/4BX3z9lXgUCyIIGmhova83cRgO5Te9yLgP3MfmsBS8xs8/U67ePQOqy9umBUruDchqo8sHSd3PMfT5ifo+ack8eFHI6QEcnT5GvdOnVdXof+ptJ+BVPWceiaRHA8Us/nkACo8mzqlqmWrbFDppT5A5UIZm7CPA2Vgm3QfsEd909kKIqB1qJAKCBG8ZstZz3xHOAAiwmpDIdng1maZQAkZzsHZ537YfQrwNyxoQ+HakrnS0h1mUA1C96TdJTmORyhC3oeqdwROi+GDhkFI6bYNrcNDEDeAkXwQizPRpmnIs3OdqZPSaRFUcbchHlgie6agq2kX7Dd/+d8lUJVXuUzk8ERmS+2vfd4uvN2VOV5rSwb0y3JhgIh9wJeN3YMQCIgR78Q+nDEVYBYZUrUpbXFnM7COSdf7N4IPvtDnT2BY/h8Chh10MXQeYGS+7GGjaQiABpuNIFiECnzdWJMIUHcazLptC7YivsF8/7FgLFMqpiQL5TuNbKfA/DC46rqqAbAwIKWK+timRUBEiNGsOQsyQm+Gpjd4n046hbT84KPuYjOmHHyp92gcgDS2OoIuVIeh/xyUkaVwyEWdLrewHE3uBUDcKIwnq40HpDXL+n3CzbaKdguel5VnFJl2awaghLQBTzteZ0cjLq2A2n0M6EPh2pC57Wg41poLzZsAZNso0Hw6eVR/J8bF9YjWGmVCpGKwQLBRCcrbiSxNLgVAxCF8XSl8YDHHFPW7xeFBRwv/rGqOKUBkODzqgdWPYAM53vTASMQu4Bx9J+69OHIF+N71F1O1gUB+AsBfFqKC+4Wi4BWX+CYgOTAU36wdMVNVKka3MoBWBhPxyiuko3xkSX9fvGMkqsDlzzHC1N6SQ4DoINOe7KelWWTheziObeKCdARApD1AdVnRH048gKUAmAEYi6Oh4DJV4VoGDWqjq4XLbO5o1jBoimEPhPJmwu9FvnTLgdgYTwd2wyXbMyRKen3i2eXXB245FlVYUpVxUpGiLtmGBlrTEhVUwV8dEkVKAq3MHJ1uzRbRx+OOgDWFX6MsXJU/36lJoEoA2AKvw8+uwTEDIBbStdOs8ddDsDCeDom7ZdszBIs6fcL9ror2C75US9IxJJsEsHdGFBil4yYuUwknofJgF4XcEUfjrz+X7fKo4EJJ//PkMORO6FrVjQMeL5kJhZMMXzLwNZCt1nzDFgYT8cQwpLt4hDON0i/X7ys5OrAJVe0S/ISgFY7j9ZvnQ7I3+lyqpYaL98CWp/N+nDkZdhi6bW8An1kP3fRTLKVWlwF6RZCH2L4zDDR0k1IqeTNb2OQSYNbOQMWxtMxeqtkY6I+ny9VEz6btfb7xc+XXB249AoXv85+tIBVgJJ6n4lf6oV+mfjdDJNMH0wAVFX90GMk1f5TxlS3Fggh92DyN0IORy5665KIfCktsl+K3VsGtpVOWOMiuDCerlSnjQ2rB+n3C+pIBdulz8wqonrNPLKgwKaC5B3s53qhXVq6oDNg6sOhqvqhEr3V2VNLBjmnSSNdrOLJ1zkAu6VPRjFcFz4fXDJ8i45hG94Gt3IGjOFYA8TTlQZ/qGH1oP1+8ZtlT1MAtHK8mQg25zOZUSCLIliWcbw8wfW5Ln04ssqnHX04euiCk6/3de66MPpuAQVZAEFkw2MKFw6a1wEL4+lSBvmAOMhD8vkOkFX77feLNw14YT/ssmc4A6oOdHBEkwXlgjH2k4Nal6wB4fIuX9LzZjAmorNeHMo5Tc0OewHwDTUh9HXxfGJsYkAbAAAgAElEQVS/uvCpoAcew6zBBrdyBlQwwoDxdLZWXLDFkHyF8xGE/fb7xR8XXByAAVC1oB18HQYIT+8uGfP75SCUs1o64he8v4j6cIQ+IqkPhxrBCHjdjBH6AblQkAeY1ondukSiELmsUPpjbyp7XuvDgAXxdNZVvWCLIfmKg6Bbhrjup98v3lVwcQLw8gqA5v9zC9jErutltg8gMxDWWMBaMVkmANWFyEV6R0uH2I1IzW7ypbkQOTP5f2ch9KsFkwp0kQlDAOmxzHpscGuGAQvi6VD4RgmAg/b7xZVlT5MATNXwqQc6KGwf2U2uGV2uzg3D4ua7fDnPwZcKgIdq9GaIBPZb0YdD7hgyIFWMXiH0eQ5vXS5HcMkc++9lz2t9GLAgns7KxxZsCkgdtN8vWD+vYDMAUpcja7lOR9eLVcIP4tcuob/3AOHCdW02VTX62ApB4Mv1v24gnPy9HiH03fJ366KYHYTHsgBBg1s5AxbG0+HLZaOp65i+ln6/YM5EwdYBwGj1cmUkE7+8THLNdAHhwrUOXtcrO/pwhF4cct2oN68BMDCfmsJM/n6PEPoYPp8bH3kCkbtjji2tJJA962YAWBBPZ0WBCrbYsFoOf9pDAiENk179fkuvf9nTXewKcBSjsn7ldonWbgQpx+26otaLIwAlfi2QQSJY3Yjy5i9dmsFM/oEDMM/Z7Uf0RiYUA7J+ToNbOQC3e0WBBm9qLad6HICG1ZK1XB5PoxnuOOIcxSXe/Of8xHV/P+FpwN47gKUpYHmuSve0pKZgCKSq5wqniWE1WZz/xouBm74KTMwBI17lVBXwtWSs+8/vL45Ff3vhpcAnvwos8d48DZX3M2hx9XIAnu0IIO0chu35AOgLL0yuG/jOmwbg028G/mNz1YWdETbm4I5BrFlov+EtD2wIo7l+Atg8D2xY7iw3V5diEqO54mnj6XdMAYcU+6gon7A3NSO2qFjlyZYDkAX6uD5Iam44YaUfVNDNxaJcLIPXcGGpfi6PnZdVD1wPspQBX/wl4OaNwN6Jqg+xwrxslcVFuYJblehkcYYZGPS3L20BxueBcS8nwg5H5kZkx6TQSbXFZcCQKadx5Cz5mPurAFxrRaa17pAR2PFC+ElSHKQ/0QjQcgCyGyM9v3SnsDBRJgL6msWCf6IfWeUJac8UFlpY8500DcCfvgb43hiwZwyYVhd2D/VSrKGAmIDnBkiafEcN9cprHgKMzgNjS1V7rRjRlceyrqif6KAkMgXIM+6tAnDl+zSL36O9+U8p9jGHQo285/2XA/AnXeNnKAorDXH/AILwbSvLEz6Ql2+cAf/3XcCdw8DkKHBwpOpFbE2wadzIdyh3jjNQirYWEwYq+/zJwMh8pf+xKNSwM6DZMmzNRRbM2K+2Ii6TlFrAWfd5V3i/F7IgT2LBF5LbIdkqxLPWvtzlAGQ3RpU3Y7AiixMxLOUB2t7pKQ8M0qCTnp8HkojJgNqaMEJesQv4AR3Iw8DB4QqAs+6SWRiqgJgY0HVDAdBA4Ba4xN7ndlSFAAjAYX4IPO5dBDMAdS2i+Jx7XTf1eEdTDfgAQnR34p/wQkRmjNAoByDT/ugFphXAmjAEn8qaPQAgZCs0lSckCNmVigEbFMsPBBE3DcBX7gLuawH7hoAD7EM8DMw48AhATrjtQwiXoqkTEwWd7LOneXNCbz6Tiq/TInb2M8ZzIFrTQbGiy92oGz7pXl/7jvdAJnb2470IbB3T77Sai+hyAP5voTqW6sKwFAc/TAdc5+3dvcsTrvPVYSK4SQb8xV3+6IaAqSHg0FDVh3iOIFTIFxtit9orL5Z/LD1Q4s+B8OnHVuXwhhdd5DoLGsgCCJ04q66X/Ju/vSaeAxDPvbdtmdtKDV90gVEPIl/xySkviOhmAEjrlzSkwj40SlQZYZ39I+8JBMx8mZryhOsKwqYB+KpdVSDFvhYwPVR9BD7uyX4SwRS59nNI+bRck/DzJ05v12M0nY8fAk8iWL5BB5qASPGRCi8EVjzv3mqpkC9ACrrwhKukB67GhpqRRowQMqCiYbj8oOoHeUWpdYIBAUj8c8WjrjyhNIJ1unzjDPjqXdUjJAAP8TMEzLYq9uOHICQALe/EwWe+QgddAqCzzD8+vgIgg0qp+5nYjaDzCgjmnCYone0klqP4JSgvvK+6LoFPoFMlkPGh+0rPWta4RHTNJJQz4M8EAGoNTPVU8opS64CC9zoAWTFChcq7lCdch6s3L4J/2QFIEBKA1P9mHIBmhPh3Ai354RyAAmWsR/PRs6vOR8Z8FMPS97yxtIlYgVB/I7jC0rIKSfLXF1EEB+BFFjQ3jCLA49OWsRTTEPzvzQEwry7VrZ5KwzAQAPssT9jw1dcHgCrORQCS/bgn+1HsCYQSveaHkzvGv1scgU/6R55Y1YIxhvOm1EZekQWl8wVDxJgwc88QiJc6AKX/meHDawX9z16M/Em7bO8Q08GBP/jEkAEVjMBoAFWXUjRA3KtNwOBXW3EkAZhrALktpC6lKtTV4OU7RHB+3kHWgv/zrnYZl2kCkF4uF8MGQGc+MqEYUCA0n1tkwxbw4ScHAHr71Q7W4++c8czwcBAmHVB/c7Bcek9b3FuwbdD/kjGWgzJjQ3thGmVA3jhfOyU+RxB6FamOFp8NrhsTgLy8Cpzm5QlVptAU+6CiNgXCaIQ0BcDYV8b0P4pi30vfIxD5+w72C9aliegW8MHzqrmh/meuFhYi0pKbs6D9fsh/n1XFMrYMbPgUByCZz6J+uEknDA9AornWFRb01WZEsACoHhOqyC7wdetT0QAK2KqOb5MCUvPyhLE0oQxzqaYNXL5xBvyVXe12vByLADjXAvgxBvSPGFGMIjCmJbEW8HfntxtQmxT0cmxp9UPAdKAZ1upA6EB7qgDo6oCUxXRtPVSpAwJpnUhuxAqWCCYK1MBExZljY5S8SYr+pxAFAuBayhNG26jw8usCQLX0SAAkwwcAEngyQizaXoziIli+Oe7/9kJvNk1LmBMe9ECO3XRB7aPeF0EYHNVPdT8gj016YBcWtBfBVYJuz7mF7VgGY/pO8f5WdQ1/7U67nIKNS7j0wIbDPFZsyNHHY7od/xdlEHj8CcC3TgCWHgGAPSxiSdt4312u/8SPAl8/Dlh4pDeZW2PD4J1c9+uyDaIDkgEJQKnTfG/N8nUAmu5HUnMW5ARbPfEuIHy/ACjRK7FL5pOR4RaxgTHofKl8r/S1ZWBnAGDKefbn3AFIPRPXB7sFiVQimKVgGdl5ooNwLQ1/1U+DQGSXQ9r5Evy1q9rZbP1lGQDZsPpzI8APHgXgod7qUx11YtBbFzC+/C+BL7SAWwhgdoLkONSLqy5oLogYft3ZI1F7EAC+phsAnekokhP4HIzml/PvthQWmPB9LJ7jxkcSr14jWj4/0wFlgJD5eoDw6fe4DzAYPHokWhHJZ3TFSkn4h7YOSOBwEtiMTv1aY0uktFYTmI2/43EMQmCuAJmUE0gmVD8EFdPpdnxhVhqzDr8F4NMtYM9Jfg98EVTeNu9Q2OFZBX7vr9vtgm/lcezczZ61ZNN8DCvilYCdPXqNDQpAlfGTKm0M6AA0PTAyoMSx64cRfPQHXsniOTI+fEWDFGp+Qb9BeySRBV2kpl0QxxGAlHDmkI56X6z+EP7UDYSdRgh/IouwIZ36lHabBE0GJ0r10Rgb/xA/tt/j/6aMAf+7R4CxzuBXWRGULwBfIrY6UNfpvLae7n0I+LO/reoLMqiVMbW38oUhkNkQIzZO7tIweGePcmWlAFTjAYHPVGwXxWoLYblEDkLuTT8MDPhXLJ4jALpaJB+ggU6xfgJknT7IKXIQXh4Y0FZCog+wxiUTwSkXUbSMV1rB/A31OXWuFpPUda/mRHKi1e6U+hA7Zq7l+A+UAfDtHg/LrptkQpZ727cRWOL9542Pa3rOvuOqagUltgtmJM08j4/PILbIDKz6w5PAHsbraTnMGdZWIwIzxIfeK0rn578J3LAVuH8CODRahV/FFQ/1IumIvXP1QudNfyNT8oVqcHviPcBd48A0g2RDuoDqHdb2SalZAdG9dnfDkAE0gXnH5ijWCDbKCq5/MRiV0QD8HgHQ63jG0hdsLGxA3x9Bw1Asli7hO3BwApgng/Gjvq01IHrXJ7q3Cz7E++YziF2rs1ZLZ+8H9jJsSoECWXj6igmR87aLgfbGq4GvbgLu2gjsHwdmCEIPSI1h+SkCRjpfUC3iNWcpoRrcnrYbuGsUOMBo7QBCxSTG/igxVcBIVGPWM1h1JYQPnyKNExGZMDIJ9b66eEBGxPDY1Y5nv+GCjfGAxD+DDpiawphABWZPjwNzNLAEIH4XCH0M7/5c93bBfI8Yk2cgVAdvdT10ifDkBWC/r9lGH51NhIsnsWHOfPmEUKT94WeAG8eAO8aAfWPAwVEHISNQlKQUglJjJExqC+H6Nq93kOpUg9szbwLuHa66QzFWkaFieXxi6hgVHOMCYGRuJ+5V4jYJIDKI9KlsAvFDq8QDrnb8NWVPh9EwdFkQ79TlSMIsN0Mi5s9MoOGno4U6f3YAvefL7Y7rvdoFLxOANSA8f7xSgWmd0kCQbmZ6mTLEnJ0UqWLhUkxlrBn6n3wWuGkYuGukCsufGq2iojnRFpafsU7MDxErJuZhYCsJosHtWTcBe1oeq+hxigJgXBrMmTBPnJKLrr+VED54ibHYvZos8sO+DNcrHrDX8YVVyglAKud0LtMjFPtNMz6QLDY7VomLJd671AEH4Xu+3g7nWq28ISvX58/hguOBg8vtFQvV/hEzxfqOevuTfpjri8vAWz8L3NYCfjBc6ZYHmBcitnFd06pxyb8W4gPlgonBqffTtdTg9pybqiVNBssyUsdUD7eGO9amnf3sXtxQipl7Wg/sD4A8AwHIyZMYky50Tp/xgN2OL8y051qw2hXzwRCEdT2nmck1RxHG+w5jeO9NFQBpR6ldMIMXlFWgVndqF2dVFsJzuOgRwMElB6DcI6rznemD0RnbwQiSRS3g7Z+tVIl7PC9kahiYZm6IizuLigliT/VoUog+p8P9l3wJ7qGEanB77k3VczroUToWLCsABud4ypaLCUoxf9i/9w9ADiICULrQRWuIB6w7nuZrwaZwLBGwClSqSyz3AhHbaRGEFGOmC44D72UVgjW2C2Z4lIF4ArjodODQcqUGqAxfcpG4mJVuVqcL5tbs2z/veV0tYK/nhTAqesYNHdO5PCJZos+WuzxHJIViuXFyJxupNLg976ZK2lizUKodilGUgzyGhokF8yw5Mf+qRkjdjfuDtwkkm7DTkNaBaQ2ox1q3eMD8+B6O3H6em8Kx1Ccx9ptWl9iYIUAAWrI3I3nHgPdOtsO5eOuxXXBdj0V1vOL/so3Cxef60tlSpYwveKf0pAu6ohfdJ8k4CUqgvr5jV6VGTBKALeCAh+VbZLTnh5gu6D44A6H8cVlkNK95O1WkBrfn31R5HSy+JCwPplAxRegE/2T+AloGncNmbQyogUQx/KwB4gHj8YWNTwRAOW0FIIIndoqNkTAxz/bd09XDGLBdMM6/pLKi5whAX60gCK2ujxzEAqGL2pQ1Jis5AJEAFHvTujYAKjRf+SEugm1d2COQLU/DAwQ44caEw8AtZzSIPgAvuKkdrWMM6M7xCMBoiBn4YpCE2NCfxWAA5MEuwvCCEICwlnhAHV+YORfDsWJGgPpMKwg1b9QpFnzHbD2BK2JGul9s8KkYW17vLALQRTCBpzXZpS4gtCXXMAkduuAy8E7PijPWprXJ5CR38ygw1fJDohh2BlRAgq2OeN7uTWc1D0AFNtmL54ESBsCaJcLkDajxj5ZXRiCIGA0waDwgjy8sk5+HY+X9ppUbJSCp6TnFCMXwny1WAFQ8rUAc2wUrRL6mXTAefWnFfnz3FpbagQKLAqAzoZjAKkkpXkNO5GCEvOMLFXOnnC4xIKOjnQGNdWSM+GqHQGd7JSsxUf+JzQLwhTdV4je1nQvr1MkPGtlf9yP2Dy+gAqZ6rQytfvdHSDxgLwBF8AmAYjHWluEDiKGMiqOVvtejXTBOuRSYJwDJAARgZAGWL9Nk+IM3SzgTydE4eec1nZHbtDaNAf1Dpd/SMx2END6kD0oXtFhBXmcY+OY6AFChnKnzl7NfdMR3qCAae2B+VVMYXASvDs3/X/zHJZcB84vuiqABEo0QPnhnwqQLyRURmZBPytnwHde0M1vN2lR6picoKULaxHDIEdHkW2iWg4/7b5zb7DSQAVd0/griV2JYojfpwRGEYsGBrOBmx/OgP5sAKANkcbFzNWTRnX/GSGImMYH/LYlk+gGvdT+bW+SWH+Ig1GqL5QeTtR2EYj5LVHfjw/ZDwL8yJ6TB7UU3VVoTjTYxYDK+Ivv7dzNAZIxpZSiU8jjKgIWTcykZkBawDBBnQdMr5QeTKI5iWCB09AmEb7+ucnOQ/aTPWn6wuzyS4u+R0Ob6CUGqJpIDA97AdqINbgRgBJ69CG4Jp6q/ckjXqB/RKla4WpkO2ODgHoynigA0JiLwaNiEt95YQKJ4FRC+7brKzRH9jZbN6iJYuSHm9I5iOAOhHNJfZkh+gxsBKPbLu3+JgaWDdojhMO5kkDWSlNTg4B6MpyIAjf3IggJgMD4MCARjFMU9QCgAykhSKnUCYHB9JB0wy5aTRUxmup4h+Q1uAmDs+hpXgFLnB6ULONOn5xACNJqxghsc3IPxVBGAiQG9aLeilWUJW1FvVXEN0TKp1C6At19TMSCBpz1dHtT/JH7N9yaxp6QkF73KBxYIr10nAMproB44qQGTj6sjUrtOFPtLeFQHLES9AdDFrq1E6M13MaxVCTNAXNFThIylLcor40zxtgDAPKuVwDMrOKw+SBTbtR2MND7sZwC7Qvm4wqHa4T/uIrhb+7n0EgbQdTijoyg+agWXT8llDsAFWr/B8qP1K7bT0pvtVwHhW6+t2C/m8svvZlawi2CKe37nhFtapkDnILRqBQA+v04AjMyn79EIkXO/DnzyCBwVweX4wxs9B4rRZgyPVFqykgDd+5JSpBU5r0vHyHz+jsc3ub0KABsZMCyQgeExKyFPVIz3lmcM6OfPAGCADYPE67Jfs6h7G0o+xvi7oyK4cLZfOgpsXwC2Lq9MwuuVERonKn4nSJrcXnQKcM7dwMMXgYcsVxkSebJgzOWPqdB1ad2f3gpsnwK2LXWeR9m3danUIV1lBSCPArBwtp+7DThuBti6UDWDmWA/DvXk8LRptfPtNUlihYZTOPCi04GH3wFsnwGOW6iAs5n3GeJJ+KLoE+9VDClQ8R6vOQHYegDYwuY3S6H/iJ8jb11ck0q9Qhoc9QMWgPBZJwFbpoFN88DGRWBiqQIgWyJY3lPozaGJ1KTEPh36zpTkJrcXPRE44S7g+Cng2DlgyyKwaclfFoIwvCwx9Zn3Q1DmIPx/2/sSaMuusszvjfXq1ZRUElJkKsBEGQyYhJCBSkUqAW1tsBdpuxEVaBzowXZqe1g90G2LotjQdmMjKqtBxQERdAWUAkUlZNBGkQRNyIAEMAkxpFKpqjfUG3t9//m/c/+737njPq9uVeqcte66b7jnnn32/s6///3v//++Tz0dmD0KzC4DM6vAFpd/0L3Gh6yTDgnvLwKzAWDGiH/ThcC2OWDrErB1pRgQisIQhAa+AED+HEEY6uNLyrRnZLSl6tSbrgLOeBQ44yiw8ziwfaV4UGbdegmA5QMTLFlqsfn7XecDW+eAmePAltXiXnkuZSBkRcm4UGXtU2uo3xsAZgz6y54JzMwDWzkgBOAqMMVBCSAUObh8QuN/CiTgcWAuyWhL1amvvBbY+VgxbW477paa7gIBqCnUrbUBiQuhAKDUot13IbBlDtiyBEyvtO5VDxvvVfxW/JkWNFrCeK8NAGsY7BsvKQC4hQCkJNaKy2LRIsg6SJ3IQSe1onKKC2CsOYMeN+0Dtj0ObDsGbFsEZmWp5S74g2Ir2uA22BScAJGA+dJFwPQ8ML0ETAUAkgDTPq9zdK/+sMWpPF19NxYwA4g3PtsHxAE4SQC6FdSgmGWRRIJLZJll8EGKjHiX1jwaN10HzD4BbD0GzC4WrsKMW2pNobZoCu6CLCDfCTqzgg6sr+wFphaAKQfgZHKvpRSYg7HN5XCL2AbAZwPrZGaj6ippXhgn0kqmU1woxnHedg5AATuWHig2FE1uVRwoxoX+Wcbg89S3AqCKPONcCi8oPtVP+9++G3j+oSK2xRBFDElUxbTS+3nvc4FpDsjxllXQoJg8FgdCQoGJJTTicLcQ6vPL6wbg9cDM4cJv27oAzFA5ky9/UOSvmg8oP86n0dICBn25JwjARWDSAUgBHN6vfdbv10AbARh8X91vDM2ss+NvAECKPVLCsHoyUgRqrlbnRwB933OBc+4DXrIC0IEmiLnE75di8HsyAcjzWUVGUi6uICMpVwwJVMXdeOk3XAxc+Hng+vV2esAYw+sWoP31r3eLcLwQBeQUrEHh4Jo2h4vDmJPuAyMLGAeEn7uqbgB+I7DlSWBGCwe31Gb9aL20kGDb/EGRxY6WTz8f2wtM8l4pgL1SgM8esHCvsuylME4nn9cfQLtldg6TZ0kUKorAfij23vAPCmqp3fcCl60XFINid1PlZrf41/dnApB6wSQjutUfIDJR8CGIQOwWEH7DywpKrWc8CFzqRLHkVYrB2jS2FQH5vkuBycXCAlIUUAAkCM2iRBA6+ARCe7DjYmQduLYTleiQ/XTTS4DpI+6nLhZW2nzVCEBaMLd+soIGqjD1ampdugiYWCpeBKA9bBJC9ActAk8LES26SqsftInLZ44dQif4Igdhym5WLrPDyuYH/7HTCNwDnPko8LXrBccjQaioe6BiKad3+QY/MGTH6rS3OBvCnQDuAIyqhiDkQ9RX+29yE3on8IwjxQPI8zkTiApGU3oVkD/4fGDieAuAdMw5MFQjEgg1DYsUku+a3uI0TGBfV7PotwHwaOEmbHEATvuDIutni6UAQoFRIFRYhfe/dhEw7tbe9Of0Si1g8HkrwRcevDajz07gIJ7n05rYyWIpb4ya/7vv8PRdFpj/LXDmkQLAnA4jCCOlTBRN/rFMAJKgkkVHpGUjySSBSFeg7/azqk8EgbSEq8UDRACLKDXSyaQ7Br//DcA4LSCtwnKhTEkQcmAIQhtM+Uaajl0uS9NatITXWzpzfcdNB4DpY+6nBgDaCtanYLN6fCj4u1ay0QIqtML/EYC61wSA9tAJeP6eWsAoDysFpg1eB0HIQRCIIkVeCqQf/05P3WCB+UPA+CPAzvmCaFWDKEuYcl1yMN+Y2dckqGTeHPEvvWDSNhOAfbefX0A6rS8CUw8X9066bFIfdqMHJID++DJgLACQumyc3gyAEYRRKFCLD1eu5ODLF6QvXedx0w3A1BwwxdAJLTXjd8seQnGrZ9bPFxLyA7WIKON63tYtCQBN/sv9QPm6BkLp0vl9t/m6ietR6fbyBA4gnXtORwRRpNnTtPpW6gWLH83lKqcOFTEnDiKtoHwy8RNFhrefyeztbnrBfbWfgttsP+kIyO32ELD1cHHvInrlvWs6TsnB7qAUlg/suFtAWkE55zYQ0QpqcALoNCXTEt7A3KoaDwGQfqoAOEUBa7fUbKctltwCajVbxvSiyvoasM0BaBKwwdKb9fN7NfcqBWGiSWykWXER0umeacUEonQgCKRfIgDFjya5yq8Wfsfs8dYgiuMxgpAg/vnMzu6mF0z6Zj5APdvPQec0TEosnvQosGOhaLuIYvnwEYSithE52F1XFAA0p5yigD4otCqygFKnpHUpLYP0OcKURYv6Mj4MNR433QhM0gL6QongawOg+6rl9CswKoSkEIxPyTsuAPigCYBmAXVfYcVf+n0SRYw6dP1YwNgHsgSajiJP429RrpWOM6cxDiJB6NINM4w7LbUGMQUwB/M9mZ3dSy+YVG0EoBiDBST5ddZ+PkCsAiIlQZDa3LVatJ0WXG2PbL98AB+4omB3oP/HgTUhmGgBfRqWf2TTrUSjExDSP/qWzQDgfAFAWyzR8rkFtDAKX75jo6nUguZxZ8NByHbvvqBQ36T1swcsBaBAGGRg40Ir+rt9WUDhQ5ZAU7Es2e9LLzglqHRxNkbeuW+oQRRls5jaMjnK0a9ecNf2R4LAwO829kQB3LTtEYQPUwzQAWgW0AGo8AQH0ljp/V17pm0KRcEifGuNOnocO1rACQbKPXhs8TtNwVr5uh+n6Zf3wDgu29g2FdMtOc8B6PdpFj08ZFrplw+ZA5FTvAQQ0/BT36FPDkRqBT9Jag7xYlQItY0f88j78sZzCcKPZlrAQfSCK9uvB4h577SCotUiEJ8opq8IQFl/PUBPEoBLxbRE62LSqG4dFB8r5bHcOtiOQSqT5T7RKzYDgJx+BUCCTxZQCwhaQc9oKcEnEBKknj5FsJ1LAPo9xoWWPWDy+6IIoqbeaO0VA+zHB0zxIQDKkn1GgtXiRxMIAx0Vn0Db+lkuFjLRCt5WEwD71Qvu2H5OfekD5FaciQay/GIbFgBXriwAyGmJADR1ck3DwTE3TQ4B0LetzBJErTYAr2BBSI3HTS8tLKBZPo/fWQDZp197Z3scjGb5BDp/L3+njMweB6B83Gj9wj3atOsPWin9WgXCFlVO/3ctf4iD8XkBkH5USlAZlNPZAQqARr5vxu1yjmH0givbX0UQKI63o0Wun/xHuR8E4VnPK5JQLd4VNttTBvK2uoiKOUf/f+GjwMNBh0NMV6J0c0NpcRv7mrYv3kh8/uHxYp+bVpwLp3R7sts2YzouSq3KGa+q7+x7Co4nazAerRKsVlV1QitF59dyyFZaYY0HMu9mWL3gtvZXMbymBIFMZ1ov2h0B+LTLisxgW+Eq5uU92iZ72ud9vvR+4JFp4NjkRh2ONi0OB1/UBCkvEYRhfuNs4OmhhiPKnFQlx6aAjMnSXJUAACAASURBVPjmz1w41nnwO4cCIBvBwZgTAOUHRq3gyDExD4zRGVYEnpm5LqmQc0M5esFt7acFl0SlHiBxuTkYxxdaihUC4QVXFu5FCUD5QtJl85sjGA0ziQxqeu/fem+hw0F2fLLQGxFlYMRvo7v1WmIVtpt1DFkXvOR7LwJ2HSkyoZmEypoVVe8p7b6qEMnidGG/Vl/L2aPOIwuA1pAIQE3DAmFa4j9f7CPaFpCHKujr5xzZesGdHqAqKz5X+FLRAl58le+jui+kTBALMcgZ73CDBkpN2/7+bfcWOhwUyCEAjQTcAVhKdjkPc2RajewKyu/n1//qJcA2uhBMRGXQOcn9U6JIOjXHQqSYOsVoQp1HNgAvz8yny80H5PVz9H6RqVd849WtXQ/zA0Ow2ayGLJ474L0G79vvbulwkJi8BGCg4S01SKqofoNvSIC+5zkhFUupV8rUTpJN06KpaBkFQm5M1HlkA3AyM5/u9Zl38zrk6f0iU6/4hmscgK5ISUtCTowyDqb7UxwsqFJW3fo/vbuIBJEZ1YRgyHwQKNi0KEl1OKTCZJdxtPDn//v8ooaDaVgqFyiTD2IKfcjZS4Fo+7g+HXOPv84jG4DIzKfLzQf8KVfI/FNKrQ6h94tfz+vOA9cGAAbrpylY2SDlVTTt+uCnV3/V3a7DQQAysJAwobZJgUXi78Qayhd812WeiOAZzEyUiAkHMeu5BF5FwZQAWLPwknkLQy9CrPMy8+lIHZFzvN3T+YbV+8X7c64OHHix74V6zIxB+RJ0wQ+UU992tYoFy3fcXcTDxQkoPsCUhFIczKVCegSg5B8A/PILN9ZwxBSxtiKiUAOi7JW0dLTustF8AGbm0/1o3vjjnSGdj+lYlGwdRO8XN+c1wABIoHk6k61yuSCJITq3jDY9Vx0BqK++uwAfX6JkI/hME0SC1EGguiQ+isqcQRLrF6/0jO2w+6FMnZhyZYsQ1W50qOHgPX1NXndtODsfgMwHzMin+0+ZN0S9YOllMzWfLwKQSS396P3iY3kNOLDPM1y065H4gOW3p4uTDkB8zWdb7FgbdDhEgJkCUDRvogTmd/vPv3BVAUBuvylNzAAYi4hisVQnEHoIqWblrxqm4Mx8ujfljT+YjsWBYgIOc0oJPsq1slCpH71fKybJOEoAuuVTRSCnYlmU6P/Z4iSJEcbLv+Yu9/1EAh7JKEXDKxq4ChUiKymRbwjgHdcUWTARgLYXHSr2LOU+BV7MVwzxwOfkOWybYAGZD5iRT0edjpxD6VhcOQ6j94tP51wdOHBdMeXa9OqWRcmWXA1XLUIUH6zyCwlAs3z+YBkfs1u+VIejJEF3ckrjI9T0y/aMA2+/tgAg08VURKT8vbKMUgAMIGzzAcOi5HknHQAz8+l+MW/829KxhtH7tTz+jIMAJPCYMULAWd6fvi+EY9ouoZBM/Kx/4LUBgFLgNC5o16FrE8JJVJgkiFhaQQBv3+dVbMrWVsC8UxFRkjjaVsW2DtRdOJ/vAyohVYK7A+bTvTdj8HlqTMcaRu/XxHkzjgNkIOWuDr8jnYYDKDutgpUhra0uAlAyCCUAK8BXcjBXgLCk/h0D/hcByDxFAdAzoFUqUBYRJTUcMWdPP7ONL6i5bLQeALJRQ+bT/W7G4AuAOXq/lsGdcRgAY+glLkYclJVTsa6ptCX3uQjAKINQstFrAZKIwWxQIhIJuovB/Nx+r2LzFCwlj8Y0evl/MYk0kieVtcvrwGUnHQCVjjVkPl3mItQsIPuElx9G79dOzDgMgGkAWlNyBJn8xKprBRC+zgEo4LWRgcdVcOCjjlNvmx84DrzNAahaFZWLygKWxUNibIhTcPD9BMLLa65bzreAMSGVoXvJ/Cgh1WUfO+XTZS5CDYDs9GH1fnOrIDcAkABTTDCCLYK0Cwi/586WcKJUiEpC8CCBYDsiiSplqUIUmOjf+o2tIiKVUJbgU5uSWl4DWwX4+PcXnrQATBNS+8yny1yEopdcay+930y5YhgAg+9n2OoUeI5TdQer+32fdhmGoOBZanBo+g1yEKU4dYgFSvqB//vZBIBt9RshkTbW8ZZZ2hUgvDL3iU3uux4LSBM0ZD7dPRnTH08VAIfV+2XAOucQAMuVcKfFSD/+IAABsEoGwYAoHZIKEEYxRIHwLS8pUuhjFVs6/ZZhIVWyxVKBBIRXnbQATBNS+8ynI4tBzkEACv+chlUVIKE/5cRGsWmlKfIzudc3APLQSlg3E2OCyVRc1kpU3DgBmKoQsWtlBcswjPu+nfTYtBL+GQdgOf16GCZW6pXlBCqWSgqJypoOAFfXXDifbwFJLvi5HAjlnUsiIe6AjOp4iQNQHRlT2PlgJCUbbc2s+v/hFwFb/q7gm6HlYpBbmTV2sscQyy/qFBj2v0/cAdz/HGD7NDA1AUyOOU+1CwWOewNjKj6/O03F1/WuugW4/XJgfBoYmwDGdH7IxB5kLPIB+I8AfNwZgga5ck2fJbEm8V9zNWPfrasbgMuPAcuseJ8Exsb9FdBhA+7gaQNKB6TfcgCYug+YJT+g89aoBDMmIMScP12uTKj13uDv8zsKig/uJ1uQOsnojm3qB5P5ACRBH3OhPuzzRN9DV88HqQLEWPJnvTy5nm/t/1s4BcuSpRZtGAu4fi+wtBVYEyccrYwn6hF8/FkJp9bKxAKVFsn/d8urgbHPA9NPOEOWl4+2cfoFHhfVrJTZPKHSj5daOtup6JyCpPx8rHWRVQ7WOlrYCMx8AHIzlxkALPD9c0VB+x/A3E/+E2fUYHXdF7KTGwdvTd0AHP9r4PgWYG0KWBdfsBdsMPfPrKKsoL9XAVLAvO2fFylCE4cKliyrDVZNcGS1CqEYhWFiAZV+XntaURdTLmpCEbpchTYLqi6NrkMCzLzt5Xc4HwyJmmkJ+Z73jQOh4NWeDUZiK1K08f0EXt7CMHVawIk7gaVpYJUA9LI1Ao8bzKX1cytoFtFfpdCIWz7rgzHgth8u0oPGDwETc8CEMySUzFaikgtlpW1Ta8JqNba7lVljSRgW+Q6ZP/57WQvj6fydBjXfAjKbgEvMLwWCvhNoipgNpnQshlS4IGFWzIk6ylWwAz93ETLxGWB5ClidLABoIOS7pmGfG+33YAG5mND0G8F4678vkiPJczNOAC4UyQm2N8w94kirFlfIAl7i402d6dbPWWAtrsjOFiuCvAJZOQE0pHTFsckHYDeCvhNgipQNxoAz8/8IPr5nbvH2jd+6AThJAE4AqwTdZKEBLDoDgU4+YVkPHIBoPwareOt/BkDexsMFAFnbzNJYm0IDnVwbt4uyur1kwL7Tp+iZM/08WT9Rc7DHUmuYTr/x+6o4ovvu9fjBbgR9JyA+omwwxvZI5ULg6ZW7y9FPf9QNwKm/CgCcKABovh8ByVy/UCtJq2f+X1yYJPGU27lIZLbuEWDsWBHesZeDz4iURLUWa1TE47LqK12fZmd3OXidFctqm92KatVs1jAEsNv6sdymaa2g8+xUL4I+Pn2beCgbLGWHI/h8G3oTr45iK86POlbBU9yKI/AcfLR+ouQwH9BfmmbLlTHboOnZ/T9+5vaf8FUaAThXsFOQ45mUcgZCWTAxe0UQ+urYMO1/37GtxQmoLCBtRSp30LrDp2SFdzYMgk/R+VNwvwR9mwQDsaspGSfJgYDYNTbp8psCQFJxEIBkQjDrxt8dXCUIY+COH5MVFPi8SOn2n/QYLZ9Gp0cxANIP5IvAkzVzxivRydnKNzBa8fddM84b6AFyAriMF2pajk9kYIeoClXmA3AQgr5NQEHMBqMVFMNaIOayNRL/vhlH3RZwmhbQQUcAasrVVGz4EtjCu/3dfb/ID3PbT7uKAZ/MhcIC0vqRTo4W0IBIEAmEtFwCYqjW03bcmdwBYeoWgetUbrR8snrloiR2drpACf+rD4D9EvTVjIJu7HBV+781X752Czj9lwUZkTEgcPoNPp5Nv4oBRhCG6dd+1DkMz1JIhR1BAHJ7zwqO3fIRRM5tmDK5CoQKsSgOeBYBKFZULTqcB9r6Ni5KYmd3WKDUA0BlhNLM8EbT1QBXBU72aI5ZjUcVOxz7WLkQ8d37vsart/uA6RcPsxNSAtAXHDYNC1AEpf9s01kKwuBwGU7HgVt/1jtD1e60fgQigSe/j5bQp+KYpGB+H62jT7P8/ZypBIC8Dhcx8eY9wF015abhmnoAyJ5WSrKeNgKO9SHxnT/LSasJBim5lRjWBEIVeROInKL1qunybRawLgASdEy74qjaNNzJCgqEEYzBGvK0297mAFSHEIB6ebKDgc8J1ksmV8t29f1en6L5v6cxIK5iK6Xne/5jCTiFcTqVn/r/tWDPWwXnEPTVgIKUHU7ljASawKefIwDpMdRxRB+wFgD+RREDJABpwSzz2c0LfxczVjkVKwaYgtBBezu3SvX08d39P5uO3QKahXMQciourZRAGKZWar/YZ1xXRPe8wQr2AUK7TvbOVTZBXx4MBECRnConUBSFEXT6mf/TK+/qmzAF/0UBOPqBZYF52HrTFCw2LH5G8UCzJEko5nZqmRnPh/uCXmpnVpDTsIPPwKApOaSA2QLDLSHf97iPx0tpISLfz7bl4iFfsUsnj+HZWEeOYDCDnDmCvZkEgedcCjxGseIhBYt3vx049HwMLRh8gA9gh2MoH9ABqKJzxf0McO7XlSAU4HzhYYFq+5D7hwBu/98OQLlIBCKnW39SlXNY+nqeiq2dkQg+gnGPb9/ZpT0lq6MV5D96gLCwgDmCwbdnCvZmCgY/dxy47xxg5SWuUjigYPHFbwA+fyGwfr2rXrMvPB+vp3L3GHCgi9JOHQCkRVPppeUBigXLFymyejYTB4YsgfA20ofRAlYB0FfAlvQqP0/TsX5PLOB5DNu471cmIwiBaRww/F01J+mz2pqChxUMZvpJlmBv3iTocsW4dzewfhkGFix+2febXDAeJO/YEILBB7pU1g8LQFo98QASVGYNQ6DZfEG3fnEqrgLhbf/HV15anbkFNCvohWSl9XPQ2XTM/2s3I4DwPIZwBEDfgitH0Ek6N6x+u/iD7T4g/YdBBYPpWHEaHlqwNw+AQa4Yj54JrJO+aQDB4pt+oCAyYvOPEIQDCgYfeF/9U3AbAMX7ItAlVtAspKZdz5SOlvA2pstxjES3wJ+92NgAGK2gwi78QoVfEhBeQACqNNP1RdoA18kKdgDhxkUI/zKIYDCnqyzB3jwAJnLFOEIW7QEEi1/1Y21ywVglCAcQDD5/Efj7M4CVrZ5AKlkhxeQUaxBI4nvFzxf8IfCVC4HV7cC6ZEX5nen3VX1vAGLZq8ysrvHY+QBwbGfI2E6JpLvdX+ksthpUvQrmX/sVDGZVUJZgb17vJHLFeGQcmCdVb5+Cxd/5xjZ6QzzMLOQBBIOfTV2Ps4HFHQ7CLQUQmUrV0rgKJMsCjsxGAqTn/hzw0EXA4tnAyg5gbTYBorKkUyLnkB9YVhTxu+kT13iccwtwdBewPAus+b2ar9xJAafqfgMQO4dh+J9+BHe5gqZZZzYok1JJUcpaR6bp93P+W/N6p0KuGIemgEWKgPQhWPxdP7NBLhiHKYHUp2DwpZ8rLOD8tmJQVplOLxAqmbRKC6EDYC7/CeCRPcCx3cDSrsISrs04CPm9ArZk55UvKAspYLqPaPdR4/H0g8DRHcDyVr/X6VabLHk2PhjpPVZY7d5xwF6CwS9y/4LbbVyQsEKIufGiKe0p2JvXOx3kinF0GjhOQY+oNRtljji9TQPf/fOV9IZY4Gq4D8Hgy/4W+Oo2YG5bUUy04vUcLCqSJVRWszJbNgxSmMau+q/Ao2cBR88EjtOqbgNWWaTkIFz3YiWrF4nAjtN0nBZrJnU+/8PA3CxwfMYB6LUra3oglL0tps6wlVha5rLiqd9AdDfB4Je6U0s/0BXTDYh80Sr2FOzNA2AXuWIszABL1JaKWq1R+nwGeM17OsoFY5XTVw/B4Cv+Djg0C8xvLYqJCECzgsxmZlq9T8e0XGUyaUizavPtxoFr/zvw2BnA0Z3A8e2FVV3x6c4sqwObckeyhiXAowUSADhD1XhceDMwx37lvU4XxVN2n3rJIocygkr/Vbs7fe+EdBLcfaXXQ3IPWIrpBB6XlnwpR76jYG9e7/SQKzarxM7qJFj8mg8UarMV9IZ4gvNDD8HgKx8HDs8A8zMFAFnPYQPDl0Co2g4fpDZLqKCxT0/7fhJ4fCdwbFvhRiwRgJruCOwUgCpeCvUjZmEFxhfk9W969kW/B8xvKQqnVgg+B6CB0MsI7P70AHgmd2n1NQ0rv7FvALIlVYK73MnQCDLThSGZoDpuP7uCeuX5n8zroB5yxThGnQ0CgyBMxY63Aq/5aBHG6EBviDlOLV0Eg1+0AByZLgbl+HRxnZXJoqqttA4ODovlJZVuSjTQFtq+NwNPbHMAzramdVpVs6wEoPtdNg37wJfvsYiJP9NFqvHY+7vAwjSwxAeNxVO8T6aNVRRRlT6hHrJ0Ovaw0WDJCKng7g86APvNB9wg2JvXO33IFWOBgn8EIf2nRLD4tbe1+AU7yAWbZeskGHwVdd2mgAUCcNKnJgLQrZ/V9/Jnn5JUYmnAE3hCmv3+t8AWQfSzyPK/POOgJgDdsgqA5nfJAvLdLV+bz0kK4RqPZ3wQWJxyAPqDVhZQyQr7gyaXI9axWCFVAGLvRUhV46PgLnUWBs0HbBPszeudPuWKsTRZAJDTo8l8ui/42juL5veQC7ZpsEow+OrZQlqVVuH4FLA8WVyDAOTAmHUQCAWQkOlsQAwDt/9/AE8SgPQpNa07+AhAA6HLXbb5Xr4IaAMfv/eGvP5NzyYA7UGjBWTWjh40v9fSyscHLtaxhJWxFVsNNAXH1khw983+DYPmA5aCvXkdNIBccemfceooAfhAAcA+6A2xLuAGucxrzgKOMexDfV9OwbS2BB/BEoqLSrBoYGgJ3E8qLcIEsP/ngCPuUy7S13L3wb6PU56/m/Xj4Ps0TKCXQA6AXuNeZY3HMz5QANAeND1kwcKXlj6wOZQ+b7R+Pi0PD0DeFAfk590CKg8qncfoFzIRVWVqfFfBhgn25vXOAHLFWCDbvPstBsJZ4LUPt+jdesgFg+qVptWq11bg2gtgfuLiRAAgQeg+oEmsOujsXb5SsAoCIN/3vx04OlNM6Yv0tdx1MKvK7/TFjVmeCD4HQQQhf159eV7/pmc/kwCcKABoeYvR0oept7SEoZQ0Tr1lPuPQFlAtO0nyAcWhpzw/FSjFzGjLx+RGvxzoSeC1hwsA9klvaFN5FAy+9mJgnhaQ0qqagglADo4c9AhCDpJPl5ZommQ8738HcGw6AJBW1VecZv0cePwOY0/wl1lAD/WUCx0mMlDLr8bjmb+Dwp3x4nkDYbD0thIO5aNtfmDi/xGEeRawxhs7Vb/q2huABQJwAlhyy2cC0xoggjAAUCWWAkksOiIY978TmOOqeqqwqAx3WGhHK06n7TDwOcAV/iipPAKjwgrZm2o8nkUA0gKmAHTrp+o9MTrEYvq44o9pZIOtgmu8mafCV72YAKT/RwAy5OPOuVlAAk9Oule6xQRTWUKlWtkU/IvAHAHti5oIwDK841ZPFtCmdr0U8PaC9hVultd4CIC8P2Ztt/m5/qC11TJXlJDGGpfGAmYODgFoCxACkLpuWh3KCgqE8gNVZK4KtxgjJAB/2X1Krao1rfN7CWZf3LSBT4uAEIyWBVpipL7GgwA0AW25GbGENBTRx3rm1M2w39mmrFVwjTd1Kn+VAZALEE5LtIDyMWUBvbLNLGHgd5H/V07BDp7r3uU+Jadgn3ptxekA5MBri0/Wp4wzBjDbCnkMWMqVpE8GJwLQqvfc0pqbkVj5aNk7gbCxgJno30cAjntowtXNaZ1suvSKNhsYTcVKmw9F5xGE+94dfEoP+JYhD/8OC8eIPUsUHokVVKB78XszbzAF4Pvd//PCKVGIpOAr78mn4DZOm8YC1jco+w6EFTDDPJqeCEBZBa5GffVbhmQ8DtZW5TYOvPhXip0GTuu22lTMLSw+aAVl9QhEWjurI/aQiLJkTMLsX9R3r/ymZ73fp1+37OU9hunXSkdl7T3QrhKCtlCM59k2i5CMMSIAGdqxEIwrmptzTsCEut5yilKoJLAcxCq3fe8tLCDBFwO+tKjyuxSCMdYEXoeDrHcHvu0tTwLzmwHA4N/Gh6zNCqqeOSxC2lb8tQSiMwbuqXIqAcjFh2JjBKGJyShQG6ygVbfJegULWBYcMR3rvb6oCRaQwFPgl1M5rR7/JtBZOIZWx/0+s4QeY5z/1/X2tFnAxPpFELaVkdLN8MWGVr4pCBsfMHN8bmTKfCjZ0Ncp456/x58zLzfw6Qf3ABd8pUgEYmqk5bGyek06IQl1bkXScnlN/u8L24Gdx1qVq91KQvrpgwaAAw9p+wnXPw1YjyWMGtDo2ASOFGMU7SIEUzdYD34vMPmXwLbHgdkFYAtlGiim6DpxJtvq9LtlVr/aWKEB8pUXAOOPAFPzwBTZ9r04vdQ9Ts4pAZ3cd+yHxgfMAOH+vcA69/9Uxijmz/AerYpdar1lNSMYzV+vWY/34I8DY58Gph8Bpo8A04vAFEFIknIHohGVR62QhFRSYjQE6qFri2z3iaPAhHNNlxKwArI0Q1IAxwfReacbC5gBPp66/5ICgLKCtqnsrKKlrFZUFPKOr7osMTtdsxzqQRZ93Q1MPARMPllohUxRqkEK6gShOP0S+dY2hlRv99y+ovRi7IiTnTvLqmg6xDPYpqAUgRgsoR7MxgJmgHD/c4E1FXu7FRRbvEgd7evXWlbPpp9EgUjiJpwe6zwOMlvpAWCMVusJYPIYMOlSDZRpoGiNxKzbdIQlXONMWJbGtw4svdgz3El47nzTRvPrrKptAJT6ZrzfintvAJgx4vsvdQvIXK5VYF3sUZxmJUvgA1FOvwF8spKyBtM1y6EepI4LqVMedbEaTp0EIKdPKh5FqYYqSxgo2jgFr13j6XXHnOiSZOeBVSvyC8qC2r05FVvVw9cAMAOA178AWPMp2LJaaekiCPXExwHw660n1oB/niGQazwOkkSepbJ/72I1x4CJ+cJ6lYI1riccrVicUuVSmIW82pkwnHHVOKbFsOozQGkFkwewnBES37ABYMaAX39ZAUCCb82nIlo+40p2gNnvsoKunxH1xGwA/LOzdQOQJPIuHzV2GBg7Cow7AI0l33XfjOsv6oVodes6ISbBsAZMX+kJxU56KY7pkmFVhOciuvTzSt05v0+ryuT/9gDrZNe4wPMsI7VJP3GcP7gUOOdvgL1rRYJ0ZI5IV3hV4/wrGYPPU3/AiRhYusy2K7mU999P+z90ObD7LuBZK0Xdkeq9NSX2+o4HLwfWlopFCC0fgciBMtAFC8CGrYXVoVjnU2G7rTXrzh4kfRzLY1kyGwBoeiGcPiXb5eAzdXWnazPCSScb4j3xfmav8Cx2p50lAMW0VXINitCogl2r9H2dcctWwQxQsn6ZTBbMNtcgdKIbiZj51VcBk38CXPxoQcfCUg8pjcYgZScw/momACnXyr4leBhs5QaBTHpf7X8dMPYJYO8XgAv9e8QJlAZZq8D4xSuANYKPJQn0AR2AHKy1MACKe9nfFI6IEqduEWoHIJ9wlsVKLekoMCa9EAegSTYQeM4TXco2SEMkAHEbBZoj4bbYtdyCVrFqGXgTSxgXYTZeHLi9AMjEQRCVUXP/n4KUaaT8vVTi+Rtg7GPAuYcAWlMCgUVkQfJ2Q12yBvPXMwHImhDWwf81imsTiLSEvHZkr+jY/p9CQRD4p8DOBwteItai05qn31FFdfLlFxYWgCDUIkRkj/TxbCEi/89jfPZ3X2VqYSJQbmUNQY3HQT7hbv2sLoerVwKQHNEEoCsm8R4MhPRjXUGzVEIKIoY7yaEYuY4dgGb5RXruoSgtSCLLarkICQ9f6QNykGjFdjsIBaI4kGlt8W+Rg5g0HJ8qAp47nihAzFpuWtPIMBZJlASILvR6fQ0DCVbJCkJOJCqnk4pGpb99tZ8MopyiKDX7WWDiwYKXiEQOehCrgKh+eJQ+EQHo1Lby/zRlyf8TIbf9XS5ftIb8I92YugH4ay2pLusorl7dAoonWtMwQSTdOFuQSLTGHyIC8kxSIQuA4hwU2WUAoO4/grBcDbsfWElSzg+JCoYDoEGM1ixSkHzgF/wG7y8sIa3J7JPAGWuFJSQIaU01iJHUiYP4e33BrPOHmG/JMaOfTZVYRhwGav87vWKPJ9/rSH4IOGO5sITqg/ggxXs4TOaBAECbeoOsgfl+DrQShFqcEIhyyt0MbMusEkx76iAZXKM8BvXiZAGlF+KaIbaadYpem4aDgpJZQz6YJABV5VcHAJZ0v4FxX6KG5UpYs0KnqjhRuagEVgPglYAl9ciHf8mdUrJh0Qx9vkDBzBywfbkYQIGwahA/kglATsHsDzKA0BATiPyZ4NEDwIeoa/uFYKKXL2f24nQoIgd9R3yQCMTFqwIAfdBWI7+yB5ZLECYLETd85YJl+2YAUNosLIel/xYlu4Jsl6bhNhD6it4WJCvA2Zc4Gxo73RcgJeOqFmGR6rcChLYACyGojmEYdj59KnZ+tIQRhH9IvWA2hiREjDeRI9Cly7fMF3EtWRFawhQIf5IJwE56wdTIYdt7tp9ys1K8JnoJvod9Wn682PNkP4hUy1ndWgstAtBDMLYN5/6PAc5DGNoF4SrZfN+4+IhT8jqwg2Cp8ThIJ5vfSWBXAVCrWN9SMxDK+skaOvhoAc8me654pmUB3f0wyt+E8FyRAGmPlOEoiSD2qgvmAKoOm52fAuiTDHSyIRxx+lI0QxxADubfF5vffMmSajrWlP7nmZ3dSy+4r/ZzAUEHnQ8R70HsXlK+PgJsW68G4XYGZj0EY2EYATCAT6tAhmE0DXcC4faapcwMgAIfLb0kuzT9Qmw5uwAAIABJREFUSi+EfeALkSrpBovbrQDnkm8wAo8/E3i+CCsZ98NCpAp8cUekZyBavI4ET/TnaAk/RQCyAXy6uNSPA0i+wMeB6ePA5HFgZq2wpNGK3FUDAHmv3fSCe7afX8CB4UNEEOolVi/3obastNwJ9cO5BOBKEQMsAcifHWzRAigWWAlCn5K2bQYAOe1KMjTIR2kRUhKVS7IrLia0v+3xwHMZMCbYNP0KfG79zAqK5DxOvyEuWu6VD5KSHy2YAEQAfpaRdl5UkuUctIpBnCIIl4psD03FtIIP1ADAlBuJM47EqqUX3LX9kSBQcuuyftK78xUkHyQ+RLqHZ3Fv1KcgLj5kAQ1s0Qo6IA1nHhNLQzA8ZxvBXuNx8DcS5UYpNnoYxsCnUIqvZo0F3wPTMa7Hv53HOJVbS/l+5bumX7d+5WLE44hxIRJB2NMCqj9ixwuE90svWCaIA6bAp959EKeWChAyA0PTOV2unGMQveCO7bfqHbcS4rJR7Ewqnw5AWhLuImg2uFQAXAVs8RGmntW4+g2hB3P79L/EJ9zGvqrxOPibiVihAOgrWQOf/EBfBcsPNBBqW9Hv6zzGqFzmoXz3B9AePgXiq6bgiv4YOB9QHS8AfpkAFMMjrWAcQA0iO9XJiQyAnos2vV7ESHOOQfWCO7Zf7F40mZFQScRKAYBaSU6vAVcTgN7xXHiUFpDTMK2dFh56912BTiDcvpkATIXzCL4g3WXTZ4jpGfjoF/oihL+fx+0yWUABLwIwtYKKIabgCzHQvi2ggBKn0McEQDaKT5cGkIOo6SuyYzEfjQB0EM5nZgAPoxe8of3sgSqCQM3jkdFLvpRvR13+7UVRuhUFSavNO6otwp88ZZ3+t4M6HLtch6OT9AG/q9cmtf//gV1JDYcnQ2zY6/YakfSrU+Pg1M45NqPt3IEtoM7WFHokyrWKkooglCMWLYjiUXMtK3g8Uzd1WL3gDe3vRRCoUEYCwGtYFxxqgA2E/jI20F5hhmQod98BHNnlxOTig1aGiDanO21yV4DygWuB8YeB6fnC9WEtiKVVKeE0ZGiXWczeJoWMIig5a9V5DA1ANoKDeDylZ9NSXxyAsiKawrQqmCv2HVf5e8aRoxfc1n7xs+khItAUvojvyWryxVcWJZksVSyZoQRA3dcAoHzax4Gj2wtu6FVKM7gMgti02jbV476oUJJs1j/AbA1mQ3Pm8eTRsoZDtR+xZKCiEKmMXTIeXHPGdhYArX8FwG4DGMEnAHIK4yvT58nWC2b73cexaZgWWaEKgU1gjNbPP7PvOYGsUSBkv3hBtmRWNzxjTk9RWktvxp6POj0vARjY9sWkFel8RWxegjIF4RjwAOnZWMPBTGjqvHmszxJOBUD3xyznL2bqROvoP3N3q84jG4C7M/PpcvMBef0cvV9k6hXv+2Yno5QfGArRbaCC0mWv2YtF3ecerNDhkNZIIsXQRv5dlTtGADJSz2gEE1EJQM//026HdIEZLC8B6A0tk0g1Ja8DuzJdphS82QBEZj5dbj7gxZN5er/IZI+67pscgE7QaDOUMyC0Wb8+gXjuR4F5J6YsaXnFhBoAGEVvUhb60jISgCQnoh/OLBgvIrL8v7DdFkEYM5dtNg97tvz5zJqzdfIBmJlPl5sP+DJP5xtW7xffnzeh7H+Z+3+RpkyWT1YxuURJYVtx6T0fCTocouQV85VkHRIGegEuEv/YKpkA/JceVmL8kv6t5/9pu62tfiPWcFQVEa0DZ9WcLJEPwMx8uvfnjT9IgZyj94t/ldeA/S9tMaGa9SNdmsIxbvVscVJ1GScoMt4UPwhAsmMZ0aXzQBsvdGRBjQz0FUpEJRAJQOq4KAnBdz+sfiPJ3bOYn8fsykyVWMfiN3BOzckS+QDMzKe7OW/88aqQzsfE5kH1fvGjeQ0wADodmVGwOeiMsUqHrGOnS4UFy9P/wAEojkEnI+IqOIJQNLgpCXhcmLAtD/D+kgQE235L93tj+YBqgTX9BiCeW/NedT4AmQ+YkU/3sbzxBymQuZhm8g1T+QbV+wWFdjKO/Te2mEFNlCb6gPF708VJ1TXHgKd91GnZpDfi1k/gM2vqU3DUnCuBmNQe3P9vw6pe229KOvB0K1k+ZS+rnrfM2AlA3JMZtah/EZKZT3drxuDz1O/yxAwu9JgJxr3lQfR+8aa8Buy/wdWQZAVl+ZzCrG3q9c/YrkmHy3IRYryAAqAkEBIlopJxNNUbER+fA/H+/+AAdP9PmS9dazicJybm7mlB8nR2dI1HvgVkOlZGPt2nM29GCamcGZjAwlQ+vvrV+8X/zGsAAUiLVPp/wd+zaTMFWw+/kAA0GQQnpCw5mDsAMIrcRB5mC/+MAffTwgfwKY2KfmCZ6ZIkUShrxXxBX4yYaV8Hzmcn13jUA8CMfDqWYeQcSkhVOl8U6uxH7xekrsg49h8oiCENgC5TUG5vKxxT8f2aRtOtcAKQ1s8soPuOVUIwpchNlEEIOyNSIrrvv3hwnckWIZPZsnbcDyzTpvg3lU8mpZQqozyfK74aj3wAKh1LgrsD5tMxiz/nkGD1sHq/YNFOxkEAcuW7oqmXlisuQOT7VV2jwi/kTgj1RkoZhBje8Z83SCAEEJZW0C3gff8tADCt4VASaWIBK0HI9q8BF5yUAMzIp8tNx5Jg9bB6v/jdDPSRns0BWIZeUitIo9IhHmhXTvzCPQddccnZ76U1V/IvC4SBCFyg26DFNg7c++Mhhb6qiCikT7WVUmr6lYn2nRKyrdZ51GMBlZIc07GUBdMjny6XCiUmpA6j94vMZbgBMFo552pu27PXAqXTyAUQcitOQjAm9xX0N9pIwIPmSCmH5QuPqER0L4kDYgp9zOUL6fYxkbZcFceyAreAF3GlV+NRDwAz8uksnT3jiILVSmpWNlhMze+k94vMZfgGAPJeHDjpCrgM01Tdry9OzvmYAzAqLVWIwEShwzbRwwSEn+MqP6bQK5tZlWyhjCCCsC19Xv7gOnBRbgp7cu/5AOyVjqVMmA75dJZ9nHF0yohWNlhMxKnS+0XmMtwAmFq4imnYbrEqNJPc+9kfd62RKh0On8qV9hXZ9askEPgAfI56ziocUgVbzGT28lEtRMoKtg7lBHtznfZNA+CQ+XQWM8k4uglWK/NLYKzS+8U9GReXD0g/Tyvh4Ne17Yb4Zbr6g6y7/aNWcoPpjKRTsJIags5IJwkEAv6en05S6GUBfRWsUExZyVZVQCQwrgN7Wfdd41GPBczIp8ODeXfTSbBa6YYxlY8/p3q/udc3C+jTbtvqt2oadnB2m4oNgMn0W0p+hYWHWbwg9yU/0Kb9EIy+5y2hiCit4UgKyTeAkN8Valk4Le/ldlONRz4AWWBRM6fdIPfHstw/G+SE5rMnVQ/kA5AkLHS0ak7V7reXfhgACaBqDtD3e/nmc5k9kA/A80JReq+U38zGVp3ObJo/BvAOD3dtwiWar9zEHsgHIGlFubqSx7+Jja36anLLcDvvgwA+NDpDfILv+qlzuXwAXuSjrkKemlO2e3U1uWUYnL8dwB/5e2apca9LNv+vsQfyAUheX4VguB+mzIsaG9ntqxhF4Xbe3QD+n7/uHLAW9wQ1tblMRQ/UA0CaHC7plXEh+q4T0OWcfhleYTSHBK0EH/mi+fcRuKQn4I6fWpeoB4AevCz3HOOm9yb3F5mBlZBNclYCj1aRfyfrbgPCTR6AzK+vD4CyglX7jpmN7HY66d1E0ctdIrEEE4wEIMlam+Pk7YF6AMj7EwAVbU82vTerCwhAXopJN9zVI+AYrOeULLZgErY2x8nZA/kAJGWr0naUWdFpy2cT+oCWjpdjLFxE5UzYIBBpEUX5nLnlvAktb76SPVAfAOUHpiAMm96bsVtCAMaKALICMyxDq6cXfycA+b/mOLl6oF4AiqBRIEzBp7/X2Af0+fi1XIioMIlAI+AIPIGPmeROWV3j1Zuvyu2B+gHoFfZiDS2lC0LiY52WUADkQoTTMH1BFSYRdHoRfKSu5v9qrizMHYPT+vx6ARhSuDcAzzmDo5ZGHT1PAKYMwQxME2jiSo/gEwBrrq+u41ZOy++oD4BaCcsXTPiSI3ey8s4KGoG8QwCMFM+0ggQhLR0BF19SXuD/ayakz7uR0/TsMcxg3SjfqWNA0hsrga/ojaq/8WPcC+YIk4Ke4CMSuB2XVht1Oj8zIfXlU8BtU8DhmYRXWdfrdF1fgr3+S8At48CD04DVjXQSDO70PTUnaJ5uOCwsIIFHSSFy1pKPWCDsZxCpw8UVgKSPxLXM937OzxxAljzcPAbcswU4Qh4V3UN8mKoeKm/bu78IfKJQa8VD48CylHQiL3O3/qg5Rf30BKACMtJXjXKQcfBSK8Dfqc3KVCwuN2VFGRnm/yKZtq4Re5ifyQQgM2A+BeB3GHaZBo5MAIue0l7Kt3cC4xhw+5eL7TuCkJk1jBtyerbUfYG5ExjZ/pqrxE5fAOrOq5SmowVIrRp1IyT2R6+fg0bgVYG4CsyZe2UsaiOGKXr4Sfp9k8CxCYAFSKyvXeY1o1BxQux91yMtfsHPutgnnyUuUvhc0ZsgUXib+nVkq6+ZKaABIHsgVZnuwD9sVo66rrR4ImdhLGSQ8zPL/JgBQxeU1ouWkO9PTgDzbgmXxrzMkatl3keivfG5x4r4IRcz5BfkO5vEZ0kgpIfBZ8yKjlL17syy0tMNcOn9dl4Fy6dLFabj1Mpvow9Ify+I4Nlo9Xt+ZqU9VdJpqZh4QDDyxUyYOYJwHDg+DhgI/WUVZl7aSEt93+GO9Ia2iuZKOfA7lhp9JpvAVy61w2mOwO5hmCgMHC1H9O24gu6UD9jP+ZmbtLRaSsei9SL4XDPbAEh/kGQ/pSUcc0lbApFWb67lQUhpVnLBsoKqqZclFMmUtrxPcwxl3X7vOCAtYLSCcugFQmqhdssH7HU+RznjiOlYXA8wqkOfkItTAom+oKygca4ES8jY+N3z7fSG4hfUtp3ihUHruVSsFy1iRvNP+1N7A5BdJACmVpAgZPhGOyCigEjlPLudn7kvFtOxuB4g6OjD8UWLRkCZFRwrLCEXJQQhp2K+37lQeBCRX1A7KPQto1prFEmSYn2mB9EAsO+kYfk8KQhZF8yjVz5gp/MztyOUjiW9bCUhEBhKRCCgSis45uQ/PhX/xfFWMgOnWu2gxB0TF/o0kEZ/kCDM1Ts+3RHYnwVUL6XhDFrAswfIB6w6P1MrTulY0sum1VICglKwCEACqvQFCUK3gHcsFQCM/ILayqP1k9JshVqrncMalOYYvgcGAyCvIwuod8YBJQmZpmGJeyRwkGw4n8jJOJQNw3idLFhMRNB0SgASTJyKoy/4ieXCeFfJBUeV2SoAclFyR0bbm1OHTUiN0/DTAwD7zQeM52dqj8VsGEkVE2jKetG7AEhQ0frJAv6RC0trC1skl+IWlNinGLbSaZg7Mc0xfA8MbgF1LQV1z08A2G8+oM7PVF9Ms2GUE0gQyp+Lwu2yagLgR9ZaYpkSypQ6a6Q2DCqzpkvietXIFdoZfuieGmcOD0DeP0HEbBhNwYPmA/L8zJQsATAKnguEqS+XTqkE4YfWWwCUFZTksYAYwZfIBeN9Tw0cjOwu8gDIZqsoSSvhEeQDiiGYFoyWiSDRypWgi69UP5sc5fIcquSCNeXqe2X9ZAHfM7Khe2pcOB+AT41+aO5iRD3QAHBEHd9ctuiBBoANEkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cvAFgg4GR9kADwJF2f3PxBoANBkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cfOxqYJ2au9RdPtdp/khoEOlglDYT39V1PzQFXLsMXAlgt9PCxJKPbufyf8/KHIPfBPAZABf79Xc5XQ0ZQ1Q7360NbxoHrlsDvs5ZRsgo0une06by6X1mZvtP99PNAp4F4LsBXA5gjw8EGTeqaGF4QhzQF80CX7cAvGIdeDYAfhdZ2sTKUcVrpE7nd31N5gj8e2dIo2osk7NZpMdK0Z19tv+bJ4F9K8D1ACj8yfNSikHeg+5Z969m57Y/8/ZP+dPLKZhP/rcA+AYAF7g1oRUhEMUzFMt6eSJfX78b2DkPfM0i8GIAX+uWlAMppreUUErn8p2gzTl+2flg/sDbTkvIOik+CP20//mzwAXzwDcCuNTPJeFXpEpM6QEjIHm/zTF8D7T5gATYNQCe69aAloRTGulfBESBSYNyxR5g/Bhw7hKwZwl4vk9LnM5JmsBzUyDGAX3B8G23Mz/g9BuUa/0IiutfMkj7zwKmngAuXSvOpUvAWYBtF4BTnspIj/O8zPaf7qdvWITw6eZA0JLQEhKEGgxZhUj/dz3NzSKwbR44exnYvVKcy+mM5Km0JhxInUtrGkmzCPicg3W5LMGkQiZZTm9xS9Z3+4m2o8C5c4X15pTKW2Lb+fCx7WLtjYxzqiql29Icw/dA5SqYf6RTTilg+lYCIXmICKQ4IK9wxfSJY8AZK8CuFWDnanEua9ZTAMsaCog3Dt92O/MvnRGBtGwkqKRmMEkqCaa+2k+0LQDTh4rP88UHj74kF1WaATo9QHQ7mmP4HugYhtEKj4PB6ZQ+FS0hQahpldPya1kXTOqNY8DscgG+HavAttUCvBxInitrkgL4lcO33c7spBdM3kAuSnq2nx9gQfAh4JyVwvrxwel2z3p4aMlzH6DM2z/lT+8aB+Q/OT4EEqckWQSBkGD6EQKQnDCLwBSnYgcf32fXioGUFawC4esyu7CXXnDP9tOCsyD4KLB1rmgvX7zfbu2WG/Jtme0/3U/vKxBNAMoi0KcjkATCN3HOEr3UAjDrwOP71rXixYEkeKMFlSX8ocwR6KUXTJ7AaNE2tF8WfA4Ye7Kw1mwvX/yZn+eKnvcrfzC6IK/ObP/pfnpfAGQnySoISBqUXyAASS1AK0JfagWYcRDOrAF66TxZQU7jBOEbM0egH71gcgXSFZAV54NQtj9YcNIpbONCyh8Ygi8CVospApDuB63g92W2/3Q/vW8AsqM4gLIKBBIH8bcJwMCNMX68BTqBb8s6sGWtsIA6jwDk662ZI9CvXjA5A6NVa2t/IAicnC/aGV+8T74IQPm/AmGuBc+8/VP+9IEAyLslAKMV/LgAyIUInfnjwPQqMOOgI/DstQ5Mr7UAqMF8V2YXDqoXXNl+EQQ6N9v29aKdesUpWJZbAPyPme0/3U8fGIDssDid/pUASCvCaXgJmFguAEfgEXT27gDkuwaUg/nbmSMwjF7whvbLhSDL5TwwvdRqo9oqHzACkCB8U2b7T/fThwIgO01T1IMCoAZxGRhbKoAXQUcQTjkI+a4B5e5FzjGsXvCG9gdqrLGFYrpVG/UuHzBOw2/LaXxzbh43DKeoJwlAHqLndSs4udoCoIBHQE45EPk3DuitmYOQoxdctp8+rFwIWsGFYiFFoLGNchcEQC6e+OJC5J2Z7T/dTx/aApYdJ37AyJK/DIwvFxYvWr0IwEn/H1Opco5sveDUhSAAF4HJpQJkWixp6k2n4IYfMGf0amDHev2I8+l4/UbvNw8Eozw72wJePOJ8und7EkKj9ztKGA1/7WwATo44n45pWI3e7/AAGPWZ2QBkYHCU+XTMfGGQmYIxjd7vqOE0+PXzATjifDrKtTZ6v4MP/MlyRj4AR5xPF+VaqZLJF1UzKdPV6P2eLDDr3I58AI44n07ZMARbo/d78gMubWE+AEecT8e9YOn2Uheu0fs9tUCYD8AR59MpG6bR+z21gKfW1gNAz4geRT5dTEZo9H5PPRDmAzBmRM8BJzqfLiYjSKKr0fs9dYBYDwBHmE9XtRfMsIz04aQZ1+j9npygrA+Akqs8wfl0BCCTWRq935MTYL1aVQ8Ao1zlAnAi8+kEQGZTNXq/vYb75Pt/fQAcUT5dBGCj93vyAaxXi+oDoFLyT3A+3Rcavd9eY3xS/z8fgCQX/LPR3SOzkon55jg1eyAfgD8M4NcAPD6aDmBtB1e4NMDNcer1QD4AbwbwxwDe4UvRE9wHZG1gNSXDLlwLNcep1QP5APxzzwj9IIAPnXhT5ORc5EYCA9HNcWr1QD4AmRH6FQBMTSZZH98ZmD5Bh5g1FopiNns1x6nTA/kAvAfAEwDudnI+EvQxPfkEzYfaCXRSBluQMB7YHKdGD+QDsBNBH/9+AkAobqTADGK7Inw1x8nfA/kA7EXQt8kgrGAGMfBxZ5Cv5ji5eyAfgL0I+r68uR0QmUFoBQU8vfNvzXHy9kA9AORoMw7CdGQCjoUZDwL4kv/+8OZ1gJhBIjGDgMh3vTavBc035/RAPgD7JegjODfhiMwgoqeJwNPPTaB6Ezq/hq+sB4AcXeXEP+ZhGVo9vRimIQD5v5oPAZCupgDI9wg8/qz/1Xz55usyeyAfgMMQ9GU2Op4eAchpOIJQQEz/VuPlm6/K7IH6AMjgGzdl6QtyX5jWjpQFevF3lq3xf6yhrOlIAUgQCojR8gmE+l9Nl2++JrMH6gEgR5UA5KYsc+AZmCbQCDi+IvgEQMob1XBEAHIajgBMLV+0kCdws6aGu3zqfkV9AGTwjftg3JRVVRAtHQEXX/wbAcoXP5d5CID8GoJKvqDAloKOoIz/y7x8c3pmD4zhaqwjRzCYyQg5gr2ZgsFTLweWr8XQgsXjbwLWrnNtMlKgNoLBmZAa7PTCAuYIBlMvlWQswwr2UlUw45jdDSx8HbD+Ctd+HVCwePKbgJV9aASDM8Yg59TWFDysYPBtmYK91IbNOHaPA/M7gUXKXA4hWDz79cA8+W0aweCMURj+1HYfcBjBYO54MMY3tGDv8I3nmWSHOzYOLJ0LLPGXAQWLz3oB8MQUsEa16kYwOG8whjh74yJkUMFgbsNlCfYO0epwissVY34bsHw2sEIRkAEEi/dcU0SP5qhF1ggG5w3GEGdXr4L5134Fg4kAjuDQgr1DtDqcUmZETwArZwAru4BVqsv0KVh8/o3F4v0QXZBGMDhvMIY4u3MYhv95Zh+Cu1xBcxuOU/HfeDIq5cv7FuwdotXhlCBXjOXZAnyrO4BV6in0IVh8wStLuWCsUAyvEQzOG5ABz+4eB+R/ewnu/kOP/3G/l4kJTERlljQtIot2e53/IwO2OPl4FLtcnCqAp9cahT56CBZf+LpSLhhz1N5qBIPzBmTAs/sLRHcTDKbiNHdBGGymOC/3hglEvgjAnoK9A7Y4+XgiV4zVWYDAs/etxaubYPFFP1QkLtCIP8neaASD8wZkwLP7AyC/tJNg8L/xLNBu+YBdBXsHbHEFAINcMVamgdWZAoRrfPdXm8KitLdmgYveWAq+2y7iMqfuRjA4b1AGOLt/APJLqwSD3+y5T1yI0AoSbAxMMzGV1o8/My2ro2DvAK2t+GgiV4zj4+3AIwDXtwBrVJeuECze+9aW4Dut4PxkIhYsdetGMDhvoDqcPRgA+SWp4O4veQ5Uv/mAGwR78+6rQq4Yq9PAOi2fA4/vBkKudKVU7VZw77uKvWFuZbtcMNb5v0YwOG9g+jx7cADyi6Pg7gccgIxlcA5TKhaD01yYKBmVFpBZMfx/m2Bvny3t8LGqoqTliZbVI+gMgHwnMAnCIFi897cLAAZ6QyzFzzSCwXkD1OPs4QDIL5XgLmk5JHk/SD5gKdibd38VcsVYGmuBTaAzEHLHgyCcaokB7/1IkUET5IKxwF5pBIPzBqbPs4cHIC/AaeqvPL9pmHxAE+zts6VdLCD/lcgVY3UyWD0Bj1ZwqgCggXA7sPfWAoAJvaEtZBrB4Lyx6efsPADyCtmCvf00s/NnOsgVY3m8BTRZPZuGBUACdArY+5lWDqGmYbIrLHEx0ggG5w1OH2fnA7CPizQfaXqgUw80AGywMdIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0BxoAjrT7m4s3AGwwMNIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0B8ZYNMbkX+ZekpuIiOQrPar+xs889HJg6jZg5jAwvVZ8B+ll9PlO5/Fc/o+ECjnHfi8zYfkvM5ulmp4qJXVqx5deD4zfAkw/CGxdAZgoHfuh131QkaI5hu8Bs4Ds8B0AWLnIRGCBsFfn87JffDMwdjOw5R5g8giwZa34jnQQUwDo99wBfJ4TM7COiNdlaj2rA/jeV/vfDeATAP4UGH8I2Lrc6gc+SHqY4oMZ74VSKM0xfA+UUzB/oBUUCKMl6zSQ/PsXqZD5KQC/A0w/DEwcAcYXgYnVwppwADuBkefnCim90FmBWXwnK87Uen53BI8sbuwqaz9p5UgnQhBS+ZN1zE8Ak0utviCwq8DI8/nx5hi+Bzb4gJzKZE1SEFZZgS9/2pWR/gTAJ4HJQ8DEMWB8ARhfBsaWCwDquwQKvvNgHXvOcYVbPFJPkw+dDxC/W1Y4tWDpw/Rlgo4lo1T4/KxTihDNpJwj3/UiMLXemprjffC7eWpzDN8DlYsQDiKtVxzEqoHkyX9HRizW+nIgaQnvAiaeBCbmC0s4tgSMu2rMePAR9X252jXklaTFU108K0MHav/nvJ6ZxVVk9OI7GR2IZoGQNc/HgbHgIwqILIVujuF7oOMqWFawCoRxkfEIB5CWgkREBCNf9wMTc8A4QciBWyoGz16rwNgaML5eWKpctYZL3N+TWLX0gvtuP0HHk2n16JDyxXmVhfU0qywbJbr5GSuXKxA/sV5Y9UYWdnjwyS3qKKgarWA69Wg6fjQOIK0HadnIjPVFB+AiME4AuiUkCFnESyCSkmAuU7Cjm15wX+2X2ifBRn9A8mKcW2UFjULVQcgVDl80u40SYh763FfvquhLCxitoBYUsoJfjXKttByMq9CKcHn4sPuCbgXNJwyWkECcz5Q376UX3LNncZyQAAADEklEQVT9fFgIJs6lBBwtn3Tt6FpIz4RWnuQxPh2XIGzm4CwQ9hWIFgBTK0gQHiIAJddKq0ELQh+KL1qUR4MvSEsoENIKrgALHNiMox+94K7tl9qnnMio8MSf6SNwGpYVjCDk/Ju7isq496fCqX0BkDeqlWwKwic1gAQSpzGREnFgREz01eALLvvq2Kfi45m6cf3qBXdsfxRbJMho8dimqOhEK8cXQRr9QVpvPoDNMXQP9A3ACELFxPh+jACkP0fLIKFCCRRqKuPUdqjlC9o07JZwKVNHeBC94DQcZO0XAAkmgotAk9QYrR9f/BvByYfMSATDVMzwTXMM3QMDAVAgVHCZ7/MaQK4QZUHiNCbBQlqUw74YCb7gcmYkelC9YFlwvVv7RRAorTuBkECU9asCID9/x9B935zYzyKkqpfiNHxcA0gLQgvBAaPVkCqm3h2AtC5m/RyEqzw/4xhGL3hD++MmslgqCbgUfLKAcRrmTlBzDN0DA1tAXUlWcDm1IOIIJAjlT/Fd05lbFQFwjdtgGcewesFt7Rc/Gx8iWjUCjGCT1YvWT1MwgUqrf3NG45tTbcu0aximWx9xENcEQHGbcYAEwtSXSqY0gnCdgeuMI0cvuGx/FUGgFhwEYrR80QckWN+X0fjm1DwAWv8RgJFilJZBznz0pQg+AZAAlVWh1GvGka0XzB0cCQi30aSGVa9AF62fLOB7MhrfnJoPwPER59Px+o3e76mL5Kwp2G57xPl0kxc3er+nLvyKtLmhfUC78RHn081ONnq/pzcAR5xPR9mRRu/31IVgvgUccT4dNaobvd/TGYAjzqejumqj93s6A3DE+XRUg2VSCjdaGr3fUw+I+VPwiPPpqJjO8J1Nw43e7ymHwHoAKMFd7QErAeEE5NNJMb3R+z3lsGcNzgfgiPPpomJ6o/d76oGwPgCOKJ8uKqY3er+nKwBHmE+noqRG7/fUA199U/AI8+kEwEbv93QHoEhZTnA+nYqSGr3fBoAtaiqBUImdm5hPJwA2er+nKwBHnE+X1gUzSbnR+z11wPj/AeCpPDD3t7rvAAAAAElFTkSuQmCC",gQ="uniform sampler2D weightMap;varying vec2 vOffset0;varying vec2 vOffset1;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 a;a.x=texture2D(weightMap,vOffset0).a;a.y=texture2D(weightMap,vOffset1).g;a.wz=texture2D(weightMap,uv).rb;vec4 color=inputColor;if(dot(a,vec4(1.0))>=1e-5){bool h=max(a.x,a.z)>max(a.y,a.w);vec4 blendingOffset=vec4(0.0,a.y,0.0,a.w);vec2 blendingWeight=a.yw;movec(bvec4(h),blendingOffset,vec4(a.x,0.0,a.z,0.0));movec(bvec2(h),blendingWeight,a.xz);blendingWeight/=dot(blendingWeight,vec2(1.0));vec4 blendingCoord=blendingOffset*vec4(texelSize,-texelSize)+uv.xyxy;color=blendingWeight.x*texture2D(inputBuffer,blendingCoord.xy);color+=blendingWeight.y*texture2D(inputBuffer,blendingCoord.zw);}outputColor=color;}",yQ="varying vec2 vOffset0;varying vec2 vOffset1;void mainSupport(const in vec2 uv){vOffset0=uv+texelSize*vec2(1.0,0.0);vOffset1=uv+texelSize*vec2(0.0,1.0);}",Wa={LOW:0,MEDIUM:1,HIGH:2,ULTRA:3},Mx=class extends Jo{constructor({preset:e=Wa.MEDIUM,edgeDetectionMode:a=wf.COLOR,predicationMode:i=AX.DISABLED}={}){super("SMAAEffect",gQ,{vertexShader:yQ,blendFunction:Mt.NORMAL,attributes:Zo.CONVOLUTION|Zo.DEPTH,uniforms:new Map([["weightMap",new he(null)]])});let o,c;arguments.length>1&&(o=arguments[0],c=arguments[1],arguments.length>2&&(e=arguments[2]),arguments.length>3&&(a=arguments[3])),this.renderTargetEdges=new ft(1,1,{minFilter:tt,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetEdges.texture.name="SMAA.Edges",this.renderTargetWeights=this.renderTargetEdges.clone(),this.renderTargetWeights.texture.name="SMAA.Weights",this.uniforms.get("weightMap").value=this.renderTargetWeights.texture,this.clearPass=new V_(!0,!1,!1),this.clearPass.overrideClearColor=new We(0),this.clearPass.overrideClearAlpha=1,this.edgeDetectionPass=new Yn(new _X),this.edgeDetectionMaterial.edgeDetectionMode=a,this.edgeDetectionMaterial.predicationMode=i,this.weightsPass=new Yn(new RX);let d=new Lp;d.onLoad=()=>{let g=new tr(o);g.name="SMAA.Search",g.magFilter=Vt,g.minFilter=Vt,g.generateMipmaps=!1,g.needsUpdate=!0,g.flipY=!0,this.weightsMaterial.searchTexture=g;let b=new tr(c);b.name="SMAA.Area",b.magFilter=tt,b.minFilter=tt,b.generateMipmaps=!1,b.needsUpdate=!0,b.flipY=!1,this.weightsMaterial.areaTexture=b,this.dispatchEvent({type:"load"})},d.itemStart("search"),d.itemStart("area"),o!==void 0&&c!==void 0?(d.itemEnd("search"),d.itemEnd("area")):typeof Image<"u"&&(o=new Image,c=new Image,o.addEventListener("load",()=>d.itemEnd("search")),c.addEventListener("load",()=>d.itemEnd("area")),o.src=t3,c.src=r3),this.applyPreset(e)}get edgesTexture(){return this.renderTargetEdges.texture}getEdgesTexture(){return this.edgesTexture}get weightsTexture(){return this.renderTargetWeights.texture}getWeightsTexture(){return this.weightsTexture}get edgeDetectionMaterial(){return this.edgeDetectionPass.fullscreenMaterial}get colorEdgesMaterial(){return this.edgeDetectionMaterial}getEdgeDetectionMaterial(){return this.edgeDetectionMaterial}get weightsMaterial(){return this.weightsPass.fullscreenMaterial}getWeightsMaterial(){return this.weightsMaterial}setEdgeDetectionThreshold(e){this.edgeDetectionMaterial.edgeDetectionThreshold=e}setOrthogonalSearchSteps(e){this.weightsMaterial.orthogonalSearchSteps=e}applyPreset(e){let a=this.edgeDetectionMaterial,i=this.weightsMaterial;switch(e){case Wa.LOW:a.edgeDetectionThreshold=.15,i.orthogonalSearchSteps=4,i.diagonalDetection=!1,i.cornerDetection=!1;break;case Wa.MEDIUM:a.edgeDetectionThreshold=.1,i.orthogonalSearchSteps=8,i.diagonalDetection=!1,i.cornerDetection=!1;break;case Wa.HIGH:a.edgeDetectionThreshold=.1,i.orthogonalSearchSteps=16,i.diagonalSearchSteps=8,i.cornerRounding=25,i.diagonalDetection=!0,i.cornerDetection=!0;break;case Wa.ULTRA:a.edgeDetectionThreshold=.05,i.orthogonalSearchSteps=32,i.diagonalSearchSteps=16,i.cornerRounding=25,i.diagonalDetection=!0,i.cornerDetection=!0;break}}setDepthTexture(e,a=ji){this.edgeDetectionMaterial.depthBuffer=e,this.edgeDetectionMaterial.depthPacking=a}update(e,a,i){this.clearPass.render(e,this.renderTargetEdges),this.edgeDetectionPass.render(e,a,this.renderTargetEdges),this.weightsPass.render(e,this.renderTargetEdges,this.renderTargetWeights)}setSize(e,a){this.edgeDetectionMaterial.setSize(e,a),this.weightsMaterial.setSize(e,a),this.renderTargetEdges.setSize(e,a),this.renderTargetWeights.setSize(e,a)}dispose(){let{searchTexture:e,areaTexture:a}=this.weightsMaterial;e!==null&&a!==null&&(e.dispose(),a.dispose()),super.dispose()}static get searchImageDataURL(){return t3}static get areaImageDataURL(){return r3}},vQ=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#if VIGNETTE_TECHNIQUE == 0
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#else
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#endif
outputColor=vec4(color,inputColor.a);}`,Ex={DEFAULT:0,ESKIL:1},g3=class extends Jo{constructor({blendFunction:e=Mt.NORMAL,technique:a=Ex.DEFAULT,eskil:i=!1,offset:o=.5,darkness:c=.5}={}){super("VignetteEffect",vQ,{blendFunction:e,defines:new Map([["VIGNETTE_TECHNIQUE",a.toFixed(0)]]),uniforms:new Map([["offset",new he(o)],["darkness",new he(c)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(e){this.technique!==e&&(this.defines.set("VIGNETTE_TECHNIQUE",e.toFixed(0)),this.setChanged())}get eskil(){return this.technique===Ex.ESKIL}set eskil(e){this.technique=e?Ex.ESKIL:Ex.DEFAULT}getTechnique(){return this.technique}setTechnique(e){this.technique=e}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}get darkness(){return this.uniforms.get("darkness").value}set darkness(e){this.uniforms.get("darkness").value=e}getDarkness(){return this.darkness}setDarkness(e){this.darkness=e}},li=class{constructor(e,a){this.enabled=!1,this.effect=new e(a),Object.defineProperty(this,"opacity",{enumerable:!0,set(i){this.effect.blendMode.opacity.value=i},get(){return this.effect.blendMode.opacity.value}}),Object.defineProperty(this,"blendFunction",{enumerable:!0,set(i){this.effect.blendMode.setBlendFunction(Number(i))},get(){return this.effect.blendMode.blendFunction}}),this.blendFunction=Mt.NORMAL}},Af=class extends li{constructor(){super(l3),this.blendFunction=Mt.SCREEN}set intensity(e){this.effect.intensity=e}get intensity(){return this.effect.intensity}set luminanceThreshold(e){this.effect.luminanceMaterial.threshold=e}get luminanceThreshold(){return this.effect.luminanceMaterial.threshold}set luminanceSmoothing(e){this.effect.luminanceMaterial.smoothing=e}get luminanceSmoothing(){return this.effect.luminanceMaterial.smoothing}set blurScale(e){this.effect.blurPass.scale=e}get blurScale(){return this.effect.blurPass.scale}set kernelSize(e){this.effect.blurPass.kernelSize=e}get kernelSize(){return this.effect.blurPass.kernelSize}},_f=class extends li{constructor(){super(c3)}set contrast(e){this.effect.uniforms.get("contrast").value=e}get contrast(){return this.effect.uniforms.get("contrast").value}set brightness(e){this.effect.uniforms.get("brightness").value=e}get brightness(){return this.effect.uniforms.get("brightness").value}},Ef=class extends li{constructor(){super(h3),this.effect.offset=new z$2(.01,.01)}set offset(e){this.effect.offset.set(e[0]/1e3,e[1]/1e3)}get offset(){return[this.effect.offset.x*1e3,this.effect.offset.y*1e3]}},Tf=class extends li{constructor(){super(u3)}},Mf=class extends li{constructor(){super(f3),this._hue=0}set hue(e){this._hue=e,this.effect.setHue(e)}get hue(){return this._hue}set saturation(e){this.effect.uniforms.get("saturation").value=e}get saturation(){return this.effect.uniforms.get("saturation").value}},Cf=class extends li{constructor(){super(p3),this.blendFunction=Mt.OVERLAY}},Pf=class extends li{constructor(){super(g3)}get eskil(){return this.effect.eskil}set eskil(e){this.effect.eskil=e}get darkness(){return this.effect.uniforms.get("darkness").value}set darkness(e){this.effect.uniforms.get("darkness").value=e}get offset(){return this.effect.uniforms.get("offset").value}set offset(e){this.effect.uniforms.get("offset").value=e}},Df=class extends li{constructor(e){super(d3,e)}set focalLength(e){this.effect.circleOfConfusionMaterial.uniforms.focalLength.value=e}get focalLength(){return this.effect.circleOfConfusionMaterial.uniforms.focalLength.value}set focusDistance(e){this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value=e}get focusDistance(){return this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value}get bokehScale(){return this.effect.bokehScale}set bokehScale(e){this.effect.bokehScale=e}},Of=class extends li{constructor(){super(m3)}get granularity(){return this.effect.getGranularity()}set granularity(e){this.effect.setGranularity(e)}},y3=`#define GLSLIFY 1
varying vec2 vUv;varying vec2 vTexCoords[9];uniform vec2 resolution;void main(){vUv=position.xy*0.5+0.5;vec2 texelSize=vec2(1.0)/resolution;vTexCoords[0]=vUv+vec2(-texelSize.x,-texelSize.y);vTexCoords[1]=vUv+vec2(0.0,-texelSize.y);vTexCoords[2]=vUv+vec2(texelSize.x,-texelSize.y);vTexCoords[3]=vUv+vec2(-texelSize.x,0.0);vTexCoords[4]=vUv+vec2(0.0,0.0);vTexCoords[5]=vUv+vec2(texelSize.x,0.0);vTexCoords[6]=vUv+vec2(-texelSize.x,texelSize.y);vTexCoords[7]=vUv+vec2(0.0,texelSize.y);vTexCoords[8]=vUv+vec2(texelSize.x,texelSize.y);gl_Position=vec4(position.xy,1.0,1.0);}`,v3=`#define GLSLIFY 1
#include <common>
varying vec2 vUv;varying vec2 vTexCoords[9];uniform sampler2D inputBuffer;uniform sampler2D historyBuffer;uniform sampler2D velocityBuffer;uniform sampler2D depthBuffer;uniform vec2 resolution;
#define USE_YCOCG
#define USE_CATMULL_ROM
const float feedback_min=0.5;const float feedback_max=0.95;vec3 RGB_YCoCg(vec3 c){return vec3(c.x/4.0+c.y/2.0+c.z/4.0,c.x/2.0-c.z/2.0,-c.x/4.0+c.y/2.0-c.z/4.0);}vec3 YCoCg_RGB(vec3 c){return clamp(vec3(c.x+c.y-c.z,c.x+c.z,c.x-c.y-c.z),vec3(0.0),vec3(1.0));}vec4 sample_color(sampler2D tex,vec2 uv){
#ifdef USE_YCOCG
vec4 c=texture(tex,uv);return vec4(RGB_YCoCg(c.rgb),c.a);
#else
return texture(tex,uv);
#endif
}vec4 sample_catmull_rom(sampler2D tex,vec2 uv,vec2 texSize){vec2 samplePos=uv*texSize;vec2 texPos1=floor(samplePos-0.5)+0.5;vec2 f=samplePos-texPos1;vec2 w0=f*(-0.5+f*(1.0-0.5*f));vec2 w1=1.0+f*f*(-2.5+1.5*f);vec2 w2=f*(0.5+f*(2.0-1.5*f));vec2 w3=f*f*(-0.5+0.5*f);vec2 w12=w1+w2;vec2 offset12=w2/(w1+w2);vec2 texPos0=texPos1-1.0;vec2 texPos3=texPos1+2.0;vec2 texPos12=texPos1+offset12;texPos0/=texSize;texPos3/=texSize;texPos12/=texSize;vec4 result=vec4(0.0);result+=texture2D(tex,vec2(texPos12.x,texPos0.y))*w12.x*w0.y;result+=texture2D(tex,vec2(texPos0.x,texPos12.y))*w0.x*w12.y;result+=texture2D(tex,vec2(texPos12.x,texPos12.y))*w12.x*w12.y;result+=texture2D(tex,vec2(texPos3.x,texPos12.y))*w3.x*w12.y;result+=texture2D(tex,vec2(texPos12.x,texPos3.y))*w12.x*w3.y;return result;}vec3 choose_motion_vector(){
#ifdef CHOOSE_LONGEST_MOTION_VECTOR
float longest=-1.0;vec3 v_choose=vec3(-1.0);for(int i=0;i<9;i++){vec3 v=texture2D(velocityBuffer,vTexCoords[i]).rgb;float l=length(v.xy);if(l>longest){longest=l;v_choose=v;}}return v_choose;
#else
float closest_depth=1000.0;vec2 closest_uv_offset=vec2(0.0);for(int i=0;i<9;i++){float neighbor_depth=texture2D(depthBuffer,vTexCoords[i]).r;if(neighbor_depth<closest_depth){closest_uv_offset=vTexCoords[i];closest_depth=neighbor_depth;}}return texture2D(velocityBuffer,closest_uv_offset).rgb;
#endif
}vec4 clipAabb(vec3 aabb_min,vec3 aabb_max,vec4 avg,vec4 input_texel){const float FLT_EPS=0.00000001;vec3 p_clip=0.5*(aabb_max+aabb_min);vec3 e_clip=0.5*(aabb_max-aabb_min)+FLT_EPS;vec4 v_clip=input_texel-vec4(p_clip,avg.w);vec3 v_unit=v_clip.xyz/e_clip;vec3 a_unit=abs(v_unit);float ma_unit=max(a_unit.x,max(a_unit.y,a_unit.z));if(ma_unit>1.0){return vec4(p_clip,avg.w)+v_clip/ma_unit;}else{return input_texel;}}vec3 clip_aabb_variance(in vec3 cOld,in vec3 cNew,in vec3 centre,in vec3 halfSize){if(all(lessThanEqual(abs(cOld-centre),halfSize))){return cOld;}vec3 dir=(cNew-cOld);vec3 near=centre-sign(dir)*halfSize;vec3 tAll=(near-cOld)/dir;float t=0.0001;for(int i=0;i<3;i++){if(tAll[i]>=0.0&&tAll[i]<t){t=tAll[i];}}if(t>=0.0001){return cOld;}return cOld+dir*t;}void main(){vec3 v=choose_motion_vector();vec2 velocity=v.rg;vec2 previousPixelPos=vUv-velocity;vec4 currentColor=sample_color(inputBuffer,vUv);
#ifdef USE_CATMULL_ROM
vec4 previousColor=sample_catmull_rom(historyBuffer,previousPixelPos,resolution);
#else
vec4 previousColor=sample_color(historyBuffer,previousPixelPos);
#endif
#ifdef USE_YCOCG
previousColor=vec4(RGB_YCoCg(previousColor.rgb),previousColor.a);
#endif
vec4 ctl=sample_color(inputBuffer,vTexCoords[0]);vec4 ctc=sample_color(inputBuffer,vTexCoords[1]);vec4 ctr=sample_color(inputBuffer,vTexCoords[2]);vec4 cml=sample_color(inputBuffer,vTexCoords[3]);vec4 cmc=sample_color(inputBuffer,vTexCoords[4]);vec4 cmr=sample_color(inputBuffer,vTexCoords[5]);vec4 cbl=sample_color(inputBuffer,vTexCoords[6]);vec4 cbc=sample_color(inputBuffer,vTexCoords[7]);vec4 cbr=sample_color(inputBuffer,vTexCoords[8]);vec4 cmin=min(ctl,min(ctc,min(ctr,min(cml,min(cmc,min(cmr,min(cbl,min(cbc,cbr))))))));vec4 cmax=max(ctl,max(ctc,max(ctr,max(cml,max(cmc,max(cmr,max(cbl,max(cbc,cbr))))))));vec4 cavg=(ctl+ctc+ctr+cml+cmc+cmr+cbl+cbc+cbr)/9.0;vec4 cmin5=min(ctc,min(cml,min(cmc,min(cmr,cbc))));vec4 cmax5=max(ctc,max(cml,max(cmc,max(cmr,cbc))));vec4 cavg5=(ctc+cml+cmc+cmr+cbc)/5.0;cmin=0.5*(cmin+cmin5);cmax=0.5*(cmax+cmax5);cavg=0.5*(cavg+cavg5);
#ifdef USE_YCOCG
vec2 chroma_extent=vec2(0.25*0.5*(cmax.r-cmin.r));vec2 chroma_center=currentColor.gb;cmin.yz=chroma_center-chroma_extent;cmax.yz=chroma_center+chroma_extent;cavg.yz=chroma_center;
#endif
vec4 previousColorClipped=clamp(previousColor,cmin,cmax);
#ifdef LUMINANCE_DIFFERENCES
#ifdef USE_YCOCG
float lum0=currentColor.r;float lum1=previousColorClipped.r;
#else
float lum0=luminance(currentColor.rgb);float lum1=luminance(previousColorClipped.rgb);
#endif
float unbiased_diff=abs(lum0-lum1)/max(lum0,max(lum1,0.2));float unbiased_weight=1.0-unbiased_diff;float unbiased_weight_sqr=unbiased_weight*unbiased_weight;float k_feedback=mix(feedback_min,feedback_max,unbiased_weight_sqr);vec4 result=mix(currentColor,previousColorClipped,vec4(k_feedback));
#else
const float alpha=0.1;vec4 result=mix(currentColor,previousColorClipped,1.0-alpha);
#endif
#ifdef USE_YCOCG
gl_FragColor=vec4(YCoCg_RGB(result.rgb).rgb,result.a);
#else
gl_FragColor=result;
#endif
}`,x3=`#define GLSLIFY 1
varying vec2 vUv;void main(){gl_Position=vec4(position.xy,1.0,1.0);vUv=position.xy*0.5+0.5;}`,b3$1=`#define GLSLIFY 1
layout(location=1)out vec4 gVelocity;varying vec2 vUv;uniform sampler2D inputBuffer;void main(){gl_FragColor=texture2D(inputBuffer,vUv);gVelocity=vec4(0.0);}`,If=class extends lt{constructor(){super({name:"PassthroughMaterial",uniforms:{inputBuffer:new he(null)},blending:er,depthWrite:!1,depthTest:!1,vertexShader:x3,fragmentShader:b3$1})}set inputBuffer(e){this.uniforms.inputBuffer.value=e}},Cx=class extends wi{constructor(){super("TAAResolvePass"),this.MRTCompatible=!0,this.needsSwap=!1,this.passThroughMaterial=new If,this.resolutionVector=new z$2,this.resolveMaterial=new lt({name:"TAAResolveMaterial",uniforms:{inputBuffer:new he(null),historyBuffer:new he(null),velocityBuffer:new he(null),depthBuffer:new he(null),resolution:new he(new z$2)},blending:er,depthWrite:!1,depthTest:!1,vertexShader:y3,fragmentShader:v3}),this.historyRenderTarget=new ft(1024,1024,{minFilter:tt,stencilBuffer:!1,depthBuffer:!1}),this.historyRenderTarget.texture.name="TAA.History",this.resultRenderTarget=new ft(1024,1024,{minFilter:tt,stencilBuffer:!1,depthBuffer:!1}),this.resultRenderTarget.texture.name="TAA.Output"}setSize(e,a){this.historyRenderTarget.setSize(e,a),this.resultRenderTarget.setSize(e,a)}render(e,a){this.fullscreenMaterial=this.resolveMaterial,this.resolveMaterial.uniforms.inputBuffer.value=a.texture[0],this.resolveMaterial.uniforms.velocityBuffer.value=a.texture[1],this.resolveMaterial.uniforms.depthBuffer.value=a.depthTexture,this.resolveMaterial.uniforms.historyBuffer.value=this.historyRenderTarget.texture,this.resolveMaterial.uniforms.resolution.value.set(a.width,a.height),e.setRenderTarget(this.resultRenderTarget),e.render(this.scene,this.camera),this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=this.resultRenderTarget.texture,e.setRenderTarget(this.historyRenderTarget),e.render(this.scene,this.camera);let i=this.renderToScreen?null:a;this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=this.resultRenderTarget.texture,e.setRenderTarget(i),e.render(this.scene,this.camera)}dispose(){this.resultRenderTarget.dispose(),this.historyRenderTarget.dispose(),this.resolveMaterial.dispose(),this.passThroughMaterial.dispose()}},Px=class extends wi{constructor(e,a,i){super("TransmissionPass",void 0,a),this.MRTCompatible=!0,this.depthPass=new z_(e,a,{renderTarget:i.transmissionDepthTarget}),this.passThroughMaterial=new If,this.splineScene=e,this.needsSwap=!1}updatePasses(e){this.passThroughMaterial=new If,this.depthPass=new z_(this.splineScene,this.camera,{renderTarget:e.transmissionDepthTarget})}setCamera(e){this.camera=e}setScene(e){this.splineScene=e}render(e,a,i){let o=this.camera.layers.mask,c=e;c.setRenderTarget(c.transmissionRenderTarget),this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=a.texture[0],c.clear(),c.render(this.scene,this.camera),this.camera.layers.disable(3),this.depthPass.render(e,a,i),c.shadowMap.needsUpdate=!1,c.shadowMap.autoUpdate=!1;let d=this.renderToScreen?null:a;this.camera.layers.set(3),e.setRenderTarget(d),e.render(this.splineScene,this.camera),this.camera.layers.mask=o}},S3=new Pi,_Q=new lt({transparent:!0,vertexShader:`
        void main() {
            gl_Position = vec4(0.0);
        }
    `,fragmentShader:`
        layout(location = 1) out vec4 gVelocity;

        void main() {
            gl_FragColor = vec4(0.0);
			gVelocity = vec4(0.0);
        }
    `}),su=class extends wi{constructor(e,a,i){super("OpaquePass",a??S3,i),this.MRTCompatible=!0,this.hasTransmissionPass=!1,this.clear=!0,this.clearColorOnly=!1,this.clearDepth=!1,this.needsSwap=!1,this.originalMaterials=new Map,this.MRTCompatible=e}set splatViewer(e){this._splatViewer=e}get splatViewer(){return this._splatViewer}setCamera(e){this.camera=e}setScene(e){this.scene=e??S3}getScene(){return this.scene}render(e,a){var o;this.camera.layers.enable(3),this.hasTransmissionPass&&(this.originalMaterials.clear(),this.scene.traverse(c=>{c.layers.isEnabled(3)&&c instanceof pr&&(this.originalMaterials.set(c.id,c.material),c.material=_Q)}),e.shadowMap.needsUpdate=!0,e.shadowMap.autoUpdate=!0),this.camera.layers.enable(8);let i=this.renderToScreen?null:a;if(e.setRenderTarget(i),this.clearColorOnly&&e.clear(!0,!1,!0),this.clear&&e.clear(),((o=this._splatViewer)==null?void 0:o.splatRenderingInitialized)===!0){let c=e.autoClear;e.autoClear=!1,e.render(this.scene,this.camera),this._splatViewer.update(),e.render(this._splatViewer.splatMesh,this.camera),e.autoClear=c}else e.render(this.scene,this.camera);this.clearDepth&&e.clear(!1,!0,!1),this.hasTransmissionPass&&this.originalMaterials.forEach((c,d)=>{let g=this.scene.getObjectById(d);g&&(g.material=c)})}},Dx=class{constructor(e,{depthBuffer:a=!0,stencilBuffer:i=!1,multisampling:o=0,frameBufferType:c=0}={}){this.renderer=e,this.helperStartIndex=0,this.copyPass=new Ym,this.depthTexture=null,this.timer=new a3,this._width=1,this._height=1,this.passes=[],this.helperPasses=[],this.autoRenderToScreen=!0,this.inputBuffer=this.createBuffer(a,i,c,o,!0,"input buffer mrt"),this.inputBufferSingle=this.createBuffer(a,i,c,o,!1," input buffer single"),this.inputBufferSingle.texture.dispose(),this.inputBufferSingle.depthTexture.dispose(),this.inputBufferSingle.texture=this.inputBuffer.texture[0],this.inputBufferSingle.depthTexture=this.inputBuffer.depthTexture,this.outputBuffer=this.inputBuffer.clone(),this.outputBuffer.name="output buffer mrt",this.outputBufferSingle=this.createBuffer(a,i,c,o,!1,"output buffer single"),this.outputBufferSingle.texture.dispose(),this.outputBufferSingle.depthTexture.dispose(),this.outputBufferSingle.texture=this.outputBuffer.texture[0],this.outputBufferSingle.depthTexture=this.outputBuffer.depthTexture,this.setRenderer(e)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(e){let a=this.inputBuffer,i=this.multisampling;i>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):i!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),console.log("creating new input buffer"),this.inputBuffer=this.createBuffer(a.depthBuffer,a.stencilBuffer,a.texture.type,e,!0,"new input buffer"),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(e){var a;if(this.renderer=e,e!==null){let i=e.getSize(new z$2),o=((a=e.getContext().getContextAttributes())==null?void 0:a.alpha)??!1,c=this.inputBuffer.texture[0].type;c===Ir$1&&e.outputEncoding===at&&(this.inputBuffer.texture[0].encoding=at,this.outputBuffer.texture[0].encoding=at,this.inputBuffer.dispose(),this.outputBuffer.dispose(),console.log("doing some kinda dispose??")),e.autoClear=!1,this.setSize(i.width,i.height,!1);for(let d of this.passes)d.initialize(e,o,c)}}replaceRenderer(e,a=!0){let i=this.renderer,o=i.domElement.parentNode;return this.setRenderer(e),a&&o!==null&&(o.removeChild(i.domElement),o.appendChild(e.domElement)),i}createDepthTexture(){let e=this.depthTexture=new gs(this._width,this._height);return this.inputBuffer.depthTexture=e,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(e.format=cl,e.type=ol):e.type=js,e}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(let e of this.passes)e.setDepthTexture(null)}}createBuffer(e,a,i,o,c,d){let g=this.renderer,b=g===null?new z$2:g.getDrawingBufferSize(new z$2),j={minFilter:tt,magFilter:tt,wrapS:Kt,wrapT:Kt,stencilBuffer:a,depthBuffer:e},$;return o>0?($=new ft(b.width,b.height,j),$.samples=o):(c?($=new Sy(b.width,b.height,2,j),$.texture[1].type=va):$=new ft(b.width,b.height,j),$.depthTexture=new gs(2048,2048),$.depthTexture.type=Sr$1),i===Ir$1&&g!==null&&g.outputEncoding===at&&(Array.isArray($.texture)?$.texture.forEach(rt=>rt.encoding=at):$.texture.encoding=at),Array.isArray($.texture)?$.texture.forEach((rt,_e)=>{rt.name=`EffectComposer.Buffer ${c} ${_e}`,rt.generateMipmaps=!1}):($.texture.name=`EffectComposer.Buffer ${c}`,$.texture.generateMipmaps=!1),$.name=d,$}addPass(e,a){var b;let i=this.passes,o=this.renderer,c=o.getDrawingBufferSize(new z$2),d=((b=o.getContext().getContextAttributes())==null?void 0:b.alpha)??!1,g;if(e.MRTCompatible&&(g=this.inputBuffer.texture[0].type),e.MRTCompatible||(g=this.inputBuffer.texture.type),e.setRenderer(o),e.setSize(c.width,c.height),e.initialize(o,d,g),this.autoRenderToScreen&&(i.length>0&&(i[i.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),a!==void 0?i.splice(a,0,e):i.push(e),this.autoRenderToScreen&&(i[i.length-1].renderToScreen=!0),e.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){let j=this.createDepthTexture();for(e of i)e.setDepthTexture(j)}else e.setDepthTexture(this.depthTexture)}setHelperStartIndex(e){this.helperStartIndex=e}removePass(e){let a=this.passes,i=a.indexOf(e);if(i!==-1&&a.splice(i,1).length>0){if(this.depthTexture!==null){let o=(c,d)=>c||d.needsDepthTexture;a.reduce(o,!1)||(e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&i===a.length&&(e.renderToScreen=!1,a.length>0&&(a[a.length-1].renderToScreen=!0))}}removeAllPasses(){let e=this.passes;this.deleteDepthTexture(),e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){let a=this.renderer,i=this.copyPass,o=this.inputBuffer,c=this.outputBuffer,d=this.inputBufferSingle,g=this.outputBufferSingle,b=!1,j,$,rt,_e;e===void 0&&(e=this.timer.update().getDelta());for(let st of this.passes)st.enabled&&(st.MRTCompatible?st.render(a,o,c,e,b):st.render(a,d,g,e,b),st.needsSwap&&(b&&(i.renderToScreen=st.renderToScreen,j=a.getContext(),$=a.state.buffers.stencil,$.setFunc(j.NOTEQUAL,1,4294967295),i.render(a,o,c,e,b),$.setFunc(j.EQUAL,1,4294967295)),rt=o,_e=d,o=c,d=g,c=rt,g=_e),st instanceof o3?b=!0:st instanceof s3&&(b=!1))}setSize(e,a,i){let o=this.renderer;if(this._width=e,this._height=a,e===void 0||a===void 0){let d=o.getSize(new z$2);e=d.width,a=d.height}o.setSize(e,a,i);let c=o.getDrawingBufferSize(new z$2);this.inputBuffer.setSize(c.width,c.height),this.outputBuffer.setSize(c.width,c.height),this.inputBufferSingle.setSize(c.width,c.height),this.outputBufferSingle.setSize(c.width,c.height);for(let d of this.passes)d.setSize(c.width,c.height)}reset(){let e=this.timer.isAutoResetEnabled();this.dispose(),this.autoRenderToScreen=!0,this.timer.setAutoResetEnabled(e)}dispose(){for(let e of this.passes)e.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.inputBufferSingle!==null&&this.inputBufferSingle.dispose(),this.outputBufferSingle!==null&&this.outputBufferSingle.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},EQ=new lt({name:"CombineMaterial",uniforms:{inputBufferA:new he(null),inputBufferB:new he(null)},blending:er,depthWrite:!1,depthTest:!1,vertexShader:`
varying vec2 vUv;
void main() {
    gl_Position = vec4(position.xy, 1.0, 1.0);
    vUv = position.xy * 0.5 + 0.5;
}
`,fragmentShader:`
    varying vec2 vUv;
    uniform sampler2D inputBufferA;
    uniform sampler2D inputBufferB;

    // TODO: Why do we need these when postpro of framemode is enabled???
    layout(location = 1) out vec4 gVelocity;

    void main() {
	vec4 resA = texture2D(inputBufferA, vUv);
	vec4 resB = texture2D(inputBufferB, vUv);
    float a = resA.a + resB.a * ( 1.0 - resA.a );

	vec4 res;
	res.rgb =  resA.rgb + (resB.rgb * (1.0 - resA.a));
	res.a = resA.a + resB.a * (1.0 - resA.a);
	gl_FragColor = res;
    gVelocity = vec4(0.0);
    }
`}),Ox=class extends wi{constructor(e){super("HelperPass",void 0,e),this.MRTCompatible=!1,this.fullscreenMaterial=EQ,this.helperPass=new su(!1,void 0,this.camera),this.helperPass.hasTransmissionPass=!1,this.helperPass.clear=!1,this.helperPass.renderToScreen=!1,this.helperPassOnTop=new su(!1,void 0,this.camera),this.helperPassOnTop.hasTransmissionPass=!1,this.helperPassOnTop.clear=!1,this.helperPassOnTop.renderToScreen=!1;let a=new Mx({preset:Wa.LOW,edgeDetectionMode:wf.COLOR});this.effectPass=new nu(this.camera,a),this.rt=new ft(10,10,{minFilter:tt,magFilter:tt,wrapS:Kt,wrapT:Kt,depthBuffer:!0})}setSize(e,a){this.rt.setSize(e,a),this.effectPass.setSize(e,a)}set sceneHelpers(e){this.helperPass.setScene(e)}get sceneHelpers(){return this.helperPass.getScene()}set sceneHelpersOnTop(e){this.helperPassOnTop.setScene(e)}get sceneHelpersOnTop(){return this.helperPassOnTop.getScene()}setCamera(e){this.helperPass.setCamera(e),this.helperPassOnTop.setCamera(e)}initialize(e,a,i){super.initialize(e,a,i),this.effectPass.initialize(e,a,i)}dispose(){super.dispose(),this.rt.dispose(),this.effectPass.dispose()}render(e,a,i){this.rt.depthTexture=a.depthTexture;let o=e.getClearAlpha();e.setClearAlpha(0),this.helperPass.clearDepth=!0,this.helperPass.clearColorOnly=!0,this.helperPass.render(e,this.rt),this.helperPassOnTop.render(e,this.rt),this.effectPass.renderToScreen=!1,this.effectPass.render(e,this.rt,i),this.fullscreenMaterial.uniforms.inputBufferA.value=i.texture,this.fullscreenMaterial.uniforms.inputBufferB.value=a.texture,e.setClearAlpha(o),e.setRenderTarget(null),e.clear(),e.render(this.scene,this.camera)}},w3=`#define GLSLIFY 1
#include <skinning_pars_vertex>
out vec3 n;void main(){
#include <beginnormal_vertex>
#include <skinbase_vertex>
#include <skinnormal_vertex>
#include <defaultnormal_vertex>
#include <begin_vertex>
#include <skinning_vertex>
vec4 view_space=viewMatrix*modelMatrix*vec4(transformed,1.0);gl_Position=projectionMatrix*view_space;n=normalize(transformedNormal);}`,A3=`#define GLSLIFY 1
in vec3 n;void main(){gl_FragColor=vec4(n,1.0);}`,_3=`#define GLSLIFY 1
out vec2 v_uv;void main(){v_uv=uv;gl_Position=vec4(position.xy,1.0,1.0);}`,E3=`#define GLSLIFY 1
in vec2 v_uv;const float pi=3.14159265;const float num_steps=4.0;const float num_directions=4.0;uniform float near;uniform float far;uniform float fov;uniform vec4 proj_info;uniform bool is_ortho;uniform vec2 resolution;uniform float radius_of_influence;uniform float radius_in_screen_space;uniform float exponent;uniform vec3 ao_color;uniform float bias;uniform sampler2D texture_depth;uniform sampler2D texture_normals;uniform sampler2D texture_blue_noise;uniform sampler2D texture_blue_noise_in_disk;uniform sampler2D texture_color_pass;uniform int frame_index;uniform bool fog_enabled;uniform float fog_near;uniform float fog_far;vec3 uv_to_view_space(vec2 uv,float eye_z){return vec3((uv*proj_info.xy+proj_info.zw)*(is_ortho ? 1.0 : eye_z),eye_z);}float linearize_depth(float depth_sampled){float z=is_ortho ? depth_sampled : depth_sampled*2.0-1.0;return mix((2.0*near*far)/(far+near-z*(far-near)),near+z*(far-near),float(is_ortho));}vec3 get_view_position(vec2 uv_coords){float linear_depth=linearize_depth(texture(texture_depth,uv_coords).x);return uv_to_view_space(uv_coords,linear_depth);}vec3 min_difference(vec3 p,vec3 right,vec3 left){vec3 v1=right-p;vec3 v2=p-left;return(dot(v1,v1)<dot(v2,v2))? v1 : v2;}vec3 rebuild_normal(in vec2 uv,in vec3 p){vec2 one_over_resolution=1.0/resolution;vec3 r=get_view_position(uv+vec2(one_over_resolution.x,0));vec3 l=get_view_position(uv+vec2(-one_over_resolution.x,0));vec3 t=get_view_position(uv+vec2(0,one_over_resolution.y));vec3 b=get_view_position(uv+vec2(0,-one_over_resolution.y));return normalize(cross(min_difference(p,r,l),min_difference(p,t,b)));}float falloff(float distance_squared){float neg_inv_r2=-1.0/(radius_of_influence*radius_of_influence);return distance_squared*neg_inv_r2+1.0;}float ao_contribution(vec3 P,vec3 N,vec3 S){vec3 to_sample=S-P;float norm_squared=dot(to_sample,to_sample);float norm=sqrt(norm_squared);float cos_theta=dot(N,to_sample)/norm;return clamp(cos_theta-bias,0.0,1.0)*clamp(falloff(norm_squared),0.0,1.0);}float compute_ambient_occlusion(vec2 uv,float radius_in_screen_space,vec3 pc,vec3 view_space_n){vec2 one_over_resolution=1.0/resolution;ivec2 noise_uv=ivec2(int(mod(gl_FragCoord.x,128.0)),int(mod(gl_FragCoord.y,128.0)));float noise=texelFetch(texture_blue_noise,noise_uv,0).r;noise=fract(noise+0.61803398875*float(frame_index));float theta=noise*2.0*3.1415;float ct=cos(theta);float st=sin(theta);float step_size=radius_in_screen_space/(num_steps+1.0);const float angle_step=2.0*pi/num_directions;float contribution=0.0;for(int i=0;i<int(num_directions);++i){float current_pixel=step_size+1.0;for(int j=0;j<int(num_steps);++j){int index=i*int(num_steps)+j;vec2 blue_noise_sample=texelFetch(texture_blue_noise_in_disk,ivec2(index,0),0).rg;vec2 disk_point;disk_point.x=blue_noise_sample.x*ct-blue_noise_sample.y*st;disk_point.y=blue_noise_sample.x*st+blue_noise_sample.y*ct;vec2 sample_direction=disk_point;vec2 snapped_uv=round(current_pixel*sample_direction)*one_over_resolution+uv;vec3 ps=get_view_position(snapped_uv);current_pixel+=step_size;contribution+=ao_contribution(pc,view_space_n,ps);}}float mult=1.0/(1.0-bias);contribution*=mult/(num_directions*num_steps);return clamp(1.0-contribution*2.0,0.0,1.0);}
#define USE_GBUFFER_NORMALS
void main(){vec3 view_space_p=get_view_position(v_uv);
#ifdef USE_GBUFFER_NORMALS
vec3 view_space_n=texture(texture_normals,v_uv).rgb;view_space_n.z*=-1.0;
#else
vec3 view_space_n=-rebuild_normal(v_uv,view_space_p);
#endif
float radius_ss=radius_in_screen_space/(is_ortho ? 1.0 : view_space_p.z);float ao=compute_ambient_occlusion(v_uv,radius_ss,view_space_p,view_space_n);float final=pow(ao,exponent);if(view_space_p.z>=far){final=1.0;}vec3 color=mix(ao_color,vec3(1.0),final);if(fog_enabled){float fog_factor=smoothstep(fog_near,fog_far,view_space_p.z);color=mix(color,vec3(1.0),fog_factor);}gl_FragColor=vec4(color,1.0);}`,T3=`#define GLSLIFY 1
out vec2 v_uv;void main(){gl_Position=vec4(position.xy,1.0,1.0);v_uv=uv;}`,M3=`#define GLSLIFY 1
in vec2 v_uv;uniform sampler2D texture_ao_lrez;uniform sampler2D texture_depth_lrez;uniform sampler2D texture_depth_hrez;uniform float near;uniform float far;float linearize_depth(float depth_sampled){float z=depth_sampled*2.0-1.0;return(2.0*near*far)/(far+near-z*(far-near));}vec2 nearest_depth_filter(in vec2 uv){vec2 resolution=vec2(textureSize(texture_depth_lrez,0));vec2 texel_size=1.0/resolution;vec2 offset=uv-0.5*texel_size;float d_hrez=texture(texture_depth_hrez,uv).r;float a=abs(d_hrez-texture(texture_depth_lrez,offset).r);float b=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(texel_size.x,0.0)).r);float c=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(0.0,texel_size.y)).r);float d=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(texel_size.x,texel_size.y)).r);float min_diff=min(a,min(b,min(c,d)));if(min_diff==a)return offset;if(min_diff==b)return offset+vec2(texel_size.x,0.0);if(min_diff==c)return offset+vec2(0.0,texel_size.y);if(min_diff==d)return offset+vec2(texel_size.x,texel_size.y);}void main(){
#ifdef DEBUG
float d_lrez=texture(texture_depth_lrez,v_uv).r;float d_hrez=texture(texture_depth_hrez,v_uv).r;float output_d=mix(linearize_depth(d_lrez)/far,linearize_depth(d_hrez)/far,step(0.5,v_uv.x));gl_FragColor=vec4(vec3(output_d),1.0);
#else
vec2 filtered_uv=nearest_depth_filter(v_uv);vec4 ao=texture(texture_ao_lrez,filtered_uv);gl_FragColor=vec4(ao.rgb,1.0);gl_FragColor=ao;
#endif
}`,Rf=[[.478712,.875764],[-.337956,-.793959],[-.955259,-.028164],[.864527,.325689],[.209342,-.395657],[-.106779,.672585],[.156213,.235113],[-.413644,-.082856],[-.415667,.323909],[.141896,-.93998],[.954932,-.182516],[-.766184,.410799],[-.434912,-.458845],[.415242,-.078724],[.728335,-.491777],[-.058086,-.066401],[.20299,.686837],[-.808362,-.556402],[.507386,-.640839],[-.723494,-.22924],[.48974,.317826],[-.622663,.765301],[-.01064,.929347],[.663146,.647618],[-.096674,-.413835],[.525945,-.321063],[-.122533,.366019],[.195235,-.687983],[-.563203,.098748],[.418563,.561335],[-.378595,.800367],[.826922,.001024],[-.085372,-.766651],[-.92192,.183673],[-.590008,-.721799],[.167751,-.164393],[.032961,-.56253],[.6329,-.107059],[-.46408,.569669],[-.173676,-.958758],[-.242648,-.234303],[-.275362,.157163],[.382295,-.795131],[.562955,.115562],[.190586,.470121],[.770764,-.297576],[.237281,.93105],[-.666642,-.455871],[-.905649,-.298379],[.33952,.157829],[.701438,-.7041],[-.062758,.160346],[-.220674,.957141],[.642692,.432706],[-.77339,-.015272],[-.671467,.24688],[.158051,.062859],[.806009,.527232],[-.05762,-.247071],[.333436,-.51671],[-.550658,-.315773],[-.652078,.589846],[.008818,.530556],[-.210004,.519896]],IQ=new lt({vertexShader:w3,fragmentShader:A3}),Ix=new lt({vertexShader:T3,fragmentShader:M3,uniforms:{texture_ao_lrez:new he(null),texture_depth_lrez:new he(null),texture_depth_hrez:new he(null),near:new he(null),far:new he(null)}}),Rx=class extends wi{constructor(e,a){super("AmbientOcclusionPass",void 0,a),this.fogEnabled=!1,this.fogNear=1,this.fogFar=1e3,this.frameIndex=0,this._runHalfRes=!0,this._width=1,this._height=1;let i=1024,o=1024;this.gBuffer=new ft(i,o,{type:Sr$1,depthTexture:new gs(i,o),minFilter:tt,magFilter:tt}),this.depthBufferHighRes=new ft(i,o,{depthTexture:new gs(i,o)}),this.aoBuffer=new ft(i,o,{minFilter:tt,magFilter:tt}),this.splineScene=e,this.splineCamera=a;let c=new Float32Array(Rf.length*2);for(let g=0;g<Rf.length;g++){let b=g*2;c[b+0]=Rf[g][0],c[b+1]=Rf[g][1]}this.blueNoiseInDiskTexture=new xi(c,Rf.length,1,uh,Sr$1),this.blueNoiseInDiskTexture.wrapS=Ws,this.blueNoiseInDiskTexture.wrapT=Ws,this.blueNoiseInDiskTexture.needsUpdate=!0,this.hbaoMaterial=new lt({vertexShader:_3,fragmentShader:E3,uniforms:{near:new he(null),far:new he(null),fov:new he(null),proj_info:new he(new Ke),is_ortho:new he(!1),resolution:new he(new z$2),radius_of_influence:new he(8),radius_in_screen_space:new he(1),exponent:new he(1),ao_color:new he(new _),bias:new he(.5),texture_depth:new he(null),texture_normals:new he(null),texture_blue_noise:new he(null),texture_blue_noise_in_disk:new he(this.blueNoiseInDiskTexture),frame_index:new he(0),fog_enabled:new he(!1),fog_near:new he(1),fog_far:new he(1e3)}}),this.radius=128,this.aoColor={r:0,g:0,b:0},this.bias=.5,this.hbaoMaterial.uniforms.texture_depth.value=this.gBuffer.depthTexture,this.hbaoMaterial.uniforms.texture_normals.value=this.gBuffer.texture,this.needsSwap=!0,this.aaBuffer=new ft(i,o,{minFilter:tt,magFilter:tt,wrapS:Kt,wrapT:Kt,depthBuffer:!1,type:Sr$1});let d=new Mx({preset:Wa.ULTRA,edgeDetectionMode:wf.COLOR});this.effectPass=new nu(this.camera,d)}initialize(e,a,i){super.initialize(e,a,i),this.effectPass.initialize(e,a,i)}setBlueNoiseTexture(e){this.hbaoMaterial.uniforms.texture_blue_noise.value=e}setSize(e,a){this._width=e,this._height=a,this.depthBufferHighRes.setSize(e,a);let i=this._runHalfRes?.5:1,o=e*i,c=a*i;this.gBuffer.setSize(o,c),this.aoBuffer.setSize(o,c),this.hbaoMaterial.uniforms.resolution.value.set(o,c),this.aaBuffer.setSize(o,c),this.effectPass.setSize(o,c)}get runHalfRes(){return this._runHalfRes}set runHalfRes(e){this._runHalfRes=e,this.setSize(this._width,this._height)}setCamera(e){this.splineCamera=e}setScene(e){this.splineScene=e}render(e,a,i){this.splineScene.overrideMaterial=IQ;let o=this.splineCamera.layers.mask;if(this.splineCamera.layers.set(5),e.setRenderTarget(this.gBuffer),e.clear(),e.render(this.splineScene,this.splineCamera),e.setRenderTarget(this.depthBufferHighRes),e.clear(),e.render(this.splineScene,this.splineCamera),this.splineScene.overrideMaterial=null,this.splineCamera.layers.mask=o,this.hbaoMaterial.uniforms.radius_of_influence.value=this.radius,this.hbaoMaterial.uniforms.ao_color.value.set(this.aoColor.r,this.aoColor.g,this.aoColor.b),this.hbaoMaterial.uniforms.bias.value=this.bias,this.hbaoMaterial.uniforms.fog_enabled.value=this.fogEnabled,this.hbaoMaterial.uniforms.fog_near.value=this.fogNear,this.hbaoMaterial.uniforms.fog_far.value=this.fogFar,this.hbaoMaterial.uniforms.frame_index.value=this.frameIndex,this.frameIndex++,this.splineCamera.isPerspectiveCamera){this.hbaoMaterial.uniforms.near.value=this.splineCamera.perspCamera.near,this.hbaoMaterial.uniforms.far.value=this.splineCamera.perspCamera.far;let c=this.splineCamera.perspCamera.projectionMatrix.elements,d=2/c[0],g=2/c[5],b=-(1-c[8])/c[0],j=-(1+c[9])/c[5];this.hbaoMaterial.uniforms.proj_info.value.set(d,g,b,j);let $=this.splineCamera.perspCamera.fov*(Math.PI/180),rt=this.hbaoMaterial.uniforms.resolution.value.y/(Math.tan($*.5)*2),_e=this.hbaoMaterial.uniforms.radius_of_influence.value*.5*rt;this.hbaoMaterial.uniforms.radius_in_screen_space.value=_e,this.hbaoMaterial.uniforms.is_ortho.value=!1}else{this.hbaoMaterial.uniforms.near.value=this.splineCamera.orthoCamera.near,this.hbaoMaterial.uniforms.far.value=this.splineCamera.orthoCamera.far;let c=this.splineCamera.orthoCamera.projectionMatrix.elements,d=2/c[0],g=2/c[5],b=-(1+c[12])/c[0],j=-(1-c[13])/c[5];this.hbaoMaterial.uniforms.proj_info.value.set(d,g,b,j);let $=.5*(this.hbaoMaterial.uniforms.resolution.value.y/g),rt=this.hbaoMaterial.uniforms.radius_of_influence.value*$;this.hbaoMaterial.uniforms.radius_in_screen_space.value=rt,this.hbaoMaterial.uniforms.is_ortho.value=!0}this.runHalfRes?(this.fullscreenMaterial=this.hbaoMaterial,e.setRenderTarget(this.aoBuffer),e.clear(),e.render(this.scene,this.camera),this.fullscreenMaterial=Ix,Ix.uniforms.texture_ao_lrez.value=this.aoBuffer.texture,Ix.uniforms.texture_depth_lrez.value=this.gBuffer.depthTexture,Ix.uniforms.texture_depth_hrez.value=this.depthBufferHighRes.depthTexture,e.setRenderTarget(e.aoRenderTarget),e.clear(),e.render(this.scene,this.camera)):(this.fullscreenMaterial=this.hbaoMaterial,e.setRenderTarget(this.aaBuffer),e.clear(),e.render(this.scene,this.camera),this.effectPass.renderToScreen=!1,this.effectPass.render(e,this.aaBuffer,e.aoRenderTarget))}dispose(){this.gBuffer.dispose(),this.depthBufferHighRes.dispose(),this.aoBuffer.dispose()}},RQ=`
varying vec2 vUv;
void main() {
    vUv = uv;
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,LQ=`
uniform sampler2D tInput;
uniform sampler2D tMap;
uniform vec2 resolution;
varying vec2 vUv;

uniform vec2 uResolution;
uniform vec2 uCoords;

// Draws a rectangle at center <st> with size <size>
float rectangle(vec2 st, vec2 size) {
    size = vec2(0.5) - size * 0.5;
    vec2 uv = vec2(step(size.x, st.x), step(size.y, st.y));
    uv *= vec2(step(size.x, 1.0 - st.x), step(size.y, 1.0 - st.y));

    return uv.x * uv.y;
}

uniform vec2 uSize;
uniform float uScale;
uniform float uDPR;
uniform float uCurrent;
uniform vec3 uSceneColor;

void main() {
    vec2 screenUv = gl_FragCoord.xy / uResolution.xy;
    screenUv *= 1.0 / uDPR;

    vec2 center = vec2(0.5, -0.5);
    vec2 outsideUv = screenUv;
    outsideUv += center;
    outsideUv -= uCoords.xy / uResolution.xy;
    outsideUv = (outsideUv - 0.5) + 0.5;
    outsideUv -= center;
    vec2 s = (uSize / uResolution) * uScale;
    float isOutside = 1.0 - rectangle(outsideUv, s);
    
    vec2 mid = vec2(0.5);
    vec2 insideUv = (screenUv - mid + s * mid) / s;
    vec4 background = texture2D(tInput, screenUv);
    vec4 image = texture2D(tMap, insideUv);
    gl_FragColor = mix(image, background, isOutside);
}
`,Lx=class extends Yn{constructor(){super(new lt({vertexShader:RQ,fragmentShader:LQ,uniforms:{tInput:new he(null),tMap:new he(null),uResolution:new he(new z$2),uSize:new he(new z$2),uCoords:new he(new z$2),uScale:new he(1),uSceneColor:new he(new We(16711680)),uDPR:new he(1),uCurrent:new he(0)}}),"tInput"),this.needsSwap=!0}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.tMap.value}set texture(e){this.uniforms.tMap.value=e}},BQ=`
void main() {
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,NQ=`
uniform sampler2D toScene;
uniform sampler2D fromScene;
uniform vec2 resolution;

uniform vec2 uResolution;
uniform float uDPR;

uniform float mixRatio;
uniform sampler2D tMixTexture;
uniform int useTexture;
uniform float threshold;

void main() {
	vec2 screenUv = gl_FragCoord.xy / uResolution.xy;
	screenUv *= 1.0 / uDPR;

	vec4 texel1 = texture2D( fromScene, screenUv );
	vec4 texel2 = texture2D( toScene, screenUv );

	if (useTexture==1) {
		
		vec4 transitionTexel = texture2D( tMixTexture, screenUv );
		float r = mixRatio * (1.0 + threshold * 2.0) - threshold;
		float mixf=clamp((transitionTexel.r - r)*(1.0/threshold), 0.0, 1.0);
		
		gl_FragColor = mix( texel1, texel2, mixf );
	} else {
		
		gl_FragColor = mix( texel1, texel2, mixRatio );
		
	}
}
`,FQ=[],Bx=class extends Yn{constructor(){super(new lt({vertexShader:BQ,fragmentShader:NQ,uniforms:{toScene:new he(null),fromScene:new he(null),uResolution:new he(new z$2),uDPR:new he(1),mixRatio:new he(0),threshold:new he(.1),useTexture:new he(0),tMixTexture:{value:FQ[0]}}}),"toScene"),this.needsSwap=!0}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.fromScene.value}set texture(e){this.uniforms.fromScene.value=e}},kQ=`
void main() {
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,VQ=`
uniform sampler2D inputBuffer;
uniform sampler2D blurredInputBuffer;
uniform sampler2D overlay;
uniform float blurIntensity;

uniform vec2 uResolution;
uniform float uDPR;

void main() {
	vec2 screenUv = gl_FragCoord.xy / uResolution.xy;
	screenUv *= 1.0 / uDPR;

	vec4 texel1 = texture2D( overlay, screenUv );
	vec4 texel2 = texture2D( inputBuffer, screenUv );
	vec4 texel3 = texture2D( blurredInputBuffer, screenUv );

	float blurMask2 = max(sign(texel1.a), 0.0) * blurIntensity;
    gl_FragColor = mix( mix(texel2, texel3, blurMask2), texel1, texel1.a );
	gl_FragColor.a = 1.0;
}
`,Nx=class extends Yn{constructor(){super(new lt({vertexShader:kQ,fragmentShader:VQ,uniforms:{inputBuffer:new he(null),blurredInputBuffer:new he(null),overlay:new he(null),uResolution:new he(new z$2),uDPR:new he(1),blurIntensity:new he(0)}})),this._blurEnabled=!1,this.blurTarget=new ft(1,1,{minFilter:tt,magFilter:tt,wrapS:Kt,wrapT:Kt}),this.blurPass=new Tx({width:window.innerWidth,height:window.innerHeight,kernelSize:Xm.HUGE,resolutionScale:.25}),this.blurPass.renderToScreen=!1,this.uniforms.blurredInputBuffer.value=this.blurTarget.texture}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.overlay.value}set texture(e){this.uniforms.overlay.value=e}setResolution(e,a,i=1){this.uniforms.uResolution.value.set(e,a).divideScalar(i),this.uniforms.uDPR.value=i,this.blurPass.setSize(e,a),this.blurTarget.setSize(e,a),this.blurPass.setSize(e,a)}get uiCanvas(){return this._uiCanvas}set uiCanvas(e){this._uiCanvas=e,e.texture&&(this.uniforms.overlay.value=e.texture);let a=e.frame;if(a){let i=a.data.backgroundBlur,o=i.radius;this._blurEnabled=i.enabled,this.uniforms.blurIntensity.value=this._blurEnabled?1:0,this.blurPass.scale=o/3}}render(e,a,i,o,c){this._blurEnabled&&(this.blurPass.setDepthTexture(this.getDepthTexture()),this.blurPass.render(e,a,this.blurTarget,o,c)),super.render(e,a,i,o,c)}};function P3(e,a){return a&&a.enabled&&e.push(a.effect),e}var zQ=e=>Object.values(Mt).includes(e)?e:Mt.NORMAL,Qm=class extends fr$2{constructor(e){super(),this.postprocessingState=td.defaultData,this._scene=new Pi,this._camera=new wr$1,this.effects=new Map,this.blueNoiseTexture=new xi,this._renderToScreen=!0,this._isUIOverlayEnabled=!1,this.clock=new Ny,this.renderer=e,this.debug=!1,this.effects.set("bloom",new Af),this.effects.set("chromaticAberration",new Ef),this.effects.set("vignette",new Pf),this.effects.set("noise",new Cf),this.effects.set("colorAverage",new Tf),this.effects.set("hueSaturation",new Mf),this.effects.set("brightnessContrast",new _f),this.effects.set("depthOfField",new Df),this.effects.set("pixelation",new Of),this.effectComposer=new Dx(this.renderer),this.effectComposer.autoRenderToScreen=!1,this.opaquePass=new su(!0,this.scene,this.camera),this.opaquePass.clear=!0,this.transmissionPass=new Px(this.scene,this.camera,this.renderer),this.aoPass=new Rx(this.scene,this.camera),this.taaPass=new Cx,this.taaPass.renderToScreen=!1,this.helperPass=new Ox(this.camera),this.helperPass.renderToScreen=!1,this.stylesOverlayPass=new Lx,this.stylesOverlayPass.enabled=!1,this.uiOverlayPass=new Nx,this.uiOverlayPass.enabled=!1,this.sceneTransitionPass=new Bx,this.sceneTransitionPass.enabled=!1,this._initCopyPass(),this._initPasses()}set overlayTexture(e){e!==void 0?(this.stylesOverlayPass.texture=e,this.stylesOverlayPass.enabled=!0):this.stylesOverlayPass.enabled=!1}get overlayTexture(){return this.stylesOverlayPass.texture}set sceneHelpers(e){this.helperPass.sceneHelpers=e}get sceneHelpers(){return this.helperPass.sceneHelpers}set sceneHelpersOnTop(e){this.helperPass.sceneHelpersOnTop=e}get sceneHelpersOnTop(){return this.helperPass.sceneHelpersOnTop}get scene(){return this._scene}set scene(e){this._scene=e,this.opaquePass.setScene(e),this.transmissionPass.setScene(e),this.aoPass.setScene(e)}get camera(){return this._camera}set camera(e){this._camera=e,this.opaquePass.setCamera(e),this.transmissionPass.setCamera(e),this.aoPass.setCamera(e),this.helperPass.setCamera(e)}updateRenderToScreen(){let e=!1;for(let a=this.effectComposer.passes.length-1;a>=0;a--){let i=this.effectComposer.passes[a];if(i.enabled===!0&&!e&&this._renderToScreen){i.renderToScreen=!0,e=!0;continue}i.renderToScreen=!1}}get isUIOverlayEnabled(){return this._isUIOverlayEnabled}disableUIOverlay(){this._isUIOverlayEnabled=!1}enableUIOverlay(){this._isUIOverlayEnabled=!0}disableHelpers(){this.helperPass.enabled=!1,this.updateRenderToScreen()}enableHelpers(){this.helperPass.enabled=!0,this.updateRenderToScreen()}updateBlueNoiseTexture(e){this.blueNoiseTexture=new xi(e,128,128),this.blueNoiseTexture.wrapS=Ws,this.blueNoiseTexture.wrapT=Ws,this.blueNoiseTexture.minFilter=Vt,this.blueNoiseTexture.magFilter=Vt,this.blueNoiseTexture.needsUpdate=!0}setAmbientOcclusionParams(e,a,i,o,c,d,g,b){this.aoPass.enabled=e,this.aoPass.radius=a,this.aoPass.bias=i,this.aoPass.aoColor=o,this.aoPass.fogEnabled=c,this.aoPass.fogNear=d,this.aoPass.fogFar=g,this.aoPass.runHalfRes!==!b&&(this.aoPass.runHalfRes=!b)}setTransmissionPassEnabled(e){this.transmissionPass.enabled=e,this.opaquePass.hasTransmissionPass=e}_initPasses(){var e,a;if((e=this.uvEffectPass)==null||e.dispose(),(a=this.effectPass)==null||a.dispose(),this.effectComposer.removeAllPasses(),this.transmissionPass.updatePasses(this.renderer),this.effectComposer.addPass(this.aoPass),this.effectComposer.addPass(this.opaquePass),this.effectComposer.addPass(this.transmissionPass),this.effectComposer.addPass(this.taaPass),this.postprocessingState.enabled){let i=[this.effects.get("pixelation")].reduce(P3,[]);i.length>0&&(this.uvEffectPass=new nu(this.camera,...i),this.uvEffectPass.renderToScreen=!1,this.effectComposer.addPass(this.uvEffectPass));let o=[this.effects.get("chromaticAberration"),this.effects.get("bloom"),this.effects.get("colorAverage"),this.effects.get("hueSaturation"),this.effects.get("brightnessContrast"),this.effects.get("vignette"),this.effects.get("noise")].reduce(P3,[]);o.length>0&&(this.effectPass=new nu(this.camera,...o),this.effectPass.renderToScreen=!1,this.effectComposer.addPass(this.effectPass))}this.effectComposer.addPass(this.stylesOverlayPass),this.effectComposer.addPass(this.uiOverlayPass),this.effectComposer.addPass(this.sceneTransitionPass),this.effectComposer.addPass(this.helperPass)}_initCopyPass(){if(this._savePass)return;let e=new z$2;this.renderer.getDrawingBufferSize(e),this._rt=new ft(e.x,e.y,{depthBuffer:!1,stencilBuffer:!1,wrapS:Ws,wrapT:Ws}),this._rt.samples=0,this._savePass=new Ym(this._rt,!1),this._savePass.renderToScreen=!1}setCopyPass(e){this._rt=e,this._savePass=new Ym(this._rt,!1),this.renderToScreen=!1}get renderToScreen(){return this._renderToScreen}set renderToScreen(e){if(this._renderToScreen===e)return;let a=this.effectComposer;!a||(e===!0?a.removePass(this._savePass):a.addPass(this._savePass),this._renderToScreen=e,this.updateRenderToScreen())}set sceneTransitionFromTexture(e){e!==this.sceneTransitionPass.texture&&(e!==null?this.sceneTransitionPass.enabled=!0:(this.sceneTransitionPass.enabled=!1,this.updateRenderToScreen()),this.sceneTransitionPass.texture=e)}get texture(){return this._rt&&this._rt.texture}get renderTarget(){return this._rt}updatePostprocessing(e){let{enabled:a,...i}=e,o=!1;a!==this.postprocessingState.enabled&&(o=!0);for(let c of Object.entries(i)){let d=c[1],g=this.effects.get(c[0]);if(g){g.enabled!==d.enabled&&(o=!0),g.enabled=d.enabled;for(let[b,j]of Object.entries(d))b==="blendFunction"?g.blendFunction=zQ(j):g[b]=j}}this.postprocessingState=e,o&&this._initPasses()}render(){this.effectComposer.render(this.clock.getDelta())}setScissor(e,a,i,o){e instanceof Ke?(this.effectComposer.inputBuffer.scissor.set(e.x,e.y,e.z,e.w),this.effectComposer.outputBuffer.scissor.set(e.x,e.y,e.z,e.w)):(this.effectComposer.inputBuffer.scissor.set(e,a,i,o),this.effectComposer.outputBuffer.scissor.set(e,a,i,o));let c=this.renderer.getPixelRatio();this.effectComposer.inputBuffer.scissor.multiplyScalar(c),this.effectComposer.outputBuffer.scissor.multiplyScalar(c),this.renderer.setScissor(e,a,i,o)}setScissorTest(e){this.effectComposer.inputBuffer.scissorTest=e,this.effectComposer.outputBuffer.scissorTest=e,this.renderer.setScissorTest(e)}setViewport(e,a,i,o){e instanceof Ke?(this.effectComposer.inputBuffer.viewport.copy(e),this.effectComposer.outputBuffer.viewport.copy(e)):(this.effectComposer.inputBuffer.viewport.set(e,a,i,o),this.effectComposer.outputBuffer.viewport.set(e,a,i,o))}resize(e,a,i){if(this.effectComposer.setSize(e,a,i),this._rt){let o=this.renderer.getPixelRatio();this._rt.setSize(e*o,a*o)}}dispose(){var e,a;(e=this.uvEffectPass)==null||e.dispose(),(a=this.effectPass)==null||a.dispose(),this.effectComposer.dispose()}},UQ=e=>`

// PCSS implementation based on:
// https://www.gamedev.net/articles/programming/graphics/contact-hardening-soft-shadows-made-fast-r4906/
// NOTE: This number affects how big the shadow blur can
// possibly get. Bigger number == bigger blur, but less precise results

const float  gPenumbraFilterSize = 80.0;
const int   gPenumbraSamples = ${e};
const int gShadowSamples = ${e};
const float gShadowSamplesRpc = 1.0f / float(gShadowSamples);

#ifdef USE_SHADOWMAP
    #if NUM_DIR_LIGHT_SHADOWS > 0

        uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
        varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];

        struct DirectionalLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
        };

        uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];

    #endif

    #if NUM_SPOT_LIGHT_SHADOWS > 0

        uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
        varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_SHADOWS ];

        struct SpotLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
        };

        uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];

    #endif

    #if NUM_POINT_LIGHT_SHADOWS > 0

        uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
        varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];

        struct PointLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
            float shadowCameraNear;
            float shadowCameraFar;
        };

        uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];

    #endif

    /*
    #if NUM_RECT_AREA_LIGHTS > 0

        // TODO (abelnation): create uniforms for area light shadows

    #endif
    */

float computePenumbra(int index, sampler2D shadowMap, float temporalAngle, float texelSize, vec2 uv, float compare, float texelScalar, float shadowRadius)
{
    float penumbra = 1.0;
    float blockerDepthAvg = 0.0;
    float blockerCount = 0.0;

    #pragma unroll_loop_start
    for(int i = 0; i < gPenumbraSamples; i ++)
    {
        vec2 offset = (vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize) * texelScalar;
        float depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) );

        if(depth < compare + 0.0001)
        {
            blockerDepthAvg += depth;
            blockerCount++;
        }
    }
    #pragma unroll_loop_end

    if (blockerCount > 0.0)
    {
        blockerDepthAvg /= blockerCount;

        // Compute penumbra
        penumbra = (compare - blockerDepthAvg) / (blockerDepthAvg);
        penumbra *= penumbra;
        penumbra *= 200.0 * penumbraSize[min(index, 5 - 1)]; // Magic number that affects how quickly the penumbra grows

        return clamp(penumbra, 0.00, 1.0);
    }
    return 0.0;
}

float vogelShadow(int index, sampler2D shadowMap, vec2 uv, float texelSize, float compare, float shadowRadius)
{
    float shadow         = 0.0f;

    // NOTE: When using TAA, we should use screen space interleaved gradient noise
    vec2 halton = haltonSequence[frameIndex];
    float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
    float temporalAngle  = temporalOffset * PI2;

    float texelScalar = (gPenumbraFilterSize) / (texelSize * 1024.);
    float penumbra = computePenumbra(index, shadowMap, temporalAngle, texelSize, uv, compare, texelScalar, shadowRadius);
    if (penumbra == -1.0) {
        return 1.0;
    }

    #pragma unroll_loop_start
    for (int i = 0; i < gShadowSamples; i++)
    {
        vec2 vogelSample =  vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;
        // Overall blurring offset
        vec2 offset = vogelSample * (shadowRadius * 2.);

        // Penumbra offset
        offset += vogelSample * (penumbra * texelScalar);

        shadow += step( compare, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );
    }
    #pragma unroll_loop_end

    return shadow * gShadowSamplesRpc;
}


    float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {

        return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );

    }

    vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {

        return unpackRGBATo2Half( texture2D( shadow, uv ) );

    }

    float VSMShadow (sampler2D shadow, vec2 uv, float compare ){

        float occlusion = 1.0;

        vec2 distribution = texture2DDistribution( shadow, uv );

        float hard_shadow = step( compare , distribution.x ); // Hard Shadow

        if (hard_shadow != 1.0 ) {

            float distance = compare - distribution.x ;
            float variance = max( 0.00000, distribution.y * distribution.y );
            float softness_probability = variance / (variance + distance * distance ); // Chebeyshevs inequality
            softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 ); // 0.3 reduces light bleed
            occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );

        }
        return occlusion;

    }

    float getShadow( int i, sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {

        float shadow = 1.0;

        shadowCoord.xyz /= shadowCoord.w;
        shadowCoord.z += shadowBias;

        // if ( something && something ) breaks ATI OpenGL shader compiler
        // if ( all( something, something ) ) using this instead

        bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
        bool inFrustum = all( inFrustumVec );

        bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );

        bool frustumTest = all( frustumTestVec );

        if ( frustumTest ) {

        #if defined( SHADOWMAP_TYPE_PCF )

            vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
            return vogelShadow(i, shadowMap, shadowCoord.xy, texelSize.x, shadowCoord.z, shadowRadius );

        #elif defined( SHADOWMAP_TYPE_PCF_SOFT )

            vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
            float dx = texelSize.x;
            float dy = texelSize.y;

            vec2 uv = shadowCoord.xy;
            vec2 f = fract( uv * shadowMapSize + 0.5 );
            uv -= f * texelSize;

            shadow = (
                texture2DCompare( shadowMap, uv, shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
                mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
                     f.x ) +
                mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
                     f.x ) +
                mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
                     f.y ) +
                mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
                     f.y ) +
                mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
                          texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
                          f.x ),
                     mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
                          texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
                          f.x ),
                     f.y )
            ) * ( 1.0 / 9.0 );

        #elif defined( SHADOWMAP_TYPE_VSM )

            shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );

        #else // no percentage-closer filtering:

            shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );

        #endif

        }

        return shadow;

    }

    // cubeToUV() maps a 3D direction vector suitable for cube texture mapping to a 2D
    // vector suitable for 2D texture mapping. This code uses the following layout for the
    // 2D texture:
    //
    // xzXZ
    //  y Y
    //
    // Y - Positive y direction
    // y - Negative y direction
    // X - Positive x direction
    // x - Negative x direction
    // Z - Positive z direction
    // z - Negative z direction
    //
    // Source and test bed:
    // https://gist.github.com/tschw/da10c43c467ce8afd0c4

    vec2 cubeToUV( vec3 v, float texelSizeY ) {

        // Number of texels to avoid at the edge of each square

        vec3 absV = abs( v );

        // Intersect unit cube

        float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
        absV *= scaleToCube;

        // Apply scale to avoid seams

        // two texels less per square (one texel will do for NEAREST)
        v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );

        // Unwrap

        // space: -1 ... 1 range for each square
        //
        // #X##         dim    := ( 4 , 2 )
        //  # #         center := ( 1 , 1 )

        vec2 planar = v.xy;

        float almostATexel = 1.5 * texelSizeY;
        float almostOne = 1.0 - almostATexel;

        if ( absV.z >= almostOne ) {

            if ( v.z > 0.0 )
                planar.x = 4.0 - v.x;

        } else if ( absV.x >= almostOne ) {

            float signX = sign( v.x );
            planar.x = v.z * signX + 2.0 * signX;

        } else if ( absV.y >= almostOne ) {

            float signY = sign( v.y );
            planar.x = v.x + 2.0 * signY + 2.0;
            planar.y = v.z * signY - 2.0;

        }

        // Transform to UV space

        // scale := 0.5 / dim
        // translate := ( center + 0.5 ) / dim
        return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );

    }

    float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {

        float shadow = 1.0;
        vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );

        // for point lights, the uniform @vShadowCoord is re-purposed to hold
        // the vector from the light to the world-space position of the fragment.
        vec3 lightToPosition = shadowCoord.xyz;

        // dp = normalized distance from light to fragment position
        float compare = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear ); // need to clamp?
        compare += shadowBias;

        // bd3D = base direction 3D
        vec3 bd3D = normalize( lightToPosition );

        vec2 halton = haltonSequence[frameIndex];
        float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
        float temporalAngle  = temporalOffset * PI2;

        #if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_VSM )
            for (int i = 0; i < gShadowSamples; i++) {
                vec2 vogelSample = vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;

                // Overall blurring offset
                vec3 offset = vec3(vogelSample.x, vogelSample.y, -vogelSample.x) * (shadowRadius + 5.);

                // NOTE: Removed for now
                // Penumbra offset
                //offset += vec3(vogelSample.x, vogelSample.y, vogelSample.y)  * (penumbra * gPenumbraFilterSize);

                shadow += texture2DCompare( shadowMap, cubeToUV( bd3D + offset, texelSize.y ), compare );

            }
            return shadow * gShadowSamplesRpc;

        #elif defined( SHADOWMAP_TYPE_PCF_SOFT )
            for (int i = 0; i < 16; i++) {
                vec2 vogelSample = vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;

                // Overall blurring offset
                vec3 offset = vec3(vogelSample.x, vogelSample.y, -vogelSample.x) * (shadowRadius + 5.);

                shadow += texture2DCompare( shadowMap, cubeToUV( bd3D + offset, texelSize.y ), compare );

            }
            return shadow * (1.0 / 16.0);
        #else // no percentage-closer filtering

            return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), compare );

        #endif

    }

#endif
`,GQ=bt.lights_fragment_begin,jQ=bt.shadowmask_pars_fragment,D3=null,HQ=e=>{switch(e){case"low":return 8;case"medium":return 16;case"high":return 32;default:return 16}},O3=(e="medium")=>{if(D3===e)return!1;D3=e;let a=HQ(e);bt.shadowmap_pars_fragment=UQ(a);let i=GQ.slice();i=i.replace("getShadow( spotShadowMap[ i ]","getShadow( UNROLLED_LOOP_INDEX + 3, spotShadowMap[ i ]"),i=i.replace("getShadow( directionalShadowMap[ i ]","getShadow( UNROLLED_LOOP_INDEX, directionalShadowMap[ i ]"),bt.lights_fragment_begin=i;let o=jQ.slice();return o=o.replaceAll("getShadow(","getShadow( UNROLLED_LOOP_INDEX, "),bt.shadowmask_pars_fragment=o,!0},WQ=`
attribute vec3 randomColor;
varying vec3 vNormal;
flat out vec3 vColor;

void main()
{
vNormal = normal;
vColor = randomColor;
gl_Position = projectionMatrix * (modelViewMatrix * vec4(position, 1.0));
}
`,qQ=`
uniform float depthContrast;
varying vec3 vNormal;
flat in vec3 vColor;
void main()
{
vec3 normal = (normalize(vNormal)).rgb;

float contrastDepth = (gl_FragCoord.z - 0.5) * depthContrast + 0.5;

vec3 resultColor = mix(mix(vColor, normal, 0.2), vec3(contrastDepth), 0.4);
gl_FragColor = vec4(resultColor, vColor.r);
gl_FragColor = vec4(resultColor, vColor.r);
}
`,Fx=new lt({vertexShader:WQ,fragmentShader:qQ,uniforms:{depthContrast:{value:1}}}),I3=new tr,kx=class extends Dw{constructor(e){super(e),this._pixelRatio=this.getPixelRatio(),this.viewportWidth=1,this.viewportHeight=1,this.resolution=new z$2,this.pipeline=new Qm(this),this.dummyCamera=new wr$1,this.sceneTransitionDuration=0,this.sceneTransitionTimeRemaining=-1,this.isXRCopyPassSet=!1,this.clear=(c=!0,d=!0,g=!0)=>{let b=this.getContext(),j=0;c&&(j|=b.COLOR_BUFFER_BIT),d&&(j|=b.DEPTH_BUFFER_BIT),g&&(j|=b.STENCIL_BUFFER_BIT),b.clear(j),b.clearBufferfv(b.COLOR,1,[0,0,0,1])},this.autoClear=!1;let a=this.setPixelRatio.bind(this),i=this.setSize.bind(this);this.shadowMap.enabled=!0,this.shadowMap.type=Gy,this.dummyCamera.matrixAutoUpdate=!1;let o=this.getContext();if(o&&"drawingBufferColorSpace"in o)try{o.drawingBufferColorSpace="display-p3"}catch(c){console.warn(c)}this.setPixelRatio=c=>{this._pixelRatio!==c&&(this._pixelRatio=c,a(c))},this.setSize=(c,d,g=!0)=>{var b,j;(this.viewportWidth!==c||this.viewportHeight!==d)&&(this.viewportWidth=c,this.viewportHeight=d,i(c,d,g),(b=this.normalRenderTarget)==null||b.setSize(c*this._pixelRatio,d*this._pixelRatio),this._resizeTransmission(c,d),(j=this.transmissionDepthTarget)==null||j.setSize(c*this._pixelRatio/2,d*this._pixelRatio/2),this.pipeline.resize(c,d,g))},this._superDispose=this.dispose,this.dispose=this._currentDispose}createAORenderTarget(){this.aoRenderTarget===void 0&&(this.aoRenderTarget=new ft(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio,{generateMipmaps:!1,minFilter:tt,magFilter:tt,wrapS:Kt,wrapT:Kt,depthBuffer:!1}))}_resizeTransmission(e,a){var i,o;(i=this.transmissionRenderTarget)==null||i.setSize(e*this._pixelRatio/(this.hdTransmission?1:2),a*this._pixelRatio/(this.hdTransmission?1:2)),(o=this.aoRenderTarget)==null||o.setSize(e*this._pixelRatio/1,a*this._pixelRatio/1)}get hdTransmission(){return Ze.transmissionLod.value===1}set hdTransmission(e){Ze.transmissionLod.value=e===!0?1:2,this._resizeTransmission(this.viewportWidth,this.viewportHeight)}createTransmissionRenderTarget(){this.transmissionRenderTarget===void 0&&(this.transmissionRenderTarget=new ft(this.viewportWidth*this._pixelRatio/(this.hdTransmission?1:2),this.viewportHeight*this._pixelRatio/(this.hdTransmission?1:2),{generateMipmaps:!0,minFilter:bc,magFilter:tt,wrapS:Kt,wrapT:Kt,depthBuffer:!1}),this.transmissionDepthTarget=new ft(this.viewportWidth*this._pixelRatio/2,this.viewportHeight*this._pixelRatio/2,{minFilter:Vt,magFilter:Vt,depthBuffer:!1}))}createNormalRenderTarget(){this.normalRenderTarget===void 0&&(this.normalRenderTarget=new ft(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio,{generateMipmaps:!1,minFilter:Vt,magFilter:Vt,type:Sr$1,depthTexture:new gs(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio)}))}renderNormal(e,a,i){this.normalRenderTarget&&(this.setClearColor(0),i.layers.enable(8),i.layers.disable(0),i.layers.disable(3),a.traverseEntity(o=>{o.layers.isEnabled(8)&&(o.copyPreviousMatrix=!1)}),this.setRenderTarget(this.normalRenderTarget),this.clear(),i instanceof wr$1?Fx.uniforms.depthContrast.value=(i.far-i.near)/1e4:Fx.uniforms.depthContrast.value=1,a.overrideMaterial=Fx,this.render(a,i),this.setClearColor(a.bgColor,a.bgColor.a),this.setRenderTarget(null),a.overrideMaterial=e.wireframeState?Vx:null,i.layers.enable(0),i.layers.enable(3),a.traverseEntity(o=>{o.layers.isEnabled(8)&&(o.copyPreviousMatrix=!0)}))}renderSplineSceneWithDummyCamera(e,a,i=1){this.dummyCamera.updateCameraState(a.dataPatched),this.dummyCamera.matrix.copy(a.matrixWorld);let o=a.height,c=a.width,d=this.viewportWidth/this.viewportHeight;c<o?c=o*d:o=c/d,this.dummyCamera.setViewplaneSize(c,o);for(let g=0;g<i;g++)this.renderSplineScene(e,this.dummyCamera)}renderSplineScene(e,a,{sceneHelpers:i=void 0,sceneHelpersOnTop:o=void 0,overrideTransmission:c=void 0,overrideNormal:d=void 0}={}){var st;let g=e instanceof $l?e.activePage:e,b=g.visible;g.visible=!0;let j=g.scene;this.xr.enabled&&(this.isXRCopyPassSet===!1&&this.getRenderTarget()!==null&&(this.pipeline.setCopyPass(this.getRenderTarget()),this.isXRCopyPassSet=!0),this.xr.updateCamera(a)),this.setClearColor(g.bgColor,g.bgColor.a),g.penumbraSizeArray.forEach((ut,gt)=>{Ze.penumbraSize.value[gt]=ut}),Ze.pixelRatioNode.value=this.getPixelRatio(),this.resolution.x!==0&&this.resolution.y!==0?Ze.resolution.value.set(this.resolution.x,this.resolution.y):Ze.resolution.value.set(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio),d!==void 0?(Ze.normalRenderTarget.value=d,Ze.normalRenderTargetDepth.value=I3):j.needsNormal()&&(this.createNormalRenderTarget(),Ze.normalRenderTarget.value=this.normalRenderTarget.texture,Ze.normalRenderTargetDepth.value=this.normalRenderTarget.depthTexture,this.renderNormal(j,g,a));let $=g.data.ao,rt=$.occlusion;rt&&(this.createAORenderTarget(),Ze.aoRenderTarget.value=this.aoRenderTarget.texture),Ze.aoEnabled.value=rt,this.pipeline.setAmbientOcclusionParams($.occlusion,$.radius,$.bias,g.aoColor,g.fog!==null,g.backupFog.near,g.backupFog.far,$.aoFullRes),this.pipeline.aoPass.setBlueNoiseTexture(this.pipeline.blueNoiseTexture),this.pipeline.isUIOverlayEnabled&&((st=g.uiCanvas)!=null&&st.enabled)&&g.uiCanvas.texture&&g.uiCanvas.texture.image.width>0?((g.uiCanvas.width!==this.viewportWidth||g.uiCanvas.height!==this.viewportHeight)&&g.uiCanvas.applySize({width:this.viewportWidth,height:this.viewportHeight}),g.uiCanvas.render(),this.pipeline.uiOverlayPass.uiCanvas=g.uiCanvas,this.pipeline.uiOverlayPass.enabled=!0,this.pipeline.uiOverlayPass.setResolution(this.domElement.width,this.domElement.height,window.devicePixelRatio),this.pipeline.updateRenderToScreen()):(this.pipeline.uiOverlayPass.enabled=!1,this.pipeline.updateRenderToScreen());let _e=!1;if(c!==void 0)Ze.transmissionRenderTarget.value=c,Ze.transmissionRenderTargetDepth.value=I3,this.pipeline.setTransmissionPassEnabled(!1);else{let ut=j.needsTransmission();ut&&(this.transmissionRenderTarget===void 0&&(_e=!0),this.createTransmissionRenderTarget(),Ze.transmissionRenderTarget.value=this.transmissionRenderTarget.texture,Ze.aspectRatio.value=eR(this.viewportWidth,this.viewportHeight),Ze.transmissionRenderTargetDepth.value=this.transmissionDepthTarget.texture),this.pipeline.setTransmissionPassEnabled(ut)}a.layers.enable(3),a.layers.enable(8),this.pipeline.sceneHelpers=i,this.pipeline.sceneHelpersOnTop=o,this.pipeline.scene=g,this.pipeline.camera=a,_e&&this.pipeline.transmissionPass.updatePasses(this),this.pipeline.postprocessingState!==g.postprocessing&&(this.pipeline.updatePostprocessing(g.postprocessing),!i&&!o&&this.pipeline.disableHelpers()),this.clearAlphaOverride!==void 0&&this.setClearAlpha(this.clearAlphaOverride),g.overrideMaterial=j.wireframeState?Vx:null,this.pipeline.render(),Ze.frameIndex.value=(Ze.frameIndex.value+1)%16,a instanceof wr$1&&a.copyHistory(),g.visible=b}renderFromSceneForSceneTransitionPass(e,a,i){this.pipeline.renderToScreen=!1,this.pipeline.renderTarget,this.renderSplineScene(e,a),this.pipeline.sceneTransitionFromTexture=this.pipeline.renderTarget.texture,this.sceneTransitionDuration=i,this.sceneTransitionTimeRemaining=i,this.pipeline.renderToScreen=!0;let o=this.pipeline.sceneTransitionPass.uniforms;o.uDPR.value=window.devicePixelRatio,o.uResolution.value.set(this.domElement.width,this.domElement.height).divideScalar(window.devicePixelRatio)}_currentDispose(){var e,a,i,o,c,d;this._superDispose(),this.pipeline.dispose(),(e=this.aoRenderTarget)==null||e.dispose(),(a=this.transmissionRenderTarget)==null||a.dispose(),(i=this.transmissionDepthTarget)==null||i.dispose(),(o=this.normalRenderTarget)==null||o.dispose(),(d=(c=this.normalRenderTarget)==null?void 0:c.depthTexture)==null||d.dispose()}},Lf=class extends Qo(zy){constructor(e,a=15,i=10066329){super(e,a,i),this.object=e,this.added=!1,this.name=`DirectionalLightHelper: ${e.uuid}`}raycast(e,a){Ko(this.object,Lf.geometryHelper,e,a)}},Bf=class extends Qo(Vy){constructor(e,a=15,i=6710886){super(e,a,i),this.object=e,this.name=`PointLightHelper: ${e.uuid}`}raycast(e,a){Ko(this.object,Bf.geometryHelper,e,a)}},zx=class extends Qo(ky){constructor(e,a=6710886){super(e,a),this.object=e,this.name=`SpotLightHelper: ${e.uuid}`}raycast(e,a){Ko(this.object,zx.geometryHelper,e,a)}update(){if(this.object!==void 0){let e=zx._vector,a=this.object.distance?this.object.distance:1e3,i=a*Math.tan(this.object.angle);this.cone.scale.set(i,i,a),e.setFromMatrixPosition(this.object.target.matrixWorld),this.cone.lookAt(e);let o=this.color!==void 0?this.color:this.light.color;if(this.cone.material instanceof Array)for(let c=0,d=this.cone.material.length;c<d;c++)this.cone.material[c].color.set(o);else this.cone.material.color.set(o)}}},Km=zx;Km._vector=new _;function YQ(e,a){e.shadow.camera.right=a/2,e.shadow.camera.left=-a/2,e.shadow.camera.top=a/2,e.shadow.camera.bottom=-a/2,e.shadow.needsUpdate=!0}var Nf=class extends Sf(By,Lf){constructor(e,a,i){super(),this.super_Entity(e,a),this.castShadow=!0,this.shadow.mapSize.width=2048,this.shadow.mapSize.height=2048,this.shadow.normalBias=1,this.layers.enable(3);let o=this.shadow.camera;o.top=1250,o.bottom=-1250,o.right=1250,o.left=-1250,o.near=-1e4,o.far=2500;let c=new yl(this.shadow.camera);c.visible=!1,this.gizmos.shadowmap=c}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this.gizmos){let a=this.gizmos[e];a instanceof yl&&a.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.objectHelper&&this.objectHelper.update()}updateState(e,a){this.updateState_Light(e,a);let i=e.depth!==void 0&&e.depth!==this.shadow.camera.far||e.size!==void 0&&e.size/2!==this.shadow.camera.right;e.size!==void 0&&YQ(this,e.size),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null)),e.penumbraSize!==void 0&&a.scene.markPenumbraSizeDirty(),i&&this.update()}},R3=new _,L3=new _,B3=new Qe,Ff=class extends Sf(Ry,Km){constructor(e,a,i){super(),this.super_Entity(e,a),this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let o=this.shadow.camera;o.fov=Me.RAD2DEG*2*this.angle,o.aspect=1,o.near=100,o.far=2500;let c=new yl(this.shadow.camera);c.visible=!1,this.gizmos.shadowmap=c,this.update()}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this.gizmos){let a=this.gizmos[e];a instanceof yl&&a.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),L3.setFromMatrixPosition(this.matrixWorld),B3.setFromRotationMatrix(this.matrixWorld),R3.copy(this.up).applyQuaternion(B3).negate().multiplyScalar(this.distance),this.target.position.copy(L3).add(R3),this.target.updateMatrixWorld(),this.objectHelper&&this.objectHelper.update()}updateState(e,a){this.updateState_Light(e,a),e.distance!==void 0&&(this.distance=e.distance),e.decay!==void 0&&(this.decay=e.decay),e.angle!==void 0&&(this.angle=e.angle),e.penumbra!==void 0&&(this.penumbra=e.penumbra),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.penumbraSize!==void 0&&a.scene.markPenumbraSizeDirty(),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}},zt;(e=>{function a(){return[1,0,0,0,1,0,0,0,1]}e.identity=a;function i(It,Lt=e.identity()){for(let Ft=0,Nt=It.length;Ft<Nt;Ft++)Lt[Ft]=It[Ft];return Lt}e.copy=i;function o(It,Lt,Ft,Nt,Ht,Gr){return e.setAbcdef(e.identity(),It,Lt,Ft,Nt,Ht,Gr)}e.create=o;function c(It,Lt,Ft,Nt,Ht,Gr,hs){return It[0]=Lt,It[1]=Nt,It[2]=Gr,It[3]=Ft,It[4]=Ht,It[5]=hs,It}e.setAbcdef=c;function d(It,Lt){let[Ft,Nt,Ht,Gr,hs,_s]=b(It),[hn,Qn,ds,un,dr,us]=b(Lt),Nn=hn*Ft+Qn*Ht,gn=hn*Nt+Qn*Gr,Zn=ds*Ft+un*Ht,xu=ds*Nt+un*Gr,au=dr*Ft+us*Ht+hs,Vv=dr*Nt+us*Gr+_s;return e.create(Nn,gn,Zn,xu,au,Vv)}e.append=d;function g(It,Lt){let[Ft,Nt,Ht,Gr,hs,_s]=b(It),[hn,Qn,ds,un,dr,us]=b(Lt),Nn=Ft,gn=Nt,Zn=Ht,xu=Gr;(hn!==1||Qn!==0||ds!==0||un!==1)&&(Nn=Ft*hn+Nt*ds,gn=Ft*Qn+Nt*un,Zn=Ht*hn+Gr*ds,xu=Ht*Qn+Gr*un);let au=hs*hn+_s*ds+dr,Vv=hs*Qn+_s*un+us;return e.create(Nn,gn,Zn,xu,au,Vv)}e.prepend=g;function b(It){return[It[0],It[3],It[1],It[4],It[2],It[5]]}e.getAbcdef=b;function j(It){let[Lt,Ft,Nt,Ht,Gr,hs]=e.getAbcdef(It),_s=Lt*Ht-Ft*Nt,hn=Ht/_s,Qn=-Ft/_s,ds=-Nt/_s,un=Lt/_s,dr=(Nt*hs-Ht*Gr)/_s,us=-(Lt*hs-Ft*Gr)/_s;return e.create(hn,Qn,ds,un,dr,us)}e.invert=j;function $([It,Lt],Ft){let[Nt,Ht,Gr,hs,_s,hn]=e.getAbcdef(Ft);return[Nt*It+Gr*Lt+_s,Ht*It+hs*Lt+hn]}e.apply=$;function rt(It,Lt){let[Ft,Nt,Ht,Gr,hs,_s]=e.getAbcdef(Lt),hn=1/(Ft*Gr+Ht*-Nt),[Qn,ds]=It;return[Gr*hn*Qn+-Ht*hn*ds+(_s*Ht-hs*Gr)*hn,Ft*hn*ds+-Nt*hn*Qn+(-_s*Ft+hs*Nt)*hn]}e.applyInverse=rt;function _e(It,Lt,Ft=Lt){let[Nt,Ht,Gr,hs,_s,hn]=e.getAbcdef(It);return e.setAbcdef(It,Nt*Lt,Ht*Ft,Gr*Lt,hs*Ft,_s*Lt,hn*Ft),It}e.scale=_e;function st(It,Lt){let Ft=Math.cos(Lt),Nt=Math.sin(Lt),[Ht,Gr,hs,_s,hn,Qn]=e.getAbcdef(It);return e.setAbcdef(It,Ht*Ft-Gr*Nt,Ht*Nt+Gr*Ft,hs*Ft-_s*Nt,hs*Nt+_s*Ft,hn*Ft-Qn*Nt,hn*Nt+Qn*Ft),It}e.rotate=st;function ut(It,Lt,Ft){let[Nt,Ht]=Ft,Gr=e.translate(It,-Nt,-Ht);return Gr=e.rotate(Gr,Lt),Gr=e.translate(Gr,Nt,Ht),Gr}e.rotateAround=ut;function gt(It,Lt,Ft){let[Nt,Ht,Gr,hs,_s,hn]=e.getAbcdef(It);return e.setAbcdef(It,Nt,Ht,Gr,hs,_s+Lt,hn+Ft),It}e.translate=gt;function yt(It,Lt,Ft){let[Nt,Ht,Gr,hs]=e.getAbcdef(It);return e.setAbcdef(It,Nt,Ht,Gr,hs,Lt,Ft),It}e.setTranslate=yt;function Pt(It,Lt,Ft){let[Nt,Ht,Gr,hs]=e.getAbcdef(It);return e.setAbcdef(It,Nt,Ht,Gr,hs,Lt,Ft),It}e.setPosition=Pt;function wt(It){let[Lt,Ft,Nt,Ht]=e.getAbcdef(It),Gr=Math.sqrt(Lt*Lt+Ft*Ft),hs=Math.sqrt(Nt*Nt+Ht*Ht);return[Gr,hs]}e.getScale=wt;function Ct(It){let[,,,,Lt,Ft]=e.getAbcdef(It);return[Lt,Ft]}e.getPosition=Ct;function At(It,Lt){return e.decompose(It,Lt).rotation}e.getRotation=At;function Tt(It,Lt){let[Ft,Nt,Ht,Gr,hs,_s]=e.getAbcdef(It),hn=-Math.atan2(-Ht,Gr),Qn=Math.atan2(Nt,Ft),ds=Math.abs(hn+Qn),un=0,dr=[0,0];ds<1e-5||Math.abs(Math.PI*2-ds)<1e-5?(un=Qn,dr[0]=dr[1]=0):(un=0,dr[0]=hn,dr[1]=Qn);let us=[Math.sqrt(Ft*Ft+Nt*Nt),Math.sqrt(Ht*Ht+Gr*Gr)];return{position:[hs+(Lt[0]*Ft+Lt[1]*Ht)-Lt[0],_s+(Lt[0]*Nt+Lt[1]*Gr)-Lt[1]],scale:us,rotation:un,skew:dr,pivot:Lt}}e.decompose=Tt;function kt(It,Lt,Ft,Nt,Ht=[0,0]){let[Gr,hs]=It,[_s,hn]=Lt,[Qn,ds]=Nt,[un,dr]=Ht,us=Math.cos(Ft+dr)*_s,Nn=Math.sin(Ft+dr)*_s,gn=-Math.sin(Ft-un)*hn,Zn=Math.cos(Ft-un)*hn,xu=Gr-(Qn*us+ds*gn)+Qn,au=hs-(Qn*Nn+ds*Zn)+ds;return e.create(us,Nn,gn,Zn,xu,au)}e.compose=kt})(zt||(zt={}));var XQ=Math.PI/180;function N3(e,a,i,o,c,d){let g=e-i,b=a-o;return g*g/(c*c)+b*b/(d*d)<=1}function F3(e){return e*XQ}function G_(e){return{all:e=e||new Map,on:function(a,i){var o=e.get(a);o?o.push(i):e.set(a,[i])},off:function(a,i){var o=e.get(a);o&&(i?o.splice(o.indexOf(i)>>>0,1):e.set(a,[]))},emit:function(a,i){var o=e.get(a);o&&o.slice().map(function(c){c(i)}),(o=e.get("*"))&&o.slice().map(function(c){c(a,i)})}}}var Jt=class{constructor(e,a,i){this.uuid=e,this.data=a,this.localMatrix=zt.identity(),this.worldMatrix=zt.identity(),this.ignoreCameraZoom=!1,this.visible=!0,this._singleBBox=new ec,this._recursiveBBox=new ec,this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0,this.stateSelection=null,this.prevState=null,this.currentState=null,this.reversibleToState=null,this.currentTransitionEvent=null,this.previousAction=null,this.name="",this.position=[0,0],this.scale=[1,1],this.rotation=0,this.emitter=G_(),this.dpr=i.dpr??1,this.dataPatched=a}project(e,a){let i=this.worldMatrix;return a&&(i=zt.append(a.worldMatrix,i)),zt.applyInverse(e,i)}intersects(e,a,i,o=!1){return this.visible&&!this.data.raycastLock&&this.intersectsInLocalSpace(...this.project([e,a],i),o)}intersectsInLocalSpace(e,a,i=!1){let{min:o,max:c}=i?this.recursiveBBox:this.singleBBox;return e>=o[0]&&e<=c[0]&&a>=o[1]&&a<=c[1]}applyTransforms(e){e.setTransform(this.worldMatrix,this.ignoreCameraZoom)}get singleBBox(){return this.singleBBoxNeedsUpdate&&(this.singleBBoxNeedsUpdate=!1,this._singleBBox.setFromObjectSize(this,!1),this._singleBBox.computeVertices(),this._singleBBox.computeEdges()),this._singleBBox}get recursiveBBox(){return this.recursiveBBoxNeedsUpdate&&(this.recursiveBBoxNeedsUpdate=!1,this._recursiveBBox.setFromObjectSize(this,!0),this._recursiveBBox.computeVertices(),this._recursiveBBox.computeEdges()),this._recursiveBBox}updateLocalMatrix(){this.localMatrix=zt.compose(this.position,this.scale,F3(this.rotation),Na.getPivot(this.dataPatched))}updateWorldMatrix(e,a,i){let o=this.parent;a&&o!==null&&o!==void 0&&o.updateWorldMatrix(e,!0,!1),e&&this.updateLocalMatrix(),this.parent?this.worldMatrix=zt.append(this.parent.worldMatrix,this.localMatrix):this.worldMatrix=zt.copy(this.localMatrix),this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0}get pivot(){return Na.getPivot(this.data)}getCenter(){return[0,0]}getHalfSize(){return[0,0]}get id(){return this.uuid}resetBBoxNeedsUpdateSelf(){this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0}resetBBoxNeedsUpdate(){this.resetBBoxNeedsUpdateSelf(),this.traverseAncestors(e=>{e.resetBBoxNeedsUpdateSelf()})}updateTransformState(e){let a=!1;e.position!==void 0&&(a=!0,this.position=e.position),e.rotation!==void 0&&(a=!0,this.rotation=e.rotation),e.scale!==void 0&&(a=!0,this.scale=e.scale),a&&(this.updateWorldMatrix(!0,!1,!0),this.resetBBoxNeedsUpdate())}updateByOp(e,a,i){e.type===0&&e.props.visible!==void 0&&(this.visible=e.props.visible),this.data=a,this.data=a;let o=e,c=Rt(e.path,["states","*"]);if(c!==null){if(e.type===0){let[d]=c;if((this==null?void 0:this.stateSelection)===d){let g={...e.props};if(delete g.name,Object.values(e.props).some(b=>b===void 0)){let b=this.data;if(b!==void 0){let j=Nr$1.zoom(b,e.path.slice(2));if(j)for(let $ in e.props)e.props[$]===void 0&&$ in j&&(g[$]=j[$])}}o={...e,props:g,path:e.path.slice(2)}}}}else if(e.type===0){let d=this.stateSelection?this.data.states.data(this.stateSelection):void 0;if(d!==void 0){if(e.props.name!==void 0&&d.name){let{name:b,...j}=d;d=j}let g=Nr$1.removeOverridden(e.path,e.props,d);o={...e,props:g}}}this.updateByPatchedOpBase(o,Ba.patch(this.data,this.stateSelection?this.data.states.data(this.stateSelection):void 0),i)}changeSelectedState(e,a,i=!1){if(!(this.data.states.length===0&&!i)){for(let o of this.data.states)Ba.toOps(this.data,o.data).forEach(c=>{let d=Yh.replaceProps(c,this.data);this.dataPatched=this.data,this.updateByPatchedOp(d,this.data,a)});if(e!==null){let o=this.data.states.data(e);o&&(this.dataPatched=Ba.patch(this.data,o),Ba.toOps(this.data,o).forEach(c=>{this.updateByPatchedOp(c,this.dataPatched,a)}))}i&&this.updateTransformState(this.dataPatched),this.stateSelection=e}}updateState(e,a){e.name!==void 0&&(this.name=e.name),e.visible!==void 0&&(this.visible=e.visible),this.updateTransformState(e)}updateByPatchedOpBase(e,a,i){this.dataPatched=a,this.updateByPatchedOp(e,a,i)}updateByPatchedOp(e,a,i){e.path.length===0&&e.type===0&&this.updateState(e.props,i),this.requestRender()}traverseFrameAncestors(e){this.traverseAncestors(a=>{a.data.type==="frame2d"&&e(a)})}traverseAncestors(e){let a=this.parent;for(;a;)e(a),a=a.parent}requestRender(){this.traverseFrameAncestors(e=>{e.requestRender()})}clone(e){let a=new Jt(this.uuid,this.data,e);return a.parent=void 0,a}addEventListener(e,a){this.emitter.on(e,a)}removeEventListener(e,a){this.emitter.off(e,a)}dispatchEvent(e){this.emitter.emit(e.type,{...e,target:e.target??this})}traverseSortNextHelper(){let e=this.parent;if(e){let a=e.children;if(a){let i=a.indexOf(this)+1;return a[i]?a[i]:e.traverseSortNextHelper()}}}sortNext(){let e=this.children;return e&&e.length>0&&e[0]?e[0]:this.traverseSortNextHelper()}isDescendantOf(e){e instanceof Jt&&(e=e.uuid);let a=this;for(;a.parent;){if(a.parent.uuid===e)return!0;a=a.parent}return!1}},yn=class extends Jt{constructor(e,a,i){super(e,a,i),this.uuid=e,this.data=a,this.context=i,this.children=[]}add(e){e.parent&&e.parent instanceof yn&&e.parent.remove(e),this.children.push(e),e.parent=this}remove(e){let a=this.children.indexOf(e);a>=0&&(this.children.splice(a,1),e.parent=void 0)}traverse(e){let a=e(this);if(a!==!0)for(let i of this.children)i instanceof yn?i.traverse(e):a=e(i)}intersectsChildren(e,a,i,o=!1,c=[],d=!1){for(let g of this.children){let b=g instanceof Ln;if(g instanceof yn&&!b&&d&&g.intersectsChildren(e,a,i,o,c,!1),g.intersects(e,a,i,b)&&(c.push(g),o))break}return c}updateWorldMatrix(e,a,i){if(super.updateWorldMatrix(e,a,i),i&&this.children)for(let o of this.children)o.updateWorldMatrix(e,!1,!0)}find(e){let a;return this.traverse(i=>{i.uuid===e&&(a=i)}),a}innerDrawChildren(e){for(let a=this.children.length-1;a>=0;a--)this.children[a].draw(e)}resetBBoxNeedsUpdate(){super.resetBBoxNeedsUpdate(),this.traverse(e=>{e.resetBBoxNeedsUpdateSelf()})}clone(e){let a=new yn(this.uuid,this.data,e);a.parent=void 0;for(let i of this.children)a.add(i.clone(e));return a}},Ln=class extends yn{constructor(e,a,i){super(e,a,i),this.uuid=e,this.data=a,this.updateState(a,i)}draw(e){!this.visible||(e.save(),this.applyTransforms(e),this.innerDrawChildren(e),e.restore())}clone(e){let a=new Ln(this.uuid,this.data,e);a.parent=void 0;for(let i of this.children)a.add(i.clone(e));return a}};function QQ(e,a){let[[i,o],[c,d]]=e,[[g,b],[j,$]]=a,rt=(i-c)*(b-$)-(o-d)*(g-j);if(rt===0)return!1;let _e=((i-g)*(b-$)-(o-b)*(g-j))/rt,st=-((i-c)*(o-b)-(o-d)*(i-g))/rt;return _e>=0&&_e<=1&&st>=0&&st<=1}var V3=[[-1,1],[-1,-1],[1,-1],[1,1]],k3=(e,a,i)=>{let o=e.getCenter(),c=e.getHalfSize(),d=zt.append(a,e.worldMatrix);c[0]===0&&c[1]===0?i.push(zt.apply(o,d)):V3.forEach(g=>{let b=[g[0]*c[0]+o[0],g[1]*c[1]+o[1]];i.push(zt.apply(b,d))})},ec=class{constructor(){this.matrix=zt.identity(),this.min=[1/0,1/0],this.max=[-1/0,-1/0],this.vertices=[],this.edges=[]}setFromObjectSize(e,a=!1){e.updateWorldMatrix(),this.makeEmpty(),zt.copy(e.worldMatrix,this.matrix);let i=zt.invert(e.worldMatrix);this.expandByObjectSize(e,i,a)}expandByObjectSize(e,a,i=!1){let o=[];i===!0&&e instanceof yn?e.traverse(c=>{c.visible&&k3(c,a,o)}):k3(e,a,o),this.setFromPoints(o)}getCenter(){let[e,a]=this.min,[i,o]=this.getHalfSize();return zt.apply([e+i,a+o],this.matrix)}getSize(){return[this.max[0]-this.min[0],this.max[1]-this.min[1]]}getHalfSize(){return[(this.max[0]-this.min[0])*.5,(this.max[1]-this.min[1])*.5]}makeEmpty(){this.min=[1/0,1/0],this.max=[-1/0,-1/0]}setFromPoints(e){this.makeEmpty();for(let a of e)this.expandByPoint(a)}expandByPoint(e){this.min=[Math.min(this.min[0],e[0]),Math.min(this.min[1],e[1])],this.max=[Math.max(this.max[0],e[0]),Math.max(this.max[1],e[1])]}computeVertices(){let[e,a]=this.getHalfSize(),i=this.getCenter(),[o,c,d,g]=zt.getAbcdef(this.matrix),b=zt.create(o,c,d,g,i[0],i[1]);this.vertices=V3.map(([j,$])=>zt.apply([j*e,$*a],b))}computeEdges(){this.edges=[];for(let e=0,a=this.vertices.length;e<a;++e)this.edges.push([this.vertices[e],this.vertices[(e+1)%a]])}project(e,a){let i=this.matrix;return a&&(i=zt.append(a.worldMatrix,i)),zt.applyInverse(e,i)}intersects(e,a,i){return this.intersectsInLocalSpace(...this.project([e,a],i))}intersectsInLocalSpace(e,a){let{min:i,max:o}=this;return e>=i[0]&&e<=o[0]&&a>=i[1]&&a<=o[1]}containsPoint(e){let[a,i]=e,[o,c]=this.min,[d,g]=this.max;return a>=o&&a<=d&&i>=c&&i<=g}intersectsBBox2D(e){for(let a=0,i=this.edges.length;a<i;a++){let o=this.edges[a];for(let c=0,d=e.edges.length;c<d;c++){let g=e.edges[c];if(QQ(o,g))return!0}}for(let a=0,i=e.vertices.length;a<i;a++){let o=e.vertices[a];if(this.containsPoint(o))return!0}return!1}ensureMinMax(){let e=this.min,a=this.max;this.min=[Math.min(e[0],a[0]),Math.min(e[1],a[1])],this.max=[Math.max(e[0],a[0]),Math.max(e[1],a[1])]}copy(e){this.min=[...e.min],this.max=[...e.max],zt.copy(e.matrix,this.matrix),this.computeVertices(),this.computeEdges()}clone(){let e=new ec;return e.copy(this),e}},U3,G3=new Promise(e=>{U3=e}),z3=!1,Ux;function j3(){if(z3)return;if(Ux)return Ux;async function e(){let a=await __vitePreload(()=>import("./ui-8DWtXw2q.js"),__vite__mapDeps([]));U3(a.default??a),z3=!0}return Ux=e(),Ux}function H_(e){let a=!1;return e.scene.objects.traverse((i,o)=>{(o.type==="Mesh"&&o.geometry.type==="UIGeometry"||o.type==="Page"&&o.uiFrame!==void 0)&&(a=!0)}),a}var mt,j_;async function KQ(e){let a=await G3;mt||(j_||(j_=a({locateFile:()=>e})),mt=await j_)}var H3=zt.identity(),Zm=class{constructor(e,a=1){this.canvas=e,this.dpr=a,this._width=0,this._height=0,this._strokeMode="inside",this._layerBlur=0,this._backgroundBlur=0,this._dropShadowBlur=0,this._dropShadowOffsetX=0,this._dropShadowOffsetY=0,this._dropShadowColor=St.transparent,this._innerShadowBlur=0,this._innerShadowOffsetX=0,this._innerShadowOffsetY=0,this._innerShadowSpread=0,this._innerShadowColor=St.transparent,this._fonts=new Map;try{let i=e.getBoundingClientRect();e.width=i.width*a,e.height=i.height*a}catch{console.log(e.width,a)}this._currentM3Transform=H3,this._currentTransform=new Float32Array(H3)}async init(){var e,a;if(!this.wasmURL)throw Error("Your must set the wasm binary url with renderer.wasmURL = ... before you can call renderer.init");await KQ(this.wasmURL),this._surface=mt.MakeWebGLCanvasSurface(this.canvas),this.ctx=(e=this._surface)==null?void 0:e.getCanvas(),this._paint=new mt.Paint,this._paint.setAntiAlias(!0),this._paintFill=this._paint.copy(),this._paintFill.setStyle(mt.PaintStyle.Fill),this._paintStroke=this._paint.copy(),this._paintStroke.setStyle(mt.PaintStyle.Stroke),(a=this.ctx)==null||a.scale(this.dpr,this.dpr)}get currentTransform(){return this._currentM3Transform}get currentTransformBuffer(){return this._currentTransform}set currentTransform(e){this._currentM3Transform=e,this._currentTransform.set(e)}async loadFont(e,a){let i=await(await fetch(e)).arrayBuffer();this.registerFont(i,a)}registerFont(e,a){if(this._fonts.has(a))return;let i=mt.FontMgr.FromData(e);if(i)this._fonts.set(a,i);else throw new Error("Invalid font data for "+a)}get width(){return this._width}get height(){return this._height}set strokeColor(e){this._paintStroke&&this._paintStroke.setColor(Gx(e),mt.ColorSpace.DISPLAY_P3)}set fillColor(e){this._paintFill&&this._paintFill.setColor(Gx(e),mt.ColorSpace.DISPLAY_P3)}set lineWidth(e){this._paintStroke&&this._paintStroke.setStrokeWidth(this._strokeMode==="center"?e:e*2)}set strokeMode(e){this._strokeMode=e}set dropShadowBlur(e){this._dropShadowBlur=e}set dropShadowColor(e){this._dropShadowColor=e}set dropShadowOffsetX(e){this._dropShadowOffsetX=e}set dropShadowOffsetY(e){this._dropShadowOffsetY=e}set innerShadowBlur(e){this._innerShadowBlur=e}set innerShadowColor(e){this._innerShadowColor=e}set innerShadowOffsetX(e){this._innerShadowOffsetX=e}set innerShadowOffsetY(e){this._innerShadowOffsetY=e}set innerShadowSpread(e){this._innerShadowSpread=e}set layerBlur(e){this._layerBlur=e}set backgroundBlur(e){this._backgroundBlur=e}clear(){var e;(e=this.ctx)==null||e.clear(mt.TRANSPARENT)}save(){var e;(e=this.ctx)==null||e.save()}restore(){var e;(e=this.ctx)==null||e.restore()}beginPath(){var e;(e=this._currentPath)==null||e.delete(),this._currentPath=new mt.Path}closePath(){let e=this._currentPath;if(e){if(e.isEmpty())return;let a=e.getBounds();(a[3]-a[1]||a[2]-a[0])&&e.close()}}fill(){this._paintInner(this._paintFill,!0)}stroke(){this._paintInner(this._paintStroke,!1)}clipRect(e,a,i,o,c=0,d=0,g=0,b=0){var $,rt;let j=mt.XYWHRect(e,a,i,o);if(c===0&&d===0&&b===0&&g===0)($=this.ctx)==null||$.clipRect(j,mt.ClipOp.Intersect,!0);else{let _e=mt.RRectXY(j,c,c);_e[4]=_e[5]=c,_e[6]=_e[7]=d,_e[8]=_e[9]=g,_e[10]=_e[11]=b,(rt=this.ctx)==null||rt.clipRRect(_e,mt.ClipOp.Intersect,!0)}}_applyShadowOffsetMatrix(){if(this.ctx){let e=zt.invert(this.currentTransform);this.ctx.concat(e);let a=zt.translate(zt.identity(),this._dropShadowOffsetX,this._dropShadowOffsetY);this.ctx.concat(a),this.ctx.concat(this._currentTransform)}}_applyEffectsToPaint(e,a,i=!0){var o,c,d,g;if(this.ctx&&this._currentPath){let b,j=!1;if(i&&this._hasDropShadow()){let $=e.copy();$.setColor(Gx(this._dropShadowColor));let rt;this._dropShadowBlur>0&&(rt=mt.MaskFilter.MakeBlur(mt.BlurStyle.Normal,this._dropShadowBlur*this.dpr*(((o=this.camera)==null?void 0:o.scale)??1),!1),$.setMaskFilter(rt)),this.ctx.save(),this.ctx.clipPath(this._currentPath,mt.ClipOp.Difference,!0),this._applyShadowOffsetMatrix(),a($),this.ctx.restore(),$.delete(),rt==null||rt.delete()}if(this._backgroundBlur>0&&i){this.ctx.save(),this.ctx.clipPath(this._currentPath,mt.ClipOp.Intersect,!0);let $=mt.ImageFilter.MakeBlur(this._backgroundBlur,this._backgroundBlur,mt.TileMode.Clamp,null),rt=e.copy();rt.setImageFilter($),rt.setAlphaf(1);let _e=this._currentPath.computeTightBounds();this.ctx.saveLayer(rt,_e,null,mt.SaveLayerInitWithPrevious),this.ctx.drawColor(e.getColor()),this.ctx.restore(),this.ctx.restore(),rt.delete(),$.delete(),j=!0}if(this._layerBlur>0){let $=e.copy();b=mt.MaskFilter.MakeBlur(mt.BlurStyle.Normal,this._layerBlur*this.dpr*(((c=this.camera)==null?void 0:c.scale)??1),!1),$.setMaskFilter(b),a($),$.delete(),b.delete(),j=!0}if(j||a(e),i&&this._hasInnerShadow()){let $=new mt.Paint;$.setAntiAlias(!0),$.setStyle(mt.PaintStyle.Fill),$.setColor(Gx(this._innerShadowColor));let rt;this._innerShadowBlur>0&&(rt=mt.MaskFilter.MakeBlur(mt.BlurStyle.Normal,this._innerShadowBlur*this.dpr*(((d=this.camera)==null?void 0:d.scale)??1),!1),$.setMaskFilter(rt));let _e=this._currentPath.computeTightBounds(),[st,ut,gt,yt]=_e,Pt=gt-st,wt=yt-ut;this.ctx.save(),this.ctx.clipPath(this._currentPath,mt.ClipOp.Intersect,!0),this.ctx.saveLayer($,_e,null,mt.SaveLayerInitWithPrevious),(g=this.ctx)==null||g.translate(this._innerShadowOffsetX,this._innerShadowOffsetY),this.ctx.drawRect(mt.XYWHRect(-1e3-this._innerShadowOffsetX,-1e3-this._innerShadowOffsetY,2e3+Pt+Math.abs(this._innerShadowOffsetX*2),2e3+wt+Math.abs(this._innerShadowOffsetY*2)),$),$.setBlendMode(mt.BlendMode.Clear),this.ctx.drawPath(this._currentPath,$),this.ctx.restore(),this.ctx.restore(),$.delete(),rt==null||rt.delete()}}}_paintInner(e,a=!0){if(this.ctx&&this._currentPath&&e){let i=this.ctx,o=this._currentPath;this._applyEffectsToPaint(e,c=>{let d=!1;!a&&this._strokeMode!=="center"&&(i.save(),i.clipPath(o,this._strokeMode==="outside"?mt.ClipOp.Difference:mt.ClipOp.Intersect,!0),d=!0),i.drawPath(o,c),d&&i.restore()},a)}}_hasDropShadow(){var e;return((e=this._dropShadowColor)==null?void 0:e.a)>0}_hasInnerShadow(){var e;return((e=this._innerShadowColor)==null?void 0:e.a)>0}path(e){var a;(a=this._currentPath)==null||a.addPath(mt.Path.MakeFromSVGString(e))}ellipse(e,a,i,o,c,d,g,b){var $;if(!W3([e,a,i,o])||!this._currentPath)return;if(i<0||o<0)throw Error("radii cannot be negative");let j=mt.XYWHRect(e-i,a-o,i*2,o*2);($=this._currentPath)==null||$.addOval(j)}rect(e,a,i,o,c=0,d=0,g=0,b=0){var $,rt;let j=mt.XYWHRect(e,a,i,o);if(W3(j))if(c===0&&d===0&&b===0&&g===0)($=this._currentPath)==null||$.addRect(j);else{let _e=mt.RRectXY(j,c,c);_e[4]=_e[5]=c,_e[6]=_e[7]=d,_e[8]=_e[9]=g,_e[10]=_e[11]=b,(rt=this._currentPath)==null||rt.addRRect(_e)}}getHorizontalAlign(e){switch(e){case 2:return mt.TextAlign.Right;case 3:return mt.TextAlign.Center;case 4:return mt.TextAlign.Justify;case 1:default:return mt.TextAlign.Left}}drawTextInner(e,a,i,[o,c,d,g],b,j,$=!0){let rt=0,{ctx:_e}=this;if(!_e)return rt;let st=j.copy(),ut=j.copy();return ut.setAlphaf(0),this._applyEffectsToPaint(st,gt=>{a.pushPaintStyle(i,gt,ut),a.addText(e);let yt=a.build();yt.layout(d);let Pt=c;b===2?Pt+=(g-yt.getHeight())/2:b===3&&(Pt+=g-yt.getHeight()),_e.drawParagraph(yt,o,Pt),rt=yt.getHeight(),a.reset(),yt.delete()},$),st.delete(),ut.delete(),rt}drawText(e,a){let i=0,o=this._fonts.get(a.font),{ctx:c,_paintFill:d,_paintStroke:g}=this;if(o&&c){let b=new mt.TextStyle({fontFamilies:[a.font],fontSize:a.fontSize,heightMultiplier:a.lineHeight,letterSpacing:a.letterSpacing}),j=new mt.ParagraphStyle({textStyle:b,textAlign:this.getHorizontalAlign(a.horizontalAlign)}),$=mt.XYWHRect(a.x,a.y,a.width,a.height),rt=mt.ParagraphBuilder.Make(j,o);d&&(i=this.drawTextInner(e,rt,b,$,a.verticalAlign,d,!0)),g&&(i=this.drawTextInner(e,rt,b,$,a.verticalAlign,g,!1)),rt.delete()}return{height:i}}render(){var e;(e=this._surface)==null||e.flush()}moveTo(e,a){var i;(i=this._currentPath)==null||i.moveTo(e,a)}lineTo(e,a){var i;(i=this._currentPath)==null||i.lineTo(e,a)}bezierCurveTo(e,a,i,o,c,d){var g;(g=this._currentPath)==null||g.cubicTo(e,a,i,o,c,d)}quadraticCurveTo(e,a,i,o){var c;(c=this._currentPath)==null||c.quadTo(e,a,i,o)}setTransform(e,a=!1){var c,d,g,b,j;if(!this.ctx)return;let i=this.ctx.getTotalMatrix(),o=zt.invert(i);if(o&&this.ctx.concat(o),(c=this.ctx)==null||c.scale(this.dpr,this.dpr),((d=this.camera)==null?void 0:d.enabled)&&((g=this.ctx)==null||g.concat(this.camera.worldMatrix),a)){let $=zt.getScale(this.camera.worldMatrix);(b=this.ctx)==null||b.scale(1/$[0],1/$[1])}(j=this.ctx)==null||j.concat(e),this.currentTransform=e}transform(e){var a;(a=this.ctx)==null||a.concat(e)}setSize(e,a){var i;e===this._width&&a===this._height||(this._width=e,this._height=a,this.canvas.style.width=e+"px",this.canvas.style.height=a+"px",this.canvas.width=e*this.dpr,this.canvas.height=a*this.dpr,this._surface&&(this._surface=mt.MakeWebGLCanvasSurface(this.canvas),this.ctx=(i=this._surface)==null?void 0:i.getCanvas()))}};function W3(e){for(let a=0;a<e.length;a++)if(e[a]!==void 0&&!Number.isFinite(e[a]))return!1;return!0}function Gx({r:e,g:a,b:i,a:o}){return mt.Color4f(e,a,i,o)}var Jm=class{constructor(e,a,i){this.uuid=e,this.data=a,this.enabled=!1,this.color=St.transparent,this.blurRadius=0,this.offset=[0,0],this.spread=0,this.update(a)}update(e){e.color!==void 0&&(this.color=e.color),e.enabled!==void 0&&(this.enabled=e.enabled),e.blurRadius!==void 0&&(this.blurRadius=e.blurRadius),e.offset!==void 0&&(this.offset=e.offset),e.spread!==void 0&&(this.spread=e.spread)}},$m=class{constructor(e,a,i){this.uuid=e,this.data=a,this.enabled=!1,this.radius=0,this.update(a)}update(e){e.enabled!==void 0&&(this.enabled=e.enabled),e.radius!==void 0&&(this.radius=e.radius)}},jx=class{constructor(e,a,i){this.uuid=e,this.data=a,this.enabled=!1,this.color=St.transparent,this.update(a)}update(e){e.enabled!==void 0&&(this.enabled=e.enabled),e.color!==void 0&&(this.color=e.color)}},Hx=class{constructor(e,a,i){this.uuid=e,this.data=a,this.enabled=!1,this.color=St.transparent,this.thickness=0,this.mode="inside",this.update(a)}update(e){e.enabled!==void 0&&(this.enabled=e.enabled),e.color!==void 0&&(this.color=e.color),e.thickness!==void 0&&(this.thickness=e.thickness),e.mode!==void 0&&(this.mode=e.mode)}},Ar$1=class extends Jt{constructor(a,i,o){super(a,i,o),this.uuid=a,this.data=i,this.autoClose=!0,this.fill=new jx(a+"-fill",i.fill,o),this.stroke=new Hx(a+"-stroke",i.stroke,o),this.dropShadow=new Jm(a+"-dropShadow",i.dropShadow,o),this.innerShadow=new Jm(a+"-innerShadow",i.innerShadow,o),this.backgroundBlur=new $m(a+"-backgroundBlur",i.backgroundBlur,o),this.layerBlur=new $m(a+"-layerBlur",i.layerBlur,o)}applyFillStroke(a){a.fillColor=this.fill.enabled?this.fill.color:St.transparent,a.strokeColor=this.stroke.enabled&&this.stroke.thickness>0?this.stroke.color:St.transparent,a.strokeMode=this.stroke.mode,a.lineWidth=this.stroke.thickness}applyFilters(a){this.layerBlur.enabled?a.layerBlur=this.layerBlur.radius*5:a.layerBlur=0,this.backgroundBlur.enabled?a.backgroundBlur=this.backgroundBlur.radius*5:a.backgroundBlur=0,this.dropShadow.enabled?(a.dropShadowBlur=this.dropShadow.blurRadius*5,a.dropShadowColor=this.dropShadow.color,a.dropShadowOffsetX=this.dropShadow.offset[0],a.dropShadowOffsetY=this.dropShadow.offset[1]):a.dropShadowColor=St.transparent,this.innerShadow.enabled?(a.innerShadowSpread=this.innerShadow.spread,a.innerShadowBlur=this.innerShadow.blurRadius*5,a.innerShadowColor=this.innerShadow.color,a.innerShadowOffsetX=this.innerShadow.offset[0],a.innerShadowOffsetY=this.innerShadow.offset[1]):a.innerShadowColor=St.transparent}innerDraw(a){}draw(a){!this.visible||(a.save(),this.applyTransforms(a),this.applyFilters(a),this.applyFillStroke(a),a.beginPath(),this.innerDraw(a),this.autoClose&&a.closePath(),this.fill.enabled&&a.fill(),this.stroke.enabled&&a.stroke(),a.restore())}updateByPatchedOp(a,i,o){super.updateByPatchedOp(a,i,o),a.type===0&&(Rt(a.path,["fill"])?this.fill.update(a.props):Rt(a.path,["stroke"])?this.stroke.update(a.props):Rt(a.path,["dropShadow"])?this.dropShadow.update(a.props):Rt(a.path,["innerShadow"])?this.innerShadow.update(a.props):Rt(a.path,["layerBlur"])?this.layerBlur.update(a.props):Rt(a.path,["backgroundBlur"])?this.backgroundBlur.update(a.props):this.resetBBoxNeedsUpdate())}updateState(a,i){super.updateState(a,i),a.fill!==void 0&&this.fill.update(a.fill),a.stroke!==void 0&&this.stroke.update(a.stroke),a.dropShadow!==void 0&&this.dropShadow.update(a.dropShadow),a.innerShadow!==void 0&&this.innerShadow.update(a.innerShadow),a.layerBlur!==void 0&&this.layerBlur.update(a.layerBlur),a.backgroundBlur!==void 0&&this.backgroundBlur.update(a.backgroundBlur)}clone(a){let i=new Ar$1(this.uuid,this.data,a);return i.parent=void 0,i}},tc=class extends Ar$1{constructor(e,a,i){super(e,a,i),this.uuid=e,this.data=a,this.width=0,this.height=0,this.updateState(a,i)}innerDraw(e){e.ellipse(this.width*.5,this.height*.5,this.width*.5,this.height*.5,0,0,Math.PI*2)}intersectsInLocalSpace(e,a){return N3(e,a,this.width*.5,this.height*.5,this.width*.5,this.height*.5)}getCenter(){return[this.width*.5,this.height*.5]}getHalfSize(){return[this.width*.5,this.height*.5]}updateSizeState(e){let a=!1;e.width!==void 0&&(this.width=typeof e.width=="number"?e.width:this.width,a=!0),e.height!==void 0&&(this.height=typeof e.height=="number"?e.height:this.height,a=!0),a&&this.updateWorldMatrix(!0,!1,!0)}updateState(e,a){super.updateState(e,a),this.updateSizeState(e)}clone(e){let a=new tc(this.uuid,this.data,e);return a.parent=void 0,a}},Bs=class extends Ar$1{constructor(e,a,i){super(e,a,i),this.uuid=e,this.data=a,this.width=0,this.height=0,this.cornerRadius=[0,0,0,0],this.updateState(a,i)}innerDraw(e){e.rect(0,0,this.width,this.height,...this.cornerRadius)}getCenter(){return[this.width*.5,this.height*.5]}getHalfSize(){return[this.width*.5,this.height*.5]}updateCornerState(e){e.cornerRadius!==void 0&&(this.cornerRadius=e.cornerRadius)}updateSizeState(e){let a=!1;e.width!==void 0&&(this.width=typeof e.width=="number"?e.width:this.width,a=!0),e.height!==void 0&&(this.height=typeof e.height=="number"?e.height:this.height,a=!0),a&&this.updateWorldMatrix(!0,!1,!0)}updateState(e,a){super.updateState(e,a),this.updateSizeState(e),this.updateCornerState(e)}clone(e){let a=new Bs(this.uuid,this.data,e);return a.parent=void 0,a}},rc=class extends Ar$1{constructor(e,a,i){super(e,a,i),this.uuid=e,this.data=a,this._textHeight=0,this._textHeightDirty=!0,this.width=0,this.height=0,this.updateState(a,i)}get textHeight(){return this._textHeight}applyFillStroke(e){e.fillColor=this.fill.enabled?this.fill.color:St.transparent,e.strokeColor=this.stroke.enabled&&this.stroke.thickness>0?this.stroke.color:St.transparent,e.strokeMode="center",e.lineWidth=this.stroke.thickness}innerDraw(e){var d;(d=this._fontHolder)!=null&&d.arrayBuffer&&this._fontHolder.arrayBuffer.byteLength>1&&this.data.font&&e.registerFont(this._fontHolder.arrayBuffer,this.data.font);let a=this.data.textTransform,i=this.data.text.textValue.toString(),o=a===2?i.toUpperCase():a===3?i.toLowerCase():i,{height:c}=e.drawText(o,{x:0,y:0,width:this.width,height:this.height,fontSize:this.data.fontSize,lineHeight:this.data.lineHeight??1,letterSpacing:this.data.letterSpacing??0,horizontalAlign:this.data.horizontalAlign,verticalAlign:this.data.verticalAlign,font:this.data.font});this._textHeight=c}getCenter(){return[this.width*.5,this.height*.5]}getHalfSize(){return[this.width*.5,this.height*.5]}updateSizeState(e){let a=!1;e.width!==void 0&&(this.width=typeof e.width=="number"?e.width:this.width,a=!0),e.height!==void 0&&(this.height=typeof e.height=="number"?e.height:this.height,a=!0),a&&this.updateWorldMatrix(!0,!1,!0)}updateFontState(e,{shared:a}){e.font!==void 0&&(this._fontHolder=a.getFont(e.font),this._fontHolder&&!this._fontHolder.isLoaded&&this._fontHolder.loadingPromise.then(()=>{this.requestRender()}))}updateState(e,a){super.updateState(e,a),this.updateSizeState(e),this.updateFontState(e,a)}clone(e){let a=new rc(this.uuid,this.data,e);return a.parent=void 0,a}},kf=class extends Ar$1{constructor(e,a,i){super(e,a,i),this.uuid=e,this.data=a,this.curves=[],this.extremasBBox={min:[0,0],max:[0,0]},this.updateState(a,i)}computeExtremas(){this.curves.length===0&&this.computeCurves();let e=this.curves.map(o=>Wx.extremas(o)),a=[1/0,1/0],i=[-1/0,-1/0];for(let o=0,c=e.length;o<c;o++){let d=e[o];d[0][0]<a[0]&&(a[0]=d[0][0]),d[0][1]<a[1]&&(a[1]=d[0][1]),d[1][0]>i[0]&&(i[0]=d[1][0]),d[1][1]>i[1]&&(i[1]=d[1][1])}return this.extremasBBox.min=[a[0],a[1]],this.extremasBBox.max=[i[0],i[1]],this.extremasBBox}computeCurves(){this.curves=[];for(let i=1,o=this.data.points.length;i<o;i++){let c=this.data.points[i].data,d=this.data.points[i-1].data,g={start:d.position,cp1:d.controlNext.position,cp2:c.controlPrevious.position,end:c.position};this.curves.push(g)}let e=this.data.points[0].data,a=this.data.points[this.data.points.length-1].data;if(this.data.isClosed){let i={start:a.position,cp1:a.controlNext.position,cp2:e.controlPrevious.position,end:e.position};this.curves.push(i)}}getCenter(){let[e,a]=this.extremasBBox.min,[i,o]=this.getHalfSize();return[e+i,a+o]}getHalfSize(){let{min:e,max:a}=this.extremasBBox;return[(a[0]-e[0])*.5,(a[1]-e[1])*.5]}innerDraw(e){for(let o=0,c=this.data.points.length;o<c;o++){let d=this.data.points[o].data;if(o===0){let[g,b]=d.position;e.moveTo(g,b)}else{let g=this.data.points[o-1].data,[b,j]=g.controlNext.position,[$,rt]=d.controlPrevious.position,[_e,st]=d.position,ut={start:g.position,cp1:g.controlNext.position,cp2:d.controlPrevious.position,end:d.position};Wx.derive(ut),e.bezierCurveTo(b,j,$,rt,_e,st)}}let a=this.data.points[0].data,i=this.data.points[this.data.points.length-1].data;if(this.data.isClosed){let[o,c]=i.controlNext.position,[d,g]=a.controlPrevious.position,[b,j]=a.position;e.bezierCurveTo(o,c,d,g,b,j)}}updateState(e,a){super.updateState(e,a),this.computeExtremas()}clone(e){let a=new kf(this.uuid,this.data,e);return a.parent=void 0,a}},Wx;(e=>{function a(g){let b=g.start,j=g.cp1,$=g.cp2,rt=g.end,_e=[3*(j[0]-b[0]),3*(j[1]-b[1])],st=[3*($[0]-j[0]),3*($[1]-j[1])],ut=[3*(rt[0]-$[0]),3*(rt[1]-$[1])],gt={start:_e,cp:st,end:ut};return g.derivative=gt,gt.derivative=W_.derive(gt),gt}e.derive=a;function i(g,b,j,$=!1){let rt=g-2*b+j;if(rt!==0){let _e=-Math.sqrt(Math.abs(b*b-g*j)),st=-g+b,ut=-(_e+st)/rt,gt=-(-_e+st)/rt;return[ut,gt]}else if(b!==j&&rt===0)return[(2*b-j)/(2*(b-j))];return[]}function o(g){let b=g.derivative??e.derive(g),j=b.start,$=b.cp,rt=b.end;return[i(j[0],$[0],rt[0]),i(j[1],$[1],rt[1])]}e.droot=o;function c(g){let[b,j]=e.droot(g),$=[g.start[0],g.end[0]],rt=[g.start[1],g.end[1]];for(let _e of b)$.push(e.compute(g,Math.min(1,Math.max(0,_e)))[0]);for(let _e of j)rt.push(e.compute(g,Math.min(1,Math.max(0,_e)))[1]);return $.sort((_e,st)=>_e-st),rt.sort((_e,st)=>_e-st),[[$[0],rt[0]],[$[$.length-1],rt[rt.length-1]]]}e.extremas=c;function d(g,b){if(b===0)return[...g.start];if(b===1)return[...g.end];let j=1-b,$=j*j,rt=b*b,_e=$*j,st=$*b*3,ut=j*rt*3,gt=b*rt;return[_e*g.start[0]+st*g.cp1[0]+ut*g.cp2[0]+gt*g.end[0],_e*g.start[1]+st*g.cp1[1]+ut*g.cp2[1]+gt*g.end[1]]}e.compute=d})(Wx||(Wx={}));var W_;(e=>{function a(c){let d=c.start,g=c.cp,b=c.end,j=[2*(g[0]-d[0]),2*(g[1]-d[1])],$=[2*(b[0]-g[0]),2*(b[1]-g[1])],rt={start:j,end:$};return rt.derivative=q_.derive(rt),c.derivative=rt,rt}e.derive=a;function i(c){let d=c.derivative??e.derive(c),g=d.start,b=d.end;return[g[0]!==b[0]?g[0]/(g[0]-b[0]):0,g[1]!==b[1]?g[1]/(g[1]-b[1]):0]}e.droot=i;function o(c,d){if(d===0)return[...c.start];if(d===1)return[...c.end];let g=1-d,b=g*g,j=d*d,$=b,rt=g*d*2,_e=j;return[$*c.start[0]+rt*c.cp[0]+_e*c.end[0],$*c.start[1]+rt*c.cp[1]+_e*c.end[1]]}e.compute=o})(W_||(W_={}));var q_;(e=>{function a(o){let c=o.start,d=o.end,g=[d[0]-c[0],d[1]-c[1]];return o.derivative=g,o.derivative}e.derive=a;function i(o,c){if(c===0)return[...o.start];if(c===1)return[...o.end];let d=o.start,g=o.end;return[d[0]+(g[0]-d[0])*c,d[1]+(g[1]-d[1])*c]}e.compute=i})(q_||(q_={}));var an=class extends yn{constructor(e,a,i){super(e,a,i),this.uuid=e,this.width=0,this.height=0,this.clipped=!0,this.background=new Bs(e+"-background",dd.defaultData,i),this.background.parent=this,this.updateState(a,i)}get fill(){return this.background.fill}get stroke(){return this.background.stroke}get backgroundBlur(){return this.background.backgroundBlur}get layerBlur(){return this.background.layerBlur}get dropShadow(){return this.background.dropShadow}get innerShadow(){return this.background.innerShadow}get cornerRadius(){return this.background.cornerRadius}set cornerRadius(e){this.background.cornerRadius=e}updateLocalMatrix(){var e;super.updateLocalMatrix(),(e=this.background)==null||e.updateLocalMatrix()}updateWorldMatrix(e,a,i){var o;super.updateWorldMatrix(e,a,i),(o=this.background)==null||o.updateWorldMatrix(e,a,i)}draw(e){if(!this.visible)return;e.save();let a=this.width,i=this.height;this.applyTransforms(e),this.background.width=a,this.background.height=i,this.background.draw(e),this.clipped&&e.clipRect(0,0,a,i,...this.cornerRadius),this.innerDrawChildren(e),e.restore()}getCenter(){return[this.width*.5,this.height*.5]}getHalfSize(){return[this.width*.5,this.height*.5]}updateCornerState(e){e.cornerRadius!==void 0&&(this.cornerRadius=e.cornerRadius)}updateSizeState(e){let a=!1;e.width!==void 0&&(this.width=typeof e.width=="number"?e.width:this.width,a=!0),e.height!==void 0&&(this.height=typeof e.height=="number"?e.height:this.height,a=!0),a&&this.updateWorldMatrix(!0,!1,!0)}updateState(e,a){super.updateState(e,a),this.updateSizeState(e),this.updateCornerState(e),e.fill!==void 0&&this.fill.update(e.fill),e.stroke!==void 0&&this.stroke.update(e.stroke),e.dropShadow!==void 0&&this.dropShadow.update(e.dropShadow),e.innerShadow!==void 0&&this.innerShadow.update(e.innerShadow),e.layerBlur!==void 0&&this.layerBlur.update(e.layerBlur),e.backgroundBlur!==void 0&&this.backgroundBlur.update(e.backgroundBlur),e.clipped!==void 0&&(this.clipped=e.clipped)}requestRender(){super.requestRender(),this.dispatchEvent({type:"render"})}dispose(){this.removeEventListener("render")}updateByPatchedOp(e,a,i){super.updateByPatchedOp(e,a,i),e.type===0&&(Rt(e.path,["fill"])?this.fill.update(e.props):Rt(e.path,["stroke"])?this.stroke.update(e.props):Rt(e.path,["dropShadow"])?this.dropShadow.update(e.props):Rt(e.path,["innerShadow"])?this.innerShadow.update(e.props):Rt(e.path,["layerBlur"])?this.layerBlur.update(e.props):Rt(e.path,["backgroundBlur"])?this.backgroundBlur.update(e.props):this.resetBBoxNeedsUpdate())}clone(e){let a=new an(this.uuid,this.data,e);a.parent=void 0;for(let i of this.children)a.add(i.clone(e));return a}},Q3=pi(Y_(),1),qa=class extends Ar$1{constructor(e,a,i){super(e,a,i),this.uuid=e,this.data=a,this._pathBBox=new DOMRect,this.path="",this.updateState(a,i),this.autoClose=!1,this.computeSVGBBox()}computeSVGBBox(){let e=document.createElementNS("http://www.w3.org/2000/svg","svg"),a=document.createElementNS("http://www.w3.org/2000/svg","path");document.body.appendChild(e),a.setAttribute("d",this.path),e.appendChild(a),this._pathBBox=a.getBBox(),e.remove()}innerDraw(e){e.path(this.path)}intersectsInLocalSpace(e,a){return e>=this._pathBBox.x&&e<=this._pathBBox.x+this._pathBBox.width&&a>=this._pathBBox.y&&a<=this._pathBBox.y+this._pathBBox.height}getCenter(){return[(this._pathBBox.x+this._pathBBox.width)/2,(this._pathBBox.y+this._pathBBox.height)/2]}getHalfSize(){return[(this._pathBBox.x+this._pathBBox.width)/2,(this._pathBBox.y+this._pathBBox.height)/2]}updateState(e,a){super.updateState(e,a),e.path!==void 0&&(this.path=e.path,this.computeSVGBBox())}clone(e){let a=new qa(this.uuid,this.data,e);return a.parent=void 0,a}};function K3(e,a=1,i=1){if(a<=0||i<=0)return e;let o=(0,Q3.parseSVG)(e).map(c=>{let d={...c};return"x"in d&&(d.x=d.x*a),"y"in d&&(d.y=d.y*i),"x1"in d&&(d.x1=d.x1*a),"x2"in d&&(d.x2=d.x2*a),"y1"in d&&(d.y1=d.y1*i),"y2"in d&&(d.y2=d.y2*i),"rx"in d&&(d.rx=d.rx*a),"ry"in d&&(d.ry=d.ry*i),d});return Z3(o)}function Z3(e){let a=["rx","ry","xAxisRotation","largeArc","sweep","x1","y1","x2","y2","x","y"],i;return e.map(o=>{let c=[];a.forEach(g=>{if(g in o){let b=o[g]*1;c.length&&b>=0&&c.push(","),c.push(b)}});let d=(i===o.code?c[0]<0?"":",":o.code)+c.join("");return i=o.code,d}).join("")}function J3(e,a,i){switch(a.type){case"ellipse2d":return new tc(e,a,i);case"rectangle2d":return new Bs(e,a,i);case"text2d":return new rc(e,a,i);case"vector2d":return new kf(e,a,i);case"path2d":return new qa(e,a,i);case"frame2d":return new an(e,a,i);case"group2d":default:return new Ln(e,a,i)}}var X_=class{constructor(e,a,i){this.uuid=e,this.data=a,this.group=new Ln(X_.GROUP_ID,{...lm.defaultData},i),this.createChildrenObjects(a.objects,this.group,i)}createObject(e,a,i,o,c,d){let g=J3(e,a,d);g&&(o.add(g),o.children.splice(c,0,o.children.pop()),g.updateWorldMatrix(),i.length>0&&(g instanceof Ln||g instanceof an)&&this.createChildrenObjects(i,g,d))}createChildrenObjects(e,a,i){let o=0;for(let c of e)this.createObject(c.id,c.data,c.children,a,o,i),o+=1}draw(e){this.group.draw(e)}updateEntityByOp(e,a,i,o){let c=this.find(e);if(c)try{c.updateByOp(a,i,{shared:o})}catch(d){console.error(d)}}updateTreeByOp(e,a){if(e.path.length===0&&e.type===7){let i=e.parent===null?this.group:this.find(e.parent);i!==void 0&&i instanceof yn&&(this.createObject(e.id,e.data,e.children,i,e.localIndex,a),i.requestRender())}else if(e.path.length===0&&e.type===8){let i=this.find(e.id);if(i!==void 0&&i.parent!==void 0&&i.parent instanceof yn){let o=i.parent;i.resetBBoxNeedsUpdate(),o==null||o.remove(i),o==null||o.requestRender()}}else if(e.path.length===0&&e.type===9){let i=this.find(e.id);if(i!==void 0){let o=i.parent,c=e.parent===null?this:this.find(e.parent);if(c instanceof yn||c===this){c.add(i);let d=e.localIndex;c.children.splice(d,0,c.children.pop()),i.updateWorldMatrix(!0,!1,!0),o==null||o.requestRender(),i.requestRender()}i.resetBBoxNeedsUpdate()}}}add(e){this.group.add(e)}remove(e){this.group.remove(e)}traverse(e){this.group.traverse(a=>{a!==this.group&&e(a)})}intersectsChildren(e,a,i,o=!1,c=[]){return this.group.intersectsChildren(e,a,i,o,c,!0)}find(e){return this.group.find(e)}get children(){return this.group.children}project(e,a){return this.group.project(e,a)}getWithSortKey(e){let a=this.find(e);if(a===void 0)return;let i=[],o=a;for(;o!==this.group;){let c=o;o=o.parent;let d=o.children.indexOf(c);i.splice(0,0,d)}return{entity:a,sortKey:i}}getAllSorted(e){let a=[];for(let i of e){let o=this.getWithSortKey(i.id);o!==void 0&&a.push(o)}return a.sort((i,o)=>bv(i.sortKey,o.sortKey)),a.map(i=>i.entity)}},lu=X_;lu.GROUP_ID="scene2d";function Q_({constraints:e,newParentWidth:a,newParentHeight:i,initialParentWidth:o,initialParentHeight:c,objectInitialWidth:d,objectInitialHeight:g,objectInitialPosition:b}){let{horizontalConstraint:j,verticalConstraint:$}=e,rt=a-o,_e=i-c,st=d,ut=g,gt=b[0],yt=b[1];if(j!==0){if(j===1)gt+=rt;else if(j===3)gt+=rt/2;else if(j===2)st=Math.max(1,st+rt);else if(j===4){let Pt=a/o;st*=Pt,gt*=Pt}}if($!==0){if($===1)yt+=_e;else if($===3)yt+=_e/2;else if($===2)ut=Math.max(1,ut+_e);else if($===4){let Pt=i/c;ut*=Pt,yt*=Pt}}return{width:st,height:ut,position:[gt,yt]}}pi(Y_(),1);var tK=zt.identity(),Vf=class{constructor(e,a,i,o){this.uuid=e,this.width=a,this.height=i,this.context=o,this.enabled=!0,this.isScreenSpace=!1,this.isFrameDirty=!1,this.onRenderRequestedDownstream=()=>{this.isFrameDirty=!0,this.context.shared.requestRender()},this.onFrameOverrideObjectEvent=c=>{var d,g;if(((d=c.target)==null?void 0:d.uuid)!==void 0){let b=(g=this.frameRoot)==null?void 0:g.find(c.target.uuid);b&&b.dispatchEvent({...c,target:b})}},this.scene2d=new lu(Me.generateUUID(),p0.defaultData,{dpr:window.devicePixelRatio,shared:o.shared}),this.canvas=document.createElement("canvas"),this.renderer=new Zm(this.canvas),o.shared.addCanvas(this.uuid,this.canvas),this.textureHolder=o.shared.canvas(this.uuid),this.promise=this.init()}async init(){this.renderer instanceof Zm&&(this.renderer.wasmURL=tx.skiaWasmUrl),await this.renderer.init()}render(){var e,a;this.isFrameDirty&&(this.renderer.clear(),(e=this.frameOverride)==null||e.draw(this.renderer),this.renderer.render(),(a=this.textureHolder)==null||a.setNeedsUpdate(!0),this.isFrameDirty=!1)}updateEntity2DByOp(e,a,i,o){this.scene2d.updateEntityByOp(e,a,i,o),this.applySize()}updateTreeByOp(e,a){this.scene2d.updateTreeByOp(e,a),this.applySize()}applyOverrides(e){if(this.frameOverride&&this.frameRoot){this.frameOverride.position=[0,0],this.frameOverride.rotation=0;let a=(e==null?void 0:e.width)??this.width,i=(e==null?void 0:e.height)??this.height;this.frameOverride.width=a,this.frameOverride.height=i,this.frameOverride.localMatrix=tK,this.isScreenSpace&&(this.frameOverride.fill.color=St.from0to1([0,0,0,0])),this.frameOverride.data={...this.frameOverride.data,width:a,height:i},$3({objectOverride:this.frameOverride,objectRoot:this.frameRoot,newParentWidth:this.frameOverride.width,newParentHeight:this.frameOverride.height,initialParentWidth:this.frameRoot.width,initialParentHeight:this.frameRoot.height}),this.frameOverride.updateWorldMatrix(!0,!1,!0)}}applySize(e){var o,c;let a=(e==null?void 0:e.width)??this.width,i=(e==null?void 0:e.height)??this.height;this.width=a,this.height=i,this.renderer.dpr=this.isScreenSpace?window.devicePixelRatio:Math.floor(2048/Math.max(a,i)),this.renderer.setSize(a,i),(o=this.textureHolder)==null||o.dispose(),this.applyOverrides(e),(c=this.frameOverride)==null||c.requestRender()}applyFrame(e){var i,o,c;let a=this.context.scene.find2D(e);if(!(!a||!(a instanceof an)))return this.disposeFrameOverride(),this.frameRoot=a,this.frameOverride=a.clone({dpr:this.renderer.dpr,shared:this.context.shared}),this.scene2d.add(this.frameOverride),this.applySize(),(i=this.textureHolder)==null||i.dispose(),(o=this.frame)==null||o.addEventListener("render",this.onRenderRequestedDownstream),this.frameOverride.traverse(d=>{d.addEventListener("beginState",this.onFrameOverrideObjectEvent)}),this.frameOverride.traverse(d=>{d.addEventListener("completeState",this.onFrameOverrideObjectEvent)}),(c=this.frame)==null||c.requestRender(),a}get frame(){return this.frameOverride}get frameId(){var e;return(e=this.frame)==null?void 0:e.uuid}find(e){return this.scene2d.find(e)}get texture(){var e;return(e=this.textureHolder)==null?void 0:e.getTexture(1001)}disposeFrameOverride(){var e,a,i;(e=this.frameOverride)==null||e.removeEventListener("render",this.onRenderRequestedDownstream),(a=this.frameOverride)==null||a.traverse(o=>{o.removeEventListener("beginStateChange",this.onFrameOverrideObjectEvent)}),(i=this.frameOverride)==null||i.traverse(o=>{o.removeEventListener("completeState",this.onFrameOverrideObjectEvent)}),this.frameOverride&&this.scene2d.remove(this.frameOverride)}};function $3({objectOverride:e,objectRoot:a,newParentWidth:i,newParentHeight:o,initialParentWidth:c,initialParentHeight:d}){if(e instanceof an&&a instanceof an||e instanceof Ln&&a instanceof Ln)for(let g=0,b=e.children.length;g<b;g++){let j=e.children[g],$=a.children[g];j&&$&&j.uuid===$.uuid&&iK({objectOverride:j,objectRoot:$,newParentWidth:i,newParentHeight:o,initialParentWidth:c,initialParentHeight:d})}}function rK(e){if(K_(e))return[e.width,e.height];if(e instanceof qa){let[a,i]=e.getHalfSize();return[a*2,i*2]}else if(e instanceof Ln){let[a,i]=e.recursiveBBox.getHalfSize();return[a*2,i*2]}return[0,0]}function iK({objectOverride:e,objectRoot:a,newParentWidth:i,newParentHeight:o,initialParentWidth:c,initialParentHeight:d}){let[g,b]=rK(a),{width:j,height:$,position:rt}=Q_({constraints:e.data,newParentWidth:i,newParentHeight:o,initialParentWidth:c,initialParentHeight:d,objectInitialWidth:g,objectInitialHeight:b,objectInitialPosition:a.position});if(e.position=rt,e.data={...e.data,position:rt},e.states)for(let _e in e.states)nK({stateId:_e,objectOverride:e,objectRoot:a,newParentWidth:i,newParentHeight:o,initialParentWidth:c,initialParentHeight:d});if(K_(e)||e instanceof Ln)K_(e)&&(e.width=j,e.height=$,e.data={...e.data,width:j,height:$}),$3({objectOverride:e,objectRoot:a,newParentWidth:j,newParentHeight:$,initialParentWidth:g,initialParentHeight:b});else if(e instanceof qa){let _e=a,st=g!==0?j/g:1,ut=b!==0?$/b:1;e.path=K3(_e.path,st,ut),e.data={...e.data,path:e.path}}}function nK({stateId:e,objectOverride:a,objectRoot:i,newParentWidth:o,newParentHeight:c,initialParentWidth:d,initialParentHeight:g}){var $,rt;let b=($=a.states)==null?void 0:$[e],j=(rt=i.states)==null?void 0:rt[e];if(b&&j){let{width:_e,height:st,position:ut}=Q_({constraints:a.data,newParentWidth:o,newParentHeight:c,initialParentWidth:d,initialParentHeight:g,objectInitialWidth:Na.isResizeable(j)?j.width:0,objectInitialHeight:Na.isResizeable(j)?j.height:0,objectInitialPosition:j.position});Object.assign(a.states[e],{position:ut}),Na.isResizeable(b)&&Object.assign(a.states[e],{width:_e,height:st})}}function K_(e){return e instanceof Bs||e instanceof an||e instanceof tc||e instanceof rc}var mr=class extends Pd(Pi){constructor(e,a,i){super(),this.data=a,this.bgColor=new xr$1(1,1,1,1),this.fog=null,this.backupFog=new qu(16777215,.1,2e3),this.fogUseBGColor=!1,this.isActive=!1,this.aoColor=new We,this.penumbraSizeArrayCache=null,this.super_Entity(e,a),this.personalCamera=new wr$1(As,{...Vc.defaultData,...a.camera,name:"Personal Camera"}),this.personalCamera.objectHelper.visible=!1,this.add(this.personalCamera),this.activeCamera=this.personalCamera,this.ambientLight=new Iy(13882323,8553090,.75),this.ambientLight.name="Default Ambient Light",this.ambientLight.layers.enable(3),this.ambientLight.removeFromParent(),this.add(this.ambientLight),a.uiScene?this.uiScene=new lu((Array.isArray(e)?e[0]:e)+"-ui",a.uiScene,{dpr:window.devicePixelRatio,shared:i.shared}):a.uiFrame&&this.createUICanvas(a.uiFrame,i)}get scene(){return this.parent}get postprocessing(){return this.data.postprocessing}get frameId(){return this.data.uiFrame}get frame(){var e;return(e=this.uiCanvas)==null?void 0:e.frame}createUICanvas(e,a){this.uiCanvas=new Vf(this.uuid+"-uiscreen",window.innerWidth,window.innerHeight,a),this.uiCanvas.isScreenSpace=!0,this.uiCanvas.promise.then(()=>{var i,o;(i=this.uiCanvas)==null||i.applyFrame(e),(o=this.uiCanvas)==null||o.applySize()})}updateVisible(){}setBackgroundColor(e){this.bgColor=e,this.fogUseBGColor===!0&&(this.backupFog.color=e)}entityChildrenCount(){return this.uiScene?this.uiScene.children.length:super.entityChildrenCount()}updateAmbientLight(e,a){e.color!==void 0&&(this.ambientLight.color=on(e.color,a)),e.intensity!==void 0&&(this.ambientLight.intensity=e.intensity),e.enabled!==void 0&&(e.enabled?this.add(this.ambientLight):this.remove(this.ambientLight))}onDeactive(){this.isActive=!1}onActive(e){this.isActive=!0,e.fog=this.fog,this.traverseEntity(a=>{a instanceof qn&&a.recomputeBoolean()}),this.updateShadow(this.data.shadow)}forceMaterialsUpdate(){this.traverseEntity(e=>{if(e instanceof Ps)if(Array.isArray(e.material))for(let a of e.material)a.needsUpdate=!0;else e.material.needsUpdate=!0,e.material.dispose()})}updateShadow(e){e.softShadowQuality!==void 0&&this.isActive&&O3(e.softShadowQuality)&&this.forceMaterialsUpdate()}updateFog(e,a){if(e.enabled?this.fog=this.backupFog:this.fog=null,this.isActive){let i=this.scene;i.fog=this.fog}this.fogUseBGColor=e.useBackgroundColor,e.useBackgroundColor?this.backupFog.color.set(this.bgColor):this.backupFog.color=on(e.color,a),this.backupFog.near=e.near,this.backupFog.far=e.far}updateAo(e,a){e.aoColor!==void 0&&(this.aoColor=on(e.aoColor,a))}updateByOp(e,a,i,o){let c=this.data.uiFrame;super.updateByOp(e,a,i,o);let d=a;Rt(e.path,["fog"])?this.updateFog(d.fog,i.shared):Rt(e.path,["ao"])?this.updateAo(d.ao,i.shared):Rt(e.path,["ambient"])?this.updateAmbientLight(d.ambient,i.shared):Rt(e.path,["shadow"])?this.updateShadow(d.shadow):e.type===0&&e.path.length===0&&(e.props.uiFrame!==void 0||c!==d.uiFrame)&&this.updateUIFrame(e.props.uiFrame,i)}updateUIFrame(e,a){e?(this.uiCanvas||this.createUICanvas(e,a),this.uiCanvas.enabled=!0,this.uiCanvas.applyFrame(e)):this.uiCanvas&&(this.uiCanvas.enabled=!1)}updateState(e,a){this.updateState_Entity(e,a),e.backgroundColor!==void 0&&this.setBackgroundColor(on(e.backgroundColor,a.shared)),e.fog!==void 0&&this.updateFog(e.fog,a.shared),e.ambient!==void 0&&this.updateAmbientLight(e.ambient,a.shared),e.ao!==void 0&&this.updateAo(e.ao,a.shared),e.shadow!==void 0&&this.updateShadow(e.shadow)}createFrame(e,a){}raycast(e,a){super.raycast(e,a)}switchActiveCamera(e){e&&e.isDescendantOf(this)&&(this.activeCamera!==this.personalCamera&&(this.activeCamera.objectHelper.visible=!0),this.activeCamera=e,e.objectHelper.visible=!1)}get playCamera(){var e;return((e=this.scene)==null?void 0:e.find(this.data.publish.playCamera))??this.personalCamera}switchToPlayCamera(){this.switchActiveCamera(this.playCamera)}get penumbraSizeArray(){return this.penumbraSizeArrayCache===null&&this.updatePenumbraSizeArray(),this.penumbraSizeArrayCache}updatePenumbraSizeArray(){this.penumbraSizeArrayCache=new Array(5).fill(.5);let e=0,a=0;this.traverseEntity(i=>{if(!i.visible)return!0;i instanceof Nf&&i.visible&&e<3&&(this.penumbraSizeArrayCache[e]=i.data.penumbraSize,e+=1),i instanceof Ff&&i.visible&&e<2&&(this.penumbraSizeArrayCache[3+a]=i.data.penumbraSize,a+=1)})}raycastWithClones(e){let a=[],i=o=>{for(let c of o.children){let d=c.cloner;vt.is(c)&&(c.visible||d!=null&&d.object.data.visible)&&((mn(c)||Wm(c)&&this.scene.enableHelpers&&c.objectHelper.visible)&&(e.intersectObject(c,!1,a),eg(c,e,a,!0)),i(c))}};return i(this),a}updateEntity2DByOp(e,a,i,o){var c;(c=this.uiCanvas)==null||c.updateEntity2DByOp(e,a,i,o)}},Yx=class extends Sf(Ly,Bf){constructor(e,a,i){super(),this.super_Entity(e,a),this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let o=this.shadow.camera;o.fov=90,o.aspect=1,o.near=100,o.far=2500;let c=new _(-o.far+this.position.x,-o.far+this.position.y,-o.far+this.position.z),d=new _(o.far+this.position.x,o.far+this.position.y,o.far+this.position.z),g=new Wt(c,d),b=new vl(g,new We(16755200));b.visible=!1,this.gizmos.shadowmap=b,this.update()}update(){if(this.shadow&&(this.shadow.camera.updateProjectionMatrix(),this.gizmos))for(let e in this.gizmos){let a=this.gizmos[e];if(a instanceof vl){let i=this.shadow.camera,o=new _(-i.far+this.position.x,-i.far+this.position.y,-i.far+this.position.z),c=new _(i.far+this.position.x,i.far+this.position.y,i.far+this.position.z);a.box.set(o,c),a.updateMatrixWorld(!0)}}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.objectHelper&&this.objectHelper.update()}updateState(e,a){this.updateState_Light(e,a),e.distance!==void 0&&(this.distance=e.distance),e.decay!==void 0&&(this.decay=e.decay),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}},Xx=class extends ur{get forceComputeSize(){return!0}get shape(){return this.geometry.userData.shape}updateEntityBoxSize(e,a){let i=this.geometry.getAttribute("position");i!==void 0?Cm(i,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:i.count,e,a):super.updateEntityBoxSize(e,a)}},ic=class extends ur{constructor(e,a,i){super(e,a,i),this._shapeId=null,this._context=i}updateState(e,a){super.updateState(e,a),this.updateShape()}updateShape(){var o;let e={...this.data.geometry.extrusion.shape};for(let c in e)typeof e[c]=="string"&&(e[c]=this._context.shared.getVariable(e[c],[this.uuid,"geometry","extrusion","shape",c]));let a;if(e.type==="Custom"){let c=e.shapeId;if(c!==this._shapeId&&this.detachShape(),c){this._shapeId=c;let d=this._context.scene.find(c);d!=null&&d.data&&(d.attachedPaths.add(this),a=(o=d.geometry.userData)==null?void 0:o.shape),a||this._context.scene.addPendingCommand(()=>this.updateShape())}}else{let c;switch(e.type){case"Rectangle":c=zd;break;case"Ellipse":c=Fd;break;case"Polygon":c=G0;break;case"Star":c=j0;break;default:throw new Error(`Unknown shape type: ${e.type}`)}a=c.create({parameters:e}).userData.shape}let i=this.geometry;a&&i.inputs&&(i.inputs.shapeData=a,i.build(),this.attachedSurfaceCloners.forEach(c=>c.update()))}detachShape(){var e;this._shapeId!==null&&((e=this._context.scene.find(this._shapeId))==null||e.attachedPaths.delete(this))}createGeometryDelayed(e){this.geometryCreateDeleyed=e.shared,this.updateShape(),this.refreshAttachedPaths(e)}updateTransformState(e,a){return super.updateTransformState(e,a)}updateGeometryInteractions(e,a){super.updateGeometryInteractions(e,a),this.updateShape()}updateEntityBoxSize(e,a){let i=this.geometry.getAttribute("position");i!==void 0?Cm(i,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:i.count,e,a):super.updateEntityBoxSize(e,a)}},uo=class extends Is(ps,Rs){constructor(e,a,i){super(),a.type==="Instance"&&typeof e=="string"&&(a=this.transformAssignData(a,i)),this.super_Entity(e,a),this.objectHelper.update()}get isComponentRoot(){return this.data.type==="Component"&&typeof this.identity=="string"}get isInstanceRoot(){return this.data.type==="Instance"&&typeof this.identity=="string"}transformAssignData(e,a){let i=sd.getComponentData({scene:a.scene.data,shared:a.shared.data},e.component);if(i){let o,c;for(let d of No.rootOverrideProps)e[d]===void 0?(o===void 0&&(o={...e}),o[d]=i.data[d]):(c===void 0&&(c={}),c[d]=e[d],o===void 0&&(o={...e}),o[d]=Co.apply(i.data[d],e[d]));return this.overrideData=c,o}else return{...Li.defaultData,...e,...as(Li.defaultData,No.rootOverrideProps)}}updateByOp(e,a,i,o){let c;if(this.isInstanceRoot&&!o){if(a=this.transformAssignData(a,i),e.type===0&&e.path.length===0&&this.component)for(let d of No.rootOverrideProps)d in e.props&&e.props[d]===void 0&&(c===void 0&&(c={...e,props:{...e.props}}),c.props[d]=this.component.data[d]);else if(e.type===0&&e.path.length>0&&No.rootOverrideProps.includes(e.path[0])){let d=e.path[0];c===void 0&&(c={...e,path:[],props:{[d]:a[d]}})}}super.updateByOp(c??e,a,i,o)}updateState(e,a){this.updateState_Entity(e,a)}expandInstanceChildren(e){let a=this.data;if(this.component===void 0){let i=e.scene.find(a.component)??null,o=!1;if(i!==this.oldComponent){if(this.oldComponent){let c=0;for(let d of this.children)if(vt.is(d))e.scene.disposeAndUnregisterEntityRecursivelyIfNotReregistered(d),Qx(d),c+=1;else break;this.children.splice(0,c)}o=!0}if(i){let c={};tL(e,[this.uuid],a.overrides,this,i,i,0,o,c);for(let d of this.children)if(vt.is(d)){let g=d.data;g.type==="Empty"&&g.animations&&d.traverseEntity(b=>{if(b instanceof ur&&b.isSkinnedMesh){let j=b.dataPatched;if(j.bones&&j.boneInverses){let $=j.bones.map(st=>e.scene.find(c[st])),rt=j.boneInverses.map(st=>new ce$1().fromArray(st)),_e=new ul($,rt);b.bind(_e,b.bindMatrix)}}else b.matrixAutoUpdate=!0})}}this.oldComponent=this.component}}};function Qx(e){if(e.component){let a=e.component.instances.indexOf(e);a>=0&&e.component.instances.splice(a,1);for(let i of e.children)vt.is(i)&&Qx(i)}}function eL(e,a,i,o){return e.component===a&&Xp(e.identity,o)?e.overrideData===i?2:1:0}function tL(e,a,i,o,c,d,g,b,j){if(g>50)return!1;if(o.component!==c){if(o.component){let rt=o.component.instances.indexOf(o);rt>=0&&o.component.instances.splice(rt,1)}c.instances.push(o),o.component=c}c instanceof uo&&c.isInstanceRoot&&c.expandInstanceChildren(e);let $=0;for(let rt of c.children)if(vt.is(rt)){let _e=[...a,...typeof rt.identity=="string"?[rt.identity]:rt.identity],st=id.resolve(i,_e,1);st!=null&&!(st instanceof vr)&&(Object.setPrototypeOf(st,vr.prototype),console.error("wrong prototype"));let ut=null,gt;if(!b){let yt=o.children[$];if(ut=vt.is(yt)?yt:null,ut!==null){let Pt=eL(ut,rt,st,_e);gt=Pt>=1?ut.stateSelection:void 0,Pt!==2&&(ut=null)}if(ut===null&&(ut=e.scene.findInstance(_e)??null,ut!==null)){let Pt=eL(ut,rt,st,_e);if(gt=Pt>=1?ut.stateSelection:void 0,Pt!==2)ut=null;else{let wt=ut.parent.children.indexOf(ut);ut.parent.children.splice(wt,1),o.children.splice($,0,ut),ut.parent===o?wt<=$&&console.error("not possible"):(ut.parent=o,ut.matrixWorldNeedsUpdate=!0,ut.resetBBoxNeedsUpdate(),ut.updateVisible(),e.pendingDeletes.delete(ut))}}}if(ut===null){let yt=st?Co.apply(rt.data,st):rt.data;Ks.is(yt.type)&&(yt={...yt,type:"Empty"}),ut=eo.createEntity(_e,yt,e),ut.overrideData=st,o.add(ut),o.children.splice(o.children.length-1,1),o.children.splice($,0,ut),ut.updateState(ut.data,e),gt&&ut.changeSelectedState(gt,e),e.scene.registerInstanceAndSetUuid(ut)}if(ut.isBone){let yt=ut.identity[ut.identity.length-1];j[yt]=ut.uuid}$+=1,tL(e,a,i,ut,rt,d,g+1,b,j)}if(!b){let rt=$;for(;;){let _e=o.children[$];if(vt.is(_e))e.pendingDeletes.add(_e);else break;$+=1}o.children.splice(rt,$-rt)}return!0}var Kx=class extends Is(Cp,Rs){constructor(e,a){super(),this.super_Entity(e,a),this.objectHelper.update(),this.matrixAutoUpdate=!0}updateState(e,a){this.updateState_Entity(e,a)}},_r$1=class extends ur{constructor(a,i,o){super(a,i,o),this.onBeforeRender=()=>{this.uiCanvas.render()},this.uiCanvas=new Vf(a+"-canvas",i.geometry.width,i.geometry.height,o),this.uiCanvas.promise.then(()=>{this.applyFrame(this.dataPatched.geometry.frame,o.shared)})}updateByPatchedOpGeometry(a,i,o){super.updateByPatchedOpGeometry(a,i,o),a.type===0&&(a.props.frame!==void 0&&this.applyFrame(a.props.frame,o.shared),(a.props.width!==void 0||a.props.height!==void 0)&&this.applySize(a.props,o.shared))}applySize(a,i){let o=(a==null?void 0:a.width)??this.dataPatched.geometry.width,c=(a==null?void 0:a.height)??this.dataPatched.geometry.height;this.uiCanvas.applySize({width:o,height:c}),this.applyGeometryParametersFromFrame(i)}applyFrame(a,i){this.uiCanvas.applyFrame(a),this.applyGeometryParametersFromFrame(i),this.applyMaterialParametersFromFrame({shared:i})}applyGeometryParametersFromFrame(a){var o;let i=this.frame;i&&(Object.assign(this.data,{geometry:Object.assign(this.data.geometry,{cornerRadius:i.cornerRadius,cornerType:0})}),Object.assign(this.dataPatched,{geometry:Object.assign(this.dataPatched.geometry,{cornerRadius:i.cornerRadius,cornerType:0})}),(o=this.localGeometry)==null||o.dispose(),this.localGeometry=Va(this.dataPatched.geometry,a,this.data.flatShading,this))}applyMaterialParametersFromFrame(a){let i=this.frame;if(i){let o=i.data.backgroundBlur;Object.assign(this.data.material.layers[0].data.texture,{image:this.uiCanvas.uuid}),Object.assign(this.data.material.layers[1].data,{roughness:o.radius,alpha:o.enabled?1:0}),Object.assign(this.dataPatched.material.layers[0].data.texture,{image:this.uiCanvas.uuid}),Object.assign(this.dataPatched.material.layers[1].data,{roughness:o.radius,alpha:o.enabled?1:0}),this.material.reset(this.dataPatched.material,a,!0)}}updateEntity2DByOp(a,i,o,c){this.uiCanvas.updateEntity2DByOp(a,i,o,c),a===this.frameId&&i.type===0&&(i.props.cornerRadius!==void 0?this.applyGeometryParametersFromFrame(c):Rt(i.path,["backgroundBlur"])&&this.applyMaterialParametersFromFrame({shared:c}))}get frame(){return this.uiCanvas.frame}get frameId(){var a;return(a=this.frame)==null?void 0:a.uuid}removeInteractionGeometry(a){super.removeInteractionGeometry(a),this.applySize({},a)}updateGeometryInteractions(a,i){super.updateGeometryInteractions(a,i),this.applySize({width:a.width,height:a.height},i)}},Zx=class{constructor(e,a,i){this.variables=[],this.currentTextureIndex=0;let o=Sr$1,c=new Pi,d=new rs;d.position.z=1;let g={passThruTexture:{value:null}},b=rt(st(),g),j=new sr(new wn(2,2),b);c.add(j),this.setDataType=function(ut){return o=ut,this},this.addVariable=function(ut,gt,yt){let Pt=this.createShaderMaterial(gt),wt={name:ut,initialValueTexture:yt,material:Pt,dependencies:null,renderTargets:[],wrapS:null,wrapT:null,minFilter:Vt,magFilter:Vt};return this.variables.push(wt),wt},this.setVariableDependencies=function(ut,gt){ut.dependencies=gt},this.init=function(){if(i.capabilities.isWebGL2===!1&&i.extensions.has("OES_texture_float")===!1)return"No OES_texture_float support for float textures.";if(i.capabilities.maxVertexTextures===0)return"No support for vertex shader textures.";for(let ut=0;ut<this.variables.length;ut++){let gt=this.variables[ut];gt.renderTargets[0]=this.createRenderTarget(e,a,gt.wrapS,gt.wrapT,gt.minFilter,gt.magFilter),gt.renderTargets[1]=this.createRenderTarget(e,a,gt.wrapS,gt.wrapT,gt.minFilter,gt.magFilter),this.renderTexture(gt.initialValueTexture,gt.renderTargets[0]),this.renderTexture(gt.initialValueTexture,gt.renderTargets[1]);let yt=gt.material,Pt=yt.uniforms;if(gt.dependencies!==null)for(let wt=0;wt<gt.dependencies.length;wt++){let Ct=gt.dependencies[wt];if(Ct.name!==gt.name){let At=!1;for(let Tt=0;Tt<this.variables.length;Tt++)if(Ct.name===this.variables[Tt].name){At=!0;break}if(!At)return"Variable dependency not found. Variable="+gt.name+", dependency="+Ct.name}Pt[Ct.name]={value:null},yt.fragmentShader=`
uniform sampler2D `+Ct.name+`;
`+yt.fragmentShader}}return this.currentTextureIndex=0,null},this.compute=function(){let ut=this.currentTextureIndex,gt=this.currentTextureIndex===0?1:0;for(let yt=0,Pt=this.variables.length;yt<Pt;yt++){let wt=this.variables[yt];if(wt.dependencies!==null){let Ct=wt.material.uniforms;for(let At=0,Tt=wt.dependencies.length;At<Tt;At++){let kt=wt.dependencies[At];Ct[kt.name].value=kt.renderTargets[ut].texture}}this.doRenderTarget(wt.material,wt.renderTargets[gt])}this.currentTextureIndex=gt},this.getCurrentRenderTarget=function(ut){return ut.renderTargets[this.currentTextureIndex]},this.getAlternateRenderTarget=function(ut){return ut.renderTargets[this.currentTextureIndex===0?1:0]},this.dispose=function(){j.geometry.dispose(),j.material.dispose();let ut=this.variables;for(let gt=0;gt<ut.length;gt++){let yt=ut[gt];yt.initialValueTexture&&yt.initialValueTexture.dispose();let Pt=yt.renderTargets;for(let wt=0;wt<Pt.length;wt++)Pt[wt].dispose()}};function $(ut){ut.defines.resolution="vec2( "+e.toFixed(1)+", "+a.toFixed(1)+" )"}this.addResolutionDefine=$;function rt(ut,gt){gt=gt||{};let yt=new lt({uniforms:gt,vertexShader:_e(),fragmentShader:ut});return $(yt),yt}this.createShaderMaterial=rt,this.createRenderTarget=function(ut,gt,yt,Pt,wt,Ct){return ut=ut||e,gt=gt||a,yt=yt||Kt,Pt=Pt||Kt,wt=wt||Vt,Ct=Ct||Vt,new ft(ut,gt,{wrapS:yt,wrapT:Pt,minFilter:wt,magFilter:Ct,format:Qr,type:o,depthBuffer:!1})},this.createTexture=function(){let ut=new Float32Array(e*a*4),gt=new xi(ut,e,a,Qr,Sr$1);return gt.needsUpdate=!0,gt},this.renderTexture=function(ut,gt){g.passThruTexture.value=ut,this.doRenderTarget(b,gt),g.passThruTexture.value=null},this.doRenderTarget=function(ut,gt){let yt=i.getRenderTarget(),Pt=i.xr.enabled,wt=i.shadowMap.autoUpdate,Ct=i.outputEncoding,At=i.toneMapping;i.xr.enabled=!1,i.shadowMap.autoUpdate=!1,i.outputEncoding=Sn,i.toneMapping=Hs,j.material=ut,i.setRenderTarget(gt),i.render(c,d),j.material=b,i.xr.enabled=Pt,i.shadowMap.autoUpdate=wt,i.outputEncoding=Ct,i.toneMapping=At,i.setRenderTarget(yt)};function _e(){return`void main()	{

	gl_Position = vec4( position, 1.0 );

}
`}function st(){return`uniform sampler2D passThruTexture;

void main() {

	vec2 uv = gl_FragCoord.xy / resolution.xy;

	gl_FragColor = texture2D( passThruTexture, uv );

}
`}}},ln=new Dr$1,Jx=new _,$x=class{constructor(e){let a=e.geometry;if(!a.isBufferGeometry||a.attributes.position.itemSize!==3)throw new Error("THREE.MeshSurfaceSampler: Requires BufferGeometry triangle mesh.");a.index&&(console.warn("THREE.MeshSurfaceSampler: Converting geometry to non-indexed BufferGeometry."),a=a.toNonIndexed()),this.geometry=a,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.colorAttribute=this.geometry.getAttribute("color"),this.weightAttribute=null,this.distribution=null}setWeightAttribute(e){return this.weightAttribute=e?this.geometry.getAttribute(e):null,this}build(){let e=this.positionAttribute,a=this.weightAttribute,i=new Float32Array(e.count/3);for(let c=0;c<e.count;c+=3){let d=1;a&&(d=a.getX(c)+a.getX(c+1)+a.getX(c+2)),ln.a.fromBufferAttribute(e,c),ln.b.fromBufferAttribute(e,c+1),ln.c.fromBufferAttribute(e,c+2),d*=ln.getArea(),i[c/3]=d}this.distribution=new Float32Array(e.count/3);let o=0;for(let c=0;c<i.length;c++)o+=i[c],this.distribution[c]=o;return this}setRandomGenerator(e){return this.randomFunction=e,this}sample(e,a,i){let o=this.distribution[this.distribution.length-1],c=this.binarySearch(this.randomFunction()*o);return this.sampleFace(c,e,a,i)}binarySearch(e){let a=this.distribution,i=0,o=a.length-1,c=-1;for(;i<=o;){let d=Math.ceil((i+o)/2);if(d===0||a[d-1]<=e&&a[d]>e){c=d;break}else e<a[d]?o=d-1:i=d+1}return c}sampleFace(e,a,i,o){let c=this.randomFunction(),d=this.randomFunction();return c+d>1&&(c=1-c,d=1-d),ln.a.fromBufferAttribute(this.positionAttribute,e*3),ln.b.fromBufferAttribute(this.positionAttribute,e*3+1),ln.c.fromBufferAttribute(this.positionAttribute,e*3+2),a.set(0,0,0).addScaledVector(ln.a,c).addScaledVector(ln.b,d).addScaledVector(ln.c,1-(c+d)),i!==void 0&&ln.getNormal(i),o!==void 0&&this.colorAttribute!==void 0&&(ln.a.fromBufferAttribute(this.colorAttribute,e*3),ln.b.fromBufferAttribute(this.colorAttribute,e*3+1),ln.c.fromBufferAttribute(this.colorAttribute,e*3+2),Jx.set(0,0,0).addScaledVector(ln.a,c).addScaledVector(ln.b,d).addScaledVector(ln.c,1-(c+d)),o.r=Jx.x,o.g=Jx.y,o.b=Jx.z),this}};function rL(e){let a=new Float32Array(e*e*2);for(let i=0;i<e;i++)for(let o=0;o<e;o++){let c=i*e+o;a[c*2+0]=i/(e-1),a[c*2+1]=o/(e-1)}return a}function iL(e){let a=Math.ceil(Math.sqrt(e));return Math.max(a,1)}function nL(e,a){let i=new sr(e.geometry,e.material),o=[],c=[],d=new _,g=new _;i.geometry.index!==null&&(i.geometry=i.geometry.toNonIndexed());let b=new $x(i).build();for(let rt=0;rt<a;rt++)b.sample(d,g),o.push(d.x,d.y,d.z),c.push(g.x,g.y,g.z);let j=new Float32Array(o),$=new Float32Array(c);return{positions:j,normals:$}}function Z_(e,a){let i=e,o=new Float32Array(4*a*a);for(let d=0;d<a*a;d++)o[4*d]=i[3*d],o[4*d+1]=i[3*d+1],o[4*d+2]=i[3*d+2],o[4*d+3]=0;let c=new xi(o,a,a,Qr,Sr$1);return c.needsUpdate=!0,c}function sL({size:e}){let a=new Float32Array(4*e*e);for(let o=0;o<e*e;o++)a[4*o]=o,a[4*o+1]=0,a[4*o+2]=0,a[4*o+3]=0;let i=new xi(a,e,e,Qr,Sr$1);return i.needsUpdate=!0,i}function oL(e){let a=new Float32Array(4*e*e);for(let o=0;o<e*e;o++)a[4*o]=0,a[4*o+1]=0,a[4*o+2]=0,a[4*o+3]=0;let i=new xi(a,e,e,Qr,Sr$1);return i.needsUpdate=!0,i}var aL=`
// uniform sampler2D uCurrentPosition; // Pass in the variable from GPGPU
// uniform sampler2D uCurrentVelocity; // Pass in the variable from GPGPU
// uniform sampler2D uCurrentEmissionRate; // Pass in the variable from GPGPU
uniform sampler2D uOriginalPosition;
uniform float uTime;
uniform float uSpeed;     // update speed of the particles
uniform vec3 uWorldOffset;    
uniform vec4 uWorldQuaternion;
uniform float uMaxLifeTime;
uniform vec3 uEmitterSize;
uniform float uFPSRatio;     // 1  for 60 FPS

float random (vec2 st) {
    return fract(sin(dot(st.xy,
        vec2(12.9898,78.233)))*
        43758.5453123);
}
vec3 applyQuaternionToVector( vec4 q, vec3 v ){
    return v + 2.0 * cross( q.xyz, cross( q.xyz, v ) + q.w * v );
}

vec3 applyForce(vec3 force, float mass) {
    vec3 acceleration = force / mass;
    
    return acceleration;
  }
  

void main() {
    vec2 vUv = gl_FragCoord.xy / resolution.xy;
    vec3 position = texture2D( uCurrentPosition, vUv ).xyz;
    float currentLife = texture2D( uCurrentPosition, vUv ).w;   // from 1 to 0
    float isSpawning = texture2D( uCurrentEmissionRate, vUv ).r;        // 1. = spawning, 0. = not spawning
    float isActive = texture2D( uCurrentEmissionRate, vUv ).g;          // 1. = active, 0. = not active
    float timeStart = texture2D( uCurrentEmissionRate, vUv ).b;         // timeStart in seconds when the particle was emitted
    vec3 originalPosition = ((texture2D( uOriginalPosition, vUv ).xyz) * uEmitterSize);
    vec3 velocity = texture2D( uCurrentVelocity, vUv ).xyz;
    float collisionFlag = texture2D( uCurrentVelocity, vUv ).w;             // 1. = collided, 0. = not collided
    float lifeTime = uMaxLifeTime;

    // Calculate the position adjustment based on collision
    //     if (collisionFlag > .5) {  
    float isColliding = step(0.5, collisionFlag); // 1.0 if collisionFlag > 0.5, otherwise 0.0
    float bounceOffset = 3.0 * isColliding; // Becomes 3.0 if colliding, 0.0 otherwise
    vec3 collisionAdjustedVelocity = velocity * (1.0 + bounceOffset);

    // Update position based on collision or normal movement
    vec3 fpsVelocity = velocity * min(uFPSRatio, 5.0);
    position += mix(fpsVelocity, collisionAdjustedVelocity, isColliding);

    // EMISSION RATE - BIRTH
    // if (isSpawning == 1.0) {
    // Better Approach to avoid If statement
    vec3 newPosition = applyQuaternionToVector(uWorldQuaternion, originalPosition) + uWorldOffset;
    originalPosition = mix(originalPosition, newPosition, isSpawning);
    position = mix(position, originalPosition, isSpawning);;
    timeStart = mix(timeStart, uTime, isSpawning);

    // Calculate timeLeft for life normalization
    float timeLeft = max(lifeTime - (uTime - timeStart), 0.0);
    float life_Normalize = timeLeft / lifeTime;

    // Use isActive to blend between the calculated color and black
    vec4 activeColor = vec4(position, life_Normalize);
    // if (isActive == 1.0) {
    gl_FragColor = mix(vec4(0.0), activeColor, isActive);

}
`,lL=`

    vec3 mod289(vec3 x) {
      return x - floor(x * (1.0 / 289.0)) * 289.0;
    }
    
    vec4 mod289(vec4 x) {
    return x - floor(x * (1.0 / 289.0)) * 289.0;
    }
    
    vec4 permute(vec4 x) {
        return mod289(((x*34.0)+1.0)*x);
    }
    
    vec4 taylorInvSqrt(vec4 r)
    {
    return 1.79284291400159 - 0.85373472095314 * r;
    }
    
    vec3 fade(vec3 t) {
  return t*t*t*(t*(t*6.0-15.0)+10.0);
}

    float snoise(vec3 v)
    {
    const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;
    const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);
    vec3 i  = floor(v + dot(v, C.yyy) );
    vec3 x0 =   v - i + dot(i, C.xxx) ;
    vec3 g = step(x0.yzx, x0.xyz);
    vec3 l = 1.0 - g;
    vec3 i1 = min( g.xyz, l.zxy );
    vec3 i2 = max( g.xyz, l.zxy );
    vec3 x1 = x0 - i1 + C.xxx;
    vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y
    vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y
    
    // Permutations
    i = mod289(i);
    vec4 p = permute( permute( permute(
                i.z + vec4(0.0, i1.z, i2.z, 1.0 ))
              + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))
              + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));
    
    // Gradients: 7x7 points over a square, mapped onto an octahedron.
    // The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)
    float n_ = 0.142857142857; // 1.0/7.0
    vec3  ns = n_ * D.wyz - D.xzx;
    
    vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)
    
    vec4 x_ = floor(j * ns.z);
    vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)
    
    vec4 x = x_ *ns.x + ns.yyyy;
    vec4 y = y_ *ns.x + ns.yyyy;
    vec4 h = 1.0 - abs(x) - abs(y);
    
    vec4 b0 = vec4( x.xy, y.xy );
    vec4 b1 = vec4( x.zw, y.zw );
    
    vec4 s0 = floor(b0)*2.0 + 1.0;
    vec4 s1 = floor(b1)*2.0 + 1.0;
    vec4 sh = -step(h, vec4(0.0));
    
    vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;
    vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;
    
    vec3 p0 = vec3(a0.xy,h.x);
    vec3 p1 = vec3(a0.zw,h.y);
    vec3 p2 = vec3(a1.xy,h.z);
    vec3 p3 = vec3(a1.zw,h.w);
    
    //Normalise gradients
    vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
    p0 *= norm.x;
    p1 *= norm.y;
    p2 *= norm.z;
    p3 *= norm.w;
    
    // Mix final noise value
    vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
    m = m * m;
    return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),
                                  dot(p2,x2), dot(p3,x3) ) );
    }
    
    vec3 snoiseVec3( vec3 x ){
    
      float s  = snoise(vec3( x ));
      float s1 = snoise(vec3( x.y - 19.1 , x.z + 33.4 , x.x + 47.2 ));
      float s2 = snoise(vec3( x.z + 74.2 , x.x - 124.5 , x.y + 99.4 ));
      vec3 c = vec3( s , s1 , s2 );
      return c;
    
    }
    
      
    vec3 curlNoise( vec3 p, float seed){
      p += seed;
      const float e = .1;
      vec3 dx = vec3( e   , 0.0 , 0.0 );
      vec3 dy = vec3( 0.0 , e   , 0.0 );
      vec3 dz = vec3( 0.0 , 0.0 , e   );
    
      vec3 p_x0 = snoiseVec3( p - dx );
      vec3 p_x1 = snoiseVec3( p + dx );
      vec3 p_y0 = snoiseVec3( p - dy );
      vec3 p_y1 = snoiseVec3( p + dy );
      vec3 p_z0 = snoiseVec3( p - dz );
      vec3 p_z1 = snoiseVec3( p + dz );
    
      float x = p_y1.z - p_y0.z - p_z1.y + p_z0.y;
      float y = p_z1.x - p_z0.x - p_x1.z + p_x0.z;
      float z = p_x1.y - p_x0.y - p_y1.x + p_y0.x;
    
      const float divisor = 1.0 / ( 2.0 * e );
      return normalize( vec3( x , y , z ) * divisor );
    
    }


// Classic Perlin noise
float cnoise(vec3 P)
{
  vec3 Pi0 = floor(P); // Integer part for indexing
  vec3 Pi1 = Pi0 + vec3(1.0); // Integer part + 1
  Pi0 = mod289(Pi0);
  Pi1 = mod289(Pi1);
  vec3 Pf0 = fract(P); // Fractional part for interpolation
  vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0
  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
  vec4 iy = vec4(Pi0.yy, Pi1.yy);
  vec4 iz0 = Pi0.zzzz;
  vec4 iz1 = Pi1.zzzz;

  vec4 ixy = permute(permute(ix) + iy);
  vec4 ixy0 = permute(ixy + iz0);
  vec4 ixy1 = permute(ixy + iz1);

  vec4 gx0 = ixy0 * (1.0 / 7.0);
  vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;
  gx0 = fract(gx0);
  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
  vec4 sz0 = step(gz0, vec4(0.0));
  gx0 -= sz0 * (step(0.0, gx0) - 0.5);
  gy0 -= sz0 * (step(0.0, gy0) - 0.5);

  vec4 gx1 = ixy1 * (1.0 / 7.0);
  vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;
  gx1 = fract(gx1);
  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
  vec4 sz1 = step(gz1, vec4(0.0));
  gx1 -= sz1 * (step(0.0, gx1) - 0.5);
  gy1 -= sz1 * (step(0.0, gy1) - 0.5);

  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);
  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);
  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);
  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);
  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);
  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);
  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);
  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);

  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
  g000 *= norm0.x;
  g010 *= norm0.y;
  g100 *= norm0.z;
  g110 *= norm0.w;
  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
  g001 *= norm1.x;
  g011 *= norm1.y;
  g101 *= norm1.z;
  g111 *= norm1.w;

  float n000 = dot(g000, Pf0);
  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
  float n111 = dot(g111, Pf1);

  vec3 fade_xyz = fade(Pf0);
  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); 
  return 2.2 * n_xyz;
}


vec3 fbm_vec3(vec3 p, float frequency, float offset)
{
  return vec3(
    cnoise((p+vec3(offset))*frequency),
    cnoise((p+vec3(offset+20.0))*frequency),
    cnoise((p+vec3(offset-30.0))*frequency)
  );
}

`,cL=`
  #ifdef USE_COLLIDER
    float restitution = max(uBounce * 2., .01); // Energy Loss
    // SPHERE COLLIDER
    // **************************************************************
    #ifdef USE_SPHERE_COLLIDER       
      // Convert collider size to radii (assuming uColliderSize is the diameter in each axis)
      vec3 radii = uColliderSize;
      // Adjust position relative to collider
      vec3 relPos = position - uColliderPos;
      // Apply rotation of the collider to the relative position
      relPos = applyQuaternionToVector(uColliderQuaternionInvert, relPos);            
      // Scale relative position by radii (for ellipsoid collision detection)
      vec3 scaledPos = relPos / radii;
      // Calculate ellipsoidal distance
      float dist = length(scaledPos); // Distance in terms of ellipsoid
      
      // Check for collision
      if (dist <= 1. + particleSize / length(radii) && collisionFlag == 0.0) {
          // Compute the normal at the collision point, accounting for particle size
        vec3 adjustedPos = scaledPos * (1.0 + particleSize / length(radii));          
        // Compute the normal at the collision point
        vec3 normal = ellipsoidNormal(adjustedPos, radii);
        // Rotate the normal back to world space
        normal = applyQuaternionToVector(uColliderQuaternion, normal);
        // Reflect the velocity vector off the normal
        velocity = reflect(velocity, normal) * restitution;

        collisionFlag = 1.0;
      } else {
        collisionFlag = 0.0;
      }
    #endif

    // BOX COLLIDER or PLANE COLLIDER 
    // **************************************************************
    #ifdef USE_BOX_COLLIDER
      // Box dimensions and repulsion variables
      vec3 boxHalfSize = uColliderSize / 2.0;
      // Convert world position to box's local space
      vec3 localPos = applyQuaternionToVector(uColliderQuaternionInvert, position - uColliderPos);      
      // Collision detection
      vec3 localDistance = abs(localPos) - boxHalfSize;
      float distToSurface = max(localDistance.x, max(localDistance.y, localDistance.z));    

      // Collision Detected
      if (distToSurface <= particleSize * 0.5 && collisionFlag == 0.0) {      
        // Find the nearest face normal for bounce direction
        vec3 normal;
        if (localDistance.x > localDistance.y && localDistance.x > localDistance.z) {
            normal = vec3(sign(localPos.x), 0.0, 0.0);
        } else if (localDistance.y > localDistance.z) {
            normal = vec3(0.0, sign(localPos.y), 0.0);
        } else {
            normal = vec3(0.0, 0.0, sign(localPos.z));
        }            
        // Rotate normal back to world space
        normal = applyQuaternionToVector(uColliderQuaternion, normal);      
        // Reflect velocity and apply repulsion force
        velocity = reflect(velocity, normal) * restitution;
        
        collisionFlag = 1.0;
      } else {
        collisionFlag = 0.0;
      }
    #endif      
  #endif      
  // END COLLIDER    
`,uL=`
  #ifdef USE_ATTRACTOR

      #ifdef USE_SPHERE_COLLIDER      
        // Convert collider size to radii (assuming uColliderSize is the diameter in each axis)
        vec3 radii = uColliderSize;
        // Adjust position relative to collider
        vec3 relPos = position - uColliderPos;
        // Apply rotation of the collider to the relative position
        relPos = applyQuaternionToVector(uColliderQuaternionInvert, relPos);            
        // Scale relative position by radii (for ellipsoid collision detection)
        vec3 scaledPos = relPos / radii;
        // Calculate ellipsoidal distance
        float distToSurface = length(scaledPos); // Distance in terms of ellipsoid
        float insideCheck = 1.0;

      #endif


      #ifdef USE_BOX_COLLIDER
        // Box dimensions
        vec3 boxHalfSize = uColliderSize / 2.0;
        // Convert world position to box's local space
        vec3 localPos = applyQuaternionToVector(uColliderQuaternionInvert, position - uColliderPos);      
        vec3 localDistance = abs(localPos) - boxHalfSize;
        float distToSurface = max(localDistance.x, max(localDistance.y, localDistance.z));
        float insideCheck = particleSize;
      #endif      
  
      // Apply vortex force inside the Helper
      #ifdef USE_FORCE_LOCAL_SPACE
        if (distToSurface <= insideCheck ) {    
            // Define parameters for the attractor field
            #ifdef USE_SPHERE_COLLIDER      
              float attractorStrength = (1.0 - distToSurface ) * uForceIntensity; // Adjust as needed
            #endif

            #ifdef USE_BOX_COLLIDER
              float attractorStrength = max((1.0 - insideCheck / distToSurface), 0.) * uForceIntensity; // Adjust as needed
              #endif

            float attractorDamping = uForceDamping;  // Adjust as needed (higher values will attenuate velocity more)
          
            // Use the same radii calculation code as for the collider
            vec3 attractorRadii = uColliderSize;
            // Adjust position relative to attractor center
            vec3 relPos = position - uColliderPos;
            // Apply rotation of the collider to the relative position
            relPos = applyQuaternionToVector(uColliderQuaternionInvert, relPos);            
            // Scale relative position by radii (for ellipsoid attraction)
            vec3 scaledPos = relPos / attractorRadii;

            // Calculate ellipsoidal distance as attractor radius
            float attractorRadius = length(scaledPos);
            // Calculate the distance from the attractor center
            vec3 relativePosition = position - uColliderPos;
            // Calculate the force vector towards the attractor center
            vec3 attractorForce = normalize(relativePosition) * attractorStrength;
            // Apply the attractor force to the particle
            velocity -= attractorForce;
            // Attenuate the particle's velocity
            velocity *= attractorDamping;
        }
      #else 
            // Calculate the distance from the attractor center
            vec3 relativePosition = position - uColliderPos;
            // Calculate the force vector towards the attractor center
            vec3 attractorForce = normalize(relativePosition) * uForceIntensity;
            // Apply the attractor force to the particle
            velocity -= attractorForce;
            // Attenuate the particle's velocity
            velocity *= uForceDamping;
      #endif    
  #endif      
`,hL=`
  #ifdef USE_VORTEX
    // Box dimensions
    vec3 boxHalfSize = uColliderSize / 2.0;
    // Convert world position to box's local space
    vec3 localPos = applyQuaternionToVector(uColliderQuaternionInvert, position - uColliderPos);      
    vec3 localDistance = abs(localPos) - boxHalfSize;
    float distToSurface = max(localDistance.x, max(localDistance.y, localDistance.z));

    // Apply vortex force inside the box
    if (distToSurface <= particleSize) {
      float vortexStrength = uForceIntensity;
      vec3 localTopCenter = vec3(0.0, 0., 0.0);

      // Transform the local top center to the world space
      vec3 vortexCenter = uColliderPos + applyQuaternionToVector(uColliderQuaternion, localTopCenter);
      // Calculate the vector from particle to vortex center
      vec3 vortexVector = vortexCenter - position;

      // Calculate the rotation axis from the inverse of the collider's quaternion and the fixed up vector
      // Note: important to add a tiny z component to the up vector to avoid instability
      vec3 upVector = vec3(0.0, 1.0, 0.01);
      vec3 rotationAxis = cross(upVector, applyQuaternionToVector(uColliderQuaternion, vortexVector));
      rotationAxis = normalize(rotationAxis);

      // Add rotational component to velocity
      float rotationSpeed = length(vortexVector * vortexStrength * 3.0) ; 

      vec3 rotationVelocity = rotationAxis * rotationSpeed;
      // velocity += rotationVelocity * 0.005 ;
      velocity = rotationVelocity * 0.005 ;

      // Calculate vortex force
      // vec3 vortexForce = normalize(vortexVector) * uSpeed * .1 ;
      // Apply the vortex force to the particle
      vec3 originDirection = applyQuaternionToVector(uWorldQuaternion, directions);
      velocity += applyForce( originDirection * uSpeed * (1. - uForceDamping) , mass * .5);
    }
  #endif      
`,dL=`
// uniform sampler2D uCurrentPosition; // Pass in the variable from GPGPU
// uniform sampler2D uCurrentVelocity; // Pass in the variable from GPGPU
// uniform sampler2D uCurrentEmissionRate; // Pass in the variable from GPGPU
uniform sampler2D uOriginalPosition;
uniform sampler2D uDirections;     
uniform vec3 uDirectionsAxis;
uniform vec4 uWorldQuaternion;
uniform vec3 uGravity;        
uniform float uNoiseStrength;     // Variation of the noise
uniform float uNoiseScale;        // Scale of the noise
uniform float uNoiseSeed;         // Seed of the noise
uniform float particleSize;
uniform float uSpeed;     // update speed of the particles
uniform float uRandomMassFactor;

// COLLIDER
uniform vec3 uColliderPos;                // Collider Position
uniform vec3 uColliderSize;               // Collider Dimension
uniform vec4 uColliderQuaternion;         // Collider Rotation
uniform vec4 uColliderQuaternionInvert;   // Collider Rotation
uniform float uBounce;                    // Bounce factor
uniform float uForceDamping;
uniform float uForceIntensity;


`+lL+`
float rand(vec2 co){
    return fract(sin(dot(co, vec2(12.9898, 78.233))) * 43758.5453);
}
vec3 applyQuaternionToVector( vec4 q, vec3 v ){
    return v + 2.0 * cross( q.xyz, cross( q.xyz, v ) + q.w * v );
 } 
vec3 applyForce(vec3 force, float mass) {
  vec3 acceleration = force / mass;
  
  return acceleration;
}

vec4 conjugate(vec4 q) {
  return vec4(q.w, -q.x, -q.y, -q.z);
}

// Function to compute the normal of the ellipsoid at a given point
vec3 ellipsoidNormal(vec3 p, vec3 radii) {
  return normalize(p / (radii * radii));
}

float friction = .3;

void main() {
    vec2 vUv = gl_FragCoord.xy / resolution.xy;
    vec3 position = texture2D( uCurrentPosition, vUv ).xyz;
    vec3 originalPosition = texture2D( uOriginalPosition, vUv ).xyz;
    float timeLeft = texture2D( uCurrentPosition, vUv ).w;
    vec3 directions = texture2D( uDirections, vUv ).xyz;    
    vec3 velocity = texture2D( uCurrentVelocity, vUv ).xyz;
    float mass = rand(originalPosition.xy) * 0.5 + 0.5;
    float isSpawning = texture2D( uCurrentEmissionRate, vUv ).x;        // 1. = spawning, 0. = not spawning
    float isActive = texture2D( uCurrentEmissionRate, vUv ).y;          // 1. = active, 0. = not active
    float collisionFlag =texture2D( uCurrentVelocity, vUv ).w;          // Indicate collision

    // Randomness Mass
    mass = (1.0 - (uRandomMassFactor * mass));
    
    if (isActive == 1.0) {
      // **************************************************************
      // FORCES NOISES
      // **************************************************************
      #ifdef USE_CURL_NOISE
        if (uNoiseScale > 0.0 ) {
          velocity = curlNoise(position * uNoiseScale * .002, uNoiseSeed) * ( uNoiseStrength + 1.0) * .05 * uSpeed;
        }
        // Variation of the noise Over Time
        if (uNoiseStrength > 0.0 && uNoiseScale == 0.0 ) {
          velocity += curlNoise( position, uNoiseSeed)  * uNoiseStrength * 0.05 * uSpeed;
        }
      #endif
      // **************************************************************
      #ifdef USE_SIMPLEX_NOISE
        if (uNoiseScale > 0.0 ) {
          velocity = vec3(snoise(position * uNoiseScale * .001) * ( uNoiseStrength + 1.0) * .1);
          velocity *= uSpeed;
        }
        // Variation of the noise Over Time
        if (uNoiseStrength > 0.0 && uNoiseScale == 0.0) {
          velocity += vec3(snoise(position * uNoiseStrength * .001) * .05 * uSpeed);
        }
      #endif
      // ************************************************************** 
      #ifdef USE_FBM_NOISE
        if (uNoiseScale > 0.0 ) {
          float offset = 0.0;
          velocity = fbm_vec3(position * uNoiseScale * .001, ( uNoiseStrength + 1.0), offset);
          velocity *= uSpeed;
        }
        // Variation of the noise Over Time
        if (uNoiseStrength > 0.0 && uNoiseScale == 0.0 ) {      
          float offset = 0.0;
          velocity += fbm_vec3(position * uNoiseStrength * .001, ( uNoiseStrength + 1.0), uNoiseSeed) * .1 * uSpeed;
        }
      #endif

      // COLLIDER
      ${cL}
      // ATTRACTION
      ${uL}  
      // VORTEX
      ${hL}
    } 
    // End isActive

    // SPAWN BIRTH 
    // **************************************************************
    // if (isSpawning == 1.)
    #ifdef USE_NORMALS
      velocity = mix(velocity, applyQuaternionToVector(uWorldQuaternion, directions) * uSpeed, isSpawning);
    #else
      velocity = mix(velocity, applyQuaternionToVector(uWorldQuaternion, uDirectionsAxis) * uSpeed, isSpawning);    
    #endif
    
    // if (collisionFlag == 0.0)
    velocity += applyForce(uGravity, mass * .5) * (1.0 - collisionFlag);

    gl_FragColor = vec4(velocity, collisionFlag);
}
`,J_=`

  // Linear Fade In
  float linearFadeIn(float t) {
    return t;
  }


  // linear fade out
  float linearFadeOut(float t) {
    return 1.0 - t;
  }
  
  float linearInOut(float t) {
    return t < 0.5 ? t :  (1.0 - t);  
  }

    // lerp
    float lerp(float a, float b, float t) {
      return a + (b - a) * t;
    }

  // Ease In Out Quart
  float exponentialInOut(float t) {
    return t < 0.4 ? lerp(0.0, 1.0, t / 0.4) :
    t > 0.6 ? lerp(1.0, 0.0, (t - 0.6) / 0.4) :
    1.0;
   }

  // constant
  float constant(float t) {
    return 1.0;
  } 
`,fL=`

float rand(vec3 co){
  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);
}

vec3 applyQuaternionToVector( vec4 q, vec3 v ){
  return v + 2.0 * cross( q.xyz, cross( q.xyz, v ) + q.w * v );
}

vec3 applyForce(vec3 force, float mass) {
  vec3 acceleration = force / mass;
    
  return acceleration;
}
`,pL=`
vec3 rgb2xyz (in vec3 rgb) {
    float r = rgb.r;
	float g = rgb.g;
	float b = rgb.b;

	r = r > 0.04045 ? pow(((r + 0.055) / 1.055), 2.4) : (r / 12.92);
	g = g > 0.04045 ? pow(((g + 0.055) / 1.055), 2.4) : (g / 12.92);
	b = b > 0.04045 ? pow(((b + 0.055) / 1.055), 2.4) : (b / 12.92);

	float x = (r * 0.4124) + (g * 0.3576) + (b * 0.1805);
	float y = (r * 0.2126) + (g * 0.7152) + (b * 0.0722);
	float z = (r * 0.0193) + (g * 0.1192) + (b * 0.9505);
    
    vec3 xyz = vec3(
        (r * 0.4124) + (g * 0.3576) + (b * 0.1805) * 100.0,
        (r * 0.2126) + (g * 0.7152) + (b * 0.0722) * 100.0,
        (r * 0.0193) + (g * 0.1192) + (b * 0.9505) * 100.0
    );
    return(xyz);
}

vec3 xyz2lab (in vec3 xyz) {
	float x = xyz.x / 95.047;
	float y = xyz.y / 100.0;
	float z = xyz.z / 108.883;

	x = x > 0.008856 ? pow(x, 1.0 / 3.0) : (7.787 * x) + (16.0 / 116.0);
	y = y > 0.008856 ? pow(y, 1.0 / 3.0) : (7.787 * y) + (16.0 / 116.0);
	z = z > 0.008856 ? pow(z, 1.0 / 3.0) : (7.787 * z) + (16.0 / 116.0);

    vec3 lab = vec3((116.0 * y) - 16.0, 500.0 * (x - y), 200.0 * (y - z));
    return(lab);
}

vec3 rgb2lab(in vec3 rgb) {
    vec3 xyz = rgb2xyz(rgb);
    vec3 lab = xyz2lab(xyz);
    return(lab);
}

vec3 xyz2rgb (in vec3 xyz) {
	float x = xyz.x / 100.0;
	float y = xyz.y / 100.0;
	float z = xyz.z / 100.0;
	
    
	float r = (x *  3.2406) + (y * -1.5372) + (z * -0.4986);
	float g = (x * -0.9689) + (y *  1.8758) + (z *  0.0415);
	float b = (x *  0.0557) + (y * -0.2040) + (z *  1.0570);

	r = r > 0.0031308 ? ((1.055 * pow(r, 1.0 / 2.4)) - 0.055) : r * 12.92;
	g = g > 0.0031308 ? ((1.055 * pow(g, 1.0 / 2.4)) - 0.055) : g * 12.92;
	b = b > 0.0031308 ? ((1.055 * pow(b, 1.0 / 2.4)) - 0.055) : b * 12.92;

	r = min(max(0.0, r), 1.0);
	g = min(max(0.0, g), 1.0);
	b = min(max(0.0, b), 1.0);

	return(vec3(r, g, b));
}

vec3 lab2xyz (in vec3 lab) {
    float l = lab.x;
	float a = lab.y;
	float b = lab.z;

  	float y = (l + 16.0) / 116.0;
	float x = a / 500.0 + y;
	float z = y - b / 200.0;

	float y2 = pow(y, 3.0);
	float x2 = pow(x, 3.0);
	float z2 = pow(z, 3.0);

  	y = y2 > 0.008856 ? y2 : (y - 16.0 / 116.0) / 7.787;
	x = x2 > 0.008856 ? x2 : (x - 16.0 / 116.0) / 7.787;
	z = z2 > 0.008856 ? z2 : (z - 16.0 / 116.0) / 7.787;

	x *= 95.047;
	y *= 100.0;
	z *= 108.883;

	return(vec3(x, y, z));
}
vec3 lab2rgb (in vec3 lab) {
    vec3 xyz = lab2xyz(lab);
    vec3 rgb = xyz2rgb(xyz);
    return(rgb);
}

`,mL=`
  uniform sampler2D uPosition;
  uniform float uSize;
  uniform float uSizeEnd;
  uniform vec3 uWorldOffset;
  uniform vec4 uWorldQuaternion;
  // Billboard Behavior - Currently at Zero, but we can change that
  uniform float uRotation;
  uniform float uRotationEnd;
  uniform vec2 center;

  // Randomness
  uniform float uRandScaleFactor;
  uniform float uRandRotationFactor;

  attribute vec2 ref;

  varying float v_LifeLeft;    // normalized lifetime 1 to 0
  varying vec2 vUv;
  varying vec2 vRef;

  ${fL}
  ${J_}
`,gL=({easeSize:e="linearFadeOut"})=>`
  vUv = uv;  
  vRef = ref;
  // Normalized LifeTime 1 to 0
  float lifeLeft = texture2D(uPosition, ref).w;
  v_LifeLeft = lifeLeft;
  // Position From DataTexture Simulation
  vec3 pos = texture2D(uPosition, ref).rgb - uWorldOffset;
  // Apply World Quaternion
  pos = applyQuaternionToVector(uWorldQuaternion, pos);  
            
  #ifdef  USE_SIZE_END
    // Scaled Over Time
    float t = 1. - lifeLeft;
    float currentSize = mix(uSize, uSizeEnd, t); // Linearly interpolate between uSize and uSizeEnd
    vec3 scaledPosition = position * vec3(currentSize);
  #else
    // Change Size Behavior over LifeTime
    float easeSize = ${e}(1. - lifeLeft);
    // Scaled Over Time
    vec3 scaledPosition = position * vec3(uSize * easeSize);
  #endif

  // Billboard Behavior
  vec2 scale;
  scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
  scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );    
  // Randomness 
  float randRef = rand(ref);
  scale *= (1.0 - (uRandScaleFactor * randRef));
  // Rotation
  float randRotation =  2.0 * PI * ( uRandRotationFactor * randRef);
  float originalRotation = (1.0 - uRotation) * 2.0 * PI;
  float originalRotationEnd = (1.0 - uRotationEnd) * 2.0 * PI;
  // OverTime
  float finalRotation = mix(originalRotation + randRotation, originalRotationEnd + randRotation, lifeLeft);

  vec2 alignedPosition = ( scaledPosition.xy - ( center - vec2( 0.5 ) ) ) * scale;
  vec2 rotatedPosition;
  rotatedPosition.x = cos( finalRotation ) * alignedPosition.x - sin( finalRotation ) * alignedPosition.y;
  rotatedPosition.y = sin( finalRotation ) * alignedPosition.x + cos( finalRotation ) * alignedPosition.y;
  
  mat4 instanceMatrix = mat4(
    vec4(1.0, 0.0, 0.0, 0.0),
    vec4(0.0, 1.0, 0.0, 0.0),
    vec4(0.0, 0.0, 1.0, 0.0),
    vec4(pos.x, pos.y, pos.z, 1.0)
  );  

  mvPosition = modelViewMatrix * instanceMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
  mvPosition.xy += rotatedPosition;
  gl_Position = projectionMatrix  * mvPosition;   
`,yL=`
  uniform vec4 uColor;                // start color
  uniform vec4 uColor2;               // end color
  uniform sampler2D uTexture;         // texture
  varying float v_LifeLeft;   // normalized lifetime 1 to 0
  varying vec2 vUv;
  varying vec2 vRef;

  float random(vec2 co) {
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
  }
  `+J_+`  
  ${pL}

`,vL=({easeOpacity:e="linearFadeOut"})=>`  
  // if Particle is dead, hide it
  if (v_LifeLeft <= 0.005 ) {
    discard;
  }

  #ifdef USE_RANDOM_COLORING
    float randVal = random(vRef); // Generate a random value based on the reference
    vec4 color = mix(uColor, uColor2, randVal); // Interpolate between the two colors
  #else
    vec4 color = mix(uColor, uColor2, 1. - v_LifeLeft);
  #endif

  // Opacity over Life Time
  float finalAlpha = ${e}(1. - v_LifeLeft);  
  vec4 textureColor = texture2D(uTexture, vUv).rgba; 
  finalColor = textureColor.rgb * color.rgb;
  finalAlpha = color.a * textureColor.a * finalAlpha;
  
  gl_FragColor = vec4(finalColor, finalAlpha);     

`,eb=class extends lt{constructor(e,a){super(),this.needsJitter=!0,this.type="ParticleMaterial",this.easeOpacity="linearFadeIn",this.easeSize="linearFadeIn",this.useSizeEnd=!1,this.isColoringRandom=!1,this.init(e,a),this.context=a}reset(){}init(e,a){this.transparent=!0,this.depthTest=!0,this.depthWrite=!1,this.easeOpacity=e.ease,this.easeSize=e.easeSize,this.layers=[],this.lightLayer=new On(0,"",{...Hr.defaultData("light","phong"),visible:!1},new za,{},a.shared),this.build()}updateState(e){e.coloring!==void 0&&(this.isColoringRandom=e.coloring==="random"),e.color!==void 0&&(e.color instanceof Array?this.uniforms.uColor.value=e.color:this.uniforms.uColor.value=this.context.shared.color(e.color)),e.color2!==void 0&&(e.color2 instanceof Array?this.uniforms.uColor2.value=e.color2:this.uniforms.uColor2.value=this.context.shared.color(e.color2)),e.size!==void 0&&(this.uniforms.uSize.value=e.size[0],this.uniforms.uSizeEnd.value=e.size[1],e.size[0]!==e.size[1]?this.useSizeEnd=!0:this.useSizeEnd=!1),e.ease!==void 0&&(this.easeOpacity=e.ease,this.build()),e.easeSize!==void 0&&(this.easeSize=e.easeSize,this.build()),this.needsUpdate=!0}onBeforeCompile(e){this.build(),e.defines=this.defines,e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader}build(){let e=new Kd;return e.needsJitter=this.needsJitter,e.addFragmentParsCode(QI),e.buildShader("vertex",this.fragment),e.buildShader("fragment",this.fragment),e.addFragmentFinalCode(KI),this.isColoringRandom&&e.define("USE_RANDOM_COLORING"),this.useSizeEnd&&e.define("USE_SIZE_END"),e.addVertexParsCode(mL),e.addFragmentParsCode(yL),e.addVertexFinalCode(gL({easeSize:this.easeSize})),e.addFragmentFinalCode(vL({easeOpacity:this.easeOpacity})),this.vertexShader=e.getCode("vertex"),this.fragmentShader=e.getCode("fragment"),this.defines=e.defines,this.uniforms={...e.uniforms,...this.uniforms},this.extensions=e.extensions,this}get nodeMaterial(){return this}get fragment(){return this.lightLayer.node}getDefines(){return this.defines}nodeMaterialDispose(){this.layers.forEach(e=>e.dispose()),super.dispose()}},zf=class{constructor(e,a,i,o){this.type="SphereEmitterShape",this.targetMesh=void 0,this.size=e,this.type=i,this.textureSize=iL(a);let c=1;this.targetMesh=(o==null?void 0:o.type)==="Mesh"&&o?o:this.getMesh(i,c);let{positions:d,dataTexture:g,dataTextureNormals:b}=this.createPositions(this.textureSize,this.targetMesh??this.getMesh(i,c));this.positionsTexture=g,this.positionsAttribute=d,this.directionsTexture=b}createPositions(e,a){let{positions:i,normals:o}=nL(a,e*e),c=Z_(i,e),d=Z_(o,e);return{dataTexture:c,positions:i,dataTextureNormals:d}}getMesh(e,a){let i=null;switch(e){case"SphereEmitterShape":{i=new Ys(a*.5,32,32);break}case"TorusEmitterShape":{i=new $u(a*.5,.3,15,40);break}case"ConeEmitterShape":{i=new dl(a,a,15);break}case"BoxEmitterShape":{i=new vi(a,a,a);break}case"PlaneEmitterShape":{i=new wn(a,a),i.rotateX(-Math.PI/2);break}case"MeshEmitterShape":{i=new Ys(a,32,32);break}default:{i=new Ys(a,32,32);break}}return new sr(i,new ts({color:16711680}))}applyToShader(e,a){this.size=new _().fromArray(a.size),e.uEmitterSize.value=this.size}dispose(){this.positionsTexture.dispose(),this.directionsTexture.dispose(),this.positionsAttribute=new Float32Array}};function cu(e){let a={...e},i=Zh.defaultData;a.forceFieldObjectId&&(a.colliderEntityId=a.forceFieldObjectId);let o={...i.shape,...a.shape},c={...i.renderMaterial,...a.renderMaterial};return{...i,...a,shape:o,renderMaterial:c}}var xL=`
// uniform sampler2D uCurrentPosition; // Pass in the variable from GPGPU
// uniform sampler2D uCurrentVelocity; // Pass in the variable from GPGPU
// uniform sampler2D uCurrentEmissionRate; // Pass in the variable from GPGPU

uniform sampler2D uIndex; // Texture with corresponding index
uniform float uLastIndexEmitted; // Last emitted index
uniform float uParticlesToEmit; // Number of particles to emit on that frame
uniform float uTime;

void main() {
    vec2 vUv = gl_FragCoord.xy / resolution.xy;
    float particleIndex = texture(uIndex, vUv).x;
    float timeLeft = texture2D( uCurrentPosition, vUv ).w;
    float isActive = texture2D( uCurrentEmissionRate, vUv ).g;    // 1. = active, 0. = not active
    float timeStart = texture2D( uCurrentEmissionRate, vUv ).b;


    // ********** Detect Colision to Create a flag and use it in position **********
    // We are doing this here, so

    // ********** Emit Particles **********
    // X = isSpawning 0.0 or 1.0
    // Y = isActive 0.0 or 1.0
    // Check if the vertex index is between the first value and the last value
    // if (particleIndex >= uLastIndexEmitted && particleIndex < uLastIndexEmitted + uParticlesToEmit) {
    //     // Emit a particle by writing 1 to the red channel of the color output
    //     // r: 1. == emit the particle
    //     // g: 1. == particle is now active
    //     timeStart = uTime;
    //     gl_FragColor = vec4(1.0, 1.0, timeStart, 1.0);
    // } else {
    //     // The Particle is either already emitted or not in the range of the particles to emit
    //     // Do not emit a particle by writing 0 to the red channel of the color output        
    //     gl_FragColor = vec4(0.0, isActive, timeStart, 1.0);
    // }
    // Determine if the particle is within the emission range
    float emitLowerBound = step(uLastIndexEmitted, particleIndex);
    float emitUpperBound = step(particleIndex, uLastIndexEmitted + uParticlesToEmit - 1.0);
    float emitParticle = emitLowerBound * emitUpperBound; // 1.0 if in range, 0.0 otherwise

    // Set timeStart and color
    timeStart = mix(timeStart, uTime, emitParticle);
    gl_FragColor = vec4(emitParticle, mix(isActive, 1.0, emitParticle), timeStart, 1.0);


}
`,$_=10,tb=class extends _t{constructor(e,a){super(),this.type="ParticleEmitter",this.debugMode=!1,this.worldSpace=!0,this.rootObject=null,this.gpuCompute=null,this.positionSimRT=null,this.velocitySimRT=null,this.emissionRateSimRT=null,this.emitterShape=void 0,this.isEmitting=!1,this.hasBeenReset=!1,this.emittedParticlesAmount=0,this.lastEmitTime=0,this.globalTime=0,this.targetFPS=60,this.previousRatio=1,this.lerpFactor=.4,this.particlesAmount=0,this.noiseStrength=0,this.noiseScale=0,this.isBillboardBased=!0,this.simFeaturesDefinition={USE_COLLIDER:!1,USE_ATTRACTOR:!1,USE_VORTEX:!1,USE_SPHERE_COLLIDER:!1,USE_BOX_COLLIDER:!1,USE_FORCE_LOCAL_SPACE:!1,USE_NORMALS:!1,USE_CURL_NOISE:!0,USE_SIMPLEX_NOISE:!1,USE_FBM_NOISE:!1},this.textureLoader=new Oy,this.currentWorldPosition=new _,this.systemQuaternion=new Qe,this.worldGravity=new _(0,0,0),this.directionAxis=new _(0,0,0),this.colliderV3=new _(0,0,0),this.colliderQuaternion=new Qe(0,0,0,1),this.matrixAutoUpdate=!0,this.renderer=e,this.system=a,this.shared=a.context.shared;let i=a.data;this.material=new eb(i.renderMaterial,a.context),this.material.uniforms={uSize:{value:0},uSizeEnd:{value:0},uColor:{value:i.renderMaterial.color},uColor2:{value:i.renderMaterial.color2},uPosition:{value:new _(0,0,0)},uEmissionData:{value:new _(0,0,0)},uTexture:{value:this.defaultTexture},uWorldOffset:{value:new _(0,0,0)},uWorldQuaternion:{value:new Ke(0,0,0,1)},uRandScaleFactor:{value:i.randomScale??0},uRandRotationFactor:{value:i.randomRotation??0},uRotation:{value:i.renderMaterial.spriteRotation[0]??0},uRotationEnd:{value:i.renderMaterial.spriteRotation[1]??0}},this.setTexture(this.material.uniforms,i.renderMaterial.texture),this.init(i)}setTexture(e,a){let i=a.data;if(typeof a=="string"){let o=this.shared.image(a),c=new tr(o.img);c.needsUpdate=!0,e.uTexture.value=c;return}if(typeof i!="string"){let o=new Image;o.onload=()=>{let g=new tr(o);g.needsUpdate=!0,e.uTexture.value=g};let c=new Blob([i],{type:"image/*"}),d=URL.createObjectURL(c);o.src=d}}updateGeometryAttributes(e,a){var o;let i=rL(a);!((o=this.emitterShape)!=null&&o.positionsAttribute)||e.geometry.setAttribute("ref",new Eo(i,2))}applyWorldSpace(){if(!this.system.started||!this.worldSpace||!this.positionSimRT||!this.velocitySimRT)return;let e=this.system;e.getWorldQuaternion(this.systemQuaternion),this.systemQuaternion.invert(),e.getWorldPosition(this.currentWorldPosition),this.material.uniforms.uWorldOffset.value=this.currentWorldPosition,this.material.uniforms.uWorldQuaternion.value.copy(this.systemQuaternion.normalize()),this.positionSimRT.material.uniforms.uWorldOffset.value=this.currentWorldPosition,this.systemQuaternion.invert(),this.positionSimRT.material.uniforms.uWorldQuaternion.value.copy(this.systemQuaternion.normalize()),this.velocitySimRT.material.uniforms.uWorldQuaternion.value.copy(this.systemQuaternion.normalize())}update(e,a){var g;if(!this.gpuCompute||!this.positionSimRT||!this.velocitySimRT||!this.emissionRateSimRT||this.hasBeenReset)return;if(this.checkIfAllParticlesAreDead()&&!this.hasBeenReset){this.reset();return}this.applyWorldSpace(),this.globalTime=e,this.positionSimRT.material.uniforms.uTime.value=e,this.emissionRateSimRT.material.uniforms.uTime.value=e;let i=1e3/a,o=this.targetFPS/i,c=this.previousRatio+(o-this.previousRatio)*this.lerpFactor;this.positionSimRT.material.uniforms.uFPSRatio.value=c,this.previousRatio=c;let d=this.isEmitting?this.GoEmitSomeParticles(e,this.system.data.birthRatePerSec):0;this.emissionRateSimRT.material.uniforms.uLastIndexEmitted.value=this.emittedParticlesAmount,this.emissionRateSimRT.material.uniforms.uParticlesToEmit.value=d,this.material.uniforms.uPosition.value=(g=this.gpuCompute.getCurrentRenderTarget(this.positionSimRT))==null?void 0:g.texture,this.system.colliderEntities.length>0&&this.renderColliders(),this.gpuCompute.compute()}renderColliders(){if(!this.velocitySimRT)return;let e=this.system.colliderEntities[0];if(!e)return;e.getWorldPosition(this.colliderV3),this.colliderV3.y===0&&(this.colliderV3.y=1e-4),this.velocitySimRT.material.uniforms.uColliderPos.value.copy(this.colliderV3);let a=e.data.size;this.colliderV3.fromArray(a),this.velocitySimRT.material.uniforms.uColliderSize.value.copy(this.simFeaturesDefinition.USE_SPHERE_COLLIDER?this.colliderV3.multiplyScalar(.5):this.colliderV3),e.getWorldQuaternion(this.colliderQuaternion),this.velocitySimRT.material.uniforms.uColliderQuaternion.value.copy(this.colliderQuaternion.normalize()),this.velocitySimRT.material.uniforms.uColliderQuaternionInvert.value.copy(this.colliderQuaternion.normalize().invert())}updateState(e){!this.velocitySimRT||!this.positionSimRT||(e.renderMaterial&&this.updateMaterialState(e.renderMaterial),this.updateParticleState(e))}updateVariableState(e,a){if(!this.velocitySimRT||!this.positionSimRT)return;a[2]==="size"&&this.material.updateState({size:[e,this.material.uniforms.uSizeEnd.value]}),a[2]==="sizeEnd"&&this.material.updateState({size:[this.material.uniforms.uSize.value,e]});let i=(o,c)=>{let d=[...this.system.data.shape.size];d[o]=c,this.updateParticleState({shape:{...this.system.data.shape,size:d}})};a[2]==="shape_size_0"&&i(0,e),a[2]==="shape_size_1"&&i(1,e),a[2]==="shape_size_2"&&i(2,e),a[2]==="speed"&&(this.velocitySimRT.material.uniforms.uSpeed.value=e/$_),a[2]==="gravity"&&this.worldGravity.set(0,e/100,0),a[2]==="noiseStrength"&&(this.noiseStrength=e,this.velocitySimRT.material.uniforms.uNoiseStrength.value=this.noiseStrength),a[2]==="noiseScale"&&(this.noiseScale=e,this.velocitySimRT.material.uniforms.uNoiseScale.value=this.noiseScale),a[2]==="direction_x"&&(this.directionAxis=this.getDirectionAxis([Number(e),this.system.data.direction[1],this.system.data.direction[2]])),a[2]==="direction_y"&&(this.directionAxis=this.getDirectionAxis([this.system.data.direction[0],Number(e),this.system.data.direction[2]])),a[2]==="direction_z"&&(this.directionAxis=this.getDirectionAxis([this.system.data.direction[0],this.system.data.direction[1],Number(e)]))}updateMaterialState(e){this.material.updateState({...e,size:e.size?[Number(this.shared.getVariable(e.size[0],[this.uuid,"particles","size"])),Number(this.shared.getVariable(e.size[1],[this.uuid,"particles","sizeEnd"]))]:[0,0]}),e.texture&&(this.setTexture(this.material.uniforms,e.texture),this.material.needsUpdate=!0)}updateParticleState(e){var a,i,o;if(!(!this.positionSimRT||!this.velocitySimRT)){if(this.shouldReInitGPUCompute(e)&&this.init(cu(this.system.data)),e.life!==void 0&&(this.positionSimRT.material.uniforms.uMaxLifeTime.value=e.life),e.speed!==void 0&&(this.velocitySimRT.material.uniforms.uSpeed.value=Number(this.shared.getVariable(e.speed,[this.uuid,"particles","speed"]))/$_),e.collisionBounce!==void 0&&(this.velocitySimRT.material.uniforms.uBounce.value=e.collisionBounce),e.noiseStrength!==void 0&&(this.noiseStrength=Number(this.shared.getVariable(e.noiseStrength,[this.uuid,"particles","noiseStrength"])),this.velocitySimRT.material.uniforms.uNoiseStrength.value=this.noiseStrength),e.noiseScale!==void 0&&(this.noiseScale=Number(this.shared.getVariable(e.noiseScale,[this.uuid,"particles","noiseScale"])),this.velocitySimRT.material.uniforms.uNoiseScale.value=this.noiseScale),e.noiseSeed!==void 0&&(this.velocitySimRT.material.uniforms.uNoiseSeed.value=e.noiseSeed),e.randomMass!==void 0&&(this.velocitySimRT.material.uniforms.uRandomMassFactor.value=e.randomMass),((a=e.renderMaterial)==null?void 0:a.size)!==void 0){let c=this.shared.getVariable(e.renderMaterial.size[0],[this.uuid,"particles","size"]);this.velocitySimRT.material.uniforms.particleSize.value=Number(c)}if(((i=e.renderMaterial)==null?void 0:i.spriteRotation)!==void 0&&(this.material.uniforms.uRotation.value=e.renderMaterial.spriteRotation[0],this.material.uniforms.uRotationEnd.value=e.renderMaterial.spriteRotation[1]),e.shape!==void 0){let c=e.shape.size??this.system.data.shape.size,d=[Number(this.shared.getVariable(c[0],[this.uuid,"particles","shape_size_0"])),Number(this.shared.getVariable(c[1],[this.uuid,"particles","shape_size_1"])),Number(this.shared.getVariable(c[2],[this.uuid,"particles","shape_size_2"]))],g={...cu(this.system.data).shape,size:d};(o=this.emitterShape)==null||o.applyToShader(this.positionSimRT.material.uniforms,g)}if(e.gravity!==void 0&&(this.worldGravity.set(0,Number(this.shared.getVariable(this.system.data.gravity,[this.uuid,"particles","gravity"]))/100,0),this.velocitySimRT.material.uniforms.uGravity={value:this.worldGravity}),e.direction!==void 0){let c=this.getDirectionFromVariable(e.direction);this.directionAxis=this.getDirectionAxis(c),this.velocitySimRT.material.uniforms.uDirectionsAxis.value=this.directionAxis}e.randomRotation!==void 0&&(this.material.uniforms.uRandRotationFactor.value=e.randomRotation),e.randomScale!==void 0&&(this.material.uniforms.uRandScaleFactor.value=e.randomScale)}}updateForceFieldParameters(e){!this.velocitySimRT||(e.forceIntensity!==void 0&&(this.velocitySimRT.material.uniforms.uForceIntensity.value=e.forceIntensity),e.forceDambing!==void 0&&(this.velocitySimRT.material.uniforms.uForceDamping.value=e.forceDambing))}getDirectionAxis(e){let a=[Number(e[0])*Me.DEG2RAD,Number(e[1])*Me.DEG2RAD,Number(e[2])*Me.DEG2RAD],i=new or$1(a[0],a[1],a[2],"XYZ");return this.directionAxis.set(0,1,0).applyEuler(i).normalize(),this.velocitySimRT&&(this.velocitySimRT.material.uniforms.uDirectionsAxis.value=this.directionAxis),this.directionAxis}shouldReInitGPUCompute(e){let{birthRatePerSec:a,rootObjectType:i,colliderEntityId:o,shape:c,emitTimeDuration:d,emitTimeCycle:g,life:b,directionMode:j,noiseType:$}=e;return a!==void 0||i!==void 0||o||o===null||g!==void 0||c!==void 0||b!==void 0||d!==void 0||j!==void 0||$!==void 0}init(e){this.dispose(),this.particlesAmount=this.getMaxParticlesAmount({birthRatePerSecond:e.birthRatePerSec,particleMaxLifeTime:e.life,loopDuration:e.emitTimeCycle==="infinity"?0:e.emitTimeDuration}),this.particlesAmount>1e5&&(console.warn("The maximum number of particles is limited to 100000."),this.particlesAmount=1e5),this.emitterShape=this.createShape(e.shape,this.particlesAmount);let a=setInterval(()=>{if(this.emitterShape)if(isNaN(this.emitterShape.positionsTexture.source.data.data[0])){this.init(e);return}else clearInterval(a)},100);if(!this.emitterShape)return;let i=new Zx(this.emitterShape.textureSize,this.emitterShape.textureSize,this.renderer),o=this.updateSimulationDefinition(e),c=i.addVariable("uCurrentPosition",o+aL,this.emitterShape.positionsTexture),d=i.addVariable("uCurrentVelocity",o+dL,this.emitterShape.directionsTexture),g=i.addVariable("uCurrentEmissionRate",xL,oL(this.emitterShape.textureSize));i.setVariableDependencies(c,[c,d,g]),i.setVariableDependencies(d,[c,d,g]),i.setVariableDependencies(g,[c,d,g]);let b=sL({size:this.emitterShape.textureSize}),j={uOriginalPosition:{value:this.emitterShape.positionsTexture},uWorldOffset:{value:new _(0,0,0)},uWorldQuaternion:{value:new Ke(0,0,0,1)},uTime:{value:0},uFPSRatio:{value:1},uMaxLifeTime:{value:e.life},uEmitterSize:{value:new _(Number(this.shared.getVariable(e.shape.size[0],[this.uuid,"particles","shape_size_0"])),Number(this.shared.getVariable(e.shape.size[1],[this.uuid,"particles","shape_size_1"])),Number(this.shared.getVariable(e.shape.size[2],[this.uuid,"particles","shape_size_2"])))},particleSize:{value:0}};c.material.uniforms=j;let $=this.getDirectionFromVariable(e.direction);this.directionAxis=this.getDirectionAxis($),this.worldGravity.set(0,Number(this.shared.getVariable(this.system.data.gravity,[this.uuid,"particles","gravity"]))/100,0),this.noiseStrength=Number(this.shared.getVariable(e.noiseStrength,[this.uuid,"particles","noiseStrength"])),this.noiseScale=Number(this.shared.getVariable(e.noiseScale,[this.uuid,"particles","noiseScale"]));let rt=e.colliderEntityId&&this.system.getColliderData(e.colliderEntityId),_e={uOriginalPosition:{value:this.emitterShape.positionsTexture},uDirections:{value:this.emitterShape.directionsTexture},uDirectionsAxis:{value:this.directionAxis},uWorldQuaternion:{value:new Ke(0,0,0,1)},uColliderPos:{value:new _(0,0,0)},uColliderSize:{value:new _(0,0,0)},uForceIntensity:{value:rt?rt.forceIntensity:0},uForceDamping:{value:rt?rt.forceDambing:0},uColliderQuaternion:{value:new Ke(0,0,0,1)},uColliderQuaternionInvert:{value:new Ke(0,0,0,1)},particleSize:{value:0},uGravity:{value:this.worldGravity},uNoiseStrength:{value:this.noiseStrength},uNoiseScale:{value:this.noiseScale},uNoiseSeed:{value:e.noiseSeed},uRandomMassFactor:{value:e.randomMass},uBounce:{value:e.collisionBounce},uSpeed:{value:Number(this.shared.getVariable(e.speed,[this.uuid,"particles","speed"]))/$_}};d.material.uniforms=_e;let st={uIndex:{value:b},uTime:{value:0},uLastIndexEmitted:{value:0},uParticlesToEmit:{value:0}};g.material.uniforms=st;let ut=[Number(this.shared.getVariable(e.shape.size[0],[this.uuid,"particles","shape_size_0"])),Number(this.shared.getVariable(e.shape.size[1],[this.uuid,"particles","shape_size_1"])),Number(this.shared.getVariable(e.shape.size[2],[this.uuid,"particles","shape_size_2"]))],gt={...cu(this.system.data).shape,size:ut};this.emitterShape.applyToShader(c.material.uniforms,gt),i.init(),this.gpuCompute=i,this.positionSimRT=c,this.velocitySimRT=d,this.emissionRateSimRT=g,this.rootObject=this.createPrimaryEmitter(this.emitterShape.textureSize),this.add(this.rootObject),this.material.needsUpdate=!0}getDirectionFromVariable(e){let a=Number(this.shared.getVariable(e[0],[this.uuid,"particles","direction_x"])),i=Number(this.shared.getVariable(e[1],[this.uuid,"particles","direction_y"])),o=Number(this.shared.getVariable(e[2],[this.uuid,"particles","direction_z"]));return[a,i,o]}updateSimulationDefinition(e){if(this.simFeaturesDefinition.USE_COLLIDER=!1,this.simFeaturesDefinition.USE_ATTRACTOR=!1,this.simFeaturesDefinition.USE_VORTEX=!1,this.simFeaturesDefinition.USE_SPHERE_COLLIDER=!1,this.simFeaturesDefinition.USE_BOX_COLLIDER=!1,this.simFeaturesDefinition.USE_FORCE_LOCAL_SPACE=!1,this.simFeaturesDefinition.USE_NORMALS=!1,this.simFeaturesDefinition.USE_CURL_NOISE=!1,this.simFeaturesDefinition.USE_SIMPLEX_NOISE=!1,this.simFeaturesDefinition.USE_FBM_NOISE=!1,e.colliderEntityId&&this.system.colliderEntities.length>0){let i=this.system.getColliderData(e.colliderEntityId);switch(i==null?void 0:i.forceType){case"attractor":this.simFeaturesDefinition.USE_ATTRACTOR=!0;break;case"collider":this.simFeaturesDefinition.USE_COLLIDER=!0;break;case"vortex":this.simFeaturesDefinition.USE_VORTEX=!0;break}let o=i==null?void 0:i.colliderType;o==="sphere"&&(this.simFeaturesDefinition.USE_SPHERE_COLLIDER=!0),o==="box"&&(this.simFeaturesDefinition.USE_BOX_COLLIDER=!0),(i==null?void 0:i.forceRange)==="helper"&&(this.simFeaturesDefinition.USE_FORCE_LOCAL_SPACE=!0)}e.directionMode==="normals"&&(this.simFeaturesDefinition.USE_NORMALS=!0),e.noiseType==="curl"&&(this.simFeaturesDefinition.USE_CURL_NOISE=!0),e.noiseType==="simplex"&&(this.simFeaturesDefinition.USE_SIMPLEX_NOISE=!0),e.noiseType==="fbm"&&(this.simFeaturesDefinition.USE_FBM_NOISE=!0);let a="";for(let[i,o]of Object.entries(this.simFeaturesDefinition))o&&(a+=`#define ${i}
`);return a}createShape(e,a){this.emitterShape&&this.emitterShape.dispose();let i=new _(Number(this.shared.getVariable(e.size[0],[this.uuid,"particles","shape_size_0"])),Number(this.shared.getVariable(e.size[1],[this.uuid,"particles","shape_size_1"])),Number(this.shared.getVariable(e.size[2],[this.uuid,"particles","shape_size_2"])));if(e.type==="MeshEmitterShape"){let o=null;return this.system.context.scene.traverseEntity(c=>{c.uuid===e.fromMeshId&&(o=c)}),o?new zf(i,a,e.type,o):new zf(i,a,"SphereEmitterShape")}else return new zf(i,a,e.type)}createPrimaryEmitter(e){let a,i=e*e;return a=new Ey(new wn(1,1,1),this.material,i),this.updateGeometryAttributes(a,e),this.material.needsUpdate=!0,a.onBeforeRender=()=>{this.applyWorldSpace()},a}getMaxParticlesAmount({birthRatePerSecond:e,particleMaxLifeTime:a,loopDuration:i=0}){return Math.ceil(e*(a+i))}dispose(){var e,a,i;!this.gpuCompute||((a=(e=this.rootObject)==null?void 0:e.parent)==null||a.remove(this.rootObject),this.gpuCompute.dispose(),this.material.nodeMaterialDispose(),(i=this.emitterShape)==null||i.dispose())}GoEmitSomeParticles(e,a){let i=e-this.lastEmitTime,o=1/a;if(i>=o){let c=Math.max(1,Math.floor(i/o));return this.lastEmitTime=e,this.emittedParticlesAmount+c>this.particlesAmount&&(this.emittedParticlesAmount=0),this.emittedParticlesAmount+=c,c}return 0}checkIfAllParticlesAreDead(){return this.lastEmitTime+this.system.data.life+1<this.globalTime}reset(){this.hasBeenReset=!0,this.lastEmitTime=0,this.emittedParticlesAmount=0,this.gpuCompute&&this.init(cu(this.system.data))}startEmitting(){this.isEmitting=!0,this.hasBeenReset=!1,this.lastEmitTime=this.globalTime}stopEmitting(){this.isEmitting=!1}},uu=class extends pr{constructor(e,a,i){super(e,a),this.type="ParticleSystem",this.geometry=new Pe,this.actualTime=0,this.currentLoopTime=0,this.started=!1,this.stopped=!1,this.isFrozen=!1,this.isIdle=!0,this.emitter=null,this.colliderEntities=[],this.renderer=null,this.isPreWarm=!1,this._hasOnAfterRenderBeenCalled=!1,this.onAfterRender=o=>{this._hasOnAfterRenderBeenCalled||(this._hasOnAfterRenderBeenCalled=!0,this.init(o))},this.context=i,this.data={...a,...cu(a)},this.geometry.setAttribute("position",new Te([],3)),this.material=new ts({colorWrite:!1}),this.frustumCulled=!1}init(e){this.renderer=e,this.emitter=new tb(e,this),this.add(this.emitter),this.updateParticleState(this.data)}update(e){if(!this.isReady||!this.started||this.isFrozen||this.isIdle)return;this.actualTime+=e,this.stopped||(this.currentLoopTime+=e);let a=this.data.emitTimeCycle==="one_time";if((this.data.emitTimeCycle==="loop"||a)&&this.currentLoopTime>this.data.emitTimeDuration*1e3&&(this.stopped||(this.stop(),a||this.start(this.data.emitTimeLoopDelayStart==="start"?0:this.data.emitTimeDelay*1e3))),this.emitter&&this.started){let i=this.actualTime/1e3;this.emitter.update(i,e)}this.scale.set(1,1,1),this.updateMatrix()}isReady(){return!!this.emitter}hasCollider(e){return this.colliderEntities.some(a=>a.identity===e)}getColliderData(e){let a=this.colliderEntities.find(i=>i.identity===e);return a?a.data:null}updateByPatchedOp(e,a,i){super.updateByPatchedOp(e,a,i),Rt(e.path,["renderMaterial"])&&this.updateParticleState({renderMaterial:{...this.data.renderMaterial,...Fr$1.drop(e,1).props}}),Rt(e.path,["shape"])&&this.updateParticleState({shape:{...this.data.shape,...Fr$1.drop(e,1).props}})}updateState(e,a){super.updateState(e,a),this.updateParticleState(e)}updateParticleState(e){if(this.emitter){if(e.colliderEntityId!==void 0&&e.colliderEntityId!==null){let a=this.context.scene.find(e.colliderEntityId);this.colliderEntities=a?[a]:[]}e.colliderEntityId===null&&(this.colliderEntities=[]),this.emitter.updateState(e),e.emitTimeCycle&&this.started&&this.start()}}updateFromColliderEntity(e){!this.emitter||(this.emitter.updateForceFieldParameters(e),this.stop(),this.start())}start(e=0){var a;if(this.currentLoopTime=0,e){setTimeout(()=>{this.start(0)},e);return}this.started=!0,this.stopped=!1,this.isFrozen=!1,(a=this.emitter)==null||a.startEmitting()}froze(){this.isFrozen=!0}unFroze(){this.isFrozen=!1}stop(){var e;this.stopped=!0,this.currentLoopTime=0,(e=this.emitter)==null||e.stopEmitting()}reset(){var e;this.started=!1,this.stopped=!1,(e=this.emitter)==null||e.reset()}wakeUp(){this.isIdle=!1}sleep(){this.isIdle=!0,this.reset()}};function sK(e,a,i){let o;return a.geometry.type==="TextGeometry"?new yf(e,a,i):(a.geometry.type==="SubdivGeometry"?o=new ao(e,a,i):a.geometry.type==="PathGeometry"?o=new ic(e,a,i):a.geometry.type==="VectorGeometry"?o=new Xx(e,a,i):a.geometry.type==="BooleanGeometry"?o=new qn(e,a,i):a.geometry.type==="UIGeometry"?o=new _r$1(e,a,i):o=new ur(e,a,i),o)}function rb(e,a,i){return console.assert(a.type!==void 0),a.type==="Mesh"?sK(e,a,i):a.type==="Empty"?new Ls(e,a):a.type==="Particle"?new uu(e,a,i):a.type==="ParticleCollider"?new iu(e,a,i):a.type==="Splat"?new Ls(e,a):a.type==="Bone"?new Kx(e,a):a.type==="Page"?new mr(e,a,i):a.type==="PointLight"?new Yx(e,a,i):a.type==="SpotLight"?new Ff(e,a,i):a.type==="DirectionalLight"?new Nf(e,a,i):a.type==="Component"||a.type==="Instance"?new uo(e,a,i):Ks.is(a.type)?new wr$1(e,a):(console.error(a),new Ls(e,a))}eo.createEntity=rb;function oK(e,a,i){let o=rb(e.identity,a,i),c=e.children,d=e.attachedPaths,g=e.parent,b=e.component,j=e.instances,$=e.overrideData,rt=e.uuid,_e=e.stateSelection;e.dispose();for(let st of Object.keys(e))delete e[st];Object.setPrototypeOf(e,Object.getPrototypeOf(o));for(let st of Object.keys(o))e[st]=o[st];e.children=[...e.children,...c],e.attachedPaths=d,e.parent=g,e.component=b,e.instances=j,e.uuid=rt,e.overrideData=$,e.updateState(e.data,i),_e&&e.changeSelectedState(_e,i),e.resetBBoxNeedsUpdate()}eo.changeEntityProptotype=oK;eo.Cloner=Ji;function SL(e,a,i,o){e.updateByOp(a,i,o,!1)}function wL(e,a){let i=!1,o=a.getLayersOfType("transmission"),c=a.getLayersOfType("outline");return c.length>0&&(e.layers.set(8),o.length>0&&e.layers.enable(3),i=!0,mf(e),pf(e)),o.length===0&&c.length===0&&e.layers.set(0),e instanceof Ps&&e.needsAO&&e.layers.enable(5),i}function AL(e,a){if(!a.layers)return!1;let i=!1,o=a.getLayersOfType("transmission").filter(d=>d.data.visible),c=a.getLayersOfType("outline").filter(d=>d.data.visible);return o.length>0&&(e.layers.set(3),c.length>0&&e.layers.enable(8),i=!0),o.length===0&&c.length===0&&e.layers.set(0),e.needsAO&&e.layers.enable(5),i}function _L(e){let a=!1;return e.traverseEntity(i=>{if(i instanceof Ps)if(Array.isArray(i.material))for(let o=0;o<i.material.length;o++)wL(i,i.material[o])&&(a=!0);else wL(i,i.material)&&(a=!0)}),a}function EL(e){let a=!1;return e.traverseEntity(i=>{if(i instanceof Ps)if(Array.isArray(i.material))for(let o=0;o<i.material.length;o++)AL(i,i.material[o])&&(a=!0);else AL(i,i.material)&&(a=!0)}),a}var aK=new ah,lK=new ce$1,cK=new qs;function eg(e,a,i,o=!1){let c=e.cloner;if(c)for(let d of c.children){let g=lK.copy(d.matrixWorld).invert(),b=cK.copy(a.ray).applyMatrix4(g),j=e.matrixWorld;b.applyMatrix4(j);let $=aK;$.set(b.origin,b.direction),$.near=a.near,$.far=a.far;let rt=$.intersectObject(e,!1);rt.length>0&&i.push({...rt[0],object:o?d:e})}}var ib=class{constructor(){this._constraints=new Map}setConstraint(e,a){a===null?this._constraints.delete(e):this._constraints.set(e,a)}removeDependencies(e){this._constraints.delete(e)}applyConstraints(e){let a=new Set;this._constraints.forEach((i,o)=>{let c=[o,i],d=i;for(;this._constraints.has(d);)d=this._constraints.get(d),a.has(d)||c.push(d);for(let g=c.length-2;g>=0;g--)if(!a.has(c[g])){let b=e.find(c[g]);b?b.applyPathSnapping(e):console.warn(`missing entity ${c[g]}`),a.add(c[g])}})}findDependency(e,a){let i=e;for(;this._constraints.has(i);)if(i=this._constraints.get(i),i===a)return!0;return!1}},ho=pi(Uf()),$o=pi(Gf()),$r$1=pi(Uf()),nt=pi(Gf()),nc=class{constructor(e,a,i){this._dataNormalized=e,this._minD=a,this._maxD=i}static createFromUnnormalized(e){let a=nt.sup(e),i=nt.inf(e),o=(0,$r$1.default)(new Float32Array(e.size),e.shape),c=a-i;return c<1e-4?nt.assigns(o,0):(nt.subs(o,e,i),nt.divs(o,o,c)),new nc(o,i,a)}get data(){return this._dataNormalized}get minD(){return this._minD}get maxD(){return this._maxD}denormalize(){let e=(0,$r$1.default)(new Float32Array(this._dataNormalized.size),this._dataNormalized.shape);return nt.muls(e,this._dataNormalized,this._maxD-this._minD),nt.adds(e,e,this._minD),e}},Er=class{constructor(e,a){this._quantized=e,this._method=a}get quantized(){return this._quantized}static maxIntBits(e){return 2**e-1}static fromNormalized(e,a){let i=e.data,o;if(a==="norm8x"){let c=Er.maxIntBits(8),d=(0,$r$1.default)(new Float32Array(i.size),i.shape);nt.muls(d,i,c),nt.roundeq(d),o=(0,$r$1.default)(new Uint8Array(d.data),i.shape)}else if(a==="norm565"){let c=(0,$r$1.default)(new Float32Array(i.size),i.shape);nt.assign(c,i),nt.mulseq(c.pick(null,0),Er.maxIntBits(5)),nt.mulseq(c.pick(null,1),Er.maxIntBits(6)),nt.mulseq(c.pick(null,2),Er.maxIntBits(5)),nt.roundeq(c);let d=(0,$r$1.default)(new Uint16Array(c.data),i.shape),g=(0,$r$1.default)(new Uint16Array(i.shape[0]),[i.shape[0]]),b=(0,$r$1.default)(new Uint16Array(i.shape[0]),[i.shape[0]]);nt.lshifts(g,d.pick(null,0),11),nt.lshifts(b,d.pick(null,1),5),nt.boreq(g,b),nt.boreq(g,d.pick(null,2)),o=g}else{let c=(0,$r$1.default)(new Float32Array(i.size),i.shape);nt.assign(c,i),nt.mulseq(c.pick(null,0),Er.maxIntBits(11)),nt.mulseq(c.pick(null,1),Er.maxIntBits(10)),nt.mulseq(c.pick(null,2),Er.maxIntBits(11)),nt.roundeq(c);let d=(0,$r$1.default)(new Uint32Array(c.data),i.shape),g=(0,$r$1.default)(new Uint32Array(i.shape[0]),[i.shape[0]]),b=(0,$r$1.default)(new Uint32Array(i.shape[0]),[i.shape[0]]);nt.lshifts(g,d.pick(null,0),21),nt.lshifts(b,d.pick(null,1),11),nt.boreq(g,b),nt.boreq(g,d.pick(null,2)),o=g}return new Er(o,a)}dequantize(e,a){let i=this._method,o,c=this._quantized;if(i==="norm8x"){let d=Er.maxIntBits(8);o=(0,$r$1.default)(new Float32Array(c.size),c.shape),nt.muls(o,c,1/d)}else if(i==="norm565"){let d=(0,$r$1.default)(new Uint8Array(c.shape[0]),[c.shape[0]]),g=(0,$r$1.default)(new Uint8Array(c.shape[0]),[c.shape[0]]),b=(0,$r$1.default)(new Uint8Array(c.shape[0]),[c.shape[0]]);nt.rrshifts(d,c,11),nt.rrshifts(g,c,5),nt.bandseq(g,Er.maxIntBits(6)),nt.bands(b,c,Er.maxIntBits(5)),o=(0,$r$1.default)(new Float32Array(c.shape[0]*3),[c.shape[0],3]),nt.muls(o.pick(null,0),d,1/Er.maxIntBits(5)),nt.muls(o.pick(null,1),g,1/Er.maxIntBits(6)),nt.muls(o.pick(null,2),b,1/Er.maxIntBits(5))}else{let d=(0,$r$1.default)(new Uint16Array(c.shape[0]),[c.shape[0]]),g=(0,$r$1.default)(new Uint16Array(c.shape[0]),[c.shape[0]]),b=(0,$r$1.default)(new Uint16Array(c.shape[0]),[c.shape[0]]);nt.rrshifts(d,c,21),nt.rrshifts(g,c,11),nt.bandseq(g,Er.maxIntBits(10)),nt.bands(b,c,Er.maxIntBits(11)),o=(0,$r$1.default)(new Float32Array(c.shape[0]*3),[c.shape[0],3]),nt.muls(o.pick(null,0),d,1/Er.maxIntBits(11)),nt.muls(o.pick(null,1),g,1/Er.maxIntBits(10)),nt.muls(o.pick(null,2),b,1/Er.maxIntBits(11))}return new nc(o,e,a)}},Tr$1=class{constructor(a,i,o,c,d,g=!1){this._quantized=a,this._minMaxMatrix=i,this._chunkSize=o,this._quantizationMethod=c,this._variableChunkSize=d,this._isDynamicChunks=g}get length(){return this._quantized.shape[0]}get nchunks(){return this._minMaxMatrix.shape[0]}get quantized(){return this._quantized}get method(){return this._quantizationMethod}get minmaxMatrix(){return this._minMaxMatrix}_createPrunedMinMax(a){let i=a.length,o=this.minmaxMatrix.shape[0]-i,c=(0,ho.default)(new Float32Array(o*2),[o,2]),d=0,g=o,b=0,j=this.minmaxMatrix.shape[0];for(let $=0;$<a.length;$++)j=a[$],g=j-b+d,g>d&&$o.assign(c.hi(g,2).lo(d,0),this.minmaxMatrix.hi(j,2).lo(b,0)),d=g,b=j+1;return d<o&&$o.assign(c.lo(d,0),this.minmaxMatrix.lo(b,0)),c}_createPrunedQuantized(a){let i=a.length,o=this.quantized.shape[0]-i,c=this._quantizationMethod,d,g;if(c==="norm8x"){g=this._quantized.shape[1];let _e=g?o*g:o;d=(0,ho.default)(new Uint8Array(_e),g?[o,g]:[o,1])}else c==="norm565"?d=(0,ho.default)(new Uint16Array(o),[o]):d=(0,ho.default)(new Uint32Array(o),[o]);let b=0,j=o,$=0,rt=d.shape[0];for(let _e=0;_e<a.length;_e++)rt=a[_e],j=rt-$+b,j>b&&(g?$o.assign(d.hi(j,g).lo(b,0),this._quantized.hi(rt,g).lo($,0)):$o.assign(d.hi(j).lo(b),this._quantized.hi(rt).lo($))),b=j,$=rt+1;return b<o&&(g?$o.assign(d.lo(b,0),this._quantized.lo($,0)):$o.assign(d.lo(b),this._quantized.lo($))),d}pruneFeature(a,i,o){let c=this._createPrunedQuantized(a),d=this._createPrunedMinMax(i);return new Tr$1(c,d,this._chunkSize,this._quantizationMethod,o,!0)}static getRequiredNChunks(a,i){return Math.floor(a/i)}static fromArray(a,i,o){let c=a.shape[0],d=Math.floor(c/o),g=(0,ho.default)(new Float32Array(d*2),[d,2],[2,1]),b;i==="norm8x"?b=(0,ho.default)(new Uint8Array(a.size),a.shape):i==="norm565"?b=(0,ho.default)(new Uint16Array(a.shape[0]),[a.shape[0]]):b=(0,ho.default)(new Uint32Array(a.shape[0]),[a.shape[0]]);for(let j=0;j<d;j++){let $=j*o,rt=j+1<d?(j+1)*o:c,_e;a.shape.length>1?_e=nc.createFromUnnormalized(a.hi(rt,a.shape[1]).lo($,0)):_e=nc.createFromUnnormalized(a.hi(rt).lo($)),g.set(j,0,_e.minD),g.set(j,1,_e.maxD),b.shape.length>1?$o.assign(b.hi(rt,b.shape[1]).lo($,0),Er.fromNormalized(_e,i).quantized):$o.assign(b.hi(rt).lo($),Er.fromNormalized(_e,i).quantized)}return new Tr$1(b,g,o,i)}denormDequant(){let a=this._minMaxMatrix.shape[0],i=this._quantized,o=i.shape[0],c=this._quantizationMethod,d=this._chunkSize,g;if(this._isDynamicChunks){if(!this._variableChunkSize)throw new Error("variable chunk must exists if chunkSize isDynamic");g=this._variableChunkSize}let b;c==="norm8x"?b=(0,ho.default)(new Float32Array(i.size),i.shape):b=(0,ho.default)(new Float32Array(o*3),[o,3]);let j=0,$=d;for(let rt=0;rt<a;rt++){let[_e,st]=[this._minMaxMatrix.get(rt,0),this._minMaxMatrix.get(rt,1)];this._isDynamicChunks&&($=g[rt]);let ut=rt+1<a?j+$:o,gt;i.shape.length>1?gt=new Er(i.hi(ut,i.shape[1]).lo(j,0),c):gt=new Er(i.hi(ut).lo(j),c),$o.assign(b.hi(ut,b.shape[1]).lo(j,0),gt.dequantize(_e,st).denormalize()),j=ut}return b}static async fetchArrayBuffer(a){return await(await fetch(a,{mode:"cors"})).arrayBuffer()}},Ya=pi(Uf()),Bt=pi(Gf()),YL="http://127.0.0.1:8000",hu=pi(Uf()),gr=pi(Gf()),XL=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9];function QL(e){return e<1e5?e<100?e<10?0:1:e<1e4?e<1e3?2:3:4:e<1e7?e<1e6?5:6:e<1e9?e<1e8?7:8:9}function KL(e,a){if(e===a)return 0;if(~~e===e&&~~a===a){if(e===0||a===0)return e<a?-1:1;if(e<0||a<0){if(a>=0)return-1;if(e>=0)return 1;e=-e,a=-a}let c=QL(e),d=QL(a),g=0;return c<d?(e*=XL[d-c-1],a/=10,g=-1):c>d&&(a*=XL[c-d-1],e/=10,g=1),e===a?g:e<a?-1:1}let i=String(e),o=String(a);return i===o?0:i<o?-1:1}function LK(e){let a=0;for(;e>=32;)a|=e&1,e>>=1;return e+a}function ZL(e,a,i,o){let c=a+1;if(c===i)return 1;if(o(e[c++],e[a])<0){for(;c<i&&o(e[c],e[c-1])<0;)c++;BK(e,a,c)}else for(;c<i&&o(e[c],e[c-1])>=0;)c++;return c-a}function BK(e,a,i){for(i--;a<i;){let o=e[a];e[a++]=e[i],e[i--]=o}}function JL(e,a,i,o,c){for(o===a&&o++;o<i;o++){let d=e[o],g=a,b=o;for(;g<b;){let $=g+b>>>1;c(d,e[$])<0?b=$:g=$+1}let j=o-g;switch(j){case 3:e[g+3]=e[g+2];case 2:e[g+2]=e[g+1];case 1:e[g+1]=e[g];break;default:for(;j>0;)e[g+j]=e[g+j-1],j--}e[g]=d}}function rE(e,a,i,o,c,d){let g=0,b=0,j=1;if(d(e,a[i+c])>0){for(b=o-c;j<b&&d(e,a[i+c+j])>0;)g=j,j=(j<<1)+1,j<=0&&(j=b);j>b&&(j=b),g+=c,j+=c}else{for(b=c+1;j<b&&d(e,a[i+c-j])<=0;)g=j,j=(j<<1)+1,j<=0&&(j=b);j>b&&(j=b);let $=g;g=c-j,j=c-$}for(g++;g<j;){let $=g+(j-g>>>1);d(e,a[i+$])>0?g=$+1:j=$}return j}function iE(e,a,i,o,c,d){let g=0,b=0,j=1;if(d(e,a[i+c])<0){for(b=c+1;j<b&&d(e,a[i+c-j])<0;)g=j,j=(j<<1)+1,j<=0&&(j=b);j>b&&(j=b);let $=g;g=c-j,j=c-$}else{for(b=o-c;j<b&&d(e,a[i+c+j])>=0;)g=j,j=(j<<1)+1,j<=0&&(j=b);j>b&&(j=b),g+=c,j+=c}for(g++;g<j;){let $=g+(j-g>>>1);d(e,a[i+$])<0?j=$:g=$+1}return j}var nE=class{constructor(e,a){Ui(this,"array",null),Ui(this,"compare",null),Ui(this,"minGallop",7),Ui(this,"length",0),Ui(this,"tmpStorageLength",256),Ui(this,"stackLength",0),Ui(this,"runStart",null),Ui(this,"runLength",null),Ui(this,"stackSize",0),this.array=e,this.compare=a,this.length=e.length,this.length<2*256&&(this.tmpStorageLength=this.length>>>1),this.tmp=new Array(this.tmpStorageLength),this.stackLength=this.length<120?5:this.length<1542?10:this.length<119151?19:40,this.runStart=new Array(this.stackLength),this.runLength=new Array(this.stackLength)}pushRun(e,a){this.runStart[this.stackSize]=e,this.runLength[this.stackSize]=a,this.stackSize+=1}mergeRuns(){for(;this.stackSize>1;){let e=this.stackSize-2;if(e>=1&&this.runLength[e-1]<=this.runLength[e]+this.runLength[e+1]||e>=2&&this.runLength[e-2]<=this.runLength[e]+this.runLength[e-1])this.runLength[e-1]<this.runLength[e+1]&&e--;else if(this.runLength[e]>this.runLength[e+1])break;this.mergeAt(e)}}forceMergeRuns(){for(;this.stackSize>1;){let e=this.stackSize-2;e>0&&this.runLength[e-1]<this.runLength[e+1]&&e--,this.mergeAt(e)}}mergeAt(e){let a=this.compare,i=this.array,o=this.runStart[e],c=this.runLength[e],d=this.runStart[e+1],g=this.runLength[e+1];this.runLength[e]=c+g,e===this.stackSize-3&&(this.runStart[e+1]=this.runStart[e+2],this.runLength[e+1]=this.runLength[e+2]),this.stackSize--;let b=iE(i[d],i,o,c,0,a);o+=b,c-=b,c!==0&&(g=rE(i[o+c-1],i,d,g,g-1,a),g!==0&&(c<=g?this.mergeLow(o,c,d,g):this.mergeHigh(o,c,d,g)))}mergeLow(e,a,i,o){let c=this.compare,d=this.array,g=this.tmp,b=0;for(b=0;b<a;b++)g[b]=d[e+b];let j=0,$=i,rt=e;if(d[rt++]=d[$++],--o===0){for(b=0;b<a;b++)d[rt+b]=g[j+b];return}if(a===1){for(b=0;b<o;b++)d[rt+b]=d[$+b];d[rt+o]=g[j];return}let _e=this.minGallop;for(;;){let st=0,ut=0,gt=!1;do if(c(d[$],g[j])<0){if(d[rt++]=d[$++],ut++,st=0,--o===0){gt=!0;break}}else if(d[rt++]=g[j++],st++,ut=0,--a===1){gt=!0;break}while((st|ut)<_e);if(gt)break;do{if(st=iE(d[$],g,j,a,0,c),st!==0){for(b=0;b<st;b++)d[rt+b]=g[j+b];if(rt+=st,j+=st,a-=st,a<=1){gt=!0;break}}if(d[rt++]=d[$++],--o===0){gt=!0;break}if(ut=rE(g[j],d,$,o,0,c),ut!==0){for(b=0;b<ut;b++)d[rt+b]=d[$+b];if(rt+=ut,$+=ut,o-=ut,o===0){gt=!0;break}}if(d[rt++]=g[j++],--a===1){gt=!0;break}_e--}while(st>=7||ut>=7);if(gt)break;_e<0&&(_e=0),_e+=2}if(this.minGallop=_e,_e<1&&(this.minGallop=1),a===1){for(b=0;b<o;b++)d[rt+b]=d[$+b];d[rt+o]=g[j]}else{if(a===0)throw new Error("mergeLow preconditions were not respected");for(b=0;b<a;b++)d[rt+b]=g[j+b]}}mergeHigh(e,a,i,o){let c=this.compare,d=this.array,g=this.tmp,b=0;for(b=0;b<o;b++)g[b]=d[i+b];let j=e+a-1,$=o-1,rt=i+o-1,_e=0,st=0;if(d[rt--]=d[j--],--a===0){for(_e=rt-(o-1),b=0;b<o;b++)d[_e+b]=g[b];return}if(o===1){for(rt-=a,j-=a,st=rt+1,_e=j+1,b=a-1;b>=0;b--)d[st+b]=d[_e+b];d[rt]=g[$];return}let ut=this.minGallop;for(;;){let gt=0,yt=0,Pt=!1;do if(c(g[$],d[j])<0){if(d[rt--]=d[j--],gt++,yt=0,--a===0){Pt=!0;break}}else if(d[rt--]=g[$--],yt++,gt=0,--o===1){Pt=!0;break}while((gt|yt)<ut);if(Pt)break;do{if(gt=a-iE(g[$],d,e,a,a-1,c),gt!==0){for(rt-=gt,j-=gt,a-=gt,st=rt+1,_e=j+1,b=gt-1;b>=0;b--)d[st+b]=d[_e+b];if(a===0){Pt=!0;break}}if(d[rt--]=g[$--],--o===1){Pt=!0;break}if(yt=o-rE(d[j],g,0,o,o-1,c),yt!==0){for(rt-=yt,$-=yt,o-=yt,st=rt+1,_e=$+1,b=0;b<yt;b++)d[st+b]=g[_e+b];if(o<=1){Pt=!0;break}}if(d[rt--]=d[j--],--a===0){Pt=!0;break}ut--}while(gt>=7||yt>=7);if(Pt)break;ut<0&&(ut=0),ut+=2}if(this.minGallop=ut,ut<1&&(this.minGallop=1),o===1){for(rt-=a,j-=a,st=rt+1,_e=j+1,b=a-1;b>=0;b--)d[st+b]=d[_e+b];d[rt]=g[$]}else{if(o===0)throw new Error("mergeHigh preconditions were not respected");for(_e=rt-(o-1),b=0;b<o;b++)d[_e+b]=g[b]}}};function $L(e,a,i,o){if(!Array.isArray(e))throw new TypeError("Can only sort arrays");a?typeof a!="function"&&(o=i,i=a,a=KL):a=KL,i||(i=0),o||(o=e.length);let c=o-i;if(c<2)return;let d=0;if(c<32){d=ZL(e,i,o,a),JL(e,i,o,i+d,a);return}let g=new nE(e,a),b=LK(c);do{if(d=ZL(e,i,o,a),d<b){let j=c;j>b&&(j=b),JL(e,i,i+j,i+d,a),d=j}g.pushRun(i,d),g.mergeRuns(),c-=d,i+=d}while(c!==0);g.forceMergeRuns()}function sE(e){let a=(0,hu.default)(new Int32Array(e.shape[0]),[e.shape[0]]),i=(0,hu.default)(new Int32Array(e.shape[0]),[e.shape[0]]);return gr.bands(a,e,1023),gr.lshifts(i,a,16),gr.bxoreq(a,i),gr.bandseq(a,4278190335),gr.lshifts(i,a,8),gr.bxoreq(a,i),gr.bandseq(a,50393103),gr.lshifts(i,a,4),gr.bxoreq(a,i),gr.bandseq(a,51130563),gr.lshifts(i,a,2),gr.bxoreq(a,i),gr.bandseq(a,153391689),a}function NK(e){let a=sE(e.pick(null,0)),i=sE(e.pick(null,1));gr.lshiftseq(i,1);let o=sE(e.pick(null,2));return gr.lshiftseq(o,2),gr.boreq(a,i),gr.boreq(a,o),a}function sc(e,a){if(e.shape[0]!==a.shape[0])throw new Error("wrong length");let i=(0,hu.default)(new Float32Array(e.size),e.shape,e.stride,e.offset);for(let o=0;o<a.shape[0];o++){let c=a.get(o);if(e.shape.length>1)for(let d=0;d<e.shape[1];d++)i.set(o,d,e.get(c,d));else i.set(o,e.get(c))}return i}function oE(e){let a=gr.sup(e),i=gr.inf(e),o=1e3/Math.min(1e3,a-i),c=(0,hu.default)(new Float32Array(e.data),e.shape);gr.mulseq(c,o);let d=(0,hu.default)(new Int32Array(c.data),e.shape),g=NK(d),b=Array.from(g.data).map(($,rt)=>[$,rt]);$L(b,($,rt)=>$[0]-rt[0]);let j=b.map(([$,rt])=>rt);return(0,hu.default)(Uint32Array.from(j))}var Ns=class{constructor(e,a,i,o,c,d,g,b,j,$){this.propertyDescs=e,this.format=a,this.nsplats=i,this.xyz=o,this.colors=c,this.harmonics=d,this.opacity=g,this.scaling=b,this.rotation=j,this.maxSHDegree=$}getPlyBinary(){let e=Ns._generateHeaderString(this.propertyDescs,this.format,this.nsplats),a=new TextEncoder().encode(e),i=Object.keys(this.propertyDescs).length,o=(0,Ya.default)(new Float32Array(this.nsplats*i),[this.nsplats,i]);if(Bt.assign(o.pick(null,this.propertyDescs.x.index),this.xyz.pick(null,0)),Bt.assign(o.pick(null,this.propertyDescs.y.index),this.xyz.pick(null,1)),Bt.assign(o.pick(null,this.propertyDescs.z.index),this.xyz.pick(null,2)),Bt.assign(o.pick(null,this.propertyDescs.f_dc_0.index),this.colors.pick(null,0)),Bt.assign(o.pick(null,this.propertyDescs.f_dc_1.index),this.colors.pick(null,1)),Bt.assign(o.pick(null,this.propertyDescs.f_dc_2.index),this.colors.pick(null,2)),Bt.assign(o.pick(null,this.propertyDescs.opacity.index),this.opacity.pick(null,0)),Bt.assign(o.pick(null,this.propertyDescs.scale_0.index),this.scaling.pick(null,0)),Bt.assign(o.pick(null,this.propertyDescs.scale_1.index),this.scaling.pick(null,1)),Bt.assign(o.pick(null,this.propertyDescs.scale_2.index),this.scaling.pick(null,2)),Bt.assign(o.pick(null,this.propertyDescs.rot_0.index),this.rotation.pick(null,0)),Bt.assign(o.pick(null,this.propertyDescs.rot_1.index),this.rotation.pick(null,1)),Bt.assign(o.pick(null,this.propertyDescs.rot_2.index),this.rotation.pick(null,2)),Bt.assign(o.pick(null,this.propertyDescs.rot_3.index),this.rotation.pick(null,3)),this.harmonics&&this.harmonics.length>0)for(let g=0;g<this.harmonics.length;g++){let b=g*3;Bt.assign(o.pick(null,this.propertyDescs[`f_rest_${b}`].index),this.harmonics[g].pick(null,0)),Bt.assign(o.pick(null,this.propertyDescs[`f_rest_${b+1}`].index),this.harmonics[g].pick(null,1)),Bt.assign(o.pick(null,this.propertyDescs[`f_rest_${b+2}`].index),this.harmonics[g].pick(null,2))}let c=new Uint8Array(o.data.buffer),d=new Uint8Array(c.length+a.length);return d.set(a),d.set(c,a.length),d.buffer}save(e,a){let i=this.getPlyBinary(),o=new Blob([i],{type:"application/octet-stream"}),c=new File([o],e),d=new FormData;d.append("file",c),d.append("filename",e),d.append("basedir",a),fetch(`${YL}/push_file`,{method:"POST",body:d})}static async loadFile(e){return await(await fetch(e)).arrayBuffer()}mortonPositionSplatsSort(){let e=oE(this.xyz),a=sc(this.xyz,e),i=sc(this.colors,e),o=sc(this.opacity,e),c=sc(this.scaling,e),d=sc(this.rotation,e),g=[];for(let b=0;b<this.harmonics.length;b++)g.push(sc(this.harmonics[b],e));return new Ns(this.propertyDescs,this.format,this.nsplats,a,i,g,o,c,d,this.maxSHDegree)}static _generateHeaderString(e,a,i){let o=`ply
format ${a.format} ${a.version}
element vertex ${i}`,c=Object.keys(e).length,d=Array(c);for(let g in e){let b=e[g];d[b.index]={name:g,dtype:b.dtype}}for(let g=0;g<d.length;g++)o=`${o}
property ${d[g].dtype} ${d[g].name}`;return`${o}
end_header
`}static fromArrayBuffer(e,a=3){let{splatCount:i,vertexData:o,propertiesDesc:c,format:d}=Ns.decodeHeader(e),g=o.buffer.slice(o.byteOffset),b=Object.keys(c).length,j=(0,Ya.default)(new Float32Array(g),[i,b]),$=0,rt={},_e={double:8,int:4,uint:4,float:4,short:2,ushort:2,uchar:1};for(let At in c)if(c.hasOwnProperty(At)){let Tt=c[At].dtype;rt[At]=$,$+=_e[Tt]}let st=(0,Ya.default)(new Float32Array(i*3),[i,3]);Bt.assign(st.pick(null,0),j.pick(null,rt.x/4)),Bt.assign(st.pick(null,1),j.pick(null,rt.y/4)),Bt.assign(st.pick(null,2),j.pick(null,rt.z/4));let ut=(0,Ya.default)(new Float32Array(i*3),[i,3]);Bt.assign(ut.pick(null,0),j.pick(null,rt.scale_0/4)),Bt.assign(ut.pick(null,1),j.pick(null,rt.scale_1/4)),Bt.assign(ut.pick(null,2),j.pick(null,rt.scale_2/4));let gt=(0,Ya.default)(new Float32Array(i*3),[i,3]);Bt.assign(gt.pick(null,0),j.pick(null,rt.f_dc_0/4)),Bt.assign(gt.pick(null,1),j.pick(null,rt.f_dc_1/4)),Bt.assign(gt.pick(null,2),j.pick(null,rt.f_dc_2/4));let yt=(0,Ya.default)(new Float32Array(i*4),[i,4]);Bt.assign(yt.pick(null,0),j.pick(null,rt.rot_1/4)),Bt.assign(yt.pick(null,1),j.pick(null,rt.rot_2/4)),Bt.assign(yt.pick(null,2),j.pick(null,rt.rot_3/4)),Bt.assign(yt.pick(null,3),j.pick(null,rt.rot_0/4));for(let At=0;At<i;At++){let Tt=yt.pick(At,null),kt=Math.sqrt(Tt.get(0)**2+Tt.get(1)**2+Tt.get(2)**2+Tt.get(3)**2);Bt.divseq(Tt,kt)}let Pt=(0,Ya.default)(new Float32Array(i*1),[i,1]);Bt.assign(Pt.pick(null,0),j.pick(null,rt.opacity/4));let wt=(Math.min(Math.max(a,0),3)+1)**2-1,Ct=[];for(let At=0;At<wt;At++){let Tt=(0,Ya.default)(new Float32Array(i*3),[i,3]),kt=At*3;Bt.assign(Tt.pick(null,0),j.pick(null,rt[`f_rest_${kt}`]/4)),Bt.assign(Tt.pick(null,1),j.pick(null,rt[`f_rest_${kt+1}`]/4)),Bt.assign(Tt.pick(null,2),j.pick(null,rt[`f_rest_${kt+2}`]/4)),Ct.push(Tt)}return new Ns(c,d,i,st,gt,Ct,Pt,ut,yt,a)}static async fromPLYFile(e,a=3){let i=await Ns.loadFile(e);return Ns.fromArrayBuffer(i,a)}static decodeHeader(e){let a=new TextDecoder,i=0,o="",c=100;for(;;){if(i+c>=e.byteLength)throw new Error("End of file reached while searching for end of header");let st=new Uint8Array(e,i,c);o+=a.decode(st),i+=c;let ut=i-c*2,gt=new Uint8Array(e,Math.max(0,ut),ut>0?c*2:c);if(a.decode(gt).includes("end_header"))break}let d=o.split(`
`),g=0,b={},j=0,$;for(let st=0;st<d.length;st++){let ut=d[st].trim();if(ut.startsWith("element vertex")){let gt=ut.match(/\d+/);gt&&(g=parseInt(gt[0]))}else if(ut.startsWith("property")){let gt=ut.match(/(\w+)\s+(\w+)\s+(\w+)/);if(gt){let yt=gt[2],Pt=gt[3];b[Pt]={dtype:yt,index:j},j++}}else if(ut.startsWith("format")){let gt=ut.match(/(\w+)\s+(\w+)\s+(\d+\.?\d*)/);gt&&($={format:gt[2],version:gt[3]})}else if(ut==="end_header")break}let rt=o.indexOf("end_header")+10+1,_e=new DataView(e,rt);return{splatCount:g,vertexData:_e,headerOffset:i,propertiesDesc:b,format:$}}},du=class{constructor(e,a,i,o,c,d,g,b){this.config=e,this.xyz=a,this.scaling=i,this.color=o,this.opacity=c,this.harmonics=g,this.quaternion=d,this.variableChunkSize=b}get isDynamicChunks(){return this.variableChunkSize&&this.variableChunkSize.length>0}get nchunks(){return this.xyz.nchunks}get nsplats(){return this.xyz.length}get chunkSize(){return this.config.chunkSize}static compressFromGaussianData(e,a){let i=Tr$1.fromArray(e.xyz,a.xyz,a.chunkSize),o=Tr$1.fromArray(e.scaling,a.scaling,a.chunkSize),c=Tr$1.fromArray(e.colors,a.color,a.chunkSize),d=Tr$1.fromArray(e.opacity,a.opacity,a.chunkSize),g=Tr$1.fromArray(e.rotation,a.quaternion,a.chunkSize),b=e.harmonics,j=[];if(a.harmonics)for(let $=0;$<b.length;$++){let rt=Tr$1.fromArray(b[$],a.harmonics,a.chunkSize);j.push(rt)}return new du(a,i,o,c,d,g,j)}_countIndexesInChunks(e){let a=[],i=this.nchunks,o=this.chunkSize,c=this.nsplats,d=Tr$1.getRequiredNChunks(c,o);if(i===d)for(let g=0;g<e.length;g++){let b=e[g],j=Math.floor(b/this.chunkSize);j in a?a[j].push(b):a[j]=[b]}else{let g=this.variableChunkSize,b={},j=0;for(let $=0;$<i;$++)b[$]=j,j+=g[$];for(let $=0;$<e.length;$++){let rt=e[$],_e=Math.min(Math.floor(rt/o),i-1);for(;rt>=b[_e]+g[_e];)_e++;_e in a?a[_e].push(rt):a[_e]=[rt]}}return a}pruneSplats(e){let a=this._countIndexesInChunks(e),i,o=[];return a.length>0&&(i=this.variableChunkSize?[...this.variableChunkSize]:Array(this.nchunks).fill(this.chunkSize),a.forEach((c,d)=>{i[d]-=c.length,i[d]<=0&&o.push(d)}),i=i.filter(c=>c>0)),new du(this.config,this.xyz.pruneFeature(e,o,i),this.scaling.pruneFeature(e,o,i),this.color.pruneFeature(e,o,i),this.opacity.pruneFeature(e,o,i),this.quaternion.pruneFeature(e,o,i),this.harmonics?this.harmonics.map(c=>c.pruneFeature(e,o,this.variableChunkSize)):void 0,i)}static async loadConfig(e){return await(await fetch(e,{method:"GET",mode:"cors",headers:{Accept:"application/json"}})).json()}toGaussians(){var c;let e={format:"binary_little_endian",version:"1.0"},a={},i=0;if(a.x={dtype:"float",index:i},i++,a.y={dtype:"float",index:i},i++,a.z={dtype:"float",index:i},i++,a.f_dc_0={dtype:"float",index:i},i++,a.f_dc_1={dtype:"float",index:i},i++,a.f_dc_2={dtype:"float",index:i},i++,this.harmonics&&this.harmonics.length>0)for(let d=0;d<this.harmonics.length;d++)a[`f_rest_${d}`]={dtype:"float",index:i},i++,a[`f_rest_${d+1}`]={dtype:"float",index:i},i++,a[`f_rest_${d+2}`]={dtype:"float",index:i},i++;a.opacity={dtype:"float",index:i},i++,a.scale_0={dtype:"float",index:i},i++,a.scale_1={dtype:"float",index:i},i++,a.scale_2={dtype:"float",index:i},i++,a.rot_0={dtype:"float",index:i},i++,a.rot_1={dtype:"float",index:i},i++,a.rot_2={dtype:"float",index:i},i++,a.rot_3={dtype:"float",index:i},i++;let o=(c=this.harmonics)==null?void 0:c.map(d=>d.denormDequant());return new Ns(a,e,this.xyz.length,this.xyz.denormDequant(),this.color.denormDequant(),o||[],this.opacity.denormDequant(),this.scaling.denormDequant(),this.quaternion.denormDequant(),3)}},fu=pi(Uf()),Ai=pi(Gf()),eB={xyz:3,color:3,opacity:1,scaling:3,quaternion:4,harmonics:3},oc=class{constructor(e){this._buffer=e}get buffer(){return this._buffer}get decoded(){return this._decoded||(this._decoded=this.decodeBuffer()),this._decoded}get colorsA(){let e=.28209479177387814,a=this.decoded.color.denormDequant(),i=this.decoded.opacity.denormDequant(),o=(0,fu.default)(new Float32Array(a.shape[0]*4),[a.shape[0],4]);return Ai.mulseq(a,e),Ai.addseq(a,.5),Ai.mulseq(a,255),Ai.maxseq(a,0),Ai.minseq(a,255),Ai.negeq(i),Ai.expeq(i),Ai.addseq(i,1),Ai.recipeq(i),Ai.mulseq(i,255),Ai.assign(o.hi(a.shape[0],3).lo(0,0),a),Ai.assign(o.hi(a.shape[0],4).lo(0,3),i),(0,fu.default)(new Uint8Array(o.data),[a.shape[0],4]).data}get nsplats(){return this.decoded.nsplats}getSplatCount(){return this.decoded.nsplats}get precomputedCovarianceBufferData(){return this._precomputedCovarianceBufferData}decodeBuffer(){let{splatCount:e,chunkCount:a,chunkSize:i,typeChunks:o,vertexData:c,propertiesDesc:d}=this.decodeHeader(),g={xyz:d.xyz.compressionMethod,color:d.color.compressionMethod,opacity:d.opacity.compressionMethod,scaling:d.scaling.compressionMethod,quaternion:d.quaternion.compressionMethod,chunkSize:i};d.harmonics_0&&(g.harmonics=d.harmonics_0.compressionMethod);let b=c.byteOffset,j=Array(Object.keys(d).length);for(let Pt in d)j[d[Pt].index]={name:Pt,method:d[Pt].compressionMethod};let $=a*2*4,rt=b,_e=o==="dynamic"?a*2:0,st,ut=!1;if(_e>0){let Pt=new Uint16Array(c.buffer.slice(rt,rt+_e));rt+=_e,st=Array.from(Pt),ut=!0}let gt={};for(let Pt of j){let wt=0,Ct=!0;if(Pt.method==="norm8x")wt=e*1*eB[Pt.name];else if(Pt.method==="norm11")wt=e*4;else if(Pt.method==="norm565")wt=e*2;else throw Ct=!1,new Error(`Not Implemented format: ${Pt.method}`);let At;if(Ct){let It=c.buffer.slice(rt,rt+$);At=(0,fu.default)(new Float32Array(It),[a,2]),rt+=$}else throw new Error("loading chunk byt hasnot minmax!");let Tt=c.buffer.slice(rt,rt+wt);rt+=wt;let kt;if(Pt.method==="norm8x")kt=(0,fu.default)(new Uint8Array(Tt),[e,eB[Pt.name]]);else if(Pt.method==="norm11")kt=(0,fu.default)(new Uint32Array(Tt));else if(Pt.method==="norm565")kt=(0,fu.default)(new Uint16Array(Tt));else throw new Error(`Not Implemented format: ${Pt.method}`);gt[Pt.name]=new Tr$1(kt,At,i,Pt.method,st,ut)}let yt=[];for(let Pt=0;Pt<15;Pt++){let wt=gt[`harmonics_${Pt}`];wt&&(yt.push(wt),delete gt[`harmonics_${Pt}`])}return yt.length>0&&(gt.harmonics=yt),new du(g,gt.xyz,gt.scaling,gt.color,gt.opacity,gt.quaternion,gt.harmonics,st)}buildPreComputedBuffers(){let e=this.decoded,a=e.nsplats,i=new ArrayBuffer(24*a),o=new Float32Array(i),c=e.scaling.denormDequant(),d=e.quaternion.denormDequant(),g=new Qe,b=new nr,j=new nr,$=new nr,rt=new ce$1;for(let _e=0;_e<a;_e++){rt.makeScale(Math.exp(c.get(_e,0)),Math.exp(c.get(_e,1)),Math.exp(c.get(_e,2))),j.setFromMatrix4(rt),g.set(d.get(_e,0),d.get(_e,1),d.get(_e,2),d.get(_e,3)),rt.makeRotationFromQuaternion(g),b.setFromMatrix4(rt),$.copy(b).multiply(j);let st=$.elements;o[6*_e]=st[0]*st[0]+st[3]*st[3]+st[6]*st[6],o[6*_e+1]=st[0]*st[1]+st[3]*st[4]+st[6]*st[7],o[6*_e+2]=st[0]*st[2]+st[3]*st[5]+st[6]*st[8],o[6*_e+3]=st[1]*st[1]+st[4]*st[4]+st[7]*st[7],o[6*_e+4]=st[1]*st[2]+st[4]*st[5]+st[7]*st[8],o[6*_e+5]=st[2]*st[2]+st[5]*st[5]+st[8]*st[8]}this._precomputedCovarianceBufferData=i}decodeHeader(){let e=this._buffer,a=new TextDecoder,i=0,o="",c=100;for(;;){if(i+c>=e.byteLength)throw new Error("End of file reached while searching for end of header");let gt=new Uint8Array(e,i,c);o+=a.decode(gt),i+=c;let yt=i-c*2,Pt=new Uint8Array(e,Math.max(0,yt),yt>=0?c*2:c);if(a.decode(Pt).includes("end_header"))break}let d=o.split(`
`),g=0,b=0,j=0,$=0,rt="",_e={};for(let gt=0;gt<d.length;gt++){let yt=d[gt].trim();if(yt.startsWith("element vertex")){let Pt=yt.match(/\d+/);Pt&&(g=parseInt(Pt[0]))}else if(yt.startsWith("property")){let Pt=yt.match(/(\w+)\s+(\w+)\s+(\w+)/);if(Pt){let wt=Pt[2],Ct=Pt[3];_e[wt]={compressionMethod:Ct,index:$},$++}}else if(yt.startsWith("element chunks")){let Pt=yt.match(/\d+/);Pt&&(b=parseInt(Pt[0]))}else if(yt.startsWith("element chunkSize")){let Pt=yt.match(/\d+/);Pt&&(j=parseInt(Pt[0]))}else if(yt.startsWith("element typeChunks")){let Pt=yt.match(/(\w+)\s+(\w+)\s+(\w+)/);Pt&&(rt=Pt[3])}else if(yt==="end_header")break}let st=o.indexOf("end_header")+10+1,ut=new DataView(e,st);return{splatCount:g,chunkCount:b,chunkSize:j,typeChunks:rt,vertexData:ut,propertiesDesc:_e}}pruneSplats(e){let a=this.decodeBuffer().pruneSplats(e);return oc.fromCompressedGaussianSplats(a)}static fromCompressedGaussianSplats(e){let a=e.xyz.length,i=e.xyz.nchunks,o=`gspline
element vertex ${a}
element chunks ${i}
element chunkSize ${e.chunkSize}
element typeChunks ${e.isDynamicChunks?"dynamic":"static"}
property xyz ${e.xyz.method}
property color ${e.color.method}
property opacity ${e.opacity.method}
property scaling ${e.scaling.method}
property quaternion ${e.quaternion.method}`;if(e.harmonics&&e.harmonics.length>0)for(let Lt=0;Lt<e.harmonics.length;Lt++)o=`${o}
property harmonics_${Lt} ${e.harmonics[Lt].method}`;o=`${o}
end_header
`;let c=new TextEncoder().encode(o),d=i*2*4,g=e.xyz.quantized.data.buffer.byteLength,b=e.xyz instanceof Tr$1?d:0,j=e.color.quantized.data.buffer.byteLength,$=e.color instanceof Tr$1?d:0,rt=e.opacity.quantized.data.buffer.byteLength,_e=e.opacity instanceof Tr$1?d:0,st=e.scaling.quantized.data.buffer.byteLength,ut=e.scaling instanceof Tr$1?d:0,gt=e.quaternion.quantized.data.buffer.byteLength,yt=e.quaternion instanceof Tr$1?d:0,Pt=e.variableChunkSize?Uint16Array.from(e.variableChunkSize):void 0,wt=Pt?Pt.byteLength:0,Ct=c.byteLength+wt+g+b+j+$+rt+_e+st+ut+gt+yt,At=0,Tt=0;if(e.harmonics&&e.harmonics.length>0)for(let Lt=0;Lt<e.harmonics.length;Lt++)At+=e.harmonics[Lt].quantized.data.buffer.byteLength,Tt+=e.harmonics[Lt]instanceof Tr$1?d:0;At=0,Tt=0,Ct+=At+Tt;let kt=new Uint8Array(Ct),It=0;if(kt.set(c,It),It+=c.byteLength,wt>0&&(kt.set(new Uint8Array(Pt.buffer),It),It+=wt),e.xyz instanceof Tr$1&&(kt.set(new Uint8Array(e.xyz.minmaxMatrix.data.buffer),It),It+=d),kt.set(new Uint8Array(e.xyz.quantized.data.buffer),It),It+=g,e.color instanceof Tr$1&&(kt.set(new Uint8Array(e.color.minmaxMatrix.data.buffer),It),It+=d),kt.set(new Uint8Array(e.color.quantized.data.buffer),It),It+=j,e.opacity instanceof Tr$1&&(kt.set(new Uint8Array(e.opacity.minmaxMatrix.data.buffer),It),It+=d),kt.set(new Uint8Array(e.opacity.quantized.data.buffer),It),It+=rt,e.scaling instanceof Tr$1&&(kt.set(new Uint8Array(e.scaling.minmaxMatrix.data.buffer),It),It+=d),kt.set(new Uint8Array(e.scaling.quantized.data.buffer),It),It+=st,e.quaternion instanceof Tr$1&&(kt.set(new Uint8Array(e.quaternion.minmaxMatrix.data.buffer),It),It+=d),kt.set(new Uint8Array(e.quaternion.quantized.data.buffer),It),It+=gt,At>0&&e.harmonics&&e.harmonics.length>0)for(let Lt=0;Lt<e.harmonics.length;Lt++){let Ft=e.harmonics[Lt];Ft instanceof Tr$1&&(kt.set(new Uint8Array(Ft.minmaxMatrix.data.buffer),It),It+=d),kt.set(new Uint8Array(Ft.quantized.data.buffer),It),It+=Ft.quantized.data.byteLength}return new oc(kt.buffer)}},tB="AGFzbQEAAAAADwhkeWxpbmsuMAEEAAAAAAETA2AAAGAIf39/f39/f38AYAABfwISAQNlbnYGbWVtb3J5AgMAgIAEAwQDAAECBzkDEV9fd2FzbV9jYWxsX2N0b3JzAAALc29ydEluZGV4ZXMAARNlbXNjcmlwdGVuX3Rsc19pbml0AAIK3gMDAwABC9IDAwF/BnwBfgJAIAdFDQAgAysDUCEMIAMrAzAhDSADKwMQIQ5BACEDRP///////+9/IQtEAAAAAAAAEAAhCgNAIAIgA0ECdGoCfyAOIAEgA0EMbGoiCCoCALuiIA0gCCoCBLuioCAMIAgqAgi7oqBEAAAAAAAAsECiIgmZRAAAAAAAAOBBYwRAIAmqDAELQYCAgIB4CzYCACAJIAsgCSALYxshCyAJIAogCSAKZBshCiADQQFqIgMgB0cNAAsgB0UNACAGuCAKIAuhoyEJQQAhAwNAAn8gCSACIANBAnRqIgEoAgC3IAuhoiIKmUQAAAAAAADgQWMEQCAKqgwBC0GAgICAeAshCCABIAg2AgAgBCAIQQJ0aiIBIAEoAgBBAWo2AgAgA0EBaiIDIAdHDQALCyAGQQJPBEAgBCgCACEIQQEhAwNAIAQgA0ECdGoiASABKAIAIAhqIgg2AgAgA0EBaiIDIAZHDQALCyAHQQFrIgGtIQ8DQCAEIAIgD6dBAnQiA2ooAgBBAnRqIgcgBygCAEEBayIHNgIAIAUgASAHa0ECdGogACADaigCADYCACAPUCEDIA9CAX0hDyADRQ0ACyAGBEAgBEEAIAZBAnT8CwALCwQAQQAL",ea=class{};Ui(ea,"DepthMapRange",65536),Ui(ea,"MemoryPageSize",65536),Ui(ea,"BytesPerFloat",4),Ui(ea,"BytesPerInt",4);function FK(e){let a,i,o,c,d,g,b,j,$,rt,_e,st,ut,gt,yt,Pt;function wt(Gr){let hs=new Float64Array(rt,g,16);for(let hn=0;hn<16;hn++)hs[hn]=Gr[hn];let _s;if(o>1){a.exports.sortIndexes(c,d,$,g,b,j,st.DepthMapRange,o);let hn=new Uint32Array(o);_s=hn.buffer,hn.set(new Uint32Array(rt,j,o))}else if(o===1){let hn=new Uint32Array(o);hn[0]=new Uint32Array(rt,c,i)[0],_s=hn.buffer}else _s=new ArrayBuffer(0);e.postMessage({sortDone:!0,indexesBuffer:_s},[_s])}function Ct(Gr,hs,_s){let hn=new Float32Array(rt,d,i*3);o=0;let Qn=new Uint32Array(rt,c,i);for(let ds=0;ds<_s.length-1;ds++){let un=hs[ds],dr=Gr[ds].elements,us=un.filter(gn=>gn.enabled&&gn.mode==="Include").map(gn=>gn.type==="Box"?It(gn):Nt(gn)),Nn=un.filter(gn=>gn.enabled&&gn.mode==="Exclude").map(gn=>gn.type==="Box"?It(gn):Nt(gn));for(let gn=_s[ds];gn<_s[ds+1];gn++){let Zn=ut[gn*3],xu=ut[gn*3+1],au=ut[gn*3+2];if((us.length===0||Tt(Zn,xu,au,us))&&(Nn.length===0||!Tt(Zn,xu,au,Nn))){let Vv=1/(dr[3]*Zn+dr[7]*xu+dr[11]*au+dr[15]);hn[o*3]=(dr[0]*Zn+dr[4]*xu+dr[8]*au+dr[12])*Vv,hn[o*3+1]=(dr[1]*Zn+dr[5]*xu+dr[9]*au+dr[13])*Vv,hn[o*3+2]=(dr[2]*Zn+dr[6]*xu+dr[10]*au+dr[14])*Vv,Qn[o]=gn,o++}}}}function At(Gr,hs){let _s=[],hn=hs.filter(un=>un.enabled&&un.mode==="Include").map(un=>un.type==="Box"?It(un):Nt(un)),Qn=hs.filter(un=>un.enabled&&un.mode==="Exclude").map(un=>un.type==="Box"?It(un):Nt(un)),ds=Gr.length;for(let un=0;un<ds;un+=3){let dr=Gr[un],us=Gr[un+1],Nn=Gr[un+2];(hn.length===0||Tt(dr,us,Nn,hn))&&(Qn.length===0||!Tt(dr,us,Nn,Qn))||_s.push(un/3)}return console.log(_s),_s}function Tt(Gr,hs,_s,hn,Qn){return hn[Qn==="Intersect"?"every":"some"](ds=>{let un=kt(Gr,hs,_s,ds.invRotationMatrix,ds.cropCenter);return Array.isArray(ds)?Ft(un.x,un.y,un.z,ds):Ht(un.x,un.y,un.z,ds)})}function kt(Gr,hs,_s,hn,Qn){let ds=Gr-Qn[0],un=hs-Qn[1],dr=_s-Qn[2],us=1/(hn[3]*ds+hn[7]*un+hn[11]*dr+hn[15]);return{x:(hn[0]*ds+hn[4]*un+hn[8]*dr+hn[12])*us+Qn[0],y:(hn[1]*ds+hn[5]*un+hn[9]*dr+hn[13])*us+Qn[1],z:(hn[2]*ds+hn[6]*un+hn[10]*dr+hn[14])*us+Qn[2]}}function It(Gr){let hs=Gr.cropSize[0]/2,_s=Gr.cropSize[1]/2,hn=Gr.cropSize[2]/2,Qn=[Gr.cropCenter[0]-hs,Gr.cropCenter[1]-_s,Gr.cropCenter[2]-hn,Gr.cropCenter[0]+hs,Gr.cropCenter[1]+_s,Gr.cropCenter[2]+hn],ds=Lt(Gr.cropRotation);return Object.assign(Qn,{invRotationMatrix:ds,cropCenter:Gr.cropCenter})}function Lt(Gr){let hs=[],_s=Gr[0]*Math.PI/180,hn=Gr[1]*Math.PI/180,Qn=Gr[2]*Math.PI/180,ds=Math.cos(_s),un=Math.sin(_s),dr=Math.cos(hn),us=Math.sin(hn),Nn=Math.cos(Qn),gn=Math.sin(Qn),Zn=ds*Nn,xu=ds*gn,au=un*Nn,Vv=un*gn;return hs[0]=dr*Nn,hs[1]=-dr*gn,hs[2]=us,hs[4]=xu+au*us,hs[5]=Zn-Vv*us,hs[6]=-un*dr,hs[8]=Vv-Zn*us,hs[9]=au+xu*us,hs[10]=ds*dr,hs[12]=0,hs[13]=0,hs[14]=0,hs[3]=0,hs[7]=0,hs[11]=0,hs[15]=1,hs}function Ft(Gr,hs,_s,hn){return Gr>=hn[0]&&Gr<=hn[3]&&hs>=hn[1]&&hs<=hn[4]&&_s>=hn[2]&&_s<=hn[5]}function Nt(Gr){let hs=2/Gr.cropSize[0],_s=2/Gr.cropSize[1],hn=2/Gr.cropSize[2],Qn=Lt(Gr.cropRotation);return{invRadiusX:hs,invRadiusY:_s,invRadiusZ:hn,cropCenter:Gr.cropCenter,invRotationMatrix:Qn}}function Ht(Gr,hs,_s,hn){let Qn=(Gr-hn.cropCenter[0])*hn.invRadiusX,ds=(hs-hn.cropCenter[1])*hn.invRadiusY,un=(_s-hn.cropCenter[2])*hn.invRadiusZ;return Qn*Qn+ds*ds+un*un<=1}e.onmessage=Gr=>{if(Gr.data.getCroppedIndexes){let hs=new Uint32Array(At(new Float32Array(Gr.data.positions),Gr.data.crops)).buffer;e.postMessage({outOfBoundsIndexes:hs},[hs])}else if(Gr.data.positions)_e=Gr.data.positions,ut=new Float32Array(_e),yt=Gr.data.meshMatrixWorlds,Pt=Gr.data.cropsArray,gt=Gr.data.meshIndexIntervals,Ct(yt,Pt,gt),e.postMessage({sortSetupComplete:!0});else if(Gr.data.sort||Gr.data.newMatrixWorlds||Gr.data.newCropsArray)(Gr.data.newMatrixWorlds||Gr.data.newCropsArray)&&(Pt=Gr.data.newCropsArray||Pt,yt=Gr.data.newMatrixWorlds||yt,Ct(yt,Pt,gt)),wt(Gr.data.sort.view,Gr.data.sort.cameraPosition);else if(Gr.data.init){st=Gr.data.init.Constants,i=Gr.data.init.splatCount;let hs=st.BytesPerInt,_s=st.BytesPerFloat*3,hn=new Uint8Array(Gr.data.init.sorterWasmBytes),Qn=hs+_s,ds=i*Qn,un=i*st.BytesPerInt*2+st.DepthMapRange*st.BytesPerInt*2,dr=st.MemoryPageSize*32,us=ds+un+dr,Nn=Math.floor(us/st.MemoryPageSize)+1,gn={module:{},env:{memory:new WebAssembly.Memory({initial:Nn*2,maximum:Nn*3,shared:!0})}};WebAssembly.compile(hn).then(Zn=>WebAssembly.instantiate(Zn,gn)).then(Zn=>{a=Zn,c=0,d=i*hs,g=d+i*_s,$=g+16*st.BytesPerFloat*2,b=$+i*st.BytesPerInt,j=b+st.DepthMapRange*st.BytesPerInt,rt=gn.env.memory.buffer,e.postMessage({sortSetupPhase1Complete:!0})})}}}function rB(e){let a=new Worker(URL.createObjectURL(new Blob(["(",FK.toString(),")(self)"],{type:"application/javascript"}))),i=atob(tB),o=new Uint8Array(i.length);for(let c=0;c<i.length;c++)o[c]=i.charCodeAt(c);return a.postMessage({init:{sorterWasmBytes:o.buffer,splatCount:e,Constants:{BytesPerFloat:ea.BytesPerFloat,BytesPerInt:ea.BytesPerInt,DepthMapRange:ea.DepthMapRange,MemoryPageSize:ea.MemoryPageSize}}}),a}var ob=function(){let e=new Float32Array(1),a=new Int32Array(e.buffer);return function(i){return e[0]=i,a[0]}}(),iB=function(e,a,i,o){return e+(a<<8)+(i<<16)+(o<<24)},ab=new z$2,ac=class extends sr{constructor(e,a,i,o,c=!1,d=1,g,b){super(i,o),this.splatCount=a,this.meshIndexIntervals=g,this.meshMatrixWorlds=b,this.splatBuffers=e,this.geometry=i,this.material=o,this.splatDataTextures=null,this.halfPrecisionCovariancesOnGPU=c,this.devicePixelRatio=d,this.resetLocalSplatDataAndTexturesFromSplatBuffer()}static buildMesh(e,a,i=!1,o=1,c,d){let g=ac.buildGeomtery(a),b=ac.buildMaterial(c);return new ac(e,a,g,b,i,o,c,d)}static buildMaterial(e){let a=`
            precision highp float;
            #include <common>

            attribute uint splatIndex;

            uniform highp sampler2D covariancesTexture;
            uniform highp usampler2D centersColorsTexture;
            uniform vec2 focal;
            uniform vec2 viewport;
            uniform vec2 basisViewport;
            uniform vec2 covariancesTextureSize;
            uniform vec2 centersColorsTextureSize;
						uniform highp sampler2D meshMatrixWorldsTexture;
						uniform uint meshIndexIntervals[257];
						uniform float orthoZoom;

            varying vec4 vColor;
            varying vec2 vUv;

            varying vec2 vPosition;

            const vec4 encodeNorm4 = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0);
            const uvec4 mask4 = uvec4(uint(0x000000FF), uint(0x0000FF00), uint(0x00FF0000), uint(0xFF000000));
            const uvec4 shift4 = uvec4(0, 8, 16, 24);
            vec4 uintToRGBAVec (uint u) {
               uvec4 urgba = mask4 & u;
               urgba = urgba >> shift4;
               vec4 rgba = vec4(urgba) * encodeNorm4;
               return rgba;
            }

            vec2 getDataUV(in int stride, in int offset, in vec2 dimensions) {
                vec2 samplerUV = vec2(0.0, 0.0);
                float d = float(splatIndex * uint(stride) + uint(offset)) / dimensions.x;
                samplerUV.y = float(floor(d)) / dimensions.y;
                samplerUV.x = fract(d);
                return samplerUV;
            }

            void main () {
                uvec4 sampledCenterColor = texture(centersColorsTexture, getDataUV(1, 0, centersColorsTextureSize));
                vec3 splatCenter = uintBitsToFloat(uvec3(sampledCenterColor.gba));
                vColor = uintToRGBAVec(sampledCenterColor.r);

                vPosition = position.xy * 2.0;

								uint meshIndex;
								for (int i = 1; i < 257; i++) {
									if (splatIndex < meshIndexIntervals[i]) {
										meshIndex = uint(i - 1);
										break;
									}
								}

								float strideMulmeshIndex = float(4u*meshIndex);
								float meshMatrixWorldsTextureLength = float(256*4);

								mat4 modelMat = mat4(
									texture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+0.0)/meshMatrixWorldsTextureLength, 0)),
									texture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+1.0)/meshMatrixWorldsTextureLength, 0)),
									texture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+2.0)/meshMatrixWorldsTextureLength, 0)),
									texture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+3.0)/meshMatrixWorldsTextureLength, 0))
								);
								mat4 modelViewMat = viewMatrix * modelMat;
								vec4 viewCenter = modelViewMat * vec4(splatCenter, 1.0); 
                vec4 clipCenter = projectionMatrix * viewCenter;

                vec2 sampledCovarianceA = texture(covariancesTexture, getDataUV(3, 0, covariancesTextureSize)).rg;
                vec2 sampledCovarianceB = texture(covariancesTexture, getDataUV(3, 1, covariancesTextureSize)).rg;
                vec2 sampledCovarianceC = texture(covariancesTexture, getDataUV(3, 2, covariancesTextureSize)).rg;

                vec3 cov3D_M11_M12_M13 = vec3(sampledCovarianceA.rg, sampledCovarianceB.r);
                vec3 cov3D_M22_M23_M33 = vec3(sampledCovarianceB.g, sampledCovarianceC.rg);

                // Compute the 2D covariance matrix from the upper-right portion of the 3D covariance matrix
                mat3 Vrk = mat3(
                    cov3D_M11_M12_M13.x, cov3D_M11_M12_M13.y, cov3D_M11_M12_M13.z,
                    cov3D_M11_M12_M13.y, cov3D_M22_M23_M33.x, cov3D_M22_M23_M33.y,
                    cov3D_M11_M12_M13.z, cov3D_M22_M23_M33.y, cov3D_M22_M23_M33.z
                );
                float s = 1.0 / (viewCenter.z * viewCenter.z);

                mat3 W = transpose(mat3(modelViewMat));
                mat3 T = orthoZoom > 0.0 ? W : W * mat3(
									focal.x / viewCenter.z, 0., -(focal.x * viewCenter.x) * s,
									0., focal.y / viewCenter.z, -(focal.y * viewCenter.y) * s,
									0., 0., 0.
								);
                mat3 cov2Dm = transpose(T) * Vrk * T;
                cov2Dm[0][0] += 0.3;
                cov2Dm[1][1] += 0.3;

                // We are interested in the upper-left 2x2 portion of the projected 3D covariance matrix because
                // we only care about the X and Y values. We want the X-diagonal, cov2Dm[0][0],
                // the Y-diagonal, cov2Dm[1][1], and the correlation between the two cov2Dm[0][1]. We don't
                // need cov2Dm[1][0] because it is a symetric matrix.
                vec3 cov2Dv = vec3(cov2Dm[0][0], cov2Dm[0][1], cov2Dm[1][1]);

                vec3 ndcCenter = clipCenter.xyz / clipCenter.w;

                // We now need to solve for the eigen-values and eigen vectors of the 2D covariance matrix
                // so that we can determine the 2D basis for the splat. This is done using the method described
                // here: https://people.math.harvard.edu/~knill/teaching/math21b2004/exhibits/2dmatrices/index.html
                //
                // This is a different approach than in the original work at INRIA. In that work they compute the
                // max extents of the 2D covariance matrix in screen space to form an axis aligned bounding rectangle
                // which forms the geometry that is actually rasterized. They then use the inverse 2D covariance
                // matrix (called 'conic') to determine fragment opacity.
                float a = cov2Dv.x;
                float d = cov2Dv.z;
                float b = cov2Dv.y;
                float D = a * d - b * b;
                float trace = a + d;
                float traceOver2 = 0.5 * trace;
                float term2 = sqrt(trace * trace / 4.0 - D);
                float eigenValue1 = traceOver2 + term2;
								float eigenValue2 = max(traceOver2 - term2, 0.00); // prevent negative eigen value

                const float maxSplatSize = 1024.0;
                vec2 eigenVector1 = normalize(vec2(b, eigenValue1 - a));
                // since the eigen vectors are orthogonal, we derive the second one from the first
                vec2 eigenVector2 = vec2(eigenVector1.y, -eigenVector1.x);
                vec2 basisVector1 = eigenVector1 * min(sqrt(2.0 * eigenValue1), maxSplatSize);
                vec2 basisVector2 = eigenVector2 * min(sqrt(2.0 * eigenValue2), maxSplatSize);

                vec2 ndcOffset = vec2(vPosition.x * basisVector1 + vPosition.y * basisVector2) * basisViewport;

								if (orthoZoom > 0.0) {
									ndcOffset *= orthoZoom;
								}

                gl_Position = vec4(ndcCenter.xy + ndcOffset, ndcCenter.z, 1.0);
            }`,i=`
            precision highp float;
            #include <common>

            uniform vec3 debugColor;

            varying vec4 vColor;
            varying vec2 vUv;

            varying vec2 vPosition;
						layout(location = 1) out vec4 gVelocity; 

            void main () {
                // compute the negative squared distance from the center of the splat to the
                // current fragment in the splat's local space.
                float A = -dot(vPosition, vPosition);
                if (A < -4.0) discard;
                vec3 color = vColor.rgb;
                A = exp(A) * vColor.a;
                gl_FragColor = vec4(color.rgb, A);
								gVelocity = vec4(0.0); // so it is ignored by TAA
            }`,o={covariancesTexture:{type:"t",value:null},centersColorsTexture:{type:"t",value:null},meshIndexIntervals:{value:e},meshMatrixWorldsTexture:{type:"t",value:null},focal:{type:"v2",value:new z$2},viewport:{type:"v2",value:new z$2},basisViewport:{type:"v2",value:new z$2},debugColor:{type:"v3",value:new We},covariancesTextureSize:{type:"v2",value:new z$2(1024,1024)},centersColorsTextureSize:{type:"v2",value:new z$2(1024,1024)},orthoZoom:{type:"f",value:-1}};return new lt({uniforms:o,vertexShader:a,fragmentShader:i,transparent:!0,alphaTest:1,blending:sl,depthTest:!0,depthWrite:!1,side:tn})}static buildGeomtery(e){let a=new Pe;a.setIndex([0,1,2,0,2,3]);let i=new Float32Array(4*3),o=new Xe(i,3);a.setAttribute("position",o),o.setXYZ(0,-1,-1,0),o.setXYZ(1,-1,1,0),o.setXYZ(2,1,1,0),o.setXYZ(3,1,-1,0),o.needsUpdate=!0;let c=new Np().copy(a),d=new Uint32Array(e),g=new Eo(d,1,!1);return g.setUsage(WM),c.setAttribute("splatIndex",g),c.instanceCount=e,c}resetLocalSplatDataAndTexturesFromSplatBuffer(){this.updateLocalSplatDataFromSplatBuffer(),this.allocateAndStoreLocalSplatDataInTextures()}updateLocalSplatDataFromSplatBuffer(){this.splatBuffers.forEach(o=>o.buildPreComputedBuffers()),this.covariances=new Float32Array(this.splatCount*6),this.colors=new Uint8Array(this.splatCount*4),this.centers=new Float32Array(this.splatCount*3);let e=0,a=0,i=0;for(let o of this.splatBuffers){let c=o.nsplats;this.colors.subarray(e,e+c*4).set(o.colorsA),e+=c*4,this.centers.subarray(a,a+c*3).set(o.decoded.xyz.denormDequant().data),a+=c*3,this.covariances.subarray(i,i+c*6).set(new Float32Array(o.precomputedCovarianceBufferData)),i+=c*6}}allocateAndStoreLocalSplatDataInTextures(){let e=this.splatCount,a=new z$2(4096,1024);for(;a.x*a.y*2<e*6;)a.y*=2;let i=new z$2(4096,1024);for(;i.x*i.y*4<e*4;)i.y*=2;let o,c;if(this.halfPrecisionCovariancesOnGPU){c=new Uint16Array(a.x*a.y*2);for(let rt=0;rt<this.covariances.length;rt++)c[rt]=oC.toHalfFloat(this.covariances[rt]);o=new xi(c,a.x,a.y,uh,va)}else c=new Float32Array(a.x*a.y*2),c.set(this.covariances),o=new xi(c,a.x,a.y,uh,Sr$1);o.needsUpdate=!0,this.material.uniforms.covariancesTexture.value=o,this.material.uniforms.covariancesTextureSize.value.copy(a);let d=new Uint32Array(i.x*i.y*4);for(let rt=0;rt<e;rt++){let _e=rt*4,st=rt*3,ut=rt*4;d[ut]=iB(this.colors[_e],this.colors[_e+1],this.colors[_e+2],this.colors[_e+3]),d[ut+1]=ob(this.centers[st]),d[ut+2]=ob(this.centers[st+1]),d[ut+3]=ob(this.centers[st+2])}let g=new xi(d,i.x,i.y,Aw,js);g.internalFormat="RGBA32UI",g.needsUpdate=!0,this.material.uniforms.centersColorsTexture.value=g,this.material.uniforms.centersColorsTextureSize.value.copy(i);let b=256*4,j=new Float32Array(256*16);for(let rt=0;rt<this.meshMatrixWorlds.length;rt++)j.set(this.meshMatrixWorlds[rt].elements,rt*16);let $=new xi(j,b,1,Qr,Sr$1);$.needsUpdate=!0,this.material.uniforms.meshMatrixWorldsTexture.value=$,this.material.uniformsNeedUpdate=!0,this.splatDataTextures={covariances:{data:c,texture:o,size:a},centerColors:{data:d,texture:g,size:i},meshMatrixWorlds:{data:j,texture:$}}}updateIndexes(e){let a=this.geometry;a.attributes.splatIndex.set(e),a.attributes.splatIndex.needsUpdate=!0,a.instanceCount=e.length}updateUniforms(e,a,i,o){this.splatCount>0&&(ab.set(e.x*this.devicePixelRatio,e.y*this.devicePixelRatio),this.material.uniforms.viewport.value.copy(ab),this.material.uniforms.basisViewport.value.set(2/ab.x,2/ab.y),this.material.uniforms.focal.value.set(a,i),this.material.uniforms.orthoZoom.value=o,this.material.uniformsNeedUpdate=!0)}getSplatDataTextures(){return this.splatDataTextures}getSplatCount(){return this.splatCount}getCenters(){return this.centers}getColors(){return this.colors}getCovariances(){return this.covariances}dispose(){this.geometry.dispose(),this.material.dispose(),this.splatDataTextures&&(this.splatDataTextures.covariances.texture.dispose(),this.splatDataTextures.centerColors.texture.dispose(),this.splatDataTextures.meshMatrixWorlds.texture.dispose())}},tg=class{constructor(e={}){Ui(this,"updateSplatMeshUniforms",function(){let a=new z$2;return function(){this.splatMesh!==null&&this.splatMesh.getSplatCount()>0&&(this.renderer.getSize(a),this.cameraFocalLengthX=this.camera.projectionMatrix.elements[0]*this.devicePixelRatio*a.x*.45,this.cameraFocalLengthY=this.camera.projectionMatrix.elements[5]*this.devicePixelRatio*a.y*.45,this.splatMesh.updateUniforms(a,this.cameraFocalLengthX,this.cameraFocalLengthY,this.camera.isPerspectiveCamera?-1:this.camera.zoom*this.devicePixelRatio))}}()),Ui(this,"updateView",function(){let a=new ce$1,i=[],o=new _(0,0,-1),c=new _(0,0,-1),d=new _,g=new _;return function(b=!1){let j=this.updateMatrixWorldsInWorkerIfNeeded(),$=this.cropsChanged();if(!b){c.set(0,0,-1).applyQuaternion(this.camera.quaternion);let _e=!1,st=!1;if(c.dot(o)<=.95&&(_e=!0),g.copy(this.camera.position).sub(d).length()>=1&&(st=!0),!_e&&!st&&!j&&!$)return}d.copy(this.camera.position),o.copy(c),a.copy(this.camera.matrixWorld).invert(),a.premultiply(this.camera.perspCamera.projectionMatrix),i[0]=this.camera.position.x,i[1]=this.camera.position.y,i[2]=this.camera.position.z;let rt={sort:{view:a.elements,cameraPosition:i,splatRenderCount:this.splatRenderCount,splatSortCount:this.splatRenderCount},...j?{newMatrixWorlds:this.meshMatrixWorlds}:{},...$?{newCropsArray:this.cropsArray}:{}};this.sortRunning?this.queuedMessage=rt:(this.queuedMessage=null,this.sortRunning=!0,this.sortWorker.postMessage(rt))}}()),this.scene=e.scene,this.currentPage=null,this.renderer=e.renderer,this.devicePixelRatio=window.devicePixelRatio,this.sortWorker=null,this.splatRenderCount=0,this.splatSortCount=0,this.splatMesh=null,this.sortRunning=!1,this.splatRenderingInitialized=!1,this.meshMatrixWorlds=null,this.meshMatrixWorldsOld=null,this.cropsArray=null,this.splatEntries=null,this.queuedMessage=null}get camera(){return this.scene.activeCamera}reloadSplats(){this.splatRenderingInitialized=!1;let e=this.loadSplat();this.renderer.pipeline.opaquePass.splatViewer=e?this:null}loadSplat(e={}){this.activePage=this.scene.activePage,e.position&&(e.position=new _().fromArray(e.position)),e.orientation&&(e.orientation=new Qe().fromArray(e.orientation)),e.halfPrecisionCovariances=!!e.halfPrecisionCovariances;let a=[];if(this.splatEntries=a,this.activePage.traverseEntity(d=>{if(d.data.type==="Splat"){let g=d.visible;d.traverseAncestors(b=>{g&&(g=b.visible)}),g&&a.push(d)}}),this.splatMesh&&this.splatMesh.dispose(),a.length===0)return this.splatMesh=null,!1;this.meshMatrixWorlds=a.map(d=>d.matrixWorld),this.meshMatrixWorldsOld=a.map(d=>d.matrixWorld.clone()),this.cropsArray=a.map(d=>d.data.crops.map(g=>g.data));let i=a.map(d=>new oc(new Uint8Array(d.data.buffer).buffer)),o=0,c=[0];for(let d of i)o+=d.getSplatCount(),c.push(o);return this.setupSplatMesh(i,o,e.position,e.orientation,e.halfPrecisionCovariances,this.devicePixelRatio,c,this.meshMatrixWorlds),this.setupSortWorker(o),!0}updateMatrixWorldsInWorkerIfNeeded(){let e=this.splatDataTextures.meshMatrixWorlds.data;for(let a=0;a<this.meshMatrixWorlds.length;a++)e.set(this.meshMatrixWorlds[a].elements,a*16);return this.splatDataTextures.meshMatrixWorlds.texture.needsUpdate=!0,this.meshMatrixWorlds.every((a,i)=>a.equals(this.meshMatrixWorldsOld[i]))?!1:(this.meshMatrixWorldsOld=this.meshMatrixWorlds.map(a=>a.clone()),!0)}cropsChanged(){let e=!1;return this.splatEntries.forEach((a,i)=>{var o;a.data.crops.forEach((c,d)=>{this.cropsArray[i][d]===void 0?(e=!0,this.cropsArray[i][d]=c.data):Object.entries(c.data).forEach(([g,b])=>{var j;Array.isArray(b)&&b.some(($,rt)=>$!==this.cropsArray[i][d][g][rt])?(e=!0,this.cropsArray[i][d][g]=b):b!==((j=this.cropsArray[i][d])==null?void 0:j[g])&&(e=!0,this.cropsArray[i][d][g]=b)})}),a.data.crops.length!==((o=this.cropsArray[i])==null?void 0:o.length)&&(this.cropsArray[i].length=a.data.crops.length,e=!0)}),e}setupSplatMesh(e,a,i=new _,o=new Qe,c=!1,d=1,g,b){this.splatMesh=ac.buildMesh(e,a,c,d,g,b),this.splatMesh.position.copy(i),this.splatMesh.quaternion.copy(o),this.splatMesh.frustumCulled=!1,this.splatMesh.renderOrder=10,this.updateSplatMeshUniforms(),this.splatRenderCount=a}setupSortWorker(e){this.sortWorker=rB(e),this.sortWorker.onmessage=a=>{var i;a.data.sortDone?(this.sortRunning=!1,(i=this.splatMesh)==null||i.updateIndexes(new Uint32Array(a.data.indexesBuffer)),this.lastSortTime=a.data.sortTime,this.queuedMessage&&(this.sortWorker.postMessage(this.queuedMessage),this.queuedMessage=null)):a.data.sortCanceled?this.sortRunning=!1:a.data.sortSetupPhase1Complete?this.sortWorker.postMessage({positions:this.splatMesh.getCenters().buffer,meshMatrixWorlds:this.splatMesh.meshMatrixWorlds,meshIndexIntervals:this.splatMesh.meshIndexIntervals,cropsArray:this.cropsArray}):a.data.sortSetupComplete&&(this.splatDataTextures=this.splatMesh.getSplatDataTextures(),this.updateView(!0,!0),this.splatRenderingInitialized=!0)}}update(){this.splatRenderingInitialized!==!1&&(this.updateSplatMeshUniforms(),this.updateView())}getSplatMesh(){return this.splatMesh}},Vx=new ts;Vx.wireframe=!0;var nB=new _,$l=class extends Pi{constructor(e,a){super(),this.data=e,this.sharedAssets=a,this.enableHelpers=!1,this.wireframeState=!1,this.needsTransmissionDirty=!0,this.needsNormalDirty=!0,this._needsTransmission=!1,this._needsNormal=!1,this.geometryCacheChanged=!1,this.splatViewer=null,this.entityByUuid={},this.entityIdentityToEntity={},this.toExpandCloner=new Set,this.toUpdateCloner=new Set,this.pendingCommands=[],this.pathConstraints=new ib,this.invisibleObjects=new Ls("jflkdsafjasdifjaslk",{...a0.defaultData,visible:!1,name:"buildin invisible"}),this.needsRecomputeInstances=!1,this.init(e,a),this.matrixAutoUpdate=!1,this.errorPage=new mr("fdasfa",{...Ca.defaultData,name:""},{shared:a,scene:this})}markGeometryCacheDirty(){this.geometryCacheChanged=!0}markNeedsUpdateRendererDirty(){this.needsTransmissionDirty=!0,this.needsNormalDirty=!0}needsTransmission(){return this.needsTransmissionDirty&&(this._needsTransmission=EL(this),this.needsTransmissionDirty=!1),this._needsTransmission}needsNormal(){return this.needsNormalDirty&&(this._needsNormal=_L(this),this.needsNormalDirty=!1),this._needsNormal}registerInstanceAndSetUuid(e){let a=e.identity.join("-"),i=this.entityIdentityToEntity[a];i&&(e.uuid=i.uuid),this.entityIdentityToEntity[a]=e,this.entityByUuid[e.uuid]=e}markPenumbraSizeDirty(){for(let e of this.children)e instanceof mr&&(e.penumbraSizeArrayCache=null)}findInstance(e){return this.entityIdentityToEntity[e.join("-")]}get bgColor(){return this.activePage.bgColor}get postprocessing(){return this.activePage.data.postprocessing}getWithSortKey(e){let a=this.find(e);if(a===void 0)return;let i=[],o=a;for(;o!==this;){let c=o;o=o.parent;let d=o.children.indexOf(c);i.splice(0,0,d)}return{entity:a,sortKey:i}}getAllSorted(e){let a=[];for(let i of e){let o=this.getWithSortKey(i.id);o!==void 0&&a.push(o)}return a.sort((i,o)=>bv(i.sortKey,o.sortKey)),a.map(i=>i.entity)}nonExistOrDescendantOf(e,a){let i=this.find(e);if(i===void 0)return!0;for(;i;){if(i.uuid===a)return!0;i=i.parent}return!1}find(e){if(this.activePage&&this.activePage.personalCamera.parent){if(e==="f23858d0-4a3b-4bd8-8173-66ed0af7f6fb-personalCamera")return this.activePage.personalCamera;if(e===As)return this.activePage.personalCamera}if(e===""||e===void 0)return;let a=this.entityByUuid[e];return a===void 0?this.getObjectByProperty("uuid",e):a}find2D(e){for(let a of this.children)if(a instanceof mr&&a.uiScene){let i=a.uiScene.find(e);if(i)return i}}findScene2DfromObject2D(e){for(let a of this.children)if(a instanceof mr&&a.uiScene&&a.uiScene.find(e))return a.uiScene}find2DInUIObjects(e){let a;return this.traverseEntity(i=>{a===void 0&&i instanceof _r$1&&(a=i.uiCanvas.find(e))}),a}traverse2D(e){for(let a of this.children)a instanceof mr&&a.uiScene&&a.uiScene.traverse(e)}debugEnsureEntity(e){let a=this.find(e);if(a){if(Array.isArray(a.identity)&&this.findInstance(a.identity)===void 0){console.error("not found instance");debugger}}else{console.error("not found");debugger}}addPendingExpandCloner(e){this.toExpandCloner.add(e)}addPendingUpdateCloner(e){this.toUpdateCloner.add(e)}markToExpandCloner(e){this.toExpandCloner.add(e),e.traverseEntityAncestors(a=>{this.toExpandCloner.add(a)})}doPendingExpandCloner(){this.toExpandCloner.forEach(e=>{e.expandCloner(this)}),this.toExpandCloner.clear()}doPendingUpdateCloner(){this.toUpdateCloner.forEach(e=>{var a;(a=e.cloner)==null||a.update()}),this.toUpdateCloner.clear()}doPendingUpdates(){this.doPendingExpandCloner(),this.doPendingUpdateCloner(),this.applyPendingCommands()}addPendingCommand(e){this.pendingCommands.push(e)}applyPendingCommands(){this.pendingCommands.forEach(e=>e()),this.pendingCommands.length=0}updateByLibOp(e,a){e.path.length===1&&e.path[0]==="components"&&e.type===1&&this.createChildrenObjects([{...e.data.asset,id:e.id}],this.invisibleObjects,a)}updateTreeByOp(e,a){var i;if(e.path.length===0&&e.type===7){let o=e.parent===null?this:this.find(e.parent);if(o===void 0)throw new Error("unexpected");let c=this.createObject(e.id,e.data,e.children,o,e.localIndex,a);c.updateVisible(this),c.resetBBoxNeedsUpdate(),mn(c)&&Rn(c.parent)&&(c.invalidateUpstreamBooleanData(),c.parent.invalidateDownstreamBooleanData().recomputeBoolean()),this.markNeedsRecomputeInstancesForAncessors(o),this.markNeedsRecomputeInstancesForChildren(c),this.markToExpandCloner(c),this.markPenumbraSizeDirty(),c.updatePathSnapping()}else if(e.path.length===0&&e.type===8){let o=this.find(e.id);if(o===void 0)throw new Error("unexpected");this.markToExpandCloner(o),o.resetBBoxNeedsUpdate(),this.unregisterObject(o);let c=o.parent;this.markNeedsRecomputeInstancesForAncessors(c),this.markNeedsRecomputeInstancesForChildren(o),this.markPenumbraSizeDirty(),o.parent.remove(o),Rn(o.parent)&&(o.parent.invalidateUpstreamBooleanData(),o.parent.invalidateDownstreamBooleanData().recomputeBoolean()),mn(o)&&(o.freeBooleanPointer(),c instanceof qn&&c.invalidateDownstreamBooleanData().recomputeBoolean()),o instanceof ic&&o.detachShape(),this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(o),this.pathConstraints.removeDependencies(o.uuid),o.updatePathSnapping()}else if(e.path.length===0&&e.type===9){let o=this.find(e.id);if(o===void 0)throw new Error("unexpected");this.markNeedsRecomputeInstancesForChildren(o);let c=o.parent;this.markNeedsRecomputeInstancesForAncessors(c),(i=o.cloner)==null||i.resetOnMove(),this.markToExpandCloner(o);let d=e.parent===null?this:this.find(e.parent);if(d===void 0)throw new Error("unexpected");d.add(o),this.markNeedsRecomputeInstancesForAncessors(d),this.markToExpandCloner(o),o.invalidateClonerTransform(o),o.updateVisible(this),o.resetBBoxNeedsUpdate(),this.markPenumbraSizeDirty();let g=e.localIndex;d.children.splice(g,0,d.children.pop()),mn(o)&&(o.invalidateUpstreamBooleanData(),Rn(o.parent)?o.parent.invalidateDownstreamBooleanData().recomputeBoolean():c instanceof qn&&c.invalidateDownstreamBooleanData().recomputeBoolean()),o.updatePathSnapping()}this.markNeedsUpdateRendererDirty(),this.markGeometryCacheDirty()}get playPage(){return this.find(this.data.publish.playPage)??this.errorPage}updatePage(e){var a;this.activePage&&this.activePage.onDeactive(),this.activePage=this.errorPage;for(let i of this.children)i instanceof mr&&(i.visible=i.uuid===e,i.visible&&(this.activePage=i,this.activePage.onActive(this)));this.activePage!==((a=this.splatViewer)==null?void 0:a.activePage)&&this.reloadSplats()}updateEntityByOp(e,a,i,o){if(a.type===0){if(("overrides"in a.props||"component"in a.props)&&this.markNeedsRecomputeInstances(),"visible"in a.props&&this.markPenumbraSizeDirty(),a.path.includes("overrides")&&"states"in a.props){let{rest:d}=a.props;a={...a,props:d},this.markNeedsRecomputeInstances()}a.path[0]==="pathSnapping"&&a.props.pathId!==void 0&&this.pathConstraints.setConstraint(e,a.props.pathId)}let c=this.find(e);if(c)try{SL(c,a,i,{scene:this,shared:o}),c instanceof ur&&c.updateGeometryGroupsIfNeeded()}catch(d){console.error(d)}}updateEntity2DByOp(e,a,i,o,c,d=[]){e.updateEntityByOp(a,i,o,c),this.traverseEntity(g=>{(g instanceof _r$1||g instanceof mr)&&(d.includes(g.frameId??"")||g.frameId===a)&&g.updateEntity2DByOp(a,i,o,c)})}get activeCamera(){return this.activePage.activeCamera}switchActiveCamera(e){this.activePage.switchActiveCamera(e)}isInvisibleObjects(e){return e===this.invisibleObjects||e.hasAnccestor(this.invisibleObjects)}init(e,a){let i=Object.entries(a.data.lib.components).map((o,c)=>({data:o[1].asset.data,children:o[1].asset.children,id:o[0],fi:c}));this.invisibleObjects.updateState(this.invisibleObjects.data,{scene:this,shared:a}),this.add(this.invisibleObjects),this.createChildrenObjects(i,this.invisibleObjects,a),this.createChildrenObjects(e.objects,this,a),this.updatePage(e.publish.playPage),this.activePage.switchToPlayCamera(),this.expandInstances(a,!0),this.traverseEntity(o=>{o instanceof wr$1&&o.updateUp()}),this.doPendingExpandCloner(),this.applyPendingCommands()}markNeedsRecomputeInstances(){this.needsRecomputeInstances=!0}markNeedsRecomputeInstancesForChildren(e){e.traverseEntity(a=>{(a.data.type==="Component"||a.data.type==="Instance")&&this.markNeedsRecomputeInstances()})}markNeedsRecomputeInstancesForAncessors(e){vt.is(e)&&(e.data.type==="Component"&&this.markNeedsRecomputeInstances(),e.traverseAncestors(a=>{vt.is(a)&&a.data.type==="Component"&&this.markNeedsRecomputeInstances()}))}relativeizeInner(e,a,i,o,c,d,g){if(e){let b=o.find(e);b&&b!==o&&c.forInstancesRec(j=>{j.data=Tl(j.data,$=>{let rt=$.events.data(g.id),_e=j.goUp(d);if(_e){let st=[...xv(_e.identity),e].join("-"),ut=this.entityIdentityToEntity[st];if(ut){let gt=ut.uuid,yt=Nr$1.zoom(rt,a);yt[i]=gt}else console.warn("cannot find instance")}}).data})}}rewriteActions(e,a,i,o,c,d){e.forEach(g=>{g.data.type==="Transition"?this.relativeizeInner(g.data.object,[...a,g.id],"object",i,o,c,d):g.data.type==="Animation"&&this.relativeizeInner(g.data.object,[...a,g.id],"object",i,o,c,d)})}rewriteEventsBeforeGoToPlayMode(){this.traverseEntity(e=>{if(e instanceof uo&&typeof e.identity=="string"&&e.data.type==="Component")return e.traverseEntity((a,i)=>{a.data.events.forEach(o=>{if(o.data.type==="GameControl"){let c=!1;if(a.forInstancesRec(d=>{d.data=Tl(d.data,g=>{d.isInstanceRoot||(g.events.delete(o.id),c=!0)}).data}),c===!1)for(let d of ld.list)this.rewriteActions(o.data.gameActions[d],["gameActions",d],e,a,i,o)}else o.data.type==="Conditional"?(o.data.condition.type==="Distance"?(this.relativeizeInner(o.data.condition.fromObject,["condition"],"fromObject",e,a,i,o),this.relativeizeInner(o.data.condition.toObject,["condition"],"toObject",e,a,i,o)):o.data.condition.type==="State"?this.relativeizeInner(o.data.condition.object,["condition"],"object",e,a,i,o):o.data.condition.type==="Comparison"&&(o.data.condition.lOperand.type==="Property"&&this.relativeizeInner(o.data.condition.lOperand.value[0],["condition","lOperand","value"],0,e,a,i,o),o.data.condition.rOperand.type==="Property"&&this.relativeizeInner(o.data.condition.rOperand.value[0],["condition","rOperand","value"],0,e,a,i,o)),this.rewriteActions(o.data.inActions,["inActions"],e,a,i,o),this.rewriteActions(o.data.outActions,["outActions"],e,a,i,o)):"actions"in o.data&&this.rewriteActions(o.data.actions,["actions"],e,a,i,o)})}),!0})}expandInstances(e,a,i){let o=new Set;this.traverseEntity(c=>{if(c instanceof uo&&c.isInstanceRoot)return c.expandInstanceChildren({scene:this,shared:e,pendingDeletes:o}),a||c.resetBBoxNeedsUpdate(),i&&c.traverseEntity(d=>{i.addClip(d)}),!0});for(let c of o)this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(c),Qx(c)}recomputeInstances(e,a){this.needsRecomputeInstances&&(this.needsRecomputeInstances=!1,this.traverseEntity(i=>{i instanceof uo&&i.isInstanceRoot&&(i.component=void 0)}),this.expandInstances(e,!1,a))}disposeAndUnregisterEntityRecursivelyIfNotReregistered(e){e.traverseEntity(a=>{let i=typeof a.identity=="string"?a.identity:a.identity.join("-");this.entityIdentityToEntity[i]===a&&(delete this.entityByUuid[a.uuid],delete this.entityIdentityToEntity[i]),a.dispose()})}clearScene(){for(let e of this.children)vt.is(e)&&e.disposeRecursively();this.children.length=0}resetAfterClear(e,a){this.init(e,a)}raycast(e){return this.raycast1(e,!1)}raycast1(e,a){let i=[],o=c=>{for(let d of c.children){let g=d.cloner;if(vt.is(d)&&!d.raycastLock&&(d.visible||g!=null&&g.object.data.visible))if(a===!0&&d.isInstanceRoot){let b=[];if(e.intersectObject(d,!0,b),b.length){let j=b[0];j.object=d,j.point.applyMatrix4(j.object.matrixWorld);let $=d.matrixWorld.clone().invert();j.point.applyMatrix4($),i.push(j)}}else(mn(d)||Wm(d)&&this.enableHelpers&&d.objectHelper.visible)&&(e.intersectObject(d,!1,i),eg(d,e,i)),o(d)}};return o(this.activePage),i}raycastWithClones(e){let a=[],i=o=>{for(let c of o.children){let d=c.cloner;vt.is(c)&&(c.visible||d!=null&&d.object.data.visible)&&((mn(c)||Wm(c)&&this.enableHelpers&&c.objectHelper.visible)&&(e.intersectObject(c,!1,a),eg(c,e,a,!0)),i(c))}};return i(this),a}forEachEntity(e){for(let a of this.children)vt.is(a)&&e(a)}traverseConcreteEntity(e){for(let a of this.children)vt.is(a)&&a.isConcreteEntity&&a.traverseEntity(e)}traverseEntity(e){for(let a of this.children)vt.is(a)&&a.traverseEntity(e)}updateFont(e,a){this.traverseEntity(i=>{if(i instanceof ur&&i.data.type==="Mesh"&&i.data.geometry.type==="TextGeometry"&&i.data.geometry.font===e){let o=i.geometry,c=i.data.geometry;o.updateFont(e,a).then(()=>{o.update(c);let d=i.invalidateDownstreamBooleanData();Rn(d)&&d.recomputeBoolean()})}})}traverseObject(e){for(let a of this.children)Td.is(a)&&a.traverseObject(e)}traverseVisibleEntity(e){for(let a of this.children)vt.is(a)&&a.visible&&a.traverseVisibleEntity(e)}dispose(){this.clearScene()}createChildrenObjects(e,a,i){let o=0;for(let c of e)this.createObject(c.id,c.data,c.children,a,o,i),o+=1}registerObjectCreatedInLegacy(e){this.entityByUuid[e.uuid]=e}unregisterObject(e){delete this.entityByUuid[e.uuid];for(let a of e.children)this.unregisterObject(a)}createObject(e,a,i,o,c,d){var j;let g={scene:this,shared:d},b=rb(e,a,g);return b&&(this.entityByUuid[e]=b,o.add(b),o.children.splice(c,0,o.children.pop()),i.length>0&&(b.isInstanceRoot?console.error("instance should not have children!"):this.createChildrenObjects(i,b,d)),b.updateState(a,g),b instanceof ur&&b.updateGeometryGroupsIfNeeded(),b.updateVisible(this),b.cloner&&this.toExpandCloner.add(b),(j=a.pathSnapping)!=null&&j.pathId&&this.pathConstraints.setConstraint(e,a.pathSnapping.pathId)),a.type==="Empty"&&a.animations&&b.traverseEntity($=>{let rt=$.dataPatched;if($ instanceof ur&&rt.bones&&rt.boneInverses){let _e=rt.bones.map(gt=>this.find(gt)),st=rt.boneInverses.map(gt=>new ce$1().fromArray(gt)),ut=new ul(_e,st);$.bind(ut,$.bindMatrix)}else $.matrixAutoUpdate=!0}),b}getCenter(e){let a=[];for(let o=0,c=e.length;o<c;++o){let{id:d,recursive:g}=e[o],b=this.find(d),j=g?b.recursiveBBox:b.singleBBox;a.push(...j.vertices)}let i=new Wt;return i.setFromPoints(a),i.getCenter(nB),nB}copyMatrixWorld(e,a){if(e===null){a.identity();return}let i=this.find(e);i?a.copy(i.matrixWorld):a.identity()}copyParentMatrixWorld(e,a){var o;if(e===null){a.identity();return}let i=(o=this.find(e))==null?void 0:o.parent;i?a.copy(i.matrixWorld):a.identity()}traverseMaterial(e){this.traverseEntity(a=>{if(a instanceof pr)if(Array.isArray(a.material))for(let i=0;i<a.material.length;i++)a.material[i]instanceof Wn&&e(a.material[i]);else a.material instanceof Wn&&e(a.material)})}updateViewPlaneSize(e,a,i=!1){this.traverseConcreteEntity(o=>{o instanceof wr$1&&o.setViewplaneSize(e,a,i)})}initializeSplatViewer(e){this.splatViewer=new tg({scene:this,renderer:e}),this.reloadSplats()}reloadSplats(){var e;(e=this.splatViewer)==null||e.reloadSplats()}},rg=(e,a)=>{let i=a.x-e.x,o=a.y-e.y;return Math.sqrt(i*i+o*o)},sB=(e,a)=>{let i=a.x-e.x,o=a.y-e.y;return kK(Math.atan2(o,i))},oB=(e,a,i)=>{let o={x:0,y:0};return i=lb(i),o.x=e.x-a*Math.cos(i),o.y=e.y-a*Math.sin(i),o},lb=e=>e*(Math.PI/180),kK=e=>e*(180/Math.PI),aB=e=>isNaN(e.buttons)?e.pressure!==0:e.buttons!==0,aE=new Map,lE=e=>{aE.has(e)&&clearTimeout(aE.get(e)),aE.set(e,setTimeout(e,100))},jf=(e,a,i)=>{let o=a.split(/[ ,]+/g),c;for(let d=0;d<o.length;d+=1)c=o[d],e.addEventListener?e.addEventListener(c,i,!1):e.attachEvent&&e.attachEvent(c,i)},cE=(e,a,i)=>{let o=a.split(/[ ,]+/g),c;for(let d=0;d<o.length;d+=1)c=o[d],e.removeEventListener?e.removeEventListener(c,i):e.detachEvent&&e.detachEvent(c,i)},cb=e=>(e.preventDefault(),e.type.match(/^touch/)?e.changedTouches:e),uE=()=>{if(typeof window>"u")return;let e=window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,a=window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;return{x:e,y:a}},ub=(e,a)=>{a.top||a.right||a.bottom||a.left?(e.style.top=a.top,e.style.right=a.right,e.style.bottom=a.bottom,e.style.left=a.left):(e.style.left=a.x+"px",e.style.top=a.y+"px")},hb=(e,a,i)=>{let o=cB(e);for(let c in o)if(o.hasOwnProperty(c))if(typeof a=="string")o[c]=a+" "+i;else{let d="";for(let g=0,b=a.length;g<b;g+=1)d+=a[g]+" "+i+", ";o[c]=d.slice(0,-2)}return o},lB=(e,a)=>{let i=cB(e);for(let o in i)i.hasOwnProperty(o)&&(i[o]=a);return i},cB=e=>{let a={};return a[e]="",["webkit","Moz","o"].forEach(function(i){a[i+e.charAt(0).toUpperCase()+e.slice(1)]=""}),a},db=(e,a)=>{for(let i in a)a.hasOwnProperty(i)&&(e[i]=a[i]);return e},uB=(e,a)=>{let i={};for(let o in e)e.hasOwnProperty(o)&&a.hasOwnProperty(o)?i[o]=a[o]:e.hasOwnProperty(o)&&(i[o]=e[o]);return i},ig=(e,a)=>{if(e.length)for(let i=0,o=e.length;i<o;i+=1)a(e[i]);else a(e)},hB=(e,a,i)=>({x:Math.min(Math.max(e.x,a.x-i),a.x+i),y:Math.min(Math.max(e.y,a.y-i),a.y+i)});typeof window<"u"&&(dB="ontouchstart"in window,fB=!!window.PointerEvent,pB=!!window.MSPointerEvent);var dB,fB,pB,ng={touch:{start:"touchstart",move:"touchmove",end:"touchend, touchcancel"},mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup, pointercancel"},MSPointer:{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}},Hf,sg={};fB?Hf=ng.pointer:pB?Hf=ng.MSPointer:dB?(Hf=ng.touch,sg=ng.mouse):Hf=ng.mouse;function pu(){}pu.prototype.on=function(e,a){var i=this,o=e.split(/[ ,]+/g),c;i._handlers_=i._handlers_||{};for(var d=0;d<o.length;d+=1)c=o[d],i._handlers_[c]=i._handlers_[c]||[],i._handlers_[c].push(a);return i};pu.prototype.off=function(e,a){var i=this;return i._handlers_=i._handlers_||{},e===void 0?i._handlers_={}:a===void 0?i._handlers_[e]=null:i._handlers_[e]&&i._handlers_[e].indexOf(a)>=0&&i._handlers_[e].splice(i._handlers_[e].indexOf(a),1),i};pu.prototype.trigger=function(e,a){var i=this,o=e.split(/[ ,]+/g),c;i._handlers_=i._handlers_||{};for(var d=0;d<o.length;d+=1)c=o[d],i._handlers_[c]&&i._handlers_[c].length&&i._handlers_[c].forEach(function(g){g.call(i,{type:c,target:i},a)})};pu.prototype.config=function(e){var a=this;a.options=a.defaults||{},e&&(a.options=uB(a.options,e))};pu.prototype.bindEvt=function(e,a){var i=this;return i._domHandlers_=i._domHandlers_||{},i._domHandlers_[a]=function(){typeof i["on"+a]=="function"?i["on"+a].apply(i,arguments):console.warn('[WARNING] : Missing "on'+a+'" handler.')},jf(e,Hf[a],i._domHandlers_[a]),sg[a]&&jf(e,sg[a],i._domHandlers_[a]),i};pu.prototype.unbindEvt=function(e,a){var i=this;return i._domHandlers_=i._domHandlers_||{},cE(e,Hf[a],i._domHandlers_[a]),sg[a]&&cE(e,sg[a],i._domHandlers_[a]),delete i._domHandlers_[a],this};var Wf=pu;function Fi(e,a){return this.identifier=a.identifier,this.position=a.position,this.frontPosition=a.frontPosition,this.collection=e,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,mode:"dynamic",zone:document.body,lockX:!1,lockY:!1,shape:"circle"},this.config(a),this.options.mode==="dynamic"&&(this.options.restOpacity=0),this.id=Fi.id,Fi.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),setPosition:this.setPosition.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}Fi.prototype=new Wf;Fi.constructor=Fi;Fi.id=0;Fi.prototype.buildEl=function(e){return this.ui={},this.options.dataOnly?this:(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front),this)};Fi.prototype.stylize=function(){if(this.options.dataOnly)return this;var e=this.options.fadeTime+"ms",a=lB("borderRadius","50%"),i=hb("transition","opacity",e),o={};return o.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},o.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:"rgba(255, 255, 255, .4)",border:"solid 2px rgba(0, 0, 0, .1)"},o.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:"rgba(255, 255, 255, .8)",border:"solid 2px rgba(0, 0, 0, .1)"},db(o.el,i),this.options.shape==="circle"&&db(o.back,a),db(o.front,a),this.applyStyles(o),this};Fi.prototype.applyStyles=function(e){for(var a in this.ui)if(this.ui.hasOwnProperty(a))for(var i in e[a])this.ui[a].style[i]=e[a][i];return this};Fi.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)?this:(this.options.zone.appendChild(this.ui.el),this)};Fi.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)?this:(this.options.zone.removeChild(this.ui.el),this)};Fi.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()};Fi.prototype.show=function(e){var a=this;return a.options.dataOnly||(clearTimeout(a.removeTimeout),clearTimeout(a.showTimeout),clearTimeout(a.restTimeout),a.addToDom(),a.restCallback(),setTimeout(function(){a.ui.el.style.opacity=1},0),a.showTimeout=setTimeout(function(){a.trigger("shown",a.instance),typeof e=="function"&&e.call(this)},a.options.fadeTime)),a};Fi.prototype.hide=function(e){var a=this;if(a.options.dataOnly)return a;if(a.ui.el.style.opacity=a.options.restOpacity,clearTimeout(a.removeTimeout),clearTimeout(a.showTimeout),clearTimeout(a.restTimeout),a.removeTimeout=setTimeout(function(){var i=a.options.mode==="dynamic"?"none":"block";a.ui.el.style.display=i,typeof e=="function"&&e.call(a),a.trigger("hidden",a.instance)},a.options.fadeTime),a.options.restJoystick){let i=a.options.restJoystick,o={};o.x=i===!0||i.x!==!1?0:a.instance.frontPosition.x,o.y=i===!0||i.y!==!1?0:a.instance.frontPosition.y,a.setPosition(e,o)}return a};Fi.prototype.setPosition=function(e,a){var i=this;i.frontPosition={x:a.x,y:a.y};var o=i.options.fadeTime+"ms",c={};c.front=hb("transition",["top","left"],o);var d={front:{}};d.front={left:i.frontPosition.x+"px",top:i.frontPosition.y+"px"},i.applyStyles(c),i.applyStyles(d),i.restTimeout=setTimeout(function(){typeof e=="function"&&e.call(i),i.restCallback()},i.options.fadeTime)};Fi.prototype.restCallback=function(){var e=this,a={};a.front=hb("transition","none",""),e.applyStyles(a),e.trigger("rested",e.instance)};Fi.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}};Fi.prototype.computeDirection=function(e){var a=e.angle.radian,i=Math.PI/4,o=Math.PI/2,c,d,g;if(a>i&&a<i*3&&!e.lockX?c="up":a>-i&&a<=i&&!e.lockY?c="left":a>-i*3&&a<=-i&&!e.lockX?c="down":e.lockY||(c="right"),e.lockY||(a>-o&&a<o?d="left":d="right"),e.lockX||(a>0?g="up":g="down"),e.force>this.options.threshold){var b={},j;for(j in this.direction)this.direction.hasOwnProperty(j)&&(b[j]=this.direction[j]);var $={};this.direction={x:d,y:g,angle:c},e.direction=this.direction;for(j in b)b[j]===this.direction[j]&&($[j]=!0);if($.x&&$.y&&$.angle)return e;(!$.x||!$.y)&&this.trigger("plain",e),$.x||this.trigger("plain:"+d,e),$.y||this.trigger("plain:"+g,e),$.angle||this.trigger("dir dir:"+c,e)}else this.resetDirection();return e};var mB=Fi;function ci(e,a){var i=this;i.nipples=[],i.idles=[],i.actives=[],i.ids=[],i.pressureIntervals={},i.manager=e,i.id=ci.id,ci.id+=1,i.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,lockX:!1,lockY:!1,shape:"circle",dynamicPage:!1,follow:!1},i.config(a),(i.options.mode==="static"||i.options.mode==="semi")&&(i.options.multitouch=!1),i.options.multitouch||(i.options.maxNumberOfNipples=1);let o=getComputedStyle(i.options.zone.parentElement);return o&&o.display==="flex"&&(i.parentIsFlex=!0),i.updateBox(),i.prepareNipples(),i.bindings(),i.begin(),i.nipples}ci.prototype=new Wf;ci.constructor=ci;ci.id=0;ci.prototype.prepareNipples=function(){var e=this,a=e.nipples;a.on=e.on.bind(e),a.off=e.off.bind(e),a.options=e.options,a.destroy=e.destroy.bind(e),a.ids=e.ids,a.id=e.id,a.processOnMove=e.processOnMove.bind(e),a.processOnEnd=e.processOnEnd.bind(e),a.get=function(i){if(i===void 0)return a[0];for(var o=0,c=a.length;o<c;o+=1)if(a[o].identifier===i)return a[o];return!1}};ci.prototype.bindings=function(){var e=this;e.bindEvt(e.options.zone,"start"),e.options.zone.style.touchAction="none",e.options.zone.style.msTouchAction="none"};ci.prototype.begin=function(){var e=this,a=e.options;if(a.mode==="static"){var i=e.createNipple(a.position,e.manager.getIdentifier());i.add(),e.idles.push(i)}};ci.prototype.createNipple=function(e,a){var i=this,o=i.manager.scroll,c={},d=i.options,g={x:i.parentIsFlex?o.x:o.x+i.box.left,y:i.parentIsFlex?o.y:o.y+i.box.top};if(e.x&&e.y)c={x:e.x-g.x,y:e.y-g.y};else if(e.top||e.right||e.bottom||e.left){var b=document.createElement("DIV");b.style.display="hidden",b.style.top=e.top,b.style.right=e.right,b.style.bottom=e.bottom,b.style.left=e.left,b.style.position="absolute",d.zone.appendChild(b);var j=b.getBoundingClientRect();d.zone.removeChild(b),c=e,e={x:j.left+o.x,y:j.top+o.y}}var $=new mB(i,{color:d.color,size:d.size,threshold:d.threshold,fadeTime:d.fadeTime,dataOnly:d.dataOnly,restJoystick:d.restJoystick,restOpacity:d.restOpacity,mode:d.mode,identifier:a,position:e,zone:d.zone,frontPosition:{x:0,y:0},shape:d.shape});return d.dataOnly||(ub($.ui.el,c),ub($.ui.front,$.frontPosition)),i.nipples.push($),i.trigger("added "+$.identifier+":added",$),i.manager.trigger("added "+$.identifier+":added",$),i.bindNipple($),$};ci.prototype.updateBox=function(){var e=this;e.box=e.options.zone.getBoundingClientRect()};ci.prototype.bindNipple=function(e){var a=this,i,o=function(c,d){i=c.type+" "+d.id+":"+c.type,a.trigger(i,d)};e.on("destroyed",a.onDestroyed.bind(a)),e.on("shown hidden rested dir plain",o),e.on("dir:up dir:right dir:down dir:left",o),e.on("plain:up plain:right plain:down plain:left",o)};ci.prototype.pressureFn=function(e,a,i){var o=this,c=0;clearInterval(o.pressureIntervals[i]),o.pressureIntervals[i]=setInterval((function(){var d=e.force||e.pressure||e.webkitForce||0;d!==c&&(a.trigger("pressure",d),o.trigger("pressure "+a.identifier+":pressure",d),c=d)}).bind(o),100)};ci.prototype.onstart=function(e){var a=this,i=a.options,o=e;e=cb(e),a.updateBox();var c=function(d){a.actives.length<i.maxNumberOfNipples?a.processOnStart(d):o.type.match(/^touch/)&&(Object.keys(a.manager.ids).forEach(function(g){if(Object.values(o.touches).findIndex(function(j){return j.identifier===g})<0){var b=[e[0]];b.identifier=g,a.processOnEnd(b)}}),a.actives.length<i.maxNumberOfNipples&&a.processOnStart(d))};return ig(e,c),a.manager.bindDocument(),!1};ci.prototype.processOnStart=function(e){var a=this,i=a.options,o,c=a.manager.getIdentifier(e),d=e.force||e.pressure||e.webkitForce||0,g={x:e.pageX,y:e.pageY},b=a.getOrCreate(c,g);b.identifier!==c&&a.manager.removeIdentifier(b.identifier),b.identifier=c;var j=function(rt){rt.trigger("start",rt),a.trigger("start "+rt.id+":start",rt),rt.show(),d>0&&a.pressureFn(e,rt,rt.identifier),a.processOnMove(e)};if((o=a.idles.indexOf(b))>=0&&a.idles.splice(o,1),a.actives.push(b),a.ids.push(b.identifier),i.mode!=="semi")j(b);else{var $=rg(g,b.position);if($<=i.catchDistance)j(b);else{b.destroy(),a.processOnStart(e);return}}return b};ci.prototype.getOrCreate=function(e,a){var i=this,o=i.options,c;return/(semi|static)/.test(o.mode)?(c=i.idles[0],c?(i.idles.splice(0,1),c):o.mode==="semi"?i.createNipple(a,e):(console.warn("Coudln't find the needed nipple."),!1)):(c=i.createNipple(a,e),c)};ci.prototype.processOnMove=function(e){var a=this,i=a.options,o=a.manager.getIdentifier(e),c=a.nipples.get(o),d=a.manager.scroll;if(!aB(e)){this.processOnEnd(e);return}if(!c){console.error("Found zombie joystick with ID "+o),a.manager.removeIdentifier(o);return}if(i.dynamicPage){var g=c.el.getBoundingClientRect();c.position={x:d.x+g.left,y:d.y+g.top}}c.identifier=o;var b=c.options.size/2,j={x:e.pageX,y:e.pageY};i.lockX&&(j.y=c.position.y),i.lockY&&(j.x=c.position.x);var $=rg(j,c.position),rt=sB(j,c.position),_e=lb(rt),st=$/b,ut={distance:$,position:j},gt,yt;if(c.options.shape==="circle"?(gt=Math.min($,b),yt=oB(c.position,gt,rt)):(yt=hB(j,c.position,b),gt=rg(yt,c.position)),i.follow){if($>b){let At=j.x-yt.x,Tt=j.y-yt.y;c.position.x+=At,c.position.y+=Tt,c.el.style.top=c.position.y-(a.box.top+d.y)+"px",c.el.style.left=c.position.x-(a.box.left+d.x)+"px",$=rg(j,c.position)}}else j=yt,$=gt;var Pt=j.x-c.position.x,wt=j.y-c.position.y;c.frontPosition={x:Pt,y:wt},i.dataOnly||ub(c.ui.front,c.frontPosition);var Ct={identifier:c.identifier,position:j,force:st,pressure:e.force||e.pressure||e.webkitForce||0,distance:$,angle:{radian:_e,degree:rt},vector:{x:Pt/b,y:-wt/b},raw:ut,instance:c,lockX:i.lockX,lockY:i.lockY};Ct=c.computeDirection(Ct),Ct.angle={radian:lb(180-rt),degree:180-rt},c.trigger("move",Ct),a.trigger("move "+c.id+":move",Ct)};ci.prototype.processOnEnd=function(e){var a=this,i=a.options,o=a.manager.getIdentifier(e),c=a.nipples.get(o),d=a.manager.removeIdentifier(c.identifier);!c||(i.dataOnly||c.hide(function(){i.mode==="dynamic"&&(c.trigger("removed",c),a.trigger("removed "+c.id+":removed",c),a.manager.trigger("removed "+c.id+":removed",c),c.destroy())}),clearInterval(a.pressureIntervals[c.identifier]),c.resetDirection(),c.trigger("end",c),a.trigger("end "+c.id+":end",c),a.ids.indexOf(c.identifier)>=0&&a.ids.splice(a.ids.indexOf(c.identifier),1),a.actives.indexOf(c)>=0&&a.actives.splice(a.actives.indexOf(c),1),/(semi|static)/.test(i.mode)?a.idles.push(c):a.nipples.indexOf(c)>=0&&a.nipples.splice(a.nipples.indexOf(c),1),a.manager.unbindDocument(),/(semi|static)/.test(i.mode)&&(a.manager.ids[d.id]=d.identifier))};ci.prototype.onDestroyed=function(e,a){var i=this;i.nipples.indexOf(a)>=0&&i.nipples.splice(i.nipples.indexOf(a),1),i.actives.indexOf(a)>=0&&i.actives.splice(i.actives.indexOf(a),1),i.idles.indexOf(a)>=0&&i.idles.splice(i.idles.indexOf(a),1),i.ids.indexOf(a.identifier)>=0&&i.ids.splice(i.ids.indexOf(a.identifier),1),i.manager.removeIdentifier(a.identifier),i.manager.unbindDocument()};ci.prototype.destroy=function(){var e=this;e.unbindEvt(e.options.zone,"start"),e.nipples.forEach(function(i){i.destroy()});for(var a in e.pressureIntervals)e.pressureIntervals.hasOwnProperty(a)&&clearInterval(e.pressureIntervals[a]);e.trigger("destroyed",e.nipples),e.manager.unbindDocument(),e.off()};var gB=ci;function $i(e){var a=this;a.ids={},a.index=0,a.collections=[],a.scroll=uE(),a.config(e),a.prepareCollections();var i=function(){var c;a.collections.forEach(function(d){d.forEach(function(g){c=g.el.getBoundingClientRect(),g.position={x:a.scroll.x+c.left,y:a.scroll.y+c.top}})})};if(typeof window>"u")return a.collections;jf(window,"resize",function(){lE(i)});var o=function(){a.scroll=uE()};return jf(window,"scroll",function(){lE(o)}),a.collections}$i.prototype=new Wf;$i.constructor=$i;$i.prototype.prepareCollections=function(){var e=this;e.collections.create=e.create.bind(e),e.collections.on=e.on.bind(e),e.collections.off=e.off.bind(e),e.collections.destroy=e.destroy.bind(e),e.collections.get=function(a){var i;return e.collections.every(function(o){return i=o.get(a),!i}),i}};$i.prototype.create=function(e){return this.createCollection(e)};$i.prototype.createCollection=function(e){var a=this,i=new gB(a,e);return a.bindCollection(i),a.collections.push(i),i};$i.prototype.bindCollection=function(e){var a=this,i,o=function(c,d){i=c.type+" "+d.id+":"+c.type,a.trigger(i,d)};e.on("destroyed",a.onDestroyed.bind(a)),e.on("shown hidden rested dir plain",o),e.on("dir:up dir:right dir:down dir:left",o),e.on("plain:up plain:right plain:down plain:left",o)};$i.prototype.bindDocument=function(){var e=this;e.binded||(e.bindEvt(document,"move").bindEvt(document,"end"),e.binded=!0)};$i.prototype.unbindDocument=function(e){var a=this;(!Object.keys(a.ids).length||e===!0)&&(a.unbindEvt(document,"move").unbindEvt(document,"end"),a.binded=!1)};$i.prototype.getIdentifier=function(e){var a;return e?(a=e.identifier===void 0?e.pointerId:e.identifier,a===void 0&&(a=this.latest||0)):a=this.index,this.ids[a]===void 0&&(this.ids[a]=this.index,this.index+=1),this.latest=a,this.ids[a]};$i.prototype.removeIdentifier=function(e){var a={};for(var i in this.ids)if(this.ids[i]===e){a.id=i,a.identifier=this.ids[i],delete this.ids[i];break}return a};$i.prototype.onmove=function(e){var a=this;return a.onAny("move",e),!1};$i.prototype.onend=function(e){var a=this;return a.onAny("end",e),!1};$i.prototype.oncancel=function(e){var a=this;return a.onAny("end",e),!1};$i.prototype.onAny=function(e,a){var i=this,o,c="processOn"+e.charAt(0).toUpperCase()+e.slice(1);a=cb(a);var d=function(b,j,$){$.ids.indexOf(j)>=0&&($[c](b),b._found_=!0)},g=function(b){o=i.getIdentifier(b),ig(i.collections,d.bind(null,b,o)),b._found_||i.removeIdentifier(o)};return ig(a,g),!1};$i.prototype.destroy=function(){var e=this;e.unbindDocument(!0),e.ids={},e.index=0,e.collections.forEach(function(a){a.destroy()}),e.off()};$i.prototype.onDestroyed=function(e,a){var i=this;if(i.collections.indexOf(a)<0)return!1;i.collections.splice(i.collections.indexOf(a),1)};var yB=$i,vB=new yB,xB={create:function(e){return vB.create(e)},factory:vB},bB=new Map,og=new Map,ta=class{constructor(e,a,i,o){this.data=a;let{audio:c,volume:d,delay:g,loop:b}=a;if(!c)throw new Error("Missing property");let j=typeof c=="string"?o.getAudio(c).src:c.data;this.audioPlayer=new ja({src:j,volume:d,delay:g,loop:b}),og.has(i.uuid)?og.get(i.uuid).push(this):og.set(i.uuid,[this]),bB.set(e,this)}playByToggle(){this.data.toggle==="stop"?this.audioPlayer.status==="playing"?this.audioPlayer.stop():(this.audioPlayer.stop(),this.audioPlayer.play()):this.data.toggle==="pause"?this.audioPlayer.status==="playing"?this.audioPlayer.pause():this.audioPlayer.play():(this.audioPlayer.stop(),this.audioPlayer.play())}dispose(){this.audioPlayer.stop()}},qf=class{constructor(e){this.data=e}dispatch(){this.data.playAudio?this.pauseAudio(this.data.playAudio):this.data.object?this.pauseAllAudiosFromObject(this.data.object):this.pauseAllAudios()}pauseAudio(e){let a=bB.get(e);!a||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{a.audioPlayer[this.data.interaction](),this.disposeDelay()},this.data.delay)):a.audioPlayer[this.data.interaction]())}pauseAllAudiosFromObject(e){let a=og.get(e);!(a!=null&&a.length)||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{a.forEach(i=>i.audioPlayer[this.data.interaction]()),this.disposeDelay()},this.data.delay)):a.forEach(i=>i.audioPlayer[this.data.interaction]()))}pauseAllAudios(){let e=[...og.values()];!e.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{e.forEach(a=>{a.forEach(i=>{i.audioPlayer[this.data.interaction]()})}),this.disposeDelay()},this.data.delay)):e.forEach(a=>{a.forEach(i=>{i.audioPlayer[this.data.interaction]()})}))}disposeDelay(){clearTimeout(this.timeoutId),delete this.timeoutId}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},ag=class{constructor(e,a,i,o,c){if(this.data=a,this.shared=o,this.condition=c,a.interaction==="play")this.interaction=new ta(e,a,i,o);else if(a.interaction==="pause"||a.interaction==="stop")this.interaction=new qf(a);else throw new Error("Missing property")}dispatchBasic(){if(Ut(this.shared,this.condition)===!1)return!1;this.interaction instanceof ta?this.interaction.playByToggle():this.interaction.dispatch()}dispatchConditional(){if(Ut(this.shared,this.condition)===!1)return!1;this.interaction instanceof ta?this.interaction.audioPlayer.play():this.interaction.dispatch()}dispatchGameControl(e){if(Ut(this.shared,this.condition)===!1)return!1;this.interaction instanceof ta&&(e==="start"?this.interaction.audioPlayer.play():this.interaction.audioPlayer.stop())}dispose(){this.interaction.dispose()}},lg=class{constructor(e,a,i,o){this.data=e,this.page=a,this.shared=i,this.condition=o,this.delay=0,this.emission=e.emission,e.delay!==void 0&&(this.delay=e.delay),this.particleSystem=this.page.scene.find(this.data.emitterObjectId)}toggleEmitting(){this.particleSystem.started&&!this.particleSystem.stopped?this.stop():this.start(this.delay)}toggleFroze(){this.particleSystem.started&&!this.particleSystem.isFrozen?this.freeze():this.unFreeze()}start(e=0){if(e){this.delayTimerId=window.setTimeout(()=>{this.start(0),this.clearDelay()},this.delay);return}this.particleSystem.start()}stop(){this.particleSystem.stop(),this.clearDelay()}freeze(){this.particleSystem.froze(),this.clearDelay()}unFreeze(){this.particleSystem.unFroze(),this.clearDelay()}reset(){this.particleSystem.reset(),this.clearDelay()}reverseFromCurrent(){switch(this.emission){case"emitToggle":this.toggleEmitting();break;case"pauseToggle":this.toggleFroze();break}}dispatchBasic(){if(Ut(this.shared,this.condition)===!1||!this.particleSystem)return!1;switch(this.emission){case"start":this.start(this.delay);break;case"emitToggle":this.toggleEmitting();break;case"pause":this.freeze();break;case"pauseToggle":this.toggleFroze();break;case"stop":this.stop();break;case"reset":this.reset();break}}dispatchConditional(){if(Ut(this.shared,this.condition)===!1||!this.particleSystem)return!1;switch(this.emission){case"start":this.particleSystem.start();break;case"stop":this.particleSystem.stop();break;case"reset":this.particleSystem.reset();break}}dispatchGameControl(e){if(Ut(this.shared,this.condition)===!1||!this.particleSystem)return!1;e==="start"?this.particleSystem.start():this.particleSystem.stop()}dispose(){!this.particleSystem||(this.particleSystem.reset(),this.clearDelay())}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}},VK="text/plain",zK="us-ascii",SB=(e,a)=>a.some(i=>i instanceof RegExp?i.test(e):i===e),UK=(e,{stripHash:a})=>{let i=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(e);if(!i)throw new Error(`Invalid URL: ${e}`);let{type:o,data:c,hash:d}=i.groups,g=o.split(";");d=a?"":d;let b=!1;g[g.length-1]==="base64"&&(g.pop(),b=!0);let j=(g.shift()||"").toLowerCase(),$=[...g.map(rt=>{let[_e,st=""]=rt.split("=").map(ut=>ut.trim());return _e==="charset"&&(st=st.toLowerCase(),st===zK)?"":`${_e}${st?`=${st}`:""}`}).filter(Boolean)];return b&&$.push("base64"),($.length>0||j&&j!==VK)&&$.unshift(j),`data:${$.join(";")},${b?c.trim():c}${d?`#${d}`:""}`};function hE(e,a){if(a={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...a},e=e.trim(),/^data:/i.test(e))return UK(e,a);if(/^view-source:/i.test(e))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let i=e.startsWith("//");!i&&/^\.*\//.test(e)||(e=e.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,a.defaultProtocol));let o=new URL(e);if(a.forceHttp&&a.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(a.forceHttp&&o.protocol==="https:"&&(o.protocol="http:"),a.forceHttps&&o.protocol==="http:"&&(o.protocol="https:"),a.stripAuthentication&&(o.username="",o.password=""),a.stripHash?o.hash="":a.stripTextFragment&&(o.hash=o.hash.replace(/#?:~:text.*?$/i,"")),o.pathname){let d=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,g=0,b="";for(;;){let $=d.exec(o.pathname);if(!$)break;let rt=$[0],_e=$.index,st=o.pathname.slice(g,_e);b+=st.replace(/\/{2,}/g,"/"),b+=rt,g=_e+rt.length}let j=o.pathname.slice(g,o.pathname.length);b+=j.replace(/\/{2,}/g,"/"),o.pathname=b}if(o.pathname)try{o.pathname=decodeURI(o.pathname)}catch{}if(a.removeDirectoryIndex===!0&&(a.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(a.removeDirectoryIndex)&&a.removeDirectoryIndex.length>0){let d=o.pathname.split("/"),g=d[d.length-1];SB(g,a.removeDirectoryIndex)&&(d=d.slice(0,-1),o.pathname=d.slice(1).join("/")+"/")}if(o.hostname&&(o.hostname=o.hostname.replace(/\.$/,""),a.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(o.hostname)&&(o.hostname=o.hostname.replace(/^www\./,""))),Array.isArray(a.removeQueryParameters))for(let d of[...o.searchParams.keys()])SB(d,a.removeQueryParameters)&&o.searchParams.delete(d);if(a.removeQueryParameters===!0&&(o.search=""),a.sortQueryParameters){o.searchParams.sort();try{o.search=decodeURIComponent(o.search)}catch{}}a.removeTrailingSlash&&(o.pathname=o.pathname.replace(/\/$/,""));let c=e;return e=o.toString(),!a.removeSingleSlash&&o.pathname==="/"&&!c.endsWith("/")&&o.hash===""&&(e=e.replace(/\/$/,"")),(a.removeTrailingSlash||o.pathname==="/")&&o.hash===""&&a.removeSingleSlash&&(e=e.replace(/\/$/,"")),i&&!a.normalizeProtocol&&(e=e.replace(/^http:\/\//,"//")),a.stripProtocol&&(e=e.replace(/^(?:https?:)?\/\//,"")),e}var pb=class{constructor({url:e,context:a},i,o,c){if(this.controlsManager=i,this.shared=o,this.condition=c,!e)throw new Error("Missing property");this.url=e.startsWith("mailto:")?e:hE(e,{removeTrailingSlash:!1,removeSingleSlash:!1}),this.context=a??"tab"}dispatch(){var e;if(Ut(this.shared,this.condition)===!1)return!1;Uh?window.location.assign(this.url):(this.context==="tab"?window.open(this.url,"_blank"):this.context==="window"?window.open(this.url,"_blank",`width=${window.innerWidth}, height=${window.innerHeight}`):window.open(this.url,"_parent"),(e=this.controlsManager.orbitControls)==null||e.onPointerUp($e$1[0]),z2())}},cg=class{constructor(e,a,i,o,c){this.data=e,this.page=a,this.controlsManager=i,this.shared=o,this.condition=c,this.timeoutIdQueue=[],this.dispatchInner=()=>{this.objects.forEach(this.destroyCallback)},this.destroyCallback=d=>{var $,rt;this.timeoutIdQueue.shift();let g=this.page.scene.find(d);if(g===void 0)return;let b=this.controlsManager.sharedGameControlGlobals.rapierWorld,j=b?($=g.dataPatched.physics)==null?void 0:$.fusedBody:!0;if(g.cloner){for(let _e of g.cloner.children)j?(_e.playModeVisible=!1,_e.rigidBody&&((rt=g.dataPatched.physics)==null?void 0:rt.rigidBody)==="positioned"&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(_e.rigidBody.collider(0).handle),b.removeRigidBody(_e.rigidBody),_e.rigidBody=void 0),_e.bvhGeometry&&(_e.bvhGeometry=void 0)):this.clone===void 0||this.clone===_e?(_e.playModeVisible=!1,_e.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(_e.rigidBody.collider(0).handle),b.removeRigidBody(_e.rigidBody),_e.rigidBody=void 0)):_e.playModeVisible===void 0&&(_e.playModeVisible=!0);(j||this.clone===void 0||this.clone===!1)&&(g.visible=!1,g.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(g.rigidBody.collider(0).handle),b.removeRigidBody(g.rigidBody),g.rigidBody=void 0),g.bvhGeometry&&(g.bvhGeometry=void 0))}else g.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(g.rigidBody.collider(0).handle),b.removeRigidBody(g.rigidBody),g.rigidBody=void 0),g.bvhGeometry&&(g.bvhGeometry=void 0),g.visible=!1;b===void 0?this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim=this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.filter(_e=>_e.bvhGeometry!==void 0):this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim=this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.filter(_e=>_e.rigidBody!==void 0),g.destroyedInAction=!0,this.controlsManager.requestRender()},this.objects=[...e.objects]}dispatch(e){if(Ut(this.shared,this.condition)===!1)return!1;this.clone=e,this.data.delay?this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3)):this.dispatchInner()}dispatchFromStart(){if(Ut(this.shared,this.condition)===!1)return!1;this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3))}dispose(){this.timeoutIdQueue.forEach(e=>window.clearTimeout(e))}},ug=class{constructor(e,a,i,o,c){this.data=e,this.page=a,this.shared=i,this.eventManager=o,this.condition=c,this.shared=i}dispatch(){if(Ut(this.shared,this.condition)===!1)return!1;clearTimeout(this.timeoutId),delete this.timeoutId,this.timeoutId=window.setTimeout(()=>{var e;this.shared.reset(this.shared.data,!0),Yf(this.page,this.shared,!0),this.eventManager.reset(),(e=this.eventManager.controlsManager.gameControl)==null||e.reset(!0),this.page.switchToPlayCamera(),this.eventManager.controlsManager.requestRender(),delete this.timeoutId},(this.data.delay??0)*1e3)}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},MB={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,timelineChangeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0,rewind:!0},mE={duration:1e3,delay:0,endDelay:0,startOnceDelay:0,pingPongDelayCorrection:0,pingPongEndDelayCorrection:0,easing:"easeOutElastic(1, .5)",round:0},GK=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],gb={CSS:{},springs:{}};function fo(e,a,i){return Math.min(Math.max(e,a),i)}function hg(e,a){return e.indexOf(a)>-1}function dE(e,a){return e.apply(null,a)}var dt={arr:function(e){return Array.isArray(e)},obj:function(e){return hg(Object.prototype.toString.call(e),"Object")},pth:function(e){return dt.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return!("isNode"in e)&&(e.nodeType||dt.svg(e))},str:function(e){return typeof e=="string"},fnc:function(e){return typeof e=="function"},und:function(e){return typeof e>"u"},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return dt.hex(e)||dt.rgb(e)||dt.hsl(e)},key:function(e){return!MB.hasOwnProperty(e)&&!mE.hasOwnProperty(e)&&e!=="targets"&&e!=="keyframes"}};function CB(e){var a=/\(([^)]+)\)/.exec(e);return a?a[1].split(",").map(function(i){return parseFloat(i)}):[]}function PB(e,a){var i=CB(e),o=fo(dt.und(i[0])?1:i[0],.1,100),c=fo(dt.und(i[1])?100:i[1],.1,100),d=fo(dt.und(i[2])?10:i[2],.1,100),g=fo(dt.und(i[3])?0:i[3],.1,100),b=Math.sqrt(c/o),j=d/(2*Math.sqrt(c*o)),$=j<1?b*Math.sqrt(1-j*j):0,rt=1,_e=j<1?(j*b+-g)/$:-g+b;function st(gt){var yt=a?a*gt/1e3:gt;return j<1?yt=Math.exp(-yt*j*b)*(rt*Math.cos($*yt)+_e*Math.sin($*yt)):yt=(rt+_e*yt)*Math.exp(-yt*b),gt===0||gt===1?gt:1-yt}function ut(){var gt=gb.springs[e];if(gt)return gt;for(var yt=1/6,Pt=0,wt=0;;)if(Pt+=yt,st(Pt)===1){if(wt++,wt>=16)break}else wt=0;var Ct=Pt*yt*1e3;return gb.springs[e]=Ct,Ct}return a?st:ut}function jK(e){return e===void 0&&(e=10),function(a){return Math.ceil(fo(a,1e-6,1)*e)*(1/e)}}var HK=function(){var e=11,a=1/(e-1);function i(rt,_e){return 1-3*_e+3*rt}function o(rt,_e){return 3*_e-6*rt}function c(rt){return 3*rt}function d(rt,_e,st){return((i(_e,st)*rt+o(_e,st))*rt+c(_e))*rt}function g(rt,_e,st){return 3*i(_e,st)*rt*rt+2*o(_e,st)*rt+c(_e)}function b(rt,_e,st,ut,gt){var yt,Pt,wt=0;do Pt=_e+(st-_e)/2,yt=d(Pt,ut,gt)-rt,yt>0?st=Pt:_e=Pt;while(Math.abs(yt)>1e-7&&++wt<10);return Pt}function j(rt,_e,st,ut){for(var gt=0;gt<4;++gt){var yt=g(_e,st,ut);if(yt===0)return _e;var Pt=d(_e,st,ut)-rt;_e-=Pt/yt}return _e}function $(rt,_e,st,ut){if(!(0<=rt&&rt<=1&&0<=st&&st<=1))return;var gt=new Float32Array(e);if(rt!==_e||st!==ut)for(var yt=0;yt<e;++yt)gt[yt]=d(yt*a,rt,st);function Pt(wt){for(var Ct=0,At=1,Tt=e-1;At!==Tt&&gt[At]<=wt;++At)Ct+=a;--At;var kt=(wt-gt[At])/(gt[At+1]-gt[At]),It=Ct+kt*a,Lt=g(It,rt,st);return Lt>=.001?j(wt,It,rt,st):Lt===0?It:b(wt,Ct,Ct+a,rt,st)}return function(wt){return rt===_e&&st===ut||wt===0||wt===1?wt:d(Pt(wt),_e,ut)}}return $}(),DB=function(){var e={linear:function(){return function(o){return o}}},a={Sine:function(){return function(o){return 1-Math.cos(o*Math.PI/2)}},Circ:function(){return function(o){return 1-Math.sqrt(1-o*o)}},Back:function(){return function(o){return o*o*(3*o-2)}},Bounce:function(){return function(o){for(var c,d=4;o<((c=Math.pow(2,--d))-1)/11;);return 1/Math.pow(4,3-d)-7.5625*Math.pow((c*3-2)/22-o,2)}},Elastic:function(o,c){o===void 0&&(o=1),c===void 0&&(c=.5);var d=fo(o,1,10),g=fo(c,.1,2);return function(b){return b===0||b===1?b:-d*Math.pow(2,10*(b-1))*Math.sin((b-1-g/(Math.PI*2)*Math.asin(1/d))*(Math.PI*2)/g)}}},i=["Quad","Cubic","Quart","Quint","Expo"];return i.forEach(function(o,c){a[o]=function(){return function(d){return Math.pow(d,c+2)}}}),Object.keys(a).forEach(function(o){var c=a[o];e["easeIn"+o]=c,e["easeOut"+o]=function(d,g){return function(b){return 1-c(d,g)(1-b)}},e["easeInOut"+o]=function(d,g){return function(b){return b<.5?c(d,g)(b*2)/2:1-c(d,g)(b*-2+2)/2}}}),e}();function gE(e,a){if(dt.fnc(e))return e;var i=e.split("(")[0],o=DB[i],c=CB(e);switch(i){case"spring":return PB(e,a);case"cubicBezier":return dE(HK,c);case"steps":return dE(jK,c);default:return dE(o,c)}}function OB(e){try{var a=document.querySelectorAll(e);return a}catch{return}}function yb(e,a){for(var i=e.length,o=arguments.length>=2?arguments[1]:void 0,c=[],d=0;d<i;d++)if(d in e){var g=e[d];a.call(o,g,d,e)&&c.push(g)}return c}function vb(e){return e.reduce(function(a,i){return a.concat(dt.arr(i)?vb(i):i)},[])}function wB(e){return dt.arr(e)?e:(dt.str(e)&&(e=OB(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function yE(e,a){return e.some(function(i){return i===a})}function vE(e){var a={};for(var i in e)a[i]=e[i];return a}function fE(e,a){var i=vE(e);for(var o in e)i[o]=a.hasOwnProperty(o)?a[o]:e[o];return i}function xb(e,a){var i=vE(e);for(var o in a)i[o]=dt.und(e[o])?a[o]:e[o];return i}function WK(e){var a=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e);return a?"rgba("+a[1]+",1)":e}function qK(e){var a=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,i=e.replace(a,function(b,j,$,rt){return j+j+$+$+rt+rt}),o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(i),c=parseInt(o[1],16),d=parseInt(o[2],16),g=parseInt(o[3],16);return"rgba("+c+","+d+","+g+",1)"}function YK(e){var a=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),i=parseInt(a[1],10)/360,o=parseInt(a[2],10)/100,c=parseInt(a[3],10)/100,d=a[4]||1;function g(st,ut,gt){return gt<0&&(gt+=1),gt>1&&(gt-=1),gt<1/6?st+(ut-st)*6*gt:gt<1/2?ut:gt<2/3?st+(ut-st)*(2/3-gt)*6:st}var b,j,$;if(o==0)b=j=$=c;else{var rt=c<.5?c*(1+o):c+o-c*o,_e=2*c-rt;b=g(_e,rt,i+1/3),j=g(_e,rt,i),$=g(_e,rt,i-1/3)}return"rgba("+b*255+","+j*255+","+$*255+","+d+")"}function XK(e){if(dt.rgb(e))return WK(e);if(dt.hex(e))return qK(e);if(dt.hsl(e))return YK(e)}function Xa(e){var a=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(a)return a[1]}function QK(e){if(hg(e,"translate")||e==="perspective")return"px";if(hg(e,"rotate")||hg(e,"skew"))return"deg"}function pE(e,a){return dt.fnc(e)?e(a.target,a.id,a.total):e}function ra(e,a){return e.getAttribute(a)}function xE(e,a,i){var o=Xa(a);if(yE([i,"deg","rad","turn"],o))return a;var c=gb.CSS[a+i];if(!dt.und(c))return c;var d=100,g=document.createElement(e.tagName),b=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;b.appendChild(g),g.style.position="absolute",g.style.width=d+i;var j=d/g.offsetWidth;b.removeChild(g);var $=j*parseFloat(a);return gb.CSS[a+i]=$,$}function IB(e,a,i){if(a in e.style){var o=a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),c=e.style[a]||getComputedStyle(e).getPropertyValue(o)||"0";return i?xE(e,c,i):c}}function bE(e,a){if(dt.dom(e)&&!dt.inp(e)&&(ra(e,a)||dt.svg(e)&&e[a]))return"attribute";if(dt.dom(e)&&yE(GK,a))return"transform";if(dt.dom(e)&&a!=="transform"&&IB(e,a))return"css";if(e[a]!=null)return"object"}function RB(e){if(dt.dom(e)){for(var a=e.style.transform||"",i=/(\w+)\(([^)]*)\)/g,o=new Map,c;c=i.exec(a);)o.set(c[1],c[2]);return o}}function KK(e,a,i,o){var c=hg(a,"scale")?1:0+QK(a),d=RB(e).get(a)||c;return i&&(i.transforms.list.set(a,d),i.transforms.last=a),o?xE(e,d,o):d}function SE(e,a,i,o){switch(bE(e,a)){case"transform":return KK(e,a,o,i);case"css":return IB(e,a,i);case"attribute":return ra(e,a);default:return e[a]||0}}function wE(e,a){var i=/^(\*=|\+=|-=)/.exec(e);if(!i)return e;var o=Xa(e)||0,c=parseFloat(a),d=parseFloat(e.replace(i[0],""));switch(i[0][0]){case"+":return c+d+o;case"-":return c-d+o;case"*":return c*d+o}}function LB(e,a){if(dt.col(e))return XK(e);if(/\s/g.test(e))return e;var i=Xa(e),o=i?e.substr(0,e.length-i.length):e;return a?o+a:o}function AE(e,a){return Math.sqrt(Math.pow(a.x-e.x,2)+Math.pow(a.y-e.y,2))}function ZK(e){return Math.PI*2*ra(e,"r")}function JK(e){return ra(e,"width")*2+ra(e,"height")*2}function $K(e){return AE({x:ra(e,"x1"),y:ra(e,"y1")},{x:ra(e,"x2"),y:ra(e,"y2")})}function BB(e){for(var a=e.points,i=0,o,c=0;c<a.numberOfItems;c++){var d=a.getItem(c);c>0&&(i+=AE(o,d)),o=d}return i}function eZ(e){var a=e.points;return BB(e)+AE(a.getItem(a.numberOfItems-1),a.getItem(0))}function NB(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return ZK(e);case"rect":return JK(e);case"line":return $K(e);case"polyline":return BB(e);case"polygon":return eZ(e)}}function tZ(e){var a=NB(e);return e.setAttribute("stroke-dasharray",a),a}function rZ(e){for(var a=e.parentNode;dt.svg(a)&&dt.svg(a.parentNode);)a=a.parentNode;return a}function FB(e,a){var i=a||{},o=i.el||rZ(e),c=o.getBoundingClientRect(),d=ra(o,"viewBox"),g=c.width,b=c.height,j=i.viewBox||(d?d.split(" "):[0,0,g,b]);return{el:o,viewBox:j,x:j[0]/1,y:j[1]/1,w:g/j[2],h:b/j[3]}}function iZ(e,a){var i=dt.str(e)?OB(e)[0]:e,o=a||100;return function(c){return{property:c,el:i,svg:FB(i),totalLength:NB(i)*(o/100)}}}function nZ(e,a){function i(b){b===void 0&&(b=0);var j=a+b>=1?a+b:0;return e.el.getPointAtLength(j)}var o=FB(e.el,e.svg),c=i(),d=i(-1),g=i(1);switch(e.property){case"x":return(c.x-o.x)*o.w;case"y":return(c.y-o.y)*o.h;case"angle":return Math.atan2(g.y-d.y,g.x-d.x)*180/Math.PI}}function AB(e,a){var i=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,o=LB(dt.pth(e)?e.totalLength:e,a)+"";return{original:o,numbers:o.match(i)?o.match(i).map(Number):[0],strings:dt.str(e)||a?o.split(i):[]}}function kB(e){var a=e?vb(dt.arr(e)?e.map(wB):wB(e)):[];return yb(a,function(i,o,c){return c.indexOf(i)===o})}function VB(e){var a=kB(e);return a.map(function(i,o){return{target:i,id:o,total:a.length,transforms:{list:RB(i)}}})}function sZ(e,a){var i=vE(a);if(/^spring/.test(i.easing)&&(i.duration=PB(i.easing)),dt.arr(e)){var o=e.length,c=o===2&&!dt.obj(e[0]);c?e={value:e}:dt.fnc(a.duration)||(i.duration=a.duration/o)}var d=dt.arr(e)?e:[e];return d.map(function(g,b){var j=dt.obj(g)&&!dt.pth(g)?g:{value:g};return dt.und(j.delay)&&(j.delay=b?0:a.delay),dt.und(j.endDelay)&&(j.endDelay=b===d.length-1?a.endDelay:0),j}).map(function(g){return xb(g,i)})}function oZ(e){for(var a=yb(vb(e.map(function(d){return Object.keys(d)})),function(d){return dt.key(d)}).reduce(function(d,g){return d.indexOf(g)<0&&d.push(g),d},[]),i={},o=function(d){var g=a[d];i[g]=e.map(function(b){var j={};for(var $ in b)dt.key($)?$==g&&(j.value=b[$]):j[$]=b[$];return j})},c=0;c<a.length;c++)o(c);return i}function aZ(e,a){var i=[],o=a.keyframes;o&&(a=xb(oZ(o),a));for(var c in a)dt.key(c)&&i.push({name:c,tweens:sZ(a[c],e)});return i}function lZ(e,a){var i={};for(var o in e){var c=pE(e[o],a);dt.arr(c)&&(c=c.map(function(d){return pE(d,a)}),c.length===1&&(c=c[0])),i[o]=c}return i.duration=parseFloat(i.duration),i.delay=parseFloat(i.delay),i}function cZ(e,a){var i;return e.tweens.map(function(o){var c=lZ(o,a),d=c.value,g=dt.arr(d)?d[1]:d,b=Xa(g),j=SE(a.target,e.name,b,a),$=i?i.to.original:j,rt=dt.arr(d)?d[0]:$,_e=Xa(rt)||Xa(j),st=b||_e;return dt.und(g)&&(g=$),c.from=AB(rt,st),c.to=AB(wE(g,rt),st),c.start=i?i.end:0,c.end=c.start+c.delay+c.duration+c.endDelay,c.easing=gE(c.easing,c.duration),c.isPath=dt.pth(d),c.isColor=dt.col(c.from.original),c.isColor&&(c.round=1),i=c,c})}var zB={css:function(e,a,i){return e.style[a]=i},attribute:function(e,a,i){return e.setAttribute(a,i)},object:function(e,a,i){return e[a]=i},transform:function(e,a,i,o,c){if(o.list.set(a,i),a===o.last||c){var d="";o.list.forEach(function(g,b){d+=b+"("+g+") "}),e.style.transform=d}}};function UB(e,a){var i=VB(e);i.forEach(function(o){for(var c in a){var d=pE(a[c],o),g=o.target,b=Xa(d),j=SE(g,c,b,o),$=b||Xa(j),rt=wE(LB(d,$),j),_e=bE(g,c);zB[_e](g,c,rt,o.transforms,!0)}})}function uZ(e,a){var i=bE(e.target,a.name);if(i){var o=cZ(a,e),c=o[o.length-1];return{type:i,property:a.name,animatable:e,tweens:o,duration:c.end,delay:o[0].delay,endDelay:c.endDelay}}}function hZ(e,a){return yb(vb(e.map(function(i){return a.map(function(o){return uZ(i,o)})})),function(i){return!dt.und(i)})}function GB(e,a){var i=e.length,o=function(d){return d.timelineOffset?d.timelineOffset:0},c={};return c.duration=i?Math.max.apply(Math,e.map(function(d){let g=d.startOnceDelay??0,b=d.pingPongDelayCorrection??0,j=d.pingPongEndDelayCorrection??0;return o(d)+g+b+j+d.duration*(d.loop??1)})):a.duration,c.delay=i?Math.min.apply(Math,e.map(function(d){let g=d.startOnceDelay??0,b=d.pingPongDelayCorrection??0;return o(d)+g+b+d.delay})):a.delay,c.endDelay=i?c.duration-Math.max.apply(Math,e.map(function(d){let g=d.startOnceDelay??0,b=d.pingPongDelayCorrection??0,j=d.pingPongEndDelayCorrection??0;return o(d)+g+b+d.duration*(d.loop??1)-d.endDelay-j})):a.endDelay,c}var _B=0;function dZ(e){var a=fE(MB,e),i=fE(mE,e),o=aZ(i,e),c=VB(e.targets),d=hZ(c,o),g=GB(d,i),b=_B;return _B++,xb(a,{id:b,children:[],animatables:c,animations:d,duration:g.duration,delay:g.delay,endDelay:g.endDelay,startOnceDelay:i.startOnceDelay,pingPongDelayCorrection:i.pingPongDelayCorrection,pingPongEndDelayCorrection:i.pingPongEndDelayCorrection})}var Fs=[],EB=[],mb,fZ=function(){function e(){mb=requestAnimationFrame(a)}function a(i){var o=Fs.length;if(o){for(var c=0;c<o;){var d=Fs[c];d.paused?(Fs.splice(c,1),o-=1):(d.tick(i),c++)}e()}else mb=cancelAnimationFrame(mb)}return e}();function pZ(e){document.hidden?(Fs.forEach(function(a){return a.pause(e.timeStamp)}),EB=Fs.slice(0),ui.running=Fs=[]):EB.forEach(function(a){return a.play(e.timeStamp)})}typeof document<"u"&&document.addEventListener("visibilitychange",pZ);function ui(e){e===void 0&&(e={});var a=0,i=0,o=0,c,d,g=0,b=null;function j(It){var Lt=window.Promise&&new Promise(function(Ft){return b=Ft});return It.finished=Lt,Lt}var $=dZ(e);j($);function rt(){var It=$.direction;It!=="alternate"&&($.direction=It!=="normal"?"normal":"reverse"),$.reversed=!$.reversed,d.forEach(function(Lt){(Lt.loop===1||Lt.loop%2===0)&&(Lt.reversed=$.reversed)})}function _e(){$.direction="normal",$.reversed=!1,d.forEach(function(It){return It.reversed=!1})}function st(It){return $.reversed?$.duration-It:It}function ut(){a=0,i=st($.currentTime)*(1/ui.speed)}function gt(It,Lt,Ft=!1){Lt&&($.reversed?Lt.seek(Lt.duration*Lt.loop-(It-Lt.timelineOffset-Lt.pingPongDelayCorrection),Ft):Lt.seek(It-Lt.timelineOffset-Lt.startOnceDelay-Lt.pingPongDelayCorrection,Ft))}function yt(It,Lt=!1){if($.reversed)for(var Ft=g;Ft--;)gt(It,d[Ft],Lt);else for(var Nt=0;Nt<g;Nt++)gt(It,d[Nt],Lt)}function Pt(It){var a1,P0,B0,q1,ox,N_,eS,tS,tA,aR;var Lt=0,Ft=$.animations,Nt=Ft.length;for($.direction!=="alternate"&&((a1=$.parent)==null?void 0:a1.direction)==="alternate"?((P0=$.parent)==null?void 0:P0.rewind)===!1&&$.reversePlayback===!0&&$.rewind===!1&&((B0=$.parent)!=null&&B0.reversed&&$.direction==="alternate"?It=$.duration-$.delay+$.endDelay-It:It=$.duration+$.delay-$.endDelay-It):Tt(!1,(q1=$.parent)==null?void 0:q1.rewind,$.rewind,(ox=$.parent)==null?void 0:ox.reversePlayback,$.reversePlayback)&&((N_=$.parent)!=null&&N_.reversed&&$.direction==="alternate"?It=$.duration-$.delay+$.endDelay-It:It=$.duration+$.delay-$.endDelay-It);Lt<Nt;){var Ht=Ft[Lt],Gr=Ht.animatable,hs=Ht.tweens,_s=hs.length-1,hn=hs[_s];_s&&(hn=yb(hs,function(AA){return It<AA.end})[0]||hn);let sR;(eS=$.parent)!=null&&eS.reversed&&$.direction==="alternate"?sR=fo(It-hn.start-hn.endDelay,0,hn.duration)/hn.duration:sR=fo(It-hn.start-hn.delay,0,hn.duration)/hn.duration;for(var Qn=isNaN(sR)?1:hn.easing(sR),ds=hn.to.strings,un=hn.round,dr=[],us=hn.to.numbers.length,Nn=void 0,gn=0;gn<us;gn++){var Zn=void 0;let AA,SA;$.direction!=="alternate"?((tS=$.parent)==null?void 0:tS.rewind)===!1&&$.reversePlayback===!0&&$.rewind===!1?(AA=hn.to.numbers[gn],SA=hn.from.numbers[gn]||0):(SA=hn.to.numbers[gn],AA=hn.from.numbers[gn]||0):Tt(!0,(tA=$.parent)==null?void 0:tA.rewind,$.rewind,(aR=$.parent)==null?void 0:aR.reversePlayback,$.reversePlayback)?(AA=hn.to.numbers[gn],SA=hn.from.numbers[gn]||0):(SA=hn.to.numbers[gn],AA=hn.from.numbers[gn]||0),hn.isPath?Zn=nZ(hn.value,Qn*SA):Zn=AA+Qn*(SA-AA),un&&(hn.isColor&&gn>2||(Zn=Math.round(Zn*un)/un)),dr.push(Zn)}var xu=ds.length;if(!xu)Nn=dr[0];else{Nn=ds[0];for(var au=0;au<xu;au++){ds[au];var Vv=ds[au+1],wu=dr[au];isNaN(wu)||(Vv?Nn+=wu+Vv:Nn+=wu+" ")}}zB[Ht.type](Gr.target,Ht.property,Nn,Gr.transforms),Ht.currentValue=Nn,Lt++}}function wt(It){$[It]&&!$.passThrough&&$[It]($)}function Ct(){$.remaining&&$.remaining!==!0&&$.remaining--}let At={0:!1,1:!0,2:!1,3:!0,4:!1,5:!1,6:!1,7:!1,8:!1,9:!0,10:!0,11:!1,12:!1,13:!1,14:!0,15:!0,16:!1,17:!0,18:!0,19:!1,20:!1,21:!1,22:!0,23:!0,24:!1,25:!0,26:!1,27:!0,28:!1,29:!1,30:!1,31:!1};function Tt(It,Lt,Ft,Nt,Ht){return At[It<<4|Lt<<3|Ft<<2|Nt<<1|Ht]}function kt(It,Lt=!1){var hs;var Ft=$.duration;let Nt=$.delay,Ht=Ft-$.endDelay;(hs=$.parent)!=null&&hs.reversed&&$.direction==="alternate"&&(Nt=$.endDelay,Ht=Ft-$.delay);var Gr=st(It);if($.progress=fo(Gr/Ft*100,0,100),Lt||($.reversePlayback=Gr<$.currentTime),g&&yt(Gr,Lt),!$.began&&$.currentTime>=0&&($.began=!0,wt("begin")),!$.loopBegan&&$.currentTime>0&&($.loopBegan=!0,wt("loopBegin")),($.reversed||Gr>=0)&&Gr<=Nt&&$.currentTime!==0&&(Pt(0),wt("change")),(Gr>=Ht&&$.currentTime!==Ft+$.pingPongDelayCorrection||!Ft)&&(Pt(Ft),wt("change")),Gr>Nt&&Gr<Ht?($.changeBegan||($.changeBegan=!0,$.changeCompleted=!1,wt("changeBegin")),Pt(Gr),wt("change")):$.changeBegan?($.changeCompleted=!0,$.changeBegan=!1,wt("change"),g&&wt("timelineChangeComplete")):$.began&&Gr>Ht&&wt("changeComplete"),$.currentTime=fo(Gr,0,Ft+$.pingPongDelayCorrection),$.began&&wt("update"),It>=Ft)if(Ct(),!$.remaining)$.paused=!0,$.completed||($.completed=!0,wt("loopComplete"),wt("complete"),!$.passThrough&&"Promise"in window&&(b(),j($)));else{g?a+=$.duration/ui.speed:a+=$.duration;for(let _s of d)_s.setStartTime(0),_s.remaining=_s.loop;wt("loopComplete"),$.loopBegan=!1,$.direction==="alternate"?rt():g&&_e()}}return $.reset=function(){var It=$.direction;$.passThrough=!1,$.currentTime=0,$.progress=0,$.paused=!0,$.began=!1,$.loopBegan=!1,$.changeBegan=!1,$.completed=!1,$.changeCompleted=!1,$.reversePlayback=!1,$.reversed=It==="reverse",$.remaining=$.loop,d=$.children,g=d.length;for(var Lt=g;Lt--;)$.children[Lt].reset();Pt($.reversed?$.duration:0)},$.setStartTime=function(It){a=It},$.set=function(It,Lt){return UB(It,Lt),$},$.tick=function(It){o=It,a||(a=o),kt((o+(i-a))*ui.speed)},$.seek=function(It,Lt=!1){kt(It-a,Lt)},$.pause=function(It){$.paused=!0,g&&(c=It??performance.now())},$.play=function(It){!$.paused||($.completed&&$.reset(),$.paused=!1,Fs.push($),g&&c!==void 0&&(a+=(It??performance.now())-c),mb||fZ())},$.reverse=function(){rt(),$.completed=!$.reversed,ut()},$.restart=function(){$.reset(),$.play()},$.reset(),$.autoplay&&$.play(),$}function TB(e,a){for(var i=a.length;i--;)yE(e,a[i].animatable.target)&&a.splice(i,1)}function mZ(e){for(var a=kB(e),i=Fs.length;i--;){var o=Fs[i],c=o.animations,d=o.children;TB(a,c);for(var g=d.length;g--;){var b=d[g],j=b.animations;TB(a,j),!j.length&&!b.children.length&&d.splice(g,1)}!c.length&&!d.length&&o.pause()}}function gZ(e,a){a===void 0&&(a={});var i=a.direction||"normal",o=a.easing?gE(a.easing):null,c=a.grid,d=a.axis,g=a.from||0,b=g==="first",j=g==="center",$=g==="last",rt=dt.arr(e),_e=parseFloat(rt?e[0]:e),st=rt?parseFloat(e[1]):0,ut=Xa(rt?e[1]:e)||0,gt=a.start||0+(rt?_e:0),yt=[],Pt=0;return function(wt,Ct,At){if(b&&(g=0),j&&(g=(At-1)/2),$&&(g=At-1),!yt.length){for(var Tt=0;Tt<At;Tt++){if(!c)yt.push(Math.abs(g-Tt));else{var kt=j?(c[0]-1)/2:g%c[0],It=j?(c[1]-1)/2:Math.floor(g/c[0]),Lt=Tt%c[0],Ft=Math.floor(Tt/c[0]),Nt=kt-Lt,Ht=It-Ft,Gr=Math.sqrt(Nt*Nt+Ht*Ht);d==="x"&&(Gr=-Nt),d==="y"&&(Gr=-Ht),yt.push(Gr)}Pt=Math.max.apply(Math,yt)}o&&(yt=yt.map(function(_s){return o(_s/Pt)*Pt})),i==="reverse"&&(yt=yt.map(function(_s){return d?_s<0?_s*-1:-_s:Math.abs(Pt-_s)}))}var hs=rt?(st-_e)/Pt:_e;return gt+hs*(Math.round(yt[Ct]*100)/100)+ut}}function yZ(e){e===void 0&&(e={});var a=ui(e);return a.duration=0,a.add=function(i,o){var c=Fs.indexOf(a),d=a.children;c>-1&&Fs.splice(c,1);function g(st){st.passThrough=!0}for(var b=0;b<d.length;b++)g(d[b]);var j=xb(i,fE(mE,e));j.targets=j.targets||e.targets;var $=a.duration;j.autoplay=!1,j.timelineOffset=dt.und(o)?$:wE(o,$),g(a);var rt=ui(j);g(rt),d.push(rt),rt.parent=a;var _e=GB(d,e);return a.delay=_e.delay,a.endDelay=_e.endDelay,a.duration=_e.duration,rt.loop===!0&&(a.duration=1/0),a.seek(0),a.reset(),a.autoplay&&a.play(),a},a}ui.version="3.2.0";ui.speed=1;ui.running=Fs;ui.remove=mZ;ui.get=SE;ui.set=UB;ui.convertPx=xE;ui.path=iZ;ui.setDashoffset=tZ;ui.stagger=gZ;ui.timeline=yZ;ui.easing=gE;ui.penner=DB;ui.random=function(e,a){return Math.floor(Math.random()*(a-e+1))+e};var bb=ui,jB=new _,HB=new _,WB=new Qe;function YB(e,a,i,o){if(o===0)return i.copy(e);if(o===1)return i.copy(a);let c=e.w*a.w+e.x*a.x+e.y*a.y+e.z*a.z;if(c>=1)return i.copy(e);let d=1-c*c;if(d<=Number.EPSILON){let rt=1-o;return i.w=rt*e.w+o*a.w,i.x=rt*e.x+o*a.x,i.y=rt*e.y+o*a.y,i.z=rt*e.z+o*a.z,i.normalize(),i}let g=Math.sqrt(d),b=Math.atan2(g,c),j=Math.sin((1-o)*b)/g,$=Math.sin(o*b)/g;return i.w=e.w*j+a.w*$,i.x=e.x*j+a.x*$,i.y=e.y*j+a.y*$,i.z=e.z*j+a.z*$,i}function ei(e,a,i,o,c,d){let g=i[e]?i[e]:void 0,b=o[e];if(b==null)return;let j=g!=null?typeof g=="string"?Number(c.getVariable(g)??0):g:a[e],$=typeof b=="string"?Number(c.getVariable(b)??0):b;if(j!==$)return{update:rt=>{let _e=Me.lerp(j,$,rt);d?a[e]=Math.trunc(_e):a[e]=_e},start:()=>{a[e]=j},end:()=>{a[e]=$}}}function fg(e,a,i,o,c,d){let g=i[e]?i[e]:void 0,b=o[e];if(!b)return;let j=a[e],$=[...g??j].map(_e=>typeof _e=="string"?Number(c.getVariable(_e)??0):_e),rt=[...b].map(_e=>typeof _e=="string"?Number(c.getVariable(_e)??0):_e);if(!($.length!==rt.length||Xp($,rt)))return{update:_e=>{$.forEach((st,ut)=>{let gt=Me.lerp(st,rt[ut],_e);a[e][ut]=d?Math.trunc(gt):gt})},start:()=>{Object.assign(a[e],$)},end:()=>{Object.assign(a[e],rt)}}}function dg(e,a,i){return a.forEach((o,c)=>{e.setComponent(c,typeof o=="string"?Number(i.getVariable(o)??0):o)}),e}function _E(e,a,i,o,c){let d=i[e]?i[e]:void 0,g=o[e];if(!g)return;let b=a[e],j=d?dg(new _,d,c):b.clone(),$=dg(new _,g,c);if(!j.equals($))return{update:rt=>{b.lerpVectors(j,$,rt)},start:()=>{b.copy(j)},end:()=>{b.copy($)}}}function qB(e,a,i){return a.forEach((o,c)=>{e.setComponent(c,typeof o=="string"?Number(i.getVariable(o)??0):o)}),e}function pg(e,a,i,o,c){let d=i[e]?i[e]:void 0,g=o[e];if(!g)return;let b=a[e],j=!(b instanceof z$2),$=b instanceof z$2?b:new z$2().fromArray(b),rt=d?qB(new z$2,d,c):$.clone(),_e=qB(new z$2,g,c);if(!rt.equals(_e))return{update:st=>{$.lerpVectors(rt,_e,st),j&&(a[e]=$.toArray())},start:()=>{$.copy(rt),j&&(a[e]=$.toArray())},end:()=>{$.copy(_e),j&&(a[e]=$.toArray())}}}function XB(e,a,i,o){let c=i[e]?i[e]:void 0,d=o[e];if(!d)return;let g=a[e],b=c?new ce$1().fromArray(c):g.clone(),j=new _,$=new Qe,rt=new _;b.decompose(j,$,rt);let _e=new ce$1().fromArray(d),st=new _,ut=new Qe,gt=new _;if(_e.decompose(st,ut,gt),!b.equals(_e))return{update:yt=>{WB.slerpQuaternions($,ut,yt),jB.lerpVectors(j,st,yt),HB.lerpVectors(rt,gt,yt),g.compose(jB,WB,HB)},start:()=>{g.compose(j,$,rt)},end:()=>{g.compose(st,ut,gt)}}}function QB(e,a,i,o,c){let d=i[e]?i[e]:void 0,g=o[e];if(!g)return;let b=a[e],j=d?typeof d=="string"?c.getColor(d).clone():new We().setRGB(d.r,d.g,d.b):b.clone(),$=typeof g=="string"?c.getColor(g).clone():new We().setRGB(g.r,g.g,g.b);if(j.equals($))return;let rt=b.clone();return a[e]=rt,{update:_e=>{rt.lerpColors(j,$,_e)},start:()=>{rt.copy(j)},end:()=>{rt.copy($)}}}function mg(e,a,i,o,c){let d=i[e]?i[e]:void 0,g=o[e];if(!g)return;let b=a[e],j=new xr$1(b.r,b.g,b.b,b.a),$=d?typeof d=="string"?c.getColor(d).clone():new xr$1(d.r,d.g,d.b,d.a):j.clone(),rt=typeof g=="string"?c.getColor(g).clone():new xr$1(g.r,g.g,g.b,g.a);if(!$.equals(rt))return{update:_e=>{j.lerpColors($,rt,_e);let st=Me.lerp($.a,rt.a,_e);j.a=st,a[e]={r:j.r,g:j.g,b:j.b,a:j.a}},start:()=>{j.copy($)},end:()=>{j.copy(rt)}}}function ia(e,a,i,o,c){if(typeof a[e]=="number")return ei(e,a,i??{},o,c);if(Array.isArray(a[e]))return fg(e,a,i??{},o,c)}function KB(e,a,i,o){var b,j,$,rt;let c=[],d=e.cameraType==="OrthographicCamera"?(b=a.orthographic)==null?void 0:b.zoom:(j=a.perspective)==null?void 0:j.zoom,g=e.cameraType==="OrthographicCamera"?($=i.orthographic)==null?void 0:$.zoom:(rt=i.perspective)==null?void 0:rt.zoom;if(g!==void 0){let _e=d??e.zoom,st=g;_e!==st&&c.push({update:ut=>{e.zoom=Me.lerp(_e,st,ut),e.updateProjectionMatrix()},start:()=>{e.zoom=_e,e.updateProjectionMatrix()},end:()=>{e.zoom=st,e.updateProjectionMatrix()}})}if(i.targetOffset!==void 0){let _e=ei("targetOffset",e,a,i,o);_e&&c.push(_e)}return c}function vZ(e,a,i,o){if(i.scaleBaked===void 0)return;let c=(a.scaleBaked??e.data.geometry.scaleBaked).map(b=>typeof b=="string"?Number(o.getVariable(b)??0):b),d=i.scaleBaked.map(b=>typeof b=="string"?Number(o.getVariable(b)??0):b);if(Lo.isEqual(c,d))return;let g=[];return g.push({update:b=>{e.updateGeometryInteractions({scaleBaked:[Me.lerp(c[0],d[0],b),Me.lerp(c[1],d[1],b),Me.lerp(c[2],d[2],b)]},o),e.invalidateDownstreamBooleanData()},start:()=>{e.updateGeometryInteractions({scaleBaked:c},o),e.invalidateDownstreamBooleanData()},end:()=>{e.updateGeometryInteractions({scaleBaked:d},o),e.invalidateDownstreamBooleanData()}}),g}function xZ(e,a,i,o){if(!i.extrusion)return;let c=e.extrusion,d=a.extrusion??{},g=i.extrusion,b=[];return C1.forEach(j=>{let $=ia(j,c,d,g,o);$&&b.push($)}),b}function ZB(e,a,i,o){let c=[];if(!("geometry"in i))return c;let d=e.geometry.userData.parameters,g="geometry"in a?a.geometry:{},b=i.geometry;if(e instanceof ao){let j=vZ(e,g,b,o);j&&c.push(...j)}else{let j={};if(Object.assign(j,as(d,P1)),P1.forEach($=>{let rt=ia($,j,g,b,o);rt&&c.push(rt)}),e instanceof ic){Object.assign(j,{extrusion:{...d.extrusion}});let $=xZ(j,g,b,o);$&&c.push(...$)}c.length&&c.push({update:$=>{e.updateGeometryInteractions(j,o),e.updateGeometryGroupsIfNeeded()},start:$=>{e.updateGeometryInteractions(j,o),e.updateGeometryGroupsIfNeeded()},end:$=>{e.updateGeometryInteractions(j,o),e.updateGeometryGroupsIfNeeded()}})}return c}function JB(e,a,i,o){let c=[];if(i.intensity!==void 0){let d=ei("intensity",e,a,i,o);d&&c.push(d)}if(i.color!==void 0){let d=QB("color",e,a,i,o);d&&c.push(d)}return c}function eN(e,a,i,o){let c=[];if(Array.isArray(e.material)){if(!("materials"in i&&i.materials))return c;let d="materials"in a&&a.materials?a.materials:[],g=i.materials;e.material.forEach((b,j)=>{if(!g[j])return;let $=d[j]??{},rt=g[j];typeof $=="string"||typeof rt=="string"||c.push(...$B(b,$,rt,o))})}else{if(!("material"in i&&i.material))return c;let d="material"in a&&a.material?a.material:{},g=i.material;if(typeof d=="string"||typeof g=="string")return c;c.push(...$B(e.material,d,g,o))}return c}function $B(e,a,i,o){var g;let c=[],d=Jc(i,o)||!!a.layers&&Jc(a,o);c.push(CZ(e,d));for(let b of e.layers){let j=(g=a.layers)==null?void 0:g.data(b.uuid),$=i.layers.data(b.uuid);if(!$||b.type!=="light"&&(!(b.visible??!0)||!($.visible??!0)))continue;let rt=b.getNames().filter(_e=>!e0.some(st=>_e.includes(st)));for(let _e of rt)try{let st=b.getValue(_e),ut;if(_e==="colors")ut=TZ(b,j,$,_e);else if(Array.isArray(st))_e==="steps"&&(ut=EZ(b,j,$,_e));else if(typeof st=="number")ut=bZ(b,j,$,_e,o);else{if(typeof st=="boolean")continue;st instanceof z$2?ut=SZ(b,j,$,_e):st instanceof _?ut=wZ(b,j,$,_e,o):st instanceof xr$1?ut=_Z(b,j,$,_e,o):st instanceof We?ut=AZ(b,j,$,_e,o):"isTexture"in st&&(ut=MZ(b,j,$,_e))}ut&&(Array.isArray(ut)?c.push(...ut):c.push(ut))}catch(st){console.error(`lerpMaterial: unexpected material layer for ${_e}`,st)}}return c}function bZ(e,a,i,o,c){if(!e.hasValue(o)||!(o in i))return;let d=a?a[o]:e.getValue(o),g=i[o],b=typeof d=="string"?Number(c.getVariable(d)??0):d,j=typeof g=="string"?Number(c.getVariable(g)??0):g;if(b!==j)return{update:$=>{e.setValue(o,Me.lerp(b,j,$))},start:()=>{e.setValue(o,b)},end:()=>{e.setValue(o,j)}}}function SZ(e,a,i,o){if(!e.hasValue(o)||!(o in i))return;let c=e.getValue(o),d=a?new z$2().fromArray(a[o]):c.clone(),g=new z$2().fromArray(i[o]);if(!d.equals(g))return{update:b=>{c.lerpVectors(d,g,b)},start:()=>{c.copy(d)},end:()=>{c.copy(g)}}}function wZ(e,a,i,o,c){if(!e.hasValue(o)||!(o in i))return;let d=e.getValue(o),g=a?a[o]:void 0,b=i[o],j=g?dg(new _,g,c):d.clone(),$=dg(new _,b,c);if(!j.equals($))return{update:rt=>{d.lerpVectors(j,$,rt)},start:()=>{d.copy(j)},end:()=>{d.copy($)}}}function AZ(e,a,i,o,c){if(!e.hasValue(o)||!(o in i))return;let d=a?a[o]:void 0,g=i[o],b=e.getValue(o),j=d?typeof d=="string"?c.getColor(d).clone():new We().setRGB(d.r,d.g,d.b):b.clone(),$=typeof g=="string"?c.getColor(g).clone():new We().setRGB(g.r,g.g,g.b);if(j.equals($))return;let rt=b.clone();return{update:_e=>{e.getValue(o)!==rt&&e.setValue(o,rt),rt.lerpColors(j,$,_e)},start:()=>{rt.copy(j)},end:()=>{rt.copy($)}}}function _Z(e,a,i,o,c){if(!e.hasValue(o)||!(o in i))return;let d=a?a[o]:void 0,g=i[o],b=e.getValue(o),j=d?typeof d=="string"?c.getColor(d).clone():new We().setRGB(d.r,d.g,d.b):b.clone(),$=typeof g=="string"?c.getColor(g).clone():new xr$1(g.r,g.g,g.b,g.a);if(j.equals($))return;let rt=b.clone();return{update:_e=>{e.getValue(o)!==rt&&e.setValue(o,rt),rt.lerpColors(j,$,_e)},start:()=>{rt.copy(j)},end:()=>{rt.copy($)}}}function EZ(e,a,i,o="steps"){if(!e.hasValue(o)||!(o in i))return;let c=[],d=e.getValue(o),g=a?a[o]:d,b=i[o];for(let j=0;j<d.length;++j){let $=g[j],rt=b[j];$!==rt&&c.push({update:_e=>{d[j]=Me.lerp($,rt,_e)},start:()=>{d[j]=$},end:()=>{d[j]=rt}})}return c.length?c:void 0}function TZ(e,a,i,o="colors"){if(!e.hasValue(o)||!(o in i))return;let c=[],d=e.getValue(o),g=a?a[o]:d.map(j=>j.toArray()),b=i[o];for(let j=0;j<d.length;++j){let $=[...g[j]],rt=[...b[j]];sm.isEqual($,rt)||c.push({update:_e=>{d[j].fromArray(sm.lerp($,rt,_e))},start:()=>{d[j].fromArray($)},end:()=>{d[j].fromArray(rt)}})}return c.length?c:void 0}function MZ(e,a,i,o="texture"){if(!e.hasValue(o)||!(o in i))return;let c=e.getNode("mat");if(!c)return;let d=a?a[o]:c,g=i[o],b=[...d.repeat],j=[...d.offset],$=[...g.repeat],rt=[...g.offset];if(!Ro.isEqual(b,$)||!Ro.isEqual(j,rt))return{update:_e=>{c.repeat=Ro.lerp(b,$,_e),c.offset=Ro.lerp(j,rt,_e),c.updateMatrix()},start:()=>{c.repeat=[...b],c.offset=[...j],c.updateMatrix()},end:()=>{c.repeat=[...$],c.offset=[...rt],c.updateMatrix()}}}function CZ(e,a){return{update:()=>{e.transparent=a}}}var EE=new _,tN=new or$1;function rN(e,a,i,o,c){var ut,gt,yt,Pt,wt,Ct;let d=[],g,b,j,$,rt,_e,st;if(e instanceof Jt?(g=pg("position",e,a,i,c),g&&d.push(g),j=ei("rotation",e,a,i,c),j&&d.push(j)):(st={slide:((ut=a.pathSnapping)==null?void 0:ut.slide)??((gt=e.updatedPathSnapping)==null?void 0:gt.slide)??((yt=e.dataPatched.pathSnapping)==null?void 0:yt.slide)??0,offset:((Pt=a.pathSnapping)==null?void 0:Pt.offset)??((wt=e.updatedPathSnapping)==null?void 0:wt.offset)??((Ct=e.dataPatched.pathSnapping)==null?void 0:Ct.offset)??0},rt=ei("slide",st,a.pathSnapping??e.updatedPathSnapping??e.dataPatched.pathSnapping,i.pathSnapping??e.dataPatched.pathSnapping,c),rt&&d.push(rt),_e=ei("offset",st,a.pathSnapping??e.updatedPathSnapping??e.dataPatched.pathSnapping,i.pathSnapping??e.dataPatched.pathSnapping,c),_e&&d.push(_e),!rt&&!_e&&(g=_E("position",e,a,i,c),g&&d.push(g),b=_E("scale",e,a,i,c),b&&d.push(b),j=PZ(e,a,i,o,c),j&&d.push(j),$=XB("hiddenMatrix",e,a,i),$&&d.push($))),g||b||j||$||rt||_e){let At=e instanceof Jt?()=>{e.updateWorldMatrix(!0)}:()=>{var Tt;e.updateMatrix(),e.hasNonUniformScale&&(e.updateMatrixWorld(),e.updateMatrixWorldSVD()),(Tt=e.parent)!=null&&Tt.matrixWorldFusedFalse&&(e.matrixWorld.multiplyMatrices(e.parent.matrixWorldFusedFalse,e.matrix),e.matrixWorldNeedsUpdate=!1),mn(e)&&Rn(e.parent)&&e.invalidateDownstreamBooleanData(!0),e.updatePathSnapping(Object.assign({},a.pathSnapping,st))};d.push({update:At,start:At,end:At})}return d}function PZ(e,a,i,o,c){var rt;let d=a!=null&&a.rotation?a.rotation.map(_e=>(typeof _e=="string"?Number(c.getVariable(_e)??0):_e)*Me.DEG2RAD):void 0,g=(rt=i.rotation)==null?void 0:rt.map(_e=>(typeof _e=="string"?Number(c.getVariable(_e)??0):_e)*Me.DEG2RAD);if(!g)return;let b=d?new _().fromArray(d):new _().setFromEuler(e.rotation),j=new _().fromArray(g);if(b.equals(j))return;let $=EE.subVectors(j,b);if(o&&$.toArray().every(_e=>Math.abs(_e)<2*Math.PI)){let _e=new Qe().setFromEuler(tN.setFromVector3(b)),st=new Qe().setFromEuler(tN.setFromVector3(j));return{update:ut=>{YB(_e,st,e.quaternion,ut)},start:()=>{e.rotation.setFromVector3(b)},end:()=>{e.rotation.setFromVector3(j)}}}else return{update:_e=>{EE.lerpVectors(b,j,_e),e.rotation.setFromVector3(EE)},start:()=>{e.rotation.setFromVector3(b)},end:()=>{e.rotation.setFromVector3(j)}}}function iN(e,a,i,o){let c=[];if(!("cloner"in i)||!e.cloner)return c;let d=e.cloner,g="cloner"in a?a.cloner:{},b=i.cloner;x1.forEach(ut=>{let gt;ut==="count"?gt=ei("count",d.parameters,g,b,o,!0):gt=ia(ut,d.parameters,g??{},b,o),gt&&c.push(gt)});let j=DZ(d,g,b,o);j!=null&&j.length&&c.push(...j);let $=OZ(d,g,b,o);$!=null&&$.length&&c.push(...$);let rt=IZ(d,g,b,o);rt!=null&&rt.length&&c.push(...rt);let _e=RZ(d,g,b,o);_e!=null&&_e.length&&c.push(..._e);let st=LZ(d,g,b,o);return st!=null&&st.length&&c.push(...st),c.length&&c.push({update:()=>{d.update()}}),c}function DZ(e,a,i,o){if(e.parameters.type!=="radial")return;let c=a.radial,d=i.radial;if(!d)return;let g=e.parameters.radial,b=[];return b1$1.forEach(j=>{let $=ia(j,g,c??{},d,o);$&&b.push($)}),b}function OZ(e,a,i,o){if(e.parameters.type!=="linear")return;let c=a.linear,d=i.linear;if(!d)return;let g=[],b=e.parameters.linear;return S1.forEach(j=>{let $=ia(j,b,c??{},d,o);$&&g.push($)}),g}function IZ(e,a,i,o){if(e.parameters.type!=="grid")return;let c=a.grid,d=i.grid;if(!d)return;let g=[],b=e.parameters.grid;return w1.forEach(j=>{let $;j==="count"?$=fg(j,b,c??{},d,o,!0):$=ia(j,b,c??{},d,o),$&&g.push($)}),g}function RZ(e,a,i,o){if(e.parameters.type!=="toObject")return;let c=a.toObject,d=i.toObject;if(!d)return;let g=[],b=e.parameters.toObject;return A1.forEach(j=>{let $;j==="count"?$=ei(j,b,c??{},d,o,!0):$=ia(j,b,c??{},d,o),$&&g.push($)}),g}function LZ(e,a,i,o){if(!e.parameters.randomness)return;let c=a.randomnessObject,d=i.randomnessObject;if(!d)return;let g=[],b=e.parameters.randomnessObject;return _1.forEach(j=>{let $=ia(j,b,c??{},d,o);$&&g.push($)}),g}function BZ(e,a){return{update:()=>{e instanceof Ar$1&&(e.fill.enabled=a)}}}function NZ(e,a){return{update:()=>{e instanceof Ar$1&&(e.stroke.enabled=a)}}}function FZ(e,a){return{update:()=>{e instanceof Ar$1&&(e.dropShadow.enabled=a)}}}function kZ(e,a){return{update:()=>{e instanceof Ar$1&&(e.innerShadow.enabled=a)}}}function VZ(e,a){return{update:()=>{e instanceof Ar$1&&(e.backgroundBlur.enabled=a)}}}function zZ(e,a){return{update:()=>{e instanceof Ar$1&&(e.layerBlur.enabled=a)}}}function nN(e,a,i,o,c){let d=[],g,b,j,$,rt,_e,st,ut,gt,yt,Pt,wt,Ct,At,Tt;if("width"in e&&(g=ei("width",e,a,i,c),g&&d.push(g)),"height"in e&&(b=ei("height",e,a,i,c),b&&d.push(b)),e instanceof Ar$1||e instanceof an){let kt={...a.fill},It={...i.fill};kt.enabled!==void 0&&kt.enabled!==It.enabled&&(d.push(BZ(e,!0)),kt.enabled||Object.assign(kt,{enabled:!0,color:{...kt.color,a:0}}),It.enabled||Object.assign(It,{enabled:!0,color:{...It.color,a:0}})),j=mg("color",e.fill,kt,It,c),j&&d.push(j)}if(e instanceof Ar$1){let kt={...a.stroke},It={...i.stroke};(kt.enabled||It.enabled)&&(d.push(NZ(e,!0)),kt.enabled||Object.assign(kt,{enabled:!0,color:{...kt.color,a:0}}),It.enabled||Object.assign(It,{enabled:!0,color:{...It.color,a:0}})),$=mg("color",e.stroke,kt,It,c),$&&d.push($),rt=ei("thickness",e.stroke,kt,It,c),rt&&d.push(rt)}if(e instanceof Ar$1){let kt={...a.dropShadow},It={...i.dropShadow};(kt.enabled||It.enabled)&&(d.push(FZ(e,!0)),kt.enabled||Object.assign(kt,{enabled:!0,color:{...kt.color,a:0}}),It.enabled||Object.assign(It,{enabled:!0,color:{...It.color,a:0}})),_e=mg("color",e.dropShadow,kt,It,c),_e&&d.push(_e),st=ei("blurRadius",e.dropShadow,kt,It,c),st&&d.push(st),gt=ei("spread",e.dropShadow,kt,It,c),gt&&d.push(gt),ut=pg("offset",e.dropShadow,kt,It,c),ut&&d.push(ut)}if(e instanceof Ar$1){let kt={...a.innerShadow},It={...i.innerShadow};(kt.enabled||It.enabled)&&(d.push(kZ(e,!0)),kt.enabled||Object.assign(kt,{enabled:!0,color:{...kt.color,a:0}}),It.enabled||Object.assign(It,{enabled:!0,color:{...It.color,a:0}})),yt=mg("color",e.innerShadow,kt,It,c),yt&&d.push(yt),Pt=ei("blurRadius",e.innerShadow,kt,It,c),Pt&&d.push(Pt),Ct=ei("spread",e.innerShadow,kt,It,c),Ct&&d.push(Ct),wt=pg("offset",e.innerShadow,kt,It,c),wt&&d.push(wt)}if(e instanceof Ar$1||e instanceof an){let kt={...a.backgroundBlur},It={...i.backgroundBlur};(kt.enabled||It.enabled)&&(d.push(VZ(e,!0)),kt.enabled||Object.assign(kt,{enabled:!0,radius:0}),It.enabled||Object.assign(It,{enabled:!0,radius:0})),At=ei("radius",e.backgroundBlur,kt,It,c),At&&d.push(At)}if(e instanceof Ar$1){let kt={...a.layerBlur},It={...i.layerBlur};(kt.enabled||It.enabled)&&(d.push(zZ(e,!0)),kt.enabled||Object.assign(kt,{enabled:!0,radius:0}),It.enabled||Object.assign(It,{enabled:!0,radius:0})),Tt=ei("radius",e.layerBlur,kt,It,c),Tt&&d.push(Tt)}if(e instanceof an||e instanceof Bs){let kt=fg("cornerRadius",e,a,i,c);kt&&d.push(kt)}return d}function TE(e,a,i,o,c){let d=[];return e.data.visible&&d.push(...rN(e,a,i,c,o)),e instanceof Jt?d.push(...nN(e,a,i,c,o)):(e.data.visible&&d.push(...iN(e,a,i,o)),mn(e)?(e instanceof ur&&e.data.visible&&d.push(...ZB(e,a,i,o)),e.data.visible&&d.push(...eN(e,a,i,o))):KR(e)?e.data.visible&&d.push(...JB(e,a,i,o)):QR(e)&&d.push(...KB(e,a,i,o))),d.length?{update:g=>{d.forEach(b=>b.update(g))},start:g=>{d.forEach(b=>{var j;return(j=b.start)==null?void 0:j.call(b,g)})},end:g=>{d.forEach(b=>{var j;return(j=b.end)==null?void 0:j.call(b,g)})}}:void 0}var sN=new _;function Yf(e,a,i=!1){var d;let o=[],c=g=>{let b=g.data;delete g.states,g.currentState=null,g.reversibleToState=null,g.currentTransitionEvent=null;for(let j of b.states){let $={...j.data};g.states||(g.states={}),g.states[j.id]=Ba.patch(b,$)}aN(e.scene,g,null,a,b.events.find(j=>j.data.type==="Follow"||j.data.type==="LookAt")!==void 0),oN(e)};e.scene.traverse2D(c),e.traverseChildren(g=>{var rt,_e,st,ut,gt,yt;if(i&&((rt=g.rigidBody)==null||rt.setTranslation(g.position0,!0),(_e=g.rigidBody)==null||_e.setRotation(g.rotation0,!0),(st=g.rigidBody)==null||st.setLinvel(sN,!0),(ut=g.rigidBody)==null||ut.setAngvel(sN,!0)),!vt.is(g))return;let b=g.uuid,j=g.data;if(delete g.states,g.uuid===As)return;let $=!1;o.some(Pt=>{var wt;return(wt=e.scene.find(b))==null?void 0:wt.isDescendantOf(Pt)})?$=!0:((gt=j.physics)==null?void 0:gt.fusedBody)===!0&&j.physics.rigidBody==="dynamic"&&o.push(b),g.data=j,g.currentState=null,g.reversibleToState=null,g.currentTransitionEvent=null;for(let Pt of j.states){let wt={...Pt.data};e.data.globalPhysics.usePhysics===!0&&j.physics&&(j.physics.rigidBody==="dynamic"||$)&&(Pt.data.position!==void 0&&delete wt.position,Pt.data.rotation!==void 0&&delete wt.rotation,Pt.data.hiddenMatrix!==void 0&&delete wt.hiddenMatrix),g.states||(g.states={}),g.states[Pt.id]=Pa.patch(j,wt)}aN(e.scene,g,null,a,j.events.find(Pt=>Pt.data.type==="Follow"||Pt.data.type==="LookAt")!==void 0),oN(e),g instanceof _r$1&&g.frame&&(g.frame.traverse(Pt=>c(Pt)),(yt=g.uiCanvas)==null||yt.applySize())}),e.frame&&(e.frame.traverse(g=>c(g)),(d=e.uiCanvas)==null||d.applySize())}function oN(e){e.traverseEntity(a=>{for(let i of a.data.events){let o=[];switch(i.data.type){case"Follow":case"MouseHover":case"Scroll":case"MouseDown":case"MouseUp":case"MousePress":case"KeyUp":case"KeyDown":case"KeyPress":case"Collision":o.push(...i.data.actions);break;case"GameControl":for(let c of Object.values(i.data.gameActions))o.push(...c);break;case"DragDrop":o.push(...i.data.dragDropActions.drag,...i.data.dragDropActions.drop);break;case"Conditional":o.push(...i.data.inActions,...i.data.outActions);break}for(let c of o)if(c.data.type==="Create"&&c.data.hideBase==="Yes"){let d=e.scene.find(c.data.object);d&&(d.visible=!1)}}})}function aN(e,a,i,o,c=!1){if(a instanceof ur&&a.removeInteractionGeometry(o),a instanceof Jt?a.changeSelectedState(i,{shared:o},c):a.changeSelectedState(i,{scene:e,shared:o},c),a instanceof ur&&a.updateGeometryGroupsIfNeeded(),a instanceof wr$1&&a.updateCameraState(a.dataPatched,{scene:e,shared:o}),!(a instanceof Jt)){if(a.cloner)for(let d of a.cloner.children)d.playModeVisible=void 0;a.updateVisible(e)}}function CE(e){let a;if(e.easing===5){let{control1:i,control2:o}=e;a=`cubicBezier(
			${i[0]}, ${i[1]}, ${o[0]}, ${o[1]}
		)`}else if(e.easing===6){let{mass:i,stiffness:o,damping:c,velocity:d}=e;a=`spring( ${i}, ${o}, ${c}, ${d} )`}else{let i;switch(e.easing){case 0:i=Ma.linear;break;case 1:i=Ma.ease;break;case 2:i=Ma.easeIn;break;case 3:i=Ma.easeOut;break;case 4:i=Ma.easeInOut;break;default:i=Ma.linear}let[o,c,d,g]=i;a=`cubicBezier( ${o}, ${c}, ${d}, ${g} )`}return{duration:Math.max(e.duration,1e-4),easing:a}}function ME(e){let a={delay:0,loop:e.repeat===-1?!0:e.repeat+1};if(e.repeat===0)a.direction="normal",a.rewind=!1;else switch(e.direction){case"pingpong":a.direction="alternate",a.rewind=!1;break;case"pingpong-rewind":a.direction="alternate",a.rewind=!0;break;default:a.direction="normal",a.rewind=!1;break}switch(a.delay=0,a.endDelay=0,a.startOnceDelay=0,a.pingPongDelayCorrection=0,a.pingPongEndDelayCorrection=0,e.delayDirection){case"start-once":a.startOnceDelay=e.delay;break;case"start":a.delay=e.delay;break;case"end":a.endDelay=e.delay;break;case"start-end":case void 0:a.delay=e.delay,a.endDelay=e.delay;break}return a.direction==="alternate"&&(a.delay/=2,a.endDelay/=2,e.delayDirection==="start"?(a.pingPongDelayCorrection=a.delay,typeof a.loop=="number"&&a.loop%2===0&&(a.pingPongEndDelayCorrection=a.delay)):e.delayDirection==="end"?typeof a.loop=="number"&&a.loop%2!==0&&(a.pingPongEndDelayCorrection=a.endDelay):e.delayDirection==="start-end"&&(a.pingPongDelayCorrection=a.delay,a.pingPongEndDelayCorrection=a.endDelay)),a}var UZ={type:"beginState"},GZ={type:"completeState",isfromEntity:!1},wb=class{constructor(e,a,i,o,c,d){if(this.object=e,this.data=o,this.sharedAssets=c,this.allowSlerp=d,this.targets={t:0},this.firstLoop=!0,this._changeBegan=!1,this._changeCompleted=!0,this.onChange=()=>{this.callback&&(this.callback.update(this.targets.t),this.object.requestRender()),this.targets.t===0||this.targets.t===1?this._changeCompleted||(this._changeCompleted=!0,this._changeBegan=!1,this.onChangeComplete()):(this._changeCompleted&&(this._changeCompleted=!1),this._changeBegan||(this._changeBegan=!0,this.onChangeBegin()))},this.onChangeBegin=()=>{this.object.reversibleToState=this.to.id;let g=this.targets.t>.5?this.from.id:this.to.id;this.object.prevState!==this.object.currentState&&(this.object.prevState=this.object.currentState),this.object.currentState=g,this.object.dispatchEvent({type:"beginState",state:g}),this.object instanceof Jt||this.object.traverseEntity(b=>{b!==this.object&&b instanceof wr$1&&b.dispatchEvent(UZ)})},this.onChangeComplete=()=>{this.firstLoop&&(this.onFirstLoop(),this.firstLoop=!1),this.object.reversibleToState=this.to.id;let g=this.targets.t<.5?this.from.id:this.to.id;this.object.prevState!==this.object.currentState&&(this.object.prevState=this.object.currentState),this.object.currentState=g,this.object.dispatchEvent({type:"completeState",state:g}),this.object instanceof Jt||this.object.traverseEntity(b=>{b!==this.object&&b instanceof wr$1&&b.dispatchEvent(GZ)})},this.onFirstLoop=()=>{this.useCurrentState&&(this.callback=TE(this.object,this.from.data,this.to.data,this.sharedAssets,this.allowSlerp))},a===void 0){let g=Sb(this.object,this.object.currentState===i?this.object.prevState:this.object.currentState);if(!g)throw new Error("Missing property");this.from=g}else{let g=Sb(this.object,a);if(!g)throw new Error("Missing property");this.from=g}if(i===void 0)throw new Error("Missing property");{let g=Sb(this.object,i);if(!g)throw new Error("Missing property");this.to=g}this.useCurrentState=a===void 0||i===void 0,this.params={targets:this.targets,t:1,autoplay:!1,...ME(o),...CE(o),change:this.onChange},this.callback=TE(this.object,a===void 0?{}:this.from.data,i===void 0?{}:this.to.data,this.sharedAssets,this.allowSlerp)}get changeBegan(){return this._changeBegan}get changeCompleted(){return this._changeCompleted}},gg=class extends fr$2{constructor(e,a,i,o){var d;if(super(),this.data=e,this.page=a,this.shared=i,this.condition=o,this.toggleIsForward=!1,this.timelineNeedsRebuild=!1,this.useToggle=!1,this.onTimelineChangeComplete=()=>{var g;this.data.tweens[0].data.direction!=="normal"&&(this.toggleIsForward=!this.toggleIsForward),this.timelineNeedsRebuild!==!1&&((g=this.timeline)==null||g.pause(),this.buildTimeline({isForward:this.toggleIsForward,needsRebuild:!1,isRebuild:!0}),this.timeline.play())},!e.object)throw new Error("Missing property");let c=this.page.scene.find(e.object)??((d=this.page.uiCanvas)==null?void 0:d.find(e.object))??this.page.scene.find2DInUIObjects(e.object);if(!c)throw new Error("Missing property");if(!c.states)throw new Error("Missing property");if(this.object=c,e.tweens.length<2)throw new Error("Missing property");this.tweens=Array(this.data.tweens.length-1),this.startOnceDelay=e.tweens[0].data.delayDirection==="start-once"?e.tweens[0].data.delay:0,this.init()}get playing(){return this.timeline&&this.timeline.paused===!1}init(){this.initialCurrentState=Sb(this.object,this.object.currentState).id,this.toggleIsForward=!1}get currentState(){return this.useToggle?this.initialCurrentState:this.object.currentState}buildTimeline({isForward:e=!0,needsRebuild:a=!1,isRebuild:i=!1}={}){var o,c,d,g;try{let b=ME(this.data.tweens[0].data);i&&typeof b.loop=="number"&&b.loop--,(o=this.timeline)==null||o.pause(),this.timeline=bb.timeline({autoplay:!1,...b,...b.loop===!0||b.loop>1?{timelineChangeComplete:this.onTimelineChangeComplete}:{}});let j=this.tweens.findIndex($=>$==null?void 0:$.changeBegan);if(a===!0&&(this.timelineNeedsRebuild=!0),e){let $=j===-1?0:j;for(let rt=$;rt<this.data.tweens.length-1;rt++){let _e=this.data.tweens[rt],st=this.data.tweens[rt+1],ut;rt===$&&(this.object.wasMovedByUser===!0||((c=this.object.previousAction)==null?void 0:c.playing)===!0)?(ut=void 0,this.object instanceof wr$1&&(this.object.wasMovedByUser=!1)):ut=_e.data.state===void 0?this.currentState:_e.data.state;let gt=new wb(this.object,ut,st.data.state===void 0?this.currentState:st.data.state,st.data,this.shared,this.data.allowSlerp??!1);j!==-1&&rt===$&&Object.assign(gt.params,{startOnceDelay:0}),this.tweens[rt]=gt,this.timeline.add(gt.params,this.timeline.duration+(rt===$?b.delay:0))}this.timeline.duration+=b.endDelay}else{let $=j===-1?this.data.tweens.length-1:j+1;for(let rt=$;rt>0;rt--){let _e=this.data.tweens[rt],st=this.data.tweens[rt-1],ut;rt===$&&(this.object.wasMovedByUser===!0||((d=this.object.previousAction)==null?void 0:d.playing)===!0)?(ut=void 0,this.object instanceof wr$1&&(this.object.wasMovedByUser=!1)):ut=_e.data.state===void 0?this.currentState:_e.data.state;let gt=new wb(this.object,ut,st.data.state===void 0?this.currentState:st.data.state,_e.data,this.shared,this.data.allowSlerp??!1);j!==-1&&rt===$&&Object.assign(gt.params,{startOnceDelay:0}),this.tweens[rt-1]=gt,this.timeline.add(gt.params,this.timeline.duration+(rt===$?b.endDelay:0))}this.timeline.duration+=b.delay}}catch(b){b instanceof Error&&console.error(b.message)}((g=this.object.previousAction)==null?void 0:g.playing)===!0&&this.object.previousAction.pause(),this.object.previousAction=this}play(){if(Ut(this.shared,this.condition)===!1||this.playing)return!1;clearTimeout(this.timeoutId);let e=ME(this.data.tweens[0].data).pingPongDelayCorrection;this.timeoutId=window.setTimeout(()=>{try{this.buildTimeline(),this.timeline.play()}catch(a){a instanceof Error&&console.error(a.message)}},this.startOnceDelay+e)}pause(){var e;(e=this.timeline)==null||e.pause(),clearTimeout(this.timeoutId),this.tweens=Array(this.data.tweens.length-1),delete this.timeoutId}stop(){this.pause();let e=this.data.tweens[0].data.state===void 0?this.initialCurrentState:this.data.tweens[0].data.state;this.object instanceof Jt?this.object.changeSelectedState(e,{shared:this.shared}):this.object.changeSelectedState(e,{scene:this.page.scene,shared:this.shared}),this.object.currentState=e}seek(e){var a;this.timeline===void 0&&this.buildTimeline(),(a=this.timeline)==null||a.seek(e*this.timeline.duration,!0)}toggle(e){var a;if(Ut(this.shared,this.condition)===!1)return!1;this.useToggle=!0,clearTimeout(this.timeoutId),this.toggleIsForward=e??!this.toggleIsForward,this.playing?((a=this.timeline)==null||a.pause(),this.buildTimeline({isForward:this.toggleIsForward,needsRebuild:!0}),this.timeline.play()):this.timeoutId=window.setTimeout(()=>{var i;(i=this.timeline)==null||i.pause(),this.buildTimeline({isForward:this.toggleIsForward}),this.timeline.play()},this.startOnceDelay)}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){this.pause()}};function Sb(e,a){var c;let i,o;if(typeof a=="string"?(i=a,o=(c=e.states)==null?void 0:c[i]):a===null&&(i=null,o=e.data),!(i===void 0||o===void 0))return{id:i,data:o}}var jZ={type:"beginState"},lN={type:"completeState",isfromEntity:!1},cN={type:"requestRender"},yg=class extends fr$2{constructor(e,a,i,o){super(),this.data=e,this.page=a,this.shared=i,this.condition=o,this.toggleIsForward=!1,this.useToggle=!1,this.posStart=new _,this.posEnd=new _,this.qStart=new Qe,this.qEnd=new Qe,this.zoomStart=1,this.zoomEnd=1}init(){}get playing(){return this.animation&&this.animation.began&&!this.animation.completed}buildAnimation(e=!1){if(!this.data.animate)return;let a=this.page.scene.find(this.data.targetCamera);if(!a||!a.visible)throw new ReferenceError("Target camera not founded or not visible");let i={t:0};this.posStart.copy(this.page.activeCamera.position),this.qStart.copy(this.page.activeCamera.quaternion),this.zoomStart=this.page.activeCamera.zoom,this.animation=bb({targets:i,t:1,...CE(this.data),update:()=>{i.t===0&&(this.useToggle&&!this.toggleIsForward?(this.posEnd.copy(this.fromCamera.position),this.qEnd.copy(this.fromCamera.quaternion),this.zoomEnd=this.fromCamera.zoom,this.switchCamera(this.fromCamera.uuid)):(this.posEnd.copy(a.position),this.qEnd.copy(a.quaternion),this.zoomEnd=a.zoom,this.fromCamera=this.page.activeCamera,this.switchCamera(a.uuid)),this.page.activeCamera.dispatchEvent(jZ));let o=this.page.activeCamera;o.position.lerpVectors(this.posStart,this.posEnd,i.t),o.quaternion.slerpQuaternions(this.qStart,this.qEnd,i.t),o.zoom=this.zoomStart+(this.zoomEnd-this.zoomStart)*i.t,o.wasMovedBySwitchCameraAction=!0,o.updateMatrix(),o.updateMatrixWorld(),o.updateProjectionMatrix(),o.dispatchEvent(cN),i.t===1&&o.dispatchEvent(lN)}})}switchCamera(e){let a=this.page.activeCamera,i=this.page.scene.find(e);if(!i||!i.visible)throw new ReferenceError("Target camera not founded or not visible");this.page.switchActiveCamera(i),a.dispatchEvent({type:"cameraChange",camera:i})}play(){if(Ut(this.shared,this.condition)===!1)return!1;if(!this.playing&&this.page.activeCamera.uuid!==this.data.targetCamera)try{clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{var e;delete this.timeoutId,this.data.animate?(this.buildAnimation(),(e=this.animation)==null||e.play()):this.switchCamera(this.data.targetCamera)},this.data.delay*1e3)}catch{}}pause(){var e;(e=this.animation)==null||e.pause(),clearTimeout(this.timeoutId),delete this.timeoutId}toggle(e){var a,i;if(Ut(this.shared,this.condition)===!1)return!1;this.useToggle=!0,clearTimeout(this.timeoutId),this.toggleIsForward=e??!this.toggleIsForward;try{this.playing?((a=this.animation)==null||a.pause(),this.buildAnimation(!0),(i=this.animation)==null||i.play()):this.timeoutId=window.setTimeout(()=>{var o,c;delete this.timeoutId,this.data.animate?((o=this.animation)==null||o.pause(),this.buildAnimation(),(c=this.animation)==null||c.play()):(this.toggleIsForward?(this.fromCamera=this.page.activeCamera,this.switchCamera(this.data.targetCamera)):this.switchCamera(this.fromCamera.uuid),this.page.activeCamera.dispatchEvent(lN),this.page.activeCamera.dispatchEvent(cN))},this.data.delay*1e3)}catch{}}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){this.pause(),this.toggleIsForward=!1}},vg=class extends fr$2{constructor(e,a,i,o,c){var $,rt,_e;super(),this.page=a,this.animationControls=i,this.shared=o,this.condition=c,this.startOnceDelay=0,this.toggleIsForward=!1;let d=e.object,g=a.scene.find(e.object);g&&Array.isArray(g.identity)&&(d=g.identity[0]),this.data={...e,object:d};let b=this.animationControls.clipIdToAction[e.clipId+"/"+d];this.duration=(($=b==null?void 0:b.getClip())==null?void 0:$.duration)??1;let j=((_e=(rt=b==null?void 0:b.getClip())==null?void 0:rt.tracks[0])==null?void 0:_e.times.length)??1/0;this.leftFrameTime=this.data.crop[0]/j*this.duration,this.rightFrameTime=this.data.crop[1]/j*this.duration,this.startOnceDelay=e.delay}get playing(){var e;return((e=this.threeAnimAction)==null?void 0:e.isRunning())??!1}play(e=!1){if(Ut(this.shared,this.condition)===!1)return!1;window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{var i;if(this.threeAnimAction=this.animationControls.play(this.data),!this.threeAnimAction)return;this.threeAnimAction.reset(),this.threeAnimAction.time=this.leftFrameTime,this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime;let a=this.data.object;Object.entries(this.animationControls.clipIdToAction).forEach(([o,c])=>{let d=o.split("/")[1];this.threeAnimAction!==c&&d===a&&c.isRunning()&&(e?c.fadeOut(.2):c.stop())}),e&&((i=this.threeAnimAction)==null||i.fadeIn(.2))},this.startOnceDelay)}pause(){this.threeAnimAction&&(this.threeAnimAction.paused=!0),window.clearTimeout(this.timeoutId),delete this.timeoutId}stop(){var e;(e=this.threeAnimAction)==null||e.fadeOut(.2)}seek(e){this.threeAnimAction=this.animationControls.play(this.data),this.threeAnimAction&&(this.threeAnimAction.paused=!0,this.threeAnimAction.time=Me.clamp(this.threeAnimAction.time+1/60*e,this.leftFrameTime,this.rightFrameTime-16e-5),this.animationControls.needsUpdate=!0,this.animationControls.requestRender())}toggle(e,a=!1){if(Ut(this.shared,this.condition)===!1)return!1;this.toggleIsForward=e??!this.toggleIsForward,this.threeAnimAction&&(this.threeAnimAction._loopCount=0),this.playing?this.threeAnimAction&&(this.threeAnimAction.timeScale=this.toggleIsForward?1:-1,this.toggleIsForward?(this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime):(this.threeAnimAction._clip.start=this.rightFrameTime,this.threeAnimAction._clip.duration=this.leftFrameTime)):this.timeoutId=window.setTimeout(()=>{var i;if(this.threeAnimAction=this.animationControls.play(this.data),this.threeAnimAction){this.toggleIsForward?(this.threeAnimAction.time=this.leftFrameTime,this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime):(this.threeAnimAction.time=this.rightFrameTime,this.threeAnimAction._clip.start=this.rightFrameTime,this.threeAnimAction._clip.duration=this.leftFrameTime),this.threeAnimAction.paused=!1,this.threeAnimAction.timeScale=this.toggleIsForward?1:-1;let o=this.data.clipId.split("/")[1];Object.entries(this.animationControls.clipIdToAction).forEach(([c,d])=>{let g=c.split("/")[1];this.threeAnimAction!==d&&g===o&&d.isRunning()&&(a?d.fadeOut(.2):d.stop())}),a&&((i=this.threeAnimAction)==null||i.fadeIn(.2))}},this.startOnceDelay)}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){var a;let e=(a=this.animationControls.clipIdToAction[this.data.clipId+"/"+this.data.object])==null?void 0:a.getClip();e&&(e.duration=this.duration),this.pause()}},xg=class{constructor(e,a,i,o,c){this.data=e,this.page=a,this.eventManager=i,this.shared=o,this.condition=c,this.timeOutId=-1,this.scene=a.scene}dispatch(){if(Ut(this.shared,this.condition)===!1)return!1;this.data.target!==this.page.uuid&&(window.clearTimeout(this.timeOutId),this.timeOutId=window.setTimeout(()=>{this.play()},this.data.delay*1e3))}dispose(){window.clearTimeout(this.timeOutId)}play(){if(this.scene.children.every(a=>a.uuid!==this.data.target))return;this.data.transition==="fade"&&this.data.duration>0&&this.eventManager.eventContext.renderer.renderFromSceneForSceneTransitionPass(this.scene,this.scene.activeCamera,this.data.duration*1e3),this.eventManager.deactivate(),this.eventManager.controlsManager.deactivate();let e=this.scene.activeCamera;this.scene.updatePage(this.data.target),this.scene.traverseVisibleEntity(a=>{a.type==="ParticleSystem"&&(a.sleep(),a.wakeUp(),a.data.autoPlay?a.start():a.stop())}),this.scene.activePage.switchToPlayCamera(),this.scene.activeCamera.copyViewPlaneSize(e),Yf(this.scene.activePage,this.shared),this.eventManager.activate(),this.eventManager.controlsManager.activate(this.eventManager)}},bg=class{constructor(e,a,i,o){this.data=e,this.page=a,this.shared=i,this.condition=o,this.evaluatedCondition=!1}checkConditions(){this.evaluatedCondition=Ut(this.shared,this.condition)}dispatch(){if(this.evaluatedCondition===!1)return!1;let e=this.shared.getVariable(this.data.variableId),a=H0(this.data.expression,this.shared,Yi.typeOfVariable(e));a!==void 0&&this.shared.updateVariable(this.data.variableId,typeof a=="string"?{textValue:a}:a)}dispose(){}},Sg=class{constructor(e,a,i,o){this.data=e,this.page=a,this.shared=i,this.condition=o,this.timeoutId=null}dispatchInner(){if(Ut(this.shared,this.condition)===!1)return!1;let e=this.shared.getDynamicVariablePlayState(this.data.variableId);if(this.data.mode==="PlayPause")this.shared.getDynamicVariableToggleIsForward(this.data.variableId)===void 0&&this.shared.setDynamicVariableToggleIsForward(this.data.variableId,!0),this.shared.setDynamicVariablePlayState(this.data.variableId,e==="Playing"?"Paused":"Playing");else if(this.data.mode==="Play"&&e!=="Playing")this.shared.getDynamicVariableToggleIsForward(this.data.variableId)===void 0&&this.shared.setDynamicVariableToggleIsForward(this.data.variableId,!0),this.shared.setDynamicVariablePlayState(this.data.variableId,"Playing");else if(this.data.mode==="Stop"&&e!=="Stopped")this.shared.setDynamicVariablePlayState(this.data.variableId,"Stopped");else if(this.data.mode==="Pause"&&e!=="Paused")this.shared.setDynamicVariablePlayState(this.data.variableId,"Paused");else if(this.data.mode==="Restart")this.shared.setDynamicVariablePlayState(this.data.variableId,"Restarted");else if(this.data.mode==="Toggle"){let a=this.shared.getDynamicVariableToggleIsForward(this.data.variableId);e==="Playing"?this.shared.setDynamicVariableToggleIsForward(this.data.variableId,a===void 0?!1:!a):(this.shared.setDynamicVariableToggleIsForward(this.data.variableId,!a),this.shared.setDynamicVariablePlayState(this.data.variableId,"Playing"))}}dispatch(){let e=this.data.delay,a=this.shared.getDynamicVariablePlayState(this.data.variableId);this.data.mode==="PlayPause"&&a==="Playing"&&(e=this.data.pauseDelay),e!==0?(this.timeoutId&&window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{this.timeoutId=null,this.dispatchInner()},e)):this.dispatchInner()}dispose(){this.timeoutId&&window.clearTimeout(this.timeoutId)}};function Ut(e,a){if(a===void 0)return!0;if(a.expression.length===0)return!1;let i=H0(a.expression,e,"boolean");return a.negate?!i:!!i}function Mr$1(e,a,i,o,c,d){let g={Audio:[],Video:[],Particles:[],Link:[],Destroy:[],Create:[],Reset:[],Transition:[],SwitchCamera:[],Animation:[],SceneTransition:[],SetVariable:[],DynamicVariablePlay:[]},b=j=>({id:$,data:rt})=>{try{rt.type==="Audio"&&!(d instanceof Jt)?Tn[e.type].includes("Audio")&&g.Audio.push(new ag($,rt,d,o,j)):rt.type==="Video"&&!(d instanceof Jt)?Tn[e.type].includes("Video")&&g.Video.push(new wg($,rt,d,o,j)):rt.type==="Particles"?Tn[e.type].includes("Particles")&&g.Particles.push(new lg(rt,i,o,j)):rt.type==="Link"?Tn[e.type].includes("Link")&&g.Link.push(new pb(rt,c.controlsManager,o,j)):rt.type==="Create"?Tn[e.type].includes("Create")&&g.Create.push(new Ag(rt,i,c.controlsManager,o,j)):rt.type==="Destroy"?Tn[e.type].includes("Destroy")&&g.Destroy.push(new cg(rt,i,c.controlsManager,o,j)):rt.type==="Reset"?Tn[e.type].includes("Reset")&&g.Reset.push(new ug(rt,i,o,c,j)):rt.type==="Transition"?Tn[e.type].includes("Transition")&&g.Transition.push(new gg(rt,i,o,j)):rt.type==="SwitchCamera"?Tn[e.type].includes("SwitchCamera")&&g.SwitchCamera.push(new yg(rt,i,o,j)):rt.type==="SceneTransition"?Tn[e.type].includes("SceneTransition")&&g.SceneTransition.push(new xg(rt,i,c,o,j)):rt.type==="Animation"?Tn[e.type].includes("Animation")&&g.Animation.push(new vg(rt,i,c.animationControls,o,j)):rt.type==="SetVariable"?Tn[e.type].includes("SetVariable")&&g.SetVariable.push(new bg(rt,i,o,j)):rt.type==="DynamicVariablePlay"?Tn[e.type].includes("DynamicVariablePlay")&&g.DynamicVariablePlay.push(new Sg(rt,i,o,j)):rt.type==="Conditional"&&Tn[e.type].includes("Conditional")&&(rt.ifActions.forEach(b({expression:rt.condition,negate:!1})),rt.elseActions.forEach(b({expression:rt.condition,negate:!0})))}catch{}};return a.forEach(b()),g}function hr$1(e){Object.values(e).forEach(a=>{a.forEach(i=>{(i instanceof ag||i instanceof wg||i instanceof lg||i instanceof vg||i instanceof gg||i instanceof Ag||i instanceof cg||i instanceof yg||i instanceof xg||i instanceof ug||i instanceof bg||i instanceof Sg)&&i.dispose()})})}function uN(e,a){let i;if("material"in e){let o=e.material;Array.isArray(o)?i=e.material[0].layers.find(c=>c.uuid===a):i=e.material.layers.find(c=>c.uuid===a)}if(i)return i.color.texture.image.img instanceof HTMLVideoElement?i.color.texture.image.img:void 0}var hN=new Map,_g=new Map,Qa=class{constructor(e,a,i){this.data=a,this.delay=0,this.status="stopped";let{layerId:o,loop:c,volume:d,delay:g}=a;if(this.object=i,o===void 0)throw new Error("Missing property");let b=uN(i,o);b&&(this.videoElement=b,this.videoElement.loop=c===1/0,Uh&&(this.videoElement.autoplay=!0),d!==void 0&&(this.videoElement.volume=d)),g!==void 0&&(this.delay=g),_g.has(i.uuid)?_g.get(i.uuid).push(this):_g.set(i.uuid,[this]),hN.set(e,this),this.pause()}mute(){!this.videoElement||(this.videoElement.muted=!0)}unMute(){!this.videoElement||(this.videoElement.muted=!1)}play(e){if(!this.videoElement)return;let a=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);e?(this.mute(),this.delay+=150):a?(this.mute(),window.setTimeout(()=>{this.unMute()},100)):this.unMute(),this.delayTimerId=window.setTimeout(()=>{if(!this.videoElement)return;let i=this.videoElement.play();i!==void 0&&i.then(o=>{}).catch(o=>{this.play()}),this.clearDelay()},this.delay),this.status="playing"}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}pause(){!this.videoElement||(this.videoElement.pause(),this.status="paused")}stop(){!this.videoElement||(this.videoElement.pause(),this.videoElement.currentTime=0,this.status="stopped",this.clearDelay())}playByToggle(){this.data.toggle==="stop"?this.status==="playing"?this.stop():(this.stop(),this.play()):this.data.toggle==="pause"?this.status==="playing"?this.pause():this.play():(this.stop(),this.play())}dispose(){!this.videoElement||(this.stop(),this.videoElement.muted=!0)}},Xf=class{constructor(e){this.data=e}dispatch(){this.data.playVideo?this.pauseVideo(this.data.playVideo):this.data.object?this.pauseAllVideosFromObject(this.data.object):this.pauseAllVideos()}pauseVideo(e){let a=hN.get(e);!a||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{a[this.data.interaction](),this.disposeDelay()},this.data.delay)):a[this.data.interaction]())}pauseAllVideosFromObject(e){let a=_g.get(e);!(a!=null&&a.length)||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{a.forEach(i=>i[this.data.interaction]()),this.disposeDelay()},this.data.delay)):a.forEach(i=>i[this.data.interaction]()))}pauseAllVideos(){let e=[..._g.values()];!e.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{e.forEach(a=>{a.forEach(i=>{i[this.data.interaction]()})}),this.disposeDelay()},this.data.delay)):e.forEach(a=>{a.forEach(i=>{i[this.data.interaction]()})}))}disposeDelay(){clearTimeout(this.timeoutId),delete this.timeoutId}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},wg=class{constructor(e,a,i,o,c){if(this.data=a,this.shared=o,this.condition=c,a.interaction==="play")this.interaction=new Qa(e,a,i);else if(a.interaction==="pause"||a.interaction==="stop")this.interaction=new Xf(a);else throw new Error("Missing property")}dispatchBasic(){if(Ut(this.shared,this.condition)===!1)return!1;this.interaction instanceof Qa?this.interaction.playByToggle():this.interaction.dispatch()}dispatchConditional(){if(Ut(this.shared,this.condition)===!1)return!1;this.interaction instanceof Qa?this.interaction.play():this.interaction.dispatch()}dispose(){this.interaction.dispose()}},dN=(()=>{let e,a,i,o;function c(b){!e&&!fN()&&(a==null?void 0:a.sharedGameControlGlobals.createdObjects.length)>0&&(e=requestAnimationFrame(d)),b&&(a=b,o=b.requestRender)}function d(b){let j=i?b-i:0,$=a.sharedGameControlGlobals.createdObjects,rt=a.sharedGameControlGlobals.nCreatedPerAction,_e=$.length,st=0;for(;st<_e;){let ut=$[st];ut.userData.createdTime===void 0&&(ut.userData.createdTime=b),ut.userData.lifetime===void 0&&ut.userData.quantity===void 0||ut.userData.lifetime&&b-ut.userData.createdTime<ut.userData.lifetime||ut.userData.quantity&&rt[ut.userData.actionId]<=ut.userData.quantity?(ut.userData.velocity&&(ut.position.addScaledVector(ut.userData.velocity,j/1e3),ut.updateMatrix(),o()),st++):(rt[ut.userData.actionId]>ut.userData.quantity&&rt[ut.userData.actionId]--,$.splice(st,1),ut.removeFromParent(),a.sharedGameControlGlobals.rapierWorld&&ut.rigidBody?(a.sharedGameControlGlobals.colliderToEntity.delete(ut.rigidBody.collider(0).handle),a.sharedGameControlGlobals.rapierWorld.removeRigidBody(ut.rigidBody)):(ut.bvhGeometry=void 0,a.sharedGameControlGlobals.entitiesWithTransformAnim=a.sharedGameControlGlobals.entitiesWithTransformAnim.filter(gt=>gt.bvhGeometry!==void 0)),_e--,o())}e=st>0?requestAnimationFrame(d):void 0,i=st>0?b:void 0}function g(){fN()?e&&(cancelAnimationFrame(e),e=void 0,i=void 0):c()}return typeof document<"u"&&document.addEventListener("visibilitychange",g),c})();function fN(){return!!document&&document.hidden}var pN=new Qe,HZ=new _,WZ=new _,Ag=class{constructor(e,a,i,o,c){this.data=e,this.page=a,this.controlsManager=i,this.shared=o,this.condition=c,this.intervalId=null,this.timeoutIdQueue=[],this.uniqueId=Me.generateUUID(),this.dispatch=()=>{if(Ut(this.shared,this.condition)===!1)return!1;this.data.delay?this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3)):this.dispatchInner()},this.dispatchFromStart=()=>{if(Ut(this.shared,this.condition)===!1)return!1;this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3))},this.dispatchThrottled=Kw(this.dispatch,1e3/this.data.creationSpeed),this.dispatchStart=()=>{this.intervalId===null&&(this.intervalId=window.setInterval(this.dispatch,1e3/this.data.creationSpeed))},this.dispatchStop=()=>{this.intervalId!==null&&(window.clearInterval(this.intervalId),this.intervalId=null)},this.dispatchInner=()=>{this.timeoutIdQueue.shift();let g=new Vr(this.object);if(g.playModeVisible=!0,g.expand(),this.data.coordinateSystem!=="world"){let j=this.data.coordinateSystem,$=this.page.scene.find(j);$&&($.updateMatrixWorldSVD(),g.hiddenMatrix.copy($.matrixWorldRigid))}g.position.fromArray(this.data.position),g.rotation.fromArray(this.data.rotation),g.updateMatrix(),this.page.add(g);let b=this.controlsManager.sharedGameControlGlobals;b.createdObjects.push(g),b.nCreatedPerAction[this.uniqueId]===void 0?b.nCreatedPerAction[this.uniqueId]=1:b.nCreatedPerAction[this.uniqueId]++,g.updateWorldMatrix(!0,!0),g.traverseObject(this.traverseObjectCB),dN(),this.controlsManager.requestRender()},this.traverseObjectCB=g=>{var rt,_e,st,ut;g.hasNonUniformScale&&g.updateMatrixWorldSVD();let b;if(this.controlsManager.sharedGameControlGlobals.rapierWorld){if(g instanceof Ji)if(g.objectForSample){if(g.objectForSample.dataPatched.physics.fusedBody)return;b=g.object}else return g.object.dataPatched.physics.fusedBody===!0&&g.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(g instanceof Vr)b=g.object;else if(b=g,(rt=b.dataPatched.cloner)==null?void 0:rt.hideBase)return!0}else{if(g instanceof Ji)return;g instanceof Vr?b=g.object:b=g}this.data.destroy==="Time"?g.userData.lifetime=this.data.lifetime*1e3:this.data.destroy==="Quantity"&&(g.userData.quantity=this.data.destroyAfterQuantity,g.userData.actionId=this.uniqueId);let j=new _().fromArray(this.data.velocity),$=b.dataPatched;if(!($.physics.enabled==="visibility"?!$.visible:!$.physics.enabled)&&(this.controlsManager.sharedGameControlGlobals.rapierWorld?(this.controlsManager.addRigidBody(g,b,{fromCreate:!0,dynamic:this.data.dynamic}),this.data.destroy==="Collision"&&((_e=g.rigidBody)==null||_e.collider(0).setActiveEvents(1),g.userData.hasCollisionDestroy=!0),g.matrixWorld.decompose(HZ,pN,WZ),j.applyQuaternion(pN),this.data.velocity.some(gt=>gt!==0)&&this.data.dynamic&&((st=g.rigidBody)==null||st.setLinvel(j.divideScalar(this.controlsManager.pixelsPerMeter),!0))):("geometry"in g.object&&this.controlsManager.addBoundsTree(g),this.data.velocity.some(gt=>gt!==0)&&this.data.dynamic&&(g.userData.velocity=j)),((ut=b.dataPatched.physics)==null?void 0:ut.fusedBody)===!0))return!0};let d=this.page.scene.find(this.data.object);if(!d)throw new Error("Missing Property");if(this.object=d,this.data.coordinateSystem!=="world"&&!this.page.scene.find(this.data.coordinateSystem))throw new Error("Missing Property");dN(i)}dispose(){this.intervalId!==null&&(window.clearInterval(this.intervalId),this.intervalId=null),this.timeoutIdQueue.forEach(e=>window.clearTimeout(e)),this.dispatchThrottled.cancel(),this.page.remove(...this.controlsManager.sharedGameControlGlobals.createdObjects),this.controlsManager.sharedGameControlGlobals.createdObjects=[]}},IE=200,PE=.02,DE=.3,qZ=65;new _;var mN=new _,gN=new _,YZ=new _,Bn=new _,Kn=new _,lc=new _,OE=new ce$1,yN=new ce$1,XZ=new ce$1;new ce$1;var po=new Qe,Ka=new Qe,na=new or$1(0,0,0,"YXZ"),QZ=new _(1,0,0),mo=new _(0,1,0),KZ=new _(0,0,1),vN=new _(1,1,1);new Br;var ZZ=1,JZ=.025,$Z=16e-6,xN=12,eJ=20,en$1=new Di,ks=new Wt,tJ={type:"requestRender"},rJ={type:"updateMatrix"},bN=Math.PI/6,Ab=class extends fr$2{constructor(e,a,i,o,c,d,g,b,j){var gt;super(),this.object=e,this.domElement=a,this.data=i,this.gloabalPhysics=o,this.controlsManager=c,this.cameraFollow=d,this.camera=g,this.page=b,this.sharedAssets=j,this.enableDamping=!0,this.hiddenMatrix0=new ce$1,this.target0=new _,this.zoom0=1,this.rotForce=1,this.moveForce=1,this.pixelsPerMeter=IE,this.euler0=new or$1(0,0,0,"YXZ"),this.position0Cam=new _,this.quat0Cam=new Qe,this.scale0Cam=new _,this.hiddenMatrix0Cam=new ce$1,this.threshEndTranslate=.01,this.threshEndRotate=1e-8,this.threshEndRotVel=.005,this.collider={type:"capsule",radius:40,segment:new Di(new _(0,-40,0),new _(0,40,0)),matrix:new ce$1,position:new _,rotation:new Qe},this.euler=new or$1(0,0,0,"YXZ"),this.eulerDelta=new _,this.lastPosition=new _,this.lastCameraQuaternion=new Qe,this.lastCameraPosition=new _,this.PI_2=Math.PI/2,this.prevMouse=new z$2,this.velocityTarget=new _,this.velocity=new _,this.directionXZ=new _,this.rotVelocityStick=new _,this.rotVelocityTarget=new _,this.rotVelocity=new _,this.rotDirection=new _,this.nonColliderRotOffset=new ce$1,this.nonColliderPosOffset=new ce$1,this.firstPointerId=-1,this.rot=new _,this.path=[],this.movementState={moveNegZ:0,movePosZ:0,moveNegX:0,movePosX:0,moveNegY:0,movePosY:0,rotPosX:0,rotNegX:0,rotPosY:0,rotNegY:0,jump:0,run:0},this.vrEulerYOffset=0,this.onObject=!1,this.actionState={},this.keyAssignments=[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX","ArrowUp"],["rotPosY","ArrowLeft"],["rotNegX","ArrowDown"],["rotNegY","ArrowRight"],["jump"," "]],this.collisionEnabled=!0,this.offsetMatrix=new ce$1,this.objectToTarget=new _,this.objectToTarget0=new _,this.objectToCamXZ=new _,this.objectToCamXZ0=new _,this.targetToCamera=new _,this.targetToCamera0=new _,this.cameraPolarAxis0=new _,this.targetPos=new _,this.targetQuat=new Qe,this.lerpFactorPos=new _().setScalar(.3),this.lerpFactorPosStart=.3,this.lerpFactorPosEnd=.3,this.lerpFactorRotStart=.3,this.lerpFactorRotEnd=.3,this.lerpFactorPosCamera=.3,this.lerpFactorRotCamera=.3,this.objXZQuat=new Qe,this.objXZQuatInv=new Qe,this.objXZRotMat=new ce$1,this.isFirstPerson=!1,this.didHit=!1,this.groundVelocity=new _,this.pushedVelocity=new _,this.groundYRotation=0,this.objectRealQuat=new Qe,this.colliderWorldQuat=new Qe,this.groundNormal=new _,this.groundTilt=new Qe,this.groundTiltInv=new Qe,this.lastHitObj=null,this.isFirstFrame=!0,this.rotationAccumWhenOrientWithCamera=0,this.navMeshPathDest=null,this.position=new _,this.quaternion=new Qe,this.scale=new _,this.initialAction=!0,this.onPointerDown=yt=>{yt.target!==this.domElement||this.firstPointerId!==-1||(this.firstPointerId=yt.pointerId,this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),this.rotBy!=="keys"&&!Ii&&(!Zw||Jw>=15.5)&&this.domElement.requestPointerLock(),this.prevMouse.set(yt.clientX,yt.clientY))},this.onPointerUp=yt=>{this.firstPointerId=-1,this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),yt.pointerType==="mouse"&&this.domElement.ownerDocument.exitPointerLock()},this.onPointerMove=yt=>{if(yt.pointerId!==this.firstPointerId)return;let Pt=yt.clientX-this.prevMouse.x,wt=yt.clientY-this.prevMouse.y;this.prevMouse.set(yt.clientX,yt.clientY),yt.pointerType==="mouse"&&this.rotBy!=="keys"&&(Zw&&Jw<15.5&&!Ii?(this.eulerDelta.y=-Pt*this.mouseOrbitSensitivity,this.eulerDelta.x=-wt*this.mouseOrbitSensitivity):(this.eulerDelta.y=-yt.movementX*this.mouseOrbitSensitivity,this.eulerDelta.x=-yt.movementY*this.mouseOrbitSensitivity)),yt.pointerType!=="mouse"&&this.rotByTouch==="drag"&&(this.eulerDelta.y=-Pt*this.mouseOrbitSensitivity*5,this.eulerDelta.x=-wt*this.mouseOrbitSensitivity*5),this.controlsManager.requestRender()},this.onPointerlockChange=yt=>{this.domElement.ownerDocument.pointerLockElement===this.domElement?Ab.isLocked=!0:Ab.isLocked=!1},this.onPointerlockError=()=>{console.error("SPE.GameControls: Unable to use Pointer Lock API")},this.handleVisibilityChange=()=>{if(document!=null&&document.hidden)for(let yt in this.movementState)this.movementState[yt]=0},this.onKeyDown=yt=>{!(yt.target instanceof HTMLInputElement)&&(yt.code==="ArrowLeft"||yt.code==="ArrowUp"||yt.code==="ArrowRight"||yt.code==="ArrowDown"||yt.code==="Space")&&yt.preventDefault();for(let Pt of this.keyAssignments)if(yt.key.toUpperCase()===Pt[1]||yt.key===Pt[1]){this.movementState[Pt[0]]=1;break}this.controlsManager.requestRender()},this.onKeyUp=yt=>{for(let Pt of this.keyAssignments)if(yt.key.toUpperCase()===Pt[1]||yt.key===Pt[1]||yt.code.slice(3,yt.code.length).toUpperCase()===Pt[1]){this.movementState[Pt[0]]=0;break}},this.copyVRGamePadValues=(yt,Pt)=>{for(let wt=2;wt<4;wt++){let Ct=yt.axes[wt];Pt===0?wt===2?this.movementState.movePosX=Ct:this.movementState.movePosZ=Ct:(yt.buttons[3].pressed?this.movementState.jump=1:this.movementState.jump=0,wt===2?(Math.abs(this.movementState.rotPosY)<.3&&Math.abs(Ct)>=.3&&(this.vrEulerYOffset+=Ct<0?1:-1),this.movementState.rotPosY=Ct):this.moveMode==="fly"&&(this.movementState.moveNegY=Ct))}},this.sharedGameControlGlobals=c.sharedGameControlGlobals,e===g&&(this.isFirstPerson=!0),this.hiddenMatrix0.copy(this.object.hiddenMatrix),this.object.parent?this.object.hiddenMatrix.copy(this.object.parent.matrixWorld).invert():this.object.hiddenMatrix.identity(),this.object.matrix.copy(this.object.matrixWorld),this.object.matrix.decompose(this.position,this.quaternion,this.scale),this.euler0.setFromQuaternion(this.quaternion,"YXZ");let $=this.euler0.clone(),rt=$.y;if(this.objectRealQuat.copy(this.quaternion),$.y=0,this.quaternion.setFromEuler($),this.objXZQuat.copy(this.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.quaternion),$.set(0,rt,0),this.quaternion.setFromEuler($),this.rot.setFromEuler($),this.object.matrixAutoUpdate=!1,(this.isFirstPerson||this.cameraFollow===!0)&&(this.target0.copy(this.camera.getTarget()),this.zoom0=this.camera.zoom),this.cameraFollow===!0){this.position0Cam.copy(this.camera.position),this.quat0Cam.copy(this.camera.quaternion),this.scale0Cam.copy(this.camera.scale),this.hiddenMatrix0Cam.copy(this.camera.hiddenMatrix),this.camera.parent?(this.camera.hiddenMatrix.copy((gt=this.camera)==null?void 0:gt.parent.matrixWorld),this.camera.matrix.copy(this.camera.matrixWorld)):this.camera.hiddenMatrix.identity(),this.camera.matrix.copy(this.camera.matrixWorld),this.camera.matrix.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.matrixAutoUpdate=!1,this.offsetMatrix.copy(this.object.matrix).invert().multiply(this.camera.matrix);let yt=new _(0,0,-1).applyQuaternion(this.camera.quaternion),Pt=new _().subVectors(this.position,this.camera.position);this.objectToCamXZ.copy(Pt),this.objectToCamXZ.y=0,this.objectToCamXZ0.copy(this.objectToCamXZ);let wt,Ct;Math.abs(yt.y)<1e-6?(Pt.y=0,yt.y=0,Ct=Pt.projectOnVector(yt)):Pt.y/yt.y>0?Ct=yt.multiplyScalar(Pt.y/yt.y):Ct=yt.multiplyScalar(Pt.length()),this.targetToCamera0.copy(Ct).negate(),wt=this.camera.position.clone().add(Ct),this.objectToTarget0.subVectors(wt,this.position);let At=new or$1().setFromQuaternion(this.camera.quaternion,"YXZ");this.cameraPolarOffset=-At.x,At.x=0,At.z=0,At.y-=Math.PI/2,this.cameraPolarAxis0.set(0,0,-1).applyEuler(At)}if(this.object instanceof wr$1&&(this.object.matrixAutoUpdate=!1),this.euler.setFromQuaternion(this.quaternion,"YXZ"),this.rotByTouch=i.rotByTouch??"joystick",this.rotBy=i.rotBy??"keys",this.rotationMode=i.rotationMode??"normal",this.moveMode=i.moveMode??"walk",this.collisionEnabled=i.collisionEnabled,this.speedTranslate=(i.speedTranslate??250)*ZZ,this.speedOrbit=(i.speedRotate??100)*JZ,this.mouseOrbitSensitivity=(i.speedRotate??100)*$Z,this.keyAssignments=i.keyAssignments.map(yt=>{let Pt=[yt[0],yt[1]];return Pt[1]==="▲"?Pt[1]="ArrowUp":Pt[1]==="◀"?Pt[1]="ArrowLeft":Pt[1]==="▼"?Pt[1]="ArrowDown":Pt[1]==="▶"?Pt[1]="ArrowRight":Pt[1]==="⇧"?Pt[1]="Shift":Pt[1]==="↵"?Pt[1]="Enter":Pt[1]==="Space"?Pt[1]=" ":Pt[1]==="⌘"?Pt[1]="Meta":Pt[1]==="Ctrl"?Pt[1]="Control":Pt[1]==="Esc"&&(Pt[1]="Escape"),Pt}),i.rotBy==="mouse"){let yt;yt=this.keyAssignments.findIndex(Pt=>Pt[0]==="rotNegX"),yt!==-1&&(this.keyAssignments[yt][1]=""),yt=this.keyAssignments.findIndex(Pt=>Pt[0]==="rotPosX"),yt!==-1&&(this.keyAssignments[yt][1]=""),yt=this.keyAssignments.findIndex(Pt=>Pt[0]==="rotPosY"),yt!==-1&&(this.keyAssignments[yt][1]=""),yt=this.keyAssignments.findIndex(Pt=>Pt[0]==="rotNegY"),yt!==-1&&(this.keyAssignments[yt][1]="")}this.lerpFactorPosStart=1-.02**(1/((i.delayPos[0]??.3)*60)),this.lerpFactorPosEnd=1-.02**(1/((i.delayPos[1]??.3)*60)),this.lerpFactorPos.setScalar(this.lerpFactorPosStart),this.lerpFactorRotStart=1-.02**(1/((i.delayRot[0]??.3)*60)),this.lerpFactorRotEnd=1-.02**(1/((i.delayRot[1]??.3)*60)),this.lerpFactorPosCamera=1-.02**(1/((i.delayPosCamera??.3)*60)),this.lerpFactorRotCamera=1-.02**(1/((i.delayRotCamera??.3)*60)),this.gravity=(this.gloabalPhysics.gravity??Bl.defaultData.gravity)*xN,this.usePhysics=this.gloabalPhysics.usePhysics??Bl.defaultData.usePhysics,this.jumpPower=i.jumpPower*eJ,this.resetYPosition=this.position.y+Math.abs(i.resetYPosition)*(this.gravity>0?1:-1),this.alignToGround=i.alignToGround??!1,this.orientMode=i.autoOrientMove?i.orientMode:"none",this.orientWith=i.orientWith??cd.defaultDataThirdPerson.orientWith,this.slopeThresh=qZ*Math.PI/180,i.collider.type==="capsule"?(this.collider.radius=i.collider.radius,this.collider.segment.start.y=i.collider.height/2-i.collider.radius,this.collider.segment.end.y=-this.collider.segment.start.y,this.offset=i.collider.height*PE/this.pixelsPerMeter,this.stepThresh=i.collider.height*DE/this.pixelsPerMeter,this.colliderHeight=i.collider.height):i.collider.type==="sphere"?(this.collider.radius=i.collider.radius,this.collider.segment.start.y=0,this.collider.segment.end.y=0,this.offset=2*i.collider.radius*PE/this.pixelsPerMeter,this.stepThresh=2*i.collider.radius*DE/this.pixelsPerMeter,this.colliderHeight=i.collider.radius*2):(this.offset=i.collider.height*PE/this.pixelsPerMeter,this.stepThresh=i.collider.height*DE/this.pixelsPerMeter,this.colliderHeight=i.collider.height),this.collider.type=i.collider.type;let _e=new _().fromArray(i.collider.position),st=new Qe().setFromEuler(new or$1().fromArray([...i.collider.rotation,"XYZ"]));this.collider.position.copy(_e).multiply(this.scale),this.collider.rotation.copy(st),this.collider.matrix.compose(_e,st,vN),i.cameraXAxis!==void 0&&(this.cameraXAxis=i.cameraXAxis,this.cameraYAxis=i.cameraYAxis,this.minPolarAngle=i.cameraRotXLimits[0],this.maxPolarAngle=i.cameraRotXLimits[1],this.minAzimuthAngleRel=i.cameraRotYLimits[0],this.maxAzimuthAngleRel=i.cameraRotYLimits[1]),this.forwardDir=i.forwardDirection??"-z",this.runMultiplier=i.runMultiplier??2;let ut=i.navmesh.destinationHelperRadius*2;if(ut>0){let yt=new Ue;yt.push({fi:0,data:{...Hr.defaultData("light","phong"),alpha:0},id:"layer1"}),yt.push({fi:0,data:{...Hr.defaultData("color"),color:i.navmesh.destinationHelperColor,alpha:i.navmesh.destinationHelperColor.a},id:"layer2"});let Pt=new Ga({layers:yt},{scene:this.page.scene,shared:this.sharedAssets});this.navMeshPathDest=new sr(O0.create({parameters:{width:ut,height:ut/10,hollow:.7}}),Pt),this.navMeshPathDest.material.userData.opacity0=i.navmesh.destinationHelperColor.a}this.activate()}reset(e=!1){if(this.object.hiddenMatrix.copy(this.hiddenMatrix0),e){this.object.updateMatrix(),this.object.updateMatrixWorld(),this.object.matrix.copy(this.object.matrixWorld),this.object.matrix.decompose(this.position,this.quaternion,this.scale),this.object.parent?this.object.hiddenMatrix.copy(this.object.parent.matrixWorld).invert():this.object.hiddenMatrix.identity();let a=new or$1().setFromQuaternion(this.quaternion,"YXZ"),i=a.y;this.objectRealQuat.copy(this.quaternion),a.y=0,this.quaternion.setFromEuler(a),this.objXZQuat.copy(this.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.quaternion),a.set(0,i,0),this.quaternion.setFromEuler(a),this.rot.setFromEuler(a),this.euler.setFromQuaternion(this.quaternion,"YXZ"),this.velocityTarget.set(0,0,0),this.velocity.set(0,0,0)}else this.object instanceof wr$1?this.object.matrixAutoUpdate=!0:this.object.updateMatrix();this.cameraFollow===!0&&(this.camera.quaternion.copy(this.quat0Cam),this.camera.position.copy(this.position0Cam),this.camera.scale.copy(this.scale0Cam),this.camera.hiddenMatrix.copy(this.hiddenMatrix0Cam),this.camera.matrixAutoUpdate=!0),this.controlsManager.requestRender()}activate(){this.instantiateActions(),this.domElement.ownerDocument.addEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.addEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.addEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.addEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this.onPointerlockError),this.domElement.ownerDocument.addEventListener("visibilitychange",this.handleVisibilityChange)}deactivate(){this.disposeActions(),this.domElement.ownerDocument.removeEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.removeEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.removeEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this.onPointerlockError),this.domElement.ownerDocument.removeEventListener("visibilitychange",this.handleVisibilityChange)}dispose(){var e;this.deactivate(),(e=this.navMeshPathDest)!=null&&e.parent&&this.page.remove(this.navMeshPathDest)}instantiateActions(){let e=this.data,a=this.sharedAssets;e.gameActions!==void 0&&(this.actions={},ld.list.forEach(i=>{this.actions[i]=Mr$1({...e,disabled:!1,type:"GameControl"},e.gameActions[i],this.page,a,this.controlsManager.eventManager,this.object)})),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),this.dispatchStartEvent("idle"),this.initialAction&&(this.initialAction=!1)}disposeActions(){this.initialAction=!1,this.dispatchStopEvent("idle"),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),hr$1(this.actions.idle),hr$1(this.actions.move),hr$1(this.actions.run),hr$1(this.actions.jump)}dispatchStartEvent(e){this.actions[e]!==void 0&&(this.actionState[e]||(this.actionState[e]=!0,this.actions[e].Transition.forEach(a=>{a.play()}),this.actions[e].Animation.forEach(a=>{a.play(this.initialAction===!1)}),this.actions[e].Create.forEach(a=>{a.dispatchStart()}),this.actions[e].Audio.forEach(a=>{a.dispatchGameControl("start")}),this.actions[e].Particles.forEach(a=>{a.dispatchGameControl("start")})))}dispatchStopEvent(e){this.actions[e]!==void 0&&(!this.actionState[e]||(this.actionState[e]=!1,this.actions[e].Transition.forEach(a=>{a.stop(),a.object.currentState!==null&&a.object.changeSelectedState(null,{scene:this.page.scene,shared:this.sharedAssets})}),this.actions[e].Create.forEach(a=>{a.dispatchStop()}),this.actions[e].Audio.forEach(a=>{a.dispatchGameControl("stop")}),this.actions[e].Particles.forEach(a=>{a.dispatchGameControl("stop")})))}get colliderWorldPosition(){return Bn.copy(this.collider.position).applyQuaternion(this.objectRealQuat).add(this.position)}update(e,a,i){var b,j,$,rt,_e,st,ut,gt,yt;if(this.gravity<0?this.position.y<this.resetYPosition:this.position.y>this.resetYPosition)return this.reset(!0),!0;this.sharedGameControlGlobals.gamePads.forEach(this.copyVRGamePadValues);let o=(this.isFirstFrame?16.6:e)/1e3;this.isFirstFrame&&(this.isFirstFrame=!1);let c=o*60,d=!1;if(this.usePhysics&&this.collisionEnabled){let Pt=Kn.set(0,(this.velocity.y===0?this.pixelsPerMeter*Math.max(Math.abs(this.gravity)/(10*xN),1)*(this.gravity>0?1:-1):this.velocity.y)*o,0).divideScalar(this.pixelsPerMeter),wt=this.sharedGameControlGlobals.rapierWorld.castShape(this.colliderWorldPosition.divideScalar(this.pixelsPerMeter),this.colliderWorldQuat,Pt,(b=this.object.rigidBody)==null?void 0:b.collider(0).shape,1,!1,16,void 0,void 0,this.object.rigidBody);if(wt){this.onObject=!0,this.groundNormal.set(wt.normal2.x,wt.normal2.y,wt.normal2.z).applyQuaternion(this.colliderWorldQuat).negate(),this.alignToGround&&this.groundTiltAdjustment(this.groundNormal),Math.acos(this.groundNormal.y)<this.slopeThresh&&(d=!0),((j=wt.collider.parent())==null?void 0:j.bodyType())===0&&Math.acos(this.groundNormal.y)*(180/Math.PI)>45&&(this.onObject=!1);let Ct=wt.collider.parent();this.groundYRotation=0,this.groundVelocity.set(0,0,0);for(let At of this.sharedGameControlGlobals.entitiesWithTransformAnim)if(At.rigidBody===Ct&&At.userData.isFollowingObj!==this.object.uuid){(At.hasNonUniformScale?At.matrixWorldRigid:At.matrixWorld).decompose(Bn,Ka,Kn),this.groundVelocity.subVectors(Bn,At.prevT),this.object.getWorldPosition(Kn).add(this.collider.position).sub(Bn),this.groundYRotation=na.setFromQuaternion(Ka).y-At.prevR.y,lc.copy(Kn).applyAxisAngle(mo,this.groundYRotation),this.groundVelocity.add(lc.sub(Kn)).divideScalar(o);break}}else this.onObject=!1}if(this.moveMode==="walk"&&this.collisionEnabled&&(this.movementState.jump===1&&this.onObject&&(this.velocityTarget.y=this.jumpPower,this.movementState.jump=0,this.dispatchStopEvent("idle"),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),this.dispatchStartEvent("jump"),this.onObject=!1),this.onObject?this.velocityTarget.y/=2:this.velocityTarget.y+=this.gravity*c),this.moveMode==="fly"&&(this.velocityTarget.y=(this.movementState.movePosY-this.movementState.moveNegY)*this.speedTranslate),this.directionXZ.z=this.movementState.movePosZ-this.movementState.moveNegZ,this.directionXZ.x=this.movementState.movePosX-this.movementState.moveNegX,this.forwardDir==="+z"&&this.directionXZ.multiplyScalar(-1),this.directionXZ.manhattanLength()>0&&(this.path=[]),this.navMeshPathDest){let Pt=this.navMeshPathDest.material;if(this.moveMode==="walk"&&this.path.length>1){this.navMeshPathDest.position.copy(this.path[this.path.length-1]),this.navMeshPathDest.parent||this.page.add(this.navMeshPathDest);let wt=Bn.subVectors(this.path[1],this.position),Ct=Kn.subVectors(this.path[1],this.path[0]);wt.dot(Ct)<0?this.path.shift():(this.directionXZ.x=Ct.x,this.directionXZ.z=Ct.z),Pt.opacity=Pt.userData.opacity0}else Pt.opacity-=.05*Pt.userData.opacity0,this.navMeshPathDest.material.opacity<=0&&this.navMeshPathDest.parent&&this.page.remove(this.navMeshPathDest)}this.directionXZ.normalize(),this.movementState.run?this.moveForce=this.runMultiplier:this.moveForce=1,this.velocityTarget.z=this.directionXZ.z*this.speedTranslate*this.moveForce,this.velocityTarget.x=this.directionXZ.x*this.speedTranslate*this.moveForce,(this.moveMode==="walk"?this.velocityTarget.x+this.velocityTarget.z===0:this.velocityTarget.manhattanLength()===0)?this.lerpFactorPos.setScalar(this.lerpFactorPosEnd):this.lerpFactorPos.setScalar(this.lerpFactorPosStart),this.moveMode==="walk"&&(this.lerpFactorPos.y=1),this.didHit===!1&&this.pushedVelocity.manhattanLength()===0||this.usePhysics===!1?(this.velocity.x+=(this.velocityTarget.x-this.velocity.x)*(1-(1-this.lerpFactorPos.x)**c),this.velocity.y+=(this.velocityTarget.y-this.velocity.y)*(1-(1-this.lerpFactorPos.y)**c),this.velocity.z+=(this.velocityTarget.z-this.velocity.z)*(1-(1-this.lerpFactorPos.z)**c)):this.velocity.copy(this.velocityTarget),(this.moveMode==="walk"?this.velocity.x**2+this.velocity.z**2<this.speedTranslate:this.velocity.lengthSq()<this.speedTranslate)?(this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.onObject&&(this.dispatchStopEvent("jump"),this.dispatchStartEvent("idle"))):(this.dispatchStopEvent("idle"),this.onObject&&(this.dispatchStopEvent("jump"),this.movementState.run?(this.dispatchStopEvent("move"),this.dispatchStartEvent("run")):(this.dispatchStopEvent("run"),this.dispatchStartEvent("move"))));let g=YZ.copy(this.velocity);if(this.orientMode!=="none"&&this.isFirstPerson===!1){let Pt=Kn.copy(g);Pt.y=0,g.set(0,g.y,Pt.length()*(this.forwardDir==="+z"?1:-1))}if(this.directionXZ.manhattanLength()>0&&this.orientMode!=="none")if(this.orientWith==="camera"&&this.path.length<=1){let Pt=Bn;this.camera.getWorldDirection(Pt);let wt=lc.copy(mo).multiplyScalar(Pt.dot(mo));Pt.sub(wt);let Ct=Kn.copy(this.directionXZ);Ct.x*=-1,this.rot.y=Pt.angleTo(Ct)*(Pt.cross(Ct).y>0?-1:1)+this.rotationAccumWhenOrientWithCamera}else this.rot.y=(this.path.length>1?0:this.euler.y)+Math.atan2(-this.directionXZ.z,this.directionXZ.x)+Math.PI/2*(this.forwardDir==="+z"?1:-1);if(na.setFromVector3(this.rot),this.moveMode==="walk"&&(na.x=0),g.applyEuler(na),d&&(Ka.setFromUnitVectors(mo,this.groundNormal),g.applyQuaternion(Ka)),i){let Pt=na.set(0,this.vrEulerYOffset*bN,0);i.applyEuler(Pt),g.x+=i.x,g.z+=i.z,this.nonColliderPosOffset.elements[13]+=i.y*o}if(this.usePhysics===!0){let Pt=Kn;this.pushedVelocity.set(0,0,0);for(let wt of this.sharedGameControlGlobals.entitiesWithTransformAnim){let Ct=lc.setFromMatrixPosition(wt.matrixWorld).sub(wt.prevT).divideScalar(o).divideScalar(this.pixelsPerMeter),At=wt.rigidBody.collider(0).castCollider(Ct,this.object.rigidBody.collider(0),Bn.copy(g).divideScalar(this.pixelsPerMeter),o,!1);Ct.multiplyScalar(this.pixelsPerMeter);let Tt=vt.is(wt)?wt:wt.object;if(At!==null&&this.lastHitObj!==Tt){let kt;wt instanceof Vr&&(kt=wt);let It=this.sharedGameControlGlobals.entityToCollisionEvents[Tt.uuid];if(It)for(let Lt of It)Lt.data.target==="character"&&(Lt.dispatch(kt),Tt.dispatchEvent(_b));this.lastHitObj=Tt}if(At!==null){this.pushedVelocity.copy(Ct),Pt.copy(At.normal1).applyQuaternion(wt.quaternion);break}}if(this.pushedVelocity.manhattanLength()!==0){let wt=Pt.dot(g);wt<0&&g.addScaledVector(Pt,-wt),g.add(this.pushedVelocity)}else g.add(this.groundVelocity)}if(this.rotDirection.y=Number(this.movementState.rotPosY)-Number(this.movementState.rotNegY),this.rotDirection.x=Number(this.movementState.rotPosX)-Number(this.movementState.rotNegX),this.rotDirection.normalize(),this.rotationMode==="normal"&&(this.movementState.rotPosX||this.movementState.rotNegX)||this.rotationMode==="steer"&&(this.movementState.rotPosX||this.movementState.rotNegX)&&(this.movementState.movePosZ||this.movementState.moveNegZ||this.moveMode==="walk")?this.rotVelocityStick.x=-this.rotDirection.x*this.speedOrbit*this.rotForce:this.rotVelocityStick.x=0,this.rotationMode==="normal"&&(this.movementState.rotPosY||this.movementState.rotNegY)||this.rotationMode==="steer"&&(this.movementState.rotPosY||this.movementState.rotNegY)&&(this.movementState.movePosZ||this.movementState.moveNegZ)?this.rotVelocityStick.y=-this.rotDirection.y*this.speedOrbit*this.rotForce:this.rotVelocityStick.y=0,this.rotVelocityTarget.subVectors(this.eulerDelta.divideScalar(o),this.rotVelocityStick),this.rotVelocityTarget.manhattanLength()===0?this.rotVelocity.lerp(this.rotVelocityTarget,1-(1-this.lerpFactorRotEnd)**c):this.rotVelocity.lerp(this.rotVelocityTarget,1-(1-this.lerpFactorRotStart)**c),this.euler.x+=this.rotVelocity.x*o,this.euler.y+=this.rotVelocity.y*o+this.groundYRotation,this.rotVelocityTarget.y===0&&this.directionXZ.manhattanLength()===0?this.rotationAccumWhenOrientWithCamera=0:(this.cameraFollow===!1||this.cameraYAxis==="Locked")&&(this.rotationAccumWhenOrientWithCamera+=this.rotVelocity.y*o),this.isFirstPerson===!1&&this.orientMode!=="none"&&this.directionXZ.manhattanLength()>0){if(this.orientMode==="radial"){this.objectToCamXZ.copy(this.objectToCamXZ0).applyAxisAngle(mo,this.euler.y-this.euler0.y);let Pt=Kn.copy(this.objectToCamXZ).normalize(),wt=lc.copy(g).multiplyScalar(o);wt.y=0;let Ct=wt.sub(Bn.copy(Pt).multiplyScalar(wt.dot(Pt))).cross(Pt).y;this.euler.y-=Math.atan2(Ct,this.objectToCamXZ.length())}}else this.rot.y+=this.rotVelocity.y*o+this.groundYRotation,this.rotVelocityTarget.y!==0&&(this.cameraFollow===!1||this.cameraYAxis==="Locked")&&(this.euler.y=this.rot.y);if(this.cameraFollow===!0&&(this.moveMode==="walk"?this.cameraXAxis==="Limit"?this.euler.x=Me.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):this.euler.x=Me.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset,this.PI_2+this.cameraPolarOffset):this.cameraXAxis==="Limit"&&(this.euler.x=Me.clamp(this.euler.x,-this.PI_2,this.PI_2))),this.moveMode==="fly"?this.rot.x=this.euler.x:this.isFirstPerson&&(a?(na.copy(a),na.y=0):(na.copy(this.euler),na.y=0),this.nonColliderRotOffset.makeRotationFromEuler(na)),a&&(this.moveMode==="walk"?(this.rot.y=a.y,this.rot.x=0,this.rot.z=0):this.rot.setFromEuler(a),this.rot.y+=this.vrEulerYOffset*bN),po.setFromAxisAngle(QZ,this.rot.x),Ka.setFromAxisAngle(mo,this.rot.y),Ka.multiply(po),po.setFromAxisAngle(KZ,this.rot.z),Ka.multiply(po),this.quaternion.copy(Ka),this.objectRealQuat.multiplyQuaternions(this.quaternion,this.objXZQuat),this.objectRealQuat.multiply(this.objXZQuat),this.colliderWorldQuat.copy(this.objectRealQuat).multiply(this.collider.rotation),this.collisionEnabled)if(this.usePhysics){let Pt=Kn.copy(g).multiplyScalar(o/this.pixelsPerMeter),wt=null;this.didHit=!1;let Ct=new _;for(let At=0;At<5;At++){let Tt=Pt.length(),kt=lc.copy(Pt).normalize();if(wt=this.sharedGameControlGlobals.rapierWorld.castShape(this.colliderWorldPosition.divideScalar(this.pixelsPerMeter).add(Ct),this.colliderWorldQuat,kt,($=this.object.rigidBody)==null?void 0:$.collider(0).shape,Tt,!1,24,void 0,void 0,this.object.rigidBody),wt!==null){this.didHit=!0;let It=this.sharedGameControlGlobals.colliderToEntity.get(wt.collider.handle);if(It!==this.lastHitObj&&At===0){this.lastHitObj=It;let Ht=this.sharedGameControlGlobals.entityToCollisionEvents[It==null?void 0:It.uuid];if(Ht){for(let Gr of Ht)if(Gr.data.target==="character"){let hs=((rt=this.sharedGameControlGlobals.rapierWorld)==null?void 0:rt.getCollider(wt.collider.handle))._parent,_s;if(It.cloner){for(let hn of It.cloner.children)if(hn.rigidBody===hs){_s=hn;break}}Gr.dispatch(_s),It.dispatchEvent(_b)}}}let Lt=mN.set(wt.normal2.x,wt.normal2.y,wt.normal2.z).applyQuaternion(this.colliderWorldQuat),Ft=gN.copy(kt).multiplyScalar(wt.toi).dot(Lt),Nt=wt.toi;if(Nt===0&&(this.position.y+=this.offset*this.pixelsPerMeter),Ft>this.offset&&(Nt=wt.toi*(Ft-this.offset)/Ft,Ct.addScaledVector(kt,Nt)),Pt.copy(kt).multiplyScalar(Tt-Nt),Math.acos(-Lt.y)>this.slopeThresh){let Ht=this.colliderWorldPosition.divideScalar(this.pixelsPerMeter).add(Ct),Gr=lc.copy(wt.witness2).applyQuaternion(this.colliderWorldQuat);Gr.y=0;let hs=Ht.add(Gr);hs.y+=this.stepThresh;let _s=this.sharedGameControlGlobals.rapierWorld.castShape(hs,this.colliderWorldQuat,Pt,(_e=this.object.rigidBody)==null?void 0:_e.collider(0).shape,1,!1,24,void 0,void 0,this.object.rigidBody);_s!==null&&_s.toi===0&&(Lt.y=0,Lt.normalize())}Pt.addScaledVector(Lt,-Pt.dot(Lt))}else{At===0&&this.directionXZ.manhattanLength()!==0&&(this.lastHitObj=null),Ct.add(Pt);break}}this.position.addScaledVector(Ct,this.pixelsPerMeter),(st=this.object.rigidBody)==null||st.setTranslation(Bn.copy(this.position).divideScalar(this.pixelsPerMeter),!0),(ut=this.object.rigidBody)==null||ut.setRotation(po.copy(this.quaternion).premultiply(this.groundTilt).multiply(this.objXZQuat),!0)}else{let Pt=this.onObject?1:5,wt=g.multiplyScalar(o/Pt);for(let Ct=0;Ct<Pt;Ct++)this.position.add(wt),this.collisionAdjustment(o/Pt)}else this.position.addScaledVector(g,o);if(this.moveMode==="walk"&&this.onObject&&(this.velocityTarget.y=0,this.velocity.y=0),this.quaternion.premultiply(this.groundTilt).multiply(this.objXZQuat),this.object.matrix.compose(this.position,this.quaternion,this.scale),this.object.matrixWorldNeedsUpdate=!0,this.object.matrix.multiply(this.nonColliderPosOffset).multiply(this.nonColliderRotOffset),this.quaternion.premultiply(this.groundTiltInv).multiply(this.objXZQuatInv),this.cameraFollow===!0){this.updateFollowArms();let Pt=this.objectToTarget.add(this.position),wt=this.targetToCamera.add(Pt);OE.lookAt(wt,Pt,mo).setPosition(wt),OE.decompose(this.targetPos,this.targetQuat,Bn),this.camera.quaternion.slerp(this.targetQuat,1-(1-this.lerpFactorRotCamera)**c),this.camera.position.lerp(this.targetPos,1-(1-this.lerpFactorPosCamera)**c),this.camera.updateMatrix(),this.camera.updateMatrixWorld(),this.cameraYAxis==="Limit"&&this.orientMode==="cartesian"&&(this.euler.y=Me.clamp(this.euler.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel)),this.euler.x=Me.clamp(this.euler.x,-this.PI_2+(this.cameraPolarOffset<0?this.cameraPolarOffset:0),this.PI_2+(this.cameraPolarOffset>0?this.cameraPolarOffset:0))}return this.eulerDelta.set(0,0,0),this.object.dispatchEvent(rJ),this.path.length<2&&this.lastPosition.distanceToSquared(this.position)<this.threshEndTranslate&&Math.abs(this.rotVelocity.x)<this.threshEndRotVel&&Math.abs(this.rotVelocity.y)<this.threshEndRotVel&&(this.camera===void 0||this.isFirstPerson||this.lastCameraPosition.distanceToSquared(this.camera.position)<this.threshEndTranslate&&8*(1-this.lastCameraQuaternion.dot(this.camera.quaternion))<this.threshEndRotate)&&(this.moveMode==="fly"||this.onObject===!0||this.collisionEnabled===!1)&&(this.navMeshPathDest===null||this.navMeshPathDest.material.opacity<-.04*((yt=(gt=this.navMeshPathDest)==null?void 0:gt.material)==null?void 0:yt.userData.opacity0))?!1:(this.camera&&(this.lastCameraPosition.copy(this.camera.position),this.lastCameraQuaternion.copy(this.camera.quaternion)),this.lastPosition.copy(this.position),this.object.dispatchEvent(tJ),!0)}updateFollowArms(){this.objectToTarget.copy(this.objectToTarget0),this.targetToCamera.copy(this.targetToCamera0);let e=po.setFromAxisAngle(mo,this.cameraYAxis==="Limit"&&this.orientMode!=="radial"?Me.clamp(this.euler.y-this.euler0.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel):this.euler.y-this.euler0.y);(this.cameraYAxis!=="Locked"||this.orientMode==="radial")&&this.objectToTarget.applyQuaternion(e);let a;this.cameraXAxis==="Limit"?a=Me.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):a=Me.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset+1e-6,this.PI_2+this.cameraPolarOffset-1e-6);let i=Bn.copy(this.cameraPolarAxis0);(this.cameraYAxis!=="Locked"||this.orientMode==="radial")&&i.applyQuaternion(e);let o=Ka.setFromAxisAngle(i,a);this.cameraYAxis!=="Locked"&&this.targetToCamera.applyQuaternion(e),this.cameraXAxis!=="Locked"&&this.targetToCamera.applyQuaternion(o)}groundTiltAdjustment(e){mo.angleTo(e)*180/Math.PI<15||mo.angleTo(e)*180/Math.PI>85?po.identity():po.setFromUnitVectors(mo,e),this.groundTilt.slerp(po,.06),this.groundTiltInv.copy(this.groundTilt).invert()}collisionAdjustment(e){var c;let a=gN.set(0,0,0);this.object.matrix.compose(this.position,this.quaternion,this.scale);let i=OE.multiplyMatrices(this.object.matrix,this.objXZRotMat).multiply(this.collider.matrix).decompose(Bn,po,Kn).compose(Bn,po,vN);this.sharedGameControlGlobals.entitiesWithTransformAnim.forEach(d=>{if(d===this.object||d.isDescendantOf(this.object))return;ks.makeEmpty(),d.updateMatrixWorldSVD();let g=d.matrixWorldRigid,b=yN.copy(g).invert(),j=XZ.copy(yN).multiply(i);en$1.copy(this.collider.segment),en$1.start.applyMatrix4(j),en$1.end.applyMatrix4(j);let $=mN.copy(this.position).applyMatrix4(b);ks.expandByPoint(en$1.start),ks.expandByPoint(en$1.end),ks.min.addScalar(-this.collider.radius),ks.max.addScalar(this.collider.radius),d.bvhGeometry.boundsTree.shapecast({traverseBoundsOrder(rt){return rt.distanceToPoint(en$1.end)},intersectsBounds:rt=>rt.intersectsBox(ks),intersectsTriangle:rt=>{let _e=Bn,st=Kn,ut=rt.closestPointToSegment(en$1,_e,st);if(ut<this.collider.radius){let gt=this.collider.radius-ut,yt=st.sub(_e).normalize(),Pt=lc.copy($);Pt.addScaledVector(yt,gt);let wt=Pt.applyMatrix4(g).sub(this.position);a.add(wt),en$1.start.addScaledVector(yt,gt),en$1.end.addScaledVector(yt,gt)}}})}),ks.makeEmpty(),en$1.copy(this.collider.segment),en$1.start.applyMatrix4(i),en$1.end.applyMatrix4(i),ks.expandByPoint(en$1.start),ks.expandByPoint(en$1.end),ks.min.addScalar(-this.collider.radius),ks.max.addScalar(this.collider.radius),(c=this.sharedGameControlGlobals.staticMeshBVH)==null||c.shapecast({traverseBoundsOrder(d){return d.distanceToPoint(en$1.end)},intersectsBounds:d=>d.intersectsBox(ks),intersectsTriangle:d=>{let g=Bn,b=Kn,j=d.closestPointToSegment(en$1,g,b);if(j<this.collider.radius){let $=this.collider.radius-j,rt=b.sub(g).normalize();this.alignToGround&&this.groundTiltAdjustment(rt),a.addScaledVector(rt,$),en$1.start.addScaledVector(rt,$),en$1.end.addScaledVector(rt,$)}}}),this.onObject=Math.abs(a.y)>Math.abs(e*this.velocity.y*.25),this.onObject&&this.dispatchStopEvent("jump");let o=Math.max(0,a.length()-1e-5);a.normalize().multiplyScalar(o),this.position.add(a)}},Eg=Ab;Eg.isLocked=!1;var SN=pi(iA());function go(e,a){let i=new Pe;if(!e.getAttribute("position"))return i.setAttribute("position",new Te([],3)),i.setIndex([]),i;let{positions:o,triIndices:c}=qc(e.getAttribute("position"),e.getIndex());return i.setAttribute("position",new Te(o,3)),i.setIndex(c),a&&i.applyMatrix4(a),i}var iJ=new ce$1,nJ=new ce$1,sa=[[0,0,0],[0,0,0],[0,0,0]];function RE(e){let a=e.elements;sa[0][0]=a[0],sa[0][1]=a[4],sa[0][2]=a[8],sa[1][0]=a[1],sa[1][1]=a[5],sa[1][2]=a[9],sa[2][0]=a[2],sa[2][1]=a[6],sa[2][2]=a[10];let{u:i,v:o}=(0,SN.SVD)(sa),c=iJ.set(i[0][0],i[0][1],i[0][2],0,i[1][0],i[1][1],i[1][2],0,i[2][0],i[2][1],i[2][2],0,0,0,0,1),d=nJ.set(o[0][0],o[0][1],o[0][2],0,o[1][0],o[1][1],o[1][2],0,o[2][0],o[2][1],o[2][2],0,0,0,0,1);return c.multiply(d.transpose())}var Eb=class extends ah{constructor(){super(),this.layers.enable(3),this.layers.enable(8)}setFromCamera(e,a){a.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(a),this.ray.direction.set(0,0,-1).transformDirection(a.matrixWorld),this.camera=a):a.isPerspectiveCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(a),this.ray.direction.set(e.x,e.y,.5).unproject(a).sub(this.ray.origin).normalize(),this.camera=a):console.error("Raycaster: Unsupported camera type.")}intersectVisibleObjects(e,a=!0,i=[]){return e.forEach(o=>{o.visible&&this.intersectObject(o,a,i)}),i}createRaycastLineHelper(){let e=new ys({color:65280,linewidth:10}),a=new _(this.ray.origin.x,this.ray.origin.y,this.ray.origin.z),i=new _(this.ray.direction.x,this.ray.direction.y,this.ray.direction.z),o=this.camera.far-this.camera.near,c=new _().addVectors(a,i.multiplyScalar(o)),d=new Pe;return d.setFromPoints([a,c]),new Ac(d,e)}},wN=e=>e instanceof Ls||e instanceof uo;function sJ(e,a){return e.distance-a.distance}function AN(e,a,i){if(!(!Uo(a)||!a.visible)){mn(a)&&a.raycast(e,i);for(let o of a.children)AN(e,o,i)}}function Qf(e,a,i,o=!1){if(!o&&!i.some(d=>Kf(e,d)!==void 0))return[];let c=[];return a.children.forEach(d=>AN(e,d,c)),c.sort(sJ),c}function Tg(e){let a=[];if(e.length){let i=e[0].object;Uo(i)&&a.push(i);let o=i.parent;for(;o;)wN(o)&&a.push(o),o=o.parent}return a}function yo(e,a,i,o){let c=e.frame;if(c){let d=a[0]*c.width,g=(1-a[1])*c.height;for(let b of i){let j=b===c.uuid?c:c.find(b);if(j!=null&&j.intersects(d,g))return o(j),!0}}return!1}function Kf(e,a){if(mn(a)){if(a.visible){let i=[];return a.raycast(e,i),i.length?i[0]:void 0}}else if(wN(a))return _N(e,a)}function _N(e,a){if(!(!Uo(a)||!a.visible)){if(mn(a)){let i=[];if(a.raycast(e,i),i.length)return i[0]}for(let i of a.children){let o=_N(e,i);if(o)return o}}}function oJ(e,a,i){return{x:(e-(i.left+window.scrollX))/i.width*2-1,y:-((a-(i.top+window.scrollY))/i.height)*2+1}}function aJ(e,a,i){return{x:(e-(i.left+window.scrollX))/i.width,y:1-(a-(i.top+window.scrollY))/i.height}}var Tb=class{constructor(e,a,i,o,c,d,g,b){this.renderer=e,this.publish=a,this.scene=i,this.getCamera=o,this.sharedAssets=c,this.requestRender=d,this.isExport=g,this.frame=b,this.raycaster=new Eb,this._useWindowEvents=!1,this.pointerWorld={x:0,y:0},this.pointerScreen={x:0,y:0},this._useWindowEvents=a.mouseEventTarget==="window",this.domElement=e.domElement,this.eventElement=this._useWindowEvents?window:e.domElement,this._domRect=this.domElement.getBoundingClientRect()}get stopRaycast(){return this.publish.stopRaycast}get page(){return this.scene.activePage}set useWindowEvents(e){this._useWindowEvents=e,this.eventElement=e?window:this.renderer.domElement}get useWindowEvents(){return this._useWindowEvents}set domRect(e){this._domRect=e}get domRect(){return this._domRect}updateRaycaster(e){var o;let{pageX:a,pageY:i}=((o=e.touches)==null?void 0:o.length)>0?e.touches[0]:e;this.pointerWorld=oJ(a,i,this._domRect),this.pointerScreen=aJ(a,i,this._domRect),this.raycaster.setFromCamera(this.pointerWorld,this.getCamera())}},zr$1=class{constructor(a){this.eventContext=a,this.domEventsNeeded=new Set,this.hasVideoAction=!1}connect(){}disconnect(){}},LE=[["start","Start"],["keyDown","KeyDown"],["keyUp","KeyUp"],["mouseDown","MouseDown"],["mouseUp","MouseUp"],["mouseHover","MouseHover"],["collision","Collision"],["lookAt","LookAt"],["follow","Follow"],["scroll","Scroll"]],EN=e=>{var a;return(a=LE.find(([i,o])=>o===e))==null?void 0:a[0]},oa=e=>{var a;return(a=LE.find(([i])=>i===e))==null?void 0:a[1]},lJ=(e,a)=>{let i=EN(e);if(i){let o=new CustomEvent(i,{bubbles:!0});return Object.defineProperty(o,"target",{writable:!1,value:a}),o}},Mb=class extends zr$1{constructor(e){super(e),this.objectsPerEvents=new Map,this.splineEvents={},this.onBeginEvent=i=>{var d;if(!i.eventName||!i.target||i.eventName==="Scroll")return;let o=(d=this.splineEvents[EN(i.eventName)])==null?void 0:d[i.target.uuid];if(!o)return;i.eventName==="Scroll"&&i.deltaY!==void 0&&Object.assign(o,{deltaY:i.deltaY});let{domElement:c}=this.eventContext;c.dispatchEvent(o)};let{page:a}=this.eventContext;a.traverseEntity(i=>{var o,c;if((o=i.data)!=null&&o.events.length){for(let[d,g]of LE)if(i.data.events.some(b=>b.data.type===g&&!b.data.disabled)){this.objectsPerEvents.has(d)?(c=this.objectsPerEvents.get(d))==null||c.push(i):this.objectsPerEvents.set(d,[i]);let b={id:i.uuid,name:i.name},j=lJ(g,b),$=this.splineEvents[d];$?$[i.uuid]=j:this.splineEvents[d]={[i.uuid]:j}}}})}connect(){this.objectsPerEvents.forEach(e=>{e.forEach(a=>{a.addEventListener("beginEvent",this.onBeginEvent)})})}disconnect(){this.objectsPerEvents.forEach(e=>{e.forEach(a=>{a.removeEventListener("beginEvent",this.onBeginEvent)})})}},BE=class{constructor(e,a,i,o,c,d){if(this.id=e,this.data=a,this.object=i,this.entered=!1,this.alreadyPlayedNonTogglingActions=new Set,this.useToggle=a.runMode==="Toggle",(a.type==="KeyDown"||a.type==="KeyUp"||a.type==="KeyPress")&&!a.key)throw new Error("Missing property");this.actions=Mr$1(a,a.actions,o,c,d,i)}disconnect(){hr$1(this.actions)}dispatchHeld(e){this.actions.Create.forEach(a=>{e&&a.dispatchThrottled.cancel(),a.dispatchThrottled()})}dispatch(e=!1){this.actions.Transition.forEach(a=>{a.object.currentTransitionEvent!==this?(a.object.currentTransitionEvent=this,a.init()):this.data.runMode==="Once"&&this.alreadyPlayedNonTogglingActions.add(a)}),this.useToggle?(this.actions.Transition.forEach(a=>{a.toggle()}),this.actions.Animation.forEach(a=>{a.toggle()}),this.actions.SwitchCamera.forEach(a=>{a.toggle()})):this.data.type==="MousePress"||this.data.type==="KeyPress"?this.entered||(this.entered=!0,this.actions.Transition.forEach(a=>a.playFromCurrent()),this.actions.Animation.forEach(a=>a.playFromCurrent()),this.actions.SwitchCamera.forEach(a=>a.playFromCurrent()),this.actions.Create.forEach(a=>a.dispatchStart())):(this.actions.Transition.some(a=>a.playing)||this.actions.Transition.forEach(a=>{this.alreadyPlayedNonTogglingActions.has(a)===!1&&a.play()}),this.actions.SwitchCamera.some(a=>a.playing)||this.actions.SwitchCamera.forEach(a=>{a.play()}),this.actions.Animation.forEach(a=>{a.play()})),this.actions.Link.forEach(a=>{a.dispatch()}),this.actions.SceneTransition.forEach(a=>{a.dispatch()}),e===!1&&this.actions.Create.forEach(a=>{a.dispatch()}),this.actions.Destroy.forEach(a=>{a.dispatch()}),this.actions.Reset.forEach(a=>{a.dispatch()}),this.actions.Audio.forEach(a=>{a.dispatchBasic()}),this.actions.Video.forEach(a=>{a.dispatchBasic()}),this.actions.Particles.forEach(a=>{a.dispatchBasic()}),this.actions.SetVariable.forEach(a=>a.checkConditions()),this.actions.SetVariable.forEach(a=>a.dispatch()),this.actions.DynamicVariablePlay.forEach(a=>a.dispatch())}dispatchRelease(){this.entered&&(this.entered=!1,this.actions.Transition.forEach(e=>e.reverseFromCurrent()),this.actions.Particles.forEach(e=>e.reverseFromCurrent()),this.actions.Animation.forEach(e=>e.reverseFromCurrent()),this.actions.SwitchCamera.forEach(e=>e.reverseFromCurrent()),this.actions.Create.forEach(e=>e.dispatchStop()))}dispatchUserEvent(e){this.actions.Transition.forEach(a=>{a.object.currentTransitionEvent!==this&&(a.object.currentTransitionEvent=this,a.init())}),e?(this.actions.Transition.forEach(a=>a.reverseFromCurrent()),this.actions.Animation.forEach(a=>a.reverseFromCurrent()),this.actions.SwitchCamera.forEach(a=>a.reverseFromCurrent())):(this.actions.Transition.forEach(a=>a.playFromCurrent()),this.actions.Animation.forEach(a=>a.playFromCurrent()),this.actions.SwitchCamera.forEach(a=>a.playFromCurrent())),this.actions.Link.forEach(a=>{a.dispatch()}),this.actions.SceneTransition.forEach(a=>{a.dispatch()}),this.actions.Create.forEach(a=>{a.dispatch()}),this.actions.Destroy.forEach(a=>{a.dispatch()}),this.actions.Reset.forEach(a=>{a.dispatch()}),this.actions.Audio.forEach(a=>{a.dispatchBasic()}),this.actions.Video.forEach(a=>{a.dispatchBasic()}),this.actions.Particles.forEach(a=>{a.dispatchBasic()}),this.actions.SetVariable.forEach(a=>a.checkConditions()),this.actions.SetVariable.forEach(a=>a.dispatch()),this.actions.DynamicVariablePlay.forEach(a=>a.dispatch())}},Cb=class extends zr$1{constructor(e,a,i){super(e),this.useForRaycastProperty=i,this.objectsPerTypes={MouseDown:[],MouseUp:[],MousePress:[],KeyDown:[],KeyUp:[],KeyPress:[]},this.canvasMouseEvents=[],this.eventsPerObjects={MouseDown:{},MouseUp:{},MousePress:{},KeyDown:{},KeyUp:{},KeyPress:{}},this.heldKeys={},this.heldKeysPress={},this._prevObjects=[],this.sceneInterects=null,this.onCanvasRaycast=g=>{if(this.useForRaycastProperty===!0&&this.sceneInterects===null){this.eventContext.updateRaycaster(g);let{raycaster:b,page:j}=this.eventContext,$=Qf(b,j,[],!0);this.sceneInterects=$,$.length&&(this.eventContext.sharedAssets.raycastProperty={x:$[0].point.x,y:$[0].point.y,z:$[0].point.z,objX:$[0].object.matrixWorld.elements[12],objY:$[0].object.matrixWorld.elements[13],objZ:$[0].object.matrixWorld.elements[14]})}},this.onCanvasMouseDown=g=>{(g.target===this.eventContext.domElement||g.target.tagName==="SPLINE-VIEWER")&&this.canvasMouseEvents.forEach(b=>{(b.data.type==="MouseDown"||b.data.type==="MousePress")&&(this.onCanvasRaycast(g),b.dispatch())})},this.onCanvasMouseUp=g=>{(g.target===this.eventContext.domElement||g.target.tagName==="SPLINE-VIEWER")&&this.canvasMouseEvents.forEach(b=>{b.data.type==="MouseUp"?(this.onCanvasRaycast(g),b.dispatch()):b.data.type==="MousePress"&&b.dispatchRelease()})},this.onMouseDown=g=>{$e$1.length>1||(this.eventContext.updateRaycaster(g),this.handleMouseEvent("MouseDown"))},this.onMouseUp=g=>{$e$1.length>1||(this.eventContext.updateRaycaster(g),this.handleMouseEvent("MouseUp"))},this.onMousePressDown=g=>{$e$1.length>1||(this.eventContext.updateRaycaster(g),this.handleMousePressEvent())},this.onMousePressRelease=g=>{$e$1.length>1||(this.eventContext.updateRaycaster(g),this.handleMousePressEvent(!0))},this.onKeyDown=g=>{this.heldKeys[g.key]||(this.handleKeyEvent(g,"KeyDown"),this.handleKeyEventHeld(g,"KeyDown",!0)),this.heldKeys[g.key]=!0},this.onKeyUp=g=>{this.handleKeyEvent(g,"KeyUp"),this.handleKeyEventHeld(g,"KeyUp",!0)},this.onKeyPressDown=g=>{this.heldKeysPress[g.key]?this.handleKeyEventHeld(g,"KeyPress"):(this.handleKeyEvent(g,"KeyPress"),this.handleKeyEventHeld(g,"KeyPress",!0)),this.heldKeysPress[g.key]=!0},this.onKeyPressUp=g=>{this.handleKeyEvent(g,"KeyPress",!0)},this.releaseHeldKey=g=>{delete this.heldKeys[g.key]},this.releaseHeldKeyPress=g=>{delete this.heldKeysPress[g.key]},this._onUserEvent=({eventName:g,target:b,reverse:j})=>{var rt,_e,st,ut;if(!g||!b)return;let $=oa(g);$&&($==="MouseDown"||$==="MouseUp"||$==="MousePress"?(b.dispatchEvent({type:"beginEvent",eventName:$}),(_e=(rt=this.eventsPerObjects[$])==null?void 0:rt[b.uuid])==null||_e.forEach(gt=>{gt.dispatchUserEvent(j)})):($==="KeyDown"||$==="KeyUp"||$==="KeyPress")&&(b.dispatchEvent({type:"beginEvent",eventName:$}),(ut=(st=this.eventsPerObjects[$])==null?void 0:st[b.uuid])==null||ut.forEach(gt=>{gt.dispatchUserEvent()})))};let{page:o,sharedAssets:c}=this.eventContext,d=(g,b)=>{var $,rt;if(!(($=g.data)!=null&&$.events.length))return;let j=["MouseDown","MouseUp","MousePress","KeyDown","KeyUp","KeyPress"];for(let _e of j){let st=this.eventsPerObjects[_e];g.data.events.filter(({data:ut})=>ut.type===_e&&ut.disabled!==!0).forEach(({id:ut,data:gt})=>{try{let yt=new BE(ut,gt,g,o,c,a);yt.actions.Video.length&&(this.hasVideoAction=!0),(gt.type==="MouseDown"||gt.type==="MouseUp"||gt.type==="MousePress")&&(gt.mode==="Canvas"||gt.mode==="Window")?this.canvasMouseEvents.push(yt):st[g.uuid]?st[g.uuid].some(Pt=>Pt.id===yt.id)||st[g.uuid].push(yt):st[g.uuid]=[yt]}catch{}}),(rt=st[g.uuid])!=null&&rt.length&&this.objectsPerTypes[_e].push(g instanceof Jt&&(_e==="MouseDown"||_e==="MouseUp"||_e==="MousePress")?b:g)}};o.traverseEntity(g=>{var b;(g instanceof _r$1||g instanceof mr)&&((b=g.frame)==null||b.traverse(j=>{d(j,g)})),d(g)})}connect(){var a,i,o,c,d,g;let{domElement:e}=this.eventContext;this.heldKeys={},this.heldKeysPress={},this.domEventsNeeded.clear(),e.addEventListener("pointerdown",this.onCanvasMouseDown),e.addEventListener("pointerup",this.onCanvasMouseUp),((a=this.objectsPerTypes.MouseDown)!=null&&a.length||this.useForRaycastProperty)&&(this.domEventsNeeded.add("pointerdown"),e.addEventListener("pointerdown",this.onMouseDown)),(i=this.objectsPerTypes.MouseUp)!=null&&i.length&&(this.domEventsNeeded.add("pointerup"),e.addEventListener("pointerup",this.onMouseUp)),(o=this.objectsPerTypes.MousePress)!=null&&o.length&&(this.domEventsNeeded.add("pointerdown"),e.addEventListener("pointerdown",this.onMousePressDown),this.domEventsNeeded.add("pointerup"),e.addEventListener("pointerup",this.onMousePressRelease)),(c=this.objectsPerTypes.KeyDown)!=null&&c.length&&(this.domEventsNeeded.add("keydown"),document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.releaseHeldKey)),(d=this.objectsPerTypes.KeyUp)!=null&&d.length&&(this.domEventsNeeded.add("keyup"),document.addEventListener("keyup",this.onKeyUp)),(g=this.objectsPerTypes.KeyPress)!=null&&g.length&&(this.domEventsNeeded.add("keydown"),document.addEventListener("keydown",this.onKeyPressDown),document.addEventListener("keyup",this.releaseHeldKeyPress),this.domEventsNeeded.add("keyup"),document.addEventListener("keyup",this.onKeyPressUp)),Object.entries(this.objectsPerTypes).forEach(([b,j])=>{j.forEach($=>{$.addEventListener("userEvent",this._onUserEvent)})})}disconnect(){let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),this.heldKeys={},this.heldKeysPress={},e.removeEventListener("pointerdown",this.onCanvasMouseDown),e.removeEventListener("pointerup",this.onCanvasMouseUp),e.removeEventListener("pointerdown",this.onMouseDown),e.removeEventListener("pointerdown",this.onMousePressDown),e.removeEventListener("pointerup",this.onMouseUp),e.removeEventListener("pointerup",this.onMousePressRelease),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp),document.removeEventListener("keydown",this.onKeyPressDown),document.removeEventListener("keyup",this.onKeyPressUp),document.removeEventListener("keyup",this.releaseHeldKey),Object.values(this.eventsPerObjects).forEach(a=>{Object.values(a).forEach(i=>{i.forEach(o=>{o.disconnect()})})}),this.canvasMouseEvents.forEach(a=>{a.disconnect()}),Object.entries(this.objectsPerTypes).forEach(([a,i])=>{i.forEach(o=>{o.removeEventListener("userEvent",this._onUserEvent)})})}handleMouseEvent(e){var b,j,$,rt;let{stopRaycast:a,raycaster:i,page:o,pointerScreen:c}=this.eventContext,d=this.objectsPerTypes[e],g=d.filter(_e=>!(_e instanceof Jt));if(!(!d.length&&!this.useForRaycastProperty)&&!(o.uiCanvas&&yo(o,[c.x,c.y],Object.keys(this.eventsPerObjects[e]),_e=>{this.handleObjectMouseEventDispatch(_e,e)}))){if(a||this.useForRaycastProperty){let _e;if(this.sceneInterects===null?_e=Qf(i,o,g,this.useForRaycastProperty):(_e=this.sceneInterects,this.sceneInterects=null),this.useForRaycastProperty&&_e.length&&(this.eventContext.sharedAssets.raycastProperty={x:_e[0].point.x,y:_e[0].point.y,z:_e[0].point.z,objX:_e[0].object.matrixWorld.elements[12],objY:_e[0].object.matrixWorld.elements[13],objZ:_e[0].object.matrixWorld.elements[14]}),a){let st=[((j=(b=_e[0])==null?void 0:b.uv)==null?void 0:j.x)??0,((rt=($=_e[0])==null?void 0:$.uv)==null?void 0:rt.y)??0];Tg(_e).forEach(ut=>{ut instanceof _r$1&&yo(ut,st,Object.keys(this.eventsPerObjects[e]),gt=>{this.handleObjectMouseEventDispatch(gt,e)}),this.eventsPerObjects[e][ut.uuid]&&this.handleObjectMouseEventDispatch(ut,e)})}}a||g.forEach(_e=>{var ut,gt;let st=Kf(i,_e);st&&(this.handleObjectMouseEventDispatch(_e,e),_e instanceof _r$1&&yo(_e,[((ut=st==null?void 0:st.uv)==null?void 0:ut.x)??0,((gt=st==null?void 0:st.uv)==null?void 0:gt.y)??0],Object.keys(this.eventsPerObjects[e]),yt=>{this.handleObjectMouseEventDispatch(yt,e)}))})}}handleMousePressEvent(e=!1){let a="MousePress",i=this.objectsPerTypes[a],o=i.filter(d=>!(d instanceof Jt)),c=[];if(i.length){if(!e){let{stopRaycast:d,raycaster:g,page:b,pointerScreen:j}=this.eventContext,$=!1;if(b.uiCanvas&&($=yo(b,[j.x,j.y],Object.keys(this.eventsPerObjects[a]),rt=>{c.push(rt)})),d&&!$){let rt=Qf(g,b,o);c=Tg(rt),rt.forEach(_e=>{var st,ut;_e.object instanceof _r$1&&yo(_e.object,[((st=_e==null?void 0:_e.uv)==null?void 0:st.x)??0,((ut=_e==null?void 0:_e.uv)==null?void 0:ut.y)??0],Object.keys(this.eventsPerObjects[a]),gt=>{c.push(gt)})})}else o.forEach(rt=>{var st,ut;let _e=Kf(g,rt);_e&&(c.push(rt),rt instanceof _r$1&&yo(rt,[((st=_e==null?void 0:_e.uv)==null?void 0:st.x)??0,((ut=_e==null?void 0:_e.uv)==null?void 0:ut.y)??0],Object.keys(this.eventsPerObjects[a]),gt=>{c.push(gt)}))})}this._prevObjects.length&&this._prevObjects.forEach(d=>{c.includes(d)||this.handleObjectMouseEventDispatchRelease(d,a)}),c.length&&c.forEach(d=>{this.handleObjectMouseEventDispatch(d,a)}),this._prevObjects=c}}handleObjectMouseEventDispatch(e,a){var i,o;e.dispatchEvent({type:"beginEvent",eventName:a}),(o=(i=this.eventsPerObjects[a])==null?void 0:i[e.uuid])==null||o.forEach(c=>{c.dispatch()})}handleObjectMouseEventDispatchRelease(e,a){var i,o;e.dispatchEvent({type:"beginEvent",eventName:a}),(o=(i=this.eventsPerObjects[a])==null?void 0:i[e.uuid])==null||o.forEach(c=>{c.dispatchRelease()})}handleKeyEvent(e,a,i=!1){this.objectsPerTypes[a].forEach(o=>{let c=this.eventsPerObjects[a][o.uuid];c.some(({data:d})=>"key"in d&&d.key===e.key)&&o.dispatchEvent({type:"beginEvent",eventName:a}),c.forEach(d=>{"key"in d.data&&d.data.key===e.key&&(i?d.dispatchRelease():d.dispatch(!0))})})}handleKeyEventHeld(e,a,i=!1){this.objectsPerTypes[a].forEach(o=>{this.eventsPerObjects[a][o.uuid].forEach(c=>{"key"in c.data&&c.data.key===e.key&&c.dispatchHeld(i)})})}},cJ=new _,uJ=new _,Pb=class{constructor(e,a,i,o,c){this.actionsIn=Mr$1(e,e.inActions,i,o,c,a),this.actionsOut=Mr$1(e,e.outActions,i,o,c,a)}disconnect(){hr$1(this.actionsIn),hr$1(this.actionsOut)}},NE=class extends Pb{constructor(e,a,i,o,c,d){super(a,i,o,c,d),this.id=e,this.data=a,this.object=i,this.stage="out",this.objects=[],this.onUpdateMatrixWorld=()=>{for(let st of this.objects)if(!st.visible)return;let $=cJ.setFromMatrixPosition(this.objects[0].matrixWorld),rt=uJ.setFromMatrixPosition(this.objects[1].matrixWorld),_e=$.distanceTo(rt)<=this.distance?"in":"out";if(this.stage!==_e){this.stage=_e;let st=_e==="in"?this.actionsIn:this.actionsOut;st.Audio.forEach(ut=>ut.dispatchConditional()),st.Particles.forEach(ut=>ut.dispatchConditional()),st.Video.forEach(ut=>ut.dispatchConditional()),st.Link.forEach(ut=>ut.dispatch()),st.Create.forEach(ut=>ut.dispatch()),st.Destroy.forEach(ut=>ut.dispatch()),st.Reset.forEach(ut=>ut.dispatch()),st.Transition.forEach(ut=>{ut.object.currentTransitionEvent!==this&&(ut.object.currentTransitionEvent=this),ut.init()}),st.Transition.forEach(ut=>ut.play()),st.Animation.forEach(ut=>ut.play()),st.SwitchCamera.forEach(ut=>ut.play()),st.SceneTransition.forEach(ut=>ut.dispatch()),st.SetVariable.forEach(ut=>ut.checkConditions()),st.SetVariable.forEach(ut=>ut.dispatch()),st.DynamicVariablePlay.forEach(ut=>ut.dispatch())}};let{distance:g,fromObject:b,toObject:j}=a.condition;this.distance=g;for(let $ of[b,j]){if(!$)throw new Error("Missing property");let rt=o.find($);if(!rt)throw new Error("Missing property");this.objects.push(rt)}}connect(){window.setTimeout(()=>{this.objects.forEach(e=>{e.addEventListener("updateMatrixWorld",this.onUpdateMatrixWorld)}),this.onUpdateMatrixWorld()},0)}disconnect(){super.disconnect(),this.stage="out",this.objects.forEach(e=>{e.removeEventListener("updateMatrixWorld",this.onUpdateMatrixWorld)})}},FE=class extends Pb{constructor(e,a,i,o,c,d){var j;super(a,i,o,c,d),this.id=e,this.data=a,this.object=i,this.onBegin=({target:$,state:rt})=>{this.toState!==rt&&(this.actionsOut.Audio.forEach(_e=>_e.dispatchConditional()),this.actionsOut.Particles.forEach(_e=>_e.dispatchConditional()),this.actionsOut.Video.forEach(_e=>_e.dispatchConditional()),this.actionsOut.Link.forEach(_e=>_e.dispatch()),this.actionsOut.Create.forEach(_e=>_e.dispatch()),this.actionsOut.Destroy.forEach(_e=>_e.dispatch()),this.actionsOut.Reset.forEach(_e=>_e.dispatch()),this.actionsIn.Transition.forEach(_e=>_e.pause()),this.object.currentTransitionEvent=this,this.actionsOut.Transition.forEach(_e=>_e.play()),this.actionsOut.Animation.forEach(_e=>_e.play()),this.actionsIn.SwitchCamera.forEach(_e=>_e.pause()),this.actionsOut.SwitchCamera.forEach(_e=>_e.play()),this.actionsOut.SceneTransition.forEach(_e=>_e.dispatch()),this.actionsOut.SetVariable.forEach(_e=>_e.checkConditions()),this.actionsOut.SetVariable.forEach(_e=>_e.dispatch()),this.actionsOut.DynamicVariablePlay.forEach(_e=>_e.dispatch()))},this.onComplete=({target:$,state:rt})=>{this.toState===rt&&(this.actionsIn.Audio.forEach(_e=>_e.dispatchConditional()),this.actionsIn.Particles.forEach(_e=>_e.dispatchConditional()),this.actionsIn.Video.forEach(_e=>_e.dispatchConditional()),this.actionsIn.Link.forEach(_e=>_e.dispatch()),this.actionsIn.Create.forEach(_e=>_e.dispatch()),this.actionsIn.Destroy.forEach(_e=>_e.dispatch()),this.actionsIn.Reset.forEach(_e=>_e.dispatch()),this.actionsOut.Transition.forEach(_e=>_e.pause()),this.actionsOut.Transition.forEach(_e=>_e.pause()),this.object.currentTransitionEvent=this,this.actionsIn.Transition.forEach(_e=>_e.play()),this.actionsIn.Animation.forEach(_e=>_e.play()),this.actionsOut.SwitchCamera.forEach(_e=>_e.pause()),this.actionsIn.SwitchCamera.forEach(_e=>_e.play()),this.actionsIn.SceneTransition.forEach(_e=>_e.dispatch()),this.actionsIn.SetVariable.forEach(_e=>_e.checkConditions()),this.actionsIn.SetVariable.forEach(_e=>_e.dispatch()),this.actionsIn.DynamicVariablePlay.forEach(_e=>_e.dispatch()))};let{condition:g}=a;if(!g.object)throw new Error("Missing property");let b=o.find(g.object)??o.scene.find2D(g.object);if(!b)throw new Error("Missing property");if(this.toObject=b,g.state&&!((j=this.toObject.states)!=null&&j[g.state]))throw new Error("Missing property");this.toState=g.state}connect(){bs(this.actionsOut).forEach(e=>{var a;(a=this.actionsOut[e])!=null&&a.length&&this.toObject.addEventListener("beginState",this.onBegin)}),bs(this.actionsIn).forEach(e=>{var a;(a=this.actionsIn[e])!=null&&a.length&&this.toObject.addEventListener("completeState",this.onComplete)})}disconnect(){super.disconnect(),bs(this.actionsOut).forEach(e=>{var a;(a=this.actionsIn[e])!=null&&a.length&&this.toObject.removeEventListener("beginState",this.onBegin)}),bs(this.actionsIn).forEach(e=>{var a;(a=this.actionsIn[e])!=null&&a.length&&this.toObject.removeEventListener("completeState",this.onComplete)})}},Db=class extends zr$1{constructor(e,a){super(e),this.eventsPerConditions={Comparison:[],Distance:[],State:[]},this.hasVideoAction=!1;let{page:i,sharedAssets:o}=this.eventContext;i.traverseEntity(c=>{var d;if((d=c.data)!=null&&d.events.length){for(let{id:g,data:b}of c.data.events)if(!b.disabled&&b.type==="Conditional")try{let j;b.condition.type==="Comparison"||(b.condition.type==="Distance"?j=new NE(g,b,c,i,o,a):b.condition.type==="State"&&(j=new FE(g,b,c,i,o,a))),j&&(this.eventsPerConditions[b.condition.type].push(j),(j.actionsIn.Video.length||j.actionsOut.Video.length)&&(this.hasVideoAction=!0))}catch{}}})}connect(){super.connect(),Object.values(this.eventsPerConditions).forEach(e=>e.forEach(a=>a.connect()))}disconnect(){super.disconnect(),Object.values(this.eventsPerConditions).forEach(e=>e.forEach(a=>a.disconnect()))}},Mg=new _,cc=new _,gu=new _,TN=new ii,hJ=.01,ir=new _,ki=new _,MN=new _,yu=new Qe,kE=new or$1,dJ=new ce$1,VE=new nr,Zf=new _,aa$1=new _,Jf=.2;function zE(e,a){!a||(a[0]<a[1]&&(e.x=Math.min(Math.max(e.x,a[0]),a[1])),a[2]<a[3]&&(e.y=Math.min(Math.max(e.y,a[2]),a[3])),a[4]<a[5]&&(e.z=Math.min(Math.max(e.z,a[4]),a[5])))}var fJ=function(){let e=new ce$1;return(a,i,o)=>{let c=a.obj;e.copy(c.hiddenMatrix),c.parent!==null&&e.premultiply(c.parent.matrixWorld),e.invert(),c.position.copy(i),a.reference==="global"&&zE(c.position,a.limits),c.position.applyMatrix4(e),a.reference==="parent"?zE(c.position,a.limits):a.reference==="local"&&(yu.copy(a.quat0).invert(),c.position.sub(a.position0),c.position.applyQuaternion(yu),zE(c.position,a.limits),yu.invert(),c.position.applyQuaternion(yu),c.position.add(a.position0)),e.multiply(o??c.matrixWorld).decompose(ir,c.quaternion,ki),c.updateMatrix(),c.hasNonUniformScale&&(c.updateMatrixWorld(),c.updateMatrixWorldSVD()),c instanceof pr&&Rn(c.parent)&&c.invalidateDownstreamBooleanData(!0)}}(),UE=class{constructor(e,a,i,o,c,d){this.object=e,this.data=a,this.dropDestIds=[],this.activeIdx=null,this.wasDragEventTriggered=!1,this.resetDampingFactor=this.data.resetSpeed===0?1:8/this.data.resetSpeed+1,this.snapDampingFactor=this.data.snapSpeed===0?1:8/this.data.snapSpeed+1,this.actionsDrag=Mr$1(a,a.dragDropActions.drag,i,o,c,this.object),this.actionsDrop=Mr$1(a,a.dragDropActions.drop,i,o,c,this.object);let g=[];this.data.objects.forEach(b=>{let j=i.find(b);!j||j.data.visible!==!1&&(g.push(j),d[j.uuid]&&d[j.uuid].forEach($=>{let rt=i.find($);!rt||rt.data.visible!==!1&&g.push(rt)}))}),this.data.dropDestinations.forEach(b=>{let j=i.find(b);!j||j.data.visible!==!1&&(this.dropDestIds.push(j.uuid),d[j.uuid]&&d[j.uuid].forEach($=>{let rt=i.find($);!rt||rt.data.visible!==!1&&this.dropDestIds.push(rt.uuid)}))}),this.dragItems=g.map(b=>(this.data.planeMode==="locked"&&(b.userData.lockedPlane=!0),b.userData.worldPosition0=new _().setFromMatrixPosition(b.matrixWorld),{obj:b,fromPosition:new _().setFromMatrixPosition(b.matrixWorld),pointStart:new _,pointEnd:new _,paused:!0,currentDampingFactor:this.data.dampingFactor,reset:!1,position0:new _().copy(b.position),quat0:new Qe().copy(b.quaternion),snapped:!1,orientationMatrix:new ce$1,limits:this.data.limits,reference:this.data.referenceFrame}))}get activeDragItem(){return this.activeIdx!==null?this.dragItems[this.activeIdx]:null}dispose(){hr$1(this.actionsDrag),hr$1(this.actionsDrop),this.dragItems.forEach(e=>{e.fromPosition.copy(e.obj.userData.worldPosition0),e.pointStart.copy(e.fromPosition),e.pointEnd.copy(e.pointStart),e.obj.recursiveBBoxNeedsUpdate=!0,e.obj.userData.lockedPlane=void 0,e.obj.position.copy(e.position0),e.obj.quaternion.copy(e.quat0),e.obj.updateMatrix()})}},Ob=class extends zr$1{constructor(e,a){super(e),this.eventManager=a,this.events=[],this.lastDropDestination=null,this.dragTimeout=null,this.onPointerDown=o=>{var b;if($e$1.length>1)return;this.eventContext.updateRaycaster(o);let{raycaster:c,page:d}=this.eventContext,g=d.raycastWithClones(c);if(this.lastDropDestination=null,g.length===0){this.activeEvent=null;return}for(let j of this.events){let $=0;for(let{obj:rt,pointEnd:_e,pointStart:st}of j.dragItems){if(rt===g[0].object||rt===g[0].object.object||vt.is(rt)&&rt.isAncestorOf(g[0].object.uuid)){if(j.activeIdx=$,j.activeDragItem.reset=!1,j.activeDragItem.currentDampingFactor=j.data.dampingFactor,j.activeDragItem.snapped=!1,j.data.cursor==="hand"&&this.setCursor("grabbing"),this.eventManager.controlsManager.usePhysics){j.activeDragItem.obj.rigidBody&&j.activeDragItem.obj.rigidBody.setBodyType(2,!0);let ut=j.activeDragItem.obj;rt.hasNonUniformScale&&rt.updateMatrixWorldSVD(),(ut.hasNonUniformScale?ut.matrixWorldRigid:ut.matrixWorld).decompose(ir,yu,ki),kE.setFromQuaternion(yu),ut.prevR===void 0?(ut.prevR=kE.clone(),ut.prevT=ir.clone()):(ut.prevR.copy(kE),ut.prevT.copy(ir)),this.eventManager.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.push(j.activeDragItem.obj)}this.calcPlaneIntersectPos(rt,st,j.data.plane,j.data.referenceFrame),_e.copy(st),(this.eventManager.controlsManager.usePhysics&&((b=rt.data.physics)==null?void 0:b.rigidBody)==="dynamic"||j.data.drop===!1||j.data.resetOnSnapFail===!1)&&j.activeDragItem.fromPosition.setFromMatrixPosition(j.activeDragItem.obj.matrixWorld),this.activeEvent=j,this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!1);return}$++}}this.activeEvent=null},this.onPointerMove=o=>{var b,j,$,rt;if($e$1.length>1)return;this.eventContext.updateRaycaster(o);let{raycaster:c,page:d}=this.eventContext,g=d.raycastWithClones(c);if($e$1.length===0){let _e=!1;for(let st of this.events){for(let{obj:ut}of st.dragItems)if(ut===((b=g[0])==null?void 0:b.object)||ut===(($=(j=g[0])==null?void 0:j.object)==null?void 0:$.object)||vt.is(ut)&&ut.isAncestorOf((rt=g[0])==null?void 0:rt.object.uuid)){switch(_e=!0,st.data.cursor){case"hand":this.setCursor("grab");break;case"move":this.setCursor("move");break}break}if(_e)break}_e||this.setCursor("default");return}if(this.activeEvent&&this.activeEvent.activeDragItem){let _e=this.activeEvent.activeDragItem;_e.snapped=!1;let st;if(this.activeEvent.data.drop&&(st=g.filter(ut=>_e.obj!==ut.object&&!_e.obj.isAncestorOf(ut.object.uuid)&&!(ut.object instanceof Ls)&&(this.activeEvent.data.dropOn==="all"||this.activeEvent.dropDestIds.some(gt=>gt===ut.object.uuid||d.scene.find(gt).isAncestorOf(ut.object.uuid))))[0]),st){let ut=MN.copy(st.face.normal).applyMatrix3(VE.getNormalMatrix(st.object.matrixWorld));if(this.activeEvent.data.snapTo==="center")_e.fromPosition.setFromMatrixPosition(st.object.matrixWorld);else if(this.activeEvent.data.snapTo==="surface"){if(_e.fromPosition.copy(st.point),this.activeEvent.data.snapSurfaceMode==="bbox"){ir.copy(ut).applyMatrix3(VE.setFromMatrix4(_e.obj.matrixWorld).transpose());let gt=_e.obj;ir.x>Jf?ki.x=-gt.recursiveBBox.min.x:ir.x<-Jf&&(ki.x=-gt.recursiveBBox.max.x),ir.y>Jf?ki.y=-gt.recursiveBBox.min.y:ir.y<-Jf&&(ki.y=-gt.recursiveBBox.max.y),ir.z>Jf?ki.z=-gt.recursiveBBox.min.z:ir.z<-Jf&&(ki.z=-gt.recursiveBBox.max.z),ki.applyMatrix3(VE.invert())}else ki.copy(ut).multiplyScalar(this.activeEvent.data.snapSurfaceOffset);_e.fromPosition.add(ki)}this.activeEvent.data.autoOrient&&(ir.set(0,1,0).cross(ut),ir.length()<1e-4&&ir.set(-1,0,0).cross(ut),ki.crossVectors(MN,ir),_e.orientationMatrix.makeBasis(ir,ki,ut)),_e.pointStart.copy(_e.fromPosition),_e.pointEnd.copy(_e.pointStart),_e.currentDampingFactor=this.activeEvent.snapDampingFactor,_e.snapped=!0,this.lastDropDestination!==st.object&&(this.lastDropDestination=st.object,this.activeEvent.actionsDrop.Transition.forEach(gt=>{gt.play()}),this.activeEvent.actionsDrop.Animation.forEach(gt=>{gt.play()}),this.activeEvent.actionsDrop.Audio.forEach(gt=>{gt.dispatchGameControl("start")}),this.activeEvent.actionsDrop.Particles.forEach(gt=>{gt.dispatchGameControl("start")}),this.activeEvent.actionsDrop.Create.forEach(gt=>{gt.dispatchThrottled()}))}else _e.orientationMatrix.makeRotationFromQuaternion(_e.quat0),this.lastDropDestination=null,_e.currentDampingFactor=this.activeEvent.data.dampingFactor,this.calcPlaneIntersectPos(_e.obj,_e.pointEnd,this.activeEvent.data.plane,this.activeEvent.data.referenceFrame),this.activeEvent.actionsDrop.Transition.forEach(ut=>{ut.stop(),ut.object.currentState!==null&&ut.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrop.Animation.forEach(ut=>{ut.stop()}),this.activeEvent.actionsDrop.Audio.forEach(ut=>{ut.dispatchGameControl("stop")}),this.activeEvent.actionsDrop.Particles.forEach(ut=>{ut.dispatchGameControl("stop")});this.activeEvent.actionsDrag.Create.forEach(ut=>{ut.dispatchThrottled()}),this.activeEvent.actionsDrag.SetVariable.forEach(ut=>ut.checkConditions()),this.activeEvent.actionsDrag.SetVariable.forEach(ut=>ut.dispatch()),this.activeEvent.actionsDrag.DynamicVariablePlay.forEach(ut=>ut.dispatch()),this.activeEvent.wasDragEventTriggered===!1&&(this.activeEvent.wasDragEventTriggered=!0,this.activeEvent.actionsDrag.Transition.forEach(ut=>{ut.play()}),this.activeEvent.actionsDrag.Animation.forEach(ut=>{ut.play()}),this.activeEvent.actionsDrag.Audio.forEach(ut=>{ut.dispatchGameControl("start")}),this.activeEvent.actionsDrag.Particles.forEach(ut=>{ut.dispatchGameControl("start")})),this.dragTimeout&&window.clearTimeout(this.dragTimeout),this.dragTimeout=window.setTimeout(()=>{!this.activeEvent||(this.activeEvent.wasDragEventTriggered=!1,this.activeEvent.actionsDrag.Audio.forEach(ut=>{ut.dispatchGameControl("stop")}),this.activeEvent.actionsDrag.Particles.forEach(ut=>{ut.dispatchGameControl("stop")}),this.activeEvent.actionsDrag.Transition.forEach(ut=>{ut.stop(),ut.object.currentState!==null&&ut.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrag.Animation.forEach(ut=>{ut.stop()}))},500),this.updateDragItem(_e),_e.obj.dispatchEvent({type:"requestRender"})}},this.onPointerUp=o=>{var c;if(this.activeEvent&&this.activeEvent.activeDragItem){this.activeEvent.data.cursor==="hand"&&this.setCursor("grab");let d=((c=this.activeEvent.activeDragItem.obj.data.physics)==null?void 0:c.rigidBody)==="dynamic";this.activeEvent.activeDragItem.snapped===!1&&this.activeEvent.data.drop&&this.activeEvent.data.resetOnSnapFail&&(this.eventManager.controlsManager.usePhysics===!1||!d)&&(this.activeEvent.activeDragItem.reset=this.activeEvent.data.resetOnSnapFail,this.activeEvent.activeDragItem.paused=!1,this.activeEvent.activeDragItem.currentDampingFactor=this.activeEvent.resetDampingFactor),this.eventManager.controlsManager.usePhysics&&d&&(this.eventManager.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.pop(),this.activeEvent.activeDragItem.obj.rigidBody.setBodyType(0,!0),this.activeEvent.activeDragItem.paused=!0),this.activeEvent.wasDragEventTriggered===!0&&(this.activeEvent.wasDragEventTriggered=!1,this.activeEvent.actionsDrag.Transition.forEach(g=>{g.stop(),g.object.currentState!==null&&g.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrag.Animation.forEach(g=>{g.stop()}),this.activeEvent.actionsDrag.Audio.forEach(g=>{g.dispatchGameControl("stop")}),this.activeEvent.actionsDrag.Particles.forEach(g=>{g.dispatchGameControl("stop")}),this.activeEvent.actionsDrop.SetVariable.forEach(g=>g.checkConditions()),this.activeEvent.actionsDrop.SetVariable.forEach(g=>g.dispatch()),this.activeEvent.actionsDrop.DynamicVariablePlay.forEach(g=>g.dispatch())),this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!0)}};let i={};e.page.traverseEntity(o=>{o.component&&(i[o.component.uuid]?i[o.component.uuid].push(o.uuid):i[o.component.uuid]=[o.uuid])}),e.page.traverseEntity(o=>{var c;(c=o.data)==null||c.events.filter(d=>d.data.type==="DragDrop"&&!d.data.disabled).forEach(d=>{this.events.push(new UE(o,d.data,e.page,e.sharedAssets,a,i))})})}connect(){if(!this.events.length)return;this.domEventsNeeded.clear(),this.domEventsNeeded.add("pointerdown");let e=this.eventContext.domElement;e.addEventListener("pointerdown",this.onPointerDown),e.addEventListener("pointermove",this.onPointerMove),e.addEventListener("pointerup",this.onPointerUp),this.domEventsNeeded.add("pointermove")}disconnect(){if(!this.events.length)return;this.domEventsNeeded.clear();let e=this.eventContext.domElement;e.removeEventListener("pointerdown",this.onPointerDown),e.removeEventListener("pointermove",this.onPointerMove),e.removeEventListener("pointerup",this.onPointerUp),this.events.forEach(a=>a.dispose())}setCursor(e){this.eventContext.domElement.style.cursor=e}onAnimationFrameDamping(){for(let e of this.events)for(let a of e.dragItems)a.paused||this.updateDragItem(a,!0)}calcPlaneIntersectPos(e,a,i,o){let{getCamera:c,raycaster:d}=this.eventContext;c().getWorldDirection(cc),cc.negate();let g=yu.identity();switch(o==="parent"?dJ.multiplyMatrices(e.parent.matrixWorld,e.hiddenMatrix).decompose(ir,g,ki):o==="local"&&e.matrixWorld.decompose(ir,g,ki),i){case"x":ir.set(1,0,0).applyQuaternion(g),Zf.copy(cc).cross(ir),aa$1.copy(ir).cross(Zf);break;case"y":ir.set(0,1,0).applyQuaternion(g),Zf.copy(cc).cross(ir),aa$1.copy(ir).cross(Zf);break;case"z":ir.set(0,0,1).applyQuaternion(g),Zf.copy(cc).cross(ir),aa$1.copy(ir).cross(Zf);break;case"xy":aa$1.set(0,0,1).applyQuaternion(g);break;case"yz":aa$1.set(1,0,0).applyQuaternion(g);break;case"xz":aa$1.set(0,1,0).applyQuaternion(g);break;case"adaptive":cc.angleTo(ki.set(0,1,0))>Math.PI/6?(ir.crossVectors(ki.set(0,1,0),cc),aa$1.crossVectors(ir,ki)):aa$1.set(0,1,0);break;default:aa$1.copy(cc);break}gu.setFromMatrixPosition(e.matrixWorld);let b=e.userData.lockedPlane?e.userData.worldPosition0:gu;if(TN.setFromNormalAndCoplanarPoint(aa$1,b),!!d.ray.intersectPlane(TN,a)&&(i==="x"||i==="y"||i==="z")){let j=ki.subVectors(a,b).dot(ir);a.copy(b).addScaledVector(ir,j)}}updateDragItem(e,a=!1){var i,o;gu.setFromMatrixPosition(e.obj.matrixWorld),e.reset==="current"?Mg.subVectors(e.fromPosition,gu).divideScalar(e.currentDampingFactor):e.reset==="original"?(Mg.subVectors(e.obj.userData.worldPosition0,gu).divideScalar(e.currentDampingFactor),e.fromPosition.copy(e.obj.userData.worldPosition0),e.pointStart.copy(e.fromPosition),e.pointEnd.copy(e.pointStart)):Mg.subVectors(e.pointEnd,e.pointStart).add(e.fromPosition).sub(gu).divideScalar(e.currentDampingFactor),e.paused=e.currentDampingFactor>1?Mg.length()<hJ:!0,(this.activeEvent&&this.activeEvent.data.dampingFactor===1||a)&&fJ(e,Mg.add(gu),(i=this.activeEvent)!=null&&i.data.drop&&((o=this.activeEvent)!=null&&o.data.autoOrient)?e.orientationMatrix:null),e.obj.dispatchEvent({type:"beginEvent",eventName:"DragDrop"}),this.eventManager.requestRender()}},$f=new _,GE=new _,Za=new _,Ja=new _,CN=new ii,pJ=.01,mJ={type:"requestRender"},gJ=function(){let e=new _,a=new _;return(i,o,c)=>c>0?(e.subVectors(i,o),e.length()<=c?i:a.copy(o).add(e.normalize().multiplyScalar(c))):o}(),PN=function(){let e=new ce$1;return(a,i)=>{a.position.copy(i),a.parent!==null&&(e.copy(a.parent.matrixWorld).invert(),a.position.applyMatrix4(e)),e.copy(a.hiddenMatrix).invert(),a.position.applyMatrix4(e),a.updateMatrix(),a.hasNonUniformScale&&(a.updateMatrixWorld(),a.updateMatrixWorldSVD()),a instanceof pr&&Rn(a.parent)&&a.invalidateDownstreamBooleanData(!0)}}(),jE=class{constructor(e,a,i,o,c){this.data=e,this.object=a,this.paused=!1,this.currentDampingFactor=1,this.snapComplete=!1,this.isReset=!1,this.worldPosition0=new _,this.timeoutId=null,this.delayFinished=!0,this.wasOutside=!1,this.data={...Wv.defaultData,...e,...e.resetOnPointerLeave===void 0&&{resetOnPointerLeave:!1}},e.target===void 0||e.target==="cursor"||(this.target=i.find(e.target)),this.data.dampingFactor&&(this.currentDampingFactor=this.data.dampingFactor),this.resetDampingFactor=80/this.data.resetSpeed+1,this.object.getWorldPosition(this.worldPosition0),this.actions=Mr$1(e,e.actions,i,o,c,a)}},Ib=class extends zr$1{constructor(e,a){super(e),this.events=[],this.pairOfEventListeners=[],this.onMouseMove=o=>{if(!($e$1.length>1)){this.eventContext.updateRaycaster(o);for(let c of this.events)c.target===void 0&&this.updateSingleEvent(c)}},this.onMouseEnter=o=>{for(let c of this.events)c.target===void 0&&(c.isReset=!1,c.currentDampingFactor=c.data.dampingFactor)},this.onMouseLeave=o=>{for(let c of this.events)c.target===void 0&&(c.data.resetOnPointerLeave&&(c.isReset=!0,c.currentDampingFactor=c.resetDampingFactor),this.updateSingleEvent(c))},this.onTargetChange=o=>()=>{this.updateSingleEvent(o)};let{page:i}=this.eventContext;i.traverseEntity(o=>{var d,g;let c=(d=o.data)==null?void 0:d.events.find(b=>b.data.type==="Follow"&&!b.data.disabled);c&&(!i.data.globalPhysics.usePhysics||((g=o.dataPatched.physics)==null?void 0:g.rigidBody)!=="dynamic")&&this.events.push(new jE(c.data,o,i,e.sharedAssets,a))})}connect(){if(!this.events.length)return;let{domElement:e,eventElement:a}=this.eventContext;this.domEventsNeeded.clear(),Ii&&(this.domEventsNeeded.add("pointerdown"),e.addEventListener("pointerdown",this.onMouseMove)),this.domEventsNeeded.add("pointermove"),a.addEventListener("pointermove",this.onMouseMove),this.eventContext.useWindowEvents||(e.addEventListener("pointerenter",this.onMouseEnter),e.addEventListener("pointerleave",this.onMouseLeave));for(let i of this.events)if(i.target!==void 0){let o=i.target,c=this.onTargetChange(i);this.pairOfEventListeners.push([o,c]),o.addEventListener("requestRender",c)}}disconnect(){if(!this.events.length)return;let{domElement:e,eventElement:a}=this.eventContext;this.domEventsNeeded.clear(),Ii&&e.removeEventListener("pointerdown",this.onMouseMove),a.removeEventListener("pointermove",this.onMouseMove),e.removeEventListener("pointerenter",this.onMouseEnter),e.removeEventListener("pointerleave",this.onMouseLeave);for(let[i,o]of this.pairOfEventListeners)i.removeEventListener("requestRender",o);for(let i of this.events)i.paused=!0,i.isReset=!1,hr$1(i.actions)}onAnimationFrameDamping(){for(let e of this.events)e.paused||this.updateSingleEvent(e,!0)}updateSingleEvent(e,a=!1){var g;this.events.forEach(b=>{b.actions.Create.forEach(j=>{j.dispatchThrottled()})});let{plane:i,limitDistance:o,limitDistanceEnabled:c}=e.data;if(e.object.getWorldPosition(Za),e.isReset)Ja.copy(e.worldPosition0);else if(e.target)e.target.getWorldPosition(Ja);else{let{getCamera:b,raycaster:j}=this.eventContext;if(i==="custom"?(b().getWorldDirection(GE),GE.negate(),$f.copy(GE)):i==="xy"?$f.set(0,0,1):i==="xz"?$f.set(0,1,0):i==="yz"&&$f.set(1,0,0),CN.setFromNormalAndCoplanarPoint($f,Za),!j.ray.intersectPlane(CN,Ja))return}if(!e.isReset){if(Ja.distanceTo(e.worldPosition0)>o&&c&&e.target)if(e.snapComplete=!1,e.data.snapDelay&&(e.delayFinished=!1,typeof window<"u"&&e.timeoutId!==null&&(window.clearTimeout(e.timeoutId),e.timeoutId=null)),e.wasOutside=!0,e.data.resetAfterDistanceLimit)Ja.copy(e.worldPosition0),e.currentDampingFactor=e.resetDampingFactor;else return;else if(e.wasOutside&&(e.data.snapDelay&&typeof window<"u"&&(e.timeoutId=window.setTimeout(()=>{e.delayFinished=!0,e.paused=!1,this.updateSingleEvent(e)},e.data.snapDelay*1e3)),e.currentDampingFactor=e.data.dampingFactor,e.wasOutside=!1),e.delayFinished===!1)return}e.data.enabledTranslation[0]===!1&&(Ja.x=Za.x),e.data.enabledTranslation[1]===!1&&(Ja.y=Za.y),e.data.enabledTranslation[2]===!1&&(Ja.z=Za.z);let d=gJ(Za,Ja,e.wasOutside?0:e.data.maxDelta);if(e.currentDampingFactor>1){let b=$f.subVectors(d,Za).divideScalar(e.currentDampingFactor);Za.add(b),a&&PN(e.object,Za),e.paused=b.length()<pJ}else PN(e.object,d),e.paused=!0;(g=e.object)==null||g.dispatchEvent({type:"beginEvent",eventName:"Follow"}),e.object.dispatchEvent(mJ)}},Cg=new _,Rb=new _,Pg=new ce$1,ep=new Qe,uc=new Qe,Dg=new _,Og=new _,vu=new _,$a=new _,HE=new ii,yJ=1e-6,vJ={type:"requestRender"},xJ={type:"changeRotation"},DN=function(){let e=new ce$1;return function(a,i){a.parent!==null?e.multiplyMatrices(a.parent.matrixWorld,a.hiddenMatrix):e.copy(a.hiddenMatrix),i.premultiply(RE(e).invert()),a.rotation.setFromRotationMatrix(i),a.updateMatrix(),a instanceof pr&&Rn(a.parent)&&a.invalidateDownstreamBooleanData(!0)}}(),WE=class{constructor(e,a,i){this.object=a,this.paused=!1,this.currentDampingFactor=1,this.isReset=!1,this.worldQuaternion0=new Qe,this.timeoutId=null,this.delayFinished=!0,this.wasOutside=!1,this.data={...qv.defaultData,...e,...e.resetOnPointerLeave===void 0&&{resetOnPointerLeave:!1}},e.target===void 0||e.target==="cursor"||(this.target=i.find(e.target)),this.data.dampingFactor&&(this.currentDampingFactor=this.data.dampingFactor),this.object.getWorldQuaternion(this.worldQuaternion0),this.resetDampingFactor=80/this.data.resetSpeed+1}},Lb=class extends zr$1{constructor(e){super(e),this.events=[],this.pairOfEventListeners=[],this.pairOfUserEventListeners=[],this.onMouseMove=i=>{if(!($e$1.length>1)){this._lastMouseEvent=i,this.eventContext.updateRaycaster(i);for(let o of this.events)o.target===void 0&&this.updateSingleEvent(o)}},this.onMouseEnter=i=>{for(let o of this.events)o.target===void 0&&(o.isReset=!1,o.currentDampingFactor=o.data.dampingFactor)},this.onMouseLeave=i=>{for(let o of this.events)o.target===void 0&&(o.data.resetOnPointerLeave&&(o.isReset=!0,o.currentDampingFactor=o.resetDampingFactor),this.updateSingleEvent(o))},this.onScroll=i=>{if(this._lastMouseEvent){let o=new PointerEvent("pointermove",{clientX:this._lastMouseEvent.clientX,clientY:this._lastMouseEvent.clientY,bubbles:!0,cancelable:!0,view:window});this.eventContext.eventElement.dispatchEvent(o)}},this.onTargetChange=i=>()=>{this.updateSingleEvent(i)},this.createUserEventListener=i=>({eventName:o,target:c})=>{if(!o||!c)return;let d=oa(o);d&&d==="LookAt"&&this.updateSingleEvent(i)};let{page:a}=this.eventContext;a.traverseEntity(i=>{var c,d;let o=(c=i.data)==null?void 0:c.events.find(g=>g.data.type==="LookAt"&&!g.data.disabled);o&&(!a.data.globalPhysics.usePhysics||((d=i.dataPatched.physics)==null?void 0:d.rigidBody)!=="dynamic")&&this.events.push(new WE(o.data,i,a))})}connect(){if(!this.events.length)return;let{domElement:e,eventElement:a}=this.eventContext;this.domEventsNeeded.clear(),Ii&&(this.domEventsNeeded.add("pointerdown"),e.addEventListener("pointerdown",this.onMouseMove)),this.domEventsNeeded.add("pointermove"),a.addEventListener("pointermove",this.onMouseMove),this.eventContext.useWindowEvents?a.addEventListener("scroll",this.onScroll):(e.addEventListener("pointerenter",this.onMouseEnter),e.addEventListener("pointerleave",this.onMouseLeave));for(let i of this.events){if(i.target!==void 0){let d=this.onTargetChange(i),g=i.target;this.pairOfEventListeners.push([g,d]),g.addEventListener("requestRender",d)}let o=this.createUserEventListener(i),c=i.object;this.pairOfUserEventListeners.push([c,o]),c.addEventListener("userEvent",o)}}disconnect(){if(!this.events.length)return;let{domElement:e,eventElement:a}=this.eventContext;this.domEventsNeeded.clear(),Ii&&e.removeEventListener("pointerdown",this.onMouseMove),a.removeEventListener("pointermove",this.onMouseMove),e.removeEventListener("pointerenter",this.onMouseEnter),e.removeEventListener("pointerleave",this.onMouseLeave),a.removeEventListener("scroll",this.onScroll);for(let[i,o]of this.pairOfEventListeners)i.removeEventListener("requestRender",o);for(let[i,o]of this.pairOfUserEventListeners)i.removeEventListener("userEvent",o);for(let i of this.events)i.paused=!0,i.isReset=!1}onAnimationFrameDamping(){for(let e of this.events)e.paused||this.updateSingleEvent(e)}updateSingleEvent(e){var st;let{tilt:a,axis:i,distance:o,plane:c,limitDistance:d,enabledRotation:g,limitDistanceEnabled:b}=e.data,{getCamera:j,raycaster:$}=this.eventContext,{object:rt,target:_e}=e;if(rt.getWorldPosition(Dg),!e.isReset)if(e.target)e.target.getWorldPosition(Og);else{if(c==="custom"?(j().getWorldDirection(Rb),Rb.negate(),HE.setFromNormalAndCoplanarPoint(Rb,Dg)):(c==="xy"?Cg.set(0,0,1):c==="xz"?Cg.set(0,1,0):c==="yz"&&Cg.set(1,0,0),HE.setFromNormalAndCoplanarPoint(Cg,Dg)),!$.ray.intersectPlane(HE,Og))return;o>0&&(c==="custom"||c===void 0)&&Og.addScaledVector(Rb,o)}if(e.isReset||(_e?a==="target"?vu.copy(_e.up).applyMatrix4(Pg.extractRotation(_e.matrixWorld)).normalize():g.some(ut=>ut===!1)?(i==="x"?($a.set(0,0,1),g[2]===!1&&$a.set(0,1,0)):i==="y"?($a.set(1,0,0),g[0]===!1&&$a.set(0,0,1)):($a.set(0,1,0),g[1]===!1&&$a.set(1,0,0)),vu.copy($a).applyQuaternion(e.worldQuaternion0).normalize()):vu.set(0,1,0):c==="custom"?vu.set(0,1,0):vu.copy(Cg)),e.isReset)uc.copy(e.worldQuaternion0);else if(Dg.distanceTo(Og)>d&&b&&_e)if(e.data.snapDelay&&(e.delayFinished=!1,typeof window<"u"&&e.timeoutId!==null&&(window.clearTimeout(e.timeoutId),e.timeoutId=null)),e.wasOutside=!0,e.data.resetAfterDistanceLimit)uc.copy(e.worldQuaternion0),e.currentDampingFactor=e.resetDampingFactor;else return;else{if(e.wasOutside&&(e.data.snapDelay&&typeof window<"u"&&(e.timeoutId=window.setTimeout(()=>{e.delayFinished=!0,e.paused=!1,this.updateSingleEvent(e)},e.data.snapDelay*1e3)),e.currentDampingFactor=e.data.dampingFactor,e.wasOutside=!1),e.delayFinished===!1)return;bJ(Pg,Og,Dg,vu,i,$a),uc.setFromRotationMatrix(Pg),ep.setFromUnitVectors($a.applyQuaternion(uc),vu),g.some(ut=>ut===!1)&&a!=="target"&&uc.premultiply(ep).normalize()}e.currentDampingFactor>1?(rt.updateWorldMatrix(!0,!1),ep.setFromRotationMatrix(RE(rt.matrixWorld)),ep.slerp(uc,1/e.currentDampingFactor),DN(rt,Pg.makeRotationFromQuaternion(ep)),e.paused=8*(1-ep.dot(uc))<yJ):(DN(rt,Pg.makeRotationFromQuaternion(uc)),e.paused=!0),(st=e.object)==null||st.dispatchEvent({type:"beginEvent",eventName:"LookAt"}),rt.dispatchEvent(vJ),rt.dispatchEvent(xJ)}},Vs=new _,Vi=new _,hi=new _;function bJ(e,a,i,o,c,d){let g=e.elements;hi.subVectors(a,i),hi.lengthSq()===0&&(hi.z=1),hi.normalize(),Vi.crossVectors(o,hi),Vi.lengthSq()===0&&(Math.abs(o.z)===1?hi.x+=1e-4:hi.z+=1e-4,hi.normalize(),Vi.crossVectors(o,hi)),Vi.normalize(),Vs.crossVectors(hi,Vi),c==="x"?d.z===1?[Vi,Vs,hi]=[hi,Vi,Vs]:(Vi.negate(),[Vi,hi]=[hi,Vi]):c==="y"?d.x===1?[Vi,Vs,hi]=[Vs,hi,Vi]:(Vi.negate(),[Vs,hi]=[hi,Vs]):d.x===1&&(Vi.negate(),[Vi,Vs]=[Vs,Vi]),g[0]=Vi.x,g[4]=Vs.x,g[8]=hi.x,g[1]=Vi.y,g[5]=Vs.y,g[9]=hi.y,g[2]=Vi.z,g[6]=Vs.z,g[10]=hi.z}var qE=class{constructor(e,a,i,o,c,d){this.id=e,this.data=a,this.object=i,this.entered=!1,this.actions=Mr$1(a,a.actions,o,c,d,i)}disconnect(){hr$1(this.actions)}dispatchEnter(){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.entered||(this.entered=!0,this.actions.Transition.forEach(e=>e.playFromCurrent()),this.actions.Animation.forEach(e=>e.play()),this.actions.Create.forEach(e=>e.dispatch()),this.actions.Particles.forEach(e=>e.dispatchBasic()),this.actions.Destroy.forEach(e=>e.dispatch()),this.actions.SwitchCamera.forEach(e=>e.playFromCurrent()),this.actions.SceneTransition.forEach(e=>e.dispatch()),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()))}dispatchLeave(){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.entered&&(this.entered=!1,this.actions.Transition.forEach(e=>e.reverseFromCurrent()),this.actions.Particles.forEach(e=>e.reverseFromCurrent()),this.actions.SwitchCamera.forEach(e=>e.reverseFromCurrent()))}dispatchUserEvent(e){this.actions.Transition.forEach(a=>{a.object.currentTransitionEvent!==this&&(a.object.currentTransitionEvent=this,a.init())}),e?(this.actions.Transition.forEach(a=>a.reverseFromCurrent()),this.actions.Particles.forEach(a=>a.reverseFromCurrent()),this.actions.Animation.forEach(a=>a.reverseFromCurrent()),this.actions.SwitchCamera.forEach(a=>a.reverseFromCurrent())):(this.actions.Transition.forEach(a=>a.playFromCurrent()),this.actions.Animation.forEach(a=>a.playFromCurrent()),this.actions.Create.forEach(a=>a.dispatch()),this.actions.Particles.forEach(a=>a.dispatchBasic()),this.actions.Destroy.forEach(a=>a.dispatch()),this.actions.SwitchCamera.forEach(a=>a.playFromCurrent())),this.actions.SceneTransition.forEach(a=>a.dispatch()),this.actions.SetVariable.forEach(a=>a.checkConditions()),this.actions.SetVariable.forEach(a=>a.dispatch()),this.actions.DynamicVariablePlay.forEach(a=>a.dispatch())}},Bb=class extends zr$1{constructor(e,a){super(e),this.eventsPerObjects={},this.objects=[],this.objects2D=[],this._prevObjects=[],this.onMouseDown=d=>{$e$1.length>1||(this.eventContext.updateRaycaster(d),this.handleMouseHoverEvent())},this.onMouseUp=d=>{$e$1.length>1||this.handleMouseHoverEvent(!0)},this.onMouseMove=d=>{$e$1.length>1||(this.eventContext.updateRaycaster(d),this.handleMouseHoverEvent())},this.onUserEvent=({eventName:d,target:g,reverse:b})=>{var $;if(!d||!g)return;let j=oa(d);j&&j==="MouseHover"&&(g.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),($=this.eventsPerObjects[g.uuid])==null||$.forEach(rt=>rt.dispatchUserEvent(b)))};let{page:i,sharedAssets:o}=this.eventContext,c=(d,g)=>{var b,j;if(!(!d.visible||!((b=d.data)!=null&&b.events.length))){for(let{id:$,data:rt}of d.data.events)if(!rt.disabled&&rt.type==="MouseHover")try{let _e=new qE($,rt,d,i,o,a);this.eventsPerObjects[d.uuid]?this.eventsPerObjects[d.uuid].push(_e):this.eventsPerObjects[d.uuid]=[_e]}catch{}(j=this.eventsPerObjects[d.uuid])!=null&&j.length&&this.objects.push(d instanceof Jt?g:d)}};i.traverseEntity(d=>{var g;(d instanceof _r$1||d instanceof mr)&&((g=d.frame)==null||g.traverse(b=>{c(b,d)})),c(d)})}connect(){if(!this.objects.length)return;let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),Ii&&(this.domEventsNeeded.add("pointerdown"),e.addEventListener("pointerdown",this.onMouseDown),this.domEventsNeeded.add("pointerup"),e.addEventListener("pointerup",this.onMouseUp)),this.domEventsNeeded.add("pointermove"),e.addEventListener("pointermove",this.onMouseMove),this.objects.forEach(a=>{a.addEventListener("userEvent",this.onUserEvent)})}disconnect(){if(!this.objects.length)return;let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),Ii&&(e.removeEventListener("pointerdown",this.onMouseDown),e.removeEventListener("pointerup",this.onMouseUp)),e.removeEventListener("pointermove",this.onMouseMove),Object.values(this.eventsPerObjects).forEach(a=>{a.forEach(i=>{i.disconnect()})}),this.objects.forEach(a=>{a.removeEventListener("userEvent",this.onUserEvent)})}handleMouseHoverEvent(e=!1){let a=[];if(!e){let{stopRaycast:i,raycaster:o,page:c,pointerScreen:d}=this.eventContext,g=!1;if(c.uiCanvas&&(g=yo(c,[d.x,d.y],Object.keys(this.eventsPerObjects),b=>{a.push(b)})),i&&!g){let b=Qf(o,c,this.objects);a=Tg(b),b.forEach(j=>{var $,rt;j.object instanceof _r$1&&yo(j.object,[(($=j==null?void 0:j.uv)==null?void 0:$.x)??0,((rt=j==null?void 0:j.uv)==null?void 0:rt.y)??0],Object.keys(this.eventsPerObjects),_e=>{a.push(_e)})})}else this.objects.forEach(b=>{var $,rt;let j=Kf(o,b);j&&(a.push(b),b instanceof _r$1&&yo(b,[(($=j==null?void 0:j.uv)==null?void 0:$.x)??0,((rt=j==null?void 0:j.uv)==null?void 0:rt.y)??0],Object.keys(this.eventsPerObjects),_e=>{a.push(_e)}))})}this._prevObjects.length&&this._prevObjects.forEach(i=>{var o;a.includes(i)||(i.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),(o=this.eventsPerObjects[i.uuid])==null||o.forEach(c=>c.dispatchLeave()))}),a.length&&a.forEach(i=>{var o;i.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),(o=this.eventsPerObjects[i.uuid])==null||o.forEach(c=>c.dispatchEnter())}),this._prevObjects=a}},YE=class{constructor(e,a,i,o,c,d){this.id=e,this.data=a,this.object=i,this.scrollCounter=0,this.actions=Mr$1(a,a.actions,o,c,d,i)}connect(){this.scrollCounter=0}disconnect(){hr$1(this.actions)}dispatch(e){this.actions.Transition.forEach(o=>{o.object.currentTransitionEvent!==this&&(o.object.currentTransitionEvent=this,o.init())});let a=e>0?1:-1;this.scrollCounter+=a,this.scrollCounter=Math.min(Math.max(this.scrollCounter,0),this.data.steps);let i=this.scrollCounter/this.data.steps;this.actions.Transition.forEach(o=>o.seek(i)),this.actions.Animation.forEach(o=>o.seek(a)),this.actions.Create.forEach(o=>o.dispatchThrottled()),this.actions.SetVariable.forEach(o=>o.checkConditions()),this.actions.SetVariable.forEach(o=>o.dispatch()),this.actions.DynamicVariablePlay.forEach(o=>o.dispatch())}dispatchUserEvent(e){this.actions.Transition.forEach(a=>{a.object.currentTransitionEvent!==this&&(a.object.currentTransitionEvent=this,a.init())}),e?(this.actions.Transition.forEach(a=>a.reverseFromCurrent()),this.actions.Animation.forEach(a=>a.reverseFromCurrent())):(this.actions.Transition.forEach(a=>{a.playFromCurrent()}),this.actions.Animation.forEach(a=>{a.playFromCurrent()})),this.actions.Create.forEach(a=>a.dispatchThrottled()),this.actions.SetVariable.forEach(a=>a.checkConditions()),this.actions.SetVariable.forEach(a=>a.dispatch()),this.actions.DynamicVariablePlay.forEach(a=>a.dispatch())}},XE=class{constructor(e,a,i,o,c,d,g){this.id=e,this.data=a,this.object=i,this.domElement=d,this.eventManager=g,this.scrollStart=0,this.scrollEnd=0,this.actions=Mr$1(a,a.actions,o,c,g,i)}computeScrollBounds(){let e=this.domElement.getBoundingClientRect(),a=document.body,i=document.documentElement,o=window.pageYOffset||i.scrollTop||a.scrollTop,c=i.clientTop||a.clientTop||0,d=Math.round(e.top+o-c);if(this.data.startFrom==="enter"){let g=window.innerHeight,b=e.height,j=this.data.enterAnchor,$=j==="top"?g:j==="bottom"?g-b:g-b*.5;this.scrollStart=d-$}else this.scrollStart=0;this.scrollStart+=this.data.startOffset??0,this.scrollEnd=this.scrollStart+(this.data.endAfter??400),this.box=e,this.computeScroll({x:window.scrollX,y:window.scrollY})}connect(){this.computeScrollBounds()}disconnect(){hr$1(this.actions)}handleResize(){this.computeScrollBounds()}get isInvalidBox(){return this.box===void 0||this.box.width===0&&this.box.height===0&&this.box.top===0&&this.box.bottom===0}computeScroll({x:e,y:a}){this.actions.Transition.forEach(c=>{c.object.currentTransitionEvent!==this&&(c.object.currentTransitionEvent=this,c.init())});let i=this.scrollEnd-this.scrollStart,o=Math.min(1,Math.max(0,(a-this.scrollStart)/i));this.actions.Transition.forEach(c=>c.seek(o)),this.actions.Animation.forEach(c=>c.seek(o)),this.actions.Create.forEach(c=>c.dispatchThrottled()),this.actions.SetVariable.forEach(c=>c.checkConditions()),this.actions.SetVariable.forEach(c=>c.dispatch()),this.actions.DynamicVariablePlay.forEach(c=>c.dispatch())}dispatch(e){this.isInvalidBox&&this.computeScrollBounds(),this.computeScroll(e)}dispatchUserEvent(e){this.actions.Transition.forEach(a=>{a.object.currentTransitionEvent!==this&&(a.object.currentTransitionEvent=this,a.init())}),e?(this.actions.Transition.forEach(a=>a.reverseFromCurrent()),this.actions.Animation.forEach(a=>a.reverseFromCurrent())):(this.actions.Transition.forEach(a=>{a.playFromCurrent()}),this.actions.Animation.forEach(a=>{a.playFromCurrent()})),this.actions.Create.forEach(a=>a.dispatchThrottled()),this.actions.SetVariable.forEach(a=>a.checkConditions()),this.actions.SetVariable.forEach(a=>a.dispatch()),this.actions.DynamicVariablePlay.forEach(a=>a.dispatch())}},Nb=class extends zr$1{constructor(e,a){super(e),this.wheelEventsPerObject=new Map,this.scrollEventsPerObject=new Map,this.isInview=!0,this.handleResize=()=>{[...this.scrollEventsPerObject.entries()].forEach(([b,j])=>{j.forEach($=>$.handleResize())})},this.onScroll=b=>{if(!this.isInview)return;let j={y:window.scrollY,x:window.scrollX};[...this.scrollEventsPerObject.entries()].forEach(([$,rt])=>{$.dispatchEvent({type:"beginEvent",eventName:"Scroll",scroll:j}),rt.forEach(_e=>_e.dispatch(j))})},this.onWheel=b=>{!this.isInview||b.ctrlKey||[...this.wheelEventsPerObject.entries()].forEach(([j,$])=>{j.dispatchEvent({type:"beginEvent",eventName:"Scroll",deltaY:b.deltaY}),$.forEach(rt=>rt.dispatch(b.deltaY))})},this.onUserEvent=({eventName:b,target:j,reverse:$})=>{var _e;if(!b||!j)return;let rt=oa(b);rt&&rt==="Scroll"&&(j.dispatchEvent({type:"beginEvent",eventName:"Scroll"}),(_e=this.wheelEventsPerObject.get(j))==null||_e.forEach(st=>{st.dispatchUserEvent($)}))};let{page:i,sharedAssets:o,domElement:c,isExport:d}=this.eventContext,g=b=>{var j,$,rt;if((j=b.data)!=null&&j.events.length){for(let{id:_e,data:st}of b.data.events)if(!st.disabled&&st.type==="Scroll")if(st.trigger==="load"||!d){let ut=new YE(_e,st,b,i,o,a);this.wheelEventsPerObject.has(b)?($=this.wheelEventsPerObject.get(b))==null||$.push(ut):this.wheelEventsPerObject.set(b,[ut])}else{let ut=new XE(_e,st,b,i,o,c,a);this.scrollEventsPerObject.has(b)?(rt=this.scrollEventsPerObject.get(b))==null||rt.push(ut):this.scrollEventsPerObject.set(b,[ut])}}};i.traverseEntity(b=>{var j;(b instanceof _r$1||b instanceof mr)&&((j=b.frame)==null||j.traverse($=>{g($)})),g(b)}),this.intersectionObserver=new IntersectionObserver(b=>{let j=b[0];j&&(this.isInview=j.isIntersecting)},{root:null})}connect(){this.intersectionObserver.observe(this.eventContext.domElement),[...this.wheelEventsPerObject.entries()].forEach(([e,a])=>{a.forEach(i=>i.connect()),e.addEventListener("userEvent",this.onUserEvent)}),[...this.scrollEventsPerObject.entries()].forEach(([e,a])=>{a.forEach(i=>i.connect()),e.addEventListener("userEvent",this.onUserEvent)}),[...this.wheelEventsPerObject.values()].some(e=>e.length)&&(this.domEventsNeeded.add("wheel"),window.addEventListener("wheel",this.onWheel)),[...this.scrollEventsPerObject.values()].some(e=>e.length)&&(this.domEventsNeeded.add("scroll"),window.addEventListener("scroll",this.onScroll),window.addEventListener("resize",this.handleResize))}disconnect(){window.removeEventListener("wheel",this.onWheel),window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.handleResize),this.intersectionObserver.unobserve(this.eventContext.domElement),this.domEventsNeeded.clear(),[...this.wheelEventsPerObject.entries()].forEach(([e,a])=>{a.forEach(i=>i.disconnect()),e.removeEventListener("userEvent",this.onUserEvent)}),[...this.scrollEventsPerObject.entries()].forEach(([e,a])=>{a.forEach(i=>i.disconnect()),e.removeEventListener("userEvent",this.onUserEvent)})}},QE=class{constructor(e,a,i,o,c,d){this.id=e,this.data=a,this.object=i,this.actions=Mr$1(a,a.actions,o,c,d,i)}disconnect(){hr$1(this.actions)}dispatch(){this.actions.Transition.forEach(e=>{e.play()}),this.actions.Animation.forEach(e=>{e.play()}),this.actions.SwitchCamera.forEach(e=>{e.play()}),this.actions.SceneTransition.forEach(e=>{e.dispatch()}),this.actions.Reset.forEach(e=>e.dispatch()),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()),this.actions.Create.forEach(e=>{e.dispatchFromStart()}),this.actions.Destroy.forEach(e=>{e.dispatchFromStart()})}dispatchAfter(e){this.actions.Audio.forEach(a=>{(a.interaction.data.triggerAfter??"any")===e&&(a.interaction instanceof ta?a.interaction.audioPlayer.play():a.interaction instanceof qf&&a.interaction.dispatch())}),this.actions.Video.forEach(a=>{let i=a.interaction.data.triggerAfter??"autoplay";i===e&&(a.interaction instanceof Qa?a.interaction.play(i==="autoplay"):a.interaction instanceof Xf&&a.interaction.dispatch())}),this.actions.Particles.forEach(a=>{(a.data.triggerAfter??"any")===e&&a.dispatchBasic()})}dispatchUserEvent(e){this.actions.Transition.forEach(a=>{a.object.currentTransitionEvent!==this&&(a.object.currentTransitionEvent=this,a.init())}),e?(this.actions.Transition.forEach(a=>a.reverseFromCurrent()),this.actions.Animation.forEach(a=>a.reverseFromCurrent()),this.actions.SwitchCamera.forEach(a=>a.reverseFromCurrent())):(this.actions.Transition.forEach(a=>a.playFromCurrent()),this.actions.Animation.forEach(a=>a.playFromCurrent()),this.actions.SwitchCamera.forEach(a=>a.playFromCurrent())),this.actions.SceneTransition.forEach(a=>a.dispatch()),this.actions.Reset.forEach(a=>a.dispatch()),this.actions.SetVariable.forEach(a=>a.checkConditions()),this.actions.SetVariable.forEach(a=>a.dispatch()),this.actions.DynamicVariablePlay.forEach(a=>a.dispatch()),this.actions.Create.forEach(a=>{a.dispatch()}),this.actions.Destroy.forEach(a=>{a.dispatch()}),this.actions.Audio.forEach(a=>{a.interaction instanceof ta?a.interaction.audioPlayer.play():a.interaction instanceof qf&&a.interaction.dispatch()}),this.actions.Video.forEach(a=>{a.interaction instanceof Qa?a.interaction.play():a.interaction instanceof Xf&&a.interaction.dispatch()}),this.actions.Particles.forEach(a=>{a.dispatchBasic()})}},Fb=class extends zr$1{constructor(e,a){super(e),this.eventManager=a,this.eventsPerObject=new Map,this.eventsAfterPerObject=new Map,this.onMouseDown=()=>{[...this.eventsAfterPerObject.entries()].forEach(([i,o])=>{i.dispatchEvent({type:"beginEvent",eventName:"Start"}),o.forEach(c=>{c.dispatchAfter("mouseDown")})})},this.onKeyDown=()=>{[...this.eventsAfterPerObject.entries()].forEach(([i,o])=>{i.dispatchEvent({type:"beginEvent",eventName:"Start"}),o.forEach(c=>{c.dispatchAfter("keyDown")})})},this.onAny=()=>{let{domElement:i,isExport:o}=this.eventContext;(o?document:i).removeEventListener("pointerdown",this.onAny),document.removeEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([c,d])=>{c.dispatchEvent({type:"beginEvent",eventName:"Start"}),d.forEach(g=>{g.dispatchAfter("any")})})},this.onSceneTransitionAudioVideoPlay=()=>{[...this.eventsAfterPerObject.entries()].forEach(([i,o])=>{i.dispatchEvent({type:"beginEvent",eventName:"Start"}),o.forEach(c=>{c.actions.Audio.forEach(d=>{d.interaction instanceof ta&&d.interaction.audioPlayer.play()}),c.actions.Video.forEach(d=>{let g=d.interaction.data.triggerAfter??"autoplay";d.interaction instanceof Qa&&d.interaction.play(g==="autoplay")}),c.actions.Particles.forEach(d=>{d.dispatchBasic()})})})},this.onPlay=()=>{[...this.eventsAfterPerObject.entries()].forEach(([i,o])=>{i.dispatchEvent({type:"beginEvent",eventName:"Start"}),o.forEach(c=>{c.dispatchAfter("autoplay")})})},this.onUserEvent=({eventName:i,target:o,reverse:c})=>{var g,b;if(!i||!o)return;let d=oa(i);d&&d==="Start"&&(o instanceof Jt||o.dispatchEvent({type:"beginEvent",eventName:"Start"}),(g=this.eventsPerObject.get(o))==null||g.forEach(j=>{j.dispatchUserEvent(c)}),(b=this.eventsAfterPerObject.get(o))==null||b.forEach(j=>{j.dispatchUserEvent(c)}))}}connect(){let{sharedAssets:e,page:a}=this.eventContext,i=o=>{var c,d,g,b,j;if((c=o.data)!=null&&c.events.length)for(let{id:$,data:rt}of o.data.events){if(rt.disabled||rt.type!=="Start")continue;let _e=new QE($,rt,o,a,e,this.eventManager);(_e.actions.Transition.length||_e.actions.Animation.length||_e.actions.SwitchCamera.length||_e.actions.Create.length||_e.actions.Destroy.length||_e.actions.SceneTransition.length||_e.actions.Reset.length||_e.actions.SetVariable.length||_e.actions.DynamicVariablePlay.length)&&(this.eventsPerObject.has(o)?(d=this.eventsPerObject.get(o))==null||d.push(_e):this.eventsPerObject.set(o,[_e])),_e.actions.Audio.length&&(this.eventsAfterPerObject.has(o)?(g=this.eventsAfterPerObject.get(o))==null||g.push(_e):this.eventsAfterPerObject.set(o,[_e])),_e.actions.Video.length&&(this.hasVideoAction=!0,this.eventsAfterPerObject.has(o)?(b=this.eventsAfterPerObject.get(o))==null||b.push(_e):this.eventsAfterPerObject.set(o,[_e])),_e.actions.Particles.length&&(this.eventsAfterPerObject.has(o)?(j=this.eventsAfterPerObject.get(o))==null||j.push(_e):this.eventsAfterPerObject.set(o,[_e]))}};if(a.traverseEntity(o=>{var c;(o instanceof _r$1||o instanceof mr)&&((c=o.frame)==null||c.traverse(d=>{i(d)})),i(o)}),[...this.eventsAfterPerObject.values()].some(o=>o.length)){if(this.eventManager.activateCount===0){let{domElement:o,isExport:c}=this.eventContext,d=c?document:o;d.addEventListener("pointerdown",this.onMouseDown,{once:!0}),d.addEventListener("mousedown",this.onMouseDown,{once:!0}),document.addEventListener("keydown",this.onKeyDown,{once:!0}),d.addEventListener("pointerdown",this.onAny),d.addEventListener("mousedown",this.onAny),document.addEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([g,b])=>{g.addEventListener("userEvent",this.onUserEvent)})}else this.onSceneTransitionAudioVideoPlay();this.onPlay()}[...this.eventsPerObject.entries()].forEach(([o,c])=>{o.dispatchEvent({type:"beginEvent",eventName:"Start"}),c.forEach(d=>d.dispatch()),o.addEventListener("userEvent",this.onUserEvent)})}disconnect(){if([...this.eventsAfterPerObject.values()].some(e=>e.length)){let{domElement:e,isExport:a}=this.eventContext,i=a?document:e;i.removeEventListener("pointerdown",this.onMouseDown),i.removeEventListener("mousedown",this.onMouseDown),document.removeEventListener("keydown",this.onKeyDown),i.removeEventListener("pointerdown",this.onAny),i.removeEventListener("mousedown",this.onAny),document.removeEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([o,c])=>{o.removeEventListener("userEvent",this.onUserEvent),c.forEach(d=>d.disconnect())})}[...this.eventsPerObject.entries()].forEach(([e,a])=>{e.removeEventListener("userEvent",this.onUserEvent),a.forEach(i=>i.disconnect())}),this.eventsPerObject.clear(),this.eventsAfterPerObject.clear()}},kb=class{constructor(e,a,i,o,c,d){this.id=e,this.data=a,this.object=i,this.disabled=!1,this.alreadyPlayedNonTogglingActions=new Set,this.actions=Mr$1(a,a.actions,o,c,d,i),this.target=a.target,this.useToggle=a.runMode==="Toggle"}disconnect(){hr$1(this.actions)}dispatch(e){this.disabled||(this.actions.Transition.forEach(a=>{a.object.currentTransitionEvent!==this?(a.object.currentTransitionEvent=this,a.init()):this.data.runMode==="Once"&&this.alreadyPlayedNonTogglingActions.add(a)}),this.object.dispatchEvent({type:"beginEvent",eventName:"Collision"}),this.useToggle?(this.actions.Transition.forEach(a=>{a.toggle()}),this.actions.Animation.forEach(a=>{a.toggle()})):(this.actions.Transition.forEach(a=>{this.alreadyPlayedNonTogglingActions.has(a)===!1&&a.play()}),this.actions.Animation.forEach(a=>{a.play()})),this.actions.Reset.forEach(a=>{a.dispatch()}),this.actions.Link.forEach(a=>{a.dispatch()}),this.actions.Reset.forEach(a=>{a.dispatch()}),this.actions.Create.forEach(a=>{a.dispatch()}),this.actions.Destroy.forEach(a=>{a.dispatch(e??!1)}),this.actions.SetVariable.forEach(a=>a.checkConditions()),this.actions.SetVariable.forEach(a=>a.dispatch()),this.actions.DynamicVariablePlay.forEach(a=>a.dispatch()),this.actions.Audio.forEach(a=>{a.dispatchBasic()}),this.actions.Particles.forEach(a=>{a.dispatchBasic()}),this.actions.Video.forEach(a=>{a.dispatchBasic()}))}},Vb=class extends zr$1{constructor(e,a,i,o,c){super(e),this.sharedVariables=a,this.eventManager=i,this.needsMouse=o,this.needsRaycast=c,this.dynamicVars=[],this.variablesToWatch=[],this.prevMouseProperty=null,this.prevRaycastProperty=null,this.pauseTime=0,this.events=[],this.onFrame=d=>{this.rafId=window.requestAnimationFrame(this.onFrame);let g=new Date,b=[],j=[];for(let _e=0;_e<this.propertiesToWatch.length;_e++){let{objectId:st,property:ut,prevValue:gt}=this.propertiesToWatch[_e],yt=this.eventContext.scene.find(st),Pt=Xv.propertyPaths[ut];if(Pt[0]==="width"||Pt[0]==="height"||Pt[0]==="depth")yt=yt.geometry.userData.parameters[Pt[0]];else for(let wt=0;wt<Pt.length;wt++)yt=yt[Pt[wt]];gt===null?this.propertiesToWatch[_e].prevValue=yt instanceof _?yt.clone():yt:(yt instanceof _?!yt.equals(gt):gt!==yt)&&(j.push({objId:st,property:ut}),yt instanceof _?this.propertiesToWatch[_e].prevValue.copy(yt):this.propertiesToWatch[_e].prevValue=yt)}for(let _e=0;_e<this.variablesToWatch.length;_e++){let{id:st,prevValue:ut}=this.variablesToWatch[_e],gt=this.shared.getVariable(st);gt!==ut&&(b.push(st),this.variablesToWatch[_e].prevValue=gt)}for(let _e=0;_e<this.dynamicVars.length;_e++){let{id:st,expectedTime:ut,last:gt,data:yt,timerSeconds:Pt,startValue:wt}=this.dynamicVars[_e],Ct=1e3;if((yt.dynamicVariableType==="timer"||yt.dynamicVariableType==="stopwatch")&&yt.format==="number3decimal"?Ct=1:yt.dynamicVariableType==="counter"?Ct=yt.updateInterval:yt.dynamicVariableType==="random"&&(Ct=yt.isStatic?1/0:yt.updateInterval),ut===-1){this.dynamicVars[_e].last=d,this.dynamicVars[_e].expectedTime=d+Ct;continue}if(!((this.shared.getDynamicVariablePlayState(st)==="Stopped"||this.shared.getDynamicVariablePlayState(st)==="Restarted")&&(this.dynamicVars[_e].last=d,this.dynamicVars[_e].expectedTime=d+Ct,yt.dynamicVariableType==="counter"&&this.shared.getVariable(st)!==wt&&(this.shared.updateVariable(st,wt),this.eventManager.requestRender()),(yt.dynamicVariableType==="timer"||yt.dynamicVariableType==="stopwatch")&&this.dynamicVars[_e].timerSeconds!==wt&&(this.dynamicVars[_e].timerSeconds=wt,this.shared.updateVariable(st,Mn.getFormattedTimerTime(wt,yt)),this.eventManager.requestRender()),this.shared.getDynamicVariablePlayState(st)==="Restarted"&&this.shared.setDynamicVariablePlayState(st,"Playing"),this.shared.getDynamicVariablePlayState(st)==="Stopped"))){if(this.shared.getDynamicVariablePlayState(st)==="Paused"){this.dynamicVars[_e].deltaToExpectedTime===void 0&&(this.dynamicVars[_e].deltaToExpectedTime=Math.max(this.dynamicVars[_e].expectedTime-d,0)),this.dynamicVars[_e].last=d-(Ct-this.dynamicVars[_e].deltaToExpectedTime),this.dynamicVars[_e].expectedTime=d+this.dynamicVars[_e].deltaToExpectedTime;continue}else this.dynamicVars[_e].deltaToExpectedTime=void 0;if(d>=ut)if(this.dynamicVars[_e].last=d,this.dynamicVars[_e].expectedTime+=Ct,yt.dynamicVariableType==="random"){let At=yt.min+Math.random()*(yt.max-yt.min),Tt=yt.decimals;At=Math.round(At*Math.pow(10,Tt))/Math.pow(10,Tt),this.shared.updateVariable(st,At),b.push(st),this.eventManager.requestRender()}else if(yt.dynamicVariableType==="counter"){if(yt.increment===0)continue;let At=this.shared.getVariable(st),Tt=this.shared.getDynamicVariableToggleIsForward(st)??!0,kt=this.shared.getVariable(st)+yt.increment*(Tt?1:-1);yt.hasEnd&&(kt=yt.increment>0?Me.clamp(kt,wt,yt.endValue):Me.clamp(kt,yt.endValue,wt),kt===wt&&this.shared.setDynamicVariableToggleIsForward(st,void 0),yt.repeat?kt===yt.endValue&&(kt=wt):(kt===wt||kt===yt.endValue)&&this.shared.setDynamicVariablePlayState(st,"Paused")),kt!==At&&(b.push(st),this.shared.updateVariable(st,kt),this.eventManager.requestRender())}else if(yt.dynamicVariableType==="time")this.shared.updateVariable(st,d_(g,yt)),b.push(st),this.eventManager.requestRender();else{let At=Yi.isTextValue(yt.endValue)?ON(yt.endValue.textValue):yt.endValue,Tt=this.shared.getDynamicVariableToggleIsForward(st)??!0,kt=Pt+(d-gt)/1e3*(yt.dynamicVariableType==="timer"?-1:1)*(Tt?1:-1);kt=Math.max(kt,0),yt.hasEnd&&(kt=yt.dynamicVariableType==="stopwatch"?Me.clamp(kt,wt,At):Me.clamp(kt,At,wt),kt===wt&&this.shared.setDynamicVariableToggleIsForward(st,void 0),yt.repeat?Math.abs(kt-At)<(yt.format==="number3decimal"?1e-4:.1)&&(kt=wt):(Math.abs(kt-wt)<(yt.format==="number3decimal"?1e-4:.1)||Math.abs(kt-At)<(yt.format==="number3decimal"?1e-4:.1))&&this.shared.setDynamicVariablePlayState(st,"Paused")),kt!==Pt&&(b.push(st),this.dynamicVars[_e].timerSeconds=kt,this.shared.updateVariable(st,Mn.getFormattedTimerTime(kt,yt)),this.eventManager.requestRender())}}}this.needsMouse&&this.shared.mouseProperty!==this.prevMouseProperty&&(this.prevMouseProperty=this.shared.mouseProperty,this.events.forEach(_e=>{_e.data.variableId==="mouseProperty"&&(_e.dispatch(),this.eventManager.requestRender())}));let $=!1;this.shared.mouseProperty!==this.prevMouseProperty&&(this.prevMouseProperty=this.shared.mouseProperty,$=!0);let rt=!1;this.shared.raycastProperty!==this.prevRaycastProperty&&(this.prevRaycastProperty=this.shared.raycastProperty,rt=!0),this.events.forEach(_e=>{(b.includes(_e.data.variableId)||j.find(st=>st.objId===_e.data.objectId&&st.property===_e.data.property)||_e.data.variableId==="mouseProperty"&&$||_e.data.variableId==="raycastProperty"&&rt)&&(_e.dispatch(),this.eventManager.requestRender())})},this.onBlur=()=>{this.pause()},this.onFocus=()=>{this.resume()},e.page.traverseEntity(d=>{var g;(g=d.data)==null||g.events.filter(b=>b.data.type==="VariableChange"&&!b.data.disabled).forEach(b=>{this.events.push(new KE(d.uuid,b.data,d,e.page,e.sharedAssets,i))})}),this.propertiesToWatch=this.events.filter(d=>d.data.variableId==="objectProperty"&&d.data.objectId!==null).map(d=>({objectId:d.data.objectId,property:d.data.property,prevValue:null})),this.shared=e.sharedAssets,this.sharedVariables.forEach(({id:d,data:g})=>{if(!("dynamicVariableType"in g)){this.events.find(j=>j.data.variableId===d)&&this.variablesToWatch.push({id:d,prevValue:this.shared.getVariable(d)});return}let b;if(g.dynamicVariableType==="timer"||g.dynamicVariableType==="stopwatch"){let j;if(Yi.isTextValue(g.value)&&Array.isArray(g.value.textValue)){let $=g.value.textValue;$.length===3?j=$[2]+$[1]*60+$[0]*3600:j=$[1]+$[0]*60}else j=g.value;b=j,this.dynamicVars.push({id:d,last:-1,expectedTime:-1,data:g,timerSeconds:j,startValue:b})}else g.dynamicVariableType==="time"&&this.shared.updateVariable(d,d_(new Date,g)),g.dynamicVariableType==="counter"&&(b=Yi.isTextValue(g.value)?ON(g.value.textValue):g.value),this.dynamicVars.push({id:d,last:-1,expectedTime:-1,data:g,startValue:b})})}pause(){this.pauseTime=Date.now()}resume(){let e=Date.now()-this.pauseTime;for(let a=0;a<this.dynamicVars.length;a++)this.dynamicVars[a].last+=e,this.dynamicVars[a].expectedTime+=e}connect(){this.rafId=window.requestAnimationFrame(this.onFrame),window.addEventListener("blur",this.onBlur),window.addEventListener("focus",this.onFocus)}disconnect(){window.removeEventListener("blur",this.onBlur),window.removeEventListener("focus",this.onFocus),this.rafId&&(window.cancelAnimationFrame(this.rafId),this.rafId=void 0),this.events.forEach(e=>e.dispose())}},KE=class{constructor(e,a,i,o,c,d){this.id=e,this.data=a,this.object=i,this.actions=Mr$1(a,a.actions,o,c,d,i)}dispatch(){let e=this.actions;e.Audio.forEach(a=>a.dispatchConditional()),e.Particles.forEach(a=>a.dispatchConditional()),e.Video.forEach(a=>a.dispatchConditional()),e.Create.forEach(a=>a.dispatch()),e.Destroy.forEach(a=>a.dispatch()),e.Reset.forEach(a=>a.dispatch()),e.Transition.forEach(a=>{a.object.currentTransitionEvent!==this&&(a.object.currentTransitionEvent=this),a.init()}),e.Transition.forEach(a=>a.play()),e.Animation.forEach(a=>a.play()),e.SwitchCamera.forEach(a=>a.play()),e.SceneTransition.forEach(a=>a.dispatch()),e.SetVariable.forEach(a=>a.checkConditions()),e.SetVariable.forEach(a=>a.dispatch()),e.DynamicVariablePlay.forEach(a=>a.dispatch())}dispose(){hr$1(this.actions)}};function ON(e){return e.length===3?e[2]+e[1]*60+e[0]*3600:e[1]+e[0]*60}var RN="https://unpkg.com/@splinetool/runtime@1.0.26/build/",SJ="https://unpkg.com/@splinetool/navmesh-wasm@1.0.26/build/",wJ=`
(async function() {
	const [wasmImport, wasmBinary] = await Promise.all([
		import('${RN}' + 'navmesh.js'),
		fetch('${SJ}' + 'navmesh.wasm').then((res) => res.arrayBuffer()),
	]);
	const wasmModule = wasmImport.default;
	self.module = await wasmModule({ wasmBinary });
	postMessage('ready');
})();
`,AJ=`
(async function() {
	const [wasmImport, wasmBinary] = await Promise.all([
		import(self.location.origin + '/_libraries/navmesh.js'),
		fetch(self.location.origin + '/_libraries/navmesh.wasm').then((res) => res.arrayBuffer()),
	]);
	const wasmModule = wasmImport.default;
	self.module = await wasmModule({ wasmBinary });
	postMessage('ready');
})();
`,_J=`

onmessage = function(messageEvent) {
	const meshData = messageEvent.data;
	const positions = meshData[0];
	const offset = meshData[1];
	const indices = meshData[2];
	const indicesLength = meshData[3];
	const parameters = meshData[4];

	const module = self.module;
	const rc = new module.rcConfig();
	rc.cs = parameters.cs;
	rc.ch = parameters.ch;
	rc.borderSize = parameters.borderSize ? parameters.borderSize : 0;
	rc.tileSize = parameters.tileSize ? parameters.tileSize : 0;
	rc.walkableSlopeAngle = parameters.walkableSlopeAngle;
	rc.walkableHeight = parameters.walkableHeight;
	rc.walkableClimb = parameters.walkableClimb;
	rc.walkableRadius = parameters.walkableRadius;
	rc.maxEdgeLen = parameters.maxEdgeLen;
	rc.maxSimplificationError = parameters.maxSimplificationError;
	rc.minRegionArea = parameters.minRegionArea;
	rc.mergeRegionArea = parameters.mergeRegionArea;
	rc.maxVertsPerPoly = parameters.maxVertsPerPoly;
	rc.detailSampleDist = parameters.detailSampleDist;
	rc.detailSampleMaxError = parameters.detailSampleMaxError;

	if (!self.navMesh) {
		self.navMesh = new module.NavMesh();
	}
	self.navMesh.build(positions, offset, indices, indicesLength, rc);

	const navmeshData = navMesh.getNavmeshData();
	const arrView = new Uint8Array(module.HEAPU8.buffer, navmeshData.dataPointer, navmeshData.size);
	const ret = new Uint8Array(navmeshData.size);
	ret.set(arrView);
	navMesh.freeNavmeshData(navmeshData);

	postMessage(ret);
}
`,IN=.001,EJ={cs:6,ch:2,walkableSlopeAngle:90,walkableHeight:20,walkableClimb:5,walkableRadius:0,maxEdgeLen:12,maxSimplificationError:1.3,minRegionArea:8,mergeRegionArea:20,maxVertsPerPoly:6,detailSampleDist:6,detailSampleMaxError:1},LN,Ot,cn;q2.then(e=>{LN=e,Ot=new e.Vec3,cn=new e.Vec3});var TJ=new _,zb=class{constructor(e=!1,a=!1){this.usePhysics=e,this.isExport=a,this.onPointerDown=i=>{if($e$1.length!==1)return;let{raycaster:o,page:c}=this.eventContext;this.eventContext.updateRaycaster(i);let d=c.raycastWithClones(o);if(d.length!==0){if(this.gameControl){let g=TJ.copy(this.gameControl.colliderWorldPosition);g.y-=this.gameControl.colliderHeight/2,this.gameControl.path=this.computePath(g,d[0].point)}this.eventContext.requestRender()}},this.traverseWithPhysics=(i,o)=>c=>{var st,ut,gt,yt,Pt,wt,Ct;let d;if(c instanceof Ji)if(c.objectForSample){if(c.objectForSample.dataPatched.physics.fusedBody)return;d=c.object}else return c.object.dataPatched.physics.fusedBody===!0&&c.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(c instanceof Vr)d=c.object;else if(d=c,((st=d.dataPatched.cloner)==null?void 0:st.disabled)===!1&&((ut=d.dataPatched.cloner)==null?void 0:ut.hideBase)&&((gt=d.dataPatched.physics)==null?void 0:gt.fusedBody)!==!0)return!0;if(o&&!d.userData.navmesh)return;let g=d.dataPatched;if(!g.visible&&((yt=g.physics)==null?void 0:yt.enabled)!==!0)return!0;c.updateMatrixWorldSVD();let b=Ig(g),j=d.userData.hasDestroy,$=d.userData.hasDrag,rt=!1,_e=!1;for(let At of g.events)At.data.disabled!==!0&&(At.data.type==="GameControl"?rt=!0:At.data.type==="Follow"&&(_e=!0));if(rt||b||_e||j||$)return!0;if(this.usePhysics&&((Pt=g.physics)==null?void 0:Pt.rigidBody)==="dynamic"){if(this.usePhysics&&((wt=g.physics)!=null&&wt.fusedBody))return!0}else if("geometry"in c&&c.geometry&&i.push(go(c.geometry,c.matrixWorld)),this.usePhysics&&((Ct=g.physics)==null?void 0:Ct.fusedBody))return c.traverseObject((At,Tt)=>{var Lt,Ft;if(Tt===0)return;let kt;if(At instanceof Ji)if(At.objectForSample){if(At.objectForSample.dataPatched.physics.fusedBody)return;kt=At.object}else return At.object.dataPatched.physics.fusedBody===!0&&At.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(At instanceof Vr)kt=At.object;else if(kt=At,(Lt=At.dataPatched.cloner)==null?void 0:Lt.hideBase)return!0;let It=kt.dataPatched;if(!It.visible&&((Ft=It.physics)==null?void 0:Ft.enabled)!==!0)return!0;"geometry"in At&&At.geometry&&i.push(go(At.geometry,At.matrixWorld))}),!0},this.traverseNoPhysics=(i,o)=>c=>{let d;if(c instanceof Ji)return;c instanceof Vr?d=c.object:d=c;let g=d.dataPatched;if(g.physics.enabled==="visibility"?!g.visible:!g.physics.enabled)return!0;if(o&&!d.userData.navmesh)return;let b=c.geometry,j=d.userData.hasDestroy===!0,$=d.userData.hasDrag===!0;if(Ig(g)||j||$||d.dataPatched.events.some(rt=>rt.data.disabled!==!0&&rt.data.type==="GameControl"))return!0;b&&i.push(go(b,c.matrixWorld))},this.navmeshWasm=LN,this.navMesh=new this.navmeshWasm.NavMesh,this._workerURL=URL.createObjectURL(new Blob([(a?wJ:AJ)+_J])),this._worker=new Worker(this._workerURL)}init(e,a,i){this.gameControl=a,this.eventContext=i,this.resolution=e.ch,this.setDefaultQueryExtent(new _().setScalar(e.ch*e.walkableRadius*1.2)),this._worker.onmessage=()=>{this.createNavMesh(i.page,e,o=>{this.buildFromNavmeshData(o.data)})},this.eventContext.renderer.domElement.addEventListener("pointerdown",this.onPointerDown)}createNavMesh(e,a,i){a.objects.forEach(j=>{var rt;let $=e.scene.find(j);$.traverseEntity(_e=>{_e.userData.navmesh=!0}),(rt=$.cloner)==null||rt.traverseObject(_e=>{_e.userData.navmesh=!0})});let o=[],c=(this.usePhysics?this.traverseWithPhysics:this.traverseNoPhysics)(o,a.zones==="custom");if(e.traverseChildren(c),a.objects.forEach(j=>{var rt;let $=e.scene.find(j);$.traverseEntity(_e=>{_e.userData.navmesh=void 0}),(rt=$.cloner)==null||rt.traverseObject(_e=>{_e.userData.navmesh=void 0})}),o.length===0)return!1;let d=Js(o),{positions:g,triIndices:b}=qc(d.getAttribute("position"),d.getIndex());return this._worker.postMessage([g,g.length/3,b,b.length,{...EJ,...a}]),this._worker.onmessage=i,!0}createDebugNavGeometry(){let e,a,i=this.navMesh.getDebugNavMesh(),o=i.getTriangleCount(),c=new Uint32Array(o*3),d=new Float32Array(o*3*3);for(e=0;e<o*3;e++)c[e]=e;for(e=0;e<o;e++)for(a=0;a<3;a++){let b=i.getTriangle(e).getPoint(a);d[e*9+a*3+0]=b.x,d[e*9+a*3+1]=b.y,d[e*9+a*3+2]=b.z}let g=new Pe;return g.setIndex(new Xe(c,1)),g.setAttribute("position",new Xe(d,3)),g}getClosestPoint(e){return Ot.x=e.x,Ot.y=e.y,Ot.z=e.z,this.navMesh.getClosestPoint(Ot)}getClosestPointToRef(e,a){Ot.x=e.x,Ot.y=e.y,Ot.z=e.z;let i=this.navMesh.getClosestPoint(Ot);a.set(i.x,i.y,i.z)}getRandomPointAround(e,a){return Ot.x=e.x,Ot.y=e.y,Ot.z=e.z,this.navMesh.getRandomPointAround(Ot,a)}getRandomPointAroundToRef(e,a,i){Ot.x=e.x,Ot.y=e.y,Ot.z=e.z;let o=this.navMesh.getRandomPointAround(Ot,a);i.set(o.x,o.y,o.z)}moveAlong(e,a){return Ot.x=e.x,Ot.y=e.y,Ot.z=e.z,cn.x=a.x,cn.y=a.y,cn.z=a.z,this.navMesh.moveAlong(Ot,cn)}moveAlongToRef(e,a,i){return Ot.x=e.x,Ot.y=e.y,Ot.z=e.z,cn.x=a.x,cn.y=a.y,cn.z=a.z,this.navMesh.moveAlong(Ot,cn)}computePath(e,a){let i=this.getClosestPoint(a);cn.x=i.x,cn.y=i.y,cn.z=i.z,this.getClosestPoint(e);let o=this.navMesh.computePath(Ot,cn),c=o.getPointCount(),d=[];for(let g=0;g<c;g++){let b=o.getPoint(g);d.push(new _(b.x,b.y,b.z))}return d}createCrowd(e,a){return new ZE(this,e,a)}setDefaultQueryExtent(e){Ot.x=e.x,Ot.y=e.y,Ot.z=e.z,this.navMesh.setDefaultQueryExtent(Ot)}getDefaultQueryExtent(){return this.navMesh.getDefaultQueryExtent()}buildFromNavmeshData(e){let a=e.length*e.BYTES_PER_ELEMENT,i=this.navmeshWasm._malloc(a),o=new Uint8Array(this.navmeshWasm.HEAPU8.buffer,i,a);o.set(e);let c=new this.navmeshWasm.NavmeshData;c.dataPointer=o.byteOffset,c.size=e.length,this.navMesh.buildFromNavmeshData(c),this.navmeshWasm._free(o.byteOffset)}getNavmeshData(){let e=this.navMesh.getNavmeshData(),a=new Uint8Array(this.navmeshWasm.HEAPU8.buffer,e.dataPointer,e.size),i=new Uint8Array(e.size);return i.set(a),this.navMesh.freeNavmeshData(e),i}getDefaultQueryExtentToRef(e){let a=this.navMesh.getDefaultQueryExtent();e.set(a.x,a.y,a.z)}dispose(){var e;this.navMesh.destroy(),this._worker.terminate(),URL.revokeObjectURL(this._workerURL),(e=this.eventContext)==null||e.renderer.domElement.removeEventListener("pointerdown",this.onPointerDown)}addCylinderObstacle(e,a,i){return Ot.x=e.x,Ot.y=e.y,Ot.z=e.z,this.navMesh.addCylinderObstacle(Ot,a,i)}addBoxObstacle(e,a,i){return Ot.x=e.x,Ot.y=e.y,Ot.z=e.z,cn.x=a.x,cn.y=a.y,cn.z=a.z,this.navMesh.addBoxObstacle(Ot,cn,i)}removeObstacle(e){this.navMesh.removeObstacle(e)}isSupported(){return this.navmeshWasm!==void 0}},ZE=class{constructor(e,a,i){this.navmeshWasmWrapper=e,this.transforms=[],this.agents=new Array,this.reachRadii=new Array,this._agentDestinationArmed=new Array,this._agentDestination=new Array,this.crowd=new this.navmeshWasmWrapper.navmeshWasm.Crowd(a,i,this.navmeshWasmWrapper.navMesh.getNavMesh())}onReachTarget(e,a){}addAgent(e,a,i){let o=new this.navmeshWasmWrapper.navmeshWasm.dtCrowdAgentParams;o.radius=a.radius,o.height=a.height,o.maxAcceleration=a.maxAcceleration,o.maxSpeed=a.maxSpeed,o.collisionQueryRange=a.collisionQueryRange,o.pathOptimizationRange=a.pathOptimizationRange,o.separationWeight=a.separationWeight,o.updateFlags=7,o.obstacleAvoidanceType=0,o.queryFilterType=0,o.userData=0;let c=this.crowd.addAgent(new this.navmeshWasmWrapper.navmeshWasm.Vec3(e.x,e.y,e.z),o);return this.transforms.push(i),this.agents.push(c),this.reachRadii.push(a.reachRadius?a.reachRadius:a.radius),this._agentDestinationArmed.push(!1),this._agentDestination.push(new _(0,0,0)),c}getAgentPosition(e){return this.crowd.getAgentPosition(e)}getAgentPositionToRef(e,a){let i=this.crowd.getAgentPosition(e);a.set(i.x,i.y,i.z)}getAgentVelocity(e){return this.crowd.getAgentVelocity(e)}getAgentVelocityToRef(e,a){let i=this.crowd.getAgentVelocity(e);a.set(i.x,i.y,i.z)}getAgentNextTargetPath(e){return this.crowd.getAgentNextTargetPath(e)}getAgentNextTargetPathToRef(e,a){let i=this.crowd.getAgentNextTargetPath(e);a.set(i.x,i.y,i.z)}getAgentState(e){return this.crowd.getAgentState(e)}overOffmeshConnection(e){return this.crowd.overOffmeshConnection(e)}agentGoto(e,a){this.crowd.agentGoto(e,new this.navmeshWasmWrapper.navmeshWasm.Vec3(a.x,a.y,a.z));let i=this.agents.indexOf(e);i>-1&&(this._agentDestinationArmed[i]=!0,this._agentDestination[i].set(a.x,a.y,a.z))}agentTeleport(e,a){this.crowd.agentTeleport(e,new this.navmeshWasmWrapper.navmeshWasm.Vec3(a.x,a.y,a.z))}updateAgentParameters(e,a){let i=this.crowd.getAgentParameters(e);a.radius!==void 0&&(i.radius=a.radius),a.height!==void 0&&(i.height=a.height),a.maxAcceleration!==void 0&&(i.maxAcceleration=a.maxAcceleration),a.maxSpeed!==void 0&&(i.maxSpeed=a.maxSpeed),a.collisionQueryRange!==void 0&&(i.collisionQueryRange=a.collisionQueryRange),a.pathOptimizationRange!==void 0&&(i.pathOptimizationRange=a.pathOptimizationRange),a.separationWeight!==void 0&&(i.separationWeight=a.separationWeight),this.crowd.setAgentParameters(e,i)}removeAgent(e){this.crowd.removeAgent(e);let a=this.agents.indexOf(e);a>-1&&(this.agents.splice(a,1),this.transforms.splice(a,1),this.reachRadii.splice(a,1),this._agentDestinationArmed.splice(a,1),this._agentDestination.splice(a,1))}getAgents(){return this.agents}update(e){if(this.navmeshWasmWrapper.navMesh.update(),e<=IN)return;let a=1/60,i=10;{let o=Math.floor(e/a);o>i&&(o=i),o<1&&(o=1);let c=e/o;for(let d=0;d<o;d++)this.crowd.update(c)}for(let o=0;o<this.agents.length;o++){let c=this.agents[o],d=this.getAgentPosition(c);if(this.transforms[o].copy(d),this._agentDestinationArmed[o]){let g=d.x-this._agentDestination[o].x,b=d.z-this._agentDestination[o].z,j=this.reachRadii[o],$=this._agentDestination[o].y-this.reachRadii[o],rt=this._agentDestination[o].y+this.reachRadii[o],_e=g*g+b*b;d.y>$&&d.y<rt&&_e<j*j&&(this.onReachTarget(c,this._agentDestination[o]),this._agentDestinationArmed[o]=!1)}}}setDefaultQueryExtent(e){let a=new this.navmeshWasmWrapper.navmeshWasm.Vec3(e.x,e.y,e.z);this.crowd.setDefaultQueryExtent(a)}getDefaultQueryExtent(){return this.crowd.getDefaultQueryExtent()}getDefaultQueryExtentToRef(e){let a=this.crowd.getDefaultQueryExtent();e.set(a.x,a.y,a.z)}getCorners(e){let a,i=this.crowd.getCorners(e),o=i.getPointCount(),c=[];for(a=0;a<o;a++){let d=i.getPoint(a);c.push(new _(d.x,d.y,d.z))}return c}dispose(){this.crowd.destroy()}};function JE(e){let a=!1;return e.scene.objects.forEach(i=>{i.data.type==="Page"&&!a&&i.data.publish.gameControlObject&&Nl.traverseModuleInstances(e,i.id,(o,c,d)=>{for(let g of d)g.data.type==="GameControl"&&g.data.navmesh.enabled&&(a=!0)})}),a}var MJ={type:"change"},BN={type:"changeZoom"},CJ={type:"changePan"},tp={type:"start"},rp={type:"end",changed:!0},PJ={type:"end",changed:!1},$E=new Qe,NN=new z$2,DJ=2*Math.PI,OJ=1e-8,IJ=.01,eT=new _,Ub=new z$2,tT=new _,Gb=new Qe,FN=new ce$1,RJ={type:"requestRender"},ip$2=class extends fr$2{constructor(a,i,o={isPlayMode:!1,isExport:!1}){super(),this.object=a,this.domElement=i,this.options=o,this.enabled=!0,this.useKeyEvents=!0,this.enableDamping=!1,this.enableZoom=!0,this.enableRotate=!0,this.enablePan=!0,this.autoRotate=!1,this.rotationLimitsMode=0,this.panLimitsMode=0,this.rotationSoftLimit=2,this.panSoftLimit=2,this.hoverRotatePanMode=0,this.zoomLimitsEnabled=!1,this.mouseButtons=[0,5],this.mouseButtonsPlay=[3,4,5],this.touches=[null,ns.DOLLY_ROTATE,ns.PAN],this.offset=new _,this.eye=new _,this.lastPosition=new _,this.lastQuaternion=new Qe,this.current=new z$2,this.overShoot=new z$2,this.overRatio=new z$2,this.spherical=new Fp,this.sphericalDelta=new Fp,this.panOffset=new _,this.panLeftV=new _,this.panUpV=new _,this.panV=new _,this.rotateStart=new z$2,this.rotateEnd=new z$2,this.rotateDelta=new z$2,this.panStart=new z$2,this.panEnd=new z$2,this.panDelta=new z$2,this.dollyStart=new z$2,this.dollyEnd=new z$2,this.dollyDelta=new z$2,this.rotationRangeFactor=new z$2,this.panRangeFactor=new z$2,this.state=-1,this.zoomChanged=!1,this.isPointerDown=!1,this.isThetaFlipped=!1,this.prevScale=0,this.scale=1,this.gesture=!1,this.timer=-1,this.timerHover=-1,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPhi=0,this.maxPhi=Math.PI,this.minTheta=-1/0,this.maxTheta=1/0,this.minH=0,this.maxH=Math.PI,this.minV=-1/0,this.maxV=1/0,this.autoRotateClockwise=!0,this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.resetHoverEffectOnPointerLeave=!1,this.hasChange=!1,this.useWindowEvents=!1,this.isTouchZoom=!0,this.autoRotateSpeed=2,this.dampingFactor=.125,this.zoomSpeed=2,this.rotateSpeed=1,this.panSpeed=1,this.hoverRotatePanStrength=.1,this.hoverRotateDamping=this.dampingFactor,this.thetaIsFree=!1,this.phiIsFree=!1,this.needsUpdate=!0,this.onCameraChange=c=>{this.object.removeEventListener("beginState",this.onBeginState),this.object.removeEventListener("completeState",this.onCompleteState),this.object.removeEventListener("cameraChange",this.onCameraChange),this.object=c.camera,this.object.addEventListener("beginState",this.onBeginState),this.object.addEventListener("completeState",this.onCompleteState),this.object.addEventListener("cameraChange",this.onCameraChange)},this.update=()=>{this.object.updateWorldMatrix(!0,!1),this.object.matrixWorld.decompose(tT,Gb,eT),this.offset.copy(tT).sub(this.target),this.spherical.setFromVector3(this.offset),this.object.isUpVectorFlipped&&(this.spherical.phi*=-1,this.spherical.theta-=Math.PI),this.autoRotate&&this.state===-1&&this.rotateLeft((this.autoRotateClockwise===!0?1:-1)*this.getAutoRotationAngle()),this.rotationLimitsMode!==0&&this.applyLimits(this.sphericalDelta,this.rotationLimitsMode,this.rotationSoftLimit,this.maxTheta,this.minTheta,this.maxPhi,this.minPhi,this.rotationRangeFactor),this.rotationLimitsMode!==2&&(this.spherical.phi+=this.sphericalDelta.phi),(this.rotationLimitsMode!==1||this.autoRotate===!0)&&(this.spherical.theta+=this.sphericalDelta.theta),this.spherical.radius*=this.scale,this.zoomLimitsEnabled&&(this.spherical.radius=Math.max(this.minDistance,Math.min(this.maxDistance,this.spherical.radius))),this.panLimitsMode!==0&&(this.target.applyQuaternion($E.copy(Gb).invert()),this.panOffset.applyQuaternion($E),this.applyLimits(this.panOffset,this.panLimitsMode,this.panSoftLimit,this.maxH,this.minH,this.maxV,this.minV,this.panRangeFactor),this.target.applyQuaternion(Gb),this.panOffset.applyQuaternion(Gb)),this.panLimitsMode===2&&(this.panOffset.y=0),this.panLimitsMode===1&&(this.panOffset.x=0),this.state===-1&&!this.gesture?(this.panOffset.multiplyScalar(1-this.dampingFactor),this.target.add(this.panOffset)):(this.target.add(this.panOffset),this.panOffset.set(0,0,0)),this.offset.setFromSpherical(this.spherical),tT.copy(this.target).add(this.offset),this.object.position.copy(this.target).add(this.offset),this.object.parent&&(FN.copy(this.object.parent.matrixWorld).invert(),this.object.position.applyMatrix4(FN));let c=this.spherical.phi%DJ;if(this.eye.copy(this.offset).normalize(),this.object.up.copy(_t.DEFAULT_UP).applyAxisAngle(this.eye,this.object.angleOffsetFromUp),c>0&&c>Math.PI||c<0&&c>-Math.PI?(this.object.up.negate(),this.object.lookAt(this.target),this.object.isUpVectorFlipped=!0):(this.object.lookAt(this.target),this.object.isUpVectorFlipped=!1),this.state===-1||this.enableDamping===!0){let d=this.hoverRotatePanMode===1?this.hoverRotateDamping:this.dampingFactor;this.sphericalDelta.theta*=1-d,this.sphericalDelta.phi*=1-d}else this.sphericalDelta.set(0,0,0);return this.scale=1,this.zoomChanged||this.lastPosition.distanceToSquared(this.object.position)>IJ||8*(1-this.lastQuaternion.dot(this.object.quaternion))>OJ?(this.dispatchEvent(MJ),this.object.dispatchEvent(RJ),this.lastPosition.copy(this.object.position),this.lastQuaternion.copy(this.object.quaternion),this.zoomChanged=!1,!0):(this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.object.wasMovedBySwitchCameraAction=!1,this.sphericalDelta.set(0,0,0),this.panOffset.set(0,0,0),!1)},this.onPointerDown=c=>{this.enabled!==!1&&(c.pointerType==="touch"||c.pointerType==="pen"&&Ii?this.onPointerDownTouch(c):this.onPointerDownMouse(c),this.state!==-1&&(this.isPointerDown=!0,this.dispatchEvent(tp),this.domElement.addEventListener("pointermove",this.onPointerMove),this.domElement.addEventListener("pointerup",this.onPointerUp),c.stopPropagation(),c.pointerType==="touch"||c.pointerType==="pen"&&Ii||this.domElement.setPointerCapture(c.pointerId)))},this.onPointerLeave=c=>{this.resetHoverEffectOnPointerLeave&&!this.useWindowEvents?(this.hoverRotatePanMode===1?(this.sphericalDelta.theta=-this.spherical.theta,this.sphericalDelta.phi=-this.spherical.phi,eT.subVectors(this.position0,this.target0),this.spherical.setFromVector3(eT),this.sphericalDelta.theta+=this.spherical.theta,this.sphericalDelta.phi+=this.spherical.phi,this.sphericalDelta.theta/=8,this.sphericalDelta.phi/=8):this.hoverRotatePanMode===2&&this.panOffset.subVectors(this.target0,this.target).divideScalar(8),this.update()):this.pointerLeaveEvent=c},this.onPointerEnter=c=>{this.resetHoverEffectOnPointerLeave||this.pointerLeaveEvent===void 0?Ub.set(c.clientX-this.domElement.clientWidth/2,c.clientY-this.domElement.clientHeight/2):Ub.set(c.clientX-this.pointerLeaveEvent.clientX,c.clientY-this.pointerLeaveEvent.clientY),this.hoverRotatePanMode===1?(this.rotateDelta.copy(Ub).multiplyScalar(this.rotateSpeed*this.hoverRotatePanStrength).rotateAround(NN,-this.object.angleOffsetFromUp),this.rotateLeft(2*Math.PI*this.rotateDelta.x/this.domElement.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/this.domElement.clientHeight),this.rotateStart.set(c.clientX,c.clientY)):this.hoverRotatePanMode===2&&(this.panDelta.copy(Ub).multiplyScalar(this.panSpeed*this.hoverRotatePanStrength),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.set(c.clientX,c.clientY)),this.update()},this.onPointerMove=c=>{this.enabled!==!1&&(this.checkRaycastLock()||(c.pointerType==="touch"||c.pointerType==="pen"&&Ii?this.onPointerMoveTouch(c):this.onPointerMoveMouse(c),c.stopPropagation()))},this.onPointerUp=c=>{this.isPointerDown=!1,$e$1.length===0&&(this.domElement.removeEventListener("pointermove",this.onPointerMove),this.domElement.removeEventListener("pointerup",this.onPointerUp)),$e$1.length>1&&c.preventDefault(),this.hasChange?this.dispatchEvent(rp):this.dispatchEvent(PJ),this.state=-1,c&&(c.stopPropagation(),c.pointerType==="touch"||c.pointerType==="pen"&&Ii||this.domElement.releasePointerCapture(c.pointerId))},this.onPointerDownMouse=c=>{let d;switch(this.useKeyEvents?d=this.mouseButtons[c.button]:d=this.mouseButtonsPlay[c.button],d){case 0:if(c.altKey===!0&&!c.shiftKey&&!Qp(c)){if(this.enableRotate===!1)return;this.handleMouseDownRotate(c),this.state=0}else if(this.key===" "){if(this.enablePan===!1)return;this.handleMouseDownPan(c),this.state=2}break;case 4:if(this.enablePan===!1)return;this.handleMouseDownPan(c),this.state=2;break;case 3:if(Qp(c)||c.shiftKey){if(this.enablePan===!1)return;this.handleMouseDownPan(c),this.state=2}else{if(this.enableRotate===!1)return;this.handleMouseDownRotate(c),this.state=0}break;case 5:if(Qp(c)||c.shiftKey){if(this.enableRotate===!1)return;this.handleMouseDownRotate(c),this.state=0}else{if(this.enablePan===!1)return;this.handleMouseDownPan(c),this.state=2}break;default:this.state=-1}},this.onPointerMoveMouse=c=>{switch(this.state){case 0:if(this.enableRotate===!1)return;this.handleMouseMoveRotate(c);break;case 1:if(this.enableZoom===!1)return;this.handleMouseMoveDolly(c);break;case 2:if(this.enablePan===!1)return;this.handleMouseMovePan(c);break}this.object.wasMovedByUser=!0},this.onPointerDownTouch=c=>{switch($e$1.length>1&&c.preventDefault(),this.touches[$e$1.length-1]){case ns.ROTATE:if(this.enableRotate===!1){this.state=-1;return}this.handleTouchStartRotate(),this.state=3;break;case ns.PAN:if(this.enablePan===!1){this.state=-1;return}this.handleTouchStartPan(),this.state=4;break;case ns.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this.handleTouchStartDollyPan(),this.state=5;break;case ns.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this.handleTouchStartDollyRotate(),this.state=6;break;default:this.state=-1}},this.onPointerMoveTouch=c=>{switch($e$1.length>1&&c.preventDefault(),this.state){case 3:if(this.enableRotate===!1)return;this.handleTouchMoveRotate(c),this.update();break;case 4:if(this.enablePan===!1)return;this.handleTouchMovePan(c),this.update();break;case 5:if(this.enableZoom===!1&&this.enablePan===!1)return;this.handleTouchMoveDollyPan(c),this.update();break;case 6:if(this.enableZoom===!1&&this.enableRotate===!1)return;this.handleTouchMoveDollyRotate(c),this.update();break;default:this.state=-1}this.object.wasMovedByUser=!0},this.dispatchEndDebounced=Lc(()=>this.dispatchEvent(rp),33),this.onMouseWheel=c=>{this.enabled===!1||this.enableZoom===!1&&this.enablePan===!1||this.checkRaycastLock()||(!this.options.isExport&&this.domElement.clientHeight===document.body.clientHeight&&this.domElement.clientWidth===document.body.clientWidth&&c.preventDefault(),this.dispatchEvent(tp),this.handleMouseWheel(c),this.dispatchEndDebounced(),this.object.wasMovedByUser=!0)},this.onGesture=c=>{if(c.preventDefault(),this.enabled!==!1&&!this.checkRaycastLock()&&!Uh)if(c.type==="gesturechange"){if(this.enableZoom===!1||this.isTouchZoom===!1)return;this.dispatchEvent(tp),c.scale>this.prevScale?this.dollyIn(this.getZoomScale()):c.scale<this.prevScale&&this.dollyOut(this.getZoomScale()),this.prevScale=c.scale,this.update(),this.object.wasMovedByUser=!0}else this.dispatchEvent(rp)},this.onContextMenu=c=>{c.preventDefault()},this.onTouchEnd=c=>{c.preventDefault()},this.onKeyDown=c=>{this.enabled!==!1&&(this.key=c.key,c.key===" "&&this.dispatchEvent(tp))},this.onKeyUp=c=>{this.enabled!==!1&&(this.key=void 0,this.state!==-1&&c.key==="Alt"&&this.onPointerUp($e$1[0]),c.key===" "&&this.dispatchEvent(rp))},this.onPointerHover=c=>{c.pointerType!=="mouse"||this.enabled===!1||this.state!==-1||this.hoverRotatePanMode===2&&this.isPanOverShoot||this.hoverRotatePanMode===1&&this.isRotateOverShoot||(this.isPointerDown=!0,this.hoverRotatePanMode===2?this.handleMouseMovePan(c,this.hoverRotatePanStrength):this.hoverRotatePanMode===1&&this.handleMouseMoveRotate(c,this.hoverRotatePanStrength))},this.onBeginState=()=>{this.enabled=!1,this.needsUpdate=!1},this.onCompleteState=c=>{c.isfromEntity&&this.options.isPlayMode||(this.enabled=!0,this.needsUpdate=!0,this.object.updateUp(),this.object.getTarget(this.target))},this.target=this.object.getTarget(),this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.quat0=this.object.quaternion.clone(),this.isUpVectorFlipped0=this.object.isUpVectorFlipped,this.offset.copy(this.object.position).sub(this.target),this.spherical.setFromVector3(this.offset),this.object.isUpVectorFlipped&&(this.spherical.phi*=-1,this.spherical.theta-=Math.PI),this.addEventListenersToCamera()}dispatchEvent(a){a.type==="start"?this.hasChange=!1:this.hasChange=!0,super.dispatchEvent(a)}addEventListenersToCamera(){this.object.addEventListener("beginState",this.onBeginState),this.object.addEventListener("completeState",this.onCompleteState),this.object.addEventListener("cameraChange",this.onCameraChange)}removeEventListenersFromCamera(){this.object.removeEventListener("beginState",this.onBeginState),this.object.removeEventListener("completeState",this.onCompleteState),this.object.removeEventListener("cameraChange",this.onCameraChange)}updateUseWindowEvents(a){if(window.removeEventListener("pointermove",this.onPointerHover),this.domElement.removeEventListener("pointermove",this.onPointerHover),this.useWindowEvents=a,this.hoverRotatePanMode!==0&&(this.useWindowEvents?window.addEventListener("pointermove",this.onPointerHover):this.domElement.addEventListener("pointermove",this.onPointerHover)),this.domElement.removeEventListener("pointerleave",this.onPointerLeave),this.domElement.removeEventListener("pointerenter",this.onPointerEnter),window.removeEventListener("pointerleave",this.onPointerLeave),window.removeEventListener("pointerenter",this.onPointerEnter),this.hoverRotatePanMode!==0&&!this.useWindowEvents){let i=this.useWindowEvents?window:this.domElement;i.addEventListener("pointerleave",this.onPointerLeave),i.addEventListener("pointerenter",this.onPointerEnter)}}fromJSON(a,i){this.setEnableDampingSpeed(a.enableDamping),this.enablePan=a.enablePan,this.enableZoom=a.enableZoom,this.enableRotate=a.enableRotate,this.rotationLimitsMode=a.rotationLimitsMode,this.thetaIsFree=a.rotationHorizontalOffset.min===a.rotationHorizontalOffset.max&&a.rotationHorizontalOffset.min===Math.PI,this.phiIsFree=a.rotationVerticalOffset.min===a.rotationVerticalOffset.max&&a.rotationVerticalOffset.min===Math.PI,this.panLimitsMode=a.panLimitsMode,this.panSoftLimit=a.panSoftLimit,this.rotationSoftLimit=a.rotationSoftLimit,this.hoverRotatePanMode=a.hoverRotatePanMode,this.hoverRotateDamping=a.hoverRotateDamping??this.dampingFactor,this.useWindowEvents=i==="window",this.hoverRotatePanMode!==0&&(this.useWindowEvents?window.addEventListener("pointermove",this.onPointerHover):this.domElement.addEventListener("pointermove",this.onPointerHover));let o=a.hoverRotatePanStrength/100;this.hoverRotatePanStrength=o**2,this.zoomLimitsEnabled=a.zoomLimitsEnabled,this.minZoom=a.zoomLimits.min,this.maxZoom=Math.max(a.zoomLimits.min,a.zoomLimits.max),this.minDistance=1e3/a.zoomLimits.max,this.maxDistance=Math.max(this.minDistance,1e3/a.zoomLimits.min),this.autoRotate=a.autoRotate,this.autoRotateSpeed=a.autoRotateSpeed,this.autoRotateClockwise=a.autoRotateClockwise;let c=this.object.getTarget().applyQuaternion($E.copy(this.object.quaternion).invert());this.minV=-a.panVerticalOffset.min+c.y,this.maxV=a.panVerticalOffset.max+c.y,this.minH=-a.panHorizontalOffset.min+c.x,this.maxH=a.panHorizontalOffset.max+c.x,this.panRangeFactor.set(this.maxH-this.minH,this.maxV-this.minV).divideScalar(2),this.rotationRangeFactor.setScalar(Math.PI).divideScalar(4),this.minPhi=la(this.spherical.phi-a.rotationVerticalOffset.min),this.maxPhi=la(this.spherical.phi+a.rotationVerticalOffset.max),this.minTheta=la(la(this.spherical.theta)-a.rotationHorizontalOffset.min),this.maxTheta=la(la(this.spherical.theta)+a.rotationHorizontalOffset.max),this.isThetaFlipped=this.minTheta>this.maxTheta,a.orbitTouches===1&&(this.touches[0]=ns.ROTATE),a.panTouches===1&&(this.touches[0]=ns.PAN),a.orbitTouches===2&&(this.touches[1]=ns.DOLLY_ROTATE),a.panTouches===2&&(this.touches[1]=ns.DOLLY_PAN),a.orbitTouches===3&&(this.touches[2]=ns.ROTATE),a.panTouches===3&&(this.touches[2]=ns.PAN),this.isTouchZoom=a.isTouchZoom,this.resetHoverEffectOnPointerLeave=a.resetHoverEffectOnPointerLeave??!1}connect(){if(this.domElement.addEventListener("contextmenu",this.onContextMenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("wheel",this.onMouseWheel),window.addEventListener("keydown",this.onKeyDown,!1),window.addEventListener("keyup",this.onKeyUp,!1),this.domElement.addEventListener("gesturestart",this.onGesture),this.domElement.addEventListener("gesturechange",this.onGesture),this.domElement.addEventListener("gestureend",this.onGesture),this.domElement.addEventListener("touchend",this.onTouchEnd),this.hoverRotatePanMode!==0&&!this.useWindowEvents){let a=this.useWindowEvents?window:this.domElement;a.addEventListener("pointerleave",this.onPointerLeave),a.addEventListener("pointerenter",this.onPointerEnter)}this.pointerLeaveEvent=void 0}dispose(){this.removeEventListenersFromCamera(),this.domElement.removeEventListener("contextmenu",this.onContextMenu),this.domElement.removeEventListener("pointerdown",this.onPointerDown),this.domElement.removeEventListener("wheel",this.onMouseWheel),window.removeEventListener("keydown",this.onKeyDown,!1),window.removeEventListener("keyup",this.onKeyUp,!1),this.domElement.removeEventListener("pointermove",this.onPointerHover),window.removeEventListener("pointermove",this.onPointerHover),this.domElement.removeEventListener("gesturestart",this.onGesture),this.domElement.removeEventListener("gesturechange",this.onGesture),this.domElement.removeEventListener("gestureend",this.onGesture),this.domElement.removeEventListener("touchend",this.onTouchEnd),this.domElement.removeEventListener("pointerleave",this.onPointerLeave),this.domElement.removeEventListener("pointerenter",this.onPointerEnter),window.removeEventListener("pointerleave",this.onPointerLeave),window.removeEventListener("pointerenter",this.onPointerEnter),this.domElement.removeEventListener("pointermove",this.onPointerMove),this.domElement.removeEventListener("pointerup",this.onPointerUp)}applyLimits(a,i,o,c,d,g,b,j){this.overShoot.set(0,0);let $,rt,_e;a instanceof _?($=a.x,rt=a.y,this.current.set(this.target.x,this.target.y),_e=!0):($=a.theta,rt=a.phi,this.current.set(la(this.spherical.theta),la(this.spherical.phi)),_e=!1),o===0&&(this.current.x+=$,this.current.y+=rt),(i===3||i===2)&&(!_e&&this.isThetaFlipped?this.current.x>c&&this.current.x<0?this.overShoot.x=c-this.current.x:this.current.x<d&&this.current.x>0&&(this.overShoot.x=d-this.current.x):this.current.x>c?this.overShoot.x=c-this.current.x:this.current.x<d&&(this.overShoot.x=d-this.current.x)),(i===3||i===1)&&(this.current.y>g?this.overShoot.y=g-this.current.y:this.current.y<b&&(this.overShoot.y=b-this.current.y)),_e||(this.overShoot.x=la(this.overShoot.x),this.overShoot.y=la(this.overShoot.y)),o!==0?(this.overRatio.copy(this.overShoot).divide(j),this.overRatio.x=Math.min(Math.abs(this.overRatio.x),1),this.overRatio.y=Math.min(Math.abs(this.overRatio.y),1),o===1&&(this.overRatio.x=kN(Math.abs(this.overRatio.x)),this.overRatio.y=kN(Math.abs(this.overRatio.y))),this.isPointerDown||o===1?o===2&&(this.overRatio.x>.9&&!this.thetaIsFree||this.overRatio.y>.9&&!this.phiIsFree)?this.isPointerDown=!1:($*this.overShoot.x<0&&!this.thetaIsFree&&($*=1-this.overRatio.x),rt*this.overShoot.y<0&&!this.phiIsFree&&(rt*=1-this.overRatio.y)):o===2&&(!_e&&(this.overRatio.x>.002&&!this.thetaIsFree||this.overRatio.y>.002&&!this.phiIsFree)||_e&&(Math.abs(this.overShoot.x)>2||Math.abs(this.overShoot.y)>2)?(this.thetaIsFree||($=this.overShoot.x*.05),this.phiIsFree||(rt=this.overShoot.y*.05),_e?this.isPanOverShoot=!0:this.isRotateOverShoot=!0):_e?this.isPanOverShoot=!1:this.isRotateOverShoot=!1)):($+=this.overShoot.x,rt+=this.overShoot.y),a instanceof _?(a.x=$,a.y=rt):(this.thetaIsFree||(a.theta=$),this.phiIsFree||(a.phi=rt))}setEnableDampingSpeed(a){this.enableDamping=a,this.rotateSpeed=a===!0?.2:1}stopDamping(){this.sphericalDelta.theta=0,this.sphericalDelta.phi=0}getAutoRotationAngle(){return 2*Math.PI/60/60*this.autoRotateSpeed}getZoomScale(){return Math.pow(.95,this.zoomSpeed)}rotateLeft(a){this.sphericalDelta.theta-=a}rotateUp(a){this.sphericalDelta.phi-=a}panLeft(a,i){this.panLeftV.setFromMatrixColumn(i,0),this.panLeftV.multiplyScalar(-a),this.panOffset.add(this.panLeftV)}panUp(a,i){this.panUpV.setFromMatrixColumn(i,1),this.panUpV.multiplyScalar(a),this.panOffset.add(this.panUpV)}pan(a,i){let o=this.domElement;if(o&&this.object.isPerspectiveCamera){let c=this.object.position;this.panV.copy(c).sub(this.target);let d=this.panV.length();d*=Math.tan(this.object.fov/2*Math.PI/180),this.panLeft(2*a*d/o.clientHeight,this.object.matrixWorld),this.panUp(2*i*d/o.clientHeight,this.object.matrixWorld)}else o&&this.object.isOrthographicCamera&&(this.panLeft(a*(this.object.right-this.object.left)/this.object.zoom/o.clientWidth,this.object.matrixWorld),this.panUp(i*(this.object.top-this.object.bottom)/this.object.zoom/o.clientHeight,this.object.matrixWorld));this.dispatchEvent(CJ)}dollyOut(a){this.object.isPerspectiveCamera?this.scale/=a:this.object.isOrthographicCamera&&(this.object.zoom*=a,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(BN)}dollyIn(a){this.object.isPerspectiveCamera?this.scale*=a:this.object.isOrthographicCamera&&(this.object.zoom/=a,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(BN)}zoomOut(a=this.getZoomScale()){this.dispatchEvent(tp),this.dollyOut(a),this.dispatchEvent(rp)}zoomIn(a=this.getZoomScale()){this.dispatchEvent(tp),this.dollyIn(a),this.dispatchEvent(rp)}handleMouseDownRotate(a){this.rotateStart.set(a.clientX,a.clientY)}handleMouseDownDolly(a){this.dollyStart.set(a.clientX,a.clientY)}handleMouseDownPan(a){this.panStart.set(a.clientX,a.clientY)}handleMouseMoveRotate(a,i=1){a.movementX!==void 0?this.rotateDelta.set(a.movementX,a.movementY):(this.rotateEnd.set(a.clientX,a.clientY),this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart),this.rotateStart.copy(this.rotateEnd)),this.rotateDelta.multiplyScalar(this.rotateSpeed*i).rotateAround(NN,-this.object.angleOffsetFromUp);let o=this.domElement,c=this.useWindowEvents?window.innerHeight:o.clientHeight,d=2*Math.PI*this.rotateDelta.x/c,g=2*Math.PI*this.rotateDelta.y/c;this.rotateLeft(d),this.rotateUp(g),this.update()}handleMouseMoveDolly(a){this.dollyEnd.set(a.clientX,a.clientY),this.dollyDelta.subVectors(this.dollyEnd,this.dollyStart),this.dollyDelta.y>0?this.dollyOut(this.getZoomScale()):this.dollyDelta.y<0&&this.dollyIn(this.getZoomScale()),this.dollyStart.copy(this.dollyEnd),this.update()}handleMouseMovePan(a,i=1){a.movementX!==void 0?this.panDelta.set(a.movementX,a.movementY):(this.panEnd.set(a.clientX,a.clientY),this.panDelta.subVectors(this.panEnd,this.panStart),this.panStart.copy(this.panEnd)),this.panDelta.multiplyScalar(this.panSpeed*i),this.pan(this.panDelta.x,this.panDelta.y),this.update()}handleMouseWheel(a){if(F2===!1&&Qp(a)===!1&&k2(a)===!0){if(this.enablePan===!1)return;this.gesture?(this.panDelta.set(-a.deltaX,-a.deltaY).multiplyScalar(this.panSpeed),this.panDelta.x=Math.min(Math.abs(this.panDelta.x),100)*(this.panDelta.x<0?-1:1),this.panDelta.y=Math.min(Math.abs(this.panDelta.y),100)*(this.panDelta.y<0?-1:1),a.altKey?this.pan(0,this.panDelta.y):a.shiftKey?this.pan(this.panDelta.x,0):this.pan(this.panDelta.x,this.panDelta.y),this.update()):(this.gesture=!0,this.isPointerDown=!0),window.clearTimeout(this.timer),this.timer=window.setTimeout(()=>{this.gesture=!1,this.isPointerDown=!1},30)}else{if(this.enableZoom===!1)return;a.deltaY===0?a.deltaX<0?this.dollyIn(this.getZoomScale()):a.deltaX>0&&this.dollyOut(this.getZoomScale()):a.deltaY<0?this.dollyIn(this.getZoomScale()):a.deltaY>0&&this.dollyOut(this.getZoomScale()),this.update(),this.gesture=!1,this.isPointerDown=!1}}handleTouchStartRotate(){if($e$1.length===2){let a=.5*($e$1[0].pageX+$e$1[1].pageX),i=.5*($e$1[0].pageY+$e$1[1].pageY);this.rotateStart.set(a,i)}else this.rotateStart.set($e$1[0].pageX,$e$1[0].pageY)}handleTouchStartPan(){if($e$1.length===2){let a=.5*($e$1[0].pageX+$e$1[1].pageX),i=.5*($e$1[0].pageY+$e$1[1].pageY);this.panStart.set(a,i)}else this.panStart.set($e$1[0].pageX,$e$1[0].pageY)}handleTouchStartDolly(){let a=$e$1[0].pageX-$e$1[1].pageX,i=$e$1[0].pageY-$e$1[1].pageY,o=Math.sqrt(a*a+i*i);this.dollyStart.set(0,o)}handleTouchStartDollyPan(){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchStartDolly(),this.enablePan&&this.handleTouchStartPan()}handleTouchStartDollyRotate(){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchStartDolly(),this.enableRotate&&this.handleTouchStartRotate()}handleTouchMoveRotate(a){if($e$1.length===2){let o=_v(a),c=.5*(a.pageX+o.x),d=.5*(a.pageY+o.y);this.rotateEnd.set(c,d)}else{if(a.pointerId!==$e$1[0].pointerId)return;this.rotateEnd.set(a.pageX,a.pageY)}this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart).multiplyScalar(this.rotateSpeed);let i=this.domElement;i&&(this.rotateLeft(2*Math.PI*this.rotateDelta.x/i.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/i.clientHeight)),this.rotateStart.copy(this.rotateEnd)}handleTouchMovePan(a){if($e$1.length===2){let i=_v(a),o=.5*(a.pageX+i.x),c=.5*(a.pageY+i.y);this.panEnd.set(o,c)}else{if(a.pointerId!==$e$1[0].pointerId)return;this.panEnd.set(a.pageX,a.pageY)}this.panDelta.subVectors(this.panEnd,this.panStart).multiplyScalar(this.panSpeed),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.copy(this.panEnd)}handleTouchMoveDolly(a){let i=_v(a),o=a.pageX-i.x,c=a.pageY-i.y,d=Math.sqrt(o*o+c*c);this.dollyEnd.set(0,d),this.dollyDelta.set(0,Math.pow(this.dollyEnd.y/this.dollyStart.y,this.zoomSpeed)),this.dollyOut(this.dollyDelta.y),this.dollyStart.copy(this.dollyEnd)}handleTouchMoveDollyPan(a){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchMoveDolly(a),this.enablePan&&this.handleTouchMovePan(a)}handleTouchMoveDollyRotate(a){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchMoveDolly(a),this.enableRotate&&this.handleTouchMoveRotate(a)}checkRaycastLock(){var a;if(this.object.data.raycastLock){if(this.options.isPlayMode)return!1;{let i=(a=this.options)==null?void 0:a.showCameraLock;return i&&i(),!0}}else return!1}};function la(e){let a=Math.PI*2;for(;e<=-Math.PI;)e+=a;for(;e>Math.PI;)e-=a;return e}function kN(e){return 1-Math.pow(1-e,4)}var Rg=class{constructor(e,a,i,o,c,d){this.id=e,this.data=a,this.object=i,this.page=o,this.currentIntersectedObjects=[],this.disabled=!1,this.alreadyPlayedNonTogglingActions=new Set,this.actions=Mr$1(a,a.actions,o,c,d,i),this.target=a.target,this.useToggle=a.runMode==="Toggle",this.triggeringObjects=a.triggeringObjects.map(g=>o.scene.find(g))}isValidTriggeringObject(e){return this.target==="all"?!0:this.triggeringObjects.some(a=>a===e||a.isAncestorOf(e.uuid)||e.isAncestorOf(a.uuid))}disconnect(){hr$1(this.actions)}dispatch(){this.disabled||this.object.destroyedInAction||(this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this?(e.object.currentTransitionEvent=this,e.init()):this.data.runMode==="Once"&&this.alreadyPlayedNonTogglingActions.add(e)}),this.object.dispatchEvent({type:"beginEvent",eventName:"Trigger"}),this.useToggle?(this.actions.Transition.forEach(e=>{e.toggle()}),this.actions.SwitchCamera.forEach(e=>{e.toggle()})):(this.actions.Transition.forEach(e=>{this.alreadyPlayedNonTogglingActions.has(e)===!1&&e.play()}),this.actions.SwitchCamera.forEach(e=>{e.play()})),this.actions.Link.forEach(e=>{e.dispatch()}),this.actions.Reset.forEach(e=>{e.dispatch()}),this.actions.Create.forEach(e=>{e.dispatch()}),this.actions.Destroy.forEach(e=>{e.dispatch(!1)}),this.actions.Audio.forEach(e=>{e.dispatchBasic()}),this.actions.Particles.forEach(e=>{e.dispatchBasic()}),this.actions.Video.forEach(e=>{e.dispatchBasic()}),this.actions.SceneTransition.forEach(e=>{e.dispatch()}),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()))}},jt;Q2.then(e=>jt=e);var _i=new _,vo=new Qe,hc=new _,rT=new or$1(0,0,0,"YXZ"),VN=new or$1(0,0,0,"XYZ"),xo=new _,iT=new _,nT=new _(1,1,1),np=new Qe,jb=new ce$1,zN=new ce$1,LJ={type:"updateMatrix"},UN=new Qe,sT=new Br,_b={type:"beginEvent",eventName:"Collision"},BJ={type:"beginEvent",eventName:"Trigger"};function GN(e){if(Nl.physicsEnabled(e.scene.objects))return!0;let a=!1;return e.scene.objects.traverse((i,o)=>{if(o.events){if(Array.isArray(o.events)){for(let c of o.events)if(c.data.disabled!==!0&&c.data.type==="GameControl"&&c.data.collisionEnabled){a=!0;break}}else for(let c of Object.values(o.events))if(c.disabled!==!0&&c.type==="GameControl"&&c.collisionEnabled){a=!0;break}}}),a}var Ig=e=>e.states.some(a=>a.data.position!==void 0||a.data.rotation!==void 0||a.data.hiddenMatrix!==void 0||a.data.cloner!==void 0||a.data.pathSnapping!==void 0),Hb=class{constructor(e){this.eventContext=e,this.isEnabled=!1,this.gameControl=null,this.joysticks=[],this.joystickToGameControls=[],this.sharedGameControlGlobals={entitiesWithTransformAnim:[],entityToCollisionEvents:{},colliderToEntity:new Map,triggers:[],gamePads:[],createdObjects:[],nCreatedPerAction:{}},this.sensorToTriggerEvent={},this.eventManager=void 0,this.needsCollisionDetection=!1,this.initializationCounter=-1,this.rigidBodyToMesh=new Map,this.nActiveRigidBodies=0,this.collisionEvents=[],this.isExport=!1,this.processRigidBody=a=>{if(a.bodyType()!==jt.RigidBodyType.Dynamic)return;a.isSleeping()||this.nActiveRigidBodies++;let[i,o,c]=this.rigidBodyToMesh.get(a.handle);if(_i.copy(a.translation()).multiplyScalar(this.pixelsPerMeter),vo.copy(a.rotation()),i.matrixWorld.compose(_i,vo,o),i.hasNonUniformScale&&i.matrixWorld.multiply(i.shearScale),i.dispatchEvent(LJ),c){let d=i.cloner;if(d&&d.objectForSample===void 0){d.matrixWorld.copy(i.matrixWorld);for(let g of d.children)g.updateMatrixWorld(!0)}for(let g of i.children)g.updateMatrixWorld(!0)}},this.accumulator=0,this.handleCollisionEvents=(a,i,o)=>{var g,b,j,$;if(o===!1)return;let c,d;if(this.sensorToTriggerEvent[a]?(c=this.sensorToTriggerEvent[a],d=this.sharedGameControlGlobals.colliderToEntity.get(i)):this.sensorToTriggerEvent[i]&&(c=this.sensorToTriggerEvent[i],d=this.sharedGameControlGlobals.colliderToEntity.get(a)),c&&d&&c.isValidTriggeringObject(d)){c.dispatch();return}for(let rt=this.sharedGameControlGlobals.createdObjects.length-1;rt>=0;rt--){let _e=this.sharedGameControlGlobals.createdObjects[rt];if(_e.userData.hasCollisionDestroy&&(((g=_e.rigidBody)==null?void 0:g.collider(0).handle)===a||((b=_e.rigidBody)==null?void 0:b.collider(0).handle)===i)){this.sharedGameControlGlobals.createdObjects.splice(rt,1),_e.removeFromParent(),requestAnimationFrame(()=>{var st;return(st=this.sharedGameControlGlobals.rapierWorld)==null?void 0:st.removeRigidBody(_e.rigidBody)});break}}if(((j=this.gameControl)==null?void 0:j.object)===this.sharedGameControlGlobals.colliderToEntity.get(a)){let rt=this.sharedGameControlGlobals.colliderToEntity.get(i),_e=this.sharedGameControlGlobals.entityToCollisionEvents[rt.uuid];if(_e===void 0)return;for(let st of _e)st.data.target==="character"&&this.dispatchCollisionEvent(st,rt,i)}else if((($=this.gameControl)==null?void 0:$.object)===this.sharedGameControlGlobals.colliderToEntity.get(i)){let rt=this.sharedGameControlGlobals.colliderToEntity.get(a),_e=this.sharedGameControlGlobals.entityToCollisionEvents[rt.uuid];if(_e===void 0)return;for(let st of _e)st.data.target==="character"&&this.dispatchCollisionEvent(st,rt,a)}else{let rt=this.sharedGameControlGlobals.colliderToEntity.get(a),_e=this.sharedGameControlGlobals.entityToCollisionEvents[rt.uuid];if(_e!==void 0)for(let gt of _e)gt.data.target==="scene"&&this.dispatchCollisionEvent(gt,rt,a);let st=this.sharedGameControlGlobals.colliderToEntity.get(i),ut=this.sharedGameControlGlobals.entityToCollisionEvents[st==null?void 0:st.uuid];if(ut!==void 0)for(let gt of ut)gt.data.target==="scene"&&this.dispatchCollisionEvent(gt,st,i)}},this.isExport=e.isExport,this.sharedAssets=e.sharedAssets,this.renderer=e.renderer,this.requestRender=e.requestRender,this.domElement=this.renderer.domElement,this.pixelsPerMeter=IE,this.gravity=this.page.data.globalPhysics.gravity}get page(){return this.eventContext.page}attachVRControllers(e){e.forEach(a=>{a.addEventListener("connected",i=>{"gamepad"in i.data&&"axes"in i.data.gamepad&&this.sharedGameControlGlobals.gamePads.push(i.data.gamepad)})})}markIsDestroyTarget(){this.page.traverseVisibleEntity(e=>{var i,o;let a=e.dataPatched;for(let c of a.events){if(c.data.disabled===!0)continue;let d=(o=(i=c.data.actions)==null?void 0:i.find(g=>g.data.type==="Destroy"))==null?void 0:o.data;if(d)for(let g of d.objects){let b=this.page.scene.find(g);b&&(b.userData.hasDestroy=!0)}}})}markIsDragObject(){this.page.traverseVisibleEntity(e=>{let a=e.dataPatched;for(let i of a.events)if(!(i.data.disabled===!0||i.data.type!=="DragDrop"))for(let o of i.data.objects){let c=this.page.scene.find(o);c&&(c.userData.hasDrag=!0)}})}initBVH(){let e=[];if(this.page.traverseChildren(a=>{var $,rt;let i,o=a instanceof iu,c=a instanceof uu;if(a instanceof Ji||o||c)return;a instanceof Vr?i=a.object:i=a;let d=i.dataPatched;if((($=d.physics)==null?void 0:$.enabled)==="visibility"?!d.visible:!((rt=d.physics)!=null&&rt.enabled))return!0;let g=a.geometry,b=i.userData.hasDestroy===!0,j=i.userData.hasDrag===!0;if(Ig(d)||b||j||i.dataPatched.events.some(_e=>_e.data.disabled!==!0&&_e.data.type==="GameControl"))return a.updateMatrixWorldSVD(),this.addBoundsTree(a),!0;g&&e.push(go(g,a.matrixWorld))}),e.length>0){let a=Js(e,!1);this.sharedGameControlGlobals.staticMeshBVH=new Vo(a)}}addRigidBody(e,a,i){let o=[],c="geometry"in e?e.geometry:void 0,d=a.dataPatched;if((c==null?void 0:c.getAttribute("position"))!==void 0&&o.push(go(c,e.shearScale)),d.physics.fusedBody){let g=this.gatherChildrenGeom(e,o);e.traverseObject(g),e.children.forEach(j=>j.updateMatrixWorld(!0));let b=e.cloner;b&&b.objectForSample===void 0&&d.physics.rigidBody==="dynamic"&&(b.traverseObject(g),b.children.forEach(j=>j.updateMatrixWorld(!0)))}if(o.length>0){let g,b=!i.fromCreate&&d.physics.rigidBody==="dynamic"||i.fromCreate&&i.dynamic;b?(g=jt.RigidBodyDesc.dynamic(),g.setLinearDamping(d.physics.damping).setAngularDamping(d.physics.damping).setAdditionalMass(1e-9).setGravityScale(d.physics.gravityScale).enabledRotations(...d.physics.enabledRotation).enabledTranslations(...d.physics.enabledTranslation)):(i.hasTransformAnim||i.hasFollow||i.hasDrag)&&!i.fromCreate?(g=jt.RigidBodyDesc.kinematicPositionBased(),this.sharedGameControlGlobals.entitiesWithTransformAnim.push(e)):g=jt.RigidBodyDesc.fixed();let j=Js(o);(e.hasNonUniformScale?e.matrixWorldRigid:e.matrixWorld).decompose(_i,vo,hc),e.position0=_i.clone().divideScalar(this.pixelsPerMeter),e.rotation0=vo.clone(),_i.divideScalar(this.pixelsPerMeter),g.setTranslation(_i.x,_i.y,_i.z).setRotation(vo),c?j==null||j.scale(1/this.pixelsPerMeter,1/this.pixelsPerMeter,1/this.pixelsPerMeter):j==null||j.scale(hc.x/this.pixelsPerMeter,hc.y/this.pixelsPerMeter,hc.z/this.pixelsPerMeter);let $=this.sharedGameControlGlobals.rapierWorld.createRigidBody(g);b&&this.rigidBodyToMesh.set($.handle,[e,hc.clone(),d.physics.fusedBody]);let rt=!(d.geometry===void 0||d.geometry.type==="SubdivGeometry"||d.geometry.type==="NonParametricGeometry"||d.geometry.type==="BooleanGeometry"||d.geometry.type==="VectorGeometry"||d.geometry.type==="StarGeometry"||d.geometry.type==="RectangleGeometry"||d.geometry.type==="EllipseGeometry"||d.geometry.type==="TriangleGeometry"||d.geometry.type==="TorusGeometry"||d.geometry.type==="HelixGeometry");try{this.addCollider($,d.physics,j,a,rt)}catch{try{this.addCollider($,d.physics,j,a,!1)}catch(_e){console.error(_e)}}e.rigidBody=$}}addBoundsTree(e){var i,o;let a=[];if(((i=e.geometry)==null?void 0:i.getAttribute("position"))!==void 0&&((o=e.geometry)==null?void 0:o.getAttribute("position").count)>0&&a.push(go(e.geometry,e.shearScale)),e.traverseObject(this.gatherChildrenGeom(e,a)),e.children.forEach(c=>c.updateMatrixWorld(!0)),a.length>0){let c=Js(a,!1);e.bvhGeometry=c,e.bvhGeometry.boundsTree=new Vo(c),this.sharedGameControlGlobals.entitiesWithTransformAnim.push(e)}}addCollider(e,a,i,o,c=!0){var b,j;if((i==null?void 0:i.getAttribute("position").count)===0||((b=i==null?void 0:i.getIndex())==null?void 0:b.count)===0)return;let d;i&&(a.colliderType==="trimesh"?d=jt.ColliderDesc.trimesh(i.getAttribute("position").array,i.getIndex().array):d=jt.ColliderDesc.convexMesh(i.getAttribute("position").array,c?i.getIndex().array:void 0)),d.setFrictionCombineRule(jt.CoefficientCombineRule.Average).setRestitutionCombineRule(jt.CoefficientCombineRule.Average).setDensity(a.density).setFriction(a.friction).setRestitution(a.restitution);let g=this.sharedGameControlGlobals.rapierWorld.createCollider(d,e);this.sharedGameControlGlobals.colliderToEntity.set(g.handle,o),(j=this.sharedGameControlGlobals.entityToCollisionEvents[o.uuid])!=null&&j.some($=>$.target==="scene")&&g.setActiveEvents(jt.ActiveEvents.COLLISION_EVENTS)}gatherChildrenGeom(e,a){return(i,o)=>{var b;if(o===0)return;let c;if(i instanceof Ji)if(i.objectForSample){if(i.objectForSample.dataPatched.physics.fusedBody)return;c=i.object}else return i.object.dataPatched.physics.fusedBody===!0&&i.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(i instanceof Vr)c=i.object;else if(c=i,(b=c.dataPatched.cloner)==null?void 0:b.hideBase)return!0;let d=c.dataPatched;if(d.physics.enabled==="visibility"?!d.visible:!d.physics.enabled)return!0;o===1?e.hasNonUniformScale?i.matrixWorld.multiplyMatrices(e.shearScale,i.hiddenMatrix):i.matrixWorld.copy(i.hiddenMatrix):i.matrixWorld.multiplyMatrices(i.parent.matrixWorld,i.hiddenMatrix),i.matrixWorld.multiply(i.matrix);let g=i.geometry;(g==null?void 0:g.getAttribute("position"))!==void 0&&a.push(go(g,i.matrixWorld))}}activate(e){var st,ut;if(this.isEnabled)return;this.isEnabled=!0,this.eventManager=e,this.usePhysics=this.page.data.globalPhysics.usePhysics;let a=this.page.playCamera,i=!1,o=5,c=8,d=9,g="drag",b=this.page.data.publish.gameControlObject,j=b!==null?this.page.find(b):null,$=null;if(j)for(let gt of j.data.events){if(gt.data.disabled||gt.data.type!=="GameControl")break;let yt=j;for(;this.usePhysics&&((st=yt=yt.parent)==null?void 0:st.parent)!==null&&!((ut=yt.data.physics)!=null&&ut.fusedBody););gt.data.collisionEnabled&&(this.needsCollisionDetection=!0),$===null&&($=gt.data)}if(this.page.traverseEntity(gt=>{for(let yt of gt.dataPatched.events)if(yt.data.disabled===!1&&yt.data.type==="Trigger")return this.needsCollisionDetection=!0,!0}),j&&$){i=i||$.camera===a.uuid||j.uuid===a.uuid;let gt=new Eg(j,this.renderer.domElement,$,this.eventContext.page.data.globalPhysics,this,j.uuid!==a.uuid&&$.camera===a.uuid,a,this.page,this.sharedAssets);this.gameControl=gt,o=$.joystickPosLoc,c=$.joystickRotLoc,d=$.jumpTouchButtonLoc,g=$.rotByTouch,Ii&&$.touchControl&&(this.joystickToGameControls[o]="pos",$.moveMode==="walk"&&(this.joystickToGameControls[d]="jmp"),g==="joystick"&&(this.joystickToGameControls[c]="rot"))}if(this.gameControl&&this.gameControl.data.navmesh.enabled){let gt=this.gameControl.data;if(!this.navigationMeshWrapper){this.navigationMeshWrapper=new zb(this.usePhysics,this.isExport);let yt;gt.collider.type==="sphere"?yt=gt.collider.radius*2:yt=gt.collider.height,yt=Math.floor(yt/gt.navmesh.ch-1),this.navigationMeshWrapper.init({...gt.navmesh,walkableHeight:yt},this.gameControl,this.eventContext)}}if(i===!1){let{enableRotate:gt,enablePan:yt,enableZoom:Pt,autoRotate:wt,hoverRotatePanMode:Ct}=this.eventManager.publish.orbitControls;(gt||yt||Pt||wt||Ct!==0)&&(this.orbitControls=new ip$2(a,this.renderer.domElement,{isExport:this.isExport,isPlayMode:!0}),this.orbitControls.addEventListener("change",this.requestRender),this.orbitControls.addEventListener("end",this.requestRender),this.orbitControls.addEventListener("start",this.requestRender),this.orbitControls.fromJSON(this.eventManager.publish.orbitControls,this.eventManager.publish.mouseEventTarget),this.orbitControls.useKeyEvents=!1,this.orbitControls.addEventListenersToCamera(),this.orbitControls.connect(),this.orbitControls.update())}let rt=this.renderer.domElement.width/this.renderer.getPixelRatio(),_e=this.renderer.domElement.height/this.renderer.getPixelRatio();this.joystickToGameControls.forEach((gt,yt)=>{let Pt=document.body.appendChild(document.createElement("div")),[wt,Ct,At]=this.eventManager.eventContext.publish.joystickSizeAndXYOffset[yt],Tt=(rt-5*wt)/4+wt,kt={},It=gt==="jmp",Lt=It?0:wt;yt<10?(yt<5?kt.top=Lt/2:kt.bottom=Lt/2,kt.left=Lt/2+yt%5*Tt):yt===10?(kt.left=Lt/2,kt.top=_e/2):(kt.right=Lt/2,kt.top=_e/2),kt.top?kt.top-=Ct[1]:kt.bottom+=Ct[1],kt.left?kt.left+=Ct[0]:kt.right-=Ct[0];for(let Ht in kt)kt[Ht]+="px";if(It){let Ht=Pt.appendChild(document.createElement("div"));Object.assign(Ht.style,kt,{position:"absolute",width:wt+"px",height:wt+"px",backgroundColor:`rgba(255,255,255,${At==="show"?.4:0})`,zIndex:"9999",borderRadius:wt+"px",border:At==="show"?"solid 2px rgba(0, 0, 0, .1)":"none",display:"flex",alignItems:"center",justifyContent:"center",touchAction:"none"});let Gr=wt/16*16*.4;At==="show"&&(Ht.innerHTML=`
						<svg width="${Gr}" height="${wt*.4}" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
							<path d="M2 10L8 4L14 10" stroke="black" stroke-opacity="40%" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
						</svg>
					`),Ht.addEventListener("pointerdown",()=>{this.gameControl.movementState.jump=1,this.requestRender()}),Ht.addEventListener("touchend",hs=>hs.preventDefault()),this.joysticks[yt]=[void 0,Pt];return}let Ft={zone:Pt,mode:"static",position:kt,size:wt};At==="hide"&&(Ft.restOpacity=0);let Nt=xB.create(Ft);Nt.on("move",(Ht,Gr)=>{let hs=this.gameControl;gt==="pos"?Gr.force<.2?hs.moveForce=0:(hs.movementState.movePosZ=Math.sin(-Gr.angle.radian),hs.movementState.movePosX=Math.cos(-Gr.angle.radian),Gr.force>1.2?hs.movementState.run=1:hs.movementState.run=0,Gr.force<.3?hs.moveForce=(Gr.force-.2)/.1:hs.moveForce=1):gt==="rot"&&(Gr.force<.2?hs.rotForce=0:(hs.movementState.rotPosX=Gr.vector.y,hs.movementState.rotPosY=-Gr.vector.x,Gr.force<.3?hs.rotForce=(Gr.force-.2)/.1:hs.rotForce=1)),this.requestRender()}),Nt.on("end",(Ht,Gr)=>{let hs=this.gameControl;gt==="pos"?(hs.movementState.movePosZ=0,hs.movementState.movePosX=0,hs.moveForce=1):gt==="rot"&&(hs.movementState.rotPosX=0,hs.movementState.rotPosY=0,hs.rotForce=1)}),this.joysticks[yt]=[Nt,Pt]}),this.markIsDestroyTarget(),this.markIsDragObject(),this.rebuildBVH(),this.initializationCounter++,window.setTimeout(()=>{this.collisionEvents.forEach(gt=>gt.disabled=!1)},80)}initPhysics(){var g;(g=this.sharedGameControlGlobals.rapierWorld)==null||g.free(),this.sharedGameControlGlobals.rapierWorld=new jt.World(new jt.Vector3(0,this.gravity,0)),this.events=new jt.EventQueue(!0);let e=[],a=[];if(this.page.traverseChildren(b=>{var wt,Ct,At,Tt;let j;if(b instanceof Ji)if(b.objectForSample){if(b.objectForSample.dataPatched.physics.fusedBody)return;j=b.object}else return b.object.dataPatched.physics.fusedBody===!0&&b.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(b instanceof Vr)j=b.object;else{if(b instanceof uu||b instanceof iu)return;if(j=b,((wt=j.dataPatched.cloner)==null?void 0:wt.disabled)===!1&&((Ct=j.dataPatched.cloner)==null?void 0:Ct.hideBase)&&((At=j.dataPatched.physics)==null?void 0:At.fusedBody)!==!0)return!0}let $=j.dataPatched,rt;for(let kt of $.events)kt.data.disabled!==!0&&kt.data.type==="GameControl"&&(rt=kt.data);if(!$.physics||($.physics.enabled==="visibility"?!$.visible:!$.physics.enabled))return!0;b.updateMatrixWorldSVD();let _e=Ig($),st=!1,ut=j.userData.hasDestroy,gt=j.userData.hasDrag,yt=!1;for(let kt of $.events)if(kt.data.disabled!==!0){if(kt.data.type==="Collision"){st=!0;let It=new kb(kt.id,kt.data,j,this.page,this.sharedAssets,this.eventManager);It.disabled=!0,this.collisionEvents.push(It),this.sharedGameControlGlobals.entityToCollisionEvents[j.uuid]&&this.sharedGameControlGlobals.entityToCollisionEvents[j.uuid].every(Lt=>Lt.id!==kt.id)?this.sharedGameControlGlobals.entityToCollisionEvents[j.uuid].push(It):this.sharedGameControlGlobals.entityToCollisionEvents[j.uuid]=[It]}else if(kt.data.type==="Follow"){yt=!0;let It=kt.data.target;b.traverseVisible(Lt=>{Lt.userData.isFollowingObj=It})}}$.physics.rigidBody==="dynamic"&&$.physics.fusedBody===!1&&(b.matrixWorldFusedFalse=b.matrixWorld.clone());let Pt=b.geometry;if(rt!==void 0){let kt=jt.RigidBodyDesc.kinematicPositionBased();(b.hasNonUniformScale?b.matrixWorldRigid:b.matrixWorld).decompose(_i,vo,hc),b.position0=_i.clone().divideScalar(this.pixelsPerMeter),b.rotation0=vo.clone(),_i.divideScalar(this.pixelsPerMeter),kt.setTranslation(_i.x,_i.y,_i.z).setRotation(vo);let It=this.sharedGameControlGlobals.rapierWorld.createRigidBody(kt);b.rigidBody=It;let Lt;rt.collider.type==="sphere"?Lt=jt.ColliderDesc.ball(rt.collider.radius/this.pixelsPerMeter):rt.collider.type==="capsule"?Lt=jt.ColliderDesc.capsule((rt.collider.height/2-rt.collider.radius)/this.pixelsPerMeter,rt.collider.radius/this.pixelsPerMeter):Lt=jt.ColliderDesc.cuboid(rt.collider.width/this.pixelsPerMeter/2,rt.collider.height/this.pixelsPerMeter/2,rt.collider.depth/this.pixelsPerMeter/2),Lt.setFrictionCombineRule(jt.CoefficientCombineRule.Average).setRestitutionCombineRule(jt.CoefficientCombineRule.Average).setDensity($.physics.density).setFriction($.physics.friction).setRestitution($.physics.restitution);let Ft=this.sharedGameControlGlobals.rapierWorld.createCollider(Lt,It);this.sharedGameControlGlobals.colliderToEntity.set(Ft.handle,j),_i.fromArray(rt.collider.position).multiply(hc.setFromMatrixScale(j.matrixWorld)).divideScalar(this.pixelsPerMeter),Ft.setTranslationWrtParent(_i);let Nt=new Qe().setFromEuler(new or$1().setFromVector3(new _().fromArray(rt.collider.rotation)));Ft.setRotationWrtParent(Nt),Ft.setActiveEvents(jt.ActiveEvents.COLLISION_EVENTS),this.generateSensorColliderDescs(j,!0)}else $.physics.rigidBody==="dynamic"||_e||yt||ut||gt||st?(this.addRigidBody(b,j,{hasFollow:yt,hasTransformAnim:_e,hasDrag:gt}),this.generateSensorColliderDescs(j,$.physics.fusedBody)):(Pt&&e.push(go(Pt,b.matrixWorld)),$.physics.fusedBody&&b.traverseObject((kt,It)=>{var Ht;if(It===0)return;let Lt;if(kt instanceof Ji)if(kt.objectForSample){if(kt.objectForSample.dataPatched.physics.fusedBody)return;Lt=kt.object}else return kt.object.dataPatched.physics.fusedBody===!0&&kt.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(kt instanceof Vr)Lt=kt.object;else if(Lt=kt,(Ht=Lt.dataPatched.cloner)==null?void 0:Ht.hideBase)return!0;let Ft=Lt.dataPatched;if(Ft.physics.enabled==="visibility"?!Ft.visible:!Ft.physics.enabled)return!0;let Nt=kt.geometry;(Nt==null?void 0:Nt.getAttribute("position"))!==void 0&&e.push(go(Nt,kt.matrixWorld))}),this.generateSensorColliderDescs(j,$.physics.fusedBody,a));if(((Tt=$.physics)==null?void 0:Tt.fusedBody)===!0||rt)return!0}),e.length===0)return;let i=Js(e);i.scale(1/this.pixelsPerMeter,1/this.pixelsPerMeter,1/this.pixelsPerMeter);let o=jt.RigidBodyDesc.fixed(),c=this.sharedGameControlGlobals.rapierWorld.createRigidBody(o),d=jt.ColliderDesc.trimesh(i.getAttribute("position").array,i.getIndex().array).setFrictionCombineRule(jt.CoefficientCombineRule.Multiply).setRestitutionCombineRule(jt.CoefficientCombineRule.Multiply).setFriction(1).setRestitution(1);this.sharedGameControlGlobals.rapierWorld.createCollider(d,c);for(let[b,j]of a){let $=this.sharedGameControlGlobals.rapierWorld.createCollider(b,c);this.sensorToTriggerEvent[$.handle]=j}}updatePositions(){return this.nActiveRigidBodies=0,this.sharedGameControlGlobals.rapierWorld.forEachRigidBody(this.processRigidBody),this.nActiveRigidBodies>0}rebuildBVH(){this.usePhysics?this.initPhysics():(this.page.traverseEntity(e=>{for(let a of e.dataPatched.events)if(a.data.type==="Trigger"&&a.data.disabled!==!0){let i=new Rg(a.id,a.data,e,this.page,this.sharedAssets,this.eventManager),o=new ce$1().compose(xo.fromArray(a.data.position),np.setFromEuler(VN.fromArray(a.data.rotation)),nT);if(a.data.triggerZone==="box"){let c=new Wt;c.min.fromArray(a.data.size).multiplyScalar(-.5),c.max.fromArray(a.data.size).multiplyScalar(.5),this.sharedGameControlGlobals.triggers.push([c,o,e,i])}else this.sharedGameControlGlobals.triggers.push([a.data.radius,o,e,i])}}),this.needsCollisionDetection&&this.initBVH())}disconnectEvents(){this.collisionEvents.forEach(e=>e.disconnect()),this.sharedGameControlGlobals.triggers.forEach(e=>e[3].disconnect()),this.sharedGameControlGlobals.triggers.length=0}deactivate(){var e,a,i,o;if(this.isEnabled){this.isEnabled=!1,this.page.traverse(c=>{let d=c;d.matrixWorldFusedFalse&&(d.matrixWorldFusedFalse=void 0),d.rigidBody&&(d.rigidBody=void 0),d.position0&&(d.position0=void 0),d.rotation0&&(d.rotation0=void 0)}),(e=this.sharedGameControlGlobals.rapierWorld)==null||e.free(),this.sharedGameControlGlobals.rapierWorld=void 0,this.sharedGameControlGlobals.staticMeshBVH=void 0,this.accumulator=0,this.sharedGameControlGlobals.entitiesWithTransformAnim=[],this.disconnectEvents(),(a=this.gameControl)==null||a.reset(),(i=this.gameControl)==null||i.dispose(),this.gameControl=null,this.initializationCounter=-1,this.joysticks.forEach(([c,d])=>{c==null||c.destroy(),d.remove()}),this.joystickToGameControls=[],this.joysticks=[],this.orbitControls&&(this.orbitControls.dispose(),this.orbitControls=void 0),(o=this.navigationMeshWrapper)==null||o.dispose(),this.navigationMeshWrapper=void 0;for(let c of Object.values(this.sharedGameControlGlobals.entityToCollisionEvents))c.forEach(d=>d.disconnect());this.sharedGameControlGlobals.entityToCollisionEvents={},this.page.updateMatrixWorld(!0)}}update(e,a,i){if(!this.isEnabled)return!0;let o=!0;if(this.orbitControls!==void 0&&this.orbitControls.needsUpdate&&(o=!this.orbitControls.update()),this.initializationCounter>=0&&this.initializationCounter<2?(this.initializationCounter++,o=!1):this.initializationCounter===2&&this.gameControl&&(o=!this.gameControl.update(e,a,i)&&o),this.usePhysics===!1&&this.checkTrigger(),this.usePhysics){let c=.016666666666666666;if(e===0)o=this.stepPhysics()&&o;else{let d=e/1e3;d<c&&d>c*.55&&(d=c),this.accumulator+=d;let g=performance.now(),b=0,j=6;for(;this.accumulator>=c&&b<j&&(o=this.stepPhysics()&&o,this.accumulator-=c,b++,!(performance.now()-g>c*1e3)););this.accumulator=this.accumulator%c}}return o}stepPhysics(){var e;for(let a of this.sharedGameControlGlobals.entitiesWithTransformAnim){(a.hasNonUniformScale?a.matrixWorldRigid:a.matrixWorld).decompose(_i,vo,hc),rT.setFromQuaternion(vo);let i=a;i.prevR===void 0?(i.prevR=rT.clone(),i.prevT=_i.clone()):(i.prevR.copy(rT),i.prevT.copy(_i)),a.rigidBody&&(a.rigidBody.setNextKinematicTranslation(_i.divideScalar(this.pixelsPerMeter)),a.rigidBody.setNextKinematicRotation(vo))}return this.sharedGameControlGlobals.rapierWorld.step(this.events),(e=this.events)==null||e.drainCollisionEvents(this.handleCollisionEvents),!this.updatePositions()}dispatchCollisionEvent(e,a,i){var d;let o=((d=this.sharedGameControlGlobals.rapierWorld)==null?void 0:d.getCollider(i))._parent,c;if(a.cloner){for(let g of a.cloner.children)if(g.rigidBody===o){c=g;break}}e.dispatch(c),a.dispatchEvent(_b)}updateUseWindowEvents(e){var a;(a=this.orbitControls)==null||a.updateUseWindowEvents(e)}generateSensorColliderDescs(e,a,i){let o=zN.copy(e.matrixWorld).invert();e.traverseEntity((c,d)=>{if(a===!1&&d===1)return!0;for(let g of c.dataPatched.events)if(g.data.type==="Trigger"&&g.data.disabled!==!0){let b=new Rg(g.id,g.data,c,this.page,this.sharedAssets,this.eventManager),j;if(g.data.triggerZone==="box"?j=jt.ColliderDesc.cuboid(...g.data.size.map($=>$/(2*this.pixelsPerMeter))):j=jt.ColliderDesc.ball(g.data.radius/this.pixelsPerMeter),j.setDensity(0).setSensor(!0).setActiveEvents(jt.ActiveEvents.COLLISION_EVENTS),xo.fromArray(g.data.position),np.setFromEuler(VN.fromArray(g.data.rotation)),jb.compose(xo,np,nT).premultiply(c.matrixWorld),i?(jb.decompose(xo,np,iT),j.setActiveCollisionTypes(jt.ActiveCollisionTypes.KINEMATIC_FIXED|jt.ActiveCollisionTypes.DYNAMIC_FIXED)):(jb.premultiply(o).decompose(xo,np,iT),e.rigidBody.bodyType()===jt.RigidBodyType.Dynamic||(e.rigidBody.bodyType()===jt.RigidBodyType.Fixed?j.setActiveCollisionTypes(jt.ActiveCollisionTypes.KINEMATIC_FIXED|jt.ActiveCollisionTypes.DYNAMIC_FIXED):j.setActiveCollisionTypes(jt.ActiveCollisionTypes.KINEMATIC_KINEMATIC|jt.ActiveCollisionTypes.DYNAMIC_KINEMATIC))),xo.divideScalar(this.pixelsPerMeter),j.setTranslation(xo.x,xo.y,xo.z),j.setRotation(np),i)i.push([j,b]);else{let $=this.sharedGameControlGlobals.rapierWorld.createCollider(j,e.rigidBody);this.sensorToTriggerEvent[$.handle]=b}}})}checkTrigger(){let e;for(let a=0;a<this.sharedGameControlGlobals.triggers.length;a++){let[i,o,c,d]=this.sharedGameControlGlobals.triggers[a];for(let g=0;g<this.sharedGameControlGlobals.entitiesWithTransformAnim.length;g++){let b=this.sharedGameControlGlobals.entitiesWithTransformAnim[g];if(c===b||d.isValidTriggeringObject(vt.is(b)?b:b.object)===!1)continue;let j=zN.copy(c.matrixWorld).decompose(xo,UN,iT).compose(xo,UN,nT).multiply(o),$=jb.copy(b.matrixWorld).invert().multiply(j);i instanceof Wt?e=b.bvhGeometry.boundsTree.intersectsBox(i,$):(sT.radius=i,sT.center.setFromMatrixPosition($),e=b.bvhGeometry.boundsTree.intersectsSphere(sT)),e?d.currentIntersectedObjects.indexOf(b)===-1&&(d.currentIntersectedObjects.push(b),d.dispatch(),c.dispatchEvent(BJ)):d.currentIntersectedObjects=d.currentIntersectedObjects.filter(rt=>rt!==b)}}}};function jN(e){let a=this._clip.duration,i=this._clip.start??0,o=this.loop,c=this.time+e,d=this._loopCount,g=o===kp;if(e===0)return d===-1?c:g&&(d&1)===1?a-(c-i):c;if(o===_w){d===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(c>=a)c=a;else if(c<0)c=0;else{this.time=c;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=c,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(d===-1&&(e>=0?(d=0,this._setEndings(!0,this.repetitions===0,g)):this._setEndings(this.repetitions===0,!0,g)),c>=a||c<i){let b=Math.floor((c-i)/(a-i));c-=(a-i)*b,d+=Math.abs(b);let j=this.repetitions-d;if(j<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,g||(c=e>0?a:i,this.repetitions===1&&(c=a)),this.time=c,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(j===1){let $=e<0;this._setEndings($,!$,g)}else this._setEndings(!1,!1,g);this._loopCount=d,this.time=c,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:b})}}else this.time=c;if(g&&(d&1)===1)return a-(c-i)}return c}var HN=!1,Wb=class{constructor(e,a,i,o){this.scene=e,this.requestRender=a,this.updateDisplayProgress=i,this.animationInspectorState=o,this.clipIdToAction={},this.activeClip=null,this.needsUpdate=!1,this.addClip=c=>{c.data.type==="Empty"&&c.data.animations&&c.data.animations.forEach((d,g)=>{let b=d[0]+"/";if(Array.isArray(c.identity)?b+=c.identity[0]:b+=c.uuid,this.clipIdToAction[b])return;let j=nh.parse(JSON.parse(d[2]));c.animations[g]=j;let $=this.mixer.clipAction(j,c);HN===!1&&(Object.getPrototypeOf($)._updateTime=jN,HN=!0),$.clampWhenFinished=!0,this.clipIdToAction[b]=$})},this.mixer=new Fy(e),this.scene.traverseEntity(this.addClip)}deleteClip(e,a){let i=this.scene.find(a);if(!i)return;let o=i.animations.find(d=>d.uuid===e);if(!o)return;let c=this.clipIdToAction[e];!c||(c.stop(),this.mixer.uncacheClip(o),delete this.clipIdToAction[e],i.animations=i.animations.filter(d=>d.uuid!==e))}get isPlaying(){return Object.values(this.clipIdToAction).some(e=>e.isRunning())}playFromInspector(e){this.mixer.stopAllAction();let a=this.clipIdToAction[e];!a||(a.play(),this.activeClip=a.getClip(),this.requestRender())}onExitPlayMode(){Object.values(this.clipIdToAction).forEach(e=>{e.repetitions=1/0,e.loop=Ew}),this.mixer.stopAllAction(),this.requestRender()}play(e){let a=e.clipId+"/"+e.object,i=this.clipIdToAction[a];if(i)return e&&(e.repeat>=0&&(i.repetitions=e.repeat+1),e.direction==="pingpong"&&e.repeat!==0&&(i.loop=kp)),i.play(),i.paused=!1,this.requestRender(),i}resumeFromInspector(e){let a=this.clipIdToAction[e];!a||(a.play(),a.paused=!1,this.requestRender())}pauseFromInspector(e){let a=this.clipIdToAction[e];!a||(a.paused=!0)}stop(){this.mixer.stopAllAction(),this.requestRender()}update(e){var a;if(this.needsUpdate)this.needsUpdate=!1;else if(this.isPlaying===!1||(a=this.animationInspectorState)!=null&&a.isScrubbing)return;this.mixer.update(e/1e3),this.activeClip&&this.updateDisplayProgress(Math.round(this.mixer.time/this.activeClip.duration*this.maxFrames%this.maxFrames)),this.requestRender()}get maxFrames(){var e,a;return((a=(e=this.activeClip)==null?void 0:e.tracks[0])==null?void 0:a.times.length)??0}setProgressFromInspector(e,a){if(!this.clipIdToAction[a])return;this.activeClip!==this.clipIdToAction[a].getClip()&&this.playFromInspector(a);let i=this.clipIdToAction[a].paused;this.clipIdToAction[a].paused=!1,this.mixer.setTime(Math.min(this.maxFrames?e/this.maxFrames:0,.9999)*this.activeClip.duration),this.requestRender(),i&&(this.clipIdToAction[a].paused=!0)}},oT=new WeakMap,qb=class extends ml{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,a,i,o){let c=new sh(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,d=>{this.decodeDracoFile(d,a).catch(o)},i,o)}decodeDracoFile(e,a,i,o){let c={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:o||this.defaultAttributeTypes,useUniqueIDs:!!i};return this.decodeGeometry(e,c).then(a)}decodeGeometry(e,a){let i=JSON.stringify(a);if(oT.has(e)){let b=oT.get(e);if(b.key===i)return b.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let o,c=this.workerNextTaskID++,d=e.byteLength,g=this._getWorker(c,d).then(b=>(o=b,new Promise((j,$)=>{o._callbacks[c]={resolve:j,reject:$},o.postMessage({type:"decode",id:c,taskConfig:a,buffer:e},[e])}))).then(b=>this._createGeometry(b.geometry));return g.catch(()=>!0).then(()=>{o&&c&&this._releaseTask(o,c)}),oT.set(e,{key:i,promise:g}),g}_createGeometry(e){let a=new Pe;e.index&&a.setIndex(new Xe(e.index.array,1));for(let i=0;i<e.attributes.length;i++){let o=e.attributes[i],c=o.name,d=o.array,g=o.itemSize;a.setAttribute(c,new Xe(d,g))}return a}_loadLibrary(e,a){let i=new sh(this.manager);return i.setPath(this.decoderPath),i.setResponseType(a),i.setWithCredentials(this.withCredentials),new Promise((o,c)=>{i.load(e,o,void 0,c)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;let e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",a=[];return e?a.push(this._loadLibrary("draco_decoder.js","text")):(a.push(this._loadLibrary("draco_wasm_wrapper.js","text")),a.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(a).then(i=>{let o=i[0];e||(this.decoderConfig.wasmBinary=i[1]);let c=NJ.toString(),d=["/* draco decoder */",o,"","/* worker */",c.substring(c.indexOf("{")+1,c.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([d]))}),this.decoderPending}_getWorker(e,a){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){let o=new Worker(this.workerSourceURL);o._callbacks={},o._taskCosts={},o._taskLoad=0,o.postMessage({type:"init",decoderConfig:this.decoderConfig}),o.onmessage=function(c){let d=c.data;switch(d.type){case"decode":o._callbacks[d.id].resolve(d);break;case"error":o._callbacks[d.id].reject(d);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+d.type+'"')}},this.workerPool.push(o)}else this.workerPool.sort(function(o,c){return o._taskLoad>c._taskLoad?-1:1});let i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=a,i._taskLoad+=a,i})}_releaseTask(e,a){e._taskLoad-=e._taskCosts[a],delete e._callbacks[a],delete e._taskCosts[a]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}};function NJ(){let e,a;onmessage=function(g){let b=g.data;switch(b.type){case"init":e=b.decoderConfig,a=new Promise(function(rt){e.onModuleLoaded=function(_e){rt({draco:_e})},DracoDecoderModule(e)});break;case"decode":let j=b.buffer,$=b.taskConfig;a.then(rt=>{let _e=rt.draco,st=new _e.Decoder,ut=new _e.DecoderBuffer;ut.Init(new Int8Array(j),j.byteLength);try{let gt=i(_e,st,ut,$),yt=gt.attributes.map(Pt=>Pt.array.buffer);gt.index&&yt.push(gt.index.array.buffer),self.postMessage({type:"decode",id:b.id,geometry:gt},yt)}catch(gt){console.error(gt),self.postMessage({type:"error",id:b.id,error:gt.message})}finally{_e.destroy(ut),_e.destroy(st)}});break}};function i(g,b,j,$){let rt=$.attributeIDs,_e=$.attributeTypes,st,ut,gt=b.GetEncodedGeometryType(j);if(gt===g.TRIANGULAR_MESH)st=new g.Mesh,ut=b.DecodeBufferToMesh(j,st);else if(gt===g.POINT_CLOUD)st=new g.PointCloud,ut=b.DecodeBufferToPointCloud(j,st);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!ut.ok()||st.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+ut.error_msg());let yt={index:null,attributes:[]};for(let Pt in rt){let wt=self[_e[Pt]],Ct,At;if($.useUniqueIDs)At=rt[Pt],Ct=b.GetAttributeByUniqueId(st,At);else{if(At=b.GetAttributeId(st,g[rt[Pt]]),At===-1)continue;Ct=b.GetAttribute(st,At)}yt.attributes.push(c(g,b,st,Pt,wt,Ct))}return gt===g.TRIANGULAR_MESH&&(yt.index=o(g,b,st)),g.destroy(st),yt}function o(g,b,j){let $=j.num_faces()*3,rt=$*4,_e=g._malloc(rt);b.GetTrianglesUInt32Array(j,rt,_e);let st=new Uint32Array(g.HEAPF32.buffer,_e,$).slice();return g._free(_e),{array:st,itemSize:1}}function c(g,b,j,$,rt,_e){let st=_e.num_components(),ut=j.num_points()*st,gt=ut*rt.BYTES_PER_ELEMENT,yt=d(g,rt),Pt=g._malloc(gt);b.GetAttributeDataArrayForAllPoints(j,_e,yt,gt,Pt);let wt=new rt(g.HEAPF32.buffer,Pt,ut).slice();return g._free(Pt),{name:$,array:wt,itemSize:st}}function d(g,b){switch(b){case Float32Array:return g.DT_FLOAT32;case Int8Array:return g.DT_INT8;case Int16Array:return g.DT_INT16;case Int32Array:return g.DT_INT32;case Uint8Array:return g.DT_UINT8;case Uint16Array:return g.DT_UINT16;case Uint32Array:return g.DT_UINT32}}}var dc;function FJ(){return dc||(dc=new qb,dc.setDecoderPath("https://www.gstatic.com/draco/versioned/decoders/1.5.2/").preload()),dc.decoderPending}async function kJ(e){if(dc){let a={attributeIDs:dc.defaultAttributeIDs,attributeTypes:dc.defaultAttributeTypes,useUniqueIDs:!1},i;try{i=await dc.decodeGeometry(new Int8Array(e).buffer,a)}catch(o){console.error(o)}if(i)return{index:i.index?{array:i.index.array}:void 0,attributes:Object.entries(i.attributes).map(([o,c])=>({name:o,itemSize:c.itemSize,array:c.array}))}}return null}async function WN(e,a){let[i,o]=n1(jv.deserialize(new Uint8Array(e)));u0(i);let c=[];i.scene.objects.traverse((d,g)=>{g.type==="Mesh"&&g.geometry.type==="NonParametricGeometry"&&g.geometry.data.draco!==void 0&&c.push(g)}),c.length&&await FJ();for(let d of c){let g=await kJ(kr$1(d.geometry.data.draco));if(g){g.index&&(d.geometry.data.index={array:g.index.array,itemSize:1,normalized:!1,type:"Uint32Array"});let b={};g.attributes.forEach(({name:j,array:$,itemSize:rt})=>{b[j]={array:$,itemSize:rt,type:"Float32Array",normalized:!1}}),d.geometry.data.attributes=b,d.geometry.data.draco=void 0}}return a&&a(i),o.result().data}var aT=class{constructor(e,a,i,o,c,d,g){this.id=e,this.data=a,this.dataEvent=i,this.object=o,this.stage=!1,this.actions=Mr$1(i,a.actions,c,d,g,o)}disconnect(){hr$1(this.actions)}dispatchIn(){this.actions.Audio.forEach(e=>e.dispatchBasic()),this.actions.Particles.forEach(e=>e.dispatchBasic()),this.actions.Video.forEach(e=>e.dispatchBasic()),this.actions.Create.forEach(e=>e.dispatch()),this.actions.Destroy.forEach(e=>e.dispatch()),this.actions.Reset.forEach(e=>e.dispatch()),this.actions.Link.forEach(e=>e.dispatch()),this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.actions.Transition.forEach(e=>e.toggle()),this.actions.Animation.forEach(e=>e.play()),this.actions.SwitchCamera.forEach(e=>e.play()),this.actions.SceneTransition.forEach(e=>e.dispatch()),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch())}dispatchOut(){this.actions.Transition.forEach(e=>{e.toggle()})}},Yb=class extends zr$1{constructor(e,a){super(e),this.eventManager=a,this.breakpoints=[],this.resize=(i,o)=>{this.breakpoints.forEach(c=>{let d=Yv.deviceToSize(c.data.size),g=c.dataEvent.orientation==="horizontal"?i:o,b;switch(c.data.operator){case"<":b=g<d[0];break;case">":b=g>d[0];break;case"<>":b=g>d[0]&&g<d[1];break}c.stage!==b&&(c.stage=b,c.stage?c.dispatchIn():c.dispatchOut())})},this.onResizeObserver=new ResizeObserver(i=>{for(let o of i){let{width:c,height:d}=o.contentRect;this.resize(c,d)}})}connect(){let{page:e,sharedAssets:a,domElement:i}=this.eventContext;this.onResizeObserver.observe(i);let o=c=>{var d;if(!(!c.visible||!((d=c.data)!=null&&d.events.length)))for(let{data:g}of c.data.events)g.disabled||g.type==="Resize"&&g.breakpoints.forEach(({data:b,id:j})=>{try{let $=new aT(j,b,g,c,e,a,this.eventManager);this.breakpoints.push($)}catch{}})};e.traverseEntity(c=>{var d;(c instanceof _r$1||c instanceof mr)&&((d=c.frame)==null||d.traverse(g=>{o(g)})),o(c)})}disconnect(){this.onResizeObserver.disconnect(),this.breakpoints.forEach(e=>{e.disconnect()}),this.breakpoints=[]}},Xb=class{constructor(e,a,i,o,c){this.publish=e,this.controlsManager=a,this.animationControls=i,this.eventContext=o,this.sharedVariables=c,this.isEnabled=!1,this.activateCount=0,this.needsMouse=!1,this.needsRaycast=!1,this.onTouchMovePreventScroll=d=>{(d.touches.length>1||this.preventTouchScroll)&&d.preventDefault()},this.onMouseWheelPreventScroll=d=>{this.preventScroll&&d.preventDefault()},this.onMouseMove=d=>{this.eventContext.sharedAssets.mouseProperty={...this.getMousePosition(d),pressed:d.buttons>0}},this.onMouseDown=d=>{this.eventContext.sharedAssets.mouseProperty={...this.getMousePosition(d),pressed:!0}},this.onMouseUp=d=>{this.eventContext.sharedAssets.mouseProperty={...this.getMousePosition(d),pressed:!1}},this.getMousePosition=d=>{var $;let{domRect:g}=this.eventContext,{pageX:b,pageY:j}=(($=d.touches)==null?void 0:$.length)>0?d.touches[0]:d;return{x:b-(g.left+window.scrollX),y:j-(g.top+window.scrollY)}},this.stopRaycast=e.stopRaycast,this.preventScroll=e.preventScroll,this.preventTouchScroll=e.preventTouchScroll,this.hideCursor=e.hideCursor,this.requestRender=o.requestRender}activate(){if(this.isEnabled)return;this.isEnabled=!0,this.initializeActionsDependentStates(),this.needsMouse&&(this.eventContext.domElement.addEventListener("pointermove",this.onMouseMove),this.eventContext.domElement.addEventListener("pointerdown",this.onMouseDown)),this.handlers={Spline:new Mb(this.eventContext),DynamicVariable:new Vb(this.eventContext,this.sharedVariables,this,this.needsMouse,this.needsRaycast),Conditional:new Db(this.eventContext,this),Start:new Fb(this.eventContext,this),Basic:new Cb(this.eventContext,this,this.needsRaycast),MouseHover:new Bb(this.eventContext,this),Scroll:new Nb(this.eventContext,this),Follow:new Ib(this.eventContext,this),DragDrop:new Ob(this.eventContext,this),LookAt:new Lb(this.eventContext),Resize:new Yb(this.eventContext,this)};let{page:e,domElement:a}=this.eventContext;this.hideCursor&&(a.style.cursor="none"),e.traverseEntity(i=>{i.addEventListener("requestRender",this.requestRender)}),Object.values(this.handlers).forEach(i=>i.connect()),a.addEventListener("wheel",this.onMouseWheelPreventScroll),a.addEventListener("touchmove",this.onTouchMovePreventScroll),this.activateCount++}deactivate(){var i;if(!this.isEnabled)return;this.isEnabled=!1,this.eventContext.domElement.removeEventListener("pointermove",this.onMouseMove),this.eventContext.domElement.removeEventListener("pointerdown",this.onMouseDown),this.eventContext.domElement.removeEventListener("pointerup",this.onMouseUp),this.eventContext.sharedAssets.mouseProperty=null,this.eventContext.sharedAssets.raycastProperty=null;let{page:e,domElement:a}=this.eventContext;a.style.cursor="",Object.values(this.handlers).forEach(o=>o.disconnect()),(i=this.controlsManager.gameControl)==null||i.disposeActions(),this.controlsManager.disconnectEvents(),e.traverseEntity(o=>{o.removeEventListener("requestRender",this.requestRender),o.destroyedInAction=!1}),a.removeEventListener("touchmove",this.onTouchMovePreventScroll),a.removeEventListener("wheel",this.onMouseWheelPreventScroll),this.animationControls.onExitPlayMode()}get isPaused(){return this.isEnabled}pause(){this.deactivate()}resume(){this.activate()}reset(){this.deactivate(),this.activate(),this.controlsManager.page.updateMatrixWorld(!0),this.controlsManager.rebuildBVH()}updateUseWindowEvents(e){let a=this.isEnabled;a&&this.deactivate(),this.eventContext.useWindowEvents=e,a&&this.activate()}initializeActionsDependentStates(){let e=this.eventContext.sharedAssets;e.resetDynamicVariablePlayState();let a=i=>{if(i.data.type==="Conditional"&&(i.data.ifActions.forEach(a),i.data.elseActions.forEach(a)),i.data.type==="Conditional"||i.data.type==="SetVariable")for(let o of i.data.type==="Conditional"?i.data.condition:i.data.expression)"id"in o&&Array.isArray(o.id)&&(o.id[0]==="mouse"&&(this.needsMouse=!0),o.id[0]==="raycast"&&(this.needsRaycast=!0));i.data.type==="DynamicVariablePlay"&&i.data.variableId!==""&&(i.data.mode==="Play"||i.data.mode==="PlayPause"||i.data.mode==="Toggle")&&e.setDynamicVariablePlayState(i.data.variableId,"Stopped")};this.eventContext.page.traverseEntity(i=>{var o;if((o=i.data)!=null&&o.events.length){for(let c of i.data.events)if(!c.data.disabled)if(c.data.type==="VariableChange"&&(c.data.variableId==="mouseProperty"&&(this.needsMouse=!0),c.data.variableId==="raycastProperty"&&(this.needsRaycast=!0)),c.data.type==="Conditional")for(let d of["inActions","outActions"])c.data[d].forEach(a);else if(c.data.type==="DragDrop")for(let d of["drag","drop"])c.data.dragDropActions[d].forEach(a);else if(c.data.type==="GameControl")for(let d of["idle","move","jump","run"])c.data.gameActions[d].forEach(a);else if(c.data.type==="Resize")for(let d of c.data.breakpoints)d.data.actions.forEach(a);else c.data.type==="LookAt"||c.data.actions.forEach(a)}})}},Qb=class{constructor(e,a,i,o,c){this._aspect=1,this.enableResponsive=!1,this._renderer=e,this._camera=a,this._frameSize=new z$2().copy(i),this._editorSize=new z$2().copy(o),this._aspect=a.aspect,this._fov=c??a.fov}set frameSize(e){this._frameSize.copy(e)}updateRenderer(){!this._renderer||this._renderer.setSize(this._frameSize.x,this._frameSize.y)}updateViewport(){if(!this._renderer||!this._camera||this._camera.cameraType!=="PerspectiveCamera")return;let e=this._frameSize.x,a=this._frameSize.y,i=this._editorSize.y;this._aspect=e/a,a<=i&&(this._camera.zoom*=i/a),this._renderer.setViewport(0,0,e,a)}updateCamera(e=!0){if(this._camera)if(this._camera.cameraType==="PerspectiveCamera"){let a=this._frameSize.y,i=this._editorSize.y,o=this._fov;if(e&&a>i){let c=VJ(a,1080,2160,1,15)/100;o*=a/i,o*=1-c}this._camera.aspect=this._aspect,this._camera.fov=o,this._camera.updateProjectionMatrix()}else this._camera.setViewplaneSize(this._frameSize.x,this._frameSize.y,this.enableResponsive)}setCamera(e){this._camera=e,this._aspect=e.aspect,this._fov=e.fov}revert(){let e=window.innerWidth,a=window.innerHeight;this._renderer&&(this._renderer.setViewport(0,0,e,a),this._renderer.setSize(e,a)),this._camera&&(this._camera.aspect=e/a,this._camera.fov=this._fov,this._camera.setViewplaneSize(e,a,this.enableResponsive),this._camera.updateProjectionMatrix())}};function VJ(e,a,i,o,c){return(e-a)/(i-a)*(c-o)+o}var Kb=class{get sharedAssets(){return this.shared}constructor(e,a={}){this.shared=new eu(e.shared,a),this.scene=new $l(e.scene,this.sharedAssets),this.shared.setEntityOpContext({scene:this.scene,shared:this.shared})}reset(e,a){this.scene.clearScene(),this.sharedAssets.reset(e.shared),this.scene.resetAfterClear(e.scene,this.sharedAssets)}resetPersonalCameraFromDocumentData(){for(let e of this.scene.children)e instanceof mr&&!e.uiScene&&e.personalCamera.updateState(e.data.camera,{scene:this.scene,shared:this.shared})}dispose(){this.scene.dispose(),this.shared.dispose()}gc(){this.shared.geometryCache.startGc(),this.shared.geometryCache2.startGc(),this.scene.traverseEntity(e=>{e instanceof ur&&e.markGeometryAsReachable(this.shared)}),this.shared.geometryCache.endGc(),this.shared.geometryCache2.endGc()}},Zb=class{constructor({x:e=10,y:a=10}){this._startTime=0;let i=document.getElementById("spe-perfs");i?this.element=i:(this.element=document.createElement("div"),document.body.appendChild(this.element),this.element.style.position="absolute",this.element.style.zIndex="10000",this.element.style.fontFamily="monospace",this.element.style.background="black",this.element.style.color="white",this.element.style.padding="10px",this.element.style.opacity="0.5",this.element.style.fontSize="11px",this.element.setAttribute("id","spe-perfs")),this.element.style.left=`${e}px`,this.element.style.top=`${a}px`}dispose(){var e;(e=this.element.parentElement)==null||e.removeChild(this.element)}start(){this._startTime=performance.now()}end(){let e=performance.now()-this._startTime;this.element.innerHTML=e.toFixed(3)+" ms"}};function zJ(e){let a;if(e.index)for(let i=0;i<e.index.array.length;i+=3)a=e.index.array[i],e.index.array[i]=e.index.array[i+2],e.index.array[i+2]=a}function Lg(e){return e instanceof ao?"SubdivObject":e.geometry.type==="NonParametricGeometry"?"NonParametric":"Mesh"}function UJ(e,a){let i={};return e.traverseEntity(o=>{var j;if(!o.visible||!(o instanceof pr)||o.type!=="Mesh"||Array.isArray(o.material)||o.states&&Object.keys(o.states).length)return;let c=o.parent;for(;c;){if(c instanceof pr&&o.states&&Object.keys(o.states).length)return;c=c.parent}let d=o.material.uuid,g=a.shared.materials[d];if(g){if(!oi.isMergable(g))return}else{let $=(j=a.scene.objects.get(o.uuid))==null?void 0:j.data;if($&&"material"in $&&typeof $.material!="string"){if(!oi.isMergable($.material))return;d=oi.getHash($.material)}}i[d]||(i[d]={});let b=i[d][Lg(o)];if(b){if(b.push(o),o.cloner)for(let $ of o.cloner.children)b.push($)}else if(i[d][Lg(o)]=[o],o.cloner)for(let $ of o.cloner.children)i[d][Lg(o)].push($)}),i}function GJ(e){let a=0;return Object.values(e).forEach(i=>{Object.values(i).forEach(o=>{let c=o.length;c>a&&(a=c)})}),a}function qN(e,a){let i=UJ(a,e),o=GJ(i),c=new Array(o),d=0,g=new Array(o),b=0,j=new Array(o),$=0,rt=new Array(o),_e=0;for(let[st,ut]of Object.entries(i))for(let gt of Object.values(ut)){if(b=0,$=0,gt.forEach(Pt=>{Pt instanceof pr&&(g[b++]=Pt.geometry.clone(),j[$++]=Pt)}),$<2)continue;for(let Pt=0;Pt<$;Pt++)j[Pt].updateWorldMatrix(!0,!1),g[Pt].applyMatrix4(j[Pt].matrixWorld),j[Pt].matrixWorld.determinant()<0&&zJ(g[Pt]);let yt=Js(g.slice(0,b),!1);if(yt){let Pt;switch(st){case"SubdivObject":{console.warn("Turning subdiv object into mesh"),Pt=new sr(yt,j[0].material);break}default:{Pt=new sr(yt,j[0].material);break}}Pt.castShadow=j[0].castShadow,Pt.receiveShadow=j[0].receiveShadow,a.add(Pt);let wt=Ct=>{_e=0;for(let At of Ct)At.children&&wt(At.children),At instanceof pr&&(Array.isArray(At.material)||i[At.material.uuid]&&i[At.material.uuid][Lg(At)]&&i[At.material.uuid][Lg(At)].length>1||(rt[_e++]=At));for(let At=0;At<_e;At++)a.attach(rt[At])};for(let Ct=0;Ct<$;Ct++){let At=j[Ct];wt(At.children),c[d++]=At}}}for(let st=0;st<d;st++)c[st].removeFromParent()}var KN=pi(XN(),1),HJ=new z$2;function WJ(e){let a="The Spline Runtime only accepts .splinecode files that are generated from Spline export panel.";e.endsWith(".spline")?console.warn(a+" The .spline files are only meant to be used by the Editor."):e.endsWith(".splinecode")||console.warn(a)}var QN=class{constructor(e,{renderOnDemand:a,renderMode:i="auto"}={}){this._viewportMode=1,this._viewportWidth=window.innerWidth,this._viewportHeight=window.innerHeight,this._proxyObjectCache=new Map,this._variablesCache=new Map,this._isPaused=!1,this._renderRequested=!1,this._skipRender=!1,this.time=performance.now(),this.dt=0,this.currentTAAFrame=0,this.disposed=!1,this._requestRenderAutoMode=()=>{this._skipRender=!1},this.requestRender=()=>{this._renderRequested=!0},this.render=o=>{var c,d,g,b,j,$,rt,_e,st,ut,gt,yt,Pt;if(this.time=o,this._lastTime&&(this.dt=this.time-this._lastTime),this._lastTime=this.time,(c=this._perfs)==null||c.start(),!this._renderer){(d=this._perfs)==null||d.end();return}if(!this._isPaused&&(this.renderMode==="manual"&&!this._renderRequested||this.renderMode==="auto"&&this._skipRender)){(g=this._perfs)==null||g.end();return}if(this._renderRequested=!1,this._skipRender=!0,this._controls&&(this._skipRender=this._controls.update(this.dt)),this._eventManager&&((b=this._eventManager.handlers)!=null&&b.Start.hasVideoAction||(j=this._eventManager.handlers)!=null&&j.Basic.hasVideoAction||($=this._eventManager.handlers)!=null&&$.Conditional.hasVideoAction)&&(this._skipRender=!1),(rt=this._animationControls)==null||rt.update(this.dt),this._skipRender?(this.currentTAAFrame++,this.currentTAAFrame<32?this._skipRender=!1:this.currentTAAFrame=0):this.currentTAAFrame=0,(_e=this._scene)==null||_e.traverseVisibleEntity(wt=>{wt.type==="ParticleSystem"&&(wt.update(this.dt),this._skipRender=!1)}),this._scene&&this._scene.activeCamera!==this._camera&&(this._camera=this._scene.activeCamera),(st=this._eventManager)!=null&&st.isEnabled&&(((ut=this._eventManager.handlers)==null?void 0:ut.Follow).onAnimationFrameDamping(),((gt=this._eventManager.handlers)==null?void 0:gt.LookAt).onAnimationFrameDamping(),((yt=this._eventManager.handlers)==null?void 0:yt.DragDrop).onAnimationFrameDamping()),this._scene&&this._camera){if(this._scene.pathConstraints.applyConstraints(this._scene),this._renderer.sceneTransitionTimeRemaining>0){this._renderer.sceneTransitionTimeRemaining-=this.dt;let wt=1-this._renderer.sceneTransitionTimeRemaining/this._renderer.sceneTransitionDuration;this._renderer.pipeline.sceneTransitionPass.uniforms.mixRatio.value=wt,this._skipRender=!1}else this._renderer.pipeline.sceneTransitionFromTexture=null;this._renderer.renderSplineScene(this._scene,this._camera)}this.canvas.dispatchEvent(this._renderedEvent),(Pt=this._perfs)==null||Pt.end()},this._resize=()=>{var o,c,d,g,b,j,$,rt,_e,st;if(this._renderer){if(this._viewportMode===1&&this._frameView&&(this._frameView.frameSize=HJ.set(this._viewportWidth,this._viewportHeight)),this._renderer.setSize(this._viewportWidth,this._viewportHeight,!1),this._camera=(o=this._scene)==null?void 0:o.activeCamera,($=this._scene)==null||$.updateViewPlaneSize(((d=(c=this._frameView)==null?void 0:c.frameSize)==null?void 0:d.x)??this._viewportWidth,((b=(g=this._frameView)==null?void 0:g.frameSize)==null?void 0:b.y)??this._viewportHeight,((j=this._frameView)==null?void 0:j.enableResponsive)??!1),this._camera){let ut=Object.values(((rt=this._data)==null?void 0:rt.frames)??{})[0].preset??"fullscreen";(_e=this._frameView)==null||_e.setCamera(this._camera),(st=this._frameView)==null||st.updateCamera(ut!=="fullscreen"),this._camera.cameraType==="PerspectiveCamera"&&(this._camera.aspect=this._viewportWidth/this._viewportHeight),this._camera.updateProjectionMatrix()}this.eventManager&&(this.eventManager.eventContext.domRect=this.canvas.getBoundingClientRect()),this._requestRenderAutoMode()}},this._debouncedResize=Lc(this._resize,10),this._onScroll=o=>{this.eventManager&&(this.eventManager.eventContext.domRect=this.canvas.getBoundingClientRect())},this.canvas=e,this.renderMode=a?"auto":i,this._renderedEvent=new CustomEvent("rendered",{bubbles:!0}),Object.defineProperty(this._renderedEvent,"target",{writable:!1,value:this}),window.location.search.includes("perfs")&&(this._perfs=new Zb({x:10,y:10})),j2(e)}async load(e,a,i){WJ(e),this.disposed=!1;let o=await(await fetch(e,i)).arrayBuffer();await this.start(o,{variables:a})}async start(e,{interactive:a=!0,variables:i}={}){var b,j,$,rt;if(this.disposed)return;let o=await WN(e);this._data=o,o.version&&(0,KN.default)(o.version,"1.0.26")>0&&console.warn("Your .splinecode file is more recent than the library. Please upgrade @splinetool/runtime to the latest version."),await Promise.all([I_(o)&&UI(),DR(o)&&LI(),Nl.physicsEnabled(o.scene.objects)&&K2(),__(o)&&_R(),H_(o)&&j3(),JE(o)&&Y2()].filter(Boolean)),(b=this._eventManager)==null||b.deactivate(),(j=this._controls)==null||j.deactivate(),($=this._scene)==null||$.dispose();let c=new Kb(o);if(c.resetPersonalCameraFromDocumentData(),this._scene=c.scene,this._sharedAssetsManager=c.sharedAssets,this._camera=this._scene.activeCamera,window.location.search.includes("merge-geometries")){let _e=performance.now();qN(o,c.scene);let st=performance.now();console.log("Merged geometries in ",st-_e," ms")}I_(o)&&this._scene.traverse(_e=>{Rn(_e)&&_e.recomputeBoolean()}),this._sharedAssetsManager.setRequestRender(()=>{var _e;this._requestRenderAutoMode(),(_e=this._scene)==null||_e.traverse(st=>{st instanceof Ji&&st.pendingMediaLoad&&st.update()})}),(rt=this._scene)==null||rt.traverse(_e=>{_e.type==="ParticleSystem"&&(_e.wakeUp(),_e.data.autoPlay?_e.start():_e.stop())});let d=Object.keys(o.shared.fonts).map(_e=>this._sharedAssetsManager.getFont(_e).loadingPromise);if(Promise.all(d).then(()=>{c.scene.markNeedsUpdateRendererDirty(),this._requestRenderAutoMode()}),__(o)&&GN(o)&&await Promise.all(d),H_(o)){let _e=[];this._scene.traverseEntity(st=>{st instanceof _r$1&&_e.push(st)}),await Promise.all(_e.map(st=>st.uiCanvas.promise))}this._scene.rewriteEventsBeforeGoToPlayMode(),Yf(this._scene.activePage,this._sharedAssetsManager),this._renderer||(this._renderer=new kx({canvas:this.canvas,antialias:!1,alpha:!0,stencil:!1,depth:!1,powerPreference:"high-performance"}),this._renderer.hdTransmission=o.scene.publish.hdTransmission===!0,this._renderer.setPixelRatio(window.devicePixelRatio),this._renderer.pipeline.enableUIOverlay(),this._renderer.pipeline.addEventListener("smaaloaded",this._requestRenderAutoMode)),this._scene.initializeSplatViewer(this._renderer),o.scene.blueNoiseTextureData!==void 0&&this._renderer.pipeline.updateBlueNoiseTexture(o.scene.blueNoiseTextureData);let g=Object.values(o.frames)[0];if(this._frameView?this._frameView.setCamera(this._camera):(g.preset==="fullscreen"?(this._viewportMode=1,this.canvas.style.display="block",this.canvas.parentElement&&(this._viewportWidth=this.canvas.parentElement.clientWidth||300,this.canvas.style.width="100%"),this.canvas.parentElement&&(this._viewportHeight=this.canvas.parentElement.clientHeight||150,this.canvas.style.height="100%")):(this._viewportMode=2,this._viewportWidth=g.size[0],this._viewportHeight=g.size[1],this.canvas.style.width=`${this._viewportWidth}px`,this.canvas.style.height=`${this._viewportHeight}px`),this._renderer.setSize(this._viewportWidth,this._viewportHeight,!1),this._frameView=new Qb(this._renderer,this._camera,new z$2(this._viewportWidth,this._viewportHeight),new z$2(window.innerWidth,window.innerHeight)),this._frameView.enableResponsive=(g.allowResponsive??!1)&&g.preset==="fullscreen"),a){let _e=new Tb(this._renderer,this.data.scene.publish,this._scene,()=>this._scene.activeCamera,this._sharedAssetsManager,this._requestRenderAutoMode,!0,g);this._scene.updateMatrixWorld(!0),this._controls=new Hb(_e),this._animationControls=new Wb(this._scene,this._requestRenderAutoMode),this._eventManager=new Xb(o.scene.publish,this._controls,this._animationControls,_e,o.shared.variables),this._eventManager.activate(),this._controls.activate(this._eventManager)}this._resize(),i!==void 0&&this.setVariables(i),this.dt===0&&(this.render(performance.now()),setTimeout(()=>{var _e;(_e=this._renderer)==null||_e.setAnimationLoop(this.render)},0)),this._resizeObserverTimeout=setTimeout(()=>{!this._resizeObserver&&this.canvas.parentElement&&(this._resizeObserver=new ResizeObserver(()=>{this._viewportWidth=this.canvas.clientWidth,this._viewportHeight=this.canvas.clientHeight,this._debouncedResize()}),this._resizeObserver.observe(this.canvas.parentElement))},300),document.addEventListener("scroll",this._onScroll)}setVariables(e){if(this._data!==void 0){let a=Object.entries(e);for(let[i,o]of a)this.setVariable(i,o)}}setVariable(e,a){var o;let i=this._getVariableByName(e);if(i&&!("dynamicVariableType"in i.data)){let c=a;typeof i.data.value=="number"?c=typeof a=="number"?a:typeof a=="boolean"?a===!0?1:0:parseFloat(a):typeof i.data.value=="boolean"?c=typeof a=="number"?!!a:typeof a=="boolean"?a:a.toLocaleLowerCase()==="false"?!1:!!a:typeof i.data.value!="string"&&i.data.value.textValue!==void 0&&(c=a.toString());let d=typeof c=="string"?{textValue:c}:c;(o=this._sharedAssetsManager)==null||o.updateVariable(i.id,d),this.requestRender(),this._requestRenderAutoMode()}else i===void 0?console.warn(`No variable named ${e} was found in your Spline file. Make sure to create it from Spline editor.`):"dynamicVariableType"in i.data&&console.warn(`Dynamic variables like ${e} cannot be updated from code.`)}getVariables(){let e={};return this._data&&this._data.shared.variables.forEach(a=>{e[a.data.name]===void 0&&(e[a.data.name]=this._getVariableValue(this._sharedAssetsManager.getVariable(a.id)))}),e}getVariable(e){let a=this._getVariableByName(e);if(a){let i=this._sharedAssetsManager.getVariable(a.id);return this._getVariableValue(i)}}_getVariableValue(e){return typeof e!="string"&&Yi.isTextValue(e)?Yi.getDisplayedValue(e):e}_getVariableByName(e){if(this._data){if(this._variablesCache.has(e))return this._variablesCache.get(e);let a=this._data.shared.variables.find(i=>i.data.name===e);return a&&this._variablesCache.set(e,a),a}}findObjectById(e){var i;let a=(i=this._scene)==null?void 0:i.getObjectByProperty("uuid",e);return this._createProxyObject(a)}findObjectByName(e){var i;let a=(i=this._scene)==null?void 0:i.getObjectByName(e);return this._createProxyObject(a)}getAllObjects(){var a;let e=[];return(a=this._scene)==null||a.traverseEntity(i=>{if(i.uuid!==As&&!this._scene.isInvisibleObjects(i)&&!(i instanceof mr)){let o=this._createProxyObject(i);o&&e.push(o)}}),e}getSplineEvents(){var e,a;return((a=(e=this._eventManager)==null?void 0:e.handlers)==null?void 0:a.Spline).splineEvents}emitEvent(e,a){var i;(i=this.findObjectById(a)||this.findObjectByName(a))==null||i.emitEvent(e)}emitEventReverse(e,a){var i;(i=this.findObjectById(a)||this.findObjectByName(a))==null||i.emitEventReverse(e)}addEventListener(e,a){this.canvas.addEventListener(e,a)}removeEventListener(e,a){this.canvas.removeEventListener(e,a)}setZoom(e){var a,i;((a=this._controls)==null?void 0:a.orbitControls)instanceof ip$2&&((i=this._controls)==null||i.orbitControls.zoomOut(e))}get eventManager(){return this._eventManager}get controls(){return this._controls}setSize(e,a){this._viewportWidth=e,this._viewportHeight=a,this._viewportMode=2,this._resize()}setBackgroundColor(e){var g;let{r:a,g:i,b:o,a:c}={r:0,g:0,b:0,a:1},d=new xr$1(a,i,o,c);try{d.setStyle(e)}catch{console.error("This is not a valid css color",e)}(g=this._scene)==null||g.activePage.setBackgroundColor(d),this._requestRenderAutoMode()}dispose(){var e,a,i,o,c,d,g;this.disposed=!0,(e=this._eventManager)==null||e.deactivate(),(a=this._scene)==null||a.dispose(),(i=this._sharedAssetsManager)==null||i.dispose(),this._proxyObjectCache.forEach(b=>{jw.unsubscribe(b)}),this._variablesCache.clear(),(o=this._renderer)==null||o.setAnimationLoop(null),(c=this._renderer)==null||c.dispose(),this._renderer=void 0,(d=this._sharedAssetsManager)==null||d.dispose(),this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=void 0),this._resizeObserverTimeout!==void 0&&clearTimeout(this._resizeObserverTimeout),this.canvas.style.width="",this.canvas.style.height="",this.canvas.removeAttribute("width"),this.canvas.removeAttribute("height"),this._frameView&&(this._frameView=void 0),(g=this._controls)==null||g.deactivate(),H2(this.canvas),document.removeEventListener("scroll",this._onScroll)}get isStopped(){return this._isPaused}stop(){var e,a,i;this._isPaused||((e=this._renderer)==null||e.setAnimationLoop(null),this._isPaused=!0,(a=this._eventManager)==null||a.pause(),(i=this._controls)!=null&&i.orbitControls&&(this._controls.orbitControls.enabled=!1))}play(){var e,a,i;!this._isPaused||(this._isPaused=!1,(e=this._eventManager)==null||e.resume(),(a=this._controls)!=null&&a.orbitControls&&(this._controls.orbitControls.enabled=!0),(i=this._renderer)==null||i.setAnimationLoop(this.render))}setGlobalEvents(e){var a;(a=this._eventManager)==null||a.updateUseWindowEvents(e)}get data(){return this._data}_createProxyObject(e){var c;if(e==null)return;if(this._proxyObjectCache.has(e.uuid))return this._proxyObjectCache.get(e.uuid);let a;e.traverseAncestors(d=>{d instanceof mr&&(a=d.name)});let i={name:e.name,uuid:e.uuid,visible:e.visible,intensity:e.intensity,position:e.position,rotation:e.rotation,scale:e.scale,type:e.data.type,page:a,parentUuid:e.parent instanceof mr||e instanceof $l||(c=e.parent)==null?void 0:c.uuid,emitEvent(d){e.dispatchEvent({type:"userEvent",eventName:d})},emitEventReverse(d){e.dispatchEvent({type:"userEvent",eventName:d,reverse:!0})}},o=jw(i,(d,g)=>{var b;typeof e[d]!="object"&&((b=Object.getOwnPropertyDescriptor(e,d))!=null&&b.writable)&&(e[d]=g),this._requestRenderAutoMode(),e.updateMatrix()});return this._proxyObjectCache.set(e.uuid,o),o}setUIWasmUrl(e){tx.skiaWasmUrl=e}},Z$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fe={},yr={get exports(){return fe},set exports(e){fe=e}},z$1={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var De;function hr(){if(De)return z$1;De=1;var e=React$1,a=Symbol.for("react.element"),i=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,c=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function g(b,j,$){var rt,_e={},st=null,ut=null;$!==void 0&&(st=""+$),j.key!==void 0&&(st=""+j.key),j.ref!==void 0&&(ut=j.ref);for(rt in j)o.call(j,rt)&&!d.hasOwnProperty(rt)&&(_e[rt]=j[rt]);if(b&&b.defaultProps)for(rt in j=b.defaultProps,j)_e[rt]===void 0&&(_e[rt]=j[rt]);return{$$typeof:a,type:b,key:st,ref:ut,props:_e,_owner:c.current}}return z$1.Fragment=i,z$1.jsx=g,z$1.jsxs=g,z$1}(function(e){e.exports=hr()})(yr);const ce=fe.jsx;var Rr="Expected a function",$e=NaN,_r="[object Symbol]",Tr=/^\s+|\s+$/g,Sr=/^[-+]0x[0-9a-f]+$/i,Or=/^0b[01]+$/i,wr=/^0o[0-7]+$/i,jr=parseInt,Cr=typeof Z$1=="object"&&Z$1&&Z$1.Object===Object&&Z$1,Pr=typeof self=="object"&&self&&self.Object===Object&&self,xr=Cr||Pr||Function("return this")(),kr=Object.prototype,Ar=kr.toString,Fr=Math.max,Ir=Math.min,ue=function(){return xr.Date.now()};function Dr(e,a,i){var o,c,d,g,b,j,$=0,rt=!1,_e=!1,st=!0;if(typeof e!="function")throw new TypeError(Rr);a=Le(a)||0,le(i)&&(rt=!!i.leading,_e="maxWait"in i,d=_e?Fr(Le(i.maxWait)||0,a):d,st="trailing"in i?!!i.trailing:st);function ut(It){var Lt=o,Ft=c;return o=c=void 0,$=It,g=e.apply(Ft,Lt),g}function gt(It){return $=It,b=setTimeout(wt,a),rt?ut(It):g}function yt(It){var Lt=It-j,Ft=It-$,Nt=a-Lt;return _e?Ir(Nt,d-Ft):Nt}function Pt(It){var Lt=It-j,Ft=It-$;return j===void 0||Lt>=a||Lt<0||_e&&Ft>=d}function wt(){var It=ue();if(Pt(It))return Ct(It);b=setTimeout(wt,yt(It))}function Ct(It){return b=void 0,st&&o?ut(It):(o=c=void 0,g)}function At(){b!==void 0&&clearTimeout(b),$=0,o=j=c=b=void 0}function Tt(){return b===void 0?g:Ct(ue())}function kt(){var It=ue(),Lt=Pt(It);if(o=arguments,c=this,j=It,Lt){if(b===void 0)return gt(j);if(_e)return b=setTimeout(wt,a),ut(j)}return b===void 0&&(b=setTimeout(wt,a)),g}return kt.cancel=At,kt.flush=Tt,kt}function le(e){var a=typeof e;return!!e&&(a=="object"||a=="function")}function Wr(e){return!!e&&typeof e=="object"}function $r(e){return typeof e=="symbol"||Wr(e)&&Ar.call(e)==_r}function Le(e){if(typeof e=="number")return e;if($r(e))return $e;if(le(e)){var a=typeof e.valueOf=="function"?e.valueOf():e;e=le(a)?a+"":a}if(typeof e!="string")return e===0?e:+e;e=e.replace(Tr,"");var i=Or.test(e);return i||wr.test(e)?jr(e.slice(2),i?2:8):Sr.test(e)?$e:+e}var Lr=Dr;function Yr(e){return a=>{e.forEach(i=>{typeof i=="function"?i(a):i!=null&&(i.current=a)})}}const Nr=[],Mr={width:"100%",height:"100%"},Ur=reactExports$1.forwardRef(function({className:e,children:a,debounceTime:i=300,ignoreDimensions:o=Nr,parentSizeStyles:c,enableDebounceLeadingCall:d=!0,resizeObserverPolyfill:g,...b},j){const $=reactExports$1.useRef(null),rt=reactExports$1.useRef(0),[_e,st]=reactExports$1.useState({width:0,height:0,top:0,left:0}),ut=reactExports$1.useMemo(()=>{const gt=Array.isArray(o)?o:[o];return Lr(yt=>{st(Pt=>Object.keys(Pt).filter(wt=>Pt[wt]!==yt[wt]).every(wt=>gt.includes(wt))?Pt:yt)},i,{leading:d})},[i,d,o]);return reactExports$1.useEffect(()=>{const gt=g||window.ResizeObserver,yt=new gt(Pt=>{Pt.forEach(wt=>{const{left:Ct,top:At,width:Tt,height:kt}=(wt==null?void 0:wt.contentRect)??{};rt.current=window.requestAnimationFrame(()=>{ut({width:Tt,height:kt,top:At,left:Ct})})})});return $.current&&yt.observe($.current),()=>{window.cancelAnimationFrame(rt.current),yt.disconnect(),ut.cancel()}},[ut,g]),ce("div",{style:{...Mr,...c},ref:Yr([j,$]),className:e,...b,children:a({..._e,ref:$.current,resize:ut})})}),zr=reactExports$1.forwardRef(({scene:e,style:a,onMouseDown:i,onMouseUp:o,onMouseHover:c,onKeyDown:d,onKeyUp:g,onStart:b,onLookAt:j,onFollow:$,onWheel:rt,onLoad:_e,renderOnDemand:st=!0,...ut},gt)=>{const yt=reactExports$1.useRef(null),[Pt,wt]=reactExports$1.useState(!0);return reactExports$1.useEffect(()=>{wt(!0);let Ct;const At=[{name:"mouseDown",cb:i},{name:"mouseUp",cb:o},{name:"mouseHover",cb:c},{name:"keyDown",cb:d},{name:"keyUp",cb:g},{name:"start",cb:b},{name:"lookAt",cb:j},{name:"follow",cb:$},{name:"scroll",cb:rt}];if(yt.current){Ct=new QN(yt.current,{renderOnDemand:st});async function Tt(){await Ct.load(e);for(let kt of At)kt.cb&&Ct.addEventListener(kt.name,kt.cb);wt(!1),_e==null||_e(Ct)}Tt()}return()=>{for(let Tt of At)Tt.cb&&Ct.removeEventListener(Tt.name,Tt.cb);Ct.dispose()}},[e]),ce(Ur,{ref:gt,parentSizeStyles:a,debounceTime:50,...ut,children:()=>ce("canvas",{ref:yt,style:{display:Pt?"none":"block"}})})});var ValidCSSEffects;(function(e){e.speed="speed",e.translateX="translateX",e.translateY="translateY",e.rotate="rotate",e.rotateX="rotateX",e.rotateY="rotateY",e.rotateZ="rotateZ",e.scale="scale",e.scaleX="scaleX",e.scaleY="scaleY",e.scaleZ="scaleZ",e.opacity="opacity"})(ValidCSSEffects||(ValidCSSEffects={}));var Units;(function(e){e.px="px",e["%"]="%",e.vh="vh",e.vw="vw"})(Units||(Units={}));var RotationUnits;(function(e){e.deg="deg",e.turn="turn",e.rad="rad"})(RotationUnits||(RotationUnits={}));var ScaleUnits;(function(e){e[""]=""})(ScaleUnits||(ScaleUnits={}));var ScrollAxis;(function(e){e.vertical="vertical",e.horizontal="horizontal"})(ScrollAxis||(ScrollAxis={}));var EasingPreset;(function(e){e.ease="ease",e.easeIn="easeIn",e.easeOut="easeOut",e.easeInOut="easeInOut",e.easeInQuad="easeInQuad",e.easeInCubic="easeInCubic",e.easeInQuart="easeInQuart",e.easeInQuint="easeInQuint",e.easeInSine="easeInSine",e.easeInExpo="easeInExpo",e.easeInCirc="easeInCirc",e.easeOutQuad="easeOutQuad",e.easeOutCubic="easeOutCubic",e.easeOutQuart="easeOutQuart",e.easeOutQuint="easeOutQuint",e.easeOutSine="easeOutSine",e.easeOutExpo="easeOutExpo",e.easeOutCirc="easeOutCirc",e.easeInOutQuad="easeInOutQuad",e.easeInOutCubic="easeInOutCubic",e.easeInOutQuart="easeInOutQuart",e.easeInOutQuint="easeInOutQuint",e.easeInOutSine="easeInOutSine",e.easeInOutExpo="easeInOutExpo",e.easeInOutCirc="easeInOutCirc",e.easeInBack="easeInBack",e.easeOutBack="easeOutBack",e.easeInOutBack="easeInOutBack"})(EasingPreset||(EasingPreset={}));ScaleUnits[""],Units.px,Units["%"],Units.vh,Units.vw,RotationUnits.deg,RotationUnits.turn,RotationUnits.rad;const Grid$2=()=>jsxRuntimeExports.jsx("div",{className:"home_div_section1_grid_bg",children:jsxRuntimeExports.jsxs("svg",{width:"102%",height:"102%",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsxs("defs",{children:[jsxRuntimeExports.jsx("pattern",{id:"smallGrid",width:"120",height:"120",patternUnits:"userSpaceOnUse",children:jsxRuntimeExports.jsx("path",{d:"M 120 0 L 0 0 0 120",fill:"none",stroke:"currentColor","stroke-width":"1"})}),jsxRuntimeExports.jsx("pattern",{id:"grid",width:"240",height:"240",patternUnits:"userSpaceOnUse",children:jsxRuntimeExports.jsx("rect",{width:"240",height:"240",fill:"url(#smallGrid)"})})]}),jsxRuntimeExports.jsx("rect",{width:"100%",height:"100%",fill:"url(#grid)"})]})}),Icon=()=>jsxRuntimeExports.jsxs("svg",{"data-v-25ecef37":"",width:"330",height:"337",viewBox:"0 0 330 337",fill:"none",xmlns:"http://www.w3.org/2000/svg",cssid:"home_dev_sp","data-v-706ceafa":"",children:[jsxRuntimeExports.jsx("path",{d:"M311.458 127.516C289.848 46.8654 206.95 -0.996002 126.299 20.6142C45.6491 42.2243 -2.21227 125.123 19.3979 205.773C41.0081 286.423 123.906 334.285 204.557 312.674C285.207 291.064 333.068 208.166 311.458 127.516Z",fill:"url(#paint0_radial-771657)"})," ",jsxRuntimeExports.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M162.421 331.431C162.439 332.464 163.282 333.297 164.32 333.297C165.266 333.297 166.051 332.604 166.194 331.698L220.107 324.843C220.467 325.907 221.473 326.673 222.659 326.673C224.146 326.673 225.351 325.467 225.351 323.98C225.351 323.611 225.277 323.26 225.143 322.94L260.784 298.742C261.069 298.96 261.425 299.09 261.811 299.09C262.745 299.09 263.502 298.333 263.502 297.4C263.502 297.142 263.444 296.897 263.341 296.679L293.173 268.237C293.609 268.542 294.14 268.721 294.713 268.721C296.2 268.721 297.405 267.515 297.405 266.028C297.405 265.188 297.02 264.437 296.417 263.944L322.444 214.559C322.566 214.584 322.693 214.597 322.823 214.597C323.871 214.597 324.721 213.747 324.721 212.699C324.721 211.922 324.254 211.254 323.586 210.96L326.958 184.988C328.356 184.89 329.459 183.725 329.459 182.302C329.459 180.949 328.46 179.828 327.159 179.638L323.593 113.672C324.623 113.293 325.357 112.304 325.357 111.144C325.357 109.657 324.152 108.451 322.665 108.451C322.247 108.451 321.852 108.546 321.499 108.716L265.044 34.1911C265.463 33.7165 265.717 33.0933 265.717 32.4108C265.717 30.9237 264.511 29.7182 263.024 29.7182C261.993 29.7182 261.096 30.2986 260.644 31.1506L196.83 12.3176L195.048 11.1831C195.101 11.0078 195.13 10.8217 195.13 10.6289C195.13 9.58051 194.28 8.73062 193.232 8.73062C192.337 8.73062 191.587 9.34952 191.386 10.1826L189.767 10.233L168.6 3.98621C168.606 3.90903 168.61 3.83096 168.61 3.75208C168.61 2.26508 167.404 1.05957 165.917 1.05957C164.466 1.05957 163.283 2.20749 163.227 3.64474L107.947 12.554C107.641 11.9155 106.989 11.4745 106.234 11.4745C105.186 11.4745 104.336 12.3244 104.336 13.3727C104.336 13.5704 104.366 13.761 104.422 13.9402L70.0904 36.9113C69.6038 36.4287 68.934 36.1307 68.1946 36.1307C66.7076 36.1307 65.5021 37.3362 65.5021 38.8232C65.5021 39.3016 65.6269 39.7509 65.8457 40.1403L35.4022 66.3569C35.1055 66.1648 34.7517 66.0532 34.3718 66.0532C33.3234 66.0532 32.4735 66.9031 32.4735 67.9515C32.4735 68.494 32.7011 68.9834 33.0661 69.3294L7.07018 120.191C6.83901 120.126 6.59528 120.091 6.34348 120.091C4.85645 120.091 3.65098 121.297 3.65098 122.784C3.65098 123.981 4.43211 124.995 5.51245 125.346L2.13409 154.724C1.23993 154.878 0.55957 155.657 0.55957 156.595C0.55957 157.496 1.18663 158.25 2.02792 158.445L5.69534 222.369C4.53938 222.671 3.68646 223.723 3.68646 224.974C3.68646 226.461 4.89194 227.666 6.37897 227.666C6.79992 227.666 7.1983 227.569 7.55317 227.397L64.9861 302.885C64.5693 303.36 64.3165 303.981 64.3165 304.662C64.3165 306.149 65.5219 307.355 67.009 307.355C68.059 307.355 68.9687 306.754 69.4126 305.877L133.342 323.454C133.338 323.515 133.336 323.577 133.336 323.639C133.336 325.126 134.541 326.331 136.028 326.331C137.079 326.331 137.989 325.729 138.433 324.852L162.421 331.431ZM164.668 329.532C164.555 329.511 164.439 329.5 164.32 329.5C163.866 329.5 163.449 329.66 163.123 329.925L154.872 324.247L167.332 324.296L164.668 329.532ZM165.621 330.017L168.528 324.301L182.886 324.357L165.863 330.293C165.791 330.193 165.71 330.101 165.621 330.017ZM138.624 322.923C138.642 322.986 138.657 323.05 138.67 323.115L151.415 323.165L145.787 319.292L138.624 322.923ZM135.992 320.947C136.004 320.946 136.016 320.946 136.028 320.946C136.885 320.946 137.648 321.346 138.141 321.97L144.785 318.602L140.773 315.841C141.586 315.976 142.401 316.104 143.217 316.226L145.87 318.052L213.631 283.704C213.541 283.412 213.493 283.102 213.493 282.78C213.493 282.663 213.5 282.547 213.512 282.432L123.981 256.504C123.643 257.199 123.055 257.751 122.335 258.042L135.992 320.947ZM134.067 321.794C134.314 321.531 134.613 321.319 134.948 321.172L121.29 258.268C121.245 258.27 121.201 258.271 121.156 258.271C119.952 258.271 118.906 257.594 118.379 256.6L61.2192 275.313C61.231 275.416 61.2372 275.52 61.2372 275.626C61.2372 275.955 61.1781 276.27 61.0701 276.562L134.067 321.794ZM60.5067 277.47L132.599 322.141L69.6953 304.846C69.6994 304.786 69.7015 304.724 69.7015 304.662C69.7015 304.506 69.6882 304.353 69.6627 304.204L88.5959 296.849C88.2067 296.619 87.8185 296.388 87.4314 296.155L69.2754 303.208C68.7965 302.463 67.9604 301.97 67.009 301.97C66.9332 301.97 66.858 301.973 66.7838 301.979L59.797 278.01C60.063 277.87 60.3026 277.687 60.5067 277.47ZM58.7709 278.309L64.4705 297.862L51.3963 269.429L56.2792 274.17C56.009 274.59 55.8522 275.09 55.8522 275.626C55.8522 277.113 57.0576 278.318 58.5447 278.318C58.6209 278.318 58.6963 278.315 58.7709 278.309ZM57.0239 273.404L50.1588 266.738L47.8743 261.769C46.9108 260.58 45.9642 259.374 45.0351 258.153L48.0336 264.674L8.64546 226.428C8.67736 226.378 8.70769 226.327 8.73635 226.275L29.4084 232.699C29.1968 232.263 28.9872 231.824 28.7796 231.385L9.05684 225.256C9.06652 225.163 9.07147 225.069 9.07147 224.974C9.07147 224.463 8.92911 223.985 8.68188 223.578L37.377 197.598C37.9106 198.016 38.583 198.265 39.3136 198.265C39.3805 198.265 39.4469 198.263 39.5127 198.259L57.4122 273.182C57.2763 273.246 57.1465 273.32 57.0239 273.404ZM58.4519 272.935L40.5524 198.012C40.904 197.861 41.2225 197.647 41.494 197.385L118.343 253.73C118.133 254.151 118.014 254.627 118.014 255.13C118.014 255.284 118.025 255.436 118.047 255.584L60.8869 274.297C60.4239 273.483 59.5484 272.933 58.5447 272.933C58.5136 272.933 58.4827 272.934 58.4519 272.935ZM118.976 252.868L42.1265 196.524C42.3366 196.102 42.4549 195.627 42.4549 195.124C42.4549 194.819 42.4114 194.524 42.3303 194.245L117.773 157.415C118.327 158.218 119.201 158.785 120.21 158.931L120.608 252.036C119.98 252.147 119.416 252.444 118.976 252.868ZM121.676 252.032L121.279 158.927C122.078 158.804 122.79 158.418 123.324 157.86L192.1 206.337C191.857 206.821 191.72 207.367 191.72 207.946C191.72 208.464 191.829 208.956 192.027 209.4L123.48 253.017C123.016 252.507 122.386 252.15 121.676 252.032ZM124.054 253.918L192.601 210.302C193.259 211.058 194.229 211.536 195.31 211.536C195.465 211.536 195.618 211.526 195.768 211.507L215.272 279.949C214.636 280.256 214.119 280.771 213.809 281.406L124.278 255.477C124.29 255.363 124.297 255.247 124.297 255.13C124.297 254.7 124.211 254.291 124.054 253.918ZM216.3 279.657L196.796 211.215C197.999 210.667 198.846 209.475 198.897 208.08L273.445 199.707C273.593 200.217 273.867 200.674 274.231 201.042L217.996 279.949C217.584 279.75 217.122 279.639 216.634 279.639C216.522 279.639 216.41 279.645 216.3 279.657ZM218.866 280.57L275.101 201.663C275.513 201.861 275.975 201.973 276.463 201.973C276.559 201.973 276.654 201.968 276.748 201.96L291.167 255.798L282.252 268.156L219.55 281.608C219.392 281.217 219.158 280.865 218.866 280.57ZM219.773 282.653L281.319 269.449L269.859 285.333L263.183 290.702L264.393 280.979C263.993 281.325 263.592 281.67 263.188 282.013L261.986 291.665L257.121 295.578L248.249 293.172C247.848 293.434 247.446 293.694 247.043 293.953L256.091 296.406L250.768 300.687L221.297 310.964L217.612 285.767C218.868 285.356 219.776 284.174 219.776 282.78C219.776 282.738 219.775 282.696 219.773 282.653ZM216.554 285.921L220.269 311.322L185.917 323.3L169.071 323.234L171.875 317.722C171.467 317.74 171.059 317.756 170.651 317.771L167.874 323.23L153.311 323.172L146.873 318.742L214.115 284.657C214.673 285.405 215.555 285.896 216.554 285.921ZM279.571 198.372C279.593 198.522 279.604 198.675 279.604 198.831C279.604 200.096 278.857 201.185 277.78 201.684L291.974 254.68L305.502 235.929L312.95 216.628L307.458 218.482C307.615 218.055 307.769 217.627 307.922 217.198L313.45 215.331L318.001 203.538L313.963 194.993C314.077 194.395 314.188 193.796 314.296 193.196L318.532 202.161L322.307 192.38L322.315 184.328L279.571 198.372ZM277.566 195.889C278.285 196.159 278.88 196.685 279.237 197.357L322.316 183.203L322.326 172.715L295.353 105.822C295.132 105.888 294.901 105.929 294.662 105.945L277.566 195.889ZM275.054 196.023C275.478 195.81 275.956 195.69 276.463 195.69C276.481 195.69 276.498 195.69 276.516 195.69L293.596 105.831C292.689 105.572 291.95 104.916 291.579 104.063L221.404 119.856C221.407 119.908 221.408 119.962 221.408 120.015C221.408 120.859 221.075 121.624 220.534 122.189L275.054 196.023ZM273.327 198.645C273.372 197.875 273.694 197.18 274.195 196.658L219.675 122.824C219.251 123.036 218.773 123.156 218.267 123.156C218.177 123.156 218.088 123.152 218 123.145L196.723 204.645C197.726 205.075 198.493 205.948 198.779 207.018L273.327 198.645ZM192.716 205.464C193.369 204.781 194.29 204.356 195.31 204.356C195.438 204.356 195.564 204.363 195.689 204.376L216.966 122.875C216.365 122.601 215.866 122.144 215.54 121.575L124.275 154.81C124.304 154.995 124.32 155.185 124.32 155.378C124.32 155.957 124.183 156.503 123.94 156.987L192.716 205.464ZM122.285 152.142C123.007 152.49 123.596 153.072 123.95 153.791L215.175 120.571C215.142 120.391 215.125 120.205 215.125 120.015C215.125 119.494 215.252 119.004 215.476 118.571L140.679 61.8758C140.118 62.4003 139.364 62.7214 138.535 62.7214C138.526 62.7214 138.516 62.7213 138.507 62.7213L122.285 152.142ZM118.328 152.71C118.965 152.137 119.806 151.788 120.73 151.788C120.908 151.788 121.084 151.801 121.256 151.827L137.456 62.5309C136.925 62.3366 136.461 62.0031 136.108 61.5746L62.1426 103.665C62.2631 103.999 62.3288 104.358 62.3288 104.733C62.3288 105.299 62.1793 105.83 61.9177 106.288L118.328 152.71ZM117.304 156.455C117.197 156.115 117.14 155.753 117.14 155.378C117.14 154.704 117.326 154.073 117.649 153.534L61.2382 107.113C60.6879 107.588 59.9712 107.875 59.1875 107.875C59.1393 107.875 59.0913 107.873 59.0436 107.871L40.4998 192.215C41.0479 192.438 41.5186 192.812 41.8607 193.285L117.304 156.455ZM38.5155 192.085C38.7703 192.018 39.0378 191.983 39.3136 191.983C39.3613 191.983 39.4087 191.984 39.4558 191.986L57.9997 107.642C57.3293 107.368 56.7748 106.869 56.43 106.239L16.2071 119.979L11.5497 132.916L38.5155 192.085ZM36.6596 196.805C36.351 196.319 36.1723 195.743 36.1723 195.124C36.1723 194.046 36.7156 193.095 37.5432 192.529L11.0314 134.355L6.88724 145.866L6.89013 154.305L14.9996 151.166C14.9586 151.563 14.9193 151.96 14.8815 152.358L6.89052 155.451L6.89411 165.915L15.5975 186.938C15.7984 188.407 16.0215 189.878 16.2669 191.348L6.89507 168.711L6.91345 222.334C7.29728 222.411 7.65155 222.57 7.95739 222.792L36.6596 196.805ZM56.0849 105.227L16.6707 118.692L23.0253 101.041L37.1844 81.8201L38.0191 85.2626C38.2835 84.8484 38.55 84.4355 38.8184 84.0238L38.0118 80.697L49.0515 65.7105L53.6363 64.8413C54.0376 64.3998 54.4416 63.9606 54.8482 63.5237L49.9829 64.4461L62.8296 47.0069L66.9662 43.8651L59.0762 101.594C57.3929 101.653 56.0463 103.036 56.0463 104.733C56.0463 104.901 56.0595 105.066 56.0849 105.227ZM60.1353 101.738L68.1699 42.9509L71.5632 40.3737L135.415 59.2158C135.401 59.3354 135.394 59.4569 135.394 59.5801C135.394 59.9543 135.459 60.3131 135.579 60.6458L61.613 102.737C61.2317 102.274 60.7205 101.922 60.1353 101.738ZM135.717 58.1907L72.6198 39.5712L77.0353 36.2177L107.184 25.3982L107.386 27.0311C107.727 26.8898 108.069 26.7498 108.411 26.6109L108.215 25.0281L142.343 12.7805L161.183 12.1933L139.418 56.5645C139.138 56.4828 138.842 56.4388 138.535 56.4388C137.299 56.4388 136.23 57.1527 135.717 58.1907ZM140.377 57.0353L162.392 12.1555L176.296 11.7222L182.132 15.8371L181.319 16.2609C181.879 16.3203 182.44 16.3828 182.999 16.4485L221.745 43.7658C221.553 44.1701 221.444 44.6221 221.442 45.0991L141.5 58.5388C141.286 57.9301 140.89 57.4071 140.377 57.0353ZM141.676 59.5928L221.618 46.1532C221.961 47.1325 222.776 47.8901 223.79 48.1538L217.992 116.886C217.272 116.948 216.621 117.254 216.122 117.72L141.325 61.0244C141.548 60.5955 141.674 60.1088 141.676 59.5928ZM219.057 116.974L224.855 48.2432C225.532 48.1851 226.148 47.9121 226.634 47.4926L291.814 101.116C291.501 101.604 291.319 102.186 291.319 102.81C291.319 102.882 291.321 102.953 291.326 103.024L221.17 118.813C220.796 117.912 220.016 117.223 219.057 116.974ZM292.537 100.326L227.314 46.6675C227.575 46.2093 227.724 45.6788 227.724 45.1136C227.724 44.9557 227.713 44.8005 227.69 44.6489L260.686 33.7462C261.15 34.5569 262.023 35.1032 263.024 35.1032C263.073 35.1032 263.122 35.102 263.17 35.0994L268.63 56.1418C269.121 56.599 269.608 57.0596 270.093 57.5236L265.125 38.3777L292.901 100.082C292.774 100.155 292.652 100.237 292.537 100.326ZM293.908 99.7168L265.451 36.4977L317.208 104.822L282.599 71.0532C284.228 73.0471 285.808 75.0869 287.339 77.1712L320.507 109.534C320.426 109.642 320.353 109.757 320.289 109.877L297.587 103.108C297.597 103.01 297.601 102.91 297.601 102.81C297.601 101.075 296.195 99.6685 294.46 99.6685C294.272 99.6685 294.087 99.6851 293.908 99.7168ZM297.307 104.14L319.983 110.901C319.976 110.981 319.972 111.062 319.972 111.144C319.972 111.688 320.134 112.195 320.412 112.618L309.817 121.835C309.933 122.207 310.047 122.58 310.159 122.954L321.165 113.38C321.52 113.619 321.936 113.775 322.384 113.822L322.329 169.865L296.313 105.346C296.738 105.036 297.082 104.621 297.307 104.14ZM260.351 32.7313L227.355 43.6342C226.826 42.6451 225.783 41.9723 224.583 41.9723C223.715 41.9723 222.93 42.3241 222.361 42.8928L184.182 15.9746L191.873 11.9691L191.893 11.975C192.205 12.2848 192.623 12.4872 193.089 12.5219L194.327 18.2175C194.709 18.292 195.09 18.368 195.47 18.4456L194.212 12.6594L196.383 13.3L210.6 22.3507C211.984 22.7855 213.362 23.24 214.732 23.7139L200.093 14.3949L260.342 32.1758C260.335 32.2532 260.332 32.3316 260.332 32.4108C260.332 32.5192 260.338 32.6262 260.351 32.7313ZM4.34944 156.434C4.35389 156.487 4.35616 156.541 4.35616 156.595C4.35616 157.193 4.07992 157.726 3.64815 158.074L5.82449 163.331L5.82193 155.864L4.34944 156.434ZM3.57664 155.061C3.72253 155.168 3.85264 155.295 3.9628 155.438L5.82153 154.719L5.81951 148.832L3.57664 155.061ZM6.95329 125.407C6.92906 125.413 6.9047 125.418 6.88023 125.423L6.88616 142.714L10.3968 132.963L6.95329 125.407ZM9.0138 122.437C9.02844 122.55 9.03599 122.666 9.03599 122.784C9.03599 123.68 8.59844 124.473 7.92538 124.963L10.9151 131.523L14.9119 120.422L9.0138 122.437ZM8.3396 120.977C8.46396 121.114 8.57435 121.264 8.66854 121.425L15.3755 119.134L20.8036 104.057L8.3396 120.977ZM34.2813 69.8477C34.2729 69.8473 34.2646 69.8468 34.2562 69.8463L24.2942 97.5165L36.8557 80.4644L34.2813 69.8477ZM36.2613 68.1353C36.2012 68.7606 35.8379 69.2971 35.3201 69.5963L37.683 79.3412L47.5086 66.003L36.2613 68.1353ZM67.3078 41.3662C67.2229 41.3366 67.1399 41.3029 67.0591 41.2652L65.0738 43.9604L67.1709 42.3676L67.3078 41.3662ZM70.8592 38.4341C70.8776 38.5612 70.8871 38.6911 70.8871 38.8232C70.8871 38.9019 70.8837 38.9799 70.8771 39.057L71.3472 39.1957L73.6854 37.4199L70.8592 38.4341ZM105.927 15.2463C105.622 15.1967 105.342 15.0749 105.105 14.899L79.8695 34.0652L107.049 24.311L105.927 15.2463ZM108.072 13.8488C107.925 14.4192 107.519 14.8856 106.987 15.1158L108.08 23.941L138.878 12.8885L108.072 13.8488ZM164.276 5.88699C164.013 5.68387 163.787 5.43292 163.614 5.14706L145.606 11.6095L161.716 11.1074L164.276 5.88699ZM167.767 5.70889C167.284 6.16495 166.634 6.44458 165.917 6.44458C165.682 6.44458 165.454 6.41437 165.236 6.35764L162.925 11.0697L174.843 10.6982L167.767 5.70889ZM324.092 182.619C324.08 182.515 324.074 182.409 324.074 182.302C324.074 181.363 324.556 180.535 325.285 180.054L323.392 175.359L323.385 182.851L324.092 182.619ZM325.319 184.573C324.951 184.338 324.643 184.015 324.426 183.634L323.384 183.977L323.378 189.603L325.319 184.573ZM320.927 212.807C320.925 212.771 320.924 212.735 320.924 212.699C320.924 212.101 321.2 211.568 321.632 211.22L318.632 204.872L314.767 214.887L320.927 212.807ZM321.375 213.927C321.344 213.891 321.314 213.853 321.286 213.814L314.267 216.184L307.964 232.516L321.375 213.927ZM294.3 263.367C294.435 263.346 294.573 263.336 294.713 263.336C294.784 263.336 294.854 263.338 294.923 263.344L303.986 239.856L292.331 256.012L294.3 263.367ZM292.021 266.06C292.02 266.049 292.02 266.039 292.02 266.028C292.02 265.062 292.529 264.215 293.294 263.74L291.524 257.131L283.811 267.821L292.021 266.06ZM292.322 267.267C292.294 267.214 292.268 267.16 292.244 267.105L282.878 269.114L272.999 282.808L292.322 267.267ZM260.401 296.467C260.645 296.099 261.03 295.832 261.478 295.742L261.796 293.189L258.396 295.924L260.401 296.467ZM222.807 321.292C223.404 321.324 223.949 321.551 224.38 321.91L248.283 302.686L221.454 312.041L222.807 321.292ZM220.021 323.435C220.212 322.51 220.876 321.758 221.749 321.445L220.426 312.399L189.127 323.313L220.021 323.435ZM233.284 316.121L258.13 299.252L251.294 301.636L233.284 316.121ZM169.305 330.225L186.096 324.37L214.474 324.482L169.305 330.225ZM161.413 330.046L152.977 324.24L140.057 324.189L161.413 330.046ZM322.304 195.356L319.163 203.495L322.289 210.11L322.304 195.356ZM323.395 172.509L323.437 130.571L326.061 179.12L323.395 172.509ZM323.363 204.372L323.375 192.579L325.665 186.644L323.363 204.372ZM306.449 236.443L318.523 219.707L297.554 259.495L306.449 236.443ZM285.166 274.394L270.642 286.075L265.635 293.014L285.166 274.394ZM262.598 295.397L267.502 288.6L262.993 292.227L262.598 295.397ZM260.004 297.467L257.367 296.752L253.778 299.638L260.004 297.467ZM183.199 15.2816L190.396 11.5332L189.628 11.3066L178.072 11.6668L183.199 15.2816ZM176.62 10.6428L186.352 10.3395L168.873 5.18115L176.62 10.6428ZM48.44 64.7386L59.8163 49.2954L36.5028 67.0018L48.44 64.7386ZM5.83919 206.217L5.82544 166.127L3.17139 159.716L5.83919 206.217ZM5.81843 145.68L3.51388 152.081L5.81377 132.08L5.81843 145.68ZM31.0191 75.6826L22.0725 100.533L9.80921 117.18L31.0191 75.6826ZM62.0605 46.2489L47.9109 56.9954L64.9587 42.3145L62.0605 46.2489ZM91.6957 23.7411L76.5196 35.2673L72.0974 36.8543L91.6957 23.7411ZM142.141 11.7176L114.51 12.5789L160.31 5.19745L142.141 11.7176ZM11.1195 230.32L64.4964 300.477L49.2711 267.365L11.1195 230.32Z",fill:"url(#paint1_radial-513745)"})," ",jsxRuntimeExports.jsxs("defs",{children:[jsxRuntimeExports.jsxs("radialGradient",{id:"paint0_radial-771657",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(131.5 27) rotate(76.5554) scale(305.369)",children:[jsxRuntimeExports.jsx("stop",{offset:"0.260417","stop-color":"#171717"})," ",jsxRuntimeExports.jsx("stop",{offset:"0.727754","stop-color":"#0F0F0F"})," ",jsxRuntimeExports.jsx("stop",{offset:"1","stop-color":"#04875E"})]})," ",jsxRuntimeExports.jsxs("radialGradient",{id:"paint1_radial-513745",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(223 326.5) rotate(-108.504) scale(182.753 305.986)",children:[jsxRuntimeExports.jsx("stop",{"stop-color":"#03D19F"})," ",jsxRuntimeExports.jsx("stop",{offset:"0.520536","stop-color":"#696969"})," ",jsxRuntimeExports.jsx("stop",{offset:"1","stop-color":"#171717"})]})]})]});var Send={},interopRequireDefault={exports:{}};(function(e){function a(i){return i&&i.__esModule?i:{default:i}}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports})(interopRequireDefault);var interopRequireDefaultExports=interopRequireDefault.exports,createSvgIcon$1={};function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var i=arguments[a];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},_extends$3.apply(this,arguments)}function isPlainObject$1(e){if(typeof e!="object"||e===null)return!1;const a=Object.getPrototypeOf(e);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function deepClone(e){if(!isPlainObject$1(e))return e;const a={};return Object.keys(e).forEach(i=>{a[i]=deepClone(e[i])}),a}function deepmerge(e,a,i={clone:!0}){const o=i.clone?_extends$3({},e):e;return isPlainObject$1(e)&&isPlainObject$1(a)&&Object.keys(a).forEach(c=>{c!=="__proto__"&&(isPlainObject$1(a[c])&&c in e&&isPlainObject$1(e[c])?o[c]=deepmerge(e[c],a[c],i):i.clone?o[c]=isPlainObject$1(a[c])?deepClone(a[c]):a[c]:o[c]=a[c])}),o}var propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function e(o,c,d,g,b,j){if(j!==ReactPropTypesSecret){var $=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw $.name="Invariant Violation",$}}e.isRequired=e;function a(){return e}var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:a,element:e,elementType:e,instanceOf:a,node:e,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return i.PropTypes=i,i};propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports;function formatMuiErrorMessage(e){let a="https://mui.com/production-error/?code="+e;for(let i=1;i<arguments.length;i+=1)a+="&args[]="+encodeURIComponent(arguments[i]);return"Minified MUI error #"+e+"; visit "+a+" for the full message."}function capitalize$1(e){if(typeof e!="string")throw new Error(formatMuiErrorMessage(7));return e.charAt(0).toUpperCase()+e.slice(1)}function createChainedFunction(...e){return e.reduce((a,i)=>i==null?a:function(...c){a.apply(this,c),i.apply(this,c)},()=>{})}function debounce(e,a=166){let i;function o(...c){const d=()=>{e.apply(this,c)};clearTimeout(i),i=setTimeout(d,a)}return o.clear=()=>{clearTimeout(i)},o}function deprecatedPropType(e,a){return()=>null}function isMuiElement(e,a){var i,o;return reactExports$1.isValidElement(e)&&a.indexOf((i=e.type.muiName)!=null?i:(o=e.type)==null||(o=o._payload)==null||(o=o.value)==null?void 0:o.muiName)!==-1}function ownerDocument(e){return e&&e.ownerDocument||document}function ownerWindow(e){return ownerDocument(e).defaultView||window}function requirePropFactory(e,a){return()=>null}function setRef$1(e,a){typeof e=="function"?e(a):e&&(e.current=a)}const useEnhancedEffect=typeof window<"u"?reactExports$1.useLayoutEffect:reactExports$1.useEffect,useEnhancedEffect$1=useEnhancedEffect;let globalId=0;function useGlobalId(e){const[a,i]=reactExports$1.useState(e),o=e||a;return reactExports$1.useEffect(()=>{a==null&&(globalId+=1,i(`mui-${globalId}`))},[a]),o}const maybeReactUseId=React$2.useId;function useId$1(e){if(maybeReactUseId!==void 0){const a=maybeReactUseId();return e??a}return useGlobalId(e)}function unsupportedProp(e,a,i,o,c){return null}function useControlled({controlled:e,default:a,name:i,state:o="value"}){const{current:c}=reactExports$1.useRef(e!==void 0),[d,g]=reactExports$1.useState(a),b=c?e:d,j=reactExports$1.useCallback($=>{c||g($)},[]);return[b,j]}function useEventCallback(e){const a=reactExports$1.useRef(e);return useEnhancedEffect$1(()=>{a.current=e}),reactExports$1.useRef((...i)=>(0,a.current)(...i)).current}function useForkRef(...e){return reactExports$1.useMemo(()=>e.every(a=>a==null)?null:a=>{e.forEach(i=>{setRef$1(i,a)})},e)}let hadKeyboardEvent=!0,hadFocusVisibleRecently=!1,hadFocusVisibleRecentlyTimeout;const inputTypesWhitelist={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function focusTriggersKeyboardModality(e){const{type:a,tagName:i}=e;return!!(i==="INPUT"&&inputTypesWhitelist[a]&&!e.readOnly||i==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function handleKeyDown(e){e.metaKey||e.altKey||e.ctrlKey||(hadKeyboardEvent=!0)}function handlePointerDown(){hadKeyboardEvent=!1}function handleVisibilityChange(){this.visibilityState==="hidden"&&hadFocusVisibleRecently&&(hadKeyboardEvent=!0)}function prepare(e){e.addEventListener("keydown",handleKeyDown,!0),e.addEventListener("mousedown",handlePointerDown,!0),e.addEventListener("pointerdown",handlePointerDown,!0),e.addEventListener("touchstart",handlePointerDown,!0),e.addEventListener("visibilitychange",handleVisibilityChange,!0)}function isFocusVisible(e){const{target:a}=e;try{return a.matches(":focus-visible")}catch{}return hadKeyboardEvent||focusTriggersKeyboardModality(a)}function useIsFocusVisible(){const e=reactExports$1.useCallback(c=>{c!=null&&prepare(c.ownerDocument)},[]),a=reactExports$1.useRef(!1);function i(){return a.current?(hadFocusVisibleRecently=!0,window.clearTimeout(hadFocusVisibleRecentlyTimeout),hadFocusVisibleRecentlyTimeout=window.setTimeout(()=>{hadFocusVisibleRecently=!1},100),a.current=!1,!0):!1}function o(c){return isFocusVisible(c)?(a.current=!0,!0):!1}return{isFocusVisibleRef:a,onFocus:o,onBlur:i,ref:e}}function resolveProps(e,a){const i=_extends$3({},a);return Object.keys(e).forEach(o=>{if(o.toString().match(/^(components|slots)$/))i[o]=_extends$3({},e[o],i[o]);else if(o.toString().match(/^(componentsProps|slotProps)$/)){const c=e[o]||{},d=a[o];i[o]={},!d||!Object.keys(d)?i[o]=c:!c||!Object.keys(c)?i[o]=d:(i[o]=_extends$3({},d),Object.keys(c).forEach(g=>{i[o][g]=resolveProps(c[g],d[g])}))}else i[o]===void 0&&(i[o]=e[o])}),i}function composeClasses(e,a,i=void 0){const o={};return Object.keys(e).forEach(c=>{o[c]=e[c].reduce((d,g)=>{if(g){const b=a(g);b!==""&&d.push(b),i&&i[g]&&d.push(i[g])}return d},[]).join(" ")}),o}const defaultGenerator=e=>e,createClassNameGenerator=()=>{let e=defaultGenerator;return{configure(a){e=a},generate(a){return e(a)},reset(){e=defaultGenerator}}},ClassNameGenerator=createClassNameGenerator(),globalStateClasses={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function generateUtilityClass(e,a,i="Mui"){const o=globalStateClasses[a];return o?`${i}-${o}`:`${ClassNameGenerator.generate(e)}-${a}`}function generateUtilityClasses(e,a,i="Mui"){const o={};return a.forEach(c=>{o[c]=generateUtilityClass(e,c,i)}),o}function clamp$1(e,a=Number.MIN_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER){return Math.max(a,Math.min(e,i))}function _objectWithoutPropertiesLoose$2(e,a){if(e==null)return{};var i={},o=Object.keys(e),c,d;for(d=0;d<o.length;d++)c=o[d],!(a.indexOf(c)>=0)&&(i[c]=e[c]);return i}function r$1(e){var a,i,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e)){var c=e.length;for(a=0;a<c;a++)e[a]&&(i=r$1(e[a]))&&(o&&(o+=" "),o+=i)}else for(i in e)e[i]&&(o&&(o+=" "),o+=i);return o}function clsx(){for(var e,a,i=0,o="",c=arguments.length;i<c;i++)(e=arguments[i])&&(a=r$1(e))&&(o&&(o+=" "),o+=a);return o}function memoize$1(e){var a=Object.create(null);return function(i){return a[i]===void 0&&(a[i]=e(i)),a[i]}}var reactPropsRegex=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,isPropValid=memoize$1(function(e){return reactPropsRegex.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91});function sheetForTag(e){if(e.sheet)return e.sheet;for(var a=0;a<document.styleSheets.length;a++)if(document.styleSheets[a].ownerNode===e)return document.styleSheets[a]}function createStyleElement(e){var a=document.createElement("style");return a.setAttribute("data-emotion",e.key),e.nonce!==void 0&&a.setAttribute("nonce",e.nonce),a.appendChild(document.createTextNode("")),a.setAttribute("data-s",""),a}var StyleSheet=function(){function e(i){var o=this;this._insertTag=function(c){var d;o.tags.length===0?o.insertionPoint?d=o.insertionPoint.nextSibling:o.prepend?d=o.container.firstChild:d=o.before:d=o.tags[o.tags.length-1].nextSibling,o.container.insertBefore(c,d),o.tags.push(c)},this.isSpeedy=i.speedy===void 0?!0:i.speedy,this.tags=[],this.ctr=0,this.nonce=i.nonce,this.key=i.key,this.container=i.container,this.prepend=i.prepend,this.insertionPoint=i.insertionPoint,this.before=null}var a=e.prototype;return a.hydrate=function(o){o.forEach(this._insertTag)},a.insert=function(o){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(createStyleElement(this));var c=this.tags[this.tags.length-1];if(this.isSpeedy){var d=sheetForTag(c);try{d.insertRule(o,d.cssRules.length)}catch{}}else c.appendChild(document.createTextNode(o));this.ctr++},a.flush=function(){this.tags.forEach(function(o){return o.parentNode&&o.parentNode.removeChild(o)}),this.tags=[],this.ctr=0},e}(),MS="-ms-",MOZ="-moz-",WEBKIT="-webkit-",COMMENT="comm",RULESET="rule",DECLARATION="decl",IMPORT="@import",KEYFRAMES="@keyframes",LAYER="@layer",abs=Math.abs,from=String.fromCharCode,assign=Object.assign;function hash(e,a){return charat(e,0)^45?(((a<<2^charat(e,0))<<2^charat(e,1))<<2^charat(e,2))<<2^charat(e,3):0}function trim$2(e){return e.trim()}function match(e,a){return(e=a.exec(e))?e[0]:e}function replace$1(e,a,i){return e.replace(a,i)}function indexof(e,a){return e.indexOf(a)}function charat(e,a){return e.charCodeAt(a)|0}function substr(e,a,i){return e.slice(a,i)}function strlen(e){return e.length}function sizeof(e){return e.length}function append(e,a){return a.push(e),e}function combine(e,a){return e.map(a).join("")}var line=1,column=1,length$1=0,position=0,character=0,characters="";function node(e,a,i,o,c,d,g){return{value:e,root:a,parent:i,type:o,props:c,children:d,line,column,length:g,return:""}}function copy$4(e,a){return assign(node("",null,null,"",null,null,0),e,{length:-e.length},a)}function char(){return character}function prev(){return character=position>0?charat(characters,--position):0,column--,character===10&&(column=1,line--),character}function next(){return character=position<length$1?charat(characters,position++):0,column++,character===10&&(column=1,line++),character}function peek(){return charat(characters,position)}function caret(){return position}function slice$1(e,a){return substr(characters,e,a)}function token(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc(e){return line=column=1,length$1=strlen(characters=e),position=0,[]}function dealloc(e){return characters="",e}function delimit(e){return trim$2(slice$1(position-1,delimiter(e===91?e+2:e===40?e+1:e)))}function whitespace(e){for(;(character=peek())&&character<33;)next();return token(e)>2||token(character)>3?"":" "}function escaping(e,a){for(;--a&&next()&&!(character<48||character>102||character>57&&character<65||character>70&&character<97););return slice$1(e,caret()+(a<6&&peek()==32&&next()==32))}function delimiter(e){for(;next();)switch(character){case e:return position;case 34:case 39:e!==34&&e!==39&&delimiter(character);break;case 40:e===41&&delimiter(e);break;case 92:next();break}return position}function commenter(e,a){for(;next()&&e+character!==57;)if(e+character===84&&peek()===47)break;return"/*"+slice$1(a,position-1)+"*"+from(e===47?e:next())}function identifier(e){for(;!token(peek());)next();return slice$1(e,position)}function compile(e){return dealloc(parse("",null,null,null,[""],e=alloc(e),0,[0],e))}function parse(e,a,i,o,c,d,g,b,j){for(var $=0,rt=0,_e=g,st=0,ut=0,gt=0,yt=1,Pt=1,wt=1,Ct=0,At="",Tt=c,kt=d,It=o,Lt=At;Pt;)switch(gt=Ct,Ct=next()){case 40:if(gt!=108&&charat(Lt,_e-1)==58){indexof(Lt+=replace$1(delimit(Ct),"&","&\f"),"&\f")!=-1&&(wt=-1);break}case 34:case 39:case 91:Lt+=delimit(Ct);break;case 9:case 10:case 13:case 32:Lt+=whitespace(gt);break;case 92:Lt+=escaping(caret()-1,7);continue;case 47:switch(peek()){case 42:case 47:append(comment(commenter(next(),caret()),a,i),j);break;default:Lt+="/"}break;case 123*yt:b[$++]=strlen(Lt)*wt;case 125*yt:case 59:case 0:switch(Ct){case 0:case 125:Pt=0;case 59+rt:wt==-1&&(Lt=replace$1(Lt,/\f/g,"")),ut>0&&strlen(Lt)-_e&&append(ut>32?declaration(Lt+";",o,i,_e-1):declaration(replace$1(Lt," ","")+";",o,i,_e-2),j);break;case 59:Lt+=";";default:if(append(It=ruleset(Lt,a,i,$,rt,c,b,At,Tt=[],kt=[],_e),d),Ct===123)if(rt===0)parse(Lt,a,It,It,Tt,d,_e,b,kt);else switch(st===99&&charat(Lt,3)===110?100:st){case 100:case 108:case 109:case 115:parse(e,It,It,o&&append(ruleset(e,It,It,0,0,c,b,At,c,Tt=[],_e),kt),c,kt,_e,b,o?Tt:kt);break;default:parse(Lt,It,It,It,[""],kt,0,b,kt)}}$=rt=ut=0,yt=wt=1,At=Lt="",_e=g;break;case 58:_e=1+strlen(Lt),ut=gt;default:if(yt<1){if(Ct==123)--yt;else if(Ct==125&&yt++==0&&prev()==125)continue}switch(Lt+=from(Ct),Ct*yt){case 38:wt=rt>0?1:(Lt+="\f",-1);break;case 44:b[$++]=(strlen(Lt)-1)*wt,wt=1;break;case 64:peek()===45&&(Lt+=delimit(next())),st=peek(),rt=_e=strlen(At=Lt+=identifier(caret())),Ct++;break;case 45:gt===45&&strlen(Lt)==2&&(yt=0)}}return d}function ruleset(e,a,i,o,c,d,g,b,j,$,rt){for(var _e=c-1,st=c===0?d:[""],ut=sizeof(st),gt=0,yt=0,Pt=0;gt<o;++gt)for(var wt=0,Ct=substr(e,_e+1,_e=abs(yt=g[gt])),At=e;wt<ut;++wt)(At=trim$2(yt>0?st[wt]+" "+Ct:replace$1(Ct,/&\f/g,st[wt])))&&(j[Pt++]=At);return node(e,a,i,c===0?RULESET:b,j,$,rt)}function comment(e,a,i){return node(e,a,i,COMMENT,from(char()),substr(e,2,-2),0)}function declaration(e,a,i,o){return node(e,a,i,DECLARATION,substr(e,0,o),substr(e,o+1,-1),o)}function serialize(e,a){for(var i="",o=sizeof(e),c=0;c<o;c++)i+=a(e[c],c,e,a)||"";return i}function stringify$1(e,a,i,o){switch(e.type){case LAYER:if(e.children.length)break;case IMPORT:case DECLARATION:return e.return=e.return||e.value;case COMMENT:return"";case KEYFRAMES:return e.return=e.value+"{"+serialize(e.children,o)+"}";case RULESET:e.value=e.props.join(",")}return strlen(i=serialize(e.children,o))?e.return=e.value+"{"+i+"}":""}function middleware(e){var a=sizeof(e);return function(i,o,c,d){for(var g="",b=0;b<a;b++)g+=e[b](i,o,c,d)||"";return g}}function rulesheet(e){return function(a){a.root||(a=a.return)&&e(a)}}var identifierWithPointTracking=function(a,i,o){for(var c=0,d=0;c=d,d=peek(),c===38&&d===12&&(i[o]=1),!token(d);)next();return slice$1(a,position)},toRules=function(a,i){var o=-1,c=44;do switch(token(c)){case 0:c===38&&peek()===12&&(i[o]=1),a[o]+=identifierWithPointTracking(position-1,i,o);break;case 2:a[o]+=delimit(c);break;case 4:if(c===44){a[++o]=peek()===58?"&\f":"",i[o]=a[o].length;break}default:a[o]+=from(c)}while(c=next());return a},getRules=function(a,i){return dealloc(toRules(alloc(a),i))},fixedElements=new WeakMap,compat=function(a){if(!(a.type!=="rule"||!a.parent||a.length<1)){for(var i=a.value,o=a.parent,c=a.column===o.column&&a.line===o.line;o.type!=="rule";)if(o=o.parent,!o)return;if(!(a.props.length===1&&i.charCodeAt(0)!==58&&!fixedElements.get(o))&&!c){fixedElements.set(a,!0);for(var d=[],g=getRules(i,d),b=o.props,j=0,$=0;j<g.length;j++)for(var rt=0;rt<b.length;rt++,$++)a.props[$]=d[j]?g[j].replace(/&\f/g,b[rt]):b[rt]+" "+g[j]}}},removeLabel=function(a){if(a.type==="decl"){var i=a.value;i.charCodeAt(0)===108&&i.charCodeAt(2)===98&&(a.return="",a.value="")}};function prefix(e,a){switch(hash(e,a)){case 5103:return WEBKIT+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return WEBKIT+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return WEBKIT+e+MOZ+e+MS+e+e;case 6828:case 4268:return WEBKIT+e+MS+e+e;case 6165:return WEBKIT+e+MS+"flex-"+e+e;case 5187:return WEBKIT+e+replace$1(e,/(\w+).+(:[^]+)/,WEBKIT+"box-$1$2"+MS+"flex-$1$2")+e;case 5443:return WEBKIT+e+MS+"flex-item-"+replace$1(e,/flex-|-self/,"")+e;case 4675:return WEBKIT+e+MS+"flex-line-pack"+replace$1(e,/align-content|flex-|-self/,"")+e;case 5548:return WEBKIT+e+MS+replace$1(e,"shrink","negative")+e;case 5292:return WEBKIT+e+MS+replace$1(e,"basis","preferred-size")+e;case 6060:return WEBKIT+"box-"+replace$1(e,"-grow","")+WEBKIT+e+MS+replace$1(e,"grow","positive")+e;case 4554:return WEBKIT+replace$1(e,/([^-])(transform)/g,"$1"+WEBKIT+"$2")+e;case 6187:return replace$1(replace$1(replace$1(e,/(zoom-|grab)/,WEBKIT+"$1"),/(image-set)/,WEBKIT+"$1"),e,"")+e;case 5495:case 3959:return replace$1(e,/(image-set\([^]*)/,WEBKIT+"$1$`$1");case 4968:return replace$1(replace$1(e,/(.+:)(flex-)?(.*)/,WEBKIT+"box-pack:$3"+MS+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+WEBKIT+e+e;case 4095:case 3583:case 4068:case 2532:return replace$1(e,/(.+)-inline(.+)/,WEBKIT+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(strlen(e)-1-a>6)switch(charat(e,a+1)){case 109:if(charat(e,a+4)!==45)break;case 102:return replace$1(e,/(.+:)(.+)-([^]+)/,"$1"+WEBKIT+"$2-$3$1"+MOZ+(charat(e,a+3)==108?"$3":"$2-$3"))+e;case 115:return~indexof(e,"stretch")?prefix(replace$1(e,"stretch","fill-available"),a)+e:e}break;case 4949:if(charat(e,a+1)!==115)break;case 6444:switch(charat(e,strlen(e)-3-(~indexof(e,"!important")&&10))){case 107:return replace$1(e,":",":"+WEBKIT)+e;case 101:return replace$1(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+WEBKIT+(charat(e,14)===45?"inline-":"")+"box$3$1"+WEBKIT+"$2$3$1"+MS+"$2box$3")+e}break;case 5936:switch(charat(e,a+11)){case 114:return WEBKIT+e+MS+replace$1(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return WEBKIT+e+MS+replace$1(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return WEBKIT+e+MS+replace$1(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return WEBKIT+e+MS+e+e}return e}var prefixer=function(a,i,o,c){if(a.length>-1&&!a.return)switch(a.type){case DECLARATION:a.return=prefix(a.value,a.length);break;case KEYFRAMES:return serialize([copy$4(a,{value:replace$1(a.value,"@","@"+WEBKIT)})],c);case RULESET:if(a.length)return combine(a.props,function(d){switch(match(d,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return serialize([copy$4(a,{props:[replace$1(d,/:(read-\w+)/,":"+MOZ+"$1")]})],c);case"::placeholder":return serialize([copy$4(a,{props:[replace$1(d,/:(plac\w+)/,":"+WEBKIT+"input-$1")]}),copy$4(a,{props:[replace$1(d,/:(plac\w+)/,":"+MOZ+"$1")]}),copy$4(a,{props:[replace$1(d,/:(plac\w+)/,MS+"input-$1")]})],c)}return""})}},defaultStylisPlugins=[prefixer],createCache=function(a){var i=a.key;if(i==="css"){var o=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(o,function(yt){var Pt=yt.getAttribute("data-emotion");Pt.indexOf(" ")!==-1&&(document.head.appendChild(yt),yt.setAttribute("data-s",""))})}var c=a.stylisPlugins||defaultStylisPlugins,d={},g,b=[];g=a.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+i+' "]'),function(yt){for(var Pt=yt.getAttribute("data-emotion").split(" "),wt=1;wt<Pt.length;wt++)d[Pt[wt]]=!0;b.push(yt)});var j,$=[compat,removeLabel];{var rt,_e=[stringify$1,rulesheet(function(yt){rt.insert(yt)})],st=middleware($.concat(c,_e)),ut=function(Pt){return serialize(compile(Pt),st)};j=function(Pt,wt,Ct,At){rt=Ct,ut(Pt?Pt+"{"+wt.styles+"}":wt.styles),At&&(gt.inserted[wt.name]=!0)}}var gt={key:i,sheet:new StyleSheet({key:i,container:g,nonce:a.nonce,speedy:a.speedy,prepend:a.prepend,insertionPoint:a.insertionPoint}),nonce:a.nonce,inserted:d,registered:{},insert:j};return gt.sheet.hydrate(b),gt},isBrowser=!0;function getRegisteredStyles(e,a,i){var o="";return i.split(" ").forEach(function(c){e[c]!==void 0?a.push(e[c]+";"):o+=c+" "}),o}var registerStyles=function(a,i,o){var c=a.key+"-"+i.name;(o===!1||isBrowser===!1)&&a.registered[c]===void 0&&(a.registered[c]=i.styles)},insertStyles=function(a,i,o){registerStyles(a,i,o);var c=a.key+"-"+i.name;if(a.inserted[i.name]===void 0){var d=i;do a.insert(i===d?"."+c:"",d,a.sheet,!0),d=d.next;while(d!==void 0)}};function murmur2(e){for(var a=0,i,o=0,c=e.length;c>=4;++o,c-=4)i=e.charCodeAt(o)&255|(e.charCodeAt(++o)&255)<<8|(e.charCodeAt(++o)&255)<<16|(e.charCodeAt(++o)&255)<<24,i=(i&65535)*1540483477+((i>>>16)*59797<<16),i^=i>>>24,a=(i&65535)*1540483477+((i>>>16)*59797<<16)^(a&65535)*1540483477+((a>>>16)*59797<<16);switch(c){case 3:a^=(e.charCodeAt(o+2)&255)<<16;case 2:a^=(e.charCodeAt(o+1)&255)<<8;case 1:a^=e.charCodeAt(o)&255,a=(a&65535)*1540483477+((a>>>16)*59797<<16)}return a^=a>>>13,a=(a&65535)*1540483477+((a>>>16)*59797<<16),((a^a>>>15)>>>0).toString(36)}var unitlessKeys={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},hyphenateRegex=/[A-Z]|^ms/g,animationRegex=/_EMO_([^_]+?)_([^]*?)_EMO_/g,isCustomProperty=function(a){return a.charCodeAt(1)===45},isProcessableValue=function(a){return a!=null&&typeof a!="boolean"},processStyleName=memoize$1(function(e){return isCustomProperty(e)?e:e.replace(hyphenateRegex,"-$&").toLowerCase()}),processStyleValue=function(a,i){switch(a){case"animation":case"animationName":if(typeof i=="string")return i.replace(animationRegex,function(o,c,d){return cursor={name:c,styles:d,next:cursor},c})}return unitlessKeys[a]!==1&&!isCustomProperty(a)&&typeof i=="number"&&i!==0?i+"px":i},noComponentSelectorMessage="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function handleInterpolation(e,a,i){if(i==null)return"";if(i.__emotion_styles!==void 0)return i;switch(typeof i){case"boolean":return"";case"object":{if(i.anim===1)return cursor={name:i.name,styles:i.styles,next:cursor},i.name;if(i.styles!==void 0){var o=i.next;if(o!==void 0)for(;o!==void 0;)cursor={name:o.name,styles:o.styles,next:cursor},o=o.next;var c=i.styles+";";return c}return createStringFromObject(e,a,i)}case"function":{if(e!==void 0){var d=cursor,g=i(e);return cursor=d,handleInterpolation(e,a,g)}break}}if(a==null)return i;var b=a[i];return b!==void 0?b:i}function createStringFromObject(e,a,i){var o="";if(Array.isArray(i))for(var c=0;c<i.length;c++)o+=handleInterpolation(e,a,i[c])+";";else for(var d in i){var g=i[d];if(typeof g!="object")a!=null&&a[g]!==void 0?o+=d+"{"+a[g]+"}":isProcessableValue(g)&&(o+=processStyleName(d)+":"+processStyleValue(d,g)+";");else if(Array.isArray(g)&&typeof g[0]=="string"&&(a==null||a[g[0]]===void 0))for(var b=0;b<g.length;b++)isProcessableValue(g[b])&&(o+=processStyleName(d)+":"+processStyleValue(d,g[b])+";");else{var j=handleInterpolation(e,a,g);switch(d){case"animation":case"animationName":{o+=processStyleName(d)+":"+j+";";break}default:o+=d+"{"+j+"}"}}}return o}var labelPattern=/label:\s*([^\s;\n{]+)\s*(;|$)/g,cursor,serializeStyles=function(a,i,o){if(a.length===1&&typeof a[0]=="object"&&a[0]!==null&&a[0].styles!==void 0)return a[0];var c=!0,d="";cursor=void 0;var g=a[0];g==null||g.raw===void 0?(c=!1,d+=handleInterpolation(o,i,g)):d+=g[0];for(var b=1;b<a.length;b++)d+=handleInterpolation(o,i,a[b]),c&&(d+=g[b]);labelPattern.lastIndex=0;for(var j="",$;($=labelPattern.exec(d))!==null;)j+="-"+$[1];var rt=murmur2(d)+j;return{name:rt,styles:d,next:cursor}},syncFallback=function(a){return a()},useInsertionEffect=React$2.useInsertionEffect?React$2.useInsertionEffect:!1,useInsertionEffectAlwaysWithSyncFallback=useInsertionEffect||syncFallback,EmotionCacheContext=reactExports$1.createContext(typeof HTMLElement<"u"?createCache({key:"css"}):null);EmotionCacheContext.Provider;var withEmotionCache=function(a){return reactExports$1.forwardRef(function(i,o){var c=reactExports$1.useContext(EmotionCacheContext);return a(i,c,o)})},ThemeContext=reactExports$1.createContext({}),testOmitPropsOnStringTag=isPropValid,testOmitPropsOnComponent=function(a){return a!=="theme"},getDefaultShouldForwardProp=function(a){return typeof a=="string"&&a.charCodeAt(0)>96?testOmitPropsOnStringTag:testOmitPropsOnComponent},composeShouldForwardProps=function(a,i,o){var c;if(i){var d=i.shouldForwardProp;c=a.__emotion_forwardProp&&d?function(g){return a.__emotion_forwardProp(g)&&d(g)}:d}return typeof c!="function"&&o&&(c=a.__emotion_forwardProp),c},Insertion=function(a){var i=a.cache,o=a.serialized,c=a.isStringTag;return registerStyles(i,o,c),useInsertionEffectAlwaysWithSyncFallback(function(){return insertStyles(i,o,c)}),null},createStyled$1=function e(a,i){var o=a.__emotion_real===a,c=o&&a.__emotion_base||a,d,g;i!==void 0&&(d=i.label,g=i.target);var b=composeShouldForwardProps(a,i,o),j=b||getDefaultShouldForwardProp(c),$=!j("as");return function(){var rt=arguments,_e=o&&a.__emotion_styles!==void 0?a.__emotion_styles.slice(0):[];if(d!==void 0&&_e.push("label:"+d+";"),rt[0]==null||rt[0].raw===void 0)_e.push.apply(_e,rt);else{_e.push(rt[0][0]);for(var st=rt.length,ut=1;ut<st;ut++)_e.push(rt[ut],rt[0][ut])}var gt=withEmotionCache(function(yt,Pt,wt){var Ct=$&&yt.as||c,At="",Tt=[],kt=yt;if(yt.theme==null){kt={};for(var It in yt)kt[It]=yt[It];kt.theme=reactExports$1.useContext(ThemeContext)}typeof yt.className=="string"?At=getRegisteredStyles(Pt.registered,Tt,yt.className):yt.className!=null&&(At=yt.className+" ");var Lt=serializeStyles(_e.concat(Tt),Pt.registered,kt);At+=Pt.key+"-"+Lt.name,g!==void 0&&(At+=" "+g);var Ft=$&&b===void 0?getDefaultShouldForwardProp(Ct):j,Nt={};for(var Ht in yt)$&&Ht==="as"||Ft(Ht)&&(Nt[Ht]=yt[Ht]);return Nt.className=At,Nt.ref=wt,reactExports$1.createElement(reactExports$1.Fragment,null,reactExports$1.createElement(Insertion,{cache:Pt,serialized:Lt,isStringTag:typeof Ct=="string"}),reactExports$1.createElement(Ct,Nt))});return gt.displayName=d!==void 0?d:"Styled("+(typeof c=="string"?c:c.displayName||c.name||"Component")+")",gt.defaultProps=a.defaultProps,gt.__emotion_real=gt,gt.__emotion_base=c,gt.__emotion_styles=_e,gt.__emotion_forwardProp=b,Object.defineProperty(gt,"toString",{value:function(){return"."+g}}),gt.withComponent=function(yt,Pt){return e(yt,_extends$3({},i,Pt,{shouldForwardProp:composeShouldForwardProps(gt,Pt,!0)})).apply(void 0,_e)},gt}},tags=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],newStyled=createStyled$1.bind();tags.forEach(function(e){newStyled[e]=newStyled(e)});function styled$1(e,a){return newStyled(e,a)}const internal_processStyles=(e,a)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=a(e.__emotion_styles))},_excluded$f=["values","unit","step"],sortBreakpointsValues=e=>{const a=Object.keys(e).map(i=>({key:i,val:e[i]}))||[];return a.sort((i,o)=>i.val-o.val),a.reduce((i,o)=>_extends$3({},i,{[o.key]:o.val}),{})};function createBreakpoints(e){const{values:a={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:i="px",step:o=5}=e,c=_objectWithoutPropertiesLoose$2(e,_excluded$f),d=sortBreakpointsValues(a),g=Object.keys(d);function b(st){return`@media (min-width:${typeof a[st]=="number"?a[st]:st}${i})`}function j(st){return`@media (max-width:${(typeof a[st]=="number"?a[st]:st)-o/100}${i})`}function $(st,ut){const gt=g.indexOf(ut);return`@media (min-width:${typeof a[st]=="number"?a[st]:st}${i}) and (max-width:${(gt!==-1&&typeof a[g[gt]]=="number"?a[g[gt]]:ut)-o/100}${i})`}function rt(st){return g.indexOf(st)+1<g.length?$(st,g[g.indexOf(st)+1]):b(st)}function _e(st){const ut=g.indexOf(st);return ut===0?b(g[1]):ut===g.length-1?j(g[ut]):$(st,g[g.indexOf(st)+1]).replace("@media","@media not all and")}return _extends$3({keys:g,values:d,up:b,down:j,between:$,only:rt,not:_e,unit:i},c)}const shape={borderRadius:4},shape$1=shape;function merge$2(e,a){return a?deepmerge(e,a,{clone:!1}):e}const values={xs:0,sm:600,md:900,lg:1200,xl:1536},defaultBreakpoints={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${values[e]}px)`};function handleBreakpoints(e,a,i){const o=e.theme||{};if(Array.isArray(a)){const d=o.breakpoints||defaultBreakpoints;return a.reduce((g,b,j)=>(g[d.up(d.keys[j])]=i(a[j]),g),{})}if(typeof a=="object"){const d=o.breakpoints||defaultBreakpoints;return Object.keys(a).reduce((g,b)=>{if(Object.keys(d.values||values).indexOf(b)!==-1){const j=d.up(b);g[j]=i(a[b],b)}else{const j=b;g[j]=a[j]}return g},{})}return i(a)}function createEmptyBreakpointObject(e={}){var a;return((a=e.keys)==null?void 0:a.reduce((o,c)=>{const d=e.up(c);return o[d]={},o},{}))||{}}function removeUnusedBreakpoints(e,a){return e.reduce((i,o)=>{const c=i[o];return(!c||Object.keys(c).length===0)&&delete i[o],i},a)}function getPath(e,a,i=!0){if(!a||typeof a!="string")return null;if(e&&e.vars&&i){const o=`vars.${a}`.split(".").reduce((c,d)=>c&&c[d]?c[d]:null,e);if(o!=null)return o}return a.split(".").reduce((o,c)=>o&&o[c]!=null?o[c]:null,e)}function getStyleValue(e,a,i,o=i){let c;return typeof e=="function"?c=e(i):Array.isArray(e)?c=e[i]||o:c=getPath(e,i)||o,a&&(c=a(c,o,e)),c}function style$1(e){const{prop:a,cssProperty:i=e.prop,themeKey:o,transform:c}=e,d=g=>{if(g[a]==null)return null;const b=g[a],j=g.theme,$=getPath(j,o)||{};return handleBreakpoints(g,b,_e=>{let st=getStyleValue($,c,_e);return _e===st&&typeof _e=="string"&&(st=getStyleValue($,c,`${a}${_e==="default"?"":capitalize$1(_e)}`,_e)),i===!1?st:{[i]:st}})};return d.propTypes={},d.filterProps=[a],d}function memoize(e){const a={};return i=>(a[i]===void 0&&(a[i]=e(i)),a[i])}const properties={m:"margin",p:"padding"},directions={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},aliases={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},getCssProperties=memoize(e=>{if(e.length>2)if(aliases[e])e=aliases[e];else return[e];const[a,i]=e.split(""),o=properties[a],c=directions[i]||"";return Array.isArray(c)?c.map(d=>o+d):[o+c]}),marginKeys=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],paddingKeys=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...marginKeys,...paddingKeys];function createUnaryUnit(e,a,i,o){var c;const d=(c=getPath(e,a,!1))!=null?c:i;return typeof d=="number"?g=>typeof g=="string"?g:d*g:Array.isArray(d)?g=>typeof g=="string"?g:d[g]:typeof d=="function"?d:()=>{}}function createUnarySpacing(e){return createUnaryUnit(e,"spacing",8)}function getValue$1(e,a){if(typeof a=="string"||a==null)return a;const i=Math.abs(a),o=e(i);return a>=0?o:typeof o=="number"?-o:`-${o}`}function getStyleFromPropValue(e,a){return i=>e.reduce((o,c)=>(o[c]=getValue$1(a,i),o),{})}function resolveCssProperty(e,a,i,o){if(a.indexOf(i)===-1)return null;const c=getCssProperties(i),d=getStyleFromPropValue(c,o),g=e[i];return handleBreakpoints(e,g,d)}function style(e,a){const i=createUnarySpacing(e.theme);return Object.keys(e).map(o=>resolveCssProperty(e,a,o,i)).reduce(merge$2,{})}function margin(e){return style(e,marginKeys)}margin.propTypes={};margin.filterProps=marginKeys;function padding(e){return style(e,paddingKeys)}padding.propTypes={};padding.filterProps=paddingKeys;function createSpacing(e=8){if(e.mui)return e;const a=createUnarySpacing({spacing:e}),i=(...o)=>(o.length===0?[1]:o).map(d=>{const g=a(d);return typeof g=="number"?`${g}px`:g}).join(" ");return i.mui=!0,i}function compose(...e){const a=e.reduce((o,c)=>(c.filterProps.forEach(d=>{o[d]=c}),o),{}),i=o=>Object.keys(o).reduce((c,d)=>a[d]?merge$2(c,a[d](o)):c,{});return i.propTypes={},i.filterProps=e.reduce((o,c)=>o.concat(c.filterProps),[]),i}function borderTransform(e){return typeof e!="number"?e:`${e}px solid`}function createBorderStyle(e,a){return style$1({prop:e,themeKey:"borders",transform:a})}const border=createBorderStyle("border",borderTransform),borderTop=createBorderStyle("borderTop",borderTransform),borderRight=createBorderStyle("borderRight",borderTransform),borderBottom=createBorderStyle("borderBottom",borderTransform),borderLeft=createBorderStyle("borderLeft",borderTransform),borderColor=createBorderStyle("borderColor"),borderTopColor=createBorderStyle("borderTopColor"),borderRightColor=createBorderStyle("borderRightColor"),borderBottomColor=createBorderStyle("borderBottomColor"),borderLeftColor=createBorderStyle("borderLeftColor"),outline=createBorderStyle("outline",borderTransform),outlineColor=createBorderStyle("outlineColor"),borderRadius=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const a=createUnaryUnit(e.theme,"shape.borderRadius",4),i=o=>({borderRadius:getValue$1(a,o)});return handleBreakpoints(e,e.borderRadius,i)}return null};borderRadius.propTypes={};borderRadius.filterProps=["borderRadius"];compose(border,borderTop,borderRight,borderBottom,borderLeft,borderColor,borderTopColor,borderRightColor,borderBottomColor,borderLeftColor,borderRadius,outline,outlineColor);const gap=e=>{if(e.gap!==void 0&&e.gap!==null){const a=createUnaryUnit(e.theme,"spacing",8),i=o=>({gap:getValue$1(a,o)});return handleBreakpoints(e,e.gap,i)}return null};gap.propTypes={};gap.filterProps=["gap"];const columnGap=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const a=createUnaryUnit(e.theme,"spacing",8),i=o=>({columnGap:getValue$1(a,o)});return handleBreakpoints(e,e.columnGap,i)}return null};columnGap.propTypes={};columnGap.filterProps=["columnGap"];const rowGap=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const a=createUnaryUnit(e.theme,"spacing",8),i=o=>({rowGap:getValue$1(a,o)});return handleBreakpoints(e,e.rowGap,i)}return null};rowGap.propTypes={};rowGap.filterProps=["rowGap"];const gridColumn=style$1({prop:"gridColumn"}),gridRow=style$1({prop:"gridRow"}),gridAutoFlow=style$1({prop:"gridAutoFlow"}),gridAutoColumns=style$1({prop:"gridAutoColumns"}),gridAutoRows=style$1({prop:"gridAutoRows"}),gridTemplateColumns=style$1({prop:"gridTemplateColumns"}),gridTemplateRows=style$1({prop:"gridTemplateRows"}),gridTemplateAreas=style$1({prop:"gridTemplateAreas"}),gridArea=style$1({prop:"gridArea"});compose(gap,columnGap,rowGap,gridColumn,gridRow,gridAutoFlow,gridAutoColumns,gridAutoRows,gridTemplateColumns,gridTemplateRows,gridTemplateAreas,gridArea);function paletteTransform(e,a){return a==="grey"?a:e}const color$1=style$1({prop:"color",themeKey:"palette",transform:paletteTransform}),bgcolor=style$1({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:paletteTransform}),backgroundColor=style$1({prop:"backgroundColor",themeKey:"palette",transform:paletteTransform});compose(color$1,bgcolor,backgroundColor);function sizingTransform(e){return e<=1&&e!==0?`${e*100}%`:e}const width$1=style$1({prop:"width",transform:sizingTransform}),maxWidth=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const a=i=>{var o,c;const d=((o=e.theme)==null||(o=o.breakpoints)==null||(o=o.values)==null?void 0:o[i])||values[i];return d?((c=e.theme)==null||(c=c.breakpoints)==null?void 0:c.unit)!=="px"?{maxWidth:`${d}${e.theme.breakpoints.unit}`}:{maxWidth:d}:{maxWidth:sizingTransform(i)}};return handleBreakpoints(e,e.maxWidth,a)}return null};maxWidth.filterProps=["maxWidth"];const minWidth=style$1({prop:"minWidth",transform:sizingTransform}),height$1=style$1({prop:"height",transform:sizingTransform}),maxHeight=style$1({prop:"maxHeight",transform:sizingTransform}),minHeight=style$1({prop:"minHeight",transform:sizingTransform});style$1({prop:"size",cssProperty:"width",transform:sizingTransform});style$1({prop:"size",cssProperty:"height",transform:sizingTransform});const boxSizing=style$1({prop:"boxSizing"});compose(width$1,maxWidth,minWidth,height$1,maxHeight,minHeight,boxSizing);const defaultSxConfig={border:{themeKey:"borders",transform:borderTransform},borderTop:{themeKey:"borders",transform:borderTransform},borderRight:{themeKey:"borders",transform:borderTransform},borderBottom:{themeKey:"borders",transform:borderTransform},borderLeft:{themeKey:"borders",transform:borderTransform},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:borderTransform},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:borderRadius},color:{themeKey:"palette",transform:paletteTransform},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:paletteTransform},backgroundColor:{themeKey:"palette",transform:paletteTransform},p:{style:padding},pt:{style:padding},pr:{style:padding},pb:{style:padding},pl:{style:padding},px:{style:padding},py:{style:padding},padding:{style:padding},paddingTop:{style:padding},paddingRight:{style:padding},paddingBottom:{style:padding},paddingLeft:{style:padding},paddingX:{style:padding},paddingY:{style:padding},paddingInline:{style:padding},paddingInlineStart:{style:padding},paddingInlineEnd:{style:padding},paddingBlock:{style:padding},paddingBlockStart:{style:padding},paddingBlockEnd:{style:padding},m:{style:margin},mt:{style:margin},mr:{style:margin},mb:{style:margin},ml:{style:margin},mx:{style:margin},my:{style:margin},margin:{style:margin},marginTop:{style:margin},marginRight:{style:margin},marginBottom:{style:margin},marginLeft:{style:margin},marginX:{style:margin},marginY:{style:margin},marginInline:{style:margin},marginInlineStart:{style:margin},marginInlineEnd:{style:margin},marginBlock:{style:margin},marginBlockStart:{style:margin},marginBlockEnd:{style:margin},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:gap},rowGap:{style:rowGap},columnGap:{style:columnGap},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:sizingTransform},maxWidth:{style:maxWidth},minWidth:{transform:sizingTransform},height:{transform:sizingTransform},maxHeight:{transform:sizingTransform},minHeight:{transform:sizingTransform},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},defaultSxConfig$1=defaultSxConfig;function objectsHaveSameKeys(...e){const a=e.reduce((o,c)=>o.concat(Object.keys(c)),[]),i=new Set(a);return e.every(o=>i.size===Object.keys(o).length)}function callIfFn(e,a){return typeof e=="function"?e(a):e}function unstable_createStyleFunctionSx(){function e(i,o,c,d){const g={[i]:o,theme:c},b=d[i];if(!b)return{[i]:o};const{cssProperty:j=i,themeKey:$,transform:rt,style:_e}=b;if(o==null)return null;if($==="typography"&&o==="inherit")return{[i]:o};const st=getPath(c,$)||{};return _e?_e(g):handleBreakpoints(g,o,gt=>{let yt=getStyleValue(st,rt,gt);return gt===yt&&typeof gt=="string"&&(yt=getStyleValue(st,rt,`${i}${gt==="default"?"":capitalize$1(gt)}`,gt)),j===!1?yt:{[j]:yt}})}function a(i){var o;const{sx:c,theme:d={}}=i||{};if(!c)return null;const g=(o=d.unstable_sxConfig)!=null?o:defaultSxConfig$1;function b(j){let $=j;if(typeof j=="function")$=j(d);else if(typeof j!="object")return j;if(!$)return null;const rt=createEmptyBreakpointObject(d.breakpoints),_e=Object.keys(rt);let st=rt;return Object.keys($).forEach(ut=>{const gt=callIfFn($[ut],d);if(gt!=null)if(typeof gt=="object")if(g[ut])st=merge$2(st,e(ut,gt,d,g));else{const yt=handleBreakpoints({theme:d},gt,Pt=>({[ut]:Pt}));objectsHaveSameKeys(yt,gt)?st[ut]=a({sx:gt,theme:d}):st=merge$2(st,yt)}else st=merge$2(st,e(ut,gt,d,g))}),removeUnusedBreakpoints(_e,st)}return Array.isArray(c)?c.map(b):b(c)}return a}const styleFunctionSx=unstable_createStyleFunctionSx();styleFunctionSx.filterProps=["sx"];const _excluded$e=["breakpoints","palette","spacing","shape"];function createTheme$1(e={},...a){const{breakpoints:i={},palette:o={},spacing:c,shape:d={}}=e,g=_objectWithoutPropertiesLoose$2(e,_excluded$e),b=createBreakpoints(i),j=createSpacing(c);let $=deepmerge({breakpoints:b,direction:"ltr",components:{},palette:_extends$3({mode:"light"},o),spacing:j,shape:_extends$3({},shape$1,d)},g);return $=a.reduce((rt,_e)=>deepmerge(rt,_e),$),$.unstable_sxConfig=_extends$3({},defaultSxConfig$1,g==null?void 0:g.unstable_sxConfig),$.unstable_sx=function(_e){return styleFunctionSx({sx:_e,theme:this})},$}function isObjectEmpty(e){return Object.keys(e).length===0}function useTheme$2(e=null){const a=reactExports$1.useContext(ThemeContext);return!a||isObjectEmpty(a)?e:a}const systemDefaultTheme$1=createTheme$1();function useTheme$1(e=systemDefaultTheme$1){return useTheme$2(e)}const _excluded$d=["variant"];function isEmpty$1(e){return e.length===0}function propsToClassKey(e){const{variant:a}=e,i=_objectWithoutPropertiesLoose$2(e,_excluded$d);let o=a||"";return Object.keys(i).sort().forEach(c=>{c==="color"?o+=isEmpty$1(o)?e[c]:capitalize$1(e[c]):o+=`${isEmpty$1(o)?c:capitalize$1(c)}${capitalize$1(e[c].toString())}`}),o}const _excluded$c=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function isEmpty(e){return Object.keys(e).length===0}function isStringTag(e){return typeof e=="string"&&e.charCodeAt(0)>96}const getStyleOverrides=(e,a)=>a.components&&a.components[e]&&a.components[e].styleOverrides?a.components[e].styleOverrides:null,transformVariants=e=>{let a=0;const i={};return e&&e.forEach(o=>{let c="";typeof o.props=="function"?(c=`callback${a}`,a+=1):c=propsToClassKey(o.props),i[c]=o.style}),i},getVariantStyles=(e,a)=>{let i=[];return a&&a.components&&a.components[e]&&a.components[e].variants&&(i=a.components[e].variants),transformVariants(i)},variantsResolver=(e,a,i)=>{const{ownerState:o={}}=e,c=[];let d=0;return i&&i.forEach(g=>{let b=!0;if(typeof g.props=="function"){const j=_extends$3({},e,o);b=g.props(j)}else Object.keys(g.props).forEach(j=>{o[j]!==g.props[j]&&e[j]!==g.props[j]&&(b=!1)});b&&(typeof g.props=="function"?c.push(a[`callback${d}`]):c.push(a[propsToClassKey(g.props)])),typeof g.props=="function"&&(d+=1)}),c},themeVariantsResolver=(e,a,i,o)=>{var c;const d=i==null||(c=i.components)==null||(c=c[o])==null?void 0:c.variants;return variantsResolver(e,a,d)};function shouldForwardProp(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const systemDefaultTheme=createTheme$1(),lowercaseFirstLetter=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function resolveTheme({defaultTheme:e,theme:a,themeId:i}){return isEmpty(a)?e:a[i]||a}function defaultOverridesResolver(e){return e?(a,i)=>i[e]:null}const muiStyledFunctionResolver=({styledArg:e,props:a,defaultTheme:i,themeId:o})=>{const c=e(_extends$3({},a,{theme:resolveTheme(_extends$3({},a,{defaultTheme:i,themeId:o}))}));let d;if(c&&c.variants&&(d=c.variants,delete c.variants),d){const g=variantsResolver(a,transformVariants(d),d);return[c,...g]}return c};function createStyled(e={}){const{themeId:a,defaultTheme:i=systemDefaultTheme,rootShouldForwardProp:o=shouldForwardProp,slotShouldForwardProp:c=shouldForwardProp}=e,d=g=>styleFunctionSx(_extends$3({},g,{theme:resolveTheme(_extends$3({},g,{defaultTheme:i,themeId:a}))}));return d.__mui_systemSx=!0,(g,b={})=>{internal_processStyles(g,Tt=>Tt.filter(kt=>!(kt!=null&&kt.__mui_systemSx)));const{name:j,slot:$,skipVariantsResolver:rt,skipSx:_e,overridesResolver:st=defaultOverridesResolver(lowercaseFirstLetter($))}=b,ut=_objectWithoutPropertiesLoose$2(b,_excluded$c),gt=rt!==void 0?rt:$&&$!=="Root"&&$!=="root"||!1,yt=_e||!1;let Pt,wt=shouldForwardProp;$==="Root"||$==="root"?wt=o:$?wt=c:isStringTag(g)&&(wt=void 0);const Ct=styled$1(g,_extends$3({shouldForwardProp:wt,label:Pt},ut)),At=(Tt,...kt)=>{const It=kt?kt.map(Ht=>{if(typeof Ht=="function"&&Ht.__emotion_real!==Ht)return Gr=>muiStyledFunctionResolver({styledArg:Ht,props:Gr,defaultTheme:i,themeId:a});if(isPlainObject$1(Ht)){let Gr=Ht,hs;return Ht&&Ht.variants&&(hs=Ht.variants,delete Gr.variants,Gr=_s=>{let hn=Ht;return variantsResolver(_s,transformVariants(hs),hs).forEach(ds=>{hn=deepmerge(hn,ds)}),hn}),Gr}return Ht}):[];let Lt=Tt;if(isPlainObject$1(Tt)){let Ht;Tt&&Tt.variants&&(Ht=Tt.variants,delete Lt.variants,Lt=Gr=>{let hs=Tt;return variantsResolver(Gr,transformVariants(Ht),Ht).forEach(hn=>{hs=deepmerge(hs,hn)}),hs})}else typeof Tt=="function"&&Tt.__emotion_real!==Tt&&(Lt=Ht=>muiStyledFunctionResolver({styledArg:Tt,props:Ht,defaultTheme:i,themeId:a}));j&&st&&It.push(Ht=>{const Gr=resolveTheme(_extends$3({},Ht,{defaultTheme:i,themeId:a})),hs=getStyleOverrides(j,Gr);if(hs){const _s={};return Object.entries(hs).forEach(([hn,Qn])=>{_s[hn]=typeof Qn=="function"?Qn(_extends$3({},Ht,{theme:Gr})):Qn}),st(Ht,_s)}return null}),j&&!gt&&It.push(Ht=>{const Gr=resolveTheme(_extends$3({},Ht,{defaultTheme:i,themeId:a}));return themeVariantsResolver(Ht,getVariantStyles(j,Gr),Gr,j)}),yt||It.push(d);const Ft=It.length-kt.length;if(Array.isArray(Tt)&&Ft>0){const Ht=new Array(Ft).fill("");Lt=[...Tt,...Ht],Lt.raw=[...Tt.raw,...Ht]}const Nt=Ct(Lt,...It);return g.muiName&&(Nt.muiName=g.muiName),Nt};return Ct.withConfig&&(At.withConfig=Ct.withConfig),At}}function getThemeProps(e){const{theme:a,name:i,props:o}=e;return!a||!a.components||!a.components[i]||!a.components[i].defaultProps?o:resolveProps(a.components[i].defaultProps,o)}function useThemeProps$1({props:e,name:a,defaultTheme:i,themeId:o}){let c=useTheme$1(i);return o&&(c=c[o]||c),getThemeProps({theme:c,name:a,props:e})}function clampWrapper(e,a=0,i=1){return clamp$1(e,a,i)}function hexToRgb$1(e){e=e.slice(1);const a=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let i=e.match(a);return i&&i[0].length===1&&(i=i.map(o=>o+o)),i?`rgb${i.length===4?"a":""}(${i.map((o,c)=>c<3?parseInt(o,16):Math.round(parseInt(o,16)/255*1e3)/1e3).join(", ")})`:""}function decomposeColor(e){if(e.type)return e;if(e.charAt(0)==="#")return decomposeColor(hexToRgb$1(e));const a=e.indexOf("("),i=e.substring(0,a);if(["rgb","rgba","hsl","hsla","color"].indexOf(i)===-1)throw new Error(formatMuiErrorMessage(9,e));let o=e.substring(a+1,e.length-1),c;if(i==="color"){if(o=o.split(" "),c=o.shift(),o.length===4&&o[3].charAt(0)==="/"&&(o[3]=o[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(c)===-1)throw new Error(formatMuiErrorMessage(10,c))}else o=o.split(",");return o=o.map(d=>parseFloat(d)),{type:i,values:o,colorSpace:c}}function recomposeColor(e){const{type:a,colorSpace:i}=e;let{values:o}=e;return a.indexOf("rgb")!==-1?o=o.map((c,d)=>d<3?parseInt(c,10):c):a.indexOf("hsl")!==-1&&(o[1]=`${o[1]}%`,o[2]=`${o[2]}%`),a.indexOf("color")!==-1?o=`${i} ${o.join(" ")}`:o=`${o.join(", ")}`,`${a}(${o})`}function hslToRgb$1(e){e=decomposeColor(e);const{values:a}=e,i=a[0],o=a[1]/100,c=a[2]/100,d=o*Math.min(c,1-c),g=($,rt=($+i/30)%12)=>c-d*Math.max(Math.min(rt-3,9-rt,1),-1);let b="rgb";const j=[Math.round(g(0)*255),Math.round(g(8)*255),Math.round(g(4)*255)];return e.type==="hsla"&&(b+="a",j.push(a[3])),recomposeColor({type:b,values:j})}function getLuminance(e){e=decomposeColor(e);let a=e.type==="hsl"||e.type==="hsla"?decomposeColor(hslToRgb$1(e)).values:e.values;return a=a.map(i=>(e.type!=="color"&&(i/=255),i<=.03928?i/12.92:((i+.055)/1.055)**2.4)),Number((.2126*a[0]+.7152*a[1]+.0722*a[2]).toFixed(3))}function getContrastRatio(e,a){const i=getLuminance(e),o=getLuminance(a);return(Math.max(i,o)+.05)/(Math.min(i,o)+.05)}function darken(e,a){if(e=decomposeColor(e),a=clampWrapper(a),e.type.indexOf("hsl")!==-1)e.values[2]*=1-a;else if(e.type.indexOf("rgb")!==-1||e.type.indexOf("color")!==-1)for(let i=0;i<3;i+=1)e.values[i]*=1-a;return recomposeColor(e)}function lighten$1(e,a){if(e=decomposeColor(e),a=clampWrapper(a),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*a;else if(e.type.indexOf("rgb")!==-1)for(let i=0;i<3;i+=1)e.values[i]+=(255-e.values[i])*a;else if(e.type.indexOf("color")!==-1)for(let i=0;i<3;i+=1)e.values[i]+=(1-e.values[i])*a;return recomposeColor(e)}function createMixins(e,a){return _extends$3({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},a)}const common={black:"#000",white:"#fff"},common$1=common,grey={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},grey$1=grey,purple={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},purple$1=purple,red={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},red$1=red,orange={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},orange$1=orange,blue={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},blue$1=blue,lightBlue={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},lightBlue$1=lightBlue,green={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},green$1=green,_excluded$b=["mode","contrastThreshold","tonalOffset"],light={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:common$1.white,default:common$1.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},dark={text:{primary:common$1.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:common$1.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function addLightOrDark(e,a,i,o){const c=o.light||o,d=o.dark||o*1.5;e[a]||(e.hasOwnProperty(i)?e[a]=e[i]:a==="light"?e.light=lighten$1(e.main,c):a==="dark"&&(e.dark=darken(e.main,d)))}function getDefaultPrimary(e="light"){return e==="dark"?{main:blue$1[200],light:blue$1[50],dark:blue$1[400]}:{main:blue$1[700],light:blue$1[400],dark:blue$1[800]}}function getDefaultSecondary(e="light"){return e==="dark"?{main:purple$1[200],light:purple$1[50],dark:purple$1[400]}:{main:purple$1[500],light:purple$1[300],dark:purple$1[700]}}function getDefaultError(e="light"){return e==="dark"?{main:red$1[500],light:red$1[300],dark:red$1[700]}:{main:red$1[700],light:red$1[400],dark:red$1[800]}}function getDefaultInfo(e="light"){return e==="dark"?{main:lightBlue$1[400],light:lightBlue$1[300],dark:lightBlue$1[700]}:{main:lightBlue$1[700],light:lightBlue$1[500],dark:lightBlue$1[900]}}function getDefaultSuccess(e="light"){return e==="dark"?{main:green$1[400],light:green$1[300],dark:green$1[700]}:{main:green$1[800],light:green$1[500],dark:green$1[900]}}function getDefaultWarning(e="light"){return e==="dark"?{main:orange$1[400],light:orange$1[300],dark:orange$1[700]}:{main:"#ed6c02",light:orange$1[500],dark:orange$1[900]}}function createPalette(e){const{mode:a="light",contrastThreshold:i=3,tonalOffset:o=.2}=e,c=_objectWithoutPropertiesLoose$2(e,_excluded$b),d=e.primary||getDefaultPrimary(a),g=e.secondary||getDefaultSecondary(a),b=e.error||getDefaultError(a),j=e.info||getDefaultInfo(a),$=e.success||getDefaultSuccess(a),rt=e.warning||getDefaultWarning(a);function _e(yt){return getContrastRatio(yt,dark.text.primary)>=i?dark.text.primary:light.text.primary}const st=({color:yt,name:Pt,mainShade:wt=500,lightShade:Ct=300,darkShade:At=700})=>{if(yt=_extends$3({},yt),!yt.main&&yt[wt]&&(yt.main=yt[wt]),!yt.hasOwnProperty("main"))throw new Error(formatMuiErrorMessage(11,Pt?` (${Pt})`:"",wt));if(typeof yt.main!="string")throw new Error(formatMuiErrorMessage(12,Pt?` (${Pt})`:"",JSON.stringify(yt.main)));return addLightOrDark(yt,"light",Ct,o),addLightOrDark(yt,"dark",At,o),yt.contrastText||(yt.contrastText=_e(yt.main)),yt},ut={dark,light};return deepmerge(_extends$3({common:_extends$3({},common$1),mode:a,primary:st({color:d,name:"primary"}),secondary:st({color:g,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:st({color:b,name:"error"}),warning:st({color:rt,name:"warning"}),info:st({color:j,name:"info"}),success:st({color:$,name:"success"}),grey:grey$1,contrastThreshold:i,getContrastText:_e,augmentColor:st,tonalOffset:o},ut[a]),c)}const _excluded$a=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function round$2(e){return Math.round(e*1e5)/1e5}const caseAllCaps={textTransform:"uppercase"},defaultFontFamily='"Roboto", "Helvetica", "Arial", sans-serif';function createTypography(e,a){const i=typeof a=="function"?a(e):a,{fontFamily:o=defaultFontFamily,fontSize:c=14,fontWeightLight:d=300,fontWeightRegular:g=400,fontWeightMedium:b=500,fontWeightBold:j=700,htmlFontSize:$=16,allVariants:rt,pxToRem:_e}=i,st=_objectWithoutPropertiesLoose$2(i,_excluded$a),ut=c/14,gt=_e||(wt=>`${wt/$*ut}rem`),yt=(wt,Ct,At,Tt,kt)=>_extends$3({fontFamily:o,fontWeight:wt,fontSize:gt(Ct),lineHeight:At},o===defaultFontFamily?{letterSpacing:`${round$2(Tt/Ct)}em`}:{},kt,rt),Pt={h1:yt(d,96,1.167,-1.5),h2:yt(d,60,1.2,-.5),h3:yt(g,48,1.167,0),h4:yt(g,34,1.235,.25),h5:yt(g,24,1.334,0),h6:yt(b,20,1.6,.15),subtitle1:yt(g,16,1.75,.15),subtitle2:yt(b,14,1.57,.1),body1:yt(g,16,1.5,.15),body2:yt(g,14,1.43,.15),button:yt(b,14,1.75,.4,caseAllCaps),caption:yt(g,12,1.66,.4),overline:yt(g,12,2.66,1,caseAllCaps),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return deepmerge(_extends$3({htmlFontSize:$,pxToRem:gt,fontFamily:o,fontSize:c,fontWeightLight:d,fontWeightRegular:g,fontWeightMedium:b,fontWeightBold:j},Pt),st,{clone:!1})}const shadowKeyUmbraOpacity=.2,shadowKeyPenumbraOpacity=.14,shadowAmbientShadowOpacity=.12;function createShadow(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${shadowKeyUmbraOpacity})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${shadowKeyPenumbraOpacity})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${shadowAmbientShadowOpacity})`].join(",")}const shadows=["none",createShadow(0,2,1,-1,0,1,1,0,0,1,3,0),createShadow(0,3,1,-2,0,2,2,0,0,1,5,0),createShadow(0,3,3,-2,0,3,4,0,0,1,8,0),createShadow(0,2,4,-1,0,4,5,0,0,1,10,0),createShadow(0,3,5,-1,0,5,8,0,0,1,14,0),createShadow(0,3,5,-1,0,6,10,0,0,1,18,0),createShadow(0,4,5,-2,0,7,10,1,0,2,16,1),createShadow(0,5,5,-3,0,8,10,1,0,3,14,2),createShadow(0,5,6,-3,0,9,12,1,0,3,16,2),createShadow(0,6,6,-3,0,10,14,1,0,4,18,3),createShadow(0,6,7,-4,0,11,15,1,0,4,20,3),createShadow(0,7,8,-4,0,12,17,2,0,5,22,4),createShadow(0,7,8,-4,0,13,19,2,0,5,24,4),createShadow(0,7,9,-4,0,14,21,2,0,5,26,4),createShadow(0,8,9,-5,0,15,22,2,0,6,28,5),createShadow(0,8,10,-5,0,16,24,2,0,6,30,5),createShadow(0,8,11,-5,0,17,26,2,0,6,32,5),createShadow(0,9,11,-5,0,18,28,2,0,7,34,6),createShadow(0,9,12,-6,0,19,29,2,0,7,36,6),createShadow(0,10,13,-6,0,20,31,3,0,8,38,7),createShadow(0,10,13,-6,0,21,33,3,0,8,40,7),createShadow(0,10,14,-6,0,22,35,3,0,8,42,7),createShadow(0,11,14,-7,0,23,36,3,0,9,44,8),createShadow(0,11,15,-7,0,24,38,3,0,9,46,8)],_excluded$9=["duration","easing","delay"],easing={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},duration={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function formatMs(e){return`${Math.round(e)}ms`}function getAutoHeightDuration(e){if(!e)return 0;const a=e/36;return Math.round((4+15*a**.25+a/5)*10)}function createTransitions(e){const a=_extends$3({},easing,e.easing),i=_extends$3({},duration,e.duration);return _extends$3({getAutoHeightDuration,create:(c=["all"],d={})=>{const{duration:g=i.standard,easing:b=a.easeInOut,delay:j=0}=d;return _objectWithoutPropertiesLoose$2(d,_excluded$9),(Array.isArray(c)?c:[c]).map($=>`${$} ${typeof g=="string"?g:formatMs(g)} ${b} ${typeof j=="string"?j:formatMs(j)}`).join(",")}},e,{easing:a,duration:i})}const zIndex={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},zIndex$1=zIndex,_excluded$8=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function createTheme(e={},...a){const{mixins:i={},palette:o={},transitions:c={},typography:d={}}=e,g=_objectWithoutPropertiesLoose$2(e,_excluded$8);if(e.vars)throw new Error(formatMuiErrorMessage(18));const b=createPalette(o),j=createTheme$1(e);let $=deepmerge(j,{mixins:createMixins(j.breakpoints,i),palette:b,shadows:shadows.slice(),typography:createTypography(b,d),transitions:createTransitions(c),zIndex:_extends$3({},zIndex$1)});return $=deepmerge($,g),$=a.reduce((rt,_e)=>deepmerge(rt,_e),$),$.unstable_sxConfig=_extends$3({},defaultSxConfig$1,g==null?void 0:g.unstable_sxConfig),$.unstable_sx=function(_e){return styleFunctionSx({sx:_e,theme:this})},$}const defaultTheme=createTheme(),defaultTheme$1=defaultTheme,THEME_ID="$$material";function useThemeProps({props:e,name:a}){return useThemeProps$1({props:e,name:a,defaultTheme:defaultTheme$1,themeId:THEME_ID})}const rootShouldForwardProp=e=>shouldForwardProp(e)&&e!=="classes",styled=createStyled({themeId:THEME_ID,defaultTheme:defaultTheme$1,rootShouldForwardProp});function getSvgIconUtilityClass(e){return generateUtilityClass("MuiSvgIcon",e)}generateUtilityClasses("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const _excluded$7=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],useUtilityClasses=e=>{const{color:a,fontSize:i,classes:o}=e,c={root:["root",a!=="inherit"&&`color${capitalize$1(a)}`,`fontSize${capitalize$1(i)}`]};return composeClasses(c,getSvgIconUtilityClass,o)},SvgIconRoot=styled("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:i}=e;return[a.root,i.color!=="inherit"&&a[`color${capitalize$1(i.color)}`],a[`fontSize${capitalize$1(i.fontSize)}`]]}})(({theme:e,ownerState:a})=>{var i,o,c,d,g,b,j,$,rt,_e,st,ut,gt;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:a.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(i=e.transitions)==null||(o=i.create)==null?void 0:o.call(i,"fill",{duration:(c=e.transitions)==null||(c=c.duration)==null?void 0:c.shorter}),fontSize:{inherit:"inherit",small:((d=e.typography)==null||(g=d.pxToRem)==null?void 0:g.call(d,20))||"1.25rem",medium:((b=e.typography)==null||(j=b.pxToRem)==null?void 0:j.call(b,24))||"1.5rem",large:(($=e.typography)==null||(rt=$.pxToRem)==null?void 0:rt.call($,35))||"2.1875rem"}[a.fontSize],color:(_e=(st=(e.vars||e).palette)==null||(st=st[a.color])==null?void 0:st.main)!=null?_e:{action:(ut=(e.vars||e).palette)==null||(ut=ut.action)==null?void 0:ut.active,disabled:(gt=(e.vars||e).palette)==null||(gt=gt.action)==null?void 0:gt.disabled,inherit:void 0}[a.color]}}),SvgIcon=reactExports$1.forwardRef(function(a,i){const o=useThemeProps({props:a,name:"MuiSvgIcon"}),{children:c,className:d,color:g="inherit",component:b="svg",fontSize:j="medium",htmlColor:$,inheritViewBox:rt=!1,titleAccess:_e,viewBox:st="0 0 24 24"}=o,ut=_objectWithoutPropertiesLoose$2(o,_excluded$7),gt=reactExports$1.isValidElement(c)&&c.type==="svg",yt=_extends$3({},o,{color:g,component:b,fontSize:j,instanceFontSize:a.fontSize,inheritViewBox:rt,viewBox:st,hasSvgAsChild:gt}),Pt={};rt||(Pt.viewBox=st);const wt=useUtilityClasses(yt);return jsxRuntimeExports.jsxs(SvgIconRoot,_extends$3({as:b,className:clsx(wt.root,d),focusable:"false",color:$,"aria-hidden":_e?void 0:!0,role:_e?"img":void 0,ref:i},Pt,ut,gt&&c.props,{ownerState:yt,children:[gt?c.props.children:c,_e?jsxRuntimeExports.jsx("title",{children:_e}):null]}))});SvgIcon.muiName="SvgIcon";function createSvgIcon(e,a){function i(o,c){return jsxRuntimeExports.jsx(SvgIcon,_extends$3({"data-testid":`${a}Icon`,ref:c},o,{children:e}))}return i.muiName=SvgIcon.muiName,reactExports$1.memo(reactExports$1.forwardRef(i))}const unstable_ClassNameGenerator={configure:e=>{ClassNameGenerator.configure(e)}},utils$2=Object.freeze(Object.defineProperty({__proto__:null,capitalize:capitalize$1,createChainedFunction,createSvgIcon,debounce,deprecatedPropType,isMuiElement,ownerDocument,ownerWindow,requirePropFactory,setRef:setRef$1,unstable_ClassNameGenerator,unstable_useEnhancedEffect:useEnhancedEffect$1,unstable_useId:useId$1,unsupportedProp,useControlled,useEventCallback,useForkRef,useIsFocusVisible},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(utils$2);var hasRequiredCreateSvgIcon;function requireCreateSvgIcon(){return hasRequiredCreateSvgIcon||(hasRequiredCreateSvgIcon=1,function(e){"use client";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return a.createSvgIcon}});var a=require$$0}(createSvgIcon$1)),createSvgIcon$1}var _interopRequireDefault$g=interopRequireDefaultExports;Object.defineProperty(Send,"__esModule",{value:!0});var default_1$g=Send.default=void 0,_createSvgIcon$f=_interopRequireDefault$g(requireCreateSvgIcon()),_jsxRuntime$f=jsxRuntimeExports;default_1$g=Send.default=(0,_createSvgIcon$f.default)((0,_jsxRuntime$f.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send");var X$1={},_interopRequireDefault$f=interopRequireDefaultExports;Object.defineProperty(X$1,"__esModule",{value:!0});var default_1$f=X$1.default=void 0;_interopRequireWildcard$6(reactExports$1);var _createSvgIcon$e=_interopRequireDefault$f(requireCreateSvgIcon()),_jsxRuntime$e=jsxRuntimeExports;function _getRequireWildcardCache$5(e){if(typeof WeakMap!="function")return null;var a=new WeakMap,i=new WeakMap;return(_getRequireWildcardCache$5=function(o){return o?i:a})(e)}function _interopRequireWildcard$6(e,a){if(!a&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var i=_getRequireWildcardCache$5(a);if(i&&i.has(e))return i.get(e);var o={__proto__:null},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in e)if(d!=="default"&&Object.prototype.hasOwnProperty.call(e,d)){var g=c?Object.getOwnPropertyDescriptor(e,d):null;g&&(g.get||g.set)?Object.defineProperty(o,d,g):o[d]=e[d]}return o.default=e,i&&i.set(e,o),o}default_1$f=X$1.default=(0,_createSvgIcon$e.default)((0,_jsxRuntime$e.jsx)("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"}),"X");var Telegram={},_interopRequireDefault$e=interopRequireDefaultExports;Object.defineProperty(Telegram,"__esModule",{value:!0});var default_1$e=Telegram.default=void 0;_interopRequireWildcard$5(reactExports$1);var _createSvgIcon$d=_interopRequireDefault$e(requireCreateSvgIcon()),_jsxRuntime$d=jsxRuntimeExports;function _getRequireWildcardCache$4(e){if(typeof WeakMap!="function")return null;var a=new WeakMap,i=new WeakMap;return(_getRequireWildcardCache$4=function(o){return o?i:a})(e)}function _interopRequireWildcard$5(e,a){if(!a&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var i=_getRequireWildcardCache$4(a);if(i&&i.has(e))return i.get(e);var o={__proto__:null},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in e)if(d!=="default"&&Object.prototype.hasOwnProperty.call(e,d)){var g=c?Object.getOwnPropertyDescriptor(e,d):null;g&&(g.get||g.set)?Object.defineProperty(o,d,g):o[d]=e[d]}return o.default=e,i&&i.set(e,o),o}default_1$e=Telegram.default=(0,_createSvgIcon$d.default)((0,_jsxRuntime$d.jsx)("path",{d:"M9.78 18.65l.28-4.23 7.68-6.92c.34-.31-.07-.46-.52-.19L7.74 13.3 3.64 12c-.88-.25-.89-.86.2-1.3l15.97-6.16c.73-.33 1.43.18 1.15 1.3l-2.72 12.81c-.19.91-.74 1.13-1.5.71L12.6 16.3l-1.99 1.93c-.23.23-.42.42-.83.42z"}),"Telegram");var YouTube={},_interopRequireDefault$d=interopRequireDefaultExports;Object.defineProperty(YouTube,"__esModule",{value:!0});var default_1$d=YouTube.default=void 0;_interopRequireWildcard$4(reactExports$1);var _createSvgIcon$c=_interopRequireDefault$d(requireCreateSvgIcon()),_jsxRuntime$c=jsxRuntimeExports;function _getRequireWildcardCache$3(e){if(typeof WeakMap!="function")return null;var a=new WeakMap,i=new WeakMap;return(_getRequireWildcardCache$3=function(o){return o?i:a})(e)}function _interopRequireWildcard$4(e,a){if(!a&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var i=_getRequireWildcardCache$3(a);if(i&&i.has(e))return i.get(e);var o={__proto__:null},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in e)if(d!=="default"&&Object.prototype.hasOwnProperty.call(e,d)){var g=c?Object.getOwnPropertyDescriptor(e,d):null;g&&(g.get||g.set)?Object.defineProperty(o,d,g):o[d]=e[d]}return o.default=e,i&&i.set(e,o),o}default_1$d=YouTube.default=(0,_createSvgIcon$c.default)((0,_jsxRuntime$c.jsx)("path",{d:"M10 15l5.19-3L10 9v6m11.56-7.83c.13.47.22 1.1.28 1.9.07.8.1 1.49.1 2.09L22 12c0 2.19-.16 3.8-.44 4.83-.25.9-.83 1.48-1.73 1.73-.47.13-1.33.22-2.65.28-1.3.07-2.49.1-3.59.1L12 19c-4.19 0-6.8-.16-7.83-.44-.9-.25-1.48-.83-1.73-1.73-.13-.47-.22-1.1-.28-1.9-.07-.8-.1-1.49-.1-2.09L2 12c0-2.19.16-3.8.44-4.83.25-.9.83-1.48 1.73-1.73.47-.13 1.33-.22 2.65-.28 1.3-.07 2.49-.1 3.59-.1L12 5c4.19 0 6.8.16 7.83.44.9.25 1.48.83 1.73 1.73z"}),"YouTube");var GitHub={},_interopRequireDefault$c=interopRequireDefaultExports;Object.defineProperty(GitHub,"__esModule",{value:!0});var default_1$c=GitHub.default=void 0;_interopRequireWildcard$3(reactExports$1);var _createSvgIcon$b=_interopRequireDefault$c(requireCreateSvgIcon()),_jsxRuntime$b=jsxRuntimeExports;function _getRequireWildcardCache$2(e){if(typeof WeakMap!="function")return null;var a=new WeakMap,i=new WeakMap;return(_getRequireWildcardCache$2=function(o){return o?i:a})(e)}function _interopRequireWildcard$3(e,a){if(!a&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var i=_getRequireWildcardCache$2(a);if(i&&i.has(e))return i.get(e);var o={__proto__:null},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in e)if(d!=="default"&&Object.prototype.hasOwnProperty.call(e,d)){var g=c?Object.getOwnPropertyDescriptor(e,d):null;g&&(g.get||g.set)?Object.defineProperty(o,d,g):o[d]=e[d]}return o.default=e,i&&i.set(e,o),o}default_1$c=GitHub.default=(0,_createSvgIcon$b.default)((0,_jsxRuntime$b.jsx)("path",{d:"M12 1.27a11 11 0 00-3.48 21.46c.55.09.73-.28.73-.55v-1.84c-3.03.64-3.67-1.46-3.67-1.46-.55-1.29-1.28-1.65-1.28-1.65-.92-.65.1-.65.1-.65 1.1 0 1.73 1.1 1.73 1.1.92 1.65 2.57 1.2 3.21.92a2 2 0 01.64-1.47c-2.47-.27-5.04-1.19-5.04-5.5 0-1.1.46-2.1 1.2-2.84a3.76 3.76 0 010-2.93s.91-.28 3.11 1.1c1.8-.49 3.7-.49 5.5 0 2.1-1.38 3.02-1.1 3.02-1.1a3.76 3.76 0 010 2.93c.83.74 1.2 1.74 1.2 2.94 0 4.21-2.57 5.13-5.04 5.4.45.37.82.92.82 2.02v3.03c0 .27.1.64.73.55A11 11 0 0012 1.27"}),"GitHub");var Reddit={},_interopRequireDefault$b=interopRequireDefaultExports;Object.defineProperty(Reddit,"__esModule",{value:!0});var default_1$b=Reddit.default=void 0;_interopRequireWildcard$2(reactExports$1);var _createSvgIcon$a=_interopRequireDefault$b(requireCreateSvgIcon()),_jsxRuntime$a=jsxRuntimeExports;function _getRequireWildcardCache$1(e){if(typeof WeakMap!="function")return null;var a=new WeakMap,i=new WeakMap;return(_getRequireWildcardCache$1=function(o){return o?i:a})(e)}function _interopRequireWildcard$2(e,a){if(!a&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var i=_getRequireWildcardCache$1(a);if(i&&i.has(e))return i.get(e);var o={__proto__:null},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in e)if(d!=="default"&&Object.prototype.hasOwnProperty.call(e,d)){var g=c?Object.getOwnPropertyDescriptor(e,d):null;g&&(g.get||g.set)?Object.defineProperty(o,d,g):o[d]=e[d]}return o.default=e,i&&i.set(e,o),o}default_1$b=Reddit.default=(0,_createSvgIcon$a.default)((0,_jsxRuntime$a.jsx)("path",{d:"M22 12.14a2.19 2.19 0 0 0-3.71-1.57 10.93 10.93 0 0 0-5.86-1.87l1-4.7 3.27.71a1.56 1.56 0 1 0 .16-.76l-3.64-.77c-.11-.02-.22 0-.29.06-.09.05-.14.14-.16.26l-1.11 5.22c-2.33.07-4.43.78-5.95 1.86A2.2 2.2 0 0 0 4.19 10a2.16 2.16 0 0 0-.9 4.15 3.6 3.6 0 0 0-.05.66c0 3.37 3.92 6.12 8.76 6.12s8.76-2.73 8.76-6.12c0-.21-.01-.44-.05-.66A2.21 2.21 0 0 0 22 12.14M7 13.7c0-.86.68-1.56 1.54-1.56s1.56.7 1.56 1.56a1.56 1.56 0 0 1-1.56 1.56c-.86.02-1.54-.7-1.54-1.56m8.71 4.14C14.63 18.92 12.59 19 12 19c-.61 0-2.65-.1-3.71-1.16a.4.4 0 0 1 0-.57.4.4 0 0 1 .57 0c.68.68 2.14.91 3.14.91s2.47-.23 3.14-.91a.4.4 0 0 1 .57 0c.14.16.14.41 0 .57m-.29-2.56c-.86 0-1.56-.7-1.56-1.56a1.56 1.56 0 0 1 1.56-1.56c.86 0 1.58.7 1.58 1.56a1.6 1.6 0 0 1-1.58 1.56z"}),"Reddit");const Home=()=>{const e=[{id:"1",title:"Coinbase",img:"/img/walletsImg/coinbase_icon.png",body:jsxRuntimeExports.jsxs("div",{className:"wallets_body",children:[jsxRuntimeExports.jsx("span",{children:"Coinbase is a global digital wallet functioning as a web browser extension. With Coinbase, you can safely and seamlessly manage the Egochain-based tokens that you control."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{children:"As an HD wallet, Kaikas allows you to create more than one account with a single master seed phrase. Kaikas supports various types of Klaytn networks, and enables you to register your own customized tokens within the wallet. Kaikas also allows you to sign requests from Klaytn-based web BApps (Blockchain Applications)."})]})},{id:"2",title:"Metamask",img:"/img/walletsImg/metamask_icon.png",body:jsxRuntimeExports.jsxs("div",{className:"wallets_body",children:[jsxRuntimeExports.jsx("span",{children:"Metamask is a global digital wallet functioning as a web browser extension. With Metamask, you can safely and seamlessly manage the Egochain-based tokens that you control."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{children:"As an HD wallet, Kaikas allows you to create more than one account with a single master seed phrase. Kaikas supports various types of Klaytn networks, and enables you to register your own customized tokens within the wallet. Kaikas also allows you to sign requests from Klaytn-based web BApps (Blockchain Applications)."})]})},{id:"3",title:"Trust Wallet",img:"/img/walletsImg/trust_wallet_icon.jpeg",body:jsxRuntimeExports.jsxs("div",{className:"wallets_body",children:[jsxRuntimeExports.jsx("span",{children:"Trust Wallet is a global digital wallet functioning as a web browser extension. With Trust Wallet, you can safely and seamlessly manage the Egochain-based tokens that you control."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{children:"As an HD wallet, Kaikas allows you to create more than one account with a single master seed phrase. Kaikas supports various types of Klaytn networks, and enables you to register your own customized tokens within the wallet. Kaikas also allows you to sign requests from Klaytn-based web BApps (Blockchain Applications)."})]})},{id:"4",title:"Kaikas",img:"/img/walletsImg/kaikas_wallet_icon.png",body:jsxRuntimeExports.jsxs("div",{className:"wallets_body",children:[jsxRuntimeExports.jsx("span",{children:"Kaikas is a global digital wallet functioning as a web browser extension. With Kaikas, you can safely and seamlessly manage the Egochain-based tokens that you control."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{children:"As an HD wallet, Kaikas allows you to create more than one account with a single master seed phrase. Kaikas supports various types of Klaytn networks, and enables you to register your own customized tokens within the wallet. Kaikas also allows you to sign requests from Klaytn-based web BApps (Blockchain Applications)."})]})},{id:"5",title:"SafePal",img:"/img/walletsImg/safepal_icon.png",body:jsxRuntimeExports.jsxs("div",{className:"wallets_body",children:[jsxRuntimeExports.jsx("span",{children:"SafePal is a global digital wallet functioning as a web browser extension. With SafePal, you can safely and seamlessly manage the Egochain-based tokens that you control."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{children:"As an HD wallet, Kaikas allows you to create more than one account with a single master seed phrase. Kaikas supports various types of Klaytn networks, and enables you to register your own customized tokens within the wallet. Kaikas also allows you to sign requests from Klaytn-based web BApps (Blockchain Applications)."})]})},{id:"6",title:"Coin98",img:"/img/walletsImg/coin98_icon.png",body:jsxRuntimeExports.jsxs("div",{className:"wallets_body",children:[jsxRuntimeExports.jsx("span",{children:"Coin98 is a global digital wallet functioning as a web browser extension. With Coin98, you can safely and seamlessly manage the Egochain-based tokens that you control."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{children:"As an HD wallet, Kaikas allows you to create more than one account with a single master seed phrase. Kaikas supports various types of Klaytn networks, and enables you to register your own customized tokens within the wallet. Kaikas also allows you to sign requests from Klaytn-based web BApps (Blockchain Applications)."})]})},{id:"7",title:"Huobi Wallet",img:"/img/walletsImg/huobi_icon.png",body:jsxRuntimeExports.jsxs("div",{className:"wallets_body",children:[jsxRuntimeExports.jsx("span",{children:"Huobi Wallet is a global digital wallet functioning as a web browser extension. With Huobi Wallet, you can safely and seamlessly manage the Egochain-based tokens that you control."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{children:"As an HD wallet, Kaikas allows you to create more than one account with a single master seed phrase. Kaikas supports various types of Klaytn networks, and enables you to register your own customized tokens within the wallet. Kaikas also allows you to sign requests from Klaytn-based web BApps (Blockchain Applications)."})]})},{id:"8",title:"D'Cent",img:"/img/walletsImg/dcent_icon.png",body:jsxRuntimeExports.jsxs("div",{className:"wallets_body",children:[jsxRuntimeExports.jsx("span",{children:"D'Cent is a global digital wallet functioning as a web browser extension. With D'Cent, you can safely and seamlessly manage the Egochain-based tokens that you control."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{children:"As an HD wallet, Kaikas allows you to create more than one account with a single master seed phrase. Kaikas supports various types of Klaytn networks, and enables you to register your own customized tokens within the wallet. Kaikas also allows you to sign requests from Klaytn-based web BApps (Blockchain Applications)."})]})},{id:"9",title:"Exodus Wallet",img:"/img/walletsImg/exodus_icon.png",body:jsxRuntimeExports.jsxs("div",{className:"wallets_body",children:[jsxRuntimeExports.jsx("span",{children:"Exodus Wallet is a global digital wallet functioning as a web browser extension. With Exodus Wallet, you can safely and seamlessly manage the Egochain-based tokens that you control."}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{children:"As an HD wallet, Kaikas allows you to create more than one account with a single master seed phrase. Kaikas supports various types of Klaytn networks, and enables you to register your own customized tokens within the wallet. Kaikas also allows you to sign requests from Klaytn-based web BApps (Blockchain Applications)."})]})}];return jsxRuntimeExports.jsxs("div",{className:"Home_div",children:[jsxRuntimeExports.jsxs("section",{className:"home_div_section1",children:[jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsxs("div",{className:"home_div_section1_area",children:[jsxRuntimeExports.jsxs("div",{className:"home_div_section1_area_1",children:[jsxRuntimeExports.jsxs("div",{className:"home_div_section1_area_1_div1",children:[jsxRuntimeExports.jsxs("div",{className:"home_div_section1_area_1_div1_txt1",children:[jsxRuntimeExports.jsxs("span",{className:"home_div_section1_area_1_div1_txt1_span",children:["Powering the Future,",jsxRuntimeExports.jsx("br",{})," A High-Performance"]}),"Parallel Blockchain"]}),jsxRuntimeExports.jsx("div",{className:"home_div_section1_area_1_div1_txt2",children:"Seamlessly create decentralized applications on Egochain, a decentralized blockchain that blends the speed and interoperability of Cosmos with the developer power of Ethereum."})]}),jsxRuntimeExports.jsxs("div",{className:"home_div_section1_area_1_div2",children:[jsxRuntimeExports.jsx("a",{href:"https://egoscan.io/",target:"_blank",children:jsxRuntimeExports.jsx("button",{className:"home_div_section1_area_1_div2_btn",children:"Explorer"})}),jsxRuntimeExports.jsx("a",{href:"https://egoswap.io",target:"_blank",children:jsxRuntimeExports.jsx("button",{className:"home_div_section1_area_1_div2_btn2",children:"Get EGAX"})})]})]}),jsxRuntimeExports.jsx("div",{className:"home_div_section1_area_2",children:jsxRuntimeExports.jsx(zr,{scene:"https://prod.spline.design/TVLoAomGQBQWA2NS/scene.splinecode",className:"home_div_section1_area_2_spline_scene"})})]})}),jsxRuntimeExports.jsx("img",{src:"/img/hero_bg_light.svg",alt:"",className:"home_div_section1_bg_light"}),jsxRuntimeExports.jsx("img",{src:"/img/test_hero_light2.svg",alt:"",className:"home_div_section1_bg_light2"}),jsxRuntimeExports.jsx(Grid$2,{}),jsxRuntimeExports.jsx("img",{src:"/img/grains_ellipse.png",alt:"",className:"grains_ellipse"})]}),jsxRuntimeExports.jsxs("section",{className:"home_div_section2",children:[jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsxs("div",{className:"home_div_section3_area",children:[jsxRuntimeExports.jsxs("div",{className:"home_div_section3_area_title",children:["Why Build on Egochain?",jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_para",children:"Build interoperable decentralized applications with the combined power of Ethereum's swift smart contract development and Cosmos SDK's seamless interoperability."})]}),jsxRuntimeExports.jsxs("div",{className:"home_div_section3_area_body",children:[jsxRuntimeExports.jsxs("div",{className:"home_div_section3_area_body_cont1",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_title",children:"Secure Network"}),jsxRuntimeExports.jsxs("div",{className:"home_div_section3_area_body_cont1_body_text",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_body_text_title",children:"Powered by EGAX's Secure Network"}),jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_body_text_para",children:"Node validators actively safeguard the EGOCHAIN by securing consensus, earning EGAX tokens as their well-deserved reward."})]}),jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_icon",children:jsxRuntimeExports.jsxs("svg",{"data-v-25ecef37":"","data-v-706ceafa":"",width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"4.08823",cy:"27.0335",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"27.9115",cy:"27.0335",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"16.0003",cy:"4.97105",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M14.0242 8.49609L5.62305 23.4981",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M17.9756 8.49609L26.3767 23.4981",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M8.05859 27.0273H23.9409",stroke:"white","stroke-width":"1.5"})]})})]}),jsxRuntimeExports.jsxs("div",{className:"home_div_section3_area_body_cont1",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_title",children:"Unleashing"}),jsxRuntimeExports.jsxs("div",{className:"home_div_section3_area_body_cont1_body_text",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_body_text_title",children:"Unleashing Interoperability"}),jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_body_text_para",children:"Powered by the robust Cosmos SDK, Egochain seamlessly connects to the vibrant Cosmos ecosystem (20+ chains, $40B+) through the IBC protocol."})]}),jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_icon",children:jsxRuntimeExports.jsxs("svg",{"data-v-25ecef37":"","data-v-706ceafa":"",width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"4.08823",cy:"27.0335",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"27.9115",cy:"27.0335",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"16.0003",cy:"4.97105",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M14.0242 8.49609L5.62305 23.4981",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M17.9756 8.49609L26.3767 23.4981",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M8.05859 27.0273H23.9409",stroke:"white","stroke-width":"1.5"})]})})]}),jsxRuntimeExports.jsxs("div",{className:"home_div_section3_area_body_cont1",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_title",children:"Unleash"}),jsxRuntimeExports.jsxs("div",{className:"home_div_section3_area_body_cont1_body_text",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_body_text_title",children:"Unleash the Full Potential of Solidity"}),jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_body_text_para",children:"Egochain's EVM compatibility empowers developers to leverage the familiar Solidity language and existing dApps, while reaping the benefits of Egochain's superior scalability and security."})]}),jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_icon",children:jsxRuntimeExports.jsxs("svg",{"data-v-25ecef37":"","data-v-706ceafa":"",width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"4.08823",cy:"27.0335",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"27.9115",cy:"27.0335",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"16.0003",cy:"4.97105",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M14.0242 8.49609L5.62305 23.4981",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M17.9756 8.49609L26.3767 23.4981",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M8.05859 27.0273H23.9409",stroke:"white","stroke-width":"1.5"})]})})]}),jsxRuntimeExports.jsxs("div",{className:"home_div_section3_area_body_cont1",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_title",children:"Transactions"}),jsxRuntimeExports.jsxs("div",{className:"home_div_section3_area_body_cont1_body_text",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_body_text_title",children:"Transactions by the Millions"}),jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_body_text_para",children:"Tendermint Consensus delivers single-block finality and unmatched scalability, ensuring Egochain can handle the demands of thousands of protocols and millions of users – effortlessly."})]}),jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_icon",children:jsxRuntimeExports.jsxs("svg",{"data-v-25ecef37":"","data-v-706ceafa":"",width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"4.08823",cy:"27.0335",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"27.9115",cy:"27.0335",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"16.0003",cy:"4.97105",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M14.0242 8.49609L5.62305 23.4981",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M17.9756 8.49609L26.3767 23.4981",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M8.05859 27.0273H23.9409",stroke:"white","stroke-width":"1.5"})]})})]})]})]})}),jsxRuntimeExports.jsx("img",{src:"/img/grains_bottom.png",alt:"",className:"grains_ellipse"}),jsxRuntimeExports.jsx("img",{src:"/img/test_hero_light3.svg",alt:"",className:"home_div_section1_bg_light3"})]}),jsxRuntimeExports.jsxs("section",{className:"home_div_section4",children:[jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsxs("div",{className:"home_div_section4_area",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_tile",children:"The most adopted scaling technology"}),jsxRuntimeExports.jsxs("div",{className:"home_div_section4_area_body",children:[jsxRuntimeExports.jsxs("div",{className:"home_div_section4_area_body_cont",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_cont1_img_div",children:jsxRuntimeExports.jsx(Icon,{})}),jsxRuntimeExports.jsxs("div",{className:"home_div_section4_area_body_cont2",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_cont2_title",children:"Power the future of Web3 with next-generation dApps"}),jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_cont2_para",children:"At Egochain, we see dApps as the engine driving Web3's revolution. That's why we built Egochain OS, a streamlined 3-step program empowering developers to launch innovative dApps directly onto the next generation of electric vehicles."}),jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_cont2_button_div",children:jsxRuntimeExports.jsx("button",{className:"home_div_section4_area_body_cont2_btn",children:"Open Docs"})})]})]}),jsxRuntimeExports.jsxs("div",{className:"home_div_section4_area_body_cont2a",children:[jsxRuntimeExports.jsxs("div",{className:"home_div_section4_area_body_cont2",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_cont2_title",children:"The Blockchain Paving the Way for Real-World Adoption"}),jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_cont2_para",children:"Built on the robust Cosmos SDK and leveraging the secure Ethermint consensus mechanism, Egochain is an EVM-compatible blockchain designed for mass adoption. Its human-readable addresses simplify user interactions, making the transition to blockchain technology seamless for millions."}),jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_cont2_button_div",children:jsxRuntimeExports.jsx("button",{className:"home_div_section4_area_body_cont2_btn",children:"Open Docs"})})]}),jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_cont1_img_div2",children:jsxRuntimeExports.jsx(Icon,{})})]}),jsxRuntimeExports.jsxs("div",{className:"home_div_section4_area_body_cont3",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_cont1_img_div",children:jsxRuntimeExports.jsx(Icon,{})}),jsxRuntimeExports.jsxs("div",{className:"home_div_section4_area_body_cont2",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_cont2_title",children:"Revolutionizing Smart Contracts"}),jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_cont2_para",children:"Launch dynamic dApps with Egoras's powerful CosmWasm smart contract layer. Egoras is the first blockchain to offer auto-executing smart contracts which empower faster, more innovative and groundbreaking applications."}),jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_cont2_button_div",children:jsxRuntimeExports.jsx("button",{className:"home_div_section4_area_body_cont2_btn",children:"Open Docs"})})]})]})]})]})}),jsxRuntimeExports.jsx("img",{src:"/img/grains_ellipse.png",alt:"",className:"grains_ellipse"}),jsxRuntimeExports.jsx("img",{src:"/img/test_hero_light4.svg",alt:"",className:"home_div_section1_bg_light4"})]}),jsxRuntimeExports.jsxs("section",{className:"home_div_section2",children:[jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsxs("div",{className:"ego_chain_stat_section_area",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_title",children:"The Blockchain Built for Real-World Businesses"}),jsxRuntimeExports.jsxs("div",{className:"ego_chain_stat_section_body",children:[jsxRuntimeExports.jsxs("div",{className:"ego_chain_stat_section_body_1",children:[jsxRuntimeExports.jsxs("div",{className:"ego_chain_stat_section_body_1_cont1",children:["Egochain is more than just a blockchain platform;",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"It is a powerful framework designed to empower real-world businesses to streamline operations, optimize transactions, and unlock new levels of value."]}),jsxRuntimeExports.jsxs("div",{className:"ego_chain_stat_section_body_1_cont2",children:[jsxRuntimeExports.jsx("div",{className:"ego_chain_stat_section_body_1_cont2_title",children:"PROOF-OF-STAKE"}),jsxRuntimeExports.jsxs("div",{className:"ego_chain_stat_section_body_1_cont2_div2",children:[jsxRuntimeExports.jsx("div",{className:"ego_chain_stat_section_body_1_cont2_div2_cont1",children:"99%"}),jsxRuntimeExports.jsxs("div",{className:"ego_chain_stat_section_body_1_cont2_div2_cont2",children:["lower ",jsxRuntimeExports.jsx("br",{}),"carbon ",jsxRuntimeExports.jsx("br",{}),"footprint"]})]}),jsxRuntimeExports.jsx("div",{className:"ego_chain_stat_section_body_1_cont2_last_text",children:"Blockchain tech that truly scales."})]})]}),jsxRuntimeExports.jsxs("div",{className:"ego_chain_stat_section_body_2",children:[jsxRuntimeExports.jsxs("div",{className:"ego_chain_stat_section_body_1_cont2",children:[jsxRuntimeExports.jsx("div",{className:"ego_chain_stat_section_body_1_cont2_title",children:"LOW FEES"}),jsxRuntimeExports.jsx("div",{className:"ego_chain_stat_section_body_1_cont2_txt",children:"$0.01"}),jsxRuntimeExports.jsx("div",{className:"ego_chain_stat_section_body_1_cont2_last_text",children:"Enjoy the lowest fees – almost zero."})]}),jsxRuntimeExports.jsxs("div",{className:"ego_chain_stat_section_body_1_cont2",children:[jsxRuntimeExports.jsx("div",{className:"ego_chain_stat_section_body_1_cont2_title",children:"FAST TRANSACTIONS"}),jsxRuntimeExports.jsx("div",{className:"ego_chain_stat_section_body_1_cont2_txt",children:"7 sec"}),jsxRuntimeExports.jsx("div",{className:"ego_chain_stat_section_body_1_cont2_last_text",children:"Transactions confirmed in seconds."})]})]})]})]})}),jsxRuntimeExports.jsx("img",{src:"/img/grains_bottom.png",alt:"",className:"grains_ellipse"}),jsxRuntimeExports.jsx("img",{src:"/img/hero_bg_light.svg",alt:"",className:"home_div_section1_bg_light5"})]}),jsxRuntimeExports.jsxs("section",{className:"home_div_section5",children:[jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsxs("div",{className:"home_div_section5_area",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section5_area_title",children:"Wallets"}),jsxRuntimeExports.jsx("div",{className:"home_div_section5_area_body_cont",children:e.map(a=>jsxRuntimeExports.jsxs("div",{className:"home_div_section5_area_body_cont_div1",id:a.id,children:[jsxRuntimeExports.jsx("div",{className:"home_div_section5_area_body_cont_div1_img_div",children:jsxRuntimeExports.jsx("img",{src:a.img,alt:"",className:"home_div_section5_area_body_cont_div1_img_div_img"})}),jsxRuntimeExports.jsx("div",{className:"home_div_section5_area_body_cont_div1_title",children:a.title}),jsxRuntimeExports.jsx("div",{className:"home_div_section5_area_body_cont_div1_title_para",children:a.body}),jsxRuntimeExports.jsx("div",{className:"home_div_section5_area_body_cont_div1_last_txt",children:"WALLETS"})]}))})]})}),jsxRuntimeExports.jsx("img",{src:"/img/grains_bottom.png",alt:"",className:"grains_ellipse"}),jsxRuntimeExports.jsx("img",{src:"/img/test_hero_light2.svg",alt:"",className:"home_div_section1_bg_light2"})]}),jsxRuntimeExports.jsxs("section",{className:"home_div_section6",children:[jsxRuntimeExports.jsxs("div",{className:"container",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section6_area_community",children:jsxRuntimeExports.jsxs("div",{className:"home_div_section6_area_community_2",children:[jsxRuntimeExports.jsxs("div",{className:"home_div_section6_area_community_2_title",children:["Join the Egochain commnity",jsxRuntimeExports.jsx("div",{className:"home_div_section6_area_community_2_title_para",children:"Take part in the conversation! Stay in the know & be the first to hear about any new updates"})]}),jsxRuntimeExports.jsxs("div",{className:"home_div_section6_area_community_2_links",children:[jsxRuntimeExports.jsxs("a",{target:"_blank",href:"https://twitter.com/egorasHQ?ref_src=twsrc%5Egoogle%7Ctwcamp%5Eserp%7Ctwgr%5Eauthor",className:"home_div_section6_area_community_2_links_cont1",children:[jsxRuntimeExports.jsx(default_1$f,{className:"home_div_section6_area_community_2_links_cont1_icon",style:{background:"#000"}}),jsxRuntimeExports.jsxs("div",{className:"home_div_section6_area_community_2_links_cont1_text",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section6_area_community_2_links_cont1_text_title",children:"X"}),jsxRuntimeExports.jsx("div",{className:"home_div_section6_area_community_2_links_cont1_text_para",children:"Read the latest"})]})]}),jsxRuntimeExports.jsxs("a",{target:"_blank",href:"https://t.me/s/egorasmarket?before=480",className:"home_div_section6_area_community_2_links_cont1",children:[jsxRuntimeExports.jsx(default_1$e,{className:"home_div_section6_area_community_2_links_cont1_icon"}),jsxRuntimeExports.jsxs("div",{className:"home_div_section6_area_community_2_links_cont1_text",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section6_area_community_2_links_cont1_text_title",children:"Telegram"}),jsxRuntimeExports.jsx("div",{className:"home_div_section6_area_community_2_links_cont1_text_para",children:"Join Discussion"})]})]}),jsxRuntimeExports.jsxs("a",{href:"https://www.youtube.com/channel/UCHfi5EwXig46xp5Dx8hVBHQ",className:"home_div_section6_area_community_2_links_cont1",children:[jsxRuntimeExports.jsx(default_1$d,{className:"home_div_section6_area_community_2_links_cont1_icon",style:{background:"red"}}),jsxRuntimeExports.jsxs("div",{className:"home_div_section6_area_community_2_links_cont1_text",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section6_area_community_2_links_cont1_text_title",children:"Youtube"}),jsxRuntimeExports.jsx("div",{className:"home_div_section6_area_community_2_links_cont1_text_para",children:"Watch the latest"})]})]}),jsxRuntimeExports.jsxs("a",{target:"_blank",href:"https://github.com/EgorasMarket",className:"home_div_section6_area_community_2_links_cont1",children:[jsxRuntimeExports.jsx(default_1$c,{className:"home_div_section6_area_community_2_links_cont1_icon",style:{background:"#fff",color:"#000"}}),jsxRuntimeExports.jsxs("div",{className:"home_div_section6_area_community_2_links_cont1_text",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section6_area_community_2_links_cont1_text_title",children:"Github"}),jsxRuntimeExports.jsx("div",{className:"home_div_section6_area_community_2_links_cont1_text_para",children:"Build with us"})]})]}),jsxRuntimeExports.jsxs("div",{className:"home_div_section6_area_community_2_links_cont1",children:[jsxRuntimeExports.jsx(default_1$b,{className:"home_div_section6_area_community_2_links_cont1_icon",style:{background:"#ff4500"}}),jsxRuntimeExports.jsxs("div",{className:"home_div_section6_area_community_2_links_cont1_text",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section6_area_community_2_links_cont1_text_title",children:"Reddit"}),jsxRuntimeExports.jsx("div",{className:"home_div_section6_area_community_2_links_cont1_text_para",children:"Get Involved"})]})]}),jsxRuntimeExports.jsxs("a",{target:"_blank",href:"https://egoras.medium.com/",className:"home_div_section6_area_community_2_links_cont1",children:[jsxRuntimeExports.jsx("img",{src:"/img/medium_icon.jpeg",alt:"",className:"home_div_section6_area_community_2_links_cont1_img"}),jsxRuntimeExports.jsxs("div",{className:"home_div_section6_area_community_2_links_cont1_text",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section6_area_community_2_links_cont1_text_title",children:"Medium"}),jsxRuntimeExports.jsx("div",{className:"home_div_section6_area_community_2_links_cont1_text_para",children:"Read the latest"})]})]})]})]})}),jsxRuntimeExports.jsxs("div",{className:"home_div_section6_area",children:[jsxRuntimeExports.jsxs("div",{className:"home_div_section6_area_1",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section6_area_1_title",children:"Stay up to date"}),jsxRuntimeExports.jsx("div",{className:"home_div_section6_area_1_text",children:"Be the first to know about the latest updates and launches."}),jsxRuntimeExports.jsxs("div",{className:"home_div_section6_area_1_input_div",children:[jsxRuntimeExports.jsx("input",{type:"email",name:"",id:"",placeholder:"Email",className:"home_div_section6_area_1_input_div_input"}),jsxRuntimeExports.jsx("button",{className:"home_div_section6_area_1_input_div_btn",children:jsxRuntimeExports.jsx(default_1$g,{})})]})]}),jsxRuntimeExports.jsxs("div",{className:"home_div_section6_area_2",children:[" ",jsxRuntimeExports.jsx(zr,{scene:"https://prod.spline.design/TVLoAomGQBQWA2NS/scene.splinecode",className:"home_div_section1_area_2_spline_scene2"})]})]})]}),jsxRuntimeExports.jsx("img",{src:"/img/test_hero_light3.svg",alt:"",className:"home_div_section1_bg_light3"}),jsxRuntimeExports.jsx("img",{src:"/img/grains_ellipse.png",alt:"",className:"grains_ellipse"}),jsxRuntimeExports.jsx(Grid$2,{})]})]})};/**
 * @remix-run/router v1.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var i=arguments[a];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},_extends$2.apply(this,arguments)}var Action;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createBrowserHistory(e){e===void 0&&(e={});function a(o,c){let{pathname:d,search:g,hash:b}=o.location;return createLocation("",{pathname:d,search:g,hash:b},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function i(o,c){return typeof c=="string"?c:createPath(c)}return getUrlBasedHistory(a,i,null,e)}function invariant(e,a){if(e===!1||e===null||typeof e>"u")throw new Error(a)}function warning(e,a){if(!e){typeof console<"u"&&console.warn(a);try{throw new Error(a)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(e,a){return{usr:e.state,key:e.key,idx:a}}function createLocation(e,a,i,o){return i===void 0&&(i=null),_extends$2({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof a=="string"?parsePath(a):a,{state:i,key:a&&a.key||o||createKey()})}function createPath(e){let{pathname:a="/",search:i="",hash:o=""}=e;return i&&i!=="?"&&(a+=i.charAt(0)==="?"?i:"?"+i),o&&o!=="#"&&(a+=o.charAt(0)==="#"?o:"#"+o),a}function parsePath(e){let a={};if(e){let i=e.indexOf("#");i>=0&&(a.hash=e.substr(i),e=e.substr(0,i));let o=e.indexOf("?");o>=0&&(a.search=e.substr(o),e=e.substr(0,o)),e&&(a.pathname=e)}return a}function getUrlBasedHistory(e,a,i,o){o===void 0&&(o={});let{window:c=document.defaultView,v5Compat:d=!1}=o,g=c.history,b=Action.Pop,j=null,$=rt();$==null&&($=0,g.replaceState(_extends$2({},g.state,{idx:$}),""));function rt(){return(g.state||{idx:null}).idx}function _e(){b=Action.Pop;let Pt=rt(),wt=Pt==null?null:Pt-$;$=Pt,j&&j({action:b,location:yt.location,delta:wt})}function st(Pt,wt){b=Action.Push;let Ct=createLocation(yt.location,Pt,wt);i&&i(Ct,Pt),$=rt()+1;let At=getHistoryState(Ct,$),Tt=yt.createHref(Ct);try{g.pushState(At,"",Tt)}catch(kt){if(kt instanceof DOMException&&kt.name==="DataCloneError")throw kt;c.location.assign(Tt)}d&&j&&j({action:b,location:yt.location,delta:1})}function ut(Pt,wt){b=Action.Replace;let Ct=createLocation(yt.location,Pt,wt);i&&i(Ct,Pt),$=rt();let At=getHistoryState(Ct,$),Tt=yt.createHref(Ct);g.replaceState(At,"",Tt),d&&j&&j({action:b,location:yt.location,delta:0})}function gt(Pt){let wt=c.location.origin!=="null"?c.location.origin:c.location.href,Ct=typeof Pt=="string"?Pt:createPath(Pt);return invariant(wt,"No window.location.(origin|href) available to create URL for href: "+Ct),new URL(Ct,wt)}let yt={get action(){return b},get location(){return e(c,g)},listen(Pt){if(j)throw new Error("A history only accepts one active listener");return c.addEventListener(PopStateEventType,_e),j=Pt,()=>{c.removeEventListener(PopStateEventType,_e),j=null}},createHref(Pt){return a(c,Pt)},createURL:gt,encodeLocation(Pt){let wt=gt(Pt);return{pathname:wt.pathname,search:wt.search,hash:wt.hash}},push:st,replace:ut,go(Pt){return g.go(Pt)}};return yt}var ResultType;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ResultType||(ResultType={}));function matchRoutes(e,a,i){i===void 0&&(i="/");let o=typeof a=="string"?parsePath(a):a,c=stripBasename(o.pathname||"/",i);if(c==null)return null;let d=flattenRoutes(e);rankRouteBranches(d);let g=null;for(let b=0;g==null&&b<d.length;++b)g=matchRouteBranch(d[b],safelyDecodeURI(c));return g}function flattenRoutes(e,a,i,o){a===void 0&&(a=[]),i===void 0&&(i=[]),o===void 0&&(o="");let c=(d,g,b)=>{let j={relativePath:b===void 0?d.path||"":b,caseSensitive:d.caseSensitive===!0,childrenIndex:g,route:d};j.relativePath.startsWith("/")&&(invariant(j.relativePath.startsWith(o),'Absolute route path "'+j.relativePath+'" nested under path '+('"'+o+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),j.relativePath=j.relativePath.slice(o.length));let $=joinPaths([o,j.relativePath]),rt=i.concat(j);d.children&&d.children.length>0&&(invariant(d.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+$+'".')),flattenRoutes(d.children,a,rt,$)),!(d.path==null&&!d.index)&&a.push({path:$,score:computeScore($,d.index),routesMeta:rt})};return e.forEach((d,g)=>{var b;if(d.path===""||!((b=d.path)!=null&&b.includes("?")))c(d,g);else for(let j of explodeOptionalSegments(d.path))c(d,g,j)}),a}function explodeOptionalSegments(e){let a=e.split("/");if(a.length===0)return[];let[i,...o]=a,c=i.endsWith("?"),d=i.replace(/\?$/,"");if(o.length===0)return c?[d,""]:[d];let g=explodeOptionalSegments(o.join("/")),b=[];return b.push(...g.map(j=>j===""?d:[d,j].join("/"))),c&&b.push(...g),b.map(j=>e.startsWith("/")&&j===""?"/":j)}function rankRouteBranches(e){e.sort((a,i)=>a.score!==i.score?i.score-a.score:compareIndexes(a.routesMeta.map(o=>o.childrenIndex),i.routesMeta.map(o=>o.childrenIndex)))}const paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=e=>e==="*";function computeScore(e,a){let i=e.split("/"),o=i.length;return i.some(isSplat)&&(o+=splatPenalty),a&&(o+=indexRouteValue),i.filter(c=>!isSplat(c)).reduce((c,d)=>c+(paramRe.test(d)?dynamicSegmentValue:d===""?emptySegmentValue:staticSegmentValue),o)}function compareIndexes(e,a){return e.length===a.length&&e.slice(0,-1).every((o,c)=>o===a[c])?e[e.length-1]-a[a.length-1]:0}function matchRouteBranch(e,a){let{routesMeta:i}=e,o={},c="/",d=[];for(let g=0;g<i.length;++g){let b=i[g],j=g===i.length-1,$=c==="/"?a:a.slice(c.length)||"/",rt=matchPath({path:b.relativePath,caseSensitive:b.caseSensitive,end:j},$);if(!rt)return null;Object.assign(o,rt.params);let _e=b.route;d.push({params:o,pathname:joinPaths([c,rt.pathname]),pathnameBase:normalizePathname(joinPaths([c,rt.pathnameBase])),route:_e}),rt.pathnameBase!=="/"&&(c=joinPaths([c,rt.pathnameBase]))}return d}function matchPath(e,a){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[i,o]=compilePath(e.path,e.caseSensitive,e.end),c=a.match(i);if(!c)return null;let d=c[0],g=d.replace(/(.)\/+$/,"$1"),b=c.slice(1);return{params:o.reduce(($,rt,_e)=>{let{paramName:st,isOptional:ut}=rt;if(st==="*"){let yt=b[_e]||"";g=d.slice(0,d.length-yt.length).replace(/(.)\/+$/,"$1")}const gt=b[_e];return ut&&!gt?$[st]=void 0:$[st]=safelyDecodeURIComponent(gt||"",st),$},{}),pathname:d,pathnameBase:g,pattern:e}}function compilePath(e,a,i){a===void 0&&(a=!1),i===void 0&&(i=!0),warning(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let o=[],c="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(g,b,j)=>(o.push({paramName:b,isOptional:j!=null}),j?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(o.push({paramName:"*"}),c+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?c+="\\/*$":e!==""&&e!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,a?void 0:"i"),o]}function safelyDecodeURI(e){try{return decodeURI(e)}catch(a){return warning(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+a+").")),e}}function safelyDecodeURIComponent(e,a){try{return decodeURIComponent(e)}catch(i){return warning(!1,'The value for the URL param "'+a+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+i+").")),e}}function stripBasename(e,a){if(a==="/")return e;if(!e.toLowerCase().startsWith(a.toLowerCase()))return null;let i=a.endsWith("/")?a.length-1:a.length,o=e.charAt(i);return o&&o!=="/"?null:e.slice(i)||"/"}const joinPaths=e=>e.join("/").replace(/\/\/+/g,"/"),normalizePathname=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/");function isRouteErrorResponse(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const validMutationMethodsArr=["post","put","patch","delete"];new Set(validMutationMethodsArr);const validRequestMethodsArr=["get",...validMutationMethodsArr];new Set(validRequestMethodsArr);/**
 * React Router v6.21.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var i=arguments[a];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},_extends$1.apply(this,arguments)}const DataRouterContext=reactExports$1.createContext(null),DataRouterStateContext=reactExports$1.createContext(null),NavigationContext=reactExports$1.createContext(null),LocationContext=reactExports$1.createContext(null),RouteContext=reactExports$1.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports$1.createContext(null);function useInRouterContext(){return reactExports$1.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant(!1),reactExports$1.useContext(LocationContext).location}function useRoutes(e,a){return useRoutesImpl(e,a)}function useRoutesImpl(e,a,i,o){useInRouterContext()||invariant(!1);let{navigator:c}=reactExports$1.useContext(NavigationContext),{matches:d}=reactExports$1.useContext(RouteContext),g=d[d.length-1],b=g?g.params:{};g&&g.pathname;let j=g?g.pathnameBase:"/";g&&g.route;let $=useLocation(),rt;if(a){var _e;let Pt=typeof a=="string"?parsePath(a):a;j==="/"||(_e=Pt.pathname)!=null&&_e.startsWith(j)||invariant(!1),rt=Pt}else rt=$;let st=rt.pathname||"/",ut=j==="/"?st:st.slice(j.length)||"/",gt=matchRoutes(e,{pathname:ut}),yt=_renderMatches(gt&&gt.map(Pt=>Object.assign({},Pt,{params:Object.assign({},b,Pt.params),pathname:joinPaths([j,c.encodeLocation?c.encodeLocation(Pt.pathname).pathname:Pt.pathname]),pathnameBase:Pt.pathnameBase==="/"?j:joinPaths([j,c.encodeLocation?c.encodeLocation(Pt.pathnameBase).pathname:Pt.pathnameBase])})),d,i,o);return a&&yt?reactExports$1.createElement(LocationContext.Provider,{value:{location:_extends$1({pathname:"/",search:"",hash:"",state:null,key:"default"},rt),navigationType:Action.Pop}},yt):yt}function DefaultErrorComponent(){let e=useRouteError(),a=isRouteErrorResponse(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,c={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return reactExports$1.createElement(reactExports$1.Fragment,null,reactExports$1.createElement("h2",null,"Unexpected Application Error!"),reactExports$1.createElement("h3",{style:{fontStyle:"italic"}},a),i?reactExports$1.createElement("pre",{style:c},i):null,null)}const defaultErrorElement=reactExports$1.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports$1.Component{constructor(a){super(a),this.state={location:a.location,revalidation:a.revalidation,error:a.error}}static getDerivedStateFromError(a){return{error:a}}static getDerivedStateFromProps(a,i){return i.location!==a.location||i.revalidation!=="idle"&&a.revalidation==="idle"?{error:a.error,location:a.location,revalidation:a.revalidation}:{error:a.error!==void 0?a.error:i.error,location:i.location,revalidation:a.revalidation||i.revalidation}}componentDidCatch(a,i){console.error("React Router caught the following error during render",a,i)}render(){return this.state.error!==void 0?reactExports$1.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports$1.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(e){let{routeContext:a,match:i,children:o}=e,c=reactExports$1.useContext(DataRouterContext);return c&&c.static&&c.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=i.route.id),reactExports$1.createElement(RouteContext.Provider,{value:a},o)}function _renderMatches(e,a,i,o){var c;if(a===void 0&&(a=[]),i===void 0&&(i=null),o===void 0&&(o=null),e==null){var d;if((d=i)!=null&&d.errors)e=i.matches;else return null}let g=e,b=(c=i)==null?void 0:c.errors;if(b!=null){let rt=g.findIndex(_e=>_e.route.id&&(b==null?void 0:b[_e.route.id]));rt>=0||invariant(!1),g=g.slice(0,Math.min(g.length,rt+1))}let j=!1,$=-1;if(i&&o&&o.v7_partialHydration)for(let rt=0;rt<g.length;rt++){let _e=g[rt];if((_e.route.HydrateFallback||_e.route.hydrateFallbackElement)&&($=rt),_e.route.id){let{loaderData:st,errors:ut}=i,gt=_e.route.loader&&st[_e.route.id]===void 0&&(!ut||ut[_e.route.id]===void 0);if(_e.route.lazy||gt){j=!0,$>=0?g=g.slice(0,$+1):g=[g[0]];break}}}return g.reduceRight((rt,_e,st)=>{let ut,gt=!1,yt=null,Pt=null;i&&(ut=b&&_e.route.id?b[_e.route.id]:void 0,yt=_e.route.errorElement||defaultErrorElement,j&&($<0&&st===0?(warningOnce("route-fallback",!1),gt=!0,Pt=null):$===st&&(gt=!0,Pt=_e.route.hydrateFallbackElement||null)));let wt=a.concat(g.slice(0,st+1)),Ct=()=>{let At;return ut?At=yt:gt?At=Pt:_e.route.Component?At=reactExports$1.createElement(_e.route.Component,null):_e.route.element?At=_e.route.element:At=rt,reactExports$1.createElement(RenderedRoute,{match:_e,routeContext:{outlet:rt,matches:wt,isDataRoute:i!=null},children:At})};return i&&(_e.route.ErrorBoundary||_e.route.errorElement||st===0)?reactExports$1.createElement(RenderErrorBoundary,{location:i.location,revalidation:i.revalidation,component:yt,error:ut,children:Ct(),routeContext:{outlet:null,matches:wt,isDataRoute:!0}}):Ct()},null)}var DataRouterStateHook$1=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(DataRouterStateHook$1||{});function useDataRouterState(e){let a=reactExports$1.useContext(DataRouterStateContext);return a||invariant(!1),a}function useRouteContext(e){let a=reactExports$1.useContext(RouteContext);return a||invariant(!1),a}function useCurrentRouteId(e){let a=useRouteContext(),i=a.matches[a.matches.length-1];return i.route.id||invariant(!1),i.route.id}function useRouteError(){var e;let a=reactExports$1.useContext(RouteErrorContext),i=useDataRouterState(DataRouterStateHook$1.UseRouteError),o=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return a!==void 0?a:(e=i.errors)==null?void 0:e[o]}const alreadyWarned={};function warningOnce(e,a,i){!a&&!alreadyWarned[e]&&(alreadyWarned[e]=!0)}function Route(e){invariant(!1)}function Router(e){let{basename:a="/",children:i=null,location:o,navigationType:c=Action.Pop,navigator:d,static:g=!1,future:b}=e;useInRouterContext()&&invariant(!1);let j=a.replace(/^\/*/,"/"),$=reactExports$1.useMemo(()=>({basename:j,navigator:d,static:g,future:_extends$1({v7_relativeSplatPath:!1},b)}),[j,b,d,g]);typeof o=="string"&&(o=parsePath(o));let{pathname:rt="/",search:_e="",hash:st="",state:ut=null,key:gt="default"}=o,yt=reactExports$1.useMemo(()=>{let Pt=stripBasename(rt,j);return Pt==null?null:{location:{pathname:Pt,search:_e,hash:st,state:ut,key:gt},navigationType:c}},[j,rt,_e,st,ut,gt,c]);return yt==null?null:reactExports$1.createElement(NavigationContext.Provider,{value:$},reactExports$1.createElement(LocationContext.Provider,{children:i,value:yt}))}function Routes(e){let{children:a,location:i}=e;return useRoutes(createRoutesFromChildren(a),i)}new Promise(()=>{});function createRoutesFromChildren(e,a){a===void 0&&(a=[]);let i=[];return reactExports$1.Children.forEach(e,(o,c)=>{if(!reactExports$1.isValidElement(o))return;let d=[...a,c];if(o.type===reactExports$1.Fragment){i.push.apply(i,createRoutesFromChildren(o.props.children,d));return}o.type!==Route&&invariant(!1),!o.props.index||!o.props.children||invariant(!1);let g={id:o.props.id||d.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(g.children=createRoutesFromChildren(o.props.children,d)),i.push(g)}),i}/**
 * React Router DOM v6.21.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const START_TRANSITION="startTransition",startTransitionImpl=React$2[START_TRANSITION];function BrowserRouter(e){let{basename:a,children:i,future:o,window:c}=e,d=reactExports$1.useRef();d.current==null&&(d.current=createBrowserHistory({window:c,v5Compat:!0}));let g=d.current,[b,j]=reactExports$1.useState({action:g.action,location:g.location}),{v7_startTransition:$}=o||{},rt=reactExports$1.useCallback(_e=>{$&&startTransitionImpl?startTransitionImpl(()=>j(_e)):j(_e)},[j,$]);return reactExports$1.useLayoutEffect(()=>g.listen(rt),[g,rt]),reactExports$1.createElement(Router,{basename:a,children:i,location:b.location,navigationType:b.action,navigator:g,future:o})}var DataRouterHook;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function noop$1(){}function returnTrue(){return!0}function charIsNumber(e){return!!(e||"").match(/\d/)}function isNil(e){return e==null}function escapeRegExp(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function getThousandsGroupRegex(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function applyThousandSeparator(e,a,i){var o=getThousandsGroupRegex(i),c=e.search(/[1-9]/);return c=c===-1?e.length:c,e.substring(0,c)+e.substring(c,e.length).replace(o,"$1"+a)}function splitDecimal(e,a){a===void 0&&(a=!0);var i=e[0]==="-",o=i&&a;e=e.replace("-","");var c=e.split("."),d=c[0],g=c[1]||"";return{beforeDecimal:d,afterDecimal:g,hasNagation:i,addNegation:o}}function fixLeadingZero(e){if(!e)return e;var a=e[0]==="-";a&&(e=e.substring(1,e.length));var i=e.split("."),o=i[0].replace(/^0+/,"")||"0",c=i[1]||"";return(a?"-":"")+o+(c?"."+c:"")}function limitToScale(e,a,i){for(var o="",c=i?"0":"",d=0;d<=a-1;d++)o+=e[d]||c;return o}function repeat$1(e,a){return Array(a+1).join(e)}function toNumericString(e){e+="";var a=e[0]==="-"?"-":"";a&&(e=e.substring(1));var i=e.split(/[eE]/g),o=i[0],c=i[1];if(c=Number(c),!c)return a+o;o=o.replace(".","");var d=1+c,g=o.length;return d<0?o="0."+repeat$1("0",Math.abs(d))+o:d>=g?o=o+repeat$1("0",d-g):o=(o.substring(0,d)||"0")+"."+o.substring(d),a+o}function roundToPrecision(e,a,i){if(["","-"].indexOf(e)!==-1)return e;var o=e.indexOf(".")!==-1&&a,c=splitDecimal(e),d=c.beforeDecimal,g=c.afterDecimal,b=c.hasNagation,j=parseFloat("0."+(g||"0")),$=g.length<=a?"0."+g:j.toFixed(a),rt=$.split("."),_e=d.split("").reverse().reduce(function(yt,Pt,wt){return yt.length>wt?(Number(yt[0])+Number(Pt)).toString()+yt.substring(1,yt.length):Pt+yt},rt[0]),st=limitToScale(rt[1]||"",Math.min(a,g.length),i),ut=b?"-":"",gt=o?".":"";return""+ut+_e+gt+st}function setCaretPosition(e,a){if(e.value=e.value,e!==null){if(e.createTextRange){var i=e.createTextRange();return i.move("character",a),i.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(a,a),!0):(e.focus(),!1)}}function findChangedIndex(e,a){for(var i=0,o=0,c=e.length,d=a.length;e[i]===a[i]&&i<c;)i++;for(;e[c-1-o]===a[d-1-o]&&d-o>i&&c-o>i;)o++;return{start:i,end:c-o}}function clamp(e,a,i){return Math.min(Math.max(e,a),i)}function getCurrentCaretPosition(e){return Math.max(e.selectionStart,e.selectionEnd)}function addInputMode(e){return e||typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function objectWithoutProperties(e,a){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&a.indexOf(o)===-1&&(i[o]=e[o]);return i}var defaultProps={displayType:"input",decimalSeparator:".",thousandsGroupStyle:"thousand",fixedDecimalScale:!1,prefix:"",suffix:"",allowNegative:!0,allowEmptyFormatting:!1,allowLeadingZeros:!1,isNumericString:!1,type:"text",onValueChange:noop$1,onChange:noop$1,onKeyDown:noop$1,onMouseUp:noop$1,onFocus:noop$1,onBlur:noop$1,isAllowed:returnTrue},NumberFormat=function(e){function a(i){e.call(this,i);var o=i.defaultValue;this.validateProps();var c=this.formatValueProp(o);this.state={value:c,numAsString:this.removeFormatting(c),mounted:!1},this.selectionBeforeInput={selectionStart:0,selectionEnd:0},this.onChange=this.onChange.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onFocus=this.onFocus.bind(this),this.onBlur=this.onBlur.bind(this)}return e&&(a.__proto__=e),a.prototype=Object.create(e&&e.prototype),a.prototype.constructor=a,a.prototype.componentDidMount=function(){this.setState({mounted:!0})},a.prototype.componentDidUpdate=function(o){this.updateValueIfRequired(o)},a.prototype.componentWillUnmount=function(){clearTimeout(this.focusTimeout),clearTimeout(this.caretPositionTimeout)},a.prototype.updateValueIfRequired=function(o){var c=this,d=c.props,g=c.state,b=c.focusedElm,j=g.value,$=g.numAsString;if($===void 0&&($=""),o!==d){this.validateProps();var rt=this.formatNumString($),_e=isNil(d.value)?rt:this.formatValueProp(),st=this.removeFormatting(_e),ut=parseFloat(st),gt=parseFloat($);((!isNaN(ut)||!isNaN(gt))&&ut!==gt||rt!==j||b===null&&_e!==j)&&this.updateValue({formattedValue:_e,numAsString:st,input:b,source:"prop",event:null})}},a.prototype.getFloatString=function(o){o===void 0&&(o="");var c=this.props,d=c.decimalScale,g=this.getSeparators(),b=g.decimalSeparator,j=this.getNumberRegex(!0),$=o[0]==="-";$&&(o=o.replace("-","")),b&&d===0&&(o=o.split(b)[0]),o=(o.match(j)||[]).join("").replace(b,".");var rt=o.indexOf(".");return rt!==-1&&(o=o.substring(0,rt)+"."+o.substring(rt+1,o.length).replace(new RegExp(escapeRegExp(b),"g"),"")),$&&(o="-"+o),o},a.prototype.getNumberRegex=function(o,c){var d=this.props,g=d.format,b=d.decimalScale,j=d.customNumerals,$=this.getSeparators(),rt=$.decimalSeparator;return new RegExp("[0-9"+(j?j.join(""):"")+"]"+(rt&&b!==0&&!c&&!g?"|"+escapeRegExp(rt):""),o?"g":void 0)},a.prototype.getSeparators=function(){var o=this.props,c=o.decimalSeparator,d=this.props,g=d.thousandSeparator,b=d.allowedDecimalSeparators;return g===!0&&(g=","),b||(b=[c,"."]),{decimalSeparator:c,thousandSeparator:g,allowedDecimalSeparators:b}},a.prototype.getMaskAtIndex=function(o){var c=this.props,d=c.mask;return d===void 0&&(d=" "),typeof d=="string"?d:d[o]||" "},a.prototype.getValueObject=function(o,c){var d=parseFloat(c);return{formattedValue:o,value:c,floatValue:isNaN(d)?void 0:d}},a.prototype.validateProps=function(){var o=this.props,c=o.mask,d=this.getSeparators(),g=d.decimalSeparator,b=d.thousandSeparator;if(g===b)throw new Error(`
          Decimal separator can't be same as thousand separator.
          thousandSeparator: `+b+` (thousandSeparator = {true} is same as thousandSeparator = ",")
          decimalSeparator: `+g+` (default value for decimalSeparator is .)
       `);if(c){var j=c==="string"?c:c.toString();if(j.match(/\d/g))throw new Error(`
          Mask `+c+` should not contain numeric character;
        `)}},a.prototype.setPatchedCaretPosition=function(o,c,d){setCaretPosition(o,c),this.caretPositionTimeout=setTimeout(function(){o.value===d&&setCaretPosition(o,c)},0)},a.prototype.correctCaretPosition=function(o,c,d){var g=this.props,b=g.prefix,j=g.suffix,$=g.format;if(o==="")return 0;if(c=clamp(c,0,o.length),!$){var rt=o[0]==="-";return clamp(c,b.length+(rt?1:0),o.length-j.length)}if(typeof $=="function"||$[c]==="#"&&charIsNumber(o[c])||$[c-1]==="#"&&charIsNumber(o[c-1]))return c;var _e=$.indexOf("#"),st=$.lastIndexOf("#");c=clamp(c,_e,st+1);for(var ut=$.substring(c,$.length).indexOf("#"),gt=c,yt=c+(ut===-1?0:ut);gt>_e&&($[gt]!=="#"||!charIsNumber(o[gt]));)gt-=1;var Pt=!charIsNumber(o[yt])||d==="left"&&c!==_e||c-gt<yt-c;return Pt?charIsNumber(o[gt])?gt+1:gt:yt},a.prototype.getCaretPosition=function(o,c,d){var g=this.props,b=g.format,j=this.state.value,$=this.getNumberRegex(!0),rt=(o.match($)||[]).join(""),_e=(c.match($)||[]).join(""),st,ut;for(st=0,ut=0;ut<d;ut++){var gt=o[ut]||"",yt=c[st]||"";if(!(!gt.match($)&&gt!==yt)&&!(gt==="0"&&yt.match($)&&yt!=="0"&&rt.length!==_e.length)){for(;gt!==c[st]&&st<c.length;)st++;st++}}return typeof b=="string"&&!j&&(st=c.length),st=this.correctCaretPosition(c,st),st},a.prototype.removePrefixAndSuffix=function(o){var c=this.props,d=c.format,g=c.prefix,b=c.suffix;if(!d&&o){var j=o[0]==="-";j&&(o=o.substring(1,o.length)),o=g&&o.indexOf(g)===0?o.substring(g.length,o.length):o;var $=o.lastIndexOf(b);o=b&&$!==-1&&$===o.length-b.length?o.substring(0,$):o,j&&(o="-"+o)}return o},a.prototype.removePatternFormatting=function(o){for(var c=this.props,d=c.format,g=d.split("#").filter(function(ut){return ut!==""}),b=0,j="",$=0,rt=g.length;$<=rt;$++){var _e=g[$]||"",st=$===rt?o.length:o.indexOf(_e,b);if(st===-1){j=o;break}else j+=o.substring(b,st),b=st+_e.length}return(j.match(this.getNumberRegex(!0))||[]).join("")},a.prototype.removeFormatting=function(o){var c=this.props,d=c.format,g=c.removeFormatting;return o&&(d?typeof d=="string"?o=this.removePatternFormatting(o):typeof g=="function"?o=g(o):o=(o.match(this.getNumberRegex(!0))||[]).join(""):(o=this.removePrefixAndSuffix(o),o=this.getFloatString(o)),o)},a.prototype.formatWithPattern=function(o){for(var c=this.props,d=c.format,g=0,b=d.split(""),j=0,$=d.length;j<$;j++)d[j]==="#"&&(b[j]=o[g]||this.getMaskAtIndex(g),g+=1);return b.join("")},a.prototype.formatAsNumber=function(o){var c=this.props,d=c.decimalScale,g=c.fixedDecimalScale,b=c.prefix,j=c.suffix,$=c.allowNegative,rt=c.thousandsGroupStyle,_e=this.getSeparators(),st=_e.thousandSeparator,ut=_e.decimalSeparator,gt=o.indexOf(".")!==-1||d&&g,yt=splitDecimal(o,$),Pt=yt.beforeDecimal,wt=yt.afterDecimal,Ct=yt.addNegation;return d!==void 0&&(wt=limitToScale(wt,d,g)),st&&(Pt=applyThousandSeparator(Pt,st,rt)),b&&(Pt=b+Pt),j&&(wt=wt+j),Ct&&(Pt="-"+Pt),o=Pt+(gt&&ut||"")+wt,o},a.prototype.formatNumString=function(o){o===void 0&&(o="");var c=this.props,d=c.format,g=c.allowEmptyFormatting,b=c.customNumerals,j=o;if(b&&b.length===10){var $=new RegExp("["+b.join("")+"]","g");j=o.replace($,function(rt){return b.indexOf(rt).toString()})}return o===""&&!g?j="":o==="-"&&!d?j="-":typeof d=="string"?j=this.formatWithPattern(j):typeof d=="function"?j=d(j):j=this.formatAsNumber(j),j},a.prototype.formatValueProp=function(o){var c=this.props,d=c.format,g=c.decimalScale,b=c.fixedDecimalScale,j=c.allowEmptyFormatting,$=this.props,rt=$.value,_e=$.isNumericString;rt=isNil(rt)?o:rt;var st=!rt&&rt!==0;if(st&&j&&(rt=""),st&&!j)return"";typeof rt=="number"&&(rt=toNumericString(rt),_e=!0),rt==="Infinity"&&_e&&(rt=""),_e&&!d&&typeof g=="number"&&(rt=roundToPrecision(rt,g,b));var ut=_e?this.formatNumString(rt):this.formatInput(rt);return ut},a.prototype.formatNegation=function(o){o===void 0&&(o="");var c=this.props,d=c.allowNegative,g=new RegExp("(-)"),b=new RegExp("(-)(.)*(-)"),j=g.test(o),$=b.test(o);return o=o.replace(/-/g,""),j&&!$&&d&&(o="-"+o),o},a.prototype.formatInput=function(o){o===void 0&&(o="");var c=this.props,d=c.format;return d||(o=this.removePrefixAndSuffix(o),o=this.formatNegation(o)),o=this.removeFormatting(o),this.formatNumString(o)},a.prototype.isCharacterAFormat=function(o,c){var d=this.props,g=d.format,b=d.prefix,j=d.suffix,$=d.decimalScale,rt=d.fixedDecimalScale,_e=this.getSeparators(),st=_e.decimalSeparator;return!!(typeof g=="string"&&g[o]!=="#"||!g&&(o<b.length||o>=c.length-j.length||$&&rt&&c[o]===st))},a.prototype.correctInputValue=function(o,c,d){var g=this,b=this.props,j=b.format,$=b.allowNegative,rt=b.prefix,_e=b.suffix,st=b.decimalScale,ut=this.getSeparators(),gt=ut.allowedDecimalSeparators,yt=ut.decimalSeparator,Pt=this.state.numAsString||"",wt=this.selectionBeforeInput,Ct=wt.selectionStart,At=wt.selectionEnd,Tt=findChangedIndex(c,d),kt=Tt.start,It=Tt.end;if(!j&&kt===It&&gt.indexOf(d[Ct])!==-1){var Lt=st===0?"":yt;return d.substr(0,Ct)+Lt+d.substr(Ct+1,d.length)}var Ft=j?0:rt.length,Nt=c.length-(j?0:_e.length);if(d.length>c.length||!d.length||kt===It||Ct===0&&At===c.length||kt===0&&It===c.length||Ct===Ft&&At===Nt)return d;var Ht=c.substr(kt,It-kt),Gr=!![].concat(Ht).find(function(gn,Zn){return g.isCharacterAFormat(Zn+kt,c)});if(Gr){var hs=c.substr(kt),_s={},hn=[];[].concat(hs).forEach(function(gn,Zn){g.isCharacterAFormat(Zn+kt,c)?_s[Zn]=gn:Zn>Ht.length-1&&hn.push(gn)}),Object.keys(_s).forEach(function(gn){hn.length>gn?hn.splice(gn,0,_s[gn]):hn.push(_s[gn])}),d=c.substr(0,kt)+hn.join("")}if(!j){var Qn=this.removeFormatting(d),ds=splitDecimal(Qn,$),un=ds.beforeDecimal,dr=ds.afterDecimal,us=ds.addNegation,Nn=o<d.indexOf(yt)+1;if(Qn.length<Pt.length&&Nn&&un===""&&!parseFloat(dr))return us?"-":""}return d},a.prototype.updateValue=function(o){var c=o.formattedValue,d=o.input,g=o.setCaretPosition;g===void 0&&(g=!0);var b=o.source,j=o.event,$=o.numAsString,rt=o.caretPos,_e=this.props,st=_e.onValueChange,ut=this.state,gt=ut.value;if(d){if(rt===void 0&&g){var yt=o.inputValue||d.value,Pt=getCurrentCaretPosition(d);d.value=c,rt=this.getCaretPosition(yt,c,Pt)}d.value=c,g&&this.setPatchedCaretPosition(d,rt,c)}$===void 0&&($=this.removeFormatting(c)),c!==gt&&(this.setState({value:c,numAsString:$}),st(this.getValueObject(c,$),{event:j,source:b}))},a.prototype.onChange=function(o){var c=o.target,d=c.value,g=this,b=g.state,j=g.props,$=j.isAllowed,rt=b.value||"",_e=getCurrentCaretPosition(c);d=this.correctInputValue(_e,rt,d);var st=this.formatInput(d)||"",ut=this.removeFormatting(st),gt=this.getValueObject(st,ut),yt=$(gt);yt||(st=rt),this.updateValue({formattedValue:st,numAsString:ut,inputValue:d,input:c,event:o,source:"event"}),yt&&j.onChange(o)},a.prototype.onBlur=function(o){var c=this,d=c.props,g=c.state,b=d.format,j=d.onBlur,$=d.allowLeadingZeros,rt=g.numAsString,_e=g.value;if(this.focusedElm=null,clearTimeout(this.focusTimeout),clearTimeout(this.caretPositionTimeout),!b){isNaN(parseFloat(rt))&&(rt=""),$||(rt=fixLeadingZero(rt));var st=this.formatNumString(rt);if(st!==_e){this.updateValue({formattedValue:st,numAsString:rt,input:o.target,setCaretPosition:!1,event:o,source:"event"}),j(o);return}}j(o)},a.prototype.onKeyDown=function(o){var c=o.target,d=o.key,g=c.selectionStart,b=c.selectionEnd,j=c.value;j===void 0&&(j="");var $,rt=this.props,_e=rt.decimalScale,st=rt.fixedDecimalScale,ut=rt.prefix,gt=rt.suffix,yt=rt.format,Pt=rt.onKeyDown,wt=_e!==void 0&&st,Ct=this.getNumberRegex(!1,wt),At=new RegExp("-"),Tt=typeof yt=="string";if(this.selectionBeforeInput={selectionStart:g,selectionEnd:b},d==="ArrowLeft"||d==="Backspace"?$=g-1:d==="ArrowRight"?$=g+1:d==="Delete"&&($=g),$===void 0||g!==b){Pt(o);return}var kt=$,It=Tt?yt.indexOf("#"):ut.length,Lt=Tt?yt.lastIndexOf("#")+1:j.length-gt.length;if(d==="ArrowLeft"||d==="ArrowRight"){var Ft=d==="ArrowLeft"?"left":"right";kt=this.correctCaretPosition(j,$,Ft)}else if(d==="Delete"&&!Ct.test(j[$])&&!At.test(j[$]))for(;!Ct.test(j[kt])&&kt<Lt;)kt++;else if(d==="Backspace"&&!Ct.test(j[$])){if(g<=It+1&&j[0]==="-"&&typeof yt>"u"){var Nt=j.substring(1);this.updateValue({formattedValue:Nt,caretPos:kt,input:c,event:o,source:"event"})}else if(!At.test(j[$])){for(;!Ct.test(j[kt-1])&&kt>It;)kt--;kt=this.correctCaretPosition(j,kt,"left")}}(kt!==$||$<It||$>Lt)&&(o.preventDefault(),this.setPatchedCaretPosition(c,kt,j)),o.isUnitTestRun&&this.setPatchedCaretPosition(c,kt,j),Pt(o)},a.prototype.onMouseUp=function(o){var c=o.target,d=c.selectionStart,g=c.selectionEnd,b=c.value;if(b===void 0&&(b=""),d===g){var j=this.correctCaretPosition(b,d);j!==d&&this.setPatchedCaretPosition(c,j,b)}this.props.onMouseUp(o)},a.prototype.onFocus=function(o){var c=this;o.persist(),this.focusedElm=o.target,this.focusTimeout=setTimeout(function(){var d=o.target,g=d.selectionStart,b=d.selectionEnd,j=d.value;j===void 0&&(j="");var $=c.correctCaretPosition(j,g);$!==g&&!(g===0&&b===j.length)&&c.setPatchedCaretPosition(d,$,j),c.props.onFocus(o)},0)},a.prototype.render=function(){var o=this.props,c=o.type,d=o.displayType,g=o.customInput,b=o.renderText,j=o.getInputRef,$=o.format;o.thousandSeparator,o.decimalSeparator,o.allowedDecimalSeparators,o.thousandsGroupStyle,o.decimalScale,o.fixedDecimalScale,o.prefix,o.suffix,o.removeFormatting,o.mask,o.defaultValue,o.isNumericString,o.allowNegative,o.allowEmptyFormatting,o.allowLeadingZeros,o.onValueChange,o.isAllowed,o.customNumerals,o.onChange,o.onKeyDown,o.onMouseUp,o.onFocus,o.onBlur,o.value;var rt=objectWithoutProperties(o,["type","displayType","customInput","renderText","getInputRef","format","thousandSeparator","decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","decimalScale","fixedDecimalScale","prefix","suffix","removeFormatting","mask","defaultValue","isNumericString","allowNegative","allowEmptyFormatting","allowLeadingZeros","onValueChange","isAllowed","customNumerals","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value"]),_e=rt,st=this.state,ut=st.value,gt=st.mounted,yt=gt&&addInputMode($)?"numeric":void 0,Pt=Object.assign({inputMode:yt},_e,{type:c,value:ut,onChange:this.onChange,onKeyDown:this.onKeyDown,onMouseUp:this.onMouseUp,onFocus:this.onFocus,onBlur:this.onBlur});if(d==="text")return b?b(ut,_e)||null:React$1.createElement("span",Object.assign({},_e,{ref:j}),ut);if(g){var wt=g;return React$1.createElement(wt,Object.assign({},Pt,{ref:j}))}return React$1.createElement("input",Object.assign({},Pt,{ref:j}))},a}(React$1.Component);NumberFormat.defaultProps=defaultProps;const numberWithCommas=e=>jsxRuntimeExports.jsx(NumberFormat,{value:e,displayType:"text",thousandSeparator:!0}),Egc=()=>{const[e,a]=reactExports$1.useState(0);return reactExports$1.useEffect(async i=>{await fetch("https://api.coingecko.com/api/v3/simple/price?ids=egoras-credit&vs_currencies=usd&include_market_cap=false&include_24hr_vol=false&include_24hr_change=true&include_last_updated_at=true").then(c=>c.json()).then(c=>{const d=c["egoras-credit"].usd;console.log(d),a(d==="0"?"0":d)})},[]),jsxRuntimeExports.jsxs("div",{className:"egox_token_div",children:[jsxRuntimeExports.jsxs("section",{className:"egox_token_div_section1",children:[jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section1area",children:[jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section1area_cont1",children:[jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section1area1",children:[jsxRuntimeExports.jsx("div",{className:"egox_token_div_section1area1_title",children:"Egochain (EGC) coin"}),jsxRuntimeExports.jsx("div",{className:"egox_token_div_section1area1_para",children:"A Powerhouse for Innovation."})]}),jsxRuntimeExports.jsx("div",{className:"egox_token_div_section1area2",children:jsxRuntimeExports.jsx("img",{src:"/img/1_inch_token_image_dummy.png",alt:"",className:"egox_token_div_section1area2_img"})})]}),jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section1area_cont2",children:[jsxRuntimeExports.jsxs("div",{className:"home_div_section1_area_stats_div1",children:[jsxRuntimeExports.jsxs("div",{className:"home_div_section1_area_stats_div1_title",children:["$",e]}),jsxRuntimeExports.jsx("div",{className:"home_div_section1_area_stats_div1_para",children:"Current Price"})]}),jsxRuntimeExports.jsxs("div",{className:"home_div_section1_area_stats_div1",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section1_area_stats_div1_title",children:"74k"}),jsxRuntimeExports.jsx("div",{className:"home_div_section1_area_stats_div1_para",children:"Circulating Supply"})]}),jsxRuntimeExports.jsxs("div",{className:"home_div_section1_area_stats_div1",children:[jsxRuntimeExports.jsxs("div",{className:"home_div_section1_area_stats_div1_title",children:["$",numberWithCommas((e*74467.35244).toFixed(2))]}),jsxRuntimeExports.jsx("div",{className:"home_div_section1_area_stats_div1_para",children:"Market Cap"})]}),jsxRuntimeExports.jsxs("div",{className:"home_div_section1_area_stats_div1",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section1_area_stats_div1_title",children:"35k"}),jsxRuntimeExports.jsx("div",{className:"home_div_section1_area_stats_div1_para",children:"Holders"})]})]})]})}),jsxRuntimeExports.jsx("img",{src:"/img/grains_ellipse.png",alt:"",className:"grains_ellipse"})]}),jsxRuntimeExports.jsxs("section",{className:"egox_token_div_section2",children:[jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section2_area",children:[jsxRuntimeExports.jsx("div",{className:"egox_token_div_section2_area_title",children:"EGC Utility"}),jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_paragraph",children:"Egochain offers a compelling blend of democratic governance and token scarcity. EGC holders directly influence the platform's trajectory through their votes for the Egochain Committee, a community-driven body responsible for the blockchain's stability and performance. Composed of elected members and consensus nodes, this committee ensures network liveliness and optimizes critical parameters. Additionally, EGC's indivisible units and limited total supply (74,467.35244 EGC) contribute to its distinct scarcity, enhancing its value proposition within the blockchain ecosystem."})]})}),jsxRuntimeExports.jsx("img",{src:"/img/grains_ellipse.png",alt:"",className:"grains_ellipse"})]})]})};var Menu={},_interopRequireDefault$a=interopRequireDefaultExports;Object.defineProperty(Menu,"__esModule",{value:!0});var default_1$a=Menu.default=void 0,_createSvgIcon$9=_interopRequireDefault$a(requireCreateSvgIcon()),_jsxRuntime$9=jsxRuntimeExports;default_1$a=Menu.default=(0,_createSvgIcon$9.default)((0,_jsxRuntime$9.jsx)("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"}),"Menu");var Close={},_interopRequireDefault$9=interopRequireDefaultExports;Object.defineProperty(Close,"__esModule",{value:!0});var default_1$9=Close.default=void 0,_createSvgIcon$8=_interopRequireDefault$9(requireCreateSvgIcon()),_jsxRuntime$8=jsxRuntimeExports;default_1$9=Close.default=(0,_createSvgIcon$8.default)((0,_jsxRuntime$8.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");var CallMade={},_interopRequireDefault$8=interopRequireDefaultExports;Object.defineProperty(CallMade,"__esModule",{value:!0});var default_1$8=CallMade.default=void 0,_createSvgIcon$7=_interopRequireDefault$8(requireCreateSvgIcon()),_jsxRuntime$7=jsxRuntimeExports;default_1$8=CallMade.default=(0,_createSvgIcon$7.default)((0,_jsxRuntime$7.jsx)("path",{d:"M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5z"}),"CallMade");var KeyboardArrowDown={},_interopRequireDefault$7=interopRequireDefaultExports;Object.defineProperty(KeyboardArrowDown,"__esModule",{value:!0});var default_1$7=KeyboardArrowDown.default=void 0,_createSvgIcon$6=_interopRequireDefault$7(requireCreateSvgIcon()),_jsxRuntime$6=jsxRuntimeExports;default_1$7=KeyboardArrowDown.default=(0,_createSvgIcon$6.default)((0,_jsxRuntime$6.jsx)("path",{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6z"}),"KeyboardArrowDown");var Info={},_interopRequireDefault$6=interopRequireDefaultExports;Object.defineProperty(Info,"__esModule",{value:!0});var default_1$6=Info.default=void 0,_createSvgIcon$5=_interopRequireDefault$6(requireCreateSvgIcon()),_jsxRuntime$5=jsxRuntimeExports;default_1$6=Info.default=(0,_createSvgIcon$5.default)((0,_jsxRuntime$5.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"}),"Info");var Description={},_interopRequireDefault$5=interopRequireDefaultExports;Object.defineProperty(Description,"__esModule",{value:!0});var default_1$5=Description.default=void 0,_createSvgIcon$4=_interopRequireDefault$5(requireCreateSvgIcon()),_jsxRuntime$4=jsxRuntimeExports;default_1$5=Description.default=(0,_createSvgIcon$4.default)((0,_jsxRuntime$4.jsx)("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zm2 16H8v-2h8zm0-4H8v-2h8zm-3-5V3.5L18.5 9z"}),"Description");var DocumentScanner={},_interopRequireDefault$4=interopRequireDefaultExports;Object.defineProperty(DocumentScanner,"__esModule",{value:!0});var default_1$4=DocumentScanner.default=void 0,_createSvgIcon$3=_interopRequireDefault$4(requireCreateSvgIcon()),_jsxRuntime$3=jsxRuntimeExports;default_1$4=DocumentScanner.default=(0,_createSvgIcon$3.default)((0,_jsxRuntime$3.jsx)("path",{d:"M7 3H4v3H2V1h5zm15 3V1h-5v2h3v3zM7 21H4v-3H2v5h5zm13-3v3h-3v2h5v-5zm-1 0c0 1.1-.9 2-2 2H7c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2zM15 8H9v2h6zm0 3H9v2h6zm0 3H9v2h6z"}),"DocumentScanner");var JoinLeft={},_interopRequireDefault$3=interopRequireDefaultExports;Object.defineProperty(JoinLeft,"__esModule",{value:!0});var default_1$3=JoinLeft.default=void 0,_createSvgIcon$2=_interopRequireDefault$3(requireCreateSvgIcon()),_jsxRuntime$2=jsxRuntimeExports;default_1$3=JoinLeft.default=(0,_createSvgIcon$2.default)([(0,_jsxRuntime$2.jsx)("ellipse",{cx:"12",cy:"12",rx:"3",ry:"5.74"},"0"),(0,_jsxRuntime$2.jsx)("path",{d:"M7.5 12c0-.97.23-4.16 3.03-6.5C9.75 5.19 8.9 5 8 5c-3.86 0-7 3.14-7 7s3.14 7 7 7c.9 0 1.75-.19 2.53-.5-2.8-2.34-3.03-5.53-3.03-6.5M16 5c-.9 0-1.75.19-2.53.5.61.51 1.1 1.07 1.49 1.63.33-.08.68-.13 1.04-.13 2.76 0 5 2.24 5 5s-2.24 5-5 5c-.36 0-.71-.05-1.04-.13-.39.56-.88 1.12-1.49 1.63.78.31 1.63.5 2.53.5 3.86 0 7-3.14 7-7s-3.14-7-7-7"},"1")],"JoinLeft");var WaterDrop={},_interopRequireDefault$2=interopRequireDefaultExports;Object.defineProperty(WaterDrop,"__esModule",{value:!0});var default_1$2=WaterDrop.default=void 0,_createSvgIcon$1=_interopRequireDefault$2(requireCreateSvgIcon()),_jsxRuntime$1=jsxRuntimeExports;default_1$2=WaterDrop.default=(0,_createSvgIcon$1.default)((0,_jsxRuntime$1.jsx)("path",{d:"M12 2c-5.33 4.55-8 8.48-8 11.8 0 4.98 3.8 8.2 8 8.2s8-3.22 8-8.2c0-3.32-2.67-7.25-8-11.8M7.83 14c.37 0 .67.26.74.62.41 2.22 2.28 2.98 3.64 2.87.43-.02.79.32.79.75 0 .4-.32.73-.72.75-2.13.13-4.62-1.09-5.19-4.12-.08-.45.28-.87.74-.87"}),"WaterDrop");const Header=()=>{const[e,a]=reactExports$1.useState(!1),i=()=>{a(!e)};return jsxRuntimeExports.jsxs("div",{className:"header_div",children:[jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsxs("div",{className:"header_div_area",children:[jsxRuntimeExports.jsxs("a",{href:"/",className:"header_div_area_1",children:[jsxRuntimeExports.jsx("img",{src:"/img/egax_logo.png",alt:"",className:"header_div_area_1_img"}),"Egochain"]}),jsxRuntimeExports.jsxs("div",{className:"header_div_area_2",children:[jsxRuntimeExports.jsxs("div",{className:"header_div_area_2_div",children:["Resources"," ",jsxRuntimeExports.jsx(default_1$7,{className:"header_div_area_2_div_icon"}),jsxRuntimeExports.jsxs("div",{className:"header_div_area_2_div_drop",children:[jsxRuntimeExports.jsxs("a",{href:window.location.protocol==="http:"?`http://localhost:${window.location.port}/egax/coin/info`:"https://egochain.org/egax/coin/info",className:"header_div_area_2_link1",children:[jsxRuntimeExports.jsx("img",{src:"/egax_logo.png",alt:"",className:"header_div_area_2_link1Img"})," ","EGAX Coin"]}),jsxRuntimeExports.jsxs("a",{href:window.location.protocol==="http:"?`http://localhost:${window.location.port}/egc/coin/info`:"https://egochain.org/egc/coin/info",className:"header_div_area_2_link1",children:[jsxRuntimeExports.jsx("img",{src:"/egc_icon2.svg",alt:"",className:"header_div_area_2_link1Img"})," ","EGC Coin"]}),jsxRuntimeExports.jsxs("a",{href:window.location.protocol==="http:"?`http://localhost:${window.location.port}/about`:"https://egochain.org/about",className:"header_div_area_2_link1",children:[jsxRuntimeExports.jsx(default_1$6,{className:"header_div_area_2_link1_icon"})," About"]}),jsxRuntimeExports.jsxs("a",{href:window.location.protocol==="http:"?`http://localhost:${window.location.port}/whitepaper`:"https://egochain.org/whitepaper",className:"header_div_area_2_link1",children:[jsxRuntimeExports.jsx(default_1$5,{className:"header_div_area_2_link1_icon"})," ","Whitepaper"]})]})]}),jsxRuntimeExports.jsx("a",{href:"/wallet",className:"header_div_area_2_link1",children:"Ego Wallet"}),jsxRuntimeExports.jsxs("a",{href:"https://github.com/EgorasMarket",className:"header_div_area_2_link1",target:"_blank",children:["Developers",jsxRuntimeExports.jsx(default_1$8,{className:"header_div_area_2_link1_icon"})]}),jsxRuntimeExports.jsxs("div",{className:"header_div_area_2_div",children:["Products"," ",jsxRuntimeExports.jsx(default_1$7,{className:"header_div_area_2_div_icon"}),jsxRuntimeExports.jsxs("div",{className:"header_div_area_2_div_drop",children:[jsxRuntimeExports.jsxs("a",{href:"https://egoswap.io",className:"header_div_area_2_link1",target:"_blank",children:[jsxRuntimeExports.jsx(default_1$3,{className:"header_div_area_2_link1_icon"})," ","Egoswap"," ",jsxRuntimeExports.jsx(default_1$8,{className:"header_div_area_2_link1_icon2"})]}),jsxRuntimeExports.jsxs("a",{href:"https://egoscan.io/",className:"header_div_area_2_link1",target:"_blank",children:[jsxRuntimeExports.jsx(default_1$4,{className:"header_div_area_2_link1_icon"})," ","Explorer"," ",jsxRuntimeExports.jsx(default_1$8,{className:"header_div_area_2_link1_icon2"})]}),jsxRuntimeExports.jsxs("a",{href:window.location.protocol==="http:"?`http://faucet.localhost:${window.location.port}/`:"https://faucet.egochain.org/",target:"_blank",className:"header_div_area_2_link1",children:[jsxRuntimeExports.jsx(default_1$2,{className:"header_div_area_2_link1_icon"})," ","Faucet"," ",jsxRuntimeExports.jsx(default_1$8,{className:"header_div_area_2_link1_icon2"})]})]})]}),jsxRuntimeExports.jsx(default_1$a,{className:"header_div_area_2_menu_icon",onClick:i})]})]})}),e?jsxRuntimeExports.jsx("div",{className:"headerMenuDiv",children:jsxRuntimeExports.jsxs("div",{className:"headerMenuDiv_cont",children:[jsxRuntimeExports.jsx("div",{className:"headerMenuDiv_cont_1",children:jsxRuntimeExports.jsx(default_1$9,{className:"headerMenuDiv_cont_1_icon",onClick:i})}),jsxRuntimeExports.jsxs("div",{className:"headerMenuDiv_cont_body",children:[jsxRuntimeExports.jsx("a",{href:"/wallet",className:"headerMenuDiv_cont_body_link1",children:"Ego Wallet"}),jsxRuntimeExports.jsx("a",{href:window.location.protocol==="http:"?`http://localhost:${window.location.port}/egax/coin/info`:"https://egochain.org/egax/coin/info",className:"headerMenuDiv_cont_body_link1",children:"EGAX Coin"}),jsxRuntimeExports.jsx("a",{href:window.location.protocol==="http:"?`http://localhost:${window.location.port}/egc/coin/info`:"https://egochain.org/egc/coin/info",className:"headerMenuDiv_cont_body_link1",children:"EGC Coin"}),jsxRuntimeExports.jsx("a",{href:window.location.protocol==="http:"?`http://localhost:${window.location.port}/about`:"https://egochain.org/about",className:"headerMenuDiv_cont_body_link1",children:"About"}),jsxRuntimeExports.jsx("a",{href:window.location.protocol==="http:"?`http://localhost:${window.location.port}/whitepaper`:"https://egochain.org/whitepaper",className:"headerMenuDiv_cont_body_link1",children:"White paper"}),jsxRuntimeExports.jsxs("a",{href:window.location.protocol==="http:"?`http://faucet.localhost:${window.location.port}/`:"https://faucet.egochain.org/",className:"headerMenuDiv_cont_body_link1",target:"_blank",children:[" ","Faucet",jsxRuntimeExports.jsx(default_1$8,{className:"header_div_area_2_link1_icon"})]}),jsxRuntimeExports.jsxs("a",{href:"https://github.com/EgorasMarket",target:"_blank",className:"headerMenuDiv_cont_body_link1",children:[" ","Developer",jsxRuntimeExports.jsx(default_1$8,{className:"header_div_area_2_link1_icon"})]}),jsxRuntimeExports.jsxs("a",{href:"https://egoswap.io",className:"headerMenuDiv_cont_body_link1",target:"_blank",children:[" ","Egoswap",jsxRuntimeExports.jsx(default_1$8,{className:"header_div_area_2_link1_icon"})]}),jsxRuntimeExports.jsxs("a",{href:"https://egoscan.io/",className:"headerMenuDiv_cont_body_link1",target:"_blank",children:[" ","Explorer",jsxRuntimeExports.jsx(default_1$8,{className:"header_div_area_2_link1_icon"})]}),jsxRuntimeExports.jsxs("a",{href:"https://egodao.org/",className:"headerMenuDiv_cont_body_link1",target:"_blank",children:[" ","Stake",jsxRuntimeExports.jsx(default_1$8,{className:"header_div_area_2_link1_icon"})]})]})]})}):null]})};var Twitter={},_interopRequireDefault$1=interopRequireDefaultExports;Object.defineProperty(Twitter,"__esModule",{value:!0});var default_1$1=Twitter.default=void 0;_interopRequireWildcard$1(reactExports$1);var _createSvgIcon=_interopRequireDefault$1(requireCreateSvgIcon()),_jsxRuntime=jsxRuntimeExports;function _getRequireWildcardCache(e){if(typeof WeakMap!="function")return null;var a=new WeakMap,i=new WeakMap;return(_getRequireWildcardCache=function(o){return o?i:a})(e)}function _interopRequireWildcard$1(e,a){if(!a&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var i=_getRequireWildcardCache(a);if(i&&i.has(e))return i.get(e);var o={__proto__:null},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in e)if(d!=="default"&&Object.prototype.hasOwnProperty.call(e,d)){var g=c?Object.getOwnPropertyDescriptor(e,d):null;g&&(g.get||g.set)?Object.defineProperty(o,d,g):o[d]=e[d]}return o.default=e,i&&i.set(e,o),o}default_1$1=Twitter.default=(0,_createSvgIcon.default)((0,_jsxRuntime.jsx)("path",{d:"M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"}),"Twitter");const Footer=()=>{const[e,a]=reactExports$1.useState(new Date().getFullYear());return reactExports$1.useEffect(()=>{const i=setInterval(()=>{a(new Date().getFullYear())},1e3);return()=>clearInterval(i)},[]),jsxRuntimeExports.jsx("div",{className:"footerDiv",id:"footer",children:jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsxs("div",{className:"footerDivArea",children:[jsxRuntimeExports.jsxs("div",{className:"footerDiv1",children:[jsxRuntimeExports.jsxs("div",{className:"footerDiv1_area1",children:[jsxRuntimeExports.jsxs("div",{className:"footerDiv1_area1_cont1",children:[jsxRuntimeExports.jsx("img",{src:"/img/egax_logo.png",alt:"",className:"footerDiv1_img2"}),"Egochain"]}),jsxRuntimeExports.jsx("div",{className:"footerDiv1_area1_cont2",children:jsxRuntimeExports.jsxs("div",{className:"footerDiv1_area1_cont2_links",children:[jsxRuntimeExports.jsxs("a",{href:"https://twitter.com/egorasHQ?ref_src=twsrc%5Egoogle%7Ctwcamp%5Eserp%7Ctwgr%5Eauthor",className:"footerDiv1_area1_cont2_links_link_tel",target:"_blank",children:[jsxRuntimeExports.jsx(default_1$1,{className:"footerDiv1_area1_cont2_links_link1"})," "]}),jsxRuntimeExports.jsxs("a",{href:"https://t.me/s/egorasmarket?before=480",className:"footerDiv1_area1_cont2_links_link_tel",target:"_blank",children:[jsxRuntimeExports.jsx(default_1$e,{className:"footerDiv1_area1_cont2_links_link1"})," "]}),jsxRuntimeExports.jsxs("a",{href:"https://github.com/EgorasMarket",className:"footerDiv1_area1_cont2_links_link_tel",target:"_blank",children:[jsxRuntimeExports.jsx(default_1$c,{className:"footerDiv1_area1_cont2_links_link1"})," "]}),jsxRuntimeExports.jsxs("a",{href:"https://www.youtube.com/channel/UCHfi5EwXig46xp5Dx8hVBHQ",className:"footerDiv1_area1_cont2_links_link_tel",target:"_blank",children:[jsxRuntimeExports.jsx(default_1$d,{className:"footerDiv1_area1_cont2_links_link1"})," "]})]})})]}),jsxRuntimeExports.jsxs("div",{className:"footerDiv1_area2",children:[jsxRuntimeExports.jsxs("div",{className:"footerDiv1_area2_cont1",children:[jsxRuntimeExports.jsx("div",{className:"footerDiv1_area2_title",children:"Eco-System"}),jsxRuntimeExports.jsxs("div",{className:"footerDiv1_area2_title_subLinks_div",children:[jsxRuntimeExports.jsx("a",{href:window.location.protocol==="http:"?`http://localhost:${window.location.port}/egax/coin/info`:"https://egochain.org/egax/coin/info",className:"footerDiv1_area2_title_subLinks_div_link1",children:"EGAX Coin"}),jsxRuntimeExports.jsx("a",{href:window.location.protocol==="http:"?`http://localhost:${window.location.port}/egc/coin/info`:"https://egochain.org/egc/coin/info",className:"footerDiv1_area2_title_subLinks_div_link1",children:"EGC Coin"}),jsxRuntimeExports.jsxs("a",{href:"https://github.com/EgorasMarket",className:"footerDiv1_area2_title_subLinks_div_link1",target:"_blank",children:["Developers",jsxRuntimeExports.jsx(default_1$8,{className:"header_div_area_2_link1_icon"})]}),jsxRuntimeExports.jsxs("a",{href:"https://egoscan.io/",className:"footerDiv1_area2_title_subLinks_div_link1",target:"_blank",children:["Explorer",jsxRuntimeExports.jsx(default_1$8,{className:"header_div_area_2_link1_icon"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"footerDiv1_area2_cont1",children:[jsxRuntimeExports.jsx("div",{className:"footerDiv1_area2_title",children:"Products"}),jsxRuntimeExports.jsxs("div",{className:"footerDiv1_area2_title_subLinks_div",children:[jsxRuntimeExports.jsx("a",{href:"/wallet",className:"footerDiv1_area2_title_subLinks_div_link1",children:"Ego Wallet"}),jsxRuntimeExports.jsxs("a",{href:"https://egoswap.io",className:"footerDiv1_area2_title_subLinks_div_link1",target:"_blank",children:["Egoswap",jsxRuntimeExports.jsx(default_1$8,{className:"header_div_area_2_link1_icon"})]}),jsxRuntimeExports.jsxs("a",{href:window.location.protocol==="http:"?`http://faucet.localhost:${window.location.port}/`:"https://faucet.egochain.org/",className:"footerDiv1_area2_title_subLinks_div_link1",target:"_blank",children:["Faucet",jsxRuntimeExports.jsx(default_1$8,{className:"header_div_area_2_link1_icon"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"footerDiv1_area2_cont1",children:[jsxRuntimeExports.jsx("div",{className:"footerDiv1_area2_title",children:"Docs"}),jsxRuntimeExports.jsxs("div",{className:"footerDiv1_area2_title_subLinks_div",children:[jsxRuntimeExports.jsx("a",{href:window.location.protocol==="http:"?`http://localhost:${window.location.port}/about`:"https://egochain.org/about",className:"footerDiv1_area2_title_subLinks_div_link1",children:"About"}),jsxRuntimeExports.jsx("a",{href:window.location.protocol==="http:"?`http://localhost:${window.location.port}/whitepaper`:"https://egochain.org/whitepaper",className:"footerDiv1_area2_title_subLinks_div_link1",children:"White paper"}),jsxRuntimeExports.jsx("a",{href:window.location.protocol==="http:"?`http://localhost:${window.location.port}/privacy`:"https://egochain.org/privacy",className:"footerDiv1_area2_title_subLinks_div_link1",children:"Privacy Policy"}),jsxRuntimeExports.jsx("a",{href:window.location.protocol==="http:"?`http://localhost:${window.location.port}/terms`:"https://egochain.org/terms",className:"footerDiv1_area2_title_subLinks_div_link1",children:"Terms & conditions"})]})]}),jsxRuntimeExports.jsxs("div",{className:"footerDiv1_area2_cont1_last",children:[jsxRuntimeExports.jsx("div",{className:"footerDiv1_area2_title",children:"Need Help?"}),jsxRuntimeExports.jsx("div",{className:"footerDiv1_area2_title_subLinks_div",children:jsxRuntimeExports.jsx("a",{href:"mailto:support@egoras.com",className:"footerDiv1_area2_title_subLinks_div_link1",target:"_blank",children:"support@egochain.com"})})]})]})]}),jsxRuntimeExports.jsx("hr",{className:"footer_hr"}),jsxRuntimeExports.jsxs("div",{className:"footer_lastDiv",children:["© ",e," Egochain.org"]})]})})})},Roadmap=()=>jsxRuntimeExports.jsxs("div",{className:"roadMapDiv",children:[" ",jsxRuntimeExports.jsx("section",{className:"roadmap",children:jsxRuntimeExports.jsx("div",{className:"section-timeline-4",children:jsxRuntimeExports.jsx("div",{className:"containercool-2",children:jsxRuntimeExports.jsxs("div",{className:"timeline_wrappercool-2",children:[jsxRuntimeExports.jsx("div",{className:"timeline_progresscool",children:jsxRuntimeExports.jsx("div",{className:"timeline_progress-barcool"})}),jsxRuntimeExports.jsxs("div",{"data-w-id":"046baf0c-9b4c-ea28-05a2-50fd0f70aa61",className:"timeline_item-2",children:[jsxRuntimeExports.jsx("div",{id:"w-node-_046baf0c-9b4c-ea28-05a2-50fd0f70aa62-718776cd",className:"timeline_left",children:jsxRuntimeExports.jsx("div",{className:"timeline_date-text",children:"Q1 2024"})}),jsxRuntimeExports.jsx("div",{id:"w-node-_046baf0c-9b4c-ea28-05a2-50fd0f70aa65-718776cd",className:"timeline_centre",children:jsxRuntimeExports.jsx("div",{className:"timeline_circle"})}),jsxRuntimeExports.jsx("div",{id:"w-node-_046baf0c-9b4c-ea28-05a2-50fd0f70aa67-718776cd",className:"timeline_right",children:jsxRuntimeExports.jsx("div",{className:"margin-bottom-xlarge",children:jsxRuntimeExports.jsxs("div",{className:"timeline_text-2",children:["* Onboard 5,000 stakers to EgoDAO.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Launch of the Egoras Electric Vehicle (APEX).",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Distribute EGAX block rewards to EgoDAO stakers.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Secure listing on a Tier 2 exchange.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Sell 250 tricycles through EgoPay using EGAX"]})})})]}),jsxRuntimeExports.jsxs("div",{"data-w-id":"046baf0c-9b4c-ea28-05a2-50fd0f70aa89",className:"timeline_item-2",children:[jsxRuntimeExports.jsx("div",{id:"w-node-_046baf0c-9b4c-ea28-05a2-50fd0f70aa8a-718776cd",className:"timeline_left",children:jsxRuntimeExports.jsx("div",{className:"timeline_date-text",children:"Q2 2024"})}),jsxRuntimeExports.jsx("div",{id:"w-node-_046baf0c-9b4c-ea28-05a2-50fd0f70aa8d-718776cd",className:"timeline_centre",children:jsxRuntimeExports.jsx("div",{className:"timeline_circle"})}),jsxRuntimeExports.jsx("div",{className:"timeline_right",children:jsxRuntimeExports.jsx("div",{className:"margin-bottom-medium-2",children:jsxRuntimeExports.jsxs("div",{className:"timeline_text-2",children:["* Accumulate 50,000 Twitter followers.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Reach 30,000 Telegram followers.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Achieve 25,000 downloads of the EgoPay app.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Increase EGC & EGAX daily volume to 500,000 USD.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Begin mass production of the Egoras Electric Vehicle (APEX).",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Sell 300 tricycles through EgoPay using EGC & EGAX."]})})})]}),jsxRuntimeExports.jsxs("div",{"data-w-id":"046baf0c-9b4c-ea28-05a2-50fd0f70aa97",className:"timeline_item-2",children:[jsxRuntimeExports.jsx("div",{id:"w-node-_046baf0c-9b4c-ea28-05a2-50fd0f70aa98-718776cd",className:"timeline_left",children:jsxRuntimeExports.jsx("div",{className:"timeline_date-text",children:"Q3 2024"})}),jsxRuntimeExports.jsx("div",{id:"w-node-_046baf0c-9b4c-ea28-05a2-50fd0f70aa9b-718776cd",className:"timeline_centre",children:jsxRuntimeExports.jsx("div",{className:"timeline_circle"})}),jsxRuntimeExports.jsx("div",{className:"timeline_right",children:jsxRuntimeExports.jsx("div",{className:"margin-bottom-medium-2",children:jsxRuntimeExports.jsxs("div",{className:"timeline_text-2",children:["* Sell 100 Egoras Electric Vehicles (APEX) using EGC & EGAX through EgoPay.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Secure listings for EGC & EGAX on multiple Tier 2 exchanges.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Open 20 electric vehicle charging stations (charging fees payable with EGC & EGAX through EgoPay).",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Grow Twitter following to 70,000.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Sell 500 tricycles using EGC & EGAX through EgoPay."]})})})]}),jsxRuntimeExports.jsxs("div",{"data-w-id":"046baf0c-9b4c-ea28-05a2-50fd0f70aaa4",className:"timeline_item-2",children:[jsxRuntimeExports.jsx("div",{id:"w-node-_046baf0c-9b4c-ea28-05a2-50fd0f70aaa5-718776cd",className:"timeline_left",children:jsxRuntimeExports.jsx("div",{className:"timeline_date-text",children:"Q4 2024"})}),jsxRuntimeExports.jsx("div",{id:"w-node-_046baf0c-9b4c-ea28-05a2-50fd0f70aaa8-718776cd",className:"timeline_centre",children:jsxRuntimeExports.jsx("div",{className:"timeline_circle"})}),jsxRuntimeExports.jsx("div",{className:"timeline_right",children:jsxRuntimeExports.jsx("div",{className:"margin-bottom-medium-2",children:jsxRuntimeExports.jsx("div",{className:"margin-bottom-medium-2",children:jsxRuntimeExports.jsxs("div",{className:"timeline_text-2",children:["* Open 40 additional electric vehicle charging stations (charging fees payable with EGC & EGAX through EgoPay).",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Sell 500 tricycles using EGC & EGAX through EgoPay.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Achieve 100,000 downloads of the EgoPay app.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Sell 400 Egoras Electric Vehicles (APEX) using EGC & EGAX through EgoPay.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Secure a listing on a Tier 1 exchange."]})})})})]}),jsxRuntimeExports.jsx("div",{className:"overlay-fade-bottom-2"}),jsxRuntimeExports.jsx("div",{className:"overlay-fade-top-2"})]})})})})]}),RoadMapPage=()=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("section",{className:"egox_token_div_section1",children:[jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsx("div",{className:"egox_token_div_section1area",children:jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section1area_cont1",children:[jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section1area1",children:[jsxRuntimeExports.jsx("div",{className:"egox_token_div_section1area1_title",children:"About"}),jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section1area1_para",children:["Egochain spearheads the revolution in next-generation electric vehicle technology through its pioneering decentralized operating system.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Leveraging the world's fastest blockchain specifically designed for real-world applications and readily deployable Web3 modules, Egochain fosters a robust ecosystem primed for mass adoption.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," Its dApps boast unrivaled interoperability, scalability, and true decentralization, empowering millions to seamlessly integrate into the future of EV mobility."]})]}),jsxRuntimeExports.jsx("div",{className:"home_div_section1_area_2",children:jsxRuntimeExports.jsx(zr,{scene:"https://prod.spline.design/TVLoAomGQBQWA2NS/scene.splinecode",className:"home_div_section1_area_2_spline_scene"})})]})})}),jsxRuntimeExports.jsx("img",{src:"/img/grains_ellipse.png",alt:"",className:"grains_ellipse"})]}),jsxRuntimeExports.jsxs("section",{className:"egox_token_div_section3",children:[jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section3_area",children:[jsxRuntimeExports.jsx("div",{className:"egox_token_div_section3_area_title",children:"Road Map"}),jsxRuntimeExports.jsx("div",{className:"egox_token_div_section3_area_body",children:jsxRuntimeExports.jsx(Roadmap,{})})]})}),jsxRuntimeExports.jsx("img",{src:"/img/grains_bottom.png",alt:"",className:"grains_ellipse_roadmap"})]})]});var reactAmcharts4={},react={exports:{}},react_production_min={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty$1=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function shouldUseNative(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var a={},i=0;i<10;i++)a["_"+String.fromCharCode(i)]=i;var o=Object.getOwnPropertyNames(a).map(function(d){return a[d]});if(o.join("")!=="0123456789")return!1;var c={};return"abcdefghijklmnopqrst".split("").forEach(function(d){c[d]=d}),Object.keys(Object.assign({},c)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var objectAssign=shouldUseNative()?Object.assign:function(e,a){for(var i,o=toObject(e),c,d=1;d<arguments.length;d++){i=Object(arguments[d]);for(var g in i)hasOwnProperty$1.call(i,g)&&(o[g]=i[g]);if(getOwnPropertySymbols){c=getOwnPropertySymbols(i);for(var b=0;b<c.length;b++)propIsEnumerable.call(i,c[b])&&(o[c[b]]=i[c[b]])}}return o};/** @license React v16.14.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l=objectAssign,n=typeof Symbol=="function"&&Symbol.for,p=n?Symbol.for("react.element"):60103,q=n?Symbol.for("react.portal"):60106,r=n?Symbol.for("react.fragment"):60107,t=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,v$2=n?Symbol.for("react.provider"):60109,w$2=n?Symbol.for("react.context"):60110,x=n?Symbol.for("react.forward_ref"):60112,y=n?Symbol.for("react.suspense"):60113,z=n?Symbol.for("react.memo"):60115,A=n?Symbol.for("react.lazy"):60116,B=typeof Symbol=="function"&&Symbol.iterator;function C(e){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)a+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E={};function F(e,a,i){this.props=e,this.context=a,this.refs=E,this.updater=i||D}F.prototype.isReactComponent={};F.prototype.setState=function(e,a){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error(C(85));this.updater.enqueueSetState(this,e,a,"setState")};F.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function G(){}G.prototype=F.prototype;function H(e,a,i){this.props=e,this.context=a,this.refs=E,this.updater=i||D}var I=H.prototype=new G;I.constructor=H;l(I,F.prototype);I.isPureReactComponent=!0;var J={current:null},K=Object.prototype.hasOwnProperty,L={key:!0,ref:!0,__self:!0,__source:!0};function M(e,a,i){var o,c={},d=null,g=null;if(a!=null)for(o in a.ref!==void 0&&(g=a.ref),a.key!==void 0&&(d=""+a.key),a)K.call(a,o)&&!L.hasOwnProperty(o)&&(c[o]=a[o]);var b=arguments.length-2;if(b===1)c.children=i;else if(1<b){for(var j=Array(b),$=0;$<b;$++)j[$]=arguments[$+2];c.children=j}if(e&&e.defaultProps)for(o in b=e.defaultProps,b)c[o]===void 0&&(c[o]=b[o]);return{$$typeof:p,type:e,key:d,ref:g,props:c,_owner:J.current}}function N(e,a){return{$$typeof:p,type:e.type,key:a,ref:e.ref,props:e.props,_owner:e._owner}}function O(e){return typeof e=="object"&&e!==null&&e.$$typeof===p}function escape(e){var a={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(i){return a[i]})}var P=/\/+/g,Q=[];function R(e,a,i,o){if(Q.length){var c=Q.pop();return c.result=e,c.keyPrefix=a,c.func=i,c.context=o,c.count=0,c}return{result:e,keyPrefix:a,func:i,context:o,count:0}}function S(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>Q.length&&Q.push(e)}function T(e,a,i,o){var c=typeof e;(c==="undefined"||c==="boolean")&&(e=null);var d=!1;if(e===null)d=!0;else switch(c){case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case p:case q:d=!0}}if(d)return i(o,e,a===""?"."+U(e,0):a),1;if(d=0,a=a===""?".":a+":",Array.isArray(e))for(var g=0;g<e.length;g++){c=e[g];var b=a+U(c,g);d+=T(c,b,i,o)}else if(e===null||typeof e!="object"?b=null:(b=B&&e[B]||e["@@iterator"],b=typeof b=="function"?b:null),typeof b=="function")for(e=b.call(e),g=0;!(c=e.next()).done;)c=c.value,b=a+U(c,g++),d+=T(c,b,i,o);else if(c==="object")throw i=""+e,Error(C(31,i==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":i,""));return d}function V(e,a,i){return e==null?0:T(e,"",a,i)}function U(e,a){return typeof e=="object"&&e!==null&&e.key!=null?escape(e.key):a.toString(36)}function W(e,a){e.func.call(e.context,a,e.count++)}function aa(e,a,i){var o=e.result,c=e.keyPrefix;e=e.func.call(e.context,a,e.count++),Array.isArray(e)?X(e,o,i,function(d){return d}):e!=null&&(O(e)&&(e=N(e,c+(!e.key||a&&a.key===e.key?"":(""+e.key).replace(P,"$&/")+"/")+i)),o.push(e))}function X(e,a,i,o,c){var d="";i!=null&&(d=(""+i).replace(P,"$&/")+"/"),a=R(a,d,o,c),V(e,aa,a),S(a)}var Y={current:null};function Z(){var e=Y.current;if(e===null)throw Error(C(321));return e}var ba={ReactCurrentDispatcher:Y,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:J,IsSomeRendererActing:{current:!1},assign:l};react_production_min.Children={map:function(e,a,i){if(e==null)return e;var o=[];return X(e,o,null,a,i),o},forEach:function(e,a,i){if(e==null)return e;a=R(null,null,a,i),V(e,W,a),S(a)},count:function(e){return V(e,function(){return null},null)},toArray:function(e){var a=[];return X(e,a,null,function(i){return i}),a},only:function(e){if(!O(e))throw Error(C(143));return e}};react_production_min.Component=F;react_production_min.Fragment=r;react_production_min.Profiler=u;react_production_min.PureComponent=H;react_production_min.StrictMode=t;react_production_min.Suspense=y;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ba;react_production_min.cloneElement=function(e,a,i){if(e==null)throw Error(C(267,e));var o=l({},e.props),c=e.key,d=e.ref,g=e._owner;if(a!=null){if(a.ref!==void 0&&(d=a.ref,g=J.current),a.key!==void 0&&(c=""+a.key),e.type&&e.type.defaultProps)var b=e.type.defaultProps;for(j in a)K.call(a,j)&&!L.hasOwnProperty(j)&&(o[j]=a[j]===void 0&&b!==void 0?b[j]:a[j])}var j=arguments.length-2;if(j===1)o.children=i;else if(1<j){b=Array(j);for(var $=0;$<j;$++)b[$]=arguments[$+2];o.children=b}return{$$typeof:p,type:e.type,key:c,ref:d,props:o,_owner:g}};react_production_min.createContext=function(e,a){return a===void 0&&(a=null),e={$$typeof:w$2,_calculateChangedBits:a,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:v$2,_context:e},e.Consumer=e};react_production_min.createElement=M;react_production_min.createFactory=function(e){var a=M.bind(null,e);return a.type=e,a};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(e){return{$$typeof:x,render:e}};react_production_min.isValidElement=O;react_production_min.lazy=function(e){return{$$typeof:A,_ctor:e,_status:-1,_result:null}};react_production_min.memo=function(e,a){return{$$typeof:z,type:e,compare:a===void 0?null:a}};react_production_min.useCallback=function(e,a){return Z().useCallback(e,a)};react_production_min.useContext=function(e,a){return Z().useContext(e,a)};react_production_min.useDebugValue=function(){};react_production_min.useEffect=function(e,a){return Z().useEffect(e,a)};react_production_min.useImperativeHandle=function(e,a,i){return Z().useImperativeHandle(e,a,i)};react_production_min.useLayoutEffect=function(e,a){return Z().useLayoutEffect(e,a)};react_production_min.useMemo=function(e,a){return Z().useMemo(e,a)};react_production_min.useReducer=function(e,a,i){return Z().useReducer(e,a,i)};react_production_min.useRef=function(e){return Z().useRef(e)};react_production_min.useState=function(e){return Z().useState(e)};react_production_min.version="16.14.0";react.exports=react_production_min;var reactExports=react.exports,extendStatics=function(e,a){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(i[c]=o[c])},extendStatics(e,a)};function __extends(e,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");extendStatics(e,a);function i(){this.constructor=e}e.prototype=a===null?Object.create(a):(i.prototype=a.prototype,new i)}var __assign$1=function(){return __assign$1=Object.assign||function(a){for(var i,o=1,c=arguments.length;o<c;o++){i=arguments[o];for(var d in i)Object.prototype.hasOwnProperty.call(i,d)&&(a[d]=i[d])}return a},__assign$1.apply(this,arguments)};function __awaiter(e,a,i,o){function c(d){return d instanceof i?d:new i(function(g){g(d)})}return new(i||(i=Promise))(function(d,g){function b(rt){try{$(o.next(rt))}catch(_e){g(_e)}}function j(rt){try{$(o.throw(rt))}catch(_e){g(_e)}}function $(rt){rt.done?d(rt.value):c(rt.value).then(b,j)}$((o=o.apply(e,a||[])).next())})}function __generator(e,a){var i={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},o,c,d,g;return g={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function b($){return function(rt){return j([$,rt])}}function j($){if(o)throw new TypeError("Generator is already executing.");for(;g&&(g=0,$[0]&&(i=0)),i;)try{if(o=1,c&&(d=$[0]&2?c.return:$[0]?c.throw||((d=c.return)&&d.call(c),0):c.next)&&!(d=d.call(c,$[1])).done)return d;switch(c=0,d&&($=[$[0]&2,d.value]),$[0]){case 0:case 1:d=$;break;case 4:return i.label++,{value:$[1],done:!1};case 5:i.label++,c=$[1],$=[0];continue;case 7:$=i.ops.pop(),i.trys.pop();continue;default:if(d=i.trys,!(d=d.length>0&&d[d.length-1])&&($[0]===6||$[0]===2)){i=0;continue}if($[0]===3&&(!d||$[1]>d[0]&&$[1]<d[3])){i.label=$[1];break}if($[0]===6&&i.label<d[1]){i.label=d[1],d=$;break}if(d&&i.label<d[2]){i.label=d[2],i.ops.push($);break}d[2]&&i.ops.pop(),i.trys.pop();continue}$=a.call(e,i)}catch(rt){$=[6,rt],c=0}finally{o=d=0}if($[0]&5)throw $[1];return{value:$[0]?$[1]:void 0,done:!0}}}function __values(e){var a=typeof Symbol=="function"&&Symbol.iterator,i=a&&e[a],o=0;if(i)return i.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(e,a){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var o=i.call(e),c,d=[],g;try{for(;(a===void 0||a-- >0)&&!(c=o.next()).done;)d.push(c.value)}catch(b){g={error:b}}finally{try{c&&!c.done&&(i=o.return)&&i.call(o)}finally{if(g)throw g.error}}return d}function __spread(){for(var e=[],a=0;a<arguments.length;a++)e=e.concat(__read(arguments[a]));return e}typeof SuppressedError=="function"&&SuppressedError;var Percent=function(){function e(a){this._value=a}return Object.defineProperty(e.prototype,"value",{get:function(){return this._value/100},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"percent",{get:function(){return this._value},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return""+this._value+"%"},e}();function percent(e){return new Percent(e)}function isPercent(e){return e instanceof Percent}function isNaN$1(e){return Number(e)!==e}function getType(e){return{}.toString.call(e)}function getDefault(e,a){return e||a}function checkString(e){if(typeof e=="string")return!0;throw new Error("Expected a string but got "+getType(e))}function checkBoolean(e){if(typeof e=="boolean")return!0;throw new Error("Expected a boolean but got "+getType(e))}function checkNumber(e){if(typeof e=="number"){if(isNaN$1(e))throw new Error("Expected a number but got NaN")}else throw new Error("Expected a number but got "+getType(e));return!0}function checkObject(e){var a=getType(e);if(a==="[object Object]")return!0;throw new Error("Expected an object but got "+a)}function checkArray(e){if(Array.isArray(e))return!0;throw new Error("Expected an array but got "+getType(e))}function checkDate(e){var a=getType(e);if(a==="[object Date]")return!0;throw new Error("Expected a date but got "+a)}function castString(e){if(typeof e=="string")return e;if(typeof e=="number")return""+e;throw new Error("Expected a string or number but got "+getType(e))}function castNumber(e){if(typeof e=="string"){var a=+e;if(isNaN$1(a))throw new Error("Cannot cast string "+JSON.stringify(e)+" to a number");return a}else if(typeof e=="number"){if(isNaN$1(e))throw new Error("Expected a number but got NaN");return e}else{var i=getType(e);if(i==="[object Date]")return e.getTime();throw new Error("Expected a string, number, or date but got "+i)}}function toBoolean(e){return!!e}function toNumber(e){if(hasValue(e)&&!isNumber$1(e)){var a=Number(e);return isNaN$1(a)&&isString$1(e)&&e!=""?toNumber(e.replace(/[^0-9.\-]+/g,"")):a}return e}function toText(e){if(hasValue(e)&&!isString$1(e)){if(isNumber$1(e))return castString(e);if(isObject$1(e))return e.toString()}return e}function toNumberOrPercent(e){return!hasValue(e)||isNumber$1(e)||isPercent(e)?e:isString$1(e)&&e.indexOf("%")!=-1?percent(toNumber(e)):toNumber(e)}function hasValue(e){return e!=null}function getValue(e){if(hasValue(e))return e;throw new Error("Value doesn't exist")}function getValueDefault(e,a){return hasValue(e)?e:a}function isDate$1(e){return getType(e)==="[object Date]"}function isString$1(e){return typeof e=="string"}function isNumber$1(e){return typeof e=="number"&&Number(e)==e}function isObject$1(e){return typeof e=="object"&&e!=null}function isArray$1(e){return Array.isArray(e)}const Type=Object.freeze(Object.defineProperty({__proto__:null,castNumber,castString,checkArray,checkBoolean,checkDate,checkNumber,checkObject,checkString,getDefault,getType,getValue,getValueDefault,hasValue,isArray:isArray$1,isDate:isDate$1,isNaN:isNaN$1,isNumber:isNumber$1,isObject:isObject$1,isString:isString$1,toBoolean,toNumber,toNumberOrPercent,toText},Symbol.toStringTag,{value:"Module"}));var PI=Math.PI,HALFPI=PI/2,RADIANS=PI/180,DEGREES=180/PI;function toNumberRange(e,a,i){return hasValue(e)?(e=toNumber(e),fitToRange(e,a,i)):e}function round$1(e,a,i){if(!isNumber$1(a)||a<=0){var o=Math.round(e);return i&&o-e==.5&&o--,o}else{var c=Math.pow(10,a);return Math.round(e*c)/c}}function ceil(e,a){if(!isNumber$1(a)||a<=0)return Math.ceil(e);var i=Math.pow(10,a);return Math.ceil(e*i)/i}function stretch(e,a,i){return e*(i-a)+a}function fitToRange(e,a,i){if(isNumber$1(a)){if(isNumber$1(i)&&i<a){var o=i;i=a,a=o}e<a&&(e=a)}return isNumber$1(i)&&e>i&&(e=i),e}function sin(e){return round$1(Math.sin(RADIANS*e),10)}function tan(e){return round$1(Math.tan(RADIANS*e),10)}function cos(e){return round$1(Math.cos(RADIANS*e),10)}function max$1(e,a){return isNumber$1(e)?isNumber$1(a)&&a>e?a:e:isNumber$1(a)?a:null}function min$1(e,a){return isNumber$1(e)?isNumber$1(a)&&a<e?a:e:isNumber$1(a)?a:null}function closest(e,a){return e.reduce(function(i,o){return Math.abs(o-a)<Math.abs(i-a)?o:i})}function intersect(e,a){var i=getValue(e.start),o=getValue(a.start),c=getValue(e.end),d=getValue(a.end);return Math.max(i,o)<=Math.min(c,d)}function invertRange(e){var a=getValue(e.start),i=getValue(e.end);return{start:1-i,end:1-a}}function intersection(e,a){var i=getValue(e.start),o=getValue(a.start),c=getValue(e.end),d=getValue(a.end),g=Math.max(i,o),b=Math.min(c,d);if(!(b<g))return{start:g,end:b}}function getDistance(e,a){return e?(a||(a={x:0,y:0}),Math.sqrt(Math.pow(Math.abs(e.x-a.x),2)+Math.pow(Math.abs(e.y-a.y),2))):0}function getHorizontalDistance(e,a){return e?(a||(a={x:0,y:0}),Math.abs(e.x-a.x)):0}function getVerticalDistance(e,a){return e?(a||(a={x:0,y:0}),Math.abs(e.y-a.y)):0}function getCubicCurveDistance(e,a,i,o,c){if(!e)return 0;a||(a={x:0,y:0});var d=0,g=e;if(c>0)for(var b=0;b<=c;b++){var j=getPointOnCubicCurve(e,a,i,o,b/c);d+=getDistance(g,j),g=j}return d}function getScale(e,a,i,o){var c=getDistance(a,o),d=getDistance(e,i);return Math.abs(d/c)}function getMidPoint(e,a,i){return isNumber$1(i)||(i=.5),{x:e.x+(a.x-e.x)*i,y:e.y+(a.y-e.y)*i}}function getRotation(e,a,i,o){var c=getAngle(a,o),d=getAngle(e,i),g=c-d;return g<0&&(g+=360),g}function getAngle(e,a){a||(a={x:e.x*2,y:e.y*2});var i=a.x-e.x,o=a.y-e.y,c=Math.atan2(o,i)*DEGREES;return c<0&&(c+=360),normalizeAngle(c)}function getCenterShift(e,a,i,o,c){var d=getRotation(a,i,o,c)-90;d<0&&(d+=360);var g=getDistance(a,o),b=Math.cos(d)/g+a.x,j=Math.cos(d)/g+a.y,$={x:b-e.x,y:j-e.y};return $}function getBBox(e){if(e){var a=e.length;if(a!==0){for(var i=void 0,o=void 0,c,d=void 0,g=0;g<a;g++){var b=e[g];(!isNumber$1(o)||b.x>o)&&(o=b.x),(!isNumber$1(i)||b.x<i)&&(i=b.x),(!isNumber$1(c)||b.y<c)&&(c=b.y),(!isNumber$1(d)||b.y>d)&&(d=b.y)}return{x:i,y:c,width:o-i,height:d-c}}}return{x:0,y:0,width:0,height:0}}function getCommonRectangle(e){var a=e.length;if(a!==0){for(var i=void 0,o=void 0,c=void 0,d=void 0,g=0;g<a;g++){var b=e[g];i=min$1(b.x,i),o=min$1(b.y,o),c=max$1(b.x+b.width,c),d=max$1(b.y+b.height,d)}return{x:i,y:o,width:c-i,height:d-o}}}function getPointOnQuadraticCurve(e,a,i,o){var c=(1-o)*(1-o)*e.x+2*(1-o)*o*i.x+o*o*a.x,d=(1-o)*(1-o)*e.y+2*(1-o)*o*i.y+o*o*a.y;return{x:c,y:d}}function getPointOnCubicCurve(e,a,i,o,c){var d={x:0,y:0},g=1-c,b=g*g,j=b*g;return d.x=e.x*j+i.x*3*b*c+o.x*3*g*c*c+a.x*c*c*c,d.y=e.y*j+i.y*3*b*c+o.y*3*g*c*c+a.y*c*c*c,d}function getCubicControlPointA(e,a,i,o,c,d){return c=adjustTension(c),d=adjustTension(d),{x:(-e.x+a.x/c+i.x)*c,y:(-e.y+a.y/d+i.y)*d}}function getCubicControlPointB(e,a,i,o,c,d){return c=adjustTension(c),d=adjustTension(d),{x:(a.x+i.x/c-o.x)*c,y:(a.y+i.y/d-o.y)*d}}function adjustTension(e){return 1-e+1e-5}function normalizeAngle(e){return e==360?360:e%360}function fitAngleToRange(e,a,i){if(a>i){var o=a;a=i,i=o}e=normalizeAngle(e);var c=(a-normalizeAngle(a))/360;e<a&&(e+=360*(c+1));var d=a+(i-a)/2+180,g=a+(i-a)/2-180;return e>i&&(e-360>a?e-=360:e<d?e=i:e=a),e<a&&(e>g?e=a:e=i),e}function getArcRect(e,a,i){var o=Number.MAX_VALUE,c=Number.MAX_VALUE,d=-Number.MAX_VALUE,g=-Number.MAX_VALUE,b=[];isNumber$1(i)||(i=1),b.push(getArcPoint(i,e)),b.push(getArcPoint(i,a));for(var j=Math.min(Math.floor(e/90)*90,Math.floor(a/90)*90),$=Math.max(Math.ceil(e/90)*90,Math.ceil(a/90)*90),rt=j;rt<=$;rt+=90)rt>=e&&rt<=a&&b.push(getArcPoint(i,rt));for(var _e=0;_e<b.length;_e++){var st=b[_e];st.x<o&&(o=st.x),st.y<c&&(c=st.y),st.x>d&&(d=st.x),st.y>g&&(g=st.y)}return{x:o,y:c,width:d-o,height:g-c}}function getArcPoint(e,a){return{x:e*cos(a),y:e*sin(a)}}function isInRectangle(e,a){return e.x>=a.x&&e.x<=a.x+a.width&&e.y>=a.y&&e.y<=a.y+a.height}function getLineIntersection(e,a,i,o){var c=((e.x*a.y-a.x*e.y)*(i.x-o.x)-(e.x-a.x)*(i.x*o.y-i.y*o.x))/((e.x-a.x)*(i.y-o.y)-(e.y-a.y)*(i.x-o.x)),d=((e.x*a.y-a.x*e.y)*(i.y-o.y)-(e.y-a.y)*(i.x*o.y-i.y*o.x))/((e.x-a.x)*(i.y-o.y)-(e.y-a.y)*(i.x-o.x));return{x:c,y:d}}const Math$1=Object.freeze(Object.defineProperty({__proto__:null,DEGREES,HALFPI,PI,RADIANS,adjustTension,ceil,closest,cos,fitAngleToRange,fitToRange,getAngle,getArcPoint,getArcRect,getBBox,getCenterShift,getCommonRectangle,getCubicControlPointA,getCubicControlPointB,getCubicCurveDistance,getDistance,getHorizontalDistance,getLineIntersection,getMidPoint,getPointOnCubicCurve,getPointOnQuadraticCurve,getRotation,getScale,getVerticalDistance,intersect,intersection,invertRange,isInRectangle,max:max$1,min:min$1,normalizeAngle,round:round$1,sin,stretch,tan,toNumberRange},Symbol.toStringTag,{value:"Module"}));function indexOf(e,a){for(var i=e.length,o=0;o<i;++o)if(e[o]===a)return o;return-1}function any(e,a){for(var i=e.length,o=0;o<i;++o)if(a(e[o]))return!0;return!1}function map$1(e,a){for(var i=e.length,o=new Array(i),c=0;c<i;++c)o[c]=a(e[c],c);return o}function each$2(e,a){for(var i=e.length,o=0;o<i;++o)a(e[o],o)}function eachReverse(e,a){for(var i=e.length;i--;)a(e[i],i)}function eachContinue$2(e,a){for(var i=e.length,o=0;o<i&&a(e[o],o);++o);}function shiftLeft(e,a){for(var i=e.length,o=a;o<i;++o)e[o-a]=e[o];e.length=i-a}function last(e){var a=e.length;return a?e[a-1]:void 0}function first(e){return e[0]}function insert(e,a,i){i=fitToRange(i,0,e.length),e.splice(i,0,a)}function setIndex(e,a,i){remove(e,a),insert(e,a,i)}function pushAll(e,a){for(var i=a.length,o=0;o<i;++o)e.push(a[o])}function remove(e,a){var i=!1,o=e.indexOf(a);if(o!==-1){i=!0,e.splice(o,1);for(var c=e.length;o<c;)e[o]===a?(e.splice(o,1),--c):++o}return i}function move(e,a,i){var o=indexOf(e,a);o!==-1&&removeIndex(e,o),i==null?e.push(a):insertIndex(e,i,a)}function add$1(e,a,i){isNumber$1(i)?i===0?e.unshift(a):e.splice(i,0,a):e.push(a)}function replace(e,a,i){var o=e.indexOf(a);o!==-1&&e.splice(o,1),isNumber$1(i)?e.splice(i,0,a):e.push(a)}function toArray$2(e){return Array.isArray(e)?e:[e]}function has(e,a){return indexOf(e,a)!==-1}function copy$3(e){for(var a=e.length,i=new Array(a),o=0;o<a;++o)i[o]=e[o];return i}function slice(e,a,i){i===void 0&&(i=e.length);for(var o=new Array(i-a),c=a;c<i;++c)o[c-a]=e[c];return o}function insertIndex(e,a,i){e.splice(a,0,i)}function removeIndex(e,a){e.splice(a,1)}function getSortedIndex(e,a,i){for(var o=0,c=e.length,d=!1;o<c;){var g=o+c>>1,b=a(i,e[g]);b<0?c=g:(b===0&&(d=!0),o=g+1)}return{found:d,index:d?o-1:o}}function findIndex$1(e,a){for(var i=e.length,o=0;o<i;++o)if(a(e[o],o))return o;return-1}function find$1(e,a){var i=findIndex$1(e,a);if(i!==-1)return e[i]}function shuffle(e){for(var a=e.length,i,o;a!==0;)o=Math.floor(Math.random()*a),a-=1,i=e[a],e[a]=e[o],e[o]=i}function keepIf(e,a){for(var i=e.length,o=0;o<i;)a(e[o])?++o:(e.splice(o,1),--i)}const Array$1=Object.freeze(Object.defineProperty({__proto__:null,add:add$1,any,copy:copy$3,each:each$2,eachContinue:eachContinue$2,eachReverse,find:find$1,findIndex:findIndex$1,first,getSortedIndex,has,indexOf,insert,insertIndex,keepIf,last,map:map$1,move,pushAll,remove,removeIndex,replace,setIndex,shiftLeft,shuffle,slice,toArray:toArray$2},Symbol.toStringTag,{value:"Module"}));var Disposer=function(){function e(a){this._disposed=!1,this._dispose=a}return e.prototype.isDisposed=function(){return this._disposed},e.prototype.dispose=function(){this._disposed||(this._disposed=!0,this._dispose())},e}(),MultiDisposer=function(e){__extends(a,e);function a(i){return e.call(this,function(){each$2(i,function(o){o.dispose()})})||this}return a}(Disposer),MutableValueDisposer=function(e){__extends(a,e);function a(){var i=e.call(this,function(){hasValue(i._disposer)&&(i._disposer.dispose(),i._disposer=void 0)})||this;return i}return a.prototype.get=function(){return this._value},a.prototype.set=function(i,o){hasValue(this._disposer)&&this._disposer.dispose(),this._disposer=o,this._value=i},a.prototype.reset=function(){this.set(void 0,void 0)},a}(Disposer),CounterDisposer=function(e){__extends(a,e);function a(){var i=e!==null&&e.apply(this,arguments)||this;return i._counter=0,i}return a.prototype.increment=function(){var i=this;return++this._counter,new Disposer(function(){--i._counter,i._counter===0&&i.dispose()})},a}(Disposer),pendingFrame=!1,nextQueue=[],readQueue=[],writeQueue=[],idleQueue=[],fps=1e3/60,raf=typeof requestAnimationFrame=="function"?function(e){requestAnimationFrame(e)}:function(e){setTimeout(e,fps)};function frameLoop(){for(var e=Date.now(),a=nextQueue.length,i=0;i<a;++i)nextQueue[i](e);shiftLeft(nextQueue,a);for(var i=0;i<readQueue.length;++i)readQueue[i](e);readQueue.length=0;for(var i=0;i<writeQueue.length;++i)writeQueue[i](e);writeQueue.length=0,nextQueue.length===0&&readQueue.length===0?pendingFrame=!1:raf(frameLoop)}function pendFrame(){pendingFrame||(pendingFrame=!0,raf(frameLoop))}function nextFrame(e){nextQueue.push(e),pendFrame()}function readFrame(e){readQueue.push(e),pendFrame()}function writeFrame(e){writeQueue.push(e),pendFrame()}function whenIdle(e){idleQueue.push(e)}function triggerIdle(){for(var e=Date.now(),a=idleQueue.length,i=0;i<a;++i)idleQueue.shift()(e)}var EventDispatcher=function(){function e(){this._listeners=[],this._killed=[],this._disabled={},this._iterating=0,this._enabled=!0,this._disposed=!1}return e.prototype.isDisposed=function(){return this._disposed},e.prototype.dispose=function(){if(!this._disposed){this._disposed=!0;var a=this._listeners;this._iterating=1,this._listeners=null,this._disabled=null;try{each$2(a,function(i){i.disposer.dispose()})}finally{this._killed=null,this._iterating=null}}},e.prototype.hasListeners=function(){return this._listeners.length!==0},e.prototype.hasListenersByType=function(a){return any(this._listeners,function(i){return(i.type===null||i.type===a)&&!i.killed})},e.prototype.enable=function(){this._enabled=!0},e.prototype.disable=function(){this._enabled=!1},e.prototype.enableType=function(a){delete this._disabled[a]},e.prototype.disableType=function(a,i){i===void 0&&(i=1/0),this._disabled[a]=i},e.prototype._removeListener=function(a){if(this._iterating===0){var i=this._listeners.indexOf(a);if(i===-1)throw new Error("Invalid state: could not remove listener");this._listeners.splice(i,1)}else this._killed.push(a)},e.prototype._removeExistingListener=function(a,i,o,c){if(this._disposed)throw new Error("EventDispatcher is disposed");this._eachListener(function(d){d.once===a&&d.type===i&&(o==null||d.callback===o)&&d.context===c&&d.disposer.dispose()})},e.prototype.isEnabled=function(a){if(this._disposed)throw new Error("EventDispatcher is disposed");return this._enabled&&this._listeners.length>0&&this.hasListenersByType(a)&&this._disabled[a]==null},e.prototype.has=function(a,i,o){var c=findIndex$1(this._listeners,function(d){return d.once!==!0&&d.type===a&&(i==null||d.callback===i)&&d.context===o});return c!==-1},e.prototype._shouldDispatch=function(a){if(this._disposed)throw new Error("EventDispatcher is disposed");var i=this._disabled[a];return isNumber$1(i)?(i<=1?delete this._disabled[a]:--this._disabled[a],!1):this._enabled},e.prototype._eachListener=function(a){var i=this;++this._iterating;try{each$2(this._listeners,a)}finally{--this._iterating,this._iterating===0&&this._killed.length!==0&&(each$2(this._killed,function(o){i._removeListener(o)}),this._killed.length=0)}},e.prototype.dispatchImmediately=function(a,i){this._shouldDispatch(a)&&this._eachListener(function(o){!o.killed&&(o.type===null||o.type===a)&&o.dispatch(a,i)})},e.prototype.dispatch=function(a,i){this._shouldDispatch(a)&&this._eachListener(function(o){!o.killed&&(o.type===null||o.type===a)&&whenIdle(function(){o.killed||o.dispatch(a,i)})})},e.prototype._on=function(a,i,o,c,d,g){var b=this;if(this._disposed)throw new Error("EventDispatcher is disposed");this._removeExistingListener(a,i,o,c);var j={type:i,callback:o,context:c,shouldClone:d,dispatch:g,killed:!1,once:a,disposer:new Disposer(function(){j.killed=!0,b._removeListener(j)})};return this._listeners.push(j),j},e.prototype.onAll=function(a,i,o){return o===void 0&&(o=!0),this._on(!1,null,a,i,o,function(c,d){return a.call(i,c,d)}).disposer},e.prototype.on=function(a,i,o,c){return c===void 0&&(c=!0),this._on(!1,a,i,o,c,function(d,g){return i.call(o,g)}).disposer},e.prototype.once=function(a,i,o,c){c===void 0&&(c=!0);var d=this._on(!0,a,i,o,c,function(g,b){d.disposer.dispose(),i.call(o,b)});return d.disposer},e.prototype.off=function(a,i,o){this._removeExistingListener(!1,a,i,o)},e.prototype.copyFrom=function(a){var i=this;if(this._disposed)throw new Error("EventDispatcher is disposed");if(a===this)throw new Error("Cannot copyFrom the same TargetedEventDispatcher");each$2(a._listeners,function(o){!o.killed&&o.shouldClone&&(o.type===null?i.onAll(o.callback,o.context):o.once?i.once(o.type,o.callback,o.context):i.on(o.type,o.callback,o.context))})},e}(),TargetedEventDispatcher=function(e){__extends(a,e);function a(i){var o=e.call(this)||this;return o.target=i,o}return a.prototype.copyFrom=function(i){var o=this;if(this._disposed)throw new Error("EventDispatcher is disposed");if(i===this)throw new Error("Cannot copyFrom the same TargetedEventDispatcher");each$2(i._listeners,function(c){c.context!==i.target&&!c.killed&&c.shouldClone&&(c.type===null?o.onAll(c.callback,c.context):c.once?o.once(c.type,c.callback,c.context):o.on(c.type,c.callback,c.context))})},a}(EventDispatcher);function entries(e){return function(a){for(var i in e)if(hasKey(e,i)&&!a([i,e[i]]))break}}function keys(e){var a=[];for(var i in e)hasKey(e,i)&&a.push(i);return a}function keysOrdered(e,a){return keys(e).sort(a)}function hasKey(e,a){return{}.hasOwnProperty.call(e,a)}function getKey(e,a){return e[a]}function eachContinue$1(e,a){for(var i in e)if(hasKey(e,i)&&!a(i,e[i]))break}function each$1(e,a){eachContinue$1(e,function(i,o){return a(i,o),!0})}function eachOrdered(e,a,i){each$2(keysOrdered(e,i),function(o){a(o,e[o])})}function copy$2(e){return Object.assign({},e)}function merge$1(e,a){return Object.assign({},e,a)}function clone(e){return JSON.parse(JSON.stringify(e))}function copyProperties$1(e,a,i){each$2(i,function(o){hasValue(e[o])&&(a[o]=e[o])})}function softCopyProperties$1(e,a,i){each$2(i,function(o){hasValue(e[o])&&!hasValue(a[o])&&(a[o]=e[o])})}function forceCopyProperties(e,a,i){each$2(i,function(o){a[o]=e[o]})}function copyAllProperties(e,a){copyProperties$1(e,a,keys(e))}const Object$1=Object.freeze(Object.defineProperty({__proto__:null,clone,copy:copy$2,copyAllProperties,copyProperties:copyProperties$1,each:each$1,eachContinue:eachContinue$1,eachOrdered,entries,forceCopyProperties,getKey,hasKey,keys,keysOrdered,merge:merge$1,softCopyProperties:softCopyProperties$1},Symbol.toStringTag,{value:"Module"}));function fromArray(e){return function(a){for(var i=e.length,o=0;o<i&&a(e[o]);++o);}}function length(e){var a=0;return e(function(i){return++a,!0}),a}function toArray$1(e){var a=[];return e(function(i){return a.push(i),!0}),a}function eachContinue(e,a){e(a)}function each(e,a){e(function(i){return a(i),!0})}function sort(e,a){return fromArray(toArray$1(e).sort(a))}function map(e,a){return function(i){return e(function(o){return i(a(o))})}}function filter(e,a){return function(i){return e(function(o){return a(o)?i(o):!0})}}function concat(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];return function(i){for(var o=!0,c=function(b){return o=i(b)},d=e.length,g=0;g<d&&(e[g](c),!!o);++g);}}function flatten(e){return function(a){var i=!0,o=function(c){return i=a(c)};e(function(c){return c(o),i})}}function indexed(e){return function(a){var i=0;e(function(o){return a([i++,o])})}}function findIndex(e,a){var i=!1,o=0;return e(function(c){return a(c)?(i=!0,!1):(++o,!0)}),i?o:-1}function find(e,a){var i;return e(function(o){return a(o)?(i=o,!1):!0}),i}function findMap(e,a){var i;return e(function(o){var c=a(o);return c!==null?(i=c,!1):!0}),i}function contains$1(e,a){var i=!1;return e(function(o){return a(o)?(i=!0,!1):!0}),i}function foldl(e,a,i){return e(function(o){return a=i(a,o),!0}),a}function min2(e,a){return e==null||a<e?a:e}function min(e){return foldl(e,null,min2)}function max2(e,a){return e==null||a>e?a:e}function max(e){return foldl(e,null,max2)}function join(e,a){a===void 0&&(a="");var i=!0,o="";return e(function(c){return i?i=!1:o+=a,o+=c,!0}),o}var ListIterator=function(){function e(a,i){this.createNewItems=!1,this.list=a,this._create=i,this.reset()}return e.prototype.reset=function(){this._listCopy=toArray$1(this.list.iterator())},e.prototype.clear=function(){this._listCopy.length=0},e.prototype.getFirst=function(){return this.returnItem(0)},e.prototype.getLast=function(){return this.returnItem(this._listCopy.length-1)},e.prototype.find=function(a){var i=findIndex$1(this._listCopy,a);if(i!==-1){var o=this._listCopy[i];return remove(this._listCopy,o),o}else return this.getLast()},e.prototype.removeItem=function(a){return remove(this._listCopy,a)},e.prototype.returnItem=function(a){if(a>=0&&a<this._listCopy.length){var i=this._listCopy[a];return remove(this._listCopy,i),i}else if(this.createNewItems)return this._create()},e.prototype.iterator=function(){return fromArray(this._listCopy)},e}();const Iterator=Object.freeze(Object.defineProperty({__proto__:null,ListIterator,concat,contains:contains$1,each,eachContinue,filter,find,findIndex,findMap,flatten,foldl,fromArray,indexed,join,length,map,max,min,sort,toArray:toArray$1},Symbol.toStringTag,{value:"Module"}));function order$1(e,a){return e===a?0:e<a?-1:1}function repeat(e,a){return new Array(a+1).join(e)}function random$1(e){for(var a="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=0;o<e;o++)a+=i.charAt(Math.floor(Math.random()*i.length));return a}const String$1=Object.freeze(Object.defineProperty({__proto__:null,order:order$1,random:random$1,repeat},Symbol.toStringTag,{value:"Module"}));var DictionaryDisposer=function(e){__extends(a,e);function a(i){var o=this,c=i.events.on("removed",function(d){d.oldValue.dispose()},void 0,!1);return o=e.call(this,function(){c.dispose(),each(i.iterator(),function(d){var g=d[1];g.dispose()})})||this,o}return a}(Disposer),Dictionary=function(){function e(){this.events=new EventDispatcher,this._dictionary={}}return e.prototype.hasKey=function(a){return hasKey(this._dictionary,a)},e.prototype.getKey=function(a){return this._dictionary[a]},e.prototype.insertKey=function(a,i){if(hasKey(this._dictionary,a))throw new Error("Key "+a+" already exists in dictionary");this._dictionary[a]=i,this.events.isEnabled("insertKey")&&this.events.dispatchImmediately("insertKey",{type:"insertKey",target:this,key:a,newValue:i})},e.prototype.setKey=function(a,i){if(hasKey(this._dictionary,a)){var o=this._dictionary[a];o!==i&&(this._dictionary[a]=i,this.events.isEnabled("setKey")&&this.events.dispatchImmediately("setKey",{type:"setKey",target:this,key:a,oldValue:o,newValue:i}),this.events.isEnabled("removed")&&this.events.dispatchImmediately("removed",{type:"removed",target:this,oldValue:o}))}else this._dictionary[a]=i,this.events.isEnabled("insertKey")&&this.events.dispatchImmediately("insertKey",{type:"insertKey",target:this,key:a,newValue:i})},e.prototype.updateKey=function(a,i){if(hasKey(this._dictionary,a)){var o=this._dictionary[a],c=i(o);o!==c&&(this._dictionary[a]=c,this.events.isEnabled("setKey")&&this.events.dispatchImmediately("setKey",{type:"setKey",target:this,key:a,oldValue:o,newValue:c}),this.events.isEnabled("removed")&&this.events.dispatchImmediately("removed",{type:"removed",target:this,oldValue:o}))}else throw new Error("Key "+a+" doesn't exist in dictionary")},e.prototype.removeKey=function(a){if(hasKey(this._dictionary,a)){var i=this._dictionary[a];delete this._dictionary[a],this.events.isEnabled("removeKey")&&this.events.dispatchImmediately("removeKey",{type:"removeKey",target:this,key:a,oldValue:i}),this.events.isEnabled("removed")&&this.events.dispatchImmediately("removed",{type:"removed",target:this,oldValue:i})}},e.prototype.insertKeyIfEmpty=function(a,i){return this.hasKey(a)||this.insertKey(a,i()),this.getKey(a)},e.prototype.clear=function(){var a=this;this.events.isEnabled("removed")&&each$1(this._dictionary,function(i,o){a.events.dispatchImmediately("removed",{type:"removed",target:a,oldValue:o})}),this._dictionary={},this.events.isEnabled("cleared")&&this.events.dispatchImmediately("cleared",{type:"cleared",target:this})},e.prototype.copyFrom=function(a){var i=this;each(a.iterator(),function(o){i.setKey(o[0],o[1])})},e.prototype.iterator=function(){return entries(this._dictionary)},e.prototype[Symbol.iterator]=function(){var a,i,o,c;return __generator(this,function(d){switch(d.label){case 0:a=[];for(i in this._dictionary)a.push(i);o=0,d.label=1;case 1:return o<a.length?(c=a[o],hasKey(this._dictionary,c)?[4,[c,this._dictionary[c]]]:[3,3]):[3,4];case 2:d.sent(),d.label=3;case 3:return o++,[3,1];case 4:return[2]}})},e.prototype.each=function(a){each(this.iterator(),function(i){var o=__read(i,2),c=o[0],d=o[1];return a(c,d)})},e.prototype.sortedIterator=function(){return sort(this.iterator(),function(a,i){return order$1(a[0],i[0])})},e}(),DictionaryTemplate=function(e){__extends(a,e);function a(i){var o=e.call(this)||this;return o.template=i,o}return Object.defineProperty(a.prototype,"template",{get:function(){return this._template},set:function(i){i.isTemplate=!0,this._template=i},enumerable:!0,configurable:!0}),a.prototype.copyFrom=function(i){var o=this;each(i.iterator(),function(c){o.setKey(c[0],c[1].clone())})},a.prototype.create=function(i){var o=this;return this.insertKeyIfEmpty(i,function(){return o.template.clone()})},a}(Dictionary),Cache=function(){function e(){this._storage=new Dictionary,this.ttl=1e3}return e.prototype.set=function(a,i,o,c){var d=this._storage.insertKeyIfEmpty(a,function(){return new Dictionary}),g={touched:new Date().getTime(),ttl:isNumber$1(c)?c:this.ttl,value:o};d.setKey(i,g)},e.prototype.get=function(a,i,o){if(o===void 0&&(o=void 0),this._storage.hasKey(a)){var c=this._storage.getKey(a);if(c.hasKey(i)){var d=c.getKey(i);return d.ttl&&d.touched+d.ttl<new Date().getTime()&&(d.expired=!0),d.expired?(c.removeKey(i),o):d.value}else return o}else return o},e.prototype.clear=function(a){a?this._storage.removeKey(a):this._storage.clear()},e}(),cache=new Cache,Registry=function(){function e(){var a=this;this.events=new EventDispatcher,this.themes=[],this.loadedThemes={},this._uidCount=0,this.registeredClasses={},this._placeholders={},this.invalidSprites={},this.invalidDatas={},this.invalidRawDatas=[],this.invalidDataItems=[],this.invalidDataRange=[],this.invalidPositions={},this.invalidLayouts={},this.baseSprites=[],this.baseSpritesByUid={},this.queue=[],this.deferred=[],this.uid=this.getUniqueId(),this.invalidSprites.noBase=[],this.invalidDatas.noBase=[],this.invalidLayouts.noBase=[],this.invalidPositions.noBase=[],typeof addEventListener<"u"&&(addEventListener("beforeprint",function(){each$2(a.baseSprites,function(i){var o=i.paper.svg;o.setAttribute("viewBox","0 0 "+o.clientWidth+" "+o.clientHeight)})}),addEventListener("afterprint",function(){each$2(a.baseSprites,function(i){var o=i.paper.svg;o.removeAttribute("viewBox")})}))}return e.prototype.getUniqueId=function(){var a=this._uidCount;return this._uidCount+=1,"id-"+a},Object.defineProperty(e.prototype,"map",{get:function(){return this._map||(this._map=new Dictionary),this._map},enumerable:!0,configurable:!0}),e.prototype.setCache=function(a,i,o){cache.set(this.uid,a,i,o)},e.prototype.getCache=function(a,i){return i===void 0&&(i=void 0),cache.get(this.uid,a,i)},e.prototype.dispatch=function(a,i){this.events.isEnabled(a)&&(i?(i.type=a,i.target=i.target||this,this.events.dispatch(a,{type:a,target:this})):this.events.dispatch(a,{type:a,target:this}))},e.prototype.dispatchImmediately=function(a,i){this.events.isEnabled(a)&&(i?(i.type=a,i.target=i.target||this,this.events.dispatchImmediately(a,i)):this.events.dispatchImmediately(a,{type:a,target:this}))},e.prototype.getPlaceholder=function(a){return hasValue(this._placeholders[a])?this._placeholders[a]:(this._placeholders[a]="__amcharts_"+a+"_"+random$1(8)+"__",this._placeholders[a])},e.prototype.addToInvalidComponents=function(a){a.baseId?move(this.invalidDatas[a.baseId],a):move(this.invalidDatas.noBase,a)},e.prototype.removeFromInvalidComponents=function(a){a.baseId&&remove(this.invalidDatas[a.baseId],a),remove(this.invalidDatas.noBase,a)},e.prototype.addToInvalidSprites=function(a){a.baseId?add$1(this.invalidSprites[a.baseId],a):add$1(this.invalidSprites.noBase,a)},e.prototype.removeFromInvalidSprites=function(a){a.baseId&&remove(this.invalidSprites[a.baseId],a),remove(this.invalidSprites.noBase,a)},e.prototype.addToInvalidPositions=function(a){a.baseId?add$1(this.invalidPositions[a.baseId],a):add$1(this.invalidPositions.noBase,a)},e.prototype.removeFromInvalidPositions=function(a){a.baseId&&remove(this.invalidPositions[a.baseId],a),remove(this.invalidPositions.noBase,a)},e.prototype.addToInvalidLayouts=function(a){a.baseId?add$1(this.invalidLayouts[a.baseId],a):add$1(this.invalidLayouts.noBase,a)},e.prototype.removeFromInvalidLayouts=function(a){a.baseId&&remove(this.invalidLayouts[a.baseId],a),remove(this.invalidLayouts.noBase,a)},e}(),registry=new Registry;function is(e,a){var i=registry.registeredClasses[a];return i!=null&&e instanceof i}var IndexedIterable=function(){function e(a,i,o){this._array=a,this._start=i,this._end=o}return e.prototype.iterator=function(){var a=this;return function(i){if(a._start!==a._end)if(a._start<a._end)for(var o=a._start;o<a._end&&i(a._array[o]);++o);else for(var o=a._start-1;o>=a._end&&i(a._array[o]);--o);}},e.prototype.backwards=function(){return new e(this._array,this._end,this._start)},e.prototype.range=function(a,i){if(a<=i){if(this._start===this._end)return this;if(this._start<this._end){var o=i-a;return a=Math.max(this._start+a,this._start),i=Math.min(a+o,this._end),new e(this._array,a,i)}else{var o=i-a;return a=Math.max(this._start-a,this._end),i=Math.max(a-o,this._end),new e(this._array,a,i)}}else throw new Error("Start index must be lower than end index")},e}(),ListGrouper=function(e){__extends(a,e);function a(i,o,c){var d=e.call(this,[i.events.on("inserted",function(g){var b=g.newValue,j=d._getKey(b),$=0;eachContinue(i.iterator(),function(rt){return rt===b?!1:(d._getKey(rt)===j&&++$,!0)}),d._insert(b,j,$)},void 0,!1),i.events.on("removed",function(g){d._remove(g.oldValue)},void 0,!1)])||this;return d._keys=[],d._groups={},d._getKey=o,d._sort=c,each(i.iterator(),function(g){d._insert(g,o(g))}),d}return a.prototype._insert=function(i,o,c){if(this._groups[o]==null){this._groups[o]=[];var d=getSortedIndex(this._keys,this._sort,o),g=d.found,b=d.index;if(g)throw new Error("Key already exists: "+o);insertIndex(this._keys,b,o)}c==null?this._groups[o].push(i):insertIndex(this._groups[o],c,i)},a.prototype._remove=function(i){var o=this._getKey(i),c=this._groups[o];if(c!=null&&(remove(c,i),c.length===0)){delete this._groups[o];var d=getSortedIndex(this._keys,this._sort,o),g=d.found,b=d.index;if(g)removeIndex(this._keys,b);else throw new Error("Key doesn't exist: "+o)}},a.prototype.iterator=function(){var i=this;return flatten(map(fromArray(this._keys),function(o){return fromArray(i._groups[o])}))},a}(MultiDisposer),ListDisposer=function(e){__extends(a,e);function a(i,o){o===void 0&&(o=!0);var c=this;if(o){var d=i.events.on("removed",function(g){g.oldValue.dispose()},void 0,!1);c=e.call(this,function(){d.dispose(),each(i.iterator(),function(g){g.dispose()})})||this}else c=e.call(this,function(){each(i.iterator(),function(g){g.dispose()})})||this;return c}return a}(Disposer);function checkBounds(e,a){if(!(e>=0&&e<a))throw new Error("Index out of bounds: "+e)}var List=function(){function e(a){a===void 0&&(a=[]),this.events=new EventDispatcher,this._values=a}return Object.defineProperty(e.prototype,"values",{get:function(){return this._values},enumerable:!0,configurable:!0}),e.prototype.contains=function(a){return this._values.indexOf(a)!==-1},e.prototype.removeValue=function(a){for(var i=0,o=this._values.length;i<o;)this._values[i]===a?(this.removeIndex(i),--o):++i},e.prototype.indexOf=function(a){return indexOf(this._values,a)},Object.defineProperty(e.prototype,"length",{get:function(){return this._values.length},enumerable:!0,configurable:!0}),e.prototype.hasIndex=function(a){return a>=0&&a<this._values.length},e.prototype.getIndex=function(a){return this._values[a]},e.prototype.setIndex=function(a,i){checkBounds(a,this._values.length);var o=this._values[a];return o!==i&&(this._values[a]=i,this.events.isEnabled("setIndex")&&this.events.dispatchImmediately("setIndex",{type:"setIndex",target:this,index:a,oldValue:o,newValue:i}),this.events.isEnabled("removed")&&this.events.dispatchImmediately("removed",{type:"removed",target:this,oldValue:o}),this.events.isEnabled("inserted")&&this.events.dispatchImmediately("inserted",{type:"inserted",target:this,newValue:i})),o},e.prototype.insertIndex=function(a,i){checkBounds(a,this._values.length+1),insertIndex(this._values,a,i),this.events.isEnabled("insertIndex")&&this.events.dispatchImmediately("insertIndex",{type:"insertIndex",target:this,index:a,newValue:i}),this.events.isEnabled("inserted")&&this.events.dispatchImmediately("inserted",{type:"inserted",target:this,newValue:i})},e.prototype._sortQuicksort=function(a,i,o){if(a<i){var c=this._sortPartition(a,i,o);this._sortQuicksort(a,c,o),this._sortQuicksort(c+1,i,o)}},e.prototype._sortPartition=function(a,i,o){for(var c=this._values,d=c[a],g=a-1,b=i+1;;){do++g;while(o(c[g],d)<0);do--b;while(o(c[b],d)>0);if(g>=b)return b;this.swap(g,b)}},e.prototype.sort=function(a){this._sortQuicksort(0,this._values.length-1,a)},e.prototype.swap=function(a,i){var o=this._values.length;if(checkBounds(a,o),checkBounds(i,o),a!==i){var c=this._values[a],d=this._values[i];this._values[a]=d,this.events.isEnabled("setIndex")&&this.events.dispatchImmediately("setIndex",{type:"setIndex",target:this,index:a,oldValue:c,newValue:d}),this._values[i]=c,this.events.isEnabled("setIndex")&&this.events.dispatchImmediately("setIndex",{type:"setIndex",target:this,index:i,oldValue:d,newValue:c})}},e.prototype.removeIndex=function(a){checkBounds(a,this._values.length);var i=this._values[a];return removeIndex(this._values,a),this.events.isEnabled("removeIndex")&&this.events.dispatchImmediately("removeIndex",{type:"removeIndex",target:this,index:a,oldValue:i}),this.events.isEnabled("removed")&&this.events.dispatchImmediately("removed",{type:"removed",target:this,oldValue:i}),i},e.prototype.moveValue=function(a,i){var o=this.indexOf(a);if(o!==-1){var c=this._values[o];removeIndex(this._values,o),this.events.isEnabled("removeIndex")&&this.events.dispatchImmediately("removeIndex",{type:"removeIndex",target:this,index:o,oldValue:c})}i==null?(i=this._values.length,this._values.push(a)):insertIndex(this._values,i,a),this.events.isEnabled("insertIndex")&&this.events.dispatchImmediately("insertIndex",{type:"insertIndex",target:this,index:i,newValue:a}),o===-1&&this.events.isEnabled("inserted")&&this.events.dispatchImmediately("inserted",{type:"inserted",target:this,newValue:a})},e.prototype.push=function(a){var i=this._values.push(a)-1;return this.events.isEnabled("insertIndex")&&this.events.dispatchImmediately("insertIndex",{type:"insertIndex",target:this,index:i,newValue:a}),this.events.isEnabled("inserted")&&this.events.dispatchImmediately("inserted",{type:"inserted",target:this,newValue:a}),a},e.prototype.unshift=function(a){this.insertIndex(0,a)},e.prototype.pushAll=function(a){var i=this;each$2(a,function(o){i.push(o)})},e.prototype.copyFrom=function(a){this.pushAll(a._values)},e.prototype.pop=function(){var a=this._values.length-1;return a<0?void 0:this.removeIndex(this._values.length-1)},e.prototype.shift=function(){return this._values.length?this.removeIndex(0):void 0},e.prototype.setAll=function(a){var i=this,o=copy$3(this._values);this._values.length=0,each$2(a,function(c){i._values.push(c)}),this.events.isEnabled("setAll")&&this.events.dispatchImmediately("setAll",{type:"setAll",target:this,oldArray:o,newArray:this._values}),this.events.isEnabled("removed")&&each$2(o,function(c){i.events.dispatchImmediately("removed",{type:"removed",target:i,oldValue:c})}),this.events.isEnabled("inserted")&&each$2(this._values,function(c){i.events.dispatchImmediately("inserted",{type:"inserted",target:i,newValue:c})})},e.prototype.clear=function(){this.setAll([])},e.prototype.iterator=function(){return fromArray(this._values)},e.prototype[Symbol.iterator]=function(){var a,i;return __generator(this,function(o){switch(o.label){case 0:a=this._values.length,i=0,o.label=1;case 1:return i<a?[4,this._values[i]]:[3,4];case 2:o.sent(),o.label=3;case 3:return++i,[3,1];case 4:return[2]}})},e.prototype.each=function(a){each$2(this._values,a)},e.prototype.range=function(a,i){if(a<=i){var o=i-a;return a=Math.max(a,0),i=Math.min(a+o,this._values.length),new IndexedIterable(this._values,a,i)}else throw new Error("Start index must be lower than end index")},e.prototype.backwards=function(){return new IndexedIterable(this._values,this._values.length,0)},e}(),ListTemplate=function(e){__extends(a,e);function a(i){var o=e.call(this)||this;return o.template=i,o}return Object.defineProperty(a.prototype,"template",{get:function(){return this._template},set:function(i){i.isTemplate=!0,this._template=i},enumerable:!0,configurable:!0}),a.prototype.copyFrom=function(i){var o=this;each(i.iterator(),function(c){o.push(c.clone())})},a.prototype.create=function(i){var o=i!=null?new i:this.template.clone();return this.push(o),o},a.prototype.clone=function(){for(var i=new a(this.template),o=this.values,c=o.length,d=0;d<c;++d)i.push(o[d].clone());return i},a}(List),OrderedList=function(){function e(a){this._values=[],this.events=new EventDispatcher,a!=null&&this.setAll(a)}return Object.defineProperty(e.prototype,"values",{get:function(){return this._values},enumerable:!0,configurable:!0}),e.prototype._insert=function(a){return this._values.push(a),this._values.length-1},Object.defineProperty(e.prototype,"length",{get:function(){return this._values.length},enumerable:!0,configurable:!0}),e.prototype.indexOf=function(a){return indexOf(this._values,a)},e.prototype.contains=function(a){return this.indexOf(a)!==-1},e.prototype.getIndex=function(a){return this._values[a]},Object.defineProperty(e.prototype,"first",{get:function(){return this._values[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"last",{get:function(){return this._values[this._values.length-1]},enumerable:!0,configurable:!0}),e.prototype.insert=function(a){var i=this._insert(a);this.events.isEnabled("inserted")&&this.events.dispatchImmediately("inserted",{type:"inserted",target:this,index:i,newValue:a})},e.prototype.remove=function(a){var i=this.indexOf(a);if(i!==-1){var o=this._values[i];removeIndex(this._values,i),this.events.isEnabled("removed")&&this.events.dispatchImmediately("removed",{type:"removed",target:this,index:i,oldValue:o})}},e.prototype.setAll=function(a){var i=this;eachReverse(this._values,function(o,c){i._values.pop(),i.events.isEnabled("removed")&&i.events.dispatchImmediately("removed",{type:"removed",target:i,index:c,oldValue:o})}),each$2(a,function(o){i.insert(o)})},e.prototype.clear=function(){this.setAll([])},e.prototype.slice=function(a,i){var o=new e;return o._values=this._values.slice(a,i),o},e.prototype.findClosestIndex=function(a,i,o){o===void 0&&(o="any");var c=-1,d,g,b=0;return eachContinue(this.iterator(),function(j){var $=i(j);if(o==="any"){if($===a)return c=b,!1;var rt=Math.abs(a-$);(!hasValue(g)||g>rt)&&(c=b,d=$,g=rt)}else o==="left"&&$<a?(!hasValue(d)||d<$)&&(c=b,d=$):o==="right"&&$>=a&&(!hasValue(d)||d>=$)&&(c=b,d=$);return++b,!0}),c===-1&&(o==="left"?c=0:o==="right"&&(c=this.length-1)),c},e.prototype.iterator=function(){return fromArray(this._values)},e.prototype[Symbol.iterator]=function(){var a,i;return __generator(this,function(o){switch(o.label){case 0:a=this._values.length,i=0,o.label=1;case 1:return i<a?[4,this._values[i]]:[3,4];case 2:o.sent(),o.label=3;case 3:return++i,[3,1];case 4:return[2]}})},e.prototype.each=function(a){each$2(this._values,a)},e}(),SortedList=function(e){__extends(a,e);function a(i){var o=e.call(this)||this;return o._ordering=i,o}return a.prototype._insert=function(i){var o=getSortedIndex(this._values,this._ordering,i).index;return insertIndex(this._values,o,i),o},a.prototype.indexOf=function(i){var o=getSortedIndex(this._values,this._ordering,i),c=o.found,d=o.index;return c?d:-1},a.prototype.update=function(i){var o=indexOf(this._values,i);if(o!==-1){var c=this._values.length-1;(o===0||this._ordering(this._values[o-1],i)<0)&&(o===c||this._ordering(i,this._values[o+1])<0)||(removeIndex(this._values,o),this._insert(i))}},a}(OrderedList),OrderedListTemplate=function(e){__extends(a,e);function a(i){var o=e.call(this)||this;return o.template=i,o}return Object.defineProperty(a.prototype,"template",{get:function(){return this._template},set:function(i){i.isTemplate=!0,this._template=i},enumerable:!0,configurable:!0}),a.prototype.copyFrom=function(i){var o=this;each(i.iterator(),function(c){o.insert(c.clone())})},a.prototype.slice=function(i,o){var c=new a(this.template);return c._values=this._values.slice(i,o),c},a.prototype.create=function(i){var o=i!=null?new i:this.template.clone();return this.insert(o),o},a}(OrderedList),SortedListTemplate=function(e){__extends(a,e);function a(i,o){var c=e.call(this,o)||this;return c.template=i,c}return Object.defineProperty(a.prototype,"template",{get:function(){return this._template},set:function(i){i.isTemplate=!0,this._template=i},enumerable:!0,configurable:!0}),a.prototype.copyFrom=function(i){var o=this;each(i.iterator(),function(c){o.insert(c.clone())})},a.prototype.create=function(i){var o=i!=null?new i:this.template.clone();return this.insert(o),o},a}(SortedList);function order(e,a){return e===a?0:e<a?-1:1}const Number$1=Object.freeze(Object.defineProperty({__proto__:null,order},Symbol.toStringTag,{value:"Module"}));function reverse(e){switch(e){case 0:return 0;case-1:return 1;case 1:return-1}}function or(e,a){return e===0?a:e}var GlobalAdapter=function(){function e(){this._callbackId=0,this._callbacks=new SortedList(function(a,i){return or(order(a.priority,i.priority),order(a.id,i.id))})}return e.prototype.addAll=function(a,i,o,c,d){c===void 0&&(c=0),this._callbacks.insert({id:++this._callbackId,key:i,callback:o,priority:c,scope:d,type:a})},e.prototype.isEnabled=function(a,i){return any(this._callbacks.values,function(o){return o.key===i&&a instanceof o.type})},e.prototype.applyAll=function(a,i,o){var c=this._callbacks.values,d=c.length;if(d==0)return o;for(var g=0;g<d;++g){var b=c[g];b.key===i&&a instanceof b.type&&(o=b.callback.call(b.scope,o,a,i))}return o},e}(),globalAdapter=new GlobalAdapter,Adapter=function(){function e(a){this._callbackId=0,this._callbacks=new SortedList(function(i,o){return or(order(i.priority,o.priority),order(i.id,o.id))}),this._disabled={},this.object=a,this.events=this._callbacks.events}return e.prototype.add=function(a,i,o,c){o===void 0&&(o=0),this._callbacks.insert({id:++this._callbackId,key:a,callback:i,priority:o,scope:c})},e.prototype.has=function(a,i,o,c){return o===void 0&&(o=0),contains$1(this._callbacks.iterator(),function(d){return d.key===a&&d.callback===i&&d.priority===o&&d.scope===c})},e.prototype.remove=function(a,i){var o=this;each$2(toArray$1(this._callbacks.iterator()),function(c){c.key===a&&(!isNumber$1(i)||i===c.priority)&&o._callbacks.remove(c)})},e.prototype.enableKey=function(a){delete this._disabled[a]},e.prototype.disableKey=function(a,i){i===void 0&&(i=1/0),this._disabled[a]=i},e.prototype._hasListenersByType=function(a){return any(this._callbacks.values,function(i){return i.key===a})},e.prototype.isEnabled=function(a){return this._disabled[a]==null&&(this._hasListenersByType(a)||globalAdapter.isEnabled(this.object,a))},e.prototype._shouldDispatch=function(a){var i=this._disabled[a];return isNumber$1(i)?(i<=1?delete this._disabled[a]:--this._disabled[a],!1):!0},e.prototype.apply=function(a,i){if(this._shouldDispatch(a)){var o=this._callbacks.values,c=o.length;if(c>0)for(var d=0;d<c;++d){var g=o[d];g.key===a&&(i=g.callback.call(g.scope,i,this.object,a))}return i=globalAdapter.applyAll(this.object,a,i),i}else return i},e.prototype.keys=function(){return toArray$1(map(this._callbacks.iterator(),function(a){return a.key}))},e.prototype.copyFrom=function(a){var i=this;each(a._callbacks.iterator(),function(o){i.add(o.key,o.callback,o.priority,o.scope)}),each$1(a._disabled,function(o,c){i._disabled[o]=c})},e.prototype.clear=function(){this._callbacks.clear()},e}(),namedColors={aliceblue:{r:240,g:248,b:255},antiquewhite:{r:250,g:235,b:215},aqua:{r:0,g:255,b:255},aquamarine:{r:127,g:255,b:212},azure:{r:240,g:255,b:255},beige:{r:245,g:245,b:220},bisque:{r:255,g:228,b:196},black:{r:0,g:0,b:0},blanchedalmond:{r:255,g:235,b:205},blue:{r:0,g:0,b:255},blueviolet:{r:138,g:43,b:226},brown:{r:165,g:42,b:42},burlywood:{r:222,g:184,b:135},cadetblue:{r:95,g:158,b:160},chartreuse:{r:127,g:255,b:0},chocolate:{r:210,g:105,b:30},coral:{r:255,g:127,b:80},cornflowerblue:{r:100,g:149,b:237},cornsilk:{r:255,g:248,b:220},crimson:{r:220,g:20,b:60},cyan:{r:0,g:255,b:255},darkblue:{r:0,g:0,b:139},darkcyan:{r:0,g:139,b:139},darkgoldenrod:{r:184,g:134,b:11},darkgray:{r:169,g:169,b:169},darkgrey:{r:169,g:169,b:169},darkgreen:{r:0,g:100,b:0},darkkhaki:{r:189,g:183,b:107},darkmagenta:{r:139,g:0,b:139},darkolivegreen:{r:85,g:107,b:47},darkorange:{r:255,g:140,b:0},darkorchid:{r:153,g:50,b:204},darkred:{r:139,g:0,b:0},darksalmon:{r:233,g:150,b:122},darkseagreen:{r:143,g:188,b:143},darkslateblue:{r:72,g:61,b:139},darkslategray:{r:47,g:79,b:79},darkslategrey:{r:47,g:79,b:79},darkturquoise:{r:0,g:206,b:209},darkviolet:{r:148,g:0,b:211},deeppink:{r:255,g:20,b:147},deepskyblue:{r:0,g:191,b:255},dimgray:{r:105,g:105,b:105},dimgrey:{r:105,g:105,b:105},dodgerblue:{r:30,g:144,b:255},firebrick:{r:178,g:34,b:34},floralwhite:{r:255,g:250,b:240},forestgreen:{r:34,g:139,b:34},fuchsia:{r:255,g:0,b:255},gainsboro:{r:220,g:220,b:220},ghostwhite:{r:248,g:248,b:255},gold:{r:255,g:215,b:0},goldenrod:{r:218,g:165,b:32},gray:{r:128,g:128,b:128},grey:{r:128,g:128,b:128},green:{r:0,g:128,b:0},greenyellow:{r:173,g:255,b:47},honeydew:{r:240,g:255,b:240},hotpink:{r:255,g:105,b:180},indianred:{r:205,g:92,b:92},indigo:{r:75,g:0,b:130},ivory:{r:255,g:255,b:240},khaki:{r:240,g:230,b:140},lavender:{r:230,g:230,b:250},lavenderblush:{r:255,g:240,b:245},lawngreen:{r:124,g:252,b:0},lemonchiffon:{r:255,g:250,b:205},lightblue:{r:173,g:216,b:230},lightcoral:{r:240,g:128,b:128},lightcyan:{r:224,g:255,b:255},lightgoldenrodyellow:{r:250,g:250,b:210},lightgray:{r:211,g:211,b:211},lightgrey:{r:211,g:211,b:211},lightgreen:{r:144,g:238,b:144},lightpink:{r:255,g:182,b:193},lightsalmon:{r:255,g:160,b:122},lightseagreen:{r:32,g:178,b:170},lightskyblue:{r:135,g:206,b:250},lightslategray:{r:119,g:136,b:153},lightslategrey:{r:119,g:136,b:153},lightsteelblue:{r:176,g:196,b:222},lightyellow:{r:255,g:255,b:224},lime:{r:0,g:255,b:0},limegreen:{r:50,g:205,b:50},linen:{r:250,g:240,b:230},magenta:{r:255,g:0,b:255},maroon:{r:128,g:0,b:0},mediumaquamarine:{r:102,g:205,b:170},mediumblue:{r:0,g:0,b:205},mediumorchid:{r:186,g:85,b:211},mediumpurple:{r:147,g:112,b:219},mediumseagreen:{r:60,g:179,b:113},mediumslateblue:{r:123,g:104,b:238},mediumspringgreen:{r:0,g:250,b:154},mediumturquoise:{r:72,g:209,b:204},mediumvioletred:{r:199,g:21,b:133},midnightblue:{r:25,g:25,b:112},mintcream:{r:245,g:255,b:250},mistyrose:{r:255,g:228,b:225},moccasin:{r:255,g:228,b:181},navajowhite:{r:255,g:222,b:173},navy:{r:0,g:0,b:128},oldlace:{r:253,g:245,b:230},olive:{r:128,g:128,b:0},olivedrab:{r:107,g:142,b:35},orange:{r:255,g:165,b:0},orangered:{r:255,g:69,b:0},orchid:{r:218,g:112,b:214},palegoldenrod:{r:238,g:232,b:170},palegreen:{r:152,g:251,b:152},paleturquoise:{r:175,g:238,b:238},palevioletred:{r:219,g:112,b:147},papayawhip:{r:255,g:239,b:213},peachpuff:{r:255,g:218,b:185},peru:{r:205,g:133,b:63},pink:{r:255,g:192,b:203},plum:{r:221,g:160,b:221},powderblue:{r:176,g:224,b:230},purple:{r:128,g:0,b:128},rebeccapurple:{r:102,g:51,b:153},red:{r:255,g:0,b:0},rosybrown:{r:188,g:143,b:143},royalblue:{r:65,g:105,b:225},saddlebrown:{r:139,g:69,b:19},salmon:{r:250,g:128,b:114},sandybrown:{r:244,g:164,b:96},seagreen:{r:46,g:139,b:87},seashell:{r:255,g:245,b:238},sienna:{r:160,g:82,b:45},silver:{r:192,g:192,b:192},skyblue:{r:135,g:206,b:235},slateblue:{r:106,g:90,b:205},slategray:{r:112,g:128,b:144},slategrey:{r:112,g:128,b:144},snow:{r:255,g:250,b:250},springgreen:{r:0,g:255,b:127},steelblue:{r:70,g:130,b:180},tan:{r:210,g:180,b:140},teal:{r:0,g:128,b:128},thistle:{r:216,g:191,b:216},tomato:{r:255,g:99,b:71},turquoise:{r:64,g:224,b:208},violet:{r:238,g:130,b:238},wheat:{r:245,g:222,b:179},white:{r:255,g:255,b:255},whitesmoke:{r:245,g:245,b:245},yellow:{r:255,g:255,b:0},yellowgreen:{r:154,g:205,b:50}};function rgb(e,a){var i;return namedColors[e]?i=namedColors[e]:e.charAt(0)==="#"?i=hexToRgb(e):e.match(/^rgba?\(/)&&(i=rgbaToRgb(e)),i||(i={r:0,g:0,b:0,a:1}),hasValue(a)&&(i.a=a),i}function hexToRgb(e){var a=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(a,function(o,c,d,g){return c+c+d+d+g+g});var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return i?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16)}:hexToRgbWithAlpha(e)}function hexToRgbWithAlpha(e){var a=/^#?([a-f\d])([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(a,function(o,c,d,g,b){return c+c+d+d+g+g+b+b});var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return i?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16),a:parseInt(i[4],16)/256}:void 0}function rgbaToRgb(e){e=e.replace(/[ ]/g,"");var a=e.match(/^rgb\(([0-9]*),([0-9]*),([0-9]*)\)/i);if(a)a.push("1");else if(a=e.match(/^rgba\(([0-9]*),([0-9]*),([0-9]*),([.0-9]*)\)/i),!a)return;return{r:parseInt(a[1]),g:parseInt(a[2]),b:parseInt(a[3]),a:parseFloat(a[4])}}function rgbToHex(e){return"#"+pad2(e.r.toString(16))+pad2(e.g.toString(16))+pad2(e.b.toString(16))}function rgbToRGBA(e){return hasValue(e.a)&&e.a!==1?"rgba("+e.r+","+e.g+","+e.b+","+e.a+")":"rgb("+e.r+","+e.g+","+e.b+")"}function pad2(e){return e.length==1?"0"+e:""+e}function interpolate(e,a,i){return i=fitToRange(i,0,1),e?a?{r:e.r+Math.round((a.r-e.r)*i),g:e.g+Math.round((a.g-e.g)*i),b:e.b+Math.round((a.b-e.b)*i),a:(e.a||1)+Math.round(((a.a||1)-(e.a||1))*i)}:e:a||e}function lighten(e,a){return e&&{r:Math.max(0,Math.min(255,e.r+getLightnessStep(e.r,a))),g:Math.max(0,Math.min(255,e.g+getLightnessStep(e.g,a))),b:Math.max(0,Math.min(255,e.b+getLightnessStep(e.b,a))),a:e.a}}function getLightnessStep(e,a){var i=a>0?255-e:e;return Math.round(i*a)}function brighten(e,a){if(e){var i=Math.min(Math.max(e.r,e.g,e.b),230),o=getLightnessStep(i,a);return{r:Math.max(0,Math.min(255,Math.round(e.r+o))),g:Math.max(0,Math.min(255,Math.round(e.g+o))),b:Math.max(0,Math.min(255,Math.round(e.b+o))),a:e.a}}else return e}function getBrightnessStep(e,a){var i=255;return Math.round(i*a)}function saturate(e,a){if(e==null||a==1)return e;var i=rgbToHsl(e);return i.s=a,hslToRgb(i)}function hslToRgb(e){var a,i,o,c=e.h,d=e.s,g=e.l;if(d==0)a=i=o=g;else{var b=function(_e,st,ut){return ut<0&&(ut+=1),ut>1&&(ut-=1),ut<.16666666666666666?_e+(st-_e)*6*ut:ut<.5?st:ut<.6666666666666666?_e+(st-_e)*(.6666666666666666-ut)*6:_e},j=g<.5?g*(1+d):g+d-g*d,$=2*g-j;a=b($,j,c+1/3),i=b($,j,c),o=b($,j,c-1/3)}return{r:Math.round(a*255),g:Math.round(i*255),b:Math.round(o*255)}}function rgbToHsl(e){var a=e.r/255,i=e.g/255,o=e.b/255,c=Math.max(a,i,o),d=Math.min(a,i,o),g=0,b=0,j=(c+d)/2;if(c===d)g=b=0;else{var $=c-d;switch(b=j>.5?$/(2-c-d):$/(c+d),c){case a:g=(i-o)/$+(i<o?6:0);break;case i:g=(o-a)/$+2;break;case o:g=(a-i)/$+4;break}g/=6}return{h:g,s:b,l:j}}function rgbToHsv(e){var a=e.r/255,i=e.g/255,o=e.b/255,c=Math.max(a,i,o),d=Math.min(a,i,o),g=0,b=0,j=c,$=c-d;if(b=c==0?0:$/c,c==d)g=0;else{switch(c){case a:g=(i-o)/$+(i<o?6:0);break;case i:g=(o-a)/$+2;break;case o:g=(a-i)/$+4;break}g/=6}return{h:g,s:b,v:j}}function hsvToRgb(e){var a=0,i=0,o=0,c=e.h,d=e.s,g=e.v,b=Math.floor(c*6),j=c*6-b,$=g*(1-d),rt=g*(1-j*d),_e=g*(1-(1-j)*d);switch(b%6){case 0:a=g,i=_e,o=$;break;case 1:a=rt,i=g,o=$;break;case 2:a=$,i=g,o=_e;break;case 3:a=$,i=rt,o=g;break;case 4:a=_e,i=$,o=g;break;case 5:a=g,i=$,o=rt;break}return{r:Math.round(a*255),g:Math.round(i*255),b:Math.round(o*255)}}function isLight(e){return(e.r*299+e.g*587+e.b*114)/1e3>=128}const Colors=Object.freeze(Object.defineProperty({__proto__:null,brighten,getBrightnessStep,getLightnessStep,hexToRgb,hexToRgbWithAlpha,hslToRgb,hsvToRgb,interpolate,isLight,lighten,pad2,rgb,rgbToHex,rgbToHsl,rgbToHsv,rgbToRGBA,rgbaToRgb,saturate},Symbol.toStringTag,{value:"Module"}));var Color=function(){function e(a){this._value=a}return Object.defineProperty(e.prototype,"rgb",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hex",{get:function(){return this._value?rgbToHex(this._value):"none"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rgba",{get:function(){return this._value?rgbToRGBA(this._value):"none"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._value!=null&&this._value.a!=null?this._value.a:1},set:function(a){this._value&&(this._value.a=a)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lightColor",{get:function(){return this._lightColor||(this._lightColor=new e({r:255,g:255,b:255})),this._lightColor},set:function(a){this._lightColor=a},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"darkColor",{get:function(){return this._darkColor||(this._darkColor=new e({r:0,g:0,b:0})),this._darkColor},set:function(a){this._darkColor=a},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return this.alpha<1?this.rgba:this.hex},e.prototype.lighten=function(a){return new e(lighten(this.rgb,a))},e.prototype.brighten=function(a){return new e(brighten(this.rgb,a))},e.prototype.saturate=function(a){return new e(saturate(this.rgb,a))},Object.defineProperty(e.prototype,"alternative",{get:function(){if(this.rgb!=null)return isLight(this.rgb)?this.darkColor:this.lightColor;throw new Error("Color does not exist")},enumerable:!0,configurable:!0}),e}();function color(e,a){if(!hasValue(e))return new Color(void 0);if(typeof e=="string"){var i="_color_"+e+"_"+(a||"1"),o=registry.getCache(i);if(o)return new Color({r:o.r,g:o.g,b:o.b,a:o.a});var c=rgb(e,a);return registry.setCache(i,c),new Color(c)}return e instanceof Color?(hasValue(a)&&(e.alpha=a),e):new Color(e)}function isColor(e){return e instanceof Color}function castColor(e){return color(e)}function toColor(e){return hasValue(e)&&!isColor(e)?castColor(e):e}var BaseObject=function(){function e(){this._disposed=!1,this._disposers=[],this.className="BaseObject"}return e.prototype.debug=function(){},Object.defineProperty(e.prototype,"uid",{get:function(){return this._uid||(this._uid=registry.getUniqueId(),registry.map.setKey(this._uid,this)),this._uid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},set:function(a){this._id=a},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"map",{get:function(){return this._map||(this._map=new Dictionary),this._map},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delayedMap",{get:function(){return this._delayedMap||(this._delayedMap=new Dictionary),this._delayedMap},enumerable:!0,configurable:!0}),e.prototype.addDelayedMap=function(a,i){var o=this.delayedMap;o.hasKey(i)||o.setKey(i,[]);var c=o.getKey(i);c.push({property:a,target:this})},e.prototype.processDelayedMap=function(){var a=this;this.delayedMap.each(function(i,o){if(a.map.hasKey(i)){var c=a.map.getKey(i);each$2(o,function(d){d.target[d.property]=c}),a.delayedMap.removeKey(i)}})},e.prototype.applyTheme=function(){var a=this;if(registry){var i=this.getCurrentThemes();i&&each$2(i,function(o,c){o(a)})}},Object.defineProperty(e.prototype,"themes",{get:function(){return this._themes},set:function(a){this._themes=a},enumerable:!0,configurable:!0}),e.prototype.getCurrentThemes=function(){return this.themes||registry.themes},e.prototype.isDisposed=function(){return this._disposed},e.prototype.dispose=function(){if(!this._disposed){this._disposed=!0;var a=this._disposers;for(this._disposers=null;a.length!==0;){var i=a.shift();i.dispose()}this.clearCache(),this.clonedFrom&&this.clonedFrom.clones.removeValue(this);var o=this._uid;o!=null&&registry.map.removeKey(o)}},e.prototype.addDisposer=function(a){this._disposers.push(a)},e.prototype.removeDispose=function(a){if(!this._disposed){var i=indexOf(this._disposers,a);i>-1&&this._disposers.splice(i,1)}a.dispose()},e.prototype.clone=function(a){a||(a="clone-"+registry.getUniqueId());var i=new this.constructor;return i.cloneId=a,i.copyFrom(this),i},Object.defineProperty(e.prototype,"clones",{get:function(){return this._clones||(this._clones=new List),this._clones},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(a){a.clones.push(this),this.clonedFrom=a},Object.defineProperty(e.prototype,"className",{get:function(){return this._className},set:function(a){this._className=a},enumerable:!0,configurable:!0}),e.prototype.setCache=function(a,i,o){cache.set(this.uid,a,i,o)},e.prototype.getCache=function(a,i){return i===void 0&&(i=void 0),cache.get(this.uid,a,i)},e.prototype.clearCache=function(){cache.clear(this.uid)},e.prototype.setTimeout=function(a,i){var o=this,c=setTimeout(function(){o.removeDispose(d),a()},i),d=new Disposer(function(){clearTimeout(c)});return this._disposers.push(d),d},e.prototype.setInterval=function(a,i){var o=this,c=setInterval(function(){o.removeDispose(d),a()},i),d=new Disposer(function(){clearTimeout(c)});return this._disposers.push(d),d},Object.defineProperty(e.prototype,"config",{set:function(a){try{this.processConfig(a)}catch(i){this.raiseCriticalError(i)}},enumerable:!0,configurable:!0}),e.prototype.processConfig=function(a){var i=this;if(a){var o=this;if(eachOrdered(a,function(d,g){var b=g;if(d=="callback"&&typeof g=="function"&&g.call(o),i.hasProperty(d)){var j;if(isObject$1(b)&&hasValue(b.type)&&(!isObject$1(o[d])||!hasValue(o[d].className)||b.forceCreate||o[d].className!=b.type)&&!i.asIs(d)?(j=i.createClassInstance(b.type),j?o[d]=j:j=o[d]):j=o[d],j instanceof Adapter)i.processAdapters(j,b);else if(j instanceof EventDispatcher)i.processEvents(j,b);else if(d=="locale"&&isString$1(b))window["am4lang_"+b]&&(o[d]=window["am4lang_"+b]);else if(d=="parent"&&isString$1(b)){var $=i.map.getKey(b);$?o[d]=$:i.addDelayedMap("parent",b)}else if(i.asIs(d))o[d]=b;else if(i.asFunction(d)&&isString$1(b))if(hasValue(registry.registeredClasses[b]))o[d]=registry.registeredClasses[b];else throw Error("Invalid easing function: "+b);else if(b instanceof e)o[d]=b;else if(j instanceof e)j.config=b;else if(j instanceof ListTemplate||j instanceof OrderedListTemplate||j instanceof SortedListTemplate){if(isArray$1(b))j instanceof ListTemplate?i.processListTemplate(b,j):i.processOrderedTemplate(b,j);else if(isObject$1(b))if(b instanceof e)j.template=b;else{var rt=void 0;hasValue(b.template)?rt=b.template:rt=b,j.template instanceof e?j.template.config=rt:each$1(rt,function(_e,st){var ut=j.template[_e];ut instanceof Adapter?i.processAdapters(ut,st):ut instanceof EventDispatcher?i.processEvents(ut,st):ut instanceof DictionaryTemplate?i.processDictionaryTemplate(ut,st):j.template[_e]instanceof e?j.template[_e].config=st:isObject$1(st)&&hasValue(st.type)?(ut=i.createClassInstance(st.type),ut?(ut instanceof e&&(ut.config=st),j.template[_e]=ut):j.template[_e]=st):ut instanceof List?i.processList(st,ut):j.template[_e]=i.maybeColorOrPercent(st)}),hasValue(b.values)&&(j instanceof ListTemplate?i.processListTemplate(b.values,j):i.processOrderedTemplate(b.values,j))}}else j instanceof List?d=="children"?i.processList(b,j,i):i.processList(b,j):j instanceof DictionaryTemplate?i.processDictionaryTemplate(j,b):j instanceof Dictionary?i.processDictionary(j,b):j instanceof Color||j instanceof Percent?o[d]=i.maybeColorOrPercent(b):isObject$1(j)&&isObject$1(b)?copyAllProperties(b,j):(b=i.maybeColorOrPercent(b),o[d]=b)}else i.isReserved(d)||(o[d]=b)},this.configOrder),this.processingErrors.length){var c=this.processingErrors.join(`
`);throw this._processingErrors=[],Error(c)}}},e.prototype.maybeColorOrPercent=function(a){if(isString$1(a)){if(a.match(/^[\-]?[0-9.]+\%$/))return percent(toNumber(a));if(a.match(/^\#[0-9abcdef]{3,}$/i))return color(a)}return a},e.prototype.processAdapters=function(a,i){var o=this;isArray$1(i)?each$2(i,function(c,d){a.add(c.key,c.callback,c.priority||0,o)}):isObject$1(i)&&each$1(i,function(c,d){a.has(c,d)||a.add(c,d)})},e.prototype.processEvents=function(a,i){var o=this;isArray$1(i)?each$2(i,function(c,d){a.on(c.type,c.callback,o)}):isObject$1(i)&&each$1(i,function(c,d){a.has(c,d)||a.on(c,d)})},e.prototype.processDictionaryTemplate=function(a,i){isObject$1(i)&&each$1(i,function(o,c){var d;o=="template"?d=a.template:a.hasKey(o)?d=a.getKey(o):d=a.create(o),d instanceof e?d.config=c:isObject$1(d)&&isObject$1(c)?copyAllProperties(c,d):d.setKey(o,c)})},e.prototype.processDictionary=function(a,i){isObject$1(i)&&each$1(i,function(o,c){a.setKey(o,c)})},e.prototype.processListTemplate=function(a,i){var o=this;for(each$2(a,function(c,d){var g=o.getConfigEntryType(c),b;if(i.hasIndex(d)&&!c.forceCreate)b=i.getIndex(d);else if(c instanceof e){i.push(c);return}else g?b=i.create(g):b=i.create();c===b||isObject$1(c)&&(b instanceof e?b.config=c:isObject$1(b)&&isObject$1(c)?copyAllProperties(c,b):i.setIndex(i.indexOf(b),c))});a.length>i.length;)i.pop()},e.prototype.processOrderedTemplate=function(a,i){var o=this;each$2(a,function(c,d){var g=o.getConfigEntryType(c),b;g?b=i.create(g):b=i.create(),isObject$1(c)&&(b instanceof e?b.config=c:isObject$1(b)&&isObject$1(c)?copyAllProperties(c,b):i.insert(c))})},e.prototype.processList=function(a,i,o){var c=this;isArray$1(a)||(a=[a]);var d=i.length,g=0;for(each$2(a,function(b,j){if(isObject$1(b)){var $=void 0;if(j<d&&!b.forceCreate)$=i.getIndex(j);else if(b instanceof e){i.push(b);return}else g++,$=c.createEntryInstance(b),o?$.parent=o:i.push($);$ instanceof e?$.config=b:isObject$1($)&&isObject$1(b)&&copyAllProperties(b,$)}else i.hasIndex(j)?i.setIndex(j,b):i.push(b)});!o&&a.length+g<i.length;)i.pop()},e.prototype.configOrder=function(a,i){return a==i?0:a=="language"?-1:i=="language"?1:0},e.prototype.asIs=function(a){return indexOf(["locale"],a)!=-1},e.prototype.asFunction=function(a){return!1},e.prototype.createClassInstance=function(a){if(hasValue(registry.registeredClasses[a]))return new registry.registeredClasses[a];throw Error('Invalid type: "'+a+'".')},e.prototype.createEntryInstance=function(a){var i;return hasValue(a.type)&&(i=this.createClassInstance(a.type)),i||a},e.prototype.getConfigEntryType=function(a){if(hasValue(a.type)){if(hasValue(registry.registeredClasses[a.type]))return registry.registeredClasses[a.type];throw Error('Invalid type: "'+a.type+'".')}},e.prototype.hasProperty=function(a){return a in this},e.prototype.isReserved=function(a){return["type","forceCreate"].indexOf(a)!==-1},Object.defineProperty(e.prototype,"processingErrors",{get:function(){return this._processingErrors||(this._processingErrors=[]),this._processingErrors},enumerable:!0,configurable:!0}),e}(),BaseObjectEvents=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="BaseObjectEvents",i}return Object.defineProperty(a.prototype,"events",{get:function(){return this._eventDispatcher||(this._eventDispatcher=new EventDispatcher,this._disposers.push(this._eventDispatcher)),this._eventDispatcher},enumerable:!0,configurable:!0}),a.prototype.dispatch=function(i,o){this._eventDispatcher&&this.events.isEnabled(i)&&(o?(o.type=i,o.target=o.target||this,this.events.dispatch(i,{type:i,target:this})):this.events.dispatch(i,{type:i,target:this}))},a.prototype.dispatchImmediately=function(i,o){this._eventDispatcher&&this.events.isEnabled(i)&&(o?(o.type=i,o.target=o.target||this,this.events.dispatchImmediately(i,o)):this.events.dispatchImmediately(i,{type:i,target:this}))},a.prototype.copyFrom=function(i){e.prototype.copyFrom.call(this,i),i._eventDispatcher&&this.events.copyFrom(i._eventDispatcher)},a}(BaseObject);function isSafari(){return/apple/i.test(navigator.vendor)}function isInternetExplorer(){return/MSIE |Trident\//.test(navigator.userAgent)}var PX="px",STRING="string",NUMBER="number",DATE="date",DURATION="duration",PLACEHOLDER="__§§§__",PLACEHOLDER2="__§§§§__";function used(e){}function copyProperties(e,a){return each$1(e,function(i,o){hasValue(o)&&(a[i]=o)}),a}function stripHash(e){return/^[^#]*/.exec(e)[0]}function getBaseURI(){var e="#";if(isSafari()){var a=document.baseURI;if(a){a=stripHash(a);var i=stripHash(location.href);a!==i&&(e=i+e)}}return e}function softCopyProperties(e,a){return each$1(e,function(i,o){hasValue(o)&&!hasValue(a[i])&&(a[i]=o)}),a}function copy$1(e,a){return each$1(e,function(i,o){a[i]=o}),a}function isNotEmpty(e){return hasValue(e)&&e.toString()!==""}function relativeToValue(e,a){return isNumber$1(e)?e:e!=null&&isNumber$1(e.value)&&isNumber$1(a)?a*e.value:0}function relativeRadiusToValue(e,a,i){var o;return isNumber$1(e)?(o=e,o<0&&(i?o=a+o:o=a-o)):e!=null&&isNumber$1(e.value)&&(o=a*e.value),o}function valueToRelative(e,a){return e instanceof Percent?e.value:e/a}function getPixelRatio(){var e=window.devicePixelRatio||1;return e}function camelToDashed(e){return e.replace(/\W+/g,"-").replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase()}function capitalize(e){var a=e.split("");return a[0]=a[0].toUpperCase(),a.join("")}function stringify(e){return JSON.stringify(e)}function escapeForRgex(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function splitTextByCharCount(e,a,i,o,c){if(e.length<=a)return[e];var d=[];if(i){for(var g=-1,b=e.replace(/([,;:!?\\\/]+|[\s])/g,PLACEHOLDER+"$1"+PLACEHOLDER),j=b.split(PLACEHOLDER),$=1;$<j.length;$++){var rt=j[$];(rt=="."||rt==",")&&j[$-1].match(/[\w]+$/)&&(j[$-1]+=rt,j[$]="")}for(var $=0;$<j.length;$++){var rt=j[$],_e=rt.length;if(_e!==0){if(_e>a&&(i!==!0||c!=!1)){o&&(rt=reverseString(rt));var st=rt.match(new RegExp(".{1,"+a+"}","g"));if(st){if(o)for(var ut=0;ut<st.length;ut++)st[ut]=reverseString(st[ut]);d=d.concat(st)}}else g===-1&&(d.push(""),g=0),d[g].length+_e+1>a&&d[g]!==""&&(d.push(""),g++),d[g]+=rt;g=d.length-1}}}else{var st=e.match(new RegExp(".{1,"+a+"}","g"));if(st){if(o)for(var ut=0;ut<st.length;ut++)o||(st[ut]=reverseString(st[ut]));d=st}}return d.length==1&&i&&c&&d[0].length>a&&(d=[]),d}function truncateWithEllipsis(e,a,i,o,c){if(e.length<=a)return e;a-=i.length,a<1&&(a=1);var d=splitTextByCharCount(e,a,o,c);return(d[0]||"")+i}function trim$1(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function rtrim(e){return e.replace(/[\s\uFEFF\xA0]+$/g,"")}function ltrim(e){return e.replace(/^[\s\uFEFF\xA0]+/g,"")}function reverseString(e){return e.split("").reverse().join("")}function unquote(e){var a=e.trim();return a=e.replace(/^'(.*)'$/,"$1"),a==e&&(a=e.replace(/^"(.*)"$/,"$1")),a}function padString(e,a,i){return a===void 0&&(a=0),i===void 0&&(i="0"),typeof e!="string"&&(e=e.toString()),a>e.length?Array(a-e.length+1).join(i)+e:e}function getFormat(e){if(typeof e>"u")return STRING;e=e.toLowerCase().replace(/^\[[^\]]*\]/,""),e=e.replace(/\[[^\]]+\]/,""),e=e.trim();var a=e.match(/\/(date|number|duration)$/);return a?a[1]:e===NUMBER?NUMBER:e===DATE?DATE:e===DURATION?DURATION:e.match(/[#0]/)?NUMBER:e.match(/[ymwdhnsqaxkzgtei]/)?DATE:STRING}function cleanFormat(e){return e.replace(/\/(date|number|duration)$/i,"")}function stripTags(e){return e&&e.replace(/<[^>]*>/g,"")}function plainText(e){return e&&stripTags((""+e).replace(/[\n\r]+/g,". "))}function numberToString(e){if(isNaN$1(e))return"NaN";if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity";if(e===0&&1/e===-1/0)return"-0";var a=e<0;e=Math.abs(e);var i=getValue(/^([0-9]+)(?:\.([0-9]+))?(?:e[\+\-]([0-9]+))?$/.exec(""+e)),o=i[1],c=i[2]||"",d;if(i[3]==null)d=c===""?o:o+"."+c;else{var g=+i[3];if(e<1){var b=g-1;d="0."+repeat("0",b)+o+c}else{var b=g-c.length;b===0?d=o+c:b<0?d=o+c.slice(0,b)+"."+c.slice(b):d=o+c+repeat("0",b)}}return a?"-"+d:d}function anyToDate(e){if(isDate$1(e)){var a=new Date(e);return a.setMilliseconds(e.getMilliseconds()),a}else{if(isNumber$1(e))return new Date(e);var i=Number(e);return isNumber$1(i)?new Date(i):new Date(e)}}function anyToNumber(e){if(isDate$1(e))return e.getTime();if(isNumber$1(e))return e;if(isString$1(e)){var a=Number(e);return isNumber$1(a)?a:void 0}}function getYearDay(e,a){var i=new Date(e.getFullYear(),0,0),o=e.getTime()-i.getTime()+(i.getTimezoneOffset()-e.getTimezoneOffset())*60*1e3,c=1e3*60*60*24;return Math.floor(o/c)}function getWeek(e,a){var i=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),o=i.getUTCDay()||7;i.setUTCDate(i.getUTCDate()+4-o);var c=new Date(Date.UTC(i.getUTCFullYear(),0,1));return Math.ceil(((i.getTime()-c.getTime())/864e5+1)/7)}function getMonthWeek(e,a){var i=getWeek(new Date(e.getFullYear(),e.getMonth(),1)),o=getWeek(e);return o==1&&(o=53),o-i+1}function getDayFromWeek(e,a,i,o){i===void 0&&(i=1),o===void 0&&(o=!1);var c=new Date(a,0,4,0,0,0,0);o&&c.setUTCFullYear(a);var d=e*7+i-((c.getDay()||7)+3);return d}function get12Hours(e,a){return e>12?e-=12:e===0&&(e=12),hasValue(a)?e+(a-1):e}function getTimeZone(e,a,i,o){if(a===void 0&&(a=!1),i===void 0&&(i=!1),o===void 0&&(o=!1),o)return a?"Coordinated Universal Time":"UTC";var c=e.toLocaleString("UTC"),d=e.toLocaleString("UTC",{timeZoneName:a?"long":"short"}).substr(c.length);return i===!1&&(d=d.replace(/ (standard|daylight|summer|winter) /i," ")),d}function random(e,a){return Math.floor(Math.random()*(a-e))+e}function fitNumber(e,a,i){return e>i?i:e<a?a:e}function fitNumberRelative(e,a,i){var o=i-a;return(e>i||e<a)&&(e=a+(e-o*Math.floor(e/o))),e}function svgPointToSprite(e,a){var i=e.x,o=e.y,c=[];if(a){for(;hasValue(a.parent);)c.push(a),a=a.parent;c.reverse();for(var d=0;d<c.length;d++){var g=c[d],b=g.rotation,j=i-g.pixelX-g.ex,$=o-g.pixelY-g.ey;g.dx&&(i-=g.dx),g.dy&&(o-=g.dy);var rt=g.scale;g.group&&(rt=g.group.scale),i=(cos(-b)*j-sin(-b)*$)/rt-g.pixelPaddingLeft,o=(cos(-b)*$+sin(-b)*j)/rt-g.pixelPaddingTop}}return{x:i,y:o}}function spritePointToSvg(e,a){var i=e.x,o=e.y;if(a)for(;hasValue(a.parent);){var c=a.rotation;i+=a.pixelPaddingLeft+a.ex,o+=a.pixelPaddingTop+a.ey;var d=a.scale;a.group&&(d=a.group.scale);var g=a.pixelX+(i*cos(c)-o*sin(c))*d,b=a.pixelY+(i*sin(c)+o*cos(c))*d;a.dx&&(g+=a.dx),a.dy&&(b+=a.dy),i=g,o=b,a=a.parent}return{x:i,y:o}}function spritePointToSprite(e,a,i){return svgPointToSprite(spritePointToSvg(e,a),i)}function svgRectToSprite(e,a){var i=svgPointToSprite(e,a),o=svgPointToSprite({x:e.x+e.width,y:e.y+e.height},a);return{x:i.x,y:i.y,width:o.x-i.x,height:o.y-i.y}}function spriteRectToSvg(e,a){var i=spritePointToSvg(e,a),o=spritePointToSvg({x:e.x+e.width,y:e.y+e.height},a);return{x:i.x,y:i.y,width:o.x-i.x,height:o.y-i.y}}function documentPointToSvg(e,a,i){try{var o=a.getBoundingClientRect();return isNumber$1(i)||(i=1),{x:(e.x-o.left)/i,y:(e.y-o.top)/i}}catch{return e}}function svgPointToDocument(e,a){try{var i=a.getBoundingClientRect();return{x:e.x+i.left,y:e.y+i.top}}catch{return e}}function documentPointToSprite(e,a){if(a&&a.htmlContainer){var i=documentPointToSvg(e,getValue(a.htmlContainer),a.svgContainer.cssScale);return svgPointToSprite(i,a)}else return e}function spritePointToDocument(e,a){if(a&&a.htmlContainer){var i=spritePointToSvg(e,a);return svgPointToDocument(i,getValue(a.htmlContainer))}else return e}function width(e){var a=getComputedStyle(e),i=parseFloat(a.paddingLeft)+parseFloat(a.paddingRight),o=parseFloat(a.borderLeftWidth)+parseFloat(a.borderRightWidth);return e.clientWidth-i-o}function height(e){var a=getComputedStyle(e),i=parseFloat(a.paddingTop)+parseFloat(a.paddingBottom),o=parseFloat(a.borderTopWidth)+parseFloat(a.borderBottomWidth);return e.clientHeight-i-o}function decimalPlaces(e){var a=(""+e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return a?Math.max(0,(a[1]?a[1].length:0)-(a[2]?+a[2]:0)):0}var urlRegexp=/^([a-zA-Z][a-zA-Z0-9\+\.\-]*:)?(?:(\/\/)([^\@]+\@)?([^\/\?\#\:]*)(\:[0-9]+)?)?([^\?\#]*)(\?[^\#]*)?(\#.*)?$/;function parseUrl(e){var a=urlRegexp.exec(e);return{protocol:a&&a[1]||"",separator:a&&a[2]||"",authority:a&&a[3]||"",domain:a&&a[4]||"",port:a&&a[5]||"",path:a&&a[6]||"",query:a&&a[7]||"",hash:a&&a[8]||""}}function serializeUrl(e){return e.protocol+e.separator+e.authority+e.domain+e.port+e.path+e.query+e.hash}function isRelativeUrl(e){return e.protocol===""&&e.separator===""&&e.authority===""&&e.domain===""&&e.port===""}function joinUrl(e,a){var i=parseUrl(e),o=parseUrl(a);if(isRelativeUrl(i))throw new Error("Left URL is not absolute");if(isRelativeUrl(o)){if(o.path!=="")if(o.path[0]==="/")i.path=o.path;else{var c=i.path.split(/\//),d=o.path.split(/\//);if(c.length===0?d.length!==0&&c.push(""):c.length>1&&c.pop(),pushAll(c,d),i.path=c.join("/"),i.path!==""&&i.path[0]!=="/")throw new Error("URL path must start with /")}return i.query=o.query,i.hash=o.hash,serializeUrl(i)}else return serializeUrl(o)}function isIE(){return!!window.MSInputMethodContext&&!!document.documentMode}const Utils=Object.freeze(Object.defineProperty({__proto__:null,anyToDate,anyToNumber,camelToDashed,capitalize,cleanFormat,copy:copy$1,copyProperties,decimalPlaces,documentPointToSprite,documentPointToSvg,escapeForRgex,fitNumber,fitNumberRelative,get12Hours,getBaseURI,getDayFromWeek,getFormat,getMonthWeek,getPixelRatio,getTimeZone,getWeek,getYearDay,height,isIE,isNotEmpty,joinUrl,ltrim,numberToString,padString,parseUrl,plainText,random,relativeRadiusToValue,relativeToValue,reverseString,rtrim,serializeUrl,softCopyProperties,splitTextByCharCount,spritePointToDocument,spritePointToSprite,spritePointToSvg,spriteRectToSvg,stringify,stripHash,stripTags,svgPointToDocument,svgPointToSprite,svgRectToSprite,trim:trim$1,truncateWithEllipsis,unquote,used,valueToRelative,width},Symbol.toStringTag,{value:"Module"}));function linear(e){return+e}registry.registeredClasses["ease.linear"]=linear;function quadIn(e){return e*e}registry.registeredClasses["ease.quadIn"]=quadIn;function quadOut(e){return e*(2-e)}registry.registeredClasses["ease.quadOut"]=quadOut;function quadInOut(e){return e*=2,(e<=1?e*e:--e*(2-e)+1)/2}registry.registeredClasses["ease.quadInOut"]=quadInOut;function polyIn(e,a){return Math.pow(e,a)}registry.registeredClasses["ease.polyIn"]=polyIn;function polyOut(e,a){return 1-Math.pow(1-e,a)}registry.registeredClasses["ease.polyOut"]=polyOut;function polyInOut(e,a){return e*=2,(e<=1?Math.pow(e,a):2-Math.pow(2-e,a))/2}registry.registeredClasses["ease.polyInOut"]=polyInOut;function polyIn3(e){return polyIn(e,3)}registry.registeredClasses["ease.polyIn3"]=polyIn3;function polyOut3(e){return polyOut(e,3)}registry.registeredClasses["ease.polyOut3"]=polyOut3;function polyInOut3(e){return polyInOut(e,3)}registry.registeredClasses["ease.polyInOut3"]=polyInOut3;function expIn(e){return Math.pow(2,10*e-10)}registry.registeredClasses["ease.expIn"]=expIn;function expOut(e){return 1-Math.pow(2,-10*e)}registry.registeredClasses["ease.expOut"]=expOut;function expInOut(e){return e*=2,(e<=1?Math.pow(2,10*e-10):2-Math.pow(2,10-10*e))/2}registry.registeredClasses["ease.expInOut"]=expInOut;function sinIn(e){return 1-Math.cos(e*HALFPI)}registry.registeredClasses["ease.sinIn"]=sinIn;function sinOut(e){return Math.sin(e*HALFPI)}registry.registeredClasses["ease.sinOut"]=sinOut;function sinInOut(e){return(1-Math.cos(PI*e))/2}registry.registeredClasses["ease.sinInOut"]=sinInOut;function cubicIn(e){return e*e*e}registry.registeredClasses["ease.cubicIn"]=cubicIn;function cubicOut(e){return--e*e*e+1}registry.registeredClasses["ease.cubicOut"]=cubicOut;function cubicInOut(e){return e*=2,(e<=1?e*e*e:(e-=2)*e*e+2)/2}registry.registeredClasses["ease.cubicInOut"]=cubicInOut;function circleIn(e){return 1-Math.sqrt(1-e*e)}registry.registeredClasses["ease.circleIn"]=circleIn;function circleOut(e){return Math.sqrt(1- --e*e)}registry.registeredClasses["ease.circleOut"]=circleOut;function circleInOut(e){return e*=2,(e<=1?1-Math.sqrt(1-e*e):Math.sqrt(1-(e-=2)*e)+1)/2}registry.registeredClasses["ease.circleInOut"]=circleInOut;var b1=4/11,b2=6/11,b3=8/11,b4=3/4,b5=9/11,b6=10/11,b7=15/16,b8=21/22,b9=63/64,b0=1/b1/b1;function bounceIn(e){return 1-bounceOut(1-e)}registry.registeredClasses["ease.bounceIn"]=bounceIn;function bounceOut(e){return e=+e,e<b1?b0*e*e:e<b3?b0*(e-=b2)*e+b4:e<b6?b0*(e-=b5)*e+b7:b0*(e-=b8)*e+b9}registry.registeredClasses["ease.bounceOut"]=bounceOut;function bounceInOut(e){return e*=2,(e<=1?1-bounceOut(1-e):bounceOut(e-1)+1)/2}registry.registeredClasses["ease.bounceInOut"]=bounceInOut;var tau=2*Math.PI,amplitude=1,period=.3/tau,s=Math.asin(1/amplitude)*period;function elasticIn(e){return amplitude*Math.pow(2,10*--e)*Math.sin((s-e)/period)}registry.registeredClasses["ease.elasticIn"]=elasticIn;function elasticOut(e){return 1-amplitude*Math.pow(2,-10*(e=+e))*Math.sin((e+s)/period)}registry.registeredClasses["ease.elasticOut"]=elasticOut;function elasticInOut(e){return e=e*2-1,(e<0?amplitude*Math.pow(2,10*e)*Math.sin((s-e)/period):2-amplitude*Math.pow(2,-10*e)*Math.sin((s+e)/period))/2}registry.registeredClasses["ease.elasticInOut"]=elasticInOut;const Ease=Object.freeze(Object.defineProperty({__proto__:null,bounceIn,bounceInOut,bounceOut,circleIn,circleInOut,circleOut,cubicIn,cubicInOut,cubicOut,elasticIn,elasticInOut,elasticOut,expIn,expInOut,expOut,linear,polyIn,polyIn3,polyInOut,polyInOut3,polyOut,polyOut3,quadIn,quadInOut,quadOut,sinIn,sinInOut,sinOut},Symbol.toStringTag,{value:"Module"}));var SpriteState=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.transitionDuration=0,i.transitionEasing=cubicOut,i.properties={},i.propertyFields={},i.filters=new List,i.isTemplate=!1,i.className="SpriteState",i._disposers.push(new ListDisposer(i.filters)),i.applyTheme(),i}return Object.defineProperty(a.prototype,"adapter",{get:function(){var i=this;return this._adapterO||(this._adapterO=new Adapter(this),this._adapterO.events.on("inserted",function(o){i[o.newValue.key]=i[o.newValue.key]},void 0,!1),this._adapterO.events.on("removed",function(o){i[o.newValue.key]=i[o.newValue.key]},void 0,!1)),this._adapterO},enumerable:!0,configurable:!0}),a.prototype.getPropertyValue=function(i){var o=this.properties[i],c=this.sprite;if(c){var d=this.propertyFields[i];if(hasValue(d)&&(c.dataItem&&(o=c.dataItem.dataContext[d]),o==null&&(o="__unset")),hasValue(o))this._adapterO&&(o=this._adapterO.apply(i,o));else{var g=c.getPropertyValue(i);this._adapterO?o=this._adapterO.apply(i,g):o=g,o==g&&(o=void 0)}}return o},a.prototype.copyFrom=function(i){i&&i!=this&&(this.transitionDuration=i.transitionDuration,this.transitionEasing=i.transitionEasing,copyProperties(i.properties,this.properties),copyProperties(i.propertyFields,this.propertyFields),this.filters.copyFrom(i.filters),i._adapterO&&this.adapter.copyFrom(i._adapterO))},Object.defineProperty(a.prototype,"allValues",{get:function(){var i=this,o={};if(each$1(this.properties,function(g,b){o[g]=i.getPropertyValue(g)}),this._adapterO){var c=this._adapterO.keys();each$1(c,function(g,b){var j=i.getPropertyValue(b);o[b]=j})}var d=this.propertyFields;return each$1(d,function(g){var b=i.getPropertyValue(g);o[g]=b}),o},enumerable:!0,configurable:!0}),a.prototype.reset=function(){this.properties={},this.filters.clear()},a.prototype.processConfig=function(i){hasValue(i)&&hasValue(i.properties)&&each$1(i.properties,function(o,c){isString$1(c)&&(c.match(/^[0-9.\-]+\%$/)?i.properties[o]=percent(toNumber(c)):c.match(/^\#[0-9abcdef]{3,}$/i)&&(i.properties[o]=toColor(c)))}),e.prototype.processConfig.call(this,i)},a.prototype.asFunction=function(i){return i=="transitionEasing"||e.prototype.asIs.call(this,i)},a}(BaseObject);registry.registeredClasses.SpriteState=SpriteState;var SpriteEventDispatcher=function(e){__extends(a,e);function a(){var i=e!==null&&e.apply(this,arguments)||this;return i._interactionEvents=new Dictionary,i}return a.prototype._dispatchSpriteEvent=function(i){if(!(this.target.disabled||this.target.isTemplate)&&this.target.events.isEnabled(i.type)){var o=merge$1(i,{target:this.target});this.target.events.dispatchImmediately(o.type,o)}},a.prototype._dispatchSpritePointEvent=function(i){if(!(this.target.disabled||this.target.isTemplate)&&this.target.events.isEnabled(i.type)){var o=merge$1(i,{target:this.target,spritePoint:i.point?documentPointToSprite(i.point,this.target):void 0,svgPoint:this.target.getSvgPoint(i.point)});this.target.events.dispatchImmediately(o.type,o)}},a.prototype._addInteractionObjectEvent=function(i,o,c,d){var g=this,b=d+"-"+i,j=this._interactionEvents.insertKeyIfEmpty(b,function(){var $=g.target.interactions.events.on(i,o,c,d);return new CounterDisposer(function(){g._interactionEvents.removeKey(b),$.dispose()})});return j.increment()},a.prototype._on=function(i,o,c,d,g,b){var j=e.prototype._on.call(this,i,o,c,d,g,b),$=[j.disposer];switch(o){case"hit":case"track":case"doublehit":case"wheel":case"wheelup":case"wheeldown":case"wheelleft":case"wheelright":$.push(this._addInteractionObjectEvent(o,this._dispatchSpritePointEvent,this,g));break;case"rightclick":case"down":case"up":case"drag":case"dragged":case"dragstart":case"dragstop":case"over":case"out":case"swipe":case"swipeleft":case"swiperight":case"resize":case"focus":case"blur":case"toggled":$.push(this._addInteractionObjectEvent(o,this._dispatchSpriteEvent,this,g));break}switch(o){case"hit":case"doublehit":case"rightclick":case"down":case"up":this.target.clickable=!0;break;case"toggled":this.target.togglable=!0;break;case"drag":case"dragstart":case"dragstop":this.target.draggable=!0;break;case"track":this.target.trackable=!0;break;case"resize":this.target.resizable=!0;break;case"swipe":case"swipeleft":case"swiperight":this.target.swipeable=!0;break;case"wheel":case"wheelup":case"wheeldown":case"wheelleft":case"wheelright":this.target.wheelable=!0;break;case"over":this.target.hoverable=!0;case"out":this.target.hoverable=!0;break;case"focus":case"blur":this.target.focusable=!0;break}return j.disposer=new MultiDisposer($),j},a}(TargetedEventDispatcher),SVGDefaults=function(){function e(){}return e.opacity=1,e.strokeOpacity=1,e.strokeWidth=1,e.fillOpacity=1,e.fill=color("#000000"),e.stroke=color("#000000"),e.focusable=void 0,e.tabindex=0,e}(),options={verbose:!0,commercialLicense:!1,classNamePrefix:"amcharts-",autoSetClassName:!1,minPolylineStep:.5,onlyShowOnViewport:!1,queue:!1,autoDispose:!1,licenses:[],suppressErrors:!1,suppressWarnings:!1,animationsEnabled:!0,nonce:"",deferredDelay:100,disableHoverOnTransform:"never",pixelPerfectPrecision:0};function animate(e,a){var i=!1,o=Date.now();function c(d){if(!i){var g=d-o;g>=e?a(1):(nextFrame(c),a(g/e))}}return nextFrame(c),new Disposer(function(){i=!0})}function getProgressNumber(e,a,i){return a+(i-a)*e}function getProgressPercent(e,a,i){return new Percent(getProgressNumber(e,a.percent,i.percent))}function getProgressColor(e,a,i){var o=new Color(interpolate(a.rgb,i.rgb,e));return a.alpha!=i.alpha&&(o.alpha=a.alpha+(i.alpha-a.alpha)*e),o}function getHybridProperty(e,a){return a+e.charAt(0).toUpperCase()+e.substr(1)}var AnimationDisposer=function(){function e(a){this._disposer=new Disposer(function(){for(;a.length!==0;)a[0].dispose()})}return e.prototype.isDisposed=function(){return this._disposer.isDisposed()},e.prototype.dispose=function(){this._disposer.dispose()},e}(),Animation=function(e){__extends(a,e);function a(i,o,c,d){var g=e.call(this)||this;return g.duration=0,g.easing=linear,g.progress=0,g._loop=0,g._pause=!1,g._delayTimeout=null,g._time=0,g._isFinished=!1,g.className="Animation",options.animationsEnabled===!1&&(c=0),g.object=i,g.animationOptions=toArray$2(o),g.duration=c,d&&(g.easing=d),g.applyTheme(),g}return a.prototype.debug=function(){},a.prototype.dispose=function(){e.prototype.dispose.call(this),this.pause()},a.prototype.delay=function(i){var o=this;if(i>0){this.pause(),move(this.object.animations,this);var c=setTimeout(function(){o._delayTimeout=null,o.start()},i);this._delayTimeout=new Disposer(function(){clearTimeout(c)})}return this},a.prototype._start=function(){this._isFinished=!1,this._delayTimeout&&(this.removeDispose(this._delayTimeout),this._delayTimeout=null),this.stopSameAnimations(),this._pause=!1,move(system.animations,this),move(this.object.animations,this),system.requestFrame()},a.prototype.start=function(){this._start(),this._startTime=Date.now(),this._time=0,this.staticOptions=[];for(var i=this.animationOptions.length-1;i>=0;i--){var o=this.animationOptions[i];if(hasValue(o.from)||(o.childObject?o.from=o.childObject[o.property]:(o.from=this.object[o.property],hasValue(o.from)||(o.from=SVGDefaults[o.property]))),o.from==o.to)remove(this.animationOptions,o);else if(!hasValue(o.from)||!(o.from instanceof Percent)&&o.to instanceof Percent||o.from instanceof Percent&&!(o.to instanceof Percent))this.staticOptions.push(o),remove(this.animationOptions,o);else if(isNumber$1(o.to))if(o.updateMethod=getProgressNumber,o.from instanceof Percent){var c=this.object[getHybridProperty(o.property,"pixel")];isNaN(c)?(this.staticOptions.push(o),remove(this.animationOptions,o)):o.from=c}else isNaN(o.from)&&(this.staticOptions.push(o),remove(this.animationOptions,o));else if(o.to instanceof Color)o.from?o.updateMethod=getProgressColor:(this.staticOptions.push(o),remove(this.animationOptions,o));else if(o.to instanceof Percent){if(o.updateMethod=getProgressPercent,!isNaN(o.from)){var c=this.object[getHybridProperty(o.property,"relative")];isNaN(c)||(o.from=percent(c*100))}}else this.staticOptions.push(o),remove(this.animationOptions,o)}if(this.applyStaticOptions(),this.events.isEnabled("animationstarted")){var d={type:"animationstarted",target:this,progress:this.progress};this.events.dispatchImmediately("animationstarted",d)}return this.update(),this.duration===0&&this.end(),this},a.prototype.loop=function(i){return isNumber$1(i)||(i=1/0),this._loop=i,this},a.prototype.pause=function(){return this._pause=!0,this._delayTimeout&&(this.removeDispose(this._delayTimeout),this._delayTimeout=null),remove(system.animations,this),remove(this.object.animations,this),this},a.prototype.resume=function(){return this._start(),this._startTime=Date.now()-this._time,this},a.prototype.end=function(){if(this._loop==0&&this.pause(),this.setProgress(1),this.applyStaticOptions(),this.events.isEnabled("animationended")){var i={type:"animationended",target:this,progress:this.progress};this.events.dispatchImmediately("animationended",i)}return this._loop>0?(this._loop--,this.start()):(this.stop(),this._isFinished=!0),this},a.prototype.kill=function(){this.pause(),this._isFinished=!0},a.prototype.isFinished=function(){return this._isFinished},a.prototype.applyStaticOptions=function(){var i=this;each$2(this.staticOptions,function(o){o.childObject?o.childObject[o.property]=i.progress==1?o.to:o.from:i.object[o.property]=i.progress==1?o.to:o.from})},a.prototype.stop=function(i){if(this.pause(),!i&&this.events.isEnabled("animationstopped")){var o={type:"animationstopped",target:this,progress:this.progress};this.events.dispatchImmediately("animationstopped",o)}return this},a.prototype.setProgress=function(i){var o=this;if(this._time=this.duration*i,each$2(this.animationOptions,function(d){if(d.updateMethod&&hasValue(d.from)){var g=d.updateMethod(i,d.from,d.to);d.childObject?d.childObject[d.property]=g:o.object[d.property]=g}}),this.progress=i,this.events.isEnabled("animationprogress")){var c={type:"animationprogress",target:this,progress:this.progress};this.events.dispatchImmediately("animationprogress",c)}system.requestFrame()},a.prototype.update=function(){if(!this._pause){var i=void 0;this._time=fitToRange(Date.now()-this._startTime,0,this.duration);var o=this._time/this.duration;i=this.easing(o),(this.duration==0||!isNumber$1(i)||o>=1)&&(i=1),this.setProgress(i),round$1(this._time/this.duration,6)==1&&this.end()}return this},Object.defineProperty(a.prototype,"delayed",{get:function(){return!!this._delayTimeout},enumerable:!0,configurable:!0}),a.prototype.stopSameAnimations=function(){var i=this;each$2(copy$3(this.object.animations),function(o){if(o!==i&&!o.delayed){var c=[];each$2(i.animationOptions,function(d){each$2(o.animationOptions,function(g){d.property==g.property&&d.childObject==g.childObject&&(c.push(g),o.animationOptions.length==0&&o.kill())})}),each$2(c,function(d){remove(o.animationOptions,d)})}})},a.prototype.asFunction=function(i){return i=="easing"||e.prototype.asIs.call(this,i)},a}(BaseObjectEvents),SVGNS="http://www.w3.org/2000/svg",XMLNS="http://www.w3.org/2000/xmlns/",XLINK="http://www.w3.org/1999/xlink";function addEventListener$1(e,a,i,o){return e.addEventListener(a,i,o||!1),new Disposer(function(){e.removeEventListener(a,i,o||!1)})}function getElement(e){if(isString$1(e)){var a=document.getElementById(e);if(a==null&&(a=document.getElementsByClassName(e)[0]),a instanceof HTMLElement)return a}else if(e instanceof HTMLElement)return e}function addClass(e,a){if(e)if(e.classList){var i=a.split(" ");each$2(i,function(c){e.classList.add(c)})}else{var o=e.getAttribute("class");o?e.setAttribute("class",o.split(" ").filter(function(c){return c!==a}).join(" ")+" "+a):e.setAttribute("class",a)}}function removeClass(e,a){if(e)if(e.classList)e.classList.remove(a);else{var i=e.getAttribute("class");i&&e.setAttribute("class",i.split(" ").filter(function(o){return o!==a}).join(" "))}}function setStyle(e,a,i){e.style[a]=i}function getComputedStyle$1(e,a){return e.currentStyle?e.currentStyle[a]:document.defaultView.getComputedStyle(e,null).getPropertyValue(a)}function blur(){if(document.activeElement&&document.activeElement!=document.body)if(document.activeElement.blur)document.activeElement.blur();else{var e=document.createElement("button");e.style.position="fixed",e.style.top="0px",e.style.left="-10000px",document.body.appendChild(e),e.focus(),e.blur(),document.body.removeChild(e)}}function focus(e){if(e instanceof HTMLElement)e.focus();else{var a=document.createElement("input"),i=document.createElementNS(SVGNS,"foreignObject");i.appendChild(a),e.appendChild(i),a.focus(),a.disabled=!0,i.remove()}}function outerHTML(e){if(e.outerHTML)return e.outerHTML;var a=document.createElement("div"),i=e.cloneNode(!0);a.appendChild(i);var o=a.innerHTML;return o}function isElement(e){return e instanceof Object&&e&&e.nodeType===1}function contains(e,a){for(var i=a;;){if(e===i)return!0;if(i.parentNode==null){if(i.host==null)return!1;i=i.host}else i=i.parentNode}}function getShadowRoot(e){for(var a=e;;){if(a.parentNode==null)return a.host!=null?a:null;a=a.parentNode}}function getRoot(e){for(var a=e.ownerDocument,i=e;;){if(i.parentNode==null)return i===a||i.host!=null?i:null;i=i.parentNode}}function eventTarget(e){return typeof e.composedPath=="function"?e.composedPath()[0]:e.target}function copyAttributes(e,a){each$2(e.attributes,function(i){i.value!=null&&a.setAttribute(i.name,i.value)})}function fixPixelPerfect(e){readFrame(function(){try{var a=e.getBoundingClientRect(),i=a.left-Math.round(a.left),o=a.top-Math.round(a.top);i!==0&&writeFrame(function(){e.style.left=i+"px"}),o!==0&&writeFrame(function(){e.style.top=o+"px"})}catch{}})}var rootStylesheet;function getStylesheet(e){if(e==null){if(!hasValue(rootStylesheet)){var a=document.createElement("style");a.type="text/css",options.nonce!=""&&a.setAttribute("nonce",options.nonce),document.head.appendChild(a),rootStylesheet=a.sheet}return rootStylesheet}else{var a=document.createElement("style");return a.type="text/css",options.nonce!=""&&a.setAttribute("nonce",options.nonce),e.appendChild(a),a.sheet}}function appendStylesheet(e,a){var i=e.cssRules.length;return e.insertRule(a+"{}",i),e.cssRules[i]}var StyleRule=function(e){__extends(a,e);function a(i,o,c){var d=this,g=getStylesheet(i);return d=e.call(this,function(){var b=indexOf(g.cssRules,d._rule);if(b===-1)throw new Error("Could not dispose StyleRule");g.deleteRule(b)})||this,d._rule=appendStylesheet(g,o),each$1(c,function(b,j){d.setStyle(b,j)}),d}return Object.defineProperty(a.prototype,"selector",{get:function(){return this._rule.selectorText},set:function(i){this._rule.selectorText=i},enumerable:!0,configurable:!0}),a.prototype._setVendorPrefixName=function(i,o){var c=this._rule.style;c.setProperty("-webkit-"+i,o,""),c.setProperty("-moz-"+i,o,""),c.setProperty("-ms-"+i,o,""),c.setProperty("-o-"+i,o,""),c.setProperty(i,o,"")},a.prototype.setStyle=function(i,o){i==="transition"?this._setVendorPrefixName(i,o):this._rule.style.setProperty(i,o,"")},a}(Disposer),styleId=0,StyleClass=function(e){__extends(a,e);function a(i,o,c){var d=this,g=hasValue(c)?c:"__style_"+ ++styleId+"__";return d=e.call(this,i,"."+g,o)||this,d._className=g,d}return Object.defineProperty(a.prototype,"className",{get:function(){return this._className},set:function(i){this._className=i,this.selector="."+i},enumerable:!0,configurable:!0}),a.prototype.toString=function(){return this._className},a}(StyleRule);function ready(e){if(document.readyState!=="loading")e();else{var a=function(){document.readyState!=="loading"&&(document.removeEventListener("readystatechange",a),e())};document.addEventListener("readystatechange",a)}}function findFont(e){var a=getComputedStyle$1(e,"font-family");if(a)return a;var i=e.parentElement||e.parentNode;return i?findFont(i):void 0}function findFontSize(e){var a=getComputedStyle$1(e,"font-size");if(a)return a;var i=e.parentElement||e.parentNode;return i?findFontSize(i):void 0}function isElementInViewport(e,a){var i=e.getBoundingClientRect(),o=isArray$1(a)?a:a?[a]:[];if(o.length){for(var c=0;c<o.length;c++){var d=o[c];if(!isElementInViewport(d))return!1;var g=d.getBoundingClientRect();if(i.top>=0&&i.left>=0&&i.top<=g.top+g.height&&i.left<=g.left+g.width)return!0}return!1}return i.top>=0&&i.left>=0&&i.top<=(window.innerHeight||document.documentElement.clientHeight)&&i.left<=(window.innerWidth||document.documentElement.clientWidth)}var AMElement=function(){function e(a){this._isDisposed=!1,this._x=0,this._y=0,this._rotationY=0,this._rotationX=0,this._rotation=0,this._scale=1,typeof a=="string"?this.node=document.createElementNS(SVGNS,a):this.node=a}return e.prototype.removeNode=function(){this.node&&this.node.parentNode&&this.node.parentNode.removeChild(this.node)},Object.defineProperty(e.prototype,"transformString",{get:function(){if(this.node)return this._transformString},enumerable:!0,configurable:!0}),e.prototype.transform=function(){var a="translate("+this._x+","+this._y+")";if(this._scale!=1&&(a+=(a?" ":"")+"scale("+this._scale+")"),this._rotation!=0){var i="rotate("+this._rotation+")";this._rotationX&&this._rotationY&&(i="rotate("+this._rotation+" "+this._rotationX+" "+this._rotationY+")"),a+=(a?" ":"")+i}this._transformString=a,this.node.setAttribute("transform",a)},e.prototype.getBBox=function(){var a={width:0,height:0,x:0,y:0};if(this.node&&this.node.parentNode)try{var i=this.node.getBBox();a.x=i.x,a.y=i.y,a.width=i.width,a.height=i.height}catch{}return a},e.prototype.moveTo=function(a){if(a){var i=a.x,o=a.y;(this._x!=i||this._y!=o)&&(this._x=i,this._y=o,this.transform())}},Object.defineProperty(e.prototype,"content",{get:function(){return this.node.innerHTML||""},set:function(a){this.node.innerHTML=a},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textContent",{get:function(){return this.node.textContent||""},set:function(a){this.node.textContent=a},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(a){this._x!=a&&(this._x=a,this.transform())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(a){this._y!=a&&(this._y=a,this.transform())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this._rotation},set:function(a){this._rotation!=a&&(this._rotation=a,this.transform())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotationX",{get:function(){return this._rotationX},set:function(a){this._rotationX!=a&&(this._rotationX=a,this.transform())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotationY",{get:function(){return this._rotationY},set:function(a){this._rotationY!=a&&(this._rotationY=a,this.transform())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this._scale},set:function(a){this._scale!=a&&(this._scale=a,this.transform())},enumerable:!0,configurable:!0}),e.prototype.removeAttr=function(a){this.node.removeAttribute(a)},e.prototype.attr=function(a){var i=this;return each$1(a,function(o,c){hasValue(c)?i.node.setAttribute(o,c):i.node.removeAttribute(o)}),this},e.prototype.getAttr=function(a){return this.node.getAttribute(a)},e.prototype.attrNS=function(a,i,o){return this.node.setAttributeNS(a,i,o),this},e.prototype.getAttrNS=function(a,i){return this.node.getAttributeNS(a,i)},e.prototype.removeStyle=function(a){this.node.style[a]=null,delete this.node.style[a]},e.prototype.getStyle=function(a){return this.node.style[a]},e.prototype.addStyle=function(a){var i=this;return each$1(a,function(o,c){hasValue(c)?i.node.style[o]=c:i.removeStyle(o)}),this},e.prototype.addClass=function(a){addClass(this.node,a)},e.prototype.removeClass=function(a){removeClass(this.node,a)},e.prototype.setClass=function(a){this.node.setAttribute("class",a)},e.prototype.removeChildNodes=function(){for(;this.node.childNodes.length>0;)this.node.removeChild(this.node.firstChild)},e.prototype.isDisposed=function(){return this._isDisposed},e.prototype.dispose=function(){this.removeNode()},e}(),Group=function(e){__extends(a,e);function a(i){return e.call(this,i)||this}return a.prototype.add=function(i){i&&this.node.appendChild(i.node)},a.prototype.addToBack=function(i){if(i){var o=this.node.childNodes[0];o?o!=i.node&&this.node.insertBefore(i.node,o):this.node.appendChild(i.node)}},a.prototype.removeElement=function(i){if(i)try{i.node&&i.node.parentNode==this.node&&this.node.removeChild(i.node)}catch{}},a.prototype.hasChild=function(i){for(var o=0;o<this.node.childNodes.length;o++)if(this.node.childNodes[o]==i.node)return!0;return!1},Object.defineProperty(a.prototype,"content",{get:function(){return this.node.innerHTML},set:function(i){this.node.innerHTML=i},enumerable:!0,configurable:!0}),a.prototype.removeChildren=function(){if(this.node.childNodes)for(;this.node.childNodes.length>0;){var i=this.node.firstChild;i&&i.parentNode&&i.parentNode.removeChild(i)}},a.prototype.removeChildrenByTag=function(i){if(this.node.childNodes)for(var o=this.node.getElementsByTagName(i),c=0;c<o.length;c++)this.node.removeChild(o[c])},a}(AMElement),InterfaceColorSet=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i._purposes={stroke:color("#e5e5e5"),fill:color("#f3f3f3"),primaryButton:color("#6794dc"),primaryButtonHover:color("#6771dc"),primaryButtonDown:color("#68dc75"),primaryButtonActive:color("#68dc75"),primaryButtonText:color("#FFFFFF"),primaryButtonStroke:color("#FFFFFF"),secondaryButton:color("#d9d9d9"),secondaryButtonHover:color("#d9d9d9").brighten(-.25),secondaryButtonDown:color("#d9d9d9").brighten(-.35),secondaryButtonActive:color("#d9d9d9").brighten(.35),secondaryButtonText:color("#000000"),secondaryButtonStroke:color("#FFFFFF"),grid:color("#000000"),background:color("#ffffff"),alternativeBackground:color("#000000"),text:color("#000000"),alternativeText:color("#FFFFFF"),disabledBackground:color("#999999"),positive:color("#67dc75"),negative:color("#dc6788")},i.className="InterfaceColorSet",i.applyTheme(),i}return a.prototype.debug=function(){},a.prototype.getFor=function(i){return this._purposes[i]},a.prototype.setFor=function(i,o){this._purposes[i]=o},a}(BaseObject);registry.registeredClasses.InterfaceColorSet=InterfaceColorSet;var rules$1=new Dictionary;function popupCSS(e,a){a||(a="ampopup");var i=new InterfaceColorSet,o=i.getFor("text"),c=i.getFor("background");c.alpha=.8;var d=i.getFor("alternativeBackground");d.alpha=.05;var g=rules$1.insertKeyIfEmpty(a,function(){var b=new MultiDisposer([new StyleRule(e,"."+a,{overflow:"visible",position:"absolute",top:"0",left:"0","z-index":"2000"}),new StyleRule(e,"."+a+"-curtain",{width:"100%",height:"100%",position:"absolute",top:"0",left:"0","z-index":"2001","background-color":c.hex,opacity:"0.5"}),new StyleRule(e,"."+a+"-header",{display:"block",width:"100%","min-height":"1.8em",background:d.rgba}),new StyleRule(e,"."+a+"-title",{"font-weight":"bold","font-size":"110%",padding:"0.5em 1.2em 0.5em 1em"}),new StyleRule(e,"."+a+"-content",{background:c.hex,"background-color":c.rgba,color:o.hex,display:"inline-block",position:"absolute",top:"0",left:"0","max-width":"90%","max-height":"90%",overflow:"auto","z-index":"2002"}),new StyleRule(e,"."+a+"-inside",{padding:"1em"}),new StyleRule(e,"."+a+"-close",{display:"block",position:"absolute",top:"0.3em",right:"0.3em","background-color":"rgb(100, 100, 100)",background:"rgba(100, 100, 100, 0.1) url(data:image/svg+xml;charset=utf-8;base64,PHN2ZyBoZWlnaHQ9IjUxMiIgdmVyc2lvbj0iMSIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHdpZHRoPSI1MTIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTQ0NS4yIDEwOS4ybC00Mi40LTQyLjRMMjU2IDIxMy42IDEwOS4yIDY2LjhsLTQyLjQgNDIuNEwyMTMuNiAyNTYgNjYuOCA0MDIuOGw0Mi40IDQyLjRMMjU2IDI5OC40bDE0Ni44IDE0Ni44IDQyLjQtNDIuNEwyOTguNCAyNTYiLz48L3N2Zz4=) no-repeat center","background-size":"80%",width:"1.2em",height:"1.2em",cursor:"pointer"})]);return new CounterDisposer(function(){rules$1.removeKey(a),b.dispose()})});return g.increment()}var InteractionObjectEventDispatcher=function(e){__extends(a,e);function a(){var i=e!==null&&e.apply(this,arguments)||this;return i._domEvents={},i}return a.prototype._addDOMEvent=function(i,o,c,d){var g=this;if(!this._domEvents[i]){var b=function(j){c.call(d,o,j)};this.target.element.addEventListener(i,b,!1),this._domEvents[i]=new CounterDisposer(function(){delete g._domEvents[i],g.target.element.removeEventListener(i,b,!1)})}return this._domEvents[i].increment()},a.prototype._dispatchKeyboardEvent=function(i,o){this.target.events.isEnabled(i)&&this.target.events.dispatchImmediately(i,{type:i,target:this.target,event:o})},a.prototype._on=function(i,o,c,d,g,b){var j=e.prototype._on.call(this,i,o,c,d,g,b),$=[j.disposer];switch(o){case"hit":case"doublehit":case"rightclick":case"down":case"up":this.target.clickable=!0;break;case"drag":case"dragstart":case"dragstop":this.target.draggable=!0;break;case"track":this.target.trackable=!0;break;case"resize":this.target.resizable=!0;break;case"swipe":case"swipeleft":case"swiperight":this.target.swipeable=!0;break;case"wheel":case"wheelup":case"wheeldown":case"wheelleft":case"wheelright":this.target.wheelable=!0;break;case"over":case"out":this.target.hoverable=!0;break;case"focus":case"blur":case"focusin":case"focusout":this.target.focusable=!0;break;case"keydown":$.push(this._addDOMEvent(o,o,this._dispatchKeyboardEvent,this));break;case"keyup":$.push(this._addDOMEvent(o,o,this._dispatchKeyboardEvent,this));break;case"keypress":$.push(this._addDOMEvent(o,o,this._dispatchKeyboardEvent,this));break;case"input":$.push(this._addDOMEvent(o,o,this._dispatchKeyboardEvent,this));break}return j.disposer=new MultiDisposer($),j},a}(TargetedEventDispatcher),InteractionObject=function(e){__extends(a,e);function a(i){var o=e.call(this)||this;return o._eventDispatcher=new InteractionObjectEventDispatcher(o),o.eventDisposers=new Dictionary,o.replacedStyles=new Dictionary,o._clickable=!1,o._contextMenuDisabled=!1,o._hoverable=!1,o._trackable=!1,o._draggable=!1,o._swipeable=!1,o._resizable=!1,o._wheelable=!1,o._inert=!1,o._isHover=!1,o.isRealHover=!1,o._isHoverByTouch=!1,o._isDown=!1,o._isFocused=!1,o._isTouchProtected=!1,o._inertiaOptions=new Dictionary,o.inertias=new Dictionary,o._hitOptions={},o._hoverOptions={},o._swipeOptions={},o._keyboardOptions={},o._mouseOptions={},o._cursorOptions={defaultStyle:[{property:"cursor",value:"default"}]},o._disposers.push(o._eventDispatcher),o._element=i,o.className="InteractionObject",o._disposers.push(new DictionaryDisposer(o.inertias)),o._disposers.push(new DictionaryDisposer(o.eventDisposers)),o.applyTheme(),o}return Object.defineProperty(a.prototype,"events",{get:function(){return this._eventDispatcher},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isHover",{get:function(){return this._isHover},set:function(i){this.isHover!=i&&(this._isHover=i,i?getInteraction().overObjects.moveValue(this):(this.isRealHover=!1,getInteraction().overObjects.removeValue(this)))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isHoverByTouch",{get:function(){return this._isHoverByTouch},set:function(i){this.isHoverByTouch!=i&&(this._isHoverByTouch=i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"overPointers",{get:function(){return this._overPointers||(this._overPointers=new List),this._overPointers},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isDown",{get:function(){return this._isDown},set:function(i){this.isDown!=i&&(this._isDown=i,i?getInteraction().downObjects.moveValue(this):getInteraction().downObjects.removeValue(this))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"downPointers",{get:function(){return this._downPointers||(this._downPointers=new List),this._downPointers},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isFocused",{get:function(){return this._isFocused},set:function(i){this.isFocused!=i&&(this._isFocused=i,i?getInteraction().focusedObject=this:getInteraction().focusedObject=void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isTouchProtected",{get:function(){return this._isTouchProtected},set:function(i){this._isTouchProtected!=i&&(this._isTouchProtected=i,i?getInteraction().unprepElement(this):(this.draggable||this.swipeable||this.trackable||this.resizable)&&getInteraction().prepElement(this))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"clickable",{get:function(){return this._clickable},set:function(i){this._clickable!==i&&(this._clickable=i,getInteraction().processClickable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"contextMenuDisabled",{get:function(){return this._contextMenuDisabled},set:function(i){this._contextMenuDisabled!==i&&(this._contextMenuDisabled=i,getInteraction().processContextMenu(this))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"hoverable",{get:function(){return this._hoverable},set:function(i){this._hoverable!==i&&(this._hoverable=i,getInteraction().processHoverable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"trackable",{get:function(){return this._trackable},set:function(i){this._trackable!==i&&(this._trackable=i,getInteraction().processTrackable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"draggable",{get:function(){return this._draggable},set:function(i){this._draggable!==i&&(this._draggable=i,getInteraction().processDraggable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"swipeable",{get:function(){return this._swipeable},set:function(i){this._swipeable!==i&&(this._swipeable=i,getInteraction().processSwipeable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"resizable",{get:function(){return this._resizable},set:function(i){this._resizable!==i&&(this._resizable=i,getInteraction().processResizable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"wheelable",{get:function(){return this._wheelable},set:function(i){this._wheelable!==i&&(this._wheelable=i,getInteraction().processWheelable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"inert",{get:function(){return this._inert},set:function(i){this._inert!==i&&(this._inert=i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"focusable",{get:function(){return this._focusable},set:function(i){this._focusable!==i&&(this._focusable=i,this._focusable&&this.tabindex==-1&&(this._tabindex=1),getInteraction().processFocusable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"tabindex",{get:function(){return getValueDefault(this._tabindex,-1)},set:function(i){this._tabindex!==i&&(this._tabindex=i,i>-1&&(this.focusable=!0),getInteraction().processFocusable(this))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"element",{get:function(){return this._element},set:function(i){this._element=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"originalPosition",{get:function(){return this._originalPosition||{x:0,y:0}},set:function(i){this._originalPosition=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"originalScale",{get:function(){return getValueDefault(this._originalScale,1)},set:function(i){this._originalScale!==i&&(this._originalScale=i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"originalAngle",{get:function(){return getValueDefault(this._originalAngle,0)},set:function(i){this._originalAngle!==i&&(this._originalAngle=i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"inertiaOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("inertiaOptions",this._inertiaOptions):this._inertiaOptions},set:function(i){this._inertiaOptions=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"hitOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("hitOptions",this._hitOptions):this._hitOptions},set:function(i){this._hitOptions=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"hoverOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("hoverOptions",this._hoverOptions):this._hoverOptions},set:function(i){this._hoverOptions=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"swipeOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("swipeOptions",this._swipeOptions):this._swipeOptions},set:function(i){this._swipeOptions=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"keyboardOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("keyboardOptions",this._keyboardOptions):this._keyboardOptions},set:function(i){this._keyboardOptions=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"mouseOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("mouseOptions",this._mouseOptions):this._mouseOptions},set:function(i){this._mouseOptions=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"cursorOptions",{get:function(){return this.sprite&&this.sprite._adapterO?this.sprite._adapterO.apply("cursorOptions",this._cursorOptions):this._cursorOptions},set:function(i){this._cursorOptions=i},enumerable:!0,configurable:!0}),a.prototype.copyFrom=function(i){e.prototype.copyFrom.call(this,i),this.inertiaOptions=i.inertiaOptions,this.hitOptions=i.hitOptions,this.hoverOptions=i.hoverOptions,this.swipeOptions=i.swipeOptions,this.keyboardOptions=i.keyboardOptions,this.cursorOptions=i.cursorOptions,this.contextMenuDisabled=i.contextMenuDisabled,getInteraction().applyCursorOverStyle(this)},a.prototype.setEventDisposer=function(i,o,c){var d=this.eventDisposers.getKey(i);o?d==null&&this.eventDisposers.setKey(i,c()):d!=null&&(d.dispose(),this.eventDisposers.removeKey(i))},a.prototype.dispose=function(){e.prototype.dispose.call(this);var i=getInteraction();i.overObjects.removeValue(this),i.downObjects.removeValue(this),i.trackedObjects.removeValue(this),i.transformedObjects.removeValue(this),this.isHover&&this.wheelable&&i.unlockWheel(),i.focusedObject===this&&(i.focusedObject=void 0)},a}(BaseObjectEvents),InteractionKeyboardObject=function(){function e(a,i){this._disposed=!1,this.directionX=0,this.directionY=0,this.interaction=a,this.keyboardEvent=i,this._startedOn=new Date().getTime(),getInteraction().processDragStart(a),system.animations.push(this),this.update()}return e.prototype.update=function(){var a=this.interaction,i=getInteraction().getKeyboardOption(a,"speed"),o=getInteraction().getKeyboardOption(a,"accelleration"),c=getInteraction().getKeyboardOption(a,"accellerationDelay"),d={x:0,y:0};this.keyboardEvent.shiftKey?(i*=.5,o=1):this.keyboardEvent.ctrlKey&&(i*=2);var g=new Date().getTime()-this._startedOn,b=g-c;if(o>0&&b>0){var j=g/c;g=c,d.x+=this.directionX*(i*o*j*b),d.y+=this.directionY*(i*o*j*b)}d.x+=this.directionX*(i*g),d.y+=this.directionY*(i*g),getInteraction().handleTransformMove(a,d,{x:0,y:0},this.keyboardEvent,!0,!1)},e.prototype.isDisposed=function(){return this._disposed},e.prototype.dispose=function(){this._disposed||(getInteraction().processDragStop(this.interaction),remove(system.animations,this))},e}(),Inertia=function(e){__extends(a,e);function a(i,o,c,d){var g=e.call(this)||this;return g.animations=[],g.className="Inertia",g.interaction=i,g.type=o,g.point=c,g.startPoint=d,g._disposers.push(new AnimationDisposer(g.animations)),g}return Object.defineProperty(a.prototype,"x",{get:function(){return this.point.x},set:function(i){isNumber$1(i)&&(this.point.x=i,this.handleMove())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"y",{get:function(){return this.point.y},set:function(i){isNumber$1(i)&&(this.point.y=i,this.handleMove())},enumerable:!0,configurable:!0}),a.prototype.handleMove=function(){if(this.interaction.events.isEnabled("drag")){var i={type:"drag",target:this.interaction,shift:{x:this.x-this.startPoint.x,y:this.y-this.startPoint.y},startPoint:this.startPoint,point:{x:this.x,y:this.y},touch:!1};this.interaction.events.dispatchImmediately("drag",i)}},a.prototype.done=function(){this.interaction.inertias.removeKey(this.type),this.type==="move"&&getInteraction().processDragStop(this.interaction),this.dispose()},a}(BaseObject),Keyboard=function(){function e(){}return e.prototype.getEventKey=function(a){var i=a.keyCode||a.which,o;switch(i){case 38:o="up";break;case 40:o="down";break;case 37:o="left";break;case 39:o="right";break;case 13:o="enter";break;case 27:o="esc";break;case 36:o="home";break;case 35:o="end";break;case 9:o="tab";break;case 17:o="ctrl";break;case 18:o="alt";break;case 16:o="shift";break;case 32:o="space";break;case 36:o="home";break;case 35:o="end";break;case 33:o="pgup";break;case 34:o="pgdn";break;case 45:o="ins";break;case 46:o="del";break;case 107:o="plus";break;case 109:o="minus";break;default:o="other";break}return o},e.prototype.isKey=function(a,i){var o=this.getEventKey(a);return isString$1(i)&&(i=[i]),i.indexOf(o)!==-1},e.prototype.shiftKey=function(a){return a.shiftKey},e.prototype.ctrlKey=function(a){return a.ctrlKey},e.prototype.altKey=function(a){return a.altKey},e.prototype.metaKey=function(a){return a.metaKey},e}(),keyboard=new Keyboard,timeUnitDurations={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,year:31536e6};function getNextUnit(e){switch(e){case"year":return;case"month":return"year";case"week":return"month";case"day":return"month";case"hour":return"day";case"minute":return"hour";case"second":return"minute";case"millisecond":return"second"}}function getDuration(e,a){return hasValue(a)||(a=1),timeUnitDurations[e]*a}function now(){return new Date}function getTime(){return now().getTime()}function copy(e){return new Date(e.getTime())}function checkChange(e,a,i,o){e=new Date(e.getTime()),a=new Date(a.getTime());var c=0,d=0;!o&&i!="millisecond"&&(c=e.getTimezoneOffset(),e.setUTCMinutes(e.getUTCMinutes()-c),d=a.getTimezoneOffset(),a.setUTCMinutes(a.getUTCMinutes()-d));var g=!1;switch(i){case"year":e.getUTCFullYear()!=a.getUTCFullYear()&&(g=!0);break;case"month":(e.getUTCFullYear()!=a.getUTCFullYear()||e.getUTCMonth()!=a.getUTCMonth())&&(g=!0);break;case"day":(e.getUTCMonth()!=a.getUTCMonth()||e.getUTCDate()!=a.getUTCDate())&&(g=!0);break;case"hour":e.getUTCHours()!=a.getUTCHours()&&(g=!0);break;case"minute":e.getUTCMinutes()!=a.getUTCMinutes()&&(g=!0);break;case"second":e.getUTCSeconds()!=a.getUTCSeconds()&&(g=!0);break;case"millisecond":e.getTime()!=a.getTime()&&(g=!0);break}if(g)return!0;var b=getNextUnit(i);return b?(e.setUTCMinutes(e.getUTCMinutes()+c),a.setUTCMinutes(a.getUTCMinutes()+d),checkChange(e,a,b,o)):!1}function add(e,a,i,o){var c=0;switch(!o&&a!="millisecond"&&(c=e.getTimezoneOffset(),e.setUTCMinutes(e.getUTCMinutes()-c)),a){case"day":var d=e.getUTCDate();e.setUTCDate(d+i);break;case"second":var g=e.getUTCSeconds();e.setUTCSeconds(g+i);break;case"millisecond":var b=e.getUTCMilliseconds();e.setUTCMilliseconds(b+i);break;case"hour":var j=e.getUTCHours();e.setUTCHours(j+i);break;case"minute":var $=e.getUTCMinutes();e.setUTCMinutes($+i);break;case"year":var rt=e.getUTCFullYear();e.setUTCFullYear(rt+i);break;case"month":var _e=e.getUTCMonth();e.setUTCMonth(_e+i);break;case"week":var st=e.getUTCDate();e.setUTCDate(st+i*7);break}if(!o&&a!="millisecond"&&(e.setUTCMinutes(e.getUTCMinutes()+c),a=="day"||a=="week"||a=="month"||a=="year")){var ut=e.getTimezoneOffset();if(ut!=c){var gt=ut-c;e.setUTCMinutes(e.getUTCMinutes()+gt),e.getTimezoneOffset()!=ut&&e.setUTCMinutes(e.getUTCMinutes()-gt)}}return e}function round(e,a,i,o,c,d,g,b){g===void 0&&(g=0),isNumber$1(i)||(i=1);var j=0;switch(b&&["day","month","week","year"].indexOf(a)!=-1&&(e=setTimezone(e,b)),!c&&a!="millisecond"&&(j=e.getTimezoneOffset(),e.setUTCMinutes(e.getUTCMinutes()-j)),a){case"day":var $=e.getUTCDate();if(i>1){if(d){d=round(d,"day",1);var rt=e.getTime()-d.getTime(),_e=Math.floor(rt/getDuration("day")/i),st=getDuration("day",_e*i);e.setTime(d.getTime()+st-j*getDuration("minute"))}}else e.setUTCDate($);e.setUTCHours(0,0,0,0);break;case"second":var ut=e.getUTCSeconds();i>1&&(ut=Math.floor(ut/i)*i),e.setUTCSeconds(ut,0);break;case"millisecond":if(i==1)return e;var gt=e.getUTCMilliseconds();gt=Math.floor(gt/i)*i,e.setUTCMilliseconds(gt);break;case"hour":var yt=e.getUTCHours();i>1&&(yt=Math.floor(yt/i)*i),e.setUTCHours(yt,g,0,0);break;case"minute":var Pt=e.getUTCMinutes();gt=e.getUTCMilliseconds(),i>1&&(Pt=Math.floor(Pt/i)*i),e.setUTCMinutes(Pt,0,0);break;case"month":var wt=e.getUTCMonth();i>1&&(wt=Math.floor(wt/i)*i),e.setUTCMonth(wt,1),e.setUTCHours(0,g,0,0);break;case"year":var Ct=e.getUTCFullYear();i>1&&(Ct=Math.floor(Ct/i)*i),e.setUTCFullYear(Ct,0,1),e.setUTCHours(0,g,0,0);break;case"week":var At=e.getUTCDate(),Tt=e.getUTCDay();isNumber$1(o)||(o=1),Tt>=o?At=At-Tt+o:At=At-(7+Tt)+o,e.setUTCDate(At),e.setUTCHours(0,g,0,0);break}if(!c&&a!="millisecond"&&(e.setUTCMinutes(e.getUTCMinutes()+j),a=="day"||a=="week"||a=="month"||a=="year")){var kt=e.getTimezoneOffset();if(kt!=j){var It=kt-j;e.setUTCMinutes(e.getUTCMinutes()+It)}}return e}function setTimezone(e,a){var i=new Date(e.toLocaleString("en-US",{timeZone:a}));return i}function getTimezoneMinutes(e){var a=new Date;a.setHours(0,0,0,0);var i=setTimezone(a,e);return i.getMinutes()}const Time=Object.freeze(Object.defineProperty({__proto__:null,add,checkChange,copy,getDuration,getNextUnit,getTime,getTimezoneMinutes,now,round,setTimezone,timeUnitDurations},Symbol.toStringTag,{value:"Module"}));var Interaction=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i._globalEventsAdded=!1,i._pointerEvents={pointerdown:"mousedown",pointerup:"mouseup",pointermove:"mousemove",pointercancel:"mouseup",pointerover:"mouseover",pointerout:"mouseout",wheel:"wheel"},i._usePointerEventsOnly=!1,i._useTouchEventsOnly=!1,i._addHoverEvents=!0,i._passiveSupported=!1,i._delayedEvents={out:[]},i.overObjects=new List,i.downObjects=new List,i.trackedObjects=new List,i.transformedObjects=new List,i.pointers=new Dictionary,i.inertiaOptions=new Dictionary,i.hitOptions={doubleHitTime:300,hitTolerance:10,noFocus:!0},i.hoverOptions={touchOutBehavior:"leave",touchOutDelay:1e3},i.swipeOptions={time:500,verticalThreshold:75,horizontalThreshold:30},i.keyboardOptions={speed:.1,accelleration:1.2,accellerationDelay:2e3},i.mouseOptions={sensitivity:1},i.className="Interaction",i.body=i.getInteraction(document.body),i._disposers.push(i.body),window.hasOwnProperty("PointerEvent")?(i._pointerEvents.pointerdown="pointerdown",i._pointerEvents.pointerup="pointerup",i._pointerEvents.pointermove="pointermove",i._pointerEvents.pointercancel="pointercancel",i._pointerEvents.pointerover="pointerover",i._pointerEvents.pointerout="pointerout"):window.hasOwnProperty("MSPointerEvent")?(i._pointerEvents.pointerdown="MSPointerDown",i._pointerEvents.pointerup="MSPointerUp",i._pointerEvents.pointermove="MSPointerMove",i._pointerEvents.pointercancel="MSPointerUp",i._pointerEvents.pointerover="MSPointerOver",i._pointerEvents.pointerout="MSPointerOut"):typeof matchMedia<"u"&&matchMedia("(pointer:fine)").matches?"ontouchstart"in window&&(i._addHoverEvents=!1,i._useTouchEventsOnly=!0):window.navigator.userAgent.match(/MSIE /)||i.fullFF()?i._usePointerEventsOnly=!0:i._useTouchEventsOnly=!0,"onwheel"in document.createElement("div")?i._pointerEvents.wheel="wheel":hasValue(document.onmousewheel)&&(i._pointerEvents.wheel="mousewheel"),i.inertiaOptions.setKey("move",{time:100,duration:500,factor:1,easing:polyOut3}),i.inertiaOptions.setKey("resize",{time:100,duration:500,factor:1,easing:polyOut3}),i._passiveSupported=a.passiveSupported,i.applyTheme(),i}return a.prototype.fullFF=function(){return window.navigator.userAgent.match(/Firefox/)&&!window.navigator.userAgent.match(/Android/)},a.prototype.debug=function(){},a.prototype.addGlobalEvents=function(){var i=this;this._globalEventsAdded||(this._useTouchEventsOnly||(this._disposers.push(addEventListener$1(document,this._pointerEvents.pointerdown,function(o){i.handleGlobalPointerDown(o)})),this._disposers.push(addEventListener$1(document,this._pointerEvents.pointermove,function(o){i.handleGlobalPointerMove(o)})),this._disposers.push(addEventListener$1(document,this._pointerEvents.pointerup,function(o){i.handleGlobalPointerUp(o)})),this._disposers.push(addEventListener$1(document,this._pointerEvents.pointercancel,function(o){i.handleGlobalPointerUp(o,!0)})),this._disposers.push(addEventListener$1(document,"mouseenter",function(o){!hasValue(o.relatedTarget)&&(o.buttons==0||o.which==0)&&i.handleDocumentLeave(o)}))),this._usePointerEventsOnly||(this._disposers.push(addEventListener$1(document,"touchstart",function(o){i.handleGlobalTouchStart(o)})),this._disposers.push(addEventListener$1(document,"touchmove",function(o){i.handleGlobalTouchMove(o)})),this._disposers.push(addEventListener$1(document,"touchend",function(o){i.handleGlobalTouchEnd(o)}))),this._disposers.push(addEventListener$1(document,"keydown",function(o){i.handleGlobalKeyDown(o)})),this._disposers.push(addEventListener$1(document,"keyup",function(o){i.handleGlobalKeyUp(o)})),this._globalEventsAdded=!0)},a.prototype.processClickable=function(i){this.processTouchable(i)},a.prototype.processContextMenu=function(i){i.contextMenuDisabled?i.eventDisposers.hasKey("contextMenuDisabled")||i.eventDisposers.setKey("contextMenuDisabled",addEventListener$1(i.element,"contextmenu",function(o){o.preventDefault()})):i.eventDisposers.hasKey("contextMenuDisabled")&&i.eventDisposers.getKey("contextMenuDisabled").dispose()},a.prototype.processHoverable=function(i){var o=this;if(i.hoverable||i.trackable)this.addGlobalEvents(),this.applyCursorOverStyle(i),!i.eventDisposers.hasKey("hoverable")&&this._addHoverEvents&&i.eventDisposers.setKey("hoverable",new MultiDisposer([addEventListener$1(i.element,this._pointerEvents.pointerout,function(d){return o.handlePointerOut(i,d)}),addEventListener$1(i.element,this._pointerEvents.pointerover,function(d){return o.handlePointerOver(i,d)})])),i.trackable;else{var c=i.eventDisposers.getKey("hoverable");c!=null&&(c.dispose(),i.eventDisposers.removeKey("hoverable"))}this.processTouchable(i)},a.prototype.processMovable=function(i){(i.draggable||i.swipeable||i.trackable||i.resizable)&&(!this.isGlobalElement(i)&&!i.isTouchProtected&&this.prepElement(i),this.applyCursorOverStyle(i)),this.processTouchable(i)},a.prototype.processTrackable=function(i){this.processHoverable(i),this.processMovable(i),i.trackable?this.trackedObjects.moveValue(i):this.trackedObjects.removeValue(i)},a.prototype.processDraggable=function(i){this.processMovable(i)},a.prototype.processSwipeable=function(i){this.processMovable(i)},a.prototype.processResizable=function(i){this.processMovable(i)},a.prototype.processWheelable=function(i){var o=this;if(i.wheelable)i.eventDisposers.hasKey("wheelable")||i.eventDisposers.setKey("wheelable",new MultiDisposer([addEventListener$1(i.element,this._pointerEvents.wheel,function(d){return o.handleMouseWheel(i,d)},this._passiveSupported?{passive:!1}:!1),i.events.on("out",function(d){i.wheelable&&o.unlockWheel()}),i.events.on("over",function(d){i.wheelable&&o.lockWheel()})]));else{var c=i.eventDisposers.getKey("wheelable");c!=null&&(c.dispose(),i.eventDisposers.removeKey("wheelable"))}},a.prototype.processFocusable=function(i){var o=this;if(i.focusable===!0&&i.tabindex>-1&&!this._useTouchEventsOnly)i.eventDisposers.hasKey("focusable")||i.eventDisposers.setKey("focusable",new MultiDisposer([addEventListener$1(i.element,"focus",function(d){return o.handleFocus(i,d)}),addEventListener$1(i.element,"blur",function(d){return o.handleBlur(i,d)}),addEventListener$1(i.element,this._pointerEvents.pointerdown,function(d){return o.handleFocusBlur(i,d)}),addEventListener$1(i.element,"touchstart",function(d){return o.handleFocusBlur(i,d)},this._passiveSupported?{passive:!1}:!1)]));else{var c=i.eventDisposers.getKey("focusable");c!=null&&(c.dispose(),i.eventDisposers.removeKey("focusable"))}},a.prototype.processTouchable=function(i){var o=this;if(i.clickable||i.hoverable||i.trackable||i.draggable||i.swipeable||i.resizable)this.addGlobalEvents(),i.eventDisposers.hasKey("touchable")||(!this._useTouchEventsOnly&&!this._usePointerEventsOnly?i.eventDisposers.setKey("touchable",new MultiDisposer([addEventListener$1(i.element,this._pointerEvents.pointerdown,function(d){return o.handlePointerDown(i,d)}),addEventListener$1(i.element,"touchstart",function(d){return o.handleTouchDown(i,d)},this._passiveSupported?{passive:!1}:!1)])):this._useTouchEventsOnly?this._usePointerEventsOnly||i.eventDisposers.setKey("touchable",addEventListener$1(i.element,"touchstart",function(d){return o.handleTouchDown(i,d)},this._passiveSupported?{passive:!1}:!1)):i.eventDisposers.setKey("touchable",addEventListener$1(i.element,this._pointerEvents.pointerdown,function(d){return o.handlePointerDown(i,d)})));else{var c=i.eventDisposers.getKey("touchable");c!=null&&(c.dispose(),i.eventDisposers.removeKey("touchable"))}},a.prototype.handleFocus=function(i,o){if(!i.focusable){o.preventDefault();return}if(i.isFocused=!0,i.events.isEnabled("focus")&&!system.isPaused){var c={type:"focus",target:i,event:o};i.events.dispatchImmediately("focus",c)}},a.prototype.handleFocusBlur=function(i,o){i.focusable!==!1&&this.getHitOption(i,"noFocus")&&i.events.once("focus",function(){i.events.disableType("blur"),blur(),i.sprite&&i.sprite.handleBlur(),i.events.enableType("blur")})},a.prototype.handleBlur=function(i,o){if(!i.focusable){o.preventDefault();return}if(i.isFocused=!1,i.events.isEnabled("blur")&&!system.isPaused){var c={type:"blur",target:i,event:o};i.events.dispatchImmediately("blur",c)}},a.prototype.handleGlobalKeyDown=function(i){if(this.focusedObject){if(keyboard.isKey(i,"esc"))blur();else if(this.focusedObject.draggable&&keyboard.isKey(i,["up","down","left","right"])){i.preventDefault();var o=this.focusedObject,c="interactionKeyboardObject";if(o.eventDisposers.hasKey(c))return;var d=new InteractionKeyboardObject(o,i);switch(o.eventDisposers.setKey(c,d),keyboard.getEventKey(i)){case"up":d.directionY=-1;break;case"down":d.directionY=1;break;case"left":d.directionX=-1;break;case"right":d.directionX=1;break}}}},a.prototype.handleGlobalKeyUp=function(i){var o="interactionKeyboardObject";if(this.focusedObject){var c=this.focusedObject.eventDisposers.getKey(o);c!=null&&(i.preventDefault(),c.dispose(),this.focusedObject.eventDisposers.removeKey(o));var d=this.focusedObject.sprite;keyboard.isKey(i,"enter")&&d&&(d.events.isEnabled("hit")||d.events.isEnabled("toggled")?this.focusedObject.dispatchImmediately("hit"):d.showTooltipOn=="hit"&&this.focusedObject.dispatchImmediately("up"))}},a.prototype.handleGlobalPointerMove=function(i){var o=this.getPointer(i);if(o.point=this.getPointerPoint(i),this.events.isEnabled("track")&&!system.isPaused){var c={type:"track",target:this,event:i,pointer:o,touch:o.touch};this.events.dispatchImmediately("track",c)}this.addBreadCrumb(o,o.point),this.handleGlobalMove(o,i)},a.prototype.handleGlobalPointerDown=function(i){this.processDelayed();var o=this.getPointer(i);if(this.events.isEnabled("down")&&!system.isPaused){var c={type:"down",target:this,event:i,pointer:o,touch:o.touch};this.events.dispatchImmediately("down",c)}},a.prototype.preventTouchAction=function(i){i.defaultPrevented||i.preventDefault()},a.prototype.handleGlobalPointerUp=function(i,o){o===void 0&&(o=!1);var c=this.getPointer(i);if(this.events.isEnabled("up")&&!system.isPaused){var d={type:"up",target:this,event:i,pointer:c,touch:c.touch};this.events.dispatchImmediately("up",d)}this.handleGlobalUp(c,i,o)},a.prototype.handleGlobalTouchMove=function(i){for(var o=0;o<i.changedTouches.length;o++){var c=this.getPointer(i.changedTouches[o]);if(c.point=this.getPointerPoint(i.changedTouches[o]),this.events.isEnabled("track")&&!system.isPaused){var d={type:"track",target:this,event:i,pointer:c,touch:c.touch};this.events.dispatchImmediately("track",d)}this.addBreadCrumb(c,c.point),this.handleGlobalMove(c,i)}},a.prototype.handleGlobalTouchStart=function(i){this.processDelayed();for(var o=0;o<i.changedTouches.length;o++){var c=this.getPointer(i.changedTouches[o]);if(!this._usePointerEventsOnly&&this.events.isEnabled("down")&&!system.isPaused){var d={type:"down",target:this,event:i,pointer:c,touch:c.touch};this.events.dispatchImmediately("down",d)}}},a.prototype.handleGlobalTouchEnd=function(i){for(var o=0;o<i.changedTouches.length;o++){var c=this.getPointer(i.changedTouches[o]);if(this.events.isEnabled("up")&&!system.isPaused){var d={type:"up",target:this,event:i,pointer:c,touch:c.touch};this.events.dispatchImmediately("up",d)}this.handleGlobalUp(c,i)}},a.prototype.handlePointerDown=function(i,o){var c=this.getPointer(o);!c.touch&&o.which!=1&&o.which!=3||(c.button=o.which,this.resetPointer(c,o),this.handleDown(i,c,o))},a.prototype.handlePointerOver=function(i,o){var c=this.getPointer(o);this.handleOver(i,c,o)},a.prototype.handlePointerOut=function(i,o){var c=this.getPointer(o);this.handleOut(i,c,o)},a.prototype.handleMouseWheel=function(i,o){var c=this.getPointer(o);c.point=this.getPointerPoint(o);var d=0,g=0,b=1;if(o.deltaMode==1&&(b=50),b*=this.getMouseOption(i,"sensitivity"),o instanceof WheelEvent)d=Math.round(-1*o.wheelDeltaX||o.deltaX*b),g=Math.round(-1*o.wheelDeltaY||o.deltaY*b);else throw new Error("Invalid event type");this.handleWheel(i,c,d,g,o)},a.prototype.handleTouchDown=function(i,o){for(var c=0;c<o.changedTouches.length;c++){var d=this.getPointer(o.changedTouches[c]);this.maybePreventDefault(i,o,d),this.resetPointer(d,o.changedTouches[c]),this.handleDown(i,d,o)}},a.prototype.handleHit=function(i,o,c){var d=getTime();if(i.lastHit&&i.lastHit>=d-this.getHitOption(i,"doubleHitTime")){if(d-i.lastHit<100)return;if(i.lastHit=void 0,i.lastHitPointer=void 0,i.events.isEnabled("doublehit")&&!system.isPaused){var g={type:"doublehit",target:i,point:o.point,event:c,touch:o.touch};i.events.dispatchImmediately("doublehit",g)}}else if(i.lastHit=d,i.lastHitPointer=o,o.button===3){if(i.events.isEnabled("rightclick")&&!system.isPaused){var g={type:"rightclick",target:i,event:c};i.events.dispatchImmediately("rightclick",g)}}else if(i.events.isEnabled("hit")&&!system.isPaused){var g={type:"hit",target:i,event:c,point:o.point,touch:o.touch};i.events.dispatchImmediately("hit",g)}},a.prototype.handleOver=function(i,o,c,d){if(i.hoverable){var g=!1;if(this.shouldCancelHovers(o)&&this.areTransformed()&&this.moved(o,this.getHitOption(i,"hitTolerance"))&&(g=!0,this.cancelAllHovers(c)),this.processDelayed(),i.overPointers.moveValue(o),!i.isRealHover&&(g||(i.isHover=!0,i.isRealHover=!0,this.overObjects.moveValue(i)),this.handleTrack(this.body,o,c,!0),i.events.isEnabled("over")&&!system.isPaused&&!g)){var b={type:"over",target:i,event:c,pointer:o,touch:o.touch};i.events.dispatchImmediately("over",b)}}},a.prototype.handleOut=function(i,o,c,d,g){var b=this;if(d===void 0&&(d=!1),g===void 0&&(g=!1),!!i.hoverable&&(i.overPointers.removeValue(o),i.isHover&&(!i.hasDelayedOut||g))){if(d&&i.overPointers.length)return;if(o&&o.touch&&!g&&!this.old(o)){var j=this.getHoverOption(i,"touchOutBehavior");if(j=="leave"){this._delayedEvents.out.push({type:"out",io:i,pointer:o,event:c,keepUntil:getTime()+500}),i.hasDelayedOut=!0;return}else if(j=="delay"&&this.getHoverOption(i,"touchOutDelay")){this._delayedEvents.out.push({type:"out",io:i,pointer:o,event:c,keepUntil:getTime()+500,timeout:this.setTimeout(function(){b.handleOut(i,o,c,!0)},this.getHoverOption(i,"touchOutDelay"))});return}}if(i.isHover=!1,this.overObjects.removeValue(i),!i.isDisposed()&&i.events.isEnabled("out")&&!system.isPaused){var $={type:"out",target:i,event:c,pointer:o,touch:o.touch};i.events.dispatchImmediately("out",$)}i.overPointers.clear(),i.hasDelayedOut=!1}},a.prototype.processDelayed=function(){for(var i;i=this._delayedEvents.out.pop(),!!i;)i.timeout&&i.timeout.dispose(),this.handleOut(i.io,i.pointer,i.event,!1,!0)},a.prototype.handleDown=function(i,o,c){if(this.maybePreventDefault(i,c,o),i.inert&&this.stopInertia(i),this.handleOver(i,o,c,!0),i.downPointers.moveValue(o),this.applyCursorDownStyle(i,o),i.isDown||(i.focusable!==!1&&this.getHitOption(i,"noFocus")&&this.focusedObject&&blur(),i.isDown=!0,this.downObjects.moveValue(i),i.draggable&&this.processDragStart(i,o,c),i.resizable&&this.processResizeStart(i,o,c)),i.events.isEnabled("down")&&!system.isPaused){var d={type:"down",target:i,event:c,pointer:o,touch:o.touch};i.events.dispatchImmediately("down",d)}},a.prototype.handleGlobalUp=function(i,o,c){var d=this;c===void 0&&(c=!1);var g=this.downObjects.values.slice();g.sort(function(b,j){if(b&&j){var $=b.element.compareDocumentPosition(j.element);return $&Node.DOCUMENT_POSITION_CONTAINED_BY?1:$&Node.DOCUMENT_POSITION_CONTAINS?-1:0}else return 0}),each$2(g,function(b){b&&b.downPointers.contains(i)&&d.handleUp(b,i,o,c)})},a.prototype.handleDocumentLeave=function(i){var o=this;each(this.downObjects.backwards().iterator(),function(c){c.downPointers.each(function(d){o.handleUp(c,d,i)})})},a.prototype.handleUp=function(i,o,c,d){if(d===void 0&&(d=!1),this.restoreCursorDownStyle(i,o),i.downPointers.removeValue(o),(o&&o.touch||this._useTouchEventsOnly)&&this.handleOut(i,o,c,!0),i.isDown){if(i.downPointers.length==0&&(i.isDown=!1,this.downObjects.removeValue(i)),i.events.isEnabled("up")&&!system.isPaused&&o){var g={type:"up",target:i,event:c,pointer:o,touch:o.touch};i.events.dispatchImmediately("up",g)}d||(i.swipeable&&this.swiped(i,o)?this.handleSwipe(i,o,c):(i.clickable&&!this.moved(o,this.getHitOption(i,"hitTolerance"))&&this.handleHit(i,o,c),i.inert&&this.moved(o,this.getHitOption(i,"hitTolerance"))?this.handleInertia(i,o):i.draggable&&this.processDragStop(i,o,c),i.resizable&&this.processResizeStop(i,o,c)))}},a.prototype.maybePreventDefault=function(i,o,c){hasValue(o)&&(i.draggable||i.swipeable||i.trackable||i.resizable)&&!this.isGlobalElement(i)&&o.cancelable!==!1&&(!i.isTouchProtected||!c||!c.touch)&&o.preventDefault()},a.prototype.cancelAllHovers=function(i){var o=this;each(this.overObjects.backwards().iterator(),function(c){if(c){var d=c.overPointers.getIndex(0);o.handleOut(c,d,i,!0,!0)}})},a.prototype.shouldCancelHovers=function(i){return options.disableHoverOnTransform=="always"||options.disableHoverOnTransform=="touch"&&i.touch},a.prototype.handleGlobalMove=function(i,o){var c=this;if(!i.touch){var d=eventTarget(i.lastEvent);each(this.overObjects.backwards().iterator(),function(g){if(g&&g.overPointers.contains(i)&&g.hoverable){var b=!1;g.element&&i.lastEvent&&contains(g.element,d)||(b=!0),b&&c.handleOut(g,i,o,!0)}})}each(this.transformedObjects.backwards().iterator(),function(g){g.downPointers.contains(i)&&!(g.swipeable&&c.swiping(g,i))&&(g.draggable||g.resizable)&&c.handleTransform(g,o)}),each(this.trackedObjects.backwards().iterator(),function(g){g.overPointers.contains(i)||c.handleTrack(g,i,o)})},a.prototype.handleTrack=function(i,o,c,d){if(d===void 0&&(d=!1),!(!d&&!this.moved(o,0))&&i.events.isEnabled("track")&&!system.isPaused){var g={type:"track",target:i,event:c,point:o.point,pointer:o,touch:o.touch};i.events.dispatchImmediately("track",g)}},a.prototype.handleSwipe=function(i,o,c){if(i.events.isEnabled("swipe")&&!system.isPaused){var d={type:"swipe",target:i,event:c,touch:o.touch};i.events.dispatchImmediately("swipe",d)}if(o.startPoint.x<o.point.x){if(i.events.isEnabled("swiperight")&&!system.isPaused){var d={type:"swiperight",target:i,event:c,touch:o.touch};i.events.dispatchImmediately("swiperight",d)}}else if(i.events.isEnabled("swipeleft")&&!system.isPaused){var d={type:"swipeleft",target:i,event:c,touch:o.touch};i.events.dispatchImmediately("swipeleft",d)}},a.prototype.handleWheel=function(i,o,c,d,g){var b={x:c,y:d};i.events.isEnabled("wheel")&&!system.isPaused&&i.events.dispatchImmediately("wheel",{type:"wheel",target:i,event:g,point:o.point,shift:b}),c<0?i.events.isEnabled("wheelleft")&&!system.isPaused&&i.events.dispatchImmediately("wheelleft",{type:"wheelleft",target:i,event:g,point:o.point,shift:b}):c>0?i.events.isEnabled("swiperight")&&!system.isPaused&&i.events.dispatchImmediately("wheelright",{type:"wheelright",target:i,event:g,point:o.point,shift:b}):d<0?i.events.isEnabled("wheelup")&&!system.isPaused&&i.events.dispatchImmediately("wheelup",{type:"wheelup",target:i,event:g,point:o.point,shift:b}):d>0&&i.events.isEnabled("wheeldown")&&!system.isPaused&&i.events.dispatchImmediately("wheeldown",{type:"wheeldown",target:i,event:g,point:o.point,shift:b})},a.prototype.handleInertia=function(i,o){i.draggable&&i.downPointers.length===0&&this.handleMoveInertia(i,o),i.resizable&&i.downPointers.length>1&&this.handleResizeInertia(i,o)},a.prototype.handleMoveInertia=function(i,o){var c=i,d="move",g={x:o.point.x,y:o.point.y},b={x:o.startPoint.x,y:o.startPoint.y},j=new Inertia(c,d,g,b),$=this.getTrailPoint(o,getTime()-this.getInertiaOption(i,"move","time"));if(typeof $>"u"){this.processDragStop(i,o,o.lastUpEvent);return}var rt=this.getInertiaOption(i,"move","factor"),_e=[{to:o.point.x+(o.point.x-$.point.x)*rt,property:"x"},{to:o.point.y+(o.point.y-$.point.y)*rt,property:"y"}],st=new Animation(j,_e,this.getInertiaOption(i,"move","duration"),this.getInertiaOption(i,"move","easing")).start();this._disposers.push(st.events.on("animationended",function(ut){j.done()})),i.inertias.setKey("move",j)},a.prototype.handleResizeInertia=function(i,o){},a.prototype.handleTransform=function(i,o){var c=i.downPointers.getIndex(0),d=null,g=null;c&&(d=c.point,g=c.startPoint);var b,j,$;j={x:i.originalPosition.x,y:i.originalPosition.y},$=j;for(var rt=!0,_e=1;_e<i.downPointers.length;_e++){var st=i.downPointers.getIndex(_e);if(g.x!=st.startPoint.x&&g.y!=st.startPoint.y){rt=!1,b=st,j=b.point,$=b.startPoint;break}}var ut=c&&this.moved(c,0);if(i.draggable&&c&&c.dragStartEvents&&c.dragStartEvents.length&&ut&&i.events.isEnabled("dragstart")&&!system.isPaused&&i.events.dispatchImmediately("dragstart",c.dragStartEvents.shift()),rt&&i.draggable)this.handleTransformMove(i,d,g,o,ut,c.touch),this.shouldCancelHovers(c)&&this.moved(c,this.getHitOption(i,"hitTolerance"))&&this.cancelAllHovers(o);else{var gt=b&&this.moved(b,0);(this.shouldCancelHovers(c)&&this.moved(c,this.getHitOption(i,"hitTolerance"))||this.shouldCancelHovers(b)&&this.moved(b,this.getHitOption(i,"hitTolerance")))&&this.cancelAllHovers(o),i.draggable&&i.resizable?(this.handleTransformMove(i,d,g,o,ut&&gt,c.touch),this.handleTransformResize(i,d,g,j,$,o,ut&&gt,c.touch)):(i.draggable&&this.handleTransformMove(i,d,g,o,ut,c.touch),i.resizable&&(!rt||o.ctrlKey)&&this.handleTransformResize(i,d,g,j,$,o,ut&&gt,c.touch))}},a.prototype.handleTransformMove=function(i,o,c,d,g,b){if(g&&i.events.isEnabled("drag")&&!system.isPaused&&(!i.isTouchProtected||!b)){var j={type:"drag",target:i,event:d,shift:{x:o.x-c.x,y:o.y-c.y},startPoint:c,point:o,touch:b};i.events.dispatchImmediately("drag",j)}},a.prototype.handleTransformResize=function(i,o,c,d,g,b,j,$){if(i.events.isEnabled("resize")&&!system.isPaused&&(!i.isTouchProtected||!$)){var rt={type:"resize",target:i,event:b,scale:getScale(o,c,d,g),startPoint1:c,point1:o,startPoint2:g,point2:d,touch:$};i.events.dispatchImmediately("resize",rt)}},a.prototype.processDragStart=function(i,o,c){this.transformedObjects.moveValue(i),this.shouldCancelHovers(o)&&this.cancelAllHovers(c);var d={type:"dragstart",target:i,event:c,touch:o?o.touch:!1};o&&(o.dragTarget=i),o&&o.dragStartEvents?o.dragStartEvents.push(d):system.isPaused||i.dispatchImmediately("dragstart",d)},a.prototype.processDragStop=function(i,o,c){if(o||(o=this.getDragPointer(i)),o&&(o.dragTarget=void 0),this.transformedObjects.removeValue(i),(!o||this.moved(o,0))&&i.events.isEnabled("dragstop")&&!system.isPaused){var d={type:"dragstop",target:i,touch:o?o.touch:!1};i.events.dispatchImmediately("dragstop",d)}},a.prototype.processResizeStart=function(i,o,c){this.transformedObjects.moveValue(i)},a.prototype.processResizeStop=function(i,o,c){this.transformedObjects.removeValue(i)},a.prototype.dragStart=function(i,o){o||(o=this.getDragPointer(i)),o&&this.handleDown(i,o,o.lastDownEvent)},a.prototype.dragStop=function(i,o,c){o||(o=this.getDragPointer(i)),o&&!c&&this.handleGlobalUp(o,o.lastUpEvent,c)},a.prototype.getDragPointer=function(i){return i?i.downPointers.getIndex(0):this.transformedObjects.length?this.getDragPointer(this.transformedObjects.getIndex(0)):void 0},a.prototype.getPointerId=function(i){var o="";return hasValue(i.identifier)?o=""+i.identifier:hasValue(i.pointerId)?o=""+i.pointerId:o="m",o.replace("-","")},a.prototype.getPointerPoint=function(i){return{x:i.clientX,y:i.clientY}},a.prototype.getPointer=function(i){var o=this.getPointerId(i),c=this.getPointerPoint(i),d;return this.pointers.hasKey(o)?(d=this.pointers.getKey(o),d.touch=this.isPointerTouch(i)):(d={id:o,touch:this.isPointerTouch(i),startPoint:c,startTime:getTime(),point:c,track:[],swipeCanceled:!1,dragStartEvents:[]},this.addBreadCrumb(d,c),this.pointers.setKey(o,d)),d.lastEvent=i,this.lastPointer=d,d},a.prototype.isPointerTouch=function(i){if(typeof Touch<"u"&&i instanceof Touch)return!0;if(typeof PointerEvent<"u"&&i instanceof PointerEvent&&hasValue(i.pointerType))switch(i.pointerType){case"touch":case"pen":case 2:return!0;case"mouse":case 4:return!1;default:return!(i instanceof MouseEvent)}else if(hasValue(i.type)&&i.type.match(/^mouse/))return!1;return!0},a.prototype.resetPointer=function(i,o){var c=this.getPointerPoint(o);i.startTime=getTime(),i.startPoint={x:c.x,y:c.y},i.point={x:c.x,y:c.y},i.track=[],i.swipeCanceled=!1},a.prototype.addBreadCrumb=function(i,o){i.track.push({timestamp:getTime(),point:o})},a.prototype.lockDocument=function(){this.prepElement(this.body)},a.prototype.unlockDocument=function(){this.transformedObjects.length==0&&this.restoreAllStyles(this.body)},a.prototype.lockElement=function(i){this.prepElement(i)},a.prototype.unlockElement=function(i){this.restoreAllStyles(i)},a.prototype.lockWheel=function(){window.addEventListener(this._pointerEvents.wheel,this.wheelLockEvent,this._passiveSupported?{passive:!1}:!1)},a.prototype.unlockWheel=function(){window.removeEventListener(this._pointerEvents.wheel,this.wheelLockEvent)},a.prototype.isLocalElement=function(i,o,c){var d=this.getCache("local_pointer_"+i.id);if(hasValue(d))return d;var g=getRoot(o)||document;if(g.elementFromPoint){var b=g.elementFromPoint(i.point.x,i.point.y),j=b&&contains(o,b);return this.setCache("local_pointer_"+i.id+"_"+c,j,100),j}return!1},a.prototype.wheelLockEvent=function(i){return i.preventDefault(),!1},a.prototype.prepElement=function(i){var o=i.element;if(o){for(var c=["touchAction","webkitTouchAction","MozTouchAction","MSTouchAction","msTouchAction","oTouchAction","userSelect","webkitUserSelect","MozUserSelect","MSUserSelect","msUserSelect","oUserSelect","touchSelect","webkitTouchSelect","MozTouchSelect","MSTouchSelect","msTouchSelect","oTouchSelect","touchCallout","webkitTouchCallout","MozTouchCallout","MSTouchCallout","msTouchCallout","oTouchCallout","contentZooming","webkitContentZooming","MozContentZooming","MSContentZooming","msContentZooming","oContentZooming","userDrag","webkitUserDrag","MozUserDrag","MSUserDrag","msUserDrag","oUserDrag"],d=0;d<c.length;d++)c[d]in o.style&&this.setTemporaryStyle(i,c[d],"none");this.setTemporaryStyle(i,"tapHighlightColor","rgba(0, 0, 0, 0)")}},a.prototype.unprepElement=function(i){var o=i.element;if(o){for(var c=["touchAction","webkitTouchAction","MozTouchAction","MSTouchAction","msTouchAction","oTouchAction","userSelect","webkitUserSelect","MozUserSelect","MSUserSelect","msUserSelect","oUserSelect","touchSelect","webkitTouchSelect","MozTouchSelect","MSTouchSelect","msTouchSelect","oTouchSelect","touchCallout","webkitTouchCallout","MozTouchCallout","MSTouchCallout","msTouchCallout","oTouchCallout","contentZooming","webkitContentZooming","MozContentZooming","MSContentZooming","msContentZooming","oContentZooming","userDrag","webkitUserDrag","MozUserDrag","MSUserDrag","msUserDrag","oUserDrag"],d=0;d<c.length;d++)c[d]in o.style&&this.restoreStyle(i,c[d]);this.restoreStyle(i,"tapHighlightColor")}},a.prototype.getHitOption=function(i,o){var c=i.hitOptions[o];return typeof c>"u"&&(c=this.hitOptions[o]),c},a.prototype.getHoverOption=function(i,o){var c=i.hoverOptions[o];return typeof c>"u"&&(c=this.hoverOptions[o]),c},a.prototype.getSwipeOption=function(i,o){var c=i.swipeOptions[o];return typeof c>"u"&&(c=this.swipeOptions[o]),c},a.prototype.getKeyboardOption=function(i,o){var c=i.keyboardOptions[o];return typeof c>"u"&&(c=this.keyboardOptions[o]),c},a.prototype.getMouseOption=function(i,o){var c=i.mouseOptions[o];return typeof c>"u"&&(c=this.mouseOptions[o]),c},a.prototype.getInertiaOption=function(i,o,c){var d=i.inertiaOptions.getKey(o),g;return d&&hasValue(d[c])?g=d[c]:g=this.inertiaOptions.getKey(o)[c],g},a.prototype.stopInertia=function(i){for(var o,c=["move","resize"],d=0;d<c.length;d++)if(o=c[d],i.inertias.hasKey(o)){var g=i.inertias.getKey(o);if(g){g.dispose();continue}}},a.prototype.swiping=function(i,o){var c=getTime();return o.swipeCanceled||!i.swipeable?!1:Math.abs(o.startPoint.y-o.point.y)<this.getSwipeOption(i,"verticalThreshold")&&o.startTime>c-this.getSwipeOption(i,"time")},a.prototype.swiped=function(i,o){var c=getTime();return o.swipeCanceled?!1:Math.abs(o.startPoint.x-o.point.x)>this.getSwipeOption(i,"horizontalThreshold")&&Math.abs(o.startPoint.y-o.point.y)<this.getSwipeOption(i,"verticalThreshold")&&o.startTime>c-this.getSwipeOption(i,"time")},a.prototype.applyCursorOverStyle=function(i){var o=i.cursorOptions;if(hasValue(o.overStyle))for(var c=0;c<o.overStyle.length;c++)setStyle(i.element,o.overStyle[c].property,o.overStyle[c].value)},a.prototype.applyCursorDownStyle=function(i,o){if(!(o&&o.touch)){var c=i.cursorOptions.downStyle;if(i.downPointers.contains(o)&&hasValue(c))for(var d=0;d<c.length;d++)this.setTemporaryStyle(this.body,c[d].property,c[d].value),this.setTemporaryStyle(i,c[d].property,c[d].value)}},a.prototype.restoreCursorDownStyle=function(i,o){if(!(o&&o.touch)){var c=i.cursorOptions.downStyle;if(i.downPointers.contains(o)&&hasValue(c))for(var d=0;d<c.length;d++)this.restoreStyle(this.body,c[d].property),this.restoreStyle(i,c[d].property)}},a.prototype.setGlobalStyle=function(i){for(var o=getInteraction().body,c=isArray$1(i)?i:[i],d=0;d<c.length;d++)this.setTemporaryStyle(o,c[d].property,c[d].value)},a.prototype.restoreGlobalStyle=function(i){for(var o=getInteraction().body,c=isArray$1(i)?i:[i],d=0;d<c.length;d++)this.restoreStyle(o,c[d].property)},a.prototype.isGlobalElement=function(i){return document.body===i.element},a.prototype.moved=function(i,o,c){var d=this.getShift(i);return Math.abs(d.x)>o||Math.abs(d.y)>o},a.prototype.old=function(i,o){return o===void 0&&(o=300),getTime()-i.startTime>o},a.prototype.getShift=function(i){return{x:i.startPoint.x-i.point.x,y:i.startPoint.y-i.point.y}},a.prototype.getTrailPoint=function(i,o){for(var c,d=0;d<i.track.length;d++)if(i.track[d].timestamp>=o){c=i.track[d];break}return c},a.prototype.pointerExists=function(i,o){var c=!1;return i.each(function(d){d!=o&&(c=d.point.x==o.point.x&&d.point.y==o.point.y)}),c},a.prototype.getInteraction=function(i){return new InteractionObject(i)},a.prototype.setTemporaryStyle=function(i,o,c){var d=i.element;hasValue(d.style[o])&&!i.replacedStyles.hasKey(o)&&i.replacedStyles.setKey(o,d.style[o]),setStyle(d,o,c)},a.prototype.restoreStyle=function(i,o){i.replacedStyles.hasKey(o)?(i.element.style[o]=i.replacedStyles.getKey(o),i.replacedStyles.removeKey(o)):delete i.element.style[o]},a.prototype.restoreAllStyles=function(i){each(i.replacedStyles.iterator(),function(o){var c=o[0],d=o[1];i.element.style[c]=d,i.replacedStyles.removeKey(c)})},a.prototype.dispose=function(){this.isDisposed()||(e.prototype.dispose.call(this),this.restoreAllStyles(this.body),this.unlockWheel())},a.prototype.log=function(i,o,c){{if(o.changedTouches){for(var d=0;d<o.changedTouches.length;d++)this.logTouch(i,o.type,o.changedTouches[d]);return}var g="";if(o.pointerType)switch(o.pointerType){case 2:g="touch";break;case 4:g="mouse";break;default:g=o.pointerType;break}else typeof TouchEvent<"u"&&o instanceof TouchEvent?g="touch":o.type.match(/^mouse/)?g="mouse":g="???";var b="";hasValue(o.identifier)?b=o.identifier:hasValue(o.pointerId)?b=o.pointerId:b="???",console.log(c?i+" ("+c.uid+")  "+o.type+"  "+g+"  "+b:i+"  "+o.type+"  "+g+"  "+b)}},a.prototype.areTransformed=function(i){var o=this.transformedObjects.length;if(i)for(var c=isArray$1(i)?i:[i],d=0;d<c.length;d++)this.transformedObjects.contains(c[d])&&o--;return o>0},a.prototype.logTouch=function(i,o,c){console.log(i+"  "+o+"  touch  "+c.identifier)},Object.defineProperty(a,"passiveSupported",{get:function(){var i=this;if(this._passiveSupported==null)try{var o=Object.defineProperty({},"passive",{get:function(){i._passiveSupported=!0}});window.addEventListener("test",o,o),window.removeEventListener("test",o,o)}catch{this._passiveSupported=!1}return this._passiveSupported},enumerable:!0,configurable:!0}),a}(BaseObjectEvents),interaction=null;function getInteraction(){return interaction==null&&(interaction=new Interaction),interaction}var Popup=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.adapter=new Adapter(i),i._elements={},i._IOs={},i._content="",i._title="",i._classPrefix="ampopup",i._defaultStyles=!0,i._showCurtain=!1,i._draggable=!0,i._align="center",i._dynamicResize=!0,i._verticalAlign="middle",i._shift={x:0,y:0},i._tempShift={x:0,y:0},i._readerTitle="",i._closable=!0,i._cssLoaded=!1,i._fitTo="window",i.isTemplate=!1,i._sized=!1,i.className="Popup",i}return a.prototype.open=function(){this.container&&(this._elements.wrapper&&this.container.appendChild(this._elements.wrapper),this._elements.curtain&&(this.container.appendChild(this._elements.curtain),this.showCurtain=this.showCurtain),this.positionElement(),this.dispatchImmediately("opened"))},a.prototype.close=function(){this._elements.wrapper&&this._elements.wrapper.parentElement&&this._elements.wrapper.parentElement.removeChild(this._elements.wrapper),this._elements.curtain&&this._elements.curtain.parentElement&&this._elements.curtain.parentElement.removeChild(this._elements.curtain),this.dispatchImmediately("closed"),this.releasePointers()},a.prototype.dispose=function(){this.close(),e.prototype.dispose.call(this)},a.prototype.positionElement=function(i){var o=this;i===void 0&&(i=!0),this._elements.wrapper&&setTimeout(function(){if(o._elements.wrapper){if(i||!o._sized){o._elements.wrapper.style.opacity="0.01",o._elements.wrapper.style.left="0",o._elements.wrapper.style.top="0",o._elements.wrapper.style.margin="0 0 0 0",o._elements.wrapper.style.width="",o._elements.wrapper.style.height="";var c=o._elements.wrapper.getBoundingClientRect();o._elements.wrapper.style.width=c.width+"px",o._elements.wrapper.style.height=c.height+"px",o._sized=!0}if(o.dynamicResize)for(var d=o._elements.wrapper.getElementsByTagName("img"),g=0;g<d.length;g++){var b=d[g];if(!b.complete){b.addEventListener("load",function(){o.positionElement(!0)});break}}setTimeout(function(){if(o._elements.wrapper){var j;switch((i||!o._sized)&&o._bbox?j=o._bbox:(j=o._elements.wrapper.getBoundingClientRect(),o._elements.wrapper.style.opacity=""),o.align){case"left":o._elements.wrapper.style.left="0",o._elements.wrapper.style.right="auto",o._elements.wrapper.style.marginLeft=o.toStyle(o._shift.x+o._tempShift.x);break;case"center":o._elements.wrapper.style.left="50%",o._elements.wrapper.style.right="auto",o._elements.wrapper.style.marginLeft=o.toStyle(Math.round(-j.width/2)+(o._shift.x+o._tempShift.x));break;case"right":o._elements.wrapper.style.left="auto",o._elements.wrapper.style.right="0",o._elements.wrapper.style.marginLeft=o.toStyle(o._shift.x+o._tempShift.x);break;default:o._elements.wrapper.style.left=o.toStyle(o.left)||"auto",o._elements.wrapper.style.right=o.toStyle(o.right)||"auto",o._elements.wrapper.style.marginLeft=o.toStyle(o._shift.x+o._tempShift.x);break}switch(o.verticalAlign){case"top":o._elements.wrapper.style.top="0",o._elements.wrapper.style.bottom="auto",o._elements.wrapper.style.marginTop=o.toStyle(o._shift.y+o._tempShift.y);break;case"middle":o._elements.wrapper.style.top="50%",o._elements.wrapper.style.bottom="auto",o._elements.wrapper.style.marginTop=o.toStyle(Math.round(-j.height/2)+(o._shift.y+o._tempShift.y));break;case"bottom":o._elements.wrapper.style.top="auto",o._elements.wrapper.style.bottom="0",o._elements.wrapper.style.marginTop=o.toStyle(o._shift.y+o._tempShift.y);break;default:o._elements.wrapper.style.top=o.toStyle(o.top)||"auto",o._elements.wrapper.style.bottom=o.toStyle(o.bottom)||"auto",o._elements.wrapper.style.marginTop=o.toStyle(o._shift.y+o._tempShift.y);break}}},1)}},1)},a.prototype.setupDragging=function(){var i=this;this.draggable?(this._IOs.header.events.has("drag")||this._IOs.header.events.on("drag",function(o){i._tempShift.x=o.shift.x,i._tempShift.y=o.shift.y,i.positionElement(!1)}),this._IOs.header.events.has("dragstop")||this._IOs.header.events.on("dragstop",function(o){i._shift.x+=i._tempShift.x,i._shift.y+=i._tempShift.y,i._tempShift.x=0,i._tempShift.y=0,i.positionElement(!1)})):this._IOs.header&&(getInteraction().unprepElement(this._IOs.header),this._IOs.header.events.has("drag")&&this._IOs.header.events.off("drag"),this._IOs.header.events.has("dragstop")&&this._IOs.header.events.off("dragstop"))},a.prototype.toStyle=function(i){return hasValue(i)?isNumber$1(i)?""+i+"px":i.toString():null},Object.defineProperty(a.prototype,"classPrefix",{get:function(){return this.adapter.apply("classPrefix",this._classPrefix)},set:function(i){this._classPrefix=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"classPrefixRaw",{get:function(){return this._classPrefix},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"content",{get:function(){return this.adapter.apply("content",this._content)},set:function(i){this._content!=i&&(this._content=i,this._elements.content||this.createContentElement(),this._elements.content.innerHTML=i,this.positionElement())},enumerable:!0,configurable:!0}),a.prototype.getClassNames=function(){return this.adapter.apply("classNames",{wrapperClass:this.classPrefix+"",headerClass:this.classPrefix+"-header",titleClass:this.classPrefix+"-title",contentClass:this.classPrefix+"-content",insideClass:this.classPrefix+"-inside",curtainClass:this.classPrefix+"-curtain",closeClass:this.classPrefix+"-close"})},a.prototype.createContentElement=function(){if(!this._elements.wrapper){var i=this.getClassNames(),o=document.createElement("div");o.className=i.contentClass,o.style.opacity="0.01";var c=document.createElement("a");c.className=i.closeClass;var d=document.createElement("div");d.className=i.headerClass;var g=document.createElement("div");g.innerHTML=this.title,g.className=i.titleClass,this.title||(g.style.display="none");var b=document.createElement("div");b.className=i.insideClass,b.innerHTML=this.content,this._IOs.wrapper=getInteraction().getInteraction(o),this._IOs.header=getInteraction().getInteraction(d),this._disposers.push(this._IOs.wrapper),this._IOs.wrapper.events.on("over",this.disablePointers,this),this._IOs.wrapper.events.on("out",this.releasePointers,this),this._IOs.close=getInteraction().getInteraction(c),this._disposers.push(this._IOs.close),c.style.visibility="hidden",o.setAttribute("role","dialog"),d.appendChild(c),d.appendChild(g),o.appendChild(d),o.appendChild(b),this.container.appendChild(o),this._elements.wrapper=o,this._elements.header=d,this._elements.content=b,this._elements.title=g,this._elements.close=c,this.defaultStyles&&this.loadDefaultCSS(),this.createCurtainElement(),this.applyEvents(),this.applyReaderSettings(),this.setupDragging()}},Object.defineProperty(a.prototype,"title",{get:function(){return this.adapter.apply("title",this._title)},set:function(i){this._title!=i&&(this._title=i,this._elements.content||this.createContentElement(),this._elements.title.innerHTML=i,this.positionElement(),this.applyReaderSettings())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"readerTitle",{get:function(){return this.adapter.apply("readerTitle",this._readerTitle!=""?this._readerTitle:this.title)},set:function(i){this._readerTitle!=i&&(this._readerTitle=i,this.applyReaderSettings())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"closable",{get:function(){return this.adapter.apply("closable",this._closable)},set:function(i){i!==this._closable&&(this._closable=i,this.applyEvents())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"fitTo",{get:function(){return this.adapter.apply("fitTo",this._fitTo)},set:function(i){i!=this._fitTo&&(this._fitTo=i,this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"defaultStyles",{get:function(){return this.adapter.apply("defaultStyles",this._defaultStyles)},set:function(i){this._defaultStyles!=i&&(this._defaultStyles=i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"showCurtain",{get:function(){return this.adapter.apply("showCurtain",this._showCurtain)},set:function(i){this._showCurtain!=i&&(this._showCurtain=i,this._elements.curtain&&(this._elements.curtain.style.display=i?"block":"none"))},enumerable:!0,configurable:!0}),a.prototype.createCurtainElement=function(){var i=this.getClassNames(),o=document.createElement("div");o.className=i.curtainClass,this.container.appendChild(o),this._IOs.curtain=getInteraction().getInteraction(o),this._disposers.push(this._IOs.curtain),this._IOs.curtain.events.on("over",this.disablePointers,this),this._IOs.curtain.events.on("out",this.releasePointers,this),o.style.display=this.showCurtain?"block":"none",this._elements.curtain=o},Object.defineProperty(a.prototype,"draggable",{get:function(){return this.adapter.apply("draggable",this._draggable)},set:function(i){this._draggable!=i&&(this._draggable=i,this.setupDragging())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"dynamicResize",{get:function(){return this.adapter.apply("dynamicResize",this._dynamicResize)},set:function(i){this._dynamicResize!=i&&(this._dynamicResize=i,this.positionElement(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"align",{get:function(){return this.adapter.apply("align",this._align)},set:function(i){this._align!=i&&(this._align=i,this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"verticalAlign",{get:function(){return this.adapter.apply("verticalAlign",this._verticalAlign)},set:function(i){this._verticalAlign!=i&&(this._verticalAlign=i,this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"left",{get:function(){return this.adapter.apply("left",this._left)},set:function(i){this.left!=i&&(this._left=i,this._align="none",this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"right",{get:function(){return this.adapter.apply("right",this._right)},set:function(i){this.right!=i&&(this._right=i,this._align="none",this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"top",{get:function(){return this.adapter.apply("top",this._top)},set:function(i){this.top!=i&&(this._top=i,this._verticalAlign="none",this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"bottom",{get:function(){return this.adapter.apply("bottom",this._bottom)},set:function(i){this.bottom!=i&&(this._bottom=i,this._verticalAlign="none",this.positionElement())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"elements",{get:function(){return this._elements},enumerable:!0,configurable:!0}),a.prototype.loadDefaultCSS=function(){this._cssLoaded||(this._disposers.push(popupCSS(getShadowRoot(this.container),this.classPrefix)),each$1(this._elements,function(i,o){o.style.display=""}),this._cssLoaded=!0)},a.prototype.applyEvents=function(){var i=this;if(this._IOs.close)if(this.closable){this._IOs.close.element.style.visibility="visible";var o=[getInteraction().body.events.on("keyup",function(c){keyboard.isKey(c.event,"esc")&&i.closable&&i.close()}),this._IOs.close.events.on("hit",function(c){i.close()})];o.push(this._IOs.curtain.events.on("hit",function(c){i.showCurtain&&i.closable&&i.close()})),this._disposers.push(new MultiDisposer(o))}else this._IOs.close.element.style.visibility="hidden"},a.prototype.disablePointers=function(){this.sprite&&(this._spriteInteractionsEnabled=this.sprite.interactionsEnabled,this.sprite.interactionsEnabled=!1)},a.prototype.releasePointers=function(){hasValue(this._spriteInteractionsEnabled)&&(this.sprite.interactionsEnabled=this._spriteInteractionsEnabled,this._spriteInteractionsEnabled=void 0)},a.prototype.applyReaderSettings=function(){this.elements.wrapper.setAttribute("aria-label",this.readerTitle)},a.prototype.copyFrom=function(i){e.prototype.copyFrom.call(this,i),this.container=i.container,this.sprite=i.sprite,this.classPrefix=i.classPrefixRaw,this.content=i.content,this.title=i.title,this.readerTitle=i.readerTitle,this.defaultStyles=i.defaultStyles,this.showCurtain=i.showCurtain,this.align=i.align,this.verticalAlign=i.verticalAlign,this.left=i.left,this.right=i.right,this.top=i.top,this.bottom=i.bottom,this.adapter.copyFrom(i.adapter)},a}(BaseObjectEvents),Modal=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.adapter=new Adapter(i),i.className="Modal",i.showCurtain=!0,i.draggable=!1,i}return a}(Popup);function log(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];options.verbose&&console&&console.log.apply(console,__spread(e))}function warn(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];options.suppressWarnings||console&&console.warn.apply(console,__spread(e))}var Native=function(){function e(){var a=this;this._targets=[],this._observer=new ResizeObserver(function(i){each$2(i,function(o){each$2(a._targets,function(c){c.target===o.target&&c.callback()})})})}return e.prototype.addTarget=function(a,i){this._observer.observe(a,{box:"content-box"}),this._targets.push({target:a,callback:i})},e.prototype.removeTarget=function(a){this._observer.unobserve(a),keepIf(this._targets,function(i){return i.target!==a})},e}(),Raf=function(){function e(){this._targets=[]}return e.prototype.addTarget=function(a,i){var o=this;if(this._targets.length===0){var c=null,d=function(){var b=Date.now();(c===null||b>c+e.delay)&&(c=b,each$2(o._targets,function(j){var $=j.target.getBoundingClientRect();($.width!==j.size.width||$.height!==j.size.height)&&(j.size=$,j.callback())})),o._timer=requestAnimationFrame(d)};this._timer=requestAnimationFrame(d)}var g=a.getBoundingClientRect();this._targets.push({target:a,callback:i,size:g})},e.prototype.removeTarget=function(a){keepIf(this._targets,function(i){return i.target!==a}),this._targets.length===0&&cancelAnimationFrame(this._timer)},e.delay=200,e}(),observer=null;function makeSensor(){return observer===null&&(typeof ResizeObserver<"u"?observer=new Native:observer=new Raf),observer}var ResizeSensor=function(){function e(a,i){this._disposed=!1,this._sensor=makeSensor(),this._element=a,this._sensor.addTarget(a,i)}return e.prototype.isDisposed=function(){return this._disposed},e.prototype.dispose=function(){this._disposed||(this._disposed=!0,this._sensor.removeTarget(this._element))},Object.defineProperty(e.prototype,"sensor",{get:function(){return this._sensor},enumerable:!0,configurable:!0}),e.prototype.reset=function(){warn("resizeSensor.reset() is no longer needed and can be removed")},e}(),svgContainers=[],SVGContainer=function(){function e(a,i){var o=this;this._disposed=!1,this.autoResize=!0,this.nonExportableSprites=[],this._disposers=[],this.cssScale=1,this._printing=!1,this.htmlElement=a,i||(this._printing=!1,this.initSensor(),this._disposers.push(addEventListener$1(window,"beforeprint",function(){o._printing=!0})),this._disposers.push(addEventListener$1(window,"afterprint",function(){o._printing=!1}))),svgContainers.push(this);var c=document.createElement("div"),d=c.style;d.width="100%",d.height="100%",d.position="relative",a.appendChild(c),this.SVGContainer=c}return e.prototype.initSensor=function(){var a=this;this.resizeSensor&&this.resizeSensor.dispose();var i=function(){a.autoResize&&!a._printing&&a.measure()};this.resizeSensor=new ResizeSensor(this.htmlElement,i),this._disposers.push(this.resizeSensor)},e.prototype.measure=function(){var a=width(this.htmlElement),i=height(this.htmlElement),o=this.container;o&&((this.width!=a||this.height!=i)&&(this.width=a,this.height=i,a>0&&(o.maxWidth=a),i>0&&(o.maxHeight=i),fixPixelPerfect(this.SVGContainer)),o.maxWidth||(o.maxWidth=0),o.maxHeight||(o.maxHeight=0),this.cssScale=1,this.checkTransform(this.htmlElement))},Object.defineProperty(e.prototype,"container",{get:function(){return this._container},set:function(a){this._container=a,this.measure()},enumerable:!0,configurable:!0}),e.prototype.isDisposed=function(){return this._disposed},e.prototype.dispose=function(){this._disposed||remove(svgContainers,this),each$2(this._disposers,function(a){a.dispose()})},Object.defineProperty(e.prototype,"hideOverflow",{set:function(a){a?this.SVGContainer.style.overflow="hidden":this.SVGContainer.style.overflow=""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"modal",{get:function(){return hasValue(this._modal)||(this._modal=new Modal,this._modal.container=this.SVGContainer,this._disposers.push(this._modal)),this._modal},enumerable:!0,configurable:!0}),e.prototype.openModal=function(a,i){this.closeModal();var o=this.modal;return o.content=a,o.readerTitle=i||"",o.title=i||"",o.open(),o},e.prototype.closeModal=function(){this._modal&&this.modal.close()},Object.defineProperty(e.prototype,"popups",{get:function(){if(!hasValue(this._popups)){var a=new Popup;a.container=this.SVGContainer,this._popups=new ListTemplate(a),this._disposers.push(new ListDisposer(this._popups)),this._disposers.push(this._popups.template)}return this._popups},enumerable:!0,configurable:!0}),e.prototype.openPopup=function(a,i){var o=this.popups.create();return o.content=a,hasValue(i)&&(o.title=i),o.open(),o},e.prototype.closeAllPopups=function(){this.popups.each(function(a){a.close()})},Object.defineProperty(e.prototype,"readerAlertElement",{get:function(){if(!hasValue(this._readerAlertElement)){var a=document.createElement("div");a.setAttribute("role","alert"),a.style.zIndex="-100000",a.style.opacity="0",a.style.position="absolute",a.style.top="0",this.SVGContainer.appendChild(a),this._readerAlertElement=a}return this._readerAlertElement},enumerable:!0,configurable:!0}),e.prototype.readerAlert=function(a){this.readerAlertElement.innerHTML=a},e.prototype.checkTransform=function(a){if(window.getComputedStyle){if(a&&a.style){var i=window.getComputedStyle(a,null);if(i){var o=i.getPropertyValue("-webkit-transform")||i.getPropertyValue("-moz-transform")||i.getPropertyValue("-ms-transform")||i.getPropertyValue("-o-transform")||i.getPropertyValue("transform");if(o&&o!=="none"){var c=o.split("(")[1].split(")")[0].split(","),d=Number(c[0]),g=Number(c[1]),b=Math.sqrt(d*d+g*g);isNaN(b)||(this.cssScale*=b)}}}a.parentNode&&a.parentNode instanceof HTMLElement&&this.checkTransform(a.parentNode)}},e}(),Paper=function(){function e(a,i){this.container=a,this.id=i;var o=document.createElementNS(SVGNS,"svg");o.setAttribute("version","1.1"),o.setAttributeNS(XMLNS,"xmlns",SVGNS),o.setAttributeNS(XMLNS,"xmlns:xlink",XLINK),o.setAttribute("role","group"),this.container.appendChild(o),this.defs=document.createElementNS(SVGNS,"defs"),o.appendChild(this.defs),o.style.width="100%",o.style.height="100%",o.style.overflow="visible",this.svg=o}return e.prototype.add=function(a){return new AMElement(a)},e.prototype.addGroup=function(a){return new Group(a)},e.prototype.append=function(a){a&&this.svg.appendChild(a.node)},e.prototype.appendDef=function(a){a&&this.defs.appendChild(a.node)},e.prototype.foreignObject=function(){var a=new AMElement("foreignObject");return a},e.prototype.supportsForeignObject=function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Extensibility","1.1")},e}(),ghostPaper=null;function getGhostPaper(){if(ghostPaper===null){var e=document.createElement("div");e.hidden=!0,e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.zIndex="-1000000",document.body.appendChild(e);var a=new SVGContainer(e,!0);ghostPaper=new Paper(a.SVGContainer,"ghost")}return ghostPaper}var Pattern=function(e){__extends(a,e);function a(){var i=e.call(this)||this;i._elements=new List,i.properties={},i.className="Pattern",i.width=10,i.height=10,i.x=0,i.y=0,i.patternUnits="userSpaceOnUse";var o=new InterfaceColorSet;return i.backgroundFill=o.getFor("background"),i.backgroundOpacity=0,i.fillOpacity=1,i.fill=o.getFor("alternativeBackground"),i.stroke=o.getFor("alternativeBackground"),i.strokeOpacity=1,i.strokeWidth=1,i.shapeRendering="crispEdges",i.rotation=0,i.element=i.paper.addGroup("pattern"),i.id="pattern-"+registry.getUniqueId(),i.element.attr({id:i.id}),i._disposers.push(i.element),i._disposers.push(new ListDisposer(i._elements)),i.patternUnits=i.patternUnits,i.width=i.width,i.height=i.height,i.applyTheme(),i}return a.prototype.draw=function(){var i=this,o=this.element;if(o){o.removeChildNodes();var c=this.paper.add("rect");c.attr({width:this.width,height:this.height,"shape-rendering":"crispEdges",fill:this.backgroundFill.hex,"fill-opacity":this.backgroundOpacity,stroke:this.backgroundFill.hex,"stroke-opacity":0}),o.add(c),o.attr({x:this.x,y:this.y,width:this.width,height:this.height,stroke:this.stroke.hex,fill:this.fill.hex,"fill-opacity":this.fillOpacity,"stroke-opacity":this.strokeOpacity,"stroke-width":this.strokeWidth,"shape-rendering":this.shapeRendering,patternUnits:this.patternUnits,"stroke-dasharray":this.strokeDasharray}),each(this._elements.iterator(),function(d){d.rotation=i.rotation,d.rotationX=i.properties.rotationX,d.rotationY=i.properties.rotationY,i.element.add(d)})}},a.prototype.animate=function(i,o,c){return new Animation(this,i,o,c).start()},a.prototype.addElement=function(i){this._elements.push(i),this._disposers.push(i)},a.prototype.removeElement=function(i){this._elements.removeValue(i),this.removeDispose(i)},Object.defineProperty(a.prototype,"elements",{get:function(){return this._elements},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"fillOpacity",{get:function(){return this.properties.fillOpacity},set:function(i){this.properties.fillOpacity=i,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"fill",{get:function(){return this.properties.fill},set:function(i){this.properties.fill=i,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"backgroundFill",{get:function(){return this.properties.backgroundFill},set:function(i){this.properties.backgroundFill=i,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"backgroundOpacity",{get:function(){return this.properties.backgroundOpacity},set:function(i){this.properties.backgroundOpacity=i,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"stroke",{get:function(){return this.properties.stroke},set:function(i){this.properties.stroke=i,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"strokeOpacity",{get:function(){return this.properties.strokeOpacity},set:function(i){this.properties.strokeOpacity=i,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"strokeWidth",{get:function(){return this.properties.strokeWidth},set:function(i){this.properties.strokeWidth=i,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"shapeRendering",{get:function(){return this.properties.shapeRendering},set:function(i){this.properties.shapeRendering=i,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"rotation",{get:function(){return this.properties.rotation},set:function(i){this.properties.rotation=i,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"patternUnits",{get:function(){return this.properties.patternUnits},set:function(i){this.properties.patternUnits=i,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"width",{get:function(){return this.properties.width},set:function(i){this.properties.width=i,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"height",{get:function(){return this.properties.height},set:function(i){this.properties.height=i,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"x",{get:function(){return this.properties.x},set:function(i){this.properties.x=i,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"y",{get:function(){return this.properties.y},set:function(i){this.properties.y=i,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"paper",{get:function(){return this._paper?this._paper:getGhostPaper()},set:function(i){this._paper!=i&&(this._paper=i,this.draw(),i.appendDef(this.element))},enumerable:!0,configurable:!0}),a.prototype.copyFrom=function(i){var o=this;e.prototype.copyFrom.call(this,i),each$1(i.properties,function(c,d){o[c]=d})},Object.defineProperty(a.prototype,"animations",{get:function(){return this._animations||(this._animations=[],this._disposers.push(new AnimationDisposer(this._animations))),this._animations},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"strokeDasharray",{get:function(){return this.properties.strokeDashArray},set:function(i){this.properties.strokeDashArray=i,this.draw()},enumerable:!0,configurable:!0}),a.prototype.processConfig=function(i){if(i&&hasValue(i.elements)&&isArray$1(i.elements))for(var o=0,c=i.elements.length;o<c;o++){var d=i.elements[o];if(hasValue(d.type)){var g=this.createEntryInstance(d);g instanceof BaseObject&&(g.config=d),this.addElement(hasValue(d.typeProperty)?g[d.typeProperty]:g.element)}}e.prototype.processConfig.call(this,i)},a}(BaseObject);registry.registeredClasses.Pattern=Pattern;var LinearGradient=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i._stops=new List,i._rotation=0,i.className="LinearGradient",i._stops.events.on("setIndex",i.validate,i),i._stops.events.on("inserted",i.validate,i),i.element=i.paper.addGroup("linearGradient"),i.id="gradient-"+registry.getUniqueId(),i.element.attr({id:i.id}),i._disposers.push(i.element),i.applyTheme(),i}return a.prototype.validate=function(){var i=this,o=(this._rotation+90)*RADIANS,c=Math.round(50+Math.sin(o+Math.PI)*50)+"%",d=Math.round(50+Math.cos(o)*50)+"%",g=Math.round(50+Math.sin(o)*50)+"%",b=Math.round(50+Math.cos(o+Math.PI)*50)+"%",j=this.element;j.removeChildNodes(),j.attr({x1:c,x2:g,y1:d,y2:b}),each(indexed(this._stops.iterator()),function($){var rt=$[0],_e=$[1],st=_e.offset;isNumber$1(st)||(st=rt/(i._stops.length-1));var ut=i.paper.add("stop");hasValue(_e.color)&&ut.attr({"stop-color":_e.color.toString()}),isNumber$1(_e.opacity)&&ut.attr({"stop-opacity":_e.opacity}),isNumber$1(st)&&ut.attr({offset:st}),j.add(ut)})},a.prototype.clear=function(){this._stops.clear()},a.prototype.addColor=function(i,o,c){this._stops.push({color:i,opacity:o,offset:c})},Object.defineProperty(a.prototype,"stops",{get:function(){return this._stops},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"paper",{get:function(){return this._paper?this._paper:getGhostPaper()},set:function(i){this._paper!=i&&(this._paper=i,this.validate(),i.appendDef(this.element))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"rotation",{get:function(){return this._rotation},set:function(i){this._rotation=i,this.validate()},enumerable:!0,configurable:!0}),a.prototype.copyFrom=function(i){e.prototype.copyFrom.call(this,i),this.stops.copyFrom(i.stops),this._rotation=i.rotation},Object.defineProperty(a.prototype,"gradientUnits",{set:function(i){this.element.attr({gradientUnits:i})},enumerable:!0,configurable:!0}),a}(BaseObject);registry.registeredClasses.LinearGradient=LinearGradient;var RadialGradient=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i._stops=new List,i.element=i.paper.addGroup("radialGradient"),i.id="gradient-"+registry.getUniqueId(),i.element.attr({id:i.id}),i._disposers.push(i.element),i.applyTheme(),i}return a.prototype.draw=function(){var i=this,o=this.element;if(isNumber$1(this.cx)){var c=this.cx;c instanceof Percent&&(c=c.percent+"%"),o.attr({cx:c})}if(isNumber$1(this.cy)){var c=this.cy;c instanceof Percent&&(c=c.percent+"%"),o.attr({cy:c})}if(this.fx){var c=this.fx;c instanceof Percent&&(c=c.percent+"%"),o.attr({fx:c})}if(this.fy){var c=this.fy;c instanceof Percent&&(c=c.percent+"%"),o.attr({fy:c})}o.removeChildNodes(),each(indexed(this._stops.iterator()),function(d){var g=d[0],b=d[1],j=b.offset;isNumber$1(j)||(j=g/(i._stops.length-1));var $=i.paper.add("stop");hasValue(b.color)&&$.attr({"stop-color":b.color.toString()}),isNumber$1(b.opacity)&&$.attr({"stop-opacity":b.opacity}),isNumber$1(j)&&$.attr({offset:j}),o.add($)})},a.prototype.addColor=function(i,o,c){this._stops.push({color:i,opacity:o,offset:c}),this.draw()},Object.defineProperty(a.prototype,"paper",{get:function(){return this._paper?this._paper:getGhostPaper()},set:function(i){this._paper!=i&&(this._paper=i,this.draw(),i.appendDef(this.element))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"cx",{get:function(){return this._cx},set:function(i){this._cx=i,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"cy",{get:function(){return this._cy},set:function(i){this._cy=i,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"fx",{get:function(){return this._fx},set:function(i){this._fx=i,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"fy",{get:function(){return this._fy},set:function(i){this._fy=i,this.draw()},enumerable:!0,configurable:!0}),a.prototype.copyFrom=function(i){e.prototype.copyFrom.call(this,i),this.stops.copyFrom(i.stops),this.cx=i.cx,this.cy=i.cy,this.fx=i.fx,this.fy=i.fy},Object.defineProperty(a.prototype,"stops",{get:function(){return this._stops},enumerable:!0,configurable:!0}),a.prototype.clear=function(){this._stops.clear()},a}(BaseObject);registry.registeredClasses.RadialGradient=RadialGradient;var MouseCursorStyle=function(){function e(){}return e.grab=[{property:"cursor",value:"move"},{property:"cursor",value:"grab"},{property:"cursor",value:"-webkit-grab"}],e.grabbing=[{property:"cursor",value:"move"},{property:"cursor",value:"grabbing"},{property:"cursor",value:"-webkit-grabbing"}],e.pointer=[{property:"cursor",value:"pointer"}],e.default=[{property:"cursor",value:"default"}],e.horizontalResize=[{property:"cursor",value:"ew-resize"}],e.verticalResize=[{property:"cursor",value:"ns-resize"}],e.notAllowed=[{property:"cursor",value:"not-allowed"}],e.text=[{property:"cursor",value:"text"}],e}();const en={_decimalSeparator:".",_thousandSeparator:",",_percentPrefix:null,_percentSuffix:"%",_big_number_suffix_3:"k",_big_number_suffix_6:"M",_big_number_suffix_9:"G",_big_number_suffix_12:"T",_big_number_suffix_15:"P",_big_number_suffix_18:"E",_big_number_suffix_21:"Z",_big_number_suffix_24:"Y",_small_number_suffix_3:"m",_small_number_suffix_6:"μ",_small_number_suffix_9:"n",_small_number_suffix_12:"p",_small_number_suffix_15:"f",_small_number_suffix_18:"a",_small_number_suffix_21:"z",_small_number_suffix_24:"y",_byte_suffix_B:"B",_byte_suffix_KB:"KB",_byte_suffix_MB:"MB",_byte_suffix_GB:"GB",_byte_suffix_TB:"TB",_byte_suffix_PB:"PB",_date:"yyyy-MM-dd",_date_millisecond:"mm:ss SSS",_date_second:"HH:mm:ss",_date_minute:"HH:mm",_date_hour:"HH:mm",_date_day:"MMM dd",_date_week:"ww",_date_month:"MMM",_date_year:"yyyy",_duration_millisecond:"SSS",_duration_millisecond_second:"ss.SSS",_duration_millisecond_minute:"mm:ss SSS",_duration_millisecond_hour:"hh:mm:ss SSS",_duration_millisecond_day:"d'd' mm:ss SSS",_duration_millisecond_week:"d'd' mm:ss SSS",_duration_millisecond_month:"M'm' dd'd' mm:ss SSS",_duration_millisecond_year:"y'y' MM'm' dd'd' mm:ss SSS",_duration_second:"ss",_duration_second_minute:"mm:ss",_duration_second_hour:"hh:mm:ss",_duration_second_day:"d'd' hh:mm:ss",_duration_second_week:"d'd' hh:mm:ss",_duration_second_month:"M'm' dd'd' hh:mm:ss",_duration_second_year:"y'y' MM'm' dd'd' hh:mm:ss",_duration_minute:"mm",_duration_minute_hour:"hh:mm",_duration_minute_day:"d'd' hh:mm",_duration_minute_week:"d'd' hh:mm",_duration_minute_month:"M'm' dd'd' hh:mm",_duration_minute_year:"y'y' MM'm' dd'd' hh:mm",_duration_hour:"hh'h'",_duration_hour_day:"d'd' hh'h'",_duration_hour_week:"d'd' hh'h'",_duration_hour_month:"M'm' dd'd' hh'h'",_duration_hour_year:"y'y' MM'm' dd'd' hh'h'",_duration_day:"d'd'",_duration_day_week:"d'd'",_duration_day_month:"M'm' dd'd'",_duration_day_year:"y'y' MM'm' dd'd'",_duration_week:"w'w'",_duration_week_month:"w'w'",_duration_week_year:"w'w'",_duration_month:"M'm'",_duration_month_year:"y'y' MM'm'",_duration_year:"y'y'",_era_ad:"AD",_era_bc:"BC",A:"",P:"",AM:"",PM:"","A.M.":"","P.M.":"",January:"",February:"",March:"",April:"",May:"",June:"",July:"",August:"",September:"",October:"",November:"",December:"",Jan:"",Feb:"",Mar:"",Apr:"","May(short)":"May",Jun:"",Jul:"",Aug:"",Sep:"",Oct:"",Nov:"",Dec:"",Sunday:"",Monday:"",Tuesday:"",Wednesday:"",Thursday:"",Friday:"",Saturday:"",Sun:"",Mon:"",Tue:"",Wed:"",Thu:"",Fri:"",Sat:"",_dateOrd:function(e){var a="th";if(e<11||e>13)switch(e%10){case 1:a="st";break;case 2:a="nd";break;case 3:a="rd";break}return a},"Zoom Out":"",Play:"",Stop:"",Legend:"","Click, tap or press ENTER to toggle":"",Loading:"",Home:"",Chart:"","Serial chart":"","X/Y chart":"","Pie chart":"","Gauge chart":"","Radar chart":"","Sankey diagram":"","Flow diagram":"","Chord diagram":"","TreeMap chart":"","Force directed tree":"","Sliced chart":"",Series:"","Candlestick Series":"","OHLC Series":"","Column Series":"","Line Series":"","Pie Slice Series":"","Funnel Series":"","Pyramid Series":"","X/Y Series":"",Map:"","Press ENTER to zoom in":"","Press ENTER to zoom out":"","Use arrow keys to zoom in and out":"","Use plus and minus keys on your keyboard to zoom in and out":"",Export:"",Image:"",Data:"",Print:"","Press ENTER or use arrow keys to navigate":"","Click, tap or press ENTER to open":"","Click, tap or press ENTER to print.":"","Click, tap or press ENTER to export as %1.":"",'To save the image, right-click this link and choose "Save picture as..."':"",'To save the image, right-click thumbnail on the left and choose "Save picture as..."':"","(Press ESC to close this message)":"","Image Export Complete":"","Export operation took longer than expected. Something might have gone wrong.":"","Saved from":"",PNG:"",JPG:"",GIF:"",SVG:"",PDF:"",JSON:"",CSV:"",XLSX:"","Use TAB to select grip buttons or left and right arrows to change selection":"","Use left and right arrows to move selection":"","Use left and right arrows to move left selection":"","Use left and right arrows to move right selection":"","Use TAB select grip buttons or up and down arrows to change selection":"","Use up and down arrows to move selection":"","Use up and down arrows to move lower selection":"","Use up and down arrows to move upper selection":"","From %1 to %2":"","From %1":"","To %1":"","No parser available for file: %1":"","Error parsing file: %1":"","Unable to load file: %1":"","Invalid date":"",Close:"",Minimize:""};var Language=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.adapter=new Adapter(i),i._locale=en,i._defaultLocale=en,i.className="Language",hasValue(options.defaultLocale)&&(i.locale=options.defaultLocale),i.applyTheme(),i}return a.prototype.getLocale=function(i){return i==null&&(i=this._locale),this.adapter.apply("locale",{locale:i}).locale},a.prototype.translate=function(i,o){for(var c=[],d=2;d<arguments.length;d++)c[d-2]=arguments[d];o=this.getLocale(o);var g=i,b=this.getTranslations(o),j=b[i];if(j===null)g="";else if(hasValue(j))j&&(g=j);else if(o!==this._defaultLocale)return this.translate.apply(this,__spread([i,this._defaultLocale],c));if(c.length)for(var $=c.length,rt=0;rt<$;++rt)g=g.split("%"+(rt+1)).join(c[rt]);return this.adapter.apply("translate",{translation:g,locale:o}).translation},a.prototype.translateAny=function(i,o){for(var c=[],d=2;d<arguments.length;d++)c[d-2]=arguments[d];return this.translate.apply(this,__spread([i,o],c))},a.prototype.setTranslationAny=function(i,o,c){var d=c||this.locale;d[i]=o},a.prototype.translateEmpty=function(i,o){for(var c=[],d=2;d<arguments.length;d++)c[d-2]=arguments[d];var g=this.translate.apply(this,__spread([i,o],c));return g==i?"":g},a.prototype.translateFunc=function(i,o){o=this.getLocale(o);var c=this.getTranslations(o),d=c[i];return d??(o!==this._defaultLocale?this.translateFunc(i,this._defaultLocale):function(){return""})},a.prototype.translateAll=function(i,o){var c=this;return this.isDefault()?i:map$1(i,function(d){return c.translate(d,o)})},a.prototype.isDefault=function(){return this._defaultLocale===this._locale},Object.defineProperty(a.prototype,"locale",{get:function(){return this._locale},set:function(i){if(this._locale!=i&&(this._locale=i,this.events.isEnabled("localechanged"))){var o={type:"localechanged",locale:i,target:this};this.events.dispatchImmediately("localechanged",o)}},enumerable:!0,configurable:!0}),a.prototype.getTranslations=function(i){return this.adapter.apply("translations",{translations:i,locale:i}).translations},a}(BaseObjectEvents),TextFormatter=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.adapter=new Adapter(i),i.className="TextFormatter",i.applyTheme(),i}return a.prototype.debug=function(){},a.prototype.format=function(i,o){hasValue(o)||(o="svg");var c="";i=this.escape(i);var d=i.match(/\[([^\]]*?)\]/gm);if(!d)return this.wrap(i,"",o);for(var g=i.split(/\[[^\[\]]*\]/),b=0,j=g.length;b<j;b++){var $=g[b];if($!==""){$=this.adapter.apply("chunk",$);var rt="";b>0&&(rt=d[b-1].replace("[","").replace("]","")),c+=this.wrap($,rt,o)}}return c=this.unescape(c),this.cleanUp(c)},a.prototype.escape=function(i){return i.replace(/\[\[/g,registry.getPlaceholder("1")).replace(/([^\/\]]{1})\]\]/g,"$1"+registry.getPlaceholder("2")).replace(/\]\]/g,registry.getPlaceholder("2")).replace(/\{\{/g,registry.getPlaceholder("3")).replace(/\}\}/g,registry.getPlaceholder("4")).replace(/\'\'/g,registry.getPlaceholder("5"))},a.prototype.unescape=function(i){return i.replace(new RegExp(registry.getPlaceholder("1"),"g"),"[[").replace(new RegExp(registry.getPlaceholder("2"),"g"),"]]").replace(new RegExp(registry.getPlaceholder("3"),"g"),"{{").replace(new RegExp(registry.getPlaceholder("4"),"g"),"}}").replace(new RegExp(registry.getPlaceholder("5"),"g"),"''")},a.prototype.cleanUp=function(i){return i.replace(/\[\[/g,"[").replace(/\]\]/g,"]").replace(/\{\{/g,"{").replace(/\}\}/g,"}").replace(/\'\'/g,"'")},a.prototype.wrap=function(i,o,c){switch((o===""||o==="/")&&(o=""),c){case"html":return this.wrapHtml(i,this.translateStyleShortcuts(o));default:return this.wrapSvg(i,this.translateStyleShortcuts(o))}},a.prototype.wrapSvg=function(i,o){return o===""?"<tspan>"+i+"</tspan>":"<tspan style='"+o+"'>"+i+"</tspan>"},a.prototype.getSvgElement=function(i,o){var c=new AMElement("tspan");return c.textContent=i,o&&c.node.setAttribute("style",o),c},a.prototype.wrapHtml=function(i,o){return o===""?"<span>"+i+"</span>":"<span style='"+this.styleSvgToHtml(o)+"'>"+i+"</span>"},a.prototype.getHtmlElement=function(i,o){var c=document.createElement("span");return c.innerHTML=i,o&&c.setAttribute("style",o),c},a.prototype.styleSvgToHtml=function(i){return i=i.replace(/fill:/,"color:"),i},a.prototype.translateStyleShortcuts=function(i){if(i==""||i=="[ ]")return"";var o=registry.getCache("translateStyleShortcuts_"+i);if(o)return o;var c=i.match(/('[^']*')|("[^"]*")/gi);if(c)for(var d=0;d<c.length;d++)i=i.replace(c[d],c[d].replace(/['"]*/g,"").replace(/[ ]+/g,"+"));var g=i.match(/([\w\-]*:[\s]?[^;\s\]]*)|(\#[\w]{1,6})|([\w]+)|(\/)/gi);if(!g)return i;for(var d=0;d<g.length;d++)g[d].match(/^bold$/i)?g[d]="font-weight:"+g[d]:g[d]=="/"?g[d]="":g[d].match(/:/)?g[d]=g[d].replace(/\+/g," "):g[d]="fill:"+g[d];var b=g.join(";");return registry.setCache("translateStyleShortcuts_"+i,b),b},a.prototype.chunk=function(i,o,c){o===void 0&&(o=!1),c===void 0&&(c=!1);var d=[];i=this.escape(i);for(var g=o?i.split("'"):[i],b=0;b<g.length;b++){var j=g[b];if(j!=="")if(b%2===0){j=j.replace(/\]\[/g,"]"+PLACEHOLDER+"["),j=j.replace(/\[\]/g,"[ ]");for(var $=j.split(/[\[\]]+/),rt=0;rt<$.length;rt++){var _e=this.cleanUp(this.unescape($[rt]));_e!==PLACEHOLDER&&_e!==""&&(rt%2===0?d.push({type:"value",text:this.adapter.apply("chunk",_e)}):d.push({type:c?"value":"format",text:"["+_e+"]"}))}}else for(var $=j.split(/[\[\]]+/),rt=0;rt<$.length;rt++){var _e=this.cleanUp(this.unescape($[rt]));_e!==""&&(rt%2===0?d.push({type:"text",text:_e}):this.isImage(_e)?d.push({type:"image",text:"["+_e+"]"}):d.push({type:"format",text:"["+_e+"]"}))}}return d},a.prototype.isImage=function(i){return!!i.match(/img[ ]?:/)},a}(BaseObject),formatter;function getTextFormatter(){return formatter==null&&(formatter=new TextFormatter),formatter}registry.registeredClasses.TextFormatter=TextFormatter;var NumberFormatter=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i._negativeBase=0,i._numberFormat="#,###.#####",i._outputFormat="svg",i._smallNumberThreshold=1,i._forceLTR=!1,i.className="NumberFormatter",i.applyTheme(),i}return a.prototype.dispose=function(){e.prototype.dispose.call(this),this.language&&this.language.dispose()},Object.defineProperty(a.prototype,"language",{get:function(){return this._language||(this.sprite?this._language=this.sprite.language:this._language=new Language),this._language},set:function(i){this._language=i},enumerable:!0,configurable:!0}),a.prototype.format=function(i,o,c){(typeof o>"u"||isString$1(o)&&o.toLowerCase()==="number")&&(o=this._numberFormat);var d,g=Number(i);if(isObject$1(o))try{return this.intlLocales?new Intl.NumberFormat(this.intlLocales,o).format(g):new Intl.NumberFormat(void 0,o).format(g)}catch{return"Invalid"}else{o=cleanFormat(o);var b=this.parseFormat(o,this.language),j=void 0;g>this._negativeBase?j=b.positive:g<this._negativeBase?j=b.negative:j=b.zero,hasValue(c)&&!j.mod&&(j=clone(j),j.decimals.active=g==0?0:c),d=j.template.split(PLACEHOLDER).join(this.applyFormat(g,j))}return this.forceLTR&&(d="‎"+d),d},a.prototype.parseFormat=function(i,o){var c=this,d=this.getCache(i);if(hasValue(d))return d;var g={positive:{thousands:{active:-1,passive:-1,interval:-1,separator:o.translateEmpty("_thousandSeparator")},decimals:{active:-1,passive:-1,separator:o.translateEmpty("_decimalSeparator")},template:"",source:"",parsed:!1},negative:{thousands:{active:-1,passive:-1,interval:-1,separator:o.translateEmpty("_thousandSeparator")},decimals:{active:-1,passive:-1,separator:o.translateEmpty("_decimalSeparator")},template:"",source:"",parsed:!1},zero:{thousands:{active:-1,passive:-1,interval:-1,separator:o.translateEmpty("_thousandSeparator")},decimals:{active:-1,passive:-1,separator:o.translateEmpty("_decimalSeparator")},template:"",source:"",parsed:!1}};i=i.replace("||",PLACEHOLDER2);var b=i.split("|");return g.positive.source=b[0],typeof b[2]>"u"?g.zero=g.positive:g.zero.source=b[2],typeof b[1]>"u"?g.negative=g.positive:g.negative.source=b[1],each$1(g,function(j,$){if(!$.parsed){if(typeof c.getCache($.source)<"u"){g[j]=c.getCache($.source);return}var rt=$.source;rt.toLowerCase()==="number"&&(rt=isString$1(c._numberFormat)?c._numberFormat:"#,###.#####");for(var _e=getTextFormatter().chunk(rt,!0),st=0;st<_e.length;st++){var ut=_e[st];if(ut.text=ut.text.replace(PLACEHOLDER2,"|"),ut.type==="value"){var gt=ut.text.match(/[#0.,]+[ ]?[abespABESP%!]?[abespABESP‰!]?/);if(gt)if(gt===null||gt[0]==="")$.template+=ut.text;else{var yt=gt[0].match(/[abespABESP%‰!]{2}|[abespABESP%‰]{1}$/);yt&&($.mod=yt[0].toLowerCase(),$.modSpacing=!!gt[0].match(/[ ]{1}[abespABESP%‰!]{1}$/));var Pt=gt[0].split(".");if(Pt[0]!==""){$.thousands.active=(Pt[0].match(/0/g)||[]).length,$.thousands.passive=(Pt[0].match(/\#/g)||[]).length+$.thousands.active;var wt=Pt[0].split(",");wt.length===1||($.thousands.interval=getValue(wt.pop()).length,$.thousands.interval===0&&($.thousands.interval=-1))}typeof Pt[1]>"u"||($.decimals.active=(Pt[1].match(/0/g)||[]).length,$.decimals.passive=(Pt[1].match(/\#/g)||[]).length+$.decimals.active),$.template+=ut.text.split(gt[0]).join(PLACEHOLDER)}}else $.template+=ut.text}c.setCache($.source,$),$.parsed=!0}}),this.setCache(i,g),g},a.prototype.applyFormat=function(i,o){var c=i<0;i=Math.abs(i);var d="",g="",b=o.mod?o.mod.split(""):[];if(b.indexOf("b")!==-1){var j=this.applyPrefix(i,this.bytePrefixes,b.indexOf("!")!==-1);i=j[0],d=j[1],g=j[2],o.modSpacing&&(g=" "+g)}else if(b.indexOf("a")!==-1){var $=this.applyPrefix(i,i<this.smallNumberThreshold?this.smallNumberPrefixes:this.bigNumberPrefixes,b.indexOf("!")!==-1);i=$[0],d=$[1],g=$[2],o.modSpacing&&(g=" "+g)}else if(b.indexOf("p")!==-1){var rt=Math.min(i.toString().length+2,21);i=parseFloat(i.toPrecision(rt)),d=this.language.translate("_percentPrefix")||"",g=this.language.translate("_percentSuffix")||"",d==""&&g==""&&(g="%")}else if(b.indexOf("%")!==-1){var rt=min$1(i.toString().length+2,21);i*=100,i=parseFloat(i.toPrecision(rt)),g="%"}else if(b.indexOf("‰")!==-1){var rt=min$1(i.toString().length+3,21);i*=1e3,i=parseFloat(i.toPrecision(rt)),g="‰"}if(b.indexOf("e")!==-1){var _e=void 0;o.decimals.passive>=0?_e=i.toExponential(o.decimals.passive).split("e"):_e=i.toExponential().split("e"),i=Number(_e[0]),g="e"+_e[1],o.modSpacing&&(g=" "+g)}else if(o.decimals.passive===0)i=Math.round(i);else if(o.decimals.passive>0){var st=Math.pow(10,o.decimals.passive);i=Math.round(i*st)/st}var ut="",gt=numberToString(i).split("."),yt=gt[0];if(yt.length<o.thousands.active&&(yt=Array(o.thousands.active-yt.length+1).join("0")+yt),o.thousands.interval>0){for(var Pt=[],wt=yt.split("").reverse().join(""),Ct=0,At=yt.length;Ct<=At;Ct+=o.thousands.interval){var Tt=wt.substr(Ct,o.thousands.interval).split("").reverse().join("");Tt!==""&&Pt.unshift(Tt)}yt=Pt.join(o.thousands.separator)}ut+=yt,gt.length===1&&gt.push("");var kt=gt[1];return kt.length<o.decimals.active&&(kt+=Array(o.decimals.active-kt.length+1).join("0")),kt!==""&&(ut+=o.decimals.separator+kt),ut===""&&(ut="0"),i!==0&&c&&b.indexOf("s")===-1&&(ut="-"+ut),d&&(ut=d+ut),g&&(ut+=g),ut},a.prototype.applyPrefix=function(i,o,c){c===void 0&&(c=!1);for(var d=i,g="",b="",j=!1,$=1,rt=0,_e=o.length;rt<_e;rt++)o[rt].number<=i&&(o[rt].number===0?d=0:(d=i/o[rt].number,$=o[rt].number),g=o[rt].prefix,b=o[rt].suffix,j=!0);return!j&&c&&o.length&&i!=0&&(d=i/o[0].number,g=o[0].prefix,b=o[0].suffix,j=!0),j&&(d=parseFloat(d.toPrecision(min$1($.toString().length+Math.floor(d).toString().replace(/[^0-9]*/g,"").length,21)))),[d,g,b]},a.prototype.invalidateSprite=function(){this.sprite&&this.sprite.invalidate()},Object.defineProperty(a.prototype,"numberFormat",{get:function(){return this._numberFormat},set:function(i){this._numberFormat=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"intlLocales",{get:function(){return this._intlLocales},set:function(i){this._intlLocales=i,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"negativeBase",{get:function(){return this._negativeBase},set:function(i){this._negativeBase=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"bigNumberPrefixes",{get:function(){return hasValue(this._bigNumberPrefixes)||(this._bigNumberPrefixes=[{number:1e3,suffix:this.language.translate("_big_number_suffix_3")},{number:1e6,suffix:this.language.translate("_big_number_suffix_6")},{number:1e9,suffix:this.language.translate("_big_number_suffix_9")},{number:1e12,suffix:this.language.translate("_big_number_suffix_12")},{number:1e15,suffix:this.language.translate("_big_number_suffix_15")},{number:1e18,suffix:this.language.translate("_big_number_suffix_18")},{number:1e21,suffix:this.language.translate("_big_number_suffix_21")},{number:1e24,suffix:this.language.translate("_big_number_suffix_24")}]),this._bigNumberPrefixes},set:function(i){this._bigNumberPrefixes=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"smallNumberPrefixes",{get:function(){return hasValue(this._smallNumberPrefixes)||(this._smallNumberPrefixes=[{number:1e-24,suffix:this.language.translate("_small_number_suffix_24")},{number:1e-21,suffix:this.language.translate("_small_number_suffix_21")},{number:1e-18,suffix:this.language.translate("_small_number_suffix_18")},{number:1e-15,suffix:this.language.translate("_small_number_suffix_15")},{number:1e-12,suffix:this.language.translate("_small_number_suffix_12")},{number:1e-9,suffix:this.language.translate("_small_number_suffix_9")},{number:1e-6,suffix:this.language.translate("_small_number_suffix_6")},{number:.001,suffix:this.language.translate("_small_number_suffix_3")}]),this._smallNumberPrefixes},set:function(i){this._smallNumberPrefixes=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"smallNumberThreshold",{get:function(){return this._smallNumberThreshold},set:function(i){this._smallNumberThreshold=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"bytePrefixes",{get:function(){return hasValue(this._bytePrefixes)||(this._bytePrefixes=[{number:1,suffix:this.language.translate("_byte_suffix_B")},{number:1024,suffix:this.language.translate("_byte_suffix_KB")},{number:1048576,suffix:this.language.translate("_byte_suffix_MB")},{number:1073741824,suffix:this.language.translate("_byte_suffix_GB")},{number:1099511627776,suffix:this.language.translate("_byte_suffix_TB")},{number:0x4000000000000,suffix:this.language.translate("_byte_suffix_PB")}]),this._bytePrefixes},set:function(i){this._bytePrefixes=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"outputFormat",{get:function(){return this._outputFormat},set:function(i){this._outputFormat=i.toLowerCase(),this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"forceLTR",{get:function(){return this._forceLTR},set:function(i){this._forceLTR=i,this.invalidateSprite()},enumerable:!0,configurable:!0}),a.prototype.escape=function(i){return i.replace("||",PLACEHOLDER2)},a.prototype.unescape=function(i){return i.replace(PLACEHOLDER2,"|")},a}(BaseObject);registry.registeredClasses.NumberFormatter=NumberFormatter;var DateFormatter=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i._dateFormat="yyyy-MM-dd",i._inputDateFormat="yyyy-MM-dd",i._utc=!1,i.timezoneMinutes=0,i._firstDayOfWeek=1,i.months=["January","February","March","April","May","June","July","August","September","October","November","December"],i.monthsShort=["Jan","Feb","Mar","Apr","May(short)","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],i.weekdays=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],i.weekdaysShort=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],i._outputFormat="svg",i.capitalize=!0,i.className="DateFormatter",i.applyTheme(),i}return Object.defineProperty(a.prototype,"language",{get:function(){return this._language},set:function(i){this._language=i,this.dateFormat=this._language.translate("_date")},enumerable:!0,configurable:!0}),a.prototype.format=function(i,o,c){this.language||(this.sprite?this.language=this.sprite.language:this.language=new Language),(typeof o>"u"||o==="")&&(o=this._dateFormat);var d,g;if(isString$1(i)?g=this.parse(i):g=anyToDate(i),isObject$1(o))try{return this.intlLocales?new Intl.DateTimeFormat(this.intlLocales,o).format(g):new Intl.DateTimeFormat(void 0,o).format(g)}catch{return"Invalid"}else{o=cleanFormat(o);var b=this.parseFormat(o);if(hasValue(this.timezoneOffset)?g.setMinutes(g.getMinutes()+g.getTimezoneOffset()-this.timezoneOffset):hasValue(this.timezone)&&c!==!1&&(g=setTimezone(g,this.timezone)),!isNumber$1(g.getTime()))return this.language.translate("Invalid date");d=this.applyFormat(g,b,this.language),this.capitalize&&(d=d.replace(/^.{1}/,d.substr(0,1).toUpperCase()))}return d},a.prototype.parseFormat=function(i){var o=this.getCache(i);if(hasValue(o))return o;for(var c={template:"",parts:[]},d=getTextFormatter().chunk(i,!0),g=0;g<d.length;g++){var b=d[g];if(b.type==="value"){b.text.match(/^date$/i)&&isString$1(this._dateFormat)&&(b.text=this._dateFormat);var j=b.text.match(/G|yyyy|yyy|yy|y|YYYY|YYY|YY|Y|u|q|MMMMM|MMMM|MMM|MM|M|ww|w|W|dd|d|DDD|DD|D|F|g|EEEEE|EEEE|EEE|EE|E|eeeee|eeee|eee|ee|e|aaa|aa|a|hh|h|HH|H|KK|K|kk|k|mm|m|ss|s|SSS|SS|S|A|zzzz|zzz|zz|z|ZZ|Z|t|x|nnn|nn|n|i|I/g);if(j)for(var $=0;$<j.length;$++)c.parts.push(j[$]),b.text=b.text.replace(j[$],PLACEHOLDER)}c.template+=b.text}return this.setCache(i,c),c},a.prototype.applyFormat=function(i,o,c){var d=o.template,g,b,j,$,rt,_e,st,ut,gt=i.getTimezoneOffset(),yt=i.getTime();this.utc?(g=i.getUTCFullYear(),b=i.getUTCMonth(),j=i.getUTCDay(),$=i.getUTCDate(),rt=i.getUTCHours(),_e=i.getUTCMinutes(),st=i.getUTCSeconds(),ut=i.getUTCMilliseconds()):(g=i.getFullYear(),b=i.getMonth(),j=i.getDay(),$=i.getDate(),rt=i.getHours(),_e=i.getMinutes(),st=i.getSeconds(),ut=i.getMilliseconds());for(var Pt=0,wt=o.parts.length;Pt<wt;Pt++){var Ct="";switch(o.parts[Pt]){case"G":Ct=c.translate(g<0?"_era_bc":"_era_ad");break;case"yyyy":Ct=Math.abs(g).toString(),g<0&&(Ct+=c.translate("_era_bc"));break;case"yyy":case"yy":case"y":Ct=Math.abs(g).toString().substr(-o.parts[Pt].length),g<0&&(Ct+=c.translate("_era_bc"));break;case"YYYY":case"YYY":case"YY":case"Y":var At=getWeek(i),Tt=g;At==1&&j>4&&Tt--,o.parts[Pt]=="YYYY"?Ct=Math.abs(Tt).toString():Ct=Math.abs(Tt).toString().substr(-o.parts[Pt].length),Tt<0&&(Ct+=c.translate("_era_bc"));break;case"u":break;case"q":Ct=""+Math.ceil((i.getMonth()+1)/3);break;case"MMMMM":Ct=c.translate(this.months[b]).substr(0,1);break;case"MMMM":Ct=c.translate(this.months[b]);break;case"MMM":Ct=c.translate(this.monthsShort[b]);break;case"MM":Ct=padString(b+1,2,"0");break;case"M":Ct=(b+1).toString();break;case"ww":Ct=padString(getWeek(i,this.utc),2,"0");break;case"w":Ct=getWeek(i,this.utc).toString();break;case"W":Ct=getMonthWeek(i,this.utc).toString();break;case"dd":Ct=padString($,2,"0");break;case"d":Ct=$.toString();break;case"DD":case"DDD":Ct=padString(getYearDay(i,this.utc).toString(),o.parts[Pt].length,"0");break;case"D":Ct=getYearDay(i,this.utc).toString();break;case"F":break;case"g":break;case"t":Ct=c.translateFunc("_dateOrd").call(this,$);break;case"E":Ct=(j||7).toString();break;case"EE":Ct=padString((j||7).toString(),2,"0");break;case"EEE":case"eee":Ct=c.translate(this.weekdaysShort[j]);break;case"EEEE":case"eeee":Ct=c.translate(this.weekdays[j]);break;case"EEEEE":case"eeeee":Ct=c.translate(this.weekdays[j]).substr(0,1);break;case"e":case"ee":Ct=(j-this.firstDayOfWeek+1).toString(),o.parts[Pt]=="ee"&&(Ct=padString(Ct,2,"0"));break;case"a":rt>=12?Ct=c.translate("PM"):Ct=c.translate("AM");break;case"aa":rt>=12?Ct=c.translate("P.M."):Ct=c.translate("A.M.");break;case"aaa":rt>=12?Ct=c.translate("P"):Ct=c.translate("A");break;case"h":Ct=get12Hours(rt).toString();break;case"hh":Ct=padString(get12Hours(rt),2,"0");break;case"H":Ct=rt.toString();break;case"HH":Ct=padString(rt,2,"0");break;case"K":Ct=get12Hours(rt,0).toString();break;case"KK":Ct=padString(get12Hours(rt,0),2,"0");break;case"k":Ct=(rt+1).toString();break;case"kk":Ct=padString(rt+1,2,"0");break;case"m":Ct=_e.toString();break;case"mm":Ct=padString(_e,2,"0");break;case"s":Ct=st.toString();break;case"ss":Ct=padString(st,2,"0");break;case"S":case"SS":case"SSS":Ct=Math.round(ut/1e3*Math.pow(10,o.parts[Pt].length)).toString();break;case"x":Ct=yt.toString();break;case"n":case"nn":case"nnn":Ct=padString(ut,o.parts[Pt].length,"0");break;case"z":Ct=getTimeZone(i,!1,!1,this.utc);break;case"zz":Ct=getTimeZone(i,!0,!1,this.utc);break;case"zzz":Ct=getTimeZone(i,!1,!0,this.utc);break;case"zzzz":Ct=getTimeZone(i,!0,!0,this.utc);break;case"Z":case"ZZ":var kt=Math.abs(gt)/60,It=Math.floor(kt),Lt=kt*60-It*60;this.utc&&(It=0,Lt=0),o.parts[Pt]=="Z"?(Ct="GMT",Ct+=gt>0?"-":"+",Ct+=padString(It,2)+":"+padString(Lt,2)):(Ct=gt>0?"-":"+",Ct+=padString(It,2)+padString(Lt,2));break;case"i":Ct=i.toISOString();break;case"I":Ct=i.toUTCString();break}d=d.replace(PLACEHOLDER,Ct)}return d},a.prototype.parse=function(i,o){if(hasValue(o)||(o=this.inputDateFormat),i instanceof Date)return i;if(typeof i=="number")return new Date(i);typeof i!="string"&&(i=i.toString()),this.language||(this.sprite?this.language=this.sprite.language:this.language=new Language);var c,d="";o=cleanFormat(o),o=o.substr(0,i.length);for(var g=this.parseFormat(o),b={year:-1,year3:-1,year2:-1,year1:-1,month:-1,monthShort:-1,monthLong:-1,weekdayShort:-1,weekdayLong:-1,day:-1,yearDay:-1,week:-1,hourBase0:-1,hour12Base0:-1,hourBase1:-1,hour12Base1:-1,minute:-1,second:-1,millisecond:-1,millisecondDigits:-1,am:-1,zone:-1,timestamp:-1,iso:-1},j={year:1970,month:0,day:1,hour:0,minute:0,second:0,millisecond:0,timestamp:null,offset:0,utc:this.utc},$=0,rt=0,_e=0;_e<g.parts.length;_e++){switch(rt=_e+$+1,g.parts[_e]){case"yyyy":case"YYYY":d+="([0-9]{4})",b.year=rt;break;case"yyy":case"YYY":d+="([0-9]{3})",b.year3=rt;break;case"yy":case"YY":d+="([0-9]{2})",b.year2=rt;break;case"y":case"Y":d+="([0-9]{1})",b.year1=rt;break;case"MMMM":d+="("+this.getStringList(this.months).join("|")+")",b.monthLong=rt;break;case"MMM":d+="("+this.getStringList(this.monthsShort).join("|")+")",b.monthShort=rt;break;case"MM":case"M":d+="([0-9]{2}|[0-9]{1})",b.month=rt;break;case"ww":case"w":d+="([0-9]{2}|[0-9]{1})",b.week=rt;break;case"dd":case"d":d+="([0-9]{2}|[0-9]{1})",b.day=rt;break;case"DDD":case"DD":case"D":d+="([0-9]{3}|[0-9]{2}|[0-9]{1})",b.yearDay=rt;break;case"dddd":d+="("+this.getStringList(this.weekdays).join("|")+")",b.weekdayLong=rt;break;case"ddd":d+="("+this.getStringList(this.weekdaysShort).join("|")+")",b.weekdayShort=rt;break;case"aaa":case"aa":case"a":d+="("+this.getStringList(["AM","PM","A.M.","P.M.","A","P"]).join("|")+")",b.am=rt;break;case"hh":case"h":d+="([0-9]{2}|[0-9]{1})",b.hour12Base1=rt;break;case"HH":case"H":d+="([0-9]{2}|[0-9]{1})",b.hourBase0=rt;break;case"KK":case"K":d+="([0-9]{2}|[0-9]{1})",b.hour12Base0=rt;break;case"kk":case"k":d+="([0-9]{2}|[0-9]{1})",b.hourBase1=rt;break;case"mm":case"m":d+="([0-9]{2}|[0-9]{1})",b.minute=rt;break;case"ss":case"s":d+="([0-9]{2}|[0-9]{1})",b.second=rt;break;case"SSS":case"SS":case"S":d+="([0-9]{3}|[0-9]{2}|[0-9]{1})",b.millisecond=rt,b.millisecondDigits=g.parts[_e].length;break;case"nnn":case"nn":case"n":d+="([0-9]{3}|[0-9]{2}|[0-9]{1})",b.millisecond=rt;break;case"x":d+="([0-9]{1,})",b.timestamp=rt;break;case"Z":d+="GMT([-+]+[0-9]{2}:[0-9]{2})",b.zone=rt;break;case"ZZ":d+="([\\-+]+[0-9]{2}[0-9]{2})",b.zone=rt;break;case"i":d+="([0-9]{4})-?([0-9]{2})-?([0-9]{2})T?([0-9]{2}):?([0-9]{2}):?([0-9]{2}).?([0-9]{0,3})([zZ]|[+-][0-9]{2}:?[0-9]{2}|$)",b.iso=rt,$+=7;break;case"G":case"YYYY":case"YYY":case"YY":case"Y":case"MMMMM":case"W":case"EEEEE":case"EEEE":case"EEE":case"EE":case"E":case"eeeee":case"eeee":case"eee":case"ee":case"e":case"zzzz":case"zzz":case"zz":case"z":case"t":$--;break}d+="[^0-9]*"}var st=new RegExp(d),ut=i.match(st);if(ut){if(b.year>-1&&(j.year=parseInt(ut[b.year])),b.year3>-1){var gt=parseInt(ut[b.year3]);gt+=1e3,j.year=gt}if(b.year2>-1){var gt=parseInt(ut[b.year2]);gt>50?gt+=1e3:gt+=2e3,j.year=gt}if(b.year1>-1){var gt=parseInt(ut[b.year1]);gt=Math.floor(new Date().getFullYear()/10)*10+gt,j.year=gt}if(b.monthLong>-1&&(j.month=this.resolveMonth(ut[b.monthLong])),b.monthShort>-1&&(j.month=this.resolveShortMonth(ut[b.monthShort])),b.month>-1&&(j.month=parseInt(ut[b.month])-1),b.week>-1&&b.day===-1&&(j.month=0,j.day=getDayFromWeek(parseInt(ut[b.week]),j.year,1,this.utc)),b.day>-1&&(j.day=parseInt(ut[b.day])),b.yearDay>-1&&(j.month=0,j.day=parseInt(ut[b.yearDay])),b.hourBase0>-1&&(j.hour=parseInt(ut[b.hourBase0])),b.hourBase1>-1&&(j.hour=parseInt(ut[b.hourBase1])-1),b.hour12Base0>-1){var gt=parseInt(ut[b.hour12Base0]);gt==11&&(gt=0),b.am>-1&&!this.isAm(ut[b.am])&&(gt+=12),j.hour=gt}if(b.hour12Base1>-1){var gt=parseInt(ut[b.hour12Base1]);gt==12&&(gt=0),b.am>-1&&!this.isAm(ut[b.am])&&(gt+=12),j.hour=gt}if(b.minute>-1&&(j.minute=parseInt(ut[b.minute])),b.second>-1&&(j.second=parseInt(ut[b.second])),b.millisecond>-1){var gt=parseInt(ut[b.millisecond]);b.millisecondDigits==2?gt*=10:b.millisecondDigits==1&&(gt*=100),j.millisecond=gt}if(b.timestamp>-1){j.timestamp=parseInt(ut[b.timestamp]);var yt=new Date(j.timestamp);j.year=yt.getUTCFullYear(),j.month=yt.getUTCMonth(),j.day=yt.getUTCDate(),j.hour=yt.getUTCHours(),j.minute=yt.getUTCMinutes(),j.second=yt.getUTCSeconds(),j.millisecond=yt.getUTCMilliseconds()}b.zone>-1&&(j.offset=this.resolveTimezoneOffset(new Date(j.year,j.month,j.day),ut[b.zone])),b.iso>-1&&(j.year=toNumber(ut[b.iso+0]),j.month=toNumber(ut[b.iso+1])-1,j.day=toNumber(ut[b.iso+2]),j.hour=toNumber(ut[b.iso+3]),j.minute=toNumber(ut[b.iso+4]),j.second=toNumber(ut[b.iso+5]),j.millisecond=toNumber(ut[b.iso+6]),ut[b.iso+7]=="Z"||ut[b.iso+7]=="z"?j.utc=!0:ut[b.iso+7]!=""&&(j.offset=this.resolveTimezoneOffset(new Date(j.year,j.month,j.day),ut[b.iso+7]))),j.utc?c=new Date(Date.UTC(j.year,j.month,j.day,j.hour,j.minute,j.second,j.millisecond)):c=new Date(j.year,j.month,j.day,j.hour,j.minute+j.offset,j.second,j.millisecond)}else c=new Date(i);return c},a.prototype.resolveTimezoneOffset=function(i,o){var c=o.match(/([+\-]?)([0-9]{2}):?([0-9]{2})/);if(c){var d=getValue(o.match(/([+\-]?)([0-9]{2}):?([0-9]{2})/)),g=d[1],b=d[2],j=d[3],$=parseInt(b)*60+parseInt(j);g=="+"&&($*=-1);var rt=(i||new Date).getTimezoneOffset(),_e=$-rt;return _e}return 0},a.prototype.resolveMonth=function(i){var o=this.months.indexOf(i);return o>-1||this.language&&!this.language.isDefault()&&(o=this.language.translateAll(this.months).indexOf(i),o>-1)?o:0},a.prototype.resolveShortMonth=function(i){var o=this.monthsShort.indexOf(i);return o>-1||(o=this.months.indexOf(i),o>-1)||this.language&&!this.language.isDefault()&&(o=this.language.translateAll(this.monthsShort).indexOf(i),o>-1)?o:0},a.prototype.isAm=function(i){var o=this.getStringList(["AM","A.M.","A"]);return o.indexOf(i.toUpperCase())>-1},a.prototype.invalidateSprite=function(){this.sprite&&this.sprite.invalidate()},a.prototype.getStringList=function(i){for(var o=[],c=0;c<i.length;c++)this.language?o.push(escapeForRgex(this.language.translate(i[c]))):o.push(escapeForRgex(i[c]));return o},Object.defineProperty(a.prototype,"dateFormat",{get:function(){return this._dateFormat},set:function(i){this._dateFormat=i,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"inputDateFormat",{get:function(){return this._inputDateFormat},set:function(i){this._inputDateFormat=i,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"intlLocales",{get:function(){return this._intlLocales},set:function(i){this._intlLocales=i,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"utc",{get:function(){return this._utc},set:function(i){this._utc=i,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"timezoneOffset",{get:function(){return this._timezoneOffset},set:function(i){this._timezoneOffset!=i&&(this._timezoneOffset=i,this.invalidateSprite())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"timezone",{get:function(){return this._timezone},set:function(i){this._timezone!=i&&(this._timezone=i,this.timezoneMinutes=getTimezoneMinutes(i),this.invalidateSprite())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"firstDayOfWeek",{get:function(){return this._firstDayOfWeek},set:function(i){this._firstDayOfWeek=i,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"outputFormat",{get:function(){return this._outputFormat},set:function(i){this._outputFormat=i.toLowerCase(),this.invalidateSprite()},enumerable:!0,configurable:!0}),a}(BaseObject);registry.registeredClasses.DateFormatter=DateFormatter;var DurationFormatter=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i._negativeBase=0,i._baseUnit="second",i._outputFormat="svg",i._unitValues={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,year:31536e6},i._unitAliases={Y:"y",D:"d",H:"h",K:"h",k:"h",n:"S"},i.className="DurationFormatter",i.applyTheme(),i}return a.prototype.format=function(i,o,c){this.language||(this.sprite?this.language=this.sprite.language:this.language=new Language);var d=c||this._baseUnit;(typeof o>"u"||o==="")&&(hasValue(this.durationFormat)?o=this.durationFormat:o=this.getFormat(toNumber(i),null,d)),o=cleanFormat(o);var g=this.parseFormat(o,d),b=Number(i),j;b>this._negativeBase?j=g.positive:b<this._negativeBase?j=g.negative:j=g.zero;var $=this.applyFormat(b,j);return j.color!==""&&(this._outputFormat==="svg"?$="<tspan fill='"+j.color+"'>"+$+"</tspan>":this._outputFormat==="html"&&($="<span style='color: "+j.color+";'>"+$+"</span>")),$},a.prototype.parseFormat=function(i,o){var c=this,d=this.getCache(i);if(hasValue(d))return d;var g=o||this._baseUnit,b={positive:{color:"",template:"",parts:[],source:"",baseUnit:g,parsed:!1,absolute:!1},negative:{color:"",template:"",parts:[],source:"",baseUnit:g,parsed:!1,absolute:!1},zero:{color:"",template:"",parts:[],source:"",baseUnit:g,parsed:!1,absolute:!1}};i=i.replace("||",PLACEHOLDER2);var j=i.split("|");return b.positive.source=j[0],typeof j[2]>"u"?b.zero=b.positive:b.zero.source=j[2],typeof j[1]>"u"?b.negative=b.positive:b.negative.source=j[1],each$1(b,function($,rt){if(!rt.parsed){if(typeof c.getCache(rt.source)<"u"){b[$]=c.getCache(rt.source);return}var _e=rt.source,st=[];st=rt.source.match(/^\[([^\]]*)\]/),st&&st.length&&st[0]!==""&&(_e=rt.source.substr(st[0].length),rt.color=st[1]);for(var ut=getTextFormatter().chunk(_e,!0),gt=0;gt<ut.length;gt++){var yt=ut[gt];if(yt.text=yt.text.replace(PLACEHOLDER2,"|"),yt.type==="value"){yt.text.match(/[yYMdDwhHKkmsSn]+a/)&&(rt.absolute=!0,yt.text=yt.text.replace(/([yYMdDwhHKkmsSn]+)a/,"$1"));var Pt=yt.text.match(/y+|Y+|M+|d+|D+|w+|h+|H+|K+|k+|m+|s+|S+|n+/g);if(Pt)for(var wt=0;wt<Pt.length;wt++)hasValue(Pt[wt])||(Pt[wt]=c._unitAliases[Pt[wt]]),rt.parts.push(Pt[wt]),yt.text=yt.text.replace(Pt[wt],PLACEHOLDER)}rt.template+=yt.text}c.setCache(rt.source,rt),rt.parsed=!0}}),this.setCache(i,b),b},a.prototype.applyFormat=function(i,o){var c=!o.absolute&&i<this._negativeBase;i=Math.abs(i);for(var d=this.toTimeStamp(i,o.baseUnit),g=o.template,b=0,j=o.parts.length;b<j;b++){var $=o.parts[b],rt=this.toTimeUnit($.substr(0,1)),_e=$.length,st=Math.floor(d/this._unitValues[rt]);g=g.replace(PLACEHOLDER,padString(st,_e,"0")),d-=st*this._unitValues[rt]}return c&&(g="-"+g),g},a.prototype.toTimeStamp=function(i,o){return i*this._unitValues[o]},a.prototype.toTimeUnit=function(i){switch(i){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year"}},a.prototype.invalidateSprite=function(){this.sprite&&this.sprite.invalidate()},Object.defineProperty(a.prototype,"baseUnit",{get:function(){return this._baseUnit},set:function(i){this._baseUnit=i,this.invalidateSprite()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"outputFormat",{get:function(){return this._outputFormat},set:function(i){this._outputFormat=i.toLowerCase(),this.invalidateSprite()},enumerable:!0,configurable:!0}),a.prototype.getFormat=function(i,o,c){if(hasValue(this.durationFormat))return this.durationFormat;if(c||(c=this.baseUnit),hasValue(o)&&i!=o){i=Math.abs(i),o=Math.abs(o);var d=this.getValueUnit(max$1(i,o),c);return this.durationFormats[c][d]}else{var g=this.getValueUnit(i,c);return this.durationFormats[c][g]}},a.prototype.getValueUnit=function(i,o){o||(o=this.baseUnit);var c,d=this.getMilliseconds(i,o);return eachContinue$1(this._unitValues,function(g,b){if(g==o||c){var j=d/b;if(j<=1)return c||(c=g),!1;c=g}return!0}),c},a.prototype.getMilliseconds=function(i,o){return o||(o=this.baseUnit),i*this._unitValues[o]},Object.defineProperty(a.prototype,"durationFormat",{get:function(){return this._durationFormat},set:function(i){this._durationFormat!=i&&(this._durationFormat=i,this.invalidateSprite())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"durationFormats",{get:function(){return this._durationFormats||(this._durationFormats={millisecond:{millisecond:this.language.translate("_duration_millisecond"),second:this.language.translate("_duration_millisecond_second"),minute:this.language.translate("_duration_millisecond_minute"),hour:this.language.translate("_duration_millisecond_hour"),day:this.language.translate("_duration_millisecond_day"),week:this.language.translate("_duration_millisecond_week"),month:this.language.translate("_duration_millisecond_month"),year:this.language.translate("_duration_millisecond_year")},second:{second:this.language.translate("_duration_second"),minute:this.language.translate("_duration_second_minute"),hour:this.language.translate("_duration_second_hour"),day:this.language.translate("_duration_second_day"),week:this.language.translate("_duration_second_week"),month:this.language.translate("_duration_second_month"),year:this.language.translate("_duration_second_year")},minute:{minute:this.language.translate("_duration_minute"),hour:this.language.translate("_duration_minute_hour"),day:this.language.translate("_duration_minute_day"),week:this.language.translate("_duration_minute_week"),month:this.language.translate("_duration_minute_month"),year:this.language.translate("_duration_minute_year")},hour:{hour:this.language.translate("_duration_hour"),day:this.language.translate("_duration_hour_day"),week:this.language.translate("_duration_hour_week"),month:this.language.translate("_duration_hour_month"),year:this.language.translate("_duration_hour_year")},day:{day:this.language.translate("_duration_day"),week:this.language.translate("_duration_day_week"),month:this.language.translate("_duration_day_month"),year:this.language.translate("_duration_day_year")},week:{week:this.language.translate("_duration_week"),month:this.language.translate("_duration_week_month"),year:this.language.translate("_duration_week_year")},month:{month:this.language.translate("_duration_month"),year:this.language.translate("_duration_month_year")},year:{year:this.language.translate("_duration_year")}}),this._durationFormats},set:function(i){this._durationFormats=i,this.invalidateSprite()},enumerable:!0,configurable:!0}),a}(BaseObject);registry.registeredClasses.DurationFormatter=DurationFormatter;var rules=new Dictionary;function exportCSS(e,a){var i=a||"amexport",o=new InterfaceColorSet,c=rules.insertKeyIfEmpty(i,function(){var d=new MultiDisposer([new StyleRule(e,"."+i+"-menu *",{"box-sizing":"border-box"}),new StyleRule(e,"."+i+"-menu-level-0",{position:"absolute",top:"5px",right:"5px"}),new StyleRule(e,"."+i+"-menu-level-0."+i+"-left",{right:"auto",left:"5px"}),new StyleRule(e,"."+i+"-menu-level-0."+i+"-right",{right:"5px",left:"auto"}),new StyleRule(e,"."+i+"-menu-level-0."+i+"-top",{top:"5px",bottom:"auto"}),new StyleRule(e,"."+i+"-menu-level-0."+i+"-bottom",{top:"auto",bottom:"5px"}),new StyleRule(e,"."+i+"-item."+i+"-item-level-0",{opacity:"0.3",width:"30px","min-height":"30px",transition:"all 100ms ease-in-out"}),new StyleRule(e,"div:hover > div > ."+i+"-menu ."+i+"-item."+i+"-item-level-0, ."+i+"-item."+i+"-item-level-0.active",{opacity:"0.9"}),new StyleRule(e,"."+i+"-item."+i+"-item-level-0 > a",{padding:"0","text-align":"center",overflow:"hidden"}),new StyleRule(e,"."+i+"-item."+i+"-item-level-0:before",{display:"block"}),new StyleRule(e,"."+i+"-item",{position:"relative",display:"block",opacity:"0","z-index":"1","border-radius":"3px","background-color":o.getFor("secondaryButton").hex,padding:"0",margin:"1px 1px 0 0",color:o.getFor("secondaryButton").alternative.hex,transition:"all 100ms ease-in-out, opacity 0.5s ease 0.5s"}),new StyleRule(e,"."+i+"-left ."+i+"-item",{margin:"1px 0 0 1px"}),new StyleRule(e,"."+i+"-item:hover, ."+i+"-item.active",{background:o.getFor("secondaryButtonHover").hex,color:o.getFor("secondaryButtonText").hex}),new StyleRule(e,"."+i+"-item > ."+i+"-menu",{position:"absolute",top:"-1px",right:"0","margin-right":"100%"}),new StyleRule(e,"."+i+"-left ."+i+"-item > ."+i+"-menu",{left:"0",right:"auto","margin-left":"100%","margin-right":"auto"}),new StyleRule(e,"."+i+"-right ."+i+"-item > ."+i+"-menu",{left:"auto",right:"0","margin-left":"auto","margin-right":"100%"}),new StyleRule(e,"."+i+"-top ."+i+"-item > ."+i+"-menu",{top:"-1px",bottom:"auto"}),new StyleRule(e,"."+i+"-bottom ."+i+"-item > ."+i+"-menu",{top:"auto",bottom:"0"}),new StyleRule(e,"."+i+"-item > ."+i+"-menu",{display:"none"}),new StyleRule(e,"."+i+"-item:hover > ."+i+"-menu, ."+i+"-item.active > ."+i+"-menu",{display:"block"}),new StyleRule(e,"."+i+"-item:hover > ."+i+"-menu > ."+i+"-item, ."+i+"-item.active > ."+i+"-menu > ."+i+"-item",{opacity:"1"}),new StyleRule(e,"."+i+"-menu",{display:"block","list-style":"none",margin:"0",padding:"0"}),new StyleRule(e,"."+i+"-label",{display:"block",cursor:"default",padding:"0.5em 1em"}),new StyleRule(e,"."+i+"-icon",{display:"block",cursor:"default",padding:"0.2em 0.4em",width:"1.2em",height:"1.2em","min-width":"32px","min-height":"32px",margin:"auto auto","border-radius":"3px"}),new StyleRule(e,"."+i+"-item-level-0 > ."+i+"-icon",{padding:"0.1em 0.2em"}),new StyleRule(e,"."+i+"-clickable",{cursor:"pointer"})]);return new CounterDisposer(function(){rules.removeKey(i),d.dispose()})});return c.increment()}var Validatable=function(e){__extends(a,e);function a(){var i=e!==null&&e.apply(this,arguments)||this;return i._validateDisposer=null,i}return a.prototype.invalidate=function(){this._validateDisposer===null&&(this._validateDisposer=registry.events.on("exitframe",this.validate,this))},a.prototype.validate=function(){this._validateDisposer!==null&&(this._validateDisposer.dispose(),this._validateDisposer=null)},a.prototype.dispose=function(){this._validateDisposer!==null&&(this._validateDisposer.dispose(),this._validateDisposer=null),e.prototype.dispose.call(this)},a}(BaseObjectEvents),ExportMenu=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.adapter=new Adapter(i),i.closeDelay=1e3,i.closeOnClick=!0,i._language=new MutableValueDisposer,i._menuTag="ul",i._itemTag="li",i._labelTag="a",i._iconTag="img",i._classPrefix="amexport",i._defaultStyles=!0,i._align="right",i._verticalAlign="top",i._tabindex=0,i._ignoreNextClose=!1,i._items=[{label:"...",menu:[{label:"Image",menu:[{type:"png",label:"PNG"},{type:"jpg",label:"JPG"},{type:"svg",label:"SVG"},{type:"pdf",label:"PDF"}]},{label:"Data",menu:[{type:"json",label:"JSON"},{type:"csv",label:"CSV"},{type:"xlsx",label:"XLSX"},{type:"html",label:"HTML"},{type:"pdfdata",label:"PDF"}]},{label:"Print",type:"print"}]}],i.className="ExportMenu",i._disposers.push(i._language),i.invalidate(),i.applyTheme(),i}return a.prototype.validate=function(){this.draw(),e.prototype.validate.call(this)},a.prototype.draw=function(){var i=this;this._element?(this._element.innerHTML="",this._element.className=this.getMenuItemClass(0)):this._element=this.createMenuElement(0),this.defaultStyles&&(this._element.style.display="none"),getValue(this._container).appendChild(this._element);for(var o=this.adapter.apply("items",{items:this._items}).items,c=o.length,d=0;d<c;d++)this.drawBranch(this._element,o[d],0);this._element=this.adapter.apply("menuElement",{menuElement:this._element}).menuElement,this._disposers.push(getInteraction().body.events.on("down",function(g){g.pointer.touch||(i._ignoreNextClose=!1),i.close()})),this._disposers.push(getInteraction().body.events.on("keydown",function(g){var b=keyboard.getEventKey(g.event);switch(b){case"esc":i.close();break;case"up":case"down":case"left":case"right":i._currentSelection&&g.event.preventDefault(),i.moveSelection(b);break}})),this.defaultStyles&&this.loadDefaultCSS()},a.prototype.drawBranch=function(i,o,c){var d=this;if(o=this.adapter.apply("branch",{branch:o,level:c}).branch,o.unsupported!==!0){o.ascendants||(o.ascendants=new List);var g=o.type,b=this.createItemElement(c,g),j;o.icon?(j=this.createIconElement(c,g),j.src=o.icon,(o.label||o.title)&&(j.title=o.title||o.label)):o.svg?(j=this.createSvgElement(c,g,o.svg),(o.label||o.title)&&(j.title=o.title||o.label)):(j=this.createLabelElement(c,g),j.innerHTML=o.label?this.language.translate(o.label):"",o.title&&(j.title=o.title));var $=this.getReaderLabel(o,j.innerHTML);j.setAttribute("aria-label",$),b.appendChild(j),o.interactions=getInteraction().getInteraction(b),o.element=b,this.typeClickable(g)&&(o.interactions.events.on("hit",function(Pt){if(d.events.isEnabled("hit")&&!d.isDisposed()){var wt={type:"hit",event:Pt.event,target:d,branch:o};d.events.dispatchImmediately("hit",wt)}}),o.interactions.events.on("keyup",function(Pt){if(keyboard.isKey(Pt.event,"enter")&&d.events.isEnabled("enter")){var wt={type:"enter",event:Pt.event,target:d,branch:o};d.events.dispatchImmediately("enter",wt)}}));{var rt=this.getSubMenu(o);rt!=null&&(o.interactions.events.on("keyup",function(Pt){keyboard.isKey(Pt.event,"enter")&&(d.selectBranch(rt[0]),d.setFocus(rt[0]))}),o.interactions.events.on("hit",function(Pt){d.selectBranch(o)}))}o.interactions.events.on("over",function(Pt){if(Pt.pointer.touch&&(d._ignoreNextClose=!0),d.selectBranch(o),d.events.isEnabled("over")){var wt={type:"over",event:Pt.event,target:d,branch:o};d.events.dispatchImmediately("over",wt)}}),o.interactions.events.on("out",function(Pt){if(!d.isDisposed()&&(Pt.pointer.touch||d.delayUnselectBranch(o),d.events.isEnabled("out"))){var wt={type:"out",event:Pt.event,target:d,branch:o};d.events.dispatchImmediately("out",wt)}}),o.interactions.events.on("focus",function(Pt){d.selectBranch(o)}),o.interactions.events.on("blur",function(Pt){d.delayUnselectBranch(o)});var _e=c+1;if(o.menu){var st=this.createMenuElement(_e);o.submenuElement=st;for(var ut=o.menu.length,gt=0;gt<ut;gt++){var yt=new List;o.menu[gt].ascendants=yt,o.ascendants.length&&yt.copyFrom(o.ascendants),yt.push(o),this.drawBranch(st,o.menu[gt],_e)}if(st.innerHTML=="")return;b.appendChild(st)}o.hidden&&this.hideBranch(o),o.id&&b.setAttribute("id",o.id),o.color&&(b.style.backgroundColor=o.color.hex),i.appendChild(b)}},a.prototype.createMenuElement=function(i){var o=document.createElement(this.menuTag);return o.className=this.getMenuItemClass(i),i===0?o.setAttribute("role","menubar"):o.setAttribute("role","menu"),o},a.prototype.getMenuItemClass=function(i){var o=this.classPrefix+"-menu "+this.classPrefix+"-menu-level-"+i;return i===0&&(o+=" "+this.classPrefix+"-menu-root "+this.classPrefix+"-"+this.align+" "+this.classPrefix+"-"+this.verticalAlign),this.adapter.apply("menuClass",{className:o,level:i}).className},a.prototype.createItemElement=function(i,o){var c=document.createElement(this.itemTag),d=this.classPrefix+"-item "+this.classPrefix+"-item-level-"+i+" "+this.classPrefix+"-item-"+(o||"blank");return c.className=this.adapter.apply("itemClass",{className:d,level:i,type:o}).className,c.setAttribute("role","menuitem"),c.setAttribute("tabindex",this.tabindex.toString()),c},a.prototype.createLabelElement=function(i,o){var c=document.createElement(this.labelTag),d=this.classPrefix+"-label "+this.classPrefix+"-label-level-"+i+" "+this.classPrefix+"-item-"+(o||"blank");return this.typeClickable(o)&&(d+=" "+this.classPrefix+"-clickable"),c.className=this.adapter.apply("labelClass",{className:d,level:i,type:o}).className,c},a.prototype.createIconElement=function(i,o){var c=document.createElement(this.iconTag),d=this.classPrefix+"-icon "+this.classPrefix+"-icon-level-"+i+" "+this.classPrefix+"-item-"+(o||"blank");return this.typeClickable(o)&&(d+=" "+this.classPrefix+"-clickable"),c.className=this.adapter.apply("labelClass",{className:d,level:i,type:o}).className,c.setAttribute("tabindex",this.tabindex.toString()),c.setAttribute("role","menuitem"),c},a.prototype.createSvgElement=function(i,o,c){var d=new DOMParser,g=d.parseFromString(c,"image/svg+xml").documentElement,b=this.classPrefix+"-icon "+this.classPrefix+"-icon-level-"+i+" "+this.classPrefix+"-item-"+(o||"blank");return this.typeClickable(o)&&(b+=" "+this.classPrefix+"-clickable"),g.setAttribute("class",this.adapter.apply("labelClass",{className:b,level:i,type:o}).className),g.setAttribute("tabindex",this.tabindex.toString()),g.setAttribute("role","menuitem"),g},a.prototype.dispose=function(){this._disposed||(e.prototype.dispose.call(this),this._element&&this._element.parentNode&&this._element.parentNode.removeChild(this._element))},a.prototype.typeClickable=function(i){return hasValue(i)},a.prototype.hasSubMenu=function(i){return!!(i.menu&&i.menu.length)},a.prototype.getSubMenu=function(i){if(i.menu&&i.menu.length)return i.menu},a.prototype.getReaderLabel=function(i,o){return o=stripTags(o),i.ascendants.length==0?(o=o=="..."?this.language.translate("Export"):o,o+=" ["+this.language.translate("Press ENTER or use arrow keys to navigate")+"]"):this.hasSubMenu(i)?o+=" ["+this.language.translate("Click, tap or press ENTER to open")+"]":i.type=="print"?o=this.language.translate("Click, tap or press ENTER to print."):this.typeClickable(i.type)&&(o=this.language.translate("Click, tap or press ENTER to export as %1.",void 0,o)),this.adapter.apply("rederLabel",{label:o,branch:i}).label},Object.defineProperty(a.prototype,"container",{get:function(){return this._container},set:function(i){this._container=i,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"items",{get:function(){return this._items},set:function(i){this._items=i,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"tag",{set:function(i){this._menuTag=i,this._itemTag=i=="ul"?"li":"div",this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"menuTag",{get:function(){return this.adapter.apply("menuTag",{tag:this._menuTag}).tag},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"itemTag",{get:function(){return this.adapter.apply("itemTag",{tag:this._itemTag}).tag},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"labelTag",{get:function(){return this.adapter.apply("labelTag",{tag:this._labelTag}).tag},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"iconTag",{get:function(){return this.adapter.apply("iconTag",{tag:this._iconTag}).tag},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"align",{get:function(){return this.adapter.apply("align",{align:this._align}).align},set:function(i){this._align=i,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"verticalAlign",{get:function(){return this.adapter.apply("verticalAlign",{verticalAlign:this._verticalAlign}).verticalAlign},set:function(i){this._verticalAlign=i,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"classPrefix",{get:function(){return this.adapter.apply("classPrefix",{classPrefix:this._classPrefix}).classPrefix},set:function(i){this._classPrefix=i,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"defaultStyles",{get:function(){return this.adapter.apply("defaultStyles",{defaultStyles:this._defaultStyles}).defaultStyles},set:function(i){this._defaultStyles!=i&&(this._defaultStyles=i,i&&this.loadDefaultCSS()),this.invalidate()},enumerable:!0,configurable:!0}),a.prototype.loadDefaultCSS=function(){this._disposers.push(exportCSS(getShadowRoot(this.container),this.classPrefix)),this._element&&(this._element.style.display="")},Object.defineProperty(a.prototype,"tabindex",{get:function(){return this.adapter.apply("tabindex",{tabindex:this._tabindex}).tabindex},set:function(i){this._tabindex=i,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"language",{get:function(){var i=this,o=this._language.get();return o==null&&(o=new Language,this._language.set(o,o.events.on("localechanged",function(c){i.invalidate()}))),o},set:function(i){var o=this;this._language.set(i,i.events.on("localechanged",function(c){o.invalidate()})),this.invalidate()},enumerable:!0,configurable:!0}),a.prototype.close=function(){var i=this;if(!this.isDisposed()){if(this._ignoreNextClose){this._ignoreNextClose=!1;return}if(this.closeOnClick&&(this._element.style.pointerEvents="none",setTimeout(function(){i._element.style.pointerEvents="auto"},100)),this._currentSelection&&(this.setBlur(this._currentSelection),this._currentSelection=void 0),this._element)for(var o=this._element.getElementsByClassName("active"),c=o.length,d=c-1;d>=0;d--)o[d]&&removeClass(o[d],"active");this.events.dispatchImmediately("closed",{type:"closed",target:this})}},a.prototype.selectBranch=function(i){var o=this;if(!this.isDisposed()&&(i.closeTimeout&&(this.removeDispose(i.closeTimeout),i.closeTimeout=void 0),addClass(i.element,"active"),i.submenuElement&&i.submenuElement.setAttribute("aria-expanded","true"),this._currentSelection&&this._currentSelection!==i&&this._currentSelection.ascendants&&each(concat(fromArray([this._currentSelection]),this._currentSelection.ascendants.iterator()),function(d){!i.ascendants.contains(d)&&i!==d&&o.unselectBranch(d,!0)}),each(i.ascendants.iterator(),function(d){d.closeTimeout&&(o.removeDispose(d.closeTimeout),d.closeTimeout=void 0),addClass(d.element,"active")}),this._currentSelection=i,this.events.isEnabled("branchselected"))){var c={type:"branchselected",target:this,branch:i};this.events.dispatchImmediately("branchselected",c)}},a.prototype.unselectBranch=function(i,o){if(!this.isDisposed()&&(removeClass(i.element,"active"),i.submenuElement&&i.submenuElement.removeAttribute("aria-expanded"),this._currentSelection==i&&(this._currentSelection=void 0),this.events.isEnabled("branchunselected"))){var c={type:"branchunselected",target:this,branch:i};this.events.dispatchImmediately("branchunselected",c)}},a.prototype.delayUnselectBranch=function(i,o){var c=this;this.isDisposed()||(i.closeTimeout&&(this.removeDispose(i.closeTimeout),i.closeTimeout=void 0),i.closeTimeout=this.setTimeout(function(){c.unselectBranch(i,o)},this.closeDelay),o!==!0&&i.ascendants&&each(i.ascendants.iterator(),function(d){c.delayUnselectBranch(d,!0)}))},a.prototype.moveSelection=function(i){if(!this.isDisposed()&&this._currentSelection){var o;if(i=="up")o=this.getPrevSibling(this._currentSelection);else if(i=="down")o=this.getNextSibling(this._currentSelection);else if(i=="left"&&this.align=="right"||i=="right"&&this.align=="left"){var c=this.getSubMenu(this._currentSelection);c!=null&&(o=c[0])}else(i=="right"&&this.align=="right"||i=="left"&&this.align=="left")&&(o=this.getParentItem(this._currentSelection));o&&o!==this._currentSelection&&(this.selectBranch(o),this.setFocus(o),this._currentSelection=o)}},a.prototype.getSiblings=function(i){var o=this.getParentItem(i);return o&&o.menu?o.menu:[]},a.prototype.getParentItem=function(i){if(i.ascendants&&i.ascendants.length)return i.ascendants.getIndex(i.ascendants.length-1)},a.prototype.getNextSibling=function(i){var o=this.getSiblings(i);if(o.length>1){var c=o.indexOf(i)+1;return c=o.length==c?0:c,o[c].unsupported?this.getNextSibling(o[c]):o[c]}else return i},a.prototype.getPrevSibling=function(i){var o=this.getSiblings(i);if(o.length>1){var c=o.indexOf(i)-1;return c=c==-1?o.length-1:c,o[c].unsupported?this.getPrevSibling(o[c]):o[c]}else return i},a.prototype.setFocus=function(i){if(i.interactions)try{i.interactions.element.focus()}catch{}},a.prototype.setBlur=function(i){if(i.interactions)try{i.interactions.element.blur()}catch{}},a.prototype.hideBranch=function(i){i.element.style.display="none"},a.prototype.showBranch=function(i){i.element.style.display=""},Object.defineProperty(a.prototype,"element",{get:function(){return this._element},enumerable:!0,configurable:!0}),a}(Validatable);function load(e,a,i){return new Promise(function(o,c){var d=hasValue(i)&&i.responseType=="blob",g=new XMLHttpRequest;if(g.onload=function(){if(g.status===200){var $=void 0,rt;if(d){rt=g.response,readBlob(rt).then(function(st){var ut={xhr:g,error:!1,response:st,blob:rt,type:g.getResponseHeader("Content-Type"),target:a};o(ut)});return}else $=g.responseText||g.response;var _e={xhr:g,error:!1,response:$,blob:rt,type:g.getResponseHeader("Content-Type"),target:a};o(_e)}else c({xhr:g,error:!0,type:g.getResponseHeader("Content-Type"),target:a})},g.onerror=function(){c({xhr:g,error:!0,type:g.getResponseHeader("Content-Type"),target:a})},g.open("GET",e,!0),i&&i.withCredentials&&(g.withCredentials=!0),hasValue(i)){if(hasValue(i.requestHeaders))for(var b=0;b<i.requestHeaders.length;b++){var j=i.requestHeaders[b];g.setRequestHeader(j.key,j.value)}hasValue(i.responseType)&&(g.responseType=i.responseType)}g.send()})}function readBlob(e){return new Promise(function(a,i){var o=new FileReader;o.onload=function(c){a(o.result)},o.onerror=function(c){i(c)},o.readAsText(e)})}const Net=Object.freeze(Object.defineProperty({__proto__:null,load,readBlob},Symbol.toStringTag,{value:"Module"}));var pdfmakePromise;function _pdfmake(){return __awaiter(this,void 0,void 0,function(){var e,a,i,o;return __generator(this,function(c){switch(c.label){case 0:return[4,Promise.all([__vitePreload(()=>import("./pdfmake-9GsXApZS.js").then(d=>d.p),__vite__mapDeps([])),__vitePreload(()=>import("./vfs_fonts-lRrH9To1.js"),__vite__mapDeps([]))])];case 1:return e=c.sent(),a=e[0].default||e[0],i=e[1].default||e[1],o=window,o.pdfMake=o.pdfMake||{},o.pdfMake.vfs=i,a.vfs=i,[2,a]}})})}var fontFamilySrcRegexp=/src: ([^;]+);/;function supportsBlobUri(){return window.navigator.msSaveOrOpenBlob!=null}function blobToDataUri(e){return new Promise(function(a,i){var o=new FileReader;o.onload=function(c){a(o.result)},o.onerror=function(c){i(c)},o.readAsDataURL(e)})}function getCssRules(e){return __awaiter(this,void 0,void 0,function(){var a;return __generator(this,function(i){switch(i.label){case 0:a=e.sheet,i.label=1;case 1:return i.trys.push([1,2,,4]),[2,a.cssRules];case 2:return i.sent(),[4,new Promise(function(o,c){e.addEventListener("load",function(){o(a.cssRules)},!0),e.addEventListener("error",function(d){c(d)},!0),setTimeout(function(){c(new Error("Timeout while waiting for <style> to load"))},1e4)})];case 3:return[2,i.sent()];case 4:return[2]}})})}function loadStylesheet(e,a,i){return __awaiter(this,void 0,void 0,function(){var o,c,d,g;return __generator(this,function(b){switch(b.label){case 0:return b.trys.push([0,2,,3]),[4,load(a)];case 1:return o=b.sent(),[3,3];case 2:return c=b.sent(),console.error("Failed to load stylesheet",a,c),[2];case 3:d=e.createElement("style"),d.textContent=o.response,options.nonce!=""&&d.setAttribute("nonce",options.nonce),e.head.appendChild(d),b.label=4;case 4:return b.trys.push([4,,7,8]),[4,getCssRules(d)];case 5:return g=b.sent(),[4,eachStylesheet(e,a,g,i)];case 6:return b.sent(),[3,8];case 7:return e.head.removeChild(d),[7];case 8:return[2]}})})}function eachStylesheet(e,a,i,o){return __awaiter(this,void 0,void 0,function(){var c,d,g,b,j;return __generator(this,function($){switch($.label){case 0:for(c=[],d=i.length,g=0;g<d;g++)b=i[g],b.type===CSSRule.IMPORT_RULE?(j=b.href,j&&(j=joinUrl(a,j),c.push(loadStylesheet(e,j,o)))):o(a,b);return c.length?[4,Promise.all(c)]:[3,2];case 1:$.sent(),$.label=2;case 2:return[2]}})})}function eachStylesheets(e){return __awaiter(this,void 0,void 0,function(){var a,i;return __generator(this,function(o){switch(o.label){case 0:a=document.createElement("iframe"),a.src="about:blank",a.setAttribute("title",""),document.head.appendChild(a),o.label=1;case 1:return o.trys.push([1,,3,4]),i=a.contentDocument,[4,Promise.all(map$1(document.styleSheets,function(c){var d=c.href;return d==null?eachStylesheet(i,location.href,c.cssRules,e):(d=joinUrl(location.href,d),loadStylesheet(i,d,e))}))];case 2:return o.sent(),[3,4];case 3:return document.head.removeChild(a),[7];case 4:return[2]}})})}var Export=function(e){__extends(a,e);function a(i){var o=e.call(this)||this;return o.adapter=new Adapter(o),o._formatOptions=new Dictionary,o._extraSprites=[],o._validateSprites=[],o.dataFieldsOrder=[],o._dynamicDataFields=!0,o._removedObjects=new List,o._hiddenObjects=[],o._objectsAlreadyHidden=!1,o._filePrefix="amCharts",o.useWebFonts=!0,o.useRetina=!0,o.useSimplifiedExport=!0,o.timeoutDelay=2e3,o._exportRunning=!1,o._prevHasData=!1,o._container=i,o.className="Export",o._formatOptions.setKey("png",{}),o._formatOptions.setKey("jpg",{quality:.8}),o._formatOptions.setKey("gif",{}),o._formatOptions.setKey("svg",{}),o._formatOptions.setKey("pdf",{fontSize:14,imageFormat:"png",align:"left",addURL:!0,addColumnNames:!0}),o._formatOptions.setKey("json",{indent:2,useLocale:!0}),o._formatOptions.setKey("csv",{addColumnNames:!0,emptyAs:"",addBOM:!0}),o._formatOptions.setKey("xlsx",{addColumnNames:!0,useLocale:!0,emptyAs:""}),o._formatOptions.setKey("html",{addColumnNames:!0,emptyAs:""}),o._formatOptions.setKey("pdfdata",{fontSize:14,imageFormat:"png",addURL:!0,addColumnNames:!0,emptyAs:""}),o._formatOptions.setKey("print",{delay:500,printMethod:"iframe"}),o.adapter.add("options",function(c){var d=o._formatOptions.getKey(c.type);return c.options?c.options=merge$1(d,c.options):c.options=d,c}),o.applyTheme(),o.dispatchImmediately("inited"),o}return Object.defineProperty(a.prototype,"menu",{get:function(){return this._menu},set:function(i){var o=this;this._menu&&this.removeDispose(this._menu),this._menu=i,this._menu.container=this.container,this._menu.language=this._language,this._menu.adapter.add("branch",function(c){return c.branch.unsupported=!o.typeSupported(c.branch.type),c}),this._menu.events.on("hit",function(c){o.export(c.branch.type,c.branch.options),o.menu.close()}),this._menu.events.on("enter",function(c){o.export(c.branch.type,c.branch.options),o.menu.close()}),this._menu.events.on("over",function(c){o._disablePointers()}),this._menu.events.on("out",function(c){setTimeout(function(){o._releasePointers()},10)}),this.dispatchImmediately("menucreated"),this._menu.adapter.add("classPrefix",function(c){return c.classPrefix=options.classNamePrefix+c.classPrefix,c}),this._disposers.push(this._menu)},enumerable:!0,configurable:!0}),a.prototype.typeSupported=function(i){var o=!0,c=this.getFormatOptions(i);return hasValue(c)&&c.disabled?o=!1:i==="pdf"||(i==="xlsx"?o=!!this._hasData():(i=="print"&&!window.print||["json","csv","html","pdfdata"].indexOf(i)!==-1&&!this._hasData())&&(o=!1)),this.adapter.apply("supported",{supported:o,type:i}).supported},a.prototype._hasData=function(){return this.data&&this.data.length},a.prototype._getFunction=function(i){switch(i){case"png":case"gif":case"jpg":return this.getImage;case"svg":return this.getSVG;case"pdf":case"pdfdata":return this.getPDF;case"xlsx":return this.getExcel;case"csv":return this.getCSV;case"json":return this.getJSON;case"html":return this.getHTML;case"print":return this.getPrint;default:return this.unsupported}},a.prototype.export=function(i,o){return __awaiter(this,void 0,void 0,function(){var c,d,g,b,j,$=this;return __generator(this,function(rt){switch(rt.label){case 0:return i=="custom"?(this.handleCustom(o),[2,!0]):(this._exportRunning=!0,this.events.isEnabled("exportstarted")&&(c={type:"exportstarted",target:this,format:i,options:o},this.events.dispatchImmediately("exportstarted",c)),this.showPreloader(),this.timeoutDelay&&(this.hideTimeout(),this._timeoutTimeout=this.setTimeout(function(){if($.events.isEnabled("exporttimedout")){var _e={type:"exporttimedout",target:$,format:i,options:o};$.events.dispatchImmediately("exporttimedout",_e)}$.showTimeout()},this.timeoutDelay)),this.hideNonExportableSprites(),d=this._getFunction(i),o=this.adapter.apply("options",{options:o,type:i}).options,d=this.adapter.apply("exportFunction",{func:d,type:i,options:o}).func,[4,d.call(this,i,o)]);case 1:return g=rt.sent(),this._exportRunning=!1,this._releasePointers(),this.restoreNonExportableSprites(),g?(this.events.isEnabled("exportfinished")&&(b={type:"exportfinished",target:this,format:i,options:o},this.events.dispatchImmediately("exportfinished",b)),this.hidePreloader(),this.hideTimeout(),this.menu&&this.menu.close(),i==="print"?[2,this.print(g,o,this.adapter.apply("title",{title:this.title,options:o}).title)]:i=="pdfdata"?[2,this.download(g,this.filePrefix+".pdf")]:[2,this.download(g,this.filePrefix+"."+i,o&&o.addBOM)]):(this.events.isEnabled("error")&&(j={type:"error",target:this,format:i,options:o},this.events.dispatchImmediately("error",j)),[2,!1])}})})},a.prototype.unsupported=function(i,o){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(c){return[2,""]})})},a.prototype.handleCustom=function(i){hasValue(i)&&hasValue(i.callback)&&i.callback.call(i.callbackTarget||this,i)},a.prototype.getPrint=function(i,o){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(c){return[2,this.getImage("png",o)]})})},a.prototype.getFontFamilies=function(){return __awaiter(this,void 0,void 0,function(){var i,o,c,d,g=this;return __generator(this,function(b){switch(b.label){case 0:return i=this.getDOMURL(),o=[],c=[],[4,eachStylesheets(function(j,$){if($.type===CSSRule.FONT_FACE_RULE){var rt=$.cssText,_e=fontFamilySrcRegexp.exec(rt);if(_e!==null){var st=_e[1].split(/ *, */).map(function(ut){return __awaiter(g,void 0,void 0,function(){var gt,yt,Pt,wt,Ct,At;return __generator(this,function(Tt){switch(Tt.label){case 0:return gt=/^url\(["']?([^"'\)]+)["']?\)([^,]*)$/.exec(ut),gt!==null?[3,1]:[2,ut];case 1:if(yt=gt[2],Pt=joinUrl(j,gt[1]),this.webFontFilter&&!Pt.match(this.webFontFilter))return[2,null];Tt.label=2;case 2:return Tt.trys.push([2,7,,8]),[4,load(Pt,void 0,{responseType:"blob"})];case 3:return wt=Tt.sent(),supportsBlobUri()?(Ct=i.createObjectURL(wt.blob),o.push(Ct),[3,6]):[3,4];case 4:return[4,blobToDataUri(wt.blob)];case 5:Ct=Tt.sent(),Tt.label=6;case 6:return[2,'url("'+Ct+'")'+yt];case 7:return At=Tt.sent(),console.error("Failed to load font",Pt,At),[2,null];case 8:return[2]}})})});c.push(Promise.all(st).then(function(ut){return ut=ut.filter(function(gt){return gt!=null}),ut.length===0?"":rt.replace(fontFamilySrcRegexp,"src: "+ut.join(", ")+";")}))}}})];case 1:return b.sent(),[4,Promise.all(c)];case 2:return d=b.sent(),[2,{blobs:o,cssText:d.filter(function(j){return!!j}).join(`
`)}]}})})},a.prototype.getImage=function(i,o,c){return __awaiter(this,void 0,void 0,function(){var d,g,b,j,$,rt,rt;return __generator(this,function(_e){switch(_e.label){case 0:return d=this._objectsAlreadyHidden,d||this.hideNonExportableSprites(),hasValue(o)||(o=this.getFormatOptions(i)),[4,this.awaitValidSprites()];case 1:return _e.sent(),[4,this.simplifiedImageExport()];case 2:if(!_e.sent())return[3,10];g=void 0,_e.label=3;case 3:return _e.trys.push([3,7,,9]),[4,this.getCanvas(o)];case 4:return g=_e.sent(),c===!1?[3,6]:[4,this.addExtras(g,o)];case 5:b=_e.sent(),this.disposeCanvas(g),g=b,_e.label=6;case 6:return j=g.toDataURL(this.getContentType(i),o.quality),this.disposeCanvas(g),d||this.restoreNonExportableSprites(),[2,j];case 7:return $=_e.sent(),console.error($.message+`
`+$.stack),warn("Simple export failed, falling back to advanced export"),g&&this.disposeCanvas(g),[4,this.getImageAdvanced(i,o,c)];case 8:return rt=_e.sent(),d||this.restoreNonExportableSprites(),[2,rt];case 9:return[3,12];case 10:return[4,this.getImageAdvanced(i,o,c)];case 11:return rt=_e.sent(),d||this.restoreNonExportableSprites(),[2,rt];case 12:return[2]}})})},a.prototype.addExtras=function(i,o,c){return __awaiter(this,void 0,void 0,function(){var d,g,b,j,$,rt,_e,st,ut,gt,yt,Pt,wt,Ct,At=this;return __generator(this,function(Tt){switch(Tt.label){case 0:return this.extraSprites.length?(d=0,g=0,b=i.width,j=i.height,$=0,rt=0,[4,Promise.all(map$1(this.extraSprites,function(kt){return __awaiter(At,void 0,void 0,function(){var It,Lt,Ft,Nt;return __generator(this,function(Ht){switch(Ht.label){case 0:return kt instanceof Sprite?It={sprite:kt,position:"bottom"}:It=kt,It.position=It.position||"bottom",It.marginTop=It.marginTop||0,It.marginRight=It.marginRight||0,It.marginBottom=It.marginBottom||0,It.marginLeft=It.marginLeft||0,c?[4,It.sprite.exporting.getCanvasAdvanced(o)]:[3,2];case 1:return Lt=Ht.sent(),[3,4];case 2:return[4,It.sprite.exporting.getCanvas(o)];case 3:Lt=Ht.sent(),Ht.label=4;case 4:return Ft=Lt.width+It.marginLeft+It.marginRight,Nt=Lt.height+It.marginTop+It.marginBottom,It.position=="top"?(b=It.crop?j:max$1(b,Ft),g+=Nt):It.position=="right"?(j=It.crop?j:max$1(j,Nt),$+=Ft):It.position=="left"?(j=It.crop?j:max$1(j,Nt),d+=Ft):It.position==="bottom"&&(b=It.crop?j:max$1(b,Ft),rt+=Nt),[2,{canvas:Lt,position:It.position,left:It.marginLeft,top:It.marginTop,width:Ft,height:Nt}]}})})}))]):[3,2];case 1:return _e=Tt.sent(),st=this.getDisposableCanvas(),st.width=d+b+$,st.height=g+j+rt,ut=st.getContext("2d"),gt=this.backgroundColor||this.findBackgroundColor(this.sprite.dom),gt&&(ut.fillStyle=gt.toString(),ut.fillRect(0,0,st.width,st.height)),yt=d,Pt=g,wt=yt+b,Ct=Pt+j,each$2(_e,function(kt){kt.position=="top"?(Pt-=kt.height,ut.drawImage(kt.canvas,d+kt.left,Pt+kt.top)):kt.position=="right"?(ut.drawImage(kt.canvas,wt+kt.left,g+kt.top),wt+=kt.width):kt.position=="left"?(yt-=kt.width,ut.drawImage(kt.canvas,yt+kt.left,g+kt.top)):kt.position==="bottom"&&(ut.drawImage(kt.canvas,d+kt.left,Ct+kt.top),Ct+=kt.height),At.disposeCanvas(kt.canvas)}),ut.drawImage(i,d,g),[2,st];case 2:return[2,i]}})})},a.prototype.getCanvas=function(i){return __awaiter(this,void 0,void 0,function(){var o,c,d,g,b,j,$,rt,_e,st,ut,gt,yt,Pt,wt,Ct,At;return __generator(this,function(Tt){switch(Tt.label){case 0:hasValue(i)||(i={}),o=this.backgroundColor||this.findBackgroundColor(this.sprite.dom),c=this.getDOMURL(),d=null,g=null,Tt.label=1;case 1:return Tt.trys.push([1,,4,5]),j=this.sprite.pixelWidth,$=this.sprite.pixelHeight,rt=findFont(this.sprite.dom),_e=findFontSize(this.sprite.dom),st=i.scale||1,ut=this.getPixelRatio(i),st=this.getAdjustedScale(j*ut,$*ut,st,i),b=this.getDisposableCanvas(),b.style.width=j*st+"px",b.style.height=$*st+"px",b.width=j*st,b.height=$*st,gt=b.getContext("2d"),o&&(gt.fillStyle=o.toString(),gt.fillRect(0,0,j*st,$*st)),yt=[],this.useWebFonts&&yt.push(this.getFontFamilies().then(function(kt){return g=kt.blobs,kt.cssText})),yt.push(this.imagesToDataURI(this.sprite.dom,i)),yt.push(this.prepForeignObjects(this.sprite.dom,i)),[4,Promise.all(yt)];case 2:return Pt=Tt.sent(),wt=this.normalizeSVG("<style>"+Pt[0]+"</style>"+this.serializeElement(this.sprite.paper.defs)+this.serializeElement(this.sprite.dom),i,j,$,st,rt,_e),Ct=new Blob([wt],{type:"image/svg+xml"}),d=c.createObjectURL(Ct),[4,this.loadNewImage(d,j*st*ut,$*st*ut,"anonymous")];case 3:return At=Tt.sent(),gt.drawImage(At,0,0),[3,5];case 4:return d!==null&&c.revokeObjectURL(d),g!==null&&each$2(g,function(kt){c.revokeObjectURL(kt)}),this.restoreRemovedObjects(),[7];case 5:return[2,b]}})})},a.prototype.getCanvasAdvanced=function(i){return __awaiter(this,void 0,void 0,function(){var o,c,d,g,b,j,$,rt,_e,st,ut;return __generator(this,function(gt){switch(gt.label){case 0:return hasValue(i)||(i={}),[4,this.imagesToDataURI(this.sprite.dom,i)];case 1:return gt.sent(),o=this.backgroundColor||this.findBackgroundColor(this.sprite.dom),[4,this.canvg];case 2:return c=gt.sent(),d=this.sprite.pixelWidth,g=this.sprite.pixelHeight,b=findFont(this.sprite.dom),j=findFontSize(this.sprite.dom),$=i.scale||1,rt=this.getPixelRatio(i),$=this.getAdjustedScale(d*rt,g*rt,$,i),_e=this.normalizeSVG(this.serializeElement(this.sprite.paper.defs)+this.serializeElement(this.sprite.dom),i,d,g,$,b,j,o),st=this.getDisposableCanvas(),st.style.width=d*rt*$+"px",st.style.height=g*rt*$+"px",st.width=d*rt*$,st.height=g*rt*$,ut={useCORS:!0},rt!=1&&(ut.ignoreDimensions=!0,ut.scaleWidth=d*rt*$,ut.scaleHeight=g*rt*$),[4,c.fromString(st.getContext("2d"),_e,ut).render()];case 3:return gt.sent(),[2,st]}})})},a.prototype.getImageAdvanced=function(i,o,c){return __awaiter(this,void 0,void 0,function(){var d,g,b;return __generator(this,function(j){switch(j.label){case 0:return d=this._objectsAlreadyHidden,d||this.hideNonExportableSprites(),hasValue(o)||(o=this.getFormatOptions(i)),[4,this.getCanvasAdvanced(o)];case 1:return g=j.sent(),c===!1?[3,3]:[4,this.addExtras(g,o,!0)];case 2:g=j.sent(),j.label=3;case 3:return b=g.toDataURL(this.getContentType(i),o.quality),this.disposeCanvas(g),d||this.restoreNonExportableSprites(),[2,b]}})})},a.prototype.getDisposableCanvas=function(){var i=document.createElement("canvas");return i.style.position="fixed",i.style.top="-10000px",document.body.appendChild(i),i},a.prototype.disposeCanvas=function(i){document.body.contains(i)&&document.body.removeChild(i)},a.prototype.getPixelRatio=function(i){return this.useRetina?getPixelRatio():1},a.prototype.getAdjustedScale=function(i,o,c,d){if(!d)return c;var g=i*c,b=i*c,j,$;return d.maxWidth&&g>d.maxWidth&&(j=d.maxWidth/i),d.maxHeight&&b>d.maxHeight&&($=d.maxHeight/o),j||$?min$1(j,$):(d.minWidth&&g<d.minWidth&&(j=d.minWidth/i),d.minHeight&&b<d.minHeight&&($=d.minHeight/o),j||$?max$1(j,$):c)},a.prototype.imagesToDataURI=function(i,o){return __awaiter(this,void 0,void 0,function(){var c,d,g,b,j,$;return __generator(this,function(rt){switch(rt.label){case 0:if(c=i.querySelectorAll("image"),!c.length)return[3,2];for(d=[],g=c.length,b=0;b<g;b++)j=c[b],$=j.getAttributeNS(a.XLINK,"href"),$&&($.indexOf("data:image")!==-1||($.indexOf(".svg")!==-1?d.push(this.svgToDataURI(j,o)):d.push(this.imageToDataURI(j,o))));return[4,Promise.all(d)];case 1:return rt.sent(),[2];case 2:return[2]}})})},a.prototype.prepForeignObjects=function(i,o){return __awaiter(this,void 0,void 0,function(){var c,d,g;return __generator(this,function(b){if(c=i.querySelectorAll("foreignObject"),c.length)for(d=c.length,g=0;g<d;g++)this.temporarilyRemoveObject(c[g]);return[2]})})},a.prototype.imageToDataURI=function(i,o){return __awaiter(this,void 0,void 0,function(){var c,d,g;return __generator(this,function(b){switch(b.label){case 0:return b.trys.push([0,2,,3]),[4,this.loadNewImage(i.getAttributeNS(a.XLINK,"href"),null,null,"anonymous")];case 1:c=b.sent(),d=document.createElement("canvas"),d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0);try{return g=d.toDataURL(),i.setAttribute("href",g),[2,g]}catch{return o.keepTainted!==!1&&this.temporarilyRemoveObject(i),[2,void 0]}return[3,3];case 2:return b.sent(),(!o||o.keepTainted!==!1)&&this.temporarilyRemoveObject(i),[2,void 0];case 3:return[2]}})})},a.prototype.svgToDataURI=function(i,o){return __awaiter(this,void 0,void 0,function(){var c,d,g,b;return __generator(this,function(j){switch(j.label){case 0:c=i.getAttributeNS(a.XLINK,"href"),j.label=1;case 1:return j.trys.push([1,3,,4]),[4,load(c)];case 2:return d=j.sent(),g=this.adapter.apply("charset",{charset:"base64",type:"svg",options:o}).charset,b=this.adapter.apply("svgToDataURI",{data:"data:"+this.getContentType("svg")+";"+g+","+btoa(d.response),options:o}).data,i.setAttributeNS(a.XLINK,"href",b),[2,b];case 3:return j.sent(),(!o||o.keepTainted!==!1)&&this.temporarilyRemoveObject(i),[2,void 0];case 4:return[2]}})})},a.prototype.temporarilyRemoveObject=function(i,o){var c=i.parentElement||i.parentNode;o||(o=this.sprite.paper.add("g").node),c.insertBefore(o,i),i.textContent,c.removeChild(i),this._removedObjects.push({element:i,placeholder:o})},a.prototype.restoreRemovedObjects=function(){for(var i;i=this._removedObjects.pop(),!!i;){var o=i.placeholder.parentElement||i.placeholder.parentNode;o.insertBefore(i.element,i.placeholder)}},a.prototype.simplifiedImageExport=function(){return __awaiter(this,void 0,void 0,function(){var i,o,c,d,g,b,j;return __generator(this,function($){switch($.label){case 0:if(this.useSimplifiedExport===!1)return[2,!1];if(i=registry.getCache("simplifiedImageExport"),i===!1||i===!0)return[2,i];$.label=1;case 1:$.trys.push([1,6,,7]),o=document.createElement("canvas"),o.width=1,o.height=1,c=o.getContext("2d"),d=this.getDOMURL(),g=new Blob([this.normalizeSVG("<g></g>",{},1,1)],{type:"image/svg+xml"}),b=d.createObjectURL(g),j=void 0,$.label=2;case 2:return $.trys.push([2,4,,5]),[4,this.loadNewImage(b,1,1)];case 3:return j=$.sent(),[3,5];case 4:return $.sent(),[2,!1];case 5:c.drawImage(j,0,0),d.revokeObjectURL(b);try{return registry.setCache("simplifiedImageExport",!0),[2,!0]}catch{return registry.setCache("simplifiedImageExport",!1),[2,!1]}return[3,7];case 6:return $.sent(),registry.setCache("simplifiedImageExport",!1),[2,!1];case 7:return[2]}})})},a.prototype.loadNewImage=function(i,o,c,d){return new Promise(function(g,b){var j;o&&c?j=new Image(o,c):j=new Image,d&&j.setAttribute("crossOrigin",d),j.onload=function(){g(j)};function $(){if(d){var rt=j.src;j.onerror=function(){b(new Error('Loading image "'+i+'" failed'))},j.removeAttribute("crossorigin"),j.src="",j.src=rt}else b(new Error('Loading image "'+i+'" failed'))}j.onabort=$,j.onerror=$,j.src=i})},a.prototype.getDOMURL=function(){return self.URL||self.webkitURL||self},a.prototype.getSVG=function(i,o,c){return c===void 0&&(c=!0),__awaiter(this,void 0,void 0,function(){var d,g,b,j,$,rt,_e,st,ut,gt;return __generator(this,function(yt){switch(yt.label){case 0:return d=this._objectsAlreadyHidden,d||this.hideNonExportableSprites(),hasValue(o)||(o=this.getFormatOptions("svg")),[4,this.awaitValidSprites()];case 1:return yt.sent(),g=this.sprite.pixelWidth,b=this.sprite.pixelHeight,j=findFont(this.sprite.dom),$=findFontSize(this.sprite.dom),rt=o.scale||1,_e=this.getPixelRatio(o),rt=this.getAdjustedScale(g*_e,b*_e,rt,o),st=this.normalizeSVG(this.serializeElement(this.sprite.paper.defs)+this.serializeElement(this.sprite.dom),o,g,b,rt,j,$),ut=this.adapter.apply("charset",{charset:"charset=utf-8",type:"svg",options:o}).charset,gt=this.adapter.apply("getSVG",{data:c?"data:"+this.getContentType(i)+";"+ut+","+encodeURIComponent(st):st,options:o}).data,d||this.restoreNonExportableSprites(),[2,gt]}})})},a.prototype.normalizeSVG=function(i,o,c,d,g,b,j,$){var rt="";c&&(rt+='width="'+Math.round(c*(g||1))+'px" '),d&&(rt+='height="'+Math.round(d*(g||1))+'px" ');var _e="";b&&(_e+="font-family: "+b.replace(/"/g,"")+";"),j&&(_e+="font-size: "+j+";"),g&&(rt+='viewBox="0 0 '+c+" "+d+'" ');var st=[],ut=i.match(/<foreignObject[\s\S]*<\/foreignObject>/gi);if(ut)for(var gt=0;gt<ut.length;gt++)i=i.replace(ut[gt],PLACEHOLDER),st.push(ut[gt]);i.match(/<svg/)?rt!==""&&(i=i.replace(/(<svg[^>]*)width="[^"]*"/,"$1"),i=i.replace(/(<svg[^>]*)height="[^"]*"/,"$1"),i=i.replace(/(<svg)/,"$1"+rt)):i='<?xml version="1.0" encoding="utf-8"?><svg '+rt+' style="'+_e+'" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">'+i+"</svg>",$&&(i=i.replace(/(<svg[^>]*>)/,'$1<rect width="100%" height="100%" fill="'+$.rgba+'"/>')),isInternetExplorer()&&(i=i.replace(/<feColorMatrix [^\/>]*\/>/gi,""));var yt=new RegExp("url\\("+escapeForRgex(getBaseURI()),"g");if(i=i.replace(yt,"url(#"),i=i.replace(/url\(&quot;([^)]*)&quot;\)/gm,"url($1)"),st.length)for(var gt=0;gt<st.length;gt++)i=i.replace(PLACEHOLDER,st[gt]);return i=this.adapter.apply("normalizeSVG",{data:i,options:o}).data,i},a.prototype.serializeElement=function(i){return new XMLSerializer().serializeToString(i)},a.prototype.getPDF=function(i,o){return __awaiter(this,void 0,void 0,function(){function c(Pt){var wt={};wt.normal=Pt.normal.path,yt[Pt.normal.path]=Pt.normal.bytes,Pt.bold?(wt.bold=Pt.bold.path,yt[Pt.bold.path]=Pt.bold.bytes):wt.bold=Pt.normal.path,Pt.italics?(wt.italics=Pt.italics.path,yt[Pt.italics.path]=Pt.italics.bytes):wt.italics=Pt.normal.path,Pt.bolditalics?(wt.bolditalics=Pt.bolditalics.path,yt[Pt.bolditalics.path]=Pt.bolditalics.bytes):wt.bolditalics=Pt.normal.path,gt[Pt.name]=wt}var d,g,b,j,$,rt,_e,st,ut,gt,yt;return __generator(this,function(Pt){switch(Pt.label){case 0:return[4,this.getImage(o.imageFormat||"png",o)];case 1:return d=Pt.sent(),[4,this.pdfmake];case 2:return g=Pt.sent(),b=[30,30,30,30],j={pageSize:o.pageSize||"A4",pageOrientation:o.pageOrientation||"portrait",pageMargins:o.pageMargins||b,defaultStyle:{font:o.font?o.font.name:void 0},content:[]},$=this.adapter.apply("title",{title:this.title,options:o}).title,rt=0,$&&(j.content.push({text:$,fontSize:o.fontSize||14,bold:!0,margin:[0,0,0,15]}),rt+=50),o.addURL&&(j.content.push({text:this.language.translate("Saved from")+": "+document.location.href,fontSize:o.fontSize,margin:[0,0,0,15]}),rt+=50),i!="pdfdata"&&j.content.push({image:d,alignment:o.align||"left",fit:this.getPageSizeFit(j.pageSize,j.pageMargins,rt)}),i=="pdfdata"||o.addData?(st=(_e=j.content).push,ut={},[4,this.getPDFData("pdf",o)]):[3,4];case 3:st.apply(_e,[(ut.table=Pt.sent(),ut.fontSize=o.fontSize||14,ut)]),Pt.label=4;case 4:return j=this.adapter.apply("pdfmakeDocument",{doc:j,options:o}).doc,gt=null,yt=null,o.font&&(gt={},yt={},c(o.font),o.extraFonts&&each$2(o.extraFonts,c)),[4,new Promise(function(wt,Ct){g.createPdf(j,null,gt,yt).getDataUrl(function(At){wt(At)})})];case 5:return[2,Pt.sent()]}})})},a.prototype.getPDFData=function(i,o){return __awaiter(this,void 0,void 0,function(){var c,d,g,b,j,$,rt=this;return __generator(this,function(_e){if(c={body:[]},d=this.adapter.apply("formatDataFields",{dataFields:this.dataFields,format:"pdf"}).dataFields,g=this.data,o.pivot)b=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"pdfdata"}).dataFieldsOrder,eachOrdered(d,function(st,ut){var gt=[];o.addColumnNames&&gt.push(ut);for(var yt=g.length,Pt=0;Pt<yt;Pt++){var wt=g[Pt][st];gt.push(rt.convertToSpecialFormat(st,wt,o,!0))}c.body.push(rt.getPDFDataRow(gt,o,void 0,!0))},function(st,ut){var gt=b.indexOf(st),yt=b.indexOf(ut);return gt>yt?1:gt<yt?-1:0});else for(o.addColumnNames&&(c.body.push(this.getPDFDataRow(d,o,void 0,!0)),c.headerRows=1),j=g.length,$=0;$<j;$++)c.body.push(this.getPDFDataRow(g[$],o,d));return[2,this.adapter.apply("pdfmakeTable",{table:c,options:o}).table]})})},a.prototype.getPDFDataRow=function(i,o,c,d){var g=this;d===void 0&&(d=!1);var b=[];c||(c=i);var j=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"pdfdata"}).dataFieldsOrder;return eachOrdered(c,function($,rt){var _e=g.convertEmptyValue($,i[$],o),st=d?_e:g.convertToSpecialFormat($,_e,o);st=""+st,b.push(st)},function($,rt){var _e=j.indexOf($),st=j.indexOf(rt);return _e>st?1:_e<st?-1:0}),b},a.prototype.getPageSizeFit=function(i,o,c){c===void 0&&(c=0);var d=[0,0,0,0];typeof o=="number"?d=[o,o,o,o]:o.length==2?d=[o[0],o[1],o[0],o[1]]:o.length==4&&(d=o);var g={"4A0":[4767.87,6740.79],"2A0":[3370.39,4767.87],A0:[2383.94,3370.39],A1:[1683.78,2383.94],A2:[1190.55,1683.78],A3:[841.89,1190.55],A4:[595.28,841.89],A5:[419.53,595.28],A6:[297.64,419.53],A7:[209.76,297.64],A8:[147.4,209.76],A9:[104.88,147.4],A10:[73.7,104.88],B0:[2834.65,4008.19],B1:[2004.09,2834.65],B2:[1417.32,2004.09],B3:[1000.63,1417.32],B4:[708.66,1000.63],B5:[498.9,708.66],B6:[354.33,498.9],B7:[249.45,354.33],B8:[175.75,249.45],B9:[124.72,175.75],B10:[87.87,124.72],C0:[2599.37,3676.54],C1:[1836.85,2599.37],C2:[1298.27,1836.85],C3:[918.43,1298.27],C4:[649.13,918.43],C5:[459.21,649.13],C6:[323.15,459.21],C7:[229.61,323.15],C8:[161.57,229.61],C9:[113.39,161.57],C10:[79.37,113.39],RA0:[2437.8,3458.27],RA1:[1729.13,2437.8],RA2:[1218.9,1729.13],RA3:[864.57,1218.9],RA4:[609.45,864.57],SRA0:[2551.18,3628.35],SRA1:[1814.17,2551.18],SRA2:[1275.59,1814.17],SRA3:[907.09,1275.59],SRA4:[637.8,907.09],EXECUTIVE:[521.86,756],FOLIO:[612,936],LEGAL:[612,1008],LETTER:[612,792],TABLOID:[792,1224]},b=g[i];return b[0]-=d[0]+d[2],b[1]-=d[1]+d[3]+c,b},a.prototype.getExcel=function(i,o){return __awaiter(this,void 0,void 0,function(){var c,d,g,b,j,$,rt,_e,st,ut,gt=this;return __generator(this,function(yt){switch(yt.label){case 0:return hasValue(o)||(o=this.getFormatOptions("xlsx")),[4,this.xlsx];case 1:if(c=yt.sent(),d=this.adapter.apply("xlsxWorkbookOptions",{xlsx:c,options:{bookType:"xlsx",bookSST:!1,type:"base64"}}).options,g=this.normalizeExcelSheetName(this.adapter.apply("xlsxSheetName",{xlsx:c,name:this.title||this.language.translate("Data")}).name),b={SheetNames:[g],Sheets:{}},j=[],$=this.adapter.apply("formatDataFields",{dataFields:this.dataFields,format:"xslx"}).dataFields,o.pivot)rt=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"xlsx"}).dataFieldsOrder,eachOrdered($,function(Pt,wt){var Ct=[];o.addColumnNames&&Ct.push(wt);for(var At=gt.data.length,Tt=0;Tt<At;Tt++){var kt=gt.data[Tt][Pt];Ct.push(gt.convertToSpecialFormat(Pt,kt,o,!0))}j.push(gt.getExcelRow(Ct,o,void 0,!0))},function(Pt,wt){var Ct=rt.indexOf(Pt),At=rt.indexOf(wt);return Ct>At?1:Ct<At?-1:0});else for(o.addColumnNames&&j.push(this.getExcelRow($,o,void 0,!0)),_e=this.data.length,st=0;st<_e;st++)j.push(this.getExcelRow(this.data[st],o,$));return b.Sheets[g]=c.utils.aoa_to_sheet(j),b=this.adapter.apply("xlsxWorkbook",{xlsx:c,workbook:b,options:o}).workbook,ut=this.adapter.apply("getExcel",{data:"data:"+this.getContentType(i)+";base64,"+c.write(b,d),options:o}).data,[2,ut]}})})},a.prototype.normalizeExcelSheetName=function(i){return i=i.replace(/([:\\\/?*\[\]]+)/g," "),truncateWithEllipsis(i,31,"...",!0)},a.prototype.getExcelRow=function(i,o,c,d){var g=this;d===void 0&&(d=!1);var b=[];c||(c=i);var j=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"xlsx"}).dataFieldsOrder;return eachOrdered(c,function($,rt){var _e=g.convertEmptyValue($,i[$],o),st=d?_e:g.convertToSpecialFormat($,_e,o,!0);b.push(st)},function($,rt){var _e=j.indexOf($),st=j.indexOf(rt);return _e>st?1:_e<st?-1:0}),b},a.prototype.getCSV=function(i,o,c){return c===void 0&&(c=!0),__awaiter(this,void 0,void 0,function(){var d,g,b,j,$,rt,_e,st,ut,gt,yt=this;return __generator(this,function(Pt){if(hasValue(o)||(o=this.getFormatOptions("csv")),d="",g=this.adapter.apply("formatDataFields",{dataFields:this.dataFields,format:"csv"}).dataFields,b="",j=this.data,o.pivot)$=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"csv"}).dataFieldsOrder,eachOrdered(g,function(wt,Ct){var At=[];o.addColumnNames&&At.push(Ct);for(var Tt=j.length,kt=0;kt<Tt;kt++){var It=j[kt][wt];At.push(yt.convertToSpecialFormat(wt,It,o,!0))}d+=b+yt.getCSVRow(At,o,void 0,!0),b=`
`},function(wt,Ct){var At=$.indexOf(wt),Tt=$.indexOf(Ct);return At>Tt?-1:At<Tt?1:0});else{for(rt=j.length,_e=0;_e<rt;_e++)st=this.getCSVRow(j[_e],o,g),o.reverse?d=st+b+d:d+=b+st,b=`
`;o.addColumnNames&&(d=this.getCSVRow(g,o,void 0,!0)+b+d)}return ut=this.adapter.apply("charset",{charset:"charset=utf-8",type:i,options:o}).charset,gt=this.adapter.apply("getCSV",{data:c?"data:"+this.getContentType(i)+";"+ut+","+encodeURIComponent(d):d,options:o}).data,[2,gt]})})},a.prototype.getCSVRow=function(i,o,c,d){var g=this;d===void 0&&(d=!1);var b=o.separator||",",j=[];c||(c=i);var $=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"csv"}).dataFieldsOrder;return eachOrdered(c,function(rt,_e){var st=g.convertEmptyValue(rt,i[rt],o),ut=d?st:g.convertToSpecialFormat(rt,st,o);ut=""+ut,ut=ut.replace(/"/g,'""'),(o.forceQuotes||ut.search(new RegExp(`"|
|`+b,"g"))>=0)&&(ut='"'+ut+'"'),j.push(ut)},function(rt,_e){var st=$.indexOf(rt),ut=$.indexOf(_e);return st>ut?1:st<ut?-1:0}),j.join(b)},a.prototype.getHTML=function(i,o,c){return c===void 0&&(c=!0),__awaiter(this,void 0,void 0,function(){var d,g,b,j,$,rt,_e,st,ut=this;return __generator(this,function(gt){if(hasValue(o)||(o=this.getFormatOptions("html")),d="<table>",o.tableClass&&(d='<table class="'+o.tableClass+'">'),g=this.adapter.apply("formatDataFields",{dataFields:this.dataFields,format:"html"}).dataFields,b=this.data,o.pivot)j=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"html"}).dataFieldsOrder,d+=`
<tbody>`,eachOrdered(g,function(yt,Pt){var wt=[];o.addColumnNames&&wt.push(Pt);for(var Ct=b.length,At=0;At<Ct;At++){var Tt=b[At][yt];wt.push(ut.convertToSpecialFormat(yt,Tt,o,!0))}d+=`
`+ut.getHTMLRow(wt,o,void 0,!0)},function(yt,Pt){var wt=j.indexOf(yt),Ct=j.indexOf(Pt);return wt>Ct?-1:wt<Ct?1:0}),d+=`
</tbody>`;else{for(o.addColumnNames&&(d+=`
<thead>
`+this.getHTMLRow(g,o,void 0,!0,!0)+`
</thead>`),d+=`
<tbody>`,$=b.length,rt=0;rt<$;rt++)d+=`
`+this.getHTMLRow(b[rt],o,g);d+=`
</tbody>`}return d+=`
</table>`,_e=this.adapter.apply("charset",{charset:"charset=utf-8",type:i,options:o}).charset,st=this.adapter.apply("getHTML",{data:c?"data:"+this.getContentType(i)+";"+_e+","+encodeURIComponent(d):d,options:o}).data,[2,st]})})},a.prototype.getHTMLRow=function(i,o,c,d,g){var b=this;d===void 0&&(d=!1),g===void 0&&(g=!1);var j="	<tr>";o.rowClass&&(j='	<tr class="'+o.rowClass+'">'),c||(c=i);var $=this.adapter.apply("dataFieldsOrder",{dataFieldsOrder:this.dataFieldsOrder,format:"html"}).dataFieldsOrder,rt=g?"th":"td",_e=!0;return eachOrdered(c,function(st,ut){var gt=b.convertEmptyValue(st,i[st],o),yt=d?gt:b.convertToSpecialFormat(st,gt,o);yt=""+yt,yt=yt.replace(/[\u00A0-\u9999<>\&]/gim,function(wt){return"&#"+wt.charCodeAt(0)+";"});var Pt=rt;o.pivot&&_e&&(Pt="th"),o.cellClass?j+=`
		<`+Pt+' class="'+o.cellClass+'">'+yt+"</"+Pt+">":j+=`
		<`+Pt+">"+yt+"</"+Pt+">",_e=!1},function(st,ut){var gt=$.indexOf(st),yt=$.indexOf(ut);return gt>yt?1:gt<yt?-1:0}),j+=`
	</tr>`,j},a.prototype.getJSON=function(i,o,c){return c===void 0&&(c=!0),__awaiter(this,void 0,void 0,function(){var d,g,b,j,$,rt,_e,st,ut,gt=this;return __generator(this,function(yt){if(hasValue(o)||(o=this.getFormatOptions("json")),g=this.adapter.apply("formatDataFields",{dataFields:this.dataFields,format:"json"}).dataFields,this._dynamicDataFields)d=this.data;else for(d=[],b=this.data,j=function(Pt,wt){var Ct=b[wt];if(typeof Ct=="object"){var At={};each$1(Ct,function(Tt,kt){hasValue(g[Tt])&&(At[g[Tt]]=gt.convertToSpecialFormat(Tt,kt,o))}),d.push(At)}},$=b.length,rt=0;rt<$;rt++)j($,rt);return _e=JSON.stringify(d,function(Pt,wt){return typeof wt=="object"&&each$1(wt,function(Ct,At){wt[Ct]=gt.convertToSpecialFormat(Ct,At,o)}),wt},o.indent),st=this.adapter.apply("charset",{charset:"charset=utf-8",type:i,options:o}).charset,ut=this.adapter.apply("getJSON",{data:c?"data:"+this.getContentType(i)+";"+st+","+encodeURIComponent(_e):_e,options:o}).data,[2,ut]})})},a.prototype.convertToSpecialFormat=function(i,o,c,d){if(typeof o=="number")if(this.isDateField(i))o=new Date(o);else{if(this.isDurationField(i))return this.durationFormatter.format(o,this.durationFormat);if(this.isNumberField(i)&&this.numberFormat)return this.numberFormatter.format(o,this.numberFormat)}return o instanceof Date?c.useTimestamps?o=o.getTime():c.useLocale?d||(o=o.toLocaleString()):o=this.dateFormatter.format(o,this.dateFormat):isString$1(o)&&this.isDateField(i)&&this.dateFormat&&(o=this.dateFormatter.format(this.dateFormatter.parse(o),this.dateFormat)),o},a.prototype.convertEmptyValue=function(i,o,c){return hasValue(o)?o:c.emptyAs},a.prototype.download=function(i,o,c){return c===void 0&&(c=!1),__awaiter(this,void 0,void 0,function(){var Pt,wt,b,d,rt,_e,st,ut,g,Pt,wt,b,j,$,rt,_e,st,ut,gt,yt,Pt,wt,Ct,At;return __generator(this,function(Tt){if(this.msBlobDownloadSupport()){if(Pt=i.split(";"),wt=Pt.shift().replace(/data:/,""),i=decodeURIComponent(Pt.join(";").replace(/^[^,]*,/,"")),["image/svg+xml","application/json","text/csv"].indexOf(wt)==-1)try{b=atob(i),i=b}catch{return[2,!1]}else return d=new Blob([i],{type:wt}),window.navigator.msSaveBlob(d,o),[2,!0];for(rt=new Array(i.length),_e=0;_e<i.length;++_e)st=i.charCodeAt(_e),rt[_e]=st;ut=new Blob([new Uint8Array(rt)],{type:wt}),window.navigator.msSaveBlob(ut,o)}else if(this.blobDownloadSupport()){if(g=document.createElement("a"),g.download=o,document.body.appendChild(g),Pt=i.split(";"),wt=Pt.shift().replace(/data:/,""),i=decodeURIComponent(Pt.join(";").replace(/^[^,]*,/,"")),["image/svg+xml","application/json","text/csv","text/html"].indexOf(wt)==-1)try{b=atob(i),i=b}catch{return[2,!1]}else return c&&(i="\uFEFF"+i),j=new Blob([i],{type:wt}),$=window.URL.createObjectURL(j),g.href=$,g.download=o,g.click(),setTimeout(function(){document.body.removeChild(g),window.URL.revokeObjectURL($)},100),[2,!0];for(rt=new Array(i.length),_e=0;_e<i.length;++_e)st=i.charCodeAt(_e),rt[_e]=st;c&&(rt=[239,187,191].concat(rt)),ut=new Blob([new Uint8Array(rt)],{type:wt}),gt=window.URL.createObjectURL(ut),g.href=gt,g.download=o,document.body.appendChild(g),g.click(),document.body.removeChild(g),setTimeout(function(){window.URL.revokeObjectURL(gt)},100)}else this.linkDownloadSupport()?(yt=document.createElement("a"),yt.download=o,yt.href=i,document.body.appendChild(yt),yt.click(),document.body.removeChild(yt)):this.legacyIE()?(Pt=i.match(/^data:(.*);[ ]*([^,]*),(.*)$/),Pt.length===4&&(Pt[2]=="base64"?Pt[1].match(/^image\//)&&this.showModal('<img src="'+i+'" style="float: left; max-width: 50%; max-height: 80%; margin: 0 1em 0.5em 0; border: 1px solid #eee;" /><p>'+this.language.translate('To save the image, right-click thumbnail on the left and choose "Save picture as..."')+'</p><p style="text-align: center;"><small>'+this.language.translate("(Press ESC to close this message)")+"</small></p>",this.language.translate("Image Export Complete")):(wt=void 0,o.match(/\.svg$/)?wt="image/svg+xml":(wt="text/plain",o+=".txt"),Ct=document.createElement("iframe"),Ct.width="1px",Ct.height="1px",Ct.style.display="none",document.body.appendChild(Ct),At=Ct.contentDocument,At.open(wt,"replace"),At.write(decodeURIComponent(Pt[3])),At.close(),At.execCommand("SaveAs",!0,o),document.body.removeChild(Ct)))):window.location.href=i;return[2,!0]})})},a.prototype.downloadSupport=function(){return this.linkDownloadSupport()||this.msBlobDownloadSupport()},a.prototype.linkDownloadSupport=function(){var i=registry.getCache("linkDownloadSupport");if(i===!1||i===!0)return i;var o=document.createElement("a"),c=typeof o.download<"u";return registry.setCache("linkDownloadSupport",c),c},a.prototype.blobDownloadSupport=function(){return hasValue(window.Blob)},a.prototype.msBlobDownloadSupport=function(){return hasValue(window.navigator.msSaveOrOpenBlob)},a.prototype.legacyIE=function(){var i=document.createElement("div");return i.innerHTML="<!--[if lt IE 10]><i></i><![endif]-->",i.getElementsByTagName("i").length==1},a.prototype.print=function(i,o,c){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(d){return o.printMethod=="css"?[2,this.printViaCSS(i,o,c)]:[2,this.printViaIframe(i,o,c)]})})},a.prototype.printViaCSS=function(i,o,c){return __awaiter(this,void 0,void 0,function(){var d,g,b,j,$;return __generator(this,function(rt){return d=document.documentElement.scrollTop||document.body.scrollTop,g=new StyleRule(getShadowRoot(this.container),"body > *",{display:"none",position:"fixed",visibility:"hidden",opacity:"0",clipPath:"polygon(0px 0px,0px 0px,0px 0px,0px 0px);"}),c&&document&&document.title&&(b=document.title,document.title=c),j=new Image,j.src=i,j.style.maxWidth="100%",j.style.display="block",j.style.position="relative",j.style.visibility="visible",j.style.opacity="1",j.style.clipPath="none",document.body.appendChild(j),this.setTimeout(function(){window.print()},50),$=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,$&&o.delay<1e3?o.delay=1e3:o.delay<100&&(o.delay=100),this.setTimeout(function(){document.body.removeChild(j),g.dispose(),b&&(document.title=document.title),document.documentElement.scrollTop=document.body.scrollTop=d},o.delay||500),[2,!0]})})},a.prototype.printViaIframe=function(i,o,c){return __awaiter(this,void 0,void 0,function(){var d,g,b;return __generator(this,function(j){return d=document.createElement("iframe"),d.style.visibility="hidden",document.body.appendChild(d),d.contentWindow.document.open(),d.contentWindow.document.close(),g=new Image,g.src=i,g.style.maxWidth="100%",g.style.height="auto",c&&(d.contentWindow.document.title=c),d.contentWindow.document.body.appendChild(g),d.load=function(){d.contentWindow.document.body.appendChild(g)},this.setTimeout(function(){try{d.contentWindow.document.execCommand("print",!1,null)||d.contentWindow.print()}catch{d.contentWindow.print()}},o.delay||50),b=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,b&&o.delay<1e3?o.delay=1e3:o.delay<100&&(o.delay=100),this.setTimeout(function(){document.body.removeChild(d)},o.delay+50||100),[2,!0]})})},a.prototype.findBackgroundColor=function(i){var o=1,c=getComputedStyle$1(i,"background-color");if((c.match(/[^,]*,[^,]*,[^,]*,[ ]?0/)||c=="transparent")&&(o=0),o==0){var d=i.parentElement;return d?this.findBackgroundColor(d):color("#fff")}else return color(c,o)},Object.defineProperty(a.prototype,"container",{get:function(){return this.adapter.apply("container",{container:this._container}).container},set:function(i){this._container=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"sprite",{get:function(){return this.adapter.apply("sprite",{sprite:this._sprite}).sprite},set:function(i){this._sprite=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"extraSprites",{get:function(){return this.adapter.apply("extraSprites",{extraSprites:this._extraSprites}).extraSprites},set:function(i){this._extraSprites=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"validateSprites",{get:function(){return this.adapter.apply("validateSprites",{validateSprites:this._validateSprites}).validateSprites},set:function(i){this._validateSprites=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"data",{get:function(){return this.adapter.apply("data",{data:this._data}).data},set:function(i){this._data=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"dataFields",{get:function(){return this._dataFields||this.generateDataFields(),this.adapter.apply("dataFields",{dataFields:this._dataFields}).dataFields},set:function(i){this._dataFields=i,this._dynamicDataFields=!1},enumerable:!0,configurable:!0}),a.prototype.handleDataUpdated=function(){this._dynamicDataFields&&(this._dataFields=void 0);var i=this.data.length>0;this._prevHasData!=i&&(this._prevHasData=i,this.menu&&this.menu.invalidate())},Object.defineProperty(a.prototype,"dateFormatter",{get:function(){return this._dateFormatter||(this._dateFormatter=new DateFormatter,this._dateFormatter.language=this.language),this.adapter.apply("dateFormatter",{dateFormatter:this._dateFormatter}).dateFormatter},set:function(i){this._dateFormatter=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"dateFormat",{get:function(){return this.adapter.apply("dateFormat",{dateFormat:this._dateFormat}).dateFormat},set:function(i){this._dateFormat=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"dateFields",{get:function(){return this._dateFields||(this._dateFields=new List),this.adapter.apply("dateFields",{dateFields:this._dateFields}).dateFields},set:function(i){this._dateFields=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"numberFormatter",{get:function(){return this._numberFormatter||(this._numberFormatter=new NumberFormatter,this._numberFormatter.language=this.language),this.adapter.apply("numberFormatter",{numberFormatter:this._numberFormatter}).numberFormatter},set:function(i){this._numberFormatter=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"numberFormat",{get:function(){return this.adapter.apply("numberFormat",{numberFormat:this._numberFormat}).numberFormat},set:function(i){this._numberFormat=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"numberFields",{get:function(){return this._numberFields||(this._numberFields=new List),this.adapter.apply("numberFields",{numberFields:this._numberFields}).numberFields},set:function(i){this._numberFields=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"durationFormatter",{get:function(){return this._durationFormatter||(this._durationFormatter=new DurationFormatter,this._durationFormatter.language=this.language),this.adapter.apply("durationFormatter",{durationFormatter:this._durationFormatter}).durationFormatter},set:function(i){this._durationFormatter=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"durationFormat",{get:function(){return this.adapter.apply("durationFormat",{durationFormat:this._durationFormat}).durationFormat},set:function(i){this._durationFormat=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"durationFields",{get:function(){return this._durationFields||(this._durationFields=new List),this.adapter.apply("durationFields",{durationFields:this._durationFields}).durationFields},set:function(i){this._durationFields=i},enumerable:!0,configurable:!0}),a.prototype.generateDataFields=function(){var i=this;this._dataFields={},this.data.length&&each$2(this.data,function(o){each$1(o,function(c,d){hasValue(i._dataFields[c])||(i._dataFields[c]=i.adapter.apply("dataFieldName",{name:c,field:c}).name)})})},a.prototype.isDateField=function(i){return this.adapter.apply("isDateField",{isDateField:this.dateFields.contains(i),field:i}).isDateField},a.prototype.isNumberField=function(i){return this.adapter.apply("isNumberField",{isNumberField:this.numberFields.contains(i),field:i}).isNumberField},a.prototype.isDurationField=function(i){return this.adapter.apply("isDurationField",{isDurationField:this.durationFields.contains(i),field:i}).isDurationField},a.prototype.getContentType=function(i){var o="";switch(i){case"png":case"gif":o="image/"+i;break;case"jpg":o="image/jpeg";break;case"svg":o="image/svg+xml";break;case"csv":o="text/csv";break;case"json":o="application/json";break;case"html":o="text/html";break;case"pdf":case"pdfdata":o="application/pdf";break;case"xlsx":o="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";break}return this.adapter.apply("contentType",{contentType:o,type:i}).contentType},Object.defineProperty(a.prototype,"filePrefix",{get:function(){return this.adapter.apply("filePrefix",{filePrefix:this._filePrefix}).filePrefix},set:function(i){this._filePrefix=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"backgroundColor",{get:function(){return this.adapter.apply("backgroundColor",{backgroundColor:this._backgroundColor}).backgroundColor},set:function(i){this._backgroundColor=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"title",{get:function(){return this.adapter.apply("title",{title:this._title}).title},set:function(i){this._title=i},enumerable:!0,configurable:!0}),a.prototype.showPreloader=function(){var i=this.preloader;i&&(i.progress=.5,i.label.text="...")},a.prototype.hidePreloader=function(){var i=this.preloader;i&&(i.progress=1)},Object.defineProperty(a.prototype,"preloader",{get:function(){return this._sprite&&this._sprite.parent&&this._sprite.parent.preloader?this._sprite.parent.preloader:void 0},enumerable:!0,configurable:!0}),a.prototype.showTimeout=function(){this.showModal(this.adapter.apply("timeoutMessage",{message:this.language.translate("Export operation took longer than expected. Something might have gone wrong.")}).message)},a.prototype.hideTimeout=function(){this._timeoutTimeout&&(this.removeDispose(this._timeoutTimeout),this._timeoutTimeout=null),this.hideModal()},Object.defineProperty(a.prototype,"language",{get:function(){return this._language||(this._language=new Language),this._language},set:function(i){this._language=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"modal",{get:function(){return this._modal||(this._modal=new Modal,this._modal.adapter.add("classPrefix",function(i){return i=options.classNamePrefix+i,i})),this._modal},enumerable:!0,configurable:!0}),a.prototype.showModal=function(i,o){this.hideModal(),this.hidePreloader();var c=this.modal;c.container=this.sprite.svgContainer.SVGContainer,c.content=i,c.readerTitle=o,c.open()},a.prototype.hideModal=function(){this._modal&&this.modal.close()},a.prototype._canvg=function(){return __awaiter(this,void 0,void 0,function(){var i;return __generator(this,function(o){switch(o.label){case 0:return[4,__vitePreload(()=>import("./index-NcsCV9Fi.js"),__vite__mapDeps([]))];case 1:return i=o.sent(),i.default!=null?[2,i.default]:[2,i]}})})},Object.defineProperty(a.prototype,"canvg",{get:function(){return this._canvg()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"pdfmake",{get:function(){return pdfmakePromise==null&&(pdfmakePromise=_pdfmake()),pdfmakePromise},enumerable:!0,configurable:!0}),a.prototype._xlsx=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){switch(i.label){case 0:return[4,__vitePreload(()=>import("./xlsx-vJBe0Lau.js"),__vite__mapDeps([]))];case 1:return[2,i.sent()]}})})},Object.defineProperty(a.prototype,"xlsx",{get:function(){return this._xlsx()},enumerable:!0,configurable:!0}),a.prototype.setFormatOptions=function(i,o){this._formatOptions.setKey(i,o)},a.prototype.getFormatOptions=function(i){return this._formatOptions.getKey(i)},Object.defineProperty(a.prototype,"formatOptions",{get:function(){return this._formatOptions},enumerable:!0,configurable:!0}),a.prototype._disablePointers=function(){hasValue(this._spriteInteractionsEnabled)||(this._spriteInteractionsEnabled=this.sprite.interactionsEnabled),this.sprite.interactionsEnabled=!1},a.prototype._releasePointers=function(){hasValue(this._spriteInteractionsEnabled)&&!this._exportRunning&&(this.sprite.interactionsEnabled=this._spriteInteractionsEnabled)},a.prototype.hideNonExportableSprites=function(){var i=this;if(!this._objectsAlreadyHidden){var o=this.sprite.svgContainer;o&&each$2(o.nonExportableSprites,function(c){!c.isHidden&&!c.isHiding&&c.visible&&i._hiddenObjects.push(c),c.hide(0)}),this._objectsAlreadyHidden=!0}},a.prototype.restoreNonExportableSprites=function(){this._objectsAlreadyHidden&&(each$2(this._hiddenObjects,function(i){i.show(0)}),this._hiddenObjects=[],this._objectsAlreadyHidden=!1)},a.prototype.awaitValidSprites=function(){return __awaiter(this,void 0,void 0,function(){var i;return __generator(this,function(o){switch(o.label){case 0:return i=[],this.validateSprites.length&&each$2(this.validateSprites,function(c,d){c.invalid&&i.push(new Promise(function(g,b){c.events.once("validated",function(j){g()})}))}),i.length?[4,Promise.all(i)]:[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}})})},a.prototype.processConfig=function(i){registry.registeredClasses.ExportMenu=ExportMenu,i&&(hasValue(i.menu)&&!hasValue(i.menu.type)&&(i.menu.type="ExportMenu"),hasValue(i.dataFields)&&isObject$1(i.dataFields)&&(this.dataFields=i.dataFields,delete i.dataFields)),e.prototype.processConfig.call(this,i)},a.XLINK="http://www.w3.org/1999/xlink",a}(Validatable),visualProperties=["fill","fillOpacity","stroke","strokeOpacity","strokeWidth","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin"],Sprite=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.properties={},i._eventDispatcher=new SpriteEventDispatcher(i),i._bindings={},i._isTemplate=!1,i._isPath=!1,i._inited=!1,i._ready=!1,i.isHiding=!1,i._isHidden=!1,i.isShowing=!1,i.isStandaloneInstance=!1,i._isActive=!1,i._mask=new MutableValueDisposer,i._positionPrecision=3,i._language=new MutableValueDisposer,i._exporting=new MutableValueDisposer,i._exportable=!0,i._bbox={x:0,y:0,width:0,height:0},i.invalid=!1,i.positionInvalid=!1,i.propertyFields={},i.applyOnClones=!1,i._measuredWidthSelf=0,i._measuredHeightSelf=0,i.maxLeft=0,i.maxRight=0,i.maxTop=0,i.maxBottom=0,i.maxLeftSelf=0,i.maxRightSelf=0,i.maxTopSelf=0,i.maxBottomSelf=0,i._isDragged=!1,i._isResized=!1,i._disabled=!1,i._internalDisabled=!1,i._updateDisabled=!1,i._internalDefaultsApplied=!1,i.rollOutDelay=0,i.isBaseSprite=!1,i.shouldClone=!0,i.appeared=!1,i.ex=0,i.ey=0,i.dragWhileResize=!1,i.measureFailed=!1,i.preventShow=!1,i.cloneTooltip=!0,i.className="Sprite",i._disposers.push(i._eventDispatcher),i.uid,i.group=i.paper.addGroup("g"),i.setPropertyValue("scale",1),i.setPropertyValue("rotation",0),i.setPropertyValue("align","none"),i.setPropertyValue("valign","none"),i.setPropertyValue("pixelPerfect",!1),i.setPropertyValue("visible",!0),i.setPropertyValue("tooltipPosition","fixed"),i.setPropertyValue("verticalCenter","none"),i.setPropertyValue("horizontalCenter","none"),i.setPropertyValue("tooltipX",percent(50)),i.setPropertyValue("tooltipX",percent(50)),i.setPropertyValue("marginTop",0),i.setPropertyValue("marginBottom",0),i.setPropertyValue("marginLeft",0),i.setPropertyValue("marginRight",0),i.setPropertyValue("dx",0),i.setPropertyValue("dy",0),i.setPropertyValue("paddingTop",0),i.setPropertyValue("paddingBottom",0),i.setPropertyValue("paddingRight",0),i.setPropertyValue("paddingLeft",0),i.setPropertyValue("togglable",!1),i.setPropertyValue("hidden",!1),i.setPropertyValue("urlTarget","_self"),i.setPropertyValue("alwaysShowTooltip",!1),i.setPropertyValue("showTooltipOn","hover"),i._prevMeasuredWidth=0,i._prevMeasuredHeight=0,i._measuredWidth=0,i._measuredHeight=0,i._isMeasured=!0,i.invalidate(),i.applyTheme(),i._disposers.push(i.events),i._disposers.push(i.group),i._disposers.push(i._mask),i._disposers.push(i._language),i._disposers.push(i._exporting),i._disposers.push(new Disposer(function(){each$1(i._bindings,function(o,c){c.dispose()})})),i.setPropertyValue("interactionsEnabled",!0),i}return Object.defineProperty(a.prototype,"events",{get:function(){return this._eventDispatcher},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"adapter",{get:function(){return this._adapterO||(this._adapterO=new Adapter(this)),this._adapterO},enumerable:!0,configurable:!0}),a.prototype.applyTheme=function(){e.prototype.applyTheme.call(this),options.autoSetClassName&&this.setClassName()},a.prototype.getCurrentThemes=function(){var i=this._themes;if(i)return i;var o=this._parent;return o?o.getCurrentThemes():registry.themes},a.prototype.applyInternalDefaults=function(){this._internalDefaultsApplied=!0},a.prototype.invalidate=function(){this.disabled||this._isTemplate||this.__disabled||this.invalid||(this.invalid=!0,registry.addToInvalidSprites(this),system.requestFrame())},a.prototype.validate=function(){this.dispatchImmediately("beforevalidated"),this._internalDefaultsApplied||this.applyInternalDefaults(),this.beforeDraw(),this.draw(),this.invalid=!1,registry.removeFromInvalidSprites(this),this.afterDraw()},a.prototype.invalidatePosition=function(){this.disabled||this._isTemplate||this.positionInvalid||(this.positionInvalid=!0,registry.addToInvalidPositions(this),system.requestFrame())},a.prototype.validatePosition=function(){var i=this.pixelX,o=this.pixelY,c=this.dx,d=this.dy,g=i+c,b=o+d;this._updateDisabled&&(this._internalDisabled?this.group.attr({display:"none"}):this.disabled||this.removeSVGAttribute("display"),this._updateDisabled=!1);var j=this.measure(),$=this.group.transformString;this.group.moveTo({x:g,y:b}),this.group.rotation=this.rotation,this.nonScaling?this.group.scale=this.scale/this.globalScale:this.group.scale=this.scale,($!=this.group.transformString||j)&&($==null?this.dispatch("transformed"):this.dispatchImmediately("transformed"),this.dispatch("positionchanged"),(this.showTooltipOn=="hit"||this.showTooltipOn=="always")&&this.updateTooltipPosition()),i+c==g&&o+d==b&&(registry.removeFromInvalidPositions(this),this.positionInvalid=!1);var rt=this._maskRectangle;rt&&this._clipElement.moveTo({x:rt.x-i,y:rt.y-o})},a.prototype.beforeDraw=function(){},a.prototype.draw=function(){},a.prototype.afterDraw=function(){var i,o;if((this.isMeasured||this.horizontalCenter!=="none"||this.verticalCenter!=="none")&&this.measureElement(),this._inited)this.dispatch("validated");else{if(this._adapterO)try{for(var c=__values(this._adapterO.keys()),d=c.next();!d.done;d=c.next()){var g=d.value;switch(g){case"mask":case"fill":case"opacity":case"fillOpacity":case"stroke":case"strokeOpacity":case"strokeWidth":case"shapeRendering":case"strokeDasharray":case"strokeDashoffset":case"strokeLinecap":case"strokeLinejoin":case"textDecoration":case"fontSize":case"fontFamily":case"fontWeight":this[g]=this[g];break}}}catch(b){i={error:b}}finally{try{d&&!d.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}this.applyFilters(),this.visible=this.visible,this.interactionsEnabled=this.getPropertyValue("interactionsEnabled"),this._inited=!0,this.showOnInit||(this.appeared=!0),this.hidden&&this.hide(0),this.applyMask(),this.dispatch("validated"),this.dispatch("inited"),this.dispatchReady()}this.showTooltipOn=="always"&&(this.visible&&!this.disabled&&!this.__disabled?this.showTooltip():this.hideTooltip(0))},a.prototype.dispatchReady=function(){this.isReady()||(this._ready=!0,this.dispatch("ready"))},a.prototype.reinit=function(){this._inited=!1,this.setState(this.defaultState),this.invalidate()},a.prototype.handleGlobalScale=function(){this.dispatch("globalscalechanged"),this.nonScalingStroke&&(this.strokeWidth=this.strokeWidth),this.nonScaling&&this.validatePosition(),this.updateFilterScale()},a.prototype.updateFilterScale=function(){var i=this;each(this.filters.iterator(),function(o){o.scale=i.globalScale})},a.prototype.removeFromInvalids=function(){registry.removeFromInvalidSprites(this),registry.removeFromInvalidPositions(this)},a.prototype.copyFrom=function(i){var o=this;e.prototype.copyFrom.call(this,i),this.isMeasured=i.isMeasured,this.states.copyFrom(i.states),i.filters.length>0&&i.filters.each(function(c){o.filters.push(c.clone())}),i._adapterO&&this.adapter.copyFrom(i._adapterO),i._interaction&&this.interactions.copyFrom(i.interactions),i._plugins&&this.plugins.copyFrom(i.plugins),this.configField=i.configField,this.applyOnClones=i.applyOnClones,this.disabled=i.disabled,this.virtualParent=i.virtualParent,this.exportable=i.exportable,i._tooltip&&(this._tooltip?this._tooltip.copyFrom(i.tooltip):i.cloneTooltip?this.tooltip=i.tooltip.clone():this._tooltip=i.tooltip),this._showSystemTooltip=i.showSystemTooltip,copyProperties(i.propertyFields,this.propertyFields),copyProperties(i.properties,this),i.fillModifier&&(this.fillModifier=i.fillModifier.clone()),i.strokeModifier&&(this.strokeModifier=i.strokeModifier.clone()),i.focusFilter&&(this.focusFilter=i.focusFilter.clone())},a.prototype.dispose=function(){if(!this.isDisposed()){if(this.showTooltipOn=="always"&&this.tooltip&&this.tooltip.hide(),this.dispatchImmediately("beforedisposed"),this.isBaseSprite){if(this.htmlContainer)for(;this.htmlContainer.childNodes.length>0;)this.htmlContainer.removeChild(this.htmlContainer.firstChild);this.isBaseSprite=!1}if(e.prototype.dispose.call(this),this._adapterO&&this._adapterO.clear(),this.applyOnClones&&this._clones)for(var i=this._clones.length-1;i>=0;i--){var o=this._clones.getIndex(i);o.dispose()}this._svgContainer&&this._svgContainer.dispose(),this._interactionDisposer&&(this._interactionDisposer.dispose(),this._interactionDisposer=void 0),this._urlDisposer&&this._urlDisposer.dispose(),this.removeFromInvalids(),this.element&&this.element.dispose(),this.group&&this.group.dispose(),this._numberFormatter&&this._numberFormatter.dispose(),this._focusFilter&&this._focusFilter.dispose();var c=this.stroke;c&&!(c instanceof Color)&&c.dispose&&(this.clonedFrom&&this.clonedFrom.stroke==c||c.dispose());var d=this.fill;if(d&&!(d instanceof Color)&&d.dispose&&(this.clonedFrom&&this.clonedFrom.fill==d||d.dispose()),hasValue(this.id)&&this.map.removeKey(this.id),this.parent=void 0,this._filters)for(;this._filters.length>0;){var g=this._filters.getIndex(0);g.dispose(),this._filters.removeValue(g)}this._alwaysShowDisposers=void 0}},Object.defineProperty(a.prototype,"isTemplate",{get:function(){return this._isTemplate},set:function(i){i=toBoolean(i),this._isTemplate!=i&&(this._isTemplate=i,this instanceof Container&&each(this.children.iterator(),function(o){o.isTemplate=i}),i?(this.parent=this._parent,this.removeFromInvalids()):this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"showSystemTooltip",{get:function(){return hasValue(this._showSystemTooltip)?this._showSystemTooltip:this.virtualParent?this.virtualParent.showSystemTooltip:this._parent?this._parent.showSystemTooltip:!1},set:function(i){i=toBoolean(i),this._showSystemTooltip!=i&&(this._showSystemTooltip=i,this.applyAccessibility())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"topParent",{get:function(){if(this._topParent)return this._topParent;if(this._parent)return this._parent.topParent},set:function(i){this._topParent=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"parent",{get:function(){return this._parent},set:function(i){if(!this._isTemplate){this.paper;var o=this._parent;o!=i&&(o&&o.children.removeValue(this),this._parent=i,i?(this.topParent=i.topParent,i.isTemplate&&(this.isTemplate=!0),this.baseId=i.baseId,i.children.push(this),this._tooltip&&!this._tooltipContainer&&(this._tooltip.parent=i.tooltipContainer),this._dataItem||(this.dataItem=i.dataItem),this.handleAlwaysShowTooltip(),this.dataItem&&this.applyAccessibility(),this.dispatchImmediately("parentset")):this.topParent=void 0)}},enumerable:!0,configurable:!0}),a.prototype.handleAlwaysShow=function(){this.showTooltip()},a.prototype.handleAlwaysShowTooltip=function(){var i=this,o=this._alwaysShowDisposers;if(o&&each$2(o,function(d){d.dispose()}),this._alwaysShowDisposers=[],this.showTooltipOn=="always")for(;i!=null;){var c=i.events.on("visibilitychanged",this.handleAlwaysShow,this,!1);this.addDisposer(c),this._alwaysShowDisposers.push(c),i=i.parent}},Object.defineProperty(a.prototype,"virtualParent",{get:function(){return this._virtualParent},set:function(i){this._virtualParent=i,this.dataItem&&this.applyAccessibility()},enumerable:!0,configurable:!0}),a.prototype.appendDefs=function(){this.filterElement&&this.paper.appendDef(this.filterElement);var i=this.fill;i&&i.element&&this.paper.appendDef(i.element);var o=this.stroke;if(o&&o.element&&this.paper.appendDef(o.element),this.fillModifier&&this.fill instanceof Color){var c=this.fillModifier.modify(this.fill);c&&c.element&&this.paper.appendDef(c.element)}if(this.strokeModifier&&this.stroke instanceof Color){var d=this.strokeModifier.modify(this.stroke);d&&d.element&&this.paper.appendDef(d.element)}this._clipPath&&this.paper.appendDef(this._clipPath),this._exportable===!1&&(this.exportable=!1)},Object.defineProperty(a.prototype,"map",{get:function(){var i=this.topParent;return i?i.map:(this._map||(this._map=new Dictionary),this._map)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"delayedMap",{get:function(){var i=this.topParent;return i?i.delayedMap:(this._delayedMap||(this._delayedMap=new Dictionary),this._delayedMap)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"id",{get:function(){return this._id},set:function(i){if(this._id!=i){if(this._id=i,this.map.hasKey(i))throw Error("Duplicate id ("+i+") used on multiple objects.");this.map.setKey(i,this),options.autoSetClassName&&this.setClassName()}},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"dom",{get:function(){return this.group.node},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"paper",{get:function(){if(this._paper)return this._paper;var i=this._parent;return i?i.paper:getGhostPaper()},set:function(i){this.setPaper(i)},enumerable:!0,configurable:!0}),a.prototype.setPaper=function(i){var o=this._paper;return o!=i?(this._paper=i,this.appendDefs(),!0):!1},Object.defineProperty(a.prototype,"htmlContainer",{get:function(){if(this._htmlContainer)return this._htmlContainer;var i=this._parent;if(i)return i.htmlContainer},set:function(i){this._htmlContainer=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"titleElement",{get:function(){return this._titleElement||(this._titleElement=this.paper.add("title"),this.group.add(this._titleElement)),this._titleElement},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"descriptionElement",{get:function(){return this._descriptionElement||(this._descriptionElement=this.paper.add("desc"),this.group.add(this._descriptionElement)),this._descriptionElement},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"filters",{get:function(){return this._filters||(this._filters=new List,this._disposers.push(this._filters.events.onAll(this.applyFilters,this)),this._disposers.push(new ListDisposer(this._filters))),this._filters},enumerable:!0,configurable:!0}),a.prototype.setSVGAttributes=function(){this.fill=this.fill,this.opacity=this.opacity,this.fillOpacity=this.fillOpacity,this.stroke=this.stroke,this.strokeOpacity=this.strokeOpacity,this.shapeRendering=this.shapeRendering,this.strokeDasharray=this.strokeDasharray,this.strokeDashoffset=this.strokeDashoffset,this.strokeLinecap=this.strokeLinecap,this.strokeLinejoin=this.strokeLinejoin,this.focusable=this.focusable,this.tabindex=this.tabindex,this.role=this.role},a.prototype.setSVGAttribute=function(i){this.group.attr(i)},a.prototype.removeSVGAttribute=function(i){this.group.removeAttr(i)},a.prototype.setClassName=function(){var i=this.className,o=options.classNamePrefix;this.element&&this.element.addClass(o+i),this.group.addClass(o+i+"-group"),hasValue(this.id)&&this.group.addClass(o+this.id),this.userClassName&&this.group.addClass(this.userClassName)},a.prototype.uidAttr=function(){return this.setSVGAttribute({id:this.uid}),this.uid},a.prototype.updateClipPath=function(){var i=this._clipElement;i&&i.moveTo({x:this.mask.pixelX,y:this.mask.pixelY})},a.prototype.createClipPath=function(){if(!this._clipPath){this._clipPath=this.paper.addGroup("clipPath"),this.paper.appendDef(this._clipPath),this._disposers.push(this._clipPath);var i=registry.getUniqueId();this._clipPath.attr({id:i}),this.group.attr({"clip-path":'url("'+getBaseURI()+i+'")'})}},a.prototype.applyMask=function(){var i=this.mask;if(this._clipPath&&i)if(i instanceof Container){this._clipElement.attr({width:max$1(0,i.pixelWidth),height:max$1(0,i.pixelHeight)});var o=spritePointToSprite({x:i.pixelX,y:i.pixelY},i.parent,this);this._clipPath.x=o.x,this._clipPath.y=o.y}else i.element&&i.element!=this._clipElement&&(this._clipElement=i.element,this._clipPath.add(this._clipElement)),this._clipPath.scale=i.scale,this._clipPath.x=i.pixelX,this._clipPath.y=i.pixelY,this._clipPath.rotation=i.rotation},a.prototype.applyFilters=function(){var i=this;if(this._filters&&this._filters.length>0){var o=100,c=100;this.filterElement?this.filterElement.removeChildNodes():(this.filterElement=this.paper.addGroup("filter"),this._disposers.push(this.filterElement)),this.paper.appendDef(this.filterElement);var d="filter-"+this.uid;this.filterElement.attr({id:d}),each(this.filters.iterator(),function(j){j.sprite=i,j.paper=i.paper,i.filterElement.attr({filterUnits:j.filterUnits}),j.appendPrimitives(i.filterElement),j.width>o&&(o=j.width),j.height>c&&(c=j.height),j.scale=i.globalScale});var g=o+"%",b=c+"%";this.filterElement.attr({width:g,height:b,x:-(o-100)/2+"%",y:-(c-100)/2+"%"}),this.group.attr({filter:'url("'+getBaseURI()+d+'")'})}else this.filterElement&&(this.group.removeAttr("filter"),this.filterElement.removeChildNodes())},a.prototype.removeClipPath=function(){this._clipPath&&(this.removeDispose(this._clipPath),this._clipPath=void 0)},a.prototype.setElement=function(i){this.element=i,this.setSVGAttributes(),this.applyAccessibility()},Object.defineProperty(a.prototype,"element",{get:function(){return this._element},set:function(i){this.removeElement(),this._element=i,this.group.add(i),i.node instanceof SVGPathElement&&(this._isPath=!0),this.invalid||this.validate(),options.autoSetClassName&&this.setClassName()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"svgContainer",{get:function(){if(this._svgContainer)return this._svgContainer;if(this._parent)return this._parent.svgContainer},set:function(i){this._svgContainer=i},enumerable:!0,configurable:!0}),a.prototype.measureElement=function(){if(this.element)if(this.definedBBox)this._bbox=this.definedBBox;else{var i=this.element.getBBox();this._bbox={x:i.x,y:i.y,width:i.width,height:i.height}}},a.prototype.updateCenter=function(){if(this.element){var i=this.element.transformString,o=this.bbox,c=0,d=0,g=o.x,b=o.y,j=o.width,$=o.height,rt=this.pixelPaddingLeft,_e=this.pixelPaddingRight,st=this.pixelPaddingTop,ut=this.pixelPaddingBottom,gt=max$1(j+rt+_e,this.pixelWidth),yt=max$1($+st+ut,this.pixelHeight),Pt=o.x,wt=o.x+gt,Ct=o.y,At=o.y+yt,Tt=this.horizontalCenter,kt=this.verticalCenter;switch(Tt){case"none":c=g+rt;break;case"left":c=rt;break;case"middle":c=rt-(j+_e+rt)/2;break;case"right":c=-_e-j;break}switch(kt){case"none":d=b+st;break;case"top":d=st;break;case"middle":d=st-($+ut+st)/2;break;case"bottom":d=-ut-$;break}this._measuredHeight=yt,this._measuredWidth=gt;var It=round$1(c-g,this._positionPrecision,!0),Lt=round$1(d-b,this._positionPrecision,!0);this.ex=It-rt,this.ey=Lt-st,this.maxLeft=Pt+It-rt,this.maxRight=wt+It-rt,this.maxTop=Ct+Lt-st,this.maxBottom=At+Lt-st,this.pixelPerfect&&options.pixelPerfectPrecision==0&&(It-=.5,Lt-=.5),this.element.moveTo({x:It,y:Lt}),i!=this.element.transformString&&this.dispatchImmediately("transformed")}},a.prototype.measure=function(){this.updateCenter();var i=this._measuredWidth,o=this._measuredHeight,c=this.maxLeft,d=this.maxRight,g=this.maxTop,b=this.maxBottom;this._measuredWidthSelf=i,this._measuredHeightSelf=o;var j=this._positionPrecision;if(this.maxLeftSelf=this.maxLeft,this.maxRightSelf=this.maxRight,this.maxTopSelf=this.maxTop,this.maxBottomSelf=this.maxBottom,this.rotation!==0||this.scale!==1||this.nonScaling){this.nonScalingStroke&&(this.strokeWidth=this.strokeWidth);var $=this.paper.svg,rt=$.createSVGMatrix(),_e=this.rotation,st=this.scale;this.nonScaling&&(st=this.scale/this.globalScale),rt.a=cos(_e)*st,rt.c=-sin(_e)*st,rt.e=0,rt.b=sin(_e)*st,rt.d=cos(_e)*st,rt.f=0;var ut=$.createSVGPoint();ut.x=c,ut.y=g;var gt=$.createSVGPoint();gt.x=d,gt.y=g;var yt=$.createSVGPoint();yt.x=d,yt.y=b;var Pt=$.createSVGPoint();Pt.x=c,Pt.y=b;var wt=ut.matrixTransform(rt),Ct=gt.matrixTransform(rt),At=yt.matrixTransform(rt),Tt=Pt.matrixTransform(rt);c=Math.min(wt.x,Ct.x,At.x,Tt.x),d=Math.max(wt.x,Ct.x,At.x,Tt.x),g=Math.min(wt.y,Ct.y,At.y,Tt.y),b=Math.max(wt.y,Ct.y,At.y,Tt.y),i=d-c,o=b-g,this.maxLeft=round$1(c,j,!0),this.maxRight=round$1(d,j,!0),this.maxTop=round$1(g,j,!0),this.maxBottom=round$1(b,j,!0)}return this._measuredWidth=round$1(i,j,!0),this._measuredHeight=round$1(o,j,!0),this._measuredWidth!=this._prevMeasuredWidth||this._measuredHeight!=this._prevMeasuredHeight?(this._prevMeasuredHeight=this._measuredHeight,this._prevMeasuredWidth=this._measuredWidth,this.dispatch("sizechanged"),(this.isHover||this.showTooltipOn=="hit"||this.showTooltipOn=="always")&&this.tooltip&&this.tooltip.visible&&(hasValue(this.tooltipText)||hasValue(this.tooltipHTML))&&this.updateTooltipPosition(),!0):!1},a.prototype.insertBefore=function(i){var o=this._parent;if(o){var c=o.children.indexOf(i);c!==-1&&(o.children.moveValue(this,c),o.sortChildren())}return this},a.prototype.insertAfter=function(i){var o=this._parent;if(o){var c=o.children.indexOf(i);c!==-1&&(o.children.moveValue(this,c+1),o.sortChildren())}return this},a.prototype.removeElement=function(){this._element&&(this.removeDispose(this._element),this._element=void 0)},a.prototype.getRelativeX=function(i){return i instanceof Percent?i.value:this._parent?i/this._parent.innerWidth:0},a.prototype.getRelativeY=function(i){return i instanceof Percent?i.value:this._parent?i/this._parent.innerHeight:0},a.prototype.getPixelX=function(i){var o=0;if(isNumber$1(i))o=i;else if(i instanceof Percent){var c=i.value;this._parent&&(o=round$1(this._parent.innerWidth*c,this._positionPrecision,!0))}return o},a.prototype.getPixelY=function(i){var o=0;if(isNumber$1(i))o=i;else if(i instanceof Percent){var c=i.value;this._parent&&(o=round$1(this._parent.innerHeight*c,this._positionPrecision,!0))}return o},a.prototype.moveTo=function(i,o,c,d){this.isDragged&&!d||(i&&(isNumber$1(i.x)&&this.setPropertyValue("x",round$1(i.x,this._positionPrecision,!0)),isNumber$1(i.y)&&this.setPropertyValue("y",round$1(i.y,this._positionPrecision,!0))),isNumber$1(o)&&(this.rotation=o),isNumber$1(c)&&(this.scale=c),this.invalidatePosition())},Object.defineProperty(a.prototype,"mask",{get:function(){return this._adapterO?this._adapterO.apply("mask",this._mask.get()):this._mask.get()},set:function(i){var o=this;this._mask.get()!==i&&(i?(this.createClipPath(),i instanceof Container?this._clipElement=this.paper.add("rect"):(i.isMeasured=!1,i.element&&(this._clipElement=i.element)),this._clipElement&&this._clipPath.add(this._clipElement),this._mask.set(i,new MultiDisposer([i.events.on("maxsizechanged",function(){o.inited&&o.applyMask()},void 0,!1),i.events.on("validated",this.applyMask,this,!1),i.events.on("positionchanged",this.applyMask,this,!1)])),this.applyMask()):(this._mask.reset(),this.group.removeAttr("clip-path"),this.removeClipPath()))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"maskRectangle",{get:function(){return this._maskRectangle},set:function(i){i?(this.createClipPath(),this._clipElement||(this._clipElement=this.paper.add("rect"),this._clipPath.add(this._clipElement)),this._clipElement.attr({width:i.width,height:i.height})):(this.removeClipPath(),this._clipElement=void 0),this._maskRectangle=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isMeasured",{get:function(){return this._isMeasured},set:function(i){i=toBoolean(i),i||(this._measuredWidth=0,this._measuredHeight=0),this._isMeasured!=i&&(this._isMeasured=i,this.invalidatePosition())},enumerable:!0,configurable:!0}),a.prototype.hitTest=function(i){this.invalid&&this.validate(),i.invalid&&i.validate();var o=this.pixelX+this.maxLeft,c=this.pixelY+this.maxTop,d=o+this.maxRight,g=c+this.maxBottom,b=i.pixelX+i.maxLeft,j=i.pixelY+i.maxTop,$=b+i.maxRight,rt=j+i.maxBottom;return!(b>d||$<o||j>g||rt<c)},Object.defineProperty(a.prototype,"inited",{get:function(){return this._inited},enumerable:!0,configurable:!0}),a.prototype.isReady=function(){return this._ready},Object.defineProperty(a.prototype,"states",{get:function(){if(!this._states){var i=new SpriteState;this._states=new DictionaryTemplate(i),this._disposers.push(this._states.events.on("insertKey",this.processState,this,!1)),this._disposers.push(this._states.events.on("setKey",this.processState,this,!1)),this._disposers.push(new DictionaryDisposer(this._states)),this._disposers.push(i)}return this._states},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"hiddenState",{get:function(){if(!this.states.getKey("hidden")){var i=this.states.create("hidden");i.properties.opacity=0,i.properties.visible=!1}return this.states.getKey("hidden")},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"defaultState",{get:function(){if(!this.states.getKey("default")){var i=this.states.create("default");i.properties.opacity=1}return this.states.getKey("default")},enumerable:!0,configurable:!0}),a.prototype.processState=function(i){var o=i.newValue;if(o.sprite=this,o.name=i.key,(this.states.hasKey("hover")||this.showTooltipOn=="hover"&&(hasValue(this.tooltipHTML)||hasValue(this.tooltipText)))&&(this.hoverable=!0),(this.states.hasKey("down")||this.showTooltipOn=="hover"&&(hasValue(this.tooltipHTML)||hasValue(this.tooltipText)))&&(this.clickable=!0),this.states.hasKey("focus")&&(this.focusable=!0),this.applyOnClones)for(var c=this.clones.values,d=c.length,g=0;g<d;++g){var b=c[g];b.isDisposed()||b.states.setKey(o.name,o)}},Object.defineProperty(a.prototype,"animations",{get:function(){return this._animations||(this._animations=[],this._disposers.push(new AnimationDisposer(this._animations))),this._animations},enumerable:!0,configurable:!0}),a.prototype.getSvgPoint=function(i){try{var o=this.htmlContainer.getBoundingClientRect();return{x:i.x-o.left,y:i.y-o.top}}catch{return i}},a.prototype.animate=function(i,o,c){return new Animation(this,i,o,c).start()},a.prototype.setState=function(i,o,c){var d;if(i instanceof SpriteState)this.states.setKey(i.name,i),d=i;else if(d=this.states.getKey(i),!d)return;if(d.name=="hover"){if(this.isHidden)return;this.isHover=!0}return d.name=="hidden"?this.isHiding=!0:this.visible||this.setVisibility(d.properties.visible||this.defaultState.properties.visible),d.name=="active"&&(this.isActive=!0),isNumber$1(o)||(o=d.transitionDuration),hasValue(c)||(c=d.transitionEasing),this.transitTo(d,o,c)},a.prototype.applyCurrentState=function(i){var o=this.setState(this.defaultState,i);return this.isHover&&(o=this.setState("hover",i)),this.isDown&&this.interactions.downPointers.length&&(o=this.setState("down",i)),this.isFocused=this.isFocused,this.isActive&&(o=this.setState("active",i),this.isHover&&this.states.hasKey("hoverActive")&&(o=this.setState("hoverActive",i))),o},a.prototype.transitTo=function(i,o,c){var d=this,g=[],b=i.allValues,j;if(each$1(b,function(rt,_e){var st=d[rt];if(_e!=st&&d.defaultState.properties[rt]==null&&(d.defaultState.properties[rt]=st),_e!="__unset"){var ut={from:st,to:_e,property:rt};g.push(ut)}}),g.length>0&&(j=this.animate(g,o,c),j&&!j.isFinished()?this._disposers.push(j.events.on("animationended",function(){d.dispatchImmediately("transitionended")})):this.dispatchImmediately("transitionended")),i.filters.length>0){var $=[];each(i.filters.iterator(),function(rt){var _e=rt.clone();$.push(_e);var st=[];each(d.filters.iterator(),function(ut){ut.className==_e.className&&(contains$1(d.defaultState.filters.iterator(),function(gt){return gt.className===_e.className})||d.defaultState.filters.push(ut),each$1(_e.properties,function(gt,yt){var Pt=ut.properties[gt];Pt!=yt&&st.push({property:gt,from:Pt,to:yt})}))}),_e.animate(st,o,c)}),this.filters.clear(),this.filters.pushAll($)}return j},a.prototype.isInTransition=function(){return this.animations.length>0},Object.defineProperty(a.prototype,"isHover",{get:function(){return this.isInteractive()?this.interactions.isHover:!1},set:function(i){i=toBoolean(i),i!==this.isHover&&this.isInteractive()&&(this.interactions.isHover=i,i?this.handleOver():(this.interactions.isRealHover=!1,this.handleOut()))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isDragged",{get:function(){return this._isDragged},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isResized",{get:function(){return this._isResized},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isDown",{get:function(){return this.isInteractive()?this.interactions.isDown:!1},set:function(i){i=toBoolean(i),this.isInteractive()&&this.isDown!=i&&(this.interactions.isDown=i,i?this.handleDown():this.handleUp())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isFocused",{get:function(){return this.isInteractive()?this.interactions.isFocused:!1},set:function(i){i=toBoolean(i),this.focusable&&this.isFocused!=i&&this.isInteractive()&&(this.interactions.isFocused=i,i===!0?this.handleFocus():this.handleBlur())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isActive",{get:function(){return this._isActive},set:function(i){this.setActive(i)},enumerable:!0,configurable:!0}),a.prototype.setActive=function(i){i=toBoolean(i),this._isActive!==i&&(this._isActive=i,i&&this.states.hasKey("active")?(this.setState("active"),this.isHover&&this.states.hasKey("hoverActive")&&this.setState("hoverActive")):this.applyCurrentState(),this.dispatchImmediately("toggled"))},Object.defineProperty(a.prototype,"disabled",{get:function(){var i=this.getPropertyValue("disabled");return hasValue(i)?i:this.virtualParent?this.virtualParent.disabled:this._parent?this._parent.disabled:!1},set:function(i){this.setDisabled(i)},enumerable:!0,configurable:!0}),a.prototype.setDisabled=function(i){i=toBoolean(i);var o=this.getPropertyValue("disabled");if(o!=i){if(this.setPropertyValue("disabled",i,!0),i)this.parent=this._parent,this.removeFromInvalids(),this.group.attr({display:"none"}),this.dispatch("disabled");else{if(this._parent){var c=this._parent.element;c.hasChild(this.group)||c.add(this.group)}this instanceof Container?(this.deepInvalidate(),this._background&&this._background.invalidate()):this.invalidate(),this.__disabled||this.removeSVGAttribute("display"),this.dispatch("enabled")}return this.dispatch("transformed"),system.requestFrame(),!0}return!1},Object.defineProperty(a.prototype,"__disabled",{get:function(){return this._internalDisabled},set:function(i){this._internalDisabled!=i&&(this._internalDisabled=i,this._updateDisabled=!0,this.invalidatePosition(),i||this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"numberFormatter",{get:function(){return this._numberFormatter?this._numberFormatter:this.virtualParent?this.virtualParent.numberFormatter:this._parent?this._parent.numberFormatter:(this._numberFormatter=new NumberFormatter,this._numberFormatter.language=this.language,this.numberFormatter)},set:function(i){this._numberFormatter=i,this._numberFormatter.language=this.language},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"dateFormatter",{get:function(){return this._dateFormatter?this._dateFormatter:this.virtualParent?this.virtualParent.dateFormatter:this._parent?this._parent.dateFormatter:(this._dateFormatter=new DateFormatter,this._dateFormatter.language=this.language,this.dateFormatter)},set:function(i){this._dateFormatter=i,this._dateFormatter.language=this.language},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"durationFormatter",{get:function(){return this._durationFormatter?this._durationFormatter:this.virtualParent?this.virtualParent.durationFormatter:this._parent?this._parent.durationFormatter:(this._durationFormatter=new DurationFormatter,this._durationFormatter.language=this.language,this.durationFormatter)},set:function(i){this._durationFormatter=i,this._durationFormatter.language=this.language},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"language",{get:function(){var i=this._language.get();return i||(this.virtualParent?this.virtualParent.language:this._parent?this._parent.language:(i=new Language,this.language=i,i))},set:function(i){var o=this;this._language.get()!==i&&this._language.set(i,i.events.on("localechanged",function(c){if(o._numberFormatter&&(o._numberFormatter.language=o.language),o._dateFormatter&&(o._dateFormatter.language=o.language),o._durationFormatter&&(o._durationFormatter.language=o.language),o._exporting.get()){var d=o._exporting.get();d.numberFormatter.language=o.language,d.dateFormatter.language=o.language,d.durationFormatter.language=o.language,d.language=o.language}o instanceof Container&&o.deepInvalidate()}))},enumerable:!0,configurable:!0}),a.prototype.populateString=function(i,o){if(hasValue(i)){i=castString(i),i=getTextFormatter().escape(i);var c=i.match(/\{([^}]+)\}/g),d=void 0;if(c)for(d=0;d<c.length;d++){var g=c[d].replace(/\{([^}]+)\}/,"$1"),b=this.getTagValue(g,"",o);hasValue(b)||(b=""),i=i.split(c[d]).join(b)}i=getTextFormatter().unescape(i)}else i="";return this._adapterO?this._adapterO.apply("populateString",i):i},a.prototype.getTagValue=function(i,o,c){var d;hasValue(c)||(c=this.dataItem);for(var g=[],b=/([^.]+)\(([^)]*)\)|([^.]+)/g,j;j=b.exec(i),j!==null;)if(j[3])g.push({prop:j[3]});else{var $=[];if(trim$1(j[2])!="")for(var rt=/'([^']*)'|"([^"]*)"|([0-9\-]+)/g,_e=void 0;_e=rt.exec(j[2]),_e!==null;)$.push(_e[1]||_e[2]||_e[3]);g.push({method:j[1],params:$})}if(c){d=this.getTagValueFromObject(g,c.values),(!hasValue(d)||isObject$1(d))&&(d=this.getTagValueFromObject(g,c));var st=c.dataContext;!hasValue(d)&&st&&(d=this.getTagValueFromObject(g,c.dataContext),hasValue(d)||(d=this.getTagValueFromObject([{prop:i}],st)),!hasValue(d)&&st.dataContext&&(d=this.getTagValueFromObject(g,st.dataContext))),!hasValue(d)&&c.component&&c.component.dataItem!==c&&(d=c.component.getTagValue(i,o))}return hasValue(d)||(d=this.getTagValueFromObject(g,this.populateStringFrom||this)),!hasValue(d)&&this._parent&&(d=this._parent.getTagValue(i,o)),d},a.prototype.getTagValueFromObject=function(i,o,c){for(var d=o,g=!1,b=0,j=i.length;b<j;b++){var $=i[b];if($.prop){if(d=d[$.prop],!hasValue(d))return}else switch($.method){case"formatNumber":var rt=anyToNumber(d);hasValue(rt)&&(d=this.numberFormatter.format(rt,c||$.params[0]||void 0),g=!0);break;case"formatDate":var _e=void 0;if(isString$1(d)?_e=this.dateFormatter.parse(d):_e=anyToDate(d),!isDate$1(_e)||isNaN$1(_e.getTime()))return;hasValue(_e)&&(d=this.dateFormatter.format(_e,c||$.params[0]||void 0),g=!0);break;case"formatDuration":var st=anyToNumber(d);hasValue(st)&&(d=this.durationFormatter.format(st,c||$.params[0]||void 0,$.params[1]||void 0),g=!0);break;case"urlEncode":case"encodeURIComponent":d=encodeURIComponent(d);break;default:d[$.method]&&d[$.method].apply(this,$.params);break}}if(!g){var ut=[{method:"",params:c}];if(!hasValue(c))isNumber$1(d)?(ut[0].method="formatNumber",ut[0].params=""):isDate$1(d)&&(ut[0].method="formatDate",ut[0].params="");else{var gt=getFormat(c);gt===NUMBER?ut[0].method="formatNumber":gt===DATE?ut[0].method="formatDate":gt===DURATION&&(ut[0].method="formatDuration")}ut[0].method&&(d=this.getTagValueFromObject(ut,d))}return d},Object.defineProperty(a.prototype,"dataItem",{get:function(){if(!this._dataItem){if(this.virtualParent)return this.virtualParent.dataItem;if(this._parent)return this._parent.dataItem}return this._dataItem},set:function(i){this.setDataItem(i)},enumerable:!0,configurable:!0}),a.prototype.setDataItem=function(i){var o=this;if(this._dataItem!=i){if(this._dataItem=i,i){if(this.configField){var c=i.dataContext;c&&(this.config=c[this.configField],!this.config&&c.dataContext&&(this.config=c.dataContext[this.configField]))}var d=i.dataContext;if(d){var g=d.dataContext;each$1(this.propertyFields,function(b,j){if(hasValue(d[j])){var $=o;$[b]=d[j]}else if(g){var rt=g[j];if(hasValue(rt)){var $=o;$[b]=rt}}})}}this.invalidate()}},a.prototype.getPropertyValue=function(i){var o=this.properties[i];return this._isTemplate||(this._adapterO&&(o=this._adapterO.apply(i,o)),o=globalAdapter.applyAll(this,i,o)),o},a.prototype.setColorProperty=function(i,o,c){var d=this.properties[i];return o instanceof Color&&d instanceof Color&&o.toString()==d.toString()?!1:this.setPropertyValue(i,o,c)},a.prototype.setPercentProperty=function(i,o,c,d,g,b){if(o=toNumberOrPercent(o),isNumber$1(o))return isNumber$1(g)&&(o=round$1(o,g,b)),this.setPropertyValue(i,o,c,d);var j=this.properties[i];return o instanceof Percent&&j instanceof Percent&&o.value==j.value?!1:this.setPropertyValue(i,o,c,d)},a.prototype.setPropertyValue=function(i,o,c,d){if(this.properties[i]!==o&&!this.isDisposed()){if(this.properties[i]=o,this.events.isEnabled("propertychanged")){var g={type:"propertychanged",target:this,property:i};this.events.dispatchImmediately("propertychanged",g)}if(c&&this.invalidate(),d&&this.invalidatePosition(),this.applyOnClones)for(var b=this.clones.values,j=b.length,$=0;$<j;++$){var rt=b[$];rt.isDisposed()||(rt[i]=o)}return!0}return!1},a.prototype.bind=function(i,o,c,d){var g=this;c===void 0&&(c=i),hasValue(this._bindings[i])&&this._bindings[i].dispose(),this[i]=o[c],this._bindings[i]=o.events.on("propertychanged",function(b){if(b.property===c){var j=o[c];d&&(j=d(j)),g[i]=j}})},a.prototype.observe=function(i,o,c,d){var g=this;return new MultiDisposer(map$1(toArray$2(i),function(b){return g.events.on("propertychanged",function(j){j.property===b&&o.call(c,j)},c,d)}))},a.prototype.applyAccessibility=function(){var i=this.readerTitle,o=this.readerDescription,c=this.role,d=this.readerHidden,g=this.readerChecked,b=this.readerControls,j=this.readerLive,$=this.readerOrientation,rt=this.readerValueNow,_e=this.readerValueText,st=[],ut=[],gt=this.readerLabelledBy;gt&&st.push(gt);var yt=this.readerDescribedBy;if(yt&&ut.push(yt),i)if(st.length||this.showSystemTooltip){var Pt=this.titleElement,wt=this.uid+"-title";Pt.node.textContent!=i&&(Pt.node.textContent=i,Pt.attr({id:wt})),st.push(wt)}else this._titleElement&&(this.group.removeElement(this._titleElement),this._titleElement=void 0),this.setSVGAttribute({"aria-label":i});else this.removeSVGAttribute("aria-label"),this._titleElement&&(this.group.removeElement(this._titleElement),this._titleElement=void 0);if(o){var Ct=this.descriptionElement,At=this.uid+"-description";Ct.node.textContent!=o&&(Ct.node.textContent=o,Ct.attr({id:At})),ut.push(At)}else this._descriptionElement&&(this.group.removeElement(this._descriptionElement),this._descriptionElement=void 0);st.length?this.setSVGAttribute({"aria-labelledby":st.join(" ")}):this.removeSVGAttribute("aria-labelledby"),ut.length?this.setSVGAttribute({"aria-describedby":ut.join(" ")}):this.removeSVGAttribute("aria-describedby"),c?this.setSVGAttribute({role:c}):this.removeSVGAttribute("role"),d?this.setSVGAttribute({"aria-hidden":"true"}):this.removeSVGAttribute("aria-hidden"),g?this.setSVGAttribute({"aria-checked":"true"}):g===!1?this.setSVGAttribute({"aria-checked":"false"}):this.removeSVGAttribute("aria-checked"),b?this.setSVGAttribute({"aria-controls":b}):this.removeSVGAttribute("aria-controls"),j?this.setSVGAttribute({"aria-live":j}):this.removeSVGAttribute("aria-live"),$?this.setSVGAttribute({"aria-orientation":$}):this.removeSVGAttribute("aria-orientation"),rt?this.setSVGAttribute({"aria-valuenow":rt}):this.removeSVGAttribute("aria-valuenow"),_e?this.setSVGAttribute({"aria-valuetext":_e}):this.removeSVGAttribute("aria-valuetext")},Object.defineProperty(a.prototype,"readerTitle",{get:function(){var i=this.getPropertyValue("readerTitle");return hasValue(i)&&this.dataItem?this.populateString(i):i},set:function(i){i=toText(i),this.setPropertyValue("readerTitle",i)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"readerDescription",{get:function(){var i=this.getPropertyValue("readerDescription");return hasValue(i)&&this.dataItem?this.populateString(i):this.getPropertyValue("readerDescription")},set:function(i){i=toText(i),this.setPropertyValue("readerDescription",i)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"role",{get:function(){return this.getPropertyValue("role")},set:function(i){i=toText(i),this.setPropertyValue("role",i)&&(this.applyAccessibility(),i=="slider"&&(this.setSVGAttribute({"aria-valuemin":"0"}),this.setSVGAttribute({"aria-valuemax":"100"})))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"readerHidden",{get:function(){return this.getPropertyValue("readerHidden")},set:function(i){i=toBoolean(i),this.setPropertyValue("readerHidden",i)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"readerChecked",{get:function(){return this.getPropertyValue("readerChecked")},set:function(i){i=toBoolean(i),this.setPropertyValue("readerChecked",i)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"readerControls",{get:function(){return this.getPropertyValue("readerControls")},set:function(i){i=toText(i),this.setPropertyValue("readerControls",i)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"readerLive",{get:function(){return this.getPropertyValue("readerLive")},set:function(i){i=toText(i),this.setPropertyValue("readerLive",i)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"readerLabelledBy",{get:function(){return this.getPropertyValue("readerLabelledBy")},set:function(i){i=toText(i),this.setPropertyValue("readerLabelledBy",i)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"readerDescribedBy",{get:function(){return this.getPropertyValue("readerDescribedBy")},set:function(i){i=toText(i),this.setPropertyValue("readerDescribedBy",i)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"readerOrientation",{get:function(){return this.getPropertyValue("readerOrientation")},set:function(i){i=toText(i),this.setPropertyValue("readerOrientation",i)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"readerValueNow",{get:function(){return this.getPropertyValue("readerValueNow")},set:function(i){i=toText(i),this.setPropertyValue("readerValueNow",i)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"readerValueText",{get:function(){return this.getPropertyValue("readerValueText")},set:function(i){i=toText(i),this.setPropertyValue("readerValueText",i)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"keyboardOptions",{get:function(){if(!this.interactions.keyboardOptions){if(this.virtualParent)return this.virtualParent.keyboardOptions;if(this._parent)return this._parent.keyboardOptions}return this.interactions.keyboardOptions},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"mouseOptions",{get:function(){if(!this.interactions.mouseOptions){if(this.virtualParent)return this.virtualParent.mouseOptions;if(this._parent)return this._parent.mouseOptions}return this.interactions.mouseOptions},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"interactions",{get:function(){if(!this._interaction){var i=getInteraction().getInteraction(this.dom);this._interaction=i,i.clickable=this.clickable,i.hoverable=this.hoverable,i.trackable=this.trackable,i.draggable=this.draggable,i.swipeable=this.swipeable,i.resizable=this.resizable,i.wheelable=this.wheelable,i.contextMenuDisabled=this.contextMenuDisabled,i.inert=this.inert,i.sprite=this,this._disposers.push(i)}return this._interaction},enumerable:!0,configurable:!0}),a.prototype.isInteractive=function(){return!!this._interaction},Object.defineProperty(a.prototype,"focusable",{get:function(){return this.getPropertyValue("focusable")},set:function(i){var o=this;i=toBoolean(i),this.setPropertyValue("focusable",i)&&(!i&&!this.isInteractive()||(this.interactions.focusable=i,i?(this.setSVGAttribute({focusable:i}),hasValue(this._tabindex)||(this.tabindex=0)):(this.removeSVGAttribute("focusable"),this.tabindex=void 0),this.interactions.setEventDisposer("sprite-focusable",i,function(){return new MultiDisposer([o.events.on("blur",o.handleBlur,o,!1),o.events.on("focus",o.handleFocus,o,!1)])})))},enumerable:!0,configurable:!0}),a.prototype.handleFocus=function(i){this.focusable&&(this.topParent&&(this.topParent.hasFocused=!0,this.topParent.focusedElement=this),this.focusFilter&&this.filters.push(this.focusFilter),this.hoverOnFocus&&(this.isHover=!0,this.handleOver()))},a.prototype.handleBlur=function(i){this.focusable&&(this.topParent&&(this.topParent.hasFocused=!1,this.topParent.focusedElement=void 0),this.focusFilter&&this.filters.removeValue(this.focusFilter),this.hoverOnFocus&&(this.isHover=!1,this.handleOut()))},Object.defineProperty(a.prototype,"focusFilter",{get:function(){var i=this._focusFilter;if(i)return i;if(this.virtualParent)return this.virtualParent.focusFilter;if(this._parent)return this._parent.focusFilter},set:function(i){this._focusFilter=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"hoverOnFocus",{get:function(){return this.getPropertyValue("hoverOnFocus")},set:function(i){i!==this.hoverOnFocus&&this.setPropertyValue("hoverOnFocus",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"tabindex",{get:function(){var i=this._tabindex;if(i!=null)return i;if(this.virtualParent)return this.virtualParent.tabindex;if(this._parent)return this._parent.tabindex},set:function(i){i=toNumber(i),this.setPropertyValue("tabindex",i)&&isNumber$1(i)&&(this.interactions.tabindex=i,this.setSVGAttribute({tabindex:i}),this._tabindex=i,this.focusable=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"inertiaOptions",{get:function(){return!this.interactions.inertiaOptions&&this._parent?this._parent.inertiaOptions:this.interactions.inertiaOptions},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"draggable",{get:function(){return this.getPropertyValue("draggable")},set:function(i){var o=this;i=toBoolean(i),this.setPropertyValue("draggable",i)&&(!i&&!this.isInteractive()||(this.applyCursorStyle(),this.interactions.draggable=i,this.interactions.setEventDisposer("sprite-draggable",i,function(){return new MultiDisposer([o.events.on("down",o.handleDown,o,!1),o.events.on("dragstart",o.handleDragStart,o,!1),o.events.on("drag",o.handleDragMove,o,!1),o.events.on("dragstop",o.handleDragStop,o,!1)])})))},enumerable:!0,configurable:!0}),a.prototype.handleDragStart=function(i){(!this.interactions.isTouchProtected||!i.touch)&&(this.interactions.originalPosition={x:this.pixelX,y:this.pixelY},this._isDragged=!0,this.hideTooltip(0))},a.prototype.dragStart=function(i){this._isDragged=!0,getInteraction().dragStart(this.interactions,i)},a.prototype.handleDragStop=function(i){(!this.interactions.isTouchProtected||!i.touch)&&(this._isDragged=!1,this.showTooltip(),this.interactions.originalPosition=void 0)},a.prototype.dragStop=function(i,o){this._isDragged=!1,getInteraction().dragStop(this.interactions,i,o)},a.prototype.handleDragMove=function(i){if(!this.interactions.isTouchProtected||!i.touch){var o=this.interactions.originalPosition;if(o&&this._isDragged){var c=this._parent.globalScale*this.svgContainer.cssScale;this.moveTo({x:o.x+i.shift.x/c,y:o.y+i.shift.y/c},void 0,void 0,!0)}this.dispatchImmediately("dragged",i)}},Object.defineProperty(a.prototype,"inert",{get:function(){return this.getPropertyValue("inert")},set:function(i){i=toBoolean(i),this.setPropertyValue("inert",i)&&(!i&&!this.isInteractive()||(this.interactions.inert=i))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"hoverOptions",{get:function(){if(!this.interactions.hoverOptions){if(this.virtualParent)return this.virtualParent.hoverOptions;if(this._parent)return this._parent.hoverOptions}return this.interactions.hoverOptions},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"hoverable",{get:function(){return this.getPropertyValue("hoverable")},set:function(i){var o=this;i=toBoolean(i),this.setPropertyValue("hoverable",i)&&(!i&&!this.isInteractive()||(this.applyCursorStyle(),this.interactions.hoverable=i,this.interactions.setEventDisposer("sprite-hoverable",i,function(){return new MultiDisposer([o.events.on("over",o.handleOver,o,!1),o.events.on("out",o.handleOut,o,!1)])})))},enumerable:!0,configurable:!0}),a.prototype.handleOver=function(i){if(this._outTimeout&&this._outTimeout.dispose(),this.isHover){this.states.hasKey("hover")&&(this.isHidden||this.applyCurrentState());var o=void 0;i&&i.pointer&&(o=documentPointToSvg(i.pointer.point,this.svgContainer.SVGContainer,this.svgContainer.cssScale)),this.showTooltipOn=="hover"&&this.showTooltip(o)}else this.showTooltipOn=="hover"&&this.hideTooltip(),!this.isHidden&&this.states.hasKey("hover")&&this.applyCurrentState()},a.prototype.handleOut=function(i){var o=this;if(this.tooltip&&this.tooltip.targetSprite==this&&this.tooltip.keepTargetHover){this._outTimeout=this.setTimeout(function(){o.tooltip.isHover||(o.tooltip.targetSprite==o&&o.hideTooltip(),o._outTimeout=o.setTimeout(o.handleOutReal.bind(o),o.rollOutDelay))},10);return}this.showTooltipOn=="hover"&&this.hideTooltip(),this._outTimeout=this.setTimeout(this.handleOutReal.bind(this),this.rollOutDelay)},a.prototype.handleOutReal=function(){!this.isHidden&&!this.isHiding&&this.states.hasKey("hover")&&this.applyCurrentState()},Object.defineProperty(a.prototype,"hitOptions",{get:function(){if(!this.interactions.hitOptions){if(this.virtualParent)return this.virtualParent.hitOptions;if(this._parent)return this._parent.hitOptions}return this.interactions.hitOptions},enumerable:!0,configurable:!0}),a.prototype.handleDown=function(i){this.interactions.downPointers.length===1&&(this.interactions.originalPosition={x:this.pixelX,y:this.pixelY},this.interactions.originalAngle=this.rotation,this.interactions.originalScale=this.scale,this.states.hasKey("down")&&this.setState("down"))},a.prototype.handleUp=function(i){var o=this;this._isResized=!1,this.states.hasKey("down")&&this.applyCurrentState(),this.showTooltipOn=="hit"&&(this.updateTooltipPosition(i.pointer?i.pointer.point:void 0),this._disposers.push(registry.events.once("exitframe",function(){o.showTooltip()})),this._disposers.push(getInteraction().body.events.once("down",function(c){o.hideTooltip()})))},Object.defineProperty(a.prototype,"clickable",{get:function(){return this.getPropertyValue("clickable")},set:function(i){var o=this;i=toBoolean(i),this.setPropertyValue("clickable",i)&&(!i&&!this.isInteractive()||(this.applyCursorStyle(),this.interactions.clickable=i,this.interactions.setEventDisposer("sprite-clickable",i,function(){return new MultiDisposer([o.events.on("down",o.handleDown,o,!1),o.events.on("up",o.handleUp,o,!1)])})))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"togglable",{get:function(){return this.getPropertyValue("togglable")},set:function(i){var o=this;i=toBoolean(i),this.setPropertyValue("togglable",i)&&(!i&&!this.isInteractive()||this.interactions.setEventDisposer("sprite-togglable",i,function(){return o.events.on("hit",o.handleToggle,o,!1)}))},enumerable:!0,configurable:!0}),a.prototype.handleToggle=function(i){this.isActive=!this.isActive},Object.defineProperty(a.prototype,"contextMenuDisabled",{get:function(){return this.getPropertyValue("contextMenuDisabled")},set:function(i){i=toBoolean(i),this.setPropertyValue("contextMenuDisabled",i)&&(this.interactions.contextMenuDisabled=i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"url",{get:function(){return this.getPropertyValue("url")},set:function(i){this.setPropertyValue("url",i)&&(this._urlDisposer&&this._urlDisposer.dispose(),isNotEmpty(i)&&(this._urlDisposer=this.events.on("hit",this.urlHandler,this,!1),this.clickable=!0,this.cursorOverStyle=MouseCursorStyle.pointer))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"baseId",{get:function(){return!this._baseId&&this._parent&&(this.baseId=this._parent.baseId),this._baseId},set:function(i){this.setBaseId(i)},enumerable:!0,configurable:!0}),a.prototype.setBaseId=function(i){i!=this._baseId&&(this.invalid&&(this.invalid=!1,registry.removeFromInvalidSprites(this),this.invalidate()),this._baseId=i)},Object.defineProperty(a.prototype,"baseSprite",{get:function(){if(this.isBaseSprite)return this;if(this._parent)return this._parent.baseSprite},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"urlTarget",{get:function(){return this.getPropertyValue("urlTarget")},set:function(i){this.setPropertyValue("urlTarget",i)},enumerable:!0,configurable:!0}),a.prototype.urlHandler=function(i){if(isNotEmpty(this.url)){var o=this.populateString(this.url);this.urlTarget==="_self"?window.location.href=o:window.open(o,this.urlTarget)}},Object.defineProperty(a.prototype,"swipeOptions",{get:function(){if(!this.interactions.swipeOptions){if(this.virtualParent)return this.virtualParent.swipeOptions;if(this._parent)return this._parent.swipeOptions}return this.interactions.swipeOptions},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"swipeable",{get:function(){return this.getPropertyValue("swipeable")},set:function(i){i=toBoolean(i),this.setPropertyValue("swipeable",i)&&(this.applyCursorStyle(),!i&&!this.isInteractive()||(this.interactions.swipeable=i))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"trackable",{get:function(){return this.getPropertyValue("trackable")},set:function(i){i=toBoolean(i),this.setPropertyValue("trackable",i)&&(!i&&!this.isInteractive()||(this.applyCursorStyle(),this.interactions.trackable=i))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"wheelable",{get:function(){return this.getPropertyValue("wheelable")},set:function(i){this.setPropertyValue("wheelable",i)&&(!i&&!this.isInteractive()||(this.applyCursorStyle(),this.interactions.wheelable=i))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"resizable",{get:function(){return this.getPropertyValue("resizable")},set:function(i){var o=this;i=toBoolean(i),this.setPropertyValue("resizable",i)&&(!i&&!this.isInteractive()||(this.applyCursorStyle(),this.interactions.resizable=i,this.interactions.setEventDisposer("sprite-resizable",i,function(){return new MultiDisposer([o.events.on("down",o.handleDown,o,!1),o.events.on("resize",o.handleResize,o,!1)])})))},enumerable:!0,configurable:!0}),a.prototype.handleResize=function(i){if((!this.interactions.isTouchProtected||!i.touch)&&(this._isResized=!0,this.scale=this.interactions.originalScale*i.scale,this.validatePosition(),this.draggable||this.dragWhileResize)){this._isDragged=!1;var o=documentPointToSvg(i.point1,this.htmlContainer,this.svgContainer.cssScale),c=documentPointToSvg(i.point2,this.htmlContainer,this.svgContainer.cssScale),d=getMidPoint(o,c),g=documentPointToSprite(i.startPoint1,this._parent),b=documentPointToSprite(i.startPoint2,this._parent),j=this.interactions.originalPosition,$=this.interactions.originalScale;if(j){var rt={x:(g.x-j.x)/$,y:(g.y-j.y)/$},_e={x:(b.x-j.x)/$,y:(b.y-j.y)/$},st=getMidPoint(rt,_e),ut=svgPointToSprite(d,this._parent);this.moveTo({x:ut.x-st.x*this.scale,y:ut.y-st.y*this.scale},void 0,void 0,!0)}}},Object.defineProperty(a.prototype,"cursorOptions",{get:function(){if(!this.interactions.cursorOptions){if(this.virtualParent)return this.virtualParent.cursorOptions;if(this._parent)return this._parent.cursorOptions}return this.interactions.cursorOptions},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"cursorOverStyle",{set:function(i){this.cursorOptions.overStyle||(this.interactions.cursorOptions={defaultStyle:this.cursorOptions.defaultStyle}),this.cursorOptions.overStyle=i,getInteraction().applyCursorOverStyle(this.interactions)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"cursorDownStyle",{set:function(i){this.cursorOptions.downStyle=i},enumerable:!0,configurable:!0}),a.prototype.applyCursorStyle=function(){},Object.defineProperty(a.prototype,"interactionsEnabled",{get:function(){var i=this.getPropertyValue("interactionsEnabled");return i===!1?!1:this.virtualParent?this.virtualParent.interactionsEnabled:this._parent?this._parent.interactionsEnabled:!0},set:function(i){if(i=toBoolean(i),this.setPropertyValue("interactionsEnabled",i)){var o=null;i?this.group.node.style.pointerEvents="":o="none",this.group.node.style.pointerEvents=o}},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"exporting",{get:function(){return this.getExporting()},set:function(i){this._exporting.set(i,i)},enumerable:!0,configurable:!0}),a.prototype.getExporting=function(){var i=this._exporting.get();if(i)return i;if(this.isStandaloneInstance||!this._parent)i=new Export(this.svgContainer.SVGContainer),i.sprite=this,i.language=this.language,i.numberFormatter=this.numberFormatter,i.dateFormatter=this.dateFormatter,i.durationFormatter=this.durationFormatter,this._exporting.set(i,i);else return this._parent.exporting;return i},Object.defineProperty(a.prototype,"exportable",{get:function(){return this._exportable},set:function(i){var o=this.svgContainer;this._exportable=i,o&&(i?remove(o.nonExportableSprites,this):indexOf(o.nonExportableSprites,this)==-1&&o.nonExportableSprites.push(this))},enumerable:!0,configurable:!0}),a.prototype.modalPrefix=function(i){return i=options.classNamePrefix+i,i},Object.defineProperty(a.prototype,"modal",{get:function(){var i=this.svgContainer;if(i){var o=i.modal;return o.adapter.has("classPrefix",this.modalPrefix)||o.adapter.add("classPrefix",this.modalPrefix),o}},enumerable:!0,configurable:!0}),a.prototype.openModal=function(i,o){var c=this.svgContainer;if(c)return c.openModal(i,o)},a.prototype.closeModal=function(){var i=this.svgContainer;i&&i.closeModal()},Object.defineProperty(a.prototype,"popups",{get:function(){var i=this.svgContainer;if(i){var o=i.popups;return o.template.sprite=this,o.template.adapter.has("classPrefix",this.modalPrefix)||o.template.adapter.add("classPrefix",this.modalPrefix),o}},enumerable:!0,configurable:!0}),a.prototype.openPopup=function(i,o){var c=this.svgContainer;if(c)return c.openPopup(i,o)},a.prototype.closeAllPopups=function(){var i=this.svgContainer;i&&i.closeAllPopups()},Object.defineProperty(a.prototype,"x",{get:function(){return this.getPropertyValue("x")},set:function(i){this.isDragged||this.setPercentProperty("x",i,!1,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"pixelX",{get:function(){var i=fitToRange(this.getPixelX(this.x),this.minX,this.maxX);return this._adapterO?this._adapterO.apply("pixelX",i):i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"relativeX",{get:function(){return this._adapterO?this._adapterO.apply("relativeX",this.getRelativeX(this.x)):this.getRelativeX(this.x)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"minX",{get:function(){return this.getPropertyValue("minX")},set:function(i){isNumber$1(i)&&(i=round$1(i,this._positionPrecision,!0),this.setPropertyValue("minX",i,!1,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"maxX",{get:function(){return this.getPropertyValue("maxX")},set:function(i){isNumber$1(i)&&(i=round$1(i,this._positionPrecision,!0),this.setPropertyValue("maxX",i,!1,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"y",{get:function(){return this.getPropertyValue("y")},set:function(i){this.isDragged||this.setPercentProperty("y",i,!1,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"pixelY",{get:function(){var i=fitToRange(this.getPixelY(this.y),this.minY,this.maxY);return this._adapterO?this._adapterO.apply("pixelY",i):i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"relativeY",{get:function(){return this._adapterO?this._adapterO.apply("relativeY",this.getRelativeX(this.y)):this.getRelativeX(this.y)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"minY",{get:function(){return this.getPropertyValue("minY")},set:function(i){isNumber$1(i)&&(i=round$1(i,this._positionPrecision,!0),this.setPropertyValue("minY",i,!1,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"maxY",{get:function(){return this.getPropertyValue("maxY")},set:function(i){isNumber$1(i)&&(i=round$1(i,this._positionPrecision,!0),this.setPropertyValue("maxY",i,!1,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"dx",{get:function(){return this.getPropertyValue("dx")},set:function(i){isNumber$1(i)&&(i=round$1(i,this._positionPrecision,!0),this.setPropertyValue("dx",i,!1,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"dy",{get:function(){return this.getPropertyValue("dy")},set:function(i){isNumber$1(i)&&(i=round$1(i,this._positionPrecision,!0),this.setPropertyValue("dy",i,!1,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"rotation",{get:function(){return this.getPropertyValue("rotation")},set:function(i){i=toNumber(i),isNumber$1(i)||(i=0),this.setPropertyValue("rotation",i,!1,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"align",{get:function(){return this.getPropertyValue("align")},set:function(i){i=toText(i),this.setPropertyValue("align",i)&&this._parent&&this._parent.invalidateLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"valign",{get:function(){return this.getPropertyValue("valign")},set:function(i){i=toText(i),this.setPropertyValue("valign",i)&&this._parent&&this._parent.invalidateLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"horizontalCenter",{get:function(){return this.getPropertyValue("horizontalCenter")},set:function(i){i=toText(i),this.setPropertyValue("horizontalCenter",i)&&this.updateCenter()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"verticalCenter",{get:function(){return this.getPropertyValue("verticalCenter")},set:function(i){i=toText(i),this.setPropertyValue("verticalCenter",i)&&this.updateCenter()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"maxWidth",{get:function(){var i=this.getPropertyValue("maxWidth");if(!isNumber$1(i)&&this._parent){var o=this._parent.maxWidth;return this._parent.layout!="absolute"&&this.align!="none"&&this.align!=null&&(o=o-this.pixelMarginLeft-this.pixelMarginRight),o}return i},set:function(i){this.setMaxWidth(i)},enumerable:!0,configurable:!0}),a.prototype.setMaxWidth=function(i){var o=this.maxWidth,c=this.maxHeight;if(this.setPropertyValue("maxWidth",i)){isNumber$1(this.relativeWidth)&&this.invalidate();var d={type:"maxsizechanged",target:this,previousWidth:o,previousHeight:c};this.dispatchImmediately("maxsizechanged",d)}},Object.defineProperty(a.prototype,"maxHeight",{get:function(){var i=this.getPropertyValue("maxHeight");if(!isNumber$1(i)&&this._parent){var o=this._parent.maxHeight;return this._parent.layout!="absolute"&&this.valign!="none"&&this.valign!=null&&(o=o-this.pixelMarginTop-this.pixelMarginBottom),o}return i},set:function(i){this.setMaxHeight(i)},enumerable:!0,configurable:!0}),a.prototype.setMaxHeight=function(i){var o=this.maxWidth,c=this.maxHeight;if(this.setPropertyValue("maxHeight",i)){isNumber$1(this.relativeHeight)&&this.invalidate();var d={type:"maxsizechanged",target:this,previousWidth:o,previousHeight:c};this.dispatchImmediately("maxsizechanged",d)}},Object.defineProperty(a.prototype,"minWidth",{get:function(){return this.getPropertyValue("minWidth")},set:function(i){this.setPropertyValue("minWidth",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"minHeight",{get:function(){return this.getPropertyValue("minHeight")},set:function(i){this.setPropertyValue("minHeight",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"width",{get:function(){return this.getPropertyValue("width")},set:function(i){var o=this.setPercentProperty("width",i,!0,!1,this._positionPrecision,!0);o&&(this.percentWidth=void 0,this.relativeWidth=void 0,i instanceof Percent?(this.percentWidth=i.percent,isNumber$1(this._pixelWidth)&&(this.maxWidth=void 0),this._pixelWidth=void 0):(this._pixelWidth=Number(i),this.maxWidth=this._pixelWidth),this.invalidatePosition())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"height",{get:function(){return this.getPropertyValue("height")},set:function(i){var o=this.setPercentProperty("height",i,!0,!1,this._positionPrecision,!0);o&&(this.percentHeight=void 0,this._relativeHeight=void 0,i instanceof Percent?(this.percentHeight=i.percent,isNumber$1(this._pixelHeight)&&(this.maxHeight=void 0),this._pixelHeight=void 0):(this._pixelHeight=Number(i),this.maxHeight=this._pixelHeight),this.invalidatePosition())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"pixelWidth",{get:function(){var i;isNumber$1(this.percentWidth)?i=this.maxWidth:isNumber$1(this._pixelWidth)?i=this._pixelWidth:i=0;var o=this.minWidth;o!=null&&i<o&&(i=o);var c=round$1(i,this._positionPrecision,!0);return this._adapterO?this._adapterO.apply("pixelWidth",c):c},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"pixelHeight",{get:function(){var i;isNumber$1(this.percentHeight)?i=this.maxHeight:isNumber$1(this._pixelHeight)?i=this._pixelHeight:i=0;var o=this.minHeight;o!=null&&i<o&&(i=o);var c=round$1(i,this._positionPrecision,!0);return this._adapterO?this._adapterO.apply("pixelHeight",c):c},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"relativeWidth",{get:function(){var i=this._relativeWidth;if(isNumber$1(i))return this._adapterO?this._adapterO.apply("relativeWidth",i):i},set:function(i){this._relativeWidth!=i&&(this._relativeWidth=i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"relativeHeight",{get:function(){var i=this._relativeHeight;if(isNumber$1(i))return this._adapterO?this._adapterO.apply("relativeHeight",i):i},set:function(i){this._relativeHeight!=i&&(this._relativeHeight=i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"measuredWidth",{get:function(){return this.disabled||this.__disabled?0:this._adapterO?this._adapterO.apply("measuredWidth",this._measuredWidth):this._measuredWidth},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"measuredHeight",{get:function(){return this.disabled||this.__disabled?0:this._adapterO?this._adapterO.apply("measuredHeight",this._measuredHeight):this._measuredHeight},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"outerWidth",{get:function(){var i=this.pixelWidth+this.pixelMarginRight+this.pixelMarginLeft;return this._adapterO?this._adapterO.apply("outerWidth",i):i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"outerHeight",{get:function(){var i=this.pixelHeight+this.pixelMarginTop+this.pixelMarginBottom;return this._adapterO?this._adapterO.apply("outerHeight",i):i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"innerWidth",{get:function(){var i=Math.max(0,this.pixelWidth-this.pixelPaddingRight-this.pixelPaddingLeft);return this._adapterO?this._adapterO.apply("innerWidth",i):i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"innerHeight",{get:function(){var i=Math.max(0,this.pixelHeight-this.pixelPaddingTop-this.pixelPaddingBottom);return this._adapterO?this._adapterO.apply("innerHeight",i):i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"globalScale",{get:function(){var i=this.scale;return this._parent&&(i=i*this._parent.globalScale),this._adapterO?this._adapterO.apply("globalScale",i):i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"scale",{get:function(){return this.getPropertyValue("scale")},set:function(i){i=toNumber(i),i<0&&(i=0),i!=this.getPropertyValue("scale")&&(this.setPropertyValue("scale",i,!1,!0),this.handleGlobalScale())},enumerable:!0,configurable:!0}),a.prototype.margin=function(i,o,c,d){return this.marginTop=i,this.marginRight=o,this.marginBottom=c,this.marginLeft=d,this},Object.defineProperty(a.prototype,"marginLeft",{get:function(){return this.getPropertyValue("marginLeft")},set:function(i){this.setPercentProperty("marginLeft",i,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"marginRight",{get:function(){return this.getPropertyValue("marginRight")},set:function(i){this.setPercentProperty("marginRight",i,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"marginTop",{get:function(){return this.getPropertyValue("marginTop")},set:function(i){this.setPercentProperty("marginTop",i,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"marginBottom",{get:function(){return this.getPropertyValue("marginBottom")},set:function(i){this.setPercentProperty("marginBottom",i,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"pixelMarginRight",{get:function(){var i=this.getPixelX(this.marginRight);return this._adapterO?this._adapterO.apply("pixelMarginRight",i):i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"relativeMarginRight",{get:function(){var i=this.getRelativeX(this.marginRight);return this._adapterO?this._adapterO.apply("relativeMarginRight",i):i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"pixelMarginLeft",{get:function(){var i=this.getPixelX(this.marginLeft);return this._adapterO?this._adapterO.apply("pixelMarginLeft",i):i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"relativeMarginLeft",{get:function(){var i=this.getRelativeX(this.marginLeft);return this._adapterO?this._adapterO.apply("relativeMarginLeft",i):i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"pixelMarginTop",{get:function(){var i=this.getPixelY(this.marginTop);return this._adapterO?this._adapterO.apply("pixelMarginTop",i):i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"relativeMarginTop",{get:function(){var i=this.getRelativeY(this.marginTop);return this._adapterO?this._adapterO.apply("relativeMarginTop",i):i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"pixelMarginBottom",{get:function(){var i=this.getPixelY(this.marginBottom);return this._adapterO?this._adapterO.apply("pixelMarginBottom",i):i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"relativeMarginBottom",{get:function(){var i=this.getRelativeY(this.marginBottom);return this._adapterO?this._adapterO.apply("relativeMarginBottom",i):i},enumerable:!0,configurable:!0}),a.prototype.padding=function(i,o,c,d){return this.paddingTop=i,this.paddingRight=o,this.paddingBottom=c,this.paddingLeft=d,this},Object.defineProperty(a.prototype,"paddingLeft",{get:function(){return this.getPropertyValue("paddingLeft")},set:function(i){this.setPercentProperty("paddingLeft",i,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"paddingRight",{get:function(){return this.getPropertyValue("paddingRight")},set:function(i){this.setPercentProperty("paddingRight",i,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"paddingTop",{get:function(){return this.getPropertyValue("paddingTop")},set:function(i){this.setPercentProperty("paddingTop",i,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"paddingBottom",{get:function(){return this.getPropertyValue("paddingBottom")},set:function(i){this.setPercentProperty("paddingBottom",i,!0,!0,this._positionPrecision,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"pixelPaddingRight",{get:function(){return this.getPixelX(this.paddingRight)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"relativePaddingRight",{get:function(){return this.getRelativeX(this.paddingRight)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"pixelPaddingLeft",{get:function(){return this.getPixelX(this.paddingLeft)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"relativePaddingLeft",{get:function(){return this.getRelativeX(this.paddingLeft)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"pixelPaddingTop",{get:function(){return this.getPixelY(this.paddingTop)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"relativePaddingTop",{get:function(){return this.getRelativeY(this.paddingTop)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"pixelPaddingBottom",{get:function(){return this.getPixelY(this.paddingBottom)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"relativePaddingBottom",{get:function(){return this.getRelativeY(this.paddingBottom)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"path",{get:function(){return this.getPropertyValue("path")},set:function(i){this.setPath(i)},enumerable:!0,configurable:!0}),a.prototype.setPath=function(i){return this.setPropertyValue("path",i)?(this._adapterO&&(i=this._adapterO.apply("path",i)),this._isPath||((!this.element||this.element.node&&!(this.element.node instanceof SVGPathElement))&&(this.element=this.paper.add("path")),this._isPath=!0),hasValue(i)?this.element.attr({d:i}):this.element.removeAttr("d"),this.invalidatePosition(),this.inited||this.events.once("inited",this.validatePosition,this,!1),!0):!1},Object.defineProperty(a.prototype,"fillModifier",{get:function(){return this.getPropertyValue("fillModifier")},set:function(i){this.setPropertyValue("fillModifier",i)&&this.setFill(this.fill)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"strokeModifier",{get:function(){return this.getPropertyValue("strokeModifier")},set:function(i){this.setPropertyValue("strokeModifier",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"fillOpacity",{get:function(){return this.getPropertyValue("fillOpacity")},set:function(i){i=toNumberRange(i,0,1),this.setPropertyValue("fillOpacity",i)&&this.setSVGAttribute({"fill-opacity":i})},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"fill",{get:function(){return this.getPropertyValue("fill")},set:function(i){this.setFill(i)},enumerable:!0,configurable:!0}),a.prototype.setFill=function(i){if((!isObject$1(i)||"r"in i)&&(i=toColor(i)),this.setColorProperty("fill",i)||this.fillModifier){if(i instanceof Color&&this.fillModifier&&(i=this.fillModifier.modify(i)),this.realFill=i,i instanceof Color)this.setSVGAttribute({fill:i.toString()});else if(!hasValue(i))this.removeSVGAttribute("fill");else if(i instanceof Pattern||i instanceof LinearGradient||i instanceof RadialGradient){var o=i;o.paper=this.paper,this.setSVGAttribute({fill:'url("'+getBaseURI()+o.id+'")'})}}},Object.defineProperty(a.prototype,"opacity",{get:function(){return this.getPropertyValue("opacity")},set:function(i){i=toNumberRange(i,0,1),this.setPropertyValue("opacity",i)&&this.setSVGAttribute({opacity:i})},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"stroke",{get:function(){return this.getPropertyValue("stroke")},set:function(i){this.setStroke(i)},enumerable:!0,configurable:!0}),a.prototype.setStroke=function(i){if((!isObject$1(i)||"r"in i)&&(i=toColor(i)),this.setColorProperty("stroke",i)||this.strokeModifier){if(i instanceof Color&&this.strokeModifier&&(i=this.strokeModifier.modify(i)),this.realStroke=i,i instanceof Color)i.hex=="none"?this.removeSVGAttribute("stroke"):this.setSVGAttribute({stroke:i.toString()});else if(!hasValue(i))this.removeSVGAttribute("stroke");else if(i instanceof Pattern||i instanceof LinearGradient||i instanceof RadialGradient){var o=i;o.paper=this.paper,this.setSVGAttribute({stroke:'url("'+getBaseURI()+o.id+'")'})}}},Object.defineProperty(a.prototype,"strokeOpacity",{get:function(){return this.getPropertyValue("strokeOpacity")},set:function(i){i=toNumberRange(i,0,1),this.setPropertyValue("strokeOpacity",i)&&this.setSVGAttribute({"stroke-opacity":i})},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"nonScalingStroke",{get:function(){return this.getPropertyValue("nonScalingStroke")},set:function(i){i=toBoolean(i),this.setPropertyValue("nonScalingStroke",i)&&(this.strokeWidth=this.strokeWidth)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"nonScaling",{get:function(){return this.getPropertyValue("nonScaling")},set:function(i){i=toBoolean(i),this.setPropertyValue("nonScaling",i,!1,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"strokeWidth",{get:function(){return this.getPropertyValue("strokeWidth")},set:function(i){i=toNumber(i),this.setPropertyValue("strokeWidth",i,!0),this.nonScalingStroke&&(isNumber$1(i)||(i=1),i=i/this.globalScale),this.setSVGAttribute({"stroke-width":i})},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"strokeDasharray",{get:function(){return this.getPropertyValue("strokeDasharray")},set:function(i){i=toText(i),this.setPropertyValue("strokeDasharray",i)&&this.setSVGAttribute({"stroke-dasharray":i})},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"strokeDashoffset",{get:function(){return this.getPropertyValue("strokeDashoffset")},set:function(i){i=toNumber(i),this.setPropertyValue("strokeDashoffset",i)&&this.setSVGAttribute({"stroke-dashoffset":i})},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"strokeLinecap",{get:function(){return this.getPropertyValue("strokeLinecap")},set:function(i){this.setPropertyValue("strokeLinecap",i)&&this.setSVGAttribute({"stroke-linecap":i})},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"strokeLinejoin",{get:function(){return this.getPropertyValue("strokeLinejoin")},set:function(i){this.setPropertyValue("strokeLinejoin",i)&&this.setSVGAttribute({"stroke-linejoin":i})},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"shapeRendering",{get:function(){return this.getPropertyValue("shapeRendering")},set:function(i){i=toText(i),this.setPropertyValue("shapeRendering",i)&&this.setSVGAttribute({"shape-rendering":i})},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"pixelPerfect",{get:function(){return this.getPropertyValue("pixelPerfect")},set:function(i){i=toBoolean(i),i?this._positionPrecision=options.pixelPerfectPrecision:this._positionPrecision=3,this.setPropertyValue("pixelPerfect",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"rtl",{get:function(){return hasValue(this._rtl)?this._rtl:this._topParent?this._topParent.rtl:!1},set:function(i){i=toBoolean(i),this.isBaseSprite&&(this.topParent.rtl=i),this._rtl=i},enumerable:!0,configurable:!0}),a.prototype.show=function(i){return this.showReal(i)},a.prototype.showReal=function(i){var o=this;if(!this.preventShow){var c,d=this.defaultState.properties;if(!this.disabled&&(this.isHidden||!this.visible||this.isHiding||d.opacity!=null&&this.opacity<d.opacity&&!this.isShowing)&&!this.isDisposed()){this.invalid&&this.validate(),this.positionInvalid&&this.validatePosition(),isNumber$1(i)||(i=this.defaultState.transitionDuration),this._hideAnimation&&(this._hideAnimation.kill(),this._hideAnimation=void 0),this._showHideDisposer&&this.removeDispose(this._showHideDisposer),this._isHidden=!1,this.isHiding=!1,this.isShowing=!0,c=this.applyCurrentState(i),c&&!c.isFinished()?(this._showHideDisposer=c.events.on("animationended",function(){o.isShowing=!1}),this._disposers.push(this._showHideDisposer)):this.isShowing=!1;var g=this.defaultState.properties.visible;hasValue(g)||(g=!0),this.visible=g,this.readerHidden=!1,this.dispatchImmediately("shown")}return c}},a.prototype.hide=function(i){return this.hideReal(i)},a.prototype.hideReal=function(i){var o=this,c;if(!this.isHiding&&this.visible&&!this.isDisposed()){this.tooltip&&this.tooltip.currentSprite==this&&this.hideTooltip(0),this._hideAnimation&&(this._hideAnimation.kill(),this._hideAnimation=void 0),this.isShowing=!1,this._showHideDisposer&&this.removeDispose(this._showHideDisposer);var d=this.hiddenState;d?(c=this.setState(d,i,void 0),c&&!c.isFinished()?(this._hideAnimation=c,this._showHideDisposer=c.events.on("animationended",function(){o.isHiding=!1,o._isHidden=!0,d.properties.visible==!1&&(o.visible=!1)},this),this._disposers.push(this._showHideDisposer),this._disposers.push(c)):(this.isHiding=!1,this._isHidden=!0)):(this.visible=!1,this.isHiding=!1,this._isHidden=!0),this.readerHidden=!0,this.dispatchImmediately("hidden"),this.invalidate()}return isNumber$1(i)||(i=this.hiddenState.transitionDuration),c},Object.defineProperty(a.prototype,"visible",{get:function(){return this.getVisibility()},set:function(i){i=toBoolean(i),this.setVisibility(i)},enumerable:!0,configurable:!0}),a.prototype.getVisibility=function(){var i=this.getPropertyValue("visible");return hasValue(i)||(i=!0),i},a.prototype.setVisibility=function(i){if(this.setPropertyValue("visible",i)&&(i?this.group.removeAttr("visibility"):this.group.attr({visibility:"hidden"}),this.events.isEnabled("visibilitychanged"))){var o={type:"visibilitychanged",target:this,visible:i};this.events.dispatchImmediately("visibilitychanged",o)}},Object.defineProperty(a.prototype,"zIndex",{get:function(){return this.getPropertyValue("zIndex")},set:function(i){i=toNumber(i),this.setPropertyValue("zIndex",i)&&this.dispatch("zIndexChanged")},enumerable:!0,configurable:!0}),a.prototype.toFront=function(){var i=this._parent;i&&i.children.indexOf(this)!=i.children.length-1&&(i.children.moveValue(this,i.children.length-1),this.dispatch("zIndexChanged"))},a.prototype.toBack=function(){var i=this._parent;i&&i.children.indexOf(this)!=0&&(i.children.moveValue(this,0),this.dispatch("zIndexChanged"))},Object.defineProperty(a.prototype,"userClassName",{get:function(){return this.getPropertyValue("userClassName")},set:function(i){this.setPropertyValue("userClassName",i)&&(!i&&this.userClassName&&this.group.removeClass(this.userClassName),this.setClassName())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"tooltip",{get:function(){if(this._tooltip)return this._tooltip;if(this.virtualParent)return this.virtualParent.tooltip;if(this._parent)return this._parent.tooltip},set:function(i){this._tooltip&&this.removeDispose(this._tooltip),this._tooltip=i,i&&(i.parent=this.tooltipContainer)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"tooltipDataItem",{get:function(){var i=this._tooltipDataItem;return i||this.dataItem},set:function(i){this._tooltipDataItem=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"tooltipColorSource",{get:function(){return this._tooltipColorSource},set:function(i){this._tooltipColorSource=i},enumerable:!0,configurable:!0}),a.prototype.showTooltip=function(i){this.showTooltipOn=="always"&&!this._tooltip&&this.tooltip&&(this._tooltip=this.tooltip.clone()),!i&&this.tooltipPosition=="pointer"&&this.isHover&&(i=documentPointToSvg(getInteraction().lastPointer.point,this.svgContainer.SVGContainer,this.svgContainer.cssScale));for(var o=this;o!=null;){if(!o.visible||o.disabled||o.__disabled){this._tooltip&&this._tooltip.visible&&this._tooltip.hide(0);return}o=o.parent}if(hasValue(this.tooltipText)||hasValue(this.tooltipHTML)){var c=this.tooltip,d=this.tooltipDataItem;if(c){c.targetSprite=this;var g=this,b=this.tooltipColorSource;if((c.getStrokeFromObject||c.getFillFromObject)&&b&&(b.isTemplate?d&&eachContinue$2(d.sprites,function(ut){return ut.clonedFrom==b?(g=ut,!1):!0}):g=b),c.getStrokeFromObject){for(var j=this.stroke,$=g;$.parent!=null&&(j=$.stroke,j==null&&($=$.parent),j==null););j instanceof Color?c.background.animate({property:"stroke",to:j},c.animationDuration):c.background.stroke=j}if(c.dataItem=d,c.label.populateStringFrom=this,c.getFillFromObject){for(var rt=this.fill,$=g;$.parent!=null;)if(rt=$.fill,rt==null||rt instanceof Color&&rt.rgb==null)$=$.parent;else if(rt!=null)break;rt==null&&(rt=color("#000000")),rt instanceof Color&&c.visible?c.background.animate({property:"fill",to:rt},c.animationDuration):c.background.fill=rt,c.autoTextColor&&rt instanceof Color&&(c.label.fill=rt.alternative)}var _e="";if(this.tooltipHTML&&(c.html=this.tooltipHTML,_e=this.tooltipHTML),this.tooltipText&&(c.text=this.tooltipText,_e=this.tooltipText),this.updateTooltipPosition(i))if(c.readerDescribedBy=this.uidAttr(),c.label.invalid&&c.label.validate(),_e!=null&&_e!=""&&c.label.currentText!=""){c&&!c.parent&&(c.parent=this.tooltipContainer);var st=c.defaultState.transitionDuration;return st<=0&&(st=1),c.show(st),c.currentSprite=this,!0}else this.hideTooltip(0);else this.hideTooltip(0)}}return!1},a.prototype.updateTooltipPosition=function(i){var o=this;if(this.tooltipPosition=="pointer"){if(this._interactionDisposer&&this._interactionDisposer.dispose(),this._interactionDisposer=getInteraction().body.events.on("track",function(d){return o.pointTooltipTo(documentPointToSvg(d.point,o.svgContainer.SVGContainer,o.svgContainer.cssScale),!0)}),i)return this.pointTooltipTo(i,!0)}else{var c=spritePointToSvg({x:this.getTooltipX(),y:this.getTooltipY()},this);return this.pointTooltipTo(c)}},a.prototype.pointTooltipTo=function(i,o){var c=this.tooltip;return c&&this.topParent&&(c.showInViewport||isInRectangle(i,{x:0,y:0,width:this.topParent.maxWidth,height:this.topParent.maxHeight}))?(c.pointTo(i,o),!0):!1},a.prototype.hideTooltip=function(i){if(this.showTooltipOn!="always"){var o=this.tooltip;o&&(o.targetSprite==this&&(o.targetSprite=void 0),o.hide(i),this._interactionDisposer&&(this._interactionDisposer.dispose(),this._interactionDisposer=void 0))}},Object.defineProperty(a.prototype,"tooltipHTML",{get:function(){return this.getPropertyValue("tooltipHTML")},set:function(i){i=toText(i),this.hoverable=!0,this.setPropertyValue("tooltipHTML",i)&&this.tooltip&&this.tooltip.visible&&this.showTooltip()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"tooltipText",{get:function(){return this.getPropertyValue("tooltipText")},set:function(i){i=toText(i),i&&(this.hoverable=!0),this.setPropertyValue("tooltipText",i)&&this.tooltip&&this.tooltip.visible&&this.showTooltip()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"tooltipContainer",{get:function(){if(this._tooltipContainer)return this._tooltipContainer;if(this._parent)return this._parent.tooltipContainer},set:function(i){this._tooltipContainer=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"tooltipX",{get:function(){return this.getTooltipX()},set:function(i){this.setPercentProperty("tooltipX",i)&&this.tooltip&&this.tooltip.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"alwaysShowTooltip",{get:function(){return this.getPropertyValue("showTooltipOn")=="always"},set:function(i){i=toBoolean(i),i&&(this.showTooltipOn="always")},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"showTooltipOn",{get:function(){return this.getPropertyValue("showTooltipOn")},set:function(i){this.setPropertyValue("showTooltipOn",i)&&(i=="hit"&&(this.clickable=!0),this.tooltip&&(i=="always"?this.showTooltip():this.handleAlwaysShowTooltip()))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"tooltipPosition",{get:function(){return this.getPropertyValue("tooltipPosition")},set:function(i){this.setPropertyValue("tooltipPosition",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"tooltipY",{get:function(){return this.getTooltipY()},set:function(i){this.setPercentProperty("tooltipY",i)&&this.tooltip&&this.tooltip.invalidate()},enumerable:!0,configurable:!0}),a.prototype.getTooltipX=function(){var i=this.getPropertyValue("tooltipX");hasValue(i)||(i=percent(50));var o;return isNumber$1(i)&&(o=i),i instanceof Percent&&(o=this.maxLeftSelf+this._measuredWidthSelf*i.value-this.pixelPaddingLeft-this.ex),isNumber$1(o)||(o=0),o},a.prototype.getTooltipY=function(){var i=this.getPropertyValue("tooltipY");hasValue(i)||(i=percent(50));var o;return isNumber$1(i)&&(o=i),i instanceof Percent&&(o=this.maxTopSelf+this._measuredHeightSelf*i.value-this.pixelPaddingTop-this.ey),isNumber$1(o)||(o=0),o},a.prototype.raiseCriticalError=function(i,o){this.svgContainer&&(this._adapterO?this.modal.content=this._adapterO.apply("criticalError",i).message:this.modal.content=i.message,o?this.modal.closable=!0:this.disabled=!0,options.suppressErrors||this.modal.open()),options.verbose&&console.log(i)},a.prototype.processConfig=function(i){i&&(hasValue(i.tooltipColorSource)&&isString$1(i.tooltipColorSource)&&this.map.hasKey(i.tooltipColorSource)&&(i.tooltipColorSource=this.map.getKey(i.tooltipColorSource)),hasValue(i.cursorOverStyle)&&isString$1(i.cursorOverStyle)&&(i.cursorOverStyle=this.getCursorStyle(i.cursorOverStyle)),hasValue(i.cursorDowntyle)&&isString$1(i.cursorDowntyle)&&(i.cursorDowntyle=this.getCursorStyle(i.cursorDowntyle)),hasValue(i.cursorOptions)&&(hasValue(i.cursorOptions.overStyle)&&isString$1(i.cursorOptions.overStyle)&&(i.cursorOptions.overStyle=this.getCursorStyle(i.cursorOptions.overStyle)),hasValue(i.cursorOptions.downStyle)&&isString$1(i.cursorOptions.downStyle)&&(i.cursorOptions.downStyle=this.getCursorStyle(i.cursorOptions.downStyle)))),e.prototype.processConfig.call(this,i),this.processDelayedMap()},a.prototype.getCursorStyle=function(i){switch(i){case"grab":return MouseCursorStyle.grab;case"grabbing":return MouseCursorStyle.grabbing;case"pointer":return MouseCursorStyle.pointer;case"horizontalResize":return MouseCursorStyle.horizontalResize;case"verticalResize":return MouseCursorStyle.verticalResize;default:return MouseCursorStyle.default}},a.prototype.configOrder=function(i,o){return i==o?0:i=="tooltipColorSource"?1:o=="tooltipColorSource"?-1:e.prototype.configOrder.call(this,i,o)},Object.defineProperty(a.prototype,"isHidden",{get:function(){return this._isHidden?this._isHidden:this._parent?this._parent.isHidden:!1},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"showOnInit",{get:function(){return this.getPropertyValue("showOnInit")},set:function(i){i=toBoolean(i),this.setShowOnInit(i)},enumerable:!0,configurable:!0}),a.prototype.setShowOnInit=function(i){this.setPropertyValue("showOnInit",i)&&(this.isTemplate||(i&&!this.inited&&!this.hidden?(this._showOnInitDisposer=new MultiDisposer([registry.events.once("enterframe",this.hideInitially,this),this.events.once("beforevalidated",this.hideInitially,this,!1),this.events.on("inited",this.appear,this,!1)]),this._disposers.push(this._showOnInitDisposer)):this._showOnInitDisposer&&this._showOnInitDisposer.dispose()))},a.prototype.hideInitially=function(){this.isDisposed()||(this.appeared=!1,this.inited||this.hide(0))},a.prototype.appear=function(){var i=this;if(this.appeared=!1,!this.hidden&&!this.isHidden&&this.hide(0),this.hidden)this.appeared=!0,this.dispatch("appeared");else{var o=this.show();o&&!o.isFinished()?this.addDisposer(o.events.on("animationended",function(){i.appeared=!0,i.dispatch("appeared")})):(this.appeared=!0,this.dispatch("appeared"))}},Object.defineProperty(a.prototype,"hidden",{get:function(){return this.getPropertyValue("hidden")},set:function(i){i=toBoolean(i),this.setPropertyValue("hidden",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"bbox",{get:function(){return this.definedBBox?this.definedBBox:this._bbox},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"plugins",{get:function(){var i=this;return this._plugins||(this._plugins=new List,this._disposers.push(this._plugins.events.on("inserted",function(o){o.newValue.target=i,o.newValue.init()})),this._disposers.push(new ListDisposer(this._plugins))),this._plugins},enumerable:!0,configurable:!0}),a.prototype._systemUpdate=function(i){this.validate()},a.prototype._systemCheckIfValidate=function(){return!0},a.prototype._systemValidatePositions=function(){this.validatePosition()},a.prototype._systemValidateLayouts=function(){},a}(BaseObjectEvents);registry.registeredClasses.Sprite=Sprite;var Rectangle=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="Rectangle",i.element=i.paper.add("rect"),i.applyTheme(),i}return a.prototype.draw=function(){e.prototype.draw.call(this);var i=this._positionPrecision;this.pixelPerfect&&(i=0);var o=round$1(this.innerWidth,i),c=round$1(this.innerHeight,i);this.element.attr({width:o,height:c})},a.prototype.measureElement=function(){},Object.defineProperty(a.prototype,"bbox",{get:function(){return this.definedBBox?this.definedBBox:this.isMeasured?{x:0,y:0,width:this.innerWidth,height:this.innerHeight}:{x:0,y:0,width:0,height:0}},enumerable:!0,configurable:!0}),a}(Sprite);registry.registeredClasses.Rectangle=Rectangle;var Container=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i._childrenByLayout=[],i._childrenDisposers=new Dictionary,i.hasFocused=!1,i.setStateOnSprites=[],i.layoutInvalid=!1,i._absoluteWidth=0,i._absoluteHeight=0,i._shouldBeReady=[],i._tapToActivate=!1,i.tapTimeout=3e3,i.className="Container",i._element=i.paper.addGroup("g"),i.group.add(i.element),i.setPropertyValue("pixelPerfect",!1),i.setPropertyValue("layout","absolute"),i.setPropertyValue("fixedWidthGrid",!1),i.setPropertyValue("verticalCenter","none"),i.setPropertyValue("horizontalCenter","none"),i._positionPrecision=4,i._disposers.push(new DictionaryDisposer(i._childrenDisposers)),i.children.events.on("inserted",i.handleChildAdded,i),i.children.events.on("removed",i.handleChildRemoved,i),i.applyTheme(),i}return a.prototype.handleChildAdded=function(i){this.processChild(i.newValue)},a.prototype.processChild=function(i){try{this._childrenDisposers.insertKey(i.uid,new MultiDisposer([i.events.on("transformed",this.handleChildTransform,this),i.events.on("zIndexChanged",this.sortAndAdd,this)]))}catch{}if(this.element){var o=this.element;o.add(i.group)}i.parent=this,i.paper=this.paper,this.dispatchImmediately("childadded",{type:"childadded",newValue:i}),this.invalidate()},a.prototype.sortAndAdd=function(){this.sortChildren(),this.addChildren()},a.prototype.handleChildRemoved=function(i){var o=i.oldValue;if(this._childrenDisposers.removeKey(o.uid),this.element){var c=this.element;c.removeElement(o.group)}o.isMeasured&&this.invalidateLayout(),this.dispatchImmediately("childremoved",{type:"childremoved",oldValue:o})},a.prototype.handleChildTransform=function(i){var o=i.target;o.isMeasured&&this.invalidateLayout()},a.prototype.invalidateLayout=function(){this.layoutInvalid||this.disabled||this.isTemplate||this.layout=="none"||this.__disabled||(this.layoutInvalid=!0,registry.addToInvalidLayouts(this),system.requestFrame())},a.prototype.invalidate=function(){e.prototype.invalidate.call(this),this.invalidateLayout()},a.prototype.deepInvalidate=function(){e.prototype.invalidate.call(this),each$2(this._childrenByLayout,function(i){i instanceof a?i.deepInvalidate():i.invalidate()}),this.invalidateLayout()},Object.defineProperty(a.prototype,"children",{get:function(){return this._children||(this._children=new List),this._children},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"minWidth",{get:function(){return this.getPropertyValue("minWidth")},set:function(i){this.setPropertyValue("minWidth",i)&&this.invalidateLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"minHeight",{get:function(){return this.getPropertyValue("minHeight")},set:function(i){this.setPropertyValue("minHeight",i)&&this.invalidateLayout()},enumerable:!0,configurable:!0}),a.prototype.removeElement=function(){},a.prototype.sortChildren=function(){var i=this;if(this._childrenByLayout=[],this.layout=="none"||this.layout=="absolute"||!this.layout)this._childrenByLayout=this.children.values;else{var o=[],c=[];each(this.children.iterator(),function(d){i.layout=="horizontal"||i.layout=="grid"?isNumber$1(d.percentWidth)?c.push(d):o.push(d):i.layout=="vertical"&&isNumber$1(d.percentHeight)?c.push(d):o.push(d)}),this._childrenByLayout=o.concat(c)}this.calculateRelativeSize()},a.prototype.calculateRelativeSize=function(){var i=this,o=0,c=0;each$2(this._childrenByLayout,function(d){d.isMeasured&&(isNumber$1(d.percentWidth)&&(o+=d.percentWidth),isNumber$1(d.percentHeight)&&(c+=d.percentHeight))}),each$2(this._childrenByLayout,function(d){d.isMeasured&&(i.layout=="horizontal"&&(isNumber$1(d.percentWidth)&&(d.relativeWidth=d.percentWidth/o),isNumber$1(d.percentHeight)&&(d.relativeHeight=d.percentHeight/100)),i.layout=="vertical"&&(isNumber$1(d.percentHeight)&&(d.relativeHeight=d.percentHeight/c),isNumber$1(d.percentWidth)&&(d.relativeWidth=d.percentWidth/100)),i.layout=="grid"&&(isNumber$1(d.percentHeight)&&(d.relativeHeight=d.percentHeight/100),isNumber$1(d.percentWidth)&&(d.relativeWidth=d.percentWidth/100))),(i.layout=="absolute"||!d.isMeasured)&&(isNumber$1(d.percentWidth)&&(d.relativeWidth=d.percentWidth/100),isNumber$1(d.percentHeight)&&(d.relativeHeight=d.percentHeight/100))})},a.prototype.addChildren=function(){if(this.element){var i=copy$3(this.children.values),o=i.map(function(j,$){return{idx:$,data:j}});o.sort(function(j,$){var rt=j.data.zIndex||0,_e=$.data.zIndex||0;return rt<_e?-1:rt>_e?1:j.idx-$.idx}),i=o.map(function(j){return j.data});var c=this.element,d=!0;if(c.node&&c.node.childNodes){for(var g=0,b=c.node.childNodes.length;g<b;g++)if(c.node.childNodes[g]!=i[g].group.node){d=!1;break}}d||(each$2(i,function(j){j.group&&c.add(j.group)}),this._background&&this.group.addToBack(this._background.group),this.invalidateLayout())}},a.prototype.createChild=function(i){var o=new i;return o.parent=this,o},a.prototype.removeChildren=function(){for(;this.children.length>0;){var i=this.children.getIndex(0);i.parent=void 0,this.children.removeValue(i)}},a.prototype.disposeChildren=function(){for(;this.children.length>0;){var i=this.children.getIndex(0);i.dispose(),this.children.removeValue(i)}},Object.defineProperty(a.prototype,"background",{get:function(){return this._background||(this._background=this.createBackground(),this.processBackground()),this._background},set:function(i){this._background&&this.background!=i&&this.removeDispose(this._background),i&&(this._background=i,this._disposers.push(i),this.processBackground())},enumerable:!0,configurable:!0}),a.prototype.handleGlobalScale=function(){e.prototype.handleGlobalScale.call(this),this.children.each(function(i){i.handleGlobalScale()})},a.prototype.createBackground=function(){return new Rectangle},a.prototype.processBackground=function(){var i=this._background;i&&(i.isMeasured=!1,this._background.fill=new InterfaceColorSet().getFor("background"),i.parent=this,i.isMeasured=!1,this.children.removeValue(i),this._disposers.push(i),this.group.addToBack(this._background.group))},a.prototype.validateLayout=function(){var i=this;registry.removeFromInvalidLayouts(this),this.layoutInvalid=!1,this._availableWidth=this.innerWidth,this._availableHeight=this.innerHeight;var o=0,c=0,d=!0;this.children&&(this.sortChildren(),each$2(this._childrenByLayout,function(g){var b,j;if(isNumber$1(g.relativeWidth)?(b=round$1(i._availableWidth*g.relativeWidth,2),i.layout=="horizontal"&&(b-=g.pixelMarginRight+g.pixelMarginLeft)):i.layout=="horizontal"&&g.invalid&&g.validate(),isNumber$1(g.relativeHeight)?(j=round$1(i._availableHeight*g.relativeHeight,2),i.layout=="vertical"&&(j-=g.pixelMarginTop+g.pixelMarginBottom)):i.layout=="vertical"&&g.invalid&&g.validate(),g.invalid==!1){if(isNumber$1(g.relativeWidth)&&(g.maxWidth=b),isNumber$1(g.relativeHeight)&&(g.maxHeight=j),g.isMeasured){i.layout=="horizontal"&&(isNumber$1(g.percentWidth)||g.measuredWidth>0&&(i._availableWidth-=g.measuredWidth+g.pixelMarginLeft+g.pixelMarginRight)),i.layout=="vertical"&&(isNumber$1(g.percentHeight)||g.measuredHeight>0&&(i._availableHeight-=g.measuredHeight+g.pixelMarginTop+g.pixelMarginBottom));var $=g.measuredWidth,rt=g.measuredHeight;g.align!="none"&&($+=g.pixelMarginLeft+g.pixelMarginRight),g.valign!="none"&&(rt+=g.pixelMarginTop+g.pixelMarginBottom),o=Math.max(o,$),c=Math.max(c,rt)}}else g.isMeasured&&(isNumber$1(g.relativeWidth)&&g.maxWidth!=b&&(g.maxWidth=b,d=!1),isNumber$1(g.relativeHeight)&&g.maxHeight!=j&&(g.maxHeight=j,d=!1))})),this._absoluteWidth=o,this._absoluteHeight=c,d&&this.arrange()},a.prototype.arrange=function(){var i=this,o=this.children,c=0,d=0,g=max$1(this.innerWidth,this._absoluteWidth),b=max$1(this.innerHeight,this._absoluteHeight),j,$,rt,_e,st=this.pixelPaddingLeft,ut=this.pixelPaddingRight,gt=this.pixelPaddingTop,yt=this.pixelPaddingBottom,Pt=0,wt=0,Ct=0,At=0,Tt=[],kt=[],It,Lt,Ft,Nt=this.maxWidth,Ht=this.maxHeight,Gr=this.minWidth,hs=this.minHeight,_s=copy$3(o.values);if(this.reverseOrder&&_s.reverse(),this.layout=="grid"){Lt=Nt,It=1;for(var hn=0,Qn=_s.length;hn<Qn;hn++){var ds=_s[hn];if(ds.isMeasured&&!ds.disabled&&!ds.__disabled){var un=ds.measuredWidth;un<Lt&&(Lt=un),un>It&&(It=un)}}Lt=fitToRange(Lt,1,Nt),It=fitToRange(It,1,Nt),this.fixedWidthGrid?Ft=Nt/It:Ft=Nt/Lt,Ft=max$1(1,Math.floor(Ft)),Ft=min$1(this.maxColumns,Ft),Tt=this.getColumnWidth(_s,Ft,It)}for(var dr,us,Nn,gn,hn=0,Qn=_s.length;hn<Qn;hn++){var ds=_s[hn];if(ds.isMeasured&&!ds.disabled&&!ds.__disabled){var Zn=void 0,xu=void 0,au=ds.pixelMarginLeft,Vv=ds.pixelMarginRight,wu=ds.pixelMarginTop,a1=ds.pixelMarginBottom,P0=ds.measuredWidth,B0=ds.measuredHeight,q1=void 0,ox=void 0,N_=void 0,eS=void 0;switch(this.layout){case"none":break;case"absolute":switch(ds.align){case"left":Zn=au-ds.maxLeft;break;case"center":Zn=(g-P0)/2-ds.maxLeft;break;case"right":Zn=g-Vv-ds.maxRight;break;default:ds.x instanceof Percent||(Zn=ds.pixelX);break}switch(ds.valign){case"top":xu=wu-ds.maxTop;break;case"middle":xu=(b-B0)/2-ds.maxTop;break;case"bottom":xu=b-a1-ds.maxBottom;break;default:ds.y instanceof Percent||(xu=ds.pixelY);break}break;case"vertical":switch(ds.align){case"left":Zn=au-ds.maxLeft;break;case"center":Zn=(g-P0)/2-ds.maxLeft;break;case"right":Zn=g-Vv-ds.maxRight;break;default:Zn=ds.pixelX;break}xu=wt+wu-ds.maxTop,wt=xu+ds.maxBottom+a1;break;case"horizontal":switch(ds.valign){case"top":xu=wu-ds.maxTop;break;case"middle":xu=(b-B0)/2-ds.maxTop;break;case"bottom":xu=b-a1-ds.maxBottom;break;default:xu=ds.pixelY;break}Zn=Pt+au-ds.maxLeft,Pt=Zn+ds.maxRight+Vv;break;case"grid":switch(Zn=Pt+au-ds.maxLeft,ds.valign){case"top":xu=wt+wu-ds.maxTop;break;case"middle":xu=wt+(b-B0)/2-ds.maxTop;break;case"bottom":xu=wt+b-a1-ds.maxBottom;break;default:xu=wt-ds.maxTop;break}Pt+=Tt[At],kt[Ct]=max$1(kt[Ct],B0),At++;var tS=Tt[At];if(isNumber$1(tS)||(tS=It),Pt>min$1(this.innerWidth,Nt)-tS+1&&At<Ft){Ft=At,Pt=0,wt=0,Ct=0,At=0,Tt=this.getColumnWidth(_s,Ft,It),kt=[],hn=-1;continue}At>=Ft&&(At=0,wt+=kt[Ct],Ct++,Pt=0);break}this.layout!=="none"&&(ds.moveTo({x:Zn,y:xu}),q1=Zn+ds.maxLeft-au,ox=Zn+ds.maxRight+Vv,N_=xu+ds.maxTop-wu,eS=xu+ds.maxBottom+a1,(ox>$||!isNumber$1($))&&($=ox),(q1<j||!isNumber$1(j))&&(j=q1),(N_<rt||!isNumber$1(rt))&&(rt=N_),(eS>_e||!isNumber$1(_e))&&(_e=eS),(ox>us||!isNumber$1(us))&&(us=ox),(q1<dr||!isNumber$1(dr))&&(dr=q1),(N_<Nn||!isNumber$1(Nn))&&(Nn=N_),(eS>gn||!isNumber$1(gn))&&(gn=gn))}else ds.validatePosition()}if(this.layout=="none"){var tA=this.bbox;j=tA.x,$=tA.x+tA.width,rt=tA.y,_e=tA.y+tA.height}isNumber$1(j)||(j=0,dr=0),isNumber$1($)||($=this._availableWidth,us=$),isNumber$1(rt)||(rt=0,Nn=0),isNumber$1(_e)||(_e=this._availableHeight,gn=_e),isNumber$1(Nn)||(Nn=0),isNumber$1(gn)||(gn=Nn),isNumber$1(dr)||(dr=0),isNumber$1(us)||(us=dr),c=$-j,d=_e-rt,isNumber$1(this.relativeWidth)&&(c=Nt-st-ut,j=0,$=c),isNumber$1(this.relativeHeight)&&(d=Ht-gt-yt,rt=0,_e=d),isNumber$1(this._pixelWidth)&&(j=0,c=this._pixelWidth-st-ut),isNumber$1(Gr)&&c<Gr&&(j=0,c=this.minWidth-st-ut),isNumber$1(this._pixelHeight)&&(rt=0,d=this._pixelHeight-gt-yt),isNumber$1(hs)&&d<hs&&(rt=0,d=hs-gt-yt);var aR=us-dr,sR=gn-Nn;if(this.layout!="none"&&(this.contentAlign||this.contentValign)&&o.length>0){var AA,SA,IO=c,pO=d;IO<aR&&(IO=aR),pO<sR&&(pO=sR),this.contentAlign=="center"&&(AA=(IO-aR)/2),this.contentAlign=="right"&&(AA=IO-aR),this.contentValign=="middle"&&(SA=(pO-sR)/2),this.contentValign=="bottom"&&(SA=pO-sR),isNumber$1(AA)&&each(o.iterator(),function(C3){var q3=C3.maxLeft,qx=AA;i.layout=="horizontal"&&(C3.x=C3.pixelX+qx),i.layout=="grid"&&(C3.x=C3.pixelX+qx),i.layout=="vertical"&&(qx+=C3.pixelMarginLeft,C3.align=="none"&&(C3.x=qx-q3)),i.layout=="absolute"&&(qx+=C3.pixelMarginLeft,C3.align=="none"&&(C3.x=qx-q3))}),isNumber$1(SA)&&each(o.iterator(),function(C3){var q3=C3.maxTop,qx=SA;i.layout=="horizontal"&&(qx+=C3.pixelMarginTop,C3.valign=="none"&&(C3.y=qx-q3)),i.layout=="grid"&&(qx+=C3.pixelMarginTop,C3.y=qx-q3),i.layout=="vertical"&&(C3.y=C3.pixelY+qx),i.layout=="absolute"&&(qx+=C3.pixelMarginTop,C3.valign=="none"&&(C3.y=qx-q3))})}var Su=this.bbox;c=max$1(c,Gr),d=max$1(d,hs),this.contentWidth=c,this.contentHeight=d,c=min$1(c,Nt),d=min$1(d,Ht),this._bbox={x:j,y:rt,width:c,height:d};var mu=this.maxLeft,ax=this.maxTop,tE=this.maxBottom,So=this.maxRight;if(this.measure(),(mu!=this.maxLeft||So!=this.maxRight||ax!=this.maxTop||tE!=this.maxBottom)&&this.events.isEnabled("transformed")){var fD={type:"transformed",target:this};Su&&(fD.dummyData=Su.width+" "+c+"  "+Su.height+" "+d),this.events.dispatchImmediately("transformed",fD)}this.dispatchImmediately("layoutvalidated")},a.prototype.updateCenter=function(){e.prototype.updateCenter.call(this),this.updateBackground()},a.prototype.updateBackground=function(){var i=this._background;i&&(i.x=this.maxLeft,i.y=this.maxTop,i.width=this.maxRight-this.maxLeft,i.height=this.maxBottom-this.maxTop)},a.prototype.getColumnWidth=function(i,o,c){var d=this,g=[],b=0;return each$2(i,function(j){j.isMeasured&&!j.disabled&&!j.__disabled&&(d.fixedWidthGrid?g[b]=c:g[b]=max$1(g[b],j.measuredWidth+j.pixelMarginRight+j.pixelMarginLeft),b++,b==o&&(b=0))}),g},Object.defineProperty(a.prototype,"layout",{get:function(){return this.getPropertyValue("layout")},set:function(i){this.setPropertyValue("layout",i)&&this.invalidateLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"contentValign",{get:function(){return this.getPropertyValue("contentValign")},set:function(i){this.setPropertyValue("contentValign",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"contentAlign",{get:function(){return this.getPropertyValue("contentAlign")},set:function(i){this.setPropertyValue("contentAlign",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"fixedWidthGrid",{get:function(){return this.getPropertyValue("fixedWidthGrid")},set:function(i){this.setPropertyValue("fixedWidthGrid",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"maxColumns",{get:function(){return this.getPropertyValue("maxColumns")},set:function(i){this.setPropertyValue("maxColumns",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"reverseOrder",{get:function(){return this.getPropertyValue("reverseOrder")},set:function(i){this.setPropertyValue("reverseOrder",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"setStateOnChildren",{get:function(){return this.getPropertyValue("setStateOnChildren")},set:function(i){this.setPropertyValue("setStateOnChildren",i,!0)},enumerable:!0,configurable:!0}),a.prototype.fitsToBounds=function(i){var o=i.x,c=i.y,d=.5;return o>=-d&&o<=this.pixelWidth+d&&c>=-d&&c<=this.pixelHeight+d},a.prototype.copyFrom=function(i){var o=this;e.prototype.copyFrom.call(this,i),this.layout=i.layout,this.setStateOnChildren=i.setStateOnChildren,i._background&&(this.background=i._background.clone(),this.background.copyFrom(i._background)),each(i.children.iterator(),function(c){if(c.shouldClone){var d=c.clone();d.parent=o}})},Object.defineProperty(a.prototype,"preloader",{get:function(){var i=this._preloader;if(i)return i;if(this.parent)return this.parent.preloader},set:function(i){this._preloader&&this.removeDispose(this._preloader),this._preloader=i,i&&(i.parent=this.tooltipContainer,this._disposers.push(i))},enumerable:!0,configurable:!0}),a.prototype.setPaper=function(i){var o=this,c=e.prototype.setPaper.call(this,i);return c&&(this._background&&(this._background.paper=i,this._background.topParent=this.topParent),this.children.each(function(d){d.setPaper(i),d.topParent=o.topParent})),c},a.prototype.removeFromInvalids=function(){e.prototype.removeFromInvalids.call(this),registry.removeFromInvalidLayouts(this)},a.prototype.setDataItem=function(i){this._dataItem!=i&&(each(this.children.iterator(),function(o){o.dataItem=i}),this._background&&(this._background.dataItem=i)),e.prototype.setDataItem.call(this,i)},a.prototype.measureElement=function(){this.disabled||this.isTemplate||this.layout=="none"||this.__disabled||this.validateLayout()},Object.defineProperty(a.prototype,"fontFamily",{get:function(){return this.getPropertyValue("fontFamily")},set:function(i){this.setPropertyValue("fontFamily",i,!0)&&(this.setSVGAttribute({"font-family":i}),this.invalidateLabels())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"fontSize",{get:function(){return this.getPropertyValue("fontSize")},set:function(i){this.setPropertyValue("fontSize",i,!0)&&(this.setSVGAttribute({"font-size":i}),this.invalidateLabels())},enumerable:!0,configurable:!0}),a.prototype.invalidateLabels=function(){this.children.each(function(i){i.hardInvalidate?(i.hardInvalidate(),i.events.once("validated",i.handleValidate,i,!1)):i instanceof a&&i.invalidateLabels()})},Object.defineProperty(a.prototype,"fontWeight",{get:function(){return this.getPropertyValue("fontWeight")},set:function(i){this.setPropertyValue("fontWeight",i),this.setSVGAttribute({"font-weight":i})},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"textDecoration",{get:function(){return this.getPropertyValue("textDecoration")},set:function(i){this.setPropertyValue("textDecoration",i),this.setSVGAttribute({"text-decoration":i})},enumerable:!0,configurable:!0}),a.prototype.dispose=function(){this._background&&this._background.dispose(),this._shouldBeReady=[],this.disposeChildren(),e.prototype.dispose.call(this)},a.prototype.setState=function(i,o,c){var d=i;return i instanceof SpriteState&&(d=i.name),this.setStateOnChildren&&each(this.children.iterator(),function(g){g.setState(d,o,c),d!="active"&&(g.isActive=!1)}),this._background&&this._background.setState(d),this.setStateOnSprites.length&&each$2(this.setStateOnSprites,function(g){g.setState(d,o,c)}),e.prototype.setState.call(this,i,o,c)},a.prototype.setActive=function(i){e.prototype.setActive.call(this,i),this._background&&(this._background.isActive=i)},a.prototype.dispatchReady=function(){var i=this;if(!this.isReady()&&!this.isDisposed()){var o=!0;eachContinue(this.children.iterator(),function(c){return!c.__disabled&&!c.disabled&&!c.isReady()?(o=!1,!1):!0}),eachContinue$2(this._shouldBeReady,function(c){return!c.__disabled&&!c.disabled&&!c.isReady()?(o=!1,!1):!0}),o?e.prototype.dispatchReady.call(this):registry.events.once("exitframe",function(){i.dispatchReady(),system.requestFrame()},void 0,!1)}},a.prototype._systemUpdate=function(i){this.children.each(function(o){o.invalid&&(o._systemCheckIfValidate()?o.dataItem&&o.dataItem.component&&o.dataItem.component.dataInvalid?i.push(o):o.validate():i.push(o))}),e.prototype._systemUpdate.call(this,i)},a.prototype._systemValidatePositions=function(){this.children.each(function(i){i.positionInvalid&&i.validatePosition()}),e.prototype._systemValidatePositions.call(this)},a.prototype._systemValidateLayouts=function(){this.layoutInvalid&&!this.isDisposed()&&this.validateLayout()},Object.defineProperty(a.prototype,"tapToActivate",{get:function(){return this._tapToActivate},set:function(i){this._tapToActivate!=i&&this.setTapToActivate(i)},enumerable:!0,configurable:!0}),a.prototype.setTapToActivate=function(i){var o=this;this._tapToActivate=i,this.interactions.isTouchProtected=i,i&&this.interactions.setEventDisposer("container-tapToActivate",i,function(){return new MultiDisposer([o.events.on("hit",o.handleTapToActivate,o,!1),o.events.on("down",o.initTapTimeout,o,!1),o.events.on("track",o.initTapTimeout,o,!1),getInteraction().body.events.on("down",function(c){getInteraction().isLocalElement(c.pointer,o.paper.svg,o.uid)||o.handleTapToActivateDeactivation()},o,!1)])}),getInteraction()},a.prototype.handleTapToActivate=function(){this.interactions.isTouchProtected=!1,this.initTapTimeout()},a.prototype.handleTapToActivateDeactivation=function(){this.interactions.isTouchProtected=!0},a.prototype.initTapTimeout=function(){var i=this;this._tapToActivateTimeout&&this._tapToActivateTimeout.dispose(),this.tapToActivate&&!this.interactions.isTouchProtected&&this.tapTimeout&&(this._tapToActivateTimeout=this.setTimeout(function(){i.handleTapToActivateDeactivation()},this.tapTimeout))},a.prototype.moveHtmlContainer=function(i){var o=getElement(i);if(o){this.htmlContainer=o;var c=this.svgContainer;c.htmlElement=o,c.htmlElement.appendChild(c.SVGContainer),c.initSensor(),c.measure()}else isString$1(i)&&i!=""&&system.log("html container '"+i+"' not found")},a.prototype.hasLicense=function(){if(options.commercialLicense)return!0;for(var i=0;i<options.licenses.length;i++)if(options.licenses[i].match(/^CH.{5,}/i))return!0;return!1},a}(Sprite);registry.registeredClasses.Container=Container;var System=function(){function e(){this._isPaused=!1,this.animations=[],this.uid=registry.getUniqueId(),this.dummyCounter=0,this._frameRequested=!1,this.updateStepDuration=45,this.time=Date.now()}return e.prototype.reportTime=function(a,i){this.dummyCounter<6,i&&(this.time=Date.now())},e.prototype.update=function(){var a=this;if(!this._isPaused){this._frameRequested=!1;var i=Date.now();registry.dispatchImmediately("enterframe");var o=[];for(var c in registry.invalidDatas)if(hasKey(registry.invalidDatas,c)){for(var d=registry.invalidDatas[c];d.length>0;){var g=d[0],b=g.dataProvider;if(g.isDisposed())remove(d,g);else if(b&&b.dataInvalid)try{if(b.validateData(),b.dataValidationProgress<1)break}catch(_e){remove(d,b),b.raiseCriticalError(_e)}else try{if(g.validateData(),g.dataValidationProgress<1)break}catch(_e){remove(d,g),g.raiseCriticalError(_e)}}if(Date.now()-i>this.updateStepDuration)break}for(;registry.invalidRawDatas.length>0;){var g=registry.invalidRawDatas[0];if(g.isDisposed())remove(registry.invalidRawDatas,g);else try{g.validateRawData()}catch(st){remove(registry.invalidRawDatas,g),g.raiseCriticalError(st)}}for(;registry.invalidDataItems.length>0;){var g=registry.invalidDataItems[0],b=g.dataProvider;if(!(g.isDisposed()||g.dataInvalid||b&&b.dataInvalid))try{g.validateDataItems()}catch(ut){remove(registry.invalidDataItems,g),g.raiseCriticalError(ut)}remove(registry.invalidDataItems,g)}for(;registry.invalidDataRange.length>0;){var g=registry.invalidDataRange[0],b=g.dataProvider;if(!(g.isDisposed()||g.dataInvalid||b&&b.dataInvalid))try{g.validateDataRange(),g.skipRangeEvent||g.dispatchImmediately("datarangechanged"),g.skipRangeEvent=!1}catch(ut){remove(registry.invalidDataRange,g),g.raiseCriticalError(ut)}remove(registry.invalidDataRange,g)}var j=[];each$1(registry.invalidLayouts,function(_e){a.validateLayouts(_e)}),each$1(registry.invalidPositions,function(_e){a.validatePositions(_e)});var $=!1;if(i=Date.now(),each$1(registry.invalidSprites,function(_e,st){for(var ut=0;st.length>0;){if(a.validateLayouts(_e),a.validatePositions(_e),ut++,ut==5){if(Date.now()-i>a.updateStepDuration)break;ut=0}var gt=st[st.length-1];if(gt&&!gt.isDisposed()){if(!gt._systemCheckIfValidate())j.push(gt);else if(!a.checkIfValidate2(gt))j.push(gt);else try{gt._systemUpdate(j)}catch(yt){gt.invalid=!1,remove(st,gt),gt.raiseCriticalError(yt)}gt.invalid=!1}remove(st,gt)}registry.invalidSprites[_e]=registry.invalidSprites[_e].concat(j)}),each$1(registry.invalidSprites,function(_e,st){st.length>0&&($=!0)}),each$1(registry.invalidDatas,function(_e,st){st.length>0&&($=!0)}),each$2(copy$3(this.animations),function(_e){_e.update()}),each$1(registry.invalidLayouts,function(_e){a.validateLayouts(_e)}),each$1(registry.invalidPositions,function(_e){a.validatePositions(_e)}),triggerIdle(),each$1(registry.invalidLayouts,function(_e){a.validateLayouts(_e)}),each$1(registry.invalidPositions,function(_e){a.validatePositions(_e)}),registry.dispatchImmediately("exitframe"),($||this.animations.length>0||o.length>0)&&this.requestFrame(),this.updateStepDuration<200){var rt=!0;each$1(registry.invalidDatas,function(_e,st){st.length>0&&(rt=!1)}),each$1(registry.invalidSprites,function(_e,st){st.length>0&&(rt=!1)}),rt&&(this.updateStepDuration=200)}}},e.prototype.checkIfValidate2=function(a){return!(a.dataItem&&a.dataItem.component&&a.dataItem.component.dataInvalid&&!a.dataItem.component.isTemplate)},e.prototype.requestFrame=function(){var a=this;this._frameRequested||(raf(function(){a.update()}),this._frameRequested=!0)},e.prototype.softInvalidate=function(a){var i=this;a.children.each(function(o){o instanceof Container&&i.softInvalidate(o),o.measureFailed&&(is(o,"Label")?o.hardInvalidate():o.invalidate(),o.measureFailed=!1)})},e.prototype.validatePositions=function(a){for(var i=registry.invalidPositions[a];i.length>0;){var o=i[i.length-1];if(o.isDisposed())remove(i,o);else try{o._systemValidatePositions()}catch(c){o.positionInvalid=!1,remove(i,o),o.raiseCriticalError(c)}}},e.prototype.validateLayouts=function(a){for(var i=registry.invalidLayouts[a];i.length>0;){var o=i[i.length-1];if(o.isDisposed())remove(i,o);else try{o.children.each(function(c){c._systemValidateLayouts()}),o.validateLayout()}catch(c){o.layoutInvalid=!1,remove(i,o),o.raiseCriticalError(c)}}},e.prototype.log=function(a){log(a)},Object.defineProperty(e.prototype,"isPaused",{get:function(){return this._isPaused},set:function(a){this._isPaused=a,a||(this._frameRequested=!1,this.requestFrame())},enumerable:!0,configurable:!0}),e.VERSION="4.10.38",e}(),system=new System,DataParser=function(){function e(){}return e.prototype.parse=function(a){return[]},Object.defineProperty(e.prototype,"parsableNumbers",{get:function(){return this.options.numberFields&&this.options.numberFields.length>0},enumerable:!0,configurable:!0}),e.prototype.maybeToNumber=function(a,i){return this.options.numberFields.indexOf(a)!==-1?anyToNumber(i):i},Object.defineProperty(e.prototype,"parsableDates",{get:function(){return this.options.dateFields&&this.options.dateFields.length>0},enumerable:!0,configurable:!0}),e.prototype.maybeToDate=function(a,i){return this.options.dateFields.indexOf(a)!==-1?this.options.dateFormatter.parse(i,this.dateFormat):i},e.prototype.maybeToEmpty=function(a){return(!hasValue(a)||a=="")&&hasValue(this.options.emptyAs)?this.options.emptyAs:a},Object.defineProperty(e.prototype,"dateFormatter",{get:function(){return this.options.dateFormatter||(this.options.dateFormatter=new DateFormatter,this.options.dateFormat&&(this.options.dateFormat=this.options.dateFormat)),this.options.dateFormatter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateFormat",{get:function(){return this.options.dateFormat||this.dateFormatter.inputDateFormat},enumerable:!0,configurable:!0}),e}(),separators=[",",";","	"],CSVParser=function(e){__extends(a,e);function a(){var i=e!==null&&e.apply(this,arguments)||this;return i.contentType="text/csv",i.options={delimiter:"",reverse:!1,skipRows:0,skipEmpty:!0,useColumnNames:!1},i}return a.isCSV=function(i){return!!a.getDelimiterFromData(i)},a.getDelimiterFromData=function(i){var o=i.split(`
`),c=o.length,d;return each$2(separators,function(g){for(var b=0,j=0,$=0;$<c;++$)if(b=o[$].split(g).length,b>1){if(j===0)j=b;else if(b!=j){j=0;break}}else{j=0;break}j&&(d=g)}),d},a.prototype.parse=function(i){this.options.delimiter||(this.options.delimiter=a.getDelimiterFromData(i));var o=this.CSVToArray(i,this.options.delimiter),c=hasValue(this.options.emptyAs),d=this.parsableNumbers,g=this.parsableDates,b=[],j=[],$,rt;for(rt=0;rt<this.options.skipRows;rt++)o.shift();if(this.options.useColumnNames){j=o.shift();for(var _e=0;_e<j.length;_e++)$=hasValue(j[_e])?j[_e].replace(/^\s+|\s+$/gm,""):"",$===""&&($="col"+_e),j[_e]=$}for(var st;st=this.options.reverse?o.pop():o.shift(),!!st;)if(!(this.options.skipEmpty&&st.length===1&&st[0]==="")){var ut={};for(rt=0;rt<st.length;rt++)$=j[rt]===void 0?"col"+rt:j[rt],ut[$]=st[rt]===""?this.options.emptyAs:st[rt],c&&(ut[$]=this.maybeToEmpty(ut[$])),d&&(ut[$]=this.maybeToNumber($,ut[$])),g&&(ut[$]=this.maybeToDate($,ut[$]));b.push(ut)}return b},a.prototype.CSVToArray=function(i,o){o=o||",";for(var c=new RegExp("(\\"+o+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+o+"\\r\\n]*))","gi"),d=[[]],g=null;g=c.exec(i),!!g;){var b=g[1];b.length&&b!==o&&d.push([]);var j=void 0;g[2]?j=g[2].replace(new RegExp('""',"g"),'"'):j=g[3],d[d.length-1].push(j)}return d},a}(DataParser),JSONParser=function(e){__extends(a,e);function a(){var i=e!==null&&e.apply(this,arguments)||this;return i.contentType="application/json",i.options={},i}return a.isJSON=function(i){try{return JSON.parse(i),!0}catch{return!1}},a.prototype.parse=function(i){var o=this,c;try{hasValue(JSON)&&(c=JSON.parse(i))}catch{return}var d=hasValue(this.options.emptyAs),g=this.parsableNumbers,b=this.parsableDates;if(Array.isArray(c)&&(g||b||d))for(var j=function(_e,st){var ut=c[_e];each$1(ut,function(gt,yt){d&&(ut[gt]=o.maybeToEmpty(ut[gt])),g&&(ut[gt]=o.maybeToNumber(gt,ut[gt])),b&&(ut[gt]=o.maybeToDate(gt,ut[gt]))})},$=0,rt=c.length;$<rt;$++)j($,rt);return c},a}(DataParser),DataLoader=function(){function e(){this.adapter=new Adapter(this)}return e.prototype.load=function(a){var i=Array.isArray(a)?a:[a],o=map$1(i,function(c){return c.dispatchImmediately("started"),c.dispatchImmediately("loadstarted"),load(c.url,c,c.requestOptions)});Promise.all(o).then(function(c){each$2(c,function(d){var g=d.target;g.dispatchImmediately("loadended"),d.error?g.events.isEnabled("error")&&g.events.dispatchImmediately("error",{type:"error",code:d.xhr.status,message:g.language.translate("Unable to load file: %1",null,g.url),target:g}):g.processData(d.response,d.type),g.dispatchImmediately("ended")})}).catch(function(c){c.target&&(c.target.dispatchImmediately("loadended"),c.target.events.isEnabled("error")&&c.target.events.dispatchImmediately("error",{type:"error",code:c.xhr.status,message:c.target.language.translate("Unable to load file: %1",null,c.target.url),target:c.target}),c.target.dispatchImmediately("ended"))})},e.prototype.getParserByType=function(a){var i=this.adapter.apply("getParserByType",{parser:null,type:a}).parser;if(i)return i;if(a=="csv"||a=="text/csv"||a=="application/vnd.ms-excel")return new CSVParser;if(a=="json"||a=="application/json")return new JSONParser},e.prototype.getParserByData=function(a,i){var o=this.adapter.apply("getParserByData",{parser:null,data:a,type:i}).parser;if(!o){if(o=this.getParserByType(i),o)return o;if(JSONParser.isJSON(a))return this.getParserByType("json");if(CSVParser.isCSV(a))return this.getParserByType("csv")}return o},e}(),dataLoader=new DataLoader,DataSource=function(e){__extends(a,e);function a(i,o){var c=e.call(this)||this;return c.adapter=new Adapter(c),c._requestOptions={},c._incremental=!1,c._incrementalParams={},c._keepCount=!1,c._updateCurrentData=!1,c.showPreloader=!0,c.className="DataSource",i&&(c.url=i),o&&(typeof o=="string"?c.parser=dataLoader.getParserByType(o):c.parser=o),c}return a.prototype.processData=function(i,o){if(this.dispatchImmediately("parsestarted"),!this.parser&&(this.parser=dataLoader.getParserByData(i,o),!this.parser)){if(this.events.isEnabled("parseerror")){var c={type:"parseerror",message:this.language.translate("No parser available for file: %1",null,this.url),target:this};this.events.dispatchImmediately("parseerror",c)}this.dispatchImmediately("parseended");return}if(this.parser.options=this.adapter.apply("parserOptions",this.parser.options),this.parser.options.dateFields=this.adapter.apply("dateFields",this.parser.options.dateFields||[]),this.parser.options.numberFields=this.adapter.apply("numberFields",this.parser.options.numberFields||[]),this.parser.options.dateFields&&!this.parser.options.dateFormatter&&(this.parser.options.dateFormatter=this.dateFormatter),this.data=this.adapter.apply("parsedData",this.parser.parse(this.adapter.apply("unparsedData",i))),!hasValue(this.data)&&this.events.isEnabled("parseerror")){var d={type:"parseerror",message:this.language.translate("Error parsing file: %1",null,this.url),target:this};this.events.dispatchImmediately("parseerror",d)}this.dispatchImmediately("parseended"),hasValue(this.data)&&this.dispatchImmediately("done",{data:this.data}),this.lastLoad=new Date},Object.defineProperty(a.prototype,"url",{get:function(){var i=this.disableCache?this.timestampUrl(this._url):this._url;return this.incremental&&this.component.data.length&&(i=this.addUrlParams(i,this.incrementalParams)),this.adapter.apply("url",i)},set:function(i){this._url=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"requestOptions",{get:function(){return this.adapter.apply("requestOptions",this._requestOptions)},set:function(i){this._requestOptions=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"parser",{get:function(){return this._parser||(this._parser=new JSONParser),this.adapter.apply("parser",this._parser)},set:function(i){this._parser=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"reloadFrequency",{get:function(){return this.adapter.apply("reloadTimeout",this._reloadFrequency)},set:function(i){var o=this;this._reloadFrequency!=i&&(this._reloadFrequency=i,i?hasValue(this._reloadDisposer)||(this._reloadDisposer=this.events.on("ended",function(c){o._reloadTimeout=setTimeout(function(){o.load()},o.reloadFrequency)})):hasValue(this._reloadDisposer)&&(this._reloadDisposer.dispose(),this._reloadDisposer=void 0))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"incremental",{get:function(){return this.adapter.apply("incremental",this._incremental)},set:function(i){this._incremental=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"incrementalParams",{get:function(){return this.adapter.apply("incrementalParams",this._incrementalParams)},set:function(i){this._incrementalParams=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"keepCount",{get:function(){return this.adapter.apply("keepCount",this._keepCount)},set:function(i){this._keepCount=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"updateCurrentData",{get:function(){return this.adapter.apply("updateCurrentData",this._updateCurrentData)},set:function(i){this._updateCurrentData=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"language",{get:function(){return this._language?this._language:this.component?(this._language=this.component.language,this._language):(this.language=new Language,this.language)},set:function(i){this._language=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"dateFormatter",{get:function(){return this._dateFormatter?this._dateFormatter:this.component?(this._dateFormatter=this.component.dateFormatter,this._dateFormatter):(this.dateFormatter=new DateFormatter,this.dateFormatter)},set:function(i){this._dateFormatter=i},enumerable:!0,configurable:!0}),a.prototype.timestampUrl=function(i){var o=new Date().getTime().toString(),c={};return c[o]="",this.addUrlParams(i,c)},a.prototype.dispose=function(){e.prototype.dispose.call(this),this._reloadTimeout&&clearTimeout(this._reloadTimeout),hasValue(this._reloadDisposer)&&(this._reloadDisposer.dispose(),this._reloadDisposer=void 0)},a.prototype.load=function(){this.url&&(this._reloadTimeout&&clearTimeout(this._reloadTimeout),dataLoader.load(this))},a.prototype.addUrlParams=function(i,o){var c=i.match(/\?/)?"&":"?",d=[];return each$1(o,function(g,b){b!=""?d.push(g+"="+encodeURIComponent(b)):d.push(g)}),d.length?i+c+d.join("&"):i},a.prototype.processConfig=function(i){registry.registeredClasses.json=JSONParser,registry.registeredClasses.JSONParser=JSONParser,registry.registeredClasses.csv=CSVParser,registry.registeredClasses.CSVParser=CSVParser,e.prototype.processConfig.call(this,i)},a}(BaseObjectEvents),Responsive=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i._rules=new List,i._appliedRules={},i._appliedTargets=[],i._useDefault=!0,i.adapter=new Adapter(i),i._enabled=!1,i._responsiveDisposers=[],i._noStates=[],i.className="Responsive",i.rules.events.on("inserted",function(){i.checkRules()},!0),i.rules.events.on("removed",function(){i.checkRules()},!0),i._disposers.push(i.rules.events),i.applyTheme(),i}return Object.defineProperty(a.prototype,"component",{get:function(){return this._component},set:function(i){var o=this;i!=this._component&&(this.disposeResponsiveHandlers(),this._component=i,this._responsiveDisposers.push(getValue(this.component).events.on("sizechanged",function(){o.checkRules()},this)),this._responsiveDisposers.push(getValue(this.component).events.once("datavalidated",function(){o._component.isReady()&&o.checkRules(!0)},this)),this.enabled=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"enabled",{get:function(){return this.adapter.apply("enabled",this._enabled)},set:function(i){this._enabled!=i&&(this._enabled=i,this.applyRules())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"useDefault",{get:function(){return this.adapter.apply("useDefault",this._useDefault)},set:function(i){this._useDefault!=i&&(this._useDefault=i,this.applyRules())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"rules",{get:function(){return this.adapter.apply("rules",this._rules)},set:function(i){this._rules=i,this._enabled=!0,this.applyRules()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"defaultRules",{get:function(){return this.adapter.apply("defaultRules",defaultRules)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"allRules",{get:function(){var i=new List;return this.useDefault&&i.copyFrom(this.defaultRules),i.copyFrom(this.rules),this.adapter.apply("allRules",i)},enumerable:!0,configurable:!0}),a.prototype.isApplied=function(i){var o=this._appliedRules[i];return hasValue(o)?o:!1},a.prototype.checkRules=function(i){var o=this;i===void 0&&(i=!1);var c=this.allRules;if(!(!c||c.length==0)){var d=!1,g=getValue(this.component);if(!(g.pixelWidth==0||g.pixelHeight==0)&&(each(c.iterator(),function(b){b.id||(b.id=registry.getUniqueId());var j=b.relevant(g);(j&&!o.isApplied(b.id)||!j&&o.isApplied(b.id))&&(d=!0),o._appliedRules[b.id]=j}),i&&(d=!0),d)){if(!this.component.isReady()){g.hidden=!0,g.events.once("ready",function(b){b.target.show(0),o._applyRules()});return}this.dispatchImmediately("ruleschanged"),this._applyRules()}}},a.prototype._applyRules=function(){var i=this;this._timeout&&this._timeout.dispose(),this._timeout=this.setTimeout(function(){i.applyRules()},10)},a.prototype.applyRules=function(i){var o=this,c=hasValue(i)?i:getValue(this.component),d=!1;if(this.enabled){var g=!1;each(this.allRules.iterator(),function(b){var j=o.getState(b,c);j&&(d||(indexOf(o._appliedTargets,c.uid)!==-1&&c.setState(o.getDefaultState(c),0),d=!0),o.isApplied(getValue(b.id))&&(j.transitionDuration=0,o.setTargetState(c,j),o.dispatchImmediately("ruleapplied",{rule:b}),g=!0))}),g?replace(this._appliedTargets,c.uid):remove(this._appliedTargets,c.uid)}c.children&&each(c.children.iterator(),function(b){o.applyRules(b)})},a.prototype.getState=function(i,o){var c="responsive-"+i.id,d=o.uid+"_"+c;if(indexOf(this._noStates,d)===-1){if(o.states.hasKey(c))return o.states.getKey(c);var g=i.state(o,c);return g||this._noStates.push(d),g}},a.prototype.getDefaultState=function(i){return i.states.hasKey("responsive-default")?i.states.getKey("responsive-default"):i.states.create("responsive-default")},a.prototype.setTargetState=function(i,o){var c=this,d=this.getDefaultState(i);each$1(o.properties,function(g,b){hasValue(d.properties[g])||(d.properties[g]=c.getValue(i,g))}),i.setState(o)},a.prototype.getValue=function(i,o){var c=i.getPropertyValue(o);return!hasValue(c)&&hasValue(i[o])&&(c=i[o]),c},a.prototype.dispose=function(){this.disposeResponsiveHandlers(),e.prototype.dispose.call(this)},a.prototype.disposeResponsiveHandlers=function(){for(var i=this._responsiveDisposers.pop();i;)i.dispose(),i=this._responsiveDisposers.pop()},a}(BaseObjectEvents),defaultRules=new List;defaultRules.events.on("inserted",function(e){e.newValue.id=registry.getUniqueId()});var ResponsiveBreakpoints=function(){function e(){}return e.widthXXS=function(a){return a.pixelWidth<=e.XXS},e.widthXS=function(a){return a.pixelWidth<=e.XS},e.widthS=function(a){return a.pixelWidth<=e.S},e.widthM=function(a){return a.pixelWidth<=e.M},e.widthL=function(a){return a.pixelWidth<=e.L},e.widthXL=function(a){return a.pixelWidth<=e.XL},e.widthXXL=function(a){return a.pixelWidth<=e.XXL},e.heightXXS=function(a){return a.pixelHeight<=e.XXS},e.heightXS=function(a){return a.pixelHeight<=e.XS},e.heightS=function(a){return a.pixelHeight<=e.S},e.heightM=function(a){return a.pixelHeight<=e.M},e.heightL=function(a){return a.pixelHeight<=e.L},e.heightXL=function(a){return a.pixelHeight<=e.XL},e.heightXXL=function(a){return a.pixelHeight<=e.XXL},e.isXXS=function(a){return a.pixelWidth<=e.XXS&&a.pixelHeight<=e.XXS},e.isXS=function(a){return a.pixelWidth<=e.XS&&a.pixelHeight<=e.XS},e.isS=function(a){return a.pixelWidth<=e.S&&a.pixelHeight<=e.S},e.isM=function(a){return a.pixelWidth<=e.M&&a.pixelHeight<=e.M},e.isL=function(a){return a.pixelWidth<=e.L&&a.pixelHeight<=e.L},e.isXL=function(a){return a.pixelWidth<=e.XL&&a.pixelHeight<=e.XL},e.isXXL=function(a){return a.pixelWidth<=e.XXL&&a.pixelHeight<=e.XXL},e.maybeXXS=function(a){return a.pixelWidth<=e.XXS||a.pixelHeight<=e.XXS},e.maybeXS=function(a){return a.pixelWidth<=e.XS||a.pixelHeight<=e.XS},e.maybeS=function(a){return a.pixelWidth<=e.S||a.pixelHeight<=e.S},e.maybeM=function(a){return a.pixelWidth<=e.M||a.pixelHeight<=e.M},e.maybeL=function(a){return a.pixelWidth<=e.L||a.pixelHeight<=e.L},e.maybeXL=function(a){return a.pixelWidth<=e.XL||a.pixelHeight<=e.XL},e.maybeXXL=function(a){return a.pixelWidth<=e.XXL||a.pixelHeight<=e.XXL},e.XXS=100,e.XS=200,e.S=300,e.M=400,e.L=600,e.XL=800,e.XXL=1e3,e}(),DataItem=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i._disabled=!1,i.hasProperties=!1,i.values={},i.categories={},i.dates={},i.locations={},i.workingLocations={},i.properties={},i.sprites=[],i.isTemplate=!1,i._index=null,i._visible=!0,i._hidden=!1,i._ignoreMinMax=!1,i.hasChildren={},i.isHiding=!1,i._valueAnimations={},i._locationAnimations={},i.className="DataItem",i.applyTheme(),i}return Object.defineProperty(a.prototype,"adapter",{get:function(){return this._adapterO||(this._adapterO=new Adapter(this)),this._adapterO},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"index",{get:function(){return this.component&&this._index!=null?this._index:-1},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"animations",{get:function(){return this._animations||(this._animations=[],this._disposers.push(new AnimationDisposer(this._animations))),this._animations},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"visible",{get:function(){return this._hidden?!1:this._visible},set:function(i){i&&(this.hidden=!1),this._visible!=i&&this.setVisibility(i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"hidden",{get:function(){return this._hidden},set:function(i){this._hidden!=i&&(this._hidden=i,i?this.setVisibility(!1):this.setVisibility(!0,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"__disabled",{get:function(){return this._disabled},set:function(i){this._disabled=i,each$2(this.sprites,function(o){o.__disabled=i})},enumerable:!0,configurable:!0}),a.prototype.setVisibility=function(i,o){if(each$2(this.sprites,function(d){i?d.visible=d.defaultState.properties.visible:d.hiddenState?d.visible=d.hiddenState.properties.visible:d.visible=!1}),this._visible=i,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("visibilitychanged")){var c={type:"visibilitychanged",target:this,visible:i};this.events.dispatchImmediately("visibilitychanged",c)}},a.prototype.show=function(i,o,c){var d=this;if(!this.hidden){this.setVisibility(!0,!0),this.isHiding=!1,this._hideDisposer&&this.removeDispose(this._hideDisposer);var g;return c&&each$2(c,function(b){g=d.setWorkingValue(b,d.values[b].value,i,o)}),each$2(this.sprites,function(b){var j=b.show(i);j!=null&&!j.isFinished()&&(d._disposers.push(j),o!=null&&o>0&&j.delay(o))}),g}},a.prototype.dispose=function(){e.prototype.dispose.call(this),each$2(this.sprites,function(i){i.dispose()}),this.sprites=[]},a.prototype.hide=function(i,o,c,d){var g=this;if(this.isHiding=!0,each$2(this.sprites,function(j){var $=j.hide(i);$!=null&&!$.isFinished()&&(g._disposers.push($),o!=null&&o>0&&$.delay(o))}),isNumber$1(c)&&d){var b;if(each$2(d,function(j){var $=g.setWorkingValue(j,c,i,o);$&&(b=$)}),b&&!b.isFinished())return this._hideDisposer=b.events.on("animationended",function(){g.setVisibility(!1,!0),g.isHiding=!1}),this._disposers.push(this._hideDisposer),b;this.isHiding=!1,this.setVisibility(!1,!0)}else this.isHiding=!1,this.setVisibility(!1)},a.prototype.getDuration=function(i){if(!isNumber$1(i)){var o=this.component;o&&(i=o.interpolationDuration)}if(i!=null)return this._adapterO?this._adapterO.apply("duration",i):i},a.prototype.getValue=function(i,o){if(i&&this.component){o||(o=this.component.dataFields[i+"Show"],o||(o="value"));var c=this.values[i][o];return this._adapterO&&this._adapterO.isEnabled("value")?this._adapterO.apply("value",{value:c,field:i}).value:c}},a.prototype.getWorkingValue=function(i){if(i&&this.component){var o=this.component.dataFields[i+"Show"];return o||(o="workingValue"),this._adapterO?this._adapterO.apply("workingValue",{workingValue:this.values[i][o],field:i}).workingValue:this.values[i][o]}},a.prototype.getActualWorkingValue=function(i){return this.values[i].workingValue},a.prototype.setValue=function(i,o,c,d){var g=this.values[i].value,b=this.getDuration(c);if(o=toNumber(o),g!==o){if(this.values[i].value=o,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("valuechanged")){var j={type:"valuechanged",target:this,property:i};this.events.dispatchImmediately("valuechanged",j)}this.component&&this.component.handleDataItemValueChange(this,i)}this.setWorkingValue(i,o,b,d)},a.prototype.setCalculatedValue=function(i,o,c){var d=this.values[i][c];if(d!==o&&isNumber$1(o)){if(this.values[i][c]=o,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("calculatedvaluechanged")){var g={type:"calculatedvaluechanged",target:this,property:i};this.events.dispatchImmediately("calculatedvaluechanged",g)}this.component&&this.component.handleDataItemCalculatedValueChange(this,i)}},a.prototype.setWorkingValue=function(i,o,c,d){if(isNumber$1(this.values[i].value)){var g=this.getDuration(c),b=this.values[i].workingValue;if(g!=null&&g>0&&isNumber$1(b)&&this.component)if(b!=o){var j=this.animate({childObject:this.values[i],property:"workingValue",from:b,to:o,dummyData:i},g,this.component.interpolationEasing);return d!=null&&j.delay(d),j.events.on("animationstarted",this.handleInterpolationProgress,this),j.events.on("animationprogress",this.handleInterpolationProgress,this),j.events.on("animationended",this.handleInterpolationProgress,this),this._valueAnimations[i]=j,j}else{var $=this._valueAnimations[i];$&&$.stop(),this.values[i].workingValue=o}else{var $=this._valueAnimations[i];if($&&$.stop(),this.values[i].workingValue=o,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("workingvaluechanged")){var rt={type:"workingvaluechanged",target:this,property:i};this.events.dispatchImmediately("workingvaluechanged",rt)}this.component&&this.component.handleDataItemWorkingValueChange(this,i)}}},a.prototype.setLocation=function(i,o,c,d){var g=this.locations[i];if(g!==o){if(this.locations[i]=o,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("locationchanged")){var b={type:"locationchanged",target:this,property:i};this.events.dispatchImmediately("locationchanged",b)}this.component&&this.component.handleDataItemValueChange(this,i),this.setWorkingLocation(i,o,c,d)}},a.prototype.setWorkingLocation=function(i,o,c,d){var g=this.getDuration(c),b=this.workingLocations[i];if(g!=null&&g>0&&isNumber$1(b)&&this.component)if(b!=o){var j=this.animate({childObject:this.workingLocations,property:i,from:b,to:o,dummyData:i},g,this.component.interpolationEasing);return d!=null&&j.delay(d),j.events.on("animationstarted",this.handleInterpolationProgress,this),j.events.on("animationprogress",this.handleInterpolationProgress,this),j.events.on("animationended",this.handleInterpolationProgress,this),this._locationAnimations[i]=j,j}else{var $=this._locationAnimations[i];$&&$.stop(),this.workingLocations[i]=o}else{var $=this._locationAnimations[i];if($&&$.stop(),this.workingLocations[i]=o,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("workinglocationchanged")){var rt={type:"workinglocationchanged",target:this,property:i};this.events.dispatchImmediately("workinglocationchanged",rt)}this.component&&this.component.handleDataItemWorkingLocationChange(this,i)}},a.prototype.setDate=function(i,o,c){!isDate$1(o)&&this.component&&(o=this.component.dateFormatter.parse(o));var d=this.dates[i];d!==o&&(this.dates[i]=o,this.setValue(i,o.getTime(),c))},a.prototype.getDate=function(i){return this._adapterO?this._adapterO.apply("date",{date:this.dates[i],field:i}).date:this.dates[i]},a.prototype.setProperty=function(i,o){if(this.properties[i]!==o){if(this.hasProperties=!0,this.properties[i]=o,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("propertychanged")){var c={type:"propertychanged",target:this,property:i,value:o};this.events.dispatchImmediately("propertychanged",c)}this.component&&this.component.handleDataItemPropertyChange(this,i)}},a.prototype.setCategory=function(i,o){isString$1(o)||(o=castString(o)),this.categories[i]!==o&&(this.categories[i]=o)},a.prototype.copyFrom=function(i){e.prototype.copyFrom.call(this,i),i.dataContext&&(this.dataContext=copy$1(i.dataContext,{})),copyProperties(i.locations,this.locations),i._adapterO&&this.adapter.copyFrom(i._adapterO),this.component=i.component},Object.defineProperty(a.prototype,"opacity",{set:function(i){each$2(this.sprites,function(o){o.opacity=i})},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"ignoreMinMax",{get:function(){return this._ignoreMinMax},set:function(i){if(this._ignoreMinMax=i,this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("propertychanged")){var o={type:"propertychanged",target:this,property:"ignoreMinMax",value:i};this.events.dispatchImmediately("propertychanged",o)}this.component&&this.component.handleDataItemPropertyChange(this,"ignoreMinMax")},enumerable:!0,configurable:!0}),a.prototype.animate=function(i,o,c){return new Animation(this,i,o,c).start()},a.prototype.handleInterpolationProgress=function(i){var o=i.target,c=o.animationOptions[0];if(c){if(this._eventDispatcher&&!this.__disabled&&this.events.isEnabled("workingvaluechanged")){var d={type:"workingvaluechanged",target:this,property:c.dummyData};this.events.dispatchImmediately("workingvaluechanged",d)}this.component&&this.component.handleDataItemWorkingValueChange(this,c.dummyData)}},a.prototype.hasValue=function(i){for(var o=0,c=i.length;o<c;o++){var d=this.values[i[o]];if(!d||!hasValue(d.value))return!1}return!0},Object.defineProperty(a.prototype,"depth",{get:function(){return this.parent?this.parent.depth+1:0},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"dataContext",{get:function(){return this._dataContext},set:function(i){this._dataContext=i},enumerable:!0,configurable:!0}),a.prototype.addSprite=function(i){i.dataItem&&i.dataItem!=this&&remove(i.dataItem.sprites,i),this.visible||i.hide(0),this.isHiding&&i.hide(),this.sprites.push(i),i.dataItem=this},a}(BaseObjectEvents),Component=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.dataFields={},i._dataSources={},i._parseDataFrom=0,i._dataDisposers=[],i._currentDataSetId="",i._start=0,i._end=1,i.skipRangeEvent=!1,i.rangeChangeDuration=0,i.rangeChangeEasing=cubicOut,i.parsingStepDuration=50,i.dataInvalid=!1,i.rawDataInvalid=!1,i.dataRangeInvalid=!1,i.dataItemsInvalid=!1,i.interpolationDuration=0,i.interpolationEasing=cubicOut,i.sequencedInterpolation=!0,i.sequencedInterpolationDelay=0,i.dataValidationProgress=0,i._addAllDataItems=!0,i._usesData=!0,i.className="Component",i.minZoomCount=1,i.maxZoomCount=0,i._dataItems=new OrderedListTemplate(i.createDataItem()),i._dataItems.events.on("inserted",i.handleDataItemAdded,i,!1),i._dataItems.events.on("removed",i.handleDataItemRemoved,i,!1),i._disposers.push(new ListDisposer(i._dataItems)),i._disposers.push(i._dataItems.template),i.invalidateData(),i.dataUsers.events.on("inserted",i.handleDataUserAdded,i,!1),i._disposers.push(new MultiDisposer(i._dataDisposers)),i._start=0,i._end=1,i.maxZoomDeclination=1,i.applyTheme(),i}return a.prototype.createDataItem=function(){return new DataItem},a.prototype.handleDataUserAdded=function(i){var o=i.newValue;o.dataProvider=this},a.prototype.handleDataItemValueChange=function(i,o){this.dataItemsInvalid||this.invalidateDataItems()},a.prototype.handleDataItemWorkingValueChange=function(i,o){},a.prototype.handleDataItemWorkingLocationChange=function(i,o){},a.prototype.handleDataItemCalculatedValueChange=function(i,o){},a.prototype.handleDataItemPropertyChange=function(i,o){},a.prototype.processDataItem=function(i,o){var c=this;if(i){o||(o={}),i.dataContext=o;var d=!1;each$1(this.dataFields,function(g,b){var j=g,$=o[b];if(c._adapterO&&c._adapterO.isEnabled("dataContextValue")&&($=c._adapterO.apply("dataContextValue",{field:j,value:$,dataItem:i}).value),hasValue($))if(d=!0,i.hasChildren[j]){var rt=c.createDataItem();rt.copyFrom(c.mainDataSet.template);var _e=new OrderedListTemplate(rt);_e.events.on("inserted",c.handleDataItemAdded,c,!1),_e.events.on("removed",c.handleDataItemRemoved,c,!1),c._dataDisposers.push(new ListDisposer(_e));for(var st=$.length,ut=0;ut<st;ut++){var gt=$[ut],yt=_e.create();yt.parent=i,c.processDataItem(yt,gt)}var Pt=i;Pt[j]=_e}else i[j]=$}),each$1(this.propertyFields,function(g,b){var j=g,$=o[b];hasValue($)&&(d=!0,i.setProperty(j,$))}),!this._addAllDataItems&&!d&&this.mainDataSet.remove(i)}},a.prototype.updateDataItem=function(i){var o=this;if(i){var c=i.dataContext;each$1(this.dataFields,function(d,g){var b=d,j=c[g];if(o._adapterO&&(j=o._adapterO.apply("dataContextValue",{field:b,value:j,dataItem:i}).value),hasValue(j))if(i.hasChildren[b]){var $=i,rt=$[b];rt.each(function(_e){o.updateDataItem(_e)})}else i[b]=j}),each$1(this.propertyFields,function(d,g){var b=d,j=c[g];hasValue(j)&&i.setProperty(b,j)})}},a.prototype.validateDataElements=function(){for(var i=this.endIndex,o=this.startIndex;o<i;o++){var c=this.dataItems.getIndex(o);c&&this.validateDataElement(c)}},a.prototype.validate=function(){this.validateDataElements(),e.prototype.validate.call(this)},a.prototype.validateDataElement=function(i){},a.prototype.addData=function(i,o,c){var d=this;if(!this.dataInvalid&&this.inited&&(this._parseDataFrom=this.data.length),c||(i instanceof Array?each$2(i,function(g){d.data.push(g)}):this.data.push(i)),this.inited)this.removeData(o,c);else if(isNumber$1(o))for(;o>0;)this.data.shift(),o--;this.invalidateData()},a.prototype.removeData=function(i,o){if(isNumber$1(i)&&i>0){for(;i>0;){var c=this.mainDataSet.getIndex(0);c&&this.mainDataSet.remove(c),this.dataUsers.each(function(d){if(!d.data||d.data.length==0){var g=d.mainDataSet.getIndex(0);g&&d.mainDataSet.remove(g)}}),o||this.data.shift(),this._parseDataFrom>0&&this._parseDataFrom--,i--}this.invalidateDataItems()}},a.prototype.invalidateData=function(){this.disabled||this.isTemplate||(registry.addToInvalidComponents(this),system.requestFrame(),this.dataInvalid=!0,each(this.dataUsers.iterator(),function(i){i.invalidateDataItems()}))},a.prototype.invalidateDataUsers=function(){each(this.dataUsers.iterator(),function(i){i.invalidate()})},a.prototype.invalidateDataItems=function(){this.disabled||this.isTemplate||(move(registry.invalidDataItems,this),system.requestFrame(),this.dataItemsInvalid=!0,each(this.dataUsers.iterator(),function(i){i.invalidateDataItems()}))},a.prototype.invalidateDataRange=function(){this.disabled||this.isTemplate||(this.dataRangeInvalid=!0,move(registry.invalidDataRange,this),system.requestFrame())},a.prototype.validateDataRange=function(){remove(registry.invalidDataRange,this),this.dataRangeInvalid=!1,(this.startIndex!=this._prevStartIndex||this.endIndex!=this._prevEndIndex)&&(this.rangeChangeUpdate(),this.appendDataItems(),this.invalidate(),this.dispatchImmediately("datarangechanged"))},a.prototype.sliceData=function(){this._workingStartIndex=this.startIndex,this._workingEndIndex=this.endIndex},a.prototype.rangeChangeUpdate=function(){this.sliceData(),this._prevStartIndex=this.startIndex,this._prevEndIndex=this.endIndex},a.prototype.appendDataItems=function(){for(var i=this.endIndex,o=this.startIndex;o<i;o++){var c=this.dataItems.getIndex(o);c&&(c.__disabled=!1)}for(var o=0;o<this.startIndex;o++){var c=this.dataItems.getIndex(o);c&&(c.__disabled=!0)}for(var o=this.endIndex;o<this.dataItems.length;o++){var c=this.dataItems.getIndex(o);c&&(c.__disabled=!0)}},a.prototype.invalidateRawData=function(){this.disabled||this.isTemplate||(move(registry.invalidRawDatas,this),system.requestFrame(),this.rawDataInvalid=!0,each(this.dataUsers.iterator(),function(i){i.invalidateRawData()}))},a.prototype.validateRawData=function(){var i=this;remove(registry.invalidRawDatas,this),each(this.mainDataSet.iterator(),function(o){o&&i.updateDataItem(o)})},a.prototype.dispose=function(){var i=this;this.mainDataSet.template.clones.clear(),each$1(this._dataSources,function(o,c){i.removeDispose(c)}),this.disposeData(),e.prototype.dispose.call(this)},a.prototype.disposeData=function(){this.mainDataSet.template.clones.clear(),each$2(this._dataDisposers,function(i){i.dispose()}),each(this.dataUsers.iterator(),function(i){i.disposeData()}),this._dataDisposers.length=0,this._startIndex=void 0,this._endIndex=void 0,this.mainDataSet.clear(),this.mainDataSet.template.clones.clear(),this._dataSets&&this._dataSets.clear()},a.prototype.getDataItem=function(i){return this.mainDataSet.create()},a.prototype.validateData=function(){if(this.dispatchImmediately("beforedatavalidated"),this.dataInvalid=!1,registry.removeFromInvalidComponents(this),!this.__disabled){if(this.dataValidationProgress=0,this._prevStartIndex=void 0,this._prevEndIndex=void 0,this._startIndex=void 0,this._endIndex=void 0,this.dataFields.data&&this.dataItem){var i=this.dataItem.dataContext;this._data=i[this.dataFields.data]}if(this._parseDataFrom===0&&this.data.length>0&&this.disposeData(),this.data.length>0){var o=this.preloader;each(this.dataUsers.iterator(),function(_e){_e._startIndex=void 0,_e._endIndex=void 0});var c=0,d=Date.now(),g=this._parseDataFrom,b=this.data.length,j=function(){var _e=$.data[g];if($._usesData){var st=$.getDataItem(_e);$.processDataItem(st,_e)}if($.dataUsers.each(function(gt){if(gt.data.length==0){var yt=gt.getDataItem(_e);gt.processDataItem(yt,_e)}}),c++,c==100){c=0;var ut=Date.now()-d;if(ut>$.parsingStepDuration&&g<$.data.length-10)return $._parseDataFrom=g+1,o&&(g/$.data.length>.5&&!o.visible||(o.progress=g/$.data.length)),$.dataValidationProgress=g/$.data.length,g=$.data.length,$.invalidateData(),{value:void 0}}},$=this;for(g;g<b;g++){var rt=j();if(typeof rt=="object")return rt.value}o&&(o.progress=1),this.dataUsers.each(function(_e){(_e.hidden||_e.appeared&&!_e.visible&&_e.stacked)&&_e.hide(0)})}this.dataValidationProgress=1,this._parseDataFrom=0,this.invalidateDataItems(),this._internalDefaultsApplied||this.applyInternalDefaults(),this.dispatch("datavalidated")}},a.prototype.validateDataItems=function(){remove(registry.invalidDataItems,this),this.dataItemsInvalid=!1,this.invalidateDataRange(),this.invalidate(),this.dispatch("dataitemsvalidated")},Object.defineProperty(a.prototype,"data",{get:function(){return this._data||(this._data=[]),this._adapterO?this._adapterO.apply("data",this._data):this._data},set:function(i){this.setData(i)},enumerable:!0,configurable:!0}),a.prototype.setData=function(i){this.isDisposed()||(this._parseDataFrom=0,this.disposeData(),this._data=i,i&&i.length>0?this.invalidateData():(this.dispatchImmediately("beforedatavalidated"),this.dispatch("datavalidated")))},a.prototype.getDataSource=function(i){var o=this;return hasValue(this._dataSources[i])||(this._dataSources[i]=new DataSource,this._dataSources[i].component=this,this.setDataSourceEvents(this._dataSources[i],i),this._dataSources[i].adapter.add("dateFields",function(c){return o.dataSourceDateFields(c)}),this._dataSources[i].adapter.add("numberFields",function(c){return o.dataSourceNumberFields(c)}),this.events.on("inited",function(){o.loadData(i)},this,!1)),this._dataSources[i]},Object.defineProperty(a.prototype,"dataSource",{get:function(){return this._dataSources.data||this.getDataSource("data"),this._dataSources.data},set:function(i){var o=this;this._dataSources.data&&this.removeDispose(this._dataSources.data),this._dataSources.data=i,this._dataSources.data.component=this,this.events.on("inited",function(){o.loadData("data")},this,!1),this.setDataSourceEvents(i,"data")},enumerable:!0,configurable:!0}),a.prototype.loadData=function(i){this._dataSources[i].load()},a.prototype.dataSourceDateFields=function(i){return i},a.prototype.dataSourceNumberFields=function(i){return i},a.prototype.populateDataSourceFields=function(i,o,c){return each$2(c,function(d){o[d]&&indexOf(i,o[d])===-1&&i.push(o[d])}),i},a.prototype.setDataSourceEvents=function(i,o){var c=this;i.events.on("started",function(d){var g=c.preloader;g&&(g.progress=0)},void 0,!1),i.events.on("loadstarted",function(d){var g=c.preloader;g&&(g.progress=.25)},void 0,!1),i.events.on("loadended",function(d){var g=c.preloader;g&&(g.progress=.5)},void 0,!1),i.events.on("parseended",function(d){var g=c.preloader;g&&(g.progress=.75)},void 0,!1),i.events.on("ended",function(d){var g=c.preloader;g&&(g.progress=1)},void 0,!1),i.events.on("error",function(d){var g=c.preloader;g&&(g.progress=1),c.openModal(d.message)},void 0,!1),o&&i.events.on("done",function(d){var g=c.preloader;g&&(g.progress=1),o=="data"&&!isArray$1(d.data)&&(d.data=[d.data]),i.incremental&&o=="data"&&c.data.length?c.addData(d.data,i.keepCount?d.data.length:0):i.updateCurrentData&&o=="data"&&c.data.length?(each$2(c.data,function(b,j){hasValue(d.data[j])&&each$1(b,function($,rt){hasValue(d.data[j][$])&&(b[$]=d.data[j][$])})}),c.invalidateRawData()):c[o]=d.data})},Object.defineProperty(a.prototype,"responsive",{get:function(){return this._responsive||(this._responsive=new Responsive,this._responsive.component=this),this._responsive},set:function(i){this._responsive=i,this._responsive.component=this},enumerable:!0,configurable:!0}),a.prototype.zoom=function(i,o,c,d){var g=this;o===void 0&&(o=!1),c===void 0&&(c=!1);var b=i.start,j=i.end,$=i.priority;if(i.start==i.end&&(i.start=i.start-.5/this.maxZoomFactor,i.end=i.end+.5/this.maxZoomFactor),$=="end"&&j==1&&b!=0&&b<this.start&&($="start"),$=="start"&&b==0&&j>this.end&&($="end"),isNumber$1(d)||(d=this.maxZoomDeclination),!isNumber$1(b)||!isNumber$1(j))return{start:this.start,end:this.end};if(this._finalStart!=b||this._finalEnd!=j){var rt=this.maxZoomFactor/this.minZoomCount,_e=this.maxZoomFactor/this.maxZoomCount;if($=="start"?(this.maxZoomCount>0&&1/(j-b)<_e&&(j=b+1/_e),1/(j-b)>rt&&(j=b+1/rt),j>1&&j-b<1/rt&&(b=j-1/rt)):(this.maxZoomCount>0&&1/(j-b)<_e&&(b=j-1/_e),1/(j-b)>rt&&(b<=0?j=b+1/rt:b=j-1/rt),b<0&&j-b<1/rt&&(j=b+1/rt)),b<-d&&(b=-d),1/(j-b)>rt&&(j=b+1/rt),j>1+d&&(j=1+d),1/(j-b)>rt&&(b=j-1/rt),this._finalEnd=j,this._finalStart=b,this.skipRangeEvent=o,this.dispatchImmediately("rangechangestarted"),this.rangeChangeDuration>0&&!c){var st=this.rangeChangeAnimation;if(st&&st.progress<1){var ut=st.animationOptions;if(ut.length>1){if(ut[0].to==b&&ut[1].to==j)return{start:b,end:j};st.isDisposed()||st.stop()}}this.rangeChangeAnimation&&this.rangeChangeAnimation.kill(),st=this.animate([{property:"start",to:b},{property:"end",to:j}],this.rangeChangeDuration,this.rangeChangeEasing),this.rangeChangeAnimation=st,st&&!st.isFinished()?st.events.on("animationended",function(){g.dispatchImmediately("rangechangeended")}):this.dispatchImmediately("rangechangeended")}else this.start=b,this.end=j,this.dispatch("rangechangeended")}return{start:b,end:j}},a.prototype.zoomToIndexes=function(i,o,c,d){if(!(!isNumber$1(i)||!isNumber$1(o))){var g=i/this.dataItems.length,b=o/this.dataItems.length;this.zoom({start:g,end:b},c,d)}},Object.defineProperty(a.prototype,"zoomFactor",{get:function(){return fitToRange(1/(this.end-this.start),1,this.maxZoomFactor)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"maxZoomFactor",{get:function(){return this.getPropertyValue("maxZoomFactor")},set:function(i){this.setPropertyValue("maxZoomFactor",i)&&(i==1&&(this.maxZoomDeclination=0),this.invalidateDataRange())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"maxZoomDeclination",{get:function(){return this.getPropertyValue("maxZoomDeclination")},set:function(i){this.setPropertyValue("maxZoomDeclination",i)&&this.invalidateDataRange()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"startIndex",{get:function(){return isNumber$1(this._startIndex)||(this._startIndex=0),this._startIndex},set:function(i){this._startIndex=fitToRange(Math.round(i),0,this.dataItems.length),this.start=this.indexToPosition(this._startIndex)},enumerable:!0,configurable:!0}),a.prototype.indexToPosition=function(i){return i/this.dataItems.length},Object.defineProperty(a.prototype,"endIndex",{get:function(){var i=this.dataItems.length;return(!isNumber$1(this._endIndex)||this._endIndex>i)&&(this._endIndex=i),this._endIndex},set:function(i){this._endIndex=fitToRange(Math.round(i),0,this.dataItems.length),this.end=this.indexToPosition(this._endIndex)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"start",{get:function(){return this._adapterO?this._adapterO.apply("start",this._start):this._start},set:function(i){if(this._start!=i){this._start=i;var o=Math.max(0,Math.floor(this.dataItems.length*i)||0);this._startIndex=Math.min(o,this.dataItems.length),this.invalidateDataRange(),this.invalidate(),this.dispatchImmediately("startchanged"),this.dispatch("startendchanged")}},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"end",{get:function(){return this._adapterO?this._adapterO.apply("end",this._end):this._end},set:function(i){this._end!=i&&(this._end=i,this._endIndex=Math.min(this.dataItems.length,Math.ceil(this.dataItems.length*i)||0),this.invalidateDataRange(),this.invalidate(),this.dispatchImmediately("endchanged"),this.dispatch("startendchanged"))},enumerable:!0,configurable:!0}),a.prototype.removeFromInvalids=function(){e.prototype.removeFromInvalids.call(this),registry.removeFromInvalidComponents(this),remove(registry.invalidDataItems,this),remove(registry.invalidDataRange,this),remove(registry.invalidRawDatas,this)},Object.defineProperty(a.prototype,"dataItems",{get:function(){if(this._currentDataSetId!=""){var i=this.dataSets.getKey(this._currentDataSetId);if(i)return i}return this._dataItems},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"dataSets",{get:function(){return this._dataSets||(this._dataSets=new Dictionary),this._dataSets},enumerable:!0,configurable:!0}),a.prototype.setDataSet=function(i){if(this._currentDataSetId!=i){var o=this.dataSets.getKey(i);if(o)return this.dataItems.each(function(c){c.__disabled=!0}),this._currentDataSetId=i,this.invalidateDataRange(),this._prevStartIndex=void 0,this.dataItems.each(function(c){c.__disabled=!1}),!0;if(this._currentDataSetId!="")return this.dataItems.each(function(c){c.__disabled=!0}),this._currentDataSetId="",this.invalidateDataRange(),this._prevStartIndex=void 0,this.dataItems.each(function(c){c.__disabled=!1}),!0}return!1},Object.defineProperty(a.prototype,"currentDataSetId",{get:function(){return this._currentDataSetId},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"mainDataSet",{get:function(){return this._dataItems},enumerable:!0,configurable:!0}),a.prototype._updateDataItemIndexes=function(i){for(var o=this.mainDataSet.values,c=o.length,d=i;d<c;++d)o[d]._index=d},a.prototype.handleDataItemAdded=function(i){i.newValue.component=this,this._updateDataItemIndexes(i.index),this.dataItemsInvalid||this.invalidateDataItems()},a.prototype.handleDataItemRemoved=function(i){this._updateDataItemIndexes(i.index),this.dataItemsInvalid||this.invalidateDataItems()},a.prototype.bindDataField=function(i,o){this.dataFields[i]=o,this.invalidateDataRange()},a.prototype.invalidateProcessedData=function(){this.resetProcessedRange(),this.invalidateDataRange()},a.prototype.resetProcessedRange=function(){this._prevEndIndex=null,this._prevStartIndex=null},Object.defineProperty(a.prototype,"dataUsers",{get:function(){var i=this;return this._dataUsers||(this._dataUsers=new List,this._disposers.push(new Disposer(function(){each(i._dataUsers.iterator(),function(o){o.dispose()})}))),this._dataUsers},enumerable:!0,configurable:!0}),a.prototype.clone=function(){var i=e.prototype.clone.call(this);return i.dataFields=copyProperties(this.dataFields,{}),i},a.prototype.copyFrom=function(i){e.prototype.copyFrom.call(this,i),this.data=i.data,this.sequencedInterpolation=i.sequencedInterpolation,this.sequencedInterpolationDelay=i.sequencedInterpolationDelay,this.interpolationDuration=i.interpolationDuration,this.interpolationEasing=i.interpolationEasing},a.prototype.reinit=function(){this._inited=!1,this.deepInvalidate()},a.prototype.getExporting=function(){var i=e.prototype.getExporting.call(this);return i.adapter.has("data",this._exportData,-1,this)||(i.adapter.add("data",this._exportData,-1,this),this.events.on("datavalidated",function(o){i.handleDataUpdated()})),i},a.prototype._exportData=function(i){return i.data=this.data,i},a.prototype.setDisabled=function(i){var o=e.prototype.setDisabled.call(this,i);return o&&this.invalidateData(),o},a.prototype.setShowOnInit=function(i){i!=this.getPropertyValue("showOnInit")&&(i&&!this.inited&&!this.hidden?(this._showOnInitDisposer2=this.events.once("dataitemsvalidated",this.hideInitially,this,!1),this._disposers.push(this._showOnInitDisposer2)):this._showOnInitDisposer2&&this.removeDispose(this._showOnInitDisposer2)),e.prototype.setShowOnInit.call(this,i)},a.prototype.setBaseId=function(i){i!=this._baseId&&this.dataInvalid&&(this.dataInvalid=!1,registry.removeFromInvalidComponents(this),this._baseId=i,this.invalidateData()),e.prototype.setBaseId.call(this,i)},Object.defineProperty(a.prototype,"minZoomCount",{get:function(){return this.getPropertyValue("minZoomCount")},set:function(i){this.setPropertyValue("minZoomCount",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"maxZoomCount",{get:function(){return this.getPropertyValue("maxZoomCount")},set:function(i){this.setPropertyValue("maxZoomCount",i)},enumerable:!0,configurable:!0}),a.prototype._systemCheckIfValidate=function(){return!(this.dataInvalid||this.dataProvider&&this.dataProvider.dataInvalid)},a.prototype.asFunction=function(i){return i=="interpolationEasing"||i=="rangeChangeEasing"||e.prototype.asIs.call(this,i)},a}(Container);registry.registeredClasses.Component=Component;var Label=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.isOversized=!1,i.className="Label",i.fill=new InterfaceColorSet().getFor("text"),i.wrap=!1,i.truncate=!1,i.fullWords=!0,i.ellipsis="…",i.textAlign="start",i.textValign="top",i.layout="absolute",i.baseLineRatio=-.27,i._positionPrecision=1,i.events.on("maxsizechanged",function(){i.inited&&i.handleMaxSize()},i,!1),i.events.once("validated",i.handleValidate,i,!1),i.applyTheme(),i}return a.prototype.afterDraw=function(){e.prototype.afterDraw.call(this),this.validatePosition()},a.prototype.setPaper=function(i){var o=e.prototype.setPaper.call(this,i);return o&&this.hardInvalidate(),o},a.prototype.handleValidate=function(){(this.currentText||this.text)&&(this.bbox.width==0||this.bbox.height==0)&&registry.events.once("exitframe",this.hardInvalidate,this)},a.prototype.handleMaxSize=function(){(this.bbox.width>this.availableWidth||this.bbox.width<this.availableWidth&&(this.isOversized||this.truncate)||this.bbox.height>this.availableHeight||this.bbox.height<this.availableHeight&&this.isOversized)&&this.invalidate()},a.prototype.arrange=function(){},a.prototype.updateCurrentText=function(){var i,o;isNotEmpty(this.html)&&this.paper.supportsForeignObject()?(i="html",o=this.html):(i="svg",o=this.text),isObject$1(o)&&(o=o.toString()),hasValue(o)&&o!==""&&(o=this.populateString(o,this.dataItem)),i=="html"?this._adapterO&&(o=this._adapterO.apply("htmlOutput",o)):this._adapterO&&(o=this._adapterO.apply("textOutput",o));var c=o!=this.currentText||i!=this._currentFormat;return this.currentText=o,this._currentFormat=i,c},a.prototype.hardInvalidate=function(){this._prevStatus="",this.invalidate()},a.prototype.getLineBBox=function(i){var o=i&&i.element,c=o&&o.node;c&&c.parentNode&&(i.bbox=o.getBBox())},a.prototype.draw=function(){e.prototype.draw.call(this);var i=this.bbox.width,o=this.bbox.height,c=this.topParent;if(c&&(!c.maxWidth||!c.maxHeight)){c.events.once("maxsizechanged",this.hardInvalidate,this,!1);return}var d=max$1(this.availableWidth-this.pixelPaddingLeft-this.pixelPaddingRight,0),g=max$1(this.availableHeight-this.pixelPaddingTop-this.pixelPaddingBottom,0),b=g+","+d+this.wrap+this.truncate+this.fullWords+this.rtl+this.ellipsis;if(!(!this.updateCurrentText()&&this.inited&&this._prevStatus==b)){this._measuredWidth=0,this._measuredHeight=0,this.isOversized=!1;var j=this._currentFormat,$=this.currentText;if(!hasValue($)||$==""){this.element.attr({display:"none"});return}var rt=$.split(`
`);this._prevStatus=b,this.textAlign=this.textAlign;var _e=this.group.getAttr("display");if(_e=="none"&&this.group.removeAttr("display"),this.textPathElement&&this.textPathElement.removeChildren(),j==="svg"){this.element.removeAttr("display");var st=this.element;this.resetBBox();for(var ut=0,gt="",yt=0;yt<rt.length;yt++){var Pt=rt[yt];if(Pt==""){var wt=this.getSVGLineElement("",0);wt.add(this.getSvgElement(".",getTextFormatter().translateStyleShortcuts(gt))),st.add(wt);var Ct=Math.ceil(wt.getBBox().height);Ct>0&&(ut+=Ct),st.removeElement(wt);var At=this.getLineInfo(yt);At&&(At.text="",At.element.textContent="");continue}var Tt=getTextFormatter().chunk(Pt,null,this.ignoreFormatting),kt=0,It=!0,Lt=!1,Ft=this.getLineInfo(yt);Ft?(Ft.text="",Ft.element.textContent=""):(Ft={text:"",element:this.getSVGLineElement("",0),complex:!1},st.add(Ft.element)),Ft.element.removeAttr("display"),Ft.element.removeChildren(),this.textPathElement&&Ft.element.add(this.textPathElement);for(var Nt=0;Nt<Tt.length;Nt++){Nt&&(Ft.complex=!0);var Ht=Tt[Nt];if(Ht.type==="format")gt=Ht.text;else{if(Lt)continue;if(Ft.text=Ht.text,Ft.style=getTextFormatter().translateStyleShortcuts(gt),this.textPathElement?this.getSvgElement(Ft.text,Ft.style,this.textPathElement):this.getSvgElement(Ft.text,Ft.style,Ft.element),this.getLineBBox(Ft),Ft.bbox.width=Math.ceil(Ft.bbox.width),kt<Ft.bbox.height&&(kt=Ft.bbox.height),(this.wrap||this.truncate)&&Ft.bbox.width>d){this.isOversized=!0;var Gr=Ft.element.textContent,hs=Ft.bbox.width/Gr.length,_s=min$1(Math.ceil((Ft.bbox.width-d)/hs),Gr.length);if(this.truncate){var hn=!1,Qn=Ft.element.node;if(Qn&&Qn.childNodes)for(var ds=Ft.element.node.childNodes.length-1;ds>=0;ds--){var un=Ft.element.node.childNodes[ds];if(hn&&Ft.bbox.width<=d&&(un.textContent+=" "+this.ellipsis,Ft.bbox=Ft.element.getBBox(),Ft.bbox.width=Math.floor(Ft.bbox.width),Ft.bbox.width<=d))break;hn=!1;var dr=un.textContent;for(Gr=Ft.element.textContent,_s=min$1(Math.ceil((Ft.bbox.width-d)/hs),Gr.length);Ft.bbox.width>d&&_s<=Gr.length&&_s>0;){var us=max$1(Gr.length-_s-this.ellipsis.length,1);us<=1&&(_s=0,ds>0&&(hn=!0,Ft.element.node.removeChild(un))),dr=truncateWithEllipsis(dr,us,this.ellipsis,this.fullWords,this.rtl),dr.length>us&&this.fullWords&&(dr=truncateWithEllipsis(dr,us,this.ellipsis,!1,this.rtl)),un.textContent=dr,Ft.bbox=Ft.element.getBBox(),Ft.bbox.width=Math.floor(Ft.bbox.width),_s=Math.ceil(_s*1.1)}Lt=!0}}else{var Nn=Ft.element.node;if(Nn){for(var gn=Ft.element.node.lastChild,Zn=void 0;Ft.bbox.width>d&&_s<=Gr.length&&_s>0;){var us=max$1(Ht.text.length-_s,1);if(It?Zn=splitTextByCharCount(Ht.text,us,!0,this.rtl):(Zn=splitTextByCharCount(Ht.text,us,!0,this.rtl,!1),(Zn[0].length>us||us===1)&&(Ft.element.node.removeChild(gn),_s=0)),_s>0){var xu=Zn.shift();It&&(xu=trim$1(xu)),gn.textContent=getTextFormatter().cleanUp(xu)}Ft.bbox=Ft.element.getBBox(),Ft.bbox.width=Math.floor(Ft.bbox.width),_s++}if(Zn.length>0){var au="";hasValue(Zn)&&(this.rtl?au+=Zn.join("")+gt:au+=gt+Zn.join("").replace(/([\[\]]{1})/g,"$1$1"));for(var Vv=Nt+1;Vv<Tt.length;Vv++)Tt[Vv].type=="value"?au+=Tt[Vv].text.replace(/([\[\]]{1})/g,"$1$1"):au+=Tt[Vv].text;rt.splice(yt+1,0,au)}Lt=!0}}}this.bbox.width<Ft.bbox.width&&(this.bbox.width=Ft.bbox.width),this.bbox.height=ut+kt,this.textPathElement?Ft.element.attr({dy:-this.paddingBottom.toString()}):Ft.element.attr({x:"0",y:ut+kt,dy:round$1(this.baseLineRatio*kt,3).toString()}),It=!1}}var wu=Ft.element.node;if(wu){var gn=wu.lastChild;gn&&(gn.textContent=this.rtl?ltrim(gn.textContent):rtrim(gn.textContent))}ut+=kt,this.addLineInfo(Ft,yt)}this.maybeHideOversized(),this.measureFailed=!1,(this.bbox.width==0||this.bbox.height==0)&&(this.measureFailed=!0),this._measuredWidth=round$1(max$1(this.bbox.width,this.pixelWidth-this.pixelPaddingLeft-this.pixelPaddingRight)),this._measuredHeight=round$1(max$1(this.bbox.height,this.pixelHeight-this.pixelPaddingTop-this.pixelPaddingBottom)),this.alignSVGText(),this.bbox.width=this._measuredWidth,this.bbox.height=this._measuredHeight,(o!=this._measuredHeight||i!=this._measuredWidth)&&this.dispatch("transformed"),this.hideUnused(rt.length)}else{this.element.removeAttr("display"),this.resetBBox();var st=this.element;st.removeChildren(),this.setCache("lineInfo",[],0);var a1=this.paper.foreignObject();st.add(a1),this.maxWidth&&a1.attr({width:this.maxWidth-this.pixelPaddingLeft-this.pixelPaddingRight}),this.maxHeight&&a1.attr({height:this.maxHeight-this.pixelPaddingTop-this.pixelPaddingBottom});var P0=this.getHTMLLineElement($);a1.node.appendChild(P0),P0.style.display="inline-block";var B0=P0.clientWidth,q1=P0.clientHeight;P0.style.display="block",this._bbox={x:0,y:0,width:B0,height:q1},a1.attr({width:B0+1,height:q1}),this.maybeHideOversized(),this._measuredWidth=max$1(this.bbox.width,this.pixelWidth-this.pixelPaddingLeft-this.pixelPaddingRight),this._measuredHeight=max$1(this.bbox.height,this.pixelHeight-this.pixelPaddingTop-this.pixelPaddingBottom),this.bbox.width=this._measuredWidth,this.bbox.height=this._measuredHeight,this.truncate&&(P0.style.overflow="hidden"),(B0>d||q1>g)&&(this.isOversized=!0)}this.setStyles(),this.updateCenter(),this.updateBackground(),_e=="none"&&this.group.attr({display:"none"}),this.pathElement&&this.paper.appendDef(this.pathElement)}},a.prototype.maybeHideOversized=function(){this.hideOversized&&(this.availableWidth<this.bbox.width||this.availableHeight<this.bbox.height?(this.element.attr({display:"none"}),this.isOversized=!0):(this.element.removeAttr("display"),this.isOversized=!1))},a.prototype.alignSVGText=function(){var i=this.element,o=i.node.children||i.node.childNodes;if(!(!o||o&&o.length==0)){var c=this._measuredWidth,d=this._measuredHeight;this.pixelPaddingLeft,this.pixelPaddingRight,this.pixelPaddingTop,this.pixelPaddingBottom,this.rtl?i.attr({direction:"rtl"}):i.removeAttr("direction");for(var g=o.length-1;g>=0;g--){var b=o[g];if(b.setAttribute("text-anchor",this.textAlign),this.textPathElement)b.removeAttribute("x"),b.removeAttribute("y");else{switch(this.textAlign){case"middle":b.setAttribute("x",(c/2).toString()+"px");break;case"end":this.rtl||b.setAttribute("x",c.toString());break;default:this.rtl?b.setAttribute("x",c.toString()):b.removeAttribute("text-anchor");break}var j=toNumber(b.getAttribute("y"));switch(this.textValign){case"middle":b.setAttribute("y",((j||0)+(d-this.bbox.height)/2).toString());break;case"bottom":b.setAttribute("y",((j||0)+d-this.bbox.height).toString());break;default:b.setAttribute("y",(j||0).toString());break}}}}},a.prototype.getSVGLineElement=function(i,o){var c=this.paper.addGroup("text");return c.textContent=i,c.attr({x:"0"}),hasValue(o)&&c.attr({y:o.toString()}),(this.truncate||this.wrap)&&c.attr({overflow:"hidden"}),c},Object.defineProperty(a.prototype,"rtl",{get:function(){return hasValue(this._rtl)?this._rtl:this._topParent?this._topParent.rtl:!1},set:function(i){i=toBoolean(i),this._rtl=i,this.element&&this.alignSVGText()},enumerable:!0,configurable:!0}),a.prototype.resetBBox=function(){this._bbox={x:0,y:0,width:0,height:0}},a.prototype.getHTMLLineElement=function(i){var o=document.createElement("div");switch(o.innerHTML=i,this.textAlign){case"middle":o.style.textAlign="center";break;case"end":o.style.textAlign="right";break}return this.wrap?o.style.wordWrap="break-word":o.style.whiteSpace="nowrap",this.rtl&&(o.style.direction="rtl"),hasValue(this.fill)&&(o.style.color=this.fill.toString()),o},a.prototype.setStyles=function(){var i=this.element;!this.selectable||this.draggable||this.resizable||this.swipeable?i.addStyle({webkitUserSelect:"none",msUserSelect:"none"}):this.selectable&&(i.removeStyle("webkitUserSelect"),i.removeStyle("msUserSelect"))},a.prototype.hideUnused=function(i){this.initLineCache();var o=this.getCache("lineInfo");if(o.length>=i)for(var c=i;c<o.length;c++){var d=o[c];d&&d.element&&d.element.attr({display:"none"})}},Object.defineProperty(a.prototype,"text",{get:function(){return this.getPropertyValue("text")},set:function(i){this.setPropertyValue("text",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"path",{get:function(){return this.getPropertyValue("path")},set:function(i){this.setPropertyValue("path",i,!0)&&(this.pathElement&&this.pathElement.dispose(),this.textPathElement&&this.textPathElement.dispose(),this.pathElement=this.paper.add("path"),this.pathElement.attr({d:i}),this.pathElement.attr({id:"text-path-"+this.uid}),this._disposers.push(this.pathElement),this.textPathElement=this.paper.addGroup("textPath"),this.textPathElement.attrNS(XLINK,"xlink:href","#text-path-"+this.uid),this.textPathElement.attr({path:i}),this._disposers.push(this.textPathElement),this.hardInvalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"locationOnPath",{get:function(){return this.getPropertyValue("locationOnPath")},set:function(i){this.setPropertyValue("locationOnPath",i),this.textPathElement&&this.textPathElement.attr({startOffset:i*100+"%"})},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"baseLineRatio",{get:function(){return this.getPropertyValue("baseLineRatio")},set:function(i){this.setPropertyValue("baseLineRatio",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"wrap",{get:function(){return this.getPropertyValue("wrap")},set:function(i){this.resetBBox(),this.setPropertyValue("wrap",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"truncate",{get:function(){return this.getPropertyValue("truncate")},set:function(i){this.resetBBox(),this.setPropertyValue("truncate",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"fullWords",{get:function(){return this.getPropertyValue("fullWords")},set:function(i){this.setPropertyValue("fullWords",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"ellipsis",{get:function(){return this.getPropertyValue("ellipsis")},set:function(i){this.setPropertyValue("ellipsis",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"selectable",{get:function(){return this.getPropertyValue("selectable")},set:function(i){this.setPropertyValue("selectable",i,!0),this.setStyles()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"textAlign",{get:function(){return this.getPropertyValue("textAlign")},set:function(i){this.setPropertyValue("textAlign",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"textValign",{get:function(){return this.getPropertyValue("textValign")},set:function(i){this.setPropertyValue("textValign",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"html",{get:function(){return this.getPropertyValue("html")},set:function(i){if(this.setPropertyValue("html",i,!0),!hasValue(i)){var o=this.element;o.removeChildrenByTag("foreignObject")}},enumerable:!0,configurable:!0}),a.prototype.setFill=function(i){if(e.prototype.setFill.call(this,i),this.html)for(var o=this.element,c=o.node.getElementsByTagName("div"),d=0;d<c.length;d++){var g=c[d];hasValue(this.fill)&&(g.style.color=this.fill.toString())}},Object.defineProperty(a.prototype,"hideOversized",{get:function(){return this.getPropertyValue("hideOversized")},set:function(i){this.setPropertyValue("hideOversized",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"ignoreFormatting",{get:function(){return this.getPropertyValue("ignoreFormatting")},set:function(i){this.setPropertyValue("ignoreFormatting",i,!0)},enumerable:!0,configurable:!0}),a.prototype.measureElement=function(){},a.prototype.getLineInfo=function(i){this.initLineCache();var o=this.getCache("lineInfo");return o.length>i?o[i]:void 0},a.prototype.addLineInfo=function(i,o){this.initLineCache(),this.getCache("lineInfo")[o]=i},a.prototype.initLineCache=function(){hasValue(this.getCache("lineInfo"))||this.setCache("lineInfo",[],0)},a.prototype.setDataItem=function(i){this._sourceDataItemEvents&&this._sourceDataItemEvents.dispose(),i&&(this._sourceDataItemEvents=new MultiDisposer([i.events.on("valuechanged",this.invalidate,this,!1),i.events.on("workingvaluechanged",this.invalidate,this,!1),i.events.on("calculatedvaluechanged",this.invalidate,this,!1),i.events.on("propertychanged",this.invalidate,this,!1)])),e.prototype.setDataItem.call(this,i)},Object.defineProperty(a.prototype,"availableWidth",{get:function(){return hasValue(this.maxWidth)?this.maxWidth:this.pixelWidth},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"availableHeight",{get:function(){return hasValue(this.maxHeight)?this.maxHeight:this.pixelHeight},enumerable:!0,configurable:!0}),a.prototype.getSvgElement=function(i,o,c){var d=this.paper.add("tspan");if(d.textContent=i,o)if(options.nonce&&c){var g="amcharts_element_style_"+btoa(o).replace(/[^\w]*/g,"");d.node.setAttribute("class",g);var b=document.createElementNS(SVGNS,"defs");c.node.appendChild(b);var j=document.createElement("style");j.type="text/css",j.innerHTML="."+g+" { "+o+"}",j.setAttribute("nonce",options.nonce),b.appendChild(j)}else d.node.setAttribute("style",o);return c&&c.add(d),d},a.prototype.deepInvalidate=function(){e.prototype.deepInvalidate.call(this),this.hardInvalidate()},Object.defineProperty(a.prototype,"readerTitle",{get:function(){var i=this.getPropertyValue("readerTitle");return i?this.dataItem&&(i=this.populateString(i)):i=this.populateString(plainText(isNotEmpty(this.html)?this.html:this.text)),i},set:function(i){i=toText(i),this.setPropertyValue("readerTitle",i)&&this.applyAccessibility()},enumerable:!0,configurable:!0}),a}(Container);registry.registeredClasses.Label=Label;defaultRules.push({relevant:ResponsiveBreakpoints.heightXS,state:function(e,a){if(e instanceof Label&&e.parent&&e.parent.isBaseSprite){var i=e.states.create(a);return i.properties.disabled=!0,i}return null}});var RoundedRectangle=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="RoundedRectangle",i.element=i.paper.add("path"),i.cornerRadius(3,3,3,3),i.applyTheme(),i}return a.prototype.draw=function(){e.prototype.draw.call(this);var i=this.innerWidth,o=this.innerHeight;if(isNumber$1(i)&&isNumber$1(o)){var c=min$1(i,o)/2,d=relativeToValue(this.cornerRadiusTopLeft,c),g=relativeToValue(this.cornerRadiusTopRight,c),b=relativeToValue(this.cornerRadiusBottomRight,c),j=relativeToValue(this.cornerRadiusBottomLeft,c),$=min$1(Math.abs(i/2),Math.abs(o/2)),rt=fitToRange(d,0,$),_e=fitToRange(g,0,$),st=fitToRange(b,0,$),ut=fitToRange(j,0,$),gt="M"+rt+",0 L"+(i-_e)+",0",yt=" L"+ut+","+o,Pt=" L0,"+rt,wt=" L"+i+","+(o-st),Ct=" a"+_e+","+_e+" 0 0 1 "+_e+","+_e,At=" a"+st+","+st+" 0 0 1 -"+st+","+st,Tt=" a"+ut+","+ut+" 0 0 1 -"+ut+",-"+ut,kt=" a"+rt+","+rt+" 0 0 1 "+rt+",-"+rt,It=gt+Ct+wt+At+yt+Tt+Pt+kt+" Z";this.path=It}},a.prototype.cornerRadius=function(i,o,c,d){this.cornerRadiusTopLeft=i,this.cornerRadiusTopRight=o,this.cornerRadiusBottomLeft=c,this.cornerRadiusBottomRight=d},Object.defineProperty(a.prototype,"cornerRadiusTopLeft",{get:function(){return this.getPropertyValue("cornerRadiusTopLeft")},set:function(i){this.setPercentProperty("cornerRadiusTopLeft",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"cornerRadiusTopRight",{get:function(){return this.getPropertyValue("cornerRadiusTopRight")},set:function(i){this.setPercentProperty("cornerRadiusTopRight",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"cornerRadiusBottomRight",{get:function(){return this.getPropertyValue("cornerRadiusBottomRight")},set:function(i){this.setPercentProperty("cornerRadiusBottomRight",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"cornerRadiusBottomLeft",{get:function(){return this.getPropertyValue("cornerRadiusBottomLeft")},set:function(i){this.setPercentProperty("cornerRadiusBottomLeft",i,!0)},enumerable:!0,configurable:!0}),a.prototype.measureElement=function(){},Object.defineProperty(a.prototype,"bbox",{get:function(){return this.definedBBox?this.definedBBox:this.isMeasured?{x:0,y:0,width:this.innerWidth,height:this.innerHeight}:{x:0,y:0,width:0,height:0}},enumerable:!0,configurable:!0}),a}(Sprite);registry.registeredClasses.RoundedRectangle=RoundedRectangle;var Button=function(e){__extends(a,e);function a(){var i=e.call(this)||this;i.className="Button",i.tooltipY=0,i.iconPosition="left",i.layout="horizontal",i.contentAlign="center",i.contentValign="middle",i.padding(8,16,8,16),i.setStateOnChildren=!0;var o=new InterfaceColorSet,c=i.background;c.fill=o.getFor("secondaryButton"),c.stroke=o.getFor("secondaryButtonStroke"),c.fillOpacity=1,c.strokeOpacity=1,c.cornerRadius(3,3,3,3),i.label=new Label,i.label.fill=o.getFor("secondaryButtonText"),i.label.shouldClone=!1;var d=c.states.create("hover");d.properties.fillOpacity=1,d.properties.fill=o.getFor("secondaryButtonHover");var g=c.states.create("down");return g.transitionDuration=100,g.properties.fill=o.getFor("secondaryButtonDown"),g.properties.fillOpacity=1,i.role="button",i.focusable=!0,i.applyTheme(),i}return Object.defineProperty(a.prototype,"icon",{get:function(){return this._icon},set:function(i){var o=this._icon;o&&(o.parent=void 0),i&&(this._icon=i,i.parent=this,i.interactionsEnabled=!1,i.shouldClone=!1,this.iconPosition=this.iconPosition,this._disposers.push(i))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"iconPosition",{get:function(){return this.getPropertyValue("iconPosition")},set:function(i){this.setPropertyValue("iconPosition",i),this.icon&&(i=="left"?this.icon.toBack():this.icon.toFront())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"label",{get:function(){return this._label},set:function(i){this._label&&this.removeDispose(this._label),this._label=i,i&&(i.parent=this,i.interactionsEnabled=!1,this._disposers.push(this._label))},enumerable:!0,configurable:!0}),a.prototype.createBackground=function(){return new RoundedRectangle},a.prototype.copyFrom=function(i){e.prototype.copyFrom.call(this,i),i.label&&this.label.copyFrom(i.label),i.icon&&(this.icon=i.icon.clone())},a}(Container);registry.registeredClasses.Button=Button;var Circle=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="Circle",i.element=i.paper.add("circle"),i.setPercentProperty("radius",percent(100)),i.setPropertyValue("horizontalCenter","middle"),i.setPropertyValue("verticalCenter","middle"),i.applyTheme(),i}return a.prototype.draw=function(){e.prototype.draw.call(this),this.element.attr({r:this.pixelRadius})},Object.defineProperty(a.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(i){this.setPercentProperty("radius",i,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"pixelRadius",{get:function(){return relativeToValue(this.radius,min$1(this.innerWidth/2,this.innerHeight/2))},enumerable:!0,configurable:!0}),a.prototype.measureElement=function(){var i=this.pixelRadius;this._bbox={x:-i,y:-i,width:i*2,height:i*2}},a}(Sprite);registry.registeredClasses.Circle=Circle;var Ellipse=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="Ellipse",i.element=i.paper.add("ellipse"),i.applyTheme(),i}return a.prototype.draw=function(){e.prototype.draw.call(this),this.element.attr({rx:this.radius}),this.element.attr({ry:this.radiusY})},Object.defineProperty(a.prototype,"radiusY",{get:function(){return this.innerHeight/2},set:function(i){this.height=i*2,this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"radius",{get:function(){return this.innerWidth/2},set:function(i){this.width=i*2,this.invalidate()},enumerable:!0,configurable:!0}),a}(Circle);registry.registeredClasses.Ellipse=Ellipse;var Image$1=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="Image",i.element=i.paper.add("image"),i.applyTheme(),i.width=50,i.height=50,i}return a.prototype.draw=function(){if(e.prototype.draw.call(this),this.href){var i=this.innerWidth,o=this.innerHeight;isNumber$1(this.widthRatio)&&(i=o*this.widthRatio,this.width=i),isNumber$1(this.heightRatio)&&(o=i*this.heightRatio,this.height=o),this.element.attr({width:i,height:o}),this.element.attrNS(XLINK,"xlink:href",this.href)}},Object.defineProperty(a.prototype,"href",{get:function(){return this.getPropertyValue("href")},set:function(i){this.setPropertyValue("href",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"widthRatio",{get:function(){return this.getPropertyValue("widthRatio")},set:function(i){this.setPropertyValue("widthRatio",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"heightRatio",{get:function(){return this.getPropertyValue("heightRatio")},set:function(i){this.setPropertyValue("heightRatio",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"bbox",{get:function(){return{x:0,y:0,width:this.pixelWidth,height:this.pixelHeight}},enumerable:!0,configurable:!0}),a}(Sprite);registry.registeredClasses.Image=Image$1;var Line=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="Line",i.element=i.paper.add("line"),i.fill=color(),i.x1=0,i.y1=0,i.applyTheme(),i}return a.prototype.draw=function(){e.prototype.draw.call(this),this.x1==this.x2||this.y1==this.y2?this.pixelPerfect=!0:this.pixelPerfect=!1,this.x1=this.x1,this.x2=this.x2,this.y1=this.y1,this.y2=this.y2},Object.defineProperty(a.prototype,"x1",{get:function(){return this.getPropertyValue("x1")},set:function(i){isNumber$1(i)||(i=0);var o=0;this.pixelPerfect&&this.stroke instanceof LinearGradient&&(o=1e-5),this.setPropertyValue("x1",i,!0),this.element.attr({x1:i+o})},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"x2",{get:function(){var i=this.getPropertyValue("x2");return isNumber$1(i)||(i=this.pixelWidth),i},set:function(i){isNumber$1(i)||(i=0),this.setPropertyValue("x2",i,!0),this.element.attr({x2:i})},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"y1",{get:function(){return this.getPropertyValue("y1")},set:function(i){isNumber$1(i)||(i=0);var o=0;this.pixelPerfect&&this.stroke instanceof LinearGradient&&(o=1e-5),this.setPropertyValue("y1",i,!0),this.element.attr({y1:i+o})},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"y2",{get:function(){var i=this.getPropertyValue("y2");return isNumber$1(i)||(i=this.pixelHeight),i},set:function(i){isNumber$1(i)||(i=0),this.setPropertyValue("y2",i,!0),this.element.attr({y2:i})},enumerable:!0,configurable:!0}),a.prototype.positionToPoint=function(i){var o={x:this.x1,y:this.y1},c={x:this.x2,y:this.y2},d=getMidPoint(o,c,i),g=getAngle(o,c);return{x:d.x,y:d.y,angle:g}},a}(Sprite);registry.registeredClasses.Line=Line;var PointedShape=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="PointedShape",i.pointerBaseWidth=15,i.pointerLength=10,i.pointerY=0,i.pointerX=0,i.applyTheme(),i}return a.prototype.draw=function(){e.prototype.draw.call(this),isNumber$1(this.pointerX)||(this.pointerX=this.pixelWidth/2),isNumber$1(this.pointerY)||(this.pointerY=this.pixelHeight+10)},Object.defineProperty(a.prototype,"pointerBaseWidth",{get:function(){return this.getPropertyValue("pointerBaseWidth")},set:function(i){this.setPropertyValue("pointerBaseWidth",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"pointerLength",{get:function(){return this.getPropertyValue("pointerLength")},set:function(i){this.setPropertyValue("pointerLength",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"pointerX",{get:function(){return this.getPropertyValue("pointerX")},set:function(i){this.setPropertyValue("pointerX",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"pointerY",{get:function(){return this.getPropertyValue("pointerY")},set:function(i){this.setPropertyValue("pointerY",i,!0)},enumerable:!0,configurable:!0}),a}(Sprite),PointedRectangle=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="PointedRectangle",i.element=i.paper.add("path"),i.cornerRadius=6,i.applyTheme(),i}return a.prototype.draw=function(){e.prototype.draw.call(this);var i=this.cornerRadius,o=this.innerWidth,c=this.innerHeight;if(o>0&&c>0){var d=this.pointerX,g=this.pointerY,b=this.pointerBaseWidth/2,j=min$1(o/2,c/2),$=fitToRange(i,0,j),rt=fitToRange(i,0,j),_e=fitToRange(i,0,j),st=fitToRange(i,0,j),ut=0,gt=0,yt=o,Pt=0,wt=o,Ct=c,At=0,Tt=c,kt=void 0,It=void 0,Lt=void 0,Ft=void 0,Nt=(d-ut)*(Ct-gt)-(g-gt)*(wt-ut),Ht=(d-At)*(Pt-Tt)-(g-Tt)*(yt-At);if(Nt>0&&Ht>0){var Gr=fitToRange(d,$+b,o-b-rt);g=fitToRange(g,-1/0,0),kt="M"+$+",0 L"+(Gr-b)+",0 L"+d+","+g+" L"+(Gr+b)+",0 L"+(o-rt)+",0"}else kt="M"+$+",0 L"+(o-rt)+",0";if(Nt<0&&Ht<0){var Gr=fitToRange(d,st+b,o-b-_e);g=fitToRange(g,c,1/0),Lt=" L"+(o-_e)+","+c+" L"+(Gr+b)+","+c+" L"+d+","+g+" L"+(Gr-b)+","+c+" L"+st+","+c}else Lt=" L"+st+","+c;if(Nt<0&&Ht>0){var hs=fitToRange(g,$+b,c-st-b);d=fitToRange(d,-1/0,0),Ft=" L0,"+(c-st)+" L0,"+(hs+b)+" L"+d+","+g+" L0,"+(hs-b)+" L0,"+$}else Ft=" L0,"+$;if(Nt>0&&Ht<0){var hs=fitToRange(g,rt+b,c-b-_e);d=fitToRange(d,o,1/0),It=" L"+o+","+rt+" L"+o+","+(hs-b)+" L"+d+","+g+" L"+o+","+(hs+b)+" L"+o+","+(c-_e)}else It=" L"+o+","+(c-_e);var _s=" a"+rt+","+rt+" 0 0 1 "+rt+","+rt,hn=" a"+_e+","+_e+" 0 0 1 -"+_e+","+_e,Qn=" a"+st+","+st+" 0 0 1 -"+st+",-"+st,ds=" a"+$+","+$+" 0 0 1 "+$+",-"+$;this.path=kt+_s+It+hn+Lt+Qn+Ft+ds}},Object.defineProperty(a.prototype,"cornerRadius",{get:function(){return this.getPropertyValue("cornerRadius")},set:function(i){this.setPropertyValue("cornerRadius",i,!0)},enumerable:!0,configurable:!0}),a}(PointedShape);function polyline(e){var a=lineTo(e[0]),i={x:0,y:0},o=options.minPolylineStep;isNumber$1(o)||(o=.5);for(var c=0,d=e.length;c<d;c++){var g=e[c];getDistance(g,i)>o&&(a+=lineTo(g),i=g)}return a}function moveTo(e){return" M"+round$1(e.x,4)+","+round$1(e.y,4)+" "}function lineTo(e){return" L"+round$1(e.x,4)+","+round$1(e.y,4)+" "}function quadraticCurveTo(e,a){return" Q"+round$1(a.x,4)+","+round$1(a.y,4)+" "+round$1(e.x,4)+","+round$1(e.y,4)}function cubicCurveTo(e,a,i){return" C"+round$1(a.x,4)+","+round$1(a.y,4)+" "+round$1(i.x,4)+","+round$1(i.y,4)+" "+round$1(e.x,4)+","+round$1(e.y,4)}function closePath(){return" Z"}function arcTo(e,a,i,o){if(a==0)return"";isNumber$1(o)||(o=i);var c="",d=",",g=Math.ceil(Math.abs(a)/180),b=1;a<0&&(b=0);var j=0,$=0,rt=-cos(e)*i,_e=-sin(e)*o;if(a<.5&&i>3e3){var st=e+a,ut=round$1(cos(st)*i,4),gt=round$1(sin(st)*o,4);return lineTo({x:ut,y:gt})}for(var yt=0;yt<g;yt++){var st=e+a/g*(yt+1),ut=round$1(cos(st)*i+rt-j,4),gt=round$1(sin(st)*o+_e-$,4);c+=" a"+i+d+o+d+0+d+0+d+b+d+ut+d+gt,j=ut,$=gt}return c}function arc(e,a,i,o,c,d,g){if(a==0||(isNumber$1(o)||(o=0),i==0&&o<=0))return"";if(i<o){var b=i;i=o,o=b,isNumber$1(c)&&(c=c/o*i)}a=min$1(a,360),a==360&&(d=0,g=0);var j=e+a,$=sin(min$1(a,45)/2);c=isNumber$1(c)?c:i,d=d||0,g=isNumber$1(g)?g:d;var rt=c/i*o,_e=c/i*d,st=c/i*g;d=fitToRange(d,0,(i-o)/2),_e=fitToRange(_e,0,(c-rt)/2),g=fitToRange(g,0,(i-o)/2),st=fitToRange(st,0,(c-rt)/2),d=round$1(fitToRange(d,0,i*$),4),_e=round$1(fitToRange(_e,0,c*$),4),g=round$1(fitToRange(g,0,o*$),4),st=round$1(fitToRange(st,0,rt*$),4);var ut=Math.asin(d/i/2)*DEGREES*2,gt=Math.asin(_e/c/2)*DEGREES*2;o<g&&(o=g),rt<st&&(rt=st);var yt=Math.asin(g/o/2)*DEGREES*2,Pt=Math.asin(st/rt/2)*DEGREES*2;isNumber$1(yt)||(yt=0),isNumber$1(Pt)||(Pt=0);var wt=e+a/2,Ct={x:round$1(cos(wt)*o,4),y:sin(wt)*rt},At={x:cos(e)*(o+g),y:sin(e)*(rt+st)},Tt={x:cos(e)*(i-d),y:sin(e)*(c-_e)},kt={x:cos(j)*(i-d),y:sin(j)*(c-_e)},It={x:cos(j)*(o+g),y:sin(j)*(rt+st)},Lt={x:cos(e+ut)*i,y:sin(e+gt)*c},Ft={x:cos(j-yt)*o,y:sin(j-Pt)*rt};g+=g*sin(yt/2),st+=st*sin(Pt/2),yt>(j-e)/2&&(Ft=Ct);var Nt="";return a==360?Nt=moveTo(Tt):(Nt=moveTo(At),Nt+=lineTo(Tt),Nt+=arcToPoint(Lt,d,_e,!0)),Nt+=arcTo(e+ut,a-2*ut,i,c),isNumber$1(o)&&o!=0?(a==360&&d==0?Nt+=moveTo(It):(Nt+=arcToPoint(kt,d,_e,!0),Nt+=lineTo(It),Nt+=arcToPoint(Ft,g,st,!0)),Nt+=arcTo(j-yt,-(a-2*yt),o,rt),(a<360||d>0)&&(Nt+=arcToPoint(At,g,st,!0)),Nt+=lineTo(At)):(Nt+=arcToPoint(kt,d,_e,!0),a<360&&(Nt+=lineTo(At))),Nt}function arcToPoint(e,a,i,o,c,d){if(a==0)return"";d=d||0,c=!!c,o=!!o;var g=",",b=+o,j=+c;return" A"+a+g+i+g+d+g+j+g+b+g+round$1(e.x,4)+g+round$1(e.y,4)}function rectangle(e,a,i,o){return isNumber$1(i)||(i=0),isNumber$1(o)||(o=0),moveTo({x:i,y:o})+lineTo({x:i+e,y:o})+lineTo({x:i+e,y:o+a})+lineTo({x:i,y:o+a})+closePath()}function rectToPath(e,a){var i=",",o=" L";return a?"M"+e.x+i+e.y+o+e.x+i+(e.y+e.height)+o+(e.x+e.width)+i+(e.y+e.height)+o+(e.x+e.width)+i+e.y+o+e.x+i+e.y:"M"+e.x+i+e.y+o+(e.x+e.width)+i+e.y+o+(e.x+e.width)+i+(e.y+e.height)+o+e.x+i+(e.y+e.height)+o+e.x+i+e.y}function pathToPoints(e,a){var i=getGhostPaper(),o=i.add("path").node;if(o.setAttribute("d",e),o.getPointAtLength&&o.getTotalLength){for(var c=o.getTotalLength(),d=[],g=0;g<a;g++){var b=o.getPointAtLength(g/a*c);d.push({x:b.x,y:b.y})}return d}o.remove()}function spiralPoints(e,a,i,o,c,d,g,b,j){isNumber$1(b)||(b=0),isNumber$1(b)||(j=b);for(var $=c+.01,rt=b*RADIANS,_e=[];$<i+g;){var st=d;if(st/2>$&&(st=2*$),rt+=2*Math.asin(st/2/$),rt*DEGREES>j+(i-c)/g*360)break;var ut=rt*DEGREES,gt={x:e+$*Math.cos(rt),y:a+$*o/i*Math.sin(rt)};_e.push(gt),$=c+ut/360*g}return _e.shift(),_e}function pointsToPath(e){if(!e||e.length==0)return"";var a=moveTo(e[0]);if(e&&e.length>0)for(var i=1;i<e.length;i++)a+=lineTo(e[i]);return a}const Path=Object.freeze(Object.defineProperty({__proto__:null,arc,arcTo,arcToPoint,closePath,cubicCurveTo,lineTo,moveTo,pathToPoints,pointsToPath,polyline,quadraticCurveTo,rectToPath,rectangle,spiralPoints},Symbol.toStringTag,{value:"Module"}));var Polyline=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i._distance=0,i.className="Polyline",i.element=i.paper.add("path"),i.shapeRendering="auto",i.fill=color(),i.strokeOpacity=1,i.applyTheme(),i}return a.prototype.makePath=function(){this._distance=0;var i=this.segments;if(i&&i.length>0){for(var o="",c=0,d=i.length;c<d;c++){var g=i[c];if(g.length>0){o+=moveTo(g[0]);for(var b=1;b<g.length;b++){var j=g[b];o+=lineTo(j),this._distance+=getDistance(g[b-1],j)}}}this.path=o}this._realSegments=i},Object.defineProperty(a.prototype,"segments",{get:function(){return this.getPropertyValue("segments")},set:function(i){this.setPropertyValue("segments",i),this.makePath()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),a.prototype.positionToPoint=function(i){var o=0;i<0&&(i=Math.abs(i),o=180);var c=this._realSegments;if(c){for(var d=this.distance,g=0,b=void 0,j=0,$=0,rt=void 0,_e=void 0,st=0;st<c.length;st++){var ut=c[st];if(ut.length>1){for(var gt=1;gt<ut.length;gt++)if(rt=ut[gt-1],_e=ut[gt],j=g/d,b=getDistance(rt,_e),g+=b,$=g/d,j<=i&&$>i){st=c.length;break}}else ut.length==1&&(rt=ut[0],_e=ut[0],j=0,$=1)}if(rt&&_e){var yt=(i-j)/($-j),Pt=getMidPoint(rt,_e,yt);return{x:Pt.x,y:Pt.y,angle:o+getAngle(rt,_e)}}}return{x:0,y:0,angle:0}},Object.defineProperty(a.prototype,"realSegments",{get:function(){return this._realSegments},enumerable:!0,configurable:!0}),a}(Sprite);registry.registeredClasses.Polyline=Polyline;var Polyarc=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="Polyarc",i.controlPointDistance=.5,i.controlPointPosition=.5,i.applyTheme(),i}return a.prototype.makePath=function(){this._distance=0;var i=this.segments;if(i&&i.length>0){var o="";this._realSegments=[];for(var c=0,d=i.length;c<d;c++){var g=i[c],b=[];if(this._realSegments.push(b),g.length>0){o+=moveTo(g[0]);for(var j=1;j<g.length;j++){var $=g[j-1],rt=g[j],_e=getDistance(rt,$),st=_e*this.controlPointDistance,ut=this.controlPointPosition,gt=-getAngle($,rt),yt=$.x+(rt.x-$.x)*ut*.5-st*sin(gt),Pt=$.y+(rt.y-$.y)*ut*.5-st*cos(gt),wt={x:yt,y:Pt},Ct=$.x+(rt.x-$.x)*ut*1.5-st*sin(gt),At=$.y+(rt.y-$.y)*ut*1.5-st*cos(gt),Tt={x:Ct,y:At};o+=cubicCurveTo(rt,wt,Tt);var kt=Math.ceil(_e),It=$;if(kt>0)for(var Lt=0;Lt<=kt;Lt++){var Ft=getPointOnCubicCurve($,rt,wt,Tt,Lt/kt);b.push(Ft),this._distance+=getDistance(It,Ft),It=Ft}else b.push($)}}}this.path=o}},Object.defineProperty(a.prototype,"controlPointPosition",{get:function(){return this.getPropertyValue("controlPointPosition")},set:function(i){this.setPropertyValue("controlPointPosition",i),this.makePath()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"controlPointDistance",{get:function(){return this.getPropertyValue("controlPointDistance")},set:function(i){this.setPropertyValue("controlPointDistance",i),this.makePath()},enumerable:!0,configurable:!0}),a}(Polyline);registry.registeredClasses.Polyarc=Polyarc;var Morpher=function(e){__extends(a,e);function a(i){var o=e.call(this)||this;return o._bboxes=[],o.morphDuration=800,o.morphEasing=cubicOut,o.morphToSingle=!0,o.scaleRatio=1,o.className="Morpher",o.morphable=i,o.applyTheme(),o}return a.prototype.morphToPolygon=function(i,o,c){var d=this.morphable.currentPoints;if(d&&i){this.sortPoints(d),this.sortPoints(i),this._morphFromPointsReal=[],this._morphToPointsReal=[],hasValue(o)||(o=this.morphDuration),hasValue(c)||(c=this.morphEasing),this._morphFromPointsReal=this.normalizePoints(i,d),this._morphToPointsReal=this.normalizePoints(d,i),this.morphable.currentPoints=this._morphFromPointsReal;var g=new Animation(this,{property:"morphProgress",from:0,to:1},o,c);return this._disposers.push(g),g.start(),g}},a.prototype.normalizePoints=function(i,o){for(var c=0,d=i.length;c<d;c++){var g=i[c][0],b=i[c][1],j=getValue(getBBox(g)),$=j.x+j.width,rt=j.y+j.height;if(o[c]||(o[c]=[]),g&&!o[c][0]&&(o[c][0]=[{x:$,y:rt},{x:$,y:rt}]),o[c][0]){o[c][0]=this.addPoints(o[c][0],g.length);for(var _e=1/0,st=0,ut=0;ut<o[c][0].length;ut++){var gt=getDistance(o[c][0][ut],g[0]);gt<_e&&(st=ut,_e=gt)}var yt=o[c][0].slice(0,st),Pt=o[c][0].slice(st);o[c][0]=Pt.concat(yt)}b&&(o[c][1]||(o[c][1]=[{x:$,y:rt},{x:$,y:rt}]),o[c][1]=this.addPoints(o[c][1],b.length))}return o},a.prototype.sortPoints=function(i){i.sort(function(b,j){var $=getValue(getBBox(b[0])),rt=getValue(getBBox(j[0]));return $.width*$.height>rt.width*rt.height?-1:1});for(var o=[],c=0,d=i.length;c<d;c++){var g=i[c][0];g&&o.push(getValue(getBBox(g)))}return getCommonRectangle(o)},a.prototype.morphToCircle=function(i,o,c){var d=this.morphable.points,g=this.sortPoints(d);this._morphFromPointsReal=[],this._morphToPointsReal=[],hasValue(o)||(o=this.morphDuration),hasValue(c)||(c=this.morphEasing);for(var b=0,j=d.length;b<j;b++){var $=d[b][0],rt=d[b][1];if(this._morphFromPointsReal[b]=[],this._morphToPointsReal[b]=[],$){var _e=$,st=$,ut=getValue(getBBox(st));this.morphToSingle&&(ut=getValue(g));var gt=ut.x+ut.width/2,yt=ut.y+ut.height/2,Pt=i;isNumber$1(Pt)||(Pt=Math.min(ut.width/2,ut.height/2)),_e=[];var wt=getAngle({x:gt,y:yt},$[0]),Ct=100;$.length>Ct&&(Ct=$.length),st=this.addPoints($,Ct),Ct=st.length;for(var At=360/(Ct-1),Tt=0;Tt<Ct;Tt++){var kt=At*Tt+wt,It={x:gt+Pt*cos(kt),y:yt+Pt*sin(kt)};_e[Tt]=It}if(rt&&rt.length>0)for(var Lt=0,Ft=rt.length;Lt<Ft;Lt++)_e.push({x:gt,y:yt});this._morphFromPointsReal[b][0]=st,this._morphToPointsReal[b][0]=_e}}this.morphable.currentPoints=this._morphFromPointsReal;var Nt=new Animation(this,{property:"morphProgress",from:0,to:1},o,c);return this._disposers.push(Nt),Nt.start(),Nt},a.prototype.addPoints=function(i,o){for(var c=Math.round(o/i.length),d=[],g=0,b=i.length;g<b;g++){var j=i[g],$=void 0;g==i.length-1?$=i[0]:$=i[g+1],d.push(j);for(var rt=1;rt<c;rt++){var _e=rt/c,st={x:j.x+($.x-j.x)*_e,y:j.y+($.y-j.y)*_e};d.push(st)}d.length+i.length-g==o&&(c=0)}if(d.length<o&&i.length>0)for(var ut=i[i.length-1],rt=d.length;rt<o;rt++)d.push({x:ut.x,y:ut.y});return d},a.prototype.morphToRectangle=function(i,o,c,d){var g=this.morphable.points;this.sortPoints(g),this._morphFromPointsReal=[],this._morphToPointsReal=[],hasValue(c)||(c=this.morphDuration),hasValue(d)||(d=this.morphEasing);for(var b=0,j=g.length;b<j;b++){var $=g[b][0],rt=g[b][1];if(this._morphFromPointsReal[b]=[],this._morphToPointsReal[b]=[],$){var _e=$,st=$,ut=this._bboxes[b];this.morphToSingle;var gt=ut.x,yt=ut.y,Pt=i,wt=o;if(isNumber$1(Pt)||(Pt=ut.width),isNumber$1(wt)||(wt=ut.height),_e=[{x:gt,y:yt},{x:gt+Pt,y:yt},{x:gt+Pt,y:yt+wt},{x:gt,y:yt+wt}],_e=this.addPoints(_e,$.length),$.length<4)for(var Ct=$.length;Ct<4;Ct++)_e.push({x:$[Ct].x,y:$[Ct].y});if(rt&&rt.length>0)for(var At=ut.x+ut.width/2,Tt=ut.y+ut.height/2,kt=0,It=rt.length;kt<It;kt++)_e.push({x:At,y:Tt});this._morphFromPointsReal[b][0]=st,this._morphToPointsReal[b][0]=_e}}this.morphable.currentPoints=this._morphFromPointsReal;var Lt=new Animation(this,{property:"morphProgress",from:0,to:1},c,d);return this._disposers.push(Lt),Lt.start(),Lt},Object.defineProperty(a.prototype,"morphProgress",{get:function(){return this._morphProgress},set:function(i){this._morphProgress=i;var o=[];if(i!=null){var c=this._morphFromPointsReal,d=this._morphToPointsReal;if(c!=null&&d!=null)for(var g=0,b=c.length;g<b;g++){var j=[];o.push(j);var $=c[g][0],rt=c[g][1],_e=d[g][0],st=d[g][1];if($&&$.length>0&&_e&&_e.length>0){for(var ut=[],gt=0,yt=$.length;gt<yt;gt++){var Pt=$[gt],wt=_e[gt],Ct={x:Pt.x+(wt.x*this.scaleRatio-Pt.x)*i,y:Pt.y+(wt.y*this.scaleRatio-Pt.y)*i};ut.push(Ct)}j[0]=ut}if(rt&&rt.length>0&&st&&st.length>0){for(var At=[],Tt=0,kt=rt.length;Tt<kt;Tt++){var Pt=rt[Tt],wt=st[Tt],Ct={x:Pt.x+(wt.x*this.scaleRatio-Pt.x)*i,y:Pt.y+(wt.y*this.scaleRatio-Pt.y)*i};At.push(Ct)}j[1]=At}}}this.morphable.currentPoints=o},enumerable:!0,configurable:!0}),a.prototype.morphBack=function(i,o){this._morphToPointsReal=this._morphFromPointsReal,this._morphFromPointsReal=this.morphable.currentPoints,hasValue(i)||(i=this.morphDuration),hasValue(o)||(o=this.morphEasing);var c=new Animation(this,{property:"morphProgress",from:0,to:1},i,o);return this._disposers.push(c),c.start(),c},Object.defineProperty(a.prototype,"animations",{get:function(){return this._animations||(this._animations=[],this._disposers.push(new AnimationDisposer(this._animations))),this._animations},enumerable:!0,configurable:!0}),a}(BaseObject),Polygon=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="Polygon",i.element=i.paper.add("path"),i.shapeRendering="auto",i._currentPoints=[],i.applyTheme(),i}return Object.defineProperty(a.prototype,"points",{get:function(){var i=this.getPropertyValue("points"),o=this.path;if(o&&(!i||i.length==0)){for(var c=o.slice(1,o.length-1),d=c.split("ZM"),g=0;g<d.length;g++){var b=d[g];if(b.length>0){var j=b.split("M"),$=j[0],rt=j[1];if($&&$.length>0){var _e=$.split("L");if(_e.length>0){var st=[],ut=[st];i.push(ut);for(var gt=0;gt<_e.length;gt++){var yt=_e[gt].split(",");st.push({x:+yt[0],y:+yt[1]})}if(rt&&rt.length>0){var Pt=rt.split("L");if(Pt.length>0){var wt=[];ut.push(wt);for(var gt=Pt.length-1;gt>=0;gt--){var yt=Pt[gt].split(",");wt.push({x:+yt[0],y:+yt[1]})}}}}}}}this.setPropertyValue("points",i),this._currentPoints=i}return i},set:function(i){this.setPropertyValue("points",i,!0),this._currentPoints=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"currentPoints",{get:function(){return(!this._currentPoints||this._currentPoints.length==0)&&this.path&&(this._currentPoints=this.points),this._currentPoints},set:function(i){this._currentPoints!=i&&(this._currentPoints=i,this.draw())},enumerable:!0,configurable:!0}),a.prototype.draw=function(){var i="",o=this._currentPoints,c,d,g,b;if(o.length>0){for(var j=0,$=o.length;j<$;j++){var rt=o[j][0],_e=o[j][1];if(rt&&rt.length>0){var st=rt[0];i+=moveTo(st);for(var ut=0;ut<rt.length;ut++)st=rt[ut],i+=lineTo(st),(!isNumber$1(d)||d<st.x)&&(d=st.x),(!isNumber$1(c)||c>st.x)&&(c=st.x),(!isNumber$1(g)||g>st.y)&&(g=st.y),(!isNumber$1(b)||b<st.y)&&(b=st.y)}if(_e&&_e.length>0){var st=_e[0];i+=moveTo(st);for(var gt=0,yt=_e.length;gt<yt;gt++)st=_e[gt],i+=lineTo(st)}}i&&(i+=closePath()),this.bbox.x=c,this.bbox.y=g,this.bbox.width=d-c,this.bbox.height=b-g,e.prototype.setPath.call(this,i)}},a.prototype.setPath=function(i){return e.prototype.setPath.call(this,i)?(this.points=[],this._bbox=this.group.getBBox(),!0):!1},a.prototype.measureElement=function(){},Object.defineProperty(a.prototype,"centerPoint",{get:function(){return{x:this.bbox.x+this.bbox.width/2,y:this.bbox.y+this.bbox.height/2}},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"morpher",{get:function(){return this._morpher||(this._morpher=new Morpher(this),this._disposers.push(this._morpher)),this._morpher},enumerable:!0,configurable:!0}),a}(Sprite);registry.registeredClasses.Polygon=Polygon;var Polyspline=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="Polyspline",i.tensionX=.5,i.tensionY=.5,i.applyTheme(),i}return a.prototype.makePath=function(){this._distance=0;var i=this.segments,o=this.tensionX,c=this.tensionY;if(this.allPoints=[],i&&i.length>0){var d="";this._realSegments=[];for(var g=0,b=i.length;g<b;g++){var j=i[g],$=[];if(this._realSegments.push($),j.length>0){var rt=j[0],_e=j[j.length-1],st=!1;round$1(rt.x,3)==round$1(_e.x)&&round$1(rt.y)==round$1(_e.y)&&(st=!0),d+=moveTo(j[0]);for(var ut=0;ut<j.length-1;ut++){var gt=j[ut-1],yt=j[ut],Pt=j[ut+1],wt=j[ut+2];ut===0?gt=j[ut]:ut==j.length-2&&(wt=j[ut+1]),wt||(wt=Pt),ut===0?st?gt=j[j.length-2]:gt=j[g]:ut==j.length-2&&(st?wt=j[1]:wt=j[ut+1]);var Ct=getCubicControlPointA(gt,yt,Pt,wt,o,c),At=getCubicControlPointB(gt,yt,Pt,wt,o,c);d+=cubicCurveTo(Pt,Ct,At);var Tt=Math.ceil(getCubicCurveDistance(yt,Pt,Ct,At,20))*1.2,kt=yt;if(Tt>0)for(var It=0;It<=Tt;It++){var Lt=getPointOnCubicCurve(yt,Pt,Ct,At,It/Tt);if(!(Lt.x==kt.x&&Lt.y==kt.y)){$.push(Lt);var Ft=round$1(getAngle(kt,Lt),5);this._distance+=getDistance(kt,Lt),this.allPoints[Math.floor(this._distance)]={x:Lt.x,y:Lt.y,angle:Ft},kt=Lt}}else $.push(gt)}}var Nt=this.allPoints;if(Nt.length>1){for(var Ht=0;Ht<Nt.length;Ht++)if(!Nt[Ht]){if(Ht>1)Nt[Ht]=Nt[Ht-1];else for(var Gr=1;Gr<Nt.length;Gr++)if(Nt[Gr]){Nt[Ht]=Nt[Gr];break}}}}this.path=d}},a.prototype.getClosestPointIndex=function(i){var o=this.allPoints,c,d=1/0;if(o.length>1)for(var g=1;g<o.length;g++){var b=getDistance(i,o[g]);b<d&&(c=g,d=b)}return c},Object.defineProperty(a.prototype,"tensionX",{get:function(){return this.getPropertyValue("tensionX")},set:function(i){this.setPropertyValue("tensionX",i),this.makePath()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"tensionY",{get:function(){return this.getPropertyValue("tensionY")},set:function(i){this.setPropertyValue("tensionY",i,!0),this.makePath()},enumerable:!0,configurable:!0}),a.prototype.positionToPoint=function(i,o){var c=0,d=this.allPoints,g=d.length;if(isNumber$1(i)||(i=0),g>1){if(o&&g>3){if(i<0){i<-.01&&(i=-.01);var b=d[0],j=d[1],$=b.x-(b.x-j.x)*g*i,rt=b.y-(b.y-j.y)*g*i;return{x:$,y:rt,angle:getAngle(b,j)}}else if(i>1){i>1.01&&(i=1.01);var b=d[d.length-2],j=d[d.length-3],$=b.x+(b.x-j.x)*g*(i-1),rt=b.y+(b.y-j.y)*g*(i-1);return{x:$,y:rt,angle:getAngle(b,{x:$,y:rt})}}else if(i==1){var _e=d[d.length-1];return{x:_e.x,y:_e.y,angle:_e.angle}}}else i<0&&(i=Math.abs(i),c=180),i>=1&&(i=.9999999999999);var st=d[Math.floor(i*g)];return{x:st.x,y:st.y,angle:st.angle+c}}else if(g==1){var st=d[0];return{x:st.x,y:st.y,angle:st.angle}}else return{x:0,y:0,angle:0}},a}(Polyline);registry.registeredClasses.Polyspline=Polyspline;var Slice=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="Slice",i.setPropertyValue("cornerRadius",0),i.setPropertyValue("startAngle",0),i.setPercentProperty("innerRadius",0),i.setPercentProperty("radius",0),i.setPropertyValue("arc",0),i.setPropertyValue("shiftRadius",0),i.strokeOpacity=1,i.setPropertyValue("layout","none"),i.slice=i.createChild(Sprite),i.slice.isMeasured=!1,i._disposers.push(i.slice),i.applyTheme(),i}return a.prototype.draw=function(){e.prototype.draw.call(this);var i=this.radiusY;this.radius>0&&i==0&&(i=.01),this.slice.path=arc(this.startAngle,this.arc,this.radius,this.pixelInnerRadius,i,this.cornerRadius,this.innerCornerRadius),this.slice.invalidate(),this.shiftRadius=this.shiftRadius,this.realFill instanceof RadialGradient&&this.updateGradient(this.realFill),this.realStroke instanceof RadialGradient&&this.updateGradient(this.realStroke)},a.prototype.updateGradient=function(i){i.element.attr({gradientUnits:"userSpaceOnUse"}),i.element.attr({r:this.radius}),i.cx=0,i.cy=0,i.element.attr({radius:this.radius})},Object.defineProperty(a.prototype,"bbox",{get:function(){if(this.definedBBox)return this.definedBBox;if(this.isMeasured){var i=getArcRect(this.startAngle,this.startAngle+this.arc,this.pixelInnerRadius),o=getArcRect(this.startAngle,this.startAngle+this.arc,this.radius);return getCommonRectangle([i,o])}else return{x:0,y:0,width:0,height:0}},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(i){this.setPropertyValue("startAngle",normalizeAngle(i),!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"arc",{get:function(){return this.getPropertyValue("arc")},set:function(i){isNumber$1(i)||(i=0),this.setPropertyValue("arc",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"radius",{get:function(){var i=this.getPropertyValue("radius");return isNumber$1(i)||(i=0),i},set:function(i){this.setPropertyValue("radius",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"radiusY",{get:function(){var i=this.getPropertyValue("radiusY");return isNumber$1(i)||(i=this.radius),i},set:function(i){this.setPropertyValue("radiusY",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(i){this.setPercentProperty("innerRadius",i,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"pixelInnerRadius",{get:function(){return relativeToValue(this.innerRadius,this.radius)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"cornerRadius",{get:function(){return this.getPropertyValue("cornerRadius")},set:function(i){this.setPropertyValue("cornerRadius",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"innerCornerRadius",{get:function(){return this.getPropertyValue("innerCornerRadius")},set:function(i){this.setPropertyValue("innerCornerRadius",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"shiftRadius",{get:function(){return this.getPropertyValue("shiftRadius")},set:function(i){this.setPropertyValue("shiftRadius",i),i=this.getPropertyValue("shiftRadius"),this.dx=i*this.radius*this.ix,this.dy=i*this.radiusY*this.iy},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"ix",{get:function(){return cos(this.middleAngle)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"iy",{get:function(){return sin(this.middleAngle)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"middleAngle",{get:function(){return this.startAngle+this.arc/2},enumerable:!0,configurable:!0}),a.prototype.getTooltipX=function(){var i=this.getPropertyValue("tooltipX");if(isNumber$1(i))return i;var o=.5;i instanceof Percent&&(o=i.value);var c=relativeToValue(this.innerRadius,this.radius);return this.ix*(c+(this.radius-c)*o)},a.prototype.getTooltipY=function(){var i=this.getPropertyValue("tooltipY");if(isNumber$1(i))return i;var o=.5;i instanceof Percent&&(o=i.value);var c=relativeToValue(this.innerRadius,this.radius);return this.iy*(c+(this.radius-c)*o)+this.slice.dy},a}(Container);registry.registeredClasses.Slice=Slice;var Preloader=function(e){__extends(a,e);function a(){var i=e.call(this)||this;i.className="Preloader",i.width=percent(100),i.height=percent(100);var o=new InterfaceColorSet,c=i.createChild(Container);c.shouldClone=!1;var d=c.createChild(Slice);d.shouldClone=!1,d.radius=53,d.arc=360,d.fill=o.getFor("fill"),d.fillOpacity=.8,d.innerRadius=42,d.isMeasured=!1,i.backgroundSlice=d;var g=c.createChild(Slice);g.shouldClone=!1,g.radius=50,g.innerRadius=45,g.fill=o.getFor("alternativeBackground"),g.fillOpacity=.2,g.isMeasured=!1,i.progressSlice=g;var b=c.createChild(Label);b.shouldClone=!1,b.horizontalCenter="middle",b.verticalCenter="middle",b.isMeasured=!1,b.fill=o.getFor("text"),b.align="center",b.valign="middle",b.textAlign="middle",b.fillOpacity=.4,i.label=b,i.background.opacity=1,i.background.fill=o.getFor("background"),i.contentAlign="center",i.contentValign="middle",i.delay=300;var j=i.states.create("hidden");return j.properties.opacity=0,i.visible=!1,i.hide(0),i.__disabled=!0,i._disposers.push(i.backgroundSlice),i._disposers.push(i.progressSlice),i._disposers.push(i.label),i._disposers.push(c),i}return Object.defineProperty(a.prototype,"progress",{get:function(){return this.getPropertyValue("progress")},set:function(i){var o=this;this.__disabled=!1,this.validateLayout(),this.setPropertyValue("progress",i),this.progressSlice.arc=360*i,this.label&&(this.label.text=Math.round(i*100)+"%"),i>=1?(this._started&&(this._started=void 0),registry.events.once("enterframe",function(){var c=o.hide();c&&!c.isFinished()?c.events.once("animationended",function(){o.__disabled=!0}):o.__disabled=!0}),this.interactionsEnabled=!1,this.setPropertyValue("progress",0)):i>0&&(this.delay?this._started?this._started+this.delay<=new Date().getTime()&&(this.__disabled=!1,this.show(),this.interactionsEnabled=!0):this._started=new Date().getTime():(this.__disabled=!1,this.show(),this.interactionsEnabled=!0))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"delay",{get:function(){return this.getPropertyValue("delay")},set:function(i){this.setPropertyValue("delay",i)},enumerable:!0,configurable:!0}),a}(Container);registry.registeredClasses.Preloader=Preloader;var ResizeButton=function(e){__extends(a,e);function a(){var i=e.call(this)||this;i.className="ResizeButton",i.orientation="horizontal",i.layout="absolute",i.horizontalCenter="middle",i.verticalCenter="middle",i.draggable=!0,i.padding(8,8,8,8),i.background.cornerRadius(20,20,20,20);var o=new Sprite;o.element=i.paper.add("path");var c=moveTo({x:-2,y:-6});return c+=lineTo({x:-2,y:6}),c+=moveTo({x:2,y:-6}),c+=lineTo({x:2,y:6}),o.path=c,o.pixelPerfect=!0,o.padding(0,4,0,4),o.stroke=new InterfaceColorSet().getFor("alternativeText"),o.strokeOpacity=.7,i.icon=o,i.label.dispose(),i.label=void 0,i.applyTheme(),i}return Object.defineProperty(a.prototype,"orientation",{set:function(i){var o=this.icon;o&&(i=="horizontal"?o.rotation=0:o.rotation=-90)},enumerable:!0,configurable:!0}),a}(Button);registry.registeredClasses.ResizeButton=ResizeButton;var CloseButton=function(e){__extends(a,e);function a(){var i=e.call(this)||this;i.className="CloseButton",i.padding(8,8,8,8),i.showSystemTooltip=!0,i.width=30,i.height=30;var o=new InterfaceColorSet;i.cursorOverStyle=MouseCursorStyle.pointer;var c=i.background;c.cornerRadius(20,20,20,20);var d=o.getFor("background");c.fill=d,c.stroke=o.getFor("primaryButton"),c.strokeOpacity=1,c.strokeWidth=1;var g=o.getFor("primaryButtonActive"),b=c.states.getKey("hover");b.properties.strokeWidth=3,b.properties.fill=d;var j=c.states.getKey("down");j.properties.stroke=g,j.properties.fill=d;var $=new Sprite;return $.element=i.paper.add("path"),$.stroke=c.stroke,i.icon=$,i.applyTheme(),i}return a.prototype.validate=function(){e.prototype.validate.call(this);var i=this.pixelWidth/3,o=this.pixelHeight/3,c=moveTo({x:-i/2,y:-o/2});c+=lineTo({x:i/2,y:o/2}),c+=moveTo({x:i/2,y:-o/2}),c+=lineTo({x:-i/2,y:o/2}),this.icon.path=c,this.invalidateLayout()},a.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("Close"))},a}(Button);registry.registeredClasses.CloseButton=CloseButton;var SwitchButton=function(e){__extends(a,e);function a(){var i=e.call(this)||this;i.className="SwitchButton",i.tooltipY=0,i.layout="horizontal",i.contentAlign="center",i.contentValign="middle",i.padding(8,16,8,16),i.setStateOnChildren=!0,i.states.create("active");var o=new InterfaceColorSet,c=new Label;c.fillOpacity=.3;var d=c.states.create("active");d.properties.fillOpacity=1,c.isActive=!0,i.leftLabel=c;var g=new Button,b=new Circle;g.contentValign="none",g.padding(0,0,0,0),b.radius=10,g.icon=b,g.icon.valign="middle",g.label=void 0;var j=percent(100);g.background.cornerRadius(j,j,j,j),g.width=b.radius*3.5,g.height=b.radius*2.1,g.marginLeft=8,g.marginRight=8,g.togglable=!0,b.dx=-b.radius*.7,b.fill=o.getFor("primaryButton");var $=b.states.create("hover");$.properties.fill=o.getFor("primaryButtonHover");var rt=b.states.create("active");rt.properties.fill=o.getFor("primaryButtonActive"),rt.properties.dx=b.radius*.7,i.switchButton=g,i.events.on("toggled",function(){i.leftLabel.isActive=!i.isActive,i.rightLabel.isActive=i.isActive});var _e=new Label;_e.fillOpacity=.3;var st=_e.states.create("active");return st.properties.fillOpacity=1,i.rightLabel=_e,i.role="button",i.focusable=!0,_e.valign="middle",c.valign="middle",g.valign="middle",i.applyTheme(),i}return Object.defineProperty(a.prototype,"leftLabel",{get:function(){return this._leftLabel},set:function(i){this._leftLabel&&this.removeDispose(this._leftLabel),this._leftLabel=i,i&&(i.parent=this,i.interactionsEnabled=!1,i.shouldClone=!1,this._disposers.push(this._leftLabel))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"rightLabel",{get:function(){return this._rightLabel},set:function(i){this._rightLabel&&this.removeDispose(this._rightLabel),this._rightLabel=i,i&&(i.parent=this,i.interactionsEnabled=!1,i.shouldClone=!1,this._disposers.push(this._rightLabel))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"switch",{get:function(){return this._switchButton},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"switchButton",{get:function(){return this._switchButton},set:function(i){this._switchButton&&this.removeDispose(this._switchButton),this._switchButton=i,i&&(i.parent=this,i.shouldClone=!1,this._disposers.push(this._switchButton))},enumerable:!0,configurable:!0}),a.prototype.copyFrom=function(i){e.prototype.copyFrom.call(this,i),i.leftLabel&&this.leftLabel.copyFrom(i.leftLabel),i.rightLabel&&this.rightLabel.copyFrom(i.rightLabel),i.switchButton&&this.switchButton.copyFrom(i.switchButton)},a}(Container);registry.registeredClasses.SwitchButton=SwitchButton;var Scrollbar=function(e){__extends(a,e);function a(){var i=e.call(this)||this;i._previousStart=0,i._previousEnd=1,i._prevStart=0,i._prevEnd=1,i._isBusy=!1,i._skipRangeEvents=!1,i.updateWhileMoving=!0,i.className="Scrollbar",i.minHeight=12,i.minWidth=12,i.animationDuration=0,i.animationEasing=cubicOut,i.margin(10,10,10,10);var o=new InterfaceColorSet,c=i.background;return c.cornerRadius(10,10,10,10),c.fill=o.getFor("fill"),c.fillOpacity=.5,i.showSystemTooltip=!0,i.startGrip=new ResizeButton,i.endGrip=new ResizeButton,i.events.on("transformed",function(){i.updateThumb()},i,!1),i.start=0,i.end=1,i.role="scrollbar",i.thumb.role="slider",i.thumb.readerLive="polite",i.startGrip.role="slider",i.endGrip.role="slider",i.events.once("inited",function(){i._previousStart=void 0,i.dispatchRangeChange()},void 0,!1),i.hideGrips=!1,i.orientation="horizontal",i.setSVGAttribute({"aria-valuemin":"0"}),i.setSVGAttribute({"aria-valuemax":"100"}),i.applyTheme(),i}return a.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),this.orientation==="horizontal"?(hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("Use TAB to select grip buttons or left and right arrows to change selection")),hasValue(this.thumb.readerDescription)||(this.thumb.readerDescription=this.language.translate("Use left and right arrows to move selection")),hasValue(this.startGrip.readerDescription)||(this.startGrip.readerDescription=this.language.translate("Use left and right arrows to move left selection")),hasValue(this.endGrip.readerDescription)||(this.endGrip.readerDescription=this.language.translate("Use left and right arrows to move right selection")),this.readerOrientation="horizontal"):(hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("Use TAB select grip buttons or up and down arrows to change selection")),hasValue(this.thumb.readerDescription)||(this.thumb.readerDescription=this.language.translate("Use up and down arrows to move selection")),hasValue(this.startGrip.readerDescription)||(this.startGrip.readerDescription=this.language.translate("Use up and down arrows to move upper selection")),hasValue(this.endGrip.readerDescription)||(this.endGrip.readerDescription=this.language.translate("Use up and down arrows to move lower selection")),this.readerOrientation="vertical"),this.readerControls=this.baseSprite.uidAttr()},a.prototype.validateLayout=function(){this.updateSize(),e.prototype.validateLayout.call(this),this.updateExtremes()},a.prototype.processBackground=function(){e.prototype.processBackground.call(this);var i=this.background;i.clickable=!0,i.events.on("hit",this.handleBgHit,this,void 0)},a.prototype.handleBgHit=function(i){this.makeBusy();var o=i.spritePoint;o=spritePointToSprite(o,this.background,this);var c=this.thumb;if(this.orientation=="horizontal"){var d=o.x-c.pixelWidth/2;d=fitToRange(d,0,this.innerWidth-c.pixelWidth),this._thumbAnimation=c.animate({property:"x",to:d},this.animationDuration,this.animationEasing)}else{var g=o.y-c.pixelHeight/2;g=fitToRange(g,0,this.innerHeight-c.pixelHeight),this._thumbAnimation=c.animate({property:"y",to:g},this.animationDuration,this.animationEasing)}this.animationDuration>0?this._thumbAnimation.events.on("animationended",this.makeUnbusy,this,!1):(this._thumb.validate(),this.makeUnbusy())},a.prototype.makeBusy=function(){this._isBusy=!0,this._skipRangeEvents=!1,this._unbusyTimeout&&this.removeDispose(this._unbusyTimeout),this._unbusyTimeout=void 0,this.stopAnimations()},a.prototype.stopAnimations=function(){this._thumbAnimation&&this._thumbAnimation.stop(!0),this._zoomAnimation&&this._zoomAnimation.stop(!0)},a.prototype.makeUnbusy=function(){this._unbusyTimeout=this.setTimeout(this.makeUnbusyReal.bind(this),this.animationDuration*1.1)},a.prototype.makeUnbusyReal=function(){this._usingGrip=void 0,this._isBusy=!1,this.updateWhileMoving||this.dispatchRangeChange()},a.prototype.dispatchRangeChange=function(){(this._previousEnd!=this.end||this._previousStart!=this.start)&&(this._previousStart=this.start,this._previousEnd=this.end,this.dispatch("rangechanged"))},a.prototype.updateThumb=function(i){if(i===void 0&&(i=!0),!!this.parent){var o=this.thumb,c=this.start,d=this.end,g=this.startGrip,b=this.endGrip,j=this.adapter.apply("positionValueDirection",{flipped:!1}).flipped,$=j?"To %1":"From %1",rt=j?"From %1":"To %1",_e,st;if(this.orientation=="horizontal"){var ut=this.innerWidth;o.width=ut*(d-c),o.maxX=ut-o.pixelWidth,o.x=c*ut,g.moveTo({x:o.pixelX,y:0},void 0,void 0,!0),b.moveTo({x:o.pixelX+o.pixelWidth,y:0},void 0,void 0,!0),_e=this.adapter.apply("positionValue",{value:Math.round(c*100)+"%",position:c}).value,st=this.adapter.apply("positionValue",{value:Math.round(d*100)+"%",position:d}).value,g.readerTitle=this.language.translate($,void 0,_e),g.readerValueNow=""+Math.round(c*100),g.readerValueText=g.readerTitle,b.readerTitle=this.language.translate(rt,void 0,st),b.readerValueNow=""+Math.round(d*100),b.readerValueText=b.readerTitle}else{var gt=this.innerHeight;o.height=gt*(d-c),o.maxY=gt-o.pixelHeight,o.y=(1-d)*gt,g.moveTo({x:0,y:o.pixelY+o.pixelHeight},void 0,void 0,!0),b.moveTo({x:0,y:o.pixelY},void 0,void 0,!0),_e=this.adapter.apply("positionValue",{value:Math.round((1-c)*100)+"%",position:1-c}).value,st=this.adapter.apply("positionValue",{value:Math.round((1-d)*100)+"%",position:1-d}).value,g.readerTitle=this.language.translate(rt,void 0,_e),g.readerValueNow=""+Math.round(c*100),g.readerValueText=g.readerTitle,b.readerTitle=this.language.translate($,void 0,st),b.readerValueNow=""+Math.round(d*100),b.readerValueText=b.readerTitle}o.readerTitle=this.language.translate("From %1 to %2",void 0,_e,st),o.readerValueNow=""+Math.round(c*100),o.readerValueText=o.readerTitle,this.readerValueNow=""+Math.round(c*100),this.readerValueText=o.readerTitle,!this._skipRangeEvents&&this.updateWhileMoving&&i&&this.dispatchRangeChange()}},a.prototype.updateExtremes=function(){var i=this.orientation,o=0,c=0,d=0,g=0;i=="horizontal"?(d=this.innerWidth,c=g=this.innerHeight/2):(g=this.innerHeight,o=d=this.innerWidth/2);var b=this.startGrip;b.minX=o,b.maxX=d,b.minY=c,b.maxY=g;var j=this.endGrip;j.minX=o,j.maxX=d,j.minY=c,j.maxY=g;var $=this.thumb;$.minX=o,$.maxX=d,$.minY=c,$.maxY=g},a.prototype.updateSize=function(){var i=this.orientation,o=this.startGrip;o&&(o.orientation=i),this.endGrip&&(this.endGrip.orientation=i);var c=this.thumb;c&&(i=="horizontal"?(isNumber$1(this._pixelWidth)||this.width instanceof Percent||(this.width=percent(100)),hasValue(this.percentHeight)&&(this.height=this.minHeight),c.height=this.innerHeight,c.verticalCenter="middle",c.horizontalCenter="left"):(isNumber$1(this._pixelHeight)||this.height instanceof Percent||(this.height=percent(100)),hasValue(this.percentWidth)&&(this.width=this.minWidth),c.width=this.innerWidth,c.verticalCenter="top",c.horizontalCenter="middle"))},Object.defineProperty(a.prototype,"isBusy",{get:function(){return this._isBusy},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"start",{get:function(){return Math.min(this.getPosition(this._start),this.getPosition(this._end))},set:function(i){this._isBusy||(this.__start=i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"__start",{get:function(){return this._start},set:function(i){this._start=this.getPosition(i),this.updateThumb()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"end",{get:function(){return Math.max(this.getPosition(this._start),this.getPosition(this._end))},set:function(i){this._isBusy||(this.__end=i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"__end",{get:function(){return this._end},set:function(i){this._end=this.getPosition(i),this.updateThumb()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"range",{get:function(){return{start:this.start,end:this.end,priority:this._usingGrip}},enumerable:!0,configurable:!0}),a.prototype.skipRangeEvents=function(){this._isBusy||(this._skipRangeEvents=!0)},a.prototype.fixRange=function(i){(i.start!=round$1(this._start,2)||i.end!=round$1(this._end,2))&&(this._start=i.start,this._end=i.end,this._skipRangeEvents=!0,this.updateThumb(),this._skipRangeEvents=!1,this.thumb.validate(),this.thumb.background.validate())},a.prototype.getPosition=function(i){return fitToRange(round$1(i,4),0,1)},Object.defineProperty(a.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(i){this.setPropertyValue("orientation",i)&&(i==="horizontal"?(this.startGrip.cursorOverStyle=MouseCursorStyle.horizontalResize,this.endGrip.cursorOverStyle=MouseCursorStyle.horizontalResize):(this.startGrip.cursorOverStyle=MouseCursorStyle.verticalResize,this.endGrip.cursorOverStyle=MouseCursorStyle.verticalResize),this.updateByOrientation(),this.invalidate())},enumerable:!0,configurable:!0}),a.prototype.updateByOrientation=function(){},Object.defineProperty(a.prototype,"startGrip",{get:function(){return this._startGrip},set:function(i){this._startGrip&&this.removeDispose(this._startGrip),this._startGrip=i,this.processGrip(i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"endGrip",{get:function(){return this._endGrip},set:function(i){this._endGrip&&this.removeDispose(this._endGrip),this._endGrip=i,this.processGrip(i)},enumerable:!0,configurable:!0}),a.prototype.processGrip=function(i){i.parent=this,i.isMeasured=!1,i.focusable=!0,i.shouldClone=!1,i.zIndex=100,i.events.on("drag",this.handleGripDrag,this,!1),i.events.on("dragstop",this.makeUnbusy,this,!1),i.events.on("down",this.makeBusy,this,!1),i.events.on("up",this.makeUnbusy,this,!1),this._disposers.push(i)},a.prototype.handleGripDrag=function(i){this.makeBusy(),i.target===this._startGrip?this._usingGrip="start":this._usingGrip="end",this.orientation=="horizontal"?(this._start=this.startGrip.pixelX/this.innerWidth,this._end=this.endGrip.pixelX/this.innerWidth):(this._start=1-this.startGrip.pixelY/this.innerHeight,this._end=1-this.endGrip.pixelY/this.innerHeight),this.updateThumb()},Object.defineProperty(a.prototype,"thumb",{get:function(){if(!this._thumb){var i=new Button;i.background.cornerRadius(10,10,10,10),i.padding(0,0,0,0),this.thumb=i}return this._thumb},set:function(i){var o=this;i&&(this._thumb&&this.removeDispose(this._thumb),this._thumb=i,i.parent=this,i.isMeasured=!1,i.inert=!0,i.draggable=!0,i.clickable=!0,i.hoverable=!0,i.focusable=!0,i.shouldClone=!1,i.zIndex=0,i.cursorOverStyle=MouseCursorStyle.grab,i.cursorDownStyle=MouseCursorStyle.grabbing,i.events.on("dragstart",this.makeBusy,this,!1),i.events.on("dragstop",this.makeUnbusy,this,!1),i.events.on("positionchanged",this.handleThumbPosition,this,!1),i.events.on("sizechanged",this.handleThumbPosition,this,!1),i.events.on("doublehit",this.handleDoubleClick,this,!1),this._disposers.push(getInteraction().body.events.on("keyup",function(c){keyboard.isKey(c.event,["space","enter"])&&o.thumb.isFocused&&(c.event.preventDefault(),o.handleDoubleClick())})),this._disposers.push(this._thumb))},enumerable:!0,configurable:!0}),a.prototype.handleDoubleClick=function(){this.makeBusy();var i=0,o=1;this.start!=0||this.end!=1?(this._prevStart=this.start,this._prevEnd=this.end):(i=this._prevStart,o=this._prevEnd);var c=this.animate([{property:"__start",to:i},{property:"__end",to:o}],this.animationDuration,this.animationEasing);c&&!c.isFinished()?(c.events.on("animationended",this.makeUnbusy,this,!1),this._zoomAnimation=c):this.makeUnbusy()},a.prototype.handleThumbPosition=function(){var i=this.thumb;if(this.orientation=="horizontal"){var o=this.innerWidth,c=i.innerWidth,d=i.pixelX;this._start=d/o,this._end=(d+c)/o,this.updateThumb()}else{var g=this.innerHeight,b=i.innerHeight,j=i.pixelY;j+b>g&&(j=g-b,i.y=j),this._start=1-(j+b)/g,this._end=1-j/g,this.updateThumb()}},a.prototype.createBackground=function(){return new RoundedRectangle},Object.defineProperty(a.prototype,"hideGrips",{get:function(){return this._hideGrips},set:function(i){var o=this;this._hideGrips=i,this._overDisposer&&this.removeDispose(this._overDisposer),this._outDisposer&&this.removeDispose(this._outDisposer),i?(this._overDisposer=this.events.on("over",function(){o.startGrip.show(),o.endGrip.show()},void 0,!1),this._outDisposer=this.events.on("out",function(){o.startGrip.hide(),o.endGrip.hide()},void 0,!1),this.startGrip.hide(),this.endGrip.hide()):(this.startGrip.show(),this.endGrip.show())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"animationDuration",{get:function(){return this.getPropertyValue("animationDuration")},set:function(i){this.setPropertyValue("animationDuration",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"animationEasing",{get:function(){return this.getPropertyValue("animationEasing")},set:function(i){this.setPropertyValue("animationEasing",i)},enumerable:!0,configurable:!0}),a.prototype.asFunction=function(i){return i=="animationEasing"||e.prototype.asIs.call(this,i)},a}(Container);registry.registeredClasses.Scrollbar=Scrollbar;var Slider=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="Slider",i.thumb.opacity=0,i.thumb.interactionsEnabled=!1,i.endGrip.opacity=0,i.endGrip.interactionsEnabled=!1,i.startGrip.events.on("drag",function(){i.endGrip.x=i.startGrip.x,i.endGrip.y=i.startGrip.y}),i.applyTheme(),i}return Object.defineProperty(a.prototype,"__end",{get:function(){return this._start},set:function(i){},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"end",{get:function(){return this._start},set:function(i){},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"start",{get:function(){return this._start},set:function(i){this._isBusy||(this.__start=i)},enumerable:!0,configurable:!0}),a}(Scrollbar);registry.registeredClasses.Slider=Slider;var TextLink=function(e){__extends(a,e);function a(){var i=e.call(this)||this;i.className="TextLink",i.selectable=!0;var o=new InterfaceColorSet;i.fill=o.getFor("primaryButton").brighten(.3);var c=i.states.create("hover");c.properties.fill=o.getFor("primaryButtonHover").brighten(.3);var d=i.states.create("down");return d.properties.fill=o.getFor("primaryButtonDown").brighten(.3),i.cursorOverStyle=MouseCursorStyle.pointer,i.applyTheme(),i}return a}(Label);registry.registeredClasses.TextLink=TextLink;var Filter=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.properties={},i.isTemplate=!1,i._scale=1,i._nonScaling=!0,i.className="Filter",i.filterPrimitives=new List,i.properties.filterUnits="objectBoundingBox",i.filterPrimitives.events.on("inserted",function(o){i._disposers.push(o.newValue)}),i.width=120,i.height=120,i.applyTheme(),i}return a.prototype.appendPrimitives=function(i){each(this.filterPrimitives.iterator(),function(o){i.add(o)})},a.prototype.animate=function(i,o,c){var d=new Animation(this,i,o,c).start();return d},Object.defineProperty(a.prototype,"width",{get:function(){return this.properties.width},set:function(i){this.properties.width=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"height",{get:function(){return this.properties.height},set:function(i){this.properties.height=i},enumerable:!0,configurable:!0}),a.prototype.copyFrom=function(i){var o=this;e.prototype.copyFrom.call(this,i),each$1(i.properties,function(c,d){o[c]=d})},Object.defineProperty(a.prototype,"paper",{get:function(){return this._paper?this._paper:getGhostPaper()},set:function(i){this._paper!=i&&(this._paper=i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"animations",{get:function(){return this._animations||(this._animations=[],this._disposers.push(new AnimationDisposer(this._animations))),this._animations},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"scale",{get:function(){return this._scale},set:function(i){this._scale=i,this.updateScale()},enumerable:!0,configurable:!0}),a.prototype.updateScale=function(){},Object.defineProperty(a.prototype,"filterUnits",{get:function(){return this.properties.filterUnits},set:function(i){this.properties.filterUnits=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"nonScaling",{get:function(){return this._nonScaling},set:function(i){this._nonScaling=i,i||(this._scale=1),this.updateScale()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"sprite",{set:function(i){this.setSprite(i)},enumerable:!0,configurable:!0}),a.prototype.setSprite=function(i){this._sprite&&this._sprite!=i&&this._sprite.filters.removeValue(this),this._sprite=i},a}(BaseObject),DropShadowFilter=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="DropShadowFilter",i.color=color("#000"),i.feGaussianBlur=i.paper.add("feGaussianBlur"),i.feGaussianBlur.attr({result:"blurOut",in:"SourceGraphic"}),i.filterPrimitives.push(i.feGaussianBlur),i.feOffset=i.paper.add("feOffset"),i.feOffset.attr({result:"offsetBlur"}),i.filterPrimitives.push(i.feOffset),i.feFlood=i.paper.add("feFlood"),i.feFlood.attr({"flood-color":i.color}),i.filterPrimitives.push(i.feFlood),i.feComposite=i.paper.add("feComposite"),i.feComposite.attr({in2:"offsetBlur",operator:"in"}),i.filterPrimitives.push(i.feComposite),i.feMerge=i.paper.addGroup("feMerge"),i.feMerge.add(i.paper.add("feMergeNode")),i.feMerge.add(i.paper.add("feMergeNode").attr({in:"SourceGraphic"})),i.filterPrimitives.push(i.feMerge),i.width=200,i.height=200,i.blur=1.5,i.dx=3,i.dy=3,i.opacity=.5,i.applyTheme(),i}return Object.defineProperty(a.prototype,"color",{get:function(){return this.properties.color},set:function(i){this.properties.color=i,this.feFlood&&this.feFlood.attr({"flood-color":i})},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"opacity",{get:function(){return this.properties.opacity},set:function(i){this.properties.opacity=i,this.feFlood.attr({"flood-opacity":i})},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"dx",{get:function(){return this.properties.dx},set:function(i){this.properties.dx=i,this.feOffset.attr({dx:i/this.scale})},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"dy",{get:function(){return this.properties.dy},set:function(i){this.properties.dy=i,this.feOffset.attr({dy:i/this.scale})},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"blur",{get:function(){return this.properties.blur},set:function(i){this.properties.blur=i,this.feGaussianBlur.attr({stdDeviation:i/this.scale})},enumerable:!0,configurable:!0}),a.prototype.updateScale=function(){this.dx=this.dx,this.dy=this.dy,this.blur=this.blur},a}(Filter);registry.registeredClasses.DropShadowFilter=DropShadowFilter;var Tooltip=function(e){__extends(a,e);function a(){var i=e.call(this)||this;i._boundingRect={x:-4e4,y:-4e4,width:8e4,height:8e4},i._pointTo={x:0,y:0},i.fitPointerToBounds=!1,i._verticalOrientation="up",i.fixDoc=!0,i.className="Tooltip",i.isMeasured=!1,i.getFillFromObject=!0,i.margin(5,5,5,5),i.defaultState.transitionDuration=1,i.hiddenState.transitionDuration=1;var o=i.background;o.interactionsEnabled=!1,o.fillOpacity=.9,o.strokeWidth=1,o.strokeOpacity=1,o.stroke=color("#ffffff"),o.cornerRadius=3,o.pointerLength=6,o.pointerBaseWidth=10;var c=new DropShadowFilter;c.dy=1,c.dx=1,c.opacity=.5,o.filters.push(c),i.autoTextColor=!0;var d=i.createChild(Label);return d.shouldClone=!1,i.label=d,d.padding(7,12,4,12),d.interactionsEnabled=!1,d.horizontalCenter="middle",d.fill=color("#ffffff"),i._disposers.push(d),i.label.events.on("sizechanged",i.drawBackground,i),i.label.zIndex=1,i.pointerOrientation="vertical",i.animationDuration=0,i.animationEasing=cubicOut,i.setPropertyValue("showInViewport",!1),i.role="tooltip",i.visible=!1,i.opacity=0,i.x=0,i.y=0,i.events.on("visibilitychanged",i.handleVisibility,i),i.applyTheme(),i}return a.prototype.handleVisibility=function(){this.visible&&this.label.invalidate()},Object.defineProperty(a.prototype,"getStrokeFromObject",{get:function(){return this.getPropertyValue("getStrokeFromObject")},set:function(i){this.setPropertyValue("getStrokeFromObject",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"autoTextColor",{get:function(){return this.getPropertyValue("autoTextColor")},set:function(i){this.setPropertyValue("autoTextColor",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"keepTargetHover",{get:function(){return this.getPropertyValue("keepTargetHover")},set:function(i){var o=this;this.setPropertyValue("keepTargetHover",i,!0)&&i&&(this.hoverable=!0,this.background.interactionsEnabled=!0,this._disposers.push(this.events.on("over",function(c){o.targetSprite&&o.targetSprite.hoverable&&(o.targetSprite.isHover=!0)})),this._disposers.push(this.events.on("out",function(c){o.targetSprite&&o.targetSprite.hoverable&&(o.targetSprite.isHover=!1)})))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"showInViewport",{get:function(){return this.getPropertyValue("showInViewport")},set:function(i){this.setPropertyValue("showInViewport",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"getFillFromObject",{get:function(){return this.getPropertyValue("getFillFromObject")},set:function(i){this.setPropertyValue("getFillFromObject",i,!0)},enumerable:!0,configurable:!0}),a.prototype.createBackground=function(){return new PointedRectangle},Object.defineProperty(a.prototype,"pointerOrientation",{get:function(){return this.getPropertyValue("pointerOrientation")},set:function(i){this.setPropertyValue("pointerOrientation",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"animationDuration",{get:function(){return this.getPropertyValue("animationDuration")},set:function(i){this.setPropertyValue("animationDuration",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"animationEasing",{get:function(){return this.getPropertyValue("animationEasing")},set:function(i){this.setPropertyValue("animationEasing",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"html",{get:function(){return this.label.html},set:function(i){this.label.html!=i&&(this.label.html=i,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"text",{get:function(){return this.label.text},set:function(i){this.label.text!=i&&(this.label.text=i,this.invalidate())},enumerable:!0,configurable:!0}),a.prototype.draw=function(){e.prototype.draw.call(this);var i=this.label;i.invalid&&i.validate();var o=this._pointTo.x,c=this._pointTo.y,d=this._boundingRect,g=i.measuredWidth,b=i.measuredHeight,j=this.background.pointerLength,$,rt;if(this.ignoreBounds&&(d=void 0),d&&this.fixDoc&&g>d.width){spritePointToDocument({x:d.x,y:d.y},this.parent);var _e=spritePointToDocument({x:d.x+d.width,y:d.y+d.height},this.parent),st=document.body.offsetWidth;document.body.offsetHeight,_e.x>st/2?d.x=d.width-g:d.width=d.x+g}var ut=this.pointerOrientation;ut=="horizontal"||ut=="left"||ut=="right"?(rt=-b/2,ut=="horizontal"?d&&o>d.x+d.width/2?$=-g/2-j:$=g/2+j:ut=="left"?$=g/2+j:$=-g/2-j):(d&&($=fitToRange(0,d.x-o+g/2,d.x-o+d.width-g/2)),ut=="vertical"?d&&c>d.y+b+j?(rt=-b-j,this._verticalOrientation="up"):(rt=j,this._verticalOrientation="down"):ut=="down"?(rt=-b-j,this._verticalOrientation="up"):(rt=j,this._verticalOrientation="down")),d&&(rt=fitToRange(rt,d.y-c,d.y+d.height-b-c)),i.x=$,i.y=rt,this.drawBackground()},a.prototype.updateBackground=function(){this.group.addToBack(this.background.group)},a.prototype.drawBackground=function(){var i=this.label,o=this.background,c=i.measuredWidth,d=i.measuredHeight,g=this._boundingRect,b=c,j=i.pixelX-c/2,$=d,rt=i.pixelY,_e=this._pointTo.x,st=this._pointTo.y,ut=g.x-_e,gt=ut+g.width,yt=g.y-st,Pt=yt+g.height;o.x=j,o.y=rt,o.width=b,o.height=$,this.fitPointerToBounds?(o.pointerX=fitToRange(-o.x,ut-o.x,gt-o.x),o.pointerY=fitToRange(-o.y,yt-o.y,Pt-o.y)):(o.pointerX=-o.x,o.pointerY=-o.y),o.validate()},a.prototype.delayedPointTo=function(i,o){var c=this;this._pointToDisposer&&this._pointToDisposer.dispose(),this._pointToDisposer=registry.events.once("exitframe",function(){c.pointTo(i,o)}),this.addDisposer(this._pointToDisposer)},a.prototype.pointTo=function(i,o){(this._pointTo.x!=i.x||this._pointTo.y!=i.y)&&(this._pointTo=i,this.invalidate(),!this.visible||o?(this.moveTo(this._pointTo),this._animation&&this._animation.kill()):this.pixelX==0&&this.pixelY==0?this.moveTo(this._pointTo):(this._animation&&this._animation.kill(),this._animation=new Animation(this,[{property:"x",to:i.x,from:this.pixelX},{property:"y",to:i.y,from:this.pixelY}],this.animationDuration,this.animationEasing).start()))},a.prototype.setBounds=function(i){var o=this._boundingRect;(o.x!=i.x||o.y!=i.y||o.width!=i.width||o.height!=i.height)&&(this._boundingRect=i,this.invalidate())},Object.defineProperty(a.prototype,"boundingContainer",{set:function(i){this._boundingContainer=i,i.events.on("sizechanged",this.updateBounds,this),i.events.on("positionchanged",this.updateBounds,this)},enumerable:!0,configurable:!0}),a.prototype.updateBounds=function(){var i=this._boundingContainer,o=spriteRectToSvg({x:i.pixelX,y:i.pixelY,width:i.maxWidth,height:i.maxHeight},i);this.setBounds(o)},Object.defineProperty(a.prototype,"ignoreBounds",{get:function(){return this.getPropertyValue("ignoreBounds")},set:function(i){this.setPropertyValue("ignoreBounds",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"verticalOrientation",{get:function(){return this._verticalOrientation},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"tooltip",{get:function(){},enumerable:!0,configurable:!0}),a.prototype.copyFrom=function(i){e.prototype.copyFrom.call(this,i),this.label.copyFrom(i.label),i._boundingRect&&(this._boundingRect=i._boundingRect)},a.prototype.asFunction=function(i){return i=="animationEasing"||e.prototype.asIs.call(this,i)},a}(Container);registry.registeredClasses.Tooltip=Tooltip;var Trapezoid=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="Trapezoid",i.element=i.paper.add("path"),i.topSide=percent(100),i.bottomSide=percent(100),i.leftSide=percent(100),i.rightSide=percent(100),i.isMeasured=!1,i.applyTheme(),i}return a.prototype.draw=function(){e.prototype.draw.call(this);var i=this.pixelWidth,o=this.pixelHeight,c=relativeToValue(this.topSide,i),d=relativeToValue(this.bottomSide,i),g=relativeToValue(this.leftSide,o),b=relativeToValue(this.rightSide,o),j=(i-c)/2,$=(o-g)/2,rt=i-(i-c)/2,_e=(o-b)/2,st=i-(i-d)/2,ut=o-(o-b)/2,gt=(i-d)/2,yt=o-(o-g)/2,Pt="",wt="",Ct="",At="";if(hasValue(this.horizontalNeck)){var Tt=this.horizontalNeck.value;Pt=lineTo({x:i*Tt,y:Math.max($,_e)}),Ct=lineTo({x:i*Tt,y:Math.min(ut,yt)})}if(hasValue(this.verticalNeck)){var kt=this.verticalNeck.value;wt=lineTo({x:Math.min(rt,st),y:o*kt}),At=lineTo({x:Math.max(j,gt),y:o*kt})}var It=moveTo({x:j,y:$})+Pt+lineTo({x:rt,y:_e})+wt+lineTo({x:st,y:ut})+Ct+lineTo({x:gt,y:yt})+At;this.path=It},Object.defineProperty(a.prototype,"topSide",{get:function(){return this.getPropertyValue("topSide")},set:function(i){this.setPercentProperty("topSide",i,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"bottomSide",{get:function(){return this.getPropertyValue("bottomSide")},set:function(i){this.setPercentProperty("bottomSide",i,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"leftSide",{get:function(){return this.getPropertyValue("leftSide")},set:function(i){this.setPercentProperty("leftSide",i,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"rightSide",{get:function(){return this.getPropertyValue("rightSide")},set:function(i){this.setPercentProperty("rightSide",i,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"horizontalNeck",{get:function(){return this.getPropertyValue("horizontalNeck")},set:function(i){this.setPropertyValue("horizontalNeck",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"verticalNeck",{get:function(){return this.getPropertyValue("verticalNeck")},set:function(i){this.setPropertyValue("verticalNeck",i,!0)},enumerable:!0,configurable:!0}),a}(Sprite);registry.registeredClasses.Trapezoid=Trapezoid;var Triangle=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="Triangle",i.element=i.paper.add("path"),i.direction="top",i.applyTheme(),i}return a.prototype.draw=function(){e.prototype.draw.call(this);var i=this.pixelWidth,o=this.pixelHeight,c;switch(this.direction){case"right":c=moveTo({x:0,y:0})+lineTo({x:i,y:o/2})+lineTo({x:0,y:o})+closePath();break;case"left":c=moveTo({x:i,y:0})+lineTo({x:0,y:o/2})+lineTo({x:i,y:o})+closePath();break;case"bottom":c=moveTo({x:0,y:0})+lineTo({x:i,y:0})+lineTo({x:i/2,y:o})+closePath();break;case"top":c=moveTo({x:i/2,y:0})+lineTo({x:i,y:o})+lineTo({x:0,y:o})+closePath();break}this.path=c},Object.defineProperty(a.prototype,"direction",{get:function(){return this.getPropertyValue("direction")},set:function(i){this.setPropertyValue("direction",i,!0)},enumerable:!0,configurable:!0}),a}(Sprite);registry.registeredClasses.Triangle=Triangle;var Tension=function(){function e(a,i){this._tensionX=a,this._tensionY=i}return e.prototype.smooth=function(a){for(var i=a.length-1;i>0;i--){var o=a[i],c=a[i-1];Math.abs(o.x-c.x)<.1&&Math.abs(o.y-c.y)<.1&&a.splice(i-1,1)}var d=this._tensionX,g=this._tensionY;if(a.length<3||d>=1&&g>=1)return polyline(a);var b=a[0],j=a[a.length-1],$=!1;round$1(b.x,3)==round$1(j.x)&&round$1(b.y)==round$1(j.y)&&($=!0);for(var rt="",i=0,_e=a.length-1;i<_e;i++){var o=a[i-1],c=a[i],st=a[i+1],ut=a[i+2];i===0?$?o=a[a.length-2]:o=a[i]:i==a.length-2&&($?ut=a[1]:ut=a[i+1]);var gt=getCubicControlPointA(o,c,st,ut,d,g),yt=getCubicControlPointB(o,c,st,ut,d,g);rt+=cubicCurveTo(st,gt,yt)}return rt},e}();function wavedLine(e,a,i,o,c,d){var g=e.x,b=e.y,j=a.x,$=a.y,rt=getDistance(e,a);d&&(i=rt/Math.round(rt/i));var _e=registry.getCache(stringify(["wavedLine",e.x,a.x,e.y,a.y,i,o]));if(!_e){if(rt>0){var st=Math.atan2($-b,j-g),ut=Math.cos(st),gt=Math.sin(st),yt=i*ut,Pt=i*gt;if(i<=1||o<=1)_e=lineTo(a);else{var wt=Math.round(2*rt/i),Ct=[],At=1;j<g&&(At*=-1),$<b&&(At*=-1);for(var Tt=0;Tt<=wt;Tt++){At*=-1;var kt=g+Tt*yt/2+At*o/2*gt,It=b+Tt*Pt/2-At*o/2*ut;Ct.push({x:kt,y:It})}_e=new Tension(c,c).smooth(Ct)}}else _e="";registry.setCache(stringify(["wavedLine",e.x,a.x,e.y,a.y,i,o]),_e)}return _e}var Monotone=function(){function e(a,i){this._reversed=a,this._closed=i.closed}return e.prototype._curve=function(a,i,o,c,d,g){var b=(i-a)/3;return this._reversed?cubicCurveTo({x:c,y:i},{x:o+b*d,y:a+b},{x:c-b*g,y:i-b}):cubicCurveTo({x:i,y:c},{x:a+b,y:o+b*d},{x:i-b,y:c-b*g})},e.prototype.smooth=function(a){var i=this,o=NaN,c=NaN,d=NaN,g=NaN,b=NaN,j=0,$="";switch(each$2(a,function(rt){var _e=rt.x,st=rt.y;if(i._reversed){var ut=_e;_e=st,st=ut}var gt=NaN;if(!(_e===c&&st===g)){switch(j){case 0:j=1,i._reversed?$+=lineTo({x:st,y:_e}):$+=lineTo({x:_e,y:st});break;case 1:j=2;break;case 2:j=3,$+=i._curve(o,c,d,g,slope2(o,c,d,g,gt=slope3(o,c,d,g,_e,st)),gt);break;default:$+=i._curve(o,c,d,g,b,gt=slope3(o,c,d,g,_e,st));break}o=c,c=_e,d=g,g=st,b=gt}}),j){case 2:this._reversed?$+=lineTo({x:g,y:c}):$+=lineTo({x:c,y:g});break;case 3:$+=this._curve(o,c,d,g,b,slope2(o,c,d,g,b));break}return this._closed&&($+=closePath()),$},e}();function sign(e){return e<0?-1:1}function slope2(e,a,i,o,c){var d=a-e;return d?(3*(o-i)/d-c)/2:c}function slope3(e,a,i,o,c,d){var g=a-e,b=c-a,j=(o-i)/(g||b<0&&-0),$=(d-o)/(b||g<0&&-0),rt=(j*b+$*g)/(g+b);return(sign(j)+sign($))*Math.min(Math.abs(j),Math.abs($),.5*Math.abs(rt))||0}var MonotoneX=function(e){__extends(a,e);function a(i){return e.call(this,!1,i)||this}return a}(Monotone),MonotoneY=function(e){__extends(a,e);function a(i){return e.call(this,!0,i)||this}return a}(Monotone),Basis=function(){function e(a){this._closed=a.closed}return e.prototype.smooth=function(a){var i=this,o=NaN,c=NaN,d=NaN,g=NaN,b=NaN,j=NaN,$=NaN,rt=NaN,_e=NaN,st=NaN,ut=0,gt="",yt=function(wt,Ct){gt+=cubicCurveTo({x:(o+4*c+wt)/6,y:(j+4*$+Ct)/6},{x:(2*o+c)/3,y:(2*j+$)/3},{x:(o+2*c)/3,y:(j+2*$)/3})},Pt=function(wt){var Ct=wt.x,At=wt.y;switch(ut){case 0:ut=1,i._closed?(d=Ct,rt=At):gt+=lineTo({x:Ct,y:At});break;case 1:ut=2,i._closed&&(g=Ct,_e=At);break;case 2:if(ut=3,i._closed){b=Ct,st=At,gt+=moveTo({x:(o+4*c+Ct)/6,y:(j+4*$+At)/6});break}else gt+=lineTo({x:(5*o+c)/6,y:(5*j+$)/6});default:yt(Ct,At);break}o=c,c=Ct,j=$,$=At};if(each$2(a,Pt),this._closed)switch(ut){case 1:gt+=moveTo({x:d,y:rt}),gt+=closePath();break;case 2:gt+=moveTo({x:(d+2*g)/3,y:(rt+2*_e)/3}),gt+=lineTo({x:(g+2*d)/3,y:(_e+2*rt)/3}),gt+=closePath();break;case 3:Pt({x:d,y:rt}),Pt({x:g,y:_e}),Pt({x:b,y:st});break}else{switch(ut){case 3:yt(c,$);case 2:gt+=lineTo({x:c,y:$});break}gt+=closePath()}return gt},e}(),WavedCircle=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="WavedCircle",i.element=i.paper.add("path"),i.waveLength=16,i.waveHeight=4,i.fill=void 0,i.fillOpacity=0,i.tension=.8,i.applyTheme(),i}return a.prototype.draw=function(){var i="",o=this.pixelRadius;if(o>0){var c=this.getPoints(o);i=moveTo(c[0])+new Tension(this.tension,this.tension).smooth(c)}var d=this.pixelInnerRadius;if(d>0){var c=this.getPoints(d);c.reverse(),i+=moveTo(c[0])+new Tension(this.tension,this.tension).smooth(c)}this.path=i},a.prototype.getPoints=function(i){for(var o=i*Math.PI*2,c=this.waveHeight/2,d=o/Math.round(o/this.waveLength),g=d/2,b=[],j=o/d,$=0;$<=j;$++){var rt=$*d/o*360,_e=($*d+g)/o*360;b.push({x:(i-c)*cos(rt),y:(i-c)*sin(rt)}),b.push({x:(i+c)*cos(_e),y:(i+c)*sin(_e)})}return b.pop(),b},Object.defineProperty(a.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(i){this.setPercentProperty("innerRadius",i,!0,!1,10,!1),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"pixelInnerRadius",{get:function(){return relativeToValue(this.innerRadius,min$1(this.innerWidth/2,this.innerHeight/2))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"waveLength",{get:function(){return this.getPropertyValue("waveLength")},set:function(i){this.setPropertyValue("waveLength",i),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"waveHeight",{get:function(){return this.getPropertyValue("waveHeight")},set:function(i){this.setPropertyValue("waveHeight",i),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"tension",{get:function(){return this.getPropertyValue("tension")},set:function(i){this.setPropertyValue("tension",i),this.invalidate()},enumerable:!0,configurable:!0}),a}(Circle);registry.registeredClasses.WavedCircle=WavedCircle;var WavedLine=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="WavedLine",i.element=i.paper.add("path"),i.waveLength=16,i.waveHeight=4,i.tension=.8,i.pixelPerfect=!1,i.fill=color(),i.applyTheme(),i}return a.prototype.draw=function(){var i={x:this.x1,y:this.y1},o={x:this.x2,y:this.y2};this.path=moveTo(i)+wavedLine(i,o,this.waveLength,this.waveHeight,this.tension,!0)},Object.defineProperty(a.prototype,"waveLength",{get:function(){return this.getPropertyValue("waveLength")},set:function(i){this.setPropertyValue("waveLength",i),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"waveHeight",{get:function(){return this.getPropertyValue("waveHeight")},set:function(i){this.setPropertyValue("waveHeight",i),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"tension",{get:function(){return this.getPropertyValue("tension")},set:function(i){this.setPropertyValue("tension",i),this.invalidate()},enumerable:!0,configurable:!0}),a}(Line),WavedRectangle=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="WavedRectangle",i.element=i.paper.add("path"),i.waveLength=16,i.waveHeight=4,i.tension=.8,i.setPropertyValue("wavedLeft",!0),i.setPropertyValue("wavedRight",!0),i.setPropertyValue("wavedTop",!0),i.setPropertyValue("wavedBottom",!0),i.applyTheme(),i}return a.prototype.draw=function(){e.prototype.draw.call(this);var i=this.pixelWidth,o=this.pixelHeight;if(i>0&&o>0){var c={x:0,y:0},d={x:i,y:0},g={x:i,y:o},b={x:0,y:o},j=Math.min(i,this.waveLength),$=Math.min(o,this.waveHeight),rt=Math.min(o,this.waveLength),_e=Math.min(i,this.waveHeight),st="",ut="",gt="",yt="";this.wavedTop&&(st=wavedLine(c,d,j,$,this.tension,!0)),this.wavedRight&&(ut=wavedLine(d,g,rt,_e,this.tension,!0)),this.wavedBottom&&(gt=wavedLine(g,b,j,$,this.tension,!0)),this.wavedLeft&&(yt=wavedLine(b,c,rt,_e,this.tension,!0)),this.path=moveTo(c)+st+lineTo(d)+ut+lineTo(g)+gt+lineTo(b)+yt+"z"}},Object.defineProperty(a.prototype,"waveLength",{get:function(){return this.getPropertyValue("waveLength")},set:function(i){this.setPropertyValue("waveLength",i),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"waveHeight",{get:function(){return this.getPropertyValue("waveHeight")},set:function(i){this.setPropertyValue("waveHeight",i),this.invalidate()},enumerable:!0,configurable:!0}),a.prototype.setWavedSides=function(i,o,c,d){this.wavedTop=i,this.wavedRight=o,this.wavedBottom=c,this.wavedLeft=d},Object.defineProperty(a.prototype,"tension",{get:function(){return this.getPropertyValue("tension")},set:function(i){this.setPropertyValue("tension",i),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"wavedRight",{get:function(){return this.getPropertyValue("wavedRight")},set:function(i){this.setPropertyValue("wavedRight",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"wavedLeft",{get:function(){return this.getPropertyValue("wavedLeft")},set:function(i){this.setPropertyValue("wavedLeft",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"wavedTop",{get:function(){return this.getPropertyValue("wavedTop")},set:function(i){this.setPropertyValue("wavedTop",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"wavedBottom",{get:function(){return this.getPropertyValue("wavedBottom")},set:function(i){this.setPropertyValue("wavedBottom",i,!0)},enumerable:!0,configurable:!0}),a}(Rectangle),ZoomOutButton=function(e){__extends(a,e);function a(){var i=e.call(this)||this;i.className="ZoomOutButton",i.padding(9,9,9,9),i.showSystemTooltip=!0;var o=new InterfaceColorSet,c=i.background;c.cornerRadius(20,20,20,20),c.fill=o.getFor("primaryButton"),c.stroke=o.getFor("primaryButtonStroke"),c.strokeOpacity=0,c.states.getKey("hover").properties.fill=o.getFor("primaryButtonHover"),c.states.getKey("down").properties.fill=o.getFor("primaryButtonActive");var d=new Sprite;d.element=i.paper.add("path");var g=moveTo({x:0,y:0});return g+=lineTo({x:11,y:0}),d.path=g,d.pixelPerfect=!0,d.padding(8,3,8,3),d.stroke=o.getFor("primaryButtonText"),i.icon=d,i.applyTheme(),i}return a.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("Zoom Out"))},a}(Button);registry.registeredClasses.ZoomOutButton=ZoomOutButton;var PlayButton=function(e){__extends(a,e);function a(){var i=e.call(this)||this;i.className="PlayButton",i.padding(12,12,12,12),i.showSystemTooltip=!0;var o=new InterfaceColorSet,c=i.background;c.cornerRadius(25,25,25,25),c.fill=o.getFor("primaryButton"),c.stroke=o.getFor("primaryButtonStroke"),c.strokeOpacity=0,c.states.getKey("hover").properties.fill=o.getFor("primaryButtonHover"),c.states.getKey("down").properties.fill=o.getFor("primaryButtonActive");var d=new Triangle;d.direction="right",d.width=9,d.height=11,d.marginLeft=1,d.marginRight=1,d.horizontalCenter="middle",d.verticalCenter="middle",d.stroke=o.getFor("primaryButtonText"),d.fill=d.stroke,i.icon=d;var g=new RoundedRectangle;g.width=11,g.height=11,g.horizontalCenter="middle",g.verticalCenter="middle",g.cornerRadius(0,0,0,0),g.stroke=o.getFor("primaryButtonText"),g.fill=d.stroke,i.togglable=!0;var b=i.states.create("active");return b.transitionDuration=0,b.properties.icon=g,i.defaultState.transitionDuration=0,i.applyTheme(),i}return a.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("Play"))},a}(Button);registry.registeredClasses.PlayButton=PlayButton;var ColorModifier=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="ColorModifier",i.applyTheme(),i}return a.prototype.modify=function(i){return i},a}(BaseObject);registry.registeredClasses.ColorModifier=ColorModifier;var GradientModifier=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.lightnesses=[],i.brightnesses=[],i.opacities=[],i.offsets=[],i.className="GradientModifier",i.applyTheme(),i}return Object.defineProperty(a.prototype,"lightnesses",{get:function(){return this._lightnesses},set:function(i){this._lightnesses=i,this._brightnesses=[]},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"brightnesses",{get:function(){return this._brightnesses},set:function(i){this._brightnesses=i,this._lightnesses=[]},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"opacities",{get:function(){return this._opacities},set:function(i){this._opacities=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"offsets",{get:function(){return this._offsets},set:function(i){this._offsets=i},enumerable:!0,configurable:!0}),a.prototype.modify=function(i){this.gradient.clear();var o=0;this.opacities&&(o=max$1(o,this.opacities.length)),this.lightnesses&&(o=max$1(o,this.lightnesses.length)),this.brightnesses&&(o=max$1(o,this.brightnesses.length));for(var c=1,d,g,b=0;b<o;b++){var j=i;this.opacities&&isNumber$1(this.opacities[b])&&(c=this.opacities[b]),this.lightnesses&&isNumber$1(this.lightnesses[b])&&(d=this.lightnesses[b],g=void 0),this.brightnesses&&isNumber$1(this.brightnesses[b])&&(g=this.brightnesses[b],d=void 0),isNumber$1(g)?j=i.brighten(this.brightnesses[b]):isNumber$1(d)&&(j=i.lighten(this.lightnesses[b]));var $=this.offsets[b];this.gradient.addColor(j,c,$)}return this.gradient},a.prototype.copyFrom=function(i){e.prototype.copyFrom.call(this,i),this._offsets=i.offsets,this._brightnesses=i.brightnesses,this._lightnesses=i.lightnesses,this._opacities=i.opacities},a}(ColorModifier);registry.registeredClasses.GradientModifier=GradientModifier;var LinearGradientModifier=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="LinearGradientModifier",i.gradient=new LinearGradient,i.applyTheme(),i}return a.prototype.copyFrom=function(i){e.prototype.copyFrom.call(this,i),this.gradient=i.gradient.clone()},a}(GradientModifier);registry.registeredClasses.LinearGradientModifier=LinearGradientModifier;var Cone=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="Cone",i.angle=30,i.radius=percent(100),i.topRadius=percent(100),i.top=i.createChild(Ellipse),i.top.shouldClone=!1,i.bottom=i.createChild(Ellipse),i.bottom.shouldClone=!1,i.body=i.createChild(Sprite),i.body.shouldClone=!1,i.body.setElement(i.paper.add("path")),i.layout="none",i.bodyFillModifier=new LinearGradientModifier,i.bodyFillModifier.lightnesses=[0,-.25,0],i.body.fillModifier=i.bodyFillModifier,i.applyTheme(),i}return a.prototype.draw=function(){e.prototype.draw.call(this),copyProperties$1(this,this.top,visualProperties),copyProperties$1(this,this.bottom,visualProperties),copyProperties$1(this,this.body,visualProperties);var i=this.innerWidth,o=this.innerHeight,c=this.bottom,d=this.top,g=this.angle,b,j,$;this.orientation=="horizontal"?(b=o/2,c.y=o/2,c.x=0,d.y=o/2,d.x=i,j=(90-g)/90,$=0,this.bodyFillModifier.gradient.rotation=90):(j=0,$=(90-g)/90,b=i/2,c.y=o,c.x=i/2,d.x=i/2,this.bodyFillModifier.gradient.rotation=0);var rt=this.radius.value*b,_e=this.topRadius.value*b;c.radius=rt-rt*j,c.radiusY=rt-rt*$,d.radius=_e-_e*j,d.radiusY=_e-_e*$;var st;this.orientation=="horizontal"?st=moveTo({x:0,y:o/2-c.radiusY})+arcTo(-90,-180,c.radius,c.radiusY)+lineTo({x:i,y:o/2+d.radiusY})+arcTo(90,180,d.radius,d.radiusY)+closePath():st=moveTo({x:i/2-d.radius,y:0})+arcTo(180,-180,d.radius,d.radiusY)+lineTo({x:i/2+c.radius,y:o})+arcTo(0,180,c.radius,c.radiusY)+closePath(),this.body.path=st},Object.defineProperty(a.prototype,"angle",{get:function(){return this.getPropertyValue("angle")},set:function(i){this.setPropertyValue("angle",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(i){this.setPropertyValue("radius",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"topRadius",{get:function(){return this.getPropertyValue("topRadius")},set:function(i){this.setPropertyValue("topRadius",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(i){this.setPropertyValue("orientation",i,!0)},enumerable:!0,configurable:!0}),a}(Container),LightenFilter=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="LightenFilter",i.feColorMatrix=i.paper.add("feColorMatrix"),i.feColorMatrix.attr({type:"matrix"}),i.filterPrimitives.push(i.feColorMatrix),i.lightness=0,i.applyTheme(),i}return Object.defineProperty(a.prototype,"lightness",{get:function(){return this.properties.lightness},set:function(i){this.properties.lightness=i;var o=i+1;this.feColorMatrix.attr({values:o+" 0 0 0 0 0 "+o+" 0 0 0 0 0 "+o+" 0 0 0 0 0 1 0"})},enumerable:!0,configurable:!0}),a}(Filter);registry.registeredClasses.LightenFilter=LightenFilter;var Rectangle3D=function(e){__extends(a,e);function a(){var i=e.call(this)||this;i.angle=30,i.depth=30,i.className="Rectangle3D",i.layout="none";var o=i.createChild(Sprite);o.shouldClone=!1,o.setElement(i.paper.add("path")),o.isMeasured=!1,i.sideBack=o,i._disposers.push(i.sideBack);var c=i.createChild(Sprite);c.shouldClone=!1,c.setElement(i.paper.add("path")),c.isMeasured=!1,i.sideBottom=c,i._disposers.push(i.sideBottom);var d=i.createChild(Sprite);d.shouldClone=!1,d.setElement(i.paper.add("path")),d.isMeasured=!1,i.sideLeft=d,i._disposers.push(i.sideLeft);var g=i.createChild(Sprite);g.shouldClone=!1,g.setElement(i.paper.add("path")),g.isMeasured=!1,i.sideRight=g,i._disposers.push(i.sideRight);var b=i.createChild(Sprite);b.shouldClone=!1,b.setElement(i.paper.add("path")),b.isMeasured=!1,i.sideTop=b,i._disposers.push(i.sideTop);var j=i.createChild(Sprite);return j.shouldClone=!1,j.setElement(i.paper.add("path")),j.isMeasured=!1,i.sideFront=j,i._disposers.push(i.sideFront),i.applyTheme(),i}return a.prototype.draw=function(){e.prototype.draw.call(this);var i=this.innerWidth,o=this.innerHeight,c=this.depth,d=this.angle,g=sin(d),b=cos(d),j={x:0,y:0},$={x:i,y:0},rt={x:i,y:o},_e={x:0,y:o},st={x:c*b,y:-c*g},ut={x:c*b+i,y:-c*g},gt={x:c*b+i,y:-c*g+o},yt={x:c*b,y:-c*g+o};this.sideFront.path=moveTo(j)+lineTo($)+lineTo(rt)+lineTo(_e)+closePath(),this.sideBack.path=moveTo(st)+lineTo(ut)+lineTo(gt)+lineTo(yt)+closePath(),this.sideLeft.path=moveTo(j)+lineTo(st)+lineTo(yt)+lineTo(_e)+closePath(),this.sideRight.path=moveTo($)+lineTo(ut)+lineTo(gt)+lineTo(rt)+closePath(),this.sideBottom.path=moveTo(_e)+lineTo(yt)+lineTo(gt)+lineTo(rt)+closePath(),this.sideTop.path=moveTo(j)+lineTo(st)+lineTo(ut)+lineTo($)+closePath()},Object.defineProperty(a.prototype,"depth",{get:function(){return this.getPropertyValue("depth")},set:function(i){this.setPropertyValue("depth",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"angle",{get:function(){return this.getPropertyValue("angle")},set:function(i){this.setPropertyValue("angle",i,!0)},enumerable:!0,configurable:!0}),a.prototype.setFill=function(i){e.prototype.setFill.call(this,i),(!isObject$1(i)||"r"in i)&&(i=toColor(i));var o;if(i instanceof Color)o=i.hex;else if(i instanceof LinearGradient||i instanceof RadialGradient)o=i.stops.getIndex(0).color.hex;else{var c=new LightenFilter;c.lightness=-.2,this.sideBack.filters.push(c);var d=c.clone();d.lightness=-.4,this.sideLeft.filters.push(d);var g=c.clone();g.lightness=-.2,this.sideRight.filters.push(g);var b=c.clone();b.lightness=-.1,this.sideTop.filters.push(b);var j=c.clone();j.lightness=-.5,this.sideBottom.filters.push(j)}o&&(this.sideBack.fill=color(o).lighten(-.2),this.sideLeft.fill=color(o).lighten(-.4),this.sideRight.fill=color(o).lighten(-.2),this.sideTop.fill=color(o).lighten(-.1),this.sideBottom.fill=color(o).lighten(-.5))},a.prototype.copyFrom=function(i){e.prototype.copyFrom.call(this,i),this.sideBack.copyFrom(i.sideBack),this.sideLeft.copyFrom(i.sideLeft),this.sideRight.copyFrom(i.sideRight),this.sideTop.copyFrom(i.sideTop),this.sideBottom.copyFrom(i.sideBottom)},a}(Container),Slice3D=function(e){__extends(a,e);function a(){var i=e.call(this)||this;i.className="Slice3D",i.layout="none";var o=i.createChild(Sprite);i.edge=o,o.shouldClone=!1,o.isMeasured=!1,o.toBack(),i.angle=30,i.depth=20;var c=i.createChild(Sprite);i.sideA=c,c.shouldClone=!1,c.isMeasured=!1;var d=i.createChild(Sprite);return i.sideB=d,d.shouldClone=!1,d.isMeasured=!1,i.applyTheme(),i}return a.prototype.setFill=function(i){e.prototype.setFill.call(this,i);var o;if(i instanceof Color)o=i.hex;else if(i instanceof LinearGradient||i instanceof RadialGradient)o=i.stops.getIndex(0).color.hex;else{var c=new LightenFilter;c.lightness=-.25,this.edge.filters.push(c),this.sideA.filters.push(c.clone()),this.sideB.filters.push(c.clone())}if(o){var d=color(o).lighten(-.25);this.edge.fill=d,this.sideA.fill=d,this.sideB.fill=d,this.edge.stroke=d,this.sideA.stroke=d,this.sideB.stroke=d}},a.prototype.draw=function(){if(this.cornerRadius=0,this.innerCornerRadius=0,e.prototype.draw.call(this),this.arc!==0&&this.radius>0&&this.depth>0){this.sideB.show(0),this.sideA.show(0),this.edge.show(0);for(var i=this.startAngle,o=this.arc,c=this.pixelInnerRadius||0,d=this.radiusY||0,g=this.radius,b=i+o,j=d/g*c,$={x:cos(i)*c,y:sin(i)*j},rt={x:cos(i)*g,y:sin(i)*d},_e={x:cos(b)*g,y:sin(b)*d},st={x:cos(b)*c,y:sin(b)*j},ut=this.depth,gt={x:$.x,y:$.y-ut},yt={x:rt.x,y:rt.y-ut},Pt={x:_e.x,y:_e.y-ut},wt={x:st.x,y:st.y-ut},Ct="",At=Math.ceil(o/5),Tt=o/At,kt=i,It=yt,Lt=0;Lt<At;Lt++)if(kt+=Tt,kt>0&&kt<180){Ct+=moveTo(It);var Ft={x:cos(kt)*g,y:sin(kt)*d-ut};Ct+=lineTo({x:It.x,y:It.y+ut}),Ct+=arcToPoint({x:Ft.x,y:Ft.y+ut},g,d,!0),Ct+=lineTo(Ft),Ct+=arcToPoint(It,g,d),Ct+="z",It=Ft}else{Ct+=moveTo(It);var Ft={x:cos(kt)*g,y:sin(kt)*d-ut};Ct+=arcToPoint(Ft,g,d,!0),Ct+=lineTo({x:Ft.x,y:Ft.y+ut}),Ct+=arcToPoint({x:It.x,y:It.y+ut},g,d),Ct+=lineTo(It),Ct+="z",It=Ft}It=gt,kt=i;for(var Lt=0;Lt<At;Lt++)if(kt+=Tt,kt>0&&kt<180){Ct+=moveTo(It);var Ft={x:cos(kt)*c,y:sin(kt)*j-ut};Ct+=lineTo({x:It.x,y:It.y+ut}),Ct+=arcToPoint({x:Ft.x,y:Ft.y+ut},c,j,!0),Ct+=lineTo(Ft),Ct+=arcToPoint(It,c,j),Ct+="z",It=Ft}else{Ct+=moveTo(It);var Ft={x:cos(kt)*c,y:sin(kt)*j-ut};Ct+=arcToPoint(Ft,c,j,!0),Ct+=lineTo({x:Ft.x,y:Ft.y+ut}),Ct+=arcToPoint({x:It.x,y:It.y+ut},c,j),Ct+=lineTo(It),Ct+="z",It=Ft}this.edge.path=Ct,this.sideA.path=moveTo($)+lineTo(rt)+lineTo(yt)+lineTo(gt)+closePath(),this.sideB.path=moveTo(_e)+lineTo(st)+lineTo(wt)+lineTo(Pt)+closePath(),this.startAngle<90?this.sideA.toBack():this.sideA.toFront(),this.startAngle+this.arc>90?this.sideB.toBack():this.sideB.toFront(),this.slice.dy=-ut}else this.sideA.hide(0),this.sideB.hide(0),this.edge.hide(0)},Object.defineProperty(a.prototype,"depth",{get:function(){return this.getPropertyValue("depth")},set:function(i){this.setPropertyValue("depth",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"angle",{get:function(){var i=this.getPropertyValue("angle");return isNumber$1(i)||(i=0),i},set:function(i){this.setPropertyValue("angle",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"radiusY",{get:function(){var i=this.getPropertyValue("radiusY");return isNumber$1(i)||(i=this.radius-this.radius*this.angle/90),i},set:function(i){this.setPropertyValue("radiusY",i,!0)},enumerable:!0,configurable:!0}),a.prototype.copyFrom=function(i){e.prototype.copyFrom.call(this,i),this.edge.copyFrom(i.edge),this.sideA.copyFrom(i.sideA),this.sideB.copyFrom(i.sideB)},a}(Slice),RadialGradientModifier=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="RadialGradientModifier",i.gradient=new RadialGradient,i.applyTheme(),i}return a.prototype.copyFrom=function(i){e.prototype.copyFrom.call(this,i),this.gradient=i.gradient.clone()},a}(GradientModifier);registry.registeredClasses.RadialGradientModifier=RadialGradientModifier;var LinePattern=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.properties.gap=0,i._line=i.paper.add("path"),i.addElement(i._line),i}return a.prototype.draw=function(){if(e.prototype.draw.call(this),Math.round(this.rotation/90)!=this.rotation/90&&(this.properties.shapeRendering="auto"),this._line){var i=this.width,o=this.height,c="";if(!this.gap)Math.round(this.rotation/90)!=this.rotation/90?(c=moveTo({x:-i,y:o/2})+lineTo({x:i*2,y:o/2}),this.properties.rotationX=this.width/2,this.properties.rotationY=this.height/2):c=moveTo({x:0,y:0})+lineTo({x:i,y:0});else for(var d=this.gap+this.strokeWidth,g=this.height/d,b=-g/2;b<g*1.5;b++)Math.round(this.rotation/90)!=this.rotation/90?(c+=moveTo({x:-i,y:(b+.5)*d})+lineTo({x:i*2,y:(b+.5)*d}),this.properties.rotationX=this.width/2,this.properties.rotationY=this.height/2):c+=moveTo({x:-i,y:b*d})+lineTo({x:i*2,y:b*d});this._line.attr({d:c})}},Object.defineProperty(a.prototype,"gap",{get:function(){return this.properties.gap},set:function(i){this.properties.gap=i,this.draw()},enumerable:!0,configurable:!0}),a}(Pattern);registry.registeredClasses.LinePattern=LinePattern;var CirclePattern=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.properties.radius=2,i._circle=i.paper.add("circle"),i.addElement(i._circle),i.shapeRendering="auto",i}return a.prototype.draw=function(){e.prototype.draw.call(this),this._circle&&this._circle.attr({r:this.radius,cx:this.width/2,cy:this.height/2})},Object.defineProperty(a.prototype,"radius",{get:function(){return this.properties.radius},set:function(i){this.properties.radius=i,this.draw()},enumerable:!0,configurable:!0}),a}(Pattern);registry.registeredClasses.CirclePattern=CirclePattern;var RectPattern=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.rectHeight=1,i.rectWidth=1,i._rect=i.paper.add("rect"),i.addElement(i._rect),i}return a.prototype.draw=function(){e.prototype.draw.call(this),this.properties.rotationX=this.width/2,this.properties.rotationY=this.height/2,this._rect&&this._rect.attr({width:this.rectWidth,height:this.rectHeight,x:(this.width-this.rectWidth)/2,y:(this.height-this.rectHeight)/2})},Object.defineProperty(a.prototype,"rectWidth",{get:function(){return this.properties.rectWidth},set:function(i){this.properties.rectWidth=i,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"rectHeight",{get:function(){return this.properties.rectHeight},set:function(i){this.properties.rectHeight=i,this.draw()},enumerable:!0,configurable:!0}),a}(Pattern);registry.registeredClasses.RectPattern=RectPattern;var ColorizeFilter=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="ColorizeFilter",i.feColorMatrix=i.paper.add("feColorMatrix"),i.feColorMatrix.attr({type:"matrix"}),i.filterPrimitives.push(i.feColorMatrix),i.intensity=1,i.applyTheme(),i}return a.prototype.applyFilter=function(){var i=this.intensity,o=1-i,c,d,g,b=this.color;b&&b.rgb?(c=b.rgb.r/255*i,d=b.rgb.g/255*i,g=b.rgb.b/255*i):(c=0,d=0,g=0),this.feColorMatrix.attr({values:o+" 0 0 0 "+c+" 0 "+o+" 0 0 "+d+" 0 0 "+o+" 0 "+g+" 0 0 0 1 0"})},Object.defineProperty(a.prototype,"color",{get:function(){return this.properties.color},set:function(i){this.properties.color=i,this.applyFilter()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"intensity",{get:function(){return this.properties.intensity},set:function(i){this.properties.intensity=i,this.applyFilter()},enumerable:!0,configurable:!0}),a}(Filter);registry.registeredClasses.ColorizeFilter=ColorizeFilter;var DesaturateFilter=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="DesaturateFilter",i.feColorMatrix=i.paper.add("feColorMatrix"),i.feColorMatrix.attr({type:"saturate"}),i.filterPrimitives.push(i.feColorMatrix),i.width=120,i.height=120,i.saturation=0,i.applyTheme(),i}return Object.defineProperty(a.prototype,"saturation",{get:function(){return this.properties.saturation},set:function(i){this.properties.saturation=i,this.feColorMatrix.attr({values:i.toString()})},enumerable:!0,configurable:!0}),a}(Filter);registry.registeredClasses.DesaturateFilter=DesaturateFilter;var BlurFilter=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="BlurFilter",i.feGaussianBlur=i.paper.add("feGaussianBlur"),i.feGaussianBlur.attr({result:"blurOut",in:"SourceGraphic"}),i.filterPrimitives.push(i.feGaussianBlur),i.width=200,i.height=200,i.blur=1.5,i.applyTheme(),i}return Object.defineProperty(a.prototype,"blur",{get:function(){return this.properties.blur},set:function(i){this.properties.blur=i,this.feGaussianBlur.attr({stdDeviation:i/this.scale})},enumerable:!0,configurable:!0}),a}(Filter);registry.registeredClasses.BlurFilter=BlurFilter;var FocusFilter=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="FocusFilter",i.feFlood=i.paper.add("feFlood"),i.feFlood.attr({"flood-color":new InterfaceColorSet().getFor("primaryButtonHover"),result:"base"}),i.filterPrimitives.push(i.feFlood),i.feMorphology=i.paper.add("feMorphology"),i.feMorphology.attr({result:"bigger",in:"SourceGraphic",operator:"dilate",radius:"2"}),i.filterPrimitives.push(i.feMorphology),i.feColorMatrix=i.paper.add("feColorMatrix"),i.feColorMatrix.attr({result:"mask",in:"bigger",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0"}),i.filterPrimitives.push(i.feColorMatrix),i.feComposite=i.paper.add("feComposite"),i.feComposite.attr({result:"drop",in:"base",in2:"mask",operator:"in"}),i.filterPrimitives.push(i.feComposite),i.feBlend=i.paper.add("feBlend"),i.feBlend.attr({in:"SourceGraphic",in2:"drop",mode:"normal"}),i.filterPrimitives.push(i.feBlend),i.width=130,i.height=130,i.applyTheme(),i}return Object.defineProperty(a.prototype,"stroke",{get:function(){return this.properties.stroke},set:function(i){this.properties.stroke=i,this.feFlood.attr({"flood-color":i})},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"strokeWidth",{get:function(){return this.properties.strokeWidth},set:function(i){this.properties.strokeWidth=i,this.feMorphology.attr({radius:i})},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"opacity",{get:function(){return this.properties.opacity},set:function(i){this.properties.opacity=i,this.feColorMatrix.attr({values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 "+i+" 0"})},enumerable:!0,configurable:!0}),a.prototype.setSprite=function(i){this._sprite&&this._sprite!=i&&this._sprite.group.removeStyle("outline"),i.group.addStyle({outline:"none"}),e.prototype.setSprite.call(this,i)},a}(Filter),ColorSet=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i._list=[],i._currentStep=0,i._startIndex=0,i._currentPass=0,i.baseColor=new Color({r:103,g:183,b:220}),i.stepOptions={},i.passOptions={brighten:-.2},i.step=1,i.minColors=20,i.minLightness=.2,i.maxLightness=.9,i.shuffle=!1,i.wrap=!0,i.reuse=!1,i.saturation=1,i.className="ColorSet",i.applyTheme(),i}return Object.defineProperty(a.prototype,"list",{get:function(){return this._list||this.generate(this.minColors),this._list},set:function(i){this._list=i,this.reset()},enumerable:!0,configurable:!0}),a.prototype.getReusableColor=function(i){if(this._list.length==0)return this.generate(1),this.list[0];var o=i-Math.floor(i/this._list.length)*this.list.length;return this.list[o]},a.prototype.next=function(){var i;return this.list.length<=this._currentStep?this.reuse?i=this.getReusableColor(this._currentStep):(this.generate(max$1(this.minColors,this._currentStep+1)),i=this.list[this._currentStep]):i=this.list[this._currentStep],this._currentStep+=this.step,i.saturate(this.saturation)},a.prototype.getIndex=function(i){var o;return this.list.length<=i?this.reuse?o=this.getReusableColor(i):(this.generate(this.minColors),o=this.getIndex(i)):o=this.list[i],o.saturate(this.saturation)},a.prototype.reset=function(){this._currentStep=this._startIndex},Object.defineProperty(a.prototype,"currentStep",{get:function(){return this._currentStep},set:function(i){this._currentStep=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"startIndex",{get:function(){return this._startIndex},set:function(i){this._startIndex=i,this.reset()},enumerable:!0,configurable:!0}),a.prototype.generate=function(i){var o=this.currentColor,c=rgbToHsl(getValue(o.rgb)),d=hasValue(this.stepOptions.hue)?this.stepOptions.hue:1/i,g={brighten:0,lighten:0,hue:c.h,lightness:c.l,saturation:c.s},b=[],j=this.list.length==0?0:1;if(this.reuse)for(var $=j;$<=i;$++)b.push(rgbToHsl(getValue(this._list[$].rgb)).h);else for(var $=j;$<=i;$++){var rt=c.h+d*$;this.wrap&&rt>1&&(rt-=1),b.push(rt)}this.shuffle&&b.sort(function(gt,yt){return Math.random()-.5});for(var $=0;$<i;$++){this.reuse?c=rgbToHsl(getValue(this._list[$].rgb)):c.h=b.shift(),this.applyStepOptions(c,g,$,this._currentPass);var _e=color(hslToRgb(c)),st=(this.stepOptions.brighten||0)*$+(this.passOptions.brighten||0)*this._currentPass;st!=0&&(this.wrap?st=fitNumberRelative(st,this.minLightness,this.maxLightness):st=fitNumber(st,this.minLightness,this.maxLightness),_e=_e.brighten(st));var ut=(this.stepOptions.lighten||0)*$+(this.passOptions.lighten||0)*this._currentPass;ut!=0&&(this.wrap?ut=fitNumberRelative(ut,this.minLightness,this.maxLightness):ut=fitNumber(ut,this.minLightness,this.maxLightness),_e=_e.lighten(ut)),this._list.push(_e)}this._currentPass++},Object.defineProperty(a.prototype,"currentColor",{get:function(){return this._list.length==0?this.baseColor.saturate(this.saturation):this._list[this._list.length-1].saturate(this.saturation)},enumerable:!0,configurable:!0}),a.prototype.applyStepOptions=function(i,o,c,d){i.l=o.lightness+(this.stepOptions.lightness||0)*c+(this.passOptions.lightness||0)*d,this.wrap?(i.l>1?i.l=i.l-Math.floor(i.l):i.l<0&&(i.l=-(i.l-Math.floor(i.l))),i.l=fitNumberRelative(i.l,this.minLightness,this.maxLightness)):(i.l>1?i.l=1:i.l<0&&(i.l=0),i.l=fitNumber(i.l,this.minLightness,this.maxLightness))},a.prototype.processConfig=function(i){if(i){if(hasValue(i.list)&&isArray$1(i.list))for(var o=0,c=i.list.length;o<c;o++)i.list[o]instanceof Color||(i.list[o]=color(i.list[o]));hasValue(i.baseColor)&&!(i.baseColor instanceof Color)&&(i.baseColor=color(i.baseColor))}e.prototype.processConfig.call(this,i)},a}(BaseObject);registry.registeredClasses.ColorSet=ColorSet;var PatternSet=function(e){__extends(a,e);function a(){var i=e.call(this)||this;i._list=[],i._currentStep=0,i._startIndex=0,i._currentPass=0,i.baseColor=new Color({r:103,g:183,b:220}),i.className="PatternSet";var o=new InterfaceColorSet;return i.list=[i.getLinePattern(1e3,45,1,6),i.getRectPattern(10,0,4),i.getLinePattern(1e3,-45,1,6),i.getCirclePattern(11,2,!0),i.getLinePattern(6,90,1),i.getRectPattern(12,45,6,!0),i.getLinePattern(6,0,1),i.getRectPattern(7,0,4),i.getLinePattern(1e3,45,2,3,"4,2"),i.getCirclePattern(9,3,!1),i.getLinePattern(1e3,-45,2,3,"4,2"),i.getRectPattern(10,45,Math.sqrt(50)),i.getLinePattern(1e3,-45,2,1),i.getRectPattern(10,0,9),i.getLinePattern(1e3,45,2,1),i.getLinePattern(1e3,0,3,1),i.getRectPattern(10,45,10),i.getLinePattern(1e3,90,3,1)],i.baseColor=o.getFor("stroke"),i.applyTheme(),i}return a.prototype.getLinePattern=function(i,o,c,d,g){var b=new LinePattern;return b.width=i,b.height=i,b.stroke=this.baseColor,b.gap=d,b.strokeDasharray=g,b.strokeWidth=c,b.rotation=o,b},a.prototype.getRectPattern=function(i,o,c,d){var g=new RectPattern;return g.width=i,g.height=i,g.rectWidth=c,g.rectHeight=c,d?(g.stroke=this.baseColor,g.strokeWidth=1,g.fillOpacity=0):(g.fill=this.baseColor,g.strokeWidth=0),o!=0&&(g.shapeRendering="auto"),g.rotation=o,g},a.prototype.getCirclePattern=function(i,o,c){var d=new CirclePattern;return d.width=i,d.height=i,d.shapeRendering="auto",d.radius=o,c?(d.stroke=this.baseColor,d.strokeWidth=1,d.fillOpacity=0):(d.fill=this.baseColor,d.strokeWidth=0),d},Object.defineProperty(a.prototype,"list",{get:function(){return this._list},set:function(i){this._list=i,this.reset()},enumerable:!0,configurable:!0}),a.prototype.next=function(){var i=this.getIndex(this.currentStep);return this._currentStep++,i},a.prototype.getIndex=function(i){for(var o;this.list.length<=i;)this.generatePatterns();return o=this.list[i],o.clone()},a.prototype.generatePatterns=function(){var i=this.list.length/(this._currentPass+1);this._currentPass++;for(var o=0;o<i;o++)this.list.push(this.list[o].clone())},a.prototype.reset=function(){this._currentStep=this._startIndex},Object.defineProperty(a.prototype,"currentStep",{get:function(){return this._currentStep},set:function(i){this._currentStep=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"startIndex",{get:function(){return this._startIndex},set:function(i){this._startIndex=i,this.reset()},enumerable:!0,configurable:!0}),a.prototype.processConfig=function(i){e.prototype.processConfig.call(this,i)},a}(BaseObject);registry.registeredClasses.PatternSet=PatternSet;var Plugin=function(){function e(){this._disposed=!1,this._disposers=[]}return e.prototype.init=function(){},e.prototype.isDisposed=function(){return this._disposed},e.prototype.dispose=function(){if(!this._disposed){this._disposed=!0;var a=this._disposers;for(this._disposers=null;a.length!==0;){var i=a.shift();i.dispose()}}},e}(),AmChartsLogo=function(e){__extends(a,e);function a(){var i=e.call(this)||this;i.className="AmChartsLogo",i.valign="bottom";var o=.3;i.opacity=.3,i.defaultState.properties.opacity=.4,i.url="https://www.amcharts.com/",i.urlTarget="_blank",i.showSystemTooltip=!0,i.readerTitle="Chart created using amCharts library",i.width=220*o,i.height=70*o,i.background.opacity=0;var c=color("#474758");new InterfaceColorSet().getFor("background").alternative.hex=="#ffffff"&&(c=color("#ffffff"));var d=new LinearGradient;d.addColor(c),d.addColor(c,1,.75),d.addColor(color("#3cabff"),1,.755),d.rotation=-10;var g=d,b=i.createChild(Polyspline);b.shouldClone=!1,b.isMeasured=!1,b.segments=[[{x:50*o,y:50*o},{x:90*o,y:50*o},{x:120*o,y:20*o},{x:135*o,y:35*o},{x:150*o,y:20*o},{x:180*o,y:50*o},{x:200*o,y:50*o}]],b.strokeWidth=6*o,b.tensionX=.8,b.tensionY=1,b.stroke=color("#3cabff");var j=i.createChild(Polyspline);j.shouldClone=!1,j.isMeasured=!1,j.segments=[[{x:20*o,y:50*o},{x:50*o,y:50*o},{x:90*o,y:12*o},{x:133*o,y:50*o},{x:170*o,y:50*o},{x:200*o,y:50*o}]],j.strokeWidth=6*o,j.tensionX=.75,j.tensionY=1,j.stroke=g,i._disposers.push(j);var $=new DesaturateFilter;i.filters.push($);var rt=new DesaturateFilter;rt.saturation=1;var _e=i.states.create("hover");return _e.properties.opacity=1,_e.filters.push(rt),i.applyTheme(),i}return a}(Container);function createChild(e,a){var i=getElement(e),o=!1;if(i||(i=document.createElement("div"),i.style.width="200px",i.style.height="200px",i.style.top="0",i.style.left="0",i.style.visibility="hidden",i.style.position="absolute",document.body.appendChild(i),o=!0),i){i.innerHTML="";var c=new SVGContainer(i),d=new Paper(c.SVGContainer,"svg-"+(svgContainers.length-1)),g=new Container;g.htmlContainer=i,g.svgContainer=c,g.width=percent(100),g.height=percent(100),g.background.fillOpacity=0,g.paper=d,d.append(g.group),o&&ready(function(){g.moveHtmlContainer(e)}),g.relativeWidth=1,g.relativeHeight=1,c.container=g;var b=g.createChild(a);b.topParent=g;var j=b.uid;registry.invalidSprites[j]=[],registry.invalidDatas[j]=[],registry.invalidPositions[j]=[],registry.invalidLayouts[j]=[],g.baseId=j,b.isBaseSprite=!0,b.focusFilter=new FocusFilter,registry.baseSprites.push(b),registry.baseSpritesByUid[j]=b,b.maskRectangle={x:0,y:0,width:Math.max(c.width||0,0),height:Math.max(c.height||0,0)},g.events.on("maxsizechanged",function(At){(At.previousWidth==0||At.previousHeight==0)&&g.deepInvalidate(),b.maskRectangle&&(b.maskRectangle={x:0,y:0,width:Math.max(c.width||0,0),height:Math.max(c.height||0,0)})});var $=null,rt=function(){b.isDisposed()?$=null:getRoot(b.dom)==null?(options.autoDispose?(g.htmlContainer=void 0,c.htmlElement=void 0,b.dispose()):warn("Chart was not disposed",b.uid),$=null):$=window.setTimeout(rt,1e3)};rt(),b.addDisposer(new Disposer(function(){$!==null&&clearTimeout($),remove(registry.baseSprites,b),registry.baseSpritesByUid[b.uid]=void 0})),b.addDisposer(g);var _e=g.createChild(Container);_e.topParent=g,_e.width=percent(100),_e.height=percent(100),_e.isMeasured=!1,g.tooltipContainer=_e,b.tooltip=new Tooltip,b.tooltip.hide(0),b.tooltip.setBounds({x:0,y:0,width:_e.maxWidth,height:_e.maxHeight}),_e.events.on("maxsizechanged",function(){getValue(b.tooltip).setBounds({x:0,y:0,width:_e.maxWidth,height:_e.maxHeight})},void 0,!1);var st=new Preloader;if(st.events.on("inited",function(){st.__disabled=!0},void 0,!1),g.preloader=st,b instanceof Container&&!b.hasLicense()){var ut=_e.createChild(AmChartsLogo);_e.events.on("maxsizechanged",function(At){_e.maxWidth<=100||_e.maxHeight<=50?ut.hide():(ut.isHidden||ut.isHiding)&&ut.show()},void 0,!1),b.logo=ut,ut.align="left",ut.valign="bottom"}if(b.numberFormatter,g.isStandaloneInstance=!0,options.onlyShowOnViewport)if(isElementInViewport(i,options.viewportTarget))options.queue&&addToQueue(b);else{b.__disabled=!0,b.tooltipContainer.__disabled=!0;var gt=[addEventListener$1(window,"DOMContentLoaded",function(){viewPortHandler(b)}),addEventListener$1(window,"load",function(){viewPortHandler(b)}),addEventListener$1(window,"resize",function(){viewPortHandler(b)}),addEventListener$1(window,"scroll",function(){viewPortHandler(b)})];if(options.viewportTarget)for(var yt=isArray$1(options.viewportTarget)?options.viewportTarget:options.viewportTarget?[options.viewportTarget]:[],Pt=0;Pt<yt.length;Pt++){var wt=yt[Pt];gt.push(addEventListener$1(wt,"resize",function(){viewPortHandler(b)})),gt.push(addEventListener$1(wt,"scroll",function(){viewPortHandler(b)}))}var Ct=new MultiDisposer(gt);b.addDisposer(Ct),b.vpDisposer=Ct}else options.queue&&addToQueue(b);return b}else throw system.log("html container not found"),new Error("html container not found")}function disposeAllCharts(){for(;registry.baseSprites.length!==0;)registry.baseSprites.pop().dispose()}function addToQueue(e){registry.queue.indexOf(e)==-1&&(e.__disabled=!0,e.tooltipContainer.__disabled=!0,e.events.disableType("appeared"),registry.queue.length==0&&(registry.events.once("exitframe",function(){queueHandler(e)}),system.requestFrame()),e.addDisposer(new Disposer(function(){removeFromQueue(e)})),registry.queue.push(e))}function removeFromQueue(e){var a=registry.queue.indexOf(e);if(a>=0){registry.queue.splice(registry.queue.indexOf(e),1);var i=registry.queue[a];i&&queueHandler(i)}}function viewPortHandler(e){e.__disabled&&isElementInViewport(e.htmlContainer,options.viewportTarget)&&(e.vpDisposer&&e.vpDisposer.dispose(),addToQueue(e))}function queueHandler(e){e&&e.tooltipContainer&&(e.__disabled=!1,e.tooltipContainer.__disabled=!1,e.events.enableType("appeared"),e.dispatch("removedfromqueue"),e.showOnInit&&e.events.on("appeared",function(){removeFromQueue(e)}),e.vpDisposer&&e.vpDisposer.dispose(),e instanceof Container&&e.invalidateLabels(),e.tooltipContainer&&e.tooltipContainer.invalidateLayout(),e instanceof Component?(e.invalidateData(),e.reinit(),e.events.once("datavalidated",function(){e.showOnInit?e.appear():removeFromQueue(e)})):(e.reinit(),e.events.once("inited",function(){removeFromQueue(e)}),e.showOnInit&&e.appear()))}function create(e,a){var i;isString$1(a)&&(hasValue(registry.registeredClasses[a])?a=registry.registeredClasses[a]:(a=registry.registeredClasses.Container,i=new Error("Class ["+a+"] is not loaded.")));var o=createChild(e,a);return i&&o.raiseCriticalError(i),o}function createFromConfig(e,a,i){hasValue(i)||(i=e.type,delete e.type),hasValue(a)||(a=e.container,delete e.container);var o,c;isString$1(i)&&hasValue(registry.registeredClasses[i])?o=registry.registeredClasses[i]:typeof i!="function"?(o=Container,c=new Error("Class ["+i+"] is not loaded.")):o=i;var d=createChild(a,o);return c?d.raiseCriticalError(c):d.config=e,d}function createDeferred(e,a){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];return new Promise(function(c,d){registry.deferred.push({scope:a,callback:e,args:i,resolve:c}),registry.deferred.length==1&&processNextDeferred()})}function processNextDeferred(){var e,a=registry.deferred[0];if(a){var i=(e=a.callback).call.apply(e,__spread([a.scope],a.args));i.events.on("ready",function(){a.resolve(i),registry.deferred.shift(),options.deferredDelay?setTimeout(processNextDeferred,options.deferredDelay):processNextDeferred()})}}function useTheme(e){registry.themes.indexOf(e)===-1&&registry.themes.push(e)}function unuseTheme(e){remove(registry.themes,e)}function unuseAllThemes(){registry.themes=[]}function addLicense(e){options.licenses.push(e)}const core=Object.freeze(Object.defineProperty({__proto__:null,AMElement,Adapter,Animation,BaseObject,BaseObjectEvents,Basis,BlurFilter,Button,CSVParser,Cache,Circle,CirclePattern,CloseButton,Color,ColorModifier,ColorSet,ColorizeFilter,Component,Cone,Container,CounterDisposer,DATE,DURATION,DataItem,DataLoader,DataParser,DataSource,DateFormatter,DesaturateFilter,Dictionary,DictionaryDisposer,DictionaryTemplate,Disposer,DropShadowFilter,DurationFormatter,Ellipse,EventDispatcher,Export,ExportMenu,Filter,FocusFilter,GlobalAdapter,Group,Image:Image$1,IndexedIterable,Inertia,Interaction,InteractionKeyboardObject,InteractionObject,InteractionObjectEventDispatcher,InterfaceColorSet,JSONParser,Keyboard,Label,Language,LightenFilter,Line,LinePattern,LinearGradient,LinearGradientModifier,List,ListDisposer,ListGrouper,ListIterator,ListTemplate,Modal,Morpher,MouseCursorStyle,MultiDisposer,MutableValueDisposer,NUMBER,NumberFormatter,OrderedList,OrderedListTemplate,PLACEHOLDER,PLACEHOLDER2,PX,Paper,Pattern,PatternSet,Percent,PlayButton,Plugin,PointedRectangle,PointedShape,Polyarc,Polygon,Polyline,Polyspline,Popup,Preloader,RadialGradient,RadialGradientModifier,RectPattern,Rectangle,Rectangle3D,Registry,ResizeButton,Responsive,ResponsiveBreakpoints,RoundedRectangle,STRING,SVGContainer,SVGDefaults,Scrollbar,Slice,Slice3D,Slider,SortedList,SortedListTemplate,Sprite,SpriteEventDispatcher,SpriteState,StyleClass,StyleRule,SwitchButton,System,TargetedEventDispatcher,Tension,TextFormatter,TextLink,Tooltip,Trapezoid,Triangle,Validatable,WavedCircle,WavedLine,WavedRectangle,ZoomOutButton,addClass,addLicense,animate,array:Array$1,blur,cache,castColor,castNumber,castString,checkBoolean,checkNumber,checkObject,checkString,color,colors:Colors,copyAttributes,create,createDeferred,createFromConfig,dataLoader,defaultRules,disposeAllCharts,ease:Ease,fixPixelPerfect,focus,getElement,getInteraction,getTextFormatter,globalAdapter,is,isArray:isArray$1,isColor,isElement,isNaN:isNaN$1,isNumber:isNumber$1,isObject:isObject$1,isPercent,isString:isString$1,iter:Iterator,join,keyboard,math:Math$1,max,min,net:Net,nextFrame,number:Number$1,object:Object$1,options,or,outerHTML,path:Path,percent,readFrame,ready,registry,removeClass,reverse,string:String$1,system,time:Time,triggerIdle,type:Type,unuseAllThemes,unuseTheme,useTheme,utils:Utils,viewPortHandler,whenIdle,writeFrame},Symbol.toStringTag,{value:"Module"})),require$$2=getAugmentedNamespace(core);var theme$1=function(e){is(e,"SpriteState")&&(e.transitionDuration=400),is(e,"Component")&&(e.rangeChangeDuration=500,e.interpolationDuration=500,e.sequencedInterpolation=!1,is(e,"SankeyDiagram")&&(e.sequencedInterpolation=!0),is(e,"FunnelSeries")&&(e.sequencedInterpolation=!0)),is(e,"Chart")&&(e.defaultState.transitionDuration=2e3,e.hiddenState.transitionDuration=1e3),is(e,"Tooltip")&&(e.animationDuration=400,e.defaultState.transitionDuration=400,e.hiddenState.transitionDuration=400),is(e,"Scrollbar")&&(e.animationDuration=500),is(e,"Series")&&(e.defaultState.transitionDuration=1e3,e.hiddenState.transitionDuration=700,e.hiddenState.properties.opacity=1,e.showOnInit=!0),is(e,"MapSeries")&&(e.hiddenState.properties.opacity=0),is(e,"PercentSeries")&&(e.hiddenState.properties.opacity=0),is(e,"FunnelSlice")&&(e.defaultState.transitionDuration=800,e.hiddenState.transitionDuration=1e3,e.hiddenState.properties.opacity=1),is(e,"Slice")&&(e.defaultState.transitionDuration=700,e.hiddenState.transitionDuration=1e3,e.hiddenState.properties.opacity=1),is(e,"Preloader")&&(e.hiddenState.transitionDuration=2e3),is(e,"Column")&&(e.defaultState.transitionDuration=700,e.hiddenState.transitionDuration=1e3,e.hiddenState.properties.opacity=1),is(e,"Column3D")&&(e.hiddenState.properties.opacity=0)};const animated=Object.freeze(Object.defineProperty({__proto__:null,default:theme$1},Symbol.toStringTag,{value:"Module"})),require$$3=getAugmentedNamespace(animated);Object.defineProperty(reactAmcharts4,"__esModule",{value:!0});var default_1=reactAmcharts4.default=void 0,_react=_interopRequireWildcard(reactExports),_propTypes=_interopRequireDefault(propTypesExports),am4core=_interopRequireWildcard(require$$2),_animated=_interopRequireDefault(require$$3);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var a={};if(e!=null){for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,i):{};o.get||o.set?Object.defineProperty(a,i,o):a[i]=e[i]}}return a.default=e,a}function _classCallCheck(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,a){for(var i=0;i<a.length;i++){var o=a[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,a,i){return a&&_defineProperties(e.prototype,a),i&&_defineProperties(e,i),e}function _possibleConstructorReturn(e,a){return a&&(typeof a=="object"||typeof a=="function")?a:_assertThisInitialized(e)}function _assertThisInitialized(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},_getPrototypeOf(e)}function _inherits(e,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),a&&_setPrototypeOf(e,a)}function _setPrototypeOf(e,a){return _setPrototypeOf=Object.setPrototypeOf||function(o,c){return o.__proto__=c,o},_setPrototypeOf(e,a)}am4core.useTheme(_animated.default);let AmChart4Wrapper=function(e){_inherits(a,e);function a(i){var o;_classCallCheck(this,a),o=_possibleConstructorReturn(this,_getPrototypeOf(a).call(this,i));const{id:c}=i;return o.id=`__amcharts4_${c}_${Date.now()}__`,o}return _createClass(a,[{key:"componentDidMount",value:function(){const{chartTypeClass:o,config:c}=this.props;this.chart=am4core.createFromConfig(c,this.id,o)}},{key:"componentDidUpdate",value:function(o){const{chartTypeClass:c,config:d}=this.props;d!==o.config&&(this.chart.dispose(),this.chart=am4core.createFromConfig(d,this.id,c))}},{key:"render",value:function(){return _react.default.createElement("div",{id:this.id,style:{width:"100%",height:"100%"}})}}]),a}(_react.PureComponent);AmChart4Wrapper.propTypes={config:_propTypes.default.object.isRequired,chartTypeClass:_propTypes.default.object.isRequired,id:_propTypes.default.string.isRequired};var _default$1=AmChart4Wrapper;default_1=reactAmcharts4.default=_default$1;var Grip=function(e){__extends(a,e);function a(){var i=e.call(this)||this;i.className="Grip";var o=new InterfaceColorSet;i.layout="absolute",i.padding(10,10,10,10),i.margin(3,3,3,3),i.background.fillOpacity=.3,i.background.cornerRadius(10,10,10,10);var c=new Sprite;c.element=i.paper.add("path");var d=moveTo({x:-6,y:0});return d+=lineTo({x:6,y:0}),d+=moveTo({x:-8,y:-6}),d+=lineTo({x:0,y:-12}),d+=lineTo({x:8,y:-6}),d+=moveTo({x:-8,y:6}),d+=lineTo({x:0,y:12}),d+=lineTo({x:8,y:6}),c.path=d,c.strokeWidth=2,c.fillOpacity=0,c.pixelPerfect=!0,c.padding(0,4,0,4),c.stroke=o.getFor("text"),c.strokeOpacity=.7,c.align="center",c.valign="middle",i.icon=c,i.label.dispose(),i.label=void 0,i.position="right",i.autoHideDelay=3e3,i.events.on("shown",function(g){i._autoHideTimeout&&i._autoHideTimeout.dispose(),i.autoHideDelay&&(i._autoHideTimeout=i.setTimeout(function(){i.hide()},i.autoHideDelay))}),i.events.on("down",function(g){i._autoHideTimeout&&i._autoHideTimeout.dispose()}),i.events.on("out",function(g){i.autoHideDelay&&(i._autoHideTimeout=i.setTimeout(function(){i.hide()},i.autoHideDelay))}),i.applyTheme(),i}return Object.defineProperty(a.prototype,"position",{get:function(){return this.getPropertyValue("position")},set:function(i){if(this.setPropertyValue("position",i))switch(i){case"left":this.align="left",this.valign="middle",this.horizontalCenter="left",this.verticalCenter="middle",this.icon.rotation=0,this.width=void 0,this.height=percent(30);break;case"right":this.align="right",this.valign="middle",this.horizontalCenter="right",this.verticalCenter="middle",this.icon.rotation=0,this.width=void 0,this.height=percent(30);break;case"top":this.align="center",this.valign="top",this.horizontalCenter="middle",this.verticalCenter="top",this.icon.rotation=90,this.width=percent(30),this.height=void 0;break;case"bottom":this.align="center",this.valign="bottom",this.horizontalCenter="middle",this.verticalCenter="bottom",this.icon.rotation=90,this.width=percent(30),this.height=void 0;break;default:this.align="center",this.valign="middle",this.horizontalCenter="middle",this.verticalCenter="middle",this.icon.rotation=90,this.width=percent(30),this.height=void 0}},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"autoHideDelay",{get:function(){return this.getPropertyValue("autoHideDelay")},set:function(i){this.setPropertyValue("autoHideDelay",i)},enumerable:!0,configurable:!0}),a}(Button);registry.registeredClasses.Grip=Grip;var ChartDataItem=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="ChartDataItem",i.applyTheme(),i}return a}(DataItem),Chart=function(e){__extends(a,e);function a(){var i=e.call(this)||this;if(i._legend=new MutableValueDisposer,i.constructor===a)throw new Error("'Chart' cannot be instantiated directly. Please use a specific chart type.");i.className="Chart";var o=new Label;i.titles=new ListTemplate(o),i._disposers.push(new ListDisposer(i.titles)),i._disposers.push(o),i.width=percent(100),i.height=percent(100),i.layout="vertical";var c=i.createChild(Container);c.shouldClone=!1,c.layout="vertical",c.width=percent(100),c.height=percent(100),i.chartAndLegendContainer=c;var d=c.createChild(Container);return d.shouldClone=!1,d.width=percent(100),d.height=percent(100),i.chartContainer=d,i.showOnInit=!0,i._disposers.push(i._legend),i.titles.events.on("inserted",function(g){i.processTitle(g),i.updateReaderTitleReferences()},i,!1),i.titles.events.on("removed",function(g){i.updateReaderTitleReferences()},i,!1),i.role="region",i.defaultState.transitionDuration=1,i.applyTheme(),i}return a.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("Chart"))},a.prototype.draw=function(){this.fixLayout(),e.prototype.draw.call(this)},a.prototype.fixLayout=function(){var i=this.legend;if(i){var o=this.chartAndLegendContainer,c=this.chartContainer;switch(c.x=void 0,c.y=void 0,i.position!="absolute"&&(i.x=void 0,i.y=void 0),i.position){case"left":o.layout="horizontal",i.toBack();break;case"right":o.layout="horizontal",i.toFront();break;case"top":o.layout="vertical",i.toBack();break;case"bottom":o.layout="vertical",i.toFront();break;case"absolute":i.isMeasured=!1;break}}},a.prototype.feedLegend=function(){},a.prototype.processTitle=function(i){var o=i.newValue;return o.parent=this,o.toBack(),o.shouldClone=!1,o.align="center",o.uidAttr(),o},a.prototype.updateReaderTitleReferences=function(){if(this.titles.length){var i=[];each(this.titles.iterator(),function(o){i.push(o.uid)}),this.setSVGAttribute({"aria-labelledby":i.join(" ")})}else this.removeSVGAttribute("aria-labelledby")},Object.defineProperty(a.prototype,"legend",{get:function(){return this._legend.get()},set:function(i){this.setLegend(i)},enumerable:!0,configurable:!0}),a.prototype.setLegend=function(i){var o=this;this._legend.get()!==i&&(i?(i.parent=this.chartAndLegendContainer,this._legend.set(i,i.events.on("propertychanged",function(c){c.property=="position"&&o.fixLayout()},void 0,!1)),i.addDisposer(new Disposer(function(){o.legend=void 0}))):this._legend.reset(),this.feedLegend())},a.prototype.dispose=function(){this.legend&&this.legend.dispose(),e.prototype.dispose.call(this)},a.prototype.processConfig=function(i){i&&hasValue(i.legend)&&!hasValue(i.legend.type)&&(i.legend.type="Legend"),e.prototype.processConfig.call(this,i)},a.prototype.copyFrom=function(i){this.titles.copyFrom(i.titles),this.chartContainer.copyFrom(i.chartContainer),i.legend&&(this.legend=i.legend.clone(),this.legend.removeChildren()),e.prototype.copyFrom.call(this,i)},Object.defineProperty(a.prototype,"dragGrip",{get:function(){var i=this;if(!this._dragGrip){var o=this.tooltipContainer.createChild(Grip);o.align="right",o.valign="middle",o.hide(0),o.events.on("down",function(c){c.touch&&(i.interactionsEnabled=!1)}),o.events.on("up",function(c){i.interactionsEnabled=!0}),this.events.on("down",function(c){c.touch&&o.show()}),this._dragGrip=o}return this._dragGrip},set:function(i){this._dragGrip=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"focusable",{get:function(){return this.parent.focusable},set:function(i){this.parent.focusable=i},enumerable:!0,configurable:!0}),a}(Component);registry.registeredClasses.Chart=Chart;defaultRules.push({relevant:ResponsiveBreakpoints.widthXS,state:function(e,a){if(e instanceof Chart){var i=e.states.create(a);return e.pixelPaddingLeft>10&&(i.properties.paddingLeft=10),e.pixelPaddingRight>10&&(i.properties.paddingRight=10),i}return null}});defaultRules.push({relevant:ResponsiveBreakpoints.heightXS,state:function(e,a){if(e instanceof Chart){var i=e.states.create(a);return e.pixelPaddingTop>10&&(i.properties.paddingTop=10),e.pixelPaddingBottom>10&&(i.properties.paddingBottom=10),i}return null}});defaultRules.push({relevant:ResponsiveBreakpoints.widthXXS,state:function(e,a){if(e instanceof Chart){var i=e.states.create(a);return i.properties.paddingLeft=0,i.properties.paddingRight=0,i}return null}});defaultRules.push({relevant:ResponsiveBreakpoints.heightXXS,state:function(e,a){if(e instanceof Chart){var i=e.states.create(a);return i.properties.paddingTop=0,i.properties.paddingBottom=0,i}return null}});var Bullet=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="Bullet",i.isMeasured=!1,i.tooltipX=0,i.tooltipY=0,i.layout="none",i.applyOnClones=!0,i.copyToLegendMarker=!0,i.applyTheme(),i}return Object.defineProperty(a.prototype,"locationX",{get:function(){return this.getPropertyValue("locationX")},set:function(i){if(this.setPropertyValue("locationX",i)){var o=this.dataItem;o&&o.component&&o.component.invalidate()}},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"locationY",{get:function(){return this.getPropertyValue("locationY")},set:function(i){if(this.setPropertyValue("locationY",i)){var o=this.dataItem;o&&o.component&&o.component.invalidate()}},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"xField",{get:function(){return this.getPropertyValue("xField")},set:function(i){this.setPropertyValue("xField",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"yField",{get:function(){return this.getPropertyValue("yField")},set:function(i){this.setPropertyValue("yField",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isDynamic",{get:function(){return this.getPropertyValue("isDynamic")},set:function(i){this.setPropertyValue("isDynamic",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"copyToLegendMarker",{get:function(){return this.getPropertyValue("copyToLegendMarker")},set:function(i){this.setPropertyValue("copyToLegendMarker",i)},enumerable:!0,configurable:!0}),a}(Container);registry.registeredClasses.Bullet=Bullet;defaultRules.push({relevant:ResponsiveBreakpoints.isXS,state:function(e,a){if(e instanceof Bullet){var i=e.states.create(a);return i.properties.disabled=!0,i}return null}});var LegendDataItem=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.childrenCreated=!1,i.className="LegendDataItem",i.applyTheme(),i}return Object.defineProperty(a.prototype,"label",{get:function(){var i=this;if(!this._label){var o=this.component.labels.create();this._label=o,this.addSprite(o),this._disposers.push(o),o.parent=this.itemContainer,this._disposers.push(new Disposer(function(){hasValue(i.component)&&i.component.labels.removeValue(o)}))}return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"color",{get:function(){return this.properties.color},set:function(i){this.setProperty("color",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"valueLabel",{get:function(){var i=this;if(!this._valueLabel){var o=this.component.valueLabels.create();this._valueLabel=o,this.addSprite(o),this._disposers.push(o),o.parent=this.itemContainer,this._disposers.push(new Disposer(function(){hasValue(i.component)&&i.component.valueLabels.removeValue(o)}))}return this._valueLabel},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"itemContainer",{get:function(){var i=this;if(!this._itemContainer){var o=this.component,c=o.itemContainers.create();c.parent=o,this._itemContainer=c,this.addSprite(c),this._disposers.push(c),c.togglable&&c.events.on("toggled",function(b){o.toggleDataItem(b.target.dataItem)},void 0,!1),c.focusable&&(c.events.on("hit",function(b){o.focusedItem=void 0},void 0,!1),c.events.on("focus",function(b){o.focusedItem=b.target.dataItem},void 0,!1),c.events.on("blur",function(b){o.focusedItem=void 0},void 0,!1)),this._disposers.push(new Disposer(function(){hasValue(i.component)&&i.component.itemContainers.removeValue(c)})),this.dataContext.uidAttr&&(c.readerControls=this.dataContext.uidAttr(),c.readerLabelledBy=this.dataContext.uidAttr());var d=this.dataContext;if((d instanceof DataItem||d instanceof Sprite)&&!d.isDisposed()){var g=function(b){c.readerChecked=b.visible,c.events.disableType("toggled"),c.isActive=!b.visible,c.events.enableType("toggled")};d.addDisposer(new Disposer(function(){i.component&&i.component.dataItems.remove(i)})),d instanceof Sprite?(c.addDisposer(d.events.on("visibilitychanged",g,void 0,!1)),c.addDisposer(d.events.on("hidden",function(b){c.readerChecked=!1,c.events.disableType("toggled"),c.isActive=!0,c.events.enableType("toggled")},void 0,!1)),c.addDisposer(d.events.on("shown",function(b){c.readerChecked=!0,c.events.disableType("toggled"),c.isActive=!1,c.events.enableType("toggled")},void 0,!1))):c.addDisposer(d.events.on("visibilitychanged",g,void 0,!1))}}return this._itemContainer},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"marker",{get:function(){var i=this;if(!this._marker){var o=this.component.markers.create();this._marker=o,o.parent=this.itemContainer,this.addSprite(o),this._disposers.push(o),this._disposers.push(new Disposer(function(){hasValue(i.component)&&i.component.markers.removeValue(o)}))}return this._marker},enumerable:!0,configurable:!0}),a}(DataItem),LegendSettings=function(){function e(){this.createMarker=!0}return e}(),Legend=function(e){__extends(a,e);function a(){var i=e.call(this)||this;i.className="Legend",i.layout="grid",i.setPropertyValue("useDefaultMarker",!1),i.setPropertyValue("scrollable",!1),i.setPropertyValue("contentAlign","center");var o=new Container;o.applyOnClones=!0,o.padding(8,0,8,0),o.margin(0,10,0,10),o.layout="horizontal",o.clickable=!0,o.focusable=!0,o.role="switch",o.togglable=!0,o.cursorOverStyle=MouseCursorStyle.pointer,o.background.fillOpacity=0,i.itemContainers=new ListTemplate(o),i._disposers.push(new ListDisposer(i.itemContainers)),i._disposers.push(i.itemContainers.template),i._disposers.push(getInteraction().body.events.on("keyup",function(rt){if(keyboard.isKey(rt.event,"enter")&&i.focusedItem){var _e=i.focusedItem,st=_e.itemContainer;st.togglable?i.toggleDataItem(_e):st.clickable&&st.events.isEnabled("hit")&&(st.dispatchImmediately("hit",{event:rt}),i.focusedItem=_e)}},i));var c=new InterfaceColorSet,d=new Container;d.width=23,d.height=23,d.interactionsEnabled=!1,d.applyOnClones=!0,d.setStateOnChildren=!0,d.background.fillOpacity=0,d.background.strokeOpacity=0,d.propertyFields.fill="fill",d.valign="middle";var g=c.getFor("disabledBackground");d.events.on("childadded",function(rt){var _e=rt.newValue,st=_e.states.create("active");st.properties.stroke=g,st.properties.fill=g}),i.markers=new ListTemplate(d),i._disposers.push(new ListDisposer(i.markers)),i._disposers.push(i.markers.template);var b=d.createChild(RoundedRectangle);b.width=percent(100),b.height=percent(100),b.applyOnClones=!0,b.propertyFields.fill="fill",b.strokeOpacity=0;var j=new Label;j.text="{name}",j.margin(0,5,0,5),j.valign="middle",j.applyOnClones=!0,j.states.create("active").properties.fill=c.getFor("disabledBackground"),i.labels=new ListTemplate(j),i._disposers.push(new ListDisposer(i.labels)),i._disposers.push(i.labels.template),j.interactionsEnabled=!1,j.truncate=!0,j.fullWords=!1;var $=new Label;return $.margin(0,5,0,0),$.valign="middle",$.width=50,$.align="right",$.textAlign="end",$.applyOnClones=!0,$.states.create("active").properties.fill=c.getFor("disabledBackground"),$.interactionsEnabled=!1,i.valueLabels=new ListTemplate($),i._disposers.push(new ListDisposer(i.valueLabels)),i._disposers.push(i.valueLabels.template),i.position="bottom",o.states.create("active"),o.setStateOnChildren=!0,i.role="group",i.events.on("layoutvalidated",i.handleScrollbar,i,!1),i.events.on("parentset",function(){var rt=i.parent;rt&&i._disposers.push(rt.events.on("maxsizechanged",function(){i.scrollable&&i.setTimeout(function(){i.updateMasks(),i.handleScrollbar(),i._handleWheelReal(1)},100)}))}),i.applyTheme(),i}return a.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("Legend"))},a.prototype.createDataItem=function(){return new LegendDataItem},a.prototype.validateDataElements=function(){this.scrollbar&&(this.scrollbar.start=0,this.scrollbar.end=1),e.prototype.validateDataElements.call(this)},a.prototype.validateDataElement=function(i){e.prototype.validateDataElement.call(this,i);var o=i.itemContainer,c=i.marker;i.label;var d=i.valueLabel;o.readerChecked=i.dataContext.visible,i.dataContext.legendDataItem=i;var g=i.label.maxWidth;i.label.width instanceof Percent||(i.label.width=void 0),g>0&&(i.label.maxWidth=g),d.align=="right"&&(d.width=void 0);var b=i.dataContext.legendSettings,j=i.dataContext;j.createLegendMarker&&(!this.useDefaultMarker||!(j instanceof Sprite))?i.childrenCreated||(j.createLegendMarker(c),i.childrenCreated=!0):this.markers.template.propertyFields.fill=void 0,j.updateLegendValue&&j.updateLegendValue(),j.component&&j.component.updateLegendValue&&j.component.updateLegendValue(j),d.invalid&&d.validate(),d.text==""||d.text==null?d.__disabled=!0:d.__disabled=!1,b&&(b.itemValueText!=null||b.valueText!=null)&&(d.__disabled=!1);var $=i.dataContext.visible;$===void 0&&($=!0),$=toBoolean($),i.dataContext.visible=$,o.events.disableType("toggled"),o.isActive=!$,o.isActive?o.setState("active",0):o.setState("default",0),o.events.enableType("toggled")},a.prototype.afterDraw=function(){var i=this,o=this.getPropertyValue("maxWidth"),c=0;this.labels.each(function(_e){_e.invalid&&(_e.maxWidth=void 0,_e.validate()),_e.measuredWidth+_e.pixelMarginLeft+_e.pixelMarginRight>c&&(c=_e.measuredWidth+_e.pixelMarginLeft+_e.pixelMarginRight)});var d=0;this.valueLabels.each(function(_e){_e.invalid&&_e.validate(),_e.measuredWidth+_e.pixelMarginLeft+_e.pixelMarginRight>d&&(d=_e.measuredWidth+_e.pixelMarginLeft+_e.pixelMarginRight)});var g=0;this.markers.each(function(_e){_e.invalid&&_e.validate(),_e.measuredWidth+_e.pixelMarginLeft+_e.pixelMarginRight>g&&(g=_e.measuredWidth+_e.pixelMarginLeft+_e.pixelMarginRight)});var b=this.itemContainers.template,j=b.pixelMarginRight+b.pixelMarginLeft,$,rt=c+d+g;isNumber$1(o)?(o=o-j,o>rt&&(o=rt),$=o-g-d):$=c,this.labels.each(function(_e){(i.valueLabels.template.align=="right"||_e.measuredWidth>$)&&(_e.width instanceof Percent||(_e.width=Math.min(_e.maxWidth,$-_e.pixelMarginLeft-_e.pixelMarginRight),_e.maxWidth=_e.width))}),this.valueLabels.template.align=="right"&&this.valueLabels.each(function(_e){_e.width=d-_e.pixelMarginRight-_e.pixelMarginLeft}),e.prototype.afterDraw.call(this)},a.prototype.handleScrollbar=function(){var i=this.scrollbar;if(this.scrollable&&i){var o=this.maxHeight;i.height=o,i.x=this.measuredWidth-i.pixelWidth-i.pixelMarginLeft,this.contentHeight>o?(i.visible=!0,i.thumb.height=i.height*o/this.contentHeight,this.paddingRight=i.pixelWidth+i.pixelMarginLeft+i.pixelMarginRight):(i.thumb.height=i.height*o/this.contentHeight,this.paddingRight=i.pixelWidth+i.pixelMarginLeft+i.pixelMarginRight,i.visible=!1,i.start=0,i.end=1),i.handleThumbPosition(),this.updateMasks()}},Object.defineProperty(a.prototype,"position",{get:function(){return this.getPropertyValue("position")},set:function(i){this.setPropertyValue("position",i)&&(i=="left"||i=="right"?(this.margin(10,5,10,10),this.valign="middle",this.contentAlign="none",this.valueLabels.template.align="right",isNumber$1(this.maxColumns)||(this.maxColumns=1),this.width=void 0,this.maxWidth=220):(this.maxColumns=void 0,this.width=percent(100),this.valueLabels.template.align="left"),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"useDefaultMarker",{get:function(){return this.getPropertyValue("useDefaultMarker")},set:function(i){this.setPropertyValue("useDefaultMarker",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"scrollable",{get:function(){return this.getPropertyValue("scrollable")},set:function(i){if(this.setPropertyValue("scrollable",i,!0))if(i){var o=this.createChild(Scrollbar);this.scrollbar=o,o.isMeasured=!1,o.orientation="vertical",o.endGrip.__disabled=!0,o.startGrip.__disabled=!0,o.visible=!1,o.marginLeft=5,this._mouseWheelDisposer=this.events.on("wheel",this.handleWheel,this,!1),this._disposers.push(this._mouseWheelDisposer),this._disposers.push(o.events.on("rangechanged",this.updateMasks,this,!1))}else this._mouseWheelDisposer&&(this._mouseWheelDisposer.dispose(),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=void 0))},enumerable:!0,configurable:!0}),a.prototype.handleWheel=function(i){this._handleWheelReal(i.shift.y)},a.prototype._handleWheelReal=function(i){var o=this.scrollbar;if(o){var c=i/1e3*this.measuredHeight/this.contentHeight,d=o.end-o.start;i>0?(o.start=max$1(0,o.start-c),o.end=o.start+d):(o.end=min$1(1,o.end-c),o.start=o.end-d)}},a.prototype.updateMasks=function(){var i=this;this.scrollbar&&this.itemContainers.each(function(o){o.dy=-i.scrollbar.thumb.pixelY*i.contentHeight/i.maxHeight,o.maskRectangle={x:0,y:-o.dy,width:i.measuredWidth,height:i.maxHeight}}),this.invalidatePosition()},a.prototype.toggleDataItem=function(i){var o=i.dataContext;!o.visible||o.isHiding||o instanceof Sprite&&o.isHidden?(i.color=i.colorOrig,o.appeared=!0,i.itemContainer.isActive=!1,o.hidden===!0&&(o.hidden=!1),o.show?o.show():o.visible=!0,this.svgContainer.readerAlert(this.language.translate("%1 shown",this.language.locale,i.label.readerTitle))):(i.itemContainer.isActive=!0,o.appeared=!0,o.hide?o.hide():o.visible=!1,this.svgContainer.readerAlert(this.language.translate("%1 hidden",this.language.locale,i.label.readerTitle)),i.color=new InterfaceColorSet().getFor("disabledBackground"))},Object.defineProperty(a.prototype,"preloader",{get:function(){},enumerable:!0,configurable:!0}),a.prototype.handleDataItemPropertyChange=function(i,o){i.valueLabel.invalidate(),i.label.invalidate()},a}(Component);registry.registeredClasses.Legend=Legend;defaultRules.push({relevant:ResponsiveBreakpoints.widthXS,state:function(e,a){if(e instanceof Legend&&(e.position=="left"||e.position=="right")){var i=e.states.create(a);return i.properties.position="bottom",i}return null}});defaultRules.push({relevant:ResponsiveBreakpoints.heightXS,state:function(e,a){if(e instanceof Legend&&(e.position=="top"||e.position=="bottom")){var i=e.states.create(a);return i.properties.position="right",i}return null}});defaultRules.push({relevant:ResponsiveBreakpoints.isXS,state:function(e,a){if(e instanceof Legend){var i=e.states.create(a);return i.properties.disabled=!0,i}return null}});var SeriesDataItem=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="SeriesDataItem",i.values.value={},i.values.value={},i.applyTheme(),i}return Object.defineProperty(a.prototype,"bullets",{get:function(){return this._bullets||(this._bullets=new Dictionary,this._disposers.push(new DictionaryDisposer(this._bullets))),this._bullets},enumerable:!0,configurable:!0}),a.prototype.dispose=function(){this.bullets.clear(),e.prototype.dispose.call(this)},Object.defineProperty(a.prototype,"value",{get:function(){return this.values.value.value},set:function(i){this.setValue("value",i)},enumerable:!0,configurable:!0}),a}(DataItem),Series=function(e){__extends(a,e);function a(){var i=e.call(this)||this;if(i._ignoreMinMax=!1,i._showBullets=!0,i.legendSettings=new LegendSettings,i._tmin=new Dictionary,i._tmax=new Dictionary,i._smin=new Dictionary,i._smax=new Dictionary,i.dataItemsByAxis=new Dictionary,i.skipFocusThreshold=20,i._itemReaderTextChanged=!1,i.calculatePercent=!1,i.usePercentHack=!0,i.autoDispose=!0,i.simplifiedProcessing=!1,i.constructor===a)throw new Error("'Series' cannot be instantiated directly. Please use a specific series type.");i.className="Series",i.isMeasured=!1,i.layout="none",i.shouldClone=!1,i.setPropertyValue("hidden",!1),i.axisRanges=new List,i.axisRanges.events.on("inserted",i.processAxisRange,i,!1),i.minBulletDistance=0,i.mainContainer=i.createChild(Container),i.mainContainer.shouldClone=!1,i.mainContainer.mask=i.createChild(Sprite),i._disposers.push(i.mainContainer);var o=i.mainContainer.createChild(Container);return i._shouldBeReady.push(o),o.shouldClone=!1,o.layout="none",o.virtualParent=i,i._disposers.push(o),i.bulletsContainer=o,i.tooltip=new Tooltip,i.tooltip.virtualParent=i,i._disposers.push(i.tooltip),i.hiddenState.transitionEasing=cubicIn,i.dataItem=i.createDataItem(),i._disposers.push(i.dataItem),i.dataItem.component=i,i.role="group",i.applyTheme(),i}return a.prototype.applyTheme=function(){e.prototype.applyTheme.call(this),options.autoSetClassName&&this.bulletsContainer&&(this.bulletsContainer.className=this.className+"-bullets",this.bulletsContainer.setClassName())},a.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("Series"))},a.prototype.createDataItem=function(){return new SeriesDataItem},Object.defineProperty(a.prototype,"chart",{get:function(){return this._chart},set:function(i){this._chart=i},enumerable:!0,configurable:!0}),a.prototype.positionBullet=function(i){},a.prototype.processBullet=function(i){var o=this,c=i.newValue;c.isTemplate=!0,this.events.once("datavalidated",function(d){o.itemsFocusable()&&(c.focusable=!0)}),this.invalidate()},a.prototype.removeBullet=function(i){var o=i.oldValue;this.dataItems.each(function(c){var d=c.bullets.getKey(o.uid);d&&d.dispose()}),this.invalidate()},a.prototype.validateDataItems=function(){e.prototype.validateDataItems.call(this),this.processValues(!1)},a.prototype.getFirstValue=function(i,o){for(var c=o;c>=0;c--){var d=this.dataItems.getIndex(c),g=d.getActualWorkingValue(i);if(isNumber$1(g))return g}return null},a.prototype.getAbsoluteFirstValue=function(i){for(var o=0;o<this.dataItems.length;o++){var c=this.dataItems.getIndex(o),d=c.values[i].value;if(isNumber$1(d))return d}return null},a.prototype.rangeChangeUpdate=function(){e.prototype.rangeChangeUpdate.call(this),this.processValues(!0)},a.prototype.processValues=function(i){var o=this;if(!this.simplifiedProcessing){var c=this.dataItems,d={},g={},b={},j={},$={},rt={},_e={},st={},ut={},gt={},yt=max$1(0,this.startIndex);yt=min$1(yt,this.dataItems.length);var Pt=min$1(this.endIndex,this.dataItems.length);if(isNumber$1(yt)||(yt=0),isNumber$1(Pt)||(Pt=this.dataItems.length),yt>0){var wt=c.getIndex(yt-1);each$1(wt.values,function(Lt,Ft){var Nt=wt.getActualWorkingValue(Lt);isNumber$1(Nt)&&(st[Lt]=Nt)})}for(var Ct=function(Lt){var Ft=c.getIndex(Lt);each$1(Ft.values,function(Nt,Ht){var Gr=Ft.getActualWorkingValue(Nt);if(isNumber$1(Gr)){isNumber$1(d[Nt])||(d[Nt]=0),d[Nt]++,isNumber$1(g[Nt])||(g[Nt]=0),g[Nt]+=Gr,isNumber$1(b[Nt])||(b[Nt]=0),b[Nt]+=Math.abs(Gr),isNumber$1(rt[Nt])||(rt[Nt]=Gr),_e[Nt]=Gr,isNumber$1(j[Nt])?j[Nt]>Gr&&(j[Nt]=Gr):j[Nt]=Gr,isNumber$1($[Nt])?$[Nt]<Gr&&($[Nt]=Gr):$[Nt]=Gr,isNumber$1(ut[Nt])||(ut[Nt]=o.getFirstValue(Nt,yt)),isNumber$1(gt[Nt])||(gt[Nt]=o.getAbsoluteFirstValue(Nt)),Ft.setCalculatedValue(Nt,Gr-ut[Nt],"change"),Ft.setCalculatedValue(Nt,(Gr-ut[Nt])/ut[Nt]*100,"changePercent"),Ft.setCalculatedValue(Nt,Gr-gt[Nt],"startChange"),Ft.setCalculatedValue(Nt,(Gr-gt[Nt])/gt[Nt]*100,"startChangePercent");var hs=st[Nt];isNumber$1(hs)||(hs=Gr),Ft.setCalculatedValue(Nt,Gr-hs,"previousChange"),Ft.setCalculatedValue(Nt,(Gr-hs)/hs*100,"previousChangePercent"),st[Nt]=Gr}})},At=yt;At<Pt;At++)Ct(At);if(this.calculatePercent)for(var Tt=function(Lt){var Ft=c.getIndex(Lt);each$1(Ft.values,function(Nt){var Ht=b[Nt],Gr=Ft.getActualWorkingValue(Nt);if(isNumber$1(Gr))if(Ht>0){o.usePercentHack&&Gr==Ht&&(Ht=Ft.values[Nt].value);var hs=Gr/Ht*100;Ft.setCalculatedValue(Nt,hs,"percent")}else Ft.setCalculatedValue(Nt,0,"percent")})},At=yt;At<Pt;At++)Tt(At);if(yt>0){var kt=c.getIndex(yt-1);each$1(kt.values,function(Lt){var Ft=kt.values[Lt].value;kt.setCalculatedValue(Lt,Ft-rt[Lt],"change"),kt.setCalculatedValue(Lt,(Ft-rt[Lt])/rt[Lt]*100,"changePercent")})}var It=this.dataItem;each$1(It.values,function(Lt){It.setCalculatedValue(Lt,g[Lt],"sum"),It.setCalculatedValue(Lt,b[Lt],"absoluteSum"),It.setCalculatedValue(Lt,g[Lt]/d[Lt],"average"),It.setCalculatedValue(Lt,rt[Lt],"open"),It.setCalculatedValue(Lt,_e[Lt],"close"),It.setCalculatedValue(Lt,j[Lt],"low"),It.setCalculatedValue(Lt,$[Lt],"high"),It.setCalculatedValue(Lt,d[Lt],"count")})}},a.prototype.validate=function(){isIE()&&this.filters.clear(),each(this.axisRanges.iterator(),function(d){d.validate()}),e.prototype.validate.call(this);var i=this.bulletsContainer;if(i.fill=this.fill,i.stroke=this.stroke,i.x=this.pixelX,i.y=this.pixelY,this.bulletsContainer.children.length>0)if(this._showBullets){for(var o=0;o<this.startIndex;o++){var c=this.dataItems.getIndex(o);c&&c.bullets.each(function(d,g){g.__disabled=!0})}for(var o=this.dataItems.length-1;o>this.endIndex;o--){var c=this.dataItems.getIndex(o);c&&c.bullets.each(function(b,j){j.__disabled=!0})}}else this.bulletsContainer.children.each(function(d){d.__disabled=!0});this.updateTooltipBounds()},a.prototype.updateTooltipBounds=function(){if(this.topParent){var i=0,o=0,c=this.topParent.maxWidth,d=this.topParent.maxHeight,g={x:i,y:o,width:c,height:d};this.tooltip.setBounds(g)}},a.prototype.shouldCreateBullet=function(i,o){return!0},a.prototype.validateDataElement=function(i){var o=this;e.prototype.validateDataElement.call(this,i),this._showBullets?(this.isHidden||(this.bulletsContainer.visible=!0),this.bullets.each(function(c){var d=i.bullets.getKey(c.uid);if(o.shouldCreateBullet(i,c)){if(!d){var g=c.propertyFields.disabled,b=i.dataContext;g&&b&&b[g]===!1?(c.applyOnClones=!1,c.disabled=!1,d=c.clone(),c.disabled=!0,c.applyOnClones=!0):d=c.clone(),d.shouldClone=!1,i.addSprite(d),(!o.visible||o.isHiding)&&d.hide(0)}var j=d.dataItem;if(j!=i){j&&j.bullets.setKey(c.uid,void 0);var $=o.itemReaderText;d instanceof Bullet&&($||($="{"+d.xField+"}: {"+d.yField+"}"),d.isDynamic&&(i.events.on("workingvaluechanged",d.deepInvalidate,d,!1),o.dataItem.events.on("workingvaluechanged",d.deepInvalidate,d,!1)),d.deepInvalidate()),d.focusable&&(d.events.on("focus",function(rt){d.readerTitle=o.populateString($,d.dataItem)},void 0,!1),d.events.on("blur",function(rt){d.readerTitle=""},void 0,!1)),d.hoverable&&(d.events.on("over",function(rt){d.readerTitle=o.populateString($,d.dataItem)},void 0,!1),d.events.on("out",function(rt){d.readerTitle=""},void 0,!1))}d.parent=o.bulletsContainer,i.bullets.setKey(c.uid,d),d.maxWidth=i.itemWidth,d.maxHeight=i.itemHeight,d.__disabled=!1,o.positionBullet(d)}else d&&(d.__disabled=!0)})):this.bulletsContainer.visible=!1},a.prototype.handleDataItemWorkingValueChange=function(i,o){this.dataRangeInvalid||this.invalidateProcessedData()},Object.defineProperty(a.prototype,"ignoreMinMax",{get:function(){return this._ignoreMinMax},set:function(i){this._ignoreMinMax=i,this.invalidateDataItems()},enumerable:!0,configurable:!0}),a.prototype.createMask=function(){},a.prototype.processAxisRange=function(i){this.rangesContainer||(this.rangesContainer=this.createChild(Container),this.rangesContainer.shouldClone=!1,this.rangesContainer.isMeasured=!1);var o=i.newValue;o&&(o.contents.parent=this.rangesContainer,o.isRange=!0,o.events.on("valuechanged",this.invalidateDataItems,this,!1))},a.prototype.getAxisField=function(i){},a.prototype.showTooltipAtPosition=function(i,o){},Object.defineProperty(a.prototype,"minBulletDistance",{get:function(){return this.getPropertyValue("minBulletDistance")},set:function(i){this.setPropertyValue("minBulletDistance",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"bullets",{get:function(){return this._bullets||(this._bullets=new ListTemplate(new Bullet),this._bullets.template.virtualParent=this,this._bullets.events.on("inserted",this.processBullet,this,!1),this._bullets.events.on("removed",this.removeBullet,this,!1),this._disposers.push(new ListDisposer(this._bullets)),this._disposers.push(this._bullets.template)),this._bullets},enumerable:!0,configurable:!0}),a.prototype.createLegendMarker=function(i){},Object.defineProperty(a.prototype,"hiddenInLegend",{get:function(){return this.getPropertyValue("hiddenInLegend")},set:function(i){this.setPropertyValue("hiddenInLegend",i)&&this.chart&&this.chart.feedLegend()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"name",{get:function(){return this.getPropertyValue("name")},set:function(i){this.setPropertyValue("name",i);var o=this.legendDataItem;o&&(o.component.invalidate(),o.component.invalidateRawData()),this.readerTitle=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"itemReaderText",{get:function(){var i=this._itemReaderText;return i||(this.tooltipText?i=plainText(this.tooltipText):this.tooltipHTML&&(i=plainText(this.tooltipHTML))),this._adapterO?this._adapterO.apply("itemReaderText",i):i},set:function(i){this._itemReaderText=i,this._itemReaderTextChanged=!0},enumerable:!0,configurable:!0}),a.prototype.itemsFocusable=function(){return!(this.dataItems.length>=this.skipFocusThreshold)},Object.defineProperty(a.prototype,"legendDataItem",{get:function(){return this._legendDataItem},set:function(i){this._legendDataItem=i,this._legendDataItem.itemContainer.deepInvalidate()},enumerable:!0,configurable:!0}),a.prototype.updateLegendValue=function(i,o){if(this.legendDataItem){var c=this.legendSettings,d=this.legendDataItem,g=d.label,b=d.valueLabel;i&&!i.isDisposed()||o?(b&&(c.itemValueText&&(b.text=c.itemValueText),b.dataItem=i),g&&(c.itemLabelText&&(g.text=c.itemLabelText),g.dataItem=i)):(g&&((c.labelText||c.itemLabelText!=null)&&(g.text=c.labelText),g.dataItem=this.dataItem),b&&((c.valueText||c.itemValueText!=null)&&(b.text=c.valueText),b.dataItem=this.dataItem))}},a.prototype.copyFrom=function(i){this.bullets.copyFrom(i.bullets),this.bulletsContainer.copyFrom(i.bulletsContainer),this.calculatePercent=i.calculatePercent,this.usePercentHack=i.usePercentHack,this.simplifiedProcessing=i.simplifiedProcessing,e.prototype.copyFrom.call(this,i)},a.prototype.raiseCriticalError=function(i){this._chart&&this._chart.modal&&(this._chart.modal.content=this._chart.adapter.apply("criticalError",i).message,this._chart.modal.closable=!1,options.suppressErrors||this._chart.modal.open(),this._chart.disabled=!0),options.verbose&&console.log(i)},a.prototype.applyFilters=function(){var i=this;e.prototype.applyFilters.call(this),this.bulletsContainer.filters.clear(),each(this.filters.iterator(),function(o){i.bulletsContainer.filters.push(o.clone())})},Object.defineProperty(a.prototype,"heatRules",{get:function(){var i=this;return this._heatRules||(this._heatRules=new List,this._heatRules.events.on("inserted",function(o){var c=o.newValue,d=c.target;if(d){var g=c.dataField;hasValue(g)||(g="value");var b=i.dataItem,j=c.property,$=toNumber(c.minValue),rt=toNumber(c.maxValue);!isNumber$1($)&&!isNumber$1(rt)&&i.dataItem.events.on("calculatedvaluechanged",function(_e){_e.property==g&&each(i.dataItems.iterator(),function(st){var ut=!1;each$2(st.sprites,function(gt){if(gt.clonedFrom==d){var yt=gt;yt[j]=yt[j],ut=!0}}),ut||each$2(st.sprites,function(gt){gt instanceof Container&&each(gt.children.iterator(),function(yt){if(yt.className==d.className){var Pt=yt;Pt[j]=Pt[j]}else yt instanceof Container&&yt.deepInvalidate()})})})}),i.dataItems.template.events.on("workingvaluechanged",function(_e){if(_e.property==g){var st=_e.target,ut=!1;each$2(st.sprites,function(gt){if(gt.clonedFrom==d){var yt=gt;yt[j]=yt[j],ut=!0}}),ut||each$2(st.sprites,function(gt){gt instanceof Container&&each(gt.children.iterator(),function(yt){if(yt.className==d.className){var Pt=yt;Pt[j]=Pt[j]}else yt instanceof Container&&yt.deepInvalidate()})})}}),d.adapter.add(j,function(_e,st,ut){var gt=toNumber(c.minValue),yt=toNumber(c.maxValue),Pt=c.min,wt=c.max;if(st instanceof Sprite){var Ct=st,At=Ct.propertyFields[ut];if(At&&st.dataItem){var Tt=st.dataItem.dataContext;if(Tt&&hasValue(Tt[At]))return _e}}var kt=st.dataItem;if(isNumber$1(gt)||(gt=b.values[g].low),isNumber$1(yt)||(yt=b.values[g].high),kt){var It=kt.values[g];if(It){var Lt=kt.getActualWorkingValue(g);if(hasValue(Pt)&&hasValue(wt)&&isNumber$1(gt)&&isNumber$1(yt)&&isNumber$1(Lt)){var Ft=void 0;if(c.logarithmic?Ft=(Math.log(Lt)*Math.LOG10E-Math.log(gt)*Math.LOG10E)/(Math.log(yt)*Math.LOG10E-Math.log(gt)*Math.LOG10E):Ft=(Lt-gt)/(yt-gt),isNumber$1(Lt)&&(!isNumber$1(Ft)||Math.abs(Ft)==1/0)&&(Ft=.5),isNumber$1(Pt))return Pt+(wt-Pt)*Ft;if(Pt instanceof Color)return new Color(interpolate(Pt.rgb,wt.rgb,Ft))}}}return _e})}})),this._heatRules},enumerable:!0,configurable:!0}),a.prototype.processConfig=function(i){var o;if(i){if(hasValue(i.bullets)&&isArray$1(i.bullets))for(var c=0,d=i.bullets.length;c<d;c++){var g=i.bullets[c];hasValue(g.type)||(g.type="Bullet")}hasValue(i.heatRules)&&isArray$1(i.heatRules)&&(o=i.heatRules,delete i.heatRules)}if(e.prototype.processConfig.call(this,i),o){for(var c=0,d=o.length;c<d;c++){var b=o[c],j=this;if(hasValue(b.target)&&isString$1(b.target))if(this.map.hasKey(b.target))j=this.map.getKey(b.target);else for(var $=b.target.split("."),rt=0;rt<$.length;rt++)if(j instanceof List){var _e=j.getIndex(toNumber($[rt]));_e?j=_e:j=j[$[rt]]}else{var st=$[rt].match(/^(.*)\[([0-9]+)\]/);st?j[st[1]]instanceof List?j=j[st[1]].getIndex(toNumber(st[2])):j=j[st[1]][toNumber(st[2])]:j=j[$[rt]]}b.target=j,hasValue(b.min)&&(b.min=this.maybeColorOrPercent(b.min)),hasValue(b.max)&&(b.max=this.maybeColorOrPercent(b.max))}e.prototype.processConfig.call(this,{heatRules:o})}},a.prototype.configOrder=function(i,o){return i==o?0:i=="heatRules"?1:o=="heatRules"?-1:e.prototype.configOrder.call(this,i,o)},a.prototype.setVisibility=function(i){e.prototype.setVisibility.call(this,i),this.bulletsContainer.visible=i},a}(Component);registry.registeredClasses.Series=Series;registry.registeredClasses.SeriesDataItem=SeriesDataItem;var SerialChartDataItem=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="SerialChartDataItem",i.applyTheme(),i}return a}(ChartDataItem),SerialChart=function(e){__extends(a,e);function a(){var i=e.call(this)||this;i._exitDP={},i.className="SerialChart",i.colors=new ColorSet,i._usesData=!1;var o=i.chartContainer.createChild(Container);o.shouldClone=!1,o.width=percent(100),o.height=percent(100),o.isMeasured=!1,o.layout="none",o.zIndex=2,i.seriesContainer=o;var c=i.chartContainer.createChild(Container);return c.shouldClone=!1,c.width=percent(100),c.height=percent(100),c.isMeasured=!1,c.zIndex=3,c.layout="none",i.bulletsContainer=c,i.applyTheme(),i}return a.prototype.dispose=function(){e.prototype.dispose.call(this),this.colors&&this.colors.dispose(),this.patterns&&this.patterns.dispose()},a.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("Serial chart"))},Object.defineProperty(a.prototype,"series",{get:function(){return this._series||(this._series=new ListTemplate(this.createSeries()),this._series.events.on("inserted",this.handleSeriesAdded,this,!1),this._series.events.on("removed",this.handleSeriesRemoved,this,!1),this._disposers.push(new ListDisposer(this._series,!1)),this._disposers.push(this._series.template)),this._series},enumerable:!0,configurable:!0}),a.prototype.handleSeriesRemoved=function(i){var o=i.oldValue;this.dataUsers.removeValue(o),this.dataUsers.each(function($){$.invalidateDataItems()}),this._exitDP[o.uid]&&(this._exitDP[o.uid].dispose(),delete this._exitDP[o.uid]),o.autoDispose?o.dispose():(o.parent=void 0,o.bulletsContainer.parent=void 0);var c=this.legend;if(c){for(var d=this.legend.dataItems,g=d.length-1;g>=0;g--){var b=d.getIndex(g);b&&b.dataContext==o&&c.dataItems.remove(b)}for(var g=c.data.length-1;g>=0;g--){var j=c.data[g];j&&j==o&&remove(c.data,j)}}},a.prototype.handleSeriesAdded=function(i){var o=this,c=i.newValue;c.isDisposed()||(c.chart=this,c.parent=this.seriesContainer,c.bulletsContainer.parent=this.bulletsContainer,this._dataUsers.moveValue(c),c.addDisposer(new Disposer(function(){o.dataUsers.removeValue(c)})),this.handleSeriesAdded2(c),this.handleLegendSeriesAdded(c))},a.prototype.handleLegendSeriesAdded=function(i){i.hiddenInLegend||this.legend&&this.legend.addData(i)},a.prototype.handleSeriesAdded2=function(i){var o=this;this.dataInvalid||(this._exitDP[i.uid]=registry.events.once("exitframe",function(){(!i.data||i.data.length==0)&&(i.data=o.data,i.showOnInit&&(i.reinit(),i.setPropertyValue("showOnInit",!1),i.showOnInit=!0),i.isDisposed()||i.events.once("datavalidated",function(){i.data==o.data&&(i._data=[])}))}),this._disposers.push(this._exitDP[i.uid]))},a.prototype.feedLegend=function(){var i=this.legend;if(i){var o=[];each(this.series.iterator(),function(c){c.hiddenInLegend||o.push(c)}),i.dataFields.name="name",i.data=o}},a.prototype.createSeries=function(){return new Series},Object.defineProperty(a.prototype,"colors",{get:function(){return this.getPropertyValue("colors")},set:function(i){this.setPropertyValue("colors",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"patterns",{get:function(){return this.getPropertyValue("patterns")},set:function(i){this.setPropertyValue("patterns",i,!0)},enumerable:!0,configurable:!0}),a.prototype.copyFrom=function(i){e.prototype.copyFrom.call(this,i),this.series.copyFrom(i.series)},a.prototype.appear=function(){e.prototype.appear.call(this),this.series.each(function(i){i.showOnInit&&i.inited&&i.appear()})},a}(Chart);registry.registeredClasses.SerialChart=SerialChart;var AxisBreak=function(e){__extends(a,e);function a(){var i=e.call(this)||this;i._axis=new MutableValueDisposer,i.dataItems=new List,i.className="AxisBreak",i.breakSize=.01,i.marginLeft=-5,i.marginRight=-5,i.marginTop=-5,i.marginBottom=-5;var o=new InterfaceColorSet,c=new WavedLine;c.fill=o.getFor("background"),c.stroke=color(),c.fillOpacity=.9,c.zIndex=0,i._fillShape=c;var d=new WavedLine;d.fill=color(),d.stroke=o.getFor("grid"),d.strokeOpacity=.3,d.zIndex=1,i._startLine=d;var g=new WavedLine;return g.fill=color(),g.stroke=color("#000000"),g.strokeOpacity=.3,g.zIndex=2,i._endLine=g,i._disposers.push(i._axis),i.applyTheme(),i}return a.prototype.dispose=function(){e.prototype.dispose.call(this),this._fillShape&&this._fillShape.dispose(),this._startLine&&this._startLine.dispose(),this._endLine&&this._endLine.dispose()},Object.defineProperty(a.prototype,"startLine",{get:function(){return this._startLine},set:function(i){this._startLine&&this._startLine.dispose(),this._startLine=i,this.addBreakSprite(i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"endLine",{get:function(){return this._endLine},set:function(i){this._endLine&&this._endLine.dispose(),this._endLine=i,this.addBreakSprite(i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"fillShape",{get:function(){return this._fillShape},set:function(i){this._fillShape&&this._fillShape.dispose(),this._fillShape=i,this.addBreakSprite(i)},enumerable:!0,configurable:!0}),a.prototype.addBreakSprite=function(i){i.parent=this,i.isMeasured=!1,this._disposers.push(i)},Object.defineProperty(a.prototype,"axis",{get:function(){return this._axis.get()},set:function(i){if(this._axis.get()!==i){this._axis.set(i,i.renderer.gridContainer.events.on("transformed",this.invalidate,this,!1)),i.renderer.createBreakSprites(this);var o=i.axisBreaks.template;this.startLine.copyFrom(o.startLine),this.endLine.copyFrom(o.endLine),this.fillShape.copyFrom(o.fillShape)}},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"breakSize",{get:function(){return this.getPropertyValue("breakSize")},set:function(i){this.setPropertyValue("breakSize",i)&&this.axis&&(this.axis.invalidate(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"startPoint",{get:function(){var i=this.axis.renderer;if(i)return i.positionToPoint(this.startPosition)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"endPoint",{get:function(){var i=this.axis.renderer;if(i)return i.positionToPoint(this.endPosition)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"startPosition",{get:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"endPosition",{get:function(){},enumerable:!0,configurable:!0}),a.prototype.draw=function(){if(e.prototype.draw.call(this),this.axis){var i=this.axis.renderer;i.updateBreakElement(this)}},Object.defineProperty(a.prototype,"startValue",{get:function(){return this.getPropertyValue("startValue")},set:function(i){this.setPropertyValue("startValue",i)&&this.axis&&(this.axis.invalidate(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"endValue",{get:function(){return this.getPropertyValue("endValue")},set:function(i){this.setPropertyValue("endValue",i)&&this.axis&&(this.axis.invalidate(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),a}(Container);registry.registeredClasses.AxisBreak=AxisBreak;var AxisDataItem=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="AxisDataItem",i.applyTheme(),i}return Object.defineProperty(a.prototype,"grid",{get:function(){if(!this._grid){var i=this.component;if(i){var o=void 0,c;if(this.isRange){if(o=i.axisRanges.template.grid,o.disabled)return;c=o.clone()}else{if(o=i.renderer.grid.template,o.disabled)return;c=i.renderer.grid.create(),this._disposers.push(new Disposer(function(){i.renderer.grid.removeValue(c)}))}this.grid=c,c.shouldClone=!1,this._disposers.push(c),c.axis=this.component}}return this._grid},set:function(i){this._grid&&this._grid!=i&&(remove(this.sprites,this._grid),this._grid.dataItem=void 0),i&&(i.dataItem&&i.dataItem!=this&&(remove(i.dataItem.sprites,i),i.dataItem.grid=void 0),this.addSprite(i)),this._grid=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"tick",{get:function(){if(!this._tick){var i=this.component;if(i){var o=void 0,c;if(this.isRange){if(o=i.axisRanges.template.tick,o.disabled)return;c=o.clone()}else{if(o=i.renderer.ticks.template,o.disabled)return;c=i.renderer.ticks.create(),this._disposers.push(new Disposer(function(){i.renderer.ticks.removeValue(c)}))}this.tick=c,c.axis=this.component,c.shouldClone=!1,this._disposers.push(c)}}return this._tick},set:function(i){this._tick&&this._tick!=i&&(remove(this.sprites,this._tick),this._tick.dataItem=void 0),i&&(i.dataItem&&i.dataItem!=this&&(remove(i.dataItem.sprites,i),i.dataItem.tick=void 0),this.addSprite(i)),this._tick=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"label",{get:function(){if(!this._label){var i=this.component;if(i){var o=void 0,c;if(this.isRange){if(o=i.axisRanges.template.label,o.disabled)return;c=o.clone()}else{if(o=i.renderer.labels.template,o.disabled)return;c=i.renderer.labels.create(),this._disposers.push(new Disposer(function(){i.renderer.labels.removeValue(c)}))}this._disposers.push(c),this.label=c,c.shouldClone=!1,c.axis=this.component,c.virtualParent=i}}return this._label},set:function(i){this._label&&this._label!=i&&(remove(this.sprites,this._label),this._label.dataItem=void 0),i&&(i.dataItem&&i.dataItem!=this&&(remove(i.dataItem.sprites,i),i.dataItem.label=void 0),this.addSprite(i)),this._label=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"axisFill",{get:function(){if(!this._axisFill){var i=this.component;if(i){var o=void 0,c;if(this.isRange){if(o=i.axisRanges.template.axisFill,!this.isTemplate&&o.disabled)return;c=o.clone()}else{if(o=i.renderer.axisFills.template,o.disabled)return;c=i.renderer.axisFills.create(),this._disposers.push(new Disposer(function(){i.renderer.axisFills.removeValue(c)}))}this.axisFill=c,c.shouldClone=!1,this._disposers.push(c)}}return this._axisFill},set:function(i){this._axisFill&&this._axisFill!=i&&(remove(this.sprites,this._axisFill),this._axisFill.dataItem=void 0),i&&(i.dataItem&&i.dataItem!=this&&(remove(i.dataItem.sprites,i),i.dataItem.axisFill=void 0),i.axis=this.component,this.addSprite(i)),this._axisFill=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"text",{get:function(){return this._text},set:function(i){this._text=i,this._label&&(this._label.text=i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"mask",{get:function(){return this._mask},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"contents",{get:function(){if(!this._contents){var i=new Container;this.addSprite(i),i.isMeasured=!1,this._contents=i;var o=this.component;if(o){var c=o.renderer.createFill(this.component);c.disabled=!1,c.axis=o,this.addSprite(c),this._mask=c,i.mask=c}}return this._contents},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"axisBreak",{get:function(){return this._axisBreak},set:function(i){this._axisBreak&&this._axisBreak.dataItems.removeValue(this),i&&i.dataItems.push(this),this._axisBreak=i},enumerable:!0,configurable:!0}),a.prototype.validate=function(){this.component&&this.component.validateDataElement(this)},a.prototype.appendChildren=function(){this.component&&this.component.appendDataItem(this)},a.prototype.hasProperty=function(i){return i=="component"?!0:e.prototype.hasProperty.call(this,i)},a.prototype.copyFrom=function(i){e.prototype.copyFrom.call(this,i),this.text=i.text,i.bullet&&(this.bullet=i.bullet.clone()),this.minPosition=i.minPosition,this.maxPosition=i.maxPosition},a.prototype.setVisibility=function(i,o){e.prototype.setVisibility.call(this,i,o),this._contents&&(this._contents.visible=i)},Object.defineProperty(a.prototype,"bullet",{get:function(){return this._bullet},set:function(i){this._bullet&&this._bullet!=i&&(remove(this.sprites,this._bullet),this._bullet.dataItem=void 0),this._bullet=i,i&&this.addSprite(i)},enumerable:!0,configurable:!0}),a}(DataItem),AxisItemLocation;(function(e){e[e.Start=0]="Start",e[e.Middle=.5]="Middle",e[e.End=1]="End"})(AxisItemLocation||(AxisItemLocation={}));var Axis=function(e){__extends(a,e);function a(){var i=e.call(this)||this;if(i._gridCount=10,i._series=new List,i.autoDispose=!0,i._axisItemCount=0,i.constructor===a)throw new Error("'Axis' cannot be instantiated directly. Please use a specific axis type.");i.hideTooltipWhileZooming=!0,i.minWidth=1e-4,i.minHeight=1e-4,i.className="Axis",i.shouldClone=!1,i.setPropertyValue("cursorTooltipEnabled",!0),i.toggleZoomOutButton=!0,i.zoomable=!0;var o=new InterfaceColorSet;i.title=new Label,i.title.shouldClone=!1,i._disposers.push(i.title),i.setPropertyValue("startLocation",0),i.setPropertyValue("endLocation",1),i._dataItemsIterator=new ListIterator(i.dataItems,function(){return i.dataItems.create()}),i._dataItemsIterator.createNewItems=!0;var c=new Tooltip;i._disposers.push(c),c.label.padding(5,10,5,10),c.background.pointerLength=5,c.fitPointerToBounds=!0,c.background.filters.clear(),c.virtualParent=i;var d=c.background;return d.cornerRadius=0,d.fill=o.getFor("alternativeBackground"),d.stroke=d.fill,d.strokeWidth=1,d.fillOpacity=1,c.label.fill=o.getFor("alternativeText"),i.tooltip=c,i.readerHidden=!0,i.events.on("rangechangestarted",function(){i.series.each(function(g){g.hideTooltipWhileZooming&&(g.tooltip.hide(),g.tooltip.preventShow=!0)}),i.hideTooltipWhileZooming&&(i.tooltip.hide(),i.tooltip.preventShow=!0)},void 0,!1),i.events.on("rangechangeended",function(){i.series.each(function(g){g.hideTooltipWhileZooming&&(g.tooltip.hide(),g.tooltip.preventShow=!1)}),i.hideTooltipWhileZooming&&(i.tooltip.hide(),i.tooltip.preventShow=!1)},void 0,!1),i.applyTheme(),i}return a.prototype.fillRule=function(i,o){isNumber$1(o)||(o=i.index),o/2==Math.round(o/2)?(i.axisFill.__disabled=!0,i.axisFill.opacity=0):(i.axisFill.opacity=1,i.axisFill.__disabled=!1)},a.prototype.createDataItem=function(){return new AxisDataItem},a.prototype.invalidateLayout=function(){e.prototype.invalidateLayout.call(this),each(this.series.iterator(),function(i){i.invalidateLayout()})},a.prototype.invalidateSeries=function(){each(this.series.iterator(),function(i){i.invalidate()})},a.prototype.validateDataElements=function(){this._axisItemCount=0,this.ghostLabel&&(this.renderer.updateLabelElement(this.ghostLabel,this.start,this.end),this.ghostLabel.validate())},a.prototype.updateGridCount=function(){if(this.renderer){var i=this.axisLength/this.renderer.minGridDistance;i!=this._gridCount&&(this._gridCount=i,this.clearCache())}},a.prototype.validateLayout=function(){this.axisFullLength=this.axisLength/(this.end-this.start),e.prototype.validateLayout.call(this),this.updateGridCount();var i=this.renderer;i&&(i.updateAxisLine(),i.updateTooltip(),i.updateBaseGridElement()),this._prevLength!=this.axisLength&&(this.dispatchImmediately("lengthchanged"),this._prevLength=this.axisLength)},a.prototype.initRenderer=function(){},a.prototype.appendDataItem=function(i){var o=this.renderer,c=i.tick;c&&(c.above?c.parent=o.bulletsContainer:c.parent=o.gridContainer),i.label&&(i.label.parent=o);var d=i.axisFill;d&&(d.above?d.parent=o.bulletsContainer:d.parent=o.gridContainer);var g=i.grid;g&&(g.above?g.parent=o.bulletsContainer:g.parent=o.gridContainer),i.bullet&&(i.bullet.parent=o.bulletsContainer)},a.prototype.validate=function(){e.prototype.validate.call(this),this.validateLayout(),this.renderer.updateGridContainer()},a.prototype.validateAxisRanges=function(){var i=this;each(this.axisRanges.iterator(),function(o){i.appendDataItem(o),i.validateDataElement(o),o.grid&&o.grid.validate(),o.tick&&o.tick.validate(),o.axisFill&&o.axisFill.validate(),o.label&&o.label.validate()})},a.prototype.validateBreaks=function(){this._axisBreaks&&each(this._axisBreaks.iterator(),function(i){i.invalidate()})},a.prototype.processBreak=function(i){var o=i.newValue;o.parent=this.renderer.breakContainer,o.axis=this},a.prototype.registerSeries=function(i){var o=this;return this.series.moveValue(i),new MultiDisposer([new Disposer(function(){o.series.removeValue(i)}),this.events.on("lengthchanged",i.invalidate,i,!1),this.events.on("lengthchanged",i.createMask,i,!1),this.events.on("startchanged",i.invalidate,i,!1),this.events.on("endchanged",i.invalidate,i,!1)])},Object.defineProperty(a.prototype,"renderer",{get:function(){return this._renderer},set:function(i){if(i!=this._renderer){this._renderer=i,i.chart=this.chart,i.axis=this,i.parent=this,this.title.parent=this,this.initRenderer(),this._disposers.push(i.gridContainer.events.on("maxsizechanged",this.invalidate,this,!1));var o=this.renderer.labels.create();this._disposers.push(o),o.dataItem=this.dataItems.template.clone(),o.text="L",o.parent=this.renderer,o.shouldClone=!1,o.fillOpacity=0,o.opacity=0,o.strokeOpacity=0,o.interactionsEnabled=!1,o.validate(),this.ghostLabel=o,this.events.on("beforedatavalidated",function(){o.text="L"},void 0,!1)}},enumerable:!0,configurable:!0}),a.prototype.positionToAngle=function(i){return this.renderer.positionToAngle(i)},a.prototype.pointToPosition=function(i){return this.renderer.pointToPosition(i)},a.prototype.positionToCoordinate=function(i){return this.renderer.positionToCoordinate(i)},a.prototype.getAnyRangePath=function(i,o){return this.renderer.getPositionRangePath(i,o)},a.prototype.anyToPosition=function(i){return 0},a.prototype.anyToPoint=function(i){return{x:0,y:0,angle:0}},a.prototype.getPositionRangePath=function(i,o){return this.renderer?this.renderer.getPositionRangePath(i,o):""},Object.defineProperty(a.prototype,"axisLength",{get:function(){return this.renderer?this.renderer.axisLength:0},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"cursorTooltipEnabled",{get:function(){return this.getPropertyValue("cursorTooltipEnabled")},set:function(i){this.setPropertyValue("cursorTooltipEnabled",i)&&(i&&this.renderer?this.renderer.updateTooltip():this.tooltip&&this.tooltip.hide(0))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"toggleZoomOutButton",{get:function(){return this.getPropertyValue("toggleZoomOutButton")},set:function(i){this.setPropertyValue("toggleZoomOutButton",i)},enumerable:!0,configurable:!0}),a.prototype.hideTooltip=function(i){e.prototype.hideTooltip.call(this,i),this._tooltipPosition=void 0},a.prototype.showTooltipAtPosition=function(i,o){var c=this._tooltip;if(!c||this.dataItems.length<=0)this._tooltipPosition=void 0;else{if(o||(i=this.toAxisPosition(i)),!isNumber$1(i)||i<this.start||i>this.end){c.hide(0),this._tooltipPosition=void 0;return}var d=this.renderer;c.parent||(c.parent=this.tooltipContainer);var g=d.tooltipLocation,b=this.getCellStartPosition(i),j=this.getCellEndPosition(i);if(this.tooltipPosition=="fixed"&&(i=b+(j-b)*g),i=fitToRange(i,this.start,this.end),this._tooltipPosition!=i){this._tooltipPosition=i;var $=d.tooltipLocation2,rt=d.positionToPoint(b,$),_e=d.positionToPoint(j,$);this.currentItemStartPoint=rt,this.currentItemEndPoint=_e,d.fullWidthTooltip&&(c.width=_e.x-rt.x,c.height=_e.y-rt.y);var st=d.positionToPoint(i,$),ut=spritePointToSvg(st,this.renderer.line);c.text=this.getTooltipText(i),c.text&&(c.delayedPointTo(ut),c.show())}(!this.cursorTooltipEnabled||this.tooltip.disabled)&&c.hide(0)}},a.prototype.toAxisPosition=function(i){if(i=this.renderer.toAxisPosition(i),i!=null)return i=i*(this.end-this.start),this.renderer.inversed?i=this.end-i:i=this.start+i,i},a.prototype.toGlobalPosition=function(i){return this.renderer.inversed?i=this.end-i:i=i-this.start,i/(this.end-this.start)},a.prototype.getTooltipText=function(i){},a.prototype.updateTooltip=function(i,o){var c=this._tooltip;c&&(c.fixDoc=!1,c.pointerOrientation=i,c.setBounds(spriteRectToSvg(o,this.renderer.line)))},a.prototype.roundPosition=function(i,o,c){return i},a.prototype.getCellStartPosition=function(i){return i},a.prototype.getCellEndPosition=function(i){return i},Object.defineProperty(a.prototype,"axisRanges",{get:function(){if(!this._axisRanges){var i=this.createDataItem();i.isRange=!0,i.axisFill=this.renderer.axisFills.template.clone(),i.grid=this.renderer.grid.template.clone(),i.tick=this.renderer.ticks.template.clone(),i.label=this.renderer.labels.template.clone(),i.isTemplate=!0,i.component=this,i.axisFill.disabled=!1,i.tick.disabled=!1,i.grid.disabled=!1,i.label.disabled=!1,this._axisRanges=new ListTemplate(i),this._axisRanges.events.on("inserted",this.processAxisRange,this,!1),this._disposers.push(new ListDisposer(this._axisRanges)),this._disposers.push(this._axisRanges.template)}return this._axisRanges},enumerable:!0,configurable:!0}),a.prototype.processAxisRange=function(i){var o=i.newValue;o.component=this,o.isRange=!0},Object.defineProperty(a.prototype,"axisBreaks",{get:function(){return this._axisBreaks||(this._axisBreaks=new SortedListTemplate(this.createAxisBreak(),function(i,o){return order(i.adjustedStartValue,o.adjustedStartValue)}),this._axisBreaks.events.on("inserted",this.processBreak,this,!1),this._disposers.push(new ListDisposer(this._axisBreaks)),this._disposers.push(this._axisBreaks.template)),this._axisBreaks},enumerable:!0,configurable:!0}),a.prototype.createAxisBreak=function(){return new AxisBreak},Object.defineProperty(a.prototype,"series",{get:function(){return this._series||(this._series=new List),this._series},enumerable:!0,configurable:!0}),a.prototype.processSeriesDataItems=function(){},a.prototype.processSeriesDataItem=function(i,o){},a.prototype.postProcessSeriesDataItems=function(i){},a.prototype.postProcessSeriesDataItem=function(i){},a.prototype.updateAxisBySeries=function(){},a.prototype.hideUnusedDataItems=function(){var i=this,o=this._dataItemsIterator;o.createNewItems=!1,each(o.iterator(),function(c){i.validateDataElement(c),c.__disabled=!0}),o.clear(),o.createNewItems=!0},a.prototype.getSeriesDataItem=function(i,o,c){},a.prototype.getAngle=function(i,o,c,d,g){},a.prototype.getX=function(i,o,c,d,g){},a.prototype.getPositionX=function(i,o,c,d,g){},a.prototype.getY=function(i,o,c,d,g){},a.prototype.getPositionY=function(i,o,c,d,g){},Object.defineProperty(a.prototype,"basePoint",{get:function(){return{x:0,y:0}},enumerable:!0,configurable:!0}),a.prototype.dataChangeUpdate=function(){},a.prototype.seriesDataChangeUpdate=function(i){},a.prototype.adjustDifference=function(i,o){var c=o-i;if(isNumber$1(c))return this._axisBreaks&&eachContinue(this._axisBreaks.iterator(),function(d){var g=d.adjustedStartValue,b=d.adjustedEndValue;if(isNumber$1(g)&&isNumber$1(b)){if(g>o)return!1;if(b>=i&&isNumber$1(g)&&isNumber$1(b)){var j=d.breakSize,$=intersection({start:g,end:b},{start:i,end:o});$&&(c-=($.end-$.start)*(1-j))}return!0}}),c},a.prototype.isInBreak=function(i){if(this._axisBreaks)return find(this._axisBreaks.iterator(),function(o){return i>=o.adjustedStartValue&&i<=o.adjustedEndValue})},a.prototype.fixAxisBreaks=function(){var i=this;if(this._axisBreaks){var o=this._axisBreaks;if(o.length>0){each$2(toArray$1(o.iterator()),function(g){var b=min$1(g.startValue,g.endValue),j=max$1(g.startValue,g.endValue);g.adjustedStartValue=b,g.adjustedEndValue=j,i._axisBreaks.update(g)});var c=o.first,d=Math.min(c.startValue,c.endValue);each(o.iterator(),function(g){var b=g.adjustedStartValue,j=g.adjustedEndValue;b<d&&(b=d,j<d&&(j=d)),g.adjustedStartValue=b,g.adjustedEndValue=j})}}},Object.defineProperty(a.prototype,"startIndex",{get:function(){return 0},set:function(i){},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"endIndex",{get:function(){return this.dataItems.length},set:function(i){},enumerable:!0,configurable:!0}),a.prototype.getPositionLabel=function(i){return Math.round(i*100)+"%x"},Object.defineProperty(a.prototype,"chart",{get:function(){return this._chart},set:function(i){this._chart=i},enumerable:!0,configurable:!0}),a.prototype.createSeriesRange=function(i){var o=this.axisRanges.create();return o.component=this,o.axisFill=this.renderer.axisFills.template.clone(),o.axisFill.disabled=!1,o.axisFill.fillOpacity=0,o.grid=this.renderer.grid.template.clone(),o.grid.disabled=!0,o.tick=this.renderer.ticks.template.clone(),o.tick.disabled=!0,o.label=this.renderer.labels.template.clone(),o.label.disabled=!0,o.addDisposer(new Disposer(function(){i.axisRanges.removeValue(o)})),i.axisRanges.push(o),o},a.prototype.copyFrom=function(i){e.prototype.copyFrom.call(this,i),this.renderer?this.renderer.copyFrom(i.renderer):i.renderer&&(this.renderer=i.renderer.clone(),this._disposers.push(this.renderer)),i.title&&(this.title?this.title.copyFrom(i.title):(this.title=i.title.clone(),this.title.parent=this),this._disposers.push(this.title))},a.prototype.resetIterators=function(){this._dataItemsIterator.reset()},a.prototype.processConfig=function(i){if(i&&hasValue(i.axisRanges)&&isArray$1(i.axisRanges))for(var o=0,c=i.axisRanges.length;o<c;o++){var d=i.axisRanges[o];hasValue(d.series)&&isString$1(d.series)&&this.map.hasKey(d.series)&&(i.axisRanges[o]=this.createSeriesRange(this.map.getKey(d.series)),delete d.series,i.axisRanges[o].config=d)}e.prototype.processConfig.call(this,i)},a.prototype.configOrder=function(i,o){return i==o?0:i=="title"?1:o=="title"||i=="component"?-1:o=="component"?1:e.prototype.configOrder.call(this,i,o)},Object.defineProperty(a.prototype,"startLocation",{get:function(){return this.getPropertyValue("startLocation")},set:function(i){this.setPropertyValue("startLocation",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"endLocation",{get:function(){return this.getPropertyValue("endLocation")},set:function(i){this.setPropertyValue("endLocation",i,!0)},enumerable:!0,configurable:!0}),a.prototype.setDisabled=function(i){var o=e.prototype.setDisabled.call(this,i);return this.renderer&&(this.renderer.gridContainer.disabled=i),o},Object.defineProperty(a.prototype,"title",{get:function(){return this._title},set:function(i){this._title&&this._title!=i&&this._title.dispose(),i&&(this._title=i,i.parent=this,i.shouldClone=!1)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"hideTooltipWhileZooming",{get:function(){return this.getPropertyValue("hideTooltipWhileZooming")},set:function(i){this.setPropertyValue("hideTooltipWhileZooming",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"zoomable",{get:function(){return this.getPropertyValue("zoomable")},set:function(i){this.setPropertyValue("zoomable",i)},enumerable:!0,configurable:!0}),a}(Component);registry.registeredClasses.Axis=Axis;registry.registeredClasses.AxisDataItem=AxisDataItem;defaultRules.push({relevant:ResponsiveBreakpoints.maybeXS,state:function(e,a){if(e instanceof Axis&&e.tooltip){var i=e.states.create(a);return i.properties.cursorTooltipEnabled=!1,i}return null}});var AxisLine=function(e){__extends(a,e);function a(){var i=e.call(this)||this;i.className="AxisLine",i.element=i.paper.add("path");var o=new InterfaceColorSet;return i.stroke=o.getFor("grid"),i.strokeOpacity=.15,i.pixelPerfect=!0,i.fill=color(),i.applyTheme(),i.interactionsEnabled=!1,i}return a}(Sprite);registry.registeredClasses.AxisLine=AxisLine;var AxisFill=function(e){__extends(a,e);function a(i){var o=e.call(this)||this;o.axis=i,o.element=o.paper.add("path"),o.className="AxisFill",o.isMeasured=!1,o.location=0,o.above=!1;var c=new InterfaceColorSet;return o.fill=c.getFor("alternativeBackground"),o.fillOpacity=0,o.applyTheme(),o}return a.prototype.setDisabled=function(i){var o=e.prototype.setDisabled.call(this,i);return this.axis&&this.axis.invalidateDataItems(),o},a.prototype.draw=function(){e.prototype.draw.call(this),!(this.__disabled||this.disabled)&&this.axis&&isNumber$1(this.startPosition)&&isNumber$1(this.endPosition)&&(this.fillPath=this.axis.getPositionRangePath(this.startPosition,this.endPosition),this.path=this.fillPath,this.isMeasured&&this.measure())},Object.defineProperty(a.prototype,"startPosition",{get:function(){return this.getPropertyValue("startPosition")},set:function(i){this.setPropertyValue("startPosition",i),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"endPosition",{get:function(){return this.getPropertyValue("endPosition")},set:function(i){this.setPropertyValue("endPosition",i),this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"location",{get:function(){return this.getPropertyValue("location")},set:function(i){this.setPropertyValue("location",i,!0)},enumerable:!0,configurable:!0}),a.prototype.setPath=function(i){return this.setPropertyValue("path",i)?(this.element.attr({d:i}),!0):!1},Object.defineProperty(a.prototype,"above",{get:function(){return this.getPropertyValue("above")},set:function(i){this.setPropertyValue("above",i,!0)},enumerable:!0,configurable:!0}),a}(Sprite);registry.registeredClasses.AxisFill=AxisFill;var Grid$1=function(e){__extends(a,e);function a(){var i=e.call(this)||this;i.className="Grid",i.element=i.paper.add("path"),i.location=.5,i.isMeasured=!1,i.above=!1;var o=new InterfaceColorSet;return i.stroke=o.getFor("grid"),i.pixelPerfect=!0,i.strokeOpacity=.15,i.fill=color(),i.applyTheme(),i}return Object.defineProperty(a.prototype,"location",{get:function(){return this.getPropertyValue("location")},set:function(i){this.setPropertyValue("location",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"above",{get:function(){return this.getPropertyValue("above")},set:function(i){this.setPropertyValue("above",i,!0)},enumerable:!0,configurable:!0}),a.prototype.setDisabled=function(i){var o=e.prototype.setDisabled.call(this,i);return this.axis&&this.axis.invalidateDataItems(),o},a}(Sprite);registry.registeredClasses.Grid=Grid$1;defaultRules.push({relevant:ResponsiveBreakpoints.maybeXS,state:function(e,a){if(e instanceof Grid$1){var i=e.states.create(a);return i.properties.disabled=!0,i}return null}});var AxisLabel=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="AxisLabel",i.isMeasured=!1,i.padding(10,10,10,10),i.location=.5,i.applyTheme(),i}return Object.defineProperty(a.prototype,"location",{get:function(){return this.getPropertyValue("location")},set:function(i){this.setPropertyValue("location",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"inside",{get:function(){return this.getPropertyValue("inside")},set:function(i){this.setPropertyValue("inside",i,!0)},enumerable:!0,configurable:!0}),a.prototype.setDisabled=function(i){var o=e.prototype.setDisabled.call(this,i);return this.axis&&this.axis.invalidateDataItems(),o},a}(Label);registry.registeredClasses.AxisLabel=AxisLabel;var Tick=function(e){__extends(a,e);function a(){var i=e.call(this)||this;i.className="Tick";var o=new InterfaceColorSet;return i.fillOpacity=0,i.length=6,i.strokeOpacity=.2,i.stroke=o.getFor("grid"),i.isMeasured=!1,i.nonScalingStroke=!0,i.applyTheme(),i}return Object.defineProperty(a.prototype,"length",{get:function(){return this.disabled?0:this.getPropertyValue("length")},set:function(i){this.setPropertyValue("length",i,!0)},enumerable:!0,configurable:!0}),a}(Sprite);registry.registeredClasses.Tick=Tick;var AxisTick=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="AxisTick",i.element=i.paper.add("path"),i.location=.5,i.above=!1,i.isMeasured=!1,i.pixelPerfect=!0,i.strokeOpacity=0,i.length=5,i.applyTheme(),i}return Object.defineProperty(a.prototype,"location",{get:function(){return this.getPropertyValue("location")},set:function(i){this.setPropertyValue("location",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"inside",{get:function(){return this.getPropertyValue("inside")},set:function(i){this.setPropertyValue("inside",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"above",{get:function(){return this.getPropertyValue("above")},set:function(i){this.setPropertyValue("above",i,!0)},enumerable:!0,configurable:!0}),a.prototype.setDisabled=function(i){var o=e.prototype.setDisabled.call(this,i);return this.axis&&this.axis.invalidateDataItems(),o},a}(Tick);registry.registeredClasses.AxisTick=AxisTick;var AxisRenderer=function(e){__extends(a,e);function a(){var i=e.call(this)||this;i._chart=new MutableValueDisposer,i.className="AxisRenderer",i.minGridDistance=50,i.inside=!1,i.inversed=!1,i.tooltipLocation=.5,i.fullWidthTooltip=!1,i.cellStartLocation=0,i.cellEndLocation=1,i.minLabelPosition=0,i.maxLabelPosition=1,i.shouldClone=!1;var o=i.createChild(Container);o.shouldClone=!1,o.layout="none",o.virtualParent=i,o.width=percent(100),o.height=percent(100),i.gridContainer=o,o.events.on("maxsizechanged",function(){i.inited&&i.invalidateAxisItems()},i,!1);var c=i.createChild(Container);c.shouldClone=!1,c.isMeasured=!1,c.layout="none",c.width=percent(100),c.height=percent(100),i.breakContainer=c;var d=i.createChild(Container);d.shouldClone=!1,d.isMeasured=!1,d.layout="none",d.width=percent(100),d.height=percent(100),i.bulletsContainer=d,i.line=i.createChild(AxisLine),i.line.shouldClone=!1,i.line.strokeOpacity=0;var g=i.createChild(Grid$1);g.shouldClone=!1,i.baseGrid=g;var b=i._disposers;return b.push(g),b.push(i.line),b.push(o),b.push(c),b.push(d),b.push(i._chart),i.ticks.template.disabled=!0,i.axisFills.template.disabled=!0,i.axisFills.template.interactionsEnabled=!1,i.applyTheme(),i}return Object.defineProperty(a.prototype,"axis",{get:function(){return this._axis},set:function(i){this.setAxis(i)},enumerable:!0,configurable:!0}),a.prototype.setAxis=function(i){this._axis=i,this.baseGrid.parent=i,this.line.parent=i,this.gridContainer.bind("opacity",i)},a.prototype.processRenderer=function(){this.events.on("sizechanged",this.updateTooltip,this,!1),this.events.on("positionchanged",this.updateTooltip,this,!1),this.labels.template.inside=this.inside,this.ticks.template.inside=this.inside},a.prototype.updateTooltip=function(){},Object.defineProperty(a.prototype,"axisLength",{get:function(){return 0},enumerable:!0,configurable:!0}),a.prototype.positionItem=function(i,o){i&&i.moveTo(o)},a.prototype.positionToPoint=function(i,o){return{x:0,y:0}},a.prototype.positionToAngle=function(i){return 0},a.prototype.positionToCoordinate=function(i){var o,c=this.axis,d=c.axisFullLength;return c.renderer.inversed?o=(c.end-i)*d:o=(i-c.start)*d,o},a.prototype.updateGridContainer=function(){},a.prototype.getHeight=function(){var i=this.gridContainer;return i.parent?i.parent.pixelHeight:this.gridContainer.pixelHeight||0},a.prototype.getWidth=function(){var i=this.gridContainer;return i.parent?i.parent.pixelWidth:this.gridContainer.pixelWidth||0},a.prototype.coordinateToPosition=function(i,o){var c,d=this.axis,g=d.axisFullLength;return d.renderer.inversed?c=d.end-i/g:c=i/g+d.start,round$1(c,5)},a.prototype.pointToPosition=function(i){return 0},a.prototype.getPositionRangePath=function(i,o){return""},a.prototype.invalidateAxisItems=function(){var i=this.axis;i&&i.invalidateDataItems()},a.prototype.updateGridElement=function(i,o,c){},a.prototype.updateTickElement=function(i,o,c){},a.prototype.updateBullet=function(i,o,c){},a.prototype.updateLabelElement=function(i,o,c,d){},a.prototype.updateFillElement=function(i,o,c){i.startPosition=o,i.endPosition=c},a.prototype.updateAxisLine=function(){},a.prototype.updateBaseGridElement=function(){},a.prototype.updateBreakElement=function(i){this.positionItem(i.startLine,i.startPoint),this.toggleVisibility(i.startLine,i.startPosition,0,1),this.positionItem(i.endLine,i.endPoint),this.toggleVisibility(i.endLine,i.endPosition,0,1)},Object.defineProperty(a.prototype,"minGridDistance",{get:function(){return this.getPropertyValue("minGridDistance")},set:function(i){this.setPropertyValue("minGridDistance",i)&&this.axis&&this.axis.invalidateDataItems()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"chart",{get:function(){return this._chart.get()},set:function(i){this._chart.set(i,null)},enumerable:!0,configurable:!0}),a.prototype.toggleVisibility=function(i,o,c,d){var g=this.axis,b=i.dataItem;b&&b instanceof AxisDataItem&&(isNumber$1(b.minPosition)&&(c=b.minPosition),isNumber$1(b.maxPosition)&&(d=b.maxPosition));var j=g.start+(g.end-g.start)*(c-1e-4),$=g.start+(g.end-g.start)*(d+1e-4);i.disabled||(o<j||o>$?i.__disabled=!0:i.__disabled=!1)},a.prototype.createBreakSprites=function(i){},Object.defineProperty(a.prototype,"axisFills",{get:function(){if(!this._axisFills){var i=this.createFill(this.axis);this._axisFills=new ListTemplate(i),i.applyOnClones=!0,i.events.on("enabled",this.invalidateAxisItems,this,!1),this._disposers.push(new ListDisposer(this._axisFills)),this._disposers.push(this._axisFills.template)}return this._axisFills},enumerable:!0,configurable:!0}),a.prototype.createFill=function(i){return new AxisFill(i)},Object.defineProperty(a.prototype,"grid",{get:function(){if(!this._grid){var i=this.createGrid();this._grid=new ListTemplate(i),i.applyOnClones=!0,i.events.on("enabled",this.invalidateAxisItems,this,!1),this._disposers.push(new ListDisposer(this._grid)),this._disposers.push(this._grid.template)}return this._grid},enumerable:!0,configurable:!0}),a.prototype.createGrid=function(){return new Grid$1},Object.defineProperty(a.prototype,"ticks",{get:function(){if(!this._ticks){var i=this.createTick();i.applyOnClones=!0,i.isMeasured=!1,i.events.on("enabled",this.invalidateAxisItems,this,!1),this._ticks=new ListTemplate(i),this._disposers.push(new ListDisposer(this._ticks)),this._disposers.push(this._ticks.template)}return this._ticks},enumerable:!0,configurable:!0}),a.prototype.createTick=function(){return new AxisTick},Object.defineProperty(a.prototype,"labels",{get:function(){if(!this._labels){var i=this.createLabel();this._labels=new ListTemplate(i),i.applyOnClones=!0,i.events.on("enabled",this.invalidateAxisItems,this,!1),this._disposers.push(new ListDisposer(this._labels)),this._disposers.push(this._labels.template)}return this._labels},enumerable:!0,configurable:!0}),a.prototype.createLabel=function(){return new AxisLabel},Object.defineProperty(a.prototype,"inside",{get:function(){return this.getPropertyValue("inside")},set:function(i){this.setPropertyValue("inside",i)&&this.axis&&this.axis.invalidate(),i?(this.width=0,this.height=0):(this.width=void 0,this.height=void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"opposite",{get:function(){return this.getPropertyValue("opposite")},set:function(i){this.setPropertyValue("opposite",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"fullWidthTooltip",{get:function(){return this.getPropertyValue("fullWidthTooltip")},set:function(i){this.setPropertyValue("fullWidthTooltip",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"tooltipLocation",{get:function(){return this.getPropertyValue("tooltipLocation")},set:function(i){this.setPropertyValue("tooltipLocation",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"tooltipLocation2",{get:function(){return this.getPropertyValue("tooltipLocation2")},set:function(i){this.setPropertyValue("tooltipLocation2",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"cellStartLocation",{get:function(){return this.getPropertyValue("cellStartLocation")},set:function(i){this.setPropertyValue("cellStartLocation",i)&&this.axis&&this.axis.invalidateSeries()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"cellEndLocation",{get:function(){return this.getPropertyValue("cellEndLocation")},set:function(i){this.setPropertyValue("cellEndLocation",i)&&this.axis&&this.axis.invalidateSeries()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"inversed",{get:function(){return this.getPropertyValue("inversed")},set:function(i){this.setPropertyValue("inversed",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"minLabelPosition",{get:function(){return this.getPropertyValue("minLabelPosition")},set:function(i){this.setPropertyValue("minLabelPosition",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"maxLabelPosition",{get:function(){return this.getPropertyValue("maxLabelPosition")},set:function(i){this.setPropertyValue("maxLabelPosition",i,!0)},enumerable:!0,configurable:!0}),a.prototype.copyFrom=function(i){e.prototype.copyFrom.call(this,i),this.grid.template.copyFrom(i.grid.template),this.ticks.template.copyFrom(i.ticks.template),this.labels.template.copyFrom(i.labels.template),this.axisFills.template.copyFrom(i.axisFills.template),this.line.copyFrom(i.line),this.baseGrid.copyFrom(i.baseGrid)},a.prototype.toAxisPosition=function(i){return i},a.prototype.setVisibility=function(i){e.prototype.setVisibility.call(this,i),this.bulletsContainer.visible=i},a}(Container);registry.registeredClasses.AxisRenderer=AxisRenderer;var AxisBullet=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="AxisBullet",i.location=.5,i.isMeasured=!1,i.applyTheme(),i}return Object.defineProperty(a.prototype,"location",{get:function(){return this.getPropertyValue("location")},set:function(i){this.setPropertyValue("location",i,!0)},enumerable:!0,configurable:!0}),a.prototype.setDisabled=function(i){var o=e.prototype.setDisabled.call(this,i);return this.axis&&this.axis.invalidateDataItems(),o},a}(Container);registry.registeredClasses.AxisBullet=AxisBullet;var AxisRendererY=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="AxisRendererY",i.minGridDistance=40,i.opposite=!1,i.height=percent(100),i.labels.template.verticalCenter="middle",i.applyTheme(),i}return a.prototype.setAxis=function(i){e.prototype.setAxis.call(this,i),i.layout="horizontal"},a.prototype.updateGridContainer=function(){var i=this.axis;if(i){var o=this.gridContainer;o.y=i.pixelY,o.height=i.axisLength}},a.prototype.toAxisPosition=function(i){var o=this.axis;if(o){var c=1-i,d=o.relativePositionSprite,g=o.pixelY;if(d?g=spritePointToSprite({x:0,y:this.pixelY},this.parent,d).y:d=o.parent,d){var b=g/d.innerHeight,j=o.axisLength/d.innerHeight;return 1-(c-b)/j}}return i},a.prototype.processRenderer=function(){e.prototype.processRenderer.call(this);var i=this.axis;if(i){var o=i.title;o.valign="middle",i.height instanceof Percent||(i.height=percent(100)),this.opposite?(o.rotation=90,this.line.toBack(),o.toFront()):(o.rotation=-90,o.toBack(),this.line.toFront())}},a.prototype.updateTooltip=function(){var i=this.axis;if(i){var o=2e3,c=0,d=0,g=o,b=this.axisLength;this.opposite?this.inside&&(c=-o,g=o):this.inside||(c=-o,g=o),this.axis.updateTooltip("horizontal",{x:c,y:d,width:g,height:b})}},Object.defineProperty(a.prototype,"axisLength",{get:function(){var i=this.axis;return i.measuredHeight-i.pixelPaddingTop-i.pixelPaddingBottom||0},enumerable:!0,configurable:!0}),a.prototype.positionToPoint=function(i,o){return{x:0,y:this.positionToCoordinate(i)}},a.prototype.pointToPosition=function(i){return this.coordinateToPosition(i.y,i.x)},a.prototype.coordinateToPosition=function(i,o){var c,d=this.axis,g=d.axisFullLength;return d.renderer.inversed?c=1-d.start-i/g:c=i/g+(1-d.end),round$1(c,5)},a.prototype.getPositionRangePath=function(i,o){var c=fitToRange(this.positionToCoordinate(i),0,this.axisLength),d=fitToRange(this.positionToCoordinate(o),0,this.axisLength),g=Math.abs(d-c),b=this.getWidth(),j=Math.min(c,d),$=0;return rectToPath({x:$,y:j,width:b,height:g},!0)},a.prototype.updateGridElement=function(i,o,c){o=o+(c-o)*i.location;var d=this.positionToPoint(o);i.path=moveTo({x:0,y:0})+lineTo({x:this.getWidth(),y:0}),this.positionItem(i,d),this.toggleVisibility(i,o,0,1)},a.prototype.updateTickElement=function(i,o,c){o=o+(c-o)*i.location;var d=this.positionToPoint(o),g=i.length;try{this.axis.title.measuredWidth}catch{}d.x=spritePointToSprite({x:this.line.pixelX,y:0},this.line.parent,this.gridContainer).x,this.opposite?g*=i.inside?-1:1:g*=i.inside?1:-1,i.path=moveTo({x:0,y:0})+lineTo({x:g,y:0}),this.positionItem(i,d),this.toggleVisibility(i,o,0,1)},a.prototype.updateAxisLine=function(){this.line.path=moveTo({x:0,y:0})+lineTo({x:0,y:this.axisLength})},a.prototype.updateBaseGridElement=function(){e.prototype.updateBaseGridElement.call(this);var i=this.axis,o=this.getWidth(),c=this.axisLength,d=i.basePoint.y,g=this.baseGrid;if(d<-.2||d>c+.2)g.hide(0);else{var b=spritePointToSprite({x:0,y:0},this.gridContainer,g.parent).x;g.path=moveTo({x:0,y:0})+lineTo({x:o,y:0}),g.moveTo({x:b,y:d}),g.show(0)}},a.prototype.updateLabelElement=function(i,o,c,d){hasValue(d)||(d=i.location),o=o+(c-o)*d,i.isMeasured=!i.inside;var g=this.positionToPoint(o),b,j=0,$=this.gridContainer.maxWidth;this.opposite?(i.inside?(b="right",i.align=="left"&&(j=-$,b="left"),i.align=="center"&&(j=-$/2,b="middle")):b="left",g.x=0+j):(i.inside?(b="left",i.align=="right"&&(j=$,b="right"),i.align=="center"&&(j=$/2,b="middle")):b="right",g.x=this.measuredWidth+j),i.rotation==0&&(i.horizontalCenter=b),this.positionItem(i,g),this.toggleVisibility(i,o,this.minLabelPosition,this.maxLabelPosition)},a.prototype.updateBreakElement=function(i){e.prototype.updateBreakElement.call(this,i);var o=i.startLine,c=i.endLine,d=i.fillShape,g=i.startPoint,b=i.endPoint,j=i.pixelMarginLeft,$=this.getWidth()-i.pixelMarginLeft-i.pixelMarginRight;g.y=fitToRange(g.y,-1,this.axisLength+1),b.y=fitToRange(b.y,-1,this.axisLength+1),g.y==b.y&&(g.y<0||g.y>this.axisLength)?i.fillShape.__disabled=!0:i.fillShape.__disabled=!1;var rt=Math.abs($-j);o.x=j,o.height=0,o.width=rt,c.x=j,c.height=0,c.width=rt,d.width=rt,d.height=Math.abs(b.y-g.y),d.x=j,d.y=b.y},a.prototype.createBreakSprites=function(i){i.startLine=new WavedLine,i.endLine=new WavedLine;var o=new WavedRectangle;o.setWavedSides(!0,!1,!0,!1),i.fillShape=o},a.prototype.positionToCoordinate=function(i){var o,c=this.axis,d=c.axisFullLength;return c.renderer.inversed?o=(i-c.start)*d:o=(c.end-i)*d,o},a.prototype.updateBullet=function(i,o,c){var d=.5;i instanceof AxisBullet&&(d=i.location),o=o+(c-o)*d;var g=this.positionToPoint(o);g.x=spritePointToSprite({x:this.line.pixelX,y:0},this.line.parent,this.gridContainer).x,this.positionItem(i,g),this.toggleVisibility(i,o,0,1)},a}(AxisRenderer);registry.registeredClasses.AxisRendererY=AxisRendererY;defaultRules.push({relevant:ResponsiveBreakpoints.widthS,state:function(e,a){if(e instanceof AxisRendererY){var i=e.states.create(a);return i.properties.inside=!0,i.properties.maxLabelPosition=.9,i.properties.minLabelPosition=.1,i}return null}});defaultRules.push({relevant:ResponsiveBreakpoints.widthXS,state:function(e,a){if(e instanceof AxisRendererY){var i=e.states.create(a);return i.properties.disabled=!0,i}return null}});var ValueAxisBreak=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="ValueAxisBreak",i.applyTheme(),i}return Object.defineProperty(a.prototype,"startPosition",{get:function(){if(this.axis)return this.axis.valueToPosition(this.adjustedStartValue)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"endPosition",{get:function(){if(this.axis)return this.axis.valueToPosition(this.adjustedEndValue)},enumerable:!0,configurable:!0}),a}(AxisBreak);registry.registeredClasses.ValueAxisBreak=ValueAxisBreak;var ValueAxisDataItem=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="ValueAxisDataItem",i.values.value={},i.values.endValue={},i.applyTheme(),i}return Object.defineProperty(a.prototype,"value",{get:function(){return this.values.value.value},set:function(i){this.setValue("value",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"endValue",{get:function(){return this.values.endValue.value},set:function(i){this.setValue("endValue",i)},enumerable:!0,configurable:!0}),a}(AxisDataItem),ValueAxis=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i._stepDecimalPlaces=0,i._prevStepDecimalPlaces=0,i._adjustLabelPrecision=!0,i._baseValue=0,i._adjustedStart=0,i._adjustedEnd=1,i._extremesChanged=!1,i._deltaMinMax=1,i._dsc=!1,i.calculateTotals=!1,i.className="ValueAxis",i.axisFieldName="value",i.setPropertyValue("maxZoomFactor",1e3),i.setPropertyValue("extraMin",0),i.setPropertyValue("extraMax",0),i.setPropertyValue("strictMinMax",!1),i.setPropertyValue("maxPrecision",Number.MAX_VALUE),i.setPropertyValue("adjustLabelPrecision",!0),i.setPropertyValue("extraTooltipPrecision",0),i.keepSelection=!1,i.includeRangesInMinMax=!1,i.applyTheme(),i}return a.prototype.fillRule=function(i){var o=i.value,c=i.component;i.axisFill.disabled||(round$1(o/c.step/2,5)==Math.round(o/c.step/2)?i.axisFill.__disabled=!0:i.axisFill.__disabled=!1)},a.prototype.createDataItem=function(){return new ValueAxisDataItem},a.prototype.createAxisBreak=function(){return new ValueAxisBreak},a.prototype.dataChangeUpdate=function(){this.clearCache(),this.keepSelection?(this._start!=0&&this.dispatchImmediately("startchanged"),this._end!=1&&this.dispatchImmediately("endchanged"),(this._start!=0||this._end!=1)&&this.dispatchImmediately("startendchanged")):(this._start!=0||this._end!=1)&&(this._start=0,this._end=1,this.dispatchImmediately("startendchanged")),this._maxZoomed=this._maxDefined,this._minZoomed=this._minDefined,this._maxAdjusted=this._maxDefined,this._minAdjusted=this._minDefined},a.prototype.processSeriesDataItems=function(){if(this.calculateTotals){var i=this.series.getIndex(0),o=i.startIndex;if(i.dataItems.length>0){o>0&&o--;var c=i.endIndex;c<i.dataItems.length&&c++;for(var d=function(j){var $={},rt={};g.series.each(function(_e){if(!_e.excludeFromTotal){var st=_e.dataItems.getIndex(j);st&&each$1(st.values,function(ut){var gt=st.values[ut].workingValue;isNumber$1(gt)&&(isNumber$1($[ut])?$[ut]+=Math.abs(gt):$[ut]=Math.abs(gt),isNumber$1(rt[ut])?rt[ut]+=gt:rt[ut]=gt)})}}),g.series.each(function(_e){if(!_e.excludeFromTotal){var st=_e.dataItems.getIndex(j);st&&each$1(st.values,function(ut){var gt=st.values[ut].workingValue;isNumber$1(gt)&&(st.setCalculatedValue(ut,$[ut],"total"),st.setCalculatedValue(ut,100*gt/$[ut],"totalPercent"),st.setCalculatedValue(ut,rt[ut],"sum"))})}})},g=this,b=o;b<c;++b)d(b)}}},a.prototype.validate=function(){this.axisLength<=0||(e.prototype.validate.call(this),this.getMinMax(),isNumber$1(this._minAdjusted)||this.dataItems.each(function(i){i.value=null}),this.fixAxisBreaks(),this.calculateZoom(),this.validateAxisElements(),this.validateAxisRanges(),this.validateBreaks(),this.hideUnusedDataItems(),this.renderer.invalidateLayout())},a.prototype.calculateZoom=function(){if(isNumber$1(this.min)&&isNumber$1(this.max)){var i=this.positionToValue(this.start),o=this.positionToValue(this.end),c=this.adjustDifference(i,o),d=this.adjustMinMax(i,o,c,this._gridCount,!0),g=decimalPlaces(d.step);this._stepDecimalPlaces=g,i=round$1(i,g),o=round$1(o,g),d=this.adjustMinMax(i,o,c,this._gridCount,!0);var b=d.step;if(this.syncWithAxis){var j=this.getCache(i+"-"+o);isNumber$1(j)&&(b=j)}else i=d.min,o=d.max;(this._minZoomed!=i||this._maxZoomed!=o||this._step!=b||this._dsc)&&(this._dsc=!1,this._minZoomed=i,this._maxZoomed=o,this._step=b,this.dispatchImmediately("selectionextremeschanged"))}},a.prototype.fixSmallStep=function(i){return 1+i==1?(i*=2,this.fixSmallStep(i)):i},a.prototype.validateAxisElements=function(){var i=this;if(isNumber$1(this.max)&&isNumber$1(this.min)){var o=this.minZoomed-this._step*2;if(!this.logarithmic)o=Math.floor(o/this._step)*this._step;else{var c=Math.log(this.max)*Math.LOG10E-Math.log(this.min)*Math.LOG10E;c>1?o=Math.pow(10,Math.log(this.min)*Math.LOG10E):(o=Math.floor(this.minZoomed/this._step)*this._step,o==0&&(o=this.minZoomed))}var d=this._maxZoomed+this._step;this.resetIterators();var g=this._dataItemsIterator;if(this._step==0)return;this._step=this.fixSmallStep(this._step);var b=0,j=this._prevStepDecimalPlaces!=this._stepDecimalPlaces;for(this._prevStepDecimalPlaces=this._stepDecimalPlaces;o<=d;){var $=this.isInBreak(o);if(!$){var rt=g.find(function(Pt){return Pt.value===o});rt.__disabled&&(rt.__disabled=!1),this.appendDataItem(rt),rt.axisBreak=void 0,(rt.value!=o||j)&&(rt.value=o,rt.text=this.formatLabel(o),rt.label&&rt.label.invalid&&rt.label.validate(),rt.value>=this.min&&rt.value<=this.max&&rt.label&&(this.axisLetter=="Y"&&rt.label.measuredWidth>this.ghostLabel.measuredWidth||this.axisLetter=="X"&&rt.label.measuredHeight>this.ghostLabel.measuredHeight)&&(this.ghostLabel.text=rt.label.currentText,this.ghostLabel.validate())),this.validateDataElement(rt)}b++;var _e=o;if(!this.logarithmic)o+=this._step;else{var c=Math.log(this.max)*Math.LOG10E-Math.log(this.min)*Math.LOG10E;c>1?o=Math.pow(10,Math.log(this.min)*Math.LOG10E+b):o+=this._step}var st=Math.pow(10,Math.floor(Math.log(Math.abs(this._step))*Math.LOG10E));if(st<1){var ut=Math.round(Math.abs(Math.log(Math.abs(st))*Math.LOG10E))+2;if(ut=Math.min(13,ut),o=round$1(o,ut),_e==o){o=d;break}}}var gt=this._axisBreaks;if(gt){var yt=this.renderer;each(gt.iterator(),function(Pt){if(Pt.breakSize>0&&getDistance(Pt.startPoint,Pt.endPoint)>yt.minGridDistance)for(var wt=Pt.adjustedMin;wt<=Pt.adjustedMax;){if(wt>=Pt.adjustedStartValue&&wt<=Pt.adjustedEndValue){var Ct=g.find(function(At){return At.value===wt});Ct.__disabled&&(Ct.__disabled=!1),i.appendDataItem(Ct),Ct.axisBreak=Pt,Ct.value!=wt&&(Ct.value=wt,Ct.text=i.formatLabel(wt),Ct.label&&Ct.label.invalid&&Ct.label.validate()),i.validateDataElement(Ct)}wt+=Pt.adjustedStep}})}}},a.prototype.validateDataElement=function(i){e.prototype.validateDataElement.call(this,i),i.itemIndex=this._axisItemCount,this._axisItemCount++;var o=this.renderer,c=i.value,d=i.endValue,g=this.valueToPosition(c);i.position=g;var b=g,j=this.valueToPosition(c+this._step);isNumber$1(d)&&(b=this.valueToPosition(d),j=b),i.point=o.positionToPoint(g);var $=i.tick;$&&!$.disabled&&o.updateTickElement($,g,b);var rt=i.grid;rt&&!rt.disabled&&o.updateGridElement(rt,g,b);var _e=i.label;_e&&!_e.disabled&&o.updateLabelElement(_e,g,b);var st=i.axisFill;st&&!st.disabled&&(o.updateFillElement(st,g,j),i.isRange||this.fillRule(i)),i.bullet&&o.updateBullet(i.bullet,g,b);var ut=i.mask;ut&&o.updateFillElement(ut,g,j)},a.prototype.formatLabel=function(i){return this.adjustLabelPrecision&&i!=0?this.numberFormatter.format(i,void 0,this._stepDecimalPlaces):this.numberFormatter.format(i)},Object.defineProperty(a.prototype,"basePoint",{get:function(){var i=this.baseValue,o=this.valueToPosition(i),c=this.renderer.positionToPoint(o);return c},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"baseValue",{get:function(){var i=this._baseValue;return this.logarithmic&&(i=this.min),this._adapterO?this._adapterO.apply("baseValue",i):i},set:function(i){this._baseValue=i,this.invalidateLayout(),this.invalidateSeries()},enumerable:!0,configurable:!0}),a.prototype.anyToPosition=function(i){return this.valueToPosition(i)},a.prototype.valueToPoint=function(i){var o=this.valueToPosition(i),c=this.renderer.positionToPoint(o),d=this.renderer.positionToAngle(o);return{x:c.x,y:c.y,angle:d}},a.prototype.anyToPoint=function(i){return this.valueToPoint(i)},a.prototype.valueToPosition=function(i){if(isNumber$1(i)){var o=this.min,c=this.max;if(isNumber$1(o)&&isNumber$1(c)){var d=this._difference,g=this._axisBreaks;g&&g.length>0&&eachContinue(g.iterator(),function($){var rt=$.adjustedStartValue,_e=$.adjustedEndValue;if(isNumber$1(rt)&&isNumber$1(_e)){if(i<rt)return!1;if(intersect({start:rt,end:_e},{start:o,end:c})){rt=Math.max(rt,o),_e=Math.min(_e,c);var st=$.breakSize;i>_e?o+=(_e-rt)*(1-st):i<rt||(i=rt+(i-rt)*st)}}return!0});var b=void 0;if(!this.logarithmic)b=(i-o)/d;else{var j=this.treatZeroAs;isNumber$1(j)&&i<=j&&(i=j),b=(Math.log(i)*Math.LOG10E-Math.log(this.min)*Math.LOG10E)/(Math.log(this.max)*Math.LOG10E-Math.log(this.min)*Math.LOG10E)}return b}}return 0},a.prototype.invalidateLabels=function(){e.prototype.invalidateLabels.call(this),this.dataItems&&(this.dataItems.each(function(i){i.value=void 0}),this.invalidate())},a.prototype.positionToValue=function(i){var o=this.min,c=this.max;if(isNumber$1(o)&&isNumber$1(c)){var d=c-o,g=null,b=this._axisBreaks;return b&&b.length>0&&eachContinue(b.iterator(),function(j){var $=j.startPosition,rt=j.endPosition,_e=j.adjustedStartValue,st=j.adjustedEndValue;if(isNumber$1(_e)&&isNumber$1(st)){if(_e>c)return!1;if(intersect({start:_e,end:st},{start:o,end:c})){_e=max$1(_e,o),st=min$1(st,c);var ut=j.breakSize;if(d-=(st-_e)*(1-ut),i>rt)o+=(st-_e)*(1-ut);else if(!(i<$)){var gt=(i-$)/(rt-$);return g=_e+gt*(st-_e),!1}}return!0}}),isNumber$1(g)||(this.logarithmic?g=Math.pow(Math.E,(i*(Math.log(this.max)*Math.LOG10E-Math.log(this.min)*Math.LOG10E)+Math.log(this.min)*Math.LOG10E)/Math.LOG10E):g=i*d+o),g}},a.prototype.xToValue=function(i){return this.positionToValue(this.pointToPosition({x:i,y:0}))},a.prototype.yToValue=function(i){return this.positionToValue(this.pointToPosition({x:0,y:i}))},a.prototype.pointToPosition=function(i){return this.renderer instanceof AxisRendererY?1-this.renderer.pointToPosition(i):this.renderer.pointToPosition(i)},a.prototype.animateMinMax=function(i,o){return this.animate([{property:"_minAdjusted",from:this._minAdjusted,to:i},{property:"_maxAdjusted",from:this._maxAdjusted,to:o}],this.rangeChangeDuration,this.rangeChangeEasing)},a.prototype.getMinMax=function(){var i=this;this.updateGridCount();var o=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY;if((!isNumber$1(this._minDefined)||!isNumber$1(this._maxDefined))&&(this.series.each(function(st){if(!st.ignoreMinMax){var ut=st.min(i);isNumber$1(ut)&&ut<o&&(o=ut);var gt=st.max(i);isNumber$1(gt)&&gt>c&&(c=gt)}}),this.includeRangesInMinMax&&this.axisRanges.each(function(st){if(!st.ignoreMinMax){var ut=min$1(st.value,st.endValue),gt=max$1(st.value,st.endValue);(ut<o||!isNumber$1(o))&&(o=ut),(gt>c||!isNumber$1(c))&&(c=gt)}})),this.logarithmic){var d=this.treatZeroAs;isNumber$1(d)&&o<=0&&(o=d),o<=0&&this.raiseCriticalError(new Error("Logarithmic value axis can not have values <= 0."),!0)}if(o==0&&c==0&&(c=.9,o=-.9),isNumber$1(this._minDefined)&&(o=this._minDefined),isNumber$1(this._maxDefined)&&(c=this._maxDefined),this._adapterO&&(o=this._adapterO.apply("min",o)),this._adapterO&&(c=this._adapterO.apply("max",c)),!(!isNumber$1(o)||!isNumber$1(c))){this._minReal=o,this._maxReal=c,o==Number.POSITIVE_INFINITY&&(o=void 0),c==Number.NEGATIVE_INFINITY&&(c=void 0);var g=this.adjustDifference(o,c);if(o=this.fixMin(o),c=this.fixMax(c),c-o<=1/Math.pow(10,15)){if(c-o!=0)this._deltaMinMax=(c-o)/2;else{var b=Math.log(Math.abs(c))*Math.LOG10E,j=Math.pow(10,Math.floor(b));j=j/10,this._deltaMinMax=j}o-=this._deltaMinMax,c+=this._deltaMinMax}o-=(c-o)*this.extraMin,c+=(c-o)*this.extraMax;var $=this.strictMinMax;isNumber$1(this._maxDefined)&&($=!0);var rt=this.adjustMinMax(o,c,g,this._gridCount,$);if(o=rt.min,c=rt.max,g=c-o,rt=this.adjustMinMax(o,c,c-o,this._gridCount,!0),o=rt.min,c=rt.max,this.strictMinMax&&(isNumber$1(this._minDefined)?o=this._minDefined:o=this._minReal,isNumber$1(this._maxDefined)?c=this._maxDefined:c=this._maxReal,c-o<=1e-8&&(o-=this._deltaMinMax,c+=this._deltaMinMax),o-=(c-o)*this.extraMin,c+=(c-o)*this.extraMax),this._adapterO&&(o=this._adapterO.apply("min",o)),this._adapterO&&(c=this._adapterO.apply("max",c)),this._step=rt.step,!isNumber$1(o)&&!isNumber$1(c)&&(this.start=0,this.end=1,this.renderer.labels.each(function(st){st.dataItem.text=""})),(this._minAdjusted!=o||this._maxAdjusted!=c)&&isNumber$1(o)&&isNumber$1(c)){var _e=this._minMaxAnimation;if(this._extremesChanged&&isNumber$1(this._minAdjusted)&&isNumber$1(this._maxAdjusted)&&this.inited){if(_e&&!_e.isFinished()&&this._finalMax==c&&this._finalMin==o)return;this._finalMin=o,this._finalMax=c,_e=this.animateMinMax(o,c),_e&&!_e.isFinished()?(_e.events.on("animationprogress",this.validateDataItems,this),_e.events.on("animationended",function(){i.series.each(function(st){st.validate()}),i.validateDataItems(),i.handleSelectionExtremesChange()}),this._minMaxAnimation=_e):this.series.each(function(st){st.invalidate()}),this.validateDataItems(),this.dispatchImmediately("extremeschanged"),this.handleSelectionExtremesChange()}else{if(_e&&!_e.isFinished()&&this._finalMax==c&&this._finalMin==o)return;this._minAdjusted=o,this._maxAdjusted=c,this._finalMin=o,this._finalMax=c,this.invalidateDataItems(),this.dispatchImmediately("extremeschanged"),this._saveMinMax(o,c)}}this._extremesChanged=!1,this._difference=this.adjustDifference(o,c)}},a.prototype.fixMin=function(i){return i},a.prototype.fixMax=function(i){return i},a.prototype.adjustMinMax=function(i,o,c,d,g){d<=1&&(d=1),d=Math.round(d);var b=i,j=o;c===0&&(c=Math.abs(o));var $=Math.log(Math.abs(c))*Math.LOG10E,rt=Math.pow(10,Math.floor($));rt=rt/10;var _e=rt;g&&(_e=0),this.logarithmic?(i<=0&&(i=this.baseValue),i==1/0&&(i=1),o==-1/0&&(o=10),this.strictMinMax?(this._minDefined>0?i=this._minDefined:i=i,this._maxDefined>0&&(o=o)):(i=Math.pow(10,Math.floor(Math.log(Math.abs(i))*Math.LOG10E)),o=Math.pow(10,Math.ceil(Math.log(Math.abs(o))*Math.LOG10E)))):(g?(i=Math.floor(i/rt)*rt,o=Math.ceil(o/rt)*rt):(i=Math.ceil(i/rt)*rt-_e,o=Math.floor(o/rt)*rt+_e),i<0&&b>=0&&(i=0),o>0&&j<=0&&(o=0)),$=Math.log(Math.abs(c))*Math.LOG10E,rt=Math.pow(10,Math.floor($)),rt=rt/10;var st=Math.ceil(c/d/rt)*rt,ut=Math.pow(10,Math.floor(Math.log(Math.abs(st))*Math.LOG10E)),gt=Math.ceil(st/ut);gt>5?gt=10:gt<=5&&gt>2&&(gt=5),st=Math.ceil(st/(ut*gt))*ut*gt,this.maxPrecision<Number.MAX_VALUE&&st!=ceil(st,this.maxPrecision)&&(st=ceil(st,this.maxPrecision));var yt=0;if(ut<1&&(yt=Math.round(Math.abs(Math.log(Math.abs(ut))*Math.LOG10E))+1,st=round$1(st,yt)),!this.logarithmic){var Pt=Math.floor(i/st);i=round$1(st*Pt,yt);var wt=void 0;g?wt=Math.floor(o/st):wt=Math.ceil(o/st),wt==Pt&&wt++,o=round$1(st*wt,yt),o<j&&(o=o+st),i>b&&(i=i-st)}return{min:i,max:o,step:st}},Object.defineProperty(a.prototype,"min",{get:function(){var i=this._minAdjusted;return isNumber$1(i)||(i=this._minDefined),i},set:function(i){this._minDefined!=i&&(this._minDefined=i,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"minDefined",{get:function(){return this._minDefined},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"maxDefined",{get:function(){return this._maxDefined},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"extraMin",{get:function(){return this.getPropertyValue("extraMin")},set:function(i){this.setPropertyValue("extraMin",i)&&this.invalidateDataItems()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"extraMax",{get:function(){return this.getPropertyValue("extraMax")},set:function(i){this.setPropertyValue("extraMax",i)&&this.invalidateDataItems()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"step",{get:function(){return this._step},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"max",{get:function(){var i=this._maxAdjusted;return isNumber$1(i)||(i=this._maxDefined),i},set:function(i){this._maxDefined!=i&&(this._maxDefined=i,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"adjustLabelPrecision",{get:function(){return this.getPropertyValue("adjustLabelPrecision")},set:function(i){this.setPropertyValue("adjustLabelPrecision",i)&&this.invalidate()},enumerable:!0,configurable:!0}),a.prototype.registerSeries=function(i){return new MultiDisposer([e.prototype.registerSeries.call(this,i),i.events.on("extremeschanged",this.handleExtremesChange,this,!1),i.events.on("selectionextremeschanged",this.handleSelectionExtremesChange,this,!1),this.events.on("extremeschanged",i.invalidate,i,!1)])},a.prototype.handleSelectionExtremesChange=function(){var i=this,o,c,d=!0;if(each(this.series.iterator(),function(ut){if(!ut.ignoreMinMax&&!ut.isHidden&&!ut.outOfRange){ut.visible&&!ut.isHiding&&(d=!1);var gt=ut.selectionMin(i),yt=ut.selectionMax(i);isNumber$1(gt)&&(!isNumber$1(o)||gt<o)&&(o=gt),isNumber$1(yt)&&(!isNumber$1(c)||yt>c)&&(c=yt)}}),this.includeRangesInMinMax&&this.axisRanges.each(function(ut){if(!ut.ignoreMinMax){var gt=min$1(ut.value,ut.endValue),yt=max$1(ut.value,ut.endValue);gt<o&&(o=gt),yt>c&&(c=yt)}}),isNumber$1(this._minDefined)?this.strictMinMax?o=this._minDefined:o=this.min:this.strictMinMax&&(o=this._minReal),isNumber$1(this._maxDefined)?this.strictMinMax?c=this._maxDefined:c=this.max:this.strictMinMax&&(c=this._maxReal),o==c){o-=this._deltaMinMax,c+=this._deltaMinMax;var g=this.adjustMinMax(o,c,0,this._gridCount,this.strictMinMax);o=g.min,c=g.max}var b=this.adjustDifference(o,c),j=this.adjustMinMax(o,c,b,this._gridCount);o=j.min,c=j.max,o-=(c-o)*this.extraMin,c+=(c-o)*this.extraMax,o=fitToRange(o,this.min,this.max),c=fitToRange(c,this.min,this.max),b=this.adjustDifference(o,c),j=this.adjustMinMax(o,c,b,this._gridCount,!0),o=j.min,c=j.max,this.strictMinMax&&(o=max$1(o,this._minDefined),c=min$1(c,this._maxDefined));var $=j.step;this.syncWithAxis&&(j=this.syncAxes(o,c,$),o=j.min,c=j.max,this.invalidate()),$=j.step,this._difference=this.adjustDifference(this.min,this.max);var rt=this.valueToPosition(o),_e=this.valueToPosition(c);d&&!this.syncWithAxis&&(rt=0,_e=1);var st=0;this.syncWithAxis?(st=5,this.setCache(o+"-"+c,$)):((this._step!=$||this._minZoomed!=o||this._maxZoomed!=c)&&(this._dsc=!0),this._step=$,this._minZoomed=o,this._maxZoomed=c),this.keepSelection||this.zoom({start:rt,end:_e},!1,!1,st)},Object.defineProperty(a.prototype,"strictMinMax",{get:function(){return this.getPropertyValue("strictMinMax")},set:function(i){this.setPropertyValue("strictMinMax",i)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"logarithmic",{get:function(){return this.getPropertyValue("logarithmic")},set:function(i){this.setPropertyValue("logarithmic",i)&&(this.invalidate(),this.series.each(function(o){o.invalidateDataItems()}))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"keepSelection",{get:function(){return this.getPropertyValue("keepSelection")},set:function(i){this.setPropertyValue("keepSelection",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"includeRangesInMinMax",{get:function(){return this.getPropertyValue("includeRangesInMinMax")},set:function(i){this.setPropertyValue("includeRangesInMinMax",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"maxPrecision",{get:function(){return this.getPropertyValue("maxPrecision")},set:function(i){this.setPropertyValue("maxPrecision",i)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"extraTooltipPrecision",{get:function(){return this.getPropertyValue("extraTooltipPrecision")},set:function(i){this.setPropertyValue("extraTooltipPrecision",i)&&this.invalidate()},enumerable:!0,configurable:!0}),a.prototype.handleExtremesChange=function(){var i=this;if(this._extremesChanged=!0,this.getMinMax(),this.ghostLabel){var o=0;this.dataItems.each(function(c){c.label&&c.label.pixelWidth>o&&(i.ghostLabel.text=c.label.currentText)})}},a.prototype.getX=function(i,o,c,d,g){return this.renderer.positionToPoint(this.getPositionX(i,o,c,d,g)).x},a.prototype.getPositionX=function(i,o,c,d,g){var b=i.getWorkingValue(o);hasValue(d)||(d="valueX");var j=i.getValue(d,"stack");isNumber$1(b)||(b=this.baseValue,this.logarithmic&&j>0&&(b=0));var $=this.valueToPosition(b+j);return g&&($=fitToRange($,g.start,g.end)),$},a.prototype.getY=function(i,o,c,d,g){return this.renderer.positionToPoint(this.getPositionY(i,o,c,d,g)).y},a.prototype.getPositionY=function(i,o,c,d,g){var b=i.getWorkingValue(o);hasValue(d)||(d="valueY");var j=i.getValue(d,"stack");isNumber$1(b)||(b=this.baseValue,this.logarithmic&&j>0&&(b=0));var $=this.valueToPosition(b+j);return g&&($=fitToRange($,g.start,g.end)),$},a.prototype.getAngle=function(i,o,c,d,g){var b=i.getWorkingValue(o),j=i.getValue(d,"stack");isNumber$1(b)||(b=this.baseValue);var $=this.valueToPosition(b+j);return g&&($=fitToRange($,g.start,g.end)),this.positionToAngle($)},a.prototype.getAnyRangePath=function(i,o,c){var d=this.valueToPosition(i),g=this.valueToPosition(o);return this.getPositionRangePath(d,g)},a.prototype.getTooltipText=function(i){var o=round$1(this.positionToValue(i),this._stepDecimalPlaces+this.extraTooltipPrecision),c=this.tooltip.numberFormatter.format(o);return this._adapterO?this._adapterO.apply("getTooltipText",c):c},a.prototype.zoomToValues=function(i,o,c,d){var g=(i-this.min)/(this.max-this.min),b=(o-this.min)/(this.max-this.min);this.zoom({start:g,end:b},c,d)},Object.defineProperty(a.prototype,"minZoomed",{get:function(){return this.syncWithAxis?this._minZoomed:max$1(this.min,this._minZoomed)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"maxZoomed",{get:function(){return this.syncWithAxis?this._maxZoomed:min$1(this.max,this._maxZoomed)},enumerable:!0,configurable:!0}),a.prototype.fixAxisBreaks=function(){var i=this;e.prototype.fixAxisBreaks.call(this);var o=this._axisBreaks;o&&o.length>0&&o.each(function(c){var d=c.adjustedStartValue,g=c.adjustedEndValue,b=g-d,j=Math.ceil(b*c.breakSize)*i._gridCount/(i.max-i.min),$=i.adjustMinMax(d,g,b,j,!0);c.adjustedStep=$.step,c.adjustedMin=$.min,c.adjustedMax=$.max}),this._difference=this.adjustDifference(this.min,this.max)},a.prototype.getPositionLabel=function(i){var o=this.positionToValue(i);return this.numberFormatter.format(o)},a.prototype.showTooltipAt=function(i){this.showTooltipAtPosition(this.valueToPosition(i))},a.prototype.copyFrom=function(i){e.prototype.copyFrom.call(this,i),this.min=i.min,this.max=i.max,this.calculateTotals=i.calculateTotals,this._baseValue=i.baseValue},Object.defineProperty(a.prototype,"syncWithAxis",{get:function(){return this.getPropertyValue("syncWithAxis")},set:function(i){var o=this;this.setPropertyValue("syncWithAxis",i,!0)&&i&&(this._disposers.push(i.events.on("extremeschanged",this.handleSelectionExtremesChange,this,!1)),this._disposers.push(i.events.on("selectionextremeschanged",this.handleSelectionExtremesChange,this,!1)),this._disposers.push(i.events.on("startendchanged",this.handleSelectionExtremesChange,this,!1)),this.events.on("shown",this.handleSelectionExtremesChange,this,!1),this.events.on("maxsizechanged",function(){o.clearCache(),o._disposers.push(registry.events.once("exitframe",function(){o.handleSelectionExtremesChange()}))},this,!1))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"treatZeroAs",{get:function(){return this.getPropertyValue("treatZeroAs")},set:function(i){this.setPropertyValue("treatZeroAs",i,!0)},enumerable:!0,configurable:!0}),a.prototype.syncAxes=function(i,o,c){var d=this.syncWithAxis;if(d){isNumber$1(i)||(i=this.min),isNumber$1(o)||(o=this.max),isNumber$1(c)||(c=this._step);var g=Math.round((d.maxZoomed-d.minZoomed)/d.step),b=Math.round((o-i)/c);if(isNumber$1(g)&&isNumber$1(b))for(var j=!1,$=0,rt=(o-i)*.01,_e=i,st=o,ut=c;j!=!0;)if(j=this.checkSync(_e,st,ut,g),$++,$>1e3&&(j=!0),j)i=_e,o=st,c=ut;else{$/3==Math.round($/3)?(_e=i-rt*$,i>=0&&_e<0&&(_e=0)):(st=o+rt*$,st<=0&&st>0&&(st=0));var gt=this.adjustMinMax(_e,st,st-_e,this._gridCount,!0);_e=gt.min,st=gt.max,ut=gt.step}}return{min:i,max:o,step:c}},a.prototype.checkSync=function(i,o,c,d){for(var g=(o-i)/c,b=1;b<d;b++)if(round$1(g/b,1)==d||g*b==d)return!0;return!1},a.prototype.processConfig=function(i){i&&hasValue(i.syncWithAxis)&&isString$1(i.syncWithAxis)&&(this.map.hasKey(i.syncWithAxis)?i.syncWithAxis=this.map.getKey(i.syncWithAxis):(this.processingErrors.push('[ValueAxis] No axis with id "'+i.syncWithAxis+'" found for `syncWithAxis`'),delete i.xAxis)),e.prototype.processConfig.call(this,i)},a.prototype._saveMinMax=function(i,o){},a}(Axis);registry.registeredClasses.ValueAxis=ValueAxis;registry.registeredClasses.ValueAxisDataItem=ValueAxisDataItem;var DateAxisBreak=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="DateAxisBreak",i.applyTheme(),i}return Object.defineProperty(a.prototype,"startDate",{get:function(){return this.getPropertyValue("startDate")},set:function(i){this.setPropertyValue("startDate",i)&&(this.startValue=i.getTime(),this.axis&&(this.axis.invalidate(),this.axis.invalidateSeries()))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"endDate",{get:function(){return this.getPropertyValue("endDate")},set:function(i){this.setPropertyValue("endDate",i)&&(this.endValue=i.getTime(),this.axis&&(this.axis.invalidate(),this.axis.invalidateSeries()))},enumerable:!0,configurable:!0}),a}(ValueAxisBreak);registry.registeredClasses.DateAxisBreak=DateAxisBreak;var DateAxisDataItem=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="DateAxisDataItem",i.applyTheme(),i.values.date={},i.values.endDate={},i}return Object.defineProperty(a.prototype,"date",{get:function(){return this.dates.date},set:function(i){this.setDate("date",i),this.value=i.getTime()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"endDate",{get:function(){return this.dates.endDate},set:function(i){this.setDate("endDate",i),this.endValue=i.getTime()},enumerable:!0,configurable:!0}),a}(ValueAxisDataItem),DateAxis=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i._gapBreaks=!1,i.gridIntervals=new List,i.groupIntervals=new List,i.dateFormats=new Dictionary,i.periodChangeDateFormats=new Dictionary,i._baseIntervalReal={timeUnit:"day",count:1},i._prevSeriesTime={},i._minDifference={},i._firstWeekDay=1,i.groupMin={},i.groupMax={},i._intervalMax={},i._intervalMin={},i.className="DateAxis",i.setPropertyValue("markUnitChange",!0),i.snapTooltip=!0,i.tooltipPosition="pointer",i.setPropertyValue("groupData",!1),i.groupCount=200,i.events.on("parentset",i.getDFFormatter,i,!1),i.gridIntervals.pushAll([{timeUnit:"millisecond",count:1},{timeUnit:"millisecond",count:5},{timeUnit:"millisecond",count:10},{timeUnit:"millisecond",count:50},{timeUnit:"millisecond",count:100},{timeUnit:"millisecond",count:500},{timeUnit:"second",count:1},{timeUnit:"second",count:5},{timeUnit:"second",count:10},{timeUnit:"second",count:30},{timeUnit:"minute",count:1},{timeUnit:"minute",count:5},{timeUnit:"minute",count:10},{timeUnit:"minute",count:15},{timeUnit:"minute",count:30},{timeUnit:"hour",count:1},{timeUnit:"hour",count:3},{timeUnit:"hour",count:6},{timeUnit:"hour",count:12},{timeUnit:"day",count:1},{timeUnit:"day",count:2},{timeUnit:"day",count:3},{timeUnit:"day",count:4},{timeUnit:"day",count:5},{timeUnit:"week",count:1},{timeUnit:"month",count:1},{timeUnit:"month",count:2},{timeUnit:"month",count:3},{timeUnit:"month",count:6},{timeUnit:"year",count:1},{timeUnit:"year",count:2},{timeUnit:"year",count:5},{timeUnit:"year",count:10},{timeUnit:"year",count:50},{timeUnit:"year",count:100},{timeUnit:"year",count:200},{timeUnit:"year",count:500},{timeUnit:"year",count:1e3},{timeUnit:"year",count:2e3},{timeUnit:"year",count:5e3},{timeUnit:"year",count:1e4},{timeUnit:"year",count:1e5}]),i.groupIntervals.pushAll([{timeUnit:"millisecond",count:1},{timeUnit:"millisecond",count:10},{timeUnit:"millisecond",count:100},{timeUnit:"second",count:1},{timeUnit:"second",count:10},{timeUnit:"minute",count:1},{timeUnit:"minute",count:10},{timeUnit:"hour",count:1},{timeUnit:"day",count:1},{timeUnit:"week",count:1},{timeUnit:"month",count:1},{timeUnit:"year",count:1}]),i.axisFieldName="date",i.applyTheme(),i}return a.prototype.fillRule=function(i){var o=i.value,c=i.component,d=c._gridInterval,g=getDuration(d.timeUnit,d.count);Math.round((o-c.min)/g)/2==Math.round(Math.round((o-c.min)/g)/2)?i.axisFill.__disabled=!0:i.axisFill.__disabled=!1},a.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),this.dateFormats.hasKey("millisecond")||this.dateFormats.setKey("millisecond",this.language.translate("_date_millisecond")),this.dateFormats.hasKey("second")||this.dateFormats.setKey("second",this.language.translate("_date_second")),this.dateFormats.hasKey("minute")||this.dateFormats.setKey("minute",this.language.translate("_date_minute")),this.dateFormats.hasKey("hour")||this.dateFormats.setKey("hour",this.language.translate("_date_hour")),this.dateFormats.hasKey("day")||this.dateFormats.setKey("day",this.language.translate("_date_day")),this.dateFormats.hasKey("week")||this.dateFormats.setKey("week",this.language.translate("_date_day")),this.dateFormats.hasKey("month")||this.dateFormats.setKey("month",this.language.translate("_date_month")),this.dateFormats.hasKey("year")||this.dateFormats.setKey("year",this.language.translate("_date_year")),this.periodChangeDateFormats.hasKey("millisecond")||this.periodChangeDateFormats.setKey("millisecond",this.language.translate("_date_millisecond")),this.periodChangeDateFormats.hasKey("second")||this.periodChangeDateFormats.setKey("second",this.language.translate("_date_second")),this.periodChangeDateFormats.hasKey("minute")||this.periodChangeDateFormats.setKey("minute",this.language.translate("_date_minute")),this.periodChangeDateFormats.hasKey("hour")||this.periodChangeDateFormats.setKey("hour",this.language.translate("_date_day")),this.periodChangeDateFormats.hasKey("day")||this.periodChangeDateFormats.setKey("day",this.language.translate("_date_day")),this.periodChangeDateFormats.hasKey("week")||this.periodChangeDateFormats.setKey("week",this.language.translate("_date_day")),this.periodChangeDateFormats.hasKey("month")||this.periodChangeDateFormats.setKey("month",this.language.translate("_date_month")+" "+this.language.translate("_date_year"))},a.prototype.createDataItem=function(){return new DateAxisDataItem},a.prototype.createAxisBreak=function(){return new DateAxisBreak},a.prototype.validateDataItems=function(){var i=this.start,o=this.end,c=this.baseDuration,d=(this.max-this.min)/c;this._firstWeekDay=this.getFirstWeekDay(),this.getDFFormatter(),e.prototype.validateDataItems.call(this);var g=getDuration(this.mainBaseInterval.timeUnit,this.mainBaseInterval.count);this.maxZoomFactor=Math.max(1,(this.max-this.min)/g),this._deltaMinMax=this.baseDuration/2;var b=(this.max-this.min)/c;i=i+(o-i)*(1-d/b),this.zoom({start:i,end:o},!1,!0)},a.prototype.handleSelectionExtremesChange=function(){},a.prototype.getIntervalMax=function(i){return this._intervalMax[i.timeUnit+i.count]},a.prototype.getIntervalMin=function(i){return this._intervalMin[i.timeUnit+i.count]},a.prototype.calculateZoom=function(){var i=this;e.prototype.calculateZoom.call(this);var o=this.adjustDifference(this._minZoomed,this._maxZoomed),c=!1;if(this.groupData&&hasValue(o)){var d=this.mainBaseInterval,g=this.getIntervalMin(d),b=this.getIntervalMax(d),j=g+(b-g)*this.start,$=g+(b-g)*this.end,rt=this.adjustDifference(j,$),_e=rt+(this.startLocation+(1-this.endLocation))*this.baseDuration,st=void 0;this.groupInterval?st=__assign$1({},this.groupInterval):(st=this.chooseInterval(0,_e,this.groupCount,this.groupIntervals),getDuration(st.timeUnit,st.count)<getDuration(d.timeUnit,d.count)&&(st=__assign$1({},d))),this._groupInterval=st;var ut=st.timeUnit+st.count;this._currentDataSetId!=ut&&(this._currentDataSetId=ut,this.dispatch("groupperiodchanged")),this.series.each(function(yt){yt.baseAxis==i&&yt.setDataSet(i._currentDataSetId)&&(c=!0)})}var gt=this.chooseInterval(0,o,this._gridCount);getDuration(gt.timeUnit,gt.count)<this.baseDuration&&(gt=__assign$1({},this.baseInterval)),this._gridInterval=gt,this._nextGridUnit=getNextUnit(gt.timeUnit),this._intervalDuration=getDuration(gt.timeUnit,gt.count),this._gridDate=round(new Date(this.minZoomed-getDuration(gt.timeUnit,gt.count)),gt.timeUnit,gt.count,this._firstWeekDay,this._df.utc,new Date(this.min),this._df.timezoneMinutes,this._df.timezone),each(this.series.iterator(),function(yt){if(yt.baseAxis==i){var Pt=yt.getAxisField(i),wt=round(new Date(i._minZoomed+i.baseDuration*.05),i.baseInterval.timeUnit,i.baseInterval.count,i._firstWeekDay,i._df.utc,void 0,i._df.timezoneMinutes,i._df.timezone).getTime(),Ct=wt.toString(),At=yt.dataItemsByAxis.getKey(i.uid).getKey(Ct+yt.currentDataSetId),Tt=0;i.start!=0&&(At?(At=i.findFirst(At,wt,Pt),Tt=At.index):Tt=yt.dataItems.findClosestIndex(i._minZoomed,function(Ht){return Ht[Pt]},"left"));var kt=i.baseInterval,It=add(round(new Date(i._maxZoomed),kt.timeUnit,kt.count,i._firstWeekDay,i._df.utc,void 0,i._df.timezoneMinutes,i._df.timezone),kt.timeUnit,kt.count,i._df.utc).getTime(),Lt=It.toString(),Ft=yt.dataItemsByAxis.getKey(i.uid).getKey(Lt+yt.currentDataSetId),Nt=yt.dataItems.length;i.end!=1&&(Ft?Nt=Ft.index:(It-=1,Nt=yt.dataItems.findClosestIndex(It,function(Ht){return Ht[Pt]},"right"),Nt++)),yt.max(i)<wt?(yt.startIndex=yt.dataItems.length,yt.endIndex=yt.dataItems.length,yt.outOfRange=!0):yt.min(i)>It?(yt.startIndex=0,yt.endIndex=0,yt.outOfRange=!0):(yt.outOfRange=!1,yt.startIndex=Tt,yt.endIndex=Nt),!c&&yt.dataRangeInvalid&&yt.validateDataRange()}})},a.prototype.findFirst=function(i,o,c){var d=i.index;if(d>0){var g=i.component,b=g.dataItems.getIndex(d-1),j=b[c];return!j||j.getTime()<o?i:this.findFirst(b,o,c)}else return i},a.prototype.validateData=function(){e.prototype.validateData.call(this),isNumber$1(this.baseInterval.count)||(this.baseInterval.count=1)},Object.defineProperty(a.prototype,"minDifference",{get:function(){var i=this,o=Number.MAX_VALUE;return this.series.each(function(c){o>i._minDifference[c.uid]&&(o=i._minDifference[c.uid])}),(o==Number.MAX_VALUE||o==0)&&(o=getDuration("day")),o},enumerable:!0,configurable:!0}),a.prototype.seriesDataChangeUpdate=function(i){this._minDifference[i.uid]=Number.MAX_VALUE},a.prototype.postProcessSeriesDataItems=function(i){var o=this;this._firstWeekDay=this.getFirstWeekDay(),i?this.seriesGroupUpdate(i):this.series.each(function(c){o.seriesGroupUpdate(c)}),this.addEmptyUnitsBreaks()},a.prototype.seriesGroupUpdate=function(i){var o=this;JSON.stringify(i._baseInterval[this.uid])!=JSON.stringify(this.mainBaseInterval)&&(i._baseInterval[this.uid]=this.mainBaseInterval,i.mainDataSet.each(function(c){o.postProcessSeriesDataItem(c)}),this.groupData&&this.groupSeriesData(i))},a.prototype.groupSeriesData=function(i){var o=this;if(i.baseAxis==this&&i.dataItems.length>0&&!i.dataGrouped){i.bulletsContainer.removeChildren();var c=[],d=this.mainBaseInterval,g=getDuration(d.timeUnit,d.count);this.groupIntervals.each(function(b){var j=getDuration(b.timeUnit,b.count);(j>g&&j<o.max-o.min||o.groupInterval)&&c.push(b)}),i._dataSets&&(i._dataSets.each(function(b,j){j.each(function($){$.dispose()}),j.clear()}),i._dataSets.clear()),i.dataGrouped=!0,each$2(c,function(b){var j="date"+o.axisLetter,$=b.timeUnit+b.count,rt=new OrderedListTemplate(i.mainDataSet.template.clone());i.dataSets.setKey($,rt);var _e=i.mainDataSet,st=Number.NEGATIVE_INFINITY,ut=0,gt,yt=[];each$1(i.dataFields,function(wt,Ct){var At=wt;At!=j&&At.indexOf("Show")==-1&&yt.push(At)});var Pt;_e.each(function(wt){var Ct=wt.getDate(j);if(Ct){var At=Ct.getTime();Pt=round(new Date(At),b.timeUnit,b.count,o._df.firstDayOfWeek,o._df.utc,void 0,o._df.timezoneMinutes,o._df.timezone);var Tt=Pt.getTime();st<Tt?(gt&&i._adapterO&&each$2(yt,function(kt){gt.values[kt].value=i._adapterO.apply("groupDataItem",{dataItem:gt,interval:b,dataField:kt,date:Pt,value:gt.values[kt].value}).value,gt.values[kt].workingValue=gt.values[kt].value}),gt=rt.create(),gt.dataContext={},gt.setWorkingLocation("dateX",i.dataItems.template.locations.dateX,0),gt.setWorkingLocation("openDateX",i.dataItems.template.locations.openDateX,0),gt.setWorkingLocation("dateY",i.dataItems.template.locations.dateY,0),gt.setWorkingLocation("openDateY",i.dataItems.template.locations.openDateY,0),gt.component=i,gt.setDate(j,Pt),gt._index=ut,ut++,each$2(yt,function(kt){var It=wt.values[kt];if(It){var Lt=It.value;i._adapterO&&(Lt=i._adapterO.apply("groupValue",{dataItem:wt,interval:b,dataField:kt,date:Pt,value:Lt}).value);var Ft=gt.values[kt];isNumber$1(Lt)?(Ft.value=Lt,Ft.workingValue=Lt,Ft.open=Lt,Ft.close=Lt,Ft.low=Lt,Ft.high=Lt,Ft.sum=Lt,Ft.average=Lt,Ft.count=1):Ft.count=0}}),o.postProcessSeriesDataItem(gt,b),each$1(i.propertyFields,function(kt,It){var Lt=kt,Ft=wt.properties[kt];hasValue(Ft)&&(gt.hasProperties=!0,gt.setProperty(Lt,Ft))}),gt.groupDataItems=[wt],st=Tt):gt&&(each$2(yt,function(kt){var It=i.groupFields[kt],Lt=wt.values[kt];if(Lt){var Ft=Lt.value;if(i._adapterO&&(Ft=i._adapterO.apply("groupValue",{dataItem:wt,interval:b,dataField:kt,date:Pt,value:Ft}).value),isNumber$1(Ft)){var Nt=gt.values[kt];isNumber$1(Nt.open)||(Nt.open=Ft),Nt.close=Ft,(Nt.low>Ft||!isNumber$1(Nt.low))&&(Nt.low=Ft),(Nt.high<Ft||!isNumber$1(Nt.high))&&(Nt.high=Ft),isNumber$1(Nt.sum)?Nt.sum+=Ft:Nt.sum=Ft,Nt.count++,Nt.average=Nt.sum/Nt.count,isNumber$1(Nt[It])&&(Nt.value=Nt[It],Nt.workingValue=Nt.value)}}}),copyProperties(wt.properties,gt.properties),each$1(i.propertyFields,function(kt,It){var Lt=kt,Ft=wt.properties[kt];hasValue(Ft)&&(gt.hasProperties=!0,gt.setProperty(Lt,Ft))}),gt.groupDataItems.push(wt))}gt&&copyProperties(wt.dataContext,gt.dataContext)}),gt&&i._adapterO&&each$2(yt,function(wt){gt.values[wt].value=i._adapterO.apply("groupDataItem",{dataItem:gt,interval:b,dataField:wt,date:Pt,value:gt.values[wt].value}).value,gt.values[wt].workingValue=gt.values[wt].value})}),this.calculateZoom()}},a.prototype.getDFFormatter=function(){this._df=this.dateFormatter},a.prototype.postProcessSeriesDataItem=function(i,o){var c=this,d="";o?d=o.timeUnit+o.count:o=this.mainBaseInterval;var g=i.component,b=g.dataItemsByAxis.getKey(this.uid);each$1(i.dates,function(j){var $=i.getDate(j),rt=$.getTime(),_e=round(new Date(rt),o.timeUnit,o.count,c._firstWeekDay,c._df.utc,void 0,c._df.timezoneMinutes,c._df.timezone),st=_e.getTime(),ut=add(new Date(st),o.timeUnit,o.count,c._df.utc);i.setCalculatedValue(j,st,"open"),i.setCalculatedValue(j,ut.getTime(),"close"),b.setKey(st+d,i)})},a.prototype.addEmptyUnitsBreaks=function(){var i=this;if(this.skipEmptyPeriods&&isNumber$1(this.min)&&isNumber$1(this.max)){var o=this.baseInterval.timeUnit,c=this.baseInterval.count;this._axisBreaks&&this._axisBreaks.clear();for(var d=round(new Date(this.min),o,c,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone),g=void 0,b=function(){add(d,o,c,j._df.utc);var $=d.getTime(),rt=$.toString(),_e=contains$1(j.series.iterator(),function(st){return!!st.dataItemsByAxis.getKey(i.uid).getKey(rt+st.currentDataSetId)});_e?g&&(g.endDate=new Date($-1),g=void 0):g||(g=j.axisBreaks.create(),g.startDate=new Date($),j._gapBreaks=!0)},j=this;d.getTime()<this.max-this.baseDuration;)b()}},a.prototype.fixAxisBreaks=function(){var i=this;e.prototype.fixAxisBreaks.call(this);var o=this._axisBreaks;o&&o.length>0&&o.each(function(c){var d=Math.ceil(i._gridCount*(Math.min(i.end,c.endPosition)-Math.max(i.start,c.startPosition))/(i.end-i.start));c.gridInterval=i.chooseInterval(0,c.adjustedEndValue-c.adjustedStartValue,d);var g=round(new Date(c.adjustedStartValue),c.gridInterval.timeUnit,c.gridInterval.count,i._firstWeekDay,i._df.utc,void 0,i._df.timezoneMinutes,i._df.timezone);g.getTime()>c.startDate.getTime()&&add(g,c.gridInterval.timeUnit,c.gridInterval.count,i._df.utc),c.gridDate=g})},a.prototype.getFirstWeekDay=function(){return this._df?this._df.firstDayOfWeek:1},a.prototype.getGridDate=function(i,o){var c=this._gridInterval.timeUnit,d=this._gridInterval.count;round(i,c,1,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone);var g=i.getTime(),b=copy(i),j=add(b,c,o,this._df.utc).getTime(),$=this.isInBreak(j);$&&$.endDate&&(b=new Date($.endDate.getTime()),round(b,c,d,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone),b.getTime()<$.endDate.getTime()&&add(b,c,d,this._df.utc),j=b.getTime());var rt=this.adjustDifference(g,j),_e=Math.round(rt/getDuration(c));return _e<d?this.getGridDate(i,o+d):b},a.prototype.getBreaklessDate=function(i,o,c){var d=new Date(i.endValue);round(d,o,c,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone),add(d,o,c,this._df.utc);var g=d.getTime();return i=this.isInBreak(g),i?this.getBreaklessDate(i,o,c):d},a.prototype.validateAxisElements=function(){var i=this;if(isNumber$1(this.max)&&isNumber$1(this.min)){this.calculateZoom();var o=this._gridDate.getTime(),c=this._gridInterval.timeUnit,d=this._gridInterval.count,g=copy(this._gridDate),b=this._dataItemsIterator;this.resetIterators();for(var j=function(){var _e=$.getGridDate(copy(g),d);o=_e.getTime();var st=copy(_e);st=add(st,c,d,$._df.utc);var ut=$.dateFormats.getKey(c);$.markUnitChange&&g&&checkChange(_e,g,$._nextGridUnit,$._df.utc)&&c!=="year"&&(ut=$.periodChangeDateFormats.getKey(c));var gt=$._df.format(_e,ut),yt=b.find(function(Pt){return Pt.text===gt});yt.__disabled&&(yt.__disabled=!1),$.appendDataItem(yt),yt.axisBreak=void 0,yt.date=_e,yt.endDate=st,yt.text=gt,$.validateDataElement(yt),g=_e},$=this;o<=this._maxZoomed;)j();var rt=this.renderer;this._axisBreaks&&each(this._axisBreaks.iterator(),function(_e){if(_e.breakSize>0){var st=_e.gridInterval.timeUnit,ut=_e.gridInterval.count;if(getDistance(_e.startPoint,_e.endPoint)>rt.minGridDistance*4)for(var gt=_e.gridDate.getTime(),yt,Pt=0,wt=function(){var Ct=copy(_e.gridDate);if(gt=add(Ct,st,ut*Pt,i._df.utc).getTime(),Pt++,gt>_e.adjustedStartValue&&gt<_e.adjustedEndValue){var At=copy(Ct);At=add(At,st,ut,i._df.utc);var Tt=i.dateFormats.getKey(st);i.markUnitChange&&yt&&checkChange(Ct,yt,i._nextGridUnit,i._df.utc)&&st!=="year"&&(Tt=i.periodChangeDateFormats.getKey(st));var kt=i._df.format(Ct,Tt),It=b.find(function(Lt){return Lt.text===kt});It.__disabled&&(It.__disabled=!1),i.appendDataItem(It),It.axisBreak=_e,_e.dataItems.moveValue(It),It.date=Ct,It.endDate=At,It.text=kt,yt=Ct,i.validateDataElement(It)}};gt<=_e.adjustedMax;)wt()}})}},a.prototype.validateDataElement=function(i){if(i.itemIndex=this._axisItemCount,this._axisItemCount++,isNumber$1(this.max)&&isNumber$1(this.min)){var o=this.renderer,c=i.value,d=i.endValue;isNumber$1(d)||(d=c);var g=this.valueToPosition(c),b=this.valueToPosition(d),j=b;!i.isRange&&this._gridInterval.count>this.baseInterval.count&&(b=g+(b-g)/(this._gridInterval.count/this.baseInterval.count)),i.position=g;var $=i.tick;$&&!$.disabled&&o.updateTickElement($,g,b);var rt=i.grid;rt&&!rt.disabled&&o.updateGridElement(rt,g,b);var _e=i.axisFill;_e&&!_e.disabled&&(o.updateFillElement(_e,g,j),i.isRange||this.fillRule(i));var st=i.mask;st&&o.updateFillElement(st,g,b),i.bullet&&o.updateBullet(i.bullet,g,b);var ut=i.label;if(ut&&!ut.disabled){var gt=ut.location;gt==0&&(this._gridInterval.count==1&&this._gridInterval.timeUnit!="week"&&!i.isRange?gt=.5:gt=0),o.updateLabelElement(ut,g,b,gt)}}},Object.defineProperty(a.prototype,"baseDuration",{get:function(){return getDuration(this.baseInterval.timeUnit,this.baseInterval.count)},enumerable:!0,configurable:!0}),a.prototype.adjustMinMax=function(i,o){return{min:i,max:o,step:this.baseDuration}},a.prototype.fixMin=function(i){var o=this.baseInterval,c=round(new Date(i),o.timeUnit,o.count,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone).getTime(),d=add(new Date(c),o.timeUnit,o.count,this._df.utc).getTime();return c+(d-c)*this.startLocation},a.prototype.fixMax=function(i){var o=this.baseInterval,c=round(new Date(i),o.timeUnit,o.count,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone).getTime(),d=add(new Date(c),o.timeUnit,o.count,this._df.utc).getTime();return c+(d-c)*this.endLocation},a.prototype.chooseInterval=function(i,o,c,d){d||(d=this.gridIntervals);var g=d.getIndex(i),b=getDuration(g.timeUnit,g.count),j=d.length-1;if(i>=j)return __assign$1({},d.getIndex(j));var $=Math.ceil(o/b);return o<b&&i>0?__assign$1({},d.getIndex(i-1)):$<=c?__assign$1({},d.getIndex(i)):i+1<d.length?this.chooseInterval(i+1,o,c,d):__assign$1({},d.getIndex(i))},a.prototype.formatLabel=function(i){return this._df.format(i)},a.prototype.dateToPosition=function(i){return this.valueToPosition(i.getTime())},a.prototype.anyToPosition=function(i){return i instanceof Date?this.dateToPosition(i):this.valueToPosition(i)},a.prototype.dateToPoint=function(i){var o=this.dateToPosition(i),c=this.renderer.positionToPoint(o),d=this.renderer.positionToAngle(o);return{x:c.x,y:c.y,angle:d}},a.prototype.anyToPoint=function(i){return i instanceof Date?this.dateToPoint(i):this.valueToPoint(i)},a.prototype.positionToDate=function(i){return new Date(this.positionToValue(i))},a.prototype.getPositionX=function(i,o,c,d,g){var b=this.getTimeByLocation(i,o,c);isNumber$1(b)||(b=this.baseValue);var j=this.valueToPosition(b);return g&&(j=fitToRange(j,g.start,g.end)),j},a.prototype.getPositionY=function(i,o,c,d,g){var b=this.getTimeByLocation(i,o,c),j=i.getValue("valueX","stack");isNumber$1(b)||(b=this.baseValue);var $=this.valueToPosition(b+j);return g&&($=fitToRange($,g.start,g.end)),$},a.prototype.getAngle=function(i,o,c,d,g){var b=this.getTimeByLocation(i,o,c),j=i.getValue(d,"stack");isNumber$1(b)||(b=this.baseValue);var $=this.valueToPosition(b+j);return g&&($=fitToRange($,g.start,g.end)),this.positionToAngle($)},a.prototype.getTimeByLocation=function(i,o,c){if(hasValue(o)){isNumber$1(c)||(c=i.workingLocations[o],isNumber$1(c)||(c=0));var d=i.values[o].open,g=i.values[o].close,b=i.values[o].workingValue,j=i.values[o].value,$=j-b;if(d-=$,g-=$,isNumber$1(d)&&isNumber$1(g))return d+(g-d)*c}},a.prototype.processSeriesDataItem=function(i,o){var c=i.component,d,g=i["date"+o];if(isNumber$1(this.timezoneOffset)?(g.setTime(g.getTime()+(g.getTimezoneOffset()-this.timezoneOffset)*6e4),i.setValue("date"+o,g.getTime(),0)):hasValue(this.timezone)&&(g=setTimezone(g,this.timezone),i.setValue("date"+o,g.getTime(),0),i["date"+o]=g),g)d=g.getTime();else return;var b=i["openDate"+o],j=this._prevSeriesTime[c.uid],$;if(b&&($=b.getTime()),isNumber$1($)){var rt=Math.abs(d-$);this._minDifference[c.uid]>rt&&(this._minDifference[c.uid]=rt)}var _e=d-j;_e>0&&this._minDifference[c.uid]>_e&&(this._minDifference[c.uid]=_e),this._prevSeriesTime[c.uid]=d,c._baseInterval[this.uid]&&this.postProcessSeriesDataItem(i)},a.prototype.updateAxisBySeries=function(){e.prototype.updateAxisBySeries.call(this);var i=this.chooseInterval(0,this.minDifference,1);this.minDifference>=getDuration("day",27)&&i.timeUnit=="week"&&(i.timeUnit="month",i.count=1),i.timeUnit=="month"&&(this.minDifference>=getDuration("day",29*2)&&i.count==1&&(i.count=2),this.minDifference>=getDuration("day",29*3)&&i.count==2&&(i.count=3),this.minDifference>=getDuration("day",29*6)&&i.count==5&&(i.count=6)),this.minDifference>=getDuration("hour",23)&&i.timeUnit=="hour"&&(i.timeUnit="day",i.count=1),this.minDifference>=getDuration("week",1)-getDuration("hour",1)&&i.timeUnit=="day"&&(i.timeUnit="week",i.count=1),this.minDifference>=getDuration("year",1)-getDuration("day",1.01)&&i.timeUnit=="month"&&(i.timeUnit="year",i.count=1),this._baseIntervalReal=i,this._mainBaseInterval=i},Object.defineProperty(a.prototype,"baseInterval",{get:function(){return this._groupInterval?this._groupInterval:this._baseInterval?this._baseInterval:this._baseIntervalReal},set:function(i){JSON.stringify(this._baseInterval)!=JSON.stringify(i)&&(this._baseInterval=i,this._mainBaseInterval=i,isNumber$1(i.count)||(i.count=1),this.invalidate(),this.postProcessSeriesDataItems())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"mainBaseInterval",{get:function(){return this._baseInterval?this._baseInterval:this._mainBaseInterval?this._mainBaseInterval:this._baseIntervalReal},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"skipEmptyPeriods",{get:function(){return this.getPropertyValue("skipEmptyPeriods")},set:function(i){if(i){var o=this.axisBreaks.template;o.startLine.disabled=!0,o.endLine.disabled=!0,o.fillShape.disabled=!0,o.breakSize=0}else this._gapBreaks&&(this.axisBreaks.clear(),this._gapBreaks=!1);this.setPropertyValue("skipEmptyPeriods",i)&&(this.invalidate(),this.postProcessSeriesDataItems(),this.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"tooltipDateFormat",{get:function(){return this.getPropertyValue("tooltipDateFormat")},set:function(i){this.setPropertyValue("tooltipDateFormat",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"markUnitChange",{get:function(){return this.getPropertyValue("markUnitChange")},set:function(i){this.setPropertyValue("markUnitChange",i)&&this.invalidateData()},enumerable:!0,configurable:!0}),a.prototype.getTooltipText=function(i){var o,c=this.positionToDate(i);if(c=round(c,this.baseInterval.timeUnit,this.baseInterval.count,this._firstWeekDay,this._df.utc,new Date(this.min),this._df.timezoneMinutes,this._df.timezone),this.tooltipDate=c,hasValue(this.tooltipDateFormat))o=this._df.format(c,this.tooltipDateFormat,["day","month","week","year"].indexOf(this.baseInterval.timeUnit)==-1);else{var d=this.dateFormats.getKey(this.baseInterval.timeUnit);d?o=this._df.format(c,d):o=this.getPositionLabel(i)}return this._adapterO?this._adapterO.apply("getTooltipText",o):o},a.prototype.roundPosition=function(i,o,c){var d=this.baseInterval,g=d.timeUnit,b=d.count,j=this.positionToDate(i);if(round(j,g,b,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone),o>0&&add(j,g,o*b,this._df.utc),c>0&&c<1&&j.setTime(j.getTime()+this.baseDuration*c),this.isInBreak(j.getTime()))for(;j.getTime()<this.max&&(add(j,g,b,this._df.utc),!!this.isInBreak(j.getTime())););return this.dateToPosition(j)},a.prototype.getCellStartPosition=function(i){return this.roundPosition(i,0)},a.prototype.getCellEndPosition=function(i){return this.roundPosition(i,1)},a.prototype.getSeriesDataItem=function(i,o,c){var d=this.positionToValue(o),g=.5;this.axisLetter=="Y"?g=i.dataItems.template.locations.dateY:g=i.dataItems.template.locations.dateX;var b=d-g*this.baseDuration,j=round(new Date(d),this.baseInterval.timeUnit,this.baseInterval.count,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone),$=round(new Date(d+this.baseDuration),this.baseInterval.timeUnit,this.baseInterval.count,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone);$.getTime()>j.getTime()&&Math.abs($.getTime()-b)<Math.abs(b-j.getTime())&&(j=$);var rt=i.dataItemsByAxis.getKey(this.uid),_e=rt.getKey(j.getTime()+i.currentDataSetId);if(!_e&&c){var st;this.axisLetter=="Y"?st="dateY":st="dateX",_e=i.dataItems.getIndex(i.dataItems.findClosestIndex(j.getTime(),function(ut){return ut[st]?ut[st].getTime():-1/0},"any"))}return _e},a.prototype.getPositionLabel=function(i){var o=this.positionToDate(i);return this._df.format(o,this.getCurrentLabelFormat())},a.prototype.getCurrentLabelFormat=function(){return this.dateFormats.getKey(this._gridInterval?this._gridInterval.timeUnit:"day")},a.prototype.initRenderer=function(){e.prototype.initRenderer.call(this);var i=this.renderer;i&&(i.ticks.template.location=0,i.grid.template.location=0,i.labels.template.location=0,i.baseGrid.disabled=!0)},Object.defineProperty(a.prototype,"basePoint",{get:function(){return{x:0,y:0}},enumerable:!0,configurable:!0}),a.prototype.animateMinMax=function(i,o){var c=this,d=this.animate([{property:"_minAdjusted",from:this._minAdjusted,to:i},{property:"_maxAdjusted",from:this._maxAdjusted,to:o}],this.rangeChangeDuration,this.rangeChangeEasing);return d.events.on("animationprogress",function(){c.dispatch("extremeschanged")}),d},a.prototype.handleExtremesChange=function(){if(e.prototype.handleExtremesChange.call(this),this.groupData){var i=this.baseInterval.timeUnit+this.baseInterval.count;this.groupMin[i]=this._finalMin,this.groupMax[i]=this._finalMax}},a.prototype.zoomToDates=function(i,o,c,d,g){i=this._df.parse(i),o=this._df.parse(o),this.zoomToValues(i.getTime(),o.getTime(),c,d,g)},a.prototype.zoomToValues=function(i,o,c,d,g){var b=this;if(this.groupData){var rt=this.adjustDifference(i,o),_e=!1;o==this.max&&(_e=!0);var st=!1;if(i==this.min&&(st=!0),hasValue(rt)){var ut=this.mainBaseInterval,gt=this.chooseInterval(0,rt,this.groupCount,this.groupIntervals);(gt.timeUnit==ut.timeUnit&&gt.count<ut.count||getDuration(gt.timeUnit,1)<getDuration(ut.timeUnit,1))&&(gt=__assign$1({},ut));var yt=gt.timeUnit+gt.count,Pt=this.groupMin[yt],wt=this.groupMax[yt];(!isNumber$1(Pt)||!isNumber$1(wt))&&(Pt=Number.POSITIVE_INFINITY,wt=Number.NEGATIVE_INFINITY,this.series.each(function(Tt){var kt=Tt.min(b),It=Tt.max(b);if(Tt._dataSets){var Lt=Tt._dataSets.getKey(gt.timeUnit+gt.count);if(Lt){var Ft=Lt.getIndex(0),Nt=Lt.getIndex(Lt.length-1);Ft&&(Tt.xAxis==b?kt=Ft.dateX.getTime():Tt.yAxis==b&&(kt=Ft.dateY.getTime())),Nt&&(Tt.xAxis==b?It=Nt.dateX.getTime():Tt.yAxis==b&&(It=Nt.dateY.getTime()))}}It=round(add(new Date(It),gt.timeUnit,1,b._df.utc),gt.timeUnit,1,b._df.firstDayOfWeek,b._df.utc,void 0,b._df.timezoneMinutes,b._df.timezone).getTime(),kt<Pt&&(Pt=kt),It>wt&&(wt=It)}),this.groupMin[yt]=Pt,this.groupMax[yt]=wt),i=fitToRange(i,Pt,wt),o=fitToRange(o,Pt,wt),g&&(_e&&(i=o-rt,i=fitToRange(i,Pt,wt)),st&&(o=i+rt,o=fitToRange(o,Pt,wt)));var j=(i-Pt)/(wt-Pt),$=(o-Pt)/(wt-Pt);this.zoom({start:j,end:$},c,d)}}else{var j=this.valueToPosition(i),$=this.valueToPosition(o);this.zoom({start:j,end:$},c,d)}},a.prototype.asIs=function(i){return i=="baseInterval"||e.prototype.asIs.call(this,i)},a.prototype.copyFrom=function(i){var o=this;e.prototype.copyFrom.call(this,i),this.dateFormats=i.dateFormats,this.periodChangeDateFormats=i.periodChangeDateFormats,this.groupIntervals.clear(),i.groupIntervals.each(function(c){o.groupIntervals.push(__assign$1({},c))}),this.gridIntervals.clear(),i.gridIntervals.each(function(c){o.gridIntervals.push(__assign$1({},c))}),i._baseInterval&&(this.baseInterval=i._baseInterval)},a.prototype.showTooltipAtPosition=function(i,o){var c=this;if(o||(i=this.toAxisPosition(i)),this.snapTooltip){var d=this.positionToDate(i),g=d.getTime(),b;if(this.series.each(function(rt){if(rt.baseAxis==c){var _e=c.getSeriesDataItem(rt,i,!0);if(_e){var st=void 0;rt.xAxis==c&&(st=_e.dateX),rt.yAxis==c&&(st=_e.dateY),b?Math.abs(b.getTime()-g)>Math.abs(st.getTime()-g)&&(b=st):b=st}}}),b){var j=b.getTime();b=round(new Date(j),this.baseInterval.timeUnit,this.baseInterval.count,this._firstWeekDay,this._df.utc,void 0,this._df.timezoneMinutes,this._df.timezone),j=b.getTime();var $=this.renderer.tooltipLocation;$==0&&($=1e-4),b=new Date(b.getTime()+this.baseDuration*$),i=this.dateToPosition(b),this.chart.cursor&&this.chart.cursor.snapToSeries||this.series.each(function(rt){var _e=rt.dataItemsByAxis.getKey(c.uid).getKey(j+rt.currentDataSetId),st=rt.showTooltipAtDataItem(_e);st?c.chart._seriesPoints.push({series:rt,point:st}):(rt.tooltipText||rt.tooltipHTML)&&rt.hideTooltip()})}}e.prototype.showTooltipAtPosition.call(this,i,!0)},Object.defineProperty(a.prototype,"snapTooltip",{get:function(){return this.getPropertyValue("snapTooltip")},set:function(i){this.setPropertyValue("snapTooltip",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"groupData",{get:function(){return this.getPropertyValue("groupData")},set:function(i){var o=this;this.setPropertyValue("groupData",i)&&(this.series.each(function(c){c.setDataSet(""),i&&!c.dataGrouped&&c.inited&&(c._baseInterval[o.uid]=o.mainBaseInterval,o.groupSeriesData(c))}),this._currentDataSetId="",this._groupInterval=void 0,this.invalidate(),this.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"groupInterval",{get:function(){return this.getPropertyValue("groupInterval")},set:function(i){this.setPropertyValue("groupInterval",i)&&(this.invalidate(),this.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"groupCount",{get:function(){return this.getPropertyValue("groupCount")},set:function(i){this.setPropertyValue("groupCount",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"timezoneOffset",{get:function(){return this.getPropertyValue("timezoneOffset")},set:function(i){this.setPropertyValue("timezoneOffset",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"timezone",{get:function(){return this.getPropertyValue("timezone")},set:function(i){this.setPropertyValue("timezone",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"gridInterval",{get:function(){return this._gridInterval},enumerable:!0,configurable:!0}),a.prototype.makeGap=function(i,o){var c=i.component;if(i&&o&&!c.connect&&isNumber$1(c.autoGapCount)&&c.baseAxis==this){var d=i.dates["date"+this.axisLetter],g=o.dates["date"+this.axisLetter];if(d&&g){var b=d.getTime(),j=g.getTime();if(b-j>c.autoGapCount*this.baseDuration)return!0}}return!1},Object.defineProperty(a.prototype,"baseValue",{get:function(){return this.min},enumerable:!0,configurable:!0}),a.prototype._saveMinMax=function(i,o){var c=this.groupInterval;c||(c=this.mainBaseInterval);var d=c.timeUnit+c.count;this._intervalMin[d]=i,this._intervalMax[d]=o},a}(ValueAxis);registry.registeredClasses.DateAxis=DateAxis;registry.registeredClasses.DateAxisDataItem=DateAxisDataItem;var AxisRendererX=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="AxisRendererX",i.minGridDistance=120,i.opposite=!1,i.rotation=0,i.width=percent(100),i.labels.template.horizontalCenter="middle",i.applyTheme(),i}return a.prototype.setAxis=function(i){e.prototype.setAxis.call(this,i),i.layout="vertical"},a.prototype.updateGridContainer=function(){var i=this.axis;if(i){var o=this.gridContainer;o.x=i.pixelX,o.width=i.axisLength}},a.prototype.processRenderer=function(){e.prototype.processRenderer.call(this);var i=this.axis;if(i){i.width instanceof Percent||(i.width=percent(100)),this.line;var o=i.title;o.rotation=0,o.align="center",this.opposite?(this.line.toFront(),o.toBack()):(o.toFront(),this.toBack(),this.line.toBack())}},a.prototype.updateTooltip=function(){var i=this.axis;if(i){var o=1e3,c=this.line.pixelX,d=this.line.pixelY,g=this.axisLength,b=o;this.opposite?this.inside||(d=-o,b=o):this.inside&&(d=-o,b=o),this.axis.updateTooltip("vertical",{x:c,y:d,width:g,height:b})}},a.prototype.updateLabelElement=function(i,o,c,d){hasValue(d)||(d=i.location),o=o+(c-o)*d;var g=this.positionToPoint(o);i.isMeasured=!i.inside;var b=0,j,$=this.gridContainer.maxHeight;this.opposite?(i.inside?(j="top",i.valign=="bottom"&&(b=$,j="bottom"),i.valign=="middle"&&(b=$/2,j="middle")):j="bottom",g.y=b):(i.inside?(j="bottom",i.valign=="top"&&(b=-$,j="top"),i.valign=="middle"&&(b=-$/2,j="middle")):j="top",g.y+=b),i.rotation==0&&(i.verticalCenter=j),this.positionItem(i,g),this.toggleVisibility(i,o,this.minLabelPosition,this.maxLabelPosition)},Object.defineProperty(a.prototype,"axisLength",{get:function(){var i=this.axis;return i.measuredWidth-i.pixelPaddingRight-i.pixelPaddingLeft||0},enumerable:!0,configurable:!0}),a.prototype.positionToPoint=function(i,o){return{x:this.positionToCoordinate(i),y:0}},a.prototype.pointToPosition=function(i){return this.coordinateToPosition(i.x,i.y)},a.prototype.getPositionRangePath=function(i,o){var c=fitToRange(this.positionToCoordinate(i),0,this.axisLength),d=fitToRange(this.positionToCoordinate(o),0,this.axisLength),g=Math.abs(d-c),b=this.getHeight(),j=Math.min(c,d),$=0;return rectToPath({x:j,y:$,width:g,height:b},!0)},a.prototype.updateBreakElement=function(i){e.prototype.updateBreakElement.call(this,i);var o=i.startLine,c=i.endLine,d=i.fillShape,g=i.startPoint,b=i.endPoint,j=i.pixelMarginLeft,$=this.getHeight()-i.pixelMarginTop-i.pixelMarginBottom;g.x=fitToRange(g.x,-1,this.axisLength+1),b.x=fitToRange(b.x,-1,this.axisLength+1),g.x==b.x&&(g.x<0||g.x>this.axisLength)?i.fillShape.__disabled=!0:i.fillShape.__disabled=!1,o.y=j,o.width=0,o.height=$,c.y=j,c.width=0,c.height=$,d.height=$,d.width=Math.abs(b.x-g.x),d.y=j,d.x=g.x},a.prototype.updateGridElement=function(i,o,c){o=o+(c-o)*i.location;var d=this.positionToPoint(o);i.path=moveTo({x:0,y:0})+lineTo({x:0,y:this.getHeight()}),this.positionItem(i,d),this.toggleVisibility(i,o,0,1)},a.prototype.updateTickElement=function(i,o,c){o=o+(c-o)*i.location;var d=this.positionToPoint(o),g=i.length;d.y=spritePointToSprite({x:0,y:this.line.pixelY},this.line.parent,this.gridContainer).y,this.opposite?g*=i.inside?1:-1:g*=i.inside?-1:1,i.path=moveTo({x:0,y:0})+lineTo({x:0,y:g}),this.positionItem(i,d),this.toggleVisibility(i,o,0,1)},a.prototype.updateAxisLine=function(){this.line.path=moveTo({x:0,y:0})+lineTo({x:this.axisLength,y:0})},a.prototype.updateBaseGridElement=function(){e.prototype.updateBaseGridElement.call(this);var i=this.axis,o=this.getHeight(),c=this.axisLength,d=this.baseGrid,g=i.basePoint.x;if(g<-.2||g>c+.2)d.hide(0);else{var b=spritePointToSprite({x:0,y:0},this.gridContainer,d.parent).y;d.path=moveTo({x:0,y:0})+lineTo({x:0,y:o}),d.moveTo({x:g,y:b}),d.show(0)}},a.prototype.createBreakSprites=function(i){i.startLine=new WavedLine,i.endLine=new WavedLine;var o=new WavedRectangle;o.setWavedSides(!1,!0,!1,!0),i.fillShape=o},a.prototype.toAxisPosition=function(i){var o=i,c=this.axis;if(c){var d=c.relativePositionSprite,g=c.pixelX;if(d?g=spritePointToSprite({x:this.pixelX,y:0},this.parent,d).x:d=c.parent,d){var b=g/d.innerWidth,j=c.axisLength/d.innerWidth;return(o-b)/j}}return i},a.prototype.updateBullet=function(i,o,c){var d=.5;i instanceof AxisBullet&&(d=i.location),o=o+(c-o)*d;var g=this.positionToPoint(o);g.y=spritePointToSprite({x:0,y:this.line.pixelY},this.line.parent,this.gridContainer).y,this.positionItem(i,g),this.toggleVisibility(i,o,0,1)},a}(AxisRenderer);registry.registeredClasses.AxisRendererX=AxisRendererX;defaultRules.push({relevant:ResponsiveBreakpoints.heightXS,state:function(e,a){if(e instanceof AxisRendererX){var i=e.states.create(a);return i.properties.inside=!0,i.properties.maxLabelPosition=.9,i.properties.minLabelPosition=.1,i}return null}});defaultRules.push({relevant:ResponsiveBreakpoints.heightXXS,state:function(e,a){if(e instanceof AxisRendererX){var i=e.states.create(a);return i.properties.disabled=!0,i}return null}});var CategoryAxisBreak=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="CategoryAxisBreak",i.properties.startLocation=.5,i.properties.endLocation=.5,i.applyTheme(),i}return Object.defineProperty(a.prototype,"startPosition",{get:function(){if(this.axis)return this.axis.indexToPosition(this.adjustedStartValue,this.startLocation)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"endPosition",{get:function(){if(this.axis)return this.axis.indexToPosition(this.adjustedEndValue,this.endLocation)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"startCategory",{get:function(){return this.getPropertyValue("startCategory")},set:function(i){this.setPropertyValue("startCategory",i)&&this.axis&&(this.axis.invalidateDataItems(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"endCategory",{get:function(){return this.getPropertyValue("endCategory")},set:function(i){this.setPropertyValue("endCategory",i)&&this.axis&&(this.axis.invalidateDataItems(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"startValue",{get:function(){var i=this.getPropertyValue("startCategory");return i?this.axis.categoryToIndex(i):this.getPropertyValue("startValue")},set:function(i){this.setPropertyValue("startValue",i)&&this.axis&&(this.axis.invalidateDataItems(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"endValue",{get:function(){var i=this.getPropertyValue("endCategory");return i?this.axis.categoryToIndex(i):this.getPropertyValue("endValue")},set:function(i){this.setPropertyValue("endValue",i)&&this.axis&&(this.axis.invalidateDataItems(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"startLocation",{get:function(){return this.getPropertyValue("startLocation")},set:function(i){this.setPropertyValue("startLocation",i)&&this.axis&&(this.axis.invalidateDataItems(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"endLocation",{get:function(){return this.getPropertyValue("endLocation")},set:function(i){this.setPropertyValue("endLocation",i)&&this.axis&&(this.axis.invalidateDataItems(),this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),a}(AxisBreak);registry.registeredClasses.CategoryAxisBreak=CategoryAxisBreak;var CategoryAxisDataItem=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.seriesDataItems={},i.className="CategoryAxisDataItem",i.text="{category}",i.locations.category=0,i.locations.endCategory=1,i.deltaPosition=0,i.applyTheme(),i}return Object.defineProperty(a.prototype,"category",{get:function(){return this._adapterO&&this._adapterO.isEnabled("category")?this._adapterO.apply("category",this.properties.category):this.properties.category},set:function(i){var o=this.properties.category;this.setProperty("category",i),hasValue(o)&&o!=i&&this.component&&this.component.validateDataElement(this)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"endCategory",{get:function(){return this.properties.endCategory},set:function(i){this.setProperty("endCategory",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"deltaPosition",{get:function(){return this.properties.deltaCoordinate},set:function(i){i!=this.properties.deltaCoordinate&&(this.setProperty("deltaCoordinate",i),this.component&&(this.component.invalidateDataItems(),this.component.invalidateSeries()))},enumerable:!0,configurable:!0}),a}(AxisDataItem),CategoryAxis=function(e){__extends(a,e);function a(){var i=e.call(this)||this;i.dataItemsByCategory=new Dictionary,i.className="CategoryAxis",i.axisFieldName="category",i._lastDataItem=i.createDataItem(),i._lastDataItem.component=i,i._disposers.push(i._lastDataItem),i.applyTheme();var o=i.dataItemsByCategory;return i.addDisposer(i.mainDataSet.events.on("removed",function(c){o.removeKey(c.oldValue.category)})),i}return a.prototype.createDataItem=function(){return new CategoryAxisDataItem},a.prototype.createAxisBreak=function(){return new CategoryAxisBreak},a.prototype.processSeriesDataItem=function(i,o){e.prototype.processSeriesDataItem.call(this,i,o);var c=i["category"+this.axisLetter];if(hasValue(c)){var d=this.dataItemsByCategory.getKey(c);if(d){var g=i.component.uid,b=d.seriesDataItems[g];b||(b=[],d.seriesDataItems[g]=b),b.push(i)}}else i.component.dataItems.remove(i)},a.prototype.validateDataRange=function(){var i=this;e.prototype.validateDataRange.call(this),each(this._series.iterator(),function(o){if(o.xAxis instanceof a&&o.yAxis instanceof a)o.invalidateDataRange();else{var c=i.positionToIndex(i.start),d=i.positionToIndex(i.end);d>=i.dataItems.length&&d--;for(var g=o.uid,b=void 0,j=void 0,$=c;$<=d;$++){var rt=i.dataItems.getIndex($);if(rt){var _e=rt.seriesDataItems[g];if(_e)for(var st=0;st<_e.length;st++){var ut=_e[st];if(ut){var gt=ut.index;(!isNumber$1(b)||gt<b)&&(b=gt),(!isNumber$1(j)||gt>j)&&(j=gt)}}}}isNumber$1(b)?o.startIndex=b:o.start=i.start,isNumber$1(j)?o.endIndex=j+1:o.end=i.end,i._axisBreaks&&i._axisBreaks.length>0&&o.invalidateDataRange()}})},a.prototype.validate=function(){var i=this;e.prototype.validate.call(this);var o=this.dataItems.length,c=fitToRange(Math.floor(this.start*o-1),0,o),d=fitToRange(Math.ceil(this.end*o),0,o);this.renderer.invalid&&this.renderer.validate();var g=this.renderer.axisLength/Math.max(this.renderer.minGridDistance,1/Number.MAX_SAFE_INTEGER),b=Math.min(this.dataItems.length,Math.ceil((d-c)/g));if(this._startIndex=Math.floor(c/b)*b,this._endIndex=Math.ceil(this.end*o),this.fixAxisBreaks(),this._startIndex==this._endIndex&&this._endIndex++,this._frequency=b,!(this.axisLength<=0)){this.maxZoomFactor=this.dataItems.length,this.dataItems.length<=0&&(this.maxZoomFactor=1),this.resetIterators(),c=max$1(0,this._startIndex-this._frequency),d=min$1(this.dataItems.length,this._endIndex+this._frequency);for(var j=0,$=0;$<c;$++){var rt=this.dataItems.getIndex($);rt.__disabled=!0}for(var $=d,_e=this.dataItems.length;$<_e;$++){var rt=this.dataItems.getIndex($);rt.__disabled=!0}for(var $=c;$<d;$++)if($<this.dataItems.length){var rt=this.dataItems.getIndex($);if($/this._frequency==Math.round($/this._frequency)){var st=this.isInBreak($);st||(this.appendDataItem(rt),this.validateDataElement(rt,j)),j++}else rt.__disabled=!0}if(this.appendDataItem(this._lastDataItem),this.validateDataElement(this._lastDataItem,j+1,this.dataItems.length),this._axisBreaks){var ut=this._axisBreaks;ut.each(function(gt){var yt=gt.adjustedStartValue,Pt=gt.adjustedEndValue;if(intersect({start:yt,end:Pt},{start:i._startIndex,end:i._endIndex})){for(var wt=yt;wt<=Pt;wt++){var Ct=i.dataItems.getIndex(wt);Ct.__disabled=!0}var At=fitToRange(Math.ceil(i._frequency/gt.breakSize),1,Pt-yt),Tt=0;if(gt.breakSize>0)for(var wt=yt;wt<=Pt;wt=wt+At){var Ct=i.dataItems.getIndex(wt);Ct.__disabled=!1,i.appendDataItem(Ct),i.validateDataElement(Ct,Tt),Tt++}}})}this.validateBreaks(),this.validateAxisRanges(),this.ghostLabel.invalidate(),this.renderer.invalidateLayout()}},a.prototype.validateDataElement=function(i,o,c){e.prototype.validateDataElement.call(this,i),i.itemIndex=this._axisItemCount,this._axisItemCount++;var d=this.renderer;isNumber$1(c)||(c=this.categoryToIndex(i.category));var g=this.categoryToIndex(i.endCategory);isNumber$1(g)||(g=c);var b=this.indexToPosition(c,i.locations.category),j=this.indexToPosition(g,i.locations.endCategory);i.position=b;var $,rt,_e;i.isRange&&($=g,rt=this.indexToPosition(c,i.locations.category),_e=this.indexToPosition($,i.locations.endCategory)),i.point=d.positionToPoint(b);var st=i.tick;st&&!st.disabled&&d.updateTickElement(st,b,j);var ut=i.grid;ut&&!ut.disabled&&d.updateGridElement(ut,b,j);var gt=i.label;gt&&!gt.disabled&&((!i.isRange||gt.text==null)&&(i.text=i.text),d.updateLabelElement(gt,b,j),(d instanceof AxisRendererY&&i.label.measuredWidth>this.ghostLabel.measuredWidth||d instanceof AxisRendererX&&i.label.measuredHeight>this.ghostLabel.measuredHeight)&&(i.label.html?this.ghostLabel.html=i.label.currentText:this.ghostLabel.text=i.label.currentText));var yt=i.axisFill;yt&&!yt.disabled&&(i.isRange||($=c+this._frequency,rt=this.indexToPosition(c,yt.location),_e=this.indexToPosition($,yt.location)),d.updateFillElement(yt,rt,_e),i.isRange||this.fillRule(i,o)),i.bullet&&d.updateBullet(i.bullet,b,j);var Pt=i.mask;Pt&&d.updateFillElement(Pt,rt,_e)},a.prototype.disposeData=function(){this.dataItemsByCategory.clear(),e.prototype.disposeData.call(this)},a.prototype.processDataItem=function(i,o){i&&(e.prototype.processDataItem.call(this,i,o),hasValue(i.category)&&this.dataItemsByCategory.setKey(i.category,i))},a.prototype.getDataItem=function(i){var o=i[this.dataFields.category];if(hasValue(o)){var c=this.dataItemsByCategory.getKey(o);return c||this.dataItems.create()}},a.prototype.indexToPosition=function(i,o){isNumber$1(o)||(o=.5);var c=this.startIndex,d=this.endIndex,g=this.adjustDifference(c,d),b=this.startLocation,j=this.endLocation;if(g-=b,g-=1-j,this._axisBreaks){var $=this._axisBreaks;eachContinue($.iterator(),function(st){var ut=st.adjustedStartValue,gt=st.adjustedEndValue;if(i<c||!isNumber$1(ut)||!isNumber$1(gt))return!1;if(intersect({start:ut,end:gt},{start:c,end:d})){ut=Math.max(c,ut),gt=Math.min(d,gt);var yt=st.breakSize;i>gt?c+=(gt-ut)*(1-yt):i<ut||(i=ut+(i-ut)*yt)}return!0})}var rt=0,_e=this.dataItems.getIndex(i);return _e&&(rt=_e.deltaPosition),round$1(rt+(i+o-b-c)/g,5)},a.prototype.categoryToPosition=function(i,o){var c=this.categoryToIndex(i);return this.indexToPosition(c,o)},a.prototype.categoryToPoint=function(i,o){var c=this.categoryToPosition(i,o),d=this.renderer.positionToPoint(c),g=this.renderer.positionToAngle(c);return{x:d.x,y:d.y,angle:g}},a.prototype.anyToPoint=function(i,o){return this.categoryToPoint(i,o)},a.prototype.anyToPosition=function(i,o){return this.categoryToPosition(i,o)},a.prototype.categoryToIndex=function(i){if(hasValue(i)){var o=this.dataItemsByCategory.getKey(i);if(o)return o.index}},a.prototype.zoomToCategories=function(i,o){this.zoomToIndexes(this.categoryToIndex(i),this.categoryToIndex(o)+1)},a.prototype.getAnyRangePath=function(i,o,c,d){var g=this.categoryToPosition(i,c),b=this.categoryToPosition(o,d);return this.getPositionRangePath(g,b)},a.prototype.roundPosition=function(i,o){var c=this.positionToIndex(i);return this.indexToPosition(c,o)},a.prototype.getFirstSeriesDataItem=function(i,o){for(var c=0;c<i.dataItems.length;c++){var d=i.dataItems.getIndex(c);if(i.xAxis==this&&d.categoryX==o||i.yAxis==this&&d.categoryY==o)return d}},a.prototype.getLastSeriesDataItem=function(i,o){for(var c=i.dataItems.length-1;c>=0;c--){var d=i.dataItems.getIndex(c);if(i.xAxis==this&&d.categoryX==o||i.yAxis==this&&d.categoryY==o)return d}},a.prototype.getSeriesDataItemByCategory=function(i,o){var c=this,d;return o.dataItems.each(function(g){o.xAxis==c?g.categoryX==i&&(d=g):o.yAxis==c&&g.categoryY==i&&(d=g)}),d},a.prototype.getSeriesDataItem=function(i,o,c){var d=this;if(isNumber$1(o)){var g=this.positionToIndex(o);g>=this.dataItems.length&&g--;var b=this.dataItems.getIndex(g);if(b){var j=b.category,$,rt=i.dataItems.getIndex(g);return rt&&(i.xAxis==this&&rt.categoryX==j||i.yAxis==this&&rt.categoryY==j)?rt:(i.dataItems.each(function(_e){i.xAxis==d&&_e.categoryX==j&&($||($=_e),Math.abs(g-$.index)>Math.abs(g-_e.index)&&($=_e)),i.yAxis==d&&_e.categoryY==j&&($||($=_e),Math.abs(g-$.index)>Math.abs(g-_e.index)&&($=_e))}),$)}}},a.prototype.getX=function(i,o,c,d,g){var b=this.getPositionX(i,o,c,d,g);return isNaN$1(b)?this.basePoint.x:this.renderer.positionToPoint(b).x},a.prototype.getPositionX=function(i,o,c,d,g){var b;return hasValue(o)&&(b=this.categoryToPosition(i.categories[o],c)),g&&(b=fitToRange(b,g.start,g.end)),b},a.prototype.getY=function(i,o,c,d,g){var b=this.getPositionY(i,o,c,d,g);return isNaN$1(b)?this.basePoint.y:this.renderer.positionToPoint(b).y},a.prototype.getPositionY=function(i,o,c,d,g){var b;return hasValue(o)&&(b=this.categoryToPosition(i.categories[o],c)),g&&(b=fitToRange(b,g.start,g.end)),b},a.prototype.getAngle=function(i,o,c,d,g){var b=this.categoryToPosition(i.categories[o],c);return g&&(b=fitToRange(b,g.start,g.end)),this.positionToAngle(b)},a.prototype.getCellStartPosition=function(i){return this.roundPosition(i,0)},a.prototype.getCellEndPosition=function(i){return this.roundPosition(i,1)},a.prototype.getTooltipText=function(i){var o=this.dataItems.getIndex(this.positionToIndex(i));if(o)return this.tooltipDataItem=o,this.tooltip.dataItem=o,this.tooltipText?this.tooltipText:this._adapterO?this._adapterO.apply("getTooltipText",o.category):o.category},a.prototype.positionToIndex=function(i){i=round$1(i,10),i<0&&(i=0),i>1&&(i=1);var o=this.startIndex,c=this.endIndex,d=c-o-this.startLocation-(1-this.endLocation);i+=1/d*this.startLocation;var g=null;if(this._axisBreaks){var b=this._axisBreaks;eachContinue(b.iterator(),function(j){var $=j.startPosition,rt=j.endPosition,_e=j.adjustedStartValue,st=j.adjustedEndValue;_e=max$1(_e,o),st=min$1(st,c);var ut=j.breakSize;if(d-=(st-_e)*(1-ut),i>rt)o+=(st-_e)*(1-ut);else if(!(i<$)){var gt=(i-$)/(rt-$);return g=_e+Math.round(gt*(st-_e)),!1}return!0})}return isNumber$1(g)||(g=Math.floor(i*d+o)),g>=this.dataItems.length&&(g=this.dataItems.length-1),g},a.prototype.positionToCategory=function(i){return this.getPositionLabel(i)},a.prototype.getPositionLabel=function(i){var o=this.dataItems.getIndex(this.positionToIndex(i));if(o)return o.category},Object.defineProperty(a.prototype,"basePoint",{get:function(){return this.renderer.positionToPoint(1)},enumerable:!0,configurable:!0}),a.prototype.initRenderer=function(){e.prototype.initRenderer.call(this);var i=this.renderer;i.baseGrid.disabled=!0},Object.defineProperty(a.prototype,"frequency",{get:function(){return this._frequency},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"sortBySeries",{get:function(){return this.getPropertyValue("sortBySeries")},set:function(i){this.setPropertyValue("sortBySeries",i,!0)},enumerable:!0,configurable:!0}),a.prototype.processConfig=function(i){i&&hasValue(i.sortBySeries)&&isString$1(i.sortBySeries)&&(this.map.hasKey(i.sortBySeries)?i.sortBySeries=this.map.getKey(i.sortBySeries):(this.addDelayedMap("sortBySeries",i.sortBySeries),delete i.sortBySeries)),e.prototype.processConfig.call(this,i)},a}(Axis);registry.registeredClasses.CategoryAxis=CategoryAxis;registry.registeredClasses.CategoryAxisDataItem=CategoryAxisDataItem;var XYSeriesDataItem=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="XYSeriesDataItem",i.values.customValue={},i.values.valueX={stack:0},i.values.valueY={stack:0},i.values.openValueX={},i.values.openValueY={},i.values.dateX={},i.values.dateY={},i.values.openDateX={},i.values.openDateY={},i.setLocation("dateX",.5,0),i.setLocation("dateY",.5,0),i.setLocation("categoryX",.5,0),i.setLocation("categoryY",.5,0),i.applyTheme(),i}return Object.defineProperty(a.prototype,"valueX",{get:function(){return this.values.valueX.value},set:function(i){this.setValue("valueX",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"customValue",{get:function(){return this.values.customValue.value},set:function(i){this.setValue("customValue",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"valueY",{get:function(){return this.values.valueY.value},set:function(i){this.setValue("valueY",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"dateX",{get:function(){return this.getDate("dateX")},set:function(i){this.setDate("dateX",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"dateY",{get:function(){return this.getDate("dateY")},set:function(i){this.setDate("dateY",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"categoryX",{get:function(){return this.categories.categoryX},set:function(i){this.setCategory("categoryX",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"categoryY",{get:function(){return this.categories.categoryY},set:function(i){this.setCategory("categoryY",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"openValueX",{get:function(){return this.values.openValueX.value},set:function(i){this.setValue("openValueX",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"openValueY",{get:function(){return this.values.openValueY.value},set:function(i){this.setValue("openValueY",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"openDateX",{get:function(){return this.getDate("openDateX")},set:function(i){this.setDate("openDateX",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"openDateY",{get:function(){return this.getDate("openDateY")},set:function(i){this.setDate("openDateY",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"openCategoryX",{get:function(){return this.categories.openCategoryX},set:function(i){this.setCategory("openCategoryX",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"openCategoryY",{get:function(){return this.categories.openCategoryY},set:function(i){this.setCategory("openCategoryY",i)},enumerable:!0,configurable:!0}),a.prototype.getMin=function(i,o,c){var d=this,g;return isNumber$1(c)||(c=0),each$2(i,function(b){var j;o?j=d.getWorkingValue(b):j=d.getValue(b),j+=c,(j<g||!isNumber$1(g))&&(g=j)}),g},a.prototype.getMax=function(i,o,c){var d=this,g;return isNumber$1(c)||(c=0),each$2(i,function(b){var j;o?j=d.getWorkingValue(b):j=d.getValue(b),j+=c,(j>g||!isNumber$1(g))&&(g=j)}),g},a}(SeriesDataItem),XYSeries=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.groupFields={},i._xAxis=new MutableValueDisposer,i._yAxis=new MutableValueDisposer,i._xValueFields=[],i._yValueFields=[],i._baseInterval={},i.dataGrouped=!1,i.usesShowFields=!1,i._dataSetChanged=!1,i._maxxX=1e5,i._maxxY=1e5,i._propertiesChanged=!1,i.outOfRange=!1,i.className="XYSeries",i.isMeasured=!1,i.groupFields.valueX="close",i.groupFields.valueY="close",i.groupFields.customValue="close",i.groupFields.openValueX="open",i.groupFields.openValueY="open",i.cursorTooltipEnabled=!0,i.cursorHoverEnabled=!0,i.excludeFromTotal=!1,i.mainContainer.mask=new Sprite,i.mainContainer.mask.setElement(i.paper.add("path")),i.stacked=!1,i.snapTooltip=!1,i._showBullets=!1,i.tooltip.pointerOrientation="horizontal",i.properties.stackToNegative=!0,i.hideTooltipWhileZooming=!0,i.setPropertyValue("maskBullets",!0),i.tooltip.events.on("hidden",function(){i.returnBulletDefaultState()},void 0,!1),i._disposers.push(i._xAxis),i._disposers.push(i._yAxis),i.observe(visualProperties,function(){i.inited&&(i._propertiesChanged=!0,i.legendDataItem&&(i.legendDataItem.childrenCreated=!1),i.chart&&i.chart.legend&&i.chart.legend.invalidateDataItems(),i.invalidate())},void 0,!1),i.applyTheme(),i}return a.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("X/Y Series"))},a.prototype.createDataItem=function(){return new XYSeriesDataItem},a.prototype.resetExtremes=function(){this._tmin.clear(),this._tmax.clear(),this._smin.clear(),this._smax.clear()},a.prototype.dataChangeUpdate=function(){this.dataGrouped=!1,this._baseInterval={},this._currentDataSetId="",this.resetExtremes(),this.xAxis&&this.xAxis.seriesDataChangeUpdate(this),this.yAxis&&this.yAxis.seriesDataChangeUpdate(this)},a.prototype.validateData=function(){this._baseInterval={};var i=this.dataFields;if(i.valueYShow||i.openValueXShow||i.openValueXShow||i.openValueYShow?this.usesShowFields=!0:this.usesShowFields=!1,this.defineFields(),this.data.length>0&&this.dataChangeUpdate(),e.prototype.validateData.call(this),this.updateItemReaderText(),this.chart&&(!hasValue(this.dataFields[this._xField])||!hasValue(this.dataFields[this._yField])))throw Error('Data fields for series "'+(this.name?this.name:this.uid)+'" are not properly defined.');this.inited&&this.isHidden&&this.hide(0),this.dataGrouped=!1},a.prototype.processDataItem=function(i,o){try{e.prototype.processDataItem.call(this,i,o),this.xAxis.processSeriesDataItem(i,"X"),this.yAxis.processSeriesDataItem(i,"Y"),this.setInitialWorkingValues(i)}catch(c){this._chart&&this._chart.raiseCriticalError(c)}},a.prototype.updateDataItem=function(i){e.prototype.updateDataItem.call(this,i),this.xAxis.processSeriesDataItem(i,"X"),this.yAxis.processSeriesDataItem(i,"Y")},a.prototype.setInitialWorkingValues=function(i){},a.prototype.disposeData=function(){e.prototype.disposeData.call(this);var i=this.xAxis,o=this.yAxis;if(i){var c=this.dataItemsByAxis.getKey(i.uid);c&&c.clear(),i instanceof CategoryAxis&&this.clearCatAxis(i)}if(o){var d=this.dataItemsByAxis.getKey(o.uid);d&&d.clear(),o instanceof CategoryAxis&&this.clearCatAxis(o)}},a.prototype.clearCatAxis=function(i){var o=this.uid;i.dataItems.each(function(c){c.seriesDataItems[o]&&(c.seriesDataItems[o]=[])})},a.prototype.defineFields=function(){var i=this.xAxis,o=this.yAxis;if(i&&o){var c=i.axisFieldName,d=c+"X",g="open"+capitalize(c)+"X",b=o.axisFieldName,j=b+"Y",$="open"+capitalize(b)+"Y";this._xField=d,this._yField=j,this.dataFields[g]&&(this._xOpenField=g),this.dataFields[$]&&(this._yOpenField=$),!this.dataFields[$]&&this.baseAxis==o&&(this._yOpenField=j),!this.dataFields[g]&&this.baseAxis==i&&(this._xOpenField=d),this.stacked&&this.baseAxis==i&&(this._xOpenField=d),this.stacked&&this.baseAxis==o&&(this._yOpenField=j),i instanceof CategoryAxis&&o instanceof CategoryAxis&&(this._yOpenField||(this._yOpenField=j)),this._xValueFields=[],this._yValueFields=[],this.addValueField(i,this._xValueFields,this._xField),this.addValueField(i,this._xValueFields,this._xOpenField),this.addValueField(o,this._yValueFields,this._yField),this.addValueField(o,this._yValueFields,this._yOpenField)}},a.prototype.addValueField=function(i,o,c){i instanceof ValueAxis&&hasValue(this.dataFields[c])&&o.indexOf(c)==-1&&o.push(c)},a.prototype.setCategoryAxisField=function(i,o){hasValue(this.dataFields[i])||(this.dataFields[i]=o.dataFields.category)},a.prototype.setDateAxisField=function(i,o){hasValue(this.dataFields[i])||(this.dataFields[i]=o.dataFields.date)},a.prototype.afterDraw=function(){e.prototype.afterDraw.call(this),this.createMask()},a.prototype.createMask=function(){if(this.mainContainer.mask){var i=this.getMaskPath();each(this.axisRanges.iterator(),function(o){o.axisFill.fillPath&&(o.axisFill.validate(),i+=o.axisFill.fillPath)}),this.mainContainer.mask.path=i}},a.prototype.getMaskPath=function(){return this.xAxis&&this.yAxis?rectToPath({x:0,y:0,width:this.xAxis.axisLength,height:this.yAxis.axisLength}):""},a.prototype.getAxisField=function(i){if(i==this.xAxis)return this.xField;if(i==this.yAxis)return this.yField},a.prototype.validateDataItems=function(){var i=this.chart;i&&(this._maxxX=max$1(1e5,i.plotContainer.maxWidth*2),this._maxxY=max$1(1e5,i.plotContainer.maxHeight*2));var o=this.xAxis,c=this.yAxis;o&&c&&(o.updateAxisBySeries(),c.updateAxisBySeries()),e.prototype.validateDataItems.call(this),o&&c&&(o.postProcessSeriesDataItems(this),c.postProcessSeriesDataItems(this))},a.prototype.validateDataRange=function(){var i=this.xAxis,o=this.yAxis;i&&o&&(i.dataRangeInvalid&&i.validateDataRange(),o.dataRangeInvalid&&o.validateDataRange()),e.prototype.validateDataRange.call(this)},a.prototype.validate=function(){var i=this.xAxis,o=this.yAxis;if(i&&o){i.invalid&&i.validate(),o.invalid&&o.validate(),this.y=o.pixelY,this.x=i.pixelX,this._showBullets=!0;var c=this.minBulletDistance;isNumber$1(c)&&this.baseAxis.axisLength/(this.endIndex-this.startIndex)<c&&(this._showBullets=!1)}if(this.updateTooltip(),!(i instanceof DateAxis&&i.groupData&&!this.dataGrouped||o instanceof DateAxis&&o.groupData&&!this.dataGrouped)){e.prototype.validate.call(this);var d=this.chart,g=this.maskBullets;d&&g&&d.className=="XYChart"&&((d.leftAxesContainer.layout=="vertical"||d.rightAxesContainer.layout=="vertical")&&(this.yAxis?this.bulletsContainer.mask=this.yAxis.renderer.gridContainer:this.bulletsContainer.mask=void 0),(d.topAxesContainer.layout=="horizontal"||d.bottomAxesContainer.layout=="horizontal")&&(this.xAxis?this.bulletsContainer.mask=this.xAxis.renderer.gridContainer:this.bulletsContainer.mask=void 0))}},Object.defineProperty(a.prototype,"xAxis",{get:function(){if(this.chart){if(!this._xAxis.get()){var i=this.chart.xAxes.getIndex(0);if(!i)throw Error("There are no X axes on chart.");this.xAxis=i}return this._xAxis.get()}},set:function(i){this.setXAxis(i)},enumerable:!0,configurable:!0}),a.prototype.setXAxis=function(i){var o=this._xAxis.get();o!=i&&(o&&(this.dataItemsByAxis.removeKey(o.uid),this._xAxis.dispose(),o.series.removeValue(this)),this._xAxis.set(i,i.registerSeries(this)),this.dataItemsByAxis.setKey(i.uid,new Dictionary),this.invalidateData())},Object.defineProperty(a.prototype,"yAxis",{get:function(){if(this.chart){if(!this._yAxis.get()){var i=this.chart.yAxes.getIndex(0);if(!i)throw Error("There are no Y axes on chart.");this.yAxis=i}return this._yAxis.get()}},set:function(i){this.setYAxis(i)},enumerable:!0,configurable:!0}),a.prototype.setYAxis=function(i){var o=this._yAxis.get();o!=i&&(o&&(this.dataItemsByAxis.removeKey(o.uid),this._yAxis.dispose(),o.series.removeValue(this)),this._yAxis.set(i,i.registerSeries(this)),i.chart instanceof XYChart&&i.chart.handleYAxisSet(this),this.dataItemsByAxis.setKey(i.uid,new Dictionary),this.invalidateData())},Object.defineProperty(a.prototype,"baseAxis",{get:function(){var i=this.xAxis,o=this.yAxis;return!this._baseAxis&&i&&o&&(o instanceof DateAxis&&(this._baseAxis=o),i instanceof DateAxis&&(this._baseAxis=i),o instanceof CategoryAxis&&(this._baseAxis=o),i instanceof CategoryAxis&&(this._baseAxis=i),this._baseAxis||(this._baseAxis=i)),this._baseAxis},set:function(i){this._baseAxis!=i&&(this._baseAxis=i,this.invalidate())},enumerable:!0,configurable:!0}),a.prototype.addData=function(i,o,c){e.prototype.addData.call(this,i,o,c);var d=this.scrollbarSeries;d&&(this.scrollbarSeries.addData(i,o,!0),this.scrollbarSeries._parseDataFrom=this._parseDataFrom)},a.prototype.setData=function(i){e.prototype.setData.call(this,i),this.scrollbarSeries&&this.scrollbarSeries.setData(i)},a.prototype.setDataSet=function(i){var o=e.prototype.setDataSet.call(this,i);if(o){this._dataSetChanged=!0;var c=this.dataItems;if(this.resetExtremes(),c&&c.length>0){var d=this.xAxis,g=this.yAxis;this._prevStartIndex=void 0,this._prevEndIndex=void 0,this._startIndex=void 0,this._endIndex=void 0,this.appeared||this.processValues(!1),d instanceof DateAxis&&d==this.baseAxis&&(this._tmin.setKey(d.uid,c.getIndex(0).dateX.getTime()),this._tmax.setKey(d.uid,c.getIndex(c.length-1).dateX.getTime()),this.dispatch("extremeschanged")),g instanceof DateAxis&&g==this.baseAxis&&(this._tmin.setKey(g.uid,c.getIndex(0).dateY.getTime()),this._tmax.setKey(g.uid,c.getIndex(c.length-1).dateY.getTime()),this.dispatch("extremeschanged"))}}return o},a.prototype.processValues=function(i){e.prototype.processValues.call(this,i);var o=this.xAxis,c=this.yAxis;if(!(!o||!c)){var d=this.dataItems,g=1/0,b=-1/0,j=1/0,$=-1/0,rt=this.startIndex,_e=this.endIndex,st=rt,ut=_e;i||(rt=0,_e=this.dataItems.length);for(var gt=rt;gt<_e;gt++){var yt=d.getIndex(gt);this.getStackValue(yt,i);var Pt=yt.getValue("valueX","stack"),wt=yt.getValue("valueY","stack");i||(Pt=yt.getValue("valueX","stackTrue"),wt=yt.getValue("valueY","stackTrue")),g=min$1(yt.getMin(this._xValueFields,i,Pt),g),j=min$1(yt.getMin(this._yValueFields,i,wt),j),b=max$1(yt.getMax(this._xValueFields,i,Pt),b),$=max$1(yt.getMax(this._yValueFields,i,wt),$),this.stacked&&(this.baseAxis==o&&(wt<j&&(j=wt),wt>$&&($=wt)),this.baseAxis==c&&(Pt<g&&(g=Pt),Pt>b&&(b=Pt)))}o.processSeriesDataItems(),c.processSeriesDataItems();var Ct=o.uid,At=c.uid;if(this.xAxis instanceof ValueAxis&&(g==1/0||b==-1/0)){this._smin.setKey(Ct,void 0),this._smax.setKey(Ct,void 0),this.dispatchImmediately("selectionextremeschanged");return}if(this.yAxis instanceof ValueAxis&&(j==1/0||$==-1/0)){this._smin.setKey(At,void 0),this._smax.setKey(At,void 0),this.dispatchImmediately("selectionextremeschanged");return}if(!i&&(this._tmin.getKey(Ct)!=g||this._tmax.getKey(Ct)!=b||this._tmin.getKey(At)!=j||this._tmax.getKey(At)!=$)){this._tmin.setKey(Ct,g),this._tmax.setKey(Ct,b),this._tmin.setKey(At,j),this._tmax.setKey(At,$);var Tt=this.stackedSeries;Tt&&(Tt.isDisposed()?this.stackedSeries=void 0:Tt.processValues(!1)),this.dispatchImmediately("extremeschanged")}if(rt!=st||_e!=ut){g=1/0,b=-1/0,j=1/0,$=-1/0;for(var gt=st;gt<ut;gt++){var yt=d.getIndex(gt);this.getStackValue(yt,i);var Pt=yt.getValue("valueX","stack"),wt=yt.getValue("valueY","stack");i||(Pt=yt.getValue("valueX","stackTrue"),wt=yt.getValue("valueY","stackTrue")),g=min$1(yt.getMin(this._xValueFields,i,Pt),g),j=min$1(yt.getMin(this._yValueFields,i,wt),j),b=max$1(yt.getMax(this._xValueFields,i,Pt),b),$=max$1(yt.getMax(this._yValueFields,i,wt),$),this.stacked&&(this.baseAxis==o&&(wt<j&&(j=wt),wt>$&&($=wt)),this.baseAxis==c&&(Pt<g&&(g=Pt),Pt>b&&(b=Pt)))}}if(this.xAxis instanceof ValueAxis&&(g==1/0||b==-1/0)){this._smin.setKey(Ct,void 0),this._smax.setKey(Ct,void 0),this.dispatchImmediately("selectionextremeschanged");return}if(this.yAxis instanceof ValueAxis&&(j==1/0||$==-1/0)){this._smin.setKey(At,void 0),this._smax.setKey(At,void 0),this.dispatchImmediately("selectionextremeschanged");return}if((this._smin.getKey(Ct)!=g||this._smax.getKey(Ct)!=b||this._smin.getKey(At)!=j||this._smax.getKey(At)!=$)&&(this._smin.setKey(Ct,g),this._smax.setKey(Ct,b),this._smin.setKey(At,j),this._smax.setKey(At,$),this.appeared||this.start!=0||this.end!=1||this.dataItems!=this.mainDataSet)){var kt=!1;if(c instanceof ValueAxis&&!(c instanceof DateAxis)){var It=this._tmin.getKey(At);(!isNumber$1(It)||(this.usesShowFields||this._dataSetChanged||o instanceof DateAxis&&o.groupData&&this.isShowing)&&j<It||this.stackedSeries&&!this.isHidden&&!i)&&(this._tmin.setKey(At,j),kt=!0);var Lt=this._tmax.getKey(At);(!isNumber$1(Lt)||(this.usesShowFields||this._dataSetChanged||o instanceof DateAxis&&o.groupData&&this.isShowing)&&$>Lt||this.stackedSeries&&!this.isHidden&&!i)&&(this._tmax.setKey(At,$),kt=!0)}if(o instanceof ValueAxis&&!(o instanceof DateAxis)){var It=this._tmin.getKey(Ct);(!isNumber$1(It)||(this.usesShowFields||this._dataSetChanged||c instanceof DateAxis&&c.groupData&&this.isShowing)&&g<It||this.stackedSeries&&!this.isHidden&&!i)&&(this._tmin.setKey(Ct,g),kt=!0);var Lt=this._tmax.getKey(Ct);(!isNumber$1(Lt)||(this.usesShowFields||this._dataSetChanged||c instanceof DateAxis&&c.groupData&&this.isShowing)&&b>Lt||this.stackedSeries&&!this.isHidden&&!i)&&(this._tmax.setKey(Ct,b),kt=!0)}kt&&this.dispatchImmediately("extremeschanged"),this.start==0&&this.end==1&&(this._dataSetChanged=!1),this.dispatchImmediately("selectionextremeschanged")}!i&&this.stacked&&this.processValues(!0)}},a.prototype.hideTooltip=function(i){e.prototype.hideTooltip.call(this,i),this.returnBulletDefaultState(),this._prevTooltipDataItem=void 0},a.prototype.showTooltipAtPosition=function(i,o){var c;if(this.visible&&!this.isHiding&&!this.isShowing){var d=this._xAxis.get(),g=this._yAxis.get();d==this.baseAxis&&(c=d.getSeriesDataItem(this,d.toAxisPosition(i),this.snapTooltip)),g==this.baseAxis&&(c=g.getSeriesDataItem(this,g.toAxisPosition(o),this.snapTooltip));var b=this.showTooltipAtDataItem(c);if(b)return b;if(!this.tooltipText&&!this.tooltipHTML)return}this.hideTooltip()},a.prototype.getAdjustedXLocation=function(i,o,c){return i.locations[o]},a.prototype.getAdjustedYLocation=function(i,o,c){return i.locations[o]},a.prototype.showTooltipAtDataItem=function(i){var o,c,d=this.chart.cursor;if(d&&d.hideSeriesTooltipsOnSelection&&d.selection.visible&&d.downPoint){this.hideTooltip();return}if(this.returnBulletDefaultState(i),i&&i.visible){if(this.updateLegendValue(i),this.cursorTooltipEnabled){this.tooltipDataItem=i;var g=this.tooltipXField,b=this.tooltipYField;if(hasValue(i[g])&&hasValue(i[b])){var j=this.getPoint(i,g,b,this.getAdjustedXLocation(i,g),this.getAdjustedYLocation(i,b));if(j&&!(this.chart.className=="XYChart"&&(j.y<-1||j.y>this.yAxis.pixelHeight+1||j.x<-1||j.x>this.xAxis.pixelWidth+1))){if(this.tooltipX=j.x,this.tooltipY=j.y,this._prevTooltipDataItem!=i&&(this.dispatchImmediately("tooltipshownat",{type:"tooltipshownat",target:this,dataItem:i}),this._prevTooltipDataItem=i),this.cursorHoverEnabled)try{for(var $=__values(i.sprites),rt=$.next();!rt.done;rt=$.next()){var _e=rt.value;!_e.parent.visible||_e.isHidden||_e.__disabled||_e.disabled||_e.isHiding||(_e.interactions.isRealHover||(_e.dispatchImmediately("over"),_e.interactions.isRealHover=!0),_e.isHover=!0)}}catch(st){o={error:st}}finally{try{rt&&!rt.done&&(c=$.return)&&c.call($)}finally{if(o)throw o.error}}return this.showTooltip()?spritePointToSvg({x:j.x,y:j.y},this):void 0}}}}else this.updateLegendValue(i,!0)},a.prototype.returnBulletDefaultState=function(i){var o,c;if(this._prevTooltipDataItem&&this._prevTooltipDataItem!=i)try{for(var d=__values(this._prevTooltipDataItem.sprites),g=d.next();!g.done;g=d.next()){var b=g.value;if(b.isDisposed())this._prevTooltipDataItem=void 0;else{var j=b.interactions.isRealHover;b.isHover=!1,j&&b.dispatchImmediately("out")}}}catch($){o={error:$}}finally{try{g&&!g.done&&(c=d.return)&&c.call(d)}finally{if(o)throw o.error}}},a.prototype.shouldCreateBullet=function(i,o){var c=o.xField;hasValue(c)||(c=this.xField);var d=o.yField;if(hasValue(d)||(d=this.yField),this.xAxis instanceof ValueAxis&&!i.hasValue([c])||this.yAxis instanceof ValueAxis&&!i.hasValue([d]))return!1;if(o.disabled){var g=o.propertyFields.disabled,b=i.dataContext;return!!(b&&b[g]===!1)}return!0},a.prototype.updateTooltip=function(){!this.hideTooltipWhileZooming&&this.tooltip&&!this.tooltip.isHidden&&!this.isHiding&&!this.isHidden&&this.tooltipDataItem&&this.showTooltipAtDataItem(this.tooltipDataItem)},a.prototype.positionBullet=function(i){e.prototype.positionBullet.call(this,i);var o=i.dataItem,c=i.xField;hasValue(c)||(c=this.xField);var d=i.yField;hasValue(d)||(d=this.yField);var g=this.xAxis,b=this.yAxis;if(g instanceof ValueAxis&&!o.hasValue([c])||b instanceof ValueAxis&&!o.hasValue([d]))i.visible=!1;else{var j=this.getBulletLocationX(i,c),$=this.getBulletLocationY(i,d),rt=this.getPoint(o,c,d,j,$);if(rt){var _e=this.xOpenField,st=this.yOpenField,ut=void 0,gt=void 0;if(g instanceof DateAxis){isNumber$1(j)||(j=0);var yt=void 0,Pt=o.getWorkingValue(c);_e?yt=o.getWorkingValue(_e):g==this.baseAxis&&(yt=g.baseValue),isNumber$1(yt)||(yt=Pt);var wt=o.getValue("valueX","stack");if(yt+=wt,Pt+=wt,yt==Pt){var Ct=g.baseInterval,At=g.dateFormatter;yt=round(new Date(yt),Ct.timeUnit,Ct.count,At.firstDayOfWeek,At.utc,void 0,At.timezoneMinutes,At.timezone).getTime(),Pt=add(new Date(yt),Ct.timeUnit,Ct.count,At.utc).getTime()}var Tt=void 0;g==this.baseAxis?Tt=yt+(Pt-yt)*j:Tt=yt+(Pt-yt)*(1-j),ut=g.valueToPosition(Tt)}else if(g instanceof ValueAxis){isNumber$1(j)||(j=0);var yt=void 0,Pt=o.getWorkingValue(c);_e?yt=o.getWorkingValue(_e):yt=g.baseValue;var wt=o.getValue("valueX","stack");yt+=wt,Pt+=wt;var Tt=yt+(Pt-yt)*(1-j);ut=g.valueToPosition(Tt)}else if(g instanceof CategoryAxis){var kt=this.getAdjustedXLocation(o,c,i.locationX),It=this.getAdjustedXLocation(o,_e,i.locationX);ut=g.categoryToPosition(o[c],kt);var Lt=void 0;_e&&(Lt=g.categoryToPosition(o[_e],It)),isNumber$1(Lt)||(Lt=1),ut=Lt+(ut-Lt)*j}if(b instanceof DateAxis){isNumber$1($)||($=0);var yt=void 0,Pt=o.getWorkingValue(d);st?yt=o.getWorkingValue(st):b==this.baseAxis&&(yt=b.baseValue),isNumber$1(yt)||(yt=Pt);var wt=o.getValue("valueY","stack");if(yt+=wt,Pt+=wt,yt==Pt){var Ct=b.baseInterval,At=b.dateFormatter;yt=round(new Date(yt),Ct.timeUnit,Ct.count,At.firstDayOfWeek,At.utc,void 0,At.timezoneMinutes,At.timezone).getTime(),Pt=add(new Date(yt),Ct.timeUnit,Ct.count,At.utc).getTime()}var Tt=void 0;b==this.baseAxis?Tt=yt+(Pt-yt)*$:Tt=yt+(Pt-yt)*(1-$),gt=b.valueToPosition(Tt)}else if(b instanceof ValueAxis){isNumber$1($)||($=0);var yt=void 0,Pt=o.getWorkingValue(d);st?yt=o.getWorkingValue(st):yt=b.baseValue;var wt=o.getValue("valueY","stack");yt+=wt,Pt+=wt;var Tt=yt+(Pt-yt)*(1-$);gt=b.valueToPosition(Tt)}else if(b instanceof CategoryAxis){gt=b.categoryToPosition(o[d],$);var Ft=this.getAdjustedYLocation(o,d,i.locationY),Nt=this.getAdjustedYLocation(o,st,i.locationY);gt=b.categoryToPosition(o[d],Ft);var Ht=void 0;st&&(Ht=b.categoryToPosition(o[st],Nt)),isNumber$1(Ht)||(Ht=1),gt=Ht+(gt-Ht)*$}i.visible=!0,this.positionBulletReal(i,ut,gt)}else i.visible=!1}},a.prototype.positionBulletReal=function(i,o,c){i.x=this.xAxis.renderer.positionToPoint(o,c).x,i.y=this.yAxis.renderer.positionToPoint(c,o).y},a.prototype.getBulletLocationX=function(i,o){var c=i.locationX,d=i.dataItem;return isNumber$1(c)||(c=d.workingLocations[o]),c},a.prototype.getBulletLocationY=function(i,o){var c=i.locationY,d=i.dataItem;return isNumber$1(c)||(c=d.workingLocations[o]),c},a.prototype.updateStacking=function(){var i=this;this.invalidateDataItems(),this.chart&&this.chart.series.each(function(o){o.baseAxis==i.baseAxis&&(o.stackedSeries=void 0,o.invalidateDataItems(),o.invalidateProcessedData())})},Object.defineProperty(a.prototype,"stacked",{get:function(){return this.getPropertyValue("stacked")},set:function(i){if(this.setPropertyValue("stacked",i,!0)){this.updateStacking();var o=this.xAxis,c=this.yAxis;if(!i){var d;o!=this.baseAxis&&o instanceof ValueAxis&&(d=this.xField),c!=this.baseAxis&&c instanceof ValueAxis&&(d=this.yField),d&&this.dataItems.each(function(g){g.setCalculatedValue(d,0,"stack"),g.setCalculatedValue(d,0,"stackTrue")})}}},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"snapTooltip",{get:function(){return this.getPropertyValue("snapTooltip")},set:function(i){this.setPropertyValue("snapTooltip",i)},enumerable:!0,configurable:!0}),a.prototype.show=function(i){var o=this;this.isHidden&&(this.appeared&&this.xAxis instanceof DateAxis&&this.xAxis.groupData&&(this._tmin.setKey(this.yAxis.uid,void 0),this._tmax.setKey(this.yAxis.uid,void 0)),this.appeared&&this.yAxis instanceof DateAxis&&this.yAxis.groupData&&(this._tmin.setKey(this.xAxis.uid,void 0),this._tmax.setKey(this.xAxis.uid,void 0)));var c;this.xAxis instanceof ValueAxis&&this.xAxis!=this.baseAxis&&(c=this._xValueFields),this.yAxis instanceof ValueAxis&&this.yAxis!=this.baseAxis&&(c=this._yValueFields);var d=this.startIndex,g=this.endIndex,b=0,j=this.defaultState.transitionDuration;isNumber$1(i)&&(j=i),options.animationsEnabled||(j=0);var $;each(indexed(this.dataItems.iterator()),function(_e){var st=_e[0],ut=_e[1],gt=j;(st<o.startIndex-10||st>o.endIndex+10)&&(gt=0,b=0),o.sequencedInterpolation&&gt>0&&(b=o.sequencedInterpolationDelay*st+j*(st-d)/(g-d)),$=ut.show(gt,b,c)}),this.dataSets.each(function(_e,st){st!=o.dataItems&&st.each(function(ut){ut.events.disable(),ut.show(0,0,c),ut.events.enable()})}),this.mainDataSet!=this.dataItems&&this.mainDataSet.each(function(_e){_e.events.disable(),_e.show(0,0,c),_e.events.enable()});var rt=e.prototype.show.call(this,i);return $&&!$.isFinished()&&(rt=$),this.hidden&&(this.dispatchImmediately("selectionextremeschanged"),this.hidden=!1),rt},a.prototype.hide=function(i){var o=this,c,d,g=this.xAxis;g instanceof ValueAxis&&g!=this.baseAxis&&(c=this._xValueFields,this.stacked||g.minZoomed<g.baseValue&&g.maxZoomed>g.baseValue||this.stackedSeries?d=g.baseValue:d=g.min);var b=this.yAxis;b instanceof ValueAxis&&b!=this.baseAxis&&(c=this._yValueFields,this.stacked||b.minZoomed<b.baseValue&&b.maxZoomed>b.baseValue||this.stackedSeries?d=b.baseValue:d=b.min);var j=this.startIndex,$=this.endIndex,rt=this.hiddenState.transitionDuration;isNumber$1(i)&&(rt=i),options.animationsEnabled||(rt=0);var _e=0,st;each(indexed(this.dataItems.iterator()),function(gt){var yt=gt[0],Pt=gt[1],wt=rt;(yt<o.startIndex-10||yt>o.endIndex+10)&&(wt=0),wt==0?Pt.hide(0,0,d,c):(o.sequencedInterpolation&&wt>0&&(_e=o.sequencedInterpolationDelay*yt+rt*(yt-j)/($-j)),st=Pt.hide(wt,_e,d,c))}),this.dataSets.each(function(gt,yt){yt!=o.dataItems&&yt.each(function(Pt){Pt.events.disable(),Pt.hide(0,0,d,c),Pt.events.enable()})}),this.mainDataSet!=this.dataItems&&this.mainDataSet.each(function(gt){gt.events.disable(),gt.hide(0,0,d,c),gt.events.enable()});var ut=e.prototype.hide.call(this,rt);return ut&&!ut.isFinished()&&ut.delay(_e),st&&!st.isFinished()&&(ut=st),this.appeared&&this.dispatch("selectionextremeschanged"),this.validateDataElements(),ut},a.prototype.handleDataItemWorkingValueChange=function(i,o){e.prototype.handleDataItemWorkingValueChange.call(this,i,o);var c=this.baseAxis.series;each(c.iterator(),function(d){(d.stacked||d.stackedSeries)&&d.invalidateProcessedData()})},a.prototype.getStackValue=function(i,o){var c=this,d=this.xAxis,g=this.yAxis;if(!(!this.stacked||!d||!g)){var b=this.chart,j=b.series.indexOf(this),$;if(d!=this.baseAxis&&d instanceof ValueAxis&&($=this.xField),g!=this.baseAxis&&g instanceof ValueAxis&&($=this.yField),!$)return;i.setCalculatedValue($,0,"stack"),i.setCalculatedValue($,0,"stackTrue"),eachContinue(b.series.range(0,j).backwards().iterator(),function(rt){if(rt.xAxis==d&&rt.yAxis==g&&rt.className==c.className){rt.stackedSeries=c;var _e=rt.dataItems.getIndex(i.index);if(_e&&_e.hasValue(c._xValueFields)&&_e.hasValue(c._yValueFields)){var st=i.getValue($),ut=void 0,gt=_e.getValue($,"stackTrue");gt==null&&(gt=0);var yt=_e.getValue($)+gt;if(ut=_e.getWorkingValue($)+_e.getValue($,"stack"),c.stackToNegative){if(st>=0&&yt>=0||st<0&&yt<0)return i.setCalculatedValue($,ut,"stack"),i.setCalculatedValue($,yt,"stackTrue"),!1;if(!rt.stacked)return!1}else return i.setCalculatedValue($,ut,"stack"),i.setCalculatedValue($,yt,"stackTrue"),!1}else if(!rt.stacked)return!1}return!0})}},Object.defineProperty(a.prototype,"stackToNegative",{get:function(){return this.getPropertyValue("stackToNegative")},set:function(i){this.setPropertyValue("stackToNegative",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"xField",{get:function(){return this._xField},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"yField",{get:function(){return this._yField},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"xOpenField",{get:function(){return this._xOpenField},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"yOpenField",{get:function(){return this._yOpenField},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"tooltipXField",{get:function(){return this._tooltipXField?this._tooltipXField:this._xField},set:function(i){this._tooltipXField=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"tooltipYField",{get:function(){return this._tooltipYField?this._tooltipYField:this._yField},set:function(i){this._tooltipYField=i},enumerable:!0,configurable:!0}),a.prototype.min=function(i){return this._tmin.getKey(i.uid)},a.prototype.max=function(i){return this._tmax.getKey(i.uid)},a.prototype.selectionMin=function(i){var o=this._smin.getKey(i.uid);return o},a.prototype.selectionMax=function(i){var o=this._smax.getKey(i.uid);return o},a.prototype.processConfig=function(i){if(i){if(hasValue(i.baseAxis)&&isString$1(i.baseAxis)&&(this.map.hasKey(i.baseAxis)?i.baseAxis=this.map.getKey(i.baseAxis):(this.processingErrors.push("[XYSeries ("+(this.name||"unnamed")+')] No axis with id "'+i.baseAxis+'" found for `baseAxis`.'),delete i.baseAxis)),hasValue(i.xAxis)&&isString$1(i.xAxis)&&(this.map.hasKey(i.xAxis)?i.xAxis=this.map.getKey(i.xAxis):(this.processingErrors.push("[XYSeries ("+(this.name||"unnamed")+')] No axis with id "'+i.xAxis+'" found for `xAxis`.'),delete i.xAxis)),hasValue(i.yAxis)&&isString$1(i.yAxis)&&(this.map.hasKey(i.yAxis)?i.yAxis=this.map.getKey(i.yAxis):(this.processingErrors.push("[XYSeries ("+(this.name||"unnamed")+')] No axis with id "'+i.yAxis+'" found for `yAxis`.'),delete i.yAxis)),hasValue(i.axisRanges)&&isArray$1(i.axisRanges))for(var o=0,c=i.axisRanges.length;o<c;o++){var d=i.axisRanges[o];hasValue(d.type)||(d.type="AxisDataItem"),hasValue(d.axis)&&isString$1(d.axis)&&this.map.hasKey(d.axis)?d.component=this.map.getKey(d.axis):hasValue(d.component)&&isString$1(d.component)&&this.map.hasKey(d.component)&&(d.component=this.map.getKey(d.component))}(!hasValue(i.dataFields)||!isObject$1(i.dataFields))&&this.processingErrors.push("`dataFields` is not set for series ["+(this.name||"unnamed")+"]")}e.prototype.processConfig.call(this,i)},a.prototype.getPoint=function(i,o,c,d,g,b,j){if(this.xAxis&&this.yAxis){var $=this.xAxis.getX(i,o,d),rt=this.yAxis.getY(i,c,g);return $=fitToRange($,-this._maxxX,this._maxxX),rt=fitToRange(rt,-this._maxxY,this._maxxY),{x:$,y:rt}}},a.prototype.updateItemReaderText=function(){if(!this._itemReaderTextChanged){var i="";each$1(this.dataFields,function(o,c){i+="{"+o+"} "}),this.itemReaderText=i,this._itemReaderTextChanged=!1}},Object.defineProperty(a.prototype,"cursorTooltipEnabled",{get:function(){return this.getPropertyValue("cursorTooltipEnabled")},set:function(i){this.setPropertyValue("cursorTooltipEnabled",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"cursorHoverEnabled",{get:function(){return this.getPropertyValue("cursorHoverEnabled")},set:function(i){this.setPropertyValue("cursorHoverEnabled",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"excludeFromTotal",{get:function(){return this.getPropertyValue("excludeFromTotal")},set:function(i){this.setPropertyValue("excludeFromTotal",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"hideTooltipWhileZooming",{get:function(){return this.getPropertyValue("hideTooltipWhileZooming")},set:function(i){this.setPropertyValue("hideTooltipWhileZooming",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"maskBullets",{get:function(){return this.getPropertyValue("maskBullets")},set:function(i){this.setPropertyValue("maskBullets",i);var o=this.chart;o&&(i?this.bulletsContainer.parent=o.bulletsContainer:this.bulletsContainer.parent=o.axisBulletsContainer)},enumerable:!0,configurable:!0}),a.prototype.copyFrom=function(i){this.groupFields=copyProperties(i.groupFields,{}),e.prototype.copyFrom.call(this,i)},a.prototype.dispose=function(){this.scrollbarSeries&&this.scrollbarSeries.dispose(),e.prototype.dispose.call(this)},a}(Series);registry.registeredClasses.XYSeries=XYSeries;registry.registeredClasses.XYSeriesDataItem=XYSeriesDataItem;var XYChartScrollbar=function(e){__extends(a,e);function a(){var i=e.call(this)||this;i._chart=new MutableValueDisposer,i.className="XYChartScrollbar";var o=new InterfaceColorSet;i.padding(0,0,0,0);var c=i.createChild(XYChart);if(c.shouldClone=!1,c.margin(0,0,0,0),c.padding(0,0,0,0),c.interactionsEnabled=!1,i._scrollbarChart=c,!isIE()){var d=new DesaturateFilter;d.filterUnits="userSpaceOnUse",c.plotContainer.filters.push(d)}i._disposers.push(i._scrollbarChart),i.minHeight=60,i.minWidth=60;var g=i.createChild(Sprite);g.shouldClone=!1,g.setElement(i.paper.add("path")),g.fill=o.getFor("background"),g.fillOpacity=.8,g.interactionsEnabled=!1,g.isMeasured=!1,g.toBack(),i._unselectedOverlay=g,i._disposers.push(i._unselectedOverlay),c.toBack(),i.background.cornerRadius(0,0,0,0);var b=i.thumb.background;b.cornerRadius(0,0,0,0),b.fillOpacity=0,b.fill=o.getFor("background");var j=b.states.getKey("hover");j&&(j.properties.fillOpacity=.2);var $=b.states.getKey("down");return $&&($.properties.fillOpacity=.4),i._disposers.push(i._chart),i.applyTheme(),i}return Object.defineProperty(a.prototype,"series",{get:function(){return this._series||(this._series=new List,this._disposers.push(this._series.events.on("inserted",this.handleSeriesAdded,this,!1)),this._disposers.push(this._series.events.on("removed",this.handleSeriesRemoved,this,!1))),this._series},enumerable:!0,configurable:!0}),a.prototype.handleSeriesAdded=function(i){var o=this,c=i.newValue;if(!(!c.xAxis||!c.yAxis)){var d=this.scrollbarChart;d.zoomOutButton.disabled=!0,this.chart=c.chart,d.dateFormatter.inputDateFormat=this.chart.dateFormatter.inputDateFormat,d.language.locale=this.chart.language.locale;var g=!0,b=!0;each(this.series.iterator(),function(At){At!=c&&(At.xAxis==c.xAxis&&o.scrollbarChart.xAxes.length>0&&(g=!1),At.yAxis==c.yAxis&&o.scrollbarChart.yAxes.length>0&&(b=!1))}),c.events.on("beforedisposed",function(){o.series.removeValue(c)});var j=new InterfaceColorSet,$=c.clone();if((options.onlyShowOnViewport||options.queue)&&this.addDisposer(this.chart.events.on("removedfromqueue",function(){d.invalidateData()})),isIE()&&($.stroke=color("#aaaaaa"),$.fill=$.stroke,$.propertyFields.fill=void 0,$.propertyFields.stroke=void 0),c.scrollbarSeries=$,g){var rt=c.xAxis.clone();d.xAxes.moveValue(rt),rt.title.disabled=!0,rt.rangeChangeDuration=0;var _e=rt.renderer;_e.ticks.template.disabled=!0,_e.inside=!0,_e.labels.template.inside=!0,_e.line.strokeOpacity=0,_e.minLabelPosition=.02,_e.maxLabelPosition=.98,_e.line.disabled=!0,_e.axisFills.template.disabled=!0,_e.baseGrid.disabled=!0,_e.grid.template.strokeOpacity=.05,_e.minWidth=void 0,_e.minHeight=void 0,_e.padding(0,0,0,0),_e.chart=d,_e.margin(0,0,0,0),rt.width=percent(100);var st=_e.labels.template;if(st.fillOpacity=.5,rt.maxZoomCount=void 0,rt.minZoomCount=void 0,rt instanceof DateAxis){var ut=rt,gt=c.xAxis;ut.groupCount=gt.groupCount*5,ut.min=void 0,ut.max=void 0,this._disposers.push(ut.clonedFrom.events.on("extremeschanged",function(){isNumber$1(ut.clonedFrom.minDefined)&&(ut.min=ut.clonedFrom.minDefined),isNumber$1(ut.clonedFrom.maxDefined)&&(ut.max=ut.clonedFrom.maxDefined)},void 0,!1))}else if(rt instanceof ValueAxis){var yt=rt;yt.min=void 0,yt.max=void 0,isNumber$1(yt.clonedFrom.minDefined)||(yt.min=void 0),isNumber$1(yt.clonedFrom.maxDefined)||(yt.max=void 0),this._disposers.push(yt.clonedFrom.events.on("extremeschanged",function(){isNumber$1(yt.clonedFrom.minDefined)&&(yt.min=yt.clonedFrom.min),isNumber$1(yt.clonedFrom.maxDefined)&&(yt.max=yt.clonedFrom.max)},void 0,!1))}$.xAxis=rt}else this.scrollbarChart.xAxes.each(function(At){At.clonedFrom==c.xAxis&&($.xAxis=At)});if(b){var Pt=c.yAxis.clone();d.yAxes.moveValue(Pt),Pt.title.disabled=!0,Pt.rangeChangeDuration=0;var _e=Pt.renderer;_e.ticks.template.disabled=!0,_e.inside=!0,_e.labels.template.inside=!0,_e.line.strokeOpacity=0,_e.minLabelPosition=.02,_e.maxLabelPosition=.98,_e.line.disabled=!0,_e.axisFills.template.disabled=!0,_e.grid.template.stroke=j.getFor("background"),_e.baseGrid.disabled=!0,_e.grid.template.strokeOpacity=.05,_e.minWidth=void 0,_e.minHeight=void 0,_e.chart=d,_e.padding(0,0,0,0),_e.margin(0,0,0,0),Pt.height=percent(100);var st=_e.labels.template;if(st.fillOpacity=.5,$.yAxis=Pt,Pt.maxZoomCount=void 0,Pt.minZoomCount=void 0,Pt instanceof DateAxis){var wt=Pt;wt.min=void 0,wt.max=void 0;var gt=c.yAxis;Pt.groupCount=gt.groupCount*5,this._disposers.push(wt.clonedFrom.events.on("extremeschanged",function(){isNumber$1(wt.clonedFrom.minDefined)&&(wt.min=wt.clonedFrom.minDefined),isNumber$1(wt.clonedFrom.maxDefined)&&(wt.max=wt.clonedFrom.maxDefined)}))}else if(Pt instanceof ValueAxis){var Ct=Pt;Ct.min=void 0,Ct.max=void 0,isNumber$1(Ct.clonedFrom.minDefined)||(Ct.min=void 0),isNumber$1(Ct.clonedFrom.maxDefined)||(Ct.max=void 0),this._disposers.push(Ct.clonedFrom.events.on("extremeschanged",function(){isNumber$1(Ct.clonedFrom.minDefined)&&(Ct.min=Ct.clonedFrom.minDefined),isNumber$1(Ct.clonedFrom.maxDefined)&&(Ct.max=Ct.clonedFrom.maxDefined)}))}}else this.scrollbarChart.yAxes.each(function(At){At.clonedFrom==c.yAxis&&($.yAxis=At)});$.rangeChangeDuration=0,$.interpolationDuration=0,$.defaultState.transitionDuration=0,$.showOnInit=!1,this._disposers.push($.events.on("validated",this.zoomOutAxes,this,!1)),this._disposers.push(c.events.on("datavalidated",function(){$.data!=c.data&&($.data=c.data)},void 0,!1)),$.defaultState.properties.visible=!0,d.series.push($),this.updateByOrientation()}},a.prototype.updateByOrientation=function(){var i=this;this._scrollbarChart&&(each(this._scrollbarChart.xAxes.iterator(),function(o){var c=o.renderer;i.orientation=="vertical"?(c.grid.template.disabled=!0,c.labels.template.disabled=!0,c.minGridDistance=10):(c.grid.template.disabled=!1,c.labels.template.disabled=!1,c.minGridDistance=o.clonedFrom.renderer.minGridDistance)}),each(this._scrollbarChart.yAxes.iterator(),function(o){var c=o.renderer;i.orientation=="horizontal"?(c.grid.template.disabled=!0,c.labels.template.disabled=!0,c.minGridDistance=10):(c.grid.template.disabled=!1,c.labels.template.disabled=!1,c.minGridDistance=o.clonedFrom.renderer.minGridDistance)}))},a.prototype.handleSeriesRemoved=function(i){var o=i.oldValue,c=this.scrollbarChart;c.series.each(function(d){d&&d.clonedFrom==o&&c.series.removeValue(d)}),c.series.length==0&&(c.xAxes.clear(),c.yAxes.clear());try{o.events.off("validated",this.zoomOutAxes,this)}catch{}},Object.defineProperty(a.prototype,"scrollbarChart",{get:function(){return this._scrollbarChart},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"chart",{get:function(){return this._chart.get()},set:function(i){this._chart.get()!==i&&(this._chart.set(i,i.events.on("datavalidated",this.handleDataChanged,this,!1)),this.handleDataChanged(),this._scrollbarChart.dataProvider=i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"unselectedOverlay",{get:function(){return this._unselectedOverlay},enumerable:!0,configurable:!0}),a.prototype.handleDataChanged=function(){this.chart.data!=this.scrollbarChart.data?this.scrollbarChart.data=this.chart.data:this.scrollbarChart.invalidateRawData()},a.prototype.zoomOutAxes=function(){var i=this.scrollbarChart;each(i.xAxes.iterator(),function(o){o.zoom({start:0,end:1},!0,!0)}),each(i.yAxes.iterator(),function(o){o.zoom({start:0,end:1},!0,!0)})},a.prototype.updateThumb=function(i){if(i===void 0&&(i=!0),e.prototype.updateThumb.call(this,i),this._unselectedOverlay){var o=this.thumb,c=o.pixelX||0,d=o.pixelY||0,g=o.pixelWidth||0,b=o.pixelHeight||0,j="";this.orientation=="horizontal"?(j=rectToPath({x:-1,y:0,width:c,height:b}),j+=rectToPath({x:c+g,y:0,width:(this.pixelWidth||0)-c-g,height:b})):(j=rectToPath({x:0,y:0,width:g,height:d}),j+=rectToPath({x:0,y:d+b,width:g,height:(this.pixelHeight||0)-d-b})),this._unselectedOverlay.path=j}},a.prototype.processConfig=function(i){if(i&&hasValue(i.series)&&isArray$1(i.series))for(var o=0,c=i.series.length;o<c;o++){var d=i.series[o];if(hasValue(d)&&isString$1(d))if(this.map.hasKey(d))i.series[o]=this.map.getKey(d);else throw Error("XYChartScrollbar error: Series with id `"+d+"` does not exist.")}e.prototype.processConfig.call(this,i)},a}(Scrollbar);registry.registeredClasses.XYChartScrollbar=XYChartScrollbar;var XYChartDataItem=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="XYChartDataItem",i.applyTheme(),i}return a}(SerialChartDataItem),XYChart=function(e){__extends(a,e);function a(){var i=e.call(this)||this;i._axisRendererX=AxisRendererX,i._axisRendererY=AxisRendererY,i._seriesPoints=[],i.className="XYChart",i.maskBullets=!0,i.arrangeTooltips=!0;var o=i.chartContainer;o.layout="vertical",i.padding(15,15,15,15);var c=o.createChild(Container);c.shouldClone=!1,c.layout="vertical",c.width=percent(100),c.zIndex=1,i.topAxesContainer=c;var d=o.createChild(Container);d.shouldClone=!1,d.layout="horizontal",d.width=percent(100),d.height=percent(100),d.zIndex=0,i.yAxesAndPlotContainer=d;var g=o.createChild(Container);g.shouldClone=!1,g.width=percent(100),g.layout="vertical",g.zIndex=1,i.bottomAxesContainer=g;var b=d.createChild(Container);b.shouldClone=!1,b.layout="horizontal",b.height=percent(100),b.contentAlign="right",b.events.on("transformed",i.updateXAxesMargins,i,!1),b.zIndex=1,i.leftAxesContainer=b;var j=d.createChild(Container);j.shouldClone=!1,j.height=percent(100),j.width=percent(100),j.background.fillOpacity=0,i.plotContainer=j,i.mouseWheelBehavior="none",i._cursorContainer=j;var $=d.createChild(Container);$.shouldClone=!1,$.layout="horizontal",$.height=percent(100),$.zIndex=1,$.events.on("transformed",i.updateXAxesMargins,i,!1),i.rightAxesContainer=$,i.seriesContainer.parent=j,i.bulletsContainer.parent=j;var rt=j.createChild(ZoomOutButton);rt.shouldClone=!1,rt.align="right",rt.valign="top",rt.zIndex=Number.MAX_SAFE_INTEGER,rt.marginTop=5,rt.marginRight=5,rt.hide(0),i.zoomOutButton=rt;var _e=i.plotContainer.createChild(Container);return _e.shouldClone=!1,_e.width=percent(100),_e.height=percent(100),_e.isMeasured=!1,_e.zIndex=4,_e.layout="none",i.axisBulletsContainer=_e,i._bulletMask=i.plotContainer,i.events.on("beforedatavalidated",function(){i.series.each(function(st){st.dataGrouped=!1,st._baseInterval={}})},i,!1),i.applyTheme(),i}return a.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),this.zoomOutButton.exportable=!1,hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("X/Y chart"))},a.prototype.draw=function(){e.prototype.draw.call(this),this.seriesContainer.toFront(),this.bulletsContainer.toFront(),this.maskBullets&&(this.bulletsContainer.mask=this._bulletMask),this.updateSeriesLegend()},a.prototype.updatePlotElements=function(){each(this.series.iterator(),function(i){i.invalidate()})},a.prototype.validateData=function(){this._parseDataFrom==0&&(each(this.xAxes.iterator(),function(i){i.dataChangeUpdate()}),each(this.yAxes.iterator(),function(i){i.dataChangeUpdate()}),each(this.series.iterator(),function(i){i.dataChangeUpdate()})),e.prototype.validateData.call(this)},a.prototype.updateXAxesMargins=function(){var i=this.leftAxesContainer.measuredWidth,o=this.rightAxesContainer.measuredWidth,c=this.bottomAxesContainer;(c.paddingLeft!=i||c.paddingRight!=o)&&(c.paddingLeft=i,c.paddingRight=o);var d=this.topAxesContainer;(d.paddingLeft!=i||d.paddingRight!=o)&&(d.paddingLeft=i,d.paddingRight=o)},a.prototype.reinit=function(){e.prototype.reinit.call(this),this.series.each(function(i){i.appeared=!1})},a.prototype.handleXAxisChange=function(i){this.updateXAxis(i.target)},a.prototype.handleYAxisChange=function(i){this.updateYAxis(i.target)},a.prototype.processXAxis=function(i){var o=i.newValue;o.chart=this,o.renderer||(o.renderer=new this._axisRendererX,o.renderer.observe(["opposite","inside","inversed","minGridDistance"],this.handleXAxisChange,this,!1)),o.axisLetter="X",o.events.on("startendchanged",this.handleXAxisRangeChange,this,!1),o.dataProvider=this,this.updateXAxis(o.renderer),this.processAxis(o)},a.prototype.processYAxis=function(i){var o=i.newValue;o.chart=this,o.renderer||(o.renderer=new this._axisRendererY,o.renderer.observe(["opposite","inside","inversed","minGridDistance"],this.handleYAxisChange,this,!1)),o.axisLetter="Y",o.events.on("startendchanged",this.handleYAxisRangeChange,this,!1),o.dataProvider=this,this.updateYAxis(o.renderer),this.processAxis(o)},a.prototype.handleXAxisRangeChange=function(){var i=this.getCommonAxisRange(this.xAxes);this.scrollbarX&&this.zoomAxes(this.xAxes,i,!0),this.toggleZoomOutButton(),this.updateScrollbar(this.scrollbarX,i)},a.prototype.toggleZoomOutButton=function(){if(this.zoomOutButton){var i=!1;eachContinue(this.xAxes.iterator(),function(o){if(o.toggleZoomOutButton){if(o.maxZoomCount>0){var c=o.maxZoomFactor/o.maxZoomCount;if(round$1(o.end-o.start,3)<1/c)return i=!0,!1}else if(round$1(o.start,3)>0||round$1(o.end,3)<1)return i=!0,!1}return!0}),eachContinue(this.yAxes.iterator(),function(o){if(o.toggleZoomOutButton){if(o.maxZoomCount>0){var c=o.maxZoomFactor/o.maxZoomCount;if(round$1(o.end-o.start,3)<1/c)return i=!0,!1}else if(round$1(o.start,3)>0||round$1(o.end,3)<1)return i=!0,!1;return!0}}),this.seriesAppeared||(i=!1),i?this.zoomOutButton.show():this.zoomOutButton.hide()}},a.prototype.seriesAppeared=function(){var i=!1;return each(this.series.iterator(),function(o){if(!o.appeared)return i=!1,!1}),i},a.prototype.handleYAxisRangeChange=function(){var i=this.getCommonAxisRange(this.yAxes);this.scrollbarY&&this.zoomAxes(this.yAxes,i,!0),this.toggleZoomOutButton(),this.updateScrollbar(this.scrollbarY,i)},a.prototype.updateScrollbar=function(i,o){i&&(i.skipRangeEvents(),i.start=o.start,i.end=o.end)},a.prototype.getCommonAxisRange=function(i){var o,c;return i.each(function(d){if(!(!d.zoomable||d instanceof ValueAxis&&d.syncWithAxis)){var g=d.start,b=d.end;d.renderer.inversed&&(g=1-d.end,b=1-d.start),(!isNumber$1(o)||g<o)&&(o=g),(!isNumber$1(c)||b>c)&&(c=b)}}),{start:o,end:c}},a.prototype.updateXAxis=function(i){var o=i.axis;i.opposite?(o.parent=this.topAxesContainer,o.toFront()):(o.parent=this.bottomAxesContainer,o.toBack()),o.renderer&&o.renderer.processRenderer()},a.prototype.updateYAxis=function(i){var o=i.axis;i.opposite?(o.parent=this.rightAxesContainer,o.toBack()):(o.parent=this.leftAxesContainer,o.toFront()),o.renderer&&o.renderer.processRenderer()},a.prototype.processAxis=function(i){var o=this;i instanceof CategoryAxis&&this._dataUsers.moveValue(i);var c=i.renderer;c.gridContainer.parent=this.plotContainer,c.gridContainer.toBack(),c.breakContainer.parent=this.plotContainer,c.breakContainer.toFront(),c.breakContainer.zIndex=10,i.addDisposer(new Disposer(function(){o.dataUsers.removeValue(i)})),c.bulletsContainer.parent=this.axisBulletsContainer,this._disposers.push(i.events.on("positionchanged",function(){var d=spritePointToSprite({x:0,y:0},i,o.axisBulletsContainer);i.renderer instanceof AxisRendererY&&(c.bulletsContainer.y=d.y),i.renderer instanceof AxisRendererX&&(c.bulletsContainer.x=d.x)},void 0,!1)),this.plotContainer.events.on("maxsizechanged",function(){o.inited&&(i.invalidateDataItems(),o.updateSeriesMasks())},i,!1)},a.prototype.updateSeriesMasks=function(){isIE()&&this.series.each(function(i){var o=i.mainContainer.mask;i.mainContainer.mask=void 0,i.mainContainer.mask=o})},a.prototype.handleSeriesRemoved=function(i){var o=i.oldValue;o&&(o.xAxis&&(o.xAxis.series.removeValue(o),o.xAxis.invalidateProcessedData()),o.yAxis&&(o.yAxis.series.removeValue(o),o.yAxis.invalidateProcessedData()),this.series.each(function(c){c.resetExtremes()})),e.prototype.handleSeriesRemoved.call(this,i)},Object.defineProperty(a.prototype,"xAxes",{get:function(){return this._xAxes||(this._xAxes=new List,this._xAxes.events.on("inserted",this.processXAxis,this,!1),this._xAxes.events.on("removed",this.handleAxisRemoval,this,!1),this._disposers.push(new ListDisposer(this._xAxes,!1))),this._xAxes},enumerable:!0,configurable:!0}),a.prototype.handleAxisRemoval=function(i){var o=i.oldValue;this.dataUsers.removeValue(o),o.autoDispose&&o.dispose()},Object.defineProperty(a.prototype,"yAxes",{get:function(){return this._yAxes||(this._yAxes=new List,this._yAxes.events.on("inserted",this.processYAxis,this,!1),this._yAxes.events.on("removed",this.handleAxisRemoval,this,!1),this._disposers.push(new ListDisposer(this._yAxes,!1))),this._yAxes},enumerable:!0,configurable:!0}),a.prototype.handleSeriesAdded=function(i){try{e.prototype.handleSeriesAdded.call(this,i);var o=i.newValue;(this.xAxes.length==0||this.yAxes.length==0)&&(registry.removeFromInvalidComponents(o),o.dataInvalid=!1),o.xAxis,o.yAxis,o.maskBullets=o.maskBullets,o.fill==null&&(this.patterns?(hasValue(o.stroke)||(o.stroke=this.colors.next()),o.fill=this.patterns.next(),hasValue(o.fillOpacity)&&(o.fill.backgroundOpacity=o.fillOpacity),o.stroke instanceof Color&&(o.fill.stroke=o.stroke,o.fill.fill=o.stroke)):o.fill=this.colors.next()),hasValue(o.stroke)||(o.stroke=o.fill)}catch(c){this.raiseCriticalError(c)}},Object.defineProperty(a.prototype,"cursor",{get:function(){return this._cursor},set:function(i){this._cursor!=i&&(this._cursor&&this.removeDispose(this._cursor),this._cursor=i,i&&(this._disposers.push(i),i.chart=this,i.shouldClone=!1,i.parent=this._cursorContainer,i.events.on("cursorpositionchanged",this.handleCursorPositionChange,this,!1),i.events.on("zoomstarted",this.handleCursorZoomStart,this,!1),i.events.on("zoomended",this.handleCursorZoomEnd,this,!1),i.events.on("panstarted",this.handleCursorPanStart,this,!1),i.events.on("panning",this.handleCursorPanning,this,!1),i.events.on("panended",this.handleCursorPanEnd,this,!1),i.events.on("behaviorcanceled",this.handleCursorCanceled,this,!1),i.events.on("hidden",this.handleHideCursor,this,!1),i.zIndex=Number.MAX_SAFE_INTEGER-1,this.tapToActivate&&this.setTapToActivate(this.tapToActivate)))},enumerable:!0,configurable:!0}),a.prototype.handleCursorPositionChange=function(){var i=this.cursor;if(i.visible&&!i.isHiding){var o=this.cursor.xPosition,c=this.cursor.yPosition;this.showSeriesTooltip({x:o,y:c});var d=[],g=i.snapToSeries;if(g&&!i.downPoint){g instanceof XYSeries&&(g=[g]);var b=[];each$2(g,function($){if(!$.isHidden&&!$.isHiding){var rt=$.xAxis,_e=$.yAxis;rt instanceof ValueAxis&&!(rt instanceof DateAxis)&&_e instanceof ValueAxis&&!(_e instanceof DateAxis)?($.dataItems.each(function(st){b.push(st)}),move(d,$.yAxis),move(d,$.xAxis)):($.baseAxis==$.xAxis&&(move(d,$.yAxis),b.push(rt.getSeriesDataItem($,rt.toAxisPosition(o),!0))),$.baseAxis==$.yAxis&&(move(d,$.xAxis),b.push(_e.getSeriesDataItem($,_e.toAxisPosition(c),!0))))}});var j=this.getClosest(b,o,c);j&&(this.series.each(function($){var rt=j.component;$!=rt&&($.hideTooltip(),$.xAxis!=rt.xAxis&&($.xAxis.hideTooltip(),d.push($.xAxis)),$.yAxis!=rt.yAxis&&($.yAxis.hideTooltip(),d.push($.yAxis)))}),j.component.showTooltipAtDataItem(j),i.handleSnap(j.component))}this._seriesPoints=[],this._cursorXPosition!=o&&this.showAxisTooltip(this.xAxes,o,d),this._cursorYPosition!=c&&this.showAxisTooltip(this.yAxes,c,d),this.arrangeTooltips&&this.sortSeriesTooltips(this._seriesPoints),this.legend&&this.legend.afterDraw()}},a.prototype.getClosest=function(i,o,c){var d=1/0,g;return eachContinue$2(i,function(b){if(b){var j=b.component.xAxis,$=b.component.yAxis,rt=j.positionToCoordinate(j.toGlobalPosition(j.toAxisPosition(o))),_e=$.positionToCoordinate($.toGlobalPosition($.toAxisPosition(c))),st=b.component.xField,ut=b.component.yField;if(j instanceof ValueAxis&&!isNumber$1(b.getValue(st))||$ instanceof ValueAxis&&!isNumber$1(b.getValue(ut)))return!0;var gt=j.positionToCoordinate(j.toGlobalPosition(j.getPositionX(b,st,b.locations[st],"valueX"))),yt=$.positionToCoordinate($.toGlobalPosition($.getPositionY(b,ut,b.locations[ut],"valueY"))),Pt=Math.sqrt(Math.pow(rt-gt,2)+Math.pow(_e-yt,2));return Pt<d&&(d=Pt,g=b),!0}}),g},a.prototype.handleHideCursor=function(){this.hideObjectTooltip(this.xAxes),this.hideObjectTooltip(this.yAxes),this.hideObjectTooltip(this.series),this._cursorXPosition=void 0,this._cursorYPosition=void 0,this.updateSeriesLegend()},a.prototype.updateSeriesLegend=function(){each(this.series.iterator(),function(i){i.updateLegendValue()})},a.prototype.hideObjectTooltip=function(i){each(i.iterator(),function(o){o.cursorTooltipEnabled&&o.hideTooltip(0)})},a.prototype.showSeriesTooltip=function(i){var o=this;if(!i){this.series.each(function(d){d.hideTooltip()});return}var c=[];this.series.each(function(d){if(!(d.xAxis instanceof DateAxis&&d.xAxis.snapTooltip||d.yAxis instanceof DateAxis&&d.yAxis.snapTooltip)){var g=d.showTooltipAtPosition(i.x,i.y);g&&(d.tooltip.setBounds(spriteRectToSvg({x:0,y:0,width:o.pixelWidth,height:o.pixelHeight},o)),c.push({series:d,point:g}))}}),this.arrangeTooltips&&this.sortSeriesTooltips(c)},a.prototype.sortSeriesTooltips=function(i){if(i.length>0){var o=this.cursor;if(o&&isNumber$1(o.maxTooltipDistance)){var c=spritePointToSvg({x:o.point.x,y:o.point.y},o),d,g,b=1/0;each$2(i,function(Gr){var hs=Gr.series,_s=Gr.point;if(_s){var hn={x:_s.x,y:_s.y},Qn=Math.abs(getDistance(hn,c));Qn<b&&(g=hn,b=Qn,d=hs)}});var j=[];d&&(each$2(i,function(Gr){if(Math.abs(getDistance(Gr.point,g))<=Math.abs(o.maxTooltipDistance))j.push({series:Gr.series,point:Gr.point});else{var hs=Gr.series.tooltipDataItem;hs&&each$2(hs.sprites,function(_s){_s.isHover=!1,_s.handleOutReal()}),Gr.series.hideTooltip(0)}}),o.maxTooltipDistance<0&&(j.length>0&&each$2(j,function(Gr){d!=Gr.series&&Gr.series.hideTooltip(0)}),j=[{series:d,point:g}])),i=j}var $=spritePointToSvg({x:-.5,y:-.5},this.plotContainer),rt=spritePointToSvg({x:this.plotContainer.pixelWidth+.5,y:this.plotContainer.pixelHeight+.5},this.plotContainer),_e=0,st=[];each$2(i,function(Gr){var hs=Gr.point;hs&&isInRectangle(hs,{x:$.x,y:$.y,width:rt.x-$.x,height:rt.y-$.y})&&(st.push({point:hs,series:Gr.series}),_e+=hs.y)}),i=st;var ut=this.series.getIndex(0),gt=!1;ut&&ut.yAxis&&ut.yAxis.renderer.inversed&&(gt=!0),gt?i.sort(function(Gr,hs){return order(Gr.point.y,hs.point.y)}):(i.sort(function(Gr,hs){return order(hs.point.y,Gr.point.y)}),i.reverse());var yt=_e/i.length,Pt=svgPointToDocument({x:0,y:0},this.svgContainer.SVGContainer).y;if(i.length>0){var wt=$.y,Ct=rt.y;spritePointToDocument({x:0,y:wt},this);var At=!1;if(yt>wt+(Ct-wt)/2)for(var Tt=Ct,kt=i.length-1;kt>=0;kt--){var It=i[kt].series,Lt=It.tooltip,Ft=i[kt].point.y;if(Lt.setBounds({x:0,y:-Pt,width:this.pixelWidth,height:Tt+Pt}),Lt.invalid&&Lt.validate(),Lt.toBack(),Tt=spritePointToSvg({x:0,y:Lt.label.pixelY-Lt.pixelY+Ft-Lt.pixelMarginTop},Lt).y,Tt<-Pt){At=!0;break}}if(yt<=wt+(Ct-wt)/2||At)for(var Nt=wt,kt=0,Ht=i.length;kt<Ht;kt++){var It=i[kt].series,Ft=i[kt].point.y,Lt=It.tooltip;Lt.setBounds({x:0,y:Nt,width:this.pixelWidth,height:Ct}),Lt.invalid&&Lt.validate(),Lt.toBack(),Nt=spritePointToSvg({x:0,y:Lt.label.pixelY+Lt.label.measuredHeight-Lt.pixelY+Ft+Lt.pixelMarginBottom},Lt).y}}}},a.prototype.showAxisTooltip=function(i,o,c){var d=this;each(i.iterator(),function(g){(!c||c.indexOf(g)==-1)&&(d.dataItems.length>0||g.dataItems.length>0)&&g.showTooltipAtPosition(o)})},a.prototype.getUpdatedRange=function(i,o){if(i){var c,d,g=i.renderer.inversed;g?(invertRange(o),c=1-i.end,d=1-i.start):(c=i.start,d=i.end);var b=d-c;return{start:c+o.start*b,end:c+o.end*b}}},a.prototype.handleCursorZoomEnd=function(i){var o=this.cursor,c=o.behavior;if(c=="zoomX"||c=="zoomXY"){var d=o.xRange;d&&this.xAxes.length>0&&(d=this.getUpdatedRange(this.xAxes.getIndex(0),d),d.priority="start",this.zoomAxes(this.xAxes,d))}if(c=="zoomY"||c=="zoomXY"){var g=o.yRange;g&&this.yAxes.length>0&&(g=this.getUpdatedRange(this.yAxes.getIndex(0),g),g.priority="start",this.zoomAxes(this.yAxes,g))}this.handleHideCursor()},a.prototype.handleCursorPanStart=function(i){var o=this.xAxes.getIndex(0);o&&(this._panStartXRange={start:o.start,end:o.end},o.renderer.inversed&&(this._panStartXRange=invertRange(this._panStartXRange)));var c=this.yAxes.getIndex(0);c&&(this._panStartYRange={start:c.start,end:c.end},c.renderer.inversed&&(this._panStartYRange=invertRange(this._panStartYRange)))},a.prototype.handleCursorPanEnd=function(i){var o=this.cursor,c=o.behavior;if(this._panEndXRange&&(c=="panX"||c=="panXY")){var d=this._panEndXRange,g=this._panStartXRange,b=0;d.start<0&&(b=d.start),g.end>1?d.end>g.end&&(b=d.end-g.end):d.end>1&&(b=d.end-1),this.zoomAxes(this.xAxes,{start:d.start-b,end:d.end-b},!1,o.snapOnPan),this._panEndXRange=void 0,this._panStartXRange=void 0}if(this._panEndYRange&&(c=="panY"||c=="panXY")){var d=this._panEndYRange,b=0;d.start<0&&(b=d.start),d.end>1&&(b=d.end-1),this.zoomAxes(this.yAxes,{start:d.start-b,end:d.end-b},!1,o.snapOnPan),this._panEndYRange=void 0,this._panStartYRange=void 0}},a.prototype.handleCursorCanceled=function(){this._panEndXRange=void 0,this._panStartXRange=void 0},a.prototype.handleCursorPanning=function(i){var o=this.cursor,c=o.behavior,d=o.maxPanOut;if(this._panStartXRange&&(c=="panX"||c=="panXY")){var g=this._panStartXRange,b=o.xRange,j=this.getCommonAxisRange(this.xAxes),$=g.end-g.start,rt=b.start*(j.end-j.start),_e=Math.max(-d,rt+g.start),st=Math.min(rt+g.end,1+d);_e<=0&&(st=_e+$),st>=1&&(_e=st-$);var ut={start:_e,end:st};this._panEndXRange=ut,this.zoomAxes(this.xAxes,ut,!1,!1,o.maxPanOut)}if(this._panStartYRange&&(c=="panY"||c=="panXY")){var g=this._panStartYRange,b=o.yRange,j=this.getCommonAxisRange(this.yAxes),$=g.end-g.start,rt=b.start*(j.end-j.start),_e=Math.max(-d,rt+g.start),st=Math.min(rt+g.end,1+d);_e<=0&&(st=_e+$),st>=1&&(_e=st-$);var ut={start:_e,end:st};this._panEndYRange=ut,this.zoomAxes(this.yAxes,ut,!1,!1,o.maxPanOut)}this.handleHideCursor()},a.prototype.handleYAxisSet=function(i){},a.prototype.handleCursorZoomStart=function(i){},Object.defineProperty(a.prototype,"scrollbarX",{get:function(){return this._scrollbarX},set:function(i){var o=this;this._scrollbarX&&this.removeDispose(this._scrollbarX),this._scrollbarX=i,i&&(this._disposers.push(i),i.parent=this.topAxesContainer,i.shouldClone=!1,i.startGrip.exportable=!1,i.endGrip.exportable=!1,i.toBack(),i.orientation="horizontal",i.events.on("rangechanged",this.handleXScrollbarChange,this,!1),this.events.on("datavalidated",function(){return i.updateThumb(!1)},this,!1),i.adapter.add("positionValue",function(c){var d=o.xAxes.getIndex(0);return d&&(c.value=d.getPositionLabel(d.renderer.inversed?1-c.position:c.position)),c}),i.adapter.add("positionValueDirection",function(c){var d=o.xAxes.getIndex(0);return d&&(c.flipped=d.renderer.inversed),c}))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"scrollbarY",{get:function(){return this._scrollbarY},set:function(i){var o=this;this._scrollbarY&&this.removeDispose(this._scrollbarY),this._scrollbarY=i,i&&(this._disposers.push(i),i.parent=this.rightAxesContainer,i.startGrip.exportable=!1,i.shouldClone=!1,i.endGrip.exportable=!1,i.toFront(),i.orientation="vertical",i.events.on("rangechanged",this.handleYScrollbarChange,this,!1),this.events.on("datavalidated",function(){return i.updateThumb(!1)},this,!1),i.adapter.add("positionValue",function(c){var d=o.yAxes.getIndex(0);return d&&(c.value=d.getPositionLabel(d.renderer.inversed?c.position:1-c.position)),c}),i.adapter.add("positionValueDirection",function(c){var d=o.yAxes.getIndex(0);return d&&(c.flipped=!d.renderer.inversed),c}))},enumerable:!0,configurable:!0}),a.prototype.handleXScrollbarChange=function(i){if(this.inited){var o=i.target,c=o.range;c.start==0&&(c.priority="start"),c.end==1&&(c.priority="end"),c=this.zoomAxes(this.xAxes,c),o.fixRange(c)}},a.prototype.handleYScrollbarChange=function(i){if(this.inited){var o=i.target,c=o.range;c.end==1&&(c.priority="end"),c.start==0&&(c.priority="start"),c=this.zoomAxes(this.yAxes,c),o.fixRange(c)}},a.prototype.zoomAxes=function(i,o,c,d,g,b){var j={start:0,end:1};this.showSeriesTooltip();var $=o;return this.dataInvalid||each(i.iterator(),function(rt){var _e=rt.maxZoomFactor;if(isNumber$1(rt.minZoomCount)&&(_e=_e/rt.minZoomCount),!(b&&1/(o.end-o.start)>=_e)){if(rt.zoomable){if(rt.renderer.inversed?o=invertRange($):o=$,rt.hideTooltip(0),d)if(rt instanceof CategoryAxis){var st=rt.getCellEndPosition(0)-rt.getCellStartPosition(0);o.start=rt.roundPosition(o.start+st/2-rt.startLocation*st,rt.startLocation),o.end=rt.roundPosition(o.end-st/2+(1-rt.endLocation)*st,rt.endLocation)}else{var ut=1e-4;o.start=rt.roundPosition(o.start+ut,0,rt.startLocation),o.end=rt.roundPosition(o.end+ut,0,rt.endLocation)}var gt=rt.zoom(o,c,c,g);rt.renderer.inversed&&(gt=invertRange(gt)),j=gt}}}),j},Object.defineProperty(a.prototype,"maskBullets",{get:function(){return this.getPropertyValue("maskBullets")},set:function(i){this.setPropertyValue("maskBullets",i,!0)&&this.bulletsContainer&&(i?this.bulletsContainer.mask=this._bulletMask:this.bulletsContainer.mask=void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"arrangeTooltips",{get:function(){return this.getPropertyValue("arrangeTooltips")},set:function(i){this.setPropertyValue("arrangeTooltips",i,!0)},enumerable:!0,configurable:!0}),a.prototype.handleWheel=function(i){var o=this.plotContainer,c=documentPointToSvg(i.point,this.htmlContainer,this.svgContainer.cssScale),d=svgPointToSprite(c,o),g=i.shift.y;this.handleWheelReal(g,this.mouseWheelBehavior,d)},a.prototype.handleHorizontalWheel=function(i){var o=this.plotContainer,c=documentPointToSvg(i.point,this.htmlContainer,this.svgContainer.cssScale),d=svgPointToSprite(c,o);this.handleWheelReal(i.shift.x,this.horizontalMouseWheelBehavior,d)},a.prototype.handleWheelReal=function(i,o,c){if(i!=0){var d=this.plotContainer,g=this.getCommonAxisRange(this.xAxes),b=this.getCommonAxisRange(this.yAxes),j=.1,$=0;if(o=="panX"||o=="panXY"){var rt=this.xAxes.getIndex(0),_e=!1,st=j;rt instanceof CategoryAxis&&(st=.5/((g.end-g.start)*rt.dataItems.length),_e=!0),j=Math.max(.2,st);var ut=g.end-g.start,gt=Math.max(-$,g.start+j*i/100*(g.end-g.start)),yt=Math.min(g.end+j*i/100*(g.end-g.start),1+$);gt<=0&&(yt=gt+ut),yt>=1&&(gt=yt-ut),this.zoomAxes(this.xAxes,{start:gt,end:yt},void 0,_e)}if(o=="panY"||o=="panXY"){var Pt=this.yAxes.getIndex(0),st=j,_e=!1;Pt instanceof CategoryAxis&&(st=.5/((g.end-g.start)*Pt.dataItems.length),_e=!0),j=Math.max(.2,st),i*=-1;var wt=b.end-b.start,Ct=Math.max(-$,b.start+j*i/100*(b.end-b.start)),At=Math.min(b.end+j*i/100*(b.end-b.start),1+$);Ct<=0&&(At=Ct+wt),At>=1&&(Ct=At-wt),this.zoomAxes(this.yAxes,{start:Ct,end:At},void 0,_e)}if(o=="zoomX"||o=="zoomXY"){var Tt=c.x/d.maxWidth,kt=this.xAxes.getIndex(0).toAxisPosition(Tt),gt=Math.max(-$,g.start-j*(g.end-g.start)*i/100*Tt);gt=Math.min(gt,kt);var yt=Math.min(g.end+j*(g.end-g.start)*i/100*(1-Tt),1+$);yt=Math.max(yt,kt),this.zoomAxes(this.xAxes,{start:gt,end:yt},void 0)}if(o=="zoomY"||o=="zoomXY"){var It=c.y/d.maxHeight,Lt=this.yAxes.getIndex(0).toAxisPosition(It),Ct=Math.max(-$,b.start-j*(b.end-b.start)*i/100*(1-It));Ct=Math.min(Ct,Lt);var At=Math.min(b.end+j*i/100*It*(b.end-b.start),1+$);At=Math.max(At,Lt),this.zoomAxes(this.yAxes,{start:Ct,end:At},void 0)}}},Object.defineProperty(a.prototype,"mouseWheelBehavior",{get:function(){return this.getPropertyValue("mouseWheelBehavior")},set:function(i){this.setPropertyValue("mouseWheelBehavior",i)&&(i!="none"?(this._mouseWheelDisposer=this.plotContainer.events.on("wheel",this.handleWheel,this,!1),this._disposers.push(this._mouseWheelDisposer)):this._mouseWheelDisposer&&(this.plotContainer.wheelable=!1,this.plotContainer.hoverable=!1,this._mouseWheelDisposer.dispose()))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"horizontalMouseWheelBehavior",{get:function(){return this.getPropertyValue("horizontalMouseWheelBehavior")},set:function(i){this.setPropertyValue("horizontalMouseWheelBehavior",i)&&(i!="none"?(this._mouseWheelDisposer2=this.plotContainer.events.on("wheel",this.handleHorizontalWheel,this,!1),this._disposers.push(this._mouseWheelDisposer2)):this._mouseWheelDisposer2&&(this.plotContainer.wheelable=!1,this.plotContainer.hoverable=!1,this._mouseWheelDisposer2.dispose()))},enumerable:!0,configurable:!0}),a.prototype.dataSourceDateFields=function(i){var o=this;return i=e.prototype.dataSourceDateFields.call(this,i),each(this.series.iterator(),function(c){i=o.populateDataSourceFields(i,c.dataFields,["dateX","dateY","openDateX","openDateY"])}),i},a.prototype.dataSourceNumberFields=function(i){var o=this;return i=e.prototype.dataSourceDateFields.call(this,i),each(this.series.iterator(),function(c){i=o.populateDataSourceFields(i,c.dataFields,["valueX","valueY","openValueX","openValueY"])}),i},a.prototype.processConfig=function(i){if(i){var o=[],c=[];if(hasValue(i.xAxes)&&isArray$1(i.xAxes))for(var d=0,g=i.xAxes.length;d<g;d++)if(i.xAxes[d].type){if(hasValue(i.xAxes[d].axisRanges)){for(var b=0,j=i.xAxes[d].axisRanges.length;b<j;b++){var $=i.xAxes[d].axisRanges[b];hasValue($.date)&&isString$1($.date)&&($.date=this.dateFormatter.parse($.date)),hasValue($.endDate)&&isString$1($.endDate)&&($.endDate=this.dateFormatter.parse($.endDate))}o.push({axisRanges:i.xAxes[d].axisRanges,index:d}),delete i.xAxes[d].axisRanges}}else throw Error("[XYChart error] No type set for xAxes["+d+"].");if(hasValue(i.yAxes)&&isArray$1(i.yAxes))for(var d=0,g=i.yAxes.length;d<g;d++)if(i.yAxes[d].type){if(hasValue(i.yAxes[d].axisRanges)){for(var b=0,rt=i.yAxes[d].axisRanges.length;b<rt;b++){var $=i.yAxes[d].axisRanges[b];hasValue($.date)&&isString$1($.date)&&($.date=this.dateFormatter.parse($.date)),hasValue($.endDate)&&isString$1($.endDate)&&($.endDate=this.dateFormatter.parse($.endDate))}c.push({axisRanges:i.yAxes[d].axisRanges,index:d}),delete i.yAxes[d].axisRanges}}else throw Error("[XYChart error] No type set for yAxes["+d+"].");if(hasValue(i.series)&&isArray$1(i.series))for(var d=0,g=i.series.length;d<g;d++)i.series[d].type=i.series[d].type||"LineSeries";if(hasValue(i.cursor)&&!hasValue(i.cursor.type)&&(i.cursor.type="XYCursor"),hasValue(i.scrollbarX)&&!hasValue(i.scrollbarX.type)&&(i.scrollbarX.type="Scrollbar"),hasValue(i.scrollbarY)&&!hasValue(i.scrollbarY.type)&&(i.scrollbarY.type="Scrollbar"),e.prototype.processConfig.call(this,i),c.length)for(var d=0,g=c.length;d<g;d++)this.yAxes.getIndex(c[d].index).config={axisRanges:c[d].axisRanges};if(o.length)for(var d=0,g=o.length;d<g;d++)this.xAxes.getIndex(o[d].index).config={axisRanges:o[d].axisRanges}}},a.prototype.configOrder=function(i,o){return i==o?0:i=="scrollbarX"?1:o=="scrollbarX"?-1:i=="scrollbarY"?1:o=="scrollbarY"?-1:i=="cursor"?1:o=="cursor"?-1:i=="series"?1:o=="series"?-1:e.prototype.configOrder.call(this,i,o)},a.prototype.createSeries=function(){return new XYSeries},Object.defineProperty(a.prototype,"zoomOutButton",{get:function(){return this._zoomOutButton},set:function(i){var o=this;this._zoomOutButton=i,i&&i.events.on("hit",function(){o.zoomAxes(o.xAxes,{start:0,end:1}),o.zoomAxes(o.yAxes,{start:0,end:1})},void 0,!1)},enumerable:!0,configurable:!0}),a.prototype.copyFrom=function(i){var o=this;i.xAxes.each(function(c){var d=o.xAxes.push(c.clone());d.chart=o,d.renderer.chart=o}),i.yAxes.each(function(c){var d=o.yAxes.push(c.clone());d.renderer.chart=o,d.chart=o}),e.prototype.copyFrom.call(this,i),i.cursor&&(this.cursor=i.cursor.clone()),i.scrollbarX&&(this.scrollbarX=i.scrollbarX.clone()),i.scrollbarY&&(this.scrollbarY=i.scrollbarY.clone())},a.prototype.disposeData=function(){e.prototype.disposeData.call(this);var i=this.scrollbarX;i&&i instanceof XYChartScrollbar&&i.scrollbarChart.disposeData();var o=this.scrollbarY;o&&o instanceof XYChartScrollbar&&o.scrollbarChart.disposeData(),this.xAxes.each(function(c){c instanceof CategoryAxis&&c.disposeData()}),this.yAxes.each(function(c){c instanceof CategoryAxis&&c.disposeData()})},a.prototype.addData=function(i,o){this.scrollbarX instanceof XYChartScrollbar&&this.addScrollbarData(this.scrollbarX,o),this.scrollbarY instanceof XYChartScrollbar&&this.addScrollbarData(this.scrollbarY,o),e.prototype.addData.call(this,i,o)},a.prototype.addScrollbarData=function(i,o){var c=i.scrollbarChart;c._parseDataFrom=c.data.length,c.invalidateData()},a.prototype.removeScrollbarData=function(i,o){var c=i.scrollbarChart;if(isNumber$1(o)){for(;o>0;){var d=this.dataItems.getIndex(0);d&&c.dataItems.remove(d),c.dataUsers.each(function(g){var b=g.dataItems.getIndex(0);b&&g.dataItems.remove(b)}),c._parseDataFrom--,o--}c.invalidateData()}},a.prototype.removeData=function(i){this.scrollbarX instanceof XYChartScrollbar&&this.removeScrollbarData(this.scrollbarX,i),this.scrollbarY instanceof XYChartScrollbar&&this.removeScrollbarData(this.scrollbarY,i),e.prototype.removeData.call(this,i)},a.prototype.setTapToActivate=function(i){e.prototype.setTapToActivate.call(this,i),this.cursor&&(this.cursor.interactions.isTouchProtected=i,this.plotContainer.interactions.isTouchProtected=i)},a.prototype.handleTapToActivate=function(){e.prototype.handleTapToActivate.call(this),this.cursor&&(this.cursor.interactions.isTouchProtected=!1,this.plotContainer.interactions.isTouchProtected=!1)},a.prototype.handleTapToActivateDeactivation=function(){e.prototype.handleTapToActivateDeactivation.call(this),this.cursor&&(this.cursor.interactions.isTouchProtected=!0,this.plotContainer.interactions.isTouchProtected=!0)},a}(SerialChart);registry.registeredClasses.XYChart=XYChart;defaultRules.push({relevant:ResponsiveBreakpoints.maybeXS,state:function(e,a){if(e instanceof XYChart&&e.scrollbarX){var i=e.states.create(a),o=e.scrollbarX.states.create(a);return o.properties.disabled=!0,i}return null}});defaultRules.push({relevant:ResponsiveBreakpoints.maybeXS,state:function(e,a){if(e instanceof XYChart&&e.scrollbarY){var i=e.states.create(a),o=e.scrollbarY.states.create(a);return o.properties.disabled=!0,i}return null}});var LineSeriesSegment=function(e){__extends(a,e);function a(){var i=e.call(this)||this;i.className="LineSeriesSegment",i.isMeasured=!1,i.interactionsEnabled=!1,i.layout="none";var o=i.createChild(Sprite);i.fillSprite=o,o.shouldClone=!1,o.setElement(i.paper.add("path")),o.isMeasured=!1,i._disposers.push(o);var c=i.createChild(Sprite);return i.strokeSprite=c,c.shouldClone=!1,c.fill=color(),c.setElement(i.paper.add("path")),c.isMeasured=!1,i._disposers.push(c),i}return a.prototype.drawSegment=function(i,o,c,d){if(!this.disabled)if(i.length>0&&o.length>0&&isNumber$1(i[0].x)&&isNumber$1(i[0].y)){var g=moveTo({x:i[0].x-.2,y:i[0].y-.2})+moveTo(i[0]),b=this.series;b.smoothing=="bezier"?g+=new Tension(c,d).smooth(i):b.smoothing=="monotoneX"?g+=new MonotoneX({closed:!1}).smooth(i):b.smoothing=="monotoneY"&&(g+=new MonotoneY({closed:!1}).smooth(i)),this.strokeOpacity==0||this.strokeSprite.strokeOpacity==0||(this.strokeSprite.path=g),(this.fillOpacity>0||this.fillSprite.fillOpacity>0)&&isNumber$1(o[0].x)&&isNumber$1(o[0].y)&&(g+=lineTo(o[0]),b.smoothing=="bezier"?g+=new Tension(c,d).smooth(o):b.smoothing=="monotoneX"?g+=new MonotoneX({closed:!1}).smooth(o):b.smoothing=="monotoneY"&&(g+=new MonotoneY({closed:!1}).smooth(o)),g+=lineTo(i[0]),g+=closePath(),this.fillSprite.path=g)}else this.fillSprite.path="",this.strokeSprite.path=""},a.prototype.copyFrom=function(i){e.prototype.copyFrom.call(this,i);var o=this.strokeSprite;copyProperties$1(i,o.properties,visualProperties),o.events.copyFrom(i.strokeSprite.events),o.fillOpacity=0;var c=this.fillSprite;copyProperties$1(i,c.properties,visualProperties),c.events.copyFrom(i.fillSprite.events),c.strokeOpacity=0},a}(Container);registry.registeredClasses.LineSeriesSegment=LineSeriesSegment;var DurationAxisDataItem=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="DurationAxisDataItem",i.applyTheme(),i}return a}(ValueAxisDataItem),DurationAxis=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i._baseUnit="second",i.className="DurationAxis",i.setPropertyValue("maxZoomFactor",1e6),i.applyTheme(),i}return a.prototype.formatLabel=function(i,o){return this.durationFormatter.format(i,o||this.axisDurationFormat)},a.prototype.adjustMinMax=function(i,o,c,d,g){var b,j,$,rt=this.baseUnit;if(this.setPropertyValue("maxPrecision",0),rt=="millisecond"||rt=="second"||rt=="minute"||rt=="hour"){d<=1&&(d=1),d=Math.round(d);var _e=i,st=o;c===0&&(c=Math.abs(o));var ut=c/d,gt=[60,30,20,15,10,2,1],yt=1;rt=="hour"&&(gt=[24,12,6,4,2,1]);try{for(var Pt=__values(gt),wt=Pt.next();!wt.done;wt=Pt.next()){var Ct=wt.value;if(c/Ct>d){yt=Ct;break}}}catch(Ft){b={error:Ft}}finally{try{wt&&!wt.done&&(j=Pt.return)&&j.call(Pt)}finally{if(b)throw b.error}}var At=Math.ceil((o-i)/yt/d),Tt=Math.log(Math.abs(At))*Math.LOG10E,kt=Math.pow(10,Math.floor(Tt))/10,It=At/kt,Lt=closest(gt,It);At=Lt*kt,ut=yt*At,this.durationFormatter.getValueUnit(ut,this.baseUnit),i=Math.floor(i/ut)*ut,o=Math.ceil(o/ut)*ut,g&&(i-=ut,i<0&&_e>=0&&(i=0),o+=ut,o>0&&st<=0&&(o=0)),$={min:i,max:o,step:ut}}else $=e.prototype.adjustMinMax.call(this,i,o,c,d,g);return this.axisDurationFormat=this.durationFormatter.getFormat($.step,$.max,this.baseUnit),$},Object.defineProperty(a.prototype,"tooltipDurationFormat",{get:function(){return this._tooltipDurationFormat},set:function(i){this._tooltipDurationFormat=i},enumerable:!0,configurable:!0}),a.prototype.getTooltipText=function(i){var o=round$1(this.positionToValue(i),this._stepDecimalPlaces),c=this.formatLabel(o,this.tooltipDurationFormat);return this._adapterO?this._adapterO.apply("getTooltipText",c):c},Object.defineProperty(a.prototype,"baseUnit",{get:function(){return this._baseUnit},set:function(i){this._baseUnit!=i&&(this._baseUnit=i,this.durationFormatter.baseUnit=i,this.invalidate())},enumerable:!0,configurable:!0}),a.prototype.copyFrom=function(i){e.prototype.copyFrom.call(this,i),this.baseUnit=i.baseUnit},a}(ValueAxis);registry.registeredClasses.DurationAxis=DurationAxis;registry.registeredClasses.DurationAxisDataItem=DurationAxisDataItem;var LineSeriesDataItem=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="LineSeriesDataItem",i}return a}(XYSeriesDataItem),LineSeries=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.minDistance=.5,i.segments=new ListTemplate(i.createSegment()),i.segments.template.applyOnClones=!0,i._disposers.push(new ListDisposer(i.segments)),i._disposers.push(i.segments.template),i._segmentsIterator=new ListIterator(i.segments,function(){return i.segments.create()}),i._segmentsIterator.createNewItems=!0,i.className="LineSeries",i.strokeOpacity=1,i.fillOpacity=0,i.connect=!0,i.tensionX=1,i.tensionY=1,i.autoGapCount=1.1,i.smoothing="bezier",i.segmentsContainer=i.mainContainer.createChild(Container),i.segmentsContainer.isMeasured=!1,i.bulletsContainer.toFront(),i.applyTheme(),i}return a.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("Line Series"))},a.prototype.createSegment=function(){return new LineSeriesSegment},a.prototype.createDataItem=function(){return new LineSeriesDataItem},a.prototype.setInitialWorkingValues=function(i){var o=this._yAxis.get(),c=this._xAxis.get();if(this.appeared&&this.visible){var d=this.dataItems.getIndex(i.index-1);if(i.component=this,this.baseAxis==c&&o instanceof ValueAxis){var g=o.minZoomed;if(d&&(g=d.values.valueY.workingValue),i.setWorkingValue("valueY",g,0),i.setWorkingValue("valueY",i.values.valueY.value),c instanceof DateAxis)i.setWorkingLocation("dateX",i.locations.dateX-1,0),i.setWorkingLocation("dateX",i.locations.dateX);else if(c instanceof DurationAxis&&d){var b=i.valueX;i.setWorkingValue("valueX",d.valueX,0),i.setWorkingValue("valueX",b)}}if(this.baseAxis==o&&c instanceof ValueAxis){var j=c.minZoomed;if(d&&(j=d.values.valueX.workingValue),i.setWorkingValue("valueX",j,0),i.setWorkingValue("valueX",i.values.valueX.value),o instanceof DateAxis)i.setWorkingLocation("dateY",i.locations.dateX-1,0),i.setWorkingLocation("dateY",i.locations.dateY);else if(o instanceof DurationAxis&&d){var b=i.valueY;i.setWorkingValue("valueY",d.valueY,0),i.setWorkingValue("valueY",b)}}}else this.baseAxis==c&&o instanceof ValueAxis&&(c instanceof DateAxis&&i.setWorkingLocation("dateX",i.locations.dateX),c instanceof CategoryAxis&&i.setWorkingLocation("categoryX",i.locations.categoryX)),this.baseAxis==o&&c instanceof ValueAxis&&(o instanceof DateAxis&&i.setWorkingLocation("dateY",i.locations.dateY),o instanceof CategoryAxis&&i.setWorkingLocation("categoryY",i.locations.categoryY))},a.prototype.updateLegendValue=function(i,o){e.prototype.updateLegendValue.call(this,i,o),i&&i.segment&&(this.tooltipColorSource=i.segment)},a.prototype.validate=function(){var i=this;e.prototype.validate.call(this),this.xAxis&&this.yAxis&&(this._segmentsIterator.reset(),this.openSegmentWrapper(this._adjustedStartIndex),each(this.axisRanges.iterator(),function(o){i.openSegmentWrapper(i._adjustedStartIndex,o)}),each(this._segmentsIterator.iterator(),function(o){o.__disabled=!0}))},a.prototype.sliceData=function(){for(var i=this.startIndex,o=this.endIndex,c=this.startIndex-1;c>=0;c--){var d=this.dataItems.getIndex(c);if(d&&d.hasValue(this._xValueFields)&&d.hasValue(this._yValueFields)){i=c;break}}this._adjustedStartIndex=this.findAdjustedIndex(i,["stroke","strokeWidth","strokeDasharray","strokeOpacity","fill","fillOpacity","opacity"]);for(var c=this.endIndex,g=this.dataItems.length;c<g;c++){var d=this.dataItems.getIndex(c);if(d&&d.hasValue(this._xValueFields)&&d.hasValue(this._yValueFields)){o=c+1;break}}this._workingStartIndex=i,this._workingEndIndex=o},a.prototype.findAdjustedIndex=function(i,o){var c=this,d=this.propertyFields,g=i;return each$2(o,function(b){if(hasValue(d[b]))for(var j=g;j>=0;j--){var $=c.dataItems.getIndex(j);if($&&hasValue($.properties[b])){i>j&&(i=j);break}}}),i},a.prototype.openSegmentWrapper=function(i,o){var c={index:i,axisRange:o};do c=this.openSegment(c.index,c.axisRange);while(c)},a.prototype.getSegment=function(){var i=this._segmentsIterator.getFirst();return i.series=this,i.isDisposed()?(this.segments.removeValue(i),this.getSegment()):i},a.prototype.openSegment=function(i,o){var c=!1,d=[];i=Math.min(i,this.dataItems.length);var g=Math.min(this._workingEndIndex,this.dataItems.length);this._workingEndIndex=Math.min(this._workingEndIndex,this.dataItems.length);var b,j=!1,$=this.getSegment();$.strokeDasharray=void 0,$.__disabled=!1,o?($.parent=o.contents,copyProperties$1(o.contents,$,visualProperties)):(copyProperties$1(this,$,visualProperties),$.filters.clear(),$.parent=this.segmentsContainer),this.group.node.removeAttribute("fill");for(var rt=this.connect,_e=!1,st=i;st<g;st++){var ut=this.dataItems.getIndex(st);if(ut.segment=$,ut.hasProperties&&(st==i?this.updateSegmentProperties(ut.properties,$):j=this.updateSegmentProperties(ut.properties,$,!0)),ut.hasValue(this._xValueFields)&&ut.hasValue(this._yValueFields))this.addPoints(d,ut,this.xField,this.yField),_e=!0;else{if(st==i)continue;if(!rt&&_e){b=st;break}}if(b=st,this.baseAxis instanceof DateAxis){var gt=this.dataItems.getIndex(st+1);if(gt&&this.baseAxis.makeGap(gt,ut)){c=!0;break}}if(j)break}return this.closeSegment($,d,i,b,o,c)},a.prototype.addPoints=function(i,o,c,d,g){var b=this.getPoint(o,c,d,o.workingLocations[c],o.workingLocations[d]);g||(o.point=b),i.push(b)},a.prototype.closeSegment=function(i,o,c,d,g,b){var j=[];if(this.dataFields[this._xOpenField]||this.dataFields[this._yOpenField]||this.stacked)for(var $=d;$>=c;$--){var rt=this.dataItems.getIndex($);rt.hasValue(this._xValueFields)&&rt.hasValue(this._yValueFields)&&this.addPoints(j,rt,this.xOpenField,this.yOpenField,!0)}else{var _e=this.baseAxis,st=o.length,ut=this.xAxis,gt=this.yAxis;st>0&&(_e==ut?(j.push({x:o[st-1].x,y:gt.basePoint.y}),j.push({x:o[0].x,y:gt.basePoint.y})):(j.push({x:ut.basePoint.x,y:o[st-1].y}),j.push({x:ut.basePoint.x,y:o[0].y})))}return this.drawSegment(i,o,j),b&&d++,d<this._workingEndIndex-1?{index:d,axisRange:g}:null},a.prototype.drawSegment=function(i,o,c){i.drawSegment(o,c,this.tensionX,this.tensionY)},a.prototype.updateSegmentProperties=function(i,o,c){var d=!1;return each$1(i,function(g,b){if(hasValue(b)){var j=o[g],$=void 0;j&&(j.toString?$=j.toString():$=j);var rt=void 0;b&&(b.toString?rt=b.toString():rt=b),j==b||$!=null&&rt!=null&&$==rt||(c||(o[g]=b),d=!0)}}),d},Object.defineProperty(a.prototype,"connect",{get:function(){return this.getPropertyValue("connect")},set:function(i){this.setPropertyValue("connect",i)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"tensionX",{get:function(){return this.getPropertyValue("tensionX")},set:function(i){this.setPropertyValue("tensionX",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"tensionY",{get:function(){return this.getPropertyValue("tensionY")},set:function(i){this.setPropertyValue("tensionY",i,!0)},enumerable:!0,configurable:!0}),a.prototype.createLegendMarker=function(i){var o=this,c=i.pixelWidth,d=i.pixelHeight;i.disposeChildren();var g=i.createChild(Line);if(g.shouldClone=!1,copyProperties$1(this,g,visualProperties),g.x2=c,g.y=d/2,g.y2=1e-5,g.visible=!0,this.fillOpacity>0){var b=i.createChild(Rectangle);copyProperties$1(this,b,visualProperties),b.width=c,b.height=d,b.y=0,b.strokeOpacity=0,b.visible=!0,g.y=0}var j=i.dataItem;j.color=this.stroke,j.colorOrig=this.fill,eachContinue(this.bullets.iterator(),function($){if($ instanceof Bullet&&!$.copyToLegendMarker)return!1;var rt=!1;if($ instanceof Container&&each($.children.iterator(),function(st){if(st instanceof Label)return rt=!0,!0}),!rt){var _e=$.clone();return _e.parent=i,_e.isMeasured=!0,_e.tooltipText=void 0,_e.x=c/2,o.fillOpacity>0?_e.y=0:_e.y=d/2,_e.visible=!0,hasValue(_e.fill)||(_e.fill=o.fill),hasValue(_e.stroke)||(_e.stroke=o.stroke),!1}})},a.prototype.disposeData=function(){e.prototype.disposeData.call(this),this.segments.clear()},Object.defineProperty(a.prototype,"autoGapCount",{get:function(){return this.getPropertyValue("autoGapCount")},set:function(i){this.setPropertyValue("autoGapCount",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"smoothing",{get:function(){return this.getPropertyValue("smoothing")},set:function(i){this.setPropertyValue("smoothing",i,!0)},enumerable:!0,configurable:!0}),a}(XYSeries);registry.registeredClasses.LineSeries=LineSeries;registry.registeredClasses.LineSeriesDataItem=LineSeriesDataItem;var RadarSeriesDataItem=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="RadarSeriesDataItem",i.setLocation("dateX",0,0),i.setLocation("dateY",0,0),i.setLocation("categoryX",0,0),i.setLocation("categoryY",0,0),i.applyTheme(),i}return a}(LineSeriesDataItem),RadarSeries=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="RadarSeries",i.connectEnds=!0,i.applyTheme(),i}return a.prototype.validate=function(){this.chart.invalid&&this.chart.validate(),e.prototype.validate.call(this)},a.prototype.createDataItem=function(){return new RadarSeriesDataItem},a.prototype.getPoint=function(i,o,c,d,g,b,j){b||(b="valueX"),j||(j="valueY");var $=this.yAxis.getX(i,c,g,j),rt=this.yAxis.getY(i,c,g,j),_e=getDistance({x:$,y:rt});_e==0&&(_e=1e-5);var st=this.xAxis.getAngle(i,o,d,b),ut=this.chart.startAngle,gt=this.chart.endAngle;if(!(st<ut||st>gt))return{x:_e*cos(st),y:_e*sin(st)}},a.prototype.addPoints=function(i,o,c,d,g){var b=this.getPoint(o,c,d,o.locations[c],o.locations[d]);b&&i.push(b)},a.prototype.getMaskPath=function(){var i=this.yAxis.renderer;return arc(i.startAngle,i.endAngle-i.startAngle,i.pixelRadius,i.pixelInnerRadius)},a.prototype.drawSegment=function(i,o,c){var d=this.yAxis,g=d.renderer;this.connectEnds&&Math.abs(g.endAngle-g.startAngle)==360&&(this.dataFields[this._xOpenField]||this.dataFields[this._yOpenField]||this.stacked)&&(o.push(o[0]),c.length>0&&c.unshift(c[c.length-1])),e.prototype.drawSegment.call(this,i,o,c)},Object.defineProperty(a.prototype,"connectEnds",{get:function(){return this.getPropertyValue("connectEnds")},set:function(i){this.setPropertyValue("connectEnds",i,!0)},enumerable:!0,configurable:!0}),a.prototype.positionBulletReal=function(i,o,c){var d=this.xAxis,g=this.yAxis;(o<d.start||o>d.end||c<g.start||c>g.end)&&(i.visible=!1),i.moveTo(this.xAxis.renderer.positionToPoint(o,c))},a.prototype.setXAxis=function(i){e.prototype.setXAxis.call(this,i),this.updateRendererRefs()},a.prototype.setYAxis=function(i){e.prototype.setYAxis.call(this,i),this.updateRendererRefs()},a.prototype.updateRendererRefs=function(){var i=this.xAxis.renderer,o=this.yAxis.renderer;i.axisRendererY=o},a}(LineSeries);registry.registeredClasses.RadarSeries=RadarSeries;registry.registeredClasses.RadarSeriesDataItem=RadarSeriesDataItem;var AxisFillCircular=function(e){__extends(a,e);function a(i){var o=e.call(this,i)||this;return o.className="AxisFillCircular",o.element=o.paper.add("path"),o.radius=percent(100),o.applyTheme(),o}return a.prototype.draw=function(){if(e.prototype.draw.call(this),!(this.__disabled||this.disabled)&&this.axis){var i=this.axis.renderer;this.fillPath=i.getPositionRangePath(this.startPosition,this.endPosition,this.radius,hasValue(this.innerRadius)?this.innerRadius:i.innerRadius,this.cornerRadius),this.path=this.fillPath}},Object.defineProperty(a.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(i){this.setPercentProperty("innerRadius",i,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(i){this.setPercentProperty("radius",i,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"cornerRadius",{get:function(){return this.getPropertyValue("cornerRadius")},set:function(i){this.setPropertyValue("cornerRadius",i,!0)},enumerable:!0,configurable:!0}),a}(AxisFill);registry.registeredClasses.AxisFillCircular=AxisFillCircular;var GridCircular=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="GridCircular",i.pixelPerfect=!1,i.applyTheme(),i}return Object.defineProperty(a.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(i){this.setPercentProperty("innerRadius",i,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(i){this.setPercentProperty("radius",i,!0,!1,10,!1)},enumerable:!0,configurable:!0}),a}(Grid$1);registry.registeredClasses.GridCircular=GridCircular;var AxisLabelCircular=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.fdx=0,i.fdy=0,i.className="AxisLabelCircular",i.padding(0,0,0,0),i.location=.5,i.locationOnPath=.5,i.radius=0,i.isMeasured=!1,i.applyTheme(),i}return Object.defineProperty(a.prototype,"relativeRotation",{get:function(){return this.getPropertyValue("relativeRotation")},set:function(i){if(this.setPropertyValue("relativeRotation",i,!0),!hasValue(i)){this.rotation=void 0;var o=this.dataItem;o&&o.component&&o.component.invalidateDataItems()}},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(i){this.setPercentProperty("radius",i,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"bent",{get:function(){return this.getPropertyValue("bent")},set:function(i){this.setPropertyValue("bent",i,!0),this.setPropertyValue("wrap",!1),this.setPropertyValue("horizontalCenter","none"),this.setPropertyValue("verticalCenter","none"),i?(this.setPropertyValue("dx",0),this.setPropertyValue("dy",0),this.setPropertyValue("x",0),this.setPropertyValue("y",0),this.setPropertyValue("rotation",0),this.fdx=0,this.fdy=0,this.textAlign="middle"):this.textPathElement&&(this.textPathElement.dispose(),this.textPathElement=void 0)},enumerable:!0,configurable:!0}),a.prototype.pixelRadius=function(i){var o=1;return this.inside&&(o=-1),relativeToValue(this.radius,i)*o},a.prototype.pixelRadiusY=function(i,o){var c=1;this.inside&&(c=-1);var d=this.radius;return isNumber$1(d)?(d*=o/i,relativeToValue(d,i)*c):relativeToValue(d,o)*c},a.prototype.fixPosition=function(i,o,c,d,g){isNumber$1(c)||(c=o),isNumber$1(d)||(d=0),isNumber$1(g)||(g=0);var b={x:o*cos(i),y:c*sin(i)};this.invalid&&this.validate();var j=!1,$=this.radius;($ instanceof Percent&&$.value<0||$<0)&&(j=!0);var rt=this.relativeRotation,_e=this.pixelRadius(o);if(this.bent){var st={x:(o+_e)*cos(i+180),y:(c+_e*c/o)*sin(i+180)};this.path=moveTo(st)+arcTo(i+180,360,o+_e,c+_e*c/o),this.textPathElement&&this.textPathElement.attr({startOffset:this.locationOnPath*100+"%"});return}if(isNumber$1(rt)){this.horizontalCenter="none",this.verticalCenter="none",i=fitAngleToRange(i,-180,180);var ut=this.bbox.width,gt=this.bbox.height,yt=this.pixelPaddingBottom,Pt=this.pixelPaddingTop,wt=this.pixelPaddingLeft,Ct=this.pixelPaddingRight;i>90||i<-90?rt==-90&&(rt=90,ut=0):(rt==-90&&(gt=-gt),rt==90&&(rt=-90,ut=-wt-Ct,gt=-gt-Pt-yt)),this.rotation=rt+i+90;var At=sin(rt)/2,Tt=cos(rt)/2,kt=this.rotation;this.dx=gt*At*sin(kt)-ut*Tt*cos(kt),this.dy=-gt*At*cos(kt)-ut*Tt*sin(kt),this.inside?i>90||i<-90?_e-=(yt+Pt)*cos(rt)+(wt+Ct)*sin(rt):_e+=(yt+this.bbox.height+Pt)*cos(rt)+(wt+Ct+this.bbox.width)*sin(rt):_e+=(gt+yt+Pt)*cos(rt)+(ut+wt+Ct)*sin(rt),b.x+=cos(i)*_e,b.y+=sin(i)*_e*c/o}else this.horizontalCenter="middle",this.verticalCenter="middle",j?(this.dx=0,this.dy=0,b.x=(o+_e)*cos(i),b.y=(c+_e*c/o)*sin(i)):(this.dy=this._measuredHeight/2*sin(i),this.dx=this._measuredWidth/2*cos(i),b.x+=cos(i)*_e,b.y+=sin(i)*_e*c/o);b.x+=d,b.y+=g,this.fdx=this.dx,this.fdy=this.dy,this.moveTo(b)},a}(AxisLabel);registry.registeredClasses.AxisLabelCircular=AxisLabelCircular;var AxisRendererCircular=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.pixelRadiusReal=0,i.layout="none",i.className="AxisRendererCircular",i.isMeasured=!1,i.startAngle=-90,i.endAngle=270,i.useChartAngles=!0,i.radius=percent(100),i.isMeasured=!1,i.grid.template.location=0,i.labels.template.location=0,i.labels.template.radius=15,i.ticks.template.location=0,i.ticks.template.pixelPerfect=!1,i.tooltipLocation=0,i.line.strokeOpacity=0,i.applyTheme(),i}return a.prototype.setAxis=function(i){var o=this;e.prototype.setAxis.call(this,i),i.isMeasured=!1;var c=i.tooltip;c.adapter.add("dx",function(d,g){var b=svgPointToSprite({x:g.pixelX,y:g.pixelY},o);return o.pixelRadius*Math.cos(Math.atan2(b.y,b.x))-b.x}),c.adapter.add("dy",function(d,g){var b=svgPointToSprite({x:g.pixelX,y:g.pixelY},o);return o.pixelRadius*Math.sin(Math.atan2(b.y,b.x))-b.y})},a.prototype.validate=function(){this.chart&&this.chart.invalid&&this.chart.validate(),e.prototype.validate.call(this)},Object.defineProperty(a.prototype,"axisLength",{get:function(){return 2*Math.PI*this.pixelRadius},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(i){this.setPercentProperty("radius",i,!1,!1,10,!1)&&this.axis&&this.axis.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"pixelRadius",{get:function(){return relativeRadiusToValue(this.radius,this.pixelRadiusReal)||0},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"innerRadius",{get:function(){var i=this.chart,o=this.getPropertyValue("innerRadius");if(i){if(!hasValue(o))o=i.innerRadius,o instanceof Percent&&i&&(o=percent(o.value*i.innerRadiusModifyer*100));else if(o instanceof Percent&&i){var c=i.mr,d=o.value;d=Math.max(c*d,c-Math.min(i.plotContainer.innerHeight,i.plotContainer.innerWidth))/c,o=percent(d*100)}return o}},set:function(i){this.setPercentProperty("innerRadius",i,!1,!1,10,!1)&&this.axis&&this.axis.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"useChartAngles",{get:function(){return this.getPropertyValue("useChartAngles")},set:function(i){this.setPropertyValue("useChartAngles",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"pixelInnerRadius",{get:function(){return relativeRadiusToValue(this.innerRadius,this.pixelRadiusReal)||0},enumerable:!0,configurable:!0}),a.prototype.positionToPoint=function(i,o){isNumber$1(o)||(o=1);var c=this.positionToCoordinate(i),d=this.startAngle+(this.endAngle-this.startAngle)*c/this.axisLength,g=this.pixelRadius,b=this.pixelInnerRadius;if(this.axisRendererY){var j=fitToRange(this.axisRendererY.positionToCoordinate(o),0,1/0);j==0&&(j=1e-6);var $={x:j*cos(d),y:j*sin(d)};return $}return{x:cos(d)*b+(g-b)*cos(d)*o,y:sin(d)*b+(g-b)*sin(d)*o}},a.prototype.positionToAngle=function(i){var o=this.axis,c=(this.endAngle-this.startAngle)/(o.end-o.start),d;return o.renderer.inversed?d=this.startAngle+(o.end-i)*c:d=this.startAngle+(i-o.start)*c,round$1(d,3)},a.prototype.angleToPosition=function(i){var o=this.axis,c=(this.endAngle-this.startAngle)/(o.end-o.start),d;return o.renderer.inversed?d=o.end-(i-this.startAngle)/c:d=(i-this.startAngle)/c+o.start,round$1(d,5)},a.prototype.updateAxisLine=function(){var i=this.pixelRadius,o=this.startAngle,c=this.endAngle,d=min$1(360,c-o);this.line.path=moveTo({x:i*cos(o),y:i*sin(o)})+arcTo(o,d,i,i)},a.prototype.updateGridElement=function(i,o,c){o=o+(c-o)*i.location;var d=this.positionToPoint(o);if(isNumber$1(d.x)&&isNumber$1(d.y)&&i.element){var g=DEGREES*Math.atan2(d.y,d.x),b=relativeRadiusToValue(hasValue(i.radius)?i.radius:percent(100),this.pixelRadius),j=relativeRadiusToValue(i.innerRadius,this.pixelRadius);i.zIndex=0;var $=relativeRadiusToValue(isNumber$1(j)?j:this.innerRadius,this.pixelRadiusReal,!0);isNumber$1($)||($=0),i.path=moveTo({x:$*cos(g),y:$*sin(g)})+lineTo({x:b*cos(g),y:b*sin(g)})}this.toggleVisibility(i,o,0,1)},a.prototype.updateTickElement=function(i,o,c){o=o+(c-o)*i.location;var d=this.positionToPoint(o);if(i.element){var g=this.pixelRadius,b=DEGREES*Math.atan2(d.y,d.x),j=i.length;i.inside&&(j=-j),i.zIndex=1,i.path=moveTo({x:g*cos(b),y:g*sin(b)})+lineTo({x:(g+j)*cos(b),y:(g+j)*sin(b)})}this.toggleVisibility(i,o,0,1)},a.prototype.updateBullet=function(i,o,c){var d=.5;i instanceof AxisBullet&&(d=i.location),o=o+(c-o)*d;var g=this.positionToPoint(o),b=this.pixelRadius,j=DEGREES*Math.atan2(g.y,g.x);g={x:b*cos(j),y:b*sin(j)},this.positionItem(i,g),this.toggleVisibility(i,o,0,1)},a.prototype.updateLabelElement=function(i,o,c,d){hasValue(d)||(d=i.location),o=o+(c-o)*d,i.fixPosition(this.positionToAngle(o),this.pixelRadius),i.zIndex=2,this.toggleVisibility(i,o,this.minLabelPosition,this.maxLabelPosition)},a.prototype.fitsToBounds=function(i){return!0},Object.defineProperty(a.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(i){this.setPropertyValue("startAngle",i)&&(this.invalidateAxisItems(),this.axis&&this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(i){this.setPropertyValue("endAngle",i)&&(this.invalidateAxisItems(),this.axis&&this.axis.invalidateSeries())},enumerable:!0,configurable:!0}),a.prototype.getPositionRangePath=function(i,o,c,d,g){var b="";if(isNumber$1(i)&&isNumber$1(o)){hasValue(c)||(c=this.radius),i=max$1(i,this.axis.start),o=min$1(o,this.axis.end),o<i&&(o=i);var j=relativeRadiusToValue(c,this.pixelRadius),$=relativeRadiusToValue(d,this.pixelRadius,!0),rt=this.positionToAngle(i),_e=this.positionToAngle(o),st=_e-rt;b=arc(rt,st,j,$,j,g)}return b},a.prototype.createGrid=function(){return new GridCircular},a.prototype.createFill=function(i){return new AxisFillCircular(i)},a.prototype.createLabel=function(){return new AxisLabelCircular},a.prototype.pointToPosition=function(i){var o=fitAngleToRange(getAngle(i),this.startAngle,this.endAngle);return this.coordinateToPosition((o-this.startAngle)/360*this.axisLength)},a}(AxisRenderer);registry.registeredClasses.AxisRendererCircular=AxisRendererCircular;var AxisRendererRadial=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i._chart=new MutableValueDisposer,i.pixelRadiusReal=0,i.className="AxisRendererRadial",i.isMeasured=!1,i.startAngle=-90,i.endAngle=270,i.minGridDistance=30,i.gridType="circles",i.axisAngle=-90,i.isMeasured=!1,i.layout="none",i.radius=percent(100),i.line.strokeOpacity=0,i.labels.template.horizontalCenter="middle",i._disposers.push(i._chart),i.applyTheme(),i}return a.prototype.validate=function(){this.chart&&this.chart.invalid&&this.chart.validate(),e.prototype.validate.call(this)},Object.defineProperty(a.prototype,"axisLength",{get:function(){return this.pixelRadius-this.pixelInnerRadius},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(i){this.setPercentProperty("radius",i,!1,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"pixelRadius",{get:function(){return relativeRadiusToValue(this.radius,this.pixelRadiusReal)||0},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"innerRadius",{get:function(){var i=this.chart,o=this.getPropertyValue("innerRadius");if(i){if(!hasValue(o))o=i.innerRadius,o instanceof Percent&&i&&(o=percent(o.value*i.innerRadiusModifyer*100));else if(o instanceof Percent&&i){var c=i.mr,d=o.value;d=Math.max(c*d,c-Math.min(i.plotContainer.innerHeight,i.plotContainer.innerWidth))/c,o=percent(d*100)}}return o},set:function(i){this.setPercentProperty("innerRadius",i,!1,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"pixelInnerRadius",{get:function(){return relativeRadiusToValue(this.innerRadius,this.pixelRadiusReal)||0},enumerable:!0,configurable:!0}),a.prototype.positionToPoint=function(i,o){var c=fitToRange(this.positionToCoordinate(i),0,1/0);return{x:c*cos(this.axisAngle),y:c*sin(this.axisAngle)}},a.prototype.updateAxisLine=function(){this.line.path=moveTo({x:this.pixelInnerRadius*cos(this.axisAngle),y:this.pixelInnerRadius*sin(this.axisAngle)})+lineTo({x:this.pixelRadius*cos(this.axisAngle),y:this.pixelRadius*sin(this.axisAngle)});var i=this.axis.title;i.valign="none",i.horizontalCenter="middle",i.verticalCenter="bottom",i.y=-this.axisLength/2;var o=90;this.opposite?this.inside||(o=-90):this.inside&&(o=-90),i.rotation=o},a.prototype.updateGridElement=function(i,o,c){o=o+(c-o)*i.location;var d=this.positionToPoint(o),g,b=getDistance(d),j=this.startAngle,$=this.endAngle,rt=this.chart;if(isNumber$1(b)&&i.element&&rt){var _e=rt.xAxes.getIndex(0),st=0,ut=rt.series.getIndex(0);if(ut&&(st=ut.dataItems.length),this.gridType=="polygons"&&st>0&&ut&&_e&&_e instanceof CategoryAxis){var gt=_e.renderer.grid.template.location,yt=_e.getAngle(ut.dataItems.getIndex(0),"categoryX",gt);g=moveTo({x:b*cos(yt),y:b*sin(yt)});for(var Pt=1;Pt<st;Pt++)yt=_e.getAngle(ut.dataItems.getIndex(Pt),"categoryX",gt),g+=lineTo({x:b*cos(yt),y:b*sin(yt)});yt=_e.getAngle(ut.dataItems.getIndex(st-1),"categoryX",_e.renderer.cellEndLocation),g+=lineTo({x:b*cos(yt),y:b*sin(yt)})}else g=moveTo({x:b*cos(j),y:b*sin(j)})+arcTo(j,$-j,b,b);i.path=g}this.toggleVisibility(i,o,0,1)},a.prototype.updateLabelElement=function(i,o,c,d){hasValue(d)||(d=i.location),o=o+(c-o)*d;var g=this.positionToPoint(o);this.positionItem(i,g),this.toggleVisibility(i,o,this.minLabelPosition,this.maxLabelPosition)},a.prototype.updateBaseGridElement=function(){},a.prototype.fitsToBounds=function(i){return!0},Object.defineProperty(a.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(i){this.setPropertyValue("startAngle",i)&&this.invalidateAxisItems()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(i){this.setPropertyValue("endAngle",i)&&this.invalidateAxisItems()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"axisAngle",{get:function(){return this.getPropertyValue("axisAngle")},set:function(i){this.setPropertyValue("axisAngle",normalizeAngle(i)),this.invalidateAxisItems()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"gridType",{get:function(){var i=this.chart.xAxes.getIndex(0);return i instanceof CategoryAxis?this.getPropertyValue("gridType"):"circles"},set:function(i){this.setPropertyValue("gridType",i,!0)},enumerable:!0,configurable:!0}),a.prototype.getPositionRangePath=function(i,o){var c=this.pixelInnerRadius,d=this.axisLength+c,g=fitToRange(this.positionToCoordinate(i),c,d),b=fitToRange(this.positionToCoordinate(o),c,d),j=this.startAngle,$=this.endAngle,rt=$-j,_e,st=this.chart,ut=st.xAxes.getIndex(0),gt=st.series.getIndex(0),yt=0;if(gt&&(yt=gt.dataItems.length),this.gridType=="polygons"&&yt>0&&gt&&ut&&ut instanceof CategoryAxis){var Pt=ut.renderer.grid.template.location,wt=ut.getAngle(gt.dataItems.getIndex(0),"categoryX",Pt);_e=moveTo({x:b*cos(wt),y:b*sin(wt)});for(var Ct=1;Ct<yt;Ct++)wt=ut.getAngle(gt.dataItems.getIndex(Ct),"categoryX",Pt),_e+=lineTo({x:b*cos(wt),y:b*sin(wt)});wt=ut.getAngle(gt.dataItems.getIndex(yt-1),"categoryX",ut.renderer.cellEndLocation),_e+=lineTo({x:b*cos(wt),y:b*sin(wt)}),_e+=moveTo({x:g*cos(wt),y:g*sin(wt)});for(var Ct=yt-1;Ct>=0;Ct--)wt=ut.getAngle(gt.dataItems.getIndex(Ct),"categoryX",Pt),_e+=lineTo({x:g*cos(wt),y:g*sin(wt)})}else _e=arc(j,rt,b,g);return _e},a.prototype.updateBreakElement=function(i){var o=i.startLine,c=i.endLine,d=i.fillShape,g=i.startPoint,b=i.endPoint;o.radius=Math.abs(g.y),c.radius=Math.abs(b.y),d.radius=Math.abs(b.y),d.innerRadius=Math.abs(g.y)},a.prototype.createBreakSprites=function(i){i.startLine=new WavedCircle,i.endLine=new WavedCircle,i.fillShape=new WavedCircle},a.prototype.updateTooltip=function(){var i=this.axis;if(i){var o=4e3,c=-4e3,d=-4e3,g=o*2,b=o*2,j=this.axisAngle;j<0&&(j+=360);var $="vertical";(j>45&&j<135||j>225&&j<315)&&($="horizontal"),this.axis.updateTooltip($,{x:c,y:d,width:g,height:b})}},a.prototype.updateTickElement=function(i,o,c){o=o+(c-o)*i.location;var d=this.positionToPoint(o);if(i.element){var g=normalizeAngle(this.axisAngle+90);g/90!=Math.round(g/90)?i.pixelPerfect=!1:i.pixelPerfect=!0;var b=-i.length;i.inside&&(b*=-1),i.path=moveTo({x:0,y:0})+lineTo({x:b*cos(g),y:b*sin(g)})}this.positionItem(i,d),this.toggleVisibility(i,o,0,1)},a.prototype.updateBullet=function(i,o,c){var d=.5;i instanceof AxisBullet&&(d=i.location),o=o+(c-o)*d;var g=this.positionToPoint(o);this.positionItem(i,g),this.toggleVisibility(i,o,0,1)},a.prototype.positionToCoordinate=function(i){var o,c=this.axis,d=c.axisFullLength,g=this.pixelInnerRadius;return c.renderer.inversed?o=(c.end-i)*d+g:o=(i-c.start)*d+g,round$1(o,1)},a.prototype.pointToPosition=function(i){var o=getDistance(i)-this.pixelInnerRadius;return this.coordinateToPosition(o)},Object.defineProperty(a.prototype,"chart",{get:function(){return this._chart.get()},set:function(i){this._chart.set(i,null)},enumerable:!0,configurable:!0}),a}(AxisRendererY);registry.registeredClasses.AxisRendererRadial=AxisRendererRadial;var RadarChartDataItem=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="RadarChartDataItem",i.applyTheme(),i}return a}(XYChartDataItem),RadarChart=function(e){__extends(a,e);function a(){var i=e.call(this)||this;i._axisRendererX=AxisRendererCircular,i._axisRendererY=AxisRendererRadial,i.innerRadiusModifyer=1,i.mr=1,i.className="RadarChart",i.startAngle=-90,i.endAngle=270,i.radius=percent(80),i.innerRadius=0;var o=i.plotContainer.createChild(Container);return o.shouldClone=!1,o.layout="absolute",o.align="center",o.valign="middle",i.seriesContainer.parent=o,i.radarContainer=o,i.bulletsContainer.parent=o,i.axisBulletsContainer=o,i._cursorContainer=o,i.chartContainer.events.on("maxsizechanged",i.invalidate,i,!1),i._bulletMask=o.createChild(Circle),i._bulletMask.shouldClone=!1,i._bulletMask.element=i.paper.add("path"),i._bulletMask.opacity=0,i.applyTheme(),i}return a.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("Radar chart"))},a.prototype.processAxis=function(i){e.prototype.processAxis.call(this,i);var o=i.renderer;o.gridContainer.parent=o,o.breakContainer.parent=o,i.parent=this.radarContainer,o.toBack()},a.prototype.handleXAxisRangeChange=function(){e.prototype.handleXAxisRangeChange.call(this),each(this.yAxes.iterator(),function(i){i.invalidate()})},a.prototype.handleYAxisRangeChange=function(){e.prototype.handleYAxisRangeChange.call(this),each(this.xAxes.iterator(),function(i){i.invalidate()})},a.prototype.processConfig=function(i){if(i&&(hasValue(i.cursor)&&!hasValue(i.cursor.type)&&(i.cursor.type="RadarCursor"),hasValue(i.series)&&isArray$1(i.series)))for(var o=0,c=i.series.length;o<c;o++)i.series[o].type=i.series[o].type||"RadarSeries";e.prototype.processConfig.call(this,i)},a.prototype.beforeDraw=function(){e.prototype.beforeDraw.call(this);var i=this.plotContainer,o=getArcRect(this.startAngle,this.endAngle,1),c={x:0,y:0,width:0,height:0},d=i.innerWidth/o.width,g=i.innerHeight/o.height,b=this.innerRadius;if(b instanceof Percent){var j=b.value,$=Math.min(d,g);this.mr=$,j=Math.max($*j,$-Math.min(i.innerHeight,i.innerWidth))/$,c=getArcRect(this.startAngle,this.endAngle,j),this.innerRadiusModifyer=j/b.value,b=percent(j*100)}o=getCommonRectangle([o,c]);var rt=Math.min(i.innerWidth/o.width,i.innerHeight/o.height),_e=relativeRadiusToValue(this.radius,rt)*2||0,st=_e/2,ut=this.startAngle,gt=this.endAngle;this._pixelInnerRadius=relativeRadiusToValue(b,st),this._bulletMask.path=arc(ut,gt-ut,st,this._pixelInnerRadius),each(this.xAxes.iterator(),function(Pt){Pt.renderer.useChartAngles&&(Pt.renderer.startAngle=ut,Pt.renderer.endAngle=gt),Pt.width=_e,Pt.height=_e,Pt.renderer.pixelRadiusReal=st}),each(this.yAxes.iterator(),function(Pt){Pt.renderer.startAngle=ut,Pt.renderer.endAngle=gt,Pt.width=_e,Pt.height=_e,Pt.renderer.pixelRadiusReal=st});var yt=this.cursor;yt&&(yt.width=_e,yt.height=_e,yt.startAngle=ut,yt.endAngle=gt),this.radarContainer.definedBBox={x:st*o.x,y:st*o.y,width:st*o.width,height:st*o.height},this.radarContainer.validatePosition()},a.prototype.createSeries=function(){return new RadarSeries},Object.defineProperty(a.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(i){this.setPropertyValue("startAngle",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(i){this.setPropertyValue("endAngle",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(i){this.setPercentProperty("radius",i,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"pixelInnerRadius",{get:function(){return this._pixelInnerRadius},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(i){this.setPercentProperty("innerRadius",i,!0,!1,10,!1)},enumerable:!0,configurable:!0}),a.prototype.updateXAxis=function(i){i&&i.processRenderer()},a.prototype.updateYAxis=function(i){i&&i.processRenderer()},a}(XYChart);registry.registeredClasses.RadarChart=RadarChart;var ClockHand=function(e){__extends(a,e);function a(){var i=e.call(this)||this;i._axis=new MutableValueDisposer,i.className="ClockHand";var o=new InterfaceColorSet;i.fill=o.getFor("alternativeBackground"),i.stroke=i.fill;var c=new Circle;c.radius=5,i.pin=c,i.isMeasured=!1,i.startWidth=5,i.endWidth=1,i.width=percent(100),i.height=percent(100),i.radius=percent(100),i.innerRadius=percent(0);var d=new Trapezoid;return i.hand=d,i._disposers.push(i._axis),i.applyTheme(),i}return a.prototype.validate=function(){e.prototype.validate.call(this);var i=this.hand;i.width=this.pixelWidth;var o=Math.max(this.startWidth,this.endWidth);if(i.height=o,i.leftSide=percent(this.startWidth/o*100),i.rightSide=percent(this.endWidth/o*100),this.axis){var c=this.axis.renderer,d=relativeRadiusToValue(this.innerRadius,c.pixelRadius),g=relativeRadiusToValue(this.radius,c.pixelRadius);i.x=d,i.y=-o/2,i.width=g-d}},Object.defineProperty(a.prototype,"pin",{get:function(){return this._pin},set:function(i){this._pin&&this.removeDispose(this._pin),i&&(this._pin=i,i.parent=this,this._disposers.push(i))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"hand",{get:function(){return this._hand},set:function(i){this._hand&&this.removeDispose(this._hand),i&&(this._hand=i,i.parent=this,this._disposers.push(i))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(i){this.setPercentProperty("radius",i,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(i){this.setPercentProperty("innerRadius",i,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"startWidth",{get:function(){return this.getPropertyValue("startWidth")},set:function(i){this.setPropertyValue("startWidth",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"endWidth",{get:function(){return this.getPropertyValue("endWidth")},set:function(i){this.setPropertyValue("endWidth",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"rotationDirection",{get:function(){return this.getPropertyValue("rotationDirection")},set:function(i){this.setPropertyValue("rotationDirection",i)},enumerable:!0,configurable:!0}),a.prototype.showValue=function(i,o,c){if(this._value=i,i!=null&&(isNumber$1(o)||(o=0),this.axis)){var d=this.axis.renderer,g=d.positionToAngle(this.axis.anyToPosition(i)),b=this.rotation;this.rotationDirection=="clockWise"&&g<b&&(this.rotation=b-360),this.rotationDirection=="counterClockWise"&&g>b&&(this.rotation=b+360),this.animate({property:"rotation",to:g},o,c)}},Object.defineProperty(a.prototype,"currentPosition",{get:function(){if(this.axis){var i=this.axis.renderer;return i.angleToPosition(this.rotation)}},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"value",{get:function(){return this._value},set:function(i){this.showValue(i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"axis",{get:function(){return this._axis.get()},set:function(i){if(this.axis!=i&&this._axis.set(i,new MultiDisposer([i.events.on("datavalidated",this.updateValue,this,!1),i.events.on("datarangechanged",this.updateValue,this,!1),i.events.on("dataitemsvalidated",this.updateValue,this,!1),i.events.on("propertychanged",this.invalidate,this,!1)])),i){var o=i.chart;o&&(this.rotation=o.startAngle)}this.parent=i.renderer,this.zIndex=5},enumerable:!0,configurable:!0}),a.prototype.updateValue=function(){this.value=this.value},a.prototype.processConfig=function(i){i&&hasValue(i.axis)&&isString$1(i.axis)&&this.map.hasKey(i.axis)&&(i.axis=this.map.getKey(i.axis)),e.prototype.processConfig.call(this,i)},a}(Container);registry.registeredClasses.ClockHand=ClockHand;(function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="GaugeChartDataItem",i.applyTheme(),i}return a})(RadarChartDataItem);var GaugeChart=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="GaugeChart",i.startAngle=180,i.endAngle=360,i.hands=new ListTemplate(new ClockHand),i.hands.events.on("inserted",i.processHand,i,!1),i._disposers.push(new ListDisposer(i.hands)),i._disposers.push(i.hands.template),i.applyTheme(),i}return a.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("Gauge chart"))},a.prototype.processHand=function(i){var o=i.newValue;o.axis||(o.axis=this.xAxes.getIndex(0))},a.prototype.configOrder=function(i,o){return i==o?0:i=="hands"?1:o=="hands"?-1:e.prototype.configOrder.call(this,i,o)},a}(RadarChart);registry.registeredClasses.GaugeChart=GaugeChart;var PercentSeriesDataItem=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="PercentSeriesDataItem",i.applyTheme(),i}return a.prototype.uidAttr=function(){return this.slice.uidAttr()},a.prototype.hide=function(i,o,c,d){return d||(d=["value"]),e.prototype.hide.call(this,i,o,0,d)},a.prototype.setVisibility=function(i,o){o||(i?this.setWorkingValue("value",this.values.value.value,0,0):this.setWorkingValue("value",0,0,0)),e.prototype.setVisibility.call(this,i,o)},a.prototype.show=function(i,o,c){return c||(c=["value"]),e.prototype.show.call(this,i,o,c)},Object.defineProperty(a.prototype,"category",{get:function(){return this.properties.category},set:function(i){this.setProperty("category",i)},enumerable:!0,configurable:!0}),a.prototype.createLegendMarker=function(i){this.component.createLegendMarker(i,this)},Object.defineProperty(a.prototype,"legendDataItem",{get:function(){return this._legendDataItem},set:function(i){this._legendDataItem=i,i.label&&(i.label.dataItem=this),i.valueLabel&&(i.valueLabel.dataItem=this)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"tick",{get:function(){var i=this;if(!this._tick){var o=this.component.ticks.create();this._tick=o,this.addSprite(o),this._disposers.push(o),o.parent=this.component.ticksContainer,this._disposers.push(new Disposer(function(){i.component&&i.component.ticks.removeValue(o)})),o.visible=this.visible}return this._tick},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"label",{get:function(){var i=this;if(!this._label){var o=this.component.labels.create();this.addSprite(o),this._label=o,this._disposers.push(o),o.parent=this.component.labelsContainer,this._disposers.push(new Disposer(function(){i.component&&i.component.labels.removeValue(o)})),o.visible=this.visible}return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"slice",{get:function(){var i=this;if(!this._slice){var o=this.component,c=o.slices.create();this.addSprite(c),this._slice=c,this._disposers.push(c),c.parent=o.slicesContainer,this._disposers.push(new Disposer(function(){o.slices.removeValue(c)})),c.visible=this.visible,o.itemsFocusable()?(hasValue(this.component.role)||(this.component.role="menu"),hasValue(c.role)||(c.role="menuitem"),c.focusable=!0):(hasValue(this.component.role)||(this.component.role="list"),hasValue(c.role)||(c.role="listitem"),c.focusable=!1),c.focusable&&(c.events.on("focus",function(d){c.readerTitle=o.populateString(o.itemReaderText,i)},void 0,!1),c.events.on("blur",function(d){c.readerTitle=""},void 0,!1)),c.hoverable&&(c.events.on("over",function(d){c.readerTitle=o.populateString(o.itemReaderText,i)},void 0,!1),c.events.on("out",function(d){c.readerTitle=""},void 0,!1))}return this._slice},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"hiddenInLegend",{get:function(){return this.properties.hiddenInLegend},set:function(i){this.setProperty("hiddenInLegend",i)},enumerable:!0,configurable:!0}),a}(SeriesDataItem),PercentSeries=function(e){__extends(a,e);function a(){var i=e.call(this)||this;i.className="PercentSeries",i._addAllDataItems=!1,i.colors=new ColorSet,i.colors.step=1,i.isMeasured=!0,i.calculatePercent=!0;var o=i.createChild(Container);o.shouldClone=!1,o.isMeasured=!1,i.slicesContainer=o;var c=i.createChild(Container);c.shouldClone=!1,c.isMeasured=!1,c.layout="none",i.ticksContainer=c;var d=i.createChild(Container);d.shouldClone=!1,d.isMeasured=!1,d.layout="none",i.labelsContainer=d,i.alignLabels=!1,i.bulletsContainer.toFront(),i.skipFocusThreshold=50;var g=i.defaultState;return g.transitionEasing=sinOut,i.itemReaderText="{category}: {value.percent.formatNumber('#.#p')}",i.applyTheme(),i}return a.prototype.createSlice=function(){return new Sprite},a.prototype.createTick=function(){return new Tick},a.prototype.createLabel=function(){return new Label},Object.defineProperty(a.prototype,"slices",{get:function(){if(!this._slices){var i=this.createSlice();i.applyOnClones=!0,this._disposers.push(i),this.initSlice(i),this._slices=new ListTemplate(i),this._disposers.push(new ListDisposer(this._slices))}return this._slices},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"ticks",{get:function(){if(!this._ticks){var i=this.createTick();i.applyOnClones=!0,this._disposers.push(i),this.initTick(i),this._ticks=new ListTemplate(i),this._disposers.push(new ListDisposer(this._ticks))}return this._ticks},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"labels",{get:function(){if(!this._labels){var i=this.createLabel();i.applyOnClones=!0,this._disposers.push(i),this.initLabel(i),this._labels=new ListTemplate(i),this._disposers.push(new ListDisposer(this._labels))}return this._labels},enumerable:!0,configurable:!0}),a.prototype.createDataItem=function(){return new PercentSeriesDataItem},a.prototype.initSlice=function(i){},a.prototype.initLabel=function(i){i.text="{category}: {value.percent.formatNumber('#.0p')}",i.isMeasured=!1,i.padding(5,5,5,5)},a.prototype.initTick=function(i){},a.prototype.validateDataItems=function(){this.colors.reset(),this.patterns&&this.patterns.reset(),e.prototype.validateDataItems.call(this)},a.prototype.validateDataElement=function(i){var o=i.slice;o&&(o.fill==null?this.patterns?(hasValue(o.stroke)||(o.stroke=this.colors.next()),o.fill=this.patterns.next(),hasValue(o.fillOpacity)&&(o.fill.backgroundOpacity=o.fillOpacity),o.stroke instanceof Color&&(o.fill.stroke=o.stroke,o.fill.fill=o.stroke)):o.fill=this.colors.next():this.colors.currentStep+=this.colors.step,o.stroke==null&&(o.stroke=o.fill)),e.prototype.validateDataElement.call(this,i),o&&i.bullets.each(function(c,d){d.fill==null&&(d.fill=o.fill),d.stroke==null&&(d.stroke=o.stroke)}),this.updateLegendValue(i)},a.prototype.validateData=function(){e.prototype.validateData.call(this),this.chart&&this.chart.feedLegend()},a.prototype.arrangeLabels=function(i){for(var o=0,c=i.length;o<c;o++){var d=i[o],g=d.label;if(g){g.invalid&&g.validate();var b=g.measuredHeight;g.visible||(b=0),g.pixelY-b/2<-this.maxHeight/2&&(g.y=-this.maxHeight/2+b/2);var j=this.getNextLabel(o+1,i),$=g.pixelY+b/2;if(j){j.invalid&&j.validate();var rt=j.measuredHeight;j.visible||(rt=0);var _e=j.pixelY;_e==null&&(_e=0),_e-rt/2<$&&(j.y=$+rt/2)}}}},a.prototype.arrangeLabels2=function(i){for(var o=this.maxHeight/2,c=i.length-1;c>=0;c--){var d=i[c],g=d.label;if(g){g.invalid&&g.validate();var b=g.measuredHeight;g.visible||(b=0),g.pixelY+b/2>o&&(g.y=o-b/2,o=g.y-b/2)}}},a.prototype.getNextLabel=function(i,o){if(o.length>=i){var c=o[i];if(c)return c.label?c.visible?c.label:this.getNextLabel(i+1,o):this.getNextLabel(i+1,o)}},Object.defineProperty(a.prototype,"colors",{get:function(){return this.getPropertyValue("colors")},set:function(i){this.setPropertyValue("colors",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"patterns",{get:function(){return this.getPropertyValue("patterns")},set:function(i){this.setPropertyValue("patterns",i,!0)},enumerable:!0,configurable:!0}),a.prototype.createLegendMarker=function(i,o){each(i.children.iterator(),function(c){var d=o.slice;c.defaultState.properties.fill=d.fill,c.defaultState.properties.stroke=d.stroke,c.defaultState.properties.fillOpacity=d.fillOpacity,c.defaultState.properties.strokeOpacity=d.strokeOpacity,c.fill=d.fill,c.stroke=d.stroke,c.fillOpacity=d.fillOpacity,c.strokeOpacity=d.strokeOpacity,c.fill==null&&(c.__disabled=!0);var g=i.dataItem;g.color=d.fill,g.colorOrig=d.fill,c.addDisposer(d.events.on("propertychanged",function(b){b.property=="fill"&&(c.__disabled=!1,c.isActive||(c.fill=d.fill),c.defaultState.properties.fill=d.fill,g.color=d.fill,g.colorOrig=d.fill),b.property=="stroke"&&(c.isActive||(c.stroke=d.stroke),c.defaultState.properties.stroke=d.stroke),b.property=="strokeOpacity"&&(c.isActive||(c.strokeOpacity=d.strokeOpacity),c.defaultState.properties.strokeOpacity=d.strokeOpacity)},void 0,!1))})},a.prototype.handleSliceScale=function(i){var o=this,c=i.target,d=c.dataItem;d&&d.bullets&&each(d.bullets.iterator(),function(g){var b=g[1];o.positionBullet(b)})},a.prototype.handleSliceMove=function(i){},a.prototype.copyFrom=function(i){e.prototype.copyFrom.call(this,i),this.slices.template.copyFrom(i.slices.template),this.labels.template.copyFrom(i.labels.template),this.ticks.template.copyFrom(i.ticks.template),this.colors=i.colors.clone()},Object.defineProperty(a.prototype,"alignLabels",{get:function(){return this.getPropertyValue("alignLabels")},set:function(i){this.setAlignLabels(i)},enumerable:!0,configurable:!0}),a.prototype.setAlignLabels=function(i){this.setPropertyValue("alignLabels",i,!0)},Object.defineProperty(a.prototype,"ignoreZeroValues",{get:function(){return this.getPropertyValue("ignoreZeroValues")},set:function(i){this.setPropertyValue("ignoreZeroValues",i,!0)},enumerable:!0,configurable:!0}),a.prototype.updateLegendValue=function(i){if(i){var o=i.legendDataItem,c=i.legendSettings;o&&c&&c&&(c.labelText&&(o.label.text=c.labelText),c.itemLabelText&&(o.label.text=c.itemLabelText),c.valueText&&(o.valueLabel.text=c.valueText),c.itemValueText&&(o.valueLabel.text=c.itemValueText))}},a}(Series);registry.registeredClasses.PercentSeries=PercentSeries;registry.registeredClasses.PercentSeriesDataItem=PercentSeriesDataItem;defaultRules.push({relevant:ResponsiveBreakpoints.maybeXS,state:function(e,a){if(e instanceof PercentSeries){var i=e.states.create(a),o=e.labels.template.states.create(a);o.properties.disabled=!0;var c=e.ticks.template.states.create(a);return c.properties.disabled=!0,i}return null}});var PercentChartDataItem=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="PercentChartDataItem",i.applyTheme(),i}return a}(SerialChartDataItem),PercentChart=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="PercentChart",i.align="none",i.valign="none",i.chartContainer.minHeight=50,i.chartContainer.minWidth=50,i.applyTheme(),i}return a.prototype.validateData=function(){e.prototype.validateData.call(this),this.feedLegend()},a.prototype.feedLegend=function(){var i=this.legend;if(i){var o=[];each(this.series.iterator(),function(c){c.hiddenInLegend||each(c.dataItems.iterator(),function(d){d.hiddenInLegend||(o.push(d),d.legendSettings||(d.legendSettings=c.legendSettings))})}),i.data=o,i.dataFields.name="category"}},a.prototype.createSeries=function(){return new PercentSeries},a.prototype.setLegend=function(i){e.prototype.setLegend.call(this,i),i&&(i.labels.template.text="{category}",i.valueLabels.template.text="{value.percent.formatNumber('#.0p')}",i.itemContainers.template.events.on("over",function(o){var c=o.target.dataItem.dataContext;if(c.visible&&!c.isHiding){var d=c.slice;d.dispatchImmediately("over"),d.isHover=!0,d.interactions.isRealHover=!0}}),i.itemContainers.template.events.on("out",function(o){var c=o.target.dataItem.dataContext,d=c.slice;d.dispatchImmediately("out"),d.isHover=!1}))},a}(SerialChart);registry.registeredClasses.PercentChart=PercentChart;registry.registeredClasses.PercentChartDataItem=PercentChartDataItem;var PieTick=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i._label=new MutableValueDisposer,i._slice=new MutableValueDisposer,i.className="PieTick",i.element=i.paper.add("polyline"),i._disposers.push(i._label),i._disposers.push(i._slice),i.applyTheme(),i}return a.prototype.draw=function(){e.prototype.draw.call(this);var i=this.slice,o=this.label,c=i.dataItem.component;if(i&&i.radius>0&&o&&o.text){var d=i.dx+i.slice.dx+i.pixelX+i.ix*i.radius*i.scale,g=i.dy+i.slice.dy+i.pixelY+i.iy*i.radiusY*i.scale,b=void 0,j=void 0,$=void 0,rt=void 0;if(c.alignLabels)b=o.pixelX-this.length,j=o.pixelY,$=o.pixelX,rt=j,o.horizontalCenter=="right"&&(b+=2*this.length,$=b-this.length);else{var _e=o.pixelRadius(i.radius);b=d+_e*i.ix,j=g+_e*i.iy,$=b,rt=j}this.element.attr({points:[d,g,b,j,$,rt]})}},Object.defineProperty(a.prototype,"slice",{get:function(){return this._slice.get()},set:function(i){this._slice.set(i,new MultiDisposer([i.events.on("transformed",this.invalidate,this),i.events.on("validated",this.invalidate,this)]))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"label",{get:function(){return this._label.get()},set:function(i){this._label.set(i,i.events.on("transformed",this.invalidate,this,!1))},enumerable:!0,configurable:!0}),a}(Tick);registry.registeredClasses.PieTick=PieTick;var PieSeriesDataItem=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="PieSeriesDataItem",i.values.radiusValue={},i.applyTheme(),i}return Object.defineProperty(a.prototype,"radiusValue",{get:function(){return this.values.radiusValue.value},set:function(i){this.setValue("radiusValue",i)},enumerable:!0,configurable:!0}),a.prototype.hide=function(i,o,c,d){return e.prototype.hide.call(this,i,o,0,["value","radiusValue"])},a.prototype.show=function(i,o,c){return e.prototype.show.call(this,i,o,["value","radiusValue"])},a}(PercentSeriesDataItem),PieSeries=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="PieSeries",i.alignLabels=!0,i.layout="none",i.labels.template.radius=percent(5),i.addDisposer(i.labels.template.events.on("enabled",i.invalidate,i,!1)),i.applyTheme(),i}return a.prototype.createSlice=function(){return new Slice},a.prototype.createTick=function(){return new PieTick},a.prototype.createLabel=function(){return new AxisLabelCircular},a.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("Pie Slice Series"))},a.prototype.createDataItem=function(){return new PieSeriesDataItem},a.prototype.initSlice=function(i){i.isMeasured=!1,i.defaultState.properties.scale=1,i.observe("scale",this.handleSliceScale,this),i.observe(["dx","dy","x","y","shiftRadius"],this.handleSliceMove,this),i.tooltipText="{category}: {value.percent.formatNumber('#.#p')} ({value.value})";var o=i.states.create("hover");o.properties.scale=1.05;var c=i.defaultState;c.properties.shiftRadius=0,i.togglable=!0,i.events.on("toggled",function(g){g.target.hideTooltip(),g.target.interactions.lastHitPointer&&g.target.interactions.lastHitPointer.touch&&!g.target.isActive&&(g.target.isHover=!1)});var d=i.states.create("active");d.properties.shiftRadius=.1},a.prototype.validate=function(){this._leftItems=[],this._rightItems=[],this._currentStartAngle=this.startAngle,this._arcRect=getArcRect(this.startAngle,this.endAngle),this._maxRadiusPercent=0;for(var i=this.startIndex;i<this.endIndex;i++){var o=this.dataItems.getIndex(i),c=o.values.radiusValue.percent;c>this._maxRadiusPercent&&(this._maxRadiusPercent=c)}e.prototype.validate.call(this),this.alignLabels&&(this.startAngle>this.endAngle?this._rightItems.reverse():this._leftItems.reverse(),this._rightItems.sort(function(d,g){var b=(d.slice.middleAngle+360)%360,j=(g.slice.middleAngle+360)%360;return b>270&&(b-=360),j>270&&(j-=360),b<j?-1:b>j?1:0}),this._leftItems.sort(function(d,g){var b=(d.slice.middleAngle+360)%360,j=(g.slice.middleAngle+360)%360;return b<j?1:b>j?-1:0}),this.arrangeLabels(this._rightItems),this.arrangeLabels2(this._rightItems),this.arrangeLabels(this._leftItems),this.arrangeLabels2(this._leftItems))},a.prototype.validateDataElement=function(i){if(this.pixelRadius>0){this.ignoreZeroValues&&(i.value==0||i.value==null)?i.__disabled=!0:i.__disabled=!1;var o=i.slice;if(o.radius=this.pixelRadius,isNumber$1(i.radiusValue)&&(o.radius=this.pixelInnerRadius+(this.pixelRadius-this.pixelInnerRadius)*i.values.radiusValue.percent/this._maxRadiusPercent),o.innerRadius instanceof Percent||(o.innerRadius=this.pixelInnerRadius),o.startAngle=this._currentStartAngle,o.arc=Math.abs(i.values.value.percent)*(this.endAngle-this.startAngle)/100,!this.labels.template.disabled){var c=i.label,d=i.tick;d.slice=o,d.label=c;var g=(o.middleAngle+360)%360,b=void 0;if(this.alignLabels){var j=c.pixelRadius(o.radius),$=d.length+j;c.dx=0,c.dy=0,c.verticalCenter="middle";var rt=this._arcRect;g>270||g<=90?($+=(rt.width+rt.x)*this.pixelRadius,c.horizontalCenter="left",this._rightItems.push(i)):($-=rt.x*this.pixelRadius,c.horizontalCenter="right",this._leftItems.push(i),$*=-1);var _e=o.radius+d.length+j;b={x:$,y:o.iy*_e},c.moveTo(b)}else{var st=o.depth;isNumber$1(st)||(st=0),c.fixPosition(o.middleAngle,o.radius,o.radiusY,0,-st)}}this._currentStartAngle+=o.arc,e.prototype.validateDataElement.call(this,i)}},Object.defineProperty(a.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(i){this.setPercentProperty("radius",i,!0,!1,10,!1)&&this.invalidateDataItems()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"pixelRadius",{get:function(){return this._pixelRadius},set:function(i){this._pixelRadius!=i&&(this._pixelRadius=i,this.invalidateDataItems())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"pixelInnerRadius",{get:function(){return this._pixelInnerRadius},set:function(i){this._pixelInnerRadius!=i&&(this._pixelInnerRadius=i,this.invalidateDataItems())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(i){this.setPercentProperty("innerRadius",i,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"startAngle",{get:function(){var i=this.getPropertyValue("startAngle");return isNumber$1(i)?i:this._startAngleInternal},set:function(i){this.setPropertyValue("startAngle",normalizeAngle(i),!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"endAngle",{get:function(){var i=this.getPropertyValue("endAngle");return isNumber$1(i)?i:this._endAngleInternal},set:function(i){this.setPropertyValue("endAngle",i,!0)},enumerable:!0,configurable:!0}),a.prototype.positionBullet=function(i){e.prototype.positionBullet.call(this,i);var o=i.dataItem,c=o.slice,d=i.locationX;isNumber$1(d)||(d=.5);var g=i.locationY;isNumber$1(g)||(g=1);var b=c.startAngle+c.arc*d;i.x=g*c.radius*cos(b),i.y=g*c.radiusY*sin(b)},a.prototype.handleSliceMove=function(i){if(!this.alignLabels){var o=i.target,c=o.dataItem;if(c){var d=c.label;d&&(d.dx=d.fdx+o.dx+o.pixelX,d.dy=d.fdy+o.dy+o.pixelY)}}},Object.defineProperty(a.prototype,"bbox",{get:function(){if(this.definedBBox)return this.definedBBox;var i=this.chart;return i?getArcRect(i.startAngle,i.endAngle,this.pixelRadius):getArcRect(this.startAngle,this.endAngle,this.pixelRadius)},enumerable:!0,configurable:!0}),a}(PercentSeries);registry.registeredClasses.PieSeries=PieSeries;registry.registeredClasses.PieSeriesDataItem=PieSeriesDataItem;var PieChartDataItem=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="PieChartDataItem",i.applyTheme(),i}return a}(PercentChartDataItem),PieChart=function(e){__extends(a,e);function a(){var i=e.call(this)||this;i.className="PieChart",i.innerRadius=0,i.radius=percent(80),i.align="none",i.valign="none",i.startAngle=-90,i.endAngle=270;var o=i.seriesContainer;return o.isMeasured=!0,o.valign="middle",o.align="center",o.layout="absolute",o.width=void 0,o.height=void 0,i.chartContainer.minHeight=50,i.chartContainer.minWidth=50,i.chartContainer.events.on("maxsizechanged",i.updateRadius,i,!1),i._disposers.push(i.seriesContainer.events.on("positionchanged",function(){i.bulletsContainer.x=i.seriesContainer.x,i.bulletsContainer.y=i.seriesContainer.y})),i.applyTheme(),i}return a.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("Pie chart"))},a.prototype.validateLayout=function(){e.prototype.validateLayout.call(this),this.updateRadius()},a.prototype.handleSeriesAdded=function(i){e.prototype.handleSeriesAdded.call(this,i),this._chartPixelRadius=void 0,this.updateSeriesAngles()},a.prototype.updateSeriesAngles=function(){var i=this;this.series.each(function(o){o._startAngleInternal=i.startAngle,o._endAngleInternal=i.endAngle})},a.prototype.updateRadius=function(){var i=this.chartContainer,o=getArcRect(this.startAngle,this.endAngle,1),c={x:0,y:0,width:0,height:0},d=this.innerRadius;d instanceof Percent&&(c=getArcRect(this.startAngle,this.endAngle,d.value)),o=getCommonRectangle([o,c]);var g=Math.min(i.innerWidth/o.width,i.innerHeight/o.height);isNumber$1(g)||(g=0);var b=relativeRadiusToValue(this.radius,g),j=relativeRadiusToValue(this.innerRadius,g),$=(b-j)/this.series.length;(b!=this._chartPixelRadius||j!=this._chartPixelInnerRadius)&&(this._chartPixelRadius=b,this._chartPixelInnerRadius=j,each(indexed(this.series.iterator()),function(rt){var _e=rt[0],st=rt[1],ut=j+relativeRadiusToValue(st.radius,b-j),gt=j+relativeRadiusToValue(st.innerRadius,b-j);isNumber$1(ut)||(ut=j+$*(_e+1)),isNumber$1(gt)||(gt=j+$*_e),st.pixelRadius=ut,st.pixelInnerRadius=gt}),this.seriesContainer.definedBBox={x:b*o.x,y:b*o.y,width:b*o.width,height:b*o.height},this.seriesContainer.invalidateLayout())},Object.defineProperty(a.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(i){this.setPercentProperty("radius",i,!0,!1,10,!1)&&this.invalidateLayout()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(i){this.setPercentProperty("innerRadius",i,!0,!1,10,!1)},enumerable:!0,configurable:!0}),a.prototype.createSeries=function(){return new PieSeries},Object.defineProperty(a.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(i){this.setPropertyValue("startAngle",i)&&(this.updateRadius(),this.updateSeriesAngles())},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(i){this.setPropertyValue("endAngle",i)&&(this.updateRadius(),this.updateSeriesAngles())},enumerable:!0,configurable:!0}),a}(PercentChart);registry.registeredClasses.PieChart=PieChart;registry.registeredClasses.PieChartDataItem=PieChartDataItem;var PieSeries3DDataItem=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="PieSeries3DDataItem",i.values.depthValue={},i.applyTheme(),i}return Object.defineProperty(a.prototype,"depthValue",{get:function(){return this.values.depthValue.value},set:function(i){this.setValue("depthValue",i)},enumerable:!0,configurable:!0}),a}(PieSeriesDataItem),PieSeries3D=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="PieSeries3D",i.applyTheme(),i}return a.prototype.createDataItem=function(){return new PieSeries3DDataItem},a.prototype.createSlice=function(){return new Slice3D},a.prototype.validateDataElement=function(i){var o=i.slice,c=this.depth;isNumber$1(c)||(c=this.chart.depth);var d=i.values.depthValue.percent;isNumber$1(d)||(d=100),o.depth=d*c/100;var g=this.angle;isNumber$1(g)||(g=this.chart.angle),o.angle=g,e.prototype.validateDataElement.call(this,i)},a.prototype.validate=function(){e.prototype.validate.call(this);for(var i=this._workingStartIndex;i<this._workingEndIndex;i++){var o=this.dataItems.getIndex(i),c=o.slice,d=c.startAngle;d>=-90&&d<90?c.toFront():d>=90&&c.toBack()}},Object.defineProperty(a.prototype,"depth",{get:function(){return this.getPropertyValue("depth")},set:function(i){this.setPropertyValue("depth",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"angle",{get:function(){return this.getPropertyValue("angle")},set:function(i){this.setPropertyValue("angle",i)},enumerable:!0,configurable:!0}),a.prototype.positionBullet=function(i){e.prototype.positionBullet.call(this,i);var o=i.dataItem,c=o.slice;i.y=i.pixelY-c.depth},a}(PieSeries);registry.registeredClasses.PieSeries3D=PieSeries3D;registry.registeredClasses.PieSeries3DDataItem=PieSeries3DDataItem;(function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="PieChart3DDataItem",i.applyTheme(),i}return a})(PieChartDataItem);var PieChart3D=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="PieChart3D",i.depth=20,i.angle=10,i.applyTheme(),i}return Object.defineProperty(a.prototype,"depth",{get:function(){return this.getPropertyValue("depth")},set:function(i){this.setPropertyValue("depth",i)&&this.invalidateDataUsers()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"angle",{get:function(){return this.getPropertyValue("angle")},set:function(i){i=fitToRange(i,0,90),this.setPropertyValue("angle",i)&&this.invalidateDataUsers()},enumerable:!0,configurable:!0}),a.prototype.createSeries=function(){return new PieSeries3D},a}(PieChart);registry.registeredClasses.PieChart3D=PieChart3D;var SlicedChartDataItem=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="SlicedChartDataItem",i.applyTheme(),i}return a}(PercentChartDataItem),SlicedChart=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="SlicedChart",i.seriesContainer.layout="horizontal",i.padding(15,15,15,15),i.applyTheme(),i}return a.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("Sliced chart"))},a.prototype.validate=function(){e.prototype.validate.call(this)},a}(PercentChart);registry.registeredClasses.SlicedChart=SlicedChart;registry.registeredClasses.SlicedChartDataItem=SlicedChartDataItem;var FlowDiagramNode=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.legendSettings=new LegendSettings,i.className="FlowDiagramNode",i.isMeasured=!1,new InterfaceColorSet,i.draggable=!0,i.inert=!0,i.setStateOnChildren=!0,i.events.on("positionchanged",i.invalidateLinks,i,!1),i.events.on("sizechanged",i.invalidateLinks,i,!1),i}return a.prototype.handleHit=function(i){this.isHidden||this.isHiding?this.show():this.hide()},a.prototype.show=function(i){var o=e.prototype.show.call(this,i);return this.outgoingDataItems.each(function(c){(!c.toNode||c.toNode&&!c.toNode.isHidden)&&(c.setWorkingValue("value",c.getValue("value"),i),c.link.show())}),this.incomingDataItems.each(function(c){(!c.fromNode||c.fromNode&&!c.fromNode.isHidden)&&(c.setWorkingValue("value",c.getValue("value"),i),c.link.show())}),o},a.prototype.hide=function(i){var o=e.prototype.hide.call(this,i);return this.outgoingDataItems.each(function(c){c.setWorkingValue("value",0,i),c.link.hide()}),this.incomingDataItems.each(function(c){c.setWorkingValue("value",0,i),c.link.hide()}),o},a.prototype.validate=function(){this.isDisposed()||(e.prototype.validate.call(this),this.invalidateLinks())},a.prototype.invalidateLinks=function(){var i=this;this.outgoingDataItems.each(function(o){var c=o.link;if(c.colorMode=="fromNode"&&(c.fill=c.dataItem.fromNode.color),c.colorMode=="gradient"){c.fill=c.gradient,c.stroke=c.gradient;var d=c.gradient.stops.getIndex(0);d&&(d.color=i.color,c.gradient.validate())}}),this.incomingDataItems.each(function(o){var c=o.link;if(c.colorMode=="toNode"&&(c.fill=c.dataItem.toNode.color),c.colorMode=="gradient"){c.fill=c.gradient,c.stroke=c.gradient;var d=c.gradient.stops.getIndex(1);d&&(d.color=i.color,c.gradient.validate())}})},Object.defineProperty(a.prototype,"incomingDataItems",{get:function(){var i=this;if(!this._incomingDataItems){var o=new List;o.events.on("inserted",function(){i.chart.sortBy=="name"?i._incomingSorted=sort(i._incomingDataItems.iterator(),function(c,d){return order$1(c.fromName,d.fromName)}):i.chart.sortBy=="value"?i._incomingSorted=sort(i._incomingDataItems.iterator(),function(c,d){return reverse(order(c.value,d.value))}):i._incomingSorted=i._incomingDataItems.iterator()},void 0,!1),this._incomingDataItems=o}return this._incomingDataItems},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"outgoingDataItems",{get:function(){var i=this;if(!this._outgoingDataItems){var o=new List;o.events.on("inserted",function(){i.chart.sortBy=="name"?i._outgoingSorted=sort(i._outgoingDataItems.iterator(),function(c,d){return order$1(c.fromName,d.fromName)}):i.chart.sortBy=="value"?i._outgoingSorted=sort(i._outgoingDataItems.iterator(),function(c,d){return reverse(order(c.value,d.value))}):i._outgoingSorted=i._outgoingDataItems.iterator()},void 0,!1),this._outgoingDataItems=o}return this._outgoingDataItems},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"name",{get:function(){return this.getPropertyValue("name")},set:function(i){this.setPropertyValue("name",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"total",{get:function(){return this.getPropertyValue("total")},set:function(i){this.setPropertyValue("total",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"totalIncoming",{get:function(){return this.getPropertyValue("totalIncoming")},set:function(i){this.setPropertyValue("totalIncoming",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"totalOutgoing",{get:function(){return this.getPropertyValue("totalOutgoing")},set:function(i){this.setPropertyValue("totalOutgoing",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"color",{get:function(){return this.getPropertyValue("color")},set:function(i){this.setColorProperty("color",i),this._background&&(this._background.fill=i),this.fill=i},enumerable:!0,configurable:!0}),a.prototype.createLegendMarker=function(i){var o=i.pixelWidth,c=i.pixelHeight;i.removeChildren();var d=i.createChild(RoundedRectangle);d.shouldClone=!1,copyProperties$1(this,d,visualProperties),d.stroke=this.fill,d.copyFrom(this),d.padding(0,0,0,0),d.width=o,d.height=c;var g=i.dataItem;g.color=d.fill,g.colorOrig=d.fill},Object.defineProperty(a.prototype,"legendDataItem",{get:function(){return this._legendDataItem},set:function(i){this._legendDataItem=i,this._legendDataItem.itemContainer.deepInvalidate()},enumerable:!0,configurable:!0}),a}(Container);registry.registeredClasses.FlowDiagramNode=FlowDiagramNode;var FlowDiagramLink=function(e){__extends(a,e);function a(){var i=e.call(this)||this;i.className="FlowDiagramLink";var o=new InterfaceColorSet;return i.maskBullets=!1,i.colorMode="fromNode",i.layout="none",i.isMeasured=!1,i.startAngle=0,i.endAngle=0,i.strokeOpacity=0,i.verticalCenter="none",i.horizontalCenter="none",i.tooltipText="{fromName}→{toName}:{value.value}",i.tooltipLocation=.5,i.link=i.createChild(Sprite),i.link.shouldClone=!1,i.link.setElement(i.paper.add("path")),i.link.isMeasured=!1,i.fillOpacity=.2,i.fill=o.getFor("alternativeBackground"),i.applyTheme(),i}return a.prototype.positionBullets=function(){var i=this;each(this.bullets.iterator(),function(o){o.parent=i.bulletsContainer,o.maxWidth=i.maxWidth,o.maxHeight=i.maxHeight,i.positionBullet(o)})},Object.defineProperty(a.prototype,"bulletsContainer",{get:function(){if(!this._bulletsContainer){var i=this.createChild(Container);i.shouldClone=!1,i.layout="none",this._bulletsContainer=i}return this._bulletsContainer},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"bulletsMask",{get:function(){if(!this._bulletsMask){var i=this.createChild(Sprite);i.shouldClone=!1,i.setElement(this.paper.add("path")),i.isMeasured=!1,this._bulletsMask=i}return this._bulletsMask},enumerable:!0,configurable:!0}),a.prototype.positionBullet=function(i){var o=i.locationX;isNumber$1(o)||(o=i.locationY),isNumber$1(o)||(o=.5);var c=this.middleLine.positionToPoint(o);i.moveTo(c);var d=i.propertyFields.rotation,g;if(i.dataItem){var b=i.dataItem.dataContext;g=b[d]}isNumber$1(g)||(g=c.angle),i.rotation=g},Object.defineProperty(a.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(i){this.setPropertyValue("startAngle",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(i){this.setPropertyValue("endAngle",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"colorMode",{get:function(){return this.getPropertyValue("colorMode")},set:function(i){if(i=="gradient"){var o=this.fill;this.gradient.stops.clear(),o instanceof Color&&(this.gradient.addColor(o),this.gradient.addColor(o)),this.fill=this.gradient,this.stroke=this.gradient}this.setPropertyValue("colorMode",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"maskBullets",{get:function(){return this.getPropertyValue("maskBullets")},set:function(i){this.setPropertyValue("maskBullets",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"tooltipLocation",{get:function(){return this.getPropertyValue("tooltipLocation")},set:function(i){this.setPropertyValue("tooltipLocation",i,!0)},enumerable:!0,configurable:!0}),a.prototype.setFill=function(i){e.prototype.setFill.call(this,i);var o=this._gradient;o&&i instanceof Color&&(o.stops.clear(),o.addColor(i),o.addColor(i))},a.prototype.measureElement=function(){},Object.defineProperty(a.prototype,"bullets",{get:function(){var i=this;return this._bullets||(this._bullets=new ListTemplate(new Bullet),this._disposers.push(new ListDisposer(this._bullets)),this._disposers.push(this._bullets.template),this._bullets.events.on("inserted",function(o){o.newValue.events.on("propertychanged",function(c){(c.property=="locationX"||c.property=="locationY")&&i.positionBullet(c.target)},void 0,!1)},void 0,!1)),this._bullets},enumerable:!0,configurable:!0}),a.prototype.copyFrom=function(i){e.prototype.copyFrom.call(this,i),this.bullets.copyFrom(i.bullets);var o=this.middleLine;o&&(o instanceof Line&&i.middleLine instanceof Line&&o.copyFrom(i.middleLine),o instanceof Polyline&&i.middleLine instanceof Polyline&&o.copyFrom(i.middleLine)),this.link.copyFrom(i.link)},a.prototype.getTooltipX=function(){if(this.middleLine)return this.middleLine.positionToPoint(this.tooltipLocation).x},a.prototype.getTooltipY=function(){if(this.middleLine)return this.middleLine.positionToPoint(this.tooltipLocation).y},Object.defineProperty(a.prototype,"gradient",{get:function(){return this._gradient||(this._gradient=new LinearGradient),this._gradient},enumerable:!0,configurable:!0}),a}(Container);registry.registeredClasses.FlowDiagramLink=FlowDiagramLink;var FlowDiagramDataItem=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="FlowDiagramDataItem",i.values.value={},i.applyTheme(),i}return Object.defineProperty(a.prototype,"fromName",{get:function(){return this.properties.fromName},set:function(i){this.setProperty("fromName",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"toName",{get:function(){return this.properties.toName},set:function(i){this.setProperty("toName",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"color",{get:function(){return this.properties.color},set:function(i){this.setProperty("color",toColor(i))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"value",{get:function(){return this.values.value.value},set:function(i){this.setValue("value",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"link",{get:function(){var i=this;if(!this._link){var o=this.component.links.create();this._link=o,this.addSprite(o),this._disposers.push(new Disposer(function(){i.component&&i.component.links.removeValue(o)}))}return this._link},enumerable:!0,configurable:!0}),a}(ChartDataItem),FlowDiagram=function(e){__extends(a,e);function a(){var i=e.call(this)||this;i.colors=new ColorSet,i.className="FlowDiagram",i.nodePadding=20,i.sortBy="none",i.sequencedInterpolation=!0,i.colors.step=2,i.minNodeSize=.02;var o=i.chartContainer.createChild(Container);o.shouldClone=!1,o.layout="none",o.isMeasured=!1,i.linksContainer=o;var c=i.chartContainer.createChild(Container);return c.shouldClone=!1,c.layout="none",c.isMeasured=!1,i.nodesContainer=c,i.dataItem=i.createDataItem(),i.dataItem.component=i,i.applyTheme(),i}return a.prototype.dispose=function(){e.prototype.dispose.call(this),this.dataItem.dispose()},a.prototype.validateData=function(){var i=this;this._parseDataFrom==0&&this.nodes.clear(),this.sortNodes(),this.colors.reset(),e.prototype.validateData.call(this);var o=0,c=0,d,g;each(this.dataItems.iterator(),function(j){var $=j.fromName;if($){var rt=i.nodes.getKey($);rt||(rt=i.nodes.create($),rt.name=$,rt.chart=i,rt.dataItem=j),j.fromNode=rt,j.fromNode.outgoingDataItems.push(j)}var _e=j.toName;if(_e){var rt=i.nodes.getKey(_e);rt||(rt=i.nodes.create(_e),rt.name=_e,rt.chart=i,rt.dataItem=j),j.toNode=rt,j.toNode.incomingDataItems.push(j)}if(!j.fromNode){var st=new LinearGradientModifier;st.opacities=[0,1],j.link.strokeModifier=st}if(!j.toNode){var ut=new LinearGradientModifier;ut.opacities=[1,0],j.link.strokeModifier=ut}var gt=j.value;isNumber$1(gt)&&(o+=gt,c++,(d>gt||!isNumber$1(d))&&(d=gt),(g<gt||!isNumber$1(g))&&(g=gt))});var b="value";this.dataItem.setCalculatedValue(b,g,"high"),this.dataItem.setCalculatedValue(b,d,"low"),this.dataItem.setCalculatedValue(b,o,"sum"),this.dataItem.setCalculatedValue(b,o/c,"average"),this.dataItem.setCalculatedValue(b,c,"count"),each(this.nodes.iterator(),function(j){var $=j[1];$.fill instanceof Color&&($.color=$.fill),$.color==null&&($.color=i.colors.next()),$.dataItem.color!=null&&($.color=$.dataItem.color),$.dataItem.visible||$.hide(0),i.getNodeValue($)}),this.sortNodes(),this.feedLegend()},a.prototype.handleDataItemWorkingValueChange=function(i,o){this.invalidate()},a.prototype.sortNodes=function(){this.sortBy=="name"?this._sorted=this.nodes.sortedIterator():this.sortBy=="value"?this._sorted=sort(this.nodes.iterator(),function(i,o){return reverse(order(i[1].total,o[1].total))}):this._sorted=this.nodes.iterator()},a.prototype.getNodeValue=function(i){var o=0,c=0;each(i.incomingDataItems.iterator(),function(d){var g=d.getWorkingValue("value");isNumber$1(g)&&(o+=g)}),each(i.outgoingDataItems.iterator(),function(d){var g=d.getWorkingValue("value");isNumber$1(g)&&(c+=g)}),i.total=o+c,i.totalIncoming=o,i.totalOutgoing=c},a.prototype.changeSorting=function(){this.sortNodes()},a.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("Flow diagram"))},a.prototype.createDataItem=function(){return new FlowDiagramDataItem},Object.defineProperty(a.prototype,"nodePadding",{get:function(){return this.getPropertyValue("nodePadding")},set:function(i){this.setPropertyValue("nodePadding",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"sortBy",{get:function(){return this.getPropertyValue("sortBy")},set:function(i){this.setPropertyValue("sortBy",i),this.changeSorting()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"minNodeSize",{get:function(){return this.getPropertyValue("minNodeSize")},set:function(i){this.setPropertyValue("minNodeSize",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"nodes",{get:function(){if(!this._nodes){var i=this.createNode();i.events.on("hit",function(o){o.target.handleHit(o)}),this._nodes=new DictionaryTemplate(i),this._disposers.push(new DictionaryDisposer(this._nodes))}return this._nodes},enumerable:!0,configurable:!0}),a.prototype.createNode=function(){var i=new FlowDiagramNode;return this._disposers.push(i),i},Object.defineProperty(a.prototype,"links",{get:function(){return this._links||(this._links=new ListTemplate(this.createLink()),this._disposers.push(new ListDisposer(this._links))),this._links},enumerable:!0,configurable:!0}),a.prototype.createLink=function(){var i=new FlowDiagramLink;return this._disposers.push(i),i},a.prototype.feedLegend=function(){var i=this.legend;if(i){var o=[];this.nodes.each(function(c,d){o.push(d)}),i.data=o,i.dataFields.name="name"}},a.prototype.disposeData=function(){e.prototype.disposeData.call(this),this.nodes.clear()},a}(Chart);registry.registeredClasses.FlowDiagram=FlowDiagram;var LabelBullet=function(e){__extends(a,e);function a(){var i=e.call(this)||this;i.className="LabelBullet";var o=i.createChild(Label);return o.shouldClone=!1,o.verticalCenter="middle",o.horizontalCenter="middle",o.truncate=!0,o.hideOversized=!1,o.maxWidth=500,o.maxHeight=500,o.stroke=color(),o.strokeOpacity=0,o.fill=new InterfaceColorSet().getFor("text"),i.events.on("maxsizechanged",i.handleMaxSize,i,!1),i.label=o,i.applyTheme(),i}return a.prototype.handleMaxSize=function(){this.label.maxWidth=this.maxWidth,this.label.maxHeight=this.maxHeight},a.prototype.copyFrom=function(i){e.prototype.copyFrom.call(this,i),this.label.copyFrom(i.label)},a}(Bullet);registry.registeredClasses.LabelBullet=LabelBullet;var SankeyNode=function(e){__extends(a,e);function a(){var i=e.call(this)||this;i.nextInCoord=0,i.nextOutCoord=0,i.className="SankeyNode",i.width=10,i.height=10;var o=i.createChild(LabelBullet);o.shouldClone=!1,o.locationX=1,o.locationY=.5,o.label.text="{name}",o.width=150,o.height=150,o.label.horizontalCenter="left",o.label.padding(0,5,0,5),i.nameLabel=o;var c=i.createChild(LabelBullet);c.shouldClone=!1,c.label.hideOversized=!1,c.locationX=.5,c.locationY=.5,c.width=150,c.height=150,c.label.horizontalCenter="middle",i.valueLabel=c;var d=i.hiddenState;return d.properties.fill=new InterfaceColorSet().getFor("disabledBackground"),d.properties.opacity=.5,d.properties.visible=!0,i.background.hiddenState.copyFrom(d),i}return a.prototype.invalidateLinks=function(){var i=this;e.prototype.invalidateLinks.call(this),this.nextInCoord=0,this.nextOutCoord=0;var o=this.chart;if(o){var c=o.orientation;this._incomingSorted&&each(this._incomingSorted,function(d){var g=d.link,b=d.getWorkingValue("value");if(isNumber$1(b)){g.parent=i.chart.linksContainer;var j=void 0,$=void 0,rt=void 0;if(c=="horizontal"?(j=i.pixelX+i.dx,$=i.nextInCoord+i.pixelY+i.dy,rt=0):($=i.pixelY+i.dy,j=i.nextInCoord+i.pixelX+i.dx,rt=90),g.endX=j,g.endY=$,g.startAngle=rt,g.endAngle=rt,g.gradient.rotation=rt,g.linkWidth=b*o.valueHeight,!d.fromNode){c=="horizontal"?(g.maxWidth=200,g.startX=i.pixelX+i.dx-g.maxWidth,g.startY=g.endY):(g.maxHeight=200,g.startX=g.endX,g.startY=i.pixelY+i.dy-g.maxHeight),g.gradient,g.fill=d.toNode.color;var _e=g.gradient.stops.getIndex(0);_e&&(g.colorMode=="gradient"&&(_e.color=i.color),_e.opacity=0,g.fill=g.gradient,g.stroke=g.gradient,g.gradient.validate())}i.nextInCoord+=g.linkWidth}}),this._outgoingSorted&&each(this._outgoingSorted,function(d){var g=d.link;g.parent=i.chart.linksContainer;var b=d.getWorkingValue("value");if(isNumber$1(b)){var j=void 0,$=void 0,rt=void 0;if(c=="horizontal"?(rt=0,j=i.pixelX+i.pixelWidth+i.dx-1,$=i.nextOutCoord+i.pixelY+i.dy):(rt=90,j=i.nextOutCoord+i.pixelX+i.dx,$=i.pixelY+i.pixelHeight+i.dy-1),g.startX=j,g.startY=$,g.startAngle=rt,g.endAngle=rt,g.gradient.rotation=rt,g.linkWidth=b*i.chart.valueHeight,!d.toNode){c=="horizontal"?(g.maxWidth=200,g.endX=i.pixelX+g.maxWidth+i.dx,g.endY=g.startY):(g.maxHeight=200,g.endX=g.startX,g.endY=i.pixelY+g.maxHeight+i.dy),g.opacity=i.opacity;var _e=g.gradient.stops.getIndex(1);_e&&(g.colorMode=="gradient"&&(_e.color=i.color),_e.opacity=0,g.fill=g.gradient,g.stroke=g.gradient,g.gradient.validate())}i.nextOutCoord+=g.linkWidth}})}this.positionBullet(this.nameLabel),this.positionBullet(this.valueLabel)},a.prototype.positionBullet=function(i){i&&(i.x=this.measuredWidth*i.locationX,i.y=this.measuredHeight*i.locationY)},Object.defineProperty(a.prototype,"level",{get:function(){return this.getPropertyValue("level")},set:function(i){this.setPropertyValue("level",i,!0)},enumerable:!0,configurable:!0}),a.prototype.copyFrom=function(i){e.prototype.copyFrom.call(this,i),this.nameLabel.copyFrom(i.nameLabel),this.valueLabel.copyFrom(i.valueLabel)},a}(FlowDiagramNode);registry.registeredClasses.SankeyNode=SankeyNode;var SankeyLink=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="SankeyLink",new InterfaceColorSet,i.tension=.8,i.controlPointDistance=.2,i.startAngle=0,i.endAngle=0,i.linkWidth=0,i.startX=0,i.endX=0,i.startY=0,i.endY=0,i.middleLine=i.createChild(Polyspline),i.middleLine.shouldClone=!1,i.middleLine.strokeOpacity=0,i.applyTheme(),i}return a.prototype.makeBackwards=function(){this.states.getKey("backwards")!=null&&this.setState("backwards")},a.prototype.validate=function(){var i,o,c,d;if(e.prototype.validate.call(this),!this.isTemplate){var g=this.startX,b=this.startY,j=this.endX,$=this.endY;if(this.states.getKey("backwards")&&this.setState("default"),this.dataItem){var rt=this.dataItem.component;rt&&(rt.orientation=="horizontal"?j<g&&(i=__read([j,g],2),g=i[0],j=i[1],o=__read([$,b],2),b=o[0],$=o[1],this.makeBackwards()):$<b&&(c=__read([$,b],2),b=c[0],$=c[1],d=__read([j,g],2),g=d[0],j=d[1],this.makeBackwards()))}isNumber$1(j)||(j=g),isNumber$1($)||($=b);var _e=this.startAngle,st=this.endAngle,ut=this.linkWidth,gt="",yt=g,Pt=b,wt=j,Ct=$,At=g+ut*sin(_e),Tt=j+ut*sin(st),kt=b+ut*cos(_e),It=$+ut*cos(st),Lt=g+ut/2*sin(_e),Ft=j+ut/2*sin(st),Nt=b+ut/2*cos(_e),Ht=$+ut/2*cos(st);this.zIndex=this.zIndex||this.dataItem.index;var Gr=this.tension+(1-this.tension)*sin(_e),hs=this.tension+(1-this.tension)*cos(_e);if(this.middleLine.tensionX=Gr,this.middleLine.tensionY=hs,isNumber$1(ut)&&isNumber$1(g)&&isNumber$1(j)&&isNumber$1(b)&&isNumber$1($)){round$1(yt,3)==round$1(wt,3)&&(wt+=.01),round$1(Pt,3)==round$1(Ct,3)&&(Ct+=.01),round$1(At,3)==round$1(Tt,3)&&(Tt+=.01),round$1(kt,3)==round$1(It,3)&&(It+=.01);var _s=Math.min(At,Tt,yt,wt),hn=Math.min(kt,It,Pt,Ct),Qn=Math.max(At,Tt,yt,wt),ds=Math.max(kt,It,Pt,Ct);this._bbox={x:_s,y:hn,width:Qn-_s,height:ds-hn};var un=this.controlPointDistance,dr=yt+(wt-yt)*un*cos(_e),us=Pt+(Ct-Pt)*un*sin(_e),Nn=wt-(wt-yt)*un*cos(st),gn=Ct-(Ct-Pt)*un*sin(st),Zn=Lt+(Ft-Lt)*un*cos(_e),xu=Nt+(Ht-Nt)*un*sin(_e),au=Ft-(Ft-Lt)*un*cos(st),Vv=Ht-(Ht-Nt)*un*sin(st),wu=getAngle({x:dr,y:us},{x:Nn,y:gn}),a1=(ut/cos(wu)-ut)/tan(wu)*cos(_e),P0=(ut/sin(wu)-ut)*tan(wu)*sin(_e),B0=-a1/2+At+(Tt-At)*un*cos(_e),q1=-P0/2+kt+(It-kt)*un*sin(_e),ox=-a1/2+Tt-(Tt-At)*un*cos(st),N_=-P0/2+It-(It-kt)*un*sin(st);Ht==Nt&&(Ht+=.01),this.middleLine.segments=[[{x:Lt,y:Nt},{x:Zn,y:xu},{x:au,y:Vv},{x:Ft,y:Ht}]],dr+=a1/2,us+=P0/2,Nn+=a1/2,gn+=P0/2,gt+=moveTo({x:yt,y:Pt}),gt+=new Tension(Gr,hs).smooth([{x:yt,y:Pt},{x:dr,y:us},{x:Nn,y:gn},{x:wt,y:Ct}]),gt+=lineTo({x:Tt,y:It}),gt+=new Tension(Gr,hs).smooth([{x:Tt,y:It},{x:ox,y:N_},{x:B0,y:q1},{x:At,y:kt}]),gt+=closePath()}this.link.path=gt,this.maskBullets&&(this.bulletsMask.path=gt,this.bulletsContainer.mask=this.bulletsMask),this.positionBullets()}},Object.defineProperty(a.prototype,"startX",{get:function(){return this.getPropertyValue("startX")},set:function(i){this.setPropertyValue("startX",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"endX",{get:function(){return this.getPropertyValue("endX")},set:function(i){this.setPropertyValue("endX",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"startY",{get:function(){return this.getPropertyValue("startY")},set:function(i){this.setPropertyValue("startY",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"endY",{get:function(){return this.getPropertyValue("endY")},set:function(i){this.setPropertyValue("endY",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"linkWidth",{get:function(){return this.getPropertyValue("linkWidth")},set:function(i){this.setPropertyValue("linkWidth",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"controlPointDistance",{get:function(){return this.getPropertyValue("controlPointDistance")},set:function(i){this.setPropertyValue("controlPointDistance",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"tension",{get:function(){return this.getPropertyValue("tension")},set:function(i){this.setPropertyValue("tension",i,!0)},enumerable:!0,configurable:!0}),a}(FlowDiagramLink);registry.registeredClasses.SankeyLink=SankeyLink;var SankeyDiagramDataItem=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="SankeyDiagramDataItem",i.applyTheme(),i}return a}(FlowDiagramDataItem),SankeyDiagram=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="SankeyDiagram",i.orientation="horizontal",i.nodeAlign="middle",i.nodesContainer.width=percent(100),i.nodesContainer.height=percent(100),i.linksContainer.width=percent(100),i.linksContainer.height=percent(100),i.applyTheme(),i}return a.prototype.validateData=function(){var i=this;this._valueHeight=void 0,e.prototype.validateData.call(this),this._levelCount=0,this.nodes.each(function(o,c){c.level=void 0}),this.nodes.each(function(o,c){c.level=i.getNodeLevel(c,0),i._levelCount=max$1(i._levelCount,c.level)})},a.prototype.getNodeLevel=function(i,o){var c=this,d=[o];return each(i.incomingDataItems.iterator(),function(g){g.fromNode&&(isNumber$1(g.fromNode.level)?d.push(g.fromNode.level+1):(c._counter=0,c.checkLoop(g.fromNode),c._counter<c.dataItems.length&&d.push(c.getNodeLevel(g.fromNode,o+1))))}),Math.max.apply(Math,__spread(d))},a.prototype.checkLoop=function(i){var o=this;this._counter++,!(this._counter>this.dataItems.length)&&each(i.incomingDataItems.iterator(),function(c){o.checkLoop(c.fromNode)})},a.prototype.calculateValueHeight=function(){var i=this;this._levelSum={},this._levelNodesCount={},this.maxSum=0;var o=this.dataItem.values.value.sum;each(this._sorted,function(_e){var st=_e[1];i.getNodeValue(st)}),this.nodes.each(function(_e,st){var ut=st.level,gt=Math.max(st.totalIncoming,st.totalOutgoing);gt/o<i.minNodeSize&&(gt=o*i.minNodeSize),isNumber$1(i._levelSum[ut])?i._levelSum[ut]+=gt:i._levelSum[ut]=gt,isNumber$1(i._levelNodesCount[ut])?i._levelNodesCount[ut]++:i._levelNodesCount[ut]=1});var c;this.orientation=="horizontal"?c=this.chartContainer.maxHeight-1:c=this.chartContainer.maxWidth-1;var d,g;each$1(this._levelSum,function(_e,st){var ut=st,gt=i._levelNodesCount[_e],yt=(c-(gt-1)*i.nodePadding)/ut;yt==1/0&&(yt=0),(g>yt||!isNumber$1(g))&&(g=yt,i.maxSum=ut,d=toNumber(_e))}),this._maxSumLevel=d;var b=this._levelNodesCount[this._maxSumLevel],j=(c-(b-1)*this.nodePadding)/this.maxSum;if(j==1/0&&(j=0),!isNumber$1(this.valueHeight))this.valueHeight=j;else{var $=void 0;try{$=this._heightAnimation.animationOptions[0].to}catch{}if($!=j){var rt=this.interpolationDuration;try{rt=this.nodes.template.states.getKey("active").transitionDuration}catch{}this._heightAnimation=new Animation(this,{property:"valueHeight",from:this.valueHeight,to:j},rt,this.interpolationEasing).start(),this._disposers.push(this._heightAnimation)}}},a.prototype.validate=function(){var i=this;e.prototype.validate.call(this),this.calculateValueHeight();var o=this.nodesContainer,c={},d=this._levelNodesCount[this._maxSumLevel],g=this.dataItem.values.value.sum,b;this.orientation=="horizontal"?b=this.chartContainer.maxHeight-1:b=this.chartContainer.maxWidth-1,each(this._sorted,function(j){var $=j[1],rt=$.level,_e=0,st=i._levelNodesCount[rt];switch(i.nodeAlign){case"bottom":_e=(i.maxSum-i._levelSum[rt])*i.valueHeight-(st-d)*i.nodePadding;break;case"middle":_e=(i.maxSum-i._levelSum[rt])*i.valueHeight/2-(st-d)*i.nodePadding/2;break}if(i.maxSum==0)switch(i.nodeAlign){case"bottom":_e=b-st*(i.minNodeSize*b+i.nodePadding);break;case"middle":_e=b/2-st/2*(i.minNodeSize*b+i.nodePadding);break}$.parent=o;var ut,gt,yt,Pt=Math.max($.totalIncoming,$.totalOutgoing);if(Pt/g<i.minNodeSize&&(Pt=g*i.minNodeSize),i.orientation=="horizontal"){ut=(i.innerWidth-$.pixelWidth)/i._levelCount,gt=ut*$.level,yt=c[rt]||_e;var wt=Pt*i.valueHeight;g==0&&wt==0&&(wt=i.minNodeSize*b),$.height=wt,$.minX=gt,$.maxX=gt,c[rt]=yt+wt+i.nodePadding}else{ut=(i.innerHeight-$.pixelHeight)/i._levelCount,gt=c[rt]||_e,yt=ut*$.level;var Ct=Pt*i.valueHeight;g==0&&Ct==0&&(Ct=i.minNodeSize*b),$.width=Ct,$.minY=yt,$.maxY=yt,c[rt]=gt+Ct+i.nodePadding}$.x=gt,$.y=yt})},a.prototype.showReal=function(i){var o=this;if(!this.preventShow){if(this.interpolationDuration>0){var c=this.nodesContainer,d=0;each(this.links.iterator(),function(g){g.hide(0)}),each(this._sorted,function(g){var b=g[1],j;o.orientation=="horizontal"?(b.dx=-(c.pixelWidth-b.pixelWidth)/Math.max(o._levelCount,1),j="dx"):(b.dy=-(c.pixelHeight-b.pixelHeight)/Math.max(o._levelCount,1),j="dy");var $=0,rt=o.interpolationDuration;o.sequencedInterpolation&&($=o.sequencedInterpolationDelay*d+rt*d/length(o.nodes.iterator())),b.opacity=0,b.invalidateLinks(),b.animate([{property:"opacity",from:0,to:1},{property:j,to:0}],o.interpolationDuration,o.interpolationEasing).delay($),each(b.outgoingDataItems.iterator(),function(_e){var st=_e.link.show(o.interpolationDuration);st&&!st.isFinished()&&st.delay($)}),each(b.incomingDataItems.iterator(),function(_e){if(!_e.fromNode){var st=_e.link.show(o.interpolationDuration);st&&!st.isFinished()&&st.delay($)}}),d++})}return e.prototype.showReal.call(this)}},a.prototype.changeSorting=function(){var i=this;this.sortNodes();var o={};each(this._sorted,function(c){var d=c[1],g=d.level,b=(i.maxSum-i._levelSum[g])*i.valueHeight/2,j,$;i.orientation=="horizontal"?(j="y",$=d.pixelHeight):(j="x",$=d.pixelWidth),d.animate({property:j,to:o[g]||b},i.interpolationDuration,i.interpolationEasing),o[g]=(o[g]||b)+$+i.nodePadding,d.invalidateLinks()})},a.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("Sankey diagram"))},a.prototype.createDataItem=function(){return new SankeyDiagramDataItem},Object.defineProperty(a.prototype,"nodeAlign",{get:function(){return this.getPropertyValue("nodeAlign")},set:function(i){this.setPropertyValue("nodeAlign",i),this.changeSorting()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(i){this.setPropertyValue("orientation",i,!0);var o=this.nodes.template.nameLabel;i=="vertical"?(this.nodes.template.width=void 0,o.label.horizontalCenter="middle",o.locationX=.5):(this.nodes.template.height=void 0,o.label.horizontalCenter="left",o.locationX=1)},enumerable:!0,configurable:!0}),a.prototype.createNode=function(){var i=new SankeyNode;return this._disposers.push(i),i},a.prototype.createLink=function(){var i=new SankeyLink;return this._disposers.push(i),i},Object.defineProperty(a.prototype,"valueHeight",{get:function(){return this._valueHeight},set:function(i){i!=this._valueHeight&&(this._valueHeight=i,this.invalidate())},enumerable:!0,configurable:!0}),a.prototype.disposeData=function(){e.prototype.disposeData.call(this),this._sorted=this.nodes.iterator()},a}(FlowDiagram);registry.registeredClasses.SankeyDiagram=SankeyDiagram;var ChordNode=function(e){__extends(a,e);function a(){var i=e.call(this)||this;i.className="ChordNode";var o=i.createChild(AxisLabelCircular);o.location=.5,o.radius=5,o.text="{name}",o.zIndex=1,o.shouldClone=!1,i.label=o,i.layout="none",i.events.on("positionchanged",i.updateRotation,i,!1),i.isMeasured=!1,i.slice=i.createChild(Slice),i.slice.isMeasured=!1;var c=i.hiddenState;return c.properties.fill=new InterfaceColorSet().getFor("disabledBackground"),c.properties.opacity=.5,c.properties.visible=!0,i.setStateOnChildren=!1,i.slice.hiddenState.properties.visible=!0,i.adapter.add("tooltipX",function(d,g){return g.slice.ix*(g.slice.radius-(g.slice.radius-g.slice.pixelInnerRadius)/2)}),i.adapter.add("tooltipY",function(d,g){return g.slice.iy*(g.slice.radius-(g.slice.radius-g.slice.pixelInnerRadius)/2)}),i}return a.prototype.invalidateLinks=function(){var i=this;e.prototype.invalidateLinks.call(this);var o=this.label,c=this.slice,d=this.chart;if(d&&c){var g=this.total,b=c.arc,j=c.startAngle;this.children.each(function(_e){if(_e instanceof Bullet){var st=_e.locationX;isNumber$1(st)||(st=.5);var ut=_e.locationY;isNumber$1(ut)||(ut=1);var gt=j+b*st,yt=ut*c.radius;_e.x=yt*cos(gt),_e.y=yt*sin(gt)}});var $=j+b*o.location,rt=j+(1-g/this.adjustedTotal)*b*.5;isNaN$1(rt)&&(rt=j),o.fixPosition($,c.radius),this.nextAngle=rt,this._outgoingSorted&&each(this._outgoingSorted,function(_e){var st=_e.link;st.parent=i.chart.linksContainer;var ut=_e.getWorkingValue("value");if(isNumber$1(ut)){if(d.nonRibbon){var gt=st.percentWidth;isNumber$1(gt)||(gt=5),gt=gt/100,st.startAngle=j+b/2-b/2*gt,st.arc=b*gt}else st.arc=ut*d.valueAngle,st.startAngle=i.nextAngle,i.nextAngle+=st.arc;_e.toNode||(st.endAngle=st.startAngle),st.radius=c.pixelInnerRadius}}),this._incomingSorted&&each(this._incomingSorted,function(_e){var st=_e.link;if(st.radius=c.pixelInnerRadius,d.nonRibbon){var ut=st.percentWidth;isNumber$1(ut)||(ut=5),ut=ut/100,st.endAngle=j+b/2-b/2*ut,st.arc=b*ut}else{st.endAngle=i.nextAngle;var gt=_e.getWorkingValue("value");isNumber$1(gt)&&(st.arc=gt*d.valueAngle,i.nextAngle+=st.arc)}_e.fromNode||(st.startAngle=st.endAngle)})}},a.prototype.updateRotation=function(){var i=this.slice,o=this.trueStartAngle+i.arc/2,c=i.radius,d=c*cos(o),g=c*sin(o),b=getAngle({x:d+this.pixelX,y:g+this.pixelY});i.startAngle=this.trueStartAngle+(b-o),this.dx=-this.pixelX,this.dy=-this.pixelY},a.prototype.copyFrom=function(i){e.prototype.copyFrom.call(this,i),this.label.copyFrom(i.label),this.slice.copyFrom(i.slice)},a}(FlowDiagramNode);registry.registeredClasses.ChordNode=ChordNode;var QuadraticCurve=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="QuadraticCurve",i.element=i.paper.add("path"),i.pixelPerfect=!1,i.fill=color(),i.applyTheme(),i}return a.prototype.draw=function(){if(isNumber$1(this.x1+this.x2+this.y1+this.y2+this.cpx+this.cpy)){var i={x:this.x1,y:this.y1},o={x:this.x2,y:this.y2},c={x:this.cpx,y:this.cpy},d=moveTo(i)+quadraticCurveTo(o,c);this.path=d}},Object.defineProperty(a.prototype,"cpx",{get:function(){return this.getPropertyValue("cpx")},set:function(i){this.setPropertyValue("cpx",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"cpy",{get:function(){return this.getPropertyValue("cpy")},set:function(i){this.setPropertyValue("cpy",i,!0)},enumerable:!0,configurable:!0}),a.prototype.positionToPoint=function(i){var o={x:this.x1,y:this.y1},c={x:this.cpx,y:this.cpy},d={x:this.x2,y:this.y2},g=getPointOnQuadraticCurve(o,d,c,i),b=getPointOnQuadraticCurve(o,d,c,i+.001);return{x:g.x,y:g.y,angle:getAngle(g,b)}},a}(Line),ChordLink=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="ChordLink",i.middleLine=i.createChild(QuadraticCurve),i.middleLine.shouldClone=!1,i.middleLine.strokeOpacity=0,i.applyTheme(),i}return a.prototype.validate=function(){if(e.prototype.validate.call(this),!this.isTemplate){var i=this.startAngle,o=this.endAngle,c=this.arc,d=this.radius,g=this.dataItem.fromNode,b=this.dataItem.toNode,j=0,$=0;g&&(j=g.pixelX+g.dx,$=g.pixelY+g.dy);var rt=0,_e=0;if(b&&(rt=b.pixelX+b.dx,_e=b.pixelY+b.dy),d>0){var st=d*cos(i)+j,ut=d*sin(i)+$,gt=d*cos(o)+rt,yt=d*sin(o)+_e,Pt={x:0,y:0},wt=moveTo({x:st,y:ut});wt+=arcTo(i,c,d),wt+=quadraticCurveTo({x:gt,y:yt},Pt),wt+=arcTo(o,c,d),wt+=quadraticCurveTo({x:st,y:ut},Pt),c>0?this.link.path=wt:this.link.path="",this.maskBullets&&(this.bulletsMask.path=wt,this.bulletsContainer.mask=this.bulletsMask);var Ct=i+c/2,At=o+c/2,Tt=this.middleLine;Tt.x1=d*cos(Ct)+j,Tt.y1=d*sin(Ct)+$,Tt.x2=d*cos(At)+rt,Tt.y2=d*sin(At)+_e,Tt.cpx=0,Tt.cpy=0,Tt.stroke=this.fill,this.positionBullets()}}},Object.defineProperty(a.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(i){this.setPropertyValue("radius",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"arc",{get:function(){return this.getPropertyValue("arc")},set:function(i){this.setPropertyValue("arc",i,!0)},enumerable:!0,configurable:!0}),a}(FlowDiagramLink);registry.registeredClasses.ChordLink=ChordLink;var ChordDiagramDataItem=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="ChordDiagramDataItem",i.applyTheme(),i}return a}(FlowDiagramDataItem),ChordDiagram=function(e){__extends(a,e);function a(){var i=e.call(this)||this;i.valueAngle=0,i.className="ChordDiagram",i.startAngle=-90,i.endAngle=270,i.radius=percent(80),i.innerRadius=-15,i.nodePadding=5;var o=i.chartContainer.createChild(Container);return o.align="center",o.valign="middle",o.shouldClone=!1,o.layout="absolute",i.chordContainer=o,i.nodesContainer.parent=o,i.linksContainer.parent=o,i.chartContainer.events.on("maxsizechanged",i.invalidate,i,!1),i.applyTheme(),i}return a.prototype.validate=function(){var i=this,o=this.chartContainer,c=this.endAngle,d=this.startAngle+this.nodePadding/2,g=getArcRect(this.startAngle,this.endAngle,1),b={x:0,y:0,width:0,height:0};g=getCommonRectangle([g,b]);var j=Math.min(o.innerWidth/g.width,o.innerHeight/g.height);isNumber$1(j)||(j=0);var $=relativeRadiusToValue(this.radius,j),rt=relativeRadiusToValue(this.innerRadius,$,!0),_e=this.dataItem.values.value.sum,st=0,ut=0;each(this._sorted,function(gt){var yt=gt[1];i.getNodeValue(yt),st++;var Pt=yt.total;yt.total/_e<i.minNodeSize&&(Pt=_e*i.minNodeSize),ut+=Pt}),this.valueAngle=(c-this.startAngle-this.nodePadding*st)/ut,each(this._sorted,function(gt){var yt=gt[1],Pt=yt.slice;Pt.radius=$,Pt.innerRadius=rt;var wt=yt.total;yt.total/_e<i.minNodeSize&&(wt=_e*i.minNodeSize),yt.adjustedTotal=wt;var Ct;i.nonRibbon?Ct=(c-i.startAngle)/st-i.nodePadding:Ct=i.valueAngle*wt,Pt.arc=Ct,Pt.startAngle=d,yt.trueStartAngle=d,yt.parent=i.nodesContainer,yt.validate(),d+=Ct+i.nodePadding}),this.chordContainer.definedBBox={x:$*g.x,y:$*g.y,width:$*g.width,height:$*g.height},this.chordContainer.invalidateLayout(),e.prototype.validate.call(this)},a.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("Chord diagram"))},a.prototype.createDataItem=function(){return new ChordDiagramDataItem},Object.defineProperty(a.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(i){this.setPropertyValue("startAngle",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(i){this.setPropertyValue("endAngle",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(i){this.setPercentProperty("radius",i,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(i){this.setPercentProperty("innerRadius",i,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"nonRibbon",{get:function(){return this.getPropertyValue("nonRibbon")},set:function(i){this.setPropertyValue("nonRibbon",i,!0),this.links.template.middleLine.strokeOpacity=1,this.links.template.link.fillOpacity=0},enumerable:!0,configurable:!0}),a.prototype.createNode=function(){var i=new ChordNode;return this._disposers.push(i),i},a.prototype.createLink=function(){var i=new ChordLink;return this._disposers.push(i),i},a}(FlowDiagram);registry.registeredClasses.ChordDiagram=ChordDiagram;var Column=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="Column",i.width=percent(80),i.height=percent(80),i.events.disableType("transformed"),i.applyOnClones=!0,i.strokeOpacity=1,i.layout="none",i.createAssets(),i.events.on("childadded",i.handleKidAdded,i,!1),i}return a.prototype.handleKidAdded=function(){this.layout=="none"&&(this.layout="absolute")},a.prototype.createAssets=function(){this.column=this.createChild(RoundedRectangle),this.column.shouldClone=!1,this.column.isMeasured=!1,this.column.cornerRadius(0,0,0,0),this._disposers.push(this.column)},a.prototype.validate=function(){e.prototype.validate.call(this);var i=this.column;i&&(i.width=min$1(this.pixelWidth,this.maxWidth),i.height=min$1(this.pixelHeight,this.maxHeight),i.invalid&&i.validate())},a.prototype.copyFrom=function(i){e.prototype.copyFrom.call(this,i),this.column&&this.column.copyFrom(i.column)},Object.defineProperty(a.prototype,"bbox",{get:function(){return this.definedBBox?this.definedBBox:this.column?{x:0,y:0,width:this.column.measuredWidth,height:this.column.measuredHeight}:{x:0,y:0,width:min$1(this.pixelWidth,this.maxWidth),height:min$1(this.pixelHeight,this.maxHeight)}},enumerable:!0,configurable:!0}),a}(Container);registry.registeredClasses.Column=Column;var ColumnSeriesDataItem=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="ColumnSeriesDataItem",i.locations.dateX=.5,i.locations.dateY=.5,i.locations.categoryX=.5,i.locations.categoryY=.5,i.applyTheme(),i}return Object.defineProperty(a.prototype,"column",{get:function(){return this._column},set:function(i){this.setColumn(i)},enumerable:!0,configurable:!0}),a.prototype.setColumn=function(i){var o=this;if(this._column&&i!=this._column&&remove(this.sprites,this._column),this._column=i,i){var c=i.dataItem;c&&c!=this&&(c.column=void 0),this.addSprite(i),this._disposers.push(new Disposer(function(){o.component&&o.component.columns.removeValue(i)}))}},Object.defineProperty(a.prototype,"width",{get:function(){var i=this.properties.width;return this._adapterO&&(i=this._adapterO.apply("width",i)),i},set:function(i){this.properties.width!=i&&(this.properties.width=i,this.component&&this.component.validateDataElement(this))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"height",{get:function(){var i=this.properties.height;return this._adapterO&&(i=this._adapterO.apply("height",i)),i},set:function(i){this.properties.height!=i&&(this.properties.height=i,this.component&&this.component.validateDataElement(this))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"rangesColumns",{get:function(){return this._rangesColumns||(this._rangesColumns=new Dictionary),this._rangesColumns},enumerable:!0,configurable:!0}),a}(XYSeriesDataItem),ColumnSeries=function(e){__extends(a,e);function a(){var i=e.call(this)||this;i._startLocation=0,i._endLocation=1,i.className="ColumnSeries",i.width=percent(100),i.height=percent(100),i.strokeOpacity=0,i.fillOpacity=1,i.clustered=!0;var o=i.mainContainer.createChild(Container);return o.shouldClone=!1,o.isMeasured=!1,o.layout="none",i._columnsContainer=o,i.columns.template.pixelPerfect=!1,i.tooltipColorSource=i.columns.template,i.applyTheme(),i}return Object.defineProperty(a.prototype,"columnsContainer",{get:function(){return this._columnsContainer},enumerable:!0,configurable:!0}),a.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("Column Series"))},a.prototype.createDataItem=function(){return new ColumnSeriesDataItem},a.prototype.validate=function(){var i=this;if(this.group.node.removeAttribute("fill"),this.chart&&this.xAxis&&this.yAxis){var o=this.chart.series,c=0,d=0,g=[];each(o.iterator(),function(yt){if(yt instanceof a&&i.baseAxis==yt.baseAxis){var Pt;i.baseAxis==i.xAxis?Pt=i.chart.yAxes.indexOf(yt.yAxis):Pt=i.chart.xAxes.indexOf(yt.xAxis),g.push({series:yt,axis:Pt})}}),g.sort(function(yt,Pt){return yt.axis-Pt.axis});var b;each$2(g,function(yt){var Pt=yt.series;Pt instanceof a&&((!Pt.stacked&&Pt.clustered||b!=yt.axis&&Pt.clustered)&&c++,Pt==i&&(d=c-1)),b=yt.axis}),this.clustered||(d=0,c=1);var j=this.baseAxis.renderer,$=j.cellStartLocation,rt=j.cellEndLocation;this._startLocation=$+d/c*(rt-$),this._endLocation=$+(d+1)/c*(rt-$);var _e=this.xAxis,st=this.yAxis;_e instanceof CategoryAxis&&st instanceof ValueAxis&&_e.sortBySeries==this&&this.sortCategoryAxis(_e,"valueY"),st instanceof CategoryAxis&&_e instanceof ValueAxis&&st.sortBySeries==this&&this.sortCategoryAxis(st,"valueX")}e.prototype.validate.call(this);for(var ut=0;ut<this.startIndex;ut++){var gt=this.dataItems.getIndex(ut);this.disableUnusedColumns(gt)}for(var ut=this.dataItems.length-1;ut>this.endIndex;ut--){var gt=this.dataItems.getIndex(ut);this.disableUnusedColumns(gt)}this._propertiesChanged=!1},a.prototype.sortCategoryAxis=function(i,o){var c=this;this.dataItems.values.sort(function(g,b){return b.values[o].workingValue-g.values[o].workingValue});var d=0;this.dataItems.each(function(g){g._index=d,d++}),i.dataItems.each(function(g){var b=g.component,j=b.categoryToPosition(g.category)-g.deltaPosition,$=b.getSeriesDataItemByCategory(g.category,c);if($){var rt=c.dataItems.indexOf($);g._index=rt;var _e=round$1((rt+.5)/c.dataItems.length-j,3);g.deltaAnimation&&!g.deltaAnimation.isDisposed()&&g.deltaAnimation.animationOptions[0].to==_e||_e!=round$1(g.deltaPosition,3)&&(g.deltaAnimation&&g.deltaAnimation.stop(),g.deltaAnimation=g.animate({property:"deltaPosition",from:-_e,to:0},b.interpolationDuration,b.interpolationEasing),c._disposers.push(g.deltaAnimation))}}),i.dataItems.values.sort(function(g,b){return g.index-b.index})},a.prototype.validateDataElement=function(i){this.chart&&this.xAxis&&this.yAxis&&(this.validateDataElementReal(i),e.prototype.validateDataElement.call(this,i))},a.prototype.getStartLocation=function(i){var o=this._startLocation;return this.baseAxis==this.xAxis?o+=i.locations[this.xOpenField]-.5:o+=i.locations[this.yOpenField]-.5,o},a.prototype.getEndLocation=function(i){var o=this._endLocation;return this.baseAxis==this.xAxis?o+=i.locations[this.xField]-.5:o+=i.locations[this.yField]-.5,o},a.prototype.validateDataElementReal=function(i){var o=this,c,d,g,b,j=this.getStartLocation(i),$=this.getEndLocation(i),rt=this.xField,_e=this.xOpenField,st=this.yField,ut=this.yOpenField,gt=this.columns.template,yt=gt.percentWidth,Pt=gt.percentHeight,wt=gt.pixelWidth,Ct=gt.pixelHeight,At=gt.maxWidth,Tt=gt.maxHeight,kt=gt.pixelPaddingLeft,It=gt.pixelPaddingRight,Lt=gt.pixelPaddingTop,Ft=gt.pixelPaddingBottom,Nt=!1,Ht=i.width;hasValue(Ht)&&(isNumber$1(Ht)&&(wt=Ht),Ht instanceof Percent&&(yt=Ht.value*100));var Gr=i.height;if(hasValue(Gr)&&(isNumber$1(Gr)&&(Ct=Gr),Gr instanceof Percent&&(Pt=Gr.value*100)),this.xAxis instanceof CategoryAxis&&this.yAxis instanceof CategoryAxis){if(!i.hasValue(this._xValueFields)||!i.hasValue(this._yValueFields))return;if(j=0,$=1,!isNaN$1(yt)){var hs=round$1(($-j)*(1-yt/100)/2,5);j+=hs,$-=hs}if(c=this.xAxis.getX(i,_e,j),d=this.xAxis.getX(i,rt,$),isNaN$1(yt)){var hs=(d-c-wt)/2;c+=hs,d-=hs}if(!isNaN$1(At)&&At<Math.abs(d-c)){var hs=(d-c-At)/2;c+=hs,d-=hs}if(j=0,$=1,!isNaN$1(Pt)){var hs=round$1((1-Pt/100)/2,5);j+=hs,$-=hs}if(g=this.yAxis.getY(i,ut,j),b=this.yAxis.getY(i,st,$),isNaN$1(Pt)){var hs=(b-g-Ct)/2;b+=hs,g-=hs}if(!isNaN$1(Tt)&&Tt<Math.abs(b-g)){var hs=(b-g-Tt)/2;b+=hs,g-=hs}d=this.fixHorizontalCoordinate(d),c=this.fixHorizontalCoordinate(c),g=this.fixVerticalCoordinate(g),b=this.fixVerticalCoordinate(b)}else if(this.baseAxis==this.xAxis){if(!i.hasValue(this._yValueFields))return;if(!isNaN$1(yt)){var hs=round$1(($-j)*(1-yt/100)/2,5);j+=hs,$-=hs}if(c=this.xAxis.getX(i,_e,j),d=this.xAxis.getX(i,rt,$),isNaN$1(yt)){var hs=(d-c-wt)/2;c+=hs,d-=hs}if(!isNaN$1(At)&&At<Math.abs(d-c)){var hs=(d-c-At)/2;c+=hs,d-=hs}var _s=i.locations[ut],hn=i.locations[st];this.yAxis instanceof ValueAxis&&this.dataFields[this.yField]!=this.dataFields[this.yOpenField]&&(_s=0,hn=0),b=this.yAxis.getY(i,ut,_s),g=this.yAxis.getY(i,st,hn);var Qn=Math.ceil(this.yAxis.axisLength);(g<0&&b<0||g>Qn&&b>Qn)&&(Nt=!0),g=this.fixVerticalCoordinate(g),b=this.fixVerticalCoordinate(b),Math.abs(d-c)-kt-It==0&&(Nt=!0)}else{if(!i.hasValue(this._xValueFields))return;if(!isNaN$1(Pt)){var hs=round$1(($-j)*(1-Pt/100)/2,5);j+=hs,$-=hs}if(g=this.yAxis.getY(i,ut,j),b=this.yAxis.getY(i,st,$),isNaN$1(Pt)){var hs=(b-g-Ct)/2;b-=hs,g+=hs}if(!isNaN$1(Tt)&&Tt<Math.abs(b-g)){var hs=(b-g-Tt)/2;b-=hs,g+=hs}var ds=i.locations[rt],un=i.locations[_e];this.xAxis instanceof ValueAxis&&this.dataFields[this.xField]!=this.dataFields[this.xOpenField]&&(ds=0,un=0),d=this.xAxis.getX(i,rt,ds),c=this.xAxis.getX(i,_e,un);var Qn=Math.ceil(this.xAxis.axisLength);(d<0&&c<0||d>Qn&&c>Qn)&&(Nt=!0),d=this.fixHorizontalCoordinate(d),c=this.fixHorizontalCoordinate(c),Math.abs(g-b)-Lt-Ft==0&&(Nt=!0)}var dr=Math.abs(d-c),us=Math.abs(b-g),Nn=Math.min(c,d),gn=Math.min(g,b);if(Nt)this.disableUnusedColumns(i);else{var Zn;i.column?(Zn=i.column,this._propertiesChanged&&(copyProperties$1(this,Zn,visualProperties),copyProperties$1(this.columns.template,Zn,visualProperties),each$2(visualProperties,function(xu){Zn[xu]=Zn[xu]}))):(Zn=this.columns.create(),copyProperties$1(this,Zn,visualProperties),copyProperties$1(this.columns.template,Zn,visualProperties),i.addSprite(Zn),i.column=Zn,Zn.paper=this.paper,this.itemsFocusable()?(hasValue(this.role)||(this.role="menu"),hasValue(Zn.role)||(Zn.role="menuitem"),Zn.focusable=!0):(hasValue(this.role)||(this.role="list"),hasValue(Zn.role)||(Zn.role="listitem"),Zn.focusable=!1),Zn.focusable&&(Zn.events.on("focus",function(xu){Zn.readerTitle=o.populateString(o.itemReaderText,i)},void 0,!1),Zn.events.on("blur",function(xu){Zn.readerTitle=""},void 0,!1)),Zn.hoverable&&(Zn.events.on("over",function(xu){Zn.readerTitle=o.populateString(o.itemReaderText,i)},void 0,!1),Zn.events.on("out",function(xu){Zn.readerTitle=""},void 0,!1)),Zn.parent=this.columnsContainer,Zn.virtualParent=this),Zn.width=dr,Zn.height=us,Zn.x=Nn,Zn.y=gn,Zn.realX=c,Zn.realY=g,Zn.realWidth=d-c,Zn.realHeight=b-g,this.setColumnStates(Zn),Zn.invalid&&Zn.validate(),Zn.__disabled=!1,each(this.axisRanges.iterator(),function(xu){var au=i.rangesColumns.getKey(xu.uid);au||(au=o.columns.create(),copyProperties$1(xu.contents,au,visualProperties),i.addSprite(au),i.rangesColumns.setKey(xu.uid,au),au.paper=o.paper),au.parent=xu.contents,au.width=dr,au.height=us,au.x=Nn,au.y=gn,o.setColumnStates(au),au.invalid&&au.validate(),au.__disabled=!1})}i.itemWidth=dr,i.itemHeight=us},a.prototype.disableUnusedColumns=function(i){i&&(i.column&&(i.column.width=0,i.column.height=0,i.column.__disabled=!0),each(this.axisRanges.iterator(),function(o){var c=i.rangesColumns.getKey(o.uid);c&&(c.width=0,c.height=0,c.__disabled=!0)}))},a.prototype.setColumnStates=function(i){if(this._dropFromOpenState||this._dropFromPreviousState||this._riseFromOpenState||this._riseFromPreviousState){var o=i.dataItem;if(this.xAxis instanceof ValueAxis||this.yAxis instanceof ValueAxis){var c,d=void 0,g=void 0;this.baseAxis==this.yAxis?(this.xOpenField&&this.xField&&this.xAxis instanceof ValueAxis&&(c=o.getValue(this.xOpenField),d=o.getValue(this.xField)),g=o.getValue(this.xAxis.axisFieldName+"X","previousChange")):(this.yOpenField&&this.yField&&this.yAxis instanceof ValueAxis&&(c=o.getValue(this.yOpenField),d=o.getValue(this.yField)),g=o.getValue(this.yAxis.axisFieldName+"Y","previousChange")),d<c?(o.droppedFromOpen=!0,i.defaultState.copyFrom(this._dropFromOpenState),i.setState(this._dropFromOpenState,0)):(o.droppedFromOpen=!1,i.defaultState.copyFrom(this._riseFromOpenState),i.setState(this._riseFromOpenState,0)),g<0?(o.droppedFromPrevious=!0,i.defaultState.copyFrom(this._dropFromPreviousState),i.setState(this._dropFromPreviousState,0)):(o.droppedFromPrevious=!1,i.defaultState.copyFrom(this._riseFromPreviousState),i.setState(this._riseFromPreviousState,0))}}},Object.defineProperty(a.prototype,"columns",{get:function(){return this._columns||(this._columns=new ListTemplate(this.createColumnTemplate()),this._disposers.push(new ListDisposer(this._columns)),this._disposers.push(this._columns.template)),this._columns},enumerable:!0,configurable:!0}),a.prototype.createColumnTemplate=function(){return new Column},Object.defineProperty(a.prototype,"clustered",{get:function(){return this.getPropertyValue("clustered")},set:function(i){this.setPropertyValue("clustered",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"dropFromOpenState",{get:function(){return this._dropFromOpenState||(this._dropFromOpenState=this.states.create("dropFromOpenState")),this._dropFromOpenState},set:function(i){this._dropFromOpenState=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"dropFromPreviousState",{get:function(){return this._dropFromPreviousState||(this._dropFromPreviousState=this.states.create("dropFromPreviousState")),this._dropFromPreviousState},set:function(i){this._dropFromPreviousState=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"riseFromOpenState",{get:function(){return this._riseFromOpenState||(this._riseFromOpenState=this.states.create("riseFromOpenState")),this._riseFromOpenState},set:function(i){this._riseFromOpenState=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"riseFromPreviousState",{get:function(){return this._riseFromPreviousState||(this._riseFromPreviousState=this.states.create("riseFromPreviousState")),this._riseFromPreviousState},set:function(i){this._riseFromPreviousState=i},enumerable:!0,configurable:!0}),a.prototype.updateLegendValue=function(i,o){var c=this;if(e.prototype.updateLegendValue.call(this,i,o),this.legendDataItem){var d=this.legendDataItem.marker,g,b;i&&(i.droppedFromOpen?g=this._dropFromOpenState:g=this._riseFromOpenState,i.droppedFromPrevious?b=this._dropFromPreviousState:b=this._riseFromPreviousState),each(d.children.iterator(),function(j){i?(j.setState(b),j.setState(g)):(j.setState(c._riseFromPreviousState),j.setState(c._riseFromOpenState))})}},a.prototype.createLegendMarker=function(i){var o=i.pixelWidth,c=i.pixelHeight;i.removeChildren();var d=i.createChild(RoundedRectangle);d.shouldClone=!1,copyProperties$1(this,d,visualProperties),d.copyFrom(this.columns.template),d.padding(0,0,0,0),d.width=o,d.height=c;var g=i.dataItem;g.color=this.fill,g.colorOrig=this.fill},a.prototype.copyFrom=function(i){e.prototype.copyFrom.call(this,i),this.columns.template.copyFrom(i.columns.template)},a.prototype.getBulletLocationX=function(i,o){if(this.baseAxis==this.xAxis){var c=i.locationX;isNumber$1(c)||(c=.5);var d=this.getEndLocation(i.dataItem),g=this.getStartLocation(i.dataItem);return d-(d-g)*c}else return e.prototype.getBulletLocationX.call(this,i,o)},a.prototype.getBulletLocationY=function(i,o){if(this.baseAxis==this.yAxis){var c=i.locationY;isNumber$1(c)||(c=.5);var d=this.getEndLocation(i.dataItem),g=this.getStartLocation(i.dataItem);return d-(d-g)*c}else return e.prototype.getBulletLocationY.call(this,i,o)},a.prototype.getAdjustedXLocation=function(i,o,c){return isNumber$1(c)||(i?c=i.locations[o]:c=.5),this._endLocation-(this._endLocation-this._startLocation)*(1-c)},a.prototype.getAdjustedYLocation=function(i,o,c){return isNumber$1(c)||(i?c=i.locations[o]:c=.5),this._endLocation-(this._endLocation-this._startLocation)*c},a.prototype.fixVerticalCoordinate=function(i){var o=this.columns.template.pixelPaddingBottom,c=this.columns.template.pixelPaddingTop,d=-c,g=this.yAxis.axisLength+o;return fitToRange(i,d,g)},a.prototype.fixHorizontalCoordinate=function(i){var o=this.columns.template.pixelPaddingLeft,c=this.columns.template.pixelPaddingRight,d=-o,g=this.xAxis.axisLength+c;return fitToRange(i,d,g)},a.prototype.disposeData=function(){e.prototype.disposeData.call(this),this.columns.clear()},a}(XYSeries);registry.registeredClasses.ColumnSeries=ColumnSeries;registry.registeredClasses.ColumnSeriesDataItem=ColumnSeriesDataItem;var TreeMapSeriesDataItem=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="TreeMapSeriesDataItem",i.applyTheme(),i}return Object.defineProperty(a.prototype,"parentName",{get:function(){var i=this.treeMapDataItem;if(i&&i.parent)return i.parent.name},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"value",{get:function(){var i=this.treeMapDataItem;if(i)return i.value},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"treeMapDataItem",{get:function(){return this._dataContext},enumerable:!0,configurable:!0}),a.prototype.hide=function(i,o,c,d){var g=this.treeMapDataItem;return g&&g.hide(i),e.prototype.hide.call(this,i,o,c,d)},a.prototype.show=function(i,o,c){var d=this.treeMapDataItem;return d&&d.show(i,o,c),e.prototype.show.call(this,i,o,c)},a}(ColumnSeriesDataItem),TreeMapSeries=function(e){__extends(a,e);function a(){var i=e.call(this)||this;i.className="TreeMapSeries",i.applyTheme(),i.fillOpacity=1,i.strokeOpacity=1,i.minBulletDistance=0,i.columns.template.tooltipText="{parentName} {name}: {value}",i.columns.template.configField="config";var o=new InterfaceColorSet;return i.stroke=o.getFor("background"),i.dataFields.openValueX="x0",i.dataFields.valueX="x1",i.dataFields.openValueY="y0",i.dataFields.valueY="y1",i.sequencedInterpolation=!1,i.showOnInit=!1,i.columns.template.pixelPerfect=!1,i}return a.prototype.processDataItem=function(i,o){o.seriesDataItem=i,e.prototype.processDataItem.call(this,i,o)},a.prototype.createDataItem=function(){return new TreeMapSeriesDataItem},a.prototype.show=function(i){if(!this.preventShow){var o=this.defaultState.transitionDuration;return isNumber$1(i)&&(o=i),this.dataItems.each(function(c){c.show(i)}),e.prototype.showReal.call(this,o)}},a.prototype.hide=function(i){var o=this.defaultState.transitionDuration;isNumber$1(i)&&(o=i);var c=e.prototype.hideReal.call(this,o);return this.dataItems.each(function(d){d.hide(i)}),c},a.prototype.processValues=function(){},a.prototype.getStartLocation=function(i){return 0},a.prototype.getEndLocation=function(i){return 1},a.prototype.dataChangeUpdate=function(){},a.prototype.processConfig=function(i){i&&(!hasValue(i.dataFields)||!isObject$1(i.dataFields))&&(i.dataFields={}),e.prototype.processConfig.call(this,i)},a.prototype.createLegendMarker=function(i){var o=i.pixelWidth,c=i.pixelHeight;i.removeChildren();var d=i.createChild(RoundedRectangle);d.shouldClone=!1,copyProperties$1(this,d,visualProperties),d.padding(0,0,0,0),d.width=o,d.height=c;var g=i.dataItem;g.color=d.fill,g.colorOrig=d.fill},a.prototype.disableUnusedColumns=function(i){e.prototype.disableUnusedColumns.call(this,i),i.column&&(i.column.__disabled=!1)},a}(ColumnSeries);registry.registeredClasses.TreeMapSeries=TreeMapSeries;registry.registeredClasses.TreeMapSeriesDataItem=TreeMapSeriesDataItem;var TreeMapDataItem=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.rows=[],i.className="TreeMapDataItem",i.values.value={workingValue:0},i.values.x0={},i.values.y0={},i.values.x1={},i.values.y1={},i.hasChildren.children=!0,i.applyTheme(),i}return Object.defineProperty(a.prototype,"legendDataItem",{get:function(){return this._legendDataItem},set:function(i){this._legendDataItem=i,i.label&&(i.label.dataItem=this),i.valueLabel&&(i.valueLabel.dataItem=this)},enumerable:!0,configurable:!0}),a.prototype.getDuration=function(){return 0},Object.defineProperty(a.prototype,"value",{get:function(){var i=0;return!this.children||this.children.length==0?i=this.values.value.workingValue:each(this.children.iterator(),function(o){var c=o.value;isNumber$1(c)&&(i+=c)}),i},set:function(i){this.setValue("value",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"percent",{get:function(){return this.parent?this.value/this.parent.value*100:100},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"x0",{get:function(){return this.values.x0.value},set:function(i){this.setValue("x0",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"x1",{get:function(){return this.values.x1.value},set:function(i){this.setValue("x1",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"y0",{get:function(){return this.values.y0.value},set:function(i){this.setValue("y0",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"y1",{get:function(){return this.values.y1.value},set:function(i){this.setValue("y1",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"name",{get:function(){return this.properties.name},set:function(i){this.setProperty("name",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"children",{get:function(){return this.properties.children},set:function(i){this.setProperty("children",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"level",{get:function(){return this.parent?this.parent.level+1:0},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"color",{get:function(){var i=this.properties.color;return i==null&&this.parent&&(i=this.parent.color),i==null&&this.component&&(i=this.component.colors.getIndex(this.component.colors.step*this.index)),i},set:function(i){this.setProperty("color",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"fill",{get:function(){return this.color},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"series",{get:function(){return this._series},set:function(i){i!=this._series&&(this._series&&(this.component.series.removeValue(this._series),this._series.dispose()),this._series=i,this._disposers.push(i))},enumerable:!0,configurable:!0}),a.prototype.hide=function(i,o,c,d){this.setWorkingValue("value",0),this.children&&this.children.each(function(b){b.hide(i,o,c,d)});var g=this.seriesDataItem;return g&&g.bullets.each(function(b,j){j.hide(),j.preventShow=!0}),e.prototype.hide.call(this,i,o,c,d)},a.prototype.show=function(i,o,c){this.setWorkingValue("value",this.values.value.value),this.children&&this.children.each(function(g){g.show(i,o,c)});var d=this.seriesDataItem;return d&&d.bullets.each(function(g,b){b.preventShow=!1}),e.prototype.show.call(this,i,o,c)},a}(XYChartDataItem),TreeMap=function(e){__extends(a,e);function a(){var i=e.call(this)||this;i.layoutAlgorithm=i.squarify,i.zoomable=!0,i.className="TreeMap",i._usesData=!0,i.maxLevels=2,i.currentLevel=0,i.hideParentColumns=!1,i.colors=new ColorSet,i.sorting="descending";var o=i.xAxes.push(new ValueAxis);o.title.disabled=!0,o.strictMinMax=!0;var c=o.renderer;c.inside=!0,c.labels.template.disabled=!0,c.ticks.template.disabled=!0,c.grid.template.disabled=!0,c.axisFills.template.disabled=!0,c.minGridDistance=100,c.line.disabled=!0,c.baseGrid.disabled=!0;var d=i.yAxes.push(new ValueAxis);d.title.disabled=!0,d.strictMinMax=!0;var g=d.renderer;g.inside=!0,g.labels.template.disabled=!0,g.ticks.template.disabled=!0,g.grid.template.disabled=!0,g.axisFills.template.disabled=!0,g.minGridDistance=100,g.line.disabled=!0,g.baseGrid.disabled=!0,g.inversed=!0,i.xAxis=o,i.yAxis=d;var b=new TreeMapSeries;return i.seriesTemplates=new DictionaryTemplate(b),b.virtualParent=i,i._disposers.push(new DictionaryDisposer(i.seriesTemplates)),i._disposers.push(b),i.zoomOutButton.events.on("hit",function(){i.zoomToChartDataItem(i._homeDataItem)},void 0,!1),i.seriesTemplates.events.on("insertKey",function(j){j.newValue.isTemplate=!0},void 0,!1),i.applyTheme(),i}return Object.defineProperty(a.prototype,"navigationBar",{get:function(){return this._navigationBar},set:function(i){var o=this;this._navigationBar!=i&&(this._navigationBar=i,i.parent=this,i.toBack(),i.links.template.events.on("hit",function(c){var d=c.target.dataItem.dataContext;d.isDisposed()||(o.zoomToChartDataItem(d),o.createTreeSeries(d))},void 0,!0),this._disposers.push(i))},enumerable:!0,configurable:!0}),a.prototype.validateData=function(){this.series.clear(),this._tempSeries=[],e.prototype.validateData.call(this),this._homeDataItem&&this._homeDataItem.dispose();var i=this.dataItems.template.clone();this._homeDataItem=i,each(this.dataItems.iterator(),function(d){d.parent=i}),i.children=this.dataItems,i.x0=0,i.y0=0,i.name=this._homeText;var o=1e3,c=Math.round(o*this.pixelHeight/this.pixelWidth/10)*10||1e3;i.x1=o,i.y1=c,this.xAxis.min=0,this.xAxis.max=o,this.xAxis.getMinMax(),this.yAxis.min=0,this.yAxis.max=c,this.yAxis.getMinMax(),this.layoutItems(i),this.createTreeSeries(i),this.feedLegend()},a.prototype.layoutItems=function(i,o){if(i){var c=i.children;o||(o=this.sorting),o=="ascending"&&c.values.sort(function(j,$){return j.value-$.value}),o=="descending"&&c.values.sort(function(j,$){return $.value-j.value}),this._updateDataItemIndexes(0),this.layoutAlgorithm(i);for(var d=0,g=c.length;d<g;d++){var b=c.getIndex(d);b.children&&this.layoutItems(b)}}},a.prototype.createTreeSeries=function(i){var o=this;this._tempSeries=[];for(var c=[i],d=i.parent;d!=null;)this.initSeries(d),c.push(d),d=d.parent;c.reverse(),this.navigationBar&&(this.navigationBar.data=c),this.createTreeSeriesReal(i),each$2(this._tempSeries,function(g){o.series.indexOf(g)==-1&&o.series.push(g),g.zIndex=g.level})},a.prototype.createTreeSeriesReal=function(i){if(i.children){var o=i.level;if(o<this.currentLevel+this.maxLevels){this.initSeries(i);for(var c=0;c<i.children.length;c++){var d=i.children.getIndex(c);d.children&&this.createTreeSeriesReal(d)}}}},a.prototype.setData=function(i){this.currentLevel=0,this.currentlyZoomed=void 0,this.xAxis.start=0,this.xAxis.end=1,this.yAxis.start=0,this.yAxis.end=1,e.prototype.setData.call(this,i)},a.prototype.seriesAppeared=function(){return!0},a.prototype.initSeries=function(i){var o=this;if(!i.series){var c=void 0,d=this.seriesTemplates.getKey(i.level.toString());d?c=d.clone():c=this.series.create(),c.dataItem.dataContext=i,c.name=i.name,c.parentDataItem=i,i.series=c;var g=i.level;c.level=g;var b=i.dataContext;b&&(c.config=b.config),this.dataUsers.removeValue(c),c.data=i.children.values,c.fill=i.color,c.columnsContainer.hide(0),c.bulletsContainer.hide(0),c.columns.template.adapter.add("fill",function(j,$){var rt=$.dataItem;if(rt){var _e=rt.treeMapDataItem;if(_e)return $.fill=_e.color,$.adapter.remove("fill"),_e.color}}),this.zoomable&&(i.level>this.currentLevel||i.children&&i.children.length>0)&&(c.columns.template.cursorOverStyle=MouseCursorStyle.pointer,this.zoomable&&c.columns.template.events.on("hit",function(j){var $=j.target.dataItem;i.level>o.currentLevel?o.zoomToChartDataItem($.treeMapDataItem.parent):o.zoomToSeriesDataItem($)},this,void 0))}this._tempSeries.push(i.series)},a.prototype.toggleBullets=function(i){var o=this;each(this.series.iterator(),function(c){o._tempSeries.indexOf(c)==-1?(c.columnsContainer.hide(),c.bulletsContainer.hide(i)):(c.columnsContainer.show(),c.bulletsContainer.show(i),c.dataItems.each(function(d){d.bullets.each(function(g,b){b.show()})}),c.level<o.currentLevel?(o.hideParentColumns&&c.columnsContainer.hide(),c.bulletsContainer.hide(i)):c.level==o.currentLevel&&o.maxLevels>1&&c.dataItems.each(function(d){d.treeMapDataItem.children&&d.bullets.each(function(g,b){b.hide()})}))})},a.prototype.zoomToSeriesDataItem=function(i){this.zoomToChartDataItem(i.treeMapDataItem)},a.prototype.zoomToChartDataItem=function(i){var o=this;i||(i=this._homeDataItem);var c=this.zoomOutButton;if(c&&(i!=this._homeDataItem?c.show():c.hide()),i&&i.children){this.xAxis.zoomToValues(i.x0,i.x1),this.yAxis.zoomToValues(i.y0,i.y1),this.currentLevel=i.level,this.currentlyZoomed=i,this.createTreeSeries(i);var d=this.xAxis.rangeChangeAnimation||this.yAxis.rangeChangeAnimation;d&&!d.isDisposed()&&!d.isFinished()?(this._dataDisposers.push(d),d.events.once("animationended",function(){o.toggleBullets()})):this.toggleBullets()}},a.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("TreeMap chart"))},a.prototype.createDataItem=function(){return new TreeMapDataItem},Object.defineProperty(a.prototype,"maxLevels",{get:function(){return this.getPropertyValue("maxLevels")},set:function(i){this.setPropertyValue("maxLevels",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"currentLevel",{get:function(){return this.getPropertyValue("currentLevel")},set:function(i){this.setPropertyValue("currentLevel",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"hideParentColumns",{get:function(){return this.getPropertyValue("hideParentColumns")},set:function(i){this.setPropertyValue("hideParentColumns",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"sorting",{get:function(){return this.getPropertyValue("sorting")},set:function(i){this.setPropertyValue("sorting",i,!0)},enumerable:!0,configurable:!0}),a.prototype.createSeries=function(){return new TreeMapSeries},Object.defineProperty(a.prototype,"homeText",{get:function(){return this._homeText},set:function(i){this._homeText=i,this._homeDataItem&&(this._homeDataItem.name=this._homeText)},enumerable:!0,configurable:!0}),a.prototype.processConfig=function(i){if(i){if(hasValue(i.layoutAlgorithm)&&isString$1(i.layoutAlgorithm))switch(i.layoutAlgorithm){case"squarify":i.layoutAlgorithm=this.squarify;break;case"binaryTree":i.layoutAlgorithm=this.binaryTree;break;case"slice":i.layoutAlgorithm=this.slice;break;case"dice":i.layoutAlgorithm=this.dice;break;case"sliceDice":i.layoutAlgorithm=this.sliceDice;break;default:delete i.layoutAlgorithm;break}hasValue(i.navigationBar)&&!hasValue(i.navigationBar.type)&&(i.navigationBar.type="NavigationBar"),e.prototype.processConfig.call(this,i)}},a.prototype.validateLayout=function(){e.prototype.validateLayout.call(this),this.layoutItems(this.currentlyZoomed)},a.prototype.validateDataItems=function(){e.prototype.validateDataItems.call(this),this.layoutItems(this._homeDataItem),each(this.series.iterator(),function(i){i.validateRawData()}),this.zoomToChartDataItem(this._homeDataItem)},a.prototype.binaryTree=function(i){var o=i.children,c,d=o.length,g,b=new Array(d+1);for(b[0]=g=c=0;c<d;++c)b[c+1]=g+=o.getIndex(c).value;d>0&&j(0,d,i.value,i.x0,i.y0,i.x1,i.y1);function j($,rt,_e,st,ut,gt,yt){if($>=rt-1){var Pt=o.getIndex($);Pt.x0=st,Pt.y0=ut,Pt.x1=gt,Pt.y1=yt;return}for(var wt=b[$],Ct=_e/2+wt,At=$+1,Tt=rt-1;At<Tt;){var kt=At+Tt>>>1;b[kt]<Ct?At=kt+1:Tt=kt}Ct-b[At-1]<b[At]-Ct&&$+1<At&&--At;var It=b[At]-wt,Lt=_e-It;if(_e==0){var Pt=o.getIndex($);Pt.x0=st,Pt.y0=ut,Pt.x1=gt,Pt.y1=yt;return}if(gt-st>yt-ut){var Ft=(st*Lt+gt*It)/_e;j($,At,It,st,ut,Ft,yt),j(At,rt,Lt,Ft,ut,gt,yt)}else{var Nt=(ut*Lt+yt*It)/_e;j($,At,It,st,ut,gt,Nt),j(At,rt,Lt,st,Nt,gt,yt)}}},a.prototype.slice=function(i){for(var o=i.x0,c=i.x1,d=i.y0,g=i.y1,b=i.children,j,$=-1,rt=b.length,_e=i.value&&(g-d)/i.value;++$<rt;)j=b.getIndex($),j.x0=o,j.x1=c,j.y0=d,d+=j.value*_e,j.y1=d},a.prototype.dice=function(i){for(var o=i.x0,c=i.x1,d=i.y0,g=i.y1,b=i.children,j,$=-1,rt=b.length,_e=i.value&&(c-o)/i.value;++$<rt;)j=b.getIndex($),j.y0=d,j.y1=g,j.x0=o,o+=j.value*_e,j.x1=o},a.prototype.sliceDice=function(i){i.level&1?this.slice(i):this.dice(i)},a.prototype.squarify=function(i){for(var o=(1+Math.sqrt(5))/2,c=i.x0,d=i.x1,g=i.y0,b=i.y1,j=i.children,$,rt=0,_e=0,st=j.length,ut,gt,yt=i.value,Pt,wt,Ct,At,Tt,kt,It;rt<st;){ut=d-c,gt=b-g;do Pt=j.getIndex(_e++).value;while(!Pt&&_e<st);for(wt=Ct=Pt,kt=Math.max(gt/ut,ut/gt)/(yt*o),It=Pt*Pt*kt,Tt=Math.max(Ct/It,It/wt);_e<st;++_e){if(Pt+=$=j.getIndex(_e).value,$<wt&&(wt=$),$>Ct&&(Ct=$),It=Pt*Pt*kt,At=Math.max(Ct/It,It/wt),At>Tt){Pt-=$;break}Tt=At}var Lt=this.dataItems.template.clone();Lt.value=Pt,Lt.dice=ut<gt,Lt.children=j.slice(rt,_e),Lt.x0=c,Lt.y0=g,Lt.x1=d,Lt.y1=b,Lt.dice?(Lt.y1=yt?g+=gt*Pt/yt:b,this.dice(Lt)):(Lt.x1=yt?c+=ut*Pt/yt:d,this.slice(Lt)),yt-=Pt,rt=_e}},a.prototype.handleSeriesAdded2=function(){},a.prototype.handleDataItemValueChange=function(i,o){o=="value"&&this.invalidateDataItems()},a.prototype.handleDataItemWorkingValueChange=function(i,o){o=="value"&&this.invalidateDataItems()},a.prototype.getLegendLevel=function(i){if(i&&i.children){if(i.children.length>1)return i;if(i.children.length==1){var o=i.children.getIndex(0);return o.children?this.getLegendLevel(o):i}else return i}},a.prototype.handleLegendSeriesAdded=function(i){},Object.defineProperty(a.prototype,"homeDataItem",{get:function(){return this._homeDataItem},enumerable:!0,configurable:!0}),a.prototype.feedLegend=function(){var i=this.legend;if(i){i.dataFields.name="name";var o=this.getLegendLevel(this._homeDataItem);if(o){var c=[];o.children.each(function(d){c.push(d)}),i.data=c}}},a.prototype.disposeData=function(){e.prototype.disposeData.call(this),this._homeDataItem=void 0,this.series.clear(),this.navigationBar&&this.navigationBar.disposeData(),this.xAxis.disposeData(),this.yAxis.disposeData()},a.prototype.getExporting=function(){var i=this,o=e.prototype.getExporting.call(this);return o.adapter.add("formatDataFields",function(c){return(c.format=="csv"||c.format=="xlsx")&&hasValue(i.dataFields.children)&&delete c.dataFields[i.dataFields.children],c}),o},a}(XYChart);registry.registeredClasses.TreeMap=TreeMap;var AxisRendererX3D=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i._chart=new MutableValueDisposer,i.className="AxisRendererX3D",i._disposers.push(i._chart),i.applyTheme(),i}return a.prototype.updateGridElement=function(i,o,c){o=o+(c-o)*i.location;var d=this.positionToPoint(o);if(i.element){var g=this.chart.dx3D||0,b=this.chart.dy3D||0,j=this.getHeight();i.path=moveTo({x:g,y:b})+lineTo({x:g,y:j+b})+lineTo({x:0,y:j})}this.positionItem(i,d),this.toggleVisibility(i,o,0,1)},a.prototype.updateBaseGridElement=function(){e.prototype.updateBaseGridElement.call(this);var i=this.getHeight(),o=this.chart.dx3D||0,c=this.chart.dy3D||0;this.baseGrid.path=moveTo({x:o,y:c})+lineTo({x:0,y:0})+lineTo({x:0,y:i})},Object.defineProperty(a.prototype,"chart",{get:function(){return this._chart.get()},set:function(i){i&&this._chart.set(i,i.events.on("propertychanged",this.handle3DChanged,this,!1))},enumerable:!0,configurable:!0}),a.prototype.handle3DChanged=function(i){(i.property=="depth"||i.property=="angle")&&this.invalidate()},a}(AxisRendererX);registry.registeredClasses.AxisRendererX3D=AxisRendererX3D;var AxisRendererY3D=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i._chart=new MutableValueDisposer,i.className="AxisRendererY3D",i._disposers.push(i._chart),i.applyTheme(),i}return a.prototype.updateGridElement=function(i,o,c){o=o+(c-o)*i.location;var d=this.positionToPoint(o);if(i.element){var g=this.chart.dx3D||0,b=this.chart.dy3D||0,j=this.getWidth();i.path=moveTo({x:0,y:0})+lineTo({x:g,y:b})+lineTo({x:j+g,y:b})}this.positionItem(i,d),this.toggleVisibility(i,o,0,1)},a.prototype.updateBaseGridElement=function(){e.prototype.updateBaseGridElement.call(this);var i=this.chart.dx3D||0,o=this.chart.dy3D||0,c=this.getWidth();this.baseGrid.path=moveTo({x:0,y:0})+lineTo({x:c,y:0})+lineTo({x:c+i,y:o})},Object.defineProperty(a.prototype,"chart",{get:function(){return this._chart.get()},set:function(i){i&&this._chart.set(i,i.events.on("propertychanged",this.handle3DChanged,this,!1))},enumerable:!0,configurable:!0}),a.prototype.handle3DChanged=function(i){(i.property=="depth"||i.property=="angle")&&this.invalidate()},a}(AxisRendererY),Column3D=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="Column3D",i}return a.prototype.createAssets=function(){this.column3D=this.createChild(Rectangle3D),this.column3D.shouldClone=!1,this.column3D.strokeOpacity=0,this.column=this.column3D},a.prototype.validate=function(){e.prototype.validate.call(this),this.column3D&&(this.column3D.width=this.pixelWidth,this.column3D.height=this.pixelHeight,this.column3D.invalid&&this.column3D.validate())},a.prototype.copyFrom=function(i){e.prototype.copyFrom.call(this,i),this.column3D&&this.column3D.copyFrom(i.column3D)},a.prototype.setFill=function(i){e.prototype.setFill.call(this,i),this.column.fill=i},a}(Column);registry.registeredClasses.Column3D=Column3D;var ColumnSeries3DDataItem=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="ColumnSeries3DDataItem",i.applyTheme(),i}return a}(ColumnSeriesDataItem),ColumnSeries3D=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="ColumnSeries3D",i.columns.template.column3D.applyOnClones=!0,i.columns.template.hiddenState.properties.visible=!0,i.applyTheme(),i}return Object.defineProperty(a.prototype,"columnsContainer",{get:function(){var i=this.chart;return i&&i.columnsContainer&&i.leftAxesContainer.layout!="vertical"&&i.rightAxesContainer.layout!="vertical"&&i.bottomAxesContainer.layout!="horizontal"&&i.topAxesContainer.layout!="horizontal"?i.columnsContainer:this._columnsContainer},enumerable:!0,configurable:!0}),a.prototype.validateDataElementReal=function(i){e.prototype.validateDataElementReal.call(this,i),i.column&&(i.column.dx=this.dx,i.column.dy=this.dy,i.column.visible=this.visible)},a.prototype.validateDataElements=function(){e.prototype.validateDataElements.call(this),this.chart&&this.chart.invalidateLayout()},a.prototype.createColumnTemplate=function(){return new Column3D},Object.defineProperty(a.prototype,"depth",{get:function(){return this.getPropertyValue("depth")},set:function(i){this.setPropertyValue("depth",i,!0);var o=this.columns.template;o.column3D.depth=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"angle",{get:function(){return this.getPropertyValue("angle")},set:function(i){this.setPropertyValue("angle",i);var o=this.columns.template;o.column3D.angle=i},enumerable:!0,configurable:!0}),a}(ColumnSeries);registry.registeredClasses.ColumnSeries3D=ColumnSeries3D;registry.registeredClasses.ColumnSeries3DDataItem=ColumnSeries3DDataItem;(function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="XYChart3DDataItem",i.applyTheme(),i}return a})(XYChartDataItem);var XYChart3D=function(e){__extends(a,e);function a(){var i=e.call(this)||this;i._axisRendererX=AxisRendererX3D,i._axisRendererY=AxisRendererY3D,i.className="XYChart3D",i.depth=30,i.angle=30;var o=i.seriesContainer.createChild(Container);return o.shouldClone=!1,o.isMeasured=!1,o.layout="none",i.columnsContainer=o,i.columnsContainer.mask=i.createChild(Sprite),i.applyTheme(),i}return a.prototype.updateSeriesMasks=function(){if(e.prototype.updateSeriesMasks.call(this),isIE()){var i=this.columnsContainer,o=i.mask;i.mask=void 0,i.mask=o}},Object.defineProperty(a.prototype,"depth",{get:function(){return this.getPropertyValue("depth")},set:function(i){this.setPropertyValue("depth",i),this.fixLayout(),this.invalidateDataUsers()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"angle",{get:function(){return this.getPropertyValue("angle")},set:function(i){this.setPropertyValue("angle",i),this.fixLayout(),this.invalidateDataUsers()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"dx3D",{get:function(){return cos(this.angle)*this.depth},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"dy3D",{get:function(){return-sin(this.angle)*this.depth},enumerable:!0,configurable:!0}),a.prototype.validateLayout=function(){e.prototype.validateLayout.call(this),this.fixColumns()},a.prototype.fixLayout=function(){this.chartContainer.paddingTop=-this.dy3D,this.chartContainer.paddingRight=this.dx3D,this.scrollbarX&&(this.scrollbarX.dy=this.dy3D,this.scrollbarX.dx=this.dx3D),this.scrollbarY&&(this.scrollbarY.dy=this.dy3D,this.scrollbarY.dx=this.dx3D),this.fixColumns(),e.prototype.fixLayout.call(this)},a.prototype.fixColumns=function(){var i=this,o=1,c=0;each(this.series.iterator(),function(g){g instanceof ColumnSeries3D&&(!g.clustered&&c>0&&o++,g.depthIndex=o-1,c++)});var d=0;each(this.series.iterator(),function(g){if(g instanceof ColumnSeries3D){g.depth=i.depth/o,g.angle=i.angle,g.columnsContainer==i.columnsContainer&&(g.dx=i.depth/o*cos(i.angle)*g.depthIndex,g.dy=-i.depth/o*sin(i.angle)*g.depthIndex);var b=!1;(g.baseAxis==g.xAxis&&g.xAxis.renderer.inversed||g.baseAxis==g.yAxis&&g.yAxis.renderer.inversed)&&(b=!0);var j=1;g.dataItems.each(function($){var rt=$.column;rt&&(b?rt.zIndex=1e3*(1e3-j)+d-g.depthIndex*100:rt.zIndex=1e3*j+d-g.depthIndex*100),j++}),b?d--:d++}}),this.maskColumns()},a.prototype.processConfig=function(i){if(i&&hasValue(i.series)&&isArray$1(i.series))for(var o=0,c=i.series.length;o<c;o++)i.series[o].type=i.series[o].type||"ColumnSeries3D";e.prototype.processConfig.call(this,i)},a.prototype.maskColumns=function(){var i=this.plotContainer.pixelWidth,o=this.plotContainer.pixelHeight,c=this.dx3D,d=this.dy3D,g=moveTo({x:0,y:0})+lineTo({x:c,y:d})+lineTo({x:i+c,y:d})+lineTo({x:i+c,y:o+d})+lineTo({x:i,y:o})+lineTo({x:i,y:o})+lineTo({x:0,y:o})+closePath(),b=this.columnsContainer;b&&b.mask&&(b.mask.path=g)},a}(XYChart);registry.registeredClasses.XYChart3D=XYChart3D;var HeatLegend=function(e){__extends(a,e);function a(){var i=e.call(this)||this;i.className="HeatLegend",i.markerContainer=i.createChild(Container),i.markerContainer.shouldClone=!1,i.markerCount=1;var o=new RoundedRectangle;return o.minHeight=20,o.minWidth=20,o.interactionsEnabled=!1,o.fillOpacity=1,o.cornerRadius(0,0,0,0),i.markerContainer.minHeight=20,i.markerContainer.minWidth=20,i.orientation="horizontal",i.markers=new ListTemplate(o),i._disposers.push(new ListDisposer(i.markers)),i._disposers.push(i.markers.template),i.applyTheme(),i}return a.prototype.getMinFromRules=function(i){var o=this.series;if(o){var c;return eachContinue(o.heatRules.iterator(),function(d){return d.property==i?(c=d.min,!1):!0}),c}},a.prototype.getMaxFromRules=function(i){var o=this.series;if(o){var c;return each(o.heatRules.iterator(),function(d){return d.property==i?(c=d.max,!1):!0}),c}},a.prototype.validate=function(){e.prototype.validate.call(this),this.valueAxis.renderer.inversed=this.reverseOrder;var i=this.series,o=this.minColor,c=this.maxColor;if(hasValue(o)||(o=toColor(this.getMinFromRules("fill"))),hasValue(c)||(c=toColor(this.getMaxFromRules("fill"))),i){var d=i.fill;!hasValue(o)&&d instanceof Color&&(o=d),!hasValue(c)&&d instanceof Color&&(c=d)}hasValue(c)||(c=toColor(this.getMaxFromRules("fill")));var g=toNumber(this.getMinFromRules("fillOpacity"));isNumber$1(g)||(g=1);var b=toNumber(this.getMaxFromRules("fillOpacity"));isNumber$1(b)||(b=1);var j=toNumber(this.getMinFromRules("strokeOpacity"));isNumber$1(j)||(j=1);var $=toNumber(this.getMaxFromRules("strokeOpacity"));isNumber$1($)||($=1);for(var rt=toColor(this.getMinFromRules("stroke")),_e=toColor(this.getMaxFromRules("stroke")),st=0;st<this.markerCount;st++){var ut=this.markers.getIndex(st);if(ut||(ut=this.markers.create(),ut.parent=this.markerContainer,ut.height=percent(100),ut.width=percent(100)),this.markerCount==1){var gt=new LinearGradient;if(this.reverseOrder?(gt.addColor(c,b),gt.addColor(o,g)):(gt.addColor(o,g),gt.addColor(c,b)),this.orientation=="vertical"&&(gt.rotation=-90),ut.fill=gt,hasValue(rt)&&hasValue(_e)){var yt=new LinearGradient;this.reverseOrder?(yt.addColor(_e,$),yt.addColor(rt,j)):(yt.addColor(rt,j),yt.addColor(_e,$)),this.orientation=="vertical"&&(yt.rotation=-90),ut.stroke=yt}}else{var Pt=st;this.reverseOrder&&(Pt=this.markerCount-st-1);var wt=new Color(interpolate(o.rgb,c.rgb,Pt/this.markerCount));ut.fill=wt;var Ct=g+(b-g)*Pt/this.markerCount;if(ut.fillOpacity=Ct,hasValue(rt)&&hasValue(_e)){var At=new Color(interpolate(rt.rgb,_e.rgb,Pt/this.markerCount));ut.stroke=At;var Tt=j+($-j)*Pt/this.markerCount;ut.strokeOpacity=Tt}}}var kt=this.valueAxis.renderer;this.markerCount>1&&(this.orientation=="horizontal"?kt.minGridDistance=this.measuredWidth/this.markerCount:kt.minGridDistance=this.measuredHeight/this.markerCount),this.valueAxis.invalidate();for(var st=this.markerCount,It=this.markers.length;st<It;st++)this.markers.getIndex(st).parent=void 0},Object.defineProperty(a.prototype,"minColor",{get:function(){return this.getPropertyValue("minColor")},set:function(i){i instanceof Color||(i=toColor(i)),this.setColorProperty("minColor",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"maxColor",{get:function(){return this.getPropertyValue("maxColor")},set:function(i){i instanceof Color||(i=toColor(i)),this.setColorProperty("maxColor",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"markerCount",{get:function(){return this.getPropertyValue("markerCount")},set:function(i){this.setPropertyValue("markerCount",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"minValue",{get:function(){return this.getPropertyValue("minValue")},set:function(i){this.setPropertyValue("minValue",i),this.valueAxis.min=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"maxValue",{get:function(){return this.getPropertyValue("maxValue")},set:function(i){this.setPropertyValue("maxValue",i),this.valueAxis.max=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(i){this.setPropertyValue("orientation",i,!0);var o=this.markerContainer,c=this.valueAxis;i=="horizontal"?(hasValue(this.width)||(this.width=200),this.height=void 0,c.width=percent(100),c.height=void 0,c.tooltip.pointerOrientation="vertical",this.layout="vertical",o.width=percent(100),o.height=void 0,c.renderer instanceof AxisRendererX||(c.renderer=new AxisRendererX)):(hasValue(this.height)||(this.height=200),this.width=void 0,this.layout="horizontal",o.width=void 0,o.height=percent(100),c.height=percent(100),c.width=void 0,c.tooltip.pointerOrientation="horizontal",c.renderer instanceof AxisRendererY||(c.renderer=new AxisRendererY),c.renderer.inside=!0,c.renderer.labels.template.inside=!0,this.markerContainer.reverseOrder=!0);var d=c.renderer;d.grid.template.disabled=!0,d.axisFills.template.disabled=!0,d.baseGrid.disabled=!0,d.labels.template.padding(2,3,2,3),d.minHeight=void 0,d.minWidth=void 0,this.markerContainer.layout=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"valueAxis",{get:function(){return this._valueAxis||(this.valueAxis=this.createChild(ValueAxis),this.valueAxis.shouldClone=!1),this._valueAxis},set:function(i){this._valueAxis=i,i.parent=this,i.strictMinMax=!0,this.orientation=this.orientation},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"series",{get:function(){return this._series},set:function(i){var o=this;this._series=i;var c="value";try{var d=i.heatRules.getIndex(0).dataField;d&&(c=d)}catch{}this.updateMinMax(i.dataItem.values[c].low,i.dataItem.values[c].high),i.dataItem.events.on("calculatedvaluechanged",function(g){o.updateMinMax(i.dataItem.values[c].low,i.dataItem.values[c].high)},void 0,!1),i.heatRules.events.on("inserted",this.invalidate,this,!1),i.heatRules.events.on("removed",this.invalidate,this,!1)},enumerable:!0,configurable:!0}),a.prototype.updateMinMax=function(i,o){var c=this.valueAxis;isNumber$1(this.minValue)||(c.min=i,c.invalidate()),isNumber$1(this.maxValue)||(c.max=o,c.invalidate())},a.prototype.processConfig=function(i){if(i&&hasValue(i.series)&&isString$1(i.series)&&isString$1(i.series))if(this.map.hasKey(i.series))i.series=this.map.getKey(i.series);else{var o=i.series,c=this.map.events.on("insertKey",function(d){d.key==o&&(this.series=d.newValue,c.dispose())},this);this._disposers.push(c),delete i.series}e.prototype.processConfig.call(this,i)},a}(Container);registry.registeredClasses.HeatLegend=HeatLegend;var Candlestick=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="Candlestick",i.layout="none",i}return a.prototype.createAssets=function(){e.prototype.createAssets.call(this),this.lowLine=this.createChild(Line),this.lowLine.shouldClone=!1,this.highLine=this.createChild(Line),this.highLine.shouldClone=!1},a.prototype.copyFrom=function(i){e.prototype.copyFrom.call(this,i),this.lowLine&&this.lowLine.copyFrom(i.lowLine),this.highLine&&this.highLine.copyFrom(i.highLine)},a}(Column);registry.registeredClasses.Candlestick=Candlestick;var CandlestickSeriesDataItem=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.values.lowValueX={},i.values.lowValueY={},i.values.highValueX={},i.values.highValueY={},i.className="CandlestickSeriesDataItem",i.applyTheme(),i}return Object.defineProperty(a.prototype,"lowValueX",{get:function(){return this.values.lowValueX.value},set:function(i){this.setValue("lowValueX",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"lowValueY",{get:function(){return this.values.lowValueY.value},set:function(i){this.setValue("lowValueY",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"highValueX",{get:function(){return this.values.highValueX.value},set:function(i){this.setValue("highValueX",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"highValueY",{get:function(){return this.values.highValueY.value},set:function(i){this.setValue("highValueY",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"closeValueX",{get:function(){return this.values.valueX.value},set:function(i){this.setValue("valueX",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"closeValueY",{get:function(){return this.values.valueY.value},set:function(i){this.setValue("valueY",i)},enumerable:!0,configurable:!0}),a}(ColumnSeriesDataItem),CandlestickSeries=function(e){__extends(a,e);function a(){var i=e.call(this)||this;i.className="CandlestickSeries",i.groupFields.lowValueX="low",i.groupFields.lowValueY="low",i.groupFields.highValueX="high",i.groupFields.highValueY="high",i.strokeOpacity=1;var o=new InterfaceColorSet,c=o.getFor("positive"),d=o.getFor("negative");return i.dropFromOpenState.properties.fill=d,i.dropFromOpenState.properties.stroke=d,i.riseFromOpenState.properties.fill=c,i.riseFromOpenState.properties.stroke=c,i.applyTheme(),i}return a.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("Candlestick Series"))},a.prototype.createDataItem=function(){return new CandlestickSeriesDataItem},a.prototype.validateDataElementReal=function(i){e.prototype.validateDataElementReal.call(this,i),this.validateCandlestick(i)},a.prototype.validateCandlestick=function(i){var o=i.column;if(o){var c=o.lowLine,d=o.highLine;if(this.baseAxis==this.xAxis){var g=o.pixelWidth/2;c.x=g,d.x=g;var b=i.getWorkingValue(this.yOpenField),j=i.getWorkingValue(this.yField),$=this.yAxis.getY(i,this.yOpenField),rt=this.yAxis.getY(i,this.yField),_e=this.yAxis.getY(i,this.yLowField),st=this.yAxis.getY(i,this.yHighField),ut=o.pixelY;c.y1=_e-ut,d.y1=st-ut,b<j?(c.y2=$-ut,d.y2=rt-ut):(c.y2=rt-ut,d.y2=$-ut)}if(this.baseAxis==this.yAxis){var gt=o.pixelHeight/2;c.y=gt,d.y=gt;var yt=i.getWorkingValue(this.xOpenField),Pt=i.getWorkingValue(this.xField),wt=this.xAxis.getX(i,this.xOpenField),Ct=this.xAxis.getX(i,this.xField),At=this.xAxis.getX(i,this.xLowField),Tt=this.xAxis.getX(i,this.xHighField),kt=o.pixelX;c.x1=At-kt,d.x1=Tt-kt,yt<Pt?(c.x2=wt-kt,d.x2=Ct-kt):(c.x2=Ct-kt,d.x2=wt-kt)}each(this.axisRanges.iterator(),function(It){var Lt=i.rangesColumns.getKey(It.uid);if(Lt){var Ft=Lt.lowLine;Ft.x=c.x,Ft.y=c.y,Ft.x1=c.x1,Ft.x2=c.x2,Ft.y1=c.y1,Ft.y2=c.y2;var Nt=Lt.highLine;Nt.x=d.x,Nt.y=d.y,Nt.x1=d.x1,Nt.x2=d.x2,Nt.y1=d.y1,Nt.y2=d.y2}})}},Object.defineProperty(a.prototype,"xLowField",{get:function(){return this._xLowField},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"yLowField",{get:function(){return this._yLowField},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"xHighField",{get:function(){return this._xHighField},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"yHighField",{get:function(){return this._yHighField},enumerable:!0,configurable:!0}),a.prototype.defineFields=function(){e.prototype.defineFields.call(this);var i=this.xAxis,o=this.yAxis;if(i&&o){if(this.baseAxis==i){var c=capitalize(o.axisFieldName);this._yLowField="low"+c+"Y",this._yHighField="high"+c+"Y"}if(this.baseAxis==o){var d=capitalize(i.axisFieldName);this._xLowField="low"+d+"X",this._xHighField="high"+d+"X"}this.addValueField(i,this._xValueFields,this._xLowField),this.addValueField(i,this._xValueFields,this._xHighField),this.addValueField(o,this._yValueFields,this._yLowField),this.addValueField(o,this._yValueFields,this._yHighField)}},a.prototype.createLegendMarker=function(i){var o=i.pixelWidth,c=i.pixelHeight;i.removeChildren();var d=i.createChild(Candlestick);d.shouldClone=!1,d.copyFrom(this.columns.template);var g,b,j=d.lowLine,$=d.highLine;this.baseAxis==this.yAxis?(g=o/3,b=c,j.y=c/2,$.y=c/2,j.x2=o/3,$.x2=o/3,$.x=o/3*2,d.column.x=o/3):(g=o,b=c/3,j.x=o/2,$.x=o/2,j.y2=c/3,$.y2=c/3,$.y=c/3*2,d.column.y=c/3),d.width=g,d.height=b,copyProperties$1(this,i,visualProperties),copyProperties$1(this.columns.template,d,visualProperties),d.stroke=this.riseFromOpenState.properties.stroke,d.fill=d.stroke;var rt=i.dataItem;rt.color=d.fill,rt.colorOrig=d.fill},a.prototype.createColumnTemplate=function(){return new Candlestick},a}(ColumnSeries);registry.registeredClasses.CandlestickSeries=CandlestickSeries;registry.registeredClasses.CandlestickSeriesDataItem=CandlestickSeriesDataItem;var OHLC=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="OHLC",i.layout="none",i}return a.prototype.createAssets=function(){this.openLine=this.createChild(Line),this.openLine.shouldClone=!1,this.highLowLine=this.createChild(Line),this.highLowLine.shouldClone=!1,this.closeLine=this.createChild(Line),this.closeLine.shouldClone=!1},a.prototype.copyFrom=function(i){e.prototype.copyFrom.call(this,i),this.openLine&&this.openLine.copyFrom(i.openLine),this.highLowLine&&this.highLowLine.copyFrom(i.highLowLine),this.closeLine&&this.closeLine.copyFrom(i.closeLine)},a}(Candlestick);registry.registeredClasses.OHLC=OHLC;var OHLCSeriesDataItem=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="OHLCSeriesDataItem",i.applyTheme(),i}return a}(CandlestickSeriesDataItem),OHLCSeries=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="OHLCSeries",i.applyTheme(),i}return a.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("OHLC Series"))},a.prototype.createDataItem=function(){return new OHLCSeriesDataItem},a.prototype.validateCandlestick=function(i){var o=i.column;if(o){var c=o.openLine,d=o.highLowLine,g=o.closeLine;if(this.baseAxis==this.xAxis){var b=o.pixelWidth/2;d.x=b,i.getWorkingValue(this.yOpenField),i.getWorkingValue(this.yField);var j=this.yAxis.getY(i,this.yOpenField),$=this.yAxis.getY(i,this.yField),rt=this.yAxis.getY(i,this.yLowField),_e=this.yAxis.getY(i,this.yHighField),st=o.pixelY;c.y1=j-st,c.y2=j-st,c.x1=0,c.x2=b,g.y1=$-st,g.y2=$-st,g.x1=b,g.x2=2*b,d.y1=_e-st,d.y2=rt-st}if(this.baseAxis==this.yAxis){var ut=o.pixelHeight/2;d.y=ut,i.getWorkingValue(this.xOpenField),i.getWorkingValue(this.xField);var gt=this.xAxis.getX(i,this.xOpenField),yt=this.xAxis.getX(i,this.xField),Pt=this.xAxis.getX(i,this.xLowField),wt=this.xAxis.getX(i,this.xHighField),Ct=o.pixelX;c.x1=gt-Ct,c.x2=gt-Ct,c.y1=ut,c.y2=2*ut,g.x1=yt-Ct,g.x2=yt-Ct,g.y1=0,g.y2=ut,d.x1=wt-Ct,d.x2=Pt-Ct}each(this.axisRanges.iterator(),function(At){var Tt=i.rangesColumns.getKey(At.uid);if(Tt){var kt=Tt.openLine;kt.x=c.x,kt.y=c.y,kt.x1=c.x1,kt.x2=c.x2,kt.y1=c.y1,kt.y2=c.y2;var It=Tt.closeLine;It.x=g.x,It.y=g.y,It.x1=g.x1,It.x2=g.x2,It.y1=g.y1,It.y2=g.y2;var Lt=Tt.highLowLine;Lt.x=d.x,Lt.y=d.y,Lt.x1=d.x1,Lt.x2=d.x2,Lt.y1=d.y1,Lt.y2=d.y2}})}},a.prototype.createLegendMarker=function(i){var o=i.pixelWidth,c=i.pixelHeight;i.removeChildren();var d=i.createChild(OHLC);d.shouldClone=!1,d.copyFrom(this.columns.template);var g,b,j=d.openLine,$=d.closeLine,rt=d.highLowLine;this.baseAxis==this.yAxis?(g=o/3,b=c,rt.y=c/2,rt.x2=o,j.x=o/3*2,j.y2=c/2,$.x=o/3,$.y2=c,$.y1=c/2):(g=o,b=c/3,rt.x=o/2,rt.y2=c,j.y=c/3*2,j.x2=o/2,$.y=c/3,$.x2=o,$.x1=o/2),d.width=g,d.height=b,copyProperties$1(this,i,visualProperties),copyProperties$1(this.columns.template,d,visualProperties),d.stroke=this.riseFromOpenState.properties.stroke;var _e=i.dataItem;_e.color=d.stroke,_e.colorOrig=d.stroke},a.prototype.createColumnTemplate=function(){return new OHLC},a}(CandlestickSeries);registry.registeredClasses.OHLCSeries=OHLCSeries;registry.registeredClasses.OHLCSeriesDataItem=OHLCSeriesDataItem;var StepLineSeriesSegment=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="StepLineSeriesSegment",i}return a.prototype.drawSegment=function(i,o,c,d,g,b){if(i.length>0&&o.length>0)if(g){var j=moveTo(i[0]);if(i.length>0)for(var $=1;$<i.length;$++){var rt=i[$];$/2==Math.round($/2)?j+=moveTo(rt):j+=lineTo(rt)}this.strokeSprite.path=j,(this.fillOpacity>0||this.fillSprite.fillOpacity>0)&&(j=moveTo(i[0])+polyline(i),j+=lineTo(o[0])+polyline(o),j+=lineTo(i[0]),j+=closePath(),this.fillSprite.path=j)}else{var j=moveTo(i[0])+polyline(i);this.strokeSprite.path=j,(this.fillOpacity>0||this.fillSprite.fillOpacity>0)&&(j+=lineTo(o[0])+polyline(o),j+=lineTo(i[0]),j+=closePath(),this.fillSprite.path=j)}else this.strokeSprite.path="",this.fillSprite.path=""},a}(LineSeriesSegment);registry.registeredClasses.StepLineSeriesSegment=StepLineSeriesSegment;var StepLineSeriesDataItem=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="StepLineSeriesDataItem",i.applyTheme(),i}return a}(LineSeriesDataItem),StepLineSeries=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="StepLineSeries",i.applyTheme(),i.startLocation=0,i.endLocation=1,i}return a.prototype.createDataItem=function(){return new StepLineSeriesDataItem},a.prototype.addPoints=function(i,o,c,d,g){var b,j,$,rt;this.baseAxis==this.xAxis&&(b=this.startLocation,j=this.endLocation,$=this.getAdjustedXLocation(o,this.yOpenField),rt=this.getAdjustedXLocation(o,this.yField)),this.baseAxis==this.yAxis&&($=this.startLocation,rt=this.endLocation,b=this.getAdjustedXLocation(o,this.xOpenField),j=this.getAdjustedXLocation(o,this.xField));var _e=this.xAxis.getX(o,c,b),st=this.yAxis.getY(o,d,$),ut=this.xAxis.getX(o,c,j),gt=this.yAxis.getY(o,d,rt);if(_e=fitToRange(_e,-1e5,1e5),st=fitToRange(st,-1e5,1e5),ut=fitToRange(ut,-1e5,1e5),gt=fitToRange(gt,-1e5,1e5),!this.noRisers&&i.length>1){var yt=i[i.length-1];this.baseAxis==this.xAxis&&(g?i.push({x:yt.x,y:gt}):i.push({x:_e,y:yt.y})),this.baseAxis==this.yAxis&&(g?i.push({x:ut,y:yt.y}):i.push({x:yt.x,y:st}))}var Pt={x:_e,y:st},wt={x:ut,y:gt};g?i.push(wt,Pt):i.push(Pt,wt)},a.prototype.drawSegment=function(i,o,c){var d=!1;this.yAxis==this.baseAxis&&(d=!0),i.drawSegment(o,c,this.tensionX,this.tensionY,this.noRisers,d)},a.prototype.createSegment=function(){return new StepLineSeriesSegment},Object.defineProperty(a.prototype,"noRisers",{get:function(){return this.getPropertyValue("noRisers")},set:function(i){this.setPropertyValue("noRisers",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"startLocation",{get:function(){return this.getPropertyValue("startLocation")},set:function(i){this.setPropertyValue("startLocation",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"endLocation",{get:function(){return this.getPropertyValue("endLocation")},set:function(i){this.setPropertyValue("endLocation",i,!0)},enumerable:!0,configurable:!0}),a}(LineSeries);registry.registeredClasses.StepLineSeries=StepLineSeries;registry.registeredClasses.StepLineSeriesDataItem=StepLineSeriesDataItem;var RadarColumn=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="RadarColumn",i}return a.prototype.createAssets=function(){this.radarColumn=this.createChild(Slice),this.radarColumn.shouldClone=!1,this.radarColumn.strokeOpacity=void 0,this.column=this.radarColumn},a.prototype.copyFrom=function(i){e.prototype.copyFrom.call(this,i),this.radarColumn&&this.radarColumn.copyFrom(i.radarColumn)},a.prototype.getTooltipX=function(){var i=this.getPropertyValue("tooltipX");return isNumber$1(i)?i:this.radarColumn.getTooltipX()},a.prototype.getTooltipY=function(){var i=this.getPropertyValue("tooltipX");return isNumber$1(i)?i:this.radarColumn.getTooltipY()},a}(Column);registry.registeredClasses.RadarColumn=RadarColumn;var RadarColumnSeriesDataItem=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="ColumnSeriesDataItem",i.applyTheme(),i}return a}(ColumnSeriesDataItem),RadarColumnSeries=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="RadarColumnSeries",i.applyTheme(),i}return a.prototype.createColumnTemplate=function(){return new RadarColumn},a.prototype.validate=function(){this.chart.invalid&&this.chart.validate(),e.prototype.validate.call(this)},a.prototype.disableUnusedColumns=function(i){i&&(i.column&&(i.column.__disabled=!0),each(this.axisRanges.iterator(),function(o){var c=i.rangesColumns.getKey(o.uid);c&&(c.__disabled=!0)}))},a.prototype.validateDataElementReal=function(i){var o=this,c=this.chart.startAngle,d=this.chart.endAngle,g=this.yField,b=this.yOpenField,j=this.xField,$=this.xOpenField,rt,_e,st,ut,gt=this.getStartLocation(i),yt=this.getEndLocation(i),Pt=(d-c)/(this.dataItems.length*(this.end-this.start)),wt=i.column;wt||(wt=this.columns.create(),i.column=wt,copyProperties$1(this,wt,visualProperties),copyProperties$1(this.columns.template,wt,visualProperties),i.addSprite(wt),wt.paper=this.paper,this.setColumnStates(wt));var Ct=wt.width,At=100;Ct instanceof Percent&&(At=Ct.percent);var Tt=round$1((yt-gt)*(1-At/100)/2,5);if(gt+=Tt,yt-=Tt,this.xAxis instanceof CategoryAxis&&this.yAxis instanceof CategoryAxis)st=getDistance({x:this.yAxis.getX(i,g,0,"valueY"),y:this.yAxis.getY(i,g,0,"valueY")}),ut=getDistance({x:this.yAxis.getX(i,b,1,"valueY"),y:this.yAxis.getY(i,b,1,"valueY")}),rt=this.xAxis.getAngle(i,$,0,"valueX"),_e=this.xAxis.getAngle(i,j,1,"valueX"),c=c+gt*Pt,d=d-(1-yt)*Pt;else if(this.baseAxis==this.xAxis)st=getDistance({x:this.yAxis.getX(i,g,i.locations[g],"valueY"),y:this.yAxis.getY(i,g,i.locations[g],"valueY")}),ut=getDistance({x:this.yAxis.getX(i,b,i.locations[b],"valueY"),y:this.yAxis.getY(i,b,i.locations[b],"valueY")}),rt=this.xAxis.getAngle(i,$,gt,"valueX"),_e=this.xAxis.getAngle(i,j,yt,"valueX"),c=c+gt*Pt,d=d-(1-yt)*Pt;else{if(st=getDistance({x:this.yAxis.getX(i,g,gt,"valueY"),y:this.yAxis.getY(i,g,gt,"valueY")}),ut=getDistance({x:this.yAxis.getX(i,b,yt,"valueY"),y:this.yAxis.getY(i,b,yt,"valueY")}),isNumber$1(Ct)){var kt=Math.abs(st-ut);if(kt>Ct){var It=(kt-Ct)/2;st+=It,ut-=It}}rt=this.xAxis.getAngle(i,j,i.locations[j],"valueX"),_e=this.xAxis.getAngle(i,$,i.locations[$],"valueX")}if(_e<rt){var Lt=_e;_e=rt,rt=Lt}rt=fitToRange(rt,c,d),_e=fitToRange(_e,c,d);var Ft=wt.radarColumn;Ft.startAngle=rt;var Nt=_e-rt;Nt>0?(Ft.arc=Nt,Ft.radius=st,Ft.innerRadius=ut,wt.__disabled=!1,wt.parent=this.columnsContainer,each(this.axisRanges.iterator(),function(Ht){var Gr=i.rangesColumns.getKey(Ht.uid);Gr||(Gr=o.columns.create(),forceCopyProperties(o.columns.template,Gr,visualProperties),copyProperties$1(Ht.contents,Gr,visualProperties),Gr.dataItem&&remove(Gr.dataItem.sprites,Gr),i.addSprite(Gr),Gr.paper=o.paper,o.setColumnStates(Gr),i.rangesColumns.setKey(Ht.uid,Gr));var hs=Gr.radarColumn;hs.startAngle=rt,hs.arc=Nt,hs.radius=st,hs.innerRadius=ut,hs.invalid&&(hs.paper=o.paper,hs.validate()),Gr.__disabled=!1,Gr.parent=Ht.contents})):this.disableUnusedColumns(i)},a.prototype.getPoint=function(i,o,c,d,g,b,j){b||(b="valueX"),j||(j="valueY");var $=this.yAxis.getX(i,c,g,j),rt=this.yAxis.getY(i,c,g,j),_e=getDistance({x:$,y:rt});_e==0&&(_e=1e-5);var st=this.xAxis.getAngle(i,o,d,b);return{x:_e*cos(st),y:_e*sin(st)}},a.prototype.getMaskPath=function(){var i=this.yAxis.renderer;return arc(i.startAngle,i.endAngle-i.startAngle,i.pixelRadius,i.pixelInnerRadius)},a.prototype.positionBulletReal=function(i,o,c){var d=this.xAxis,g=this.yAxis;(o<d.start||o>d.end||c<g.start||c>g.end)&&(i.visible=!1),i.moveTo(this.xAxis.renderer.positionToPoint(o,c))},a.prototype.setXAxis=function(i){e.prototype.setXAxis.call(this,i),this.updateRendererRefs()},a.prototype.setYAxis=function(i){e.prototype.setYAxis.call(this,i),this.updateRendererRefs()},a.prototype.updateRendererRefs=function(){var i=this.xAxis.renderer,o=this.yAxis.renderer;i.axisRendererY=o},a}(ColumnSeries);registry.registeredClasses.RadarColumnSeries=RadarColumnSeries;registry.registeredClasses.RadarColumnSeriesDataItem=RadarColumnSeriesDataItem;var FunnelSlice=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.slice=i.createChild(Sprite),i.slice.shouldClone=!1,i.slice.setElement(i.paper.add("path")),i.slice.isMeasured=!1,i.orientation="vertical",i.bottomWidth=percent(100),i.topWidth=percent(100),i.isMeasured=!1,i.width=10,i.height=10,i.expandDistance=0,i.className="FunnelSlice",i.applyTheme(),i}return a.prototype.draw=function(){e.prototype.draw.call(this);var i=this.pixelPaddingTop,o=this.pixelPaddingBottom,c=this.pixelPaddingRight,d=this.pixelPaddingLeft,g=this.pixelWidth-c-d,b=this.pixelHeight-i-o,j=this.expandDistance,$="";if(this.orientation=="vertical"){var rt=relativeToValue(this.topWidth,g),_e=relativeToValue(this.bottomWidth,g),st={x:(g-rt)/2+d,y:i},ut={x:(g+rt)/2+d,y:i},gt={x:(g+_e)/2+d,y:i+b},yt={x:(g-_e)/2+d,y:i+b},Pt={x:ut.x+(gt.x-ut.x)/2+j*b,y:ut.y+.5*b},wt={x:st.x+(yt.x-st.x)/2-j*b,y:st.y+.5*b},Ct=lineTo(gt),At=lineTo(st);j!=0&&(Ct=quadraticCurveTo(gt,Pt),At=quadraticCurveTo(st,wt)),$=moveTo(st)+lineTo(ut)+Ct+lineTo(yt)+At,this.tickPoint={x:ut.x+(gt.x-ut.x)/2,y:ut.y+(gt.y-ut.y)/2}}else{var rt=relativeToValue(this.topWidth,b),_e=relativeToValue(this.bottomWidth,b),Tt={x:d,y:(b-rt)/2+i},kt={x:d,y:(b+rt)/2+i},It={x:d+g,y:(b-_e)/2+i},Lt={x:d+g,y:(b+_e)/2+i},Pt={y:Tt.y+(It.y-Tt.y)/2-j*g,x:Tt.x+.5*g},wt={y:kt.y+(Lt.y-kt.y)/2+j*g,x:kt.x+.5*g},Ct=lineTo(It),At=lineTo(kt);j!=0&&(Ct=quadraticCurveTo(It,Pt),At=quadraticCurveTo(kt,wt)),$=moveTo(kt)+lineTo(Tt)+Ct+lineTo(Lt)+At,this.tickPoint={y:kt.y+(Lt.y-kt.y)/2,x:kt.x+(Lt.x-kt.x)/2}}this.slice.path=$,this.invalidateLayout()},a.prototype.getPoint=function(i,o){var c=this.pixelPaddingTop,d=this.pixelPaddingBottom,g=this.pixelPaddingRight,b=this.pixelPaddingLeft,j=this.pixelWidth-g-b,$=this.pixelHeight-c-d;if(this.orientation=="vertical"){var rt=relativeToValue(this.topWidth,j),_e=relativeToValue(this.bottomWidth,j),st={x:(j-rt)/2+b,y:c},ut={x:(j+rt)/2+b,y:c},gt={x:(j+_e)/2+b,y:c+$},yt={x:(j-_e)/2+b,y:c+$},Pt=st.x+(yt.x-st.x)*o,wt=ut.x+(gt.x-ut.x)*o;return{x:Pt+(wt-Pt)*i,y:ut.y+(gt.y-ut.y)*o}}else{var rt=relativeToValue(this.topWidth,$),_e=relativeToValue(this.bottomWidth,$),Ct={x:b,y:($-rt)/2+c},At={x:b,y:($+rt)/2+c},Tt={x:b+j,y:($-_e)/2+c},kt={x:b+j,y:($+_e)/2+c},It=Ct.y+(Tt.y-Ct.y)*i,Lt=At.y+(kt.y-At.y)*i;return{y:It+(Lt-It)*o,x:Ct.x+(Tt.x-Ct.x)*i}}},Object.defineProperty(a.prototype,"bottomWidth",{get:function(){return this.getPropertyValue("bottomWidth")},set:function(i){this.setPercentProperty("bottomWidth",i,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"topWidth",{get:function(){return this.getPropertyValue("topWidth")},set:function(i){this.setPercentProperty("topWidth",i,!0,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(i){this.setPropertyValue("orientation",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"expandDistance",{get:function(){return this.getPropertyValue("expandDistance")},set:function(i){this.setPropertyValue("expandDistance",i,!0)},enumerable:!0,configurable:!0}),a.prototype.copyFrom=function(i){e.prototype.copyFrom.call(this,i),this.slice&&this.slice.copyFrom(i.slice)},a}(Container);registry.registeredClasses.FunnelSlice=FunnelSlice;var FunnelTick=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i._label=new MutableValueDisposer,i._slice=new MutableValueDisposer,i.className="FunnelTick",i.element=i.paper.add("path"),i._disposers.push(i._label),i._disposers.push(i._slice),i.setPropertyValue("locationX",0),i.setPropertyValue("locationY",0),i.applyTheme(),i}return a.prototype.draw=function(){e.prototype.draw.call(this);var i=this.slice,o=i.getPoint(this.locationX,this.locationY);if(o){var c=this.label,d=i.dataItem.component,g=void 0,b=void 0,j=void 0;if(d.orientation=="vertical"){var $=c.pixelX,rt=c.pixelY;d.labelsOpposite||($+=c.maxRight),g=spritePointToSprite(o,i,this.parent),j=spritePointToSprite({x:$,y:rt},c.parent,this.parent),b={x:c.parent.pixelX-this.length,y:j.y},d.labelsOpposite||(b.x=c.parent.measuredWidth+this.length)}else{var $=c.pixelX,rt=c.pixelY;d.labelsOpposite||(rt+=c.maxBottom),g=spritePointToSprite(o,i,this.parent),j=spritePointToSprite({x:$,y:rt},c.parent,this.parent),b={x:j.x,y:c.parent.pixelY-this.length},d.labelsOpposite||(b.y=c.parent.measuredHeight+this.length)}this.path=moveTo(g)+lineTo(b)+lineTo(j)}},Object.defineProperty(a.prototype,"slice",{get:function(){return this._slice.get()},set:function(i){this._slice.set(i,new MultiDisposer([i.events.on("transformed",this.invalidate,this,!1),i.events.on("validated",this.invalidate,this,!1)]))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"label",{get:function(){return this._label.get()},set:function(i){this._label.set(i,i.events.on("transformed",this.invalidate,this,!1))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"locationX",{get:function(){return this.getPropertyValue("locationX")},set:function(i){this.setPropertyValue("locationX",i,!1,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"locationY",{get:function(){return this.getPropertyValue("locationY")},set:function(i){this.setPropertyValue("locationY",i,!1,!0)},enumerable:!0,configurable:!0}),a}(Tick);registry.registeredClasses.FunnelTick=FunnelTick;var FunnelSeriesDataItem=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="FunnelSeriesDataItem",i.events.on("visibilitychanged",function(){i.component&&i.component.invalidateDataItems()},i,!1),i.applyTheme(),i}return Object.defineProperty(a.prototype,"sliceLink",{get:function(){var i=this;if(!this._sliceLink){var o=this.component.sliceLinks.create();this._sliceLink=o,this._disposers.push(o),o.parent=this.component.slicesContainer,this._disposers.push(new Disposer(function(){i.component&&i.component.sliceLinks.removeValue(o)})),this.addSprite(o),o.visible=this.visible}return this._sliceLink},enumerable:!0,configurable:!0}),a}(PercentSeriesDataItem),FunnelSeries=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i._nextY=0,i.className="FunnelSeries",i.orientation="vertical",i.width=percent(100),i.height=percent(100),i.slicesContainer.width=percent(100),i.slicesContainer.height=percent(100),i._disposers.push(i.slicesContainer.events.on("maxsizechanged",i.invalidateDataItems,i,!1)),i.labelsOpposite=!0,i.labelsContainer.layout="absolute",i.bottomRatio=0,i.applyTheme(),i}return a.prototype.createSlice=function(){return new FunnelSlice},a.prototype.createTick=function(){return new FunnelTick},a.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("Funnel Series"))},a.prototype.createDataItem=function(){return new FunnelSeriesDataItem},a.prototype.initSlice=function(i){i.isMeasured=!1,i.defaultState.properties.scale=1,i.observe("scale",this.handleSliceScale,this),i.observe(["dx","dy","x","y"],this.handleSliceMove,this),i.tooltipText="{category}: {value.percent.formatNumber('#.#p')} ({value.value})";var o=i.states.create("hover");o.properties.expandDistance=.2},a.prototype.initLabel=function(i){e.prototype.initLabel.call(this,i),i.verticalCenter="middle",i.horizontalCenter="middle",i.isMeasured=!0,i.padding(5,5,5,5)},a.prototype.validate=function(){e.prototype.validate.call(this),this._nextY=0},a.prototype.validateDataElements=function(){var i=this,o=this.slicesContainer,c=this.labelsContainer,d=this.labels.template;this.alignLabels?(d.interactionsEnabled=!0,o.isMeasured=!0,c.isMeasured=!0):(d.interactionsEnabled=!1,o.isMeasured=!1,c.isMeasured=!1);var g=0,b=0;this.dataItems.each(function(j){hasValue(j.value)&&(b++,j.value>0?g+=Math.abs(j.getWorkingValue("value")/j.value):i.ignoreZeroValues||!j.visible||j.__disabled||j.isHiding?b--:g+=1)}),this._total=1/b*g,this._count=b,e.prototype.validateDataElements.call(this),this.arrangeLabels()},a.prototype.getNextValue=function(i){var o=i.index,c=i.getWorkingValue("value");if(o<this.dataItems.length-1){var d=this.dataItems.getIndex(o+1);if(c=d.getWorkingValue("value"),!d.visible||d.isHiding||d.__disabled||d.value==0&&this.ignoreZeroValues)return this.getNextValue(d)}return c},a.prototype.formDataElement=function(){},a.prototype.validateDataElement=function(i){var o=this,c=i.slice;c.orientation=this.orientation;var d=i.sliceLink;d.orientation=this.orientation;var g=i.tick,b=i.label;g.slice=c,g.label=b,hasValue(i.value)?(this.decorateSlice(i),each$2(i.sprites,function(j){i.value==0&&o.ignoreZeroValues?j.__disabled=!0:j.__disabled=!1})):each$2(i.sprites,function(j){j.__disabled=!0}),i.index==this.dataItems.length-1&&(d.disabled=!0),e.prototype.validateDataElement.call(this,i),d.fill=c.fill},a.prototype.decorateSlice=function(i){var o=i.slice,c=i.sliceLink,d=i.label,g=i.tick,b=this.slicesContainer.innerWidth,j=this.slicesContainer.innerHeight,$=this.getNextValue(i),rt=Math.abs(i.getWorkingValue("value")),_e=this.bottomRatio,st=1;if(i.value!=0?st=rt/Math.abs(i.value):(i.__disabled||i.isHiding||!i.visible)&&(st=1e-6),this.ignoreZeroValues&&i.value==0){i.__disabled=!0;return}else i.__disabled=!1;if(this._nextY==1/0&&(this._nextY=0),this.orientation=="vertical"){var ut=c.pixelHeight*st;j=j+ut,o.topWidth=rt/this.dataItem.values.value.high*b,o.bottomWidth=(rt-(rt-$)*_e)/this.dataItem.values.value.high*b,c.topWidth=o.bottomWidth,c.bottomWidth=(rt-(rt-$))/this.dataItem.values.value.high*b,o.y=this._nextY,o.height=Math.min(1e5,max$1(0,j/this._count*st/this._total-ut)),o.x=b/2,this.alignLabels?d.x=void 0:d.x=o.x,d.y=o.pixelY+o.pixelHeight*g.locationY,this._nextY+=o.pixelHeight+ut,c.y=this._nextY-ut,c.x=o.x}else{var gt=c.pixelWidth*st;b=b+gt,o.topWidth=rt/this.dataItem.values.value.high*j,o.bottomWidth=(rt-(rt-$)*_e)/this.dataItem.values.value.high*j,c.topWidth=o.bottomWidth,c.bottomWidth=(rt-(rt-$))/this.dataItem.values.value.high*j,o.x=this._nextY,o.width=Math.min(1e5,b/this._count*st*1/this._total-gt),o.y=j/2,this.alignLabels?d.y=this.labelsContainer.measuredHeight:d.y=o.y,d.x=o.pixelX+o.pixelWidth*g.locationX,this._nextY+=o.pixelWidth+gt,c.x=this._nextY-gt,c.y=o.y}},a.prototype.getLastLabel=function(i){if(i>0){var o=this.labels.getIndex(i);return o.__disabled||!o.visible?this.getLastLabel(i-1):o}},a.prototype.arrangeLabels=function(){if(this.alignLabels){var i=this.labels.length;if(i>1){var o=this.getLastLabel(i-1);if(o){var c=o.pixelY,d=o.pixelX;if(i>1){for(var g=i-2;g>=0;g--){var b=this.labels.getIndex(g);b.visible&&!b.__disabled&&(b.invalid&&b.validate(),this.orientation=="vertical"?b.pixelY+b.measuredHeight>c&&(b.y=Math.min(1e6,c-b.measuredHeight)):b.pixelX+b.measuredWidth>d&&(b.x=Math.min(1e6,d-b.measuredWidth)),c=b.pixelY,d=b.pixelX)}c=0,d=0;for(var g=0;g<i;g++){var b=this.labels.getIndex(g);b.visible&&!b.__disabled&&(b.invalid&&b.validate(),this.orientation=="vertical"?b.pixelY<c&&(b.y=Math.min(1e6,c)):b.pixelX<d&&(b.x=Math.min(1e6,d)),c+=b.measuredHeight,d+=b.measuredWidth)}}}}}},a.prototype.positionBullet=function(i){e.prototype.positionBullet.call(this,i);var o=i.dataItem,c=o.slice,d=i.locationX;isNumber$1(d)||(d=.5);var g=i.locationY;isNumber$1(g)||(g=1),i.x=c.pixelX+c.measuredWidth*d,i.y=c.pixelY+c.measuredHeight*g},Object.defineProperty(a.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(i){this.setPropertyValue("orientation",i)&&(this.labelsOpposite=this.labelsOpposite,this.invalidate(),i=="vertical"?(this.ticks.template.locationX=1,this.ticks.template.locationY=.5,this.labels.template.rotation=0,this.layout="horizontal"):(this.ticks.template.locationX=.5,this.ticks.template.locationY=1,this.labels.template.rotation=-90,this.layout="vertical"))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"bottomRatio",{get:function(){return this.getPropertyValue("bottomRatio")},set:function(i){this.setPropertyValue("bottomRatio",i)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"sliceLinks",{get:function(){if(!this._sliceLinks){var i=new FunnelSlice;i.applyOnClones=!0,i.fillOpacity=.5,i.expandDistance=-.3,i.hiddenState.properties.opacity=0,this._disposers.push(i),this._sliceLinks=new ListTemplate(i),this._disposers.push(new ListDisposer(this._sliceLinks))}return this._sliceLinks},enumerable:!0,configurable:!0}),a.prototype.show=function(i){var o=this,c=this.startIndex,d=this.endIndex,g=this.defaultState.transitionDuration;isNumber$1(i)&&(g=i),options.animationsEnabled||(g=0);var b=0;each(indexed(this.dataItems.iterator()),function($){var rt=$[0],_e=$[1];o.sequencedInterpolation&&(b=o.sequencedInterpolationDelay*rt+g*(rt-c)/(d-c)),_e.show(g,b,["value"])});var j=e.prototype.show.call(this,i);return j},a.prototype.hide=function(i){var o=this,c=["value"],d=0,g=this.startIndex,b=this.endIndex,j=0,$=this.hiddenState.transitionDuration;isNumber$1(i)&&($=i),options.animationsEnabled||($=0),each(indexed(this.dataItems.iterator()),function(_e){var st=_e[0],ut=_e[1];o.sequencedInterpolation&&(j=o.sequencedInterpolationDelay*st+$*(st-g)/(b-g)),ut.hide($,j,d,c)});var rt=e.prototype.hide.call(this,i);return rt&&!rt.isFinished()&&rt.delay(j),rt},a.prototype.setAlignLabels=function(i){e.prototype.setAlignLabels.call(this,i),this.ticks.template.disabled=!i;var o=this.labelsContainer;o&&(i?(o.height=void 0,o.width=void 0,o.margin(10,10,10,10)):(o.width=percent(100),o.height=percent(100))),this.labelsOpposite=this.labelsOpposite},Object.defineProperty(a.prototype,"labelsOpposite",{get:function(){return this.getPropertyValue("labelsOpposite")},set:function(i){this.setPropertyValue("labelsOpposite",i);var o=this.labels.template,c="none",d="none";this.alignLabels?i?(this.labelsContainer.toFront(),this.orientation=="vertical"?(this.ticks.template.locationX=1,o.horizontalCenter="left",c="right"):(this.ticks.template.locationY=1,o.horizontalCenter="right",d="bottom")):(this.labelsContainer.toBack(),this.orientation=="vertical"?(this.ticks.template.locationX=0,c="left"):(d="top",this.ticks.template.locationY=0)):this.orientation=="vertical"?c="center":d="middle",o.align=c,o.valign=d,this.validateLayout(),this.ticks.each(function(g){g.invalidate()}),this.invalidateDataItems()},enumerable:!0,configurable:!0}),a}(PercentSeries);registry.registeredClasses.FunnelSeries=FunnelSeries;registry.registeredClasses.FunnelSeriesDataItem=FunnelSeriesDataItem;var PyramidSeriesDataItem=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="PyramidSeriesDataItem",i.applyTheme(),i}return a}(FunnelSeriesDataItem),PyramidSeries=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="PyramidSeries",i.topWidth=percent(0),i.bottomWidth=percent(100),i.pyramidHeight=percent(100),i.valueIs="area",i.sliceLinks.template.width=0,i.sliceLinks.template.height=0,i.applyTheme(),i}return a.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("Pyramid Series"))},a.prototype.createDataItem=function(){return new PyramidSeriesDataItem},a.prototype.validate=function(){e.prototype.validate.call(this),this._nextWidth=void 0},a.prototype.getNextValue=function(i){var o=i.index,c=i.getWorkingValue("value");if(o<this.dataItems.length-1){var d=this.dataItems.getIndex(o+1);c=d.getWorkingValue("value")}return c==0&&(c=1e-6),c},a.prototype.validateDataElements=function(){var i=this,o=this.slicesContainer.innerWidth,c=this.slicesContainer.innerHeight;if(this.dataItems.each(function(b){if(b.value>0){var j=b.getWorkingValue("value")/b.value,$=b.sliceLink;i.orientation=="vertical"?c-=$.pixelHeight*j:o-=$.pixelWidth*j}}),this._pyramidHeight=relativeToValue(this.pyramidHeight,c),this._pyramidWidth=relativeToValue(this.pyramidHeight,o),this.orientation=="vertical"){var d=(c-this._pyramidHeight)/2;this.slicesContainer.y=d,this.labelsContainer.y=d,this.ticksContainer.y=d}else{var g=(o-this._pyramidWidth)/2;this.slicesContainer.x=g,this.labelsContainer.x=g,this.ticksContainer.x=g}e.prototype.validateDataElements.call(this)},a.prototype.decorateSlice=function(i){var o=this.dataItem.values.value.absoluteSum;if(o!=0){var c=i.slice,d=i.sliceLink,g=i.label,b=i.tick;this.getNextValue(i);var j=Math.abs(i.getWorkingValue("value")),$=this._pyramidWidth,rt=this._pyramidHeight,_e=this.slicesContainer.innerWidth,st=this.slicesContainer.innerHeight,ut=d.pixelWidth,gt=d.pixelHeight;if((i.value==0||i.value==null)&&this.ignoreZeroValues?i.__disabled=!0:i.__disabled=!1,this.orientation=="vertical"){var yt=relativeToValue(this.topWidth,_e);isNumber$1(this._nextWidth)||(this._nextWidth=yt);var Pt=relativeToValue(this.bottomWidth,_e),wt=this._nextWidth,Ct=Math.atan2(rt,yt-Pt),At=Math.tan(Math.PI/2-Ct);At==0&&(At=1e-8);var Tt=void 0,kt=void 0;if(this.valueIs=="area"){var It=(yt+Pt)/2*rt,Lt=It*j/o,Ft=Math.abs(wt*wt-2*Lt*At);Tt=(wt-Math.sqrt(Ft))/At,Tt>0?kt=(2*Lt-Tt*wt)/Tt:kt=wt}else Tt=rt*j/o,kt=wt-Tt*At;c.height=Tt,c.width=_e,c.bottomWidth=kt,c.topWidth=wt,d.topWidth=c.bottomWidth,d.bottomWidth=c.bottomWidth,c.y=this._nextY,this.alignLabels?g.x=0:g.x=_e/2,g.y=c.pixelY+c.pixelHeight*b.locationY+c.dy,this._nextY+=c.pixelHeight+gt*j/Math.max(Math.abs(i.value),1e-8),d.y=this._nextY-gt,d.x=_e/2}else{var yt=relativeToValue(this.topWidth,st);isNumber$1(this._nextWidth)||(this._nextWidth=yt);var Pt=relativeToValue(this.bottomWidth,st),wt=this._nextWidth,Ct=Math.atan2($,yt-Pt),At=Math.tan(Math.PI/2-Ct);At==0&&(At=1e-8);var Nt=void 0,kt=void 0;if(this.valueIs=="area"){var It=(yt+Pt)/2*$,Lt=It*j/o;Nt=(wt-Math.sqrt(wt*wt-2*Lt*At))/At,kt=(2*Lt-Nt*wt)/Nt}else Nt=$*j/o,kt=wt-Nt*At;c.width=Nt,c.height=st,c.bottomWidth=kt,c.topWidth=wt,d.topWidth=c.bottomWidth,d.bottomWidth=c.bottomWidth,c.x=this._nextY,this.alignLabels?g.y=this.labelsContainer.measuredHeight:g.y=st/2,g.x=c.pixelX+c.pixelWidth*b.locationX+c.dx,this._nextY+=c.pixelWidth+ut*j/Math.max(Math.abs(i.value),1e-8),d.x=this._nextY-ut,d.y=st/2}this._nextWidth=c.bottomWidth}},Object.defineProperty(a.prototype,"topWidth",{get:function(){return this.getPropertyValue("topWidth")},set:function(i){this.setPercentProperty("topWidth",i,!1,!1,10,!1)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"pyramidHeight",{get:function(){return this.getPropertyValue("pyramidHeight")},set:function(i){this.setPercentProperty("pyramidHeight",i,!1,!1,10,!1)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"bottomWidth",{get:function(){return this.getPropertyValue("bottomWidth")},set:function(i){this.setPercentProperty("bottomWidth",i,!1,!1,10,!1)&&this.invalidate()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"valueIs",{get:function(){return this.getPropertyValue("valueIs")},set:function(i){this.setPropertyValue("valueIs",i)&&this.invalidate()},enumerable:!0,configurable:!0}),a}(FunnelSeries);registry.registeredClasses.PyramidSeries=PyramidSeries;registry.registeredClasses.PyramidSeriesDataItem=PyramidSeriesDataItem;var PictorialStackedSeriesDataItem=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="PictorialStackedSeriesDataItem",i.applyTheme(),i}return a}(PyramidSeriesDataItem),PictorialStackedSeries=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="PictorialStackedSeries",i.topWidth=percent(100),i.bottomWidth=percent(100),i.valueIs="height",i.applyTheme(),i.startLocation=0,i.endLocation=1,i.align="center",i.valign="middle",i._maskSprite=i.slicesContainer.createChild(Sprite),i._maskSprite.visible=!1,i._maskSprite.zIndex=100,i._maskSprite.shouldClone=!1,i}return a.prototype.validateDataElements=function(){var i=this.slicesContainer.maxWidth,o=this.slicesContainer.maxHeight,c=this._maskSprite,d=c.measuredWidth/c.scale,g=c.measuredHeight/c.scale,b=min$1(o/g,i/d);b==1/0&&(b=1),b=max$1(.001,b);var j=this.startLocation,$=this.endLocation,rt=min$1(i,d*b),_e=min$1(o,g*b);c.scale=b,this.orientation=="vertical"?(this.topWidth=rt+4,this.bottomWidth=rt+4,this.pyramidHeight=_e*($-j),c.x=i/2,c.y=_e/2):(this.topWidth=_e+4,this.bottomWidth=_e+4,this.pyramidHeight=rt*($-j),c.valign="middle",c.x=rt/2,c.y=o/2),c.verticalCenter="middle",c.horizontalCenter="middle",e.prototype.validateDataElements.call(this);var st,ut;this.orientation=="vertical"?(this.valign=="bottom"&&(st=o-_e),this.valign=="middle"&&(st=(o-_e)/2),this.valign=="top"&&(st=0),this.align=="left"&&(ut=-(i-rt)/2),this.align=="center"&&(ut=0),this.align=="right"&&(ut=(i-rt)/2),this.slices.template.dy=j*_e,this.alignLabels&&(this.slicesContainer.dx=ut)):(this.valign=="bottom"&&(st=(o-_e)/2),this.valign=="middle"&&(st=0),this.valign=="top"&&(st=-(o-_e)/2),this.align=="left"&&(ut=0),this.align=="center"&&(ut=(i-rt)/2),this.align=="right"&&(ut=i-rt),this.slices.template.dx=j*rt,this.alignLabels&&(this.slicesContainer.dy=st)),this.slicesContainer.x=ut,this.labelsContainer.x=ut,this.ticksContainer.x=ut,this.slicesContainer.y=st,this.labelsContainer.y=st,this.ticksContainer.y=st,rt>0&&_e>0&&(this.slicesContainer.mask=c)},a.prototype.applyInternalDefaults=function(){e.prototype.applyInternalDefaults.call(this),hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("Pyramid Series"))},a.prototype.createDataItem=function(){return new PictorialStackedSeriesDataItem},Object.defineProperty(a.prototype,"maskSprite",{get:function(){return this._maskSprite},enumerable:!0,configurable:!0}),a.prototype.initSlice=function(i){e.prototype.initSlice.call(this,i);var o=i.states.getKey("hover");o&&(o.properties.expandDistance=0)},Object.defineProperty(a.prototype,"startLocation",{get:function(){return this.getPropertyValue("startLocation")},set:function(i){this.setPropertyValue("startLocation",i)&&this.invalidateDataItems()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"endLocation",{get:function(){return this.getPropertyValue("endLocation")},set:function(i){this.setPropertyValue("endLocation",i)&&this.invalidateDataItems()},enumerable:!0,configurable:!0}),a}(PyramidSeries);registry.registeredClasses.PictorialStackedSeries=PictorialStackedSeries;registry.registeredClasses.PictorialStackedSeriesDataItem=PictorialStackedSeriesDataItem;var ConeColumn=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="ConeColumn",i}return a.prototype.createAssets=function(){this.coneColumn=this.createChild(Cone),this.coneColumn.shouldClone=!1,this.column=this.coneColumn},a.prototype.copyFrom=function(i){e.prototype.copyFrom.call(this,i),this.coneColumn&&this.coneColumn.copyFrom(i.coneColumn)},a}(Column);registry.registeredClasses.ConeColumn=ConeColumn;var ConeSeriesDataItem=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="ConeSeriesDataItem",i.applyTheme(),i}return a}(ColumnSeriesDataItem),ConeSeries=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="ConeSeries",i.applyTheme(),i}return a.prototype.createColumnTemplate=function(){return new ConeColumn},a.prototype.getMaskPath=function(){var i=0,o=0,c=this.columns.getIndex(0);if(c)return this.baseAxis==this.xAxis?o=c.coneColumn.innerWidth/2+1:i=c.coneColumn.innerHeight/2+1,rectToPath({x:-i,y:0,width:this.xAxis.axisLength+i,height:this.yAxis.axisLength+o})},a.prototype.validateDataElementReal=function(i){e.prototype.validateDataElementReal.call(this,i);var o=i.column;if(o){var c=i.column.coneColumn;c.fill=i.column.fill,this.baseAxis==this.yAxis?c.orientation="horizontal":c.orientation="vertical"}},a}(ColumnSeries);registry.registeredClasses.ConeSeries=ConeSeries;registry.registeredClasses.ConeSeriesDataItem=ConeSeriesDataItem;var CurvedColumn=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="CurvedColumn",i}return a.prototype.createAssets=function(){this.curvedColumn=this.createChild(Sprite),this.curvedColumn.shouldClone=!1,this.setPropertyValue("tension",.7),this.width=percent(120),this.height=percent(120),this.column=this.curvedColumn},a.prototype.draw=function(){e.prototype.draw.call(this);var i=this.realWidth,o=this.realHeight,c=this.realX-this.pixelX,d=this.realY-this.pixelY,g;this.width;var b=1,j=1;this.orientation=="vertical"?(b=this.tension,g=[{x:0,y:o+d},{x:i/2,y:d},{x:i,y:o+d}]):(j=this.tension,o=Math.abs(o),g=[{x:c,y:o},{x:c+i,y:o/2},{x:c,y:0}]);var $=moveTo(g[0])+new Tension(b,j).smooth(g);this.column.path=$},a.prototype.copyFrom=function(i){e.prototype.copyFrom.call(this,i),this.curvedColumn&&this.curvedColumn.copyFrom(i.curvedColumn)},Object.defineProperty(a.prototype,"tension",{get:function(){return this.getPropertyValue("tension")},set:function(i){this.setPropertyValue("tension",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"orientation",{get:function(){return this.getPropertyValue("orientation")},set:function(i){this.setPropertyValue("orientation",i,!0)},enumerable:!0,configurable:!0}),a}(Column);registry.registeredClasses.CurvedColumn=CurvedColumn;var CurvedColumnSeriesDataItem=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="CurvedColumnSeriesDataItem",i.applyTheme(),i}return a}(ColumnSeriesDataItem),CurvedColumnSeries=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="CurvedColumnSeries",i.applyTheme(),i}return a.prototype.createColumnTemplate=function(){return new CurvedColumn},a.prototype.validateDataElementReal=function(i){e.prototype.validateDataElementReal.call(this,i);var o=i.column;if(o=i.column,o){var c=i.column.curvedColumn;c.fill=i.column.fill,this.baseAxis==this.yAxis?o.orientation="horizontal":o.orientation="vertical"}},a}(ColumnSeries);registry.registeredClasses.CurvedColumnSeries=CurvedColumnSeries;registry.registeredClasses.CurvedColumnSeriesDataItem=CurvedColumnSeriesDataItem;var CircleBullet=function(e){__extends(a,e);function a(){var i=e.call(this)||this;i.className="CircleBullet";var o=i.createChild(Circle);return o.shouldClone=!1,o.radius=5,o.isMeasured=!1,i.circle=o,i.applyTheme(),i}return a.prototype.copyFrom=function(i){e.prototype.copyFrom.call(this,i),this.circle.copyFrom(i.circle)},a}(Bullet);registry.registeredClasses.CircleBullet=CircleBullet;var ErrorBullet=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="ErrorBullet",i.errorLine=i.createChild(Sprite),i.errorLine.shouldClone=!1,i.width=20,i.height=20,i.strokeOpacity=1,i.isDynamic=!0,i}return a.prototype.validatePosition=function(){e.prototype.validatePosition.call(this);var i=this.pixelWidth/2,o=this.pixelHeight/2;this.errorLine.path=moveTo({x:-i,y:-o})+lineTo({x:i,y:-o})+moveTo({x:0,y:-o})+lineTo({x:0,y:o})+moveTo({x:-i,y:o})+lineTo({x:i,y:o})},a.prototype.copyFrom=function(i){e.prototype.copyFrom.call(this,i),this.errorLine.copyFrom(i.errorLine)},a}(Bullet);registry.registeredClasses.ErrorBullet=ErrorBullet;var NavigationBarDataItem=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="NavigationBarDataItem",i.applyTheme(),i}return Object.defineProperty(a.prototype,"name",{get:function(){return this.properties.name},set:function(i){this.setProperty("name",i)},enumerable:!0,configurable:!0}),a}(DataItem),NavigationBar=function(e){__extends(a,e);function a(){var i=e.call(this)||this;i.className="NavigationBar";var o=new InterfaceColorSet,c=new TextLink;c.valign="middle",c.paddingTop=8,c.paddingBottom=8,i.paddingBottom=2,i.links=new ListTemplate(c),i._disposers.push(new ListDisposer(i.links)),i._disposers.push(c),i._linksIterator=new ListIterator(i.links,function(){return i.links.create()}),i._linksIterator.createNewItems=!0;var d=new Triangle;d.direction="right",d.width=8,d.height=12,d.fill=o.getFor("alternativeBackground"),d.fillOpacity=.5,d.valign="middle",d.marginLeft=10,d.marginRight=10,i.separators=new ListTemplate(d),i._disposers.push(new ListDisposer(i.separators)),i._disposers.push(d);var g=new TextLink;return i.activeLink=g,g.copyFrom(c),g.valign="middle",g.fontWeight="bold",i.width=percent(100),i.layout="grid",i.dataFields.name="name",i.applyTheme(),i}return a.prototype.validateDataElements=function(){this.removeChildren(),this._linksIterator.reset(),e.prototype.validateDataElements.call(this)},a.prototype.validateDataElement=function(i){e.prototype.validateDataElement.call(this,i);var o;if(i.index<this.dataItems.length-1){o=this._linksIterator.getLast(),o.parent=this;var c=this.separators.create();c.parent=this,c.valign="middle"}else o=this.activeLink,o.events.copyFrom(this.links.template.events),o.hide(0),o.show(),o.parent=this;o.dataItem=i,o.text=i.name,o.validate()},a}(Component);registry.registeredClasses.NavigationBar=NavigationBar;registry.registeredClasses.NavigationBarDataItem=NavigationBarDataItem;var Cursor=function(e){__extends(a,e);function a(){var i=e.call(this)||this;i.point={x:0,y:0},i._stick="none",i.className="Cursor",i.width=percent(100),i.height=percent(100),i.shouldClone=!1,i.hide(0),i.trackable=!0,i.clickable=!0,i.isMeasured=!1;var o=getInteraction();return i._disposers.push(o.body.events.on("down",i.handleCursorDown,i)),i._disposers.push(o.body.events.on("up",i.handleCursorUp,i)),i._disposers.push(o.body.events.on("track",i.handleCursorMove,i)),i.applyTheme(),i}return a.prototype.handleCursorMove=function(i){if(!(!this.interactionsEnabled||this.interactions.isTouchProtected&&i.touch)){if((this._generalBehavior!="zoom"&&this._generalBehavior!="pan"||!this.downPoint)&&!getInteraction().isLocalElement(i.pointer,this.paper.svg,this.uid)){(!this.isHidden||!this.isHiding)&&this.hide();return}var o=documentPointToSprite(i.pointer.point,this);return this._stick=="hard"&&this._stickPoint&&(o=this._stickPoint),this._stick=="soft"&&this._stickPoint&&(this.fitsToBounds(o)||(o=this._stickPoint)),this._adapterO&&this._adapterO.apply("cursorPoint",o),this.triggerMove(o),o}},a.prototype.hideReal=function(i){if(!((this._stick=="hard"||this._stick=="soft")&&this._stickPoint))return e.prototype.hideReal.call(this,i)},a.prototype.triggerMove=function(i,o,c){i.x=round$1(i.x,1),i.y=round$1(i.y,1),o&&(this._stick=o),(o=="hard"||o=="soft")&&(this._stickPoint=i),this.triggerMoveReal(i,c)},a.prototype.triggerMoveReal=function(i,o){(this.point.x!=i.x||this.point.y!=i.y||o)&&(this.point=i,this.invalidatePosition(),this.fitsToBounds(i)?this.show(0):this.downPoint||this.hide(0),this.visible&&(this.getPositions(),this.dispatch("cursorpositionchanged")))},a.prototype.triggerDown=function(i){this.triggerDownReal(i)},a.prototype.triggerDownReal=function(i){switch(this._generalBehavior){case"zoom":this.dispatchImmediately("zoomstarted");break;case"select":this.dispatchImmediately("selectstarted");break;case"pan":this.dispatchImmediately("panstarted"),getInteraction().setGlobalStyle(MouseCursorStyle.grabbing);break}},a.prototype.triggerUp=function(i){this.triggerUpReal(i)},a.prototype.triggerUpReal=function(i){system.requestFrame(),this.updatePoint(this.upPoint);var o=getInteraction();if(getDistance(this._upPointOrig,this._downPointOrig)>o.getHitOption(this.interactions,"hitTolerance")){switch(this._generalBehavior){case"zoom":this.dispatch("zoomended");break;case"select":this.dispatch("selectended");break;case"pan":this.dispatch("panended"),o.setGlobalStyle(MouseCursorStyle.default);break}this.downPoint=void 0,this.updateSelection()}},a.prototype.updateSelection=function(){},a.prototype.getPositions=function(){this.xPosition=this.point.x/this.innerWidth,this.yPosition=1-this.point.y/this.innerHeight},a.prototype.handleCursorDown=function(i){if(!(!this.interactionsEnabled||this.interactions.isTouchProtected&&i.touch||!getInteraction().isLocalElement(i.pointer,this.paper.svg,this.uid))){blur();var o=documentPointToSprite(i.pointer.point,this);this._stick=="hard"&&this._stickPoint&&(o=this._stickPoint),this._adapterO&&this._adapterO.apply("cursorPoint",o),this.fitsToBounds(o)&&(this._downPointOrig={x:o.x,y:o.y},i.event.cancelable&&this.shouldPreventGestures(i.touch)&&this.fitsToBounds(o)&&i.event.preventDefault(),this.triggerMove(o),this.triggerDown(o))}},a.prototype.shouldPreventGestures=function(i){return!0},a.prototype.updatePoint=function(i){},a.prototype.handleCursorUp=function(i){if(this.interactionsEnabled&&!(!this.downPoint&&!getInteraction().isLocalElement(i.pointer,this.paper.svg,this.uid))){var o=documentPointToSprite(i.pointer.point,this);this._adapterO&&this._adapterO.apply("cursorPoint",o),!(!this.downPoint||!this.fitsToBounds(this.downPoint))&&(this._stick=="hard"&&this._stickPoint&&(o=this._stickPoint),this._upPointOrig={x:o.x,y:o.y},this.triggerMove(o),this.triggerUp(o))}},Object.defineProperty(a.prototype,"chart",{get:function(){return this._chart},set:function(i){this._chart=i,hasValue(this._chart.plotContainer)&&getInteraction().lockElement(this._chart.plotContainer.interactions)},enumerable:!0,configurable:!0}),a}(Container);registry.registeredClasses.Cursor=Cursor;var XYCursor=function(e){__extends(a,e);function a(){var i=e.call(this)||this;i._lineX=new MutableValueDisposer,i._lineY=new MutableValueDisposer,i._xAxis=new MutableValueDisposer,i._yAxis=new MutableValueDisposer,i._snapToDisposers=[],i.className="XYCursor",i.behavior="zoomX",i.maxPanOut=.1;var o=new InterfaceColorSet;i.snapOnPan=!0;var c=i.createChild(Sprite);c.shouldClone=!1,c.fillOpacity=.2,c.fill=o.getFor("alternativeBackground"),c.isMeasured=!1,c.visible=!1,c.interactionsEnabled=!1,i.selection=c,i._disposers.push(i.selection);var d=i.createChild(Sprite);d.shouldClone=!1,d.stroke=o.getFor("grid"),d.fill=color(),d.strokeDasharray="3,3",d.isMeasured=!1,d.strokeOpacity=.4,d.interactionsEnabled=!1,d.y=0,i.lineX=d,i._disposers.push(i.lineX);var g=i.createChild(Sprite);return g.shouldClone=!1,g.stroke=o.getFor("grid"),g.fill=color(),g.strokeDasharray="3,3",g.isMeasured=!1,g.strokeOpacity=.4,g.interactionsEnabled=!1,g.x=0,i.lineY=g,i._disposers.push(i.lineY),i.events.on("sizechanged",i.updateSize,i,!1),i._disposers.push(i._lineX),i._disposers.push(i._lineY),i._disposers.push(i._xAxis),i._disposers.push(i._yAxis),i.mask=i,i.hideSeriesTooltipsOnSelection=!0,i.applyTheme(),i}return a.prototype.updateSize=function(){this.lineX&&(this.lineX.path=moveTo({x:0,y:0})+lineTo({x:0,y:this.innerHeight})),this.lineY&&(this.lineY.path=moveTo({x:0,y:0})+lineTo({x:this.innerWidth,y:0}))},a.prototype.updateSelection=function(){if(this._usesSelection){var i=this.downPoint,o=this.behavior;if(i){var c=this.point;this.lineX&&(c.x=this.lineX.pixelX),this.lineY&&(c.y=this.lineY.pixelY);var d=this.selection,g=Math.min(c.x,i.x),b=Math.min(c.y,i.y),j=round$1(Math.abs(i.x-c.x),this._positionPrecision),$=round$1(Math.abs(i.y-c.y),this._positionPrecision);switch(o){case"zoomX":b=0,$=this.pixelHeight;break;case"zoomY":g=0,j=this.pixelWidth;break;case"selectX":b=0,$=this.pixelHeight;break;case"selectY":g=0,j=this.pixelWidth;break}d.x=g,d.y=b,d.path=rectangle(j,$),d.validatePosition()}else this._generalBehavior!="select"&&this.selection.hide()}},a.prototype.fixPoint=function(i){return i.x=Math.max(0,i.x),i.y=Math.max(0,i.y),i.x=Math.min(this.pixelWidth,i.x),i.y=Math.min(this.pixelHeight,i.y),i},a.prototype.triggerMoveReal=function(i,o){e.prototype.triggerMoveReal.call(this,i,o);var c=this.snapToSeries;if(c&&!this.downPoint)if(c instanceof XYSeries)c.isHidden&&this.updateLinePositions(i);else{var d=!0;each$2(c,function(g){g.isHidden||(d=!1)}),d&&this.updateLinePositions(i)}else this.updateLinePositions(i);this.downPoint&&getDistance(this.downPoint,i)>3&&this._generalBehavior=="pan"&&(this.getPanningRanges(),this.dispatch("panning"))},a.prototype.updateLinePositions=function(i){i=this.fixPoint(this.point),this.lineX&&this.lineX.visible&&!this.xAxis&&(this.lineX.x=i.x),this.lineY&&this.lineY.visible&&!this.yAxis&&(this.lineY.y=i.y),this.updateSelection()},a.prototype.triggerDownReal=function(i){if(this.visible&&!this.isHiding)if(this._generalBehavior=="select"&&(this.selection.parent=this.parent),this.fitsToBounds(i)){this.downPoint={x:i.x,y:i.y},this.updatePoint(i),this.point.x=this.downPoint.x,this.point.y=this.downPoint.y;var o=this.selection,c=this.downPoint.x,d=this.downPoint.y;this._usesSelection&&(o.x=c,o.y=d,o.path="",o.show()),e.prototype.triggerDownReal.call(this,i)}else this.downPoint=void 0;else this.downPoint=void 0},a.prototype.updatePoint=function(i){this.lineX&&(i.x=this.lineX.pixelX),this.lineY&&(i.y=this.lineY.pixelY)},a.prototype.triggerUpReal=function(i){if(this.hasMoved())this.downPoint&&(this.upPoint=i,this.updatePoint(this.upPoint),this._generalBehavior!="pan"&&this.getRanges(),this._generalBehavior!="select"&&this.selection.hide(),e.prototype.triggerUpReal.call(this,i));else{if(this._generalBehavior!="select"?this.selection.hide(0):(this.xRange=void 0,this.yRange=void 0,this.dispatchImmediately("selectended")),this._generalBehavior=="pan"){var o=getInteraction();o.setGlobalStyle(MouseCursorStyle.default)}this.dispatchImmediately("behaviorcanceled")}this.downPoint=void 0,this.dispatch("cursorpositionchanged")},a.prototype.hasMoved=function(){var i;return this.behavior=="zoomX"||this.behavior=="panX"?i=getHorizontalDistance(this._upPointOrig,this._downPointOrig):this.behavior=="zoomY"||this.behavior=="panY"?i=getVerticalDistance(this._upPointOrig,this._downPointOrig):i=getDistance(this._upPointOrig,this._downPointOrig),i>getInteraction().getHitOption(this.interactions,"hitTolerance")},a.prototype.getPanningRanges=function(){var i=round$1(this.downPoint.x/this.innerWidth,5),o=1-round$1(this.downPoint.y/this.innerHeight,5),c=round$1(this.point.x/this.innerWidth,5),d=1-round$1(this.point.y/this.innerHeight,5),g=i-c,b=o-d;this.xRange={start:g,end:1+g},this.yRange={start:b,end:1+b},this.behavior=="panX"&&(this.yRange.start=0,this.yRange.end=1),this.behavior=="panY"&&(this.xRange.start=0,this.xRange.end=1)},a.prototype.getRanges=function(){this.lineX&&(this.upPoint.x=this.lineX.pixelX),this.lineY&&(this.upPoint.y=this.lineY.pixelY),this.selection;var i=round$1(this.downPoint.x/this.innerWidth,5),o=round$1(this.upPoint.x/this.innerWidth,5),c=1-round$1(this.downPoint.y/this.innerHeight,5),d=1-round$1(this.upPoint.y/this.innerHeight,5);this.xRange={start:min$1(i,o),end:max$1(i,o)},this.yRange={start:min$1(c,d),end:max$1(c,d)}},Object.defineProperty(a.prototype,"behavior",{get:function(){return this.getPropertyValue("behavior")},set:function(i){this.setPropertyValue("behavior",i,!0),this._usesSelection=!1,i.indexOf("zoom")!=-1&&(this._generalBehavior="zoom",this._usesSelection=!0),i.indexOf("select")!=-1&&(this._generalBehavior="select",this._usesSelection=!0),i.indexOf("pan")!=-1&&(this._generalBehavior="pan",this._usesSelection=!1)},enumerable:!0,configurable:!0}),a.prototype.shouldPreventGestures=function(i){return(!this.interactions.isTouchProtected||!i)&&this.behavior!="none"},Object.defineProperty(a.prototype,"fullWidthLineX",{get:function(){return this.getPropertyValue("fullWidthLineX")},set:function(i){this.setPropertyValue("fullWidthLineX",i),i||this.updateSize()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"fullWidthLineY",{get:function(){return this.getPropertyValue("fullWidthLineY")},set:function(i){this.setPropertyValue("fullWidthLineY",i),i||this.updateSize()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"hideSeriesTooltipsOnSelection",{get:function(){return this.getPropertyValue("hideSeriesTooltipsOnSelection")},set:function(i){this.setPropertyValue("hideSeriesTooltipsOnSelection",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"maxTooltipDistance",{get:function(){return this.getPropertyValue("maxTooltipDistance")},set:function(i){this.setPropertyValue("maxTooltipDistance",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"maxPanOut",{get:function(){return this.getPropertyValue("maxPanOut")},set:function(i){this.setPropertyValue("maxPanOut",i)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"xAxis",{get:function(){return this._xAxis.get()},set:function(i){var o=this;this._xAxis.get()!=i&&this._xAxis.set(i,new MultiDisposer([i.tooltip.events.on("positionchanged",this.handleXTooltipPosition,this,!1),i.events.on("rangechangestarted",function(c){o.hide(0),o.preventShow=!0},void 0,!1),i.events.on("rangechangeended",function(c){o.preventShow=!1,o.hide(0),o.dispatch("cursorpositionchanged")},void 0,!1)]))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"yAxis",{get:function(){return this._yAxis.get()},set:function(i){var o=this;this._yAxis.get()!=i&&this._yAxis.set(i,new MultiDisposer([i.tooltip.events.on("positionchanged",this.handleYTooltipPosition,this,!1),i.events.on("rangechangestarted",function(c){o.hide(0),o.__disabled=!0},void 0,!1),i.events.on("rangechangeended",function(c){o.__disabled=!1,o.hide(0),o.dispatch("cursorpositionchanged")},void 0,!1)]))},enumerable:!0,configurable:!0}),a.prototype.handleXTooltipPosition=function(i){var o=this.xAxis.tooltip,c=svgPointToSprite({x:o.pixelX,y:o.pixelY},this),d=c.x;if(c.y=1,this.lineX&&(this.lineX.x=d,this.fitsToBounds(c)||this.hide()),this.xAxis&&this.fullWidthLineX){var g=this.xAxis.currentItemStartPoint,b=this.xAxis.currentItemEndPoint;if(g&&b){this.lineX.x=d;var j=b.x-g.x;this.lineX.path=rectangle(j,this.innerHeight,-j/2)}}},a.prototype.handleYTooltipPosition=function(i){var o=this.yAxis.tooltip,c=svgPointToSprite({x:o.pixelX,y:o.pixelY},this),d=c.y;if(c.x=1,this.lineY&&(this.lineY.y=d,this.fitsToBounds(c)||this.hide()),this.yAxis&&this.fullWidthLineY){var g=this.yAxis.currentItemStartPoint,b=this.yAxis.currentItemEndPoint;if(g&&b){this.lineY.y=d;var j=b.y-g.y;this.lineY.path=rectangle(this.innerWidth,j,0,-j/2)}}},Object.defineProperty(a.prototype,"lineX",{get:function(){return this._lineX.get()},set:function(i){i?(i.setElement(this.paper.add("path")),this._lineX.set(i,i.events.on("positionchanged",this.updateSelection,this,!1)),i.interactionsEnabled=!1,i.parent=this):this._lineX.reset()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"lineY",{get:function(){return this._lineY.get()},set:function(i){i?(i.setElement(this.paper.add("path")),this._lineY.set(i,i.events.on("positionchanged",this.updateSelection,this,!1)),i.parent=this,i.interactionsEnabled=!1):this._lineY.reset()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"selection",{get:function(){return this._selection},set:function(i){this._selection=i,i&&(i.element=this.paper.add("path"),i.parent=this)},enumerable:!0,configurable:!0}),a.prototype.processConfig=function(i){var o=this;if(i&&(hasValue(i.xAxis)&&isString$1(i.xAxis)&&(this.map.hasKey(i.xAxis)?i.xAxis=this.map.getKey(i.xAxis):(this.processingErrors.push('[XYCursor] No axis with id "'+i.xAxis+'" found for `xAxis`'),delete i.xAxis)),hasValue(i.yAxis)&&isString$1(i.yAxis)&&(this.map.hasKey(i.yAxis)?i.yAxis=this.map.getKey(i.yAxis):(this.processingErrors.push('[XYCursor] No axis with id "'+i.yAxis+'" found for `yAxis`'),delete i.yAxis)),hasValue(i.snapToSeries))){var c=isArray$1(i.snapToSeries)?i.snapToSeries:[i.snapToSeries],d=!1;each$2(c,function(g,b){isString$1(g)&&(o.map.hasKey(g)?c[b]=o.map.getKey(g):(o.processingErrors.push('[XYCursor] No series with id "'+g+'" found for `series`'),d=!0))}),d?delete i.snapToSeries:i.snapToSeries=c}e.prototype.processConfig.call(this,i)},Object.defineProperty(a.prototype,"snapToSeries",{get:function(){return this.getPropertyValue("snapToSeries")},set:function(i){var o=this;this.setPropertyValue("snapToSeries",i)&&(i instanceof XYSeries&&(i=[i]),this._snapToDisposers&&each$2(this._snapToDisposers,function(c){c.dispose()}),this._snapToDisposers=[],i&&each$2(i,function(c){o._snapToDisposers.push(c.events.on("tooltipshownat",function(){o.handleSnap(c)},void 0,!1))}))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"snapOnPan",{get:function(){return this.getPropertyValue("snapOnPan")},set:function(i){this.setPropertyValue("snapOnPan",i)},enumerable:!0,configurable:!0}),a.prototype.handleSnap=function(i){if(!this.downPoint){var o=i.getTooltipX()+i.xAxis.pixelX,c=i.getTooltipY()+i.yAxis.pixelY,d=i.xAxis,g=i.yAxis;d&&d.renderer.opposite&&(c-=this.pixelHeight),this.point={x:o,y:c},this.getPositions();var b=o,j=c;o-=this.pixelWidth,g&&g.renderer.opposite&&(o+=this.pixelWidth);var $=i.tooltip,rt=$.animationDuration,_e=$.animationEasing;d instanceof ValueAxis&&!(d instanceof DateAxis)&&g instanceof ValueAxis&&!(g instanceof DateAxis)?(i.yAxis.showTooltipAtPosition(this.yPosition),i.xAxis.showTooltipAtPosition(this.xPosition)):(i.baseAxis==i.xAxis&&i.yAxis.showTooltipAtPosition(this.yPosition),i.baseAxis==i.yAxis&&i.xAxis.showTooltipAtPosition(this.xPosition)),this.lineY.x=o,this.lineX.y=c,this.xAxis||this.lineX.animate([{property:"x",to:b}],rt,_e),this.yAxis||this.lineY.animate([{property:"y",to:j}],rt,_e)}},a.prototype.dispose=function(){this.hide(0),e.prototype.dispose.call(this)},a}(Cursor);registry.registeredClasses.XYCursor=XYCursor;var RadarCursor=function(e){__extends(a,e);function a(){var i=e.call(this)||this;return i.className="RadarCursor",i.radius=percent(100),i.innerRadius=percent(0),i.applyTheme(),i.mask=void 0,i}return a.prototype.fitsToBounds=function(i){var o=getDistance(i);return o<this.truePixelRadius+1&&o>this.pixelInnerRadius-1},Object.defineProperty(a.prototype,"startAngle",{get:function(){return this.getPropertyValue("startAngle")},set:function(i){this.setPropertyValue("startAngle",i,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"endAngle",{get:function(){return this.getPropertyValue("endAngle")},set:function(i){this.setPropertyValue("endAngle",i,!0)},enumerable:!0,configurable:!0}),a.prototype.triggerMoveReal=function(i,o){(!this.xAxis||this.xAxis&&(!this.xAxis.cursorTooltipEnabled||this.xAxis.tooltip.disabled))&&this.updateLineX(this.point),(!this.yAxis||this.yAxis&&(!this.yAxis.cursorTooltipEnabled||this.yAxis.tooltip.disabled))&&this.updateLineY(this.point),this.updateSelection(),e.prototype.triggerMoveReal.call(this,i,o)},a.prototype.updateLineX=function(i){var o=this.pixelRadius,c=this.startAngle,d=this.endAngle,g=this.pixelInnerRadius;if(o>0&&isNumber$1(c)&&isNumber$1(d)&&isNumber$1(g)){var b=fitAngleToRange(getAngle(i),c,d),j=void 0;if(this.lineX&&this.lineX.visible){if(this.lineX.moveTo({x:0,y:0}),this.xAxis&&this.fullWidthLineX){var $=this.xAxis.currentItemStartPoint,rt=this.xAxis.currentItemEndPoint;if($&&rt){var _e=fitAngleToRange(getAngle($),c,d),st=fitAngleToRange(getAngle(rt),c,d),ut=st-_e;c<d?ut<0&&(ut+=360):ut>0&&(ut-=360),b-=ut/2,j=moveTo({x:g*cos(b),y:g*sin(b)})+lineTo({x:o*cos(b),y:o*sin(b)})+arcTo(b,ut,o)+lineTo({x:g*cos(b+ut),y:g*sin(b+ut)})+arcTo(b+ut,-ut,g)}}j||(j=moveTo({x:g*cos(b),y:g*sin(b)})+lineTo({x:o*cos(b),y:o*sin(b)})),this.lineX.path=j}}},a.prototype.updateLineY=function(i){if(this.lineY&&this.lineY.visible){var o=this.startAngle,c=this.endAngle,d=this.truePixelRadius,g=fitToRange(getDistance(i),0,this.truePixelRadius);if(isNumber$1(g)&&isNumber$1(o)){this.lineY.moveTo({x:0,y:0});var b=void 0,j=c-o;if(this.yAxis&&this.fullWidthLineY){var $=this.yAxis.currentItemStartPoint,rt=this.yAxis.currentItemEndPoint;if($&&rt){var _e=fitToRange(getDistance($),0,d);g=fitToRange(getDistance(rt),0,d),b=moveTo({x:g*cos(o),y:g*sin(o)})+arcTo(o,j,g),b+=moveTo({x:_e*cos(c),y:_e*sin(c)})+arcTo(c,-j,_e)}}b||(b=moveTo({x:g*cos(o),y:g*sin(o)})+arcTo(o,c-o,g)),this.lineY.path=b}}},a.prototype.updateSelection=function(){if(this._usesSelection){var i=this.downPoint;if(i){var o=this.point,c=this.pixelRadius,d=this.truePixelRadius,g=this.pixelInnerRadius,b=Math.min(this.startAngle,this.endAngle),j=Math.max(this.startAngle,this.endAngle),$=fitAngleToRange(getAngle(i),b,j),rt=fitAngleToRange(getAngle(o),b,j),_e=getDistance(i);if(_e<d){var st=fitToRange(getDistance(o),0,d);this._prevAngle=rt;var ut=moveTo({x:0,y:0}),gt=sin($),yt=cos($),Pt=sin(rt),wt=cos(rt),Ct=this.behavior;Ct=="zoomX"||Ct=="selectX"?ut+=lineTo({x:c*yt,y:c*gt})+arcTo($,rt-$,c)+lineTo({x:g*wt,y:g*Pt})+arcTo(rt,$-rt,g):Ct=="zoomY"||Ct=="selectY"?ut=moveTo({x:st*cos(b),y:st*sin(b)})+arcTo(b,j-b,st)+lineTo({x:_e*cos(j),y:_e*sin(j)})+arcTo(j,b-j,_e)+closePath():Ct=="zoomXY"&&(ut=moveTo({x:st*cos($),y:st*sin($)})+arcTo($,rt-$,st)+lineTo({x:_e*cos(rt),y:_e*sin(rt)})+arcTo(rt,$-rt,_e)+closePath()),this.selection.path=ut}this.selection.moveTo({x:0,y:0})}}},a.prototype.getPositions=function(){var i=this.chart;if(i){var o=this.pixelInnerRadius,c=this.truePixelRadius-o,d=this.startAngle,g=this.endAngle,b=fitAngleToRange(getAngle(this.point),d,g),j=(b-d)/(g-d);this.xPosition=j,this.yPosition=fitToRange((getDistance(this.point)-o)/c,0,1)}},a.prototype.updatePoint=function(i){},a.prototype.handleXTooltipPosition=function(i){if(this.xAxis.cursorTooltipEnabled){var o=this.xAxis.tooltip;this.updateLineX(svgPointToSprite({x:o.pixelX,y:o.pixelY},this))}},a.prototype.handleYTooltipPosition=function(i){if(this.yAxis.cursorTooltipEnabled){var o=this.yAxis.tooltip;this.updateLineY(svgPointToSprite({x:o.pixelX,y:o.pixelY},this))}},a.prototype.updateLinePositions=function(i){},a.prototype.getRanges=function(){var i=this.downPoint;if(i){var o=this.upPoint,c=this.chart;if(c){var d=this.pixelRadius,g=this.startAngle,b=this.endAngle,j=fitAngleToRange(getAngle(i),this.startAngle,this.endAngle),$=fitAngleToRange(getAngle(o),this.startAngle,this.endAngle),rt=fitToRange(getDistance(i),0,d),_e=fitToRange(getDistance(o),0,d),st=0,ut=1,gt=0,yt=1,Pt=this.behavior;if(Pt=="zoomX"||Pt=="selectX"||Pt=="zoomXY"||Pt=="selectXY"){var wt=b-g;st=round$1((j-g)/wt,5),ut=round$1(($-g)/wt,5)}(Pt=="zoomY"||Pt=="selectY"||Pt=="zoomXY"||Pt=="selectXY")&&(gt=round$1(rt/d,5),yt=round$1(_e/d,5)),this.xRange={start:Math.min(st,ut),end:Math.max(st,ut)},this.yRange={start:Math.min(gt,yt),end:Math.max(gt,yt)},this.behavior=="selectX"||this.behavior=="selectY"||this.behavior=="selectXY"||this.selection.hide()}}},a.prototype.updateSize=function(){},Object.defineProperty(a.prototype,"radius",{get:function(){return this.getPropertyValue("radius")},set:function(i){this.setPercentProperty("radius",i,!1,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"pixelRadius",{get:function(){return relativeRadiusToValue(this.radius,this.truePixelRadius)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"truePixelRadius",{get:function(){return relativeToValue(percent(100),min$1(this.innerWidth/2,this.innerHeight/2))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"innerRadius",{get:function(){return this.getPropertyValue("innerRadius")},set:function(i){this.setPercentProperty("innerRadius",i,!1,!1,10,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"pixelInnerRadius",{get:function(){var i=this.innerRadius;return i instanceof Percent&&(i=percent(100*i.value*this.chart.innerRadiusModifyer)),relativeRadiusToValue(i,this.truePixelRadius)||0},enumerable:!0,configurable:!0}),a.prototype.fixPoint=function(i){return i},a}(XYCursor);registry.registeredClasses.RadarCursor=RadarCursor;var theme=function(e){is(e,"ColorSet")&&(e.list=[color("#F44336"),color("#E91E63"),color("#9C27B0"),color("#673AB7"),color("#3F51B5"),color("#2196F3"),color("#03A9F4"),color("#00BCD4"),color("#009688"),color("#4CAF50"),color("#8BC34A"),color("#CDDC39"),color("#FFEB3B"),color("#FFC107"),color("#FF9800"),color("#FF5722"),color("#795548"),color("#9E9E9E"),color("#607D8B")],e.minLightness=.2,e.maxLightness=.7,e.reuse=!0),is(e,"ResizeButton")&&(e.background.cornerRadiusTopLeft=20,e.background.cornerRadiusTopRight=20,e.background.cornerRadiusBottomLeft=20,e.background.cornerRadiusBottomRight=20),is(e,"Tooltip")&&(e.animationDuration=800)};useTheme(theme);const config$1={series:[{type:"PieSeries",dataFields:{value:"litres",category:"country"}},{type:"PieSeries",dataFields:{value:"percentage",category:"category"}}],data:[{category:"Ecosystem",percentage:80},{category:"Public Sale",percentage:.05},{category:"Private & OTC Sales",percentage:9},{category:"Team",percentage:10},{category:"Airdrop",percentage:.95}]},Egax=()=>jsxRuntimeExports.jsxs("div",{className:"egox_token_div",children:[jsxRuntimeExports.jsxs("section",{className:"egox_token_div_section1",children:[jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsx("div",{className:"egox_token_div_section1area",children:jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section1area_cont1",children:[jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section1area1",children:[jsxRuntimeExports.jsx("div",{className:"egox_token_div_section1area1_title",children:"Egochain (EGAX) coin"}),jsxRuntimeExports.jsx("div",{className:"egox_token_div_section1area1_para",children:"Egochain's robust fee structure ensures network sustainability and incentivizes participation through token distribution."})]}),jsxRuntimeExports.jsx("div",{className:"egox_token_div_section1area2",children:jsxRuntimeExports.jsx("img",{src:"/img/1_inch_token_image_dummy.png",alt:"",className:"egox_token_div_section1area2_img"})})]})})}),jsxRuntimeExports.jsx("img",{src:"/img/grains_ellipse.png",alt:"",className:"grains_ellipse"})]}),jsxRuntimeExports.jsxs("section",{className:"egox_token_div_section3b",children:[jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section3_area",children:[jsxRuntimeExports.jsx("div",{className:"egox_token_div_section3_area_titleb",children:"Tokenomics"}),jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section3_area_body",children:[jsxRuntimeExports.jsx(default_1,{config:config$1,id:"amcharts-4",chartTypeClass:PieChart}),jsxRuntimeExports.jsxs("div",{className:"supply_div",children:[jsxRuntimeExports.jsx("div",{className:"supply_div_title",children:"Token Supply"}),jsxRuntimeExports.jsx("div",{className:"supply_div_amnt",children:"50,000,000"})]})]}),jsxRuntimeExports.jsxs("div",{className:"mobile_supply_div",children:["Total Supply"," ",jsxRuntimeExports.jsx("div",{className:"mobile_supply_div_span",children:"50,000,000"})]})]})}),jsxRuntimeExports.jsx("img",{src:"/img/grains_ellipse.png",alt:"",className:"grains_ellipse"}),jsxRuntimeExports.jsx("img",{src:"/img/test_hero_light2.svg",alt:"",className:"home_div_section1_bg_light2"})]}),jsxRuntimeExports.jsxs("section",{className:"egox_token_div_section3b",children:[jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsxs("div",{className:"egox_token_div_section3_area",children:[jsxRuntimeExports.jsx("div",{className:"egox_token_div_section3_area_titleb",children:"Token Distribution Schedule"}),jsxRuntimeExports.jsxs("div",{className:"distribution_div_area",children:[jsxRuntimeExports.jsxs("div",{className:"distribution_div_area_cont1",children:[jsxRuntimeExports.jsx("div",{className:"distribution_div_area_cont1_title",children:"Public Sale"}),jsxRuntimeExports.jsx("div",{className:"distribution_div_area_cont1_body",children:jsxRuntimeExports.jsx("li",{className:"distribution_div_area_cont1_body_cont1",children:"100% of tokens unlocked at purchase."})})]}),jsxRuntimeExports.jsxs("div",{className:"distribution_div_area_cont1",children:[jsxRuntimeExports.jsx("div",{className:"distribution_div_area_cont1_title",children:"Private Sale"}),jsxRuntimeExports.jsxs("div",{className:"distribution_div_area_cont1_body",children:[jsxRuntimeExports.jsx("li",{className:"distribution_div_area_cont1_body_cont1",children:"40% of tokens unlocked at purchase."}),jsxRuntimeExports.jsx("li",{className:"distribution_div_area_cont1_body_cont1",children:"3 months lockup period followed by 10% of tokens unlocked monthly for the remaining period"})]})]}),jsxRuntimeExports.jsxs("div",{className:"distribution_div_area_cont1",children:[jsxRuntimeExports.jsx("div",{className:"distribution_div_area_cont1_title",children:"Team, Partnerships & Advisory"}),jsxRuntimeExports.jsxs("div",{className:"distribution_div_area_cont1_body",children:[jsxRuntimeExports.jsx("li",{className:"distribution_div_area_cont1_body_cont1",children:"18 months full lockup period"}),jsxRuntimeExports.jsx("li",{className:"distribution_div_area_cont1_body_cont1",children:"15% of tokens unlocked quarterly thereafter."})]})]}),jsxRuntimeExports.jsxs("div",{className:"distribution_div_area_cont1",children:[jsxRuntimeExports.jsx("div",{className:"distribution_div_area_cont1_title",children:"Marketing"}),jsxRuntimeExports.jsxs("div",{className:"distribution_div_area_cont1_body",children:[jsxRuntimeExports.jsx("li",{className:"distribution_div_area_cont1_body_cont1",children:"5% of tokens unlocked at purchase"}),jsxRuntimeExports.jsx("li",{className:"distribution_div_area_cont1_body_cont1",children:"6 months lockup period followed by 5% of tokens unlocked quarterly thereafter."})]})]}),jsxRuntimeExports.jsxs("div",{className:"distribution_div_area_cont1",children:[jsxRuntimeExports.jsx("div",{className:"distribution_div_area_cont1_title",children:"Ecosystem"}),jsxRuntimeExports.jsx("div",{className:"distribution_div_area_cont1_body",children:jsxRuntimeExports.jsx("li",{className:"distribution_div_area_cont1_body_cont1",children:"80% of the total token supply (40 million tokens) will be distributed for ecosystem growth over a 10-year period according to pre-defined limitations."})})]})]})]})}),jsxRuntimeExports.jsx("img",{src:"/img/grains_ellipse.png",alt:"",className:"grains_ellipse"}),jsxRuntimeExports.jsx("img",{src:"/img/test_hero_light2.svg",alt:"",className:"home_div_section1_bg_light2"})]}),jsxRuntimeExports.jsxs("section",{className:"home_div_section4",children:[jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsx("div",{className:"home_div_section4_area",children:jsxRuntimeExports.jsxs("div",{className:"home_div_section4_area_body",children:[jsxRuntimeExports.jsxs("div",{className:"home_div_section4_area_body_cont",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_cont1_img_div",children:jsxRuntimeExports.jsx(Icon,{})}),jsxRuntimeExports.jsxs("div",{className:"home_div_section4_area_body_cont2",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_cont2_title",children:"Transaction fees (EGAX)"}),jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_cont2_para",children:"Cover operational costs and prevent resource abuse. System fees are burned, while network fees reward consensus nodes, driving their commitment."})]})]}),jsxRuntimeExports.jsxs("div",{className:"home_div_section4_area_body_cont2a",children:[jsxRuntimeExports.jsxs("div",{className:"home_div_section4_area_body_cont2",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_cont2_title",children:"Accessibility and Ease of Use"}),jsxRuntimeExports.jsxs("div",{className:"home_div_section4_area_body_cont2_para",children:["* Minimal EGaX Unit: 0.00 000001 EGAX, enabling microtransactions and fostering affordability.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Staking-Free Token Claiming: No EGAX staking required to receive earned tokens.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"* Seamless EGAX Claiming : Apex EVs integrate a built-in claim function for effortless token acquisition."]})]}),jsxRuntimeExports.jsx("div",{className:"home_div_section4_area_body_cont1_img_div2",children:jsxRuntimeExports.jsx(Icon,{})})]})]})})}),jsxRuntimeExports.jsx("img",{src:"/img/grains_ellipse.png",alt:"",className:"grains_ellipse"}),jsxRuntimeExports.jsx("img",{src:"/img/test_hero_light4.svg",alt:"",className:"home_div_section1_bg_light4"}),jsxRuntimeExports.jsx("img",{src:"/img/test_hero_light3.svg",alt:"",className:"home_div_section1_bg_light3"})]})]}),Privacy=()=>jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("section",{className:"heroSection4",children:[jsxRuntimeExports.jsxs("div",{className:"container",children:[jsxRuntimeExports.jsxs("div",{className:"heroArea4",children:[jsxRuntimeExports.jsxs("div",{className:"heroTxts4",children:[jsxRuntimeExports.jsx("h1",{className:"heroTitle4","data-aos":"fade-up","data-aos-easing":"ease-in-out","data-aos-once":"false",children:"Privacy Policy"}),jsxRuntimeExports.jsxs("p",{className:"hero4para","data-aos":"fade-up","data-aos-easing":"ease-in-out","data-aos-once":"false",children:["NEED SUPPORT:"," ",jsxRuntimeExports.jsx("a",{href:"#",className:"egrEmailLink",children:"support@egochain.org"})]})]}),jsxRuntimeExports.jsx("div",{className:"hero-images4","data-aos":"fade-left",children:jsxRuntimeExports.jsx("img",{src:"/img/privacy-image.svg",alt:"",className:"privacy"})})]}),jsxRuntimeExports.jsxs("div",{className:"privacyTextList",children:[jsxRuntimeExports.jsx("span",{className:`privacyTextList_span\r
            `,children:"Last Date Updated 10 January 2024."}),jsxRuntimeExports.jsxs("div",{className:"privacyTxts",children:[jsxRuntimeExports.jsx("div",{className:"privacyLine","data-aos":"fade-right"}),jsxRuntimeExports.jsx("div",{className:"loanDetailsTitle",children:jsxRuntimeExports.jsxs("h1",{className:"PrivacyTitle","data-aos":"fade-right",children:["1. ",jsxRuntimeExports.jsx("span",{className:"titleName",children:"About this Notice"})]})}),jsxRuntimeExports.jsx("p",{className:"AboutUsPara","data-aos":"fade-right",children:"This Privacy and Cookie Notice provides information on how egochain collects and processes your personal data when you visit our website or mobile applications."})]}),jsxRuntimeExports.jsxs("div",{className:"privacyTxts",children:[jsxRuntimeExports.jsx("div",{className:"privacyLine","data-aos":"fade-right"}),jsxRuntimeExports.jsx("div",{className:"loanDetailsTitle",children:jsxRuntimeExports.jsxs("h1",{className:"PrivacyTitle","data-aos":"fade-right",children:["2."," ",jsxRuntimeExports.jsx("span",{className:"titleName",children:"The Data We Collect About You?"})]})}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:["We collect your personal data in order to provide and continually improve our products and services. We may collect, use, store and transfer the following different kinds of personal data about you: Here for marketing and personal data optimization purposes. egochain also uses Google Digital Marketing to propose targeted offers. To find out more:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," Information you provide to us: We receive and store the information you provide to us including your identity data, contact data, delivery address and financial data.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," Information on your use of our website and/or mobile applications: We automatically collect and store certain types of information regarding your use of the egochain including information about your searches, views, downloads and transactions.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," Information from third parties and publicly available sources: We may receive information about you from third parties including our carriers; payment service providers; merchants/brands; and advertising service providers."]})]}),jsxRuntimeExports.jsxs("div",{className:"privacyTxts",children:[jsxRuntimeExports.jsx("div",{className:"privacyLine","data-aos":"fade-right"}),jsxRuntimeExports.jsx("div",{className:"loanDetailsTitle",children:jsxRuntimeExports.jsxs("h1",{className:"PrivacyTitle ","data-aos":"fade-right",children:["3."," ",jsxRuntimeExports.jsx("span",{className:"titleName",children:"Cookies and How We Use Them"})]})}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:["A cookie is a small file of letters and numbers that we put on your computer if you agree.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," Cookies allow us to distinguish you from other users of our website and mobile applications, which helps us to provide you with an enhanced browsing experience. For example we use cookies for the following purposes: Recognising and counting the number of visitors and to see how visitors move around the site when they are using it (this helps us to improve the way our website works, for example by ensuring that users can find what they are looking for). ",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Identifying your preferences and subscriptions e.g. language settings and Sending you newsletters and commercial/advertising messages tailored to your interests.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," Our approved third parties may also set cookies when you use our website. Third parties include search engines, providers of measurement and analytics services, social media networks and advertising companies."]})]}),jsxRuntimeExports.jsxs("div",{className:"privacyTxts",children:[jsxRuntimeExports.jsx("div",{className:"privacyLine","data-aos":"fade-right"}),jsxRuntimeExports.jsx("div",{className:"loanDetailsTitle",children:jsxRuntimeExports.jsxs("h1",{className:"PrivacyTitle","data-aos":"fade-right",children:["4."," ",jsxRuntimeExports.jsx("span",{className:"titleName",children:"How We Use Your Personal Data"})]})}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:["We use your personal data to operate, provide, develop and improve the products and services that we offer, including the following: Managing your relationship with us. ",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Enabling you to participate in promotions, competitions and surveys. Improving our website, applications, products and services Recommending/advertising products or services which may be of interest to you.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," Complying with our legal obligations, including verifying your identity where necessary."]})]})]})]}),jsxRuntimeExports.jsx("img",{src:"/img/projects-blurbg.png",alt:"",className:"privacyBlurBg"}),jsxRuntimeExports.jsx("img",{src:"/img/privacy-rightbg.png",alt:"",className:"privacyrightBlurBg"})]})}),TermsAndConditions=()=>jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("section",{className:"heroSection4",children:[jsxRuntimeExports.jsxs("div",{className:"container",children:[jsxRuntimeExports.jsxs("div",{className:"heroArea4",children:[jsxRuntimeExports.jsxs("div",{className:"heroTxts4",children:[jsxRuntimeExports.jsx("h1",{className:"heroTitle4","data-aos":"fade-up","data-aos-easing":"ease-in-out","data-aos-once":"false",children:"Terms & Conditions"}),jsxRuntimeExports.jsxs("p",{className:"hero4para","data-aos":"fade-up","data-aos-easing":"ease-in-out","data-aos-once":"false",children:["NEED SUPPORT:"," ",jsxRuntimeExports.jsx("a",{href:"#",className:"egrEmailLink",children:"support@egochain.org"})]})]}),jsxRuntimeExports.jsx("div",{className:"hero-images4","data-aos":"fade-left",children:jsxRuntimeExports.jsx("img",{src:"/img/privacy-image.svg",alt:"",className:"privacy"})})]}),jsxRuntimeExports.jsxs("div",{className:"privacyTextList",children:[jsxRuntimeExports.jsx("span",{className:`privacyTextList_span
            `,children:"Last Date Updated 10 January 2024."}),jsxRuntimeExports.jsxs("div",{className:"privacyTxts",children:[jsxRuntimeExports.jsx("div",{className:"privacyLine","data-aos":"fade-right"}),jsxRuntimeExports.jsx("div",{className:"loanDetailsTitle",children:jsxRuntimeExports.jsx("h1",{className:"PrivacyTitle","data-aos":"fade-right",children:jsxRuntimeExports.jsx("span",{className:"titleName",children:"Introduction"})})}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 1. "})," Please read these terms of use carefully before you start to use the Website, these will apply to your use of the Website. We recommend that you print a copy of the Terms for future reference."]}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 2. "}),"The website",jsxRuntimeExports.jsxs("a",{href:"https://egochain.org",style:{color:"#229e54"},children:[" ","https://egochain.org"]})," ","is operated by egochain Technologies Limited (“egochain” “we” “our” or “us”) a limited liability company incorporated under the Nigerian Companies and Allied Matters Act with registration Number 1832671."]}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 3. "}),'"you" and "your" means a user of the website at'," ",jsxRuntimeExports.jsxs("a",{href:"https://egochain.org",style:{color:"#229e54"},children:[" ","https://egochain.org"]})," ",'(the "Website").']})]}),jsxRuntimeExports.jsxs("div",{className:"privacyTxts",children:[jsxRuntimeExports.jsx("div",{className:"privacyLine","data-aos":"fade-right"}),jsxRuntimeExports.jsx("div",{className:"loanDetailsTitle",children:jsxRuntimeExports.jsx("h1",{className:"PrivacyTitle","data-aos":"fade-right",children:jsxRuntimeExports.jsx("span",{className:"titleName",children:"Acceptance of Terms and Conditions"})})}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 4. "}),"By accessing or using www.egochain.org or any other website operated by us where these terms and conditions are posted, you acknowledge that you agree to and are subject to the following terms and conditions, as well as the Privacy Policy (collectively called “Terms”/“Agreement”). The Privacy Policy is available at",jsxRuntimeExports.jsxs("a",{href:"https://egochain.org/privacy",style:{color:"#229e54"},children:[" ","https://egochain.org/privacy"]})]}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 5. "}),"If you do not fully agree to these Terms, you are not authorized to access or otherwise use the website. Under these Terms, “use” or “access” of the website specifically includes any direct or indirect access or use of the website or any cached version of the website and any direct or indirect access or use of any information or content on the website, regardless of how it is obtained."]}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:"6. "}),"You are not authorized to use this website unless you are able to enter into legally binding contracts. We do not knowingly collect the information of anyone who cannot validly enter into a legally binding contract. In essence, by using our website, you represent and warrant that:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{className:"subordinate",children:" a."}),"You are at least 18 years old.",jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("span",{className:"subordinate",children:" b."}),"You have the right, authority and capacity to enter into this agreement and to abide by the terms and conditions of these Terms, and that you will so abide. Where you enter into this agreement on behalf of a company or other organization, you represent and warrant that you have authority to act on behalf of that entity and to bind that entity to this agreement."]})]}),jsxRuntimeExports.jsxs("div",{className:"privacyTxts",children:[jsxRuntimeExports.jsx("div",{className:"privacyLine","data-aos":"fade-right"}),jsxRuntimeExports.jsx("div",{className:"loanDetailsTitle",children:jsxRuntimeExports.jsx("h1",{className:"PrivacyTitle ","data-aos":"fade-right",children:jsxRuntimeExports.jsx("span",{className:"titleName",children:"Disclaimer"})})}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 7. "}),"We do not guarantee that our Website, or any content on them, will always be available or be uninterrupted. Access to our Website is permitted on a temporary basis. We may suspend, withdraw, discontinue or change all or any part of our Website without notice. We will not be liable to you if for any reason our Website is unavailable at any time or for any period. You are responsible for making all arrangements necessary for you to have access to our Website."]}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 8. "}),"It is your responsibility to ensure that the Website is suitable for your intended purposes. We accept no liability as to the suitability or fitness of the Website in meeting your needs."]}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 9. "}),"We do not guarantee that the Website or the computer server from which the Website are made available, are free of viruses or other harmful components;"]}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 10. "}),"We do not guarantee the accuracy, content, timeliness, completeness, reliability, quality or suitability of any content contained in the Website or otherwise made available in connection with the Website."]}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 11. "}),"We will not be responsible to you or any third party for any business loss (including loss of profits, revenue, contracts, anticipated savings, data, goodwill or wasted expenditure) or any indirect or consequential loss in connection with your use of the Website."]}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 12. "}),"You acknowledge and agree that the operation of the Website is dependent upon the proper and effective functioning of the internet and other third party equipment and services, and that we do not guarantee and will not be liable for these in any way."]})]}),jsxRuntimeExports.jsxs("div",{className:"privacyTxts",children:[jsxRuntimeExports.jsx("div",{className:"privacyLine","data-aos":"fade-right"}),jsxRuntimeExports.jsx("div",{className:"loanDetailsTitle",children:jsxRuntimeExports.jsx("h1",{className:"PrivacyTitle","data-aos":"fade-right",children:jsxRuntimeExports.jsx("span",{className:"titleName",children:"Obligations of Users"})})}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 13. "}),"You must not",jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{className:"subordinate",children:" a."})," provide any false information relating to you or your property.",jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{className:"subordinate",children:" b."})," Use the website in any unlawful manner, for any unlawful purpose, or in any manner inconsistent with this Agreement, or act fraudulently or maliciously, for example, by hacking into or inserting malicious code, including viruses, or harmful data, into the website.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("span",{className:"subordinate",children:" c."}),"infringe our intellectual property rights or those of any third party in relation to your use of the website.",jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{className:"subordinate",children:" d."}),"Attempt any unauthorised access to any part or component of the Website.",jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("span",{className:"subordinate",children:" e."}),"use the website in a way that could damage, disable, overburden, impair or compromise our System or security or interfere with other users;",jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("span",{className:"subordinate",children:" f."}),"Collect or harvest any information or data from our systems or attempt to decipher any transmissions to or from the servers running any system.",jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("span",{className:"subordinate",children:" g."}),"Use the Website or access to it to impersonate any person or entity, or to falsely state or otherwise misrepresent its affiliation with any person or entity;",jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("span",{className:"subordinate",children:" h."}),"Restrict or inhibit the ability of any other person to access or use the Website; and",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{})," ",jsxRuntimeExports.jsx("span",{className:"subordinate",children:" i."}),"Modify, adapt or translate any portion of the Website"]}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 14. "}),"You are also responsible for ensuring that any persons with access to our Website through your internet connection are aware of these terms of use and the other applicable terms and conditions listed above, and that they comply with them. Our Website are made available free of charge."]})]}),jsxRuntimeExports.jsxs("div",{className:"privacyTxts",children:[jsxRuntimeExports.jsx("div",{className:"privacyLine","data-aos":"fade-right"}),jsxRuntimeExports.jsx("div",{className:"loanDetailsTitle",children:jsxRuntimeExports.jsx("h1",{className:"PrivacyTitle","data-aos":"fade-right",children:jsxRuntimeExports.jsx("span",{className:"titleName",children:"Personal Information"})})}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 15. "}),'To meet our Know Your Customer (“KYC”) and Anti-Money Laundering (“AML”) obligations, we may require you to provide any or all the following: your full name; your date of birth; your Bank Verification Number ("BVN"); your current residential address; your picture; Copy of a valid Government issued ID (national ID, international passport, permanent voter’s card or driver’s license); copy of recent utility bill, bank statement, affidavit, or another bill, dated within three months of our request, which carries your name and address; any other information or document as we may require for our internal risk assessment.']}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 16. "}),"You warrant that all information and documentation provided to us are true, correct, and accurate. You also undertake to notify us of any changes to the information or documentation which you have provided."]}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 17. "}),"You hereby agree and authorise egochain to verify information provided by you against the information held by any third party (including official databases) such as, banks, Payment System Providers any other information bank available to egochain."]}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 18. "}),"The information that egochain may verify against the information which you have provided to us include (without limitation): your name, phone number, date of birth, address, age, Identification Number (“ID”) or Passport Number and such other information that will enable egochain to identify you and comply with the regulatory “Know Your Customer” requirements (together the “Personal Information”)."]}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 19. "}),"You hereby consent to egochain verifying the Personal Information and the Relevant Information and using the Personal Information and the Relevant Information to the extent necessary in egochain’s opinion for the provision of its Services."]}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 20. "}),"You agree to indentify and hold egochain and the Third Party Partners harmless with respect to any claims, losses, liabilities and expenses (including legal fees and expenses) that may arise as a result of the disclosure and reliance on such Personal Information and/or Relevant Information."]})]}),jsxRuntimeExports.jsxs("div",{className:"privacyTxts",children:[jsxRuntimeExports.jsx("div",{className:"privacyLine","data-aos":"fade-right"}),jsxRuntimeExports.jsx("div",{className:"loanDetailsTitle",children:jsxRuntimeExports.jsx("h1",{className:"PrivacyTitle","data-aos":"fade-right",children:jsxRuntimeExports.jsx("span",{className:"titleName",children:"Consent to Data Collection"})})}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 21. "}),"By using our Services, you consent to us collecting and using technical information about the Equipment and related software, hardware and peripherals for Services that are internet-based or wireless to improve our products and to provide any Services to you. If you use these Services, you consent to us and our affiliates' and partners’ transmission, collection, retention, maintenance, processing and use of your data to improve our Services and/or your experience while using egochain."]})]}),jsxRuntimeExports.jsxs("div",{className:"privacyTxts",children:[jsxRuntimeExports.jsx("div",{className:"privacyLine","data-aos":"fade-right"}),jsxRuntimeExports.jsx("div",{className:"loanDetailsTitle",children:jsxRuntimeExports.jsx("h1",{className:"PrivacyTitle","data-aos":"fade-right",children:jsxRuntimeExports.jsx("span",{className:"titleName",children:"Intellectual Property Rights."})})}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 22. "}),"The intellectual property rights in the Website and copyright in all material stored, displayed and accessible on the Website is either owned us or duly licensed by third parties. All such rights are reserved."]})]}),jsxRuntimeExports.jsxs("div",{className:"privacyTxts",children:[jsxRuntimeExports.jsx("div",{className:"privacyLine","data-aos":"fade-right"}),jsxRuntimeExports.jsx("div",{className:"loanDetailsTitle",children:jsxRuntimeExports.jsx("h1",{className:"PrivacyTitle","data-aos":"fade-right",children:jsxRuntimeExports.jsx("span",{className:"titleName",children:"Governing Law and Dispute Resolution"})})}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 23. "}),"This website is subject to the laws and regulations of Nigeria. You irrevocably agree that any dispute between you and egochain will be governed by the laws of Nigeria and any cause of action you may have hereunder or with respect to your use of the website must be commenced by resort to an arbitration in accordance with Arbitration and Conciliation Act Cap A18 Laws of the Federation of Nigeria 2004"]}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 24. "}),"You also agree and consent that any cause of action you may submit in connection with your use of the website or pursuant to these terms will be filed within six months after the incident upon which the claim or cause of action is based first occurred"]}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 25. "}),'You and egochain agree to bring any Dispute in arbitration on an individual basis only, and not as a class or collective action. There will be no right or authority for any Dispute to be brought, heard or arbitrated as a class or collective action ("Class Action Waiver"). Regardless of anything else in this Arbitration Agreement and/or the applicable Arbitration Rules, the interpretation, applicability, enforceability or formation of the Class Action Waiver may only be determined by a court and not an arbitrator.']})]}),jsxRuntimeExports.jsxs("div",{className:"privacyTxts",children:[jsxRuntimeExports.jsx("div",{className:"privacyLine","data-aos":"fade-right"}),jsxRuntimeExports.jsx("div",{className:"loanDetailsTitle",children:jsxRuntimeExports.jsx("h1",{className:"PrivacyTitle","data-aos":"fade-right",children:jsxRuntimeExports.jsx("span",{className:"titleName",children:"Amendment to the Terms"})})}),jsxRuntimeExports.jsxs("p",{className:"AboutUsPara","data-aos":"fade-right",children:[jsxRuntimeExports.jsx("span",{className:"PrivacyTitle",children:" 26. "}),"We reserve the right, at our sole and absolutes discretion, to change, modify, add to, supplement or delete any of the terms and conditions of this Agreement at any time, effective with or without prior notice. If any future changes to this Agreement are unacceptable to you or cause you to no longer be in compliance with this Agreement, you must terminate, and immediately stop using, the website. Your continued use of the website following any revision to this Agreement constitutes your complete and irrevocable acceptance of any and all such changes. Please check this page from time to time to take notice of any changes we made, as they are binding on you."]})]})]})]}),jsxRuntimeExports.jsx("img",{src:"/img/projects-blurbg.png",alt:"",className:"privacyBlurBg"}),jsxRuntimeExports.jsx("img",{src:"/img/privacy-rightbg.png",alt:"",className:"privacyrightBlurBg"})]})});function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var i=arguments[a];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose$1(e,a){if(e==null)return{};var i={},o=Object.keys(e),c,d;for(d=0;d<o.length;d++)c=o[d],!(a.indexOf(c)>=0)&&(i[c]=e[c]);return i}const PRE_ENTER=0,ENTERING=1,ENTERED=2,PRE_EXIT=3,EXITING=4,EXITED=5,UNMOUNTED=6,STATUS=["preEnter","entering","entered","preExit","exiting","exited","unmounted"],getState=e=>({_s:e,status:STATUS[e],isEnter:e<PRE_EXIT,isMounted:e!==UNMOUNTED,isResolved:e===ENTERED||e>EXITING}),startOrEnd=e=>e?UNMOUNTED:EXITED,getEndStatus=(e,a)=>{switch(e){case ENTERING:case PRE_ENTER:return ENTERED;case EXITING:case PRE_EXIT:return startOrEnd(a)}},getTimeout=e=>typeof e=="object"?[e.enter,e.exit]:[e,e],nextTick=(e,a)=>setTimeout(()=>{isNaN(document.body.offsetTop)||e(a+1)},0),initialStateMap=new Map,initialConfigMap=new Map,updateState=(e,a,i,o,c,d)=>{clearTimeout(c);const g=getState(a),b=new Map(o.current);b.set(e,g),i(b),o.current=b,d&&d({key:e,current:g})},useTransitionMap=({allowMultiple:e,enter:a=!0,exit:i=!0,preEnter:o,preExit:c,timeout:d,initialEntered:g,mountOnEnter:b,unmountOnExit:j,onStateChange:$}={})=>{const[rt,_e]=reactExports$1.useState(initialStateMap),st=reactExports$1.useRef(rt),ut=reactExports$1.useRef(initialConfigMap),[gt,yt]=getTimeout(d),Pt=reactExports$1.useCallback((kt,It)=>{const{initialEntered:Lt=g}=It||{},Ft=Lt?ENTERED:startOrEnd(b);updateState(kt,Ft,_e,st),ut.current.set(kt,{})},[g,b]),wt=reactExports$1.useCallback(kt=>{const It=new Map(st.current);return It.delete(kt)?(_e(It),st.current=It,ut.current.delete(kt),!0):!1},[]),Ct=reactExports$1.useCallback(kt=>{const It=st.current.get(kt);if(!It)return;const{timeoutId:Lt}=ut.current.get(kt),Ft=getEndStatus(It._s,j);Ft&&updateState(kt,Ft,_e,st,Lt,$)},[$,j]),At=reactExports$1.useCallback((kt,It)=>{const Lt=st.current.get(kt);if(!Lt)return;const Ft=ut.current.get(kt),Nt=Gr=>{switch(updateState(kt,Gr,_e,st,Ft.timeoutId,$),Gr){case ENTERING:gt>=0&&(Ft.timeoutId=setTimeout(()=>Ct(kt),gt));break;case EXITING:yt>=0&&(Ft.timeoutId=setTimeout(()=>Ct(kt),yt));break;case PRE_ENTER:case PRE_EXIT:Ft.timeoutId=nextTick(Nt,Gr);break}},Ht=Lt.isEnter;typeof It!="boolean"&&(It=!Ht),It?Ht||(Nt(a?o?PRE_ENTER:ENTERING:ENTERED),!e&&st.current.forEach((Gr,hs)=>hs!==kt&&At(hs,!1))):Ht&&Nt(i?c?PRE_EXIT:EXITING:startOrEnd(j))},[$,Ct,e,a,i,o,c,gt,yt,j]),Tt=reactExports$1.useCallback(kt=>{if(!(!e&&kt!==!1))for(const It of st.current.keys())At(It,kt)},[e,At]);return{stateMap:rt,toggle:At,toggleAll:Tt,endTransition:Ct,setItem:Pt,deleteItem:wt}},_excluded$6=["transition","transitionTimeout"],getTransition=(e,a)=>e===!0||!!(e&&e[a]),useAccordionProvider=(e={})=>{let{transition:a,transitionTimeout:i}=e,o=_objectWithoutPropertiesLoose$1(e,_excluded$6);const c=useTransitionMap(_extends({timeout:i,enter:getTransition(a,"enter"),exit:getTransition(a,"exit"),preEnter:getTransition(a,"preEnter"),preExit:getTransition(a,"preExit")},o));return _extends({mountOnEnter:!!o.mountOnEnter,initialEntered:!!o.initialEntered},c)},ACCORDION_BLOCK="szh-accordion",ACCORDION_PREFIX="szh-adn",ACCORDION_ATTR=`data-${ACCORDION_PREFIX}`,ACCORDION_BTN_ATTR=`data-${ACCORDION_PREFIX}-btn`,AccordionContext=reactExports$1.createContext({}),bem=(e,a,i)=>(o,c)=>{const d=a?`${e}__${a}`:e;let g=d;i&&Object.keys(i).forEach(j=>{const $=i[j];$&&(g+=` ${d}--${$===!0?j:`${j}-${$}`}`)});let b=typeof o=="function"?o(c):o;return typeof b=="string"&&(b=b.trim(),b&&(g+=` ${b}`)),g},mergeProps=(e,a)=>{if(!a)return e;const i=_extends({},e);return Object.keys(a).forEach(o=>{const c=e[o],d=a[o];typeof d=="function"&&c?i[o]=(...g)=>{c(...g),d(...g)}:i[o]=d}),i},AccordionProvider=e=>jsxRuntimeExports.jsx(AccordionContext.Provider,_extends({},e)),getAccordion=e=>{do e=e.parentElement;while(e&&!e.hasAttribute(ACCORDION_ATTR));return e},getNextIndex=(e,a,i)=>e?a>0?a-1:i-1:(a+1)%i,moveFocus=(e,a)=>{const{activeElement:i}=document;if(!i||!i.hasAttribute(ACCORDION_BTN_ATTR)||getAccordion(i)!==a.currentTarget)return;const o=a.currentTarget.querySelectorAll(`[${ACCORDION_BTN_ATTR}]`),{length:c}=o;for(let d=0;d<c;d++)if(o[d]===i){let g=getNextIndex(e,d,c);for(;getAccordion(o[d])!==getAccordion(o[g]);)g=getNextIndex(e,g,c);d!==g&&(a.preventDefault(),o[g].focus());break}},useAccordion=()=>({accordionProps:{[ACCORDION_ATTR]:"",onKeyDown:a=>a.key==="ArrowUp"?moveFocus(!0,a):a.key==="ArrowDown"&&moveFocus(!1,a)}}),_excluded$5=["providerValue","className"],ControlledAccordion=reactExports$1.forwardRef((e,a)=>{let{providerValue:i,className:o}=e,c=_objectWithoutPropertiesLoose$1(e,_excluded$5);const{accordionProps:d}=useAccordion();return jsxRuntimeExports.jsx(AccordionProvider,{value:i,children:jsxRuntimeExports.jsx("div",_extends({},mergeProps(d,c),{ref:a,className:bem(ACCORDION_BLOCK)(o)}))})});ControlledAccordion.displayName="ControlledAccordion";const _excluded$4=["allowMultiple","initialEntered","mountOnEnter","unmountOnExit","transition","transitionTimeout","onStateChange"],Accordion=reactExports$1.forwardRef((e,a)=>{let{allowMultiple:i,initialEntered:o,mountOnEnter:c,unmountOnExit:d,transition:g,transitionTimeout:b,onStateChange:j}=e,$=_objectWithoutPropertiesLoose$1(e,_excluded$4);const rt=useAccordionProvider({allowMultiple:i,initialEntered:o,mountOnEnter:c,unmountOnExit:d,transition:g,transitionTimeout:b,onStateChange:j});return jsxRuntimeExports.jsx(ControlledAccordion,_extends({},$,{ref:a,providerValue:rt}))});Accordion.displayName="Accordion";let current=0;const useIdShim=()=>{const[e,a]=reactExports$1.useState();return reactExports$1.useEffect(()=>a(++current),[]),e&&`${ACCORDION_PREFIX}-${e}`},useId=React$1.useId||useIdShim,useAccordionItem=({state:e,toggle:a,disabled:i})=>{const o=useId(),c=o&&o+"-",d={id:o,"aria-controls":c,"aria-expanded":e.isEnter,onClick:a};return i?d.disabled=!0:d[ACCORDION_BTN_ATTR]="",{buttonProps:d,panelProps:{id:c,"aria-labelledby":o,role:"region"}}},useIsomorphicLayoutEffect=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?reactExports$1.useLayoutEffect:reactExports$1.useEffect,useHeightTransition=({status:e,isResolved:a})=>{const[i,o]=reactExports$1.useState(),c=reactExports$1.useRef(null);return useIsomorphicLayoutEffect(()=>{(e==="preEnter"||e==="preExit")&&o(c.current.getBoundingClientRect().height)},[e]),[{height:e==="preEnter"||e==="exiting"?0:e==="entering"||e==="preExit"?i:void 0,overflow:a?void 0:"hidden"},c]};function setRef(e,a){typeof e=="function"?e(a):e.current=a}function useMergeRef(e,a){return reactExports$1.useMemo(()=>e?a?i=>{setRef(e,i),setRef(a,i)}:e:a,[e,a])}const getItemState=(e,a,i)=>{const{stateMap:o,mountOnEnter:c,initialEntered:d}=e,g=i??d;return o.get(a)||{status:g?"entered":c?"unmounted":"exited",isMounted:!c,isEnter:g,isResolved:!0}},useAccordionContext=()=>reactExports$1.useContext(AccordionContext),useAccordionItemEffect=({itemKey:e,initialEntered:a,disabled:i}={})=>{const o=reactExports$1.useRef(null),c=useAccordionContext(),d=e??o.current,g=getItemState(c,d,a),{setItem:b,deleteItem:j,toggle:$}=c;return reactExports$1.useEffect(()=>{if(i)return;const rt=e??o.current;return b(rt,{initialEntered:a}),()=>void j(rt)},[b,j,e,a,i]),{itemRef:o,state:g,toggle:reactExports$1.useCallback(rt=>$(d,rt),[$,d])}},_excluded$3=["itemKey","initialEntered"],withAccordionItem=e=>{const a=reactExports$1.forwardRef((i,o)=>{let{itemKey:c,initialEntered:d}=i,g=_objectWithoutPropertiesLoose$1(i,_excluded$3);return jsxRuntimeExports.jsx(e,_extends({forwardedRef:o},g,useAccordionItemEffect({itemKey:c,initialEntered:d,disabled:g.disabled})))});return a.displayName="WithAccordionItem",a},_excluded$2=["forwardedRef","itemRef","state","toggle","className","disabled","header","headingTag","headingProps","buttonProps","contentProps","panelProps","children"],getRenderNode=(e,a)=>typeof e=="function"?e(a):e,WrappedItem=reactExports$1.memo(e=>{let{forwardedRef:a,itemRef:i,state:o,toggle:c,className:d,disabled:g,header:b,headingTag:j="h3",headingProps:$,buttonProps:rt,contentProps:_e,panelProps:st,children:ut}=e,gt=_objectWithoutPropertiesLoose$1(e,_excluded$2);const yt={state:o,toggle:c,disabled:g},{buttonProps:Pt,panelProps:wt}=useAccordionItem(yt),[Ct,At]=useHeightTransition(o),Tt=useMergeRef(st&&st.ref,At),{status:kt,isMounted:It,isEnter:Lt}=o;return jsxRuntimeExports.jsxs("div",_extends({},gt,{ref:useMergeRef(a,i),className:bem(ACCORDION_BLOCK,"item",{status:kt,expanded:Lt})(d,o),children:[jsxRuntimeExports.jsx(j,_extends({},$,{style:_extends({margin:0},$&&$.style),className:bem(ACCORDION_BLOCK,"item-heading")($&&$.className,o),children:jsxRuntimeExports.jsx("button",_extends({},mergeProps(Pt,rt),{type:"button",className:bem(ACCORDION_BLOCK,"item-btn")(rt&&rt.className,o),children:getRenderNode(b,yt)}))})),It&&jsxRuntimeExports.jsx("div",_extends({},_e,{style:_extends({display:kt==="exited"?"none":void 0},Ct,_e&&_e.style),className:bem(ACCORDION_BLOCK,"item-content")(_e&&_e.className,o),children:jsxRuntimeExports.jsx("div",_extends({},mergeProps(wt,st),{ref:Tt,className:bem(ACCORDION_BLOCK,"item-panel")(st&&st.className,o),children:getRenderNode(ut,yt)}))}))]}))});WrappedItem.displayName="AccordionItem";const AccordionItem$1=withAccordionItem(WrappedItem),chevronDown="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20class='icon%20icon-tabler%20icon-tabler-chevron-down'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20stroke-width='2'%20stroke='%23fff'%20fill='none'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3cpath%20stroke='none'%20d='M0%200h24v24H0z'%20fill='none'/%3e%3cpolyline%20points='6%209%2012%2015%2018%209'%20/%3e%3c/svg%3e",list="_list_afula_5",info="_info_afula_9",accordion="_accordion_afula_16",item="_item_afula_21",itemBtn="_itemBtn_afula_25",itemBtnExpanded="_itemBtnExpanded_afula_43",itemContent="_itemContent_afula_47",itemPanel="_itemPanel_afula_51",chevron="_chevron_afula_55",styles={list,info,accordion,item,itemBtn,itemBtnExpanded,itemContent,itemPanel,chevron},AccordionItem=({header:e,...a})=>jsxRuntimeExports.jsx(AccordionItem$1,{...a,header:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[e,jsxRuntimeExports.jsx("img",{className:styles.chevron,src:chevronDown,alt:"Chevron Down"})]}),className:styles.item,buttonProps:{className:({isEnter:i})=>`${styles.itemBtn} ${i&&styles.itemBtnExpanded}`},contentProps:{className:styles.itemContent},panelProps:{className:styles.itemPanel}}),WhitePaper=()=>{const[e,a]=reactExports$1.useState(null);return reactExports$1.useEffect(()=>{const i=document.getElementById("content"),o=()=>{const c=i.scrollTop;document.querySelectorAll(".whitePaper_div_area_body_area_section").forEach(g=>{const b=g.getAttribute("id"),j=g.offsetTop-50;c>=j&&a(b)})};return i.addEventListener("scroll",o),()=>{i.removeEventListener("scroll",o)}},[]),jsxRuntimeExports.jsxs("div",{className:"whitepaper_div",children:[jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsxs("div",{className:"whitePaper_div_area_body",children:[jsxRuntimeExports.jsxs("div",{className:"whitePaper_div_area_body_side",id:"sidebar",children:[jsxRuntimeExports.jsx("div",{className:e==="abstract"?"active":" whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#abstract",children:"Abstract"})}),jsxRuntimeExports.jsx("div",{className:e==="introduction"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#introduction",children:"Introduction"})}),jsxRuntimeExports.jsx("div",{className:e==="Production of affordable EVs"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Production of affordable EVs",children:"Production of affordable EVs"})}),jsxRuntimeExports.jsx("div",{className:e==="Streamlining Manufacturing and Boosting Accessibility"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Streamlining Manufacturing and Boosting Accessibility",children:"Streamlining Manufacturing and Boosting Accessibility"})}),jsxRuntimeExports.jsx("div",{className:e==="Benefits Beyond Cost Savings"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#in-mcd-we-trust",children:"Benefits Beyond Cost Savings"})}),jsxRuntimeExports.jsx("div",{className:e==="Charging costs & Improved charging infrastructure"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Charging costs & Improved charging infrastructure",children:"Charging costs & Improved charging infrastructure"})}),jsxRuntimeExports.jsx("div",{className:e==="Transparency, Efficiency, and Incentives"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Transparency, Efficiency, and Incentives",children:"Transparency, Efficiency, and Incentives"})}),jsxRuntimeExports.jsx("div",{className:e==="Earning Rewards in the Egochain Ecosystem: Pathways to Participation"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Earning Rewards in the Egochain Ecosystem: Pathways to Participation",children:"Earning Rewards in the Egochain Ecosystem: Pathways to Participation"})}),jsxRuntimeExports.jsx("div",{className:e==="Fueling Growth Through Rewards"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Fueling Growth Through Rewards",children:"Fueling Growth Through Rewards"})}),jsxRuntimeExports.jsx("div",{className:e==="Earning with Vesting and Liquid Ownership"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Earning with Vesting and Liquid Ownership",children:"Earning with Vesting and Liquid Ownership"})}),jsxRuntimeExports.jsx("div",{className:e==="The Egochain Coin (EGAX)"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#The Egochain Coin (EGAX)",children:"The Egochain Coin (EGAX)"})}),jsxRuntimeExports.jsx("div",{className:e==="The EGC Coin (EGC)"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#The EGC Coin (EGC)",children:"The EGC Coin (EGC)"})}),jsxRuntimeExports.jsx("div",{className:e==="Smart Electric Vehicles"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Smart Electric Vehicles",children:"Smart Electric Vehicles"})}),jsxRuntimeExports.jsx("div",{className:e==="Tokenization"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Tokenization",children:"Tokenization"})}),jsxRuntimeExports.jsx("div",{className:e==="Unlocking Value Through Collateralization"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Unlocking Value Through Collateralization",children:"Unlocking Value Through Collateralization"})}),jsxRuntimeExports.jsx("div",{className:e==="Enhancing Transparency, Empowering Lending"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Enhancing Transparency, Empowering Lending",children:"Enhancing Transparency, Empowering Lending"})}),jsxRuntimeExports.jsx("div",{className:e==="Beyond Redefining Ownership"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Beyond Redefining Ownership",children:"Beyond Redefining Ownership"})}),jsxRuntimeExports.jsx("div",{className:e==="Distributing Egax Coin"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Distributing Egax Coin",children:"Distributing Egax Coin"})}),jsxRuntimeExports.jsx("div",{className:e==="Electric Vehicle Smart Charging System"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Electric Vehicle Smart Charging System",children:"Electric Vehicle Smart Charging System"})}),jsxRuntimeExports.jsx("div",{className:e==="Smart Charging Architecture"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Smart Charging Architecture",children:"Smart Charging Architecture"})}),jsxRuntimeExports.jsx("div",{className:e==="Charging Algorithm and Flexibility Offers"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Charging Algorithm and Flexibility Offers",children:"Charging Algorithm and Flexibility Offers"})}),jsxRuntimeExports.jsx("div",{className:e==="Determining Electric Vehicle (EV) Flexibility for Next Time Step"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Determining Electric Vehicle (EV) Flexibility for Next Time Step",children:"Determining Electric Vehicle (EV) Flexibility for Next Time Step"})}),jsxRuntimeExports.jsx("div",{className:e==="Decentralized Secure Charging with Egochain"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Decentralized Secure Charging with Egochain",children:"Decentralized Secure Charging with Egochain"})}),jsxRuntimeExports.jsx("div",{className:e==="Simulation Parameters"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Simulation Parameters",children:"Simulation Parameters"})}),jsxRuntimeExports.jsx("div",{className:e==="Dynamic Charging Model Based on User Activity"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Dynamic Charging Model Based on User Activity",children:"Dynamic Charging Model Based on User Activity"})}),jsxRuntimeExports.jsx("div",{className:e==="Simulation Scenarios and Methodology"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Simulation Scenarios and Methodology",children:"Simulation Scenarios and Methodology"})}),jsxRuntimeExports.jsx("div",{className:e==="Results and Discussion"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Results and Discussion",children:"Results and Discussion"})}),jsxRuntimeExports.jsx("div",{className:e==="Conclusion"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Conclusion",children:"Conclusion"})})]}),jsxRuntimeExports.jsx("div",{className:"mobile_header",children:jsxRuntimeExports.jsx("div",{className:"mobile_header_area",children:jsxRuntimeExports.jsx(Accordion,{children:jsxRuntimeExports.jsxs(AccordionItem,{header:"Menu ",children:[jsxRuntimeExports.jsxs("div",{className:"mobile_header_links_area",children:[jsxRuntimeExports.jsx("div",{className:e==="abstract"?"active":" whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#abstract",children:"Abstract"})}),jsxRuntimeExports.jsx("div",{className:e==="introduction"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#introduction",children:"Introduction"})}),jsxRuntimeExports.jsx("div",{className:e==="Production of affordable EVs"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Production of affordable EVs",children:"Production of affordable EVs"})}),jsxRuntimeExports.jsx("div",{className:e==="Streamlining Manufacturing and Boosting Accessibility"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Streamlining Manufacturing and Boosting Accessibility",children:"Streamlining Manufacturing and Boosting Accessibility"})}),jsxRuntimeExports.jsx("div",{className:e==="Benefits Beyond Cost Savings"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#in-mcd-we-trust",children:"Benefits Beyond Cost Savings"})}),jsxRuntimeExports.jsx("div",{className:e==="Charging costs & Improved charging infrastructure"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Charging costs & Improved charging infrastructure",children:"Charging costs & Improved charging infrastructure"})}),jsxRuntimeExports.jsx("div",{className:e==="Transparency, Efficiency, and Incentives"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Transparency, Efficiency, and Incentives",children:"Transparency, Efficiency, and Incentives"})}),jsxRuntimeExports.jsx("div",{className:e==="Earning Rewards in the Egochain Ecosystem: Pathways to Participation"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Earning Rewards in the Egochain Ecosystem: Pathways to Participation",children:"Earning Rewards in the Egochain Ecosystem: Pathways to Participation"})}),jsxRuntimeExports.jsx("div",{className:e==="Fueling Growth Through Rewards"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Fueling Growth Through Rewards",children:"Fueling Growth Through Rewards"})}),jsxRuntimeExports.jsx("div",{className:e==="Earning with Vesting and Liquid Ownership"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Earning with Vesting and Liquid Ownership",children:"Earning with Vesting and Liquid Ownership"})}),jsxRuntimeExports.jsx("div",{className:e==="The Egochain Coin (EGAX)"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#The Egochain Coin (EGAX)",children:"The Egochain Coin (EGAX)"})}),jsxRuntimeExports.jsx("div",{className:e==="The EGC Coin (EGC)"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#The EGC Coin (EGC)",children:"The EGC Coin (EGC)"})}),jsxRuntimeExports.jsx("div",{className:e==="Smart Electric Vehicles"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Smart Electric Vehicles",children:"Smart Electric Vehicles"})}),jsxRuntimeExports.jsx("div",{className:e==="Tokenization"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Tokenization",children:"Tokenization"})}),jsxRuntimeExports.jsx("div",{className:e==="Unlocking Value Through Collateralization"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Unlocking Value Through Collateralization",children:"Unlocking Value Through Collateralization"})}),jsxRuntimeExports.jsx("div",{className:e==="Enhancing Transparency, Empowering Lending"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Enhancing Transparency, Empowering Lending",children:"Enhancing Transparency, Empowering Lending"})}),jsxRuntimeExports.jsx("div",{className:e==="Beyond Redefining Ownership"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Beyond Redefining Ownership",children:"Beyond Redefining Ownership"})}),jsxRuntimeExports.jsx("div",{className:e==="Distributing Egax Coin"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Distributing Egax Coin",children:"Distributing Egax Coin"})}),jsxRuntimeExports.jsx("div",{className:e==="Electric Vehicle Smart Charging System"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Electric Vehicle Smart Charging System",children:"Electric Vehicle Smart Charging System"})}),jsxRuntimeExports.jsx("div",{className:e==="Smart Charging Architecture"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Smart Charging Architecture",children:"Smart Charging Architecture"})}),jsxRuntimeExports.jsx("div",{className:e==="Charging Algorithm and Flexibility Offers"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Charging Algorithm and Flexibility Offers",children:"Charging Algorithm and Flexibility Offers"})}),jsxRuntimeExports.jsx("div",{className:e==="Determining Electric Vehicle (EV) Flexibility for Next Time Step"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Determining Electric Vehicle (EV) Flexibility for Next Time Step",children:"Determining Electric Vehicle (EV) Flexibility for Next Time Step"})}),jsxRuntimeExports.jsx("div",{className:e==="Decentralized Secure Charging with Egochain"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Decentralized Secure Charging with Egochain",children:"Decentralized Secure Charging with Egochain"})}),jsxRuntimeExports.jsx("div",{className:e==="Simulation Parameters"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Simulation Parameters",children:"Simulation Parameters"})}),jsxRuntimeExports.jsx("div",{className:e==="Dynamic Charging Model Based on User Activity"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Dynamic Charging Model Based on User Activity",children:"Dynamic Charging Model Based on User Activity"})}),jsxRuntimeExports.jsx("div",{className:e==="Simulation Scenarios and Methodology"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Simulation Scenarios and Methodology",children:"Simulation Scenarios and Methodology"})}),jsxRuntimeExports.jsx("div",{className:e==="Results and Discussion"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Results and Discussion",children:"Results and Discussion"})}),jsxRuntimeExports.jsx("div",{className:e==="Conclusion"?"active":"whitePaper_div_area_body_side_list",children:jsxRuntimeExports.jsx("a",{href:"#Conclusion",children:"Conclusion"})})]})," "]})})})}),jsxRuntimeExports.jsxs("div",{className:"whitePaper_div_area_body_area",id:"content",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_title",children:"Egochain: Incentivized Operating System for Electric Vehicles Powered by Blockchain Technology."}),jsxRuntimeExports.jsxs("section",{id:"abstract",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Abstract"})," ","Electric vehicles (EVs) offer a promising path towards sustainable transportation, widespread adoption remains hindered by high price points, underdeveloped charging infrastructure, and prohibitive charging costs. This whitepaper proposes Egochain, a blockchain-based solution designed to ignite a global EV revolution by overcoming these key barriers."]}),jsxRuntimeExports.jsxs("section",{id:"introduction",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Introduction"})," ","The undeniable force of transportation in our daily lives confronts us with a stark reality: change, however necessary, often faces an uphill battle against established social norms. Despite growing awareness of Electric Vehicles (EVs), only a fraction of the global population (less than 30%) has firsthand experience with this burgeoning technology. Yet, EVs are poised to redefine our relationship with transportation, with their global market share projected to leap from 16% in 2022 to 20% by 2023 (considering only battery electric and plug-in hybrid EVs).",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"While EV adoption is accelerating, cost remains a crucial obstacle. Soaring gasoline prices provide a compelling incentive, but high vehicle costs, underdeveloped charging infrastructure, and prohibitively expensive charging fees act as roadblocks to widespread adoption.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"This is where Egochain steps in, armed with the transformative power of blockchain technology.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Egochain envisions a future where EVs are not just a novelty, but a readily accessible and affordable transportation option for all. Our blockchain platform unlocks these possibilities through:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("li",{children:"Production of affordable EVs: By enhancing transparency and efficiency, Egochain can optimize EV manufacturing processes, driving down costs and fostering wider production of affordable electric vehicles."}),jsxRuntimeExports.jsx("li",{children:"Reduced charging costs: The secure and decentralized nature of the blockchain enables more efficient development and management of charging stations, resulting in lower charging fees for drivers."}),jsxRuntimeExports.jsx("li",{children:"Profitable charging infrastructure: Egochain offers attractive rewards and simplifies operations for those wishing to invest in charging stations, rapidly expanding access to vital charging points."})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Egochain goes beyond merely acknowledging the barriers to EV adoption. It provides a comprehensive solution, leveraging the power of blockchain to break down these hurdles and pave the way for a more sustainable and accessible transportation future."]}),jsxRuntimeExports.jsxs("section",{id:"Production of affordable EVs",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Production of affordable EVs"})," ","The electric vehicle (EV) industry faces a significant hurdle: cost. EVs generally carry a higher price tag than their gasoline-powered counterparts, primarily due to battery technology. These batteries require costly raw materials and substantial capacity to meet range expectations, driving up overall costs. Even excluding battery expenses, the sheer abundance of existing gas-powered vehicles pushes their prices down further, widening the affordability gap. While EVs often boast lower operating costs in the long run, the initial purchase barrier remains a formidable obstacle, particularly for budget-conscious consumers in developing economies.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Chart",jsxRuntimeExports.jsx("img",{src:"/img/ev_purchase_chart_reason.svg",alt:""})," "]}),jsxRuntimeExports.jsxs("section",{id:"Streamlining Manufacturing and Boosting Accessibility",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Streamlining Manufacturing and Boosting Accessibility"})," ","Egochain's transparent and efficient blockchain technology offers a solution to streamline EV manufacturing, ultimately making them more accessible.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Here is how:",jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("b",{children:" Cost Reduction Through Transparent Supply Chains:"})," ","Egochain's track-and- trace capabilities enable manufacturers to eliminate counterfeit parts and diversion within their supply chains. This not only safeguards quality but also minimizes waste and cost overruns associated with managing fraudulent components."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("b",{children:" Enhanced Profitability with Efficient Recalls:"})," ","Traditional recalls often involve entire model years due to uncertainties regarding the origin of problematic parts. Egochain's precise tracking allows targeted recalls, focusing only on vehicles equipped with components from the affected supplier. This significantly reduces the recall's scope and associated expenses."]})]})]}),jsxRuntimeExports.jsxs("section",{id:"Benefits Beyond Cost Savings",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Benefits Beyond Cost Savings"})," ","The benefits of Egochain extend beyond mere cost reduction:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("b",{children:" Increased Consumer Confidence:"})," Enhanced transparency fosters trust by assuring consumers of the provenance and quality of their EVs."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("b",{children:" Sustainability Advancement: "})," Eliminating waste and optimizing resource use within the supply chain contributes to a more sustainable automotive industry."]})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Egochain's blockchain technology positions itself as a key facilitator in overcoming the cost barrier hindering wider EV adoption, opening doors for a greener future."]}),jsxRuntimeExports.jsxs("section",{id:"Charging costs & Improved charging infrastructure",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Charging costs & Improved charging infrastructure"})," ",`Despite the surging popularity of electric vehicles (EVs) in countries like Norway, Sweden, and the UK, a lack of readily available public charging stations remains a major obstacle to wider adoption. Euromonitor International's 2023 Voice of the Consumer: Mobility Survey identified poor charging infrastructure as the second most common reason for hesitation towards EVs, fueling "range anxiety" – the fear of running out of power before finding a charger.`,jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"The European Union's 2014 Alternative Fuel Infrastructure Directive (AFID) recommends a ratio of 10 EVs per charging station for member states. However, significant gaps persist. In 2022, countries like Norway (31 EVs per charger), Germany (23), the UK (19), and Denmark (18) fell short of this target.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Chart2",jsxRuntimeExports.jsx("img",{src:"/img/whitepaper_img2.svg",alt:""})," ",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Expanding public charging networks is crucial, particularly for urban dwellers living in apartments, where home charging is often infeasible. However, challenges exist. Public EV charging stations can be expensive to install, with Level 2 and DC fast chargers costing between $2,500 and $36,000, excluding installation and permits.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Adding to the complexity, unlike the consistent gallon-based pricing of gasoline, EV charging employs various structures, sometimes leading to confusing and potentially inflated costs. This inconsistency can disincentivize EV adoption due to consumer frustration and negative experiences."]}),jsxRuntimeExports.jsxs("section",{id:"Transparency, Efficiency, and Incentives",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Transparency, Efficiency, and Incentives"})," ","Egochain's blockchain technology offers a solution by enabling an open-source network of charging stations. The decentralized nature allows ownership by anyone, including local businesses like grocery stores. Transactions are securely recorded on the blockchain, reducing fraud and improving operational efficiency.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Beyond convenience, Egochain incentivizes green transportation by rewarding EV owners with tokens for using less popular stations. This balances grid load and promotes energy efficiency, contributing to a cleaner transportation ecosystem.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Tackling range anxiety through wider public EV charging infrastructure access is crucial for a successful transition to sustainable mobility. Egochain's blockchain- based approach delivers transparency, efficiency, and incentives, offering a promising path towards overcoming current obstacles and accelerating EV adoption."]}),jsxRuntimeExports.jsxs("section",{id:"Earning Rewards in the Egochain Ecosystem: Pathways to Participation",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Earning Rewards in the Egochain Ecosystem: Pathways to Participation"})," ","This section explores the fundamental concepts powering Egochain and the rewarding landscape for those who actively contribute to its success, ultimately accelerating the adoption of electric vehicles."]}),jsxRuntimeExports.jsxs("section",{id:"Fueling Growth Through Rewards",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Fueling Growth Through Rewards"})," ","Egochain welcomes contributions through two primary channels: debt and ownership. Both play crucial roles in propelling the expansion of electric vehicle adoption and boosting the value of its native currency. Within the ownership category, two distinct options exist: liquid and vesting. Vesting ownership implies a long-term commitment, locking tokens for a predetermined period, while liquid ownership grants immediate transferability."]}),jsxRuntimeExports.jsxs("section",{id:"Earning with Vesting and Liquid Ownership",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Earning with Vesting and Liquid Ownership"})," ",jsxRuntimeExports.jsx("b",{children:"Vesting Ownership:"})," Earn rewards continuously over time while demonstrating a long-term dedication to Egochain's mission. Tokens become gradually accessible, fostering deeper alignment between contributor interests and the ecosystem's long- term vision.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("b",{children:"Liquid Ownership:"})," Earn rewards continuously over time while demonstrating a long-term dedication to Egochain's mission. Tokens become gradually accessible, fostering deeper alignment between contributor interests and the ecosystem's long- term vision.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"By recognizing the diverse motivations of potential contributors, Egochain empowers individuals to choose the reward-earning path that best aligns with their goals and risk tolerance. This inclusive approach paves the way for a robust and diverse participation landscape, propelling the ecosystem towards its ambitious goals of widespread electric vehicle adoption."]}),jsxRuntimeExports.jsx("div",{className:"break_line_txt",children:"The Egochain blockchain interacts with two kinds of coins"}),jsxRuntimeExports.jsxs("section",{id:"The Egochain Coin (EGAX)",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"The Egochain Coin (EGAX)"})," ",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("b",{children:"EGAX"})," is the native token of Egochain, a blockchain platform specifically designed for the electric vehicle (EV) ecosystem. It serves as the lifeblood of this innovative network, powering transactions, incentivizing participation, and unlocking a new era of mobility.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("b",{children:"Fueling Adoption and Infrastructure"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{children:["➔ 80% of EGAX distribution rewards directly contribute to the heart of the EV ecosystem:",jsxRuntimeExports.jsx("br",{}),"◆ ",jsxRuntimeExports.jsx("b",{children:"EV drivers:"})," Incentivized through rebates, loyalty programs, and pay- per-use charging, encouraging widespread EV adoption.",jsxRuntimeExports.jsx("br",{})," ◆ ",jsxRuntimeExports.jsx("b",{children:" Charging station operators:"}),"Earning rewards for providing essential infrastructure and promoting a sustainable future.",jsxRuntimeExports.jsx("br",{}),"➔ This targeted distribution fosters a symbiotic relationship, fueling both demand and supply within the EV market."]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("b",{children:"Secure and Staking-Free Rewards"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("li",{children:"19% of EGAX is allocated to validators who secure the Egochain network through robust consensus mechanisms. This ensures the platform's stability and transparency, building trust and attracting further investment."}),jsxRuntimeExports.jsx("li",{children:"Uniquely, Egochain eliminates the complexities of staking by offering automatic claiming of earned EGAX for all users. This user-friendly approach maximizes accessibility and participation, making EGAX truly inclusive."}),jsxRuntimeExports.jsx("li",{children:"1%: EGC holders, providing passive income for supporting the ecosystem."})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("b",{children:"Frictionless Payments and Seamless Integration"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("b",{children:"Microtransactions:"})," EGAX boasts a minimal unit value, enabling smooth and efficient payments for even the smallest purchases, like individual charging sessions. This seamless experience encourages frequent engagement and fosters broader adoption."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("b",{children:"Built-in claiming: "})," Imagine claiming your earned EGAX directly through your EV! With APEX EVs, this futuristic vision becomes reality. Claiming rewards becomes an effortless part of your driving experience, further reinforcing the integration of EGAX into the everyday lives of EV users."]})]}),jsxRuntimeExports.jsx("br",{}),"EGAX represents more than just a coin; it's the key to unlocking a future where electric mobility thrives. Its unique design incentivizes participation, simplifies interaction, and fuels continuous growth within the EV ecosystem."]}),jsxRuntimeExports.jsxs("section",{id:"The EGC Coin (EGC)",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"The EGC Coin (EGC)"})," ",jsxRuntimeExports.jsx("br",{}),"Start-ups thrive on patient capital commitment. Investors recognize the years-long journey before reaping returns from their stakes. Short-term exits pose a significant challenge. New capital raised to fuel growth competes with existing shareholders seeking to cash out. Savvy investors prioritize capital contributions that propel company expansion, not appease those aiming for a quick escape.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Long-term commitment unlocks immense value. It empowers communities to chart future-focused plans. Stakeholder dedication aligns voting and decision-making with sustainable growth, rather than fleeting spikes. Conversely, the cryptocurrency landscape often witnesses speculators flitting between digital assets based on anticipated short-term gains.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Egochain envisions a community deeply invested in its long-term vision. Its unique model empowers users to commit their EGC COIN to lockup periods – one month, six months, or even a year – garnering platform benefits in return. Staked EGC balances remain non-transferable and non-divisible, effectively taking them off the open market. This deliberate design discourages short-term trading and fosters commitment. Stakers reap daily rewards, with EGC holders receiving 15% of the annual returns directly proportional to their locked stakes."]}),jsxRuntimeExports.jsxs("section",{id:"Smart Electric Vehicles",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Smart Electric Vehicles"})," ",jsxRuntimeExports.jsx("br",{}),'The seeds of smart vehicles were sown in the fertile ground of early Bitcoin projects. In 2013, Colored Coins emerged as a pioneering concept, offering a way to represent assets on the Bitcoin blockchain. This groundbreaking initiative laid the groundwork for the evolution of "smart property" within the nascent blockchain ecosystem.',jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"The year 2014 witnessed another pivotal moment with the advent of Counterparty. This platform empowered users to create their own tokens within the Bitcoin blockchain, representing a diverse range of assets from digital goods to tangible real estate and stocks. This versatility paved the way for the next milestone – the introduction of the Ethereum blockchain in 2015. Ethereum's revolutionary smart contracts enabled intricate, automated transactions on the blockchain, fostering the creation and management of intelligent property.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Fast forward to today, and we see tangible expressions of smart vehicle evolution in systems like car immobilizers. These devices enhance traditional keys with secure protocol exchanges, ensuring only authorized individuals with the correct cryptographic tokens can activate the engine. Their impact is undeniable; in Africa, cars equipped with immobilizers represent just 2% of stolen vehicles despite constituting 28% of the car population. This success extends beyond vehicles, with cryptographic measures safeguarding modern possessions like smartphones, rendering stolen devices inoperable and protecting sensitive information.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"While these advancements are noteworthy, the full potential of crypto-activated property remains largely unexplored. Traditionally, private keys reside within physical objects like keys or SIM cards, restricting their transfer and manipulation.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Smart vehicles challenge this paradigm by enabling ownership to be mediated through smart contracts.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Integrating smart property into blockchain ecosystems unlocks a plethora of benefits – reduced transaction costs, enhanced transparency, robust security, and perhaps most importantly, the democratization of asset ownership previously accessible only to a select few."]}),jsxRuntimeExports.jsxs("section",{id:"Tokenization",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Tokenization"})," ",jsxRuntimeExports.jsx("br",{}),"The burgeoning realm of smart electric vehicles (EVs) is poised for a paradigm shift with the emergence of tokenization. This innovative approach involves fragmenting ownership into digital tokens, each representing a stake in a specific vehicle. These tokens unlock a plethora of possibilities, fundamentally redefining automobile ownership and reshaping the landscape of automotive finance."]}),jsxRuntimeExports.jsxs("section",{id:"Unlocking Value Through Collateralization",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Unlocking Value Through Collateralization"})," ",jsxRuntimeExports.jsx("br",{}),"Imagine a world where owning a smart EV empowers you to tap into its value as a source of readily available credit. Tokenization makes this a reality. By leveraging your EV's inherent worth as collateral, you gain access to a wider range of loan options, potentially securing favorable terms and unlocking valuable financial flexibility. This benefit extends beyond individual owners, offering manufacturers a novel channel for asset-backed financing, diversifying their financial instruments and unlocking untapped potential."]}),jsxRuntimeExports.jsxs("section",{id:"Enhancing Transparency, Empowering Lending",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Enhancing Transparency, Empowering Lending"})," ",jsxRuntimeExports.jsx("br",{}),"The magic of tokenization lies in its inherent transparency. Built upon the immutable foundations of blockchain technology, ownership records and transaction history become readily accessible and tamper-proof. This creates a secure and transparent ecosystem, fostering trust and enabling lenders to make informed credit decisions based on the complete and accurate picture of an EV's value. This data-driven approach mitigates risk, fosters responsible lending practices, and creates a more robust financial infrastructure for all stakeholders."]}),jsxRuntimeExports.jsxs("section",{id:"Beyond Redefining Ownership",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Beyond Redefining Ownership"})," ",jsxRuntimeExports.jsx("br",{}),"The implications of smart EV tokenization extend far beyond ownership structures. It fosters a more inclusive financial ecosystem by empowering individuals and businesses to leverage their assets effectively. This fosters economic growth, stimulates innovation, and paves the way for a future where mobility and financial opportunity are intertwined.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"The burgeoning world of smart EV tokenization represents a watershed moment in the automotive and financial landscape. By unlocking the hidden value of vehicles, streamlining ownership transparency, and creating new avenues for financial inclusion, this technology holds the potential to revolutionize the way we own, finance, and experience mobility in the years to come."]}),jsxRuntimeExports.jsxs("section",{id:"Distributing Egax Coin",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Distributing Egax Coin"})," ",jsxRuntimeExports.jsx("br",{}),"The path to involvement in a cryptocurrency community offers two main avenues: ownership and contribution. Both approaches hold merit, with each user adding value to the currency's ecosystem. Mutual exchange facilitated by a transparent and reliable accounting system serves as the bedrock for value creation within these communities, where individuals earn rewards through the contributions they make to one another.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"However, achieving equitable distribution of a cryptocurrency presents a significant challenge. While computation-based mining methods like those employed by Bitcoin and Egochain offer specific functionalities, their scope tends to be limited. Activities like solving cryptographic puzzles or performing computations for rewards often yield benefits of marginal societal impact and offer limited direct advantages to the currency's community. Additionally, economies of scale and market forces often lead to centralization, restricting participation in such distribution mechanisms to specialized entities with extensive resources.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Therefore, it's crucial to recognize that computation-based mining ultimately resembles purchase, as it necessitates capital outlay for equipment or energy costs. Recognizing this inherent exchange dynamic highlights the need for alternative, more inclusive distribution models. Egochain's mileage-based approach, while innovative in its attempt to incentivize electric vehicle adoption, still relies on a pre-existing investment (vehicle ownership) and limits participant access.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Moving forward, exploring alternative distribution methods that prioritize accessibility, transparency, and genuine contribution to the community's goals will be crucial. By focusing on these principles, we can foster truly inclusive and sustainable cryptocurrency ecosystems where value creation is shared among all participants, not just a select few."]}),jsxRuntimeExports.jsxs("section",{id:"Electric Vehicle Smart Charging System",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Electric Vehicle Smart Charging System"})," ",jsxRuntimeExports.jsx("br",{}),"The burgeoning growth of electric vehicles (EVs) presents a significant challenge to power distribution grids. Unmanaged, the high-demand energy requirements of EV charging could overwhelm existing infrastructure. To address this, a robust platform is needed to optimize EV charging, balancing user needs with grid capacity. Failure to act will lead to charging station scarcity and grid congestion in the near future.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),'This paper proposes a novel smart EV charging infrastructure built on a Egochain blockchain platform. By capturing user-defined charging parameters (kWh & duration), the system leverages "smart charging" techniques to achieve grid stability. This innovative platform streamlines the ecosystem, connecting EV owners directly with charging stations, eliminating intermediaries. Egochain, a dedicated blockchain, facilitates flexible charging arrangements (power & time) through its native token rewards. This incentivizes off-peak charging, attracting investments to expand the charging network.',jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Our simulations demonstrate a remarkable 50% increase in user acceptance with this smart charging system, compared to traditional methods. This paves the way for a sustainable and efficient future of EV charging, ensuring grid stability and user satisfaction.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"While electric vehicle (EV) technology is still in its early stages, the future of transportation points towards widespread adoption. This rapid growth, however, poses a significant challenge to power grids. Charging an EV requires almost twenty times the power of a typical North American household. While current low EV penetration and strategically installed charging points prevent grid congestion for now, stricter emission regulations and ambitious carbon neutrality goals in Europe and elsewhere promise a surge in EV ownership. The International Energy Agency projects that EVs will capture over 30% of the global market share by 2030. Therefore, developing optimal methods for integrating a large number of EVs into the grid is crucial.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Nour et al. (2019) categorize EV charging into three types: uncontrolled, delayed, and smart. Uncontrolled charging, akin to manual on-off switching, occurs when an EV is plugged in and charges to full capacity. Delayed charging utilizes time-varying electricity tariffs to incentivize EV users to shift their charging to off-peak hours.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Smart charging emerges as the most promising solution for the future. It utilizes algorithms to intelligently control charging points, potentially implemented by distribution system operators (DSOs) via communication channels to the stations. Two control architectures exist: centralized and decentralized. Centralized control involves aggregators purchasing power from multiple EV owners and acting as intermediaries between them and ancillary service markets (Daina et al., 2017). This contrasts with decentralized control, where EV owners directly influence charging flexibility based on market information and incentives offered by the charging point operator (CPO). Creating effective incentives for flexible charging preferences is therefore key to optimizing operation, minimizing grid congestion, and even allowing more EVs to be charged at a single station.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Egochain has designed incentive mechanisms for charging preferences. We aim to demonstrate how these incentives can significantly reduce grid congestion while enabling more efficient charging at multi-point stations, paving the way for a seamless transition to a future dominated by electric vehicles.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Figure1",jsxRuntimeExports.jsx("img",{src:"/img/whitepaper_img3.jpeg",alt:""}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("b",{children:"Figure 1"})," presents the architectural blueprint of the EV charging market, outlining the participating actors and their interwoven flows of information and electricity. At the core of this ecosystem lie several key players:",jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("b",{children:" EV User:"})," The individual or entity owning and operating an electric vehicle."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("b",{children:" Charge Point Operator (CPO):"})," The entity responsible for managing and operating a charging station."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("b",{children:" eMobility Service Provider (eMSP):"})," A digital bridge between EV users and CPOs, providing real-time information on charging station availability, facilitating reservations, and enabling payment functionalities."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("b",{children:"E-Mobility Clearing House:"})," The trusted entity that handles the financial transactions between EV users and CPOs, facilitated by eMSPs."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("b",{children:"Distribution System Operator (DSO):"})," The utility company responsible for operating the low and medium voltage grids and delivering electricity to end users."]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("b",{children:"Electricity Supply Retailer:"})," The company selling electricity to consumers, possessing grid access contracts to purchase power from DSOs."]})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Beyond the traditional network, Egochain emerges as a game-changer. This distributed blockchain platform leverages cryptographic signatures and consensus mechanisms to secure data transactions and computations within the Internet of Things (IoT). With its inherent transparency and trust, Egochain fuels smart contract functionality, automating agreements among participants and executing actions only when predefined conditions are met.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"This paper introduces a novel model that leverages Egochain's smart contracts to incentivize EV users for aligning their charging preferences with grid priorities. These incentives, issued in the form of EGAX tokens, act as a digital currency within the network, enabling users to offset future charging costs."]}),jsxRuntimeExports.jsx("div",{className:"break_line_txt",children:"APPROACH AND SIMULATIONS"}),jsxRuntimeExports.jsxs("section",{id:"Smart Charging Architecture",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Smart Charging Architecture"})," ",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("b",{children:"Figure 2"})," illustrates the Egochain smart EV charging system. Moving beyond traditional models, Egochain leverages its blockchain technology to streamline billing and payment processes. Instead of relying on intermediaries like eMSPs and clearing houses, dedicated smart contract charge stations (cssc) deployed on the Egochain blockchain handle these functions. These csscs not only manage payments but also trigger smart charging for individual charge points (CPs), ensuring efficient energy distribution. Additionally, the system incentivizes EV users to participate in smart charging by rewarding them through csscs for offering flexible charging schedules.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("img",{src:"/img/whitepaper_img4.jpeg",alt:""})]}),jsxRuntimeExports.jsxs("section",{id:"Charging Algorithm and Flexibility Offers",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Charging Algorithm and Flexibility Offers"})," ",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("b",{children:"Figure 3"})," outlines the decision-making process whenever a new charging request arrives. EV users specify their desired energy amount (E) and maximum charging time (T) through the system. To facilitate efficient evaluation, a time step of 15 minutes is employed, ensuring each request within a given period is analyzed individually on a first-come-first-serve basis. Accepted requests initiate charging during the subsequent time interval.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Upon receiving a new request, the system first assesses potential grid congestion. If accepting the request at full power, alongside existing ones, would overload the grid, the model explores alternative solutions. It investigates whether the user has designated any flexibility preferences, allowing for smart charging adjustments and potential congestion alleviation. In the absence of flexibility (fast charge demand), the request is accepted regardless. Otherwise, a fulfillment check determines if the proposed flexibility accommodates congestion mitigation while fulfilling the user's energy demand within the specified timeframe. Successful checks translate to acceptance, while failures result in request rejection, with the option to re-evaluate in the next interval if the user remains available.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Therefore, flexibility refers to the charging time or power an EV user is willing to adjust in exchange for monetary rewards. As such, fair and transparent allocation mechanisms are crucial for managing these exchanges. The system utilizes a proportionate allocation mechanism to guarantee equitable distribution of incentives among participating users.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("img",{src:"/img/whitepaper_img5.jpeg",alt:""})]}),jsxRuntimeExports.jsxs("section",{id:"Determining Electric Vehicle (EV) Flexibility for Next Time Step",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Determining Electric Vehicle (EV) Flexibility for Next Time Step"})," ",jsxRuntimeExports.jsx("br",{}),"This algorithm estimates the potential of an EV user to offer charging flexibility during the next time step.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("b",{children:"Key parameters:"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{children:"Es(i,n):"})," Energy supplied to EV (i) at time step (n)"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{children:"Ts(i,n):"})," Charging time for EV (i) at time step (n)"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{children:"P_N(i):"})," Nominal power of charging point (CP) serving EV (i)"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{children:"TF(i,n):"})," Flexible time available for charging EV (i) at time step (n)"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{children:"Fl(i,n+1):"})," Flexible offer by EV (i) for next time step (n+1)"]})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("b",{children:"Algorithm:"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("span",{children:"1. Calculate flexible time: TF(i,n) = Ts(i,n) - Es(i,n) / P_N(i)"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{children:["2. Determine flexible offer:"," ","Fl(i,n+1) = { P_N(i) if TF(i,n) >= 15 minutes P_N(i) * TF(i,n) / 15 minutes otherwise }"]})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("b",{children:"Explanation:"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),'The algorithm first calculates the "flexible time" available for charging the EV (i) at the current time step (n). This is the difference between the scheduled charging time (Ts(i,n)) and the required time to reach the desired amount of energy with the nominal power of the CP (Es(i,n) / P_N(i)).',jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Next, the algorithm estimates the flexible offer (Fl(i,n+1)) that the EV user is willing to provide for the next time step (n+1). This offer is equal to the full nominal power of the CP (P_N(i)) if the available flexible time is at least 15 minutes. Otherwise, the offer is proportionally reduced based on the remaining flexible time.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("b",{children:"Benefits:"}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("li",{children:"This algorithm provides a simple and efficient way to estimate EV flexibility potential."}),jsxRuntimeExports.jsx("li",{children:"The use of a minimum flexible time threshold ensures practical feasibility and reduces the impact of short-term fluctuations."}),jsxRuntimeExports.jsx("li",{children:"The dynamic offer based on remaining time incentivizes users to participate and ensures efficient grid resource allocation."})]})]}),jsxRuntimeExports.jsxs("section",{id:"Decentralized Secure Charging with Egochain",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Decentralized Secure Charging with Egochain:"})," ",jsxRuntimeExports.jsx("br",{}),"For enhanced security and trust, we implemented Egochain, a blockchain platform, into the charging infrastructure. Each charging point (CP) houses a Raspberry Pi (RPi) running an Egochain node (Fig. 2).",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("b",{children:"Smart Contract Orchestrates Flexibility:"}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsxs("span",{children:[" ",jsxRuntimeExports.jsx("span",{children:"1. "})," Cloud Deployment: The smart charging algorithm and flexibility offers reside in the cloud."]}),jsxRuntimeExports.jsxs("span",{children:[" ",jsxRuntimeExports.jsx("span",{children:"2. "})," Smart Contract Development and Deployment: A dedicated smart contract (SC) manages energy transactions on the Egochain network. Its Application Binary Interface (ABI) is integrated into a Python script facilitating blockchain interaction."]}),jsxRuntimeExports.jsxs("span",{children:[" ",jsxRuntimeExports.jsx("span",{children:"3. "}),"Regular Communication: Every 15 minutes, the Python script retrieves EV user charging requests (E, T) and calculates flexibility offers for the next slot. Accepted offers are encrypted and stored on the Egochain blockchain."]}),jsxRuntimeExports.jsxs("span",{children:[" ",jsxRuntimeExports.jsx("span",{children:"4. "}),"Parallel Backup: Each CPO's backend system connects to the cloud and its local blockchain node. This redundancy ensures data accessibility and direct interaction with the cloud database and Python script."]}),jsxRuntimeExports.jsxs("span",{children:[" ",jsxRuntimeExports.jsx("span",{children:"5. "}),"Rewarding Flexibility: Upon confirmed delivery of the agreed-upon flexibility offer, the Egochain node triggers EGAX token payout to the EV user, compensating them for their energy and time flexibility."]})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("b",{children:"Benefits:"}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("li",{children:"Enhanced Security: Blockchain technology guarantees tamper-proof and transparent transaction records."}),jsxRuntimeExports.jsx("li",{children:"Decentralized Trust: Secure peer-to-peer interactions eliminate the need for a central authority."}),jsxRuntimeExports.jsx("li",{children:"Automated Flexibility Rewards: Smart contracts automate reward distribution based on agreed-upon flexibility offers."})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"This approach fosters a secure, transparent, and rewarding charging ecosystem for both EV users and CPOs."]}),jsxRuntimeExports.jsxs("section",{id:"Simulation Parameters",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Simulation Parameters"})," ",jsxRuntimeExports.jsx("br",{}),"This section outlines the key parameters governing our EV charging demand model.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("li",{children:"Average Daily Travel Distance: Based on data from BMVi (2019), the average German travels 39km daily."}),jsxRuntimeExports.jsx("li",{children:"Weekly Driving Range: Translating daily travel to a weekly basis, an individual accumulates approximately 280km of weekly driving."}),jsxRuntimeExports.jsx("li",{children:"EV Battery Efficiency: Studies by AUTOBEST (2018) indicate an average driving range of 7km per kWh for electric vehicles."}),jsxRuntimeExports.jsx("li",{children:"Weekly Energy Demand: Combining weekly travel distance with battery efficiency, an average EV user requires 40kWh of energy to fulfill their weekly mobility needs."})]})]}),jsxRuntimeExports.jsxs("section",{id:"Dynamic Charging Model Based on User Activity",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Dynamic Charging Model Based on User Activity:"})," ",jsxRuntimeExports.jsx("br",{}),"To accommodate diverse user behavior and charging needs, we've implemented a time-based charging system categorized by typical dwell times. This flexible approach helps us accurately model and predict charging demand across various locations and throughout the week.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("li",{children:"Category 1 (1-2 hours): High-frequency charging for short stops, commonly found in shopping malls, restaurants, and public parking areas."}),jsxRuntimeExports.jsx("li",{children:"Category 2 (2-4 hours): Moderate-duration charging for extended stays, such as workplaces, street parking, and airport terminals."}),jsxRuntimeExports.jsx("li",{children:"Category 3 (4-8 hours): Long-term charging for overnight or extended parking, typically occurring in residential areas and hotels."})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"By leveraging this data-driven categorization, we can efficiently allocate resources, optimize charging infrastructure deployment, and ultimately, deliver a seamless and cost-effective experience for our users."]}),jsxRuntimeExports.jsxs("section",{id:"Simulation Scenarios and Methodology",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Simulation Scenarios and Methodology"})," ",jsxRuntimeExports.jsx("br",{}),"The performance of the model was evaluated through simulations under two distinct charging scenarios, each focusing on the arrival rate of charging requests at the pool:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("li",{children:"Scenario 1: Low Arrival Rate: A single charging request arrives every time step (15 minutes), representing a moderate demand on the charging pool."}),jsxRuntimeExports.jsx("li",{children:"Scenario 2: High Arrival Rate: Two charging requests arrive every time step, simulating a peak demand situation."})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("b",{children:"Both scenarios assumed the following conditions: "}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("li",{children:"Charging Power: Each charging point (CP) offers a maximum of 11 kW."}),jsxRuntimeExports.jsx("li",{children:"EV Demand: User demand for charging power is randomly generated, ranging from 10 to 40 kWh (equivalent to 50-200 km) with charging times between 1 and 4 hours."}),jsxRuntimeExports.jsx("li",{children:"Plug Availability: All charging requests are accepted as long as sufficient power is available from the grid and no plug limitations exist."})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Grid power availability serves as a key variable in the analysis. It starts at 33 kW and is progressively increased by 11 kW increments. Through repeated simulations (100 iterations per scenario), the model's performance is assessed by comparing the total electricity sold and charging request acceptance rate for both uncontrolled and smart charging strategies under varying grid power limits, EV energy demands, and available charging times."]}),jsxRuntimeExports.jsxs("section",{id:"Results and Discussion",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Results and Discussion"})," ",jsxRuntimeExports.jsx("br",{}),"Scenario 1: Figure 4 presents the results for a ten-hour charging period under varying grid power limits. The blue, orange, and yellow bars represent:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsxs("li",{children:["Total electricity sold:"," ",jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("li",{children:"Blue: Uncontrolled charging."}),jsxRuntimeExports.jsx("li",{children:"Orange: Smart charging."})]})]}),jsxRuntimeExports.jsx("li",{children:"Utilized flexibility: Electricity supplied to EVs through smart charging (difference between orange and blue bars)."})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"The dotted lines depict the average acceptance rate of uncontrolled (blue) and smart (green) charging.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"At a 33 kW power limit, uncontrolled charging achieves an average acceptance rate of 38%, while smart charging reaches 70%. This represents a 1.84 times higher acceptance rate for smart charging. As the power limit increases, the difference in acceptance rates diminishes, reaching zero by 120 kW. This indicates that beyond 120 kW, all EVs could be accommodated, demonstrating the effectiveness of smart charging in accommodating demand within existing grid constraints.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Scenario 2: Figure 5 shows the results for double the charging requests per time step. Acceptance rates decrease to 23% (uncontrolled) and 43% (smart) at a 33 kW power limit. Similar to Scenario 1, the acceptance rate gap diminishes with increasing power limits, vanishing at 143 kW.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"Interestingly, at the 33 kW power limit, uncontrolled charging only supplies 309 kWh to EVs, while smart charging provides 603 kWh, equaling the uncontrolled scenario at a 66 kW power limit. This implies that smart charging, by utilizing flexibility, effectively expands the grid capacity by 33 kW.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"The yellow bars highlight the utilized flexibility, starting at its peak of 364 kWh at 88 kW and gradually decreasing to zero at 220 kW. This phenomenon reveals that as the grid capacity increases, relying on flexibility decreases. Flexibility contributions are most significant under limited grid capacity, enabling additional EV charging.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"In conclusion, these simulations demonstrate the remarkable capabilities of smart charging in:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{children:[jsxRuntimeExports.jsx("li",{children:"Increasing EV charging acceptance rates, especially during peak demand."}),jsxRuntimeExports.jsx("li",{children:"Effectively expanding grid capacity by utilizing flexibility under limited power availability."}),jsxRuntimeExports.jsx("li",{children:"Optimizing resource utilization by prioritizing grid electricity when sufficient capacity exists."})]}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"These findings offer compelling evidence for the widespread adoption of smart charging solutions as a key strategy for integrating high EV penetration into future energy grids.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("img",{src:"/img/whitepaper_img6.jpeg",alt:""})]}),jsxRuntimeExports.jsxs("section",{id:"Conclusion",className:"whitePaper_div_area_body_area_section",children:[jsxRuntimeExports.jsx("div",{className:"whitePaper_div_area_body_area_section_title",children:"Conclusion"})," ",jsxRuntimeExports.jsx("br",{}),"The Egochain blockchain, as detailed in this whitepaper, serves as a catalyst for the widespread acceptance of electric vehicles. By fostering the establishment of intelligent charging stations, the blockchain introduces incentives that encourage electric vehicle (EV) ownership. The associated rewards, denoted as EGAX, can be employed to cover EV charging expenses, transaction fees within the Egochain blockchain, and even contribute to EV acquisitions. Additionally, the ecosystem employs EGC, the debt token, to facilitate accessible credit for EV manufacturing, with interest payments settled in EGAX. This integrated approach not only promotes sustainable transportation but also establishes a comprehensive and self-sustaining ecosystem for the electric vehicle industry."]})]})]})}),jsxRuntimeExports.jsx("img",{src:"/img/hero_bg_light.svg",alt:"",className:"home_div_section1_bg_light"}),jsxRuntimeExports.jsx("img",{src:"/img/test_hero_light2.svg",alt:"",className:"home_div_section1_bg_light2"}),jsxRuntimeExports.jsx("img",{src:"/img/grains_ellipse.png",alt:"",className:"grains_ellipse"})]})},Grid=()=>jsxRuntimeExports.jsx("div",{className:"home_div_section1_grid_bg",children:jsxRuntimeExports.jsxs("svg",{width:"102%",height:"102%",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsxs("defs",{children:[jsxRuntimeExports.jsx("pattern",{id:"smallGrid",width:"120",height:"120",patternUnits:"userSpaceOnUse",children:jsxRuntimeExports.jsx("path",{d:"M 120 0 L 0 0 0 120",fill:"none",stroke:"currentColor","stroke-width":"1"})}),jsxRuntimeExports.jsx("pattern",{id:"grid",width:"240",height:"240",patternUnits:"userSpaceOnUse",children:jsxRuntimeExports.jsx("rect",{width:"240",height:"240",fill:"url(#smallGrid)"})})]}),jsxRuntimeExports.jsx("rect",{width:"100%",height:"100%",fill:"url(#grid)"})]})});function bind(e,a){return function(){return e.apply(a,arguments)}}const{toString:toString$1}=Object.prototype,{getPrototypeOf}=Object,kindOf=(e=>a=>{const i=toString$1.call(a);return e[i]||(e[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=e=>(e=e.toLowerCase(),a=>kindOf(a)===e),typeOfTest=e=>a=>typeof a===e,{isArray}=Array,isUndefined=typeOfTest("undefined");function isBuffer(e){return e!==null&&!isUndefined(e)&&e.constructor!==null&&!isUndefined(e.constructor)&&isFunction(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(e){let a;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?a=ArrayBuffer.isView(e):a=e&&e.buffer&&isArrayBuffer(e.buffer),a}const isString=typeOfTest("string"),isFunction=typeOfTest("function"),isNumber=typeOfTest("number"),isObject=e=>e!==null&&typeof e=="object",isBoolean=e=>e===!0||e===!1,isPlainObject=e=>{if(kindOf(e)!=="object")return!1;const a=getPrototypeOf(e);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=e=>isObject(e)&&isFunction(e.pipe),isFormData=e=>{let a;return e&&(typeof FormData=="function"&&e instanceof FormData||isFunction(e.append)&&((a=kindOf(e))==="formdata"||a==="object"&&isFunction(e.toString)&&e.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),trim=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(e,a,{allOwnKeys:i=!1}={}){if(e===null||typeof e>"u")return;let o,c;if(typeof e!="object"&&(e=[e]),isArray(e))for(o=0,c=e.length;o<c;o++)a.call(null,e[o],o,e);else{const d=i?Object.getOwnPropertyNames(e):Object.keys(e),g=d.length;let b;for(o=0;o<g;o++)b=d[o],a.call(null,e[b],b,e)}}function findKey(e,a){a=a.toLowerCase();const i=Object.keys(e);let o=i.length,c;for(;o-- >0;)if(c=i[o],a===c.toLowerCase())return c;return null}const _global=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,isContextDefined=e=>!isUndefined(e)&&e!==_global;function merge(){const{caseless:e}=isContextDefined(this)&&this||{},a={},i=(o,c)=>{const d=e&&findKey(a,c)||c;isPlainObject(a[d])&&isPlainObject(o)?a[d]=merge(a[d],o):isPlainObject(o)?a[d]=merge({},o):isArray(o)?a[d]=o.slice():a[d]=o};for(let o=0,c=arguments.length;o<c;o++)arguments[o]&&forEach(arguments[o],i);return a}const extend=(e,a,i,{allOwnKeys:o}={})=>(forEach(a,(c,d)=>{i&&isFunction(c)?e[d]=bind(c,i):e[d]=c},{allOwnKeys:o}),e),stripBOM=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),inherits=(e,a,i,o)=>{e.prototype=Object.create(a.prototype,o),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:a.prototype}),i&&Object.assign(e.prototype,i)},toFlatObject=(e,a,i,o)=>{let c,d,g;const b={};if(a=a||{},e==null)return a;do{for(c=Object.getOwnPropertyNames(e),d=c.length;d-- >0;)g=c[d],(!o||o(g,e,a))&&!b[g]&&(a[g]=e[g],b[g]=!0);e=i!==!1&&getPrototypeOf(e)}while(e&&(!i||i(e,a))&&e!==Object.prototype);return a},endsWith=(e,a,i)=>{e=String(e),(i===void 0||i>e.length)&&(i=e.length),i-=a.length;const o=e.indexOf(a,i);return o!==-1&&o===i},toArray=e=>{if(!e)return null;if(isArray(e))return e;let a=e.length;if(!isNumber(a))return null;const i=new Array(a);for(;a-- >0;)i[a]=e[a];return i},isTypedArray=(e=>a=>e&&a instanceof e)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(e,a)=>{const o=(e&&e[Symbol.iterator]).call(e);let c;for(;(c=o.next())&&!c.done;){const d=c.value;a.call(e,d[0],d[1])}},matchAll=(e,a)=>{let i;const o=[];for(;(i=e.exec(a))!==null;)o.push(i);return o},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(i,o,c){return o.toUpperCase()+c}),hasOwnProperty=(({hasOwnProperty:e})=>(a,i)=>e.call(a,i))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(e,a)=>{const i=Object.getOwnPropertyDescriptors(e),o={};forEach(i,(c,d)=>{let g;(g=a(c,d,e))!==!1&&(o[d]=g||c)}),Object.defineProperties(e,o)},freezeMethods=e=>{reduceDescriptors(e,(a,i)=>{if(isFunction(e)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const o=e[i];if(isFunction(o)){if(a.enumerable=!1,"writable"in a){a.writable=!1;return}a.set||(a.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},toObjectSet=(e,a)=>{const i={},o=c=>{c.forEach(d=>{i[d]=!0})};return isArray(e)?o(e):o(String(e).split(a)),i},noop=()=>{},toFiniteNumber=(e,a)=>(e=+e,Number.isFinite(e)?e:a),ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT="0123456789",ALPHABET={DIGIT,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT},generateString=(e=16,a=ALPHABET.ALPHA_DIGIT)=>{let i="";const{length:o}=a;for(;e--;)i+=a[Math.random()*o|0];return i};function isSpecCompliantForm(e){return!!(e&&isFunction(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const toJSONObject=e=>{const a=new Array(10),i=(o,c)=>{if(isObject(o)){if(a.indexOf(o)>=0)return;if(!("toJSON"in o)){a[c]=o;const d=isArray(o)?[]:{};return forEach(o,(g,b)=>{const j=i(g,c+1);!isUndefined(j)&&(d[b]=j)}),a[c]=void 0,d}}return o};return i(e,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=e=>e&&(isObject(e)||isFunction(e))&&isFunction(e.then)&&isFunction(e.catch),utils$1={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isBoolean,isObject,isPlainObject,isUndefined,isDate,isFile,isBlob,isRegExp,isFunction,isStream,isURLSearchParams,isTypedArray,isFileList,forEach,merge,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop,toFiniteNumber,findKey,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable};function AxiosError(e,a,i,o,c){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",a&&(this.code=a),i&&(this.config=i),o&&(this.request=o),c&&(this.response=c)}utils$1.inherits(AxiosError,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{descriptors[e]={value:e}});Object.defineProperties(AxiosError,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=(e,a,i,o,c,d)=>{const g=Object.create(prototype$1);return utils$1.toFlatObject(e,g,function(j){return j!==Error.prototype},b=>b!=="isAxiosError"),AxiosError.call(g,e.message,a,i,o,c),g.cause=e,g.name=e.name,d&&Object.assign(g,d),g};const httpAdapter=null;function isVisitable(e){return utils$1.isPlainObject(e)||utils$1.isArray(e)}function removeBrackets(e){return utils$1.endsWith(e,"[]")?e.slice(0,-2):e}function renderKey(e,a,i){return e?e.concat(a).map(function(c,d){return c=removeBrackets(c),!i&&d?"["+c+"]":c}).join(i?".":""):a}function isFlatArray(e){return utils$1.isArray(e)&&!e.some(isVisitable)}const predicates=utils$1.toFlatObject(utils$1,{},null,function(a){return/^is[A-Z]/.test(a)});function toFormData(e,a,i){if(!utils$1.isObject(e))throw new TypeError("target must be an object");a=a||new FormData,i=utils$1.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(yt,Pt){return!utils$1.isUndefined(Pt[yt])});const o=i.metaTokens,c=i.visitor||rt,d=i.dots,g=i.indexes,j=(i.Blob||typeof Blob<"u"&&Blob)&&utils$1.isSpecCompliantForm(a);if(!utils$1.isFunction(c))throw new TypeError("visitor must be a function");function $(gt){if(gt===null)return"";if(utils$1.isDate(gt))return gt.toISOString();if(!j&&utils$1.isBlob(gt))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer(gt)||utils$1.isTypedArray(gt)?j&&typeof Blob=="function"?new Blob([gt]):Buffer.from(gt):gt}function rt(gt,yt,Pt){let wt=gt;if(gt&&!Pt&&typeof gt=="object"){if(utils$1.endsWith(yt,"{}"))yt=o?yt:yt.slice(0,-2),gt=JSON.stringify(gt);else if(utils$1.isArray(gt)&&isFlatArray(gt)||(utils$1.isFileList(gt)||utils$1.endsWith(yt,"[]"))&&(wt=utils$1.toArray(gt)))return yt=removeBrackets(yt),wt.forEach(function(At,Tt){!(utils$1.isUndefined(At)||At===null)&&a.append(g===!0?renderKey([yt],Tt,d):g===null?yt:yt+"[]",$(At))}),!1}return isVisitable(gt)?!0:(a.append(renderKey(Pt,yt,d),$(gt)),!1)}const _e=[],st=Object.assign(predicates,{defaultVisitor:rt,convertValue:$,isVisitable});function ut(gt,yt){if(!utils$1.isUndefined(gt)){if(_e.indexOf(gt)!==-1)throw Error("Circular reference detected in "+yt.join("."));_e.push(gt),utils$1.forEach(gt,function(wt,Ct){(!(utils$1.isUndefined(wt)||wt===null)&&c.call(a,wt,utils$1.isString(Ct)?Ct.trim():Ct,yt,st))===!0&&ut(wt,yt?yt.concat(Ct):[Ct])}),_e.pop()}}if(!utils$1.isObject(e))throw new TypeError("data must be an object");return ut(e),a}function encode$1(e){const a={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(o){return a[o]})}function AxiosURLSearchParams(e,a){this._pairs=[],e&&toFormData(e,this,a)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(a,i){this._pairs.push([a,i])};prototype.toString=function(a){const i=a?function(o){return a.call(this,o,encode$1)}:encode$1;return this._pairs.map(function(c){return i(c[0])+"="+i(c[1])},"").join("&")};function encode(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(e,a,i){if(!a)return e;const o=i&&i.encode||encode,c=i&&i.serialize;let d;if(c?d=c(a,i):d=utils$1.isURLSearchParams(a)?a.toString():new AxiosURLSearchParams(a,i).toString(o),d){const g=e.indexOf("#");g!==-1&&(e=e.slice(0,g)),e+=(e.indexOf("?")===-1?"?":"&")+d}return e}class InterceptorManager{constructor(){this.handlers=[]}use(a,i,o){return this.handlers.push({fulfilled:a,rejected:i,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(a){this.handlers[a]&&(this.handlers[a]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(a){utils$1.forEach(this.handlers,function(o){o!==null&&a(o)})}}const transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",hasStandardBrowserEnv=(e=>hasBrowserEnv&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),hasStandardBrowserWebWorkerEnv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",utils=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv},Symbol.toStringTag,{value:"Module"})),platform={...utils,...platform$1};function toURLEncodedForm(e,a){return toFormData(e,new platform.classes.URLSearchParams,Object.assign({visitor:function(i,o,c,d){return platform.isNode&&utils$1.isBuffer(i)?(this.append(o,i.toString("base64")),!1):d.defaultVisitor.apply(this,arguments)}},a))}function parsePropPath(e){return utils$1.matchAll(/\w+|\[(\w*)]/g,e).map(a=>a[0]==="[]"?"":a[1]||a[0])}function arrayToObject(e){const a={},i=Object.keys(e);let o;const c=i.length;let d;for(o=0;o<c;o++)d=i[o],a[d]=e[d];return a}function formDataToJSON(e){function a(i,o,c,d){let g=i[d++];if(g==="__proto__")return!0;const b=Number.isFinite(+g),j=d>=i.length;return g=!g&&utils$1.isArray(c)?c.length:g,j?(utils$1.hasOwnProp(c,g)?c[g]=[c[g],o]:c[g]=o,!b):((!c[g]||!utils$1.isObject(c[g]))&&(c[g]=[]),a(i,o,c[g],d)&&utils$1.isArray(c[g])&&(c[g]=arrayToObject(c[g])),!b)}if(utils$1.isFormData(e)&&utils$1.isFunction(e.entries)){const i={};return utils$1.forEachEntry(e,(o,c)=>{a(parsePropPath(o),c,i,0)}),i}return null}function stringifySafely(e,a,i){if(utils$1.isString(e))try{return(a||JSON.parse)(e),utils$1.trim(e)}catch(o){if(o.name!=="SyntaxError")throw o}return(i||JSON.stringify)(e)}const defaults={transitional:transitionalDefaults,adapter:["xhr","http"],transformRequest:[function(a,i){const o=i.getContentType()||"",c=o.indexOf("application/json")>-1,d=utils$1.isObject(a);if(d&&utils$1.isHTMLForm(a)&&(a=new FormData(a)),utils$1.isFormData(a))return c?JSON.stringify(formDataToJSON(a)):a;if(utils$1.isArrayBuffer(a)||utils$1.isBuffer(a)||utils$1.isStream(a)||utils$1.isFile(a)||utils$1.isBlob(a))return a;if(utils$1.isArrayBufferView(a))return a.buffer;if(utils$1.isURLSearchParams(a))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),a.toString();let b;if(d){if(o.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(a,this.formSerializer).toString();if((b=utils$1.isFileList(a))||o.indexOf("multipart/form-data")>-1){const j=this.env&&this.env.FormData;return toFormData(b?{"files[]":a}:a,j&&new j,this.formSerializer)}}return d||c?(i.setContentType("application/json",!1),stringifySafely(a)):a}],transformResponse:[function(a){const i=this.transitional||defaults.transitional,o=i&&i.forcedJSONParsing,c=this.responseType==="json";if(a&&utils$1.isString(a)&&(o&&!this.responseType||c)){const g=!(i&&i.silentJSONParsing)&&c;try{return JSON.parse(a)}catch(b){if(g)throw b.name==="SyntaxError"?AxiosError.from(b,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):b}}return a}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(a){return a>=200&&a<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1.forEach(["delete","get","head","post","put","patch"],e=>{defaults.headers[e]={}});const defaults$1=defaults,ignoreDuplicateOf=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=e=>{const a={};let i,o,c;return e&&e.split(`
`).forEach(function(g){c=g.indexOf(":"),i=g.substring(0,c).trim().toLowerCase(),o=g.substring(c+1).trim(),!(!i||a[i]&&ignoreDuplicateOf[i])&&(i==="set-cookie"?a[i]?a[i].push(o):a[i]=[o]:a[i]=a[i]?a[i]+", "+o:o)}),a},$internals=Symbol("internals");function normalizeHeader(e){return e&&String(e).trim().toLowerCase()}function normalizeValue(e){return e===!1||e==null?e:utils$1.isArray(e)?e.map(normalizeValue):String(e)}function parseTokens(e){const a=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=i.exec(e);)a[o[1]]=o[2];return a}const isValidHeaderName=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function matchHeaderValue(e,a,i,o,c){if(utils$1.isFunction(o))return o.call(this,a,i);if(c&&(a=i),!!utils$1.isString(a)){if(utils$1.isString(o))return a.indexOf(o)!==-1;if(utils$1.isRegExp(o))return o.test(a)}}function formatHeader(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(a,i,o)=>i.toUpperCase()+o)}function buildAccessors(e,a){const i=utils$1.toCamelCase(" "+a);["get","set","has"].forEach(o=>{Object.defineProperty(e,o+i,{value:function(c,d,g){return this[o].call(this,a,c,d,g)},configurable:!0})})}class AxiosHeaders{constructor(a){a&&this.set(a)}set(a,i,o){const c=this;function d(b,j,$){const rt=normalizeHeader(j);if(!rt)throw new Error("header name must be a non-empty string");const _e=utils$1.findKey(c,rt);(!_e||c[_e]===void 0||$===!0||$===void 0&&c[_e]!==!1)&&(c[_e||j]=normalizeValue(b))}const g=(b,j)=>utils$1.forEach(b,($,rt)=>d($,rt,j));return utils$1.isPlainObject(a)||a instanceof this.constructor?g(a,i):utils$1.isString(a)&&(a=a.trim())&&!isValidHeaderName(a)?g(parseHeaders(a),i):a!=null&&d(i,a,o),this}get(a,i){if(a=normalizeHeader(a),a){const o=utils$1.findKey(this,a);if(o){const c=this[o];if(!i)return c;if(i===!0)return parseTokens(c);if(utils$1.isFunction(i))return i.call(this,c,o);if(utils$1.isRegExp(i))return i.exec(c);throw new TypeError("parser must be boolean|regexp|function")}}}has(a,i){if(a=normalizeHeader(a),a){const o=utils$1.findKey(this,a);return!!(o&&this[o]!==void 0&&(!i||matchHeaderValue(this,this[o],o,i)))}return!1}delete(a,i){const o=this;let c=!1;function d(g){if(g=normalizeHeader(g),g){const b=utils$1.findKey(o,g);b&&(!i||matchHeaderValue(o,o[b],b,i))&&(delete o[b],c=!0)}}return utils$1.isArray(a)?a.forEach(d):d(a),c}clear(a){const i=Object.keys(this);let o=i.length,c=!1;for(;o--;){const d=i[o];(!a||matchHeaderValue(this,this[d],d,a,!0))&&(delete this[d],c=!0)}return c}normalize(a){const i=this,o={};return utils$1.forEach(this,(c,d)=>{const g=utils$1.findKey(o,d);if(g){i[g]=normalizeValue(c),delete i[d];return}const b=a?formatHeader(d):String(d).trim();b!==d&&delete i[d],i[b]=normalizeValue(c),o[b]=!0}),this}concat(...a){return this.constructor.concat(this,...a)}toJSON(a){const i=Object.create(null);return utils$1.forEach(this,(o,c)=>{o!=null&&o!==!1&&(i[c]=a&&utils$1.isArray(o)?o.join(", "):o)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([a,i])=>a+": "+i).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(a){return a instanceof this?a:new this(a)}static concat(a,...i){const o=new this(a);return i.forEach(c=>o.set(c)),o}static accessor(a){const o=(this[$internals]=this[$internals]={accessors:{}}).accessors,c=this.prototype;function d(g){const b=normalizeHeader(g);o[b]||(buildAccessors(c,g),o[b]=!0)}return utils$1.isArray(a)?a.forEach(d):d(a),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$1.reduceDescriptors(AxiosHeaders.prototype,({value:e},a)=>{let i=a[0].toUpperCase()+a.slice(1);return{get:()=>e,set(o){this[i]=o}}});utils$1.freezeMethods(AxiosHeaders);const AxiosHeaders$1=AxiosHeaders;function transformData(e,a){const i=this||defaults$1,o=a||i,c=AxiosHeaders$1.from(o.headers);let d=o.data;return utils$1.forEach(e,function(b){d=b.call(i,d,c.normalize(),a?a.status:void 0)}),c.normalize(),d}function isCancel(e){return!!(e&&e.__CANCEL__)}function CanceledError(e,a,i){AxiosError.call(this,e??"canceled",AxiosError.ERR_CANCELED,a,i),this.name="CanceledError"}utils$1.inherits(CanceledError,AxiosError,{__CANCEL__:!0});function settle(e,a,i){const o=i.config.validateStatus;!i.status||!o||o(i.status)?e(i):a(new AxiosError("Request failed with status code "+i.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}const cookies=platform.hasStandardBrowserEnv?{write(e,a,i,o,c,d){const g=[e+"="+encodeURIComponent(a)];utils$1.isNumber(i)&&g.push("expires="+new Date(i).toGMTString()),utils$1.isString(o)&&g.push("path="+o),utils$1.isString(c)&&g.push("domain="+c),d===!0&&g.push("secure"),document.cookie=g.join("; ")},read(e){const a=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return a?decodeURIComponent(a[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function combineURLs(e,a){return a?e.replace(/\/?\/$/,"")+"/"+a.replace(/^\/+/,""):e}function buildFullPath(e,a){return e&&!isAbsoluteURL(a)?combineURLs(e,a):a}const isURLSameOrigin=platform.hasStandardBrowserEnv?function(){const a=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");let o;function c(d){let g=d;return a&&(i.setAttribute("href",g),g=i.href),i.setAttribute("href",g),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:i.pathname.charAt(0)==="/"?i.pathname:"/"+i.pathname}}return o=c(window.location.href),function(g){const b=utils$1.isString(g)?c(g):g;return b.protocol===o.protocol&&b.host===o.host}}():function(){return function(){return!0}}();function parseProtocol(e){const a=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return a&&a[1]||""}function speedometer(e,a){e=e||10;const i=new Array(e),o=new Array(e);let c=0,d=0,g;return a=a!==void 0?a:1e3,function(j){const $=Date.now(),rt=o[d];g||(g=$),i[c]=j,o[c]=$;let _e=d,st=0;for(;_e!==c;)st+=i[_e++],_e=_e%e;if(c=(c+1)%e,c===d&&(d=(d+1)%e),$-g<a)return;const ut=rt&&$-rt;return ut?Math.round(st*1e3/ut):void 0}}function progressEventReducer(e,a){let i=0;const o=speedometer(50,250);return c=>{const d=c.loaded,g=c.lengthComputable?c.total:void 0,b=d-i,j=o(b),$=d<=g;i=d;const rt={loaded:d,total:g,progress:g?d/g:void 0,bytes:b,rate:j||void 0,estimated:j&&g&&$?(g-d)/j:void 0,event:c};rt[a?"download":"upload"]=!0,e(rt)}}const isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(e){return new Promise(function(i,o){let c=e.data;const d=AxiosHeaders$1.from(e.headers).normalize();let{responseType:g,withXSRFToken:b}=e,j;function $(){e.cancelToken&&e.cancelToken.unsubscribe(j),e.signal&&e.signal.removeEventListener("abort",j)}let rt;if(utils$1.isFormData(c)){if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)d.setContentType(!1);else if((rt=d.getContentType())!==!1){const[yt,...Pt]=rt?rt.split(";").map(wt=>wt.trim()).filter(Boolean):[];d.setContentType([yt||"multipart/form-data",...Pt].join("; "))}}let _e=new XMLHttpRequest;if(e.auth){const yt=e.auth.username||"",Pt=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";d.set("Authorization","Basic "+btoa(yt+":"+Pt))}const st=buildFullPath(e.baseURL,e.url);_e.open(e.method.toUpperCase(),buildURL(st,e.params,e.paramsSerializer),!0),_e.timeout=e.timeout;function ut(){if(!_e)return;const yt=AxiosHeaders$1.from("getAllResponseHeaders"in _e&&_e.getAllResponseHeaders()),wt={data:!g||g==="text"||g==="json"?_e.responseText:_e.response,status:_e.status,statusText:_e.statusText,headers:yt,config:e,request:_e};settle(function(At){i(At),$()},function(At){o(At),$()},wt),_e=null}if("onloadend"in _e?_e.onloadend=ut:_e.onreadystatechange=function(){!_e||_e.readyState!==4||_e.status===0&&!(_e.responseURL&&_e.responseURL.indexOf("file:")===0)||setTimeout(ut)},_e.onabort=function(){_e&&(o(new AxiosError("Request aborted",AxiosError.ECONNABORTED,e,_e)),_e=null)},_e.onerror=function(){o(new AxiosError("Network Error",AxiosError.ERR_NETWORK,e,_e)),_e=null},_e.ontimeout=function(){let Pt=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const wt=e.transitional||transitionalDefaults;e.timeoutErrorMessage&&(Pt=e.timeoutErrorMessage),o(new AxiosError(Pt,wt.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,e,_e)),_e=null},platform.hasStandardBrowserEnv&&(b&&utils$1.isFunction(b)&&(b=b(e)),b||b!==!1&&isURLSameOrigin(st))){const yt=e.xsrfHeaderName&&e.xsrfCookieName&&cookies.read(e.xsrfCookieName);yt&&d.set(e.xsrfHeaderName,yt)}c===void 0&&d.setContentType(null),"setRequestHeader"in _e&&utils$1.forEach(d.toJSON(),function(Pt,wt){_e.setRequestHeader(wt,Pt)}),utils$1.isUndefined(e.withCredentials)||(_e.withCredentials=!!e.withCredentials),g&&g!=="json"&&(_e.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&_e.addEventListener("progress",progressEventReducer(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&_e.upload&&_e.upload.addEventListener("progress",progressEventReducer(e.onUploadProgress)),(e.cancelToken||e.signal)&&(j=yt=>{_e&&(o(!yt||yt.type?new CanceledError(null,e,_e):yt),_e.abort(),_e=null)},e.cancelToken&&e.cancelToken.subscribe(j),e.signal&&(e.signal.aborted?j():e.signal.addEventListener("abort",j)));const gt=parseProtocol(st);if(gt&&platform.protocols.indexOf(gt)===-1){o(new AxiosError("Unsupported protocol "+gt+":",AxiosError.ERR_BAD_REQUEST,e));return}_e.send(c||null)})},knownAdapters={http:httpAdapter,xhr:xhrAdapter};utils$1.forEach(knownAdapters,(e,a)=>{if(e){try{Object.defineProperty(e,"name",{value:a})}catch{}Object.defineProperty(e,"adapterName",{value:a})}});const renderReason=e=>`- ${e}`,isResolvedHandle=e=>utils$1.isFunction(e)||e===null||e===!1,adapters={getAdapter:e=>{e=utils$1.isArray(e)?e:[e];const{length:a}=e;let i,o;const c={};for(let d=0;d<a;d++){i=e[d];let g;if(o=i,!isResolvedHandle(i)&&(o=knownAdapters[(g=String(i)).toLowerCase()],o===void 0))throw new AxiosError(`Unknown adapter '${g}'`);if(o)break;c[g||"#"+d]=o}if(!o){const d=Object.entries(c).map(([b,j])=>`adapter ${b} `+(j===!1?"is not supported by the environment":"is not available in the build"));let g=a?d.length>1?`since :
`+d.map(renderReason).join(`
`):" "+renderReason(d[0]):"as no adapter specified";throw new AxiosError("There is no suitable adapter to dispatch the request "+g,"ERR_NOT_SUPPORT")}return o},adapters:knownAdapters};function throwIfCancellationRequested(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new CanceledError(null,e)}function dispatchRequest(e){return throwIfCancellationRequested(e),e.headers=AxiosHeaders$1.from(e.headers),e.data=transformData.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(e.adapter||defaults$1.adapter)(e).then(function(o){return throwIfCancellationRequested(e),o.data=transformData.call(e,e.transformResponse,o),o.headers=AxiosHeaders$1.from(o.headers),o},function(o){return isCancel(o)||(throwIfCancellationRequested(e),o&&o.response&&(o.response.data=transformData.call(e,e.transformResponse,o.response),o.response.headers=AxiosHeaders$1.from(o.response.headers))),Promise.reject(o)})}const headersToObject=e=>e instanceof AxiosHeaders$1?e.toJSON():e;function mergeConfig(e,a){a=a||{};const i={};function o($,rt,_e){return utils$1.isPlainObject($)&&utils$1.isPlainObject(rt)?utils$1.merge.call({caseless:_e},$,rt):utils$1.isPlainObject(rt)?utils$1.merge({},rt):utils$1.isArray(rt)?rt.slice():rt}function c($,rt,_e){if(utils$1.isUndefined(rt)){if(!utils$1.isUndefined($))return o(void 0,$,_e)}else return o($,rt,_e)}function d($,rt){if(!utils$1.isUndefined(rt))return o(void 0,rt)}function g($,rt){if(utils$1.isUndefined(rt)){if(!utils$1.isUndefined($))return o(void 0,$)}else return o(void 0,rt)}function b($,rt,_e){if(_e in a)return o($,rt);if(_e in e)return o(void 0,$)}const j={url:d,method:d,data:d,baseURL:g,transformRequest:g,transformResponse:g,paramsSerializer:g,timeout:g,timeoutMessage:g,withCredentials:g,withXSRFToken:g,adapter:g,responseType:g,xsrfCookieName:g,xsrfHeaderName:g,onUploadProgress:g,onDownloadProgress:g,decompress:g,maxContentLength:g,maxBodyLength:g,beforeRedirect:g,transport:g,httpAgent:g,httpsAgent:g,cancelToken:g,socketPath:g,responseEncoding:g,validateStatus:b,headers:($,rt)=>c(headersToObject($),headersToObject(rt),!0)};return utils$1.forEach(Object.keys(Object.assign({},e,a)),function(rt){const _e=j[rt]||c,st=_e(e[rt],a[rt],rt);utils$1.isUndefined(st)&&_e!==b||(i[rt]=st)}),i}const VERSION="1.6.7",validators$1={};["object","boolean","number","function","string","symbol"].forEach((e,a)=>{validators$1[e]=function(o){return typeof o===e||"a"+(a<1?"n ":" ")+e}});const deprecatedWarnings={};validators$1.transitional=function(a,i,o){function c(d,g){return"[Axios v"+VERSION+"] Transitional option '"+d+"'"+g+(o?". "+o:"")}return(d,g,b)=>{if(a===!1)throw new AxiosError(c(g," has been removed"+(i?" in "+i:"")),AxiosError.ERR_DEPRECATED);return i&&!deprecatedWarnings[g]&&(deprecatedWarnings[g]=!0,console.warn(c(g," has been deprecated since v"+i+" and will be removed in the near future"))),a?a(d,g,b):!0}};function assertOptions(e,a,i){if(typeof e!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const o=Object.keys(e);let c=o.length;for(;c-- >0;){const d=o[c],g=a[d];if(g){const b=e[d],j=b===void 0||g(b,d,e);if(j!==!0)throw new AxiosError("option "+d+" must be "+j,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new AxiosError("Unknown option "+d,AxiosError.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;class Axios{constructor(a){this.defaults=a,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}async request(a,i){try{return await this._request(a,i)}catch(o){if(o instanceof Error){let c;Error.captureStackTrace?Error.captureStackTrace(c={}):c=new Error;const d=c.stack?c.stack.replace(/^.+\n/,""):"";o.stack?d&&!String(o.stack).endsWith(d.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+d):o.stack=d}throw o}}_request(a,i){typeof a=="string"?(i=i||{},i.url=a):i=a||{},i=mergeConfig(this.defaults,i);const{transitional:o,paramsSerializer:c,headers:d}=i;o!==void 0&&validator.assertOptions(o,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),c!=null&&(utils$1.isFunction(c)?i.paramsSerializer={serialize:c}:validator.assertOptions(c,{encode:validators.function,serialize:validators.function},!0)),i.method=(i.method||this.defaults.method||"get").toLowerCase();let g=d&&utils$1.merge(d.common,d[i.method]);d&&utils$1.forEach(["delete","get","head","post","put","patch","common"],gt=>{delete d[gt]}),i.headers=AxiosHeaders$1.concat(g,d);const b=[];let j=!0;this.interceptors.request.forEach(function(yt){typeof yt.runWhen=="function"&&yt.runWhen(i)===!1||(j=j&&yt.synchronous,b.unshift(yt.fulfilled,yt.rejected))});const $=[];this.interceptors.response.forEach(function(yt){$.push(yt.fulfilled,yt.rejected)});let rt,_e=0,st;if(!j){const gt=[dispatchRequest.bind(this),void 0];for(gt.unshift.apply(gt,b),gt.push.apply(gt,$),st=gt.length,rt=Promise.resolve(i);_e<st;)rt=rt.then(gt[_e++],gt[_e++]);return rt}st=b.length;let ut=i;for(_e=0;_e<st;){const gt=b[_e++],yt=b[_e++];try{ut=gt(ut)}catch(Pt){yt.call(this,Pt);break}}try{rt=dispatchRequest.call(this,ut)}catch(gt){return Promise.reject(gt)}for(_e=0,st=$.length;_e<st;)rt=rt.then($[_e++],$[_e++]);return rt}getUri(a){a=mergeConfig(this.defaults,a);const i=buildFullPath(a.baseURL,a.url);return buildURL(i,a.params,a.paramsSerializer)}}utils$1.forEach(["delete","get","head","options"],function(a){Axios.prototype[a]=function(i,o){return this.request(mergeConfig(o||{},{method:a,url:i,data:(o||{}).data}))}});utils$1.forEach(["post","put","patch"],function(a){function i(o){return function(d,g,b){return this.request(mergeConfig(b||{},{method:a,headers:o?{"Content-Type":"multipart/form-data"}:{},url:d,data:g}))}}Axios.prototype[a]=i(),Axios.prototype[a+"Form"]=i(!0)});const Axios$1=Axios;class CancelToken{constructor(a){if(typeof a!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(d){i=d});const o=this;this.promise.then(c=>{if(!o._listeners)return;let d=o._listeners.length;for(;d-- >0;)o._listeners[d](c);o._listeners=null}),this.promise.then=c=>{let d;const g=new Promise(b=>{o.subscribe(b),d=b}).then(c);return g.cancel=function(){o.unsubscribe(d)},g},a(function(d,g,b){o.reason||(o.reason=new CanceledError(d,g,b),i(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(a){if(this.reason){a(this.reason);return}this._listeners?this._listeners.push(a):this._listeners=[a]}unsubscribe(a){if(!this._listeners)return;const i=this._listeners.indexOf(a);i!==-1&&this._listeners.splice(i,1)}static source(){let a;return{token:new CancelToken(function(c){a=c}),cancel:a}}}const CancelToken$1=CancelToken;function spread(e){return function(i){return e.apply(null,i)}}function isAxiosError(e){return utils$1.isObject(e)&&e.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([e,a])=>{HttpStatusCode[a]=e});const HttpStatusCode$1=HttpStatusCode;function createInstance(e){const a=new Axios$1(e),i=bind(Axios$1.prototype.request,a);return utils$1.extend(i,Axios$1.prototype,a,{allOwnKeys:!0}),utils$1.extend(i,a,null,{allOwnKeys:!0}),i.create=function(c){return createInstance(mergeConfig(e,c))},i}const axios=createInstance(defaults$1);axios.Axios=Axios$1;axios.CanceledError=CanceledError;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel;axios.VERSION=VERSION;axios.toFormData=toFormData;axios.AxiosError=AxiosError;axios.Cancel=axios.CanceledError;axios.all=function(a){return Promise.all(a)};axios.spread=spread;axios.isAxiosError=isAxiosError;axios.mergeConfig=mergeConfig;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=e=>formDataToJSON(utils$1.isHTMLForm(e)?new FormData(e):e);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;const API_URL="https://egoras-v3-staging.egoras.com",config={headers:{"Content-Type":"application/json"}};var ScaleLoader$1={},unitConverter={};Object.defineProperty(unitConverter,"__esModule",{value:!0});unitConverter.cssValue=unitConverter.parseLengthAndUnit=void 0;var cssUnit={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function parseLengthAndUnit(e){if(typeof e=="number")return{value:e,unit:"px"};var a,i=(e.match(/^[0-9.]*/)||"").toString();i.includes(".")?a=parseFloat(i):a=parseInt(i,10);var o=(e.match(/[^0-9]*$/)||"").toString();return cssUnit[o]?{value:a,unit:o}:(console.warn("React Spinners: ".concat(e," is not a valid css value. Defaulting to ").concat(a,"px.")),{value:a,unit:"px"})}unitConverter.parseLengthAndUnit=parseLengthAndUnit;function cssValue(e){var a=parseLengthAndUnit(e);return"".concat(a.value).concat(a.unit)}unitConverter.cssValue=cssValue;var animation={};Object.defineProperty(animation,"__esModule",{value:!0});animation.createAnimation=void 0;var createAnimation=function(e,a,i){var o="react-spinners-".concat(e,"-").concat(i);if(typeof window>"u"||!window.document)return o;var c=document.createElement("style");document.head.appendChild(c);var d=c.sheet,g=`
    @keyframes `.concat(o,` {
      `).concat(a,`
    }
  `);return d&&d.insertRule(g,0),o};animation.createAnimation=createAnimation;var __assign=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign=Object.assign||function(e){for(var a,i=1,o=arguments.length;i<o;i++){a=arguments[i];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(e[c]=a[c])}return e},__assign.apply(this,arguments)},__createBinding=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,a,i,o){o===void 0&&(o=i);var c=Object.getOwnPropertyDescriptor(a,i);(!c||("get"in c?!a.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return a[i]}}),Object.defineProperty(e,o,c)}:function(e,a,i,o){o===void 0&&(o=i),e[o]=a[i]}),__setModuleDefault=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,a){Object.defineProperty(e,"default",{enumerable:!0,value:a})}:function(e,a){e.default=a}),__importStar=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var a={};if(e!=null)for(var i in e)i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)&&__createBinding(a,e,i);return __setModuleDefault(a,e),a},__rest=commonjsGlobal&&commonjsGlobal.__rest||function(e,a){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&a.indexOf(o)<0&&(i[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(e);c<o.length;c++)a.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(e,o[c])&&(i[o[c]]=e[o[c]]);return i};Object.defineProperty(ScaleLoader$1,"__esModule",{value:!0});var React=__importStar(reactExports$1),unitConverter_1=unitConverter,animation_1=animation,scale=(0,animation_1.createAnimation)("ScaleLoader","0% {transform: scaley(1.0)} 50% {transform: scaley(0.4)} 100% {transform: scaley(1.0)}","scale");function ScaleLoader(e){var a=e.loading,i=a===void 0?!0:a,o=e.color,c=o===void 0?"#000000":o,d=e.speedMultiplier,g=d===void 0?1:d,b=e.cssOverride,j=b===void 0?{}:b,$=e.height,rt=$===void 0?35:$,_e=e.width,st=_e===void 0?4:_e,ut=e.radius,gt=ut===void 0?2:ut,yt=e.margin,Pt=yt===void 0?2:yt,wt=__rest(e,["loading","color","speedMultiplier","cssOverride","height","width","radius","margin"]),Ct=__assign({display:"inherit"},j),At=function(Tt){return{backgroundColor:c,width:(0,unitConverter_1.cssValue)(st),height:(0,unitConverter_1.cssValue)(rt),margin:(0,unitConverter_1.cssValue)(Pt),borderRadius:(0,unitConverter_1.cssValue)(gt),display:"inline-block",animation:"".concat(scale," ").concat(1/g,"s ").concat(Tt*.1,"s infinite cubic-bezier(0.2, 0.68, 0.18, 1.08)"),animationFillMode:"both"}};return i?React.createElement("span",__assign({style:Ct},wt),React.createElement("span",{style:At(1)}),React.createElement("span",{style:At(2)}),React.createElement("span",{style:At(3)}),React.createElement("span",{style:At(4)}),React.createElement("span",{style:At(5)})):null}var _default=ScaleLoader$1.default=ScaleLoader;const v$1="4.10.1",fr$1=25,ip$1=0,op$1=55,w$1=796,h$1=714,nm$1="Anim8*",ddd$1=0,assets$1=[{id:"comp_745",layers:[{ddd:0,ind:1,ty:4,nm:"cruz3",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},n:["0p833_0p833_0p167_0p167"],t:18,s:[1],e:[100]},{t:28}],ix:11},r:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},n:["0p667_1_0p333_0"],t:18,s:[-33],e:[13]},{t:50}],ix:10},p:{a:1,k:[{i:{x:0,y:1},o:{x:.333,y:0},n:"0_1_0p333_0",t:18,s:[614.125,467.5,0],e:[841.125,680.5,0],to:[37.8333320617676,35.5,0],ti:[-37.8333320617676,-35.5,0]},{t:28}],ix:2},a:{a:0,k:[-882.375,-1726,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-894.5,-1726],[-869.5,-1726]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.12156863,.67843137,.38431373,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:3,ix:5},lc:1,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 2",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-894.5,-1726],[-869.5,-1726]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.12156863,.67843137,.38431373,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:3,ix:5},lc:1,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[-882.239,-1725.811],ix:2},a:{a:0,k:[-882.239,-1725.811],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:-90,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,ix:2,mn:"ADBE Vector Group",hd:!1}],ip:18,op:1020.5,st:18,bm:0},{ddd:0,ind:2,ty:4,nm:"cruz2",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},n:["0p833_0p833_0p167_0p167"],t:16,s:[1],e:[100]},{t:26}],ix:11},r:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},n:["0p667_1_0p333_0"],t:16,s:[-30],e:[16]},{t:50}],ix:10},p:{a:1,k:[{i:{x:0,y:1},o:{x:.333,y:0},n:"0_1_0p333_0",t:16,s:[606.125,465.5,0],e:[322.125,572.5,0],to:[-47.3333320617676,17.8333339691162,0],ti:[47.3333320617676,-17.8333339691162,0]},{t:26}],ix:2},a:{a:0,k:[-882.375,-1726,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-894.5,-1726],[-869.5,-1726]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.12156863,.67843137,.38431373,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:3,ix:5},lc:1,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 2",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-894.5,-1726],[-869.5,-1726]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.12156863,.67843137,.38431373,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:3,ix:5},lc:1,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[-882.239,-1725.811],ix:2},a:{a:0,k:[-882.239,-1725.811],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:-90,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,ix:2,mn:"ADBE Vector Group",hd:!1}],ip:16,op:1018.5,st:16,bm:0},{ddd:0,ind:3,ty:4,nm:"cruz1",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},n:["0p833_0p833_0p167_0p167"],t:15,s:[1],e:[100]},{t:25}],ix:11},r:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},n:["0p667_1_0p333_0"],t:15,s:[-28],e:[18]},{t:50}],ix:10},p:{a:1,k:[{i:{x:.103,y:1},o:{x:.333,y:0},n:"0p103_1_0p333_0",t:15,s:[614.125,462.5,0],e:[852.125,164.5,0],to:[39.6666679382324,-49.6666679382324,0],ti:[-39.6666679382324,49.6666679382324,0]},{t:25}],ix:2},a:{a:0,k:[-882.375,-1726,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-894.5,-1726],[-869.5,-1726]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.12156863,.67843137,.38431373,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:3,ix:5},lc:1,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 2",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-894.5,-1726],[-869.5,-1726]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.12156863,.67843137,.38431373,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:3,ix:5},lc:1,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[-882.239,-1725.811],ix:2},a:{a:0,k:[-882.239,-1725.811],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:-90,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,ix:2,mn:"ADBE Vector Group",hd:!1}],ip:15,op:1017.5,st:15,bm:0},{ddd:0,ind:4,ty:4,nm:"Bolas2",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[617.5,490.5,0],ix:2},a:{a:0,k:[-1112,-1428,0],ix:1},s:{a:1,k:[{i:{x:[.101,.101,.667],y:[1,1,1]},o:{x:[.333,.333,.333],y:[0,0,0]},n:["0p101_1_0p333_0","0p101_1_0p333_0","0p667_1_0p333_0"],t:13,s:[0,0,100],e:[100,100,100]},{t:25}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[19.355,19.355],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[.12156863,.67843137,.38431373,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[-952.029,-1150.197],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[64.361,64.361],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 3",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[19.355,19.355],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[.12156863,.67843137,.38431373,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[-1435.793,-1556.371],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[64.361,64.361],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 2",np:3,cix:2,ix:2,mn:"ADBE Vector Group",hd:!1}],ip:13,op:1015.5,st:13,bm:0},{ddd:0,ind:5,ty:4,nm:"Bolas1",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.833],y:[.921]},o:{x:[.333],y:[0]},n:["0p833_0p921_0p333_0"],t:11,s:[-11],e:[0]},{i:{x:[.15],y:[1]},o:{x:[.167],y:[.327]},n:["0p15_1_0p167_0p327"],t:23,s:[0],e:[6]},{t:50}],ix:10},p:{a:0,k:[621.5,478.5,0],ix:2},a:{a:0,k:[-1108,-1440,0],ix:1},s:{a:1,k:[{i:{x:[.101,.101,.667],y:[1,1,1]},o:{x:[.333,.333,.333],y:[0,0,0]},n:["0p101_1_0p333_0","0p101_1_0p333_0","0p667_1_0p333_0"],t:11,s:[0,0,100],e:[100,100,100]},{t:23}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[19.355,19.355],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[.12156863,.67843137,.38431373,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:5,ix:5},lc:1,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[-1151.238,-1723.625],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[140.88,140.88],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 2",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[19.355,19.355],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[.12156863,.67843137,.38431373,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:5,ix:5},lc:1,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[-1282.949,-1147.881],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[140.88,140.88],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:3,cix:2,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[19.355,19.355],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[.12156863,.67843137,.38431373,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:5,ix:5},lc:1,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[-819.535,-1371.645],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[85.671,85.671],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 3",np:3,cix:2,ix:3,mn:"ADBE Vector Group",hd:!1}],ip:11,op:1013.5,st:11,bm:0},{ddd:0,ind:6,ty:4,nm:"stroke3",sr:1,ks:{o:{a:0,k:50,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[1950.5,2175.5,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-1401.5,-1457.5],[-1117.454,-1623.493]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.12156863,.67843137,.38431373,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:92,ix:5},lc:2,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100.04,99.99],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:0,k:0,ix:1},e:{a:1,k:[{i:{x:[.156],y:[1]},o:{x:[.333],y:[0]},n:["0p156_1_0p333_0"],t:9,s:[0],e:[100]},{t:17}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:9,op:1011.5,st:9,bm:0},{ddd:0,ind:7,ty:4,nm:"stroke4",sr:1,ks:{o:{a:0,k:50,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[2288.5,1790.5,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-1401.5,-1457.5],[-1372.351,-1474.477]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.12156863,.67843137,.38431373,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:92,ix:5},lc:2,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100.04,99.99],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:0,k:0,ix:1},e:{a:1,k:[{i:{x:[.156],y:[1]},o:{x:[.333],y:[0]},n:["0p156_1_0p333_0"],t:6.5,s:[0],e:[100]},{t:14.5}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:6.5,op:1009,st:6.5,bm:0},{ddd:0,ind:8,ty:4,nm:"stroke2",sr:1,ks:{o:{a:0,k:50,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[1818.5,2059.5,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-1401.5,-1457.5],[-1027.49,-1672.499]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.12156863,.67843137,.38431373,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:92,ix:5},lc:2,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100.04,99.99],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:0,k:0,ix:1},e:{a:1,k:[{i:{x:[.156],y:[1]},o:{x:[.333],y:[0]},n:["0p156_1_0p333_0"],t:4,s:[0],e:[100]},{t:12}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:4,op:1006.5,st:4,bm:0},{ddd:0,ind:9,ty:4,nm:"stroke1",sr:1,ks:{o:{a:0,k:50,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[1729.5,1918.5,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-1401.5,-1457.5],[-1027.49,-1672.499]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.12156863,.67843137,.38431373,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:92,ix:5},lc:2,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100.04,99.99],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:0,k:0,ix:1},e:{a:1,k:[{i:{x:[.156],y:[1]},o:{x:[.333],y:[0]},n:["0p156_1_0p333_0"],t:0,s:[0],e:[100]},{t:8}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:0,op:1002.5,st:0,bm:0}]}],layers$1=[{ddd:0,ind:1,ty:4,nm:"Shape Layer 3",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[396.5,357,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0]],v:[[-72,6],[-28,49],[75,-54]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[1,1,1,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:18,ix:5},lc:1,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:0,k:0,ix:1},e:{a:1,k:[{i:{x:[.156],y:[1]},o:{x:[.333],y:[0]},n:["0p156_1_0p333_0"],t:18,s:[0],e:[100]},{t:32}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:18,op:73,st:18,bm:0},{ddd:0,ind:2,ty:4,nm:"Shape Layer 2",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[398,357.031,0],ix:2},a:{a:0,k:[9.719,2.719,0],ix:1},s:{a:1,k:[{i:{x:[0,0,.667],y:[1,1,1]},o:{x:[.333,.333,.333],y:[0,0,0]},n:["0_1_0p333_0","0_1_0p333_0","0p667_1_0p333_0"],t:13,s:[30,30,100],e:[91.577,91.577,100]},{t:21}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[355.438,355.438],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[1,1,1,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:0,ix:5},lc:1,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[.12156863,.67843137,.38431373,1],ix:4},o:{a:0,k:100,ix:5},r:1,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[9.719,2.719],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:13,op:68,st:13,bm:0},{ddd:0,ind:3,ty:4,nm:"Shape Layer 1",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[398.111,357.031,0],ix:2},a:{a:0,k:[9.719,2.719,0],ix:1},s:{a:1,k:[{i:{x:[0,0,.667],y:[1,1,1]},o:{x:[.333,.333,.333],y:[0,0,0]},n:["0_1_0p333_0","0_1_0p333_0","0p667_1_0p333_0"],t:8,s:[30,30,100],e:[101.143,101.143,100]},{t:16}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[355.438,355.438],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[1,1,1,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:0,ix:5},lc:1,lj:1,ml:4,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[.47843137,.86666667,.65882353,1],ix:4},o:{a:0,k:100,ix:5},r:1,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[9.719,2.719],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:3,cix:2,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:8,op:63,st:8,bm:0},{ddd:0,ind:4,ty:0,nm:"BG",refId:"comp_745",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[1513.5,1812.5,0],ix:2},a:{a:0,k:[1729.5,1918.5,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,w:3459,h:3837,ip:0,op:1005,st:0,bm:0}],successLoader={v:v$1,fr:fr$1,ip:ip$1,op:op$1,w:w$1,h:h$1,nm:nm$1,ddd:ddd$1,assets:assets$1,layers:layers$1};var lottie$1={exports:{}};(function(module,exports){typeof navigator<"u"&&function(e,a){module.exports=a()}(commonjsGlobal,function(){var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(a){_useWebWorker=!!a},getWebWorker=function(){return _useWebWorker},setLocationHref=function(a){locationHref=a},getLocationHref=function(){return locationHref};function createTag(e){return document.createElement(e)}function extendPrototype(e,a){var i,o=e.length,c;for(i=0;i<o;i+=1){c=e[i].prototype;for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a.prototype[d]=c[d])}}function getDescriptor(e,a){return Object.getOwnPropertyDescriptor(e,a)}function createProxyFunction(e){function a(){}return a.prototype=e,a}var audioControllerFactory=function(){function e(a){this.audios=[],this.audioFactory=a,this._volume=1,this._isMuted=!1}return e.prototype={addAudio:function(i){this.audios.push(i)},pause:function(){var i,o=this.audios.length;for(i=0;i<o;i+=1)this.audios[i].pause()},resume:function(){var i,o=this.audios.length;for(i=0;i<o;i+=1)this.audios[i].resume()},setRate:function(i){var o,c=this.audios.length;for(o=0;o<c;o+=1)this.audios[o].setRate(i)},createAudio:function(i){return this.audioFactory?this.audioFactory(i):window.Howl?new window.Howl({src:[i]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(i){this.audioFactory=i},setVolume:function(i){this._volume=i,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var i,o=this.audios.length;for(i=0;i<o;i+=1)this.audios[i].volume(this._volume*(this._isMuted?0:1))}},function(){return new e}}(),createTypedArray=function(){function e(i,o){var c=0,d=[],g;switch(i){case"int16":case"uint8c":g=1;break;default:g=1.1;break}for(c=0;c<o;c+=1)d.push(g);return d}function a(i,o){return i==="float32"?new Float32Array(o):i==="int16"?new Int16Array(o):i==="uint8c"?new Uint8ClampedArray(o):e(i,o)}return typeof Uint8ClampedArray=="function"&&typeof Float32Array=="function"?a:e}();function createSizedArray(e){return Array.apply(null,{length:e})}function _typeof$6(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$6=function(i){return typeof i}:_typeof$6=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_typeof$6(e)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};(function(){var e=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],a,i=e.length;for(a=0;a<i;a+=1)BMMath[e[a]]=Math[e[a]]})(),BMMath.random=Math.random,BMMath.abs=function(e){var a=_typeof$6(e);if(a==="object"&&e.length){var i=createSizedArray(e.length),o,c=e.length;for(o=0;o<c;o+=1)i[o]=Math.abs(e[o]);return i}return Math.abs(e)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function styleDiv(e){e.style.position="absolute",e.style.top=0,e.style.left=0,e.style.display="block",e.style.transformOrigin="0 0",e.style.webkitTransformOrigin="0 0",e.style.backfaceVisibility="visible",e.style.webkitBackfaceVisibility="visible",e.style.transformStyle="preserve-3d",e.style.webkitTransformStyle="preserve-3d",e.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(e,a,i,o){this.type=e,this.currentTime=a,this.totalTime=i,this.direction=o<0?-1:1}function BMCompleteEvent(e,a){this.type=e,this.direction=a<0?-1:1}function BMCompleteLoopEvent(e,a,i,o){this.type=e,this.currentLoop=i,this.totalLoops=a,this.direction=o<0?-1:1}function BMSegmentStartEvent(e,a,i){this.type=e,this.firstFrame=a,this.totalFrames=i}function BMDestroyEvent(e,a){this.type=e,this.target=a}function BMRenderFrameErrorEvent(e,a){this.type="renderFrameError",this.nativeError=e,this.currentTime=a}function BMConfigErrorEvent(e){this.type="configError",this.nativeError=e}var createElementID=function(){var e=0;return function(){return e+=1,idPrefix$1+"__lottie_element_"+e}}();function HSVtoRGB(e,a,i){var o,c,d,g,b,j,$,rt;switch(g=Math.floor(e*6),b=e*6-g,j=i*(1-a),$=i*(1-b*a),rt=i*(1-(1-b)*a),g%6){case 0:o=i,c=rt,d=j;break;case 1:o=$,c=i,d=j;break;case 2:o=j,c=i,d=rt;break;case 3:o=j,c=$,d=i;break;case 4:o=rt,c=j,d=i;break;case 5:o=i,c=j,d=$;break}return[o,c,d]}function RGBtoHSV(e,a,i){var o=Math.max(e,a,i),c=Math.min(e,a,i),d=o-c,g,b=o===0?0:d/o,j=o/255;switch(o){case c:g=0;break;case e:g=a-i+d*(a<i?6:0),g/=6*d;break;case a:g=i-e+d*2,g/=6*d;break;case i:g=e-a+d*4,g/=6*d;break}return[g,b,j]}function addSaturationToRGB(e,a){var i=RGBtoHSV(e[0]*255,e[1]*255,e[2]*255);return i[1]+=a,i[1]>1?i[1]=1:i[1]<=0&&(i[1]=0),HSVtoRGB(i[0],i[1],i[2])}function addBrightnessToRGB(e,a){var i=RGBtoHSV(e[0]*255,e[1]*255,e[2]*255);return i[2]+=a,i[2]>1?i[2]=1:i[2]<0&&(i[2]=0),HSVtoRGB(i[0],i[1],i[2])}function addHueToRGB(e,a){var i=RGBtoHSV(e[0]*255,e[1]*255,e[2]*255);return i[0]+=a/360,i[0]>1?i[0]-=1:i[0]<0&&(i[0]+=1),HSVtoRGB(i[0],i[1],i[2])}var rgbToHex=function(){var e=[],a,i;for(a=0;a<256;a+=1)i=a.toString(16),e[a]=i.length===1?"0"+i:i;return function(o,c,d){return o<0&&(o=0),c<0&&(c=0),d<0&&(d=0),"#"+e[o]+e[c]+e[d]}}(),setSubframeEnabled=function(a){subframeEnabled=!!a},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(a){expressionsPlugin=a},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(a){expressionsInterfaces=a},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(a){defaultCurveSegments=a},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(a){idPrefix$1=a};function createNS(e){return document.createElementNS(svgNS,e)}function _typeof$5(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$5=function(i){return typeof i}:_typeof$5=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_typeof$5(e)}var dataManager=function(){var e=1,a=[],i,o,c={onmessage:function(){},postMessage:function(ut){i({data:ut})}},d={postMessage:function(ut){c.onmessage({data:ut})}};function g(st){if(window.Worker&&window.Blob&&getWebWorker()){var ut=new Blob(["var _workerSelf = self; self.onmessage = ",st.toString()],{type:"text/javascript"}),gt=URL.createObjectURL(ut);return new Worker(gt)}return i=st,c}function b(){o||(o=g(function(ut){function gt(){function Pt(Qn,ds){var un,dr,us=Qn.length,Nn,gn,Zn,xu;for(dr=0;dr<us;dr+=1)if(un=Qn[dr],"ks"in un&&!un.completed){if(un.completed=!0,un.hasMask){var au=un.masksProperties;for(gn=au.length,Nn=0;Nn<gn;Nn+=1)if(au[Nn].pt.k.i)kt(au[Nn].pt.k);else for(xu=au[Nn].pt.k.length,Zn=0;Zn<xu;Zn+=1)au[Nn].pt.k[Zn].s&&kt(au[Nn].pt.k[Zn].s[0]),au[Nn].pt.k[Zn].e&&kt(au[Nn].pt.k[Zn].e[0])}un.ty===0?(un.layers=At(un.refId,ds),Pt(un.layers,ds)):un.ty===4?Tt(un.shapes):un.ty===5&&_s(un)}}function wt(Qn,ds){if(Qn){var un=0,dr=Qn.length;for(un=0;un<dr;un+=1)Qn[un].t===1&&(Qn[un].data.layers=At(Qn[un].data.refId,ds),Pt(Qn[un].data.layers,ds))}}function Ct(Qn,ds){for(var un=0,dr=ds.length;un<dr;){if(ds[un].id===Qn)return ds[un];un+=1}return null}function At(Qn,ds){var un=Ct(Qn,ds);return un?un.layers.__used?JSON.parse(JSON.stringify(un.layers)):(un.layers.__used=!0,un.layers):null}function Tt(Qn){var ds,un=Qn.length,dr,us;for(ds=un-1;ds>=0;ds-=1)if(Qn[ds].ty==="sh")if(Qn[ds].ks.k.i)kt(Qn[ds].ks.k);else for(us=Qn[ds].ks.k.length,dr=0;dr<us;dr+=1)Qn[ds].ks.k[dr].s&&kt(Qn[ds].ks.k[dr].s[0]),Qn[ds].ks.k[dr].e&&kt(Qn[ds].ks.k[dr].e[0]);else Qn[ds].ty==="gr"&&Tt(Qn[ds].it)}function kt(Qn){var ds,un=Qn.i.length;for(ds=0;ds<un;ds+=1)Qn.i[ds][0]+=Qn.v[ds][0],Qn.i[ds][1]+=Qn.v[ds][1],Qn.o[ds][0]+=Qn.v[ds][0],Qn.o[ds][1]+=Qn.v[ds][1]}function It(Qn,ds){var un=ds?ds.split("."):[100,100,100];return Qn[0]>un[0]?!0:un[0]>Qn[0]?!1:Qn[1]>un[1]?!0:un[1]>Qn[1]?!1:Qn[2]>un[2]?!0:un[2]>Qn[2]?!1:null}var Lt=function(){var Qn=[4,4,14];function ds(dr){var us=dr.t.d;dr.t.d={k:[{s:us,t:0}]}}function un(dr){var us,Nn=dr.length;for(us=0;us<Nn;us+=1)dr[us].ty===5&&ds(dr[us])}return function(dr){if(It(Qn,dr.v)&&(un(dr.layers),dr.assets)){var us,Nn=dr.assets.length;for(us=0;us<Nn;us+=1)dr.assets[us].layers&&un(dr.assets[us].layers)}}}(),Ft=function(){var Qn=[4,7,99];return function(ds){if(ds.chars&&!It(Qn,ds.v)){var un,dr=ds.chars.length;for(un=0;un<dr;un+=1){var us=ds.chars[un];us.data&&us.data.shapes&&(Tt(us.data.shapes),us.data.ip=0,us.data.op=99999,us.data.st=0,us.data.sr=1,us.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},ds.chars[un].t||(us.data.shapes.push({ty:"no"}),us.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}}(),Nt=function(){var Qn=[5,7,15];function ds(dr){var us=dr.t.p;typeof us.a=="number"&&(us.a={a:0,k:us.a}),typeof us.p=="number"&&(us.p={a:0,k:us.p}),typeof us.r=="number"&&(us.r={a:0,k:us.r})}function un(dr){var us,Nn=dr.length;for(us=0;us<Nn;us+=1)dr[us].ty===5&&ds(dr[us])}return function(dr){if(It(Qn,dr.v)&&(un(dr.layers),dr.assets)){var us,Nn=dr.assets.length;for(us=0;us<Nn;us+=1)dr.assets[us].layers&&un(dr.assets[us].layers)}}}(),Ht=function(){var Qn=[4,1,9];function ds(dr){var us,Nn=dr.length,gn,Zn;for(us=0;us<Nn;us+=1)if(dr[us].ty==="gr")ds(dr[us].it);else if(dr[us].ty==="fl"||dr[us].ty==="st")if(dr[us].c.k&&dr[us].c.k[0].i)for(Zn=dr[us].c.k.length,gn=0;gn<Zn;gn+=1)dr[us].c.k[gn].s&&(dr[us].c.k[gn].s[0]/=255,dr[us].c.k[gn].s[1]/=255,dr[us].c.k[gn].s[2]/=255,dr[us].c.k[gn].s[3]/=255),dr[us].c.k[gn].e&&(dr[us].c.k[gn].e[0]/=255,dr[us].c.k[gn].e[1]/=255,dr[us].c.k[gn].e[2]/=255,dr[us].c.k[gn].e[3]/=255);else dr[us].c.k[0]/=255,dr[us].c.k[1]/=255,dr[us].c.k[2]/=255,dr[us].c.k[3]/=255}function un(dr){var us,Nn=dr.length;for(us=0;us<Nn;us+=1)dr[us].ty===4&&ds(dr[us].shapes)}return function(dr){if(It(Qn,dr.v)&&(un(dr.layers),dr.assets)){var us,Nn=dr.assets.length;for(us=0;us<Nn;us+=1)dr.assets[us].layers&&un(dr.assets[us].layers)}}}(),Gr=function(){var Qn=[4,4,18];function ds(dr){var us,Nn=dr.length,gn,Zn;for(us=Nn-1;us>=0;us-=1)if(dr[us].ty==="sh")if(dr[us].ks.k.i)dr[us].ks.k.c=dr[us].closed;else for(Zn=dr[us].ks.k.length,gn=0;gn<Zn;gn+=1)dr[us].ks.k[gn].s&&(dr[us].ks.k[gn].s[0].c=dr[us].closed),dr[us].ks.k[gn].e&&(dr[us].ks.k[gn].e[0].c=dr[us].closed);else dr[us].ty==="gr"&&ds(dr[us].it)}function un(dr){var us,Nn,gn=dr.length,Zn,xu,au,Vv;for(Nn=0;Nn<gn;Nn+=1){if(us=dr[Nn],us.hasMask){var wu=us.masksProperties;for(xu=wu.length,Zn=0;Zn<xu;Zn+=1)if(wu[Zn].pt.k.i)wu[Zn].pt.k.c=wu[Zn].cl;else for(Vv=wu[Zn].pt.k.length,au=0;au<Vv;au+=1)wu[Zn].pt.k[au].s&&(wu[Zn].pt.k[au].s[0].c=wu[Zn].cl),wu[Zn].pt.k[au].e&&(wu[Zn].pt.k[au].e[0].c=wu[Zn].cl)}us.ty===4&&ds(us.shapes)}}return function(dr){if(It(Qn,dr.v)&&(un(dr.layers),dr.assets)){var us,Nn=dr.assets.length;for(us=0;us<Nn;us+=1)dr.assets[us].layers&&un(dr.assets[us].layers)}}}();function hs(Qn){Qn.__complete||(Ht(Qn),Lt(Qn),Ft(Qn),Nt(Qn),Gr(Qn),Pt(Qn.layers,Qn.assets),wt(Qn.chars,Qn.assets),Qn.__complete=!0)}function _s(Qn){Qn.t.a.length===0&&"m"in Qn.t.p}var hn={};return hn.completeData=hs,hn.checkColors=Ht,hn.checkChars=Ft,hn.checkPathProperties=Nt,hn.checkShapes=Gr,hn.completeLayers=Pt,hn}if(d.dataManager||(d.dataManager=gt()),d.assetLoader||(d.assetLoader=function(){function Pt(Ct){var At=Ct.getResponseHeader("content-type");return At&&Ct.responseType==="json"&&At.indexOf("json")!==-1||Ct.response&&_typeof$5(Ct.response)==="object"?Ct.response:Ct.response&&typeof Ct.response=="string"?JSON.parse(Ct.response):Ct.responseText?JSON.parse(Ct.responseText):null}function wt(Ct,At,Tt,kt){var It,Lt=new XMLHttpRequest;try{Lt.responseType="json"}catch{}Lt.onreadystatechange=function(){if(Lt.readyState===4)if(Lt.status===200)It=Pt(Lt),Tt(It);else try{It=Pt(Lt),Tt(It)}catch(Ft){kt&&kt(Ft)}};try{Lt.open(["G","E","T"].join(""),Ct,!0)}catch{Lt.open(["G","E","T"].join(""),At+"/"+Ct,!0)}Lt.send()}return{load:wt}}()),ut.data.type==="loadAnimation")d.assetLoader.load(ut.data.path,ut.data.fullPath,function(Pt){d.dataManager.completeData(Pt),d.postMessage({id:ut.data.id,payload:Pt,status:"success"})},function(){d.postMessage({id:ut.data.id,status:"error"})});else if(ut.data.type==="complete"){var yt=ut.data.animation;d.dataManager.completeData(yt),d.postMessage({id:ut.data.id,payload:yt,status:"success"})}else ut.data.type==="loadData"&&d.assetLoader.load(ut.data.path,ut.data.fullPath,function(Pt){d.postMessage({id:ut.data.id,payload:Pt,status:"success"})},function(){d.postMessage({id:ut.data.id,status:"error"})})}),o.onmessage=function(st){var ut=st.data,gt=ut.id,yt=a[gt];a[gt]=null,ut.status==="success"?yt.onComplete(ut.payload):yt.onError&&yt.onError()})}function j(st,ut){e+=1;var gt="processId_"+e;return a[gt]={onComplete:st,onError:ut},gt}function $(st,ut,gt){b();var yt=j(ut,gt);o.postMessage({type:"loadAnimation",path:st,fullPath:window.location.origin+window.location.pathname,id:yt})}function rt(st,ut,gt){b();var yt=j(ut,gt);o.postMessage({type:"loadData",path:st,fullPath:window.location.origin+window.location.pathname,id:yt})}function _e(st,ut,gt){b();var yt=j(ut,gt);o.postMessage({type:"complete",animation:st,id:yt})}return{loadAnimation:$,loadData:rt,completeAnimation:_e}}(),ImagePreloader=function(){var e=function(){var wt=createTag("canvas");wt.width=1,wt.height=1;var Ct=wt.getContext("2d");return Ct.fillStyle="rgba(0,0,0,0)",Ct.fillRect(0,0,1,1),wt}();function a(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function i(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function o(wt,Ct,At){var Tt="";if(wt.e)Tt=wt.p;else if(Ct){var kt=wt.p;kt.indexOf("images/")!==-1&&(kt=kt.split("/")[1]),Tt=Ct+kt}else Tt=At,Tt+=wt.u?wt.u:"",Tt+=wt.p;return Tt}function c(wt){var Ct=0,At=setInterval((function(){var Tt=wt.getBBox();(Tt.width||Ct>500)&&(this._imageLoaded(),clearInterval(At)),Ct+=1}).bind(this),50)}function d(wt){var Ct=o(wt,this.assetsPath,this.path),At=createNS("image");isSafari?this.testImageLoaded(At):At.addEventListener("load",this._imageLoaded,!1),At.addEventListener("error",(function(){Tt.img=e,this._imageLoaded()}).bind(this),!1),At.setAttributeNS("http://www.w3.org/1999/xlink","href",Ct),this._elementHelper.append?this._elementHelper.append(At):this._elementHelper.appendChild(At);var Tt={img:At,assetData:wt};return Tt}function g(wt){var Ct=o(wt,this.assetsPath,this.path),At=createTag("img");At.crossOrigin="anonymous",At.addEventListener("load",this._imageLoaded,!1),At.addEventListener("error",(function(){Tt.img=e,this._imageLoaded()}).bind(this),!1),At.src=Ct;var Tt={img:At,assetData:wt};return Tt}function b(wt){var Ct={assetData:wt},At=o(wt,this.assetsPath,this.path);return dataManager.loadData(At,(function(Tt){Ct.img=Tt,this._footageLoaded()}).bind(this),(function(){Ct.img={},this._footageLoaded()}).bind(this)),Ct}function j(wt,Ct){this.imagesLoadedCb=Ct;var At,Tt=wt.length;for(At=0;At<Tt;At+=1)wt[At].layers||(!wt[At].t||wt[At].t==="seq"?(this.totalImages+=1,this.images.push(this._createImageData(wt[At]))):wt[At].t===3&&(this.totalFootages+=1,this.images.push(this.createFootageData(wt[At]))))}function $(wt){this.path=wt||""}function rt(wt){this.assetsPath=wt||""}function _e(wt){for(var Ct=0,At=this.images.length;Ct<At;){if(this.images[Ct].assetData===wt)return this.images[Ct].img;Ct+=1}return null}function st(){this.imagesLoadedCb=null,this.images.length=0}function ut(){return this.totalImages===this.loadedAssets}function gt(){return this.totalFootages===this.loadedFootagesCount}function yt(wt,Ct){wt==="svg"?(this._elementHelper=Ct,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}function Pt(){this._imageLoaded=a.bind(this),this._footageLoaded=i.bind(this),this.testImageLoaded=c.bind(this),this.createFootageData=b.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return Pt.prototype={loadAssets:j,setAssetsPath:rt,setPath:$,loadedImages:ut,loadedFootages:gt,destroy:st,getAsset:_e,createImgData:g,createImageData:d,imageLoaded:a,footageLoaded:i,setCacheType:yt},Pt}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(a,i){if(this._cbs[a])for(var o=this._cbs[a],c=0;c<o.length;c+=1)o[c](i)},addEventListener:function(a,i){return this._cbs[a]||(this._cbs[a]=[]),this._cbs[a].push(i),(function(){this.removeEventListener(a,i)}).bind(this)},removeEventListener:function(a,i){if(!i)this._cbs[a]=null;else if(this._cbs[a]){for(var o=0,c=this._cbs[a].length;o<c;)this._cbs[a][o]===i&&(this._cbs[a].splice(o,1),o-=1,c-=1),o+=1;this._cbs[a].length||(this._cbs[a]=null)}}};var markerParser=function(){function e(a){for(var i=a.split(`\r
`),o={},c,d=0,g=0;g<i.length;g+=1)c=i[g].split(":"),c.length===2&&(o[c[0]]=c[1].trim(),d+=1);if(d===0)throw new Error;return o}return function(a){for(var i=[],o=0;o<a.length;o+=1){var c=a[o],d={time:c.tm,duration:c.dr};try{d.payload=JSON.parse(a[o].cm)}catch{try{d.payload=e(a[o].cm)}catch{d.payload={name:a[o].cm}}}i.push(d)}return i}}(),ProjectInterface=function(){function e(a){this.compositions.push(a)}return function(){function a(i){for(var o=0,c=this.compositions.length;o<c;){if(this.compositions[o].data&&this.compositions[o].data.nm===i)return this.compositions[o].prepareFrame&&this.compositions[o].data.xt&&this.compositions[o].prepareFrame(this.currentFrame),this.compositions[o].compInterface;o+=1}return null}return a.compositions=[],a.currentFrame=0,a.registerComposition=e,a}}(),renderers={},registerRenderer=function(a,i){renderers[a]=i};function getRenderer(e){return renderers[e]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var e in renderers)if(renderers[e])return e;return""}function _typeof$4(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$4=function(i){return typeof i}:_typeof$4=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_typeof$4(e)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0),this.expressionsPlugin=getExpressionsPlugin()};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(e){(e.wrapper||e.container)&&(this.wrapper=e.wrapper||e.container);var a="svg";e.animType?a=e.animType:e.renderer&&(a=e.renderer);var i=getRenderer(a);this.renderer=new i(this,e.rendererSettings),this.imagePreloader.setCacheType(a,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=a,e.loop===""||e.loop===null||e.loop===void 0||e.loop===!0?this.loop=!0:e.loop===!1?this.loop=!1:this.loop=parseInt(e.loop,10),this.autoplay="autoplay"in e?e.autoplay:!0,this.name=e.name?e.name:"",this.autoloadSegments=Object.prototype.hasOwnProperty.call(e,"autoloadSegments")?e.autoloadSegments:!0,this.assetsPath=e.assetsPath,this.initialSegment=e.initialSegment,e.audioFactory&&this.audioController.setAudioFactory(e.audioFactory),e.animationData?this.setupAnimation(e.animationData):e.path&&(e.path.lastIndexOf("\\")!==-1?this.path=e.path.substr(0,e.path.lastIndexOf("\\")+1):this.path=e.path.substr(0,e.path.lastIndexOf("/")+1),this.fileName=e.path.substr(e.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(e.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(e){dataManager.completeAnimation(e,this.configAnimation)},AnimationItem.prototype.setData=function(e,a){a&&_typeof$4(a)!=="object"&&(a=JSON.parse(a));var i={wrapper:e,animationData:a},o=e.attributes;i.path=o.getNamedItem("data-animation-path")?o.getNamedItem("data-animation-path").value:o.getNamedItem("data-bm-path")?o.getNamedItem("data-bm-path").value:o.getNamedItem("bm-path")?o.getNamedItem("bm-path").value:"",i.animType=o.getNamedItem("data-anim-type")?o.getNamedItem("data-anim-type").value:o.getNamedItem("data-bm-type")?o.getNamedItem("data-bm-type").value:o.getNamedItem("bm-type")?o.getNamedItem("bm-type").value:o.getNamedItem("data-bm-renderer")?o.getNamedItem("data-bm-renderer").value:o.getNamedItem("bm-renderer")?o.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var c=o.getNamedItem("data-anim-loop")?o.getNamedItem("data-anim-loop").value:o.getNamedItem("data-bm-loop")?o.getNamedItem("data-bm-loop").value:o.getNamedItem("bm-loop")?o.getNamedItem("bm-loop").value:"";c==="false"?i.loop=!1:c==="true"?i.loop=!0:c!==""&&(i.loop=parseInt(c,10));var d=o.getNamedItem("data-anim-autoplay")?o.getNamedItem("data-anim-autoplay").value:o.getNamedItem("data-bm-autoplay")?o.getNamedItem("data-bm-autoplay").value:o.getNamedItem("bm-autoplay")?o.getNamedItem("bm-autoplay").value:!0;i.autoplay=d!=="false",i.name=o.getNamedItem("data-name")?o.getNamedItem("data-name").value:o.getNamedItem("data-bm-name")?o.getNamedItem("data-bm-name").value:o.getNamedItem("bm-name")?o.getNamedItem("bm-name").value:"";var g=o.getNamedItem("data-anim-prerender")?o.getNamedItem("data-anim-prerender").value:o.getNamedItem("data-bm-prerender")?o.getNamedItem("data-bm-prerender").value:o.getNamedItem("bm-prerender")?o.getNamedItem("bm-prerender").value:"";g==="false"&&(i.prerender=!1),i.path?this.setParams(i):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(e){e.op>this.animationData.op&&(this.animationData.op=e.op,this.totalFrames=Math.floor(e.op-this.animationData.ip));var a=this.animationData.layers,i,o=a.length,c=e.layers,d,g=c.length;for(d=0;d<g;d+=1)for(i=0;i<o;){if(a[i].id===c[d].id){a[i]=c[d];break}i+=1}if((e.chars||e.fonts)&&(this.renderer.globalData.fontManager.addChars(e.chars),this.renderer.globalData.fontManager.addFonts(e.fonts,this.renderer.globalData.defs)),e.assets)for(o=e.assets.length,i=0;i<o;i+=1)this.animationData.assets.push(e.assets[i]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(e){this.animationData=e;var a=getExpressionsPlugin();a&&a.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var e=this.animationData.segments;if(!e||e.length===0||!this.autoloadSegments){this.trigger("data_ready"),this.timeCompleted=this.totalFrames;return}var a=e.shift();this.timeCompleted=a.time*this.frameRate;var i=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(i,this.includeLayers.bind(this),(function(){this.trigger("data_failed")}).bind(this))},AnimationItem.prototype.loadSegments=function(){var e=this.animationData.segments;e||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(e){if(this.renderer)try{this.animationData=e,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(e),e.assets||(e.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(e.assets),this.markers=markerParser(e.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(a){this.triggerConfigError(a)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||this.renderer.rendererType!=="canvas")&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var e=getExpressionsPlugin();e&&e.initExpressions(this),this.renderer.initItems(),setTimeout((function(){this.trigger("DOMLoaded")}).bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(e,a){var i=typeof e=="number"?e:void 0,o=typeof a=="number"?a:void 0;this.renderer.updateContainerSize(i,o)},AnimationItem.prototype.setSubframe=function(e){this.isSubframeEnabled=!!e},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!(this.isLoaded===!1||!this.renderer))try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(e){this.triggerRenderFrameError(e)}},AnimationItem.prototype.play=function(e){e&&this.name!==e||this.isPaused===!0&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(e){e&&this.name!==e||this.isPaused===!1&&(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(e){e&&this.name!==e||(this.isPaused===!0?this.play():this.pause())},AnimationItem.prototype.stop=function(e){e&&this.name!==e||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(e){for(var a,i=0;i<this.markers.length;i+=1)if(a=this.markers[i],a.payload&&a.payload.name===e)return a;return null},AnimationItem.prototype.goToAndStop=function(e,a,i){if(!(i&&this.name!==i)){var o=Number(e);if(isNaN(o)){var c=this.getMarkerData(e);c&&this.goToAndStop(c.time,!0)}else a?this.setCurrentRawFrameValue(e):this.setCurrentRawFrameValue(e*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(e,a,i){if(!(i&&this.name!==i)){var o=Number(e);if(isNaN(o)){var c=this.getMarkerData(e);c&&(c.duration?this.playSegments([c.time,c.time+c.duration],!0):this.goToAndStop(c.time,!0))}else this.goToAndStop(o,a,i);this.play()}},AnimationItem.prototype.advanceTime=function(e){if(!(this.isPaused===!0||this.isLoaded===!1)){var a=this.currentRawFrame+e*this.frameModifier,i=!1;a>=this.totalFrames-1&&this.frameModifier>0?!this.loop||this.playCount===this.loop?this.checkSegments(a>this.totalFrames?a%this.totalFrames:0)||(i=!0,a=this.totalFrames-1):a>=this.totalFrames?(this.playCount+=1,this.checkSegments(a%this.totalFrames)||(this.setCurrentRawFrameValue(a%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(a):a<0?this.checkSegments(a%this.totalFrames)||(this.loop&&!(this.playCount--<=0&&this.loop!==!0)?(this.setCurrentRawFrameValue(this.totalFrames+a%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0):(i=!0,a=0)):this.setCurrentRawFrameValue(a),i&&(this.setCurrentRawFrameValue(a),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(e,a){this.playCount=0,e[1]<e[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=e[0]-e[1],this.timeCompleted=this.totalFrames,this.firstFrame=e[1],this.setCurrentRawFrameValue(this.totalFrames-.001-a)):e[1]>e[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=e[1]-e[0],this.timeCompleted=this.totalFrames,this.firstFrame=e[0],this.setCurrentRawFrameValue(.001+a)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(e,a){var i=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<e?i=e:this.currentRawFrame+this.firstFrame>a&&(i=a-e)),this.firstFrame=e,this.totalFrames=a-e,this.timeCompleted=this.totalFrames,i!==-1&&this.goToAndStop(i,!0)},AnimationItem.prototype.playSegments=function(e,a){if(a&&(this.segments.length=0),_typeof$4(e[0])==="object"){var i,o=e.length;for(i=0;i<o;i+=1)this.segments.push(e[i])}else this.segments.push(e);this.segments.length&&a&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(e){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),e&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(e){return this.segments.length?(this.adjustSegment(this.segments.shift(),e),!0):!1},AnimationItem.prototype.destroy=function(e){e&&this.name!==e||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(e){this.currentRawFrame=e,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(e){this.playSpeed=e,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(e){this.playDirection=e<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(e){this.loop=e},AnimationItem.prototype.setVolume=function(e,a){a&&this.name!==a||this.audioController.setVolume(e)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(e){e&&this.name!==e||this.audioController.mute()},AnimationItem.prototype.unmute=function(e){e&&this.name!==e||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(e){var a="";if(e.e)a=e.p;else if(this.assetsPath){var i=e.p;i.indexOf("images/")!==-1&&(i=i.split("/")[1]),a=this.assetsPath+i}else a=this.path,a+=e.u?e.u:"",a+=e.p;return a},AnimationItem.prototype.getAssetData=function(e){for(var a=0,i=this.assets.length;a<i;){if(e===this.assets[a].id)return this.assets[a];a+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(e){return e?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(e,a,i){try{var o=this.renderer.getElementByPath(e);o.updateDocumentData(a,i)}catch{}},AnimationItem.prototype.trigger=function(e){if(this._cbs&&this._cbs[e])switch(e){case"enterFrame":this.triggerEvent(e,new BMEnterFrameEvent(e,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(e,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(e,new BMCompleteLoopEvent(e,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(e,new BMCompleteEvent(e,this.frameMult));break;case"segmentStart":this.triggerEvent(e,new BMSegmentStartEvent(e,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(e,new BMDestroyEvent(e,this));break;default:this.triggerEvent(e)}e==="enterFrame"&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(e,this.currentFrame,this.totalFrames,this.frameMult)),e==="loopComplete"&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(e,this.loop,this.playCount,this.frameMult)),e==="complete"&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(e,this.frameMult)),e==="segmentStart"&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(e,this.firstFrame,this.totalFrames)),e==="destroy"&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(e,this))},AnimationItem.prototype.triggerRenderFrameError=function(e){var a=new BMRenderFrameErrorEvent(e,this.currentFrame);this.triggerEvent("error",a),this.onError&&this.onError.call(this,a)},AnimationItem.prototype.triggerConfigError=function(e){var a=new BMConfigErrorEvent(e,this.currentFrame);this.triggerEvent("error",a),this.onError&&this.onError.call(this,a)};var animationManager=function(){var e={},a=[],i=0,o=0,c=0,d=!0,g=!1;function b(ds){for(var un=0,dr=ds.target;un<o;)a[un].animation===dr&&(a.splice(un,1),un-=1,o-=1,dr.isPaused||_e()),un+=1}function j(ds,un){if(!ds)return null;for(var dr=0;dr<o;){if(a[dr].elem===ds&&a[dr].elem!==null)return a[dr].animation;dr+=1}var us=new AnimationItem;return st(us,ds),us.setData(ds,un),us}function $(){var ds,un=a.length,dr=[];for(ds=0;ds<un;ds+=1)dr.push(a[ds].animation);return dr}function rt(){c+=1,Ht()}function _e(){c-=1}function st(ds,un){ds.addEventListener("destroy",b),ds.addEventListener("_active",rt),ds.addEventListener("_idle",_e),a.push({elem:un,animation:ds}),o+=1}function ut(ds){var un=new AnimationItem;return st(un,null),un.setParams(ds),un}function gt(ds,un){var dr;for(dr=0;dr<o;dr+=1)a[dr].animation.setSpeed(ds,un)}function yt(ds,un){var dr;for(dr=0;dr<o;dr+=1)a[dr].animation.setDirection(ds,un)}function Pt(ds){var un;for(un=0;un<o;un+=1)a[un].animation.play(ds)}function wt(ds){var un=ds-i,dr;for(dr=0;dr<o;dr+=1)a[dr].animation.advanceTime(un);i=ds,c&&!g?window.requestAnimationFrame(wt):d=!0}function Ct(ds){i=ds,window.requestAnimationFrame(wt)}function At(ds){var un;for(un=0;un<o;un+=1)a[un].animation.pause(ds)}function Tt(ds,un,dr){var us;for(us=0;us<o;us+=1)a[us].animation.goToAndStop(ds,un,dr)}function kt(ds){var un;for(un=0;un<o;un+=1)a[un].animation.stop(ds)}function It(ds){var un;for(un=0;un<o;un+=1)a[un].animation.togglePause(ds)}function Lt(ds){var un;for(un=o-1;un>=0;un-=1)a[un].animation.destroy(ds)}function Ft(ds,un,dr){var us=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),Nn,gn=us.length;for(Nn=0;Nn<gn;Nn+=1)dr&&us[Nn].setAttribute("data-bm-type",dr),j(us[Nn],ds);if(un&&gn===0){dr||(dr="svg");var Zn=document.getElementsByTagName("body")[0];Zn.innerText="";var xu=createTag("div");xu.style.width="100%",xu.style.height="100%",xu.setAttribute("data-bm-type",dr),Zn.appendChild(xu),j(xu,ds)}}function Nt(){var ds;for(ds=0;ds<o;ds+=1)a[ds].animation.resize()}function Ht(){!g&&c&&d&&(window.requestAnimationFrame(Ct),d=!1)}function Gr(){g=!0}function hs(){g=!1,Ht()}function _s(ds,un){var dr;for(dr=0;dr<o;dr+=1)a[dr].animation.setVolume(ds,un)}function hn(ds){var un;for(un=0;un<o;un+=1)a[un].animation.mute(ds)}function Qn(ds){var un;for(un=0;un<o;un+=1)a[un].animation.unmute(ds)}return e.registerAnimation=j,e.loadAnimation=ut,e.setSpeed=gt,e.setDirection=yt,e.play=Pt,e.pause=At,e.stop=kt,e.togglePause=It,e.searchAnimations=Ft,e.resize=Nt,e.goToAndStop=Tt,e.destroy=Lt,e.freeze=Gr,e.unfreeze=hs,e.setVolume=_s,e.mute=hn,e.unmute=Qn,e.getRegisteredAnimations=$,e}(),BezierFactory=function(){var e={};e.getBezierEasing=i;var a={};function i(Ct,At,Tt,kt,It){var Lt=It||("bez_"+Ct+"_"+At+"_"+Tt+"_"+kt).replace(/\./g,"p");if(a[Lt])return a[Lt];var Ft=new wt([Ct,At,Tt,kt]);return a[Lt]=Ft,Ft}var o=4,c=.001,d=1e-7,g=10,b=11,j=1/(b-1),$=typeof Float32Array=="function";function rt(Ct,At){return 1-3*At+3*Ct}function _e(Ct,At){return 3*At-6*Ct}function st(Ct){return 3*Ct}function ut(Ct,At,Tt){return((rt(At,Tt)*Ct+_e(At,Tt))*Ct+st(At))*Ct}function gt(Ct,At,Tt){return 3*rt(At,Tt)*Ct*Ct+2*_e(At,Tt)*Ct+st(At)}function yt(Ct,At,Tt,kt,It){var Lt,Ft,Nt=0;do Ft=At+(Tt-At)/2,Lt=ut(Ft,kt,It)-Ct,Lt>0?Tt=Ft:At=Ft;while(Math.abs(Lt)>d&&++Nt<g);return Ft}function Pt(Ct,At,Tt,kt){for(var It=0;It<o;++It){var Lt=gt(At,Tt,kt);if(Lt===0)return At;var Ft=ut(At,Tt,kt)-Ct;At-=Ft/Lt}return At}function wt(Ct){this._p=Ct,this._mSampleValues=$?new Float32Array(b):new Array(b),this._precomputed=!1,this.get=this.get.bind(this)}return wt.prototype={get:function(At){var Tt=this._p[0],kt=this._p[1],It=this._p[2],Lt=this._p[3];return this._precomputed||this._precompute(),Tt===kt&&It===Lt?At:At===0?0:At===1?1:ut(this._getTForX(At),kt,Lt)},_precompute:function(){var At=this._p[0],Tt=this._p[1],kt=this._p[2],It=this._p[3];this._precomputed=!0,(At!==Tt||kt!==It)&&this._calcSampleValues()},_calcSampleValues:function(){for(var At=this._p[0],Tt=this._p[2],kt=0;kt<b;++kt)this._mSampleValues[kt]=ut(kt*j,At,Tt)},_getTForX:function(At){for(var Tt=this._p[0],kt=this._p[2],It=this._mSampleValues,Lt=0,Ft=1,Nt=b-1;Ft!==Nt&&It[Ft]<=At;++Ft)Lt+=j;--Ft;var Ht=(At-It[Ft])/(It[Ft+1]-It[Ft]),Gr=Lt+Ht*j,hs=gt(Gr,Tt,kt);return hs>=c?Pt(At,Gr,Tt,kt):hs===0?Gr:yt(At,Lt,Lt+j,Tt,kt)}},e}(),pooling=function(){function e(a){return a.concat(createSizedArray(a.length))}return{double:e}}(),poolFactory=function(){return function(e,a,i){var o=0,c=e,d=createSizedArray(c),g={newElement:b,release:j};function b(){var $;return o?(o-=1,$=d[o]):$=a(),$}function j($){o===c&&(d=pooling.double(d),c*=2),i&&i($),d[o]=$,o+=1}return g}}(),bezierLengthPool=function(){function e(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}return poolFactory(8,e)}(),segmentsLengthPool=function(){function e(){return{lengths:[],totalLength:0}}function a(i){var o,c=i.lengths.length;for(o=0;o<c;o+=1)bezierLengthPool.release(i.lengths[o]);i.lengths.length=0}return poolFactory(8,e,a)}();function bezFunction(){var e=Math;function a(st,ut,gt,yt,Pt,wt){var Ct=st*yt+ut*Pt+gt*wt-Pt*yt-wt*st-gt*ut;return Ct>-.001&&Ct<.001}function i(st,ut,gt,yt,Pt,wt,Ct,At,Tt){if(gt===0&&wt===0&&Tt===0)return a(st,ut,yt,Pt,Ct,At);var kt=e.sqrt(e.pow(yt-st,2)+e.pow(Pt-ut,2)+e.pow(wt-gt,2)),It=e.sqrt(e.pow(Ct-st,2)+e.pow(At-ut,2)+e.pow(Tt-gt,2)),Lt=e.sqrt(e.pow(Ct-yt,2)+e.pow(At-Pt,2)+e.pow(Tt-wt,2)),Ft;return kt>It?kt>Lt?Ft=kt-It-Lt:Ft=Lt-It-kt:Lt>It?Ft=Lt-It-kt:Ft=It-kt-Lt,Ft>-1e-4&&Ft<1e-4}var o=function(){return function(st,ut,gt,yt){var Pt=getDefaultCurveSegments(),wt,Ct,At,Tt,kt,It=0,Lt,Ft=[],Nt=[],Ht=bezierLengthPool.newElement();for(At=gt.length,wt=0;wt<Pt;wt+=1){for(kt=wt/(Pt-1),Lt=0,Ct=0;Ct<At;Ct+=1)Tt=bmPow(1-kt,3)*st[Ct]+3*bmPow(1-kt,2)*kt*gt[Ct]+3*(1-kt)*bmPow(kt,2)*yt[Ct]+bmPow(kt,3)*ut[Ct],Ft[Ct]=Tt,Nt[Ct]!==null&&(Lt+=bmPow(Ft[Ct]-Nt[Ct],2)),Nt[Ct]=Ft[Ct];Lt&&(Lt=bmSqrt(Lt),It+=Lt),Ht.percents[wt]=kt,Ht.lengths[wt]=It}return Ht.addedLength=It,Ht}}();function c(st){var ut=segmentsLengthPool.newElement(),gt=st.c,yt=st.v,Pt=st.o,wt=st.i,Ct,At=st._length,Tt=ut.lengths,kt=0;for(Ct=0;Ct<At-1;Ct+=1)Tt[Ct]=o(yt[Ct],yt[Ct+1],Pt[Ct],wt[Ct+1]),kt+=Tt[Ct].addedLength;return gt&&At&&(Tt[Ct]=o(yt[Ct],yt[0],Pt[Ct],wt[0]),kt+=Tt[Ct].addedLength),ut.totalLength=kt,ut}function d(st){this.segmentLength=0,this.points=new Array(st)}function g(st,ut){this.partialLength=st,this.point=ut}var b=function(){var st={};return function(ut,gt,yt,Pt){var wt=(ut[0]+"_"+ut[1]+"_"+gt[0]+"_"+gt[1]+"_"+yt[0]+"_"+yt[1]+"_"+Pt[0]+"_"+Pt[1]).replace(/\./g,"p");if(!st[wt]){var Ct=getDefaultCurveSegments(),At,Tt,kt,It,Lt,Ft=0,Nt,Ht,Gr=null;ut.length===2&&(ut[0]!==gt[0]||ut[1]!==gt[1])&&a(ut[0],ut[1],gt[0],gt[1],ut[0]+yt[0],ut[1]+yt[1])&&a(ut[0],ut[1],gt[0],gt[1],gt[0]+Pt[0],gt[1]+Pt[1])&&(Ct=2);var hs=new d(Ct);for(kt=yt.length,At=0;At<Ct;At+=1){for(Ht=createSizedArray(kt),Lt=At/(Ct-1),Nt=0,Tt=0;Tt<kt;Tt+=1)It=bmPow(1-Lt,3)*ut[Tt]+3*bmPow(1-Lt,2)*Lt*(ut[Tt]+yt[Tt])+3*(1-Lt)*bmPow(Lt,2)*(gt[Tt]+Pt[Tt])+bmPow(Lt,3)*gt[Tt],Ht[Tt]=It,Gr!==null&&(Nt+=bmPow(Ht[Tt]-Gr[Tt],2));Nt=bmSqrt(Nt),Ft+=Nt,hs.points[At]=new g(Nt,Ht),Gr=Ht}hs.segmentLength=Ft,st[wt]=hs}return st[wt]}}();function j(st,ut){var gt=ut.percents,yt=ut.lengths,Pt=gt.length,wt=bmFloor((Pt-1)*st),Ct=st*ut.addedLength,At=0;if(wt===Pt-1||wt===0||Ct===yt[wt])return gt[wt];for(var Tt=yt[wt]>Ct?-1:1,kt=!0;kt;)if(yt[wt]<=Ct&&yt[wt+1]>Ct?(At=(Ct-yt[wt])/(yt[wt+1]-yt[wt]),kt=!1):wt+=Tt,wt<0||wt>=Pt-1){if(wt===Pt-1)return gt[wt];kt=!1}return gt[wt]+(gt[wt+1]-gt[wt])*At}function $(st,ut,gt,yt,Pt,wt){var Ct=j(Pt,wt),At=1-Ct,Tt=e.round((At*At*At*st[0]+(Ct*At*At+At*Ct*At+At*At*Ct)*gt[0]+(Ct*Ct*At+At*Ct*Ct+Ct*At*Ct)*yt[0]+Ct*Ct*Ct*ut[0])*1e3)/1e3,kt=e.round((At*At*At*st[1]+(Ct*At*At+At*Ct*At+At*At*Ct)*gt[1]+(Ct*Ct*At+At*Ct*Ct+Ct*At*Ct)*yt[1]+Ct*Ct*Ct*ut[1])*1e3)/1e3;return[Tt,kt]}var rt=createTypedArray("float32",8);function _e(st,ut,gt,yt,Pt,wt,Ct){Pt<0?Pt=0:Pt>1&&(Pt=1);var At=j(Pt,Ct);wt=wt>1?1:wt;var Tt=j(wt,Ct),kt,It=st.length,Lt=1-At,Ft=1-Tt,Nt=Lt*Lt*Lt,Ht=At*Lt*Lt*3,Gr=At*At*Lt*3,hs=At*At*At,_s=Lt*Lt*Ft,hn=At*Lt*Ft+Lt*At*Ft+Lt*Lt*Tt,Qn=At*At*Ft+Lt*At*Tt+At*Lt*Tt,ds=At*At*Tt,un=Lt*Ft*Ft,dr=At*Ft*Ft+Lt*Tt*Ft+Lt*Ft*Tt,us=At*Tt*Ft+Lt*Tt*Tt+At*Ft*Tt,Nn=At*Tt*Tt,gn=Ft*Ft*Ft,Zn=Tt*Ft*Ft+Ft*Tt*Ft+Ft*Ft*Tt,xu=Tt*Tt*Ft+Ft*Tt*Tt+Tt*Ft*Tt,au=Tt*Tt*Tt;for(kt=0;kt<It;kt+=1)rt[kt*4]=e.round((Nt*st[kt]+Ht*gt[kt]+Gr*yt[kt]+hs*ut[kt])*1e3)/1e3,rt[kt*4+1]=e.round((_s*st[kt]+hn*gt[kt]+Qn*yt[kt]+ds*ut[kt])*1e3)/1e3,rt[kt*4+2]=e.round((un*st[kt]+dr*gt[kt]+us*yt[kt]+Nn*ut[kt])*1e3)/1e3,rt[kt*4+3]=e.round((gn*st[kt]+Zn*gt[kt]+xu*yt[kt]+au*ut[kt])*1e3)/1e3;return rt}return{getSegmentsLength:c,getNewSegment:_e,getPointInSegment:$,buildBezierData:b,pointOnLine2D:a,pointOnLine3D:i}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(e,a){var i=this.offsetTime,o;this.propType==="multidimensional"&&(o=createTypedArray("float32",this.pv.length));for(var c=a.lastIndex,d=c,g=this.keyframes.length-1,b=!0,j,$,rt;b;){if(j=this.keyframes[d],$=this.keyframes[d+1],d===g-1&&e>=$.t-i){j.h&&(j=$),c=0;break}if($.t-i>e){c=d;break}d<g-1?d+=1:(c=0,b=!1)}rt=this.keyframesMetadata[d]||{};var _e,st,ut,gt,yt,Pt,wt=$.t-i,Ct=j.t-i,At;if(j.to){rt.bezierData||(rt.bezierData=bez.buildBezierData(j.s,$.s||j.e,j.to,j.ti));var Tt=rt.bezierData;if(e>=wt||e<Ct){var kt=e>=wt?Tt.points.length-1:0;for(st=Tt.points[kt].point.length,_e=0;_e<st;_e+=1)o[_e]=Tt.points[kt].point[_e]}else{rt.__fnct?Pt=rt.__fnct:(Pt=BezierFactory.getBezierEasing(j.o.x,j.o.y,j.i.x,j.i.y,j.n).get,rt.__fnct=Pt),ut=Pt((e-Ct)/(wt-Ct));var It=Tt.segmentLength*ut,Lt,Ft=a.lastFrame<e&&a._lastKeyframeIndex===d?a._lastAddedLength:0;for(yt=a.lastFrame<e&&a._lastKeyframeIndex===d?a._lastPoint:0,b=!0,gt=Tt.points.length;b;){if(Ft+=Tt.points[yt].partialLength,It===0||ut===0||yt===Tt.points.length-1){for(st=Tt.points[yt].point.length,_e=0;_e<st;_e+=1)o[_e]=Tt.points[yt].point[_e];break}else if(It>=Ft&&It<Ft+Tt.points[yt+1].partialLength){for(Lt=(It-Ft)/Tt.points[yt+1].partialLength,st=Tt.points[yt].point.length,_e=0;_e<st;_e+=1)o[_e]=Tt.points[yt].point[_e]+(Tt.points[yt+1].point[_e]-Tt.points[yt].point[_e])*Lt;break}yt<gt-1?yt+=1:b=!1}a._lastPoint=yt,a._lastAddedLength=Ft-Tt.points[yt].partialLength,a._lastKeyframeIndex=d}}else{var Nt,Ht,Gr,hs,_s;if(g=j.s.length,At=$.s||j.e,this.sh&&j.h!==1)if(e>=wt)o[0]=At[0],o[1]=At[1],o[2]=At[2];else if(e<=Ct)o[0]=j.s[0],o[1]=j.s[1],o[2]=j.s[2];else{var hn=createQuaternion(j.s),Qn=createQuaternion(At),ds=(e-Ct)/(wt-Ct);quaternionToEuler(o,slerp(hn,Qn,ds))}else for(d=0;d<g;d+=1)j.h!==1&&(e>=wt?ut=1:e<Ct?ut=0:(j.o.x.constructor===Array?(rt.__fnct||(rt.__fnct=[]),rt.__fnct[d]?Pt=rt.__fnct[d]:(Nt=j.o.x[d]===void 0?j.o.x[0]:j.o.x[d],Ht=j.o.y[d]===void 0?j.o.y[0]:j.o.y[d],Gr=j.i.x[d]===void 0?j.i.x[0]:j.i.x[d],hs=j.i.y[d]===void 0?j.i.y[0]:j.i.y[d],Pt=BezierFactory.getBezierEasing(Nt,Ht,Gr,hs).get,rt.__fnct[d]=Pt)):rt.__fnct?Pt=rt.__fnct:(Nt=j.o.x,Ht=j.o.y,Gr=j.i.x,hs=j.i.y,Pt=BezierFactory.getBezierEasing(Nt,Ht,Gr,hs).get,j.keyframeMetadata=Pt),ut=Pt((e-Ct)/(wt-Ct)))),At=$.s||j.e,_s=j.h===1?j.s[d]:j.s[d]+(At[d]-j.s[d])*ut,this.propType==="multidimensional"?o[d]=_s:o=_s}return a.lastIndex=c,o}function slerp(e,a,i){var o=[],c=e[0],d=e[1],g=e[2],b=e[3],j=a[0],$=a[1],rt=a[2],_e=a[3],st,ut,gt,yt,Pt;return ut=c*j+d*$+g*rt+b*_e,ut<0&&(ut=-ut,j=-j,$=-$,rt=-rt,_e=-_e),1-ut>1e-6?(st=Math.acos(ut),gt=Math.sin(st),yt=Math.sin((1-i)*st)/gt,Pt=Math.sin(i*st)/gt):(yt=1-i,Pt=i),o[0]=yt*c+Pt*j,o[1]=yt*d+Pt*$,o[2]=yt*g+Pt*rt,o[3]=yt*b+Pt*_e,o}function quaternionToEuler(e,a){var i=a[0],o=a[1],c=a[2],d=a[3],g=Math.atan2(2*o*d-2*i*c,1-2*o*o-2*c*c),b=Math.asin(2*i*o+2*c*d),j=Math.atan2(2*i*d-2*o*c,1-2*i*i-2*c*c);e[0]=g/degToRads,e[1]=b/degToRads,e[2]=j/degToRads}function createQuaternion(e){var a=e[0]*degToRads,i=e[1]*degToRads,o=e[2]*degToRads,c=Math.cos(a/2),d=Math.cos(i/2),g=Math.cos(o/2),b=Math.sin(a/2),j=Math.sin(i/2),$=Math.sin(o/2),rt=c*d*g-b*j*$,_e=b*j*g+c*d*$,st=b*d*g+c*j*$,ut=c*j*g-b*d*$;return[_e,st,ut,rt]}function getValueAtCurrentTime(){var e=this.comp.renderedFrame-this.offsetTime,a=this.keyframes[0].t-this.offsetTime,i=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(e===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=i&&e>=i||this._caching.lastFrame<a&&e<a))){this._caching.lastFrame>=e&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var o=this.interpolateValue(e,this._caching);this.pv=o}return this._caching.lastFrame=e,this.pv}function setVValue(e){var a;if(this.propType==="unidimensional")a=e*this.mult,mathAbs(this.v-a)>1e-5&&(this.v=a,this._mdf=!0);else for(var i=0,o=this.v.length;i<o;)a=e[i]*this.mult,mathAbs(this.v[i]-a)>1e-5&&(this.v[i]=a,this._mdf=!0),i+=1}function processEffectsSequence(){if(!(this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)){if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=this._isFirstFrame;var e,a=this.effectsSequence.length,i=this.kf?this.pv:this.data.k;for(e=0;e<a;e+=1)i=this.effectsSequence[e](i);this.setVValue(i),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(e){this.effectsSequence.push(e),this.container.addDynamicProperty(this)}function ValueProperty(e,a,i,o){this.propType="unidimensional",this.mult=i||1,this.data=a,this.v=i?a.k*i:a.k,this.pv=a.k,this._mdf=!1,this.elem=e,this.container=o,this.comp=e.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(e,a,i,o){this.propType="multidimensional",this.mult=i||1,this.data=a,this._mdf=!1,this.elem=e,this.container=o,this.comp=e.comp,this.k=!1,this.kf=!1,this.frameId=-1;var c,d=a.k.length;for(this.v=createTypedArray("float32",d),this.pv=createTypedArray("float32",d),this.vel=createTypedArray("float32",d),c=0;c<d;c+=1)this.v[c]=a.k[c]*this.mult,this.pv[c]=a.k[c];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(e,a,i,o){this.propType="unidimensional",this.keyframes=a.k,this.keyframesMetadata=[],this.offsetTime=e.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=a,this.mult=i||1,this.elem=e,this.container=o,this.comp=e.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(e,a,i,o){this.propType="multidimensional";var c,d=a.k.length,g,b,j,$;for(c=0;c<d-1;c+=1)a.k[c].to&&a.k[c].s&&a.k[c+1]&&a.k[c+1].s&&(g=a.k[c].s,b=a.k[c+1].s,j=a.k[c].to,$=a.k[c].ti,(g.length===2&&!(g[0]===b[0]&&g[1]===b[1])&&bez.pointOnLine2D(g[0],g[1],b[0],b[1],g[0]+j[0],g[1]+j[1])&&bez.pointOnLine2D(g[0],g[1],b[0],b[1],b[0]+$[0],b[1]+$[1])||g.length===3&&!(g[0]===b[0]&&g[1]===b[1]&&g[2]===b[2])&&bez.pointOnLine3D(g[0],g[1],g[2],b[0],b[1],b[2],g[0]+j[0],g[1]+j[1],g[2]+j[2])&&bez.pointOnLine3D(g[0],g[1],g[2],b[0],b[1],b[2],b[0]+$[0],b[1]+$[1],b[2]+$[2]))&&(a.k[c].to=null,a.k[c].ti=null),g[0]===b[0]&&g[1]===b[1]&&j[0]===0&&j[1]===0&&$[0]===0&&$[1]===0&&(g.length===2||g[2]===b[2]&&j[2]===0&&$[2]===0)&&(a.k[c].to=null,a.k[c].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=a,this.keyframes=a.k,this.keyframesMetadata=[],this.offsetTime=e.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=i||1,this.elem=e,this.container=o,this.comp=e.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var rt=a.k[0].s.length;for(this.v=createTypedArray("float32",rt),this.pv=createTypedArray("float32",rt),c=0;c<rt;c+=1)this.v[c]=initFrame,this.pv[c]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",rt)},this.addEffect=addEffect}var PropertyFactory=function(){function e(i,o,c,d,g){o.sid&&(o=i.globalData.slotManager.getProp(o));var b;if(!o.k.length)b=new ValueProperty(i,o,d,g);else if(typeof o.k[0]=="number")b=new MultiDimensionalProperty(i,o,d,g);else switch(c){case 0:b=new KeyframedValueProperty(i,o,d,g);break;case 1:b=new KeyframedMultidimensionalProperty(i,o,d,g);break}return b.effectsSequence.length&&g.addDynamicProperty(b),b}var a={getProp:e};return a}();function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(a){this.dynamicProperties.indexOf(a)===-1&&(this.dynamicProperties.push(a),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;var a,i=this.dynamicProperties.length;for(a=0;a<i;a+=1)this.dynamicProperties[a].getValue(),this.dynamicProperties[a]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(a){this.container=a,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=function(){function e(){return createTypedArray("float32",2)}return poolFactory(8,e)}();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(e,a){this.c=e,this.setLength(a);for(var i=0;i<a;)this.v[i]=pointPool.newElement(),this.o[i]=pointPool.newElement(),this.i[i]=pointPool.newElement(),i+=1},ShapePath.prototype.setLength=function(e){for(;this._maxLength<e;)this.doubleArrayLength();this._length=e},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(e,a,i,o,c){var d;switch(this._length=Math.max(this._length,o+1),this._length>=this._maxLength&&this.doubleArrayLength(),i){case"v":d=this.v;break;case"i":d=this.i;break;case"o":d=this.o;break;default:d=[];break}(!d[o]||d[o]&&!c)&&(d[o]=pointPool.newElement()),d[o][0]=e,d[o][1]=a},ShapePath.prototype.setTripleAt=function(e,a,i,o,c,d,g,b){this.setXYAt(e,a,"v",g,b),this.setXYAt(i,o,"o",g,b),this.setXYAt(c,d,"i",g,b)},ShapePath.prototype.reverse=function(){var e=new ShapePath;e.setPathData(this.c,this._length);var a=this.v,i=this.o,o=this.i,c=0;this.c&&(e.setTripleAt(a[0][0],a[0][1],o[0][0],o[0][1],i[0][0],i[0][1],0,!1),c=1);var d=this._length-1,g=this._length,b;for(b=c;b<g;b+=1)e.setTripleAt(a[d][0],a[d][1],o[d][0],o[d][1],i[d][0],i[d][1],b,!1),d-=1;return e},ShapePath.prototype.length=function(){return this._length};var shapePool=function(){function e(){return new ShapePath}function a(c){var d=c._length,g;for(g=0;g<d;g+=1)pointPool.release(c.v[g]),pointPool.release(c.i[g]),pointPool.release(c.o[g]),c.v[g]=null,c.i[g]=null,c.o[g]=null;c._length=0,c.c=!1}function i(c){var d=o.newElement(),g,b=c._length===void 0?c.v.length:c._length;for(d.setLength(b),d.c=c.c,g=0;g<b;g+=1)d.setTripleAt(c.v[g][0],c.v[g][1],c.o[g][0],c.o[g][1],c.i[g][0],c.i[g][1],g);return d}var o=poolFactory(4,e,a);return o.clone=i,o}();function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(e){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=e,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var e;for(e=0;e<this._length;e+=1)shapePool.release(this.shapes[e]);this._length=0};var shapeCollectionPool=function(){var e={newShapeCollection:c,release:d},a=0,i=4,o=createSizedArray(i);function c(){var g;return a?(a-=1,g=o[a]):g=new ShapeCollection,g}function d(g){var b,j=g._length;for(b=0;b<j;b+=1)shapePool.release(g.shapes[b]);g._length=0,a===i&&(o=pooling.double(o),i*=2),o[a]=g,a+=1}return e}(),ShapePropertyFactory=function(){var e=-999999;function a(wt,Ct,At){var Tt=At.lastIndex,kt,It,Lt,Ft,Nt,Ht,Gr,hs,_s,hn=this.keyframes;if(wt<hn[0].t-this.offsetTime)kt=hn[0].s[0],Lt=!0,Tt=0;else if(wt>=hn[hn.length-1].t-this.offsetTime)kt=hn[hn.length-1].s?hn[hn.length-1].s[0]:hn[hn.length-2].e[0],Lt=!0;else{for(var Qn=Tt,ds=hn.length-1,un=!0,dr,us,Nn;un&&(dr=hn[Qn],us=hn[Qn+1],!(us.t-this.offsetTime>wt));)Qn<ds-1?Qn+=1:un=!1;if(Nn=this.keyframesMetadata[Qn]||{},Lt=dr.h===1,Tt=Qn,!Lt){if(wt>=us.t-this.offsetTime)hs=1;else if(wt<dr.t-this.offsetTime)hs=0;else{var gn;Nn.__fnct?gn=Nn.__fnct:(gn=BezierFactory.getBezierEasing(dr.o.x,dr.o.y,dr.i.x,dr.i.y).get,Nn.__fnct=gn),hs=gn((wt-(dr.t-this.offsetTime))/(us.t-this.offsetTime-(dr.t-this.offsetTime)))}It=us.s?us.s[0]:dr.e[0]}kt=dr.s[0]}for(Ht=Ct._length,Gr=kt.i[0].length,At.lastIndex=Tt,Ft=0;Ft<Ht;Ft+=1)for(Nt=0;Nt<Gr;Nt+=1)_s=Lt?kt.i[Ft][Nt]:kt.i[Ft][Nt]+(It.i[Ft][Nt]-kt.i[Ft][Nt])*hs,Ct.i[Ft][Nt]=_s,_s=Lt?kt.o[Ft][Nt]:kt.o[Ft][Nt]+(It.o[Ft][Nt]-kt.o[Ft][Nt])*hs,Ct.o[Ft][Nt]=_s,_s=Lt?kt.v[Ft][Nt]:kt.v[Ft][Nt]+(It.v[Ft][Nt]-kt.v[Ft][Nt])*hs,Ct.v[Ft][Nt]=_s}function i(){var wt=this.comp.renderedFrame-this.offsetTime,Ct=this.keyframes[0].t-this.offsetTime,At=this.keyframes[this.keyframes.length-1].t-this.offsetTime,Tt=this._caching.lastFrame;return Tt!==e&&(Tt<Ct&&wt<Ct||Tt>At&&wt>At)||(this._caching.lastIndex=Tt<wt?this._caching.lastIndex:0,this.interpolateShape(wt,this.pv,this._caching)),this._caching.lastFrame=wt,this.pv}function o(){this.paths=this.localShapeCollection}function c(wt,Ct){if(wt._length!==Ct._length||wt.c!==Ct.c)return!1;var At,Tt=wt._length;for(At=0;At<Tt;At+=1)if(wt.v[At][0]!==Ct.v[At][0]||wt.v[At][1]!==Ct.v[At][1]||wt.o[At][0]!==Ct.o[At][0]||wt.o[At][1]!==Ct.o[At][1]||wt.i[At][0]!==Ct.i[At][0]||wt.i[At][1]!==Ct.i[At][1])return!1;return!0}function d(wt){c(this.v,wt)||(this.v=shapePool.clone(wt),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function g(){if(this.elem.globalData.frameId!==this.frameId){if(!this.effectsSequence.length){this._mdf=!1;return}if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=!1;var wt;this.kf?wt=this.pv:this.data.ks?wt=this.data.ks.k:wt=this.data.pt.k;var Ct,At=this.effectsSequence.length;for(Ct=0;Ct<At;Ct+=1)wt=this.effectsSequence[Ct](wt);this.setVValue(wt),this.lock=!1,this.frameId=this.elem.globalData.frameId}}function b(wt,Ct,At){this.propType="shape",this.comp=wt.comp,this.container=wt,this.elem=wt,this.data=Ct,this.k=!1,this.kf=!1,this._mdf=!1;var Tt=At===3?Ct.pt.k:Ct.ks.k;this.v=shapePool.clone(Tt),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=o,this.effectsSequence=[]}function j(wt){this.effectsSequence.push(wt),this.container.addDynamicProperty(this)}b.prototype.interpolateShape=a,b.prototype.getValue=g,b.prototype.setVValue=d,b.prototype.addEffect=j;function $(wt,Ct,At){this.propType="shape",this.comp=wt.comp,this.elem=wt,this.container=wt,this.offsetTime=wt.data.st,this.keyframes=At===3?Ct.pt.k:Ct.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var Tt=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,Tt),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=e,this.reset=o,this._caching={lastFrame:e,lastIndex:0},this.effectsSequence=[i.bind(this)]}$.prototype.getValue=g,$.prototype.interpolateShape=a,$.prototype.setVValue=d,$.prototype.addEffect=j;var rt=function(){var wt=roundCorner;function Ct(At,Tt){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=Tt.d,this.elem=At,this.comp=At.comp,this.frameId=-1,this.initDynamicPropertyContainer(At),this.p=PropertyFactory.getProp(At,Tt.p,1,0,this),this.s=PropertyFactory.getProp(At,Tt.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return Ct.prototype={reset:o,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var Tt=this.p.v[0],kt=this.p.v[1],It=this.s.v[0]/2,Lt=this.s.v[1]/2,Ft=this.d!==3,Nt=this.v;Nt.v[0][0]=Tt,Nt.v[0][1]=kt-Lt,Nt.v[1][0]=Ft?Tt+It:Tt-It,Nt.v[1][1]=kt,Nt.v[2][0]=Tt,Nt.v[2][1]=kt+Lt,Nt.v[3][0]=Ft?Tt-It:Tt+It,Nt.v[3][1]=kt,Nt.i[0][0]=Ft?Tt-It*wt:Tt+It*wt,Nt.i[0][1]=kt-Lt,Nt.i[1][0]=Ft?Tt+It:Tt-It,Nt.i[1][1]=kt-Lt*wt,Nt.i[2][0]=Ft?Tt+It*wt:Tt-It*wt,Nt.i[2][1]=kt+Lt,Nt.i[3][0]=Ft?Tt-It:Tt+It,Nt.i[3][1]=kt+Lt*wt,Nt.o[0][0]=Ft?Tt+It*wt:Tt-It*wt,Nt.o[0][1]=kt-Lt,Nt.o[1][0]=Ft?Tt+It:Tt-It,Nt.o[1][1]=kt+Lt*wt,Nt.o[2][0]=Ft?Tt-It*wt:Tt+It*wt,Nt.o[2][1]=kt+Lt,Nt.o[3][0]=Ft?Tt-It:Tt+It,Nt.o[3][1]=kt-Lt*wt}},extendPrototype([DynamicPropertyContainer],Ct),Ct}(),_e=function(){function wt(Ct,At){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=Ct,this.comp=Ct.comp,this.data=At,this.frameId=-1,this.d=At.d,this.initDynamicPropertyContainer(Ct),At.sy===1?(this.ir=PropertyFactory.getProp(Ct,At.ir,0,0,this),this.is=PropertyFactory.getProp(Ct,At.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(Ct,At.pt,0,0,this),this.p=PropertyFactory.getProp(Ct,At.p,1,0,this),this.r=PropertyFactory.getProp(Ct,At.r,0,degToRads,this),this.or=PropertyFactory.getProp(Ct,At.or,0,0,this),this.os=PropertyFactory.getProp(Ct,At.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return wt.prototype={reset:o,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var At=Math.floor(this.pt.v)*2,Tt=Math.PI*2/At,kt=!0,It=this.or.v,Lt=this.ir.v,Ft=this.os.v,Nt=this.is.v,Ht=2*Math.PI*It/(At*2),Gr=2*Math.PI*Lt/(At*2),hs,_s,hn,Qn,ds=-Math.PI/2;ds+=this.r.v;var un=this.data.d===3?-1:1;for(this.v._length=0,hs=0;hs<At;hs+=1){_s=kt?It:Lt,hn=kt?Ft:Nt,Qn=kt?Ht:Gr;var dr=_s*Math.cos(ds),us=_s*Math.sin(ds),Nn=dr===0&&us===0?0:us/Math.sqrt(dr*dr+us*us),gn=dr===0&&us===0?0:-dr/Math.sqrt(dr*dr+us*us);dr+=+this.p.v[0],us+=+this.p.v[1],this.v.setTripleAt(dr,us,dr-Nn*Qn*hn*un,us-gn*Qn*hn*un,dr+Nn*Qn*hn*un,us+gn*Qn*hn*un,hs,!0),kt=!kt,ds+=Tt*un}},convertPolygonToPath:function(){var At=Math.floor(this.pt.v),Tt=Math.PI*2/At,kt=this.or.v,It=this.os.v,Lt=2*Math.PI*kt/(At*4),Ft,Nt=-Math.PI*.5,Ht=this.data.d===3?-1:1;for(Nt+=this.r.v,this.v._length=0,Ft=0;Ft<At;Ft+=1){var Gr=kt*Math.cos(Nt),hs=kt*Math.sin(Nt),_s=Gr===0&&hs===0?0:hs/Math.sqrt(Gr*Gr+hs*hs),hn=Gr===0&&hs===0?0:-Gr/Math.sqrt(Gr*Gr+hs*hs);Gr+=+this.p.v[0],hs+=+this.p.v[1],this.v.setTripleAt(Gr,hs,Gr-_s*Lt*It*Ht,hs-hn*Lt*It*Ht,Gr+_s*Lt*It*Ht,hs+hn*Lt*It*Ht,Ft,!0),Nt+=Tt*Ht}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],wt),wt}(),st=function(){function wt(Ct,At){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=Ct,this.comp=Ct.comp,this.frameId=-1,this.d=At.d,this.initDynamicPropertyContainer(Ct),this.p=PropertyFactory.getProp(Ct,At.p,1,0,this),this.s=PropertyFactory.getProp(Ct,At.s,1,0,this),this.r=PropertyFactory.getProp(Ct,At.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return wt.prototype={convertRectToPath:function(){var At=this.p.v[0],Tt=this.p.v[1],kt=this.s.v[0]/2,It=this.s.v[1]/2,Lt=bmMin(kt,It,this.r.v),Ft=Lt*(1-roundCorner);this.v._length=0,this.d===2||this.d===1?(this.v.setTripleAt(At+kt,Tt-It+Lt,At+kt,Tt-It+Lt,At+kt,Tt-It+Ft,0,!0),this.v.setTripleAt(At+kt,Tt+It-Lt,At+kt,Tt+It-Ft,At+kt,Tt+It-Lt,1,!0),Lt!==0?(this.v.setTripleAt(At+kt-Lt,Tt+It,At+kt-Lt,Tt+It,At+kt-Ft,Tt+It,2,!0),this.v.setTripleAt(At-kt+Lt,Tt+It,At-kt+Ft,Tt+It,At-kt+Lt,Tt+It,3,!0),this.v.setTripleAt(At-kt,Tt+It-Lt,At-kt,Tt+It-Lt,At-kt,Tt+It-Ft,4,!0),this.v.setTripleAt(At-kt,Tt-It+Lt,At-kt,Tt-It+Ft,At-kt,Tt-It+Lt,5,!0),this.v.setTripleAt(At-kt+Lt,Tt-It,At-kt+Lt,Tt-It,At-kt+Ft,Tt-It,6,!0),this.v.setTripleAt(At+kt-Lt,Tt-It,At+kt-Ft,Tt-It,At+kt-Lt,Tt-It,7,!0)):(this.v.setTripleAt(At-kt,Tt+It,At-kt+Ft,Tt+It,At-kt,Tt+It,2),this.v.setTripleAt(At-kt,Tt-It,At-kt,Tt-It+Ft,At-kt,Tt-It,3))):(this.v.setTripleAt(At+kt,Tt-It+Lt,At+kt,Tt-It+Ft,At+kt,Tt-It+Lt,0,!0),Lt!==0?(this.v.setTripleAt(At+kt-Lt,Tt-It,At+kt-Lt,Tt-It,At+kt-Ft,Tt-It,1,!0),this.v.setTripleAt(At-kt+Lt,Tt-It,At-kt+Ft,Tt-It,At-kt+Lt,Tt-It,2,!0),this.v.setTripleAt(At-kt,Tt-It+Lt,At-kt,Tt-It+Lt,At-kt,Tt-It+Ft,3,!0),this.v.setTripleAt(At-kt,Tt+It-Lt,At-kt,Tt+It-Ft,At-kt,Tt+It-Lt,4,!0),this.v.setTripleAt(At-kt+Lt,Tt+It,At-kt+Lt,Tt+It,At-kt+Ft,Tt+It,5,!0),this.v.setTripleAt(At+kt-Lt,Tt+It,At+kt-Ft,Tt+It,At+kt-Lt,Tt+It,6,!0),this.v.setTripleAt(At+kt,Tt+It-Lt,At+kt,Tt+It-Lt,At+kt,Tt+It-Ft,7,!0)):(this.v.setTripleAt(At-kt,Tt-It,At-kt+Ft,Tt-It,At-kt,Tt-It,1,!0),this.v.setTripleAt(At-kt,Tt+It,At-kt,Tt+It-Ft,At-kt,Tt+It,2,!0),this.v.setTripleAt(At+kt,Tt+It,At+kt-Ft,Tt+It,At+kt,Tt+It,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:o},extendPrototype([DynamicPropertyContainer],wt),wt}();function ut(wt,Ct,At){var Tt;if(At===3||At===4){var kt=At===3?Ct.pt:Ct.ks,It=kt.k;It.length?Tt=new $(wt,Ct,At):Tt=new b(wt,Ct,At)}else At===5?Tt=new st(wt,Ct):At===6?Tt=new rt(wt,Ct):At===7&&(Tt=new _e(wt,Ct));return Tt.k&&wt.addDynamicProperty(Tt),Tt}function gt(){return b}function yt(){return $}var Pt={};return Pt.getShapeProp=ut,Pt.getConstructorFunction=gt,Pt.getKeyframedConstructorFunction=yt,Pt}();/*!
 Transformation Matrix v2.0
 (c) Epistemex 2014-2015
 www.epistemex.com
 By Ken Fyrstenberg
 Contributions by leeoniya.
 License: MIT, header required.
 */var Matrix=function(){var e=Math.cos,a=Math.sin,i=Math.tan,o=Math.round;function c(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function d(dr){if(dr===0)return this;var us=e(dr),Nn=a(dr);return this._t(us,-Nn,0,0,Nn,us,0,0,0,0,1,0,0,0,0,1)}function g(dr){if(dr===0)return this;var us=e(dr),Nn=a(dr);return this._t(1,0,0,0,0,us,-Nn,0,0,Nn,us,0,0,0,0,1)}function b(dr){if(dr===0)return this;var us=e(dr),Nn=a(dr);return this._t(us,0,Nn,0,0,1,0,0,-Nn,0,us,0,0,0,0,1)}function j(dr){if(dr===0)return this;var us=e(dr),Nn=a(dr);return this._t(us,-Nn,0,0,Nn,us,0,0,0,0,1,0,0,0,0,1)}function $(dr,us){return this._t(1,us,dr,1,0,0)}function rt(dr,us){return this.shear(i(dr),i(us))}function _e(dr,us){var Nn=e(us),gn=a(us);return this._t(Nn,gn,0,0,-gn,Nn,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,i(dr),1,0,0,0,0,1,0,0,0,0,1)._t(Nn,-gn,0,0,gn,Nn,0,0,0,0,1,0,0,0,0,1)}function st(dr,us,Nn){return!Nn&&Nn!==0&&(Nn=1),dr===1&&us===1&&Nn===1?this:this._t(dr,0,0,0,0,us,0,0,0,0,Nn,0,0,0,0,1)}function ut(dr,us,Nn,gn,Zn,xu,au,Vv,wu,a1,P0,B0,q1,ox,N_,eS){return this.props[0]=dr,this.props[1]=us,this.props[2]=Nn,this.props[3]=gn,this.props[4]=Zn,this.props[5]=xu,this.props[6]=au,this.props[7]=Vv,this.props[8]=wu,this.props[9]=a1,this.props[10]=P0,this.props[11]=B0,this.props[12]=q1,this.props[13]=ox,this.props[14]=N_,this.props[15]=eS,this}function gt(dr,us,Nn){return Nn=Nn||0,dr!==0||us!==0||Nn!==0?this._t(1,0,0,0,0,1,0,0,0,0,1,0,dr,us,Nn,1):this}function yt(dr,us,Nn,gn,Zn,xu,au,Vv,wu,a1,P0,B0,q1,ox,N_,eS){var tS=this.props;if(dr===1&&us===0&&Nn===0&&gn===0&&Zn===0&&xu===1&&au===0&&Vv===0&&wu===0&&a1===0&&P0===1&&B0===0)return tS[12]=tS[12]*dr+tS[15]*q1,tS[13]=tS[13]*xu+tS[15]*ox,tS[14]=tS[14]*P0+tS[15]*N_,tS[15]*=eS,this._identityCalculated=!1,this;var tA=tS[0],aR=tS[1],sR=tS[2],AA=tS[3],SA=tS[4],IO=tS[5],pO=tS[6],Su=tS[7],mu=tS[8],ax=tS[9],tE=tS[10],So=tS[11],fD=tS[12],C3=tS[13],q3=tS[14],qx=tS[15];return tS[0]=tA*dr+aR*Zn+sR*wu+AA*q1,tS[1]=tA*us+aR*xu+sR*a1+AA*ox,tS[2]=tA*Nn+aR*au+sR*P0+AA*N_,tS[3]=tA*gn+aR*Vv+sR*B0+AA*eS,tS[4]=SA*dr+IO*Zn+pO*wu+Su*q1,tS[5]=SA*us+IO*xu+pO*a1+Su*ox,tS[6]=SA*Nn+IO*au+pO*P0+Su*N_,tS[7]=SA*gn+IO*Vv+pO*B0+Su*eS,tS[8]=mu*dr+ax*Zn+tE*wu+So*q1,tS[9]=mu*us+ax*xu+tE*a1+So*ox,tS[10]=mu*Nn+ax*au+tE*P0+So*N_,tS[11]=mu*gn+ax*Vv+tE*B0+So*eS,tS[12]=fD*dr+C3*Zn+q3*wu+qx*q1,tS[13]=fD*us+C3*xu+q3*a1+qx*ox,tS[14]=fD*Nn+C3*au+q3*P0+qx*N_,tS[15]=fD*gn+C3*Vv+q3*B0+qx*eS,this._identityCalculated=!1,this}function Pt(dr){var us=dr.props;return this.transform(us[0],us[1],us[2],us[3],us[4],us[5],us[6],us[7],us[8],us[9],us[10],us[11],us[12],us[13],us[14],us[15])}function wt(){return this._identityCalculated||(this._identity=!(this.props[0]!==1||this.props[1]!==0||this.props[2]!==0||this.props[3]!==0||this.props[4]!==0||this.props[5]!==1||this.props[6]!==0||this.props[7]!==0||this.props[8]!==0||this.props[9]!==0||this.props[10]!==1||this.props[11]!==0||this.props[12]!==0||this.props[13]!==0||this.props[14]!==0||this.props[15]!==1),this._identityCalculated=!0),this._identity}function Ct(dr){for(var us=0;us<16;){if(dr.props[us]!==this.props[us])return!1;us+=1}return!0}function At(dr){var us;for(us=0;us<16;us+=1)dr.props[us]=this.props[us];return dr}function Tt(dr){var us;for(us=0;us<16;us+=1)this.props[us]=dr[us]}function kt(dr,us,Nn){return{x:dr*this.props[0]+us*this.props[4]+Nn*this.props[8]+this.props[12],y:dr*this.props[1]+us*this.props[5]+Nn*this.props[9]+this.props[13],z:dr*this.props[2]+us*this.props[6]+Nn*this.props[10]+this.props[14]}}function It(dr,us,Nn){return dr*this.props[0]+us*this.props[4]+Nn*this.props[8]+this.props[12]}function Lt(dr,us,Nn){return dr*this.props[1]+us*this.props[5]+Nn*this.props[9]+this.props[13]}function Ft(dr,us,Nn){return dr*this.props[2]+us*this.props[6]+Nn*this.props[10]+this.props[14]}function Nt(){var dr=this.props[0]*this.props[5]-this.props[1]*this.props[4],us=this.props[5]/dr,Nn=-this.props[1]/dr,gn=-this.props[4]/dr,Zn=this.props[0]/dr,xu=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/dr,au=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/dr,Vv=new Matrix;return Vv.props[0]=us,Vv.props[1]=Nn,Vv.props[4]=gn,Vv.props[5]=Zn,Vv.props[12]=xu,Vv.props[13]=au,Vv}function Ht(dr){var us=this.getInverseMatrix();return us.applyToPointArray(dr[0],dr[1],dr[2]||0)}function Gr(dr){var us,Nn=dr.length,gn=[];for(us=0;us<Nn;us+=1)gn[us]=Ht(dr[us]);return gn}function hs(dr,us,Nn){var gn=createTypedArray("float32",6);if(this.isIdentity())gn[0]=dr[0],gn[1]=dr[1],gn[2]=us[0],gn[3]=us[1],gn[4]=Nn[0],gn[5]=Nn[1];else{var Zn=this.props[0],xu=this.props[1],au=this.props[4],Vv=this.props[5],wu=this.props[12],a1=this.props[13];gn[0]=dr[0]*Zn+dr[1]*au+wu,gn[1]=dr[0]*xu+dr[1]*Vv+a1,gn[2]=us[0]*Zn+us[1]*au+wu,gn[3]=us[0]*xu+us[1]*Vv+a1,gn[4]=Nn[0]*Zn+Nn[1]*au+wu,gn[5]=Nn[0]*xu+Nn[1]*Vv+a1}return gn}function _s(dr,us,Nn){var gn;return this.isIdentity()?gn=[dr,us,Nn]:gn=[dr*this.props[0]+us*this.props[4]+Nn*this.props[8]+this.props[12],dr*this.props[1]+us*this.props[5]+Nn*this.props[9]+this.props[13],dr*this.props[2]+us*this.props[6]+Nn*this.props[10]+this.props[14]],gn}function hn(dr,us){if(this.isIdentity())return dr+","+us;var Nn=this.props;return Math.round((dr*Nn[0]+us*Nn[4]+Nn[12])*100)/100+","+Math.round((dr*Nn[1]+us*Nn[5]+Nn[13])*100)/100}function Qn(){for(var dr=0,us=this.props,Nn="matrix3d(",gn=1e4;dr<16;)Nn+=o(us[dr]*gn)/gn,Nn+=dr===15?")":",",dr+=1;return Nn}function ds(dr){var us=1e4;return dr<1e-6&&dr>0||dr>-1e-6&&dr<0?o(dr*us)/us:dr}function un(){var dr=this.props,us=ds(dr[0]),Nn=ds(dr[1]),gn=ds(dr[4]),Zn=ds(dr[5]),xu=ds(dr[12]),au=ds(dr[13]);return"matrix("+us+","+Nn+","+gn+","+Zn+","+xu+","+au+")"}return function(){this.reset=c,this.rotate=d,this.rotateX=g,this.rotateY=b,this.rotateZ=j,this.skew=rt,this.skewFromAxis=_e,this.shear=$,this.scale=st,this.setTransform=ut,this.translate=gt,this.transform=yt,this.multiply=Pt,this.applyToPoint=kt,this.applyToX=It,this.applyToY=Lt,this.applyToZ=Ft,this.applyToPointArray=_s,this.applyToTriplePoints=hs,this.applyToPointStringified=hn,this.toCSS=Qn,this.to2dCSS=un,this.clone=At,this.cloneFromProps=Tt,this.equals=Ct,this.inversePoints=Gr,this.inversePoint=Ht,this.getInverseMatrix=Nt,this._t=this.transform,this.isIdentity=wt,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$3=function(i){return typeof i}:_typeof$3=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_typeof$3(e)}var lottie={};function setLocation(e){setLocationHref(e)}function searchAnimations(){animationManager.searchAnimations()}function setSubframeRendering(e){setSubframeEnabled(e)}function setPrefix(e){setIdPrefix(e)}function loadAnimation(e){return animationManager.loadAnimation(e)}function setQuality(e){if(typeof e=="string")switch(e){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10);break}else!isNaN(e)&&e>1&&setDefaultCurveSegments(e)}function inBrowser(){return typeof navigator<"u"}function installPlugin(e,a){e==="expressions"&&setExpressionsPlugin(a)}function getFactory(e){switch(e){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.12.2";function checkReady(){document.readyState==="complete"&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(e){for(var a=queryString.split("&"),i=0;i<a.length;i+=1){var o=a[i].split("=");if(decodeURIComponent(o[0])==e)return decodeURIComponent(o[1])}return null}var queryString="";{var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{_typeof$3(exports)!=="object"&&(window.bodymovin=lottie)}catch(e){}var ShapeModifiers=function(){var e={},a={};e.registerModifier=i,e.getModifier=o;function i(c,d){a[c]||(a[c]=d)}function o(c,d,g){return new a[c](d,g)}return e}();function ShapeModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(e){if(!this.closed){e.sh.container.addDynamicProperty(e.sh);var a={shape:e.sh,data:e,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(a),this.addShapeToModifier(a),this._isAnimated&&e.setAsAnimated()}},ShapeModifier.prototype.init=function(e,a){this.shapes=[],this.elem=e,this.initDynamicPropertyContainer(e),this.initModifierProperties(e,a),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier);function TrimModifier(){}extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(e,a){this.s=PropertyFactory.getProp(e,a.s,0,.01,this),this.e=PropertyFactory.getProp(e,a.e,0,.01,this),this.o=PropertyFactory.getProp(e,a.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=a.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(e){e.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(e,a,i,o,c){var d=[];a<=1?d.push({s:e,e:a}):e>=1?d.push({s:e-1,e:a-1}):(d.push({s:e,e:1}),d.push({s:0,e:a-1}));var g=[],b,j=d.length,$;for(b=0;b<j;b+=1)if($=d[b],!($.e*c<o||$.s*c>o+i)){var rt,_e;$.s*c<=o?rt=0:rt=($.s*c-o)/i,$.e*c>=o+i?_e=1:_e=($.e*c-o)/i,g.push([rt,_e])}return g.length||g.push([0,0]),g},TrimModifier.prototype.releasePathsData=function(e){var a,i=e.length;for(a=0;a<i;a+=1)segmentsLengthPool.release(e[a]);return e.length=0,e},TrimModifier.prototype.processShapes=function(e){var a,i;if(this._mdf||e){var o=this.o.v%360/360;if(o<0&&(o+=1),this.s.v>1?a=1+o:this.s.v<0?a=0+o:a=this.s.v+o,this.e.v>1?i=1+o:this.e.v<0?i=0+o:i=this.e.v+o,a>i){var c=a;a=i,i=c}a=Math.round(a*1e4)*1e-4,i=Math.round(i*1e4)*1e-4,this.sValue=a,this.eValue=i}else a=this.sValue,i=this.eValue;var d,g,b=this.shapes.length,j,$,rt,_e,st,ut=0;if(i===a)for(g=0;g<b;g+=1)this.shapes[g].localShapeCollection.releaseShapes(),this.shapes[g].shape._mdf=!0,this.shapes[g].shape.paths=this.shapes[g].localShapeCollection,this._mdf&&(this.shapes[g].pathsData.length=0);else if(i===1&&a===0||i===0&&a===1){if(this._mdf)for(g=0;g<b;g+=1)this.shapes[g].pathsData.length=0,this.shapes[g].shape._mdf=!0}else{var gt=[],yt,Pt;for(g=0;g<b;g+=1)if(yt=this.shapes[g],!yt.shape._mdf&&!this._mdf&&!e&&this.m!==2)yt.shape.paths=yt.localShapeCollection;else{if(d=yt.shape.paths,$=d._length,st=0,!yt.shape._mdf&&yt.pathsData.length)st=yt.totalShapeLength;else{for(rt=this.releasePathsData(yt.pathsData),j=0;j<$;j+=1)_e=bez.getSegmentsLength(d.shapes[j]),rt.push(_e),st+=_e.totalLength;yt.totalShapeLength=st,yt.pathsData=rt}ut+=st,yt.shape._mdf=!0}var wt=a,Ct=i,At=0,Tt;for(g=b-1;g>=0;g-=1)if(yt=this.shapes[g],yt.shape._mdf){for(Pt=yt.localShapeCollection,Pt.releaseShapes(),this.m===2&&b>1?(Tt=this.calculateShapeEdges(a,i,yt.totalShapeLength,At,ut),At+=yt.totalShapeLength):Tt=[[wt,Ct]],$=Tt.length,j=0;j<$;j+=1){wt=Tt[j][0],Ct=Tt[j][1],gt.length=0,Ct<=1?gt.push({s:yt.totalShapeLength*wt,e:yt.totalShapeLength*Ct}):wt>=1?gt.push({s:yt.totalShapeLength*(wt-1),e:yt.totalShapeLength*(Ct-1)}):(gt.push({s:yt.totalShapeLength*wt,e:yt.totalShapeLength}),gt.push({s:0,e:yt.totalShapeLength*(Ct-1)}));var kt=this.addShapes(yt,gt[0]);if(gt[0].s!==gt[0].e){if(gt.length>1){var It=yt.shape.paths.shapes[yt.shape.paths._length-1];if(It.c){var Lt=kt.pop();this.addPaths(kt,Pt),kt=this.addShapes(yt,gt[1],Lt)}else this.addPaths(kt,Pt),kt=this.addShapes(yt,gt[1])}this.addPaths(kt,Pt)}}yt.shape.paths=Pt}}},TrimModifier.prototype.addPaths=function(e,a){var i,o=e.length;for(i=0;i<o;i+=1)a.addShape(e[i])},TrimModifier.prototype.addSegment=function(e,a,i,o,c,d,g){c.setXYAt(a[0],a[1],"o",d),c.setXYAt(i[0],i[1],"i",d+1),g&&c.setXYAt(e[0],e[1],"v",d),c.setXYAt(o[0],o[1],"v",d+1)},TrimModifier.prototype.addSegmentFromArray=function(e,a,i,o){a.setXYAt(e[1],e[5],"o",i),a.setXYAt(e[2],e[6],"i",i+1),o&&a.setXYAt(e[0],e[4],"v",i),a.setXYAt(e[3],e[7],"v",i+1)},TrimModifier.prototype.addShapes=function(e,a,i){var o=e.pathsData,c=e.shape.paths.shapes,d,g=e.shape.paths._length,b,j,$=0,rt,_e,st,ut,gt=[],yt,Pt=!0;for(i?(_e=i._length,yt=i._length):(i=shapePool.newElement(),_e=0,yt=0),gt.push(i),d=0;d<g;d+=1){for(st=o[d].lengths,i.c=c[d].c,j=c[d].c?st.length:st.length+1,b=1;b<j;b+=1)if(rt=st[b-1],$+rt.addedLength<a.s)$+=rt.addedLength,i.c=!1;else if($>a.e){i.c=!1;break}else a.s<=$&&a.e>=$+rt.addedLength?(this.addSegment(c[d].v[b-1],c[d].o[b-1],c[d].i[b],c[d].v[b],i,_e,Pt),Pt=!1):(ut=bez.getNewSegment(c[d].v[b-1],c[d].v[b],c[d].o[b-1],c[d].i[b],(a.s-$)/rt.addedLength,(a.e-$)/rt.addedLength,st[b-1]),this.addSegmentFromArray(ut,i,_e,Pt),Pt=!1,i.c=!1),$+=rt.addedLength,_e+=1;if(c[d].c&&st.length){if(rt=st[b-1],$<=a.e){var wt=st[b-1].addedLength;a.s<=$&&a.e>=$+wt?(this.addSegment(c[d].v[b-1],c[d].o[b-1],c[d].i[0],c[d].v[0],i,_e,Pt),Pt=!1):(ut=bez.getNewSegment(c[d].v[b-1],c[d].v[0],c[d].o[b-1],c[d].i[0],(a.s-$)/wt,(a.e-$)/wt,st[b-1]),this.addSegmentFromArray(ut,i,_e,Pt),Pt=!1,i.c=!1)}else i.c=!1;$+=rt.addedLength,_e+=1}if(i._length&&(i.setXYAt(i.v[yt][0],i.v[yt][1],"i",yt),i.setXYAt(i.v[i._length-1][0],i.v[i._length-1][1],"o",i._length-1)),$>a.e)break;d<g-1&&(i=shapePool.newElement(),Pt=!0,gt.push(i),_e=0)}return gt};function PuckerAndBloatModifier(){}extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(e,a){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(e,a.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(e,a){var i=a/100,o=[0,0],c=e._length,d=0;for(d=0;d<c;d+=1)o[0]+=e.v[d][0],o[1]+=e.v[d][1];o[0]/=c,o[1]/=c;var g=shapePool.newElement();g.c=e.c;var b,j,$,rt,_e,st;for(d=0;d<c;d+=1)b=e.v[d][0]+(o[0]-e.v[d][0])*i,j=e.v[d][1]+(o[1]-e.v[d][1])*i,$=e.o[d][0]+(o[0]-e.o[d][0])*-i,rt=e.o[d][1]+(o[1]-e.o[d][1])*-i,_e=e.i[d][0]+(o[0]-e.i[d][0])*-i,st=e.i[d][1]+(o[1]-e.i[d][1])*-i,g.setTripleAt(b,j,$,rt,_e,st,d);return g},PuckerAndBloatModifier.prototype.processShapes=function(e){var a,i,o=this.shapes.length,c,d,g=this.amount.v;if(g!==0){var b,j;for(i=0;i<o;i+=1){if(b=this.shapes[i],j=b.localShapeCollection,!(!b.shape._mdf&&!this._mdf&&!e))for(j.releaseShapes(),b.shape._mdf=!0,a=b.shape.paths.shapes,d=b.shape.paths._length,c=0;c<d;c+=1)j.addShape(this.processPath(a[c],g));b.shape.paths=b.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var e=[0,0];function a(j){var $=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||$,this.a&&j.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&j.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&j.skewFromAxis(-this.sk.v,this.sa.v),this.r?j.rotate(-this.r.v):j.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?j.translate(this.px.v,this.py.v,-this.pz.v):j.translate(this.px.v,this.py.v,0):j.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}function i(j){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||j){var $;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var rt,_e;if($=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(rt=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/$,0),_e=this.p.getValueAtTime(this.p.keyframes[0].t/$,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(rt=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/$,0),_e=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/$,0)):(rt=this.p.pv,_e=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/$,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){rt=[],_e=[];var st=this.px,ut=this.py;st._caching.lastFrame+st.offsetTime<=st.keyframes[0].t?(rt[0]=st.getValueAtTime((st.keyframes[0].t+.01)/$,0),rt[1]=ut.getValueAtTime((ut.keyframes[0].t+.01)/$,0),_e[0]=st.getValueAtTime(st.keyframes[0].t/$,0),_e[1]=ut.getValueAtTime(ut.keyframes[0].t/$,0)):st._caching.lastFrame+st.offsetTime>=st.keyframes[st.keyframes.length-1].t?(rt[0]=st.getValueAtTime(st.keyframes[st.keyframes.length-1].t/$,0),rt[1]=ut.getValueAtTime(ut.keyframes[ut.keyframes.length-1].t/$,0),_e[0]=st.getValueAtTime((st.keyframes[st.keyframes.length-1].t-.01)/$,0),_e[1]=ut.getValueAtTime((ut.keyframes[ut.keyframes.length-1].t-.01)/$,0)):(rt=[st.pv,ut.pv],_e[0]=st.getValueAtTime((st._caching.lastFrame+st.offsetTime-.01)/$,st.offsetTime),_e[1]=ut.getValueAtTime((ut._caching.lastFrame+ut.offsetTime-.01)/$,ut.offsetTime))}else _e=e,rt=_e;this.v.rotate(-Math.atan2(rt[1]-_e[1],rt[0]-_e[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}}function o(){if(this.appliedTransformations=0,this.pre.reset(),!this.a.effectsSequence.length)this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1;else return;if(!this.s.effectsSequence.length)this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2;else return;if(this.sk)if(!this.sk.effectsSequence.length&&!this.sa.effectsSequence.length)this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3;else return;this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):!this.rz.effectsSequence.length&&!this.ry.effectsSequence.length&&!this.rx.effectsSequence.length&&!this.or.effectsSequence.length&&(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}function c(){}function d(j){this._addDynamicProperty(j),this.elem.addDynamicProperty(j),this._isDirty=!0}function g(j,$,rt){if(this.elem=j,this.frameId=-1,this.propType="transform",this.data=$,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(rt||j),$.p&&$.p.s?(this.px=PropertyFactory.getProp(j,$.p.x,0,0,this),this.py=PropertyFactory.getProp(j,$.p.y,0,0,this),$.p.z&&(this.pz=PropertyFactory.getProp(j,$.p.z,0,0,this))):this.p=PropertyFactory.getProp(j,$.p||{k:[0,0,0]},1,0,this),$.rx){if(this.rx=PropertyFactory.getProp(j,$.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(j,$.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(j,$.rz,0,degToRads,this),$.or.k[0].ti){var _e,st=$.or.k.length;for(_e=0;_e<st;_e+=1)$.or.k[_e].to=null,$.or.k[_e].ti=null}this.or=PropertyFactory.getProp(j,$.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(j,$.r||{k:0},0,degToRads,this);$.sk&&(this.sk=PropertyFactory.getProp(j,$.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(j,$.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(j,$.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(j,$.s||{k:[100,100,100]},1,.01,this),$.o?this.o=PropertyFactory.getProp(j,$.o,0,.01,j):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}g.prototype={applyToMatrix:a,getValue:i,precalculateMatrix:o,autoOrient:c},extendPrototype([DynamicPropertyContainer],g),g.prototype.addDynamicProperty=d,g.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty;function b(j,$,rt){return new g(j,$,rt)}return{getTransformProperty:b}}();function RepeaterModifier(){}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(e,a){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(e,a.c,0,null,this),this.o=PropertyFactory.getProp(e,a.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(e,a.tr,this),this.so=PropertyFactory.getProp(e,a.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(e,a.tr.eo,0,.01,this),this.data=a,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(e,a,i,o,c,d){var g=d?-1:1,b=o.s.v[0]+(1-o.s.v[0])*(1-c),j=o.s.v[1]+(1-o.s.v[1])*(1-c);e.translate(o.p.v[0]*g*c,o.p.v[1]*g*c,o.p.v[2]),a.translate(-o.a.v[0],-o.a.v[1],o.a.v[2]),a.rotate(-o.r.v*g*c),a.translate(o.a.v[0],o.a.v[1],o.a.v[2]),i.translate(-o.a.v[0],-o.a.v[1],o.a.v[2]),i.scale(d?1/b:b,d?1/j:j),i.translate(o.a.v[0],o.a.v[1],o.a.v[2])},RepeaterModifier.prototype.init=function(e,a,i,o){for(this.elem=e,this.arr=a,this.pos=i,this.elemsData=o,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(e),this.initModifierProperties(e,a[i]);i>0;)i-=1,this._elements.unshift(a[i]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(e){var a,i=e.length;for(a=0;a<i;a+=1)e[a]._processed=!1,e[a].ty==="gr"&&this.resetElements(e[a].it)},RepeaterModifier.prototype.cloneElements=function(e){var a=JSON.parse(JSON.stringify(e));return this.resetElements(a),a},RepeaterModifier.prototype.changeGroupRender=function(e,a){var i,o=e.length;for(i=0;i<o;i+=1)e[i]._render=a,e[i].ty==="gr"&&this.changeGroupRender(e[i].it,a)},RepeaterModifier.prototype.processShapes=function(e){var a,i,o,c,d,g=!1;if(this._mdf||e){var b=Math.ceil(this.c.v);if(this._groups.length<b){for(;this._groups.length<b;){var j={it:this.cloneElements(this._elements),ty:"gr"};j.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,j),this._groups.splice(0,0,j),this._currentCopies+=1}this.elem.reloadShapes(),g=!0}d=0;var $;for(o=0;o<=this._groups.length-1;o+=1){if($=d<b,this._groups[o]._render=$,this.changeGroupRender(this._groups[o].it,$),!$){var rt=this.elemsData[o].it,_e=rt[rt.length-1];_e.transform.op.v!==0?(_e.transform.op._mdf=!0,_e.transform.op.v=0):_e.transform.op._mdf=!1}d+=1}this._currentCopies=b;var st=this.o.v,ut=st%1,gt=st>0?Math.floor(st):Math.ceil(st),yt=this.pMatrix.props,Pt=this.rMatrix.props,wt=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var Ct=0;if(st>0){for(;Ct<gt;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),Ct+=1;ut&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,ut,!1),Ct+=ut)}else if(st<0){for(;Ct>gt;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),Ct-=1;ut&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-ut,!0),Ct-=ut)}o=this.data.m===1?0:this._currentCopies-1,c=this.data.m===1?1:-1,d=this._currentCopies;for(var At,Tt;d;){if(a=this.elemsData[o].it,i=a[a.length-1].transform.mProps.v.props,Tt=i.length,a[a.length-1].transform.mProps._mdf=!0,a[a.length-1].transform.op._mdf=!0,a[a.length-1].transform.op.v=this._currentCopies===1?this.so.v:this.so.v+(this.eo.v-this.so.v)*(o/(this._currentCopies-1)),Ct!==0){for((o!==0&&c===1||o!==this._currentCopies-1&&c===-1)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(Pt[0],Pt[1],Pt[2],Pt[3],Pt[4],Pt[5],Pt[6],Pt[7],Pt[8],Pt[9],Pt[10],Pt[11],Pt[12],Pt[13],Pt[14],Pt[15]),this.matrix.transform(wt[0],wt[1],wt[2],wt[3],wt[4],wt[5],wt[6],wt[7],wt[8],wt[9],wt[10],wt[11],wt[12],wt[13],wt[14],wt[15]),this.matrix.transform(yt[0],yt[1],yt[2],yt[3],yt[4],yt[5],yt[6],yt[7],yt[8],yt[9],yt[10],yt[11],yt[12],yt[13],yt[14],yt[15]),At=0;At<Tt;At+=1)i[At]=this.matrix.props[At];this.matrix.reset()}else for(this.matrix.reset(),At=0;At<Tt;At+=1)i[At]=this.matrix.props[At];Ct+=1,d-=1,o+=c}}else for(d=this._currentCopies,o=0,c=1;d;)a=this.elemsData[o].it,i=a[a.length-1].transform.mProps.v.props,a[a.length-1].transform.mProps._mdf=!1,a[a.length-1].transform.op._mdf=!1,d-=1,o+=c;return g},RepeaterModifier.prototype.addShape=function(){};function RoundCornersModifier(){}extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(e,a){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(e,a.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(e,a){var i=shapePool.newElement();i.c=e.c;var o,c=e._length,d,g,b,j,$,rt,_e=0,st,ut,gt,yt,Pt,wt;for(o=0;o<c;o+=1)d=e.v[o],b=e.o[o],g=e.i[o],d[0]===b[0]&&d[1]===b[1]&&d[0]===g[0]&&d[1]===g[1]?(o===0||o===c-1)&&!e.c?(i.setTripleAt(d[0],d[1],b[0],b[1],g[0],g[1],_e),_e+=1):(o===0?j=e.v[c-1]:j=e.v[o-1],$=Math.sqrt(Math.pow(d[0]-j[0],2)+Math.pow(d[1]-j[1],2)),rt=$?Math.min($/2,a)/$:0,Pt=d[0]+(j[0]-d[0])*rt,st=Pt,wt=d[1]-(d[1]-j[1])*rt,ut=wt,gt=st-(st-d[0])*roundCorner,yt=ut-(ut-d[1])*roundCorner,i.setTripleAt(st,ut,gt,yt,Pt,wt,_e),_e+=1,o===c-1?j=e.v[0]:j=e.v[o+1],$=Math.sqrt(Math.pow(d[0]-j[0],2)+Math.pow(d[1]-j[1],2)),rt=$?Math.min($/2,a)/$:0,gt=d[0]+(j[0]-d[0])*rt,st=gt,yt=d[1]+(j[1]-d[1])*rt,ut=yt,Pt=st-(st-d[0])*roundCorner,wt=ut-(ut-d[1])*roundCorner,i.setTripleAt(st,ut,gt,yt,Pt,wt,_e),_e+=1):(i.setTripleAt(e.v[o][0],e.v[o][1],e.o[o][0],e.o[o][1],e.i[o][0],e.i[o][1],_e),_e+=1);return i},RoundCornersModifier.prototype.processShapes=function(e){var a,i,o=this.shapes.length,c,d,g=this.rd.v;if(g!==0){var b,j;for(i=0;i<o;i+=1){if(b=this.shapes[i],j=b.localShapeCollection,!(!b.shape._mdf&&!this._mdf&&!e))for(j.releaseShapes(),b.shape._mdf=!0,a=b.shape.paths.shapes,d=b.shape.paths._length,c=0;c<d;c+=1)j.addShape(this.processPath(a[c],g));b.shape.paths=b.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function floatEqual(e,a){return Math.abs(e-a)*1e5<=Math.min(Math.abs(e),Math.abs(a))}function floatZero(e){return Math.abs(e)<=1e-5}function lerp(e,a,i){return e*(1-i)+a*i}function lerpPoint(e,a,i){return[lerp(e[0],a[0],i),lerp(e[1],a[1],i)]}function quadRoots(e,a,i){if(e===0)return[];var o=a*a-4*e*i;if(o<0)return[];var c=-a/(2*e);if(o===0)return[c];var d=Math.sqrt(o)/(2*e);return[c-d,c+d]}function polynomialCoefficients(e,a,i,o){return[-e+3*a-3*i+o,3*e-6*a+3*i,-3*e+3*a,e]}function singlePoint(e){return new PolynomialBezier(e,e,e,e,!1)}function PolynomialBezier(e,a,i,o,c){c&&pointEqual(e,a)&&(a=lerpPoint(e,o,1/3)),c&&pointEqual(i,o)&&(i=lerpPoint(e,o,2/3));var d=polynomialCoefficients(e[0],a[0],i[0],o[0]),g=polynomialCoefficients(e[1],a[1],i[1],o[1]);this.a=[d[0],g[0]],this.b=[d[1],g[1]],this.c=[d[2],g[2]],this.d=[d[3],g[3]],this.points=[e,a,i,o]}PolynomialBezier.prototype.point=function(e){return[((this.a[0]*e+this.b[0])*e+this.c[0])*e+this.d[0],((this.a[1]*e+this.b[1])*e+this.c[1])*e+this.d[1]]},PolynomialBezier.prototype.derivative=function(e){return[(3*e*this.a[0]+2*this.b[0])*e+this.c[0],(3*e*this.a[1]+2*this.b[1])*e+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(e){var a=this.derivative(e);return Math.atan2(a[1],a[0])},PolynomialBezier.prototype.normalAngle=function(e){var a=this.derivative(e);return Math.atan2(a[0],a[1])},PolynomialBezier.prototype.inflectionPoints=function(){var e=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(e))return[];var a=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/e,i=a*a-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/e;if(i<0)return[];var o=Math.sqrt(i);return floatZero(o)?o>0&&o<1?[a]:[]:[a-o,a+o].filter(function(c){return c>0&&c<1})},PolynomialBezier.prototype.split=function(e){if(e<=0)return[singlePoint(this.points[0]),this];if(e>=1)return[this,singlePoint(this.points[this.points.length-1])];var a=lerpPoint(this.points[0],this.points[1],e),i=lerpPoint(this.points[1],this.points[2],e),o=lerpPoint(this.points[2],this.points[3],e),c=lerpPoint(a,i,e),d=lerpPoint(i,o,e),g=lerpPoint(c,d,e);return[new PolynomialBezier(this.points[0],a,c,g,!0),new PolynomialBezier(g,d,o,this.points[3],!0)]};function extrema(e,a){var i=e.points[0][a],o=e.points[e.points.length-1][a];if(i>o){var c=o;o=i,i=c}for(var d=quadRoots(3*e.a[a],2*e.b[a],e.c[a]),g=0;g<d.length;g+=1)if(d[g]>0&&d[g]<1){var b=e.point(d[g])[a];b<i?i=b:b>o&&(o=b)}return{min:i,max:o}}PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var e=this.bounds();return{left:e.x.min,right:e.x.max,top:e.y.min,bottom:e.y.max,width:e.x.max-e.x.min,height:e.y.max-e.y.min,cx:(e.x.max+e.x.min)/2,cy:(e.y.max+e.y.min)/2}};function intersectData(e,a,i){var o=e.boundingBox();return{cx:o.cx,cy:o.cy,width:o.width,height:o.height,bez:e,t:(a+i)/2,t1:a,t2:i}}function splitData(e){var a=e.bez.split(.5);return[intersectData(a[0],e.t1,e.t),intersectData(a[1],e.t,e.t2)]}function boxIntersect(e,a){return Math.abs(e.cx-a.cx)*2<e.width+a.width&&Math.abs(e.cy-a.cy)*2<e.height+a.height}function intersectsImpl(e,a,i,o,c,d){if(boxIntersect(e,a)){if(i>=d||e.width<=o&&e.height<=o&&a.width<=o&&a.height<=o){c.push([e.t,a.t]);return}var g=splitData(e),b=splitData(a);intersectsImpl(g[0],b[0],i+1,o,c,d),intersectsImpl(g[0],b[1],i+1,o,c,d),intersectsImpl(g[1],b[0],i+1,o,c,d),intersectsImpl(g[1],b[1],i+1,o,c,d)}}PolynomialBezier.prototype.intersections=function(e,a,i){a===void 0&&(a=2),i===void 0&&(i=7);var o=[];return intersectsImpl(intersectData(this,0,1),intersectData(e,0,1),0,a,o,i),o},PolynomialBezier.shapeSegment=function(e,a){var i=(a+1)%e.length();return new PolynomialBezier(e.v[a],e.o[a],e.i[i],e.v[i],!0)},PolynomialBezier.shapeSegmentInverted=function(e,a){var i=(a+1)%e.length();return new PolynomialBezier(e.v[i],e.i[i],e.o[a],e.v[a],!0)};function crossProduct(e,a){return[e[1]*a[2]-e[2]*a[1],e[2]*a[0]-e[0]*a[2],e[0]*a[1]-e[1]*a[0]]}function lineIntersection(e,a,i,o){var c=[e[0],e[1],1],d=[a[0],a[1],1],g=[i[0],i[1],1],b=[o[0],o[1],1],j=crossProduct(crossProduct(c,d),crossProduct(g,b));return floatZero(j[2])?null:[j[0]/j[2],j[1]/j[2]]}function polarOffset(e,a,i){return[e[0]+Math.cos(a)*i,e[1]-Math.sin(a)*i]}function pointDistance(e,a){return Math.hypot(e[0]-a[0],e[1]-a[1])}function pointEqual(e,a){return floatEqual(e[0],a[0])&&floatEqual(e[1],a[1])}function ZigZagModifier(){}extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(e,a){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(e,a.s,0,null,this),this.frequency=PropertyFactory.getProp(e,a.r,0,null,this),this.pointsType=PropertyFactory.getProp(e,a.pt,0,null,this),this._isAnimated=this.amplitude.effectsSequence.length!==0||this.frequency.effectsSequence.length!==0||this.pointsType.effectsSequence.length!==0};function setPoint(e,a,i,o,c,d,g){var b=i-Math.PI/2,j=i+Math.PI/2,$=a[0]+Math.cos(i)*o*c,rt=a[1]-Math.sin(i)*o*c;e.setTripleAt($,rt,$+Math.cos(b)*d,rt-Math.sin(b)*d,$+Math.cos(j)*g,rt-Math.sin(j)*g,e.length())}function getPerpendicularVector(e,a){var i=[a[0]-e[0],a[1]-e[1]],o=-Math.PI*.5,c=[Math.cos(o)*i[0]-Math.sin(o)*i[1],Math.sin(o)*i[0]+Math.cos(o)*i[1]];return c}function getProjectingAngle(e,a){var i=a===0?e.length()-1:a-1,o=(a+1)%e.length(),c=e.v[i],d=e.v[o],g=getPerpendicularVector(c,d);return Math.atan2(0,1)-Math.atan2(g[1],g[0])}function zigZagCorner(e,a,i,o,c,d,g){var b=getProjectingAngle(a,i),j=a.v[i%a._length],$=a.v[i===0?a._length-1:i-1],rt=a.v[(i+1)%a._length],_e=d===2?Math.sqrt(Math.pow(j[0]-$[0],2)+Math.pow(j[1]-$[1],2)):0,st=d===2?Math.sqrt(Math.pow(j[0]-rt[0],2)+Math.pow(j[1]-rt[1],2)):0;setPoint(e,a.v[i%a._length],b,g,o,st/((c+1)*2),_e/((c+1)*2))}function zigZagSegment(e,a,i,o,c,d){for(var g=0;g<o;g+=1){var b=(g+1)/(o+1),j=c===2?Math.sqrt(Math.pow(a.points[3][0]-a.points[0][0],2)+Math.pow(a.points[3][1]-a.points[0][1],2)):0,$=a.normalAngle(b),rt=a.point(b);setPoint(e,rt,$,d,i,j/((o+1)*2),j/((o+1)*2)),d=-d}return d}ZigZagModifier.prototype.processPath=function(e,a,i,o){var c=e._length,d=shapePool.newElement();if(d.c=e.c,e.c||(c-=1),c===0)return d;var g=-1,b=PolynomialBezier.shapeSegment(e,0);zigZagCorner(d,e,0,a,i,o,g);for(var j=0;j<c;j+=1)g=zigZagSegment(d,b,a,i,o,-g),j===c-1&&!e.c?b=null:b=PolynomialBezier.shapeSegment(e,(j+1)%c),zigZagCorner(d,e,j+1,a,i,o,g);return d},ZigZagModifier.prototype.processShapes=function(e){var a,i,o=this.shapes.length,c,d,g=this.amplitude.v,b=Math.max(0,Math.round(this.frequency.v)),j=this.pointsType.v;if(g!==0){var $,rt;for(i=0;i<o;i+=1){if($=this.shapes[i],rt=$.localShapeCollection,!(!$.shape._mdf&&!this._mdf&&!e))for(rt.releaseShapes(),$.shape._mdf=!0,a=$.shape.paths.shapes,d=$.shape.paths._length,c=0;c<d;c+=1)rt.addShape(this.processPath(a[c],g,b,j));$.shape.paths=$.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function linearOffset(e,a,i){var o=Math.atan2(a[0]-e[0],a[1]-e[1]);return[polarOffset(e,o,i),polarOffset(a,o,i)]}function offsetSegment(e,a){var i,o,c,d,g,b,j;j=linearOffset(e.points[0],e.points[1],a),i=j[0],o=j[1],j=linearOffset(e.points[1],e.points[2],a),c=j[0],d=j[1],j=linearOffset(e.points[2],e.points[3],a),g=j[0],b=j[1];var $=lineIntersection(i,o,c,d);$===null&&($=o);var rt=lineIntersection(g,b,c,d);return rt===null&&(rt=g),new PolynomialBezier(i,$,rt,b)}function joinLines(e,a,i,o,c){var d=a.points[3],g=i.points[0];if(o===3||pointEqual(d,g))return d;if(o===2){var b=-a.tangentAngle(1),j=-i.tangentAngle(0)+Math.PI,$=lineIntersection(d,polarOffset(d,b+Math.PI/2,100),g,polarOffset(g,b+Math.PI/2,100)),rt=$?pointDistance($,d):pointDistance(d,g)/2,_e=polarOffset(d,b,2*rt*roundCorner);return e.setXYAt(_e[0],_e[1],"o",e.length()-1),_e=polarOffset(g,j,2*rt*roundCorner),e.setTripleAt(g[0],g[1],g[0],g[1],_e[0],_e[1],e.length()),g}var st=pointEqual(d,a.points[2])?a.points[0]:a.points[2],ut=pointEqual(g,i.points[1])?i.points[3]:i.points[1],gt=lineIntersection(st,d,g,ut);return gt&&pointDistance(gt,d)<c?(e.setTripleAt(gt[0],gt[1],gt[0],gt[1],gt[0],gt[1],e.length()),gt):d}function getIntersection(e,a){var i=e.intersections(a);return i.length&&floatEqual(i[0][0],1)&&i.shift(),i.length?i[0]:null}function pruneSegmentIntersection(e,a){var i=e.slice(),o=a.slice(),c=getIntersection(e[e.length-1],a[0]);return c&&(i[e.length-1]=e[e.length-1].split(c[0])[0],o[0]=a[0].split(c[1])[1]),e.length>1&&a.length>1&&(c=getIntersection(e[0],a[a.length-1]),c)?[[e[0].split(c[0])[0]],[a[a.length-1].split(c[1])[1]]]:[i,o]}function pruneIntersections(e){for(var a,i=1;i<e.length;i+=1)a=pruneSegmentIntersection(e[i-1],e[i]),e[i-1]=a[0],e[i]=a[1];return e.length>1&&(a=pruneSegmentIntersection(e[e.length-1],e[0]),e[e.length-1]=a[0],e[0]=a[1]),e}function offsetSegmentSplit(e,a){var i=e.inflectionPoints(),o,c,d,g;if(i.length===0)return[offsetSegment(e,a)];if(i.length===1||floatEqual(i[1],1))return d=e.split(i[0]),o=d[0],c=d[1],[offsetSegment(o,a),offsetSegment(c,a)];d=e.split(i[0]),o=d[0];var b=(i[1]-i[0])/(1-i[0]);return d=d[1].split(b),g=d[0],c=d[1],[offsetSegment(o,a),offsetSegment(g,a),offsetSegment(c,a)]}function OffsetPathModifier(){}extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(e,a){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(e,a.a,0,null,this),this.miterLimit=PropertyFactory.getProp(e,a.ml,0,null,this),this.lineJoin=a.lj,this._isAnimated=this.amount.effectsSequence.length!==0},OffsetPathModifier.prototype.processPath=function(e,a,i,o){var c=shapePool.newElement();c.c=e.c;var d=e.length();e.c||(d-=1);var g,b,j,$=[];for(g=0;g<d;g+=1)j=PolynomialBezier.shapeSegment(e,g),$.push(offsetSegmentSplit(j,a));if(!e.c)for(g=d-1;g>=0;g-=1)j=PolynomialBezier.shapeSegmentInverted(e,g),$.push(offsetSegmentSplit(j,a));$=pruneIntersections($);var rt=null,_e=null;for(g=0;g<$.length;g+=1){var st=$[g];for(_e&&(rt=joinLines(c,_e,st[0],i,o)),_e=st[st.length-1],b=0;b<st.length;b+=1)j=st[b],rt&&pointEqual(j.points[0],rt)?c.setXYAt(j.points[1][0],j.points[1][1],"o",c.length()-1):c.setTripleAt(j.points[0][0],j.points[0][1],j.points[1][0],j.points[1][1],j.points[0][0],j.points[0][1],c.length()),c.setTripleAt(j.points[3][0],j.points[3][1],j.points[3][0],j.points[3][1],j.points[2][0],j.points[2][1],c.length()),rt=j.points[3]}return $.length&&joinLines(c,_e,$[0][0],i,o),c},OffsetPathModifier.prototype.processShapes=function(e){var a,i,o=this.shapes.length,c,d,g=this.amount.v,b=this.miterLimit.v,j=this.lineJoin;if(g!==0){var $,rt;for(i=0;i<o;i+=1){if($=this.shapes[i],rt=$.localShapeCollection,!(!$.shape._mdf&&!this._mdf&&!e))for(rt.releaseShapes(),$.shape._mdf=!0,a=$.shape.paths.shapes,d=$.shape.paths._length,c=0;c<d;c+=1)rt.addShape(this.processPath(a[c],g,j,b));$.shape.paths=$.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function getFontProperties(e){for(var a=e.fStyle?e.fStyle.split(" "):[],i="normal",o="normal",c=a.length,d,g=0;g<c;g+=1)switch(d=a[g].toLowerCase(),d){case"italic":o="italic";break;case"bold":i="700";break;case"black":i="900";break;case"medium":i="500";break;case"regular":case"normal":i="400";break;case"light":case"thin":i="200";break}return{style:o,weight:e.fWeight||i}}var FontManager=function(){var e=5e3,a={w:0,size:0,shapes:[],data:{shapes:[]}},i=[];i=i.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var o=127988,c=917631,d=917601,g=917626,b=65039,j=8205,$=127462,rt=127487,_e=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"];function st(ds){var un=ds.split(","),dr,us=un.length,Nn=[];for(dr=0;dr<us;dr+=1)un[dr]!=="sans-serif"&&un[dr]!=="monospace"&&Nn.push(un[dr]);return Nn.join(",")}function ut(ds,un){var dr=createTag("span");dr.setAttribute("aria-hidden",!0),dr.style.fontFamily=un;var us=createTag("span");us.innerText="giItT1WQy@!-/#",dr.style.position="absolute",dr.style.left="-10000px",dr.style.top="-10000px",dr.style.fontSize="300px",dr.style.fontVariant="normal",dr.style.fontStyle="normal",dr.style.fontWeight="normal",dr.style.letterSpacing="0",dr.appendChild(us),document.body.appendChild(dr);var Nn=us.offsetWidth;return us.style.fontFamily=st(ds)+", "+un,{node:us,w:Nn,parent:dr}}function gt(){var ds,un=this.fonts.length,dr,us,Nn=un;for(ds=0;ds<un;ds+=1)this.fonts[ds].loaded?Nn-=1:this.fonts[ds].fOrigin==="n"||this.fonts[ds].origin===0?this.fonts[ds].loaded=!0:(dr=this.fonts[ds].monoCase.node,us=this.fonts[ds].monoCase.w,dr.offsetWidth!==us?(Nn-=1,this.fonts[ds].loaded=!0):(dr=this.fonts[ds].sansCase.node,us=this.fonts[ds].sansCase.w,dr.offsetWidth!==us&&(Nn-=1,this.fonts[ds].loaded=!0)),this.fonts[ds].loaded&&(this.fonts[ds].sansCase.parent.parentNode.removeChild(this.fonts[ds].sansCase.parent),this.fonts[ds].monoCase.parent.parentNode.removeChild(this.fonts[ds].monoCase.parent)));Nn!==0&&Date.now()-this.initTime<e?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)}function yt(ds,un){var dr=document.body&&un?"svg":"canvas",us,Nn=getFontProperties(ds);if(dr==="svg"){var gn=createNS("text");gn.style.fontSize="100px",gn.setAttribute("font-family",ds.fFamily),gn.setAttribute("font-style",Nn.style),gn.setAttribute("font-weight",Nn.weight),gn.textContent="1",ds.fClass?(gn.style.fontFamily="inherit",gn.setAttribute("class",ds.fClass)):gn.style.fontFamily=ds.fFamily,un.appendChild(gn),us=gn}else{var Zn=new OffscreenCanvas(500,500).getContext("2d");Zn.font=Nn.style+" "+Nn.weight+" 100px "+ds.fFamily,us=Zn}function xu(au){return dr==="svg"?(us.textContent=au,us.getComputedTextLength()):us.measureText(au).width}return{measureText:xu}}function Pt(ds,un){if(!ds){this.isLoaded=!0;return}if(this.chars){this.isLoaded=!0,this.fonts=ds.list;return}if(!document.body){this.isLoaded=!0,ds.list.forEach(function(P0){P0.helper=yt(P0),P0.cache={}}),this.fonts=ds.list;return}var dr=ds.list,us,Nn=dr.length,gn=Nn;for(us=0;us<Nn;us+=1){var Zn=!0,xu,au;if(dr[us].loaded=!1,dr[us].monoCase=ut(dr[us].fFamily,"monospace"),dr[us].sansCase=ut(dr[us].fFamily,"sans-serif"),!dr[us].fPath)dr[us].loaded=!0,gn-=1;else if(dr[us].fOrigin==="p"||dr[us].origin===3){if(xu=document.querySelectorAll('style[f-forigin="p"][f-family="'+dr[us].fFamily+'"], style[f-origin="3"][f-family="'+dr[us].fFamily+'"]'),xu.length>0&&(Zn=!1),Zn){var Vv=createTag("style");Vv.setAttribute("f-forigin",dr[us].fOrigin),Vv.setAttribute("f-origin",dr[us].origin),Vv.setAttribute("f-family",dr[us].fFamily),Vv.type="text/css",Vv.innerText="@font-face {font-family: "+dr[us].fFamily+"; font-style: normal; src: url('"+dr[us].fPath+"');}",un.appendChild(Vv)}}else if(dr[us].fOrigin==="g"||dr[us].origin===1){for(xu=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),au=0;au<xu.length;au+=1)xu[au].href.indexOf(dr[us].fPath)!==-1&&(Zn=!1);if(Zn){var wu=createTag("link");wu.setAttribute("f-forigin",dr[us].fOrigin),wu.setAttribute("f-origin",dr[us].origin),wu.type="text/css",wu.rel="stylesheet",wu.href=dr[us].fPath,document.body.appendChild(wu)}}else if(dr[us].fOrigin==="t"||dr[us].origin===2){for(xu=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),au=0;au<xu.length;au+=1)dr[us].fPath===xu[au].src&&(Zn=!1);if(Zn){var a1=createTag("link");a1.setAttribute("f-forigin",dr[us].fOrigin),a1.setAttribute("f-origin",dr[us].origin),a1.setAttribute("rel","stylesheet"),a1.setAttribute("href",dr[us].fPath),un.appendChild(a1)}}dr[us].helper=yt(dr[us],un),dr[us].cache={},this.fonts.push(dr[us])}gn===0?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}function wt(ds){if(ds){this.chars||(this.chars=[]);var un,dr=ds.length,us,Nn=this.chars.length,gn;for(un=0;un<dr;un+=1){for(us=0,gn=!1;us<Nn;)this.chars[us].style===ds[un].style&&this.chars[us].fFamily===ds[un].fFamily&&this.chars[us].ch===ds[un].ch&&(gn=!0),us+=1;gn||(this.chars.push(ds[un]),Nn+=1)}}}function Ct(ds,un,dr){for(var us=0,Nn=this.chars.length;us<Nn;){if(this.chars[us].ch===ds&&this.chars[us].style===un&&this.chars[us].fFamily===dr)return this.chars[us];us+=1}return(typeof ds=="string"&&ds.charCodeAt(0)!==13||!ds)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",ds,un,dr)),a}function At(ds,un,dr){var us=this.getFontByName(un),Nn=ds;if(!us.cache[Nn]){var gn=us.helper;if(ds===" "){var Zn=gn.measureText("|"+ds+"|"),xu=gn.measureText("||");us.cache[Nn]=(Zn-xu)/100}else us.cache[Nn]=gn.measureText(ds)/100}return us.cache[Nn]*dr}function Tt(ds){for(var un=0,dr=this.fonts.length;un<dr;){if(this.fonts[un].fName===ds)return this.fonts[un];un+=1}return this.fonts[0]}function kt(ds){var un=0,dr=ds.charCodeAt(0);if(dr>=55296&&dr<=56319){var us=ds.charCodeAt(1);us>=56320&&us<=57343&&(un=(dr-55296)*1024+us-56320+65536)}return un}function It(ds,un){var dr=ds.toString(16)+un.toString(16);return _e.indexOf(dr)!==-1}function Lt(ds){return ds===j}function Ft(ds){return ds===b}function Nt(ds){var un=kt(ds);return un>=$&&un<=rt}function Ht(ds){return Nt(ds.substr(0,2))&&Nt(ds.substr(2,2))}function Gr(ds){return i.indexOf(ds)!==-1}function hs(ds,un){var dr=kt(ds.substr(un,2));if(dr!==o)return!1;var us=0;for(un+=2;us<5;){if(dr=kt(ds.substr(un,2)),dr<d||dr>g)return!1;us+=1,un+=2}return kt(ds.substr(un,2))===c}function _s(){this.isLoaded=!0}var hn=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};hn.isModifier=It,hn.isZeroWidthJoiner=Lt,hn.isFlagEmoji=Ht,hn.isRegionalCode=Nt,hn.isCombinedCharacter=Gr,hn.isRegionalFlag=hs,hn.isVariationSelector=Ft,hn.BLACK_FLAG_CODE_POINT=o;var Qn={addChars:wt,addFonts:Pt,getCharData:Ct,getFontByName:Tt,measureText:At,checkLoadedFonts:gt,setIsLoaded:_s};return hn.prototype=Qn,hn}();function SlotManager(e){this.animationData=e}SlotManager.prototype.getProp=function(e){return this.animationData.slots&&this.animationData.slots[e.sid]?Object.assign(e,this.animationData.slots[e.sid].p):e};function slotFactory(e){return new SlotManager(e)}function RenderableElement(){}RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(a){this.renderableComponents.indexOf(a)===-1&&this.renderableComponents.push(a)},removeRenderableComponent:function(a){this.renderableComponents.indexOf(a)!==-1&&this.renderableComponents.splice(this.renderableComponents.indexOf(a),1)},prepareRenderableFrame:function(a){this.checkLayerLimits(a)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(a){this.data.ip-this.data.st<=a&&this.data.op-this.data.st>a?this.isInRange!==!0&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):this.isInRange!==!1&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var a,i=this.renderableComponents.length;for(a=0;a<i;a+=1)this.renderableComponents[a].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return this.data.ty===5?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=function(){var e={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(a){return e[a]||""}}();function SliderEffect(e,a,i){this.p=PropertyFactory.getProp(a,e.v,0,0,i)}function AngleEffect(e,a,i){this.p=PropertyFactory.getProp(a,e.v,0,0,i)}function ColorEffect(e,a,i){this.p=PropertyFactory.getProp(a,e.v,1,0,i)}function PointEffect(e,a,i){this.p=PropertyFactory.getProp(a,e.v,1,0,i)}function LayerIndexEffect(e,a,i){this.p=PropertyFactory.getProp(a,e.v,0,0,i)}function MaskIndexEffect(e,a,i){this.p=PropertyFactory.getProp(a,e.v,0,0,i)}function CheckboxEffect(e,a,i){this.p=PropertyFactory.getProp(a,e.v,0,0,i)}function NoValueEffect(){this.p={}}function EffectsManager(e,a){var i=e.ef||[];this.effectElements=[];var o,c=i.length,d;for(o=0;o<c;o+=1)d=new GroupEffect(i[o],a),this.effectElements.push(d)}function GroupEffect(e,a){this.init(e,a)}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(e,a){this.data=e,this.effectElements=[],this.initDynamicPropertyContainer(a);var i,o=this.data.ef.length,c,d=this.data.ef;for(i=0;i<o;i+=1){switch(c=null,d[i].ty){case 0:c=new SliderEffect(d[i],a,this);break;case 1:c=new AngleEffect(d[i],a,this);break;case 2:c=new ColorEffect(d[i],a,this);break;case 3:c=new PointEffect(d[i],a,this);break;case 4:case 7:c=new CheckboxEffect(d[i],a,this);break;case 10:c=new LayerIndexEffect(d[i],a,this);break;case 11:c=new MaskIndexEffect(d[i],a,this);break;case 5:c=new EffectsManager(d[i],a);break;default:c=new NoValueEffect(d[i]);break}c&&this.effectElements.push(c)}};function BaseElement(){}BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var a=0,i=this.data.masksProperties.length;a<i;){if(this.data.masksProperties[a].mode!=="n"&&this.data.masksProperties[a].cl!==!1)return!0;a+=1}return!1},initExpressions:function(){var a=getExpressionInterfaces();if(a){var i=a("layer"),o=a("effects"),c=a("shape"),d=a("text"),g=a("comp");this.layerInterface=i(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var b=o.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(b),this.data.ty===0||this.data.xt?this.compInterface=g(this):this.data.ty===4?(this.layerInterface.shapeInterface=c(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):this.data.ty===5&&(this.layerInterface.textInterface=d(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var a=getBlendMode(this.data.bm),i=this.baseElement||this.layerElement;i.style["mix-blend-mode"]=a},initBaseData:function(a,i,o){this.globalData=i,this.comp=o,this.data=a,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}};function FrameElement(){}FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(a,i){var o,c=this.dynamicProperties.length;for(o=0;o<c;o+=1)(i||this._isParent&&this.dynamicProperties[o].propType==="transform")&&(this.dynamicProperties[o].getValue(),this.dynamicProperties[o]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(a){this.dynamicProperties.indexOf(a)===-1&&this.dynamicProperties.push(a)}};function FootageElement(e,a,i){this.initFrame(),this.initRenderable(),this.assetData=a.getAssetData(e.refId),this.footageData=a.imageLoader.getAsset(this.assetData),this.initBaseData(e,a,i)}FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var e=getExpressionInterfaces();if(e){var a=e("footage");this.layerInterface=a(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData};function AudioElement(e,a,i){this.initFrame(),this.initRenderable(),this.assetData=a.getAssetData(e.refId),this.initBaseData(e,a,i),this._isPlaying=!1,this._canPlay=!1;var o=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(o),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,a.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,e.au&&e.au.lv?e.au.lv:{k:[100]},1,.01,this)}AudioElement.prototype.prepareFrame=function(e){if(this.prepareRenderableFrame(e,!0),this.prepareProperties(e,!0),this.tm._placeholder)this._currentTime=e/this.data.sr;else{var a=this.tm.v;this._currentTime=a}this._volume=this.lv.v[0];var i=this._volume*this._volumeMultiplier;this._previousVolume!==i&&(this._previousVolume=i,this.audio.volume(i))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(e){this.audio.rate(e)},AudioElement.prototype.volume=function(e){this._volumeMultiplier=e,this._previousVolume=e*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){};function BaseRenderer(){}BaseRenderer.prototype.checkLayers=function(e){var a,i=this.layers.length,o;for(this.completeLayers=!0,a=i-1;a>=0;a-=1)this.elements[a]||(o=this.layers[a],o.ip-o.st<=e-this.layers[a].st&&o.op-o.st>e-this.layers[a].st&&this.buildItem(a)),this.completeLayers=this.elements[a]?this.completeLayers:!1;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(e){switch(e.ty){case 2:return this.createImage(e);case 0:return this.createComp(e);case 1:return this.createSolid(e);case 3:return this.createNull(e);case 4:return this.createShape(e);case 5:return this.createText(e);case 6:return this.createAudio(e);case 13:return this.createCamera(e);case 15:return this.createFootage(e);default:return this.createNull(e)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(e){return new AudioElement(e,this.globalData,this)},BaseRenderer.prototype.createFootage=function(e){return new FootageElement(e,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var e,a=this.layers.length;for(e=0;e<a;e+=1)this.buildItem(e);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(e){this.completeLayers=!1;var a,i=e.length,o,c=this.layers.length;for(a=0;a<i;a+=1)for(o=0;o<c;){if(this.layers[o].id===e[a].id){this.layers[o]=e[a];break}o+=1}},BaseRenderer.prototype.setProjectInterface=function(e){this.globalData.projectInterface=e},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(e,a,i){for(var o=this.elements,c=this.layers,d=0,g=c.length;d<g;)c[d].ind==a&&(!o[d]||o[d]===!0?(this.buildItem(d),this.addPendingElement(e)):(i.push(o[d]),o[d].setAsParent(),c[d].parent!==void 0?this.buildElementParenting(e,c[d].parent,i):e.setHierarchy(i))),d+=1},BaseRenderer.prototype.addPendingElement=function(e){this.pendingElements.push(e)},BaseRenderer.prototype.searchExtraCompositions=function(e){var a,i=e.length;for(a=0;a<i;a+=1)if(e[a].xt){var o=this.createComp(e[a]);o.initExpressions(),this.globalData.projectInterface.registerComposition(o)}},BaseRenderer.prototype.getElementById=function(e){var a,i=this.elements.length;for(a=0;a<i;a+=1)if(this.elements[a].data.ind===e)return this.elements[a];return null},BaseRenderer.prototype.getElementByPath=function(e){var a=e.shift(),i;if(typeof a=="number")i=this.elements[a];else{var o,c=this.elements.length;for(o=0;o<c;o+=1)if(this.elements[o].data.nm===a){i=this.elements[o];break}}return e.length===0?i:i.getElementByPath(e)},BaseRenderer.prototype.setupGlobalData=function(e,a){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(e),this.globalData.fontManager.addChars(e.chars),this.globalData.fontManager.addFonts(e.fonts,a),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=e.fr,this.globalData.nm=e.nm,this.globalData.compSize={w:e.w,h:e.h}};var effectTypes={TRANSFORM_EFFECT:"transformEFfect"};function TransformElement(){}TransformElement.prototype={initTransform:function(){var a=new Matrix;this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_localMatMdf:!1,_opMdf:!1,mat:a,localMat:a,localOpacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var a,i=this.finalTransform.mat,o=0,c=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;o<c;){if(this.hierarchy[o].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}o+=1}if(this.finalTransform._matMdf)for(a=this.finalTransform.mProp.v.props,i.cloneFromProps(a),o=0;o<c;o+=1)i.multiply(this.hierarchy[o].finalTransform.mProp.v)}this.finalTransform._matMdf&&(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v)},renderLocalTransform:function(){if(this.localTransforms){var a=0,i=this.localTransforms.length;if(this.finalTransform._localMatMdf=this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;a<i;)this.localTransforms[a]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[a]._opMdf&&!this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v,this.finalTransform._opMdf=!0),a+=1;if(this.finalTransform._localMatMdf){var o=this.finalTransform.localMat;for(this.localTransforms[0].matrix.clone(o),a=1;a<i;a+=1){var c=this.localTransforms[a].matrix;o.multiply(c)}o.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){var d=this.finalTransform.localOpacity;for(a=0;a<i;a+=1)d*=this.localTransforms[a].opacity*.01;this.finalTransform.localOpacity=d}}},searchEffectTransforms:function(){if(this.renderableEffectsManager){var a=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);if(a.length){this.localTransforms=[],this.finalTransform.localMat=new Matrix;var i=0,o=a.length;for(i=0;i<o;i+=1)this.localTransforms.push(a[i])}}},globalToLocal:function(a){var i=[];i.push(this.finalTransform);for(var o=!0,c=this.comp;o;)c.finalTransform?(c.data.hasMask&&i.splice(0,0,c.finalTransform),c=c.comp):o=!1;var d,g=i.length,b;for(d=0;d<g;d+=1)b=i[d].mat.applyToPointArray(0,0,0),a=[a[0]-b[0],a[1]-b[1],0];return a},mHelper:new Matrix};function MaskElement(e,a,i){this.data=e,this.element=a,this.globalData=i,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var o=this.globalData.defs,c,d=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(d),this.solidPath="";var g,b=this.masksProperties,j=0,$=[],rt,_e,st=createElementID(),ut,gt,yt,Pt,wt="clipPath",Ct="clip-path";for(c=0;c<d;c+=1)if((b[c].mode!=="a"&&b[c].mode!=="n"||b[c].inv||b[c].o.k!==100||b[c].o.x)&&(wt="mask",Ct="mask"),(b[c].mode==="s"||b[c].mode==="i")&&j===0?(ut=createNS("rect"),ut.setAttribute("fill","#ffffff"),ut.setAttribute("width",this.element.comp.data.w||0),ut.setAttribute("height",this.element.comp.data.h||0),$.push(ut)):ut=null,g=createNS("path"),b[c].mode==="n")this.viewData[c]={op:PropertyFactory.getProp(this.element,b[c].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,b[c],3),elem:g,lastPath:""},o.appendChild(g);else{j+=1,g.setAttribute("fill",b[c].mode==="s"?"#000000":"#ffffff"),g.setAttribute("clip-rule","nonzero");var At;if(b[c].x.k!==0?(wt="mask",Ct="mask",Pt=PropertyFactory.getProp(this.element,b[c].x,0,null,this.element),At=createElementID(),gt=createNS("filter"),gt.setAttribute("id",At),yt=createNS("feMorphology"),yt.setAttribute("operator","erode"),yt.setAttribute("in","SourceGraphic"),yt.setAttribute("radius","0"),gt.appendChild(yt),o.appendChild(gt),g.setAttribute("stroke",b[c].mode==="s"?"#000000":"#ffffff")):(yt=null,Pt=null),this.storedData[c]={elem:g,x:Pt,expan:yt,lastPath:"",lastOperator:"",filterId:At,lastRadius:0},b[c].mode==="i"){_e=$.length;var Tt=createNS("g");for(rt=0;rt<_e;rt+=1)Tt.appendChild($[rt]);var kt=createNS("mask");kt.setAttribute("mask-type","alpha"),kt.setAttribute("id",st+"_"+j),kt.appendChild(g),o.appendChild(kt),Tt.setAttribute("mask","url("+getLocationHref()+"#"+st+"_"+j+")"),$.length=0,$.push(Tt)}else $.push(g);b[c].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[c]={elem:g,lastPath:"",op:PropertyFactory.getProp(this.element,b[c].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,b[c],3),invRect:ut},this.viewData[c].prop.k||this.drawPath(b[c],this.viewData[c].prop.v,this.viewData[c])}for(this.maskElement=createNS(wt),d=$.length,c=0;c<d;c+=1)this.maskElement.appendChild($[c]);j>0&&(this.maskElement.setAttribute("id",st),this.element.maskedElement.setAttribute(Ct,"url("+getLocationHref()+"#"+st+")"),o.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}MaskElement.prototype.getMaskProperty=function(e){return this.viewData[e].prop},MaskElement.prototype.renderFrame=function(e){var a=this.element.finalTransform.mat,i,o=this.masksProperties.length;for(i=0;i<o;i+=1)if((this.viewData[i].prop._mdf||e)&&this.drawPath(this.masksProperties[i],this.viewData[i].prop.v,this.viewData[i]),(this.viewData[i].op._mdf||e)&&this.viewData[i].elem.setAttribute("fill-opacity",this.viewData[i].op.v),this.masksProperties[i].mode!=="n"&&(this.viewData[i].invRect&&(this.element.finalTransform.mProp._mdf||e)&&this.viewData[i].invRect.setAttribute("transform",a.getInverseMatrix().to2dCSS()),this.storedData[i].x&&(this.storedData[i].x._mdf||e))){var c=this.storedData[i].expan;this.storedData[i].x.v<0?(this.storedData[i].lastOperator!=="erode"&&(this.storedData[i].lastOperator="erode",this.storedData[i].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[i].filterId+")")),c.setAttribute("radius",-this.storedData[i].x.v)):(this.storedData[i].lastOperator!=="dilate"&&(this.storedData[i].lastOperator="dilate",this.storedData[i].elem.setAttribute("filter",null)),this.storedData[i].elem.setAttribute("stroke-width",this.storedData[i].x.v*2))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var e="M0,0 ";return e+=" h"+this.globalData.compSize.w,e+=" v"+this.globalData.compSize.h,e+=" h-"+this.globalData.compSize.w,e+=" v-"+this.globalData.compSize.h+" ",e},MaskElement.prototype.drawPath=function(e,a,i){var o=" M"+a.v[0][0]+","+a.v[0][1],c,d;for(d=a._length,c=1;c<d;c+=1)o+=" C"+a.o[c-1][0]+","+a.o[c-1][1]+" "+a.i[c][0]+","+a.i[c][1]+" "+a.v[c][0]+","+a.v[c][1];if(a.c&&d>1&&(o+=" C"+a.o[c-1][0]+","+a.o[c-1][1]+" "+a.i[0][0]+","+a.i[0][1]+" "+a.v[0][0]+","+a.v[0][1]),i.lastPath!==o){var g="";i.elem&&(a.c&&(g=e.inv?this.solidPath+o:o),i.elem.setAttribute("d",g)),i.lastPath=o}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var e={};e.createFilter=a,e.createAlphaToLuminanceFilter=i;function a(o,c){var d=createNS("filter");return d.setAttribute("id",o),c!==!0&&(d.setAttribute("filterUnits","objectBoundingBox"),d.setAttribute("x","0%"),d.setAttribute("y","0%"),d.setAttribute("width","100%"),d.setAttribute("height","100%")),d}function i(){var o=createNS("feColorMatrix");return o.setAttribute("type","matrix"),o.setAttribute("color-interpolation-filters","sRGB"),o.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),o}return e}(),featureSupport=function(){var e={maskType:!0,svgLumaHidden:!0,offscreenCanvas:typeof OffscreenCanvas<"u"};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(e.maskType=!1),/firefox/i.test(navigator.userAgent)&&(e.svgLumaHidden=!1),e}(),registeredEffects$1={},idPrefix="filter_result_";function SVGEffects(e){var a,i="SourceGraphic",o=e.data.ef?e.data.ef.length:0,c=createElementID(),d=filtersFactory.createFilter(c,!0),g=0;this.filters=[];var b;for(a=0;a<o;a+=1){b=null;var j=e.data.ef[a].ty;if(registeredEffects$1[j]){var $=registeredEffects$1[j].effect;b=new $(d,e.effectsManager.effectElements[a],e,idPrefix+g,i),i=idPrefix+g,registeredEffects$1[j].countsAsEffect&&(g+=1)}b&&this.filters.push(b)}g&&(e.globalData.defs.appendChild(d),e.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+c+")")),this.filters.length&&e.addRenderableComponent(this)}SVGEffects.prototype.renderFrame=function(e){var a,i=this.filters.length;for(a=0;a<i;a+=1)this.filters[a].renderFrame(e)},SVGEffects.prototype.getEffects=function(e){var a,i=this.filters.length,o=[];for(a=0;a<i;a+=1)this.filters[a].type===e&&o.push(this.filters[a]);return o};function registerEffect$1(e,a,i){registeredEffects$1[e]={effect:a,countsAsEffect:i}}function SVGBaseElement(){}SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var a=null;if(this.data.td){this.matteMasks={};var i=createNS("g");i.setAttribute("id",this.layerId),i.appendChild(this.layerElement),a=i,this.globalData.defs.appendChild(i)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),a=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.ty===0&&!this.data.hd){var o=createNS("clipPath"),c=createNS("path");c.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var d=createElementID();if(o.setAttribute("id",d),o.appendChild(c),this.globalData.defs.appendChild(o),this.checkMasks()){var g=createNS("g");g.setAttribute("clip-path","url("+getLocationHref()+"#"+d+")"),g.appendChild(this.layerElement),this.transformedElement=g,a?a.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+d+")")}this.data.bm!==0&&this.setBlendMode()},renderElement:function(){this.finalTransform._localMatMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.localOpacity)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this),this.searchEffectTransforms()},getMatte:function(a){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[a]){var i=this.layerId+"_"+a,o,c,d,g;if(a===1||a===3){var b=createNS("mask");b.setAttribute("id",i),b.setAttribute("mask-type",a===3?"luminance":"alpha"),d=createNS("use"),d.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),b.appendChild(d),this.globalData.defs.appendChild(b),!featureSupport.maskType&&a===1&&(b.setAttribute("mask-type","luminance"),o=createElementID(),c=filtersFactory.createFilter(o),this.globalData.defs.appendChild(c),c.appendChild(filtersFactory.createAlphaToLuminanceFilter()),g=createNS("g"),g.appendChild(d),b.appendChild(g),g.setAttribute("filter","url("+getLocationHref()+"#"+o+")"))}else if(a===2){var j=createNS("mask");j.setAttribute("id",i),j.setAttribute("mask-type","alpha");var $=createNS("g");j.appendChild($),o=createElementID(),c=filtersFactory.createFilter(o);var rt=createNS("feComponentTransfer");rt.setAttribute("in","SourceGraphic"),c.appendChild(rt);var _e=createNS("feFuncA");_e.setAttribute("type","table"),_e.setAttribute("tableValues","1.0 0.0"),rt.appendChild(_e),this.globalData.defs.appendChild(c);var st=createNS("rect");st.setAttribute("width",this.comp.data.w),st.setAttribute("height",this.comp.data.h),st.setAttribute("x","0"),st.setAttribute("y","0"),st.setAttribute("fill","#ffffff"),st.setAttribute("opacity","0"),$.setAttribute("filter","url("+getLocationHref()+"#"+o+")"),$.appendChild(st),d=createNS("use"),d.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),$.appendChild(d),featureSupport.maskType||(j.setAttribute("mask-type","luminance"),c.appendChild(filtersFactory.createAlphaToLuminanceFilter()),g=createNS("g"),$.appendChild(st),g.appendChild(this.layerElement),$.appendChild(g)),this.globalData.defs.appendChild(j)}this.matteMasks[a]=i}return this.matteMasks[a]},setMatte:function(a){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+a+")")}};function HierarchyElement(){}HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(a){this.hierarchy=a},setAsParent:function(){this._isParent=!0},checkParenting:function(){this.data.parent!==void 0&&this.comp.buildElementParenting(this,this.data.parent,[])}};function RenderableDOMElement(){}(function(){var e={initElement:function(i,o,c){this.initFrame(),this.initBaseData(i,o,c),this.initTransform(i,o,c),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){if(!this.hidden&&(!this.isInRange||this.isTransparent)){var i=this.baseElement||this.layerElement;i.style.display="none",this.hidden=!0}},show:function(){if(this.isInRange&&!this.isTransparent){if(!this.data.hd){var i=this.baseElement||this.layerElement;i.style.display="block"}this.hidden=!1,this._isFirstFrame=!0}},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(i){this._mdf=!1,this.prepareRenderableFrame(i),this.prepareProperties(i,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}};extendPrototype([RenderableElement,createProxyFunction(e)],RenderableDOMElement)})();function IImageElement(e,a,i){this.assetData=a.getAssetData(e.refId),this.assetData&&this.assetData.sid&&(this.assetData=a.slotManager.getProp(this.assetData)),this.initElement(e,a,i),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var e=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",e),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect};function ProcessedElement(e,a){this.elem=e,this.pos=a}function IShapeElement(){}IShapeElement.prototype={addShapeToModifiers:function(a){var i,o=this.shapeModifiers.length;for(i=0;i<o;i+=1)this.shapeModifiers[i].addShape(a)},isShapeInAnimatedModifiers:function(a){for(var i=0,o=this.shapeModifiers.length;i<o;)if(this.shapeModifiers[i].isAnimatedWithShape(a))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var a,i=this.shapes.length;for(a=0;a<i;a+=1)this.shapes[a].sh.reset();i=this.shapeModifiers.length;var o;for(a=i-1;a>=0&&(o=this.shapeModifiers[a].processShapes(this._isFirstFrame),!o);a-=1);}},searchProcessedElement:function(a){for(var i=this.processedElements,o=0,c=i.length;o<c;){if(i[o].elem===a)return i[o].pos;o+=1}return 0},addProcessedElement:function(a,i){for(var o=this.processedElements,c=o.length;c;)if(c-=1,o[c].elem===a){o[c].pos=i;return}o.push(new ProcessedElement(a,i))},prepareFrame:function(a){this.prepareRenderableFrame(a),this.prepareProperties(a,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(e,a,i){this.caches=[],this.styles=[],this.transformers=e,this.lStr="",this.sh=i,this.lvl=a,this._isAnimated=!!i.k;for(var o=0,c=e.length;o<c;){if(e[o].mProps.dynamicProperties.length){this._isAnimated=!0;break}o+=1}}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0};function SVGStyleData(e,a){this.data=e,this.type=e.ty,this.d="",this.lvl=a,this._mdf=!1,this.closed=e.hd===!0,this.pElem=createNS("path"),this.msElem=null}SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1};function DashProperty(e,a,i,o){this.elem=e,this.frameId=-1,this.dataProps=createSizedArray(a.length),this.renderer=i,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",a.length?a.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(o);var c,d=a.length||0,g;for(c=0;c<d;c+=1)g=PropertyFactory.getProp(e,a[c].v,0,0,this),this.k=g.k||this.k,this.dataProps[c]={n:a[c].n,p:g};this.k||this.getValue(!0),this._isAnimated=this.k}DashProperty.prototype.getValue=function(e){if(!(this.elem.globalData.frameId===this.frameId&&!e)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||e,this._mdf)){var a=0,i=this.dataProps.length;for(this.renderer==="svg"&&(this.dashStr=""),a=0;a<i;a+=1)this.dataProps[a].n!=="o"?this.renderer==="svg"?this.dashStr+=" "+this.dataProps[a].p.v:this.dashArray[a]=this.dataProps[a].p.v:this.dashoffset[0]=this.dataProps[a].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty);function SVGStrokeStyleData(e,a,i){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(e,a.o,0,.01,this),this.w=PropertyFactory.getProp(e,a.w,0,null,this),this.d=new DashProperty(e,a.d||{},"svg",this),this.c=PropertyFactory.getProp(e,a.c,1,255,this),this.style=i,this._isAnimated=!!this._isAnimated}extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData);function SVGFillStyleData(e,a,i){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(e,a.o,0,.01,this),this.c=PropertyFactory.getProp(e,a.c,1,255,this),this.style=i}extendPrototype([DynamicPropertyContainer],SVGFillStyleData);function SVGNoStyleData(e,a,i){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.style=i}extendPrototype([DynamicPropertyContainer],SVGNoStyleData);function GradientProperty(e,a,i){this.data=a,this.c=createTypedArray("uint8c",a.p*4);var o=a.k.k[0].s?a.k.k[0].s.length-a.p*4:a.k.k.length-a.p*4;this.o=createTypedArray("float32",o),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=o,this.initDynamicPropertyContainer(i),this.prop=PropertyFactory.getProp(e,a.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}GradientProperty.prototype.comparePoints=function(e,a){for(var i=0,o=this.o.length/2,c;i<o;){if(c=Math.abs(e[i*4]-e[a*4+i*2]),c>.01)return!1;i+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!==this.c.length/4)return!1;if(this.data.k.k[0].s)for(var e=0,a=this.data.k.k.length;e<a;){if(!this.comparePoints(this.data.k.k[e].s,this.data.p))return!1;e+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(e){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||e){var a,i=this.data.p*4,o,c;for(a=0;a<i;a+=1)o=a%4===0?100:255,c=Math.round(this.prop.v[a]*o),this.c[a]!==c&&(this.c[a]=c,this._cmdf=!e);if(this.o.length)for(i=this.prop.v.length,a=this.data.p*4;a<i;a+=1)o=a%2===0?100:1,c=a%2===0?Math.round(this.prop.v[a]*100):this.prop.v[a],this.o[a-this.data.p*4]!==c&&(this.o[a-this.data.p*4]=c,this._omdf=!e);this._mdf=!e}},extendPrototype([DynamicPropertyContainer],GradientProperty);function SVGGradientFillStyleData(e,a,i){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.initGradientData(e,a,i)}SVGGradientFillStyleData.prototype.initGradientData=function(e,a,i){this.o=PropertyFactory.getProp(e,a.o,0,.01,this),this.s=PropertyFactory.getProp(e,a.s,1,null,this),this.e=PropertyFactory.getProp(e,a.e,1,null,this),this.h=PropertyFactory.getProp(e,a.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(e,a.a||{k:0},0,degToRads,this),this.g=new GradientProperty(e,a.g,this),this.style=i,this.stops=[],this.setGradientData(i.pElem,a),this.setGradientOpacity(a,i),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(e,a){var i=createElementID(),o=createNS(a.t===1?"linearGradient":"radialGradient");o.setAttribute("id",i),o.setAttribute("spreadMethod","pad"),o.setAttribute("gradientUnits","userSpaceOnUse");var c=[],d,g,b;for(b=a.g.p*4,g=0;g<b;g+=4)d=createNS("stop"),o.appendChild(d),c.push(d);e.setAttribute(a.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+i+")"),this.gf=o,this.cst=c},SVGGradientFillStyleData.prototype.setGradientOpacity=function(e,a){if(this.g._hasOpacity&&!this.g._collapsable){var i,o,c,d=createNS("mask"),g=createNS("path");d.appendChild(g);var b=createElementID(),j=createElementID();d.setAttribute("id",j);var $=createNS(e.t===1?"linearGradient":"radialGradient");$.setAttribute("id",b),$.setAttribute("spreadMethod","pad"),$.setAttribute("gradientUnits","userSpaceOnUse"),c=e.g.k.k[0].s?e.g.k.k[0].s.length:e.g.k.k.length;var rt=this.stops;for(o=e.g.p*4;o<c;o+=2)i=createNS("stop"),i.setAttribute("stop-color","rgb(255,255,255)"),$.appendChild(i),rt.push(i);g.setAttribute(e.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+b+")"),e.ty==="gs"&&(g.setAttribute("stroke-linecap",lineCapEnum[e.lc||2]),g.setAttribute("stroke-linejoin",lineJoinEnum[e.lj||2]),e.lj===1&&g.setAttribute("stroke-miterlimit",e.ml)),this.of=$,this.ms=d,this.ost=rt,this.maskId=j,a.msElem=g}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData);function SVGGradientStrokeStyleData(e,a,i){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(e,a.w,0,null,this),this.d=new DashProperty(e,a.d||{},"svg",this),this.initGradientData(e,a,i),this._isAnimated=!!this._isAnimated}extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(e,a,i){this.transform={mProps:e,op:a,container:i},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}var buildShapeString=function(a,i,o,c){if(i===0)return"";var d=a.o,g=a.i,b=a.v,j,$=" M"+c.applyToPointStringified(b[0][0],b[0][1]);for(j=1;j<i;j+=1)$+=" C"+c.applyToPointStringified(d[j-1][0],d[j-1][1])+" "+c.applyToPointStringified(g[j][0],g[j][1])+" "+c.applyToPointStringified(b[j][0],b[j][1]);return o&&i&&($+=" C"+c.applyToPointStringified(d[j-1][0],d[j-1][1])+" "+c.applyToPointStringified(g[0][0],g[0][1])+" "+c.applyToPointStringified(b[0][0],b[0][1]),$+="z"),$},SVGElementsRenderer=function(){var e=new Matrix,a=new Matrix,i={createRenderFunction:o};function o(_e){switch(_e.ty){case"fl":return b;case"gf":return $;case"gs":return j;case"st":return rt;case"sh":case"el":case"rc":case"sr":return g;case"tr":return c;case"no":return d;default:return null}}function c(_e,st,ut){(ut||st.transform.op._mdf)&&st.transform.container.setAttribute("opacity",st.transform.op.v),(ut||st.transform.mProps._mdf)&&st.transform.container.setAttribute("transform",st.transform.mProps.v.to2dCSS())}function d(){}function g(_e,st,ut){var gt,yt,Pt,wt,Ct,At,Tt=st.styles.length,kt=st.lvl,It,Lt,Ft,Nt;for(At=0;At<Tt;At+=1){if(wt=st.sh._mdf||ut,st.styles[At].lvl<kt){for(Lt=a.reset(),Ft=kt-st.styles[At].lvl,Nt=st.transformers.length-1;!wt&&Ft>0;)wt=st.transformers[Nt].mProps._mdf||wt,Ft-=1,Nt-=1;if(wt)for(Ft=kt-st.styles[At].lvl,Nt=st.transformers.length-1;Ft>0;)Lt.multiply(st.transformers[Nt].mProps.v),Ft-=1,Nt-=1}else Lt=e;if(It=st.sh.paths,yt=It._length,wt){for(Pt="",gt=0;gt<yt;gt+=1)Ct=It.shapes[gt],Ct&&Ct._length&&(Pt+=buildShapeString(Ct,Ct._length,Ct.c,Lt));st.caches[At]=Pt}else Pt=st.caches[At];st.styles[At].d+=_e.hd===!0?"":Pt,st.styles[At]._mdf=wt||st.styles[At]._mdf}}function b(_e,st,ut){var gt=st.style;(st.c._mdf||ut)&&gt.pElem.setAttribute("fill","rgb("+bmFloor(st.c.v[0])+","+bmFloor(st.c.v[1])+","+bmFloor(st.c.v[2])+")"),(st.o._mdf||ut)&&gt.pElem.setAttribute("fill-opacity",st.o.v)}function j(_e,st,ut){$(_e,st,ut),rt(_e,st,ut)}function $(_e,st,ut){var gt=st.gf,yt=st.g._hasOpacity,Pt=st.s.v,wt=st.e.v;if(st.o._mdf||ut){var Ct=_e.ty==="gf"?"fill-opacity":"stroke-opacity";st.style.pElem.setAttribute(Ct,st.o.v)}if(st.s._mdf||ut){var At=_e.t===1?"x1":"cx",Tt=At==="x1"?"y1":"cy";gt.setAttribute(At,Pt[0]),gt.setAttribute(Tt,Pt[1]),yt&&!st.g._collapsable&&(st.of.setAttribute(At,Pt[0]),st.of.setAttribute(Tt,Pt[1]))}var kt,It,Lt,Ft;if(st.g._cmdf||ut){kt=st.cst;var Nt=st.g.c;for(Lt=kt.length,It=0;It<Lt;It+=1)Ft=kt[It],Ft.setAttribute("offset",Nt[It*4]+"%"),Ft.setAttribute("stop-color","rgb("+Nt[It*4+1]+","+Nt[It*4+2]+","+Nt[It*4+3]+")")}if(yt&&(st.g._omdf||ut)){var Ht=st.g.o;for(st.g._collapsable?kt=st.cst:kt=st.ost,Lt=kt.length,It=0;It<Lt;It+=1)Ft=kt[It],st.g._collapsable||Ft.setAttribute("offset",Ht[It*2]+"%"),Ft.setAttribute("stop-opacity",Ht[It*2+1])}if(_e.t===1)(st.e._mdf||ut)&&(gt.setAttribute("x2",wt[0]),gt.setAttribute("y2",wt[1]),yt&&!st.g._collapsable&&(st.of.setAttribute("x2",wt[0]),st.of.setAttribute("y2",wt[1])));else{var Gr;if((st.s._mdf||st.e._mdf||ut)&&(Gr=Math.sqrt(Math.pow(Pt[0]-wt[0],2)+Math.pow(Pt[1]-wt[1],2)),gt.setAttribute("r",Gr),yt&&!st.g._collapsable&&st.of.setAttribute("r",Gr)),st.e._mdf||st.h._mdf||st.a._mdf||ut){Gr||(Gr=Math.sqrt(Math.pow(Pt[0]-wt[0],2)+Math.pow(Pt[1]-wt[1],2)));var hs=Math.atan2(wt[1]-Pt[1],wt[0]-Pt[0]),_s=st.h.v;_s>=1?_s=.99:_s<=-1&&(_s=-.99);var hn=Gr*_s,Qn=Math.cos(hs+st.a.v)*hn+Pt[0],ds=Math.sin(hs+st.a.v)*hn+Pt[1];gt.setAttribute("fx",Qn),gt.setAttribute("fy",ds),yt&&!st.g._collapsable&&(st.of.setAttribute("fx",Qn),st.of.setAttribute("fy",ds))}}}function rt(_e,st,ut){var gt=st.style,yt=st.d;yt&&(yt._mdf||ut)&&yt.dashStr&&(gt.pElem.setAttribute("stroke-dasharray",yt.dashStr),gt.pElem.setAttribute("stroke-dashoffset",yt.dashoffset[0])),st.c&&(st.c._mdf||ut)&&gt.pElem.setAttribute("stroke","rgb("+bmFloor(st.c.v[0])+","+bmFloor(st.c.v[1])+","+bmFloor(st.c.v[2])+")"),(st.o._mdf||ut)&&gt.pElem.setAttribute("stroke-opacity",st.o.v),(st.w._mdf||ut)&&(gt.pElem.setAttribute("stroke-width",st.w.v),gt.msElem&&gt.msElem.setAttribute("stroke-width",st.w.v))}return i}();function SVGShapeElement(e,a,i){this.shapes=[],this.shapesData=e.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(e,a,i),this.prevViewData=[]}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var e,a=this.shapes.length,i,o,c=this.stylesList.length,d,g=[],b=!1;for(o=0;o<c;o+=1){for(d=this.stylesList[o],b=!1,g.length=0,e=0;e<a;e+=1)i=this.shapes[e],i.styles.indexOf(d)!==-1&&(g.push(i),b=i._isAnimated||b);g.length>1&&b&&this.setShapesAsAnimated(g)}},SVGShapeElement.prototype.setShapesAsAnimated=function(e){var a,i=e.length;for(a=0;a<i;a+=1)e[a].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(e,a){var i,o=new SVGStyleData(e,a),c=o.pElem;if(e.ty==="st")i=new SVGStrokeStyleData(this,e,o);else if(e.ty==="fl")i=new SVGFillStyleData(this,e,o);else if(e.ty==="gf"||e.ty==="gs"){var d=e.ty==="gf"?SVGGradientFillStyleData:SVGGradientStrokeStyleData;i=new d(this,e,o),this.globalData.defs.appendChild(i.gf),i.maskId&&(this.globalData.defs.appendChild(i.ms),this.globalData.defs.appendChild(i.of),c.setAttribute("mask","url("+getLocationHref()+"#"+i.maskId+")"))}else e.ty==="no"&&(i=new SVGNoStyleData(this,e,o));return(e.ty==="st"||e.ty==="gs")&&(c.setAttribute("stroke-linecap",lineCapEnum[e.lc||2]),c.setAttribute("stroke-linejoin",lineJoinEnum[e.lj||2]),c.setAttribute("fill-opacity","0"),e.lj===1&&c.setAttribute("stroke-miterlimit",e.ml)),e.r===2&&c.setAttribute("fill-rule","evenodd"),e.ln&&c.setAttribute("id",e.ln),e.cl&&c.setAttribute("class",e.cl),e.bm&&(c.style["mix-blend-mode"]=getBlendMode(e.bm)),this.stylesList.push(o),this.addToAnimatedContents(e,i),i},SVGShapeElement.prototype.createGroupElement=function(e){var a=new ShapeGroupData;return e.ln&&a.gr.setAttribute("id",e.ln),e.cl&&a.gr.setAttribute("class",e.cl),e.bm&&(a.gr.style["mix-blend-mode"]=getBlendMode(e.bm)),a},SVGShapeElement.prototype.createTransformElement=function(e,a){var i=TransformPropertyFactory.getTransformProperty(this,e,this),o=new SVGTransformData(i,i.o,a);return this.addToAnimatedContents(e,o),o},SVGShapeElement.prototype.createShapeElement=function(e,a,i){var o=4;e.ty==="rc"?o=5:e.ty==="el"?o=6:e.ty==="sr"&&(o=7);var c=ShapePropertyFactory.getShapeProp(this,e,o,this),d=new SVGShapeData(a,i,c);return this.shapes.push(d),this.addShapeToModifiers(d),this.addToAnimatedContents(e,d),d},SVGShapeElement.prototype.addToAnimatedContents=function(e,a){for(var i=0,o=this.animatedContents.length;i<o;){if(this.animatedContents[i].element===a)return;i+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(e),element:a,data:e})},SVGShapeElement.prototype.setElementStyles=function(e){var a=e.styles,i,o=this.stylesList.length;for(i=0;i<o;i+=1)this.stylesList[i].closed||a.push(this.stylesList[i])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var e,a=this.itemsData.length;for(e=0;e<a;e+=1)this.prevViewData[e]=this.itemsData[e];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),a=this.dynamicProperties.length,e=0;e<a;e+=1)this.dynamicProperties[e].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(e,a,i,o,c,d,g){var b=[].concat(d),j,$=e.length-1,rt,_e,st=[],ut=[],gt,yt,Pt;for(j=$;j>=0;j-=1){if(Pt=this.searchProcessedElement(e[j]),Pt?a[j]=i[Pt-1]:e[j]._render=g,e[j].ty==="fl"||e[j].ty==="st"||e[j].ty==="gf"||e[j].ty==="gs"||e[j].ty==="no")Pt?a[j].style.closed=!1:a[j]=this.createStyleElement(e[j],c),e[j]._render&&a[j].style.pElem.parentNode!==o&&o.appendChild(a[j].style.pElem),st.push(a[j].style);else if(e[j].ty==="gr"){if(!Pt)a[j]=this.createGroupElement(e[j]);else for(_e=a[j].it.length,rt=0;rt<_e;rt+=1)a[j].prevViewData[rt]=a[j].it[rt];this.searchShapes(e[j].it,a[j].it,a[j].prevViewData,a[j].gr,c+1,b,g),e[j]._render&&a[j].gr.parentNode!==o&&o.appendChild(a[j].gr)}else e[j].ty==="tr"?(Pt||(a[j]=this.createTransformElement(e[j],o)),gt=a[j].transform,b.push(gt)):e[j].ty==="sh"||e[j].ty==="rc"||e[j].ty==="el"||e[j].ty==="sr"?(Pt||(a[j]=this.createShapeElement(e[j],b,c)),this.setElementStyles(a[j])):e[j].ty==="tm"||e[j].ty==="rd"||e[j].ty==="ms"||e[j].ty==="pb"||e[j].ty==="zz"||e[j].ty==="op"?(Pt?(yt=a[j],yt.closed=!1):(yt=ShapeModifiers.getModifier(e[j].ty),yt.init(this,e[j]),a[j]=yt,this.shapeModifiers.push(yt)),ut.push(yt)):e[j].ty==="rp"&&(Pt?(yt=a[j],yt.closed=!0):(yt=ShapeModifiers.getModifier(e[j].ty),a[j]=yt,yt.init(this,e,j,a),this.shapeModifiers.push(yt),g=!1),ut.push(yt));this.addProcessedElement(e[j],j+1)}for($=st.length,j=0;j<$;j+=1)st[j].closed=!0;for($=ut.length,j=0;j<$;j+=1)ut[j].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var e,a=this.stylesList.length;for(e=0;e<a;e+=1)this.stylesList[e].reset();for(this.renderShape(),e=0;e<a;e+=1)(this.stylesList[e]._mdf||this._isFirstFrame)&&(this.stylesList[e].msElem&&(this.stylesList[e].msElem.setAttribute("d",this.stylesList[e].d),this.stylesList[e].d="M0 0"+this.stylesList[e].d),this.stylesList[e].pElem.setAttribute("d",this.stylesList[e].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var e,a=this.animatedContents.length,i;for(e=0;e<a;e+=1)i=this.animatedContents[e],(this._isFirstFrame||i.element._isAnimated)&&i.data!==!0&&i.fn(i.data,i.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null};function LetterProps(e,a,i,o,c,d){this.o=e,this.sw=a,this.sc=i,this.fc=o,this.m=c,this.p=d,this._mdf={o:!0,sw:!!a,sc:!!i,fc:!!o,m:!0,p:!0}}LetterProps.prototype.update=function(e,a,i,o,c,d){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var g=!1;return this.o!==e&&(this.o=e,this._mdf.o=!0,g=!0),this.sw!==a&&(this.sw=a,this._mdf.sw=!0,g=!0),this.sc!==i&&(this.sc=i,this._mdf.sc=!0,g=!0),this.fc!==o&&(this.fc=o,this._mdf.fc=!0,g=!0),this.m!==c&&(this.m=c,this._mdf.m=!0,g=!0),d.length&&(this.p[0]!==d[0]||this.p[1]!==d[1]||this.p[4]!==d[4]||this.p[5]!==d[5]||this.p[12]!==d[12]||this.p[13]!==d[13])&&(this.p=d,this._mdf.p=!0,g=!0),g};function TextProperty(e,a){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,a.d&&a.d.sid&&(a.d=e.globalData.slotManager.getProp(a.d)),this.data=a,this.elem=e,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(e,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i]);return e},TextProperty.prototype.setCurrentData=function(e){e.__complete||this.completeTextData(e),this.currentData=e,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(e){this.effectsSequence.push(e),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(e){if(!((this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)&&!e)){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var a=this.currentData,i=this.keysIndex;if(this.lock){this.setCurrentData(this.currentData);return}this.lock=!0,this._mdf=!1;var o,c=this.effectsSequence.length,d=e||this.data.d.k[this.keysIndex].s;for(o=0;o<c;o+=1)i!==this.keysIndex?d=this.effectsSequence[o](d,d.t):d=this.effectsSequence[o](this.currentData,d.t);a!==d&&this.setCurrentData(d),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}},TextProperty.prototype.getKeyframeValue=function(){for(var e=this.data.d.k,a=this.elem.comp.renderedFrame,i=0,o=e.length;i<=o-1&&!(i===o-1||e[i+1].t>a);)i+=1;return this.keysIndex!==i&&(this.keysIndex=i),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(e){for(var a=[],i=0,o=e.length,c,d,g=!1,b=!1,j="";i<o;)g=b,b=!1,c=e.charCodeAt(i),j=e.charAt(i),FontManager.isCombinedCharacter(c)?g=!0:c>=55296&&c<=56319?FontManager.isRegionalFlag(e,i)?j=e.substr(i,14):(d=e.charCodeAt(i+1),d>=56320&&d<=57343&&(FontManager.isModifier(c,d)?(j=e.substr(i,2),g=!0):FontManager.isFlagEmoji(e.substr(i,4))?j=e.substr(i,4):j=e.substr(i,2))):c>56319?(d=e.charCodeAt(i+1),FontManager.isVariationSelector(c)&&(g=!0)):FontManager.isZeroWidthJoiner(c)&&(g=!0,b=!0),g?(a[a.length-1]+=j,g=!1):a.push(j),i+=j.length;return a},TextProperty.prototype.completeTextData=function(e){e.__complete=!0;var a=this.elem.globalData.fontManager,i=this.data,o=[],c,d,g,b=0,j,$=i.m.g,rt=0,_e=0,st=0,ut=[],gt=0,yt=0,Pt,wt,Ct=a.getFontByName(e.f),At,Tt=0,kt=getFontProperties(Ct);e.fWeight=kt.weight,e.fStyle=kt.style,e.finalSize=e.s,e.finalText=this.buildFinalText(e.t),d=e.finalText.length,e.finalLineHeight=e.lh;var It=e.tr/1e3*e.finalSize,Lt;if(e.sz)for(var Ft=!0,Nt=e.sz[0],Ht=e.sz[1],Gr,hs;Ft;){hs=this.buildFinalText(e.t),Gr=0,gt=0,d=hs.length,It=e.tr/1e3*e.finalSize;var _s=-1;for(c=0;c<d;c+=1)Lt=hs[c].charCodeAt(0),g=!1,hs[c]===" "?_s=c:(Lt===13||Lt===3)&&(gt=0,g=!0,Gr+=e.finalLineHeight||e.finalSize*1.2),a.chars?(At=a.getCharData(hs[c],Ct.fStyle,Ct.fFamily),Tt=g?0:At.w*e.finalSize/100):Tt=a.measureText(hs[c],e.f,e.finalSize),gt+Tt>Nt&&hs[c]!==" "?(_s===-1?d+=1:c=_s,Gr+=e.finalLineHeight||e.finalSize*1.2,hs.splice(c,_s===c?1:0,"\r"),_s=-1,gt=0):(gt+=Tt,gt+=It);Gr+=Ct.ascent*e.finalSize/100,this.canResize&&e.finalSize>this.minimumFontSize&&Ht<Gr?(e.finalSize-=1,e.finalLineHeight=e.finalSize*e.lh/e.s):(e.finalText=hs,d=e.finalText.length,Ft=!1)}gt=-It,Tt=0;var hn=0,Qn;for(c=0;c<d;c+=1)if(g=!1,Qn=e.finalText[c],Lt=Qn.charCodeAt(0),Lt===13||Lt===3?(hn=0,ut.push(gt),yt=gt>yt?gt:yt,gt=-2*It,j="",g=!0,st+=1):j=Qn,a.chars?(At=a.getCharData(Qn,Ct.fStyle,a.getFontByName(e.f).fFamily),Tt=g?0:At.w*e.finalSize/100):Tt=a.measureText(j,e.f,e.finalSize),Qn===" "?hn+=Tt+It:(gt+=Tt+It+hn,hn=0),o.push({l:Tt,an:Tt,add:rt,n:g,anIndexes:[],val:j,line:st,animatorJustifyOffset:0}),$==2){if(rt+=Tt,j===""||j===" "||c===d-1){for((j===""||j===" ")&&(rt-=Tt);_e<=c;)o[_e].an=rt,o[_e].ind=b,o[_e].extra=Tt,_e+=1;b+=1,rt=0}}else if($==3){if(rt+=Tt,j===""||c===d-1){for(j===""&&(rt-=Tt);_e<=c;)o[_e].an=rt,o[_e].ind=b,o[_e].extra=Tt,_e+=1;rt=0,b+=1}}else o[b].ind=b,o[b].extra=0,b+=1;if(e.l=o,yt=gt>yt?gt:yt,ut.push(gt),e.sz)e.boxWidth=e.sz[0],e.justifyOffset=0;else switch(e.boxWidth=yt,e.j){case 1:e.justifyOffset=-e.boxWidth;break;case 2:e.justifyOffset=-e.boxWidth/2;break;default:e.justifyOffset=0}e.lineWidths=ut;var ds=i.a,un,dr;wt=ds.length;var us,Nn,gn=[];for(Pt=0;Pt<wt;Pt+=1){for(un=ds[Pt],un.a.sc&&(e.strokeColorAnim=!0),un.a.sw&&(e.strokeWidthAnim=!0),(un.a.fc||un.a.fh||un.a.fs||un.a.fb)&&(e.fillColorAnim=!0),Nn=0,us=un.s.b,c=0;c<d;c+=1)dr=o[c],dr.anIndexes[Pt]=Nn,(us==1&&dr.val!==""||us==2&&dr.val!==""&&dr.val!==" "||us==3&&(dr.n||dr.val==" "||c==d-1)||us==4&&(dr.n||c==d-1))&&(un.s.rn===1&&gn.push(Nn),Nn+=1);i.a[Pt].s.totalChars=Nn;var Zn=-1,xu;if(un.s.rn===1)for(c=0;c<d;c+=1)dr=o[c],Zn!=dr.anIndexes[Pt]&&(Zn=dr.anIndexes[Pt],xu=gn.splice(Math.floor(Math.random()*gn.length),1)[0]),dr.anIndexes[Pt]=xu}e.yOffset=e.finalLineHeight||e.finalSize*1.2,e.ls=e.ls||0,e.ascent=Ct.ascent*e.finalSize/100},TextProperty.prototype.updateDocumentData=function(e,a){a=a===void 0?this.keysIndex:a;var i=this.copyData({},this.data.d.k[a].s);i=this.copyData(i,e),this.data.d.k[a].s=i,this.recalculate(a),this.setCurrentData(i),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(e){var a=this.data.d.k[e].s;a.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(a)},TextProperty.prototype.canResizeFont=function(e){this.canResize=e,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(e){this.minimumFontSize=Math.floor(e)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var e=Math.max,a=Math.min,i=Math.floor;function o(d,g){this._currentTextLength=-1,this.k=!1,this.data=g,this.elem=d,this.comp=d.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(d),this.s=PropertyFactory.getProp(d,g.s||{k:0},0,0,this),"e"in g?this.e=PropertyFactory.getProp(d,g.e,0,0,this):this.e={v:100},this.o=PropertyFactory.getProp(d,g.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(d,g.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(d,g.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(d,g.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(d,g.a,0,.01,this),this.dynamicProperties.length||this.getValue()}o.prototype={getMult:function(g){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var b=0,j=0,$=1,rt=1;this.ne.v>0?b=this.ne.v/100:j=-this.ne.v/100,this.xe.v>0?$=1-this.xe.v/100:rt=1+this.xe.v/100;var _e=BezierFactory.getBezierEasing(b,j,$,rt).get,st=0,ut=this.finalS,gt=this.finalE,yt=this.data.sh;if(yt===2)gt===ut?st=g>=gt?1:0:st=e(0,a(.5/(gt-ut)+(g-ut)/(gt-ut),1)),st=_e(st);else if(yt===3)gt===ut?st=g>=gt?0:1:st=1-e(0,a(.5/(gt-ut)+(g-ut)/(gt-ut),1)),st=_e(st);else if(yt===4)gt===ut?st=0:(st=e(0,a(.5/(gt-ut)+(g-ut)/(gt-ut),1)),st<.5?st*=2:st=1-2*(st-.5)),st=_e(st);else if(yt===5){if(gt===ut)st=0;else{var Pt=gt-ut;g=a(e(0,g+.5-ut),gt-ut);var wt=-Pt/2+g,Ct=Pt/2;st=Math.sqrt(1-wt*wt/(Ct*Ct))}st=_e(st)}else yt===6?(gt===ut?st=0:(g=a(e(0,g+.5-ut),gt-ut),st=(1+Math.cos(Math.PI+Math.PI*2*g/(gt-ut)))/2),st=_e(st)):(g>=i(ut)&&(g-ut<0?st=e(0,a(a(gt,1)-(ut-g),1)):st=e(0,a(gt-g,1))),st=_e(st));if(this.sm.v!==100){var At=this.sm.v*.01;At===0&&(At=1e-8);var Tt=.5-At*.5;st<Tt?st=0:(st=(st-Tt)/At,st>1&&(st=1))}return st*this.a.v},getValue:function(g){this.iterateDynamicProperties(),this._mdf=g||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,g&&this.data.r===2&&(this.e.v=this._currentTextLength);var b=this.data.r===2?1:100/this.data.totalChars,j=this.o.v/b,$=this.s.v/b+j,rt=this.e.v/b+j;if($>rt){var _e=$;$=rt,rt=_e}this.finalS=$,this.finalE=rt}},extendPrototype([DynamicPropertyContainer],o);function c(d,g,b){return new o(d,g)}return{getTextSelectorProp:c}}();function TextAnimatorDataProperty(e,a,i){var o={propType:!1},c=PropertyFactory.getProp,d=a.a;this.a={r:d.r?c(e,d.r,0,degToRads,i):o,rx:d.rx?c(e,d.rx,0,degToRads,i):o,ry:d.ry?c(e,d.ry,0,degToRads,i):o,sk:d.sk?c(e,d.sk,0,degToRads,i):o,sa:d.sa?c(e,d.sa,0,degToRads,i):o,s:d.s?c(e,d.s,1,.01,i):o,a:d.a?c(e,d.a,1,0,i):o,o:d.o?c(e,d.o,0,.01,i):o,p:d.p?c(e,d.p,1,0,i):o,sw:d.sw?c(e,d.sw,0,0,i):o,sc:d.sc?c(e,d.sc,1,0,i):o,fc:d.fc?c(e,d.fc,1,0,i):o,fh:d.fh?c(e,d.fh,0,0,i):o,fs:d.fs?c(e,d.fs,0,.01,i):o,fb:d.fb?c(e,d.fb,0,.01,i):o,t:d.t?c(e,d.t,0,0,i):o},this.s=TextSelectorProp.getTextSelectorProp(e,a.s,i),this.s.t=a.s.t}function TextAnimatorProperty(e,a,i){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=e,this._renderType=a,this._elem=i,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(i)}TextAnimatorProperty.prototype.searchProperties=function(){var e,a=this._textData.a.length,i,o=PropertyFactory.getProp;for(e=0;e<a;e+=1)i=this._textData.a[e],this._animatorsData[e]=new TextAnimatorDataProperty(this._elem,i,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:o(this._elem,this._textData.p.a,0,0,this),f:o(this._elem,this._textData.p.f,0,0,this),l:o(this._elem,this._textData.p.l,0,0,this),r:o(this._elem,this._textData.p.r,0,0,this),p:o(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=o(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(e,a){if(this.lettersChangedFlag=a,!(!this._mdf&&!this._isFirstFrame&&!a&&(!this._hasMaskedPath||!this._pathData.m._mdf))){this._isFirstFrame=!1;var i=this._moreOptions.alignment.v,o=this._animatorsData,c=this._textData,d=this.mHelper,g=this._renderType,b=this.renderedLetters.length,j,$,rt,_e,st=e.l,ut,gt,yt,Pt,wt,Ct,At,Tt,kt,It,Lt,Ft,Nt,Ht,Gr;if(this._hasMaskedPath){if(Gr=this._pathData.m,!this._pathData.n||this._pathData._mdf){var hs=Gr.v;this._pathData.r.v&&(hs=hs.reverse()),ut={tLength:0,segments:[]},_e=hs._length-1;var _s;for(Ft=0,rt=0;rt<_e;rt+=1)_s=bez.buildBezierData(hs.v[rt],hs.v[rt+1],[hs.o[rt][0]-hs.v[rt][0],hs.o[rt][1]-hs.v[rt][1]],[hs.i[rt+1][0]-hs.v[rt+1][0],hs.i[rt+1][1]-hs.v[rt+1][1]]),ut.tLength+=_s.segmentLength,ut.segments.push(_s),Ft+=_s.segmentLength;rt=_e,Gr.v.c&&(_s=bez.buildBezierData(hs.v[rt],hs.v[0],[hs.o[rt][0]-hs.v[rt][0],hs.o[rt][1]-hs.v[rt][1]],[hs.i[0][0]-hs.v[0][0],hs.i[0][1]-hs.v[0][1]]),ut.tLength+=_s.segmentLength,ut.segments.push(_s),Ft+=_s.segmentLength),this._pathData.pi=ut}if(ut=this._pathData.pi,gt=this._pathData.f.v,At=0,Ct=1,Pt=0,wt=!0,It=ut.segments,gt<0&&Gr.v.c)for(ut.tLength<Math.abs(gt)&&(gt=-Math.abs(gt)%ut.tLength),At=It.length-1,kt=It[At].points,Ct=kt.length-1;gt<0;)gt+=kt[Ct].partialLength,Ct-=1,Ct<0&&(At-=1,kt=It[At].points,Ct=kt.length-1);kt=It[At].points,Tt=kt[Ct-1],yt=kt[Ct],Lt=yt.partialLength}_e=st.length,j=0,$=0;var hn=e.finalSize*1.2*.714,Qn=!0,ds,un,dr,us,Nn;us=o.length;var gn,Zn=-1,xu,au,Vv,wu=gt,a1=At,P0=Ct,B0=-1,q1,ox,N_,eS,tS,tA,aR,sR,AA="",SA=this.defaultPropsArray,IO;if(e.j===2||e.j===1){var pO=0,Su=0,mu=e.j===2?-.5:-1,ax=0,tE=!0;for(rt=0;rt<_e;rt+=1)if(st[rt].n){for(pO&&(pO+=Su);ax<rt;)st[ax].animatorJustifyOffset=pO,ax+=1;pO=0,tE=!0}else{for(dr=0;dr<us;dr+=1)ds=o[dr].a,ds.t.propType&&(tE&&e.j===2&&(Su+=ds.t.v*mu),un=o[dr].s,gn=un.getMult(st[rt].anIndexes[dr],c.a[dr].s.totalChars),gn.length?pO+=ds.t.v*gn[0]*mu:pO+=ds.t.v*gn*mu);tE=!1}for(pO&&(pO+=Su);ax<rt;)st[ax].animatorJustifyOffset=pO,ax+=1}for(rt=0;rt<_e;rt+=1){if(d.reset(),q1=1,st[rt].n)j=0,$+=e.yOffset,$+=Qn?1:0,gt=wu,Qn=!1,this._hasMaskedPath&&(At=a1,Ct=P0,kt=It[At].points,Tt=kt[Ct-1],yt=kt[Ct],Lt=yt.partialLength,Pt=0),AA="",sR="",tA="",IO="",SA=this.defaultPropsArray;else{if(this._hasMaskedPath){if(B0!==st[rt].line){switch(e.j){case 1:gt+=Ft-e.lineWidths[st[rt].line];break;case 2:gt+=(Ft-e.lineWidths[st[rt].line])/2;break}B0=st[rt].line}Zn!==st[rt].ind&&(st[Zn]&&(gt+=st[Zn].extra),gt+=st[rt].an/2,Zn=st[rt].ind),gt+=i[0]*st[rt].an*.005;var So=0;for(dr=0;dr<us;dr+=1)ds=o[dr].a,ds.p.propType&&(un=o[dr].s,gn=un.getMult(st[rt].anIndexes[dr],c.a[dr].s.totalChars),gn.length?So+=ds.p.v[0]*gn[0]:So+=ds.p.v[0]*gn),ds.a.propType&&(un=o[dr].s,gn=un.getMult(st[rt].anIndexes[dr],c.a[dr].s.totalChars),gn.length?So+=ds.a.v[0]*gn[0]:So+=ds.a.v[0]*gn);for(wt=!0,this._pathData.a.v&&(gt=st[0].an*.5+(Ft-this._pathData.f.v-st[0].an*.5-st[st.length-1].an*.5)*Zn/(_e-1),gt+=this._pathData.f.v);wt;)Pt+Lt>=gt+So||!kt?(Nt=(gt+So-Pt)/yt.partialLength,au=Tt.point[0]+(yt.point[0]-Tt.point[0])*Nt,Vv=Tt.point[1]+(yt.point[1]-Tt.point[1])*Nt,d.translate(-i[0]*st[rt].an*.005,-(i[1]*hn)*.01),wt=!1):kt&&(Pt+=yt.partialLength,Ct+=1,Ct>=kt.length&&(Ct=0,At+=1,It[At]?kt=It[At].points:Gr.v.c?(Ct=0,At=0,kt=It[At].points):(Pt-=yt.partialLength,kt=null)),kt&&(Tt=yt,yt=kt[Ct],Lt=yt.partialLength));xu=st[rt].an/2-st[rt].add,d.translate(-xu,0,0)}else xu=st[rt].an/2-st[rt].add,d.translate(-xu,0,0),d.translate(-i[0]*st[rt].an*.005,-i[1]*hn*.01,0);for(dr=0;dr<us;dr+=1)ds=o[dr].a,ds.t.propType&&(un=o[dr].s,gn=un.getMult(st[rt].anIndexes[dr],c.a[dr].s.totalChars),(j!==0||e.j!==0)&&(this._hasMaskedPath?gn.length?gt+=ds.t.v*gn[0]:gt+=ds.t.v*gn:gn.length?j+=ds.t.v*gn[0]:j+=ds.t.v*gn));for(e.strokeWidthAnim&&(N_=e.sw||0),e.strokeColorAnim&&(e.sc?ox=[e.sc[0],e.sc[1],e.sc[2]]:ox=[0,0,0]),e.fillColorAnim&&e.fc&&(eS=[e.fc[0],e.fc[1],e.fc[2]]),dr=0;dr<us;dr+=1)ds=o[dr].a,ds.a.propType&&(un=o[dr].s,gn=un.getMult(st[rt].anIndexes[dr],c.a[dr].s.totalChars),gn.length?d.translate(-ds.a.v[0]*gn[0],-ds.a.v[1]*gn[1],ds.a.v[2]*gn[2]):d.translate(-ds.a.v[0]*gn,-ds.a.v[1]*gn,ds.a.v[2]*gn));for(dr=0;dr<us;dr+=1)ds=o[dr].a,ds.s.propType&&(un=o[dr].s,gn=un.getMult(st[rt].anIndexes[dr],c.a[dr].s.totalChars),gn.length?d.scale(1+(ds.s.v[0]-1)*gn[0],1+(ds.s.v[1]-1)*gn[1],1):d.scale(1+(ds.s.v[0]-1)*gn,1+(ds.s.v[1]-1)*gn,1));for(dr=0;dr<us;dr+=1){if(ds=o[dr].a,un=o[dr].s,gn=un.getMult(st[rt].anIndexes[dr],c.a[dr].s.totalChars),ds.sk.propType&&(gn.length?d.skewFromAxis(-ds.sk.v*gn[0],ds.sa.v*gn[1]):d.skewFromAxis(-ds.sk.v*gn,ds.sa.v*gn)),ds.r.propType&&(gn.length?d.rotateZ(-ds.r.v*gn[2]):d.rotateZ(-ds.r.v*gn)),ds.ry.propType&&(gn.length?d.rotateY(ds.ry.v*gn[1]):d.rotateY(ds.ry.v*gn)),ds.rx.propType&&(gn.length?d.rotateX(ds.rx.v*gn[0]):d.rotateX(ds.rx.v*gn)),ds.o.propType&&(gn.length?q1+=(ds.o.v*gn[0]-q1)*gn[0]:q1+=(ds.o.v*gn-q1)*gn),e.strokeWidthAnim&&ds.sw.propType&&(gn.length?N_+=ds.sw.v*gn[0]:N_+=ds.sw.v*gn),e.strokeColorAnim&&ds.sc.propType)for(tS=0;tS<3;tS+=1)gn.length?ox[tS]+=(ds.sc.v[tS]-ox[tS])*gn[0]:ox[tS]+=(ds.sc.v[tS]-ox[tS])*gn;if(e.fillColorAnim&&e.fc){if(ds.fc.propType)for(tS=0;tS<3;tS+=1)gn.length?eS[tS]+=(ds.fc.v[tS]-eS[tS])*gn[0]:eS[tS]+=(ds.fc.v[tS]-eS[tS])*gn;ds.fh.propType&&(gn.length?eS=addHueToRGB(eS,ds.fh.v*gn[0]):eS=addHueToRGB(eS,ds.fh.v*gn)),ds.fs.propType&&(gn.length?eS=addSaturationToRGB(eS,ds.fs.v*gn[0]):eS=addSaturationToRGB(eS,ds.fs.v*gn)),ds.fb.propType&&(gn.length?eS=addBrightnessToRGB(eS,ds.fb.v*gn[0]):eS=addBrightnessToRGB(eS,ds.fb.v*gn))}}for(dr=0;dr<us;dr+=1)ds=o[dr].a,ds.p.propType&&(un=o[dr].s,gn=un.getMult(st[rt].anIndexes[dr],c.a[dr].s.totalChars),this._hasMaskedPath?gn.length?d.translate(0,ds.p.v[1]*gn[0],-ds.p.v[2]*gn[1]):d.translate(0,ds.p.v[1]*gn,-ds.p.v[2]*gn):gn.length?d.translate(ds.p.v[0]*gn[0],ds.p.v[1]*gn[1],-ds.p.v[2]*gn[2]):d.translate(ds.p.v[0]*gn,ds.p.v[1]*gn,-ds.p.v[2]*gn));if(e.strokeWidthAnim&&(tA=N_<0?0:N_),e.strokeColorAnim&&(aR="rgb("+Math.round(ox[0]*255)+","+Math.round(ox[1]*255)+","+Math.round(ox[2]*255)+")"),e.fillColorAnim&&e.fc&&(sR="rgb("+Math.round(eS[0]*255)+","+Math.round(eS[1]*255)+","+Math.round(eS[2]*255)+")"),this._hasMaskedPath){if(d.translate(0,-e.ls),d.translate(0,i[1]*hn*.01+$,0),this._pathData.p.v){Ht=(yt.point[1]-Tt.point[1])/(yt.point[0]-Tt.point[0]);var fD=Math.atan(Ht)*180/Math.PI;yt.point[0]<Tt.point[0]&&(fD+=180),d.rotate(-fD*Math.PI/180)}d.translate(au,Vv,0),gt-=i[0]*st[rt].an*.005,st[rt+1]&&Zn!==st[rt+1].ind&&(gt+=st[rt].an/2,gt+=e.tr*.001*e.finalSize)}else{switch(d.translate(j,$,0),e.ps&&d.translate(e.ps[0],e.ps[1]+e.ascent,0),e.j){case 1:d.translate(st[rt].animatorJustifyOffset+e.justifyOffset+(e.boxWidth-e.lineWidths[st[rt].line]),0,0);break;case 2:d.translate(st[rt].animatorJustifyOffset+e.justifyOffset+(e.boxWidth-e.lineWidths[st[rt].line])/2,0,0);break}d.translate(0,-e.ls),d.translate(xu,0,0),d.translate(i[0]*st[rt].an*.005,i[1]*hn*.01,0),j+=st[rt].l+e.tr*.001*e.finalSize}g==="html"?AA=d.toCSS():g==="svg"?AA=d.to2dCSS():SA=[d.props[0],d.props[1],d.props[2],d.props[3],d.props[4],d.props[5],d.props[6],d.props[7],d.props[8],d.props[9],d.props[10],d.props[11],d.props[12],d.props[13],d.props[14],d.props[15]],IO=q1}b<=rt?(Nn=new LetterProps(IO,tA,aR,sR,AA,SA),this.renderedLetters.push(Nn),b+=1,this.lettersChangedFlag=!0):(Nn=this.renderedLetters[rt],this.lettersChangedFlag=Nn.update(IO,tA,aR,sR,AA,SA)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty);function ITextElement(){}ITextElement.prototype.initElement=function(e,a,i){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(e,a,i),this.textProperty=new TextProperty(this,e.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(e.t,this.renderType,this),this.initTransform(e,a,i),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(e){this._mdf=!1,this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange)},ITextElement.prototype.createPathShape=function(e,a){var i,o=a.length,c,d="";for(i=0;i<o;i+=1)a[i].ty==="sh"&&(c=a[i].ks.k,d+=buildShapeString(c,c.i.length,!0,e));return d},ITextElement.prototype.updateDocumentData=function(e,a){this.textProperty.updateDocumentData(e,a)},ITextElement.prototype.canResizeFont=function(e){this.textProperty.canResizeFont(e)},ITextElement.prototype.setMinimumFontSize=function(e){this.textProperty.setMinimumFontSize(e)},ITextElement.prototype.applyTextPropertiesToMatrix=function(e,a,i,o,c){switch(e.ps&&a.translate(e.ps[0],e.ps[1]+e.ascent,0),a.translate(0,-e.ls,0),e.j){case 1:a.translate(e.justifyOffset+(e.boxWidth-e.lineWidths[i]),0,0);break;case 2:a.translate(e.justifyOffset+(e.boxWidth-e.lineWidths[i])/2,0,0);break}a.translate(o,c,0)},ITextElement.prototype.buildColor=function(e){return"rgb("+Math.round(e[0]*255)+","+Math.round(e[1]*255)+","+Math.round(e[2]*255)+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},ITextElement.prototype.validateText=function(){(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)};var emptyShapeData={shapes:[]};function SVGTextLottieElement(e,a,i){this.textSpans=[],this.renderType="svg",this.initElement(e,a,i)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(e){for(var a=0,i=e.length,o=[],c="";a<i;)e[a]==="\r"||e[a]===""?(o.push(c),c=""):c+=e[a],a+=1;return o.push(c),o},SVGTextLottieElement.prototype.buildShapeData=function(e,a){if(e.shapes&&e.shapes.length){var i=e.shapes[0];if(i.it){var o=i.it[i.it.length-1];o.s&&(o.s.k[0]=a,o.s.k[1]=a)}}return e},SVGTextLottieElement.prototype.buildNewText=function(){this.addDynamicProperty(this);var e,a,i=this.textProperty.currentData;this.renderedLetters=createSizedArray(i?i.l.length:0),i.fc?this.layerElement.setAttribute("fill",this.buildColor(i.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),i.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(i.sc)),this.layerElement.setAttribute("stroke-width",i.sw)),this.layerElement.setAttribute("font-size",i.finalSize);var o=this.globalData.fontManager.getFontByName(i.f);if(o.fClass)this.layerElement.setAttribute("class",o.fClass);else{this.layerElement.setAttribute("font-family",o.fFamily);var c=i.fWeight,d=i.fStyle;this.layerElement.setAttribute("font-style",d),this.layerElement.setAttribute("font-weight",c)}this.layerElement.setAttribute("aria-label",i.t);var g=i.l||[],b=!!this.globalData.fontManager.chars;a=g.length;var j,$=this.mHelper,rt="",_e=this.data.singleShape,st=0,ut=0,gt=!0,yt=i.tr*.001*i.finalSize;if(_e&&!b&&!i.sz){var Pt=this.textContainer,wt="start";switch(i.j){case 1:wt="end";break;case 2:wt="middle";break;default:wt="start";break}Pt.setAttribute("text-anchor",wt),Pt.setAttribute("letter-spacing",yt);var Ct=this.buildTextContents(i.finalText);for(a=Ct.length,ut=i.ps?i.ps[1]+i.ascent:0,e=0;e<a;e+=1)j=this.textSpans[e].span||createNS("tspan"),j.textContent=Ct[e],j.setAttribute("x",0),j.setAttribute("y",ut),j.style.display="inherit",Pt.appendChild(j),this.textSpans[e]||(this.textSpans[e]={span:null,glyph:null}),this.textSpans[e].span=j,ut+=i.finalLineHeight;this.layerElement.appendChild(Pt)}else{var At=this.textSpans.length,Tt;for(e=0;e<a;e+=1){if(this.textSpans[e]||(this.textSpans[e]={span:null,childSpan:null,glyph:null}),!b||!_e||e===0){if(j=At>e?this.textSpans[e].span:createNS(b?"g":"text"),At<=e){if(j.setAttribute("stroke-linecap","butt"),j.setAttribute("stroke-linejoin","round"),j.setAttribute("stroke-miterlimit","4"),this.textSpans[e].span=j,b){var kt=createNS("g");j.appendChild(kt),this.textSpans[e].childSpan=kt}this.textSpans[e].span=j,this.layerElement.appendChild(j)}j.style.display="inherit"}if($.reset(),_e&&(g[e].n&&(st=-yt,ut+=i.yOffset,ut+=gt?1:0,gt=!1),this.applyTextPropertiesToMatrix(i,$,g[e].line,st,ut),st+=g[e].l||0,st+=yt),b){Tt=this.globalData.fontManager.getCharData(i.finalText[e],o.fStyle,this.globalData.fontManager.getFontByName(i.f).fFamily);var It;if(Tt.t===1)It=new SVGCompElement(Tt.data,this.globalData,this);else{var Lt=emptyShapeData;Tt.data&&Tt.data.shapes&&(Lt=this.buildShapeData(Tt.data,i.finalSize)),It=new SVGShapeElement(Lt,this.globalData,this)}if(this.textSpans[e].glyph){var Ft=this.textSpans[e].glyph;this.textSpans[e].childSpan.removeChild(Ft.layerElement),Ft.destroy()}this.textSpans[e].glyph=It,It._debug=!0,It.prepareFrame(0),It.renderFrame(),this.textSpans[e].childSpan.appendChild(It.layerElement),Tt.t===1&&this.textSpans[e].childSpan.setAttribute("transform","scale("+i.finalSize/100+","+i.finalSize/100+")")}else _e&&j.setAttribute("transform","translate("+$.props[12]+","+$.props[13]+")"),j.textContent=g[e].val,j.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}_e&&j&&j.setAttribute("d",rt)}for(;e<this.textSpans.length;)this.textSpans[e].span.style.display="none",e+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var e=this.layerElement.getBBox();this.bbox={top:e.y,left:e.x,width:e.width,height:e.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var e,a=this.textSpans.length,i;for(this.renderedFrame=this.comp.renderedFrame,e=0;e<a;e+=1)i=this.textSpans[e].glyph,i&&(i.prepareFrame(this.comp.renderedFrame-this.data.st),i._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if(this.validateText(),(!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){this._sizeChanged=!0;var e,a,i=this.textAnimator.renderedLetters,o=this.textProperty.currentData.l;a=o.length;var c,d,g;for(e=0;e<a;e+=1)o[e].n||(c=i[e],d=this.textSpans[e].span,g=this.textSpans[e].glyph,g&&g.renderFrame(),c._mdf.m&&d.setAttribute("transform",c.m),c._mdf.o&&d.setAttribute("opacity",c.o),c._mdf.sw&&d.setAttribute("stroke-width",c.sw),c._mdf.sc&&d.setAttribute("stroke",c.sc),c._mdf.fc&&d.setAttribute("fill",c.fc))}};function ISolidElement(e,a,i){this.initElement(e,a,i)}extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var e=createNS("rect");e.setAttribute("width",this.data.sw),e.setAttribute("height",this.data.sh),e.setAttribute("fill",this.data.sc),this.layerElement.appendChild(e)};function NullElement(e,a,i){this.initFrame(),this.initBaseData(e,a,i),this.initFrame(),this.initTransform(e,a,i),this.initHierarchy()}NullElement.prototype.prepareFrame=function(e){this.prepareProperties(e,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement);function SVGRendererBase(){}extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(e){return new NullElement(e,this.globalData,this)},SVGRendererBase.prototype.createShape=function(e){return new SVGShapeElement(e,this.globalData,this)},SVGRendererBase.prototype.createText=function(e){return new SVGTextLottieElement(e,this.globalData,this)},SVGRendererBase.prototype.createImage=function(e){return new IImageElement(e,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(e){return new ISolidElement(e,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(e){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+e.w+" "+e.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",e.w),this.svgElement.setAttribute("height",e.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),this.renderConfig.focusable!==void 0&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var a=this.globalData.defs;this.setupGlobalData(e,a),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=e;var i=createNS("clipPath"),o=createNS("rect");o.setAttribute("width",e.w),o.setAttribute("height",e.h),o.setAttribute("x",0),o.setAttribute("y",0);var c=createElementID();i.setAttribute("id",c),i.appendChild(o),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+c+")"),a.appendChild(i),this.layers=e.layers,this.elements=createSizedArray(e.layers.length)},SVGRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var e,a=this.layers?this.layers.length:0;for(e=0;e<a;e+=1)this.elements[e]&&this.elements[e].destroy&&this.elements[e].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(e){var a=0,i=this.layers.length;for(a=0;a<i;a+=1)if(this.layers[a].ind===e)return a;return-1},SVGRendererBase.prototype.buildItem=function(e){var a=this.elements;if(!(a[e]||this.layers[e].ty===99)){a[e]=!0;var i=this.createItem(this.layers[e]);if(a[e]=i,getExpressionsPlugin()&&(this.layers[e].ty===0&&this.globalData.projectInterface.registerComposition(i),i.initExpressions()),this.appendElementInPos(i,e),this.layers[e].tt){var o="tp"in this.layers[e]?this.findIndexByInd(this.layers[e].tp):e-1;if(o===-1)return;if(!this.elements[o]||this.elements[o]===!0)this.buildItem(o),this.addPendingElement(i);else{var c=a[o],d=c.getMatte(this.layers[e].tt);i.setMatte(d)}}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var e=this.pendingElements.pop();if(e.checkParenting(),e.data.tt)for(var a=0,i=this.elements.length;a<i;){if(this.elements[a]===e){var o="tp"in e.data?this.findIndexByInd(e.data.tp):a-1,c=this.elements[o],d=c.getMatte(this.layers[a].tt);e.setMatte(d);break}a+=1}}},SVGRendererBase.prototype.renderFrame=function(e){if(!(this.renderedFrame===e||this.destroyed)){e===null?e=this.renderedFrame:this.renderedFrame=e,this.globalData.frameNum=e,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=e,this.globalData._mdf=!1;var a,i=this.layers.length;for(this.completeLayers||this.checkLayers(e),a=i-1;a>=0;a-=1)(this.completeLayers||this.elements[a])&&this.elements[a].prepareFrame(e-this.layers[a].st);if(this.globalData._mdf)for(a=0;a<i;a+=1)(this.completeLayers||this.elements[a])&&this.elements[a].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(e,a){var i=e.getBaseElement();if(i){for(var o=0,c;o<a;)this.elements[o]&&this.elements[o]!==!0&&this.elements[o].getBaseElement()&&(c=this.elements[o].getBaseElement()),o+=1;c?this.layerElement.insertBefore(i,c):this.layerElement.appendChild(i)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"};function ICompElement(){}extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(e,a,i){this.initFrame(),this.initBaseData(e,a,i),this.initTransform(e,a,i),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),(this.data.xt||!a.progressiveLoad)&&this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(e){if(this._mdf=!1,this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange),!(!this.isInRange&&!this.data.xt)){if(this.tm._placeholder)this.renderedFrame=e/this.data.sr;else{var a=this.tm.v;a===this.data.op&&(a=this.data.op-1),this.renderedFrame=a}var i,o=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),i=o-1;i>=0;i-=1)(this.completeLayers||this.elements[i])&&(this.elements[i].prepareFrame(this.renderedFrame-this.layers[i].st),this.elements[i]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var e,a=this.layers.length;for(e=0;e<a;e+=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()},ICompElement.prototype.setElements=function(e){this.elements=e},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var e,a=this.layers.length;for(e=0;e<a;e+=1)this.elements[e]&&this.elements[e].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()};function SVGCompElement(e,a,i){this.layers=e.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(e,a,i),this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,a.frameRate,this):{_placeholder:!0}}extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(e){return new SVGCompElement(e,this.globalData,this)};function SVGRenderer(e,a){this.animationItem=e,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var i="";if(a&&a.title){var o=createNS("title"),c=createElementID();o.setAttribute("id",c),o.textContent=a.title,this.svgElement.appendChild(o),i+=c}if(a&&a.description){var d=createNS("desc"),g=createElementID();d.setAttribute("id",g),d.textContent=a.description,this.svgElement.appendChild(d),i+=" "+g}i&&this.svgElement.setAttribute("aria-labelledby",i);var b=createNS("defs");this.svgElement.appendChild(b);var j=createNS("g");this.svgElement.appendChild(j),this.layerElement=j,this.renderConfig={preserveAspectRatio:a&&a.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:a&&a.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:a&&a.contentVisibility||"visible",progressiveLoad:a&&a.progressiveLoad||!1,hideOnTransparent:!(a&&a.hideOnTransparent===!1),viewBoxOnly:a&&a.viewBoxOnly||!1,viewBoxSize:a&&a.viewBoxSize||!1,className:a&&a.className||"",id:a&&a.id||"",focusable:a&&a.focusable,filterSize:{width:a&&a.filterSize&&a.filterSize.width||"100%",height:a&&a.filterSize&&a.filterSize.height||"100%",x:a&&a.filterSize&&a.filterSize.x||"0%",y:a&&a.filterSize&&a.filterSize.y||"0%"},width:a&&a.width,height:a&&a.height,runExpressions:!a||a.runExpressions===void 0||a.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:b,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(e){return new SVGCompElement(e,this.globalData,this)};function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}ShapeTransformManager.prototype={addTransformSequence:function(a){var i,o=a.length,c="_";for(i=0;i<o;i+=1)c+=a[i].transform.key+"_";var d=this.sequences[c];return d||(d={transforms:[].concat(a),finalTransform:new Matrix,_mdf:!1},this.sequences[c]=d,this.sequenceList.push(d)),d},processSequence:function(a,i){for(var o=0,c=a.transforms.length,d=i;o<c&&!i;){if(a.transforms[o].transform.mProps._mdf){d=!0;break}o+=1}if(d)for(a.finalTransform.reset(),o=c-1;o>=0;o-=1)a.finalTransform.multiply(a.transforms[o].transform.mProps.v);a._mdf=d},processSequences:function(a){var i,o=this.sequenceList.length;for(i=0;i<o;i+=1)this.processSequence(this.sequenceList[i],a)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var a="__lottie_element_luma_buffer",i=null,o=null,c=null;function d(){var j=createNS("svg"),$=createNS("filter"),rt=createNS("feColorMatrix");return $.setAttribute("id",a),rt.setAttribute("type","matrix"),rt.setAttribute("color-interpolation-filters","sRGB"),rt.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),$.appendChild(rt),j.appendChild($),j.setAttribute("id",a+"_svg"),featureSupport.svgLumaHidden&&(j.style.display="none"),j}function g(){i||(c=d(),document.body.appendChild(c),i=createTag("canvas"),o=i.getContext("2d"),o.filter="url(#"+a+")",o.fillStyle="rgba(0,0,0,0)",o.fillRect(0,0,1,1))}function b(j){return i||g(),i.width=j.width,i.height=j.height,o.filter="url(#"+a+")",i}return{load:g,get:b}};function createCanvas(e,a){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(e,a);var i=createTag("canvas");return i.width=e,i.height=a,i}var assetLoader=function(){return{loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas}}(),registeredEffects={};function CVEffects(e){var a,i=e.data.ef?e.data.ef.length:0;this.filters=[];var o;for(a=0;a<i;a+=1){o=null;var c=e.data.ef[a].ty;if(registeredEffects[c]){var d=registeredEffects[c].effect;o=new d(e.effectsManager.effectElements[a],e)}o&&this.filters.push(o)}this.filters.length&&e.addRenderableComponent(this)}CVEffects.prototype.renderFrame=function(e){var a,i=this.filters.length;for(a=0;a<i;a+=1)this.filters[a].renderFrame(e)},CVEffects.prototype.getEffects=function(e){var a,i=this.filters.length,o=[];for(a=0;a<i;a+=1)this.filters[a].type===e&&o.push(this.filters[a]);return o};function registerEffect(e,a){registeredEffects[e]={effect:a}}function CVMaskElement(e,a){this.data=e,this.element=a,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var i,o=this.masksProperties.length,c=!1;for(i=0;i<o;i+=1)this.masksProperties[i].mode!=="n"&&(c=!0),this.viewData[i]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[i],3);this.hasMasks=c,c&&this.element.addRenderableComponent(this)}CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var e=this.element.finalTransform.mat,a=this.element.canvasContext,i,o=this.masksProperties.length,c,d,g;for(a.beginPath(),i=0;i<o;i+=1)if(this.masksProperties[i].mode!=="n"){this.masksProperties[i].inv&&(a.moveTo(0,0),a.lineTo(this.element.globalData.compSize.w,0),a.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),a.lineTo(0,this.element.globalData.compSize.h),a.lineTo(0,0)),g=this.viewData[i].v,c=e.applyToPointArray(g.v[0][0],g.v[0][1],0),a.moveTo(c[0],c[1]);var b,j=g._length;for(b=1;b<j;b+=1)d=e.applyToTriplePoints(g.o[b-1],g.i[b],g.v[b]),a.bezierCurveTo(d[0],d[1],d[2],d[3],d[4],d[5]);d=e.applyToTriplePoints(g.o[b-1],g.i[0],g.v[0]),a.bezierCurveTo(d[0],d[1],d[2],d[3],d[4],d[5])}this.element.globalData.renderer.save(!0),a.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};function CVBaseElement(){}var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var a=this.globalData.canvasContext,i=assetLoader.createCanvas(a.canvas.width,a.canvas.height);this.buffers.push(i);var o=assetLoader.createCanvas(a.canvas.width,a.canvas.height);this.buffers.push(o),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this),this.searchEffectTransforms()},createContent:function(){},setBlendMode:function(){var a=this.globalData;if(a.blendMode!==this.data.bm){a.blendMode=this.data.bm;var i=getBlendMode(this.data.bm);a.canvasContext.globalCompositeOperation=i}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this),this.transformEffects=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT)},hideElement:function(){!this.hidden&&(!this.isInRange||this.isTransparent)&&(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(a){a.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var a=this.buffers[0],i=a.getContext("2d");this.clearCanvas(i),i.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var a=this.buffers[1],i=a.getContext("2d");this.clearCanvas(i),i.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform);var o=this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1);if(o.renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var c=assetLoader.getLumaCanvas(this.canvasContext.canvas),d=c.getContext("2d");d.drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(c,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(a,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(a){if(!(this.hidden||this.data.hd)&&!(this.data.td===1&&!a)){this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.setBlendMode();var i=this.data.ty===0;this.prepareLayer(),this.globalData.renderer.save(i),this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity),this.renderInnerContent(),this.globalData.renderer.restore(i),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement;function CVShapeData(e,a,i,o){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var c=4;a.ty==="rc"?c=5:a.ty==="el"?c=6:a.ty==="sr"&&(c=7),this.sh=ShapePropertyFactory.getShapeProp(e,a,c,e);var d,g=i.length,b;for(d=0;d<g;d+=1)i[d].closed||(b={transforms:o.addTransformSequence(i[d].transforms),trNodes:[]},this.styledShapes.push(b),i[d].elements.push(b))}CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated;function CVShapeElement(e,a,i){this.shapes=[],this.shapesData=e.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(e,a,i)}extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(e,a){var i={data:e,type:e.ty,preTransforms:this.transformsManager.addTransformSequence(a),transforms:[],elements:[],closed:e.hd===!0},o={};if(e.ty==="fl"||e.ty==="st"?(o.c=PropertyFactory.getProp(this,e.c,1,255,this),o.c.k||(i.co="rgb("+bmFloor(o.c.v[0])+","+bmFloor(o.c.v[1])+","+bmFloor(o.c.v[2])+")")):(e.ty==="gf"||e.ty==="gs")&&(o.s=PropertyFactory.getProp(this,e.s,1,null,this),o.e=PropertyFactory.getProp(this,e.e,1,null,this),o.h=PropertyFactory.getProp(this,e.h||{k:0},0,.01,this),o.a=PropertyFactory.getProp(this,e.a||{k:0},0,degToRads,this),o.g=new GradientProperty(this,e.g,this)),o.o=PropertyFactory.getProp(this,e.o,0,.01,this),e.ty==="st"||e.ty==="gs"){if(i.lc=lineCapEnum[e.lc||2],i.lj=lineJoinEnum[e.lj||2],e.lj==1&&(i.ml=e.ml),o.w=PropertyFactory.getProp(this,e.w,0,null,this),o.w.k||(i.wi=o.w.v),e.d){var c=new DashProperty(this,e.d,"canvas",this);o.d=c,o.d.k||(i.da=o.d.dashArray,i.do=o.d.dashoffset[0])}}else i.r=e.r===2?"evenodd":"nonzero";return this.stylesList.push(i),o.style=i,o},CVShapeElement.prototype.createGroupElement=function(){var e={it:[],prevViewData:[]};return e},CVShapeElement.prototype.createTransformElement=function(e){var a={transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,e.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,e,this)}};return a},CVShapeElement.prototype.createShapeElement=function(e){var a=new CVShapeData(this,e,this.stylesList,this.transformsManager);return this.shapes.push(a),this.addShapeToModifiers(a),a},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var e,a=this.itemsData.length;for(e=0;e<a;e+=1)this.prevViewData[e]=this.itemsData[e];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),a=this.dynamicProperties.length,e=0;e<a;e+=1)this.dynamicProperties[e].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(e){var a,i=this.stylesList.length;for(a=0;a<i;a+=1)this.stylesList[a].closed||this.stylesList[a].transforms.push(e)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var e,a=this.stylesList.length;for(e=0;e<a;e+=1)this.stylesList[e].closed||this.stylesList[e].transforms.pop()},CVShapeElement.prototype.closeStyles=function(e){var a,i=e.length;for(a=0;a<i;a+=1)e[a].closed=!0},CVShapeElement.prototype.searchShapes=function(e,a,i,o,c){var d,g=e.length-1,b,j,$=[],rt=[],_e,st,ut,gt=[].concat(c);for(d=g;d>=0;d-=1){if(_e=this.searchProcessedElement(e[d]),_e?a[d]=i[_e-1]:e[d]._shouldRender=o,e[d].ty==="fl"||e[d].ty==="st"||e[d].ty==="gf"||e[d].ty==="gs")_e?a[d].style.closed=!1:a[d]=this.createStyleElement(e[d],gt),$.push(a[d].style);else if(e[d].ty==="gr"){if(!_e)a[d]=this.createGroupElement(e[d]);else for(j=a[d].it.length,b=0;b<j;b+=1)a[d].prevViewData[b]=a[d].it[b];this.searchShapes(e[d].it,a[d].it,a[d].prevViewData,o,gt)}else e[d].ty==="tr"?(_e||(ut=this.createTransformElement(e[d]),a[d]=ut),gt.push(a[d]),this.addTransformToStyleList(a[d])):e[d].ty==="sh"||e[d].ty==="rc"||e[d].ty==="el"||e[d].ty==="sr"?_e||(a[d]=this.createShapeElement(e[d])):e[d].ty==="tm"||e[d].ty==="rd"||e[d].ty==="pb"||e[d].ty==="zz"||e[d].ty==="op"?(_e?(st=a[d],st.closed=!1):(st=ShapeModifiers.getModifier(e[d].ty),st.init(this,e[d]),a[d]=st,this.shapeModifiers.push(st)),rt.push(st)):e[d].ty==="rp"&&(_e?(st=a[d],st.closed=!0):(st=ShapeModifiers.getModifier(e[d].ty),a[d]=st,st.init(this,e,d,a),this.shapeModifiers.push(st),o=!1),rt.push(st));this.addProcessedElement(e[d],d+1)}for(this.removeTransformFromStyleList(),this.closeStyles($),g=rt.length,d=0;d<g;d+=1)rt[d].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(e,a){(e._opMdf||a.op._mdf||this._isFirstFrame)&&(a.opacity=e.opacity,a.opacity*=a.op.v,a._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var e,a=this.stylesList.length,i,o,c,d,g,b,j=this.globalData.renderer,$=this.globalData.canvasContext,rt,_e;for(e=0;e<a;e+=1)if(_e=this.stylesList[e],rt=_e.type,!((rt==="st"||rt==="gs")&&_e.wi===0||!_e.data._shouldRender||_e.coOp===0||this.globalData.currentGlobalAlpha===0)){for(j.save(),g=_e.elements,rt==="st"||rt==="gs"?(j.ctxStrokeStyle(rt==="st"?_e.co:_e.grd),j.ctxLineWidth(_e.wi),j.ctxLineCap(_e.lc),j.ctxLineJoin(_e.lj),j.ctxMiterLimit(_e.ml||0)):j.ctxFillStyle(rt==="fl"?_e.co:_e.grd),j.ctxOpacity(_e.coOp),rt!=="st"&&rt!=="gs"&&$.beginPath(),j.ctxTransform(_e.preTransforms.finalTransform.props),o=g.length,i=0;i<o;i+=1){for((rt==="st"||rt==="gs")&&($.beginPath(),_e.da&&($.setLineDash(_e.da),$.lineDashOffset=_e.do)),b=g[i].trNodes,d=b.length,c=0;c<d;c+=1)b[c].t==="m"?$.moveTo(b[c].p[0],b[c].p[1]):b[c].t==="c"?$.bezierCurveTo(b[c].pts[0],b[c].pts[1],b[c].pts[2],b[c].pts[3],b[c].pts[4],b[c].pts[5]):$.closePath();(rt==="st"||rt==="gs")&&(j.ctxStroke(),_e.da&&$.setLineDash(this.dashResetter))}rt!=="st"&&rt!=="gs"&&this.globalData.renderer.ctxFill(_e.r),j.restore()}},CVShapeElement.prototype.renderShape=function(e,a,i,o){var c,d=a.length-1,g;for(g=e,c=d;c>=0;c-=1)a[c].ty==="tr"?(g=i[c].transform,this.renderShapeTransform(e,g)):a[c].ty==="sh"||a[c].ty==="el"||a[c].ty==="rc"||a[c].ty==="sr"?this.renderPath(a[c],i[c]):a[c].ty==="fl"?this.renderFill(a[c],i[c],g):a[c].ty==="st"?this.renderStroke(a[c],i[c],g):a[c].ty==="gf"||a[c].ty==="gs"?this.renderGradientFill(a[c],i[c],g):a[c].ty==="gr"?this.renderShape(g,a[c].it,i[c].it):a[c].ty;o&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(e,a){if(this._isFirstFrame||a._mdf||e.transforms._mdf){var i=e.trNodes,o=a.paths,c,d,g,b=o._length;i.length=0;var j=e.transforms.finalTransform;for(g=0;g<b;g+=1){var $=o.shapes[g];if($&&$.v){for(d=$._length,c=1;c<d;c+=1)c===1&&i.push({t:"m",p:j.applyToPointArray($.v[0][0],$.v[0][1],0)}),i.push({t:"c",pts:j.applyToTriplePoints($.o[c-1],$.i[c],$.v[c])});d===1&&i.push({t:"m",p:j.applyToPointArray($.v[0][0],$.v[0][1],0)}),$.c&&d&&(i.push({t:"c",pts:j.applyToTriplePoints($.o[c-1],$.i[0],$.v[0])}),i.push({t:"z"}))}}e.trNodes=i}},CVShapeElement.prototype.renderPath=function(e,a){if(e.hd!==!0&&e._shouldRender){var i,o=a.styledShapes.length;for(i=0;i<o;i+=1)this.renderStyledShape(a.styledShapes[i],a.sh)}},CVShapeElement.prototype.renderFill=function(e,a,i){var o=a.style;(a.c._mdf||this._isFirstFrame)&&(o.co="rgb("+bmFloor(a.c.v[0])+","+bmFloor(a.c.v[1])+","+bmFloor(a.c.v[2])+")"),(a.o._mdf||i._opMdf||this._isFirstFrame)&&(o.coOp=a.o.v*i.opacity)},CVShapeElement.prototype.renderGradientFill=function(e,a,i){var o=a.style,c;if(!o.grd||a.g._mdf||a.s._mdf||a.e._mdf||e.t!==1&&(a.h._mdf||a.a._mdf)){var d=this.globalData.canvasContext,g=a.s.v,b=a.e.v;if(e.t===1)c=d.createLinearGradient(g[0],g[1],b[0],b[1]);else{var j=Math.sqrt(Math.pow(g[0]-b[0],2)+Math.pow(g[1]-b[1],2)),$=Math.atan2(b[1]-g[1],b[0]-g[0]),rt=a.h.v;rt>=1?rt=.99:rt<=-1&&(rt=-.99);var _e=j*rt,st=Math.cos($+a.a.v)*_e+g[0],ut=Math.sin($+a.a.v)*_e+g[1];c=d.createRadialGradient(st,ut,0,g[0],g[1],j)}var gt,yt=e.g.p,Pt=a.g.c,wt=1;for(gt=0;gt<yt;gt+=1)a.g._hasOpacity&&a.g._collapsable&&(wt=a.g.o[gt*2+1]),c.addColorStop(Pt[gt*4]/100,"rgba("+Pt[gt*4+1]+","+Pt[gt*4+2]+","+Pt[gt*4+3]+","+wt+")");o.grd=c}o.coOp=a.o.v*i.opacity},CVShapeElement.prototype.renderStroke=function(e,a,i){var o=a.style,c=a.d;c&&(c._mdf||this._isFirstFrame)&&(o.da=c.dashArray,o.do=c.dashoffset[0]),(a.c._mdf||this._isFirstFrame)&&(o.co="rgb("+bmFloor(a.c.v[0])+","+bmFloor(a.c.v[1])+","+bmFloor(a.c.v[2])+")"),(a.o._mdf||i._opMdf||this._isFirstFrame)&&(o.coOp=a.o.v*i.opacity),(a.w._mdf||this._isFirstFrame)&&(o.wi=a.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0};function CVTextElement(e,a,i){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(e,a,i)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var e=this.textProperty.currentData;this.renderedLetters=createSizedArray(e.l?e.l.length:0);var a=!1;e.fc?(a=!0,this.values.fill=this.buildColor(e.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=a;var i=!1;e.sc&&(i=!0,this.values.stroke=this.buildColor(e.sc),this.values.sWidth=e.sw);var o=this.globalData.fontManager.getFontByName(e.f),c,d,g=e.l,b=this.mHelper;this.stroke=i,this.values.fValue=e.finalSize+"px "+this.globalData.fontManager.getFontByName(e.f).fFamily,d=e.finalText.length;var j,$,rt,_e,st,ut,gt,yt,Pt,wt,Ct=this.data.singleShape,At=e.tr*.001*e.finalSize,Tt=0,kt=0,It=!0,Lt=0;for(c=0;c<d;c+=1){j=this.globalData.fontManager.getCharData(e.finalText[c],o.fStyle,this.globalData.fontManager.getFontByName(e.f).fFamily),$=j&&j.data||{},b.reset(),Ct&&g[c].n&&(Tt=-At,kt+=e.yOffset,kt+=It?1:0,It=!1),st=$.shapes?$.shapes[0].it:[],gt=st.length,b.scale(e.finalSize/100,e.finalSize/100),Ct&&this.applyTextPropertiesToMatrix(e,b,g[c].line,Tt,kt),Pt=createSizedArray(gt-1);var Ft=0;for(ut=0;ut<gt;ut+=1)if(st[ut].ty==="sh"){for(_e=st[ut].ks.k.i.length,yt=st[ut].ks.k,wt=[],rt=1;rt<_e;rt+=1)rt===1&&wt.push(b.applyToX(yt.v[0][0],yt.v[0][1],0),b.applyToY(yt.v[0][0],yt.v[0][1],0)),wt.push(b.applyToX(yt.o[rt-1][0],yt.o[rt-1][1],0),b.applyToY(yt.o[rt-1][0],yt.o[rt-1][1],0),b.applyToX(yt.i[rt][0],yt.i[rt][1],0),b.applyToY(yt.i[rt][0],yt.i[rt][1],0),b.applyToX(yt.v[rt][0],yt.v[rt][1],0),b.applyToY(yt.v[rt][0],yt.v[rt][1],0));wt.push(b.applyToX(yt.o[rt-1][0],yt.o[rt-1][1],0),b.applyToY(yt.o[rt-1][0],yt.o[rt-1][1],0),b.applyToX(yt.i[0][0],yt.i[0][1],0),b.applyToY(yt.i[0][0],yt.i[0][1],0),b.applyToX(yt.v[0][0],yt.v[0][1],0),b.applyToY(yt.v[0][0],yt.v[0][1],0)),Pt[Ft]=wt,Ft+=1}Ct&&(Tt+=g[c].l,Tt+=At),this.textSpans[Lt]?this.textSpans[Lt].elem=Pt:this.textSpans[Lt]={elem:Pt},Lt+=1}},CVTextElement.prototype.renderInnerContent=function(){this.validateText();var e=this.canvasContext;e.font=this.values.fValue,this.globalData.renderer.ctxLineCap("butt"),this.globalData.renderer.ctxLineJoin("miter"),this.globalData.renderer.ctxMiterLimit(4),this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var a,i,o,c,d,g,b=this.textAnimator.renderedLetters,j=this.textProperty.currentData.l;i=j.length;var $,rt=null,_e=null,st=null,ut,gt,yt=this.globalData.renderer;for(a=0;a<i;a+=1)if(!j[a].n){if($=b[a],$&&(yt.save(),yt.ctxTransform($.p),yt.ctxOpacity($.o)),this.fill){for($&&$.fc?rt!==$.fc&&(yt.ctxFillStyle($.fc),rt=$.fc):rt!==this.values.fill&&(rt=this.values.fill,yt.ctxFillStyle(this.values.fill)),ut=this.textSpans[a].elem,c=ut.length,this.globalData.canvasContext.beginPath(),o=0;o<c;o+=1)for(gt=ut[o],g=gt.length,this.globalData.canvasContext.moveTo(gt[0],gt[1]),d=2;d<g;d+=6)this.globalData.canvasContext.bezierCurveTo(gt[d],gt[d+1],gt[d+2],gt[d+3],gt[d+4],gt[d+5]);this.globalData.canvasContext.closePath(),yt.ctxFill()}if(this.stroke){for($&&$.sw?st!==$.sw&&(st=$.sw,yt.ctxLineWidth($.sw)):st!==this.values.sWidth&&(st=this.values.sWidth,yt.ctxLineWidth(this.values.sWidth)),$&&$.sc?_e!==$.sc&&(_e=$.sc,yt.ctxStrokeStyle($.sc)):_e!==this.values.stroke&&(_e=this.values.stroke,yt.ctxStrokeStyle(this.values.stroke)),ut=this.textSpans[a].elem,c=ut.length,this.globalData.canvasContext.beginPath(),o=0;o<c;o+=1)for(gt=ut[o],g=gt.length,this.globalData.canvasContext.moveTo(gt[0],gt[1]),d=2;d<g;d+=6)this.globalData.canvasContext.bezierCurveTo(gt[d],gt[d+1],gt[d+2],gt[d+3],gt[d+4],gt[d+5]);this.globalData.canvasContext.closePath(),yt.ctxStroke()}$&&this.globalData.renderer.restore()}};function CVImageElement(e,a,i){this.assetData=a.getAssetData(e.refId),this.img=a.imageLoader.getAsset(this.assetData),this.initElement(e,a,i)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var e=createTag("canvas");e.width=this.assetData.w,e.height=this.assetData.h;var a=e.getContext("2d"),i=this.img.width,o=this.img.height,c=i/o,d=this.assetData.w/this.assetData.h,g,b,j=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;c>d&&j==="xMidYMid slice"||c<d&&j!=="xMidYMid slice"?(b=o,g=b*d):(g=i,b=g/d),a.drawImage(this.img,(i-g)/2,(o-b)/2,g,b,0,0,this.assetData.w,this.assetData.h),this.img=e}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null};function CVSolidElement(e,a,i){this.initElement(e,a,i)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){this.globalData.renderer.ctxFillStyle(this.data.sc),this.globalData.renderer.ctxFillRect(0,0,this.data.sw,this.data.sh)};function CanvasRendererBase(){}extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(e){return new CVShapeElement(e,this.globalData,this)},CanvasRendererBase.prototype.createText=function(e){return new CVTextElement(e,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(e){return new CVImageElement(e,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(e){return new CVSolidElement(e,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(e){e[0]===1&&e[1]===0&&e[4]===0&&e[5]===1&&e[12]===0&&e[13]===0||this.canvasContext.transform(e[0],e[1],e[4],e[5],e[12],e[13])},CanvasRendererBase.prototype.ctxOpacity=function(e){this.canvasContext.globalAlpha*=e<0?0:e},CanvasRendererBase.prototype.ctxFillStyle=function(e){this.canvasContext.fillStyle=e},CanvasRendererBase.prototype.ctxStrokeStyle=function(e){this.canvasContext.strokeStyle=e},CanvasRendererBase.prototype.ctxLineWidth=function(e){this.canvasContext.lineWidth=e},CanvasRendererBase.prototype.ctxLineCap=function(e){this.canvasContext.lineCap=e},CanvasRendererBase.prototype.ctxLineJoin=function(e){this.canvasContext.lineJoin=e},CanvasRendererBase.prototype.ctxMiterLimit=function(e){this.canvasContext.miterLimit=e},CanvasRendererBase.prototype.ctxFill=function(e){this.canvasContext.fill(e)},CanvasRendererBase.prototype.ctxFillRect=function(e,a,i,o){this.canvasContext.fillRect(e,a,i,o)},CanvasRendererBase.prototype.ctxStroke=function(){this.canvasContext.stroke()},CanvasRendererBase.prototype.reset=function(){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}this.contextData.reset()},CanvasRendererBase.prototype.save=function(){this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(e){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}e&&(this.globalData.blendMode="source-over"),this.contextData.restore(e)},CanvasRendererBase.prototype.configAnimation=function(e){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var a=this.animationItem.container.style;a.width="100%",a.height="100%";var i="0px 0px 0px";a.transformOrigin=i,a.mozTransformOrigin=i,a.webkitTransformOrigin=i,a["-webkit-transform"]=i,a.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.contextData.setContext(this.canvasContext),this.data=e,this.layers=e.layers,this.transformCanvas={w:e.w,h:e.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(e,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(e.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(e,a){this.reset();var i,o;e?(i=e,o=a,this.canvasContext.canvas.width=i,this.canvasContext.canvas.height=o):(this.animationItem.wrapper&&this.animationItem.container?(i=this.animationItem.wrapper.offsetWidth,o=this.animationItem.wrapper.offsetHeight):(i=this.canvasContext.canvas.width,o=this.canvasContext.canvas.height),this.canvasContext.canvas.width=i*this.renderConfig.dpr,this.canvasContext.canvas.height=o*this.renderConfig.dpr);var c,d;if(this.renderConfig.preserveAspectRatio.indexOf("meet")!==-1||this.renderConfig.preserveAspectRatio.indexOf("slice")!==-1){var g=this.renderConfig.preserveAspectRatio.split(" "),b=g[1]||"meet",j=g[0]||"xMidYMid",$=j.substr(0,4),rt=j.substr(4);c=i/o,d=this.transformCanvas.w/this.transformCanvas.h,d>c&&b==="meet"||d<c&&b==="slice"?(this.transformCanvas.sx=i/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=i/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=o/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=o/(this.transformCanvas.h/this.renderConfig.dpr)),$==="xMid"&&(d<c&&b==="meet"||d>c&&b==="slice")?this.transformCanvas.tx=(i-this.transformCanvas.w*(o/this.transformCanvas.h))/2*this.renderConfig.dpr:$==="xMax"&&(d<c&&b==="meet"||d>c&&b==="slice")?this.transformCanvas.tx=(i-this.transformCanvas.w*(o/this.transformCanvas.h))*this.renderConfig.dpr:this.transformCanvas.tx=0,rt==="YMid"&&(d>c&&b==="meet"||d<c&&b==="slice")?this.transformCanvas.ty=(o-this.transformCanvas.h*(i/this.transformCanvas.w))/2*this.renderConfig.dpr:rt==="YMax"&&(d>c&&b==="meet"||d<c&&b==="slice")?this.transformCanvas.ty=(o-this.transformCanvas.h*(i/this.transformCanvas.w))*this.renderConfig.dpr:this.transformCanvas.ty=0}else this.renderConfig.preserveAspectRatio==="none"?(this.transformCanvas.sx=i/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=o/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText="");var e,a=this.layers?this.layers.length:0;for(e=a-1;e>=0;e-=1)this.elements[e]&&this.elements[e].destroy&&this.elements[e].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(e,a){if(!(this.renderedFrame===e&&this.renderConfig.clearCanvas===!0&&!a||this.destroyed||e===-1)){this.renderedFrame=e,this.globalData.frameNum=e-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||a,this.globalData.projectInterface.currentFrame=e;var i,o=this.layers.length;for(this.completeLayers||this.checkLayers(e),i=o-1;i>=0;i-=1)(this.completeLayers||this.elements[i])&&this.elements[i].prepareFrame(e-this.layers[i].st);if(this.globalData._mdf){for(this.renderConfig.clearCanvas===!0?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),i=o-1;i>=0;i-=1)(this.completeLayers||this.elements[i])&&this.elements[i].renderFrame();this.renderConfig.clearCanvas!==!0&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(e){var a=this.elements;if(!(a[e]||this.layers[e].ty===99)){var i=this.createItem(this.layers[e],this,this.globalData);a[e]=i,i.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var e=this.pendingElements.pop();e.checkParenting()}},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"};function CanvasContext(){this.opacity=-1,this.transform=createTypedArray("float32",16),this.fillStyle="",this.strokeStyle="",this.lineWidth="",this.lineCap="",this.lineJoin="",this.miterLimit="",this.id=Math.random()}function CVContextData(){this.stack=[],this.cArrPos=0,this.cTr=new Matrix;var e,a=15;for(e=0;e<a;e+=1){var i=new CanvasContext;this.stack[e]=i}this._length=a,this.nativeContext=null,this.transformMat=new Matrix,this.currentOpacity=1,this.currentFillStyle="",this.appliedFillStyle="",this.currentStrokeStyle="",this.appliedStrokeStyle="",this.currentLineWidth="",this.appliedLineWidth="",this.currentLineCap="",this.appliedLineCap="",this.currentLineJoin="",this.appliedLineJoin="",this.appliedMiterLimit="",this.currentMiterLimit=""}CVContextData.prototype.duplicate=function(){var e=this._length*2,a=0;for(a=this._length;a<e;a+=1)this.stack[a]=new CanvasContext;this._length=e},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.stack[this.cArrPos].opacity=1},CVContextData.prototype.restore=function(e){this.cArrPos-=1;var a=this.stack[this.cArrPos],i=a.transform,o,c=this.cTr.props;for(o=0;o<16;o+=1)c[o]=i[o];if(e){this.nativeContext.restore();var d=this.stack[this.cArrPos+1];this.appliedFillStyle=d.fillStyle,this.appliedStrokeStyle=d.strokeStyle,this.appliedLineWidth=d.lineWidth,this.appliedLineCap=d.lineCap,this.appliedLineJoin=d.lineJoin,this.appliedMiterLimit=d.miterLimit}this.nativeContext.setTransform(i[0],i[1],i[4],i[5],i[12],i[13]),(e||a.opacity!==-1&&this.currentOpacity!==a.opacity)&&(this.nativeContext.globalAlpha=a.opacity,this.currentOpacity=a.opacity),this.currentFillStyle=a.fillStyle,this.currentStrokeStyle=a.strokeStyle,this.currentLineWidth=a.lineWidth,this.currentLineCap=a.lineCap,this.currentLineJoin=a.lineJoin,this.currentMiterLimit=a.miterLimit},CVContextData.prototype.save=function(e){e&&this.nativeContext.save();var a=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var i=this.stack[this.cArrPos],o;for(o=0;o<16;o+=1)i.transform[o]=a[o];this.cArrPos+=1;var c=this.stack[this.cArrPos];c.opacity=i.opacity,c.fillStyle=i.fillStyle,c.strokeStyle=i.strokeStyle,c.lineWidth=i.lineWidth,c.lineCap=i.lineCap,c.lineJoin=i.lineJoin,c.miterLimit=i.miterLimit},CVContextData.prototype.setOpacity=function(e){this.stack[this.cArrPos].opacity=e},CVContextData.prototype.setContext=function(e){this.nativeContext=e},CVContextData.prototype.fillStyle=function(e){this.stack[this.cArrPos].fillStyle!==e&&(this.currentFillStyle=e,this.stack[this.cArrPos].fillStyle=e)},CVContextData.prototype.strokeStyle=function(e){this.stack[this.cArrPos].strokeStyle!==e&&(this.currentStrokeStyle=e,this.stack[this.cArrPos].strokeStyle=e)},CVContextData.prototype.lineWidth=function(e){this.stack[this.cArrPos].lineWidth!==e&&(this.currentLineWidth=e,this.stack[this.cArrPos].lineWidth=e)},CVContextData.prototype.lineCap=function(e){this.stack[this.cArrPos].lineCap!==e&&(this.currentLineCap=e,this.stack[this.cArrPos].lineCap=e)},CVContextData.prototype.lineJoin=function(e){this.stack[this.cArrPos].lineJoin!==e&&(this.currentLineJoin=e,this.stack[this.cArrPos].lineJoin=e)},CVContextData.prototype.miterLimit=function(e){this.stack[this.cArrPos].miterLimit!==e&&(this.currentMiterLimit=e,this.stack[this.cArrPos].miterLimit=e)},CVContextData.prototype.transform=function(e){this.transformMat.cloneFromProps(e);var a=this.cTr;this.transformMat.multiply(a),a.cloneFromProps(this.transformMat.props);var i=a.props;this.nativeContext.setTransform(i[0],i[1],i[4],i[5],i[12],i[13])},CVContextData.prototype.opacity=function(e){var a=this.stack[this.cArrPos].opacity;a*=e<0?0:e,this.stack[this.cArrPos].opacity!==a&&(this.currentOpacity!==e&&(this.nativeContext.globalAlpha=e,this.currentOpacity=e),this.stack[this.cArrPos].opacity=a)},CVContextData.prototype.fill=function(e){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fill(e)},CVContextData.prototype.fillRect=function(e,a,i,o){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fillRect(e,a,i,o)},CVContextData.prototype.stroke=function(){this.appliedStrokeStyle!==this.currentStrokeStyle&&(this.appliedStrokeStyle=this.currentStrokeStyle,this.nativeContext.strokeStyle=this.appliedStrokeStyle),this.appliedLineWidth!==this.currentLineWidth&&(this.appliedLineWidth=this.currentLineWidth,this.nativeContext.lineWidth=this.appliedLineWidth),this.appliedLineCap!==this.currentLineCap&&(this.appliedLineCap=this.currentLineCap,this.nativeContext.lineCap=this.appliedLineCap),this.appliedLineJoin!==this.currentLineJoin&&(this.appliedLineJoin=this.currentLineJoin,this.nativeContext.lineJoin=this.appliedLineJoin),this.appliedMiterLimit!==this.currentMiterLimit&&(this.appliedMiterLimit=this.currentMiterLimit,this.nativeContext.miterLimit=this.appliedMiterLimit),this.nativeContext.stroke()};function CVCompElement(e,a,i){this.completeLayers=!1,this.layers=e.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(e,a,i),this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,a.frameRate,this):{_placeholder:!0}}extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var e=this.canvasContext;e.beginPath(),e.moveTo(0,0),e.lineTo(this.data.w,0),e.lineTo(this.data.w,this.data.h),e.lineTo(0,this.data.h),e.lineTo(0,0),e.clip();var a,i=this.layers.length;for(a=i-1;a>=0;a-=1)(this.completeLayers||this.elements[a])&&this.elements[a].renderFrame()},CVCompElement.prototype.destroy=function(){var e,a=this.layers.length;for(e=a-1;e>=0;e-=1)this.elements[e]&&this.elements[e].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(e){return new CVCompElement(e,this.globalData,this)};function CanvasRenderer(e,a){this.animationItem=e,this.renderConfig={clearCanvas:a&&a.clearCanvas!==void 0?a.clearCanvas:!0,context:a&&a.context||null,progressiveLoad:a&&a.progressiveLoad||!1,preserveAspectRatio:a&&a.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:a&&a.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:a&&a.contentVisibility||"visible",className:a&&a.className||"",id:a&&a.id||"",runExpressions:!a||a.runExpressions===void 0||a.runExpressions},this.renderConfig.dpr=a&&a.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=a&&a.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas",this.renderConfig.clearCanvas&&(this.ctxTransform=this.contextData.transform.bind(this.contextData),this.ctxOpacity=this.contextData.opacity.bind(this.contextData),this.ctxFillStyle=this.contextData.fillStyle.bind(this.contextData),this.ctxStrokeStyle=this.contextData.strokeStyle.bind(this.contextData),this.ctxLineWidth=this.contextData.lineWidth.bind(this.contextData),this.ctxLineCap=this.contextData.lineCap.bind(this.contextData),this.ctxLineJoin=this.contextData.lineJoin.bind(this.contextData),this.ctxMiterLimit=this.contextData.miterLimit.bind(this.contextData),this.ctxFill=this.contextData.fill.bind(this.contextData),this.ctxFillRect=this.contextData.fillRect.bind(this.contextData),this.ctxStroke=this.contextData.stroke.bind(this.contextData),this.save=this.contextData.save.bind(this.contextData))}extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(e){return new CVCompElement(e,this.globalData,this)};function HBaseElement(){}HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.bm!==0&&this.setBlendMode()},renderElement:function(){var a=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var i=this.finalTransform.mat.toCSS();a.transform=i,a.webkitTransform=i}this.finalTransform._opMdf&&(a.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting;function HSolidElement(e,a,i){this.initElement(e,a,i)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var e;this.data.hasMask?(e=createNS("rect"),e.setAttribute("width",this.data.sw),e.setAttribute("height",this.data.sh),e.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):(e=createTag("div"),e.style.width=this.data.sw+"px",e.style.height=this.data.sh+"px",e.style.backgroundColor=this.data.sc),this.layerElement.appendChild(e)};function HShapeElement(e,a,i){this.shapes=[],this.shapesData=e.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(e,a,i),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var e;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),e=this.svgElement;else{e=createNS("svg");var a=this.comp.data?this.comp.data:this.globalData.compSize;e.setAttribute("width",a.w),e.setAttribute("height",a.h),e.appendChild(this.shapesContainer),this.layerElement.appendChild(e)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=e},HShapeElement.prototype.getTransformedPoint=function(e,a){var i,o=e.length;for(i=0;i<o;i+=1)a=e[i].mProps.v.applyToPointArray(a[0],a[1],0);return a},HShapeElement.prototype.calculateShapeBoundingBox=function(e,a){var i=e.sh.v,o=e.transformers,c,d=i._length,g,b,j,$;if(!(d<=1)){for(c=0;c<d-1;c+=1)g=this.getTransformedPoint(o,i.v[c]),b=this.getTransformedPoint(o,i.o[c]),j=this.getTransformedPoint(o,i.i[c+1]),$=this.getTransformedPoint(o,i.v[c+1]),this.checkBounds(g,b,j,$,a);i.c&&(g=this.getTransformedPoint(o,i.v[c]),b=this.getTransformedPoint(o,i.o[c]),j=this.getTransformedPoint(o,i.i[0]),$=this.getTransformedPoint(o,i.v[0]),this.checkBounds(g,b,j,$,a))}},HShapeElement.prototype.checkBounds=function(e,a,i,o,c){this.getBoundsOfCurve(e,a,i,o);var d=this.shapeBoundingBox;c.x=bmMin(d.left,c.x),c.xMax=bmMax(d.right,c.xMax),c.y=bmMin(d.top,c.y),c.yMax=bmMax(d.bottom,c.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(e,a,i,o){for(var c=[[e[0],o[0]],[e[1],o[1]]],d,g,b,j,$,rt,_e,st=0;st<2;++st)g=6*e[st]-12*a[st]+6*i[st],d=-3*e[st]+9*a[st]-9*i[st]+3*o[st],b=3*a[st]-3*e[st],g|=0,d|=0,b|=0,d===0&&g===0||(d===0?(j=-b/g,j>0&&j<1&&c[st].push(this.calculateF(j,e,a,i,o,st))):($=g*g-4*b*d,$>=0&&(rt=(-g+bmSqrt($))/(2*d),rt>0&&rt<1&&c[st].push(this.calculateF(rt,e,a,i,o,st)),_e=(-g-bmSqrt($))/(2*d),_e>0&&_e<1&&c[st].push(this.calculateF(_e,e,a,i,o,st)))));this.shapeBoundingBox.left=bmMin.apply(null,c[0]),this.shapeBoundingBox.top=bmMin.apply(null,c[1]),this.shapeBoundingBox.right=bmMax.apply(null,c[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,c[1])},HShapeElement.prototype.calculateF=function(e,a,i,o,c,d){return bmPow(1-e,3)*a[d]+3*bmPow(1-e,2)*e*i[d]+3*(1-e)*bmPow(e,2)*o[d]+bmPow(e,3)*c[d]},HShapeElement.prototype.calculateBoundingBox=function(e,a){var i,o=e.length;for(i=0;i<o;i+=1)e[i]&&e[i].sh?this.calculateShapeBoundingBox(e[i],a):e[i]&&e[i].it?this.calculateBoundingBox(e[i].it,a):e[i]&&e[i].style&&e[i].w&&this.expandStrokeBoundingBox(e[i].w,a)},HShapeElement.prototype.expandStrokeBoundingBox=function(e,a){var i=0;if(e.keyframes){for(var o=0;o<e.keyframes.length;o+=1){var c=e.keyframes[o].s;c>i&&(i=c)}i*=e.mult}else i=e.v*e.mult;a.x-=i,a.xMax+=i,a.y-=i,a.yMax+=i},HShapeElement.prototype.currentBoxContains=function(e){return this.currentBBox.x<=e.x&&this.currentBBox.y<=e.y&&this.currentBBox.width+this.currentBBox.x>=e.x+e.width&&this.currentBBox.height+this.currentBBox.y>=e.y+e.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var e=this.tempBoundingBox,a=999999;if(e.x=a,e.xMax=-a,e.y=a,e.yMax=-a,this.calculateBoundingBox(this.itemsData,e),e.width=e.xMax<e.x?0:e.xMax-e.x,e.height=e.yMax<e.y?0:e.yMax-e.y,this.currentBoxContains(e))return;var i=!1;if(this.currentBBox.w!==e.width&&(this.currentBBox.w=e.width,this.shapeCont.setAttribute("width",e.width),i=!0),this.currentBBox.h!==e.height&&(this.currentBBox.h=e.height,this.shapeCont.setAttribute("height",e.height),i=!0),i||this.currentBBox.x!==e.x||this.currentBBox.y!==e.y){this.currentBBox.w=e.width,this.currentBBox.h=e.height,this.currentBBox.x=e.x,this.currentBBox.y=e.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var o=this.shapeCont.style,c="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";o.transform=c,o.webkitTransform=c}}};function HTextElement(e,a,i){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(e,a,i)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var e=createNS("g");this.maskedElement.appendChild(e),this.innerElem=e}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var e=this.textProperty.currentData;this.renderedLetters=createSizedArray(e.l?e.l.length:0);var a=this.innerElem.style,i=e.fc?this.buildColor(e.fc):"rgba(0,0,0,0)";a.fill=i,a.color=i,e.sc&&(a.stroke=this.buildColor(e.sc),a.strokeWidth=e.sw+"px");var o=this.globalData.fontManager.getFontByName(e.f);if(!this.globalData.fontManager.chars)if(a.fontSize=e.finalSize+"px",a.lineHeight=e.finalSize+"px",o.fClass)this.innerElem.className=o.fClass;else{a.fontFamily=o.fFamily;var c=e.fWeight,d=e.fStyle;a.fontStyle=d,a.fontWeight=c}var g,b,j=e.l;b=j.length;var $,rt,_e,st=this.mHelper,ut,gt="",yt=0;for(g=0;g<b;g+=1){if(this.globalData.fontManager.chars?(this.textPaths[yt]?$=this.textPaths[yt]:($=createNS("path"),$.setAttribute("stroke-linecap",lineCapEnum[1]),$.setAttribute("stroke-linejoin",lineJoinEnum[2]),$.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[yt]?(rt=this.textSpans[yt],_e=rt.children[0]):(rt=createTag("div"),rt.style.lineHeight=0,_e=createNS("svg"),_e.appendChild($),styleDiv(rt)))):this.isMasked?$=this.textPaths[yt]?this.textPaths[yt]:createNS("text"):this.textSpans[yt]?(rt=this.textSpans[yt],$=this.textPaths[yt]):(rt=createTag("span"),styleDiv(rt),$=createTag("span"),styleDiv($),rt.appendChild($)),this.globalData.fontManager.chars){var Pt=this.globalData.fontManager.getCharData(e.finalText[g],o.fStyle,this.globalData.fontManager.getFontByName(e.f).fFamily),wt;if(Pt?wt=Pt.data:wt=null,st.reset(),wt&&wt.shapes&&wt.shapes.length&&(ut=wt.shapes[0].it,st.scale(e.finalSize/100,e.finalSize/100),gt=this.createPathShape(st,ut),$.setAttribute("d",gt)),this.isMasked)this.innerElem.appendChild($);else{if(this.innerElem.appendChild(rt),wt&&wt.shapes){document.body.appendChild(_e);var Ct=_e.getBBox();_e.setAttribute("width",Ct.width+2),_e.setAttribute("height",Ct.height+2),_e.setAttribute("viewBox",Ct.x-1+" "+(Ct.y-1)+" "+(Ct.width+2)+" "+(Ct.height+2));var At=_e.style,Tt="translate("+(Ct.x-1)+"px,"+(Ct.y-1)+"px)";At.transform=Tt,At.webkitTransform=Tt,j[g].yOffset=Ct.y-1}else _e.setAttribute("width",1),_e.setAttribute("height",1);rt.appendChild(_e)}}else if($.textContent=j[g].val,$.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild($);else{this.innerElem.appendChild(rt);var kt=$.style,It="translate3d(0,"+-e.finalSize/1.2+"px,0)";kt.transform=It,kt.webkitTransform=It}this.isMasked?this.textSpans[yt]=$:this.textSpans[yt]=rt,this.textSpans[yt].style.display="block",this.textPaths[yt]=$,yt+=1}for(;yt<this.textSpans.length;)this.textSpans[yt].style.display="none",yt+=1},HTextElement.prototype.renderInnerContent=function(){this.validateText();var e;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),e=this.svgElement.style;var a="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";e.transform=a,e.webkitTransform=a}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),!(!this.lettersChangedFlag&&!this.textAnimator.lettersChangedFlag)){var i,o,c=0,d=this.textAnimator.renderedLetters,g=this.textProperty.currentData.l;o=g.length;var b,j,$;for(i=0;i<o;i+=1)g[i].n?c+=1:(j=this.textSpans[i],$=this.textPaths[i],b=d[c],c+=1,b._mdf.m&&(this.isMasked?j.setAttribute("transform",b.m):(j.style.webkitTransform=b.m,j.style.transform=b.m)),j.style.opacity=b.o,b.sw&&b._mdf.sw&&$.setAttribute("stroke-width",b.sw),b.sc&&b._mdf.sc&&$.setAttribute("stroke",b.sc),b.fc&&b._mdf.fc&&($.setAttribute("fill",b.fc),$.style.color=b.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var rt=this.innerElem.getBBox();this.currentBBox.w!==rt.width&&(this.currentBBox.w=rt.width,this.svgElement.setAttribute("width",rt.width)),this.currentBBox.h!==rt.height&&(this.currentBBox.h=rt.height,this.svgElement.setAttribute("height",rt.height));var _e=1;if(this.currentBBox.w!==rt.width+_e*2||this.currentBBox.h!==rt.height+_e*2||this.currentBBox.x!==rt.x-_e||this.currentBBox.y!==rt.y-_e){this.currentBBox.w=rt.width+_e*2,this.currentBBox.h=rt.height+_e*2,this.currentBBox.x=rt.x-_e,this.currentBBox.y=rt.y-_e,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),e=this.svgElement.style;var st="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";e.transform=st,e.webkitTransform=st}}}};function HCameraElement(e,a,i){this.initFrame(),this.initBaseData(e,a,i),this.initHierarchy();var o=PropertyFactory.getProp;if(this.pe=o(this,e.pe,0,0,this),e.ks.p.s?(this.px=o(this,e.ks.p.x,1,0,this),this.py=o(this,e.ks.p.y,1,0,this),this.pz=o(this,e.ks.p.z,1,0,this)):this.p=o(this,e.ks.p,1,0,this),e.ks.a&&(this.a=o(this,e.ks.a,1,0,this)),e.ks.or.k.length&&e.ks.or.k[0].to){var c,d=e.ks.or.k.length;for(c=0;c<d;c+=1)e.ks.or.k[c].to=null,e.ks.or.k[c].ti=null}this.or=o(this,e.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=o(this,e.ks.rx,0,degToRads,this),this.ry=o(this,e.ks.ry,0,degToRads,this),this.rz=o(this,e.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var e,a=this.comp.threeDElements.length,i,o,c;for(e=0;e<a;e+=1)if(i=this.comp.threeDElements[e],i.type==="3d"){o=i.perspectiveElem.style,c=i.container.style;var d=this.pe.v+"px",g="0px 0px 0px",b="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";o.perspective=d,o.webkitPerspective=d,c.transformOrigin=g,c.mozTransformOrigin=g,c.webkitTransformOrigin=g,o.transform=b,o.webkitTransform=b}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var e=this._isFirstFrame,a,i;if(this.hierarchy)for(i=this.hierarchy.length,a=0;a<i;a+=1)e=this.hierarchy[a].finalTransform.mProp._mdf||e;if(e||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(i=this.hierarchy.length-1,a=i;a>=0;a-=1){var o=this.hierarchy[a].finalTransform.mProp;this.mat.translate(-o.p.v[0],-o.p.v[1],o.p.v[2]),this.mat.rotateX(-o.or.v[0]).rotateY(-o.or.v[1]).rotateZ(o.or.v[2]),this.mat.rotateX(-o.rx.v).rotateY(-o.ry.v).rotateZ(o.rz.v),this.mat.scale(1/o.s.v[0],1/o.s.v[1],1/o.s.v[2]),this.mat.translate(o.a.v[0],o.a.v[1],o.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var c;this.p?c=[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:c=[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var d=Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2)+Math.pow(c[2],2)),g=[c[0]/d,c[1]/d,c[2]/d],b=Math.sqrt(g[2]*g[2]+g[0]*g[0]),j=Math.atan2(g[1],b),$=Math.atan2(g[0],-g[2]);this.mat.rotateY($).rotateX(-j)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var rt=!this._prevMat.equals(this.mat);if((rt||this.pe._mdf)&&this.comp.threeDElements){i=this.comp.threeDElements.length;var _e,st,ut;for(a=0;a<i;a+=1)if(_e=this.comp.threeDElements[a],_e.type==="3d"){if(rt){var gt=this.mat.toCSS();ut=_e.container.style,ut.transform=gt,ut.webkitTransform=gt}this.pe._mdf&&(st=_e.perspectiveElem.style,st.perspective=this.pe.v+"px",st.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(e){this.prepareProperties(e,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null};function HImageElement(e,a,i){this.assetData=a.getAssetData(e.refId),this.initElement(e,a,i)}extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var e=this.globalData.getAssetsPath(this.assetData),a=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",e),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(a),a.crossOrigin="anonymous",a.src=e,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)};function HybridRendererBase(e,a){this.animationItem=e,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:a&&a.className||"",imagePreserveAspectRatio:a&&a.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(a&&a.hideOnTransparent===!1),filterSize:{width:a&&a.filterSize&&a.filterSize.width||"400%",height:a&&a.filterSize&&a.filterSize.height||"400%",x:a&&a.filterSize&&a.filterSize.x||"-100%",y:a&&a.filterSize&&a.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var e=this.pendingElements.pop();e.checkParenting()}},HybridRendererBase.prototype.appendElementInPos=function(e,a){var i=e.getBaseElement();if(i){var o=this.layers[a];if(!o.ddd||!this.supports3d)if(this.threeDElements)this.addTo3dContainer(i,a);else{for(var c=0,d,g,b;c<a;)this.elements[c]&&this.elements[c]!==!0&&this.elements[c].getBaseElement&&(g=this.elements[c],b=this.layers[c].ddd?this.getThreeDContainerByPos(c):g.getBaseElement(),d=b||d),c+=1;d?(!o.ddd||!this.supports3d)&&this.layerElement.insertBefore(i,d):(!o.ddd||!this.supports3d)&&this.layerElement.appendChild(i)}else this.addTo3dContainer(i,a)}},HybridRendererBase.prototype.createShape=function(e){return this.supports3d?new HShapeElement(e,this.globalData,this):new SVGShapeElement(e,this.globalData,this)},HybridRendererBase.prototype.createText=function(e){return this.supports3d?new HTextElement(e,this.globalData,this):new SVGTextLottieElement(e,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(e){return this.camera=new HCameraElement(e,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(e){return this.supports3d?new HImageElement(e,this.globalData,this):new IImageElement(e,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(e){return this.supports3d?new HSolidElement(e,this.globalData,this):new ISolidElement(e,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(e){for(var a=0,i=this.threeDElements.length;a<i;){if(this.threeDElements[a].startPos<=e&&this.threeDElements[a].endPos>=e)return this.threeDElements[a].perspectiveElem;a+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(e,a){var i=createTag("div"),o,c;styleDiv(i);var d=createTag("div");if(styleDiv(d),a==="3d"){o=i.style,o.width=this.globalData.compSize.w+"px",o.height=this.globalData.compSize.h+"px";var g="50% 50%";o.webkitTransformOrigin=g,o.mozTransformOrigin=g,o.transformOrigin=g,c=d.style;var b="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";c.transform=b,c.webkitTransform=b}i.appendChild(d);var j={container:d,perspectiveElem:i,startPos:e,endPos:e,type:a};return this.threeDElements.push(j),j},HybridRendererBase.prototype.build3dContainers=function(){var e,a=this.layers.length,i,o="";for(e=0;e<a;e+=1)this.layers[e].ddd&&this.layers[e].ty!==3?(o!=="3d"&&(o="3d",i=this.createThreeDContainer(e,"3d")),i.endPos=Math.max(i.endPos,e)):(o!=="2d"&&(o="2d",i=this.createThreeDContainer(e,"2d")),i.endPos=Math.max(i.endPos,e));for(a=this.threeDElements.length,e=a-1;e>=0;e-=1)this.resizerElem.appendChild(this.threeDElements[e].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(e,a){for(var i=0,o=this.threeDElements.length;i<o;){if(a<=this.threeDElements[i].endPos){for(var c=this.threeDElements[i].startPos,d;c<a;)this.elements[c]&&this.elements[c].getBaseElement&&(d=this.elements[c].getBaseElement()),c+=1;d?this.threeDElements[i].container.insertBefore(e,d):this.threeDElements[i].container.appendChild(e);break}i+=1}},HybridRendererBase.prototype.configAnimation=function(e){var a=createTag("div"),i=this.animationItem.wrapper,o=a.style;o.width=e.w+"px",o.height=e.h+"px",this.resizerElem=a,styleDiv(a),o.transformStyle="flat",o.mozTransformStyle="flat",o.webkitTransformStyle="flat",this.renderConfig.className&&a.setAttribute("class",this.renderConfig.className),i.appendChild(a),o.overflow="hidden";var c=createNS("svg");c.setAttribute("width","1"),c.setAttribute("height","1"),styleDiv(c),this.resizerElem.appendChild(c);var d=createNS("defs");c.appendChild(d),this.data=e,this.setupGlobalData(e,c),this.globalData.defs=d,this.layers=e.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var e,a=this.layers?this.layers.length:0;for(e=0;e<a;e+=1)this.elements[e]&&this.elements[e].destroy&&this.elements[e].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var e=this.animationItem.wrapper.offsetWidth,a=this.animationItem.wrapper.offsetHeight,i=e/a,o=this.globalData.compSize.w/this.globalData.compSize.h,c,d,g,b;o>i?(c=e/this.globalData.compSize.w,d=e/this.globalData.compSize.w,g=0,b=(a-this.globalData.compSize.h*(e/this.globalData.compSize.w))/2):(c=a/this.globalData.compSize.h,d=a/this.globalData.compSize.h,g=(e-this.globalData.compSize.w*(a/this.globalData.compSize.h))/2,b=0);var j=this.resizerElem.style;j.webkitTransform="matrix3d("+c+",0,0,0,0,"+d+",0,0,0,0,1,0,"+g+","+b+",0,1)",j.transform=j.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var e=this.globalData.compSize.w,a=this.globalData.compSize.h,i,o=this.threeDElements.length;for(i=0;i<o;i+=1){var c=this.threeDElements[i].perspectiveElem.style;c.webkitPerspective=Math.sqrt(Math.pow(e,2)+Math.pow(a,2))+"px",c.perspective=c.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(e){var a,i=e.length,o=createTag("div");for(a=0;a<i;a+=1)if(e[a].xt){var c=this.createComp(e[a],o,this.globalData.comp,null);c.initExpressions(),this.globalData.projectInterface.registerComposition(c)}};function HCompElement(e,a,i){this.layers=e.layers,this.supports3d=!e.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(e,a,i),this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,a.frameRate,this):{_placeholder:!0}}extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(e,a){for(var i=0,o;i<a;)this.elements[i]&&this.elements[i].getBaseElement&&(o=this.elements[i].getBaseElement()),i+=1;o?this.layerElement.insertBefore(e,o):this.layerElement.appendChild(e)},HCompElement.prototype.createComp=function(e){return this.supports3d?new HCompElement(e,this.globalData,this):new SVGCompElement(e,this.globalData,this)};function HybridRenderer(e,a){this.animationItem=e,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:a&&a.className||"",imagePreserveAspectRatio:a&&a.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(a&&a.hideOnTransparent===!1),filterSize:{width:a&&a.filterSize&&a.filterSize.width||"400%",height:a&&a.filterSize&&a.filterSize.height||"400%",x:a&&a.filterSize&&a.filterSize.x||"-100%",y:a&&a.filterSize&&a.filterSize.y||"-100%"},runExpressions:!a||a.runExpressions===void 0||a.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(e){return this.supports3d?new HCompElement(e,this.globalData,this):new SVGCompElement(e,this.globalData,this)};var CompExpressionInterface=function(){return function(e){function a(i){for(var o=0,c=e.layers.length;o<c;){if(e.layers[o].nm===i||e.layers[o].ind===i)return e.elements[o].layerInterface;o+=1}return null}return Object.defineProperty(a,"_name",{value:e.data.nm}),a.layer=a,a.pixelAspect=1,a.height=e.data.h||e.globalData.compSize.h,a.width=e.data.w||e.globalData.compSize.w,a.pixelAspect=1,a.frameDuration=1/e.globalData.frameRate,a.displayStartTime=0,a.numLayers=e.layers.length,a}}();function _typeof$2(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$2=function(i){return typeof i}:_typeof$2=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_typeof$2(e)}function seedRandom(e,a){var i=this,o=256,c=6,d=52,g="random",b=a.pow(o,c),j=a.pow(2,d),$=j*2,rt=o-1,_e;function st(At,Tt,kt){var It=[];Tt=Tt===!0?{entropy:!0}:Tt||{};var Lt=Pt(yt(Tt.entropy?[At,Ct(e)]:At===null?wt():At,3),It),Ft=new ut(It),Nt=function(){for(var Gr=Ft.g(c),hs=b,_s=0;Gr<j;)Gr=(Gr+_s)*o,hs*=o,_s=Ft.g(1);for(;Gr>=$;)Gr/=2,hs/=2,_s>>>=1;return(Gr+_s)/hs};return Nt.int32=function(){return Ft.g(4)|0},Nt.quick=function(){return Ft.g(4)/4294967296},Nt.double=Nt,Pt(Ct(Ft.S),e),(Tt.pass||kt||function(Ht,Gr,hs,_s){return _s&&(_s.S&&gt(_s,Ft),Ht.state=function(){return gt(Ft,{})}),hs?(a[g]=Ht,Gr):Ht})(Nt,Lt,"global"in Tt?Tt.global:this==a,Tt.state)}a["seed"+g]=st;function ut(At){var Tt,kt=At.length,It=this,Lt=0,Ft=It.i=It.j=0,Nt=It.S=[];for(kt||(At=[kt++]);Lt<o;)Nt[Lt]=Lt++;for(Lt=0;Lt<o;Lt++)Nt[Lt]=Nt[Ft=rt&Ft+At[Lt%kt]+(Tt=Nt[Lt])],Nt[Ft]=Tt;It.g=function(Ht){for(var Gr,hs=0,_s=It.i,hn=It.j,Qn=It.S;Ht--;)Gr=Qn[_s=rt&_s+1],hs=hs*o+Qn[rt&(Qn[_s]=Qn[hn=rt&hn+Gr])+(Qn[hn]=Gr)];return It.i=_s,It.j=hn,hs}}function gt(At,Tt){return Tt.i=At.i,Tt.j=At.j,Tt.S=At.S.slice(),Tt}function yt(At,Tt){var kt=[],It=_typeof$2(At),Lt;if(Tt&&It=="object")for(Lt in At)try{kt.push(yt(At[Lt],Tt-1))}catch{}return kt.length?kt:It=="string"?At:At+"\0"}function Pt(At,Tt){for(var kt=At+"",It,Lt=0;Lt<kt.length;)Tt[rt&Lt]=rt&(It^=Tt[rt&Lt]*19)+kt.charCodeAt(Lt++);return Ct(Tt)}function wt(){try{var At=new Uint8Array(o);return(i.crypto||i.msCrypto).getRandomValues(At),Ct(At)}catch{var Tt=i.navigator,kt=Tt&&Tt.plugins;return[+new Date,i,kt,i.screen,Ct(e)]}}function Ct(At){return String.fromCharCode.apply(0,At)}Pt(a.random(),e)}function initialize$2(e){seedRandom([],e)}var propTypes={SHAPE:"shape"};function _typeof$1(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(i){return typeof i}:_typeof$1=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_typeof$1(e)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null,_lottieGlobal={};initialize$2(BMMath);function resetFrame(){_lottieGlobal={}}function $bm_isInstanceOfArray(e){return e.constructor===Array||e.constructor===Float32Array}function isNumerable(e,a){return e==="number"||a instanceof Number||e==="boolean"||e==="string"}function $bm_neg(e){var a=_typeof$1(e);if(a==="number"||e instanceof Number||a==="boolean")return-e;if($bm_isInstanceOfArray(e)){var i,o=e.length,c=[];for(i=0;i<o;i+=1)c[i]=-e[i];return c}return e.propType?e.v:-e}var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(e,a){var i=_typeof$1(e),o=_typeof$1(a);if(isNumerable(i,e)&&isNumerable(o,a)||i==="string"||o==="string")return e+a;if($bm_isInstanceOfArray(e)&&isNumerable(o,a))return e=e.slice(0),e[0]+=a,e;if(isNumerable(i,e)&&$bm_isInstanceOfArray(a))return a=a.slice(0),a[0]=e+a[0],a;if($bm_isInstanceOfArray(e)&&$bm_isInstanceOfArray(a)){for(var c=0,d=e.length,g=a.length,b=[];c<d||c<g;)(typeof e[c]=="number"||e[c]instanceof Number)&&(typeof a[c]=="number"||a[c]instanceof Number)?b[c]=e[c]+a[c]:b[c]=a[c]===void 0?e[c]:e[c]||a[c],c+=1;return b}return 0}var add=sum;function sub(e,a){var i=_typeof$1(e),o=_typeof$1(a);if(isNumerable(i,e)&&isNumerable(o,a))return i==="string"&&(e=parseInt(e,10)),o==="string"&&(a=parseInt(a,10)),e-a;if($bm_isInstanceOfArray(e)&&isNumerable(o,a))return e=e.slice(0),e[0]-=a,e;if(isNumerable(i,e)&&$bm_isInstanceOfArray(a))return a=a.slice(0),a[0]=e-a[0],a;if($bm_isInstanceOfArray(e)&&$bm_isInstanceOfArray(a)){for(var c=0,d=e.length,g=a.length,b=[];c<d||c<g;)(typeof e[c]=="number"||e[c]instanceof Number)&&(typeof a[c]=="number"||a[c]instanceof Number)?b[c]=e[c]-a[c]:b[c]=a[c]===void 0?e[c]:e[c]||a[c],c+=1;return b}return 0}function mul(e,a){var i=_typeof$1(e),o=_typeof$1(a),c;if(isNumerable(i,e)&&isNumerable(o,a))return e*a;var d,g;if($bm_isInstanceOfArray(e)&&isNumerable(o,a)){for(g=e.length,c=createTypedArray("float32",g),d=0;d<g;d+=1)c[d]=e[d]*a;return c}if(isNumerable(i,e)&&$bm_isInstanceOfArray(a)){for(g=a.length,c=createTypedArray("float32",g),d=0;d<g;d+=1)c[d]=e*a[d];return c}return 0}function div(e,a){var i=_typeof$1(e),o=_typeof$1(a),c;if(isNumerable(i,e)&&isNumerable(o,a))return e/a;var d,g;if($bm_isInstanceOfArray(e)&&isNumerable(o,a)){for(g=e.length,c=createTypedArray("float32",g),d=0;d<g;d+=1)c[d]=e[d]/a;return c}if(isNumerable(i,e)&&$bm_isInstanceOfArray(a)){for(g=a.length,c=createTypedArray("float32",g),d=0;d<g;d+=1)c[d]=e/a[d];return c}return 0}function mod(e,a){return typeof e=="string"&&(e=parseInt(e,10)),typeof a=="string"&&(a=parseInt(a,10)),e%a}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(e,a,i){if(a>i){var o=i;i=a,a=o}return Math.min(Math.max(e,a),i)}function radiansToDegrees(e){return e/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(e){return e*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(e,a){if(typeof e=="number"||e instanceof Number)return a=a||0,Math.abs(e-a);a||(a=helperLengthArray);var i,o=Math.min(e.length,a.length),c=0;for(i=0;i<o;i+=1)c+=Math.pow(a[i]-e[i],2);return Math.sqrt(c)}function normalize(e){return div(e,length(e))}function rgbToHsl(e){var a=e[0],i=e[1],o=e[2],c=Math.max(a,i,o),d=Math.min(a,i,o),g,b,j=(c+d)/2;if(c===d)g=0,b=0;else{var $=c-d;switch(b=j>.5?$/(2-c-d):$/(c+d),c){case a:g=(i-o)/$+(i<o?6:0);break;case i:g=(o-a)/$+2;break;case o:g=(a-i)/$+4;break}g/=6}return[g,b,j,e[3]]}function hue2rgb(e,a,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+(a-e)*6*i:i<1/2?a:i<2/3?e+(a-e)*(2/3-i)*6:e}function hslToRgb(e){var a=e[0],i=e[1],o=e[2],c,d,g;if(i===0)c=o,g=o,d=o;else{var b=o<.5?o*(1+i):o+i-o*i,j=2*o-b;c=hue2rgb(j,b,a+1/3),d=hue2rgb(j,b,a),g=hue2rgb(j,b,a-1/3)}return[c,d,g,e[3]]}function linear(e,a,i,o,c){if((o===void 0||c===void 0)&&(o=a,c=i,a=0,i=1),i<a){var d=i;i=a,a=d}if(e<=a)return o;if(e>=i)return c;var g=i===a?0:(e-a)/(i-a);if(!o.length)return o+(c-o)*g;var b,j=o.length,$=createTypedArray("float32",j);for(b=0;b<j;b+=1)$[b]=o[b]+(c[b]-o[b])*g;return $}function random(e,a){if(a===void 0&&(e===void 0?(e=0,a=1):(a=e,e=void 0)),a.length){var i,o=a.length;e||(e=createTypedArray("float32",o));var c=createTypedArray("float32",o),d=BMMath.random();for(i=0;i<o;i+=1)c[i]=e[i]+d*(a[i]-e[i]);return c}e===void 0&&(e=0);var g=BMMath.random();return e+g*(a-e)}function createPath(e,a,i,o){var c,d=e.length,g=shapePool.newElement();g.setPathData(!!o,d);var b=[0,0],j,$;for(c=0;c<d;c+=1)j=a&&a[c]?a[c]:b,$=i&&i[c]?i[c]:b,g.setTripleAt(e[c][0],e[c][1],$[0]+e[c][0],$[1]+e[c][1],j[0]+e[c][0],j[1]+e[c][1],c,!0);return g}function initiateExpression(elem,data,property){function noOp(e){return e}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=val.indexOf("random")!==-1,elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||this.data.hd!==!0,wiggle=(function e(a,i){var o,c,d=this.pv.length?this.pv.length:1,g=createTypedArray("float32",d);a=5;var b=Math.floor(time*a);for(o=0,c=0;o<b;){for(c=0;c<d;c+=1)g[c]+=-i+i*2*BMMath.random();o+=1}var j=time*a,$=j-Math.floor(j),rt=createTypedArray("float32",d);if(d>1){for(c=0;c<d;c+=1)rt[c]=this.pv[c]+g[c]+(-i+i*2*BMMath.random())*$;return rt}return this.pv+g[0]+(-i+i*2*BMMath.random())*$}).bind(this);thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty));function loopInDuration(e,a){return loopIn(e,a,!0)}function loopOutDuration(e,a){return loopOut(e,a,!0)}this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);function lookAt(e,a){var i=[a[0]-e[0],a[1]-e[1],a[2]-e[2]],o=Math.atan2(i[0],Math.sqrt(i[1]*i[1]+i[2]*i[2]))/degToRads,c=-Math.atan2(i[1],i[2])/degToRads;return[c,o,0]}function easeOut(e,a,i,o,c){return applyEase(easeOutBez,e,a,i,o,c)}function easeIn(e,a,i,o,c){return applyEase(easeInBez,e,a,i,o,c)}function ease(e,a,i,o,c){return applyEase(easeInOutBez,e,a,i,o,c)}function applyEase(e,a,i,o,c,d){c===void 0?(c=i,d=o):a=(a-i)/(o-i),a>1?a=1:a<0&&(a=0);var g=e(a);if($bm_isInstanceOfArray(c)){var b,j=c.length,$=createTypedArray("float32",j);for(b=0;b<j;b+=1)$[b]=(d[b]-c[b])*g+c[b];return $}return(d-c)*g+c}function nearestKey(e){var a,i=data.k.length,o,c;if(!data.k.length||typeof data.k[0]=="number")o=0,c=0;else if(o=-1,e*=elem.comp.globalData.frameRate,e<data.k[0].t)o=1,c=data.k[0].t;else{for(a=0;a<i-1;a+=1)if(e===data.k[a].t){o=a+1,c=data.k[a].t;break}else if(e>data.k[a].t&&e<data.k[a+1].t){e-data.k[a].t>data.k[a+1].t-e?(o=a+2,c=data.k[a+1].t):(o=a+1,c=data.k[a].t);break}o===-1&&(o=a+1,c=data.k[a].t)}var d={};return d.index=o,d.time=c/elem.comp.globalData.frameRate,d}function key(e){var a,i,o;if(!data.k.length||typeof data.k[0]=="number")throw new Error("The property has no keyframe at index "+e);e-=1,a={time:data.k[e].t/elem.comp.globalData.frameRate,value:[]};var c=Object.prototype.hasOwnProperty.call(data.k[e],"s")?data.k[e].s:data.k[e-1].e;for(o=c.length,i=0;i<o;i+=1)a[i]=c[i],a.value[i]=c[i];return a}function framesToTime(e,a){return a||(a=elem.comp.globalData.frameRate),e/a}function timeToFrames(e,a){return!e&&e!==0&&(e=time),a||(a=elem.comp.globalData.frameRate),e*a}function seedRandom(e){BMMath.seedrandom(randSeed+e)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(e,a){return typeof value=="string"?a===void 0?value.substring(e):value.substring(e,a):""}function substr(e,a){return typeof value=="string"?a===void 0?value.substr(e):value.substr(e,a):""}function posterizeTime(e){time=e===0?0:Math.floor(time*e)/e,value=valueAtTime(time)}var time,velocity,value,text,textIndex,textTotal,selectorValue,index=elem.data.ind,hasParent=!!(elem.hierarchy&&elem.hierarchy.length),parent,randSeed=Math.floor(Math.random()*1e6),globalData=elem.globalData;function executeExpression(e){return value=e,this.frameExpressionId===elem.globalData.frameId&&this.propType!=="textSelector"?value:(this.propType==="textSelector"&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),elemType===4&&!content&&(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),hasParent=!!(elem.hierarchy&&elem.hierarchy.length),hasParent&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt,scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath,_lottieGlobal],ob.resetFrame=resetFrame,ob}(),Expressions=function(){var e={};e.initExpressions=a,e.resetFrame=ExpressionManager.resetFrame;function a(i){var o=0,c=[];function d(){o+=1}function g(){o-=1,o===0&&j()}function b($){c.indexOf($)===-1&&c.push($)}function j(){var $,rt=c.length;for($=0;$<rt;$+=1)c[$].release();c.length=0}i.renderer.compInterface=CompExpressionInterface(i.renderer),i.renderer.globalData.projectInterface.registerComposition(i.renderer),i.renderer.globalData.pushExpression=d,i.renderer.globalData.popExpression=g,i.renderer.globalData.registerExpressionProperty=b}return e}(),MaskManagerInterface=function(){function e(i,o){this._mask=i,this._data=o}Object.defineProperty(e.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(e.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),this._mask.op.v*100}});var a=function(o){var c=createSizedArray(o.viewData.length),d,g=o.viewData.length;for(d=0;d<g;d+=1)c[d]=new e(o.viewData[d],o.masksProperties[d]);var b=function($){for(d=0;d<g;){if(o.masksProperties[d].nm===$)return c[d];d+=1}return null};return b};return a}(),ExpressionPropertyInterface=function(){var e={pv:0,v:0,mult:1},a={pv:[0,0,0],v:[0,0,0],mult:1};function i(g,b,j){Object.defineProperty(g,"velocity",{get:function(){return b.getVelocityAtTime(b.comp.currentFrame)}}),g.numKeys=b.keyframes?b.keyframes.length:0,g.key=function($){if(!g.numKeys)return 0;var rt="";"s"in b.keyframes[$-1]?rt=b.keyframes[$-1].s:"e"in b.keyframes[$-2]?rt=b.keyframes[$-2].e:rt=b.keyframes[$-2].s;var _e=j==="unidimensional"?new Number(rt):Object.assign({},rt);return _e.time=b.keyframes[$-1].t/b.elem.comp.globalData.frameRate,_e.value=j==="unidimensional"?rt[0]:rt,_e},g.valueAtTime=b.getValueAtTime,g.speedAtTime=b.getSpeedAtTime,g.velocityAtTime=b.getVelocityAtTime,g.propertyGroup=b.propertyGroup}function o(g){(!g||!("pv"in g))&&(g=e);var b=1/g.mult,j=g.pv*b,$=new Number(j);return $.value=j,i($,g,"unidimensional"),function(){return g.k&&g.getValue(),j=g.v*b,$.value!==j&&($=new Number(j),$.value=j,i($,g,"unidimensional")),$}}function c(g){(!g||!("pv"in g))&&(g=a);var b=1/g.mult,j=g.data&&g.data.l||g.pv.length,$=createTypedArray("float32",j),rt=createTypedArray("float32",j);return $.value=rt,i($,g,"multidimensional"),function(){g.k&&g.getValue();for(var _e=0;_e<j;_e+=1)rt[_e]=g.v[_e]*b,$[_e]=rt[_e];return $}}function d(){return e}return function(g){return g?g.propType==="unidimensional"?o(g):c(g):d}}(),TransformExpressionInterface=function(){return function(e){function a(g){switch(g){case"scale":case"Scale":case"ADBE Scale":case 6:return a.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return a.rotation;case"ADBE Rotate X":return a.xRotation;case"ADBE Rotate Y":return a.yRotation;case"position":case"Position":case"ADBE Position":case 2:return a.position;case"ADBE Position_0":return a.xPosition;case"ADBE Position_1":return a.yPosition;case"ADBE Position_2":return a.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return a.anchorPoint;case"opacity":case"Opacity":case 11:return a.opacity;default:return null}}Object.defineProperty(a,"rotation",{get:ExpressionPropertyInterface(e.r||e.rz)}),Object.defineProperty(a,"zRotation",{get:ExpressionPropertyInterface(e.rz||e.r)}),Object.defineProperty(a,"xRotation",{get:ExpressionPropertyInterface(e.rx)}),Object.defineProperty(a,"yRotation",{get:ExpressionPropertyInterface(e.ry)}),Object.defineProperty(a,"scale",{get:ExpressionPropertyInterface(e.s)});var i,o,c,d;return e.p?d=ExpressionPropertyInterface(e.p):(i=ExpressionPropertyInterface(e.px),o=ExpressionPropertyInterface(e.py),e.pz&&(c=ExpressionPropertyInterface(e.pz))),Object.defineProperty(a,"position",{get:function(){return e.p?d():[i(),o(),c?c():0]}}),Object.defineProperty(a,"xPosition",{get:ExpressionPropertyInterface(e.px)}),Object.defineProperty(a,"yPosition",{get:ExpressionPropertyInterface(e.py)}),Object.defineProperty(a,"zPosition",{get:ExpressionPropertyInterface(e.pz)}),Object.defineProperty(a,"anchorPoint",{get:ExpressionPropertyInterface(e.a)}),Object.defineProperty(a,"opacity",{get:ExpressionPropertyInterface(e.o)}),Object.defineProperty(a,"skew",{get:ExpressionPropertyInterface(e.sk)}),Object.defineProperty(a,"skewAxis",{get:ExpressionPropertyInterface(e.sa)}),Object.defineProperty(a,"orientation",{get:ExpressionPropertyInterface(e.or)}),a}}(),LayerExpressionInterface=function(){function e($){var rt=new Matrix;if($!==void 0){var _e=this._elem.finalTransform.mProp.getValueAtTime($);_e.clone(rt)}else{var st=this._elem.finalTransform.mProp;st.applyToMatrix(rt)}return rt}function a($,rt){var _e=this.getMatrix(rt);return _e.props[12]=0,_e.props[13]=0,_e.props[14]=0,this.applyPoint(_e,$)}function i($,rt){var _e=this.getMatrix(rt);return this.applyPoint(_e,$)}function o($,rt){var _e=this.getMatrix(rt);return _e.props[12]=0,_e.props[13]=0,_e.props[14]=0,this.invertPoint(_e,$)}function c($,rt){var _e=this.getMatrix(rt);return this.invertPoint(_e,$)}function d($,rt){if(this._elem.hierarchy&&this._elem.hierarchy.length){var _e,st=this._elem.hierarchy.length;for(_e=0;_e<st;_e+=1)this._elem.hierarchy[_e].finalTransform.mProp.applyToMatrix($)}return $.applyToPointArray(rt[0],rt[1],rt[2]||0)}function g($,rt){if(this._elem.hierarchy&&this._elem.hierarchy.length){var _e,st=this._elem.hierarchy.length;for(_e=0;_e<st;_e+=1)this._elem.hierarchy[_e].finalTransform.mProp.applyToMatrix($)}return $.inversePoint(rt)}function b($){var rt=new Matrix;if(rt.reset(),this._elem.finalTransform.mProp.applyToMatrix(rt),this._elem.hierarchy&&this._elem.hierarchy.length){var _e,st=this._elem.hierarchy.length;for(_e=0;_e<st;_e+=1)this._elem.hierarchy[_e].finalTransform.mProp.applyToMatrix(rt);return rt.inversePoint($)}return rt.inversePoint($)}function j(){return[1,1,1,1]}return function($){var rt;function _e(yt){ut.mask=new MaskManagerInterface(yt,$)}function st(yt){ut.effect=yt}function ut(yt){switch(yt){case"ADBE Root Vectors Group":case"Contents":case 2:return ut.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return rt;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return ut.effect;case"ADBE Text Properties":return ut.textInterface;default:return null}}ut.getMatrix=e,ut.invertPoint=g,ut.applyPoint=d,ut.toWorld=i,ut.toWorldVec=a,ut.fromWorld=c,ut.fromWorldVec=o,ut.toComp=i,ut.fromComp=b,ut.sampleImage=j,ut.sourceRectAtTime=$.sourceRectAtTime.bind($),ut._elem=$,rt=TransformExpressionInterface($.finalTransform.mProp);var gt=getDescriptor(rt,"anchorPoint");return Object.defineProperties(ut,{hasParent:{get:function(){return $.hierarchy.length}},parent:{get:function(){return $.hierarchy[0].layerInterface}},rotation:getDescriptor(rt,"rotation"),scale:getDescriptor(rt,"scale"),position:getDescriptor(rt,"position"),opacity:getDescriptor(rt,"opacity"),anchorPoint:gt,anchor_point:gt,transform:{get:function(){return rt}},active:{get:function(){return $.isInRange}}}),ut.startTime=$.data.st,ut.index=$.data.ind,ut.source=$.data.refId,ut.height=$.data.ty===0?$.data.h:100,ut.width=$.data.ty===0?$.data.w:100,ut.inPoint=$.data.ip/$.comp.globalData.frameRate,ut.outPoint=$.data.op/$.comp.globalData.frameRate,ut._name=$.data.nm,ut.registerMaskInterface=_e,ut.registerEffectsInterface=st,ut}}(),propertyGroupFactory=function(){return function(e,a){return function(i){return i=i===void 0?1:i,i<=0?e:a(i-1)}}}(),PropertyInterface=function(){return function(e,a){var i={_name:e};function o(c){return c=c===void 0?1:c,c<=0?i:a(c-1)}return o}}(),EffectsExpressionInterface=function(){var e={createEffectsInterface:a};function a(c,d){if(c.effectsManager){var g=[],b=c.data.ef,j,$=c.effectsManager.effectElements.length;for(j=0;j<$;j+=1)g.push(i(b[j],c.effectsManager.effectElements[j],d,c));var rt=c.data.ef||[],_e=function(ut){for(j=0,$=rt.length;j<$;){if(ut===rt[j].nm||ut===rt[j].mn||ut===rt[j].ix)return g[j];j+=1}return null};return Object.defineProperty(_e,"numProperties",{get:function(){return rt.length}}),_e}return null}function i(c,d,g,b){function j(ut){for(var gt=c.ef,yt=0,Pt=gt.length;yt<Pt;){if(ut===gt[yt].nm||ut===gt[yt].mn||ut===gt[yt].ix)return gt[yt].ty===5?rt[yt]:rt[yt]();yt+=1}throw new Error}var $=propertyGroupFactory(j,g),rt=[],_e,st=c.ef.length;for(_e=0;_e<st;_e+=1)c.ef[_e].ty===5?rt.push(i(c.ef[_e],d.effectElements[_e],d.effectElements[_e].propertyGroup,b)):rt.push(o(d.effectElements[_e],c.ef[_e].ty,b,$));return c.mn==="ADBE Color Control"&&Object.defineProperty(j,"color",{get:function(){return rt[0]()}}),Object.defineProperties(j,{numProperties:{get:function(){return c.np}},_name:{value:c.nm},propertyGroup:{value:$}}),j.enabled=c.en!==0,j.active=j.enabled,j}function o(c,d,g,b){var j=ExpressionPropertyInterface(c.p);function $(){return d===10?g.comp.compInterface(c.p.v):j()}return c.p.setGroupProperty&&c.p.setGroupProperty(PropertyInterface("",b)),$}return e}(),ShapePathInterface=function(){return function(a,i,o){var c=i.sh;function d(b){return b==="Shape"||b==="shape"||b==="Path"||b==="path"||b==="ADBE Vector Shape"||b===2?d.path:null}var g=propertyGroupFactory(d,o);return c.setGroupProperty(PropertyInterface("Path",g)),Object.defineProperties(d,{path:{get:function(){return c.k&&c.getValue(),c}},shape:{get:function(){return c.k&&c.getValue(),c}},_name:{value:a.nm},ix:{value:a.ix},propertyIndex:{value:a.ix},mn:{value:a.mn},propertyGroup:{value:o}}),d}}(),ShapeExpressionInterface=function(){function e(gt,yt,Pt){var wt=[],Ct,At=gt?gt.length:0;for(Ct=0;Ct<At;Ct+=1)gt[Ct].ty==="gr"?wt.push(i(gt[Ct],yt[Ct],Pt)):gt[Ct].ty==="fl"?wt.push(o(gt[Ct],yt[Ct],Pt)):gt[Ct].ty==="st"?wt.push(g(gt[Ct],yt[Ct],Pt)):gt[Ct].ty==="tm"?wt.push(b(gt[Ct],yt[Ct],Pt)):gt[Ct].ty==="tr"||(gt[Ct].ty==="el"?wt.push($(gt[Ct],yt[Ct],Pt)):gt[Ct].ty==="sr"?wt.push(rt(gt[Ct],yt[Ct],Pt)):gt[Ct].ty==="sh"?wt.push(ShapePathInterface(gt[Ct],yt[Ct],Pt)):gt[Ct].ty==="rc"?wt.push(_e(gt[Ct],yt[Ct],Pt)):gt[Ct].ty==="rd"?wt.push(st(gt[Ct],yt[Ct],Pt)):gt[Ct].ty==="rp"?wt.push(ut(gt[Ct],yt[Ct],Pt)):gt[Ct].ty==="gf"?wt.push(c(gt[Ct],yt[Ct],Pt)):wt.push(d(gt[Ct],yt[Ct])));return wt}function a(gt,yt,Pt){var wt,Ct=function(kt){for(var It=0,Lt=wt.length;It<Lt;){if(wt[It]._name===kt||wt[It].mn===kt||wt[It].propertyIndex===kt||wt[It].ix===kt||wt[It].ind===kt)return wt[It];It+=1}return typeof kt=="number"?wt[kt-1]:null};Ct.propertyGroup=propertyGroupFactory(Ct,Pt),wt=e(gt.it,yt.it,Ct.propertyGroup),Ct.numProperties=wt.length;var At=j(gt.it[gt.it.length-1],yt.it[yt.it.length-1],Ct.propertyGroup);return Ct.transform=At,Ct.propertyIndex=gt.cix,Ct._name=gt.nm,Ct}function i(gt,yt,Pt){var wt=function(kt){switch(kt){case"ADBE Vectors Group":case"Contents":case 2:return wt.content;default:return wt.transform}};wt.propertyGroup=propertyGroupFactory(wt,Pt);var Ct=a(gt,yt,wt.propertyGroup),At=j(gt.it[gt.it.length-1],yt.it[yt.it.length-1],wt.propertyGroup);return wt.content=Ct,wt.transform=At,Object.defineProperty(wt,"_name",{get:function(){return gt.nm}}),wt.numProperties=gt.np,wt.propertyIndex=gt.ix,wt.nm=gt.nm,wt.mn=gt.mn,wt}function o(gt,yt,Pt){function wt(Ct){return Ct==="Color"||Ct==="color"?wt.color:Ct==="Opacity"||Ct==="opacity"?wt.opacity:null}return Object.defineProperties(wt,{color:{get:ExpressionPropertyInterface(yt.c)},opacity:{get:ExpressionPropertyInterface(yt.o)},_name:{value:gt.nm},mn:{value:gt.mn}}),yt.c.setGroupProperty(PropertyInterface("Color",Pt)),yt.o.setGroupProperty(PropertyInterface("Opacity",Pt)),wt}function c(gt,yt,Pt){function wt(Ct){return Ct==="Start Point"||Ct==="start point"?wt.startPoint:Ct==="End Point"||Ct==="end point"?wt.endPoint:Ct==="Opacity"||Ct==="opacity"?wt.opacity:null}return Object.defineProperties(wt,{startPoint:{get:ExpressionPropertyInterface(yt.s)},endPoint:{get:ExpressionPropertyInterface(yt.e)},opacity:{get:ExpressionPropertyInterface(yt.o)},type:{get:function(){return"a"}},_name:{value:gt.nm},mn:{value:gt.mn}}),yt.s.setGroupProperty(PropertyInterface("Start Point",Pt)),yt.e.setGroupProperty(PropertyInterface("End Point",Pt)),yt.o.setGroupProperty(PropertyInterface("Opacity",Pt)),wt}function d(){function gt(){return null}return gt}function g(gt,yt,Pt){var wt=propertyGroupFactory(Lt,Pt),Ct=propertyGroupFactory(It,wt);function At(Ft){Object.defineProperty(It,gt.d[Ft].nm,{get:ExpressionPropertyInterface(yt.d.dataProps[Ft].p)})}var Tt,kt=gt.d?gt.d.length:0,It={};for(Tt=0;Tt<kt;Tt+=1)At(Tt),yt.d.dataProps[Tt].p.setGroupProperty(Ct);function Lt(Ft){return Ft==="Color"||Ft==="color"?Lt.color:Ft==="Opacity"||Ft==="opacity"?Lt.opacity:Ft==="Stroke Width"||Ft==="stroke width"?Lt.strokeWidth:null}return Object.defineProperties(Lt,{color:{get:ExpressionPropertyInterface(yt.c)},opacity:{get:ExpressionPropertyInterface(yt.o)},strokeWidth:{get:ExpressionPropertyInterface(yt.w)},dash:{get:function(){return It}},_name:{value:gt.nm},mn:{value:gt.mn}}),yt.c.setGroupProperty(PropertyInterface("Color",wt)),yt.o.setGroupProperty(PropertyInterface("Opacity",wt)),yt.w.setGroupProperty(PropertyInterface("Stroke Width",wt)),Lt}function b(gt,yt,Pt){function wt(At){return At===gt.e.ix||At==="End"||At==="end"?wt.end:At===gt.s.ix?wt.start:At===gt.o.ix?wt.offset:null}var Ct=propertyGroupFactory(wt,Pt);return wt.propertyIndex=gt.ix,yt.s.setGroupProperty(PropertyInterface("Start",Ct)),yt.e.setGroupProperty(PropertyInterface("End",Ct)),yt.o.setGroupProperty(PropertyInterface("Offset",Ct)),wt.propertyIndex=gt.ix,wt.propertyGroup=Pt,Object.defineProperties(wt,{start:{get:ExpressionPropertyInterface(yt.s)},end:{get:ExpressionPropertyInterface(yt.e)},offset:{get:ExpressionPropertyInterface(yt.o)},_name:{value:gt.nm}}),wt.mn=gt.mn,wt}function j(gt,yt,Pt){function wt(At){return gt.a.ix===At||At==="Anchor Point"?wt.anchorPoint:gt.o.ix===At||At==="Opacity"?wt.opacity:gt.p.ix===At||At==="Position"?wt.position:gt.r.ix===At||At==="Rotation"||At==="ADBE Vector Rotation"?wt.rotation:gt.s.ix===At||At==="Scale"?wt.scale:gt.sk&&gt.sk.ix===At||At==="Skew"?wt.skew:gt.sa&&gt.sa.ix===At||At==="Skew Axis"?wt.skewAxis:null}var Ct=propertyGroupFactory(wt,Pt);return yt.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",Ct)),yt.transform.mProps.p.setGroupProperty(PropertyInterface("Position",Ct)),yt.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",Ct)),yt.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",Ct)),yt.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",Ct)),yt.transform.mProps.sk&&(yt.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",Ct)),yt.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",Ct))),yt.transform.op.setGroupProperty(PropertyInterface("Opacity",Ct)),Object.defineProperties(wt,{opacity:{get:ExpressionPropertyInterface(yt.transform.mProps.o)},position:{get:ExpressionPropertyInterface(yt.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(yt.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(yt.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(yt.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(yt.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(yt.transform.mProps.sa)},_name:{value:gt.nm}}),wt.ty="tr",wt.mn=gt.mn,wt.propertyGroup=Pt,wt}function $(gt,yt,Pt){function wt(Tt){return gt.p.ix===Tt?wt.position:gt.s.ix===Tt?wt.size:null}var Ct=propertyGroupFactory(wt,Pt);wt.propertyIndex=gt.ix;var At=yt.sh.ty==="tm"?yt.sh.prop:yt.sh;return At.s.setGroupProperty(PropertyInterface("Size",Ct)),At.p.setGroupProperty(PropertyInterface("Position",Ct)),Object.defineProperties(wt,{size:{get:ExpressionPropertyInterface(At.s)},position:{get:ExpressionPropertyInterface(At.p)},_name:{value:gt.nm}}),wt.mn=gt.mn,wt}function rt(gt,yt,Pt){function wt(Tt){return gt.p.ix===Tt?wt.position:gt.r.ix===Tt?wt.rotation:gt.pt.ix===Tt?wt.points:gt.or.ix===Tt||Tt==="ADBE Vector Star Outer Radius"?wt.outerRadius:gt.os.ix===Tt?wt.outerRoundness:gt.ir&&(gt.ir.ix===Tt||Tt==="ADBE Vector Star Inner Radius")?wt.innerRadius:gt.is&&gt.is.ix===Tt?wt.innerRoundness:null}var Ct=propertyGroupFactory(wt,Pt),At=yt.sh.ty==="tm"?yt.sh.prop:yt.sh;return wt.propertyIndex=gt.ix,At.or.setGroupProperty(PropertyInterface("Outer Radius",Ct)),At.os.setGroupProperty(PropertyInterface("Outer Roundness",Ct)),At.pt.setGroupProperty(PropertyInterface("Points",Ct)),At.p.setGroupProperty(PropertyInterface("Position",Ct)),At.r.setGroupProperty(PropertyInterface("Rotation",Ct)),gt.ir&&(At.ir.setGroupProperty(PropertyInterface("Inner Radius",Ct)),At.is.setGroupProperty(PropertyInterface("Inner Roundness",Ct))),Object.defineProperties(wt,{position:{get:ExpressionPropertyInterface(At.p)},rotation:{get:ExpressionPropertyInterface(At.r)},points:{get:ExpressionPropertyInterface(At.pt)},outerRadius:{get:ExpressionPropertyInterface(At.or)},outerRoundness:{get:ExpressionPropertyInterface(At.os)},innerRadius:{get:ExpressionPropertyInterface(At.ir)},innerRoundness:{get:ExpressionPropertyInterface(At.is)},_name:{value:gt.nm}}),wt.mn=gt.mn,wt}function _e(gt,yt,Pt){function wt(Tt){return gt.p.ix===Tt?wt.position:gt.r.ix===Tt?wt.roundness:gt.s.ix===Tt||Tt==="Size"||Tt==="ADBE Vector Rect Size"?wt.size:null}var Ct=propertyGroupFactory(wt,Pt),At=yt.sh.ty==="tm"?yt.sh.prop:yt.sh;return wt.propertyIndex=gt.ix,At.p.setGroupProperty(PropertyInterface("Position",Ct)),At.s.setGroupProperty(PropertyInterface("Size",Ct)),At.r.setGroupProperty(PropertyInterface("Rotation",Ct)),Object.defineProperties(wt,{position:{get:ExpressionPropertyInterface(At.p)},roundness:{get:ExpressionPropertyInterface(At.r)},size:{get:ExpressionPropertyInterface(At.s)},_name:{value:gt.nm}}),wt.mn=gt.mn,wt}function st(gt,yt,Pt){function wt(Tt){return gt.r.ix===Tt||Tt==="Round Corners 1"?wt.radius:null}var Ct=propertyGroupFactory(wt,Pt),At=yt;return wt.propertyIndex=gt.ix,At.rd.setGroupProperty(PropertyInterface("Radius",Ct)),Object.defineProperties(wt,{radius:{get:ExpressionPropertyInterface(At.rd)},_name:{value:gt.nm}}),wt.mn=gt.mn,wt}function ut(gt,yt,Pt){function wt(Tt){return gt.c.ix===Tt||Tt==="Copies"?wt.copies:gt.o.ix===Tt||Tt==="Offset"?wt.offset:null}var Ct=propertyGroupFactory(wt,Pt),At=yt;return wt.propertyIndex=gt.ix,At.c.setGroupProperty(PropertyInterface("Copies",Ct)),At.o.setGroupProperty(PropertyInterface("Offset",Ct)),Object.defineProperties(wt,{copies:{get:ExpressionPropertyInterface(At.c)},offset:{get:ExpressionPropertyInterface(At.o)},_name:{value:gt.nm}}),wt.mn=gt.mn,wt}return function(gt,yt,Pt){var wt;function Ct(Tt){if(typeof Tt=="number")return Tt=Tt===void 0?1:Tt,Tt===0?Pt:wt[Tt-1];for(var kt=0,It=wt.length;kt<It;){if(wt[kt]._name===Tt)return wt[kt];kt+=1}return null}function At(){return Pt}return Ct.propertyGroup=propertyGroupFactory(Ct,At),wt=e(gt,yt,Ct.propertyGroup),Ct.numProperties=wt.length,Ct._name="Contents",Ct}}(),TextExpressionInterface=function(){return function(e){var a;function i(o){switch(o){case"ADBE Text Document":return i.sourceText;default:return null}}return Object.defineProperty(i,"sourceText",{get:function(){e.textProperty.getValue();var c=e.textProperty.currentData.t;return(!a||c!==a.value)&&(a=new String(c),a.value=c||new String(c),Object.defineProperty(a,"style",{get:function(){return{fillColor:e.textProperty.currentData.fc}}})),a}}),i}}();function _typeof(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(i){return typeof i}:_typeof=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_typeof(e)}var FootageInterface=function(){var e=function(o){var c="",d=o.getFootageData();function g(){return c="",d=o.getFootageData(),b}function b(j){if(d[j])return c=j,d=d[j],_typeof(d)==="object"?b:d;var $=j.indexOf(c);if($!==-1){var rt=parseInt(j.substr($+c.length),10);return d=d[rt],_typeof(d)==="object"?b:d}return""}return g},a=function(o){function c(d){return d==="Outline"?c.outlineInterface():null}return c._name="Outline",c.outlineInterface=e(o),c};return function(i){function o(c){return c==="Data"?o.dataInterface:null}return o._name="Data",o.dataInterface=a(i),o}}(),interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(e){return interfaces[e]||null}var expressionHelpers=function(){function e(g,b,j){b.x&&(j.k=!0,j.x=!0,j.initiateExpression=ExpressionManager.initiateExpression,j.effectsSequence.push(j.initiateExpression(g,b,j).bind(j)))}function a(g){return g*=this.elem.globalData.frameRate,g-=this.offsetTime,g!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<g?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(g,this._cachingAtTime),this._cachingAtTime.lastFrame=g),this._cachingAtTime.value}function i(g){var b=-.01,j=this.getValueAtTime(g),$=this.getValueAtTime(g+b),rt=0;if(j.length){var _e;for(_e=0;_e<j.length;_e+=1)rt+=Math.pow($[_e]-j[_e],2);rt=Math.sqrt(rt)*100}else rt=0;return rt}function o(g){if(this.vel!==void 0)return this.vel;var b=-.001,j=this.getValueAtTime(g),$=this.getValueAtTime(g+b),rt;if(j.length){rt=createTypedArray("float32",j.length);var _e;for(_e=0;_e<j.length;_e+=1)rt[_e]=($[_e]-j[_e])/b}else rt=($-j)/b;return rt}function c(){return this.pv}function d(g){this.propertyGroup=g}return{searchExpressions:e,getSpeedAtTime:i,getVelocityAtTime:o,getValueAtTime:a,getStaticValueAtTime:c,setGroupProperty:d}}();function addPropertyDecorator(){function e(st,ut,gt){if(!this.k||!this.keyframes)return this.pv;st=st?st.toLowerCase():"";var yt=this.comp.renderedFrame,Pt=this.keyframes,wt=Pt[Pt.length-1].t;if(yt<=wt)return this.pv;var Ct,At;gt?(ut?Ct=Math.abs(wt-this.elem.comp.globalData.frameRate*ut):Ct=Math.max(0,wt-this.elem.data.ip),At=wt-Ct):((!ut||ut>Pt.length-1)&&(ut=Pt.length-1),At=Pt[Pt.length-1-ut].t,Ct=wt-At);var Tt,kt,It;if(st==="pingpong"){var Lt=Math.floor((yt-At)/Ct);if(Lt%2!==0)return this.getValueAtTime((Ct-(yt-At)%Ct+At)/this.comp.globalData.frameRate,0)}else if(st==="offset"){var Ft=this.getValueAtTime(At/this.comp.globalData.frameRate,0),Nt=this.getValueAtTime(wt/this.comp.globalData.frameRate,0),Ht=this.getValueAtTime(((yt-At)%Ct+At)/this.comp.globalData.frameRate,0),Gr=Math.floor((yt-At)/Ct);if(this.pv.length){for(It=new Array(Ft.length),kt=It.length,Tt=0;Tt<kt;Tt+=1)It[Tt]=(Nt[Tt]-Ft[Tt])*Gr+Ht[Tt];return It}return(Nt-Ft)*Gr+Ht}else if(st==="continue"){var hs=this.getValueAtTime(wt/this.comp.globalData.frameRate,0),_s=this.getValueAtTime((wt-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(It=new Array(hs.length),kt=It.length,Tt=0;Tt<kt;Tt+=1)It[Tt]=hs[Tt]+(hs[Tt]-_s[Tt])*((yt-wt)/this.comp.globalData.frameRate)/5e-4;return It}return hs+(hs-_s)*((yt-wt)/.001)}return this.getValueAtTime(((yt-At)%Ct+At)/this.comp.globalData.frameRate,0)}function a(st,ut,gt){if(!this.k)return this.pv;st=st?st.toLowerCase():"";var yt=this.comp.renderedFrame,Pt=this.keyframes,wt=Pt[0].t;if(yt>=wt)return this.pv;var Ct,At;gt?(ut?Ct=Math.abs(this.elem.comp.globalData.frameRate*ut):Ct=Math.max(0,this.elem.data.op-wt),At=wt+Ct):((!ut||ut>Pt.length-1)&&(ut=Pt.length-1),At=Pt[ut].t,Ct=At-wt);var Tt,kt,It;if(st==="pingpong"){var Lt=Math.floor((wt-yt)/Ct);if(Lt%2===0)return this.getValueAtTime(((wt-yt)%Ct+wt)/this.comp.globalData.frameRate,0)}else if(st==="offset"){var Ft=this.getValueAtTime(wt/this.comp.globalData.frameRate,0),Nt=this.getValueAtTime(At/this.comp.globalData.frameRate,0),Ht=this.getValueAtTime((Ct-(wt-yt)%Ct+wt)/this.comp.globalData.frameRate,0),Gr=Math.floor((wt-yt)/Ct)+1;if(this.pv.length){for(It=new Array(Ft.length),kt=It.length,Tt=0;Tt<kt;Tt+=1)It[Tt]=Ht[Tt]-(Nt[Tt]-Ft[Tt])*Gr;return It}return Ht-(Nt-Ft)*Gr}else if(st==="continue"){var hs=this.getValueAtTime(wt/this.comp.globalData.frameRate,0),_s=this.getValueAtTime((wt+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(It=new Array(hs.length),kt=It.length,Tt=0;Tt<kt;Tt+=1)It[Tt]=hs[Tt]+(hs[Tt]-_s[Tt])*(wt-yt)/.001;return It}return hs+(hs-_s)*(wt-yt)/.001}return this.getValueAtTime((Ct-((wt-yt)%Ct+wt))/this.comp.globalData.frameRate,0)}function i(st,ut){if(!this.k)return this.pv;if(st=(st||.4)*.5,ut=Math.floor(ut||5),ut<=1)return this.pv;var gt=this.comp.renderedFrame/this.comp.globalData.frameRate,yt=gt-st,Pt=gt+st,wt=ut>1?(Pt-yt)/(ut-1):1,Ct=0,At=0,Tt;this.pv.length?Tt=createTypedArray("float32",this.pv.length):Tt=0;for(var kt;Ct<ut;){if(kt=this.getValueAtTime(yt+Ct*wt),this.pv.length)for(At=0;At<this.pv.length;At+=1)Tt[At]+=kt[At];else Tt+=kt;Ct+=1}if(this.pv.length)for(At=0;At<this.pv.length;At+=1)Tt[At]/=ut;else Tt/=ut;return Tt}function o(st){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var ut=this._transformCachingAtTime.v;if(ut.cloneFromProps(this.pre.props),this.appliedTransformations<1){var gt=this.a.getValueAtTime(st);ut.translate(-gt[0]*this.a.mult,-gt[1]*this.a.mult,gt[2]*this.a.mult)}if(this.appliedTransformations<2){var yt=this.s.getValueAtTime(st);ut.scale(yt[0]*this.s.mult,yt[1]*this.s.mult,yt[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var Pt=this.sk.getValueAtTime(st),wt=this.sa.getValueAtTime(st);ut.skewFromAxis(-Pt*this.sk.mult,wt*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var Ct=this.r.getValueAtTime(st);ut.rotate(-Ct*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var At=this.rz.getValueAtTime(st),Tt=this.ry.getValueAtTime(st),kt=this.rx.getValueAtTime(st),It=this.or.getValueAtTime(st);ut.rotateZ(-At*this.rz.mult).rotateY(Tt*this.ry.mult).rotateX(kt*this.rx.mult).rotateZ(-It[2]*this.or.mult).rotateY(It[1]*this.or.mult).rotateX(It[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var Lt=this.px.getValueAtTime(st),Ft=this.py.getValueAtTime(st);if(this.data.p.z){var Nt=this.pz.getValueAtTime(st);ut.translate(Lt*this.px.mult,Ft*this.py.mult,-Nt*this.pz.mult)}else ut.translate(Lt*this.px.mult,Ft*this.py.mult,0)}else{var Ht=this.p.getValueAtTime(st);ut.translate(Ht[0]*this.p.mult,Ht[1]*this.p.mult,-Ht[2]*this.p.mult)}return ut}function c(){return this.v.clone(new Matrix)}var d=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(st,ut,gt){var yt=d(st,ut,gt);return yt.dynamicProperties.length?yt.getValueAtTime=o.bind(yt):yt.getValueAtTime=c.bind(yt),yt.setGroupProperty=expressionHelpers.setGroupProperty,yt};var g=PropertyFactory.getProp;PropertyFactory.getProp=function(st,ut,gt,yt,Pt){var wt=g(st,ut,gt,yt,Pt);wt.kf?wt.getValueAtTime=expressionHelpers.getValueAtTime.bind(wt):wt.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(wt),wt.setGroupProperty=expressionHelpers.setGroupProperty,wt.loopOut=e,wt.loopIn=a,wt.smooth=i,wt.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(wt),wt.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(wt),wt.numKeys=ut.a===1?ut.k.length:0,wt.propertyIndex=ut.ix;var Ct=0;return gt!==0&&(Ct=createTypedArray("float32",ut.a===1?ut.k[0].s.length:ut.k.length)),wt._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:Ct},expressionHelpers.searchExpressions(st,ut,wt),wt.k&&Pt.addDynamicProperty(wt),wt};function b(st){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),st*=this.elem.globalData.frameRate,st-=this.offsetTime,st!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<st?this._caching.lastIndex:0,this._cachingAtTime.lastTime=st,this.interpolateShape(st,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue}var j=ShapePropertyFactory.getConstructorFunction(),$=ShapePropertyFactory.getKeyframedConstructorFunction();function rt(){}rt.prototype={vertices:function(ut,gt){this.k&&this.getValue();var yt=this.v;gt!==void 0&&(yt=this.getValueAtTime(gt,0));var Pt,wt=yt._length,Ct=yt[ut],At=yt.v,Tt=createSizedArray(wt);for(Pt=0;Pt<wt;Pt+=1)ut==="i"||ut==="o"?Tt[Pt]=[Ct[Pt][0]-At[Pt][0],Ct[Pt][1]-At[Pt][1]]:Tt[Pt]=[Ct[Pt][0],Ct[Pt][1]];return Tt},points:function(ut){return this.vertices("v",ut)},inTangents:function(ut){return this.vertices("i",ut)},outTangents:function(ut){return this.vertices("o",ut)},isClosed:function(){return this.v.c},pointOnPath:function(ut,gt){var yt=this.v;gt!==void 0&&(yt=this.getValueAtTime(gt,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(yt));for(var Pt=this._segmentsLength,wt=Pt.lengths,Ct=Pt.totalLength*ut,At=0,Tt=wt.length,kt=0,It;At<Tt;){if(kt+wt[At].addedLength>Ct){var Lt=At,Ft=yt.c&&At===Tt-1?0:At+1,Nt=(Ct-kt)/wt[At].addedLength;It=bez.getPointInSegment(yt.v[Lt],yt.v[Ft],yt.o[Lt],yt.i[Ft],Nt,wt[At]);break}else kt+=wt[At].addedLength;At+=1}return It||(It=yt.c?[yt.v[0][0],yt.v[0][1]]:[yt.v[yt._length-1][0],yt.v[yt._length-1][1]]),It},vectorOnPath:function(ut,gt,yt){ut==1?ut=this.v.c:ut==0&&(ut=.999);var Pt=this.pointOnPath(ut,gt),wt=this.pointOnPath(ut+.001,gt),Ct=wt[0]-Pt[0],At=wt[1]-Pt[1],Tt=Math.sqrt(Math.pow(Ct,2)+Math.pow(At,2));if(Tt===0)return[0,0];var kt=yt==="tangent"?[Ct/Tt,At/Tt]:[-At/Tt,Ct/Tt];return kt},tangentOnPath:function(ut,gt){return this.vectorOnPath(ut,gt,"tangent")},normalOnPath:function(ut,gt){return this.vectorOnPath(ut,gt,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([rt],j),extendPrototype([rt],$),$.prototype.getValueAtTime=b,$.prototype.initiateExpression=ExpressionManager.initiateExpression;var _e=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(st,ut,gt,yt,Pt){var wt=_e(st,ut,gt,yt,Pt);return wt.propertyIndex=ut.ix,wt.lock=!1,gt===3?expressionHelpers.searchExpressions(st,ut.pt,wt):gt===4&&expressionHelpers.searchExpressions(st,ut.ks,wt),wt.k&&st.addDynamicProperty(wt),wt}}function initialize$1(){addPropertyDecorator()}function addDecorator(){function e(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}TextProperty.prototype.getExpressionValue=function(a,i){var o=this.calculateExpression(i);if(a.t!==o){var c={};return this.copyData(c,a),c.t=o.toString(),c.__complete=!1,c}return a},TextProperty.prototype.searchProperty=function(){var a=this.searchKeyframes(),i=this.searchExpressions();return this.kf=a||i,this.kf},TextProperty.prototype.searchExpressions=e}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function e(a,i){var o=createNS("feMerge");o.setAttribute("result",a);var c,d;for(d=0;d<i.length;d+=1)c=createNS("feMergeNode"),c.setAttribute("in",i[d]),o.appendChild(c),o.appendChild(c);return o}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(e,a,i,o,c){this.filterManager=a;var d=createNS("feColorMatrix");d.setAttribute("type","matrix"),d.setAttribute("color-interpolation-filters","linearRGB"),d.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=d,d.setAttribute("result",o+"_tint_1"),e.appendChild(d),d=createNS("feColorMatrix"),d.setAttribute("type","matrix"),d.setAttribute("color-interpolation-filters","sRGB"),d.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),d.setAttribute("result",o+"_tint_2"),e.appendChild(d),this.matrixFilter=d;var g=this.createMergeNode(o,[c,o+"_tint_1",o+"_tint_2"]);e.appendChild(g)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var a=this.filterManager.effectElements[0].p.v,i=this.filterManager.effectElements[1].p.v,o=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+o+" 0"),this.matrixFilter.setAttribute("values",i[0]-a[0]+" 0 0 0 "+a[0]+" "+(i[1]-a[1])+" 0 0 0 "+a[1]+" "+(i[2]-a[2])+" 0 0 0 "+a[2]+" 0 0 0 1 0")}};function SVGFillFilter(e,a,i,o){this.filterManager=a;var c=createNS("feColorMatrix");c.setAttribute("type","matrix"),c.setAttribute("color-interpolation-filters","sRGB"),c.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),c.setAttribute("result",o),e.appendChild(c),this.matrixFilter=c}SVGFillFilter.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var a=this.filterManager.effectElements[2].p.v,i=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+a[0]+" 0 0 0 0 "+a[1]+" 0 0 0 0 "+a[2]+" 0 0 0 "+i+" 0")}};function SVGStrokeEffect(e,a,i){this.initialized=!1,this.filterManager=a,this.elem=i,this.paths=[]}SVGStrokeEffect.prototype.initialize=function(){var e=this.elem.layerElement.children||this.elem.layerElement.childNodes,a,i,o,c;for(this.filterManager.effectElements[1].p.v===1?(c=this.elem.maskManager.masksProperties.length,o=0):(o=this.filterManager.effectElements[0].p.v-1,c=o+1),i=createNS("g"),i.setAttribute("fill","none"),i.setAttribute("stroke-linecap","round"),i.setAttribute("stroke-dashoffset",1),o;o<c;o+=1)a=createNS("path"),i.appendChild(a),this.paths.push({p:a,m:o});if(this.filterManager.effectElements[10].p.v===3){var d=createNS("mask"),g=createElementID();d.setAttribute("id",g),d.setAttribute("mask-type","alpha"),d.appendChild(i),this.elem.globalData.defs.appendChild(d);var b=createNS("g");for(b.setAttribute("mask","url("+getLocationHref()+"#"+g+")");e[0];)b.appendChild(e[0]);this.elem.layerElement.appendChild(b),this.masker=d,i.setAttribute("stroke","#fff")}else if(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2){if(this.filterManager.effectElements[10].p.v===2)for(e=this.elem.layerElement.children||this.elem.layerElement.childNodes;e.length;)this.elem.layerElement.removeChild(e[0]);this.elem.layerElement.appendChild(i),this.elem.layerElement.removeAttribute("mask"),i.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=i},SVGStrokeEffect.prototype.renderFrame=function(e){this.initialized||this.initialize();var a,i=this.paths.length,o,c;for(a=0;a<i;a+=1)if(this.paths[a].m!==-1&&(o=this.elem.maskManager.viewData[this.paths[a].m],c=this.paths[a].p,(e||this.filterManager._mdf||o.prop._mdf)&&c.setAttribute("d",o.lastPath),e||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||o.prop._mdf)){var d;if(this.filterManager.effectElements[7].p.v!==0||this.filterManager.effectElements[8].p.v!==100){var g=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,b=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,j=c.getTotalLength();d="0 0 0 "+j*g+" ";var $=j*(b-g),rt=1+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01,_e=Math.floor($/rt),st;for(st=0;st<_e;st+=1)d+="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01+" ";d+="0 "+j*10+" 0 0"}else d="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01;c.setAttribute("stroke-dasharray",d)}if((e||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",this.filterManager.effectElements[4].p.v*2),(e||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2)&&(e||this.filterManager.effectElements[3].p._mdf)){var ut=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(ut[0]*255)+","+bmFloor(ut[1]*255)+","+bmFloor(ut[2]*255)+")")}};function SVGTritoneFilter(e,a,i,o){this.filterManager=a;var c=createNS("feColorMatrix");c.setAttribute("type","matrix"),c.setAttribute("color-interpolation-filters","linearRGB"),c.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),e.appendChild(c);var d=createNS("feComponentTransfer");d.setAttribute("color-interpolation-filters","sRGB"),d.setAttribute("result",o),this.matrixFilter=d;var g=createNS("feFuncR");g.setAttribute("type","table"),d.appendChild(g),this.feFuncR=g;var b=createNS("feFuncG");b.setAttribute("type","table"),d.appendChild(b),this.feFuncG=b;var j=createNS("feFuncB");j.setAttribute("type","table"),d.appendChild(j),this.feFuncB=j,e.appendChild(d)}SVGTritoneFilter.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var a=this.filterManager.effectElements[0].p.v,i=this.filterManager.effectElements[1].p.v,o=this.filterManager.effectElements[2].p.v,c=o[0]+" "+i[0]+" "+a[0],d=o[1]+" "+i[1]+" "+a[1],g=o[2]+" "+i[2]+" "+a[2];this.feFuncR.setAttribute("tableValues",c),this.feFuncG.setAttribute("tableValues",d),this.feFuncB.setAttribute("tableValues",g)}};function SVGProLevelsFilter(e,a,i,o){this.filterManager=a;var c=this.filterManager.effectElements,d=createNS("feComponentTransfer");(c[10].p.k||c[10].p.v!==0||c[11].p.k||c[11].p.v!==1||c[12].p.k||c[12].p.v!==1||c[13].p.k||c[13].p.v!==0||c[14].p.k||c[14].p.v!==1)&&(this.feFuncR=this.createFeFunc("feFuncR",d)),(c[17].p.k||c[17].p.v!==0||c[18].p.k||c[18].p.v!==1||c[19].p.k||c[19].p.v!==1||c[20].p.k||c[20].p.v!==0||c[21].p.k||c[21].p.v!==1)&&(this.feFuncG=this.createFeFunc("feFuncG",d)),(c[24].p.k||c[24].p.v!==0||c[25].p.k||c[25].p.v!==1||c[26].p.k||c[26].p.v!==1||c[27].p.k||c[27].p.v!==0||c[28].p.k||c[28].p.v!==1)&&(this.feFuncB=this.createFeFunc("feFuncB",d)),(c[31].p.k||c[31].p.v!==0||c[32].p.k||c[32].p.v!==1||c[33].p.k||c[33].p.v!==1||c[34].p.k||c[34].p.v!==0||c[35].p.k||c[35].p.v!==1)&&(this.feFuncA=this.createFeFunc("feFuncA",d)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(d.setAttribute("color-interpolation-filters","sRGB"),e.appendChild(d)),(c[3].p.k||c[3].p.v!==0||c[4].p.k||c[4].p.v!==1||c[5].p.k||c[5].p.v!==1||c[6].p.k||c[6].p.v!==0||c[7].p.k||c[7].p.v!==1)&&(d=createNS("feComponentTransfer"),d.setAttribute("color-interpolation-filters","sRGB"),d.setAttribute("result",o),e.appendChild(d),this.feFuncRComposed=this.createFeFunc("feFuncR",d),this.feFuncGComposed=this.createFeFunc("feFuncG",d),this.feFuncBComposed=this.createFeFunc("feFuncB",d))}SVGProLevelsFilter.prototype.createFeFunc=function(e,a){var i=createNS(e);return i.setAttribute("type","table"),a.appendChild(i),i},SVGProLevelsFilter.prototype.getTableValue=function(e,a,i,o,c){for(var d=0,g=256,b,j=Math.min(e,a),$=Math.max(e,a),rt=Array.call(null,{length:g}),_e,st=0,ut=c-o,gt=a-e;d<=256;)b=d/256,b<=j?_e=gt<0?c:o:b>=$?_e=gt<0?o:c:_e=o+ut*Math.pow((b-e)/gt,1/i),rt[st]=_e,st+=1,d+=256/(g-1);return rt.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var a,i=this.filterManager.effectElements;this.feFuncRComposed&&(e||i[3].p._mdf||i[4].p._mdf||i[5].p._mdf||i[6].p._mdf||i[7].p._mdf)&&(a=this.getTableValue(i[3].p.v,i[4].p.v,i[5].p.v,i[6].p.v,i[7].p.v),this.feFuncRComposed.setAttribute("tableValues",a),this.feFuncGComposed.setAttribute("tableValues",a),this.feFuncBComposed.setAttribute("tableValues",a)),this.feFuncR&&(e||i[10].p._mdf||i[11].p._mdf||i[12].p._mdf||i[13].p._mdf||i[14].p._mdf)&&(a=this.getTableValue(i[10].p.v,i[11].p.v,i[12].p.v,i[13].p.v,i[14].p.v),this.feFuncR.setAttribute("tableValues",a)),this.feFuncG&&(e||i[17].p._mdf||i[18].p._mdf||i[19].p._mdf||i[20].p._mdf||i[21].p._mdf)&&(a=this.getTableValue(i[17].p.v,i[18].p.v,i[19].p.v,i[20].p.v,i[21].p.v),this.feFuncG.setAttribute("tableValues",a)),this.feFuncB&&(e||i[24].p._mdf||i[25].p._mdf||i[26].p._mdf||i[27].p._mdf||i[28].p._mdf)&&(a=this.getTableValue(i[24].p.v,i[25].p.v,i[26].p.v,i[27].p.v,i[28].p.v),this.feFuncB.setAttribute("tableValues",a)),this.feFuncA&&(e||i[31].p._mdf||i[32].p._mdf||i[33].p._mdf||i[34].p._mdf||i[35].p._mdf)&&(a=this.getTableValue(i[31].p.v,i[32].p.v,i[33].p.v,i[34].p.v,i[35].p.v),this.feFuncA.setAttribute("tableValues",a))}};function SVGDropShadowEffect(e,a,i,o,c){var d=a.container.globalData.renderConfig.filterSize,g=a.data.fs||d;e.setAttribute("x",g.x||d.x),e.setAttribute("y",g.y||d.y),e.setAttribute("width",g.width||d.width),e.setAttribute("height",g.height||d.height),this.filterManager=a;var b=createNS("feGaussianBlur");b.setAttribute("in","SourceAlpha"),b.setAttribute("result",o+"_drop_shadow_1"),b.setAttribute("stdDeviation","0"),this.feGaussianBlur=b,e.appendChild(b);var j=createNS("feOffset");j.setAttribute("dx","25"),j.setAttribute("dy","0"),j.setAttribute("in",o+"_drop_shadow_1"),j.setAttribute("result",o+"_drop_shadow_2"),this.feOffset=j,e.appendChild(j);var $=createNS("feFlood");$.setAttribute("flood-color","#00ff00"),$.setAttribute("flood-opacity","1"),$.setAttribute("result",o+"_drop_shadow_3"),this.feFlood=$,e.appendChild($);var rt=createNS("feComposite");rt.setAttribute("in",o+"_drop_shadow_3"),rt.setAttribute("in2",o+"_drop_shadow_2"),rt.setAttribute("operator","in"),rt.setAttribute("result",o+"_drop_shadow_4"),e.appendChild(rt);var _e=this.createMergeNode(o,[o+"_drop_shadow_4",c]);e.appendChild(_e)}extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){if((e||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),e||this.filterManager.effectElements[0].p._mdf){var a=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(a[0]*255),Math.round(a[1]*255),Math.round(a[2]*255)))}if((e||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),e||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var i=this.filterManager.effectElements[3].p.v,o=(this.filterManager.effectElements[2].p.v-90)*degToRads,c=i*Math.cos(o),d=i*Math.sin(o);this.feOffset.setAttribute("dx",c),this.feOffset.setAttribute("dy",d)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(e,a,i){this.initialized=!1,this.filterManager=a,this.filterElem=e,this.elem=i,i.matteElement=createNS("g"),i.matteElement.appendChild(i.layerElement),i.matteElement.appendChild(i.transformedElement),i.baseElement=i.matteElement}SVGMatte3Effect.prototype.findSymbol=function(e){for(var a=0,i=_svgMatteSymbols.length;a<i;){if(_svgMatteSymbols[a]===e)return _svgMatteSymbols[a];a+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(e,a){var i=e.layerElement.parentNode;if(i){for(var o=i.children,c=0,d=o.length;c<d&&o[c]!==e.layerElement;)c+=1;var g;c<=d-2&&(g=o[c+1]);var b=createNS("use");b.setAttribute("href","#"+a),g?i.insertBefore(b,g):i.appendChild(b)}},SVGMatte3Effect.prototype.setElementAsMask=function(e,a){if(!this.findSymbol(a)){var i=createElementID(),o=createNS("mask");o.setAttribute("id",a.layerId),o.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(a);var c=e.globalData.defs;c.appendChild(o);var d=createNS("symbol");d.setAttribute("id",i),this.replaceInParent(a,i),d.appendChild(a.layerElement),c.appendChild(d);var g=createNS("use");g.setAttribute("href","#"+i),o.appendChild(g),a.data.hd=!1,a.show()}e.setMatte(a.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var e=this.filterManager.effectElements[0].p.v,a=this.elem.comp.elements,i=0,o=a.length;i<o;)a[i]&&a[i].data.ind===e&&this.setElementAsMask(this.elem,a[i]),i+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()};function SVGGaussianBlurEffect(e,a,i,o){e.setAttribute("x","-100%"),e.setAttribute("y","-100%"),e.setAttribute("width","300%"),e.setAttribute("height","300%"),this.filterManager=a;var c=createNS("feGaussianBlur");c.setAttribute("result",o),e.appendChild(c),this.feGaussianBlur=c}SVGGaussianBlurEffect.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var a=.3,i=this.filterManager.effectElements[0].p.v*a,o=this.filterManager.effectElements[1].p.v,c=o==3?0:i,d=o==2?0:i;this.feGaussianBlur.setAttribute("stdDeviation",c+" "+d);var g=this.filterManager.effectElements[2].p.v==1?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",g)}};function TransformEffect(){}TransformEffect.prototype.init=function(e){this.effectsManager=e,this.type=effectTypes.TRANSFORM_EFFECT,this.matrix=new Matrix,this.opacity=-1,this._mdf=!1,this._opMdf=!1},TransformEffect.prototype.renderFrame=function(e){if(this._opMdf=!1,this._mdf=!1,e||this.effectsManager._mdf){var a=this.effectsManager.effectElements,i=a[0].p.v,o=a[1].p.v,c=a[2].p.v===1,d=a[3].p.v,g=c?d:a[4].p.v,b=a[5].p.v,j=a[6].p.v,$=a[7].p.v;this.matrix.reset(),this.matrix.translate(-i[0],-i[1],i[2]),this.matrix.scale(g*.01,d*.01,1),this.matrix.rotate(-$*degToRads),this.matrix.skewFromAxis(-b*degToRads,(j+90)*degToRads),this.matrix.translate(o[0],o[1],0),this._mdf=!0,this.opacity!==a[8].p.v&&(this.opacity=a[8].p.v,this._opMdf=!0)}};function SVGTransformEffect(e,a){this.init(a)}extendPrototype([TransformEffect],SVGTransformEffect);function CVTransformEffect(e){this.init(e)}return extendPrototype([TransformEffect],CVTransformEffect),registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect$1(20,SVGTintFilter,!0),registerEffect$1(21,SVGFillFilter,!0),registerEffect$1(22,SVGStrokeEffect,!1),registerEffect$1(23,SVGTritoneFilter,!0),registerEffect$1(24,SVGProLevelsFilter,!0),registerEffect$1(25,SVGDropShadowEffect,!0),registerEffect$1(28,SVGMatte3Effect,!1),registerEffect$1(29,SVGGaussianBlurEffect,!0),registerEffect$1(35,SVGTransformEffect,!1),registerEffect(35,CVTransformEffect),lottie})})(lottie$1,lottie$1.exports);var lottieExports=lottie$1.exports;const lottie=getDefaultExportFromCjs(lottieExports);function _iterableToArrayLimit(e,a){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var o,c,d,g,b=[],j=!0,$=!1;try{if(d=(i=i.call(e)).next,a===0){if(Object(i)!==i)return;j=!1}else for(;!(j=(o=d.call(i)).done)&&(b.push(o.value),b.length!==a);j=!0);}catch(rt){$=!0,c=rt}finally{try{if(!j&&i.return!=null&&(g=i.return(),Object(g)!==g))return}finally{if($)throw c}}return b}}function ownKeys(e,a){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);a&&(o=o.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),i.push.apply(i,o)}return i}function _objectSpread2(e){for(var a=1;a<arguments.length;a++){var i=arguments[a]!=null?arguments[a]:{};a%2?ownKeys(Object(i),!0).forEach(function(o){_defineProperty(e,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(i,o))})}return e}function _defineProperty(e,a,i){return a=_toPropertyKey(a),a in e?Object.defineProperty(e,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[a]=i,e}function _objectWithoutPropertiesLoose(e,a){if(e==null)return{};var i={},o=Object.keys(e),c,d;for(d=0;d<o.length;d++)c=o[d],!(a.indexOf(c)>=0)&&(i[c]=e[c]);return i}function _objectWithoutProperties(e,a){if(e==null)return{};var i=_objectWithoutPropertiesLoose(e,a),o,c;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(c=0;c<d.length;c++)o=d[c],!(a.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}function _slicedToArray(e,a){return _arrayWithHoles(e)||_iterableToArrayLimit(e,a)||_unsupportedIterableToArray(e,a)||_nonIterableRest()}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _unsupportedIterableToArray(e,a){if(e){if(typeof e=="string")return _arrayLikeToArray(e,a);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(e,a)}}function _arrayLikeToArray(e,a){(a==null||a>e.length)&&(a=e.length);for(var i=0,o=new Array(a);i<a;i++)o[i]=e[i];return o}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _toPrimitive(e,a){if(typeof e!="object"||e===null)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var o=i.call(e,a||"default");if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(e)}function _toPropertyKey(e){var a=_toPrimitive(e,"string");return typeof a=="symbol"?a:String(a)}var _excluded$1=["animationData","loop","autoplay","initialSegment","onComplete","onLoopComplete","onEnterFrame","onSegmentStart","onConfigReady","onDataReady","onDataFailed","onLoadedImages","onDOMLoaded","onDestroy","lottieRef","renderer","name","assetsPath","rendererSettings"],useLottie=function e(a,i){var o=a.animationData,c=a.loop,d=a.autoplay,g=a.initialSegment,b=a.onComplete,j=a.onLoopComplete,$=a.onEnterFrame,rt=a.onSegmentStart,_e=a.onConfigReady,st=a.onDataReady,ut=a.onDataFailed,gt=a.onLoadedImages,yt=a.onDOMLoaded,Pt=a.onDestroy;a.lottieRef,a.renderer,a.name,a.assetsPath,a.rendererSettings;var wt=_objectWithoutProperties(a,_excluded$1),Ct=reactExports$1.useState(!1),At=_slicedToArray(Ct,2),Tt=At[0],kt=At[1],It=reactExports$1.useRef(),Lt=reactExports$1.useRef(null),Ft=function(){var Zn;(Zn=It.current)===null||Zn===void 0||Zn.play()},Nt=function(){var Zn;(Zn=It.current)===null||Zn===void 0||Zn.stop()},Ht=function(){var Zn;(Zn=It.current)===null||Zn===void 0||Zn.pause()},Gr=function(Zn){var xu;(xu=It.current)===null||xu===void 0||xu.setSpeed(Zn)},hs=function(Zn,xu){var au;(au=It.current)===null||au===void 0||au.goToAndPlay(Zn,xu)},_s=function(Zn,xu){var au;(au=It.current)===null||au===void 0||au.goToAndStop(Zn,xu)},hn=function(Zn){var xu;(xu=It.current)===null||xu===void 0||xu.setDirection(Zn)},Qn=function(Zn,xu){var au;(au=It.current)===null||au===void 0||au.playSegments(Zn,xu)},ds=function(Zn){var xu;(xu=It.current)===null||xu===void 0||xu.setSubframe(Zn)},un=function(Zn){var xu;return(xu=It.current)===null||xu===void 0?void 0:xu.getDuration(Zn)},dr=function(){var Zn;(Zn=It.current)===null||Zn===void 0||Zn.destroy(),It.current=void 0},us=function(){var Zn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},xu;if(Lt.current){(xu=It.current)===null||xu===void 0||xu.destroy();var au=_objectSpread2(_objectSpread2(_objectSpread2({},a),Zn),{},{container:Lt.current});return It.current=lottie.loadAnimation(au),kt(!!It.current),function(){var Vv;(Vv=It.current)===null||Vv===void 0||Vv.destroy(),It.current=void 0}}};reactExports$1.useEffect(function(){var gn=us();return function(){return gn==null?void 0:gn()}},[o,c]),reactExports$1.useEffect(function(){It.current&&(It.current.autoplay=!!d)},[d]),reactExports$1.useEffect(function(){if(It.current){if(!g){It.current.resetSegments(!0);return}!Array.isArray(g)||!g.length||((It.current.currentRawFrame<g[0]||It.current.currentRawFrame>g[1])&&(It.current.currentRawFrame=g[0]),It.current.setSegment(g[0],g[1]))}},[g]),reactExports$1.useEffect(function(){var gn=[{name:"complete",handler:b},{name:"loopComplete",handler:j},{name:"enterFrame",handler:$},{name:"segmentStart",handler:rt},{name:"config_ready",handler:_e},{name:"data_ready",handler:st},{name:"data_failed",handler:ut},{name:"loaded_images",handler:gt},{name:"DOMLoaded",handler:yt},{name:"destroy",handler:Pt}],Zn=gn.filter(function(au){return au.handler!=null});if(Zn.length){var xu=Zn.map(function(au){var Vv;return(Vv=It.current)===null||Vv===void 0||Vv.addEventListener(au.name,au.handler),function(){var wu;(wu=It.current)===null||wu===void 0||wu.removeEventListener(au.name,au.handler)}});return function(){xu.forEach(function(au){return au()})}}},[b,j,$,rt,_e,st,ut,gt,yt,Pt]);var Nn=React$1.createElement("div",_objectSpread2({style:i,ref:Lt},wt));return{View:Nn,play:Ft,stop:Nt,pause:Ht,setSpeed:Gr,goToAndStop:_s,goToAndPlay:hs,setDirection:hn,playSegments:Qn,setSubframe:ds,getDuration:un,destroy:dr,animationContainerRef:Lt,animationLoaded:Tt,animationItem:It.current}};function getContainerVisibility(e){var a=e.getBoundingClientRect(),i=a.top,o=a.height,c=window.innerHeight-i,d=window.innerHeight+o;return c/d}function getContainerCursorPosition(e,a,i){var o=e.getBoundingClientRect(),c=o.top,d=o.left,g=o.width,b=o.height,j=(a-d)/g,$=(i-c)/b;return{x:j,y:$}}var useInitInteractivity=function e(a){var i=a.wrapperRef,o=a.animationItem,c=a.mode,d=a.actions;reactExports$1.useEffect(function(){var g=i.current;if(!(!g||!o||!d.length)){o.stop();var b=function(){var rt=null,_e=function(){var ut=getContainerVisibility(g),gt=d.find(function(Pt){var wt=Pt.visibility;return wt&&ut>=wt[0]&&ut<=wt[1]});if(gt){if(gt.type==="seek"&&gt.visibility&&gt.frames.length===2){var yt=gt.frames[0]+Math.ceil((ut-gt.visibility[0])/(gt.visibility[1]-gt.visibility[0])*gt.frames[1]);//! goToAndStop must be relative to the start of the current segment
o.goToAndStop(yt-o.firstFrame-1,!0)}gt.type==="loop"&&(rt===null||rt!==gt.frames||o.isPaused)&&(o.playSegments(gt.frames,!0),rt=gt.frames),gt.type==="play"&&o.isPaused&&(o.resetSegments(!0),o.play()),gt.type==="stop"&&o.goToAndStop(gt.frames[0]-o.firstFrame-1,!0)}};return document.addEventListener("scroll",_e),function(){document.removeEventListener("scroll",_e)}},j=function(){var rt=function(gt,yt){var Pt=gt,wt=yt;if(Pt!==-1&&wt!==-1){var Ct=getContainerCursorPosition(g,Pt,wt);Pt=Ct.x,wt=Ct.y}var At=d.find(function(It){var Lt=It.position;return Lt&&Array.isArray(Lt.x)&&Array.isArray(Lt.y)?Pt>=Lt.x[0]&&Pt<=Lt.x[1]&&wt>=Lt.y[0]&&wt<=Lt.y[1]:Lt&&!Number.isNaN(Lt.x)&&!Number.isNaN(Lt.y)?Pt===Lt.x&&wt===Lt.y:!1});if(At){if(At.type==="seek"&&At.position&&Array.isArray(At.position.x)&&Array.isArray(At.position.y)&&At.frames.length===2){var Tt=(Pt-At.position.x[0])/(At.position.x[1]-At.position.x[0]),kt=(wt-At.position.y[0])/(At.position.y[1]-At.position.y[0]);o.playSegments(At.frames,!0),o.goToAndStop(Math.ceil((Tt+kt)/2*(At.frames[1]-At.frames[0])),!0)}At.type==="loop"&&o.playSegments(At.frames,!0),At.type==="play"&&(o.isPaused&&o.resetSegments(!1),o.playSegments(At.frames)),At.type==="stop"&&o.goToAndStop(At.frames[0],!0)}},_e=function(gt){rt(gt.clientX,gt.clientY)},st=function(){rt(-1,-1)};return g.addEventListener("mousemove",_e),g.addEventListener("mouseout",st),function(){g.removeEventListener("mousemove",_e),g.removeEventListener("mouseout",st)}};switch(c){case"scroll":return b();case"cursor":return j()}}},[c,o])},useLottieInteractivity=function e(a){var i=a.actions,o=a.mode,c=a.lottieObj,d=c.animationItem,g=c.View,b=c.animationContainerRef;return useInitInteractivity({actions:i,animationItem:d,mode:o,wrapperRef:b}),g},_excluded=["style","interactivity"],Lottie=function e(a){var i,o,c,d=a.style,g=a.interactivity,b=_objectWithoutProperties(a,_excluded),j=useLottie(b,d),$=j.View,rt=j.play,_e=j.stop,st=j.pause,ut=j.setSpeed,gt=j.goToAndStop,yt=j.goToAndPlay,Pt=j.setDirection,wt=j.playSegments,Ct=j.setSubframe,At=j.getDuration,Tt=j.destroy,kt=j.animationContainerRef,It=j.animationLoaded,Lt=j.animationItem;return reactExports$1.useEffect(function(){a.lottieRef&&(a.lottieRef.current={play:rt,stop:_e,pause:st,setSpeed:ut,goToAndPlay:yt,goToAndStop:gt,setDirection:Pt,playSegments:wt,setSubframe:Ct,getDuration:At,destroy:Tt,animationContainerRef:kt,animationLoaded:It,animationItem:Lt})},[(i=a.lottieRef)===null||i===void 0?void 0:i.current]),useLottieInteractivity({lottieObj:{View:$,play:rt,stop:_e,pause:st,setSpeed:ut,goToAndStop:gt,goToAndPlay:yt,setDirection:Pt,playSegments:wt,setSubframe:Ct,getDuration:At,destroy:Tt,animationContainerRef:kt,animationLoaded:It,animationItem:Lt},actions:(o=g==null?void 0:g.actions)!==null&&o!==void 0?o:[],mode:(c=g==null?void 0:g.mode)!==null&&c!==void 0?c:"scroll"})};const SuccessModal=({SuccesTxt:e,successFunc:a})=>jsxRuntimeExports.jsx("div",{className:"successModalDiv",children:jsxRuntimeExports.jsxs("div",{className:"successModalDiv_cont",children:[jsxRuntimeExports.jsx("div",{className:"successModalDiv_cont_animation",children:jsxRuntimeExports.jsx(Lottie,{animationData:successLoader,loop:!1,autoPlay:!0,className:"successModalDiv_cont_animation_icon",preserveAspectRatio:"xMidYMid meet"})}),jsxRuntimeExports.jsxs("div",{className:"successModalDiv_cont_body",children:[jsxRuntimeExports.jsx("div",{className:"successModalDiv_cont_body_title",children:"Success"}),jsxRuntimeExports.jsx("div",{className:"successModalDiv_cont_body_para",children:e})]}),jsxRuntimeExports.jsx("div",{className:"successModalDiv_cont_button_div",children:jsxRuntimeExports.jsx("button",{className:"successModalDiv_cont_button",onClick:a,children:"Continue"})})]})}),v="4.8.0",meta={g:"LottieFiles AE ",a:"",k:"",d:"",tc:""},fr=24,ip=0,op=59,w=1080,h=1080,nm="X",ddd=0,assets=[],layers=[{ddd:0,ind:1,ty:4,nm:"asterisco 2",sr:1,ks:{o:{a:1,k:[{i:{x:[.65],y:[1]},o:{x:[.35],y:[0]},t:41,s:[100]},{t:48,s:[0]}],ix:11},r:{a:1,k:[{i:{x:[.65],y:[1]},o:{x:[.35],y:[0]},t:29,s:[0]},{t:38,s:[90]}],ix:10},p:{a:1,k:[{i:{x:.38,y:1},o:{x:.167,y:.167},t:14,s:[552.625,563.5,0],to:[-54.333,177.667,0],ti:[152.333,-20.167,0]},{t:26,s:[138.625,967.5,0]}],ix:2},a:{a:0,k:[415.625,-457.5,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[436.5,-435.75],[390.875,-481.375]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.709803921569,.227450980392,.227450980392,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[.227450995352,.709803921569,.290196078431,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 4",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[392.25,-435.5],[439.75,-482.5]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.709803921569,.227450980392,.227450980392,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[.227450995352,.709803921569,.290196078431,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 3",np:3,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[415,-425.25],[415,-489.75]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.709803921569,.227450980392,.227450980392,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[.227450995352,.709803921569,.290196078431,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 2",np:3,cix:2,bm:0,ix:3,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[384.25,-457],[447,-457]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.709803921569,.227450980392,.227450980392,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[.227450995352,.709803921569,.290196078431,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:4,mn:"ADBE Vector Group",hd:!1}],ip:14,op:73,st:14,bm:0},{ddd:0,ind:2,ty:4,nm:"asterisco",sr:1,ks:{o:{a:1,k:[{i:{x:[.65],y:[1]},o:{x:[.35],y:[0]},t:38,s:[100]},{t:45,s:[0]}],ix:11},r:{a:1,k:[{i:{x:[.65],y:[1]},o:{x:[.35],y:[0]},t:26,s:[0]},{t:35,s:[90]}],ix:10},p:{a:1,k:[{i:{x:.38,y:1},o:{x:.167,y:.167},t:11,s:[555.625,540.5,0],to:[58.667,-208.333,0],ti:[-145.667,14.333,0]},{t:23,s:[939.125,146.5,0]}],ix:2},a:{a:0,k:[415.625,-457.5,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[436.5,-435.75],[390.875,-481.375]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.709803921569,.227450980392,.227450980392,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[.227450995352,.709803921569,.290196078431,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 4",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[392.25,-435.5],[439.75,-482.5]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.709803921569,.227450980392,.227450980392,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[.227450995352,.709803921569,.290196078431,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 3",np:3,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[415,-425.25],[415,-489.75]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.709803921569,.227450980392,.227450980392,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[.227450995352,.709803921569,.290196078431,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 2",np:3,cix:2,bm:0,ix:3,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[384.25,-457],[447,-457]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.709803921569,.227450980392,.227450980392,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[.227450995352,.709803921569,.290196078431,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:4,mn:"ADBE Vector Group",hd:!1}],ip:11,op:70,st:11,bm:0},{ddd:0,ind:3,ty:4,nm:"X",parent:5,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[-278.125,-292.563,0],ix:2},a:{a:0,k:[39.875,7.438,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-91,-131],[168,149]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[1,1,1,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:76,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[.913725490196,.732413677141,.732413677141,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 2",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-92,149],[171.75,-134.125]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[1,1,1,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:76,ix:5},lc:2,lj:2,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:2,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:0,k:0,ix:1},e:{a:1,k:[{i:{x:[.693],y:[.942]},o:{x:[.769],y:[0]},t:17,s:[0]},{t:29,s:[100]}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:3,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:17,op:76,st:17,bm:0},{ddd:0,ind:4,ty:4,nm:"Circulo linea",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[514,546,0],ix:2},a:{a:0,k:[-276,-296,0],ix:1},s:{a:1,k:[{i:{x:[.662,.662,.542],y:[1,1,-8.04]},o:{x:[.895,.895,.663],y:[.086,.086,0]},t:6,s:[0,0,100]},{i:{x:[.658,.658,.602],y:[1,1,1]},o:{x:[.362,.362,.275],y:[0,0,6.41]},t:17,s:[114.619,114.619,100]},{t:30,s:[85,85,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[724,724],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[.709803921569,.227450980392,.227450980392,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[-276,-296],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:5,op:35,st:1,bm:0},{ddd:0,ind:5,ty:4,nm:"Circulo",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[514,546,0],ix:2},a:{a:0,k:[-276,-296,0],ix:1},s:{a:1,k:[{i:{x:[.77,.77,.542],y:[1,1,-10.506]},o:{x:[.86,.86,.663],y:[.106,.106,0]},t:4,s:[0,0,100]},{i:{x:[.301,.301,.602],y:[1,1,1]},o:{x:[.484,.484,.275],y:[0,0,4.93]},t:18,s:[115,115,100]},{t:28,s:[100,100,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[681,681],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"fl",c:{a:0,k:[.907451076134,0,0,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[-276,-296],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:3,op:67,st:-1,bm:0},{ddd:0,ind:6,ty:4,nm:"Burbuja 4",sr:1,ks:{o:{a:1,k:[{i:{x:[.39],y:[1]},o:{x:[.61],y:[0]},t:33,s:[100]},{t:44,s:[0]}],ix:11},r:{a:0,k:226.48,ix:10},p:{a:1,k:[{i:{x:.39,y:1},o:{x:.61,y:0},t:13,s:[507,552,0],to:[-157.833,-198.5,0],ti:[103.333,13.5,0]},{t:43,s:[97.5,236.5,0]}],ix:2},a:{a:0,k:[-72,-212,0],ix:1},s:{a:1,k:[{i:{x:[.39,.39,.39],y:[1,1,1]},o:{x:[.61,.61,.61],y:[0,0,0]},t:13,s:[100,100,100]},{t:43,s:[100,100,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-4.25,-2],[.5,-4]],o:[[4.25,2],[-.5,4]],v:[[-63,-228],[-56.25,-215.5]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.709803921569,.227450980392,.227450980392,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:4,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[64,64],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[.709803921569,.227450980392,.227450980392,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:4,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[-72,-212],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:3,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1}],ip:13,op:72,st:13,bm:0},{ddd:0,ind:7,ty:4,nm:"Burbuja 3",sr:1,ks:{o:{a:1,k:[{i:{x:[.39],y:[1]},o:{x:[.61],y:[0]},t:36,s:[100]},{t:47,s:[0]}],ix:11},r:{a:0,k:169.291,ix:10},p:{a:1,k:[{i:{x:.39,y:1},o:{x:.61,y:0},t:16,s:[501,552,0],to:[-271.833,59.5,0],ti:[39.833,-87,0]},{t:46,s:[107.5,792.5,0]}],ix:2},a:{a:0,k:[-72,-212,0],ix:1},s:{a:1,k:[{i:{x:[.39,.39,.39],y:[1,1,1]},o:{x:[.61,.61,.61],y:[0,0,0]},t:16,s:[100,100,100]},{t:46,s:[100,100,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-4.25,-2],[.5,-4]],o:[[4.25,2],[-.5,4]],v:[[-63,-228],[-56.25,-215.5]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.709803921569,.227450980392,.227450980392,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:4,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[64,64],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[.709803921569,.227450980392,.227450980392,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:4,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[-72,-212],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:3,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1}],ip:16,op:75,st:16,bm:0},{ddd:0,ind:8,ty:4,nm:"Burbuja 2",sr:1,ks:{o:{a:1,k:[{i:{x:[.39],y:[1]},o:{x:[.61],y:[0]},t:33,s:[100]},{t:44,s:[0]}],ix:11},r:{a:0,k:68,ix:10},p:{a:1,k:[{i:{x:.39,y:1},o:{x:.61,y:0},t:13,s:[513,546,0],to:[76.167,107.5,0],ti:[-65.167,9,0]},{t:43,s:[891.5,736.5,0]}],ix:2},a:{a:0,k:[-72,-212,0],ix:1},s:{a:1,k:[{i:{x:[.39,.39,.39],y:[1,1,1]},o:{x:[.61,.61,.61],y:[0,0,0]},t:13,s:[100,100,100]},{t:43,s:[100,100,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-4.25,-2],[.5,-4]],o:[[4.25,2],[-.5,4]],v:[[-63,-228],[-56.25,-215.5]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.709803921569,.227450980392,.227450980392,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:4,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[64,64],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[.709803921569,.227450980392,.227450980392,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:4,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[-72,-212],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:3,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1}],ip:13,op:72,st:13,bm:0},{ddd:0,ind:9,ty:4,nm:"Burbuja 1",sr:1,ks:{o:{a:1,k:[{i:{x:[.39],y:[1]},o:{x:[.61],y:[0]},t:33,s:[100]},{t:44,s:[0]}],ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.39,y:1},o:{x:.61,y:0},t:13,s:[513,546,0],to:[44.167,-94.5,0],ti:[-65.167,9,0]},{t:43,s:[817.5,248.5,0]}],ix:2},a:{a:0,k:[-72,-212,0],ix:1},s:{a:1,k:[{i:{x:[.39,.39,.39],y:[1,1,1]},o:{x:[.61,.61,.61],y:[0,0,0]},t:13,s:[100,100,100]},{t:43,s:[100,100,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-4.25,-2],[.5,-4]],o:[[4.25,2],[-.5,4]],v:[[-63,-228],[-56.25,-215.5]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.709803921569,.227450980392,.227450980392,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:4,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[64,64],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[.709803921569,.227450980392,.227450980392,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:4,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[-72,-212],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:3,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1}],ip:13,op:72,st:13,bm:0},{ddd:0,ind:10,ty:4,nm:"Circulo fill back",sr:1,ks:{o:{a:1,k:[{i:{x:[.47],y:[1]},o:{x:[.53],y:[0]},t:9,s:[100]},{t:24,s:[0]}],ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[514,546,0],ix:2},a:{a:0,k:[-276,-296,0],ix:1},s:{a:1,k:[{i:{x:[.425,.425,.542],y:[1,1,-8.862]},o:{x:[.41,.41,.663],y:[.226,.226,0]},t:0,s:[0,0,100]},{t:12,s:[114.619,114.619,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[1186,1186],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"fl",c:{a:0,k:[1,.58509796741,.58509796741,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[-276,-296],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Ellipse 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:31,st:0,bm:0}],markers=[],errorLoader={v,meta,fr,ip,op,w,h,nm,ddd,assets,layers,markers},ErrorModal=({ErrorTxt:e,errorFunc:a})=>jsxRuntimeExports.jsx("div",{className:"successModalDiv",children:jsxRuntimeExports.jsxs("div",{className:"successModalDiv_cont",children:[jsxRuntimeExports.jsx("div",{className:"successModalDiv_cont_animation",children:jsxRuntimeExports.jsx(Lottie,{animationData:errorLoader,loop:!1,autoPlay:!0,className:"successModalDiv_cont_animation_icon",preserveAspectRatio:"xMidYMid meet"})}),jsxRuntimeExports.jsxs("div",{className:"successModalDiv_cont_body",children:[jsxRuntimeExports.jsx("div",{className:"successModalDiv_cont_body_title",children:"Error"}),jsxRuntimeExports.jsx("div",{className:"successModalDiv_cont_body_para",children:e})]}),jsxRuntimeExports.jsx("div",{className:"successModalDiv_cont_button_div",children:jsxRuntimeExports.jsx("button",{className:"errorModalDiv_cont_button",onClick:a,children:"Continue"})})]})}),Faucet=()=>{const[e,a]=reactExports$1.useState(""),[i,o]=reactExports$1.useState(!1),[c,d]=reactExports$1.useState(!1),[g,b]=reactExports$1.useState(""),[j,$]=reactExports$1.useState(""),[rt,_e]=reactExports$1.useState(!1),[st,ut]=reactExports$1.useState(!1),gt=async()=>{_e(!0),ut(!0);const Pt={wallet:e};try{const wt=await axios.post(API_URL+"/web3/faucet/submit-address",Pt,config);console.log(wt),wt.status===200?(console.log(wt),console.log(wt.data.data.message),o(!0),$("You have successfully claimed 1egax"),_e(!1),ut(!1),ut(!1)):(console.log(wt),o(!1),d(!0),b(wt.data.data.message),_e(!1),ut(!1))}catch(wt){console.log(wt.response),console.log(wt.response.data.errorMessage),b(wt.response.data.errorMessage),o(!1),d(!0),_e(!1),ut(!1)}},yt=Pt=>{a(Pt.target.value),console.log(Pt.target.value)};return jsxRuntimeExports.jsxs("div",{className:"Home_div_faucet",children:[jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsxs("div",{className:"Home_div_area",children:[jsxRuntimeExports.jsxs("div",{className:"Home_div_area_head",children:[jsxRuntimeExports.jsxs("div",{className:"Home_div_area_head_cont1",children:["EGAX ",jsxRuntimeExports.jsx("span",{className:"Home_div_area_head_span",children:" FAUCET"})," "]}),jsxRuntimeExports.jsx("div",{className:"Home_div_area_head_para",children:"Obtain EGO Chain Testnet tokens every 24 hours for seamless and confident development."})]}),jsxRuntimeExports.jsxs("div",{className:"Home_div_area_cont",children:[jsxRuntimeExports.jsxs("div",{className:"Home_div_area_cont_area1",children:[jsxRuntimeExports.jsxs("div",{className:"Home_div_area_cont_area1_cont1",children:[jsxRuntimeExports.jsx("div",{className:"Home_div_area_cont_area1_cont1_title",children:"Token"}),jsxRuntimeExports.jsxs("div",{className:"Home_div_area_cont_area1_cont1_div",children:[jsxRuntimeExports.jsx("img",{src:"/egax_logo.png",alt:"",className:"Home_div_area_cont_area1_cont1_div_img"}),"1 EGAX"]})]}),jsxRuntimeExports.jsxs("div",{className:"Home_div_area_cont_area1_cont2",children:[jsxRuntimeExports.jsx("div",{className:"Home_div_area_cont_area1_cont2_title",children:"Wallet Address"}),jsxRuntimeExports.jsx("input",{type:"text",onChange:yt,value:e,placeholder:"Enter your Ego Chain Testnet wallet address",className:"Home_div_area_cont_area1_cont2_input"})]})]}),e===""?jsxRuntimeExports.jsx("button",{className:"Home_div_area_cont_area2_btn",disabled:!0,children:"Send 1 EGAX"}):jsxRuntimeExports.jsx("button",{className:"Home_div_area_cont_area2_btn",onClick:gt,disabled:st,children:rt?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(_default,{color:"#366e51",height:20})," Sending..."]}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:" Send 1 EGAX"})})]})]})}),jsxRuntimeExports.jsx("img",{src:"/img/hero_bg_light.svg",alt:"",className:"home_div_section1_bg_light"}),jsxRuntimeExports.jsx("img",{src:"/img/test_hero_light2.svg",alt:"",className:"home_div_section1_bg_light2"}),jsxRuntimeExports.jsx(Grid,{}),jsxRuntimeExports.jsx("img",{src:"/img/grains_ellipse.png",alt:"",className:"grains_ellipse"}),i?jsxRuntimeExports.jsx(SuccessModal,{SuccesTxt:j,successFunc:()=>{window.location.href="/"}}):null,c?jsxRuntimeExports.jsx(ErrorModal,{ErrorTxt:g,errorFunc:()=>{d(!1)}}):null]})},Wallet=()=>jsxRuntimeExports.jsxs("div",{className:"wallet_div",children:[" ",jsxRuntimeExports.jsxs("section",{className:"wallet_div_section1",children:[jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsxs("div",{className:"wallet_div_section1_area",children:[jsxRuntimeExports.jsxs("div",{className:"wallet_div_section1_area_1",children:[jsxRuntimeExports.jsxs("div",{className:"wallet_div_section1_area_1_title",children:["Egochain Wallet",jsxRuntimeExports.jsx("br",{}),"Your"," ",jsxRuntimeExports.jsx("span",{className:"wallet_div_section1_area_1_title_span",children:"Gateway"})," ",jsxRuntimeExports.jsx("br",{}),"To Web3"]}),jsxRuntimeExports.jsx("div",{className:"wallet_div_section1_area_1_para",children:"Unleash the full potential of your cryptocurrency assets and delve into the innovative Web3 landscape on Egochain. Start your journey today!"}),jsxRuntimeExports.jsxs("div",{className:"wallet_div_section1_area_1_btn_divs",children:[" ",jsxRuntimeExports.jsx("a",{href:"https://play.google.com/store/apps/details?id=io.egox.dex&hl=be&gl=US",target:"_blank",children:jsxRuntimeExports.jsxs("button",{className:"header_div_area_2_btn",children:["Get App"," ",jsxRuntimeExports.jsx("img",{src:"/img/play_store_icon.png",alt:"",className:"header_div_area_2_btn_img"})]})}),jsxRuntimeExports.jsxs("button",{className:"header_div_area_2_btn2",children:[jsxRuntimeExports.jsxs("div",{className:"header_div_area_2_btn2_div",children:["Get App ",jsxRuntimeExports.jsx("span",{children:"coming soon"})]}),jsxRuntimeExports.jsx("img",{src:"/img/apple_store_icon.webp",alt:"",className:"header_div_area_2_btn2_img"})]})]})]}),jsxRuntimeExports.jsx("div",{className:"wallet_div_section2",children:jsxRuntimeExports.jsx("img",{src:"/img/wallet_hero_img_dummy.png",alt:"",className:"wallet_div_section2_img"})})]})}),jsxRuntimeExports.jsx("img",{src:"/img/hero_bg_light.svg",alt:"",className:"home_div_section1_bg_light"}),jsxRuntimeExports.jsx("img",{src:"/img/test_hero_light2.svg",alt:"",className:"home_div_section1_bg_light2"}),jsxRuntimeExports.jsx(Grid$2,{}),jsxRuntimeExports.jsx("img",{src:"/img/grains_ellipse.png",alt:"",className:"grains_ellipse"})]}),jsxRuntimeExports.jsxs("section",{className:"home_div_section2",children:[jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsx("div",{className:"home_div_section3_area",children:jsxRuntimeExports.jsxs("div",{className:"home_div_section3_area_body",children:[jsxRuntimeExports.jsxs("div",{className:"home_div_section3_area_body_cont1",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_title",children:"Security"}),jsxRuntimeExports.jsxs("div",{className:"home_div_section3_area_body_cont1_body_text",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_body_text_title",children:"Uncompromising Security"}),jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_body_text_para",children:"Egochain safeguards your wallet without ever touching your private keys or secret phrase. You, and only you, control your assets."})]}),jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_icon",children:jsxRuntimeExports.jsxs("svg",{"data-v-25ecef37":"","data-v-706ceafa":"",width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"4.08823",cy:"27.0335",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"27.9115",cy:"27.0335",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"16.0003",cy:"4.97105",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M14.0242 8.49609L5.62305 23.4981",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M17.9756 8.49609L26.3767 23.4981",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M8.05859 27.0273H23.9409",stroke:"white","stroke-width":"1.5"})]})})]}),jsxRuntimeExports.jsxs("div",{className:"home_div_section3_area_body_cont1",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_title",children:"Effortless"}),jsxRuntimeExports.jsxs("div",{className:"home_div_section3_area_body_cont1_body_text",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_body_text_title",children:"Effortless Exchange Deposits"}),jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_body_text_para",children:"Ditch the complexities. Deposit crypto directly from exchanges like MEXC with just a few clicks."})]}),jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_icon",children:jsxRuntimeExports.jsxs("svg",{"data-v-25ecef37":"","data-v-706ceafa":"",width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"4.08823",cy:"27.0335",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"27.9115",cy:"27.0335",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"16.0003",cy:"4.97105",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M14.0242 8.49609L5.62305 23.4981",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M17.9756 8.49609L26.3767 23.4981",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M8.05859 27.0273H23.9409",stroke:"white","stroke-width":"1.5"})]})})]}),jsxRuntimeExports.jsxs("div",{className:"home_div_section3_area_body_cont1",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_title",children:"Experience"}),jsxRuntimeExports.jsxs("div",{className:"home_div_section3_area_body_cont1_body_text",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_body_text_title",children:"Intuitive Mobile Experience"}),jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_body_text_para",children:"Navigate your Web3 journey with ease. Our user-friendly mobile app empowers you with powerful tools for seamless crypto management."})]}),jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_icon",children:jsxRuntimeExports.jsxs("svg",{"data-v-25ecef37":"","data-v-706ceafa":"",width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"4.08823",cy:"27.0335",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"27.9115",cy:"27.0335",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"16.0003",cy:"4.97105",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M14.0242 8.49609L5.62305 23.4981",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M17.9756 8.49609L26.3767 23.4981",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M8.05859 27.0273H23.9409",stroke:"white","stroke-width":"1.5"})]})})]}),jsxRuntimeExports.jsxs("div",{className:"home_div_section3_area_body_cont1",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_title",children:"Data"}),jsxRuntimeExports.jsxs("div",{className:"home_div_section3_area_body_cont1_body_text",children:[jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_body_text_title",children:"Data Sovereignty"}),jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_body_text_para",children:"Enjoy the peace of mind knowing your data belongs to you. Egochain generates passwords and keys directly on your device, giving you complete control over sharing and privacy."})]}),jsxRuntimeExports.jsx("div",{className:"home_div_section3_area_body_cont1_icon",children:jsxRuntimeExports.jsxs("svg",{"data-v-25ecef37":"","data-v-706ceafa":"",width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"4.08823",cy:"27.0335",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"27.9115",cy:"27.0335",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("circle",{"data-v-25ecef37":"","data-v-706ceafa":"",cx:"16.0003",cy:"4.97105",r:"3.08824",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M14.0242 8.49609L5.62305 23.4981",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M17.9756 8.49609L26.3767 23.4981",stroke:"white","stroke-width":"1.5"})," ",jsxRuntimeExports.jsx("path",{"data-v-25ecef37":"","data-v-706ceafa":"",d:"M8.05859 27.0273H23.9409",stroke:"white","stroke-width":"1.5"})]})})]})]})})}),jsxRuntimeExports.jsx("img",{src:"/img/grains_bottom.png",alt:"",className:"grains_ellipse"}),jsxRuntimeExports.jsx("img",{src:"/img/test_hero_light3.svg",alt:"",className:"home_div_section1_bg_light3"})]}),jsxRuntimeExports.jsxs("section",{className:"wallet_div_section_last",children:[jsxRuntimeExports.jsx("div",{className:"container",children:jsxRuntimeExports.jsxs("div",{className:"wallet_div_section_last_area",children:[jsxRuntimeExports.jsxs("div",{className:"wallet_div_section_last_area_1",children:[jsxRuntimeExports.jsx("div",{className:"wallet_div_section_last_area_1_title",children:"Choose Egochain and unlock a world of crypto freedom"}),jsxRuntimeExports.jsxs("div",{className:"wallet_div_section_last_area_1_btns",children:[jsxRuntimeExports.jsx("a",{href:"https://play.google.com/store/apps/details?id=io.egox.dex&hl=be&gl=US",target:"_blank",children:jsxRuntimeExports.jsxs("button",{className:"header_div_area_2_btn",children:["Get App"," ",jsxRuntimeExports.jsx("img",{src:"/img/play_store_icon.png",alt:"",className:"header_div_area_2_btn_img"})]})}),jsxRuntimeExports.jsxs("button",{className:"header_div_area_2_btn2",children:[jsxRuntimeExports.jsxs("div",{className:"header_div_area_2_btn2_div",children:["Get App ",jsxRuntimeExports.jsx("span",{children:"coming soon"})]}),jsxRuntimeExports.jsx("img",{src:"/img/apple_store_icon.webp",alt:"",className:"header_div_area_2_btn2_img"})]})]})]}),jsxRuntimeExports.jsx("div",{className:"wallet_div_section_last_area_2",children:jsxRuntimeExports.jsx("img",{src:"/img/wallet_last_section_img.png",alt:"",className:"wallet_div_section_last_area_2_img"})})]})}),jsxRuntimeExports.jsx("img",{src:"/img/test_hero_light3.svg",alt:"",className:"home_div_section1_bg_light3"}),jsxRuntimeExports.jsx("img",{src:"/img/grains_ellipse.png",alt:"",className:"grains_ellipse"}),jsxRuntimeExports.jsx(Grid$2,{})]})]});function App(){return window.location.host.split(".")[0]==="faucet"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Header,{}),jsxRuntimeExports.jsx(Faucet,{}),jsxRuntimeExports.jsx(Footer,{})]}):jsxRuntimeExports.jsxs("div",{className:"App",children:[jsxRuntimeExports.jsx(Header,{}),jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(Home,{})}),jsxRuntimeExports.jsx(Route,{path:"/wallet",element:jsxRuntimeExports.jsx(Wallet,{})}),jsxRuntimeExports.jsx(Route,{path:"/privacy",element:jsxRuntimeExports.jsx(Privacy,{})}),jsxRuntimeExports.jsx(Route,{path:"/whitepaper",element:jsxRuntimeExports.jsx(WhitePaper,{})}),jsxRuntimeExports.jsx(Route,{path:"/terms",element:jsxRuntimeExports.jsx(TermsAndConditions,{})}),jsxRuntimeExports.jsx(Route,{path:"/egc/coin/info",element:jsxRuntimeExports.jsx(Egc,{})}),jsxRuntimeExports.jsx(Route,{path:"/egax/coin/info",element:jsxRuntimeExports.jsx(Egax,{})}),jsxRuntimeExports.jsx(Route,{path:"/about",element:jsxRuntimeExports.jsx(RoadMapPage,{})})]}),jsxRuntimeExports.jsx(Footer,{})]})}client.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsx(App,{})}));export{commonjsGlobal as c,getDefaultExportFromCjs as g};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
